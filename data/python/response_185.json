[{"tags": ["python", "visual-studio", "compiler-errors", "pip", "environment-variables"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1532562694, "post_id": 51529158, "comment_id": 90026623, "body": "It sounds like you haven&#39;t run the appropriate <code>vcvars</code>  batch file (or used the Start Menu item that opens a new console with it automatically taken care of for you)."}, {"owner": {"reputation": 53, "user_id": 6472620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9f9ec9a1f7e40104a20af8a17b276c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Magsam", "link": "https://stackoverflow.com/users/6472620/alex-magsam"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1532562786, "post_id": 51529158, "comment_id": 90026639, "body": "How to do this?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1532562809, "post_id": 51529158, "comment_id": 90026647, "body": "I think <a href=\"https://wiki.python.org/moin/WindowsCompilers#Microsoft_Visual_C.2B-.2B-_10.0_standalone:_Windows_SDK_7.1_.28x86.2C_x64.2C_ia64.29\" rel=\"nofollow noreferrer\">the wiki</a> has the up-to-date instructions for every combination of Windows, Python, and compiler."}, {"owner": {"reputation": 53, "user_id": 6472620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9f9ec9a1f7e40104a20af8a17b276c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Magsam", "link": "https://stackoverflow.com/users/6472620/alex-magsam"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1532563557, "post_id": 51529158, "comment_id": 90026788, "body": "I downloaded the Build Tools again and I ran the same commands from Visual Studio Developer Command Prompt and recieved this error:  fatal error LNK1112: module machine type &#39;x64&#39; conflicts with target machine type &#39;x86&#39;, but I am sure I downloaded the right Visual Studio (x64) for my 64-bit computer."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1532563672, "post_id": 51529158, "comment_id": 90026809, "body": "You&#39;re obviously mixing 32-bit (x86) and 64-bit (x86_64, sometimes called x64) tools. If you installed 32-bit Python, you need a 32-bit compiler; if you installed 64-bit Python, you need a 64-bit compiler. This is explained in the introduction to the wiki page."}, {"owner": {"reputation": 53, "user_id": 6472620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9f9ec9a1f7e40104a20af8a17b276c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Magsam", "link": "https://stackoverflow.com/users/6472620/alex-magsam"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1532564704, "post_id": 51529158, "comment_id": 90026998, "body": "Installing Build Tools installs both 32-bit and 64-bit. I solved my problem by opening the x64 Native Tools Command Prompt that comes with Visual Studio&#39;s Build Tools and running pip javabridge. Before I was using Developer Command Prompt for VS 2017, which uses 32-bit compilers?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1532565913, "post_id": 51529158, "comment_id": 90027206, "body": "Microsoft changes the names of the different &quot;command prompt&quot; options with each version, so I can&#39;t keep track of them. But yes, I guess &quot;Developer Command Prompt&quot; is 32-bit x86 for some reason, and &quot;x64 Native Tools Command Prompt&quot; definitely should be 64-bit  x64, so that makes sense."}], "owner": {"reputation": 53, "user_id": 6472620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9f9ec9a1f7e40104a20af8a17b276c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Magsam", "link": "https://stackoverflow.com/users/6472620/alex-magsam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 202, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1532562479, "creation_date": 1532562479, "question_id": 51529158, "link": "https://stackoverflow.com/questions/51529158/compiler-errors-using-pip-to-install-javabridge", "title": "Compiler errors using pip to install javabridge", "body": "<p>I am running Windows 10, Python 3.6.5, Visual Studio 2017, MinGW current version and am having trouble installing javabridge, a python package with dependencies: JDK, NumPy, Python 2.7 or above, and a C compiler.</p>\n\n<p>My first error was due to the fact that the file cl.exe could not be located. After doing some research I found this file was in </p>\n\n<pre><code>C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.14.26428\\bin\\Hostx64\\x64\n</code></pre>\n\n<p>Adding this directory to the environment variable 'Path' solved this issue. Now I am running into the issue that 'io.h' cannot be found. </p>\n\n<pre><code> Cannot open include file: 'io.h': No such file or directory\n    error: command 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\Community\\\\VC\\\\Tools\\\\MSVC\\\\14.14.26428\\\\bin\\\\Hostx64\\\\x64\\\\cl.exe' failed with exit status 2\n</code></pre>\n\n<p>I have tried downloading and running setup.py install, but the same error occurs. </p>\n\n<p>My question is: \nHow can I edit my environment variables to include io.h and all other directories used by C compiler from pip? If there are other workarounds I'd be happy to hear. </p>\n"}, {"tags": ["python", "python-2.7", "versioning", "renaming", "copying"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1532562143, "post_id": 51529104, "comment_id": 90026504, "body": "Do you have a question? &quot;Need python scripts&quot; is not a question."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 2, "creation_date": 1532562526, "post_id": 51529104, "comment_id": 90026585, "body": "If you have some code that&#39;s close to working but doesn&#39;t work, and you want help fixing it, instead of telling us a story about it, post the code (reduced to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>), tell us what it does wrong (by showing the desired vs. actual output), and tell us where you&#39;re stuck trying to fix it, and we can show you how to fix it."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10136146, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pHmZRZfRvPs/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rVzRJG3-mbEl3LHi-z9F-H6lMwxQ/mo/photo.jpg?sz=128", "display_name": "Sengkar Lhalung", "link": "https://stackoverflow.com/users/10136146/sengkar-lhalung"}, "edited": false, "score": 0, "creation_date": 1532565265, "post_id": 51529333, "comment_id": 90027094, "body": "file name is like &quot;fish_modlUV_v001.ma&quot;. This filename has 4 segments. fish, modlUV, v001 and ext. I am wondering if script detects all these segments and get v001 and add 1 number to increment the version. So it will be &quot;fish_modlUV_v002.ma&quot;"}], "tags": [], "owner": {"reputation": 121, "user_id": 9085914, "user_type": "registered", "profile_image": "https://graph.facebook.com/10159947405770529/picture?type=large", "display_name": "Hossam Ashraf", "link": "https://stackoverflow.com/users/9085914/hossam-ashraf"}, "is_accepted": false, "score": 0, "last_activity_date": 1532564105, "creation_date": 1532564105, "answer_id": 51529333, "question_id": 51529104, "link": "https://stackoverflow.com/questions/51529104/python-scripts-for-copying-and-renaming/51529333#51529333", "title": "python scripts for copying and renaming", "body": "<p>you can use f strings</p>\n\n<ol>\n<li>for v in range(0,len(your_list):</li>\n<li>name_of_file = f'v{n:03}'</li>\n</ol>\n\n<p>if you show me an example of the file name I could be able to help</p>\n"}, {"tags": [], "owner": {"reputation": 528, "user_id": 10005697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/py7rV.jpg?s=128&g=1", "display_name": "SamrajM", "link": "https://stackoverflow.com/users/10005697/samrajm"}, "is_accepted": false, "score": 0, "last_activity_date": 1532566127, "last_edit_date": 1532566127, "creation_date": 1532564135, "answer_id": 51529334, "question_id": 51529104, "link": "https://stackoverflow.com/questions/51529104/python-scripts-for-copying-and-renaming/51529334#51529334", "title": "python scripts for copying and renaming", "body": "<p>This site is used to ask for help with problems that you have tried yourself. In future, I recommend adding your own code and showing us where you are stuck so people can help you with that problem rather having them do the entire problem for you. I will give you some snippets of code which will help you, but you should try to help yourself by searching on these forums before asking a question which can be resolved with some prior research.</p>\n\n<p><strong>String Manipulation</strong></p>\n\n<p>I recommend reading up on string concatenation and string splicing on:</p>\n\n<p><a href=\"https://docs.python.org/2/tutorial/introduction.html\" rel=\"nofollow noreferrer\">https://docs.python.org/2/tutorial/introduction.html</a></p>\n\n<p><strong>File Renaming</strong></p>\n\n<p>How to rename a file with a specified directory:</p>\n\n<pre><code>import os\nold_file = os.path.join(\"directory\", \"a.txt\")\nnew_file = os.path.join(\"directory\", \"b.kml\")\nos.rename(old_file, new_file)\n</code></pre>\n\n<p>Now that you have the knowledge you need, you should attempt the problem yourself. If you have any further questions or if I missed anything, feel free to ask. The best way to learn is to do.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10136146, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pHmZRZfRvPs/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rVzRJG3-mbEl3LHi-z9F-H6lMwxQ/mo/photo.jpg?sz=128", "display_name": "Sengkar Lhalung", "link": "https://stackoverflow.com/users/10136146/sengkar-lhalung"}, "edited": false, "score": 0, "creation_date": 1532581865, "post_id": 51530246, "comment_id": 90030457, "body": "Thank you so much @Hossam Ashraf"}], "tags": [], "owner": {"reputation": 121, "user_id": 9085914, "user_type": "registered", "profile_image": "https://graph.facebook.com/10159947405770529/picture?type=large", "display_name": "Hossam Ashraf", "link": "https://stackoverflow.com/users/9085914/hossam-ashraf"}, "is_accepted": true, "score": 0, "last_activity_date": 1532573099, "creation_date": 1532573099, "answer_id": 51530246, "question_id": 51529104, "link": "https://stackoverflow.com/questions/51529104/python-scripts-for-copying-and-renaming/51530246#51530246", "title": "python scripts for copying and renaming", "body": "<pre><code>import re\n\nfile_names = [\"fish_modlUV_v002.ma\",\"fish_modlUV_v001.ma\",\"fish_modlUV_v103.ma\",\"fish_modlUV_v041.ma\"]\nnew_file_names = []\nfor s in file_names:\n    digits = re.search('\\d\\d\\d',s)\n    start_num = digits.start()\n    end_num = digits.end()\n    strin_num= s[start_num:end_num]\n    num = int(strin_num)\n    num +=1\n    new_file_names.append(s.replace(strin_num,f'{num:03}'))\n</code></pre>\n\n<p>hope this helps :)</p>\n"}], "owner": {"reputation": 1, "user_id": 10136146, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pHmZRZfRvPs/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rVzRJG3-mbEl3LHi-z9F-H6lMwxQ/mo/photo.jpg?sz=128", "display_name": "Sengkar Lhalung", "link": "https://stackoverflow.com/users/10136146/sengkar-lhalung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 51530246, "answer_count": 3, "score": -3, "last_activity_date": 1532592294, "creation_date": 1532562050, "last_edit_date": 1532592294, "question_id": 51529104, "link": "https://stackoverflow.com/questions/51529104/python-scripts-for-copying-and-renaming", "title": "python scripts for copying and renaming", "body": "<p>I am brand new python user and looking for help. Need python scripts which does copy and version up (rename) the existed file. I tried to create scripts for version up, but it just adds 001 + 1 = 2 instead of v002. Also i am looking for first split the file name and then reassemble after doing math of version number. I am looking forward to someone who really can help on this. Does anyone can create and show me simple code which does above mentioned? Thanks in advance.</p>\n\n<pre><code>import os\nimport shutil\n\nfilename = 'New_Text_v001.txt'\nfileparts = filename.split('.')\n\nfilesegments = fileparts[0].split('_')\nfileVersion = filesegments[-1]\n\nthirdSeg = fileVersion[1:5]\n\nversionNum = int(thirdSeg) + 1\n\nprint filesegments, raw_input(versionNum), fileparts[1]\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 41564, "user_id": 8708364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMdFT.jpg?s=128&g=1", "display_name": "U11-Forward", "link": "https://stackoverflow.com/users/8708364/u11-forward"}, "edited": false, "score": 0, "creation_date": 1532563068, "post_id": 51529095, "comment_id": 90026699, "body": "You can accept an answer if it works"}], "answers": [{"tags": [], "owner": {"reputation": 106, "user_id": 9334940, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WVi6QefXPSY/AAAAAAAAAAI/AAAAAAAAA4I/ZX3lroLyf-Y/photo.jpg?sz=128", "display_name": "Shivam", "link": "https://stackoverflow.com/users/9334940/shivam"}, "is_accepted": false, "score": 0, "last_activity_date": 1532562462, "creation_date": 1532562462, "answer_id": 51529156, "question_id": 51529095, "link": "https://stackoverflow.com/questions/51529095/im-getting-error-traceback-most-recent-call-last-for-i-in-num-guesses-typeer/51529156#51529156", "title": "Im getting error Traceback (most recent call last): for i in num_guesses: TypeError: &#39;int&#39; object is not iterable", "body": "<p>You can not iterate over an integer.You have to specify some range to iterate in for loop.\nfor example\nfor i in range(1,10)</p>\n"}, {"tags": [], "owner": {"reputation": 41564, "user_id": 8708364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMdFT.jpg?s=128&g=1", "display_name": "U11-Forward", "link": "https://stackoverflow.com/users/8708364/u11-forward"}, "is_accepted": true, "score": 0, "last_activity_date": 1532562816, "creation_date": 1532562816, "answer_id": 51529200, "question_id": 51529095, "link": "https://stackoverflow.com/questions/51529095/im-getting-error-traceback-most-recent-call-last-for-i-in-num-guesses-typeer/51529200#51529200", "title": "Im getting error Traceback (most recent call last): for i in num_guesses: TypeError: &#39;int&#39; object is not iterable", "body": "<p>Use <code>range</code>:</p>\n\n<pre><code>num_guesses = 3\nuser_guesses = []\nnumber = ''\nfor i in range(num_guesses):\n    number = input(\"Guess a number:\")\n    user_guesses.append(number)\nprint(user_guesses)\n</code></pre>\n\n<p>Or <code>while</code> loop:</p>\n\n<pre><code>num_guesses = 3\nuser_guesses = []\nnumber = ''\nwhile len(user_guesses)&lt;num_guesses:\n    number = input(\"Guess a number:\")\n    user_guesses.append(number)\nprint(user_guesses)\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10136154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b88622e894fb27b86cbe4f71e6b1bc53?s=128&d=identicon&r=PG&f=1", "display_name": "SeeMorton", "link": "https://stackoverflow.com/users/10136154/seemorton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 51529200, "answer_count": 2, "score": 2, "last_activity_date": 1532562816, "creation_date": 1532561966, "question_id": 51529095, "link": "https://stackoverflow.com/questions/51529095/im-getting-error-traceback-most-recent-call-last-for-i-in-num-guesses-typeer", "title": "Im getting error Traceback (most recent call last): for i in num_guesses: TypeError: &#39;int&#39; object is not iterable", "body": "<p>I'm getting int is not iterable and I'm not really sure what that means could someone please explain? My goal of this is to assign the guesses that the user input to the list user_guesses so that if user enters 952 the list is num_guesses = [9,5,2]</p>\n\n<p>Code:</p>\n\n<pre><code>num_guesses = 3\nuser_guesses = []\nnumber = ''\nfor i in num_guesses:\n    number = input(\"Guess a number:\")\n    user_guesses.append(number)\n\nprint(user_guesses)\n</code></pre>\n"}, {"tags": ["python", "python-requests"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1532562051, "post_id": 51529081, "comment_id": 90026484, "body": "Look at the specific line the error message is pointing to. Do you think you&#39;re using <code>self</code> properly on that specific line?"}, {"owner": {"reputation": 37, "user_id": 8793346, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc39aee809057a945cafeae57d4f05a3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/8793346/tyler"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1532562171, "post_id": 51529081, "comment_id": 90026507, "body": "Would adding self to self.req = self.session.get(LOGIN_URL) do the trick? I am confused by this though, because I&#39;m not sure if I understand why that is necessary to use self again."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1532562235, "post_id": 51529081, "comment_id": 90026523, "body": "You used it most of the other times. I don&#39;t get why you think that particular line should say <code>session</code> instead of <code>self.session</code>."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 8793346, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc39aee809057a945cafeae57d4f05a3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/8793346/tyler"}, "edited": false, "score": 0, "creation_date": 1532562257, "post_id": 51529108, "comment_id": 90026528, "body": "When I do this, I get LOGIN_URL not defined, though I have it defined as as class variable."}, {"owner": {"reputation": 10894, "user_id": 3150271, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/EXijl.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/3150271/anonymous"}, "reply_to_user": {"reputation": 37, "user_id": 8793346, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc39aee809057a945cafeae57d4f05a3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/8793346/tyler"}, "edited": false, "score": 0, "creation_date": 1532562587, "post_id": 51529108, "comment_id": 90026597, "body": "@Tyler <code>LOGIN_URL</code> is a class variable, so it should be accessed using the class name. You always need to use <code>self</code> or the class name when accessing properties of the object."}, {"owner": {"reputation": 37, "user_id": 8793346, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc39aee809057a945cafeae57d4f05a3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/8793346/tyler"}, "edited": false, "score": 0, "creation_date": 1532562664, "post_id": 51529108, "comment_id": 90026618, "body": "Ah I see now. Thank you so much for the help. Really appreciate it!"}, {"owner": {"reputation": 10894, "user_id": 3150271, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/EXijl.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/3150271/anonymous"}, "reply_to_user": {"reputation": 37, "user_id": 8793346, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc39aee809057a945cafeae57d4f05a3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/8793346/tyler"}, "edited": false, "score": 0, "creation_date": 1532562776, "post_id": 51529108, "comment_id": 90026638, "body": "@Tyler No problem. Glad I could help."}], "tags": [], "owner": {"reputation": 10894, "user_id": 3150271, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/EXijl.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/3150271/anonymous"}, "is_accepted": true, "score": 1, "last_activity_date": 1532562493, "last_edit_date": 1532562493, "creation_date": 1532562068, "answer_id": 51529108, "question_id": 51529081, "link": "https://stackoverflow.com/questions/51529081/python-3-nameerror-in-init-session-not-defined/51529108#51529108", "title": "Python 3 NameError in __init__, &#39;session&#39; not defined", "body": "<p>You\u2019re missing the <code>self.</code> when accessing <code>session</code>:</p>\n\n<pre><code># Creating a session\nself.session = requests.Session()\n\n# Get request to login url\nself.req = self.session.get(LOGIN_URL)\n</code></pre>\n\n<p>To fix to error with <code>LOGIN_URL</code>:</p>\n\n<pre><code>self.req = self.session.get(NodesCursor.LOGIN_URL)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1593, "user_id": 4593642, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203096678250304/picture?type=large", "display_name": "Amine Messaoudi", "link": "https://stackoverflow.com/users/4593642/amine-messaoudi"}, "is_accepted": false, "score": 0, "last_activity_date": 1532562102, "creation_date": 1532562102, "answer_id": 51529113, "question_id": 51529081, "link": "https://stackoverflow.com/questions/51529081/python-3-nameerror-in-init-session-not-defined/51529113#51529113", "title": "Python 3 NameError in __init__, &#39;session&#39; not defined", "body": "<p>Try replacing</p>\n\n<pre><code>self.req = session.get(LOGIN_URL)\n</code></pre>\n\n<p>With</p>\n\n<pre><code>self.req = self.session.get(LOGIN_URL)\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 8793346, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc39aee809057a945cafeae57d4f05a3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/8793346/tyler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1788, "favorite_count": 0, "accepted_answer_id": 51529108, "answer_count": 2, "score": 0, "last_activity_date": 1532562493, "creation_date": 1532561836, "question_id": 51529081, "link": "https://stackoverflow.com/questions/51529081/python-3-nameerror-in-init-session-not-defined", "title": "Python 3 NameError in __init__, &#39;session&#39; not defined", "body": "<p>I am working on a small project that gets the following of a given user's Instagram. I have this working flawlessly as a script using a function, however I plan to make this into an actual program so I decided to write a class. I believe I am using \"self\" correctly in all the right places, but I am failing to see why I am getting this name error. Here is my code:</p>\n\n<pre><code># Library imports\nimport requests\nimport json\nimport time\n\n# Class decleration\nclass NodesCursor:\n\n    # Class variables\n\n    # Login url\n    LOGIN_URL = 'https://www.instagram.com/accounts/login/ajax/'\n\n    # Referer url\n    REFERER_URL = 'https://www.instagram.com/accounts/login/'\n\n    # User agent\n    USER_AGENT = 'Mozilla/5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1'\n\n    # Class constructor\n    def __init__(self, USERNAME, PASSWD):\n\n        # Login username\n        self.USERNAME = USERNAME\n\n        # Login password\n        self.PASSWD = PASSWD\n\n        # Creating a session\n        self.session = requests.Session()\n\n        # Get request to login url\n        self.req = session.get(LOGIN_URL)\n\n        # Setting user agent for session header\n        self.session.headers = {'user-agent': USER_AGENT}\n\n        # Setting referer url for session header\n        self.session.headers.update({'Referer': REFERER_URL})\n\n        # Updating session header with x-csrftoken cookie\n        self.session.headers.update({'x-csrftoken': self.req.cookies['csrftoken']})\n\n        # Login data for website\n        self.login_data = {'username': self.USERNAME, 'password': self.PASSWD}\n\n        # Login with a post requests\n        self.login = session.post(LOGIN_URL, data=self.login_data, allow_redirects=True)\n\n        # Updating the session with x-csrftoken cookie\n        self.session.headers.update({'x-csrftoken': self.login.cookies['csrftoken']})\n\n    # Function to parse following\n    def parse(self):\n\n        # An array of usernames\n        usernames = []\n\n        # Variable to handle continuous scrolling\n        has_next_page = True\n\n        # Variable to handle continuous scrolling\n        end_cursor = None\n\n        # Loop to handle the scrolling to get the needed data\n        while has_next_page == True:\n\n            # Sleep for 30 seconds to not get rate limited\n            #time.sleep(30)\n\n            # Query url\n            queryUrl = \"https://www.instagram.com/graphql/query/\"\n\n            # Parameters for the get request\n            payload = {\"query_hash\":\"9335e35a1b280f082a47b98c5aa10fa4\", \"id\":\"8164444379\",\"first\":24, \"after\": end_cursor}\n\n            # Variable for GETting all of the user's following\n            following = self.session.get(queryUrl, params=payload).json()\n\n            # Parsing the node to check to see what has_next_page equals to\n            has_next_page = following['data']['user']['edge_follow']['page_info']['has_next_page']\n\n            # Parse all user followings until there are no more\n            if has_next_page == True or has_next_page == False:\n\n                # Parsing end cursor id\n                end_cursor = following['data']['user']['edge_follow']['page_info']['end_cursor']\n\n                # Sleep for 30 seconds to not get rate limited\n                time.sleep(30)\n\n                # Parsing to get to username node\n                userList = following['data']['user']['edge_follow']\n\n                # Loop to interate through all of the names\n                for eachName in userList['edges']:\n\n                    # Add each name to the array\n                    usernames.append(eachName['node']['username'])\n\n        # Print the array of usernames, along with the length\n        print(usernames)\n        print(len(usernames))\n\nif __name__ == '__main__':\n    checkFollowing = NodesCursor('username', 'password')\n    checkFollowing().parse()\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"test.py\", line 115, in &lt;module&gt;\n    turboOne = NodesCursor('moola.ig', 'yeet1234')\n  File \"test.py\", line 42, in __init__\n    self.req = session.get(LOGIN_URL)\nNameError: name 'session' is not defined\n</code></pre>\n\n<p>Though as I stated earlier that I think I am using \"self\" correctly, it is possible that is where my error is coming from but I'm unsure. Any help is greatly appreciated.</p>\n"}, {"tags": ["python", "git", "python-requests"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1532563486, "post_id": 51529060, "comment_id": 90026774, "body": "&quot;I do not want to use the git package as that requires me to have git installed&quot; Which git package are you referring to? I don&#39;t know of a Python package named just <code>git</code>, and I&#39;m pretty sure <code>git-python</code> has a pure Python implementation of the git protocol and can use the GitDB pure Python implementation of the git repo database."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1532563573, "post_id": 51529060, "comment_id": 90026794, "body": "Also, if you only care about Windows, you could just include PortableGit in your package and run its <code>git.exe</code>, without needing to install anything. (Or you can do that for Windows, assume <code>git</code> is on the PATH otherwise, which will work on Windows, macOS, and almost every Linux and *BSD in the world\u2026)"}], "answers": [{"tags": [], "owner": {"reputation": 1472, "user_id": 7087143, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FFEhW1u4eWk/AAAAAAAAAAI/AAAAAAAAAKU/GXpyPSDtC2s/photo.jpg?sz=128", "display_name": "Karl", "link": "https://stackoverflow.com/users/7087143/karl"}, "is_accepted": false, "score": 2, "last_activity_date": 1532562267, "creation_date": 1532562267, "answer_id": 51529133, "question_id": 51529060, "link": "https://stackoverflow.com/questions/51529060/python-requests-get-all-files-from-a-git-folder/51529133#51529133", "title": "Python-Requests: Get all files from a git folder", "body": "<p>You can download the whole github repo as a .zip file by making a request to the <code>https://github.com/user/repo/archive/branch.zip</code> url. Where <code>branch</code> is the name of the branch you would like to download (usually master).</p>\n\n<p>Example:</p>\n\n<pre><code>import os\n\nfilename = os.path.join(os.getcwd(), 'repo.zip')\nurl = 'https://github.com/requests/requests/archive/master.zip'\n\nr = requests.get(url)\n\nwith open(filename, 'wb') as f:\n    f.write(r.content)\n</code></pre>\n\n<p>You also should open the file in binary mode just in case (with wb) because it is saving a .zip file.</p>\n"}], "owner": {"reputation": 4501, "user_id": 5252492, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/QYvFc.png?s=128&g=1", "display_name": "azazelspeaks", "link": "https://stackoverflow.com/users/5252492/azazelspeaks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2662, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1532562267, "creation_date": 1532561627, "question_id": 51529060, "link": "https://stackoverflow.com/questions/51529060/python-requests-get-all-files-from-a-git-folder", "title": "Python-Requests: Get all files from a git folder", "body": "<p>I want to get all files (and sub-directories and the files in them) from a github repo.\nI do not want to use the git package as that requires me to have git installed (on windows, so that's not an auto thing).</p>\n\n<p>Willing to use urllib or something else instead. I'm on python 2.</p>\n\n<p>I am able to get a single file as from here &lt; <a href=\"https://stackoverflow.com/questions/14120502/how-to-download-and-write-a-file-from-github-using-requests\">How to download and write a file from Github using Requests</a> > with: </p>\n\n<pre><code>filename = getcwd() + '\\\\somefile.txt'\n\nurl = 'https://raw.github.com/kennethreitz/requests/master/README.rst'\n\nr=requests.get(url)\n\nwith open(filename,'w+') as f:\n    f.write(r.content)\n</code></pre>\n\n<p>How do I copy the whole repo?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 1, "last_activity_date": 1532561753, "creation_date": 1532561753, "answer_id": 51529072, "question_id": 51529004, "link": "https://stackoverflow.com/questions/51529004/in-pandas-how-to-create-a-new-column-from-part-of-another-obeying-a-condition/51529072#51529072", "title": "In pandas how to create a new column from part of another, obeying a condition?", "body": "<p>First, how would you do this on a single value?</p>\n\n<pre><code>&gt;&gt;&gt; link = \"http://www.camara.gov.br/proposicoesWeb/fichadetramitacao?idProposicao=2171854\"\n&gt;&gt;&gt; link.split(\"=\", 1)[1]\n'2171854'\n</code></pre>\n\n<p>But <code>split</code> is a method on <code>str</code> objects; how do you apply it to a column full of strings? Simple: columns (Series and Index) have a <a href=\"https://pandas.pydata.org/pandas-docs/stable/text.html#splitting-and-replacing-strings\" rel=\"nofollow noreferrer\"><code>str</code> attribute</a> for exactly this purpose:</p>\n\n<pre><code>df.link_projecto.str.split(\"=\", 1)\n</code></pre>\n\n<p>But <code>split</code> doesn't just return a string, it returns a list of strings. How do we get the last one?</p>\n\n<p>As explained in <a href=\"https://pandas.pydata.org/pandas-docs/stable/text.html#splitting-and-replacing-strings\" rel=\"nofollow noreferrer\">Splitting and Replacing Strings</a>, you just access <code>str</code> again and index it:</p>\n\n<pre><code>df.link_projecto.str.split(\"=\", 1).str[1]\n</code></pre>\n\n<p>So:</p>\n\n<pre><code>df[\"new_column\"] = df.link_projecto.str.split(\"=\", 1).str[1]\n</code></pre>\n"}], "owner": {"reputation": 865, "user_id": 8321427, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-ONb_mSwNHKw/AAAAAAAAAAI/AAAAAAAAAhY/TDOgxKaK7lU/photo.jpg?sz=128", "display_name": "Reinaldo Chaves", "link": "https://stackoverflow.com/users/8321427/reinaldo-chaves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 51529072, "answer_count": 1, "score": 0, "last_activity_date": 1532561753, "creation_date": 1532561223, "question_id": 51529004, "link": "https://stackoverflow.com/questions/51529004/in-pandas-how-to-create-a-new-column-from-part-of-another-obeying-a-condition", "title": "In pandas how to create a new column from part of another, obeying a condition?", "body": "<p>In python 3 and pandas I have the dataframe:</p>\n\n<pre><code>lista_projetos.info()\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nRangeIndex: 59 entries, 0 to 58\nData columns (total 14 columns):\nn_projeto                             59 non-null object\nautor                                 59 non-null object\nementa                                59 non-null object\nresumo                                59 non-null object\nvotacao_nominal                       59 non-null object\nvotacao_nominal_alternativa_emenda    59 non-null object\nlink_votacao                          0 non-null float64\nobservacao                            0 non-null float64\nlink_emenda                           0 non-null float64\nindicado_por                          59 non-null object\nentidade_que_avalia                   59 non-null object\nfavoravel_desfavoravel_indiferente    59 non-null object\nexplicacao                            59 non-null object\nlink_projeto                          59 non-null object\ndtypes: float64(3), object(11)\nmemory usage: 6.5+ KB\n</code></pre>\n\n<p>The column \"link_projeto\" has urls, always in this format:</p>\n\n<p>\"<a href=\"http://www.camara.gov.br/proposicoesWeb/fichadetramitacao?idProposicao=2171854\" rel=\"nofollow noreferrer\">http://www.camara.gov.br/proposicoesWeb/fichadetramitacao?idProposicao=2171854</a>\"</p>\n\n<p>\"<a href=\"http://www.camara.gov.br/proposicoesWeb/fichadetramitacao?idProposicao=2147513\" rel=\"nofollow noreferrer\">http://www.camara.gov.br/proposicoesWeb/fichadetramitacao?idProposicao=2147513</a>\"</p>\n\n<p>\"<a href=\"http://www.camara.gov.br/proposicoesWeb/fichadetramitacao?idProposicao=2168253\" rel=\"nofollow noreferrer\">http://www.camara.gov.br/proposicoesWeb/fichadetramitacao?idProposicao=2168253</a>\"</p>\n\n<p>I want to create a new column from the \"link_projeto\" column. So: always pick up the final number after the \"=\" sign</p>\n\n<p>Like this:</p>\n\n<pre><code>new_column\n2171854\n2147513\n2168253\n</code></pre>\n\n<p>Please, is there a way to create a new column from part of another?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": false, "score": 0, "last_activity_date": 1532562534, "creation_date": 1532562534, "answer_id": 51529169, "question_id": 51528997, "link": "https://stackoverflow.com/questions/51528997/custom-dataframe-sorting-using-groupedby-in-pandas/51529169#51529169", "title": "custom dataframe sorting using groupedby in pandas", "body": "<p>IIUC, you can use a nested <code>defaultdict</code></p>\n\n<pre><code>from collections import defaultdict\nx = defaultdict(lambda: defaultdict(list))\n\nfor d in df.groupby(['I', 'J'], as_index=False).agg(list).to_dict('r'):\n    x[d['I']][d['J']].append(list(zip(d['GAI'], d['F'])))\n</code></pre>\n\n<p>If you want, can convert back to dict at the end</p>\n\n<pre><code>x = {k: dict(v) for k, v in x.items()}\n\n{660: {433: [[(6016, 0.0008439999999999999), (6020, 0.8888889999999999)]],\n       434: [[(6016, 0.010041)]]},\n 661: {433: [[(6016, 0.021373)]]}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 0, "last_activity_date": 1532566645, "creation_date": 1532566645, "answer_id": 51529546, "question_id": 51528997, "link": "https://stackoverflow.com/questions/51528997/custom-dataframe-sorting-using-groupedby-in-pandas/51529546#51529546", "title": "custom dataframe sorting using groupedby in pandas", "body": "<p>By using <code>groupby</code> and <code>to_dict</code></p>\n\n<pre><code>df.groupby('I').apply(lambda x : x.groupby('J')[['GAI','F']].apply(lambda x : x.values.tolist()).to_dict()).to_dict()\nOut[461]: \n{660: {433: [[6016.0, 0.0008439999999999999], [6020.0, 0.8888889999999999]],\n  434: [[6016.0, 0.010041]]},\n 661: {433: [[6016.0, 0.021373]]}}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10136058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb278ad2b8ef0a9562cadbd20835e8d6?s=128&d=identicon&r=PG&f=1", "display_name": "mven", "link": "https://stackoverflow.com/users/10136058/mven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1532566645, "creation_date": 1532561175, "question_id": 51528997, "link": "https://stackoverflow.com/questions/51528997/custom-dataframe-sorting-using-groupedby-in-pandas", "title": "custom dataframe sorting using groupedby in pandas", "body": "<p>I'm new to python and I have a dataframe table:</p>\n\n<pre><code>     I    J   GAI         F\n0   660  433  6016  0.000844\n1   660  433  6020  0.888889\n2   660  434  6016  0.010041\n3   661  433  6016  0.021373\n</code></pre>\n\n<p>I want to format this so that to have an output that looks like:</p>\n\n<pre><code>660: {433: [[6016,0.000844]], [[6020,0.888889]],\n      434: [[6016,0.010041]]}\n661: {433: [[6016,0.021373]]}\n</code></pre>\n\n<p>Essentially, the output should be grouped by I and J then write the corresponding GAI/F combinations that go along with it. </p>\n\n<p>I used df.groupedby(['I','J']) and got the following which was close but not quite there:</p>\n\n<pre><code>((660, 433),      I    J   GAI         F\n0  660  433  6016  0.000844\n1  660  433  6020  0.888889)\n((660, 434),      I    J   GAI         F\n2  660  434  6016  0.010041)\n((661, 433),      I    J   GAI         F\n3  661  433  6016  0.021373)\n</code></pre>\n\n<p>Does anyone have a quick fix to my issue? I've been hunting all day online with no such luck.</p>\n"}, {"tags": ["python", "selenium", "find", "elements"], "comments": [{"owner": {"reputation": 126, "user_id": 6130105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4814933fb48955ea05f5af889b5fa1d?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Harrison", "link": "https://stackoverflow.com/users/6130105/brandon-harrison"}, "edited": false, "score": 0, "creation_date": 1532561907, "post_id": 51528985, "comment_id": 90026458, "body": "That id is a UUID and might be dynamically generated.  I would double check that the id exists at all when Selenium grabs it.  It might be different than when you look at it in a browser"}, {"owner": {"reputation": 1663, "user_id": 7953640, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-XXZtjJHhqKQ/AAAAAAAAAAI/AAAAAAAACGM/WH8Q0SKnwic/photo.jpg?sz=128", "display_name": "Satish", "link": "https://stackoverflow.com/users/7953640/satish"}, "edited": false, "score": 2, "creation_date": 1532561928, "post_id": 51528985, "comment_id": 90026465, "body": "Unlike find_element, find_elements will not throw an exception and return an empty list if the elements cannot be located. Can you try using explicit wait and wait for the elements to appear? Is the elements inside an iframe?"}, {"owner": {"reputation": 431, "user_id": 10078762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd0e5a14d5324ea71e5ea1651bc56ee1?s=128&d=identicon&r=PG&f=1", "display_name": "SSS", "link": "https://stackoverflow.com/users/10078762/sss"}, "edited": false, "score": 0, "creation_date": 1532570593, "post_id": 51528985, "comment_id": 90028078, "body": "Brandon, I checked it again by opening another tab in a new browser. It has the same address (folder_c0fb056b-f83a-495e-9db1-dd1b19942eaa)."}, {"owner": {"reputation": 431, "user_id": 10078762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd0e5a14d5324ea71e5ea1651bc56ee1?s=128&d=identicon&r=PG&f=1", "display_name": "SSS", "link": "https://stackoverflow.com/users/10078762/sss"}, "edited": false, "score": 0, "creation_date": 1532570812, "post_id": 51528985, "comment_id": 90028130, "body": "Satish, could you give me an example of doing so (explicit wait)? and no it is not in iframe."}], "answers": [{"comments": [{"owner": {"reputation": 431, "user_id": 10078762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd0e5a14d5324ea71e5ea1651bc56ee1?s=128&d=identicon&r=PG&f=1", "display_name": "SSS", "link": "https://stackoverflow.com/users/10078762/sss"}, "edited": false, "score": 0, "creation_date": 1532614457, "post_id": 51531503, "comment_id": 90049616, "body": "I get a looooooong element like this..  [&lt;selenium.webdriver.remote.webelement.WebElement (session=&quot;1dcfc5298680c5f2b9eb5ebf4af2a016&quot;, element=&quot;0.373763911577496-1&quot;)&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=&quot;1dcfc5298680c5f2b9eb5ebf4af2a016&quot;, element=&quot;0.373763911577496-2&quot;)&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=&quot;1dcfc5298680c5f2b9eb5ebf4af2a016&quot;, element=&quot;0.373763911577496-3&quot;)&gt;,"}, {"owner": {"reputation": 431, "user_id": 10078762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd0e5a14d5324ea71e5ea1651bc56ee1?s=128&d=identicon&r=PG&f=1", "display_name": "SSS", "link": "https://stackoverflow.com/users/10078762/sss"}, "edited": false, "score": 1, "creation_date": 1532618327, "post_id": 51531503, "comment_id": 90052232, "body": "Wow. that is what I exactly did now haha. It shows all the texts in the region! Is there any way that I can make the code further click into a specific text with hyperlink that I found?"}, {"owner": {"reputation": 431, "user_id": 10078762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd0e5a14d5324ea71e5ea1651bc56ee1?s=128&d=identicon&r=PG&f=1", "display_name": "SSS", "link": "https://stackoverflow.com/users/10078762/sss"}, "edited": false, "score": 1, "creation_date": 1532618447, "post_id": 51531503, "comment_id": 90052312, "body": "Before asking further questions, I should have said this. You are a genius! Thank you."}], "tags": [], "owner": {"reputation": 5161, "user_id": 8625512, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/14cFh.jpg?s=128&g=1", "display_name": "Andrei Suvorkov", "link": "https://stackoverflow.com/users/8625512/andrei-suvorkov"}, "is_accepted": true, "score": 0, "last_activity_date": 1532623813, "last_edit_date": 1532623813, "creation_date": 1532582392, "answer_id": 51531503, "question_id": 51528985, "link": "https://stackoverflow.com/questions/51528985/python-selenium-cannot-find-an-element-result-empty/51531503#51531503", "title": "Python Selenium cannot find an element (result empty)", "body": "<p>If you are sure, that id of the elements is not generic you can try to use this:</p>\n\n<pre><code>elements = WebDriverWait(driver, 10).until(EC.presence_of_all_elements_located((By.XPATH, \"//div[@id='folder_c0fb056b-f83a-495e-9db1-dd1b19942eaa']/div/a\")))\nfor element in elements:\n    print(element.text)\n    if element.text == 'your text':\n        element.click()\n</code></pre>\n\n<p>The main idea of this code snippet is to use <code>WebDriverWait</code> to wait at least 10 seconds until all elements will be present on the page and only then print the list of them. Also I have proposed another selector which will locate all <code>a</code> links.</p>\n\n<p><strong><em>Note:</em></strong> you have to add some imports:</p>\n\n<pre><code>from selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.support.wait import WebDriverWait\nfrom selenium.webdriver.common.by import By\n</code></pre>\n"}], "owner": {"reputation": 431, "user_id": 10078762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd0e5a14d5324ea71e5ea1651bc56ee1?s=128&d=identicon&r=PG&f=1", "display_name": "SSS", "link": "https://stackoverflow.com/users/10078762/sss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1110, "favorite_count": 0, "accepted_answer_id": 51531503, "answer_count": 1, "score": 0, "last_activity_date": 1532623813, "creation_date": 1532561121, "last_edit_date": 1532580911, "question_id": 51528985, "link": "https://stackoverflow.com/questions/51528985/python-selenium-cannot-find-an-element-result-empty", "title": "Python Selenium cannot find an element (result empty)", "body": "<p>Here is my python code</p>\n\n<pre><code>elements=driver.find_elements_by_id(\"folder_c0fb056b-f83a-495e-9db1-dd1b19942eaa\")\nprint(elements)\n</code></pre>\n\n<p>the result is [ ]. The same way has worked for other parts of the website but when I get into a table inside the website, it does not work correctly. I could find and click some links prior to these command lines. Please look at the images I attached. When you look at HTML2, the white box is div \"folder_c0fb056b-f83a-495e-9db1-dd1b19942eaa\" shown in the last attached image (Webpage view). The rest blue boxes are the regions I am interested in. It looks like </p>\n\n<pre><code>&lt;a id=\"rptReportFolders_ctl04_rptReports_ctl00_hlReportNameDescription\" href=\"/da2/Reports/ReportResults.aspx?ReportID={b3583c5f-874b-4eca-9548-bf88f99ff7e6}\"&gt;\n    &lt;b&gt;AE-CR Log - Open Items / All Projects&lt;/b&gt; \n&lt;/a&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/daOsJ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/daOsJ.jpg\" alt=\"HTML\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/FsF5I.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FsF5I.jpg\" alt=\"HTML2\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/tR8Mj.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tR8Mj.jpg\" alt=\"Webpage view\"></a></p>\n"}, {"tags": ["python", "amazon-ec2", "boto3", "amazon-product-api", "ondemand"], "answers": [{"comments": [{"owner": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "edited": false, "score": 1, "creation_date": 1532564519, "post_id": 51529020, "comment_id": 90026964, "body": "Correct. See: <a href=\"https://docs.aws.amazon.com/general/latest/gr/rande.html\" rel=\"nofollow noreferrer\">AWS Regions and Endpoints - Amazon Web Services</a> The pricing information returned will still contain pricing for all regions. It is just the endpoint that is not in all regions."}], "tags": [], "owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "is_accepted": true, "score": 5, "last_activity_date": 1532561289, "creation_date": 1532561289, "answer_id": 51529020, "question_id": 51528871, "link": "https://stackoverflow.com/questions/51528871/aws-product-api-what-is-the-correct-regional-location-and-url-for-us-west-2/51529020#51529020", "title": "aws product api: what is the correct regional location and url for us west 2", "body": "<p>There are only two services endpoints supported by the AWS Price List Service API:</p>\n\n<ul>\n<li><a href=\"https://api.pricing.us-east-1.amazonaws.com\" rel=\"noreferrer\">https://api.pricing.us-east-1.amazonaws.com</a></li>\n<li><a href=\"https://api.pricing.ap-south-1.amazonaws.com\" rel=\"noreferrer\">https://api.pricing.ap-south-1.amazonaws.com</a></li>\n</ul>\n\n<p>You will need to pick from one of those. us-west-2 is not supported.</p>\n"}], "owner": {"reputation": 3199, "user_id": 2005490, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/60f7a105be69d2445655481949141f7f?s=128&d=identicon&r=PG&f=1", "display_name": "Atihska", "link": "https://stackoverflow.com/users/2005490/atihska"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 1, "accepted_answer_id": 51529020, "answer_count": 1, "score": 1, "last_activity_date": 1532561289, "creation_date": 1532560135, "question_id": 51528871, "link": "https://stackoverflow.com/questions/51528871/aws-product-api-what-is-the-correct-regional-location-and-url-for-us-west-2", "title": "aws product api: what is the correct regional location and url for us west 2", "body": "<p>I am using boto3 pricing client to get on-demand pricing as boto3 ec2 client doesn't have on-demand but spot pricing.</p>\n\n<p>This gives me error saying <code>Could not connect to the endpoint URL: \"https://api.pricing.us-west-2.amazonaws.com/</code>.</p>\n\n<p>What is the correct region name or location value below for us west 2. I check ed the regions and this is the correct one. Does pricing api isn't in Oregon region? </p>\n\n<pre><code>        pricing = boto3.client('pricing', region_name='us-west-2')\n        response = pricing.get_products(\n        ServiceCode='AmazonEC2',\n        Filters=[\n            {'Type': 'TERM_MATCH', 'Field': 'operatingSystem', 'Value': 'Linux'},\n            {'Type':'TERM_MATCH', 'Field': 'location', 'Value': 'US West (Oregon)'}\n\n        ],\n        MaxResults=20\n    )\n\n    for price in response['PriceList']:\n        resp = json.loads(price)\n        on_demand = resp['terms']['OnDemand']\n        print len(on_demand)\n        print(on_demand)\n</code></pre>\n"}, {"tags": ["python", "string"], "comments": [{"owner": {"reputation": 32215, "user_id": 3789550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mGqv.gif?s=128&g=1", "display_name": "heemayl", "link": "https://stackoverflow.com/users/3789550/heemayl"}, "edited": false, "score": 3, "creation_date": 1532559881, "post_id": 51528820, "comment_id": 90026073, "body": "Hint: Look at <code>str.replace</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1840, "user_id": 1917721, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/TgopK.png?s=128&g=1", "display_name": "HFBrowning", "link": "https://stackoverflow.com/users/1917721/hfbrowning"}, "edited": false, "score": 0, "creation_date": 1532560232, "post_id": 51528829, "comment_id": 90026147, "body": "Shorter? :P 33 chars in each"}, {"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "reply_to_user": {"reputation": 1840, "user_id": 1917721, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/TgopK.png?s=128&g=1", "display_name": "HFBrowning", "link": "https://stackoverflow.com/users/1917721/hfbrowning"}, "edited": false, "score": 2, "creation_date": 1532560253, "post_id": 51528829, "comment_id": 90026149, "body": "@HFBrowning Shorter in the sense of fewer function calls ;)"}], "tags": [], "owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "is_accepted": true, "score": 5, "last_activity_date": 1532560328, "last_edit_date": 1532560328, "creation_date": 1532559895, "answer_id": 51528829, "question_id": 51528820, "link": "https://stackoverflow.com/questions/51528820/insert-n-in-every-space-for-multiple-strings-python/51528829#51528829", "title": "insert \\n in every space for multiple strings python", "body": "<p>You can try the following comprehension that uses the split and join approach you are suggesting:</p>\n\n<pre><code>l = ['Hello Yes', 'Good Now Order', 'Been There Before', 'Because']\nl_new = ['\\n'.join(s.split()) for s in l]  \n# this would replace any sequence of whitespace by a single line break\n</code></pre>\n\n<p>or perhaps more readable and to the point, using <code>str.replace</code>:</p>\n\n<pre><code>l_new = [s.replace(' ', '\\n') for s in l]\n# this will replace all and only space characters\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "edited": false, "score": 0, "creation_date": 1532560083, "post_id": 51528853, "comment_id": 90026117, "body": "Ah schwobaseggl beat me to it."}], "tags": [], "owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "is_accepted": false, "score": 3, "last_activity_date": 1532560044, "creation_date": 1532560044, "answer_id": 51528853, "question_id": 51528820, "link": "https://stackoverflow.com/questions/51528820/insert-n-in-every-space-for-multiple-strings-python/51528853#51528853", "title": "insert \\n in every space for multiple strings python", "body": "<p>Try a list comprehension (this returns a new list with every element the same as in the old one, but with spaces replaced with linebreaks):</p>\n\n<pre><code>[element.replace(' ', '\\n') for element in ls]\n</code></pre>\n\n<p>where <code>ls</code> is your list.</p>\n\n<p>Alternatively, you could do a for-loop, using the <code>replace</code> method.</p>\n"}, {"comments": [{"owner": {"reputation": 4917, "user_id": 2320961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AdwXN.png?s=128&g=1", "display_name": "Nic3500", "link": "https://stackoverflow.com/users/2320961/nic3500"}, "edited": false, "score": 1, "creation_date": 1532564117, "post_id": 51528899, "comment_id": 90026888, "body": "The quality of this answer will be greatly increased if you explain your code, especially for new users learning this."}, {"owner": {"reputation": 21010, "user_id": 2019247, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MnZYd.jpg?s=128&g=1", "display_name": "31piy", "link": "https://stackoverflow.com/users/2019247/31piy"}, "edited": false, "score": 1, "creation_date": 1532572953, "post_id": 51528899, "comment_id": 90028578, "body": "While this code snippet may solve the question, <a href=\"http://meta.stackexchange.com/questions/114762/explaining-entirely-code-based-answers\">including an explanation</a> really helps to improve the quality of your post. Remember that you are answering the question for readers in the future, and those people might not know the reasons for your code suggestion."}], "tags": [], "owner": {"reputation": 11001, "user_id": 3316882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dbfd45c99a28cab8fe0c8ddcb19aea3?s=128&d=identicon&r=PG&f=1", "display_name": "Sunitha", "link": "https://stackoverflow.com/users/3316882/sunitha"}, "is_accepted": false, "score": 0, "last_activity_date": 1532560411, "creation_date": 1532560411, "answer_id": 51528899, "question_id": 51528820, "link": "https://stackoverflow.com/questions/51528820/insert-n-in-every-space-for-multiple-strings-python/51528899#51528899", "title": "insert \\n in every space for multiple strings python", "body": "<pre><code>l = ['Hello Yes', 'Good Now Order', 'Been There Before', 'Because']\nlist(map('\\n'.join, map(str.split, l)))\n# ['Hello\\nYes', 'Good\\nNow\\nOrder', 'Been\\nThere\\nBefore', 'Because']\n</code></pre>\n"}], "owner": {"reputation": 2066, "user_id": 5380809, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/73aed6088300f0a2d6ed1ecc5d4f1343?s=128&d=identicon&r=PG&f=1", "display_name": "jchaykow", "link": "https://stackoverflow.com/users/5380809/jchaykow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 51528829, "answer_count": 3, "score": 0, "last_activity_date": 1532560411, "creation_date": 1532559794, "question_id": 51528820, "link": "https://stackoverflow.com/questions/51528820/insert-n-in-every-space-for-multiple-strings-python", "title": "insert \\n in every space for multiple strings python", "body": "<p>I have a list of strings:</p>\n\n<pre><code>['Hello Yes', 'Good Now Order', 'Been There Before', 'Because']\n</code></pre>\n\n<p>I want to rewrite this as:</p>\n\n<pre><code>['Hello\\nYes', 'Good\\nNow\\nOrder', 'Been\\nThere\\nBefore', 'Because']\n</code></pre>\n\n<p>So the <code>\\n</code> goes into every space except the beginning or end of the string.</p>\n\n<p>I have tried <code>.split(' ')</code> inside a for loop, but that gets messy and then unsure how to rejoin at the end.</p>\n"}, {"tags": ["python", "web-scraping", "while-loop"], "comments": [{"owner": {"reputation": 2947, "user_id": 4411196, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Q6b8W.jpg?s=128&g=1", "display_name": "gtalarico", "link": "https://stackoverflow.com/users/4411196/gtalarico"}, "edited": false, "score": 0, "creation_date": 1532560873, "post_id": 51528810, "comment_id": 90026262, "body": "I am sorry but the question is not very clear. What is the &quot;larger piece of code&quot; you need to re-run? The entire code?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1532560909, "post_id": 51528810, "comment_id": 90026271, "body": "If you want to &quot;start the whole thing again&quot;, then you have to put &quot;the whole thing&quot; inside the <code>while</code> loop, not just the last few lines."}, {"owner": {"reputation": 195, "user_id": 9754330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc4b190663603fb1634d1ca2e9964b48?s=128&d=identicon&r=PG&f=1", "display_name": "Litmon", "link": "https://stackoverflow.com/users/9754330/litmon"}, "edited": false, "score": 0, "creation_date": 1532565117, "post_id": 51528810, "comment_id": 90027068, "body": "Ah yes, it&#39;s the whole code I want to re-run. I&#39;ve tried putting the whole code in the while loop using def main() at the start, but it doesn&#39;t seem to recognize it."}], "answers": [{"comments": [{"owner": {"reputation": 3415, "user_id": 5287638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AzeH8.png?s=128&g=1", "display_name": "Jack Taylor", "link": "https://stackoverflow.com/users/5287638/jack-taylor"}, "edited": false, "score": 0, "creation_date": 1532560703, "post_id": 51528898, "comment_id": 90026225, "body": "You need to update <code>datey</code> within the while loop somehow, otherwise you will get an infinite loop."}, {"owner": {"reputation": 195, "user_id": 9754330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc4b190663603fb1634d1ca2e9964b48?s=128&d=identicon&r=PG&f=1", "display_name": "Litmon", "link": "https://stackoverflow.com/users/9754330/litmon"}, "edited": false, "score": 0, "creation_date": 1532565219, "post_id": 51528898, "comment_id": 90027088, "body": "datey should change every time it goes through the loop. However, wouldn&#39;t I need to define datey and endDate before the while loop starts? Or does it look within the while loop for those definitions? This is where I keep getting confused."}], "tags": [], "owner": {"reputation": 361, "user_id": 4164468, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/44c47967f9ae56fc0767706ce116f699?s=128&d=identicon&r=PG&f=1", "display_name": "kay", "link": "https://stackoverflow.com/users/4164468/kay"}, "is_accepted": false, "score": 0, "last_activity_date": 1532561530, "last_edit_date": 1532561530, "creation_date": 1532560369, "answer_id": 51528898, "question_id": 51528810, "link": "https://stackoverflow.com/questions/51528810/creating-a-while-loop-for-a-non-simple-piece-of-code/51528898#51528898", "title": "Creating a while loop for a non-simple piece of code", "body": "<p>If you want to check if </p>\n\n<blockquote>\n  <p>datey is less than endDate </p>\n</blockquote>\n\n<p>then simply use your while loop argument at the top instead of a boolean:</p>\n\n<pre><code>import requests\nimport datetime\nfrom datetime import timedelta\n\nwhile(datey &lt;= endDate):\n\n    WB = load_workbook('File.xlsx', data_only=True)\n\n    SH = WB['02474']\n    endDate = datetime.datetime.strptime('2018-02-09', '%Y-%m-%d')\n\n    MXrow = SH.max_row\n    NXrow = MXrow+1\n    datex = SH.cell(row=MXrow, column=2)\n    datex2 = datex.value\n    datey = datetime.datetime.strptime(datex2, '%Y-%m-%d') + \n    datetime.timedelta(days=1)\n    datey2 = datey.strftime('%Y-%m-%d')\n    URL = 'https://www.example.com' + str(datey2)\n\n\n    page = requests.get(URL)\n    from bs4 import BeautifulSoup\n    soup = BeautifulSoup(page.text, 'lxml')\n\n    mintemp = soup.find(\"tr\",{\"class\":\"weatherhistory_results_datavalue temp_mn\"})\n    for i in mintemp:\n        mintemp2 = i.find(\"span\",{\"class\": \"value\"})\n\n    maxtemp = soup.find(\"tr\",{\"class\":\"weatherhistory_results_datavalue temp_mx\"})\n    for i in maxtemp:\n        maxtemp2 = i.find(\"span\",{\"class\": \"value\"})\n\n    mintemp3 = mintemp2.text\n    maxtemp3 = maxtemp2.text\n\n    SH.cell(row=NXrow, column=1).value = \"ZIP\"\n    SH.cell(row=NXrow, column=2).value = datey2\n    SH.cell(row=NXrow, column=3).value = URL\n    SH.cell(row=NXrow, column=4).value = mintemp3\n    SH.cell(row=NXrow, column=5).value = maxtemp3\n    WB.save('File.xlsx')\n</code></pre>\n\n<p>This way, when 'datey' is less than or equal to 'endDate', the contents of the while loop will continue to loop until 'datey' is greater than 'endDate'</p>\n\n<p>Also import statements go at the top of your file and do not belong inside a loop. </p>\n"}], "owner": {"reputation": 195, "user_id": 9754330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc4b190663603fb1634d1ca2e9964b48?s=128&d=identicon&r=PG&f=1", "display_name": "Litmon", "link": "https://stackoverflow.com/users/9754330/litmon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532614395, "creation_date": 1532559713, "last_edit_date": 1532614395, "question_id": 51528810, "link": "https://stackoverflow.com/questions/51528810/creating-a-while-loop-for-a-non-simple-piece-of-code", "title": "Creating a while loop for a non-simple piece of code", "body": "<p>I'm new to Python (and programming in general) and I'm having trouble creating a while loop. All the examples I've been able to find are pretty simple, along the lines of var=10, subtract 1 until you get to 0. I have a larger piece of code that I need to re-run as long as a condition is met, but what I've tried hasn't worked. I'm using Python 3 in Anaconda.</p>\n\n<p>I've tried def main() and the below and now I'm trying while true (in my code sample, I have while true and below it is indented but I can't seem to get it to indent here). What I'm trying to get it to do is check whether datey is less than endDate and if it is, start the whole thing again.</p>\n\n<p>Here's what I have:</p>\n\n<pre><code>from openpyxl import load_workbook\nwhile True:\n\n    WB = load_workbook('File.xlsx', data_only=True)\n    SH = WB['02474']\n    import datetime\n    from datetime import timedelta\n    endDate = datetime.datetime.strptime('2018-02-09', '%Y-%m-%d')\n\n    MXrow = SH.max_row\n    NXrow = MXrow+1\n    datex = SH.cell(row=MXrow, column=2)\n    datex2 = datex.value\n    datey = datetime.datetime.strptime(datex2, '%Y-%m-%d') + datetime.timedelta(days=1)\n    datey2 = datey.strftime('%Y-%m-%d')\n    URL = 'https://www.example.com' + str(datey2)\n\n    import requests\n    page = requests.get(URL)\n    from bs4 import BeautifulSoup\n    soup = BeautifulSoup(page.text, 'lxml')\n\n    mintemp = soup.find(\"tr\",{\"class\":\"weatherhistory_results_datavalue temp_mn\"})\n    for i in mintemp:\n        mintemp2 = i.find(\"span\",{\"class\": \"value\"})\n\n    maxtemp = soup.find(\"tr\",{\"class\":\"weatherhistory_results_datavalue temp_mx\"})\n    for i in maxtemp:\n        maxtemp2 = i.find(\"span\",{\"class\": \"value\"})\n\n    mintemp3 = mintemp2.text\n    maxtemp3 = maxtemp2.text\n\n    while(datey &lt;= endDate):\n        SH.cell(row=NXrow, column=1).value = \"ZIP\"\n        SH.cell(row=NXrow, column=2).value = datey2\n        SH.cell(row=NXrow, column=3).value = URL\n        SH.cell(row=NXrow, column=4).value = mintemp3\n        SH.cell(row=NXrow, column=5).value = maxtemp3\n        WB.save('File.xlsx')\n</code></pre>\n\n<p>Would love any pointers you can give me to fix this!</p>\n"}, {"tags": ["python", "optimization", "global"], "answers": [{"tags": [], "owner": {"reputation": 5131, "user_id": 7919597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/905688a3a3921c2f03f4914e943e1915?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7919597/joe"}, "is_accepted": true, "score": 2, "last_activity_date": 1591354808, "last_edit_date": 1591354808, "creation_date": 1532583341, "answer_id": 51531670, "question_id": 51528778, "link": "https://stackoverflow.com/questions/51528778/find-the-optimal-solution-in-python/51531670#51531670", "title": "find the optimal solution in python", "body": "<p>You could use <a href=\"https://nlopt.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">NLopt</a>, which has some global optimizers, e.g. DIRECT (download at <a href=\"https://www.lfd.uci.edu/~gohlke/pythonlibs/#nlopt\" rel=\"nofollow noreferrer\">gohlke</a>). Or there is scipy's <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.basinhopping.html#scipy.optimize.basinhopping\" rel=\"nofollow noreferrer\">basinhopping</a>. Another nice solution is <a href=\"https://www.gerad.ca/nomad/\" rel=\"nofollow noreferrer\">NOMAD</a>, a very good black box optimizier. It also has a Python interface, but it is not that user friendly and intuitive.</p>\n\n<p>You can find other hints on local and global optimization in <a href=\"https://stackoverflow.com/a/52438791/7919597\">this answer</a> or <a href=\"https://stackoverflow.com/a/61495132/7919597\">this answer</a>.</p>\n"}], "owner": {"reputation": 1788, "user_id": 257742, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c6d3383ab09eb3d083bd925c84ff9c6e?s=128&d=identicon&r=PG", "display_name": "D.Giunchi", "link": "https://stackoverflow.com/users/257742/d-giunchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 669, "favorite_count": 0, "accepted_answer_id": 51531670, "answer_count": 1, "score": 3, "last_activity_date": 1591354808, "creation_date": 1532559463, "question_id": 51528778, "link": "https://stackoverflow.com/questions/51528778/find-the-optimal-solution-in-python", "title": "find the optimal solution in python", "body": "<p>I have this formula: </p>\n\n<p>1 - e^(log(0.5) * (x / beta) ^ alpha )</p>\n\n<p>with alpha and beta that are my variable that I have to find.\nx is a bunch of images (my data) and I can compare that formula's output with the ground truth that comes from a user test. Basically I can generate a loss function that I would like to minimize. For finding the best alpha and beta I tried to use tensorflow but gradient descent and other optimizers appear to fail as that function is not convex (I try different initial conditions). Is there a global optimization tool in python that I can use to solve this problem?</p>\n"}, {"tags": ["python", "apache-spark", "machine-learning", "pyspark"], "comments": [{"owner": {"reputation": 121, "user_id": 1362817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48ac0549be235ba731cf05ff449f407f?s=128&d=identicon&r=PG", "display_name": "ds_Abc", "link": "https://stackoverflow.com/users/1362817/ds-abc"}, "edited": false, "score": 0, "creation_date": 1594885511, "post_id": 51528769, "comment_id": 111284672, "body": "Which Python library gives the best performance for FPGrowth? I&#39;ve been using mlxtend and want to know if there&#39;s any implementation better than that. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 609, "user_id": 9682236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SHbQdxPyduc/AAAAAAAAAAI/AAAAAAAAAII/mZRrgTh7xK4/photo.jpg?sz=128", "display_name": "Mark McGown", "link": "https://stackoverflow.com/users/9682236/mark-mcgown"}, "edited": false, "score": 2, "creation_date": 1532561333, "post_id": 51528831, "comment_id": 90026342, "body": "Thanks for your quick reply and insightful response. I edited the post above, still get undesired output. I did a find and replace of my 1&#39;s in excel, removed my 0&#39;s, copied it to text file, and added the line strip you mentioned. Can you provide additional tips for why it might not be working/example text file that does work with it so i can compare?"}, {"owner": {"reputation": 29493, "user_id": 3269809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRvqq.jpg?s=128&g=1", "display_name": "Alper t. Turker", "link": "https://stackoverflow.com/users/3269809/alper-t-turker"}, "reply_to_user": {"reputation": 609, "user_id": 9682236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SHbQdxPyduc/AAAAAAAAAAI/AAAAAAAAAII/mZRrgTh7xK4/photo.jpg?sz=128", "display_name": "Mark McGown", "link": "https://stackoverflow.com/users/9682236/mark-mcgown"}, "edited": false, "score": 0, "creation_date": 1532598322, "post_id": 51528831, "comment_id": 90039180, "body": "@MarkMcGown You might have missed the second point raised here - your data is separated by tabs (<code>\\t</code>) not spaces. Inside your snippet you just discard <code>data.map(lambda line: line.strip().split()</code> while it should be used as <code>transactions</code>."}], "tags": [], "owner": {"reputation": 26, "user_id": 10136092, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/83b184b2a57fbc4d979377cd0092a012?s=128&d=identicon&r=PG", "display_name": "user10136092", "link": "https://stackoverflow.com/users/10136092/user10136092"}, "is_accepted": true, "score": 1, "last_activity_date": 1532559920, "creation_date": 1532559920, "answer_id": 51528831, "question_id": 51528769, "link": "https://stackoverflow.com/questions/51528769/how-to-implement-fpgrowth-algorithm-in-python/51528831#51528831", "title": "How to implement FPGrowth algorithm in Python?", "body": "<p>Your data is not a valid input for Spark FPGrowth algorithm.</p>\n\n<p>In Spark each basket should be represented as a list of unique labels, for example:</p>\n\n<pre><code>baskets = sc.parallelize([(\"Rock Salt\", \"Blankets\"), (\"Blankets\", \"Dry Fruits\", Canned Food\")])\n</code></pre>\n\n<p>not a binary matrix, as for the other library you use. Please convert your data to aforementioned format first.</p>\n\n<p>Additionally your data is tab not space separated, so even if the input was correct, you should split like</p>\n\n<pre><code> data.map(lambda line: line.strip().split())\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 609, "user_id": 9682236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SHbQdxPyduc/AAAAAAAAAAI/AAAAAAAAAII/mZRrgTh7xK4/photo.jpg?sz=128", "display_name": "Mark McGown", "link": "https://stackoverflow.com/users/9682236/mark-mcgown"}, "edited": false, "score": 0, "creation_date": 1532630309, "post_id": 51538899, "comment_id": 90058800, "body": "thanks, this results in &#39;&#39; being considered as items in the basket so i just need to remove empty values. beginner question, but having a hard time finding how to do this if you have that final quick tip"}, {"owner": {"reputation": 609, "user_id": 9682236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SHbQdxPyduc/AAAAAAAAAAI/AAAAAAAAAII/mZRrgTh7xK4/photo.jpg?sz=128", "display_name": "Mark McGown", "link": "https://stackoverflow.com/users/9682236/mark-mcgown"}, "edited": false, "score": 0, "creation_date": 1532630647, "post_id": 51538899, "comment_id": 90058959, "body": "should have added, i tried this notempty = unique.filter(lambda x: x != &#39;&#39;)"}], "tags": [], "owner": {"reputation": 73, "user_id": 8830149, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155503857259733/picture?type=large", "display_name": "Litan Ilany", "link": "https://stackoverflow.com/users/8830149/litan-ilany"}, "is_accepted": false, "score": 0, "last_activity_date": 1532608186, "creation_date": 1532608186, "answer_id": 51538899, "question_id": 51528769, "link": "https://stackoverflow.com/questions/51528769/how-to-implement-fpgrowth-algorithm-in-python/51538899#51538899", "title": "How to implement FPGrowth algorithm in Python?", "body": "<p>I think the file is tab-separated, so you should split it by <code>'\\t'</code> instead of <code>' '</code></p>\n\n<p><code>transactions = data.map(lambda line: line.strip().split('\\t'))</code></p>\n"}], "owner": {"reputation": 609, "user_id": 9682236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SHbQdxPyduc/AAAAAAAAAAI/AAAAAAAAAII/mZRrgTh7xK4/photo.jpg?sz=128", "display_name": "Mark McGown", "link": "https://stackoverflow.com/users/9682236/mark-mcgown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4527, "favorite_count": 3, "accepted_answer_id": 51528831, "answer_count": 2, "score": 1, "last_activity_date": 1532608186, "creation_date": 1532559396, "last_edit_date": 1532561238, "question_id": 51528769, "link": "https://stackoverflow.com/questions/51528769/how-to-implement-fpgrowth-algorithm-in-python", "title": "How to implement FPGrowth algorithm in Python?", "body": "<p>I've successfully used the apriori algorithm in Python as follows:</p>\n\n<pre><code>import pandas as pd\nfrom mlxtend.frequent_patterns import apriori\nfrom mlxtend.frequent_patterns import association_rules\n\ndf = pd.read_csv('C:\\\\Users\\\\marka\\\\Downloads\\\\Assig5.csv')\ndf = apriori(df, min_support=0.79, use_colnames=True)\nrules = association_rules(df, metric=\"lift\", min_threshold=1)\nrules[ (rules['lift'] &gt;= 1) &amp;\n       (rules['confidence'] &gt;= 1) ]\n</code></pre>\n\n<p>I'd like to use the FPGrowth algorithm to see if I get the same result but I believe I'm using it wrong since I don't get similar output. The documentation for spark (<a href=\"https://spark.apache.org/docs/1.6.0/mllib-frequent-pattern-mining.html\" rel=\"nofollow noreferrer\">https://spark.apache.org/docs/1.6.0/mllib-frequent-pattern-mining.html</a>) says:</p>\n\n<pre><code>from pyspark.mllib.fpm import FPGrowth\ndata = sc.textFile(\"data/mllib/sample_fpgrowth.txt\")\ntransactions = data.map(lambda line: line.strip().split(' '))\nmodel = FPGrowth.train(transactions, minSupport=0.2, numPartitions=10)\nresult = model.freqItemsets().collect()\nfor fi in result:\n    print(fi)\n</code></pre>\n\n<p>So my code is in turn:</p>\n\n<pre><code>from pyspark.mllib.fpm import FPGrowth\nfrom pyspark import SparkConf\nfrom pyspark.context import SparkContext\nsc = SparkContext.getOrCreate(SparkConf().setMaster(\"local[*]\"))\ndata = sc.textFile(\"C:\\\\Users\\\\marka\\\\Downloads\\\\Assig6.txt\")\ntransactions = data.map(lambda line: line.strip().split(' '))\nmodel = FPGrowth.train(transactions, minSupport=0.2, numPartitions=10)\nresult = model.freqItemsets().collect()\nfor fi in result:\n    print(fi)\n</code></pre>\n\n<p>But I get the following instead of a real answer, what am I doing wrong?</p>\n\n<pre><code>FreqItemset(items=['1\\t1\\t1\\t1\\t1\\t1\\t1\\t0\\t0\\t0\\t0\\t1\\t1\\t0\\t0\\t1\\t1\\t1\\t1\\t1\\t0\\t0'], freq=24)\n</code></pre>\n\n<p>To make Assig6 I just resaved my original csv as txt\n<a href=\"https://i.stack.imgur.com/7Z2fk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7Z2fk.png\" alt=\"enter image description here\"></a></p>\n\n<p>I started changing my format and updated my code per user10136092 but still get the undesired output. Here is my code, output, and a sample picture of my new input.</p>\n\n<pre><code>from pyspark.mllib.fpm import FPGrowth\nfrom pyspark import SparkConf\nfrom pyspark.context import SparkContext\nsc = SparkContext.getOrCreate(SparkConf().setMaster(\"local[*]\"))\ndata = sc.textFile(\"C:\\\\Users\\\\marka\\\\Downloads\\\\Assig2.txt\")\ndata.map(lambda line: line.strip().split())\ntransactions = data.map(lambda line: line.strip().split(' '))\nmodel = FPGrowth.train(transactions, minSupport=0.2, numPartitions=10)\nresult = model.freqItemsets().collect()\nfor fi in result:\n    print(fi)\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>FreqItemset(items=['Rock_salt\\tFlashlights\\tWater\\tSnow_shovels\\tBlankets\\tCanned_food'], freq=34)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/8Rlqi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8Rlqi.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1532560835, "post_id": 51528729, "comment_id": 90026255, "body": "Can you post a small example with expected output?"}], "answers": [{"tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": false, "score": 2, "last_activity_date": 1532563049, "creation_date": 1532563049, "answer_id": 51529218, "question_id": 51528729, "link": "https://stackoverflow.com/questions/51528729/transform-scale-of-columns-into-a-range-from-1-to-10/51529218#51529218", "title": "Transform Scale of Columns into a range from 1 to 10", "body": "<p>IIUC, you should take advantage of broadcasting</p>\n\n<pre><code>long_df2= (long_df - long_df.min())/(long_df.max() - long_df.min()) * 9 + 1\n</code></pre>\n\n<p>Then <code>concat</code></p>\n\n<pre><code>pd.concat([long_df, long_df2.add_suffix('_T')], 1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 1, "creation_date": 1532563304, "post_id": 51529223, "comment_id": 90026743, "body": "Very thorough explanation :)"}, {"owner": {"reputation": 131, "user_id": 10033716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79bac930ae1e3855273a254c5cc61a4a?s=128&d=identicon&r=PG&f=1", "display_name": "Sveta", "link": "https://stackoverflow.com/users/10033716/sveta"}, "edited": false, "score": 0, "creation_date": 1532565095, "post_id": 51529223, "comment_id": 90027061, "body": "Thank you very much, all solutions work great, but for some reason the solutions without looping are adding two sets of transformed columns, one with _T and another set with _TT.  Both sets are correct and identical, it is just two of them."}, {"owner": {"reputation": 21903, "user_id": 9274732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2713715b9156a66c16d7c1331528dce8?s=128&d=identicon&r=PG&f=1", "display_name": "Ben.T", "link": "https://stackoverflow.com/users/9274732/ben-t"}, "reply_to_user": {"reputation": 131, "user_id": 10033716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79bac930ae1e3855273a254c5cc61a4a?s=128&d=identicon&r=PG&f=1", "display_name": "Sveta", "link": "https://stackoverflow.com/users/10033716/sveta"}, "edited": false, "score": 0, "creation_date": 1532565296, "post_id": 51529223, "comment_id": 90027097, "body": "@Nora the second method should be used on the original <code>long_df</code>, not the one if you already used the method with the loop <code>for</code>. Otherwise, the columns created with the loop <code>for</code> are again considered, so you get the other set <code>_T_T</code> columns from these columns :)"}, {"owner": {"reputation": 21903, "user_id": 9274732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2713715b9156a66c16d7c1331528dce8?s=128&d=identicon&r=PG&f=1", "display_name": "Ben.T", "link": "https://stackoverflow.com/users/9274732/ben-t"}, "reply_to_user": {"reputation": 131, "user_id": 10033716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79bac930ae1e3855273a254c5cc61a4a?s=128&d=identicon&r=PG&f=1", "display_name": "Sveta", "link": "https://stackoverflow.com/users/10033716/sveta"}, "edited": false, "score": 0, "creation_date": 1532565777, "post_id": 51529223, "comment_id": 90027175, "body": "@Nora I mean when you create <code>long_df_T</code> it should be on the original <code>long_df</code>. Does it make sense?"}, {"owner": {"reputation": 131, "user_id": 10033716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79bac930ae1e3855273a254c5cc61a4a?s=128&d=identicon&r=PG&f=1", "display_name": "Sveta", "link": "https://stackoverflow.com/users/10033716/sveta"}, "edited": false, "score": 0, "creation_date": 1532566463, "post_id": 51529223, "comment_id": 90027298, "body": "Yes, it makes sense and thank you so much!  The solutions work great and very optimal."}], "tags": [], "owner": {"reputation": 21903, "user_id": 9274732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2713715b9156a66c16d7c1331528dce8?s=128&d=identicon&r=PG&f=1", "display_name": "Ben.T", "link": "https://stackoverflow.com/users/9274732/ben-t"}, "is_accepted": true, "score": 1, "last_activity_date": 1532563088, "creation_date": 1532563088, "answer_id": 51529223, "question_id": 51528729, "link": "https://stackoverflow.com/questions/51528729/transform-scale-of-columns-into-a-range-from-1-to-10/51529223#51529223", "title": "Transform Scale of Columns into a range from 1 to 10", "body": "<p>In your code, the error is that when you define <code>trnsfrm_1_10</code>, <code>b</code> is a parameter while actually it's only your output. It should not be a parameter, especially as it's the value in the new column you want to create during the loop <code>for</code>. so the code would be more something like:</p>\n\n<pre><code>def trnsfrm_1_10 (a):\n    b = (a-np.min(a))/(np.max(a)-np.min(a))*9+1\n    return b\n\nfor a in mylist:   \n    b=a+\"_T\"\n    long_df[b] = long_df.apply(lambda row: trnsfrm_1_10(row[a]), axis=1)\n</code></pre>\n\n<p>The other thing is that you calculate <code>np.min(a)</code> in <code>trnsfrm_1_10</code> which actually will be equal to <code>a</code> (same with <code>max</code>) because you <code>apply</code> row wise so <code>a</code> is the unique value in the row and column you are in. I assume what you mean would be more <code>np.min(long_df['a'])</code> which can also be written <code>long_df[a].min()</code></p>\n\n<p>If I understand well, what you try to perform is actually:</p>\n\n<pre><code>dates = pd.date_range('1/1/2000', periods=100, freq='M')\nlong_df = pd.DataFrame(np.random.randn(100, 4),index=dates, \n                       columns=['Colorado', 'Texas', 'New York', 'Ohio'])\nmylist=['Colorado', 'Texas', 'New York', 'Ohio']\n\nfor a in mylist:\n    long_df[a+\"_T\"] = (long_df[a]-long_df[a].min())/(long_df[a].max()-long_df[a].min())*9+1\n</code></pre>\n\n<p>giving then:</p>\n\n<pre><code>long_df.head()\nOut[29]: \n            Colorado     Texas  New York      Ohio  Colorado_T   Texas_T  \\\n2000-01-31 -0.762666  1.413276  0.857333  0.648960    3.192754  7.768111   \n2000-02-29  0.148023  0.304971  1.954966  0.656787    4.676018  6.082177   \n2000-03-31  0.531195  1.283100  0.070963  1.098968    5.300102  7.570091   \n2000-04-30 -0.385679  0.425382  1.330285  0.496238    3.806763  6.265344   \n2000-05-31 -0.047057 -0.362419 -2.276546  0.297990    4.358285  5.066955   \n\n            New York_T    Ohio_T  \n2000-01-31    6.390972  5.659870  \n2000-02-29    8.242445  5.676254  \n2000-03-31    5.064533  6.601876  \n2000-04-30    7.188740  5.340175  \n2000-05-31    1.104787  4.925180  \n</code></pre>\n\n<p>where all the value in the colum with <code>_T</code> are calculated from the corresponding column. </p>\n\n<p>Ultimately to not use a <code>for</code> loop over the column, you can do:</p>\n\n<pre><code>long_df_T =(((long_df -long_df.min(axis=0))/(long_df.max(axis=0) -long_df.min(axis=0))*9 +1)\n             .add_suffix('_T'))\n</code></pre>\n\n<p>to create a dataframe with all the columns with <code>_T</code> at once. Then few option are available to add them in <code>long_df</code>, one way is with <code>join</code>:</p>\n\n<pre><code>long_df = long_df.join(long_df_T)\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 10033716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79bac930ae1e3855273a254c5cc61a4a?s=128&d=identicon&r=PG&f=1", "display_name": "Sveta", "link": "https://stackoverflow.com/users/10033716/sveta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 51529223, "answer_count": 2, "score": 2, "last_activity_date": 1532563088, "creation_date": 1532559065, "last_edit_date": 1532562765, "question_id": 51528729, "link": "https://stackoverflow.com/questions/51528729/transform-scale-of-columns-into-a-range-from-1-to-10", "title": "Transform Scale of Columns into a range from 1 to 10", "body": "<p>I am trying to create a set of new columns that would be derived from an existing columns in a dataframe using a function.  Here is sample code that produces errors and I wonder if there a better more efficient way to accomplish it than the loop  </p>\n\n<pre><code>import numpy as np\nimport pandas as pd\n\ndates = pd.date_range('1/1/2000', periods=100, freq='M')\nlong_df = pd.DataFrame(np.random.randn(100, 4),index=dates, columns=['Colorado', 'Texas', 'New York', 'Ohio'])\nmylist=['Colorado', 'Texas', 'New York', 'Ohio']\n\ndef trnsfrm_1_10 (a, b):\n    b = (a-np.min(a))/(np.max(a)-np.min(a))*9+1\n    return b\n\nfor a in mylist:   \n    b=a+\"_T\"\n    long_df[b] = long_df.apply(lambda row: trnsfrm_1_10(row[a], row[b]), axis=1)\n</code></pre>\n\n<p>To clarify above question, here is example of DataFrame that has input columns (Colorado, Texas, New York) and output variables (T_Colorado, T_Texas, T_New York).  Let's assume that if for each input variable, below are minimum and maximum of each column then by applying equation: b = (a-min)/(max-min)*9+1 to each column, the output variables are T_Colorado T_Texas     T_New York.  I had to simulate this process in excel based on just 5 rows, but it would be great to compute minimum and maximum as part of the function because I would have a lot more rows in the real data.  I am relatively new to Python and Pandas and I really appreciate your help.  </p>\n\n<p>These are example min and max</p>\n\n<pre><code>    Colorado    Texas   New York\nmin   0.03     -1.26    -1.04           \nmax   1.17      0.37     0.86\n</code></pre>\n\n<p>This is example of a DataFrame      </p>\n\n<pre><code>Index     Colorado  Texas   New York T_Colorado T_Texas  T_New York\n1/31/2000   0.03     0.37    0.09      1.00      10.00     6.35\n2/29/2000   0.4      0.26   -1.04      3.92       9.39     1.00\n3/31/2000   0.35    -0.06   -0.75      3.53       7.63     2.37\n4/30/2000   1.17    -1.26   -0.61     10.00       1.00     3.04\n5/31/2000   0.46    -0.79    0.86      4.39       3.60     10.00\n</code></pre>\n"}, {"tags": ["python", "curl", "request"], "comments": [{"owner": {"reputation": 3836, "user_id": 3275464, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/g6Pnl.png?s=128&g=1", "display_name": "Learning is a mess", "link": "https://stackoverflow.com/users/3275464/learning-is-a-mess"}, "edited": false, "score": 0, "creation_date": 1532559236, "post_id": 51528727, "comment_id": 90025932, "body": "You can use <code>urrlib</code>: <a href=\"https://stackoverflow.com/a/22776/3275464\">stackoverflow.com/a/22776/3275464</a>"}], "answers": [{"comments": [{"owner": {"reputation": 178, "user_id": 3714404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGbSQ.png?s=128&g=1", "display_name": "Nerdrigo", "link": "https://stackoverflow.com/users/3714404/nerdrigo"}, "edited": false, "score": 0, "creation_date": 1532560130, "post_id": 51528781, "comment_id": 90026125, "body": "It still just downloads the HTML file  instead of the PDF. I am looking into the urrlib, as you sugested in the comments."}, {"owner": {"reputation": 386, "user_id": 1247667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc6225853888eded3a91a95718d4f2f?s=128&d=identicon&r=PG", "display_name": "Scard", "link": "https://stackoverflow.com/users/1247667/scard"}, "edited": false, "score": 0, "creation_date": 1604714780, "post_id": 51528781, "comment_id": 114439718, "body": "tqdm is a very useful module. Thanks for the advice."}], "tags": [], "owner": {"reputation": 3836, "user_id": 3275464, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/g6Pnl.png?s=128&g=1", "display_name": "Learning is a mess", "link": "https://stackoverflow.com/users/3275464/learning-is-a-mess"}, "is_accepted": false, "score": 1, "last_activity_date": 1532559471, "creation_date": 1532559471, "answer_id": 51528781, "question_id": 51528727, "link": "https://stackoverflow.com/questions/51528727/how-to-download-a-pdf-with-python-or-curl/51528781#51528781", "title": "How to download a pdf with python or curl?", "body": "<p>A function doing the job with a progress bar:</p>\n\n<pre><code>from tqdm import tqdm\nimport requests\n\ndef download_file( url, filename):\n    response = requests.get(url, stream=True)\n\n    with open(filename, \"wb\") as handle:\n        for data in tqdm(response.iter_content()):\n            handle.write(data)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 178, "user_id": 3714404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGbSQ.png?s=128&g=1", "display_name": "Nerdrigo", "link": "https://stackoverflow.com/users/3714404/nerdrigo"}, "edited": false, "score": 0, "creation_date": 1532560804, "post_id": 51528868, "comment_id": 90026249, "body": "Thank you so much for your help, I&#39;ll definetly keep that in mind next time I try to download somehting. It was easier (for me) to download the file using <code>cUrl</code> after your observation, now I&#39;m going to try and do it with python."}], "tags": [], "owner": {"reputation": 2472, "user_id": 109554, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8d5e369f6d7fb6343f9559b0a65abde1?s=128&d=identicon&r=PG", "display_name": "tatlar", "link": "https://stackoverflow.com/users/109554/tatlar"}, "is_accepted": true, "score": 3, "last_activity_date": 1532561708, "last_edit_date": 1532561708, "creation_date": 1532560105, "answer_id": 51528868, "question_id": 51528727, "link": "https://stackoverflow.com/questions/51528727/how-to-download-a-pdf-with-python-or-curl/51528868#51528868", "title": "How to download a pdf with python or curl?", "body": "<p>Hi there and welcome to Stack Overflow!</p>\n\n<p>If you want to use <strong>Python</strong> use the <code>requests</code> <a href=\"http://docs.python-requests.org/en/master/\" rel=\"nofollow noreferrer\">library</a> to get the initial page to check out the content (you will need to install it first via <code>pip</code> or <code>pipenv</code>):</p>\n\n<pre><code>&gt;&gt;&gt; import requests\n&gt;&gt;&gt; r = requests.get('http://dof.gob.mx/nota_to_pdf.php?fecha=25/07/2018&amp;edicion=MAT')\n&gt;&gt;&gt; r.status_code\n200\n&gt;&gt;&gt; r.headers['content-type']\n'text/html; charset=UTF-8'\n&gt;&gt;&gt; r.encoding\n'UTF-8'\n&gt;&gt;&gt; r.text\n'&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \n\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\\r\\n&lt;html \nxmlns=\"http://www.w3.org/1999/xhtml\"&gt;\\r\\n&lt;head&gt;\\r\\n&lt;meta http-equiv=\"Content- \nType\" content=\"text/html; charset=utf-8\" /&gt;\\r\\n&lt;title&gt;Diario Oficial de la \nFederaci\u00f3n&lt;/title&gt;\\r\\n&lt;/head&gt;\\r\\n\\r\\n&lt;body&gt;\\r\\n&lt;script&gt;\\r\\n  \n(function(i,s,o,g,r,a,m){i[\\'GoogleAnalyticsObject\\']=r;i[r]=i[r]||function() . \n{\\r\\n  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new\nDate();a=s.createElement(o),\\r\\n  m=s.getElementsByTagName(o\n[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\\r\\n  })\n(window,document,\\'script\\',\\'//www.google-\nanalytics.com/analytics.js\\',\\'ga\\');\\r\\n\\r\\n  ga(\\'create\\', \\'UA-32467343-1\\', \\'auto\\');\\r\\n\nga(\\'send\\', \\'pageview\\');\\r\\n\\r\\n&lt;/script&gt;\\r\\n&lt;/body&gt;\\r\\n&lt;/html&gt;&lt;script&gt; \nself.location=(\\'abrirPDF.php?archivo=25072018-MAT.pdf&amp;anio=2018&amp;repo=\\'); \n&lt;/script&gt;&lt;html&gt;\\n&lt;head&gt;\\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; \ncharset=iso-8859-1\"&gt;\\n\\t&lt;script&gt;\\n\\tfunction BorrarPDF()\n\\n\\t{\\n\\t\\tdocument.getElementById(\\'cerrar\\').src=\\'cerrar_doc_imagen.php\narchivo=\\'+document.getElementById(\\'pdf\\').value;\\n\\t}\\n\\t\n&lt;/script&gt;\\n&lt;/head&gt;\\n&lt;body onUnload=\"BorrarPDF()\"&gt;\\n\\n\n&lt;input type=\"hidden\" value=\"25072018-MAT.pdf\" id=\"pdf\" name=\"pdf\"&gt;\\n\\n\n&lt;iframe id=\"cerrar\" width=\"1px\" height=\"1px\" scrolling=\"no\" \nframeborder=\"0\" marginwidth=\"0px\" marginheight=\"0px\"&gt;\n&lt;/iframe&gt;\\n\\n&lt;/body&gt;\\n&lt;/html&gt;\\n'\n</code></pre>\n\n<p>If you dig through that HTML, you will see that the page uses <code>self.location</code> to redirect to the PDF file when the page loads.</p>\n\n<p>The <em>actual</em> URL for the PDF is:</p>\n\n<pre><code>http://dof.gob.mx/abrirPDF.php?archivo=25072018-MAT.pdf&amp;anio=2018&amp;repo=\n</code></pre>\n\n<p>So, if you do the same process again with the <code>requests</code> library, this time specifying the actual PDF file:</p>\n\n<pre><code>&gt;&gt;&gt; import requests\n&gt;&gt;&gt; r = requests.get('http://dof.gob.mx/abrirPDF.php?archivo=25072018-MAT.pdf&amp;anio=2018&amp;repo=')\n&gt;&gt;&gt; r.status_code\n200\n&gt;&gt;&gt; r.headers['content-type']\n'application/pdf'\n</code></pre>\n\n<p>Now you have the PDF in the body of the request.</p>\n\n<p>You can do the same with <code>cURL</code> -- you just need to ensure that you are grabbing the right thing (which admittedly is obfuscated by the webpage javascript function, probably by design).</p>\n\n<p>I hope that helps!</p>\n"}], "owner": {"reputation": 178, "user_id": 3714404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGbSQ.png?s=128&g=1", "display_name": "Nerdrigo", "link": "https://stackoverflow.com/users/3714404/nerdrigo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1618, "favorite_count": 0, "accepted_answer_id": 51528868, "answer_count": 2, "score": -1, "last_activity_date": 1532561708, "creation_date": 1532559058, "last_edit_date": 1532560620, "question_id": 51528727, "link": "https://stackoverflow.com/questions/51528727/how-to-download-a-pdf-with-python-or-curl", "title": "How to download a pdf with python or curl?", "body": "<p>I want to download a PDF file using Python. I am aware that there are several SO Q&amp;A about this issue. However, I was only able to find cases where the <code>URL</code> follows this format <code>http://www.example.com/example.pdf</code>.</p>\n\n<p>The <code>URL</code> I use to download the file is the following: <code>http://dof.gob.mx/nota_to_pdf.php?fecha=25/07/2018&amp;edicion=MAT</code>. If I open a browser and paste the <code>URL</code> in the search bar, I am taken to a blank page where I am prompted to save the file.</p>\n\n<p>When I try to use the methods shown in several tutorial sites, or try to follow the advise I find in other SO questions, I am only able to download the HTML, the same thing happens when I try to do it using <code>curl</code> in the terminal.</p>\n\n<p>Any help will be deeply appreciated.</p>\n"}, {"tags": ["python", "arrays", "algorithm"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1532561115, "post_id": 51528690, "comment_id": 90026307, "body": "First, does <code>[ a, b, c, d, e ]</code> mean <code>[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;]</code>, or something different? And what does &quot;furthest&quot; mean? Do you have some kind of distance function in mind, like <code>abs(ord(x) - ord(y))</code>? If so, are the values guaranteed to be in sorted order? And can you give us some examples of what output you want for values that aren&#39;t just linearly increasing? Or do you just minimizing the distances between <i>indexes</i>, not <i>values</i> of the skips? Or\u2026?"}], "answers": [{"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1532559489, "creation_date": 1532559489, "answer_id": 51528784, "question_id": 51528690, "link": "https://stackoverflow.com/questions/51528690/algorithm-for-removing-entries-from-an-array-by-removing-middlest-items/51528784#51528784", "title": "Algorithm for removing entries from an array, by removing &quot;middlest&quot; items?", "body": "<p>Step through the list with steps of about size <code>(n-1)/(m-1)</code>, where \"about\" is there because we can't land on a non-integer.</p>\n\n<pre><code>def representatives(l, m):\n    num, den = len(l)-1, m-1\n    return [l[i * num // den] for i in range(m)]\n</code></pre>\n\n<p>Here, element <code>i</code> of the result is taken from element <code>i*(n-1)//(m-1)</code> of the input, where <code>//</code> is floor division.</p>\n"}, {"comments": [{"owner": {"reputation": 32238, "user_id": 273637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/89b9c456e8b6945d1e5fd87addf4f739?s=128&d=identicon&r=PG", "display_name": "Chris W.", "link": "https://stackoverflow.com/users/273637/chris-w"}, "edited": false, "score": 0, "creation_date": 1532626492, "post_id": 51528877, "comment_id": 90056963, "body": "Wow! I&#39;ve never seen the <code>::</code> syntax before! cooool"}], "tags": [], "owner": {"reputation": 896, "user_id": 9019560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7024d310c7521f85292ab4961accee31?s=128&d=identicon&r=PG&f=1", "display_name": "Turksarama", "link": "https://stackoverflow.com/users/9019560/turksarama"}, "is_accepted": false, "score": 2, "last_activity_date": 1532574583, "last_edit_date": 1532574583, "creation_date": 1532560210, "answer_id": 51528877, "question_id": 51528690, "link": "https://stackoverflow.com/questions/51528690/algorithm-for-removing-entries-from-an-array-by-removing-middlest-items/51528877#51528877", "title": "Algorithm for removing entries from an array, by removing &quot;middlest&quot; items?", "body": "<p>For a collection <code>c</code>:</p>\n\n<pre><code>sparse_list = c[::len(c)//(m-1)]\n</code></pre>\n\n<p>This returns a list with a step size of <code>len(c)//(m-1)</code> (note integer division).</p>\n\n<p>e.g.:</p>\n\n<pre><code>c = list(range(50))\nm = 5\nc[::len(c)//(m-1)] # [0, 12, 24, 36, 48]\n</code></pre>\n\n<p>It's not quite perfect because it goes for exact spacing, but it's quick and easy (and performant).</p>\n"}], "owner": {"reputation": 32238, "user_id": 273637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/89b9c456e8b6945d1e5fd87addf4f739?s=128&d=identicon&r=PG", "display_name": "Chris W.", "link": "https://stackoverflow.com/users/273637/chris-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1532574583, "creation_date": 1532558820, "question_id": 51528690, "link": "https://stackoverflow.com/questions/51528690/algorithm-for-removing-entries-from-an-array-by-removing-middlest-items", "title": "Algorithm for removing entries from an array, by removing &quot;middlest&quot; items?", "body": "<p>Given a list of items of length <code>n</code>, where a maximum number of wanted items is <code>m</code>, and <code>m &lt; n</code>, and in which the items in the list which are most valuable / useful are those that are furthest from any other item. How can I remove items from the list to reduce the size of the list to <code>m</code>.</p>\n\n<ul>\n<li><p>e.g., for <code>[ a, b, c, d, e ]</code> with an <code>m == 2</code>, we would get <code>[ a, e]</code></p></li>\n<li><p>e.g., for <code>[ a, b, c, d, e ]</code> with an <code>m == 3</code>, we would get <code>[ a, c, e ]</code></p></li>\n<li>e.g., for <code>[ a, b, c, d, e ]</code> with an <code>m == 4</code>, we would get <code>[ a, b, c, e ]</code> or <code>[ a, c, d, e ]</code>. (Either answer would be valid; but only one should be returned, and preferably it would be deterministically returned.)</li>\n</ul>\n\n<p>Note: I am generalizing a real problem, which is selecting representative frames from a video. The code will be written in python.</p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 2992, "user_id": 3277133, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/887c8d5491e0f4976fd0b261644f89ba?s=128&d=identicon&r=PG&f=1", "display_name": "RustyShackleford", "link": "https://stackoverflow.com/users/3277133/rustyshackleford"}, "edited": false, "score": 1, "creation_date": 1532559476, "post_id": 51528720, "comment_id": 90025986, "body": "this works. However the dataframe has roughly 30 other rows, could this operation be done in the same dataframe while maintaining the shape? If not no worries I will accept the answer"}, {"owner": {"reputation": 21903, "user_id": 9274732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2713715b9156a66c16d7c1331528dce8?s=128&d=identicon&r=PG&f=1", "display_name": "Ben.T", "link": "https://stackoverflow.com/users/9274732/ben-t"}, "edited": false, "score": 1, "creation_date": 1532559509, "post_id": 51528720, "comment_id": 90025991, "body": "this is awesome and way better than using <code>apply(pd.Series)</code> and <code>stack</code> but with this method, how do keep the id number? is there a way to link this number in your new_df? just a curiosity :)"}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "reply_to_user": {"reputation": 21903, "user_id": 9274732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2713715b9156a66c16d7c1331528dce8?s=128&d=identicon&r=PG&f=1", "display_name": "Ben.T", "link": "https://stackoverflow.com/users/9274732/ben-t"}, "edited": false, "score": 1, "creation_date": 1532560077, "post_id": 51528720, "comment_id": 90026112, "body": "@Ben.T there is a way to maintain the IDs :) will edit."}, {"owner": {"reputation": 21903, "user_id": 9274732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2713715b9156a66c16d7c1331528dce8?s=128&d=identicon&r=PG&f=1", "display_name": "Ben.T", "link": "https://stackoverflow.com/users/9274732/ben-t"}, "edited": false, "score": 1, "creation_date": 1532560550, "post_id": 51528720, "comment_id": 90026199, "body": "@RafaelC smart and easy. already upvote so can&#39;t do more ^^ but I keep in mind this method :)"}, {"owner": {"reputation": 2992, "user_id": 3277133, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/887c8d5491e0f4976fd0b261644f89ba?s=128&d=identicon&r=PG&f=1", "display_name": "RustyShackleford", "link": "https://stackoverflow.com/users/3277133/rustyshackleford"}, "edited": false, "score": 0, "creation_date": 1532629792, "post_id": 51528720, "comment_id": 90058558, "body": "@RafaelC if there are &#39;nan&#39; in some of the nested objects in the originial dataframe, can your code still work?"}], "tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": true, "score": 3, "last_activity_date": 1532560199, "last_edit_date": 1532560199, "creation_date": 1532559014, "answer_id": 51528720, "question_id": 51528643, "link": "https://stackoverflow.com/questions/51528643/how-to-unpack-multiple-dictionary-objects-inside-list-within-a-row-of-dataframe/51528720#51528720", "title": "How to unpack multiple dictionary objects inside list within a row of dataframe?", "body": "<p>IIUC, from</p>\n\n<pre><code>df = pd.DataFrame()\ndf['x'] = [[{'QuestionId': 11, 'ResponseId': 1},{'QuestionId': 15, 'ResponseId': 1},\n {'QuestionId': 16, 'ResponseId': 1},\n {'QuestionId': 17, 'ResponseId': 1},\n {'QuestionId': 18, 'ResponseId': 1, 'Value': 'abc'},\n {'QuestionId': 23, 'DataLabel': 'xxx', 'ResponseId': 1},\n {'QuestionId': 23, 'DataLabel': 'xxx', 'ResponseId': 2},\n {'QuestionId': 23, 'DataLabel': 'xxx', 'ResponseId': 4}],\n[{'QuestionId': 11, 'ResponseId': 1}]]\n</code></pre>\n\n<p>You can <code>sum</code> your lists to aggregate them, and use <code>DataFrame</code> constructor</p>\n\n<pre><code>new_df = pd.DataFrame(df.x.values.sum())\n\n\n    DataLabel   QuestionId  ResponseId  Value\n0   NaN         11          1           NaN\n1   NaN         15          1           NaN\n2   NaN         16          1           NaN\n3   NaN         17          1           NaN\n4   NaN         18          1           abc\n5   xxx         23          1           NaN\n6   xxx         23          2           NaN\n7   xxx         23          4           NaN\n8   NaN         11          1           NaN\n</code></pre>\n\n<p>If you want to maintain the original indexes, you can build a <code>inds</code> list and pass it as arguments to the constructor:</p>\n\n<pre><code>inds = [index for _ in ([i] * len(v) for i,v in df.x.iteritems()) for index in _]\npd.DataFrame(df.x.values.sum(), index=inds)\n\n    DataLabel   QuestionId  ResponseId  Value\n0   NaN         11          1           NaN\n0   NaN         15          1           NaN\n0   NaN         16          1           NaN\n0   NaN         17          1           NaN\n0   NaN         18          1           abc\n0   xxx         23          1           NaN\n0   xxx         23          2           NaN\n0   xxx         23          4           NaN\n1   NaN         11          1           NaN\n</code></pre>\n"}], "owner": {"reputation": 2992, "user_id": 3277133, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/887c8d5491e0f4976fd0b261644f89ba?s=128&d=identicon&r=PG&f=1", "display_name": "RustyShackleford", "link": "https://stackoverflow.com/users/3277133/rustyshackleford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 51528720, "answer_count": 1, "score": 1, "last_activity_date": 1532606258, "creation_date": 1532558462, "last_edit_date": 1532606258, "question_id": 51528643, "link": "https://stackoverflow.com/questions/51528643/how-to-unpack-multiple-dictionary-objects-inside-list-within-a-row-of-dataframe", "title": "How to unpack multiple dictionary objects inside list within a row of dataframe?", "body": "<p>I have a dataframe with the below dictionaries within a single list in every row and per row, the list are different sizes with they are of different sizes as below:</p>\n\n<pre><code>ID    unnest_column\n\n1     [{'abc': 11, 'def': 1},{'abc': 15, 'def': 1},\n     {'abc': 16, 'def': 1},\n     {'abc': 17, 'def': 1},\n     {'abc': 18, 'def': 1, 'ghi': 'abc'},\n     {'abc': 23, 'def': 'xxx', 'def': 1},\n     {'abc': 23, 'def': 'xxx', 'def': 2},\n     {'abc': 23, 'def': 'xxx', 'def': 4}]\n\n\n2   [{'abc': 11, 'def': 1}]\n</code></pre>\n\n<p>How do I unpack the dictionaries in the list and make the key values columns? </p>\n\n<p>new df potentially, not sure exactly how it will look, just need keys into columns:</p>\n\n<pre><code>id    abc    def     ghi\n\n1       2             3         abc\n</code></pre>\n"}, {"tags": ["python", "apache-spark", "dataframe", "pyspark"], "comments": [{"owner": {"reputation": 111, "user_id": 9786460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31918f5114040d3a1fc08d6f2ff5a140?s=128&d=identicon&r=PG", "display_name": "Leokins", "link": "https://stackoverflow.com/users/9786460/leokins"}, "edited": false, "score": 0, "creation_date": 1532559972, "post_id": 51528625, "comment_id": 90026095, "body": "why are you guys down voting please explain?"}], "answers": [{"tags": [], "owner": {"reputation": 15836, "user_id": 9299259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7A5cq.jpg?s=128&g=1", "display_name": "YOLO", "link": "https://stackoverflow.com/users/9299259/yolo"}, "is_accepted": false, "score": 2, "last_activity_date": 1532562754, "creation_date": 1532562754, "answer_id": 51529190, "question_id": 51528625, "link": "https://stackoverflow.com/questions/51528625/pyspark-set-column-value-equal-to-another-dataframe-value-if-rows-match/51529190#51529190", "title": "PySpark Set Column value equal to another dataframe value if rows match", "body": "<p>You need a join to do this task:</p>\n\n<pre><code>## join both data on name\ndf3 = df2.join(df1, on='name',how='left')\n\n# change column sequence\ndf3 = df3.select('average','name')\n\n# order by name values\ndf3 = df3.orderBy('name', ascending=True)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3448, "user_id": 6237241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4310dc4cb526ad5ebdea99acfa742af2?s=128&d=identicon&r=PG&f=1", "display_name": "User12345", "link": "https://stackoverflow.com/users/6237241/user12345"}, "is_accepted": true, "score": 2, "last_activity_date": 1532563196, "creation_date": 1532563196, "answer_id": 51529233, "question_id": 51528625, "link": "https://stackoverflow.com/questions/51528625/pyspark-set-column-value-equal-to-another-dataframe-value-if-rows-match/51529233#51529233", "title": "PySpark Set Column value equal to another dataframe value if rows match", "body": "<p>All you needed to do was a <code>Join</code></p>\n\n<p>You can achieve the result like below.</p>\n\n<p>Join your data frame <code>df2</code> with <code>df1</code> on <code>name</code> and the select the order of columns you want </p>\n\n<pre><code>df3 = df2.join(df1, on = 'name').select('average', 'name')\n</code></pre>\n\n<p>The above code snippet should give you the desired result</p>\n"}], "owner": {"reputation": 111, "user_id": 9786460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31918f5114040d3a1fc08d6f2ff5a140?s=128&d=identicon&r=PG", "display_name": "Leokins", "link": "https://stackoverflow.com/users/9786460/leokins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1035, "favorite_count": 0, "accepted_answer_id": 51529233, "answer_count": 2, "score": 0, "last_activity_date": 1532563196, "creation_date": 1532558345, "question_id": 51528625, "link": "https://stackoverflow.com/questions/51528625/pyspark-set-column-value-equal-to-another-dataframe-value-if-rows-match", "title": "PySpark Set Column value equal to another dataframe value if rows match", "body": "<p>Hi I want to check a spark dataframe column value and set it based on checking if the row name matches with another dataframe row.</p>\n\n<p>Example:</p>\n\n<pre><code>df1:\naverage name\n3.5      n1\n1.2      n2\n4.2      n3\n\ndf2:\nname    \nn1     \nn1        \nn1    \nn2\nn3\nn1\nn2\nn3\nn3\n\ndf_i_want:\naverage name\n3.5      n1\n3.5      n1\n3.5      n1\n1.2      n2\n4.2      n3\n3.5      n1\n1.2      n2\n4.2      n3\n4.2      n3\n</code></pre>\n"}, {"tags": ["python", "algorithm", "stack", "intersection"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1532558331, "post_id": 51528617, "comment_id": 90025707, "body": "Welcome to SO. Please take the time to read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and the other links found on that page."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 1, "creation_date": 1532558681, "post_id": 51528617, "comment_id": 90025787, "body": "If a stack only offers push and pop operations, I don&#39;t understand what you mean by &quot;conduct a binary search&quot;.  How are you getting the items without popping?"}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1532558807, "post_id": 51528617, "comment_id": 90025824, "body": "It&#39;s great that you&#39;ve explained your thoughts for a possible solution. It would be even better if you added a small code attempt of that solution. Your question is probably attracting downvotes due to the lack of code &amp; because you ask for a coded solution."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1532558942, "post_id": 51528617, "comment_id": 90025859, "body": "I assume that you&#39;re allowed to destroy both stacks, but that you are only allowed to push, pop, or peek at the top item. You need to make that clear in your question."}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1532559383, "post_id": 51528617, "comment_id": 90025969, "body": "How exactly do you define the intersection of two stacks? If the intersection is &quot;the values that exist in both stacks&quot;, then you&#39;ll probably want to pop all the items from one of the stacks and place them in a dictionary. Then, for each item you pop off the other stack, if it exists in the dictionary, then it&#39;s an intersecting item."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1532559515, "post_id": 51528617, "comment_id": 90025994, "body": "Also, the interview question itself is a little vague. Do you just need to identify the items that are present in both stacks, or do you also need to consider the order of the items?"}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "reply_to_user": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1532559693, "post_id": 51528617, "comment_id": 90026030, "body": "@JimMischel I&#39;d use a set for that. But a dict would let you track the item positions as well, if that&#39;s required."}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "reply_to_user": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1532564136, "post_id": 51528617, "comment_id": 90026890, "body": "@PM2Ring Yes, a set would work, too, and would likely be more efficient. I don&#39;t see that there&#39;s a particular benefit to storing the position, unless &quot;intersect&quot; involves position. But then it would be more of a common subarray problem."}], "answers": [{"comments": [{"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 2, "creation_date": 1532564273, "post_id": 51528858, "comment_id": 90026924, "body": "&quot;Use multiple threads&quot; isn&#39;t particularly useful advice without a description of what you&#39;d use them for. Please explain your basic algorithm approach, and show how multiple threads would help improve the speed."}], "tags": [], "owner": {"reputation": 241, "user_id": 10102370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a59161662d91d0eae038bbe76aa7249?s=128&d=identicon&r=PG&f=1", "display_name": "Arnav", "link": "https://stackoverflow.com/users/10102370/arnav"}, "is_accepted": false, "score": 0, "last_activity_date": 1532560501, "last_edit_date": 1532560501, "creation_date": 1532560074, "answer_id": 51528858, "question_id": 51528617, "link": "https://stackoverflow.com/questions/51528617/fastest-and-most-efficient-way-to-find-the-intersection-of-2-stacks/51528858#51528858", "title": "Fastest and most efficient way to find the intersection of 2 stacks", "body": "<p>In your case, I don't quite understand how you could use binary search. </p>\n\n<p>One possible way is to split list A and list B into two halves, so that you have 4 lists instead. Since there are no race conditions, you could just use multithreading to run the linear comparisons faster.</p>\n\n<p>Here's a tutorial on <a href=\"https://www.geeksforgeeks.org/multithreading-python-set-1/\" rel=\"nofollow noreferrer\"> how to use multithreading: </a></p>\n"}, {"comments": [{"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 2, "creation_date": 1532562968, "post_id": 51529154, "comment_id": 90026676, "body": "If you do it this way why do you need two sets? Why not put stack1 in a set and instead of adding stack2 to a new set just the lookup in step two and skip step 3?"}, {"owner": {"reputation": 1551, "user_id": 806802, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5kFde.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/806802/srini"}, "reply_to_user": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 0, "creation_date": 1532563050, "post_id": 51529154, "comment_id": 90026696, "body": "you are absolutely right,  as I was writing the answer I thought of that too, but since it wouldn&#39;t affect the complexity I let it be, I will edit it in as an optiization"}], "tags": [], "owner": {"reputation": 1551, "user_id": 806802, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5kFde.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/806802/srini"}, "is_accepted": false, "score": 0, "last_activity_date": 1532563127, "last_edit_date": 1532563127, "creation_date": 1532562426, "answer_id": 51529154, "question_id": 51528617, "link": "https://stackoverflow.com/questions/51528617/fastest-and-most-efficient-way-to-find-the-intersection-of-2-stacks/51529154#51529154", "title": "Fastest and most efficient way to find the intersection of 2 stacks", "body": "<p>Sets are pretty fast, you could just use a set</p>\n\n<p>Consider this</p>\n\n<pre><code>In [51]: class Stack(list):\n    ...:     def push(self, x):\n    ...:         self.insert(0,x)\n    ...:     def pop(self):      \n    ...:         return list.pop(self, 0)\n    ...:\n    ...:\n\nIn [52]: a = Stack()\n\nIn [53]: a.push(5)\n\nIn [54]: a\nOut[54]: [5]\n\nIn [55]: a.pop()\nOut[55]: 5\n\nIn [56]: a\nOut[56]: []\n\nIn [57]: b = Stack()\n\nIn [58]: a.push(1)\n\nIn [59]: a.push(2)\n\nIn [60]: a.push(3)\n\nIn [61]: a.push(4)\n\nIn [62]: b.push(2)\n\nIn [63]: b.push(3)\n\nIn [64]: b.push(4)\n\nIn [65]: b.push(5)\n\nIn [66]: a_s = set()\n\nIn [67]: b_s =set()\n\nIn [68]: while a != []:\n    ...:     a_s.add(a.pop())\n    ...:\n\nIn [69]: while b != []:\n    ...:     b_s.add(b.pop())\n    ...:\n\nIn [70]: answer = set.intersection(a_s, b_s)\n\nIn [71]: answer\nOut[71]: {2, 3, 4}\n</code></pre>\n\n<p>Time Complexity</p>\n\n<ol>\n<li>Iterate over stack 1 and add to set: <code>O(n)</code></li>\n<li>Iterate over stack 2 and add to set: <code>O(n)</code>. <strong>OR just compute intersection here on the fly by querying the set you made above and adding to the answer set, will save you some time</strong></li>\n<li>For each item in set1 perform a constant time lookup in set 2. : <code>O(n)</code></li>\n<li>Potentially print answer: <code>O(n)</code></li>\n<li>Overall: <code>O(n) * 3(or 4) ~= O(n)</code></li>\n</ol>\n\n<p>My reasoning for why you can't go faster without multi threading. \nSorting is something you can do not have to look at element, but unless you can sort in true linear time it will take more time than <code>O(n)</code>. You have no way of computing an intersection without analysis each element of one stack in the context of the other stack. You can only optimize this contextual analysis from being an <code>O(n)</code> operation to being an <code>O(constant)</code> operation.</p>\n\n<p>Also since you said you were using stacks that are specialized lists I don't thinking peeking at elements you haven't popped is allowed</p>\n"}], "owner": {"reputation": 21, "user_id": 7221234, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-URCbUduFeYo/AAAAAAAAAAI/AAAAAAAAAbM/Kp0JFCkOAFI/photo.jpg?sz=128", "display_name": "Anshula Singh", "link": "https://stackoverflow.com/users/7221234/anshula-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 260, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1532563127, "creation_date": 1532558284, "last_edit_date": 1532559794, "question_id": 51528617, "link": "https://stackoverflow.com/questions/51528617/fastest-and-most-efficient-way-to-find-the-intersection-of-2-stacks", "title": "Fastest and most efficient way to find the intersection of 2 stacks", "body": "<p>Interview question: find the intersection of 2 stacks.\nIn python stacks are essentially just lists with pop and push function.\nAn intersection is the first item that is the same item within both stacks (and after all the following values are the same as well)</p>\n\n<p>Right now I was thinking that I would first determine if their lengths are the same, if not, chop off the first few elements of the longer stack. </p>\n\n<pre><code>def intersect(s1, s2):\n        diff = abs(len(s1) - len(s2))\n        if diff &gt; 0:\n            for i in range diff:\n                s1.pop()\n        else:  \n            while s1[0] != s2[0]:\n                first = s1.pop()\n                second = s2.pop()\n                if compare(first, second) == True #use a comparator func to see if they're equal\n                   return first\n</code></pre>\n\n<p>Otherwise I can't think of a better way than just popping the items in a linear order for both stacks at the same time and comparing the items. </p>\n\n<p>I'm looking for a coded solution with an explanation! Thank you </p>\n"}, {"tags": ["python", "python-3.x", "matrix"], "comments": [{"owner": {"reputation": 820, "user_id": 1237256, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d743934f5ccd696644b69495e942d860?s=128&d=identicon&r=PG", "display_name": "gout", "link": "https://stackoverflow.com/users/1237256/gout"}, "edited": false, "score": 0, "creation_date": 1532559359, "post_id": 51528587, "comment_id": 90025963, "body": "Try numpy, <a href=\"https://docs.scipy.org/doc/numpy-1.14.0/reference/generated/numpy.matrix.html\" rel=\"nofollow noreferrer\">docs.scipy.org/doc/numpy-1.14.0/reference/generated/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 10135856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288804a242315b7b30419cc3db23b89f?s=128&d=identicon&r=PG&f=1", "display_name": "noryx", "link": "https://stackoverflow.com/users/10135856/noryx"}, "edited": false, "score": 1, "creation_date": 1532560793, "post_id": 51528887, "comment_id": 90026245, "body": "Thank you so much! You&#39;re a lifesaver! Do you know of a way I could transform the list I had into the same style of dictionary? I&#39;m actually doing this on a huge dataset so I can&#39;t do it manually."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 61, "user_id": 10135856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288804a242315b7b30419cc3db23b89f?s=128&d=identicon&r=PG&f=1", "display_name": "noryx", "link": "https://stackoverflow.com/users/10135856/noryx"}, "edited": false, "score": 0, "creation_date": 1532567056, "post_id": 51528887, "comment_id": 90027386, "body": "@oryx Updated the answer."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 2, "last_activity_date": 1532567048, "last_edit_date": 1532567048, "creation_date": 1532560289, "answer_id": 51528887, "question_id": 51528587, "link": "https://stackoverflow.com/questions/51528587/transforming-a-list-of-lists-of-data-into-a-matrix-in-python-check-inside/51528887#51528887", "title": "transforming a list of lists of data into a matrix in python (check inside)", "body": "<p>Writing a manual loop to search through a list is overcomplicating things. Writing two loops to search through two lists of strings and trying to intermingle them while also looping over indexing something else\u2026 it's no wonder you confused yourself.</p>\n\n<p>Let's scrap that, and instead use some dictionaries:</p>\n\n<pre><code>columns = {'apple': 1, 'lemon': 2, 'pear': 3}\nrows = {'red': 1, 'yellow': 2, 'green': 3}\n</code></pre>\n\n<p>Now, if you want to know which matrix element to put something in, there's no loops, just two dict lookups:</p>\n\n<pre><code>&gt;&gt;&gt; (colname, rowname), value = [[\"apple\", \"red\"], \" 1 \"]\n&gt;&gt;&gt; columns[colname]\n1\n&gt;&gt;&gt; rows[rowname]\n1\n</code></pre>\n\n<p>So, now all we have to do is start with an empty matrix:</p>\n\n<pre><code>matrix = [\n    ['///', 'apple', 'lemon', 'pear'],\n    ['red', 0, 0, 0],\n    ['yellow', 0, 0, 0],\n    ['green', 0, 0, 0]]\n</code></pre>\n\n<p>\u2026 loop over the elements:</p>\n\n<pre><code>for (colname, rowname), value in list1:\n</code></pre>\n\n<p>\u2026 look up the column and row:</p>\n\n<pre><code>    col = columns[colname]\n    row = rows[rowname]\n</code></pre>\n\n<p>\u2026 and store the number:</p>\n\n<pre><code>    matrix[row][col] = value\n</code></pre>\n\n<p>That's all there is to it.</p>\n\n<p>Well, almost. You have a problem in your data, where one of the strings is <code>'pear '</code>, instead of <code>'pear</code>'. If that's a bug in the data, you can just fix that. If your code is supposed to handle that, you have to decide how to handle it. One obvious option is to just strip off any excess whitespace from the strings:</p>\n\n<pre><code>    col = columns[colname.strip()]\n    row = rows[rowname.strip()]\n</code></pre>\n\n<hr>\n\n<p>What if you don't know all the labels in advance, and need to find them programmatically?</p>\n\n<p>You could just an extra pass over the list before the main one, pulling out all of the unique row and column names. For example:</p>\n\n<pre><code>rows, columns = {}, {}\nfor (colname, rowname), value in list1:\n    if rowname not in rows:\n        next_unused_index = len(rows) + 1\n        rows[rowname] = next_unused_index\n    if colname not in columns:\n        next_unused_index = len(columns) + 1\n        columns[colname] = next_unused_index\n</code></pre>\n\n<p>Now, to build the matrix, you need to build it from those two dicts. If you're on Python 3.7, you can rely on the fact that the dicts are in the right order, but it's probably clearer to not depend on that. Let's just build an empty matrix first:</p>\n\n<pre><code>matrix = [[0 for _ in range(len(columns)+1)] \n          for _ in range(len(rows)+1)]\n</code></pre>\n\n<p>\u2026 then fill in the headers:</p>\n\n<pre><code>matrix[0][0] = '///'\nfor rowname, row in rows.items():\n    matrix[row][0] = rowname\nfor colname, column in columns.items():\n    matrix[0][column] = colname\n</code></pre>\n\n<p>\u2026 and then you can run the same code as before to fill in the values.</p>\n"}], "owner": {"reputation": 61, "user_id": 10135856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288804a242315b7b30419cc3db23b89f?s=128&d=identicon&r=PG&f=1", "display_name": "noryx", "link": "https://stackoverflow.com/users/10135856/noryx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 51528887, "answer_count": 1, "score": 2, "last_activity_date": 1532567048, "creation_date": 1532558079, "question_id": 51528587, "link": "https://stackoverflow.com/questions/51528587/transforming-a-list-of-lists-of-data-into-a-matrix-in-python-check-inside", "title": "transforming a list of lists of data into a matrix in python (check inside)", "body": "<p>I'm writing code that transforms a list of lists into a matrix. This function should be scalable to larger lists, the input i have is just to make the problem easier to tackle. I'm still a beginner so I need a little bit of help =)</p>\n\n<p>-input:\nIn the example input, list1 is a dataset of fruit and color pairs:</p>\n\n<pre><code>list1 = [[[\"apple\", \"red\"], \" 1 \"],[[\"apple\", \"yellow\"], \" 1 \"], [[\"apple\", \"green\"], \" 1 \"]]\nlist1 += [[[\"lemon\", \"red\"], \" 0 \"], [[\"lemon\", \"yellow\"], \" 1 \"], [[\"lemon\", \"green\"], \" 0 \"]]\nlist1 += [[[\"pear \", \"red\"], \" 0 \"], [[\"pear\", \"yellow\"], \" 0 \"], [[\"pear\", \"green\"], \" 1 \"]]\n</code></pre>\n\n<p>-Desired output: </p>\n\n<pre><code>['', 'apple', 'lemon', 'pear']\n['red', ' 1 ', 0, 0]\n['yellow', 0, ' 1 ', 0]\n['green', 1, 0, ' 1 ']\n</code></pre>\n\n<p>-My output </p>\n\n<pre><code>['///', 'apple', 'lemon', 'pear']\n['red', ' 1 ', 0, 0]\n['yellow', 0, ' 1 ', 0]\n['green', 0, 0, ' 0 ']\n</code></pre>\n\n<p>------My attempt:-----</p>\n\n<pre><code># create empty matrix\nmatrix=[]\nfor row in range(4):\n    new_row =[]\n    for col in  range(4):\n        new_row.append(0)   #if starting    all-0\n    matrix.append(new_row)\n\n    # add object names\n    names = [\"///\", \"apple\", \"lemon\", \"pear\"]\n    color = [\"///\", \"red\", \"yellow\", \"green\"]\n    color = color[::-1]\n    matrix[0] = names\n    for row in matrix:\n        row[0] = color.pop()\n\n    second_obj = 0\n    for row in range(4):\n        for col in range(4):\n            if list[row][0][0] == matrix[0][col]:\n                while list[row][0][1] != matrix[second_obj][0]:\n                    second_obj += 1\n                else:\n                    if matrix[row][row] != \"///\":\n                        matrix[row][row] = list[row][1] \n                    second_obj = 0\n</code></pre>\n"}, {"tags": ["python", "machine-learning", "scipy", "scikit-learn", "typeerror"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 3, "creation_date": 1532558039, "post_id": 51528579, "comment_id": 90025648, "body": "Change <code>my_classifier=ScrappyKNN</code> to <code>my_classifier=ScrappyKNN()</code>.  You are setting it equal to the class, while you want an instance of the class."}], "answers": [{"tags": [], "owner": {"reputation": 391, "user_id": 9831826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a4962a4153443ab25a5adaa8c8f8e3d?s=128&d=identicon&r=PG&f=1", "display_name": "Cassie", "link": "https://stackoverflow.com/users/9831826/cassie"}, "is_accepted": true, "score": 6, "last_activity_date": 1532567986, "creation_date": 1532567986, "answer_id": 51529682, "question_id": 51528579, "link": "https://stackoverflow.com/questions/51528579/python-missing-1-required-positional-argument/51529682#51529682", "title": "python missing 1 required positional argument", "body": "<p>As pointed out in the comments your mistake is in the line: </p>\n\n<pre><code>my_classifier = ScrappyKNN \n</code></pre>\n\n<p>Which you should change to </p>\n\n<pre><code>my_classifier = ScrappyKNN() \n</code></pre>\n\n<p>The reason you got the error you did is based on how input arguments work in python. Python uses <em>positional arguments</em>. That just means that unless you tell it otherwise, python just assumes inputs are in the same order as your function definition.</p>\n\n<p>In your code you define fit as a method in the ScrappyKNN class with 3 inputs. The definition of fit is: </p>\n\n<pre><code>fit(self,X_train,y_train)\n</code></pre>\n\n<p>You can see there are three inputs, in order: self, x_train and y_train. </p>\n\n<p>Normally this method would be called by an <em>object</em> of class ScrappyKNN. When you call a class method using an object (as in object.method()), the object is being used as the first input to the method. So in my_classifier.fit(X,y) behind the scenes what is happening is the method fit being called with inputs my_classifier, X,y. </p>\n\n<p>However, in your code you are calling fit without ever instantiating an object, but rather using a reference to the class ScrappyKNN. Because you haven't made an object, there is no \"self\" to use as an input, so the call to fit only sees 2 inputs. </p>\n\n<p>The error says </p>\n\n<blockquote>\n  <p>Blockquote\n  fit() missing 1 required positional argument: 'y_train'</p>\n</blockquote>\n\n<p>This is because fit has 3 required arguments, self, x_train and y_train. Python always assumes your first input is self, your second input is X_train, and your third input is y_train. Because you gave it two inputs, it uses your first input, your X_train variable, as self, and your second input, your y_train variable, as X_train. It then can't find a third argument, so it reports to you that it is missing y_train. In reality, the argument you are missing is self, but python has no way of knowing that. </p>\n\n<p>Changing your call from ScrappyKNN to ScrappyKNN() instantiates an object of class ScrappyKNN. Using that object to call a method in the ScrappyKNN class then passes self as the first argument to fit, giving it a total of 3 arguments and solving the error you are seeing. </p>\n"}], "owner": {"reputation": 81, "user_id": 8196351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3284b24ecda576a5cd501981c2d0f3?s=128&d=identicon&r=PG&f=1", "display_name": "Bishoy Youhanna", "link": "https://stackoverflow.com/users/8196351/bishoy-youhanna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24260, "favorite_count": 1, "accepted_answer_id": 51529682, "answer_count": 1, "score": 4, "last_activity_date": 1532567986, "creation_date": 1532557972, "last_edit_date": 1532558167, "question_id": 51528579, "link": "https://stackoverflow.com/questions/51528579/python-missing-1-required-positional-argument", "title": "python missing 1 required positional argument", "body": "<p>This is a simple ML program that creates a classifier. I created it by following the Google developers playlist on ML. When I run the program the error(TypeError: fit() missing 1 required positional argument: 'y_train') is outputted. I don't understand how this is possible.</p>\n\n<pre><code>from scipy.spatial import distance\ndef euc(a,b):\n    return distance.euclidean(a,b)\nclass ScrappyKNN():\n    def fit(self,X_train,y_train):\n        self.X_train=X_train\n        self.Y_train=y_train\n    def predict(self,X_test):\n        predictions=[]\n        for row in X_test:\n            label = self.closest(row)\n            predictions.append(label)\n        return predictions\n    def closest(self,row):\n        best_dist = euc(row,self.X_train[0])\n        best_index=0\n        for i in range(1,len(self.X_train)):\n            dist= euc(row,self.X_train[i])\n            if dist&gt;best_dist:\n                best_dist=dist\n                best_index=i\n        return self.Y_train[best_index]\nfrom sklearn import datasets\nfrom sklearn.cross_validation import train_test_split\nfrom sklearn.metrics import accuracy_score\niris = datasets.load_iris()\nX=iris.data\ny=iris.target\nX_train, X_test, y_train, y_test=train_test_split(X,y,test_size=0.5)\nmy_classifier=ScrappyKNN\nmy_classifier.fit(X_train, y_train)   \npredictions=my_classifier.predict(X_test)\nprint(accuracy_score(y_test,predictions))\n</code></pre>\n"}, {"tags": ["python", "user-interface", "tkinter", "discord"], "answers": [{"tags": [], "owner": {"reputation": 5878, "user_id": 8172933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c23be88780bfccade78eb5ffb64ba9?s=128&d=identicon&r=PG", "display_name": "figbeam", "link": "https://stackoverflow.com/users/8172933/figbeam"}, "is_accepted": false, "score": 1, "last_activity_date": 1532562593, "creation_date": 1532562593, "answer_id": 51529174, "question_id": 51528578, "link": "https://stackoverflow.com/questions/51528578/tkinter-grid-system-arranging-elements/51529174#51529174", "title": "Tkinter Grid System: Arranging Elements", "body": "<p>First you have to explain to the grid geometry manager that you want the canvas to span all three columns:</p>\n\n<pre><code>topCanvas.grid(row=0, column=1, columnspan=3)\n</code></pre>\n\n<p>Widgets do not automatically expand to fill the entire column (or row) if you don't specify it and it will center itself in a cell if you dont specify where you want it with <code>sticky</code>:</p>\n\n<pre><code>newProfileButton.grid(row=5, column=1, padx=(20, 5), sticky='w')\nsaveButton.grid(row=5, column=2, padx=(5, 5), sticky='w')\nloadButton.grid(row=5, column=3, padx=(5, 20), sticky='w')\n</code></pre>\n\n<p>This will hopefully give you something to play with although it's not a complete answer. </p>\n\n<p>Here is a good tutorial: <a href=\"https://python-forum.io/Thread-Tkinter-Getting-Tkinter-Grid-Sizing-Right-the-first-time?pid=3991\" rel=\"nofollow noreferrer\">Getting Tkinter Grid Sizing Right the first time</a></p>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 10135999, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SezfCtuP_Aw/AAAAAAAAAAI/AAAAAAAACRs/uPMvEpQirFA/photo.jpg?sz=128", "display_name": "techtoolbox", "link": "https://stackoverflow.com/users/10135999/techtoolbox"}, "edited": false, "score": 0, "creation_date": 1532760390, "post_id": 51530998, "comment_id": 90103754, "body": "Thank you very much for the help! I have finally finished coding the application, and I would just like to thank you for the code samples! It gave me a lot more insight into how to use tkinter, and I managed to finish up the application&#39;s GUI! Here&#39;s a semi-final screenshot of the app: <a href=\"https://raw.githubusercontent.com/nkomarn/SpigotImages/master/Capture.JPG\" rel=\"nofollow noreferrer\">raw.githubusercontent.com/nkomarn/SpigotImages/master/&hellip;</a>. I ended up changing the color scheme (and layout) quite a bit, but it worked out well in the end. Many thanks for all the help once again!"}], "tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": true, "score": 1, "last_activity_date": 1532579195, "creation_date": 1532579195, "answer_id": 51530998, "question_id": 51528578, "link": "https://stackoverflow.com/questions/51528578/tkinter-grid-system-arranging-elements/51530998#51530998", "title": "Tkinter Grid System: Arranging Elements", "body": "<p>Do not try to put everything into a single grid. Divide your UI up into sections, and then use the right tool for each section.</p>\n\n<h3>Start at the root window</h3>\n\n<p>I see two major sections to your UI: a top section in blue that has some information, and a bottom section with a black background that has some buttons. </p>\n\n<p>So, I would start by creating those two sections in the root window, and use <code>pack</code> to place one on top of the other:</p>\n\n<pre><code>topFrame = tk.Frame(root, background=\"#7289DA\")\nbottomFrame = tk.Frame(root, background=\"#2C2F33\")\n\ntopFrame.pack(side=\"top\", fill=\"both\", expand=True)\nbottomFrame.pack(side=\"bottom\", fill=\"both\", expand=True)\n</code></pre>\n\n<p>With that, you will now always have the root divided into two colored regions. The above code gives them an equal size. You may one to change the <code>expand</code> value to <code>False</code> for one or the other, depending on what you want to happen when the user resizes the window.</p>\n\n<p>Don't worry too much about the size, though. It will change once you start adding widgets to each section.</p>\n\n<p><a href=\"https://i.stack.imgur.com/laTHx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/laTHx.png\" alt=\"enter image description here\"></a></p>\n\n<h3>Next, do the bottom section</h3>\n\n<p>The bottom also appears to be in two sections: one for inputs and one for buttons. You could use a single grid layout for this whole section, but to illustrate the concept of dividing the UI into sections we'll split the bottom into two. Plus, because everything isn't neatly lined up into rows and columns, this will make things a bit easier.</p>\n\n<p>As I mentioned earlier, you may want to fiddle around with the <code>expand</code> option, depending on if you want these frames to resize equally or stay the same size when the user resizes the window.</p>\n\n<pre><code>inputFrame = tk.Frame(bottomFrame, background=\"#2C2F33\")\nbuttonFrame = tk.Frame(bottomFrame, background=\"#2C2F33\")\n\ninputFrame.pack(side=\"top\", fill=\"both\", expand=True)\nbuttonFrame.pack(side=\"top\", fill=\"both\", expand=True)\n</code></pre>\n\n<p>Note: if you stop right here and try to run your program, you might not see these frames. During development it sometimes helps to give them distinctive colors to help you visualize. Once you get everything working, you can adjust the colors to their final values. </p>\n\n<h3>Add the entry widgets</h3>\n\n<p>Now we can add the entry widgets to the top half of the bottom section. We can use <code>grid</code> here, since everything is lined up neatly. An important step is to give the rows an equal weight so that they grow and shrink together, though you can make it so that only one column resizes if you wish.</p>\n\n<p>I'll also point out that there's no need to use <code>StringVar</code> instance. You can, but it adds extra objects to keep track of, which in most cases is not necessary. </p>\n\n<pre><code>    label1 = tk.Label(inputFrame, text=\"APPLICATION ID\",\n                      foreground=\"lightgray\",\n                      background=\"#2C2F33\")\n    label2 = tk.Label(inputFrame, text=\"LARGE IMAGE HOVER\",\n                      foreground=\"lightgray\",\n                      background=\"#2C2F33\")\n    label3 = tk.Label(inputFrame, text=\"SMALL IMAGE HOVER\",\n                      foreground=\"lightgray\",\n                      background=\"#2C2F33\")\n\n    # columns should get extra space equally. Give any extra vertical space\n    # to an empty column below the entry widgets\n    inputFrame.grid_columnconfigure((0,1,2), weight=1)\n    inputFrame.grid_rowconfigure(2, weight=1)\n\n    appIdEntry = tk.Entry(inputFrame, borderwidth=0,\n                          highlightthickness=0,\n                          background=\"#23272A\", bd=0)\n    largeImageEntry = tk.Entry(inputFrame, \n                               highlightthickness=0,\n                               background=\"#23272A\", bd=0)\n    smallImageEntry = tk.Entry(inputFrame, borderwidth=0,\n                               highlightthickness=0,\n                               background=\"#23272A\", bd=0)\n\n    label1.grid(row=0, column=0, sticky=\"w\")\n    label2.grid(row=0, column=1, sticky=\"w\", padx=10)\n    label3.grid(row=0, column=2, sticky=\"w\")\n    appIdEntry.grid(row=1, column=0, sticky=\"ew\")\n    largeImageEntry.grid(row=1, column=1, sticky=\"ew\", padx=10)\n    smallImageEntry.grid(row=1, column=2, sticky=\"ew\")\n</code></pre>\n\n<p>This gives us the following:\n<a href=\"https://i.stack.imgur.com/uMN8p.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uMN8p.png\" alt=\"enter image description here\"></a></p>\n\n<p>Notice that the top appears to have shrunk. That's only because it's empty. Tkinter is really good about expanding and shrinking things to fit what's inside. Don't worry too much about it. You can tweak things once you get everything working.</p>\n\n<h2>And so on...</h2>\n\n<p>I don't want to rewrite your whole program in this answer. The point here is that you should break your UI up into logical chunks, and make each chunk a frame. You are then free to use whatever geometry manager makes the most sense within that frame. Sometimes <code>grid</code> is best, sometimes <code>pack</code>. In either case, it's much easier to manage a few high level frames than it is to try to cram dozens of widgets into a single grid, especially when there are no clear cut rows and/or columns. </p>\n\n<p>This solution also makes it pretty easy to create functions or classes for each section. For example, your main program might look like:</p>\n\n<pre><code>root = tkinter.Tk()\ntop = topSection(root)\nbottom = bottomSection(root)\n</code></pre>\n\n<p>By doing so, if you decide to completely redesign one section of the UI, you can do so without worrying that you'll mess up the layout in the other sections, since each frame is mostly independent of any other frame. </p>\n"}], "owner": {"reputation": 55, "user_id": 10135999, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SezfCtuP_Aw/AAAAAAAAAAI/AAAAAAAACRs/uPMvEpQirFA/photo.jpg?sz=128", "display_name": "techtoolbox", "link": "https://stackoverflow.com/users/10135999/techtoolbox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 51530998, "answer_count": 2, "score": 0, "last_activity_date": 1532579195, "creation_date": 1532557967, "last_edit_date": 1532558702, "question_id": 51528578, "link": "https://stackoverflow.com/questions/51528578/tkinter-grid-system-arranging-elements", "title": "Tkinter Grid System: Arranging Elements", "body": "<p>I am currently coding a program with will tie in with Discord's rich presence, and I am needing to create a GUI for it in Tkinter. The issue is, I cannot understand how to place elements correctly. It has been quite a pain. Here is what I am planning to have the app sort of look like: <a href=\"https://i.stack.imgur.com/K9Wox.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/K9Wox.jpg</a></p>\n\n<p>However, with my current code, this is how abismal the GUI looks... <a href=\"https://i.stack.imgur.com/wGA9A.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/wGA9A.jpg</a></p>\n\n<p>Here is my code: </p>\n\n<pre><code>root = tkinter.Tk()\nroot.title(\"Matter: A Discord Rich Presence Tool\")\nroot.config(bg='#2C2F33')\nroot.geometry(\"560x300\")\n#root.overrideredirect(1)\n\n# Load images \nloadProfileImage = tkinter.PhotoImage(file=\"resources/loadprofile.png\")\nsaveProfileImage = tkinter.PhotoImage(file=\"resources/saveprofile.png\")\nnewProfileImage = tkinter.PhotoImage(file=\"resources/newprofile.png\")\n\n\n# GUI Hell starts here\ntopCanvas = tkinter.Canvas(root, width=600, height=150)\ntopCanvas.config(bd=0, highlightthickness=0, relief='ridge', background=\"#7289DA\")\n\ntopTextFieldText = tkinter.StringVar(value='Sample top text')\ntopTextField = tkinter.Entry(root, textvariable=topTextFieldText)\ntopTextField.config(borderwidth=0, background=\"#7289DA\")\n\n\nbottomTextFieldText = tkinter.StringVar(value='Sample bottom text')\nbottomTextField = tkinter.Entry(root, textvariable=bottomTextFieldText)\nbottomTextField.config(borderwidth=0, background=\"#7289DA\")\n\n\nlargeIconName = tkinter.StringVar()\nlargeIconNameField = tkinter.Entry(root, textvariable=largeIconName)\n\nsmallIconName = tkinter.StringVar()\nsmallIconNameField = tkinter.Entry(root, textvariable=smallIconName)\n\n\napplicationIDFieldText = tkinter.StringVar()\napplicationIDField = tkinter.Entry(root, textvariable=applicationIDFieldText)\napplicationIDField.config(borderwidth=0, background=\"#23272A\")\n\nlargeIconHoverText = tkinter.StringVar()\nlargeIconHoverTextField = tkinter.Entry(root, textvariable=largeIconHoverText)\nlargeIconHoverTextField.config(borderwidth=0, background=\"#23272A\")\n\nsmallIconHoverText = tkinter.StringVar()\nsmallIconHoverTextField = tkinter.Entry(root, textvariable=smallIconHoverText)\nsmallIconHoverTextField.config(borderwidth=0, background=\"#23272A\")\n\n\n#greet_button = tkinter.Button(root, text=\"Run\", command=run)\n\nbuttonFrame = tkinter.Frame(height=2, bd=0, relief=tkinter.SUNKEN)\n\nnewProfileButton = tkinter.Button(root, text=\"Save to profile\", command=save)\nnewProfileButton.config(image=newProfileImage, borderwidth=0, background=\"#23272A\")\n\n\nsaveButton = tkinter.Button(root, text=\"Save to profile\", command=save)\nsaveButton.config(image=saveProfileImage, borderwidth=0, background=\"#23272A\")\n\n\nloadButton = tkinter.Button(root, command=load)\nloadButton.config(image=loadProfileImage, borderwidth=0, background=\"#23272A\")\n\n\n# Grid stuff\ntopCanvas.grid(row=0, column=1)\n\napplicationIDField.grid(row=3, column=1)\nlargeIconHoverTextField.grid(row=3, column=2)\nsmallIconHoverTextField.grid(row=3, column=3)\n\nnewProfileButton.grid(row=5, column=1, padx=(20, 5))\nsaveButton.grid(row=5, column=2, padx=(5, 5))\nloadButton.grid(row=5, column=3, padx=(5, 20))\n\nroot.mainloop()\n</code></pre>\n\n<p>Any guidance would be greatly appreciated since I cannot seem to be able to figure out how to use Tkinter's grid to make a layout similar to the images above.</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver", "xpath", "webdriver"], "comments": [{"owner": {"reputation": 938, "user_id": 758676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wjyRf.png?s=128&g=1", "display_name": "Gabrielius", "link": "https://stackoverflow.com/users/758676/gabrielius"}, "edited": false, "score": 1, "creation_date": 1532558093, "post_id": 51528556, "comment_id": 90025654, "body": "Try this: <i>//ul[@class=&quot;check-list&quot;]/li[2]/text()</i>"}, {"owner": {"reputation": 73, "user_id": 8491911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vidWB.jpg?s=128&g=1", "display_name": "piggy", "link": "https://stackoverflow.com/users/8491911/piggy"}, "reply_to_user": {"reputation": 938, "user_id": 758676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wjyRf.png?s=128&g=1", "display_name": "Gabrielius", "link": "https://stackoverflow.com/users/758676/gabrielius"}, "edited": false, "score": 0, "creation_date": 1532558710, "post_id": 51528556, "comment_id": 90025797, "body": "@Gabrielius Thanks for the tip.  So I have four of these <code>&lt;ul class=&quot;check-list ...</code> in the webpage.  How do I select the 3rd UL from these four UL:s? <a href=\"https://www.capterra.com/p/14890/Fastreact/\" rel=\"nofollow noreferrer\">capterra.com/p/14890/Fastreact</a>"}, {"owner": {"reputation": 23944, "user_id": 1305969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wlo8z.png?s=128&g=1", "display_name": "zx485", "link": "https://stackoverflow.com/users/1305969/zx485"}, "edited": false, "score": 0, "creation_date": 1532559233, "post_id": 51528556, "comment_id": 90025931, "body": "Try <code>&#47;&#47;ul[@class=&quot;check-list&quot;][3]&#47;li[2]&#47;text()</code>."}, {"owner": {"reputation": 938, "user_id": 758676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wjyRf.png?s=128&g=1", "display_name": "Gabrielius", "link": "https://stackoverflow.com/users/758676/gabrielius"}, "edited": false, "score": 1, "creation_date": 1532559255, "post_id": 51528556, "comment_id": 90025937, "body": "I thought you were trying to select third <b>li</b> element? Www.fastreact.co.uk? In either case you should use indexer <b>[3]</b> for <b>ul</b> like you did in the comment you posted. What was the problem you had with that?"}], "answers": [{"tags": [], "owner": {"reputation": 1633, "user_id": 8791722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98WuV.png?s=128&g=1", "display_name": "PixelEinstein", "link": "https://stackoverflow.com/users/8791722/pixeleinstein"}, "is_accepted": true, "score": 1, "last_activity_date": 1532560876, "creation_date": 1532560876, "answer_id": 51528962, "question_id": 51528556, "link": "https://stackoverflow.com/questions/51528556/how-to-construct-an-xpath-to-extract-the-url-www-fastreact-co-uk-from-the-parent/51528962#51528962", "title": "How to construct an XPath to extract the url www.fastreact.co.uk from the parent ul tag?", "body": "<p>Here is a working example of what you are wanting:</p>\n\n<blockquote>\n  <p>NOTE: This was tested using Chrome build 67 with chromedriver 2.40</p>\n</blockquote>\n\n<pre><code>driver.get('https://www.capterra.com/p/14890/Fastreact/')\n\n# this will go directly to the check-list item you are wanting\nvendor_details = driver.find_element_by_xpath('.//ul[@class=\"check-list\"][2]')\nprint(vendor_details.text)\n\n# this will go directly to the link you are wanting\nvendor_link= driver.find_element_by_xpath('.//ul[@class=\"check-list\"][2]/li[2]')\nprint(vendor_link.text)\n</code></pre>\n\n<p>The <strong><em>print</em></strong> statements will display the text values of the elements in your console.</p>\n"}, {"comments": [{"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1532602668, "post_id": 51536636, "comment_id": 90041835, "body": "Why do you want OP to make all those imports and implement ExplicitWait to extract <b>static</b> data?"}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1532602947, "post_id": 51536636, "comment_id": 90041998, "body": "@Andersson Good question, Long story cut short, it&#39;s nothing related to <b>static data</b> as such. It&#39;s all about <i>new page</i> where you are unsure when the <i>Web Client</i> achieves  <code>&#39;document.readyState&#39; equal to &quot;complete&quot;</code>. Hence you must always induce a <i>waiter</i>. Let me know if you have further queries."}, {"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1532603589, "post_id": 51536636, "comment_id": 90042388, "body": "To get required data you don&#39;t even need to wait for <code>readyState == &quot;complete&quot;</code>. State <code>&quot;interactive&quot;</code> is more then enough, so I&#39;m not sure about that <i>&quot;...must always induce a waiter...&quot;</i>"}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1532603995, "post_id": 51536636, "comment_id": 90042648, "body": "@Andersson Yeap, perhaps you are correct on this individual instance/question. But my answer is pretty generic following the <i>best practices</i>. Of-coarse all the browsers doesn&#39;t wait for <code>readyState == &quot;complete&quot;</code> barring a few. After all, even achieving <code>readyState == &quot;complete&quot;</code> (let&#39;s keep off <code>&quot;interactive&quot;</code>) may not suffice enough for a user to interact with the prevailing <i>DOM Tree</i>. hence we need the <i>waiter</i>."}], "tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": false, "score": 1, "last_activity_date": 1532600793, "creation_date": 1532600793, "answer_id": 51536636, "question_id": 51528556, "link": "https://stackoverflow.com/questions/51528556/how-to-construct-an-xpath-to-extract-the-url-www-fastreact-co-uk-from-the-parent/51536636#51536636", "title": "How to construct an XPath to extract the url www.fastreact.co.uk from the parent ul tag?", "body": "<p>As per your question to extract the <em>Vendor URL</em> you need to induce <em>WebDriverWait</em> for the desired <em>element to be visible</em> and you can use the following solution:</p>\n\n<ul>\n<li><p>Code Block:</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions\n\noptions = webdriver.ChromeOptions() \noptions.add_argument(\"start-maximized\")\noptions.add_argument('disable-infobars')\ndriver=webdriver.Chrome(chrome_options=options, executable_path=r'C:\\Utility\\BrowserDrivers\\chromedriver.exe')\ndriver.get(\"https://www.capterra.com/p/14890/Fastreact/\")\nprint(WebDriverWait(driver, 20).until(expected_conditions.visibility_of_element_located((By.XPATH, \"//h2[@class='epsilon' and contains(.,'Vendor Details')]//following::ul[1]//following-sibling::li[2]\"))).get_attribute(\"innerHTML\"))\n</code></pre></li>\n<li><p>Console Output:</p>\n\n<pre><code>www.fastreact.co.uk\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 73, "user_id": 8491911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vidWB.jpg?s=128&g=1", "display_name": "piggy", "link": "https://stackoverflow.com/users/8491911/piggy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 1, "accepted_answer_id": 51528962, "answer_count": 2, "score": 0, "last_activity_date": 1532600793, "creation_date": 1532557800, "last_edit_date": 1532600775, "question_id": 51528556, "link": "https://stackoverflow.com/questions/51528556/how-to-construct-an-xpath-to-extract-the-url-www-fastreact-co-uk-from-the-parent", "title": "How to construct an XPath to extract the url www.fastreact.co.uk from the parent ul tag?", "body": "<p>Hi I want to navigate to this exact vendor url using selenium <code>&lt;li&gt;www.fastreact.co.uk&lt;/li&gt;</code>.  But I'm stuck at this part.</p>\n\n<pre><code>vendor_url = browser.find_element_by_xpath('//ul[@class=\"check-list\"]')\n#vendor_url = browser.find_element_by_xpath('//ul[@class=\"check-list\"][3]')\n</code></pre>\n\n<p><strong>How do I navigate to that exact UL?</strong>  From what I can see in the source code there are four occurrences where a UL contains the <code>class=\"check-list ... \"</code>.<br>\nAlso once I manage to navigate to that node <strong>how do I output that selenium web element into human text?</strong></p>\n\n<p><a href=\"https://www.capterra.com/p/14890/Fastreact/\" rel=\"nofollow noreferrer\">https://www.capterra.com/p/14890/Fastreact/</a></p>\n\n<pre><code>&lt;h2 class=\"epsilon\"&gt;&lt;i class=\"ss-buildings  icon-lead  zeta\"&gt;&lt;/i&gt;VendorDetails&lt;/h2&gt;\n&lt;ul class=\"check-list\" &gt;\n    &lt;li&gt;Fast React Systems&lt;/li&gt;\n    &lt;li&gt;www.fastreact.co.uk&lt;/li&gt;\n    &lt;li&gt;Founded 1999&lt;/li&gt;\n    &lt;li&gt;United Kingdom&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n"}, {"tags": ["python", "apache-spark", "amazon-s3", "pyspark"], "comments": [{"owner": {"reputation": 29493, "user_id": 3269809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRvqq.jpg?s=128&g=1", "display_name": "Alper t. Turker", "link": "https://stackoverflow.com/users/3269809/alper-t-turker"}, "edited": false, "score": 0, "creation_date": 1532558587, "post_id": 51528485, "comment_id": 90025761, "body": "Please <a href=\"https://stackoverflow.com/posts/51528485/edit\">edit</a> your question and include full traceback (including Java stactk trace). As for now there is just not enough information here."}, {"owner": {"reputation": 375, "user_id": 4974017, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/51d885565f2b01b0d49f5666c526d340?s=128&d=identicon&r=PG", "display_name": "Tim", "link": "https://stackoverflow.com/users/4974017/tim"}, "edited": false, "score": 0, "creation_date": 1539712484, "post_id": 51528485, "comment_id": 92598554, "body": "Where is the code that generated this traceback? You need to read the guidelines for posting."}], "owner": {"reputation": 11, "user_id": 10135908, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BFuKe90Eh8Q/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oCWWcSXQ7vmDmFcWE0M4voD9tzzA/mo/photo.jpg?sz=128", "display_name": "Yuri", "link": "https://stackoverflow.com/users/10135908/yuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 318, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1543581053, "creation_date": 1532557389, "last_edit_date": 1532560133, "question_id": 51528485, "link": "https://stackoverflow.com/questions/51528485/could-not-write-dataframe-to-s3-in-pyspark", "title": "Could not write dataframe to S3 in pyspark", "body": "<p>I am trying to run spark locally to upload csv/parquet files to S3. Able to read data from S3 with the PySpark </p>\n\n<p>but could not write the file to S3. </p>\n\n<pre>\n\n    Traceback (most recent call last):\n\n      File \"\", line 1, in \n        runfile('C:/Users/work/dataload/sample_write.py', wdir='C:/Users/work/dataload')\n\n      File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 705, in runfile\n        execfile(filename, namespace)\n\n      File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 102, in execfile\n        exec(compile(f.read(), filename, 'exec'), namespace)\n\n      File \"C:/Users/work/dataload/sample_write.py\", line 47, in \n        df2.coalesce(1).write.option(\"header\", \"true\").csv(\"s3n://bucket-name/filename.csv\", mode=\"append\")\n\n      File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\pyspark\\sql\\readwriter.py\", line 885, in csv\n        self._jwrite.csv(path)\n\n      File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\py4j\\java_gateway.py\", line 1257, in __call__\n        answer, self.gateway_client, self.target_id, self.name)\n\n      File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\pyspark\\sql\\utils.py\", line 63, in deco\n        return f(*a, **kw)\n\n      File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\py4j\\protocol.py\", line 328, in get_return_value\n        format(target_id, \".\", name), value)\n\n    Py4JJavaError: An error occurred while calling o59.csv.\n    : org.apache.spark.SparkException: Job aborted.\n        at org.apache.spark.sql.execution.datasources.FileFormatWriter$.write(FileFormatWriter.scala:224)\n        at org.apache.spark.sql.execution.datasources.InsertIntoHadoopFsRelationCommand.run(InsertIntoHadoopFsRelationCommand.scala:154)\n        at org.apache.spark.sql.execution.command.DataWritingCommandExec.sideEffectResult$lzycompute(commands.scala:104)\n        at org.apache.spark.sql.execution.command.DataWritingCommandExec.sideEffectResult(commands.scala:102)\n        at org.apache.spark.sql.execution.command.DataWritingCommandExec.doExecute(commands.scala:122)\n        at org.apache.spark.sql.execution.SparkPlan$$anonfun$execute$1.apply(SparkPlan.scala:131)\n        at org.apache.spark.sql.execution.SparkPlan$$anonfun$execute$1.apply(SparkPlan.scala:127)\n        at org.apache.spark.sql.execution.SparkPlan$$anonfun$executeQuery$1.apply(SparkPlan.scala:155)\n        at org.apache.spark.rdd.RDDOperationScope$.withScope(RDDOperationScope.scala:151)\n        at org.apache.spark.sql.execution.SparkPlan.executeQuery(SparkPlan.scala:152)\n        at org.apache.spark.sql.execution.SparkPlan.execute(SparkPlan.scala:127)\n        at org.apache.spark.sql.execution.QueryExecution.toRdd$lzycompute(QueryExecution.scala:80)\n        at org.apache.spark.sql.execution.QueryExecution.toRdd(QueryExecution.scala:80)\n        at org.apache.spark.sql.DataFrameWriter$$anonfun$runCommand$1.apply(DataFrameWriter.scala:654)\n        at org.apache.spark.sql.DataFrameWriter$$anonfun$runCommand$1.apply(DataFrameWriter.scala:654)\n        at org.apache.spark.sql.execution.SQLExecution$.withNewExecutionId(SQLExecution.scala:77)\n        at org.apache.spark.sql.DataFrameWriter.runCommand(DataFrameWriter.scala:654)\n        at org.apache.spark.sql.DataFrameWriter.saveToV1Source(DataFrameWriter.scala:273)\n        at org.apache.spark.sql.DataFrameWriter.save(DataFrameWriter.scala:267)\n        at org.apache.spark.sql.DataFrameWriter.save(DataFrameWriter.scala:225)\n        at org.apache.spark.sql.DataFrameWriter.csv(DataFrameWriter.scala:642)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.lang.reflect.Method.invoke(Unknown Source)\n        at py4j.reflection.MethodInvoker.invoke(MethodInvoker.java:244)\n        at py4j.reflection.ReflectionEngine.invoke(ReflectionEngine.java:357)\n        at py4j.Gateway.invoke(Gateway.java:282)\n        at py4j.commands.AbstractCommand.invokeMethod(AbstractCommand.java:132)\n        at py4j.commands.CallCommand.execute(CallCommand.java:79)\n        at py4j.GatewayConnection.run(GatewayConnection.java:238)\n        at java.lang.Thread.run(Unknown Source)\n    Caused by: org.apache.spark.SparkException: Job aborted due to stage failure: Task 0 in stage 2.0 failed 1 times, most recent failure: Lost task 0.0 in stage 2.0 (TID 2, localhost, executor driver): org.apache.spark.SparkException: Task failed while writing rows.\n        at org.apache.spark.sql.execution.datasources.FileFormatWriter$.org$apache$spark$sql$execution$datasources$FileFormatWriter$$executeTask(FileFormatWriter.scala:285)\n        at org.apache.spark.sql.execution.datasources.FileFormatWriter$$anonfun$write$1.apply(FileFormatWriter.scala:197)\n        at org.apache.spark.sql.execution.datasources.FileFormatWriter$$anonfun$write$1.apply(FileFormatWriter.scala:196)\n        at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:87)\n        at org.apache.spark.scheduler.Task.run(Task.scala:109)\n        at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:345)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n        at java.lang.Thread.run(Unknown Source)\n    Caused by: java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z\n        at org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Native Method)\n        at org.apache.hadoop.io.nativeio.NativeIO$Windows.access(NativeIO.java:609)\n        at org.apache.hadoop.fs.FileUtil.canRead(FileUtil.java:977)\n        at org.apache.hadoop.util.DiskChecker.checkAccessByFileMethods(DiskChecker.java:187)\n        at org.apache.hadoop.util.DiskChecker.checkDirAccess(DiskChecker.java:174)\n        at org.apache.hadoop.util.DiskChecker.checkDir(DiskChecker.java:108)\n        at org.apache.hadoop.fs.LocalDirAllocator$AllocatorPerContext.confChanged(LocalDirAllocator.java:285)\n        at org.apache.hadoop.fs.LocalDirAllocator$AllocatorPerContext.getLocalPathForWrite(LocalDirAllocator.java:344)\n        at org.apache.hadoop.fs.LocalDirAllocator$AllocatorPerContext.createTmpFileForWrite(LocalDirAllocator.java:416)\n        at org.apache.hadoop.fs.LocalDirAllocator.createTmpFileForWrite(LocalDirAllocator.java:198)\n        at org.apache.hadoop.fs.s3native.NativeS3FileSystem$NativeS3FsOutputStream.newBackupFile(NativeS3FileSystem.java:263)\n        at org.apache.hadoop.fs.s3native.NativeS3FileSystem$NativeS3FsOutputStream.(NativeS3FileSystem.java:245)\n        at org.apache.hadoop.fs.s3native.NativeS3FileSystem.create(NativeS3FileSystem.java:412)\n        at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:911)\n        at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:892)\n        at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:789)\n        at org.apache.spark.sql.execution.datasources.CodecStreams$.createOutputStream(CodecStreams.scala:81)\n        at org.apache.spark.sql.execution.datasources.CodecStreams$.createOutputStreamWriter(CodecStreams.scala:92)\n        at org.apache.spark.sql.execution.datasources.csv.CsvOutputWriter.(CSVFileFormat.scala:149)\n        at org.apache.spark.sql.execution.datasources.csv.CSVFileFormat$$anon$1.newInstance(CSVFileFormat.scala:77)\n        at org.apache.spark.sql.execution.datasources.FileFormatWriter$SingleDirectoryWriteTask.newOutputWriter(FileFormatWriter.scala:367)\n        at org.apache.spark.sql.execution.datasources.FileFormatWriter$SingleDirectoryWriteTask.execute(FileFormatWriter.scala:378)\n        at org.apache.spark.sql.execution.datasources.FileFormatWriter$$anonfun$org$apache$spark$sql$execution$datasources$FileFormatWriter$$executeTask$3.apply(FileFormatWriter.scala:269)\n        at org.apache.spark.sql.execution.datasources.FileFormatWriter$$anonfun$org$apache$spark$sql$execution$datasources$FileFormatWriter$$executeTask$3.apply(FileFormatWriter.scala:267)\n        at org.apache.spark.util.Utils$.tryWithSafeFinallyAndFailureCallbacks(Utils.scala:1414)\n        at org.apache.spark.sql.execution.datasources.FileFormatWriter$.org$apache$spark$sql$execution$datasources$FileFormatWriter$$executeTask(FileFormatWriter.scala:272)\n    8 more\n\n    Driver stacktrace:\n        at org.apache.spark.scheduler.DAGScheduler.org$apache$spark$scheduler$DAGScheduler$$failJobAndIndependentStages(DAGScheduler.scala:1602)\n        at org.apache.spark.scheduler.DAGScheduler$$anonfun$abortStage$1.apply(DAGScheduler.scala:1590)\n        at org.apache.spark.scheduler.DAGScheduler$$anonfun$abortStage$1.apply(DAGScheduler.scala:1589)\n        at scala.collection.mutable.ResizableArray$class.foreach(ResizableArray.scala:59)\n        at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:48)\n        at org.apache.spark.scheduler.DAGScheduler.abortStage(DAGScheduler.scala:1589)\n        at org.apache.spark.scheduler.DAGScheduler$$anonfun$handleTaskSetFailed$1.apply(DAGScheduler.scala:831)\n        at org.apache.spark.scheduler.DAGScheduler$$anonfun$handleTaskSetFailed$1.apply(DAGScheduler.scala:831)\n        at scala.Option.foreach(Option.scala:257)\n        at org.apache.spark.scheduler.DAGScheduler.handleTaskSetFailed(DAGScheduler.scala:831)\n        at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.doOnReceive(DAGScheduler.scala:1823)\n        at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:1772)\n        at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:1761)\n        at org.apache.spark.util.EventLoop$$anon$1.run(EventLoop.scala:48)\n        at org.apache.spark.scheduler.DAGScheduler.runJob(DAGScheduler.scala:642)\n        at org.apache.spark.SparkContext.runJob(SparkContext.scala:2034)\n        at org.apache.spark.sql.execution.datasources.FileFormatWriter$.write(FileFormatWriter.scala:194)\n    31 more\n    Caused by: org.apache.spark.SparkException: Task failed while writing rows.\n        at org.apache.spark.sql.execution.datasources.FileFormatWriter$.org$apache$spark$sql$execution$datasources$FileFormatWriter$$executeTask(FileFormatWriter.scala:285)\n        at org.apache.spark.sql.execution.datasources.FileFormatWriter$$anonfun$write$1.apply(FileFormatWriter.scala:197)\n        at org.apache.spark.sql.execution.datasources.FileFormatWriter$$anonfun$write$1.apply(FileFormatWriter.scala:196)\n        at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:87)\n        at org.apache.spark.scheduler.Task.run(Task.scala:109)\n        at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:345)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    1 more\n    Caused by: java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z\n        at org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Native Method)\n        at org.apache.hadoop.io.nativeio.NativeIO$Windows.access(NativeIO.java:609)\n        at org.apache.hadoop.fs.FileUtil.canRead(FileUtil.java:977)\n        at org.apache.hadoop.util.DiskChecker.checkAccessByFileMethods(DiskChecker.java:187)\n        at org.apache.hadoop.util.DiskChecker.checkDirAccess(DiskChecker.java:174)\n        at org.apache.hadoop.util.DiskChecker.checkDir(DiskChecker.java:108)\n        at org.apache.hadoop.fs.LocalDirAllocator$AllocatorPerContext.confChanged(LocalDirAllocator.java:285)\n        at org.apache.hadoop.fs.LocalDirAllocator$AllocatorPerContext.getLocalPathForWrite(LocalDirAllocator.java:344)\n        at org.apache.hadoop.fs.LocalDirAllocator$AllocatorPerContext.createTmpFileForWrite(LocalDirAllocator.java:416)\n        at org.apache.hadoop.fs.LocalDirAllocator.createTmpFileForWrite(LocalDirAllocator.java:198)\n        at org.apache.hadoop.fs.s3native.NativeS3FileSystem$NativeS3FsOutputStream.newBackupFile(NativeS3FileSystem.java:263)\n        at org.apache.hadoop.fs.s3native.NativeS3FileSystem$NativeS3FsOutputStream.(NativeS3FileSystem.java:245)\n        at org.apache.hadoop.fs.s3native.NativeS3FileSystem.create(NativeS3FileSystem.java:412)\n        at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:911)\n        at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:892)\n        at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:789)\n        at org.apache.spark.sql.execution.datasources.CodecStreams$.createOutputStream(CodecStreams.scala:81)\n        at org.apache.spark.sql.execution.datasources.CodecStreams$.createOutputStreamWriter(CodecStreams.scala:92)\n        at org.apache.spark.sql.execution.datasources.csv.CsvOutputWriter.(CSVFileFormat.scala:149)\n        at org.apache.spark.sql.execution.datasources.csv.CSVFileFormat$$anon$1.newInstance(CSVFileFormat.scala:77)\n        at org.apache.spark.sql.execution.datasources.FileFormatWriter$SingleDirectoryWriteTask.newOutputWriter(FileFormatWriter.scala:367)\n        at org.apache.spark.sql.execution.datasources.FileFormatWriter$SingleDirectoryWriteTask.execute(FileFormatWriter.scala:378)\n        at org.apache.spark.sql.execution.datasources.FileFormatWriter$$anonfun$org$apache$spark$sql$execution$datasources$FileFormatWriter$$executeTask$3.apply(FileFormatWriter.scala:269)\n        at org.apache.spark.sql.execution.datasources.FileFormatWriter$$anonfun$org$apache$spark$sql$execution$datasources$FileFormatWriter$$executeTask$3.apply(FileFormatWriter.scala:267)\n        at org.apache.spark.util.Utils$.tryWithSafeFinallyAndFailureCallbacks(Utils.scala:1414)\n        at org.apache.spark.sql.execution.datasources.FileFormatWriter$.org$apache$spark$sql$execution$datasources$FileFormatWriter$$executeTask(FileFormatWriter.scala:272)\n    8 more\n\n</pre>\n\n<p>Any inputs on what might be the issue? </p>\n"}, {"tags": ["python", "powershell"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1532558262, "post_id": 51528461, "comment_id": 90025692, "body": "Welcome to SO. Please take the time to read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and the other links found on that page."}, {"owner": {"reputation": 356, "user_id": 4911426, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1087083604639482/picture?type=large", "display_name": "Shahboz", "link": "https://stackoverflow.com/users/4911426/shahboz"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1532558814, "post_id": 51528461, "comment_id": 90025830, "body": "Thanks for welcoming and will do! @wwii"}], "answers": [{"tags": [], "owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "is_accepted": false, "score": 0, "last_activity_date": 1532557969, "last_edit_date": 1532557969, "creation_date": 1532557648, "answer_id": 51528530, "question_id": 51528461, "link": "https://stackoverflow.com/questions/51528461/foreach-loop-in-python-to-extract-value-from-array-in-json-response/51528530#51528530", "title": "Foreach loop in Python to extract value from array in json response", "body": "<p>Should work in Python 2 or 3, I think:</p>\n\n<pre><code>#!/usr/bin/env python\n\nimport sys\nimport json\n\nres = \"\"\nfor line in sys.stdin:\n  res += line.rstrip()\n\nres_obj = json.loads(res)\n\nnodes = [ 'abc1.prod.local:80', 'jkl1.prod.local:80' ]\n\ninvalid_nodes = []\n\nfor node in nodes:\n  try:\n    found = False\n    test_node_objs = res_obj['properties']['basic']['nodes_table']\n    for test_node_obj in test_node_objs:\n      test_node = test_node_obj['node']\n      if node == test_node:\n        found = True\n        break\n    if found:\n      sys.stdout.write(\"%s exists in the pool and active\\n\" % (node))\n    else:\n      sys.stdout.write(\"%s is either not active or the name mismatches\\n\" % (node))\n      invalid_nodes.append(node)\n  except KeyError as ke:\n    sys.stderr.write(\"malformed response? check input...\\n\")\n    pass\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre><code>$ ./parse_response.py &lt; response.json\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4085, "user_id": 9057497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6I5A1.png?s=128&g=1", "display_name": "madjaoue", "link": "https://stackoverflow.com/users/9057497/madjaoue"}, "is_accepted": false, "score": 0, "last_activity_date": 1532559760, "last_edit_date": 1532559760, "creation_date": 1532558099, "answer_id": 51528591, "question_id": 51528461, "link": "https://stackoverflow.com/questions/51528461/foreach-loop-in-python-to-extract-value-from-array-in-json-response/51528591#51528591", "title": "Foreach loop in Python to extract value from array in json response", "body": "<p>Here's an implementation:</p>\n\n<pre><code>jsonObj = json.loads(jsonSrc)\n\nexpectedNodes = {\"abc1.prod.local:80\", \"jkl1.prod.local:80\"} \n\nfor node in expectedNodes:\n    node_table = jsonObj['properties']['basic']['nodes_table']\n\n    node_match = list(filter(lambda t_node: node == t_node['node'], node_table))\n    is_node_matches_and_active = len(node_match) &gt; 0 and node_match[0]['state'] == \"active\"\n    if is_node_matches_and_active:\n        print('node {} exists and is active'.format(node))\n    else:\n        print('node {} not found or not active'.format(node))\n</code></pre>\n\n<p>Output : </p>\n\n<pre><code>node jkl1.prod.local:80 exists and is active\nnode abc1.prod.local:80 exists and is active\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "is_accepted": true, "score": 0, "last_activity_date": 1532559166, "creation_date": 1532559166, "answer_id": 51528739, "question_id": 51528461, "link": "https://stackoverflow.com/questions/51528461/foreach-loop-in-python-to-extract-value-from-array-in-json-response/51528739#51528739", "title": "Foreach loop in Python to extract value from array in json response", "body": "<p>First, filter all active nodes, then compare with node list:</p>\n\n<pre><code>data = json.loads(text)\nactive_nodes = {\n    n['node']\n    for n in data['properties']['basic']['nodes_table']\n    if n['state'] == 'active'\n}\n\nnodes = {\"abc1.prod.local:80\", \"jkl1.prod.local:80\"}\nfor node in nodes:\n    if node in active_nodes:\n        print('{} exists in the pool and active'.format(node))\n    else:\n        print('{} is either not active or the name mismatches'.format(node))\n\ninvalid_nodes = nodes - active_nodes\n</code></pre>\n"}], "owner": {"reputation": 356, "user_id": 4911426, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1087083604639482/picture?type=large", "display_name": "Shahboz", "link": "https://stackoverflow.com/users/4911426/shahboz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 51528739, "answer_count": 3, "score": -2, "last_activity_date": 1532559760, "creation_date": 1532557153, "question_id": 51528461, "link": "https://stackoverflow.com/questions/51528461/foreach-loop-in-python-to-extract-value-from-array-in-json-response", "title": "Foreach loop in Python to extract value from array in json response", "body": "<p>I've got this json response:</p>\n\n<pre><code>{\n    \"properties\": {\n        \"basic\": {\n            \"bandwidth_class\": \"\",\n            \"failure_pool\": \"\",\n            \"max_connection_attempts\": 0,\n            \"max_idle_connections_pernode\": 50,\n            \"max_timed_out_connection_attempts\": 2,\n            \"monitors\": [\n                \"Simple HTTP\"\n            ],\n            \"node_close_with_rst\": false,\n            \"node_connection_attempts\": 3,\n            \"node_delete_behavior\": \"immediate\",\n            \"node_drain_to_delete_timeout\": 0,\n            \"nodes_table\": [\n                {\n                    \"node\": \"abc1.prod.local:80\",\n                    \"priority\": 1,\n                    \"state\": \"active\",\n                    \"weight\": 1\n                },\n                {\n                    \"node\": \"def1.prod.local:80\",\n                    \"priority\": 1,\n                    \"state\": \"disabled\",\n                    \"weight\": 1\n                },\n                {\n                    \"node\": \"ghi1.prod.local:80\",\n                    \"priority\": 1,\n                    \"state\": \"disabled\",\n                    \"weight\": 1\n                },\n                {\n                    \"node\": \"jkl1.prod.local:80\",\n                    \"priority\": 1,\n                    \"state\": \"active\",\n                    \"weight\": 1\n                }\n            ],\n            \"note\": \"\",\n            \"passive_monitoring\": true,\n            \"persistence_class\": \"\",\n            \"transparent\": false\n        }\n    }\n}\n</code></pre>\n\n<p>And this powershell script:</p>\n\n<pre><code>$nodesAarray = \"abc1.prod.local:80\", \"jkl1.prod.local:80\"\nforeach($node in $nodesArray)\n{\n    $nodes_match_and_enabled = $GetNodesResponse.properties.basic.nodes_table | Where { $_.node -eq $node -and $_.state -eq \"active\" }\n    if($nodes_match_and_enabled)\n    {\n        Write-Output \"$node exists in the pool and active\"\n    }\n    else \n    {\n        Write-Output \"$node is either not active or the name mismatches\"\n        $global:invalidNodeArray.Add($node)     \n    }\n}\n</code></pre>\n\n<p>In my powershell script I am looping to check the two nodes in my array actually match by value and the state is active. It works as I expect.</p>\n\n<p>However, I am scripting the same exact logic in Python (I am a beginner) but not sure how to approach it. Any idea what the script would look like in Python???</p>\n"}, {"tags": ["python", "pipenv"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 2, "creation_date": 1532557259, "post_id": 51528441, "comment_id": 90025475, "body": "Why not set up a <a href=\"https://gist.github.com/Jaza/fcea493dd0ba6ebf09d3\" rel=\"nofollow noreferrer\">private PyPI index</a> to serve those wheels?"}, {"owner": {"reputation": 929, "user_id": 6814713, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9e8cf4703e0f253517a907c178d53d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Brendan", "link": "https://stackoverflow.com/users/6814713/brendan"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1532557962, "post_id": 51528441, "comment_id": 90025631, "body": "@MartijnPieters, I think this could reasonably be a viable solution, especially if I was creating these .whl files myself. But given that I&#39;m working with packages that are already published (and downloaded from <a href=\"https://www.lfd.uci.edu/~gohlke/pythonlibs/\" rel=\"nofollow noreferrer\">this wonderful resource</a>), it feels unnecessary to create a wrapper repository. What would the benefits of this be compared to storing the .whl files in the project itself?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 2, "creation_date": 1532558121, "post_id": 51528441, "comment_id": 90025664, "body": "That wonderful resource does not provide a PyPI compatible index. Defining your own index would save everyone from having to download the wheels manually."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1532558185, "post_id": 51528441, "comment_id": 90025676, "body": "And if you are working with team members that do not use Windows, you can save those members from having to download your wheel files entirely."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1532559010, "post_id": 51528441, "comment_id": 90025885, "body": "Ah, alternative: install the direct URL for the wheel."}], "answers": [{"comments": [{"owner": {"reputation": 929, "user_id": 6814713, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9e8cf4703e0f253517a907c178d53d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Brendan", "link": "https://stackoverflow.com/users/6814713/brendan"}, "edited": false, "score": 0, "creation_date": 1532559784, "post_id": 51528588, "comment_id": 90026053, "body": "This is an excellent response, and thank you for providing multiple options and examples. Minor side question, how did you get the download link from Gohlke&#39;s site? Trying to copy link path doesn&#39;t seem to work for me (I get <code>;</code>)"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 929, "user_id": 6814713, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9e8cf4703e0f253517a907c178d53d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Brendan", "link": "https://stackoverflow.com/users/6814713/brendan"}, "edited": false, "score": 1, "creation_date": 1532560149, "post_id": 51528588, "comment_id": 90026129, "body": "I used the developer console; in the network tab a new entry appears when you click a link, as the browser asks where to save the file. I took the URL from that."}, {"owner": {"reputation": 5869, "user_id": 24508, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/bcebb442d8377035ebbdc5eeda7b0dad?s=128&d=identicon&r=PG", "display_name": "Chris Huang-Leaver", "link": "https://stackoverflow.com/users/24508/chris-huang-leaver"}, "edited": false, "score": 0, "creation_date": 1602653951, "post_id": 51528588, "comment_id": 113785143, "body": "<code>pipenv run pypi-server -p 8080 .&#47;packages &amp;</code> should be <code>--port=8080</code> on newer versions. &#39;-p&#39; is no longer recognized as an option. I&#39;m not sure why."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 5869, "user_id": 24508, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/bcebb442d8377035ebbdc5eeda7b0dad?s=128&d=identicon&r=PG", "display_name": "Chris Huang-Leaver", "link": "https://stackoverflow.com/users/24508/chris-huang-leaver"}, "edited": false, "score": 0, "creation_date": 1602660009, "post_id": 51528588, "comment_id": 113787193, "body": "@ChrisHuang-Leaver: no, both <code>-p 8080</code> and <code>--port=8080</code> work. Something may be wrong on your side, or there could, perhaps, be a bug, but the <a href=\"https://github.com/pypiserver/pypiserver/blob/47d6efe1967706caf584cfbd220ea61d79e6e62c/pypiserver/__main__.py#L221-L227\" rel=\"nofollow noreferrer\">source code of the project</a> shows <code>-p</code> is still supported."}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 16, "last_activity_date": 1583871071, "last_edit_date": 1583871071, "creation_date": 1532558085, "answer_id": 51528588, "question_id": 51528441, "link": "https://stackoverflow.com/questions/51528441/pipenv-how-to-handle-locally-installed-whl-packages/51528588#51528588", "title": "PipEnv: How to handle locally installed .whl packages", "body": "<p>You should set up a private PyPI index server, and <a href=\"https://pipenv.kennethreitz.org/en/latest/advanced/#specifying-package-indexes\" rel=\"noreferrer\">configure Pipenv to use that server</a>.</p>\n\n<p>Setting up a private PyPI server is trivial with a project like <a href=\"https://pypi.org/project/pypiserver/\" rel=\"noreferrer\"><code>pypiserver</code></a>:</p>\n\n<pre><code>$ mkdir private_pypi &amp;&amp; cd private_pypi\n$ pipenv install   # create pipenv files\n$ pipenv install pypiserver\n$ mkdir packages\n$ pipenv run pypi-server -p 8080 ./packages &amp;\n</code></pre>\n\n<p>and put your wheels into their <code>projectname</code> subdirectry of the <code>packages</code> directory, or use <code>twine</code> to publish your package to the server.</p>\n\n<p>Then add a <code>[[source]]</code> section in your projects <code>Pipfile</code> to point to the server (the url to use ends in <code>/simple</code>, so <code>http://hostname:8080/simple</code>):</p>\n\n<pre><code>[[source]]\nurl = \"http://hostname:8080/simple\"\nverify_ssl = false\nname = \"some_logical_name\"\n</code></pre>\n\n<p>You can use the default <code>name = \"pypi\"</code> section as a guide.</p>\n\n<p>In the <code>[packages]</code> section, specify the index to use for those private wheels:</p>\n\n<pre><code>[packages]\nwheel1 = {version=\"*\", index=\"some_logical_name\"}\nwheel2 = {version=\"0.41.1\", index=\"some_logical_name\"}\nsome_public_project = \"*\"\n</code></pre>\n\n<p>Again, you can explicitly name any of the named indices, including <code>index=\"pypi\"</code>. Not adding a <code>index=\"...\"</code> restriction lets <code>Pipenv</code> search all indexes for possible distributions.</p>\n\n<p>For binary wheels published outside of an index (such as <a href=\"https://www.lfd.uci.edu/~gohlke/pythonlibs/\" rel=\"noreferrer\">those built by Christoph Gohlke</a>), you could consider just installing the full wheel URL:</p>\n\n<pre><code>pipenv install https://download.lfd.uci.edu/pythonlibs/l8ulg3xw/aiohttp-3.3.2-cp36-cp36m-win_amd64.whl\n</code></pre>\n\n<p>This does force everyone using your Pipfile to a specific platform.</p>\n"}], "owner": {"reputation": 929, "user_id": 6814713, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9e8cf4703e0f253517a907c178d53d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Brendan", "link": "https://stackoverflow.com/users/6814713/brendan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5725, "favorite_count": 2, "accepted_answer_id": 51528588, "answer_count": 1, "score": 7, "last_activity_date": 1583871071, "creation_date": 1532557029, "question_id": 51528441, "link": "https://stackoverflow.com/questions/51528441/pipenv-how-to-handle-locally-installed-whl-packages", "title": "PipEnv: How to handle locally installed .whl packages", "body": "<p>I'm using PipEnv to set up a project, and some packages I'm needing to install from precompiled binaries. In a previous project I just pipenv installed the .whl files from some local folder into my environment, but this seems to cause issues with the lock file throwing an error if someone else tries to install from the repository since the pipfile tracks the local path. What are best practices for this? Should I create a packages repository as part of the project and install from that?</p>\n"}, {"tags": ["python", "python-3.x", "datetime"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1532556774, "post_id": 51528367, "comment_id": 90025335, "body": "See the duplicate: use <code>difference.total_seconds()</code>, not <code>int()</code>."}, {"owner": {"reputation": 33, "user_id": 9942719, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pUA9e_3Yzoc/AAAAAAAAAAI/AAAAAAAAACo/tsic8BwmWV0/photo.jpg?sz=128", "display_name": "Bill Skullman", "link": "https://stackoverflow.com/users/9942719/bill-skullman"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1532639361, "post_id": 51528367, "comment_id": 90062784, "body": "Thanks @MartijnPieters, that solved it :)"}], "owner": {"reputation": 33, "user_id": 9942719, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pUA9e_3Yzoc/AAAAAAAAAAI/AAAAAAAAACo/tsic8BwmWV0/photo.jpg?sz=128", "display_name": "Bill Skullman", "link": "https://stackoverflow.com/users/9942719/bill-skullman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "closed_date": 1532556748, "answer_count": 0, "score": 0, "last_activity_date": 1532556729, "creation_date": 1532556451, "last_edit_date": 1532556729, "question_id": 51528367, "link": "https://stackoverflow.com/questions/51528367/python-how-do-i-get-the-time-in-seconds-between-2-datetimes", "closed_reason": "Duplicate", "title": "Python - How do I get the time in seconds between 2 datetimes?", "body": "<p>I'm trying to get the time in seconds between the current time, and a timestamp (datetime) I have in my database, but I can't seem to get it working..</p>\n\n<pre><code>config = json.loads(open('/var/www/html/config.json').read())\ndb = MySQLdb.connect(config['database']['host'],config['database']['user'],config['database']['password'],config['database']['dbname'] )\ncursor = db.cursor()\nsql = \"select MANTIME from weather_settings\"\ncursor.execute(sql)\nglobal delay\nfetched = cursor.fetchone()\ndata = fetched[0]\ncursor.close()\ndb.close()\ndbtime = data\nprint(\"Current db time is: \",dbtime)\nprint(\"\")\nnowtime = time.strftime(\"%Y-%m-%d %H:%M:%S\")\nnowtime = datetime.strptime(nowtime,\"%Y-%m-%d %H:%M:%S\")\nprint(\"Current time is: \",nowtime)\nprint(\"\")\ndifference = nowtime - dbtime\nprint(\"The difference is: \",difference)\nprint(\"\")\nif int(difference)/60 &gt; 27:\n    print(\"Time exceeds 27 minutes\")\nelse:\n    print(\"Time doesn't exceed 27 minutes\") \n</code></pre>\n\n<p>This gives me this type error: TypeError: int() argument must be a string or a number, not 'datetime.timedelta'</p>\n\n<p>I can't seem to figure it out, and the code I have now is probably not very nice.</p>\n\n<p>Can anyone help me with how to take the current date and time, and compare it with the date and time of a datetime in my database, and return the seconds between them?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 986, "user_id": 2271478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6d2741f690d245b2786ac0f6e8dde8?s=128&d=identicon&r=PG", "display_name": "xyzjayne", "link": "https://stackoverflow.com/users/2271478/xyzjayne"}, "edited": false, "score": 0, "creation_date": 1532558126, "post_id": 51528341, "comment_id": 90025667, "body": "What do you mean nothing happens? It doesn&#39;t apply the change in place so your command basically creates a new variable."}, {"owner": {"reputation": 1, "user_id": 6784081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2c92cfa69fff172f30a715144175aa5?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Manley", "link": "https://stackoverflow.com/users/6784081/gary-manley"}, "reply_to_user": {"reputation": 986, "user_id": 2271478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6d2741f690d245b2786ac0f6e8dde8?s=128&d=identicon&r=PG", "display_name": "xyzjayne", "link": "https://stackoverflow.com/users/2271478/xyzjayne"}, "edited": false, "score": 0, "creation_date": 1532558836, "post_id": 51528341, "comment_id": 90025836, "body": "It doesn&#39;t split the column. I could be wrong but I thought that &#39;  &#39; will split the column on the space into multiple columns."}, {"owner": {"reputation": 1, "user_id": 6784081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2c92cfa69fff172f30a715144175aa5?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Manley", "link": "https://stackoverflow.com/users/6784081/gary-manley"}, "reply_to_user": {"reputation": 986, "user_id": 2271478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6d2741f690d245b2786ac0f6e8dde8?s=128&d=identicon&r=PG", "display_name": "xyzjayne", "link": "https://stackoverflow.com/users/2271478/xyzjayne"}, "edited": false, "score": 0, "creation_date": 1532559705, "post_id": 51528341, "comment_id": 90026031, "body": "I am thinking I will need to create a lambda."}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1532559748, "post_id": 51528341, "comment_id": 90026046, "body": "Instead of providing the <code>son</code> file, can you provide your <code>print(df.head(5).to_dict())</code> and a expected output?"}], "owner": {"reputation": 1, "user_id": 6784081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2c92cfa69fff172f30a715144175aa5?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Manley", "link": "https://stackoverflow.com/users/6784081/gary-manley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1532587509, "creation_date": 1532556301, "last_edit_date": 1532587509, "question_id": 51528341, "link": "https://stackoverflow.com/questions/51528341/extracting-text-from-a-dataframe-in-python", "title": "Extracting text from a dataframe in Python", "body": "<p>I am trying to analyze the NIST National Vulnerability Database using their JSON feed. URL is <a href=\"https://nvd.nist.gov/vuln/data-feeds#JSON_FEED\" rel=\"nofollow noreferrer\">here</a>. I am able to read the json file and can get it into a dataframe using pandas below.</p>\n\n<pre><code>import pandas as pd\n\nfile_path = '/nvdcve-1.0-2017.json/nvdcve-1.0-2017.json'\n\njson_file = open(file_path, 'r') \n\ndf = pd.read_json(json_file)\n\ndf = pd.io.json.json_normalize(df[\"CVE_Items\"])\n\n#Select vendor data to extract the vendor name, product name\ndf2 = df[[\"cve.affects.vendor.vendor_data\"]]\n</code></pre>\n\n<p>There are more rows that are returned but the first result is something like this</p>\n\n<pre><code>[{'vendor_name': 'microsoft', 'product': {'product_data': [{'product_name': 'windows_10', 'version': {'version_data': [{'version_value': '*'}]}}, \n{'product_name': 'windows_8.1', 'version': {'version_data': [{'version_value': '*'}]}}, {'product_name': 'windows_rt_8.1', 'version': [{'version_value': '*'}]}}, \n{'product_name': 'windows_server_2008', 'version': [{'version_value': '*'}, {'version_value': 'r2'}]}}, {'product_name': 'windows_vista', 'version': {'version_data': [{'version_value': '*'}]}}]\n</code></pre>\n\n<p>I am trying to extract only vendor_name and the product_name to place into new columns. I have tried to split the column using <code>df2[\"cve.affects.vendor.vendor_data\"].str.split(' ', expand=True)</code> but when I do this nothing happens. Not even an error message. Any help is greatly appreciated.</p>\n\n<p>-----Edit-----</p>\n\n<p>When I look at the first 5 rows, this is what I get.</p>\n\n<pre><code>In: print(df.head(5).to_dict())\n\nOut: {'cve.affects.vendor.vendor_data': {0: [{'vendor_name': 'microsoft', 'product': {'product_data': [{'product_name': 'windows_10', 'version': {'version_data': [{'version_value': '-'}, {'version_value': '1511'}, {'version_value': '1607'}]}}, {'product_name': 'windows_7', 'version': {'version_data': [{'version_value': '*'}]}}, {'product_name': 'windows_8.1', 'version': {'version_data': [{'version_value': '*'}]}}, {'product_name': 'windows_rt_8.1', 'version': {'version_data': [{'version_value': '*'}]}}, {'product_name': 'windows_server_2008', 'version': {'version_data': [{'version_value': '*'}, {'version_value': 'r2'}]}}, {'product_name': 'windows_server_2012', 'version': {'version_data': [{'version_value': '-'}, {'version_value': 'r2'}]}}, {'product_name': 'windows_vista', 'version': {'version_data': [{'version_value': '*'}]}}]}}], 1: [{'vendor_name': 'microsoft', 'product': {'product_data': [{'product_name': 'edge', 'version': {'version_data': [{'version_value': '*'}]}}]}}], 2: [{'vendor_name': 'microsoft', 'product': {'product_data': [{'product_name': 'sharepoint_enterprise_server', 'version': {'version_data': [{'version_value': '2016'}]}}, {'product_name': 'word', 'version': {'version_data': [{'version_value': '2016'}]}}]}}]}}\n</code></pre>\n\n<p>I don't get a table like I thought even though it says it's a dataframe. Is it possible there is something that is keeping some of the json structure?</p>\n"}, {"tags": ["python", "pip", "setuptools"], "answers": [{"comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1532561286, "post_id": 51528721, "comment_id": 90026329, "body": "So you&#39;re saying that <a href=\"https://docs.python.org/3/distutils/setupscript.html#relationships-between-distributions-and-packages\" rel=\"nofollow noreferrer\"><code>provides</code> and <code>obsoletes</code> and friends</a> don&#39;t exist?"}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1532565844, "post_id": 51528721, "comment_id": 90027189, "body": "I see neither <code>provides</code> nor <code>obsoletes</code> in either <a href=\"https://docs.python.org/3/distutils/apiref.html#distutils.core.setup\" rel=\"nofollow noreferrer\">distutils.core.setup()</a> or <a href=\"https://setuptools.readthedocs.io/en/latest/setuptools.html#new-and-changed-setup-keywords\" rel=\"nofollow noreferrer\">setuptools.setup()</a> docs. I see them in <a href=\"https://github.com/python/cpython/blob/ecf411c59e33d3760dbfebf6d5b4b205bcc29d5a/Lib/distutils/core.py#L42\" rel=\"nofollow noreferrer\">distutils sources</a> but I don&#39;t see if they are used for anything but <a href=\"https://github.com/python/cpython/blob/ecf411c59e33d3760dbfebf6d5b4b205bcc29d5a/Lib/distutils/dist.py#L122\" rel=\"nofollow noreferrer\">printing</a>."}, {"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1532601917, "post_id": 51528721, "comment_id": 90041405, "body": "@abarnert: Interesting, it looks like the docs are indeed lying about the <code>provides</code> and <code>obsoletes</code>. The <a href=\"https://packaging.python.org/specifications/core-metadata/\" rel=\"nofollow noreferrer\">Core metadata specification</a> states that <i>it isn\u2019t at all clear how tools should interpret them in the context of an open index server such as PyPI. As a result, popular installation tools ignore them completely, which in turn means there is little incentive for package publishers to set them appropriately. However, they\u2019re retained in the metadata specification, as they\u2019re still potentially useful for informational purposes.</i>"}, {"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 1, "creation_date": 1532602137, "post_id": 51528721, "comment_id": 90041528, "body": "So, while the fields were retained in PEP 566 (from PEP 345, where they were initially introduced), they have no meaning neither for <code>distutils</code> nor for <code>setuptools</code> nor for the package managers. I find the docs rather misleading in this case, promising something that is not quite there."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 0, "creation_date": 1532628843, "post_id": 51528721, "comment_id": 90058190, "body": "@hoefling Interesting. So I guess the short answer is that there <i>is</i> an official way to tell <code>pip</code> exactly what the OP wants, but it won&#39;t do any good because <code>pip</code> is just going to ignore it, and that&#39;s not likely to ever change\u2026"}], "tags": [], "owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "is_accepted": true, "score": 1, "last_activity_date": 1532559041, "creation_date": 1532559041, "answer_id": 51528721, "question_id": 51528303, "link": "https://stackoverflow.com/questions/51528303/python-setuptools-how-to-specify-a-package-aliases-a-third-party-package/51528721#51528721", "title": "Python setuptools: How to specify a package aliases a third party package?", "body": "<p>There is no such ability. <code>pip</code> is a rather simple package manager and doesn't have features from advanced package managers like <code>rpm/deb/etc</code>. It has neither \"This package also provides\u2026\" nor \"This package obsoletes\u2026\" nor \"This package is incompatible with\u2026\" Alas!</p>\n\n<p>The only way is to upload to PyPI a <code>vendor</code> package that consists of a single <code>setup.py</code> that lists <code>foobar</code> as a dependency.</p>\n"}], "owner": {"reputation": 535, "user_id": 1143581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fb37bb7d7218760605ed3ba1b9d67b00?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/1143581/brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "accepted_answer_id": 51528721, "answer_count": 1, "score": 0, "last_activity_date": 1532559041, "creation_date": 1532556045, "question_id": 51528303, "link": "https://stackoverflow.com/questions/51528303/python-setuptools-how-to-specify-a-package-aliases-a-third-party-package", "title": "Python setuptools: How to specify a package aliases a third party package?", "body": "<p>If I have a package <code>foobar</code>, I want it to tell pip/setuptools that it also provides package <code>vendor</code>. So that when I later install another third party package that depends on the <code>vendor</code> package, it sees that <code>foobar</code> is installed, and therefore won't install the <code>vendor</code> package. Is this possible?</p>\n"}, {"tags": ["python", "tensorflow", "unity3d", "ml-agent"], "comments": [{"owner": {"reputation": 3836, "user_id": 3275464, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/g6Pnl.png?s=128&g=1", "display_name": "Learning is a mess", "link": "https://stackoverflow.com/users/3275464/learning-is-a-mess"}, "edited": false, "score": 1, "creation_date": 1532557237, "post_id": 51528295, "comment_id": 90025470, "body": "Not a solution to the error message, but can you try installing it from anaconda. It has helped me with similar issues."}, {"owner": {"reputation": 19375, "user_id": 1735003, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qNeQo.png?s=128&g=1", "display_name": "P-Gn", "link": "https://stackoverflow.com/users/1735003/p-gn"}, "edited": false, "score": 0, "creation_date": 1532594169, "post_id": 51528295, "comment_id": 90036460, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/50430086/issue-installing-tensorflow-not-a-cuda-cudnn-issue\">Issue installing Tensorflow -- not a CUDA/CuDNN issue</a>"}, {"owner": {"reputation": 10919, "user_id": 967334, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/af0937d6bde31a181576d37f3cfffe20?s=128&d=identicon&r=PG", "display_name": "Jean-Francois Gallant", "link": "https://stackoverflow.com/users/967334/jean-francois-gallant"}, "edited": false, "score": 0, "creation_date": 1532615046, "post_id": 51528295, "comment_id": 90050084, "body": "Can&#39;t go to 1.5. Really need 1.7.1 to work with Unity ML-Agents. It&#39;s seam to be AVX support problem because tensorflow 1.5 import work but not 1.7.1. Same problem if 1.7.1 is installed with Anaconda."}], "answers": [{"tags": [], "owner": {"reputation": 10919, "user_id": 967334, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/af0937d6bde31a181576d37f3cfffe20?s=128&d=identicon&r=PG", "display_name": "Jean-Francois Gallant", "link": "https://stackoverflow.com/users/967334/jean-francois-gallant"}, "is_accepted": true, "score": 1, "last_activity_date": 1533072320, "last_edit_date": 1533072320, "creation_date": 1533070159, "answer_id": 51621845, "question_id": 51528295, "link": "https://stackoverflow.com/questions/51528295/tensorflow-1-7-1-error-with-python-3-5/51621845#51621845", "title": "Tensorflow 1.7.1 error with python 3.5", "body": "<p>Finally it's a AVX support problem.\nMy CPU don't support AVX instructions.</p>\n\n<p>I compile myself the TensorFlow 1.7.1 from sources. Finally not that hard as I think ( but take few hours on my poor laptop). With GIT , CMAKE , SWIG and Python 3.5 I fellow the instruction on the tensorflow github repo ( readme.md ):</p>\n\n<p><a href=\"https://github.com/tensorflow/tensorflow/tree/v1.7.1/tensorflow/contrib/cmake\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/tensorflow/tree/v1.7.1/tensorflow/contrib/cmake</a></p>\n\n<p>Everything goes fine except few \" out of heap space \" errors. Trying to add the flags /Zm200 , /Zm500 or anything else not working for me. I solve this issue by forcing to use 64bit VC compiler:</p>\n\n<p><a href=\"https://github.com/tensorflow/tensorflow/issues/11096\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/tensorflow/issues/11096</a></p>\n\n<p>On this issue page , the user kalengi suggest some tips. I only use his commands for MSBuild:</p>\n\n<pre><code>\"C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\MSBuild\\15.0\\Bin\\amd64\\MSBuild.exe\" /m:2 /p:CL_MPCount=1 /p:Configuration=Release /p:Platform=x64 /p:PreferredToolArchitecture=x64 ALL_BUILD.vcxproj\n\n\"C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\MSBuild\\15.0\\Bin\\amd64\\MSBuild.exe\" /m:2 /p:CL_MPCount=1 /p:Configuration=Release /p:Platform=x64 /p:PreferredToolArchitecture=x64 tf_python_build_pip_package.vcxproj\n</code></pre>\n"}], "owner": {"reputation": 10919, "user_id": 967334, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/af0937d6bde31a181576d37f3cfffe20?s=128&d=identicon&r=PG", "display_name": "Jean-Francois Gallant", "link": "https://stackoverflow.com/users/967334/jean-francois-gallant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 463, "favorite_count": 0, "accepted_answer_id": 51621845, "answer_count": 1, "score": 2, "last_activity_date": 1573467491, "creation_date": 1532555986, "last_edit_date": 1573467491, "question_id": 51528295, "link": "https://stackoverflow.com/questions/51528295/tensorflow-1-7-1-error-with-python-3-5", "title": "Tensorflow 1.7.1 error with python 3.5", "body": "<p>I install tensorflow 1.7.1 to use with Unity ML-Agent. I install tensorflow with the following command:</p>\n\n<pre><code>pip3 install tensorflow==1.7.1\n</code></pre>\n\n<p>Installation goes fines but when I try to import tensorflow I got this error:</p>\n\n<pre><code>C:\\&gt;python\nPython 3.5.1 (v3.5.1:37a07cee5969, Dec  6 2015, 01:54:25) [MSC v.1900 64 bit (AMD64)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import tensorflow\nTraceback (most recent call last):\n  File \"C:\\Python35_x64\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 14, in swig_import_helper\n    return importlib.import_module(mname)\n  File \"C:\\Python35_x64\\lib\\importlib\\__init__.py\", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 986, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 969, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 958, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 666, in _load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 577, in module_from_spec\n  File \"&lt;frozen importlib._bootstrap_external&gt;\", line 903, in create_module\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 222, in _call_with_frames_removed\nImportError: DLL load failed: Une routine d\\u2019initialisation d\\u2019une biblioth\u00e8que de liens dynamiques (DLL) a \u00e9chou\u00e9.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Python35_x64\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow.py\", line 58, in &lt;module&gt;\n    from tensorflow.python.pywrap_tensorflow_internal import *\n  File \"C:\\Python35_x64\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 17, in &lt;module&gt;\n    _pywrap_tensorflow_internal = swig_import_helper()\n  File \"C:\\Python35_x64\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 16, in swig_import_helper\n    return importlib.import_module('_pywrap_tensorflow_internal')\n  File \"C:\\Python35_x64\\lib\\importlib\\__init__.py\", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\nImportError: No module named '_pywrap_tensorflow_internal'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\Python35_x64\\lib\\site-packages\\tensorflow\\__init__.py\", line 24, in &lt;module&gt;\n    from tensorflow.python import *  # pylint: disable=redefined-builtin\n  File \"C:\\Python35_x64\\lib\\site-packages\\tensorflow\\python\\__init__.py\", line 49, in &lt;module&gt;\n    from tensorflow.python import pywrap_tensorflow\n  File \"C:\\Python35_x64\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow.py\", line 74, in &lt;module&gt;\n    raise ImportError(msg)\nImportError: Traceback (most recent call last):\n  File \"C:\\Python35_x64\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 14, in swig_import_helper\n    return importlib.import_module(mname)\n  File \"C:\\Python35_x64\\lib\\importlib\\__init__.py\", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 986, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 969, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 958, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 666, in _load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 577, in module_from_spec\n  File \"&lt;frozen importlib._bootstrap_external&gt;\", line 903, in create_module\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 222, in _call_with_frames_removed\nImportError: DLL load failed: Une routine d\\u2019initialisation d\\u2019une biblioth\u00e8que de liens dynamiques (DLL) a \u00e9chou\u00e9.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Python35_x64\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow.py\", line 58, in &lt;module&gt;\n    from tensorflow.python.pywrap_tensorflow_internal import *\n  File \"C:\\Python35_x64\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 17, in &lt;module&gt;\n    _pywrap_tensorflow_internal = swig_import_helper()\n  File \"C:\\Python35_x64\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 16, in swig_import_helper\n    return importlib.import_module('_pywrap_tensorflow_internal')\n  File \"C:\\Python35_x64\\lib\\importlib\\__init__.py\", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\nImportError: No module named '_pywrap_tensorflow_internal'\n\n\nFailed to load the native TensorFlow runtime.\n\nSee https://www.tensorflow.org/install/install_sources#common_installation_problems\n\nfor some common reasons and solutions.  Include the entire stack trace\nabove this error message when asking for help.\n&gt;&gt;&gt;\n</code></pre>\n\n<p>Microsoft C++ 2015 redistributable as installed on my system and I find MSVCP140.dll easily with the dos command ( like suggested in common installation issue docs ):</p>\n\n<pre><code>C:\\&gt;where MSVCP140.dll\nC:\\Windows\\System32\\msvcp140.dll\n</code></pre>\n\n<p>I don't install CUDA and cuDNN things because I don't have cuda cards and I only install tensorflow for CPU like suggested.</p>\n\n<p>EDIT: Downgrading to TensorFlow 1.5 is not a solution for me because Unity ML-agents really need 1.7.1</p>\n"}, {"tags": ["python", "pandas", "numpy", "pandas-apply"], "answers": [{"comments": [{"owner": {"reputation": 1250, "user_id": 2970272, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YgBQv.gif?s=128&g=1", "display_name": "mrbTT", "link": "https://stackoverflow.com/users/2970272/mrbtt"}, "edited": false, "score": 0, "creation_date": 1532621469, "post_id": 51542320, "comment_id": 90054257, "body": "Thanks! I didn&#39;t know about the <code>apply</code>, will definetly keep that in mind for future codes. Meanwhile I&#39;ve managed to do what I needed with a different aproach using NumPy&#39;s <code>append</code> (submitted and answer bellow)"}], "tags": [], "owner": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "is_accepted": false, "score": 1, "last_activity_date": 1532618276, "creation_date": 1532618276, "answer_id": 51542320, "question_id": 51528272, "link": "https://stackoverflow.com/questions/51528272/filling-each-row-of-one-column-of-a-dataframe-with-different-values-a-random-di/51542320#51542320", "title": "Filling each row of one column of a DataFrame with different values (a random distribution)", "body": "<p>The problem with your use of <code>fillna</code> here is that this function takes a <strong>value</strong> as argument and applies it to every element along the specified axis. So your stat value is calculated once and then distributed into every row. </p>\n\n<p>What you need is your function called for every element on the axis, so your argument must be the function itself and not a value. That's a job for <code>apply</code>, which takes a function and applies it on elements along an axis.</p>\n\n<p>I'm straight jumping to your final requirements:</p>\n\n<p>You could use <code>apply</code> just on the <code>minutes</code>-column (as a pandas.Series method) with a lambda-function and then assign the respective results to the <code>type</code>-column filtered rows of column <code>minutes</code>:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nimport scipy.stats as stats\nimport random\n\n# setup\ndf = pd.DataFrame(np.random.randint(0, 2, size=(8, 4)),\n                  columns=list('ABC') + ['type'])\ndf['minutes'] = np.nan\n\n\ndf.loc[df.type == 0, 'minutes'] = \\\n    df['minutes'].apply(lambda _: stats.lognorm(\n        0.5, scale=np.exp(1.8)).ppf(random.random()).astype(int),\n                    convert_dtype=False))\n\ndf.loc[df.type == 1, 'minutes'] = \\\n    df['minutes'].apply(lambda _: stats.lognorm(\n        1.2, scale=np.exp(2.7)).ppf(random.random()).astype(int),\n                    convert_dtype=False))\n</code></pre>\n\n<p>... or you use <code>apply</code> as a DataFrame method with a function wrapping your logic to distinguish between values of <code>type</code>-column and assign the result back to the <code>minutes</code>-column:</p>\n\n<pre><code>def calc_minutes(row):\n    if row['type'] == 0:\n        return stats.lognorm(0.5, scale=np.exp(1.8)).ppf(random.random()).astype(int)\n    elif row['type'] == 1:\n        return stats.lognorm(1.2, scale=np.exp(2.7)).ppf(random.random()).astype(int)\n\ndf['minutes'] = df.apply(calc_minutes, axis=1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1250, "user_id": 2970272, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YgBQv.gif?s=128&g=1", "display_name": "mrbTT", "link": "https://stackoverflow.com/users/2970272/mrbtt"}, "is_accepted": true, "score": 0, "last_activity_date": 1532621229, "creation_date": 1532621229, "answer_id": 51543222, "question_id": 51528272, "link": "https://stackoverflow.com/questions/51528272/filling-each-row-of-one-column-of-a-dataframe-with-different-values-a-random-di/51543222#51543222", "title": "Filling each row of one column of a DataFrame with different values (a random distribution)", "body": "<p>Managed to do it with some steps with a different mindset:</p>\n\n<ul>\n<li>Created 2 lists, each with i's own parameters </li>\n<li><p>Used <code>NumPy's append</code>\nso that for each row a different random number</p>\n\n<blockquote>\n<pre><code> lognormal_tone = []\n lognormal_ttwo = []\n for i in range(len(s)):\n     lognormal_tone.append(stats.lognorm(0.5, scale=np.exp(1.8)).ppf(random.random()).astype(int))\n     lognormal_ttwo.append(stats.lognorm(0.4, scale=np.exp(2.7)).ppf(random.random()).astype(int))\n</code></pre>\n</blockquote></li>\n</ul>\n\n<p>Then, included them in the DataFrame with another previously created list:</p>\n\n<pre><code>df = pd.DataFrame({'arrival':arrival,'minTypeOne':lognormal_tone, 'minTypeTwo':lognormal_two})\n</code></pre>\n"}], "owner": {"reputation": 1250, "user_id": 2970272, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YgBQv.gif?s=128&g=1", "display_name": "mrbTT", "link": "https://stackoverflow.com/users/2970272/mrbtt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 860, "favorite_count": 0, "accepted_answer_id": 51543222, "answer_count": 2, "score": 0, "last_activity_date": 1548447899, "creation_date": 1532555890, "last_edit_date": 1548447899, "question_id": 51528272, "link": "https://stackoverflow.com/questions/51528272/filling-each-row-of-one-column-of-a-dataframe-with-different-values-a-random-di", "title": "Filling each row of one column of a DataFrame with different values (a random distribution)", "body": "<p>I have a DataFrame with aprox. 4 columns and 200 rows. I created a 5th column with null values:</p>\n\n<pre><code>df['minutes'] = np.nan \n</code></pre>\n\n<p>Then, I want to fill each row of this new column with random inverse log normal values. <strong>The code to generate 1 inverse log normal</strong>:</p>\n\n<p>note: if the code bellow is ran multiple times it will generate a new result because of the value inside <code>ppf()</code> : <code>random.random()</code></p>\n\n<pre><code>df['minutes'] = df['minutes'].fillna(stats.lognorm(0.5, scale=np.exp(1.8)).ppf(random.random()).astype(int))\n</code></pre>\n\n<p>What's happening when I do that is that it's <strong>filling all 200 rows of <code>df['minutes']</code> with the same number</strong>, instead of triggering the <code>random.random()</code> for each row as I expected it to.</p>\n\n<p>What do I have to do? I tried using <code>for loop</code>but apparently I'm not getting it right (giving the same results):</p>\n\n<pre><code>for i in range(1,len(df)):\ndf['minutes'] = df['minutes'].fillna(stats.lognorm(0.5, scale=np.exp(1.8)).ppf(random.random()).astype(int))\n</code></pre>\n\n<p>what am I doing wrong?</p>\n\n<p>Also, I'll add that later I'll need to change some parameters of the <code>inverse log normal</code> above if the value of another column is 0 or 1. as in:</p>\n\n<pre><code>if df['type'] == 0:\n     df['minutes'] = df['minutes'].fillna(stats.lognorm(0.5, scale=np.exp(1.8)).ppf(random.random()).astype(int))\nelif df['type'] == 1:\n     df['minutes'] = df['minutes'].fillna(stats.lognorm(1.2, scale=np.exp(2.7)).ppf(random.random()).astype(int))\n</code></pre>\n\n<p>thanks in advance.</p>\n"}, {"tags": ["python", "numpy", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10135907, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gvKmN4l2CmQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7paC_U7VbnBkjl4wL9MYeUbSA5CIg/mo/photo.jpg?sz=128", "display_name": "trey", "link": "https://stackoverflow.com/users/10135907/trey"}, "edited": false, "score": 0, "creation_date": 1532558291, "post_id": 51528570, "comment_id": 90025700, "body": "it works! thank you"}], "tags": [], "owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "is_accepted": false, "score": 0, "last_activity_date": 1532557913, "creation_date": 1532557913, "answer_id": 51528570, "question_id": 51528266, "link": "https://stackoverflow.com/questions/51528266/converting-time-data-which-is-saved-as-a-string-to-an-integer-in-seconds/51528570#51528570", "title": "converting time data which is saved as a string to an integer in seconds", "body": "<p>Unlike <code>time.strptime</code>, <a href=\"https://docs.python.org/3/library/datetime.html\" rel=\"nofollow noreferrer\"><code>datetime.strptime</code></a> can parse such strings, including microseconds, and you can convert the result to a number (seconds since midnight):</p>\n\n<pre><code>import datetime\ndef parse(s):\n    d = datetime.datetime.strptime(s, \"%I:%M:%S.%f %p\")\n    return 3600 * d.hour + 60 * d.minute + d.second + d.microsecond * 1e-6\n</code></pre>\n\n<p>And use it like this:</p>\n\n<pre><code>x = ['11:13:01.337 AM', '11:13:03.337 AM', '11:13:05.337 AM']\nprint([parse(s) for s in x])\n</code></pre>\n\n<p>This should be safe even in the presence of DST changes because strptime merely parses the time, and does not attempt any such semantic conversions</p>\n"}], "owner": {"reputation": 11, "user_id": 10135907, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gvKmN4l2CmQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7paC_U7VbnBkjl4wL9MYeUbSA5CIg/mo/photo.jpg?sz=128", "display_name": "trey", "link": "https://stackoverflow.com/users/10135907/trey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "closed_date": 1532598744, "answer_count": 1, "score": 0, "last_activity_date": 1532557913, "creation_date": 1532555849, "last_edit_date": 1532557502, "question_id": 51528266, "link": "https://stackoverflow.com/questions/51528266/converting-time-data-which-is-saved-as-a-string-to-an-integer-in-seconds", "closed_reason": "Duplicate", "title": "converting time data which is saved as a string to an integer in seconds", "body": "<p>I have some time data that I read into a numpy array as a string. It's in the format</p>\n\n<pre><code>x = ['11:13:01.337 AM', '11:13:03.337 AM', '11:13:05.337 AM']\n</code></pre>\n\n<p>I want to be able to plot this cleanly over an indefinite amount of time, let's say the data goes for 4 hours. How can I convert this into a reasonable form to plot? I am not sure what form would be best so suggestions would be helpful. As you can probably tell I'm a noob, my boss and I appreciate the help!</p>\n"}, {"tags": ["python", "scipy", "interpolation", "qhull"], "comments": [{"owner": {"reputation": 1592, "user_id": 6311436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3mq8t.jpg?s=128&g=1", "display_name": "Matthias Schreiber", "link": "https://stackoverflow.com/users/6311436/matthias-schreiber"}, "edited": false, "score": 2, "creation_date": 1560187638, "post_id": 51528255, "comment_id": 99645149, "body": "You probably don&#39;t have this issue anymore, but it may be helpful to others. I had the same error. It happened to me because I had all my points along one line, like [(1, 1), (2, 2), (3, 3)]."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 12202805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/102c12db2a6e43d668484e3107513c86?s=128&d=identicon&r=PG&f=1", "display_name": "byl", "link": "https://stackoverflow.com/users/12202805/byl"}, "is_accepted": false, "score": 1, "last_activity_date": 1585091402, "creation_date": 1585091402, "answer_id": 60840711, "question_id": 51528255, "link": "https://stackoverflow.com/questions/51528255/linearndinterpolator-qhull-precision-error-initial-simplex-is-flat/60840711#60840711", "title": "LinearNDInterpolator -- Qhull precision error: Initial simplex is flat", "body": "<p>It seems to me that the problem arises because, as the error says, your data (or a given set of your data) are really less than 9-dimensional even though you're passing it a 9-column array. As you can see in the data it's printed out in the error message, the 5th, 7th, and 8th columns are constant. This means those columns are linearly dependent and that set of data only has 7 dimensions. As it's going through, it's trying to form a 9-dimensional <a href=\"https://en.wikipedia.org/wiki/Simplex\" rel=\"nofollow noreferrer\">simplex</a> but can't form one that's <a href=\"https://en.wikipedia.org/wiki/Convex_hull\" rel=\"nofollow noreferrer\">convex</a>.</p>\n\n<p>This issue showed up for me when I was coding an <a href=\"https://github.com/usuaero/AirfoilDatabase\" rel=\"nofollow noreferrer\">airfoil database</a> that runs Xfoil to get the airfoil coefficients at different angles of attack, Reynolds numbers, flap deflections, etc. Xfoil was being finnicky and crash and not return any result for a lot of points in the space. That meant I ended up with a database where all the points were at the same Reynolds number. This made the database not dependent upon Reynolds number, even though I said it was. My data had fewer dimensions than I though it did.</p>\n\n<p>I would fix this by making sure all the points in your data are unique and each column actually adds dimension to the set.</p>\n"}], "owner": {"reputation": 171, "user_id": 9041344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WkD9c.jpg?s=128&g=1", "display_name": "The Ledge", "link": "https://stackoverflow.com/users/9041344/the-ledge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2778, "favorite_count": 0, "answer_count": 1, "score": 7, "last_activity_date": 1585091402, "creation_date": 1532555807, "question_id": 51528255, "link": "https://stackoverflow.com/questions/51528255/linearndinterpolator-qhull-precision-error-initial-simplex-is-flat", "title": "LinearNDInterpolator -- Qhull precision error: Initial simplex is flat", "body": "<p>I am attempting to use <code>scipy.interpolate.LinearNDInterpolator()</code> to interpolate data points in an 8-dimensional space and am getting an error I don't understand:</p>\n\n<pre><code>scipy.spatial.qhull.QhullError: QH6154 Qhull precision error: Initial simplex is flat (facet 1 is coplanar with the interior point)\n</code></pre>\n\n<p>followed by much more text which I will post below. Using what I can find online I cannot fine the error in my code. It all looks right to me (I only copied relevant portions):</p>\n\n<pre><code>from scipy import interpolate as inter\nfrom numpy import array\n\nnpPoints = array(points)\nnpS = array(s)\n\ninter.LinearNDInterpolator(npPoints, npS)\n</code></pre>\n\n<p>where <code>points</code> is an Nx8 nested list of floats and <code>s</code> is an Nx1 list of floats, both defined previously.</p>\n\n<p>From what I see in the <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.LinearNDInterpolator.html#scipy.interpolate.LinearNDInterpolator\" rel=\"noreferrer\">documentation</a> it seems to me that I'm doing it right. Where is my error? Should I be using a different method?</p>\n\n<p>Here is the <strong>full Qhull error</strong>:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"BellDataFit\", line 83, in &lt;module&gt;\n    inter.LinearNDInterpolator(npPoints, npS)\n  File \"interpnd.pyx\", line 248, in scipy.interpolate.interpnd.LinearNDInterpolator.__init__\n  File \"qhull.pyx\", line 1826, in scipy.spatial.qhull.Delaunay.__init__\n  File \"qhull.pyx\", line 354, in scipy.spatial.qhull._Qhull.__init__\nscipy.spatial.qhull.QhullError: QH6154 Qhull precision error: Initial simplex is flat (facet 1 is coplanar with the interior point)\n\nWhile executing:  | qhull d Qbb Qx Qz Q12 Qt Qc\nOptions selected for Qhull 2015.2.r 2016/01/18:\n  run-id 704299719  delaunay  Qbbound-last  Qxact-merge  Qz-infinity-point\n  Q12-no-wide-dup  Qtriangulate  Qcoplanar-keep  _zero-centrum  Qinterior-keep\n  Q3-no-merge-vertices-dim-high  Pgood  _max-width 5.6  Error-roundoff 3.5e-14\n  _one-merge 6.7e-13  Visible-distance 2.1e-13  U-coplanar-distance 2.1e-13\n  Width-outside 4.2e-13  _wide-facet 1.3e-12\n\nprecision problems (corrected unless 'Q0' or an error)\n      2 flipped facets\n     11 nearly singular or axis-parallel hyperplanes\n     11 zero divisors during back substitute\n 119436 zero divisors during gaussian elimination\n\nThe input to qhull appears to be less than 9 dimensional, or a\ncomputation has overflowed.\n\nQhull could not construct a clearly convex simplex from points:\n- p3(v9): -0.89 -0.89     0     0     0  -1.7  -3.1  -3.1   2.1\n- p2(v8): -0.89 -0.89     0     0     0  -2.1  -3.1  -3.1   2.7\n- p1(v7): -0.89 -0.89     0     0     0  -2.4  -3.1  -3.1   3.4\n- p16(v6): -0.89 -0.89     0     0     0   2.8  -3.1  -3.1   4.3\n- p2720(v5):     0     0 -0.89  0.89     0  -2.8  -3.1  -3.1   4.3\n- p2448(v4):     0     0 -0.89 -0.89     0  -2.8  -3.1  -3.1   4.3\n- p7055(v3):     0     0  0.89 -0.89     0  -2.8  -3.1  -3.1   4.3\n- p272(v2): -0.89  0.89     0     0     0  -2.8  -3.1  -3.1   4.3\n- p0(v1): -0.89 -0.89     0     0     0  -2.8  -3.1  -3.1   4.3\n- p9503(v0):  0.89 -0.89     0     0     0  -2.8  -3.1  -3.1   4.3\n\nThe center point is coplanar with a facet, or a vertex is coplanar\nwith a neighboring facet.  The maximum round off error for\ncomputing distances is 3.5e-14.  The center point, facets and distances\nto the center point are as follows:\n\ncenter point  -0.4444  -0.4444 -0.08889 -0.08889        0   -2.025   -3.142   -3.142    3.806\n\nfacet p2 p1 p16 p2720 p2448 p7055 p272 p0 p9503 distance=    0\nfacet p3 p1 p16 p2720 p2448 p7055 p272 p0 p9503 distance=    0\nfacet p3 p2 p16 p2720 p2448 p7055 p272 p0 p9503 distance=    0\nfacet p3 p2 p1 p2720 p2448 p7055 p272 p0 p9503 distance=    0\nfacet p3 p2 p1 p16 p2448 p7055 p272 p0 p9503 distance=    0\nfacet p3 p2 p1 p16 p2720 p7055 p272 p0 p9503 distance= -0.13\nfacet p3 p2 p1 p16 p2720 p2448 p272 p0 p9503 distance=    0\nfacet p3 p2 p1 p16 p2720 p2448 p7055 p0 p9503 distance=    0\nfacet p3 p2 p1 p16 p2720 p2448 p7055 p272 p9503 distance=    0\nfacet p3 p2 p1 p16 p2720 p2448 p7055 p272 p0 distance=    0\n\nThese points either have a maximum or minimum x-coordinate, or\nthey maximize the determinant for k coordinates.  Trial points\nare first selected from points that maximize a coordinate.\n\nBecause of the high dimension, the min x-coordinate and max-coordinate\npoints are used if the determinant is non-zero.  Option 'Qs' will\ndo a better, though much slower, job.  Instead of 'Qs', you can change\nthe points by randomly rotating the input with 'QR0'.\n\nThe min and max coordinates for each dimension are:\n  0:   -0.8889    0.8889  difference= 1.778\n  1:   -0.8889    0.8889  difference= 1.778\n  2:   -0.8889    0.8889  difference= 1.778\n  3:   -0.8889    0.8889  difference= 1.778\n  4:         0         0  difference=    0\n  5:    -2.793     2.793  difference= 5.585\n  6:    -3.142  -2.225e-308  difference= 3.142\n  7:    -3.142  -2.225e-308  difference= 3.142\n  8:  1.776e-15     5.585  difference= 5.585\n\nIf the input should be full dimensional, you have several options that\nmay determine an initial simplex:\n  - use 'QJ'  to joggle the input and make it full dimensional\n  - use 'QbB' to scale the points to the unit cube\n  - use 'QR0' to randomly rotate the input for different maximum points\n  - use 'Qs'  to search all points for the initial simplex\n  - use 'En'  to specify a maximum roundoff error less than 3.5e-14.\n  - trace execution with 'T3' to see the determinant for each point.\n\nIf the input is lower dimensional:\n  - use 'QJ' to joggle the input and make it full dimensional\n  - use 'Qbk:0Bk:0' to delete coordinate k from the input.  You should\n    pick the coordinate with the least range.  The hull will have the\n    correct topology.\n  - determine the flat containing the points, rotate the points\n    into a coordinate plane, and delete the other coordinates.\n  - add one or more points to make the input full dimensional.\n</code></pre>\n"}, {"tags": ["python", "string", "hex", "decode"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9431275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ywqyT.jpg?s=128&g=1", "display_name": "Daniel B&#246;rg", "link": "https://stackoverflow.com/users/9431275/daniel-b%c3%b6rg"}, "edited": false, "score": 0, "creation_date": 1532556301, "post_id": 51528260, "comment_id": 90025192, "body": "Didn&#39;t know about this! Thank you so much"}], "tags": [], "owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "is_accepted": false, "score": 2, "last_activity_date": 1532555824, "creation_date": 1532555824, "answer_id": 51528260, "question_id": 51528213, "link": "https://stackoverflow.com/questions/51528213/how-to-decode-hex-values-from-a-string-in-python/51528260#51528260", "title": "How to decode hex values from a string in python", "body": "<p>Too much work.</p>\n\n<pre><code>&gt;&gt;&gt; urllib.parse.unquote(urllib.parse.unquote(encoded_string))\n'videoplayback?expire=1532566750&amp;mime=video%2Fmp4&amp;key=yt6&amp;mt=1532544983&amp;fvip=5&amp;i'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 9431275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ywqyT.jpg?s=128&g=1", "display_name": "Daniel B&#246;rg", "link": "https://stackoverflow.com/users/9431275/daniel-b%c3%b6rg"}, "edited": false, "score": 0, "creation_date": 1532556426, "post_id": 51528331, "comment_id": 90025243, "body": "Yeah, i didn&#39;t know there were this option. Thank you"}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "reply_to_user": {"reputation": 1, "user_id": 9431275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ywqyT.jpg?s=128&g=1", "display_name": "Daniel B&#246;rg", "link": "https://stackoverflow.com/users/9431275/daniel-b%c3%b6rg"}, "edited": false, "score": 0, "creation_date": 1532556895, "post_id": 51528331, "comment_id": 90025372, "body": "@DanielB&#246;rg Please note that this is something completely different than the URL unquoting done in <a href=\"https://stackoverflow.com/a/51528260/3767239\">this answer</a>. Here the hex strings you specified in the OP are taken as such and transformed to corresponding base 10 integer strings. Compare the results to make sure if it really is what you want."}], "tags": [], "owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "is_accepted": false, "score": 0, "last_activity_date": 1532556225, "creation_date": 1532556225, "answer_id": 51528331, "question_id": 51528213, "link": "https://stackoverflow.com/questions/51528213/how-to-decode-hex-values-from-a-string-in-python/51528331#51528331", "title": "How to decode hex values from a string in python", "body": "<p>You can use regular expressions for that:</p>\n\n<pre><code>re.sub(\n    r'%([A-F0-9]{4,14})',\n    lambda m: str(int(m.groups()[0], 16)),\n    encoded_string\n)\n</code></pre>\n\n<p>Though I'm not sure if you just want to do URL decoding?</p>\n"}], "owner": {"reputation": 1, "user_id": 9431275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ywqyT.jpg?s=128&g=1", "display_name": "Daniel B&#246;rg", "link": "https://stackoverflow.com/users/9431275/daniel-b%c3%b6rg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1532556225, "creation_date": 1532555564, "question_id": 51528213, "link": "https://stackoverflow.com/questions/51528213/how-to-decode-hex-values-from-a-string-in-python", "title": "How to decode hex values from a string in python", "body": "<p>I am trying to decode the hex values inside my string so at the end I have one \"readable\" string.</p>\n\n<p>For example:</p>\n\n<pre><code>encoded_string = 'videoplayback%253Fexpire%253D1532566750%2526mime%253Dvideo%25252Fmp4%2526key%253Dyt6%2526mt%253D1532544983%2526fvip%253D5%2526i'\n</code></pre>\n\n<p>Each hex value is indicated by a %-symbol and the length of the value can differentiate. \nWhat I tried is to decode the string manually:</p>\n\n<pre><code>encoded_string = encoded_string.replace('%253A', '\\x25\\x3A')\nencoded_string = encoded_string.replace('%252F', '\\x25\\x2F')\nencoded_string = encoded_string.replace('%253F', '\\x25\\x3F')\nencoded_string = encoded_string.replace('%253D1532566750', '\\x25\\x3D\\x15\\x32\\x56\\x67\\x50')\n</code></pre>\n\n<p>Now I need help with a function that is able to find the hex values and decode them. </p>\n\n<p><em>Thank you guys!</em></p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1532555785, "post_id": 51528188, "comment_id": 90025028, "body": "This code doesn\u2019t make any sense. Assigning a new value to <code>self</code> just rebinds the local variable <code>self</code> to another object for the rest of this function. So now, you\u2019re calling <code>self.key = value</code> on that other object, which fails. But if it didn\u2019t fail, you still wouldn\u2019t have done anything to the <code>MySocket</code> you\u2019re supposed to be initializing, but instead to the other object you rebound <code>self</code> to."}], "answers": [{"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 2, "last_activity_date": 1532558106, "last_edit_date": 1532558106, "creation_date": 1532557750, "answer_id": 51528550, "question_id": 51528188, "link": "https://stackoverflow.com/questions/51528188/how-to-init-mysocket-object-with-standard-socket-object/51528550#51528550", "title": "How to init &#39;MySocket&#39; object with standard socket object?", "body": "<p>If <code>MySocket</code> is a subclass of <code>socket</code>, then a <code>MySocket</code> instance is a <code>socket</code> instance; it can't become a different <code>socket</code> instance, nor can you change another <code>socket</code> instance into a <code>MySocket</code> if it wasn't one already.<sup>1</sup></p>\n\n<p>Just assigning <code>self = socket_obj</code> doesn't do anything useful. <code>self</code> is just a local variable inside the <code>__init__</code> method. So, for the rest of the body of that method, when you do something to <code>self</code>, you're doing it to <code>socket_obj</code> instead of to your actual self. Assigning to its <code>key</code> attribute fails, as you saw. But, even if it didn't fail, all you would have done would be to modify <code>socket_obj</code>, while leaving yourself basically uninitialized.</p>\n\n<p>There are two possible things that <em>do</em> make sense here, however.</p>\n\n<hr>\n\n<p>First, instead of <em>being</em> a <code>socket</code>, your <code>MySocket</code> can <em>own</em> a <code>socket</code>, and provide the same interface as the <code>socket</code> type by delegating calls to its owned <code>socket</code>. Then, you can easily choose whether to own a newly-created socket, or one that was passed in. Something like this:</p>\n\n<pre><code>class MySocket:\n    def __init__(self, socket_obj = None):\n        if socket_obj is None:\n            socket_obj = socket.socket(self, family = sock.AF_INET, type = sock.SOCK_STREAM)\n        self._socket_obj = socket_obj\n        self.key = 'value'\n    def accept(self):\n        addr, s = self._socket_obj.accept()\n        return addr, MySocket(s)\n    def __getattr__(self, name):\n        if name.startswith('_'):\n            raise AttributeError(name)\n        return getattr(self._socket_obj, name)\n</code></pre>\n\n<p>Writing explicit delegators (whether manually, or by looping over <code>inspect.getmembers(socket.socket)</code> and creating them programmatically) is probably a better design here than <code>__getattr__</code>, but this gets the idea across.</p>\n\n<hr>\n\n<p>The other option is to to do effectively what <a href=\"https://docs.python.org/3/library/ssl.html#ssl.SSLSocket\" rel=\"nofollow noreferrer\"><code>ssl.SSLSocket</code></a> does.</p>\n\n<p>Socket objects are basically just a thin wrapper around a file descriptor. You can call <a href=\"https://docs.python.org/3/library/socket.html#socket.socket.detach\" rel=\"nofollow noreferrer\"><code>detach</code></a> on a socket to steal its fd, and then you can pass that fd into the <a href=\"https://docs.python.org/3/library/socket.html#socket.socket\" rel=\"nofollow noreferrer\"><code>socket</code></a> initializer:</p>\n\n<pre><code>class MySocket(sock.socket):\n    def __init__(self, socket_obj=None):\n        if socket_obj is None:\n            super().__init__(family=sock.AF_INET, type=sock.SOCK_STREAM)\n        else:\n            super().__init__(fileno=socket_obj.detach())\n        self.key = 'value'\n    def accept(self):\n        addr, s = super().accept()\n        return addr, MySocket(s)\n</code></pre>\n\n<p>What <code>SSLSocket</code> actually does is more complicated (although it's not <em>that</em> complicated, and it may be worth reading <a href=\"https://github.com/python/cpython/blob/3.7/Lib/ssl.py#L781\" rel=\"nofollow noreferrer\">the source</a>).</p>\n\n<p>But also, notice that its interface is different. Stealing another socket's fd is kind of a strange thing to do in a constructor call, so instead, <code>SSLSocket(socket_obj)</code> will raise a <code>TypeError</code>, and you're instead required to use a <a href=\"https://docs.python.org/3/library/ssl.html#ssl.SSLContext.wrap_socket\" rel=\"nofollow noreferrer\"><code>wrap_socket</code></a> function. This is probably a less confusing design.</p>\n\n<p>However, if you don't need the extra complexity of having different Context objects that all wrap sockets differently, you might just want a <code>@classmethod</code> alternate constructor method, instead of an external factory function.</p>\n\n<hr>\n\n<p><sub>1. Actually, in Python, you <em>can</em> sometimes change the type of a live object, by setting its <code>__class__</code> attribute. But this is almost always a bad idea, and wanting to do so is usually a sign that your design has gone very wrong somewhere.</sub></p>\n"}], "owner": {"reputation": 3, "user_id": 10135768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3Vuk.jpg?s=128&g=1", "display_name": "Andrew Anderson", "link": "https://stackoverflow.com/users/10135768/andrew-anderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 0, "accepted_answer_id": 51528550, "answer_count": 1, "score": 0, "last_activity_date": 1533529921, "creation_date": 1532555434, "last_edit_date": 1533529921, "question_id": 51528188, "link": "https://stackoverflow.com/questions/51528188/how-to-init-mysocket-object-with-standard-socket-object", "title": "How to init &#39;MySocket&#39; object with standard socket object?", "body": "<p>I want to write my own socket class for server-client talking with RSA and AES encryption, and for server side I need to overload accept() function to return not (socket, address) pair, but (MySocket, address). So that's why I need MySocket class to be initializable with another socket.</p>\n\n<p>This is simplified version of my code:</p>\n\n<pre><code>import socket as sock\n\nclass MySocket(sock.socket):\n  def __init__(self, socket_obj = None):\n    if socket_obj == None:\n      sock.socket.__init__(self, family = sock.AF_INET, type = sock.SOCK_STREAM)\n    else:\n      assert(socket_obj.family == sock.AF_INET and socket_obj.type == sock.SOCK_STREAM)\n      self = socket_obj\n\n    self.key = 'value'\n\nmy_socket = MySocket() # works fine\n\nprint('First worked')\n\nmy_socket = MySocket(socket_obj = sock.socket()) # falls with error\n\nprint('Second also worked')\n</code></pre>\n\n<p>And after executing this code, I get an error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"./pyoverflow.py\", line 19, in &lt;module&gt;\n    my_socket = MySocket(socket_obj = sock.socket()) # falls with error\n  File \"./pyoverflow.py\", line 13, in __init__\n    self.key = 'value'\nAttributeError: 'socket' object has no attribute 'key'\n</code></pre>\n\n<p>As I understand, the problem is in the #9 string <code>self = socket_obj</code>, but googling the error didn't give anything.</p>\n"}, {"tags": ["python", "python-3.x", "tkinter", "copy-paste", "shutil"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 3, "creation_date": 1532555142, "post_id": 51528103, "comment_id": 90024815, "body": "You want <code>row.strip()</code> instead of <code>row.strip</code>.  Note the parentheses."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 1, "creation_date": 1532555226, "post_id": 51528103, "comment_id": 90024847, "body": "<code>for files in folderPath:</code> isn&#39;t doing what you think. You want <code>for file in os.listdir(folderPath):</code> instead."}, {"owner": {"reputation": 77, "user_id": 7618866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-fG3CeLLShW0/AAAAAAAAAAI/AAAAAAAACaU/zFOt28wVaQA/photo.jpg?sz=128", "display_name": "JasonDL", "link": "https://stackoverflow.com/users/7618866/jasondl"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1532556108, "post_id": 51528103, "comment_id": 90025135, "body": "I changed that to <code>filesToFind.append(rowstrip())</code> and <code>for file in os.listdir(folderPath): if file in filesToFind:</code> but got the same result (no result)"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1532556913, "post_id": 51528103, "comment_id": 90025376, "body": "Update the question to contain your most recent code."}, {"owner": {"reputation": 77, "user_id": 7618866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-fG3CeLLShW0/AAAAAAAAAAI/AAAAAAAACaU/zFOt28wVaQA/photo.jpg?sz=128", "display_name": "JasonDL", "link": "https://stackoverflow.com/users/7618866/jasondl"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1532563248, "post_id": 51528103, "comment_id": 90026736, "body": "updated. Apologies still learning the best practices for Stack Overflow"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 7618866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-fG3CeLLShW0/AAAAAAAAAAI/AAAAAAAACaU/zFOt28wVaQA/photo.jpg?sz=128", "display_name": "JasonDL", "link": "https://stackoverflow.com/users/7618866/jasondl"}, "edited": false, "score": 0, "creation_date": 1532566552, "post_id": 51529275, "comment_id": 90027311, "body": "Thanks! I will give that a shot when I get to work in the morning. I was using <code>folderPath</code> earlier to get the folder I want the program to loop through and look for the files in. Looking back at it now I see your point that I was not calling it anywhere.  Thanks for the file heads up I will change that as well."}, {"owner": {"reputation": 77, "user_id": 7618866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-fG3CeLLShW0/AAAAAAAAAAI/AAAAAAAACaU/zFOt28wVaQA/photo.jpg?sz=128", "display_name": "JasonDL", "link": "https://stackoverflow.com/users/7618866/jasondl"}, "edited": false, "score": 0, "creation_date": 1532566828, "post_id": 51529275, "comment_id": 90027359, "body": "Also realized I threw the label in the wrong spot. The top code set is what was the updated code. Originally, I was not calling it but in the updated code I was with <code>for file in os.listdir(folderPath)</code>. Thoughts on why that might not work?"}, {"owner": {"reputation": 21554, "user_id": 1329296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1026699dbf4140d3fc7262842428e808?s=128&d=identicon&r=PG", "display_name": "lenik", "link": "https://stackoverflow.com/users/1329296/lenik"}, "reply_to_user": {"reputation": 77, "user_id": 7618866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-fG3CeLLShW0/AAAAAAAAAAI/AAAAAAAACaU/zFOt28wVaQA/photo.jpg?sz=128", "display_name": "JasonDL", "link": "https://stackoverflow.com/users/7618866/jasondl"}, "edited": false, "score": 1, "creation_date": 1532572190, "post_id": 51529275, "comment_id": 90028423, "body": "@JasonLeach <code>os.listdir()</code> gives you just file names (without path). you have to supply path to be able to copy or open or do anything with the files. hence, <code>os.path.join( path, name)</code>"}, {"owner": {"reputation": 77, "user_id": 7618866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-fG3CeLLShW0/AAAAAAAAAAI/AAAAAAAACaU/zFOt28wVaQA/photo.jpg?sz=128", "display_name": "JasonDL", "link": "https://stackoverflow.com/users/7618866/jasondl"}, "edited": false, "score": 0, "creation_date": 1532617006, "post_id": 51529275, "comment_id": 90051371, "body": "I tested it this morning and with no result. I added <code>print(name)</code> after the <code>name = </code> statement but it tells me name is not defined. thought on how I could print that out so I can attempt to debug?"}, {"owner": {"reputation": 21554, "user_id": 1329296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1026699dbf4140d3fc7262842428e808?s=128&d=identicon&r=PG", "display_name": "lenik", "link": "https://stackoverflow.com/users/1329296/lenik"}, "reply_to_user": {"reputation": 77, "user_id": 7618866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-fG3CeLLShW0/AAAAAAAAAAI/AAAAAAAACaU/zFOt28wVaQA/photo.jpg?sz=128", "display_name": "JasonDL", "link": "https://stackoverflow.com/users/7618866/jasondl"}, "edited": false, "score": 0, "creation_date": 1532618355, "post_id": 51529275, "comment_id": 90052249, "body": "@JasonLeach please, show the code, I don&#39;t believe <code>name</code> could be empty right after the assignment."}, {"owner": {"reputation": 21554, "user_id": 1329296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1026699dbf4140d3fc7262842428e808?s=128&d=identicon&r=PG", "display_name": "lenik", "link": "https://stackoverflow.com/users/1329296/lenik"}, "reply_to_user": {"reputation": 77, "user_id": 7618866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-fG3CeLLShW0/AAAAAAAAAAI/AAAAAAAACaU/zFOt28wVaQA/photo.jpg?sz=128", "display_name": "JasonDL", "link": "https://stackoverflow.com/users/7618866/jasondl"}, "edited": false, "score": 0, "creation_date": 1532618435, "post_id": 51529275, "comment_id": 90052303, "body": "@JasonLeach <code>print (&quot;file does not exist&quot; &amp; name)</code> -- you need a comma <code>,</code> instead of ampersand <code>&amp;</code> here"}, {"owner": {"reputation": 77, "user_id": 7618866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-fG3CeLLShW0/AAAAAAAAAAI/AAAAAAAACaU/zFOt28wVaQA/photo.jpg?sz=128", "display_name": "JasonDL", "link": "https://stackoverflow.com/users/7618866/jasondl"}, "edited": false, "score": 0, "creation_date": 1532620252, "post_id": 51529275, "comment_id": 90053495, "body": "Code updated - I tried it in two places (see above) and in both cases it says it is not defined. Is it possible that the <code>os.path.join</code> needs a <code>` between </code>folderPath, target&#39; ? Sorry new to <code>os.</code> and python in general."}, {"owner": {"reputation": 21554, "user_id": 1329296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1026699dbf4140d3fc7262842428e808?s=128&d=identicon&r=PG", "display_name": "lenik", "link": "https://stackoverflow.com/users/1329296/lenik"}, "reply_to_user": {"reputation": 77, "user_id": 7618866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-fG3CeLLShW0/AAAAAAAAAAI/AAAAAAAACaU/zFOt28wVaQA/photo.jpg?sz=128", "display_name": "JasonDL", "link": "https://stackoverflow.com/users/7618866/jasondl"}, "edited": false, "score": 0, "creation_date": 1532620391, "post_id": 51529275, "comment_id": 90053589, "body": "@JasonLeach <code>print name</code> statement should have the same indentation as the previous <code>name =</code> line, otherwise it won&#39;t work. indentation is quite important in python."}, {"owner": {"reputation": 77, "user_id": 7618866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-fG3CeLLShW0/AAAAAAAAAAI/AAAAAAAACaU/zFOt28wVaQA/photo.jpg?sz=128", "display_name": "JasonDL", "link": "https://stackoverflow.com/users/7618866/jasondl"}, "reply_to_user": {"reputation": 21554, "user_id": 1329296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1026699dbf4140d3fc7262842428e808?s=128&d=identicon&r=PG", "display_name": "lenik", "link": "https://stackoverflow.com/users/1329296/lenik"}, "edited": false, "score": 0, "creation_date": 1532621078, "post_id": 51529275, "comment_id": 90054014, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/176815/discussion-between-jason-leach-and-lenik\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 21554, "user_id": 1329296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1026699dbf4140d3fc7262842428e808?s=128&d=identicon&r=PG", "display_name": "lenik", "link": "https://stackoverflow.com/users/1329296/lenik"}, "is_accepted": false, "score": 1, "last_activity_date": 1532563568, "creation_date": 1532563568, "answer_id": 51529275, "question_id": 51528103, "link": "https://stackoverflow.com/questions/51528103/python-copying-specific-files-from-a-list-into-a-new-folder/51529275#51529275", "title": "Python - copying specific files from a list into a new folder", "body": "<p>The last part of your program might work better this way:</p>\n\n<pre><code>for file in files:\n    if file in filesToFind:\n        name = os.path.join( folderPath, file )\n        if os.path.isfile( name ) :\n            shutil.copy( name, destination)\n        else :\n            print 'file does not exist', name\n</code></pre>\n\n<p>Otherwise it's pretty much unknown where you copy your files from, current folder, maybe, and why did you need to input <code>folderPath</code> earlier, if you don't use it.</p>\n\n<p>btw, <code>file</code> is a reserved word in python, I'd recommend to use another name for your variable, that does not coincide with python reserved words.</p>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 7618866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-fG3CeLLShW0/AAAAAAAAAAI/AAAAAAAACaU/zFOt28wVaQA/photo.jpg?sz=128", "display_name": "JasonDL", "link": "https://stackoverflow.com/users/7618866/jasondl"}, "edited": false, "score": 0, "creation_date": 1532615281, "post_id": 51530287, "comment_id": 90050230, "body": "I think I thought I was trying to say: &quot;for each <code>file</code> (renamed <code>target</code>) name in <code>filesToFind</code> list from <code>filePath</code>, look in <code>folderPath</code> folder for the file names and copy and paste them to the <code>destination</code> folder.&quot;   In regards to <code>files</code> I wanted to look at all the <code>file</code> names in <code>filePath</code> and loop through the folder. If that makes sense? I removed it and updated the code above - question assuming the <code>for file in</code> loop is correct, should it be <code>for file in filePath</code> or <code>for file in folderPath</code>?"}], "tags": [], "owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "is_accepted": false, "score": 1, "last_activity_date": 1532573393, "creation_date": 1532573393, "answer_id": 51530287, "question_id": 51528103, "link": "https://stackoverflow.com/questions/51528103/python-copying-specific-files-from-a-list-into-a-new-folder/51530287#51530287", "title": "Python - copying specific files from a list into a new folder", "body": "<p>Your last section has a problem.</p>\n\n<pre><code>for file in os.listdir(folderPath): \n    for file in files:\n        if file in filesToFind:\n            shutil.copy(file, destination)\n</code></pre>\n\n<p>The first <code>for</code> loops over each filename in the directory, which is perfectly understandable.</p>\n\n<p>The second <code>for</code> is an error, because <code>files</code> does not exist.  What did you intend it to do?</p>\n"}, {"comments": [{"owner": {"reputation": 1048, "user_id": 947509, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/ba8e2f924a714c9a11e3226f1b51887f?s=128&d=identicon&r=PG", "display_name": "ulyssis2", "link": "https://stackoverflow.com/users/947509/ulyssis2"}, "edited": false, "score": 0, "creation_date": 1598387355, "post_id": 51621897, "comment_id": 112441631, "body": "last line should be: print( filename, &quot;is not copied&quot;)"}], "tags": [], "owner": {"reputation": 77, "user_id": 7618866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-fG3CeLLShW0/AAAAAAAAAAI/AAAAAAAACaU/zFOt28wVaQA/photo.jpg?sz=128", "display_name": "JasonDL", "link": "https://stackoverflow.com/users/7618866/jasondl"}, "is_accepted": true, "score": 1, "last_activity_date": 1607209026, "last_edit_date": 1607209026, "creation_date": 1533070382, "answer_id": 51621897, "question_id": 51528103, "link": "https://stackoverflow.com/questions/51528103/python-copying-specific-files-from-a-list-into-a-new-folder/51621897#51621897", "title": "Python - copying specific files from a list into a new folder", "body": "<p>Code that works -</p>\n<pre><code>import os\nimport shutil\nfrom tkinter import *\nfrom tkinter import filedialog\n\nroot = Tk()\nroot.withdraw()\n\nfilePath = filedialog.askopenfilename()\nfolderPath = filedialog.askdirectory()\ndestination = filedialog.askdirectory()\n\n# First, create a list and populate it with the files\n\n# you want to find (1 file per row in myfiles.txt)\n\nfilesToFind = []\nwith open(filePath, &quot;r&quot;) as fh:\n    for row in fh:\n        filesToFind.append(row.strip())\n\n# Had an issue here but needed to define and then reference the filename variable itself\nfor filename in os.listdir(folderPath):\n    if filename in filesToFind:\n        filename = os.path.join(folderPath, filename)\n        shutil.copy(filename, destination)\n    else:\n        print(&quot;file does not exist: filename&quot;)\n</code></pre>\n<p>Note - Need to included the file extension in the file being read. Thanks to @lenik and @John Gordon for the help getting there! Time to refine it to make it more userfriendly</p>\n"}], "owner": {"reputation": 77, "user_id": 7618866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-fG3CeLLShW0/AAAAAAAAAAI/AAAAAAAACaU/zFOt28wVaQA/photo.jpg?sz=128", "display_name": "JasonDL", "link": "https://stackoverflow.com/users/7618866/jasondl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7580, "favorite_count": 1, "accepted_answer_id": 51621897, "answer_count": 3, "score": 2, "last_activity_date": 1607209026, "creation_date": 1532554950, "last_edit_date": 1532620973, "question_id": 51528103, "link": "https://stackoverflow.com/questions/51528103/python-copying-specific-files-from-a-list-into-a-new-folder", "title": "Python - copying specific files from a list into a new folder", "body": "<p>I am trying to get my program to read a list of names from a file (say .txt), then search for those in a selected folder and copy and paste those files to another selected folder. My program runs without errors but does not do anything:</p>\n\n<p><strong>Code - updated:</strong></p>\n\n<pre><code>import os, shutil\nfrom tkinter import filedialog\nfrom tkinter import *\n\n\nroot = Tk()\nroot.withdraw()\n\nfilePath = filedialog.askopenfilename()\nfolderPath = filedialog.askdirectory()\ndestination = filedialog.askdirectory()\n\nfilesToFind = []\nwith open(filePath, \"r\") as fh:\n    for row in fh:\n        filesToFind.append(row.strip())\n\n#Added the print statements below to check that things were feeding correctly\nprint(filesToFind)\nprint(folderPath)\nprint(destination)\n\n#The issue seems to be with the copy loop below:    \nfor target in folderPath:\n    if target in filesToFind:\n        name = os.path.join(folderPath,target)\n        print(name)\n        if os.path.isfile(name):\n            shutil.copy(name, destination)\n        else:\n            print (\"file does not exist\", name)\n        print(name)\n</code></pre>\n\n<p>Update - runs without errors but does not move any files.</p>\n"}, {"tags": ["python", "arrays", "string"], "comments": [{"owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1532555144, "post_id": 51528097, "comment_id": 90024817, "body": "<code>np.loadtxt(line)</code> might be your problem. The first argument is supposed to be a file name. What is that supposed to be doing?"}, {"owner": {"reputation": 338, "user_id": 1914225, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ba283e2e00fe849a73fd4a7c8f74b5f4?s=128&d=identicon&r=PG", "display_name": "Raymond gsh", "link": "https://stackoverflow.com/users/1914225/raymond-gsh"}, "reply_to_user": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1532555926, "post_id": 51528097, "comment_id": 90025074, "body": "I know it&#39;s the problem but I dunno why it doesn&#39;t work. I believe the first term can also be a stream."}, {"owner": {"reputation": 338, "user_id": 1914225, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ba283e2e00fe849a73fd4a7c8f74b5f4?s=128&d=identicon&r=PG", "display_name": "Raymond gsh", "link": "https://stackoverflow.com/users/1914225/raymond-gsh"}, "reply_to_user": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1532556022, "post_id": 51528097, "comment_id": 90025100, "body": "I want to read the textfile into an array using numpy. I wanna skip making python arrays."}, {"owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1532556288, "post_id": 51528097, "comment_id": 90025185, "body": "You&#39;re not giving it either. You&#39;re just passing in a string."}], "answers": [{"comments": [{"owner": {"reputation": 338, "user_id": 1914225, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ba283e2e00fe849a73fd4a7c8f74b5f4?s=128&d=identicon&r=PG", "display_name": "Raymond gsh", "link": "https://stackoverflow.com/users/1914225/raymond-gsh"}, "edited": false, "score": 0, "creation_date": 1532560852, "post_id": 51528575, "comment_id": 90026259, "body": "It would be great if you put some comments on how you defined the regexp."}], "tags": [], "owner": {"reputation": 339, "user_id": 8853057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a19bb824882c7c6fe2099af173a61085?s=128&d=identicon&r=PG&f=1", "display_name": "supercheval", "link": "https://stackoverflow.com/users/8853057/supercheval"}, "is_accepted": true, "score": 0, "last_activity_date": 1532557936, "creation_date": 1532557936, "answer_id": 51528575, "question_id": 51528097, "link": "https://stackoverflow.com/questions/51528097/reading-a-file-from-text-file-using-numpy/51528575#51528575", "title": "reading a file from text file using numpy", "body": "<p>I would suggest you to use a regex instead, something like:</p>\n\n<pre><code>import numpy as np\nclass mol:\n\n    def __init__(self):\n        self.masses = {'H': 1, 'D': 2, 'C': 12, 'O': 16}\n\n    def read_xyz(self, filename):\n        self.filename = filename\n        regexp = r'\\s+\\w+' + r'\\s+([-.0-9]+)' * 3 + r'\\s*\\n'\n        data = np.fromregex(self.filename, regexp, dtype='f')\n        print(data)\n\nif __name__ == \"__main__\":\n    test = mol()\n    test.read_xyz('benz.xyz')\n</code></pre>\n\n<p>In this case, I obtained:</p>\n\n<pre><code>[[ 0.        0.        0.      ]\n [ 0.        0.        1.4     ]\n [ 1.212436  0.        2.1     ]\n [ 2.424871  0.        1.4     ]\n [ 2.424871  0.        0.      ]\n [ 1.212436  0.       -0.7     ]\n [-0.943102  0.        1.9445  ]\n [ 1.212436  0.        3.189   ]\n [ 3.367973  0.        1.9445  ]\n [ 3.367973  0.       -0.5445  ]\n [ 1.212436  0.       -1.789   ]\n [-0.943102  0.       -0.5445  ]]\n</code></pre>\n\n<p>You need to modify the regex if you want to keep the first column with the character.</p>\n"}], "owner": {"reputation": 338, "user_id": 1914225, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ba283e2e00fe849a73fd4a7c8f74b5f4?s=128&d=identicon&r=PG", "display_name": "Raymond gsh", "link": "https://stackoverflow.com/users/1914225/raymond-gsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 51528575, "answer_count": 1, "score": 0, "last_activity_date": 1532557936, "creation_date": 1532554906, "question_id": 51528097, "link": "https://stackoverflow.com/questions/51528097/reading-a-file-from-text-file-using-numpy", "title": "reading a file from text file using numpy", "body": "<p>I have a text file which is rather simple, I want to read this using numpy.I need to read the numbers in the rows with more than 2 columns where the line doesn't start with a \"#\".</p>\n\n<pre><code>   12\n\n C     0.000000     0.000000     0.000000\n C     0.000000     0.000000     1.400000\n C     1.212436     0.000000     2.100000\n C     2.424871     0.000000     1.400000\n C     2.424871     0.000000     0.000000\n C     1.212436     0.000000    -0.700000\n H    -0.943102     0.000000     1.944500\n H     1.212436     0.000000     3.189000\n H     3.367973     0.000000     1.944500\n H     3.367973     0.000000    -0.544500\n H     1.212436     0.000000    -1.789000\n H    -0.943102     0.000000    -0.544500\n</code></pre>\n\n<p>I have tried the following code:</p>\n\n<pre><code>import numpy as np\nclass mol:\n\n\n\nimport numpy as np\nclass mol:\n\n    def __init__(self):\n        self.masses = {'H': 1, 'D': 2, 'C': 12, 'O': 16}\n\n    def read_xyz(self, filename):\n        self.filename = filename\n        with open(self.filename) as f:\n            for line in f:\n                if not line.startswith(\"#\") and len(line.split())&gt;3:\n                    print np.loadtxt(line)\n\nif __name__ == \"__main__\":\n    test = mol()\n    test.read_xyz('benz.xyz')\n</code></pre>\n\n<p>but my code crashes and if I print the line I get an empty line between the each row I dunno why.\nAny help will be great!</p>\n"}, {"tags": ["python", "django", "django-rest-framework"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 718054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d107fb123c726933e1effb8f4f89066e?s=128&d=identicon&r=PG", "display_name": "Maulik", "link": "https://stackoverflow.com/users/718054/maulik"}, "edited": false, "score": 0, "creation_date": 1532732073, "post_id": 51528500, "comment_id": 90099652, "body": "Thank you this is what I was looking for."}, {"owner": {"reputation": 2460, "user_id": 2715819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/865993e49f832e0d08673bb6ae8f24b7?s=128&d=identicon&r=PG", "display_name": "RishiG", "link": "https://stackoverflow.com/users/2715819/rishig"}, "reply_to_user": {"reputation": 33, "user_id": 718054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d107fb123c726933e1effb8f4f89066e?s=128&d=identicon&r=PG", "display_name": "Maulik", "link": "https://stackoverflow.com/users/718054/maulik"}, "edited": false, "score": 0, "creation_date": 1532737120, "post_id": 51528500, "comment_id": 90100547, "body": "Excellent!  Glad it helped.  When you get a chance, click the check mark to accept the answer."}], "tags": [], "owner": {"reputation": 2460, "user_id": 2715819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/865993e49f832e0d08673bb6ae8f24b7?s=128&d=identicon&r=PG", "display_name": "RishiG", "link": "https://stackoverflow.com/users/2715819/rishig"}, "is_accepted": true, "score": 2, "last_activity_date": 1532557489, "creation_date": 1532557489, "answer_id": 51528500, "question_id": 51528096, "link": "https://stackoverflow.com/questions/51528096/how-to-add-custom-row-level-processing-of-a-column-in-django-model-that-is-used/51528500#51528500", "title": "How to add custom row level processing of a column in Django Model that is used by Viewsets", "body": "<p>I would probably add it as a <code>SerializerMethodField</code> so that it's calculated upon request.  In fact, this is very similar to <a href=\"http://www.django-rest-framework.org/api-guide/fields/#serializermethodfield\" rel=\"nofollow noreferrer\">the example in the docs</a>.  You want something like the following (NOTE: I have not tested this, it is just a slight modification of the documented example):</p>\n\n<pre><code>from django.utils.timezone import now\nfrom rest_framework import serializers\n\nclass LicSerializer(serializers.ModelSerializer):\n    days = serializers.SerializerMethodField()\n\n    class Meta:\n        model = Lic\n\n    def get_days(self, obj):\n        cur_time = now()\n        if cur_time &gt; obj.expire:\n            return 0\n        return (obj.expire - cur_time).days\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1857, "user_id": 1366989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c67512f4b6b2137fa70111e66ceb76a?s=128&d=identicon&r=PG", "display_name": "MrName", "link": "https://stackoverflow.com/users/1366989/mrname"}, "is_accepted": false, "score": 1, "last_activity_date": 1532571413, "creation_date": 1532571413, "answer_id": 51530068, "question_id": 51528096, "link": "https://stackoverflow.com/questions/51528096/how-to-add-custom-row-level-processing-of-a-column-in-django-model-that-is-used/51530068#51530068", "title": "How to add custom row level processing of a column in Django Model that is used by Viewsets", "body": "<p>@RishiG has a good solution. As an alternative, you could also make a model property.</p>\n\n<pre><code>class Lics(models.Model):\n    files_id = models.IntegerField(blank=True, null=True)\n    seqno = models.IntegerField(blank=True, null=True)\n    expire = models.TextField(blank=True)\n\n    @property\n    def days(self):\n        // calculation code goes here\n</code></pre>\n\n<p>Then, you just include \"days\" in the \"fields\" argument of your serializer.</p>\n\n<pre><code>class LicSerializer(serializers.ModelSerializer):\n\nclass Meta:\n    model = Lic\n    fields = ('files_id', 'seqno', 'expire', 'days')\n</code></pre>\n\n<p>I generally decide on my approach based on WHERE I want to be able to access this data. For example, if I might want to operate directly on the <code>days</code> property of a model instance I put it in the model. If I only care about bubbling this data up in a view, I put it in the serializer.</p>\n"}], "owner": {"reputation": 33, "user_id": 718054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d107fb123c726933e1effb8f4f89066e?s=128&d=identicon&r=PG", "display_name": "Maulik", "link": "https://stackoverflow.com/users/718054/maulik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 51528500, "answer_count": 2, "score": 0, "last_activity_date": 1532571413, "creation_date": 1532554906, "question_id": 51528096, "link": "https://stackoverflow.com/questions/51528096/how-to-add-custom-row-level-processing-of-a-column-in-django-model-that-is-used", "title": "How to add custom row level processing of a column in Django Model that is used by Viewsets", "body": "<p>Here is my Model for eg. : </p>\n\n<pre><code>class Lics(models.Model):\n    files_id = models.IntegerField(blank=True, null=True)\n    seqno = models.IntegerField(blank=True, null=True)\n    expire = models.TextField(blank=True)\n</code></pre>\n\n<p>the field 'expire' comes with a date. I have a function that does delta from 'now' when the api is called. How and where do I add an extra field in the  ViewSet when calling Lics.objects.all()  that has is added as a 4th field which shows 'days' = 4 for eg. if license is expiring 4 days from now.</p>\n\n<p>Expected output :  <code>[{files_id:1, seqno:2, expire:'4-jan-2019', 'days':4 }]</code></p>\n"}, {"tags": ["python", "python-3.x", "python-2.7", "pandas", "python-3.5"], "comments": [{"owner": {"reputation": 1518, "user_id": 10000141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac09f6a889c1f8aa3cc060d30be17b7?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/10000141/joel"}, "edited": false, "score": 0, "creation_date": 1532711705, "post_id": 51528081, "comment_id": 90092177, "body": "Why is this tagged with python-3.x, python-3.5, python-2.7, and python?"}], "answers": [{"tags": [], "owner": {"reputation": 986, "user_id": 2271478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6d2741f690d245b2786ac0f6e8dde8?s=128&d=identicon&r=PG", "display_name": "xyzjayne", "link": "https://stackoverflow.com/users/2271478/xyzjayne"}, "is_accepted": true, "score": 2, "last_activity_date": 1532558289, "creation_date": 1532558289, "answer_id": 51528618, "question_id": 51528081, "link": "https://stackoverflow.com/questions/51528081/update-entire-excel-row-in-panda/51528618#51528618", "title": "Update entire excel row in panda", "body": "<p>You need to create a row not a column.</p>\n\n<pre><code>df2 = pd.DataFrame.from_dict({'Data': [13, 24, 35, 46]},orient = 'index')\n</code></pre>\n"}], "owner": {"reputation": 265, "user_id": 9488647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7fbea9adcfaca6e753f91574bb66e6b?s=128&d=identicon&r=PG&f=1", "display_name": "HeelMega", "link": "https://stackoverflow.com/users/9488647/heelmega"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 1, "accepted_answer_id": 51528618, "answer_count": 1, "score": 1, "last_activity_date": 1532558289, "creation_date": 1532554817, "last_edit_date": 1532554840, "question_id": 51528081, "link": "https://stackoverflow.com/questions/51528081/update-entire-excel-row-in-panda", "title": "Update entire excel row in panda", "body": "<p>I am trying to parse an excel file and change the data currently in the excel file. The issue i m running into is that it is replacing it vertically. I need it to replace it horizontally starting from the given row and column</p>\n\n<pre><code>import pandas as pd\nfrom openpyxl import load_workbook\n\nfn = 'test.xlsx'\n\ndf = pd.read_excel(fn, header=None)\ndf2 = pd.DataFrame({'Data': [13, 24, 35, 46]})\n\nwriter = pd.ExcelWriter(fn, engine='openpyxl')\nbook = load_workbook(fn)\nwriter.book = book\nwriter.sheets = dict((ws.title, ws) for ws in book.worksheets)\n\ndf.to_excel(writer, sheet_name='Sheet1', header=None, index=False)\ndf2.to_excel(writer, sheet_name='Sheet1', header=None, index=False,\n             startcol=10,startrow=6)\n\nwriter.save()\n</code></pre>\n"}, {"tags": ["python", "list", "pandas", "dataframe", "concat"], "answers": [{"tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": true, "score": 3, "last_activity_date": 1532554816, "creation_date": 1532554816, "answer_id": 51528079, "question_id": 51528065, "link": "https://stackoverflow.com/questions/51528065/how-to-select-dataframes-that-only-have-6-columns-from-a-list/51528079#51528079", "title": "How to select dataframes that only have 6 columns from a list", "body": "<p>IIUC</p>\n\n<pre><code>l = [df for df in dfs if df.columns.size == 6]\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>pd.concat(l)\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 10135858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e587a0d90dd773373db80c6e0f466ad1?s=128&d=identicon&r=PG&f=1", "display_name": "rizzickk", "link": "https://stackoverflow.com/users/10135858/rizzickk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 51528079, "answer_count": 1, "score": 1, "last_activity_date": 1532554816, "creation_date": 1532554738, "last_edit_date": 1532554765, "question_id": 51528065, "link": "https://stackoverflow.com/questions/51528065/how-to-select-dataframes-that-only-have-6-columns-from-a-list", "title": "How to select dataframes that only have 6 columns from a list", "body": "<p>I have a list of dataframes varying in columns. I want to select only the dataframes that have specifically 6 columns only and concatenate.</p>\n\n<pre><code>df=pd.DataFrame(list, columns=['0'])\n</code></pre>\n\n<p>This gives me a column from every dataframe in the list.. </p>\n"}, {"tags": ["python", "kivy", "kivy-language"], "comments": [{"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1532613044, "post_id": 51528045, "comment_id": 90048584, "body": "I cannot get the code you have provided to run. Please provide <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable code</a>."}, {"owner": {"reputation": 3, "user_id": 10116227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/543ae0b6615470c35abce98669295a37?s=128&d=identicon&r=PG&f=1", "display_name": "jack041", "link": "https://stackoverflow.com/users/10116227/jack041"}, "reply_to_user": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1532637791, "post_id": 51528045, "comment_id": 90062191, "body": "It does run, the person below gave an answer so they got the code to run, no idea why you could not."}, {"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1532643064, "post_id": 51528045, "comment_id": 90064116, "body": "Compare your post to their answer. They reformatted your code to make it work."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10116227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/543ae0b6615470c35abce98669295a37?s=128&d=identicon&r=PG&f=1", "display_name": "jack041", "link": "https://stackoverflow.com/users/10116227/jack041"}, "edited": false, "score": 0, "creation_date": 1532638736, "post_id": 51542040, "comment_id": 90062549, "body": "There is one issue some times if I click the button many times it allows me to bypass the login and go to that screen but, only for one button and its random what one it allows me to bypass the login screen. Why is this and is there a way to fix it?"}, {"owner": {"reputation": 13781, "user_id": 6366098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xw9V6.png?s=128&g=1", "display_name": "ikolim", "link": "https://stackoverflow.com/users/6366098/ikolim"}, "reply_to_user": {"reputation": 3, "user_id": 10116227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/543ae0b6615470c35abce98669295a37?s=128&d=identicon&r=PG&f=1", "display_name": "jack041", "link": "https://stackoverflow.com/users/10116227/jack041"}, "edited": false, "score": 0, "creation_date": 1532643373, "post_id": 51542040, "comment_id": 90064204, "body": "@jack041: I tried clicking many times on any ActionButtons and I was not able to bypass login with my example. Could you please provide sequence of steps in order for me to recreate the problem? Please update your post with the latest codes. Thank you."}, {"owner": {"reputation": 3, "user_id": 10116227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/543ae0b6615470c35abce98669295a37?s=128&d=identicon&r=PG&f=1", "display_name": "jack041", "link": "https://stackoverflow.com/users/10116227/jack041"}, "edited": false, "score": 0, "creation_date": 1532665365, "post_id": 51542040, "comment_id": 90068750, "body": "All I do is click one of the buttons over and over again and it eventually lets me go to that screen."}, {"owner": {"reputation": 3, "user_id": 10116227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/543ae0b6615470c35abce98669295a37?s=128&d=identicon&r=PG&f=1", "display_name": "jack041", "link": "https://stackoverflow.com/users/10116227/jack041"}, "edited": false, "score": 0, "creation_date": 1532665555, "post_id": 51542040, "comment_id": 90068788, "body": "Click one button many times if it does not do it go to the next, some times it even lets me go to more then just one of the screens."}, {"owner": {"reputation": 3, "user_id": 10116227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/543ae0b6615470c35abce98669295a37?s=128&d=identicon&r=PG&f=1", "display_name": "jack041", "link": "https://stackoverflow.com/users/10116227/jack041"}, "edited": false, "score": 0, "creation_date": 1532665855, "post_id": 51542040, "comment_id": 90068863, "body": "For now I&#39;m using an if statement, so even if there able to get to a screen with out first logging in. It just puts them back to the login if  access_denied is true but, I would really like to get to the bottom of this issue even tho I figured out a work around."}, {"owner": {"reputation": 13781, "user_id": 6366098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xw9V6.png?s=128&g=1", "display_name": "ikolim", "link": "https://stackoverflow.com/users/6366098/ikolim"}, "reply_to_user": {"reputation": 3, "user_id": 10116227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/543ae0b6615470c35abce98669295a37?s=128&d=identicon&r=PG&f=1", "display_name": "jack041", "link": "https://stackoverflow.com/users/10116227/jack041"}, "edited": false, "score": 0, "creation_date": 1532707229, "post_id": 51542040, "comment_id": 90090095, "body": "Running the example that I provided , I am not able to recreate that problem even after clicking more than 20 times on each ActionButton in sequence or randomly."}], "tags": [], "owner": {"reputation": 13781, "user_id": 6366098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xw9V6.png?s=128&g=1", "display_name": "ikolim", "link": "https://stackoverflow.com/users/6366098/ikolim"}, "is_accepted": true, "score": 0, "last_activity_date": 1532620448, "last_edit_date": 1532620448, "creation_date": 1532617446, "answer_id": 51542040, "question_id": 51528045, "link": "https://stackoverflow.com/questions/51528045/how-to-keep-users-from-getting-past-login-screen-of-app-before-logging-in-kivy/51542040#51542040", "title": "How to keep users from getting past login screen of App before logging in Kivy", "body": "<h1>Solution</h1>\n\n<p>Use a <code>BooleanProperty</code> and <code>ActionButton</code>'s <code>disabled</code> attribute (gray out ActionButtons) to prevent users from accessing the other screens.</p>\n\n<h2>Python Code</h2>\n\n<ol>\n<li>Add BooleanProperty to import statement, <code>from kivy.properties import ObjectProperty, BooleanProperty</code></li>\n<li>Add BooleanProperty, <code>access_denied = BooleanProperty(True)</code> in <code>class Menu()</code></li>\n<li>In <code>verify_credentials()</code> method, if password matched, set <code>access_denied</code> to <code>False</code>, else set it to <code>True</code>.</li>\n</ol>\n\n<h3>Snippet</h3>\n\n<pre><code>from kivy.properties import ObjectProperty, BooleanProperty\n...\nclass Menu(BoxLayout):\n    access_denied = BooleanProperty(True)\n\n\nclass ScreenLogIn(Screen):\n\n    def verify_credentials(self):\n        try:\n            if self.ids.login.text == \"email@email.com\" and self.ids.passw.text == \"password\":\n                App.get_running_app().root.access_denied = False\n                self.manager.current = \"match\"\n            else:\n                App.get_running_app().root.access_denied = True\n                popup = Popup(title='Try again',\n                              content=Label(text='Wrong Email/Password'),\n                              size_hint=(None, None), size=(400, 400),\n                              auto_dismiss=True)\n                popup.open()\n        except Exception as e:\n            pass\n</code></pre>\n\n<h2>kv file</h2>\n\n<ol>\n<li>Check BooleanProperty, <code>access_denied</code> in each ActionButton</li>\n</ol>\n\n<h3>Snippet</h3>\n\n<pre><code>        ActionButton:\n            id: near_users\n            icon: 'icons/internet.png'\n            disabled: True if root.access_denied else False\n            on_press: root.manager.current = 'near_users'\n\n        ActionButton:\n            id: matching_bar\n            text: \"Matching\"\n            disabled: True if root.access_denied else False\n            on_press: root.manager.current= 'match'\n\n        ActionButton:\n            id: chat\n            text: \"chat\"\n            disabled: True if root.access_denied else False\n            on_press: root.manager.current = 'chats'\n\n        ActionButton:\n            id: profile\n            text: \"Profile\"\n            disabled: True if root.access_denied else False\n            on_press: root.manager.current = 'profile'\n</code></pre>\n\n<p><a href=\"https://kivy.org/docs/api-kivy.uix.screenmanager.html#basic-usage\" rel=\"nofollow noreferrer\">Screen's default property manager</a></p>\n\n<blockquote>\n  <p>Each screen has by default a property manager that gives you the\n  instance of the ScreenManager used.</p>\n</blockquote>\n\n<h1>Example</h1>\n\n<h2>main.py</h2>\n\n<pre><code>from kivy.app import App\nfrom kivy.uix.screenmanager import ScreenManager, Screen\nfrom kivy.properties import ObjectProperty, BooleanProperty\nfrom kivy.uix.boxlayout import BoxLayout\nfrom kivy.lang import Builder\nfrom kivy.uix.popup import Popup\nfrom kivy.uix.label import Label\nfrom kivy.uix.button import Button\n\n\nBuilder.load_file('main.kv')\n\n\nclass Menu(BoxLayout):\n    access_denied = BooleanProperty(True)\n\n\nclass ScreenLogIn(Screen):\n\n    def verify_credentials(self):\n        try:\n            if self.ids.login.text == \"email@email.com\" and self.ids.passw.text == \"password\":\n                App.get_running_app().root.access_denied = False\n                self.manager.current = \"match\"\n            else:\n                App.get_running_app().root.access_denied = True\n                popup = Popup(title='Try again',\n                              content=Label(text='Wrong Email/Password'),\n                              size_hint=(None, None), size=(400, 400),\n                              auto_dismiss=True)\n                popup.open()\n        except Exception as e:\n            pass\n\n\nclass ScreenNearUsers(Screen):\n\n    def on_enter(self):\n        for i in range(101):\n            button = Button(text=\"B_\" + str(i))\n            self.ids.grid.add_widget(button)\n\n\nclass ScreenMatch(Screen):\n    pass\n\n\nclass ScreenChats(Screen):\n    pass\n\n\nclass ScreenUserProfile(Screen):\n    pass\n\n\nclass Manager(ScreenManager):\n    screen_log_in = ObjectProperty(None)\n    screen_near_user = ObjectProperty(None)\n    screen_match = ObjectProperty(None)\n    screen_chats = ObjectProperty(None)\n    screen_user_profile = ObjectProperty(None)\n\n\nclass MenuApp(App):\n\n    def build(self):\n        return Menu()\n\n\nif __name__ == '__main__':\n    MenuApp().run()\n</code></pre>\n\n<h2>main.kv</h2>\n\n<pre><code>#:kivy 1.11.0\n\n&lt;Menu&gt;:\n    manager: screen_manager\n    orientation: \"vertical\"\n    id: action\n\n    ActionBar:\n        size_hint_y: 0.1\n        background_color: 0, 0, 1000, 10\n        background_normal: \"\"\n\n        ActionView:\n            ActionPrevious:\n\n            ActionButton:\n                id: near_users\n                icon: 'icons/internet.png'\n                disabled: True if root.access_denied else False\n                on_press: root.manager.current = 'near_users'\n\n            ActionButton:\n                id: matching_bar\n                text: \"Matching\"\n                disabled: True if root.access_denied else False\n                on_press: root.manager.current= 'match'\n\n            ActionButton:\n                id: chat\n                text: \"chat\"\n                disabled: True if root.access_denied else False\n                on_press: root.manager.current = 'chats'\n\n            ActionButton:\n                id: profile\n                text: \"Profile\"\n                disabled: True if root.access_denied else False\n                on_press: root.manager.current = 'profile'\n\n    Manager:\n        id: screen_manager\n\n&lt;ScreenLogIn&gt;:\n    orientation: \"vertical\"\n    id: login_screen\n    BoxLayout:\n        TextInput:\n            id: login\n        TextInput:\n            id: passw\n            password: True # hide password\n        Button:\n            text: \"Log In\"\n            on_release: root.verify_credentials()\n\n&lt;ScreenNearUsers&gt;:\n    ScrollView:\n        GridLayout:\n            id: grid\n            size_hint_y: None\n            height: self.minimum_height\n            cols: 2\n            row_default_height: '20dp'\n            row_force_default: True\n            spacing: 0, 0\n            padding: 0, 0\n\n&lt;ScreenMatch&gt;:\n    Button:\n        text:\n\n&lt;ScreenChats&gt;:\n    Button:\n        text: \"stuff3\"\n\n&lt;ScreenUserProfile&gt;:\n    Button:\n        text: \"stuff4\"\n\n&lt;Manager&gt;:\n    screen_log_in: screen_log_in\n    screen_near_users: screen_near_users\n    screen_match: screen_match\n    screen_chats: screen_chats\n    screen_user_profile: screen_user_profile\n\n    ScreenLogIn:\n        id: screen_log_in\n        name: 'login'\n\n    ScreenNearUsers:\n        id: screen_near_users\n        name: 'near_users'\n\n    ScreenMatch:\n        id: screen_match\n        name: 'match'\n\n    ScreenChats:\n        id: screen_chats\n        name: 'chats'\n\n    ScreenUserProfile:\n        id: screen_user_profile\n        name: 'profile'\n</code></pre>\n\n<h1>Output</h1>\n\n<p><a href=\"https://i.stack.imgur.com/Ztnnx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ztnnx.png\" alt=\"Img01 - ActionButton grayed out\"></a>\n<a href=\"https://i.stack.imgur.com/Mpd6g.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Mpd6g.png\" alt=\"Img02 - clicked ActionButton near_users\"></a></p>\n"}], "owner": {"reputation": 3, "user_id": 10116227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/543ae0b6615470c35abce98669295a37?s=128&d=identicon&r=PG&f=1", "display_name": "jack041", "link": "https://stackoverflow.com/users/10116227/jack041"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 51542040, "answer_count": 1, "score": 0, "last_activity_date": 1532620448, "creation_date": 1532554638, "last_edit_date": 1532555224, "question_id": 51528045, "link": "https://stackoverflow.com/questions/51528045/how-to-keep-users-from-getting-past-login-screen-of-app-before-logging-in-kivy", "title": "How to keep users from getting past login screen of App before logging in Kivy", "body": "<p>The first screen it goes to is the login screen but, I can just click any button on the Actionbar bypassing the login screen. I even thought of removing the Actionbar buttons then I could just put them back if login is successful but, I could not figure out how to call the id's of the Actionbar from the login screen class. What is the best way to keep a user from bypassing the login screen of the App?</p>\n\n<p>Python code:</p>\n\n<pre><code>from kivy.uix.behaviors import ButtonBehavior\nfrom kivy.uix.image import Image\nfrom kivy.app import App\nfrom kivy.uix.screenmanager import ScreenManager, Screen\nfrom kivy.properties import ObjectProperty\nfrom kivy.uix.boxlayout import BoxLayout\nfrom kivy.lang import Builder\nfrom kivy.clock import mainthread\nfrom kivy.uix.button import Button\nfrom kivy.uix.popup import Popup\nfrom kivy.uix.label import Label\nfrom kivy.uix.button import Button\nfrom kivy.uix.scrollview import ScrollView\n\n\nBuilder.load_file('main.kv')\n\n\nclass Menu(BoxLayout):\n    manager = ObjectProperty(None)\n\n\nclass ScreenLogIn(Screen):\n\n\n\n\n    @mainthread\n    def verify_credentials(self):\n\n\n        try:\n\n\n\n           if self.ids.login.text == \"email@email.com\" and self.ids.passw.text == \"password\":\n            self.manager.current = \"match\"\n        else:\n\n            popup = Popup(title='Try again',\n                          content=Label(text='Wrong Email/Password'),\n                          size_hint=(None, None), size=(400, 400),\n                          auto_dismiss=True)\n            popup.open()\n    except Exception as e:\n        pass\n\n\nclass ScreenNearUsers(Screen):\n\n    @mainthread\n    def on_enter(self):\n\n    for i in xrange(101):\n        button = Button(text=\"B_\" + str(i))\n        self.ids.grid.add_widget(button)\n\n\nclass ScreenMatch(Screen):\n    pass\n\n\nclass ScreenChats(Screen):\n    pass\n\n\nclass ScreenUserProfile(Screen):\n    pass\n\n\nclass Manager(ScreenManager):\n    screen_log_in = ObjectProperty(None)\n    screen_near_user = ObjectProperty(None)\n    screen_match = ObjectProperty(None)\n    screen_chats = ObjectProperty(None)\n    screen_user_profile = ObjectProperty(None)\n\n\nclass MenuApp(App):\n\n    def build(self):\n       return Menu()\n\n\nif __name__ == '__main__':\n       MenuApp().run()\n</code></pre>\n\n<p>Main kv:</p>\n\n<pre><code>&lt;Menu&gt;:\n    manager: screen_manager\n    orientation: \"vertical\"\n    id: action\nActionBar:\n    size_hint_y: 0.1\n    background_color: 0, 0, 1000, 10\n    background_normal: \"\"\n    ActionView:\n        ActionPrevious:\n        ActionButton:\n            id: near_users\n            icon: 'icons/internet.png'\n            on_press: root.manager.current = 'near_users'\n        ActionButton:\n            id: matching_bar\n            text: \"Matching\"\n            on_press: root.manager.current= 'match'\n        ActionButton:\n            id: chat\n            text: \"chat\"\n            on_press: root.manager.current = 'chats'\n        ActionButton:\n            id: profile\n            text: \"Profile\"\n            on_press: root.manager.current = 'profile'\nManager:\n    id: screen_manager\n\n&lt;ScreenLogIn&gt;:\n     orientation: \"vertical\"\n     id: login_screen\n     BoxLayout:\n\n     TextInput:\n         id: login\n     TextInput:\n         id: passw\n         password: True # hide password\n     Button:\n         text: \"Log In\"\n         on_release: root.verify_credentials()\n\n&lt;ScreenNearUsers&gt;:\n    ScrollView:\n        GridLayout:\n            id: grid\n            size_hint_y: None\n            height: self.minimum_height\n            cols: 2\n            row_default_height: '20dp'\n            row_force_default: True\n            spacing: 0, 0\n            padding: 0, 0\n\n&lt;ScreenMatch&gt;:\n    Button:\n        text:\n\n&lt;ScreenChats&gt;:\n    Button:\n        text: \"stuff3\"\n\n&lt;ScreenUserProfile&gt;:\n    Button:\n        text: \"stuff4\"\n\n&lt;Manager&gt;:\n    id: screen_manager\n    screen_log_in: screen_log_in\n    screen_near_users: screen_near_users\n    screen_match: screen_match\n    screen_chats: screen_chats\n    screen_user_profile: screen_user_profile\n\nScreenLogIn:\n    id: screen_log_in\n    name: 'login'\n    manager: screen_manager\nScreenNearUsers:\n    id: screen_near_users\n    name: 'near_users'\n    manager: screen_manager\nScreenMatch:\n    id: screen_match\n    name: 'match'\n    manager: screen_manager\nScreenChats:\n    id: screen_chats\n    name: 'chats'\n    manager: screen_manager\nScreenUserProfile:\n    id: screen_user_profile\n    name: 'profile'\n    manger: screen_manager\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "excel-formula", "tokenize", "openpyxl"], "answers": [{"comments": [{"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1532631773, "post_id": 51533198, "comment_id": 90059454, "body": "Do you know of any libraries that evaluate formulae? I&#39;d like to try comparing the performance."}, {"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "reply_to_user": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1532676812, "post_id": 51533198, "comment_id": 90072889, "body": "I think PyCell is the Python one but I&#39;ve never used it."}], "tags": [], "owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "is_accepted": false, "score": 1, "last_activity_date": 1532589841, "creation_date": 1532589841, "answer_id": 51533198, "question_id": 51528009, "link": "https://stackoverflow.com/questions/51528009/using-openpyxl-tokenizer-to-parse-excel-if-statements/51533198#51533198", "title": "using openpyxl Tokenizer to parse Excel IF statements", "body": "<p>openpyxl never evaluates formulae. The tokenizer is solely used for unpacking and reassigning shared formulae. Other libraries do exist for evaluating formulae but you are generally better off passing the file to an application such as MS Excel or OpenOffice or LibreOffice for evaluation as these contain optimisations for the calculation, including parallelisation.</p>\n"}], "owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 527, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1532589841, "creation_date": 1532554499, "last_edit_date": 1532559431, "question_id": 51528009, "link": "https://stackoverflow.com/questions/51528009/using-openpyxl-tokenizer-to-parse-excel-if-statements", "title": "using openpyxl Tokenizer to parse Excel IF statements", "body": "<p>I found <a href=\"https://openpyxl.readthedocs.io/en/stable/formula.html?highlight=Tokenizer\" rel=\"nofollow noreferrer\">this doc on Tokenizer</a>, but it doesn't say how to use the formula and actually execute it (seems pretty useless without that).</p>\n\n<p>I have some simple <code>IF</code> cases I need to handle:</p>\n\n<pre><code>formula = '''IF(size&lt;80000,size/80000*(1.85-1.65)+1.65,IF(size&lt;160000\n    (size-80000)/80000*(1.65-1.45)+1.45,IF(size&lt;280000,(size-160000)/\n    120000*(1.45-1.05)+1.05,IF(size&lt;800000,(size-280000)/520000*(1.05-0.7)+0.7,0))))'''\n\nfrom openpyxl.formula import Tokenizer\ntok = Tokenizer(formula)\n</code></pre>\n\n<p>I can see the methods for <code>tok</code>:</p>\n\n<pre><code>print([d for d in dir(tok) if '__' not in d])\n['ERROR_CODES', 'SN_RE', 'STRING_REGEXES', 'TOKEN_ENDERS', 'WSPACE_RE', '_parse', '_parse_brackets', '_parse_closer', '_parse_error', '_parse_opener', '_parse_operator', '_parse_separator', '_parse_string', '_parse_whitespace', 'assert_empty_token', 'check_scientific_notation', 'formula', 'items', 'offset', 'render', 'save_token', 'token', 'token_stack']\n</code></pre>\n\n<p>If I wanted to pass in <code>size=100</code> to this <code>tok</code> instance and execute it to get a returned result, how do I do that?</p>\n\n<p>There is the obvious way of building an AST with the parsed tokens, but I'm curious if it is possible to write the formula to a an Excel doc in memory and execute the function that way, if that is easier. I do not have an Excel doc for this. I just have lots of formula strings.</p>\n"}, {"tags": ["python", "python-3.x", "testing", "tkinter", "seconds"], "comments": [{"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 1, "creation_date": 1532554566, "post_id": 51527980, "comment_id": 90024613, "body": "Why is all of your program inside of a function? There are several issues here. One that stands out right away is the use of  <code>sleep()</code>. The sleep method will freeze tkinter and you do not need to worry about tkinter updating as the mainloop is a constant loop that updates the event loop all on its own."}, {"owner": {"reputation": 27, "user_id": 5591905, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JxJIbh0RJyY/AAAAAAAAAAI/AAAAAAAAAQw/NT4Ep2uFjvI/photo.jpg?sz=128", "display_name": "Ethan Gascoigne", "link": "https://stackoverflow.com/users/5591905/ethan-gascoigne"}, "reply_to_user": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1532698765, "post_id": 51527980, "comment_id": 90085198, "body": "@Mike-SMT It is part of a larger program, so this function gets called when somebody types something in."}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1532699431, "post_id": 51527980, "comment_id": 90085621, "body": "I still find it odd that you have a tkinter instance inside of a function. Is your main program already a tkinter instance? If so then you should use <code>Toplevel()</code> in this function instead."}, {"owner": {"reputation": 27, "user_id": 5591905, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JxJIbh0RJyY/AAAAAAAAAAI/AAAAAAAAAQw/NT4Ep2uFjvI/photo.jpg?sz=128", "display_name": "Ethan Gascoigne", "link": "https://stackoverflow.com/users/5591905/ethan-gascoigne"}, "reply_to_user": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1532700186, "post_id": 51527980, "comment_id": 90086122, "body": "@Mike-SMT No,my main program is just a program that lets you type a command and it will do it (f it knows what the command means)."}], "answers": [{"comments": [{"owner": {"reputation": 30484, "user_id": 2875563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/umbJB.jpg?s=128&g=1", "display_name": "Reblochon Masque", "link": "https://stackoverflow.com/users/2875563/reblochon-masque"}, "edited": false, "score": 0, "creation_date": 1532555799, "post_id": 51528233, "comment_id": 90025037, "body": "plus one for the testing bit"}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "reply_to_user": {"reputation": 30484, "user_id": 2875563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/umbJB.jpg?s=128&g=1", "display_name": "Reblochon Masque", "link": "https://stackoverflow.com/users/2875563/reblochon-masque"}, "edited": false, "score": 0, "creation_date": 1532555841, "post_id": 51528233, "comment_id": 90025048, "body": "@ReblochonMasque :D ty."}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1532556395, "post_id": 51528233, "comment_id": 90025231, "body": "Shame on you for numbering variable names. Those Labels should be in a list."}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "reply_to_user": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1532557380, "post_id": 51528233, "comment_id": 90025505, "body": "@Novel lol. I know but I thought the visual would be good for the OP as it seams they are new to tkinter."}, {"owner": {"reputation": 27, "user_id": 5591905, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JxJIbh0RJyY/AAAAAAAAAAI/AAAAAAAAAQw/NT4Ep2uFjvI/photo.jpg?sz=128", "display_name": "Ethan Gascoigne", "link": "https://stackoverflow.com/users/5591905/ethan-gascoigne"}, "edited": false, "score": 0, "creation_date": 1532699403, "post_id": 51528233, "comment_id": 90085606, "body": "@Mike-SMT  This isn&#39;t working for me, as the variable need to be defined before the section that follows c = 650, otherwise it gives an error. Is there a way to run read_notifications once before that?"}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "reply_to_user": {"reputation": 27, "user_id": 5591905, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JxJIbh0RJyY/AAAAAAAAAAI/AAAAAAAAAQw/NT4Ep2uFjvI/photo.jpg?sz=128", "display_name": "Ethan Gascoigne", "link": "https://stackoverflow.com/users/5591905/ethan-gascoigne"}, "edited": false, "score": 0, "creation_date": 1532699536, "post_id": 51528233, "comment_id": 90085706, "body": "It depends on how you write the code @EthanGascoigne. If you write the functions inside of the Tkinter instance it should not need the variable name from the global written first. Your example may need to include some more code so we can properly test your problem. Please take a look at this post and provide a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 27, "user_id": 5591905, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JxJIbh0RJyY/AAAAAAAAAAI/AAAAAAAAAQw/NT4Ep2uFjvI/photo.jpg?sz=128", "display_name": "Ethan Gascoigne", "link": "https://stackoverflow.com/users/5591905/ethan-gascoigne"}, "edited": false, "score": 0, "creation_date": 1532699894, "post_id": 51528233, "comment_id": 90085938, "body": "@Mike-SMT I added read_notifications() just before the c =650 bit, but it still didn&#39;t work, I don&#39;t know why?"}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "reply_to_user": {"reputation": 27, "user_id": 5591905, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JxJIbh0RJyY/AAAAAAAAAAI/AAAAAAAAAQw/NT4Ep2uFjvI/photo.jpg?sz=128", "display_name": "Ethan Gascoigne", "link": "https://stackoverflow.com/users/5591905/ethan-gascoigne"}, "edited": false, "score": 0, "creation_date": 1532703638, "post_id": 51528233, "comment_id": 90088149, "body": "@EthanGascoigne I will take a look at the pastebin when I get home tonight. I cannot open it at work due to company firewall."}], "tags": [], "owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "is_accepted": false, "score": 1, "last_activity_date": 1532555660, "creation_date": 1532555660, "answer_id": 51528233, "question_id": 51527980, "link": "https://stackoverflow.com/questions/51527980/how-to-update-tkinter-window-every-4-seconds/51528233#51528233", "title": "How to update tkinter window every 4 seconds?", "body": "<p>You code is a bit hard to re-work but here is a working example of how one can monitor a file.</p>\n\n<p>Say I have a file that contains 4 lines and we call this file <code>my_file</code>:</p>\n\n<pre><code>1 test\n2 testing\n3 more testing\n4 test again\n</code></pre>\n\n<p>All we want to do is update the labels ever 4 seconds so we can use the <code>after()</code> method to keep us going.</p>\n\n<p>Take a look at this below code.</p>\n\n<pre><code>import tkinter as tk\n\n\nwindow = tk.Tk()\nwindow.title(\"Notifications\")\nfile_to_monitor = \"./my_file.txt\"\n\ndef read_notifications():\n    with open(file_to_monitor, \"r\") as f:\n        x = f.read()\n        string_list = x.split(\"\\n\")\n\n    lbl1.config(text=string_list[0])\n    lbl2.config(text=string_list[1])\n    lbl3.config(text=string_list[2])\n    lbl4.config(text=string_list[3])\n\n    window.after(4000, read_notifications)\n\n\nlbl1 = tk.Label(window, text=\"\")\nlbl1.grid(column=0, row=0, stick=\"w\")\nlbl2 = tk.Label(window, text=\"\")\nlbl2.grid(column=0, row=1, stick=\"w\")\nlbl3 = tk.Label(window, text=\"\")\nlbl3.grid(column=0, row=2, stick=\"w\")\nlbl4 = tk.Label(window, text=\"\")\nlbl4.grid(column=0, row=3, stick=\"w\")\n\nread_notifications()\nwindow.mainloop()\n</code></pre>\n\n<p>What we start out with on the first read:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ga5g2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ga5g2.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then after I have made a change to the file and saved from my notepad:</p>\n\n<p><a href=\"https://i.stack.imgur.com/mWKbM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mWKbM.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 27, "user_id": 5591905, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JxJIbh0RJyY/AAAAAAAAAAI/AAAAAAAAAQw/NT4Ep2uFjvI/photo.jpg?sz=128", "display_name": "Ethan Gascoigne", "link": "https://stackoverflow.com/users/5591905/ethan-gascoigne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 519, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532555660, "creation_date": 1532554344, "question_id": 51527980, "link": "https://stackoverflow.com/questions/51527980/how-to-update-tkinter-window-every-4-seconds", "title": "How to update tkinter window every 4 seconds?", "body": "<p>I am trying to create a program that reads lines from a file and puts them into a tkinter window. At the moment my code is this: </p>\n\n<pre><code>def read_notifications():\n    #def update():\n    #   window.config(text=str(random.random()))\n    #   window.after(1000, update)\n    aaa = 1\n    while True:\n        re = open(\"Y:/System Info/notifications.txt\", \"r\")\n        rf = re.read()\n        rh = rf.count(\"\\n\")\n        re.close()\n        lines = [line.rstrip('\\n') for line in open(\"Y:/System Info/notifications.txt\")]\n        rk = -1\n        while True:\n            aaa = aaa + 2\n            rk = rk + 1\n            #print(lines[rk])\n            rl = rk + 1\n            ya = lines[rk].split(\"#\")\n            yb = str(tomrt)\n            if ya[1] == yb:\n                yc = \"Tommorow\"\n            else:\n                if ya[1] == \"0\":\n                    yc = \"Monday\"\n                if ya[1] == \"1\":\n                    yc = \"Tuesday\"\n                if ya[1] == \"2\":\n                    yc = \"Wednesday\"\n                if ya[1] == \"3\":\n                    yc = \"Thursday\"\n                if ya[1] == \"4\":\n                    yc = \"Friday\"\n                if ya[1] == \"5\":\n                    yc = \"Saturday\"\n                if ya[1] == \"6\":\n                    yc = \"Sunday\"       \n            c = 650\n            window = tk.Tk()\n            #back = tk.Frame(width=700, height=c)\n            #back.pack()\n            window.title(\"Notifications\")\n            window.iconbitmap(\"1235.ico\")\n            #Subject\n            lbl = tk.Label(window, text=ya[0])\n            lbl.config(font=(\"Courier\", 18))\n            lbl.grid(column=0, row=0)\n            #lbl.pack(side=tk.LEFT,)\n            #Day\n            lbl = tk.Label(window, text=\" \" + yc)\n            lbl.config(font=(\"Courier\", 16))\n            lbl.grid(column=2, row=0)\n            #Type\n            lbl = tk.Label(window, text=ya[2])\n            lbl.config(font=(\"Courier\", 16))\n            lbl.grid(column=4, row=0)\n            #Descripion\n            lbl = tk.Label(window, text=ya[4])\n            lbl.config(font=(\"Courier\", 16))\n            lbl.grid(column=6, row=0)\n            #lbl.pack(side=tk.LEFT)\n            #window.after(1000, update)\n            if rl == rh:\n                print(\"hello\")\n                break\n        if aaa &gt; 2:\n            time.sleep(4)\n            window.destroy()\n        else:\n            window.mainloop()\n</code></pre>\n\n<p>I am not sure why this doesn't work properly. I am trying to make it so the tkinter window will update itself every 4 seconds, as another program is making changes to the notifications.txt file and I want the tkinter windows to update accordingly. </p>\n"}, {"tags": ["python", "time", "slider", "maya"], "answers": [{"tags": [], "owner": {"reputation": 4158, "user_id": 4759736, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/JHRRj.jpg?s=128&g=1", "display_name": "Green Cell", "link": "https://stackoverflow.com/users/4759736/green-cell"}, "is_accepted": false, "score": 0, "last_activity_date": 1532579686, "creation_date": 1532579686, "answer_id": 51531079, "question_id": 51527979, "link": "https://stackoverflow.com/questions/51527979/python-script-time-slider-change-colors-not-working-in-maya-2018/51531079#51531079", "title": "Python script time slider change colors not working in Maya 2018", "body": "<p>You can use the attributes <code>useCurveColor</code> and <code>curveColor</code> to change the key colors.</p>\n\n<p>This will change the keys to blue on selected objects:</p>\n\n<pre><code>for obj in cmds.ls(sl=True):\n    anim_curves = cmds.listConnections(obj, type=\"animCurve\") or []\n    if anim_curves:    \n        cmds.setAttr(\"{}.useCurveColor\".format(anim_curves[0]), True)\n        cmds.setAttr(\"{}.curveColor\".format(anim_curves[0]), 0, 1, 1) # Must be values between 0.0 - 1.0\n</code></pre>\n\n<p>Just note that this will change ALL keys from a given attribute. As far as I know you can't change them individually.</p>\n"}], "owner": {"reputation": 11, "user_id": 5208343, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SIh3jaECtCU/AAAAAAAAAAI/AAAAAAAACc4/6lTk9kCsyzE/photo.jpg?sz=128", "display_name": "Djalma Bina", "link": "https://stackoverflow.com/users/5208343/djalma-bina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532579686, "creation_date": 1532554337, "question_id": 51527979, "link": "https://stackoverflow.com/questions/51527979/python-script-time-slider-change-colors-not-working-in-maya-2018", "title": "Python script time slider change colors not working in Maya 2018", "body": "<p>I  have  python script  which  change the color of the Maya time slider keyframes to any color  however  only runs on versions below the 2016 version of Maya, I need it to be upgraded to Maya versions 2017, 2018 and future versions of Maya.\nI don't know about what  are libraries should be included or changed  for  Maya  2018.\nThe  script  source  code is in  this URL <a href=\"http://www.djalmabright.h-br.com/maya/colorkey-1.py\" rel=\"nofollow noreferrer\"> Time  Slider  Changed  colors</a></p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "ipython", "jupyter"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1532554082, "post_id": 51527868, "comment_id": 90024440, "body": "What is the GIF filename, and where does it exist on disk? Have you given the full path rather than a relative one?"}, {"owner": {"reputation": 391, "user_id": 9715052, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "iiooii", "link": "https://stackoverflow.com/users/9715052/iiooii"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1532554151, "post_id": 51527868, "comment_id": 90024464, "body": "filename is : wigner_rotation_animate.gif"}, {"owner": {"reputation": 391, "user_id": 9715052, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "iiooii", "link": "https://stackoverflow.com/users/9715052/iiooii"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1532554226, "post_id": 51527868, "comment_id": 90024496, "body": "I gave the filepath: that would be Users/username/Downloads/file/filename.gif"}, {"owner": {"reputation": 4749, "user_id": 9663586, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0szb3.png?s=128&g=1", "display_name": "Const", "link": "https://stackoverflow.com/users/9663586/const"}, "edited": false, "score": 0, "creation_date": 1532554521, "post_id": 51527868, "comment_id": 90024599, "body": "This looks like relative path on mac. Try making it absolute by prepending slash?"}, {"owner": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "edited": false, "score": 0, "creation_date": 1532554567, "post_id": 51527868, "comment_id": 90024615, "body": "Try it without the <code>[1]</code>, so <code>![wignerfunction](..&#47;gifs&#47;wigner_rotation_animate.gif &quot;wigner&quot;)</code>"}, {"owner": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "edited": false, "score": 0, "creation_date": 1532554641, "post_id": 51527868, "comment_id": 90024637, "body": "Also, I would build my path with <a href=\"https://docs.python.org/3/library/os.path.html\" rel=\"nofollow noreferrer\"><code>os.path</code></a> instead. Try <code>path = os.path.abspath(&#39;..&#47;gifs&#47;wigner_rotation_animate.gif&#39;)</code> and then <code>![wignerfunction](path)</code>."}, {"owner": {"reputation": 391, "user_id": 9715052, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "iiooii", "link": "https://stackoverflow.com/users/9715052/iiooii"}, "edited": false, "score": 0, "creation_date": 1532555040, "post_id": 51527868, "comment_id": 90024775, "body": "I still got a blank image. Thanks for the help btw"}, {"owner": {"reputation": 30484, "user_id": 2875563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/umbJB.jpg?s=128&g=1", "display_name": "Reblochon Masque", "link": "https://stackoverflow.com/users/2875563/reblochon-masque"}, "edited": false, "score": 0, "creation_date": 1532555387, "post_id": 51527868, "comment_id": 90024895, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/32370281/how-to-include-image-or-picture-in-jupyter-notebook\">How to Include image or picture in jupyter notebook</a>"}], "answers": [{"comments": [{"owner": {"reputation": 791, "user_id": 9940782, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iED8il4G9ps/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0KzbmmNt3jZvH5Allz5HcrXQYEdA/mo/photo.jpg?sz=128", "display_name": "Tommy Lees", "link": "https://stackoverflow.com/users/9940782/tommy-lees"}, "edited": false, "score": 0, "creation_date": 1559305056, "post_id": 51528612, "comment_id": 99388378, "body": "When I type: <code>![SegmentLocal](&#47;Users&#47;tommylees&#47;Downloads&#47;video2.gif &quot;segment&quot;)</code>   I get the following error: - <code>&#47;bin&#47;sh: -c: line 0: syntax error near unexpected token &#47;Users&#47;tommylees&#47;Downloads&#47;video2.gif</code> - <code>&#47;bin&#47;sh: -c: line 0: </code><a href=\"/Users/tommylees/Downloads/video2.gif\">SegmentLocal</a>&#39; `"}, {"owner": {"reputation": 353, "user_id": 1482243, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/def04284f293ec45698a50d80775b449?s=128&d=identicon&r=PG", "display_name": "Matt07", "link": "https://stackoverflow.com/users/1482243/matt07"}, "edited": false, "score": 2, "creation_date": 1588605447, "post_id": 51528612, "comment_id": 108955772, "body": "You have to set the cell type to markdown. Maybe this should be highlighted in the main comment"}, {"owner": {"reputation": 4749, "user_id": 9663586, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0szb3.png?s=128&g=1", "display_name": "Const", "link": "https://stackoverflow.com/users/9663586/const"}, "edited": false, "score": 0, "creation_date": 1591826286, "post_id": 51528612, "comment_id": 110208050, "body": "Um, it is literally stated in the first sentence of the answer..."}], "tags": [], "owner": {"reputation": 4749, "user_id": 9663586, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0szb3.png?s=128&g=1", "display_name": "Const", "link": "https://stackoverflow.com/users/9663586/const"}, "is_accepted": true, "score": 24, "last_activity_date": 1532598512, "last_edit_date": 1532598512, "creation_date": 1532558267, "answer_id": 51528612, "question_id": 51527868, "link": "https://stackoverflow.com/questions/51527868/how-do-i-embed-a-gif-in-jupyter-notebook/51528612#51528612", "title": "How do I embed a gif in Jupyter notebook?", "body": "<blockquote>\n  <p>I've been trying to display a gif in Jupyter notebook and have had some trouble.</p>\n</blockquote>\n\n<p>To display gif in notebook you can use inline markup on a Markdown cell like this:</p>\n\n<ul>\n<li><p>Relative reference in the same folder as ipynb notebook file:</p>\n\n<pre><code>![SegmentLocal](191px-Seven_segment_display-animated.gif \"segment\")\n</code></pre></li>\n<li><p>Relative reference in subfolder images from folder where ipynb notebook file is:</p>\n\n<pre><code>![SegmentLocal](images/191px-Seven_segment_display-animated.gif \"segment\")\n</code></pre></li>\n<li><p>Absolute reference from root folder irrespective of location of notebook file:</p>\n\n<pre><code>![SegmentLocal](/Users/username/some-folder/191px-Seven_segment_display-animated.gif \"segment\")\n</code></pre></li>\n<li><p>URL reference (should work out of the box in your notebook):</p>\n\n<pre><code>![ChessUrl](https://upload.wikimedia.org/wikipedia/commons/7/71/ChessPawnSpecialMoves.gif \"chess\")\n</code></pre></li>\n</ul>\n\n<p>As an example, since stack overflow is also using markdown, last line with url reference if given exactly last mentioned line: <code>![ChessUrl](https://upload.wikimedia.org/wikipedia/commons/7/71/ChessPawnSpecialMoves.gif \"chess\")</code>, but not given as code reference evaluates to:</p>\n\n<p><img src=\"https://upload.wikimedia.org/wikipedia/commons/7/71/ChessPawnSpecialMoves.gif\" alt=\"ChessUrl\" title=\"chess\"></p>\n\n<p>As should be displayed in your jupyter notebook as well. Now, if you can see this last one ok, but can't see it from referenced local file you are most probably either having corrupted gif, permission issues or not proper file path.</p>\n"}, {"comments": [{"owner": {"reputation": 1840, "user_id": 8508004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/798dcbaee1ba2df492410d761941c87b?s=128&d=identicon&r=PG", "display_name": "Wayne", "link": "https://stackoverflow.com/users/8508004/wayne"}, "edited": false, "score": 2, "creation_date": 1580402009, "post_id": 59988258, "comment_id": 106094300, "body": "That code doesn&#39;t work without <code>Pillow</code> installed. You&#39;ll get <code>ValueError: Only know how to handle extensions: [&#39;png&#39;]; with Pillow installed matplotlib can handle more images</code> because <code>imread</code> cannot handle anything but <code>png</code> in a nascent environment. More reliable and shorter to use the standard <code>from IPython.display import Image;Image(&quot;&#47;home&#47;gaurav&#47;assignment&#47;sofcomputing&#47;river.gif&quot;&zwnj;&#8203;)</code>"}], "tags": [], "owner": {"reputation": 47, "user_id": 11026003, "user_type": "registered", "profile_image": "https://graph.facebook.com/1208723205961123/picture?type=large", "display_name": "Gaurav ", "link": "https://stackoverflow.com/users/11026003/gaurav"}, "is_accepted": false, "score": -1, "last_activity_date": 1580402563, "last_edit_date": 1580402563, "creation_date": 1580394572, "answer_id": 59988258, "question_id": 51527868, "link": "https://stackoverflow.com/questions/51527868/how-do-i-embed-a-gif-in-jupyter-notebook/59988258#59988258", "title": "How do I embed a gif in Jupyter notebook?", "body": "<p>Any image format either png, jpg, jpeg or gif etc, you want to show in python jupyter notebook then simply use matplotlib library.</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\nimport matplotlib.image as mpimg\n\nimg = mpimg.imread(\"/home/gaurav/assignment/sofcomputing/river.gif\")\n\nplt.imshow(img)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 13013261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04b9e5d62c6cdf3cdc2e01e3ac54dc55?s=128&d=identicon&r=PG", "display_name": "user13013261", "link": "https://stackoverflow.com/users/13013261/user13013261"}, "is_accepted": false, "score": 4, "last_activity_date": 1583421968, "last_edit_date": 1583421968, "creation_date": 1583419240, "answer_id": 60547855, "question_id": 51527868, "link": "https://stackoverflow.com/questions/51527868/how-do-i-embed-a-gif-in-jupyter-notebook/60547855#60547855", "title": "How do I embed a gif in Jupyter notebook?", "body": "<p>When I need to include a gif animation in a jupyter notebook I do the following:</p>\n\n<pre><code>&lt;img src=\"FileName.gif\" width=\"750\" align=\"center\"&gt;\n</code></pre>\n\n<p>The width and align parameters are defined by you.</p>\n\n<p>Thanks</p>\n"}], "owner": {"reputation": 391, "user_id": 9715052, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "iiooii", "link": "https://stackoverflow.com/users/9715052/iiooii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21085, "favorite_count": 4, "accepted_answer_id": 51528612, "answer_count": 3, "score": 14, "last_activity_date": 1583421968, "creation_date": 1532553840, "last_edit_date": 1532554464, "question_id": 51527868, "link": "https://stackoverflow.com/questions/51527868/how-do-i-embed-a-gif-in-jupyter-notebook", "title": "How do I embed a gif in Jupyter notebook?", "body": "<p>I've been trying to display a gif in Jupyter notebook and have had some trouble. I keep getting a blank image file. </p>\n\n<p>I've tried using html from <a href=\"https://github.com/ipython/ipython/issues/10045\" rel=\"noreferrer\">this GitHub repository</a>. </p>\n\n<pre><code>![wignerfunction][1](../gifs/wigner_rotation_animate.gif \"wigner\")\n</code></pre>\n\n<p>And</p>\n\n<pre><code>from IPython.display import Image\nImage(url='example.gif')  \n</code></pre>\n\n<p>None of the above have worked so far. </p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "python-3.x", "web-scraping", "praw"], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 9260466, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SEn7rub45OY/AAAAAAAAAAI/AAAAAAAAADk/tfczXrcGQTI/photo.jpg?sz=128", "display_name": "Synik", "link": "https://stackoverflow.com/users/9260466/synik"}, "edited": false, "score": 0, "creation_date": 1532554843, "post_id": 51527912, "comment_id": 90024703, "body": "Hey thanks! Lots of great things that I didn&#39;t know here! I tried implementing your code but am running into an error with the group line:    AttributeError: &#39;list&#39; object has no attribute &#39;group&#39;"}, {"owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "reply_to_user": {"reputation": 127, "user_id": 9260466, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SEn7rub45OY/AAAAAAAAAAI/AAAAAAAAADk/tfczXrcGQTI/photo.jpg?sz=128", "display_name": "Synik", "link": "https://stackoverflow.com/users/9260466/synik"}, "edited": false, "score": 1, "creation_date": 1532554995, "post_id": 51527912, "comment_id": 90024754, "body": "@Synik if you use <code>.findall</code> then you don&#39;t have to use <code>.group</code> at all: <code>for key in re.findall(steamKey15, submission.selftext, flags=re.IGNORECASE): saveSteamKey(key)</code>  because  <code>findall</code> returns a list of matches already in string format"}, {"owner": {"reputation": 127, "user_id": 9260466, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SEn7rub45OY/AAAAAAAAAAI/AAAAAAAAADk/tfczXrcGQTI/photo.jpg?sz=128", "display_name": "Synik", "link": "https://stackoverflow.com/users/9260466/synik"}, "edited": false, "score": 0, "creation_date": 1532555734, "post_id": 51527912, "comment_id": 90025009, "body": "Awesome, I removed the group and just did a print(m) and it returns just the 1 15 key, and also 15 characters of the 25 key (I am only running it with the 15 key statement for testing). Will this return duplicates when I implement the 25/17?"}, {"owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "reply_to_user": {"reputation": 127, "user_id": 9260466, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SEn7rub45OY/AAAAAAAAAAI/AAAAAAAAADk/tfczXrcGQTI/photo.jpg?sz=128", "display_name": "Synik", "link": "https://stackoverflow.com/users/9260466/synik"}, "edited": false, "score": 1, "creation_date": 1532556015, "post_id": 51527912, "comment_id": 90025099, "body": "you can add word boundaries to the regexp to prevent it from finding keys with extra characters: <code>r&#39;\\b\\w{5}[-.]\\w{5}[-.]\\w{5}&#39;\\b</code> @Synik"}, {"owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "reply_to_user": {"reputation": 127, "user_id": 9260466, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SEn7rub45OY/AAAAAAAAAAI/AAAAAAAAADk/tfczXrcGQTI/photo.jpg?sz=128", "display_name": "Synik", "link": "https://stackoverflow.com/users/9260466/synik"}, "edited": false, "score": 1, "creation_date": 1532556365, "post_id": 51527912, "comment_id": 90025214, "body": "typo:  <code>r&#39;\\b\\w{5}[-.]\\w{5}[-.]\\w{5}\\b&#39;</code>"}, {"owner": {"reputation": 127, "user_id": 9260466, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SEn7rub45OY/AAAAAAAAAAI/AAAAAAAAADk/tfczXrcGQTI/photo.jpg?sz=128", "display_name": "Synik", "link": "https://stackoverflow.com/users/9260466/synik"}, "edited": false, "score": 0, "creation_date": 1532556678, "post_id": 51527912, "comment_id": 90025317, "body": "Logically that makes sense, but its still returning 15 characters of the next string. I copied/pasted the typo corrected one to make sure I wasn&#39;t missing anything."}, {"owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "reply_to_user": {"reputation": 127, "user_id": 9260466, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SEn7rub45OY/AAAAAAAAAAI/AAAAAAAAADk/tfczXrcGQTI/photo.jpg?sz=128", "display_name": "Synik", "link": "https://stackoverflow.com/users/9260466/synik"}, "edited": false, "score": 1, "creation_date": 1532557161, "post_id": 51527912, "comment_id": 90025445, "body": "@Synik it seems that dots and <code>-</code> are considered non-words! We have to use negative lookahead and negative lookbehind. try this: <code>r&#39;(?&lt;![\\w.-])\\w{5}[-.]\\w{5}[-.]\\w{5}(?![\\w.-])&#39;</code> - I added this info to the answer"}, {"owner": {"reputation": 127, "user_id": 9260466, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SEn7rub45OY/AAAAAAAAAAI/AAAAAAAAADk/tfczXrcGQTI/photo.jpg?sz=128", "display_name": "Synik", "link": "https://stackoverflow.com/users/9260466/synik"}, "edited": false, "score": 0, "creation_date": 1532558112, "post_id": 51527912, "comment_id": 90025660, "body": "wow as someone who learned regex a few hours ago, that can get pretty crazy looking! It works great though! Marked as answer, perfectly solved my issue."}], "tags": [], "owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "is_accepted": true, "score": 2, "last_activity_date": 1532557273, "last_edit_date": 1532557273, "creation_date": 1532554029, "answer_id": 51527912, "question_id": 51527851, "link": "https://stackoverflow.com/questions/51527851/how-to-filter-out-specific-strings-from-a-string/51527912#51527912", "title": "How to filter out specific strings from a string", "body": "<p>can't you just get the regexp results?</p>\n\n<pre><code>m = re.search(steamKey15, submission.selftext, re.IGNORECASE)\nif m:\n    print(m.group(0))\n</code></pre>\n\n<p>Also note that a dot <code>.</code> means <strong>any char</strong> in a regexp. If you want to match only dots, you should use <code>\\.</code>. You can probably write your regexp like this instead:</p>\n\n<pre><code>r'\\w{5}[-.]\\w{5}[-.]\\w{5}' \n</code></pre>\n\n<p>This will match the key when separated by <code>.</code> or by <code>-</code>.</p>\n\n<p>Note that this will also match anything that begin or end with a key, or has a key in the middle - that can cause you problems as your 15-char key regexp is contained in the 25-key one! To fix that use negative lookahead/negative lookbehind:</p>\n\n<pre><code>r'(?&lt;![\\w.-])\\w{5}[-.]\\w{5}[-.]\\w{5}(?![\\w.-])'\n</code></pre>\n\n<p>that will only find the keys if there are no extraneous characters before and after them</p>\n\n<p>Another hint is to use <code>re.findall</code> instead of <code>re.search</code> - some posts contain more than one steam key in the same post! <code>findall</code> will return all matches while <code>search</code> only returns the first one.</p>\n"}, {"comments": [{"owner": {"reputation": 89, "user_id": 10129915, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zIXdBvlR5KA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pxUmXYZWI1ZpSP39wxqEs6757vJA/mo/photo.jpg?sz=128", "display_name": "Malcoto", "link": "https://stackoverflow.com/users/10129915/malcoto"}, "edited": false, "score": 0, "creation_date": 1532555321, "post_id": 51527974, "comment_id": 90024877, "body": "Sorry, I&#39;m also new to this, but findall returns a list, so you can just loop through those to find the steamKeys that your code picks up. :)"}, {"owner": {"reputation": 127, "user_id": 9260466, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SEn7rub45OY/AAAAAAAAAAI/AAAAAAAAADk/tfczXrcGQTI/photo.jpg?sz=128", "display_name": "Synik", "link": "https://stackoverflow.com/users/9260466/synik"}, "edited": false, "score": 0, "creation_date": 1532555464, "post_id": 51527974, "comment_id": 90024925, "body": "Thanks for the great tips! I&#39;ve changed my regex around to be less repetitive. This seems to be the closest I have gotten so far. My only question is what is causing the code to return 20 lines of brackets with the mock key on line 9?"}, {"owner": {"reputation": 89, "user_id": 10129915, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zIXdBvlR5KA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pxUmXYZWI1ZpSP39wxqEs6757vJA/mo/photo.jpg?sz=128", "display_name": "Malcoto", "link": "https://stackoverflow.com/users/10129915/malcoto"}, "reply_to_user": {"reputation": 127, "user_id": 9260466, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SEn7rub45OY/AAAAAAAAAAI/AAAAAAAAADk/tfczXrcGQTI/photo.jpg?sz=128", "display_name": "Synik", "link": "https://stackoverflow.com/users/9260466/synik"}, "edited": false, "score": 0, "creation_date": 1532580133, "post_id": 51527974, "comment_id": 90030007, "body": "I don&#39;t know how the reddit portion of your code works, but if there were no matches for the steamKey25 then the corresponding finds_25 will become an empty list. Since it looks like you only pick the first 20 submissions, maybe there were no matches in any of those submissions?"}], "tags": [], "owner": {"reputation": 89, "user_id": 10129915, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zIXdBvlR5KA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pxUmXYZWI1ZpSP39wxqEs6757vJA/mo/photo.jpg?sz=128", "display_name": "Malcoto", "link": "https://stackoverflow.com/users/10129915/malcoto"}, "is_accepted": false, "score": 1, "last_activity_date": 1532554544, "last_edit_date": 1532554544, "creation_date": 1532554307, "answer_id": 51527974, "question_id": 51527851, "link": "https://stackoverflow.com/questions/51527851/how-to-filter-out-specific-strings-from-a-string/51527974#51527974", "title": "How to filter out specific strings from a string", "body": "<p>So a couple things first <code>.</code> means any character in regex. I think you know that, but just to be sure. Also <code>\\w\\w\\w\\w\\w</code> can be replaced with <code>\\w{5}</code> where this specifies 5 alphanumerics. I would use <code>re.findall</code>.</p>\n\n<pre><code>import re\nsteamKey15 = (r'(?:\\w{5}.){2}\\w{5}')\nsteamKey25 = (r'(?:\\w{5}.){5}')\nsteamKey17 = (r'\\w{15}\\s\\w\\w')\nsubreddit = reddit.subreddit('pythonforengineers')\nfor submission in subreddit.new(limit=20):\n    if submission.id not in steamKeyPostID:\n        finds_15 = re.findall(steamKey15, submission.selftext)\n        finds_25 = re.findall(steamKey25, submission.selftext)\n        finds_17 = re.findall(steamKey17, submission.selftext)\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 9260466, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SEn7rub45OY/AAAAAAAAAAI/AAAAAAAAADk/tfczXrcGQTI/photo.jpg?sz=128", "display_name": "Synik", "link": "https://stackoverflow.com/users/9260466/synik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 51527912, "answer_count": 2, "score": 0, "last_activity_date": 1532557273, "creation_date": 1532553753, "question_id": 51527851, "link": "https://stackoverflow.com/questions/51527851/how-to-filter-out-specific-strings-from-a-string", "title": "How to filter out specific strings from a string", "body": "<p>Python beginner here. I'm stumped on part of this code for a bot I'm writing. </p>\n\n<p>I am making a reddit bot using Praw to comb through posts and removed a specific set of characters (steam CD keys). </p>\n\n<p>I made a test post here: <a href=\"https://www.reddit.com/r/pythonforengineers/comments/91m4l0/testing_my_reddit_scraping_bot/\" rel=\"nofollow noreferrer\">https://www.reddit.com/r/pythonforengineers/comments/91m4l0/testing_my_reddit_scraping_bot/</a></p>\n\n<p>This should have all the formats of keys. </p>\n\n<p>Currently, my bot is able to find the post using a regex expression. I have these variables: </p>\n\n<pre><code>steamKey15 = (r'\\w\\w\\w\\w\\w.\\w\\w\\w\\w\\w.\\w\\w\\w\\w\\w')\nsteamKey25 = (r'\\w\\w\\w\\w\\w.\\w\\w\\w\\w\\w.\\w\\w\\w\\w\\w.\\w\\w\\w\\w\\w.\\w\\w\\w\\w\\w.')\nsteamKey17 = (r'\\w\\w\\w\\w\\w\\w\\w\\w\\w\\w\\w\\w\\w\\w\\w\\s\\w\\w')\n</code></pre>\n\n<p>I am finding the text using this: </p>\n\n<pre><code>subreddit = reddit.subreddit('pythonforengineers')\nfor submission in subreddit.new(limit=20):\n\n    if submission.id not in steamKeyPostID:        \n        if re.search(steamKey15, submission.selftext, re.IGNORECASE):\n            searchLogic()\n            saveSteamKey()\n</code></pre>\n\n<p>So this is just to show that the things I should be using in a filter function is a combination of steamKey15/25/17, and submission.selftext. </p>\n\n<p>So here is the part where I am confused. I cant find a function that works, or is doing what I want. My goal is to remove all the text from submission.selftext(the body of the post) BUT the keys, which will eventually be saved in a .txt file. </p>\n\n<p>Any advice on a good way to go around this? I've looked into re.sub and .translate but I don't understand how the parts fit together. </p>\n\n<p>I am using Python 3.7 if it helps. </p>\n"}, {"tags": ["python", "sockets", "tcp", "rpc", "msgpack"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 10135795, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zOMcNfzOqzk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rVhbKy59YA6_FmyX76eYb7HMsEnQ/mo/photo.jpg?sz=128", "display_name": "Tuft", "link": "https://stackoverflow.com/users/10135795/tuft"}, "edited": false, "score": 0, "creation_date": 1532556101, "post_id": 51528059, "comment_id": 90025131, "body": "Thank you very much for your answer ! So does this mean, on the same computer, i should be able to call socket.create_connection((&#39;localhost&#39;, 12345)) multiple times from different processes ?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 5, "user_id": 10135795, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zOMcNfzOqzk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rVhbKy59YA6_FmyX76eYb7HMsEnQ/mo/photo.jpg?sz=128", "display_name": "Tuft", "link": "https://stackoverflow.com/users/10135795/tuft"}, "edited": false, "score": 0, "creation_date": 1532559432, "post_id": 51528059, "comment_id": 90025975, "body": "@Tuft Yes, you should be able to run hundreds of programs (or the same program run hundreds of times in parallel) that all call <code>socket.create_connection((&#39;localhost&#39;, 12345))</code>, and they&#39;ll all work (each one automatically getting a unique ports to connect from)."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 0, "last_activity_date": 1532555111, "last_edit_date": 1532555111, "creation_date": 1532554711, "answer_id": 51528059, "question_id": 51527846, "link": "https://stackoverflow.com/questions/51527846/rpc-over-tcp-with-multiple-clients-on-same-machine/51528059#51528059", "title": "RPC over TCP with multiple clients on same machine", "body": "<p>TCP is a connection-oriented protocol. This means that only the server needs to have a fixed, known port. The client can use any port it wants, because nobody is making a connection to the client. </p>\n\n<p>So, how does the server know how to talk to the client? Whenever it accepts a connection, it's told who the connection is from. But usually, you don't even need that, because the socket keeps track of who the connection is from. Just recv and send on that socket, and you're talking to the right client.</p>\n\n<hr>\n\n<p>You should probably read the <a href=\"https://docs.python.org/3/howto/sockets.html\" rel=\"nofollow noreferrer\">Socket Programming HOWTO</a> in the Python docs, or some other tutorial, but briefly\u2026</p>\n\n<p>A server starts like this:</p>\n\n<pre><code>sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nsock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\nsock.bind(('', 12345))\nsock.listen(5)\nwhile True:\n    csock, addr = sock.accept()\n</code></pre>\n\n<p>It <code>bind</code>s a port and <code>listen</code>s and loops around <code>accept</code>ing connections and doing something with them.</p>\n\n<p>A client, on the other hand, just does this:</p>\n\n<pre><code>sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nsock.connect(('localhost', 12345))\n</code></pre>\n\n<p>\u2026 or, equivalently:</p>\n\n<pre><code>sock = socket.create_connection(('localhost', 12345))\n</code></pre>\n\n<p>It doesn't call <code>bind</code>, it just creates a connection, letting the sockets library pick an arbitrary port on the appropriate interface for that connection. Unless you've got thousands of sockets already open, it should always be able to find a free port for you.</p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 10135795, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zOMcNfzOqzk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rVhbKy59YA6_FmyX76eYb7HMsEnQ/mo/photo.jpg?sz=128", "display_name": "Tuft", "link": "https://stackoverflow.com/users/10135795/tuft"}, "edited": false, "score": 0, "creation_date": 1532556425, "post_id": 51528128, "comment_id": 90025242, "body": "Thanks you ! I&#39;m only looking to send a request to the server, and then get back the response, not really two-way i guess ?"}], "tags": [], "owner": {"reputation": 4698, "user_id": 234775, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/37927ea4b8d74efc8bfbd44d76d07267?s=128&d=identicon&r=PG", "display_name": "Ramazan Polat", "link": "https://stackoverflow.com/users/234775/ramazan-polat"}, "is_accepted": false, "score": 0, "last_activity_date": 1532555114, "creation_date": 1532555114, "answer_id": 51528128, "question_id": 51527846, "link": "https://stackoverflow.com/questions/51527846/rpc-over-tcp-with-multiple-clients-on-same-machine/51528128#51528128", "title": "RPC over TCP with multiple clients on same machine", "body": "<p>If you want to have two way connection, then HTTP is not suitable for this. Because HTTP is designed in a way that the server only responds to a request, which prevents server to issue a request itself. There are other solutions that provide two way connection(server to client and client to server in same time).</p>\n\n<p><code>WebSocket</code> is the first thing that comes to my mind. Of course <code>ZeroMQ</code> also can do this. </p>\n"}], "owner": {"reputation": 5, "user_id": 10135795, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zOMcNfzOqzk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rVhbKy59YA6_FmyX76eYb7HMsEnQ/mo/photo.jpg?sz=128", "display_name": "Tuft", "link": "https://stackoverflow.com/users/10135795/tuft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 929, "favorite_count": 0, "accepted_answer_id": 51528059, "answer_count": 2, "score": 0, "last_activity_date": 1532555114, "creation_date": 1532553743, "question_id": 51527846, "link": "https://stackoverflow.com/questions/51527846/rpc-over-tcp-with-multiple-clients-on-same-machine", "title": "RPC over TCP with multiple clients on same machine", "body": "<p>I'm building an RPC Server in golang that uses msgpack. \nThe client is built in python using the mprpc library (msgpack over TCP with gevent). </p>\n\n<p>My issue is, being an absolute noob in networking, I discovered that I can't use the same address/port with multiple clients running at once on the same computer (socket already bound i guess, it just stalls and timeouts).</p>\n\n<p>I have looked around quite a bit but I'm not sure what I should be doing to be able to have multiple clients on the same machine talk to a server (msgpack back and forth). Is this a case where I need to use ZeroMQ ? Or requests over HTTP ?</p>\n\n<p>Thanks !</p>\n"}, {"tags": ["python", "arrays"], "comments": [{"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 2, "creation_date": 1532554020, "post_id": 51527841, "comment_id": 90024415, "body": "Why do you expect 4 and 3?"}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1532554263, "post_id": 51527841, "comment_id": 90024515, "body": "You duplicates are at indices 4 &amp; 5. And your print needs to be inside the outer loop. And the <code>while</code> doesn&#39;t make sense."}], "answers": [{"tags": [], "owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "is_accepted": false, "score": 0, "last_activity_date": 1532554972, "last_edit_date": 1532554972, "creation_date": 1532554636, "answer_id": 51528043, "question_id": 51527841, "link": "https://stackoverflow.com/questions/51527841/i-want-to-find-out-the-index-of-the-elements-in-an-array-of-duplicate-elements/51528043#51528043", "title": "i want to find out the index of the elements in an array of duplicate elements", "body": "<p>There are some things wrong with your code. The following will collect the indexes of every first duplicate:</p>\n\n<pre><code>def firstDuplicate(a):\n    num = []  # list to collect indexes of first dupes\n    for i in range(len(a)-1):  # second to last is enough here\n        for j in range(i+1, len(a)):                \n            if a[i]==a[j]:  # while-loop made little sense\n                num.append(j)  # grow list and do not override it\n                break  # stop inner loop after first duplicate\n    print(num)\n</code></pre>\n\n<p>There are of course more performant algorithms to achieve this that are not quadratic.</p>\n"}, {"comments": [{"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1532555641, "post_id": 51528116, "comment_id": 90024975, "body": "Cute, but impractical if the list integers are scattered over a large range, and not much use for non-integer lists. But why do you compute <code>abs(arr[i])</code> 3 times?"}, {"owner": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "reply_to_user": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1532555915, "post_id": 51528116, "comment_id": 90025069, "body": "@PM2Ring I figured any improvement in performance gained by storing the value is going to be super minimal, and I thought it was clearer this way. And yes, you could run into some memory issues if your integers are very large, but I thought it was a neat solution. No good for non-integer arrays, you are correct."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 1, "creation_date": 1532556421, "post_id": 51528116, "comment_id": 90025240, "body": "Sure, getitem &amp; abs are pretty cheap, but a local lookup is very fast. And you are doing it in a loop... IMHO, the repetition actually makes the code harder to read since you need to look closely to verify that it is exact repetition."}, {"owner": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "reply_to_user": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1532556631, "post_id": 51528116, "comment_id": 90025303, "body": "@PM2Ring good point. I updated it to store the absolute value, and to use <code>enumerate</code> to iterate over the indices and values instead of a range with lookup. Hopefully clearer that way."}], "tags": [], "owner": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "is_accepted": false, "score": 1, "last_activity_date": 1532556598, "last_edit_date": 1532556598, "creation_date": 1532555055, "answer_id": 51528116, "question_id": 51527841, "link": "https://stackoverflow.com/questions/51527841/i-want-to-find-out-the-index-of-the-elements-in-an-array-of-duplicate-elements/51528116#51528116", "title": "i want to find out the index of the elements in an array of duplicate elements", "body": "<p>You can <a href=\"https://www.geeksforgeeks.org/find-duplicates-in-on-time-and-constant-extra-space/\" rel=\"nofollow noreferrer\">find the indices of all duplicates in an array in O(n) time and O(1) extra space</a> with something like the following:</p>\n\n<pre><code>def get_duplicate_indices(arr):\n    inds = []\n    for i, val in enumerate(arr):\n        val = abs(val)\n        if arr[val] &gt;= 0:\n            arr[val] = -arr[val]\n        else:\n            inds.append(i)\n    return inds\n\nget_duplicate_indices(a)\n[4, 5]\n</code></pre>\n\n<p>Note that this will modify the array in place! If you want to keep your input array un-modified, replace the first few lines in the above with:</p>\n\n<pre><code>def get_duplicate_indices(a):\n    arr = a.copy()  # so we don't modify in place. Drawback is it's not O(n) extra space\n    inds = []\n    for i, val in enumerate(a):\n        # ...\n</code></pre>\n\n<p>Essentially this uses the <em>sign</em> of each element in the array as an indicator of whether a number has been seen before. If we come across a negative value, it means the number we reached has been seen before, so we append the number's index to our list of already-seen indices.</p>\n\n<p>Note that this can run into trouble if the values in the array are larger than the length of the array, but in this case we just extend the working array to be the same length as whatever the maximum value is in the input. Easy peasy.</p>\n"}], "owner": {"reputation": 11, "user_id": 9974322, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yWs_P2syTK4/AAAAAAAAAAI/AAAAAAAAALo/M5-sbZCBF10/photo.jpg?sz=128", "display_name": "Aritra Roychowdhury", "link": "https://stackoverflow.com/users/9974322/aritra-roychowdhury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571114394, "creation_date": 1532553709, "last_edit_date": 1532555397, "question_id": 51527841, "link": "https://stackoverflow.com/questions/51527841/i-want-to-find-out-the-index-of-the-elements-in-an-array-of-duplicate-elements", "title": "i want to find out the index of the elements in an array of duplicate elements", "body": "<pre><code>a=[2, 1, 3, 5, 3, 2]\n\ndef firstDuplicate(a):\n    for i in range(0,len(a)):\n        for j in range(i+1,len(a)):                \n            while a[i]==a[j]:\n                num=[j]\n                break\n    print(num)\n\nprint(firstDuplicate(a))\n</code></pre>\n\n<p>The output should be coming as 4 and 5 but it's coming as 4 only </p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1532553623, "post_id": 51527805, "comment_id": 90024268, "body": "<code>global &lt;name&gt;</code> goes inside a function that tries to alter the global."}, {"owner": {"reputation": 1143, "user_id": 8759952, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d8e784fa5cd3e5a2dfe13b405fc1de1?s=128&d=identicon&r=PG&f=1", "display_name": "Liora Haydont", "link": "https://stackoverflow.com/users/8759952/liora-haydont"}, "edited": false, "score": 1, "creation_date": 1532553772, "post_id": 51527805, "comment_id": 90024322, "body": "Make sure you indentation is the same here as in your file. If it&#39;s the same, that&#39;s where your issue is."}], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 8309168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70c4d59ab13b9b83f8439930aa171a3a?s=128&d=identicon&r=PG", "display_name": "user8309168", "link": "https://stackoverflow.com/users/8309168/user8309168"}, "is_accepted": false, "score": 0, "last_activity_date": 1532556125, "creation_date": 1532556125, "answer_id": 51528314, "question_id": 51527805, "link": "https://stackoverflow.com/questions/51527805/how-can-i-use-if-statements-to-check-variables-inside-of-function/51528314#51528314", "title": "How can I use if statements to check variables inside of function?", "body": "<p>When you declare your variables, use <code>check = 0</code> and <code>Check = 0</code>, and inside the function <code>StartOrChange()</code> use</p>\n\n<pre><code>def StartOrChange():\n     global Check\n     global check\n\n     print(\"Type 'Start' or 'Changelog'.\")\n     Check = input(\"&gt; \")\n     print (Check) \n     check = Check.lower() \n</code></pre>\n\n<p><a href=\"https://docs.python.org/3/faq/programming.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/faq/programming.html</a></p>\n"}], "owner": {"reputation": 3, "user_id": 6253901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02ee33b49ad1ddc8e89ec40cb1e2eb53?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/6253901/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 1, "closed_date": 1532553775, "answer_count": 1, "score": -1, "last_activity_date": 1532556125, "creation_date": 1532553544, "last_edit_date": 1532553573, "question_id": 51527805, "link": "https://stackoverflow.com/questions/51527805/how-can-i-use-if-statements-to-check-variables-inside-of-function", "closed_reason": "Duplicate", "title": "How can I use if statements to check variables inside of function?", "body": "<p>I am making a text based hacking game. How can I use if statements to check variables inside of  function?</p>\n\n<p>Error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Users\\user\\Desktop\\Python Projects\\TextHackingGame\\Start.py\", line 22, in &lt;module&gt;\n    if check == \"start\":\nNameError: name 'check' is not defined\n</code></pre>\n\n<p>The code:</p>\n\n<pre><code>import time\nimport string\nimport os\nimport sys\n\nprint(\"-------------------------\")\nprint(\"Welcome to [NAME_HERE]\")\nprint(\"By ***************\")\nprint(\"Copyright 2018\")\nprint(\"-------------------------\")\ntime.sleep(0.10)\nos.system(\"cls\")\n\nglobal Check\nglobal check\n\ndef StartOrChange():\n    print(\"Type 'Start' or 'Changelog'.\")\n    Check = input(\"&gt; \")\n    check = Check.lower\n\nif check == \"start\":\n    pass\nelif check == \"changelog\":\n    pass\nelse:\n    print(\"Please enter 'Start' or 'Changelog'\")\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "rename"], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 1, "last_activity_date": 1532554437, "creation_date": 1532554437, "answer_id": 51527998, "question_id": 51527802, "link": "https://stackoverflow.com/questions/51527802/pandas-renaming-columns-based-on-cipher/51527998#51527998", "title": "Pandas Renaming columns based on cipher", "body": "<p>Use <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.map.html#pandas-series-map\" rel=\"nofollow noreferrer\"><code>map</code></a> where the arg is a series with index of \"from value\" and values are what is mapped to:</p>\n\n<pre><code>df = df.set_index('Date')\ndf.columns = df.columns.map(df2.set_index('name')['description'])\ndf = df.reset_index()\ndf\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>         Date  ROOM201-TEMP  ROOM200-TEMP\n0  2017-01-01             1             2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 1, "creation_date": 1532554615, "post_id": 51528026, "comment_id": 90024630, "body": "Scott posted while I was writing, but you can see that we agree on the use of map"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1532554859, "post_id": 51528026, "comment_id": 90024710, "body": "Nice answer!  +1"}], "tags": [], "owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "is_accepted": false, "score": 1, "last_activity_date": 1532554557, "creation_date": 1532554557, "answer_id": 51528026, "question_id": 51527802, "link": "https://stackoverflow.com/questions/51527802/pandas-renaming-columns-based-on-cipher/51528026#51528026", "title": "Pandas Renaming columns based on cipher", "body": "<p>there is, good old <code>pd.map</code>. It's meant for series but I think it is possible to make it work for column names</p>\n\n<pre><code> z = {k: g.description.values[0] for k, g in df2.groupby('name')}\n df.columns = df.columns.map(z)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4868071, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rw6Mgfhel1Y/AAAAAAAAAAI/AAAAAAAAABE/D3LZ1dUhhQs/photo.jpg?sz=128", "display_name": "Eamon Murphy", "link": "https://stackoverflow.com/users/4868071/eamon-murphy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1532554557, "creation_date": 1532553513, "question_id": 51527802, "link": "https://stackoverflow.com/questions/51527802/pandas-renaming-columns-based-on-cipher", "title": "Pandas Renaming columns based on cipher", "body": "<p>I have a column in a dataframe with sensor identifiers and varying values. I have another dataframe which contains a plain English description of the sensor names. It looks something like this:</p>\n\n<pre><code>Date          zz8029    df456sz\n2017-01-01    1            2\n...           .            .\n...           .            .\n</code></pre>\n\n<p>The cipher, second dataframe looks like this:</p>\n\n<pre><code>name     description\nzz8029   ROOM201-TEMP\n</code></pre>\n\n<p>Is there a way to programatically rename all of my colums in the first dataframe, using the cipher second dataframe? There are hundreds of sensors names so manually renaming them wont do it. The result would look something like this</p>\n\n<pre><code>Date          ROOM201-TEMP    ROOM200-TEMP\n2017-01-01    1                2\n...           .                .\n...           .                .\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "graph"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1532553509, "post_id": 51527766, "comment_id": 90024219, "body": "Just do a second call to <code>.plot()</code> with a different set of <code>y</code> values with the same <code>x</code> values? What is your code? You can do multiple <code>plt.plot()</code> calls before <code>plt.show()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 9579960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e1c27372ded16d9b0ddfc26346ac74?s=128&d=identicon&r=PG&f=1", "display_name": "BobelLegend", "link": "https://stackoverflow.com/users/9579960/bobellegend"}, "edited": false, "score": 0, "creation_date": 1532554319, "post_id": 51527830, "comment_id": 90024532, "body": "plt.plot still will have problems because temperatures is an array of arrays (based on latitude and longitude) so they have different first dimensions"}, {"owner": {"reputation": 89, "user_id": 10129915, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zIXdBvlR5KA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pxUmXYZWI1ZpSP39wxqEs6757vJA/mo/photo.jpg?sz=128", "display_name": "Malcoto", "link": "https://stackoverflow.com/users/10129915/malcoto"}, "reply_to_user": {"reputation": 79, "user_id": 9579960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e1c27372ded16d9b0ddfc26346ac74?s=128&d=identicon&r=PG&f=1", "display_name": "BobelLegend", "link": "https://stackoverflow.com/users/9579960/bobellegend"}, "edited": false, "score": 1, "creation_date": 1532554850, "post_id": 51527830, "comment_id": 90024706, "body": "Could you edit your question to show what format the temperatures array is? I don&#39;t quite get what you mean, but I feel like a list comprehension should get you the temperatures as a list of floats."}], "tags": [], "owner": {"reputation": 89, "user_id": 10129915, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zIXdBvlR5KA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pxUmXYZWI1ZpSP39wxqEs6757vJA/mo/photo.jpg?sz=128", "display_name": "Malcoto", "link": "https://stackoverflow.com/users/10129915/malcoto"}, "is_accepted": false, "score": 0, "last_activity_date": 1532553673, "creation_date": 1532553673, "answer_id": 51527830, "question_id": 51527766, "link": "https://stackoverflow.com/questions/51527766/python-how-to-plot-an-array-of-y-values-for-one-x-value-in-python/51527830#51527830", "title": "Python: How to plot an array of y values for one x value in python", "body": "<p>Try this code:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nplt.plot(times, temperatures, 'ro')\nplt.axis([min(times)-1, max(times)+1,\n          min(temperatures)-1, max(temperatures)+1])\nplt.show()\n</code></pre>\n\n<p>It should make a dot plot of temperatures over times.</p>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 9796202, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CJEcGwQxZ8I/AAAAAAAAAAI/AAAAAAAABZM/WEEu5vTBQ2k/photo.jpg?sz=128", "display_name": "Vibhor Karnawat", "link": "https://stackoverflow.com/users/9796202/vibhor-karnawat"}, "is_accepted": false, "score": 0, "last_activity_date": 1532553806, "creation_date": 1532553806, "answer_id": 51527863, "question_id": 51527766, "link": "https://stackoverflow.com/questions/51527766/python-how-to-plot-an-array-of-y-values-for-one-x-value-in-python/51527863#51527863", "title": "Python: How to plot an array of y values for one x value in python", "body": "<p>You can simply repeat the X values which are common for y values</p>\n\n<p>Suppose\n<code>[x,x,x,x],[y1,y2,y3,y4]</code></p>\n"}], "owner": {"reputation": 79, "user_id": 9579960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e1c27372ded16d9b0ddfc26346ac74?s=128&d=identicon&r=PG&f=1", "display_name": "BobelLegend", "link": "https://stackoverflow.com/users/9579960/bobellegend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1269, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1532629390, "creation_date": 1532553326, "last_edit_date": 1532629390, "question_id": 51527766, "link": "https://stackoverflow.com/questions/51527766/python-how-to-plot-an-array-of-y-values-for-one-x-value-in-python", "title": "Python: How to plot an array of y values for one x value in python", "body": "<p>I am trying to plot an array of temperatures for different location during one day in python and want it to be graphed in the format (time, temperature_array). I am using matplotlib and currently only know how to graph 1 y value for an x value.</p>\n\n<p>The temperature code looks like this:\n<code>Temperatures = [[Temp_array0] [Temp_array1] [Temp_array2]...]</code>, where each numbered array corresponds to that time and the temperature values in the array are at different latitudes and longitudes.</p>\n"}, {"tags": ["python", "multithreading", "output", "capture"], "comments": [{"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 1, "creation_date": 1532553695, "post_id": 51527750, "comment_id": 90024290, "body": "Are you asking how to capture all the output into a string <i>and</i> also have it printed in real-time?"}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1532553829, "post_id": 51527750, "comment_id": 90024332, "body": "I guess you don&#39;t care that the output from the different threads gets all mixed together. Or would you prefer it if there is a way to identify the output of each thread?"}, {"owner": {"reputation": 41, "user_id": 9541778, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "\u0412\u043e\u043b\u043e\u0434\u0438\u043c\u0438\u0440 \u0425\u0440\u0438\u0441\u0442\u0435\u043d\u043a\u043e", "link": "https://stackoverflow.com/users/9541778/%d0%92%d0%be%d0%bb%d0%be%d0%b4%d0%b8%d0%bc%d0%b8%d1%80-%d0%a5%d1%80%d0%b8%d1%81%d1%82%d0%b5%d0%bd%d0%ba%d0%be"}, "reply_to_user": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1532554218, "post_id": 51527750, "comment_id": 90024494, "body": "Yes, I dont care. All I need to capture all output as it is generated. I need it to show    it in my GUI in real time. Now GUI shows nothing when threads are working."}], "answers": [{"comments": [{"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1532554653, "post_id": 51527931, "comment_id": 90024642, "body": "I suspect that printing to the terminal in real-time is a red herring, and the OP really wants the redirected stdout to appear in his GUI in real-time."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 1, "creation_date": 1532555394, "post_id": 51527931, "comment_id": 90024897, "body": "@PM2Ring I couldn&#39;t figure out what the OP wants, so I wrote two different things to show how easy it is to write whatever he actually does want. Of course if he just copies and pastes either one without reading anything, the odds that it happens to do what he wants are a million to one, but I&#39;m not too concerned with that."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 1, "last_activity_date": 1532554117, "creation_date": 1532554117, "answer_id": 51527931, "question_id": 51527750, "link": "https://stackoverflow.com/questions/51527750/capture-print-output-from-multiple-threads-in-python/51527931#51527931", "title": "Capture print output from multiple threads in python", "body": "<p>What you want to do is write your own <code>TextIOBase</code> class (or, if you want binary data, write your own <code>RawIOBase</code> and then wrap a stock <code>TextIOWrapper</code> around it), where you can put whatever behavior you want.</p>\n\n<p>As you can see from <a href=\"https://docs.python.org/3/library/io.html#class-hierarchy\" rel=\"nofollow noreferrer\">the docs</a>. all you need to implement for <code>TextIOBase</code> is <code>detach</code>, <code>read</code>, <code>readline</code>, and <code>write</code>. And the first three aren't relevant for what you're doing.</p>\n\n<hr>\n\n<p>So, what should your <code>write</code> look like? Well, it depends on what you want to do. </p>\n\n<p>it sounds like your goal is to tee everything to both real stdout and to a <code>StringIO</code>. If so, this is pretty trivial. </p>\n\n<p>The only question is what you want to do if one of the targets raises an exception, or writes fewer bytes than the other, etc. Since an <code>IOString</code> is never going to do either of those, we can write something really dumb that just assumes that whatever real stdout did was the right thing to do.</p>\n\n<pre><code>class TeeTextIO(io.TextIOBase):\n    def __init__(self, target):\n        self.target = target\n        self.stringio = io.StringIO()\n    def write(self, s):\n        writecount = self.target.write(s)\n        self.stringio.write(s[:writecount])\n        return writecount\n</code></pre>\n\n<p>And now:</p>\n\n<pre><code>stdout = sys.stdout\nsys.stdout = TeeTextIO(sys.stdout)\nthreads_conn(connect, devices) #- here many threads starts with many print inside\noutput = sys.stdout.stringio.getvalue()\nsys.stdout = stdout\n</code></pre>\n\n<p>Now, the output has gone to the real <code>stdout</code> as it came in, but it's also been stored in the <code>StringIO</code> for whatever you want to do with it later.</p>\n\n<p>(Notice that this class will work with <em>any</em> <code>TextIOBase</code>, like a file you <code>open</code>, not just with <code>stdout</code>. It didn't cost us anything to make it general, so why not?)</p>\n\n<hr>\n\n<p>What if you wanted to do something totally different, like spread each <code>write</code> randomly among 10 different files? It should be obvious:</p>\n\n<pre><code>class SpreadTextWriter(io.TextIOBase):\n    def __init__(self, *files):\n        self.files = files\n    def write(self, s):\n        return random.choice(self.files).write(s)\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 9541778, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "\u0412\u043e\u043b\u043e\u0434\u0438\u043c\u0438\u0440 \u0425\u0440\u0438\u0441\u0442\u0435\u043d\u043a\u043e", "link": "https://stackoverflow.com/users/9541778/%d0%92%d0%be%d0%bb%d0%be%d0%b4%d0%b8%d0%bc%d0%b8%d1%80-%d0%a5%d1%80%d0%b8%d1%81%d1%82%d0%b5%d0%bd%d0%ba%d0%be"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1428, "favorite_count": 0, "accepted_answer_id": 51527931, "answer_count": 1, "score": 2, "last_activity_date": 1532554117, "creation_date": 1532553238, "last_edit_date": 1532553438, "question_id": 51527750, "link": "https://stackoverflow.com/questions/51527750/capture-print-output-from-multiple-threads-in-python", "title": "Capture print output from multiple threads in python", "body": "<p>I have a function which inside lauches multiple threads running in parallel. Threads print something and I want to capture this output from external function. I tried the next code to capture the output:</p>\n\n<pre><code>import sys, io\nstdout = sys.stdout\nsys.stdout = io.StringIO()\nthreads_conn(connect, devices) #- here many threads starts with many print inside\noutput = sys.stdout.getvalue()\nsys.stdout = stdout\n\nprint(output)\n</code></pre>\n\n<p>This code works. But the problem is that output is printed only when all theads complete. So I have a freeze. Once all threads are done - whole output is printed. What I would like to have - have output once it is generated inside - in other words in real-time. Now I have the whole outout buffer printed at once.\n<strong>How get all of the threads to output in real-time?</strong></p>\n"}, {"tags": ["python", "scikit-learn", "grid-search"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6506174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B5V3Q.png?s=128&g=1", "display_name": "David Bean", "link": "https://stackoverflow.com/users/6506174/david-bean"}, "edited": false, "score": 0, "creation_date": 1532614324, "post_id": 51533110, "comment_id": 90049497, "body": "I&#39;m using MLPRegressor from sklearn.neural_network. I added the kf variable from  your solution. My results did change, but the mean absolute error is still fluctuating up and down when I delete grid parameters. I also realized that GridSearchCV is performing on my training data, not my test data, so I also changed my output to reflect that."}], "tags": [], "owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "is_accepted": true, "score": 2, "last_activity_date": 1532933657, "last_edit_date": 1532933657, "creation_date": 1532589527, "answer_id": 51533110, "question_id": 51527725, "link": "https://stackoverflow.com/questions/51527725/gridsearchcv-scoring-on-mean-absolute-error/51533110#51533110", "title": "GridSearchCV scoring on mean absolute error", "body": "<p>The grid-search and model fitting in essential, depends on random number generators for different purposes. In scikit-learn this is controlled by a param <code>random_state</code>. See my other answers to know about it:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/42477052/3374996\">https://stackoverflow.com/a/42477052/3374996</a></li>\n<li><a href=\"https://stackoverflow.com/a/42197534/3374996\">https://stackoverflow.com/a/42197534/3374996</a></li>\n</ul>\n\n<p>Now in your case, I can think of these things where this random-number generation affects the training:</p>\n\n<p>1) <code>GridSearchCV</code> will by default use a KFold with 3 folds for regression tasks, which may split data differently on different runs. It may happen that the splits that happened in two grid-search processes are different, and hence different scores.  </p>\n\n<p>2) You are using a separate test data for calculation the mse which the GridSearchCV dont have access to. So it will find the parameters appropriate for the supplied data which may or may not be perfectly valid for the separate dataset. </p>\n\n<h1><strong>Update</strong>:</h1>\n\n<p>I see now that you have used <code>random_state</code> in param grid for model, so this point 3 now dont apply.</p>\n\n<p>3) You have not shown which <code>model</code> are you using. But if the model during training is using sub-samples of data (like selecting smaller number of features, or smaller number of rows for iterations, or for different internal estimators), than you need to fix that too to get the same scores.\nYou need to check the results by first fixing that.</p>\n\n<h1>Recommendation Example</h1>\n\n<p>You can take ideas from this example:</p>\n\n<pre><code># Define a custom kfold\nfrom sklearn.model_selection import KFold\nkf = KFold(n_splits=3, random_state=0)\n\n# Check if the model you chose support random_state\nmodel = WhateEverYouChoseClassifier(..., random_state=0, ...)\n\n# Pass these to grid-search\ngs = GridSearchCV(model, param_grid, scoring='neg_mean_absolute_error', cv = kf)\n</code></pre>\n\n<p>And then again do the two experiments you did by changing the param grid. </p>\n"}], "owner": {"reputation": 23, "user_id": 6506174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B5V3Q.png?s=128&g=1", "display_name": "David Bean", "link": "https://stackoverflow.com/users/6506174/david-bean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5810, "favorite_count": 0, "accepted_answer_id": 51533110, "answer_count": 1, "score": 2, "last_activity_date": 1532933657, "creation_date": 1532553114, "question_id": 51527725, "link": "https://stackoverflow.com/questions/51527725/gridsearchcv-scoring-on-mean-absolute-error", "title": "GridSearchCV scoring on mean absolute error", "body": "<p>I'm trying to setup an instance of GridSearchCV to determine which set of hyperparameters will produce the lowest mean absolute error. <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.model_selection.GridSearchCV.html\" rel=\"nofollow noreferrer\">This scikit documentation</a> indicates that score metrics can be passed into the grid upon creation of a GridSearchCV (below). </p>\n\n<pre><code>param_grid = {\n    'hidden_layer_sizes' : [(20,),(21,),(22,),(23,),(24,),(25,),(26,),(27,),(28,),(29,),(30,),(31,),(32,),(33,),(34,),(35,),(36,),(37,),(38,),(39,),(40,)],\n    'activation' : ['relu'],\n    'random_state' : [0]\n    }\ngs = GridSearchCV(model, param_grid, scoring='neg_mean_absolute_error')\ngs.fit(X_train, y_train)\nprint(gs.scorer_)\n\n[1] make_scorer(mean_absolute_error, greater_is_better=False)\n</code></pre>\n\n<p>However the grid search is not selecting the best performing model in terms of mean absolute error</p>\n\n<pre><code>model = gs.best_estimator_.fit(X_train, y_train)\nprint(metrics.mean_squared_error(y_test, model.predict(X_test)))\nprint(gs.best_params_)\n\n[2] 125.0\n[3] Best parameters found by grid search are: {'hidden_layer_sizes': (28,), 'learning_rate': 'constant', 'learning_rate_init': 0.01, 'random_state': 0, 'solver': 'lbfgs'}\n</code></pre>\n\n<p>After running the above code and determining the so called 'best parameters', I delete one of the values found in gs.best_params_, and find that by running my program again the mean squared error will sometimes decrease.</p>\n\n<pre><code>param_grid = {\n'hidden_layer_sizes' : [(20,),(21,),(22,),(23,),(24,),(25,),(26,),(31,),(32,),(33,),(34,),(35,),(36,),(37,),(38,),(39,),(40,)],\n'activation' : ['relu'],\n'random_state' : [0]\n}\n\n[4] 122.0\n[5] Best parameters found by grid search are: {'hidden_layer_sizes': (23,), 'learning_rate': 'constant', 'learning_rate_init': 0.01, 'random_state': 0, 'solver': 'lbfgs'}\n</code></pre>\n\n<p>To clarify, I changed the set that was fed into my grid search so that it did not contain an option to select a hidden layer size of 28, when that change was made, I ran the code again and this time it picked a hidden layer size of 23 and the mean absolute error decreased (even though the size of 23 had been available from the start), why didn't it just pick this option from the start if it is evaluating the mean absolute error?</p>\n"}, {"tags": ["python", "shapefile", "pyshp"], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 5100504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b5d35449d018d5546603f068e6670f?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5100504/daniel"}, "edited": false, "score": 0, "creation_date": 1558967279, "post_id": 56288894, "comment_id": 99263374, "body": "Thank you, I appreciate. I even found an easier solution that worked in previous versions of pyshp (versions 1.x) but it doesn&#39;t in the newest ones (versions 2.x). The library has significantly changed so I had to update the script I once wrote and your solution has been very helpful. However, be careful because your script might not work if you install the latest pyshp version."}, {"owner": {"reputation": 67, "user_id": 5100504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b5d35449d018d5546603f068e6670f?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5100504/daniel"}, "edited": false, "score": 0, "creation_date": 1558967286, "post_id": 56288894, "comment_id": 99263378, "body": "Now, the Writer() argument has to be the name of the new file (not the geometry type) and you don&#39;t need to save the shapefile at the end of the script using save(). I recommend you to have a look at the documentation of the pyshp&#39;s newest version. You&#39;ll probably need to update your scripts because of those changes."}], "tags": [], "owner": {"reputation": 143, "user_id": 3301191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cb63866a15a68dee095af8ce1d607be?s=128&d=identicon&r=PG&f=1", "display_name": "TennyApps", "link": "https://stackoverflow.com/users/3301191/tennyapps"}, "is_accepted": false, "score": 0, "last_activity_date": 1558687349, "creation_date": 1558687349, "answer_id": 56288894, "question_id": 51527720, "link": "https://stackoverflow.com/questions/51527720/problems-with-multipart-shapes-using-pyshp-when-creating-a-new-shapefile/56288894#56288894", "title": "Problems with multipart shapes using PyShp when creating a new Shapefile", "body": "<p>I found this question whilst looking for a solution to save multiple shapes in one shapefile using pyshp. Your code helped me solve my problem and so i'll provide a solution for this.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import shapefile\n\nfile= \"blockgroups.shp\"\noutFile = \"newblockgroup3000\"\nsf = shapefile.Reader(file)\nshapeRec= sf.shapeRecords()\nw = shapefile.Writer(shapefile.POLYGON)\nw.field('BKG_KEY', 'C', 40)\nw.field('POP1990', 'N', 40)\nw.field('NWHITES', 'N', 40)\nw.field('NBLACKS', 'N', 40)\n\nfor row in shapeRec:\n    bkg_key = row.record[1]\n    pop1990 = row.record[2]\n    white = row.record[7]\n    black = row.record[8]\n    points = row.shape.points\n    parts = row.shape.parts\n    geom = []\n\n    # handle parts here\n    for i in range(len(parts)):\n        xy = []\n        pt = None\n        if i &lt; len(parts) - 1:\n            pt = points[parts[i]:parts[i + 1]]\n        else:\n            pt = points[parts[i]:]\n        for x, y in pt:\n            xy.append([x, y])\n        geom.append(xy)\n\n    w.poly(geom)\n    w.record(bkg_key,pop1990,white,black)\nw.save()\n\n</code></pre>\n\n<p>Result before edit:\n<a href=\"https://i.stack.imgur.com/92LBv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/92LBv.png\" alt=\"enter image description here\"></a></p>\n\n<p>Result after edit:\n<a href=\"https://i.stack.imgur.com/sWT58.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sWT58.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 67, "user_id": 5100504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b5d35449d018d5546603f068e6670f?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5100504/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 587, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1558687349, "creation_date": 1532553094, "last_edit_date": 1532705003, "question_id": 51527720, "link": "https://stackoverflow.com/questions/51527720/problems-with-multipart-shapes-using-pyshp-when-creating-a-new-shapefile", "title": "Problems with multipart shapes using PyShp when creating a new Shapefile", "body": "<p>I have a shapefile (blockgroups.shp) that I downloaded from: \n<a href=\"https://github.com/GeospatialPython/pyshp/tree/master/shapefiles\" rel=\"nofollow noreferrer\">https://github.com/GeospatialPython/pyshp/tree/master/shapefiles</a></p>\n\n<p>I want to create a new Shapefile with only four attributes (bkg_key, pop1990, white and black) using PyShp.</p>\n\n<p>I've tried with this code:</p>\n\n<pre><code>import shapefile\nfile= \"blockgroups.shp\"\noutFile = \"newblockgroup3000\"\nsf = shapefile.Reader(file)\nshapeRec= sf.shapeRecords()\nw = shapefile.Writer(shapefile.POLYGON)\nw.field('BKG_KEY', 'C', 40)\nw.field('POP1990', 'N', 40)\nw.field('NWHITES', 'N', 40)\nw.field('NBLACKS', 'N', 40)\nfor row in shapeRec:\n    bkg_key = row.record[1]\n    pop1990 = row.record[2]\n    white = row.record[7]\n    black = row.record[8]\n    points = row.shape.points\n    parts = row.shape.parts\n    w.parts = parts\n    w.poly([points])\n    w.record(bkg_key,pop1990,white,black)\n    w.save(outFile)\n</code></pre>\n\n<p>It works for all the shapes except for one. </p>\n\n<p>There is a record that has more than one part. The record which has more than one part is 'BKG_KEY = 060750601001' and 'POP = 4531'. In the new shapefile, this record has a strange shape because pyShp automatically connects the first and the last vertexs which come from different parts of the feature.</p>\n\n<p>If I only select the records that 'POP1990 &lt;4531' and the records that 'POP1990>4531'(excluding the mentioned record) it works so the problem only happens when there are records with multiple parts.</p>\n\n<p>Is there any way to keep the number of parts of the original shapefile when I create the new one? How can I handle this problem.</p>\n\n<p>I would appreciate some help.\nThanks</p>\n"}, {"tags": ["python", "numpy", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 8423, "user_id": 463796, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/Yihjq.png?s=128&g=1", "display_name": "w-m", "link": "https://stackoverflow.com/users/463796/w-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1532558663, "creation_date": 1532558663, "answer_id": 51528670, "question_id": 51527688, "link": "https://stackoverflow.com/questions/51527688/modifying-numpy-arrays-with-opencv/51528670#51528670", "title": "Modifying numpy arrays with OpenCV", "body": "<p>OpenCV\u2019s resize does not actually modify the array, it creates a completely new one. The documentation for the function can be found <a href=\"https://docs.opencv.org/2.4/modules/imgproc/doc/geometric_transformations.html?#resize\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>For each pixel in the destination array it will scale its coordinates to match the size of the source array. The pixel at the mapped coordinate will be looked up in the source array and written to the destination. By default it does a bilinear interpolation, considering averaged sub pixel values.</p>\n\n<p>Image scaling is a common operation. You will not have to reimplement this in C# and can instead rely on libraries.</p>\n"}], "owner": {"reputation": 35, "user_id": 9745271, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PK7v4fvNEVo/AAAAAAAAAAI/AAAAAAAAACw/qOEDwL1Y5_w/photo.jpg?sz=128", "display_name": "Samuel Lopes", "link": "https://stackoverflow.com/users/9745271/samuel-lopes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 51528670, "answer_count": 1, "score": 0, "last_activity_date": 1532558663, "creation_date": 1532552951, "question_id": 51527688, "link": "https://stackoverflow.com/questions/51527688/modifying-numpy-arrays-with-opencv", "title": "Modifying numpy arrays with OpenCV", "body": "<p>Just trying to understand how a piece of Python code works. The code in question modifies the dimensions of a numpy array using cv2.resize. I would like to know the way that opencv modifies the array in order to populate the new dimensions of the array. I'm trying to translate this into C#, so any psuedocode in an explanation would also be appreciated.</p>\n\n<pre><code>    print(last_heatmap.shape) --&gt; [32,32,21]\n    print(type(last_heatmap)) --&gt; numpy.ndarray\n    last_heatmap = cv2.resize(last_heatmap, (256,256))\n    print(last_heatmap.shape) --&gt; [256,256,21]\n    print(type(last_heatmap)) --&gt; numpy.ndarray\n</code></pre>\n\n<p>I'm looking for a understanding of how this particular function works, as a bonus suggestions about how to replicate this in other languages (for c#, perhaps an 3d-array of floats?). Thanks.</p>\n"}, {"tags": ["python", "mv", "python-watchdog"], "comments": [{"owner": {"reputation": 4085, "user_id": 9057497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6I5A1.png?s=128&g=1", "display_name": "madjaoue", "link": "https://stackoverflow.com/users/9057497/madjaoue"}, "edited": false, "score": 0, "creation_date": 1532553006, "post_id": 51527673, "comment_id": 90024010, "body": "The error says it couldn&#39;t find the file <code>sample.tsv</code>. Try to provide an absolute path to the file, this should fix it.  Also, there are better ways of moving a file in python. Take a look at : <a href=\"https://stackoverflow.com/questions/8858008/how-to-move-a-file-in-python\" title=\"how to move a file in python\">stackoverflow.com/questions/8858008/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "is_accepted": true, "score": 1, "last_activity_date": 1532553457, "creation_date": 1532553457, "answer_id": 51527796, "question_id": 51527673, "link": "https://stackoverflow.com/questions/51527673/not-able-to-move-file-python/51527796#51527796", "title": "not able to move file python", "body": "<ol>\n<li>don't use <code>os.system</code> ever - to run subprocesses in python, use the <code>subprocess</code> module. </li>\n<li>even using <code>subprocess</code> is too much in this case, as you want to move a file so you can just use <code>shutil.move()</code> to do the same without invoking a separate process.</li>\n<li><code>os.listdir</code> returns only the filenames without the path, so you have to add that yourself to be able to find the file: <code>os.path.join(self.datadir, f)</code></li>\n<li>to watch directories/files efficiently without checking them every 5 seconds, you can use the <a href=\"https://github.com/seb-m/pyinotify\" rel=\"nofollow noreferrer\">pyinotify</a> module - it uses a efficient system api to watch the directory and will call your function when it changes, no polling involved.</li>\n</ol>\n"}], "owner": {"reputation": 689, "user_id": 3868051, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e132422e334d5ce7d763a8d44b58729b?s=128&d=identicon&r=PG&f=1", "display_name": "user3868051", "link": "https://stackoverflow.com/users/3868051/user3868051"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 339, "favorite_count": 0, "accepted_answer_id": 51527796, "answer_count": 1, "score": 0, "last_activity_date": 1532553457, "creation_date": 1532552888, "question_id": 51527673, "link": "https://stackoverflow.com/questions/51527673/not-able-to-move-file-python", "title": "not able to move file python", "body": "<p>There have been some similar solutions given before but none seem to work for me.</p>\n\n<p>code:</p>\n\n<pre><code>def watch_dir(self, prefix, dest):\n    before = dict([(f, None) for f in os.listdir(self.data_dir)])\n    while 1:\n        time.sleep(5)\n        after = dict([(f, None) for f in os.listdir(self.data_dir)])\n        new_files = [f for f in after if not f in before and f.startswith(prefix)]\n        before = new_files\n        for f in new_files:\n            os.system('mv {f} {dest}'.format(f=f, dest=dest))\n</code></pre>\n\n<p>When I print new_files I get -> <code>('new_files = ', ['sample.tsv'])</code></p>\n\n<p>but the <code>mv</code> command gives this error:\n<code>mv: cannot stat 'sample.tsv': No such file or directory</code></p>\n\n<p>Can someone help me understand what could be going wrong here?!</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "pyqt", "pyqt5", "qlayout"], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 0, "last_activity_date": 1532554534, "creation_date": 1532554534, "answer_id": 51528018, "question_id": 51527635, "link": "https://stackoverflow.com/questions/51527635/pyqt5-managing-layout-with-labels/51528018#51528018", "title": "pyqt5 managing layout with labels", "body": "<p>A layout must be inside a widget, but in your case the <code>QVBoxLayout</code> is not denoted by any widget.</p>\n\n<p>The idea is that you have the following structure:</p>\n\n<pre><code>widget\n\u2514\u2500\u2500 vlayout\n    \u2514\u2500\u2500 hlayout\n        \u251c\u2500\u2500 a1\n        \u2514\u2500\u2500 a2\n</code></pre>\n\n<p>Using that structure we have the following:</p>\n\n<pre><code>import sys\n\nfrom PyQt5 import QtCore, QtWidgets\n\n\nclass Example(QtWidgets.QMainWindow):\n    def __init__(self, *args, **kwargs):\n        super(Example, self).__init__(*args, **kwargs)            \n        self.initUI()\n\n    def initUI(self):\n        widget = QtWidgets.QWidget()\n\n        vlayout = QtWidgets.QVBoxLayout(widget)\n        hlayout = QtWidgets.QHBoxLayout()\n\n        a1 = QtWidgets.QLabel('label1', )\n        a2 = QtWidgets.QLabel('label2')\n\n        hlayout.addWidget(a1)\n        hlayout.addWidget(a2)\n        hlayout.addStretch()\n        vlayout.addLayout(hlayout)\n        vlayout.addStretch()\n\n        self.setCentralWidget(widget)\n\n        self.setGeometry(500, 500, 500, 500)\n        self.setWindowTitle('Lines')\n        self.show()\n\n\nif __name__ == '__main__':\n\n    app = QtWidgets.QApplication(sys.argv)\n    ex = Example()\n#     ex.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/bBcPg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bBcPg.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 16594, "user_id": 1050619, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/784ade8d4151295e24765ffc4fcd60b4?s=128&d=identicon&r=PG", "display_name": "user1050619", "link": "https://stackoverflow.com/users/1050619/user1050619"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "accepted_answer_id": 51528018, "answer_count": 1, "score": 0, "last_activity_date": 1532554557, "creation_date": 1532552717, "last_edit_date": 1532554557, "question_id": 51527635, "link": "https://stackoverflow.com/questions/51527635/pyqt5-managing-layout-with-labels", "title": "pyqt5 managing layout with labels", "body": "<p>Im trying to add couple of labels to my layout and those items needs to be adjacent.</p>\n\n<p>The below code keeps them adjacent but its in the middle of the layout. I want those labels to be in the top.</p>\n\n<pre><code>import sys\n\nfrom PyQt5.QtWidgets import QWidget, QApplication, QDialog, QGridLayout, QLabel, QLineEdit\nfrom PyQt5.Qt import QHBoxLayout, QWindow, QMainWindow, QVBoxLayout\n\n\nclass Example(QMainWindow):\n    def __init__(self, *args, **kwargs):\n        super(Example, self).__init__(*args, **kwargs)            \n        self.initUI()\n\n    def initUI(self):\n        vlayout = QVBoxLayout()\n        hlayout = QHBoxLayout()\n        widget = QWidget()\n        widget.setLayout(hlayout)\n\n        a1 = QLabel('label1')\n        a2 = QLabel('label2')\n        hlayout.addWidget(a1)\n        hlayout.addWidget(a2)\n        hlayout.addStretch(2)\n        vlayout.addLayout(hlayout)\n        vlayout.addStretch(1)\n\n        self.setCentralWidget(widget)\n\n        self.setGeometry(500, 500, 500, 500)\n        self.setWindowTitle('Lines')\n        self.show()\n\n\nif __name__ == '__main__':\n\n    app = QApplication(sys.argv)\n    ex = Example()\n#     ex.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}, {"tags": ["python", "ipc", "named-pipes", "mkfifo"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1532682102, "post_id": 51527628, "comment_id": 90075694, "body": "Normally, the process that opens a FIFO for reading is blocked in the open call until there is a process open the FIFO for writing, and similarly, a process that opens a FIFO for writing is blocked until there is a process that opens the FIFO for reading.  Once the processes are unblocked, they can communicate, and eventually one process will close their file descriptor for the FIFO, and the other then is notified (EOF for the reader, SIGPIPE or an error for the writer).  If either of the processes wishes to resume using the FIFO, it must be reopened."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1532682249, "post_id": 51527628, "comment_id": 90075780, "body": "The recreating the FIFO with the same inode number is unusual.  Normally, there&#39;ll be enough other activity on the file system that the FIFO won&#39;t be recreated with the same inode.  However, I regard it as unlikely that the recreated FIFO is treated as the same FIFO by the kernel, even though they appear to have the same inode.  I&#39;m not 100% confident of that.  Which platform are you working on?  Do you do error checking of system calls?"}, {"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1532682530, "post_id": 51527628, "comment_id": 90075959, "body": "@JonathanLeffler I&#39;m working on <i>Raspberry PI Zero W</i> with Raspbian OS. Actually I don&#39;t want to close reader process because it reads from FIFO and sends some textual information to LCD screen until the machine is turned off(or all processes are killed). Here my simplified code logic: <a href=\"https://textuploader.com/dznpo\" rel=\"nofollow noreferrer\">textuploader.com/dznpo</a>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1532682832, "post_id": 51527628, "comment_id": 90076145, "body": "If you want the reader to be able to keep reading without reopening the FIFO when each writer closes it, you need an extra writer \u2014 possibly the process itself.  Once all the writers close the FIFO, it won&#39;t receive any more data \u2014 even if new writers try to open the FIFO.  If there&#39;s one process that could write, the reader won&#39;t receive EOF, but new writers will be able to open and write.  Be cautious!"}, {"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1532683166, "post_id": 51527628, "comment_id": 90076341, "body": "@JonathanLeffler it is guaranteed that there is always one writer and one reader process each time. As you can see from the aforegiven link there are two while infinite loops for reading. It satisfies my wish. <b>The only issue here is</b> that cleaning content of FIFO when the machine is turned on every time. By the way, Raspbian OS is based on Debian"}, {"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1532684352, "post_id": 51527628, "comment_id": 90077090, "body": "@JonathanLeffler Even Ubuntu 18.04 gives same result. I mean inode doesn&#39;t change. Could you glance at the output?  <a href=\"https://textuploader.com/dznp7\" rel=\"nofollow noreferrer\">textuploader.com/dznp7</a>"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1532690999, "post_id": 51527628, "comment_id": 90080684, "body": "Instead of a FIFO, I would use an Unix domain datagram socket, bound to an abstract address. This way you avoid all the problems you&#39;re observing."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1532878052, "post_id": 51527628, "comment_id": 90128810, "body": "On a Mac, I ran a sequence of commands thus: <code>$ mkfifo x</code> \u2014 <code>$ ls -li x</code> \u2014 <code>8622846218 prw-r--r--  1 jleffler  staff  0 Jul 29 08:26 x</code> \u2014 <code>$ rm x</code> \u2014 <code>$ mkfifo x</code> \u2014 <code>$ ls -li x</code> \u2014 <code>8622846225 prw-r--r--  1 jleffler  staff  0 Jul 29 08:26 x</code> \u2014 <code>$ rm x</code> and as you may be able to see, the inode numbers were different (8622846218 vs 8622846225). This behaviour depends on your file system and on what other activity occurs on the file system at the same time.  So, relying on the inode being the same is unwise; it still surprises me that you&#39;re seeing the consistency, but the evidence is clear."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1532878742, "post_id": 51527628, "comment_id": 90129008, "body": "Also testing on a Mac, I ran: <code>$ mkfifo fifo.1</code> \u2014 <code>$ (echo &quot;Hello&quot;; echo &quot;Goodbye&quot;) &gt; fifo.1 &amp;</code> \u2014 <code>[1] 92494</code> \u2014 <code>$ read x &lt; fifo.1</code> \u2014 <code>[1]+  Done                    ( echo &quot;Hello&quot;; echo &quot;Goodbye&quot; ) &gt; fifo.1</code> \u2014 <code>$ echo $x</code> \u2013 <code>Hello</code> \u2014 <code>$ read x &lt; fifo.1</code> \u2014 <code>^C-bash: fifo.1: Interrupted system call</code> \u2014 where the second read hung until I interrupted it.  This shows that when the FIFO is closed on both ends, any residual data in the FIFO is emptied by the system.  Thus, I believe your concerns about &#39;emptying the FIFO on startup&#39; are unwarranted, at least on more or less traditional Unix systems."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1532878811, "post_id": 51527628, "comment_id": 90129030, "body": "If some process keeps the FIFO open (which cannot happen across a system reboot, of course), then the FIFO contents will remain available for use.  That too could be demonstrated if necessary."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1532879157, "post_id": 51527628, "comment_id": 90129138, "body": "In your <a href=\"https://stackoverflow.com/questions/51527628/cleaning-flushing-of-named-pipe?noredirect=1#comment90075959_51527628\">comment</a> you mention <a href=\"https://textuploader.com/dznpo\" rel=\"nofollow noreferrer\">https://textuploader.com/dznpo</a>.  That has &#39;expired&#39;.  It is no longer available to us.  That&#39;s why external links to other sites are frowned upon \u2014 the data isn&#39;t reliably persistent.  Include the material in your question, please!  We should not have to refer to an external site to comprehend the question."}, {"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1533121310, "post_id": 51527628, "comment_id": 90227367, "body": "@JonathanLeffler Thank you for your advice and sorry for late answer. I will not repeat the external link sharing from now on. Besides, you said <i>This shows that when the FIFO is closed on both ends, any residual data in the FIFO is emptied by the system</i>. I want to be sure I understand properly that after every boot(every reset to the OS), the remained FIFO&#39;s content cleaned automatically? Because the FIFO approximately stays open for 4-5 hours max. Then the OS is shutdown. After a while, re turned on. Moreover, when I restart the system <code>stat</code> shows its size <code>0</code> always."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1533137510, "post_id": 51527628, "comment_id": 90238684, "body": "A FIFO is empty on reboot. A FIFO remains empty until there is both a reader and a writer process with the FIFO open. The FIFO retains information while there is either a reader or a writer process.  (Consider: <code>{ echo Hello; echo World; pause; } &gt; FIFO &amp;</code> (where <code>pause</code> is a program that executes the <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/pause.html\" rel=\"nofollow noreferrer\"><code>pause()</code></a> system call) followed by <code>read a &lt; FIFO; echo $a</code> twice; that sequence echos <code>Hello</code> and <code>World</code> \u2014 and leaves the <code>pause</code> process to be killed. By contrast, if you omit the <code>pause</code>, you get <code>Hello</code> and then errors."}, {"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1533137705, "post_id": 51527628, "comment_id": 90238819, "body": "@JonathanLeffler That&#39;s why I wonder. Thank you sir indeed."}], "answers": [{"comments": [{"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1532677985, "post_id": 51527716, "comment_id": 90073514, "body": "Could you check the question again?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1532704712, "post_id": 51527716, "comment_id": 90088757, "body": "Did the reading process have the FIFO open when you deleted the FIFO? After you delete a file (any type of file, including FIFOs) its inode can be reused, but the file isn&#39;t really deleted until all processes close it."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1532757914, "post_id": 51527716, "comment_id": 90103300, "body": "I don&#39;t see any reading or writing processes there. This answer is about how to solve the problem when you need to clear the FIFO while another process is reading from it. Your test doesn&#39;t match those conditions."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1532553073, "creation_date": 1532553073, "answer_id": 51527716, "question_id": 51527628, "link": "https://stackoverflow.com/questions/51527628/cleaning-flushing-of-named-pipe/51527716#51527716", "title": "Cleaning/flushing of named pipe", "body": "<p>Before reading from the FIFO, the reader can call <code>os.fstat(fd)</code> and <code>os.stat(filename)</code>, and check whether the inode numbers are the same. If they're not, it means the writer has removed and recreated the FIFO, so it should reopen it before reading.</p>\n"}], "owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1622, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1532877989, "creation_date": 1532552709, "last_edit_date": 1532877989, "question_id": 51527628, "link": "https://stackoverflow.com/questions/51527628/cleaning-flushing-of-named-pipe", "title": "Cleaning/flushing of named pipe", "body": "<p>I create FIFO to communicate between unrelated processes. In my project there is no way to break infinite loop in which the program runs. So, I can't <code>unlink</code> the FIFO.</p>\n\n<p>I thought that I could remove and recreate with same name if the FIFO exist beforehand in writer process. But what if reader process open the FIFO before the write process has a chance to remove and recreate it? I could use <code>sleep</code> in this regard but it seems not efficient.</p>\n\n<p>Moreover, I also thought that I could suspend the reader process until it receives a signal from the writer process but PID of the reader process is not known. Think them as two separate and different bash scripts. No sooner does OS start up than they start executions. </p>\n\n<ul>\n<li>Is there a way to clean/flush the FIFO?</li>\n<li><strong><code>open()</code> is used to open FIFO. If I <code>close</code> the FIFO and reopen it to write in a loop, is it cleaned/flushed? (guarantee?)</strong></li>\n</ul>\n\n<p>@Edit,</p>\n\n<p>Checking inode always yields same inode number. I mean even though I use <code>rm &lt;fifo.name&gt;</code> via terminal, then recreate FIFO, same inode number is given.</p>\n\n<pre><code>FIFO = '/tmp/test.fifo'\nfd = os.open(FIFO, os.O_RDONLY)\n\ninfo = os.fstat(fd)\nprint(\"inf fstat \" + str(info.st_ino))\n\nstatinfo = os.stat(FIFO)\nprint(\"inf stat \" + str(statinfo.st_ino))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>inf fstat 521406\ninf stat 521406\n</code></pre>\n\n<p><code>stat</code> information:</p>\n\n<pre><code>pi@raspberrypi:/tmp $ stat /tmp/test.fifo \n  File: /tmp/test.fifo\n  Size: 0           Blocks: 0          IO Block: 4096   fifo\nDevice: b307h/45831d    Inode: 521406      Links: 1\nAccess: (0644/prw-r--r--)  Uid: ( 1000/      pi)   Gid: ( 1000/      pi)\nAccess: 2018-07-27 03:48:05.958234732 -0400\nModify: 2018-07-27 04:25:52.925375655 -0400\nChange: 2018-07-27 04:25:52.925375655 -0400\n Birth -\n</code></pre>\n\n<hr>\n\n<p>As mentioned in a <a href=\"https://stackoverflow.com/questions/51527628/cleaning-flushing-of-named-pipe?noredirect=1#comment90077090_51527628\">comment</a>, here's a snippet of output from Ubuntu 16.04, previously uploaded to <a href=\"https://textuploader.com/dznp7\" rel=\"nofollow noreferrer\">TextUploader</a>:</p>\n\n<pre><code>soner@ubuntu:/tmp$ mkfifo test.fifo\nsoner@ubuntu:/tmp$ stat test.fifo \n  File: 'test.fifo'\n  Size: 0           Blocks: 0          IO Block: 4096   fifo\nDevice: 801h/2049d  Inode: 2228362     Links: 1\nAccess: (0664/prw-rw-r--)  Uid: ( 1000/   soner)   Gid: ( 1000/   soner)\nAccess: 2018-07-26 23:41:31.482184467 +0300\nModify: 2018-07-26 23:41:31.482184467 +0300\nChange: 2018-07-26 23:41:31.482184467 +0300\n Birth: -\nsoner@ubuntu:/tmp$ rm test.fifo \nsoner@ubuntu:/tmp$ mkfifo test.fifo\nsoner@ubuntu:/tmp$ stat test.fifo \n  File: 'test.fifo'\n  Size: 0           Blocks: 0          IO Block: 4096   fifo\nDevice: 801h/2049d  Inode: 2228362     Links: 1\nAccess: (0664/prw-rw-r--)  Uid: ( 1000/   soner)   Gid: ( 1000/   soner)\nAccess: 2018-07-26 23:41:46.766125062 +0300\nModify: 2018-07-26 23:41:46.766125062 +0300\nChange: 2018-07-26 23:41:46.766125062 +0300\n Birth: -\nsoner@ubuntu:/tmp$ \n</code></pre>\n"}, {"tags": ["python", "python-3.x", "sqlite"], "comments": [{"owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "edited": false, "score": 0, "creation_date": 1532552784, "post_id": 51527615, "comment_id": 90023898, "body": "<code>text = cur.fetchone()[0]</code>"}, {"owner": {"reputation": 7933, "user_id": 222421, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Zrns4.png?s=128&g=1", "display_name": "jramirez", "link": "https://stackoverflow.com/users/222421/jramirez"}, "edited": false, "score": 0, "creation_date": 1532552873, "post_id": 51527615, "comment_id": 90023950, "body": "or <code>print(text[0])</code> usually you get a <code>tuple</code> when you do queries like that."}], "answers": [{"tags": [], "owner": {"reputation": 1371, "user_id": 5103577, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Okf5j.png?s=128&g=1", "display_name": "Luke Borowy", "link": "https://stackoverflow.com/users/5103577/luke-borowy"}, "is_accepted": true, "score": 0, "last_activity_date": 1532552945, "creation_date": 1532552945, "answer_id": 51527685, "question_id": 51527615, "link": "https://stackoverflow.com/questions/51527615/sqlite-and-python-getting-just-text-value-from-table/51527685#51527685", "title": "SQLite and Python, getting just text value from table", "body": "<p>With that code, <code>text</code> is tuple, which can contain multiple values. You just want one. You can retrieve the first (in this case the only) item from it like this: <code>print (text[0])</code>. Or, you can just assign the first value when you get it: <code>text = cur.fetchone()[0]</code></p>\n"}], "owner": {"reputation": 11, "user_id": 10133721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fXkVb.png?s=128&g=1", "display_name": "Claytor", "link": "https://stackoverflow.com/users/10133721/claytor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 654, "favorite_count": 0, "accepted_answer_id": 51527685, "answer_count": 1, "score": 1, "last_activity_date": 1593395750, "creation_date": 1532552648, "question_id": 51527615, "link": "https://stackoverflow.com/questions/51527615/sqlite-and-python-getting-just-text-value-from-table", "title": "SQLite and Python, getting just text value from table", "body": "<p>I\u00b4m trying to get a clean output value from a sqlite table but not luck so far. The output value has , ' and () on it.</p>\n\n<pre><code>&gt;&gt;&gt; import sqlite3\n\n&gt;&gt;&gt; db = sqlite3.connect('C:\\\\Users\\\\userRock\\\\Desktop\\\\gen_profile.sqlite')\n&gt;&gt;&gt; cur = db.cursor()\n\n&gt;&gt;&gt; cur.execute (''' CREATE TABLE user (id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT) ''')\n&lt;sqlite3.Cursor object at 0x002E0EE0&gt;\n&gt;&gt;&gt; db.commit()\n\n&gt;&gt;&gt; cur.execute (''' INSERT INTO user(name) VALUES ('John'),('James') ''')\n&lt;sqlite3.Cursor object at 0x002E0EE0&gt;\n&gt;&gt;&gt; db.commit()\n\n&gt;&gt;&gt; cur.execute (''' SELECT name FROM user ORDER BY RANDOM() LIMIT 1 ''')\n&lt;sqlite3.Cursor object at 0x002E0EE0&gt;\n\n&gt;&gt;&gt; text = cur.fetchone()\n&gt;&gt;&gt; print (text)\n('James',)\n&gt;&gt;&gt;\n</code></pre>\n\n<p>The output is ('James,) but I'd like to get James, just the name without symbols. How could I do that?</p>\n\n<p>Thank you very much</p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 2732, "user_id": 9253013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51893a42ea4c5ad83252f7c6b4cddb47?s=128&d=identicon&r=PG&f=1", "display_name": "moshevi", "link": "https://stackoverflow.com/users/9253013/moshevi"}, "edited": false, "score": 0, "creation_date": 1532553165, "post_id": 51527594, "comment_id": 90024079, "body": "why not create a function that accepts the product of <code>dir()</code> ?"}, {"owner": {"reputation": 2732, "user_id": 9253013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51893a42ea4c5ad83252f7c6b4cddb47?s=128&d=identicon&r=PG&f=1", "display_name": "moshevi", "link": "https://stackoverflow.com/users/9253013/moshevi"}, "edited": false, "score": 0, "creation_date": 1532553404, "post_id": 51527594, "comment_id": 90024185, "body": "plus use <code>vars()</code> instead of <code>dir()</code> no need for <code>eval</code>."}, {"owner": {"reputation": 971, "user_id": 9814693, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/9814693/alex"}, "reply_to_user": {"reputation": 2732, "user_id": 9253013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51893a42ea4c5ad83252f7c6b4cddb47?s=128&d=identicon&r=PG&f=1", "display_name": "moshevi", "link": "https://stackoverflow.com/users/9253013/moshevi"}, "edited": false, "score": 0, "creation_date": 1532554730, "post_id": 51527594, "comment_id": 90024671, "body": "is there a way to simply pass a handle to the scope in which <code>list_my_frames</code> is being evaluated in and then pass that on to <code>dir</code>? ie <code>list_my_frames(my_scope): ...dir(my_scope)</code>?"}], "owner": {"reputation": 971, "user_id": 9814693, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/9814693/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 369, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1532552553, "creation_date": 1532552553, "question_id": 51527594, "link": "https://stackoverflow.com/questions/51527594/list-variables-in-memory-using-function-in-python", "title": "list variables in memory using function in python", "body": "<p>I would like to create a utility function that filters variables in my current environment and prints them (ie print all variables that have type <code>pd.core.frame.DataFrame</code>) and then put this function in my utils module. I used (<a href=\"https://stackoverflow.com/questions/41113663/pandas-get-a-list-of-all-data-frames-loaded-into-memory\">Pandas Get a List Of All Data Frames loaded into memory</a>):</p>\n\n<pre><code>import pandas as pd\ndef list_my_frames():\n    f = [var for var in dir() if isinstance(eval(var), pd.core.frame.DataFrame)]\n    return f\n</code></pre>\n\n<p>I would like to be able to pass my current environment to <code>dir()</code> so that I can use it outside of my utils module. How can I get a handle to my current environment in python?</p>\n"}, {"tags": ["python", "python-3.x", "list", "for-loop", "beautifulsoup"], "comments": [{"owner": {"reputation": 1371, "user_id": 5103577, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Okf5j.png?s=128&g=1", "display_name": "Luke Borowy", "link": "https://stackoverflow.com/users/5103577/luke-borowy"}, "edited": false, "score": 1, "creation_date": 1532552586, "post_id": 51527566, "comment_id": 90023811, "body": "please give the current output and the output that you want"}, {"owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "edited": false, "score": 0, "creation_date": 1532552588, "post_id": 51527566, "comment_id": 90023814, "body": "<code>content = [a.text for a in soup.select(&#39;a&#39;)]</code>, but better edit your question and post sample of HTML or URL and desired output."}, {"owner": {"reputation": 1298, "user_id": 9435107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e0a5095d1dee0d01c4b5f24f4be428?s=128&d=identicon&r=PG&f=1", "display_name": "W Stokvis", "link": "https://stackoverflow.com/users/9435107/w-stokvis"}, "edited": false, "score": 0, "creation_date": 1532552705, "post_id": 51527566, "comment_id": 90023866, "body": "If I&#39;m understanding you correctly, you&#39;re getting a list of lists in <code>content</code>. Try <code>.extend(temp)</code> instead of <code>.append(temp)</code>."}], "owner": {"reputation": 55, "user_id": 9132573, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/249a0a1505e272181d4bf41c9fa15136?s=128&d=identicon&r=PG&f=1", "display_name": "HenryAD", "link": "https://stackoverflow.com/users/9132573/henryad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1532552395, "creation_date": 1532552395, "question_id": 51527566, "link": "https://stackoverflow.com/questions/51527566/how-to-for-loop-strings-into-a-single-element-to-a-list", "title": "How to for loop strings into a single element to a list", "body": "<p>I'm going through each url page, and want to have all of the titles of all of the links from each page in their own respective cell in my content list. However, I believe I'm missing something obvious but I'm quite a novice. I know at the moment that every iteration creates a new cell in my list, so I'm trying to prevent that. </p>\n\n<pre><code>for url in url_list:\n        open_page = driver.get(url)\n        html_source = driver.page_source\n        soup = BeautifulSoup(html_source, 'html.parser')\n        links = soup.find('div', {'class': 'body'})\n        content = []\n        for link in links.find_all('a'):\n            temp = link.get_text()\n            content.append(temp)\n        print(content)\n</code></pre>\n"}, {"tags": ["python", "h2o"], "comments": [{"owner": {"reputation": 5207, "user_id": 6312126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DROAW.jpg?s=128&g=1", "display_name": "Lauren", "link": "https://stackoverflow.com/users/6312126/lauren"}, "edited": false, "score": 0, "creation_date": 1532734863, "post_id": 51527546, "comment_id": 90100169, "body": "can you please post screen shots of what steps you are taking in Flow and which cell you are looking at to see the training metrics in Flow? Since the model object is in the java backend, you should get the exact same results whether calling the model performance from python or flow. Also if you want to compare the two use <code>rfmodel.model_performance(train = True).r2()</code> instead of <code>rfmodel.model_performance(test_data=train).r2()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 5207, "user_id": 6312126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DROAW.jpg?s=128&g=1", "display_name": "Lauren", "link": "https://stackoverflow.com/users/6312126/lauren"}, "is_accepted": false, "score": 0, "last_activity_date": 1534525730, "creation_date": 1534525730, "answer_id": 51900094, "question_id": 51527546, "link": "https://stackoverflow.com/questions/51527546/drf-h2o-r2-meanings/51900094#51900094", "title": "DRF h2o r2 meanings", "body": "<p>The training metrics whether you get them through Flow or the Python API should be the same. </p>\n\n<p>One explanation could be that the frame was rebalanced for model training. You would need to take a look at your logs and see if says anything like <code>INFO: Rebalancing train dataset into 8 chunks.</code> which indicates rebalancing or <code>train dataset already contains 32 (non-empty)  chunks. No need to rebalance.</code> which indicates there wasn't rebalancing. In general the numbers you get from <code>model.model_performance(test_data=train).r2()</code> and <code>model.r2(train=True)</code> (which is likely the equivalent to the training metric in Flow you were referring to) should be the same as long as the number of CPUs is the same and the frame has the same layout.</p>\n"}], "owner": {"reputation": 141, "user_id": 3310237, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/74ca963917b8f71ef2841e423cd855b6?s=128&d=identicon&r=PG&f=1", "display_name": "Mauro Assis", "link": "https://stackoverflow.com/users/3310237/mauro-assis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534525730, "creation_date": 1532552295, "question_id": 51527546, "link": "https://stackoverflow.com/questions/51527546/drf-h2o-r2-meanings", "title": "DRF h2o r2 meanings", "body": "<p>I created a model using a python script and after that, I run the following instructions:</p>\n\n<pre><code>print(rfmodel.model_performance(test_data=train).r2())\nprint(rfmodel.model_performance(test_data=test).r2())\n</code></pre>\n\n<p>Then, I get: </p>\n\n<pre><code>0.8875126069766902\n0.7730216155314876\n</code></pre>\n\n<p>If I load the same model in Flow, in Training Metrics I see r2=0.776610.</p>\n\n<p>What\u00b4s the difference between python first instruction r2 and Flow r2?</p>\n"}, {"tags": ["python", "python-3.x", "decorator", "python-decorators"], "answers": [{"comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 32215, "user_id": 3789550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mGqv.gif?s=128&g=1", "display_name": "heemayl", "link": "https://stackoverflow.com/users/3789550/heemayl"}, "edited": false, "score": 0, "creation_date": 1532554248, "post_id": 51527614, "comment_id": 90024508, "body": "@heemayl: I added the usual exposition with links to the documentation."}, {"owner": {"reputation": 81, "user_id": 10049527, "user_type": "registered", "profile_image": "https://graph.facebook.com/1891284457840291/picture?type=large", "display_name": "Benjamin Kosten", "link": "https://stackoverflow.com/users/10049527/benjamin-kosten"}, "edited": false, "score": 0, "creation_date": 1532653196, "post_id": 51527614, "comment_id": 90066290, "body": "Is there a better way to go about writing a decorator? Following PEP 20 the zen of python &quot;Simple is better than complex. Flat is better than nested.&quot; the nested function seems a bit obnoxious if you ask me."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 81, "user_id": 10049527, "user_type": "registered", "profile_image": "https://graph.facebook.com/1891284457840291/picture?type=large", "display_name": "Benjamin Kosten", "link": "https://stackoverflow.com/users/10049527/benjamin-kosten"}, "edited": false, "score": 0, "creation_date": 1532684516, "post_id": 51527614, "comment_id": 90077194, "body": "@BenjaminKosten: Not sure why you think that. A decorator is expected to return either the original function or a replacement object. The easiest and simplest way to produce a replacement that re-uses the original is by using a nested function object that then has access to the original as a closure. The added advantage is that the produced function object is unique; you can and should use <a href=\"https://docs.python.org/3/library/functools.html#functools.wraps\" rel=\"nofollow noreferrer\"><code>@functools.wraps(func)</code></a> to copy across identifying information. And decorators greatly help make the rest of your code simple!"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 81, "user_id": 10049527, "user_type": "registered", "profile_image": "https://graph.facebook.com/1891284457840291/picture?type=large", "display_name": "Benjamin Kosten", "link": "https://stackoverflow.com/users/10049527/benjamin-kosten"}, "edited": false, "score": 0, "creation_date": 1532684641, "post_id": 51527614, "comment_id": 90077277, "body": "@BenjaminKosten: however, you could take a look at the <a href=\"http://decorator.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\"><code>decorator</code> project</a> if you feel that that would produce clearer code for you."}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 3, "last_activity_date": 1532554227, "last_edit_date": 1532554227, "creation_date": 1532552641, "answer_id": 51527614, "question_id": 51527538, "link": "https://stackoverflow.com/questions/51527538/function-decorator-raising-positional-argument-error/51527614#51527614", "title": "Function decorator raising positional argument error?", "body": "<p>Decorators are applied to function objects, not to bound methods. This means you need to <em>pass on the <code>self</code> argument manually</em>:</p>\n\n<pre><code>def boundtest(func):\n    def onDecorator(self, x, y, *args, **kwargs):\n        print(x, y, *args, **kwargs)\n        assert x in range(self.width) and y in range(self.height)\n        return func(self, x, y, *args, **kwargs)\n\n    return onDecorator\n</code></pre>\n\n<p>Python uses a process called <em>binding</em> to turn a function into a bound method, and calling a bound method automatically passes in whatever it is bound <em>to</em> as the first argument; this is how <code>self</code> is passed into a method when you call a fuction on an instance. See the <a href=\"https://docs.python.org/3/howto/descriptor.html\" rel=\"nofollow noreferrer\"><em>Descriptor HowTo</em></a> for details. Instead of manually passing on <code>self</code>, you could <a href=\"https://docs.python.org/3/reference/datamodel.html#invoking-descriptors\" rel=\"nofollow noreferrer\">invoke descriptor binding manually</a>, by calling <a href=\"https://docs.python.org/3/reference/datamodel.html#object.__get__\" rel=\"nofollow noreferrer\"><code>func.__get__()</code></a> to produce a bound method:</p>\n\n<pre><code>def boundtest(func):\n    def onDecorator(self, x, y, *args, **kwargs):\n        print(x, y, *args, **kwargs)\n        assert x in range(self.width) and y in range(self.height)\n        bound_method = func.__get__(self, type(self))\n        return bound_method(x, y, *args, **kwargs)\n\n    return onDecorator\n</code></pre>\n\n<p>That binding behaviour was applied to the <code>onDecorator</code> function object your decorator returned when <code>game.set</code> was being resolved, but not to the wrapped <code>func</code> object.</p>\n"}], "owner": {"reputation": 81, "user_id": 10049527, "user_type": "registered", "profile_image": "https://graph.facebook.com/1891284457840291/picture?type=large", "display_name": "Benjamin Kosten", "link": "https://stackoverflow.com/users/10049527/benjamin-kosten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 995, "favorite_count": 0, "accepted_answer_id": 51527614, "answer_count": 1, "score": 1, "last_activity_date": 1532554227, "creation_date": 1532552263, "last_edit_date": 1532552883, "question_id": 51527538, "link": "https://stackoverflow.com/questions/51527538/function-decorator-raising-positional-argument-error", "title": "Function decorator raising positional argument error?", "body": "<p>I'm trying to write a function decorator that tests for bounds of x, y</p>\n\n<pre><code>#this is my bound test function\ndef boundtest(func):\n    def onDecorator(self, x, y, *args, **kwargs):\n        print(x, y, *args, **kwargs)\n        assert x in range(self.width) and y in range(self.height)\n        return func(x, y, *args, **kwargs)\n\n    return onDecorator\n\nclass Game:\n    #these are the functions that need bound checking\n\n    @boundtest\n    def at(self, x: int, y: int) -&gt; int:\n        return self.map[x, y]\n\n    @boundtest\n    def set(self, x: int, y: int, data):\n        self.map[x, y] = data.value\n</code></pre>\n\n<p>When I execute <code>game.set(1, 1, Color.RED)</code> I get:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Users\\Ben\\Desktop\\Projects\\bubble-breaker-bot\\game.py\", line 61, in &lt;module&gt;\n    game.set(1, 1, Color.RED)\n  File \"C:\\Users\\Ben\\Desktop\\Projects\\bubble-breaker-bot\\game.py\", line 21, in onDecorator\n    return func(x, y, *args, **kwargs)\nTypeError: set() missing 1 required positional argument: 'data'\n</code></pre>\n\n<p>I need the boundtest function to check if <code>x</code> and <code>y</code> are in range of <code>self.width</code>, and <code>self.height</code> respectively while being able to pass an arbitrary amount of parameters to the function it is decorating.</p>\n\n<p>Why does this happen?</p>\n"}, {"tags": ["python", "artificial-intelligence", "reverse-engineering", "unreal-engine4"], "answers": [{"tags": [], "owner": {"reputation": 661, "user_id": 4816223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9kS2i.jpg?s=128&g=1", "display_name": "aaronedmistone", "link": "https://stackoverflow.com/users/4816223/aaronedmistone"}, "is_accepted": false, "score": 0, "last_activity_date": 1532785538, "creation_date": 1532785538, "answer_id": 51571965, "question_id": 51527523, "link": "https://stackoverflow.com/questions/51527523/hook-a-program-to-a-running-game-update-each-frame/51571965#51571965", "title": "Hook a program to a running game, update each frame", "body": "<p>We are talking about a game built on Unreal Engine, and you cannot find an address being changed every frame.</p>\n\n<p>This makes me concerned about where/how you are trying to find the addresses being changed each frame. Perhaps try a memory scanning tool such as CheatEngine just in case.</p>\n\n<h2>There should be a few addresses changing each frame. One that comes to mind would be:</h2>\n\n<ul>\n<li>One of the addresses referenced when using this function: <code>UGameplayStatics::GetRealTimeSeconds(GetWorld());</code></li>\n</ul>\n\n<p>If you really cannot find a variable changing each frame, then I offer you a solution to hook into a function called in the process every frame by doing the following:</p>\n\n<p>This is not a complete solution by any means as this covers a subjectively complex topic that you will likely need to learn about from other sources.</p>\n\n<p><strong>[NOTE]</strong></p>\n\n<p><em>If this game uses an anti-cheat, you may be banned for this behaviour, I would suggest doing your research before attempting this. I take no responsibility for any issues or loss you may incur from the use of the following advice.</em> </p>\n\n<h2>Backup Option:</h2>\n\n<ol>\n<li>Using CheatEngine, open the target process.</li>\n<li>Look for a function that is being called every frame (like so):\n\n<ul>\n<li>Find a variable you suspect is READ every frame (does not have to be changed)</li>\n<li>Add it to your address list</li>\n<li><strong>Right-click</strong> the entry from the address list and select: <strong>Find out what accesses this address</strong></li>\n<li>Accept the prompt to attach a debugger to the process</li>\n<li>Watch the count, is it going up extremely fast? Great! this is likely being read every frame</li>\n<li>Stop the tool and click on the Instruction entry in the list that has the high count</li>\n<li>Click the <strong>Show Disassembler</strong> button</li>\n<li>You are now looking at the interpreted opcodes for the function that is accessing your address every frame</li>\n<li>Simply right click the highlighted row and click <strong>Select current function</strong> to find the start of the function</li>\n<li>I would personally toggle a breakpoint on this line (<strong>F5</strong>) with the game visible on the side to ensure it is being triggered each frame (continuing after each break with <strong>F9</strong>).</li>\n</ul></li>\n<li>You now have the <strong>Base Address</strong> + <strong>Function Address</strong> in the <strong>Address</strong> column of the highlighted row.</li>\n<li><p>Here comes the hard part that will require further explanation and will be a learning exercise that you will need to undertake.</p>\n\n<ul>\n<li>Read up on patching a function by injecting code into the process or by modifying the process before you run it.</li>\n<li>The injected code can communicate with your process via a <strong>Memory Mapped File</strong> or a <strong>Named Pipe</strong>, setting a flag every frame.</li>\n<li>You will need to do this while retaining the original opcodes to ensure the program works as normal by either:\n\n<ul>\n<li>restoring after executing</li>\n<li><strong>OR</strong></li>\n<li>jumping to a code cave and executing original opcodes before jumping back</li>\n<li><strong>OR</strong></li>\n<li>Redirecting the function altogether (not suitable for your current use but worth reading about)</li>\n</ul></li>\n</ul></li>\n</ol>\n"}], "owner": {"reputation": 381, "user_id": 1462283, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/432dc2e4ef6d5364c04dad4468080926?s=128&d=identicon&r=PG", "display_name": "prkist", "link": "https://stackoverflow.com/users/1462283/prkist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 483, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1532785538, "creation_date": 1532552213, "question_id": 51527523, "link": "https://stackoverflow.com/questions/51527523/hook-a-program-to-a-running-game-update-each-frame", "title": "Hook a program to a running game, update each frame", "body": "<p>I am trying to write a custom AI API for a game which uses the Unreal engine 4. While I can read the process memory using Python just fine, I have confronted a bigger issue - reading the process memory only when relevant and sending in inputs only when possible - thus only once a frame is rendered. If I want to send inputs, they need to be sent on frames specifically (the game being a fighting game).</p>\n\n<p>Therefore, I need to update my own AI API with the same framerate as the game itself. My first idea was to look into the process memory and find out if there's any value that's updated each frame - while there're values updated all the time, they seem to be updated in memory after 8 frames occur. Unfortunately, 8 frames don't allow the AI to perform the inputs properly as the update loop would not update fast enough.</p>\n\n<p>I will be looking through the memory more but I was wondering if it's possible to attach a program to the running process to look at the window itself - and in case it has been updated (something new has been rendered), update the gamestate in the AI itself. Is there a way this can be achieved?</p>\n"}, {"tags": ["python", "python-3.x", "function"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 4, "creation_date": 1532552614, "post_id": 51527516, "comment_id": 90023830, "body": "You didn&#39;t pass it an int."}], "answers": [{"comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1532560221, "post_id": 51528828, "comment_id": 90026145, "body": "<code>type(int(mystring)) == int</code> is always true, though. I think you just masked the problem with a try-except"}], "tags": [], "owner": {"reputation": 1511, "user_id": 9667949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s7J7y.jpg?s=128&g=1", "display_name": "Mahir Islam", "link": "https://stackoverflow.com/users/9667949/mahir-islam"}, "is_accepted": true, "score": 1, "last_activity_date": 1532559893, "creation_date": 1532559893, "answer_id": 51528828, "question_id": 51527516, "link": "https://stackoverflow.com/questions/51527516/function-is-not-returning-what-is-intended/51528828#51528828", "title": "function is not returning what is intended", "body": "<p>Your question isn't very clear, but this should work, if my understanding is not wrong:</p>\n\n<pre><code>def string_length(mystring):\n    try:\n      if type(int(mystring)) == int:\n        return \"Sorry, integers don't have length\"\n      elif type(mystring) == str:\n        return len(mystring)\n    except:\n      return len(str(mystring))\nmystring = input(\"what is the value ?\")\nprint(string_length(mystring))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "is_accepted": false, "score": 0, "last_activity_date": 1532560610, "creation_date": 1532560610, "answer_id": 51528926, "question_id": 51527516, "link": "https://stackoverflow.com/questions/51527516/function-is-not-returning-what-is-intended/51528926#51528926", "title": "function is not returning what is intended", "body": "<p>In Python2, <code>input</code> will evaluate to an integer, not a string, which would explain the message. </p>\n\n<p>You can use <code>hasattr</code> to check for the <code>__len__</code> magic function rather than doing explict type checking. </p>\n\n<p>This should work for any iterable type, I believe</p>\n\n<pre><code>def string_length(mystring):\n  if hasattr(mystring, '__len__'):\n    return len(mystring)\n  else:\n    print(\"Sorry, {} don't have length\".format(type(mystring)))\n    return None\n\nmystring = input(\"what is the value ?\")\nprint(string_length(mystring))\n</code></pre>\n\n<p>Then, make sure you are running this in Python3</p>\n"}], "owner": {"reputation": 11, "user_id": 10135710, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Kiqllwx6Nn8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rKKRnkQ5CIIrnYfzISxnuOYDu4tw/mo/photo.jpg?sz=128", "display_name": "Danny Nguyen", "link": "https://stackoverflow.com/users/10135710/danny-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 51528828, "answer_count": 2, "score": 0, "last_activity_date": 1532572407, "creation_date": 1532552189, "last_edit_date": 1532572407, "question_id": 51527516, "link": "https://stackoverflow.com/questions/51527516/function-is-not-returning-what-is-intended", "title": "function is not returning what is intended", "body": "<p>The function that I created is to measure the length of an argument!. I want to return \"Sorry, integers don't have length\" </p>\n\n<pre><code>def string_length(mystring):\n    if type(mystring) == int:\n         return \"Sorry, integers don't have length\"\n    else:\n         return len(mystring)\n\nmystring = input(\"what is the value ?\")\nprint(string_length(mystring))\n</code></pre>\n\n<p>what am I doing wrong?</p>\n"}, {"tags": ["python", "pandas", "matplotlib"], "comments": [{"owner": {"reputation": 179, "user_id": 1935322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FEL83.jpg?s=128&g=1", "display_name": "Harvey", "link": "https://stackoverflow.com/users/1935322/harvey"}, "edited": false, "score": 0, "creation_date": 1532552656, "post_id": 51527495, "comment_id": 90023845, "body": "I would like to know if I can use the data.positive.map to directly map to the &quot;XX&quot; values in BLIP or if I have to create a new field with True and False values."}, {"owner": {"reputation": 179, "user_id": 1935322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FEL83.jpg?s=128&g=1", "display_name": "Harvey", "link": "https://stackoverflow.com/users/1935322/harvey"}, "edited": false, "score": 0, "creation_date": 1532553650, "post_id": 51527495, "comment_id": 90024275, "body": "Is seems as if I have to go from this 3NF dataframe to some sort of object that gives me an object with BLIP.value_counts by month and then I somehow need to map them to the plot properly,"}], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 1935322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FEL83.jpg?s=128&g=1", "display_name": "Harvey", "link": "https://stackoverflow.com/users/1935322/harvey"}, "edited": false, "score": 0, "creation_date": 1532553193, "post_id": 51527617, "comment_id": 90024091, "body": "I divided the table into two dataframes df_pos and df_neg, then tried  ax.bar(table.index, df_pos[&#39;BLIP&#39;], width=0.4, color=&#39;g&#39;) and got this error ValueError: shape mismatch: objects cannot be broadcast to a single shape"}, {"owner": {"reputation": 1788, "user_id": 4856886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/602d27b014a61cf50fe795b6a577d63e?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse Bakker", "link": "https://stackoverflow.com/users/4856886/jesse-bakker"}, "reply_to_user": {"reputation": 179, "user_id": 1935322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FEL83.jpg?s=128&g=1", "display_name": "Harvey", "link": "https://stackoverflow.com/users/1935322/harvey"}, "edited": false, "score": 0, "creation_date": 1532558632, "post_id": 51527617, "comment_id": 90025772, "body": "That means your <code>table.index</code> does not have the same length as <code>df_pos[&#39;BLIP&#39;]</code>. You can use <code>df_pos.index</code> instead"}, {"owner": {"reputation": 179, "user_id": 1935322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FEL83.jpg?s=128&g=1", "display_name": "Harvey", "link": "https://stackoverflow.com/users/1935322/harvey"}, "edited": false, "score": 0, "creation_date": 1532630995, "post_id": 51527617, "comment_id": 90059118, "body": "Solution posted above. Jesse suggestion is correct, but table[&#39;XX&#39;] should be table[&#39;BLIP&#39;]  Warning: Do not code when sleep deprived!!"}, {"owner": {"reputation": 179, "user_id": 1935322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FEL83.jpg?s=128&g=1", "display_name": "Harvey", "link": "https://stackoverflow.com/users/1935322/harvey"}, "edited": false, "score": 0, "creation_date": 1532713033, "post_id": 51527617, "comment_id": 90092744, "body": "Related Comments <a href=\"https://stackoverflow.com/questions/22311139/matplotlib-bar-chart-choose-color-if-value-is-positive-vs-value-is-negative\" title=\"matplotlib bar chart choose color if value is positive vs value is negative\">stackoverflow.com/questions/22311139/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/33476401/color-matplotlib-bar-chart-based-on-value\" title=\"color matplotlib bar chart based on value\">stackoverflow.com/questions/33476401/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1788, "user_id": 4856886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/602d27b014a61cf50fe795b6a577d63e?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse Bakker", "link": "https://stackoverflow.com/users/4856886/jesse-bakker"}, "is_accepted": true, "score": 1, "last_activity_date": 1532552648, "creation_date": 1532552648, "answer_id": 51527617, "question_id": 51527495, "link": "https://stackoverflow.com/questions/51527495/matplotlib-bar-chart-from-two-variable-column-pandas-data-manipulation-mostly/51527617#51527617", "title": "Matplotlib bar chart from two variable column - Pandas data manipulation (mostly)", "body": "<p>You can plot it manually using matplotlib:</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\nax = plt.axes()\nax.bar(table.index, table['XX'], width=0.4, color='g')\nax.bar(table.index, table['YY'], width=0.4, color='r')\n</code></pre>\n"}], "owner": {"reputation": 179, "user_id": 1935322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FEL83.jpg?s=128&g=1", "display_name": "Harvey", "link": "https://stackoverflow.com/users/1935322/harvey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 848, "favorite_count": 0, "accepted_answer_id": 51527617, "answer_count": 1, "score": 0, "last_activity_date": 1532630865, "creation_date": 1532552066, "last_edit_date": 1532630865, "question_id": 51527495, "link": "https://stackoverflow.com/questions/51527495/matplotlib-bar-chart-from-two-variable-column-pandas-data-manipulation-mostly", "title": "Matplotlib bar chart from two variable column - Pandas data manipulation (mostly)", "body": "<p>NOTE: Solution Posted Below!!!</p>\n\n<p>I have a time-indexed table with a column BLIP that has only two values \"XX\" and \"YY\". The goal is to show a count of \"XX\" and \"YY\" with \"YY\" being below the x axis. I'm trying to create the correct data structure from a pandas table using code from Wes McKenney's book on Data Analysis (pg 26 I think):</p>\n\n<pre><code>df = base_df.drop(columns=dropcols).set_index('Created')\ngroup = ['f2','BLIP']\ndf0 = df_minus.groupby(group)\nagg_counts = df0.size().unstack().fillna(0)\nindexer = agg_counts.sum(1).argsort()\ncount_subset = agg_counts.take(indexer).copy()\ntable = count_subset.groupby('BLIP').resample('MS').count().unstack('BLIP')['BLIP']\nchart = table.plot.bar(title = chart_title, x=None, color = ['green', 'red', 'grey']);\n</code></pre>\n\n<p>The line</p>\n\n<pre><code>agg_counts = df0.size().unstack().fillna(0) \n</code></pre>\n\n<p>results in the following error:</p>\n\n<pre><code>TypeError: 'numpy.int32' object is not callable\n</code></pre>\n\n<p>I found this gem of a snippet here, but can't find the documentation to decypher it. </p>\n\n<pre><code>data['values'].plot(kind='bar', color=data.positive.map({True: 'g', False: 'r'}))\n</code></pre>\n\n<p>This seems like is would be very simple, but I'm quite wrapped about the axle on this.</p>\n\n<p><a href=\"https://i.stack.imgur.com/IX5tt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IX5tt.png\" alt=\"Target Image\"></a></p>\n\n<p>The pandas table format is something like</p>\n\n<pre><code>create_date f1 f2 f3 BLIP f5...\ndt_stamp    X  Y  Z  XX   K1\ndt_stamp    S  R  Y  YY   K3\ndt_stamp    P  P  T  XX   K1\n</code></pre>\n\n<p>and so on.</p>\n\n<p>Per Jesse's suggestion I tried</p>\n\n<pre><code>df_plus =df[df['BLIP']=='XX']\ndf_minus=df[df['BLIP']=='YY']\n\nax = plt.axes()\nax.bar(df_plus.index, df_plus['BLIP'], width=0.4, color='g')\nax.bar(df_neg.index, df_minus['BLIP'], width=0.4, color='r')\nax.autoscale()\nplt.show()\n</code></pre>\n\n<p>This resulted in </p>\n\n<pre><code>ValueError: shape mismatch: objects cannot be broadcast to a single shape\n</code></pre>\n\n<hr>\n\n<p>Solution in its entirety </p>\n\n<pre><code>df = base_df\nplt.clf()\nfig = plt.figure()\nwidth = 8\nheight = 6\nfig.set_size_inches(width, height)\nchart_title = 'YTD CR Trend Summary'\ndf_plus =df[df['BLIP'] == 'XX']\ndf_minus=df[df['BLIP']== 'IYY']\np =  df_plus.resample('MS').count()['BLIP'].fillna(0)\nn = df_minus.resample('MS').count()['BLIP'].apply(lambda x: int(-x)) \nprint(chart_title, len(df), p.sum(), n.sum())\nplt.clf()\nfig = plt.figure()\n# ax = fig.add_subplot(1, 1, 1)\nax = plt.axes(label=chart_title) #label suppresses warning\nif p.sum() != False:\n    ax.bar(p.index, p, width=10, color='g') \nif n.sum() != False:\n    ax.bar(n.index, n, width=10, color='r')\nplt.suptitle(chart_title, fontsize=11)\nfilename = f'{graph_images_dir}{chart_title}.png'\nprint(f'Saving {filename}')\nplt.savefig(filename,  bbox_inches='tight', pad_inches=0.5, dpi=200)\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "multithreading", "timer", "raspberry-pi", "gpio"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1532552498, "post_id": 51527472, "comment_id": 90023768, "body": "The problem with <code>t = Timer(5, set_high(GPIO)</code> is that it&#39;s calling <code>set_high(GPIO)</code> right now, then passing the result of that call (which is <code>None</code>) as the target function to <code>Timer</code>. And you can&#39;t call <code>None</code> as a function. But your fix to call <code>t = Timer(5, set_high, args=[GPIO])</code> solves that. If you get a different error, please edit your question to be about the problem you want help with, instead of being about the problem you already solved and only mentioning your actual problem two thirds of the way down."}], "answers": [{"comments": [{"owner": {"reputation": 393, "user_id": 8571154, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/da7f91564e4dda95e3fcd67ff5753e59?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Kurzeja", "link": "https://stackoverflow.com/users/8571154/adrian-kurzeja"}, "edited": false, "score": 0, "creation_date": 1532553902, "post_id": 51527662, "comment_id": 90024359, "body": "Ohhh gosh!!! You are right! I&#39;m cleaningup before timer ends... Thank you!  This device will be connected via websocket, on mobile user clicks &quot;DOIT!&quot; then request goes to server and server sends message to raspberry (websocket), when raspbery get message it run this script (set GPIO.LOW), and it takes 15 sec, to complete &quot;task&quot;, after this script sets GPIO.HIGH and sends back info to server about success (and server to mobile)."}, {"owner": {"reputation": 393, "user_id": 8571154, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/da7f91564e4dda95e3fcd67ff5753e59?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Kurzeja", "link": "https://stackoverflow.com/users/8571154/adrian-kurzeja"}, "edited": false, "score": 0, "creation_date": 1532553909, "post_id": 51527662, "comment_id": 90024365, "body": "I thought about multithreating becouse what if another person sends click &quot;DOIT!&quot;? Raspberry should react somehow I think (not sure)? lets say &quot;Now i&#39;m bussy&quot; and in the same time it should still do script. Or maybe sleep() won&#39;t destroy it at all?"}, {"owner": {"reputation": 393, "user_id": 8571154, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/da7f91564e4dda95e3fcd67ff5753e59?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Kurzeja", "link": "https://stackoverflow.com/users/8571154/adrian-kurzeja"}, "edited": false, "score": 0, "creation_date": 1532554115, "post_id": 51527662, "comment_id": 90024451, "body": "Heh... sorry for spam... but now I found out that I should block sending requests to raspberry directly on server... and block it untill raspberry answers with succes or error.   Now I have to confirm on raspberry that &quot;double&quot; request won&#39;t hurt it just to be sure.  Thanks again for help ;)"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 393, "user_id": 8571154, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/da7f91564e4dda95e3fcd67ff5753e59?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Kurzeja", "link": "https://stackoverflow.com/users/8571154/adrian-kurzeja"}, "edited": false, "score": 0, "creation_date": 1532555306, "post_id": 51527662, "comment_id": 90024868, "body": "@AdrianKurzeja As I said, once you write the code that actually does some websocket stuff, you&#39;ll have to work out how to integrate the timer into that. If you&#39;re using threaded I/O, you probably want a threaded timer, and just have the main thread wait by <code>join</code>ing your main I/O thread. If you&#39;re using <code>asyncio</code>, you probably want to schedule a timer in that asyncio event loop, and you&#39;ll just do the cleanup after the event loop. And so on."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 0, "last_activity_date": 1532553157, "last_edit_date": 1532553157, "creation_date": 1532552830, "answer_id": 51527662, "question_id": 51527472, "link": "https://stackoverflow.com/questions/51527472/threading-timer-nonetype-error-on-raspberry-pi-passing-variable-to-another-t/51527662#51527662", "title": "Threading Timer - NoneType error on raspberry pi - passing variable to another thread", "body": "<p>Your first problem, and your third one, really aren't relevant, because you've already correctly solved them.</p>\n\n<p>When you call <code>Timer(5, set_high(GPIO))</code>, that calls <code>set_high(GPIO)</code> right now, and passes whatever it returns as the target function for the <code>Timer</code> to call. Since it returns <code>None</code>, 5 seconds later, your <code>Timer</code> tries to call <code>None</code> as a function, hence the <code>TypeError</code>.</p>\n\n<p>The fix is exactly what you already did:</p>\n\n<pre><code>Timer(5, set_high, [GPIO])\n</code></pre>\n\n<hr>\n\n<p>Now, once you've fixed that, think through the flow of control you're asking for.</p>\n\n<p>First, you do this:</p>\n\n<pre><code>GPIO.setmode(GPIO.BCM)\nGPIO.setup(pin, GPIO.OUT)\n</code></pre>\n\n<p>Then you call <code>web_socket_loop</code>, and it does this:</p>\n\n<pre><code>GPIO.output(pin, GPIO.LOW)\n</code></pre>\n\n<p>And then it creates and starts a <code>Timer</code>, and returns. And you do this:</p>\n\n<pre><code>GPIO.cleanup()\n</code></pre>\n\n<p>Then, 5 seconds later, the timer does off and calls your <code>set_high</code> function, which does this:</p>\n\n<pre><code>GPIO.output(pin, GPIO.HIGH)\n</code></pre>\n\n<p>You can't set the pin high after you've cleaned up the GPIO.</p>\n\n<p>The error message is a bit misleading:</p>\n\n<pre><code>RuntimeError: Please set pin numbering mode using GPIO.setmode(GPIO.BOARD) or GPIO.setmode(GPIO.BCM)\n</code></pre>\n\n<p>This is because the state post-cleanup is the same as the state pre-initialization, so it assumes your problem is that you haven't initialized things by calling <code>setmode</code> yet.</p>\n\n<hr>\n\n<p>How can you fix that? Your main thread shouldn't try to clean up until you're done.</p>\n\n<p>Normally, you have other stuff for the main thread to do. That's why you use a <code>Timer</code>, or a <code>Thread</code>, or some other form of concurrency. But when you do that, you need to give your main thread some way to wait on that background work to finish, or you need to find some way to chain things up so that the <code>cleanup</code> happens only after the last thread is done using GPIO.</p>\n\n<p>When you add the code that deals with communicating over a websocket, you'll need to do one of those things. But it's impossible to show you what you should do without knowing how you plan to organize that code.</p>\n\n<p>Meanwhile, you really have nothing else to do but wait for 5 seconds, so you don't need any concurrency; just <code>sleep</code>:</p>\n\n<pre><code>def web_socket_loop():\n    GPIO.output(pin, GPIO.LOW)\n    time.sleep(5)\n    set_high(GPIO)\n</code></pre>\n"}], "owner": {"reputation": 393, "user_id": 8571154, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/da7f91564e4dda95e3fcd67ff5753e59?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Kurzeja", "link": "https://stackoverflow.com/users/8571154/adrian-kurzeja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 257, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532553157, "creation_date": 1532551947, "last_edit_date": 1532552176, "question_id": 51527472, "link": "https://stackoverflow.com/questions/51527472/threading-timer-nonetype-error-on-raspberry-pi-passing-variable-to-another-t", "title": "Threading Timer - NoneType error on raspberry pi - passing variable to another thread", "body": "<p>I'm junior python dev, mainly backend Django. One of my first tasks in work to write program on raspberry pi that set state to <code>LOW</code> and after 5 sec to <code>HIGH</code>.</p>\n\n<p>Seems not a problem but.... I think the proper way of waiting 5 sec to change to <code>HIGH</code> is not via <code>time.sleep()</code> but via <code>threading.Timer</code> (I found it on stackoverflow)... It will be connected via web socket so I think one  thread must listen and another must change states</p>\n\n<p>My problem is half pythonic, half raspberrian... this is my code:</p>\n\n<pre><code>import RPi.GPIO as GPIO\nfrom threading import Timer\nfrom time import sleep\n\npin = 22\nGPIO.setmode(GPIO.BCM)\nGPIO.setup(pin, GPIO.OUT)\n\ndef set_high():\n    GPIO.output(pin, GPIO.HIGH)\n\ndef web_socket_loop():\n    GPIO.output(pin, GPIO.LOW)\n    t = Timer(5, set_high(GPIO))\n    t.start()\n\n\nweb_socket_loop()\n\nGPIO.cleanup()\n</code></pre>\n\n<p>When I run this code states are changing, but after few sec I also got an error:</p>\n\n<pre><code>Exception in thread Thread-1:\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.7/threading.py\", line 917, in _bootstrap_inner\n    self.run()\n  File \"/usr/local/lib/python3.7/threading.py\", line 1158, in run\n    self.function(*self.args, **self.kwargs)\nTypeError: 'NoneType' object is not callable\n</code></pre>\n\n<p>I found on stack that I have to do something like this: <strong>(but it does not work properly)</strong>:  ;/</p>\n\n<pre><code>t = Timer(5, set_high, args=[GPIO])\n</code></pre>\n\n<p>And it does repair error about NoneType... but I got another error: </p>\n\n<pre><code>Exception in thread Thread-1:\n    Traceback (most recent call last):\n      File \"/usr/local/lib/python3.7/threading.py\", line 917, in _bootstrap_inner\n        self.run()\n      File \"/usr/local/lib/python3.7/threading.py\", line 1158, in run\n        self.function(*self.args, **self.kwargs)\nRuntimeError: Please set pin numbering mode using GPIO.setmode(GPIO.BOARD) or GPIO.setmode(GPIO.BCM)\n</code></pre>\n\n<p>I probably know why this error is but have no idea how to deal with it. I think that on another thread <code>RPi.GPIO</code> is not configured <code>(GPIO.setmode(GPIO.BCM), GPIO.setup(pin, GPIO.OUT))</code></p>\n\n<p>Thats why I pass <code>GPIO</code> as a variable to the function <code>set_high(GPIO)</code>, without it on another thread it thinks that <code>RPi</code> is not configured... passing this variable is cool but... I got an <code>NoneType</code> error... ;/</p>\n\n<p>When I try second way with <code>Timer(5, set_high, args=[GPIO])</code> the <code>NoneType</code> error disappears but another occurs (<code>RuntimeError with info about pin setup</code>)... this is the same error which I get when I don't pass <code>GPIO</code> to the function like this: </p>\n\n<pre><code>def set_high(#i_dont_pass_GPIO):\n    #things\n    pass\n</code></pre>\n\n<p>What is the proper way of passing the GPIO variable to another thread? So that it will recognize this variable properly and set pin 22 to HIGH.</p>\n\n<p>Or maybe you recommend to try do it another way? Maybe sleep is better? But it will be connected via web socket so I think one must listen and another must change states?</p>\n\n<p>I appreciate any help!!</p>\n"}, {"tags": ["python", "web-scraping", "scrapy", "screen-scraping", "pymysql"], "answers": [{"comments": [{"owner": {"reputation": 4480, "user_id": 7543162, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ww9C6.png?s=128&g=1", "display_name": "oldboy", "link": "https://stackoverflow.com/users/7543162/oldboy"}, "edited": false, "score": 0, "creation_date": 1532552854, "post_id": 51527494, "comment_id": 90023939, "body": "of course i can create an indefinite number of <code>Pet()</code> instances, but hm.. i&#39;m going to be scraping all the &quot;profiles&quot; and all of their &quot;pets&quot; at once, so how would it work exactly?? the spider processes the response and then the items get sent to the items pipeline. in my spider, should i put all of the pets in a list (i.e. <code>item[&#39;pets&#39;] = [&#39;list&#39;, &#39;of&#39;, &#39;pets&#39;, &#39;whatever&#39;]</code>) and then process that list in <code>items.py</code>??"}, {"owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "reply_to_user": {"reputation": 4480, "user_id": 7543162, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ww9C6.png?s=128&g=1", "display_name": "oldboy", "link": "https://stackoverflow.com/users/7543162/oldboy"}, "edited": false, "score": 0, "creation_date": 1532552945, "post_id": 51527494, "comment_id": 90023988, "body": "@Anthony there are many ways you can hook that into the project - maybe using <code>process_item</code>?"}, {"owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "reply_to_user": {"reputation": 4480, "user_id": 7543162, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ww9C6.png?s=128&g=1", "display_name": "oldboy", "link": "https://stackoverflow.com/users/7543162/oldboy"}, "edited": false, "score": 0, "creation_date": 1532553025, "post_id": 51527494, "comment_id": 90024019, "body": "@Anthony another option is as you said just add the pets to a list and then separate when exporting with a custom exporter... many options!"}, {"owner": {"reputation": 4480, "user_id": 7543162, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ww9C6.png?s=128&g=1", "display_name": "oldboy", "link": "https://stackoverflow.com/users/7543162/oldboy"}, "edited": false, "score": 0, "creation_date": 1532554209, "post_id": 51527494, "comment_id": 90024489, "body": "(i&#39;m new to python/scrapy if that wasn&#39;t obvious.) by any chance, can you point me to an example of this somewhere on the web? in the <a href=\"https://doc.scrapy.org/en/latest/topics/architecture.html\" rel=\"nofollow noreferrer\">&#39;Architecture Overview&#39;</a> section of the documentation, it doesn&#39;t explicitly state when <code>pipelines.py</code> is executed? or is <code>pipelines.py</code> simply an &quot;item pipeline&quot;?? also, i&#39;m assuming <code>items.py</code> is executed around the time the spider is launched to initiate the fields, and if that&#39;s the case, is there a way to create fields on the fly?"}, {"owner": {"reputation": 4480, "user_id": 7543162, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ww9C6.png?s=128&g=1", "display_name": "oldboy", "link": "https://stackoverflow.com/users/7543162/oldboy"}, "edited": false, "score": 0, "creation_date": 1532554328, "post_id": 51527494, "comment_id": 90024535, "body": "the issue with your solution is that if <code>items.py</code>, in which <code>class Person</code> and <code>class Pet</code> are declared, executes before the Spider even begins crawling, then the fields are created before i would even know how many pets a person might have"}, {"owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "reply_to_user": {"reputation": 4480, "user_id": 7543162, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ww9C6.png?s=128&g=1", "display_name": "oldboy", "link": "https://stackoverflow.com/users/7543162/oldboy"}, "edited": false, "score": 0, "creation_date": 1532554627, "post_id": 51527494, "comment_id": 90024634, "body": "@Anthony my idea was to generate two separate tables of results &quot;people&quot; and &quot;pets&quot;, not fields in a single table - what is your destination format? most formats don&#39;t allow arbitrary number of fields. Scrapy is a framework, it calls your functions when needed. <code>.py</code> files are not &quot;executed&quot; in any sequence, they are imported and the framework will call your functions when needed/some event happens."}, {"owner": {"reputation": 4480, "user_id": 7543162, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ww9C6.png?s=128&g=1", "display_name": "oldboy", "link": "https://stackoverflow.com/users/7543162/oldboy"}, "edited": false, "score": 0, "creation_date": 1532554917, "post_id": 51527494, "comment_id": 90024736, "body": "that is my goal: a separate table for &quot;pets.&quot; but via the <code>process_items</code> function in <code>pipelines.py</code> i&#39;m inserting the data into a mysql database. hm.. i think you&#39;re wrong about the <code>.py</code> files not being executed in any particular order; for instance, the documentation (the link i shared with u in my last post) makes it seems as if <code>middlewares.py</code> is executed before <code>pipelines.py</code> (i added a new tag to indicate that now)"}, {"owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "reply_to_user": {"reputation": 4480, "user_id": 7543162, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ww9C6.png?s=128&g=1", "display_name": "oldboy", "link": "https://stackoverflow.com/users/7543162/oldboy"}, "edited": false, "score": 0, "creation_date": 1532555750, "post_id": 51527494, "comment_id": 90025017, "body": "@Anthony sorry, this is just wording difference - you are correct, but it is not <code>pipelines.py</code> that is executed, what is executed is the pipelines you defined. They can be defined anywhere and registered in the framework. Usually you define them in <code>pipelines.py</code> but nothing forces you to define them there."}, {"owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "reply_to_user": {"reputation": 4480, "user_id": 7543162, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ww9C6.png?s=128&g=1", "display_name": "oldboy", "link": "https://stackoverflow.com/users/7543162/oldboy"}, "edited": false, "score": 0, "creation_date": 1532555938, "post_id": 51527494, "comment_id": 90025080, "body": "If you put the pets in a list, and when writing to database you just separate them? You have to think of scrapy as a loose guideline - nothing forces you to create the items, you could just create any kind of object and persist it."}, {"owner": {"reputation": 4480, "user_id": 7543162, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ww9C6.png?s=128&g=1", "display_name": "oldboy", "link": "https://stackoverflow.com/users/7543162/oldboy"}, "edited": false, "score": 0, "creation_date": 1532570150, "post_id": 51527494, "comment_id": 90027990, "body": "yeah, i know the framework imports specific scripts and auto executes their classes and functions. was just semantics!! the &quot;item pipeline&quot; functionality (<code>items.py</code>) is so goddamn convenient tho. it neatly passes all of the code forward to be processed without a hiccup. how do i make my own variables that i declare in my Spider persist, so that they&#39;re passed to my <code>pipelines.py</code>? do all i need to do is yield it as an iterable?"}], "tags": [], "owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "is_accepted": false, "score": 0, "last_activity_date": 1532552063, "creation_date": 1532552063, "answer_id": 51527494, "question_id": 51527402, "link": "https://stackoverflow.com/questions/51527402/indefinite-number-of-fields/51527494#51527494", "title": "Indefinite Number of Fields", "body": "<p>create two item types:</p>\n\n<pre><code>class Person(scrapy.Item):\n    name = scrapy.Field()\n    age = scrapy.Field()\n    height = scrapy.Field()\n\nclass Pet(scrapy.Item):\n    name = scrapy.Field()\n    pet = scrapy.Field()\n</code></pre>\n\n<p>Then for each <code>Person</code> you can create multiple <code>Pet</code>s</p>\n"}], "owner": {"reputation": 4480, "user_id": 7543162, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ww9C6.png?s=128&g=1", "display_name": "oldboy", "link": "https://stackoverflow.com/users/7543162/oldboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532555172, "creation_date": 1532551590, "last_edit_date": 1532555172, "question_id": 51527402, "link": "https://stackoverflow.com/questions/51527402/indefinite-number-of-fields", "title": "Indefinite Number of Fields", "body": "<p>I'm scraping a web-page, and there will be an indefinite number of related elements on each page that I plan to stick in a table of their own. However, how do you dynamically create <code>scrapy.Field()</code> elements to deal with this? Or do you not need to or?</p>\n\n<p><em>Example</em></p>\n\n<p>For the sake of simplicity, let's say I'm scraping profile pages of random people. Some of those people have pets, some don't. Some have tons of pets, others just have one. How do I deal with this? How do I dynamically create as many <code>pet</code> fields as are needed?</p>\n\n<pre><code>name = scrapy.Field()\nage = scrapy.Field()\nheight = scrapy.Field()\npet = scrapy.Field()\n# pet1 = scrapy.Field()\n# pet2 = scrapy.Field()\n# continues indefinitely\n</code></pre>\n"}, {"tags": ["python", "list", "dictionary", "tuples"], "comments": [{"owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "edited": false, "score": 3, "creation_date": 1532551568, "post_id": 51527379, "comment_id": 90023368, "body": "What governs the length of the resulting list?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 3, "creation_date": 1532551584, "post_id": 51527379, "comment_id": 90023373, "body": "Why is there a <code>0</code> at the end of the list? Before looking for an &quot;efficient&quot; method, do you have the problem properly scoped?"}, {"owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "edited": false, "score": 1, "creation_date": 1532551605, "post_id": 51527379, "comment_id": 90023384, "body": "BTW, the <code>0.4</code> is in the wrong place in the list if I follow your pattern. I think you want index <code>0</code> to be <code>0.2</code> and index <code>9</code> to be <code>0.4</code>"}, {"owner": {"reputation": 758, "user_id": 1411132, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6bbc11089c165ab8ef71bf50fe15604e?s=128&d=identicon&r=PG", "display_name": "Grisha S", "link": "https://stackoverflow.com/users/1411132/grisha-s"}, "edited": false, "score": 0, "creation_date": 1532551709, "post_id": 51527379, "comment_id": 90023422, "body": "I&#39;m guessing you want something like this: <code>pylist = [dictionary.get(i, 0) for i in range(10)]</code>"}, {"owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "edited": false, "score": 1, "creation_date": 1532551798, "post_id": 51527379, "comment_id": 90023460, "body": "Still makes no sense, why is the 0.4 not the last element...."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 3, "creation_date": 1532552018, "post_id": 51527379, "comment_id": 90023565, "body": "Ok, I think this is a good illustration of why you should spend some time reading <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask</a> and how to create an <a href=\"https://stackoverflow.com/help/mcve\">mcve</a>. This was two lines of code that really wouldn&#39;t have been too difficult to get right before releasing the question into the wild. While we may be able to iteratively get to a solution, these downvotes will count against your account so please do take some time to read through those guides."}, {"owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "edited": false, "score": 0, "creation_date": 1532552077, "post_id": 51527379, "comment_id": 90023589, "body": "<code>pylist = [dictionary.get(i, 0) for i in range(max(list(dictionary.keys()))+1)]</code> will work as well if your dictionary keys exceed 10"}, {"owner": {"reputation": 27, "user_id": 3303178, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/012e86a4957fb2f0772fd14f3b4042e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3303178", "link": "https://stackoverflow.com/users/3303178/user3303178"}, "reply_to_user": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "edited": false, "score": 0, "creation_date": 1532552152, "post_id": 51527379, "comment_id": 90023620, "body": "@rahlf23 the size of list is fixed."}, {"owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "edited": false, "score": 0, "creation_date": 1532552278, "post_id": 51527379, "comment_id": 90023665, "body": "Just providing you a solution that will work outside of your extremely specific example."}, {"owner": {"reputation": 27, "user_id": 3303178, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/012e86a4957fb2f0772fd14f3b4042e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3303178", "link": "https://stackoverflow.com/users/3303178/user3303178"}, "reply_to_user": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "edited": false, "score": 0, "creation_date": 1532552331, "post_id": 51527379, "comment_id": 90023693, "body": "@rahlf23 the last sentence of the problem clearly stated the list size is FIXED"}], "answers": [{"comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1532612080, "post_id": 51534877, "comment_id": 90047957, "body": "These results may be a little biased because you&#39;re using the same <code>dictionary</code> with only 2 entries- so any method that has to do 10 iterations will be slower than one that only has to iterate over only 2. A better test would be to create multiple test dicts with a random size (and random <code>n</code>)."}, {"owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "reply_to_user": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1532613282, "post_id": 51534877, "comment_id": 90048739, "body": "@pault Did some testing with random dictionary as well. With this, the <code>method3()</code> is closer to first two methods, <code>method4</code> still leads."}], "tags": [], "owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "is_accepted": true, "score": 1, "last_activity_date": 1532613193, "last_edit_date": 1532613193, "creation_date": 1532595458, "answer_id": 51534877, "question_id": 51527379, "link": "https://stackoverflow.com/questions/51527379/convert-python-dictionary-to-python-list/51534877#51534877", "title": "Convert python dictionary to python list", "body": "<p>I did some measurements for converting dictionary to pylist, here are the results:</p>\n\n<pre><code>from timeit import timeit    \n\ndictionary = {0:0.2, 9:0.4}\n\ndef method1(d, n=10):\n    return [d[i] if i in d.keys() else 0 for i in range(n)]\n\n\ndef method2(d, n=10):\n    return [d.get(i, 0) for i in range(n)]\n\n\ndef method3(d, n=10):\n    return [d.get(i, v) for i, v in enumerate([0] * n)]\n\n\ndef method4(d, n=10):\n    l = [0] * n\n    for v, k in dictionary.items():\n        l[v] = k\n    return l\n\nprint(timeit(\"method1(dictionary)\", globals=globals(), number=1_000_000))\nprint(timeit(\"method2(dictionary)\", globals=globals(), number=1_000_000))\nprint(timeit(\"method3(dictionary)\", globals=globals(), number=1_000_000))\nprint(timeit(\"method4(dictionary)\", globals=globals(), number=1_000_000))\n</code></pre>\n\n<p>Output is:</p>\n\n<pre><code>1.8713272300001336\n1.8894721449996723\n2.15010558800077\n0.5128111490002993\n</code></pre>\n\n<p>It's clearly to see, that <code>method4</code> is fastest - firstly create the fixed list of zeros, and then iterate just keys that need to be changed. </p>\n\n<p>Based on that fact, converting tuple to list should follow similar pattern: creating fixed list and then iterate over pytuple and change values in that list.</p>\n\n<p>EDIT:</p>\n\n<p>I did some test with random dictionaries as well:</p>\n\n<pre><code># creating random dictionary\nn = random.randint(1000, 100000)\nidx = list(range(n))\ndictionary = {}\nfor i in range(random.randint(100, n)):\n    dictionary[random.choice(idx)] = random.random()\n\nprint('n =',n)\nprint('len(dictionary.keys() =', len(dictionary.keys()))\n\nprint(timeit(f\"method1(dictionary, n={n})\", globals=globals(), number=100))\nprint(timeit(f\"method2(dictionary, n={n})\", globals=globals(), number=100))\nprint(timeit(f\"method3(dictionary, n={n})\", globals=globals(), number=100))\nprint(timeit(f\"method4(dictionary, n={n})\", globals=globals(), number=100))\n</code></pre>\n\n<p>The results:</p>\n\n<pre><code>n = 82981\nlen(dictionary.keys() = 32083\n1.203233296999315\n1.1194271739987016\n1.3668270919988572\n0.2243523440010904\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 3303178, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/012e86a4957fb2f0772fd14f3b4042e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3303178", "link": "https://stackoverflow.com/users/3303178/user3303178"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 51534877, "answer_count": 1, "score": -3, "last_activity_date": 1532613193, "creation_date": 1532551503, "last_edit_date": 1532552579, "question_id": 51527379, "link": "https://stackoverflow.com/questions/51527379/convert-python-dictionary-to-python-list", "title": "Convert python dictionary to python list", "body": "<pre><code>dictionary = {0:0.2, 9:0.4}\n\npylist = [0.2, 0, 0, 0, 0, 0, 0, 0, 0, 0.4]\n</code></pre>\n\n<p>Which is the efficient way to convert dictionary to pylist ? The keys in dictionary form the index in the list, and respective values in the dictionary become the values in list. The keys in the dictionary are going to range between 0 to 9, inclusive. the length of the list would be fixed i.e. 10.</p>\n\n<pre><code>pytuple = [ (0, 0.2), (9,0.4)]\n\npylist = [0.2, 0, 0, 0, 0, 0, 0, 0, 0, 0.4]\n</code></pre>\n\n<p>Alternatively, Which is the efficient way to convert pytuple to pylist ? The first element in tuple form the index in the list, and respective second value in the tuple become the values in list. The keys in the dictionary are going to range between 0 to 9, inclusive. the length of the list would be fixed i.e. 10.</p>\n"}, {"tags": ["python", "python-asyncio"], "answers": [{"comments": [{"owner": {"reputation": 2488, "user_id": 2745140, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/OGCDP.jpg?s=128&g=1", "display_name": "yoonghm", "link": "https://stackoverflow.com/users/2745140/yoonghm"}, "edited": false, "score": 0, "creation_date": 1587221424, "post_id": 51527365, "comment_id": 108427526, "body": "I have <code>await</code> inside the <code>if __name__ == &#39;__main__&#39;:</code>, it will complain <code>syntaxError: &#39;await&#39;: outside function</code>.  This is very ridiculous."}, {"owner": {"reputation": 21075, "user_id": 196206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b3e5f05b6457facb417239ce03739cb?s=128&d=identicon&r=PG", "display_name": "Messa", "link": "https://stackoverflow.com/users/196206/messa"}, "reply_to_user": {"reputation": 2488, "user_id": 2745140, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/OGCDP.jpg?s=128&g=1", "display_name": "yoonghm", "link": "https://stackoverflow.com/users/2745140/yoonghm"}, "edited": false, "score": 0, "creation_date": 1587284370, "post_id": 51527365, "comment_id": 108445631, "body": "@yoonghm You need to create <code>async def main():</code> function (the name doesn\u2019t have to be \u201cmain\u201d, it\u2019s just a convention), put the async code in it, and then in <code>if __name__ == \u2018__main__\u2019:</code> you will have <code>asyncio.run(main())</code>. asyncio.run is the \u201cmagic\u201d function that runs asyncio event loop and schedules the async function on it, and waits until it is finished - so it is basically running asyncio world inside the sync world :) (For other way around - running sync functions from async world - you need to use threadpool or processpool, see <code>loop.run_in_executor()</code>)."}, {"owner": {"reputation": 2488, "user_id": 2745140, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/OGCDP.jpg?s=128&g=1", "display_name": "yoonghm", "link": "https://stackoverflow.com/users/2745140/yoonghm"}, "edited": false, "score": 0, "creation_date": 1587286653, "post_id": 51527365, "comment_id": 108446359, "body": "Thanks.I found out that later.  However my problem is now in <a href=\"https://stackoverflow.com/questions/61291928/how-to-await-a-coroutine-with-an-event-loop\" title=\"how to await a coroutine with an event loop\">stackoverflow.com/questions/61291928/&hellip;</a>  I know about async in C but I find it difficult to comprehend various async feature in Python.  Need to spend some efforts to understand it."}], "tags": [], "owner": {"reputation": 21075, "user_id": 196206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b3e5f05b6457facb417239ce03739cb?s=128&d=identicon&r=PG", "display_name": "Messa", "link": "https://stackoverflow.com/users/196206/messa"}, "is_accepted": true, "score": 12, "last_activity_date": 1547911686, "last_edit_date": 1547911686, "creation_date": 1532551425, "answer_id": 51527365, "question_id": 51527364, "link": "https://stackoverflow.com/questions/51527364/asyncio-await-fails-with-typeerror-cannot-unpack-non-iterable-coroutine-object/51527365#51527365", "title": "asyncio.await fails with TypeError: cannot unpack non-iterable coroutine object", "body": "<p>Well, there should be <code>await</code> in front of <code>asyncio.wait</code> :)</p>\n\n<pre><code>done, pending = await asyncio.wait(\n    [a, b],\n    return_when=asyncio.FIRST_COMPLETED)\n</code></pre>\n"}], "owner": {"reputation": 21075, "user_id": 196206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b3e5f05b6457facb417239ce03739cb?s=128&d=identicon&r=PG", "display_name": "Messa", "link": "https://stackoverflow.com/users/196206/messa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3891, "favorite_count": 0, "accepted_answer_id": 51527365, "answer_count": 1, "score": 6, "last_activity_date": 1547911686, "creation_date": 1532551425, "question_id": 51527364, "link": "https://stackoverflow.com/questions/51527364/asyncio-await-fails-with-typeerror-cannot-unpack-non-iterable-coroutine-object", "title": "asyncio.await fails with TypeError: cannot unpack non-iterable coroutine object", "body": "<p>I have this code:</p>\n\n<pre><code>done, pending = asyncio.wait(\n    [a, b],\n    return_when=asyncio.FIRST_COMPLETED)\n</code></pre>\n\n<p>But it fails:</p>\n\n<pre><code>Traceback (most recent call last):\n  ...\n  File \"/.../api.py\", line 83, in websockets_handler\n    return_when=asyncio.FIRST_COMPLETED)\nTypeError: cannot unpack non-iterable coroutine object\n</code></pre>\n"}, {"tags": ["python", "modeling"], "owner": {"reputation": 145, "user_id": 9995331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f1abf3d6ffe9d97353e10091e4dbc68?s=128&d=identicon&r=PG&f=1", "display_name": "user9995331", "link": "https://stackoverflow.com/users/9995331/user9995331"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1532551364, "creation_date": 1532551364, "question_id": 51527353, "link": "https://stackoverflow.com/questions/51527353/modeling-of-systems-using-flux-balance-analysis-metabolites-cant-introduced-t", "title": "Modeling of Systems Using Flux Balance Analysis - Metabolites Can&#39;t Introduced to System (CobraPY)", "body": "<p>This is both mathematics, modeling and biology. </p>\n\n<p>Using flux balance analysis we are modeling systems. </p>\n\n<p>I have a reaction with steps in our CobraPY model that is in essence this:  </p>\n\n<p>A + B --> C </p>\n\n<p>C + D --> E</p>\n\n<p>E + F --> G</p>\n\n<p>The problem is that D is a protein that is impossible to model the creation of. Are there any workarounds for groups and flux balance analysis that allow the brief introduction of a protein or other metabolite then remove it from the system? I assume it would create infinite mass or a loop of some kind.</p>\n"}, {"tags": ["python", "pandas", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 3, "last_activity_date": 1532553037, "creation_date": 1532553037, "answer_id": 51527708, "question_id": 51527331, "link": "https://stackoverflow.com/questions/51527331/pandas-boxplot-different-y-axes-in-subplots/51527708#51527708", "title": "Pandas boxplot, different y axes in subplots", "body": "<p>One way you could do this create different axes for the subplots and plotting the dataframe columns separately:</p>\n\n<pre><code>fig, ax = plt.subplots(1, 2, figsize=(10, 5))\ndata.boxplot('COD','Group', ax=ax[0])\ndata.boxplot('BOD','Group', ax=ax[1])\n</code></pre>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/fn1XL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fn1XL.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 29479, "user_id": 1356000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef54c2101a4c23ea2441ce2b346ffb75?s=128&d=identicon&r=PG", "display_name": "Diziet Asahi", "link": "https://stackoverflow.com/users/1356000/diziet-asahi"}, "is_accepted": false, "score": 3, "last_activity_date": 1532591530, "creation_date": 1532591530, "answer_id": 51533672, "question_id": 51527331, "link": "https://stackoverflow.com/questions/51527331/pandas-boxplot-different-y-axes-in-subplots/51533672#51533672", "title": "Pandas boxplot, different y axes in subplots", "body": "<p>You need to create your axes using <code>sharey=False</code> <em>before</em> calling <code>DataFrame.boxplot()</code> to force the non-sharing of y-axes limits. <strong>But you have to be careful to provide the correct number of axes</strong>, otherwise pandas is forced to clear the figure and create it's own axes (which will then share their y-axes).</p>\n\n<pre><code>fig, axs = plt.subplots(1,len(data.Group.unique()),figsize=(10,  5), sharey=False)\ndata.boxplot(['COD','BOD'], 'Group', axs)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/czlbx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/czlbx.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 25, "user_id": 7351142, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ILD5vAkXFPU/AAAAAAAAAAI/AAAAAAAADIo/fRbVGsUJbqw/photo.jpg?sz=128", "display_name": "Vitek Rous", "link": "https://stackoverflow.com/users/7351142/vitek-rous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2707, "favorite_count": 1, "accepted_answer_id": 51527708, "answer_count": 2, "score": 2, "last_activity_date": 1532594608, "creation_date": 1532551251, "last_edit_date": 1532594608, "question_id": 51527331, "link": "https://stackoverflow.com/questions/51527331/pandas-boxplot-different-y-axes-in-subplots", "title": "Pandas boxplot, different y axes in subplots", "body": "<p>First, to say. I'm aware of similar questions namely <a href=\"https://stackoverflow.com/questions/37352616/pandas-boxplot-groupby-different-ylim-in-each-subplot\">pandas-boxplot-groupby-different-ylim-in-each-subplot</a> and <a href=\"https://stackoverflow.com/questions/40148830/different-ylim-for-shared-axes-in-pandas-boxplot/40148917\">different-ylim-for-shared-axes-in-pandas-boxplot</a> but I am still not able to get the desired result with my dataset. I've got a dataset of wastewater samples where columns are different pollutants and rows with \"codes\" for three different groups:</p>\n\n<p>Dataset looks like this (but bigger)</p>\n\n<pre><code>data = pd.DataFrame({'Group': pd.Series(['IN', 'IN', 'IN', 'OUT', 'OUT', 'OUT']),\n                  'COD' : pd.Series([800, 900, 100, 400, 450, 500]),\n                  'BOD' : pd.Series([40, 50, 60, 20, 25, 30])}\n</code></pre>\n\n<p>and my code for boxplot (in jupyter with matplotlib inline)</p>\n\n<pre><code>fig, ax = plt.subplots(figsize=(10,  5))\ndata.boxplot(['COD','BOD'], 'Group', ax)\n</code></pre>\n\n<p>and the output is like this</p>\n\n<p><img src=\"https://i.stack.imgur.com/dmd3K.png\" alt=\"boxplot output\"></p>\n\n<p>It's obvious that the y-axis can't be the same for all the data, but I was not able to recreate the output in such way to change the axis for individual subplots even with help of the links above. I would really a appreciate any help on this.</p>\n"}, {"tags": ["python", "pandas", "dictionary", "data-science"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10054779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6409ea031481e31bf74cfd7984df65e4?s=128&d=identicon&r=PG&f=1", "display_name": "dwdineen", "link": "https://stackoverflow.com/users/10054779/dwdineen"}, "is_accepted": false, "score": 0, "last_activity_date": 1532555203, "last_edit_date": 1532555203, "creation_date": 1532551222, "answer_id": 51527323, "question_id": 51527264, "link": "https://stackoverflow.com/questions/51527264/mapping-values-inside-pandas-column/51527323#51527323", "title": "Mapping values inside pandas column", "body": "<p>You can do:</p>\n\n<pre><code>import numpy as np\n\ndf['S'] = np.where(df['S'] == 2, 0, df['S'])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1298, "user_id": 9435107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e0a5095d1dee0d01c4b5f24f4be428?s=128&d=identicon&r=PG&f=1", "display_name": "W Stokvis", "link": "https://stackoverflow.com/users/9435107/w-stokvis"}, "is_accepted": false, "score": 1, "last_activity_date": 1532551375, "creation_date": 1532551375, "answer_id": 51527355, "question_id": 51527264, "link": "https://stackoverflow.com/questions/51527264/mapping-values-inside-pandas-column/51527355#51527355", "title": "Mapping values inside pandas column", "body": "<p>You're close but you need a few corrections. Since you want to use a function, remove the <code>for</code> loop and replace <code>n</code> with <code>value</code>. Additionally, use <code>apply</code> instead of <code>map</code>. <code>Apply</code> operates on the entire column at once. See this <a href=\"https://stackoverflow.com/a/19798528/9435107\">answer</a> for how to properly use <code>apply</code> vs <code>applymap</code> vs <code>map</code></p>\n\n<pre><code>def app(value):\n    if value == 1:\n        return 1\n    elif value == 2:\n        return 0\ndf['S'] = df.S.apply(app)\n   Age Sex  S\n0   30   F  1\n1   40   M  1\n2   50   M  0\n3   60   F  0\n4   70   M  1\n5   80   F  0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 0, "last_activity_date": 1532551460, "creation_date": 1532551460, "answer_id": 51527371, "question_id": 51527264, "link": "https://stackoverflow.com/questions/51527264/mapping-values-inside-pandas-column/51527371#51527371", "title": "Mapping values inside pandas column", "body": "<p>If you only wish to change values equal to 2, you can use <code>pd.DataFrame.loc</code>:</p>\n\n<pre><code>df.loc[df['S'] == 0, 'S'] = 0\n</code></pre>\n\n<p><code>pd.Series.apply</code> is not recommend and this is just a thinly veiled, inefficient loop.</p>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 10118296, "user_type": "registered", "profile_image": "https://graph.facebook.com/10103730933426437/picture?type=large", "display_name": "Anton Petrov", "link": "https://stackoverflow.com/users/10118296/anton-petrov"}, "is_accepted": false, "score": 0, "last_activity_date": 1532551469, "creation_date": 1532551469, "answer_id": 51527373, "question_id": 51527264, "link": "https://stackoverflow.com/questions/51527264/mapping-values-inside-pandas-column/51527373#51527373", "title": "Mapping values inside pandas column", "body": "<p>You could use .replace as follows:\ndf[\"S\"] = df[\"S\"].replace([2], 0)\nThis will replace all of 2 values to 0 in one line</p>\n"}, {"tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": false, "score": 2, "last_activity_date": 1532552201, "last_edit_date": 1532552201, "creation_date": 1532551483, "answer_id": 51527376, "question_id": 51527264, "link": "https://stackoverflow.com/questions/51527264/mapping-values-inside-pandas-column/51527376#51527376", "title": "Mapping values inside pandas column", "body": "<p>Don't use <strong><code>apply</code></strong>, simply use <strong><code>loc</code></strong> to assign the values:</p>\n\n<pre><code>df.loc[df.S.eq(2), 'S'] = 0\n\n   Age Sex  S\n0   30   F  1\n1   40   M  1\n2   50   M  0\n3   60   F  0\n4   70   M  1\n5   80   F  0\n</code></pre>\n\n<p>If you need a more performant option, use <strong><code>np.select</code></strong>. This is also more scalable, as you can always add more conditions:</p>\n\n<pre><code>df['S'] = np.select([df.S.eq(2)], [0], 1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1532551728, "post_id": 51527387, "comment_id": 90023430, "body": "Hmm, this is much faster than assigning via <code>loc</code>"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1532554197, "post_id": 51527387, "comment_id": 90024481, "body": "@user3483203 you can try mask , should be faster :-) <code>df.S.mask(df.S&gt;1,0) </code>"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1532555887, "post_id": 51527387, "comment_id": 90025063, "body": "Yep, much faster, I need to use <code>mask</code> more :D"}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 2, "last_activity_date": 1532551818, "last_edit_date": 1532551818, "creation_date": 1532551539, "answer_id": 51527387, "question_id": 51527264, "link": "https://stackoverflow.com/questions/51527264/mapping-values-inside-pandas-column/51527387#51527387", "title": "Mapping values inside pandas column", "body": "<p>Use <code>eq</code> to create a boolean series and conver that boolean series to int with <code>astype</code>:</p>\n\n<pre><code>df['S'] = df['S'].eq(1).astype(int)\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>df['S'] = (df['S'] == 1).astype(int)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   Age Sex  S\n0   30   F  1\n1   40   M  1\n2   50   M  0\n3   60   F  0\n4   70   M  1\n5   80   F  0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1980, "user_id": 2593536, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/OYOEA.png?s=128&g=1", "display_name": "Mai", "link": "https://stackoverflow.com/users/2593536/mai"}, "is_accepted": false, "score": 0, "last_activity_date": 1532551737, "creation_date": 1532551737, "answer_id": 51527431, "question_id": 51527264, "link": "https://stackoverflow.com/questions/51527264/mapping-values-inside-pandas-column/51527431#51527431", "title": "Mapping values inside pandas column", "body": "<p>Go with vectorize numpy operation:</p>\n\n<pre><code>df['S'] = np.abs(df['S'] - 2)\n</code></pre>\n\n<p>and stand yourself out from competitions in interviews and SO answers :)</p>\n"}, {"tags": [], "owner": {"reputation": 792, "user_id": 9557919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MlQQ6.png?s=128&g=1", "display_name": "dimension", "link": "https://stackoverflow.com/users/9557919/dimension"}, "is_accepted": false, "score": 0, "last_activity_date": 1532552930, "last_edit_date": 1532552930, "creation_date": 1532552495, "answer_id": 51527585, "question_id": 51527264, "link": "https://stackoverflow.com/questions/51527264/mapping-values-inside-pandas-column/51527585#51527585", "title": "Mapping values inside pandas column", "body": "<pre><code>&gt;&gt;&gt;df = pd.DataFrame({'Age':[30,40,50,60,70,80],'Sex': \n ['F','M','M','F','M','F'],'S': \n [1,1,2,2,1,2]})\n\n\n&gt;&gt;&gt; def app(value):\n        return 1 if value == 1 else 0 \n    # or app = lambda value : 1 if value == 1 else 0\n\n&gt;&gt;&gt; df[\"S\"] = df[\"S\"].map(app)\n\n&gt;&gt;&gt; df \n   Age  S Sex\n      Age  S Sex\n   0   30  1   F\n   1   40  1   M\n   2   50  0   M\n   3   60  0   F\n   4   70  1   M\n   5   80  0   F\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7435185, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KEaAcjCTysc/AAAAAAAAAAI/AAAAAAAAADo/99LPXAbiIQo/photo.jpg?sz=128", "display_name": "Fallag Tayeb", "link": "https://stackoverflow.com/users/7435185/fallag-tayeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "answer_count": 8, "score": 1, "last_activity_date": 1538068113, "creation_date": 1532550898, "last_edit_date": 1538068113, "question_id": 51527264, "link": "https://stackoverflow.com/questions/51527264/mapping-values-inside-pandas-column", "title": "Mapping values inside pandas column", "body": "<p>I used the code below to map the 2 values inside S column to 0 but it didn't work. Any suggestion on how to solve this?\nN.B : I want to implement an external function inside the map.</p>\n\n<pre><code> df = pd.DataFrame({\n   'Age': [30,40,50,60,70,80],\n   'Sex': ['F','M','M','F','M','F'],\n   'S'  : [1,1,2,2,1,2]\n })\n def app(value):\n     for n in df['S']:\n         if n == 1:\n             return 1\n         if n == 2:\n             return 0\n df[\"S\"] = df.S.map(app)\n</code></pre>\n"}, {"tags": ["python", "pattern-matching", "idioms"], "comments": [{"owner": {"reputation": 661, "user_id": 5001502, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153410573162710/picture?type=large", "display_name": "Ben Jones", "link": "https://stackoverflow.com/users/5001502/ben-jones"}, "edited": false, "score": 0, "creation_date": 1532551240, "post_id": 51527204, "comment_id": 90023214, "body": "If you&#39;re looking for a <code>switch</code> statement, python doesn&#39;t have those - <code>elif</code> chains as you&#39;ve written them are the way to go."}, {"owner": {"reputation": 661, "user_id": 5001502, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153410573162710/picture?type=large", "display_name": "Ben Jones", "link": "https://stackoverflow.com/users/5001502/ben-jones"}, "edited": false, "score": 0, "creation_date": 1532551388, "post_id": 51527204, "comment_id": 90023293, "body": "Alternantively, you might just define all your y = 1 pieces in a <code>list</code> as so:  <code>[Piecekind.Rook, Piecekind.Knight, Piecekind.Bishop, ...]</code>"}, {"owner": {"reputation": 661, "user_id": 5001502, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153410573162710/picture?type=large", "display_name": "Ben Jones", "link": "https://stackoverflow.com/users/5001502/ben-jones"}, "edited": false, "score": 0, "creation_date": 1532551981, "post_id": 51527204, "comment_id": 90023551, "body": "Since this question is about style/Pythonic idioms, you may be interested in the reasoning behind this: <a href=\"https://docs.python.org/3/faq/design.html#why-isn-t-there-a-switch-or-case-statement-in-python\" rel=\"nofollow noreferrer\">docs.python.org/3/faq/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 661, "user_id": 5001502, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153410573162710/picture?type=large", "display_name": "Ben Jones", "link": "https://stackoverflow.com/users/5001502/ben-jones"}, "is_accepted": false, "score": 0, "last_activity_date": 1532552077, "last_edit_date": 1532552077, "creation_date": 1532551725, "answer_id": 51527426, "question_id": 51527204, "link": "https://stackoverflow.com/questions/51527204/idiomatic-way-to-do-basic-pattern-matching-on-multiple-variables-in-python/51527426#51527426", "title": "Idiomatic way to do basic pattern matching on multiple variables in Python", "body": "<p>One way to get rid of lengthy <code>elif</code> chain is to create a translation table.</p>\n\n<pre><code>outer_row_pieces = [PieceKind.Rook,\n                    PieceKind.Knight,\n                    PieceKind.Bishop,\n                    PieceKind.King,\n                    PieceKind.Queen,\n                    PieceKind.Bishop,\n                    Piecekind.Knight,\n                    PieceKind.Rook]\n\ndef piece_kind_at_init(x, y):\n    if y == 2 or y == 7:\n        return PieceKind.Pawn\n    if y == 1 or y == 8:\n        return outer_row_pieces[x]\n    return None\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 10085092, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Itjok_hulfM/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qwcm1cKlqmQ3UnbBWO1v-Ku8TWcQ/mo/photo.jpg?sz=128", "display_name": "daw kot", "link": "https://stackoverflow.com/users/10085092/daw-kot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1532552077, "creation_date": 1532550685, "question_id": 51527204, "link": "https://stackoverflow.com/questions/51527204/idiomatic-way-to-do-basic-pattern-matching-on-multiple-variables-in-python", "title": "Idiomatic way to do basic pattern matching on multiple variables in Python", "body": "<p>I want to achieve what this code (written in Crystal) does:</p>\n\n<pre><code>enum PieceKind\n    Pawn, Rook, Bishop, Knight, King, Queen\nend\n\ndef piece_kind_at_init(x, y)\n    case y\n    when 2, 7 then PieceKind::Pawn\n    when 1, 8\n        case x\n        when 1, 8 then PieceKind::Rook\n        when 2, 7 then PieceKind::Bishop\n        when 3, 6 then PieceKind::Knight\n        when 4 then PieceKind::King\n        when 5 then PieceKind::Queen\n        end\n    end\nend\n</code></pre>\n\n<p>This is the \"nicest\" version I was able to come up with in Python:</p>\n\n<pre><code>class PieceKind(Enum):\n    Pawn = auto()\n    Rook = auto()\n    Bishop = auto()\n    Knight = auto()\n    King = auto()\n    Queen = auto()\n\ndef piece_kind_at_init(x, y):\n    if y in [2, 7]:     \n        return PieceKind.Pawn\n    elif y in [1, 8]:\n        if x in [1, 8]:     \n            return PieceKind.Rook\n        elif x in [2, 7]:   \n            return PieceKind.Bishop\n        elif x in [3, 6]:   \n            return PieceKind.Knight\n        elif x == 4:        \n            return PieceKind.King\n        elif x == 5:        \n            return PieceKind.Queen\n</code></pre>\n\n<p>It's fine, but it's definitely less readable the version with proper pattern matching. What's the most idiomatic way to write the code?</p>\n"}, {"tags": ["python", "list-comprehension"], "comments": [{"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1532551534, "post_id": 51527203, "comment_id": 90023353, "body": "One does not simply &quot;change the tuple.&quot; You can change the value of the name <code>a</code> to be the appropriate tuple, but tuples are immutable and cannot themselves be changed. In other words, you change <code>a</code>, not the tuple."}], "answers": [{"tags": [], "owner": {"reputation": 2775, "user_id": 6104077, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64cafb3f689f97da3bb17aa97b97318f?s=128&d=identicon&r=PG&f=1", "display_name": "Sushant", "link": "https://stackoverflow.com/users/6104077/sushant"}, "is_accepted": true, "score": 3, "last_activity_date": 1532551032, "last_edit_date": 1532551032, "creation_date": 1532550781, "answer_id": 51527229, "question_id": 51527203, "link": "https://stackoverflow.com/questions/51527203/tuple-conversion-in-python-to-list/51527229#51527229", "title": "Tuple conversion in python to list", "body": "<p>Simple list comprehension here -</p>\n\n<pre><code>a = [(\"roll\", i) for i in a]\n</code></pre>\n\n<p>OP </p>\n\n<pre><code>[('roll', 1), ('roll', 2), ('roll', 3), ('roll', 4)]\n</code></pre>\n\n<p>More about list comprehension <a href=\"https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1532551027, "post_id": 51527231, "comment_id": 90023109, "body": "Technically, it <i>rebinds</i> <code>a</code>; if <code>a</code> is aliased elsewhere under a different name, that alias is unchanged (e.g. <code>b = a; a = [(&#39;roll&#39;, i) for i in a]</code> will preserve the original value of <code>a</code>, accessible through the <code>b</code> alias). Subtle distinction, but important in some cases. Since <code>a</code> is initially bound to a <code>tuple</code>, it&#39;s not possible to mutate the <code>tuple</code> itself."}, {"owner": {"reputation": 8886, "user_id": 866930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d4d18c82ab14aa57718bb3343876d53?s=128&d=identicon&r=PG", "display_name": "jrd1", "link": "https://stackoverflow.com/users/866930/jrd1"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1532551137, "post_id": 51527231, "comment_id": 90023168, "body": "Thanks, @ShadowRanger! That&#39;s very informative - I&#39;ve edited my answer to reflect that. Thanks again!"}], "tags": [], "owner": {"reputation": 8886, "user_id": 866930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d4d18c82ab14aa57718bb3343876d53?s=128&d=identicon&r=PG", "display_name": "jrd1", "link": "https://stackoverflow.com/users/866930/jrd1"}, "is_accepted": false, "score": 3, "last_activity_date": 1532551033, "last_edit_date": 1532551033, "creation_date": 1532550791, "answer_id": 51527231, "question_id": 51527203, "link": "https://stackoverflow.com/questions/51527203/tuple-conversion-in-python-to-list/51527231#51527231", "title": "Tuple conversion in python to list", "body": "<p><strong>Yes</strong> - simply do a <a href=\"https://www.pythonforbeginners.com/lists/list-comprehensions-in-python/\" rel=\"nofollow noreferrer\">list comprehension</a>: </p>\n\n<pre><code>a = [('roll', i) for i in a]\n</code></pre>\n\n<p>Note that doing this will <em>rebind</em> <code>a</code>! (See the note by @ShadowRanger.)</p>\n"}, {"tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": false, "score": 1, "last_activity_date": 1532550869, "creation_date": 1532550869, "answer_id": 51527253, "question_id": 51527203, "link": "https://stackoverflow.com/questions/51527203/tuple-conversion-in-python-to-list/51527253#51527253", "title": "Tuple conversion in python to list", "body": "<p>Easily. With <a href=\"https://docs.python.org/3/howto/functional.html#generator-expressions-and-list-comprehensions\" rel=\"nofollow noreferrer\">a list comprehension</a>:</p>\n\n<pre><code>a = [(\"roll\", x) for x in a]\n</code></pre>\n\n<p>or <a href=\"https://docs.python.org/3/library/itertools.html#itertools.repeat\" rel=\"nofollow noreferrer\">with <code>itertools</code> stuff</a>:</p>\n\n<pre><code>import itertools\n\na = list(zip(itertools.repeat('roll'), a))  # No need to wrap in list if you'll iterate the result and discard it\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1532551204, "post_id": 51527301, "comment_id": 90023195, "body": "Note: Any use of <code>map</code> that requires a <code>lambda</code> to work is more efficiently and more clearly expressed as a list comprehension or generator expression, since the listcomp/genexpr can inline the work done in the <code>lambda</code>, avoiding (relatively expensive) function call overhead for trivial work."}], "tags": [], "owner": {"reputation": 15836, "user_id": 9299259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7A5cq.jpg?s=128&g=1", "display_name": "YOLO", "link": "https://stackoverflow.com/users/9299259/yolo"}, "is_accepted": false, "score": 0, "last_activity_date": 1532551081, "creation_date": 1532551081, "answer_id": 51527301, "question_id": 51527203, "link": "https://stackoverflow.com/questions/51527203/tuple-conversion-in-python-to-list/51527301#51527301", "title": "Tuple conversion in python to list", "body": "<p>You can also use <code>map</code> function:</p>\n\n<pre><code>i = (1,2,3,4)\nlist(map(lambda x: ('roll',x), i))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 10118296, "user_type": "registered", "profile_image": "https://graph.facebook.com/10103730933426437/picture?type=large", "display_name": "Anton Petrov", "link": "https://stackoverflow.com/users/10118296/anton-petrov"}, "is_accepted": false, "score": 0, "last_activity_date": 1532552608, "creation_date": 1532552608, "answer_id": 51527609, "question_id": 51527203, "link": "https://stackoverflow.com/questions/51527203/tuple-conversion-in-python-to-list/51527609#51527609", "title": "Tuple conversion in python to list", "body": "<p>Or another alternative using list()</p>\n\n<pre><code> list(zip([\"roll\"]*4, a))\n</code></pre>\n"}], "owner": {"reputation": 1381, "user_id": 4718335, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0a0a692e389751ea75095d2fec7ae03d?s=128&d=identicon&r=PG&f=1", "display_name": "nikolas", "link": "https://stackoverflow.com/users/4718335/nikolas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 51527229, "answer_count": 5, "score": -1, "last_activity_date": 1532552608, "creation_date": 1532550684, "last_edit_date": 1532550973, "question_id": 51527203, "link": "https://stackoverflow.com/questions/51527203/tuple-conversion-in-python-to-list", "title": "Tuple conversion in python to list", "body": "<p>I have a tuple like</p>\n\n<pre><code>a = (1,2,3,4). \n</code></pre>\n\n<p>Is it possible to change the tuple to </p>\n\n<pre><code>a = [('roll', 1),('roll',2),('roll', 3),('roll', 4)]\n</code></pre>\n"}, {"tags": ["python", "discord", "discord.py"], "comments": [{"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 0, "creation_date": 1532550800, "post_id": 51527196, "comment_id": 90023004, "body": "Either use an older version of Python or a newer version of discord.py."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1532551268, "post_id": 51527196, "comment_id": 90023229, "body": "There&#39;s no fixed version yet - the fix has been committed but not released."}], "answers": [{"tags": [], "owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "is_accepted": false, "score": 2, "last_activity_date": 1532554182, "creation_date": 1532554182, "answer_id": 51527942, "question_id": 51527196, "link": "https://stackoverflow.com/questions/51527196/python-syntax-error-when-making-discord-bot/51527942#51527942", "title": "Python Syntax Error when making discord bot", "body": "<p>Your copy of the library lacks this commit:</p>\n\n<ul>\n<li><a href=\"https://github.com/Rapptz/discord.py/commit/1863a1c6636f53592519320a173ec9573c090c0b\" rel=\"nofollow noreferrer\">Stop asyncio.async throwing a syntax error in 3.7. </a></li>\n</ul>\n\n<p>The problem is that Python 3.7 introduced <code>async</code> as a keyword, so that <code>asyncio.async</code> is no longer valid syntax.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7338362"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3497, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1532554182, "creation_date": 1532550659, "question_id": 51527196, "link": "https://stackoverflow.com/questions/51527196/python-syntax-error-when-making-discord-bot", "title": "Python Syntax Error when making discord bot", "body": "<p>When I try program a simple bot that sends a cookie emoji on the call \"!cookie\", I am given this error message.           </p>\n\n<pre><code>RESTART: C:/Users/matth/AppData/Local/Programs/Python/Python37-32/InfoBot.py \nTraceback (most recent call last):\n   File \"C:/Users/matth/AppData/Local/Programs/Python/Python37-32/InfoBot.py\", line 1, in &lt;module&gt;\nimport discord\n  File \"C:\\Users\\matth\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\discord\\__init__.py\", line 20, in &lt;module&gt;\nfrom .client import Client, AppInfo, ChannelPermissions\n  File \"C:\\Users\\matth\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\discord\\client.py\", line 38, in &lt;module&gt;\nfrom .state import ConnectionState\n  File \"C:\\Users\\matth\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\discord\\state.py\", line 36, in &lt;module&gt;\nfrom . import utils, compat\n  File \"C:\\Users\\matth\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\discord\\compat.py\", line 32\ncreate_task = asyncio.async\n                          ^\nSyntaxError: invalid syntax\n</code></pre>\n\n<p>This is my code.</p>\n\n<pre><code>import discord\nfrom discord.ext.commands import Bot\nfrom discord.ext import commands\nimport asyncio\nimport time\n\nClient = discord.Client()\nclient = commands.Bot(command_prefix = \"!\")\n\n@client.event\nasync def on_ready():\n    print(\"Bot is ready!\")\n\n@client.event\nasync def on_message(message):\n    if message.content == \"cookie\":\n        await client.send_message(message.channel, \":cookie:\")\n\n\n\n\nclient.run(\"********************************\")\n</code></pre>\n\n<p>I'm censoring out my token but I hope that won't interfere with solving the problem. Thanks &lt;3</p>\n"}, {"tags": ["python", "function", "numpy", "pass-by-reference"], "comments": [{"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1532552554, "post_id": 51527164, "comment_id": 90023793, "body": "When you write <code>c=MatMul(A,b)</code>, the previous value of <code>c</code> <i>cannot possibly have any influence on the result</i> - the function has no way of knowing what&#39;s going to be done with its return value."}], "answers": [{"comments": [{"owner": {"reputation": 2721, "user_id": 4372237, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/3XqU1.jpg?s=128&g=1", "display_name": "Mikhail Genkin", "link": "https://stackoverflow.com/users/4372237/mikhail-genkin"}, "edited": false, "score": 0, "creation_date": 1532551366, "post_id": 51527255, "comment_id": 90023277, "body": "Thanks for the answer! What about function and return? Is it possible to return an array without additional memory allocation? Or should I use C-style coding: <code>def MatMul(A,b,c)</code> where I pass all three arrays to function by reference ?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 2721, "user_id": 4372237, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/3XqU1.jpg?s=128&g=1", "display_name": "Mikhail Genkin", "link": "https://stackoverflow.com/users/4372237/mikhail-genkin"}, "edited": false, "score": 1, "creation_date": 1532552096, "post_id": 51527255, "comment_id": 90023600, "body": "@MikhailGenkin: You want the caller to communicate something to the function - specifically, where to write results. Return values do not allow communication in that direction."}, {"owner": {"reputation": 2721, "user_id": 4372237, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/3XqU1.jpg?s=128&g=1", "display_name": "Mikhail Genkin", "link": "https://stackoverflow.com/users/4372237/mikhail-genkin"}, "edited": false, "score": 0, "creation_date": 1532552236, "post_id": 51527255, "comment_id": 90023648, "body": "Thanks! I suspected so. So, I guess, the only possible way, as suggested in the answer above, is C-style programming: pass A,b and c by reference and modify <code>c</code> inside function"}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1532550872, "creation_date": 1532550872, "answer_id": 51527255, "question_id": 51527164, "link": "https://stackoverflow.com/questions/51527164/python-function-return-an-array-without-additional-memory-allocations/51527255#51527255", "title": "Python function: return an array without additional memory allocations", "body": "<p><code>dot</code> doesn't know or care about the <code>c</code> variable or the array that variable already holds a reference to. It'll make a new array, and <code>=</code> will bind the <code>c</code> variable to that new array, leaving the old array to be cleaned up by the memory management system.</p>\n\n<p>If you want <code>dot</code> to store output into an existing array, you need to tell it to do that:</p>\n\n<pre><code>A.dot(b, out=c)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2721, "user_id": 4372237, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/3XqU1.jpg?s=128&g=1", "display_name": "Mikhail Genkin", "link": "https://stackoverflow.com/users/4372237/mikhail-genkin"}, "edited": false, "score": 1, "creation_date": 1532551476, "post_id": 51527269, "comment_id": 90023325, "body": "Thanks for the answer. Is it possible to define a function in such way that one can call it <code>c=MatMul(A,b)</code> and without additional memory allocation?"}, {"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "reply_to_user": {"reputation": 2721, "user_id": 4372237, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/3XqU1.jpg?s=128&g=1", "display_name": "Mikhail Genkin", "link": "https://stackoverflow.com/users/4372237/mikhail-genkin"}, "edited": false, "score": 1, "creation_date": 1532551728, "post_id": 51527269, "comment_id": 90023431, "body": "@MikhailGenkin: Not really. The resulting matrix could have a different shape from both <code>A</code> and <code>b</code> and could be larger than both (such as multiplying a <code>3x1</code> array by a <code>1x3</code> array and getting a <code>3x3</code> array). The function <code>MatMul</code> would not know where to put the result, either in memory or binding it to a name to represent the result, and there may not even be room to store the result into one of the input parameter arrays. The only way I can see is to use a global variable in the function, which is bad programming style. Why don&#39;t you want to change the way the function is called?"}, {"owner": {"reputation": 2721, "user_id": 4372237, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/3XqU1.jpg?s=128&g=1", "display_name": "Mikhail Genkin", "link": "https://stackoverflow.com/users/4372237/mikhail-genkin"}, "edited": false, "score": 1, "creation_date": 1532551858, "post_id": 51527269, "comment_id": 90023492, "body": "<code>c=MatMul(A,b)</code> looks more intuitive and elegant (in my point of view) than <code>MatMul(A,b,c)</code>. However, the solution that you suggested works good as well"}, {"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "reply_to_user": {"reputation": 2721, "user_id": 4372237, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/3XqU1.jpg?s=128&g=1", "display_name": "Mikhail Genkin", "link": "https://stackoverflow.com/users/4372237/mikhail-genkin"}, "edited": false, "score": 1, "creation_date": 1532552457, "post_id": 51527269, "comment_id": 90023749, "body": "@MikhailGenkin: I agree that the assignment is more intuitive and elegant than the function call with an out parameter, but programming is full of trade-offs. I see no good way to avoid the trade-off of elegance versus memory allocation."}, {"owner": {"reputation": 2721, "user_id": 4372237, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/3XqU1.jpg?s=128&g=1", "display_name": "Mikhail Genkin", "link": "https://stackoverflow.com/users/4372237/mikhail-genkin"}, "edited": false, "score": 0, "creation_date": 1532552948, "post_id": 51527269, "comment_id": 90023991, "body": "Just 1 more question: In C there is another solution: if a function is simple enough, one can make it inline function (meaning that compiler will take a function body and substitute it into every place where function is called). Is it possible to make this trick in Python using, say, lambda-functions?"}, {"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "reply_to_user": {"reputation": 2721, "user_id": 4372237, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/3XqU1.jpg?s=128&g=1", "display_name": "Mikhail Genkin", "link": "https://stackoverflow.com/users/4372237/mikhail-genkin"}, "edited": false, "score": 0, "creation_date": 1532555343, "post_id": 51527269, "comment_id": 90024884, "body": "@MikhailGenkin: Python has different goals than C. One result is that there are many fewer optimizations made to increase speed, even when those optimizations would be easy to do. (Tail recursion comes to my mind.) Lambda functions in Python do have some restrictions, but that&#39;s the closest to in-line functions that I know of. But that&#39;s not very close--in-line functions still need to be <i>called</i> and their code is not put in the place where it is called."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 2721, "user_id": 4372237, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/3XqU1.jpg?s=128&g=1", "display_name": "Mikhail Genkin", "link": "https://stackoverflow.com/users/4372237/mikhail-genkin"}, "edited": false, "score": 0, "creation_date": 1532558855, "post_id": 51527269, "comment_id": 90025844, "body": "@MikhailGenkin: Inlining wouldn&#39;t affect the allocation behavior anyway."}], "tags": [], "owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "is_accepted": true, "score": 3, "last_activity_date": 1532564062, "last_edit_date": 1532564062, "creation_date": 1532550920, "answer_id": 51527269, "question_id": 51527164, "link": "https://stackoverflow.com/questions/51527164/python-function-return-an-array-without-additional-memory-allocations/51527269#51527269", "title": "Python function: return an array without additional memory allocations", "body": "<p>Numpy, in most of its functions that produce new arrays, has a parameter to store the resulting array. I used the names version of that parameter, <code>out</code>, in my code below, but you can leave out the name. You must make sure that the <code>out</code> array has the correct shape and dtype. The purpose of this parameter is exactly what you want--to avoid additional memory allocation. This can also speed up the code.</p>\n\n<pre><code>import numpy as np\nA = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]], dtype='float64')\nb = np.array([4, 5, 6], dtype='float64')\nc = np.zeros(3, dtype='float64')\n\nA.dot(b, out=c)\n</code></pre>\n\n<p>That parameter is mentioned in the <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.dot.html\" rel=\"nofollow noreferrer\">documentation for dot()</a>. If you want to change the definition of function <code>MatMul</code>,</p>\n\n<pre><code>def MatMul(A, b, c=None):\n    return A.dot(b, out=c)\n</code></pre>\n\n<p>and change the call to</p>\n\n<pre><code>MatMul(A, b, c)\n</code></pre>\n"}], "owner": {"reputation": 2721, "user_id": 4372237, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/3XqU1.jpg?s=128&g=1", "display_name": "Mikhail Genkin", "link": "https://stackoverflow.com/users/4372237/mikhail-genkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 0, "accepted_answer_id": 51527269, "answer_count": 2, "score": 3, "last_activity_date": 1532564062, "creation_date": 1532550492, "last_edit_date": 1532558625, "question_id": 51527164, "link": "https://stackoverflow.com/questions/51527164/python-function-return-an-array-without-additional-memory-allocations", "title": "Python function: return an array without additional memory allocations", "body": "<p>Suppose I want to make a function that multiplies input vector by input matrix:</p>\n\n<pre><code>def MatMul(A,b):\n    return A.dot(b)\n</code></pre>\n\n<p>Now, I execute the following code:</p>\n\n<pre><code>import numpy as np\nA=np.array([[1,2,3],[4,5,6],[7,8,9]],dtype='float64')\nb=np.array([4,5,6],dtype='float64')\nc=np.zeros(3,dtype='float64')\nc=MatMul(A,b)\n</code></pre>\n\n<p>Will there be additional array allocation inside <code>MatMul</code> function? I know that <code>A</code> and <code>b</code> will be passed by reference. Note, that I've already preallocated array <code>c</code>. </p>\n\n<p>Generally, how to avoid unnecessary preallocations in simple functions like this? Say, I want to perform several mathematical operations:</p>\n\n<pre><code>def Rank1Update(A,b,alpha):\n    c=A.dot(b)\n    c+=alpha*c.dot(c)*c\n    return c\n</code></pre>\n\n<p>I can fit many mathematical functions in 1 line, but code quickly becomes unreadable.</p>\n\n<p>I am familiar with C-style programming, where in order to avoid unnecessary memory allocations one would pass <code>A</code>,<code>b</code> and <code>c</code> by references and update <code>c</code> inside the functions that returns <code>void</code>. I can do the same in python, but I want to use <code>return</code> for my convenience and code readability,</p>\n\n<p>Thanks,</p>\n\n<p>Mikhail </p>\n"}, {"tags": ["python", "react-native", "tensorflow", "scikit-learn", "transcrypt"], "comments": [{"owner": {"reputation": 867, "user_id": 7291516, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/iFXbU.jpg?s=128&g=1", "display_name": "SGhaleb", "link": "https://stackoverflow.com/users/7291516/sghaleb"}, "edited": false, "score": 0, "creation_date": 1532552778, "post_id": 51527163, "comment_id": 90023896, "body": "If you&amp;#39;re looking for offline functionality than option 1 and 2 is probably best option, check <a href=\"http://www.skulpt.org\" rel=\"nofollow noreferrer\">skulpt.org</a>, if you find a solution please do let us know as this is something I&#39;m also looking for :)"}], "answers": [{"tags": [], "owner": {"reputation": 6174, "user_id": 1577341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nmeAD.jpg?s=128&g=1", "display_name": "Jacques de Hooge", "link": "https://stackoverflow.com/users/1577341/jacques-de-hooge"}, "is_accepted": false, "score": 0, "last_activity_date": 1534935950, "creation_date": 1534935950, "answer_id": 51965474, "question_id": 51527163, "link": "https://stackoverflow.com/questions/51527163/sklearn-model-in-react-native-app/51965474#51965474", "title": "SKLearn Model in React-Native App", "body": "<p>I expect sklearn to make use of C / C++ code to gain performance.\nThat rules out option 1, not principally, but practically, since load times of PyPyJs (C++ in the browser) are still unpractical.</p>\n\n<p>To run off-line, that leaves option 2 (which by the way can be done with Transcrypt, if you prefer Python over JavaScript).</p>\n\n<p>If scalability isn't a problem, option 3 is a possibility (and I think the simplest). But indeed, being able to run off-line is a considerable advantage.</p>\n\n<p>My advice is to further investigate option 2. If you gain the ability to run such models off-line in a browser, it will pay off on many other occasions. If TensorFlow would utilize the GPU, there would be a massive performance gain. </p>\n"}], "owner": {"reputation": 81, "user_id": 6874925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3baada62af9db72828a1f72b5082839?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Schlitt", "link": "https://stackoverflow.com/users/6874925/chris-schlitt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 698, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1534935950, "creation_date": 1532550490, "question_id": 51527163, "link": "https://stackoverflow.com/questions/51527163/sklearn-model-in-react-native-app", "title": "SKLearn Model in React-Native App", "body": "<p>I'm trying to figure out the best way to use an sklearn model (ex: RandomForestClassifier, etc.) in a react-native app. I've been able to export the model using pickle, but I don't know the best way to utilize it in react-native.</p>\n\n<p>Here are the options I have thought of/researched:</p>\n\n<ol>\n<li>Running actual python code in the react-native app. This could be accomplished using Transcrypt (<a href=\"http://www.transcrypt.org/\" rel=\"nofollow noreferrer\">http://www.transcrypt.org/</a>) which appears to allow you to run python code in a javascript environment.</li>\n<li>Converting (or rewriting) the model to use TensorFlow. That way, you could utilize react-native-tensorflow (<a href=\"https://github.com/reneweb/react-native-tensorflow\" rel=\"nofollow noreferrer\">https://github.com/reneweb/react-native-tensorflow</a>) to use the model in the app.</li>\n<li>Creating a python backend service and connecting it to the app by creating a REST api. Therefore the backend handles all of the processing and the prediction the model produces is relayed to the app.</li>\n</ol>\n\n<p>Ideally, I would like the app to be able to run offline, so option 3 would not be preferable. However if option 3 is clearly the simplest/easiest/only solution then I can go with that one.</p>\n\n<p>What would be the recommended way of accomplishing this? Is it one of the options I have researched above, or another option?</p>\n"}, {"tags": ["python", "pip", "python-wheel"], "answers": [{"tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 6, "last_activity_date": 1532551548, "last_edit_date": 1532551548, "creation_date": 1532551096, "answer_id": 51527304, "question_id": 51527148, "link": "https://stackoverflow.com/questions/51527148/pip-install-and-platform-specific-wheels/51527304#51527304", "title": "Pip install and platform specific wheels", "body": "<p>PIP follows the <a href=\"https://www.python.org/dev/peps/pep-0425/#id1\" rel=\"noreferrer\">PEP 425 <em>Use</em> recommendations</a>; this stipulates how a binary distribution wheel is selected.</p>\n\n<p>Specifically, <code>pip install</code> will only consider <em>compatible</em> wheels. A wheel compatible with a different platform is not going to be downloaded.</p>\n\n<p>If there are no compatible wheels, but there is a source distribution, then that source distribution is downloaded and compiled locally. If there are no compatible wheels, and no source distribution, installation fails.</p>\n\n<p>Wheels can also be built for <em>pure python</em> projects, at which point they are no longer platform specific; these are called <em>universal</em> wheels. If a project uses <em>optional</em> binary components they can choose to produce both platform-specific wheels (including the compiled binary components specific to a Python ABI version and platform), and a universal wheel with the optional compiled components excluded. An installer can then select the universal version if no compatible binary version is available for the current platform. This is not all that common however, as a universal wheel would be preferred over a source distribution!</p>\n"}], "owner": {"reputation": 19827, "user_id": 342553, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/zjZ6d.jpg?s=128&g=1", "display_name": "James Lin", "link": "https://stackoverflow.com/users/342553/james-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1338, "favorite_count": 0, "accepted_answer_id": 51527304, "answer_count": 1, "score": 3, "last_activity_date": 1532551548, "creation_date": 1532550437, "last_edit_date": 1532551250, "question_id": 51527148, "link": "https://stackoverflow.com/questions/51527148/pip-install-and-platform-specific-wheels", "title": "Pip install and platform specific wheels", "body": "<p>How does <code>pip install</code> select wheels to install?</p>\n\n<p>Say I've built multiple wheels for different platforms, and upload to PyPI does <code>pip install &lt;package&gt;</code> automatically install the correct wheel that matches the platform?</p>\n\n<p>What happens if I've built a Linux specific wheel <strong>only</strong> and upload to PyPI, and someone on Windows/Mac trying to install it by running <code>pip install &lt;package&gt;</code>?</p>\n"}, {"tags": ["python", "tensorflow", "devicehive"], "owner": {"reputation": 299, "user_id": 7571462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jtetb.jpg?s=128&g=1", "display_name": "Han M", "link": "https://stackoverflow.com/users/7571462/han-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 254, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1549747210, "creation_date": 1532550312, "last_edit_date": 1549747210, "question_id": 51527115, "link": "https://stackoverflow.com/questions/51527115/importerror-dlopen-when-using-tensorflow", "title": "ImportError: dlopen ... when using tensorflow", "body": "<p>When I was using a tensorflow model for classification, I got the following error. I am not sure what is the reason. I installed all required packages. I googled for a while but could not find the answer. Can anyone help me with this? (My machine is a Mac.)</p>\n\n<p>The error:</p>\n\n<pre><code>/Users/user_name/Desktop/tensorflow/lib/python3.6/importlib/_bootstrap.py:219: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\nreturn f(*args, **kwds)\n/Users/user_name/Desktop/tensorflow/lib/python3.6/importlib/_bootstrap.py:219: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\nreturn f(*args, **kwds)\nTraceback (most recent call last):\nFile \"parse_file.py\", line 39, in &lt;module&gt;\nprocess_file(**vars(args))\nFile \"parse_file.py\", line 29, in process_file\nfrom audio.processor import WavProcessor, format_predictions\nFile \"/Users/user_name/Desktop/project/devicehive-audio-analysis/audio/processor.py\", line 18, in &lt;module&gt;\nimport tensorflow as tf\nFile \"/Users/user_name/Desktop/tensorflow/lib/python3.6/site-packages/tensorflow/__init__.py\", line 24, in &lt;module&gt;\nfrom tensorflow.python import *\nFile \"/Users/user_name/Desktop/tensorflow/lib/python3.6/site-packages/tensorflow/python/__init__.py\", line 82, in &lt;module&gt;\nfrom tensorflow.python import keras\nFile \"/Users/user_name/Desktop/tensorflow/lib/python3.6/site-packages/tensorflow/python/keras/__init__.py\", line 26, in &lt;module&gt;\nfrom tensorflow.python.keras import activations\nFile \"/Users/user_name/Desktop/tensorflow/lib/python3.6/site-packages/tensorflow/python/keras/activations/__init__.py\", line 22, in &lt;module&gt;\nfrom tensorflow.python.keras._impl.keras.activations import elu\nFile \"/Users/user_name/Desktop/tensorflow/lib/python3.6/site-packages/tensorflow/python/keras/_impl/keras/__init__.py\", line 21, in &lt;module&gt;\nfrom tensorflow.python.keras._impl.keras import activations\nFile \"/Users/user_name/Desktop/tensorflow/lib/python3.6/site-packages/tensorflow/python/keras/_impl/keras/activations.py\", line 24, in &lt;module&gt;\nfrom tensorflow.python.keras._impl.keras.engine import Layer\nFile \"/Users/user_name/Desktop/tensorflow/lib/python3.6/site-packages/tensorflow/python/keras/_impl/keras/engine/__init__.py\", line 21, in &lt;module&gt;\nfrom tensorflow.python.keras._impl.keras.engine.topology import get_source_inputs\nFile \"/Users/user_name/Desktop/tensorflow/lib/python3.6/site-packages/tensorflow/python/keras/_impl/keras/engine/topology.py\", line 31, in &lt;module&gt;\nfrom tensorflow.python.keras._impl.keras.utils import conv_utils\nFile \"/Users/user_name/Desktop/tensorflow/lib/python3.6/site-packages/tensorflow/python/keras/_impl/keras/utils/__init__.py\", line 22, in &lt;module&gt;\nfrom tensorflow.python.keras._impl.keras.utils import data_utils\nFile \"/Users/user_name/Desktop/tensorflow/lib/python3.6/site-packages/tensorflow/python/keras/_impl/keras/utils/data_utils.py\", line 23, in &lt;module&gt;\nfrom multiprocessing.pool import ThreadPool\nFile \"/Users/user_name/anaconda3/lib/python3.6/multiprocessing/pool.py\", line 26, in &lt;module&gt;\nfrom . import util\nFile \"/Users/user_name/anaconda3/lib/python3.6/multiprocessing/util.py\", line 17, in &lt;module&gt;\nfrom subprocess import _args_from_interpreter_flags\nFile \"/Users/user_name/anaconda3/lib/python3.6/subprocess.py\", line 136, in &lt;module&gt;\nimport _posixsubprocess\nImportError: dlopen(/Users/user_name/Desktop/tensorflow/lib/python3.6/lib-dynload/_posixsubprocess.cpython-36m-darwin.so, 2): Symbol not found: __Py_set_inheritable_async_safe\nReferenced from: /Users/user_name/Desktop/tensorflow/lib/python3.6/lib-dynload/_posixsubprocess.cpython-36m-darwin.so\nExpected in: flat namespace\nin /Users/user_name/Desktop/tensorflow/lib/python3.6/lib-dynload/_posixsubprocess.cpython-36m-darwin.so\n</code></pre>\n"}, {"tags": ["python", "mysql", "orm", "sqlalchemy"], "answers": [{"tags": [], "owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "is_accepted": true, "score": 2, "last_activity_date": 1532563345, "last_edit_date": 1532563345, "creation_date": 1532561050, "answer_id": 51528977, "question_id": 51527075, "link": "https://stackoverflow.com/questions/51527075/count-instances-of-value-included-in-result-set-with-sqlalchemy/51528977#51528977", "title": "count instances of value included in result set with SQLAlchemy", "body": "<p>If <code>queue_id</code> groups do not contain <code>foo_id</code> duplicates, you could use a LEFT JOIN:</p>\n\n<pre><code>qc2 = aliased(QueueContent)\n\nsession.query(QueueContent.queue_id,\n              func.count(),\n              func.count(qc2.foo_id)).\\\n    outerjoin(qc2, and_(qc2.queue_id == 3,\n                        qc2.foo_id == QueueContent.foo_id)).\\\n    filter(QueueContent.queue_id != 3).\\\n    group_by(QueueContent.queue_id)\n</code></pre>\n\n<p>If they do, you could use an EXISTS subquery expression wrapped in NULLIF (or cast as integer and summed):</p>\n\n<pre><code>qc2 = aliased(QueueContent)\n\nsq = session.query(qc2).\\\n    filter_by(queue_id=3, foo_id=QueueContent.foo_id).\\\n    exists()\n\nsession.query(QueueContent.queue_id,\n              func.count(),\n              func.count(func.nullif(sq, False))).\\\n    filter(QueueContent.queue_id != 3).\\\n    group_by(QueueContent.queue_id)\n</code></pre>\n\n<p>Both variants use the fact that COUNT(<em>expression</em>) produces the number of rows where value of <em>expression</em> is not NULL.</p>\n"}], "owner": {"reputation": 3377, "user_id": 2224777, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/4s327.png?s=128&g=1", "display_name": "Brian Leach", "link": "https://stackoverflow.com/users/2224777/brian-leach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 51528977, "answer_count": 1, "score": 1, "last_activity_date": 1532563345, "creation_date": 1532550092, "last_edit_date": 1532560936, "question_id": 51527075, "link": "https://stackoverflow.com/questions/51527075/count-instances-of-value-included-in-result-set-with-sqlalchemy", "title": "count instances of value included in result set with SQLAlchemy", "body": "<p>Apologies if the question title is not descriptive / well worded.</p>\n\n<p>I want to be able to count how many instances of a certain value occur in rows that meet a certain criteria. Consider the following two tables, <code>queues</code> and <code>queue_contents</code></p>\n\n<p><strong>queues Table:</strong></p>\n\n<pre><code>+----+---------+\n| id |  name   |\n+----+---------+\n|  1 | queue A |\n|  2 | queue B |\n|  3 | queue C |\n+----+---------+\n</code></pre>\n\n<p><strong>queue_contents table:</strong></p>\n\n<pre><code>+-----+----------+--------+\n| id  | queue_id | foo_id |\n+-----+----------+--------+\n|  1  |        1 |    10  |\n|  2  |        1 |    11  |\n|  3  |        1 |    12  |\n|  5  |        2 |    20  |\n|  6  |        2 |    21  |\n|  7  |        2 |    23  |\n|  8  |        2 |    24  |\n|  9  |        3 |    10  |\n|  10 |        3 |    11  |\n|  11 |        3 |    20  |\n|  12 |        3 |    30  |\n+-----+----------+--------+\n</code></pre>\n\n<p>I would like a query that outputs the following result when I query for <code>queue_id == 3</code></p>\n\n<pre><code>+----------+------------+-------------+-----------------------+\n| queue_id | queue_name | total_count | contained_in_this_one |\n+----------+------------+-------------+-----------------------+\n|        1 | queue A    |           3 |                     2 |\n|        2 | queue B    |           4 |                     1 |\n+----------+------------+-------------+-----------------------+\n</code></pre>\n\n<p>I cannot figure out how to count instances of <code>foo_id</code> that occur in <code>queue_contents.foo_id WHERE queue_contents.queue_id == 3</code></p>\n\n<p>It is trivial enough to get the <code>total_count</code> for each queue, but when it comes to setting up the subquery and criteria, I am stumped. I feel that the solution involves using a subquery and counting the number of <code>foo_id</code>s that occur in that subquery, but I can't get it to work. I won't include the maaaany iterations of the following query I have tried, although this will give you an idea of the track I am on:</p>\n\n<h1><code>foo_id</code>s in this query</h1>\n\n<pre><code>sq = db_session.query(Foo.id.label('foo_id')) \\\n               .join(QueueContent, QueueContent.foo_id == Foo.id) \\\n               .filter(QueueContent.queue_id == 3) \\\n               .subquery('sq')\n\nfoo_alias = aliased(Foo)\n\nq2 = db_session.query(func.count(Foo.id).label('total_in_task'),\n                      func.count(foo_alias.id).label('count_in_this_task'),\n                      Queue.id.label('queue_id'),\n                      Queue.name.label('queue_name')) \\\n             .join(foo_alias, foo_alias.id == Foo.id) \\\n             .join(QueueContent, QueueContent.foo_id == Foo.id) \\\n             .join(Queue, Queue.id == QueueContent.queue_id) \\\n             .filter(Queue.id != 3) \\\n             .group_by('queue_name', 'queue_id')\n</code></pre>\n"}, {"tags": ["python", "apache-spark", "pyspark"], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 10135807, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/761e58dad41f4c127cec690f3fec76b2?s=128&d=identicon&r=PG", "display_name": "user10135807", "link": "https://stackoverflow.com/users/10135807/user10135807"}, "is_accepted": true, "score": 5, "last_activity_date": 1532553118, "creation_date": 1532553118, "answer_id": 51527727, "question_id": 51527066, "link": "https://stackoverflow.com/questions/51527066/vectortype-for-structtype-in-pyspark-schema/51527727#51527727", "title": "VectorType for StructType in Pyspark Schema", "body": "<p>The type is <code>VectorUDT</code></p>\n\n<pre><code>from pyspark.ml.linalg import VectorUDT\n\nStructField('pcaVector', VectorUDT())\n</code></pre>\n"}], "owner": {"reputation": 16296, "user_id": 307283, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/XCWqj.jpg?s=128&g=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/307283/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1741, "favorite_count": 0, "accepted_answer_id": 51527727, "answer_count": 1, "score": 2, "last_activity_date": 1532553118, "creation_date": 1532550033, "question_id": 51527066, "link": "https://stackoverflow.com/questions/51527066/vectortype-for-structtype-in-pyspark-schema", "title": "VectorType for StructType in Pyspark Schema", "body": "<p>I'm reading a parquet file that has the following schema:</p>\n\n<pre><code>df.printSchema()\n\nroot\n |-- time: integer (nullable = true)\n |-- amountRange: integer (nullable = true)\n |-- label: integer (nullable = true)\n |-- pcaVector: vector (nullable = true)\n</code></pre>\n\n<p>Now I want to test Pyspark structured streaming and I want to use the same parquet files. The closest schema that I was able to create was using ArrayType, but it doesn't work:</p>\n\n<pre><code>schema = StructType(\n    [\n        StructField('time', IntegerType()),\n        StructField('amountRange', IntegerType()),\n        StructField('label', IntegerType()),\n        StructField('pcaVector', ArrayType(FloatType()))\n\n    ]\n)\ndf_stream = spark.readStream\\\n    .format(\"parquet\")\\\n    .schema(schema)\\\n    .load(\"/home/user/test_arch/data/fraud/\")\n\nCaused by: java.lang.ClassCastException: Expected instance of group converter but got \"org.apache.spark.sql.execution.datasources.parquet.ParquetPrimitiveConverter\"\n        at org.apache.parquet.io.api.Converter.asGroupConverter(Converter.java:37)\n        at org.apache.spark.sql.execution.datasources.parquet.ParquetRowConverter$RepeatedGroupConverter.&lt;init&gt;(ParquetRowConverter.scala:659)\n        at org.apache.spark.sql.execution.datasources.parquet.ParquetRowConverter.org$apache$spark$sql$execution$datasources$parquet$ParquetRowConverter$$newConverter(ParquetRowConverter.scala:308)\n</code></pre>\n\n<p>How can I create a schema with VectorType, that seems to exist only for Scala, for the StructType in Pyspark?</p>\n"}, {"tags": ["python", "command-line-interface", "argparse"], "comments": [{"owner": {"reputation": 419, "user_id": 4863464, "user_type": "registered", "profile_image": "https://graph.facebook.com/1794056140/picture?type=large", "display_name": "Zac Brown", "link": "https://stackoverflow.com/users/4863464/zac-brown"}, "edited": false, "score": 0, "creation_date": 1532550047, "post_id": 51527026, "comment_id": 90022663, "body": "Would be helpful to see what <code>mymethod</code> looks like"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1532550314, "post_id": 51527026, "comment_id": 90022792, "body": "Is there a reason you don&#39;t just run the module as a CLI command via the <code>subprocess</code> module? Presumably <code>main</code> returns nothing of use, so <code>subprocess.run([sys.executable, &#39;-m&#39;, &#39;somelibrary&#39;, &#39;foo&#39;, &#39;bar&#39;])</code> seems like the straightforward solution..."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1532550443, "post_id": 51527026, "comment_id": 90022847, "body": "What is the thing you&#39;re trying to call? Do you control it? Can you change it to take arguments? Are you sure there isn&#39;t some more appropriate entry point when using this code as a library?"}, {"owner": {"reputation": 25, "user_id": 8196867, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-s7kiyJ1aI4U/AAAAAAAAAAI/AAAAAAAAALI/Sa8SpDu18Uw/photo.jpg?sz=128", "display_name": "Heidi Lyons", "link": "https://stackoverflow.com/users/8196867/heidi-lyons"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1532553228, "post_id": 51527026, "comment_id": 90024101, "body": "@user2357112 I&#39;m essentially calling a method that accepts two arguments: a sqlite file, and a tsv file. It will populate the sqlite database with the contents of the tsv file. I don&#39;t control it. I don&#39;t believe I can change it either."}, {"owner": {"reputation": 25, "user_id": 8196867, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-s7kiyJ1aI4U/AAAAAAAAAAI/AAAAAAAAALI/Sa8SpDu18Uw/photo.jpg?sz=128", "display_name": "Heidi Lyons", "link": "https://stackoverflow.com/users/8196867/heidi-lyons"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1532554050, "post_id": 51527026, "comment_id": 90024424, "body": "@user2357112 Update! I talked to the owner of it, and I can change it to accept args. I&#39;m going to do that"}], "answers": [{"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1532550184, "post_id": 51527078, "comment_id": 90022730, "body": "This assumes that <code>sys.argv</code> didn&#39;t have any other arguments in it yet. Replacing the contents, rather than <code>extend</code>ing, is likely more reliable."}, {"owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1532550354, "post_id": 51527078, "comment_id": 90022805, "body": "@ShadowRanger OP is testing the code in the intepreter - I&#39;m positive it doesn&#39;t have more arguments"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1532550636, "post_id": 51527078, "comment_id": 90022930, "body": "<code>$ ipython3 --classic</code>, <code>&gt;&gt;&gt; sys.argv</code> produces <code>[&#39;&#47;path&#47;to&#47;ipython3&#39;, &#39;--classic&#39;]</code>. And even if it didn&#39;t, the interactive interpreter is often used to test something you want to use in a script later on. The new approach you edited in is just safer in the general case."}, {"owner": {"reputation": 25, "user_id": 8196867, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-s7kiyJ1aI4U/AAAAAAAAAAI/AAAAAAAAALI/Sa8SpDu18Uw/photo.jpg?sz=128", "display_name": "Heidi Lyons", "link": "https://stackoverflow.com/users/8196867/heidi-lyons"}, "edited": false, "score": 0, "creation_date": 1532550797, "post_id": 51527078, "comment_id": 90023002, "body": "Awesome, this works! When I do implement it, however, it&#39;ll be called from a celery task in django. Not sure if that&#39;ll drastically change things?"}], "tags": [], "owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "is_accepted": false, "score": 0, "last_activity_date": 1532550376, "last_edit_date": 1532550376, "creation_date": 1532550112, "answer_id": 51527078, "question_id": 51527026, "link": "https://stackoverflow.com/questions/51527026/how-to-call-python-method-that-expects-cli-arguments/51527078#51527078", "title": "How to call python method that expects CLI arguments?", "body": "<p>use <code>sys.argv</code> - it contains the arguments passed to the py script.</p>\n\n<pre><code>from somelibrary import mymethod as method\n&gt;&gt;&gt; sys.argv[1:] = ['foo', 'bar']\n&gt;&gt;&gt; method.main()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1532550426, "post_id": 51527138, "comment_id": 90022839, "body": "I&#39;d love to hear what is not helpful or wrong about my answer, to deserve a downvote. That way I can improve my answer!"}, {"owner": {"reputation": 25, "user_id": 8196867, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-s7kiyJ1aI4U/AAAAAAAAAAI/AAAAAAAAALI/Sa8SpDu18Uw/photo.jpg?sz=128", "display_name": "Heidi Lyons", "link": "https://stackoverflow.com/users/8196867/heidi-lyons"}, "edited": false, "score": 0, "creation_date": 1532554169, "post_id": 51527138, "comment_id": 90024470, "body": "Thank Martijn Pieters! I chose this one as the best answer, because I ended up getting permission to modify main in order to accept arguments."}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 2, "last_activity_date": 1532551953, "last_edit_date": 1532551953, "creation_date": 1532550394, "answer_id": 51527138, "question_id": 51527026, "link": "https://stackoverflow.com/questions/51527026/how-to-call-python-method-that-expects-cli-arguments/51527138#51527138", "title": "How to call python method that expects CLI arguments?", "body": "<p>That function is almost certainly calling the <a href=\"https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser.parse_args\" rel=\"nofollow noreferrer\"><code>Argparser.parse_args()</code></a> method with no Python arguments:</p>\n\n<pre><code>parser.parse_args()\n</code></pre>\n\n<p>This takes the arguments from the <a href=\"https://docs.python.org/3/library/sys.html#sys.argv\" rel=\"nofollow noreferrer\"><code>sys.argv</code> list</a>, taking all elements except for the first.</p>\n\n<p><code>sys.argv</code> is just a list, so you can set your own:</p>\n\n<pre><code>import sys\nfrom somelibrary import mymethod as method\n\nsys.argv[1:] = ['foo', 'bar']\nmethod()\n</code></pre>\n\n<p>Preferably, if you can alter that project or suggest changes, you should (ask to) update the <code>main()</code> function to take arguments:</p>\n\n<pre><code>def main(args=None):\n    if args is None:\n        args = sys.argv[1:]\n\n    # ...\n\n    parser.parse_args(args)\n</code></pre>\n\n<p>You may need to consider the possibility that the script is not designed to be imported into another program (it may alter global state that other parts of your program rely on, or it could end with <code>sys.exit()</code> and thus close your program unless you specifically catch the <code>SystemExit</code> exception. It may be easier to just run the script with as a child process instead, using:</p>\n\n<pre><code>import sys\nimport subprocess\n\nresult = subprocess.run([sys.executable, '/path/to/somelibrary', 'foo', 'bar'])\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8196867, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-s7kiyJ1aI4U/AAAAAAAAAAI/AAAAAAAAALI/Sa8SpDu18Uw/photo.jpg?sz=128", "display_name": "Heidi Lyons", "link": "https://stackoverflow.com/users/8196867/heidi-lyons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 51527138, "answer_count": 2, "score": 0, "last_activity_date": 1532551953, "creation_date": 1532549820, "question_id": 51527026, "link": "https://stackoverflow.com/questions/51527026/how-to-call-python-method-that-expects-cli-arguments", "title": "How to call python method that expects CLI arguments?", "body": "<p>Not really sure how else to phrase this,\nBut I am converting a bash script to python, and I am trying to call a method in a python library that typically is called via the CLI. That method uses argparse and expects 2 arguments when it's called.</p>\n\n<p>I'm not sure how to call this method and provide the two arguments when calling it from a separate python script.</p>\n\n<p>What I've tried:</p>\n\n<pre><code>&gt;&gt;  from somelibrary import mymethod as method\n&gt;&gt;  method.main('foo', 'bar')\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: main() takes 0 positional arguments \nbut 2 were given\n\n&gt;&gt;&gt; method.main()\nusage: [-h] foo bar\n: error: the following arguments are required: \nfoo, bar\n</code></pre>\n\n<p>Any help is greatly appreciated!</p>\n"}, {"tags": ["python", "pandas", "datetime", "time"], "comments": [{"owner": {"reputation": 59, "user_id": 7607396, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e694ba2cb88e87d08c73ad0f5d3ff38?s=128&d=identicon&r=PG&f=1", "display_name": "MaximeMusterFrau", "link": "https://stackoverflow.com/users/7607396/maximemusterfrau"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1532550140, "post_id": 51527011, "comment_id": 90022709, "body": "sorry, it was a typo. yes!"}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1532550308, "post_id": 51527011, "comment_id": 90022787, "body": "I get <code>Timedelta(&#39;99 days 10:13:00&#39;)</code>? Can you check <code>dt1</code> and <code>dt0</code> just before that calculation to ensure you haven&#39;t overwritten them?"}, {"owner": {"reputation": 59, "user_id": 7607396, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e694ba2cb88e87d08c73ad0f5d3ff38?s=128&d=identicon&r=PG&f=1", "display_name": "MaximeMusterFrau", "link": "https://stackoverflow.com/users/7607396/maximemusterfrau"}, "edited": false, "score": 0, "creation_date": 1532550355, "post_id": 51527011, "comment_id": 90022807, "body": "I am sure about dt1 and dt0 though :/"}, {"owner": {"reputation": 59, "user_id": 7607396, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e694ba2cb88e87d08c73ad0f5d3ff38?s=128&d=identicon&r=PG&f=1", "display_name": "MaximeMusterFrau", "link": "https://stackoverflow.com/users/7607396/maximemusterfrau"}, "edited": false, "score": 0, "creation_date": 1532550452, "post_id": 51527011, "comment_id": 90022852, "body": "I get dt2 = NaT"}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1532550529, "post_id": 51527011, "comment_id": 90022888, "body": "Can you try explicitly recasting <code>dt1</code> and <code>dt0</code> as <code>np.timedelta64()</code> before summing? Those numpy objects should be able to be added...if you get an error with <code>dt2 = np.timedelta64(dt0) + np.timedelta64(dt1)</code> then you should try updating numpy."}, {"owner": {"reputation": 59, "user_id": 7607396, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e694ba2cb88e87d08c73ad0f5d3ff38?s=128&d=identicon&r=PG&f=1", "display_name": "MaximeMusterFrau", "link": "https://stackoverflow.com/users/7607396/maximemusterfrau"}, "edited": false, "score": 0, "creation_date": 1532550644, "post_id": 51527011, "comment_id": 90022933, "body": "When I try it I get this error: ValueError: Could not convert object to NumPy timedelta"}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1532552162, "post_id": 51527011, "comment_id": 90023626, "body": "well what is the output of <code>print(dt1, type(dt1), dt0, type(dt0))</code> on the line exactly before the addition?"}, {"owner": {"reputation": 59, "user_id": 7607396, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e694ba2cb88e87d08c73ad0f5d3ff38?s=128&d=identicon&r=PG&f=1", "display_name": "MaximeMusterFrau", "link": "https://stackoverflow.com/users/7607396/maximemusterfrau"}, "edited": false, "score": 0, "creation_date": 1532552258, "post_id": 51527011, "comment_id": 90023659, "body": "both are dtype: timedelta64[ns]"}], "answers": [{"tags": [], "owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "is_accepted": true, "score": 2, "last_activity_date": 1532554505, "last_edit_date": 1532554505, "creation_date": 1532553694, "answer_id": 51527835, "question_id": 51527011, "link": "https://stackoverflow.com/questions/51527011/how-to-sum-dtype-timedelta64ns-in-pandas-python/51527835#51527835", "title": "How to sum dtype: timedelta64[ns] in pandas/Python?", "body": "<p>See, this is why I explicitly wanted you to print the types. <code>dt1</code> and <code>dt0</code> are NOT <code>&lt;class 'pandas._libs.tslibs.timedeltas.Timedelta'&gt;</code>, they are <code>pandas.Series</code>.</p>\n\n<p>When you add two <code>Series</code> it aligns based on index. Since <code>dt1</code> and <code>dt2</code> do not share the same index, it fills the missing values with a null-value (<code>NaT</code> in this case) and then performs the addition. By default it does not ignore null values when performing the addition, so what you are seeing is <code>x + NaT = NaT</code> which is how the math works.</p>\n\n<h3>Sample Data</h3>\n\n<pre><code>import pandas as pd\n\na = pd.Series(pd.Timedelta(1,'d'), index=[21005])\n#21005   1 days\n#dtype: timedelta64[ns]\n\nb = pd.Series(pd.Timedelta(2,'d'), index=[16992])\n#16992   2 days\n#dtype: timedelta64[ns]\n</code></pre>\n\n<h3>Code</h3>\n\n<p>Addition will align on indices. They share no indices so you get <code>NaT</code>.</p>\n\n<pre><code>a+b\n#16992   NaT\n#21005   NaT\n#dtype: timedelta64[ns]\n</code></pre>\n\n<p>What you really want to do is add the values, regardless of index:</p>\n\n<pre><code>a.values+b.values\n#array([259200000000000], dtype='timedelta64[ns]')\n</code></pre>\n\n<p>But really you should change your code so that <code>dt0</code> and <code>dt1</code> are just the values if you actually have no need for the <code>pd.Series</code>.</p>\n"}], "owner": {"reputation": 59, "user_id": 7607396, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e694ba2cb88e87d08c73ad0f5d3ff38?s=128&d=identicon&r=PG&f=1", "display_name": "MaximeMusterFrau", "link": "https://stackoverflow.com/users/7607396/maximemusterfrau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 617, "favorite_count": 1, "accepted_answer_id": 51527835, "answer_count": 1, "score": 2, "last_activity_date": 1532554505, "creation_date": 1532549753, "last_edit_date": 1532552692, "question_id": 51527011, "link": "https://stackoverflow.com/questions/51527011/how-to-sum-dtype-timedelta64ns-in-pandas-python", "title": "How to sum dtype: timedelta64[ns] in pandas/Python?", "body": "<p>I am using pands in python to deal with times. \nI would like to sum up the time elapsed between a couple of dates, which are:</p>\n\n<pre><code>0   2012-03-06 14:22:00\n0   2012-06-02 11:29:00\n\n\n1   2012-04-16 20:51:00\n1   2012-04-28 09:57:00\n</code></pre>\n\n<p>To do this, I calculate the time elapsed between the first 2 dates indexed with 0 like this :</p>\n\n<pre><code>dt0 = df.end[0] - df.start[0]  \nout: 87 days 21:07:00\ndtype: timedelta64[ns]\n</code></pre>\n\n<p>and the same between the next 2 dates like: </p>\n\n<pre><code>dt1 = df.end[1] - df.start[1]  \nout: 11 days 13:06:00\ndtype: timedelta64[ns]\n</code></pre>\n\n<p>Which works fine, but when I sum the two times : </p>\n\n<pre><code>dt2 = dt1 + dt0 \n</code></pre>\n\n<p>I get dt2 = NaT instead of the sum of 87 days 21:07:00 + 11 days 13:06:00. Can anyone help? </p>\n\n<p>Below is a screenshot of another example of the same problem: adding up a and b, two dtype: timedelta64[ns] does not work, why?</p>\n\n<p><a href=\"https://i.stack.imgur.com/22Wf3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/22Wf3.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 3290, "user_id": 4400065, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kbo7S.gif?s=128&g=1", "display_name": "Siegmeyer", "link": "https://stackoverflow.com/users/4400065/siegmeyer"}, "is_accepted": false, "score": 1, "last_activity_date": 1532550478, "creation_date": 1532550478, "answer_id": 51527159, "question_id": 51527010, "link": "https://stackoverflow.com/questions/51527010/python-object-to-call-another-file-function/51527159#51527159", "title": "Python object to call another file function", "body": "<p>Ok, let's use a simple example analogous to your situation. We have two files:</p>\n\n<h3>foo.py</h3>\n\n<pre><code>from bar import bar\n\n\nclass Foo:\n    def foo():\n        bar()\n</code></pre>\n\n<h3>bar.py</h3>\n\n<pre><code>from foo import Foo\n\n\ndef bar():\n    print('bar')\n\n\nfoo = Foo()\n</code></pre>\n\n<p>Indeed, when we run <code>python foo.py</code> we get <code>ImportError: cannot import name 'bar'</code>.\nThis is caused by circular dependency (for more info on importing go <a href=\"http://effbot.org/zone/import-confusion.htm\" rel=\"nofollow noreferrer\">here</a>). One very simple way to avoid it is to\nmove <code>from foo import Foo</code> to the bottom of the file:</p>\n\n<h3>bar.py 2</h3>\n\n<pre><code>def bar():\n    print('bar')\n\n\nfrom foo import Foo\nfoo = Foo()\n</code></pre>\n\n<p>Now it should work.</p>\n"}], "owner": {"reputation": 9, "user_id": 2718351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/635fd5dc02b688bc7e8da21c49ee004d?s=128&d=identicon&r=PG&f=1", "display_name": "user2718351", "link": "https://stackoverflow.com/users/2718351/user2718351"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1532550478, "creation_date": 1532549748, "question_id": 51527010, "link": "https://stackoverflow.com/questions/51527010/python-object-to-call-another-file-function", "title": "Python object to call another file function", "body": "<p>Here is a simplified code of my problem. I have a class in file 'class1.py' and eventHandler gets called sometimes by another function in that class.</p>\n\n<pre><code>class FOO:\n    def eventHandler(self, message):\n        processMessage(message)\n</code></pre>\n\n<p>And I want the class to call function processMessage that is in file 'main.py'.</p>\n\n<pre><code>from class1 import FOO\n\ndef processMessage(message):\n    processMore(message)\n\ndef processMore(message):\n    print(message)\n\nmyClass = FOO()\n</code></pre>\n\n<p>How can this be done? Do I have to pass the processMessage to the object and can then it call another function that is not passed?</p>\n"}, {"tags": ["python", "pandas", "file", "tkinter"], "comments": [{"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 1, "creation_date": 1532549926, "post_id": 51526992, "comment_id": 90022606, "body": "You need to move the pandas code into the retrive_input function, so it gets run when button is clicked. That function also needs whatever you want to do with the data, I assume print it or add it to a widget for display."}, {"owner": {"reputation": 379, "user_id": 9969049, "user_type": "registered", "profile_image": "https://graph.facebook.com/1896598870391245/picture?type=large", "display_name": "Haris Khaliq", "link": "https://stackoverflow.com/users/9969049/haris-khaliq"}, "reply_to_user": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1532550832, "post_id": 51526992, "comment_id": 90023018, "body": "@Novel Okay, thank you, however I did try that before and got the error that is posted now in my edited question so I though that was the wrong way to do it. Any idea why I am getting this error?"}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1532551131, "post_id": 51526992, "comment_id": 90023166, "body": "You want to load the name that you saved to the variable &quot;file&quot;. So <code>basefileread = pd.read_csv(file+&#39;.csv&#39;, encoding=&#39;latin-1&#39;)</code>. Also remember to add a print or something so you see the result."}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1532551229, "post_id": 51526992, "comment_id": 90023207, "body": "Unrelated, but that lambda function is useless. Just pass the function to be executed directly. <code>button1 = Button(master,text=&quot;Get Value&quot;, command=retrieve_input)</code>"}, {"owner": {"reputation": 379, "user_id": 9969049, "user_type": "registered", "profile_image": "https://graph.facebook.com/1896598870391245/picture?type=large", "display_name": "Haris Khaliq", "link": "https://stackoverflow.com/users/9969049/haris-khaliq"}, "reply_to_user": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1532551248, "post_id": 51526992, "comment_id": 90023218, "body": "@Novel It worked perfectly! Thank you for your help, means alot."}, {"owner": {"reputation": 379, "user_id": 9969049, "user_type": "registered", "profile_image": "https://graph.facebook.com/1896598870391245/picture?type=large", "display_name": "Haris Khaliq", "link": "https://stackoverflow.com/users/9969049/haris-khaliq"}, "reply_to_user": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1532551285, "post_id": 51526992, "comment_id": 90023235, "body": "@Novel okay I will edit my code accordingly, thanks again!"}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1532551733, "post_id": 51526992, "comment_id": 90023434, "body": "I recommend you delete this post since it&#39;s a syntactic error on your part. Also, you may be better off in the future with a more beginner oriented forum such as learnpython.reddit.com."}, {"owner": {"reputation": 379, "user_id": 9969049, "user_type": "registered", "profile_image": "https://graph.facebook.com/1896598870391245/picture?type=large", "display_name": "Haris Khaliq", "link": "https://stackoverflow.com/users/9969049/haris-khaliq"}, "reply_to_user": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1532551836, "post_id": 51526992, "comment_id": 90023480, "body": "@Novel Okay I will do so, the original question was not synthatic however. Also this is a test code for my actual program which has almost 1000 lines of &quot;pandas code&quot; would I have to put all of that code within this function then?"}, {"owner": {"reputation": 379, "user_id": 9969049, "user_type": "registered", "profile_image": "https://graph.facebook.com/1896598870391245/picture?type=large", "display_name": "Haris Khaliq", "link": "https://stackoverflow.com/users/9969049/haris-khaliq"}, "reply_to_user": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1532551927, "post_id": 51526992, "comment_id": 90023527, "body": "@Novel Also do you think its fine to leave this question because it might provide sudo code and a base to look at for people who are attempting to run the same type of program but run into small syntactic errors which prevents them for running this code."}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1532551967, "post_id": 51526992, "comment_id": 90023549, "body": "Yes. Hopefully your 1000 lines is not all at root level. If it is start learning about separating logical blocks of code into functions, classes and modules. Good code has no code at root level."}, {"owner": {"reputation": 379, "user_id": 9969049, "user_type": "registered", "profile_image": "https://graph.facebook.com/1896598870391245/picture?type=large", "display_name": "Haris Khaliq", "link": "https://stackoverflow.com/users/9969049/haris-khaliq"}, "reply_to_user": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1532552133, "post_id": 51526992, "comment_id": 90023613, "body": "@Novel lol I don&#39;t even know what root level means, but that advice is good! Thank you, and yes I am a begginer so perhaps that reddit forum would be a better use of peoples times. Thank you!"}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1532552136, "post_id": 51526992, "comment_id": 90023614, "body": "This site is more for high level programming questions, not for fixing beginner level syntactic mistakes."}], "answers": [{"comments": [{"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 1, "creation_date": 1532551810, "post_id": 51527404, "comment_id": 90023464, "body": "Lol, karma thief."}, {"owner": {"reputation": 219, "user_id": 8226011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92c60b7109d87df8fba3ba1503a758cc?s=128&d=identicon&r=PG&f=1", "display_name": "Johny Vaknin", "link": "https://stackoverflow.com/users/8226011/johny-vaknin"}, "reply_to_user": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1532622567, "post_id": 51527404, "comment_id": 90054914, "body": "Answerong simultaneosly is  the stuff, sry &#176;_&#176;^"}], "tags": [], "owner": {"reputation": 219, "user_id": 8226011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92c60b7109d87df8fba3ba1503a758cc?s=128&d=identicon&r=PG&f=1", "display_name": "Johny Vaknin", "link": "https://stackoverflow.com/users/8226011/johny-vaknin"}, "is_accepted": true, "score": 1, "last_activity_date": 1532551608, "creation_date": 1532551608, "answer_id": 51527404, "question_id": 51526992, "link": "https://stackoverflow.com/questions/51526992/python-tkinter-using-variables-and-user-input-from-gui-to-run-code/51527404#51527404", "title": "Python tkinter using variables and user input from GUI to run code", "body": "<p>the problem lies within the <code>retriece input()</code> function<br/>\nyou retrieve the text into the variable <code>file</code>, yet use <code>str(textBox)</code> to read the file</p>\n\n<p>solution should work like this</p>\n\n<pre><code>def retrieve_input():\n    file = textBox.get(\"1.0\",\"end-1c\")\n    basefileread = pd.read_csv(file +'.csv', encoding='latin-1')\n    basefilevalue = basefileread.loc[basefileread['Customer'].str.contains('Lam DepT', na=False),'Jun-18\\nQty'\n</code></pre>\n"}], "owner": {"reputation": 379, "user_id": 9969049, "user_type": "registered", "profile_image": "https://graph.facebook.com/1896598870391245/picture?type=large", "display_name": "Haris Khaliq", "link": "https://stackoverflow.com/users/9969049/haris-khaliq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 639, "favorite_count": 0, "accepted_answer_id": 51527404, "answer_count": 1, "score": 0, "last_activity_date": 1532572403, "creation_date": 1532549663, "last_edit_date": 1532572403, "question_id": 51526992, "link": "https://stackoverflow.com/questions/51526992/python-tkinter-using-variables-and-user-input-from-gui-to-run-code", "title": "Python tkinter using variables and user input from GUI to run code", "body": "<pre><code>from tkinter import *\nimport pandas as pd\n\ndef retrieve_input():\n    file = textBox.get(\"1.0\",\"end-1c\")\n    basefileread = pd.read_csv(str(textBox) + '.csv', encoding='latin-1')\n    basefilevalue = basefileread.loc[basefileread['Customer'].str.contains('Lam DepT', na=False),'Jun-18\\nQty']\n\n\nmaster = Tk()\nmaster.geometry('200x100')\n\ntextBox = Text(master, height=2, width=10)\ntextBox.pack()\n\nbutton1 = Button(master,text=\"Get Value\", command=lambda: retrieve_input())\nbutton1.pack()\n\nmaster.mainloop()\n\nprint(int(textBox)+10)\n</code></pre>\n\n<p>I am trying to extract the information that I place into a textbox and run the following code, I want to specify which csv file I want the program to read, and find the value I specified from that file. I tried to hard code in textbox in my pandas reader and am just having trouble extraxting the string information that I type in the GUI and have that string appear so it can run my code. I am unsure if I am articulating my question correctly. And when I run this I get the error:</p>\n\n<pre><code> FileNotFoundError: File b'.!text.csv' does not exist\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "keras", "deep-learning"], "answers": [{"comments": [{"owner": {"reputation": 144, "user_id": 2720125, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100003180639030/picture?type=large", "display_name": "C M Khaled Saifullah", "link": "https://stackoverflow.com/users/2720125/c-m-khaled-saifullah"}, "edited": false, "score": 0, "creation_date": 1532551415, "post_id": 51527182, "comment_id": 90023302, "body": "Thank you very much for the solution. It worked perfectly.  But i have a query. I was supposed to get the output in the shape of (?,max_len,vocab_size) right? but i am getting in the shape of (?,max_len,max_len). Where did i made mistake?"}, {"owner": {"reputation": 144, "user_id": 2720125, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100003180639030/picture?type=large", "display_name": "C M Khaled Saifullah", "link": "https://stackoverflow.com/users/2720125/c-m-khaled-saifullah"}, "edited": false, "score": 1, "creation_date": 1532552644, "post_id": 51527182, "comment_id": 90023838, "body": "I got it. I made a mistake while building time distributed dense layer. it will be:      output = TimeDistributed(Dense(vocab_size_output, activation=&quot;softmax&quot;))(decoder)"}, {"owner": {"reputation": 478, "user_id": 6693221, "user_type": "registered", "profile_image": "https://graph.facebook.com/843729522394966/picture?type=large", "display_name": "James Chang", "link": "https://stackoverflow.com/users/6693221/james-chang"}, "edited": false, "score": 0, "creation_date": 1532967108, "post_id": 51527182, "comment_id": 90162243, "body": "Where did you get &quot;Attention&quot;?"}, {"owner": {"reputation": 478, "user_id": 6693221, "user_type": "registered", "profile_image": "https://graph.facebook.com/843729522394966/picture?type=large", "display_name": "James Chang", "link": "https://stackoverflow.com/users/6693221/james-chang"}, "edited": false, "score": 0, "creation_date": 1532969659, "post_id": 51527182, "comment_id": 90163587, "body": "I tried Raffel et al. [<a href=\"https://arxiv.org/abs/1512.08756]&#39;s\" rel=\"nofollow noreferrer\">arxiv.org/abs/1512.08756]&#39;s</a> attention.py, but I got a value error: ValueError: (&#39;Could not interpret regularizer identifier:&#39;, 15). Did you use the same attention.py and have you had the same error?"}, {"owner": {"reputation": 144, "user_id": 2720125, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100003180639030/picture?type=large", "display_name": "C M Khaled Saifullah", "link": "https://stackoverflow.com/users/2720125/c-m-khaled-saifullah"}, "reply_to_user": {"reputation": 478, "user_id": 6693221, "user_type": "registered", "profile_image": "https://graph.facebook.com/843729522394966/picture?type=large", "display_name": "James Chang", "link": "https://stackoverflow.com/users/6693221/james-chang"}, "edited": false, "score": 0, "creation_date": 1533939094, "post_id": 51527182, "comment_id": 90546796, "body": "@JamesChang Here is the link of the code that worked for me: [link] <a href=\"https://drive.google.com/open?id=1Ou_IaaGzoHZENhFfZZNhKvgy0Vym7JS7\" rel=\"nofollow noreferrer\">drive.google.com/open?id=1Ou_IaaGzoHZENhFfZZNhKvgy0Vym7JS7</a>"}, {"owner": {"reputation": 478, "user_id": 6693221, "user_type": "registered", "profile_image": "https://graph.facebook.com/843729522394966/picture?type=large", "display_name": "James Chang", "link": "https://stackoverflow.com/users/6693221/james-chang"}, "reply_to_user": {"reputation": 144, "user_id": 2720125, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100003180639030/picture?type=large", "display_name": "C M Khaled Saifullah", "link": "https://stackoverflow.com/users/2720125/c-m-khaled-saifullah"}, "edited": false, "score": 0, "creation_date": 1534002108, "post_id": 51527182, "comment_id": 90558882, "body": "@CMKhaledSaifullah Thanks, I&#39;ll give it a try!"}], "tags": [], "owner": {"reputation": 9526, "user_id": 9758922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ryhQ0.png?s=128&g=1", "display_name": "nuric", "link": "https://stackoverflow.com/users/9758922/nuric"}, "is_accepted": true, "score": 5, "last_activity_date": 1532550596, "creation_date": 1532550596, "answer_id": 51527182, "question_id": 51526952, "link": "https://stackoverflow.com/questions/51526952/concatening-an-attention-layer-with-decoder-input-seq2seq-model-on-keras/51527182#51527182", "title": "Concatening an attention layer with decoder input seq2seq model on Keras", "body": "<p>Based on your block diagram it looks like you pass the same attention vector at every timestep to the decoder. In that case you need to <code>RepeatVector</code> to copy the same attention vector at every timestep to convert a 2D attention tensor into a 3D tensor:</p>\n\n<pre><code># ...\nattention = Attention(MAX_LENGTH_Input)(encoder)\nattention = RepeatVector(MAX_LENGTH_Output)(attention) # (?, 10, 1024)\ndecoder_input = Input(shape=(MAX_LENGTH_Output,vocab_size_output))\nmerge = concatenate([attention, decoder_input]) # (?, 10, 1024+8281)\n# ...\n</code></pre>\n\n<p>Take note that this will repeat the same attention vector for every timestep.</p>\n"}], "owner": {"reputation": 144, "user_id": 2720125, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100003180639030/picture?type=large", "display_name": "C M Khaled Saifullah", "link": "https://stackoverflow.com/users/2720125/c-m-khaled-saifullah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3223, "favorite_count": 6, "accepted_answer_id": 51527182, "answer_count": 1, "score": 5, "last_activity_date": 1604581080, "creation_date": 1532549512, "last_edit_date": 1604581080, "question_id": 51526952, "link": "https://stackoverflow.com/questions/51526952/concatening-an-attention-layer-with-decoder-input-seq2seq-model-on-keras", "title": "Concatening an attention layer with decoder input seq2seq model on Keras", "body": "<p>I am trying to implement a sequence 2 sequence model with attention using the Keras library. The block diagram of the model is as follows</p>\n<p><img src=\"https://i.stack.imgur.com/evsq6.png\" alt=\"Enter image description here\" /></p>\n<p>The model embeds the input sequence into 3D tensors. Then a bidirectional lstm creates the encoding layer. Next the encoded sequences are sent to a custom attention layer that returns a 2D tensor having attention weights for each hidden node.</p>\n<p>The decoder input is injected in the model as one hot vector. Now in the decoder (another bi-lstm) both decoder input and the attention weight are passed as input. The output of the decoder is sent to time distributed dense layer with the softmax activation function to get the output for every time step in the means of probability. The code of the model is as follows:</p>\n<pre><code>encoder_input = Input(shape=(MAX_LENGTH_Input, ))\n\nembedded = Embedding(input_dim=vocab_size_input, output_dim= embedding_width, trainable=False)(encoder_input)\n\nencoder = Bidirectional(LSTM(units= hidden_size, input_shape=(MAX_LENGTH_Input,embedding_width), return_sequences=True, dropout=0.25, recurrent_dropout=0.25))(embedded)\n\nattention = Attention(MAX_LENGTH_Input)(encoder)\n\ndecoder_input = Input(shape=(MAX_LENGTH_Output,vocab_size_output))\n\nmerge = concatenate([attention, decoder_input])\n\ndecoder = Bidirectional(LSTM(units=hidden_size, input_shape=(MAX_LENGTH_Output,vocab_size_output))(merge))\n\noutput = TimeDistributed(Dense(MAX_LENGTH_Output, activation=&quot;softmax&quot;))(decoder)\n</code></pre>\n<p>The problem is when I am concatenating the attention layer and decoder input. Since the decoder input is a 3D tensor whereas attention is a 2D tensor, it's showing the following error:</p>\n<blockquote>\n<p>ValueError: A <code>Concatenate</code> layer requires inputs with matching shapes except for the concat axis. Got inputs shapes: [(None, 1024), (None, 10, 8281)]</p>\n</blockquote>\n<p>How can I convert a 2D Attention tensor into a 3D tensor?</p>\n"}, {"tags": ["python", "setup.py", "twine"], "answers": [{"tags": [], "owner": {"reputation": 15554, "user_id": 328036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db101b3a812b0464c53e5409c12ea94?s=128&d=identicon&r=PG", "display_name": "Dustin Ingram", "link": "https://stackoverflow.com/users/328036/dustin-ingram"}, "is_accepted": false, "score": 2, "last_activity_date": 1536517931, "creation_date": 1536517931, "answer_id": 52247490, "question_id": 51526915, "link": "https://stackoverflow.com/questions/51526915/pip-no-matching-distribution-found-my-library/52247490#52247490", "title": "Pip no matching distribution found (my library)", "body": "<p>This happens when none of the built distributions (bdists) are compatible with the platform or architecture you're trying to install the package in. Is it possible you're installing the package in a non-windows environment?</p>\n\n<p>Unless your project depends on C extensions or other platform-specific code, the easiest solution would be to publish a source distribution as well:</p>\n\n<pre><code>$ python setup.py sdist\n$ twine upload dist/Pillow3f-1.0.tar.gz\n</code></pre>\n\n<p>A source distribution will be usable by any platform, and provides a fallback in the event that no built distributions are available.</p>\n"}, {"tags": [], "owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "is_accepted": false, "score": 0, "last_activity_date": 1536518442, "creation_date": 1536518442, "answer_id": 52247556, "question_id": 51526915, "link": "https://stackoverflow.com/questions/51526915/pip-no-matching-distribution-found-my-library/52247556#52247556", "title": "Pip no matching distribution found (my library)", "body": "<p><code>python setup.py bdist</code> creates a \"dumb\" installer package, which is an obsolete format that pip does not support.  The correct, supported package formats to build &amp; upload are sdist (<code>python setup.py sdist</code>) and wheel (<code>python setup.py bdist_wheel</code>).</p>\n"}], "owner": {"reputation": 53, "user_id": 10130274, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-koUEEPSlcns/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ptmmqk8i9lQfCQ6qBSMvnk2vUruw/mo/photo.jpg?sz=128", "display_name": "stack user", "link": "https://stackoverflow.com/users/10130274/stack-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6100, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1536518442, "creation_date": 1532549373, "question_id": 51526915, "link": "https://stackoverflow.com/questions/51526915/pip-no-matching-distribution-found-my-library", "title": "Pip no matching distribution found (my library)", "body": "<p>I made a library called Pillow3f. I tried to upload it to Pypi. Here are the step I took to do so and the error I received when trying to install it. I am using Python3.6, and I already checked the latest dist folder to make sure it said python36.</p>\n\n<p>I started with this:</p>\n\n<p><code>python setup.py bdist</code></p>\n\n<p>then, it gave me Pillow3f.egg-info, dist, and build.\nI then ran this command</p>\n\n<p><code>twine upload dist/*</code></p>\n\n<p>I did not receive an error during those 2 processes. Next, I went on to try and download it. </p>\n\n<p><code>pip install Pillow3f</code> </p>\n\n<p>And received this error:</p>\n\n<p><code>Could not find a version that satisfies the requirement pillow3f (from versions: 0.0.1.win-amd64, 0.1.0.win-amd64, 0.1.1.win-amd64, 1.0.win-amd64)\nNo matching distribution found for pillow3f</code></p>\n\n<p>It checks out, I did upload many files with those different versions each tying to troubleshoot what was happening. I went to the PyPi help page to no avail. Does anyone know what's wrong? I am using windows and don't mind providing extra information in the comments.</p>\n\n<p>It also may be worth mentioning that when I tried this: </p>\n\n<pre class=\"lang-python prettyprint-override\"><code>pip install https://files.pythonhosted.org/packages/74/cb/100cdf7d1cc4a599be6d2bbe3aebec348e2\n8b7d307d2bf50c08149cea86d/Pillow3f-1.0.win-amd64.zip\n</code></pre>\n\n<p>I got this error</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>C:\\Users\\*********&gt;pip install https://files.pythonhosted.org/packages/74/cb/100cdf7d1cc4a599be6d2bbe3aebec348e28b7d307d2bf50c08149cea86d/Pillow3f-1.0.win-amd64.zip\nCollecting https://files.pythonhosted.org/packages/74/cb/100cdf7d1cc4a599be6d2bbe3aebec348e28b7d307d2bf50c08149cea86d/Pillow3f-1.0.win-amd64.zip\n  Using cached https://files.pythonhosted.org/packages/74/cb/100cdf7d1cc4a599be6d2bbe3aebec348e28b7d307d2bf50c08149cea86d/Pillow3f-1.0.win-amd64.zip\n    Complete output from command python setup.py egg_info:\n    Traceback (most recent call last):\n      File \"&lt;string&gt;\", line 1, in &lt;module&gt;\n      File \"c:\\users\\**********\\appdata\\local\\programs\\python\\python36\\lib\\tokenize.py\", line 452, in open\n        buffer = _builtin_open(filename, 'rb')\n    FileNotFoundError: [Errno 2] No such file or directory: 'C:\\\\Users\\\\**********\\\\AppData\\\\Local\\\\Temp\\\\pip-req-build-rwbj64rl\\\\setup.py'\n\n    ----------------------------------------\nCommand \"python setup.py egg_info\" failed with error code 1 in C:\\Users\\**********\\AppData\\Local\\Temp\\pip-req-build-rwbj64rl\\\n</code></pre>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1532549533, "post_id": 51526896, "comment_id": 90022438, "body": "Are you asking why  <code>0000</code> is matched? Your <code>\\s?</code> matches 1 or 0 whitespaces."}, {"owner": {"reputation": 143, "user_id": 9184988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/maLPY.jpg?s=128&g=1", "display_name": "BorkoP", "link": "https://stackoverflow.com/users/9184988/borkop"}, "reply_to_user": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1532549854, "post_id": 51526896, "comment_id": 90022570, "body": "@WiktorStribi\u017cew im confused as to why &#39;2300 20 40\\n0000\\n\\n&#39; is the last element in the list, and not just &#39;0000\\n&#39;, not sure what I&#39;m doing wrong because this doesnt happen anywhere else in the list"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1532551037, "post_id": 51526896, "comment_id": 90023113, "body": "Do you have literal <code>\\n</code> in the file? I&#39;m trying to understand why you show <code>\\n</code> before the line breaks."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1532551198, "post_id": 51526896, "comment_id": 90023193, "body": "Have you tried putting it into regex101.com? It shows how all the capture groups are matching with color codes."}, {"owner": {"reputation": 528, "user_id": 2765164, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a550866d8240a538efa628221909ea0b?s=128&d=identicon&r=PG&f=1", "display_name": "David Nemeskey", "link": "https://stackoverflow.com/users/2765164/david-nemeskey"}, "edited": false, "score": 0, "creation_date": 1532551428, "post_id": 51526896, "comment_id": 90023309, "body": "Why do you use <code>re.DOTALL</code>? Aren&#39;t you parsing the file line-by-line?"}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 9184988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/maLPY.jpg?s=128&g=1", "display_name": "BorkoP", "link": "https://stackoverflow.com/users/9184988/borkop"}, "edited": false, "score": 0, "creation_date": 1532565951, "post_id": 51527418, "comment_id": 90027209, "body": "Thanks bud, this worked, I didn&#39;t know about all of that"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 0, "last_activity_date": 1532551697, "creation_date": 1532551697, "answer_id": 51527418, "question_id": 51526896, "link": "https://stackoverflow.com/questions/51526896/regex-wont-separate-last-string/51527418#51527418", "title": "regex wont separate last string", "body": "<p>When it gets to this part of the input:</p>\n\n<pre><code>2300 20 40\\n\n0000\\n\n</code></pre>\n\n<p>It matches as follows:</p>\n\n<ul>\n<li><code>(\\d\\d)(\\d\\d)</code> matches <code>2300</code></li>\n<li><code>\\s</code> matches the space</li>\n<li><code>(\\d\\d)</code> matches <code>20</code></li>\n<li><code>\\s?</code> matches the space</li>\n<li><code>(\\d\\d)?</code> matches <code>40</code></li>\n<li><code>\\s?</code> matches the newline</li>\n<li><code>(\\d\\d)?</code> matches <code>00</code></li>\n<li><code>\\s?</code> matches nothing, since it's optional</li>\n<li><code>(\\d\\d)?</code> matches <code>00</code></li>\n<li><code>\\s? (\\d\\d)?</code> matches nothing, since they're both optional</li>\n<li><code>\\n</code> matches the newline</li>\n</ul>\n\n<p>I suspect you didn't realize that <code>\\s</code> matches any kind of whitespace, including newlines. If you want to match a space literally in a verbose regexp, write a space preceded by backslash. So most of those <code>\\s?</code> should be <code>\\ ?</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 528, "user_id": 2765164, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a550866d8240a538efa628221909ea0b?s=128&d=identicon&r=PG&f=1", "display_name": "David Nemeskey", "link": "https://stackoverflow.com/users/2765164/david-nemeskey"}, "is_accepted": false, "score": 0, "last_activity_date": 1532552505, "creation_date": 1532552505, "answer_id": 51527588, "question_id": 51526896, "link": "https://stackoverflow.com/questions/51526896/regex-wont-separate-last-string/51527588#51527588", "title": "regex wont separate last string", "body": "<p>The reason is twofold:</p>\n\n<ol>\n<li><code>\\s</code> matches all whitespaces, newlines as well as spaces;</li>\n<li>as @WiktorStribi\u017cew has already said, <code>\\s?</code> matches zero whitespaces, too.</li>\n</ol>\n\n<p>So what happens is one of your <code>\\s?</code>s eats the newline after the line <code>2300 20 40</code>, and the next <code>\\s?</code> matches the missing whitespace in the middle of <code>0000</code>. You don't see the problem happening in other places because you have one less <code>\\s?(\\d\\d)?</code> to cover two full lines; add one more to the regex and you will see the lines</p>\n\n<pre><code>2000 20 40\\n\n2100 20 40\\n\n</code></pre>\n\n<p>imploded too.</p>\n\n<p>I am not sure how you would like to parse this file, but judging from your code line-by-line. If so, \"<a href=\"https://www.python.org/dev/peps/pep-0020/#id3\" rel=\"nofollow noreferrer\">explicit is better than implicit</a>\":</p>\n\n<pre><code>time_regex = re.compile(r'^(\\d{4})(\\s\\d{2})*$')\nwith open(...) as inf:\n    for line in inf:\n        m = time_regex.match(line)\n        # Use m.group(1) and m.group(2).split()\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 9184988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/maLPY.jpg?s=128&g=1", "display_name": "BorkoP", "link": "https://stackoverflow.com/users/9184988/borkop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 51527418, "answer_count": 2, "score": 0, "last_activity_date": 1532552505, "creation_date": 1532549302, "last_edit_date": 1532549438, "question_id": 51526896, "link": "https://stackoverflow.com/questions/51526896/regex-wont-separate-last-string", "title": "regex wont separate last string", "body": "<p>I made a regex that should be able to separate specific order of numbers from a html file, but it just doesnt work in the last part. So this is how the html file prints out:</p>\n\n<pre><code>0430\\n\n0500 20 40 53\\n\n0606 19 32 45 58\\n\n0711 22 33 44 55 \\n\n...\n2000 20 40\\n\n2100 20 40\\n\n2200 20 40\\n\n2300 20 40\\n\n0000\\n\n\\n\n</code></pre>\n\n<p>and this is my regex: </p>\n\n<pre><code>timeRegex = re.compile(r'''((\\d\\d)(\\d\\d)\n(\\n|(\\s\n(\\d\\d)\n\\s?\n(\\d\\d)?\n\\s?\n(\\d\\d)?\n\\s?\n(\\d\\d)?\n\\s?\n(\\d\\d)?\n)\\n)?\n)''',re.VERBOSE|re.DOTALL)\n</code></pre>\n\n<p>when looking at the list it works fine for the most part, until the last element in the list where it picks up the 0000 so it looks like this '2300 20 40\\n0000\\n\\n'\nPlease help out.</p>\n"}, {"tags": ["python", "django", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "edited": false, "score": 0, "creation_date": 1532549614, "post_id": 51526954, "comment_id": 90022472, "body": "That explains it; I figured it was something like that. But why does the presence of a line continuation character impact whether that&#39;s outputted or not?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "edited": false, "score": 0, "creation_date": 1532549925, "post_id": 51526954, "comment_id": 90022605, "body": "@Ares I don&#39;t think it does. I can&#39;t reproduce that behavior; any situation where I get a warning for the second one, I get a warning if I change it to the first one. Can you provide a reproducible test case that shows a difference? If so, it&#39;s probably a bug that should be reported."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "edited": false, "score": 0, "creation_date": 1532549930, "post_id": 51526954, "comment_id": 90022609, "body": "@Ares: It doesn&#39;t matter whether the line continuation character is there or not (I reproduce either way as long as <code>DeprecationWarning</code>s are enabled). If you&#39;re launching or using the code in different ways, you might have different warning levels set though (by default, <code>DeprecationWarning</code>s aren&#39;t emitted, but one of your tests might be enabling it)."}, {"owner": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "edited": false, "score": 1, "creation_date": 1532550176, "post_id": 51526954, "comment_id": 90022727, "body": "@abarnert et al; I figured it out; the issue has to do with Django&#39;s reloader behavior. The first time <code>runserver</code> executes, no warning appears, but when the reloader runs, the warning appears. I incorrectly attributed the behavior to the changes made in my code rather than Django&#39;s reloader."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "edited": false, "score": 2, "creation_date": 1532550484, "post_id": 51526954, "comment_id": 90022863, "body": "@Ares: They likely set the handling behavior for <code>DeprecationWarning</code> to either <code>module</code> (prints when first raised in a given module, then silent thereafter) or <code>once</code> (prints each class of warning the first time it occurs program-wide, then never again). Either way would get the behavior you describe."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 4, "last_activity_date": 1532550196, "last_edit_date": 1532550196, "creation_date": 1532549529, "answer_id": 51526954, "question_id": 51526849, "link": "https://stackoverflow.com/questions/51526849/python-line-continuation-results-in-deprecationwarning/51526954#51526954", "title": "Python line continuation results in DeprecationWarning", "body": "<p>This has nothing to do with your line continuation, it's with using <code>\\,</code> as an escape sequence in your string.</p>\n\n<p>The warning explicitly includes <code>\\,</code>:</p>\n\n<pre><code>DeprecationWarning: invalid escape sequence \\,\n</code></pre>\n\n<p>And that's why your later example doesn't warn: because the string doesn't have a <code>\\,</code> or other unrecognized escape sequence in it.</p>\n\n<p>As explained in the docs for <a href=\"https://docs.python.org/3/reference/lexical_analysis.html#string-and-bytes-literals\" rel=\"nofollow noreferrer\">String and Byte literals</a>:</p>\n\n<blockquote>\n  <p>Changed in version 3.6: Unrecognized escape sequences produce a <code>DeprecationWarning</code>. In some future version of Python they will be a <code>SyntaxError</code>.</p>\n</blockquote>\n\n<p>This change is mentioned in <a href=\"https://docs.python.org/3/whatsnew/3.6.html#deprecated-python-behavior\" rel=\"nofollow noreferrer\">What's New in Python 3.6</a>, with a link to <a href=\"https://bugs.python.org/issue27364\" rel=\"nofollow noreferrer\">issue #27364</a>, which links to <a href=\"http://comments.gmane.org/gmane.comp.python.devel/151612\" rel=\"nofollow noreferrer\">an earlier discussion on the -dev mailing list</a>.</p>\n\n<p>Traditionally, Python allowed unrecognized escape sequences in string literals and just processed them as if they weren't escapes, so <code>\\,</code> literally means a backslash and a comma, because this makes it easier to see what's going wrong when you print out the string in the debugger.</p>\n\n<p>But this leads to all kinds of confusion, especially for Windows users (who get away with <code>'C:\\Spam'</code>, <code>'C:\\spam'</code>, and <code>'C:\\Vikings'</code>, but get errors with <code>'C:\\vikings'</code>), and for people coming from any of the huge number of languages that follow C-style escape rules (where <code>\\,</code> would mean just a comma\u2014although most C compilers will generate a warning for that), which is presumably why you now get a warning.</p>\n"}, {"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1532550075, "post_id": 51527024, "comment_id": 90022677, "body": "While this is 100% true, it doesn&#39;t explain the cause of the problem, and it&#39;s not necessarily the correct answer (e.g. if <code>subprocess</code> isn&#39;t being used directly, it&#39;s possible they&#39;re either printing this for some reason, or passing it to some third party API)."}, {"owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1532550294, "post_id": 51527024, "comment_id": 90022781, "body": "@ShadowRanger Agreed, but I think this answer will really help the OP, most people use commands with <code>subprocess</code> and (argh) <code>os.system</code>."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1532551076, "post_id": 51527024, "comment_id": 90023130, "body": "@nosklo I suggested <code>os.system</code> should be moved to <code>subprocess.system</code> in 3.0. Guido&#39;s reply was something like: Nice idea, but nothing humanly possible will stop people from finding that function, calling it, and then asking why they can&#39;t capture the output. It&#39;s a law of nature."}], "tags": [], "owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "is_accepted": false, "score": 2, "last_activity_date": 1532549816, "creation_date": 1532549816, "answer_id": 51527024, "question_id": 51526849, "link": "https://stackoverflow.com/questions/51526849/python-line-continuation-results-in-deprecationwarning/51527024#51527024", "title": "Python line continuation results in DeprecationWarning", "body": "<p>try using lists for commands:</p>\n\n<pre><code>command = [\n    \"ffmpeg\",\n    \"-i\", file_path,\n    \"-vsync\", \"0\", \n    \"-q:v\", \"2\",\n    \"-vf\", 'select=\"eq(pict_type,PICT_TYPE_I)\"',\n    \"-r\", \"30\", \n    os.path.join(output_path, \"frame%03d.jpg\"),\n]\n</code></pre>\n\n<p>Then call it without using <code>shell=True</code>:</p>\n\n<pre><code>subprocess.run(command)\n</code></pre>\n\n<p>By doing this, you have multiple advantages:</p>\n\n<ol>\n<li>You are <strong>free from quote and escape hell</strong> - you don't have to add quotes or escape anything. Spaces are no longer delimiters, the parameters will be passed as in the list.</li>\n<li>You don't have to use string interpolation (<code>.format</code>) because you can just pass the parameter separately to the list.</li>\n<li>By not using the shell, you avoid executing one extra process for nothing - why execute a shell to run your command when you can run it directly?</li>\n</ol>\n"}], "owner": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 51526954, "answer_count": 2, "score": 0, "last_activity_date": 1532550323, "creation_date": 1532549045, "last_edit_date": 1532550323, "question_id": 51526849, "link": "https://stackoverflow.com/questions/51526849/python-line-continuation-results-in-deprecationwarning", "title": "Python line continuation results in DeprecationWarning", "body": "<p>In Python 3.6.5, this works fine:</p>\n\n<pre><code>command = \"ffmpeg -i {0} -vsync 0 -q:v 2 -vf select=\\\"eq(pict_type\\,PICT_TYPE_I)\\\" -r 30 {1}/frame%03d.jpg\".format(file_path, output_path)\n</code></pre>\n\n<p>That's obviously a long line, so I used a line continuation:</p>\n\n<pre><code>command = \"ffmpeg -i {0} -vsync 0 -q:v 2 -vf select=\\\"eq(pict_type\\,PICT_TYPE_I)\\\" -r 30 {1}/frame%03d.jpg\"\\\n    .format(file_path, output_path)\n</code></pre>\n\n<p>However, at startup, this generates a <code>DeprecationWarning</code>:</p>\n\n<pre><code> DeprecationWarning: invalid escape sequence \\,\n  command = \"ffmpeg -i {0} -vsync 0 -q:v 2 -vf select=\\\"eq(pict_type\\,PICT_TYPE_I)\\\" -r 30 {1}/frame%03d.jpg\"\\\n</code></pre>\n\n<p>This does <em>not</em>, however:</p>\n\n<pre><code>command = \"foo {0} bar {1}\"\\\n    .format(file_path, output_path)\n</code></pre>\n\n<p>I use line continuations all over the rest of the project; none have resulted in <code>DeprecationWarning</code>. Other questions like <a href=\"https://stackoverflow.com/questions/50504500/deprecationwarning-invalid-escape-sequence-what-to-use-instead-of-d\">this one</a> mention this warning, but none for continuation characters that I can find.</p>\n\n<p>What causes this warning, and why does it only appear in this very narrow case?</p>\n\n<p><strong>Edit</strong>: This has nothing to do with the line continuation. The reason the error presented to me only some of the time has to do with Django's <code>runserver</code>. The first time <code>runserver</code> is run, the error is not reported. But if a change causes a reload, then the error is reported when the reloader runs.</p>\n"}, {"tags": ["python", "pandas", "dataframe", "join", "pivot"], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 5, "last_activity_date": 1532549413, "creation_date": 1532549413, "answer_id": 51526927, "question_id": 51526846, "link": "https://stackoverflow.com/questions/51526846/unpivot-dataframe-and-join-pandas/51526927#51526927", "title": "Unpivot dataframe and join pandas", "body": "<p>Use <code>set_index</code>, <code>unstack</code> and flatten multiindex:</p>\n\n<pre><code>df_out = df.set_index(['id','group']).unstack()\ndf_out.columns = df_out.columns.map('{0[1]}_{0[0]}'.format)\ndf_out = df_out.reset_index()\nprint(df_out)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>    id      A_value      B_value\n0   92      123.123      32019.0\n1  105     9034.000       3281.0\n2  999      421.000          NaN\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 2, "creation_date": 1532549639, "post_id": 51526960, "comment_id": 90022481, "body": "Look at using <code>add_suffix(&#39;_value&#39;)</code> before <code>reset_index</code>."}, {"owner": {"reputation": 1298, "user_id": 9435107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e0a5095d1dee0d01c4b5f24f4be428?s=128&d=identicon&r=PG&f=1", "display_name": "W Stokvis", "link": "https://stackoverflow.com/users/9435107/w-stokvis"}, "reply_to_user": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 1, "creation_date": 1532549788, "post_id": 51526960, "comment_id": 90022544, "body": "@ScottBoston updated. Thanks!"}, {"owner": {"reputation": 341, "user_id": 7069980, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7be432114cc1aadd83041a43a621ad50?s=128&d=identicon&r=PG&f=1", "display_name": "jerbear", "link": "https://stackoverflow.com/users/7069980/jerbear"}, "edited": false, "score": 0, "creation_date": 1532550288, "post_id": 51526960, "comment_id": 90022778, "body": "add_suffix adds a string to all the columns correct? how would you do it if there was also another values column in the original dataframe?"}, {"owner": {"reputation": 1298, "user_id": 9435107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e0a5095d1dee0d01c4b5f24f4be428?s=128&d=identicon&r=PG&f=1", "display_name": "W Stokvis", "link": "https://stackoverflow.com/users/9435107/w-stokvis"}, "reply_to_user": {"reputation": 341, "user_id": 7069980, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7be432114cc1aadd83041a43a621ad50?s=128&d=identicon&r=PG&f=1", "display_name": "jerbear", "link": "https://stackoverflow.com/users/7069980/jerbear"}, "edited": false, "score": 0, "creation_date": 1532550491, "post_id": 51526960, "comment_id": 90022866, "body": "@jerbear You can use this: <code>.rename({&#39;A&#39;:&#39;A_value&#39;, &#39;B&#39;:&#39;B_value&#39;}, axis = 1)</code>"}], "tags": [], "owner": {"reputation": 1298, "user_id": 9435107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e0a5095d1dee0d01c4b5f24f4be428?s=128&d=identicon&r=PG&f=1", "display_name": "W Stokvis", "link": "https://stackoverflow.com/users/9435107/w-stokvis"}, "is_accepted": false, "score": 3, "last_activity_date": 1532549763, "last_edit_date": 1532549763, "creation_date": 1532549536, "answer_id": 51526960, "question_id": 51526846, "link": "https://stackoverflow.com/questions/51526846/unpivot-dataframe-and-join-pandas/51526960#51526960", "title": "Unpivot dataframe and join pandas", "body": "<p>Simple solution using <code>pivot</code>, <code>add_suffix</code> (via @ScottBoston) and <code>reset_index</code></p>\n\n<pre><code>df.pivot(index = 'id',columns = 'group',values = 'value')\\\n       .add_suffix('_value')\\\n       .reset_index()\ngroup     id   A_value  B_value\n0       92.0   123.123  32019.0\n1      105.0  9034.000   3281.0\n2      999.0   421.000      NaN\n</code></pre>\n"}], "owner": {"reputation": 341, "user_id": 7069980, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7be432114cc1aadd83041a43a621ad50?s=128&d=identicon&r=PG&f=1", "display_name": "jerbear", "link": "https://stackoverflow.com/users/7069980/jerbear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1532550083, "accepted_answer_id": 51526927, "answer_count": 2, "score": 2, "last_activity_date": 1532549763, "creation_date": 1532549038, "question_id": 51526846, "link": "https://stackoverflow.com/questions/51526846/unpivot-dataframe-and-join-pandas", "closed_reason": "Duplicate", "title": "Unpivot dataframe and join pandas", "body": "<p>I have this dataframe:</p>\n\n<pre><code>+-------+-----+---------+\n| group | id  |  value  |\n+-------+-----+---------+\n| A     |  92 | 123.123 |\n| A     | 105 |    9034 |\n| A     | 999 |     421 |\n| B     |  92 |   32019 |\n| B     | 105 |    3281 |\n+-------+-----+---------+\n</code></pre>\n\n<p>I'd like to pivot the 'group' column so that its values become part of the 'value' column name and the observations are joined by 'id' like this:</p>\n\n<pre><code>+-----+---------+---------+\n| id  | A_value | B_value |\n+-----+---------+---------+\n|  92 | 123.123 | 32019   |\n| 105 |    9034 | 3281    |\n| 999 |     421 | nan     |\n+-----+---------+---------+\n</code></pre>\n\n<p>What's the best way to go about doing this?</p>\n"}, {"tags": ["python", "facebook", "facebook-graph-api", "facebook-sdk-3.0"], "owner": {"reputation": 31, "user_id": 10135524, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y7v8waDORVw/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qZK8UnffQDK9tSJVrJ9oxPXCvMJg/mo/photo.jpg?sz=128", "display_name": "Ravi Mehta", "link": "https://stackoverflow.com/users/10135524/ravi-mehta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 654, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1532548842, "creation_date": 1532548842, "question_id": 51526809, "link": "https://stackoverflow.com/questions/51526809/facebook-marketing-api-pulling-reports-from-business-manager-account", "title": "Facebook Marketing API - pulling reports from business manager account", "body": "<p>I have an ads account on facebook business manager. I've created a report using the ads reporting UI. I'm trying to use the facebook_business python SDK to either list the reports that have been created for the Ad Account and/or download the report(s) to a .csv or store the report in a python variable.</p>\n\n<p>I've been using the get_insights() method but I want to find a report thats already been created.</p>\n\n<pre><code>from facebook_business.adobjects.adaccount import AdAccount\nfrom facebook_business.adobjects.adsinsights import AdsInsights\nfrom facebook_business.api import FacebookAdsApi\n\nFacebookAdsApi.init(app_id=app_id,\n                app_secret=app_secret,\n                access_token=access_token)\n\nad_account = AdAccount(ad_account_id)\n\nfields = [\n'campaign_name',\n'adset_name',\n'impressions',\n'reach',\n'clicks',\n'inline_link_clicks',\n'campaign_name',\n'impressions',\n'website_purchase_roas']\n\nparams = {\n'level': 'adset',\n'filtering': [],\n'breakdowns': [],\n'date_preset': 'last_7d'}\n\nad_account.get_insights(fields=fields,\n                params=params)\n</code></pre>\n\n<p>The downside to using get_insights is that there are some metrics that I cannot input into fields such metrics as website purchases, website content views, website purchase conversions</p>\n"}, {"tags": ["python", "pandas", "dataframe", "apply"], "comments": [{"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1532550867, "post_id": 51526805, "comment_id": 90023034, "body": "Right now <i>evalHerfindahlIndexForDF</i> has nothing to do with <i>evalHerfindahlIndex</i>."}, {"owner": {"reputation": 2782, "user_id": 2065691, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/z304s.png?s=128&g=1", "display_name": "DanielTheRocketMan", "link": "https://stackoverflow.com/users/2065691/danieltherocketman"}, "reply_to_user": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1532551106, "post_id": 51526805, "comment_id": 90023147, "body": "@Parfait, unfortunatelly yes! The point is that I have an error in the first line that I was not able to correct! So I could not go on! I was trying to reply exactly  evalHerfindahlIndex."}, {"owner": {"reputation": 986, "user_id": 2271478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6d2741f690d245b2786ac0f6e8dde8?s=128&d=identicon&r=PG", "display_name": "xyzjayne", "link": "https://stackoverflow.com/users/2271478/xyzjayne"}, "edited": false, "score": 0, "creation_date": 1532555022, "post_id": 51526805, "comment_id": 90024767, "body": "If the function is applied to each row, then you need to specify <code>axis = 1</code> within apply"}], "answers": [{"comments": [{"owner": {"reputation": 2782, "user_id": 2065691, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/z304s.png?s=128&g=1", "display_name": "DanielTheRocketMan", "link": "https://stackoverflow.com/users/2065691/danieltherocketman"}, "edited": false, "score": 0, "creation_date": 1532556083, "post_id": 51528115, "comment_id": 90025127, "body": "Thank you, @parfait. Is the speed of doing this is equivalent of using the apply method?"}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "reply_to_user": {"reputation": 2782, "user_id": 2065691, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/z304s.png?s=128&g=1", "display_name": "DanielTheRocketMan", "link": "https://stackoverflow.com/users/2065691/danieltherocketman"}, "edited": false, "score": 1, "creation_date": 1532556340, "post_id": 51528115, "comment_id": 90025205, "body": "Apply <i>is</i> a loop and not a vectorized process. However, your method runs on entire dataframe and not rows or columns. You might even be able to remove the <code>for</code> loop and empty initialization for a vectorized call. Maybe something like: <code>y = np.power(x&#47;soma, 2.0)</code>"}], "tags": [], "owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "is_accepted": false, "score": 1, "last_activity_date": 1532555044, "creation_date": 1532555044, "answer_id": 51528115, "question_id": 51526805, "link": "https://stackoverflow.com/questions/51526805/how-to-make-this-function-using-apply/51528115#51528115", "title": "How to make this function using apply", "body": "<p>Consider updating your method and then your call by specifically casting the array return to pandas Series</p>\n\n<pre><code>def evalHerfindahlIndex(df):\n    x = df.as_matrix(columns = listOfCompanies)          # MOVE MATRIX OPERATION WITHIN FCT        \n    soma = np.sum(x,axis = 1)\n    y = np.empty(np.shape(x))\n    for line in range(len(soma)):\n        y[line,:] = np.power(x[line,:]/soma[line],2.0)\n    hhi = pd.Series(np.sum(y,axis = 1))                  # CONVERT TO SERIES\n\n    return hhi\n\n...\n\nif __name__==\"__main__\":\n    df = creatingDataFrame()\n    print(df)\n    dfPivot = df.pivot(index = 'Date', columns = 'Company', values = 'var1')\n    #print(dfPivot)\n    dfPivot = dfPivot.fillna(0)\n    dfPivot['Date'] = dfPivot.index\n\n    # ASSIGN SERIES VALUES (.values to IGNORE INDEX)\n    dfPivot['HE_Result'] = evalHerfindahlIndex(dfPivot).values   \n\n    # OUTPUT  \n    print(evalHerfindahlIndex(dfPivot))\n    # 0    0.40625\n    # 1    1.00000\n    # dtype: float64\n\n    print(dfPivot)\n    # Company        A     B     C        Date  HE_Result\n    # Date                                               \n    # 2002-01-01  10.0  30.0  40.0  2002-01-01    0.40625\n    # 2002-02-01   0.0   0.0  50.0  2002-02-01    1.00000\n</code></pre>\n"}], "owner": {"reputation": 2782, "user_id": 2065691, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/z304s.png?s=128&g=1", "display_name": "DanielTheRocketMan", "link": "https://stackoverflow.com/users/2065691/danieltherocketman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1550502398, "creation_date": 1532548835, "last_edit_date": 1550502398, "question_id": 51526805, "link": "https://stackoverflow.com/questions/51526805/how-to-make-this-function-using-apply", "title": "How to make this function using apply", "body": "<p>I am trying to eval the Herfindahl index using apply. I have done this by transforming the dataframe into a numpy matrix. In fact, the function  evalHerfindahlIndex is working well and it evaluates the correct value of the Herfindahl index for each line. However, when I try to make the same function (evalHerfindahlIndexForDF) to use apply I get a very strange error:</p>\n\n<pre><code>ValueError: (\"No axis named 1 for object type &lt;class 'pandas.core.series.Series'&gt;\", 'occurred at index A')\n</code></pre>\n\n<p>The entire code is this:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport datetime\n\n\ndef evalHerfindahlIndex(x):\n    soma=np.sum(x,axis=1)\n    y=np.empty(np.shape(x))\n    for line in range(len(soma)):\n        y[line,:]=np.power(x[line,:]/soma[line],2.0)\n    hhi=np.sum(y,axis=1)    \n    return hhi\n\ndef evalHerfindahlIndexForDF(x):\n    soma=x.sum(axis=1)\n\ndef creatingDataFrame():\n\n    dateList=[]\n    dateList.append(datetime.date(2002,1,1))\n    dateList.append(datetime.date(2002,2,1))\n    dateList.append(datetime.date(2002,1,1))\n    dateList.append(datetime.date(2002,1,1))\n    dateList.append(datetime.date(2002,2,1))\n    raw_data = {'Date': dateList,            \n                'Company': ['A', 'B', 'B', 'C' , 'C'],                \n                'var1': [10, 20, 30, 40 , 50]}\n\n    df = pd.DataFrame(raw_data, columns = ['Date','Company', 'var1'])\n    df.loc[1, 'var1'] = np.nan\n    return df\n\n\nif __name__==\"__main__\":\n    df=creatingDataFrame()\n    print(df)\n    dfPivot=df.pivot(index='Date', columns='Company', values='var1')\n    #print(dfPivot)\n    dfPivot=dfPivot.fillna(0)\n    dfPivot['Date']=dfPivot.index\n\n    listOfCompanies=list(set(df['Company']))\n    Pivot=dfPivot.as_matrix(columns=listOfCompanies)\n    print(evalHerfindahlIndex(Pivot))\n    print(dfPivot)\n\n    print(dfPivot[listOfCompanies].apply(evalHerfindahlIndexForDF))\n</code></pre>\n\n<p>The dataframe that I am using is dfPivot:</p>\n\n<pre><code>Company        A     B     C        Date\nDate                                    \n2002-01-01  10.0  30.0  40.0  2002-01-01\n2002-02-01   0.0   0.0  50.0  2002-02-01\n</code></pre>\n\n<p>The correct values of the Herfindahl index evaluated using evalHerfindahlIndex is:</p>\n\n<pre><code>[0.40625 1.     ]\n</code></pre>\n\n<p>I would like to return this as an extra column of the dataframe dfPivot.</p>\n"}, {"tags": ["python", "pandas", "scipy", "decision-tree", "pydot"], "comments": [{"owner": {"reputation": 1298, "user_id": 9435107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e0a5095d1dee0d01c4b5f24f4be428?s=128&d=identicon&r=PG&f=1", "display_name": "W Stokvis", "link": "https://stackoverflow.com/users/9435107/w-stokvis"}, "edited": false, "score": 0, "creation_date": 1532549121, "post_id": 51526800, "comment_id": 90022268, "body": "You want <code>imread</code> not <code>inread</code>. See the <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.misc.imread.html\" rel=\"nofollow noreferrer\">documentation</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1371, "user_id": 5103577, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Okf5j.png?s=128&g=1", "display_name": "Luke Borowy", "link": "https://stackoverflow.com/users/5103577/luke-borowy"}, "is_accepted": false, "score": 0, "last_activity_date": 1532549175, "creation_date": 1532549175, "answer_id": 51526871, "question_id": 51526800, "link": "https://stackoverflow.com/questions/51526800/setting-up-my-decision-tree-python/51526871#51526871", "title": "Setting up my decision tree python", "body": "<p>I think this is a simple typo/mishearing. Scipy.misc does not have a function called <code>inread</code>. The function is called <code>imread</code>. Replace <code>scipy.misc.inread(path)</code> with <code>scipy.misc.imread(path)</code></p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10114956, "user_type": "registered", "profile_image": "https://graph.facebook.com/682990225367882/picture?type=large", "display_name": "Marin Mileti\u0107", "link": "https://stackoverflow.com/users/10114956/marin-mileti%c4%87"}, "edited": false, "score": 0, "creation_date": 1532619706, "post_id": 51527687, "comment_id": 90053136, "body": "I&#39;m not ashamed at all... nope everything is fine! It works!"}], "tags": [], "owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "is_accepted": false, "score": -1, "last_activity_date": 1532552949, "creation_date": 1532552949, "answer_id": 51527687, "question_id": 51526800, "link": "https://stackoverflow.com/questions/51526800/setting-up-my-decision-tree-python/51527687#51527687", "title": "Setting up my decision tree python", "body": "<p><strong>In the <code>show_tree</code> function</strong></p>\n\n<hr>\n\n<p><strong>Replace</strong></p>\n\n<p>img = scipy.misc.inread(path)</p>\n\n<hr>\n\n<p><strong>With</strong></p>\n\n<p>img = scipy.misc.imread(path)</p>\n\n<hr>\n\n<p>Correct spelling: <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.misc.imread.html\" rel=\"nofollow noreferrer\">scipy.misc.imread</a></p>\n"}], "owner": {"reputation": 1, "user_id": 10114956, "user_type": "registered", "profile_image": "https://graph.facebook.com/682990225367882/picture?type=large", "display_name": "Marin Mileti\u0107", "link": "https://stackoverflow.com/users/10114956/marin-mileti%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1532552977, "creation_date": 1532548799, "last_edit_date": 1532552977, "question_id": 51526800, "link": "https://stackoverflow.com/questions/51526800/setting-up-my-decision-tree-python", "title": "Setting up my decision tree python", "body": "<pre><code>import pandas as pd\nimport numpy as np\n\nfrom sklearn import tree\nfrom sklearn.tree import DecisionTreeClassifier\nfrom sklearn.model_selection import train_test_split\n\nfrom matplotlib import pyplot as plt\nimport seaborn as sns\n\nfrom sklearn.tree import export_graphviz\n\nimport graphviz\nimport pydotplus\nimport io\nfrom scipy import misc\n\n%matplotlib inline\n\ndata = pd.read_csv(r'''C:\\Users\\Pwego\\Desktop\\spotifyclassification2\\data.csv''')\n\ntrain, test = train_test_split(data, test_size = 0.15)\n\nprint(\"Training size: {}; Test size: {};\".format(len(train), len(test)))\n\npos_tempo = data[data['target'] == 1]['tempo']\nneg_tempo = data[data['target'] == 0]['tempo']\n\npos_danceability = data[data['target'] == 1]['danceability']\nneg_danceability = data[data['target'] == 0]['danceability']\n\npos_duration = data[data['target'] == 1]['duration_ms']\nneg_duration = data[data['target'] == 0]['duration_ms']\n\npos_energy = data[data['target'] == 1]['energy']\nneg_energy = data[data['target'] == 0]['energy']\n\npos_instrumentalness = data[data['target'] == 1]['instrumentalness']\nneg_instrumentalness = data[data['target'] == 0]['instrumentalness']\n\npos_key = data[data['target'] == 1]['key']\nneg_key = data[data['target'] == 0]['key']\n\npos_liveness = data[data['target'] == 1]['liveness']\nneg_liveness = data[data['target'] == 0]['liveness']\n\npos_loudness = data[data['target'] == 1]['loudness']\nneg_loudness = data[data['target'] == 0]['loudness']\n\npos_mode = data[data['target'] == 1]['mode']\nneg_mode = data[data['target'] == 0]['mode']\n\npos_speechiness = data[data['target'] == 1]['speechiness']\nneg_speechiness = data[data['target'] == 0]['speechiness']\n\npos_time_signature = data[data['target'] == 1]['time_signature']\nneg_time_signature = data[data['target'] == 0]['time_signature']\n\npos_valence = data[data['target'] == 1]['valence']\nneg_valence = data[data['target'] == 0]['valence']\n\n\n\n\n\n\n\n\nfig = plt.figure(figsize =(12, 8))\nplt.title(\"Song Tempo Like / Dislike Distribution\")\npos_tempo.hist(alpha = 0.7, bins = 30, label='positive', color =\"green\")\nneg_tempo.hist(alpha = 0.7, bins = 30, label='negative', color ='red')\nplt.legend(loc = \"upper right\")\n\nfig2 = plt.figure(figsize=(15,15))\n\n#Danceabiliy\nax3 = fig2.add_subplot(331)\nax3.set_xlabel('dancebility')\nax3.set_ylabel('count')\nax3.set_title(\"Song Dancebility Like Distribution\")\npos_danceability.hist(alpha=0.5, bins=30)\nneg_danceability.hist(alpha=0.5, bins=30)\n\nax4 = fig2.add_subplot(331)\nax4.set_xlabel('duration')\nax4.set_ylabel('count')\nax4.set_title(\"Song Duration Like Distribution\")\npos_duration.hist(alpha=0.5, bins=30)\nneg_duration.hist(alpha=0.5, bins=30)\n\nax5 = fig2.add_subplot(332)\nax5.set_xlabel('energy')\nax5.set_ylabel('count')\nax5.set_title(\"Song Energy Like Distribution\")\npos_energy.hist(alpha=0.5, bins=30)\nneg_energy.hist(alpha=0.5, bins=30)\n\nax6 = fig2.add_subplot(333)\nax6.set_xlabel('instrumentalness')\nax6.set_ylabel('count')\nax6.set_title(\"Song Instrumentalness Like Distribution\")\npos_instrumentalness.hist(alpha=0.5, bins=30)\nneg_instrumentalness.hist(alpha=0.5, bins=30)\n\nax7 = fig2.add_subplot(334)\nax7.set_xlabel('key')\nax7.set_ylabel('count')\nax7.set_title(\"Song Keys Like Distribution\")\npos_key.hist(alpha=0.5, bins=30)\nneg_key.hist(alpha=0.5, bins=30)\n\nax8= fig2.add_subplot(335)\nax8.set_xlabel('liveness')\nax8.set_ylabel('count')\nax8.set_title(\"Song Liveness Like Distribution\")\npos_liveness.hist(alpha=0.5, bins=30)\nneg_liveness.hist(alpha=0.5, bins=30)\n\nax9 = fig2.add_subplot(336)\nax9.set_xlabel('loudness')\nax9.set_ylabel('count')\nax9.set_title(\"Song Loudness Like Distribution\")\npos_loudness.hist(alpha=0.5, bins=30)\nneg_loudness.hist(alpha=0.5, bins=30)\n\nax10 = fig2.add_subplot(337)\nax10.set_xlabel('mode')\nax10.set_ylabel('count')\nax10.set_title(\"Song Mode Like Distribution\")\npos_mode.hist(alpha=0.5, bins=30)\nneg_mode.hist(alpha=0.5, bins=30)\n\nax11 = fig2.add_subplot(338)\nax11.set_xlabel('speechiness')\nax11.set_ylabel('count')\nax11.set_title(\"Song Speechiness Like Distribution\")\npos_speechiness.hist(alpha=0.5, bins=30)\nneg_speechiness.hist(alpha=0.5, bins=30)\n\nax12 = fig2.add_subplot(339)\nax12.set_xlabel('time_signature')\nax12.set_ylabel('count')\nax12.set_title(\"Song Time Signature over Distribution\")\npos_time_signature.hist(alpha=0.5, bins=30)\nneg_time_signature.hist(alpha=0.5, bins=30)\n\nax13 = fig2.add_subplot(339)\nax13.set_xlabel('valence')\nax13.set_ylabel('count')\nax13.set_title(\"Song Valence over Distribution\")\npos_valence.hist(alpha=0.5, bins=30)\nneg_valence.hist(alpha=0.5, bins=30)\n\nc = DecisionTreeClassifier(min_samples_split=100)\n\nfeatures = [\"danceability\",\"loudness\",\"valence\",\"energy\",\"instrumentalness\",\"acousticness\",\"k\"]\n\nX_train = train[features]\ny_train = train['target']\n\nX_test = test[features]\ny_test = test['target']\n\ndef show_tree(tree, features, path):\n    f = io.StringIO()\n    export_graphviz(tree, out_file=f, feature_names=features)\n    pydotplus.graph_from_dot_data(f.getvalue()).write_png(path)\n    img = scipy.misc.inread(path)\n    plt.rcParams[\"figure.figsize\"] = (20, 20)\n    plt.imgshow(img)\n\nshow_tree(dt, features, 'tree1.png')\n\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n&lt;ipython-input-30-72a100e0eeec&gt; in &lt;module&gt;()\n----&gt; 1 show_tree(dt, features, 'tree1.png')\n\n&lt;ipython-input-21-9c398f00bf98&gt; in show_tree(tree, features, path)\n      3     export_graphviz(tree, out_file=f, feature_names=features)\n      4     pydotplus.graph_from_dot_data(f.getvalue()).write_png(path)\n----&gt; 5     img = scipy.misc.inread(path)\n      6     plt.rcParams[\"figure.figsize\"] = (20, 20)\n      7     plt.imgshow(img)\n\nAttributeError: module 'scipy.misc' has no attribute 'inread'\n</code></pre>\n\n<p>So I'm trying to create this decision tree for Spotify dataset and I tried multiple ways to install these libraries. </p>\n\n<p>I'm constantly getting this error can somebody help me with this?</p>\n\n<p>I'm using this python tutorial </p>\n\n<p><a href=\"https://www.youtube.com/watch?v=XDbj6PxaSf0&amp;pbjreload=10\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=XDbj6PxaSf0&amp;pbjreload=10</a></p>\n\n<p>If anyone has any more sources for machine learning please send me!</p>\n"}, {"tags": ["javascript", "python", "django", "choicefield", "validationerror"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 909698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b37f5d4d9b207008bb33d2a4276ad2?s=128&d=identicon&r=PG", "display_name": "mwclark4453", "link": "https://stackoverflow.com/users/909698/mwclark4453"}, "edited": false, "score": 0, "creation_date": 1532619383, "post_id": 51527831, "comment_id": 90052937, "body": "That is an excellent suggestion that I will likely implement since it&#39;s more like what I&#39;m doing when first rendering the form.  However, that&#39;s not my problem.  I start off with Node_1 selected that has ADOM_1 and ADOM_2 associated with it so they are the only two in the ADOM ChoiceField list.  If I change the Node ChoiceField to Node_2, the ADOM ChoiceField will be changed via the javascript to have ADOM_3 and ADOM_4 in it.  When I POST that back, I&#39;m told 4 is not a valid choice because it only started with 1 and 2."}], "tags": [], "owner": {"reputation": 151, "user_id": 2560671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tMAXq.jpg?s=128&g=1", "display_name": "crystalAhmet", "link": "https://stackoverflow.com/users/2560671/crystalahmet"}, "is_accepted": false, "score": 0, "last_activity_date": 1532553679, "creation_date": 1532553679, "answer_id": 51527831, "question_id": 51526790, "link": "https://stackoverflow.com/questions/51526790/django-validationerror-after-javascript-modifies-the-choice-field/51527831#51527831", "title": "Django ValidationError after javascript modifies the choice field", "body": "<p>I must confess I didn't go through all the code (it's quite a lot), but at a first glance it looks to me as you should move the initialization of your choices (intTasks, initNodes...) into the <code>__init__</code> method of your FormClass (ScheduleJobForm).\nBecause you want the code to be run when you instantiate the class, not when you load the module, right?\nSo:</p>\n\n<pre>\nclass ScheduleJobForm(forms.Form):\n    selected_node_type = forms.CharField(initial=selectedNodeType, widget=forms.HiddenInput)\n    task = forms.ChoiceField(choices=initTasks)\n    # further fields\n\n    def __init__(self, *args, **kwargs):\n        super().__init__(*args, **kwargs)\n        # initialize initNodes and the rest\n        self.fields[\"src_node\"]=initNodes\n        # and resp.\n</pre>\n\n<p>The form does not care about Javascript, as it is instantiated in the post request after all the Javascript magic on the frontend.\nSo there doesn't have to (and cannot) be any interaction between Javascript and your form.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 909698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b37f5d4d9b207008bb33d2a4276ad2?s=128&d=identicon&r=PG", "display_name": "mwclark4453", "link": "https://stackoverflow.com/users/909698/mwclark4453"}, "is_accepted": false, "score": 0, "last_activity_date": 1532653155, "creation_date": 1532653155, "answer_id": 51549369, "question_id": 51526790, "link": "https://stackoverflow.com/questions/51526790/django-validationerror-after-javascript-modifies-the-choice-field/51549369#51549369", "title": "Django ValidationError after javascript modifies the choice field", "body": "<p>I was able to figure out how to dynamically change the choices by using the getter and setter property of ChoiceField (see <a href=\"https://github.com/django/django/blob/master/django/forms/fields.py\" rel=\"nofollow noreferrer\">github repo</a>).</p>\n\n<p>The change I made was in the ScheduleJobForm view.  I added these additional lines before calling 'is_valid':</p>\n\n<pre><code>        print(\"Got a POST request, checking for valid...\")\n        print(\"Fix the choices in the ADOMs first.\")\n        src_nodeID_name = form['src_node'].value()\n        dst_nodeID_name = form['dst_node'].value()\n        src_nodeID = src_nodeID_name.split('.')[0]\n        dst_nodeID = dst_nodeID_name.split('.')[0]\n        srcAdoms = []\n        for adom in Adom.objects.all().filter(fmg_id=src_nodeID).order_by('id'):\n            adomChoice = adom.id, adom.name\n            srcAdoms.append(adomChoice)\n        dstAdoms = []\n        for adom in Adom.objects.all().filter(fmg_id=dst_nodeID).order_by('id'):\n            adomChoice = adom.id, adom.name\n            dstAdoms.append(adomChoice)\n        form.fields['src_adom'].choices = srcAdoms\n        form.fields['dst_adom'].choices = dstAdoms\n</code></pre>\n\n<p>For efficiency, I should probably check changed_data and see if the ADOM's have actually changed or not.</p>\n"}], "owner": {"reputation": 11, "user_id": 909698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b37f5d4d9b207008bb33d2a4276ad2?s=128&d=identicon&r=PG", "display_name": "mwclark4453", "link": "https://stackoverflow.com/users/909698/mwclark4453"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 224, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1532653155, "creation_date": 1532548763, "question_id": 51526790, "link": "https://stackoverflow.com/questions/51526790/django-validationerror-after-javascript-modifies-the-choice-field", "title": "Django ValidationError after javascript modifies the choice field", "body": "<p>I'm working on a job scheduling app for a REST API and I've created a Tasks, Nodes, URL, Adom, BaseOptions, and Jobs tables in Django.  The BaseOptions have a foreign key for src_adom and dst_adom and the Jobs have foreign keys for the Task, src_node, dst_node, url and baseOptions.  I didn't use a ModelForm but a generic Form instead and just loaded up the initial values and choices for all the fields I need in order to process a job. I did that because I couldn't figure out how to make the form change when the user selects a different node and want to change the select field for the corresponding adoms.  I'm using javascript to detect a new node and changing the select field with the appropriate adoms for that node. I get a validation error if I change the initial source and/or destination node and modify the adom selection list. I know it is because my list of choices have changed from what I initially rendered the form with.</p>\n\n<p>Is there a way to change the choices associated with a ChoiceField during the \"clean\" method? I can't seem to find that in the documents or digging through the Django code on github.</p>\n\n<p>Models:</p>\n\n<pre><code>FMG = 'FMG'\nFOS = 'FOS'\nNODE_TYPE_CHOICES = (\n    (FMG, 'FMG'),\n    (FOS, 'FOS'),\n)\n\n# Create the types of tasks to run\nclass TaskType(models.Model):\n    name = models.CharField(max_length=200)\n    command = models.CharField(max_length=200)\n    node_type = models.CharField(max_length=60, choices=NODE_TYPE_CHOICES, default=FMG)\n\n    def __str__(self):\n        return self.name\n\n# Create the nodes for tasks to be run on\nclass Node(models.Model):\n    ip = models.GenericIPAddressField(protocol='IPv4')\n    name = models.CharField(max_length=200)\n    apiname = models.CharField(max_length=200)\n    apikey = EncryptedCharField(max_length=200)\n    node_type = models.CharField(max_length=60, choices=NODE_TYPE_CHOICES, default=FMG)\n\n    def __str__(self):\n        return \"{0} ({1})\".format(self.name, self.ip)\n\nclass FMG_URLManger(models.Manager):\n\n    def get_queryset(self):\n        return super(FMG_URLManger, self).get_queryset().filter(node_type='FMG')\n\nclass FOS_URLManger(models.Manager):\n\n    def get_queryset(self):\n        return super(FOS_URLManger, self).get_queryset().filter(node_type='FOS')\n\nclass NodeURL(models.Model):\n    name = models.CharField(max_length=200)\n    node_type = models.CharField(max_length=60, choices=NODE_TYPE_CHOICES, default=FMG)\n    table_id = models.CharField(max_length=100)\n    table_url = models.CharField(max_length=200)\n    help_text = models.CharField(max_length=400, null=True)\n    filename = models.CharField(max_length=200)\n\n    objects = models.Manager()\n    fmg_objects = FMG_URLManger()\n    fos_objects = FOS_URLManger()\n\n    def __str__(self):\n        return self.name\n\nclass Adom(models.Model):\n    name = models.CharField(max_length=200)\n    version = models.CharField(max_length=60)\n    fmg = models.ForeignKey(Node, related_name='fmgs', on_delete=models.CASCADE)\n\n    class Meta:\n        unique_together = ((\"name\", \"version\", \"fmg\"),)\n\n    def __str__(self):\n        return self.name\n\nclass BaseOption(models.Model):\n    src_adom = models.ForeignKey(Adom, related_name=\"src_adom\", on_delete=models.CASCADE)\n    dst_adom = models.ForeignKey(Adom, related_name=\"dst_adom\", on_delete=models.CASCADE, null=True)\n    name_filter = models.CharField(max_length=100, null=True)\n    site_name_filter = models.CharField(max_length=100, null=True)\n    policy_id_list_filter = models.CharField(max_length=60, null=True)\n    keep_policy_id = models.BooleanField(default=False)\n    disable_policy = models.BooleanField(default=False)\n    import_only = models.BooleanField(default=False)\n\n    def __str__(self):\n        return self.src_adom.name\n\n# Create the actual request for jobs\nclass Job(models.Model):\n    UNKNOWN = 'Unknown'\n    PENDING = 'Pending'\n    SUCCESS = 'Success'\n    FAILURE = 'Failure'\n    STATUS_CHOICES = (\n        (UNKNOWN, 'Unknown'),\n        (PENDING, 'Pending'),\n        (SUCCESS, 'Success'),\n        (FAILURE, 'Failure'),\n    )\n    description = models.CharField(max_length=400)\n    task = models.ForeignKey(TaskType, related_name='job_task', on_delete=models.CASCADE)\n    src_node = models.ForeignKey(Node, related_name='src_node', on_delete=models.CASCADE)\n    urls = models.ManyToManyField(NodeURL)\n    dst_node = models.ForeignKey(Node, related_name='dst_node', on_delete=models.CASCADE)\n    user = models.ForeignKey(User, related_name='jobs', on_delete=models.CASCADE)\n    opts = models.OneToOneField(BaseOption, related_name='job', on_delete=models.CASCADE)\n    created = models.DateTimeField(auto_now_add=True)\n    run_at = models.DateTimeField(editable=True, default=timezone.now)\n    start = models.DateTimeField(editable=True, null=True)\n    finished = models.DateTimeField(editable=True, null=True)\n    status = models.CharField(max_length=12, choices=STATUS_CHOICES, default=UNKNOWN, editable=True)\n    status_text = models.TextField(editable=True, null=True)\n    file_location = models.CharField(max_length=4086, editable=True, null=True)\n\n    objects = models.Manager()\n\n    def __str__(self):\n        return self.description\n</code></pre>\n\n<p>The ScheduleFormView:</p>\n\n<pre><code>class ScheduleView(LoginRequiredMixin, generic.FormView):\n\n    login_url = '/login/'\n    redirect_field_name = 'redirect_to'\n\n    template_name = 'tools/schedule.html'\n    form_class = ScheduleJobForm\n\n    def post(self, request, *args, **kwargs):\n        form = self.form_class(request.POST)\n        print(\"Got a POST request, checking for valid...\")\n        if form.is_valid():\n            # &lt;process form cleaned data&gt;\n            taskID_nodeType = form.cleaned_data['task']\n            description = form.cleaned_data['description']\n            src_nodeID_name = form.cleaned_data['src_node']\n            dst_nodeID_name = form.cleaned_data['dst_node']\n            urlsID_tableID = form.cleaned_data['urls']\n            src_adomID = form.cleaned_data['src_adom']\n            dst_adomID = form.cleaned_data['dst_adom']\n            name_filter = form.cleaned_data['name_filter']\n            site_name_fiter = form.cleaned_data['site_name_fiter']\n            policy_id_list_filter = form.cleaned_data['policy_id_list_filter']\n            taskID = taskID_nodeType.split('.')[0]\n            src_nodeID = src_nodeID_name.split('.')[0]\n            dst_nodeID = dst_nodeID_name.split('.')[0]\n            # urlsID_tableID was a list, now it's a single URL\n            # urlIDs = []\n            # for urlID_tableID in urlsID_tableID:\n            #     urlID = urlID_tableID.split('.')[0]\n            #     print(\"Got back id {}\".format(urlID))\n            #     urlIDs.append(urlID)\n            urlID = urlsID_tableID.split('.')[0]\n            urls = NodeURL.objects.filter(id=urlID)\n            # print(\"List of URLS = {}\".format(urls))\n            src_node = Node.objects.get(id=src_nodeID)\n            dst_node = Node.objects.get(id=dst_nodeID)\n            task = TaskType.objects.get(id=taskID)\n            src_adom = Adom.objects.get(id=src_adomID)\n            dst_adom = Adom.objects.get(id=dst_adomID)\n            job = Job(description=description,\n                    task=task,\n                    src_node=src_node,\n                    dst_node=dst_node,\n                    user=request.user)\n            opts = BaseOption(src_adom=src_adom,\n                            dst_adom=dst_adom,\n                            name_filter=name_filter,\n                            site_name_filter=site_name_fiter,\n                            policy_id_list_filter=policy_id_list_filter)\n            opts.save()\n            job.opts = opts\n            job.save()\n            for url in urls:\n                url.job_set.add(job)\n            return HttpResponseRedirect('job-list.html')\n        else:\n            print(\"The form was not valid. Return for more processing.\")\n\n        return render(request, self.template_name, {'form': form})\n</code></pre>\n\n<p>The ScheduleJobForm (with my unfinished code for 'clean'):</p>\n\n<pre><code>class ScheduleJobForm(forms.Form):\n\n    def clean(self):\n\n        print(\"Don't actually check for on src_adom.\")\n        cleaned_data = super(ScheduleJobForm, self).clean()\n        print(cleaned_data)\n        adom = self.cleaned_data.get(\"src_adom\")\n        print(adom)\n        # if adom &lt; 1:\n        #     raise forms.ValidationError(\"You didn't choose a valid ADOM.\")\n\n        print(\"Don't actually check for on dst_adom.\")\n        cleaned_data = super(ScheduleJobForm, self).clean()\n        adom = self.cleaned_data.get(\"dst_adom\")\n        print(adom)\n        # if adom &lt; 1:\n        #     raise forms.ValidationError(\"You didn't choose a valid ADOM.\")\n\n    initTasks = []\n    selectedNodeType = ''\n    # Get the first node_type because it will be the default selection of tasks.\n    for task in TaskType.objects.all().filter(node_type='FMG').order_by('id'):\n        if selectedNodeType == '':\n            selectedNodeType = task.node_type\n        taskChoice = str(task.id) + '.' + task.node_type, task.name\n        initTasks.append(taskChoice)\n    # Fill in the initial Nodes for the selected task above.\n    initNodes = []\n    selectedNodeID = 0\n    for node in Node.objects.all().filter(node_type=selectedNodeType).order_by('id'):\n        nodeChoice = str(node.id) + '.' + node.name, node.name + ' (' + node.ip + ')'\n        if selectedNodeID == 0:\n            selectedNodeID = node.id\n        initNodes.append(nodeChoice)\n    # Also grab the URL's for those node types and fill them in.\n    initURLs = []\n    for url in NodeURL.objects.all().filter(node_type=selectedNodeType).order_by('table_id'):\n        urlChoice = str(url.id) + '.' + url.table_id, url.name\n        initURLs.append(urlChoice)\n    # Since we've got the first node selected, then all the ADOMs are the same. Get them.\n    initAdoms = []\n    for adom in Adom.objects.all().filter(fmg_id=selectedNodeID).order_by('id'):\n        adomChoice = adom.id, adom.name\n        initAdoms.append(adomChoice)\n    # Add some hidden fields for the jQuery script to examine.\n    selected_node_type = forms.CharField(initial=selectedNodeType, widget=forms.HiddenInput)\n    # After this, a jQuery will have to keep the select fields updated if they are changed.\n    task = forms.ChoiceField(choices=initTasks)\n    description = forms.CharField()\n    src_node = forms.ChoiceField(choices=initNodes)\n    dst_node = forms.ChoiceField(choices=initNodes)\n    urls = forms.ChoiceField(choices=initURLs)\n    # These fields will have to be updated by the jQuery to get the available ADOMS for the selected\n    # Nodes. We also have to create a custom validator since the choices will change via the JS.\n    src_adom = forms.ChoiceField(choices=initAdoms)\n    dst_adom = forms.ChoiceField(choices=initAdoms)\n    name_filter = forms.CharField()\n    site_name_fiter = forms.CharField()\n    policy_id_list_filter = forms.CharField()\n</code></pre>\n\n<p>The schedule.js script that modifies the adoms:</p>\n\n<pre><code>/* \nOf cource, I could use the following but I think the code below is\na bit more readable.\n$(function(){\n    initPage();\n}\n); */\nconst coreapi = window.coreapi\nconst schema = window.schema\n\n$(document).ready(function(){\n        initPage();\n    }\n);\n\nfunction initPage() {\n\n    console.log(\"Adding the change code.\")\n\n    // Fill in the initial srcAdom\n    getSrcAdom()\n    // and the initial dstAdom\n    getDstAdom()\n    // Hide the wait icon\n    $('.loading').hide();\n\n    $('#id_task').change(\n        function() {\n            var currentNodeType = $('#id_selected_node_type').val();\n            var selectedOption = $('#id_task option:selected').val();\n            var selectedNodeType = selectedOption.split(\".\").pop();\n            if (currentNodeType != selectedNodeType) {\n                // The more I look at the options, I think this will have to be locked\n                // into FMG only nodes and create another form for just FOS nodes.\n            }\n        }\n    );\n\n    $('#id_src_node').change(\n        function() {\n            // Need to change the src adoms\n            $('.loading').show();\n            getSrcAdom()\n            $('.loading').hide();\n        }\n    );\n\n    $('#id_dst_node').change(\n        function() {\n            // Need to change the src adoms\n            $('.loading').show();\n            getDstAdom()\n            $('.loading').hide();\n        }\n    );\n\n}\n\nfunction getSrcAdom() {\n    var selectedOption = $('#id_src_node option:selected').val();\n    var selectedNodeName = selectedOption.split(\".\").pop();\n\n    // Clear the src adom options.\n    $('#id_src_adom')\n    .find('option')\n    .remove();\n\n    // Initialize a client\n    var client = new coreapi.Client()\n\n    // Interact with the API endpoint\n    var action = [\"adom\", \"list\"]\n    var params = {\n        search: selectedNodeName,\n    }\n    client.action(schema, action, params).then(function(result) {\n        // Return value is in 'result'\n        $.each(result, function(index, obj) {\n            $('#id_src_adom')\n            .append('&lt;option value=\"' + obj[\"id\"] + '\"&gt;' + obj[\"name\"] + '&lt;/option&gt;');\n            console.log(index + \" got '\" + obj[\"name\"] + \"' (id: \" + obj[\"id\"] + \")\");\n        })\n    })\n}\n\nfunction getDstAdom() {\n    var selectedOption = $('#id_dst_node option:selected').val();\n    var selectedNodeName = selectedOption.split(\".\").pop();\n\n    // Clear the src adom options.\n    $('#id_dst_adom')\n    .find('option')\n    .remove();\n\n    // Initialize a client\n    var client = new coreapi.Client()\n\n    // Interact with the API endpoint\n    var action = [\"adom\", \"list\"]\n    var params = {\n        search: selectedNodeName,\n    }\n    client.action(schema, action, params).then(function(result) {\n        // Return value is in 'result'\n        $.each(result, function(index, obj) {\n            $('#id_dst_adom')\n            .append('&lt;option value=\"' + obj[\"id\"] + '\"&gt;' + obj[\"name\"] + '&lt;/option&gt;');\n            console.log(index + \" got '\" + obj[\"name\"] + \"' (id: \" + obj[\"id\"] + \")\");\n        })\n    })\n}\n\nfunction createNodeSelect(data) {\n    // This was to clear all selected nodes and list new node types.\n    // It's not going to be used in this form at this time.\n    // Need to determine data format from JSON return.\n    // Leaving for future code example of how to clear options\n    // and replace it with a single option.\n    $('#id_src_node')\n    .find('option')\n    .remove()\n    .end()\n    .append('&lt;option value=\"whatever\"&gt;text&lt;/option&gt;')\n    .val('whatever');\n}\n</code></pre>\n\n<p>The schedule.html template (with Bootstrap 4 tags):</p>\n\n<pre><code>{% extends \"tools/base_site.html\" %}\n\n{% block extra_js %}\n    {% load static %}\n        &lt;script src=\"{% static 'rest_framework/js/coreapi-0.1.1.js' %}\"&gt;&lt;/script&gt;\n        &lt;script src=\"{% url 'api-docs:schema-js' %}\"&gt;&lt;/script&gt;\n        &lt;script src=\"{% static 'js/schedule.js' %}\"&gt;&lt;/script&gt;\n{% endblock %}\n\n{% block content %}\n        &lt;div id=\"content-main\"&gt;\n            &lt;br&gt;\n            {% block loading %}\n            {% load static %}\n            &lt;div id=\"loading\" class=\"loading\"&gt;\n                &lt;img src=\"{% static 'images/spinning-wait-icons/wait30.gif' %}\" alt=\"Wait\" /&gt;\n                &lt;!-- &lt;h3&gt;Loading Data from Server&lt;/h3&gt; --&gt;\n            &lt;/div&gt;\n            {% endblock %}\n            {% load widget_tweaks %}\n            {% if form.errors %}\n                &lt;div class=\"alert alert-primary\"&gt;\n                    &lt;button type=\"button\" class=\"close\" data-dismiss=\"alert\"&gt;\u00d7&lt;/button&gt;\n                    {% for field in form %} \n                        {% if field.errors %}\n                        &lt;li&gt;{{ field.label }}: {{ field.errors|striptags }}&lt;/li&gt;\n                        {% endif %}\n                    {% endfor %}\n                &lt;/div&gt;\n            {% endif %}\n            &lt;form method=\"post\"&gt;\n                {% csrf_token %}\n\n                {% for hidden_field in form.hidden_fields %}\n                    {{ hidden_field }}\n                {% endfor %}\n\n                {% for field in form.visible_fields %}\n                    &lt;div class=\"form-group\"&gt;\n                    {{ field.label_tag }}\n                    {% render_field field class=\"form-control\" %}\n                    {% if field.help_text %}\n                        &lt;small class=\"form-text text-muted\"&gt;{{ field.help_text }}&lt;/small&gt;\n                    {% endif %}\n                    &lt;/div&gt;\n                {% endfor %}\n\n                &lt;button type=\"submit\" class=\"btn btn-primary\"&gt;Schedule&lt;/button&gt;\n            &lt;/form&gt;\n        &lt;/div&gt;\n{% endblock %}\n</code></pre>\n"}, {"tags": ["python", "regex", "parsing"], "comments": [{"owner": {"reputation": 833, "user_id": 5046433, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7f28b12c8d8a07db7fc0adbf9a8ae0e8?s=128&d=identicon&r=PG&f=1", "display_name": "Wololo", "link": "https://stackoverflow.com/users/5046433/wololo"}, "edited": false, "score": 0, "creation_date": 1532548914, "post_id": 51526759, "comment_id": 90022171, "body": "The regex for sender: <code>(?&lt;=\\] )[^]]+(?=\\:)</code> - I think you should change it to <code>(?&lt;=\\] )[^]]+?(?=\\:)</code>"}, {"owner": {"reputation": 833, "user_id": 5046433, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7f28b12c8d8a07db7fc0adbf9a8ae0e8?s=128&d=identicon&r=PG&f=1", "display_name": "Wololo", "link": "https://stackoverflow.com/users/5046433/wololo"}, "edited": false, "score": 0, "creation_date": 1532549297, "post_id": 51526759, "comment_id": 90022334, "body": "The regex for <code>date</code> looks fine (demo::<a href=\"https://regex101.com/r/TXqxPK/1\" rel=\"nofollow noreferrer\">regex101.com/r/TXqxPK/1</a>). Make sure that line is not empty or something"}, {"owner": {"reputation": 580, "user_id": 6326148, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8e59946b16c9d154be72b75dbbdd0701?s=128&d=identicon&r=PG&f=1", "display_name": "mihagazvoda", "link": "https://stackoverflow.com/users/6326148/mihagazvoda"}, "reply_to_user": {"reputation": 833, "user_id": 5046433, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7f28b12c8d8a07db7fc0adbf9a8ae0e8?s=128&d=identicon&r=PG&f=1", "display_name": "Wololo", "link": "https://stackoverflow.com/users/5046433/wololo"}, "edited": false, "score": 0, "creation_date": 1532549436, "post_id": 51526759, "comment_id": 90022404, "body": "Both regex works fine (I printed the output). The problem is I sometimes use new line command in my messages - in this case I have only text in my line which is supposed to be a part of the previous line."}, {"owner": {"reputation": 833, "user_id": 5046433, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7f28b12c8d8a07db7fc0adbf9a8ae0e8?s=128&d=identicon&r=PG&f=1", "display_name": "Wololo", "link": "https://stackoverflow.com/users/5046433/wololo"}, "edited": false, "score": 1, "creation_date": 1532550102, "post_id": 51526759, "comment_id": 90022687, "body": "I think you should read a line. Check if it starts with <code>[</code>. If it does, it means that the read line is a new message. If it doesn&#39;t, this means that the read line is a part of the previous message&#39;s content. So append it to the previous message&#39;s content"}, {"owner": {"reputation": 580, "user_id": 6326148, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8e59946b16c9d154be72b75dbbdd0701?s=128&d=identicon&r=PG&f=1", "display_name": "mihagazvoda", "link": "https://stackoverflow.com/users/6326148/mihagazvoda"}, "reply_to_user": {"reputation": 833, "user_id": 5046433, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7f28b12c8d8a07db7fc0adbf9a8ae0e8?s=128&d=identicon&r=PG&f=1", "display_name": "Wololo", "link": "https://stackoverflow.com/users/5046433/wololo"}, "edited": false, "score": 0, "creation_date": 1532550853, "post_id": 51526759, "comment_id": 90023026, "body": "That&#39;s a good idea. Any idea how to append it to the previous line?"}, {"owner": {"reputation": 833, "user_id": 5046433, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7f28b12c8d8a07db7fc0adbf9a8ae0e8?s=128&d=identicon&r=PG&f=1", "display_name": "Wololo", "link": "https://stackoverflow.com/users/5046433/wololo"}, "edited": false, "score": 1, "creation_date": 1532551718, "post_id": 51526759, "comment_id": 90023426, "body": "Create a temporary variable, say <code>x</code>, and set it to empty string. Then open the input stream. Read a line, check if the first non-whitespace character is <code>[</code>. If it is then first flush <code>x</code> onto the ouput stream. Then set <code>x</code> to <code>str(date) + &#39;,&#39; + sender + &#39;,&#39; + text</code>. If the first non-whitespace character is not <code>[</code>, then simply set x to <code>x + line</code> (do not output anything)"}, {"owner": {"reputation": 833, "user_id": 5046433, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7f28b12c8d8a07db7fc0adbf9a8ae0e8?s=128&d=identicon&r=PG&f=1", "display_name": "Wololo", "link": "https://stackoverflow.com/users/5046433/wololo"}, "edited": false, "score": 0, "creation_date": 1532551807, "post_id": 51526759, "comment_id": 90023462, "body": "I am commenting on mobile. So the formatting might be disturbed  ... sorru"}], "answers": [{"comments": [{"owner": {"reputation": 580, "user_id": 6326148, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8e59946b16c9d154be72b75dbbdd0701?s=128&d=identicon&r=PG&f=1", "display_name": "mihagazvoda", "link": "https://stackoverflow.com/users/6326148/mihagazvoda"}, "edited": false, "score": 0, "creation_date": 1532556452, "post_id": 51527369, "comment_id": 90025252, "body": "I just had to remove &#39;\\n&#39; from text variable and then your solution worked. Thank you."}], "tags": [], "owner": {"reputation": 1103, "user_id": 5200287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pw6S7.png?s=128&g=1", "display_name": "gommb", "link": "https://stackoverflow.com/users/5200287/gommb"}, "is_accepted": true, "score": 1, "last_activity_date": 1532579238, "last_edit_date": 1532579238, "creation_date": 1532551450, "answer_id": 51527369, "question_id": 51526759, "link": "https://stackoverflow.com/questions/51526759/parsing-whatsapp-messages-how-to-parse-multiline-texts/51527369#51527369", "title": "Parsing WhatsApp messages: how to parse multiline texts", "body": "<p>Here is something that should work to append the extra text to the previous line.</p>\n\n<p>This is checking whether the regex fails, in which case just write the line to the file without a newline <code>\\n</code> so it just appends to the previous line in the file.</p>\n\n<pre><code>start = True\n\nwith open('chat.txt', \"r\") as infile, open(\"Output.txt\", \"w\") as outfile:\n    for line in infile:\n        time = re.search(r'(?&lt;=\\[)[^]]+(?=\\])', line)\n        sender = re.search(r'(?&lt;=\\] )[^]]+(?=\\:)', line)\n        if sender and time:\n            date = datetime.strptime(\n                time.group(),\n                '%d/%m/%Y, %H:%M:%S')\n            sender = sender.group()\n            text = line.rsplit(r'].+: ', 1)[-1]\n            new_line = str(date) + ',' + sender + ',' + text\n            if not start: new_line = '\\n' + new_line\n            outfile.write(new_line)\n        else:\n            outfile.write(' ' + line)\n        start = False\n</code></pre>\n\n<p>It also looks like you weren't writing new lines to the file even when the regex worked, so I added that in too.</p>\n"}], "owner": {"reputation": 580, "user_id": 6326148, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8e59946b16c9d154be72b75dbbdd0701?s=128&d=identicon&r=PG&f=1", "display_name": "mihagazvoda", "link": "https://stackoverflow.com/users/6326148/mihagazvoda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1621, "favorite_count": 0, "accepted_answer_id": 51527369, "answer_count": 1, "score": 0, "last_activity_date": 1532579238, "creation_date": 1532548639, "last_edit_date": 1532549503, "question_id": 51526759, "link": "https://stackoverflow.com/questions/51526759/parsing-whatsapp-messages-how-to-parse-multiline-texts", "title": "Parsing WhatsApp messages: how to parse multiline texts", "body": "<p>I have a file of WhatsApp messages which I want to save into csv format. File looks like this:</p>\n\n<blockquote>\n  <p>[04/02/2018, 20:56:55] Name1: \u200eMessages to this chat and calls are now\n  secured with end-to-end encryption.<br>\n  [04/02/2018, 20:56:55] Name1: Content1.<br>\n  More content.<br>\n  [04/02/2018, 23:24:44] Name2: Content2.</p>\n</blockquote>\n\n<p>I want to parse messages into <code>date, sender, text</code> columns. My code:</p>\n\n<pre><code>with open('chat.txt', \"r\") as infile, open(\"Output.txt\", \"w\") as outfile:\n    for line in infile:\n        date = datetime.strptime(\n            re.search('(?&lt;=\\[)[^]]+(?=\\])', line).group(), \n            '%d/%m/%Y, %H:%M:%S')\n        sender = re.search('(?&lt;=\\] )[^]]+(?=\\:)', line).group()\n        text = line.rsplit(']', 1)[-1].rsplit(': ', 1)[-1]\n\n        new_line = str(date) + ',' + sender + ',' + text\n        outfile.write(new_line)\n</code></pre>\n\n<p>I have problems with handling multi line texts. (I sometimes skipped into a new line in my messages - in this case I have only text in the line which is supposed to be a part of the previous line.) \nI'm also open to more pythonic way of parsing datetime, sender, and text. \nThe result of my code is error because every line doesn't have all criteria (but correctly parses date, sender, text):</p>\n\n<pre><code>---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n&lt;ipython-input-33-efbcb430243d&gt; in &lt;module&gt;()\n      3     for line in infile:\n      4         date = datetime.strptime(\n----&gt; 5             re.search('(?&lt;=\\[)[^]]+(?=\\])', line).group(),\n      6             '%d/%m/%Y, %H:%M:%S')\n      7         sender = re.search('(?&lt;=\\] )[^]]+(?=\\:)', line).group()\n\nAttributeError: 'NoneType' object has no attribute 'group'\n</code></pre>\n\n<p>Idea: maybe using try-catch and then somehow appending line with only text? (Doesn't sound Pythonic.)</p>\n"}, {"tags": ["java", "python", "timedelta"], "comments": [{"owner": {"reputation": 26221, "user_id": 7294647, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/QFLgL.jpg?s=128&g=1", "display_name": "Jacob G.", "link": "https://stackoverflow.com/users/7294647/jacob-g"}, "edited": false, "score": 0, "creation_date": 1532548703, "post_id": 51526726, "comment_id": 90022059, "body": "Can you tell us what <code>timedelta</code> does?"}, {"owner": {"reputation": 321906, "user_id": 992484, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/K1mTV.jpg?s=128&g=1", "display_name": "MadProgrammer", "link": "https://stackoverflow.com/users/992484/madprogrammer"}, "edited": false, "score": 2, "creation_date": 1532548715, "post_id": 51526726, "comment_id": 90022068, "body": "Well, the first thing I\u2019d recommend against is, don\u2019t use mathematical operations to calculate date/time values"}, {"owner": {"reputation": 21, "user_id": 10135534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a4b17f127da30afe96b77fac2428ff?s=128&d=identicon&r=PG&f=1", "display_name": "Lizzy", "link": "https://stackoverflow.com/users/10135534/lizzy"}, "edited": false, "score": 0, "creation_date": 1532548780, "post_id": 51526726, "comment_id": 90022099, "body": "<a href=\"https://docs.python.org/2/library/datetime.html#timedelta-objects\" rel=\"nofollow noreferrer\">docs.python.org/2/library/datetime.html#timedelta-objects</a> section 8.1.2"}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 3, "creation_date": 1532548854, "post_id": 51526726, "comment_id": 90022144, "body": "I\u2019m pretty certain that in <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a> you will find the building blocks you need. The <code>Duration</code> class, for example?"}, {"owner": {"reputation": 21, "user_id": 10135534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a4b17f127da30afe96b77fac2428ff?s=128&d=identicon&r=PG&f=1", "display_name": "Lizzy", "link": "https://stackoverflow.com/users/10135534/lizzy"}, "edited": false, "score": 0, "creation_date": 1532548909, "post_id": 51526726, "comment_id": 90022168, "body": "i am trying to do a sunrise / sunset calculator and when I do timeDate(sunrise) it outputs : 12:06:09.967646. I am trying to create a similar function in java to do the same when i put the sunrise calculation into it"}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 0, "creation_date": 1532549002, "post_id": 51526726, "comment_id": 90022205, "body": "In your code, can <code>date</code> be a floating-point value?"}, {"owner": {"reputation": 21, "user_id": 10135534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a4b17f127da30afe96b77fac2428ff?s=128&d=identicon&r=PG&f=1", "display_name": "Lizzy", "link": "https://stackoverflow.com/users/10135534/lizzy"}, "edited": false, "score": 0, "creation_date": 1532549051, "post_id": 51526726, "comment_id": 90022234, "body": "yes for example sunrise could be: 21.37865107050986"}], "answers": [{"comments": [{"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 0, "creation_date": 1532599354, "post_id": 51527479, "comment_id": 90039840, "body": "Oh yes, there are a couple of time delta methods, like <a href=\"https://docs.oracle.com/javase/9/docs/api/java/time/Duration.html#between-java.time.temporal.Temporal-java.time.temporal.Temporal-\" rel=\"nofollow noreferrer\"><code>Duration.between</code></a> and <a href=\"https://docs.oracle.com/javase/9/docs/api/java/time/temporal/ChronoUnit.html#between-java.time.temporal.Temporal-java.time.temporal.Temporal-\" rel=\"nofollow noreferrer\"><code>ChronoUnit.between</code></a>."}], "tags": [], "owner": {"reputation": 524, "user_id": 9462397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655009dc3d2a56db716b562b65041e22?s=128&d=identicon&r=PG", "display_name": "Friedrick", "link": "https://stackoverflow.com/users/9462397/friedrick"}, "is_accepted": false, "score": 0, "last_activity_date": 1532551971, "creation_date": 1532551971, "answer_id": 51527479, "question_id": 51526726, "link": "https://stackoverflow.com/questions/51526726/timedelta-java/51527479#51527479", "title": "TimeDelta java?", "body": "<p>As far as I know, Java doesn't have a built in DeltaTime function. However you can easily make your own.<code>long startTime;</code> \n<code>long delta;</code>   <code>public void deltaTime(){ long currentTime = System.currentTimeMillis(); delta = currentTime - startTime;}</code> </p>\n\n<p>Whenever you want to start your DeltaTime timer, you just do <code>time = System.currentTimeMillis;</code>. This way, the variable \"delta\" is the amount of time between when you started the DeltaTime timer and when you end it using <code>ClassNameHere.deltaTime();</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "is_accepted": false, "score": 2, "last_activity_date": 1532601243, "last_edit_date": 1532601243, "creation_date": 1532590137, "answer_id": 51533279, "question_id": 51526726, "link": "https://stackoverflow.com/questions/51526726/timedelta-java/51533279#51533279", "title": "TimeDelta java?", "body": "<pre><code>    double hours = 21.37865107050986;\n    long nanos = Math.round(hours * TimeUnit.HOURS.toNanos(1));\n    Duration d = Duration.ofNanos(nanos);\n    // Delete any whole days\n    d = d.minusDays(d.toDays());\n    System.out.println(d);\n</code></pre>\n\n<p>This prints:</p>\n\n<blockquote>\n  <p>PT21H22M43.143853836S</p>\n</blockquote>\n\n<p>Which means: a duration of 21 hours 22 minutes 43.143853836 seconds.</p>\n\n<p><strong>Assumptions:</strong> I understand that you want a duration (the docs you link to say \u201cA <code>timedelta</code> object represents a duration\u201d). I have taken <code>date</code> to be a floating-point number of hours, and your modulo operation lead me to believe that you want the duration modulo 1 day (so 26 hours should come out as a duration of 2 hours).</p>\n\n<p>The <code>Duration</code> class in Java is for durations, hence is the one that you should use. It doesn\u2019t accept a floating point number for creation, so I converted your hours so nanoseconds and rounded to whole number. For the conversion I multiplied by the number of nanoseconds in 1 hour, which I got from the call to <code>TimeUnit</code> (this gives clearer and less error-prone code than multiplying out ourselves).</p>\n\n<p>The code above will tacitly give incorrect results for numerically large numbers of hours, so you should check the range before using it. Up to 2 500 000 hours (100 000 days or nearly 300 years) you should be safe.</p>\n\n<p>Please note: if <code>date</code> was a time of day and not a duration, it\u2019s a completely different story. In this case you should use <code>LocalTime</code> in Java. It\u2019s exactly for a time of day (without date and without time zone).</p>\n\n<pre><code>    nanos = nanos % TimeUnit.DAYS.toNanos(1);\n    LocalTime timeOfDay = LocalTime.ofNanoOfDay(nanos);\n    System.out.println(timeOfDay);\n</code></pre>\n\n<blockquote>\n  <p>21:22:43.143853836</p>\n</blockquote>\n\n<p><strong>Link:</strong> <a href=\"https://docs.oracle.com/javase/9/docs/api/java/time/Duration.html\" rel=\"nofollow noreferrer\">Documentation of the <code>Duration</code> class</a></p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 10135534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a4b17f127da30afe96b77fac2428ff?s=128&d=identicon&r=PG&f=1", "display_name": "Lizzy", "link": "https://stackoverflow.com/users/10135534/lizzy"}, "is_accepted": false, "score": 0, "last_activity_date": 1608188837, "last_edit_date": 1608188837, "creation_date": 1532610627, "answer_id": 51539665, "question_id": 51526726, "link": "https://stackoverflow.com/questions/51526726/timedelta-java/51539665#51539665", "title": "TimeDelta java?", "body": "<pre class=\"lang-java prettyprint-override\"><code>private static LocalTime timeDate(double d) {\n    //converts into a local time \n    return LocalTime.ofSecondOfDay((long)(d*3600%86400));   \n}\n</code></pre>\n<p>Input (d):</p>\n<pre><code>36.243356711275794\n</code></pre>\n<p>Output:</p>\n<pre><code>21:22:43\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10135534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a4b17f127da30afe96b77fac2428ff?s=128&d=identicon&r=PG&f=1", "display_name": "Lizzy", "link": "https://stackoverflow.com/users/10135534/lizzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2046, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1608188837, "creation_date": 1532548525, "last_edit_date": 1532590214, "question_id": 51526726, "link": "https://stackoverflow.com/questions/51526726/timedelta-java", "title": "TimeDelta java?", "body": "<p>I am trying to convert code from Python to Java. I need to rewrite the <code>timeDelta</code> function in Java. Here is the code in Python: </p>\n\n<pre><code>def timeDate(date):\n    return (timedelta(seconds=date * 3600 % 86400))\n</code></pre>\n\n<p>Does anyone have any idea on how to make a function that acts the same? </p>\n"}, {"tags": ["python", "sql", "teradata"], "comments": [{"owner": {"reputation": 958, "user_id": 3685175, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccabaa010b177df93aac835a2cf6ed5f?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/3685175/simon"}, "edited": false, "score": 0, "creation_date": 1532549474, "post_id": 51526720, "comment_id": 90022415, "body": "Try putting parenthesis around your <code>IN</code> parameters? <code>AND P_T in (?) AND ID in (?)</code>"}, {"owner": {"reputation": 23, "user_id": 9975773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab0cc6cfc739fc03921652468a3c4c1a?s=128&d=identicon&r=PG&f=1", "display_name": "user9975773", "link": "https://stackoverflow.com/users/9975773/user9975773"}, "reply_to_user": {"reputation": 958, "user_id": 3685175, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccabaa010b177df93aac835a2cf6ed5f?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/3685175/simon"}, "edited": false, "score": 0, "creation_date": 1532550049, "post_id": 51526720, "comment_id": 90022666, "body": "I tried your suggestion but getting an error. Have posted the result in the main question above."}, {"owner": {"reputation": 7316, "user_id": 2751573, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/GsKBw.jpg?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/2751573/andrew"}, "edited": false, "score": 1, "creation_date": 1532554519, "post_id": 51526720, "comment_id": 90024597, "body": "Which of your parameters isn&#39;t working?  Also, <code>C_ID = ?, (MD[0],MD[1],MD[2],MD[3])</code> isn&#39;t any kind of valid SQL."}, {"owner": {"reputation": 7496, "user_id": 120504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/429eb788afefe150e1abcbddab57df8d?s=128&d=identicon&r=PG", "display_name": "Rob Paller", "link": "https://stackoverflow.com/users/120504/rob-paller"}, "edited": false, "score": 0, "creation_date": 1532622774, "post_id": 51526720, "comment_id": 90055017, "body": "can you provide more of the Python code that produces this error to help frame the question?"}], "answers": [{"comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1532550533, "post_id": 51527155, "comment_id": 90022892, "body": "Definitely don&#39;t do this. Look up sql injection attacks for details on why."}, {"owner": {"reputation": 1, "user_id": 10135603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19af1e8cc6794e9496fb32e22db8a726?s=128&d=identicon&r=PG", "display_name": "Adam Reger", "link": "https://stackoverflow.com/users/10135603/adam-reger"}, "reply_to_user": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1532550799, "post_id": 51527155, "comment_id": 90023003, "body": "agreed, I should have stated this, however for debugging it could help to see how / what is being sent to the DB."}], "tags": [], "owner": {"reputation": 1, "user_id": 10135603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19af1e8cc6794e9496fb32e22db8a726?s=128&d=identicon&r=PG", "display_name": "Adam Reger", "link": "https://stackoverflow.com/users/10135603/adam-reger"}, "is_accepted": false, "score": -1, "last_activity_date": 1532553993, "last_edit_date": 1532553993, "creation_date": 1532550462, "answer_id": 51527155, "question_id": 51526720, "link": "https://stackoverflow.com/questions/51526720/python-passing-list-in-sql-query-as-parameters/51527155#51527155", "title": "Python: Passing list in sql query as parameters", "body": "<p>I try to having the list get evaluated so when it's passed to the database it's just a string to be executed by the DB </p>\n"}], "owner": {"reputation": 23, "user_id": 9975773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab0cc6cfc739fc03921652468a3c4c1a?s=128&d=identicon&r=PG&f=1", "display_name": "user9975773", "link": "https://stackoverflow.com/users/9975773/user9975773"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 757, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532636613, "creation_date": 1532548493, "last_edit_date": 1532636613, "question_id": 51526720, "link": "https://stackoverflow.com/questions/51526720/python-passing-list-in-sql-query-as-parameters", "title": "Python: Passing list in sql query as parameters", "body": "<p>I have a below query:</p>\n\n<pre><code>import jaydebeapi,pandas as pd\n\ncursor = conn.cursor()\ncursor.execute('''INSERT INTO MD SELECT DISTINCT MD FROM viewshareddim.TMD_VIP\nWHERE STN_ID=? AND P_T in ? AND ID in ? AND C_ID = ?''', (MD[0],MD[1],MD[2],MD[3]))\n</code></pre>\n\n<p>Values are:</p>\n\n<pre><code>MD = [01,(02,05,06),(02,04,05),8]\n</code></pre>\n\n<p>Tried to refer the solution provided here <a href=\"https://stackoverflow.com/questions/283645/python-list-in-sql-query-as-parameter\">python list</a> but not getting how I can implement the solution for my query. Would appreciate if any guidance can be provided.</p>\n\n<p>Tried this:</p>\n\n<pre><code>INSERT INTO MD SELECT DISTINCT MD FROM viewshareddim.TMD_VIP\nWHERE STN_ID=(?) AND P_T in (?) AND ID in (?) AND C_ID = (?), (MD[0],MD[1],MD[2],MD[3])\n\n\nFile \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site- \n packages/jaydebeapi/__init__.py\", line 499, in execute\nself._set_stmt_parms(self._prep, parameters)\nFile \n\"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/jaydebeapi/__init__.py\", line 490, in _set_stmt_parms\nprep_stmt.setObject(i + 1, parameters[i])\nRuntimeError: No matching overloads found for setObject in find. at \nnative/common/jp_method.cpp:127\n</code></pre>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1532548652, "post_id": 51526695, "comment_id": 90022031, "body": "<code>r&quot;[01]?[0-9]:[0-5][0-9]\\s*([Aa][Mm]?|[Pp][Mm]?)&quot;</code> =&gt; <code>r&quot;(?i)[01]?[0-9]:[0-5][0-9]\\s*[AP]M?)&quot;</code>"}, {"owner": {"reputation": 1553, "user_id": 7806300, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/S7U65.jpg?s=128&g=1", "display_name": "addohm", "link": "https://stackoverflow.com/users/7806300/addohm"}, "edited": false, "score": 0, "creation_date": 1532549596, "post_id": 51526695, "comment_id": 90022466, "body": "There is no space between the time and the AM\\PM.  You can also simplify your AM\\PM search. <code>re.findall(r&quot;[01]?[0-9]:[0-5][0-9][Aa]?[Pp]?[Mm]&quot;, &quot;Client 9:35am 1:35pm&quot;)</code>   <a href=\"https://docs.python.org/2/library/re.html\" rel=\"nofollow noreferrer\">docs.python.org/2/library/re.html</a>"}, {"owner": {"reputation": 1553, "user_id": 7806300, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/S7U65.jpg?s=128&g=1", "display_name": "addohm", "link": "https://stackoverflow.com/users/7806300/addohm"}, "reply_to_user": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1532549690, "post_id": 51526695, "comment_id": 90022503, "body": "@WiktorStribi\u017cew I don&#39;t think this should be marked as a duplicate.  The problem was in the OP&#39;s syntax.  Also, the answer to that post does not help or answer his question."}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1532591594, "post_id": 51526695, "comment_id": 90034966, "body": "Of course it is a duplicate, and the &quot;syntax&quot; issue is that OP uses a capturing group while the non-capturing one should have been used."}], "answers": [{"tags": [], "owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "is_accepted": false, "score": -1, "last_activity_date": 1532548622, "creation_date": 1532548622, "answer_id": 51526757, "question_id": 51526695, "link": "https://stackoverflow.com/questions/51526695/python-re-findall-only-returns-part-of-pattern/51526757#51526757", "title": "Python re.findall only returns part of pattern", "body": "<p>Use a <a href=\"https://docs.python.org/2/howto/regex.html#non-capturing-and-named-groups\" rel=\"nofollow noreferrer\">non-capturing group</a>:</p>\n\n<pre><code>r\"[01]?[0-9]:[0-5][0-9]\\s*(?:[Aa][Mm]?|[Pp][Mm]?)\"  # not the \"?:\"\n</code></pre>\n\n<p><a href=\"https://docs.python.org/2/library/re.html#re.findall\" rel=\"nofollow noreferrer\"><code>re.findall</code></a> returns a list of the groups instead of the entire matches if the pattern contains capturing groups.</p>\n"}], "owner": {"reputation": 37, "user_id": 6606390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/575793fa80146d3b95dfbec4e43e13d5?s=128&d=identicon&r=PG&f=1", "display_name": "Xenu&#39;s Prophet", "link": "https://stackoverflow.com/users/6606390/xenus-prophet"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 450, "favorite_count": 0, "closed_date": 1532548594, "answer_count": 1, "score": 0, "last_activity_date": 1532551374, "creation_date": 1532548379, "last_edit_date": 1532551374, "question_id": 51526695, "link": "https://stackoverflow.com/questions/51526695/python-re-findall-only-returns-part-of-pattern", "closed_reason": "Duplicate", "title": "Python re.findall only returns part of pattern", "body": "<p>I am writing a Python 3 program that keeps track of hours spent with a client. One way to log hours is to use a string like <code>Client 9:35am 1:35pm</code> where the first time is the beginning and the second is the end.</p>\n\n<p>To extract the times from the string, I used <a href=\"http://regex101.com/\" rel=\"nofollow noreferrer\">regex101.com</a> to construct the following pattern:</p>\n\n<pre><code>r\"[01]?[0-9]:[0-5][0-9]\\s*([Aa][Mm]?|[Pp][Mm]?)\"\n</code></pre>\n\n<p>When testing it on the above example with regex101, it correctly identifies the two times as two separate matches. However, when trying to use the pattern with Python, the list re.findall returns only contains AM or PM:</p>\n\n<pre><code>re.findall(r\"[01]?[0-9]:[0-5][0-9]\\s*([Aa][Mm]?|[Pp][Mm]?)\", \"Client 9:35am 1:35pm\")\n['am', 'pm']\n</code></pre>\n\n<p>How can I change this so that matches contain the whole time?</p>\n"}, {"tags": ["python", "matplotlib", "pyqt", "widget", "pyqt5"], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 7, "last_activity_date": 1532554665, "last_edit_date": 1592644375, "creation_date": 1532552731, "answer_id": 51527639, "question_id": 51526677, "link": "https://stackoverflow.com/questions/51526677/how-to-organize-layout-using-pyqt/51527639#51527639", "title": "How to organize layout using PyQt", "body": "<p>The structure that you want is a grid so you should use a <code>QGridLayout</code>.</p>\n<p>QGridLayout has the addWidget() method where you can indicate the row and column where the widget will be placed, the same with addLayout()</p>\n<blockquote>\n<p>void QGridLayout::addWidget(QWidget *widget, int row, int column, Qt::Alignment alignment = ...)</p>\n<p>void QGridLayout::addLayout(QLayout *layout, int row, int column, Qt::Alignment alignment = ...)</p>\n</blockquote>\n<p>In your case the structure should be the following:</p>\n<pre><code>QGridLayout\n\u251c\u2500\u2500 Plot (0, 0)\n\u251c\u2500\u2500 Table (0, 1)\n\u251c\u2500\u2500 Other Widgets (1, 0)\n\u2514\u2500\u2500 QVBoxLayout (1, 1)\n\u00a0 \u00a0 \u251c\u2500\u2500 button_start\n\u00a0\u00a0  \u2514\u2500\u2500 button_stop\n</code></pre>\n<p>Then you can indicate the weight of each column, that is, say that the column width will have a proportional width with respect to column 2 using <code>setColumnStretch()</code>:</p>\n<pre><code>layout.setColumnStretch(0, 2)\nlayout.setColumnStretch(1, 1)\n</code></pre>\n<p>Considering the above we have the following:</p>\n<pre><code>import sys\nimport numpy as np\nfrom matplotlib.backends.qt_compat import QtCore, QtGui, QtWidgets\nfrom matplotlib.backends.backend_qt5agg import FigureCanvas\nfrom matplotlib.figure import Figure\n\ndef onclick(event):\n    global clicks\n    clicks.append(event.xdata)\n\nclass ApplicationWindow(QtWidgets.QMainWindow):\n    def __init__(self):\n        super(ApplicationWindow, self).__init__()\n        self._title = 'Prueba real-time'\n        self.setWindowTitle(self._title)\n\n        self._main = QtWidgets.QWidget()\n        self.setCentralWidget(self._main)\n        \n        dynamic_canvas = FigureCanvas(Figure(figsize=(10, 10)))\n        self._dynamic_ax = dynamic_canvas.figure.subplots()\n        dynamic_canvas.figure.canvas.mpl_connect('button_press_event', onclick)\n        self._dynamic_ax.grid()\n        self._timer = dynamic_canvas.new_timer(\n            100, [(self._update_window, (), {})])\n        self._timer.start()\n\n        button_stop = QtWidgets.QPushButton('Stop', self)\n        \n        button_stop.clicked.connect(self._timer.stop)\n\n        button_start = QtWidgets.QPushButton('Start', self)\n        \n        button_start.clicked.connect(self._timer.start)\n\n        self.table_clicks = QtWidgets.QTableWidget(0, 2)\n        self.table_clicks.horizontalHeader().setSectionResizeMode(QtWidgets.QHeaderView.Stretch)\n\n        other_widget = QtWidgets.QLabel(&quot;Other widgets&quot;, \n            font=QtGui.QFont(&quot;Times&quot;, 60, QtGui.QFont.Bold), \n            alignment=QtCore.Qt.AlignCenter)\n        \n        # layouts\n\n        layout = QtWidgets.QGridLayout(self._main)\n\n        layout.addWidget(dynamic_canvas, 0, 0)\n        layout.addWidget(self.table_clicks, 0, 1)\n        layout.addWidget(other_widget, 1, 0)\n\n        button_layout = QtWidgets.QVBoxLayout()\n        button_layout.addWidget(button_stop)\n        button_layout.addWidget(button_start)        \n\n        layout.addLayout(button_layout, 1, 1)\n\n        layout.setColumnStretch(0, 2)\n        layout.setColumnStretch(1, 1)\n\n    def _update_window(self):\n        self._dynamic_ax.clear()\n        global x, y1, y2, y3, N, count_iter, last_number_clicks\n        x.append(x[count_iter] + 0.01)\n        y1.append(np.random.random())\n        idx_inf = max([count_iter-N, 0])\n        if last_number_clicks &lt; len(clicks):\n            for new_click in clicks[last_number_clicks:(len(clicks))]:\n                rowPosition = self.table_clicks.rowCount()\n                self.table_clicks.insertRow(rowPosition)\n                self.table_clicks.setItem(rowPosition,0, QtWidgets.QTableWidgetItem(str(new_click)))\n                self.table_clicks.setItem(rowPosition,1, QtWidgets.QTableWidgetItem(&quot;Descripcion&quot;))\n            last_number_clicks = len(clicks)\n        self._dynamic_ax.plot(x[idx_inf:count_iter], y1[idx_inf:count_iter],'-o', color='b')\n        count_iter += 1\n        self._dynamic_ax.figure.canvas.draw()\n#%%\nif __name__ == &quot;__main__&quot;:\n    pressed_key = {}\n    clicks = []\n    last_number_clicks = len(clicks)\n    N = 25\n    y1 = [np.random.random()]\n    x = [0]\n    count_iter = 0\n    qapp = QtWidgets.QApplication(sys.argv)\n    app = ApplicationWindow()\n    app.show()\n    sys.exit(qapp.exec_())\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/4S7YU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4S7YU.png\" alt=\"enter image description here\" /></a></p>\n"}, {"tags": [], "owner": {"reputation": 956, "user_id": 4729700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/087241d6b8e76ac735ac3bf3924ef24b?s=128&d=identicon&r=PG&f=1", "display_name": "Jannick", "link": "https://stackoverflow.com/users/4729700/jannick"}, "is_accepted": false, "score": 2, "last_activity_date": 1532553664, "creation_date": 1532553664, "answer_id": 51527827, "question_id": 51526677, "link": "https://stackoverflow.com/questions/51526677/how-to-organize-layout-using-pyqt/51527827#51527827", "title": "How to organize layout using PyQt", "body": "<p>I would personally separate the different parts of the program in their own class and use several vertical and horizontal layouts to position the widgets. This especially helps if you want to add features. Especially for large applications this helps to keep the MainWindow, which always tends to become a mess, to be more simple and easier to understand</p>\n\n<pre><code>import sys\nimport numpy as np\nfrom matplotlib.backends.qt_compat import QtWidgets\nfrom matplotlib.backends.backend_qt5agg import FigureCanvas\nfrom matplotlib.figure import Figure\n\ndef onclick(event):\n    global clicks\n    clicks.append(event.xdata)\n    return\n\nclass TableWidget(QtWidgets.QWidget):\n    def __init__(self,parent,*args,**kwargs):\n        super().__init__(*args,**kwargs)\n        self.parent = parent\n        layout = QtWidgets.QVBoxLayout(self)\n\n        self.table_clicks = QtWidgets.QTableWidget()\n        self.table_clicks.setRowCount(0)\n        self.table_clicks.setColumnCount(2)\n        layout.addWidget(self.table_clicks)\n\n        button_widget = QtWidgets.QWidget(self)\n        layout.addWidget(button_widget)\n        button_layout = QtWidgets.QHBoxLayout(button_widget)\n\n        button_stop = QtWidgets.QPushButton('Stop', self)\n        button_layout.addWidget(button_stop)\n        button_stop.clicked.connect(self.parent.plot_widget.button_pressed)\n\n        button_start = QtWidgets.QPushButton('Start', self)\n        button_layout.addWidget(button_start)\n        button_start.clicked.connect(self.parent.plot_widget.button_pressed)\n\nclass PlotWidget(QtWidgets.QWidget):\n    def __init__(self,parent,*args,**kwargs):\n        super().__init__(parent,*args,**kwargs)\n        self.parent = parent\n\n        layout = QtWidgets.QVBoxLayout(self)\n\n        dynamic_canvas = FigureCanvas(Figure(figsize=(10, 10)))\n        layout.addWidget(dynamic_canvas)\n\n        self._dynamic_ax = dynamic_canvas.figure.subplots()\n        dynamic_canvas.figure.canvas.mpl_connect('button_press_event', onclick)\n        self._dynamic_ax.grid()\n        self._timer = dynamic_canvas.new_timer(\n            100, [(self._update_window, (), {})])\n        self._timer.start()\n\n\n    def button_pressed(self):\n        if self.sender().text() == 'Stop':\n            self._timer.stop()\n        if self.sender().text() == 'Start':\n            self._timer.start()\n\n    def _update_window(self):\n        self._dynamic_ax.clear()\n        global x, y1, y2, y3, N, count_iter, last_number_clicks\n        x.append(x[count_iter] + 0.01)\n        y1.append(np.random.random())\n        idx_inf = max([count_iter-N, 0])\n        if last_number_clicks &lt; len(clicks):\n            for new_click in clicks[last_number_clicks:(len(clicks))]:\n                rowPosition = self.parent.table_widget.table_clicks.rowCount()\n                self.parent.table_widget.table_clicks.insertRow(rowPosition)\n                self.parent.table_widget.table_clicks.setItem(rowPosition,0, QtWidgets.QTableWidgetItem(str(new_click)))\n                self.parent.table_widget.table_clicks.setItem(rowPosition,1, QtWidgets.QTableWidgetItem(\"Descripcion\"))\n            last_number_clicks = len(clicks)\n        self._dynamic_ax.plot(x[idx_inf:count_iter], y1[idx_inf:count_iter],'-o', color='b')\n        count_iter += 1\n        self._dynamic_ax.figure.canvas.draw()\n\n\nclass ApplicationWindow(QtWidgets.QMainWindow):\n    def __init__(self):\n        super(ApplicationWindow, self).__init__()\n        self._title = 'Prueba real-time'\n        self.setWindowTitle(self._title)\n        self._main = QtWidgets.QWidget()\n        self.setCentralWidget(self._main)\n        main_layout = QtWidgets.QHBoxLayout(self._main)\n\n        self.plot_widget = PlotWidget(self)\n        main_layout.addWidget(self.plot_widget)\n\n\n        self.table_widget = TableWidget(self)\n        main_layout.addWidget(self.table_widget)\n\n\n#%%\nif __name__ == \"__main__\":\n    pressed_key = {}\n    clicks = []\n    last_number_clicks = len(clicks)\n    N = 25\n    y1 = [np.random.random()]\n    x = [0]\n    count_iter = 0\n    qapp = QtWidgets.QApplication(sys.argv)\n    app = ApplicationWindow()\n    app.show()\n    qapp.exec_()\n</code></pre>\n"}], "owner": {"reputation": 943, "user_id": 6242883, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oa54S.jpg?s=128&g=1", "display_name": "Tendero", "link": "https://stackoverflow.com/users/6242883/tendero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3928, "favorite_count": 1, "accepted_answer_id": 51527639, "answer_count": 2, "score": 2, "last_activity_date": 1532554665, "creation_date": 1532548310, "last_edit_date": 1532551246, "question_id": 51526677, "link": "https://stackoverflow.com/questions/51526677/how-to-organize-layout-using-pyqt", "title": "How to organize layout using PyQt", "body": "<p>I'm very new to PyQt and I'm finding ordering the widgets in the window pretty hard.</p>\n\n<p>I have a plot that updates in real-time, a table that updates every time that the user clicks on the plot, and two buttons (start/stop).</p>\n\n<p>The current layout is behaving this way:</p>\n\n<p><a href=\"https://i.stack.imgur.com/xnH0S.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xnH0S.png\" alt=\"enter image description here\"></a></p>\n\n<p>I want it to look something like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/xB5BY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xB5BY.png\" alt=\"enter image description here\"></a></p>\n\n<p>Where \"other widgets\" correspond to future Widgets I'll add when this is working (such as a slider or a dropdown list). The table should also be as thin as possible, to maximize the size of the plot and don't have the table occupying unnecessary space. My current code is the following one (it's self-contained):</p>\n\n<pre><code>import sys\nimport numpy as np\nfrom matplotlib.backends.qt_compat import QtWidgets\nfrom matplotlib.backends.backend_qt5agg import FigureCanvas\nfrom matplotlib.figure import Figure\n\ndef onclick(event):\n    global clicks\n    clicks.append(event.xdata)\n    return\n\nclass ApplicationWindow(QtWidgets.QMainWindow):\n    def __init__(self):\n        super(ApplicationWindow, self).__init__()\n        self._title = 'Prueba real-time'\n        self.setWindowTitle(self._title)\n        self._main = QtWidgets.QWidget()\n        self.setCentralWidget(self._main)\n        layout = QtWidgets.QHBoxLayout(self._main)\n\n        dynamic_canvas = FigureCanvas(Figure(figsize=(10, 10)))\n        layout.addWidget(dynamic_canvas)\n\n        self._dynamic_ax = dynamic_canvas.figure.subplots()\n        dynamic_canvas.figure.canvas.mpl_connect('button_press_event', onclick)\n        self._dynamic_ax.grid()\n        self._timer = dynamic_canvas.new_timer(\n            100, [(self._update_window, (), {})])\n        self._timer.start()\n\n        button_stop = QtWidgets.QPushButton('Stop', self)\n        layout.addWidget(button_stop)\n        button_stop.clicked.connect(self.button_pressed)\n\n        button_start = QtWidgets.QPushButton('Start', self)\n        layout.addWidget(button_start)\n        button_start.clicked.connect(self.button_pressed)\n\n        self.table_clicks = QtWidgets.QTableWidget()\n        self.table_clicks.setRowCount(0)\n        self.table_clicks.setColumnCount(2)\n        layout.addWidget(self.table_clicks)\n\n    def button_pressed(self):\n        if self.sender().text() == 'Stop':\n            self._timer.stop()\n        if self.sender().text() == 'Start':\n            self._timer.start()\n\n    def _update_window(self):\n        self._dynamic_ax.clear()\n        global x, y1, y2, y3, N, count_iter, last_number_clicks\n        x.append(x[count_iter] + 0.01)\n        y1.append(np.random.random())\n        idx_inf = max([count_iter-N, 0])\n        if last_number_clicks &lt; len(clicks):\n            for new_click in clicks[last_number_clicks:(len(clicks))]:\n                rowPosition = self.table_clicks.rowCount()\n                self.table_clicks.insertRow(rowPosition)\n                self.table_clicks.setItem(rowPosition,0, QtWidgets.QTableWidgetItem(str(new_click)))\n                self.table_clicks.setItem(rowPosition,1, QtWidgets.QTableWidgetItem(\"Descripcion\"))\n            last_number_clicks = len(clicks)\n        self._dynamic_ax.plot(x[idx_inf:count_iter], y1[idx_inf:count_iter],'-o', color='b')\n        count_iter += 1\n        self._dynamic_ax.figure.canvas.draw()\n#%%\nif __name__ == \"__main__\":\n    pressed_key = {}\n    clicks = []\n    last_number_clicks = len(clicks)\n    N = 25\n    y1 = [np.random.random()]\n    x = [0]\n    count_iter = 0\n    qapp = QtWidgets.QApplication(sys.argv)\n    app = ApplicationWindow()\n    app.show()\n    qapp.exec_()\n</code></pre>\n"}]