[{"tags": ["python", "logging", "systemd"], "answers": [{"tags": [], "owner": {"reputation": 5380, "user_id": 146620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4ba0c9119010302832e1d129b38228b?s=128&d=identicon&r=PG", "display_name": "Graham King", "link": "https://stackoverflow.com/users/146620/graham-king"}, "is_accepted": false, "score": 2, "last_activity_date": 1543601897, "creation_date": 1543601897, "answer_id": 53562856, "question_id": 53422081, "link": "https://stackoverflow.com/questions/53422081/log-python-systemd-output-to-log-file/53562856#53562856", "title": "Log Python Systemd output to log file", "body": "<p>First check that your service is running at all: <code>systemctl status MyService</code> should show you an errors.</p>\n\n<p><code>After</code> goes in <code>[Unit]</code> section, not in <code>[Install]</code>.</p>\n\n<p>Once I fixed that your script worked for me. Other things to check:</p>\n\n<ul>\n<li>Is the log file path an absolute path?</li>\n<li>Does the user starting the service have permissions to write there?</li>\n</ul>\n\n<p>I would recommend just logging to stdout, to the journal, so that you don't have to worry about rotating the log file, how much space it takes, etc. Also <code>journalctl</code> is really nice for querying logs. You should be able to access the journal as non-root, either as same user as the script, or by being in group <code>systemd-journal</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 17930, "user_id": 1575066, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/hGOuL.png?s=128&g=1", "display_name": "PascalVKooten", "link": "https://stackoverflow.com/users/1575066/pascalvkooten"}, "is_accepted": false, "score": -1, "last_activity_date": 1560460465, "creation_date": 1560460465, "answer_id": 56588654, "question_id": 53422081, "link": "https://stackoverflow.com/questions/53422081/log-python-systemd-output-to-log-file/56588654#56588654", "title": "Log Python Systemd output to log file", "body": "<p>The answer is simply that <code>logging.info</code> is not going to show up, but <code>logging.warn</code> (and up) will show up.</p>\n"}, {"tags": [], "owner": {"reputation": 420, "user_id": 4772958, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/738d679d75391bf4e1d990cb09208097?s=128&d=identicon&r=PG&f=1", "display_name": "freefall", "link": "https://stackoverflow.com/users/4772958/freefall"}, "is_accepted": true, "score": 3, "last_activity_date": 1587729091, "creation_date": 1587729091, "answer_id": 61407703, "question_id": 53422081, "link": "https://stackoverflow.com/questions/53422081/log-python-systemd-output-to-log-file/61407703#61407703", "title": "Log Python Systemd output to log file", "body": "<p>I've since switched to using <a href=\"https://github.com/Delgan/loguru\" rel=\"nofollow noreferrer\">Loguru</a> for logging and it seems far more intuitive and useable. </p>\n\n<p>Also, adding the following to <code>.service</code> file makes sure the logging is not buffered and is real time:</p>\n\n<pre><code>[Service]\nEnvironment=PYTHONUNBUFFERED=1\n\n</code></pre>\n"}], "owner": {"reputation": 420, "user_id": 4772958, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/738d679d75391bf4e1d990cb09208097?s=128&d=identicon&r=PG&f=1", "display_name": "freefall", "link": "https://stackoverflow.com/users/4772958/freefall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3571, "favorite_count": 0, "accepted_answer_id": 61407703, "answer_count": 3, "score": 2, "last_activity_date": 1587729091, "creation_date": 1542844503, "question_id": 53422081, "link": "https://stackoverflow.com/questions/53422081/log-python-systemd-output-to-log-file", "title": "Log Python Systemd output to log file", "body": "<p>I run my python script as a systemd service, it is defined in the following <code>.service</code> file:</p>\n\n<pre><code>[Unit]\nDescription=MyService\nAfter=multi-user.target\n\n[Service]\nType=idle\nExecStart=/usr/bin/python3 /home/username/projects/website_notifier/run_service.py\n\n[Install]\nAfter=multi-user.target\n</code></pre>\n\n<p>In my run_service.py file I then log output using the logging module:</p>\n\n<pre><code>import logging\n\nlogging.basicConfig(filename=settings['log_file_name'], level=logging.INFO)\nlogging.info(\"Starting notifier service at \" + str(datetime.utcnow()))\n</code></pre>\n\n<p>The issue is that this information is not being logged to my log file when I run I start my file through <code>systemctl</code></p>\n\n<p>Now, I know that generally systemd gets output to journalctl, I don't want this. I want to be able to access this log through another script that does not run with administrator priviliges.</p>\n\n<p>How can I make this happen?</p>\n"}, {"tags": ["python", "p2p"], "answers": [{"tags": [], "owner": {"reputation": 1175, "user_id": 1175455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4gpIG.jpg?s=128&g=1", "display_name": "Harry Cutts", "link": "https://stackoverflow.com/users/1175455/harry-cutts"}, "is_accepted": false, "score": 0, "last_activity_date": 1542847126, "creation_date": 1542847126, "answer_id": 53422387, "question_id": 53422079, "link": "https://stackoverflow.com/questions/53422079/python-how-to-run-a-simple-p2p-network-framework/53422387#53422387", "title": "Python: How to run a simple P2P network framework", "body": "<p>That code only defines classes and methods, so it won't do anything when you run it with the <code>python</code> command. You'll need to import it as a library, something like this:</p>\n\n<pre><code>import btpeer\n\npeer = BTPeer(...)\npeer.addpeer(...)\n</code></pre>\n\n<p>(You'll need to fill in the parameters to the methods (where I've written <code>...</code>) appropriately.)</p>\n"}], "owner": {"reputation": 25, "user_id": 10435278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VY0aU.jpg?s=128&g=1", "display_name": "Vy P Tran", "link": "https://stackoverflow.com/users/10435278/vy-p-tran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 858, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542847126, "creation_date": 1542844495, "question_id": 53422079, "link": "https://stackoverflow.com/questions/53422079/python-how-to-run-a-simple-p2p-network-framework", "title": "Python: How to run a simple P2P network framework", "body": "<p>I found a code about Implements the core functionality in a P2P network. Because I just know C and Java, I have very little knowledge about Python. So, can anyone instruct me how to run this code? To be specific, I want to create peers and invoke some functions such as addpeer or removepeer. I try to run it with command \"python btpeer.py\" but nothing happens. Thanks adv.</p>\n\n<pre><code>#!/usr/bin/python\n\n# btpeer.py\n\nimport socket\nimport struct\nimport threading\nimport time\nimport traceback\n\n\ndef btdebug( msg ):\n    \"\"\" Prints a messsage to the screen with the name of the current thread \"\"\"\n    print \"[%s] %s\" % ( str(threading.currentThread().getName()), msg )\n\n\n#==============================================================================\nclass BTPeer:\n    \"\"\" Implements the core functionality that might be used by a peer in a\n    P2P network.\n\n    \"\"\"\n\n    #--------------------------------------------------------------------------\n    def __init__( self, maxpeers, serverport, myid=None, serverhost = None ):\n    #--------------------------------------------------------------------------\n    \"\"\" Initializes a peer servent (sic.) with the ability to catalog\n    information for up to maxpeers number of peers (maxpeers may\n    be set to 0 to allow unlimited number of peers), listening on\n    a given server port , with a given canonical peer name (id)\n    and host address. If not supplied, the host address\n    (serverhost) will be determined by attempting to connect to an\n    Internet host like Google.\n\n    \"\"\"\n    self.debug = 0\n\n    self.maxpeers = int(maxpeers)\n    self.serverport = int(serverport)\n    if serverhost: self.serverhost = serverhost\n    else: self.__initserverhost()\n\n    if myid: self.myid = myid\n    else: self.myid = '%s:%d' % (self.serverhost, self.serverport)\n\n    self.peerlock = threading.Lock()  # ensure proper access to\n                                # peers list (maybe better to use\n                                # threading.RLock (reentrant))\n    self.peers = {}        # peerid ==&gt; (host, port) mapping\n    self.shutdown = False  # used to stop the main loop\n\n    self.handlers = {}\n    self.router = None\n\n\n\n    #--------------------------------------------------------------------------\n    def __initserverhost( self ):\n    #--------------------------------------------------------------------------\n    \"\"\" Attempt to connect to an Internet host in order to determine the\n    local machine's IP address.\n\n    \"\"\"\n    s = socket.socket( socket.AF_INET, socket.SOCK_STREAM )\n    s.connect( ( \"www.google.com\", 80 ) )\n    self.serverhost = s.getsockname()[0]\n    s.close()\n\n\n\n    #--------------------------------------------------------------------------\n    def __debug( self, msg ):\n    #--------------------------------------------------------------------------\n    if self.debug:\n        btdebug( msg )\n\n\n\n    #--------------------------------------------------------------------------\n    def __handlepeer( self, clientsock ):\n    #--------------------------------------------------------------------------\n    \"\"\"\n    handlepeer( new socket connection ) -&gt; ()\n\n    Dispatches messages from the socket connection\n    \"\"\"\n\n    self.__debug( 'New child ' + str(threading.currentThread().getName()) )\n    self.__debug( 'Connected ' + str(clientsock.getpeername()) )\n\n    host, port = clientsock.getpeername()\n    peerconn = BTPeerConnection( None, host, port, clientsock, debug=False )\n\n    try:\n        msgtype, msgdata = peerconn.recvdata()\n        if msgtype: msgtype = msgtype.upper()\n        if msgtype not in self.handlers:\n        self.__debug( 'Not handled: %s: %s' % (msgtype, msgdata) )\n        else:\n        self.__debug( 'Handling peer msg: %s: %s' % (msgtype, msgdata) )\n        self.handlers[ msgtype ]( peerconn, msgdata )\n    except KeyboardInterrupt:\n        raise\n    except:\n        if self.debug:\n        traceback.print_exc()\n\n    self.__debug( 'Disconnecting ' + str(clientsock.getpeername()) )\n    peerconn.close()\n\n    # end handlepeer method\n\n\n\n    #--------------------------------------------------------------------------\n    def __runstabilizer( self, stabilizer, delay ):\n    #--------------------------------------------------------------------------\n    while not self.shutdown:\n        stabilizer()\n        time.sleep( delay )\n\n\n\n    #--------------------------------------------------------------------------\n    def setmyid( self, myid ):\n    #--------------------------------------------------------------------------\n    self.myid = myid\n\n\n\n    #--------------------------------------------------------------------------\n    def startstabilizer( self, stabilizer, delay ):\n    #--------------------------------------------------------------------------\n    \"\"\" Registers and starts a stabilizer function with this peer. \n    The function will be activated every &lt;delay&gt; seconds. \n\n    \"\"\"\n    t = threading.Thread( target = self.__runstabilizer, \n                  args = [ stabilizer, delay ] )\n    t.start()\n\n\n\n    #--------------------------------------------------------------------------\n    def addhandler( self, msgtype, handler ):\n    #--------------------------------------------------------------------------\n    \"\"\" Registers the handler for the given message type with this peer \"\"\"\n    assert len(msgtype) == 4\n    self.handlers[ msgtype ] = handler\n\n\n\n    #--------------------------------------------------------------------------\n    def addrouter( self, router ):\n    #--------------------------------------------------------------------------\n    \"\"\" Registers a routing function with this peer. The setup of routing\n    is as follows: This peer maintains a list of other known peers\n    (in self.peers). The routing function should take the name of\n    a peer (which may not necessarily be present in self.peers)\n    and decide which of the known peers a message should be routed\n    to next in order to (hopefully) reach the desired peer. The router\n    function should return a tuple of three values: (next-peer-id, host,\n    port). If the message cannot be routed, the next-peer-id should be\n    None.\n\n    \"\"\"\n    self.router = router\n\n\n\n    #--------------------------------------------------------------------------\n    def addpeer( self, peerid, host, port ):\n    #--------------------------------------------------------------------------\n    \"\"\" Adds a peer name and host:port mapping to the known list of peers.\n\n    \"\"\"\n    if peerid not in self.peers and (self.maxpeers == 0 or\n                     len(self.peers) &lt; self.maxpeers):\n        self.peers[ peerid ] = (host, int(port))\n        return True\n    else:\n        return False\n\n\n\n    #--------------------------------------------------------------------------\n    def getpeer( self, peerid ):\n    #--------------------------------------------------------------------------\n    \"\"\" Returns the (host, port) tuple for the given peer name \"\"\"\n    assert peerid in self.peers    # maybe make this just a return NULL?\n    return self.peers[ peerid ]\n\n\n\n    #--------------------------------------------------------------------------\n    def removepeer( self, peerid ):\n    #--------------------------------------------------------------------------\n    \"\"\" Removes peer information from the known list of peers. \"\"\"\n    if peerid in self.peers:\n        del self.peers[ peerid ]\n\n\n\n    #--------------------------------------------------------------------------\n    def addpeerat( self, loc, peerid, host, port ):\n    #--------------------------------------------------------------------------\n    \"\"\" Inserts a peer's information at a specific position in the \n    list of peers. The functions addpeerat, getpeerat, and removepeerat\n    should not be used concurrently with addpeer, getpeer, and/or \n    removepeer. \n\n    \"\"\"\n    self.peers[ loc ] = (peerid, host, int(port))\n\n\n\n    #--------------------------------------------------------------------------\n    def getpeerat( self, loc ):\n    #--------------------------------------------------------------------------\n    if loc not in self.peers:\n        return None\n    return self.peers[ loc ]\n\n\n\n    #--------------------------------------------------------------------------\n    def removepeerat( self, loc ):\n    #--------------------------------------------------------------------------\n    removepeer( self, loc ) \n\n\n\n    #--------------------------------------------------------------------------\n    def getpeerids( self ):\n    #--------------------------------------------------------------------------\n    \"\"\" Return a list of all known peer id's. \"\"\"\n    return self.peers.keys()\n\n\n\n    #--------------------------------------------------------------------------\n    def numberofpeers( self ):\n    #--------------------------------------------------------------------------\n    \"\"\" Return the number of known peer's. \"\"\"\n    return len(self.peers)\n\n\n\n    #--------------------------------------------------------------------------\n    def maxpeersreached( self ):\n    #--------------------------------------------------------------------------\n    \"\"\" Returns whether the maximum limit of names has been added to the\n    list of known peers. Always returns True if maxpeers is set to\n    0.\n\n    \"\"\"\n    assert self.maxpeers == 0 or len(self.peers) &lt;= self.maxpeers\n    return self.maxpeers &gt; 0 and len(self.peers) == self.maxpeers\n\n\n\n    #--------------------------------------------------------------------------\n    def makeserversocket( self, port, backlog=5 ):\n    #--------------------------------------------------------------------------\n    \"\"\" Constructs and prepares a server socket listening on the given \n    port.\n\n    \"\"\"\n    s = socket.socket( socket.AF_INET, socket.SOCK_STREAM )\n    s.setsockopt( socket.SOL_SOCKET, socket.SO_REUSEADDR, 1 )\n    s.bind( ( '', port ) )\n    s.listen( backlog )\n    return s\n\n\n\n    #--------------------------------------------------------------------------\n    def sendtopeer( self, peerid, msgtype, msgdata, waitreply=True ):\n    #--------------------------------------------------------------------------\n    \"\"\"\n    sendtopeer( peer id, message type, message data, wait for a reply )\n     -&gt; [ ( reply type, reply data ), ... ] \n\n    Send a message to the identified peer. In order to decide how to\n    send the message, the router handler for this peer will be called.\n    If no router function has been registered, it will not work. The\n    router function should provide the next immediate peer to whom the \n    message should be forwarded. The peer's reply, if it is expected, \n    will be returned.\n\n    Returns None if the message could not be routed.\n    \"\"\"\n\n    if self.router:\n        nextpid, host, port = self.router( peerid )\n    if not self.router or not nextpid:\n        self.__debug( 'Unable to route %s to %s' % (msgtype, peerid) )\n        return None\n    #host,port = self.peers[nextpid]\n    return self.connectandsend( host, port, msgtype, msgdata,\n                    pid=nextpid,\n                    waitreply=waitreply )\n\n\n\n    #--------------------------------------------------------------------------\n    def connectandsend( self, host, port, msgtype, msgdata, \n            pid=None, waitreply=True ):\n    #--------------------------------------------------------------------------\n    \"\"\"\n    connectandsend( host, port, message type, message data, peer id,\n    wait for a reply ) -&gt; [ ( reply type, reply data ), ... ]\n\n    Connects and sends a message to the specified host:port. The host's\n    reply, if expected, will be returned as a list of tuples.\n\n    \"\"\"\n    msgreply = []\n    try:\n        peerconn = BTPeerConnection( pid, host, port, debug=self.debug )\n        peerconn.senddata( msgtype, msgdata )\n        self.__debug( 'Sent %s: %s' % (pid, msgtype) )\n\n        if waitreply:\n        onereply = peerconn.recvdata()\n        while (onereply != (None,None)):\n            msgreply.append( onereply )\n            self.__debug( 'Got reply %s: %s' \n                  % ( pid, str(msgreply) ) )\n            onereply = peerconn.recvdata()\n        peerconn.close()\n    except KeyboardInterrupt:\n        raise\n    except:\n        if self.debug:\n        traceback.print_exc()\n\n    return msgreply\n\n    # end connectsend method\n\n\n\n    #--------------------------------------------------------------------------\n    def checklivepeers( self ):\n    #--------------------------------------------------------------------------\n    \"\"\" Attempts to ping all currently known peers in order to ensure that\n    they are still active. Removes any from the peer list that do\n    not reply. This function can be used as a simple stabilizer.\n\n    \"\"\"\n    todelete = []\n    for pid in self.peers:\n        isconnected = False\n        try:\n        self.__debug( 'Check live %s' % pid )\n        host,port = self.peers[pid]\n        peerconn = BTPeerConnection( pid, host, port, debug=self.debug )\n        peerconn.senddata( 'PING', '' )\n        isconnected = True\n        except:\n        todelete.append( pid )\n        if isconnected:\n        peerconn.close()\n\n    self.peerlock.acquire()\n    try:\n        for pid in todelete: \n        if pid in self.peers: del self.peers[pid]\n    finally:\n        self.peerlock.release()\n    # end checklivepeers method\n\n\n\n    #--------------------------------------------------------------------------\n    def mainloop( self ):\n    #--------------------------------------------------------------------------\n    s = self.makeserversocket( self.serverport )\n    s.settimeout(2)\n    self.__debug( 'Server started: %s (%s:%d)'\n              % ( self.myid, self.serverhost, self.serverport ) )\n\n    while not self.shutdown:\n        try:\n        self.__debug( 'Listening for connections...' )\n        clientsock, clientaddr = s.accept()\n        clientsock.settimeout(None)\n\n        t = threading.Thread( target = self.__handlepeer,\n                      args = [ clientsock ] )\n        t.start()\n        except KeyboardInterrupt:\n        print 'KeyboardInterrupt: stopping mainloop'\n        self.shutdown = True\n        continue\n        except:\n        if self.debug:\n            traceback.print_exc()\n            continue\n\n    # end while loop\n    self.__debug( 'Main loop exiting' )\n\n    s.close()\n\n    # end mainloop method\n\n# end BTPeer class\n\n\n\n\n# **********************************************************\n\n\n\n\nclass BTPeerConnection:\n\n    #--------------------------------------------------------------------------\n    def __init__( self, peerid, host, port, sock=None, debug=False ):\n    #--------------------------------------------------------------------------\n    # any exceptions thrown upwards\n\n    self.id = peerid\n    self.debug = debug\n\n    if not sock:\n        self.s = socket.socket( socket.AF_INET, socket.SOCK_STREAM )\n        self.s.connect( ( host, int(port) ) )\n    else:\n        self.s = sock\n\n    self.sd = self.s.makefile( 'rw', 0 )\n\n\n    #--------------------------------------------------------------------------\n    def __makemsg( self, msgtype, msgdata ):\n    #--------------------------------------------------------------------------\n    msglen = len(msgdata)\n    msg = struct.pack( \"!4sL%ds\" % msglen, msgtype, msglen, msgdata )\n    return msg\n\n\n    #--------------------------------------------------------------------------\n    def __debug( self, msg ):\n    #--------------------------------------------------------------------------\n    if self.debug:\n        btdebug( msg )\n\n\n    #--------------------------------------------------------------------------\n    def senddata( self, msgtype, msgdata ):\n    #--------------------------------------------------------------------------\n    \"\"\"\n    senddata( message type, message data ) -&gt; boolean status\n\n    Send a message through a peer connection. Returns True on success\n    or False if there was an error.\n    \"\"\"\n\n    try:\n        msg = self.__makemsg( msgtype, msgdata )\n        self.sd.write( msg )\n        self.sd.flush()\n    except KeyboardInterrupt:\n        raise\n    except:\n        if self.debug:\n        traceback.print_exc()\n        return False\n    return True\n\n\n    #--------------------------------------------------------------------------\n    def recvdata( self ):\n    #--------------------------------------------------------------------------\n    \"\"\"\n    recvdata() -&gt; (msgtype, msgdata)\n\n    Receive a message from a peer connection. Returns (None, None)\n    if there was any error.\n    \"\"\"\n\n    try:\n        msgtype = self.sd.read( 4 )\n        if not msgtype: return (None, None)\n\n            lenstr = self.sd.read( 4 )\n        msglen = int(struct.unpack( \"!L\", lenstr )[0])\n        msg = \"\"\n\n        while len(msg) != msglen:\n        data = self.sd.read( min(2048, msglen - len(msg)) )\n        if not len(data):\n            break\n        msg += data\n\n        if len(msg) != msglen:\n        return (None, None)\n\n    except KeyboardInterrupt:\n        raise\n    except:\n        if self.debug:\n        traceback.print_exc()\n        return (None, None)\n\n    return ( msgtype, msg )\n\n    # end recvdata method\n\n\n    #--------------------------------------------------------------------------\n    def close( self ):\n    #--------------------------------------------------------------------------\n    \"\"\"\n    close()\n\n    Close the peer connection. The send and recv methods will not work\n    after this call.\n    \"\"\"\n\n    self.s.close()\n    self.s = None\n    self.sd = None\n\n\n    #--------------------------------------------------------------------------\n    def __str__( self ):\n    #--------------------------------------------------------------------------\n    return \"|%s|\" % peerid\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1542849932, "post_id": 53422071, "comment_id": 93719799, "body": "You do not have list in df2"}, {"owner": {"reputation": 171, "user_id": 3917215, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fc354b48878765431908bbda1239e163?s=128&d=identicon&r=PG&f=1", "display_name": "Osceria", "link": "https://stackoverflow.com/users/3917215/osceria"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1542880488, "post_id": 53422071, "comment_id": 93730481, "body": "list is a column in df1 and its value list1 and list2 are just dropdownlist names ; the accepted values are given in columns list1,list2 in df2. So, the data from column &quot;value&quot; of df1 based on its list value should be checked with df2 list1 &amp; list2 values."}, {"owner": {"reputation": 171, "user_id": 3917215, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fc354b48878765431908bbda1239e163?s=128&d=identicon&r=PG&f=1", "display_name": "Osceria", "link": "https://stackoverflow.com/users/3917215/osceria"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1542887163, "post_id": 53422071, "comment_id": 93734475, "body": "Edited the Question"}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 3917215, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fc354b48878765431908bbda1239e163?s=128&d=identicon&r=PG&f=1", "display_name": "Osceria", "link": "https://stackoverflow.com/users/3917215/osceria"}, "edited": false, "score": 0, "creation_date": 1542882215, "post_id": 53422249, "comment_id": 93731564, "body": "When I try this, I get the error &quot;ValueError: Can only compare identically-labeled Series objects&quot;"}, {"owner": {"reputation": 171, "user_id": 3917215, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fc354b48878765431908bbda1239e163?s=128&d=identicon&r=PG&f=1", "display_name": "Osceria", "link": "https://stackoverflow.com/users/3917215/osceria"}, "edited": false, "score": 0, "creation_date": 1542887170, "post_id": 53422249, "comment_id": 93734481, "body": "Edited the Question"}, {"owner": {"reputation": 197, "user_id": 5202571, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wVsB5skChkE/AAAAAAAAAAI/AAAAAAAAQ7k/-GfEv1o2vgg/photo.jpg?sz=128", "display_name": "leoburgy", "link": "https://stackoverflow.com/users/5202571/leoburgy"}, "reply_to_user": {"reputation": 171, "user_id": 3917215, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fc354b48878765431908bbda1239e163?s=128&d=identicon&r=PG&f=1", "display_name": "Osceria", "link": "https://stackoverflow.com/users/3917215/osceria"}, "edited": false, "score": 0, "creation_date": 1542888071, "post_id": 53422249, "comment_id": 93735005, "body": "@Osceria do you get the same error with the following reproducible datasets: <code>df1 = pd.DataFrame({&#39;col1&#39;: [&quot;A1&quot;, &quot;A2&quot;, &quot;A3&quot;, &quot;A4&quot;, &quot;A5&quot;, &quot;A6&quot;], &#39;col2&#39;: [&quot;B1&quot;, &quot;B2&quot;, &quot;B3&quot;, &quot;B4&quot;, &quot;B5&quot;, &quot;B6&quot;]}) df2 = pd.DataFrame({&#39;col1&#39;: [&quot;A1&quot;, &quot;A2&quot;, &quot;H3&quot;, &quot;A4&quot;, &quot;A5&quot;, &quot;A6&quot;], &#39;col2&#39;: [&quot;B1&quot;, &quot;O5&quot;, &quot;B3&quot;, &quot;B4&quot;, &quot;66&quot;, &quot;C6&quot;]})</code>"}, {"owner": {"reputation": 157, "user_id": 8489404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QebrR.jpg?s=128&g=1", "display_name": "lieblos", "link": "https://stackoverflow.com/users/8489404/lieblos"}, "edited": false, "score": 0, "creation_date": 1542890866, "post_id": 53422249, "comment_id": 93736520, "body": "It&#39;s because your <code>df1</code> and <code>df2</code> had different columns, right? I noticed you edited the question now, does it work with those dataframes?"}, {"owner": {"reputation": 157, "user_id": 8489404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QebrR.jpg?s=128&g=1", "display_name": "lieblos", "link": "https://stackoverflow.com/users/8489404/lieblos"}, "edited": false, "score": 0, "creation_date": 1542890985, "post_id": 53422249, "comment_id": 93736587, "body": "If I run what I answered with the dataframes above, it seems like it works."}, {"owner": {"reputation": 171, "user_id": 3917215, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fc354b48878765431908bbda1239e163?s=128&d=identicon&r=PG&f=1", "display_name": "Osceria", "link": "https://stackoverflow.com/users/3917215/osceria"}, "edited": false, "score": 0, "creation_date": 1542895747, "post_id": 53422249, "comment_id": 93739210, "body": "@lieblos -Yes, df1 has one extra column ID whereas df2 just has 2 cols"}], "tags": [], "owner": {"reputation": 157, "user_id": 8489404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QebrR.jpg?s=128&g=1", "display_name": "lieblos", "link": "https://stackoverflow.com/users/8489404/lieblos"}, "is_accepted": false, "score": 0, "last_activity_date": 1542846025, "creation_date": 1542846025, "answer_id": 53422249, "question_id": 53422071, "link": "https://stackoverflow.com/questions/53422071/compare-dataframe-columns-with-conditions/53422249#53422249", "title": "Compare dataframe columns with conditions", "body": "<p>Something like this should do the trick but there may be an easier way.</p>\n\n<pre><code>diff = pd.concat([df1[col] == df2[col] for col in df1], axis=1)\n\ndef m(row):\n    mismatches = []\n    for col in diff.columns:\n        if not row[col]:\n            mismatches.append(col)\n    if mismatches == []:\n        return 'No mismatch'\n    return 'Mismatches: ' + ', '.join(mismatches)\n\ndf1['Error'] = diff.apply(m, axis=1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 171, "user_id": 3917215, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fc354b48878765431908bbda1239e163?s=128&d=identicon&r=PG&f=1", "display_name": "Osceria", "link": "https://stackoverflow.com/users/3917215/osceria"}, "edited": false, "score": 0, "creation_date": 1542897459, "post_id": 53430691, "comment_id": 93740201, "body": "m = pd.DataFrame({c: ~df1[c].isin(df2[c]) for c in [&#39;col1&#39;,&#39;col2&#39;]}) - col1 and col2 are hard-coded. When I try to pass the column names directly from the dataframe using df.cols,    it says the below error &quot;ValueError: Must pass DataFrame with boolean values only&quot; - Any help with this?"}, {"owner": {"reputation": 171, "user_id": 3917215, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fc354b48878765431908bbda1239e163?s=128&d=identicon&r=PG&f=1", "display_name": "Osceria", "link": "https://stackoverflow.com/users/3917215/osceria"}, "edited": false, "score": 0, "creation_date": 1542897710, "post_id": 53430691, "comment_id": 93740334, "body": "code should work if I pass all the columns from the dataframe like this                       lovcols = df2.columns                                                                                              m = pd.DataFrame({c: ~dfCSDataset[c].isin(dfLOVRules[c]) for c in [lovcols]}"}, {"owner": {"reputation": 619491, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "reply_to_user": {"reputation": 171, "user_id": 3917215, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fc354b48878765431908bbda1239e163?s=128&d=identicon&r=PG&f=1", "display_name": "Osceria", "link": "https://stackoverflow.com/users/3917215/osceria"}, "edited": false, "score": 0, "creation_date": 1542897838, "post_id": 53430691, "comment_id": 93740405, "body": "@Osceria - yes, you are right. You can also pass columns to dict comprehension like  <code>m = pd.DataFrame({c: ~df1[c].isin(df2[c]) for c in df2.columns})</code>"}], "tags": [], "owner": {"reputation": 619491, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "is_accepted": true, "score": 0, "last_activity_date": 1542888511, "creation_date": 1542888511, "answer_id": 53430691, "question_id": 53422071, "link": "https://stackoverflow.com/questions/53422071/compare-dataframe-columns-with-conditions/53430691#53430691", "title": "Compare dataframe columns with conditions", "body": "<p>Create helper DataFrame with dictionary comprehension and comparing with <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.isin.html\" rel=\"nofollow noreferrer\"><code>isin</code></a>:</p>\n\n<pre><code>m = pd.DataFrame({c: ~df1[c].isin(df2[c]) for c in ['col1','col2']})\nprint (m)\n    col1   col2\n0  False  False\n1  False   True\n2   True  False\n3  False  False\n4  False   True\n5  False   True\n</code></pre>\n\n<p>And then <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html\" rel=\"nofollow noreferrer\"><code>numpy.where</code></a> with mask by <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.any.html\" rel=\"nofollow noreferrer\"><code>any</code></a> for test at least one <code>True</code> per rows and <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.dot.html\" rel=\"nofollow noreferrer\"><code>dot</code></a> with matrix multiplication for get column names:</p>\n\n<pre><code>df1['Error'] = np.where(m.any(axis=1), \n                        m.dot(m.columns + ', ').str.rstrip(', ') + ' mismatch with df2', \n                       'No mismatch with df2')\nprint (df1)\n   ID col1 col2                   Error\n0   1   A1   B1    No mismatch with df2\n1   2   A2   B2  col2 mismatch with df2\n2   3   A3   B3  col1 mismatch with df2\n3   4   A4   B4    No mismatch with df2\n4   5   A5   B5  col2 mismatch with df2\n5   6   A6   B6  col2 mismatch with df2\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 3917215, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fc354b48878765431908bbda1239e163?s=128&d=identicon&r=PG&f=1", "display_name": "Osceria", "link": "https://stackoverflow.com/users/3917215/osceria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 53430691, "answer_count": 2, "score": 1, "last_activity_date": 1542888511, "creation_date": 1542844441, "last_edit_date": 1542887151, "question_id": 53422071, "link": "https://stackoverflow.com/questions/53422071/compare-dataframe-columns-with-conditions", "title": "Compare dataframe columns with conditions", "body": "<p>I have 2 dataframes as below:</p>\n\n<p>df1:</p>\n\n<pre><code>ID   col1   col2    \n1     A1     B1    \n2     A2     B2     \n3     A3     B3   \n4     A4     B4   \n5     A5     B5    \n6     A6     B6    \n</code></pre>\n\n<p>df2:</p>\n\n<pre><code>col1   col2   \n A1     B1     \n A2     O5   \n H3     B3     \n A4     B4    \n A5     66     \n A6     C6     \n</code></pre>\n\n<p>Expected Result: I would like to generate a result df based on the condition -  Each value in col1,col2 of df1 should exist in col1,col2 values of df2</p>\n\n<p>Expected Result df:</p>\n\n<pre><code>ID   col1   col2     Error\n1     A1     B1      No mismatch with df2\n2     A2     B2      col2 mismatch with df2\n3     A3     B3      col1 mismatch with df2\n4     A4     B4      No mismatch with df2\n5     A5     B5      col2 mismatch with df2\n6     A6     B6      col2 mismatch with df2\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1542844479, "post_id": 53422067, "comment_id": 93718640, "body": "What&#39;s your question?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1542845499, "post_id": 53422067, "comment_id": 93718934, "body": "You can catch that with a try-except, just like with any other exception, but it&#39;s not the kind of thing you should be catching in most situations. Why do you want to do that? If you&#39;re trying to write a function with a flexible signature, you should be looking at optional arguments and <code>*args</code>/<code>**kwargs</code> catchall arguments."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1542846279, "post_id": 53422067, "comment_id": 93719113, "body": "&quot;How to fix it if I can&#39;t change assert functions&quot; - the way you&#39;re using <code>assert</code> makes no sense."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1542846440, "post_id": 53422067, "comment_id": 93719145, "body": "The second argument to <code>assert</code> is an assertion failure message, to be used if the first argument is false. It is not used if evaluating the first argument throws an exception, and it is not compared to the exception message in any way. It doesn&#39;t make sense to report an assertion failure with message &quot;result - missing 1 required positional&quot; if <code>sum([16,16]) == 32</code> is false."}, {"owner": {"reputation": 1, "user_id": 10623051, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dUTxukh26j0/AAAAAAAAAAI/AAAAAAAAAAc/ad4qOM_yEzA/photo.jpg?sz=128", "display_name": "Micha\u0142 Ha\u0142ucha", "link": "https://stackoverflow.com/users/10623051/micha%c5%82-ha%c5%82ucha"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1542849487, "post_id": 53422067, "comment_id": 93719710, "body": "Ok, thank You. This is example of my exercise. I think that in this exercise is mistake, because i can&#39;t edit assert function. I can only modify my def. If i get list and i have to use function with two arguments... it&#39;s no sens. Finally, exercise like this is on the very popular page about python. (This code is short version to simply clarify problem)"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1542852606, "post_id": 53422067, "comment_id": 93720341, "body": "It sounds like you&#39;re probably supposed to rewrite <code>sum</code> to use optional arguments or <code>*args</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10623051, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dUTxukh26j0/AAAAAAAAAAI/AAAAAAAAAAc/ad4qOM_yEzA/photo.jpg?sz=128", "display_name": "Micha\u0142 Ha\u0142ucha", "link": "https://stackoverflow.com/users/10623051/micha%c5%82-ha%c5%82ucha"}, "is_accepted": false, "score": 0, "last_activity_date": 1542885718, "creation_date": 1542885718, "answer_id": 53429858, "question_id": 53422067, "link": "https://stackoverflow.com/questions/53422067/catch-exception-missing-1-required-positional-argument-if-i-dont-send-two-arg/53429858#53429858", "title": "Catch exception \u201cmissing 1 required positional argument\u201d if I don&#39;t send two arguments?", "body": "<p>I found the solution. I just put second argument optional. In this situation I don't have to modify my main function. </p>\n\n<pre><code>def sum (n,m=0):\nif m!=0:\n    return n + m\nelif type(n)==list:\n    return n[0]+n[1]\n\nif __name__=='__main__':\n    assert sum(16, 15) == 31, \"EXAMPLE\"\n    assert sum([16, 16]) == 32, \"result - missing 1 required positional\"\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10623051, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dUTxukh26j0/AAAAAAAAAAI/AAAAAAAAAAc/ad4qOM_yEzA/photo.jpg?sz=128", "display_name": "Micha\u0142 Ha\u0142ucha", "link": "https://stackoverflow.com/users/10623051/micha%c5%82-ha%c5%82ucha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1542885718, "creation_date": 1542844394, "last_edit_date": 1542845797, "question_id": 53422067, "link": "https://stackoverflow.com/questions/53422067/catch-exception-missing-1-required-positional-argument-if-i-dont-send-two-arg", "title": "Catch exception \u201cmissing 1 required positional argument\u201d if I don&#39;t send two arguments?", "body": "<p>Is it possible to catch exception \u201cmissing 1 required positional argument\u201d if I don't send two arguments? How to fix it if I can't change assert functions.</p>\n\n<pre><code>def sum (n,m):\n   return n+m\nif __name__ == '__main__':\n   assert sum(16,15) == 31, \"EXAMPLE\"\n   assert sum([16,16]) == 32, \"result - missing 1 required positional\"\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "for-loop", "permutation", "itertools"], "answers": [{"comments": [{"owner": {"reputation": 1205, "user_id": 3933052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8hg4k.jpg?s=128&g=1", "display_name": "godot", "link": "https://stackoverflow.com/users/3933052/godot"}, "edited": false, "score": 1, "creation_date": 1542845512, "post_id": 53422075, "comment_id": 93718938, "body": "you have to start the range of your outer loop at 1 if you don&#39;t want the empty element <code>&#39;&#39;</code>"}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 3, "last_activity_date": 1542844455, "creation_date": 1542844455, "answer_id": 53422075, "question_id": 53422054, "link": "https://stackoverflow.com/questions/53422054/how-can-i-generate-a-list-of-all-possible-permutations-in-range/53422075#53422075", "title": "How can I generate a list of all possible permutations in range", "body": "<p>Just use a <em>nested</em> <code>for</code> loop and remember to add 1 to your range argument to include permutations the same length as your input string:</p>\n\n<pre><code>from itertools import permutations\n\ns = 'EDCMI'\n\nfor i in range(len(s) + 1):\n    for p in permutations(s, i):\n        print(''.join(p))\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10017509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ee5f640ee7e0e8e6806ebe5cd9beb90?s=128&d=identicon&r=PG&f=1", "display_name": "progthematic", "link": "https://stackoverflow.com/users/10017509/progthematic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 53422075, "answer_count": 1, "score": 2, "last_activity_date": 1542880426, "creation_date": 1542844269, "last_edit_date": 1542880426, "question_id": 53422054, "link": "https://stackoverflow.com/questions/53422054/how-can-i-generate-a-list-of-all-possible-permutations-in-range", "title": "How can I generate a list of all possible permutations in range", "body": "<p>I would like to generate words list in a specific way. I would like to find all permutations for my variable l='EDCMI' not only for 5 characters but for 4 characters, 3 characters etc.</p>\n"}, {"tags": ["python", "rotation", "resize", "python-imaging-library", "exif"], "owner": {"reputation": 21, "user_id": 10492813, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qdRBRqdQpl0/AAAAAAAAAAI/AAAAAAAAAG0/0ciTxMFA_8s/photo.jpg?sz=128", "display_name": "Johnny Cheng", "link": "https://stackoverflow.com/users/10492813/johnny-cheng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 412, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1542844193, "creation_date": 1542844193, "question_id": 53422044, "link": "https://stackoverflow.com/questions/53422044/preserve-exif-after-image-resize-and-rotation-then-save-in-python", "title": "Preserve EXIF after image resize and rotation then save in python", "body": "<p>I've read another thread on SO regarding image rotation here:\n<a href=\"https://stackoverflow.com/questions/4228530/pil-thumbnail-is-rotating-my-image\">PIL thumbnail is rotating my image?</a></p>\n\n<p>and I've read another thread on SO about EXIF preservation here:\n<a href=\"https://stackoverflow.com/questions/17042602/preserve-exif-data-of-image-with-pil-when-resizecreate-thumbnail\">Preserve exif data of image with PIL when resize(create thumbnail)</a></p>\n\n<p>Unfortunately, after implementing the suggestions above, it seems that I can only have either:\n1) a saved rotated image without EXIF data \nor \n2) a non-rotated image with EXIF data \nbut it seems that I can't have both.</p>\n\n<p>I'm hoping I can get some help to fix what I thought was a real simple problem, but has been turning into a scream-fest against my computer for the past few hours.</p>\n\n<p>Here's the relevant parts of my code:</p>\n\n<pre><code>from PIL import Image, ExifTags\nimport piexif\ncurrImage = Image.open(inFileName)\nexif_dict = piexif.load(currImage.info[\"exif\"])\n\nfor orientation in ExifTags.TAGS.keys():\n    if ExifTags.TAGS[orientation]=='Orientation':\n        break\nexif=dict(currImage._getexif().items())\n\nif exif[orientation] == 3:\n    currImage=currImage.rotate(180, expand=True)\nelif exif[orientation] == 6:\n    currImage=currImage.rotate(270, expand=True)\nelif exif[orientation] == 8:\n    currImage=currImage.rotate(90, expand=True)\n\ncurrWidth, currHeight = currImage.size\n\n# Here is where I can only do one or the other.  Don't know enough about how to get both\nexif_bytes = piexif.dump(exif_dict)\n#exif_bytes = piexif.dump(exif)\n\nmaxImageDimension = [1280, 640, 360, 160]\nfor imgDim in maxImageDimension:\n    thumbRatio = imgDim / max(currWidth, currHeight)\n    # note that because Python's round function is mathematically incorrect, I have to do the following workaround\n    newWidth = int(Decimal(str(thumbRatio * currWidth)).quantize(Decimal('0.'), rounding=ROUND_UP))\n    newHeight = int(Decimal(str(thumbRatio * currHeight)).quantize(Decimal('0.'), rounding=ROUND_UP))\n    # copy currImage object\n    newImage = currImage\n    # note that I have to do resize method because thumbnail method has same rounding problem\n    newImage = newImage.resize((newWidth, newHeight))\n    # save the thumbnail\n    if imgDim == 1280:\n        outFileName = destinationDir + '\\\\' + file[:len(file)-4] + '.jpg'\n    else:\n        outFileName = destinationDir + '\\\\' + file[:len(file)-4] + '-' + str(newWidth) + 'x' + str(newHeight) + '.jpg'\n    print('Writing: ' + outFileName)\n\n    # Here is where I have to choose between exif or exif_bytes when saving but I can only get one or the other desired result\n    newImage.save(outFileName, exif=exif_bytes)  \n\nprint('\\n')\n\ncurrImage.close()\nnewImage.close()\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "directory", "windows-explorer", "windows-security"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10688236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76649f8852458dc1e73930208d74d02?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nicotina", "link": "https://stackoverflow.com/users/10688236/c-nicotina"}, "edited": false, "score": 0, "creation_date": 1543265744, "post_id": 53422143, "comment_id": 93847731, "body": "Perfect, that does it! If I add the connection and then try to open to that directory it will work and authenticate perfectly fine."}], "tags": [], "owner": {"reputation": 224, "user_id": 8896855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/42KMh.jpg?s=128&g=1", "display_name": "AlecZ", "link": "https://stackoverflow.com/users/8896855/alecz"}, "is_accepted": true, "score": 0, "last_activity_date": 1542845058, "creation_date": 1542845058, "answer_id": 53422143, "question_id": 53422031, "link": "https://stackoverflow.com/questions/53422031/prompt-user-to-login-to-protected-directory-in-python/53422143#53422143", "title": "prompt user to login to protected directory in python", "body": "<p>If you <a href=\"https://pypi.org/project/pywin32/\" rel=\"nofollow noreferrer\">install win32</a>, you can connect to network resources with a prompted username and password.  It's not a simple solution (like an <code>os</code> call), but you can use the wnet_connect method from <a href=\"http://code.activestate.com/recipes/442521-windows-network-file-transfers/\" rel=\"nofollow noreferrer\">this example</a> to pass a username/password in your <code>except</code> call.</p>\n\n<p>It boils down to:</p>\n\n<pre><code>win32wnet.WNetAddConnection2(0, None, full_path, None, username, password)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10688236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76649f8852458dc1e73930208d74d02?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nicotina", "link": "https://stackoverflow.com/users/10688236/c-nicotina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "accepted_answer_id": 53422143, "answer_count": 1, "score": 0, "last_activity_date": 1542845058, "creation_date": 1542844102, "question_id": 53422031, "link": "https://stackoverflow.com/questions/53422031/prompt-user-to-login-to-protected-directory-in-python", "title": "prompt user to login to protected directory in python", "body": "<p>I have a script that searches through a protected directory and opens file explorer to a selected location. The problem is that it only works after the user has already logged into the directory.</p>\n\n<p>Example of what sort of thing the code is doing below:</p>\n\n<pre><code>subfolder = input(\"give a subfolder\")\n\nif os.path.isdir(\"\\\\\\\\directory\\\\path\\\\\"):\n    #run some stuff\n    os.startfile(\"\\\\\\\\directory\\\\path\\\\\" + subfolder)\nelse:\n    print('error message- unable to connect to drive. Please log in')\n</code></pre>\n\n<p>If the user has opened \"\\\\directory\\path\" on their own and entered their username/password into the windows security prompt, then my code works. If they haven't, I can't find the directory path.</p>\n\n<p>Is there a way to open to the <a href=\"https://i.stack.imgur.com/VZkgE.png\" rel=\"nofollow noreferrer\">windows security prompt</a> from Python? Ideally user puts in username and password and then can continue to the directory.</p>\n"}, {"tags": ["python", "nlp", "spacy", "sentence"], "comments": [{"owner": {"reputation": 1504, "user_id": 5720196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gTlyY.jpg?s=128&g=1", "display_name": "Srce Cde", "link": "https://stackoverflow.com/users/5720196/srce-cde"}, "edited": false, "score": 0, "creation_date": 1542895011, "post_id": 53422012, "comment_id": 93738780, "body": "What is the expected output?"}, {"owner": {"reputation": 3706, "user_id": 1847419, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/4oKLO.jpg?s=128&g=1", "display_name": "fnl", "link": "https://stackoverflow.com/users/1847419/fnl"}, "edited": false, "score": 0, "creation_date": 1542968647, "post_id": 53422012, "comment_id": 93762538, "body": "While this does not answer the question, as this is about SpaCy, I may suggest  my own sentence segmentation and tokenization tool, <a href=\"https://github.com/fnl/segtok\" rel=\"nofollow noreferrer\">segtok</a>, and its latest incarnation, &quot;segtok version 2&quot;, <a href=\"https://github.com/fnl/syntok\" rel=\"nofollow noreferrer\">syntok</a>. Neither splits sentences at enumerations, and syntok even fixes cases like &quot;This is a sentence.And here we forgot a space.&quot;, while the token stream retains the original input, and being a very performant, production-ready, high-quality sentence segmenter for at least English, Spanish, and German. You might want to take a look."}], "answers": [{"tags": [], "owner": {"reputation": 1504, "user_id": 5720196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gTlyY.jpg?s=128&g=1", "display_name": "Srce Cde", "link": "https://stackoverflow.com/users/5720196/srce-cde"}, "is_accepted": false, "score": 0, "last_activity_date": 1542950258, "last_edit_date": 1542950258, "creation_date": 1542896405, "answer_id": 53432956, "question_id": 53422012, "link": "https://stackoverflow.com/questions/53422012/preventing-spacy-splitting-paragraph-numbers-into-sentences/53432956#53432956", "title": "Preventing spaCy splitting paragraph numbers into sentences", "body": "<p>Something like this?</p>\n\n<pre><code>text = [\"\"\"3. English law takes a dim view of stealing stuff from the shops. Some may argue that this is a pity. Are you upto something?\"\"\", \n        \"\"\"4. It's hilarious and I think this can be more of a political moment. Don't you think so? Will Robots replace humans?\"\"\"]\nfor i in text:\n    doc = nlp(i)\n    span = doc[0:5]\n    span.merge()\n    for sent in doc.sents:\n        print(\"****\", sent.text)\n    print(\"\\n\")\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>**** 3. English law takes a dim view of stealing stuff from the shops.\n**** Some may argue that this is a pity.\n**** Are you upto something?\n\n\n**** 4. It's hilarious and I think this can be more of a political moment.\n**** Don't you think so?\n**** Will Robots replace humans?\n</code></pre>\n\n<p>Reference: <a href=\"https://spacy.io/api/span#merge\" rel=\"nofollow noreferrer\">span.merge()</a></p>\n"}], "owner": {"reputation": 156, "user_id": 6248746, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/518821320ab73dadf1b7bec06713a0e7?s=128&d=identicon&r=PG", "display_name": "DanielH", "link": "https://stackoverflow.com/users/6248746/danielh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 809, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542950258, "creation_date": 1542843927, "question_id": 53422012, "link": "https://stackoverflow.com/questions/53422012/preventing-spacy-splitting-paragraph-numbers-into-sentences", "title": "Preventing spaCy splitting paragraph numbers into sentences", "body": "<p>I'm using spaCy to do sentence segmentation on texts that using paragraph numbering, for example:</p>\n\n<pre><code>text = '3. English law takes a dim view of stealing stuff from the shops. Some may argue that this is a pity.'\n</code></pre>\n\n<p>I'm trying to force spaCy's sentence segmenter to not split the <code>3.</code> into a sentence of it's own. </p>\n\n<p>At the moment, the following code returns three separate sentences:</p>\n\n<pre><code>nlp = spacy.load(\"en_core_web_sm\")\n\ntext = \"\"\"3. English law takes a dim view of stealing stuff from the shops. Some may argue that this is a pity.\"\"\"\ndoc = nlp(text)\nfor sent in doc.sents:\n    print(\"****\", sent.text)\n</code></pre>\n\n<p>This returns:</p>\n\n<pre><code>**** 3.\n**** English law takes a dim view of stealing stuff from the shops.\n**** Some may argue that this is a pity.\n</code></pre>\n\n<p>I've been trying to stop this from happening by passing a custom rule into the pipeline before the parser:</p>\n\n<pre><code>if token.text == r'\\d\\.':\n    doc[token.i+1].is_sent_start = False\n</code></pre>\n\n<p>This is doesn't seem to have any effect. Has anyone come across this problem before?</p>\n"}, {"tags": ["python", "unicode", "utf-8", "utf"], "answers": [{"comments": [{"owner": {"reputation": 324088, "user_id": 1256452, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa1648baa6108c85886312af93bb32c0?s=128&d=identicon&r=PG", "display_name": "torek", "link": "https://stackoverflow.com/users/1256452/torek"}, "edited": false, "score": 1, "creation_date": 1542845007, "post_id": 53422051, "comment_id": 93718791, "body": "Note also that the OP can use <code>&#39;&#39;.join(&#39;{:08b}&#39;.format(i) for i in byte)</code> on the original byte-array object. This is pretty similar: we take the byte-array apart, one byte at a time, and format each one using <code>:08b</code> to get an eight-bit zero-filled string representation, then join all the strings without whitespace."}], "tags": [], "owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 3, "last_activity_date": 1542844233, "creation_date": 1542844233, "answer_id": 53422051, "question_id": 53422008, "link": "https://stackoverflow.com/questions/53422008/how-to-turn-a-binary-string-into-a-byte/53422051#53422051", "title": "How to turn a binary string into a byte?", "body": "<pre><code>&gt;&gt;&gt; bytes(int(s[i:i+8], 2) for i in range(0, len(s), 8)).decode('utf-8')\n'\u00e0'\n</code></pre>\n\n<p>There are multiple parts to this. The <code>bytes</code> constructor creates a byte string from a sequence of integers. The integers are formed from strings using <code>int</code> with a base of 2. The <code>range</code> combined with the slicing peels off 8 characters at a time. Finally <code>decode</code> converts those bytes back into Unicode characters.</p>\n"}, {"tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": false, "score": 0, "last_activity_date": 1542844314, "creation_date": 1542844314, "answer_id": 53422061, "question_id": 53422008, "link": "https://stackoverflow.com/questions/53422008/how-to-turn-a-binary-string-into-a-byte/53422061#53422061", "title": "How to turn a binary string into a byte?", "body": "<p>you need your second bits to be <code>s[8:16]</code> (or just <code>s[8:]</code>) otherwise you get <code>0100000</code></p>\n\n<p>you also need to convert you \"bit string\" back to an integer before thinking of it as a byte with <code>int(\"0010101\",2)</code></p>\n\n<pre><code>s = '1100001110100000'\nvalue1 =  bytearray([int(s[:8],2), # bits 0..7 (8 total)\n                     int(s[8:],2)] # bits 8..15 (8 total)\n) \nprint(value1.decode(\"utf8\"))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": false, "score": 0, "last_activity_date": 1542871759, "creation_date": 1542871759, "answer_id": 53425854, "question_id": 53422008, "link": "https://stackoverflow.com/questions/53422008/how-to-turn-a-binary-string-into-a-byte/53425854#53425854", "title": "How to turn a binary string into a byte?", "body": "<p>Convert the base-2 value back to an integer with <code>int(s,2)</code>, convert that integer to a number of bytes (<code>int.to_bytes</code>) based on the original length divided by 8 and big-endian conversion to keep the bytes in the right order, then <code>.decode()</code> it (default in Python 3 is <code>utf8</code>):</p>\n\n<pre><code>&gt;&gt;&gt; s = '1100001110100000'\n&gt;&gt;&gt; int(s,2)\n50080\n&gt;&gt;&gt; int(s,2).to_bytes(len(s)//8,'big')\nb'\\xc3\\xa0'\n&gt;&gt;&gt; int(s,2).to_bytes(len(s)//8,'big').decode()\n'\u00e0'\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4199671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d076eed70d8f968d7e861e3ad7f82f4?s=128&d=identicon&r=PG&f=1", "display_name": "jatrp5", "link": "https://stackoverflow.com/users/4199671/jatrp5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1542871759, "creation_date": 1542843893, "question_id": 53422008, "link": "https://stackoverflow.com/questions/53422008/how-to-turn-a-binary-string-into-a-byte", "title": "How to turn a binary string into a byte?", "body": "<p>If I take the letter '\u00e0' and encode it in UTF-8 I obtain the following result:</p>\n\n<pre><code>'\u00e0'.encode('utf-8')\n&gt;&gt; b'\\xc3\\xa0'\n</code></pre>\n\n<p>Now from a bytearray I would like to convert '\u00e0' into a binary string and turn it back into '\u00e0'. To do so I execute the following code:</p>\n\n<pre><code>byte = bytearray('\u00e0','utf-8')\nfor x in byte:\n    print(bin(x))\n</code></pre>\n\n<p>I get <code>0b11000011</code>and<code>0b10100000</code>, which is 195 and 160. Then, I fuse them together and take the <code>0b</code> part out. Now I execute this code:</p>\n\n<pre><code>s = '1100001110100000'\nvalue1 =  s[0:8].encode('utf-8')\nvalue2 =  s[9:16].encode('utf-8')\nvalue = value1 + value2\nprint(chr(int(value, 2)))\n&gt;&gt; \u61a0\n</code></pre>\n\n<p>No matter how I develop the later part I get symbols and never seem to be able to get back my '\u00e0'. I would like to know why is that? And how can I get an '\u00e0'.</p>\n"}, {"tags": ["python", "arrays", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 3144, "user_id": 10640534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25583304ddb01032ed802cbd87b17d53?s=128&d=identicon&r=PG&f=1", "display_name": "Patol75", "link": "https://stackoverflow.com/users/10640534/patol75"}, "is_accepted": false, "score": 0, "last_activity_date": 1542850723, "last_edit_date": 1542850723, "creation_date": 1542845702, "answer_id": 53422209, "question_id": 53422006, "link": "https://stackoverflow.com/questions/53422006/how-to-do-this-operation-in-numpy-chaining-of-tiling-operation/53422209#53422209", "title": "how to do this operation in numpy (chaining of tiling operation)?", "body": "<p>I am not entirely sure if this is what you want; here each tuple in the call to func() contains first the range and then the repeat. </p>\n\n<pre><code>import numpy\n\n\ndef func(tups):\n    Arr = numpy.empty(numpy.sum([ele[0] * ele[1] for ele in tups]), dtype=int)\n    i = 0\n    for ele in tups:\n        Arr[i:i + ele[0] * ele[1]] = numpy.tile(numpy.arange(ele[0]), ele[1])\n        i += ele[0] * ele[1]\n    return Arr\n\n\narr = func([(2, 3), (3, 4)])\nprint(arr)\n# [0 1 0 1 0 1 0 1 2 0 1 2 0 1 2 0 1 2]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6675, "user_id": 875295, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1rKE0.jpg?s=128&g=1", "display_name": "lezebulon", "link": "https://stackoverflow.com/users/875295/lezebulon"}, "edited": false, "score": 0, "creation_date": 1542882471, "post_id": 53422328, "comment_id": 93731742, "body": "Thanks!However it&#39;s failing for some combinations: a = [4, 0, 1,0] b = [35, 72, 5, 72] cycles(a,b)  I think it has to do with the 0 at the end of &#39;a&#39; array"}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "reply_to_user": {"reputation": 6675, "user_id": 875295, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1rKE0.jpg?s=128&g=1", "display_name": "lezebulon", "link": "https://stackoverflow.com/users/875295/lezebulon"}, "edited": false, "score": 0, "creation_date": 1542883655, "post_id": 53422328, "comment_id": 93732456, "body": "@lezebulon Rather pathological example and also easy to address. Just filter out the 0 positions. For example, add the line <code>steps = steps[steps.astype(bool)]</code> after the first line of the function body."}], "tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": true, "score": 3, "last_activity_date": 1542846720, "creation_date": 1542846720, "answer_id": 53422328, "question_id": 53422006, "link": "https://stackoverflow.com/questions/53422006/how-to-do-this-operation-in-numpy-chaining-of-tiling-operation/53422328#53422328", "title": "how to do this operation in numpy (chaining of tiling operation)?", "body": "<p>Here is a vectorized solution:</p>\n\n<pre><code>def cycles(spec):\n    steps = np.repeat(*spec)\n    ps = steps.cumsum()\n    psj = np.zeros(ps[-1], int)\n    psj[ps[:-1]] = steps[:-1]\n    return np.arange(ps[-1]) - psj.cumsum()\n</code></pre>\n\n<p>Demo:</p>\n\n<pre><code>&gt;&gt;&gt; cycles(((2,3),(2,4)))\narray([0, 1, 0, 1, 0, 1, 2, 0, 1, 2, 0, 1, 2, 0, 1, 2])\n</code></pre>\n"}], "owner": {"reputation": 6675, "user_id": 875295, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1rKE0.jpg?s=128&g=1", "display_name": "lezebulon", "link": "https://stackoverflow.com/users/875295/lezebulon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 53422328, "answer_count": 2, "score": 2, "last_activity_date": 1542850723, "creation_date": 1542843885, "last_edit_date": 1542845848, "question_id": 53422006, "link": "https://stackoverflow.com/questions/53422006/how-to-do-this-operation-in-numpy-chaining-of-tiling-operation", "title": "how to do this operation in numpy (chaining of tiling operation)?", "body": "<p>I'm trying to do fast generation of numpy array, possibly without passing through python.</p>\n\n<p>I want to build an 1D index numpy array that would take this as an input:</p>\n\n<p><code>[2,3]</code> and this <code>[2,4]</code> and would return this</p>\n\n<pre><code> [0,1,0,1,0,1,2,0,1,2,0,1,2,0,1,2]\n</code></pre>\n\n<p>Explanation:</p>\n\n<p>I iterate from 0 to 2 (so [0,1] array) and repeat it 2 times : <code>[0,1,0,1]</code></p>\n\n<p>Then I iterate from 0 to 3 (so [0,1,2] array) and repeat it 4 times : <code>[0,1,2,0,1,2,0,1,2,0,1,2]</code>\nThen I flattened everything.</p>\n\n<p>Is there a way to do this fully in numpy?\nFor now I'm building each table separately in numpy by using np.tile() and flattening everything afterwards but I feel like there is a more efficient way that would only translate to C functions calls and no python</p>\n"}, {"tags": ["python", "pickle", "pytorch", "torch", "torchtext"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 5162955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c4f4c5695afd37acc6ba03ec6b8d9bd?s=128&d=identicon&r=PG&f=1", "display_name": "chj", "link": "https://stackoverflow.com/users/5162955/chj"}, "is_accepted": true, "score": 1, "last_activity_date": 1548747502, "last_edit_date": 1548747502, "creation_date": 1548745772, "answer_id": 54415604, "question_id": 53421999, "link": "https://stackoverflow.com/questions/53421999/how-to-save-torchtext-dataset/54415604#54415604", "title": "how to save torchtext Dataset?", "body": "<p>You can use dill instead of pickle. It works for me.\nYou can save a torchtext Field like</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>TEXT = data.Field(sequential=True, tokenize=tokenizer, lower=True,fix_length=200,batch_first=True)\nwith open(\"model/TEXT.Field\",\"wb\")as f:\n     dill.dump(TEXT,f)\n</code></pre>\n\n<p>And load a Field like</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>with open(\"model/TEXT.Field\",\"rb\")as f:\n     TEXT=dill.load(f)\n</code></pre>\n\n<p>The offical code suppport is under development\uff0cyou can follow <a href=\"https://github.com/pytorch/text/issues/451\" rel=\"nofollow noreferrer\">https://github.com/pytorch/text/issues/451</a> and <a href=\"https://github.com/pytorch/text/issues/73\" rel=\"nofollow noreferrer\">https://github.com/pytorch/text/issues/73</a> .</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11865445, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-I9ZcNcuX8iE/AAAAAAAAAAI/AAAAAAAAUNE/BUx1udvCQfw/photo.jpg?sz=128", "display_name": "Atul Sahay", "link": "https://stackoverflow.com/users/11865445/atul-sahay"}, "is_accepted": false, "score": 1, "last_activity_date": 1564596178, "creation_date": 1564596178, "answer_id": 57296594, "question_id": 53421999, "link": "https://stackoverflow.com/questions/53421999/how-to-save-torchtext-dataset/57296594#57296594", "title": "how to save torchtext Dataset?", "body": "<p>You can always use the pickle to dump the objects, but keep in mind one thing that dumping a list of dictionary or fields objects are not taken care of by the module, so to the best try to decompose the list first </p>\n\n<h3>To Store the DataSet Object to a pickle file for later easy loading</h3>\n\n<pre><code>def save_to_pickle(dataSetObject,PATH):\n    with open(PATH,'wb') as output:\n        for i in dataSetObject:\n            pickle.dump(vars(i), output, pickle.HIGHEST_PROTOCOL)\n</code></pre>\n\n<p>The toughest thing is yet to come, Yeah loading the pickle file.... ;)</p>\n\n<p>First, try to look for all field names and field attributes and then go for the kill</p>\n\n<h3>To load the pickle file into the DataSetObject</h3>\n\n<pre><code>def load_pickle(PATH, FIELDNAMES, FIELD):\n    dataList = []\n    with open(PATH, \"rb\") as input_file:\n        while True:\n            try:\n                # Taking the dictionary instance as the input Instance\n                inputInstance = pickle.load(input_file)\n                # plugging it into the list\n                dataInstance =  [inputInstance[FIELDNAMES[0]],inputInstance[FIELDNAMES[1]]]\n                # Finally creating an example objects list\n                dataList.append(Example().fromlist(dataInstance,fields=FIELD))\n            except EOFError:\n                break\n\n    # At last creating a data Set Object\n    exampleListObject = Dataset(dataList, fields=data_fields)\n    return exampleListObject \n</code></pre>\n\n<p>This hackish solution has worked in my case, hope you will find it useful in your case too.</p>\n\n<p>Btw any suggestion is welcome :).</p>\n"}, {"tags": [], "owner": {"reputation": 123, "user_id": 6866692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae248fd75f13b2c7c80f885bd4bb31b3?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita", "link": "https://stackoverflow.com/users/6866692/nikita"}, "is_accepted": false, "score": 1, "last_activity_date": 1588757610, "creation_date": 1588757610, "answer_id": 61631860, "question_id": 53421999, "link": "https://stackoverflow.com/questions/53421999/how-to-save-torchtext-dataset/61631860#61631860", "title": "how to save torchtext Dataset?", "body": "<p>I came up with the following functions for myself:</p>\n\n<pre><code>import dill\nfrom pathlib import Path\n\nimport torch\nfrom torchtext.data import Dataset\n\ndef save_dataset(dataset, path):\n    if not isinstance(path, Path):\n        path = Path(path)\n    path.mkdir(parents=True, exist_ok=True)\n    torch.save(dataset.examples, path/\"examples.pkl\", pickle_module=dill)\n    torch.save(dataset.fields, path/\"fields.pkl\", pickle_module=dill)\n\ndef load_dataset(path):\n    if not isinstance(path, Path):\n        path = Path(path)\n    examples = torch.load(path/\"examples.pkl\", pickle_module=dill)\n    fields = torch.load(path/\"fields.pkl\", pickle_module=dill)\n    return Dataset(examples, fields)\n</code></pre>\n\n<p>Not that actual objects could be a bit different, for example, if you save <code>TabularDataset</code>, then <code>load_dataset</code> returns an instance of class <code>Dataset</code>. This unlikely affect the data pipeline but may require extra diligence for tests.\nIn the case of a custom tokenizer, it should be serializable as well (e.g. no lambda functions, etc).</p>\n"}, {"tags": [], "owner": {"reputation": 371, "user_id": 5893783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66226c492eb950ac4a42e28e50f858b7?s=128&d=identicon&r=PG&f=1", "display_name": "Salva Carri&#243;n", "link": "https://stackoverflow.com/users/5893783/salva-carri%c3%b3n"}, "is_accepted": false, "score": 0, "last_activity_date": 1603743253, "last_edit_date": 1603743253, "creation_date": 1603732574, "answer_id": 64541903, "question_id": 53421999, "link": "https://stackoverflow.com/questions/53421999/how-to-save-torchtext-dataset/64541903#64541903", "title": "how to save torchtext Dataset?", "body": "<p>The pickle/dill approach is fine if your dataset is small. But if you are working with <strong>large datasets</strong> I won't recommend it as it will be too slow.</p>\n<p>I simply save the examples (iteratively) as JSON-strings. The reason behind this is because saving the whole Dataset object takes a lot of time, plus you need serialization tricks such a dill, which makes the serialization even slower.</p>\n<p>Moreover, these serializers take a lot of memory (some of them even create copies of the dataset) and if they start making use of the swap memory, you're done. That process is gonna take so long that you will probably terminate it before it finishes.</p>\n<p>Therefore, I end up with the following approach:</p>\n<ol>\n<li>Iterate over the examples</li>\n<li>Convert each example (on the fly) to a JSON-string</li>\n<li>Write that JSON-string into a text file (one sample per\nline)</li>\n<li>When loading, add the examples to the Dataset object along with the fields</li>\n</ol>\n<pre><code>def save_examples(dataset, savepath):\n    with open(savepath, 'w') as f:\n        # Save num. elements (not really need it)\n        f.write(json.dumps(total))  # Write examples length\n        f.write(&quot;\\n&quot;)\n\n        # Save elements\n        for pair in dataset.examples:\n            data = [pair.src, pair.trg]\n            f.write(json.dumps(data))  # Write samples\n            f.write(&quot;\\n&quot;)\n\n\ndef load_examples(filename):\n    examples = []\n    with open(filename, 'r') as f:\n        # Read num. elements (not really need it)\n        total = json.loads(f.readline())\n\n        # Save elements\n        for i in range(total):\n            line = f.readline()\n            example = json.loads(line)\n            # example = data.Example().fromlist(example, fields)  # Create Example obj. (you can do it here or later)\n            examples.append(example)\n\n    end = time.time()\n    print(end - start)\n    return examples\n</code></pre>\n<p>Then, you can simply rebuild the dataset by:</p>\n<pre><code># Define fields\nSRC = data.Field(...)\nTRG = data.Field(...)\nfields = [('src', SRC), ('trg', TRG)]\n\n# Load examples from JSON and convert them to &quot;Example objects&quot;\nexamples = load_examples(filename)\nexamples = [data.Example().fromlist(d, fields) for d in examples]\n\n# Build dataset\nmydataset = Dataset(examples, fields)\n</code></pre>\n<p>The reason why I use JSON instead of pickle, dill, msgpack, etc is not arbitrary.</p>\n<p>I did some tests and these are the results:</p>\n<pre><code>Dataset size: 2x (1,960,641)\n\nSaving times:\n- Pickle/Dill*: &gt;30-45 min (...or froze my computer)\n\n- MessagePack (iterative): 123.44 sec\n  100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1960641/1960641 [02:03&lt;00:00, 15906.52it/s]\n\n- JSON (iterative): 16.33 sec\n  100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1960641/1960641 [00:15&lt;00:00, 125955.90it/s]\n\n- JSON (bulk): 46.54 sec (memory problems)\n\nLoading times:\n - Pickle/Dill*: -\n\n - MessagePack (iterative): 143.79 sec\n   100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1960641/1960641 [02:23&lt;00:00, 13635.20it/s]\n\n - JSON (iterative): 33.83 sec\n   100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1960641/1960641 [00:33&lt;00:00, 57956.28it/s] \n\n - JSON (bulk): 27.43 sec\n</code></pre>\n<p>*Similar approach as the other answers</p>\n"}], "owner": {"reputation": 18483, "user_id": 497600, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9d2bd51b0d7a3e483cb42919119d2e8d?s=128&d=identicon&r=PG", "display_name": "lhk", "link": "https://stackoverflow.com/users/497600/lhk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4026, "favorite_count": 1, "accepted_answer_id": 54415604, "answer_count": 4, "score": 5, "last_activity_date": 1603743253, "creation_date": 1542843852, "question_id": 53421999, "link": "https://stackoverflow.com/questions/53421999/how-to-save-torchtext-dataset", "title": "how to save torchtext Dataset?", "body": "<p>I'm working with text and use <a href=\"https://torchtext.readthedocs.io/en/latest/data.html#torchtext.data.Dataset\" rel=\"noreferrer\"><code>torchtext.data.Dataset</code></a>.\nCreating the dataset takes a considerable amount of time.\nFor just running the program this is still acceptable. But I would like to debug the torch code for the neural network. And if python is started in debug mode, the dataset creation takes roughly 20 minutes (!!). That's just to get a working environment where I can debug-step through the neural network code.</p>\n\n<p>I would like to save the Dataset, for example with pickle. This sample code is taken from <a href=\"https://github.com/fastai/fastai/blob/master/courses/dl1/lesson4-imdb.ipynb\" rel=\"noreferrer\">here</a>, but I removed everything that is not necessary for this example:</p>\n\n<pre><code>from torchtext import data\nfrom fastai.nlp import *\n\nPATH = 'data/aclImdb/'\n\nTRN_PATH = 'train/all/'\nVAL_PATH = 'test/all/'\nTRN = f'{PATH}{TRN_PATH}'\nVAL = f'{PATH}{VAL_PATH}'\n\nTEXT = data.Field(lower=True, tokenize=\"spacy\")\n\nbs = 64;\nbptt = 70\n\nFILES = dict(train=TRN_PATH, validation=VAL_PATH, test=VAL_PATH)\nmd = LanguageModelData.from_text_files(PATH, TEXT, **FILES, bs=bs, bptt=bptt, min_freq=10)\n\nwith open(\"md.pkl\", \"wb\") as file:\n    pickle.dump(md, file)\n</code></pre>\n\n<p>To run the code, you need the aclImdb dataset, it can be downloaded from <a href=\"http://files.fast.ai/data/aclImdb.tgz\" rel=\"noreferrer\">here</a>. Extract it into a <code>data/</code> folder next to this code snippet. The code produces an error in the last line, where pickle is used:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/home/lhk/programming/fastai_sandbox/lesson4-imdb2.py\", line 27, in &lt;module&gt;\n    pickle.dump(md, file)\nTypeError: 'generator' object is not callable\n</code></pre>\n\n<p>The samples from fastai often use <a href=\"https://pypi.org/project/dill/\" rel=\"noreferrer\">dill</a> instead of pickle. But that doesn't work for me either.</p>\n"}, {"tags": ["python", "regex", "python-3.x", "parsing"], "comments": [{"owner": {"reputation": 157, "user_id": 10166632, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4BO8EHsoTM4/AAAAAAAAAAI/AAAAAAAAALo/dHdXIxFZcHY/photo.jpg?sz=128", "display_name": "Javier Ramirez", "link": "https://stackoverflow.com/users/10166632/javier-ramirez"}, "edited": false, "score": 0, "creation_date": 1542843905, "post_id": 53421995, "comment_id": 93718492, "body": "I have read that group(0) returns complete match, so what am I doing wrong?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1542843987, "post_id": 53421995, "comment_id": 93718510, "body": "Please copy enough of your input into the question to locally reproduce your results."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6516765"}, "edited": false, "score": 0, "creation_date": 1542844692, "post_id": 53421995, "comment_id": 93718698, "body": "<code>\\(\\w{5}-\\w{3}-\\d{6}-\\d{2}, \\d+\\)</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6516765"}, "edited": false, "score": 0, "creation_date": 1542844709, "post_id": 53421995, "comment_id": 93718707, "body": "Your character class isn&#39;t matching the single quotes, by the way."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1542844898, "post_id": 53421995, "comment_id": 93718758, "body": "Edit the question to include the value of <code>part_number</code>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6516765"}, "edited": false, "score": 1, "creation_date": 1542846040, "post_id": 53422227, "comment_id": 93719062, "body": "Personally, I&#39;d use <code>\\(\\w{5}-\\w{3}-\\d{6}-\\d{2}, \\d+\\)</code>, which is more specific."}, {"owner": {"reputation": 2288, "user_id": 8408080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b487ee532f07476aea6610f459b3fdaf?s=128&d=identicon&r=PG&f=1", "display_name": "user8408080", "link": "https://stackoverflow.com/users/8408080/user8408080"}, "edited": false, "score": 0, "creation_date": 1542846101, "post_id": 53422227, "comment_id": 93719074, "body": "This is also what I would do, but I wanted to change OP&#39;s regex as little as possible, because he still might have a reason for this. Good addition, though! Also you still missed the <code>&#39;</code> ;)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6516765"}, "edited": false, "score": 1, "creation_date": 1542846517, "post_id": 53422227, "comment_id": 93719165, "body": "Oh, sorry, I just copied that from my comment which for some reason didn&#39;t update in this tab when I corrected it. The regex I have open in regex101 right now is <code>&#39;(\\w{5}-\\w{3}-\\d{6}-\\d{2})&#39;, (\\d+)</code>, SO&#39;s live update functionality just sucks. Guess I didn&#39;t look it over for the 32nd time after copying it over..."}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1542877730, "post_id": 53422227, "comment_id": 93728771, "body": "<code>[\\w\\d]</code> = <code>\\w</code>, but <code>\\w</code> is not equal to <code>[A-Za-z0-9]</code>, in Python 3, <code>\\w</code> matches any Unicode letter, digit, <code>_</code> and some diacritics."}], "tags": [], "owner": {"reputation": 2288, "user_id": 8408080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b487ee532f07476aea6610f459b3fdaf?s=128&d=identicon&r=PG&f=1", "display_name": "user8408080", "link": "https://stackoverflow.com/users/8408080/user8408080"}, "is_accepted": true, "score": 0, "last_activity_date": 1542877683, "last_edit_date": 1542877683, "creation_date": 1542845841, "answer_id": 53422227, "question_id": 53421995, "link": "https://stackoverflow.com/questions/53421995/getting-wrong-data-with-regex/53422227#53422227", "title": "Getting wrong data with regex", "body": "<p>Your problem is that you didn't include the <code>'</code> in your character group. So this regex matches for example <code>FMC2H-OHC-100018-00</code> and <code>, 2</code>, but not both together. Also <code>re.search</code> stops searching after it finds the first match. So if you only want the first match, go with:</p>\n\n<pre><code>re.search(r\"([\\w ',-]+)\", part_number)\n</code></pre>\n\n<p>Where I changed <code>A-Za-z0-9</code> to <code>\\w</code>, because it's shorter and more readable. If you want a list that matches all elements, go with:</p>\n\n<pre><code>re.findall(r\"([\\w ',-]+)\", part_number)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 1, "last_activity_date": 1542857680, "last_edit_date": 1542857680, "creation_date": 1542847360, "answer_id": 53422401, "question_id": 53421995, "link": "https://stackoverflow.com/questions/53421995/getting-wrong-data-with-regex/53422401#53422401", "title": "Getting wrong data with regex", "body": "<p>I don't think the you need to convert the row values to string and then try to parse the result with a regex. The clue was when you said in your update that \"Here are the row values converted to string\" implying that they're in some other format initially\u2014because the result looks they're actually <code>tuple</code>s of two values, a string and an integer.</p>\n\n<p>If that's correct, then you can avoid converting them to strings and then trying to parse it with a regex, because you can get the string you want simply by using the relatively simple built-in string formatting capabilities Python has to do it.</p>\n\n<p>Here's what I mean:</p>\n\n<pre><code># Raw row data retrieved from database.\nrows = [('FMC2H-OHC-100018-00', 2),\n        ('FMC2H-OHC-100027-00', 0),\n        ('FMC2H-OHC-100033-00', 0),\n        ('FMC2H-OHC-100032-00', 20),\n        ('FMC2H-OHC-100017-00', 16)]\n\nfor row in rows:\n    result = '{}, {}'.format(*row)  # Convert data in row to a formatted string.\n    print(result)\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>FMC2H-OHC-100018-00, 2\nFMC2H-OHC-100027-00, 0\nFMC2H-OHC-100033-00, 0\nFMC2H-OHC-100032-00, 20\nFMC2H-OHC-100017-00, 16\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 10166632, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4BO8EHsoTM4/AAAAAAAAAAI/AAAAAAAAALo/dHdXIxFZcHY/photo.jpg?sz=128", "display_name": "Javier Ramirez", "link": "https://stackoverflow.com/users/10166632/javier-ramirez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 1, "accepted_answer_id": 53422227, "answer_count": 2, "score": 1, "last_activity_date": 1542877683, "creation_date": 1542843806, "last_edit_date": 1542858303, "question_id": 53421995, "link": "https://stackoverflow.com/questions/53421995/getting-wrong-data-with-regex", "title": "Getting wrong data with regex", "body": "<p>I'm facing an issue here. Python version 3.7.</p>\n\n<p><a href=\"https://regex101.com/r/WVxEKM/3\" rel=\"nofollow noreferrer\">https://regex101.com/r/WVxEKM/3</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/Fmv6l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Fmv6l.png\" alt=\"screenshot of regex101 web page\"></a></p>\n\n<p>As you can see on regex site, my regex is working great, however, when I try to read the strings with python, I only get the first part, meaning, no values after comma.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>part_number = str(row)\npartn = re.search(r\"([a-zA-Z0-9 ,-]+)\", part_number)\nprint(partn.group(0))\n</code></pre>\n\n<p>This is what <code>partn.group(0)</code> is printing:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>FMC2H-OHC-100018-00\n</code></pre>\n\n<p>I need to get the string as regex, with comma and value:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>FMC2H-OHC-100018-00, 2\n</code></pre>\n\n<p>Is it my regex wrong?. What is happening with commas and values?</p>\n\n<p>ROW Values\nHere are the row values converted to string, the data retrieve from my db also include parentheses and quotes:</p>\n\n<pre><code>('FMC2H-OHC-100018-00', 2)\n('FMC2H-OHC-100027-00', 0)\n</code></pre>\n"}, {"tags": ["python", "django", "importerror"], "comments": [{"owner": {"reputation": 209, "user_id": 1125398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf572bd535825c253c37e4b726ce5413?s=128&d=identicon&r=PG&f=1", "display_name": "Boregore", "link": "https://stackoverflow.com/users/1125398/boregore"}, "edited": false, "score": 2, "creation_date": 1542850021, "post_id": 53421991, "comment_id": 93719819, "body": "In VS Code try to do Cmd + Shift + P and write &quot;select interpreter&quot;, you should see an option called &quot;Python: Select Interpreter&quot;, choose it and wait until you get a list of interpreters. Select a python3 interpreter and see if that does the trick. (ideally select the python3 interpreter from your virtual environment)"}, {"owner": {"reputation": 209, "user_id": 1125398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf572bd535825c253c37e4b726ce5413?s=128&d=identicon&r=PG&f=1", "display_name": "Boregore", "link": "https://stackoverflow.com/users/1125398/boregore"}, "edited": false, "score": 0, "creation_date": 1542851154, "post_id": 53421991, "comment_id": 93720036, "body": "Also when you run the debugger you can see the actual command, in the VS Code terminal, that is executed to launch your project, so you can see which python executable is used."}, {"owner": {"reputation": 340, "user_id": 5644892, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BGqm5e4NILw/AAAAAAAAAAI/AAAAAAAAAEw/O-PS6VfSnvE/photo.jpg?sz=128", "display_name": "Justin", "link": "https://stackoverflow.com/users/5644892/justin"}, "reply_to_user": {"reputation": 209, "user_id": 1125398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf572bd535825c253c37e4b726ce5413?s=128&d=identicon&r=PG&f=1", "display_name": "Boregore", "link": "https://stackoverflow.com/users/1125398/boregore"}, "edited": false, "score": 0, "creation_date": 1542851422, "post_id": 53421991, "comment_id": 93720085, "body": "That is what I have done so far.  I started the terminal with &quot;Terminal: Create New Integrated Terminal&quot; and selected the interpreter for my virtual environment using &quot;Python: Select Interpreter&quot; and selecting &quot;Python 3.7.1 64-Bit (&#39;env&#39;:venv) at &quot;./env/bin/python&quot;.  This works when I am editing the code and type &quot;python3 manage.py runserver&quot; in the terminal, but not when I run the debugger.  Thanks!"}, {"owner": {"reputation": 340, "user_id": 5644892, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BGqm5e4NILw/AAAAAAAAAAI/AAAAAAAAAEw/O-PS6VfSnvE/photo.jpg?sz=128", "display_name": "Justin", "link": "https://stackoverflow.com/users/5644892/justin"}, "reply_to_user": {"reputation": 209, "user_id": 1125398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf572bd535825c253c37e4b726ce5413?s=128&d=identicon&r=PG&f=1", "display_name": "Boregore", "link": "https://stackoverflow.com/users/1125398/boregore"}, "edited": false, "score": 0, "creation_date": 1542851515, "post_id": 53421991, "comment_id": 93720112, "body": "Boregore, this is what I get in the terminal.  (env) US6749343-M001:hello_django justinoconnor$ cd &quot;/Users/justinoconnor/Desktop/Rapid Prototyping/Projects/hello_django&quot; ; env &quot;PYTHONIOENCODING=UTF-8&quot; &quot;PYTHONUNBUFFERED=1&quot; &quot;/Users/justinoconnor/Desktop/Rapid Prototyping/Projects/hello_django/env/bin/python&quot; /Users/justinoconnor/.vscode/extensions/ms-python.python-201&zwnj;&#8203;8.10.1/pythonFiles/e&zwnj;&#8203;xperimental/ptvsd_la&zwnj;&#8203;uncher.py --client --host localhost --port 51054 &quot;/Users/justinoconnor/Desktop/Rapid Prototyping/Projects/hello_django/manage.py&quot; runserver --noreload --nothreading"}, {"owner": {"reputation": 209, "user_id": 1125398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf572bd535825c253c37e4b726ce5413?s=128&d=identicon&r=PG&f=1", "display_name": "Boregore", "link": "https://stackoverflow.com/users/1125398/boregore"}, "edited": false, "score": 0, "creation_date": 1542853640, "post_id": 53421991, "comment_id": 93720546, "body": "Ok, so it looks like it&#39;s using the correct python executable. I&#39;m kinda in the dark here, but try the following: In the terminal (with the virtual environment activated) run &quot;python --version&quot; (to verify the installed version in the virtual environment) and &quot;pip freeze&quot; (to list installed modules int the virtual environment and verify django install)."}, {"owner": {"reputation": 340, "user_id": 5644892, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BGqm5e4NILw/AAAAAAAAAAI/AAAAAAAAAEw/O-PS6VfSnvE/photo.jpg?sz=128", "display_name": "Justin", "link": "https://stackoverflow.com/users/5644892/justin"}, "reply_to_user": {"reputation": 209, "user_id": 1125398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf572bd535825c253c37e4b726ce5413?s=128&d=identicon&r=PG&f=1", "display_name": "Boregore", "link": "https://stackoverflow.com/users/1125398/boregore"}, "edited": false, "score": 0, "creation_date": 1542854455, "post_id": 53421991, "comment_id": 93720740, "body": "This is interesting.  In the virtual environment terminal if I type python --version I get 2.7.10 and if I type python3 --version I get 3.7.1.  Not sure why it is recognizing both.  It does not recognize pip, but when I run pip3 freeze I can see that I have django 2.1.3 installed."}, {"owner": {"reputation": 209, "user_id": 1125398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf572bd535825c253c37e4b726ce5413?s=128&d=identicon&r=PG&f=1", "display_name": "Boregore", "link": "https://stackoverflow.com/users/1125398/boregore"}, "edited": false, "score": 0, "creation_date": 1542854488, "post_id": 53421991, "comment_id": 93720743, "body": "That was what I was suspecting. Did you use python3 when creating the virtual environment? (like this: &quot;virtualenv -p python3 venv&quot;) - that should make the virtual environment use python3 when &quot;python&quot; is used in the terminal"}, {"owner": {"reputation": 209, "user_id": 1125398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf572bd535825c253c37e4b726ce5413?s=128&d=identicon&r=PG&f=1", "display_name": "Boregore", "link": "https://stackoverflow.com/users/1125398/boregore"}, "edited": false, "score": 0, "creation_date": 1542856554, "post_id": 53421991, "comment_id": 93721126, "body": "Did it work creating the virtual environment with python3? :-)"}], "answers": [{"comments": [{"owner": {"reputation": 209, "user_id": 1125398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf572bd535825c253c37e4b726ce5413?s=128&d=identicon&r=PG&f=1", "display_name": "Boregore", "link": "https://stackoverflow.com/users/1125398/boregore"}, "edited": false, "score": 0, "creation_date": 1542859379, "post_id": 53423385, "comment_id": 93721723, "body": "I posted the solution as an answer too - will you be so kind and accept it? :-)"}, {"owner": {"reputation": 340, "user_id": 5644892, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BGqm5e4NILw/AAAAAAAAAAI/AAAAAAAAAEw/O-PS6VfSnvE/photo.jpg?sz=128", "display_name": "Justin", "link": "https://stackoverflow.com/users/5644892/justin"}, "reply_to_user": {"reputation": 209, "user_id": 1125398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf572bd535825c253c37e4b726ce5413?s=128&d=identicon&r=PG&f=1", "display_name": "Boregore", "link": "https://stackoverflow.com/users/1125398/boregore"}, "edited": false, "score": 0, "creation_date": 1543192621, "post_id": 53423385, "comment_id": 93817253, "body": "I&#39;m relatively new to stack overflow.  Your solution is showing for me.  Is there something I need to do to &quot;accept&quot; your answer so it shows for everyone else?"}, {"owner": {"reputation": 209, "user_id": 1125398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf572bd535825c253c37e4b726ce5413?s=128&d=identicon&r=PG&f=1", "display_name": "Boregore", "link": "https://stackoverflow.com/users/1125398/boregore"}, "edited": false, "score": 0, "creation_date": 1543342042, "post_id": 53423385, "comment_id": 93880874, "body": "You just need to click the checkmark-button on the left side of my answer. This will show my answer as the &quot;accepted answer&quot;. It also gives me a couple of reputation points (like when I just up voted your question), which is what stackoverflow users are striving for. It makes your answers look more credible and also you get more access to more features the higher your reputation is. It&#39;s a nice way of showing appreciation for the help you have received :-) Also when you upvote an answer it will get shown before less upvoted answers."}], "tags": [], "owner": {"reputation": 340, "user_id": 5644892, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BGqm5e4NILw/AAAAAAAAAAI/AAAAAAAAAEw/O-PS6VfSnvE/photo.jpg?sz=128", "display_name": "Justin", "link": "https://stackoverflow.com/users/5644892/justin"}, "is_accepted": false, "score": 1, "last_activity_date": 1543192577, "last_edit_date": 1543192577, "creation_date": 1542856696, "answer_id": 53423385, "question_id": 53421991, "link": "https://stackoverflow.com/questions/53421991/visual-studio-code-is-not-able-to-launch-django-project-from-debugger/53423385#53423385", "title": "Visual Studio Code Is Not Able To Launch Django Project From Debugger", "body": "<p>The issue was that I used the \"python\" command instead of the \"python3\" command when creating the virtual environment for my project.  This was causing the debugger to execute the wrong command when trying run the local server.  I was able to create a new virtual environment using the command ...</p>\n\n<pre><code>python3 -m venv env\n</code></pre>\n\n<p>... that the Visual Studio Code debugger was able to successfully recognize when debugging using the \"Python: Django\" drop down configuration.</p>\n"}, {"tags": [], "owner": {"reputation": 209, "user_id": 1125398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf572bd535825c253c37e4b726ce5413?s=128&d=identicon&r=PG&f=1", "display_name": "Boregore", "link": "https://stackoverflow.com/users/1125398/boregore"}, "is_accepted": false, "score": 2, "last_activity_date": 1542859319, "creation_date": 1542859319, "answer_id": 53423699, "question_id": 53421991, "link": "https://stackoverflow.com/questions/53421991/visual-studio-code-is-not-able-to-launch-django-project-from-debugger/53423699#53423699", "title": "Visual Studio Code Is Not Able To Launch Django Project From Debugger", "body": "<p>Use the command <code>virtualenv -p python3 venv</code> (or replace \"venv\" with your virtual environment name) in the terminal to create the virtual environment with python3 as the default when \"python\" is used in the terminal (e.g. <code>python manage.py ...</code>).</p>\n\n<p>The <code>-p</code> is used to specify a specific version of python.</p>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 1984604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/237ad27a35cdcf74823941cf382bcaff?s=128&d=identicon&r=PG", "display_name": "Divyarajsinh Jadeja", "link": "https://stackoverflow.com/users/1984604/divyarajsinh-jadeja"}, "is_accepted": false, "score": 2, "last_activity_date": 1558935055, "creation_date": 1558935055, "answer_id": 56320155, "question_id": 53421991, "link": "https://stackoverflow.com/questions/53421991/visual-studio-code-is-not-able-to-launch-django-project-from-debugger/56320155#56320155", "title": "Visual Studio Code Is Not Able To Launch Django Project From Debugger", "body": "<p>Same issue caused to my VS Code environment even launching VS Code after activating venv (Python virtual environment). </p>\n\n<p>The VS Code also displayed the Python Environment option \"Python 3.7.3 64 bit\" on the Status Bar. On first sight, this python environment option looks correct.</p>\n\n<p>But, my issue resolved after applying Boregore's comment. Python Environment option related with <strong>venv</strong> python needs to be selected as an interpreter.</p>\n\n<p>I selected the correct Python Environment option related with venv (in my case i.e. ~/.virtualenvs/djangodev/bin/python), by applying following steps,</p>\n\n<ol>\n<li><p>Select a Python 3 interpreter by opening the Command Palette (Ctrl+Shift+P).</p></li>\n<li><p>Start typing the Python: Select Interpreter command to search, then select the command. You can also use the Select Python Environment option on the Status Bar if available (it may already show a selected interpreter, too)</p></li>\n<li><p>Select Python Environment option showing venv path (in my case, i.e. ~/.virtualenvs/djangodev/bin/python)</p></li>\n<li><p>Now, VS Code displays the Python Environment option related with venv, (in my case, i.e. \"Python 3.7.3 64 bit <strong>('djangodev': venv)</strong>\" on the Status Bar.</p></li>\n<li><p>Re-run debug steps.</p></li>\n</ol>\n\n<p>(Many thanks to Boregore for providing solution, this is just a re-elaboration of his comment to the actual question)</p>\n"}], "owner": {"reputation": 340, "user_id": 5644892, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BGqm5e4NILw/AAAAAAAAAAI/AAAAAAAAAEw/O-PS6VfSnvE/photo.jpg?sz=128", "display_name": "Justin", "link": "https://stackoverflow.com/users/5644892/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4404, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1558935055, "creation_date": 1542843779, "question_id": 53421991, "link": "https://stackoverflow.com/questions/53421991/visual-studio-code-is-not-able-to-launch-django-project-from-debugger", "title": "Visual Studio Code Is Not Able To Launch Django Project From Debugger", "body": "<p>I am using Visual Studio Code as my IDE for building web applications using Python's Django web development framework.  I am developing on a 2018 MacBook Pro.  I am able to launch my web applications by launching them in the terminal using:</p>\n\n<pre><code>python3 manage.py runserver\n</code></pre>\n\n<p>However, I want to be able to launch my application through the debugger.  To try and do this, I navigated to the debug section, created the launch.json file, and changed my configuration in the drop down to Python: Django.  Here is are my configurations from the file.</p>\n\n<pre><code>    {\n        \"name\": \"Python: Django\",\n        \"type\": \"python\",\n        \"request\": \"launch\",\n        \"program\": \"${workspaceFolder}/manage.py\",\n        \"console\": \"integratedTerminal\",\n        \"args\": [\n            \"runserver\",\n            \"--noreload\",\n            \"--nothreading\"\n        ],\n        \"django\": true\n    },\n</code></pre>\n\n<p>When I try to run the debugger using the green play arrow, I get the following exception:</p>\n\n<blockquote>\n  <p><strong>Exception has occurred: ImportError</strong> \n  Couldn't import Django. Are you\n  sure it's installed and available on your PYTHONPATH environment\n  variable? Did you forget to activate a virtual environment?   File\n  \"/Users/justinoconnor/Desktop/Rapid\n  Prototyping/Projects/hello_django/manage.py\", line 14, in \n      ) from exc</p>\n</blockquote>\n\n<p>Launching the VS Code debugger with this configuration should be the same as running python manage.py runserver --noreload --nothreading, but it is not working.  I'm thinking it is because on the MacBook I have to use the \"python3\" command rather than \"python\", but I did not see anything in the documentation that would allow me to specify this in the launch.json configuration file.</p>\n\n<p>Does anyone know how to resolve this so that when I run the debugger it automatically executes/saves my project?  I don't understand why this is not working when I can type python3 manage.py runserver into the terminal and it will execute just fine.</p>\n"}, {"tags": ["python", "fibonacci"], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 10688385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/827cf3d1b6aabe5a1c00a80a939ba04e?s=128&d=identicon&r=PG&f=1", "display_name": "happyhamsturr", "link": "https://stackoverflow.com/users/10688385/happyhamsturr"}, "is_accepted": true, "score": 2, "last_activity_date": 1542849041, "last_edit_date": 1542849041, "creation_date": 1542843862, "answer_id": 53422002, "question_id": 53421986, "link": "https://stackoverflow.com/questions/53421986/question-about-fibonacci-sequence-generator-nothing-prints/53422002#53422002", "title": "Question about Fibonacci sequence generator - nothing prints", "body": "<p>This fix looks simple.\nThe grouping in the while loop is wrong, change it to the following and it should work fine:</p>\n\n<pre><code>while((zints.int4&lt;hwmny)or not(zints.int4&gt;0)and not(zints.int4==0)):\n</code></pre>\n"}], "owner": {"reputation": 562, "user_id": 3903568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23fcb4fa77c545bf1928f65465cedd5?s=128&d=identicon&r=PG", "display_name": "XlogicX", "link": "https://stackoverflow.com/users/3903568/xlogicx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 53422002, "answer_count": 1, "score": 1, "last_activity_date": 1542849041, "creation_date": 1542843721, "last_edit_date": 1542844238, "question_id": 53421986, "link": "https://stackoverflow.com/questions/53421986/question-about-fibonacci-sequence-generator-nothing-prints", "title": "Question about Fibonacci sequence generator - nothing prints", "body": "<p>I was given an assigmnent in my class where I need to write an algorithm that can generate \"n\" numbers of the Fibonacci sequence.\nI feel like this code should work, but am still having troubles locating what bug is preventing it from working.\nThe algorithm should start printing the Fibonacci sequence starting at the number <code>2</code> (the first 3 numbers are patched in), but it only prints the first 3 numbers and my algorithm doesn't print anything.\nI even have sophisticated error checking that should rule out bad values, but it isn't reporting anything either.</p>\n\n<pre><code>#/usr/bin/python\n\nimport re\nimport math\nimport time\nimport sys\n\ndef errchk(hwmny,int1,int2,int3,int4,errcnt):\n    #Sanity check; first 12 numbers don't have 6's\n    expression = re.compile(r\"^[^6]{1,3}\", re.I | re.S) #expression for no sixes\n    if expression.match(str(int3)):     # if it doesn't match\n        return                      # return\n    else:                           #otherwise\n        if (hwmny &gt; 12):        # as long as it's less than 12\n            return          # no errors\n        zints.err()         #but ifnot, errors\n    return None\n\ndef nofloats():\n    return math.floor(zints.int3)\n\nclass zeroints:\n    int3=int4 = 0   #int3 and int4 are 0\n    errcnt = 0  #count the number of errors\n    def err(self):\n        print \"Errors\"\n        return\n\nhwmny =15       #hwmny variable is 10\nint1 =int2 =1       #int1 and int2 are 1\nzints = zeroints()  #ints init'd to 0\nprint \"0\\n1\\n1\"\n\ndef loop(hwmny,int1,int2,int3,int4,errcnt):\n    while(((zints.int4&lt;hwmny)or not(zints.int4&gt;0))and not(zints.int4==0)):  #while int4 is less than hwmny and error checking\n        zints.int3 =int1+ int2          #int3 is int1 plus int2\n        int1 =int2              #int1 is int2\n        string = 'The Values Are'       #string is set to 'The Values Are'\n        int2= zints.int3            #int2 is int3\n        errchk(hwmny,int1,int2,zints.int3,zints.int4,zints.errcnt)\n        print zints.int3            #print int3\n        zints.int4= zints.int4+1        #int4 is int4 plus 1\n        loop(hwmny,int1,int2,zints.int3,zints.int4,zints.errcnt)\n        continue\n\nloop(hwmny,int1,int2,zints.int3,zints.int4,zints.errcnt)\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "indexing"], "answers": [{"comments": [{"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 111, "user_id": 10605364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1bca1014ab4e38fe73ebb2a3f61ff09?s=128&d=identicon&r=PG&f=1", "display_name": "A Johnston", "link": "https://stackoverflow.com/users/10605364/a-johnston"}, "edited": false, "score": 0, "creation_date": 1542844644, "post_id": 53422029, "comment_id": 93718689, "body": "@AJohnston, No problem, if this helped feel free to accept (tick on left) so other users know."}, {"owner": {"reputation": 111, "user_id": 10605364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1bca1014ab4e38fe73ebb2a3f61ff09?s=128&d=identicon&r=PG&f=1", "display_name": "A Johnston", "link": "https://stackoverflow.com/users/10605364/a-johnston"}, "edited": false, "score": 0, "creation_date": 1542844707, "post_id": 53422029, "comment_id": 93718705, "body": "<i>edit</i> Thanks! That&#39;s how I planned on it looking :) To ask a follow up question.. how would you select the &quot;5&quot; value under &quot;FEB&quot; and &quot;2017&quot;? Thanks"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 111, "user_id": 10605364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1bca1014ab4e38fe73ebb2a3f61ff09?s=128&d=identicon&r=PG&f=1", "display_name": "A Johnston", "link": "https://stackoverflow.com/users/10605364/a-johnston"}, "edited": false, "score": 0, "creation_date": 1542844776, "post_id": 53422029, "comment_id": 93718725, "body": "<code>df.loc[df[&#39;month&#39;] == &#39;FEB&#39;, 2017].iat[0]</code> might be sufficient, or <code>df[2017].iat[1]</code>."}, {"owner": {"reputation": 111, "user_id": 10605364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1bca1014ab4e38fe73ebb2a3f61ff09?s=128&d=identicon&r=PG&f=1", "display_name": "A Johnston", "link": "https://stackoverflow.com/users/10605364/a-johnston"}, "edited": false, "score": 0, "creation_date": 1542845283, "post_id": 53422029, "comment_id": 93718876, "body": "Thanks again! Another follow up if you don&#39;t mind   How would I store that?  <code>Feb = weather.loc[weather[&#39;month&#39;] == &#39;FEB&#39;, 2017].iat[0]</code> Doesn&#39;t seem to work, any suggestions?  Thanks"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 111, "user_id": 10605364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1bca1014ab4e38fe73ebb2a3f61ff09?s=128&d=identicon&r=PG&f=1", "display_name": "A Johnston", "link": "https://stackoverflow.com/users/10605364/a-johnston"}, "edited": false, "score": 0, "creation_date": 1542845378, "post_id": 53422029, "comment_id": 93718901, "body": "Sorry, not sure, what you&#39;re trying should work but if you&#39;re unable to figure it out after a while free free to <a href=\"https://stackoverflow.com/questions/ask\">post a new question</a>."}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 0, "last_activity_date": 1542844071, "creation_date": 1542844071, "answer_id": 53422029, "question_id": 53421977, "link": "https://stackoverflow.com/questions/53421977/python-pandas-index-is-overlapped-how-to-fix/53422029#53422029", "title": "Python Pandas: Index is overlapped? How to fix", "body": "<p>This just means the <code>pd.Index</code> object underlying your <code>pd.DataFrame</code> object, unbeknownst to you, has a name:</p>\n\n<pre><code>df = pd.DataFrame({'YEAR': [2016, 2017, 2018],\n                   'JAN': [1, 2, 3],\n                   'FEB': [4, 5, 6],\n                   'MAR': [7, 8, 9]})\n\ndf.columns.name = 'month'\ndf = df.T\ndf.columns = df.iloc[0]\n\nprint(df)\n\nYEAR   2016  2017  2018\nmonth                  \nYEAR   2016  2017  2018\nJAN       1     2     3\nFEB       4     5     6\nMAR       7     8     9\n</code></pre>\n\n<p>If this really bothers you, you can use <code>reset_index</code> to elevate your index to a series and then drop the extra heading row. You can, at the same time, remove the column name:</p>\n\n<pre><code>df = df.reset_index().drop(0)\ndf.columns.name = ''\n\nprint(df)\n\n  month  2016  2017  2018\n1   JAN     1     2     3\n2   FEB     4     5     6\n3   MAR     7     8     9\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 10605364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1bca1014ab4e38fe73ebb2a3f61ff09?s=128&d=identicon&r=PG&f=1", "display_name": "A Johnston", "link": "https://stackoverflow.com/users/10605364/a-johnston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 53422029, "answer_count": 1, "score": 2, "last_activity_date": 1542844986, "creation_date": 1542843645, "last_edit_date": 1542844986, "question_id": 53421977, "link": "https://stackoverflow.com/questions/53421977/python-pandas-index-is-overlapped-how-to-fix", "title": "Python Pandas: Index is overlapped? How to fix", "body": "<p>I have created a dataframe after importing weather data, now called \"weather\". </p>\n\n<p>The end goal is to be able to view data for specific month and year. </p>\n\n<p>It started like this:<a href=\"https://i.stack.imgur.com/MQTGe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MQTGe.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then I ran <code>weather = weather.T</code> to transform the graph making it look like:\n<a href=\"https://i.stack.imgur.com/vZsJJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vZsJJ.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then I ran <code>weather.columns=weather.iloc[0]</code> to make the graph look like:\n<a href=\"https://i.stack.imgur.com/pbHu7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pbHu7.png\" alt=\"enter image description here\"></a></p>\n\n<p>But the \"year\" column and \"month\" column are located in the index (i think?). How would i get it so it looks like:\n<a href=\"https://i.stack.imgur.com/OESin.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OESin.png\" alt=\"enter image description here\"></a></p>\n\n<p>Thanks for looking! Will appreciate any help :)</p>\n\n<p><strong>Please note I will remove the first row with the years in it. So don't worry about this part</strong> </p>\n"}, {"tags": ["python", "range"], "comments": [{"owner": {"reputation": 2288, "user_id": 8408080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b487ee532f07476aea6610f459b3fdaf?s=128&d=identicon&r=PG&f=1", "display_name": "user8408080", "link": "https://stackoverflow.com/users/8408080/user8408080"}, "edited": false, "score": 0, "creation_date": 1542843898, "post_id": 53421971, "comment_id": 93718490, "body": "What is your expected outcome? If the problem is, that your refund is 0, well you will have to calculate it"}, {"owner": {"reputation": 29, "user_id": 9784920, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-siXtNClvIik/AAAAAAAAAAI/AAAAAAAAevM/n3w2uZbJbsY/photo.jpg?sz=128", "display_name": "Kyle Barnes", "link": "https://stackoverflow.com/users/9784920/kyle-barnes"}, "reply_to_user": {"reputation": 2288, "user_id": 8408080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b487ee532f07476aea6610f459b3fdaf?s=128&d=identicon&r=PG&f=1", "display_name": "user8408080", "link": "https://stackoverflow.com/users/8408080/user8408080"}, "edited": false, "score": 0, "creation_date": 1542844488, "post_id": 53421971, "comment_id": 93718647, "body": "@user8408080 Yes, that too is an issue, but I haven&#39;t gotten there yet (I&#39;m brand new to Python). The outcome should look as I described: the user should have the option to input 7 days worth of bottle amounts, but instead of each input saying &quot;Please enter the number of bottles for return,&quot; I&#39;d like them to each be a day of the week"}], "answers": [{"tags": [], "owner": {"reputation": 2288, "user_id": 8408080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b487ee532f07476aea6610f459b3fdaf?s=128&d=identicon&r=PG&f=1", "display_name": "user8408080", "link": "https://stackoverflow.com/users/8408080/user8408080"}, "is_accepted": true, "score": 0, "last_activity_date": 1542845007, "creation_date": 1542845007, "answer_id": 53422141, "question_id": 53421971, "link": "https://stackoverflow.com/questions/53421971/how-to-change-the-request-of-each-input-in-pythons-range-function/53422141#53422141", "title": "How to change the request of each input in Python&#39;s range() function", "body": "<p>Okay so first of all I listed all the weekdays in the list <code>weekdays</code>. Then I defined a function <code>refund</code> which can calculate your refund given the total amount of bottles and the refund rate. Afterwards I only need to loop over the weekdays and ask for the amount of bottles each day. Then I can calculate the refund and print it in the format <code>:.2f</code> which means \"Every digit before the point and two digits after the point\"</p>\n\n<pre><code>inputBottles = 0\ntotalBottles = 0\n\nweekdays = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\",\n            \"Sunday\"]\n\ndef refund(totalBottles, rate):\n    return totalBottles * rate\n\nprint(\"Please enter the number of bottles for each day: \")\nfor day in weekdays:\n    inputBottles = int(input(\"{}: \\t\".format(day)))\n\n    totalBottles = totalBottles + inputBottles\n\nprint(\"\")\nprint(\"You entered a total of\", totalBottles, \"bottles.\")\nprint(\"Your pay-out total is {:.2f} at a rate of $0.10 per bottle.\".format(refund(totalBottles, 0.10)))\nprint(\"\")\n</code></pre>\n\n<p>Side note: This is not really what stackoverflow is for; this is more for specific programming problems not general implementation</p>\n"}], "owner": {"reputation": 29, "user_id": 9784920, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-siXtNClvIik/AAAAAAAAAAI/AAAAAAAAevM/n3w2uZbJbsY/photo.jpg?sz=128", "display_name": "Kyle Barnes", "link": "https://stackoverflow.com/users/9784920/kyle-barnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 53422141, "answer_count": 1, "score": 0, "last_activity_date": 1542845007, "creation_date": 1542843596, "question_id": 53421971, "link": "https://stackoverflow.com/questions/53421971/how-to-change-the-request-of-each-input-in-pythons-range-function", "title": "How to change the request of each input in Python&#39;s range() function", "body": "<p>I'm trying to create a program in which a user input the number of bottles he or she returned on a day of the week. It should go like this:</p>\n\n<pre><code>Please enter the number of bottles for each day:\nSunday:\n</code></pre>\n\n<p>These should appear simultaneously. As the user inputs an integer for each day, the subsequent should appear. However, I can't achieve that. How is this done?\nHere is my code, for reference:</p>\n\n<pre><code>inputBottles = 0\ntotalBottles = 0\nrefund = totalBottles * 0.10\nx = 0\n\nfor x in range(7):\n    inputBottles = int(input(\"Please enter the number of bottles for each day: \"))\n\n    totalBottles = totalBottles + inputBottles\n\nprint(\"\")\nprint(\"You entered a total of\", totalBottles, \"bottles.\")\nprint(\"Your pay-out total is\", int(refund), \"at a rate of $0.10 per bottle.\")\nprint(\"\")\n</code></pre>\n"}, {"tags": ["python", "cookies", "flask"], "answers": [{"tags": [], "owner": {"reputation": 169, "user_id": 3728861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/821065bf1759b11f65fab383015da187?s=128&d=identicon&r=PG&f=1", "display_name": "tooTired", "link": "https://stackoverflow.com/users/3728861/tootired"}, "is_accepted": false, "score": 1, "last_activity_date": 1542862220, "creation_date": 1542862220, "answer_id": 53424075, "question_id": 53421941, "link": "https://stackoverflow.com/questions/53421941/flask-setting-cookies/53424075#53424075", "title": "Flask setting cookies", "body": "<p>You need to return resp directly, <code>make_response</code> Convert the return value from a view function to an instance of response_class.</p>\n\n<pre><code>userCookie = request.form['username']\nresp = make_response(render_template('index.html'))\nresp.set_cookie('user', userCookie)\nnext_page = request.args.get('next')\nif not next_page or url_parse(next_page).netloc != '':\n    return resp\n</code></pre>\n\n<p>In the html, get the cookie by javascript</p>\n\n<pre><code>&lt;label id=\"label_id1\"&gt;&lt;/label&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    alert(document.cookie);\n    document.getElementById('label_id1').innerhtml = document.cookie\n&lt;/script&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 314, "user_id": 10415819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/679e65849fcf8fdf7a0884ea65b1a147?s=128&d=identicon&r=PG&f=1", "display_name": "Frendom", "link": "https://stackoverflow.com/users/10415819/frendom"}, "edited": false, "score": 0, "creation_date": 1542885495, "post_id": 53424331, "comment_id": 93733567, "body": "Ok, it works fine to some extend. If i login in to website, the cookie and session is created. The cookie has value of my user. But after logout, the cookie is removed and I can login in again. I can even display my login form"}, {"owner": {"reputation": 9518, "user_id": 3129414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/0k8zH.png?s=128&g=1", "display_name": "arsho", "link": "https://stackoverflow.com/users/3129414/arsho"}, "reply_to_user": {"reputation": 314, "user_id": 10415819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/679e65849fcf8fdf7a0884ea65b1a147?s=128&d=identicon&r=PG&f=1", "display_name": "Frendom", "link": "https://stackoverflow.com/users/10415819/frendom"}, "edited": false, "score": 0, "creation_date": 1542892123, "post_id": 53424331, "comment_id": 93737171, "body": "I assume the problem is now in logout functionality. Can you update the question including the logout snippet?"}, {"owner": {"reputation": 9518, "user_id": 3129414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/0k8zH.png?s=128&g=1", "display_name": "arsho", "link": "https://stackoverflow.com/users/3129414/arsho"}, "reply_to_user": {"reputation": 314, "user_id": 10415819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/679e65849fcf8fdf7a0884ea65b1a147?s=128&d=identicon&r=PG&f=1", "display_name": "Frendom", "link": "https://stackoverflow.com/users/10415819/frendom"}, "edited": false, "score": 0, "creation_date": 1542902943, "post_id": 53424331, "comment_id": 93743162, "body": "What happens if you add <code>logout_user()</code> at the first line in my logout method?"}], "tags": [], "owner": {"reputation": 9518, "user_id": 3129414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/0k8zH.png?s=128&g=1", "display_name": "arsho", "link": "https://stackoverflow.com/users/3129414/arsho"}, "is_accepted": true, "score": 2, "last_activity_date": 1542864076, "creation_date": 1542864076, "answer_id": 53424331, "question_id": 53421941, "link": "https://stackoverflow.com/questions/53421941/flask-setting-cookies/53424331#53424331", "title": "Flask setting cookies", "body": "<p>Cookies are set in one request and can be used in another request. </p>\n\n<p>To overcome this, use <code>redirect</code> in <code>make_response</code>. </p>\n\n<p>I have attached an example of login/logout functionalities using cookies:</p>\n\n<p><code>app.py</code>:</p>\n\n<pre><code>from flask import Flask, render_template, request, make_response, flash, redirect\n\napp = Flask(__name__)\napp.config['SECRET_KEY'] = 'SUPER SECRET'\n\n@app.route('/', methods = ['GET'])\ndef home():\n    username = request.cookies.get('username')\n    if username:\n        return render_template('home.html', username=username)\n    return render_template('home.html')\n\n@app.route('/login', methods = ['GET','POST'])\ndef login():\n    username = request.cookies.get('username')\n    if username:\n        return render_template('login.html', username=username)\n    if request.method=='POST':\n        username = request.form.get('username')\n        password = request.form.get('password')\n        if username=='admin' and password=='admin':\n            flash(\"Successful login\", \"success\")\n            resp = make_response(redirect('/'))\n            resp.set_cookie('username', username)\n            return resp\n        else:\n            flash(\"Wrong username or password\", \"danger\")\n    return render_template('login.html')\n\n@app.route('/logout', methods = ['GET'])\ndef logout():\n    resp = make_response(redirect('/'))\n    resp.delete_cookie('username')\n    return resp\napp.run(debug=True)\n</code></pre>\n\n<p><code>home.html</code>:</p>\n\n<pre><code>&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;Home&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        {% with messages = get_flashed_messages() %}\n          {% if messages %}\n            &lt;ul class=flashes&gt;\n            {% for message in messages %}\n              &lt;li&gt;{{ message }}&lt;/li&gt;\n            {% endfor %}\n            &lt;/ul&gt;\n          {% endif %}\n        {% endwith %}\n        {% if username %}\n            Welcome {{ username }}. \n            &lt;a href=\"{{ url_for('logout') }}\"&gt;Click here&lt;/a&gt; to logout.\n        {% else %}\n            You are not logged in.          \n            &lt;a href=\"{{ url_for('login') }}\"&gt;Click here&lt;/a&gt; to login.\n        {% endif %}\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><code>login.html</code>:</p>\n\n<pre><code>&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;Login&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        {% with messages = get_flashed_messages() %}\n          {% if messages %}\n            &lt;ul class=flashes&gt;\n            {% for message in messages %}\n              &lt;li&gt;{{ message }}&lt;/li&gt;\n            {% endfor %}\n            &lt;/ul&gt;\n          {% endif %}\n        {% endwith %}\n\n        {% if username %}\n            You are already logged in as{{ username }}.\n            &lt;a href=\"{{ url_for('home') }}\"&gt;Click here&lt;/a&gt; to go to home.\n            &lt;a href=\"{{ url_for('logout') }}\"&gt;Click here&lt;/a&gt; to logout.\n        {% else %}\n            &lt;form method=\"post\" action=\"\"&gt;\n                &lt;label for=\"username\"&gt;Username&lt;/label&gt;\n                &lt;input type=\"text\" name=\"username\" id=\"username\"/&gt; \n                &lt;br/&gt;\n\n                &lt;label for=\"password\"&gt;Password&lt;/label&gt;\n                &lt;input type=\"password\" name=\"password\" id=\"password\"/&gt; \n                &lt;br/&gt;\n\n                &lt;input type=\"submit\" name=\"submit\" id=\"submit\" value=\"Login\"/&gt; \n            &lt;/form&gt;\n        {% endif %}\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>Screenshots:</strong></p>\n\n<p><strong>1. Before login (no cookie):</strong> </p>\n\n<p><a href=\"https://i.stack.imgur.com/dx4Pd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dx4Pd.png\" alt=\"before login\"></a></p>\n\n<p><strong>2. Login (no cookie):</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/PPCXH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PPCXH.png\" alt=\"login\"></a></p>\n\n<p><strong>3. After login (received cookie):</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/Q3v88.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q3v88.png\" alt=\"after login\"></a></p>\n\n<p><strong>4. After Logout (no cookie):</strong> </p>\n\n<p><a href=\"https://i.stack.imgur.com/9t23D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9t23D.png\" alt=\"after logout\"></a></p>\n"}], "owner": {"reputation": 314, "user_id": 10415819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/679e65849fcf8fdf7a0884ea65b1a147?s=128&d=identicon&r=PG&f=1", "display_name": "Frendom", "link": "https://stackoverflow.com/users/10415819/frendom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4409, "favorite_count": 0, "accepted_answer_id": 53424331, "answer_count": 2, "score": 0, "last_activity_date": 1542897878, "creation_date": 1542843345, "last_edit_date": 1542897878, "question_id": 53421941, "link": "https://stackoverflow.com/questions/53421941/flask-setting-cookies", "title": "Flask setting cookies", "body": "<p>I try to set cookies in Flask, but I don't get what I want to. Instead of getting username I get an respone attached to my URL. \nMy <strong>routes.py</strong></p>\n\n<pre><code>@app.route('/login', methods=['GET', 'POST'])\ndef login():\n    if current_user.is_authenticated:\n        return redirect(url_for('index'))\n    form = LoginForm()\n    if form.validate_on_submit():\n        user = User.query.filter_by(username=form.username.data).first()\n        if user is None or not user.check_password(form.password.data):\n            flash('Invalid username or password')\n            return redirect(url_for('login'))\n        login_user(user, remember=form.remember_me.data)\n\n        userCookie = request.form['username']\n        resp = make_response(render_template('index.html'))\n        resp.set_cookie('user', userCookie)\n        next_page = request.args.get('next')\n        if not next_page or url_parse(next_page).netloc != '':\n            next_page = url_for('index', resp=resp)\n        return redirect(next_page)\n    return render_template('login.html', title='Sign In', form=form)\n</code></pre>\n\n<p>And I want to display the content of cooki in <strong>index.html</strong></p>\n\n<pre><code>{% for r in resp %}\n  {{ r }}\n{% endfor %}  \n</code></pre>\n\n<p>Instead I get: </p>\n\n<pre><code>index?resp&lt;Response+1250+bytes+[200+OK]&gt;\n</code></pre>\n\n<p>What am I doing wrong?</p>\n\n<p>[EDIT - logout method]</p>\n\n<p>That's my method before adding cookies</p>\n\n<pre><code>@app.route('/logout')\ndef logout():\n  logout_user()\n  return redirect(url_for('index'))\n</code></pre>\n\n<p>So if I added cookies:</p>\n\n<pre><code>@app.route('/logout')\ndef logout():\n    resp = make_response(redirect('/login'))\n    resp.delete_cookie('user')\n</code></pre>\n\n<p>And if I rester server, login, the cookie is created, but after logout I can even go to the endpoint /login\n        return resp</p>\n"}, {"tags": ["python", "random"], "comments": [{"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 0, "creation_date": 1542884800, "post_id": 53421928, "comment_id": 93733166, "body": "Also, consider using <code>linecache</code>. <a href=\"https://stackoverflow.com/a/53268537/3620003\">Here</a> is a demo."}], "answers": [{"tags": [], "owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "is_accepted": true, "score": 5, "last_activity_date": 1542843513, "creation_date": 1542843513, "answer_id": 53421957, "question_id": 53421928, "link": "https://stackoverflow.com/questions/53421928/remove-blank-line-that-appears-after-every-string/53421957#53421957", "title": "Remove blank line that appears after every string", "body": "<p>Your lines in <code>read_file</code> contain newline characters, and then <code>print</code> adds another one by default. You can avoid the second newline with <code>print(random.choice(the_line), end='')</code>.</p>\n\n<p>Other comments:</p>\n\n<ul>\n<li><code>read_file.close</code> does nothing because you forgot to call the method.</li>\n<li>In addition, even doing <code>read_file.close()</code> would be pointless because employing the <code>with</code> statement already handles closing the file.</li>\n<li><code>the_line</code> is a confusing variable name because it's many lines.</li>\n<li>You should probably read the file into memory once (it does not seem to be gigantic) instead of opening and reading it every time <code>random_player</code> is called.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 687, "user_id": 940510, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dca6fa99c5facfb4981bb78550641c83?s=128&d=identicon&r=PG", "display_name": "Bishal", "link": "https://stackoverflow.com/users/940510/bishal"}, "is_accepted": false, "score": 1, "last_activity_date": 1542843703, "creation_date": 1542843703, "answer_id": 53421984, "question_id": 53421928, "link": "https://stackoverflow.com/questions/53421928/remove-blank-line-that-appears-after-every-string/53421984#53421984", "title": "Remove blank line that appears after every string", "body": "<p><strong>timgeb</strong>'s answer is one way to do it, you could also try trimming the newline at the end of your lines.</p>\n\n<pre><code>print(random.choice(the_line).strip('\\n'))\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 10671943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aRzfS.jpg?s=128&g=1", "display_name": "dehnm", "link": "https://stackoverflow.com/users/10671943/dehnm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 53421957, "answer_count": 2, "score": 2, "last_activity_date": 1542843703, "creation_date": 1542843272, "last_edit_date": 1542843688, "question_id": 53421928, "link": "https://stackoverflow.com/questions/53421928/remove-blank-line-that-appears-after-every-string", "title": "Remove blank line that appears after every string", "body": "<p>This program works fine but I'm having trouble removing the blank lines after every player. I've tried to use <code>.strip</code> but I get the error <code>'list' object has no attribute 'strip'</code></p>\n\n<pre><code>import random\n\ndef random_player(datafile):\n    with open (datafile, 'r') as read_file:\n        the_line = read_file.readlines()\n        print(random.choice(the_line))\n\nrandom_player(file_name)\nrandom_player(file_name)\nrandom_player(file_name)\nrandom_player(file_name)\nrandom_player(file_name)\n</code></pre>\n\n<p>What I get:</p>\n\n<pre><code>Toney Douglas\n\nAdonal Foyle\n\nNate Hawthorne\n\nJoe Stephens\n\nGary Payton II\n</code></pre>\n\n<p>What I want:</p>\n\n<pre><code>Toney Douglas\nAdonal Foyle\nNate Hawthorne\nJoe Stephens\nGary Payton II\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "jupyter-notebook"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1542847786, "post_id": 53421905, "comment_id": 93719411, "body": "Did you restart IPython after reinstalling matplotlib?"}, {"owner": {"reputation": 123, "user_id": 5204625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W6NuG.png?s=128&g=1", "display_name": "Daniel Wlaz\u0142o", "link": "https://stackoverflow.com/users/5204625/daniel-wlaz%c5%82o"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1542903390, "post_id": 53421905, "comment_id": 93743413, "body": "Of course! But it didn&#39;t help. :/"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1543161756, "post_id": 53421905, "comment_id": 93809085, "body": "Maybe IPython tries to use another/different/old version of matplotlib it would find instead of the one you installed."}], "answers": [{"comments": [{"owner": {"reputation": 895, "user_id": 7267340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0707e96b7a311794f0d29149ea927d51?s=128&d=identicon&r=PG&f=1", "display_name": "sigurdb", "link": "https://stackoverflow.com/users/7267340/sigurdb"}, "edited": false, "score": 0, "creation_date": 1586978755, "post_id": 53936824, "comment_id": 108332814, "body": "For me this was with networkx2.2 and matplotlib3.2.1, it was not enough having both on the conda side, I had to upgrade to networkx 2.4"}, {"owner": {"reputation": 2536, "user_id": 3789866, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/E1S8b.png?s=128&g=1", "display_name": "Dataman", "link": "https://stackoverflow.com/users/3789866/dataman"}, "edited": false, "score": 0, "creation_date": 1588758061, "post_id": 53936824, "comment_id": 109018896, "body": "Was there a reason that you did not use <code>conda uninstall matplotlib</code>?"}, {"owner": {"reputation": 1159, "user_id": 4121361, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d802f4c0fe7bd02763e221df67f3c7b6?s=128&d=identicon&r=PG&f=1", "display_name": "Jan", "link": "https://stackoverflow.com/users/4121361/jan"}, "reply_to_user": {"reputation": 2536, "user_id": 3789866, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/E1S8b.png?s=128&g=1", "display_name": "Dataman", "link": "https://stackoverflow.com/users/3789866/dataman"}, "edited": false, "score": 1, "creation_date": 1593076640, "post_id": 53936824, "comment_id": 110654831, "body": "@Dataman because the package that should be removed is the one in pip. Only one matplotlib will be remained (which is the upgraded conda one)"}], "tags": [], "owner": {"reputation": 106, "user_id": 10836554, "user_type": "registered", "profile_image": "https://graph.facebook.com/1908330245947148/picture?type=large", "display_name": "Stanila Andrei", "link": "https://stackoverflow.com/users/10836554/stanila-andrei"}, "is_accepted": true, "score": 9, "last_activity_date": 1545856125, "creation_date": 1545856125, "answer_id": 53936824, "question_id": 53421905, "link": "https://stackoverflow.com/questions/53421905/matplotlib-attributeerror-module-matplotlib-cbook-has-no-attribute-define-a/53936824#53936824", "title": "Matplotlib AttributeError: module &#39;matplotlib.cbook&#39; has no attribute &#39;_define_aliases&#39;", "body": "<p>I had this exact error .The problem was that 2 packages of matplotlib was installed one by conda and one by pip</p>\n\n<p>To test for this:</p>\n\n<p><code>$ conda list matplotlib</code></p>\n\n<p>matplotlib                2.0.2               np113py35_0\nmatplotlib                2.1.1                     </p>\n\n<p>Problem! Fix:</p>\n\n<p><code>$ pip uninstall matplotlib</code></p>\n\n<p>Probably a good idea to force matplotlib upgrade to the version pip wanted:</p>\n\n<p><code>$ conda install matplotlib=2.1.1</code></p>\n"}, {"tags": [], "owner": {"reputation": 89, "user_id": 3817190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FHOZr.jpg?s=128&g=1", "display_name": "Lukasavicus", "link": "https://stackoverflow.com/users/3817190/lukasavicus"}, "is_accepted": false, "score": 0, "last_activity_date": 1586020005, "creation_date": 1586020005, "answer_id": 61031709, "question_id": 53421905, "link": "https://stackoverflow.com/questions/53421905/matplotlib-attributeerror-module-matplotlib-cbook-has-no-attribute-define-a/61031709#61031709", "title": "Matplotlib AttributeError: module &#39;matplotlib.cbook&#39; has no attribute &#39;_define_aliases&#39;", "body": "<p>One thing you could do to guarantee the desinstallation is delete the folder of matplotlib.\nIn Windows you may found in:</p>\n\n<p>C:\\Users\\YOUR_USER\\AppData\\Local\\Programs\\Python\\YOUR_PYTHON_VERSION\\Lib\\site-packages</p>\n\n<p>If you have a folder named 'matplotlib' delete it and them reinstall the package.</p>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 9546160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd6c635d4854ab5ec5bfef110f5cd5c?s=128&d=identicon&r=PG&f=1", "display_name": "Electromagnet", "link": "https://stackoverflow.com/users/9546160/electromagnet"}, "is_accepted": false, "score": 0, "last_activity_date": 1591500288, "creation_date": 1591500288, "answer_id": 62240460, "question_id": 53421905, "link": "https://stackoverflow.com/questions/53421905/matplotlib-attributeerror-module-matplotlib-cbook-has-no-attribute-define-a/62240460#62240460", "title": "Matplotlib AttributeError: module &#39;matplotlib.cbook&#39; has no attribute &#39;_define_aliases&#39;", "body": "<p>I had exactly the same error after installing scikit. The workaround for that was to upgrade pip using the following command first before installing any other packages.</p>\n\n<pre><code>!pip install pip --upgrade\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 5204625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W6NuG.png?s=128&g=1", "display_name": "Daniel Wlaz\u0142o", "link": "https://stackoverflow.com/users/5204625/daniel-wlaz%c5%82o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14394, "favorite_count": 2, "accepted_answer_id": 53936824, "answer_count": 3, "score": 12, "last_activity_date": 1619087717, "creation_date": 1542843067, "question_id": 53421905, "link": "https://stackoverflow.com/questions/53421905/matplotlib-attributeerror-module-matplotlib-cbook-has-no-attribute-define-a", "title": "Matplotlib AttributeError: module &#39;matplotlib.cbook&#39; has no attribute &#39;_define_aliases&#39;", "body": "<p>When trying to plot a graph on jupyter with pyplot I am running the following code:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nplt.plot([1,2,3,4])\nplt.ylabel('some numbers')\nplt.show()\n</code></pre>\n\n<p>This is returning the following error:</p>\n\n<pre><code>AttributeError                            Traceback (most recent call last)\n&lt;ipython-input-16-51b004b519a9&gt; in &lt;module&gt;()\n----&gt; 1 get_ipython().run_line_magic('matplotlib', 'inline')\n      2 \n      3 \n      4 import matplotlib.pyplot as plt\n      5 plt.plot([1,2,3,4])\n\nc:\\program files (x86)\\microsoft visual studio\\shared\\python36_64\\lib\\site-packages\\IPython\\core\\interactiveshell.py in run_line_magic(self, magic_name, line, _stack_depth)\n   2129                 kwargs['local_ns'] = sys._getframe(stack_depth).f_locals\n   2130             with self.builtin_trap:\n-&gt; 2131                 result = fn(*args,**kwargs)\n   2132             return result\n   2133 \n\n&lt;decorator-gen-108&gt; in matplotlib(self, line)\n\nc:\\program files (x86)\\microsoft visual studio\\shared\\python36_64\\lib\\site-packages\\IPython\\core\\magic.py in &lt;lambda&gt;(f, *a, **k)\n    185     # but it's overkill for just that one bit of state.\n    186     def magic_deco(arg):\n--&gt; 187         call = lambda f, *a, **k: f(*a, **k)\n    188 \n    189         if callable(arg):\n\nc:\\program files (x86)\\microsoft visual studio\\shared\\python36_64\\lib\\site-packages\\IPython\\core\\magics\\pylab.py in matplotlib(self, line)\n     97             print(\"Available matplotlib backends: %s\" % backends_list)\n     98         else:\n---&gt; 99             gui, backend = self.shell.enable_matplotlib(args.gui)\n    100             self._show_matplotlib_backend(args.gui, backend)\n    101 \n\nc:\\program files (x86)\\microsoft visual studio\\shared\\python36_64\\lib\\site-packages\\IPython\\core\\interactiveshell.py in enable_matplotlib(self, gui)\n   3049                 gui, backend = pt.find_gui_and_backend(self.pylab_gui_select)\n   3050 \n-&gt; 3051         pt.activate_matplotlib(backend)\n   3052         pt.configure_inline_support(self, backend)\n   3053 \n\nc:\\program files (x86)\\microsoft visual studio\\shared\\python36_64\\lib\\site-packages\\IPython\\core\\pylabtools.py in activate_matplotlib(backend)\n    308     matplotlib.rcParams['backend'] = backend\n    309 \n--&gt; 310     import matplotlib.pyplot\n    311     matplotlib.pyplot.switch_backend(backend)\n    312 \n\nc:\\program files (x86)\\microsoft visual studio\\shared\\python36_64\\lib\\site-packages\\matplotlib\\pyplot.py in &lt;module&gt;()\n     30 from cycler import cycler\n     31 import matplotlib\n---&gt; 32 import matplotlib.colorbar\n     33 import matplotlib.image\n     34 from matplotlib import rcsetup, style\n\nc:\\program files (x86)\\microsoft visual studio\\shared\\python36_64\\lib\\site-packages\\matplotlib\\colorbar.py in &lt;module&gt;()\n     28 import matplotlib.artist as martist\n     29 import matplotlib.cbook as cbook\n---&gt; 30 import matplotlib.collections as collections\n     31 import matplotlib.colors as colors\n     32 import matplotlib.contour as contour\n\nc:\\program files (x86)\\microsoft visual studio\\shared\\python36_64\\lib\\site-packages\\matplotlib\\collections.py in &lt;module&gt;()\n     17 \n     18 import matplotlib as mpl\n---&gt; 19 from . import (_path, artist, cbook, cm, colors as mcolors, docstring,\n     20                lines as mlines, path as mpath, transforms)\n     21 \n\nc:\\program files (x86)\\microsoft visual studio\\shared\\python36_64\\lib\\site-packages\\matplotlib\\lines.py in &lt;module&gt;()\n    206 \n    207 \n--&gt; 208 @cbook._define_aliases({\n    209     \"antialiased\": [\"aa\"],\n    210     \"color\": [\"c\"],\n\nAttributeError: module 'matplotlib.cbook' has no attribute '_define_aliases'\n</code></pre>\n\n<p>My matplotlib has always worked fine without the jupyter. I have tried a complete reinstall of matplotlib, jupyter and python again since but still getting the same error. Maybe someone had the same problem?</p>\n"}, {"tags": ["python", "python-2.7", "loops", "numpy", "matrix"], "comments": [{"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 0, "creation_date": 1542843028, "post_id": 53421873, "comment_id": 93718237, "body": "In short: It creates a 4 by 4 array where each cell in the lower left triangle has the value <code>i - j + 1</code> where <code>i</code> is the row index and <code>j</code> is the column index. You need to be more specific about what you don&#39;t understand if that does not solve the issue."}, {"owner": {"reputation": 1, "user_id": 10688354, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217229748151845/picture?type=large", "display_name": "Ayl&#237;n P&#233;rez", "link": "https://stackoverflow.com/users/10688354/ayl%c3%adn-p%c3%a9rez"}, "reply_to_user": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 0, "creation_date": 1542843216, "post_id": 53421873, "comment_id": 93718298, "body": "Thanks for your prompt reply! My question is how do I know that the lower left triangle is the one where the matrix formula executes. Sorry if it is way too obvious, but I am a complete begginner"}, {"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 0, "creation_date": 1542843299, "post_id": 53421873, "comment_id": 93718324, "body": "The outer <code>for</code> loop iterates over the row indices. The inner <code>for</code> loop iterates over the columns, but only up to the column number that is equal to the current row number."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10688354, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217229748151845/picture?type=large", "display_name": "Ayl&#237;n P&#233;rez", "link": "https://stackoverflow.com/users/10688354/ayl%c3%adn-p%c3%a9rez"}, "edited": false, "score": 2, "creation_date": 1542844064, "post_id": 53421921, "comment_id": 93718533, "body": "Thank you very much, this was really helpful!!"}], "tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": false, "score": 2, "last_activity_date": 1542843217, "creation_date": 1542843217, "answer_id": 53421921, "question_id": 53421873, "link": "https://stackoverflow.com/questions/53421873/python-simple-question-numpy-matrix-loop/53421921#53421921", "title": "Python - Simple Question: Numpy Matrix, Loop", "body": "<p>You can add the following print statement, and the loop will explain itself at each iteration:</p>\n\n<pre><code>n=4\nmatrix=np.zeros((n,n))\nfor i in range (0,n):\n    for j in range(0,i+1):\n        print(f'inserting {i-j+1} into the matrix at row index {i}, columns index {j}')\n        matrix[i,j]=i-j+1\n</code></pre>\n\n<p>When you run it, you get this output:</p>\n\n<pre><code>inserting 1 into the matrix at row index 0, columns index 0\ninserting 2 into the matrix at row index 1, columns index 0\ninserting 1 into the matrix at row index 1, columns index 1\n...\ninserting 3 into the matrix at row index 3, columns index 1\ninserting 2 into the matrix at row index 3, columns index 2\ninserting 1 into the matrix at row index 3, columns index 3\n</code></pre>\n\n<p>And your matrix is populated as before:</p>\n\n<pre><code>&gt;&gt;&gt; matrix\narray([[1., 0., 0., 0.],\n       [2., 1., 0., 0.],\n       [3., 2., 1., 0.],\n       [4., 3., 2., 1.]])\n</code></pre>\n\n<p>Just for reference:</p>\n\n<pre><code>&gt;&gt;&gt; matrix\narray([[1., 0., 0., 0.],   #&lt;- \"row\" index 0\n       [2., 1., 0., 0.],   #&lt;- \"row\" index 1\n       [3., 2., 1., 0.],   #&lt;- \"row\" index 2\n       [4., 3., 2., 1.]])  #&lt;- \"row\" index 3\n\n      # ^      ...  ^\n      # \"col\" 0     \"col\" 3\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10688354, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217229748151845/picture?type=large", "display_name": "Ayl&#237;n P&#233;rez", "link": "https://stackoverflow.com/users/10688354/ayl%c3%adn-p%c3%a9rez"}, "edited": false, "score": 0, "creation_date": 1542844390, "post_id": 53422020, "comment_id": 93718609, "body": "Thank you, really helpful!"}], "tags": [], "owner": {"reputation": 385, "user_id": 10605475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqeuL.png?s=128&g=1", "display_name": "DavidPM", "link": "https://stackoverflow.com/users/10605475/davidpm"}, "is_accepted": false, "score": 1, "last_activity_date": 1542844006, "creation_date": 1542844006, "answer_id": 53422020, "question_id": 53421873, "link": "https://stackoverflow.com/questions/53421873/python-simple-question-numpy-matrix-loop/53422020#53422020", "title": "Python - Simple Question: Numpy Matrix, Loop", "body": "<pre><code>import numpy as np\nn=4\n</code></pre>\n\n<p>We start by setting a 4x4 matrix with all coordinates set to null:</p>\n\n<pre><code>matrix=np.zeros((n,n))         \n</code></pre>\n\n<p>We set new coordinate values by looping through rows and columns. First we loop through rows, from index 0 to n-1:</p>\n\n<pre><code>for i in range (0,n): \n</code></pre>\n\n<p>We next loop through columns. Now, notice that we only loop through those columns whose index is smaller than or equal to that of the current row (i.e., from 0 to i). This way we make sure that the values we set are on or below the diagonal of the matrix:</p>\n\n<pre><code>    for j in range(0,i+1):     \n</code></pre>\n\n<p>Finally, we set the desired value for the current coordinate:</p>\n\n<pre><code>        matrix[i,j]=i-j+1\nprint(matrix)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10688354, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217229748151845/picture?type=large", "display_name": "Ayl&#237;n P&#233;rez", "link": "https://stackoverflow.com/users/10688354/ayl%c3%adn-p%c3%a9rez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1542847270, "creation_date": 1542842893, "last_edit_date": 1542847270, "question_id": 53421873, "link": "https://stackoverflow.com/questions/53421873/python-simple-question-numpy-matrix-loop", "title": "Python - Simple Question: Numpy Matrix, Loop", "body": "<p>I am fairly new to python and I am trying to get around understanding the following code:</p>\n\n<pre><code>import numpy as np\nn=4\nmatrix=np.zeros((n,n))\nfor j in range (0,n):\n    for i in range (n-1,n-j-2,-1):\n        matrix[i,j]=2*n-i-j-1\nprint (matrix)\n</code></pre>\n\n<p>I would greatly appreciate if someone could please help me understand how each line executes and how the code is revaluated with the loop.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "command-line", "youtube", "google-api", "youtube-api"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 1, "creation_date": 1542843151, "post_id": 53421862, "comment_id": 93718275, "body": "Mistakes are probably normal, yes. We&#39;d need to know what they are to fix them. See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and how to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 14798, "user_id": 4111404, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-kzPWJe4orps/AAAAAAAAAAI/AAAAAAAAABE/L-IQwWBiNJU/photo.jpg?sz=128", "display_name": "Luis Miguel Mej&#237;a Su&#225;rez", "link": "https://stackoverflow.com/users/4111404/luis-miguel-mej%c3%ada-su%c3%a1rez"}, "edited": false, "score": 0, "creation_date": 1542845541, "post_id": 53421862, "comment_id": 93718945, "body": "They use <b>Python 2</b> in their example, maybe you&#39;re using <b>Python 3</b>? - that may explain the <i>syntax errors</i>."}], "owner": {"reputation": 41, "user_id": 10665388, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SEuvEDX9S2Y/AAAAAAAAAAI/AAAAAAAAAEQ/jtsKaiGR5K4/photo.jpg?sz=128", "display_name": "CYRUS", "link": "https://stackoverflow.com/users/10665388/cyrus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542842783, "creation_date": 1542842783, "question_id": 53421862, "link": "https://stackoverflow.com/questions/53421862/something-went-wrong-with-youtube-api-python-file", "title": "Something went wrong with youtube API python file", "body": "<p>I'm facing a problem with the youtube API on their website, everything worked well until the final stage where the script they are giving us is not working properly is seems that the synthax they wrote includes some mistakes (<a href=\"https://developers.google.com/youtube/v3/guides/uploading_a_video\" rel=\"nofollow noreferrer\">https://developers.google.com/youtube/v3/guides/uploading_a_video</a>);\nwhen I run this program python upload_video.py command line gives me several mistakes \nthe question is is it normal ? and how can I fix this in order to be able to use the API properly ?</p>\n\n<p>Thanks a lot for your help</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1542843238, "post_id": 53421855, "comment_id": 93718305, "body": "Do you want to return a <code>True&#47;False</code> result, or return the modified string?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1542843359, "post_id": 53421855, "comment_id": 93718338, "body": "When you say the first char shouldn&#39;t be deleted, do you mean the first vowel shouldn&#39;t be deleted, or the first char of any type? E.g. what should be the result for <code>word = &quot;bace&quot;</code>, <code>bc</code> or <code>bac</code>?"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1542843389, "post_id": 53421855, "comment_id": 93718347, "body": "if its <code>bac</code> that makes my solution invalid"}, {"owner": {"reputation": 87, "user_id": 10110318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b68fcf303b8f13ece4bacb5fbea6ab?s=128&d=identicon&r=PG", "display_name": "Rados\u0142aw Hryniewicki", "link": "https://stackoverflow.com/users/10110318/rados%c5%82aw-hryniewicki"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1542875528, "post_id": 53421855, "comment_id": 93727607, "body": "@Barmar want a return an int which tell me how many vowels are in string. True = 1, False !=1"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1542953912, "post_id": 53421855, "comment_id": 93755883, "body": "But you also said you want to delete vowels from the string. Do you want two returns, the count of vowels and the new string?"}], "answers": [{"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 0, "last_activity_date": 1542843672, "last_edit_date": 1542843672, "creation_date": 1542843107, "answer_id": 53421910, "question_id": 53421855, "link": "https://stackoverflow.com/questions/53421855/check-if-a-string-contains-any-char-from-set/53421910#53421910", "title": "check if a string contains any char from set", "body": "<p>You can use a <code>for</code> loop as below. The idea is to build a list, and use a flag to mark when you meet a character from <code>vowels</code>.</p>\n\n<pre><code>word = \"anAconda_elEphant\"\nvowels = set('aeiouyAEIOUY')\n\nflag = False\n\nL = []\nfor ch in word:\n    if (ch not in vowels) or (not flag):\n        L.append(ch)\n    if ch in vowels:\n        flag = True\n\nword = ''.join(L)\n\nprint(word)\n\nancnd_lphnt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1542843737, "post_id": 53421920, "comment_id": 93718434, "body": "Wished I had the mental capacity to finangle with my own REGEX. Nice answer"}], "tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": false, "score": 1, "last_activity_date": 1542843876, "last_edit_date": 1542843876, "creation_date": 1542843199, "answer_id": 53421920, "question_id": 53421855, "link": "https://stackoverflow.com/questions/53421855/check-if-a-string-contains-any-char-from-set/53421920#53421920", "title": "check if a string contains any char from set", "body": "<p>just use a regular expression </p>\n\n<pre><code>import re\nword = \"anAconda_elEphant\"\n# use a  \"lookbehind\" to make sure there is at least one character in front of this character...\nprint(re.sub(\"(?&lt;=.)[aeiouyAEIOUY]\",'',word))\n# 'ancnd_lphnt'\n</code></pre>\n\n<p>as mentioned if you expect it to skip the first match of the set as opposed to just the first letter you will need a different solution</p>\n\n<pre><code>print(re.sub(\"(?&lt;=.)[aeiouyAEIOUY]\",'',\"bace\"))\n# 'bc' # a is not the FIRST letter so it is replaced\n</code></pre>\n\n<p>the easiest is to split it into two steps\nfirst split the string on the first match</p>\n\n<pre><code>word = \"bace\"\nsplitted_string = re.split(\"(.*?[aeiouyAEIOUY])\",word,1)\n# you will notice we have an extra empty string at the beginning of our matches ... so we can skip that\nlhs,rhs = splitted_string[1:]\n# now just run a simple re.sub on our rhs and rejoin the halves\nprint(lhs + re.sub(\"[aeiouyAEIOUY]\",'',rhs))\n# results in \"bac\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1542954033, "post_id": 53422306, "comment_id": 93755923, "body": "He wants to remove the vowels, so it should be <code>word.difference(vowels)</code>"}, {"owner": {"reputation": 7880, "user_id": 904887, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bad58e069ea1f864dca124bafde36943?s=128&d=identicon&r=PG", "display_name": "rich tier", "link": "https://stackoverflow.com/users/904887/rich-tier"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1542984187, "post_id": 53422306, "comment_id": 93770116, "body": "actually, neither would work if there are duplicate consonants - only one of the duplicates would survive."}], "tags": [], "owner": {"reputation": 7880, "user_id": 904887, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bad58e069ea1f864dca124bafde36943?s=128&d=identicon&r=PG", "display_name": "rich tier", "link": "https://stackoverflow.com/users/904887/rich-tier"}, "is_accepted": false, "score": 0, "last_activity_date": 1542846511, "creation_date": 1542846511, "answer_id": 53422306, "question_id": 53421855, "link": "https://stackoverflow.com/questions/53421855/check-if-a-string-contains-any-char-from-set/53422306#53422306", "title": "check if a string contains any char from set", "body": "<pre><code>print(vowels.intersection(word))\n</code></pre>\n\n<p><a href=\"https://docs.python.org/3/library/stdtypes.html#frozenset.intersection\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/stdtypes.html#frozenset.intersection</a></p>\n"}], "owner": {"reputation": 87, "user_id": 10110318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b68fcf303b8f13ece4bacb5fbea6ab?s=128&d=identicon&r=PG", "display_name": "Rados\u0142aw Hryniewicki", "link": "https://stackoverflow.com/users/10110318/rados%c5%82aw-hryniewicki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1542846511, "creation_date": 1542842749, "last_edit_date": 1542842955, "question_id": 53421855, "link": "https://stackoverflow.com/questions/53421855/check-if-a-string-contains-any-char-from-set", "title": "check if a string contains any char from set", "body": "<p>Actually, i'm working on a task from SPOJ. How to check if a string contains any char from set, but first char from string where a char from set occur can not be deleted. </p>\n\n<p>F.e.\nHave a string </p>\n\n<pre><code>word = \"anAconda_elEphant\"\n</code></pre>\n\n<p>and a set of vowels: </p>\n\n<pre><code>vowels = set('aeiouyAEIOUY')\n</code></pre>\n\n<p>I want in result a string </p>\n\n<pre><code>word = \"ancnd_lphnt\"\n</code></pre>\n\n<p>This should return True when occurence of any char in set is equal 1. I know that argument for a method <strong>.count()</strong> must be str, not set.</p>\n\n<pre><code>if word.count(vowels) == 1:\n   for char in word[char_pos:]:\n        if char in vowels:\n            char.replace('')\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas", "python-2.7", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 8568, "user_id": 9177877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5qL1i.png?s=128&g=1", "display_name": "It_is_Chris", "link": "https://stackoverflow.com/users/9177877/it-is-chris"}, "is_accepted": false, "score": 1, "last_activity_date": 1542856757, "creation_date": 1542856757, "answer_id": 53423394, "question_id": 53421843, "link": "https://stackoverflow.com/questions/53421843/extending-dates-for-values-in-a-dataframe-python/53423394#53423394", "title": "Extending dates for values in a dataframe Python", "body": "<p>I would create a function that uses <code>pd.date_range</code> with a freq of months:</p>\n\n<p>This functions assumes that you have three regions but can be modified for more.</p>\n\n<pre><code>def myFunction(df, periods, freq='M'):\n    # find the last date in the df\n    last = pd.to_datetime(df.Year*10000+df.Month*100+1,format='%Y%m%d').max()\n\n    # create new date range based on n periods with a freq of months\n    newDates = pd.date_range(start=last, periods=periods+1, freq=freq)\n    newDates = newDates[newDates&gt;last]\n    newDates = newDates[:periods+1]\n    new_df = pd.DataFrame({'Date':newDates})[1:]\n\n    # convert Date to year and month columns\n    new_df['Year'] = new_df['Date'].dt.year\n    new_df['Month'] = new_df['Date'].dt.month\n    new_df.drop(columns='Date', inplace=True)\n\n    # add your three regions and ffill values\n    west = df[:-2].append([new_df], sort=False, ignore_index=True).ffill()\n    east = df[:-1].append([new_df], sort=False, ignore_index=True).ffill()\n    north = df.append([new_df], sort=False, ignore_index=True).ffill()\n\n    # append you three region dfs and drop duplicates\n    new = west.append([east,north], sort=False, ignore_index=True).drop_duplicates()\n    return new.sort_values(['Year', 'Month']).reset_index().drop(columns='index')\n\nmyFunction(df,3)\n</code></pre>\n\n<p>with periods set to three this will return the next three months...</p>\n\n<pre><code>    Year    Month   Region  Value1  Value2\n0   2016    1        west   2.0      3.0\n1   2016    1        east   4.0      5.0\n2   2016    1        north  5.0      3.0\n3   2016    2        west   6.0      4.0\n4   2016    2        east   7.0      3.0\n5   2016    12       west   2.0      3.0\n6   2016    12       east   3.0      7.0\n7   2016    12       north  6.0      8.0\n8   2017    1        west   2.0      3.0\n9   2018    7        west   1.0      1.0\n10  2018    7        east   9.0      9.0\n11  2018    7        north  5.0      1.0\n12  2018    8        west   1.0      1.0\n13  2018    8        east   9.0      9.0\n14  2018    8        north  5.0      1.0\n15  2018    9        west   1.0      1.0\n16  2018    9        east   9.0      9.0\n17  2018    9        north  5.0      1.0\n18  2018    10       west   1.0      1.0\n19  2018    10       east   9.0      9.0\n20  2018    10       north  5.0      1.0\n</code></pre>\n"}], "owner": {"reputation": 1553, "user_id": 8378885, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10159144384065441/picture?type=large", "display_name": "HelloToEarth", "link": "https://stackoverflow.com/users/8378885/hellotoearth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542856757, "creation_date": 1542842620, "question_id": 53421843, "link": "https://stackoverflow.com/questions/53421843/extending-dates-for-values-in-a-dataframe-python", "title": "Extending dates for values in a dataframe Python", "body": "<p>I have data that looks like:</p>\n\n<pre><code>Year      Month       Region       Value1       Value2\n2016        1         west         2            3\n2016        1         east         4            5\n2016        1         north        5            3\n2016        2         west         6            4\n2016        2         east         7            3\n.\n.\n2016        12        west         2            3\n2016        12        east         3            7\n2016        12        north        6            8\n2017        1         west         2            3\n.\n.\n2018        7         west         1            1\n2018        7         east         9            9\n2018        7         north        5            1\n</code></pre>\n\n<p>I want to extend my values into Year 2021 for each Month but keep the previous values from the final month in the set (Month 7 of Year 2018).</p>\n\n<p>The desired output would be attached to the ends of each set by Region, Month, and Year like:</p>\n\n<pre><code>2018        7         west         1            1\n2018        7         east         9            9\n2018        7         north        5            1\n2018        8         west         1            1\n2018        8         east         9            9\n2018        8         north        5            1\n2018        9         west         1            1\n2018        9         east         9            9\n2018        9         north        5            1\n.\n.\n2019        7         west         1            1\n2019        7         east         9            9\n2019        7         north        5            1\n.\n.\n2021        7         west         1            1\n2021        7         east         9            9\n2021        7         north        5            1\n</code></pre>\n\n<p>What would the best way to approach this be?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 1, "last_activity_date": 1542842738, "creation_date": 1542842738, "answer_id": 53421853, "question_id": 53421801, "link": "https://stackoverflow.com/questions/53421801/all-combinations-of-two-dataframes/53421853#53421853", "title": "All combinations of two dataframes", "body": "<p>Assuming you start with dataframes <code>df1</code> and <code>df2</code>, first melt <code>df2</code> (wide-to-long), convert your percentages to numeric, then merge with <code>df1</code>:</p>\n\n<pre><code>df2 = pd.melt(df2, id_vars='Week', value_vars=['Product1', 'Product2', 'Product3'])\ndf2['value'] = pd.to_numeric(df2['value'].str[:-1])\n\nres = df1.merge(df2)\\\n         .eval('Value = Value * value / 100')\\\n         .drop('value', 1)\n\nprint(res)\n\n    id Country Channel     Week  Value  variable\n0    0      ES   Train  2018-48  250.0  Product1\n1    0      ES   Train  2018-48  500.0  Product2\n2    0      ES   Train  2018-48  250.0  Product3\n3    1      ES   Train  2018-49  250.0  Product1\n4    1      ES   Train  2018-49  500.0  Product2\n5    1      ES   Train  2018-49  250.0  Product3\n6    2      ES   Train  2018-50  250.0  Product1\n7    2      ES   Train  2018-50  500.0  Product2\n8    2      ES   Train  2018-50  250.0  Product3\n9    3      ES   Train  2018-51  250.0  Product1\n10   3      ES   Train  2018-51  500.0  Product2\n11   3      ES   Train  2018-51  250.0  Product3\n12   4      ES   Train  2018-52  250.0  Product1\n13   4      ES   Train  2018-52  500.0  Product2\n14   4      ES   Train  2018-52  250.0  Product3\n</code></pre>\n"}], "owner": {"reputation": 634, "user_id": 2478928, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9e1fe8ece423a7c689c4821f4340da94?s=128&d=identicon&r=PG", "display_name": "Bishonen_PL", "link": "https://stackoverflow.com/users/2478928/bishonen-pl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 53421853, "answer_count": 1, "score": 2, "last_activity_date": 1542842738, "creation_date": 1542842331, "question_id": 53421801, "link": "https://stackoverflow.com/questions/53421801/all-combinations-of-two-dataframes", "title": "All combinations of two dataframes", "body": "<p>Having two dataframes:</p>\n\n<pre><code>id  Country Channel Week    Value        \n0   ES      Train   2018-48 1000\n1   ES      Train   2018-49 1000\n2   ES      Train   2018-50 1000\n3   ES      Train   2018-51 1000\n4   ES      Train   2018-52 1000\n</code></pre>\n\n<p>and </p>\n\n<pre><code>Week        Product1    Product2    Product3\n2018-48     25%         50%         25%\n2018-49     25%         50%         25%\n2018-50     25%         50%         25%\n2018-51     25%         50%         25%\n2018-52     25%         50%         25%\n</code></pre>\n\n<p>How can I create a combination of both where I add each product to every line of the first frame and use the value multiplied by the product itself?</p>\n\n<p>E.g. for the first two weeks, this would result in:</p>\n\n<pre><code>id  Country Channel Week    Value   Product        \n0   ES      Train   2018-48 250     Product1\n1   ES      Train   2018-48 500     Product2\n2   ES      Train   2018-48 250     Product3\n3   ES      Train   2018-49 250     Product1\n4   ES      Train   2018-49 500     Product2\n5   ES      Train   2018-49 250     Product3\n6   ...         \n</code></pre>\n"}, {"tags": ["python", "string"], "comments": [{"owner": {"reputation": 176, "user_id": 10574412, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NNMxYuIRBNo/AAAAAAAAAAI/AAAAAAAAAGQ/PfvSCzKUTEk/photo.jpg?sz=128", "display_name": "Niccol&#242; Cacciotti", "link": "https://stackoverflow.com/users/10574412/niccol%c3%b2-cacciotti"}, "edited": false, "score": 0, "creation_date": 1542842491, "post_id": 53421794, "comment_id": 93718055, "body": "Hi. you should post your code in order to let us better understand your question."}], "answers": [{"tags": [], "owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "is_accepted": false, "score": 2, "last_activity_date": 1542842488, "creation_date": 1542842488, "answer_id": 53421824, "question_id": 53421794, "link": "https://stackoverflow.com/questions/53421794/print-several-values-in-the-same-line-with-commas/53421824#53421824", "title": "Print several values in the same line with commas", "body": "<p><code>print</code> also takes a <code>sep</code> argument which specifies the separator between the other arguments.</p>\n\n<pre><code>&gt;&gt;&gt; print(1, 2, 3, 4, sep=',')\n1,2,3,4\n</code></pre>\n\n<p>If you have an iterable of things to print, you can unpack it with the <code>*args</code> syntax.</p>\n\n<pre><code>&gt;&gt;&gt; stuff_to_print = [1, 2, 3, 4]\n&gt;&gt;&gt; print(*stuff_to_print, sep=',')\n1,2,3,4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 10604468, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-68YFYD9K2sw/AAAAAAAAAAI/AAAAAAAAADc/aBhMjUIDE9Y/photo.jpg?sz=128", "display_name": "Florentin Udrea", "link": "https://stackoverflow.com/users/10604468/florentin-udrea"}, "is_accepted": false, "score": 0, "last_activity_date": 1542842545, "creation_date": 1542842545, "answer_id": 53421831, "question_id": 53421794, "link": "https://stackoverflow.com/questions/53421794/print-several-values-in-the-same-line-with-commas/53421831#53421831", "title": "Print several values in the same line with commas", "body": "<pre><code>list1 = ['1','2','3','4']  \ns = \",\".join(list1) \nprint(s)\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 10688216, "user_type": "registered", "profile_image": "https://graph.facebook.com/1238752022939430/picture?type=large", "display_name": "Luan", "link": "https://stackoverflow.com/users/10688216/luan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 933, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1546165617, "creation_date": 1542842269, "last_edit_date": 1546165617, "question_id": 53421794, "link": "https://stackoverflow.com/questions/53421794/print-several-values-in-the-same-line-with-commas", "title": "Print several values in the same line with commas", "body": "<p>I'm new to python (as well as stackoverflow) and I was wondering how I could print several values with commas in between them.</p>\n\n<p>I'm very well aware of the <code>end</code> keyword the <code>print</code> function takes, but the problem is that it appends the string after every value, including the last one, which is precisely what I don't want.</p>\n\n<p>So, instead of maybe 1,2,3,4, ; what I want is 1,2,3,4.</p>\n\n<p>Update:\nI'm sorry I wasn't so clear as I didn't post my code. Here it is:</p>\n\n<pre><code>N = int(input())\np = []\nfor i in range(N):\n    P = str(input())\n    p.append(P)\nfor i in range(N):\n    print(p[N-1-i],end=', ')\n</code></pre>\n\n<p>N sets the number of following inputs and I want the program to print every entry on the same line but backwards, with each of them separated by comma and space. I think sep doesn't quite work here. </p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": false, "score": 1, "last_activity_date": 1542842286, "creation_date": 1542842286, "answer_id": 53421797, "question_id": 53421775, "link": "https://stackoverflow.com/questions/53421775/derived-dataframe-column-from-other-column-without-writing-any-loop/53421797#53421797", "title": "Derived DataFrame column from other column without writing any loop", "body": "<p>Use <a href=\"https://pandas.pydata.org/pandas-docs/version/0.23.4/generated/pandas.cut.html\" rel=\"nofollow noreferrer\"><code>pd.cut</code></a>:</p>\n\n<pre><code>df['class'] = pd.cut(df.occurrence, bins=[0,1,5,np.inf], labels=['Unique','Medium','High'])\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>df = pd.DataFrame({'occurrence':np.random.randint(0,10,10)})\n&gt;&gt;&gt; df\n   occurrence\n0           5\n1           1\n2           6\n3           7\n4           5\n5           7\n6           7\n7           1\n8           2\n9           7\n\ndf['class'] = pd.cut(df.occurrence, bins=[0,1,5,np.inf], labels=['Unique','Medium','High'])\n&gt;&gt;&gt; df\n   occurrence   class\n0           5  Medium\n1           1  Unique\n2           6    High\n3           7    High\n4           5  Medium\n5           7    High\n6           7    High\n7           1  Unique\n8           2  Medium\n9           7    High\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 0, "last_activity_date": 1542846235, "creation_date": 1542846235, "answer_id": 53422268, "question_id": 53421775, "link": "https://stackoverflow.com/questions/53421775/derived-dataframe-column-from-other-column-without-writing-any-loop/53422268#53422268", "title": "Derived DataFrame column from other column without writing any loop", "body": "<h3><a href=\"https://docs.scipy.org/doc/numpy-1.15.0/reference/generated/numpy.select.html\" rel=\"nofollow noreferrer\"><code>np.select</code></a></h3>\n\n<p>Ternary statements aren't vectorised. With Pandas you should use Pandas / NumPy methods for columnar operations. In this case, you can use <code>np.select</code>:</p>\n\n<pre><code>conditions = [df['occurrence'] == 1, df['occurrence'] &lt;= 5]\nchoices = ['Unique', 'Medium']\n\ndf['class'] = np.select(conditions, choices, 'High')\n</code></pre>\n"}], "owner": {"reputation": 2414, "user_id": 379371, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/PyA3B.png?s=128&g=1", "display_name": "InfZero", "link": "https://stackoverflow.com/users/379371/infzero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1542846235, "creation_date": 1542842139, "last_edit_date": 1542842462, "question_id": 53421775, "link": "https://stackoverflow.com/questions/53421775/derived-dataframe-column-from-other-column-without-writing-any-loop", "title": "Derived DataFrame column from other column without writing any loop", "body": "<p>I have a DataFrame with two columns (verb and occurrence). I was able to create a new column which determines the character count for the verb (i.e., length):</p>\n\n<pre><code>df['length'] = df['verb'].str.len()\n</code></pre>\n\n<p>The second requirement is to create a new column with a text. If <code>ocurrence</code> is equal to 1, then write <code>'Unique'</code>; if <code>ocurrence</code> is less than or equal to 5, then write <code>'Medium'</code>; otherwise <code>'High'</code>...</p>\n\n<p>...This is the code I've written so far...</p>\n\n<pre><code>df['class'] = 'Unique' if df['ocurrence'] == 1 else 'Medium' if df['ocurrence'] &lt;= 5 else 'High'\n</code></pre>\n\n<p>...but it doesn't work.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1542842033, "post_id": 53421755, "comment_id": 93717912, "body": "With what numbers does it not work well?"}, {"owner": {"reputation": 2278, "user_id": 3755376, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/01866d2697fc9247a5c895bb2ee66daf?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/3755376/john"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1542842087, "post_id": 53421755, "comment_id": 93717927, "body": "Result of the first case is not correct. This is output <a href=\"https://repl.it/repls/TiredGratefulInformation\" rel=\"nofollow noreferrer\">repl.it/repls/TiredGratefulInformation</a>"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1542842147, "post_id": 53421755, "comment_id": 93717942, "body": "You got the comparison the wrong way around."}, {"owner": {"reputation": 2278, "user_id": 3755376, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/01866d2697fc9247a5c895bb2ee66daf?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/3755376/john"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1542842307, "post_id": 53421755, "comment_id": 93717993, "body": "Thanks, Actually, I want to make it without the condition if. Is it possible?"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 1, "creation_date": 1542842419, "post_id": 53421755, "comment_id": 93718036, "body": "<code>(b - a % b) % b</code>"}], "answers": [{"tags": [], "owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "is_accepted": true, "score": 4, "last_activity_date": 1542842399, "creation_date": 1542842399, "answer_id": 53421807, "question_id": 53421755, "link": "https://stackoverflow.com/questions/53421755/how-to-find-the-remainder-of-division-that-satisfies-a-condition/53421807#53421807", "title": "How to find the remainder of division that satisfies a condition?", "body": "<p>There's probably a simpler way, but this works:</p>\n\n<pre><code>c = (b - a % b) % b\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1542913578, "post_id": 53421845, "comment_id": 93747464, "body": "This is also tricky with <code>decimal.Decimal</code>, where the same problem happens."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1542842652, "creation_date": 1542842652, "answer_id": 53421845, "question_id": 53421755, "link": "https://stackoverflow.com/questions/53421755/how-to-find-the-remainder-of-division-that-satisfies-a-condition/53421845#53421845", "title": "How to find the remainder of division that satisfies a condition?", "body": "<pre><code>c = -a % b\n</code></pre>\n\n<p>You'd need something more complicated in languages like C, where <code>%</code> matches the sign of the left operand instead of the right.</p>\n"}], "owner": {"reputation": 2278, "user_id": 3755376, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/01866d2697fc9247a5c895bb2ee66daf?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/3755376/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 53421807, "answer_count": 2, "score": 2, "last_activity_date": 1542842652, "creation_date": 1542841953, "question_id": 53421755, "link": "https://stackoverflow.com/questions/53421755/how-to-find-the-remainder-of-division-that-satisfies-a-condition", "title": "How to find the remainder of division that satisfies a condition?", "body": "<p>I am looking for a simple way to find the number c that making the (a+c) is divisibility b. For example, if <code>a=12, b =4</code>, then <code>c =0</code>. If <code>a=13, b=4</code> then <code>c=3</code></p>\n\n<p>This is my code but it does not work well</p>\n\n<pre><code>a =12\nb = 4\nif (a % b):\n  c =0\nelse:\n  c = b - a % b\nprint (c)\n</code></pre>\n\n<p>Sorry if my question is too simple.</p>\n"}, {"tags": ["python", "selenium", "beautifulsoup", "python-requests", "save"], "comments": [{"owner": {"reputation": 738, "user_id": 6042206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aMQZp.jpg?s=128&g=1", "display_name": "Kamikaze_goldfish", "link": "https://stackoverflow.com/users/6042206/kamikaze-goldfish"}, "edited": false, "score": 0, "creation_date": 1542842409, "post_id": 53421752, "comment_id": 93718030, "body": "How many columns?"}, {"owner": {"reputation": 89, "user_id": 10015392, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TotLtBHqIRI/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0BRRTrBqoZwzoAHcIWK-BconlU1A/mo/photo.jpg?sz=128", "display_name": "Sloth87", "link": "https://stackoverflow.com/users/10015392/sloth87"}, "reply_to_user": {"reputation": 738, "user_id": 6042206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aMQZp.jpg?s=128&g=1", "display_name": "Kamikaze_goldfish", "link": "https://stackoverflow.com/users/6042206/kamikaze-goldfish"}, "edited": false, "score": 0, "creation_date": 1542925056, "post_id": 53421752, "comment_id": 93750778, "body": "I&#39;m not sure I believe the table has 6 columns"}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 10015392, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TotLtBHqIRI/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0BRRTrBqoZwzoAHcIWK-BconlU1A/mo/photo.jpg?sz=128", "display_name": "Sloth87", "link": "https://stackoverflow.com/users/10015392/sloth87"}, "edited": false, "score": 0, "creation_date": 1542886199, "post_id": 53422057, "comment_id": 93733965, "body": "thanks @too Tired but I get the error : AttributeError: &#39;FirefoxWebElement&#39; object has no attribute &#39;to_csv&#39;"}], "tags": [], "owner": {"reputation": 169, "user_id": 3728861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/821065bf1759b11f65fab383015da187?s=128&d=identicon&r=PG&f=1", "display_name": "tooTired", "link": "https://stackoverflow.com/users/3728861/tootired"}, "is_accepted": false, "score": 0, "last_activity_date": 1542939048, "last_edit_date": 1542939048, "creation_date": 1542844288, "answer_id": 53422057, "question_id": 53421752, "link": "https://stackoverflow.com/questions/53421752/create-and-excel-document-using-selenium/53422057#53422057", "title": "Create and Excel Document using Selenium", "body": "<p>You can save the table easily in a CSV, \nCSV files are file formats that contain plain text values separated by commas. CSV files can be opened by any spreadsheet program: Microsoft Excel, Open Office, Google Sheets, etc.</p>\n\n<pre><code>import csv\n\n#....\npricetable = browser.find_element_by_id('Pricetable')\nwith open('pricetable.csv', 'a') as f:\n    wr = csv.writer(f)\n    for row in pricetable.find_elements_by_css_selector('tr'):\n        wr.writerow([d.text for d in row.find_elements_by_css_selector('td')])\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 10015392, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TotLtBHqIRI/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0BRRTrBqoZwzoAHcIWK-BconlU1A/mo/photo.jpg?sz=128", "display_name": "Sloth87", "link": "https://stackoverflow.com/users/10015392/sloth87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542939048, "creation_date": 1542841946, "question_id": 53421752, "link": "https://stackoverflow.com/questions/53421752/create-and-excel-document-using-selenium", "title": "Create and Excel Document using Selenium", "body": "<p>Hi I am new to Python and am currently working through the book Automate the boring stuff with Python. I am trying to scrape a website that requires a login. The below code does work to a point and saves the required information in 'pricingtable'. I need to get this into an Excel or .txt file is there a way to do this using selenium? </p>\n\n<p>Being new and not fulling understanding is there a better way to do this with requests and bs4? It seems silly to open a browser to do this but i don't know another way.</p>\n\n<p>Thank you in advance.   </p>\n\n<pre><code>from selenium import webdriver\nimport openpyxl, requests, bs4\nimport time\n\n# opens website in Firefox\nbrowser = webdriver.Firefox()\nbrowser.get('https://somewebsite/somepage)\n\n# find a username element and passes the password\nemailElem = browser.find_element_by_id('Enter user name')\nemailElem.send_keys('*username*')\n\n# finds the password element and passes the password\npasswordElem = browser.find_element_by_name('passwd')\npasswordElem.send_keys('*password*')\npasswordElem.submit()\n\n#allows the browser to open but may not be required\ntime.sleep(2)\n\n# selects a new webpage \nbrowser.get('https://somewebsite/pricing')\n\n# on the new webpage there is an element table \npricetable = browser.find_element_by_id('Pricetable')\n</code></pre>\n"}, {"tags": ["python", "for-loop", "while-loop"], "comments": [{"owner": {"reputation": 5515, "user_id": 4946896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dbe7e09627974c401e4eca85d23cefe5?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4946896/rafael"}, "edited": false, "score": 0, "creation_date": 1542842750, "post_id": 53421747, "comment_id": 93718142, "body": "You don&#39;t need a break statement in the else."}], "answers": [{"comments": [{"owner": {"reputation": 245, "user_id": 10652765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c69e6fb8d75d81e7084741e22ae692f?s=128&d=identicon&r=PG&f=1", "display_name": "Hellosiroverthere", "link": "https://stackoverflow.com/users/10652765/hellosiroverthere"}, "edited": false, "score": 0, "creation_date": 1542842302, "post_id": 53421783, "comment_id": 93717990, "body": "In that case I dont need to actually do a while loop and stuff that I did?"}, {"owner": {"reputation": 5515, "user_id": 4946896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dbe7e09627974c401e4eca85d23cefe5?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4946896/rafael"}, "reply_to_user": {"reputation": 245, "user_id": 10652765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c69e6fb8d75d81e7084741e22ae692f?s=128&d=identicon&r=PG&f=1", "display_name": "Hellosiroverthere", "link": "https://stackoverflow.com/users/10652765/hellosiroverthere"}, "edited": false, "score": 0, "creation_date": 1542842362, "post_id": 53421783, "comment_id": 93718013, "body": "That&#39;s correct. You might want to restructure your solution with this new syntax in mind, which should solve your problem."}], "tags": [], "owner": {"reputation": 5515, "user_id": 4946896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dbe7e09627974c401e4eca85d23cefe5?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4946896/rafael"}, "is_accepted": true, "score": 1, "last_activity_date": 1542842353, "last_edit_date": 1542842353, "creation_date": 1542842195, "answer_id": 53421783, "question_id": 53421747, "link": "https://stackoverflow.com/questions/53421747/how-to-append-into-a-list-if-it-doesnt-find-anything-that-matches-the-list/53421783#53421783", "title": "How to append into a list if it doesn&#39;t find anything that matches the list?", "body": "<p>You might want to check out the for-else:</p>\n\n<pre><code>for item in items:\n    if you_found_something:\n        found_item = item\n        break\nelse:\n    print('No item found.')\n    do_your_append_here\n</code></pre>\n\n<p>Basically the for-else answers the question if the for loop terminated without a break. Above we break when we find something therefore the <code>else</code> won't be executed but as far as your for loop terminates without a break statement, then the code in <code>else</code> will be executed.</p>\n"}], "owner": {"reputation": 245, "user_id": 10652765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c69e6fb8d75d81e7084741e22ae692f?s=128&d=identicon&r=PG&f=1", "display_name": "Hellosiroverthere", "link": "https://stackoverflow.com/users/10652765/hellosiroverthere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 53421783, "answer_count": 1, "score": 2, "last_activity_date": 1542842588, "creation_date": 1542841921, "last_edit_date": 1542842588, "question_id": 53421747, "link": "https://stackoverflow.com/questions/53421747/how-to-append-into-a-list-if-it-doesnt-find-anything-that-matches-the-list", "title": "How to append into a list if it doesn&#39;t find anything that matches the list?", "body": "<p>I want to make a print when my code doesn't find anything throughout the whole list. </p>\n\n<p>This is my code:</p>\n\n<pre><code>new_list = ['There%is', 'None&amp;of', 'Same&amp;here']\na = new_list.split(\"%\")\nold_list = ['Stack%Hello', 'Over&amp;You', 'flow&amp;There']\ncondition = True\nwhile condition:\n    try:\n        for i, items in zip(range(len(old_list)), old_list):\n            old_list_value = old_list[i].split(\"%\")\n            if a[0] in items:\n                if len(old_list_value[1]) &lt; len(a[1]):\n                    old_list[i] = new_list        \n                    condition = False\n\n                elif len(old_list_value[1]) &gt; len(a[1]):\n                    old_list[i] = new_lis\n                    condition = False\n\n            else:\n                old_list.append(new_list)\n                condition = False\n                break\n\n    except Exception as err:\n        print(err)\n</code></pre>\n\n<p>What I want do is: check every first word of each <code>%</code> and then I make a compare from old_list to check if there is the first word inside the old_list - if there is one then we replay it the old_list value with the new one.</p>\n\n<p>elif if the word is longer than then the new_list word then we dont do anything.</p>\n\n<p>How can I make so that if it doesn't find <code>if a[0] in items:</code> at the whole list then we add the new_list into old_list bascially?</p>\n\n<p>Meaning it needs to first search for all words if it contains inside the old_list and if it is not then we append.</p>\n\n<p>New edit:</p>\n\n<p>Code:</p>\n\n<pre><code>new_list = ['There%is', 'None&amp;of', 'Same&amp;here']\na = new_list.split(\"%\")\nold_list = ['Stack%Hello', 'Over&amp;You', 'flow&amp;There']\n\n\nfor i, items in zip(range(len(old_list)), old_list):\n    old_list_value = old_list[i].split(\"%\")\n    if a[0] in items:\n        if len(old_list_value[1]) &lt; len(a[1]):\n            old_list[i] = new_list\n            break\n\n\n        elif len(old_list_value[1]) &gt; len(a[1]):\n            old_list[i] = new_list\n            break\n\n\nelse:\n    old_list.append(new_list)\n    break\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "fonts"], "answers": [{"tags": [], "owner": {"reputation": 9377, "user_id": 8431111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GteAE.jpg?s=128&g=1", "display_name": "J_H", "link": "https://stackoverflow.com/users/8431111/j-h"}, "is_accepted": true, "score": 1, "last_activity_date": 1542850751, "creation_date": 1542850751, "answer_id": 53422755, "question_id": 53421664, "link": "https://stackoverflow.com/questions/53421664/get-all-font-styles-with-matplotlib-font-manage-in-python-3/53422755#53422755", "title": "Get all font styles with matplotlib.font_manage in Python 3", "body": "<p>Yes.</p>\n\n<p>The <code>get_style()</code> and <code>get_variant()</code> methods let you explore some of the font space.</p>\n\n<p>You may want to iterate over several possibilities, calling <code>score_style()</code> to determine if a style is available. Or just iterate and look at the result of <code>findfont()</code>, letting <em>it</em> work out which styles are locally available. If you post your iterating code along with its results, we may be able to offer additional font hints.</p>\n"}], "owner": {"reputation": 75, "user_id": 10240532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44ac23cda24c1a038085cf198d25e9b2?s=128&d=identicon&r=PG&f=1", "display_name": "Jsindl", "link": "https://stackoverflow.com/users/10240532/jsindl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 53422755, "answer_count": 1, "score": 0, "last_activity_date": 1542850751, "creation_date": 1542841384, "question_id": 53421664, "link": "https://stackoverflow.com/questions/53421664/get-all-font-styles-with-matplotlib-font-manage-in-python-3", "title": "Get all font styles with matplotlib.font_manage in Python 3", "body": "<p>please, <br>\nis it possible to print out every style that each of the listed typefaces has? So I know that for example Arial has Bold, Regular, Italic and whatever else. Thanks! Or would you recommend some other tool for doing this? I am on Windows 7.</p>\n\n<pre><code>import matplotlib.font_manager\n#help(matplotlib.font_manager)\nfonts = [f.name for f in matplotlib.font_manager.fontManager.ttflist]\nprint(len(fonts))\nfor i in fonts:\n    print(i)\n</code></pre>\n"}, {"tags": ["python", "plot"], "answers": [{"tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": true, "score": 3, "last_activity_date": 1542841593, "creation_date": 1542841593, "answer_id": 53421693, "question_id": 53421660, "link": "https://stackoverflow.com/questions/53421660/plotting-error-only-size-1-arrays-can-be-converted-to-python-scalars/53421693#53421693", "title": "plotting error_only size-1 arrays can be converted to Python scalars", "body": "<p>You'll be better off using <code>numpy.arctan</code> and <code>numpy.arctanh</code> instead of the <code>math</code> equivalents, as they can work with arrays:</p>\n\n<pre><code>a = 10;\nw = np.arange (0.001,10, 0.1)\n\nfunction = (1/(np.pi*(w**2))+ np.pi)*abs(((-2*np.arctan(a))*w)-(2*np.arctanh(((w**2) + 1)/(-1*(w**2) + 2*(a**2) +1))*w)+ (np.pi*w) -(2*np.arctanh(w/(a))))\n\nplt.plot(w, function) \n\nplt.show() \n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/kO6Yj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kO6Yj.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 277, "user_id": 9932521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e72c8b932c8952d019a93405292fe19?s=128&d=identicon&r=PG&f=1", "display_name": "Hey There", "link": "https://stackoverflow.com/users/9932521/hey-there"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 874, "favorite_count": 0, "accepted_answer_id": 53421693, "answer_count": 1, "score": 1, "last_activity_date": 1542841593, "creation_date": 1542841330, "question_id": 53421660, "link": "https://stackoverflow.com/questions/53421660/plotting-error-only-size-1-arrays-can-be-converted-to-python-scalars", "title": "plotting error_only size-1 arrays can be converted to Python scalars", "body": "<p>I want to plot a function and each time I got this error: only size-1 arrays can be converted to Python scalars.\nI want to plot my function over the w.</p>\n\n<p>The code is :</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\nimport math\na = 10;\nw = np.arange (0.001,10, 0.1)\n\nfunction = (1/(np.pi*(w**2))+ np.pi)*abs(((-2*math.atan(a))*w)-(2*math.atanh(((w**2) + 1)/(-1*(w**2) + 2*(a**2) +1))*w)+ (np.pi*w) -(2*math.atanh(w/(a))))\n\nplt.plot(w, function) \n\nplt.show() \n</code></pre>\n\n<p>Thanks for your time.</p>\n"}, {"tags": ["python", "regex", "pandas", "text", "nlp"], "comments": [{"owner": {"reputation": 2288, "user_id": 8408080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b487ee532f07476aea6610f459b3fdaf?s=128&d=identicon&r=PG&f=1", "display_name": "user8408080", "link": "https://stackoverflow.com/users/8408080/user8408080"}, "edited": false, "score": 0, "creation_date": 1542846755, "post_id": 53421652, "comment_id": 93719222, "body": "If Sentence and Polarity never occur in the text, you could just replace them via built-in function"}, {"owner": {"reputation": 43, "user_id": 10570737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10cad478ee09ccedb5f56391db7f7e81?s=128&d=identicon&r=PG&f=1", "display_name": "M.Ginobili", "link": "https://stackoverflow.com/users/10570737/m-ginobili"}, "reply_to_user": {"reputation": 2288, "user_id": 8408080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b487ee532f07476aea6610f459b3fdaf?s=128&d=identicon&r=PG&f=1", "display_name": "user8408080", "link": "https://stackoverflow.com/users/8408080/user8408080"}, "edited": false, "score": 0, "creation_date": 1542846837, "post_id": 53421652, "comment_id": 93719236, "body": "They never occur in the text, but how can i achieve this ?"}], "answers": [{"tags": [], "owner": {"reputation": 2288, "user_id": 8408080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b487ee532f07476aea6610f459b3fdaf?s=128&d=identicon&r=PG&f=1", "display_name": "user8408080", "link": "https://stackoverflow.com/users/8408080/user8408080"}, "is_accepted": false, "score": 1, "last_activity_date": 1542847675, "creation_date": 1542847675, "answer_id": 53422441, "question_id": 53421652, "link": "https://stackoverflow.com/questions/53421652/python-read-and-group-data-from-text-file-with-pandas/53422441#53422441", "title": "Python / Read and group data from text file with Pandas", "body": "<p>I took this as a test string:</p>\n\n<pre><code>test = \"\"\"Sentence:1 Polarity:N 5puan verdim o da anistonun g\u00fczel y\u00fcz\u00fcn\u00fcn hat\u0131r\u0131na.\nSentence:2 Polarity:N son derece s\u0131k\u0131c\u0131 bir filim oldu\u011funu s\u00f6yleyebilirim.\nSentence:3 Polarity:N ..sa\u00e7ma bir konuyu nas\u0131lda filim yapm\u0131\u015flar ma\u015fallah\nSentence:4 Polarity:P bence ho\u015f vakit ge\u00e7irmek i\u00e7in seyredilebilir.\"\"\"\n</code></pre>\n\n<p>Using Python's <code>re</code> module you can replace what you want using <code>re.sub</code>:</p>\n\n<pre><code>new_string = re.sub(r\"Sentence:(\\d+) Polarity:(\\w)\", r\"\\1 - \\2 -\", test)\n</code></pre>\n\n<p>gives you the format you want. <code>\\1</code> or <code>\\2</code> are the numbers that matched with the group <code>(\\d+)</code> or the letter that matched with <code>(\\w)</code>, respectively.</p>\n\n<p>Now you can work with your new string.</p>\n"}, {"tags": [], "owner": {"reputation": 5789, "user_id": 5704863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Vh2d.jpg?s=128&g=1", "display_name": "Karn Kumar", "link": "https://stackoverflow.com/users/5704863/karn-kumar"}, "is_accepted": true, "score": 1, "last_activity_date": 1542952310, "last_edit_date": 1542952310, "creation_date": 1542862928, "answer_id": 53424173, "question_id": 53421652, "link": "https://stackoverflow.com/questions/53421652/python-read-and-group-data-from-text-file-with-pandas/53424173#53424173", "title": "Python / Read and group data from text file with Pandas", "body": "<p>Using DataFrame's <code>replace</code> method with <code>regex</code> , and use <code>header=None</code> while reading your file with <code>read_csv</code> as by default your first line of dataset will be considered as header and you will not able to get the First line. So, use  <code>fillna(\"0\")</code> as your number sequence is not consistent and having empty or Nan:</p>\n\n<p><code>df = pd.read_csv(\"SU-Movie-Reviews-Sentences.txt\", header=None).fillna(\"0\")</code></p>\n\n<pre><code>print(df)\n                                                   0\n0   Sentence:1 Polarity:N 5puan verdim o da anisto...\n1   Sentence:2 Polarity:N son derece s\u0131k\u0131c\u0131 bir fi...\n2   Sentence:3 Polarity:N ..sa\u00e7ma bir konuyu nas\u0131l...\n3   Sentence:4 Polarity:P bence ho\u015f vakit ge\u00e7irmek...\n4      Sentence:5 Polarity:P ho\u015f ve sevimli bir film.\n5   Sentence:6 Polarity:O e\u015fcinsellere pek sempati...\n6   Sentence:7 Polarity:O itici bir film de\u011fildi s...\n7   Sentence:8 Polarity:N seyrederken bu kadar sin...\n8   Sentence:9 Polarity:O  J.Aniston \u0131n hi\u00e7 mi umu...\n9   Sentence:10 Polarity:O kimse yazmam\u0131\u015f ben yaz\u0131...\n10  Sentence:11 Polarity:P  g\u00fczel bi pazar g\u00fcn\u00fc \u015fi...\n</code></pre>\n\n<p><strong>Below is How you will use <code>replace</code></strong> :</p>\n\n<pre><code>&gt;&gt;&gt; df.replace('Sentence:|Polarity:', '',regex=True)\n                                                    0\n0   1 N 5puan verdim o da anistonun g\u00fczel y\u00fcz\u00fcn\u00fcn ...\n1   2 N son derece s\u0131k\u0131c\u0131 bir filim oldu\u011funu s\u00f6yle...\n2   3 N ..sa\u00e7ma bir konuyu nas\u0131lda filim yapm\u0131\u015flar...\n3   4 P bence ho\u015f vakit ge\u00e7irmek i\u00e7in seyredilebilir.\n4                        5 P ho\u015f ve sevimli bir film.\n5   6 O e\u015fcinsellere pek sempati duymamakla berabe...\n6                 7 O itici bir film de\u011fildi sonu\u00e7ta.\n7   8 N seyrederken bu kadar sinirlendi\u011fim film ha...\n8   9 O  J.Aniston \u0131n hi\u00e7 mi umut yok diye sordu\u011fu...\n9                   10 O kimse yazmam\u0131\u015f ben yaz\u0131y\u0131m:)\n10  11 P  g\u00fczel bi pazar g\u00fcn\u00fc \u015firin bi film izleme...\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 10570737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10cad478ee09ccedb5f56391db7f7e81?s=128&d=identicon&r=PG&f=1", "display_name": "M.Ginobili", "link": "https://stackoverflow.com/users/10570737/m-ginobili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 53424173, "answer_count": 2, "score": 0, "last_activity_date": 1542952310, "creation_date": 1542841270, "question_id": 53421652, "link": "https://stackoverflow.com/questions/53421652/python-read-and-group-data-from-text-file-with-pandas", "title": "Python / Read and group data from text file with Pandas", "body": "<p>I have a text file as follows:</p>\n\n<pre><code>Sentence:1 Polarity:N 5puan verdim o da anistonun g\u00fczel y\u00fcz\u00fcn\u00fcn hat\u0131r\u0131na.\nSentence:2 Polarity:N son derece s\u0131k\u0131c\u0131 bir filim oldu\u011funu s\u00f6yleyebilirim.\nSentence:3 Polarity:N ..sa\u00e7ma bir konuyu nas\u0131lda filim yapm\u0131\u015flar ma\u015fallah\nSentence:4 Polarity:P bence ho\u015f vakit ge\u00e7irmek i\u00e7in seyredilebilir.\nSentence:5 Polarity:P ho\u015f ve sevimli bir film.\nSentence:6 Polarity:O e\u015fcinsellere pek sempati duymamakla beraber bu filmde sanki onlar\u0131 sevimli g\u00f6stermeye \u00e7al\u0131\u015fm\u0131\u015flar gibi geldi.\nSentence:7 Polarity:O itici bir film de\u011fildi sonu\u00e7ta.\nSentence:8 Polarity:N seyrederken bu kadar sinirlendi\u011fim film hat\u0131rlam\u0131yorum.\nSentence:9 Polarity:O  J.Aniston \u0131n hi\u00e7 mi umut yok diye sordu\u011fu sahnede k\u0131racakt\u0131m televizyonu!\nSentence:10 Polarity:O kimse yazmam\u0131\u015f ben yaz\u0131y\u0131m:)\nSentence:11 Polarity:P  g\u00fczel bi pazar g\u00fcn\u00fc \u015firin bi film izlemek isteyenler i\u00e7in \u00e7ok g\u00fczel.\n</code></pre>\n\n<p>I want to split this data in to a table like this:</p>\n\n<pre><code>Sentence_No - Sentence_Polarity - Sentence_txt\n1 - N - 5puan verdim o da anistonun g\u00fczel y\u00fcz\u00fcn\u00fcn hat\u0131r\u0131na.\n2 - N - son derece s\u0131k\u0131c\u0131 bir filim oldu\u011funu s\u00f6yleyebilirim.\n3 - N - ..sa\u00e7ma bir konuyu nas\u0131lda filim yapm\u0131\u015flar ma\u015fallah\n4 - P - bence ho\u015f vakit ge\u00e7irmek i\u00e7in seyredilebilir.\n</code></pre>\n\n<p>So I think I need to get the part from after \"Sentence:\", \"Polarity\" and the last txt part. I want it this way so I can classify the data.</p>\n\n<p>I wrote the code below but it is not working for this purpose:</p>\n\n<pre><code>df = pd.read_csv('SU-Movie-Reviews-Sentences.txt', lineterminator='\\n', names=['Sentence_No', 'Sentence_Polarity' , 'Sentence_txt'])\n</code></pre>\n"}, {"tags": ["python", "numpy", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10687997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a87cb3d626f042f8a4334fcaba28b47c?s=128&d=identicon&r=PG&f=1", "display_name": "LearningPython", "link": "https://stackoverflow.com/users/10687997/learningpython"}, "edited": false, "score": 0, "creation_date": 1542844295, "post_id": 53421898, "comment_id": 93718589, "body": "Dear Kevin, thank you for the reply.  However I do not want to change the individual sub-arrays, only rearrange them within the 3D array.  e.g. in your example, to finish with [[[2,9],,],[3,1],,],[9,2],,].  I can reword the question to clarify."}, {"owner": {"reputation": 1678, "user_id": 6750211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmOvh.gif?s=128&g=1", "display_name": "Kevin Fang", "link": "https://stackoverflow.com/users/6750211/kevin-fang"}, "reply_to_user": {"reputation": 3, "user_id": 10687997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a87cb3d626f042f8a4334fcaba28b47c?s=128&d=identicon&r=PG&f=1", "display_name": "LearningPython", "link": "https://stackoverflow.com/users/10687997/learningpython"}, "edited": false, "score": 0, "creation_date": 1542844699, "post_id": 53421898, "comment_id": 93718702, "body": "@LearningPython then <code>a[np.argsort(a[:,0,0])]</code> would do that."}], "tags": [], "owner": {"reputation": 1678, "user_id": 6750211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmOvh.gif?s=128&g=1", "display_name": "Kevin Fang", "link": "https://stackoverflow.com/users/6750211/kevin-fang"}, "is_accepted": true, "score": 0, "last_activity_date": 1542844742, "last_edit_date": 1542844742, "creation_date": 1542843028, "answer_id": 53421898, "question_id": 53421637, "link": "https://stackoverflow.com/questions/53421637/reorganizing-a-3d-numpy-array/53421898#53421898", "title": "Reorganizing a 3d numpy array", "body": "<p>Here we can use a simple example to demonstrate what your code is doing:</p>\n\n<p>First we create a random 3D numpy matrix:</p>\n\n<pre><code>a = (np.random.rand(3,3,2)*10).astype(int)\narray([[[3, 1],\n        [3, 7],\n        [0, 3]],\n       [[2, 9],\n        [1, 0],\n        [9, 2]],\n       [[9, 2],\n        [8, 8],\n        [8, 0]]])\n</code></pre>\n\n<p>Then <code>a[:]</code> will gives <code>a</code> itself, and <code>a[:][0][0]</code> is just the first row in first 2D array in <code>a</code>, which is:</p>\n\n<pre><code>a[:][0]\n# array([[3, 1],\n#        [3, 7],\n#        [0, 3]])\n\na[:][0][0]\n# array([3, 1])\n</code></pre>\n\n<p>What you want is the header which are <code>3,2,9</code> in this example, so we can use <code>a[:, 0, 0]</code> to extract them:</p>\n\n<pre><code>a[:,0,0]\n# array([3, 2, 9])\n</code></pre>\n\n<p>Now we sort the above list and get an index array:</p>\n\n<pre><code>np.argsort(a[:,0,0])\n# array([1, 0, 2])\n</code></pre>\n\n<p>In order to rearrange the entire 3D array, we need to slice the array with correct order. And <code>np.arange(len(a))[:,np.newaxis]</code> is equal to <code>np.arange(len(a)).reshape(-1,1)</code> which creates a sequential 2D index array:</p>\n\n<pre><code>np.arange(len(a))[:,np.newaxis]\n# array([[0],\n#        [1],\n#        [2]])\n</code></pre>\n\n<p>Without the 2D array, we will slice the array to 2 dimension</p>\n\n<pre><code>a[np.arange(3), np.argsort(a[:,0,0])]\n# array([[3, 7],\n#        [2, 9],\n#        [8, 0]])\n</code></pre>\n\n<p>With the 2D array, we can perform 3D slicing and keeps the shape:</p>\n\n<pre><code>a[np.arange(3).reshape(-1,1), np.argsort(a[:,0,0])]\narray([[[3, 7],\n        [3, 1],\n        [0, 3]],\n       [[1, 0],\n        [2, 9],\n        [9, 2]],\n       [[8, 8],\n        [9, 2],\n        [8, 0]]])\n</code></pre>\n\n<p>And above is the final result you want.</p>\n\n<p>Edit:</p>\n\n<p>To arange the 2D arrays:, one could use:</p>\n\n<pre><code>a[np.argsort(a[:,0,0])]\narray([[[2, 9],\n        [1, 0],\n        [9, 2]],\n       [[3, 1],\n        [3, 7],\n        [0, 3]],\n       [[9, 2],\n        [8, 8],\n        [8, 0]]])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "is_accepted": false, "score": 1, "last_activity_date": 1542856615, "creation_date": 1542856615, "answer_id": 53423374, "question_id": 53421637, "link": "https://stackoverflow.com/questions/53421637/reorganizing-a-3d-numpy-array/53423374#53423374", "title": "Reorganizing a 3d numpy array", "body": "<p>Another way to do this is with <code>np.take</code></p>\n\n<pre><code>header = a[:,0,0]\nsorted = np.take(a, np.argsort(header), axis=0)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10687997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a87cb3d626f042f8a4334fcaba28b47c?s=128&d=identicon&r=PG&f=1", "display_name": "LearningPython", "link": "https://stackoverflow.com/users/10687997/learningpython"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 53421898, "answer_count": 2, "score": 0, "last_activity_date": 1542856615, "creation_date": 1542841174, "last_edit_date": 1542842320, "question_id": 53421637, "link": "https://stackoverflow.com/questions/53421637/reorganizing-a-3d-numpy-array", "title": "Reorganizing a 3d numpy array", "body": "<p>I've tried and searched for a few days, I've come closer but need your help.</p>\n\n<p>I have a 3d array in python,</p>\n\n<pre><code>shape(files)\n&gt;&gt; (31,2049,2)\n</code></pre>\n\n<p>which corresponds to 31 input files with 2 columns of data with 2048 rows and a header.</p>\n\n<p>I'd like to sort this array based on the header, which is a number, in each file.</p>\n\n<p>I tried to follow <a href=\"https://stackoverflow.com/questions/36180777/numpy-sorting-3d-array-but-keeping-2nd-dimension-assigned-to-first\">NumPy: sorting 3D array but keeping 2nd dimension assigned to first</a> , but i'm incredibly confused.</p>\n\n<p>First I try to setup get my headers for the argsort, I thought I could do</p>\n\n<pre><code>sortval=files[:][0][0]\n</code></pre>\n\n<p>but this does not work.. </p>\n\n<p>Then I simply did a for loop to iterate and get my headers</p>\n\n<pre><code>for i in xrange(shape(files)[0]:\n    sortval.append([i][0][0])\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>sortedIdx = np.argsort(sortval)\n</code></pre>\n\n<p>This works, however I dont understand whats happening in the last line..</p>\n\n<pre><code>files = files[np.arange(len(deck))[:,np.newaxis],sortedIdx]\n</code></pre>\n\n<p>Help would be appreciated.</p>\n"}, {"tags": ["python", "tensorflow", "scikit-learn"], "comments": [{"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1542871247, "post_id": 53421626, "comment_id": 93725565, "body": "Please post some data samples, and the full stack trace of error."}], "answers": [{"comments": [{"owner": {"reputation": 5002, "user_id": 1308632, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/bO5vb.png?s=128&g=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/1308632/mayur"}, "edited": false, "score": 0, "creation_date": 1544772033, "post_id": 53772497, "comment_id": 94401386, "body": "If you have a new question, please ask it by clicking the <a href=\"https://stackoverflow.com/questions/ask\">Ask Question</a> button. Include a link to this question if it helps provide context. - <a href=\"/review/low-quality-posts/21684900\">From Review</a>"}, {"owner": {"reputation": 75, "user_id": 8802814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05611592ebca3f8d7c8297ef5cfd30a9?s=128&d=identicon&r=PG&f=1", "display_name": "Lovinthecane", "link": "https://stackoverflow.com/users/8802814/lovinthecane"}, "reply_to_user": {"reputation": 5002, "user_id": 1308632, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/bO5vb.png?s=128&g=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/1308632/mayur"}, "edited": false, "score": 1, "creation_date": 1544844377, "post_id": 53772497, "comment_id": 94430027, "body": "@Mayur I am simply trying to provide context and help the person see what&#39;s going wrong and I am having the exact same issue. No one has answered it. So it seems fitting that I put it in the same thread"}], "tags": [], "owner": {"reputation": 75, "user_id": 8802814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05611592ebca3f8d7c8297ef5cfd30a9?s=128&d=identicon&r=PG&f=1", "display_name": "Lovinthecane", "link": "https://stackoverflow.com/users/8802814/lovinthecane"}, "is_accepted": false, "score": 1, "last_activity_date": 1544752039, "creation_date": 1544752039, "answer_id": 53772497, "question_id": 53421626, "link": "https://stackoverflow.com/questions/53421626/valueerror-found-array-with-0-sample-s-shape-0-1-while-a-minimum-of-1-is/53772497#53772497", "title": "ValueError: Found array with 0 sample (s) (shape= (0, 1) while a minimum of 1 is required by MinMaxScaler", "body": "<p>Your issue isn't your CSV or pandas. You can actually read the CSV with pandas straight into a dataframe which is what I recommend you do. df = pd.read_csv(path)</p>\n\n<p>I am having the same issue with the same code.\nWhats happening is the Scaler = MinMaxScaler, then in the for di in range part and you are fitting the data in the training set then transforming it and reassigning it back to itself. </p>\n\n<p>The problem is, is its trying to find more data in your training set to fit to the scaler and its running out of data. Which is weird because of the way the tutorial you are following presented it. </p>\n"}, {"comments": [{"owner": {"reputation": 2201, "user_id": 9663497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2146a2188db75aa6c8d552e7804ea30?s=128&d=identicon&r=PG&f=1", "display_name": "Vincenzo", "link": "https://stackoverflow.com/users/9663497/vincenzo"}, "edited": false, "score": 0, "creation_date": 1570472186, "post_id": 55751656, "comment_id": 102916614, "body": "I tried commenting them out and gave me another error"}], "tags": [], "owner": {"reputation": 1, "user_id": 11380460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WYoA0xOPGnk/AAAAAAAAAAI/AAAAAAAAAD4/YO0-OxDjWK4/photo.jpg?sz=128", "display_name": "Hazrat Rafiqzadah", "link": "https://stackoverflow.com/users/11380460/hazrat-rafiqzadah"}, "is_accepted": false, "score": 0, "last_activity_date": 1555611117, "creation_date": 1555611117, "answer_id": 55751656, "question_id": 53421626, "link": "https://stackoverflow.com/questions/53421626/valueerror-found-array-with-0-sample-s-shape-0-1-while-a-minimum-of-1-is/55751656#55751656", "title": "ValueError: Found array with 0 sample (s) (shape= (0, 1) while a minimum of 1 is required by MinMaxScaler", "body": "<p>I see that your Window is 1100 and in your for loop you go from 0 to 4400 with 1100 intervals. With that you have 0 as a remainder, which in turn leaves 0 items to normalize, so your code that has</p>\n\n<pre><code># You normalize the last bit of remaining data\nscaler.fit(train_data[di+smoothing_window_size:,:])\ntrain_data[di+smoothing_window_size:,:] = scaler.transform(train_data[di+smoothing_window_size:,:])\n</code></pre>\n\n<p>You do not need those lines of code, just comment those out. It should work after that</p>\n"}, {"tags": [], "owner": {"reputation": 2201, "user_id": 9663497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2146a2188db75aa6c8d552e7804ea30?s=128&d=identicon&r=PG&f=1", "display_name": "Vincenzo", "link": "https://stackoverflow.com/users/9663497/vincenzo"}, "is_accepted": false, "score": 2, "last_activity_date": 1570472411, "creation_date": 1570472411, "answer_id": 58275108, "question_id": 53421626, "link": "https://stackoverflow.com/questions/53421626/valueerror-found-array-with-0-sample-s-shape-0-1-while-a-minimum-of-1-is/58275108#58275108", "title": "ValueError: Found array with 0 sample (s) (shape= (0, 1) while a minimum of 1 is required by MinMaxScaler", "body": "<p>I know that this post is old, but as I stumbled here, others will..\nAfter running in the same problem and googling quite a bit I found a post \n<a href=\"https://github.com/llSourcell/Make_Money_with_Tensorflow_2.0/issues/7\" rel=\"nofollow noreferrer\">https://github.com/llSourcell/Make_Money_with_Tensorflow_2.0/issues/7</a></p>\n\n<p>so it seems that if you download a too small dataset it will throw that error.\nDownload a .csv from 1962 and it'll be big enough ;).</p>\n\n<p>Now,I just have to find the right parameters for my dataset..as I'm adapting this to another type o prediction..\nHope it helps </p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8503605, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LFh5i.png?s=128&g=1", "display_name": "joaosantos", "link": "https://stackoverflow.com/users/8503605/joaosantos"}, "is_accepted": false, "score": 1, "last_activity_date": 1570576999, "last_edit_date": 1570576999, "creation_date": 1570562081, "answer_id": 58292699, "question_id": 53421626, "link": "https://stackoverflow.com/questions/53421626/valueerror-found-array-with-0-sample-s-shape-0-1-while-a-minimum-of-1-is/58292699#58292699", "title": "ValueError: Found array with 0 sample (s) (shape= (0, 1) while a minimum of 1 is required by MinMaxScaler", "body": "<p>The <code>train_data</code> variable has a length of 2264:</p>\n\n<pre><code>train_data = stock_value[:2264]\n</code></pre>\n\n<p>Then, when you go to fit the scaler, you go outside of <code>train_data</code>'s bounds on the third iteration of the for loop:</p>\n\n<pre><code>smoothing_window_size = 1100\nfor di in range(0, 4400, smoothing_window_size):\n</code></pre>\n\n<p>Notice the size of the data set in the tutorial. The training and testing chunks each have length 11,000, and the <code>smoothing_window_size</code> is 2500, so it will never go exceed <code>train_data</code>'s boundaries.</p>\n"}, {"comments": [{"owner": {"reputation": 1040, "user_id": 11767140, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Tbfr3YlhoOs/AAAAAAAAAAI/AAAAAAAAAWo/4_25j9xubwc/photo.jpg?sz=128", "display_name": "David Garc&#237;a Bodego", "link": "https://stackoverflow.com/users/11767140/david-garc%c3%ada-bodego"}, "edited": false, "score": 0, "creation_date": 1571281800, "post_id": 58424112, "comment_id": 103190589, "body": "Welcome to SO. This kind of replies should be included as comments not as answers. The user already exposed that he had an array with no sample, so MinMaxScaler can&#180;t work. So with this broad section, try to help as much as you can, not just point one item and consider as an answer. Good reply but try to focus on the complete question"}], "tags": [], "owner": {"reputation": 11, "user_id": 10204108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7d08b8601e7a71a7a7121d020e2b365?s=128&d=identicon&r=PG", "display_name": "BeardySam", "link": "https://stackoverflow.com/users/10204108/beardysam"}, "is_accepted": false, "score": 0, "last_activity_date": 1572452339, "last_edit_date": 1572452339, "creation_date": 1571280105, "answer_id": 58424112, "question_id": 53421626, "link": "https://stackoverflow.com/questions/53421626/valueerror-found-array-with-0-sample-s-shape-0-1-while-a-minimum-of-1-is/58424112#58424112", "title": "ValueError: Found array with 0 sample (s) (shape= (0, 1) while a minimum of 1 is required by MinMaxScaler", "body": "<p>You have a column of all 0's in your data. If you try to scale it the MinMaxScaler can't assign a scale and it trips up. You need to filter out empty/0 columns before you scale the data. Try :</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    stock_value=stock_value[:,~np.all(np.isnan(d), axis=0)]\n</code></pre>\n\n<p>to filter out nan columns in your data</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 10687398, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GEnCATOw-Lw/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iuCvQR_IcALc_XvnPLecRosB3Ttw/mo/photo.jpg?sz=128", "display_name": "Daniel Vaindiner", "link": "https://stackoverflow.com/users/10687398/daniel-vaindiner"}, "is_accepted": false, "score": 0, "last_activity_date": 1576903858, "creation_date": 1576903858, "answer_id": 59433591, "question_id": 53421626, "link": "https://stackoverflow.com/questions/53421626/valueerror-found-array-with-0-sample-s-shape-0-1-while-a-minimum-of-1-is/59433591#59433591", "title": "ValueError: Found array with 0 sample (s) (shape= (0, 1) while a minimum of 1 is required by MinMaxScaler", "body": "<p>I have got to apologize, for the whole time you guys were trying to figure out a solution to my issue, I ended up finding a decent guide and taking a much less sophisticated approach (as it was my first ever taste of AI and Statistics). Funny thing is, I was breaking my head for months over this, until I went to a conference in Florida last November and ended finishing it in less than two hours at 3 am in my hotel room.</p>\n\n<p>Here is the finished code I had wrote back then and ended up presenting to my colleague as a working example</p>\n\n<pre><code>import tensorflow as tf\nfrom keras import backend as K\n\nfrom tensorflow.python.saved_model import builder as saved_model_builder\nfrom tensorflow.python.saved_model import tag_constants, signature_constants, signature_def_utils_impl\n\nfrom keras.models import Sequential\nfrom keras.layers.core import Dense, Dropout, Activation\nfrom keras.optimizers import SGD\nimport numpy as np\n\nimport matplotlib.pyplot as plt\n\n\nstock_data = []\nstock_date = []\nstock_value = []\nf = open(\"s&amp;p500closing.csv\",\"r\")\ndata = f.read()\nrows = data.split(\"\\n\")\nrows_noheader = rows[1:len(rows)]\n\n#Separating values from messy CSV, putting each value to it's list and also a combined list of both\nfor row in rows_noheader:\n    [date, value] = row[1:len(row)-1].split('\\t')\n    stock_date.append(date)\n    stock_value.append((value))\n    stock_data.append((date, value))\n\n#Making an array of arrays ready for use with TF,\n#slicing array of data to smaller train data\n#and normalizing the values against the max for training    \nstock_value = np.array(stock_value, dtype=np.float32)\nnormvalue = [i/max(stock_value) for i in stock_value]\nnormvalue = np.array(normvalue)\ntrain_data = [np.array(i) for i in normvalue[:500]]\ntrain_data = np.array(train_data)\ntrain_labels = train_data\n\n#First plotting the actual values\nplt.plot(normvalue)\n\n#Creating TF session\nsess = tf.Session()\nK.set_session(sess)\nK.set_learning_phase(0)\n\nmodel_version = \"2\"\n#Declaring the amount of epochs, the amount of periods the machine will learn\n#(can play around with it) \nepoch = 20\n#Building the model\n####################\nmodel = Sequential()\nmodel.add(Dense(8, input_dim=1))\nmodel.add(Activation('tanh'))\nmodel.add(Dense(1))\nmodel.add(Activation('sigmoid'))\nsgd = SGD(lr=0.1)\n\n#Compiling and fitting our data to the model\nmodel.compile(loss='binary_crossentropy', optimizer=sgd)\nmodel.fit(train_data, train_labels, batch_size=1, nb_epoch=epoch)\n\n#declaring varaibles for the models input and output to make sure they are all valid\nx = model.input\ny = model.output\n\nprediction_signature = tf.saved_model.signature_def_utils.predict_signature_def({\"inputs\": x}, {\"prediction\":y})\n\nvalid_prediction_signature = tf.saved_model.signature_def_utils.is_valid_signature(prediction_signature)\nif(valid_prediction_signature == False):\n    raise ValueError(\"Error: Prediction signature not valid!\")\n\n#Here the actual prediction of the real values occurs\npredictions = model.predict(normvalue)\n\n#Plotting the prediction values\nplt.xlabel(\"Blue: Actual            Orange: Prediction\")    \nplt.plot(predictions)\n</code></pre>\n\n<p>Please feel free to make changes and experiment around with it as you deem fit.\nI would like to thank you all for taking the time to examine my issue and providing a variety of solutions, and am looking forward to learn more in the future :)</p>\n"}, {"tags": [], "owner": {"reputation": 138, "user_id": 6215584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52f3d8834ff9b12dd101fca56c8a12d2?s=128&d=identicon&r=PG&f=1", "display_name": "kilgoretrout", "link": "https://stackoverflow.com/users/6215584/kilgoretrout"}, "is_accepted": false, "score": 0, "last_activity_date": 1593096388, "creation_date": 1593096388, "answer_id": 62578094, "question_id": 53421626, "link": "https://stackoverflow.com/questions/53421626/valueerror-found-array-with-0-sample-s-shape-0-1-while-a-minimum-of-1-is/62578094#62578094", "title": "ValueError: Found array with 0 sample (s) (shape= (0, 1) while a minimum of 1 is required by MinMaxScaler", "body": "<p>I ran into the same error message while writing a unittest for a text classification package based on logistic regression, I realized that it was due to trying to apply a model to an empty df.</p>\n<p>In my case, this could happen because my model was actually a tree of models which mirrorred the category tree in my (huge) training data, but only a few of those subcases actually took place in the tiny test df in my unittest.</p>\n<p>Long story short: I think the error probably happens because at some point</p>\n<pre><code>train_data[di:di+smoothing_window_size,:]\n</code></pre>\n<p>ends up having length 0 in your loop.</p>\n"}], "owner": {"reputation": 41, "user_id": 10687398, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GEnCATOw-Lw/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iuCvQR_IcALc_XvnPLecRosB3Ttw/mo/photo.jpg?sz=128", "display_name": "Daniel Vaindiner", "link": "https://stackoverflow.com/users/10687398/daniel-vaindiner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31780, "favorite_count": 0, "answer_count": 7, "score": 4, "last_activity_date": 1593096388, "creation_date": 1542841109, "last_edit_date": 1576904285, "question_id": 53421626, "link": "https://stackoverflow.com/questions/53421626/valueerror-found-array-with-0-sample-s-shape-0-1-while-a-minimum-of-1-is", "title": "ValueError: Found array with 0 sample (s) (shape= (0, 1) while a minimum of 1 is required by MinMaxScaler", "body": "<p>This semester I started working with ML. We have only used APIs such as Microsoft's Azure and Amazon's AWS, but we have not gone in depth about how those services work. My good friend, who is a Math major senior, asked me to help him create a stock predictor with TensorFlow based on a <code>.csv</code> the file he provided me.</p>\n\n<p>There are a few problems I have. The first one is his <code>.csv</code> file. The file has only dates and closing values, which are not separated, therefore I had to manually separate the dates and values. I've managed to do that, and now I'm having trouble with the MinMaxScaler(). I was told I could pretty much disregard the dates and only test the closing values, normalize them, and make a prediction based off of them.</p>\n\n<p>I keep getting this error:</p>\n\n<blockquote>\n  <p>ValueError: Found array with 0 sample(s) (shape=(0, 1)) while a\n  minimum of 1 is required by MinMaxScaler()</p>\n</blockquote>\n\n<p>I honestly have not ever used <code>SKLearning</code> and TensorFlow before, and it is my first time working on such a project. All the guides I see on the topic utilize pandas, but in my case, the <code>.csv</code> file is a mess and I don't believe I can use pandas for it.</p>\n\n<p>I'm following <a href=\"https://www.datacamp.com/community/tutorials/lstm-python-stock-market\" rel=\"nofollow noreferrer\">this</a> guide:</p>\n\n<p>But unfortunately, due to my lack of experience, some things are not really working for me, and I would appreciate a little more clarity of how I should proceed in my case.</p>\n\n<p>Attached below is my (messy) code:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport tensorflow as tf\nimport sklearn\nfrom sklearn.model_selection import KFold\nfrom sklearn.preprocessing import scale\nfrom sklearn.preprocessing import MinMaxScaler\nimport matplotlib\nimport matplotlib.pyplot as plt\nfrom dateutil.parser import parse\nfrom datetime import datetime, timedelta\nfrom collections import deque\n\nstock_data = []\nstock_date = []\nstock_value = []\nf = open(\"s&amp;p500closing.csv\",\"r\")\ndata = f.read()\nrows = data.split(\"\\n\")\nrows_noheader = rows[1:len(rows)]\n\n#Separating values from messy `.csv`, putting each value to it's list and also a combined list of both\nfor row in rows_noheader:\n    [date, value] = row[1:len(row)-1].split('\\t')\n    stock_date.append(date)\n    stock_value.append((value))\n    stock_data.append((date, value))\n\n#Numpy array of all closing values converted to floats and normalized against the maximum\nstock_value = np.array(stock_value, dtype=np.float32)\nnormvalue = [i/max(stock_value) for i in stock_value]\n\n#Number of closing values and days. Since there is one closing value for each, they both match and there are 4528 of them (each)\nnclose_and_days = 0\nfor i in range(len(stock_data)):\n    nclose_and_days+=1\n\ntrain_data = stock_value[:2264]\ntest_data = stock_value[2264:]\n\nscaler = MinMaxScaler()\n\ntrain_data = train_data.reshape(-1,1)\ntest_data = test_data.reshape(-1,1)\n\n# Train the Scaler with training data and smooth data\nsmoothing_window_size = 1100\nfor di in range(0,4400,smoothing_window_size):\n    #error occurs here\n    scaler.fit(train_data[di:di+smoothing_window_size,:])\n    train_data[di:di+smoothing_window_size,:] = scaler.transform(train_data[di:di+smoothing_window_size,:])\n\n# You normalize the last bit of remaining data\nscaler.fit(train_data[di+smoothing_window_size:,:])\ntrain_data[di+smoothing_window_size:,:] = scaler.transform(train_data[di+smoothing_window_size:,:])\n\n# Reshape both train and test data\ntrain_data = train_data.reshape(-1)\n\n# Normalize test data\ntest_data = scaler.transform(test_data).reshape(-1)\n\n# Now perform exponential moving average smoothing\n# So the data will have a smoother curve than the original ragged data\nEMA = 0.0\ngamma = 0.1\nfor ti in range(1100):\n    EMA = gamma*train_data[ti] + (1-gamma)*EMA\n    train_data[ti] = EMA\n\n# Used for visualization and test purposes\nall_mid_data = np.concatenate([train_data,test_data],axis=0)\n\nwindow_size = 100\nN = train_data.size\nstd_avg_predictions = []\nstd_avg_x = []\nmse_errors = []\n\nfor pred_idx in range(window_size,N):\n    std_avg_predictions.append(np.mean(train_data[pred_idx-window_size:pred_idx]))\n    mse_errors.append((std_avg_predictions[-1]-train_data[pred_idx])**2)\n    std_avg_x.append(date)\n\nprint('MSE error for standard averaging: %.5f'%(0.5*np.mean(mse_errors)))\n</code></pre>\n"}, {"tags": ["python", "if-statement", "syntax-error", "code-formatting"], "comments": [{"owner": {"reputation": 1002, "user_id": 10638608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dabljues", "link": "https://stackoverflow.com/users/10638608/dabljues"}, "edited": false, "score": 2, "creation_date": 1542841172, "post_id": 53421614, "comment_id": 93717615, "body": "Could you provide an error message that pops up in your terminal?"}, {"owner": {"reputation": 1, "user_id": 10688280, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kfLyzQD1HJk/AAAAAAAAAAI/AAAAAAAAAvk/rhB2UkEX6NA/photo.jpg?sz=128", "display_name": "John Lang", "link": "https://stackoverflow.com/users/10688280/john-lang"}, "reply_to_user": {"reputation": 1002, "user_id": 10638608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dabljues", "link": "https://stackoverflow.com/users/10638608/dabljues"}, "edited": false, "score": 0, "creation_date": 1542841375, "post_id": 53421614, "comment_id": 93717695, "body": "On this link: <a href=\"https://focusedfrontprocessor.johnlang2015.repl.run/\" rel=\"nofollow noreferrer\">focusedfrontprocessor.johnlang2015.repl.run</a>"}, {"owner": {"reputation": 1149, "user_id": 2480947, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/0fI4r.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/2480947/nick"}, "edited": false, "score": 0, "creation_date": 1542841473, "post_id": 53421614, "comment_id": 93717733, "body": "Hi John, you&#39;re missing colons after the <code>elif</code> expressions. That will be giving you <code>syntax error: invalid syntax</code>."}, {"owner": {"reputation": 1, "user_id": 10688280, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kfLyzQD1HJk/AAAAAAAAAAI/AAAAAAAAAvk/rhB2UkEX6NA/photo.jpg?sz=128", "display_name": "John Lang", "link": "https://stackoverflow.com/users/10688280/john-lang"}, "edited": false, "score": 0, "creation_date": 1542841550, "post_id": 53421614, "comment_id": 93717757, "body": "I just added the colons: The error is saying that the issue is on line 5, and the colon is incorrect. Line 5 from the top, or the (if StringList[x] == &quot;a&quot;:)"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1542841969, "post_id": 53421614, "comment_id": 93717894, "body": "Please <a href=\"https://stackoverflow.com/posts/53421614/edit\">edit</a> all relevant information into the question itself."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10688280, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kfLyzQD1HJk/AAAAAAAAAAI/AAAAAAAAAvk/rhB2UkEX6NA/photo.jpg?sz=128", "display_name": "John Lang", "link": "https://stackoverflow.com/users/10688280/john-lang"}, "edited": false, "score": 0, "creation_date": 1542841867, "post_id": 53421691, "comment_id": 93717856, "body": "Thanks so much! I&#39;m a bit rusty on python as I&#39;ve been working in C#. If I&#39;m converting each letter to a number, could I use a list and then use x to pull the number from said list?"}, {"owner": {"reputation": 1002, "user_id": 10638608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dabljues", "link": "https://stackoverflow.com/users/10638608/dabljues"}, "reply_to_user": {"reputation": 1, "user_id": 10688280, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kfLyzQD1HJk/AAAAAAAAAAI/AAAAAAAAAvk/rhB2UkEX6NA/photo.jpg?sz=128", "display_name": "John Lang", "link": "https://stackoverflow.com/users/10688280/john-lang"}, "edited": false, "score": 0, "creation_date": 1542842136, "post_id": 53421691, "comment_id": 93717940, "body": "Yes, and, like in C#, it doesn&#39;t have to be <code>x</code>. You can use whatever name you want to"}], "tags": [], "owner": {"reputation": 1002, "user_id": 10638608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dabljues", "link": "https://stackoverflow.com/users/10638608/dabljues"}, "is_accepted": true, "score": 1, "last_activity_date": 1542841573, "creation_date": 1542841573, "answer_id": 53421691, "question_id": 53421614, "link": "https://stackoverflow.com/questions/53421614/iterator-of-if-functions-return-errors/53421691#53421691", "title": "Iterator of if-functions return errors", "body": "<p>You have a syntax error. Pythons for loops are defined as <code>for x in y:</code>. You forgot about the <code>:</code>. The colons are also needed after <code>ifs</code> or <code>elifs</code> or <code>elses</code></p>\n\n<p>Also, you don't have to convert a <code>range()</code> into a list. <code>range()</code> in Python3 returns a generator, which you can safely iterate on (in Python2 you would have to use <code>xrange</code>).</p>\n\n<p>Also, you don't have to increment <code>x</code> as it's being incremented by Pythons <code>for</code> loop.</p>\n\n<p>Then, don't use C-like loops. You don't have to operate on the indexes. It's better to write more pythonic code, by using Pythons for loop like other languages <code>foreach</code>:</p>\n\n<pre><code>ConvertString = input(\"Enter a string: \")\nStringList = list(ConvertString)\nprint (StringList)\nfor x in StringList:\n  if x == \"a\":\n    print(\"Letter found: a\")\n  elif x == \"b\":\n    print(\"Letter found: b\")\n  elif x == \"c\":\n    print(\"Letter found: c\")\n  elif x == \"d\":\n    print(\"Letter found: d\")\n  elif x == \"e\":\n    print(\"Letter found: e\")\n  elif x == \"f\":\n    print(\"Letter found: f\")\n</code></pre>\n\n<p>And the last one, if you only care about <code>a-f</code> letters, fine, you could write a code like this. But it would be better to check if the letter is <code>&gt;= a</code> or <code>&lt;= f</code>. But if you want to check the whole alphabet, it's better to write it like this:</p>\n\n<pre><code>ConvertString = input(\"Enter a string: \")\nStringList = list(ConvertString)\nprint (StringList)\nfor x in StringList:\n  print(f\"Letter found: {x}\")\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10688280, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kfLyzQD1HJk/AAAAAAAAAAI/AAAAAAAAAvk/rhB2UkEX6NA/photo.jpg?sz=128", "display_name": "John Lang", "link": "https://stackoverflow.com/users/10688280/john-lang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 53421691, "answer_count": 1, "score": -2, "last_activity_date": 1542841618, "creation_date": 1542841051, "question_id": 53421614, "link": "https://stackoverflow.com/questions/53421614/iterator-of-if-functions-return-errors", "title": "Iterator of if-functions return errors", "body": "<p>I have just started on a coding project that can encode messages. When trying to use if and elif functions, repl.it is returning an error, no matter what I try to end the if functions with. </p>\n\n<p>Code:</p>\n\n<pre><code>    ConvertString = input(\"Enter a string: \")\n    StringList = list(ConvertString)\n    print (StringList)\n    for x in list(range(len(StringList))\n      if StringList[x] == \"a\":\n        print(\"Letter found: a\")\n      elif StringList[x] == \"b\"\n        print(\"Letter found: b\")\n      elif StringList[x] == \"c\"\n        print(\"Letter found: c\")\n      elif StringList[x] == \"d\"\n        print(\"Letter found: d\")\n      elif StringList[x] == \"e\"\n        print(\"Letter found: e\")\n      elif StringList[x] == \"f\"\n        print(\"Letter found: f\")\n      x += 1\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "collision-detection", "zelle-graphics"], "comments": [{"owner": {"reputation": 689, "user_id": 6770307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xtG9W.jpg?s=128&g=1", "display_name": "bison", "link": "https://stackoverflow.com/users/6770307/bison"}, "edited": false, "score": 0, "creation_date": 1542841200, "post_id": 53421574, "comment_id": 93717629, "body": "Looks like if you know the location of sqrg and blx with the dimensions, you should be able to determine if those points intersect each iteration."}], "answers": [{"tags": [], "owner": {"reputation": 9377, "user_id": 8431111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GteAE.jpg?s=128&g=1", "display_name": "J_H", "link": "https://stackoverflow.com/users/8431111/j-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1542851143, "creation_date": 1542851143, "answer_id": 53422805, "question_id": 53421574, "link": "https://stackoverflow.com/questions/53421574/how-do-i-implement-collision-detection/53422805#53422805", "title": "How do I implement collision detection?", "body": "<p>Your radius is twenty. Inside the loop, just test whether Euclidean distance between sqrg and blx is within 20.</p>\n"}, {"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 0, "last_activity_date": 1543007453, "creation_date": 1543007453, "answer_id": 53452972, "question_id": 53421574, "link": "https://stackoverflow.com/questions/53421574/how-do-i-implement-collision-detection/53452972#53452972", "title": "How do I implement collision detection?", "body": "<p>Below is a stripped down example based on your code.  It measures the distance between the centers of the two moving objects to determine if a collision has occurred.  If you manage to get the ball to hit the square, the ball should bounce straight up:</p>\n\n<pre><code>from random import randint\nfrom time import sleep\nfrom graphics import *\n\ndef distance(p1, p2):\n    return ((p2.x - p1.x) ** 2 + (p2.y - p1.y) ** 2) ** 0.5\n\nwn = GraphWin(\"AK\", 700, 700)\n\nsqrg = Rectangle(Point(325, 625), Point(375, 675))\nsqrg.setFill(\"red\")\nsqrg.draw(wn)\n\nnumx = randint(10, 700)\n\nblx = Circle(Point(numx, 80), 20)\nblx.setFill(\"blue\")\nblx.draw(wn)\n\nxval, yval = 10, 0\n\nbheading = 1\n\nwn.getMouse()\n\nfor i in range(150):\n    sqrg.move(xval, yval)\n\n    if distance(blx.getCenter(), sqrg.getCenter()) &lt; 25:\n        bheading *= -1\n\n    symbl = wn.checkKey()\n\n    if symbl == \"Right\":\n        xval = 10\n    elif symbl == \"Left\":\n        xval = -10\n\n    sleep(0.1)\n\n    blx.move(0, bheading * 20)\n</code></pre>\n\n<p>Cleary not a viable game as-is, but a demonstration of collision detection.</p>\n"}], "owner": {"reputation": 27, "user_id": 10688284, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Wm3vSkw1kTA/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i29mmSn_jO906ndkbsv61LVn3TAA/mo/photo.jpg?sz=128", "display_name": "joseph viviano", "link": "https://stackoverflow.com/users/10688284/joseph-viviano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1543007492, "creation_date": 1542840847, "last_edit_date": 1543007492, "question_id": 53421574, "link": "https://stackoverflow.com/questions/53421574/how-do-i-implement-collision-detection", "title": "How do I implement collision detection?", "body": "<pre><code>from graphics import*\nimport time\nimport random \n\ndef main():\n\n    numx=random.randint(10,700)\n\n    wn=GraphWin(\"AK\",700,700)\n    wn.setBackground(\"white\")\n\n    msg=Text(Point(25,30),\"Score\")\n    msg.setSize(12)\n    msg.setTextColor('blue')\n    msg.draw(wn)\n\n    inch=Entry(Point(60,30),2)\n    inch.setFill('white')\n    inch.draw(wn) \n\n    sqrg=Rectangle(Point(330,650),Point(430,665))\n    sqrg.setFill(\"red\")\n    sqrg.draw(wn)\n\n    blx=Circle(Point(numx,80),20)\n    blx.setFill(\"blue\")\n    blx.draw(wn)\n\n\n    xval=10\n    yval=0\n    wn.getMouse()\n    for i in range(150):\n        sqrg.move(xval,yval)\n        symbl=wn.checkKey()\n        if symbl==\"Right\":\n                xval=10\n                yval=0\n        if symbl==\"Left\":\n                xval=-10\n                yval=0\n        time.sleep(0.08)\n        blx.move(0,20)\n\nmain()\n</code></pre>\n\n<p>I'm very confused my professor is very confusing, and I need to do this for a project where when collision is detected the score goes up.</p>\n"}, {"tags": ["python", "pandas", "matplotlib", "jupyter-notebook"], "answers": [{"comments": [{"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 1, "creation_date": 1542841192, "post_id": 53421616, "comment_id": 93717623, "body": "damn, it&#39;s so obvious! Thank you!"}], "tags": [], "owner": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "is_accepted": true, "score": 1, "last_activity_date": 1542841061, "creation_date": 1542841061, "answer_id": 53421616, "question_id": 53421543, "link": "https://stackoverflow.com/questions/53421543/multiple-matplotlib-subplots-interleave-pandas-dataframe-html-with-each-subplot/53421616#53421616", "title": "multiple matplotlib subplots: interleave pandas dataframe HTML with each subplot", "body": "<p>I believe you need to create three separate figures and call <code>plt.show()</code> within the loop. Something like this (side note, I don't <em>think</em> one needs <code>pyplot.close</code> using the Jupyter notebook frontend):</p>\n\n<pre><code>trades = pandas.read_csv(...)\n\nfor i, r in enumerate(trades.iterrows()):\n    _, trade = r\n\n    start = trade.open_time  - datetime.timedelta(seconds=30)\n    end   = trade.close_time + datetime.timedelta(seconds=30) \n\n    b = bids[start:end]\n    a = asks[start:end]\n\n    fig, ax = plt.subplots(figsize=(40, 15))\n\n    # plot bid/ask\n    ax.plot_date(b.index, b, fmt='-',  label='bid')\n    ax.plot_date(a.index, a, fmt='-',  label='ask')\n\n    # plot entry/exit markers\n    ax.plot(trade.open_time,  trade.open_price,  marker='o', color='b')\n    ax.plot(trade.close_time, trade.close_price, marker='o', color='r')\n\n    ax.set_title(\"Trade {}\".format(i+1, fontsize=10))\n    ax.set_xlabel(\"Date\")\n    ax.set_ylabel(\"Price\")\n\n    ax.legend(loc='best', fontsize='large')\n\n    t = pandas.DataFrame(trades.iloc[i]).T\n    IPython.display.display(IPython.display.HTML(t.to_html())\n\n    pyplot.show()\n</code></pre>\n"}], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 53421616, "answer_count": 1, "score": 0, "last_activity_date": 1542841061, "creation_date": 1542840670, "question_id": 53421543, "link": "https://stackoverflow.com/questions/53421543/multiple-matplotlib-subplots-interleave-pandas-dataframe-html-with-each-subplot", "title": "multiple matplotlib subplots: interleave pandas dataframe HTML with each subplot", "body": "<p>I have a <code>pandas.DataFrame</code> with multiple rows (1 per trade I want to inspect)</p>\n\n<pre><code>trades = pandas.read_csv(...)\n</code></pre>\n\n<p>I want to plot each trade on a matplotlib subplot. I create a <code>pyplot.figure</code> using <code>len(trades)</code> to create sufficient height</p>\n\n<pre><code>fig = pyplot.figure(figsize=(40,15 * len(trades)))\n</code></pre>\n\n<p>I then iterate over each trade and generate a plot</p>\n\n<pre><code>for i,r in enumerate(trades.iterrows()):\n    _, trade = r\n\n    start = trade.open_time  - datetime.timedelta(seconds=30)\n    end   = trade.close_time + datetime.timedelta(seconds=30) \n\n    b = bids[start:end]\n    a = asks[start:end]\n\n    ax = fig.add_subplot(len(trades),1,i+1)\n\n    # plot bid/ask\n    ax.plot_date(b.index, b, fmt='-',  label='bid')\n    ax.plot_date(a.index, a, fmt='-',  label='ask')\n\n    # plot entry/exit markers\n    ax.plot(trade.open_time,  trade.open_price,  marker='o', color='b')\n    ax.plot(trade.close_time, trade.close_price, marker='o', color='r')\n\n    ax.set_title(\"Trade {}\".format(i+1, fontsize=10)\n    ax.set_xlabel(\"Date\")\n    ax.set_ylabel(\"Price\")\n\n    ax.legend(loc='best', fontsize='large')\n\npyplot.show()\n\n# free resources\npyplot.close(fig.number) \n</code></pre>\n\n<p>This works great.</p>\n\n<p>Now, however, I want to display the rendered HTML of the dataframe for the trade in question.</p>\n\n<p>Since I am doing this in a jupyter notebook, from <a href=\"https://stackoverflow.com/a/29665452/955273\">this SO answer</a> I was able to find the following snippet which will display my dataframe in html:</p>\n\n<pre><code>t = pandas.DataFrame(trades.iloc[i]).T\nIPython.display.display(IPython.display.HTML(t.to_html())\n</code></pre>\n\n<p>I insert this snippet into my loop.</p>\n\n<p>The problem is that each trade's rendered HTML dataframe is printed one-after-the-other, and then after all of the dataframes have been printed, the plots are printed.</p>\n\n<pre><code>+-----------+\n| dataframe |\n+-----------+\n+-----------+\n| dataframe |\n+-----------+\n+-----------+\n| dataframe |\n+-----------+\n+------+\n|      |\n| plot |\n|      |\n+------+\n+------+\n|      |\n| plot |\n|      |\n+------+\n+------+\n|      |\n| plot |\n|      |\n+------+\n</code></pre>\n\n<p>Given I have created a single large <code>pyplot.figure</code>, and I call <code>pyplot.show()</code> <strong>after</strong> the loop, this makes sense - inside the loop I output the dataframe HTML, and after the loop I display the plot.</p>\n\n<p><strong>Question:</strong></p>\n\n<p>How can I interleave the notebook HTML and each subplot?</p>\n\n<pre><code>+-----------+\n| dataframe |\n+-----------+\n+------+\n|      |\n| plot |\n|      |\n+------+\n+-----------+\n| dataframe |\n+-----------+\n+------+\n|      |\n| plot |\n|      |\n+------+\n+-----------+\n| dataframe |\n+-----------+\n+------+\n|      |\n| plot |\n|      |\n+------+\n</code></pre>\n"}, {"tags": ["python", "matlab", "audio", "signal-processing"], "comments": [{"owner": {"reputation": 989, "user_id": 6534215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kSf1u.png?s=128&g=1", "display_name": "Mouse On Mars", "link": "https://stackoverflow.com/users/6534215/mouse-on-mars"}, "edited": false, "score": 4, "creation_date": 1542843885, "post_id": 53421522, "comment_id": 93718485, "body": "Welcome to Stackoverflow. This site help people with programming related questions. Your question seems to be more theory focused and I would recommend posting your questions at <a href=\"https://dsp.stackexchange.com/\">dsp.stackexchange.com</a>. Showing a spectral plot of your signal might also be a good idea."}], "owner": {"reputation": 29, "user_id": 10455830, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nDr0o7vrLcQ/AAAAAAAAAAI/AAAAAAAAKq8/UtyfAoHUPQM/photo.jpg?sz=128", "display_name": "Michael Moshe Michelashvili", "link": "https://stackoverflow.com/users/10455830/michael-moshe-michelashvili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1542840600, "creation_date": 1542840600, "question_id": 53421522, "link": "https://stackoverflow.com/questions/53421522/single-channel-monaural-audio-background-removal-algorithms-and-implementation", "title": "Single-Channel (Monaural) Audio Background removal algorithms and implementations", "body": "<p>What are the best algorithms for background noise removal from an audio file?</p>\n\n<p>The recordings I'm working with are monaural, the background noise is broadband and the frequencies overlap with the signals I'm interested in (simple filtering won't do).</p>\n\n<p>Ones with python/matlab implementation are preferred.</p>\n"}, {"tags": ["python", "artificial-intelligence", "rules", "rule-engine", "expert-system"], "comments": [{"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 1, "creation_date": 1542840865, "post_id": 53421492, "comment_id": 93717525, "body": "Your question is too broad. Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer. Avoid asking multiple distinct questions at once. See the <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask</a> page for help clarifying this question."}, {"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 3, "creation_date": 1542840917, "post_id": 53421492, "comment_id": 93717541, "body": "Not much more efficient but easier to write could be a file format based on Python expressions. A rule entry could then be <code>sex == &quot;male&quot; and age &gt; 75 -&gt; A</code>. The entry can then be split at <code>-&gt;</code>. The first part goes to Python&#39;s <code>eval()</code> (with appropriate namespace dictionary) and if it returns <code>True</code> the class is taken from the second part."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 5, "creation_date": 1542840971, "post_id": 53421492, "comment_id": 93717558, "body": "It sounds like the most important choice is how to store/represent the rules.  Who will be responsible for maintaining the rules -- a programmer, or a business person?  How complex can the rules be?  Your first example rule is already fairly complex -- <code>sex == &#39;f&#39; and age &gt;= 22 and age &lt;= 25</code>."}, {"owner": {"reputation": 1115, "user_id": 7692855, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/69900162929289ad3ce2360bcf9af08a?s=128&d=identicon&r=PG&f=1", "display_name": "user7692855", "link": "https://stackoverflow.com/users/7692855/user7692855"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1542841261, "post_id": 53421492, "comment_id": 93717654, "body": "@JohnGordon Yes the question really is how to store/represent the rules. I would like a front end to allow non tech people to add and remove rules. It can be complex as <code>if x or y, but not z or q, then p</code>"}, {"owner": {"reputation": 511, "user_id": 3088597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564c69ffc414b878d3a2f641337cded4?s=128&d=identicon&r=PG", "display_name": "srattigan", "link": "https://stackoverflow.com/users/3088597/srattigan"}, "edited": false, "score": 0, "creation_date": 1542849549, "post_id": 53421492, "comment_id": 93719722, "body": "It sounds like it may be a Flask or Django app?  It&#39;s an interesting problem. 400 rules to be edited by a user... would the addition or removal apply to all users or individual users? I think writing an overly long set of if elif could likely be avoided...  how many person objects typ?   As an aside python classes use Titlecase by convention."}, {"owner": {"reputation": 1115, "user_id": 7692855, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/69900162929289ad3ce2360bcf9af08a?s=128&d=identicon&r=PG&f=1", "display_name": "user7692855", "link": "https://stackoverflow.com/users/7692855/user7692855"}, "edited": false, "score": 0, "creation_date": 1542889835, "post_id": 53421492, "comment_id": 93735948, "body": "I was thinking Flask for the front end part but still trying to decided (a) how to store the rules (b) how to apply rules to the input. I have updated the question with more details -&gt; The same rule set will be applied to all inputs to the system."}, {"owner": {"reputation": 1115, "user_id": 7692855, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/69900162929289ad3ce2360bcf9af08a?s=128&d=identicon&r=PG&f=1", "display_name": "user7692855", "link": "https://stackoverflow.com/users/7692855/user7692855"}, "reply_to_user": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1543075398, "post_id": 53421492, "comment_id": 93791475, "body": "I&#39;m not sure how this question is two broad. I&#39;ve explained what the problem is, what I would like the end result to be and explained where I am stuck. noxdafox was able to offer a very good concise answer so clearly the question can be answered. Please re-open. @Selcuk"}, {"owner": {"reputation": 1115, "user_id": 7692855, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/69900162929289ad3ce2360bcf9af08a?s=128&d=identicon&r=PG&f=1", "display_name": "user7692855", "link": "https://stackoverflow.com/users/7692855/user7692855"}, "reply_to_user": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 3, "creation_date": 1543089374, "post_id": 53421492, "comment_id": 93795091, "body": "@Selcuk How do I get this question either reopened or just completely deleted. <code>Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer</code> -&gt; Yet I got a very good answer so it is answerable. I got a brilliant answer by noxdafox then put on hold so no-one else can offer their insights. Very frustrating to have it closed just after getting brilliant information."}, {"owner": {"reputation": 942, "user_id": 1925299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe4a9f318513218b7fab16b4ea922a01?s=128&d=identicon&r=PG", "display_name": "Harry Lee", "link": "https://stackoverflow.com/users/1925299/harry-lee"}, "edited": false, "score": 0, "creation_date": 1560664678, "post_id": 53421492, "comment_id": 99806914, "body": "Maybe you can check <a href=\"https://github.com/tclh123/rule\" rel=\"nofollow noreferrer\">github.com/tclh123/rule</a>. I also had a similar question before, so I wrote this simple rule engine. You can store your rule in json/yaml strings by using it, and define your context and action in your Django app."}], "answers": [{"comments": [{"owner": {"reputation": 1071, "user_id": 4256346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a3489b9a5ab38615c841d4cd96efe9?s=128&d=identicon&r=PG&f=1", "display_name": "Jasha", "link": "https://stackoverflow.com/users/4256346/jasha"}, "edited": false, "score": 2, "creation_date": 1597617610, "post_id": 53457406, "comment_id": 112184006, "body": "<code>PyKnow</code> seems to be no longer maintained. There is an active fork <a href=\"https://github.com/nilp0inter/experta\" rel=\"nofollow noreferrer\">experta</a> of the <code>PyKnow</code> project."}, {"owner": {"reputation": 11520, "user_id": 1794497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t6y5r.png?s=128&g=1", "display_name": "noxdafox", "link": "https://stackoverflow.com/users/1794497/noxdafox"}, "reply_to_user": {"reputation": 1071, "user_id": 4256346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a3489b9a5ab38615c841d4cd96efe9?s=128&d=identicon&r=PG&f=1", "display_name": "Jasha", "link": "https://stackoverflow.com/users/4256346/jasha"}, "edited": false, "score": 0, "creation_date": 1600091726, "post_id": 53457406, "comment_id": 112970571, "body": "Currently, last commit for experta seems to be 1 year ago. It does not seem much more active than the original fork. I will keep an eye on both and update the post if neede. Thanks for highlighting it!"}, {"owner": {"reputation": 780, "user_id": 3937811, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Zt1z6.png?s=128&g=1", "display_name": "Evan Gertis", "link": "https://stackoverflow.com/users/3937811/evan-gertis"}, "edited": false, "score": 0, "creation_date": 1607785033, "post_id": 53457406, "comment_id": 115384494, "body": "It looks like pyke was created in 2010. The download is listed as last being modified in 2010. Is this still relevant?"}], "tags": [], "owner": {"reputation": 11520, "user_id": 1794497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t6y5r.png?s=128&g=1", "display_name": "noxdafox", "link": "https://stackoverflow.com/users/1794497/noxdafox"}, "is_accepted": false, "score": 56, "last_activity_date": 1605783776, "last_edit_date": 1605783776, "creation_date": 1543056965, "answer_id": 53457406, "question_id": 53421492, "link": "https://stackoverflow.com/questions/53421492/python-rule-based-engine/53457406#53457406", "title": "Python Rule Based Engine", "body": "<p>Rather than re-inventing the wheel, I'd suggest you to use some readily available solution. There are several expert systems out there and I'll focus on those which are either in Python or can be used via Python.</p>\n<h1>CLIPS</h1>\n<p><a href=\"http://www.clipsrules.net/\" rel=\"noreferrer\"><code>CLIPS</code></a> is an expert system originally developed by NASA. It's considered state of the art and used in university courses when teaching basics of AI. It's a great starting point due to its excellent documentation.</p>\n<p>Its syntax is definitely not Python, it rather reminds of Lisp. The advantage of <code>CLIPS</code> is that is a solid C engine which can be fully integrated with any other Python system via its bindings: the older <a href=\"https://github.com/almostearthling/pyclips\" rel=\"noreferrer\">pyclips</a> and the newer <a href=\"https://github.com/noxdafox/clipspy\" rel=\"noreferrer\">clipspy</a>. The bindings allow to embed Python code within the CLIPS language making it very easy to extend.</p>\n<p>Rules can be loaded at runtime without the need of restarting the engine which should better suit your need.</p>\n<h1>PyKE</h1>\n<p>The <a href=\"http://pyke.sourceforge.net/index.html\" rel=\"noreferrer\"><code>Python Knowledge Engine</code></a> it's a fairly powerful logic programming framework. As for <code>CLIPS</code>, <code>PyKE</code> comes with its own syntax to express rules and relies on Python for implementing the mechanics.</p>\n<p>In other words, you write what to do in Python and you express when and how via rules.</p>\n<p>Rules can be activated and deactivated on demand. This should allow you to support releaseless updates.</p>\n<h1>Durable Rules</h1>\n<p><a href=\"https://github.com/jruizgit/rules\" rel=\"noreferrer\"><code>Durable Rules</code></a> is a fairly new project with the ambition of supporting multiple programming languages (Python, Node.js and Ruby so far).</p>\n<p><code>Durable Rules</code> allow you to write the whole knowledge base (facts and rules) in Python. The syntax might look a bit weird though, a note in this regards at the end of the post.</p>\n<p>I am not sure if you can update the rule-set while the system is online.</p>\n<p>Apart from the multiple syntax support, what interest me of this project is the fact the core is a C based implementation of <a href=\"https://en.wikipedia.org/wiki/Rete_algorithm\" rel=\"noreferrer\"><code>RETE</code></a> built on top of Redis DB. On a long run, this might lead to some interesting development.</p>\n<h1>PyKnow, Python Intellect &amp; Business Rules</h1>\n<p><a href=\"https://github.com/buguroo/pyknow\" rel=\"noreferrer\">PyKnow</a>/<a href=\"https://github.com/nilp0inter/experta\" rel=\"noreferrer\">Experta</a></p>\n<p><a href=\"https://github.com/nemonik/Intellect\" rel=\"noreferrer\">Intellect</a></p>\n<p><a href=\"https://github.com/venmo/business-rules\" rel=\"noreferrer\">Business Rules</a></p>\n<p>These projects allow to express knowledge bases mostly in Python. I have never seen them in action and I am not sure about their performance and feature support.</p>\n<hr />\n<p>The main reason I recommend against brewing your own rule engine to use in production is that, despite it seems an easy task at first, it quickly becomes evident that the problem domain is way bigger than predicted.</p>\n<p>Python OOP nature seems initially a good fit for expressing knowledge as both Rules and Facts could be simple classes.\nNevertheless, as soon as the pattern matching becomes a little more complex (<code>Employee</code> must have worked &gt; 3 years in <code>Company</code> which <code>Stock</code> value is &lt; 10$ in the last 3 years) two things become evident.</p>\n<ol>\n<li>The limitation of simply using <code>and</code>, <code>or</code>, <code>not</code>, <code>is</code>, ... make things really hard to read</li>\n<li>The problem suddenly reveals its exponential nature and performance become a major concern</li>\n</ol>\n<p>Moreover, forcing the employees of an organization to use yet-another-in-house-built-language is usually a bad idea. It prevents them from learning something used in broader contexts such as <code>CLIPS</code> or <a href=\"https://www.drools.org/\" rel=\"noreferrer\"><code>Drools</code></a> and will get you stuck in a maintenance/documentation loop for a long time.</p>\n"}], "owner": {"reputation": 1115, "user_id": 7692855, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/69900162929289ad3ce2360bcf9af08a?s=128&d=identicon&r=PG&f=1", "display_name": "user7692855", "link": "https://stackoverflow.com/users/7692855/user7692855"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35373, "favorite_count": 13, "closed_date": 1543072432, "answer_count": 1, "score": 11, "last_activity_date": 1605783776, "creation_date": 1542840389, "last_edit_date": 1592904652, "question_id": 53421492, "link": "https://stackoverflow.com/questions/53421492/python-rule-based-engine", "closed_reason": "Needs more focus", "title": "Python Rule Based Engine", "body": "<p>I am looking to design a system that will essentially need to make decisions based on input. The input will be a person. </p>\n\n<pre><code>class Person:\n    def __init__(self, name, age, sex, weight, height, nationality):\n        self.name = name\n        self.age = age\n        self.sex = sex\n        self.weight = weight\n        self.height = height\n        self.nationality = nationality\n</code></pre>\n\n<p>We want to assign each person to a school class based on certain rules. </p>\n\n<p>For example:</p>\n\n<p>Women from the UK between 22-25 should go to class B. \nMen over 75 should go to class A. \nWomen over 6ft should go to class C.</p>\n\n<p>We will have approximately 400 different rules and the first rule that is met should be applied - we need to maintain the order of the rules. </p>\n\n<p>I am thinking about how to store/represent the rules here. Obviously, you could just have a veeeery long <code>if, elif, elif</code> statement but this isn't efficient. Another option would be storing the rules in a database and maybe having an in memory table. </p>\n\n<p>I would like to be able to edit the rules without doing a release - possibly having a front end to allow non tech people to add, remove and reorder rules. </p>\n\n<p>Everything is on the table here - the only certain requirement is the actually programming language must be Python. </p>\n\n<p><strong>Added for further context</strong></p>\n\n<p>I suppose my question is how to store the rules. At the moment it is one huge long <code>if elif elif</code> statement so anytime there is a change to the business logic the PM does up the new rules and I then convert them to the if statement. </p>\n\n<p>All inputs to the system will be sent through the same list of rules and the first rule that matches will be applied. Multiple rules can apply to each input but it's always the first that is applied. </p>\n\n<p>e.g. </p>\n\n<blockquote>\n  <p>Women over 25 go to Class B<br>\n  Women go to Class A. </p>\n</blockquote>\n\n<p>Any women over 25 will be sent to class B even though the second rule also applies.</p>\n\n<p>Input will always contain the same format input - haven't decided where it will be an object or a dict but some of the values may be <code>None</code>. Some Persons may not have a weight associated with them. </p>\n"}, {"tags": ["python", "fft", "sympy", "complex-numbers"], "answers": [{"tags": [], "owner": {"reputation": 10115, "user_id": 1089161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61e106a28e171b4407171702b182759f?s=128&d=identicon&r=PG", "display_name": "smichr", "link": "https://stackoverflow.com/users/1089161/smichr"}, "is_accepted": true, "score": 1, "last_activity_date": 1542893477, "creation_date": 1542893477, "answer_id": 53432111, "question_id": 53421480, "link": "https://stackoverflow.com/questions/53421480/sympy-simplify-eliminate-imaginary-numbers/53432111#53432111", "title": "Sympy Simplify eliminate imaginary numbers", "body": "<p>If you <em>know</em> the imaginary part is 0 then you can just take the real part of the evaluation, else use \"chop=True\" with caution to discard relatively small imaginary parts:</p>\n\n<pre><code>&gt;&gt;&gt; q\n(-1.53283653303955 + 6.08703605256546e-17*I)/(sqrt(5.69974497311137 + \n5.55111512312578e-17*I)*sqrt(14.2393958011541 - 3.46944695195361e-18*I))\n&gt;&gt;&gt; q.n(chop=True)\n-0.170146237401735\n&gt;&gt;&gt; re(q.n())\n-0.170146237401735\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6173079, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9pSHAcV3gag/AAAAAAAAAAI/AAAAAAAAAvI/T8KDKlVFLKM/photo.jpg?sz=128", "display_name": "masterccioli", "link": "https://stackoverflow.com/users/6173079/masterccioli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 894, "favorite_count": 0, "accepted_answer_id": 53432111, "answer_count": 1, "score": 2, "last_activity_date": 1542893477, "creation_date": 1542840307, "question_id": 53421480, "link": "https://stackoverflow.com/questions/53421480/sympy-simplify-eliminate-imaginary-numbers", "title": "Sympy Simplify eliminate imaginary numbers", "body": "<p>I'm trying to get the cosine similarity between convolved vectors. Because I'm using fast fourier transform, I am using complex numbers. In the calculation of the cosine similarity, the final value returned should be a real number. However, my output is including imaginary parts: <code>1.0*(-1.53283653303955 + 6.08703605256546e-17*I)/(sqrt(5.69974497311137 + 5.55111512312578e-17*I)*sqrt(14.2393958011541 - 3.46944695195361e-18*I))</code></p>\n\n<p>The imaginary portions should be zero (which they effectively are), but I can't get sympy to set the imaginary portions to zero so that I can get a real value as my output.</p>\n\n<p>I've included the code that leads to the output. It's as pared down as I can accomplish.</p>\n\n<pre><code># import statements\nfrom sympy import *\nfrom numpy import dot,array,random\n\n# sympy initialization\na, b, c, d, e, f, g, h, i, j, k, l = symbols('a b c d e f g h i j k l')\n\n# vector initialization\nalpha = [a, b, c, d];\nbeta = [e, f, g, h];\ngamma = [i, j, k, l];\n\n# discrete fourier initialization (dft/idft)\nW = [[1, 1, 1, 1], [1, -1j, -1, 1j], [1, -1, 1, -1], [1, 1j, -1, -1j]];\nWH = [[1, 1, 1, 1], [1, 1j, -1, -1j], [1, -1, 1, -1], [1, -1j, -1, 1j]];\n\n# i/fft initialization, cosine similarity\ndef fft(a):\n    return dot(a,W)\ndef ifft(a):\n    return dot(a,WH)/4.0\ndef cosineSimilarity(a,b):\n    return dot(a,b)/(sqrt(dot(a,a)) * sqrt(dot(b,b)))\n\n# x&amp;y initialization\nx = ifft(fft(alpha)*fft(beta)) + ifft(fft(alpha)*fft(gamma));\ny = ifft(fft(alpha)*fft(beta)/fft(gamma)) +             \nifft(fft(alpha)*fft(gamma)/fft(beta));\n\n# determine cosine similarity between x&amp;y\nrandom.seed(39843)\ncurrent = random.rand(12)\nmymap = list(zip(params,current))\nprint(simplify(diff(cosineSimilarity(x, y), a).subs(mymap)))\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "indexing", "python-internals"], "answers": [{"comments": [{"owner": {"reputation": 259, "user_id": 5139838, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/96f00ca85039048b7ba6bcaf44b85979?s=128&d=identicon&r=PG&f=1", "display_name": "masiewpao", "link": "https://stackoverflow.com/users/5139838/masiewpao"}, "edited": false, "score": 1, "creation_date": 1542880236, "post_id": 53422893, "comment_id": 93730319, "body": "Hi thanks for the response! I had a look at the docs for getitem but I am not sure I understand it. If it equates to using self[key] for an object, isn&#39;t there still the problem of knowing the value in a virtual sequence (since it&#39;s not stored in memory)?"}], "tags": [], "owner": {"reputation": 1, "user_id": 10688131, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dNPjDSaifgo/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jP6Gehag0shh9G6kgX_xl26IOo-g/mo/photo.jpg?sz=128", "display_name": "ealfie", "link": "https://stackoverflow.com/users/10688131/ealfie"}, "is_accepted": false, "score": -1, "last_activity_date": 1542852061, "creation_date": 1542852061, "answer_id": 53422893, "question_id": 53421479, "link": "https://stackoverflow.com/questions/53421479/is-the-iteration-protocol-used-when-indexing-a-range-object/53422893#53422893", "title": "Is the iteration protocol used when indexing a range object?", "body": "<p>Nope. It is not.</p>\n\n<p>However <code>range</code> supports both iteration protocol and indexing (through <strong>getitem</strong>)</p>\n"}, {"comments": [{"owner": {"reputation": 30761, "user_id": 779200, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b39b49e078967924f816af14a536994?s=128&d=identicon&r=PG", "display_name": "lvc", "link": "https://stackoverflow.com/users/779200/lvc"}, "edited": false, "score": 0, "creation_date": 1542887006, "post_id": 53429983, "comment_id": 93734382, "body": "In addition to these C-level functions, it might be worth mentioning the Python-level <code>__getitem__</code> and <code>__len__</code>, as well as the sequence protocol."}], "tags": [], "owner": {"reputation": 130643, "user_id": 3923281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNpoa.jpg?s=128&g=1", "display_name": "Alex Riley", "link": "https://stackoverflow.com/users/3923281/alex-riley"}, "is_accepted": true, "score": 5, "last_activity_date": 1542886605, "last_edit_date": 1542886605, "creation_date": 1542886167, "answer_id": 53429983, "question_id": 53421479, "link": "https://stackoverflow.com/questions/53421479/is-the-iteration-protocol-used-when-indexing-a-range-object/53429983#53429983", "title": "Is the iteration protocol used when indexing a range object?", "body": "<p>No iterator is created here, and no iteration occurs. The <code>range</code> object is implemented such that Python computes the value of <code>R[5]</code> on-demand in constant time.<sup>1</sup></p>\n\n<p>If the index <code>i</code> is not negative, the computation boils down to:</p>\n\n<pre><code>i * step + start\n</code></pre>\n\n<p>So in the case of your code <code>R[5]</code>, this would be <code>5*1 + 1</code> which is 6.</p>\n\n<p>If the index <code>i</code> is negative, the length of <code>R</code> is added to <code>i</code> first, and then the value is computed as before:</p>\n\n<pre><code>(i + len(R)) * step + start\n</code></pre>\n\n<hr>\n\n<h3>Python-internals</h3>\n\n<p>When you write <code>R[5]</code>, this Python syntax is eventually translated into a call to <a href=\"https://github.com/python/cpython/blob/master/Objects/abstract.c#L142-L185\" rel=\"noreferrer\"><code>PyObject_GetItem</code></a>, which inspects the object <code>R</code> to see how it should proceed to find the item at index 5.</p>\n\n<p><code>PyObject_GetItem</code> first checks the <a href=\"https://github.com/python/cpython/blob/master/Objects/rangeobject.c#L679\" rel=\"noreferrer\"><code>tp_as_mapping</code> slot</a> of the <code>range</code> type. This is not null; it holds a reference to a struct called <code>range_as_mapping</code>. <code>PyObject_GetItem</code> then checks to see what is in the <a href=\"https://github.com/python/cpython/blob/master/Objects/rangeobject.c#L622-L626\" rel=\"noreferrer\"><code>mp_subscript</code> field</a> of this struct:</p>\n\n<pre class=\"lang-C prettyprint-override\"><code>static PyMappingMethods range_as_mapping = {\n        (lenfunc)range_length,       /* mp_length */\n        (binaryfunc)range_subscript, /* mp_subscript */\n        (objobjargproc)0,            /* mp_ass_subscript */\n};\n</code></pre>\n\n<p>As you can see in the snippet above, it finds the <a href=\"https://github.com/python/cpython/blob/master/Objects/rangeobject.c#L600-L619\" rel=\"noreferrer\"><code>range_subscript</code></a> function occupying the <code>mp_subscript</code> field.<sup>2</sup></p>\n\n<p>Now <code>range_subscript</code> inspects the arguments it was passed (<code>R</code> and <code>5</code>) to decide if a single index or a slice was requested. The integer <code>5</code> means that just a single index is needed and so the function delegates the computation of the value to <a href=\"https://github.com/python/cpython/blob/master/Objects/rangeobject.c#L233-L283\" rel=\"noreferrer\"><code>compute_range_item</code></a>. This function performs the computation to return the integer 6 as outlined in the first part of this answer.</p>\n\n<hr>\n\n<p><sup>1</sup> I have assumed you are using CPython: other Python implementations may implement the <code>range</code> object differently.</p>\n\n<p><sup>2</sup> If you were to call <code>len(R)</code>, you can see the internal function in <code>mp_length</code> that is called to compute the length of <code>R</code> (cf. <a href=\"https://stackoverflow.com/q/30081275/3923281\">Why is &quot;1000000000000000 in range(1000000000000001)&quot; so fast in Python 3?</a>).</p>\n"}], "owner": {"reputation": 259, "user_id": 5139838, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/96f00ca85039048b7ba6bcaf44b85979?s=128&d=identicon&r=PG&f=1", "display_name": "masiewpao", "link": "https://stackoverflow.com/users/5139838/masiewpao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 53429983, "answer_count": 2, "score": 5, "last_activity_date": 1542886605, "creation_date": 1542840305, "last_edit_date": 1542886231, "question_id": 53421479, "link": "https://stackoverflow.com/questions/53421479/is-the-iteration-protocol-used-when-indexing-a-range-object", "title": "Is the iteration protocol used when indexing a range object?", "body": "<p>Since the range object produces values on demand, does it mean that anytime a range is indexed, the iteration protocol is invoked up to that index? </p>\n\n<p>What I mean is when:</p>\n\n<pre><code>&gt;&gt;&gt; R = range(1,11)\n&gt;&gt;&gt; print(R[5])\n6\n</code></pre>\n\n<p>Since <code>R[5]</code> isn't stored in memory, is it calculated every time by creating a new iterator? If not, how is it possible to index a range object?</p>\n"}, {"tags": ["python", "importerror"], "comments": [{"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1542840306, "post_id": 53421456, "comment_id": 93717354, "body": "Usually a Python extension DLL must be compiled for a specific Python version. If it is imported by the wrong version, it fails."}, {"owner": {"reputation": 1002, "user_id": 10638608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dabljues", "link": "https://stackoverflow.com/users/10638608/dabljues"}, "edited": false, "score": 0, "creation_date": 1542840315, "post_id": 53421456, "comment_id": 93717359, "body": "It kinda complains about the line <code>from mpi4py import MPI</code>. Do you have this module installed?"}, {"owner": {"reputation": 31, "user_id": 10672567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5af019fbd79d12926c831780d41f29e?s=128&d=identicon&r=PG&f=1", "display_name": "David N", "link": "https://stackoverflow.com/users/10672567/david-n"}, "edited": false, "score": 0, "creation_date": 1542840516, "post_id": 53421456, "comment_id": 93717419, "body": "Yeah, I have mpi4py installed."}], "owner": {"reputation": 31, "user_id": 10672567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5af019fbd79d12926c831780d41f29e?s=128&d=identicon&r=PG&f=1", "display_name": "David N", "link": "https://stackoverflow.com/users/10672567/david-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "closed_date": 1542840930, "answer_count": 0, "score": 0, "last_activity_date": 1542840193, "creation_date": 1542840193, "question_id": 53421456, "link": "https://stackoverflow.com/questions/53421456/importerror-when-trying-to-call-a-command", "closed_reason": "Duplicate", "title": "ImportError when trying to call a command", "body": "<p>I recently got a pip package called openbte (<a href=\"https://pypi.org/project/openbte/\" rel=\"nofollow noreferrer\">https://pypi.org/project/openbte/</a>) to install on PyCharm after a lot of troubleshooting. However, when I try to run a command it gives me this error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Users\\turtl\\PycharmProjects\\untitled\\venv\\Scripts\\openbte-script.py\", line 11, in &lt;module&gt;\n    load_entry_point('openbte==0.9.24', 'console_scripts', 'openbte')()\n  File \"c:\\users\\turtl\\pycharmprojects\\untitled\\venv\\lib\\site-packages\\pkg_resources\\__init__.py\", line 487, in load_entry_point\n    return get_distribution(dist).load_entry_point(group, name)\n  File \"c:\\users\\turtl\\pycharmprojects\\untitled\\venv\\lib\\site-packages\\pkg_resources\\__init__.py\", line 2728, in load_entry_point\n    return ep.load()\n  File \"c:\\users\\turtl\\pycharmprojects\\untitled\\venv\\lib\\site-packages\\pkg_resources\\__init__.py\", line 2346, in load\n    return self.resolve()\n  File \"c:\\users\\turtl\\pycharmprojects\\untitled\\venv\\lib\\site-packages\\pkg_resources\\__init__.py\", line 2352, in resolve\n    module = __import__(self.module_name, fromlist=['__name__'], level=0)\n  File \"c:\\users\\turtl\\pycharmprojects\\untitled\\venv\\lib\\site-packages\\openbte\\__main__.py\", line 3, in &lt;module&gt;\n    from .material import *\n  File \"c:\\users\\turtl\\pycharmprojects\\untitled\\venv\\lib\\site-packages\\openbte\\material.py\", line 5, in &lt;module&gt;\n    from mpi4py import MPI\nImportError: DLL load failed: The specified module could not be found.\n</code></pre>\n\n<p>with the emphasis being on the last line </p>\n\n<p><strong>ImportError: DLL load failed: The specified module could not be found.</strong></p>\n\n<p>Does anyone have any idea what's going wrong? I've looked up a few similar problems and some solutions involve setting environment variables or something of the sort (which I'm trying at the moment). Furthermore, openbte says its programming languages are Python 2.7 and Python 3.6. However, I'm using Python 3.7. Could that be an issue?</p>\n"}, {"tags": ["python", "for-loop", "range"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 2, "creation_date": 1542840122, "post_id": 53421435, "comment_id": 93717303, "body": "Do you get the same result when running each line? If not, there is your difference."}], "answers": [{"tags": [], "owner": {"reputation": 4489, "user_id": 4988601, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-2YhcNqeVrvY/AAAAAAAAAAI/AAAAAAAABLk/lCLdUAPL3Fk/photo.jpg?sz=128", "display_name": "kabdulla", "link": "https://stackoverflow.com/users/4988601/kabdulla"}, "is_accepted": false, "score": 0, "last_activity_date": 1542840209, "creation_date": 1542840209, "answer_id": 53421459, "question_id": 53421435, "link": "https://stackoverflow.com/questions/53421435/whats-the-difference-between-using-range-and-using-a-for-loop/53421459#53421459", "title": "What&#39;s the difference between using range() and using a for loop?", "body": "<p>With the first one you'll have access to local variable color within loop. It's also considered more pythonic.</p>\n\n<p>With the second one you'll have access to the index instead which might be useful.</p>\n\n<p>I'm not aware of performance difference but someone might be. </p>\n"}, {"comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1542840303, "post_id": 53421466, "comment_id": 93717351, "body": "And you can get both with <code>for index, color in enumerate(colors)</code>"}], "tags": [], "owner": {"reputation": 1543, "user_id": 4844311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332eea05adde1e0fd9e1ece954f61b41?s=128&d=identicon&r=PG&f=1", "display_name": "berkelem", "link": "https://stackoverflow.com/users/4844311/berkelem"}, "is_accepted": true, "score": 5, "last_activity_date": 1542840331, "last_edit_date": 1542840331, "creation_date": 1542840229, "answer_id": 53421466, "question_id": 53421435, "link": "https://stackoverflow.com/questions/53421435/whats-the-difference-between-using-range-and-using-a-for-loop/53421466#53421466", "title": "What&#39;s the difference between using range() and using a for loop?", "body": "<p>When you say <code>for color in colors:</code> you are iterating over the items in the list.</p>\n\n<pre><code>for color in colors:\n    print(color)\n\n&gt;&gt;&gt; \"blue\"\n&gt;&gt;&gt; \"brown\"\n&gt;&gt;&gt; \"red\"\n&gt;&gt;&gt; \"yellow\"\n&gt;&gt;&gt; \"green\"\n</code></pre>\n\n<p>If you iterate over indices you get:</p>\n\n<pre><code>for index in range(len(colors)):\n    print(index)\n\n&gt;&gt;&gt; 0\n&gt;&gt;&gt; 1\n&gt;&gt;&gt; 2\n&gt;&gt;&gt; 3\n&gt;&gt;&gt; 4\n</code></pre>\n\n<p>You can get the two version together by using <code>enumerate</code>:</p>\n\n<pre><code>for c, color in enumerate(colors):\n    print(c, color)\n\n&gt;&gt;&gt; 0 \"blue\"\n&gt;&gt;&gt; 1 \"brown\"\n&gt;&gt;&gt; 2 \"red\"\n&gt;&gt;&gt; 3 \"yellow\"\n&gt;&gt;&gt; 4 \"green\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 8170553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41e1e91596831d679e26f35a30278e6d?s=128&d=identicon&r=PG&f=1", "display_name": "teeying", "link": "https://stackoverflow.com/users/8170553/teeying"}, "is_accepted": false, "score": 0, "last_activity_date": 1586885970, "creation_date": 1586885970, "answer_id": 61213848, "question_id": 53421435, "link": "https://stackoverflow.com/questions/53421435/whats-the-difference-between-using-range-and-using-a-for-loop/61213848#61213848", "title": "What&#39;s the difference between using range() and using a for loop?", "body": "<p>Let's say you want to change each string in the list to uppercase. If you use the first method, each item in the list is basically copied to the temporary variable <code>color</code>. You can change <code>color</code> if you like, but that doesn't change the list itself.</p>\n\n<pre><code>for color in colors:\n    color = color.upper()\nprint(colors)\n&gt;&gt;&gt;['blue', 'brown', 'red', 'yellow', 'green']\n</code></pre>\n\n<p>When you call <code>range</code> and <code>len</code>, you can change the items in the list, since you have their index. </p>\n\n<pre><code>for index in range(len(colors)):\n    colors[index] = colors[index].upper()\nprint(colors)\n&gt;&gt;&gt;['BLUE', 'BROWN', 'RED', 'YELLOW', 'GREEN']\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10507824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4AEnJ.jpg?s=128&g=1", "display_name": "gabriel-pimentel", "link": "https://stackoverflow.com/users/10507824/gabriel-pimentel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 0, "accepted_answer_id": 53421466, "answer_count": 3, "score": -4, "last_activity_date": 1613796821, "creation_date": 1542840063, "last_edit_date": 1613796821, "question_id": 53421435, "link": "https://stackoverflow.com/questions/53421435/whats-the-difference-between-using-range-and-using-a-for-loop", "title": "What&#39;s the difference between using range() and using a for loop?", "body": "<p>Given an list of colors:</p>\n<pre><code>colors = [&quot;blue&quot;,&quot;brown&quot;,&quot;red&quot;,&quot;yellow&quot;,&quot;green&quot;]\n</code></pre>\n<p><strong>1.</strong></p>\n<pre><code>for color in colors:\n \n</code></pre>\n<p><strong>2.</strong></p>\n<pre><code>for index in range(len(colors)):\n</code></pre>\n<p>what is the difference between using <strong>1</strong> and <strong>2</strong> ?</p>\n"}, {"tags": ["python", "csv", "file-io", "export-to-csv", "opencsv"], "answers": [{"comments": [{"owner": {"reputation": 476, "user_id": 10582772, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ENTbrqNYPZU/AAAAAAAAAAI/AAAAAAAAA0s/q24T2r8SfHY/photo.jpg?sz=128", "display_name": "Chipmunkafy", "link": "https://stackoverflow.com/users/10582772/chipmunkafy"}, "edited": false, "score": 1, "creation_date": 1542840604, "post_id": 53421501, "comment_id": 93717438, "body": "Smart. Thank you!"}, {"owner": {"reputation": 1002, "user_id": 10638608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dabljues", "link": "https://stackoverflow.com/users/10638608/dabljues"}, "reply_to_user": {"reputation": 476, "user_id": 10582772, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ENTbrqNYPZU/AAAAAAAAAAI/AAAAAAAAA0s/q24T2r8SfHY/photo.jpg?sz=128", "display_name": "Chipmunkafy", "link": "https://stackoverflow.com/users/10582772/chipmunkafy"}, "edited": false, "score": 1, "creation_date": 1542840712, "post_id": 53421501, "comment_id": 93717472, "body": "No problem. If that&#39;s all, you can accept my answer :)"}], "tags": [], "owner": {"reputation": 1002, "user_id": 10638608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dabljues", "link": "https://stackoverflow.com/users/10638608/dabljues"}, "is_accepted": true, "score": 2, "last_activity_date": 1542840660, "last_edit_date": 1542840660, "creation_date": 1542840457, "answer_id": 53421501, "question_id": 53421428, "link": "https://stackoverflow.com/questions/53421428/list-array-as-one-cell-when-using-writerow/53421501#53421501", "title": "List array as one cell when using .writerow()", "body": "<p>The problem is, that you are using a delimiter <code>,</code> but also trying to put that <code>,</code> into a cell. That's not gonna work. You can try using:</p>\n\n<pre><code>with open('eggs.csv', 'w', newline='') as csvfile:\n    spamwriter = csv.writer(csvfile, delimiter=';',\n                            quotechar='|', quoting=csv.QUOTE_MINIMAL)\n</code></pre>\n\n<p>And then change your OS regional settings, so your Office app would recognize <code>;</code> as a delimiter in spreadsheets. Otherwise, you have to get rid of <code>,</code> in a cell</p>\n\n<p>Also, at least for me, it throws an error, cuz you didn't escape <code>'</code> symbol properly when defining your list. I had to change it to:</p>\n\n<p><code>spamwriter.writerow(['Spam', 'WOW', \"['HMM', 'WOW']\", 'BYE'])</code></p>\n\n<p>The result of using <code>;</code> as a delimiter:</p>\n\n<p><a href=\"https://i.stack.imgur.com/R6sim.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/R6sim.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 476, "user_id": 10582772, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ENTbrqNYPZU/AAAAAAAAAAI/AAAAAAAAA0s/q24T2r8SfHY/photo.jpg?sz=128", "display_name": "Chipmunkafy", "link": "https://stackoverflow.com/users/10582772/chipmunkafy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 53421501, "answer_count": 1, "score": 0, "last_activity_date": 1542841224, "creation_date": 1542840038, "last_edit_date": 1542840349, "question_id": 53421428, "link": "https://stackoverflow.com/questions/53421428/list-array-as-one-cell-when-using-writerow", "title": "List array as one cell when using .writerow()", "body": "<p>Write to CSV:</p>\n\n<pre><code>import csv\nwith open('eggs.csv', 'w', newline='') as csvfile:\n    spamwriter = csv.writer(csvfile, delimiter=',',\n                            quotechar='|', quoting=csv.QUOTE_MINIMAL)\n    spamwriter.writerow(['Spam', 'WOW', '['HMM', 'WOW']', 'BYE'])\n    spamwriter.writerow(['Cool', 'Nice'])\n</code></pre>\n\n<p>Excel Output Unexpected:\n<a href=\"https://i.stack.imgur.com/qwXzV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qwXzV.png\" alt=\"\"></a></p>\n\n<p>Expected Excel Output:\n<a href=\"https://i.stack.imgur.com/y8IW7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/y8IW7.png\" alt=\"enter image description here\"></a></p>\n\n<p>How would I keep <code>['HMM', 'WOW']</code> all in cell C?</p>\n"}, {"tags": ["python", "azure-sdk", "azure-sdk-python"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1542843850, "post_id": 53421413, "comment_id": 93718468, "body": "You need to ask a specific question about code you&#39;ve written, not a broad, vague question like this."}], "answers": [{"tags": [], "owner": {"reputation": 3035, "user_id": 4074838, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8gS08_lyG7s/AAAAAAAAAAI/AAAAAAAAHqA/rU0O1y51fto/photo.jpg?sz=128", "display_name": "Laurent Mazuel", "link": "https://stackoverflow.com/users/4074838/laurent-mazuel"}, "is_accepted": false, "score": 0, "last_activity_date": 1543255217, "creation_date": 1543255217, "answer_id": 53486640, "question_id": 53421413, "link": "https://stackoverflow.com/questions/53421413/gathering-information-about-vms-in-a-resource-group/53486640#53486640", "title": "Gathering information about vm&#39;s in a resource group", "body": "<p>I think this is your friend:\n<a href=\"https://docs.microsoft.com/en-us/python/azure/\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/python/azure/</a></p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/python/api/overview/azure/virtualmachines?view=azure-python\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/python/api/overview/azure/virtualmachines?view=azure-python</a></p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/python/api/azure-mgmt-compute/azure.mgmt.compute.computemanagementclient?view=azure-python\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/python/api/azure-mgmt-compute/azure.mgmt.compute.computemanagementclient?view=azure-python</a></p>\n\n<p>There is also an official sample page: <a href=\"https://github.com/Azure-Samples/virtual-machines-python-manage/\" rel=\"nofollow noreferrer\">https://github.com/Azure-Samples/virtual-machines-python-manage/</a></p>\n\n<p>Hope this helps,</p>\n"}], "owner": {"reputation": 99, "user_id": 10688242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc9dbdd92dd383cdbe92f39cb59a884a?s=128&d=identicon&r=PG&f=1", "display_name": "crypticgamer", "link": "https://stackoverflow.com/users/10688242/crypticgamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1543255217, "creation_date": 1542839900, "last_edit_date": 1542847113, "question_id": 53421413, "link": "https://stackoverflow.com/questions/53421413/gathering-information-about-vms-in-a-resource-group", "title": "Gathering information about vm&#39;s in a resource group", "body": "<p>Would someone be able to share or point to some sample code which basically extracts the information in the following link (<a href=\"https://docs.microsoft.com/en-us/rest/api/compute/virtualmachinesizes/list\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/rest/api/compute/virtualmachinesizes/list</a>) from each vm in a resource group? Thanks!</p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 689, "user_id": 6770307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xtG9W.jpg?s=128&g=1", "display_name": "bison", "link": "https://stackoverflow.com/users/6770307/bison"}, "edited": false, "score": 0, "creation_date": 1542840019, "post_id": 53421408, "comment_id": 93717274, "body": "&#39;df12=df12.sort_index&#39; you are redefining &#39;df12&#39;, I am not sure what sort_index is though"}, {"owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "edited": false, "score": 1, "creation_date": 1542840088, "post_id": 53421408, "comment_id": 93717297, "body": "<code>sort_index</code> is a method. You mean to reassign to the <i>output</i> of that method I think: <code>df12=df12.sort_index()</code>, or <code>df12.sort_index(inplace=True)</code>"}], "owner": {"reputation": 75, "user_id": 10395806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d406ec0fe497e23e759cb73a05b59f0?s=128&d=identicon&r=PG&f=1", "display_name": "user10395806", "link": "https://stackoverflow.com/users/10395806/user10395806"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "closed_date": 1542850634, "answer_count": 0, "score": 0, "last_activity_date": 1542839872, "creation_date": 1542839872, "question_id": 53421408, "link": "https://stackoverflow.com/questions/53421408/concetanated-dataframe-treated-like-function-pandas", "closed_reason": "Duplicate", "title": "concetanated dataframe treated like function pandas", "body": "<p>I am concatenating several dataframes to one with:</p>\n\n<pre><code>frames= [df3,df5,df4,df6,df7,df8,df9,df10]\ndf11=pd.concat(frames,axis=1)\ndf12= pd.DataFrame (df11)\n#year = ['2000','2001','2002','2003','2004','2005','2006','2007','2008','2009','2010','2011','2012','2013','2014','2015','2016','2017']\n#df12['year']= year\n#df12.year = pd.to_datetime(df12.year)\n#df12.index = df12.year\n#df12=df12.sort_index\ndf12.info()\ndf12.head()\n</code></pre>\n\n<p>which then looks like:</p>\n\n<pre><code>    rel_uncertain   rel_modal_wk    rel_positive    rel_modal_me    rel_modal_st    rel_cnstrain    rel_litigious   rel_negative\n0   0.003264    0.000568    0.007659    0.002442    0.011443    0.002170    0.004246    0.003857\n1   0.006195    0.002193    0.007991    0.002325    0.009876    0.002229    0.007343    0.006189\n2   0.005952    0.000719    0.011846    0.001773    0.009697    0.001392    0.001874    0.003313\n3   0.006306    0.001038    0.008452    0.001925    0.009386    0.001180    0.002856    0.001219\n4   0.005013    0.001374    0.007348    0.001017    0.008259    0.001533    0.003306    0.004437\n</code></pre>\n\n<p>in the next step i want to set a datetime index, but when i remove the # in the code i get the following error:</p>\n\n<pre><code>AttributeError                            Traceback (most recent call last)\n&lt;ipython-input-35-e917aaa1e676&gt; in &lt;module&gt;()\n      7 df12.index = df12.year\n      8 df12=df12.sort_index\n----&gt; 9 df12.info()\n     10 df12.head()\n\nAttributeError: 'function' object has no attribute 'info'\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "edited": false, "score": 0, "creation_date": 1542840479, "post_id": 53421406, "comment_id": 93717405, "body": "What is the output of <code>df2.columns</code>?"}, {"owner": {"reputation": 477, "user_id": 6331008, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/T39oH.gif?s=128&g=1", "display_name": "PAstudilloE", "link": "https://stackoverflow.com/users/6331008/pastudilloe"}, "reply_to_user": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "edited": false, "score": 0, "creation_date": 1542840867, "post_id": 53421406, "comment_id": 93717526, "body": "as an output I need to know: how many unique &#39;id_sup&#39; and the sum of &#39;total_t&#39; of every item of cl_city, cl_ind and same_city. Basically a table with columns:  cl_city | cl_ind | same_city | count of unique id_sup | sum of total_T"}, {"owner": {"reputation": 1678, "user_id": 6750211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmOvh.gif?s=128&g=1", "display_name": "Kevin Fang", "link": "https://stackoverflow.com/users/6750211/kevin-fang"}, "edited": false, "score": 0, "creation_date": 1542841084, "post_id": 53421406, "comment_id": 93717586, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/43298192/valueerror-grouper-for-something-not-1-dimensional\" title=\"valueerror grouper for something not 1 dimensional\">stackoverflow.com/questions/43298192/&hellip;</a>"}, {"owner": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "edited": false, "score": 0, "creation_date": 1542841088, "post_id": 53421406, "comment_id": 93717588, "body": "I mean, could you please post the exact text output when you run <code>df2.columns</code>"}, {"owner": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "edited": false, "score": 0, "creation_date": 1542841182, "post_id": 53421406, "comment_id": 93717621, "body": "@PAstudilloE, we just need to see the full list of column names in your actual DataFrame. The most likely source of this error message is if you have multiple columns with the same name."}, {"owner": {"reputation": 477, "user_id": 6331008, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/T39oH.gif?s=128&g=1", "display_name": "PAstudilloE", "link": "https://stackoverflow.com/users/6331008/pastudilloe"}, "reply_to_user": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "edited": false, "score": 0, "creation_date": 1542841638, "post_id": 53421406, "comment_id": 93717782, "body": "@PeterLeimbigler no, there&#39;s not multiple columns. It&#39;s exactly as I posted. I solved the issue by converting the df2 to a csv file and then loading it again. How I get to df2 file is by merging and grouping several dataset. Apparently, it&#39;s an issue that python is reading df2 as multi-index, but it&#39;s not multi-index. =("}, {"owner": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "edited": false, "score": 0, "creation_date": 1542841798, "post_id": 53421406, "comment_id": 93717837, "body": "@PAstudilloE, glad to hear you solved the issue. The DataFrame sample that you posted does <i>not</i> have multiple levels in either the columns or index. Did you delete something from above the column names? Again, if you would just paste the exact output of <code>df2.columns</code>, that would reveal the presence of a MultiIndex."}, {"owner": {"reputation": 477, "user_id": 6331008, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/T39oH.gif?s=128&g=1", "display_name": "PAstudilloE", "link": "https://stackoverflow.com/users/6331008/pastudilloe"}, "reply_to_user": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "edited": false, "score": 0, "creation_date": 1542841894, "post_id": 53421406, "comment_id": 93717867, "body": "@PeterLeimbigler this is what it shows me when I run df2.columns: MultiIndex(levels=[[u&#39;cl_city&#39;, u&#39;cl_ind&#39;, u&#39;id_client&#39;, u&#39;id_supr&#39;, u&#39;sup_city&#39;, u&#39;sup_industry&#39;, u&#39;total_t&#39;, u&#39;same_city&#39;]],            labels=[[2, 3, 6, 1, 0, 5, 4, 7]])"}, {"owner": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "edited": false, "score": 1, "creation_date": 1542842472, "post_id": 53421406, "comment_id": 93718051, "body": "@PAstudilloE, thanks! This does reveal the immediate cause of the error: for some terrible reason, the columns of <code>df2</code> are a highly nested MultiIndex, where instead of each string being a <i>label</i>, each string is actually the name of a separate *index level*(!) The fix for this comes from <a href=\"https://stackoverflow.com/q/14507794\">stackoverflow.com/q/14507794</a>, and is this: <code>df.columns = [&#39; &#39;.join(col).strip() for col in df.columns.values]</code>. You mentioned <code>df2</code> is the result of many merges; I suspect those merges are not written optimally, leading to this pathological MultiIndex situation."}, {"owner": {"reputation": 477, "user_id": 6331008, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/T39oH.gif?s=128&g=1", "display_name": "PAstudilloE", "link": "https://stackoverflow.com/users/6331008/pastudilloe"}, "reply_to_user": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "edited": false, "score": 1, "creation_date": 1542842782, "post_id": 53421406, "comment_id": 93718153, "body": "Thanks @PeterLeimbigler!! That&#39;s exactly what happened. I solved the issue as you recommended."}], "answers": [{"comments": [{"owner": {"reputation": 929, "user_id": 6814713, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9e8cf4703e0f253517a907c178d53d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Brendan", "link": "https://stackoverflow.com/users/6814713/brendan"}, "edited": false, "score": 0, "creation_date": 1595365281, "post_id": 53421724, "comment_id": 111448301, "body": "I also get this issue with merging several DFs of identical schema, and it seems to depend on either the number of rows or the number of DFs. e.g. <code>df.append([df_pt2, df_pt3, df_pt4, df_pt5, df_pt6], ignore_index=True)</code> works fine, but <code>df.append([df_pt2, df_pt3, df_pt4, df_pt5, df_pt6, df_pt7], ignore_index=True)</code> fails."}], "tags": [], "owner": {"reputation": 477, "user_id": 6331008, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/T39oH.gif?s=128&g=1", "display_name": "PAstudilloE", "link": "https://stackoverflow.com/users/6331008/pastudilloe"}, "is_accepted": false, "score": 0, "last_activity_date": 1542841799, "creation_date": 1542841799, "answer_id": 53421724, "question_id": 53421406, "link": "https://stackoverflow.com/questions/53421406/pandas-issues-with-groupby-error-valueerror-grouper-for-something-not-1-d/53421724#53421724", "title": "Pandas: issues with groupby. Error: &#39;ValueError: Grouper for &lt;something&gt; not 1-dimensional&#39;", "body": "<p>I don't know why python is showing me that error, df2 is the result of merging several previous datasets and it does not have any duplicate columns. </p>\n\n<p>I solve this issue in a silly way but it worked. I converted df2 to a CSV file and then I load it again. After that, everything is working fine. [But I can't figure out, why python is showing that error]. Hope it helps. </p>\n"}], "owner": {"reputation": 477, "user_id": 6331008, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/T39oH.gif?s=128&g=1", "display_name": "PAstudilloE", "link": "https://stackoverflow.com/users/6331008/pastudilloe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4505, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1561721745, "creation_date": 1542839863, "last_edit_date": 1542841407, "question_id": 53421406, "link": "https://stackoverflow.com/questions/53421406/pandas-issues-with-groupby-error-valueerror-grouper-for-something-not-1-d", "title": "Pandas: issues with groupby. Error: &#39;ValueError: Grouper for &lt;something&gt; not 1-dimensional&#39;", "body": "<p>I've been looking for this error here, but I only found this solution <a href=\"https://stackoverflow.com/questions/43298192/valueerror-grouper-for-something-not-1-dimensional\">1</a> (which doesn't work in my case). Does anybody can guide me on how to solve it?. </p>\n\n<p>My dataset (df2) looks like this: </p>\n\n<pre><code>      id_cl  id_sup total_t cl_ind  cl_city  sup_ind  sup_city  same_city\n0   1000135 1797029  414.85  I5610  11308.0    G4711   10901.0   no\n1   1000135 1798069  19.76   I5610  11308.0    G4719   10901.0   no\n2   1000135 1923186  302.73  I5610  11308.0    G4630   10901.0   no\n3   1000135 2502927  1262.86 I5610  11308.0    G4630   11308.0   yes\n4   1000135 2504288  155.04  I5610  11308.0    G4711   11308.0   yes\n</code></pre>\n\n<p>I need to group this dataset as follows:</p>\n\n<pre><code>df_sup = df2.groupby(['cl_city','cl_ind','same_city']).agg({'id_sup':'nunique', 'total_t':'sum'})\n</code></pre>\n\n<p>But when performing this, I'm getting this error!:</p>\n\n<pre><code>ValueError: Grouper for 'cl_city' not 1-dimensional\n</code></pre>\n\n<p>As a result I need something like this: </p>\n\n<pre><code>                                 id_sup      total_t\ncl_city     cl_ind  same_city       \n  10701      A0112         no         2    21964.22\n                          yes        31     3530.40\n             A0122         no      2374 23328061.47\n                          yes      1228  2684408.12\n             A0127         no        11    19962.68\n                          yes         7      915.44\n             A0163         no       357   574827.97\n                          yes       140     60385.7\n</code></pre>\n"}, {"tags": ["python", "node.js", "django"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1542839819, "post_id": 53421369, "comment_id": 93717210, "body": "Your <code>except</code> block is throwing away the error message, which probably contains useful information.  Try this instead: <code>except Exception as ex:</code>, and then <code>print(&quot;error saving game: %s&quot; % ex)</code>"}, {"owner": {"reputation": 99, "user_id": 9905618, "user_type": "registered", "profile_image": "https://graph.facebook.com/646524305692767/picture?type=large", "display_name": "Tran Quoc Gia Cat", "link": "https://stackoverflow.com/users/9905618/tran-quoc-gia-cat"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1542840221, "post_id": 53421369, "comment_id": 93717329, "body": "@JohnGordon, that notice: <code>[21&#47;Nov&#47;2018 23:40:59] &quot;GET &#47; HTTP&#47;1.1&quot; 200 1127 [21&#47;Nov&#47;2018 23:41:07] &quot;GET &#47;accounts&#47;login&#47;?next=&#47; HTTP&#47;1.1&quot; 200 446 [21&#47;Nov&#47;2018 23:41:10] &quot;POST &#47;accounts&#47;login&#47;?next=&#47; HTTP&#47;1.1&quot; 302 0 [21&#47;Nov&#47;2018 23:41:10] &quot;GET &#47; HTTP&#47;1.1&quot; 200 1127 error saving game: &#39;gameId&#39; [21&#47;Nov&#47;2018 23:41:15] &quot;POST &#47;save_game&#47; HTTP&#47;1.1&quot; 200 7</code> but nodejs notice success <code>the message was posted successfully</code>"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1542840633, "post_id": 53421369, "comment_id": 93717448, "body": "That error message seems to say that <code>msg_obj</code> does not contain a <code>gameId</code>.  Try printing <code>msg_obj</code> before the <code>Game.object.create()</code> call."}, {"owner": {"reputation": 99, "user_id": 9905618, "user_type": "registered", "profile_image": "https://graph.facebook.com/646524305692767/picture?type=large", "display_name": "Tran Quoc Gia Cat", "link": "https://stackoverflow.com/users/9905618/tran-quoc-gia-cat"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1542841039, "post_id": 53421369, "comment_id": 93717575, "body": "@JohnGordon, gameId not here <code>{&#39;player1&#39;: &#39;han&#39;, &#39;player2&#39;: &#39;cat&#39;, &#39;winner&#39;: &#39;han&#39;, &#39;history&#39;: &#39;[object History]&#39;, &#39;note&#39;: &#39;cat&#39;} error saving game: &#39;gameId&#39;</code> and history not to convert to string"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1542842361, "post_id": 53421369, "comment_id": 93718012, "body": "Okay then, the error is obvious -- your caller is not supplying a <code>gameId</code> argument.  How you handle that error is up to you."}, {"owner": {"reputation": 99, "user_id": 9905618, "user_type": "registered", "profile_image": "https://graph.facebook.com/646524305692767/picture?type=large", "display_name": "Tran Quoc Gia Cat", "link": "https://stackoverflow.com/users/9905618/tran-quoc-gia-cat"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1542842620, "post_id": 53421369, "comment_id": 93718105, "body": "I see my error because gameId is not same score. How to change value gameId from \u2018Socket.on(joingame)\u2019 go to gobal?"}], "owner": {"reputation": 99, "user_id": 9905618, "user_type": "registered", "profile_image": "https://graph.facebook.com/646524305692767/picture?type=large", "display_name": "Tran Quoc Gia Cat", "link": "https://stackoverflow.com/users/9905618/tran-quoc-gia-cat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542841215, "creation_date": 1542839578, "last_edit_date": 1542841215, "question_id": 53421369, "link": "https://stackoverflow.com/questions/53421369/error-to-save-history-chess-into-db-sqlite-django", "title": "error to save history chess into db sqlite django", "body": "<p>I use django 2.1 and combine its with nodejs.\nthe game is ok but when game end, I want to save history into db of django. But it's not run. I'm not sure where is issue\nstatic\\main.js</p>\n\n<pre><code>winner = checkLogout !==  username ? username : checkLogout;\nhistory= game.history();\nsocket.emit('endgame', {'gameId':gameId,'player1':player1, 'player2':player2, 'winner': winner, 'history': history.toString(), note : checkLogout });\n</code></pre>\n\n<p>nodejs\\index.js</p>\n\n<pre><code>var http = require('http').createServer().listen(4000);\nvar io = require('socket.io')(http);\nvar XMLHttpRequest = require('xmlhttprequest').XMLHttpRequest;\nvar xhttp = new XMLHttpRequest();\nvar host = 'localhost';\nvar port = '8000';\nio.on('connection', function (socket) {\nsocket.on('endgame', function(msg){\n        var url = 'http://' + host +':' + port + '/save_game/';\n        xhttp.onreadystatechange = function() {\n            if(this.readyState === 4 &amp;&amp; this.status === 200) {\n                if(xhttp.responseText === \"error\")\n                    console.log(\"error saving game\");\n                else if(xhttp.responseText === \"success\")\n                    console.log(\"the message was posted successfully\");\n            }\n        };\n        xhttp.open('POST', url, true);\n        xhttp.send(JSON.stringify(msg));\n    });\n});\n</code></pre>\n\n<p>game\\views.py</p>\n\n<pre><code>import json\nfrom django.shortcuts import render\nfrom django.contrib.auth.decorators import login_required\nfrom game.models import Game\nfrom django.http import HttpResponse, HttpResponseRedirect\nfrom django.views.decorators.csrf import csrf_exempt\n@login_required\ndef index(request):\n    return render(request, 'index.html')\n@csrf_exempt\ndef save_game(request):\n    if request.method == 'POST':\n        msg_obj = json.loads(request.body.decode('utf-8'))\n        try:\n            msg = Game.objects.create(gameId=msg_obj['gameId'], player1=msg_obj['player1'], player2=msg_obj['player2'], winner = msg_obj['winner'], history = msg_obj['history'])\n            msg.save()\n        except:\n            print(\"error saving game\")\n            return HttpResponse(\"error\")\n        return HttpResponse(\"success\")\n    else:\n        return HttpResponseRedirect('/')\n</code></pre>\n\n<p>update code static\\main.js</p>\n\n<pre><code>socket.on('joingame', function (msg) {\n        gameId = msg.game.gameId;\n        player1 = username;\n        player2 = oppDict;});\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "keras", "image-preprocessing"], "comments": [{"owner": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "edited": false, "score": 0, "creation_date": 1543247799, "post_id": 53421305, "comment_id": 93839217, "body": "If the answer resolved your issue, kindly <i>accept</i> it by clicking on the checkmark next to the answer to mark it as &quot;answered&quot; - see <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "is_accepted": true, "score": 1, "last_activity_date": 1542881444, "creation_date": 1542881444, "answer_id": 53428522, "question_id": 53421305, "link": "https://stackoverflow.com/questions/53421305/custom-preprocessing-function-with-tf-image-rgb-to-grayscale-valueerror-setti/53428522#53428522", "title": "Custom preprocessing_function with tf.image.rgb_to_grayscale - ValueError: setting an array element with a sequence", "body": "<p>Instead, you can use the <code>color_mode</code> argument of <code>flow_from_directory</code> and set it to <code>'grayscale'</code> to convert the images to grayscale. From <a href=\"https://keras.io/preprocessing/image/#flow_from_directory\" rel=\"nofollow noreferrer\">Keras docs</a>:</p>\n\n<blockquote>\n  <p><strong>color_mode</strong>: One of \"grayscale\", \"rbg\", \"rgba\". Default: \"rgb\". Whether the images will be converted to have 1, 3, or 4 channels.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14776907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d9cc36d8e1c20ad890f14f52000b6ce?s=128&d=identicon&r=PG&f=1", "display_name": "Raunak Singh", "link": "https://stackoverflow.com/users/14776907/raunak-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1607304263, "creation_date": 1607304263, "answer_id": 65174928, "question_id": 53421305, "link": "https://stackoverflow.com/questions/53421305/custom-preprocessing-function-with-tf-image-rgb-to-grayscale-valueerror-setti/65174928#65174928", "title": "Custom preprocessing_function with tf.image.rgb_to_grayscale - ValueError: setting an array element with a sequence", "body": "<p>change RGB image to greyscale (example):</p>\n<pre><code>img = image.load_img('/kaggle/input/cassava-leaf-disease-classification/train_images/'+train['image_id'][i], target_size=(28,28,1), color_mode=&quot;grayscale&quot;)\n</code></pre>\n"}], "owner": {"reputation": 3032, "user_id": 6341510, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/28d1da138966966ff82959171f915dd3?s=128&d=identicon&r=PG&f=1", "display_name": "AaronDT", "link": "https://stackoverflow.com/users/6341510/aarondt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 731, "favorite_count": 1, "accepted_answer_id": 53428522, "answer_count": 2, "score": 0, "last_activity_date": 1607304263, "creation_date": 1542839189, "last_edit_date": 1542881757, "question_id": 53421305, "link": "https://stackoverflow.com/questions/53421305/custom-preprocessing-function-with-tf-image-rgb-to-grayscale-valueerror-setti", "title": "Custom preprocessing_function with tf.image.rgb_to_grayscale - ValueError: setting an array element with a sequence", "body": "<p>I am trying to use a custom preprocessing function to convert RGB images to grayscale during training. As such, I try to use <code>tf.image.rbg_to_grayscale</code> for this. My function looks as following:</p>\n\n<pre><code>def prep_data(x):\n    x = tf.image.rgb_to_grayscale(x)\n    return x\n\ndatagen = ImageDataGenerator(preprocessing_function=prep_data,validation_split=0.15)\n</code></pre>\n\n<p>The <code>train_generator</code> is defined using <code>datagen.flow_from_dataframe(...)</code>. Training without this custom function works just fine, however once I use it I get the following error:</p>\n\n<blockquote>\n  <p>ValueError: setting an array element with a sequence.</p>\n</blockquote>\n\n<p>Judging from this answer <a href=\"https://stackoverflow.com/questions/4674473/valueerror-setting-an-array-element-with-a-sequence\">here</a>, I assume I need to change my input to <code>rgb_to_grayscale</code>, but I don't know what's the correct way of passing <code>x</code> to the function. </p>\n\n<p>Any idea on how to solve this?</p>\n"}, {"tags": ["python", "rest", "tensorflow", "keras", "computer-vision"], "comments": [{"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "edited": false, "score": 0, "creation_date": 1542840091, "post_id": 53421233, "comment_id": 93717298, "body": "why do you use tf.Graph()?"}, {"owner": {"reputation": 97, "user_id": 6854425, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-u-We0dK4M44/AAAAAAAAAAI/AAAAAAAAASM/YU-cwnn6YTg/photo.jpg?sz=128", "display_name": "Andr&#233;s Gir&#243;n", "link": "https://stackoverflow.com/users/6854425/andr%c3%a9s-gir%c3%b3n"}, "reply_to_user": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "edited": false, "score": 0, "creation_date": 1542840677, "post_id": 53421233, "comment_id": 93717462, "body": "It was a &quot;Solution&quot; that i found in a GitHub forum, but it didn&#39;t work neither."}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "edited": false, "score": 0, "creation_date": 1542840804, "post_id": 53421233, "comment_id": 93717512, "body": "See my answer, please comment if I would miss something"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 6854425, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-u-We0dK4M44/AAAAAAAAAAI/AAAAAAAAASM/YU-cwnn6YTg/photo.jpg?sz=128", "display_name": "Andr&#233;s Gir&#243;n", "link": "https://stackoverflow.com/users/6854425/andr%c3%a9s-gir%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1542841533, "post_id": 53421554, "comment_id": 93717750, "body": "In the moment it detects a face, totally freezes and throws the same error, i&#39;m using real time video streaming and when it receives the first image with a face in it, crashes."}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "reply_to_user": {"reputation": 97, "user_id": 6854425, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-u-We0dK4M44/AAAAAAAAAAI/AAAAAAAAASM/YU-cwnn6YTg/photo.jpg?sz=128", "display_name": "Andr&#233;s Gir&#243;n", "link": "https://stackoverflow.com/users/6854425/andr%c3%a9s-gir%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1542841947, "post_id": 53421554, "comment_id": 93717887, "body": "@Andr&#233;sGir&#243;n first try to pass a single image to the predict function and see what happens and please reload the kernel to be sure. Simply you can&#39;t get the same error message"}, {"owner": {"reputation": 97, "user_id": 6854425, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-u-We0dK4M44/AAAAAAAAAAI/AAAAAAAAASM/YU-cwnn6YTg/photo.jpg?sz=128", "display_name": "Andr&#233;s Gir&#243;n", "link": "https://stackoverflow.com/users/6854425/andr%c3%a9s-gir%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1542842327, "post_id": 53421554, "comment_id": 93717999, "body": "How do I reload the kernel?"}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "reply_to_user": {"reputation": 97, "user_id": 6854425, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-u-We0dK4M44/AAAAAAAAAAI/AAAAAAAAASM/YU-cwnn6YTg/photo.jpg?sz=128", "display_name": "Andr&#233;s Gir&#243;n", "link": "https://stackoverflow.com/users/6854425/andr%c3%a9s-gir%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1542843548, "post_id": 53421554, "comment_id": 93718380, "body": "@Andr&#233;sGir&#243;n did you restart the wsgi server or did it update your edited app? If yes, just simply try again please and pass one picture to the predict function."}, {"owner": {"reputation": 97, "user_id": 6854425, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-u-We0dK4M44/AAAAAAAAAAI/AAAAAAAAASM/YU-cwnn6YTg/photo.jpg?sz=128", "display_name": "Andr&#233;s Gir&#243;n", "link": "https://stackoverflow.com/users/6854425/andr%c3%a9s-gir%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1542947924, "post_id": 53421554, "comment_id": 93754541, "body": "I tried with a single image re-running the server and stills the same error. :("}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "reply_to_user": {"reputation": 97, "user_id": 6854425, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-u-We0dK4M44/AAAAAAAAAAI/AAAAAAAAASM/YU-cwnn6YTg/photo.jpg?sz=128", "display_name": "Andr&#233;s Gir&#243;n", "link": "https://stackoverflow.com/users/6854425/andr%c3%a9s-gir%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1542980997, "post_id": 53421554, "comment_id": 93768662, "body": "@Andr&#233;sGir&#243;n Ok Andres, I will dive a bit deeper in the object trying to help you."}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "reply_to_user": {"reputation": 97, "user_id": 6854425, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-u-We0dK4M44/AAAAAAAAAAI/AAAAAAAAASM/YU-cwnn6YTg/photo.jpg?sz=128", "display_name": "Andr&#233;s Gir&#243;n", "link": "https://stackoverflow.com/users/6854425/andr%c3%a9s-gir%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1542982053, "post_id": 53421554, "comment_id": 93769118, "body": "@Andr&#233;sGir&#243;n to being able to help on, please, revert your original code into your question and please provide the link to the <code>emotion_model_path</code> and <code>detection_model_path</code> or to the models they represent."}, {"owner": {"reputation": 97, "user_id": 6854425, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-u-We0dK4M44/AAAAAAAAAAI/AAAAAAAAASM/YU-cwnn6YTg/photo.jpg?sz=128", "display_name": "Andr&#233;s Gir&#243;n", "link": "https://stackoverflow.com/users/6854425/andr%c3%a9s-gir%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1543069950, "post_id": 53421554, "comment_id": 93789969, "body": "Hi. these are the links to the <a href=\"https://drive.google.com/open?id=1nv6V2w1cL1jeAdO93iKMNIsl2ZSUcJiy\" rel=\"nofollow noreferrer\">emotion_model_path</a> and the <a href=\"https://drive.google.com/open?id=1i-ao3FcqoNkr3ku3-yihLPgv1e2NyVzT\" rel=\"nofollow noreferrer\">detection_model_path</a> actually is weird when i&#39;m using the <code>detection_model</code> alone, the service works perfectly, but when I&#39;m using the <code>emotion_model</code> and the <code>predict</code> it&#39;s when everything crashes."}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "reply_to_user": {"reputation": 97, "user_id": 6854425, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-u-We0dK4M44/AAAAAAAAAAI/AAAAAAAAASM/YU-cwnn6YTg/photo.jpg?sz=128", "display_name": "Andr&#233;s Gir&#243;n", "link": "https://stackoverflow.com/users/6854425/andr%c3%a9s-gir%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1543104242, "post_id": 53421554, "comment_id": 93798204, "body": "@Andr&#233;sGir&#243;n Ok. Andr&#233;s I will be back soon, hopefully with the solution."}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "reply_to_user": {"reputation": 97, "user_id": 6854425, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-u-We0dK4M44/AAAAAAAAAAI/AAAAAAAAASM/YU-cwnn6YTg/photo.jpg?sz=128", "display_name": "Andr&#233;s Gir&#243;n", "link": "https://stackoverflow.com/users/6854425/andr%c3%a9s-gir%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1543108694, "post_id": 53421554, "comment_id": 93798855, "body": "@Andr&#233;sGir&#243;n I had to download a lot of dependencies to be able to test your code, but anyway success now, see my answer."}, {"owner": {"reputation": 97, "user_id": 6854425, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-u-We0dK4M44/AAAAAAAAAAI/AAAAAAAAASM/YU-cwnn6YTg/photo.jpg?sz=128", "display_name": "Andr&#233;s Gir&#243;n", "link": "https://stackoverflow.com/users/6854425/andr%c3%a9s-gir%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1543188927, "post_id": 53421554, "comment_id": 93816620, "body": "It didn&#39;t work, stills the same error using tensorflow backend, but I changed the backend to Theano to test, it actually worked, but really slow, almost unusable, so I wanna keep trying with Tensorflow. I can give you access to the git repository where the project is"}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "reply_to_user": {"reputation": 97, "user_id": 6854425, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-u-We0dK4M44/AAAAAAAAAAI/AAAAAAAAASM/YU-cwnn6YTg/photo.jpg?sz=128", "display_name": "Andr&#233;s Gir&#243;n", "link": "https://stackoverflow.com/users/6854425/andr%c3%a9s-gir%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1543199814, "post_id": 53421554, "comment_id": 93818570, "body": "@Andr&#233;sGir&#243;n it is strange, as I managed to get the predicted test image with the prediction labels, like &quot;happy&quot; etc.. Well give me the access to your project and I fix the problem over there too foe sure."}, {"owner": {"reputation": 97, "user_id": 6854425, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-u-We0dK4M44/AAAAAAAAAAI/AAAAAAAAASM/YU-cwnn6YTg/photo.jpg?sz=128", "display_name": "Andr&#233;s Gir&#243;n", "link": "https://stackoverflow.com/users/6854425/andr%c3%a9s-gir%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1543582010, "post_id": 53421554, "comment_id": 93981028, "body": "Hi. Have you been able to find any solution?"}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "reply_to_user": {"reputation": 97, "user_id": 6854425, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-u-We0dK4M44/AAAAAAAAAAI/AAAAAAAAASM/YU-cwnn6YTg/photo.jpg?sz=128", "display_name": "Andr&#233;s Gir&#243;n", "link": "https://stackoverflow.com/users/6854425/andr%c3%a9s-gir%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1543582670, "post_id": 53421554, "comment_id": 93981402, "body": "@Andr&#233;sGir&#243;n sry I am too busy these days, but today I will do it."}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "reply_to_user": {"reputation": 97, "user_id": 6854425, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-u-We0dK4M44/AAAAAAAAAAI/AAAAAAAAASM/YU-cwnn6YTg/photo.jpg?sz=128", "display_name": "Andr&#233;s Gir&#243;n", "link": "https://stackoverflow.com/users/6854425/andr%c3%a9s-gir%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1543621634, "post_id": 53421554, "comment_id": 93998596, "body": "@Andr&#233;sGir&#243;n check gitlab"}, {"owner": {"reputation": 97, "user_id": 6854425, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-u-We0dK4M44/AAAAAAAAAAI/AAAAAAAAASM/YU-cwnn6YTg/photo.jpg?sz=128", "display_name": "Andr&#233;s Gir&#243;n", "link": "https://stackoverflow.com/users/6854425/andr%c3%a9s-gir%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1543624499, "post_id": 53421554, "comment_id": 93999122, "body": "I keep getting the same error when I run it as web service"}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "reply_to_user": {"reputation": 97, "user_id": 6854425, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-u-We0dK4M44/AAAAAAAAAAI/AAAAAAAAASM/YU-cwnn6YTg/photo.jpg?sz=128", "display_name": "Andr&#233;s Gir&#243;n", "link": "https://stackoverflow.com/users/6854425/andr%c3%a9s-gir%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1543626334, "post_id": 53421554, "comment_id": 93999418, "body": "@Andr&#233;sGir&#243;n As you see I can&#39;t reproduce the error, as it works fine for me, when I run the code as simple python file. So the error is not from the code itself, but possibly some flask application/tensorflow context problem. Currently I did everything I can&#39;t see how can I reproduce exactly the same environment that causes the error, though if you want me to try help further you have to accurately describe the full environment in which the python app runs and exactly the process of running the code and other part of app and web-server tasks."}, {"owner": {"reputation": 97, "user_id": 6854425, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-u-We0dK4M44/AAAAAAAAAAI/AAAAAAAAASM/YU-cwnn6YTg/photo.jpg?sz=128", "display_name": "Andr&#233;s Gir&#243;n", "link": "https://stackoverflow.com/users/6854425/andr%c3%a9s-gir%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1543697642, "post_id": 53421554, "comment_id": 94014132, "body": "Hi. I&#39;m running it on a Pyton 3.6.6 Environment, to run the code via web service, enter to the <code>&#47;src&#47;webII</code> folder using the terminal and run the command <code>waitress-serve --listen=*:8000 app:app</code>, that&#39;s how i&#39;m getting the error, inside the same folder is the makeup_artist.py file where the CV logic is."}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "reply_to_user": {"reputation": 97, "user_id": 6854425, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-u-We0dK4M44/AAAAAAAAAAI/AAAAAAAAASM/YU-cwnn6YTg/photo.jpg?sz=128", "display_name": "Andr&#233;s Gir&#243;n", "link": "https://stackoverflow.com/users/6854425/andr%c3%a9s-gir%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1543708665, "post_id": 53421554, "comment_id": 94016543, "body": "@Andr&#233;sGir&#243;n check Gitlab pls and replay THERE"}], "tags": [], "owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "is_accepted": false, "score": 1, "last_activity_date": 1543108607, "last_edit_date": 1543108607, "creation_date": 1542840747, "answer_id": 53421554, "question_id": 53421233, "link": "https://stackoverflow.com/questions/53421233/valueerrortensor-s-is-not-an-element-of-this-graph-obj/53421554#53421554", "title": "ValueError(&quot;Tensor %s is not an element of this graph.&quot; % obj)", "body": "<p>I'm just trying to find out your real environment, but I guess you may use <code>Keras</code> amd some <strong>Keras model</strong> to predict emotions.  </p>\n\n<p>Your error message caused because of the line: </p>\n\n<pre><code>K.clear_session()\n</code></pre>\n\n<p>which, from the documentation: <a href=\"http://%20tf.keras.backend.clear_session\" rel=\"nofollow noreferrer\">keras.backend.clear_session()</a>.\nSo you clear all graph it has been created, then you try to run the classifier's <code>predict()</code>, which lost all its context this way.<br>\nThus just simply delete this line.</p>\n\n<p>This section is was about some code the Op deleted:<br>\nIn this task you don't need to use <code>tf.Graph()</code> at all. You just simply should call <code>emotion_classifier.predict()</code> as a simple python method <strong>outside</strong> and <strong>without</strong> of using any <code>tensorflow graph</code>:</p>\n\n<pre><code>def detect_emotion(self, img):\n\n    # Convert RGB to BGR\n    bgr_image = cv2.cvtColor(np.array(img), cv2.COLOR_RGB2BGR)\n    gray_image = cv2.cvtColor(bgr_image, cv2.COLOR_BGR2GRAY)\n    rgb_image = cv2.cvtColor(bgr_image, cv2.COLOR_BGR2RGB)\n    faces = detect_faces(face_detection, gray_image)\n\n    for face_coordinates in faces:\n\n        x1, x2, y1, y2 = apply_offsets(face_coordinates, emotion_offsets)\n        gray_face = gray_image[y1:y2, x1:x2]\n        try:\n            gray_face = cv2.resize(gray_face, (emotion_target_size))\n        except:\n            continue\n\n        gray_face = preprocess_input(gray_face, True)\n        gray_face = np.expand_dims(gray_face, 0)\n        gray_face = np.expand_dims(gray_face, -1)\n        emotion_classifier._make_predict_function()\n\n        emotion_prediction = emotion_classifier.predict(gray_face)\n\n        emotion_probability = np.max(emotion_prediction)\n        emotion_label_arg = np.argmax(emotion_prediction)\n        emotion_text = emotion_labels[emotion_label_arg]\n        emotion_window.append(emotion_text)\n\n        if len(emotion_window) &gt; frame_window:\n            emotion_window.pop(0)\n        try:\n            emotion_mode = mode(emotion_window)\n        except:\n            continue\n\n        if emotion_text == 'angry':\n            color = emotion_probability * np.asarray((255, 0, 0))\n        elif emotion_text == 'sad':\n            color = emotion_probability * np.asarray((0, 0, 255))\n        elif emotion_text == 'happy':\n            color = emotion_probability * np.asarray((255, 255, 0))\n        elif emotion_text == 'surprise':\n            color = emotion_probability * np.asarray((0, 255, 255))\n        else:\n            color = emotion_probability * np.asarray((0, 255, 0))\n\n        color = color.astype(int)\n        color = color.tolist()\n\n        draw_bounding_box(face_coordinates, rgb_image, color)\n        draw_text(face_coordinates, rgb_image, emotion_mode,\n                  color, 0, -45, 1, 1)\n\n    img = Image.fromarray(rgb_image)\n\n    return img\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 6854425, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-u-We0dK4M44/AAAAAAAAAAI/AAAAAAAAASM/YU-cwnn6YTg/photo.jpg?sz=128", "display_name": "Andr&#233;s Gir&#243;n", "link": "https://stackoverflow.com/users/6854425/andr%c3%a9s-gir%c3%b3n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1602, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1543108607, "creation_date": 1542838777, "last_edit_date": 1542843107, "question_id": 53421233, "link": "https://stackoverflow.com/questions/53421233/valueerrortensor-s-is-not-an-element-of-this-graph-obj", "title": "ValueError(&quot;Tensor %s is not an element of this graph.&quot; % obj)", "body": "<p>First of all, English is not my mother language so excuse me, if I don't express myself really well, please feel free to correct me.</p>\n\n<p>I'm making an emotion recognition system that uses rest services to send the image from the client's browser.</p>\n\n<p>This is the code:</p>\n\n<pre><code># hyper-parameters for bounding boxes shape\nframe_window = 10\nemotion_offsets = (20, 40)\n\n# loading models\nface_detection = load_detection_model(detection_model_path)\nemotion_classifier = load_model(emotion_model_path, compile=False)\nK.clear_session()\n\n# getting input model shapes for inference\nemotion_target_size = emotion_classifier.input_shape[1:3]\n\n# starting lists for calculating modes\nemotion_window = []\n</code></pre>\n\n<p>And the function:</p>\n\n<pre><code>def detect_emotion(self, img):\n\n    # Convert RGB to BGR\n    bgr_image = cv2.cvtColor(np.array(img), cv2.COLOR_RGB2BGR)\n    gray_image = cv2.cvtColor(bgr_image, cv2.COLOR_BGR2GRAY)\n    rgb_image = cv2.cvtColor(bgr_image, cv2.COLOR_BGR2RGB)\n    faces = detect_faces(face_detection, gray_image)\n\n    for face_coordinates in faces:\n\n        x1, x2, y1, y2 = apply_offsets(face_coordinates, emotion_offsets)\n        gray_face = gray_image[y1:y2, x1:x2]\n        try:\n            gray_face = cv2.resize(gray_face, (emotion_target_size))\n        except:\n            continue\n\n        gray_face = preprocess_input(gray_face, True)\n        gray_face = np.expand_dims(gray_face, 0)\n        gray_face = np.expand_dims(gray_face, -1)\n        emotion_classifier._make_predict_function()\n\n        emotion_prediction = emotion_classifier.predict(gray_face)\n\n        emotion_probability = np.max(emotion_prediction)\n        emotion_label_arg = np.argmax(emotion_prediction)\n        emotion_text = emotion_labels[emotion_label_arg]\n        emotion_window.append(emotion_text)\n\n        if len(emotion_window) &gt; frame_window:\n            emotion_window.pop(0)\n        try:\n            emotion_mode = mode(emotion_window)\n        except:\n            continue\n\n        if emotion_text == 'angry':\n            color = emotion_probability * np.asarray((255, 0, 0))\n        elif emotion_text == 'sad':\n            color = emotion_probability * np.asarray((0, 0, 255))\n        elif emotion_text == 'happy':\n            color = emotion_probability * np.asarray((255, 255, 0))\n        elif emotion_text == 'surprise':\n            color = emotion_probability * np.asarray((0, 255, 255))\n        else:\n            color = emotion_probability * np.asarray((0, 255, 0))\n\n        color = color.astype(int)\n        color = color.tolist()\n\n        draw_bounding_box(face_coordinates, rgb_image, color)\n        draw_text(face_coordinates, rgb_image, emotion_mode,\n                  color, 0, -45, 1, 1)\n\n    img = Image.fromarray(rgb_image)\n\n    return img\n\n\nI'm facing this error when i run my code using waitress:\n\n    File \"c:\\users\\afgir\\documents\\pythonprojects\\face_reco\\venv\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 3569, in _as_graph_element_locked\n    raise ValueError(\"Tensor %s is not an element of this graph.\" % obj) \n    ValueError: Tensor Tensor(\"predictions_1/Softmax:0\", shape=(?, 7), dtype=float32) is not an element of this graph.\n</code></pre>\n\n<p>It loads the image and does all the processing well, I'm pretty sure that the error is in the <code>emotion_classifier.predict</code> line, just don't know how to fix it.</p>\n\n<p>I've tried with the two solutions in <a href=\"https://stackoverflow.com/questions/47115946/tensor-is-not-an-element-of-this-graph\">this question</a> and none of them worked.</p>\n\n<p>I'm really new using <code>Tensorflow</code> so I'm kinda stuck with this.</p>\n"}, {"tags": ["python", "linux", "bash"], "comments": [{"owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "edited": false, "score": 0, "creation_date": 1542841127, "post_id": 53421214, "comment_id": 93717600, "body": "Your example data doesn&#39;t make clear where you want to cut. Should de target have 8.3 characters, start with the first digit, start with the second-last minus sign, removing everyting until the last <code>bob-</code>, remove leading minus signs after removing lowercase characters before the <code>.jpg</code>, or some other magic? What do you want when there is a space in the filename ?"}], "answers": [{"tags": [], "owner": {"reputation": 54765, "user_id": 309412, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e9739ec5574d9977b522d1c80fb8de84?s=128&d=identicon&r=PG", "display_name": "Lie Ryan", "link": "https://stackoverflow.com/users/309412/lie-ryan"}, "is_accepted": false, "score": 0, "last_activity_date": 1542889231, "last_edit_date": 1542889231, "creation_date": 1542838786, "answer_id": 53421235, "question_id": 53421214, "link": "https://stackoverflow.com/questions/53421214/script-to-remove-string-up-to-first-number/53421235#53421235", "title": "Script to remove string up to first number", "body": "<p>You most likely can do this with <a href=\"https://ss64.com/bash/rename.html\" rel=\"nofollow noreferrer\">rename</a> if your distro provides this command. For example:</p>\n\n<pre><code>$ rename 'image-w-inch-bob-bob-bob-bob-' '' image-w-\"\n</code></pre>\n\n<p>or with PCRE Regex as the expression:</p>\n\n<pre><code>$ rename 's/image-w-inch-bob-bob-bob-bob-//' image-w-*\n</code></pre>\n\n<p>rename can batch rename a set of files according to a pattern match, including by regular expression. Note that the are several versions of rename which accepts different syntax, you should consult your local man and/or the command's help page to determine which version you are using and the precise syntax to use.</p>\n"}, {"tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": false, "score": 0, "last_activity_date": 1542839949, "last_edit_date": 1542839949, "creation_date": 1542839565, "answer_id": 53421364, "question_id": 53421214, "link": "https://stackoverflow.com/questions/53421214/script-to-remove-string-up-to-first-number/53421364#53421364", "title": "Script to remove string up to first number", "body": "<p>If you're just trying to strip out all text before the first digit is found in the filename, something along these lines with a relatively simple regex should work in python:</p>\n\n<pre><code>import os\nimport re\n# replace with the path to your file:\npath = 'test/'\nfor filename in os.listdir(path):\n    os.rename(os.path.join(path, filename),\n              os.path.join(path, re.search('\\d.*',filename).group()))\n</code></pre>\n\n<p>We can create a test file just for fun to see that it works:</p>\n\n<pre><code>import os\nimport re\n\n# list out all the filenames to put into our test directory\nl=['image-w-inch-bob-bob-bob-bob-8820-AV1.jpg',\n   'image-w-inch-bob-bob-bob-bob-8820-AV2.jpg',\n   'image-w-inch-bob-bob-bob-bob-8820-AV3.jpg',\n   'image-w-inch-bob-bob-bob-bob-8820-AV4.jpg',\n   'image-w-inch-bob-bob-bob-bob-8820-AV5.jpg',\n   'image-w-inch-bob-bob-bob-bob-8820-AV6.jpg']\n\n# Create Directory\nos.mkdir('test')\n\n# add in all the files\nfor f in l:\n    open(f'test/{f}','a').close()\n\n# All the files are there\n&gt;&gt;&gt; os.listdir('test')\n['image-w-inch-bob-bob-bob-bob-8820-AV5.jpg', 'image-w-inch-bob-bob-bob-bob-8820-AV4.jpg', 'image-w-inch-bob-bob-bob-bob-8820-AV6.jpg', 'image-w-inch-bob-bob-bob-bob-8820-AV3.jpg', 'image-w-inch-bob-bob-bob-bob-8820-AV2.jpg', 'image-w-inch-bob-bob-bob-bob-8820-AV1.jpg']\n\n# rename with the loop provided above:\n\npath = 'test/'\nfor filename in os.listdir(path):\n    os.rename(os.path.join(path, filename),\n              os.path.join(path, re.search('\\d.*',filename).group()))\n\n# all the filenames have changed\n&gt;&gt;&gt; os.listdir('test')\n['8820-AV1.jpg', '8820-AV3.jpg', '8820-AV2.jpg', '8820-AV6.jpg', '8820-AV5.jpg', '8820-AV4.jpg']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1275, "user_id": 5024514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4015d630fb725145f4565d322334e08?s=128&d=identicon&r=PG", "display_name": "ShlomiF", "link": "https://stackoverflow.com/users/5024514/shlomif"}, "is_accepted": false, "score": 2, "last_activity_date": 1542839625, "creation_date": 1542839625, "answer_id": 53421373, "question_id": 53421214, "link": "https://stackoverflow.com/questions/53421214/script-to-remove-string-up-to-first-number/53421373#53421373", "title": "Script to remove string up to first number", "body": "<p>The most natural way would be to use regular expressions.  </p>\n\n<p>Here's an example of a python implementation:  </p>\n\n<pre><code>import re\ns = 'image-w-inch-bob-bob-bob-bob-8820-AV1.jpg'\ncapture_from_first_digit_re = re.compile('\\D*(\\d.*)')\nprint(capture_from_first_digit_re .findall(s)[0])\n</code></pre>\n\n<p>You can use this as you see fit in your context.</p>\n\n<hr>\n\n<p>Short explanation:  </p>\n\n<ul>\n<li>\\D - anything <em>except</em> a digit  </li>\n<li>\\D* - keep going as long as you don't hit a digit</li>\n<li>\\d - any digit  </li>\n<li>.* - anything at all  </li>\n<li>(###) - capture the matching ###  </li>\n</ul>\n\n<p>Putting it together: capture everything after the <em>first</em> digit you find.</p>\n"}, {"tags": [], "owner": {"reputation": 331, "user_id": 4885518, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000364442120/picture?type=large", "display_name": "Johnny Beltran", "link": "https://stackoverflow.com/users/4885518/johnny-beltran"}, "is_accepted": false, "score": -1, "last_activity_date": 1542840112, "last_edit_date": 1542840112, "creation_date": 1542839693, "answer_id": 53421376, "question_id": 53421214, "link": "https://stackoverflow.com/questions/53421214/script-to-remove-string-up-to-first-number/53421376#53421376", "title": "Script to remove string up to first number", "body": "<p>The easiest way to do this would be to locate the python script inside the folder the files are located. Assuming that all the filenames have the same amount of characters before the first number, then you'd need something like:</p>\n\n<pre><code>import os\nfor file in os.listdir('.'):\n    if '.py' not in file: #not the python script\n        os.rename(file, file[indexOfFirstNum:])\n</code></pre>\n\n<p>I haven't tested the script so try it first and modify accordingly before running it in the real folder. </p>\n\n<p>EDIT: Refer to <a href=\"https://stackoverflow.com/users/5024514/shlomif\">shlomif</a>'s answer if you want the script to be more general. Regular expressions are useful for finding and matching patterns in strings.</p>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 0, "last_activity_date": 1542855703, "creation_date": 1542855703, "answer_id": 53423267, "question_id": 53421214, "link": "https://stackoverflow.com/questions/53421214/script-to-remove-string-up-to-first-number/53423267#53423267", "title": "Script to remove string up to first number", "body": "<p>Here is the Perl one liner solution:</p>\n\n<pre><code>$ ls -l\ntotal 0\n-rwxrw-r--+ 1 xxxx xxxx 0 Nov 22 08:23 image-w-inch-bob-bob-bob-bob-8820-AV1.jpg\n-rwxrw-r--+ 1 xxxx xxxx 0 Nov 22 08:23 image-w-inch-bob-bob-bob-bob-8820-AV2.jpg\n-rwxrw-r--+ 1 xxxx xxxx 0 Nov 22 08:23 image-w-inch-bob-bob-bob-bob-8820-AV3.jpg\n-rwxrw-r--+ 1 xxxx xxxx 0 Nov 22 08:23 image-w-inch-bob-bob-bob-bob-8820-AV4.jpg\n-rwxrw-r--+ 1 xxxx xxxx 0 Nov 22 08:23 image-w-inch-bob-bob-bob-bob-8820-AV5.jpg\n-rwxrw-r--+ 1 xxxx xxxx 0 Nov 22 08:23 image-w-inch-bob-bob-bob-bob-8820-AV6.jpg\n\n$ perl -ne ' BEGIN { foreach $f (glob(\"image-w*.jpg\")) { $newf=$f, $newf=~s/(.[^\\d]*)-(\\d+)(.*)/\\2\\3/g; rename $f, \"$newf\" } exit } '\n\n$ ls -l\ntotal 0\n-rwxrw-r--+ 1 xxxx xxxx 0 Nov 22 08:23 8820-AV1.jpg\n-rwxrw-r--+ 1 xxxx xxxx 0 Nov 22 08:23 8820-AV2.jpg\n-rwxrw-r--+ 1 xxxx xxxx 0 Nov 22 08:23 8820-AV3.jpg\n-rwxrw-r--+ 1 xxxx xxxx 0 Nov 22 08:23 8820-AV4.jpg\n-rwxrw-r--+ 1 xxxx xxxx 0 Nov 22 08:23 8820-AV5.jpg\n-rwxrw-r--+ 1 xxxx xxxx 0 Nov 22 08:23 8820-AV6.jpg\n\n$\n</code></pre>\n"}], "owner": {"reputation": 482, "user_id": 1152308, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/d79f31dd170028bdd784784e6ba17f4a?s=128&d=identicon&r=PG", "display_name": "WebDevB", "link": "https://stackoverflow.com/users/1152308/webdevb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 5, "score": -1, "last_activity_date": 1542889231, "creation_date": 1542838613, "last_edit_date": 1542838966, "question_id": 53421214, "link": "https://stackoverflow.com/questions/53421214/script-to-remove-string-up-to-first-number", "title": "Script to remove string up to first number", "body": "<p>I need to write a script that will look through a folder and strip out the text from a string of an image.</p>\n\n<pre><code>image-w-inch-bob-bob-bob-bob-8820-AV1.jpg\nimage-w-inch-bob-bob-bob-bob-8820-AV2.jpg\nimage-w-inch-bob-bob-bob-bob-8820-AV3.jpg\nimage-w-inch-bob-bob-bob-bob-8820-AV4.jpg\nimage-w-inch-bob-bob-bob-bob-8820-AV5.jpg\nimage-w-inch-bob-bob-bob-bob-8820-AV6.jpg\n</code></pre>\n\n<p>I need this to be renamed to</p>\n\n<pre><code>8820-AV1.jpg\n8820-AV2.jpg\n8820-AV3.jpg\n8820-AV4.jpg\n8820-AV5.jpg\n8820-AV6.jpg\n</code></pre>\n\n<p>Does anyone know of a script like this?</p>\n"}, {"tags": ["python", "dictionary", "zip"], "answers": [{"tags": [], "owner": {"reputation": 1275, "user_id": 5024514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4015d630fb725145f4565d322334e08?s=128&d=identicon&r=PG", "display_name": "ShlomiF", "link": "https://stackoverflow.com/users/5024514/shlomif"}, "is_accepted": false, "score": 2, "last_activity_date": 1542838903, "creation_date": 1542838903, "answer_id": 53421259, "question_id": 53421208, "link": "https://stackoverflow.com/questions/53421208/how-to-zip-values-in-two-dictionaries/53421259#53421259", "title": "How to zip values in two dictionaries", "body": "<p>I'm not <em>quite</em> sure what you're getting at, but the following does something like what you're describing:  </p>\n\n<pre><code>a = {('x0', '0'): 'x0', ('x0', '1'): 'x1', ('x1', '0'): 'x1', ('x1', '1'): 'x0'}\nb = {('y0', '0'): 'y1', ('y0', '1'): 'y1', ('y1', '0'): 'y0', ('y1', '1'): 'y0'}\n{((x[0], y[0]), x[1]): (a[x], b[y]) for x, y in zip(a.keys(), b.keys())}\n&gt;&gt; {(('x0', 'y0'), '0'): ('x0', 'y1'), (('x0', 'y0'), '1'): ('x1', 'y1'), (('x1', 'y1'), '0'): ('x1', 'y0'), (('x1', 'y1'), '1'): ('x0', 'y0')}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": true, "score": 1, "last_activity_date": 1542838927, "creation_date": 1542838927, "answer_id": 53421262, "question_id": 53421208, "link": "https://stackoverflow.com/questions/53421208/how-to-zip-values-in-two-dictionaries/53421262#53421262", "title": "How to zip values in two dictionaries", "body": "<p>In Python3.7 dictionaries are ordered, thus, you can iterate over <code>dict.items()</code>:</p>\n\n<pre><code>d1 = {('x0', '0'): 'x0', ('x0', '1'): 'x1', ('x1', '0'): 'x1', ('x1', '1'): 'x0'}\nd2 = {('y0', '0'): 'y1', ('y0', '1'): 'y1', ('y1', '0'): 'y0', ('y1', '1'): 'y0'}\nnew_d = {((c, d), b):(a, e) for ([c, b], a), ([d, _], e) in zip(d1.items(), d2.items())}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{(('x0', 'y0'), '0'): ('x0', 'y1'), (('x0', 'y0'), '1'): ('x1', 'y1'), (('x1', 'y1'), '0'): ('x1', 'y0'), (('x1', 'y1'), '1'): ('x0', 'y0')}\n</code></pre>\n\n<p>However, this solution will only work in Python3.7. For use in any other versions, consider utilizing <code>collections.OrderedDict</code> or implementing the structure as a list of tuples to ensure that proper pairing always occurs.</p>\n"}, {"tags": [], "owner": {"reputation": 3036, "user_id": 5491375, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/acb34dbd1c452d932e5d116561d6ee26?s=128&d=identicon&r=PG&f=1", "display_name": "aydow", "link": "https://stackoverflow.com/users/5491375/aydow"}, "is_accepted": false, "score": 0, "last_activity_date": 1542861072, "last_edit_date": 1542861072, "creation_date": 1542839479, "answer_id": 53421351, "question_id": 53421208, "link": "https://stackoverflow.com/questions/53421208/how-to-zip-values-in-two-dictionaries/53421351#53421351", "title": "How to zip values in two dictionaries", "body": "<p>As @Ajax1234 mentioned, before Python 3.7, <code>dict.items</code> isn't ordered, but that doesn't mean you can't sort it yourself!</p>\n\n<p>Confirming that it's unordered (Python 3.5)</p>\n\n<pre><code>In [132]: list(zip(x.items(), y.items()))\nOut[132]:\n[((('x0', '0'), 'x0'), (('y0', '1'), 'y1')),\n ((('x1', '0'), 'x1'), (('y1', '0'), 'y0')),\n ((('x0', '1'), 'x1'), (('y0', '0'), 'y1')),\n ((('x1', '1'), 'x0'), (('y1', '1'), 'y0'))]\n</code></pre>\n\n<p>Explicitly ordering it</p>\n\n<pre><code>In [129]: list(zip(sorted(x.items()), sorted(y.items())))\nOut[129]:\n[((('x0', '0'), 'x0'), (('y0', '0'), 'y1')),\n ((('x0', '1'), 'x1'), (('y0', '1'), 'y1')),\n ((('x1', '0'), 'x1'), (('y1', '0'), 'y0')),\n ((('x1', '1'), 'x0'), (('y1', '1'), 'y0'))]\n</code></pre>\n\n<p>Creating your new <code>dict</code></p>\n\n<pre><code>In [131]: {((x0, y0), x1): (x, y) for ((x0, x1), x), ((y0, y1), y) in zip(sorted(x.items()), sorted(y.items()))}\n\nOut[131]:\n{(('x0', 'y0'), '0'): ('x0', 'y1'),\n (('x0', 'y0'), '1'): ('x1', 'y1'),\n (('x1', 'y1'), '0'): ('x1', 'y0'),\n (('x1', 'y1'), '1'): ('x0', 'y0')}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 8932347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d3cd3372432dc8c441023498b1d15af?s=128&d=identicon&r=PG&f=1", "display_name": "pollywogz", "link": "https://stackoverflow.com/users/8932347/pollywogz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1081, "favorite_count": 0, "accepted_answer_id": 53421262, "answer_count": 3, "score": -1, "last_activity_date": 1542861072, "creation_date": 1542838582, "question_id": 53421208, "link": "https://stackoverflow.com/questions/53421208/how-to-zip-values-in-two-dictionaries", "title": "How to zip values in two dictionaries", "body": "<p>I have 2 dictionaries:</p>\n\n<pre><code>{('x0', '0'): 'x0', ('x0', '1'): 'x1', ('x1', '0'): 'x1', ('x1', '1'): 'x0'}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>{('y0', '0'): 'y1', ('y0', '1'): 'y1', ('y1', '0'): 'y0', ('y1', '1'): 'y0'}\n</code></pre>\n\n<p>and I want to zip them in the way so that the result would be:</p>\n\n<pre><code>{(('x0','y0'), 0) : ('x0','y1'), \n(('x0', 'y0'), 1) : ('x1, 'y1')... and so on}\n</code></pre>\n\n<p>What is the best way to achieve that?</p>\n"}, {"tags": ["python", "python-3.x", "apache-kafka", "avro"], "comments": [{"owner": {"reputation": 6925, "user_id": 320036, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/CdvdX.jpg?s=128&g=1", "display_name": "z0r", "link": "https://stackoverflow.com/users/320036/z0r"}, "edited": false, "score": 0, "creation_date": 1542838572, "post_id": 53421197, "comment_id": 93716794, "body": "For comparison: <code>struct.pack(&#39;&gt;l&#39;, int(59 * 1e4)) == b&#39;\\x00\\t\\x00\\xb0&#39;</code>"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1542839887, "post_id": 53421197, "comment_id": 93717239, "body": "Are you sure that you want to encode high ASCII values as UTF-8? They will gain at least one additional byte, then, which will influence the total value. That said, at least you will <i>get</i> 4 bytes. Your sample string defines only 3."}, {"owner": {"reputation": 6925, "user_id": 320036, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/CdvdX.jpg?s=128&g=1", "display_name": "z0r", "link": "https://stackoverflow.com/users/320036/z0r"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1542841301, "post_id": 53421197, "comment_id": 93717672, "body": "@usr2564301 Yeah, I&#39;m not sure - it does seem weird. The reason I chose UTF-8 is that that&#39;s what JSON uses to encode strings, and the output of the Avro console consumer is (apparently) JSON. I am a bit suss on that string; I would have expected it to write something in Base64 or so."}], "answers": [{"comments": [{"owner": {"reputation": 6925, "user_id": 320036, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/CdvdX.jpg?s=128&g=1", "display_name": "z0r", "link": "https://stackoverflow.com/users/320036/z0r"}, "edited": false, "score": 0, "creation_date": 1542854616, "post_id": 53422931, "comment_id": 93720776, "body": "Yep fair point. I don&#39;t have a <code>.avro</code> file to read, but maybe I should just write a little Python script using an <code>AvroConsumer</code> instead of the (presumably) Java-based console consumer to test it."}], "tags": [], "owner": {"reputation": 9377, "user_id": 8431111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GteAE.jpg?s=128&g=1", "display_name": "J_H", "link": "https://stackoverflow.com/users/8431111/j-h"}, "is_accepted": false, "score": 1, "last_activity_date": 1542852465, "creation_date": 1542852465, "answer_id": 53422931, "question_id": 53421197, "link": "https://stackoverflow.com/questions/53421197/decode-avro-decimal-as-bytearray-string/53422931#53422931", "title": "Decode Avro decimal-as-bytearray string", "body": "<p>You seem to be going about this the Hard Way. The approach suggested by <a href=\"https://stackoverflow.com/questions/25006273/how-to-extract-schema-for-avro-file-in-python\">How to extract schema for avro file in python</a> is to use:</p>\n\n<pre><code>reader = avro.datafile.DataFileReader(open('filename.avro',\"rb\"),avro.io.DatumReader())\nschema = reader.meta\n</code></pre>\n\n<p>Single stepping in a debugger to see how the reader decodes your messages should get you closer to assembling a \"raw\" hand engineered decode.</p>\n"}], "owner": {"reputation": 6925, "user_id": 320036, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/CdvdX.jpg?s=128&g=1", "display_name": "z0r", "link": "https://stackoverflow.com/users/320036/z0r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 905, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542852465, "creation_date": 1542838489, "last_edit_date": 1542840400, "question_id": 53421197, "link": "https://stackoverflow.com/questions/53421197/decode-avro-decimal-as-bytearray-string", "title": "Decode Avro decimal-as-bytearray string", "body": "<p>I'm using Kafka with Avro messages. One of my fields is defined like this:</p>\n\n<pre><code>{ \n    \"name\": \"a_number\", \n    \"type\": \"bytes\", \n    \"logicalType\": \"decimal\", \n    \"precision\": 4, \n    \"scale\": 4 \n}\n</code></pre>\n\n<p>Using the Avro console consumer, I see a message like this:</p>\n\n<pre><code>{\"a_number\": \"\\t\\u0000\u00b0\"}\n</code></pre>\n\n<p>Which I expect to equal <code>59</code>.</p>\n\n<p>Supposedly, the bytearray <a href=\"https://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html#toByteArray()\" rel=\"nofollow noreferrer\">should be the twos-compliment of the number</a>. I've tried using Python's <a href=\"https://docs.python.org/3/library/struct.html\" rel=\"nofollow noreferrer\"><code>struct</code></a> module to decode it, but the values I get don't make any sense:</p>\n\n<pre><code>bs = '\\t\\u0000\u00b0'.encode('utf8')    # b'\\t\\x00\\xc2\\xb0'\nstruct.unpack('&gt;l', bs)[0] / 1e4   # 15104.4784\n</code></pre>\n\n<p>How can I validate the message? Can I decode the string somehow, or has the Avro console consumer corrupted it?</p>\n"}, {"tags": ["python", "pyqt4"], "comments": [{"owner": {"reputation": 31, "user_id": 8174413, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pDSmxSZTolU/AAAAAAAAAAI/AAAAAAAAAmg/SOY9z3anLnM/photo.jpg?sz=128", "display_name": "Vaxe", "link": "https://stackoverflow.com/users/8174413/vaxe"}, "edited": false, "score": 0, "creation_date": 1542841634, "post_id": 53421170, "comment_id": 93717781, "body": "I tried this but I don&#39;t understand how to do it, I saw where I can call a funtion with the Request, but I dont know what to do in that function."}, {"owner": {"reputation": 31, "user_id": 8174413, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pDSmxSZTolU/AAAAAAAAAAI/AAAAAAAAAmg/SOY9z3anLnM/photo.jpg?sz=128", "display_name": "Vaxe", "link": "https://stackoverflow.com/users/8174413/vaxe"}, "edited": false, "score": 0, "creation_date": 1542841788, "post_id": 53421170, "comment_id": 93717834, "body": "I made an edit to show the download function."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1542841886, "post_id": 53421170, "comment_id": 93717863, "body": "your question is equivalent to &quot;how to do X&quot; ?, and the solution is in the link, instead it seems that you want to ask &quot;I tried Y to do X but it does not work&quot;, so for that case it is necessary that Y be a a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and its code is not. please take the time and provide a MCVE in addition to the url since this type of questions is very dependent on the url."}, {"owner": {"reputation": 31, "user_id": 8174413, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pDSmxSZTolU/AAAAAAAAAAI/AAAAAAAAAmg/SOY9z3anLnM/photo.jpg?sz=128", "display_name": "Vaxe", "link": "https://stackoverflow.com/users/8174413/vaxe"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1542842530, "post_id": 53421170, "comment_id": 93718069, "body": "The solutions not in the link i littearlly said I dont understand it isnt that the whole point of your website?"}, {"owner": {"reputation": 31, "user_id": 8174413, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pDSmxSZTolU/AAAAAAAAAAI/AAAAAAAAAmg/SOY9z3anLnM/photo.jpg?sz=128", "display_name": "Vaxe", "link": "https://stackoverflow.com/users/8174413/vaxe"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1542842570, "post_id": 53421170, "comment_id": 93718081, "body": "I had already seen that before and I did not understand it SO i came here I do not know how to use what the answer was in my code"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1542842734, "post_id": 53421170, "comment_id": 93718134, "body": "I do not understand you, SO is everyone&#39;s :-). What I have asked is that you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and within it is the url that you place in the QLineEdit. Not every file is downloaded in the same way but the base is the same, for example if I pass a pdf url download it easily but if I pass a dropbox link, drive, etc. is different."}, {"owner": {"reputation": 31, "user_id": 8174413, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pDSmxSZTolU/AAAAAAAAAAI/AAAAAAAAAmg/SOY9z3anLnM/photo.jpg?sz=128", "display_name": "Vaxe", "link": "https://stackoverflow.com/users/8174413/vaxe"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1542842911, "post_id": 53421170, "comment_id": 93718198, "body": "For example, I&#39;d use a link like this, <a href=\"https://www.google.com/images/branding/googlelogo/1x/googlelogo_color_272x92dp.png\" rel=\"nofollow noreferrer\">google.com/images/branding/googlelogo/1x/&hellip;</a>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1542842962, "post_id": 53421170, "comment_id": 93718215, "body": "for that case the browser should not be used"}, {"owner": {"reputation": 31, "user_id": 8174413, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pDSmxSZTolU/AAAAAAAAAAI/AAAAAAAAAmg/SOY9z3anLnM/photo.jpg?sz=128", "display_name": "Vaxe", "link": "https://stackoverflow.com/users/8174413/vaxe"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1542843067, "post_id": 53421170, "comment_id": 93718253, "body": "Thats just an example, I was using it like a regular browser, but when you click on links like that it doesn&#39;t do anything, I just need a way to download a file from a link like that on there when you click on it"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1542843173, "post_id": 53421170, "comment_id": 93718279, "body": "I have added another question where the solution does what you want, in conclusion you should not use QWebView but QNetworkAccessManager."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1542843250, "post_id": 53421170, "comment_id": 93718308, "body": "Then show the url of the web page where the url of the image is as it indicates, be it concrete, if you place a case that is not the real one I will give you a solution for the non real case because for me it is real."}, {"owner": {"reputation": 31, "user_id": 8174413, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pDSmxSZTolU/AAAAAAAAAAI/AAAAAAAAAmg/SOY9z3anLnM/photo.jpg?sz=128", "display_name": "Vaxe", "link": "https://stackoverflow.com/users/8174413/vaxe"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1542843828, "post_id": 53421170, "comment_id": 93718463, "body": "How do I use QNetworkAccessManager to download the file, see the function on_download_requested. What do i put in there to download the file"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1542845048, "post_id": 53421170, "comment_id": 93718804, "body": "try with this: <a href=\"https://gist.github.com/eyllanesc/72b3ea20ccc867e1ed4a1c9fb375f66e\" rel=\"nofollow noreferrer\">gist.github.com/eyllanesc/72b3ea20ccc867e1ed4a1c9fb375f66e</a>"}, {"owner": {"reputation": 31, "user_id": 8174413, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pDSmxSZTolU/AAAAAAAAAAI/AAAAAAAAAmg/SOY9z3anLnM/photo.jpg?sz=128", "display_name": "Vaxe", "link": "https://stackoverflow.com/users/8174413/vaxe"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1542915124, "post_id": 53421170, "comment_id": 93747977, "body": "I edited the post to so what I used as the solution, thank you."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1542915242, "post_id": 53421170, "comment_id": 93748025, "body": "Your question is duplicated since it is equivalent to what is indicated in the answer to the other question"}, {"owner": {"reputation": 31, "user_id": 8174413, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pDSmxSZTolU/AAAAAAAAAAI/AAAAAAAAAmg/SOY9z3anLnM/photo.jpg?sz=128", "display_name": "Vaxe", "link": "https://stackoverflow.com/users/8174413/vaxe"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1542915387, "post_id": 53421170, "comment_id": 93748068, "body": "I just didn&#39;t know how to replicate it like that. I don&#39;t know how to use PyQt at all"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1542915523, "post_id": 53421170, "comment_id": 93748116, "body": "Precisely, for a next opportunity you do not ask for the general problem if it has already been solved in another question, but you should point out that you have tried the solution of another post and that it has not worked pointing out the errors, so we could help you correcting your code that is a different problem."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1542915674, "post_id": 53421170, "comment_id": 93748171, "body": "For SO the question already exists: how to download with QWebView so a question indicating the same will be marked duplicate, but another problem is the specific case that the OP wants to implement that solution but has problems doing so, then it is no longer a duplicate because the question is: problems when implementing the download with QWebView."}], "owner": {"reputation": 31, "user_id": 8174413, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pDSmxSZTolU/AAAAAAAAAAI/AAAAAAAAAmg/SOY9z3anLnM/photo.jpg?sz=128", "display_name": "Vaxe", "link": "https://stackoverflow.com/users/8174413/vaxe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 264, "favorite_count": 0, "closed_date": 1542841619, "answer_count": 0, "score": 0, "last_activity_date": 1542915098, "creation_date": 1542838356, "last_edit_date": 1542915098, "question_id": 53421170, "link": "https://stackoverflow.com/questions/53421170/download-file-pyqt-browser", "closed_reason": "Duplicate", "title": "Download File PyQT Browser", "body": "<p>How can I download a file using this browser, when you click on links it does nothing. Everything else works fine, it loads the pages perfectly and can upload files, everything else is working perfectly, I just need a way to download files from links. Thank you in advance. :)</p>\n\n<pre><code>import sys \nfrom PyQt4.QtGui import *   \nfrom PyQt4.QtCore import *   \nfrom PyQt4.QtWebKit import * \nfrom PyQt4.QtNetwork import * \nfrom PyQt4.QtGui import QGridLayout, QLineEdit, QWidget\n\n    class UrlInput(QLineEdit):\n\n        def __init__(self, browser):\n\n            super(UrlInput, self).__init__()\n            self.browser = browser\n            self.returnPressed.connect(self._return_pressed)\n\n        def _return_pressed(self):\n                browser.setHtml('Loading...')\n                data = self.text()\n                url = QUrl(data)\n                browser.load(url)\n\n if __name__ == \"__main__\":\n        app = QApplication(sys.argv)\n\n        grid = QGridLayout()\n        browser = QWebView()\n        url_input = UrlInput(browser)\n        grid.addWidget(url_input, 1, 0)\n        grid.addWidget(browser, 2, 0)\n        main_frame = QWidget()\n        main_frame.setLayout(grid)\n        main_frame.show()\n        sys.exit(app.exec_())\n</code></pre>\n\n<p>Here is the solution to my porblem:</p>\n\n<pre><code>from PyQt4.QtGui import *  \nfrom PyQt4.QtCore import *  \nfrom PyQt4.QtWebKit import *\nfrom PyQt4.QtNetwork import *\nfrom PyQt4 import QtNetwork\nfrom PyQt4 import QtGui\nfrom PyQt4.QtGui import QGridLayout, QLineEdit, QWidget\nimport Tkinter, tkFileDialog\nimport sys\nimport os\n\nclass UrlInput(QLineEdit):\n\n    def __init__(self, browser):\n\n        super(UrlInput, self).__init__()\n        self.browser = browser\n        self.returnPressed.connect(self._return_pressed)\n        self.browser.page().setForwardUnsupportedContent(True)\n        self.browser.page().unsupportedContent.connect(self.download)\n        self.manager = QtNetwork.QNetworkAccessManager()\n        self.manager.finished.connect(self.finished)\n\n    def _return_pressed(self):\n        data = self.text()\n        url = QUrl(data)\n        browser.load(url)\n\n    def download(self, reply):\n        self.request = QtNetwork.QNetworkRequest(reply.url())\n        self.reply = self.manager.get(self.request)\n\n    def finished(self):\n        filename = str(self.reply.url().path()).split('/')[-1]\n\n        root = Tkinter.Tk()\n        root.withdraw()\n\n        dirname = tkFileDialog.askdirectory(parent=root,initialdir=\"/Desktop\",title='You are downloading a file, please select a directory to place the file. Close the window to cancel')\n        if dirname.strip() != '':\n            dirname = dirname.replace('/','\\\\')\n            f = open(dirname+'\\\\'+filename,'wb')\n            f.write(str(self.reply.readAll()))\n            f.close()\n        else:\n            pass\n\nif __name__ == \"__main__\":\n    app = QApplication(sys.argv)\n\n    grid = QGridLayout()\n    browser = QWebView()\n    url_input = UrlInput(browser)\n    grid.addWidget(url_input, 1, 0)\n    grid.addWidget(browser, 2, 0)\n    main_frame = QWidget()\n    main_frame.setLayout(grid)\n    main_frame.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 1, "creation_date": 1542838410, "post_id": 53421162, "comment_id": 93716732, "body": "Did you mean to return <code>lst</code>? I don&#39;t get any errors relating to <code>x</code>; I just get the reference to <code>rand</code> printed out since that&#39;s what&#39;s being returned. This works fine if you replace <code>return rand</code> with <code>return lst</code>. Voting to close as a typo."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1542838715, "post_id": 53421162, "comment_id": 93716844, "body": "This isn&#39;t directly related to the problem, but what is the purpose of <code>x = y</code> at the bottom of the for loop?  <code>x</code> is reassigned at the top of the loop, so the effect of <code>x = y</code> is immediately lost."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1542838783, "post_id": 53421162, "comment_id": 93716869, "body": "Also, <code>y</code> is always 10, and <code>x</code> is a random number between -5 and 6, so <code>x == y</code> will never be true."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1542838824, "post_id": 53421162, "comment_id": 93716884, "body": "@JohnGordon I think they mean <code>y = x</code> instead. That explains both problems."}, {"owner": {"reputation": 45, "user_id": 10687556, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NBpXXkAeRF0/AAAAAAAAAAI/AAAAAAAAABY/nRFZO3mYvJ8/photo.jpg?sz=128", "display_name": "Ludwig Wallin", "link": "https://stackoverflow.com/users/10687556/ludwig-wallin"}, "edited": false, "score": 0, "creation_date": 1542838919, "post_id": 53421162, "comment_id": 93716924, "body": "That&#39;s what i thought but I instead get another error: &quot;NameError: name &#39;lst&#39; is not defined&quot;"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1542839259, "post_id": 53421162, "comment_id": 93717037, "body": "@LudwigWallin if you <code>return lst</code>, you can&#39;t be getting that error. I just ran the code and it produced a list of random values. <code>return lst</code> in the function, not <code>(print(lst())</code> under the function."}, {"owner": {"reputation": 45, "user_id": 10687556, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NBpXXkAeRF0/AAAAAAAAAAI/AAAAAAAAABY/nRFZO3mYvJ8/photo.jpg?sz=128", "display_name": "Ludwig Wallin", "link": "https://stackoverflow.com/users/10687556/ludwig-wallin"}, "edited": false, "score": 0, "creation_date": 1542839461, "post_id": 53421162, "comment_id": 93717100, "body": "I seem to have trouble with printing the function. It can&#39;t fint &quot;lst&quot;"}, {"owner": {"reputation": 45, "user_id": 10687556, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NBpXXkAeRF0/AAAAAAAAAAI/AAAAAAAAABY/nRFZO3mYvJ8/photo.jpg?sz=128", "display_name": "Ludwig Wallin", "link": "https://stackoverflow.com/users/10687556/ludwig-wallin"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1542839522, "post_id": 53421162, "comment_id": 93717118, "body": "@Carcigenicate Yeah mb. Its supposed to be y = x"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 10687556, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NBpXXkAeRF0/AAAAAAAAAAI/AAAAAAAAABY/nRFZO3mYvJ8/photo.jpg?sz=128", "display_name": "Ludwig Wallin", "link": "https://stackoverflow.com/users/10687556/ludwig-wallin"}, "edited": false, "score": 1, "creation_date": 1542839648, "post_id": 53421316, "comment_id": 93717152, "body": "Yeah, thank you. y = x also solves the other problem :)"}], "tags": [], "owner": {"reputation": 1002, "user_id": 10638608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dabljues", "link": "https://stackoverflow.com/users/10638608/dabljues"}, "is_accepted": true, "score": 1, "last_activity_date": 1542839266, "creation_date": 1542839266, "answer_id": 53421316, "question_id": 53421162, "link": "https://stackoverflow.com/questions/53421162/doesnt-work-when-i-try-to-make-it-a-function/53421316#53421316", "title": "Doesn&#39;t work when i try to make it a function", "body": "<p>The problem here is: You are returning a function itself. It's possible in Python (you would be actually surprised how many things are possible there).</p>\n\n<p>I am guessing that what you wanted to do is to return a list created in your <code>for</code> loop, so as @Carcigenicate pointed, it's probably a typo.</p>\n\n<pre><code>import random\n\n\ndef rand():\n    lst = []\n    y = 10\n\n    for i in range(0, 100):\n        x = random.randint(-5, 6)\n        while x == y:\n            x = random.randint(-5, 6)\n        lst.append(x)\n        x = y\n    return lst\n\n\nprint(rand())\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 10687556, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NBpXXkAeRF0/AAAAAAAAAAI/AAAAAAAAABY/nRFZO3mYvJ8/photo.jpg?sz=128", "display_name": "Ludwig Wallin", "link": "https://stackoverflow.com/users/10687556/ludwig-wallin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 53421316, "answer_count": 1, "score": -1, "last_activity_date": 1542839266, "creation_date": 1542838326, "question_id": 53421162, "link": "https://stackoverflow.com/questions/53421162/doesnt-work-when-i-try-to-make-it-a-function", "title": "Doesn&#39;t work when i try to make it a function", "body": "<p>So I've made this simple program in my programming course where it displays 100 random numbers between the interval -5 and 5 without consecutive repetition. I made first made it without a function but when i tried to define it, the code stoped working. For some reason is the \"x\" not in scope and I can't figure out what is wrong.</p>\n\n<p>Any help is appreciated!</p>\n\n<pre><code>import random\n\n\ndef rand():\n    lst = []\n    y = 10\n\n    for i in range(0, 100):\n        x = random.randint(-5, 6)\n        while x == y:\n            x = random.randint(-5, 6)\n        lst.append(x)\n        x = y\n    return rand\n\n\nprint(rand())\n</code></pre>\n"}, {"tags": ["python", "sqlalchemy", "flask-sqlalchemy"], "comments": [{"owner": {"reputation": 6911, "user_id": 6560549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OQgD.jpg?s=128&g=1", "display_name": "SuperShoot", "link": "https://stackoverflow.com/users/6560549/supershoot"}, "edited": false, "score": 1, "creation_date": 1542846899, "post_id": 53421156, "comment_id": 93719251, "body": "If unused capacity is calculated on python side, you&#39;ll always need the room query to get the current room capacity. As @tooTired has pointed out, there are ways to abstract this away (another would be a <a href=\"https://docs.sqlalchemy.org/en/latest/orm/events.html#sqlalchemy.orm.events.MapperEvents.before_insert\" rel=\"nofollow noreferrer\"><code>before_insert</code></a> event)."}, {"owner": {"reputation": 6911, "user_id": 6560549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OQgD.jpg?s=128&g=1", "display_name": "SuperShoot", "link": "https://stackoverflow.com/users/6560549/supershoot"}, "edited": false, "score": 0, "creation_date": 1542846974, "post_id": 53421156, "comment_id": 93719264, "body": "A subquery can achieve it on insert: <code>INSERT INTO counts (attendance, unusedCapacity, room_id) SELECT %(attendance)s, capacity - %(attendance)s, id FROM rooms WHERE id = %(room_id)s;</code>, but I don&#39;t know how to achieve that using ORM and am curious to see the answer!"}, {"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "reply_to_user": {"reputation": 6911, "user_id": 6560549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OQgD.jpg?s=128&g=1", "display_name": "SuperShoot", "link": "https://stackoverflow.com/users/6560549/supershoot"}, "edited": false, "score": 0, "creation_date": 1542865132, "post_id": 53421156, "comment_id": 93723242, "body": "Thanks @SuperShoot. The insert is being initiated from the python, but calculation doesn&#39;t necessarily need to happen there."}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "reply_to_user": {"reputation": 6911, "user_id": 6560549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OQgD.jpg?s=128&g=1", "display_name": "SuperShoot", "link": "https://stackoverflow.com/users/6560549/supershoot"}, "edited": false, "score": 1, "creation_date": 1542866317, "post_id": 53421156, "comment_id": 93723599, "body": "@SuperShoot <code>__init__</code> could just set <code>unusedCapacity</code> to a scalar subquery that uses the passed <code>room_id</code> and <code>attendance</code>, a bit like @tooTired did it, but without the fetch. For some reason a <a href=\"https://docs.sqlalchemy.org/en/latest/core/defaults.html#context-sensitive-default-functions\" rel=\"nofollow noreferrer\">context sensitive default</a> did not work in this case, unfortunately (it didn&#39;t inline the subquery, but tried to pass it through a placeholder :P)."}, {"owner": {"reputation": 6911, "user_id": 6560549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OQgD.jpg?s=128&g=1", "display_name": "SuperShoot", "link": "https://stackoverflow.com/users/6560549/supershoot"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1542867071, "post_id": 53421156, "comment_id": 93723877, "body": "Thanks @IljaEveril&#228; I will try to wrap my head around all of that tonight:)"}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "reply_to_user": {"reputation": 6911, "user_id": 6560549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OQgD.jpg?s=128&g=1", "display_name": "SuperShoot", "link": "https://stackoverflow.com/users/6560549/supershoot"}, "edited": false, "score": 0, "creation_date": 1542867552, "post_id": 53421156, "comment_id": 93724038, "body": "@SuperShoot I took the liberty of adding an answer that does just that, so hopefully that&#39;ll unwrap it a bit faster."}, {"owner": {"reputation": 6911, "user_id": 6560549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OQgD.jpg?s=128&g=1", "display_name": "SuperShoot", "link": "https://stackoverflow.com/users/6560549/supershoot"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1542867758, "post_id": 53421156, "comment_id": 93724110, "body": "@IljaEveril&#228; certainly will!"}], "answers": [{"comments": [{"owner": {"reputation": 6911, "user_id": 6560549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OQgD.jpg?s=128&g=1", "display_name": "SuperShoot", "link": "https://stackoverflow.com/users/6560549/supershoot"}, "edited": false, "score": 0, "creation_date": 1542844479, "post_id": 53422011, "comment_id": 93718641, "body": "This is really just the same solution though, it just does the <code>Room</code> query in a different place."}, {"owner": {"reputation": 169, "user_id": 3728861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/821065bf1759b11f65fab383015da187?s=128&d=identicon&r=PG&f=1", "display_name": "tooTired", "link": "https://stackoverflow.com/users/3728861/tootired"}, "reply_to_user": {"reputation": 6911, "user_id": 6560549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OQgD.jpg?s=128&g=1", "display_name": "SuperShoot", "link": "https://stackoverflow.com/users/6560549/supershoot"}, "edited": false, "score": 0, "creation_date": 1542845080, "post_id": 53422011, "comment_id": 93718815, "body": "@SuperShoot I understand, but this approach lets the Event creation  more standard and cleaner way with code duplication every time a new Event is created."}], "tags": [], "owner": {"reputation": 169, "user_id": 3728861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/821065bf1759b11f65fab383015da187?s=128&d=identicon&r=PG&f=1", "display_name": "tooTired", "link": "https://stackoverflow.com/users/3728861/tootired"}, "is_accepted": false, "score": 1, "last_activity_date": 1542843918, "creation_date": 1542843918, "answer_id": 53422011, "question_id": 53421156, "link": "https://stackoverflow.com/questions/53421156/insert-column-based-on-related-column-value/53422011#53422011", "title": "Insert column based on related column value", "body": "<p>SQLAlchemy adds an implicit constructor to all model classes which accepts keyword arguments for all its columns and relationships. You can override this and pass the kwargs without unusedCapacity and get the room capacity in the constructor:</p>\n\n<pre><code>class Event(db.Model):\n    # ...\n    #kwargs without unusedCapacity\n    def __init__(**kwargs):\n        room = Room.query.get(kwargs.get(room_id))\n        super(Event, self).__init__(unusedCapacity = room.capacity - kwargs.get(attendance), **kwargs)\n\n\n#Create new event normally\nevent = Event(id = 1, attendance = 1, room_id = 1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6911, "user_id": 6560549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OQgD.jpg?s=128&g=1", "display_name": "SuperShoot", "link": "https://stackoverflow.com/users/6560549/supershoot"}, "edited": false, "score": 0, "creation_date": 1542889450, "post_id": 53424865, "comment_id": 93735741, "body": "WRT the <code>as_scalar()</code> method, the subquery seemed to work on MySQL irrespective of whether that was executed on the query or not which has me a little confused as to when it needs to be applied. Good point about not holding value until flush, I guess it would boil down to application specifics as to whether the second round trip to the db was worth it to have the value immediately on hand."}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "reply_to_user": {"reputation": 6911, "user_id": 6560549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OQgD.jpg?s=128&g=1", "display_name": "SuperShoot", "link": "https://stackoverflow.com/users/6560549/supershoot"}, "edited": false, "score": 1, "creation_date": 1542890187, "post_id": 53424865, "comment_id": 93736113, "body": "I have a faint memory of seeing somewhere \u2013 either in the docs or here on SO \u2013 a mention that <code>as_scalar()</code> or <code>label()</code> is unnecessary in some contexts where it is more or less implied that you want a scalar subquery. Should try and look it up in order to be sure. I think that that particular case was about equality comparison between a column and a subquery."}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "reply_to_user": {"reputation": 6911, "user_id": 6560549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OQgD.jpg?s=128&g=1", "display_name": "SuperShoot", "link": "https://stackoverflow.com/users/6560549/supershoot"}, "edited": false, "score": 0, "creation_date": 1542890634, "post_id": 53424865, "comment_id": 93736385, "body": "And here it is, or at least one of them: <a href=\"https://stackoverflow.com/a/6325582/2681632\">stackoverflow.com/a/6325582/2681632</a>. From &#39;11, no less :D"}, {"owner": {"reputation": 6911, "user_id": 6560549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OQgD.jpg?s=128&g=1", "display_name": "SuperShoot", "link": "https://stackoverflow.com/users/6560549/supershoot"}, "edited": false, "score": 0, "creation_date": 1542891674, "post_id": 53424865, "comment_id": 93736967, "body": "Will have a read - I appreciate you going to the trouble! Cheers."}], "tags": [], "owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "is_accepted": true, "score": 2, "last_activity_date": 1542889004, "last_edit_date": 1542889004, "creation_date": 1542867194, "answer_id": 53424865, "question_id": 53421156, "link": "https://stackoverflow.com/questions/53421156/insert-column-based-on-related-column-value/53424865#53424865", "title": "Insert column based on related column value", "body": "<p>As noted in the comments by @SuperShoot, a query on insert can calculate the unused capacity in the database without having to fetch first. An explicit constructor, such as shown by @tooTired, could pass a scalar subquery as <code>unusedCapacity</code>:</p>\n\n<pre><code>class Event(db.Model):\n    ...\n    def __init__(self, **kwgs):\n        if 'unusedCapacity' not in kwgs:\n            kwgs['unusedCapacity'] = \\\n                db.select([Room.capacity - kwgs['attendance']]).\\\n                where(Room.id == kwgs['room_id']).\\\n                as_scalar()\n        super().__init__(**kwgs)\n</code></pre>\n\n<p>Though it is possible to use <a href=\"https://docs.sqlalchemy.org/en/latest/core/defaults.html#client-invoked-sql-expressions\" rel=\"nofollow noreferrer\">client-invoked SQL expressions</a> as defaults, I'm not sure how one could refer to the values to be inserted in the expression without using a <a href=\"https://docs.sqlalchemy.org/en/latest/core/defaults.html#context-sensitive-default-functions\" rel=\"nofollow noreferrer\">context-sensitive default function</a>, but that did not quite work out: the scalar subquery was not inlined and SQLAlchemy tried to pass it using placeholders instead.</p>\n\n<p>A downside of the <code>__init__</code> approach is that you cannot perform bulk inserts that would handle unused capacity using the table created for the model as is, but will have to perform a manual query that does the same.</p>\n\n<p>Another thing to look out for is that until a flush takes place the <code>unusedCapacity</code> attribute of a new <code>Event</code> object holds the SQL expression object, not the actual value. The solution by @tooTired is more transparent in this regard, since a new <code>Event</code> object will hold the numeric value of unused capacity from the get go.</p>\n"}], "owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 53424865, "answer_count": 2, "score": 1, "last_activity_date": 1542889004, "creation_date": 1542838292, "question_id": 53421156, "link": "https://stackoverflow.com/questions/53421156/insert-column-based-on-related-column-value", "title": "Insert column based on related column value", "body": "<p>This seems like a real beginner question, but I'm having trouble finding a simple answer. I have simplified this down to just the bare bones with a simple data model representing a one-to-many relationship:</p>\n\n<pre><code>class Room(db.Model):\n    __tablename__ = 'rooms'\n    id        = db.Column(db.Integer, primary_key=True)\n    name      = db.Column(db.String(128), unique=True)\n    capacity  = db.Column(db.Integer)\n    events    = db.relationship('Event', backref='room')\n\n\nclass Event(db.Model):\n    __tablename__ = 'counts'\n    id               = db.Column(db.Integer, primary_key=True)\n    unusedCapacity   = db.Column(db.Integer)\n    attendance       = db.Column(db.Integer)\n    room_id          = db.Column(db.Integer, db.ForeignKey('rooms.id'))\n</code></pre>\n\n<p><code>Event.unusedCapacity</code> is calculated as <code>Room.capacity - Event.attendance</code>, but I need to store the value in the column \u2014 <code>Room.capacity</code> may change over time, but the <code>Event.unusedCapacity</code> needs to reflect the actual unused capacity at the time of the Event.</p>\n\n<p>I am currently querying the Room and then creating the event:</p>\n\n<pre><code>room = Room.query.get(room_id) # using Flask sqlAlchemy\nevent = event(unusedCapacity = room.capacity - attendance, ...etc) \n</code></pre>\n\n<p>My question is: is there a more efficient way to do this in one step?</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1542841544, "post_id": 53421125, "comment_id": 93717755, "body": "If you must start with <code>np.matrix</code> consider using <code>matrix[...].A1</code> instead of <code>.flat</code> if you want a 1d array."}, {"owner": {"reputation": 3408, "user_id": 6373357, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a3b870102aa2df81c64374b893f601ba?s=128&d=identicon&r=PG&f=1", "display_name": "jacobcan118", "link": "https://stackoverflow.com/users/6373357/jacobcan118"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1542851099, "post_id": 53421125, "comment_id": 93720021, "body": "any reason for using .A1 is better than .flat?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1542851967, "post_id": 53421125, "comment_id": 93720203, "body": "<code>,A1</code> is an array, so you won&#39;t have this &#39;used-up iterator&#39; problem.  In time tests on your <code>matrix</code> <code>set(matrix.A1)</code> is a little slower."}], "answers": [{"tags": [], "owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "is_accepted": false, "score": 3, "last_activity_date": 1542838925, "last_edit_date": 1542838925, "creation_date": 1542838387, "answer_id": 53421174, "question_id": 53421125, "link": "https://stackoverflow.com/questions/53421125/how-to-use-to-concatenate-multiple-numpy-flatiter-object/53421174#53421174", "title": "How to use &quot;|&quot; to concatenate multiple numpy.flatiter object", "body": "<p>The first call of <code>set(rnum)</code> in <code>print(set(rnum))</code> consumes the iterator <code>rnum</code>.  When you use <code>set(rnum)</code> again in <code>set(rnum) | set(cnum) | set(snum)</code>, there are no more values left in the iterator <code>rnum</code>, so <code>set(rnum)</code> is the empty set.</p>\n\n<p>Here's a more direct demonstration:</p>\n\n<pre><code>In [621]: matrix = np.matrix(np.arange(36).reshape(6, 6))\n\nIn [622]: rnum =  matrix[1, :].flat\n\nIn [623]: set(rnum)\nOut[623]: {6, 7, 8, 9, 10, 11}\n\nIn [624]: set(rnum)\nOut[624]: set()\n</code></pre>\n\n<p>Instead of using <code>rnum</code>, you could create another iterator by repeating <code>matrix[1, :].flat</code>:</p>\n\n<pre><code>In [625]: set(matrix[1, :].flat)\nOut[625]: {6, 7, 8, 9, 10, 11}\n</code></pre>\n\n<p>Alternatively, skip the use of <code>numpy.matrix</code> and iterators, and just index into a regular NumPy array:</p>\n\n<pre><code>In [639]: a = np.arange(36).reshape(6, 6)\n\nIn [640]: set(a[1,:])\nOut[640]: {6, 7, 8, 9, 10, 11}\n\nIn [641]: set(a[:,1])\nOut[641]: {1, 7, 13, 19, 25, 31}\n\nIn [642]: set(a[2:4, 2:4].ravel())\nOut[642]: {20, 21, 14, 15}\n</code></pre>\n"}], "owner": {"reputation": 3408, "user_id": 6373357, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a3b870102aa2df81c64374b893f601ba?s=128&d=identicon&r=PG&f=1", "display_name": "jacobcan118", "link": "https://stackoverflow.com/users/6373357/jacobcan118"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542838925, "creation_date": 1542838077, "question_id": 53421125, "link": "https://stackoverflow.com/questions/53421125/how-to-use-to-concatenate-multiple-numpy-flatiter-object", "title": "How to use &quot;|&quot; to concatenate multiple numpy.flatiter object", "body": "<p>Any one know why I cannot use \"|\" to concatenate multiple numpy.flatiter object after converting it inot set? I try to look for all display number \nfrom all row 11, all column 1 and section from (2,2) to (3,3) if I use np.concatenate I can get the right answer but after I use \"|\" I have empty set? or if there is a better way to write it?</p>\n\n<pre><code>import numpy as np\nmatrix = np.matrix(np.arange(36).reshape(6, 6))\nrnum =  matrix[1, :].flat\ncnum =  matrix[:, 1].flat\nsnum = matrix[2:4, 2:4].flat\nprint(matrix)\nprint(rnum)\nprint(set(rnum))\nprint(set(cnum))\nprint(set(snum))\nprint(set(np.concatenate((rnum, cnum, snum))))\nprint(set(rnum) | set(cnum) | set(snum))\n#[[ 0  1  2  3  4  5]\n# [ 6  7  8  9 10 11]\n# [12 13 14 15 16 17]\n# [18 19 20 21 22 23]\n# [24 25 26 27 28 29]\n# [30 31 32 33 34 35]]\n#&lt;numpy.flatiter object at 0x7faf52966c00&gt;\n#{6, 7, 8, 9, 10, 11}\n#{1, 7, 13, 19, 25, 31}\n#{20, 21, 14, 15}\n#{1, 6, 7, 8, 9, 10, 11, 13, 14, 15, 19, 20, 21, 25, 31} =&gt; expect result\n#set() =&gt; why?\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1542837997, "post_id": 53421101, "comment_id": 93716605, "body": "You can&#39;t, really. Trying to make things immutable is pretty tough in Python, unless you want to write a C-extension. Here, <code>list</code> objects are always mutable, you could define an &quot;immutable&quot; wrapper perhaps. Note, you can simply just not define a setter and it will throw an error"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10445685"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1542838342, "post_id": 53421101, "comment_id": 93716705, "body": "@juanpa.arrivillaga Is it OK to use tuples inside my class then? I will justuse list(self.__x) every time I want it to be list. Or it&#39;s a bad practice?"}, {"owner": {"reputation": 513, "user_id": 8293226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ccfWx.png?s=128&g=1", "display_name": "mustachioed", "link": "https://stackoverflow.com/users/8293226/mustachioed"}, "edited": false, "score": 0, "creation_date": 1542838344, "post_id": 53421101, "comment_id": 93716706, "body": "How about converting the list to a tuple?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1542838350, "post_id": 53421101, "comment_id": 93716707, "body": "You can, of course, just return a copy of your list as well, and then <code>.append</code> simply won&#39;t matter"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1542838378, "post_id": 53421101, "comment_id": 93716717, "body": "I think you are worrying to much about something you can&#39;t really solve. I can &quot;mutate&#39; your &quot;immutable&quot; class quite easy. <code>c = C(); c._C__x = [0, 1, 2]</code> remember, Python doesn&#39;t have private/public. In the end, you are relying on convention"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1542838476, "post_id": 53421101, "comment_id": 93716756, "body": "@ttt whether or not tuples are suitable substitutes for lists is for you to decide. Why are you using a list right now?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10445685"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1542838819, "post_id": 53421101, "comment_id": 93716881, "body": "@juanpa.arrivillaga Because I change it. I can append and remove someone from this list, but when I do it, I must do the same changes in my database. So I want to make my own &quot;setter-like&quot; method"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1542838866, "post_id": 53421101, "comment_id": 93716898, "body": "@ttt well then use a list and return a copy of it, or a tuple if you&#39;d prefer, but a copy would work <code>self._x.copy()</code>"}, {"owner": {"reputation": 7062, "user_id": 771663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/840a23538ab9815dd5d7bef1ab45c586?s=128&d=identicon&r=PG", "display_name": "Massimiliano", "link": "https://stackoverflow.com/users/771663/massimiliano"}, "edited": false, "score": 0, "creation_date": 1542840828, "post_id": 53421101, "comment_id": 93717517, "body": "@ttt  <b>Because I change it. I can append and remove someone from this list, but when I do it, I must do the same changes in my database. So I want to make my own &quot;setter-like&quot; method</b>  If those are your needs you might want to have a look into <code>collections.abc.MutableSequence</code> and implement your custom list-like class."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10445685"}, "reply_to_user": {"reputation": 7062, "user_id": 771663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/840a23538ab9815dd5d7bef1ab45c586?s=128&d=identicon&r=PG", "display_name": "Massimiliano", "link": "https://stackoverflow.com/users/771663/massimiliano"}, "edited": false, "score": 0, "creation_date": 1542841251, "post_id": 53421101, "comment_id": 93717649, "body": "@Massimiliano Sounds interesting! But I think returning a tuple will completely solve my problem. I will just define my own append_x() and remove_x() methods"}], "answers": [{"comments": [{"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 0, "creation_date": 1542839001, "post_id": 53421225, "comment_id": 93716945, "body": "(There&#39;s also <code>copy.deepcopy</code>, but not worth the effort and expensive if called with every attribute access.)"}, {"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1542839177, "post_id": 53421225, "comment_id": 93717006, "body": "@juanpa.arrivillaga not for lists with mutable inner objects, such as lists of lists."}], "tags": [], "owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "is_accepted": true, "score": 2, "last_activity_date": 1542839945, "last_edit_date": 1542839945, "creation_date": 1542838684, "answer_id": 53421225, "question_id": 53421101, "link": "https://stackoverflow.com/questions/53421101/how-to-prevent-class-fieldlist-change-in-python/53421225#53421225", "title": "How to prevent class field(list) change in Python?", "body": "<p>In the final analysis, you cannot protect your objects from inspection and manipulation.\nAlso, always ask yourself \"from whom, exactly?\" when you want to \"protect\" data.</p>\n\n<p>Sometimes it's just not worth the effort to code around users not reading the documentation.</p>\n\n<p>That being said, you could consider <code>return tuple(self.__x)</code> in the getter.\nOn the other hand, if <code>__x</code> contains other mutable objects, that would not prevent a user from manipulating those inner objects. (<code>return list(self.__x)</code> would also return a shallow copy of the data, but with less implicit \"hey, I'm supposed to be immutable!\" signaling.)</p>\n\n<p>Something you should definitely consider is to change <code>self.__x = xx</code> to <code>self.__x = list(xx)</code> in the <code>__init__</code> method, such that users doing</p>\n\n<pre><code>var = []\nc = C(var)\n</code></pre>\n\n<p>can't \"easily\" (or by mistake, and again, there could be mutable inner objects) change the state of <code>c</code> by mutating <code>var</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 0, "creation_date": 1542839039, "post_id": 53421277, "comment_id": 93716959, "body": "Sure, but <code>C</code> could rely on <code>_tuple</code> being mutable internally."}, {"owner": {"reputation": 7062, "user_id": 771663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/840a23538ab9815dd5d7bef1ab45c586?s=128&d=identicon&r=PG", "display_name": "Massimiliano", "link": "https://stackoverflow.com/users/771663/massimiliano"}, "reply_to_user": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 0, "creation_date": 1542839168, "post_id": 53421277, "comment_id": 93717002, "body": "@timgeb Not a request I inferred from the OP. A class like that (immutable) probably makes sense if a mutating operation returns a different instance."}], "tags": [], "owner": {"reputation": 7062, "user_id": 771663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/840a23538ab9815dd5d7bef1ab45c586?s=128&d=identicon&r=PG", "display_name": "Massimiliano", "link": "https://stackoverflow.com/users/771663/massimiliano"}, "is_accepted": false, "score": 0, "last_activity_date": 1542839985, "last_edit_date": 1542839985, "creation_date": 1542838981, "answer_id": 53421277, "question_id": 53421101, "link": "https://stackoverflow.com/questions/53421101/how-to-prevent-class-fieldlist-change-in-python/53421277#53421277", "title": "How to prevent class field(list) change in Python?", "body": "<p>The simplest approach would be to accept an iterable on <code>__init__</code> and turn it to a tuple internally:</p>\n\n<pre><code>class C(object):\n    def __init__(self, iterable):\n        self._tuple = tuple(iterable)\n\n    @property\n    def x(self):\n        return self._tuple\n\n    @x.setter\n    def x(self, value):\n      raise RuntimeError('can\\'t reset the x attribute.')\n\nc = C([1, 2, 3])\n# c.x = 'a' Will raise 'RuntimeError: can't reset the x attribute.'\nprint(c.x)\n</code></pre>\n\n<p>A design like this one makes any object instantiated from the class immutable, so that mutating operations should <strong>return new objects instead of changing the state of the current one</strong>. </p>\n\n<p>Let's say for instance that you want to implement a function that increment by one each item in <code>self.x</code>. With this approach you need to write something similar to:</p>\n\n<pre><code>def increment_by_one(c):\n  return C(t+1 for t in c.x)\n</code></pre>\n\n<p>As there's a cost associated with creating and destroying objects the trade-offs between this approach (which prevents mutation of the <code>x</code> attribute) and the one suggested by @timgeb should be evaluated on your use-case.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10445685"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 0, "accepted_answer_id": 53421225, "answer_count": 2, "score": 2, "last_activity_date": 1542839985, "creation_date": 1542837886, "last_edit_date": 1542839318, "question_id": 53421101, "link": "https://stackoverflow.com/questions/53421101/how-to-prevent-class-fieldlist-change-in-python", "title": "How to prevent class field(list) change in Python?", "body": "<p>For example, I have a class with a field <code>__x</code>, which is a list:</p>\n\n<pre><code>class C():\n    def __init__(self, xx):\n        self.__x = xx\n    @property\n    def x(self):\n        return self.__x\n    @x.setter\n    def x(self, xx):\n        raise Exception(\"Attempt to change an immutable field\")\n</code></pre>\n\n<p>I can prevent changes such as these:</p>\n\n<pre><code>c = C([1,2,3])\nc.x = [3,2,1]\n</code></pre>\n\n<p>But how can I prevent a change such as this?</p>\n\n<pre><code>c.x.append(4)\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "keras", "neural-network"], "comments": [{"owner": {"reputation": 2583, "user_id": 2846062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/32362fca75c20824e7db578de0d7519c?s=128&d=identicon&r=PG&f=1", "display_name": "Milo Lu", "link": "https://stackoverflow.com/users/2846062/milo-lu"}, "edited": false, "score": 0, "creation_date": 1542850102, "post_id": 53421050, "comment_id": 93719826, "body": "Where is the model?"}, {"owner": {"reputation": 627, "user_id": 10594993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/198d63755e2c1bca0d6ef8a453102581?s=128&d=identicon&r=PG&f=1", "display_name": "Noran", "link": "https://stackoverflow.com/users/10594993/noran"}, "reply_to_user": {"reputation": 2583, "user_id": 2846062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/32362fca75c20824e7db578de0d7519c?s=128&d=identicon&r=PG&f=1", "display_name": "Milo Lu", "link": "https://stackoverflow.com/users/2846062/milo-lu"}, "edited": false, "score": 0, "creation_date": 1542869526, "post_id": 53421050, "comment_id": 93724799, "body": "I have added the model .. please check it .."}], "owner": {"reputation": 627, "user_id": 10594993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/198d63755e2c1bca0d6ef8a453102581?s=128&d=identicon&r=PG&f=1", "display_name": "Noran", "link": "https://stackoverflow.com/users/10594993/noran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 324, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1543008016, "creation_date": 1542837556, "last_edit_date": 1543008016, "question_id": 53421050, "link": "https://stackoverflow.com/questions/53421050/how-to-let-predict-generator-make-ordered-prediction-in-deep-learning", "title": "How to let predict_generator make ordered prediction in deep learning?", "body": "<p>I am designing a deep learning model to classify images and I am using the following code to check the predication performance. It compares the images' labels with the predicted classes and then returns the error predication. </p>\n\n<p>I was using sequential model, and this code was working fine. But, now it does not work fine.. <code>predict_generator</code> changes the order of the images. (predict_classes and validation_generator are not in the same order)</p>\n\n<p>I want to make the prediction in the same order of the images in <code>validation_generator</code>, Do you know how can I do that??   </p>\n\n<pre><code>validation_generator = validation_datagen.flow_from_directory(\n            validation_dir,\n            target_size=(image_size, image_size),\n            batch_size=val_batchsize,\n            class_mode='categorical',\n            shuffle=False)\n\n    # Get the filenames from the generator\n    fnames = validation_generator.filenames\n\n    # Get the ground truth from generator\n    ground_truth = validation_generator.classes\n\n    # Get the label to class mapping from the generator\n    label2index = validation_generator.class_indices\n\n    # Getting the mapping from class index to class label\n    idx2label = dict((v,k) for k,v in label2index.items())\n\n    # Get the predictions from the model using the generator\n    predictions = model.predict_generator(validation_generator, steps=validation_generator.samples/validation_generator.batch_size,verbose=1)\n    predicted_classes = np.argmax(predictions,axis=1)\n\n    errors = np.where(predicted_classes != ground_truth)[0]\n    print(\"No of errors = {}/{}\".format(len(errors),validation_generator.samples))\n\n    # Show the errors\n    for i in range(len(errors)):\n        pred_class = np.argmax(predictions[errors[i]])\n        pred_label = idx2label[pred_class]\n\n        title = 'Original label:{}, Prediction :{}, confidence : {:.3f}'.format(\n            fnames[errors[i]].split('/')[0],\n            pred_label,\n            predictions[errors[i]][pred_class])\n\n        original = load_img('{}/{}'.format(validation_dir,fnames[errors[i]]))\n        plt.figure(figsize=[7,7])\n        plt.axis('off')\n        plt.title(title)\n        plt.imshow(original)\n        plt.show()\n</code></pre>\n\n<p>The model code </p>\n\n<pre><code>from keras.engine import  Model\nvgg16_model = keras.applications.vgg16.VGG16()\n\ninput_layer2 = vgg16_model.input\nvgg16_model.get_layer(index = 0).name = 'input2'\n\nlast_layer2 = vgg16_model.get_layer('block4_pool').output\n\nx = Conv2D(512, (3, 3), activation='relu', name='block5_conv1', padding='same')(last_layer2)\nx = BatchNormalization(name='bn1')(x)\nx = Conv2D(512, (3, 3), activation='relu', name='block5_conv2', padding='same')(x)\nx = BatchNormalization(name='bn2')(x)\nx = Conv2D(512, (3, 3), activation='relu', name='block5_conv3', padding='same')(x)\nx = BatchNormalization(name='bn3')(x)\nx = MaxPooling2D(pool_size=(2, 2), strides=(2, 2), name = 'block5_pool')(x)\nx = Flatten(name = 'flatten')(x)\nx = Dense(4096, activation='relu', name='fc1')(x)\nx = Dense(4096, activation='relu', name='fc2')(x)\nout2 = Dropout(0.3, name='dropout1')(x)\n\n#Classification layer\noutput_layer2 = Dense(class_no, activation='softmax', name='prediction')(out2) \nvgg16_face_model = Model(input_layer2, output_layer2)\n\nvgg16_face_model.trainable = True\nset_trainable = False\nfor layer in vgg16_face_model.layers:\n    if layer.name == 'block5_conv1':\n        set_trainable = True\n    if set_trainable:\n        layer.trainable = True\n    else:\n        layer.trainable = False\n</code></pre>\n\n<p>Please Help me.. </p>\n"}, {"tags": ["python", "pandas", "loops", "dictionary", "dataframe"], "comments": [{"owner": {"reputation": 3746, "user_id": 3704368, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1585b68aa4256705af091781aa50497a?s=128&d=identicon&r=PG&f=1", "display_name": "min2bro", "link": "https://stackoverflow.com/users/3704368/min2bro"}, "edited": false, "score": 0, "creation_date": 1542857301, "post_id": 53421049, "comment_id": 93721260, "body": "Please share some sample data to work upon"}, {"owner": {"reputation": 753, "user_id": 7472392, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1436682073022717/picture?type=large", "display_name": "Yun Tae Hwang", "link": "https://stackoverflow.com/users/7472392/yun-tae-hwang"}, "reply_to_user": {"reputation": 3746, "user_id": 3704368, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1585b68aa4256705af091781aa50497a?s=128&d=identicon&r=PG&f=1", "display_name": "min2bro", "link": "https://stackoverflow.com/users/3704368/min2bro"}, "edited": false, "score": 0, "creation_date": 1542859208, "post_id": 53421049, "comment_id": 93721680, "body": "I edited the question with the sample data"}, {"owner": {"reputation": 3746, "user_id": 3704368, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1585b68aa4256705af091781aa50497a?s=128&d=identicon&r=PG&f=1", "display_name": "min2bro", "link": "https://stackoverflow.com/users/3704368/min2bro"}, "edited": false, "score": 0, "creation_date": 1542859769, "post_id": 53421049, "comment_id": 93721820, "body": "What&#39;s your expected output? Add that as well in the Question"}, {"owner": {"reputation": 753, "user_id": 7472392, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1436682073022717/picture?type=large", "display_name": "Yun Tae Hwang", "link": "https://stackoverflow.com/users/7472392/yun-tae-hwang"}, "reply_to_user": {"reputation": 3746, "user_id": 3704368, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1585b68aa4256705af091781aa50497a?s=128&d=identicon&r=PG&f=1", "display_name": "min2bro", "link": "https://stackoverflow.com/users/3704368/min2bro"}, "edited": false, "score": 0, "creation_date": 1542860212, "post_id": 53421049, "comment_id": 93721929, "body": "done :) Thank you"}], "answers": [{"comments": [{"owner": {"reputation": 753, "user_id": 7472392, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1436682073022717/picture?type=large", "display_name": "Yun Tae Hwang", "link": "https://stackoverflow.com/users/7472392/yun-tae-hwang"}, "edited": false, "score": 0, "creation_date": 1542861110, "post_id": 53423862, "comment_id": 93722162, "body": "i only get one excel sheet with the last color. I think it is overwriting eachother"}, {"owner": {"reputation": 2360, "user_id": 9041710, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9wtH.jpg?s=128&g=1", "display_name": "vlizana", "link": "https://stackoverflow.com/users/9041710/vlizana"}, "reply_to_user": {"reputation": 753, "user_id": 7472392, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1436682073022717/picture?type=large", "display_name": "Yun Tae Hwang", "link": "https://stackoverflow.com/users/7472392/yun-tae-hwang"}, "edited": false, "score": 0, "creation_date": 1542861205, "post_id": 53423862, "comment_id": 93722193, "body": "Maybe it&#39;s a better idea to save them in different files, something like <code>writing_in_excel(&#39;{}_file.xlsx&#39;.format(color_name), group, color_name)</code>"}, {"owner": {"reputation": 2360, "user_id": 9041710, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9wtH.jpg?s=128&g=1", "display_name": "vlizana", "link": "https://stackoverflow.com/users/9041710/vlizana"}, "reply_to_user": {"reputation": 753, "user_id": 7472392, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1436682073022717/picture?type=large", "display_name": "Yun Tae Hwang", "link": "https://stackoverflow.com/users/7472392/yun-tae-hwang"}, "edited": false, "score": 0, "creation_date": 1542861264, "post_id": 53423862, "comment_id": 93722213, "body": "or defining the writer outside the function."}, {"owner": {"reputation": 753, "user_id": 7472392, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1436682073022717/picture?type=large", "display_name": "Yun Tae Hwang", "link": "https://stackoverflow.com/users/7472392/yun-tae-hwang"}, "edited": false, "score": 0, "creation_date": 1542861508, "post_id": 53423862, "comment_id": 93722285, "body": "got it. Thank you so much"}], "tags": [], "owner": {"reputation": 2360, "user_id": 9041710, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9wtH.jpg?s=128&g=1", "display_name": "vlizana", "link": "https://stackoverflow.com/users/9041710/vlizana"}, "is_accepted": true, "score": 4, "last_activity_date": 1542860553, "creation_date": 1542860553, "answer_id": 53423862, "question_id": 53421049, "link": "https://stackoverflow.com/questions/53421049/looping-through-a-dictionary-of-dataframes-in-python/53423862#53423862", "title": "looping through a dictionary of dataframes in python", "body": "<p>You can just do</p>\n\n<pre><code>for color_name, group in df.groupby('favorite_color'):\n    writing_in_excel('file_name.xlsx', group, color_name)\n</code></pre>\n"}], "owner": {"reputation": 753, "user_id": 7472392, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1436682073022717/picture?type=large", "display_name": "Yun Tae Hwang", "link": "https://stackoverflow.com/users/7472392/yun-tae-hwang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1308, "favorite_count": 0, "accepted_answer_id": 53423862, "answer_count": 1, "score": 1, "last_activity_date": 1542860553, "creation_date": 1542837549, "last_edit_date": 1542860198, "question_id": 53421049, "link": "https://stackoverflow.com/questions/53421049/looping-through-a-dictionary-of-dataframes-in-python", "title": "looping through a dictionary of dataframes in python", "body": "<p>First of all, I wrote this function:</p>\n\n<pre><code>def writing_in_excel(path, df, sheet_name):\n    writer = pd.ExcelWriter(path, datetime_format='m/d/yyyy')\n    df.to_excel(writer, sheet_name = sheet_name, index=False, freeze_panes = (0,1))\n    writer.save()\n    writer.close()\n</code></pre>\n\n<p>Then, I have a dictionary of dataframes:</p>\n\n<pre><code>import pandas as pd    \n\nemployee = {'EmployeeID' : [0,1,2,3,4,5,6,7,8,9],\n     'FirstName' : ['a','b','c','d','e','f','g','h','i','j'],\n     'LastName' : ['a','b','c','d','e','f','g','h','i','j'],\n     'favorite_color' : ['red','blue','green','yellow','red','red','green','blue','green','red']}\n\ndf = pd.DataFrame(employee)\n\nby_color_df_dict = dict(tuple(df.groupby('favorite_color')))))\n</code></pre>\n\n<p>In 'favorite_color', there are 4 different values, I wanted to create separate dataframes by the 4 values in 'favorite_color'</p>\n\n<p>If you run that code, you will get a dictionary of dataframes as a result.  I want to loop through the dictionary and save each dataframes as an excelfile using the function that I defined above.</p>\n\n<p>I think I have to start with:</p>\n\n<pre><code>for key, value in by_color_df_dict:\n</code></pre>\n\n<p>but I can not proceed further with my shallow knowledge.</p>\n\n<p>Please help me with this.</p>\n"}, {"tags": ["python", "arrays", "csv", "dictionary", "append"], "answers": [{"tags": [], "owner": {"reputation": 664, "user_id": 8267726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e8aeb3d0091a49e48cf9bd6c27a66b7?s=128&d=identicon&r=PG&f=1", "display_name": "andersource", "link": "https://stackoverflow.com/users/8267726/andersource"}, "is_accepted": false, "score": 0, "last_activity_date": 1542838647, "last_edit_date": 1542838647, "creation_date": 1542838103, "answer_id": 53421126, "question_id": 53421032, "link": "https://stackoverflow.com/questions/53421032/issue-extracting-data-from-csv-and-appending-to-dict/53421126#53421126", "title": "Issue Extracting Data from CSV and Appending to Dict", "body": "<p>I believe the problem stems from this initialization of the dictionary:</p>\n\n<pre><code>dict.fromkeys(keylist, [])\n</code></pre>\n\n<p>The same list object is shared among all the dictionary's keys, and all items get appended to the same list.\nThe following initialization achieved the correct result:</p>\n\n<pre><code>t.append({k: [] for k in keylist})\n</code></pre>\n\n<p>Edit: a simple example to illustrate what's happening:</p>\n\n<pre><code>a = b = []\na.append(3)\nb.append('foo')\na\n</code></pre>\n\n<p>gives:</p>\n\n<pre><code>[3, 'foo']\n</code></pre>\n\n<p>Because while a and b are different variables, they are referring to the same object. Likewise in your example, the different keys in the dictionary all refer to the same list object passed in the <code>fromkeys</code> method.</p>\n"}, {"tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": true, "score": 1, "last_activity_date": 1542864250, "last_edit_date": 1542864250, "creation_date": 1542852364, "answer_id": 53422919, "question_id": 53421032, "link": "https://stackoverflow.com/questions/53421032/issue-extracting-data-from-csv-and-appending-to-dict/53422919#53422919", "title": "Issue Extracting Data from CSV and Appending to Dict", "body": "<p><code>dict.fromkeys</code> initializes with the same value for all keys, so they all get the same instance of the list.  It's not meant to initialize with mutable objects.</p>\n\n<p>Instead, use <code>collections.defaultdict</code> to create a new list if a key doesn't yet exist:</p>\n\n<pre><code>import csv\nfrom collections import defaultdict\n\nkeylist = ['ID', 'RN', 'PD']\nmyID = 0\nt = [defaultdict(list)]\n\nwith open('dataset.csv',newline='') as csv_file:            # Use newline='' per csv docs.\n    csv_reader = csv.reader(csv_file,skipinitialspace=True) # handles spaces after commas.\n    for row in csv_reader:\n        for col,value in enumerate(row):\n            t[myID][keylist[col]].append(value)\n\nprint(t[myID])import csv\nfrom collections import defaultdict\nkeylist = ['ID', 'RN', 'PD']\nmyID = 0\nt = [defaultdict(list)]\n\nwith open('dataset.csv',newline='') as csv_file:\n    csv_reader = csv.reader(csv_file,skipinitialspace=True)\n    for row in csv_reader:\n        for i,v in enumerate(row):\n            t[myID][keylist[i]].append(v)\n\nprint(t[myID])\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>defaultdict(&lt;class 'list'&gt;, {'ID': ['0', '0', '0'], 'RN': ['foo', 'foo2', 'foo3'], 'PD': ['bar', 'bar2', 'bar3']})\n</code></pre>\n\n<p>Note this still doesn't give you integers for your zeros.  You'll need more code for that.  Something like:</p>\n\n<pre><code>    for col,value in enumerate(row):\n            t[myID][keylist[col]].append(int(value) if col==0 else value)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>defaultdict(&lt;class 'list'&gt;, {'ID': [0, 0, 0], 'RN': ['foo', 'foo2', 'foo3'], 'PD': ['bar', 'bar2', 'bar3']})\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5625907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20a84c6cd239c854b65ec5230d3662b4?s=128&d=identicon&r=PG&f=1", "display_name": "zarf.snackler", "link": "https://stackoverflow.com/users/5625907/zarf-snackler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 53422919, "answer_count": 2, "score": 0, "last_activity_date": 1542864250, "creation_date": 1542837470, "question_id": 53421032, "link": "https://stackoverflow.com/questions/53421032/issue-extracting-data-from-csv-and-appending-to-dict", "title": "Issue Extracting Data from CSV and Appending to Dict", "body": "<p>I'm getting an odd result when trying to insert cells of data from a table (a CSV here but could be other tables) into a list of dictionaries.</p>\n\n<pre><code>import csv\n\nkeylist = [\"ID\", \"RN\", \"PD\"]\nmyID = 0\nt = []\nt.append(dict.fromkeys(keylist, []))\n\nwith open(\"dataset.csv\") as csv_file:\n    csv_reader = csv.reader(csv_file, delimiter=',')\n    for row in csv_reader:\n        for j in range (len(row)):\n            #printing here works as expected\n            print keylist[j], row[j]\n            #when appending to the value list the result is not as expected\n            t[myID][keylist[j]].append(row[j])\n</code></pre>\n\n<p>The unexpected result appears to append the whole row instead of just the item at row[j].</p>\n\n<p>For example if the CSV were something like:</p>\n\n<pre><code>0, \"foo\", \"bar\"\n0, \"foo2\", \"bar2\"\n0, \"foo3\", \"bar3\"\n</code></pre>\n\n<p>The result for t[0][\"ID\"] would be this:</p>\n\n<pre><code>[0, \"foo\", \"bar\", 0, \"foo2\", \"bar2\", 0, \"foo3\", \"bar3\"]\n</code></pre>\n\n<p>Instead of the expected result of:</p>\n\n<pre><code>[0, 0, 0]\n</code></pre>\n\n<p>Any help would be much appreciated.</p>\n"}, {"tags": ["python", "django", "django-rest-framework"], "answers": [{"tags": [], "owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "is_accepted": false, "score": 1, "last_activity_date": 1542840918, "creation_date": 1542840918, "answer_id": 53421587, "question_id": 53421027, "link": "https://stackoverflow.com/questions/53421027/django-rest-framework-urls-router-only-recognized-one-path/53421587#53421587", "title": "Django Rest Framework urls router only recognized one path", "body": "<p>I found the mistake (it was a very silly one). Only <code>TaskTemplateViewSet</code> was a <strong>ModelViewSet</strong>, all other where <strong>ViewSet</strong>s. As soon as I fixed it, everything worked.</p>\n"}], "owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542840918, "creation_date": 1542837397, "question_id": 53421027, "link": "https://stackoverflow.com/questions/53421027/django-rest-framework-urls-router-only-recognized-one-path", "title": "Django Rest Framework urls router only recognized one path", "body": "<p>I have the following <code>urls.py</code>:</p>\n\n<pre><code>from django.urls import path, include\nfrom rest_framework import routers\nfrom TasksManagerApp import views\n\nAPP_NAME ='TasksManagerApp'\n\nrouter = routers.DefaultRouter()\nrouter.register(r'tasks', views.TaskViewSet)\nrouter.register(r'task_templates', views.TaskTemplateViewSet)\nrouter.register(r'task_lifecycle_nodes', views.TaskLifecycleNodeViewSet)\nrouter.register(r'task_lifecycle_events', views.TaskLifecycleEventViewSet)\n\nurlpatterns = [\n    path('', include(router.urls)),\n]\n</code></pre>\n\n<p>For some reazon, DRF only recognizes one of the paths registered by the router: <code>task_templates</code>. All other paths are not recognized and rise a 404 error:</p>\n\n<pre><code>Using the URLconf defined in Attractora.urls, Django tried these URL patterns, in this order:\n\nes/ api-token-auth/\nes/ admin/\nes/ api-auth/\nes/ rosetta/\nes/ tasks_manager/ ^task_templates/$ [name='tasktemplate-list']\nes/ tasks_manager/ ^task_templates\\.(?P&lt;format&gt;[a-z0-9]+)/?$ [name='tasktemplate-list']\nes/ tasks_manager/ ^task_templates/(?P&lt;pk&gt;[^/.]+)/$ [name='tasktemplate-detail']\nes/ tasks_manager/ ^task_templates/(?P&lt;pk&gt;[^/.]+)\\.(?P&lt;format&gt;[a-z0-9]+)/?$ [name='tasktemplate-detail']\nes/ tasks_manager/ ^$ [name='api-root']\nes/ tasks_manager/ ^\\.(?P&lt;format&gt;[a-z0-9]+)/?$ [name='api-root']\n^media/(?P&lt;path&gt;.*)$\nThe current path, es/tasks_manager/tasks, didn't match any of these.\n</code></pre>\n\n<p>I don't know why the router chose that one, it is not the first one to be registered, and all other paths are correctly registered too.</p>\n\n<p>I have no idea where to look.</p>\n"}, {"tags": ["python", "sql", "flask"], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 10194329, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-h0ahnhybNFA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7o9D89Hz1ydmlj1SyBMlyw8d7KYsA/mo/photo.jpg?sz=128", "display_name": "Landon Marshall", "link": "https://stackoverflow.com/users/10194329/landon-marshall"}, "is_accepted": false, "score": 0, "last_activity_date": 1542842925, "creation_date": 1542842925, "answer_id": 53421878, "question_id": 53421026, "link": "https://stackoverflow.com/questions/53421026/sql-temporarily-snapshotting-archiving-a-query-across-flask-pages/53421878#53421878", "title": "SQL -- temporarily snapshotting/archiving a query across Flask pages", "body": "<p>Have you looked into local storage? Perhaps you could store the id in local storage when route1 is hit, and then access it when route2 is hit.</p>\n\n<pre><code>&lt;script&gt;\nlocalstorage.setItem('name', 'value')\n&lt;/script&gt;\n\n&lt;script&gt;\nvar item = localStorage.getItem('name');\n&lt;/script&gt;\n</code></pre>\n\n<p>These two scripts will allow you to store and retrieve from local storage.</p>\n"}], "owner": {"reputation": 444, "user_id": 10524382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e5df71f2cf2e3ec5183aeb94be169b?s=128&d=identicon&r=PG&f=1", "display_name": "mk2080", "link": "https://stackoverflow.com/users/10524382/mk2080"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 15, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542842925, "creation_date": 1542837391, "question_id": 53421026, "link": "https://stackoverflow.com/questions/53421026/sql-temporarily-snapshotting-archiving-a-query-across-flask-pages", "title": "SQL -- temporarily snapshotting/archiving a query across Flask pages", "body": "<p>I want to temporarily save information from one query across multiple flask routes. </p>\n\n<p>Basically, I have a function solely for queries. I use a query to fetch a random id. Using this id, I gather all other information needed for this instance. It is then used in route1 (I call it here through a dictionary). The user inputs something and then all of the info is transferred to route2 using \"url_for\". </p>\n\n<p>The program is messing up because instead of using the same id for both routes, route2 is querying again and using a different set of information based on a different id. I want the id to stay the same for both routes. I want it to change everytime route1 is refreshed or visited, but otherwise stay the same. </p>\n\n<p>Let me know any thoughts or ideas!</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def get_db():\n    random_id = db.execute(\"SELECT id FROM list ORDER BY RANDOM() LIMIT 1\").fetchone()[0]\n\n    score = query to select score using {random_id}\n    image = quesry to select score using {random_id}\n    info = {\n    'random_id': random_id,\n    'image': image,\n    'score': score\n    }\n    return info\n\n@app.route('route1')\ndata=det_db():\ndef functionA():\nuses data.get() to call information from query in dictionary \nreturn redirect(url_for('fucntionB', random_id=random_id, image=image, score=score))\n\n@app.route('route2')\ndef functionB():\ninfo=request.args\nrandom_id=info.get('random_id')\nimage=info.get('image')\nscore=info.get('score')\n</code></pre>\n"}, {"tags": ["python", "arrays"], "comments": [{"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1542837767, "post_id": 53421022, "comment_id": 93716533, "body": "<code>[int(x) for x in &#39;12345&#39;]</code> will get you the inner array."}, {"owner": {"reputation": 606, "user_id": 3811895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGbkz.png?s=128&g=1", "display_name": "vinsce", "link": "https://stackoverflow.com/users/3811895/vinsce"}, "edited": false, "score": 0, "creation_date": 1542838178, "post_id": 53421022, "comment_id": 93716654, "body": "You can create n2 with list comprehensions: <code>n2 = [[int(char_i) for char_i in char] for char in m]</code>"}, {"owner": {"reputation": 1543, "user_id": 4844311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332eea05adde1e0fd9e1ece954f61b41?s=128&d=identicon&r=PG&f=1", "display_name": "berkelem", "link": "https://stackoverflow.com/users/4844311/berkelem"}, "edited": false, "score": 0, "creation_date": 1542838655, "post_id": 53421022, "comment_id": 93716823, "body": "<code>n0 = [list(item) for item in m]; n1 = [int(i) for lst in n0 for i in lst]; n2 = [[int(i) for i in lst] for lst in n0]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 10531335, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-j9aNE-wK0Z4/AAAAAAAAAAI/AAAAAAAAAAc/vvUXFrYfmpk/photo.jpg?sz=128", "display_name": "Adath Skyderson", "link": "https://stackoverflow.com/users/10531335/adath-skyderson"}, "edited": false, "score": 0, "creation_date": 1542838149, "post_id": 53421086, "comment_id": 93716645, "body": "Could I do it without loop? Maybe lambda function"}, {"owner": {"reputation": 71, "user_id": 6548706, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gtkELfHrJ0Q/AAAAAAAAAAI/AAAAAAAAASc/zFtJs4eRtZ0/photo.jpg?sz=128", "display_name": "Dr. Greg", "link": "https://stackoverflow.com/users/6548706/dr-greg"}, "reply_to_user": {"reputation": 49, "user_id": 10531335, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-j9aNE-wK0Z4/AAAAAAAAAAI/AAAAAAAAAAc/vvUXFrYfmpk/photo.jpg?sz=128", "display_name": "Adath Skyderson", "link": "https://stackoverflow.com/users/10531335/adath-skyderson"}, "edited": false, "score": 0, "creation_date": 1542838333, "post_id": 53421086, "comment_id": 93716704, "body": "n1 = [int(x) for x in &#39;&#39;.join(m)]"}, {"owner": {"reputation": 71, "user_id": 6548706, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gtkELfHrJ0Q/AAAAAAAAAAI/AAAAAAAAASc/zFtJs4eRtZ0/photo.jpg?sz=128", "display_name": "Dr. Greg", "link": "https://stackoverflow.com/users/6548706/dr-greg"}, "reply_to_user": {"reputation": 49, "user_id": 10531335, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-j9aNE-wK0Z4/AAAAAAAAAAI/AAAAAAAAAAc/vvUXFrYfmpk/photo.jpg?sz=128", "display_name": "Adath Skyderson", "link": "https://stackoverflow.com/users/10531335/adath-skyderson"}, "edited": false, "score": 0, "creation_date": 1542838549, "post_id": 53421086, "comment_id": 93716785, "body": "funct = lambda m: [int(x) for x in &#39;&#39;.join(m)];"}], "tags": [], "owner": {"reputation": 71, "user_id": 6548706, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gtkELfHrJ0Q/AAAAAAAAAAI/AAAAAAAAASc/zFtJs4eRtZ0/photo.jpg?sz=128", "display_name": "Dr. Greg", "link": "https://stackoverflow.com/users/6548706/dr-greg"}, "is_accepted": true, "score": 0, "last_activity_date": 1542839308, "last_edit_date": 1542839308, "creation_date": 1542837763, "answer_id": 53421086, "question_id": 53421022, "link": "https://stackoverflow.com/questions/53421022/how-to-pass-from-a-binary-char-array-to-int-array-in-python/53421086#53421086", "title": "How to pass from a binary char array to int array in python?", "body": "<pre><code>m = ['0000', '0001', '0010', '0011', '1111']\nfunct = lambda m: [int(x) for x in ''.join(m)];\n</code></pre>\n\n<p>This will express list \"m\" as list \"n1\" with a lambda function as requested.</p>\n"}], "owner": {"reputation": 49, "user_id": 10531335, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-j9aNE-wK0Z4/AAAAAAAAAAI/AAAAAAAAAAc/vvUXFrYfmpk/photo.jpg?sz=128", "display_name": "Adath Skyderson", "link": "https://stackoverflow.com/users/10531335/adath-skyderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "closed_date": 1542837804, "accepted_answer_id": 53421086, "answer_count": 1, "score": -3, "last_activity_date": 1542839797, "creation_date": 1542837380, "last_edit_date": 1542839797, "question_id": 53421022, "link": "https://stackoverflow.com/questions/53421022/how-to-pass-from-a-binary-char-array-to-int-array-in-python", "closed_reason": "Duplicate", "title": "How to pass from a binary char array to int array in python?", "body": "<p>I have this array \"m\": </p>\n\n<pre><code>m = ['0000', '0001', '0010', '0011', '1111']\n</code></pre>\n\n<p>How could I use a lambda function to change its format to:</p>\n\n<pre><code>n1 = [0,0,0,0,0,0,0,1,0,0,1,0,0,0,1,1,1,1,1,1]\n</code></pre>\n\n<p>or to:</p>\n\n<pre><code>n2 = [[0,0,0,0],[0,0,0,1],[0,0,1,0],[0,0,1,1],[1,1,1,1]]\n</code></pre>\n\n<p>?</p>\n"}, {"tags": ["python", "function", "global-variables", "tic-tac-toe"], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 2, "last_activity_date": 1542837728, "creation_date": 1542837728, "answer_id": 53421079, "question_id": 53421003, "link": "https://stackoverflow.com/questions/53421003/why-is-my-function-not-updating-a-global-variable-consisting-of-nested-listspy/53421079#53421079", "title": "Why is my function not updating a global variable consisting of nested lists?(python)", "body": "<p>Assigning to a variable doesn't modify the list element that the variable value was originally copied from. You need to assign to the list element itself. Change the second loop so you get the list indexes, then you can assign to that element.</p>\n\n<pre><code>    for row in board:\n        for index, column in enumerate(row):\n            if column == 'X':\n                print(column, end=' ')\n            elif column == 'O':\n                print(column, end=' ')\n            else:\n                row[index] = '-'\n                print(row[index], end=' ')\n        print()\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 10438480, "user_type": "registered", "profile_image": "https://graph.facebook.com/1886493708053812/picture?type=large", "display_name": "Colton Fitzjarrald", "link": "https://stackoverflow.com/users/10438480/colton-fitzjarrald"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542837728, "creation_date": 1542837314, "question_id": 53421003, "link": "https://stackoverflow.com/questions/53421003/why-is-my-function-not-updating-a-global-variable-consisting-of-nested-listspy", "title": "Why is my function not updating a global variable consisting of nested lists?(python)", "body": "<p>I'm creating a function to display the variable <em>board</em>. The else portion of the function display_board is supposed to change the elements of <em>board</em> to '-'. The first if statement is for another variable of my program called locations, which works fine.\nWhen I call display_board it outputs the correct format, but it doesn't actually alter <em>board</em>, as seen when it prints <em>board</em>.\nAny ideas why it's not working? </p>\n\n<p>Sidenote: this is for an intro programming class in python, therefore, nested lists is about as advanced as my knowledge/scope of class goes.</p>\n\n<pre><code>board = [\n\n[' ', ' ', ' '],\n\n[' ', ' ', ' '],\n\n[' ', ' ', ' ']\n\n]\n\ndef display_board(board):\n    if board == locations:\n        for row in locations:\n            for column in row:\n                print(column, end=' ')\n        print()\n# This chunk below is the important code that is not altering *board*\n    else:\n        for row in board:\n            for column in row:\n                if column == 'X':\n                    print(column, end=' ')\n                elif column == 'O':\n                    print(column, end=' ')\n                else:\n                    column = '-'\n                    print(column, end=' ')\n            print()\ndisplay_board(board)\nprint(board)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>- - - \n- - - \n- - - \n</code></pre>\n\n<p>[[' ', ' ', ' '], [' ', ' ', ' '], [' ', ' ', ' ']]</p>\n"}, {"tags": ["python", "tensorflow", "deep-learning", "tensorflow-lite", "quantization"], "comments": [{"owner": {"reputation": 8823, "user_id": 10335956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/257330a2508f0360e0c81b432d25a6e0?s=128&d=identicon&r=PG&f=1", "display_name": "E.Coms", "link": "https://stackoverflow.com/users/10335956/e-coms"}, "edited": false, "score": 0, "creation_date": 1542839073, "post_id": 53420994, "comment_id": 93716973, "body": "Please add the weight code you try. Even better adding some simple examples so that people can see where the problem lies at."}, {"owner": {"reputation": 526, "user_id": 3071003, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2d1fe6473d97822cf2e2773d377d3dc5?s=128&d=identicon&r=PG&f=1", "display_name": "Nazar", "link": "https://stackoverflow.com/users/3071003/nazar"}, "edited": false, "score": 0, "creation_date": 1575573715, "post_id": 53420994, "comment_id": 104621720, "body": "Did you manage to implement the model on FPGA? I am trying to do the same, but cannot figure out proper calculations flow."}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 7691129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16ce525dcb2c3d003526a149f851cded?s=128&d=identicon&r=PG&f=1", "display_name": "SoonYau", "link": "https://stackoverflow.com/users/7691129/soonyau"}, "is_accepted": false, "score": 0, "last_activity_date": 1544618352, "creation_date": 1544618352, "answer_id": 53743231, "question_id": 53420994, "link": "https://stackoverflow.com/questions/53420994/run-quantized-tensorflow-model-on-fpga-pure-python/53743231#53743231", "title": "Run quantized tensorflow model on FPGA / pure python", "body": "<p>There are two steps you'll need to do:</p>\n\n<ol>\n<li><p>Dequantize the input, weights and bias back into full precision (or integer equivalent)</p>\n\n<p>(w-w_offset)*w_scale</p></li>\n<li><p>After the Relu, quantize the activations back into integer</p>\n\n<p>a/a_scale+a_offset</p>\n\n<p>You can probably skip step 2 that quantize-dequantize the activations with minor risk of getting different result as TFlite model. This is because Relu has no upper bound but TFlite will saturate it to a maximum value.</p></li>\n</ol>\n\n<p>You can check out my tutorials on TFlite in <a href=\"http://www.github.com/soon-yau/QNN\" rel=\"nofollow noreferrer\">my Github</a> where I have introduced the concept and training and is about to write out about inference.</p>\n"}], "owner": {"reputation": 31, "user_id": 6161357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8a79fec43aa2baa8682f17bbf8b3bba?s=128&d=identicon&r=PG&f=1", "display_name": "Damian", "link": "https://stackoverflow.com/users/6161357/damian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 722, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1544618352, "creation_date": 1542837262, "last_edit_date": 1543269107, "question_id": 53420994, "link": "https://stackoverflow.com/questions/53420994/run-quantized-tensorflow-model-on-fpga-pure-python", "title": "Run quantized tensorflow model on FPGA / pure python", "body": "<p>I have a model trained in keras which is a simple model trained on MNIST dataset.</p>\n\n<p>What I try to do is to rewrite this model and run on FPGA device.\nIn order to do this I want to fully understand how quantized model works.</p>\n\n<p>First I converted this model with post training quantization to .tflite format and UINT8 precision (<a href=\"https://www.tensorflow.org/lite/performance/post_training_quantization\" rel=\"nofollow noreferrer\">https://www.tensorflow.org/lite/performance/post_training_quantization</a>).</p>\n\n<p>So I have quantized model and accuracy is about 90%.</p>\n\n<p>Now I try to get weights from quantized model and implement it in a pure python.  I use this tool for visualization and to get model weights: <a href=\"https://github.com/lutzroeder/netron\" rel=\"nofollow noreferrer\">https://github.com/lutzroeder/netron</a>.</p>\n\n<p>Although simple python code (matrix multiplication, add bias and relu) works, the one with quantized weights doesn't work. </p>\n\n<p>So my question is how to write  a feed forward using numpy?</p>\n\n<p>My model in keras looks like this:</p>\n\n<pre><code>model = Sequential()\nmodel.add(Dense(512, input_shape=input_shape))\nmodel.add(Activation(tf.nn.relu))\nmodel.add(Dense(100))\nmodel.add(Activation(tf.nn.relu))\nmodel.add(Dense(num_classes))\nmodel.add(Activation(tf.nn.softmax))\nmodel.compile(\n    optimizer=Adam(),\n    loss='categorical_crossentropy',\n    metrics=['accuracy'],\n)\n</code></pre>\n\n<p>I converted it with TocoConverter. And it works in tensorflow.</p>\n\n<p>Then I try to write feed forward in pure python:</p>\n\n<pre><code>for img, label in zip(x_test, y_test):\n    img = img.astype('uint8')\n    total_seen += 1\n    label = tf.keras.utils.to_categorical(label, num_classes=num_classes)\n    X = img.reshape(1, 784)\n    z1 = np.dot(X, W0.T) + b0\n    a1 = relu(z1)\n    z2 = np.dot(a1, W1.T) + b1\n    a2 = relu(z2)\n    z3 = np.dot(a2, W2.T) + b2\n    prediction = np.argmax(z3)\n    label = np.argmax(label)\n    if prediction == label:\n        num_correct += 1\n</code></pre>\n\n<p>But this model accuracy is about 10%, so something goes wrong.\nHow to correct this model?</p>\n\n<p>Thanks in advance.</p>\n\n<p>Edit:\nI've read paper about quantization in tensorflow:\n<a href=\"http://openaccess.thecvf.com/content_cvpr_2018/papers/Jacob_Quantization_and_Training_CVPR_2018_paper.pdf\" rel=\"nofollow noreferrer\">http://openaccess.thecvf.com/content_cvpr_2018/papers/Jacob_Quantization_and_Training_CVPR_2018_paper.pdf</a></p>\n\n<p>And I know almost everything, I know what are S and Z values for activations and kernels. But after matrix multiplication it should be multiplied by factor: M :=S1*S2/S3.\nAnd i don't know what is S3 scale and how to get it. Because i can't see anything related in netron graph. Any suggestion?</p>\n"}, {"tags": ["python", "csv", "selenium-webdriver", "web-scraping"], "comments": [{"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 2, "creation_date": 1542837292, "post_id": 53420962, "comment_id": 93716377, "body": "This is local versus global variable, see e.g. <a href=\"https://www.geeksforgeeks.org/global-local-variables-python/\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 29, "user_id": 7406527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655fe294f8f96f4b74dea56e4b5ce96b?s=128&d=identicon&r=PG&f=1", "display_name": "BrianC", "link": "https://stackoverflow.com/users/7406527/brianc"}, "reply_to_user": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1542844432, "post_id": 53420962, "comment_id": 93718621, "body": "Thanks but forgive me for being really dense I&#39;m still not sure how to resolve this after reading that link. Am I to define the variable as global or insert &quot;df = pd.DataFrame(data) df.to_csv(&quot;jan_1&quot;) inside the code somewhere? I&#39;ve tried both with no success."}, {"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1542845196, "post_id": 53420962, "comment_id": 93718851, "body": "From your code it isn&#39;t clear where the <code>df = pd.DataFrame(data)</code> is or should be placed. Depending on the context it may be placed into the <code>for</code>-loop in <code>main</code>. As <code>scrape</code> returns the data you could there write <code>data = scrape(url)</code> and after that the <code>df = pd.DataFrame(data)</code>."}, {"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1542845398, "post_id": 53420962, "comment_id": 93718907, "body": "Unfortunately the <code>data = [main]</code> also doesn&#39;t make much sense and <code>data</code> isn&#39;t filled with the real data. Your code may have too many issues to solve them here."}], "owner": {"reputation": 29, "user_id": 7406527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655fe294f8f96f4b74dea56e4b5ce96b?s=128&d=identicon&r=PG&f=1", "display_name": "BrianC", "link": "https://stackoverflow.com/users/7406527/brianc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 214, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542837087, "creation_date": 1542837087, "question_id": 53420962, "link": "https://stackoverflow.com/questions/53420962/i-am-getting-nameerror-name-data-is-not-defined-from-selenium-webscrape-but", "title": "I am getting NameError: name &#39;data&#39; is not defined from selenium webscrape, but I have defined it in the code, can anyone see what&#39;;s wrong?", "body": "<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support import expected_conditions\nfrom selenium.webdriver.support.ui import WebDriverWait\n\ndef races(main_url):\n    driver = webdriver.Chrome()\n    driver.get(main_url)\n    driver.implicitly_wait(2)\n\n    races = driver.find_elements_by_class_name('time-location')\n    races = [race.text[:5] for race in races]\n    races = [race.replace(':', '') for race in races]\n\n    driver.close()\n\n    return races\n\nimport pandas as pd    \n\ndef scrape(url):\n    driver = webdriver.Chrome()\n    driver.get(url)\n    driver.implicitly_wait(2)\n    driver.find_elements_by_class_name('racecard-ajax-link')[1].click()\n\n    WebDriverWait(driver,5).until(expected_conditions.presence_of_element_located((By.XPATH, '//* [@id=\"tab-racecard-sectional-times\"]/div/div[1]/div[1]/div[2]/div/button')))\n</code></pre>\n\n<p>This is where I store the web scrape results to the variable data so struggling to see what is causing the error. Appreciate any help.</p>\n\n<pre><code>    data = [main]\n\n\n    for horse in driver.find_elements_by_class_name('card-item'):\n        horseName = horse.find_element_by_class_name('form-link').text\n        times = horse.find_elements_by_class_name('sectionals-time')\n        times = [time.text for time in times]\n        print('{}: {}'.format(horseName, times))\n    print()\n\n    driver.close()\n\n    return data\n\ndef main():\n    date = '6-October-2018'\n    main_url = 'http://www.attheraces.com/racecard/Wolverhampton/' + date\n    for race in races(main_url):\n        url = main_url + '/' + race\n        print(url)\n        scrape(url)\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>At this point the webscarper returns all of the data results within sublime, but it doesn't save to the csv file as it throws an NameError: name 'data' is not defined after the df = pd.DataFrame(data)</p>\n\n<pre><code>df = pd.DataFrame(data)\ndf.to_csv(\"jan_1\")\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1543, "user_id": 4844311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332eea05adde1e0fd9e1ece954f61b41?s=128&d=identicon&r=PG&f=1", "display_name": "berkelem", "link": "https://stackoverflow.com/users/4844311/berkelem"}, "edited": false, "score": 1, "creation_date": 1542837330, "post_id": 53420933, "comment_id": 93716389, "body": "Are you getting an error message? What is it?"}, {"owner": {"reputation": 39, "user_id": 9608347, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "RiesenChicken", "link": "https://stackoverflow.com/users/9608347/riesenchicken"}, "reply_to_user": {"reputation": 1543, "user_id": 4844311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332eea05adde1e0fd9e1ece954f61b41?s=128&d=identicon&r=PG&f=1", "display_name": "berkelem", "link": "https://stackoverflow.com/users/4844311/berkelem"}, "edited": false, "score": 0, "creation_date": 1542838233, "post_id": 53420933, "comment_id": 93716667, "body": "I&#39;m not getting any error message, it says that there is a diagonal even if there is not a 4 ones or 2s diagonal."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 9608347, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "RiesenChicken", "link": "https://stackoverflow.com/users/9608347/riesenchicken"}, "edited": false, "score": 0, "creation_date": 1542838122, "post_id": 53421053, "comment_id": 93716632, "body": "I changed that and sometimes it says that there is a diagonal even if is not there."}, {"owner": {"reputation": 1543, "user_id": 4844311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332eea05adde1e0fd9e1ece954f61b41?s=128&d=identicon&r=PG&f=1", "display_name": "berkelem", "link": "https://stackoverflow.com/users/4844311/berkelem"}, "reply_to_user": {"reputation": 39, "user_id": 9608347, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "RiesenChicken", "link": "https://stackoverflow.com/users/9608347/riesenchicken"}, "edited": false, "score": 1, "creation_date": 1542838800, "post_id": 53421053, "comment_id": 93716875, "body": "Could you post more of your code? It should help pinpoint where the problem is. Otherwise we&#39;re just guessing where the problem might be."}, {"owner": {"reputation": 1543, "user_id": 4844311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332eea05adde1e0fd9e1ece954f61b41?s=128&d=identicon&r=PG&f=1", "display_name": "berkelem", "link": "https://stackoverflow.com/users/4844311/berkelem"}, "reply_to_user": {"reputation": 39, "user_id": 9608347, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "RiesenChicken", "link": "https://stackoverflow.com/users/9608347/riesenchicken"}, "edited": false, "score": 0, "creation_date": 1542891393, "post_id": 53421053, "comment_id": 93736808, "body": "I posted another answer below. I initially copied the wrong code so you have a corrected version of AResem&#39;s answer as well as a correction for your own code."}], "tags": [], "owner": {"reputation": 1543, "user_id": 4844311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332eea05adde1e0fd9e1ece954f61b41?s=128&d=identicon&r=PG&f=1", "display_name": "berkelem", "link": "https://stackoverflow.com/users/4844311/berkelem"}, "is_accepted": false, "score": 0, "last_activity_date": 1542837583, "creation_date": 1542837583, "answer_id": 53421053, "question_id": 53420933, "link": "https://stackoverflow.com/questions/53420933/find-diagonals-in-a-python-matrix-using-lists/53421053#53421053", "title": "Find diagonals in a Python matrix using lists", "body": "<p>Perhaps you are not getting the right answer because of the way you parsed your conditional statements.\nYou should have</p>\n\n<pre><code>if cond1 or cond2:\n    # do something\n</code></pre>\n\n<p>with the conditions contained in parentheses <code>()</code>. At the moment only your second condition is contained in parentheses. \nTry the following:</p>\n\n<pre><code>if (matrix[i][j]==1 and matrix[i+1][j+1]==1 and matrix[i+2][j+2]==1 and matrix[i+3][j+3]==1)  or (matrix[i][j]==2 and matrix[i+1][j+1]==2 and matrix[i+2][j+2]==2 and matrix[i+3][j+3]==2 ):\n    print(\"There is at least one left to right diagonal\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 9608347, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "RiesenChicken", "link": "https://stackoverflow.com/users/9608347/riesenchicken"}, "edited": false, "score": 0, "creation_date": 1542864451, "post_id": 53422236, "comment_id": 93723031, "body": "Thnak you, but, like I said using numpy is not an option because I&#39;m new at coding and i must understand how to find it without the numpy function, only using lists. Thanks"}], "tags": [], "owner": {"reputation": 131, "user_id": 5183347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a05Sx.jpg?s=128&g=1", "display_name": "AResem", "link": "https://stackoverflow.com/users/5183347/aresem"}, "is_accepted": false, "score": 0, "last_activity_date": 1542845951, "creation_date": 1542845951, "answer_id": 53422236, "question_id": 53420933, "link": "https://stackoverflow.com/questions/53420933/find-diagonals-in-a-python-matrix-using-lists/53422236#53422236", "title": "Find diagonals in a Python matrix using lists", "body": "<p>You may consider using numpy for this problem. Here goes some code to get you started. </p>\n\n<pre><code>import numpy as np\nfrom itertools import groupby\n\ndef check_diagonals(matrix):\n    for offset in range(-2, 4):\n        diag = matrix.diagonal(offset=offset)\n        if max([sum(1 for _ in g) for k, g in  groupby(diag)]) &gt;= 4:\n            return True, k\n    return False, None\n\n# random test matrix\nmatrix = np.random.randint(0, 3, 6 * 7)\nmatrix = matrix.reshape(6,7)\n\n# left to right check\nresp_tuple = check_diagonals(matrix)\nif resp_tuple[0]:\n    print(\"There is at least one left to right diagonal: {}'s'\".format(resp_tuple[1]))\nelse:\n    # right to left\n    resp_tuple = check_diagonals(np.fliplr(matrix))\n    if resp_tuple[0]:\n        print(\"There is at least one right to left diagonal:     {}'s'\".format(resp_tuple[1]))\n    else:\n        # No diagonals\n        print('No diagonals')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 9608347, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "RiesenChicken", "link": "https://stackoverflow.com/users/9608347/riesenchicken"}, "edited": false, "score": 0, "creation_date": 1542897439, "post_id": 53428492, "comment_id": 93740187, "body": "Thanks for ur help berkelem I really appreciate the time u spend helping me :)"}], "tags": [], "owner": {"reputation": 1543, "user_id": 4844311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332eea05adde1e0fd9e1ece954f61b41?s=128&d=identicon&r=PG&f=1", "display_name": "berkelem", "link": "https://stackoverflow.com/users/4844311/berkelem"}, "is_accepted": true, "score": 0, "last_activity_date": 1542891323, "last_edit_date": 1542891323, "creation_date": 1542881357, "answer_id": 53428492, "question_id": 53420933, "link": "https://stackoverflow.com/questions/53420933/find-diagonals-in-a-python-matrix-using-lists/53428492#53428492", "title": "Find diagonals in a Python matrix using lists", "body": "<p>If you consider the logic of your 'right-to-left' loop, you are actually just doing the same as your 'left-to-right' loop in reverse order. To really get the 'right-to-left' pass right you have to have your <code>i</code> and <code>j</code> indices moving in different directions.</p>\n\n<p>So your conditional statement in this section should look like:</p>\n\n<pre><code>if i-3&gt;=0 and j+3&lt;7:\n    if (llista[i][j]==1 and llista[i-1][j+1]==1 and llista[i-2][j+2]==1 and llista[i-3][j+3]==1)  or (llista[i][j]==2 and llista[i-1][j+1]==2 and llista[i-2][j+2]==2 and llista[i-3][j+3]==2 ):\n        print(\"There is at least one right to left diagonal\")\n</code></pre>\n\n<p>There are a ton of optimizations you could use by importing libraries like <code>numpy</code> or <code>itertools</code> as AResem showed. That answer is not entirely correct though for the following reason.</p>\n\n<p>When you say <code>return True, k</code> you are not exercising any control over the value of <code>k</code> because it was used in the list comprehension just above and will just have the value of the last item it iterated over. So when your function finds a diagonal it reports the wrong number about two thirds of the time.</p>\n\n<p>Here is an edited function that gives the correct results:</p>\n\n<pre><code>def check_diagonals(matrix):\n    for offset in range(-2, 4):\n        diag = matrix.diagonal(offset=offset)\n\n        # Here you can create a tuple of numbers with the number of times they are repeated. \n        # This allows you to keep your k and g values associated.\n        repeat_groups = [(k, sum(1 for _ in g)) for k, g in  groupby(diag)]\n\n        # By using the built-in max function with the 'key' keyword, you can find \n        # the maximum number of repeats and return the number associated with that.\n        num, max_repeats = max(repeat_groups, key=lambda item: item[1])\n        if max_repeats &gt;= 4:\n            return True, num\n    return False, None\n</code></pre>\n\n<p>If you run this function with <code>print</code> statements added you can get output like the following: </p>\n\n<pre><code>Matrix: \n[[1 0 2 2 1 0 1]\n [0 2 0 2 1 1 1]\n [2 2 0 0 0 0 1]\n [0 0 2 2 0 2 2]\n [2 1 1 1 1 1 0]\n [2 2 0 2 1 0 2]]\n\noffset -2\ndiag [2 0 1 2]\nrepeat_groups [(2, 1), (0, 1), (1, 1), (2, 1)]\nnum, max_repeats 2 1\n\noffset -1\ndiag [0 2 2 1 1]\nrepeat_groups [(0, 1), (2, 2), (1, 2)]\nnum, max_repeats 2 2\n\noffset 0\ndiag [1 2 0 2 1 0]\nrepeat_groups [(1, 1), (2, 1), (0, 1), (2, 1), (1, 1), (0, 1)]\nnum, max_repeats 1 1\n\noffset 1\ndiag [0 0 0 0 1 2]\nrepeat_groups [(0, 4), (1, 1), (2, 1)]\nnum, max_repeats 0 4\n(True, 0)\nThere is at least one left to right diagonal: 0's' # Correct!\n</code></pre>\n\n<p>If you want to ignore diagonals of zeros, you can easily add an extra condition, e.g.</p>\n\n<pre><code>if max_repeats &gt;= 4 and num != 0:\n    return True, num\n</code></pre>\n\n<p>You could try and recreate this without using <code>numpy</code> if you wanted.</p>\n"}], "owner": {"reputation": 39, "user_id": 9608347, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "RiesenChicken", "link": "https://stackoverflow.com/users/9608347/riesenchicken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 53428492, "answer_count": 3, "score": 0, "last_activity_date": 1542891323, "creation_date": 1542836911, "last_edit_date": 1542865181, "question_id": 53420933, "link": "https://stackoverflow.com/questions/53420933/find-diagonals-in-a-python-matrix-using-lists", "title": "Find diagonals in a Python matrix using lists", "body": "<p>I'm trying to code the game connect-4, and there is a part of my code in which i try to find in a 7x6 matrix, diagonals of 4 ones in a row or 4 2s in a row.\nThis part of my code does not work i tried everything I was able to. And sometimes it detects that there is a 4 1s or 4 2s diagonal where is not. I created the matrix puting a 7 zero list in each position of a 6 zeros lists. I'm trying to do it using only lists functions, i cant use the numpy library or similar. \nOkay, in this part of the code I'm trying to find if in each possible diagonal of the matrice there are 4 zeros in a row. PD: I'm only trying to find the diagonals that go from left to right ATM. Thanks for your help, I tried to explain my problem as good as I can because english is not my main tongue.\nThis is my code:</p>\n\n<pre><code>import random\nllista = [0]*6 #when i say llista y mean matrix\nfor i in range(6):\n    llista[i]=[0]*7\n\n#Here i fill the 7*6 matrix of 0s 1s and 2s randomly so i can see if it works.\nfor i in range(30):\n    x=random.randrange(-1,-7,-1)\n    y=random.randrange(0,7,1)\n    llista[x][y]=1\nfor i in range(30):\n    x=random.randrange(-1,-7,-1)\n    y=random.randrange(0,7,1)\n    llista[x][y]=2\n#This 2 loops here are too see if it is possible to have a diagonal in the matrece because if you want a diagonal u need at least a one or 2 in the center, the problem is not here.\nfor i in range(-1,-7,-1):\n    possible = False\n    if llista[i][3]==1:\n        possible = True\n        break\n\nfor i in range(7):\n    possible2 = False\n    if llista[-4][i]==1 or llista[-4][i]==1:\n        possible2=True\n        break\n\nif possible==True and possible2==True:\n#The problem starts here. This first loop i use it too find the diagonals that go from left to right. I want to find diagonals of 4 1s or 4 2s.\nfor i in range(len(llista)-3):\n    for j in range(len(llista[i])-3):\n        #This if is too see if we have four 1 or 2 togheter in the list, if we have them it prints the sentence below.\n        if (llista[i][j]==1 and llista[i+1][j+1]==1 and llista[i+2][j+2]==1 and llista[i+3][j+3]==1)  or (llista[i][j]==2 and llista[i+1][j+1]==2 and llista[i+2][j+2]==2 and llista[i+3][j+3]==2 ):\n            print(\"There is at least one left to right diagonal\")\n\n#This loop is the same than the last one but to find diagonals from right to left (a 4 diagonal made of 1s or 2s)\n    for i in range(len(llista)):\n        for j in range(len(llista[i])):\n            if i-3&lt;0 and j-3&lt;0:\n                if (llista[i][j]==1 and llista[i-1][j-1]==1 and llista[i-2][j-2]==1 and llista[i-3][j-3]==1)  or (llista[i][j]==2 and llista[i-1][j-1]==2 and llista[i-2][j-2]==2 and llista[i-3][j-3]==2 ):\n                   print(\"There is at least one right to left diagonal\")\n\n#Here i print the matrix\nfor i in range(6):\n    print(llista[i])\n#So this program should say if there is at least one left to right diagonal \n</code></pre>\n\n<p>or right to left diagonal.\n     #I dont want to use functions that are not being used already, and i dont wanna do it another way because i must understand this way. thanks</p>\n"}, {"tags": ["python", "matplotlib", "jupyter-notebook"], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 0, "last_activity_date": 1542840367, "creation_date": 1542840367, "answer_id": 53421490, "question_id": 53420910, "link": "https://stackoverflow.com/questions/53420910/matplotlib-qt5-runs-but-doesnt-generate-graphs/53421490#53421490", "title": "%matplotlib qt5 runs but doesn&#39;t generate graphs", "body": "<p>It seems something got updated; but with the information available it's not possible to find out what it is. In any case, since you have pyqt5 installed you may use <code>%matplotlib qt5</code>. Then you probably just forgot to type <code>plt.show()</code>?</p>\n\n<pre><code>%matplotlib qt5\nimport matplotlib.pyplot as plt\nplt.plot([1,4,2])\nplt.show()\n</code></pre>\n\n<p>Also make sure to restart the kernel if you change the interactive backend, and if in doubt, let the line <code>%matplotlib qt5</code> appear <em>before</em> importing pyplot.</p>\n"}], "owner": {"reputation": 57, "user_id": 9469318, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rafael Paulino", "link": "https://stackoverflow.com/users/9469318/rafael-paulino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1079, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542840367, "creation_date": 1542836763, "question_id": 53420910, "link": "https://stackoverflow.com/questions/53420910/matplotlib-qt5-runs-but-doesnt-generate-graphs", "title": "%matplotlib qt5 runs but doesn&#39;t generate graphs", "body": "<p>I was using this code on my Jupyter Notebook until yesterday and it was working fine:</p>\n\n<pre><code>%matplotlib qt\nfig = plt.figure()\nax = fig.add_subplot(111, projection='3d')\nax.scatter(X,Y,Z,c='black')\nax.set_xlabel('X')\nax.set_ylabel('Y')\nax.set_zlabel('Z')\n</code></pre>\n\n<p>This morning, for no apparent reason, it started saying that there was an error with qt4 or something. After some research I installed qt5 and changed the first line of the code to \"%matplotlib qt5\" which now makes the code run without errors, but doesn't generate any graphs. If I take the 5 after qt I run into the message \"Warning: Cannot change to a different GUI toolkit: qt. Using qt5 instead.\". I can still plot graphs with \"%matplotlib inline\", but I wanted some interactivity. Any ideas why this is happening?</p>\n"}, {"tags": ["python", "excel", "python-3.x", "xlsxwriter", "osisoft"], "owner": {"reputation": 117, "user_id": 10447479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ccd9a55ba1b929c801c1df85f61d1b5?s=128&d=identicon&r=PG&f=1", "display_name": "user97", "link": "https://stackoverflow.com/users/10447479/user97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1542836712, "creation_date": 1542836712, "question_id": 53420899, "link": "https://stackoverflow.com/questions/53420899/xlsxwriter-click-on-cells-or-apply-function", "title": "xlsxwriter click on cells or apply function", "body": "<p>I have a python script that creates an Excel file.</p>\n\n<p><strong>Definition</strong>: Osisoft-function is a function inputted into an Excel cell to get data from an Osisoft server (there is installed a PI DataLink addon into Excel). </p>\n\n<p><strong>Definition 2</strong>: To apply an Osisoft-function means to click the cell that contains this function and in the showing menu (to the right) click \"apply\". Having applied this function, the list of time-value measurements fill the rows under this cell.</p>\n\n<p>In this Excel file, there is written a lot of <strong>Osisoft-functions</strong>. But all of them need to be <strong><em>applied</em></strong> to actually get the data. It is possible to do it manually, but it becomes tedious when there are 100+ such functions.</p>\n\n<p>The function is parsed into cell using command:</p>\n\n<pre><code>worksheet.write_array_formula(first_row, first_col, last_row, last_col, formula[,\n  cell_format[, value]])\n</code></pre>\n\n<p><strong>My question</strong>: is it possible to write some kind of macro to click on all these cells and click the <strong>apply</strong>-buttons in the showing menus? Some kind of selenium-script, but for Excel.  </p>\n"}, {"tags": ["python", "multiprocessing", "python-multiprocessing"], "comments": [{"owner": {"reputation": 1334, "user_id": 3532564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0nSv2.jpg?s=128&g=1", "display_name": "Ian Quah", "link": "https://stackoverflow.com/users/3532564/ian-quah"}, "edited": false, "score": 0, "creation_date": 1542837016, "post_id": 53420883, "comment_id": 93716278, "body": "So have you tried actually running it on your actual data and determining if the multiprocessing will be worthwhile? E.g instead of using half a million, do 5 million and see what happens? Premature optimization can cost you lots of time"}, {"owner": {"reputation": 395, "user_id": 1123613, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/13323996ec3457d2bec49f2669fee342?s=128&d=identicon&r=PG", "display_name": "wowohweewah", "link": "https://stackoverflow.com/users/1123613/wowohweewah"}, "reply_to_user": {"reputation": 1334, "user_id": 3532564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0nSv2.jpg?s=128&g=1", "display_name": "Ian Quah", "link": "https://stackoverflow.com/users/3532564/ian-quah"}, "edited": false, "score": 0, "creation_date": 1542837471, "post_id": 53420883, "comment_id": 93716433, "body": "@IanQuah, I tried it once and it was way slower, but I was using one of the abandoned methods that turned out to be inefficient, hence isolating and experimenting. That said, at this point it&#39;s more a personal curiosity. If I can&#39;t get such a seemingly simple use case to benefit, when do I ever use python multiprocessing?"}, {"owner": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "edited": false, "score": 0, "creation_date": 1542841840, "post_id": 53420883, "comment_id": 93717847, "body": "Your computation isn&#39;t heavy enough to earn back the IPC overhead. Don&#39;t start thinking about using multiprocessing if your sequential code doesn&#39;t take some seconds to complete. Reading <a href=\"https://stackoverflow.com/questions/52343188/no-performance-gain-after-using-multiprocessing-for-a-queue-oriented-function/52348640#52348640\">this</a> and <a href=\"https://stackoverflow.com/questions/52246574/concurrency-parallelism-on-windows-with-python/52249698#52249698\">this</a> might improve your understanding."}, {"owner": {"reputation": 395, "user_id": 1123613, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/13323996ec3457d2bec49f2669fee342?s=128&d=identicon&r=PG", "display_name": "wowohweewah", "link": "https://stackoverflow.com/users/1123613/wowohweewah"}, "reply_to_user": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "edited": false, "score": 0, "creation_date": 1542843263, "post_id": 53420883, "comment_id": 93718314, "body": "@Darkonaut yeah more I read about seems like Python has a lot of overhead for multiprocessing compared to my other familiarity with it (mostly in Java). That said, the numpy suggestion in those links is a good workaround for basic math operations."}], "answers": [{"comments": [{"owner": {"reputation": 395, "user_id": 1123613, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/13323996ec3457d2bec49f2669fee342?s=128&d=identicon&r=PG", "display_name": "wowohweewah", "link": "https://stackoverflow.com/users/1123613/wowohweewah"}, "edited": false, "score": 0, "creation_date": 1543250404, "post_id": 53453810, "comment_id": 93840628, "body": "Oh, very interesting. Was not aware of <code>initializer</code>/<code>initargs</code> -- I was looking for a way to simply share data w/o the overhead of each process having to recreate it. Looking into that, I wonder if a <code>manager</code> instance would also help. But thanks, that opens up a lot of new ideas!"}], "tags": [], "owner": {"reputation": 55248, "user_id": 2705542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc22708f70324dcbfe34f247637ca01?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Peters", "link": "https://stackoverflow.com/users/2705542/tim-peters"}, "is_accepted": true, "score": 4, "last_activity_date": 1543015277, "creation_date": 1543015277, "answer_id": 53453810, "question_id": 53420883, "link": "https://stackoverflow.com/questions/53420883/python-multiprocessing-is-slower-than-regular-how-can-i-improve/53453810#53453810", "title": "Python multiprocessing is slower than regular. How can I improve?", "body": "<p>Building <code>O(N**2)</code> 3-element dicts not used in the serialized code, and transmitting them over interprocess pipes, is a pretty good way to guarantee multiprocessing can't help ;-)  Nothing comes for free - everything costs.</p>\n\n<p>Below is a rewrite that executes much <em>the same</em> code regardless of whether it's run in serial or multiprocessing modes.  No new dicts, etc.  In general, the larger <code>len(coords)</code>, the more benefit it gets from multiprocessing.  On my box, at 20000 the multiprocessing run takes about a third of the wall-clock time.</p>\n\n<p>Key to this is that all processes have their own copy of <code>coords</code>.  This is done below by transmitting it just once, when the pool is created.  That should work on all platforms.  On Linux-y systems, it could happen \"by magic\" instead via forked process inheritance.  Reducing the amount of data sent across processes from <code>O(N**2)</code> to <code>O(N)</code> is a huge improvement.</p>\n\n<p>Getting more out of multiprocessing would require better load balancing.  As is, a call to <code>check_overlap(i)</code> compares <code>coords[i]</code> to each value in <code>coords[i+1:]</code>.  The larger <code>i</code>, the less work there is for it to do, and for the largest values of <code>i</code> just the cost of transmitting <code>i</code> between processes - and transmitting the result back - swamps the amount of time spent <em>in</em> <code>check_overlap(i)</code>.</p>\n\n<pre><code>def init(*args):\n    global _coords, _tolerance\n    _coords, _tolerance = args\n\ndef check_overlap(start_index):\n    coords, tolerance = _coords, _tolerance\n    tsq = tolerance ** 2\n    overlaps = 0\n    start0, start1 = coords[start_index]\n    for i in range(start_index + 1, len(coords)):\n        that0, that1 = coords[i]\n        dx = abs(that0 - start0)\n        if dx &lt;= tolerance:\n            dy = abs(that1 - start1)\n            if dy &lt;= tolerance:\n                if dx**2 + dy**2 &lt;= tsq:\n                    overlaps += 1\n    return overlaps\n\ndef process_coords(coords, num_processors=1, tolerance=1):\n    global _coords, _tolerance\n    import multiprocessing as mp\n    _coords, _tolerance = coords, tolerance\n    import time\n\n    if num_processors &gt; 1:\n        pool = mp.Pool(num_processors, initializer=init, initargs=(coords, tolerance))\n        start = time.time()\n        print(\"Start script w/ multiprocessing\")\n    else:\n        num_processors = 0\n        start = time.time()\n        print(\"Start script w/ standard processing\")\n\n    N = len(coords)\n    if num_processors:\n        total_overlap_count = sum(pool.imap_unordered(check_overlap, range(N))) \n    else:\n        total_overlap_count = sum(check_overlap(i) for i in range(N))\n\n    print(total_overlap_count)\n    print(\"  time: {0}\".format(time.time() - start))\n\nif __name__ == \"__main__\":\n    from random import random\n\n    coords = []\n    num_coords = 20000\n    spread = 100.0\n    half_spread = 0.5*spread\n    for i in range(num_coords):\n        coords.append([\n            random()*spread-half_spread,\n            random()*spread-half_spread\n        ])\n\n    process_coords(coords, 1)\n    process_coords(coords, 4)\n</code></pre>\n"}], "owner": {"reputation": 395, "user_id": 1123613, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/13323996ec3457d2bec49f2669fee342?s=128&d=identicon&r=PG", "display_name": "wowohweewah", "link": "https://stackoverflow.com/users/1123613/wowohweewah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 3, "accepted_answer_id": 53453810, "answer_count": 1, "score": 0, "last_activity_date": 1543015277, "creation_date": 1542836651, "question_id": 53420883, "link": "https://stackoverflow.com/questions/53420883/python-multiprocessing-is-slower-than-regular-how-can-i-improve", "title": "Python multiprocessing is slower than regular. How can I improve?", "body": "<p>Basically have a script that combs a dataset of nodes/points to remove those that overlap. The actual script is more complicated but I pared it down to basically a simple overlap check that does nothing with it for demonstration.</p>\n\n<p>I tried a few variants with locks, queues, pools adding one job at a time versus adding in bulk. Some of the worst offenders were slower by a couple order of magnitude. Eventually I got it to the fastest I could.</p>\n\n<p>The overlap checking algorithm which is send to the individual processes:</p>\n\n<pre><code>def check_overlap(args):\n    tolerance = args['tolerance']\n    this_coords = args['this_coords']\n    that_coords = args['that_coords']\n\n    overlaps = False\n    distance_x = this_coords[0] - that_coords[0]\n    if distance_x &lt;= tolerance:\n        distance_x = pow(distance_x, 2)\n        distance_y = this_coords[1] - that_coords[1]\n        if distance_y &lt;= tolerance:\n            distance = pow(distance_x + pow(distance_y, 2), 0.5)\n            if distance &lt;= tolerance:\n               overlaps = True\n\n    return overlaps\n</code></pre>\n\n<p>The processing function:</p>\n\n<pre><code>def process_coords(coords, num_processors=1, tolerance=1):\n    import multiprocessing as mp\n    import time\n\n    if num_processors &gt; 1:\n        pool = mp.Pool(num_processors)\n        start = time.time()\n        print \"Start script w/ multiprocessing\"\n\n    else:\n        num_processors = 0\n        start = time.time()\n        print \"Start script w/ standard processing\"\n\n    total_overlap_count = 0\n\n    # outer loop through nodes\n    start_index = 0\n    last_index = len(coords) - 1\n    while start_index &lt;= last_index:\n\n        # nature of the original problem means we can process all pairs of a single node at once, but not multiple, so batch jobs by outer loop\n        batch_jobs = []\n\n        # inner loop against all pairs for this node\n        start_index += 1\n        count_overlapping = 0\n        for i in range(start_index, last_index+1, 1):\n\n            if num_processors:\n                # add job\n                batch_jobs.append({\n                    'tolerance': tolerance,\n                    'this_coords': coords[start_index],\n                    'that_coords': coords[i]\n                })\n\n            else:\n                # synchronous processing\n                this_coords = coords[start_index]\n                that_coords = coords[i]\n                distance_x = this_coords[0] - that_coords[0]\n                if distance_x &lt;= tolerance:\n                    distance_x = pow(distance_x, 2)\n                    distance_y = this_coords[1] - that_coords[1]\n                    if distance_y &lt;= tolerance:\n                        distance = pow(distance_x + pow(distance_y, 2), 0.5)\n                        if distance &lt;= tolerance:\n                            count_overlapping += 1\n\n        if num_processors:\n            res = pool.map_async(check_overlap, batch_jobs)\n            results = res.get()\n            for r in results:\n                if r:\n                    count_overlapping += 1\n\n        # stuff normally happens here to process nodes connected to this node\n        total_overlap_count += count_overlapping\n\n    print total_overlap_count\n    print \"  time: {0}\".format(time.time() - start)\n</code></pre>\n\n<p>And testing function:</p>\n\n<pre><code>from random import random\n\ncoords = []\nnum_coords = 1000\nspread = 100.0\nhalf_spread = 0.5*spread\nfor i in range(num_coords):\n    coords.append([\n        random()*spread-half_spread,\n        random()*spread-half_spread\n    ])\n\nprocess_coords(coords, 1)\nprocess_coords(coords, 4)\n</code></pre>\n\n<p>Still, the non-multiprocessing runs in less than 0.4s consistently and the multiprocessing I can get just under 3.0s as it stands above. I get that maybe the algorithm here is too simple to really reap benefits, but considering the above case has nearly half a million iterations and the real case has significantly more, it's weird to me that the multiprocessing is an order of magnitude slower.</p>\n\n<p>What am I missing / what can I do to improve?</p>\n"}, {"tags": ["python", "json", "pandas", "geopandas"], "answers": [{"tags": [], "owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "is_accepted": false, "score": 0, "last_activity_date": 1568921366, "last_edit_date": 1568921366, "creation_date": 1568879036, "answer_id": 58006108, "question_id": 53420863, "link": "https://stackoverflow.com/questions/53420863/python-pandas-flatten-nested-json/58006108#58006108", "title": "Python Pandas - Flatten Nested JSON", "body": "<h2>Use recursion to flatten the nested <code>dicts</code></h2>\n\n<ul>\n<li><a href=\"https://realpython.com/python-thinking-recursively/\" rel=\"nofollow noreferrer\">Thinking Recursively in Python</a></li>\n<li><a href=\"https://towardsdatascience.com/flattening-json-objects-in-python-f5343c794b10\" rel=\"nofollow noreferrer\">Flattening JSON objects in Python</a></li>\n<li><a href=\"https://github.com/amirziai/flatten\" rel=\"nofollow noreferrer\">flatten</a></li>\n<li>The following function, will be used to flatten <code>_source_list</code></li>\n</ul>\n\n<pre class=\"lang-py prettyprint-override\"><code>def flatten_json(nested_json: dict, exclude: list=['']) -&gt; dict:\n    \"\"\"\n    Flatten a list of nested dicts.\n    \"\"\"\n    out = dict()\n    def flatten(x: (list, dict, str), name: str='', exclude=exclude):\n        if type(x) is dict:\n            for a in x:\n                if a not in exclude:\n                    flatten(x[a], f'{name}{a}_')\n        elif type(x) is list:\n            i = 0\n            for a in x:\n                flatten(a, f'{name}{i}_')\n                i += 1\n        else:\n            out[name[:-1]] = x\n\n    flatten(nested_json)\n    return out\n</code></pre>\n\n<h2>Data:</h2>\n\n<ul>\n<li>To create the dataset, I used the given data.</li>\n<li><code>data</code> is a <code>json</code></li>\n</ul>\n\n<pre class=\"lang-py prettyprint-override\"><code>data = {'locations': [{'accuracy': 17,'activity': [{'activity': [{'confidence': 100,'type': 'STILL'}],'timestampMs': '1542652'}],'altitude': -10,'latitudeE7': 3777321,'longitudeE7': -122423125,'timestampMs': '1542654','verticalAccuracy': 2},\n                      {'accuracy': 17,'activity': [{'activity': [{'confidence': 100,'type': 'STILL'}],'timestampMs': '1542652'}],'altitude': -10,'latitudeE7': 3777321,'longitudeE7': -122423125,'timestampMs': '1542654','verticalAccuracy': 2},\n                      {'accuracy': 17,'activity': [{'activity': [{'confidence': 100,'type': 'STILL'}],'timestampMs': '1542652'}],'altitude': -10,'latitudeE7': 3777321,'longitudeE7': -122423125,'timestampMs': '1542654','verticalAccuracy': 2}]}\n</code></pre>\n\n<h3>Using <code>flatten_json</code>:</h3>\n\n<pre class=\"lang-py prettyprint-override\"><code>df = pd.DataFrame([flatten_json(x) for x in data['locations']])\n</code></pre>\n\n<h3>Output:</h3>\n\n<pre class=\"lang-py prettyprint-override\"><code> accuracy  activity_0_activity_0_confidence activity_0_activity_0_type activity_0_timestampMs  altitude  latitudeE7  longitudeE7 timestampMs  verticalAccuracy\n       17                               100                      STILL                1542652       -10     3777321   -122423125     1542654                 2\n       17                               100                      STILL                1542652       -10     3777321   -122423125     1542654                 2\n       17                               100                      STILL                1542652       -10     3777321   -122423125     1542654                 2\n</code></pre>\n"}], "owner": {"reputation": 721, "user_id": 3380902, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/301f0eae2d831fb52be6257140419762?s=128&d=identicon&r=PG&f=1", "display_name": "kms", "link": "https://stackoverflow.com/users/3380902/kms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 850, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1579153161, "creation_date": 1542836549, "last_edit_date": 1568878516, "question_id": 53420863, "link": "https://stackoverflow.com/questions/53420863/python-pandas-flatten-nested-json", "title": "Python Pandas - Flatten Nested JSON", "body": "<p>Working with Nested JSON data that I am trying to transform to a Pandas dataframe. The <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.io.json.json_normalize.html\" rel=\"nofollow noreferrer\">json_normalize</a> function offers a way to accomplish this. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>{'locations': [{'accuracy': 17,\n                'activity': [{'activity': [{'confidence': 100,\n                                            'type': 'STILL'}],\n                              'timestampMs': '1542652'}],\n                'altitude': -10,\n                'latitudeE7': 3777321,\n                'longitudeE7': -122423125,\n                'timestampMs': '1542654',\n                'verticalAccuracy': 2}]}\n</code></pre>\n\n<p>I utilized the function to normalize locations, however, the nested part 'activity' is not flat. </p>\n\n<p>Here's my attempt: </p>\n\n<pre><code>activity_data = json_normalize(d, 'locations', ['activity','type', 'confidence'], \n                               meta_prefix='Prefix.',\n                               errors='ignore') \n</code></pre>\n\n<p>DataFrame: </p>\n\n<pre><code>[{u'activity': [{u'confidence': 100, u'type': ...   -10.0   NaN 377777377   -1224229340 1542652023196   \n</code></pre>\n\n<p>The Activity column still has nested elements which I need unpacked in its own column. </p>\n\n<p>Any suggestions/tips would be much appreciated. </p>\n"}, {"tags": ["python", "dataframe", "null", "nan", "data-cleaning"], "comments": [{"owner": {"reputation": 5136, "user_id": 2553191, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e4f2ea35a69b90cd49c463281a1eeed7?s=128&d=identicon&r=PG", "display_name": "ehacinom", "link": "https://stackoverflow.com/users/2553191/ehacinom"}, "edited": false, "score": 1, "creation_date": 1542836975, "post_id": 53420852, "comment_id": 93716262, "body": "what error do you get?"}, {"owner": {"reputation": 41, "user_id": 10688088, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156903820334083/picture?type=large", "display_name": "Matthew Davies", "link": "https://stackoverflow.com/users/10688088/matthew-davies"}, "reply_to_user": {"reputation": 5136, "user_id": 2553191, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e4f2ea35a69b90cd49c463281a1eeed7?s=128&d=identicon&r=PG", "display_name": "ehacinom", "link": "https://stackoverflow.com/users/2553191/ehacinom"}, "edited": false, "score": 0, "creation_date": 1542868823, "post_id": 53420852, "comment_id": 93724526, "body": "Hi. Sorry, should have mentioned that. I don&#39;t get an error, it just does nothing and the NaN values do not get replaced."}, {"owner": {"reputation": 41, "user_id": 10688088, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156903820334083/picture?type=large", "display_name": "Matthew Davies", "link": "https://stackoverflow.com/users/10688088/matthew-davies"}, "reply_to_user": {"reputation": 5136, "user_id": 2553191, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e4f2ea35a69b90cd49c463281a1eeed7?s=128&d=identicon&r=PG", "display_name": "ehacinom", "link": "https://stackoverflow.com/users/2553191/ehacinom"}, "edited": false, "score": 0, "creation_date": 1542869672, "post_id": 53420852, "comment_id": 93724855, "body": "OK, so this works:    df.loc[(df[&#39;Title&#39;].str.contains(&#39;Master&#39;))&amp;(df[&#39;Age&#39;].isnul&zwnj;&#8203;l()),&#39;Age&#39;]=some_num&zwnj;&#8203;ber.  But I still don&#39;t get why my original code does not work."}], "owner": {"reputation": 41, "user_id": 10688088, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156903820334083/picture?type=large", "display_name": "Matthew Davies", "link": "https://stackoverflow.com/users/10688088/matthew-davies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 345, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1542836985, "creation_date": 1542836496, "question_id": 53420852, "link": "https://stackoverflow.com/questions/53420852/fillna-not-working-together-with-column-conditions-in-pandas-dataframe", "title": "fillna not working together with column conditions in Pandas DataFrame", "body": "<p>I am trying to fill NaN values in a dataframe column, but only if a condition in another column is met (I'm working with Kaggle Titanic data). For example:</p>\n\n<blockquote>\n<pre><code>      Age    Title\n0     10       Mr\n1     2        Master\n2     NaN      Master\n3     NaN      Mr\n</code></pre>\n</blockquote>\n\n<p>In this table, I want to replace the NaN in the 'Age' column with a number, but only if the value in the 'Title' column is 'Master', not if it is 'Mr'. So I want to replace the row 2 NaN, not the row 3 NaN.</p>\n\n<p>I'm trying this and don't understand why it doesn't work:</p>\n\n<pre><code>df.loc[df['Title'].str.contains('Master'),'Age'].fillna(some_number,inplace=True)\n</code></pre>\n\n<p>Can anyone help?</p>\n"}, {"tags": ["python", "dataframe", "statistics"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 7088571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b7f01b39e92659813c48e9a6123e283?s=128&d=identicon&r=PG&f=1", "display_name": "zosh", "link": "https://stackoverflow.com/users/7088571/zosh"}, "edited": false, "score": 0, "creation_date": 1542837120, "post_id": 53420887, "comment_id": 93716320, "body": "Thank you so much for your reply"}, {"owner": {"reputation": 3890, "user_id": 7517724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63c21233470c84bd8e36b40bf9fe8103?s=128&d=identicon&r=PG", "display_name": "Craig", "link": "https://stackoverflow.com/users/7517724/craig"}, "reply_to_user": {"reputation": 73, "user_id": 7088571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b7f01b39e92659813c48e9a6123e283?s=128&d=identicon&r=PG&f=1", "display_name": "zosh", "link": "https://stackoverflow.com/users/7088571/zosh"}, "edited": false, "score": 1, "creation_date": 1542837291, "post_id": 53420887, "comment_id": 93716375, "body": "This function does exactly what you are asking for. It replaces any values that exceed the &#39;clip&#39; value with the &#39;clip&#39; value. It does not remove anything."}, {"owner": {"reputation": 73, "user_id": 7088571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b7f01b39e92659813c48e9a6123e283?s=128&d=identicon&r=PG&f=1", "display_name": "zosh", "link": "https://stackoverflow.com/users/7088571/zosh"}, "edited": false, "score": 0, "creation_date": 1542838403, "post_id": 53420887, "comment_id": 93716727, "body": "Hey Craig, sorry to bother you again:  What if I wanted to completely remove all the rows with outliers?"}, {"owner": {"reputation": 3890, "user_id": 7517724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63c21233470c84bd8e36b40bf9fe8103?s=128&d=identicon&r=PG", "display_name": "Craig", "link": "https://stackoverflow.com/users/7517724/craig"}, "reply_to_user": {"reputation": 73, "user_id": 7088571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b7f01b39e92659813c48e9a6123e283?s=128&d=identicon&r=PG&f=1", "display_name": "zosh", "link": "https://stackoverflow.com/users/7088571/zosh"}, "edited": false, "score": 0, "creation_date": 1542845580, "post_id": 53420887, "comment_id": 93718952, "body": "@zosh - That&#39;s a new question, but the answer is to use boolean indexing as described in <a href=\"https://stackoverflow.com/a/23200666/7517724\">stackoverflow.com/a/23200666/7517724</a>"}], "tags": [], "owner": {"reputation": 3890, "user_id": 7517724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63c21233470c84bd8e36b40bf9fe8103?s=128&d=identicon&r=PG", "display_name": "Craig", "link": "https://stackoverflow.com/users/7517724/craig"}, "is_accepted": false, "score": 1, "last_activity_date": 1542836674, "creation_date": 1542836674, "answer_id": 53420887, "question_id": 53420838, "link": "https://stackoverflow.com/questions/53420838/resetting-outliers-in-a-timeseries-dataframe-to-3-sd/53420887#53420887", "title": "Resetting outliers in a timeseries dataframe to 3 SD", "body": "<p>You could use the <code>.clip_upper()</code> method to limit values in the customers column to mean+3*sd.</p>\n\n<pre><code>m = df['total customers'].mean()\nsd = df['total customers'].std()\ndf['total customers'] = df['total_customers'].clip_upper(m + 3*sd)\n</code></pre>\n\n<p>Here's the <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.clip_upper.html#pandas.Series.clip_upper\" rel=\"nofollow noreferrer\">documentation for <code>clip_upper</code></a>.</p>\n"}], "owner": {"reputation": 73, "user_id": 7088571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b7f01b39e92659813c48e9a6123e283?s=128&d=identicon&r=PG&f=1", "display_name": "zosh", "link": "https://stackoverflow.com/users/7088571/zosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542837061, "creation_date": 1542836398, "last_edit_date": 1542837061, "question_id": 53420838, "link": "https://stackoverflow.com/questions/53420838/resetting-outliers-in-a-timeseries-dataframe-to-3-sd", "title": "Resetting outliers in a timeseries dataframe to 3 SD", "body": "<p><strong>Domain: Python &amp; Pandas</strong></p>\n\n<p>I have a time series data frame which has the total number of customers for each day for the last 10 years.</p>\n\n<p><strong>The columns are:</strong></p>\n\n<ul>\n<li>date</li>\n<li>total customers</li>\n</ul>\n\n<p>There are outliers in my total customers column. </p>\n\n<p>I wanted to reset the <em>outliers outside of 3 standard deviations above the mean</em> to a value as defined by the formula below. </p>\n\n<p>Outlier which is above 3SD = Mean + 3 S.D.</p>\n"}, {"tags": ["python", "pyqt", "pyqt5", "qpainter", "qpixmap"], "comments": [{"owner": {"reputation": 443, "user_id": 6859682, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bf2c0bffde6c83134d510dc1be08787f?s=128&d=identicon&r=PG&f=1", "display_name": "CSforStructuralEngineer", "link": "https://stackoverflow.com/users/6859682/csforstructuralengineer"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1542838463, "post_id": 53420826, "comment_id": 93716749, "body": "The code snippet is just to illustrate the issue. In my full code, the pixmaps are different."}, {"owner": {"reputation": 443, "user_id": 6859682, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bf2c0bffde6c83134d510dc1be08787f?s=128&d=identicon&r=PG&f=1", "display_name": "CSforStructuralEngineer", "link": "https://stackoverflow.com/users/6859682/csforstructuralengineer"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1542838708, "post_id": 53420826, "comment_id": 93716840, "body": "Okay, edited the question and code"}, {"owner": {"reputation": 443, "user_id": 6859682, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bf2c0bffde6c83134d510dc1be08787f?s=128&d=identicon&r=PG&f=1", "display_name": "CSforStructuralEngineer", "link": "https://stackoverflow.com/users/6859682/csforstructuralengineer"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1542839691, "post_id": 53420826, "comment_id": 93717176, "body": "I modified the pixmaps and the question. The pixmaps are actually from images over which some shapes have been painted. This toy example reproduces the same error simply using lines."}, {"owner": {"reputation": 443, "user_id": 6859682, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bf2c0bffde6c83134d510dc1be08787f?s=128&d=identicon&r=PG&f=1", "display_name": "CSforStructuralEngineer", "link": "https://stackoverflow.com/users/6859682/csforstructuralengineer"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1542841090, "post_id": 53420826, "comment_id": 93717589, "body": "Thanks so much! Your code works! I&#39;m still not yet sure what I did wrong though"}], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 5, "last_activity_date": 1542840634, "creation_date": 1542840634, "answer_id": 53421533, "question_id": 53420826, "link": "https://stackoverflow.com/questions/53420826/overlay-two-pixmaps-with-alpha-value-using-qpainter/53421533#53421533", "title": "Overlay two pixmaps with alpha value using QPainter", "body": "<p>I have implemented a function that performs the action of joining depending on the mode, for a better appreciation I have moved the items.</p>\n\n<pre><code>import sys\nfrom PyQt5 import QtCore, QtGui, QtWidgets\n\ndef join_pixmap(p1, p2, mode=QtGui.QPainter.CompositionMode_SourceOver):\n    s = p1.size().expandedTo(p2.size())\n    result =  QtGui.QPixmap(s)\n    result.fill(QtCore.Qt.transparent)\n    painter = QtGui.QPainter(result)\n    painter.setRenderHint(QtGui.QPainter.Antialiasing)\n    painter.drawPixmap(QtCore.QPoint(), p1)\n    painter.setCompositionMode(mode)\n    painter.drawPixmap(result.rect(), p2, p2.rect())\n    painter.end()\n    return result\n\nclass Viewer(QtWidgets.QGraphicsView):\n    def __init__(self, parent=None):\n        super(Viewer, self).__init__(parent)\n        self._scene = QtWidgets.QGraphicsScene(self)\n        self.setScene(self._scene)  \n\n        blue = QtGui.QPixmap(100, 100) \n        blue.fill(QtCore.Qt.transparent)\n        p = QtGui.QPainter(blue)\n        pen = QtGui.QPen(QtGui.QBrush(QtGui.QColor(0,0,255)), 10)\n        p.setPen(pen)\n        p.drawLine(0, 0, 100, 100)\n        p.end()\n        self.photo = self._scene.addPixmap(blue)\n\n        green = QtGui.QPixmap(100, 100)\n        green.fill(QtCore.Qt.transparent)            \n        p = QtGui.QPainter(green)\n        pen = QtGui.QPen(QtGui.QBrush(QtGui.QColor(0, 255, 0, 255)), 10)\n        p.setPen(pen)\n        p.drawLine(100, 0, 0, 100)\n        p.end()\n        self.label = self._scene.addPixmap(green) \n        self.label.setPos(200, 0)     \n\n        self.overlayMaps()\n\n    def overlayMaps(self):\n        p1 = QtGui.QPixmap(self.photo.pixmap())\n        p2 = QtGui.QPixmap(self.label.pixmap())\n\n        result_pixmap = join_pixmap(self.photo.pixmap(), self.label.pixmap())\n        self.result_item = self._scene.addPixmap(result_pixmap)\n        self.result_item.setPos(100, 200)\n\n        result_pixmap.save(\"result_pixmap.png\")\n\nif __name__ == '__main__':\n    import sys\n    app = QtWidgets.QApplication(sys.argv)\n    window = Viewer()\n    window.resize(640, 480)\n    window.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/4A2d0.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/4A2d0.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>result_pixmap.png</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/8Tzmp.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/8Tzmp.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 443, "user_id": 6859682, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bf2c0bffde6c83134d510dc1be08787f?s=128&d=identicon&r=PG&f=1", "display_name": "CSforStructuralEngineer", "link": "https://stackoverflow.com/users/6859682/csforstructuralengineer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1341, "favorite_count": 2, "accepted_answer_id": 53421533, "answer_count": 1, "score": 1, "last_activity_date": 1552194718, "creation_date": 1542836299, "last_edit_date": 1552194718, "question_id": 53420826, "link": "https://stackoverflow.com/questions/53420826/overlay-two-pixmaps-with-alpha-value-using-qpainter", "title": "Overlay two pixmaps with alpha value using QPainter", "body": "<p>I'm trying to overlay 2 pixmaps and convert them into a single pixmap in a QGraphics scene. Both pixmaps are transparent at certain locations. I want to combine the maps using the 'SourceOver' blend type listed <a href=\"http://ftp.ics.uci.edu/pub/centos0/ics-custom-build/BUILD/PyQt-x11-gpl-4.7.2/doc/html/qpainter.html#CompositionMode-enum\" rel=\"nofollow noreferrer\">here</a>: I have a simple toy example below to illustrate my issue where I have created two dummy transparent pixmaps, one green and one blue. In reality, these maps are loaded from images and painted over, but this example reproduces the problem. Based on this <em><a href=\"https://stackoverflow.com/questions/4375433/how-to-add-an-image-on-the-top-of-another-image\">How to add an image on the top of another image?</a></em>, the approach I tried (4 lines commented out) was to create a QPainter with one of the pixmaps and then draw the other pixmap on top of it, however that crashes the program. Any ideas on how to fix this? I eventually want to be able to save the combined pixmap.</p>\n\n<pre><code>import sys\nfrom PyQt5 import QtCore, QtGui, QtWidgets\nfrom PyQt5.QtGui import QPixmap, QPainter, QPen, QBrush, QPainterPath\nfrom PyQt5.QtCore import (QLineF, QPointF, QRectF, Qt)\n\nclass Viewer(QtWidgets.QGraphicsView):\n    def __init__(self, parent):\n        super(Viewer, self).__init__(parent)\n        self._scene = QtWidgets.QGraphicsScene(self)\n        self.photo = QtWidgets.QGraphicsPixmapItem()\n        self.label = QtWidgets.QGraphicsPixmapItem()\n        self._scene.addItem(self.photo)\n        self._scene.addItem(self.label)\n        self.setScene(self._scene)        \n\n    def overlayMaps(self):\n        blue = QtGui.QPixmap(600, 600) \n        blue.fill(QtGui.QColor(0,0,255,0))\n        p = QPainter(blue)\n        self.pen = QPen()\n        self.pen.setColor(QtGui.QColor(0,0,255,255))\n        self.pen.setWidth(10)\n        p.setPen(self.pen)\n        p.drawLine(0,0,600,600)\n\n\n        green = QtGui.QPixmap(600, 600)\n        green.fill(QtGui.QColor(0,255,0,0))            \n        p = QPainter(green)\n        self.pen = QPen()\n        self.pen.setColor(QtGui.QColor(0,255,0,255))\n        self.pen.setWidth(10)\n        p.setPen(self.pen)\n        p.drawLine(600,0,0,600)\n\n        self.photo.setPixmap(blue)\n        self.label.setPixmap(green) \n\n        resultPixmap = QtGui.QPixmap(self.photo.pixmap().width(), self.photo.pixmap().height())\n#        resultPainter = QtGui.QPainter(resultPixmap)\n#        resultPainter.setCompositionMode(QtGui.QPainter.CompositionMode_SourceOver)\n#        resultPainter.drawPixmap(300,300, self.photo.pixmap()) \n#        resultPainter.drawPixmap(300,300, self.label.pixmap()) \n\n\n    def saveOverlayMap(self):\n        pass          \n\nclass Window(QtWidgets.QWidget):\n    def __init__(self):\n        super(Window, self).__init__()\n        self.viewer = Viewer(self)\n        self.viewer.overlayMaps()\n\nif __name__ == '__main__':\n    import sys\n    app = QtWidgets.QApplication(sys.argv)\n    window = Window()\n    window.setGeometry(500, 300, 600, 600)\n    window.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}, {"tags": ["python", "openpyxl"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10688051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85b32466584ceec5ed4edef473dc534b?s=128&d=identicon&r=PG&f=1", "display_name": "Yuni", "link": "https://stackoverflow.com/users/10688051/yuni"}, "edited": false, "score": 0, "creation_date": 1542884887, "post_id": 53428491, "comment_id": 93733216, "body": "I have run the code and it seems that it will pick up the &quot;None&quot; or &quot;Nul&quot; value"}, {"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "reply_to_user": {"reputation": 1, "user_id": 10688051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85b32466584ceec5ed4edef473dc534b?s=128&d=identicon&r=PG&f=1", "display_name": "Yuni", "link": "https://stackoverflow.com/users/10688051/yuni"}, "edited": false, "score": 0, "creation_date": 1542897048, "post_id": 53428491, "comment_id": 93739980, "body": "Test individual cells and adjust as necessary. The above code will work for <code>None, 0, &#39;&#39;</code> but not any strings such as <code>&quot;None&quot;</code>"}], "tags": [], "owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "is_accepted": false, "score": 0, "last_activity_date": 1542881353, "creation_date": 1542881353, "answer_id": 53428491, "question_id": 53420803, "link": "https://stackoverflow.com/questions/53420803/copy-value-to-certain-column-in-different-sheet-using-openpyxl/53428491#53428491", "title": "copy value to certain column in different sheet using openpyxl", "body": "<p>Your second loop is nested so that it will always overwrite all values in the column of the second sheet with the same value from the first.</p>\n\n<p>I'd do something like this:</p>\n\n<pre><code>idx = 2\nfor row in ws1.iter_rows(min_row=9, max_row=43, min_col=10, max_col=10):\n    cell = row[0]\n    if not cell.value:\n        ws2.cell(row=idx, column=4, value=cell.value)\n        idx += 1\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10688051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85b32466584ceec5ed4edef473dc534b?s=128&d=identicon&r=PG&f=1", "display_name": "Yuni", "link": "https://stackoverflow.com/users/10688051/yuni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542881353, "creation_date": 1542836202, "question_id": 53420803, "link": "https://stackoverflow.com/questions/53420803/copy-value-to-certain-column-in-different-sheet-using-openpyxl", "title": "copy value to certain column in different sheet using openpyxl", "body": "<p>I am trying to get the column value from worksheet1 to worksheets2(in specific column), while skipping all the nul/None value in between. My code worked when I printed out all the values in worksheet1 column, exluding all the nul values. However when I saved it to worksheet2, it only showed the last value and duplicate that to the whole column(from row 2 to 20).\nDon't know why only last value was written in the new column</p>\n\n<pre><code>from openpyxl import Workbook\nfrom openpyxl import load_workbook\nsource_file = (r'XXX(Source file).xlsx')\ndest_file = (r'XXX(dest file).xlsx')\n\nwb1=load_workbook(source_file, data_only=True)\nwb1.active=0\nws1=wb1.active\n\nwb2=load_workbook(dest_file)\nwb2.active=0\nws2=wb2.active\n\nfor a in range(9,43):\n  cell2 = ws1.cell(row = a, column = 10)\n  if cell2.value is None or cell2.value == 0:\n     continue\n  else:\n     print(cell2.value)\n     for b in range(2,20):\n        ws2.cell(row = b, column=4).value = cell2.value\nwb2.save(dest_file)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "objectpath"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 2249968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbe8aa9131381beffc257c30529a6213?s=128&d=identicon&r=PG", "display_name": "reinhardS", "link": "https://stackoverflow.com/users/2249968/reinhards"}, "edited": false, "score": 0, "creation_date": 1542842606, "post_id": 53421034, "comment_id": 93718097, "body": "But mine says : Collecting objectpath  Using cached  - HOW could I enforce pip3 to download the correct - seems it uses the P2-version from cache"}, {"owner": {"reputation": 1172, "user_id": 6106484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/584ee637fa0e35fdc7688569a62ef30d?s=128&d=identicon&r=PG&f=1", "display_name": "Aida", "link": "https://stackoverflow.com/users/6106484/aida"}, "reply_to_user": {"reputation": 3, "user_id": 2249968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbe8aa9131381beffc257c30529a6213?s=128&d=identicon&r=PG", "display_name": "reinhardS", "link": "https://stackoverflow.com/users/2249968/reinhards"}, "edited": false, "score": 0, "creation_date": 1542895607, "post_id": 53421034, "comment_id": 93739130, "body": "Try <code>pip uninstall objectpath</code> to uninstall the package."}, {"owner": {"reputation": 1092, "user_id": 1223946, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/GqtV3.png?s=128&g=1", "display_name": "Peter Moore", "link": "https://stackoverflow.com/users/1223946/peter-moore"}, "edited": false, "score": 0, "creation_date": 1550434679, "post_id": 53421034, "comment_id": 96257048, "body": "you would have a version 2 of pip and a version 3. you can use python3 -mpip or python2 -mpip but i have always used pip in a virtual env."}], "tags": [], "owner": {"reputation": 1172, "user_id": 6106484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/584ee637fa0e35fdc7688569a62ef30d?s=128&d=identicon&r=PG&f=1", "display_name": "Aida", "link": "https://stackoverflow.com/users/6106484/aida"}, "is_accepted": false, "score": 1, "last_activity_date": 1542837472, "creation_date": 1542837472, "answer_id": 53421034, "question_id": 53420757, "link": "https://stackoverflow.com/questions/53420757/python3-objectpath-broken/53421034#53421034", "title": "Python3 -- objectpath ...broken?", "body": "<p>To run this in Python 3.x you should <code>pip3 install objectpath</code> otherwise it won't work.</p>\n\n<p>See below how I ran your code:</p>\n\n<pre><code>dell@dell-XPS-15-9572:~/Desktop$ pip3 install objectpath\nCollecting objectpath\nDownloading https://files.pythonhosted.org/packages/21/6a/ed435be72edd1d60b7363cbb38c34aff3004fee02d1c7f9f01435c318cdb/objectpath-0.5-py2.py3-none-any.whl\nInstalling collected packages: objectpath\nSuccessfully installed objectpath-0.5\ndell@dell-XPS-15-9572:~/Desktop$ python3\nPython 3.6.5 (default, Apr  1 2018, 05:46:30) \n[GCC 7.3.0] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more \ninformation.\n&gt;&gt;&gt; from objectpath import *\n&gt;&gt;&gt; tree=Tree({\"a\":1})\n&gt;&gt;&gt; tree.execute(\"$.a\")\n1\n&gt;&gt;&gt; \n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 2249968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbe8aa9131381beffc257c30529a6213?s=128&d=identicon&r=PG", "display_name": "reinhardS", "link": "https://stackoverflow.com/users/2249968/reinhards"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542841757, "creation_date": 1542835993, "last_edit_date": 1542837671, "question_id": 53420757, "link": "https://stackoverflow.com/questions/53420757/python3-objectpath-broken", "title": "Python3 -- objectpath ...broken?", "body": "<p>After hours of unsuccessfully trying to use objectpath in a Python3-script, I made the following simple experiment:</p>\n\n<pre><code>&gt;&gt;&gt; from objectpath import *\n&gt;&gt;&gt; tree=Tree({\"a\":1})\n&gt;&gt;&gt; tree.execute(\"$.a\")\n</code></pre>\n\n<p>Expected output: 1</p>\n\n<p>Success with python (2)</p>\n\n<pre><code>~$ python\nPython 2.7.15rc1 (default, Nov 12 2018, 14:31:15)\n[GCC 7.3.0] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; from objectpath import *\n&gt;&gt;&gt; tree=Tree({\"a\":1})\n&gt;&gt;&gt; tree.execute(\"$.a\")\n1\n&gt;&gt;&gt;\n</code></pre>\n\n<p>Error with python3:</p>\n\n<p>Is there something wrong with my installation of Python3 ?\nobjectpath in P3 neither works in scripts nor on console</p>\n\n<pre><code>$ python3\nPython 3.6.7 (default, Oct 22 2018, 11:32:17)\n[GCC 8.2.0] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; from objectpath import *\n&gt;&gt;&gt; tree=Tree({\"a\":1})\n&gt;&gt;&gt; tree.execute(\"$.a\")\nTraceback (most recent call last):\nFile \"/home/lisa/.local/lib/python3.6/site- \npackages/objectpath/core/parser.py\", line 398, in tokenize_python\n yield type_map[t[0]], t[1]\nKeyError: 4\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\nFile \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nFile \"/home/lisa/.local/lib/python3.6/site- \npackages/objectpath/core/interpreter.py\", line 605, in execute\ntree=self.compile(expr)\nFile \"/home/lisa/.local/lib/python3.6/site- \npackages/objectpath/core/interpreter.py\", line 38, in compile\nret=EXPR_CACHE[expr]=parse(expr,self.D)\nFile \"/home/lisa/.local/lib/python3.6/site- \npackages/objectpath/core/parser.py\", line 464, in parse\nr=expression().getTree()\nFile \"/home/lisa/.local/lib/python3.6/site- \npackages/objectpath/core/parser.py\", line 449, in expression\nleft=t.led(left)\nFile \"/home/lisa/.local/lib/python3.6/site- \n packages/objectpath/core/parser.py\", line 264, in led\nadvance()\nFile \"/home/lisa/.local/lib/python3.6/site- \npackages/objectpath/core/parser.py\", line 161, in advance\ntoken=nextToken()\nFile \"/home/lisa/.local/lib/python3.6/site- \npackages/objectpath/core/parser.py\", line 413, in tokenize\nfor ID, value in source:\nFile \"/home/lisa/.local/lib/python3.6/site- \npackages/objectpath/core/parser.py\", line 405, in tokenize_python\nraise SyntaxError(\"Syntax error\")\n</code></pre>\n"}, {"tags": ["python", "pandas", "pandas-groupby", "split-apply-combine"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1542836168, "post_id": 53420738, "comment_id": 93715963, "body": "I&#39;m not sure that&#39;s valid pandas syntax? I can&#39;t test - does this work, as-posted?"}, {"owner": {"reputation": 728, "user_id": 10295388, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8QvG9FrIbFw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaM2v0hPJ3dO3nr0VYbrOXAEZBL3pA/mo/photo.jpg?sz=128", "display_name": "callmeGuy", "link": "https://stackoverflow.com/users/10295388/callmeguy"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1542836310, "post_id": 53420738, "comment_id": 93716022, "body": "@roganjosh yes, it will work, it&#39;s just like doing df then applying a filer"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1542836442, "post_id": 53420738, "comment_id": 93716075, "body": "with the <code>.</code> in <code>df.group(&#39;clusters&#39;).[&#39;name&#39;,&#39;amount&#39;]</code>? If so, I&#39;ve learned something new."}, {"owner": {"reputation": 728, "user_id": 10295388, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8QvG9FrIbFw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaM2v0hPJ3dO3nr0VYbrOXAEZBL3pA/mo/photo.jpg?sz=128", "display_name": "callmeGuy", "link": "https://stackoverflow.com/users/10295388/callmeguy"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1542836695, "post_id": 53420738, "comment_id": 93716173, "body": "@roganjosh ups, my mistake, without the &quot;.&quot;.  I&#39;ve edited my question"}], "answers": [{"comments": [{"owner": {"reputation": 728, "user_id": 10295388, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8QvG9FrIbFw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaM2v0hPJ3dO3nr0VYbrOXAEZBL3pA/mo/photo.jpg?sz=128", "display_name": "callmeGuy", "link": "https://stackoverflow.com/users/10295388/callmeguy"}, "edited": false, "score": 0, "creation_date": 1542837105, "post_id": 53420921, "comment_id": 93716313, "body": "this works. I am wondering however if there&#39;s a way to do it with group and transform. Do you know if that&#39;s even possible?"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 728, "user_id": 10295388, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8QvG9FrIbFw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaM2v0hPJ3dO3nr0VYbrOXAEZBL3pA/mo/photo.jpg?sz=128", "display_name": "callmeGuy", "link": "https://stackoverflow.com/users/10295388/callmeguy"}, "edited": false, "score": 0, "creation_date": 1542837310, "post_id": 53420921, "comment_id": 93716384, "body": "@callmeGuy, I added a <code>groupby</code> solution, doesn&#39;t use <code>transform</code> though."}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 1, "last_activity_date": 1542837297, "last_edit_date": 1542837297, "creation_date": 1542836805, "answer_id": 53420921, "question_id": 53420738, "link": "https://stackoverflow.com/questions/53420738/how-to-add-a-condition-in-split-apply-combine-and-repeat-solution-on-each-row/53420921#53420921", "title": "How to add a condition in split apply combine and repeat solution on each row?", "body": "<p>You can do this as a two-stage process. First calculate a mapping series, then map by cluster:</p>\n\n<pre><code>s = df.query('tag == 1')\\\n      .sort_values('amount', ascending=False)\\\n      .drop_duplicates('cluster')\\\n      .set_index('cluster')['name']\n\ndf['highest_name'] = df['cluster'].map(s)\n\nprint(df)\n\n   cluster  tag  amount     name highest_name\n0        1    0     200  Michael          NaN\n1        2    1    1200     John         John\n2        2    1     900   Daniel         John\n3        2    0    3000    David         John\n4        2    0     600    Jonny         John\n5        3    0     900  Denisse         Kely\n6        3    1     900     Mike         Kely\n7        3    1    3000     Kely         Kely\n8        3    0    2000    Devon         Kely\n</code></pre>\n\n<hr>\n\n<p>If you want to use <code>groupby</code>, here's one way:</p>\n\n<pre><code>def func(x):\n    names = x.query('tag == 1').sort_values('amount', ascending=False)['name']\n    return names.iloc[0] if not names.empty else np.nan\n\ndf['highest_name'] = df['cluster'].map(df.groupby('cluster').apply(func))\n</code></pre>\n"}], "owner": {"reputation": 728, "user_id": 10295388, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8QvG9FrIbFw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaM2v0hPJ3dO3nr0VYbrOXAEZBL3pA/mo/photo.jpg?sz=128", "display_name": "callmeGuy", "link": "https://stackoverflow.com/users/10295388/callmeguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 53420921, "answer_count": 1, "score": 0, "last_activity_date": 1542837297, "creation_date": 1542835899, "last_edit_date": 1542836607, "question_id": 53420738, "link": "https://stackoverflow.com/questions/53420738/how-to-add-a-condition-in-split-apply-combine-and-repeat-solution-on-each-row", "title": "How to add a condition in split apply combine and repeat solution on each row?", "body": "<p>I have the following <code>pandas</code> dataframe <code>df</code>:</p>\n\n<pre><code>cluster   tag   amount   name\n1         0     200      Michael        \n2         1     1200     John        \n2         1     900      Daniel        \n2         0     3000     David        \n2         0     600      Jonny        \n3         0     900      Denisse        \n3         1     900      Mike        \n3         1     3000     Kely        \n3         0     2000     Devon  \n</code></pre>\n\n<p>What I need to do is add another column in <code>df</code> that writes for each <code>row</code>, the <code>name</code> (from the name column) that has the highest <code>amount</code> where the <code>tag</code> is 1. In other words, the solution looks like this:</p>\n\n<pre><code>cluster   tag   amount   name     highest_amount\n1         0     200      Michael  NaN      \n2         1     1200     John     John   \n2         1     900      Daniel   John     \n2         0     3000     David    John    \n2         0     600      Jonny    John    \n3         0     900      Denisse  Kely      \n3         1     900      Mike     Kely   \n3         1     3000     Kely     Kely   \n3         0     2000     Devon    Kely\n</code></pre>\n\n<p>I've tried something like this:</p>\n\n<pre><code>df.group('clusters')['name','amount'].transform('max')[df['tag']==1]\n</code></pre>\n\n<p>but the problem with this is that the name does note repeat on every row. It will look like this:</p>\n\n<pre><code>cluster   tag   amount   name     highest_amount\n1         0     200      Michael  NaN      \n2         1     1200     John     John   \n2         1     900      Daniel   John     \n2         0     3000     David    NaN    \n2         0     600      Jonny    NaN    \n3         0     900      Denisse  NaN      \n3         1     900      Mike     Kely   \n3         1     3000     Kely     Kely   \n3         0     2000     Devon    NaN\n</code></pre>\n\n<p>Can someone please let me know how to add a condition with split apply combine, and have the solution repeated on each row?</p>\n"}, {"tags": ["python", "python-3.x", "function", "dictionary", "set"], "comments": [{"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1542836993, "post_id": 53420730, "comment_id": 93716266, "body": "Side note: <i>never</i> (even as an example) shadow built-ins, e.g. use <code>d</code> or <code>dct</code> or <code>dict_</code> instead of <code>dict</code>."}], "answers": [{"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 1, "last_activity_date": 1542836277, "creation_date": 1542836277, "answer_id": 53420820, "question_id": 53420730, "link": "https://stackoverflow.com/questions/53420730/return-a-set-of-pairs-of-keys-from-a-dictionary-that-have-a-common-value/53420820#53420820", "title": "Return a set of pairs of keys from a dictionary that have a common value", "body": "<h3><a href=\"https://docs.python.org/3.6/library/collections.html#collections.defaultdict\" rel=\"nofollow noreferrer\"><code>defaultdict</code></a> + <a href=\"https://docs.python.org/3/library/itertools.html#itertools.combinations\" rel=\"nofollow noreferrer\"><code>combinations</code></a></h3>\n\n<p>For a brute force solution, you can invert your dictionary of sets, then use a set comprehension:</p>\n\n<pre><code>from collections import defaultdict\nfrom itertools import combinations\n\nd = {'C': {'123'}, 'A': {'123', '456'}, \n     'D': {'123'}, 'B': {'789', '456'}, \n     'E': {'789'}}\n\ndd = defaultdict(set)\n\nfor k, v in d.items():\n    for w in v:\n        dd[w].add(k)\n\nres = {frozenset(i) for v in dd.values() if len(v) &gt;= 2 for i in combinations(v, 2)}\n\nprint(res)\n\n{frozenset({'A', 'D'}), frozenset({'C', 'D'}),\n frozenset({'B', 'E'}), frozenset({'B', 'A'}),\n frozenset({'C', 'A'})}\n</code></pre>\n\n<p>As you can see the items in <code>res</code> are <code>frozenset</code> objects, i.e. they aren't depending on sorting within tuples. <code>frozenset</code> is required instead of <code>set</code> since <code>set</code> is not hashable.</p>\n"}, {"tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": true, "score": 1, "last_activity_date": 1542838072, "creation_date": 1542838072, "answer_id": 53421124, "question_id": 53420730, "link": "https://stackoverflow.com/questions/53420730/return-a-set-of-pairs-of-keys-from-a-dictionary-that-have-a-common-value/53421124#53421124", "title": "Return a set of pairs of keys from a dictionary that have a common value", "body": "<p>A more efficient one-pass solution would be to use a <code>seen</code> dict that keeps track of a list of keys that have \"seen\" a given value so far:</p>\n\n<pre><code>pairs = set()\nseen = {}\nfor key, values in d.items():\n    for value in values:\n        if value in seen:\n            for seen_key in seen[value]:\n                pairs.add(frozenset((key, seen_key)))\n        seen.setdefault(value, []).append(key)\n</code></pre>\n\n<p><code>pairs</code> would become:</p>\n\n<pre><code>{frozenset({'D', 'A'}), frozenset({'B', 'E'}), frozenset({'B', 'A'}), frozenset({'C', 'D'}), frozenset({'C', 'A'})}\n</code></pre>\n\n<p>You can then easily transform it to a set of lexicographically sorted tuples if you want:</p>\n\n<pre><code>{tuple(sorted(p)) for p in pairs}\n</code></pre>\n\n<p>which returns:</p>\n\n<pre><code>{('A', 'C'), ('B', 'E'), ('C', 'D'), ('A', 'D'), ('A', 'B')}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 1284621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feaac48f6ac0a38b1458b94495f960fd?s=128&d=identicon&r=PG", "display_name": "slavos1", "link": "https://stackoverflow.com/users/1284621/slavos1"}, "is_accepted": false, "score": 2, "last_activity_date": 1542842519, "last_edit_date": 1542842519, "creation_date": 1542841811, "answer_id": 53421728, "question_id": 53420730, "link": "https://stackoverflow.com/questions/53420730/return-a-set-of-pairs-of-keys-from-a-dictionary-that-have-a-common-value/53421728#53421728", "title": "Return a set of pairs of keys from a dictionary that have a common value", "body": "<p>Using <a href=\"https://docs.python.org/3.5/library/itertools.html#itertools.combinations\" rel=\"nofollow noreferrer\">itertools.combinations</a>:</p>\n\n<pre><code>from itertools import combinations\n\nd = {\n    'C': {'123'}, \n    'A': {'123', '456'}, \n    'D': {'123'}, \n    'B': {'789', '456'}, \n    'E': {'789'}\n}\n\ndef MyFunction(d):\n    out = set()\n    for i, j in combinations(d, 2):\n        if d[j].intersection(d[i]) and (i, j) not in out and (j, i) not in out:\n            out.add((i, j))\n    return set(tuple(sorted(i)) for i in out)\n\nprint(MyFunction(d))\nprint(MyFunction(d) == {(\"A\", \"B\"), (\"A\", \"C\"), (\"A\", \"D\"), (\"B\", \"E\"), (\"C\", \"D\")})\n</code></pre>\n\n<p>Output is:</p>\n\n<pre><code>{('A', 'D'), ('A', 'B'), ('B', 'E'), ('A', 'C'), ('C', 'D')}\nTrue\n</code></pre>\n\n<p>If you consider <code>('A', 'C')</code> and <code>('C', 'A')</code> same, you can replace </p>\n\n<pre><code>return set(tuple(sorted(i)) for i in out)\n</code></pre>\n\n<p>with just</p>\n\n<pre><code>return out\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 9472552, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5KQGGeSbknY/AAAAAAAAAAI/AAAAAAAAAPU/WKdn5YT4DFk/photo.jpg?sz=128", "display_name": "Tadej Fir\u0161t", "link": "https://stackoverflow.com/users/9472552/tadej-fir%c5%a1t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 53421124, "answer_count": 3, "score": 2, "last_activity_date": 1542842519, "creation_date": 1542835848, "last_edit_date": 1542836427, "question_id": 53420730, "link": "https://stackoverflow.com/questions/53420730/return-a-set-of-pairs-of-keys-from-a-dictionary-that-have-a-common-value", "title": "Return a set of pairs of keys from a dictionary that have a common value", "body": "<p>How can I write a function, that would take a dictionary and return me a set that would consist of pairs of keys that have at least one common value?</p>\n\n<p>Example:</p>\n\n<p>I have the following dictionary:</p>\n\n<pre><code>dict = {\n'C': {'123'}, \n'A': {'123', '456'}, \n'D': {'123'}, \n'B': {'789', '456'}, \n'E': {'789'}}\n</code></pre>\n\n<p>MyFunction(dict) should return me:</p>\n\n<pre><code>{(\"A\", \"B\"), (\"A\", \"C\"), (\"A\", \"D\"), (\"B\", \"E\"), (\"C\", \"D\")}\n</code></pre>\n"}, {"tags": ["python", "string", "encoding", "int"], "answers": [{"comments": [{"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 1, "creation_date": 1549182232, "post_id": 53420706, "comment_id": 95806578, "body": "This is clear &amp;simple. And it&#39;s fast, because all the heavy arithmetic is performed by methods that run at C speed."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 1, "creation_date": 1549182357, "post_id": 53420706, "comment_id": 95806603, "body": "BTW, you can use negation to perform ceiling division. Eg, <code>-(-n &#47;&#47; 8)</code>."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "reply_to_user": {"reputation": 40794, "user_id": 832230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bpevy.png?s=128&g=1", "display_name": "Acumenus", "link": "https://stackoverflow.com/users/832230/acumenus"}, "edited": false, "score": 1, "creation_date": 1549183380, "post_id": 53420706, "comment_id": 95806830, "body": "@A-B-B :) It&#39;s a nice benefit of Python&#39;s convention of handling signed operands of <code>&#47;&#47;</code> &amp; <code>%</code>. But it is a bit mysterious if you don&#39;t know what&#39;s going on, so I normally add a brief comment like <code># Ceiling division</code> when I use it."}], "tags": [], "owner": {"reputation": 1527, "user_id": 9439097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fLAA.png?s=128&g=1", "display_name": "charel-f", "link": "https://stackoverflow.com/users/9439097/charel-f"}, "is_accepted": true, "score": 5, "last_activity_date": 1549183729, "last_edit_date": 1549183729, "creation_date": 1542835722, "answer_id": 53420706, "question_id": 53420705, "link": "https://stackoverflow.com/questions/53420705/python-reversibly-encode-alphanumeric-string-to-integer/53420706#53420706", "title": "Python: Reversibly encode alphanumeric string to integer", "body": "<p>Here's what I have so far:</p>\n\n<p>string --> bytes</p>\n\n<pre><code>mBytes = m.encode(\"utf-8\")\n</code></pre>\n\n<p>bytes --> int</p>\n\n<pre><code>mInt = int.from_bytes(mBytes, byteorder=\"big\")\n</code></pre>\n\n<p>int --> bytes</p>\n\n<pre><code>mBytes = mInt.to_bytes(((mInt.bit_length() + 7) // 8), byteorder=\"big\")\n</code></pre>\n\n<p>bytes --> string</p>\n\n<pre><code>m = mBytes.decode(\"utf-8\")\n</code></pre>\n\n<p>try it out:</p>\n\n<pre><code>m = \"test123\"\nmBytes = m.encode(\"utf-8\")\nmInt = int.from_bytes(mBytes, byteorder=\"big\")\nmBytes2 = mInt.to_bytes(((mInt.bit_length() + 7) // 8), byteorder=\"big\")\nm2 = mBytes2.decode(\"utf-8\")\nprint(m == m2)\n</code></pre>\n\n<hr>\n\n<p>Here is an identical reusable version of the above:</p>\n\n<pre><code>class BytesIntEncoder:\n\n    @staticmethod\n    def encode(b: bytes) -&gt; int:\n        return int.from_bytes(b, byteorder='big')\n\n    @staticmethod\n    def decode(i: int) -&gt; bytes:\n        return i.to_bytes(((i.bit_length() + 7) // 8), byteorder='big')\n</code></pre>\n\n<p>If you're using Python &lt;3.6, remove the optional type annotations.</p>\n\n<p>Test:</p>\n\n<pre><code>&gt;&gt;&gt; s = 'Test123'\n&gt;&gt;&gt; b = s.encode()\n&gt;&gt;&gt; b\nb'Test123'\n\n&gt;&gt;&gt; BytesIntEncoder.encode(b)\n23755444588720691\n&gt;&gt;&gt; BytesIntEncoder.decode(_)\nb'Test123'\n&gt;&gt;&gt; _.decode()\n'Test123'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40794, "user_id": 832230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bpevy.png?s=128&g=1", "display_name": "Acumenus", "link": "https://stackoverflow.com/users/832230/acumenus"}, "is_accepted": false, "score": 3, "last_activity_date": 1582042690, "last_edit_date": 1582042690, "creation_date": 1549178761, "answer_id": 54500784, "question_id": 53420705, "link": "https://stackoverflow.com/questions/53420705/python-reversibly-encode-alphanumeric-string-to-integer/54500784#54500784", "title": "Python: Reversibly encode alphanumeric string to integer", "body": "<p>Recall that a string can be encoded to bytes, which can then be encoded to an integer. The encodings can then be reversed to get the bytes followed by the original string.</p>\n\n<p>This encoder uses <a href=\"https://docs.python.org/3/library/binascii.html\" rel=\"nofollow noreferrer\"><code>binascii</code></a> to produce an <strong>identical integer encoding</strong> to the one in the answer by charel-f. I believe it to be identical because I extensively tested it.</p>\n\n<p>Credit: <a href=\"https://stackoverflow.com/a/12627915/832230\">this answer</a>.</p>\n\n<pre><code>from binascii import hexlify, unhexlify\n\nclass BytesIntEncoder:\n\n    @staticmethod\n    def encode(b: bytes) -&gt; int:\n        return int(hexlify(b), 16) if b != b'' else 0\n\n    @staticmethod\n    def decode(i: int) -&gt; int:\n        return unhexlify('%x' % i) if i != 0 else b''\n</code></pre>\n\n<p>If you're using Python &lt;3.6, remove the optional type annotations.</p>\n\n<p>Quick test:</p>\n\n<pre><code>&gt;&gt;&gt; s = 'Test123'\n&gt;&gt;&gt; b = s.encode()\n&gt;&gt;&gt; b\nb'Test123'\n\n&gt;&gt;&gt; BytesIntEncoder.encode(b)\n23755444588720691\n&gt;&gt;&gt; BytesIntEncoder.decode(_)\nb'Test123'\n&gt;&gt;&gt; _.decode()\n'Test123'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1527, "user_id": 9439097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fLAA.png?s=128&g=1", "display_name": "charel-f", "link": "https://stackoverflow.com/users/9439097/charel-f"}, "edited": false, "score": 2, "creation_date": 1549182686, "post_id": 54500910, "comment_id": 95806651, "body": "Thank you very much for the answer and for the time you put into this. Have a nice day, and I hope someone can benefit from one of your answers!"}], "tags": [], "owner": {"reputation": 40794, "user_id": 832230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bpevy.png?s=128&g=1", "display_name": "Acumenus", "link": "https://stackoverflow.com/users/832230/acumenus"}, "is_accepted": false, "score": 2, "last_activity_date": 1549211727, "last_edit_date": 1549211727, "creation_date": 1549180131, "answer_id": 54500910, "question_id": 53420705, "link": "https://stackoverflow.com/questions/53420705/python-reversibly-encode-alphanumeric-string-to-integer/54500910#54500910", "title": "Python: Reversibly encode alphanumeric string to integer", "body": "<p>Assuming the character set is merely alphanumeric, i.e. a-z A-Z 0-9, this requires 6 bits per character. As such, using an 8-bit byte-encoding is theoretically an inefficient use of memory.</p>\n\n<p>This answer converts the input bytes into a sequence of 6-bit integers. It encodes these small integers into one large integer using bitwise operations. Whether this  actually translates into real-world storage efficiency is measured by <a href=\"https://docs.python.org/3/library/sys.html#sys.getsizeof\" rel=\"nofollow noreferrer\"><code>sys.getsizeof</code></a>, and is more likely for larger strings.</p>\n\n<p>This implementation customizes the encoding for the choice of character set. If for example you were working with just <code>string.ascii_lowercase</code> (5 bits) rather than <code>string.ascii_uppercase + string.digits</code> (6 bits), the encoding would be correspondingly efficient.</p>\n\n<p>Unit tests are also included.</p>\n\n<pre><code>import string\n\n\nclass BytesIntEncoder:\n\n    def __init__(self, chars: bytes = (string.ascii_letters + string.digits).encode()):\n        num_chars = len(chars)\n        translation = ''.join(chr(i) for i in range(1, num_chars + 1)).encode()\n        self._translation_table = bytes.maketrans(chars, translation)\n        self._reverse_translation_table = bytes.maketrans(translation, chars)\n        self._num_bits_per_char = (num_chars + 1).bit_length()\n\n    def encode(self, chars: bytes) -&gt; int:\n        num_bits_per_char = self._num_bits_per_char\n        output, bit_idx = 0, 0\n        for chr_idx in chars.translate(self._translation_table):\n            output |= (chr_idx &lt;&lt; bit_idx)\n            bit_idx += num_bits_per_char\n        return output\n\n    def decode(self, i: int) -&gt; bytes:\n        maxint = (2 ** self._num_bits_per_char) - 1\n        output = bytes(((i &gt;&gt; offset) &amp; maxint) for offset in range(0, i.bit_length(), self._num_bits_per_char))\n        return output.translate(self._reverse_translation_table)\n\n\n# Test\nimport itertools\nimport random\nimport unittest\n\n\nclass TestBytesIntEncoder(unittest.TestCase):\n\n    chars = string.ascii_letters + string.digits\n    encoder = BytesIntEncoder(chars.encode())\n\n    def _test_encoding(self, b_in: bytes):\n        i = self.encoder.encode(b_in)\n        self.assertIsInstance(i, int)\n        b_out = self.encoder.decode(i)\n        self.assertIsInstance(b_out, bytes)\n        self.assertEqual(b_in, b_out)\n        # print(b_in, i)\n\n    def test_thoroughly_with_small_str(self):\n        for s_len in range(4):\n            for s in itertools.combinations_with_replacement(self.chars, s_len):\n                s = ''.join(s)\n                b_in = s.encode()\n                self._test_encoding(b_in)\n\n    def test_randomly_with_large_str(self):\n        for s_len in range(256):\n            num_samples = {s_len &lt;= 16: 2 ** s_len,\n                           16 &lt; s_len &lt;= 32: s_len ** 2,\n                           s_len &gt; 32: s_len * 2,\n                           s_len &gt; 64: s_len,\n                           s_len &gt; 128: 2}[True]\n            # print(s_len, num_samples)\n            for _ in range(num_samples):\n                b_in = ''.join(random.choices(self.chars, k=s_len)).encode()\n                self._test_encoding(b_in)\n\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre>\n\n<p>Usage example:</p>\n\n<pre><code>&gt;&gt;&gt; encoder = BytesIntEncoder()\n&gt;&gt;&gt; s = 'Test123'\n&gt;&gt;&gt; b = s.encode()\n&gt;&gt;&gt; b\nb'Test123'\n\n&gt;&gt;&gt; encoder.encode(b)\n3908257788270\n&gt;&gt;&gt; encoder.decode(_)\nb'Test123'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 309, "user_id": 10534497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/138dc2c708ad6b58e3a12779cd578803?s=128&d=identicon&r=PG", "display_name": "coder", "link": "https://stackoverflow.com/users/10534497/coder"}, "is_accepted": false, "score": 1, "last_activity_date": 1581965529, "last_edit_date": 1581965529, "creation_date": 1581965197, "answer_id": 60268694, "question_id": 53420705, "link": "https://stackoverflow.com/questions/53420705/python-reversibly-encode-alphanumeric-string-to-integer/60268694#60268694", "title": "Python: Reversibly encode alphanumeric string to integer", "body": "<p>so I needed transfer a dictionary in terms of numbers,\nit may look kinda ugly but it's efficient in the way that every char (english letters) is exactly 2 numbers but it's capable of transfering any kind of unicode char</p>\n\n<pre><code>import json\n\nmyDict = {\n    \"le key\": \"le Valueue\",\n    2 : {\n        \"heya\": 1234569,\n        \"3\": 4\n    },\n    '\u0391 \u03b1, \u0392 \u03b2, \u0393 \u03b3' : '\u05e9\u05dc\u05d5\u05dd'\n}\ndef convertDictToNum(toBeConverted):\n    return  int(''.join([(lambda c: c if len(c) ==2 else '0'+c )(str(ord(c) - 26)) for c in str(json.dumps(toBeConverted))]))\n\ndef loadDictFromNum(toBeDecoded):\n    toBeDecoded = str(toBeDecoded)\n    return json.loads(''.join([chr(int(toBeDecoded[cut:cut + 2]) + 26) for cut in range(0, len(toBeDecoded), 2)]))\n\nnumbersDict = convertDictToNum(myDict)\nprint(numbersDict)\n# 9708827506817595083206088....\nrecoveredDict = loadDictFromNum(numbersDict)\nprint(recoveredDict)\n# {'le key': 'le Valueue', '2': {'heya': 1234569, '3': 4}, '\u0391 \u03b1, \u0392 \u03b2, \u0393 \u03b3': '\u05e9\u05dc\u05d5\u05dd'}\n</code></pre>\n"}], "owner": {"reputation": 1527, "user_id": 9439097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fLAA.png?s=128&g=1", "display_name": "charel-f", "link": "https://stackoverflow.com/users/9439097/charel-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5091, "favorite_count": 1, "accepted_answer_id": 53420706, "answer_count": 4, "score": 3, "last_activity_date": 1582705076, "creation_date": 1542835722, "last_edit_date": 1582705076, "question_id": 53420705, "link": "https://stackoverflow.com/questions/53420705/python-reversibly-encode-alphanumeric-string-to-integer", "title": "Python: Reversibly encode alphanumeric string to integer", "body": "<p>I want to convert a string (composed of alphanumeric characters) into an integer and then convert this integer back into a string:</p>\n\n<p><code>string --&gt; int --&gt; string</code></p>\n\n<p>In other words, I want to represent an alphanumeric string by an integer.</p>\n\n<p>I found a working solution, which I included in the answer, but I do not think it is the best solution, and I am interested in other ideas/methods.</p>\n\n<p>Please don't tag this as duplicate just because a lot of similar questions already exist, I specifically want an easy way of transforming a string into an integer and <strong>vice versa</strong>.</p>\n\n<p>This should work for strings that contain alphanumeric characters, i.e. strings containing numbers and letters.</p>\n"}, {"tags": ["python", "pygame"], "comments": [{"owner": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 0, "creation_date": 1542835923, "post_id": 53420689, "comment_id": 93715872, "body": "That might be because you&#39;re never actually drawing your snake? <code>displaySnake</code> is never called upon, in fact, most of your functions and stuff is never used. And you&#39;ved defined them in a <code>while</code> loop. You never said it, but it&#39;s obvious that this is one of your first ever projects. And I don&#39;t discourage jumping right into game design, game making etc. But you better make sure you have a damn good teacher who can intuitively describe everything to you. Because there&#39;s quite a few mistakes here. If you want to fiddle around with a snake game (part 2 inc because this is getting to long)"}, {"owner": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 0, "creation_date": 1542836025, "post_id": 53420689, "comment_id": 93715911, "body": "I strongly suggest you take a look at the <a href=\"https://github.com/ternus/pygame-examples\" rel=\"nofollow noreferrer\">pygame examples</a> where they have a <a href=\"https://github.com/ternus/pygame-examples/blob/master/snake.py\" rel=\"nofollow noreferrer\">snake game</a>. They&#39;ve solved it quite differently. You&#39;re not far from having a working code yourself. But there&#39;s <b>many</b> things that needs to be fixed, essentially your entire code will look different once you have something that will even render stuff. Then you have the performance issues and all the &quot;don&#39;t do this&quot; in your code. (for instance, recreating functions, every loop)."}, {"owner": {"reputation": 413, "user_id": 5220902, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8da1ae9640eb1806b2a360e8ac3676ac?s=128&d=identicon&r=PG", "display_name": "Ken Dekalb", "link": "https://stackoverflow.com/users/5220902/ken-dekalb"}, "edited": false, "score": 0, "creation_date": 1542836083, "post_id": 53420689, "comment_id": 93715934, "body": "and please make sure that you are indenting code properly."}, {"owner": {"reputation": 91141, "user_id": 142637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9SiZh.png?s=128&g=1", "display_name": "sloth", "link": "https://stackoverflow.com/users/142637/sloth"}, "reply_to_user": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 0, "creation_date": 1542871893, "post_id": 53420689, "comment_id": 93725863, "body": "@Torxed TBH the snake example you linked is far from good and does some questionable things..."}, {"owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 0, "creation_date": 1542875232, "post_id": 53420689, "comment_id": 93727457, "body": "Since this is most likely the first time you write this kind of code, my suggestion is to start lower. Start by making one single function that draws one single thing. Maybe the apple. Once you get that running correctly, build upon it. Don&#39;t rush it and try to write all the code at once."}, {"owner": {"reputation": 69, "user_id": 9953304, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-csM6uwrVtug/AAAAAAAAAAI/AAAAAAAAAAA/mkvcZEe5FA0/photo.jpg?sz=128", "display_name": "user123", "link": "https://stackoverflow.com/users/9953304/user123"}, "edited": false, "score": 0, "creation_date": 1542876053, "post_id": 53420689, "comment_id": 93727882, "body": "So i thought about what you have and you are actually right, thank you guys for the help and for the suggestions! :D"}], "answers": [{"tags": [], "owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "is_accepted": false, "score": 0, "last_activity_date": 1543077144, "creation_date": 1543077144, "answer_id": 53460175, "question_id": 53420689, "link": "https://stackoverflow.com/questions/53420689/snake-game-snake-and-apples-do-not-appear-on-the-screen/53460175#53460175", "title": "Snake game: snake and apples do not appear on the screen", "body": "<p>As mentioned in the comments, the objects don't appear because you never draw them by calling the <code>displaySnake</code> and <code>display_apple</code> functions. It also makes no sense to define these functions in the while loop again and again.</p>\n\n<p>Here's a fixed version of the code. I've changed the movement code, so that the snake moves continually each frame. (It could still be improved, but I tried to keep it simple.)</p>\n\n<pre><code>import pygame, sys, random, time\nfrom pygame.locals import *\n\n\npygame.init()\nmainClock = pygame.time.Clock()\nwindowWidth = 500\nwindowHeight = 500\nwindowSurface = pygame.display.set_mode((windowWidth, windowHeight), 0, 32)\nclock = pygame.time.Clock()\nred = (255, 0, 0)\ngreen = (0, 255, 0)\ncolor = (100, 100, 100)\nsnakeHead = [250, 250]\nsnakePosition = [[250, 250],[240, 250],[230, 250]]\napplePosition = [random.randrange(1,50)*10,random.randrange(1,50)*10]\napple = pygame.Surface((10, 10))\napple.fill(green)\nscore = 0\nspeed = 10\n# Define a velocity variable (a list or better a pygame.Vector2).\nvelocity = pygame.Vector2(speed, 0)\n\n\ndef collisionBoundarias(snakeHead):\n    return snakeHead[0] &gt;= 500 or snakeHead[0] &lt; 0 or snakeHead[1] &gt;= 500 or snakeHead[1] &lt; 0\n\n\ndef collisionApple(applePosition, score):\n    applePosition = [random.randrange(1,50)*10,random.randrange(1,50)*10]\n    score += 1\n    return applePosition, score\n\n\ndef displaySnake(snakePosition):\n    for position in snakePosition:\n        pygame.draw.rect(windowSurface, red, pygame.Rect(position[0], position[1], 10, 10))\n\n\ndef display_apple(windowSurface, applePosition, apple):\n    windowSurface.blit(apple, (applePosition[0], applePosition[1]))\n\n\nwhile True:\n    # Event handling.\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            pygame.quit()\n            sys.exit()\n        if event.type == pygame.KEYDOWN:\n            # Replace `type` with `key`.\n            if event.key == pygame.K_RIGHT or event.key == pygame.K_d:\n                velocity.x = speed\n                velocity.y = 0\n            if event.key == pygame.K_LEFT or event.key == pygame.K_a:\n                velocity.x = -speed\n                velocity.y = 0\n            if event.key == pygame.K_UP or event.key == pygame.K_w:\n                velocity.x = 0\n                velocity.y = -speed\n            if event.key == pygame.K_DOWN or event.key == pygame.K_s:\n                velocity.x = 0\n                velocity.y = speed\n\n    # Game logic.\n    snakeHead[0] += velocity.x  # Update the x-position every frame.\n    snakeHead[1] += velocity.y  # Update the y-position every frame.\n    snakePosition.insert(0, snakeHead)\n    snakePosition.pop()\n\n    if snakeHead == applePosition:\n        applePosition, score = collisionApple(applePosition, score)\n        snakePosition.insert(0, snakeHead)\n\n    # Drawing.\n    windowSurface.fill(color)\n    displaySnake(snakePosition)\n    display_apple(windowSurface, applePosition, apple)\n    pygame.display.update()\n    clock.tick(20)\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 9953304, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-csM6uwrVtug/AAAAAAAAAAI/AAAAAAAAAAA/mkvcZEe5FA0/photo.jpg?sz=128", "display_name": "user123", "link": "https://stackoverflow.com/users/9953304/user123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1543077144, "creation_date": 1542835641, "question_id": 53420689, "link": "https://stackoverflow.com/questions/53420689/snake-game-snake-and-apples-do-not-appear-on-the-screen", "title": "Snake game: snake and apples do not appear on the screen", "body": "<p>I'm trying to make the snake game in python, but sadly my snake and my apples aren't appearing on the screen, all i see is a gray screen with nothing on it, can you help me out? thanks!\nP.S - i would like an explanation as well about why my current code isn't working so i would avoid it in the future, thanks again. </p>\n\n<pre><code>import pygame, sys, random, time\nfrom pygame.locals import *\n\npygame.init()\nmainClock = pygame.time.Clock()\nwindowWidth = 500\nwindowHeight = 500\nwindowSurface = pygame.display.set_mode((windowWidth, windowHeight), 0, 32)\nred = (255, 0, 0)\ngreen = (0, 255, 0)\ncolor = (100, 100, 100)\nsnakeHead = [250, 250]\nsnakePosition = [[250, 250],[240, 250],[230, 250]]\napplePosition = [random.randrange(1,50)*10,random.randrange(1,50)*10]\n\ndef collisionBoundarias(snakeHead):\n    if snakeHead[0] &gt;= 500 or snakeHead[0] &lt; 0 or snakeHead[1] &gt;= 500 or snakeHead[1] &lt; 0:\n        return 1\n    else:\n        return 0\n\ndef collisionSelf(SnakePosition):\n    snakeHead = snakePosition[0]\n    if snakeHead in snakePosition[1:]:\n        return 1\n    else:\n        return 0\n\nwhile True:\n    windowSurface.fill(color)\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            pygame.quit()\n            sys.exit()\n        if event.type == pygame.KEYDOWN:\n            if event.type == pygame.K_RIGHT or event.key == pygame.K_d:\n                snakeHead[0] += 10\n            if event.type == pygame.K_LEFT or event.key == pygame.K_a:\n                snakeHead[0] -= 10\n            if event.type == pygame.K_UP or event.type == pygame.K_w:\n                snakeHead[1] += 10\n            if event.type == pygame.K_DOWN or event.type == pygame.K_s:\n                snakeHead[1] -= 10\n\n    def displaySnake(snakePosition):\n        for position in snakePosition:\n            pygame.draw.rect(windowSurface   ,red,pygame.Rect(position[0],position[1],10,10))\n\n    def display_apple(windowSurface, applePosition, apple):\n        windowSurface.blit(apple ,(applePosition[0], applePosition[1]))\n\n    snakePosition.insert(0,list(snakeHead))\n    snakePosition.pop()\n\n\n    def displayFinalScore(displayText, finalScore):\n        largeText = pygame.font.Font('freesansbold.ttf',35)\n        TextSurf = largeText.render(displayText, True, (255, 255, 255))\n        TextRect = TextSurf.get_rect()\n        TextRect.center = ((windowWidth/2),(windowHeight/2))\n        windowSurface.blit(TextSurf, TextRect)\n        pygame.display.update()\n        time.sleep(2)\n\n    def collisionApple(applePosition, score):\n        applePosition = [random.randrange(1,50)*10,random.randrange(1,50)*10]\n        score += 1\n        return applePosition, score\n\n    if snakeHead == applePosition:\n        applePosition, score = collisionApple(applePosition, score)\n        snakePosition.insert(0,list(snakeHead))\n\n\n    pygame.display.update()\n    clock = pygame.time.Clock()\n    clock.tick(20)\n</code></pre>\n"}, {"tags": ["python", "macos", "shell", "command-line", "pip"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 2, "creation_date": 1542835563, "post_id": 53420611, "comment_id": 93715727, "body": "You shouldn&#39;t download source files for pip. Pip is installed with Python on all recent versions; if for some reason you really don&#39;t have it, you should <a href=\"https://pip.pypa.io/en/stable/installing/\" rel=\"nofollow noreferrer\">follow the instructions</a> to install it."}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1542837051, "post_id": 53420611, "comment_id": 93716291, "body": "<a href=\"https://stackoverflow.com/search?q=%5Bpip%5D+how+to+install+pip\">stackoverflow.com/search?q=%5Bpip%5D+how+to+install+pip</a>"}, {"owner": {"reputation": 41, "user_id": 10665388, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SEuvEDX9S2Y/AAAAAAAAAAI/AAAAAAAAAEQ/jtsKaiGR5K4/photo.jpg?sz=128", "display_name": "CYRUS", "link": "https://stackoverflow.com/users/10665388/cyrus"}, "edited": false, "score": 0, "creation_date": 1542841996, "post_id": 53420611, "comment_id": 93717900, "body": "but in general isn&#39;t there a way to install packages that we get from the web into the bin ?"}], "owner": {"reputation": 41, "user_id": 10665388, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SEuvEDX9S2Y/AAAAAAAAAAI/AAAAAAAAAEQ/jtsKaiGR5K4/photo.jpg?sz=128", "display_name": "CYRUS", "link": "https://stackoverflow.com/users/10665388/cyrus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "closed_date": 1542854944, "answer_count": 0, "score": 0, "last_activity_date": 1542835166, "creation_date": 1542835166, "question_id": 53420611, "link": "https://stackoverflow.com/questions/53420611/how-to-use-a-downloaded-package-in-the-command-line", "closed_reason": "Duplicate", "title": "How to use a downloaded package in the command line", "body": "<p>Hi I think this is a really common question but I don't really know of to formulate it ; I have downloaded files (source code) in order to instal pip (python) to my computer, for using it in my command line. But the thing is that when a have downloaded the files and  opened them I don't know what to do with my pip-18.1 folder because and it seem logic that at this point the pip command is not working yet. </p>\n\n<p>Please help me I'm lost, I think there is a link with the bin folder</p>\n"}, {"tags": ["java", "python", "bigdata", "generator", "template-engine"], "answers": [{"tags": [], "owner": {"reputation": 2436, "user_id": 3811108, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9fc54268a6bde3ef8b81accbe76cc4da?s=128&d=identicon&r=PG&f=1", "display_name": "Meiblorn", "link": "https://stackoverflow.com/users/3811108/meiblorn"}, "is_accepted": false, "score": 0, "last_activity_date": 1542840881, "creation_date": 1542840881, "answer_id": 53421582, "question_id": 53420607, "link": "https://stackoverflow.com/questions/53420607/looking-for-unusual-template-engine-for-massive-data-generation/53421582#53421582", "title": "Looking for unusual template engine for massive data generation", "body": "<p>Ok,</p>\n\n<p>No one knows ...</p>\n\n<p>I've created one: <a href=\"https://medium.com/@meiblorn/boltun-ultimate-massive-similar-text-data-generator-f952c6add37d\" rel=\"nofollow noreferrer\">https://medium.com/@meiblorn/boltun-ultimate-massive-similar-text-data-generator-f952c6add37d</a></p>\n\n<p>Feel free to submit PR's</p>\n"}], "owner": {"reputation": 2436, "user_id": 3811108, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9fc54268a6bde3ef8b81accbe76cc4da?s=128&d=identicon&r=PG&f=1", "display_name": "Meiblorn", "link": "https://stackoverflow.com/users/3811108/meiblorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1542840881, "creation_date": 1542835149, "last_edit_date": 1542835567, "question_id": 53420607, "link": "https://stackoverflow.com/questions/53420607/looking-for-unusual-template-engine-for-massive-data-generation", "title": "Looking for unusual template engine for massive data generation", "body": "<p>I am looking for template data generator which will generate all the combinations of my input template like:</p>\n\n<pre><code>Given: template engine ( any \u2014 function to select \"one of ...\" )\nInput: [% any('Hi', 'Hello') %] human [% any('!', '?') %] \nOutput:\n&gt; Hi human !\n&gt; Hello human !\n&gt; Hi human ?\n&gt; Hello human ?\n</code></pre>\n\n<p>Could you advise any?</p>\n\n<ul>\n<li>It must be deterministic algorithm. Please, do not suggest implementations which relies on random.</li>\n<li>It would be great if it would support concurrency features to generate massive amounts of data</li>\n</ul>\n"}, {"tags": ["python", "list", "datetime"], "comments": [{"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1542840360, "post_id": 53420554, "comment_id": 93717374, "body": "The first part of this description makes sense to me now (also, please edit your old questions instead of asking new ones for the same thing---when you edit, they get put back up at the top of the queue---or at least delete the old ones)."}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1542840383, "post_id": 53420554, "comment_id": 93717379, "body": "I don&#39;t understand why you&#39;re trying to append lists themselves. Your first example says dates should just be a list. But then you&#39;re doing <code>dates[i].append(stuff)</code>. This means <code>dates</code> is a list of lists. Which way is correct?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9366862"}, "edited": false, "score": 0, "creation_date": 1542840486, "post_id": 53420554, "comment_id": 93717407, "body": "dates is going to be a list of lists"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9366862"}, "edited": false, "score": 0, "creation_date": 1542840524, "post_id": 53420554, "comment_id": 93717420, "body": "I just did lists in the first example to illustrate clearly"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9366862"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1542840685, "post_id": 53420554, "comment_id": 93717464, "body": "@AlexanderReynolds If needed I could zip and send the whole jupyter notebook file (just a .csv and 1 notebook)"}], "answers": [{"comments": [{"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1543044475, "post_id": 53455953, "comment_id": 93784289, "body": "I think this answer is partly good (using <code>dateutil.relativedelta</code> to handle the month offsets, especially), but the <code>reduce</code> code is impossible for me to understand. That may just mean I&#39;m a mediocre functional programmer, but I&#39;m pretty sure you could write an explicit loop to do the same calculation and it would be a lot clearer."}, {"owner": {"reputation": 23340, "user_id": 1018659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e160edef613d2c046f37285db232a5?s=128&d=identicon&r=PG", "display_name": "Arnon Rotem-Gal-Oz", "link": "https://stackoverflow.com/users/1018659/arnon-rotem-gal-oz"}, "reply_to_user": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1543045190, "post_id": 53455953, "comment_id": 93784405, "body": "It is just taking the payments one by one and the list of dates so far it then adds the calculated payment to the lisg"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9366862"}, "edited": false, "score": 0, "creation_date": 1543180780, "post_id": 53455953, "comment_id": 93814765, "body": "I am trying to utilize your code but its not really working for me at all. Should I provide my entire code so that you can modify what I have?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9366862"}, "edited": false, "score": 0, "creation_date": 1543182659, "post_id": 53455953, "comment_id": 93815250, "body": "Also what is result[-1] in the last part of your code?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9366862"}, "edited": false, "score": 0, "creation_date": 1543183077, "post_id": 53455953, "comment_id": 93815339, "body": "------------------------------------------------------------&zwnj;&#8203;--------------- IndexError                                Traceback (most recent call last) &lt;ipython-input-22-3beef40f97a2&gt; in &lt;module&gt;()      13 dates = [d]      14 for p in number_of_payments: ---&gt; 15     dates += [calc_payment(result[-1],p)]      16 print(dates[0])      17   IndexError: list index out of range"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9366862"}, "edited": false, "score": 0, "creation_date": 1543183308, "post_id": 53455953, "comment_id": 93815388, "body": "Following your steps this is where I am:                                                               &#39;d = [] for i in range(len(number_of_payments)):     d.append(datetime.datetime.strptime(NDD[i], &#39;%m/%d/%Y&#39;)) def calc_payment(previous_payment,i):     return previous_payment+relativedelta(months=(-1*i))  dates = [d] for p in number_of_payments:     dates += [calc_payment(result[-1],p)]&#39;"}, {"owner": {"reputation": 23340, "user_id": 1018659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e160edef613d2c046f37285db232a5?s=128&d=identicon&r=PG", "display_name": "Arnon Rotem-Gal-Oz", "link": "https://stackoverflow.com/users/1018659/arnon-rotem-gal-oz"}, "edited": false, "score": 0, "creation_date": 1543196284, "post_id": 53455953, "comment_id": 93817895, "body": "What&#39;s NDD in your code? As for the result[-1] that means the last item in result"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9366862"}, "edited": false, "score": 0, "creation_date": 1543199621, "post_id": 53455953, "comment_id": 93818537, "body": "I take NDD from the data frame column which is a column vector of dates of type str. I am trying to get your code to work for mine but I cannot get it to work as result is not defined"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9366862"}, "edited": false, "score": 0, "creation_date": 1543199660, "post_id": 53455953, "comment_id": 93818544, "body": "You have the best answer thus far but I just need some help getting what you did to work for my code."}, {"owner": {"reputation": 23340, "user_id": 1018659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e160edef613d2c046f37285db232a5?s=128&d=identicon&r=PG", "display_name": "Arnon Rotem-Gal-Oz", "link": "https://stackoverflow.com/users/1018659/arnon-rotem-gal-oz"}, "edited": false, "score": 0, "creation_date": 1543207774, "post_id": 53455953, "comment_id": 93820135, "body": "And do you have a single number of payments vector or is that a data frame?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9366862"}, "edited": false, "score": 0, "creation_date": 1543208054, "post_id": 53455953, "comment_id": 93820201, "body": "No the number_of_payments is a 1345 by 12 matrix or list of lists."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9366862"}, "edited": false, "score": 0, "creation_date": 1543208078, "post_id": 53455953, "comment_id": 93820206, "body": "As in the number_of_payments has a 1345 rows and 12 columns"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9366862"}, "edited": false, "score": 0, "creation_date": 1543210554, "post_id": 53455953, "comment_id": 93820727, "body": "Should I somehow post the .csv file? My apologies for the plethora of messages..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9366862"}, "edited": false, "score": 0, "creation_date": 1543214251, "post_id": 53455953, "comment_id": 93821768, "body": "For your edited post I am getting an error for ndd[&#39;start&#39;], TypeError: (&#39;data type not understood&#39;, &#39;occurred at index ndd&#39;)"}, {"owner": {"reputation": 23340, "user_id": 1018659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e160edef613d2c046f37285db232a5?s=128&d=identicon&r=PG", "display_name": "Arnon Rotem-Gal-Oz", "link": "https://stackoverflow.com/users/1018659/arnon-rotem-gal-oz"}, "edited": false, "score": 0, "creation_date": 1543214394, "post_id": 53455953, "comment_id": 93821809, "body": "you need to from datetime import datetime (and not import datetime)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9366862"}, "edited": false, "score": 0, "creation_date": 1543214610, "post_id": 53455953, "comment_id": 93821886, "body": "I apologize but your code is still not working for me at all, I am not sure what I am doing wrong."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9366862"}, "edited": false, "score": 0, "creation_date": 1543214847, "post_id": 53455953, "comment_id": 93821966, "body": "Please see edited where I attempt to incorporate your code. I really think we could both save us time if I can send you my .csv file"}], "tags": [], "owner": {"reputation": 23340, "user_id": 1018659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e160edef613d2c046f37285db232a5?s=128&d=identicon&r=PG", "display_name": "Arnon Rotem-Gal-Oz", "link": "https://stackoverflow.com/users/1018659/arnon-rotem-gal-oz"}, "is_accepted": true, "score": 1, "last_activity_date": 1543219457, "last_edit_date": 1543219457, "creation_date": 1543042933, "answer_id": 53455953, "question_id": 53420554, "link": "https://stackoverflow.com/questions/53420554/datetime-manipulation-with-lists/53455953#53455953", "title": "Datetime manipulation with lists", "body": "<p>This is for Python 3 (you need to pip install <code>python-dateutil</code>).\n(edited per comments)</p>\n\n<pre><code>df=pd.read_csv('Paystring Data.csv')\ncpi=df['Contractual PI']\nstart=df['NDD 8/31'].apply(pd.to_datetime).astype(datetime)\ncf = df.iloc[:,1:13].replace('[^0-9.]', '', regex=True).astype(float)\npayments =  cf.apply(lambda p: round(p/cpi))\ndiffs=payments.cumsum(axis=1).applymap(lambda i: relativedelta(months=(-1*i)))\npayments=diffs.apply(lambda x: start+x)\nresult=pd.concat([start,payments],axis=1)\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9366862"}, "edited": false, "score": 0, "creation_date": 1543180173, "post_id": 53457775, "comment_id": 93814586, "body": "I could give you the dataframe if that would help? Not sure how to attach a .csv file"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9366862"}, "edited": false, "score": 0, "creation_date": 1543180315, "post_id": 53457775, "comment_id": 93814622, "body": "Also I am not sure where the years are in the result"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9366862"}, "edited": false, "score": 0, "creation_date": 1543180361, "post_id": 53457775, "comment_id": 93814638, "body": "I can provide the .csv file or send it to you?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9366862"}, "edited": false, "score": 0, "creation_date": 1543181681, "post_id": 53457775, "comment_id": 93815019, "body": "Yea, your result does not make sense it should be 11/18 10/18 10/18 8/18 8/18 6/18 5/18 4/18 4/18 2/18 1/18 12/17"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9366862"}, "edited": false, "score": 0, "creation_date": 1543181705, "post_id": 53457775, "comment_id": 93815024, "body": "Note you can treat each number of payments to be of year 2018"}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 1, "last_activity_date": 1543060234, "last_edit_date": 1543060234, "creation_date": 1543059861, "answer_id": 53457775, "question_id": 53420554, "link": "https://stackoverflow.com/questions/53420554/datetime-manipulation-with-lists/53457775#53457775", "title": "Datetime manipulation with lists", "body": "<h3><a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.to_datetime.html\" rel=\"nofollow noreferrer\"><code>pd.to_datetime</code></a> + <a href=\"https://docs.scipy.org/doc/numpy-1.15.0/reference/generated/numpy.cumsum.html\" rel=\"nofollow noreferrer\"><code>np.cumsum</code></a></h3>\n\n<p>Since you are using Pandas, I recommend you take advantage of the <em>vectorised</em> methods available to Pandas / NumPy. In this case, it seems like you wish to subtract the <em>cumulative sum</em> of a list from a fixed starting point.</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\nNDD = '11/1/2018'\ndate = pd.to_datetime(NDD)\nnumber_of_payments = [1, 0, 2, 0, 2, 1, 1, 0, 2, 1, 1, 1]\n\nres = date.month - np.cumsum([0] + number_of_payments[:-1])\nres[res &lt;= 0] += 12\n\nprint(res)\n\narray([11, 10, 10,  8,  8,  6,  5,  4,  4,  2,  1, 12], dtype=int32)\n</code></pre>\n\n<p>You haven't provided an input dataframe, so it's difficult to determine exactly what help you need to implement the above logic, but it is easily extendable to larger data sets.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9366862"}, "edited": false, "score": 0, "creation_date": 1543180652, "post_id": 53460081, "comment_id": 93814722, "body": "I am really confused by your code, should I just zip the jupyter file to you so that I can follow your answer"}, {"owner": {"reputation": 4162, "user_id": 1700467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0727065649ed7c75df7f105f9d853b6?s=128&d=identicon&r=PG", "display_name": "skadya", "link": "https://stackoverflow.com/users/1700467/skadya"}, "edited": false, "score": 0, "creation_date": 1543199018, "post_id": 53460081, "comment_id": 93818427, "body": "The section <b>main</b> is just for illustration in this post and your can remove it completely.  You may define the function &quot;calc_payments&quot; in one of your  existing python module or define a new one. It&#39;s upto you..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9366862"}, "edited": false, "score": 0, "creation_date": 1543212617, "post_id": 53460081, "comment_id": 93821251, "body": "How do I apply your code to what I have? I just cannot adapt it to what I have."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9366862"}, "edited": false, "score": 0, "creation_date": 1543216401, "post_id": 53460081, "comment_id": 93822537, "body": "Hi, interested in finishing this entire code for 100 USD?"}], "tags": [], "owner": {"reputation": 4162, "user_id": 1700467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0727065649ed7c75df7f105f9d853b6?s=128&d=identicon&r=PG", "display_name": "skadya", "link": "https://stackoverflow.com/users/1700467/skadya"}, "is_accepted": false, "score": 1, "last_activity_date": 1543076499, "creation_date": 1543076499, "answer_id": 53460081, "question_id": 53420554, "link": "https://stackoverflow.com/questions/53420554/datetime-manipulation-with-lists/53460081#53460081", "title": "Datetime manipulation with lists", "body": "<p><strong>Python3 (datetime &amp; list)</strong>\nComments are in-lined. </p>\n\n<pre><code>from datetime import datetime, timedelta\n\n\ndef calc_payments(ndd: str, num_of_payments: list):\n    def subtract_months(month: datetime, num: int):\n        # Make sure given month is at 1 day of month\n        month = month.replace(day=1)\n        for _ in range(num):\n            # Subtract the date by 1 day to calc prev month last day\n            # Change the calculated prev month last day to 1st day\n            month = (month - timedelta(days=1)).replace(day=1)\n        return month\n\n    ndd_date: datetime = datetime.strptime(ndd, '%m/%d/%Y')\n    payments = list()\n\n    payments.append(ndd_date)\n\n    # Loop/logic as described in Step 3 by OP\n    for i in range(1, len(num_of_payments)):\n        ndd_date = subtract_months(ndd_date, num_of_payments[i - 1])\n        payments.append(ndd_date)\n\n    return payments\n\n\nif __name__ == '__main__':\n    NDD = \"11/1/2018\"\n    number_of_payments = [1, 0, 2, 0, 2, 1, 1, 0, 2, 1, 1, 1]\n    for f in calc_payments(NDD, number_of_payments):\n        # Format date to month/2-digit-year\n        print(f\"{f.month}/{f.strftime('%y')}\", end=\" \")\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9366862"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 466, "favorite_count": 0, "accepted_answer_id": 53455953, "answer_count": 3, "score": 8, "last_activity_date": 1543252949, "creation_date": 1542834859, "last_edit_date": 1543252949, "question_id": 53420554, "link": "https://stackoverflow.com/questions/53420554/datetime-manipulation-with-lists", "title": "Datetime manipulation with lists", "body": "<p>This is hard to explain but I will try to represent this in a small example:</p>\n\n<pre><code>NDD = 11/1/2018\n</code></pre>\n\n<p>number of payments:</p>\n\n<pre><code>1 0 2 0 2 1 1 0 2 1 1 1\n</code></pre>\n\n<p>Since the first month starts with <code>11</code> in NDD then the first element of my list will be <code>11</code>, to compute the next element I take the first month (<code>11</code>) and subtract the first payment <code>1</code> and then the second element is <code>10</code>. This proceeds and the pattern is clear if you follow the logic so I will have </p>\n\n<pre><code>11 10 10 8 8 6 5 4 4 2 1 12\n</code></pre>\n\n<p>To make it even more clear:</p>\n\n<pre><code>number_of_payments = [1 0 2 0 2 1 1 0 2 1 1 1]\n</code></pre>\n\n<p>Algorithm:</p>\n\n<p>Step 1 - Create an empty list:</p>\n\n<pre><code>dates = []\n</code></pre>\n\n<p>Step 2 - Append the first month of NDD to the first index of dates</p>\n\n<pre><code>dates.append(NDD.month)\n</code></pre>\n\n<p>Step 3 - Now perform this formula:</p>\n\n<pre><code>for i in range(1,12):\ndates[i] = (dates[i-1] + 12 - number_of_payments[i-1]) % 12\n</code></pre>\n\n<p>Step 4 - The final result will be</p>\n\n<pre><code>dates = [11 10 10 8 8 6 5 4 4 2 1 12]\n</code></pre>\n\n<p>Although I was able to do this I need to factor in the years of what NDD started with so what I want to have is <strong>THE RESULT SHOULD BE:</strong></p>\n\n<pre><code>11/18 10/18 10/18 8/18 8/18 6/18 5/18 4/18 4/18 2/18 1/18 12/17\n</code></pre>\n\n<p>Now to go with what I have. This is what I have for NDD:</p>\n\n<pre><code>print(type(NDD))\n</code></pre>\n\n<p>Here is a view values from NDD</p>\n\n<pre><code>print(NDD[0:3])\n0   2018-08-01\n1   2018-07-01\n2   2018-11-01\n</code></pre>\n\n<p>Here are the number_of_payments information:</p>\n\n<pre><code>print(type(number_of_payments))\n&lt;class 'list'&gt;\n</code></pre>\n\n<p>Here is the first row (same as the example above)</p>\n\n<pre><code>print(number_of_payments[0])\n[ 0.  1.  0.  1.  1.  1.  0.  5.  1.  0.  2.  1.]\n</code></pre>\n\n<p>This is what I am trying to do to get the result but it does not work:</p>\n\n<pre><code>dates = []\nfor i in range(len(number_of_payments)):\n    dates.append([NDD[i]])\n    for j in range(1, len(number_of_payments[i])):\n        dates[i].append((dates[i][j-1] + 12 - number_of_payments[i][j-1]) % 12)\nfor date_row in dates:\n    for n, i in enumerate(date_row):\n        if i == 0:\n            date_row[n] = 12\nprint(dates[0])\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-123-907a0962fd65&gt; in &lt;module&gt;()\n      4     dates.append([NDD[i]])\n      5     for j in range(1, len(number_of_payments[i])):\n----&gt; 6         dates[i].append((dates[i][j-1] + 12 - number_of_payments[i][j-1]) % 12)\n      7 for date_row in dates:\n      8     for n, i in enumerate(date_row):\n\npandas/_libs/tslib.pyx in pandas._libs.tslib._Timestamp.__add__ (pandas\\_libs\\tslib.c:22331)()\n\nValueError: Cannot add integral value to Timestamp without freq.\n</code></pre>\n\n<p>I hope this is clear.</p>\n\n<p><strong>Entire Code:</strong></p>\n\n<pre><code># In[9]:\n\n\n# Import modules\nimport numpy as np\nimport pandas as pd\nimport datetime as dt\nfrom functools import reduce\nimport datetime\nfrom dateutil.relativedelta import *\n\n\n# In[10]:\n\n\n# Import data file\ndf = pd.read_csv(\"Paystring Data.csv\")\ndf.head()\n\n\n# In[11]:\n\n\n# Get column data into a list\nx = list(df)\n\n\n# In[12]:\n\n\n# Append column data into cpi, NDD, and as of dates\nNDD = df['NDD 8/31']\ncpi = df['Contractual PI']\nas_of_date = pd.Series(pd.to_datetime(df.columns.str[:8], errors='coerce'))\nas_of_date = as_of_date[1:13]\npayment_months =  pd.to_datetime(as_of_date, errors = 'coerce').dt.month.tolist()\n\n\n# In[13]:\n\n\n# Get cash flows\ncf = df.iloc[:,1:13].replace('[^0-9.]', '', regex=True).astype(float)\ncf = cf.values\n\n\n# In[14]:\n\n\n# Calculate number of payments\nnumber_of_payments = []\ni = 0\nwhile i &lt; len(cpi):\n    number_of_payments.append(np.round_(cf[:i + 1] / cpi[i]))\n    i = i + 1\n\n\n# In[15]:\n\n\n# Calculate the new NDD dates\n# dates = []\n# for i in range(len(number_of_payments)):\n#     dates.append([NDD_month[i]])\n#     for j in range(1, len(number_of_payments[i][0])):\n#         dates[i].append((dates[i][j-1] + 12 - number_of_payments[i][0][j-1]) % 12)\n# print(dates[0])\nd = []\nfor i in range(len(number_of_payments)):\n    d.append(datetime.datetime.strptime(NDD[i], '%m/%d/%Y'))\ndef calc_payment(previous_payment,i):\n    return previous_payment+relativedelta(months=(-1*i)) \ndates = [d]\nfor p in number_of_payments:\n    dates += [calc_payment(result[-1],p)]\n\n\n\n\n\n# In[ ]:\n\n\n# Calculate paystring\npaystring = []\nfor i in range(len(payment_months)):\n    for j in range(len(dates[i])):\n        if payment_months[i] &lt; dates[i][j]:\n            paystring.append(0)\n        elif NDD_day[j] &gt; 1:\n            paystring.append((payment_months[i] + 12 - dates[i][j]) % 12)\n        else:\n            paystring.append( (payment_months[i] + 12 - dates[i][j]) + 1) % 12)\nprint(paystring[0])\n</code></pre>\n\n<p>I am currently stuck on implementing Arnon Rotem-Gal-Oz solution to adapt to this. Here is also a screen shot of the data frame. Please let me know if more information would help.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>I cannot seem to get any good answers since the only person that had a close solution deleted it. I have now posted this to <a href=\"https://www.codementor.io/u/dashboard/my-requests/5p8xirscop?from=active\" rel=\"nofollow noreferrer\">https://www.codementor.io/u/dashboard/my-requests/5p8xirscop?from=active</a>. Paying 100 USD for anyone to give me a complete solution and I mean totally complete not just sort of complete.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Zzv0w.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Zzv0w.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Edit:</strong></p>\n\n<p>I try to run this code</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nfrom datetime import datetime, timedelta\nfrom functools import reduce\nfrom dateutil.relativedelta import *\ndf=pd.read_csv('Paystring Data.csv')\ncpi=df['Contractual PI']\nstart=df['NDD 8/31'].apply(pd.to_datetime).astype(datetime)\ncf = df.iloc[:,1:13].replace('[^0-9.]', '', regex=True).astype(float)\npayments =  cf.apply(lambda p: round(p/cpi))\ndiffs=payments.cumsum(axis=1).applymap(lambda i: relativedelta(months=(-1*i)))\npayments=diffs.apply(lambda x: start+x)\nresult=pd.concat([start,payments],axis=1)\n</code></pre>\n\n<p>and I am getting this error:</p>\n\n<pre><code>---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\pandas\\core\\ops.py in na_op(x, y)\n    657             result = expressions.evaluate(op, str_rep, x, y,\n--&gt; 658                                           raise_on_error=True, **eval_kwargs)\n    659         except TypeError:\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\pandas\\core\\computation\\expressions.py in evaluate(op, op_str, a, b, raise_on_error, use_numexpr, **eval_kwargs)\n    210         return _evaluate(op, op_str, a, b, raise_on_error=raise_on_error,\n--&gt; 211                          **eval_kwargs)\n    212     return _evaluate_standard(op, op_str, a, b, raise_on_error=raise_on_error)\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\pandas\\core\\computation\\expressions.py in _evaluate_numexpr(op, op_str, a, b, raise_on_error, truediv, reversed, **eval_kwargs)\n    121     if result is None:\n--&gt; 122         result = _evaluate_standard(op, op_str, a, b, raise_on_error)\n    123 \n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\pandas\\core\\computation\\expressions.py in _evaluate_standard(op, op_str, a, b, raise_on_error, **eval_kwargs)\n     63     with np.errstate(all='ignore'):\n---&gt; 64         return op(a, b)\n     65 \n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\dateutil\\relativedelta.py in __radd__(self, other)\n    390     def __radd__(self, other):\n--&gt; 391         return self.__add__(other)\n    392 \n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\dateutil\\relativedelta.py in __add__(self, other)\n    362                 month += 12\n--&gt; 363         day = min(calendar.monthrange(year, month)[1],\n    364                   self.day or other.day)\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\calendar.py in monthrange(year, month)\n    123         raise IllegalMonthError(month)\n--&gt; 124     day1 = weekday(year, month, 1)\n    125     ndays = mdays[month] + (month == February and isleap(year))\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\calendar.py in weekday(year, month, day)\n    115        day (1-31).\"\"\"\n--&gt; 116     return datetime.date(year, month, day).weekday()\n    117 \n\nTypeError: integer argument expected, got float\n\nDuring handling of the above exception, another exception occurred:\n\nTypeError                                 Traceback (most recent call last)\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\pandas\\core\\ops.py in safe_na_op(lvalues, rvalues)\n    681             with np.errstate(all='ignore'):\n--&gt; 682                 return na_op(lvalues, rvalues)\n    683         except Exception:\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\pandas\\core\\ops.py in na_op(x, y)\n    663                 mask = notnull(x) &amp; notnull(y)\n--&gt; 664                 result[mask] = op(x[mask], _values_from_object(y[mask]))\n    665             elif isinstance(x, np.ndarray):\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\dateutil\\relativedelta.py in __radd__(self, other)\n    390     def __radd__(self, other):\n--&gt; 391         return self.__add__(other)\n    392 \n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\dateutil\\relativedelta.py in __add__(self, other)\n    362                 month += 12\n--&gt; 363         day = min(calendar.monthrange(year, month)[1],\n    364                   self.day or other.day)\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\calendar.py in monthrange(year, month)\n    123         raise IllegalMonthError(month)\n--&gt; 124     day1 = weekday(year, month, 1)\n    125     ndays = mdays[month] + (month == February and isleap(year))\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\calendar.py in weekday(year, month, day)\n    115        day (1-31).\"\"\"\n--&gt; 116     return datetime.date(year, month, day).weekday()\n    117 \n\nTypeError: integer argument expected, got float\n\nDuring handling of the above exception, another exception occurred:\n\nTypeError                                 Traceback (most recent call last)\n&lt;ipython-input-1-6cf75731780d&gt; in &lt;module&gt;()\n     10 payments =  cf.apply(lambda p: round(p/cpi))\n     11 diffs=payments.cumsum(axis=1).applymap(lambda i: relativedelta(months=(-1*i)))\n---&gt; 12 payments=diffs.apply(lambda x: start+x)\n     13 result=pd.concat([start,payments],axis=1)\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\pandas\\core\\frame.py in apply(self, func, axis, broadcast, raw, reduce, args, **kwds)\n   4260                         f, axis,\n   4261                         reduce=reduce,\n-&gt; 4262                         ignore_failures=ignore_failures)\n   4263             else:\n   4264                 return self._apply_broadcast(f, axis)\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\pandas\\core\\frame.py in _apply_standard(self, func, axis, ignore_failures, reduce)\n   4356             try:\n   4357                 for i, v in enumerate(series_gen):\n-&gt; 4358                     results[i] = func(v)\n   4359                     keys.append(v.name)\n   4360             except Exception as e:\n\n&lt;ipython-input-1-6cf75731780d&gt; in &lt;lambda&gt;(x)\n     10 payments =  cf.apply(lambda p: round(p/cpi))\n     11 diffs=payments.cumsum(axis=1).applymap(lambda i: relativedelta(months=(-1*i)))\n---&gt; 12 payments=diffs.apply(lambda x: start+x)\n     13 result=pd.concat([start,payments],axis=1)\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\pandas\\core\\ops.py in wrapper(left, right, name, na_op)\n    719                 lvalues = lvalues.values\n    720 \n--&gt; 721         result = wrap_results(safe_na_op(lvalues, rvalues))\n    722         return construct_result(\n    723             left,\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\pandas\\core\\ops.py in safe_na_op(lvalues, rvalues)\n    690                 if is_object_dtype(lvalues):\n    691                     return libalgos.arrmap_object(lvalues,\n--&gt; 692                                                   lambda x: op(x, rvalues))\n    693             raise\n    694 \n\npandas\\_libs\\algos_common_helper.pxi in pandas._libs.algos.arrmap_object()\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\pandas\\core\\ops.py in &lt;lambda&gt;(x)\n    690                 if is_object_dtype(lvalues):\n    691                     return libalgos.arrmap_object(lvalues,\n--&gt; 692                                                   lambda x: op(x, rvalues))\n    693             raise\n    694 \n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\dateutil\\relativedelta.py in __radd__(self, other)\n    389 \n    390     def __radd__(self, other):\n--&gt; 391         return self.__add__(other)\n    392 \n    393     def __rsub__(self, other):\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\dateutil\\relativedelta.py in __add__(self, other)\n    361                 year -= 1\n    362                 month += 12\n--&gt; 363         day = min(calendar.monthrange(year, month)[1],\n    364                   self.day or other.day)\n    365         repl = {\"year\": year, \"month\": month, \"day\": day}\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\calendar.py in monthrange(year, month)\n    122     if not 1 &lt;= month &lt;= 12:\n    123         raise IllegalMonthError(month)\n--&gt; 124     day1 = weekday(year, month, 1)\n    125     ndays = mdays[month] + (month == February and isleap(year))\n    126     return day1, ndays\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\calendar.py in weekday(year, month, day)\n    114     \"\"\"Return weekday (0-6 ~ Mon-Sun) for year (1970-...), month (1-12),\n    115        day (1-31).\"\"\"\n--&gt; 116     return datetime.date(year, month, day).weekday()\n    117 \n    118 \n\nTypeError: ('integer argument expected, got float', 'occurred at index Aug 2018(P&amp;I Applied)')\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 1, "creation_date": 1542835053, "post_id": 53420539, "comment_id": 93715525, "body": "Are you sure they are stored as little-endian?"}, {"owner": {"reputation": 111, "user_id": 3924269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c6f2edce0c2886b746e133c92a38ddb?s=128&d=identicon&r=PG&f=1", "display_name": "Karl", "link": "https://stackoverflow.com/users/3924269/karl"}, "edited": false, "score": 0, "creation_date": 1542835304, "post_id": 53420539, "comment_id": 93715629, "body": "I am positive they are little endian."}, {"owner": {"reputation": 4710, "user_id": 2281274, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/sHobc.gif?s=128&g=1", "display_name": "George Shuklin", "link": "https://stackoverflow.com/users/2281274/george-shuklin"}, "edited": false, "score": 1, "creation_date": 1542835625, "post_id": 53420539, "comment_id": 93715756, "body": "Please provide an example of data. Use <code>hexdump -Cv binary.bin | head -n 10</code> to get a hexdump."}, {"owner": {"reputation": 111, "user_id": 3924269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c6f2edce0c2886b746e133c92a38ddb?s=128&d=identicon&r=PG&f=1", "display_name": "Karl", "link": "https://stackoverflow.com/users/3924269/karl"}, "reply_to_user": {"reputation": 4710, "user_id": 2281274, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/sHobc.gif?s=128&g=1", "display_name": "George Shuklin", "link": "https://stackoverflow.com/users/2281274/george-shuklin"}, "edited": false, "score": 0, "creation_date": 1542835824, "post_id": 53420539, "comment_id": 93715827, "body": "@George I hope this is sufficient, -n 10 is too many characters for a comment      <code>00000000  80 0a 83 4d ba a5 80 0c  c0 00 7b 42 cb 90   0f 41  |...M......{B...A| 00000010  98 c9 9c 53 4c 15 35 52  d8 54 f7 0a 5d 87 16 4d  |...SL.5R.T..]..M| 00000020  89 6a 3f 04 f2 eb c4 4a  e2 37 e6 08 23 5e ca 06  |.j?....J.7..#^..|</code>"}, {"owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 0, "creation_date": 1542835916, "post_id": 53420539, "comment_id": 93715867, "body": "@Karl can you put this in the question?  it&#39;s difficult to read in the comments"}, {"owner": {"reputation": 111, "user_id": 3924269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c6f2edce0c2886b746e133c92a38ddb?s=128&d=identicon&r=PG&f=1", "display_name": "Karl", "link": "https://stackoverflow.com/users/3924269/karl"}, "edited": false, "score": 0, "creation_date": 1542835972, "post_id": 53420539, "comment_id": 93715896, "body": "Done-- sorry I was having a lot of trouble making it readable-- good idea"}, {"owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 2, "creation_date": 1542836377, "post_id": 53420539, "comment_id": 93716046, "body": "the first 4 bytes (<code>80 0a 83 4d</code>) represent 1300433536 for me (LE/intel 4 byte int) which would be 2011-03-18T07:32:16 if you&#39;re treating it as  unix timestamp.  is that anywhere close to what you&#39;re expecting?"}, {"owner": {"reputation": 655, "user_id": 7553580, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oOJ6J4iHCnw/AAAAAAAAAAI/AAAAAAAALkQ/hU3c1g5hLPs/photo.jpg?sz=128", "display_name": "Hal Jarrett", "link": "https://stackoverflow.com/users/7553580/hal-jarrett"}, "edited": false, "score": 1, "creation_date": 1542837403, "post_id": 53420539, "comment_id": 93716415, "body": "Perhaps try forcing struct to interpret the bytes read as little endian? i.e. <code>struct.unpack(&quot;&lt;I&quot;, bytes_read)</code>"}], "owner": {"reputation": 111, "user_id": 3924269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c6f2edce0c2886b746e133c92a38ddb?s=128&d=identicon&r=PG&f=1", "display_name": "Karl", "link": "https://stackoverflow.com/users/3924269/karl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 398, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542835951, "creation_date": 1542834752, "last_edit_date": 1542835951, "question_id": 53420539, "link": "https://stackoverflow.com/questions/53420539/how-can-i-read-32-bit-binary-numbers-from-a-binary-file-in-python", "title": "How can I read 32-bit binary numbers from a binary file in python?", "body": "<p>I have data files which contain series of 32-bit binary \"numbers.\"</p>\n\n<p>I say \"numbers\" because the 32 1/0's define what type of data sensors were picking up, when they were, which sensor,etc; so the decimal value of the numbers is of no concern to me. In particular some (most) of the data will begin with possibly up to 5 zeros. </p>\n\n<p>I simply need a way in python to read these files, get a list containing each 32-bit number, and then I'll need to mess around with it a little (delete some events) and rewrite it to a new file. </p>\n\n<p>Can anyone help me with this? I've tried the following so far but the numbers which should be corresponding to the time data we encode seem to be impossible.</p>\n\n<pre><code>with open(lm_file, mode='rb') as file: \n    bytes_read = file.read(struct.calcsize(\"I\"))\n    while bytes_read:\n        idList = struct.unpack(\"I\", bytes_read)[0]\n        idList=bin(idList)\n        print(idList)\n        bytes_read = file.read(struct.calcsize(\"=l\"))\n</code></pre>\n\n<p>Output of hexdump:</p>\n\n<pre><code>00000000  80 0a 83 4d ba a5 80 0c  c0 00 7b 42 cb 90 0f 41  |...M......{B...A|\n00000010  98 c9 9c 53 4c 15 35 52  d8 54 f7 0a 5d 87 16 4d  |...SL.5R.T..]..M|\n00000020  89 6a 3f 04 f2 eb c4 4a  e2 37 e6 08 23 5e ca 06  |.j?....J.7..#^..|\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "macos", "tkinter"], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 10665418, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MdoSBajy4ys/AAAAAAAAAAI/AAAAAAAACtI/aNuIE0i2D38/photo.jpg?sz=128", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/10665418/jonathan"}, "edited": false, "score": 0, "creation_date": 1542836272, "post_id": 53420749, "comment_id": 93716007, "body": "Yes definitely. Eventually I would like to have a background image for each square on the bottom row, and then have text over that image. Is that still possible within the grid method?"}, {"owner": {"reputation": 5008, "user_id": 3594526, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/VfPew.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3594526/felix"}, "reply_to_user": {"reputation": 191, "user_id": 10665418, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MdoSBajy4ys/AAAAAAAAAAI/AAAAAAAACtI/aNuIE0i2D38/photo.jpg?sz=128", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/10665418/jonathan"}, "edited": false, "score": 0, "creation_date": 1542837070, "post_id": 53420749, "comment_id": 93716301, "body": "Yes, that should be possible. Assign the image and the text to the same grid position and make sure that the text is on top and has a transparent background. But there should be some other answers on this topic on SO already ;-)"}, {"owner": {"reputation": 5008, "user_id": 3594526, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/VfPew.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3594526/felix"}, "reply_to_user": {"reputation": 191, "user_id": 10665418, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MdoSBajy4ys/AAAAAAAAAAI/AAAAAAAACtI/aNuIE0i2D38/photo.jpg?sz=128", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/10665418/jonathan"}, "edited": false, "score": 0, "creation_date": 1542837262, "post_id": 53420749, "comment_id": 93716366, "body": "Could you mark the answer as solved (it&#39;s the check mark next to the voting buttons)? This will signal to others that your question has been answered and also get the answerer (me in this case) some reputation. Thanks :-)"}, {"owner": {"reputation": 5008, "user_id": 3594526, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/VfPew.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3594526/felix"}, "reply_to_user": {"reputation": 191, "user_id": 10665418, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MdoSBajy4ys/AAAAAAAAAAI/AAAAAAAACtI/aNuIE0i2D38/photo.jpg?sz=128", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/10665418/jonathan"}, "edited": false, "score": 0, "creation_date": 1542837643, "post_id": 53420749, "comment_id": 93716498, "body": "I updated my answer with a small code change that removes the gaps between the labels"}, {"owner": {"reputation": 191, "user_id": 10665418, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MdoSBajy4ys/AAAAAAAAAAI/AAAAAAAACtI/aNuIE0i2D38/photo.jpg?sz=128", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/10665418/jonathan"}, "edited": false, "score": 0, "creation_date": 1542838892, "post_id": 53420749, "comment_id": 93716912, "body": "Perfect! Thank you - actually had figured that one out :). Currently on the wild goose chase to learn how to make the background of my label transparent. looks like I have to use Canvas?"}], "tags": [], "owner": {"reputation": 5008, "user_id": 3594526, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/VfPew.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3594526/felix"}, "is_accepted": true, "score": 2, "last_activity_date": 1542837586, "last_edit_date": 1542837586, "creation_date": 1542835945, "answer_id": 53420749, "question_id": 53420517, "link": "https://stackoverflow.com/questions/53420517/question-about-lining-up-frames-in-tkinter-within-a-grid-attempting-to-achieve/53420749#53420749", "title": "Question about lining up frames in Tkinter within a grid, attempting to achieve identical results with .grid() and .pack() within a frame", "body": "<p>Fundamentally, the grid is a two-dimensional layout. If two items are assigned to the same column, they line up vertically.</p>\n\n<p>On the other hand, pack is a one-dimensional layout that positions elements relative to others.</p>\n\n<p>In your second example, you're creating two horizontal lists of elements that are independent of each other. Both have the same number of items, but elements will not line up because \"columns\" are calculated individually for both frames.</p>\n\n<p>If you can live without cells spanning multiple columns, you could make your columns line up by creating 15 frames that each contain a label and a square and put them next to each other using pack.</p>\n\n<p>Other than that, your use-case really is what the grid layout has been designed for. I'm using grid for everything because in my opinion it's more flexible and easier to reason about.</p>\n\n<p>Does this answer your question?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>You can get rid of the gaps if you use the <code>sticky=\"WE\"</code> option instead of manually specifying the width of each label. This will make it span left and right. Modified code:</p>\n\n<pre><code>from tkinter import *\n\ndef showchart_grid():\n    root = Tk()\n\n    # create 14 squares on the grid\n\n    for i in range(1, 15):\n\n        spot = Label(root, text='square', bg='white', height=5, width=10, borderwidth=1, relief='solid', justify=CENTER)\n        spot.grid(row=1, column=i)\n\n    # create the column labels on top of the grid in row one\n\n    label0 = Label(root, text=0, bg=\"DodgerBlue\", fg=\"white\", height=2, borderwidth=1, relief='solid')\n    label0.grid(row=0, column=1, sticky=\"WE\")\n    label1 = Label(root, text=1, bg='CadetBlue1', height=2, borderwidth=1, relief='solid')\n    label1.grid(row=0, column=2, sticky=\"WE\", columnspan=2)\n    label2 = Label(root, text=2, bg='DodgerBlue', height=2, borderwidth=1, relief='solid')\n    label2.grid(row=0, column=4, sticky=\"WE\", columnspan=2)\n    label4 = Label(root, text=4, bg='CadetBlue1', height=2, borderwidth=1, relief='solid')\n    label4.grid(row=0, column=6, sticky=\"WE\", columnspan=2)\n    label6 = Label(root, text=6, bg='DodgerBlue', height=2, borderwidth=1, relief='solid')\n    label6.grid(row=0, column=8, sticky=\"WE\", columnspan=2)\n    label8 = Label(root, text=8, bg='CadetBlue1', height=2, borderwidth=1, relief='solid')\n    label8.grid(row=0, column=10, sticky=\"WE\", columnspan=2)\n    label11 = Label(root, text=11, bg='DodgerBlue', height=2, borderwidth=1, relief='solid')\n    label11.grid(row=0, column=12, sticky=\"WE\", columnspan=2)\n    label15 = Label(root, text=15, bg=\"CadetBlue1\", height=2, borderwidth=1, relief='solid')\n    label15.grid(row=0, column=14, sticky=\"WE\")\n\n    mainloop()\n\n\nif __name__ == '__main__':\n    showchart_grid()\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 10665418, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MdoSBajy4ys/AAAAAAAAAAI/AAAAAAAACtI/aNuIE0i2D38/photo.jpg?sz=128", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/10665418/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 53420749, "answer_count": 1, "score": 0, "last_activity_date": 1542837586, "creation_date": 1542834629, "question_id": 53420517, "link": "https://stackoverflow.com/questions/53420517/question-about-lining-up-frames-in-tkinter-within-a-grid-attempting-to-achieve", "title": "Question about lining up frames in Tkinter within a grid, attempting to achieve identical results with .grid() and .pack() within a frame", "body": "<p>New to python and getting a lot of great information from this website.</p>\n\n<p>I'm creating a chart with .grid() and then again with frames in .pack() as an exercise and seeing if I can get identical results.</p>\n\n<p>The function showchart_grid() works and produces pretty much what I want to create. It's a chart where the bottom row is 14 squares, and the top row is labels for those squares, and sometimes the column labels span 2 squares. You can see this accounted for in the columnspan= attribute. There is some weird whitespace between the column labels in row 0 but other than that it all lines up.</p>\n\n<pre><code>def showchart_grid():\n    root = Tk()\n\n    # create 14 squares on the grid\n\n    for i in range(1, 15):\n\n        spot = Label(root, text='square', bg='white', height=5, width=10, borderwidth=1, relief='solid', justify=CENTER)\n        spot.grid(row=1, column=i)\n\n    # create the column labels on top of the grid in row one\n\n    label0 = Label(root, text=0, bg=\"DodgerBlue\", fg=\"white\", height=2, width=10, borderwidth=1, relief='solid')\n    label0.grid(row=0, column=1)\n    label1 = Label(root, text=1, bg='CadetBlue1', height=2, width=20, borderwidth=1, relief='solid')\n    label1.grid(row=0, column=2, columnspan=2)\n    label2 = Label(root, text=2, bg='DodgerBlue', height=2, width=20, borderwidth=1, relief='solid')\n    label2.grid(row=0, column=4, columnspan=2)\n    label4 = Label(root, text=4, bg='CadetBlue1', height=2, width=20, borderwidth=1, relief='solid')\n    label4.grid(row=0, column=6, columnspan=2)\n    label6 = Label(root, text=6, bg='DodgerBlue', height=2, width=20, borderwidth=1, relief='solid')\n    label6.grid(row=0, column=8, columnspan=2)\n    label8 = Label(root, text=8, bg='CadetBlue1', height=2, width=20, borderwidth=1, relief='solid')\n    label8.grid(row=0, column=10, columnspan=2)\n    label11 = Label(root, text=11, bg='DodgerBlue', height=2, width=20, borderwidth=1, relief='solid')\n    label11.grid(row=0, column=12, columnspan=2)\n    label15 = Label(root, text=15, bg=\"CadetBlue1\", height=2, width=10, borderwidth=1, relief='solid')\n    label15.grid(row=0, column=14)\n\n    mainloop()\n</code></pre>\n\n<p>Now, when I attempt to do the same thing by creating a frame for the column labels and a frame for the squares, the positions don't match up anymore even though the sizes are the same. It's as if the column labels aren't filling up the whole frame. I've messed with fill= and expand= but haven't been able to figure out exactly how. Note: the weird whitespace problem between the column labels is solved in this version.</p>\n\n<pre><code>def showchart_framespack_test():\n    root = Tk()\n\n    # define my frames\n\n    pointsframe = Frame(root, width=140)\n    pointsframe.pack(side=TOP)\n\n    playerframe = Frame(root, width=140)\n    playerframe.pack(side=TOP)\n\n    # create bottom row of squares with pack\n\n    for i in range(1, 15):\n\n        spot = Label(playerframe, text='empty', bg='white', height=5, width=10, borderwidth=1, relief='solid', justify=CENTER)\n        spot.pack(side=LEFT)\n\n    # create top row of labels with pack\n\n    label0 = Label(pointsframe, text=0, bg=\"DodgerBlue\", fg=\"white\", height=2, width=10, borderwidth=1, relief='solid')\n    label0.pack(side=LEFT)\n    label1 = Label(pointsframe, text=1, bg='CadetBlue1', height=2, width=20, borderwidth=1, relief='solid')\n    label1.pack(side=LEFT)\n    label2 = Label(pointsframe, text=2, bg='DodgerBlue', height=2, width=20, borderwidth=1, relief='solid')\n    label2.pack(side=LEFT)\n    label4 = Label(pointsframe, text=4, bg='CadetBlue1', height=2, width=20, borderwidth=1, relief='solid')\n    label4.pack(side=LEFT)\n    label6 = Label(pointsframe, text=6, bg='DodgerBlue', height=2, width=20, borderwidth=1, relief='solid')\n    label6.pack(side=LEFT)\n    label8 = Label(pointsframe, text=8, bg='CadetBlue1', height=2, width=20, borderwidth=1, relief='solid')\n    label8.pack(side=LEFT)\n    label11 = Label(pointsframe, text=11, bg='DodgerBlue', height=2, width=20, borderwidth=1, relief='solid')\n    label11.pack(side=LEFT)\n    label15 = Label(pointsframe, text=15, bg=\"CadetBlue1\", height=2, width=10, borderwidth=1, relief='solid')\n    label15.pack(side=LEFT)\n\n\n\nmainloop()\n</code></pre>\n\n<p>How can I improve the programming here to get my desired result of 14 squares on the bottom, with the labels on top that each line up perfectly with the borders of the 14 squares on the bottom row?</p>\n\n<p>PS these are functions because they will take inputs and adjust the chart as such, but for now I just left it as \"empty\" all the way across.</p>\n"}, {"tags": ["python", "pysftp"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 4534442, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NVyQfUmc8bg/AAAAAAAAAAI/AAAAAAAABG0/A3-2_lUVdhk/photo.jpg?sz=128", "display_name": "Frederic Poirier", "link": "https://stackoverflow.com/users/4534442/frederic-poirier"}, "edited": false, "score": 0, "creation_date": 1542834879, "post_id": 53420501, "comment_id": 93715454, "body": "Yes you are absolutely right, ftp is port 21. Pysftp defaults to 22, so if you want to test an FTP you need to explicitely state the port 21 in the string but this proves more difficult than anticipated."}, {"owner": {"reputation": 151, "user_id": 2871769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e13bc98b809a69fc1b122bda33d146b?s=128&d=identicon&r=PG", "display_name": "Skapin", "link": "https://stackoverflow.com/users/2871769/skapin"}, "reply_to_user": {"reputation": 37, "user_id": 4534442, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NVyQfUmc8bg/AAAAAAAAAAI/AAAAAAAABG0/A3-2_lUVdhk/photo.jpg?sz=128", "display_name": "Frederic Poirier", "link": "https://stackoverflow.com/users/4534442/frederic-poirier"}, "edited": false, "score": 0, "creation_date": 1542837362, "post_id": 53420501, "comment_id": 93716398, "body": "So, I dont understand your trouble... explain please. Youa sked why 1/ works and not 2/. I gave you the answere. What&#39;s wrong now ?"}, {"owner": {"reputation": 37, "user_id": 4534442, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NVyQfUmc8bg/AAAAAAAAAAI/AAAAAAAABG0/A3-2_lUVdhk/photo.jpg?sz=128", "display_name": "Frederic Poirier", "link": "https://stackoverflow.com/users/4534442/frederic-poirier"}, "edited": false, "score": 0, "creation_date": 1542893724, "post_id": 53420501, "comment_id": 93738018, "body": "I get this when i specify port 21: Exception: paramiko.ssh_exception.SSHException Message: Error reading SSH protocol banner and the diocumentation for pysftp does not explicitely gove the formatting example for the parameter."}, {"owner": {"reputation": 151, "user_id": 2871769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e13bc98b809a69fc1b122bda33d146b?s=128&d=identicon&r=PG", "display_name": "Skapin", "link": "https://stackoverflow.com/users/2871769/skapin"}, "reply_to_user": {"reputation": 37, "user_id": 4534442, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NVyQfUmc8bg/AAAAAAAAAAI/AAAAAAAABG0/A3-2_lUVdhk/photo.jpg?sz=128", "display_name": "Frederic Poirier", "link": "https://stackoverflow.com/users/4534442/frederic-poirier"}, "edited": false, "score": 0, "creation_date": 1542919688, "post_id": 53420501, "comment_id": 93749320, "body": "? Do the server has the port 21 open &amp; configgured ? I dont understand your usecase, what you want, what you have and what you expect. Please, take time to explain if you want people to take time to help you"}], "tags": [], "owner": {"reputation": 151, "user_id": 2871769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e13bc98b809a69fc1b122bda33d146b?s=128&d=identicon&r=PG", "display_name": "Skapin", "link": "https://stackoverflow.com/users/2871769/skapin"}, "is_accepted": false, "score": 0, "last_activity_date": 1542834541, "creation_date": 1542834541, "answer_id": 53420501, "question_id": 53420482, "link": "https://stackoverflow.com/questions/53420482/specifying-the-port-in-a-pysftp-connection-string-is-not-straight-forward/53420501#53420501", "title": "Specifying the port in a pysftp connection string is not straight forward", "body": "<p>SFTP use SSH so its PORT 22, not 21</p>\n\n<p>FTP use port 21</p>\n\n<p>Like the error said, ssh exception. Try with 'port=22'</p>\n\n<p>source: </p>\n\n<pre><code>port 21     Yes, and SCTP   Assigned    Official    File Transfer Protocol (FTP) control (command)\n\n\nport 22     Yes, and SCTP   Assigned    Official    Secure Shell (SSH), secure logins, file transfers (scp, sftp) and port forwarding \n</code></pre>\n\n<p><a href=\"https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers\" rel=\"nofollow noreferrer\">wikipedia</a></p>\n"}, {"tags": [], "owner": {"reputation": 517, "user_id": 3416897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Phict.jpg?s=128&g=1", "display_name": "squaregoldfish", "link": "https://stackoverflow.com/users/3416897/squaregoldfish"}, "is_accepted": true, "score": 0, "last_activity_date": 1551867680, "creation_date": 1551867680, "answer_id": 55020722, "question_id": 53420482, "link": "https://stackoverflow.com/questions/53420482/specifying-the-port-in-a-pysftp-connection-string-is-not-straight-forward/55020722#55020722", "title": "Specifying the port in a pysftp connection string is not straight forward", "body": "<p>The pysftp library only talks using the SFTP protocol, which is different from the 'normal' FTP protocol. So what you are seeing is the error when your program tries to talk in SFTP to an FTP server, and doesn't understand the response it gets back.</p>\n"}], "owner": {"reputation": 37, "user_id": 4534442, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NVyQfUmc8bg/AAAAAAAAAAI/AAAAAAAABG0/A3-2_lUVdhk/photo.jpg?sz=128", "display_name": "Frederic Poirier", "link": "https://stackoverflow.com/users/4534442/frederic-poirier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2257, "favorite_count": 0, "accepted_answer_id": 55020722, "answer_count": 2, "score": 0, "last_activity_date": 1551867680, "creation_date": 1542834408, "question_id": 53420482, "link": "https://stackoverflow.com/questions/53420482/specifying-the-port-in-a-pysftp-connection-string-is-not-straight-forward", "title": "Specifying the port in a pysftp connection string is not straight forward", "body": "<p>This works:</p>\n\n<pre><code>cnopts = pysftp.CnOpts()\ncnopts.hostkeys = None\n\nwith pysftp.Connection('ftpsite.com', username='xxx', password='xxx', cnopts=cnopts) as sftp:\n    with sftp.cd('inbox'):             \n    sftp.get('WinSCP.ini')  \n</code></pre>\n\n<p>But now i want to test straight ftp (port 21), so i add the port attribute:</p>\n\n<pre><code>with pysftp.Connection('ftpsite.com', port=21 , username='xxx', password='xxx', cnopts=cnopts) as sftp:\n</code></pre>\n\n<p>and now i get this:</p>\n\n<p>Exception: paramiko.ssh_exception.SSHException\nMessage: Error reading SSH protocol banner </p>\n\n<p>I am confused...          </p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 2360, "user_id": 9041710, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9wtH.jpg?s=128&g=1", "display_name": "vlizana", "link": "https://stackoverflow.com/users/9041710/vlizana"}, "edited": false, "score": 0, "creation_date": 1542834606, "post_id": 53420474, "comment_id": 93715325, "body": "How did you create your environment? no part of the Django framework is native to Python, there were probably some pre installed packages in your environment, you can check by running <code>pip freeze</code> after creating the environment."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1542834835, "post_id": 53420474, "comment_id": 93715431, "body": "I don&#39;t understand step 3 -- you would not have been able to perform step 2 unless django was already installed."}, {"owner": {"reputation": 189, "user_id": 7701005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef75bf3ca396b5f6118bc2c86fe52212?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Thompson", "link": "https://stackoverflow.com/users/7701005/ryan-thompson"}, "edited": false, "score": 0, "creation_date": 1542835061, "post_id": 53420474, "comment_id": 93715528, "body": "I create the virtual environment using mkvirtualenv myenv  command. I have installed the django framework outside of the environment(globally), but everytime I create a new environment to work in, I have to re-install the framework before I can run the server. However, django-admin works fine even before installing the framework in the virtual environment, hence the confusion."}, {"owner": {"reputation": 61, "user_id": 1699975, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GznWb.jpg?s=128&g=1", "display_name": "Jangita", "link": "https://stackoverflow.com/users/1699975/jangita"}, "edited": false, "score": 0, "creation_date": 1591362690, "post_id": 53420474, "comment_id": 110034893, "body": "I have the same problem. The solution would be install django globally to start a django project in which you create the env and install django again in the env. Maybe if there was a way just to have the django-admin as a standalone?"}], "answers": [{"comments": [{"owner": {"reputation": 189, "user_id": 7701005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef75bf3ca396b5f6118bc2c86fe52212?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Thompson", "link": "https://stackoverflow.com/users/7701005/ryan-thompson"}, "edited": false, "score": 0, "creation_date": 1542836740, "post_id": 53420676, "comment_id": 93716190, "body": "Yes this is in a windows Environment."}, {"owner": {"reputation": 444, "user_id": 7476635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0afe9d1518de39a44048d23f270fa81?s=128&d=identicon&r=PG&f=1", "display_name": "mikeg", "link": "https://stackoverflow.com/users/7476635/mikeg"}, "reply_to_user": {"reputation": 189, "user_id": 7701005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef75bf3ca396b5f6118bc2c86fe52212?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Thompson", "link": "https://stackoverflow.com/users/7701005/ryan-thompson"}, "edited": false, "score": 0, "creation_date": 1542837003, "post_id": 53420676, "comment_id": 93716270, "body": "Im sorry, I just noticed that I did not answer you question. No, django-admin is NOT part of python, just a part of Windows."}, {"owner": {"reputation": 189, "user_id": 7701005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef75bf3ca396b5f6118bc2c86fe52212?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Thompson", "link": "https://stackoverflow.com/users/7701005/ryan-thompson"}, "edited": false, "score": 0, "creation_date": 1542839652, "post_id": 53420676, "comment_id": 93717155, "body": "It cant be part of windows."}, {"owner": {"reputation": 189, "user_id": 7701005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef75bf3ca396b5f6118bc2c86fe52212?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Thompson", "link": "https://stackoverflow.com/users/7701005/ryan-thompson"}, "edited": false, "score": 0, "creation_date": 1542839794, "post_id": 53420676, "comment_id": 93717200, "body": "you cant start a django project without installing python and the django framework, hence django-admin is not a valid command outside of django/python."}], "tags": [], "owner": {"reputation": 444, "user_id": 7476635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0afe9d1518de39a44048d23f270fa81?s=128&d=identicon&r=PG&f=1", "display_name": "mikeg", "link": "https://stackoverflow.com/users/7476635/mikeg"}, "is_accepted": false, "score": 0, "last_activity_date": 1542835580, "creation_date": 1542835580, "answer_id": 53420676, "question_id": 53420474, "link": "https://stackoverflow.com/questions/53420474/is-django-admin-part-of-python-or-django-installation/53420676#53420676", "title": "Is django-admin part of python or django installation?", "body": "<p>I have ran into something similar. Where in a virtual enviroment I create for python 3 used my global python 2 installation. Try creating a new virtual environment just like before, and this time try using \"python django-admin\" instead of just \"django-admin\". A question for you, is this a Windows environment, I ask because that is the only environment I have witnessed this behavior in. I believe by using \"python django-admin\" it will force it to use the virtualenv's sandboxed python.</p>\n"}, {"tags": [], "owner": {"reputation": 7055, "user_id": 2693543, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/c2tUD.jpg?s=128&g=1", "display_name": "Shobi", "link": "https://stackoverflow.com/users/2693543/shobi"}, "is_accepted": false, "score": 1, "last_activity_date": 1542860295, "creation_date": 1542860295, "answer_id": 53423837, "question_id": 53420474, "link": "https://stackoverflow.com/questions/53420474/is-django-admin-part-of-python-or-django-installation/53423837#53423837", "title": "Is django-admin part of python or django installation?", "body": "<p><a href=\"https://docs.djangoproject.com/en/2.1/ref/django-admin/\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/2.1/ref/django-admin/</a></p>\n\n<blockquote>\n  <p>django-admin is Django\u2019s command-line utility for administrative\n  tasks.</p>\n</blockquote>\n\n<p><code>django-admin</code> utility comes with any Django installation. inorder to use django-admin command, the <code>django-admin</code> script should be on your system path if you installed Django via its setup.py utility. If it\u2019s not on your path, you can find it in <code>site-packages/django/bin</code> within your Python installation. </p>\n\n<p>use the link given above to find the instructions for windows as well as linux.</p>\n\n<p>and to answer your question, <strong>django-admin is a part of django framework</strong> </p>\n"}], "owner": {"reputation": 189, "user_id": 7701005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef75bf3ca396b5f6118bc2c86fe52212?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Thompson", "link": "https://stackoverflow.com/users/7701005/ryan-thompson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1542860295, "creation_date": 1542834378, "question_id": 53420474, "link": "https://stackoverflow.com/questions/53420474/is-django-admin-part-of-python-or-django-installation", "title": "Is django-admin part of python or django installation?", "body": "<p>I am just starting out on using the django framework. One thing that bugs me is the django-admin utility. Is it part of the python installation or is it part of the django installation through pip?</p>\n\n<p>The way I've been doing my projects is</p>\n\n<ol>\n<li><p>Make a virtual Environment.</p></li>\n<li><p>Create a django project in the environment through django-admin.</p></li>\n<li><p>and then I just install the django framework using pip inside the environment.</p></li>\n</ol>\n\n<p>My question arises because inside the virtual environment, I used django-admin to create the project before installing the framework.</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver", "selenium-chromedriver", "webdriverwait"], "comments": [{"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 0, "creation_date": 1542870165, "post_id": 53420473, "comment_id": 93725061, "body": "Check this discussion <a href=\"https://stackoverflow.com/questions/45712431/replace-implicit-wait-with-explicit-wait-selenium-webdriver-java/45715759#45715759\">Replace implicit wait with explicit wait</a>"}, {"owner": {"reputation": 9, "user_id": 8419250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6369601d336957eeec574419cacc61b?s=128&d=identicon&r=PG&f=1", "display_name": "DJSam", "link": "https://stackoverflow.com/users/8419250/djsam"}, "reply_to_user": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 0, "creation_date": 1543250924, "post_id": 53420473, "comment_id": 93840895, "body": "@DebanjanB went through the discussion and checked the other question too. Implicit wait not working too and as i mentioned before in the description . If i use a Expected Condition of &quot;elementToBeClickable(locator)&quot; the element should be clickable and interactable such that you can click it. But the element is not interacting though it is enabled so what can be problem?"}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 0, "creation_date": 1543252030, "post_id": 53420473, "comment_id": 93841486, "body": "Check this discussion <a href=\"https://stackoverflow.com/questions/44912203/selenium-web-driver-java-element-is-not-clickable-at-point-x-y-other-elem/44916498#44916498\" title=\"selenium web driver java element is not clickable at point x y other elem\">stackoverflow.com/questions/44912203/&hellip;</a>"}, {"owner": {"reputation": 9, "user_id": 8419250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6369601d336957eeec574419cacc61b?s=128&d=identicon&r=PG&f=1", "display_name": "DJSam", "link": "https://stackoverflow.com/users/8419250/djsam"}, "reply_to_user": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 0, "creation_date": 1543872285, "post_id": 53420473, "comment_id": 94066700, "body": "I already tried the first four method of the link you provided @DebanjanB . But for the 5 th method 5) Element is present but having temporary Overlay. How do i find the xpath of the overlay element. I tried through the Elements section of Chrome but i am not able to find it. Can you please help me in finding the path of overlay element ?"}], "owner": {"reputation": 9, "user_id": 8419250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6369601d336957eeec574419cacc61b?s=128&d=identicon&r=PG&f=1", "display_name": "DJSam", "link": "https://stackoverflow.com/users/8419250/djsam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "closed_date": 1542870087, "answer_count": 0, "score": 0, "last_activity_date": 1543250355, "creation_date": 1542834362, "last_edit_date": 1543250355, "question_id": 53420473, "link": "https://stackoverflow.com/questions/53420473/selenium-webdriver-explicit-wait-not-working-even-if-the-element-is-present-and", "closed_reason": "Duplicate", "title": "selenium webdriver explicit wait not working even if the element is present and enabled", "body": "<p>I am running automation test using selenium web driver for chrome.\nFollowing are specification of chrome and selenium web driver\nChrome Version 70.0.3538.77 (Official Build) (64-bit)\nSelenium Version :3.6.0</p>\n\n<p>Initially I was using <code>time.sleep()</code> for my automation but I want to use explicit wait as the sleep time varies for each of my script and that causes problem for the whole automation suite.</p>\n\n<p>I tried the following different entities of explicit wait but in all cases the test fail</p>\n\n<pre><code>WebDriverWait(browser, 30).until(EC.visibility_of_element_located((By.XPATH, \"/html/body/div[1]/div/ui-view/main/side-nav/ll-side-nav/ul/ll-side-nav-item[5]/li/a/i [1]\")))\nWebDriverWait(browser, 30).until(EC.element_to_be_clickable((By.XPATH, \"/html/body/div[1]/div/ui-view/main/side-nav/ll-side-nav/ul/ll-side-nav-item[5]/li/a/i [1]\")))\nWebDriverWait(browser, 30).until(EC.element_located_to_be_selected((By.XPATH, \"/html/body/div[1]/div/ui-view/main/side-nav/ll-side-nav/ul/ll-side-nav-item[5]/li/a/i [1]\")))\n</code></pre>\n\n<p>I tried my old method of adding a sleep time  and added <code>time.sleep(10)</code> and it goes through whole code. So the element is present but still not clickable.</p>\n\n<p>I also check chrome log files . Where I found that the particular element <code>IsElementEnabled true</code> in the message. I did the following changes in the options of chrome to get the log information:</p>\n\n<pre><code>caps = DesiredCapabilities.CHROME\ncaps['loggingPrefs'] = {'performance': 'ALL'}\noptions = webdriver.ChromeOptions()   \nbrowser = webdriver.Chrome(executable_path=r\"C:\\\\Program \n\nFiles(x86)\\\\Google\\\\Chrome\\\\chromedriver\",chrome_options=options,desired_capabilities=caps,service_args=[\"--verbose\", \"--log-path=G:\\My Drive\\control\\logs\\chromedriver2.log\"])\n</code></pre>\n\n<p>In spite of that its not clickable. I have seen similar tickets but in many cases the element was not present. In my case is present as I can also click the element if I provide <code>time.sleep()</code> instead of explicit wait.</p>\n\n<p>Can anyone please help where i am going wrong? Or any other suggested to make the selenium web driver work?</p>\n"}, {"tags": ["python", "csv", "beautifulsoup", "python-requests"], "answers": [{"tags": [], "owner": {"reputation": 738, "user_id": 6042206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aMQZp.jpg?s=128&g=1", "display_name": "Kamikaze_goldfish", "link": "https://stackoverflow.com/users/6042206/kamikaze-goldfish"}, "is_accepted": false, "score": 1, "last_activity_date": 1542834662, "creation_date": 1542834662, "answer_id": 53420525, "question_id": 53420393, "link": "https://stackoverflow.com/questions/53420393/writing-data-on-separate-rows-in-csv-file-in-python/53420525#53420525", "title": "Writing data on separate rows in csv file in python", "body": "<pre><code>res = requests.get('https://www.hindustantimes.com')\nsoup = bs4.BeautifulSoup(res.text,'lxml')\n\nx=[]\nfor i in soup.select('div.subhead4'):\n    x.append(i.text.strip())\n\nfor i in soup.select('div.bigstory-mid-h3'):\n    x.append(i.text.strip())\n\n\nwith open('newz.csv','w') as cF:\n    wr = csv.writer(cF)\n    for i in x:\n        wr.writerow([i])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 738, "user_id": 6042206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aMQZp.jpg?s=128&g=1", "display_name": "Kamikaze_goldfish", "link": "https://stackoverflow.com/users/6042206/kamikaze-goldfish"}, "edited": false, "score": 0, "creation_date": 1542836236, "post_id": 53420685, "comment_id": 93715987, "body": "This makes more sense than doing the other code. Nice work!"}], "tags": [], "owner": {"reputation": 1959, "user_id": 3471881, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f1697490f85edb126933605b84065bcb?s=128&d=identicon&r=PG&f=1", "display_name": "user3471881", "link": "https://stackoverflow.com/users/3471881/user3471881"}, "is_accepted": true, "score": 4, "last_activity_date": 1542836382, "last_edit_date": 1542836382, "creation_date": 1542835618, "answer_id": 53420685, "question_id": 53420393, "link": "https://stackoverflow.com/questions/53420393/writing-data-on-separate-rows-in-csv-file-in-python/53420685#53420685", "title": "Writing data on separate rows in csv file in python", "body": "<p><code>writerow</code> takes an iterable to write:</p>\n\n<pre><code>writerow(['a', 'b', 'c'])\n-&gt; a,b,c\n</code></pre>\n\n<p>Also, you don't need to append the data to a list before you write.</p>\n\n<pre><code>stories = soup.select('div.subhead4') + soup.select('div.bigstory-mid-h3')\n\nwith open('output.csv', 'w') as f:\n    writer = csv.writer(f)\n    for headline in stories:\n        writer.writerow([headline.text.strip()])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15697, "user_id": 458214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef09f4a6e7e0803825d17212d2dba67?s=128&d=identicon&r=PG", "display_name": "ewwink", "link": "https://stackoverflow.com/users/458214/ewwink"}, "is_accepted": false, "score": 0, "last_activity_date": 1542841904, "creation_date": 1542841904, "answer_id": 53421745, "question_id": 53420393, "link": "https://stackoverflow.com/questions/53420393/writing-data-on-separate-rows-in-csv-file-in-python/53421745#53421745", "title": "Writing data on separate rows in csv file in python", "body": "<p>it simple .csv file, here without using csv module</p>\n\n<pre><code>with open('newz.csv','w') as cF:\n  for x in soup.select('.subhead4 a'):\n    cF.write(x.text + '\\n')\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 9962920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TYQXO.jpg?s=128&g=1", "display_name": "Shubh9718", "link": "https://stackoverflow.com/users/9962920/shubh9718"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 884, "favorite_count": 0, "accepted_answer_id": 53420685, "answer_count": 3, "score": 0, "last_activity_date": 1542844122, "creation_date": 1542833939, "last_edit_date": 1542844122, "question_id": 53420393, "link": "https://stackoverflow.com/questions/53420393/writing-data-on-separate-rows-in-csv-file-in-python", "title": "Writing data on separate rows in csv file in python", "body": "<p>I want to extract news headlines from Hindustantimes.com. I have the following code but i get the data in different columns in the same row. I want each news on separate line. Can anyone please help me. Thanks in advance. Here is my code:</p>\n\n<pre><code>import requests\nimport bs4\nimport csv\nres=requests.get('https://www.hindustantimes.com')\nsoup=bs4.BeautifulSoup(res.text,'lxml')\n\nx=[]\nfor i in soup.select('div.subhead4'):\n    x.append(i.text)\n\nfor i in soup.select('div.bigstory-mid-h3'):\n    x.append(i.text)\n\nfor i in x:\n    print(i)\n\nwith open('newz.csv','w') as cF:\n    wr = csv.writer(cF)\n    wr.writerow(x)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "numpy"], "comments": [{"owner": {"reputation": 804, "user_id": 2298012, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/iNtLs.jpg?s=128&g=1", "display_name": "id101112", "link": "https://stackoverflow.com/users/2298012/id101112"}, "reply_to_user": {"reputation": 3719, "user_id": 2550406, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GhBMm.png?s=128&g=1", "display_name": "lucidbrot", "link": "https://stackoverflow.com/users/2550406/lucidbrot"}, "edited": false, "score": 0, "creation_date": 1542834154, "post_id": 53420381, "comment_id": 93715138, "body": "@lucidbrot yes it is the kind of matrix multiplication"}, {"owner": {"reputation": 804, "user_id": 2298012, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/iNtLs.jpg?s=128&g=1", "display_name": "id101112", "link": "https://stackoverflow.com/users/2298012/id101112"}, "reply_to_user": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 0, "creation_date": 1542834270, "post_id": 53420381, "comment_id": 93715186, "body": "@timgeb I don&#39;t have the output yet, but it after matrix multiplication it should be a one dimensional list"}, {"owner": {"reputation": 3719, "user_id": 2550406, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GhBMm.png?s=128&g=1", "display_name": "lucidbrot", "link": "https://stackoverflow.com/users/2550406/lucidbrot"}, "edited": false, "score": 0, "creation_date": 1542834313, "post_id": 53420381, "comment_id": 93715201, "body": "@id101112 Okay, <a href=\"https://docs.scipy.org/doc/numpy-1.15.0/reference/generated/numpy.dot.html\" rel=\"nofollow noreferrer\">apparently the dot function is defined for more shapes than I expected</a> but using <code>list1 @ list2</code> is recommended. Your question needs some additional info about what is wrong with <code>np.dot(list1, list2)</code> though"}, {"owner": {"reputation": 3719, "user_id": 2550406, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GhBMm.png?s=128&g=1", "display_name": "lucidbrot", "link": "https://stackoverflow.com/users/2550406/lucidbrot"}, "edited": false, "score": 0, "creation_date": 1542834426, "post_id": 53420381, "comment_id": 93715253, "body": "@id101112 <code>list1</code> is not a vector, it is a matrix. How do you expect the matrix multiplication to work without transposing either list? And I don&#39;t think the result can ever be onedimensional. You have matrixes of shape <code>Nx2</code> so it will be at least 2-dimensional, right?"}, {"owner": {"reputation": 804, "user_id": 2298012, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/iNtLs.jpg?s=128&g=1", "display_name": "id101112", "link": "https://stackoverflow.com/users/2298012/id101112"}, "edited": false, "score": 1, "creation_date": 1542834522, "post_id": 53420381, "comment_id": 93715295, "body": "let me edit my question again, it might not be very cleared,"}], "answers": [{"comments": [{"owner": {"reputation": 804, "user_id": 2298012, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/iNtLs.jpg?s=128&g=1", "display_name": "id101112", "link": "https://stackoverflow.com/users/2298012/id101112"}, "edited": false, "score": 0, "creation_date": 1542839973, "post_id": 53420713, "comment_id": 93717266, "body": "okey yes I just needed this line <code>[np.dot(a,b) for a,b in zip(list1, list2)]</code>  thanks"}, {"owner": {"reputation": 3719, "user_id": 2550406, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GhBMm.png?s=128&g=1", "display_name": "lucidbrot", "link": "https://stackoverflow.com/users/2550406/lucidbrot"}, "reply_to_user": {"reputation": 804, "user_id": 2298012, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/iNtLs.jpg?s=128&g=1", "display_name": "id101112", "link": "https://stackoverflow.com/users/2298012/id101112"}, "edited": false, "score": 0, "creation_date": 1542861937, "post_id": 53420713, "comment_id": 93722385, "body": "No problem! Please upvote and accept my answer if it helped you :) and if something is unclear, feel free to ask"}], "tags": [], "owner": {"reputation": 3719, "user_id": 2550406, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GhBMm.png?s=128&g=1", "display_name": "lucidbrot", "link": "https://stackoverflow.com/users/2550406/lucidbrot"}, "is_accepted": true, "score": 1, "last_activity_date": 1542836094, "last_edit_date": 1542836094, "creation_date": 1542835756, "answer_id": 53420713, "question_id": 53420381, "link": "https://stackoverflow.com/questions/53420381/how-can-i-apply-the-np-dot-function-on-two-lists-in-numpy-pandas/53420713#53420713", "title": "how can I apply the np.dot function on two lists in numpy pandas", "body": "<p>So your question is actually about how to loop through the lists and call <code>np.dot</code> on each corresponding pair. Here's one way to do it, using list comprehension and <code>zip</code>:  </p>\n\n<pre><code>&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; list1 = np.array([[1,2],[3,4]])\n&gt;&gt;&gt; list2 = list1.copy()\n&gt;&gt;&gt; list_of_results = [np.dot(a,b) for a,b in zip(list1, list2)]\n&gt;&gt;&gt; list_of_results\n[5, 25]\n</code></pre>\n\n<p>If you are not familiar with list comprehension, I advise you to look that up. But you could also do it with a simple for loop:  </p>\n\n<pre><code>assert list1.shape == list2.shape, \"List shapes do not match\"\nresults = []\nfor inner_list_index in range(list1.shape[0]):\n    a = list1[inner_list_index]\n    b = list2[inner_list_index]\n    res = np.dot(a,b)\n    results = results.append(res)\n</code></pre>\n\n<p>This can be reduced to fewer lines:  </p>\n\n<pre><code>&gt;&gt;&gt; assert list1.shape[0] == list2.shape[0]\n&gt;&gt;&gt; results = []\n&gt;&gt;&gt; for i in range(list1.shape[0]):\n...     results.append(np.dot(list1[i], list2[i]))\n...\n&gt;&gt;&gt; results\n[5, 25]\n</code></pre>\n\n<p>Note that both of these approaches return a normal <code>list</code>, not a numpy <code>ndarray</code>. This is because appending to numpy arrays is usually not too fast. You could use <code>np.append()</code> instead. Or just apply <code>np.array()</code> to the result if you need it as an np array again.</p>\n"}], "owner": {"reputation": 804, "user_id": 2298012, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/iNtLs.jpg?s=128&g=1", "display_name": "id101112", "link": "https://stackoverflow.com/users/2298012/id101112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 0, "accepted_answer_id": 53420713, "answer_count": 1, "score": -2, "last_activity_date": 1542836094, "creation_date": 1542833886, "last_edit_date": 1542835059, "question_id": 53420381, "link": "https://stackoverflow.com/questions/53420381/how-can-i-apply-the-np-dot-function-on-two-lists-in-numpy-pandas", "title": "how can I apply the np.dot function on two lists in numpy pandas", "body": "<p>I have two different lists and I have to apply np.dot function of numpy in python\nhow can I do that?</p>\n\n<p>list1= </p>\n\n<pre><code>array([[      nan,       nan],\n       [ 0.000829,  0.000326],\n       [-0.000149, -0.00033 ],\n       ...,\n       [-0.000757, -0.000737],\n       [-0.000795, -0.00068 ],\n       [-0.000788, -0.00069 ]])\n</code></pre>\n\n<p>list2 = </p>\n\n<pre><code>array([[      nan,       nan],\n       [      nan,       nan],\n       [-0.000829, -0.000326],\n       ...,\n       [ 0.000763,  0.000738],\n       [ 0.000757,  0.000737],\n       [ 0.000795,  0.00068 ]])\n</code></pre>\n\n<p>these are two seperate list of lists</p>\n\n<p>so I want to do it this way:</p>\n\n<pre><code>np.dot([-0.000149, -0.00033 ], [-0.000829, -0.000326])\n</code></pre>\n\n<p>so it is like</p>\n\n<pre><code>np.dot(list1[3], list2[3])\n</code></pre>\n\n<p>and it continue to choose one index from one list and one index from the other list \nand that should return the one dimensional array, the problem is data, which is in two seperate list, so I need one index from list one and one index from the other list, i know it can be done through the loop, but not sure how is it possible, </p>\n\n<p>i hope it is clear now </p>\n"}, {"tags": ["python", "beautifulsoup"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1542834082, "post_id": 53420366, "comment_id": 93715103, "body": "Where are you seeing all 463 results?  In a browser?  Smells like JavaScript."}, {"owner": {"reputation": 510, "user_id": 1663382, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cc646a7c470b1f5b39d298a7583b5e85?s=128&d=identicon&r=PG", "display_name": "Liquidgenius", "link": "https://stackoverflow.com/users/1663382/liquidgenius"}, "edited": false, "score": 0, "creation_date": 1542834115, "post_id": 53420366, "comment_id": 93715115, "body": "I noticed that the page has a \u201cShow More\u201d link at the bottom to load all the results. Without a lot of research, the issue may be that you have to click the link with BS4 to have access to all results."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "reply_to_user": {"reputation": 510, "user_id": 1663382, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cc646a7c470b1f5b39d298a7583b5e85?s=128&d=identicon&r=PG", "display_name": "Liquidgenius", "link": "https://stackoverflow.com/users/1663382/liquidgenius"}, "edited": false, "score": 0, "creation_date": 1542834174, "post_id": 53420366, "comment_id": 93715147, "body": "@Liquidgenius I don&#39;t think BS4 is capable of that.  He may have to use something like Selenium."}, {"owner": {"reputation": 510, "user_id": 1663382, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cc646a7c470b1f5b39d298a7583b5e85?s=128&d=identicon&r=PG", "display_name": "Liquidgenius", "link": "https://stackoverflow.com/users/1663382/liquidgenius"}, "edited": false, "score": 0, "creation_date": 1542834558, "post_id": 53420366, "comment_id": 93715305, "body": "@Gordon Yes, I believe I used Selenium the last time I had to do something like this in conjunction with BS4."}, {"owner": {"reputation": 65, "user_id": 6644716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb8c1969075fa86fb1e63ed1ca9a1b78?s=128&d=identicon&r=PG&f=1", "display_name": "emvy03", "link": "https://stackoverflow.com/users/6644716/emvy03"}, "edited": false, "score": 0, "creation_date": 1542835235, "post_id": 53420366, "comment_id": 93715597, "body": "Hi John, LiquidGenius - Yes, I can see the full 463 results in page source in a browser but as you say there are only 200 results loaded in the first instance (without clicking &#39;See More&#39;). I shall research Selenium - it&#39;s not something I have used before, in truth."}], "answers": [{"comments": [{"owner": {"reputation": 738, "user_id": 6042206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aMQZp.jpg?s=128&g=1", "display_name": "Kamikaze_goldfish", "link": "https://stackoverflow.com/users/6042206/kamikaze-goldfish"}, "edited": false, "score": 0, "creation_date": 1542836079, "post_id": 53420769, "comment_id": 93715932, "body": "I got 462, not 463."}, {"owner": {"reputation": 65, "user_id": 6644716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb8c1969075fa86fb1e63ed1ca9a1b78?s=128&d=identicon&r=PG&f=1", "display_name": "emvy03", "link": "https://stackoverflow.com/users/6644716/emvy03"}, "edited": false, "score": 0, "creation_date": 1542836642, "post_id": 53420769, "comment_id": 93716142, "body": "Wonderful - Thank you so much for your help. As soon as the Chrome Driver finishes installing I shall give it a try."}, {"owner": {"reputation": 738, "user_id": 6042206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aMQZp.jpg?s=128&g=1", "display_name": "Kamikaze_goldfish", "link": "https://stackoverflow.com/users/6042206/kamikaze-goldfish"}, "reply_to_user": {"reputation": 65, "user_id": 6644716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb8c1969075fa86fb1e63ed1ca9a1b78?s=128&d=identicon&r=PG&f=1", "display_name": "emvy03", "link": "https://stackoverflow.com/users/6644716/emvy03"}, "edited": false, "score": 0, "creation_date": 1542837012, "post_id": 53420769, "comment_id": 93716275, "body": "I run headless so it\u2019s not going to bring up a browser. @emvy03 you can just delete the code line that says headless to see the browser."}, {"owner": {"reputation": 738, "user_id": 6042206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aMQZp.jpg?s=128&g=1", "display_name": "Kamikaze_goldfish", "link": "https://stackoverflow.com/users/6042206/kamikaze-goldfish"}, "reply_to_user": {"reputation": 15697, "user_id": 458214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef09f4a6e7e0803825d17212d2dba67?s=128&d=identicon&r=PG", "display_name": "ewwink", "link": "https://stackoverflow.com/users/458214/ewwink"}, "edited": false, "score": 0, "creation_date": 1542842299, "post_id": 53420769, "comment_id": 93717989, "body": "That was from your code I had weeks ago from another answer :D @ewwink"}, {"owner": {"reputation": 65, "user_id": 6644716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb8c1969075fa86fb1e63ed1ca9a1b78?s=128&d=identicon&r=PG&f=1", "display_name": "emvy03", "link": "https://stackoverflow.com/users/6644716/emvy03"}, "edited": false, "score": 0, "creation_date": 1543148701, "post_id": 53420769, "comment_id": 93805445, "body": "Thanks so much for your help, guys! :)"}], "tags": [], "owner": {"reputation": 738, "user_id": 6042206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aMQZp.jpg?s=128&g=1", "display_name": "Kamikaze_goldfish", "link": "https://stackoverflow.com/users/6042206/kamikaze-goldfish"}, "is_accepted": true, "score": 2, "last_activity_date": 1542836022, "creation_date": 1542836022, "answer_id": 53420769, "question_id": 53420366, "link": "https://stackoverflow.com/questions/53420366/python-beautiful-soup-find-all-limit-limits-results/53420769#53420769", "title": "Python/Beautiful Soup - find_all limit limits results", "body": "<pre><code>from selenium import webdriver\nfrom selenium.webdriver.chrome.options import Options\nfrom bs4 import BeautifulSoup\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\n\noptions = Options()\noptions.add_argument('--headless')\ndriver = webdriver.Chrome(options=options)\ndriver.get('https://www.skysports.com/premier-league-results/1992-93')\nWebDriverWait(driver, 20).until(EC.presence_of_element_located((By.CLASS_NAME, 'plus-more__text')))\n\nif driver.find_element_by_class_name('plus-more__text'):\n    print('Found')\n    driver.execute_script(\"arguments[0].scrollIntoView();\", driver.find_element_by_class_name('plus-more__text'))\n    driver.execute_script(\"arguments[0].click();\", driver.find_element_by_class_name('plus-more__text'))\n\nhtml = driver.page_source\nsoup = BeautifulSoup(html, 'lxml')\n\nlinks = soup.findAll('div', class_='fixres__item')\n\nprint(len(links))\n\n\ndriver.quit()\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 6644716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb8c1969075fa86fb1e63ed1ca9a1b78?s=128&d=identicon&r=PG&f=1", "display_name": "emvy03", "link": "https://stackoverflow.com/users/6644716/emvy03"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 774, "favorite_count": 0, "accepted_answer_id": 53420769, "answer_count": 1, "score": 1, "last_activity_date": 1542836022, "creation_date": 1542833812, "question_id": 53420366, "link": "https://stackoverflow.com/questions/53420366/python-beautiful-soup-find-all-limit-limits-results", "title": "Python/Beautiful Soup - find_all limit limits results", "body": "<p>I am trying to get the historical results from the Premier League but while the html gets all results, the Beautiful Soup find_all only returns 200 results (there should be 463. Is there anyway to solve this issue?</p>\n\n<p>Many thanks</p>\n\n<p>Matt</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\nurl = \"https://www.skysports.com/premier-league- \nresults/1992-93\"\nurl_content = requests.get(url).content\nurl_bs = BeautifulSoup(url_content,'html.parser')\nmatch_list = \nurl_bs.find_all(attrs=\"class\":\"fixres__item\"})\nprint(len(match_list))\n</code></pre>\n"}, {"tags": ["python", "types", "generator", "cython", "isinstance"], "comments": [{"owner": {"reputation": 6036, "user_id": 1717828, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b52e6a27ec5f0cee4f12713f058923f2?s=128&d=identicon&r=PG", "display_name": "user1717828", "link": "https://stackoverflow.com/users/1717828/user1717828"}, "edited": false, "score": 0, "creation_date": 1542833797, "post_id": 53420354, "comment_id": 93714970, "body": "<i>Avoid answering questions in comments.</i>"}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1542834024, "post_id": 53420354, "comment_id": 93715076, "body": "Testing against <code>types.GeneratorType</code> works just fine when <i>not</i> using cython..."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1542834925, "post_id": 53420354, "comment_id": 93715467, "body": "Don&#39;t be picky about where you get help!  As an experienced poster, I often answer with short comments.  For a regular answer I spend more time, providing working examples and explanations."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1542839845, "post_id": 53420354, "comment_id": 93717223, "body": "This <i>doesn&#39;t</i> fix the problem, but Cython now supports the standard <code>@property</code> syntax (which I think is now preferred since it matches the rest of Python). It behaves exactly the same though with this."}], "answers": [{"comments": [{"owner": {"reputation": 6036, "user_id": 1717828, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b52e6a27ec5f0cee4f12713f058923f2?s=128&d=identicon&r=PG", "display_name": "user1717828", "link": "https://stackoverflow.com/users/1717828/user1717828"}, "edited": false, "score": 0, "creation_date": 1543344354, "post_id": 53425234, "comment_id": 93882094, "body": "This answered the question in the MWE that I posted, but unfortunately it didn&#39;t solve my problem (determining the type of <a href=\"https://github.com/explosion/spaCy/blob/develop/spacy/tokens/token.pyx#L456\" rel=\"nofollow noreferrer\">this Spacy attribute</a>).  However, I was able to use your example to set <code>SpacyGeneratorType = type(doc.subtree)</code> and then test against that type, like you showed.  This mostly teaches me how little I know about types in Cython.  Thanks for your help!"}], "tags": [], "owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "is_accepted": true, "score": 2, "last_activity_date": 1542869058, "creation_date": 1542869058, "answer_id": 53425234, "question_id": 53420354, "link": "https://stackoverflow.com/questions/53420354/how-to-test-if-cython-property-is-generator/53425234#53425234", "title": "How to test if Cython property is generator?", "body": "<p>Why doesn't the usual way work? </p>\n\n<p>First, as you already probably know, there is no difference between <code>inspect.isgeneratorfunction(...)</code> and <code>isinstance(..., types.GeneratorType)</code> - the inspect-module just <a href=\"https://github.com/python/cpython/blob/7cd25434164882c2093ea41ccfc7b95a05cd5cbd/Lib/inspect.py#L203\" rel=\"nofollow noreferrer\">calls</a> <code>isinstance(..., types.GeneratorType)</code>.</p>\n\n<p>On the other hand, <code>types.GeneratorType</code> is <a href=\"https://github.com/python/cpython/blob/e42b705188271da108de42b55d9344642170aa2b/Lib/types.py#L18\" rel=\"nofollow noreferrer\">defined as</a> </p>\n\n<pre><code>def _g():\n    yield 1\nGeneratorType = type(_g())\n</code></pre>\n\n<p>CPython uses PyGenObject (<a href=\"https://github.com/python/cpython/blob/e42b705188271da108de42b55d9344642170aa2b/Include/genobject.h#L34\" rel=\"nofollow noreferrer\">here code</a>, <a href=\"https://docs.python.org/3/c-api/gen.html\" rel=\"nofollow noreferrer\">here documentation</a>) for generators, there is no fancy logic for the comparison as for some ABC-classes, so the <code>isinstance</code> will boil down to comparing the C-object types.</p>\n\n<p>However, Cython returns a <a href=\"https://github.com/cython/cython/blob/bd023b4e4f375ce0c90e85a2bf6302565f9276be/Cython/Utility/Coroutine.c#L365\" rel=\"nofollow noreferrer\"><code>__pyx_CoroutineObject</code></a> for generators (just check the cythonized code to see)</p>\n\n<pre><code>typedef PyObject *(*__pyx_coroutine_body_t)(PyObject *, PyThreadState *, PyObject *);\ntypedef struct {\n    PyObject_HEAD\n    __pyx_coroutine_body_t body;\n    PyObject *closure;\n    ...\n    int resume_label;\n    char is_running;\n} __pyx_CoroutineObject;\n</code></pre>\n\n<p>which has nothing to do with <code>PyGenObject</code> as far as <code>isinstance</code>is concerned - it doesn't really care whether <code>generator</code> is in the name of the type (but for us humans it can be really puzzling, because <code>type(obj)</code> says \"generator\").</p>\n\n<p>So you will have to roll out your own version of <code>isgenerator</code>, which takes also Cython-\"generators\" into account. There are many ways, for example</p>\n\n<pre><code>%%cython\ndef _f():\n    yield 1\nCyGeneratorType = type(_f())   \ndef iscygenerator(o):\n    return isinstance(o, CyGeneratorType)\n</code></pre>\n\n<p>and now:</p>\n\n<pre><code>import inspect   \ndef isgenerator(o):\n    return inspect.isgenerator(o)  or iscygenerator(o)\n\nisgenerator(SomeCls().x)          #  True\niscygenerator(SomeCls().x)        #  True\ninspect.isgenerator(SomeCls().x)  #  False\n</code></pre>\n"}], "owner": {"reputation": 6036, "user_id": 1717828, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b52e6a27ec5f0cee4f12713f058923f2?s=128&d=identicon&r=PG", "display_name": "user1717828", "link": "https://stackoverflow.com/users/1717828/user1717828"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 53425234, "answer_count": 1, "score": 2, "last_activity_date": 1542869058, "creation_date": 1542833743, "question_id": 53420354, "link": "https://stackoverflow.com/questions/53420354/how-to-test-if-cython-property-is-generator", "title": "How to test if Cython property is generator?", "body": "<p>In IPython, I can see that a property of a Cython class is a generator by simply defining it and then calling:</p>\n\n<pre><code>%%cython\ncdef class SomeCls:\n    property x:\n        def __get__(self):\n            yield 1\n</code></pre>\n\n<p>The call looks like</p>\n\n<pre><code>SomeCls().x\n# prints &lt;generator at 0x102f61ee8&gt;\n</code></pre>\n\n<p>I am having trouble testing if that property is a generator:</p>\n\n<pre><code>import types\nprint(isinstance(SomeCls().x, types.GeneratorType))\n# prints False\n\nimport inspect\nprint(inspect.isgeneratorfunction(SomeCls.x))\n# prints False\n</code></pre>\n\n<p>How can I determine whether a property of a Cython class is a generator?</p>\n"}, {"tags": ["python", "performance", "numpy"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1542833930, "post_id": 53420348, "comment_id": 93715033, "body": "I use <a href=\"https://github.com/rkern/line_profiler\" rel=\"nofollow noreferrer\"><code>line_profiler</code></a>  but my <i>guess</i> would be that you&#39;re incurring the <code>import</code> overhead the first time. After that, The module is cached"}, {"owner": {"reputation": 1063, "user_id": 4098186, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NE30h.jpg?s=128&g=1", "display_name": "eozd", "link": "https://stackoverflow.com/users/4098186/eozd"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1542833998, "post_id": 53420348, "comment_id": 93715068, "body": "@roganjosh Isn&#39;t the module included before the script comes to <code>if __name__ == &#39;__main__&#39;:</code> part ?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1542834164, "post_id": 53420348, "comment_id": 93715143, "body": "It&#39;s an external module and nothing in your code suggests you&#39;re using it (EDIT:  that&#39;s a lie, you&#39;re using <code>@profile</code> decorator so I&#39;ll rethink) I don&#39;t know exactly what timings get bundled into the main library timings."}, {"owner": {"reputation": 5140, "user_id": 494076, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a84fc4b13919dce4e196152b4b8a1cc4?s=128&d=identicon&r=PG", "display_name": "Ante", "link": "https://stackoverflow.com/users/494076/ante"}, "edited": false, "score": 1, "creation_date": 1542977973, "post_id": 53420348, "comment_id": 93767124, "body": "Loading of BLAS?"}], "owner": {"reputation": 73, "user_id": 6575808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4d6ef1fa9cc0638d95c4847ae9ce505?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Asher", "link": "https://stackoverflow.com/users/6575808/isaac-asher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1542833719, "creation_date": 1542833719, "question_id": 53420348, "link": "https://stackoverflow.com/questions/53420348/why-is-np-dot-much-slower-the-first-time-it-is-called-in-a-python-session", "title": "Why is np.dot much slower the first time it is called in a python session?", "body": "<p>I am trying to do series of big <code>np.dot(a,x)</code> operations, and the first one seems to take far longer than subsequent calls.  In my problem, <code>a</code> is tall [n x 2] and <code>x</code> is [2 x 1].  My big matrix <code>a</code> is constant, it is just <code>x</code> that is changing.  Here is a MWE:</p>\n\n<pre><code>import numpy as np\n\n@profile\ndef do_work(a,x):\n    tmp = np.dot(a,x)\n    return tmp\n\n@profile\ndef do_work_iter(a,x):\n    tmp = np.dot(a,x)\n    return tmp\n\nif __name__==\"__main__\":\n\n    n = 50000\n    a = np.random.randn(n,2)\n    x = np.random.randn(2,1)\n\n    #\n    tmp = do_work(a,x)\n\n    #\n    niter = 100\n    for i in range(niter):\n        x = np.random.randn(2,1)\n        tmp = do_work_iter(a,x)\n</code></pre>\n\n<p>Using <code>line_profiler</code>, I get .155 s/call for the first call to <code>np.dot</code> and .00013 s/call for the subsequent ones.  Is there some setup/error checking that <code>numpy</code> is doing the first time here?  Is there a way I can bypass any of it?  Or is there some kind of searching for blas functions that is taking all of the time?</p>\n\n<p>I also ran <code>profile</code> and it gives the following:</p>\n\n<pre><code>ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n     1    0.000    0.000    1.514    1.514 {built-in method builtins.exec}\n     1    0.000    0.000    1.514    1.514 &lt;string&gt;:1(&lt;module&gt;)\n     1    0.000    0.000    1.514    1.514 speed_small.py:15(run)\n   101    1.503    0.015    1.503    0.015 {built-in method numpy.core.multiarray.dot}\n     1    0.000    0.000    1.491    1.491 speed_small.py:5(do_work)\n   100    0.000    0.000    0.012    0.000 speed_small.py:10(do_work_iter)\n</code></pre>\n\n<p>so <code>numpy.core.multiarray.dot</code> is taking all of the time, it doesn't give much insight about anything further down the stack.  </p>\n\n<p>I am on Python 3.6 from Anaconda and have mkl installed (Windows 7).</p>\n"}, {"tags": ["python", "tensorflow", "keras", "deep-learning", "feature-extraction"], "comments": [{"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1542840659, "post_id": 53420338, "comment_id": 93717457, "body": "There is no way to answer this if you don&#39;t include the equivalent Matlab code and the results you are seeing."}, {"owner": {"reputation": 51, "user_id": 4305584, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000249670266/picture?type=large", "display_name": "Ahmed Tarawneh", "link": "https://stackoverflow.com/users/4305584/ahmed-tarawneh"}, "reply_to_user": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 1, "creation_date": 1542888306, "post_id": 53420338, "comment_id": 93735129, "body": "Edited! I think its more clear now :)"}, {"owner": {"reputation": 43423, "user_id": 1011724, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/2JAXi.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1011724/dan"}, "edited": false, "score": 0, "creation_date": 1542888668, "post_id": 53420338, "comment_id": 93735322, "body": "Which variables are you showing in the two pictures? <code>feature</code> and <code>trainingFeatures</code>? Also where is ResNet coming into this, it looks like you&#39;ve only used VGG? Is your python model using ReLu and your MATLAB model using tanh maybe?"}, {"owner": {"reputation": 51, "user_id": 4305584, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000249670266/picture?type=large", "display_name": "Ahmed Tarawneh", "link": "https://stackoverflow.com/users/4305584/ahmed-tarawneh"}, "edited": false, "score": 0, "creation_date": 1542889052, "post_id": 53420338, "comment_id": 93735526, "body": "Yes, feature and trainingFeatures. I have edited the code and used vgg16 in both Python and Matlab for more clarification. Keras and Matlab model (vgg16) use the same ReLu layer"}, {"owner": {"reputation": 51, "user_id": 4305584, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000249670266/picture?type=large", "display_name": "Ahmed Tarawneh", "link": "https://stackoverflow.com/users/4305584/ahmed-tarawneh"}, "edited": false, "score": 0, "creation_date": 1542889428, "post_id": 53420338, "comment_id": 93735730, "body": "It seems that the Python model discards the negative values, while the Matlab does not!"}, {"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1542890687, "post_id": 53420338, "comment_id": 93736411, "body": "The title of your question mentions ResNet50, please be consistent. And I still don&#39;t get where you are getting these negative values from, as VGG uses only ReLU activations, so no negative values can be produced, unless your matlab code is outputting the logits and not some particular layer activation."}, {"owner": {"reputation": 51, "user_id": 4305584, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000249670266/picture?type=large", "display_name": "Ahmed Tarawneh", "link": "https://stackoverflow.com/users/4305584/ahmed-tarawneh"}, "reply_to_user": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1542891464, "post_id": 53420338, "comment_id": 93736852, "body": "@MatiasValdenegro due to my understanding, the above codes should extract the features from the same layer, which is the fully connected layer 7. I don&#39;t know how to make the Python version extracting the same features with the negative values"}, {"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1542891802, "post_id": 53420338, "comment_id": 93737030, "body": "VGG16 has three fully connected layers, there is no fc7. I don&#39;t think you are extracting features from the same layers, and that explains any difference."}, {"owner": {"reputation": 51, "user_id": 4305584, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000249670266/picture?type=large", "display_name": "Ahmed Tarawneh", "link": "https://stackoverflow.com/users/4305584/ahmed-tarawneh"}, "reply_to_user": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1542892493, "post_id": 53420338, "comment_id": 93737376, "body": "@MatiasValdenegro there is just a difference in naming, Matlab uses the name fc7 in their documentation while Keras uses fc2 and both refer to the last layer before the classification layer, and both extract 4096 values."}, {"owner": {"reputation": 51, "user_id": 4305584, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000249670266/picture?type=large", "display_name": "Ahmed Tarawneh", "link": "https://stackoverflow.com/users/4305584/ahmed-tarawneh"}, "reply_to_user": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1542893274, "post_id": 53420338, "comment_id": 93737785, "body": "@MatiasValdenegro <a href=\"https://uk.mathworks.com/help/deeplearning/ref/vgg16.html\" rel=\"nofollow noreferrer\">Here</a> fc7 extracts the features before ReLU, is that right? If yes, how I can extract the same using Keras model?"}, {"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 1, "creation_date": 1542893617, "post_id": 53420338, "comment_id": 93737953, "body": "Yes, it seems to be before ReLU, you can&#39;t extract the same in Keras as each layer has the ReLU embedded inside the layer. This explains all the differences."}, {"owner": {"reputation": 51, "user_id": 4305584, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000249670266/picture?type=large", "display_name": "Ahmed Tarawneh", "link": "https://stackoverflow.com/users/4305584/ahmed-tarawneh"}, "edited": false, "score": 0, "creation_date": 1542894054, "post_id": 53420338, "comment_id": 93738210, "body": "Thank you! we&#39;ll look for more suggestions."}], "answers": [{"tags": [], "owner": {"reputation": 2393, "user_id": 31045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/1sz79.png?s=128&g=1", "display_name": "geometrikal", "link": "https://stackoverflow.com/users/31045/geometrikal"}, "is_accepted": false, "score": 0, "last_activity_date": 1567735144, "creation_date": 1567735144, "answer_id": 57814840, "question_id": 53420338, "link": "https://stackoverflow.com/questions/53420338/why-feature-vectors-have-a-lot-of-zero-values-in-keras-vgg16-models-output/57814840#57814840", "title": "Why feature vectors have a lot of zero values in Keras VGG16 model&#39;s output?", "body": "<p>In my own custom network I have found that zeros generally occur in the same location in the vector regardless of the input image, and that the number of these zero dimensions is related to the dropout keep probability. </p>\n\n<p>So I would infer dropout causes this. Lower dropout keep probability likely causes less zeros, as more non-zero features are needed to ensure important ones make it through the dropout phase.</p>\n\n<p>As for why dropout causes zeros, I\u2019m not sure. It would be interesting to see if the number changes during training. </p>\n"}], "owner": {"reputation": 51, "user_id": 4305584, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000249670266/picture?type=large", "display_name": "Ahmed Tarawneh", "link": "https://stackoverflow.com/users/4305584/ahmed-tarawneh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 520, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567735144, "creation_date": 1542833686, "last_edit_date": 1542891132, "question_id": 53420338, "link": "https://stackoverflow.com/questions/53420338/why-feature-vectors-have-a-lot-of-zero-values-in-keras-vgg16-models-output", "title": "Why feature vectors have a lot of zero values in Keras VGG16 model&#39;s output?", "body": "<p>I am trying to extract the features from the last layer of VGG16 model in Keras using the following code:</p>\n\n<pre><code>from keras.applications.vgg16 import VGG16\nfrom keras.preprocessing import image\nfrom keras.applications.vgg16 import preprocess_input\nimport numpy as np\n\nmodel = VGG16(weights='imagenet', include_top=True )\n\n\nimg_path = 'E:\\project\\KERAS DEEP\\poodle.png'\nimg = image.load_img(img_path, target_size=(224, 224))\nimg_data = image.img_to_array(img)\nimg_data = np.expand_dims(img_data, axis=0)\nimg_data = preprocess_input(img_data)\nmodel.summary()\nmodel.layers.pop();\nmodel.outputs = [model.layers[-1].output]\nmodel.layers[-1].outbound_nodes = []\nfeature = model.predict(img_data)[0]\n</code></pre>\n\n<p>feature variable supposes to be the feature vector but it has a lot of zeros, I think because of relu layer. In Matlab, for example, the extracted features vector seems to have both positive and negative values, how I can get the same with keras model?</p>\n\n<p>The matlab code is:</p>\n\n<pre><code>im=imread('poodle.png');\nim=imresize(im,[224,224]);\nnet=vgg16;\ntrainingFeatures = activations(net, im, 'fc7', ...\n'OutputAs', 'rows');\n</code></pre>\n\n<p>the two output vectors <code>feature</code> and <code>trainingFeatures</code> as following (python output to the left and Matlab's to the right</p>\n\n<p><a href=\"https://i.stack.imgur.com/quz8S.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/quz8S.png\" alt=\"Samples from the Keras output\"></a>\n<a href=\"https://i.stack.imgur.com/8EZ9X.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8EZ9X.png\" alt=\"enter image description here\"></a></p>\n\n<p>And here is the tested image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/qMenv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qMenv.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1542833766, "post_id": 53420278, "comment_id": 93714960, "body": "You&#39;ll need to show the full traceback here"}, {"owner": {"reputation": 1283, "user_id": 10657880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q8HXS.jpg?s=128&g=1", "display_name": "Aurora Wang", "link": "https://stackoverflow.com/users/10657880/aurora-wang"}, "edited": false, "score": 0, "creation_date": 1542833800, "post_id": 53420278, "comment_id": 93714971, "body": "Your error doesn&#39;t match your code, in your code you&#39;re not trying to import <code>pokemon_names</code>. Please show your other file&#39;s code and the correct traceback."}, {"owner": {"reputation": 83, "user_id": 10543998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b4a6dea15c4d55c424c8d8ad1166f8?s=128&d=identicon&r=PG&f=1", "display_name": "Meliodus123", "link": "https://stackoverflow.com/users/10543998/meliodus123"}, "edited": false, "score": 0, "creation_date": 1542833838, "post_id": 53420278, "comment_id": 93714990, "body": "Sorry  I am not familliar with the term traceback?"}, {"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 1, "creation_date": 1542834107, "post_id": 53420278, "comment_id": 93715111, "body": "The full error message that usually starts with &quot;Traceback (most recent call last)&quot;"}, {"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1542834203, "post_id": 53420278, "comment_id": 93715158, "body": "It seems that <code>backend</code> just doesn&#39;t define an identifier <code>names</code> (a class, function or variable with that name)."}, {"owner": {"reputation": 83, "user_id": 10543998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b4a6dea15c4d55c424c8d8ad1166f8?s=128&d=identicon&r=PG&f=1", "display_name": "Meliodus123", "link": "https://stackoverflow.com/users/10543998/meliodus123"}, "edited": false, "score": 0, "creation_date": 1542834315, "post_id": 53420278, "comment_id": 93715203, "body": "File &quot;C:/Users/user/OneDrive/Desktop/Pokemon/weather.py&quot;, line 52, in &lt;module&gt;     from backend import names builtins.ImportError: cannot import name &#39;names&#39; from &#39;backend&#39; - Thats the full error message I don&#39;t see anything about a traceback"}, {"owner": {"reputation": 1283, "user_id": 10657880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q8HXS.jpg?s=128&g=1", "display_name": "Aurora Wang", "link": "https://stackoverflow.com/users/10657880/aurora-wang"}, "edited": false, "score": 2, "creation_date": 1542834667, "post_id": 53420278, "comment_id": 93715361, "body": "Could you edit your question to add your other file&#39;s code?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1542835922, "post_id": 53420278, "comment_id": 93715869, "body": "<code>names</code> is a local variable in the <code>get_pokemon_stats</code> function. Local variables are not visible outside the function that defines them. Also, you never call the function."}, {"owner": {"reputation": 1792, "user_id": 6672746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba91b391da1f42e87437934cdd764a67?s=128&d=identicon&r=PG&f=1", "display_name": "Evan", "link": "https://stackoverflow.com/users/6672746/evan"}, "edited": false, "score": 0, "creation_date": 1542839386, "post_id": 53420278, "comment_id": 93717074, "body": "Instead of saying &quot;the other file,&quot; can you refer to the file(s) by its (their) name(s)? If you define a <code>function1</code> in <code>file1.py</code>, you can put <code>file1.py</code> in the same directory as <code>file2.py</code>, and in <code>file2.py</code>, <code>from file1 import function1</code>. You can also make it far more complicated than that."}, {"owner": {"reputation": 1792, "user_id": 6672746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba91b391da1f42e87437934cdd764a67?s=128&d=identicon&r=PG&f=1", "display_name": "Evan", "link": "https://stackoverflow.com/users/6672746/evan"}, "edited": false, "score": 0, "creation_date": 1542839528, "post_id": 53420278, "comment_id": 93717119, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/20309456/call-a-function-from-another-file-in-python\">Call a function from another file in Python</a>"}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 10543998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b4a6dea15c4d55c424c8d8ad1166f8?s=128&d=identicon&r=PG&f=1", "display_name": "Meliodus123", "link": "https://stackoverflow.com/users/10543998/meliodus123"}, "edited": false, "score": 0, "creation_date": 1542838384, "post_id": 53420761, "comment_id": 93716719, "body": "Thanks a lot both strategies work and the second one is more acceptable for my teachers, teaching style!"}], "tags": [], "owner": {"reputation": 1283, "user_id": 10657880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q8HXS.jpg?s=128&g=1", "display_name": "Aurora Wang", "link": "https://stackoverflow.com/users/10657880/aurora-wang"}, "is_accepted": true, "score": 0, "last_activity_date": 1542836000, "creation_date": 1542836000, "answer_id": 53420761, "question_id": 53420278, "link": "https://stackoverflow.com/questions/53420278/importing-a-file-from-a-function-in-another-file/53420761#53420761", "title": "Importing a file from a function in another file", "body": "<p>According to <a href=\"https://docs.python.org/3/faq/programming.html#what-are-the-rules-for-local-and-global-variables-in-python\" rel=\"nofollow noreferrer\">Python's documentation</a>:</p>\n\n<blockquote>\n  <p>In Python, variables that are only referenced inside a function are implicitly global. If a variable is assigned a value anywhere within the function\u2019s body, it\u2019s assumed to be a local unless explicitly declared as global.</p>\n</blockquote>\n\n<p>Thus, the reason why you can't import your <code>names</code> list from another file is because <code>names</code> is inside your <code>get_pokemon_stats</code> function scope and it is not a global variable.</p>\n\n<p>You can make <code>names</code> global putting it outside your function and declaring it as global to use inside your function:</p>\n\n<pre><code>...\nnames = []\ndef get_pokemon_stats():\n    ...\n    global names\n    ...\n</code></pre>\n\n<p>However, you should consider carefully if you really want to do this. <code>names</code> will only contain actual values once you call your <code>get_pokemon_stats</code> function. Nevertheless, you should avoid just declaring variables globally if you don't really understand how local and global variables work and when we should use them.</p>\n\n<p>I recommend that you consider doing the following code instead:</p>\n\n<pre><code>from backend import get_pokemon_stats\n_, _, word, _ = get_pokemon_stats()\nprint (word)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1542836034, "creation_date": 1542836034, "answer_id": 53420772, "question_id": 53420278, "link": "https://stackoverflow.com/questions/53420278/importing-a-file-from-a-function-in-another-file/53420772#53420772", "title": "Importing a file from a function in another file", "body": "<p>You need to call the <code>get_pokemon_stats</code> function. It returns four values, and the third value is <code>names</code>.</p>\n\n<pre><code>import backend\nname_to_stats, id_to_name, names, pokemon_by_type = backend.get_pokemon_stats()\nprint(names)\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 10543998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b4a6dea15c4d55c424c8d8ad1166f8?s=128&d=identicon&r=PG&f=1", "display_name": "Meliodus123", "link": "https://stackoverflow.com/users/10543998/meliodus123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 53420761, "answer_count": 2, "score": 1, "last_activity_date": 1542836034, "creation_date": 1542833431, "last_edit_date": 1542834864, "question_id": 53420278, "link": "https://stackoverflow.com/questions/53420278/importing-a-file-from-a-function-in-another-file", "title": "Importing a file from a function in another file", "body": "<p>I need to call a list that I made in a function that's in another file. I was trying attempting this below, but I am getting the error <code>cannot import name 'names' from 'backend'</code>. Does anyone know how this can be achieved without making a class?</p>\n\n<pre><code>import backend\nfrom backend import names\nword = names\nprint (word)\n</code></pre>\n\n<p>Error message:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>File \"C:/Users/user/OneDrive/Desktop/Pokemon/weather.py\", line 52, in &lt;module&gt;\n  from backend import names\n  builtins.ImportError: cannot import name 'names' from 'backend'\n</code></pre>\n\n<p>The code form the other file is</p>\n\n<pre><code>import const \n\nSEP = ','\n\ndef get_pokemon_stats():\n    \"\"\"Reads the data contained in a pokemon data file and parses it into\n    several data structures.\n\n    Args:\n        None\n\n    Returns: a tuple of:\n        -a dict where:\n            -each key is a pokemon name (str)\n            -each value is a tuple of the following stats:\n                -pokemon name (str)\n                -species_id (int)\n                -height (float)\n                -weight (float)\n                -type_1 (str)\n                -type_2 (str)\n                -url_image (str)\n                -generation_id (int)\n                -evolves_from_species_id (str)\n        -a dict where:\n            -each key is a pokemon species_id (int)\n            -each value is the corresponding pokemon name (str)\n        -a list of all pokemon names (strs)\n        -a dict where:\n            -each key is a pokemon type (str). Note that type_1 and type_2\n            entries are all considered types. There should be no special\n            treatment for the type NA; it is considered a type as well.\n            -each value is a list of all pokemon names (strs) that fall into\n            the corresponding type\n    \"\"\"\n    name_to_stats = {}\n    id_to_name = {}\n    names = []\n    pokemon_by_type = {}\n    DATA_FILENAME = 'pokemon.csv' \n\n\n    with open(const.DATA_FILENAME) as f:\n        header_to_col_num = parse_header(f)\n        for line in f:\n            info = line.split(const.SEP)\n            name = (info[(header_to_col_num['pokemon'])])\n            col_names = ('pokemon', 'species_id', 'height', 'weight', 'type_1', \n            'type_2',\n            'url_image', 'generation_id', 'evolves_from_species_id',)\n            value = [info[header_to_col_num[col]] for col in col_names]\n            value[1] = int(value[1])\n            value[2] = float(value[2])\n            value[3] = float(value[3])\n            value[7] = int(value[7])\n            value = tuple(value)\n\n            name_to_stats[name] = value\n\n            species_id = int(info[(header_to_col_num['species_id'])])\n            id_to_name[species_id] = name\n            names.append(name)\n\n\n        for name, info in name_to_stats.items():\n            type1 = info[4]\n            type2 = info[5]\n            if type1 in pokemon_by_type:\n                pokemon_by_type[type1].append(name)\n            else:\n                pokemon_by_type[type1] = [name]\n            if type2 in pokemon_by_type:\n                pokemon_by_type[type2].append(name)\n            else:\n                pokemon_by_type[type2] = [name]\n\n\n        return name_to_stats, id_to_name, names, pokemon_by_type\n</code></pre>\n"}, {"tags": ["python", "selenium", "google-chrome", "input", "webdriver"], "comments": [{"owner": {"reputation": 2550, "user_id": 6097503, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NOAgH.png?s=128&g=1", "display_name": "live2", "link": "https://stackoverflow.com/users/6097503/live2"}, "edited": false, "score": 0, "creation_date": 1542833972, "post_id": 53420249, "comment_id": 93715058, "body": "Can you add the error to your question?"}, {"owner": {"reputation": 331, "user_id": 10486028, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--mvYtDUgR-M/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXT_VDVugH5fHDChTkegFkBZC-pdA/mo/photo.jpg?sz=128", "display_name": "Joangel De La Rosa", "link": "https://stackoverflow.com/users/10486028/joangel-de-la-rosa"}, "reply_to_user": {"reputation": 2550, "user_id": 6097503, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NOAgH.png?s=128&g=1", "display_name": "live2", "link": "https://stackoverflow.com/users/6097503/live2"}, "edited": false, "score": 0, "creation_date": 1542834471, "post_id": 53420249, "comment_id": 93715274, "body": "@live2 done sir, i edited the post"}, {"owner": {"reputation": 2550, "user_id": 6097503, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NOAgH.png?s=128&g=1", "display_name": "live2", "link": "https://stackoverflow.com/users/6097503/live2"}, "edited": false, "score": 1, "creation_date": 1542834770, "post_id": 53420249, "comment_id": 93715403, "body": "I think the reason is your url don&#39;t contains the input field it is a frame try on this url <code>https:&#47;&#47;www30.mercantilbanco.com&#47;olb&#47;Login</code>"}, {"owner": {"reputation": 331, "user_id": 10486028, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--mvYtDUgR-M/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXT_VDVugH5fHDChTkegFkBZC-pdA/mo/photo.jpg?sz=128", "display_name": "Joangel De La Rosa", "link": "https://stackoverflow.com/users/10486028/joangel-de-la-rosa"}, "reply_to_user": {"reputation": 2550, "user_id": 6097503, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NOAgH.png?s=128&g=1", "display_name": "live2", "link": "https://stackoverflow.com/users/6097503/live2"}, "edited": false, "score": 0, "creation_date": 1542835107, "post_id": 53420249, "comment_id": 93715550, "body": "@live2 thank you so much! it worked"}, {"owner": {"reputation": 331, "user_id": 10486028, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--mvYtDUgR-M/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXT_VDVugH5fHDChTkegFkBZC-pdA/mo/photo.jpg?sz=128", "display_name": "Joangel De La Rosa", "link": "https://stackoverflow.com/users/10486028/joangel-de-la-rosa"}, "reply_to_user": {"reputation": 2550, "user_id": 6097503, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NOAgH.png?s=128&g=1", "display_name": "live2", "link": "https://stackoverflow.com/users/6097503/live2"}, "edited": false, "score": 0, "creation_date": 1542835854, "post_id": 53420249, "comment_id": 93715836, "body": "@live2 you are very helpful, i got another error can you help me with it? it doesnt type on password"}], "owner": {"reputation": 331, "user_id": 10486028, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--mvYtDUgR-M/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXT_VDVugH5fHDChTkegFkBZC-pdA/mo/photo.jpg?sz=128", "display_name": "Joangel De La Rosa", "link": "https://stackoverflow.com/users/10486028/joangel-de-la-rosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542835807, "creation_date": 1542833295, "last_edit_date": 1542835807, "question_id": 53420249, "link": "https://stackoverflow.com/questions/53420249/selenium-webdriver-python-not-typing-on-password-field", "title": "Selenium webdriver python not typing on password field", "body": "<p>I made this code and it works, the only problem is when typing on password field. Doesnt appear anything. Can you help me please?</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nimport threading\n\nuserStr = '555555'\npasswordStr = '555555'\n\nbrowser = webdriver.Chrome()\nbrowser.get(('https://www30.mercantilbanco.com/olb/Login'))\n\nusername = browser.find_element_by_css_selector('#userId')\nusername.send_keys(userStr)\n\npassword = browser.find_element_by_css_selector('#password')\nusername.send_keys(passwordStr)\n</code></pre>\n"}, {"tags": ["python", "django", "django-models", "django-admin"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 2, "creation_date": 1542833806, "post_id": 53420198, "comment_id": 93714973, "body": "Case is important; it&#39;s <code>ModelAdmin</code>, not <code>Modeladmin</code>."}, {"owner": {"reputation": 43, "user_id": 10677075, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fkX9zXmi7Lc/AAAAAAAAAAI/AAAAAAAAAD0/-sCk0fFt2b0/photo.jpg?sz=128", "display_name": "Call More", "link": "https://stackoverflow.com/users/10677075/call-more"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1542834181, "post_id": 53420198, "comment_id": 93715151, "body": "Thank you that did fix the error however now I have another error, line 9, in profileAdmin     admin.site.register(profile, profileadmin) NameError: name &#39;profileadmin&#39; is not defined. any fixes? Nevermind I fixed therror thank you for your help!"}], "owner": {"reputation": 43, "user_id": 10677075, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fkX9zXmi7Lc/AAAAAAAAAAI/AAAAAAAAAD0/-sCk0fFt2b0/photo.jpg?sz=128", "display_name": "Call More", "link": "https://stackoverflow.com/users/10677075/call-more"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1542833013, "creation_date": 1542833013, "question_id": 53420198, "link": "https://stackoverflow.com/questions/53420198/how-do-i-add-a-class-to-the-admin-page-in-django-python", "title": "How do I add a class to the admin page in django python?", "body": "<p>I am currently making a small site in django. When I tried to add a button to the admin page using this code:</p>\n\n<pre><code> from django.contrib import admin\n\n # Register your models here.\n  from .models import profile\n\n class profileAdmin(admin.Modeladmin):\n      class Meta: \n           Model =  profile\n admin.site.register(profile, profileAdmin)\n</code></pre>\n\n<p>That is the code to add the button to the admin page.</p>\n\n<pre><code> from django.db import models\n\n # Create your models here.\nclass profile(models.Model):\n      name = models.CharField(max_length=50)\n      desc = models.TextField(default = 'default user description')\n      job = models.CharField(max_length=20)\n\n      def _unicode_(self):\n          return self.name\n</code></pre>\n\n<p>That is the code for the button. I also know that the profile app which contains this button and admin page has been added to the install apps and is functioning. When I try to makemigrations I am prompted with this error.</p>\n\n<p>AttributeError: module 'django.contrib.admin' has no attribute 'Modeladmin'</p>\n"}, {"tags": ["python", "sympy", "cas", "equation", "differential-equations"], "owner": {"reputation": 11, "user_id": 10687881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2953a52037d6aac2ac191f324cb74a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro S.", "link": "https://stackoverflow.com/users/10687881/pedro-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1542913918, "creation_date": 1542832990, "last_edit_date": 1542913918, "question_id": 53420192, "link": "https://stackoverflow.com/questions/53420192/can-i-use-sympy-to-deduce-the-telegraphers-equation", "title": "Can I use Sympy to deduce the telegraphers equation?", "body": "<p>I was trying to deduce the <a href=\"https://en.wikipedia.org/wiki/Telegrapher%27s_equations\" rel=\"nofollow noreferrer\">Telegrapher's equation</a> using SymPy. But I couldn't handle nor extract the equation's different parts, so I finally did it manually. Can this be done using SymPy ? I've tried to use <code>subs</code> but I didn't achieve good results.</p>\n\n<p>Thanx in advance! The following code was my attempt to solve the problem:</p>\n\n<pre><code>from sympy import *\n# init_printing(use_unicode=True, wrap_line=False) \nV, I = symbols('V I', cls=Function)\nz = Symbol('z') \nt = Symbol('t') \nR, L, C, G = symbols('R L C G', positive=True) \neq1 = Derivative(V(z, t),z, 1) + R * I(z, t)+L* Derivative(I(z,t),t,1) \n# Derivative(V(z, t), z) + L*Derivative(I(z, t), t) + R*I(z, t) \neq2 = Derivative(I(z,t),z,1)+G*V(z,t)+C*Derivative(V(z,t),t,1) \n# Derivative(I(z, t), z) + C*Derivative(V(z, t), t) + G*V(z, t) \neq3 = eq1.diff(z,1) \n#eq3 = L*Derivative(I(z, t), t, z) + R*Derivative(I(z, t), z) +  Derivative(V(z, t), z, z) \neq4 = eq2.diff(z,1) \n#eq4 = C*Derivative(V(z, t), t, z) + G*Derivative(V(z, t), z) +  Derivative(I(z, t), z, z) \n\n# Then part of eq1 is replaced in eq4 \n# (-1*(R*I(z,t)+L*I(z,t).diff(t,1))) \neq5 = C*Derivative(V(z, t), t, z) + G*(-1* (R*I(z,t)+L*I(z,t).diff(t,1))) + Derivative(I(z, t), z, z) \n\n# And similarly for eq2 in eq3 \n# (-1*(G*V(z,t)+C*V(z,t).diff(t,1))) \neq6 = L*Derivative(I(z, t), t, z) + R*(-1* (G*V(z,t)+C*V(z,t).diff(t,1))) + Derivative(V(z, t), z, z) \n\n# the derivative in time of eq1 \neq7 = eq1.diff(t,1)\n\n# eq7 = L*Derivative(I(z, t), t, t) + R*Derivative(I(z, t), t) + Derivative(V(z, t), t, z) \n\n# Derivative(V(z, t), t, z) = -1*(L*Derivative(I(z, t), t, t) + R*Derivative(I(z, t), t)) \n\n# the derivative in time of eq2\neq8 = eq2.diff(t,1)\n\n# eq8 = C*Derivative(V(z, t), t, t) + G*Derivative(V(z, t), t) + Derivative(I(z, t), t, z)\n\n# Derivative(I(z, t), t, z) = -1* (C*Derivative(V(z, t), t, t) + G*Derivative(V(z, t), t)) \n\n# Replace eq 7 in eq5 \nTelegraphers_eq1 = C*-1*(L*Derivative(I(z, t), t, t) + R*Derivative(I(z, t), t)) + G*(-L*Derivative(I(z, t), t) - R*I(z, t)) + Derivative(I(z, t), z, z) \n\n# Replace eq 8 in eq6 \nTelegraphers_eq2 = L*-1*(C*Derivative(V(z, t), t, t) + G*Derivative(V(z, t), t)) + R*(-C*Derivative(V(z, t), t) - G*V(z, t)) + Derivative(V(z, t), z, z) \n</code></pre>\n\n<p>cheers,\nPedro</p>\n"}, {"tags": ["python", "python-3.x", "pip", "python-venv"], "comments": [{"owner": {"reputation": 1494, "user_id": 5962321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kaylT.png?s=128&g=1", "display_name": "Silmathoron", "link": "https://stackoverflow.com/users/5962321/silmathoron"}, "edited": false, "score": 0, "creation_date": 1542833098, "post_id": 53420155, "comment_id": 93714681, "body": "use python3 in you call"}, {"owner": {"reputation": 671, "user_id": 8022336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VsZUw.png?s=128&g=1", "display_name": "pointerless", "link": "https://stackoverflow.com/users/8022336/pointerless"}, "edited": false, "score": 1, "creation_date": 1542834125, "post_id": 53420155, "comment_id": 93715120, "body": "Additionally, while it is not required, resizing your console window before taking the screenshot would help in identifying the command you have run"}], "answers": [{"comments": [{"owner": {"reputation": 317, "user_id": 6831979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hvjyd.jpg?s=128&g=1", "display_name": "Victor Callejas", "link": "https://stackoverflow.com/users/6831979/victor-callejas"}, "edited": false, "score": 0, "creation_date": 1543486511, "post_id": 53420202, "comment_id": 93940683, "body": "See now the screenshot, I have tried with that too."}, {"owner": {"reputation": 562, "user_id": 9002568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21015a00f084d658638c454ce6cd1feb?s=128&d=identicon&r=PG&f=1", "display_name": "kur ag", "link": "https://stackoverflow.com/users/9002568/kur-ag"}, "reply_to_user": {"reputation": 317, "user_id": 6831979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hvjyd.jpg?s=128&g=1", "display_name": "Victor Callejas", "link": "https://stackoverflow.com/users/6831979/victor-callejas"}, "edited": false, "score": 1, "creation_date": 1543553628, "post_id": 53420202, "comment_id": 93968752, "body": "@VictorCallejas I think it is related to your virtual env. Therefore please try answers on link <a href=\"https://stackoverflow.com/questions/46752488/how-to-set-python-version-for-pip-in-virtualenv\" title=\"how to set python version for pip in virtualenv\">stackoverflow.com/questions/46752488/&hellip;</a>."}], "tags": [], "owner": {"reputation": 562, "user_id": 9002568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21015a00f084d658638c454ce6cd1feb?s=128&d=identicon&r=PG&f=1", "display_name": "kur ag", "link": "https://stackoverflow.com/users/9002568/kur-ag"}, "is_accepted": true, "score": 2, "last_activity_date": 1542833053, "creation_date": 1542833053, "answer_id": 53420202, "question_id": 53420155, "link": "https://stackoverflow.com/questions/53420155/importerror-no-module-named-can-but-its-there-according-to-pip-list/53420202#53420202", "title": "ImportError: No module named can but it&#39;s there according to pip list", "body": "<p>You are looking pip3 (python 3) list, but program working with python 2.7. You need to install the package with pip command.</p>\n"}], "owner": {"reputation": 317, "user_id": 6831979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hvjyd.jpg?s=128&g=1", "display_name": "Victor Callejas", "link": "https://stackoverflow.com/users/6831979/victor-callejas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1868, "favorite_count": 0, "accepted_answer_id": 53420202, "answer_count": 1, "score": 3, "last_activity_date": 1543486344, "creation_date": 1542832810, "last_edit_date": 1543486344, "question_id": 53420155, "link": "https://stackoverflow.com/questions/53420155/importerror-no-module-named-can-but-its-there-according-to-pip-list", "title": "ImportError: No module named can but it&#39;s there according to pip list", "body": "<p>I have in python the error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ImportError: No module named can\n</code></pre>\n\n<p>but the strange is that when I check it with pip list in the environment all these libraries are installed:</p>\n\n<p><a href=\"https://i.stack.imgur.com/qlSjR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qlSjR.png\" alt=\"screenshot\"></a></p>\n\n<p>As you can see in the screenshot, it tells me that the <code>can</code> library is not found, but when I check it with pip list</p>\n"}]