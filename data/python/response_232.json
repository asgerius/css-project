[{"tags": ["python", "list"], "answers": [{"tags": [], "owner": {"reputation": 1035, "user_id": 5825760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u1You.png?s=128&g=1", "display_name": "B.Gees", "link": "https://stackoverflow.com/users/5825760/b-gees"}, "is_accepted": false, "score": 0, "last_activity_date": 1560989034, "creation_date": 1560989034, "answer_id": 56677377, "question_id": 56677348, "link": "https://stackoverflow.com/questions/56677348/question-about-accessing-indices-in-nested-lists/56677377#56677377", "title": "Question about accessing indices in nested lists", "body": "<p>You need to work on tuples :</p>\n\n<pre><code>decoded = [[('n07697537', 'hotdog', 0.8770528)], [('n07697537', 'hotdog', 0.9659182)], [('n07579787', 'plate', 0.7972369)], [('n07583066', 'guacamole', 0.9996675)]]\nd = [x for y in decoded for x in y]\nlabels = [d[0][1] for d in decoded]\n</code></pre>\n\n<p>This script gives:</p>\n\n<pre><code>['hotdog', 'hotdog', 'plate', 'guacamole']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 11673118, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iMldkd-pWhA/AAAAAAAAAAI/AAAAAAAAACw/KxyW8OTam5s/photo.jpg?sz=128", "display_name": "Dr GW", "link": "https://stackoverflow.com/users/11673118/dr-gw"}, "edited": false, "score": 0, "creation_date": 1561073407, "post_id": 56677414, "comment_id": 99955150, "body": "Great explanation! I&#39;m new to Python so I didn&#39;t really understand tuples, thanks for clearing that up."}], "tags": [], "owner": {"reputation": 191, "user_id": 8121682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf56b95b7afa3f689d6bfa0bbc3abcb?s=128&d=identicon&r=PG&f=1", "display_name": "matt123788", "link": "https://stackoverflow.com/users/8121682/matt123788"}, "is_accepted": false, "score": 0, "last_activity_date": 1561049979, "last_edit_date": 1561049979, "creation_date": 1560989464, "answer_id": 56677414, "question_id": 56677348, "link": "https://stackoverflow.com/questions/56677348/question-about-accessing-indices-in-nested-lists/56677414#56677414", "title": "Question about accessing indices in nested lists", "body": "<p>If you would like to access the first element's label aka 'hotdog' in the first tuple, you need to <code>print(decoded[0][0][1])</code> where the <code>[1]</code> in <code>decoded[0][0][1]</code> is the 2nd element in the tuple (0-indexed), the right hand <code>[0]</code> is the tuple itself, and the left hand <code>[0]</code> is the inner list.</p>\n\n<p>Some background: there is actually a list enclosing other lists of tuples in your example shown as <code>[[()],[()],[()]]</code> where <code>()</code> is a tuple and <code>[]</code> is a list. You could in theory have multiple tuples in each inner list like <code>[[(),(),()],[(),()],[()]]</code> etc. However, you access values within tuples the same way as you do with lists, using indices, hence the confusion.</p>\n\n<p>The code <code>[d[0][1] for d in decoded]</code> works because <code>d</code> is actually just a list of tuples (though only one tuple is in the list in this case).</p>\n"}], "owner": {"reputation": 1, "user_id": 11673118, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iMldkd-pWhA/AAAAAAAAAAI/AAAAAAAAACw/KxyW8OTam5s/photo.jpg?sz=128", "display_name": "Dr GW", "link": "https://stackoverflow.com/users/11673118/dr-gw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1561049979, "creation_date": 1560988778, "last_edit_date": 1560989351, "question_id": 56677348, "link": "https://stackoverflow.com/questions/56677348/question-about-accessing-indices-in-nested-lists", "title": "Question about accessing indices in nested lists", "body": "<p>I was learning about Deep Learning in Kaggle through an exercise and this confused me. In order to write a code for checking whether something was a hot dog or not, there was a list of predictions, with each element being the most likely prediction for what a different image was. So the overall list was :</p>\n\n<pre><code>[\n    [('n07697537', 'hotdog', 0.8770528)], \n    [('n07697537', 'hotdog', 0.9659182)], \n    [('n07579787', 'plate', 0.7972369)], \n    [('n07583066', 'guacamole', 0.9996675)]\n]\n</code></pre>\n\n<p>And one element is:</p>\n\n<pre><code>[('n07697537', 'hotdog', 0.9659182)] \n</code></pre>\n\n<p>So in order to check whether an image is most likely a hotdog, I'd have to get that second field, the label. But I ran into some syntax issues trying to access the field inside the nested list.</p>\n\n<p>So I tried accessing the first element's label as an example (decoded is the name of the outer list) with <code>print(decoded[0][1])</code>. This didn't work. So I checked the sample solution after failing to figure out how to access the element cleanly without having to do something convoluted.\nThe sample code used</p>\n\n<pre><code>labels = [d[0][1] for d in decoded]\n</code></pre>\n\n<p>And that successfully makes a list of the labels. I tried to do something similar before checking the solution but I was slightly off, I tried the singular version of this by setting <code>d = decoded[0]</code> , and I got a list of length 1 with the three elements, like the element example earlier. What I found confusing is that <code>d[0][1]</code> works to give the me label, but <code>decoded[0][1]</code> does not. Why?</p>\n"}, {"tags": ["python", "python-3.x", "sqlite"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1560989068, "post_id": 56677337, "comment_id": 99921525, "body": "Get rid of the single quotes around the table name?"}], "answers": [{"tags": [], "owner": {"reputation": 331, "user_id": 6045509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87891facf756f22a2cbb1cb60cd4e7e?s=128&d=identicon&r=PG&f=1", "display_name": "HRY", "link": "https://stackoverflow.com/users/6045509/hry"}, "is_accepted": true, "score": 1, "last_activity_date": 1560989143, "creation_date": 1560989143, "answer_id": 56677384, "question_id": 56677337, "link": "https://stackoverflow.com/questions/56677337/how-to-create-populate-a-sqlite-table-from-join-command/56677384#56677384", "title": "How to create/populate a SQLITE table from JOIN command?", "body": "<p>the sql part is:</p>\n\n<pre><code>CREATE TABLE new_table AS\n  SELECT expressions\n  FROM existing_tables\n  [WHERE conditions];\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 6942881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8JCrw.png?s=128&g=1", "display_name": "Kevin_ALA", "link": "https://stackoverflow.com/users/6942881/kevin-ala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 56677384, "answer_count": 1, "score": 0, "last_activity_date": 1560989143, "creation_date": 1560988665, "question_id": 56677337, "link": "https://stackoverflow.com/questions/56677337/how-to-create-populate-a-sqlite-table-from-join-command", "title": "How to create/populate a SQLITE table from JOIN command?", "body": "<p>I am trying to join two tables on a column and then populate a new table with the query results.</p>\n\n<p>I know that the join command gives me the table data I want but now how do I insert this data into a new table without having to loop through the results as there are many unique column names. Is there a way to do this with a SQLite command? To do this without SQLite command would require nested for loops and become computationally expensive (if it even works). </p>\n\n<p>Join command that works:</p>\n\n<pre><code>connection = sqlite3.connect(\"database1.db\")\nc = connection.cursor()\nc.execute(\"ATTACH DATABASE 'database1.db' AS db_1\")\nc.execute(\"ATTACH DATABASE 'database2.db' AS db_2\")\nc.execute(\"SELECT * FROM db_1.Table1Name AS a JOIN db_2.Table2Name AS b WHERE a.Column1 = b.Column2\")\n</code></pre>\n\n<p>Attempt to join and insert command that does not error but does not populate the table:</p>\n\n<pre><code>c.execute(\"INSERT INTO 'NewTableName' SELECT * FROM db_1.Table1Name AS a JOIN db_2.Table2Name AS b WHERE a.Column1 = b.Column2\")\n</code></pre>\n"}, {"tags": ["python", "parsing", "icloud"], "owner": {"reputation": 43, "user_id": 11673163, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mUITOtXOPPQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf_xPIfE8d4fQJaZ5o4qHbE3V6Dvg/mo/photo.jpg?sz=128", "display_name": "Kasyap Raguram Chakravadhanula", "link": "https://stackoverflow.com/users/11673163/kasyap-raguram-chakravadhanula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1561030691, "creation_date": 1560988559, "last_edit_date": 1561030691, "question_id": 56677322, "link": "https://stackoverflow.com/questions/56677322/remove-icloud-file-extension-to-work-with-fcs-parser-python-jupyter", "title": "remove .icloud file extension to work with fcs parser python jupyter", "body": "<p>I am importing data into jupyter notebook from iCloud like so: </p>\n\n<pre><code>data_path_training = \"/Users/Mady/Library/Mobile Documents/com~apple~CloudDocs/Data/Training\"\n\nfiles_training = os.listdir(data_path_training)\n</code></pre>\n\n<p>The start of files_training looks like: </p>\n\n<p><code>['.Gates_PTLG024_BL_Unstim_CD235-CD61-_unstim_1st__BL__PTLG024.fcs.icloud', '.Gates_PTLG003_1_Unstim_CD235-CD61-_unstim_2nd___1___PTLG003.fcs.icloud', '.Gates_PTLG016_2_Unstim_CD235-CD61-_unstim_3d___2___PTLG016.fcs.icloud'</code></p>\n\n<p>and similar for validation. I am using fcs parser on them, but the problem is that there's a .icloud file extension along with the .fcs, which is causing the error message \"not a valid fcs file.\" How do I remove this .icloud extension in jupyter notebook python?</p>\n"}, {"tags": ["python", "arrays", "pandas", "dataframe", "concatenation"], "comments": [{"owner": {"reputation": 1035, "user_id": 5825760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u1You.png?s=128&g=1", "display_name": "B.Gees", "link": "https://stackoverflow.com/users/5825760/b-gees"}, "edited": false, "score": 0, "creation_date": 1560988815, "post_id": 56677321, "comment_id": 99921487, "body": "Do you try <code>y_trainvalid2 = pd.concat([y_trainvalid, new_file_label]</code>? Please give us a sample of your initial data frames ;)"}, {"owner": {"reputation": 3, "user_id": 11541449, "user_type": "registered", "profile_image": "https://graph.facebook.com/2259817940774268/picture?type=large", "display_name": "Kaio Giovanni", "link": "https://stackoverflow.com/users/11541449/kaio-giovanni"}, "reply_to_user": {"reputation": 1035, "user_id": 5825760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u1You.png?s=128&g=1", "display_name": "B.Gees", "link": "https://stackoverflow.com/users/5825760/b-gees"}, "edited": false, "score": 0, "creation_date": 1560989082, "post_id": 56677321, "comment_id": 99921530, "body": "When I try y_trainvalid2 = pd.concat([y_trainvalid, new_file_label] the problem stays the same, but the last index numbers change to 0 till 22. I&#39;ll edit the original dataframes"}, {"owner": {"reputation": 1035, "user_id": 5825760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u1You.png?s=128&g=1", "display_name": "B.Gees", "link": "https://stackoverflow.com/users/5825760/b-gees"}, "edited": false, "score": 0, "creation_date": 1560989249, "post_id": 56677321, "comment_id": 99921560, "body": "this is not possible, you haven&#39;t the same column names in the both data frames ?"}, {"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 1, "creation_date": 1560989391, "post_id": 56677321, "comment_id": 99921584, "body": "Can you hard code two small (e.g., 5x5) dataframe that demonstrate this problem and used those in your examples? The current examples are, uh, overwhelming to say the least."}, {"owner": {"reputation": 1035, "user_id": 5825760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u1You.png?s=128&g=1", "display_name": "B.Gees", "link": "https://stackoverflow.com/users/5825760/b-gees"}, "edited": false, "score": 0, "creation_date": 1560989420, "post_id": 56677321, "comment_id": 99921586, "body": "A sample of your initial data, is for us \u2026 In order to reproduce your issue. You print your data frames but the most interesting is to copy/paste your sample to work. Here it is not possible for me to work on your data :)"}, {"owner": {"reputation": 3, "user_id": 11541449, "user_type": "registered", "profile_image": "https://graph.facebook.com/2259817940774268/picture?type=large", "display_name": "Kaio Giovanni", "link": "https://stackoverflow.com/users/11541449/kaio-giovanni"}, "edited": false, "score": 0, "creation_date": 1560989473, "post_id": 56677321, "comment_id": 99921592, "body": "The existing dataframe go from column 0 to column 42, so I build a dataframe with the same columns expecting it appear below once I concatenate"}, {"owner": {"reputation": 1035, "user_id": 5825760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u1You.png?s=128&g=1", "display_name": "B.Gees", "link": "https://stackoverflow.com/users/5825760/b-gees"}, "edited": false, "score": 0, "creation_date": 1560989614, "post_id": 56677321, "comment_id": 99921617, "body": "one moment. just do <code>df.head().to_dict()</code> to extract a sample of your data frame and gives that in your post."}, {"owner": {"reputation": 1035, "user_id": 5825760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u1You.png?s=128&g=1", "display_name": "B.Gees", "link": "https://stackoverflow.com/users/5825760/b-gees"}, "edited": false, "score": 0, "creation_date": 1560989930, "post_id": 56677321, "comment_id": 99921670, "body": "I think your column names are really different. You need maybe to try to concatenate the same <code>y_trainvalid</code> data frame with <code>pd.concat([y_trainvalid, y_trainvalid])</code> and <code>pd.concat([new_file_label, new_file_label])</code> to see if you have exactly the same issue. If not, your headers are different you need to rename them and retry to concatenate the both."}, {"owner": {"reputation": 3, "user_id": 11541449, "user_type": "registered", "profile_image": "https://graph.facebook.com/2259817940774268/picture?type=large", "display_name": "Kaio Giovanni", "link": "https://stackoverflow.com/users/11541449/kaio-giovanni"}, "edited": false, "score": 0, "creation_date": 1560990036, "post_id": 56677321, "comment_id": 99921691, "body": "I edited the the command you told me, I&#39;ll try to concatenate the same archives to see if the same issue occurs"}, {"owner": {"reputation": 3, "user_id": 11541449, "user_type": "registered", "profile_image": "https://graph.facebook.com/2259817940774268/picture?type=large", "display_name": "Kaio Giovanni", "link": "https://stackoverflow.com/users/11541449/kaio-giovanni"}, "edited": false, "score": 0, "creation_date": 1560990324, "post_id": 56677321, "comment_id": 99921744, "body": "When I use both pd.concat([y_trainvalid, y_trainvalid]) and pd.concat([new_file_label, new_file_label]) they work normally, the problem only occurs when I concatenate y_trainvalid with new_file_label"}, {"owner": {"reputation": 1035, "user_id": 5825760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u1You.png?s=128&g=1", "display_name": "B.Gees", "link": "https://stackoverflow.com/users/5825760/b-gees"}, "edited": false, "score": 1, "creation_date": 1560990336, "post_id": 56677321, "comment_id": 99921745, "body": "Your headers are different \u2026 you have <code>int</code> and <code>string</code> types."}], "answers": [{"tags": [], "owner": {"reputation": 1035, "user_id": 5825760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u1You.png?s=128&g=1", "display_name": "B.Gees", "link": "https://stackoverflow.com/users/5825760/b-gees"}, "is_accepted": true, "score": 1, "last_activity_date": 1560991554, "last_edit_date": 1560991554, "creation_date": 1560990437, "answer_id": 56677505, "question_id": 56677321, "link": "https://stackoverflow.com/questions/56677321/pandas-concatenation-not-working-properly/56677505#56677505", "title": "Pandas Concatenation not working properly", "body": "<pre><code>y_trainvalid.columns = [str(x) for x in y_trainvalid.columns]\nnew_file_label.columns = [str(x) for x in new_file_label.columns]\ny_trainvalid2 = pd.concat([y_trainvalid, new_file_label])\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11541449, "user_type": "registered", "profile_image": "https://graph.facebook.com/2259817940774268/picture?type=large", "display_name": "Kaio Giovanni", "link": "https://stackoverflow.com/users/11541449/kaio-giovanni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 56677505, "answer_count": 1, "score": 0, "last_activity_date": 1560991554, "creation_date": 1560988550, "last_edit_date": 1560989970, "question_id": 56677321, "link": "https://stackoverflow.com/questions/56677321/pandas-concatenation-not-working-properly", "title": "Pandas Concatenation not working properly", "body": "<p>So I've been setting up a label archive on my deep learning classifier and I wanted to concatenate the labels of an already existing 2D archive into one I just made.</p>\n\n<p>The one that exists is 'y_trainvalid' (39209, 43), which stands for 39209 images in 43 classes. The new label archive I'm trying to add is 'new_file_label' (23, 43). On these archives, the number set to 1 if it matches the class and 0 if it doesn't.\nHere's a sample of both of them:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>print(y_trainvalid)\nprint(new_file_label)\n\n       0    1    2    3    4    5    6   ...   36   37   38   39   40   41   42\n0     0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n1     0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n2     0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n3     0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4     0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  1.0  0.0  0.0  0.0  0.0\n5     0.0  0.0  0.0  0.0  0.0  1.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n6     0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n7     0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  1.0  0.0  0.0  0.0\n8     0.0  1.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n9     0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n10    0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n11    0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n12    0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n13    0.0  0.0  1.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n14    0.0  0.0  0.0  1.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n15    0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n16    0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n17    0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n18    0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n19    0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n20    0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n21    0.0  1.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n22    0.0  0.0  0.0  0.0  1.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n23    0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n24    0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n25    0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n26    0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n27    0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n28    0.0  0.0  1.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n29    0.0  0.0  0.0  0.0  0.0  1.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n...   ...  ...  ...  ...  ...  ...  ...  ...  ...  ...  ...  ...  ...  ...  ...\n4380  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4381  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4382  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4383  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4384  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4385  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4386  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4387  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4388  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4389  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4390  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4391  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4392  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4393  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4394  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4395  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4396  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4397  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4398  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4399  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4400  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4401  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4402  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4403  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4404  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4405  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4406  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4407  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4408  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4409  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n\n[39209 rows x 43 columns]\n      0    1    2    3    4    5    6  ...   36   37   38   39   40   41   42\n0   0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n1   0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n2   0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n3   0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n4   0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n5   0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n6   0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n7   0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n8   0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n9   0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n10  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n11  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n12  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n13  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n14  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n15  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n16  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n17  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n18  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n19  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n20  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n21  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n22  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n\n[23 rows x 43 columns]\n\n</code></pre>\n\n<p>When I tried to concatenate using this command:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>y_trainvalid2 = pd.concat([y_trainvalid, new_file_label], ignore_index=True)\n</code></pre>\n\n<p>Something like this appeared:</p>\n\n<pre><code> 0    1    2    3    4    5    6  ...   41   42    5    6    7    8    9\n39204  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  NaN  NaN  NaN  NaN  NaN  NaN  NaN\n39205  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  NaN  NaN  NaN  NaN  NaN  NaN  NaN\n39206  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  NaN  NaN  NaN  NaN  NaN  NaN  NaN\n39207  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  NaN  NaN  NaN  NaN  NaN  NaN  NaN\n39208  0.0  0.0  0.0  0.0  0.0  0.0  0.0  ...  NaN  NaN  NaN  NaN  NaN  NaN  NaN\n39209  NaN  NaN  NaN  NaN  NaN  NaN  NaN  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n39210  NaN  NaN  NaN  NaN  NaN  NaN  NaN  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n39211  NaN  NaN  NaN  NaN  NaN  NaN  NaN  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n39212  NaN  NaN  NaN  NaN  NaN  NaN  NaN  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n39213  NaN  NaN  NaN  NaN  NaN  NaN  NaN  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n39214  NaN  NaN  NaN  NaN  NaN  NaN  NaN  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n39215  NaN  NaN  NaN  NaN  NaN  NaN  NaN  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n39216  NaN  NaN  NaN  NaN  NaN  NaN  NaN  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n39217  NaN  NaN  NaN  NaN  NaN  NaN  NaN  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n39218  NaN  NaN  NaN  NaN  NaN  NaN  NaN  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n39219  NaN  NaN  NaN  NaN  NaN  NaN  NaN  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n39220  NaN  NaN  NaN  NaN  NaN  NaN  NaN  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n39221  NaN  NaN  NaN  NaN  NaN  NaN  NaN  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n39222  NaN  NaN  NaN  NaN  NaN  NaN  NaN  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n39223  NaN  NaN  NaN  NaN  NaN  NaN  NaN  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n39224  NaN  NaN  NaN  NaN  NaN  NaN  NaN  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n39225  NaN  NaN  NaN  NaN  NaN  NaN  NaN  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n39226  NaN  NaN  NaN  NaN  NaN  NaN  NaN  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n39227  NaN  NaN  NaN  NaN  NaN  NaN  NaN  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n39228  NaN  NaN  NaN  NaN  NaN  NaN  NaN  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n39229  NaN  NaN  NaN  NaN  NaN  NaN  NaN  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n39230  NaN  NaN  NaN  NaN  NaN  NaN  NaN  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n39231  NaN  NaN  NaN  NaN  NaN  NaN  NaN  ...  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n</code></pre>\n\n<p>As if it doubled the amount of columns to fit the data instead of putting the new data just below it. I'm not sure why this is happening cause I'm pretty sure both label archives have the same number of columns.</p>\n\n<p>When I print use the 'y_trainvalid2.head().to_dict()' command, this appears:</p>\n\n<pre><code>{0: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '0': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 1: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '1': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 10: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '10': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 11: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '11': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 12: {0: 1.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '12': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 13: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '13': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 14: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '14': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 15: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '15': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 16: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '16': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 17: {0: 0.0, 1: 1.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '17': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 18: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '18': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 19: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '19': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 2: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '2': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 20: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '20': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 21: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '21': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 22: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '22': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 23: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '23': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 24: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '24': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 25: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '25': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 26: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '26': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 27: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '27': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 28: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '28': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 29: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '29': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 3: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '3': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 30: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '30': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 31: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '31': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 32: {0: 0.0, 1: 0.0, 2: 0.0, 3: 1.0, 4: 0.0},\n '32': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 33: {0: 0.0, 1: 0.0, 2: 1.0, 3: 0.0, 4: 0.0},\n '33': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 34: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '34': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 35: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '35': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 36: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '36': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 37: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '37': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 38: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 1.0},\n '38': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 39: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '39': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 4: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '4': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 40: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '40': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 41: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '41': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 42: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '42': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 5: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '5': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 6: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '6': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 7: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '7': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 8: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '8': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},\n 9: {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0, 4: 0.0},\n '9': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan}}\n\n</code></pre>\n\n<p>How do I solve this problem?</p>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "comments": [{"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1560990686, "post_id": 56677301, "comment_id": 99921818, "body": "Are your sure that return is <code>prod</code> not <code>sum</code>?"}, {"owner": {"reputation": 845, "user_id": 3911832, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/myepU.jpg?s=128&g=1", "display_name": "&#201;variste Galois", "link": "https://stackoverflow.com/users/3911832/%c3%89variste-galois"}, "reply_to_user": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1561036656, "post_id": 56677301, "comment_id": 99939240, "body": "@QuangHoang yes, when you cumulate returns you take a product."}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1561039872, "post_id": 56677301, "comment_id": 99941200, "body": "<code>df.groupby(&#39;ticker&#39;).return.rolling(5).apply(np.prod)</code>?"}, {"owner": {"reputation": 845, "user_id": 3911832, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/myepU.jpg?s=128&g=1", "display_name": "&#201;variste Galois", "link": "https://stackoverflow.com/users/3911832/%c3%89variste-galois"}, "reply_to_user": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1561151409, "post_id": 56677301, "comment_id": 99984149, "body": "How would you do this in a vectorized manner? I don&#39;t think you can add and subtract from a groupby operation, if you look at the formula in the post you need to do that to cumulate returns properly."}], "owner": {"reputation": 845, "user_id": 3911832, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/myepU.jpg?s=128&g=1", "display_name": "&#201;variste Galois", "link": "https://stackoverflow.com/users/3911832/%c3%89variste-galois"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1561037240, "creation_date": 1560988325, "last_edit_date": 1561037240, "question_id": 56677301, "link": "https://stackoverflow.com/questions/56677301/pandas-groupby-identifier-date-and-compute-cumulative-returns-across-differe", "title": "pandas - groupby identifier &amp; date and compute cumulative returns across different horizons", "body": "<p>Given a DataFrame that looks like this:</p>\n\n<pre><code>           ticker         date       return\n0            AAPL   2012-12-31     0.032615\n1            AAPL   2013-01-02     0.036938\n2            AAPL   2013-01-03     0.023232\n3            AAPL   2013-01-04     0.014632\n5            AMZN   2013-01-07    -0.007089\n6            AMZN   2013-01-08     0.003060\n7            AMZN   2013-01-09    -0.015760\n8            AMZN   2013-01-10    -0.019112\n9            GOOG   2012-12-31     0.032615\n10           GOOG   2013-01-02     0.036938\n11           GOOG   2013-01-03     0.023232\n12           GOOG   2013-01-04     0.014632\n13           GOOG   2013-01-07    -0.017902\n13           GOOG   2013-01-08    -0.007089\n14           GOOG   2013-01-09     0.003060\n15           GOOG   2013-01-10    -0.015760\n</code></pre>\n\n<p>My objective is that for every row, I am able to have another column that tells me what that ticker's cumulative return will be for 5, 21, 63, and 252 day ahead periods. For instance, a 5 day ahead cumulative return for GOOG on 12/31/2012 I can compute by doing:</p>\n\n<pre><code>((1 + df.iloc[9:13]['return']).cumprod()-1).iloc[-1].shift(-5)\n</code></pre>\n\n<p>However, I want to do this as efficiently as possible. I know how to groupby ticker &amp; date, but how can I also cumulate returns over some horizon and shift them back at the same time? Is this even possible in pandas?</p>\n"}, {"tags": ["python", "postgresql", "flask", "flask-restful", "peewee"], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 11402212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4054d6d982b33ddb8972bf0ede150fcf?s=128&d=identicon&r=PG&f=1", "display_name": "HellowThar", "link": "https://stackoverflow.com/users/11402212/hellowthar"}, "is_accepted": true, "score": 0, "last_activity_date": 1560993365, "creation_date": 1560993365, "answer_id": 56677768, "question_id": 56677299, "link": "https://stackoverflow.com/questions/56677299/getting-peewee-integrityerror-for-unique-constraint-only-through-api/56677768#56677768", "title": "Getting peewee IntegrityError for unique constraint only through API", "body": "<p>This is really strange but I figured it out.  I had to update my put method to be the same syntax of my delete method.  Basically, I had to pass in the context to the actual update method:</p>\n\n<pre><code>\n@marshal_with(blogpost_fields)\n    @auth.login_required\n    def put(self, id):\n        args = self.reqparse.parse_args()\n        try:\n            blogpost = models.BlogPost.select().where(\n                models.BlogPost.id==id).get()\n        except models.BlogPost.DoesNotExist:\n            return make_response(json.dumps(\n                    {'error': 'That blogpost does not exist or is not editable'}\n                ), 403)\n        else:\n            query = blogpost.update(**args).where(models.BlogPost.id==id)\n            query.execute()\n            blogpost = (blogpost_or_404(id))\n            return (blogpost, 200, {\n                'Location': url_for('resources.blogposts.blogpost', id=id)\n               })\n\n    @auth.login_required\n    def delete(self, id):\n        try:\n            blogpost = models.BlogPost.select().where(\n                models.BlogPost.id==id).get()\n        except models.BlogPost.DoesNotExist:\n            return make_response(json.dumps(\n                    {'error': 'That blogpost does not exist or is not editable'}\n                ), 403)\n        else:\n            query = blogpost.delete().where(models.BlogPost.id==id)\n            query.execute()\n            return '', 204, {'Location': url_for('resources.blogposts.blogposts')}\n\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 11402212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4054d6d982b33ddb8972bf0ede150fcf?s=128&d=identicon&r=PG&f=1", "display_name": "HellowThar", "link": "https://stackoverflow.com/users/11402212/hellowthar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "accepted_answer_id": 56677768, "answer_count": 1, "score": 0, "last_activity_date": 1560993365, "creation_date": 1560988309, "last_edit_date": 1560991449, "question_id": 56677299, "link": "https://stackoverflow.com/questions/56677299/getting-peewee-integrityerror-for-unique-constraint-only-through-api", "title": "Getting peewee IntegrityError for unique constraint only through API", "body": "<p>Getting an IntegrityError when trying to update records on my PostgreSQL database with peeweee. It only happens when I try HTTP PUT method, however.</p>\n\n<p>Using Flask and Flask-Restful to create API resources.  GET, DELETE to a single Blog Post works perfectly.  Post to the bucket works perfectly</p>\n\n<p>I can run the exact same code through the REPL and it works just fine.  Whats even stranger is the API just kind of broke all of a sudden, I tested this function yesterday and it was fine.  Now I can't pinpoint what changed.</p>\n\n<p>Here is my peewee model in models.py</p>\n\n<pre><code>\nclass BlogPost(Model):\n    title = CharField(default='', unique=True)\n    content = TextField(default='')\n    created = DateTimeField(default=datetime.datetime.now)\n\n    class Meta:\n        database = DATABASE\n\n</code></pre>\n\n<p>Here is the resource for a single BlogPost in resources.blogposts.py</p>\n\n<pre><code>\nclass BlogPost(Resource):\n    def __init__(self):\n        self.reqparse = reqparse.RequestParser()\n        self.reqparse.add_argument(\n            'title',\n            required=False,\n            help='No title provided',\n            location=['form', 'json']\n        )\n        self.reqparse.add_argument(\n            'content',\n            required=False,\n            nullable=True,\n            location=['form', 'json'],\n            default=''\n        )\n        super().__init__()\n\n    @marshal_with(blogpost_fields)\n    def get(self, id):\n        return (blogpost_or_404(id))\n\n    @marshal_with(blogpost_fields)\n    @auth.login_required\n    def put(self, id):\n        args = self.reqparse.parse_args()\n        try:\n            blogpost = models.BlogPost.get(models.BlogPost.id==id)\n        except models.BlogPost.DoesNotExist:\n            return make_response(json.dumps(\n                    {'error': 'That blogpost does not exist or is not editable'}\n                ), 403)\n        else:\n            query = blogpost.update(**args)\n            query.execute()\n            blogpost = (blogpost_or_404(id))\n            return (blogpost, 200, {\n                'Location': url_for('resources.blogposts.blogpost', id=id)\n               })\n\n    @auth.login_required\n    def delete(self, id):\n        try:\n            blogpost = models.BlogPost.select().where(\n                models.BlogPost.id==id\n            ).get()\n        except models.BlogPost.DoesNotExist:\n            return make_response(json.dumps(\n                    {'error': 'That blogpost does not exist or is not editable'}\n                ), 403)\n        else:\n            query = blogpost.delete().where(models.BlogPost.id==id)\n            query.execute()\n            return '', 204, {'Location': url_for('resources.blogposts.blogposts')}\n\nblogposts_api = Blueprint('resources.blogposts', __name__)\napi = Api(blogposts_api)\napi.add_resource(\n    BlogPost,\n    'api/v1/blogposts/&lt;int:id&gt;',\n    endpoint='blogpost'\n)\n\n</code></pre>\n\n<p>If I perform a GET to <a href=\"http://localhost:8000/api/v1/blogposts/8\" rel=\"nofollow noreferrer\">http://localhost:8000/api/v1/blogposts/8</a> I get my only BlogPost in the table (I deleted all but this one to test)</p>\n\n<pre><code>\n{\n    \"id\": 8,\n    \"title\": \"Test3\",\n    \"content\": \"This is to test changes to BlogPost 1\",\n    \"created\": \"Wed, 19 Jun 2019 12:44:31 -0000\"\n}\n\n</code></pre>\n\n<p>However, if I PUT to the same URL I get a Unique Constraint.. I definitely don't have a database entry with this title.</p>\n\n<pre><code>\n{\n    \"title\": \"9sdnfsudngfisdngondasgjns\",\n    \"content\": \"lkbksigsndignsoidugnlis\",\n}\n\n</code></pre>\n\n<p>I can do this in a REPL and it works perfectly fine, it should be the exact same thing as what I'm doing above:</p>\n\n<pre><code>\nblogpost = models.BlogPost.get(models.BlogPost.id==8)\nblogpost.update(\n    title=\"9sdnfsudngfisdngondasgjns\",\n    content=\"lkbksigsndignsoidugnlis\"\n)\nblogpost.execute()\n\n</code></pre>\n\n<p>The actual error:</p>\n\n<p>peewee.IntegrityError: duplicate key value violates unique constraint \"blogpost_title\" DETAIL: Key (title)=(9sdnfsudngfisdngondasgjns) already exists.</p>\n\n<p>EDIT: Before the peewee error psycopg2 is throwing this error as well:</p>\n\n<p>UniqueViolation: duplicate key value violates unique constraint \"user_username_key\"\nDETAIL:  Key (username)=(9sdnfsudngfisdngondasgjns) already exists.</p>\n"}, {"tags": ["python", "printing", "progress-bar", "iterable", "tqdm"], "answers": [{"comments": [{"owner": {"reputation": 1239, "user_id": 6541950, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2e20d7b818f77d9851d86428783a5d4d?s=128&d=identicon&r=PG&f=1", "display_name": "Coolio2654", "link": "https://stackoverflow.com/users/6541950/coolio2654"}, "edited": false, "score": 1, "creation_date": 1560989910, "post_id": 56677343, "comment_id": 99921666, "body": "If there is no way <code>tqdm</code> allows this currently (which is a surprise), this is still a good answer for verifying that. Thank you for all the code in implementing <code>tqdm</code> in a manual way that allows time checking, which I hadn&#39;t thought of myself yet."}, {"owner": {"reputation": 9784, "user_id": 227755, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4a4377b8beefc590e722a17b7fa5da66?s=128&d=identicon&r=PG", "display_name": "nurettin", "link": "https://stackoverflow.com/users/227755/nurettin"}, "edited": false, "score": 2, "creation_date": 1608207185, "post_id": 56677343, "comment_id": 115515491, "body": "This is the wrong answer. @casper.dcl gave the correct answer as author/maintainer"}], "tags": [], "owner": {"reputation": 1981, "user_id": 7203433, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UwHcLcsEtUg/AAAAAAAAAAI/AAAAAAAABYM/2PUMtvGAExk/photo.jpg?sz=128", "display_name": "Josh Karpel", "link": "https://stackoverflow.com/users/7203433/josh-karpel"}, "is_accepted": true, "score": -1, "last_activity_date": 1618161457, "last_edit_date": 1618161457, "creation_date": 1560988745, "answer_id": 56677343, "question_id": 56677267, "link": "https://stackoverflow.com/questions/56677267/tqdm-extract-time-passed-time-remaining/56677343#56677343", "title": "tqdm: extract time passed + time remaining?", "body": "<p>Edit: see the library maintainer's answer below. Turns out, it is possible to get this information in the public API.</p>\n<hr />\n<p><code>tqdm</code> does not expose that information as part of its public API, and I don't recommend trying to hack your own into it. Then you would be depending on implementation details of <code>tqdm</code> that might change at any time.</p>\n<p>However, that shouldn't stop you from writing your own. It's easy enough to instrument a loop with a timer, and you can then abort the loop if it takes too long. Here's a quick, rough example that still uses <code>tqdm</code> to provide visual feedback:</p>\n<pre><code>import time\nfrom tqdm import tqdm\n\n\ndef long_running_function(n, timeout=5):\n    start_time = time.time()\n\n    for _ in tqdm(list(range(n))):\n        time.sleep(1)  # doing some expensive work...\n        elapsed_time = time.time() - start_time\n        if elapsed_time &gt; timeout:\n            raise TimeoutError(&quot;long_running_function took too long!&quot;)\n\n\nlong_running_function(100, timeout=10)\n</code></pre>\n<p>If you run this, the function will stop its own execution after 10 seconds by raising an exception. You could catch this exception at the call site and respond to it in whatever way you deem appropriate.</p>\n<hr />\n<p>If you want to be clever, you could even factor this out in a <code>tqdm</code>-like wrapper like this:</p>\n<pre><code>def timed_loop(iterator, timeout):\n    start_time = time.time()\n    iterator = iter(iterator)\n\n    while True:\n        elapsed_time = time.time() - start_time\n        if elapsed_time &gt; timeout:\n            raise TimeoutError(&quot;long_running_function took too long!&quot;)\n\n        try:\n            yield next(iterator)\n        except StopIteration:\n            pass\n\n\ndef long_running_function(n, timeout=5):\n    for _ in timed_loop(tqdm(list(range(n))), timeout=timeout):\n        time.sleep(0.1)\n\n\nlong_running_function(100, timeout=5)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6440, "user_id": 3896283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zdDwD.jpg?s=128&g=1", "display_name": "casper.dcl", "link": "https://stackoverflow.com/users/3896283/casper-dcl"}, "is_accepted": false, "score": 7, "last_activity_date": 1575628090, "last_edit_date": 1575628090, "creation_date": 1575625873, "answer_id": 59210671, "question_id": 56677267, "link": "https://stackoverflow.com/questions/56677267/tqdm-extract-time-passed-time-remaining/59210671#59210671", "title": "tqdm: extract time passed + time remaining?", "body": "<p><code>tqdm</code> objects expose some information via the public property <code>format_dict</code>.</p>\n\n<pre><code>from tqdm import tqdm\n\nwith tqdm(total=100) as t:\n    ...\n    t.update()\n    print(t.format_interval(t.format_dict['elapsed']))\n</code></pre>\n\n<p>Otherwise you could parse <code>str(t).split()</code></p>\n"}], "owner": {"reputation": 1239, "user_id": 6541950, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2e20d7b818f77d9851d86428783a5d4d?s=128&d=identicon&r=PG&f=1", "display_name": "Coolio2654", "link": "https://stackoverflow.com/users/6541950/coolio2654"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5139, "favorite_count": 1, "accepted_answer_id": 56677343, "answer_count": 2, "score": 5, "last_activity_date": 1618161457, "creation_date": 1560987917, "last_edit_date": 1560988090, "question_id": 56677267, "link": "https://stackoverflow.com/questions/56677267/tqdm-extract-time-passed-time-remaining", "title": "tqdm: extract time passed + time remaining?", "body": "<p>I have been going over the <a href=\"https://github.com/tqdm/tqdm\" rel=\"noreferrer\">tqdm</a> docs, but no matter where I look, I cannot find a method by which to extract the <strong>time passed</strong> and estimated <strong>time remaining</strong> fields (basically the center of the progress bar on each line: <code>00:00&lt;00:02</code>).</p>\n\n<pre><code> 0%|          | 0/200 [00:00&lt;?, ?it/s]\n  4%|\u258e         | 7/200 [00:00&lt;00:02, 68.64it/s]\n  8%|\u258a         | 16/200 [00:00&lt;00:02, 72.87it/s]\n 12%|\u2588\u258e        | 25/200 [00:00&lt;00:02, 77.15it/s]\n 17%|\u2588\u258b        | 34/200 [00:00&lt;00:02, 79.79it/s]\n 22%|\u2588\u2588\u258f       | 43/200 [00:00&lt;00:01, 79.91it/s]\n 26%|\u2588\u2588\u258c       | 52/200 [00:00&lt;00:01, 80.23it/s]\n 30%|\u2588\u2588\u2588       | 61/200 [00:00&lt;00:01, 82.13it/s]\n....\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 200/200 [00:02&lt;00:00, 81.22it/s]\n</code></pre>\n\n<p><code>tqdm</code> works via essentially printing a dynamic progress bar anytime an update occurs, but is there a way to \"just\" print the <code>00:01</code> and <code>00:02</code> portions, so I could use them elsewhere in my Python program, such as in automatic stopping code that halts the process if it is taking too long?</p>\n"}, {"tags": ["python", "rest", "api", "apache-spark"], "comments": [{"owner": {"reputation": 239, "user_id": 8874837, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6f1736fca49aaa3304af6382f275c337?s=128&d=identicon&r=PG&f=1", "display_name": "tooptoop4", "link": "https://stackoverflow.com/users/8874837/tooptoop4"}, "edited": false, "score": 0, "creation_date": 1593541762, "post_id": 56677220, "comment_id": 110816634, "body": "did u solve @Daniel Lee"}, {"owner": {"reputation": 150, "user_id": 9005317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60d36f6ed8df6af4e0ee595233b74727?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Lee", "link": "https://stackoverflow.com/users/9005317/daniel-lee"}, "reply_to_user": {"reputation": 239, "user_id": 8874837, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6f1736fca49aaa3304af6382f275c337?s=128&d=identicon&r=PG&f=1", "display_name": "tooptoop4", "link": "https://stackoverflow.com/users/8874837/tooptoop4"}, "edited": false, "score": 0, "creation_date": 1593752012, "post_id": 56677220, "comment_id": 110894213, "body": "No. I did not find a solution. :("}], "owner": {"reputation": 150, "user_id": 9005317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60d36f6ed8df6af4e0ee595233b74727?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Lee", "link": "https://stackoverflow.com/users/9005317/daniel-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2427, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1561015185, "creation_date": 1560987571, "last_edit_date": 1561015185, "question_id": 56677220, "link": "https://stackoverflow.com/questions/56677220/spark-rest-api-post-request-does-not-return-a-response", "title": "Spark REST API Post Request does not return a response", "body": "<p>I am trying to launch a pyspark job using SPARK REST API. I put in the post request but I do not get any response.</p>\n\n<p>My environment is the following:</p>\n\n<ul>\n<li>Linux Ubuntu 18.04.01 LTS Bionic</li>\n<li>Java Version 1.8.0_211-b12 SE Runtime Environment</li>\n<li>Spark version 2.4.3</li>\n<li>Python version 3.7.1</li>\n<li>Scala version 2.11.12</li>\n</ul>\n\n<p>Here's my attempt:</p>\n\n<ol>\n<li><p>I started the master and slave nodes:\n<code>./sbin/start-all.sh</code>\n<a href=\"https://i.stack.imgur.com/A46rG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A46rG.png\" alt=\"enter image description here\"></a></p></li>\n<li><p>I see the following user interface on my browser:\n<a href=\"https://i.stack.imgur.com/yCBCh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yCBCh.png\" alt=\"enter image description here\"></a></p></li>\n<li><p>I enter the following command in terminal:</p></li>\n</ol>\n\n<pre><code>curl -X POST http://192.168.43.88:34481/v1/submissions/create \\\n     --header \"Content-Type:application/json;charset=UTF-8\" \\\n     --data '{\"action\":\"CreateSubmissionRequest\",\\\n              \"appArgs\":[\"/home/daniel/Documents/pyfiles/spark_pi.py\"],\\\n              \"appResource\":\"file:/home/daniel/Documents/pyfiles/spark_pi.py\",\\\n              \"clientSparkVersion\":\"2.4.3\",\\\n              \"environmentVariables\":{\"SPARK_ENV_LOADED\":\"1\"},\\\n              \"mainClass\":\"org.apache.spark.deploy.SparkSubmit\",\\\n              \"sparkProperties\":{\"spark.driver.supervise\":\"false\",\\\n              \"spark.app.name\":\"Simple App\",\\\n              \"spark.eventLog.enabled\":\"true\",\\\n              \"spark.submit.deployMode\":\"cluster\",\\\n              \"spark.master\":\"spark://daniel-K501UX:7077\"}}'\n\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Bun5h.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Bun5h.png\" alt=\"enter image description here\"></a></p>\n\n<p>I don't get a response even after waiting for 10+ minutes. What am I doing wrong?</p>\n"}, {"tags": ["python", "google-colaboratory", "python-magic"], "answers": [{"tags": [], "owner": {"reputation": 778, "user_id": 11666391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP4xeWwe3UY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdzodOndRLVZTTsHfxE4wYA-10kGw/mo/photo.jpg?sz=128", "display_name": "S\u0131dd\u0131k A&#231;\u0131l", "link": "https://stackoverflow.com/users/11666391/s%c4%b1dd%c4%b1k-a%c3%a7%c4%b1l"}, "is_accepted": true, "score": 3, "last_activity_date": 1560987795, "creation_date": 1560987795, "answer_id": 56677250, "question_id": 56677215, "link": "https://stackoverflow.com/questions/56677215/error-in-trying-to-install-use-python-magic-in-google-colab/56677250#56677250", "title": "Error in trying to install/use Python-Magic in Google Colab", "body": "<p>The way you install Libmagic on Colab is as follows:</p>\n\n<pre><code>!apt-get install libmagic-dev\n!pip install python-magic\n</code></pre>\n\n<p>Then, you can import it without a problem:</p>\n\n<pre><code>import magic\n</code></pre>\n\n<p><a href=\"https://colab.research.google.com/drive/1Orr67sDD5654Iaj9HfFNq3zlpLhZ1kPq\" rel=\"nofollow noreferrer\">An exemplary Colab link</a></p>\n"}], "owner": {"reputation": 4079, "user_id": 3259896, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/641c30a7b383022f22b53c8cedb04e3f?s=128&d=identicon&r=PG&f=1", "display_name": "SantoshGupta7", "link": "https://stackoverflow.com/users/3259896/santoshgupta7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4620, "favorite_count": 0, "accepted_answer_id": 56677250, "answer_count": 1, "score": 0, "last_activity_date": 1560987795, "creation_date": 1560987505, "question_id": 56677215, "link": "https://stackoverflow.com/questions/56677215/error-in-trying-to-install-use-python-magic-in-google-colab", "title": "Error in trying to install/use Python-Magic in Google Colab", "body": "<p>I am trying to install python-magic in Colab. Here is the Github of the library <a href=\"https://github.com/ahupp/python-magic#dependencies\" rel=\"nofollow noreferrer\">https://github.com/ahupp/python-magic#dependencies</a></p>\n\n<p>When I try :</p>\n\n<pre><code>!pip install python-magic\nimport magic\n</code></pre>\n\n<p>This Results in </p>\n\n<pre><code>---------------------------------------------------------------------------\nImportError                               Traceback (most recent call last)\n&lt;ipython-input-44-1461204615fc&gt; in &lt;module&gt;()\n      1 get_ipython().system('pip install python-magic')\n----&gt; 2 import magic\n\n/usr/local/lib/python3.6/dist-packages/magic.py in &lt;module&gt;()\n    179 if not libmagic or not libmagic._name:\n    180     # It is better to raise an ImportError since we are importing magic module\n--&gt; 181     raise ImportError('failed to find libmagic.  Check your installation')\n    182 \n    183 magic_t = ctypes.c_void_p\n\nImportError: failed to find libmagic.  Check your installation\n\n---------------------------------------------------------------------------\nNOTE: If your import is failing due to a missing package, you can\nmanually install dependencies using either !pip or !apt.\n\nTo view examples of installing some common dependencies, click the\n\"Open Examples\" button below.\n---------------------------------------------------------------------------\n</code></pre>\n\n<p>I have tried every solution possible</p>\n\n<p>This SO post says\n<a href=\"https://stackoverflow.com/questions/18374103/exception-valuefailed-to-find-libmagic-check-your-installation-in-windows-7\">Exception Value:failed to find libmagic. Check your installation in windows 7</a></p>\n\n<blockquote>\n  <p>Your multiuploader form uses python-magic library possibly for filetype identification. However you probably do not have all the missing dependencies installed. Please install the missing dependencies.\n  <a href=\"https://github.com/ahupp/python-magic#dependencies\" rel=\"nofollow noreferrer\">https://github.com/ahupp/python-magic#dependencies</a></p>\n</blockquote>\n\n<p>But dependencies are not listed anymore. </p>\n\n<p>I've also tried</p>\n\n<p><code>pip install python_magic_bin-0.4.14-py2.py3-none-win_amd64.whl</code></p>\n\n<p>and</p>\n\n<p><code>pip install python_magic_bin-0.4.14-py2.py3-none-win32.whl</code></p>\n\n<p>from this SO post</p>\n\n<p><a href=\"https://stackoverflow.com/questions/46518690/pip-installing-eyed3-module-failed-to-find-libmagic\">pip installing eyeD3 module. Failed to find libmagic</a></p>\n\n<p>I tried </p>\n\n<p><code>pip install python-magic-bin==0.4.14</code></p>\n\n<p>I also tried </p>\n\n<p><code>!brew install libmagic</code></p>\n\n<p>But Colab doesn't seem to recognize <code>brew</code></p>\n"}, {"tags": ["python", "python-3.x", "unit-testing"], "comments": [{"owner": {"reputation": 1981, "user_id": 7203433, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UwHcLcsEtUg/AAAAAAAAAAI/AAAAAAAABYM/2PUMtvGAExk/photo.jpg?sz=128", "display_name": "Josh Karpel", "link": "https://stackoverflow.com/users/7203433/josh-karpel"}, "edited": false, "score": 1, "creation_date": 1560987779, "post_id": 56677189, "comment_id": 99921294, "body": "As provided, your code won&#39;t run because the empty <code>__init__</code> is a <code>SyntaxError</code>. What&#39;s inside that <code>__init__</code>?"}, {"owner": {"reputation": 1302, "user_id": 2573309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1b3ecafafb19c7a9fa7dff2f6e584be?s=128&d=identicon&r=PG", "display_name": "LhasaDad", "link": "https://stackoverflow.com/users/2573309/lhasadad"}, "edited": false, "score": 1, "creation_date": 1560988533, "post_id": 56677189, "comment_id": 99921430, "body": "actually in addition to that the self.geo() items are incorrect.  geo is an instance.  method call on an instance is not valid with code there.  you would want to call some method that the Pt2D objects provide."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1560993966, "post_id": 56677189, "comment_id": 99922314, "body": "Don&#39;t try to call the Pt2D object. What do you expect <code>self.geo(0)</code> to do anyway?"}, {"owner": {"reputation": 35, "user_id": 11673108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68a5c14062aa62bf0ff8375cac8e60cb?s=128&d=identicon&r=PG&f=1", "display_name": "greenbur", "link": "https://stackoverflow.com/users/11673108/greenbur"}, "edited": false, "score": 0, "creation_date": 1561055214, "post_id": 56677189, "comment_id": 99949114, "body": "I changed self.geo(0) to self.geo[0] and it&#39;s running but I&#39;m not sure why. But what I am using it for is to use &#39;self.assertEqual&#39; for it."}], "answers": [{"comments": [{"owner": {"reputation": 1981, "user_id": 7203433, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UwHcLcsEtUg/AAAAAAAAAAI/AAAAAAAABYM/2PUMtvGAExk/photo.jpg?sz=128", "display_name": "Josh Karpel", "link": "https://stackoverflow.com/users/7203433/josh-karpel"}, "edited": false, "score": 2, "creation_date": 1560989348, "post_id": 56677269, "comment_id": 99921573, "body": "Given the code they provided, this will help but doesn&#39;t solve their problem - the code in <code>test_stuff()</code> doesn&#39;t make any sense with only an <code>__init__</code> defined."}], "tags": [], "owner": {"reputation": 7725, "user_id": 4889267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b86b65464f4070d38bbf2abdbd4f1610?s=128&d=identicon&r=PG&f=1", "display_name": "AK47", "link": "https://stackoverflow.com/users/4889267/ak47"}, "is_accepted": false, "score": 1, "last_activity_date": 1560987977, "creation_date": 1560987977, "answer_id": 56677269, "question_id": 56677189, "link": "https://stackoverflow.com/questions/56677189/dont-understand-this-object-not-callable-error/56677269#56677269", "title": "Don&#39;t understand this &quot;object not callable&quot; error", "body": "<p>Populate your <code>__init__</code> method:</p>\n\n<pre><code>def __init__(self, x=0, y=0):\n    self.x = x\n    self.y = y\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 11673108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68a5c14062aa62bf0ff8375cac8e60cb?s=128&d=identicon&r=PG&f=1", "display_name": "greenbur", "link": "https://stackoverflow.com/users/11673108/greenbur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1985, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1560988175, "creation_date": 1560987213, "last_edit_date": 1560988175, "question_id": 56677189, "link": "https://stackoverflow.com/questions/56677189/dont-understand-this-object-not-callable-error", "title": "Don&#39;t understand this &quot;object not callable&quot; error", "body": "<p>I am setting up unit tests and when trying to call a function, <code>Pt2D</code>, I am getting the error <code>TypeError: 'Pt2D' object is not callable</code>. </p>\n\n<p>I have tried all other solutions on the first couple pages when searching up the problem. The two programs are in separate files and I am importing the first class. </p>\n\n<pre><code>class Pt2D(object):\n    \"\"\"Straightforward 2D point class.\n    Args:\n        x (float, optional): The initial x-coordinate. Defaults to 0.\n        y (float, optional): The initial y-coordinate. Defaults to 0.\n    \"\"\"\n\n    def __init__(self, x=0, y=0):\n\n\n\nclass TestPt2D(TestCase):\n\n    def setUp(self):\n        self.geo = Pt2D()\n\n    def tearDown(self):\n        pass\n\n    def test_stuff(self):\n        y1value = self.geo(0)\n        y2value = self.geo(1)\n        ymidvalue = self.geo(0.5)\n</code></pre>\n\n<p>I am expecting the code to work but I can't get around the error.</p>\n"}, {"tags": ["python", "selenium"], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 11661344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z8xZG_as5ZQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdsNeb68jV2apwihl1vnG7Evby9FA/mo/photo.jpg?sz=128", "display_name": "Loons22", "link": "https://stackoverflow.com/users/11661344/loons22"}, "edited": false, "score": 0, "creation_date": 1560989113, "post_id": 56677241, "comment_id": 99921531, "body": "I&#39;ll give this a try once I get back to work tomorrow. Looks like this should work to me!"}], "tags": [], "owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "is_accepted": true, "score": 0, "last_activity_date": 1560987685, "creation_date": 1560987685, "answer_id": 56677241, "question_id": 56677183, "link": "https://stackoverflow.com/questions/56677183/im-trying-to-switch-frames-in-selenium-using-xpath-but-havent-had-any-success/56677241#56677241", "title": "I&#39;m trying to switch frames in Selenium using Xpath, but haven&#39;t had any success so far", "body": "<p>You can switch to frame using different options.</p>\n\n<pre><code>driver.switch_to.frame('frame_name')\ndriver.switch_to.frame(frame_index)\ndriver.switch_to.frame(element)\n</code></pre>\n\n<p>So in your case you can <strong>send the element</strong> as shown below.</p>\n\n<pre><code>driver.switch_to.frame(driver.find_element_by_xpath(\"//*[@id='ui-id-43']/iframe\"))\n</code></pre>\n\n<p>Also you can do the below, if you want to go to first iframe.</p>\n\n<pre><code>driver.switch_to.frame(driver.find_elements_by_tag_name(\"iframe\")[0])\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 11661344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z8xZG_as5ZQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdsNeb68jV2apwihl1vnG7Evby9FA/mo/photo.jpg?sz=128", "display_name": "Loons22", "link": "https://stackoverflow.com/users/11661344/loons22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 1, "accepted_answer_id": 56677241, "answer_count": 1, "score": 1, "last_activity_date": 1560987797, "creation_date": 1560987156, "last_edit_date": 1560987797, "question_id": 56677183, "link": "https://stackoverflow.com/questions/56677183/im-trying-to-switch-frames-in-selenium-using-xpath-but-havent-had-any-success", "title": "I&#39;m trying to switch frames in Selenium using Xpath, but haven&#39;t had any success so far", "body": "<p>I'm trying to switch frames in Selenium using an Xpath instead of using the name of the frame. The frame doesn't have a name so I figured I could just use the Xpath, but I'm not sure Selenium supports using an Xpath instead of a name.</p>\n\n<p>This is the normal way to switch frames:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>driver.switch_to.frame(\"WhateverFrame\")\n</code></pre>\n\n<p>This is what I have tried:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>driver.switch_to.frame(By.XPath(\"//*[@id='ui-id-1']/iframe\"))\n\ndriver.find_frame_by_xpath(\"//*[@id='ui-id-43']/iframe\")\n</code></pre>\n\n<p>Any suggestions as to how I should alter my code to get this to work?</p>\n"}, {"tags": ["python", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1560993224, "post_id": 56677211, "comment_id": 99922206, "body": "There&#39;s nothing he needs to cast as integer.  Rather he needs to pass the correct arguments to <code>np.mean</code>."}], "tags": [], "owner": {"reputation": 778, "user_id": 11666391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP4xeWwe3UY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdzodOndRLVZTTsHfxE4wYA-10kGw/mo/photo.jpg?sz=128", "display_name": "S\u0131dd\u0131k A&#231;\u0131l", "link": "https://stackoverflow.com/users/11666391/s%c4%b1dd%c4%b1k-a%c3%a7%c4%b1l"}, "is_accepted": false, "score": 1, "last_activity_date": 1560987453, "creation_date": 1560987453, "answer_id": 56677211, "question_id": 56677172, "link": "https://stackoverflow.com/questions/56677172/python-typeerror-tuple-indices-must-be-integers-or-slices-not-numpy-float64/56677211#56677211", "title": "Python - TypeError: Tuple indices must be integers or slices, not numpy.float64", "body": "<p>When you perform numpy.mean() on those values the result is stored in Numpy's internal numpy.float type which can not be use as an indexer. You need to cast your variable to and integer. </p>\n\n<p>For scalar values, int() is fine -which is your case. For float64 ndarrays, you need to use Numpy's astype() method.</p>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 1, "last_activity_date": 1560993040, "creation_date": 1560993040, "answer_id": 56677746, "question_id": 56677172, "link": "https://stackoverflow.com/questions/56677172/python-typeerror-tuple-indices-must-be-integers-or-slices-not-numpy-float64/56677746#56677746", "title": "Python - TypeError: Tuple indices must be integers or slices, not numpy.float64", "body": "<p>Make a small dataframe:</p>\n\n<pre><code>In [17]: df = pd.DataFrame(np.arange(12.).reshape(4,3))                                   \nIn [18]: df                                                                               \nOut[18]: \n     0     1     2\n0  0.0   1.0   2.0\n1  3.0   4.0   5.0\n2  6.0   7.0   8.0\n3  9.0  10.0  11.0\n</code></pre>\n\n<p>Try to use <code>mean</code> as you do, showing the FULL traceback:</p>\n\n<pre><code>In [19]: np.mean(df.loc[0,1],df.loc[1,1])                                                 \n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n&lt;ipython-input-19-19b913c69c93&gt; in &lt;module&gt;\n----&gt; 1 np.mean(df.loc[0,1],df.loc[1,1])\n\n/usr/local/lib/python3.6/dist-packages/numpy/core/fromnumeric.py in mean(a, axis, dtype, out, keepdims)\n   3113             pass\n   3114         else:\n-&gt; 3115             return mean(axis=axis, dtype=dtype, out=out, **kwargs)\n   3116 \n   3117     return _methods._mean(a, axis=axis, dtype=dtype,\n\n/usr/local/lib/python3.6/dist-packages/numpy/core/_methods.py in _mean(a, axis, dtype, out, keepdims)\n     60 \n     61     is_float16_result = False\n---&gt; 62     rcount = _count_reduce_items(arr, axis)\n     63     # Make this warning show up first\n     64     if rcount == 0:\n\n/usr/local/lib/python3.6/dist-packages/numpy/core/_methods.py in _count_reduce_items(arr, axis)\n     53     items = 1\n     54     for ax in axis:\n---&gt; 55         items *= arr.shape[ax]\n     56     return items\n     57 \n\nTypeError: tuple indices must be integers or slices, not numpy.float64\n</code></pre>\n\n<p>Note that error occurs when trying to use the axis variable.  If <code>arr</code> is a numpy array, then <code>arr.shape</code> is a tuple.  <code>(1,2,3)[1.0]</code> would produce the same error message.</p>\n\n<p>From <code>np.mean</code> docs:</p>\n\n<pre><code>Signature: np.mean(a, axis=None, ...)\n</code></pre>\n\n<p>the first argument is an array (or something that can be made into an array).  The second is an axis value - <code>None</code>, an integer, or a tuple of integers.  You instead give it an element of your dataframe, evidently one that is a float.</p>\n\n<p>So you need to give <code>np.mean</code> the correct arguments.  For example a list of dataframe elements:</p>\n\n<pre><code>In [22]: np.mean([df.loc[0,1],df.loc[1,1]])                                               \nOut[22]: 2.5\n</code></pre>\n\n<p>===</p>\n\n<p>Summary:</p>\n\n<ul>\n<li><p>look at the full traceback, and show it to us.  It can have valuable clues as to what is wrong</p></li>\n<li><p>read the docs of functions that you use.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 13546888, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhP6UU6Sm2rFRYLb3BZt0ej_IriamAq3uYaqHSY=k-s128", "display_name": "Will Wright", "link": "https://stackoverflow.com/users/13546888/will-wright"}, "is_accepted": false, "score": 1, "last_activity_date": 1594142862, "creation_date": 1594142862, "answer_id": 62780750, "question_id": 56677172, "link": "https://stackoverflow.com/questions/56677172/python-typeerror-tuple-indices-must-be-integers-or-slices-not-numpy-float64/62780750#62780750", "title": "Python - TypeError: Tuple indices must be integers or slices, not numpy.float64", "body": "<p>@hpaulj: TL;DR</p>\n<p>np.mean typically only requires one argument.  The error caused by inputting</p>\n<pre><code>np.mean(finaltbl.loc[0, v], finaltbl.loc[1, v])\n</code></pre>\n<p>will be eliminated if you put the 2 arguments into a single array using square brackets</p>\n<pre><code>np.mean([finaltbl.loc[0, v], finaltbl.loc[1, v]])\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 8803595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa880fbc42995dae55a771801145856d?s=128&d=identicon&r=PG&f=1", "display_name": "maxutil", "link": "https://stackoverflow.com/users/8803595/maxutil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2156, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1594142862, "creation_date": 1560987054, "last_edit_date": 1560987375, "question_id": 56677172, "link": "https://stackoverflow.com/questions/56677172/python-typeerror-tuple-indices-must-be-integers-or-slices-not-numpy-float64", "title": "Python - TypeError: Tuple indices must be integers or slices, not numpy.float64", "body": "<p>Getting this error for something that looks simple. Help would be appreciated.</p>\n\n<p>finaltbl is a pandas df with col1prelim, col2prelim, and col3prelim, which have values ranging between 0 and 1 in float format.</p>\n\n<pre><code>finaltbl['col1'] = np.nan\nfinaltbl['col2'] = np.nan\nfinaltbl['col3'] = np.nan\ncoldict = {'col1':'col1prelim', 'col2':'col2prelim', 'col3':'col3prelim'}\n\nfor k, v in coldict.items():\n    finaltbl.at[0, k] = 1\n    finaltbl.at[1, k] = np.mean(finaltbl.loc[0, v], finaltbl.loc[1, v])\n</code></pre>\n\n<p>This returns <code>TypeError: tuple indices must be integers or slices, not numpy.float64</code></p>\n\n<p>However this works:</p>\n\n<pre><code>for k, v in coldict.items():\n    finaltbl.at[0, k] = 1\n    finaltbl.at[1, k] = (finaltbl.loc[0, v] + finaltbl.loc[1, v])/2\n</code></pre>\n\n<p>How do I change my average/mean calc above to work? I need to later on use 3 or 4 inputs rather than 2 and would like to be able to use a mean formula or something similar.</p>\n"}, {"tags": ["python", "nlp", "office-addins", "officedev"], "comments": [{"owner": {"reputation": 1177, "user_id": 8215068, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206978590701538/picture?type=large", "display_name": "Alexis", "link": "https://stackoverflow.com/users/8215068/alexis"}, "edited": false, "score": 0, "creation_date": 1595922495, "post_id": 56677146, "comment_id": 111633520, "body": "Have you found a solution for this ? 1 year later there is still nothing clear on web to do so :("}], "owner": {"reputation": 11, "user_id": 8379395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b63a888c822c1f0874410034c81019f7?s=128&d=identicon&r=PG&f=1", "display_name": "Alf", "link": "https://stackoverflow.com/users/8379395/alf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1560986891, "creation_date": 1560986891, "question_id": 56677146, "link": "https://stackoverflow.com/questions/56677146/how-to-use-python-to-develop-office-complement", "title": "How to use python to develop office complement?", "body": "<p>I'm trying to develop a web add-in for office, but I have not managed to call a Python function from the Javascript API. My question is whether there is any way to call the Python function from the Javascript API, or some way to develop a plugin using only Python. It is necessary Python since in that language the algorithms of NLP are had for the analysis of the text.</p>\n"}, {"tags": ["python", "pandas", "dataframe", "pandas-groupby", "melt"], "answers": [{"comments": [{"owner": {"reputation": 402, "user_id": 6672422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97fd00ddf51e2d5ef04713641934617?s=128&d=identicon&r=PG&f=1", "display_name": "Cindy", "link": "https://stackoverflow.com/users/6672422/cindy"}, "edited": false, "score": 0, "creation_date": 1561023105, "post_id": 56677202, "comment_id": 99931696, "body": "Great! Thank you very much for help. That what I asked."}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 1, "last_activity_date": 1560987345, "creation_date": 1560987345, "answer_id": 56677202, "question_id": 56677128, "link": "https://stackoverflow.com/questions/56677128/python-add-aggregated-columns-to-dataframe-based-on-the-key-and-additional-cond/56677202#56677202", "title": "Python: Add aggregated columns to DataFrame based on the Key and additional conditions", "body": "<p>Here is one way <code>melt</code> the <code>dogs</code> , then <code>merge</code> and <code>groupby</code> </p>\n\n<pre><code>df2 = dogs.melt(id_vars=['DogID','DogWeight'], var_name=\"Puppies\", value_name='PuppyName').dropna()\n\ndf2.merge(df,on='PuppyName',how='left').groupby('DogID').mean()\nOut[423]: \n       DogWeight     Jan17     Jun18     Dec18  April19\nDogID                                                  \nDog1        12.7  0.800000  1.700000  3.700000      4.6\nDog2        15.5  0.833333  1.766667  3.066667      4.0\nDog3        10.2  0.800000  1.700000  2.800000      4.4\nDog4        16.9  0.550000  1.250000  2.950000      3.9\n</code></pre>\n"}], "owner": {"reputation": 402, "user_id": 6672422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97fd00ddf51e2d5ef04713641934617?s=128&d=identicon&r=PG&f=1", "display_name": "Cindy", "link": "https://stackoverflow.com/users/6672422/cindy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2943, "favorite_count": 1, "accepted_answer_id": 56677202, "answer_count": 1, "score": 0, "last_activity_date": 1561023146, "creation_date": 1560986749, "last_edit_date": 1561023146, "question_id": 56677128, "link": "https://stackoverflow.com/questions/56677128/python-add-aggregated-columns-to-dataframe-based-on-the-key-and-additional-cond", "title": "Python: Add aggregated columns to DataFrame based on the Key and additional conditions", "body": "<p>I have 2 dataframes in the following view:\n<code>dogs</code> dataframe is:</p>\n\n<pre><code>DogID   PuppyName1  PuppyName2  PuppyName3  PuppyName4   DogWeight\nDog1       Nick         NaN         NaN      NaN            12.7\nDog2       Jack         Fox         Rex      NaN            15.5         \nDog3       Snack        NaN         NaN      NaN            10.2\nDog4       Yosee        Petty       NaN      NaN            16.9\n</code></pre>\n\n<p><code>puppyWeights</code> dataframe is:</p>\n\n<pre><code>PuppyName   Jan17  Jun18  Dec18  April19   \nNick         0.8    1.7     3.7     4.6\nJack         0.6    1.3     2.8     3.5        \nFox          0.9    1.7     3.4     4.3\nRex          1.0    2.3     3.0     4.2\nSnack        0.8    1.7     2.8     4.4\nYosee        0.6    1.2     3.1     4.3\nPetty        0.5    1.3     2.8     3.5 \n</code></pre>\n\n<p>I need to add information about puppies weight by Months to the <code>Dogs</code> dataframe based on <code>PuppyWeights</code> dataframe. If Dog has more than 1 child, for instance: <code>Dog2</code>, <code>Dog3</code>-> I need to take mean of the weight values by <code>PuppyName</code> for each Month. For example: \n<code>Dog2</code> should be average  between values for <code>Jack</code> and <code>Fox</code>in <code>PuppyWeights</code> table:</p>\n\n<pre><code>DogID   Jan17  Jun18  Dec18  April19   DogWeight\nDog2     0.75  1.5     3.1     3.9        15.5     \n</code></pre>\n\n<p>I tried to use <code>melt</code> function to convert <code>['PuppyName1',  'PuppyName2',  'PuppyName3',  'PuppyName4']</code> columns into rows.</p>\n\n<p>But, I don't have idea how to add months information to <code>dogs</code> dataframe with aggregation by mean when dog has more than one child.</p>\n\n<p><code>df2 = dogs.melt(id_vars=['DogID','DogWeight'], var_name=\"Puppies\", value_name='PuppyName')</code></p>\n\n<p>Desired Output is:</p>\n\n<pre><code>DogID   Jan17  Jun18  Dec18  April19   DogWeight\nDog1     0.8    1.7    3.7     4.6        12.7     \nDog2     0.75   1.5    3.1     3.9        15.5   \nDog3     0.8    1.7    2.8     4.4        10.2\nDog4     0.55   1.25   2.95    3.9        16.9  \n</code></pre>\n\n<p>How I can add weight information by Month to the <code>dogs</code> dataframe?</p>\n\n<p>I'd appreciate for any idea. Thanks)</p>\n"}, {"tags": ["python", "web-scraping"], "comments": [{"owner": {"reputation": 966, "user_id": 11596424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JIFWH.jpg?s=128&g=1", "display_name": "LuckyZakary", "link": "https://stackoverflow.com/users/11596424/luckyzakary"}, "edited": false, "score": 0, "creation_date": 1560987442, "post_id": 56677119, "comment_id": 99921229, "body": "Look into requests library."}, {"owner": {"reputation": 1121, "user_id": 6084964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67805069c633399266ffd4a4f5063536?s=128&d=identicon&r=PG&f=1", "display_name": "Kartikeya Sharma", "link": "https://stackoverflow.com/users/6084964/kartikeya-sharma"}, "edited": false, "score": 0, "creation_date": 1560987633, "post_id": 56677119, "comment_id": 99921269, "body": "Can be done with Scrapy but its a whole framework!"}, {"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1560988032, "post_id": 56677119, "comment_id": 99921341, "body": "&quot;a form, a tracking code, another page on the same site, an external site, etc&quot; -- since this is your own classification, you need to do it on your own. I&#39;m not even sure what is the criterion for &quot;tracking code&quot; and what is the difference between &quot;another page on the same site&quot; with URL parameters and &quot;form&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 10919409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96584dfc9e2b2cb03910a3fc4fffcf93?s=128&d=identicon&r=PG&f=1", "display_name": "dkk", "link": "https://stackoverflow.com/users/10919409/dkk"}, "edited": false, "score": 0, "creation_date": 1560994731, "post_id": 56677564, "comment_id": 99922440, "body": "Hi, Thank you. In reality I&#39;m able to extract all the links of an URL but I&#39;m stuck for the second part of the work : Extract the type of the links..."}, {"owner": {"reputation": 1159, "user_id": 10656054, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vmZPu.jpg?s=128&g=1", "display_name": "san", "link": "https://stackoverflow.com/users/10656054/san"}, "reply_to_user": {"reputation": 131, "user_id": 10919409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96584dfc9e2b2cb03910a3fc4fffcf93?s=128&d=identicon&r=PG&f=1", "display_name": "dkk", "link": "https://stackoverflow.com/users/10919409/dkk"}, "edited": false, "score": 0, "creation_date": 1561006486, "post_id": 56677564, "comment_id": 99924526, "body": "Not sure if I am following your question properly, 1&gt; This sounds more appropriate question in a web development forum than python scrapping, as basically you are looking for the proper tag in the DOM object, 2&gt; As far my understanding, an &lt;input&gt; tag would take input from an user, but that is a tag inside a webpage, and hence you have to retrieve that child webpage and then have to start scrapping on that child webpage to look for availability of &lt;input&gt; tag. And you should not expect to get that information directly by looking at the child URL if I am not missing something."}], "tags": [], "owner": {"reputation": 1159, "user_id": 10656054, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vmZPu.jpg?s=128&g=1", "display_name": "san", "link": "https://stackoverflow.com/users/10656054/san"}, "is_accepted": false, "score": 0, "last_activity_date": 1612385544, "last_edit_date": 1612385544, "creation_date": 1560991156, "answer_id": 56677564, "question_id": 56677119, "link": "https://stackoverflow.com/questions/56677119/web-scraping-how-to-extract-the-type-of-the-links-in-an-url/56677564#56677564", "title": "Web scraping - how to extract the type of the links in an URL?", "body": "<p>To scrape a page properly,</p>\n<ol>\n<li><p>You need some level of understanding of different html and css tags\nand their logics if you are not already familiar.</p>\n</li>\n<li><p>You need to have some understanding of the DOM of the page you are\ntrying to scrape as each page will have different structure. For\nthat, please open the page, hit F12 (if using Chrome) and then\nselect any portion of the page, right click, and then select inspect\nelement.</p>\n</li>\n<li><p>Once you have some understanding of the page's structure, you can\nmake use of webbrowser, requests and bs4 python libraries to get\nwhat you are looking for.</p>\n</li>\n<li><p>If you are not already familiar with webscraping with python, I\nwill strongly recommend this online book:\n<a href=\"https://automatetheboringstuff.com/chapter11/\" rel=\"nofollow noreferrer\">https://automatetheboringstuff.com/chapter11/</a></p>\n</li>\n<li><p>Some example code of say how to directly open a few Google top\nsearch results of some input text:</p>\n<pre><code>#Program to open provided number of top google search result pages along with the google page\n\nimport sys, webbrowser, bs4, requests\n\nif len(sys.argv) &gt; 1:\n    number_of_pages = int(sys.argv[1])\n\nif len(sys.argv) &gt; 2:\n    search = &quot;/search?q=&quot;+'+'.join(sys.argv[2:])\nelse:\n    search=&quot;&quot;\n\nwebbrowser.open(&quot;https://www.google.com&quot;+search)\ngoogle_result_page = requests.get(&quot;https://www.google.com&quot;+search)\ngoogle_soup = bs4.BeautifulSoup(google_result_page.text)\n\nelems = google_soup.select(&quot;.r a&quot;)\n\nnumber_of_pages = min(number_of_pages, len(elems))\n\nfor i in range(number_of_pages):\n    webbrowser.open(&quot;http://www.google.com&quot;+elems[i].get('href'))\n</code></pre>\n</li>\n</ol>\n"}], "owner": {"reputation": 131, "user_id": 10919409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96584dfc9e2b2cb03910a3fc4fffcf93?s=128&d=identicon&r=PG&f=1", "display_name": "dkk", "link": "https://stackoverflow.com/users/10919409/dkk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2597, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1612385544, "creation_date": 1560986676, "question_id": 56677119, "link": "https://stackoverflow.com/questions/56677119/web-scraping-how-to-extract-the-type-of-the-links-in-an-url", "title": "Web scraping - how to extract the type of the links in an URL?", "body": "<p>I have a list of URLs and I have to extract from each URL, the links inside this URL and for each link extract the type of that link (a form, a tracking code, another page on the same site, an external site, etc.).</p>\n\n<p>My question is : Do you think this is feasible with a Python library ?\nIf Yes, can you give me a starting point ?</p>\n\n<p>Regards.</p>\n"}, {"tags": ["python", "python-3.x", "file", "parsing"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1560987012, "post_id": 56677106, "comment_id": 99921119, "body": "<i>I keep getting an error</i> is not a problem description unless you tell us specifically what that error is, including the exact error message. It&#39;s on the screen right in front of you, but we can&#39;t see that screen from where we&#39;re sitting. We need a clearly stated problem description and a specific question before we can help."}, {"owner": {"reputation": 639, "user_id": 5266708, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/871d7b9aa4e0a305167a4b6a24840bbf?s=128&d=identicon&r=PG&f=1", "display_name": "Hari", "link": "https://stackoverflow.com/users/5266708/hari"}, "edited": false, "score": 0, "creation_date": 1560987935, "post_id": 56677106, "comment_id": 99921322, "body": "After the word <b>TEMPERATURE</b>, does the &#39;Test_File.txt&#39; always have 3 lines of data until it reaches <b>NOT NEEDED</b>?"}, {"owner": {"reputation": 11, "user_id": 11656434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c4274d3f82b52b5579bed052f3ecc04?s=128&d=identicon&r=PG&f=1", "display_name": "Josteris", "link": "https://stackoverflow.com/users/11656434/josteris"}, "reply_to_user": {"reputation": 639, "user_id": 5266708, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/871d7b9aa4e0a305167a4b6a24840bbf?s=128&d=identicon&r=PG&f=1", "display_name": "Hari", "link": "https://stackoverflow.com/users/5266708/hari"}, "edited": false, "score": 0, "creation_date": 1561063681, "post_id": 56677106, "comment_id": 99952534, "body": "@Hari Yes. It will always been a set amount of lines after TEMPERATURE"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11656434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c4274d3f82b52b5579bed052f3ecc04?s=128&d=identicon&r=PG&f=1", "display_name": "Josteris", "link": "https://stackoverflow.com/users/11656434/josteris"}, "edited": false, "score": 0, "creation_date": 1561064020, "post_id": 56677171, "comment_id": 99952669, "body": "I copied your code down, and it has given me the attribute error: _io.TextIOWrapper&#39; object has no attribute &#39;next&#39;"}, {"owner": {"reputation": 11, "user_id": 11656434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c4274d3f82b52b5579bed052f3ecc04?s=128&d=identicon&r=PG&f=1", "display_name": "Josteris", "link": "https://stackoverflow.com/users/11656434/josteris"}, "edited": false, "score": 0, "creation_date": 1561066175, "post_id": 56677171, "comment_id": 99953435, "body": "Thank you! Works great!"}], "tags": [], "owner": {"reputation": 7725, "user_id": 4889267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b86b65464f4070d38bbf2abdbd4f1610?s=128&d=identicon&r=PG&f=1", "display_name": "AK47", "link": "https://stackoverflow.com/users/4889267/ak47"}, "is_accepted": false, "score": 2, "last_activity_date": 1561065252, "last_edit_date": 1561065252, "creation_date": 1560987053, "answer_id": 56677171, "question_id": 56677106, "link": "https://stackoverflow.com/questions/56677106/python-extract-3-lines-from-file-after-a-matching-line/56677171#56677171", "title": "Python: Extract 3 lines from file after a matching line", "body": "<p>You can use <code>f.next()</code> or <code>f.__next__()</code> to scan and find the line \"TEMPERATURE\" and then append the following 3 lines of data:</p>\n\n<p><strong>Python3:</strong></p>\n\n<pre><code>l = []\n\nwith open(\"Test_File.txt\", \"r+\") as f:\n    while f.__next__().strip() != 'TEMPERATURE':\n        continue\n\n    for _ in range(3):\n        l.append(f.__next__().strip())\n\nprint(l)\n\n&gt;&gt; ['11223 112312 4123123 6423 123124 563456 123123 35734562 34526 3452 346', \n    '123412 51341 12341 473567 11234 45746 578957 23523 3452 32435 3 32452346', \n    '23453 23462 234532 54245 345 4563 6573456 23452345 367 4523 45 2345234']\n</code></pre>\n\n<p><strong>Python2:</strong></p>\n\n<pre><code>l = []\n\nwith open(\"Test_File.txt\", \"r\") as f:\n    while f.next().strip() != 'TEMPERATURE':\n        continue\n\n    for _ in range(3):\n        l.append(f.next().strip())\n\nprint(l)\n\n&gt;&gt; ['11223 112312 4123123 6423 123124 563456 123123 35734562 34526 3452 346', \n    '123412 51341 12341 473567 11234 45746 578957 23523 3452 32435 3 32452346', \n    '23453 23462 234532 54245 345 4563 6573456 23452345 367 4523 45 2345234']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16330, "user_id": 6464947, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-STVPXBxpfbk/AAAAAAAAAAI/AAAAAAAAAMM/7wmzAdslc70/photo.jpg?sz=128", "display_name": "Giovanni G. PY", "link": "https://stackoverflow.com/users/6464947/giovanni-g-py"}, "is_accepted": false, "score": 0, "last_activity_date": 1561090737, "creation_date": 1561090737, "answer_id": 56696779, "question_id": 56677106, "link": "https://stackoverflow.com/questions/56677106/python-extract-3-lines-from-file-after-a-matching-line/56696779#56696779", "title": "Python: Extract 3 lines from file after a matching line", "body": "<pre><code>import os\n\na = \"\"\"\nNOT IMPORTANT\n234123 1523 1234 613 1234 146134 51234 123231 123 1235123512 \n5467 3 564 245 26 234 5 62 435 234 534 62 345 2346 234 52 345 2345 2\n456 2345 2362 3452 346 2345 236 254 24 523 45 23462 345 234 54326 23\nTEMPERATURE\n11223 112312 4123123 6423 123124 563456 123123 35734562 34526 3452 346\n123412 51341 12341 473567 11234 45746 578957 23523 3452 32435 3 32452346 \n23453 23462 234532 54245 345 4563 6573456 23452345 367 4523 45 2345234\nNOT NEEDED\n324123 6462 345 3563 67 566 123 412343 4645 76568 5623 5341 23413 65\n573568767 345 2354 324623 452 346 2345 234 526 23 4523 452 345 3254 345 \nWAVELENGTH\n123 234 5134 234 6246 1234 5623 3 568 3245 8 2455 345 47 2345 2\n2354 46 5657 24455 1345 4566 3 2345 456 6 345 25 34 2354236 2345\"\"\"\n\n\ndef givedata(dataset, word, lines):\n    b = \"\"\n    x = dataset.splitlines()\n    for line in x: \n        if word in line:\n            for y in range(1, lines+1):\n                b += x[x.index(line)+y]+ \"\\n\"\n    return b\nb = givedata(a, \"TEMPERATURE\", 3)\n\nwith open(\"newfile.txt\", \"w\") as file:\n    file.write(b)\n\nos.startfile(\"newfile.txt\")\n</code></pre>\n\n<h2>Output:</h2>\n\n<pre><code>11223 112312 4123123 6423 123124 563456 123123 35734562 34526 3452 346\n123412 51341 12341 473567 11234 45746 578957 23523 3452 32435 3 32452346 \n23453 23462 234532 54245 345 4563 6573456 23452345 367 4523 45 2345234\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11656434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c4274d3f82b52b5579bed052f3ecc04?s=128&d=identicon&r=PG&f=1", "display_name": "Josteris", "link": "https://stackoverflow.com/users/11656434/josteris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 799, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1561125763, "creation_date": 1560986538, "last_edit_date": 1561125763, "question_id": 56677106, "link": "https://stackoverflow.com/questions/56677106/python-extract-3-lines-from-file-after-a-matching-line", "title": "Python: Extract 3 lines from file after a matching line", "body": "<p>I have a text file that contains data. It contains more information then I need, so I am trying to extract only the section about temperature which has the headline \"TEMPERATURE.\" There are three lines of data that I need to extract with it, then ultimately create a new text file with only the relevant data. </p>\n\n<p>Here is a sample of what the text file 'Test_File.txt' looks like:</p>\n\n<pre><code>NOT IMPORTANT\n234123 1523 1234 613 1234 146134 51234 123231 123 1235123512 \n5467 3 564 245 26 234 5 62 435 234 534 62 345 2346 234 52 345 2345 2\n456 2345 2362 3452 346 2345 236 254 24 523 45 23462 345 234 54326 23\nTEMPERATURE\n11223 112312 4123123 6423 123124 563456 123123 35734562 34526 3452 346\n123412 51341 12341 473567 11234 45746 578957 23523 3452 32435 3 32452346 \n23453 23462 234532 54245 345 4563 6573456 23452345 367 4523 45 2345234\nNOT NEEDED\n324123 6462 345 3563 67 566 123 412343 4645 76568 5623 5341 23413 65\n573568767 345 2354 324623 452 346 2345 234 526 23 4523 452 345 3254 345 \nWAVELENGTH\n123 234 5134 234 6246 1234 5623 3 568 3245 8 2455 345 47 2345 2\n2354 46 5657 24455 1345 4566 3 2345 456 6 345 25 34 2354236 2345\n</code></pre>\n\n<p>Here is my code so far:</p>\n\n<pre><code>with open(\"Test_File.txt\") as data:\n    data = infile.readlines()\n\ndata = [x.strip() for x in data]    \n\nn = 1000000\n\nlist = []\n\nfor item in data:\n    if item == \"TEMPERATURE\":\n        list.append(item)\n        n = 0\n        continue\n    elif n &lt; 4:   \n        list.append(item)\n        n += 1\n        continue\n    elif n &gt;= 4:\n        break\n\n\nprint(list)        \n</code></pre>\n\n<p>I keep getting an error when I try to run it, so any help would be much appreciated! Thank you!</p>\n"}, {"tags": ["python", "list"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 11214824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b89cc5a0e94c7fb9987834b62f1058fe?s=128&d=identicon&r=PG&f=1", "display_name": "curious", "link": "https://stackoverflow.com/users/11214824/curious"}, "edited": false, "score": 0, "creation_date": 1560986830, "post_id": 56677127, "comment_id": 99921070, "body": "Do I add that to the code, or do I substitute that for what I already have?"}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1560986875, "post_id": 56677127, "comment_id": 99921080, "body": "Not a good idea to use same name for function and variable. Also, don;t use <code>list</code> as the variable name"}, {"owner": {"reputation": 1121, "user_id": 6084964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67805069c633399266ffd4a4f5063536?s=128&d=identicon&r=PG&f=1", "display_name": "Kartikeya Sharma", "link": "https://stackoverflow.com/users/6084964/kartikeya-sharma"}, "reply_to_user": {"reputation": 31, "user_id": 11214824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b89cc5a0e94c7fb9987834b62f1058fe?s=128&d=identicon&r=PG&f=1", "display_name": "curious", "link": "https://stackoverflow.com/users/11214824/curious"}, "edited": false, "score": 1, "creation_date": 1560987103, "post_id": 56677127, "comment_id": 99921139, "body": "@curious You can see the whole code now and you can replace it with yours!"}, {"owner": {"reputation": 339, "user_id": 10934757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oUn3d.png?s=128&g=1", "display_name": "ASaunders", "link": "https://stackoverflow.com/users/10934757/asaunders"}, "edited": false, "score": 0, "creation_date": 1560987352, "post_id": 56677127, "comment_id": 99921200, "body": "Small aside: You are working a little too hard to make <code>cards_id_list</code>. <code>cards_id_list = list(range(1,562))</code> It&#39;s fine if you want it in a function but no need to iterate and append when you can just convert the range iterator to a list."}, {"owner": {"reputation": 1121, "user_id": 6084964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67805069c633399266ffd4a4f5063536?s=128&d=identicon&r=PG&f=1", "display_name": "Kartikeya Sharma", "link": "https://stackoverflow.com/users/6084964/kartikeya-sharma"}, "reply_to_user": {"reputation": 339, "user_id": 10934757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oUn3d.png?s=128&g=1", "display_name": "ASaunders", "link": "https://stackoverflow.com/users/10934757/asaunders"}, "edited": false, "score": 0, "creation_date": 1560987509, "post_id": 56677127, "comment_id": 99921247, "body": "@ASaunders Yes i totally understand it, I just used it from the original code! Looks like the level of the programmer is beginner, hence it would be easier for him to understand it first this way."}, {"owner": {"reputation": 31, "user_id": 11214824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b89cc5a0e94c7fb9987834b62f1058fe?s=128&d=identicon&r=PG&f=1", "display_name": "curious", "link": "https://stackoverflow.com/users/11214824/curious"}, "edited": false, "score": 0, "creation_date": 1560987989, "post_id": 56677127, "comment_id": 99921330, "body": "Thank you all, it really helped! But what if I don&#39;t want to random choose 45 numbers, what if i make a list with 45 numbers and I want to take them out of the original list?"}], "tags": [], "owner": {"reputation": 1121, "user_id": 6084964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67805069c633399266ffd4a4f5063536?s=128&d=identicon&r=PG&f=1", "display_name": "Kartikeya Sharma", "link": "https://stackoverflow.com/users/6084964/kartikeya-sharma"}, "is_accepted": false, "score": -1, "last_activity_date": 1560986967, "last_edit_date": 1560986967, "creation_date": 1560986741, "answer_id": 56677127, "question_id": 56677087, "link": "https://stackoverflow.com/questions/56677087/how-to-take-a-number-out-of-a-list-and-put-on-another-list/56677127#56677127", "title": "How to take a number out of a list and put on another list", "body": "<p>You can do it like this:</p>\n\n<pre><code>def cards_id(x):\n    lis = []\n    for i in range(1,x+1):\n        lis.append(i)\n    return lis\nimport random\ncards_id_list=cards_id(561)\nultimate=[]\nfor i in range(0,45):\n    a=random.choice(cards_id_list)#random element from the list\n    ultimate.append(a)\n    cards_id_list.remove(a)#remove from the list here\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10213, "user_id": 1359058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f191024999528a3a7375f8d7181e1fe6?s=128&d=identicon&r=PG", "display_name": "abc", "link": "https://stackoverflow.com/users/1359058/abc"}, "is_accepted": false, "score": 2, "last_activity_date": 1560987195, "creation_date": 1560987195, "answer_id": 56677185, "question_id": 56677087, "link": "https://stackoverflow.com/questions/56677087/how-to-take-a-number-out-of-a-list-and-put-on-another-list/56677185#56677185", "title": "How to take a number out of a list and put on another list", "body": "<p>No need to iterate, append cards to a new list and remove cards from the original one (very inefficient).<br>\nYou may just shuffle the original list and take the first 45 elements, while changing the original list to take the remaining ones.</p>\n\n<pre><code>cards = list(range(1,562)) \nrandom.shuffle(cards)\nselected, cards = cards[:45], cards[45:]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1035, "user_id": 5825760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u1You.png?s=128&g=1", "display_name": "B.Gees", "link": "https://stackoverflow.com/users/5825760/b-gees"}, "is_accepted": false, "score": 0, "last_activity_date": 1560987281, "creation_date": 1560987281, "answer_id": 56677194, "question_id": 56677087, "link": "https://stackoverflow.com/questions/56677087/how-to-take-a-number-out-of-a-list-and-put-on-another-list/56677194#56677194", "title": "How to take a number out of a list and put on another list", "body": "<p>You can use <code>numpy</code> :</p>\n\n<pre><code>import numpy as np\n\ncards_id = np.arange(561) + 1\nultimate = np.random.choice(cards_id, 45)\ncards_id = np.setdiff1d(cards_id, ultimate)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11214824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b89cc5a0e94c7fb9987834b62f1058fe?s=128&d=identicon&r=PG&f=1", "display_name": "curious", "link": "https://stackoverflow.com/users/11214824/curious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2591, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1573289041, "creation_date": 1560986374, "last_edit_date": 1573289041, "question_id": 56677087, "link": "https://stackoverflow.com/questions/56677087/how-to-take-a-number-out-of-a-list-and-put-on-another-list", "title": "How to take a number out of a list and put on another list", "body": "<p>I have some code that creates a list with numbers, from 1 to 561. I want to create a variable that is called \"ultimate\" that has 45 of those values, but, the ones that I put on that list, I want it to be removed from the cards_id list. How can I do that? This is the general code I have.</p>\n\n<pre><code>def cards_id(x):\n    list = []\n    for i in range(1,x+1):\n        list.append(i)\n\n    return list\n\ncards_id(561)\n\nimport random\n\nprint (random.choice(cards_id(561)))\n\nfrom random import shuffle\n\nfor i in range(0,45):\n    print (random.choice(cards_id(561)))\n</code></pre>\n"}, {"tags": ["python", "linux", "split", "tar", "gzip"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1560989479, "post_id": 56677086, "comment_id": 99921595, "body": "Gzip doesn&#39;t keep track of file boundaries. Are you sure it&#39;s not <code>.tar.gz</code>?"}, {"owner": {"reputation": 1354, "user_id": 158328, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/lAzHe.jpg?s=128&g=1", "display_name": "D_K", "link": "https://stackoverflow.com/users/158328/d-k"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1561040110, "post_id": 56677086, "comment_id": 99941380, "body": "@Barmar to your first question: you are right, it is <code>.tar.gz</code>. To your second point - totally agree. I have however implemented a Python code to solve the problem."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1561044314, "post_id": 56677086, "comment_id": 99943945, "body": "You should correct the question to say what you really meant."}, {"owner": {"reputation": 1354, "user_id": 158328, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/lAzHe.jpg?s=128&g=1", "display_name": "D_K", "link": "https://stackoverflow.com/users/158328/d-k"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1561060843, "post_id": 56677086, "comment_id": 99951434, "body": "@Barmar thanks, I have updated"}], "answers": [{"tags": [], "owner": {"reputation": 1354, "user_id": 158328, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/lAzHe.jpg?s=128&g=1", "display_name": "D_K", "link": "https://stackoverflow.com/users/158328/d-k"}, "is_accepted": true, "score": 0, "last_activity_date": 1561130683, "last_edit_date": 1561130683, "creation_date": 1561040549, "answer_id": 56688101, "question_id": 56677086, "link": "https://stackoverflow.com/questions/56677086/split-gzip-file-by-file-count/56688101#56688101", "title": "Split gzip file by file count", "body": "<p>Because <code>split</code> does not support splitting by count of files, I implemented a Python utility:</p>\n\n<pre><code>import tarfile\nimport glob\nimport os\nimport shutil \n\ndef make_a_split(input_dir, split_num):\n    print(\"split {}\".format(split_num))\n    tar_output = tarfile.open(\"split_\" + str(split_num) + \".tar.gz\", \"w:gz\")\n    for file_name in glob.glob(os.path.join(input_dir, \"*\")):\n        #print(\"  Adding %s...\" % file_name)\n        tar_output.add(file_name, os.path.basename(file_name))\n    tar_output.close()\n    shutil.rmtree(tmp_output_dir)\n    print(\"split {} done\".format(split_num))\n\ncount_per_split = 300000\nsplit = 1\n\ntmp_output_dir = \"tmp/\"\n\ntar = tarfile.open('your.tar.gz')\n\nfor idx, tarinfo in enumerate(tar):\n    tar.extract(tarinfo, tmp_output_dir)\n    if idx &gt; 0 and idx % count_per_split == 0:\n       make_a_split(tmp_output_dir, split)\n       split += 1\ntar.close()\n# did we not remove the temp dir? It means we have seen less than count_per_split and need\n# to make a split\nif os.path.exists(tmp_output_dir):\n   make_a_split(tmp_output_dir, split)\n</code></pre>\n"}], "owner": {"reputation": 1354, "user_id": 158328, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/lAzHe.jpg?s=128&g=1", "display_name": "D_K", "link": "https://stackoverflow.com/users/158328/d-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 56688101, "answer_count": 1, "score": -1, "last_activity_date": 1561130683, "creation_date": 1560986365, "last_edit_date": 1561060828, "question_id": 56677086, "link": "https://stackoverflow.com/questions/56677086/split-gzip-file-by-file-count", "title": "Split gzip file by file count", "body": "<p>I've got a large tar.gz file that contains millions of xml files.</p>\n\n<p><code>split</code> command in linux can split by number of bites / lines, but cannot split by number of <em>files</em>. I would like to for instance split the gzip file by say 300k files in each output sub-gzip. Is there a utility to achieve this?</p>\n\n<p>My ultimate goal is to process the tar.gz in Python and I need to split to the file into smaller chunks preserving the files. Splitting will allow to process them in parallel.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 957, "user_id": 9632774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zP3nO.png?s=128&g=1", "display_name": "CrafterKolyan", "link": "https://stackoverflow.com/users/9632774/crafterkolyan"}, "edited": false, "score": 0, "creation_date": 1560986901, "post_id": 56677085, "comment_id": 99921087, "body": "Maybe you just need to use <code>os.listdir()</code> instead of <code>subprocess.call([r&#39;C:&#47;jah&#47;newbat.bat&#39;])</code> (don&#39;t forget to <code>import os</code> in first line)"}, {"owner": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "reply_to_user": {"reputation": 957, "user_id": 9632774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zP3nO.png?s=128&g=1", "display_name": "CrafterKolyan", "link": "https://stackoverflow.com/users/9632774/crafterkolyan"}, "edited": false, "score": 0, "creation_date": 1560987021, "post_id": 56677085, "comment_id": 99921122, "body": "@CrafterKolyan If I use os.listdir(), how would I go about pasting it into the decompress.bat file? Edit: formatting"}, {"owner": {"reputation": 957, "user_id": 9632774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zP3nO.png?s=128&g=1", "display_name": "CrafterKolyan", "link": "https://stackoverflow.com/users/9632774/crafterkolyan"}, "edited": false, "score": 0, "creation_date": 1560987111, "post_id": 56677085, "comment_id": 99921141, "body": "Exactly as you do it now. With <code>f1.write(line)</code>"}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1560987168, "post_id": 56677085, "comment_id": 99921152, "body": "Seems like you could simplify this process by directly calling ds9.exe from python, rather than writing out bat files - or is the process more complex than this?"}, {"owner": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "reply_to_user": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1560987242, "post_id": 56677085, "comment_id": 99921174, "body": "@Blorgbeard I am fairly new to python so I am not sure how to go about doing this. Could you point me in the right direction?"}, {"owner": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "reply_to_user": {"reputation": 957, "user_id": 9632774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zP3nO.png?s=128&g=1", "display_name": "CrafterKolyan", "link": "https://stackoverflow.com/users/9632774/crafterkolyan"}, "edited": false, "score": 0, "creation_date": 1560987358, "post_id": 56677085, "comment_id": 99921201, "body": "@CrafterKolyan Okay thank you for your help. It will make things easier to just use Python. Do you have any pointers as how I should go about adding the specific strings to the bat file?"}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1560987378, "post_id": 56677085, "comment_id": 99921209, "body": "Is the process basically: execute <code>ds9.exe {path&#47;to&#47;filename.fits.fz} -savefits</code> for every file matching <code>*.fits.fz</code>?"}, {"owner": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "reply_to_user": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1560987420, "post_id": 56677085, "comment_id": 99921223, "body": "@Blorgbeard Yes that&#39;s exactly what it does."}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1560987668, "post_id": 56677085, "comment_id": 99921274, "body": "OK - that can be done in a one-liner batch file, or a few more lines (but more readable lines) of python. Examples: <a href=\"https://stackoverflow.com/questions/14237548/batch-script-run-command-on-each-file-in-directory\">batch file</a>, <a href=\"https://stackoverflow.com/questions/1120707/using-python-to-execute-a-command-on-every-file-in-a-folder/1120736\">python</a>"}, {"owner": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "reply_to_user": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1560987775, "post_id": 56677085, "comment_id": 99921292, "body": "@Blorgbeard Okay I will try this out now. Thank you so much"}, {"owner": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "reply_to_user": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1560988098, "post_id": 56677085, "comment_id": 99921354, "body": "@Blorgbeard I am sorry, I really am new to Python and this is my first time creating a program like this. Could you help me to understand how I would go about doing this with a few more lines of Python code? Thank you so much."}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1560988149, "post_id": 56677085, "comment_id": 99921361, "body": "I added an answer which I think should work. Take a look!"}, {"owner": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "reply_to_user": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1560988964, "post_id": 56677085, "comment_id": 99921507, "body": "@Blorgbeard I&#39;m trying to implement it right now. I don&#39;t see anything happening though. Do I need to replace &quot;filename&quot; or &quot;os.path.abspath&quot;? Edit: Is there anything else I need to add? I&#39;m very sorry and thank you so much for being so helpful!"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "edited": false, "score": 0, "creation_date": 1560988742, "post_id": 56677279, "comment_id": 99921472, "body": "I&#39;m trying to implement it right now. I don&#39;t see anything happening though. Do I need to replace &quot;filename&quot; or &quot;os.path.abspath&quot;?"}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "reply_to_user": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "edited": false, "score": 0, "creation_date": 1560989565, "post_id": 56677279, "comment_id": 99921606, "body": "That&#39;s odd. I&#39;m currently on linux, and I obviously don&#39;t have <code>ds9.exe</code>, but from my testing it should work. Do you see no output at all?"}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "reply_to_user": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "edited": false, "score": 0, "creation_date": 1560989656, "post_id": 56677279, "comment_id": 99921628, "body": "Oh, it might be the backslashes in the string, try adding the <code>r</code> that I just edited in."}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "reply_to_user": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "edited": false, "score": 0, "creation_date": 1560989867, "post_id": 56677279, "comment_id": 99921659, "body": "Ah, and this is working on the current directory - you might have to pass the directory with the files in it to <code>listdir()</code>."}, {"owner": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "edited": false, "score": 0, "creation_date": 1560990002, "post_id": 56677279, "comment_id": 99921683, "body": "Yes that was it. I also just needed to edit the file path. &quot;C:/SAOImageDS9/ds9.exe&quot;"}, {"owner": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "edited": false, "score": 0, "creation_date": 1560990049, "post_id": 56677279, "comment_id": 99921693, "body": "I am having an issue where once the program runs, DS9 is telling me that it cannot load the image. I don&#39;t know if it&#39;s looking in the right directory"}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "reply_to_user": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "edited": false, "score": 0, "creation_date": 1560990165, "post_id": 56677279, "comment_id": 99921707, "body": "You could add a <code>print(os.path.abspath(filename))</code> before the call to make sure it&#39;s passing the right path."}, {"owner": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "edited": false, "score": 0, "creation_date": 1560990787, "post_id": 56677279, "comment_id": 99921833, "body": "For some reason it keeps searching in the cwd. I added all of your changes and it won&#39;t work for some reason."}, {"owner": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "edited": false, "score": 0, "creation_date": 1560991085, "post_id": 56677279, "comment_id": 99921889, "body": "I also added in <code>print(os.path.abspath(filename))</code> and it just keeps going to the cwd. if you want you can email me at zteagarden@gmail.com"}, {"owner": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "edited": false, "score": 0, "creation_date": 1560991842, "post_id": 56677279, "comment_id": 99921982, "body": "The program opens DS9 and everything, but is being really stubborn about looking for files in the cwd."}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "reply_to_user": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "edited": false, "score": 0, "creation_date": 1560992415, "post_id": 56677279, "comment_id": 99922066, "body": "Hmm, is it DS9 that&#39;s complaining? Can you see the print output? Does it look right? If you&#39;re running this from your Tkinter program, maybe try just executing it as a standalone script on the command line."}, {"owner": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "edited": false, "score": 0, "creation_date": 1560994036, "post_id": 56677279, "comment_id": 99922325, "body": "Whoooo. It actually worked. I had this idea that seemed crazy, but I noticed that it was seeing the files, but was attempting to open them in the cwd. I simply moved the file to the directory where the fz files were and boom it worked. DS9 is opening and closing and it appears to be saving each image.  The only issue is that I can&#39;t tell where the images are being saved."}, {"owner": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "edited": false, "score": 0, "creation_date": 1560994593, "post_id": 56677279, "comment_id": 99922417, "body": "This is the command I would be using for a batch file. <code>C:\\ds9\\ds9.exe C:\\Directory\\ogg0m404-kb82-20190616-0148-e91.fits.fz -savefits C:\\Directory\\ogg0m404-kb82-20190616-0148-e91.fits  -exit</code> The difference here is that the batch file tells DS9 to save it as .fits whereas the Python code does not. Is there anything I can do to add this to the Python program?"}, {"owner": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "edited": false, "score": 0, "creation_date": 1560996017, "post_id": 56677279, "comment_id": 99922661, "body": "I just searched my entire PC for the files, but they have not been saving for some reason. I think I might need your help. Thank you so much for donating so much of your time to my project. I really appreciate it."}, {"owner": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "edited": false, "score": 0, "creation_date": 1561006324, "post_id": 56677279, "comment_id": 99924490, "body": "Ok I fixed it. It took a long time and it&#39;s low key weird, but I&#39;ll give you the code so that you can write the answer because you deserve to have it."}, {"owner": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "edited": false, "score": 0, "creation_date": 1561006455, "post_id": 56677279, "comment_id": 99924521, "body": "<code>target_directory = &#39;C:&#47;Directorty&#47;&#39; # change this as required target_write_directory = &#39;C:&#47;Directory&#47;&#39; zipped_files = [x for x in os.listdir(target_directory)if x.lower().endswith(&#39;.fits.fz&#39;)]     for filename in zipped_files:         print(os.path.abspath(filename))         subprocess.call([r&#39;C:&#47;SAOImageDS9&#47;ds9.exe&#39;, os.path.abspath(filename), &#39;-savefits&#39;, os.path.abspath(target_write_directory + filename[:-3]), &#39;-exit&#39;])</code>"}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "reply_to_user": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "edited": false, "score": 0, "creation_date": 1561044473, "post_id": 56677279, "comment_id": 99944044, "body": "Hey great to see you figured it out! It seems like the changes you had to make were because of how ds9.exe works - I&#39;ll leave the answer as it is since it matches the original question more closely, I think. Interesting that you had to move the file to the working folder though, not sure why that would be."}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "reply_to_user": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "edited": false, "score": 0, "creation_date": 1561044514, "post_id": 56677279, "comment_id": 99944074, "body": "BTW, you can mark this answer as &quot;accepted&quot; (and the question as &quot;answered&quot;) by clicking the check-mark beside the answer :)"}], "tags": [], "owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "is_accepted": true, "score": 0, "last_activity_date": 1560990005, "last_edit_date": 1560990005, "creation_date": 1560988092, "answer_id": 56677279, "question_id": 56677085, "link": "https://stackoverflow.com/questions/56677085/how-do-i-copy-specific-strings-from-a-text-file-with-python/56677279#56677279", "title": "How do I copy specific strings from a text file with python?", "body": "<p>I think in Python, something like this would do the trick, without writing out batch files etc.</p>\n\n<pre><code>import os\nimport subprocess\n\ntarget_directory = 'C:\\\\directory\\\\' # change this as required\nzipped_files = [x for x in os.listdir(target_directory) \n                   if x.lower().endswith('.fits.fz')]\nfor filename in zipped_files:\n    subprocess.call([r'C:\\ds9\\ds9.exe', os.path.abspath(filename), '-savefits'])\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11570241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AfgXjFPGw1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQP5xgSIU1MFtDIhWizBM-VDsxLQ/mo/photo.jpg?sz=128", "display_name": "Zach042", "link": "https://stackoverflow.com/users/11570241/zach042"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 889, "favorite_count": 0, "accepted_answer_id": 56677279, "answer_count": 1, "score": 0, "last_activity_date": 1560990005, "creation_date": 1560986363, "last_edit_date": 1560987020, "question_id": 56677085, "link": "https://stackoverflow.com/questions/56677085/how-do-i-copy-specific-strings-from-a-text-file-with-python", "title": "How do I copy specific strings from a text file with python?", "body": "<p>I am working in the field of astronomy, and the process that I use to unzip the images that I get from the telescopes can be very tedious. The format that the images come in is 'fits.fz' which stands for fits.fits-zipped. I want to decompress these into just '.fits'. I have already I'm working on a program that simplifies this process of decompressing. I have created a graphical interface with two buttons through Python and Tkinter. The first button creates a text file named 'list.txt' and then executes a pre-existing .bat file which dumps the names of every file in a specific directory that ends with 'fits.fz' into 'list.txt'. The first button is also supposed to copy the specific names of the files into a very specific place in another bat file. The other .bat file is called 'Decompress.bat' and is supposed to use the following command for each file in 'list.txt': </p>\n\n<pre><code> C:\\ds9\\ds9.exe \n C:\\directory\\FITS FILE HERE \n-savefits\n</code></pre>\n\n<p>I would like for the python program to be able to copy specific sections from a line of code and paste them where 'FITS FILE HERE' is. </p>\n\n<p>The following is the function that is executed when the first button is pressed.</p>\n\n<pre><code> f = open('C:/jah/list.txt')\n f1 = open('C:/jah/decompress.bat', 'a')\n\n def begin_wombocombo(): #Is function for first button\n     open('C:/jah/list.txt', 'w').close() #Clears 'list.txt'\n     open('C:/jah/decompress.bat', 'w').close() #Clears 'decompress.bat'\n     subprocess.call([r'C:/jah/newbat.bat']) #Dumps directory into 'list.txt'\n\n     doIHaveToCopyTheLine=False #Bool for whether or not the program has to copy line\n     for line in f.readlines(): #loops through all instances to find fz files and then pastes them into decompress.bat\n       if 'fits.fz' in line:\n         doIHaveToCopyTheLine=True\n       if doIHaveToCopyTheLine:\n         f1.write(line)\n     f1.close()\n     f.close()\n</code></pre>\n\n<p>The issue with this is that it only copies the lines of text that has the fits.fz files. This means that it copies everything else on the line such as when the file was created. Is there any way to simply copy and paste the fits.fz file alone? How would I go about working these strings into the .bat file?</p>\n\n<p>Thank you for your time, and btw the second button just executes 'decompress.bat' which is the file with the commands to unzip the images.</p>\n"}, {"tags": ["python", "user-interface", "tkinter"], "answers": [{"comments": [{"owner": {"reputation": 134, "user_id": 9731205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5747e5eb5a5abbac813585cbef67a8f?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/9731205/dan"}, "edited": false, "score": 0, "creation_date": 1560987323, "post_id": 56677136, "comment_id": 99921192, "body": "Dude you&#39;re a freaking genius, this totally worked! Thank you bruv :)"}, {"owner": {"reputation": 134, "user_id": 9731205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5747e5eb5a5abbac813585cbef67a8f?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/9731205/dan"}, "edited": false, "score": 0, "creation_date": 1560987667, "post_id": 56677136, "comment_id": 99921273, "body": "Do you happen to have an idea of how to add ticks as well?"}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "reply_to_user": {"reputation": 134, "user_id": 9731205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5747e5eb5a5abbac813585cbef67a8f?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/9731205/dan"}, "edited": false, "score": 0, "creation_date": 1560987768, "post_id": 56677136, "comment_id": 99921290, "body": "@Dan I don&#39;t know what you mean with &quot;ticks&quot;. However it sounds like an unrelated question, so you should give it a try yourself and make a new post if you need help."}], "tags": [], "owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "is_accepted": true, "score": 2, "last_activity_date": 1560986822, "creation_date": 1560986822, "answer_id": 56677136, "question_id": 56677084, "link": "https://stackoverflow.com/questions/56677084/how-to-use-gui-tkinter-button-to-increment-a-number-and-display-it/56677136#56677136", "title": "How to use GUI Tkinter button to increment a number and display it", "body": "<p>You need to increment the number, like you do, but also update the Label to display the new number: </p>\n\n<pre><code>from tkinter import *\nnumber = 0\n\nwindow = Tk()\nwindow.title(\"Programme\")\nwindow.geometry('350x250')\n\nlabel = Label(window, text=number)\nlabel.grid(column=0,row=0)\n\ndef clicked():\n    global number\n    number += 1\n    label.config(text=number)\n\nbutton = Button(window, text=\"Push Me\", command=clicked)\nbutton.grid(column=1, row=2)\n\nwindow.mainloop()\n</code></pre>\n\n<p>An easier way to do this is to use tkinter's version of an integer: <code>IntVar</code>. It takes care of the Label updates automatically, but it requires you use <code>get()</code> and <code>set()</code> to work with it. </p>\n\n<pre><code>from tkinter import *\n\ndef clicked():\n    number.set(number.get()+1)\n\nwindow = Tk()\nwindow.title(\"Programme\")\nwindow.geometry('350x250')\nnumber = IntVar()\n\nlabel = Label(window, textvariable=number)\nlabel.grid(column=0,row=0)\n\nbutton = Button(window, text=\"Push Me\", command=clicked)\nbutton.grid(column=1, row=2)\n\nwindow.mainloop()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14356991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f67bda1eca64c333a38d85624836b48f?s=128&d=identicon&r=PG", "display_name": "An\u0131lcan", "link": "https://stackoverflow.com/users/14356991/an%c4%b1lcan"}, "is_accepted": false, "score": 0, "last_activity_date": 1614566630, "last_edit_date": 1614566630, "creation_date": 1601321055, "answer_id": 64108384, "question_id": 56677084, "link": "https://stackoverflow.com/questions/56677084/how-to-use-gui-tkinter-button-to-increment-a-number-and-display-it/64108384#64108384", "title": "How to use GUI Tkinter button to increment a number and display it", "body": "<p>Here is my entire code:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from tkinter import *\n\ndef up():\n    number.set(number.get()+1)\n\ndef down():\n    number.set(number.get()-1)\n\nwindow = Tk()\nwindow.title(&quot;Programme&quot;)\nwindow.geometry('350x250')\nnumber = IntVar()\n\nframe = Frame(window)\nframe.pack()\n\nentry = Entry(frame, textvariable=number, justify='center')\nentry.pack(side=LEFT, ipadx=15)\n\nbuttonframe = Frame(entry)\nbuttonframe.pack(side=RIGHT)\n\nbuttonup = Button(buttonframe, text=&quot;\u25b2&quot;, font=&quot;none 5&quot;, command=up)\nbuttonup.pack(side=TOP)\n\nbuttondown = Button(buttonframe, text=&quot;\u25bc&quot;, font=&quot;none 5&quot;, command=down)\nbuttondown.pack(side=BOTTOM)\n\nwindow.mainloop()\n</code></pre>\n<p>It looks better for me when the buttons are inside of the entry widget directly.</p>\n"}], "owner": {"reputation": 134, "user_id": 9731205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5747e5eb5a5abbac813585cbef67a8f?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/9731205/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1063, "favorite_count": 0, "accepted_answer_id": 56677136, "answer_count": 2, "score": 0, "last_activity_date": 1614566630, "creation_date": 1560986363, "last_edit_date": 1560988365, "question_id": 56677084, "link": "https://stackoverflow.com/questions/56677084/how-to-use-gui-tkinter-button-to-increment-a-number-and-display-it", "title": "How to use GUI Tkinter button to increment a number and display it", "body": "<p>I'm new to trying out python GUI's and tried tkinter and pyglet, but only through tutorials, in-order-to understand the basic classes and functions. But what I'm currently trying to do is to get a button to increase a number whilst displaying that number at the same time. Somehow, even though the variable number was stated globally as 0, the function to increase it doesn't do anything, it actually produces an error: 'UnboundLocalError: local variable 'number' referenced before assignment'. I have no idea how to correct this.</p>\n\n<p>The tutorials I've seen on both YouTube and as an article, don't talk about how to do this exactly. The article does mention how to change a certain text though, but not a previously created variable (which in my case would be 'number').</p>\n\n<pre><code>from tkinter import *\nnumber = 0\n\nwindow = Tk()\nwindow.title(\"Programme\")\nwindow.geometry('350x250')\n\nlabel = Label(window, text=number)\nlabel.grid(column=0,row=0)\n\ndef clicked():\nnumber += 1\n\nbutton = Button(window, text=\"Push Me\", command=clicked)\nbutton.grid(column=1, row=2)\n\nwindow.mainloop()\n</code></pre>\n\n<p>Is there any way to do this?\nAlso I've been looking for how to add time, to handle events and such, through ticks. But everything I find on the internet is about literally displaying a clock on the GUI, which is useless, or at least I don't know how to use it to have a ticking function.</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1560987189, "post_id": 56677076, "comment_id": 99921157, "body": "Give some concrete examples.  It&#39;s hard to picture what you are doing otherwise.  While I probably could construct some examples myself, I&#39;d rather you did the work."}, {"owner": {"reputation": 808, "user_id": 2169599, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/870b0cd25aa918ca527591a1a8177fbd?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/2169599/jan"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1560994081, "post_id": 56677076, "comment_id": 99922330, "body": "@hpaulj Thanks for taking the time. I added a concrete example"}], "answers": [{"comments": [{"owner": {"reputation": 808, "user_id": 2169599, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/870b0cd25aa918ca527591a1a8177fbd?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/2169599/jan"}, "edited": false, "score": 0, "creation_date": 1561048982, "post_id": 56678352, "comment_id": 99946457, "body": "This adds a lot of clarity to the issue, I especially didn&#39;t know about np.ix_ and the <b>setitem</b> restriction mentioned in the last paragraph, thanks a lot for your explanations!"}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 1, "last_activity_date": 1561000731, "last_edit_date": 1561000731, "creation_date": 1560999393, "answer_id": 56678352, "question_id": 56677076, "link": "https://stackoverflow.com/questions/56677076/np-squeeze-for-assignments/56678352#56678352", "title": "np.squeeze for assignments", "body": "<pre><code>In [44]: data = np.arange(40).reshape(10,4)                                               \n</code></pre>\n\n<p>By making the first index (4,1) shape, we can index with various sized second arrays:</p>\n\n<pre><code>In [46]: data[np.arange(4)[:,None],[2]]                                                   \nOut[46]: \narray([[ 2],\n       [ 6],\n       [10],\n       [14]])\nIn [47]: data[np.arange(4)[:,None],[1,2]]                                                 \nOut[47]: \narray([[ 1,  2],\n       [ 5,  6],\n       [ 9, 10],\n       [13, 14]])\n</code></pre>\n\n<p>The first result is (4,1) shape, the second (4,2).</p>\n\n<p>With the <code>squeeze</code> we get (4,), the equivalent of indexing:</p>\n\n<pre><code>In [48]: data[np.arange(4),2]                                                             \nOut[48]: array([ 2,  6, 10, 14])\n</code></pre>\n\n<p><code>np.ix_</code> generates similar sets of indices, e.g. (4,1) and (1,2)</p>\n\n<pre><code>In [49]: np.ix_(np.arange(4),[1,2])                                                       \nOut[49]: \n(array([[0],\n        [1],\n        [2],\n        [3]]), array([[1, 2]]))\n</code></pre>\n\n<p>and (4,1) with (1,1):</p>\n\n<pre><code>In [50]: np.ix_(np.arange(4),[2])                                                         \nOut[50]: \n(array([[0],\n        [1],\n        [2],\n        [3]]), array([[2]]))\n</code></pre>\n\n<p>(m,1) broadcasts with a (1,n) to produce a (m,n) result.  (n,) works just as well as (1,n) - again the broadcasting rules.</p>\n\n<p>With change you want to assign a value to that (m,n) block.  In this case a (4,2) works, as does a (4,1).  But you'd like to assign a (4,).  But by broadcasting the (4,) can broadcast to (1,4), but not to (4,1).  It can add a leading dimension, but not a trailing one.</p>\n\n<pre><code>In [51]: data[np.arange(4)[:,None],[2]]=np.ones(4)                                        \n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-51-9245de6331ce&gt; in &lt;module&gt;\n----&gt; 1 data[np.arange(4)[:,None],[2]]=np.ones(4)\n\nValueError: shape mismatch: value array of shape (4,) could not be \n    broadcast to indexing result of shape (4,1)\nIn [52]: data[np.arange(4)[:,None],[2]] = np.ones((4,1))    # (4,1) into (4,1)\n# (4,1) also goes into a (4,2)\nIn [53]: data[np.arange(4),[2]] = np.ones(4)   # (4,) into (4,)\nIn [55]: data[np.arange(4)[:,None],[1,2]] = np.zeros(2)  # (2,) into (4,2) \n</code></pre>\n\n<p><code>flat</code> can be used to assign values in a 1d manner, but it doesn't work here because  <code>data[np.arange(4)[:,None],[1,2]]</code> is a copy if it is used in any way except directly in the <code>__setitem__</code> case, <code>data[...] = ...</code>.</p>\n"}], "owner": {"reputation": 808, "user_id": 2169599, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/870b0cd25aa918ca527591a1a8177fbd?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/2169599/jan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4003, "favorite_count": 0, "accepted_answer_id": 56678352, "answer_count": 1, "score": 1, "last_activity_date": 1561000731, "creation_date": 1560986282, "last_edit_date": 1560994055, "question_id": 56677076, "link": "https://stackoverflow.com/questions/56677076/np-squeeze-for-assignments", "title": "np.squeeze for assignments", "body": "<p>I have <code>t.shape=(M, N)</code> and now I would like to assign new values <code>v</code> to a part of the array, which is indexed with variables <code>m</code> and <code>n</code>. <code>m</code> is an array and <code>n</code> either <code>int</code> or an array as well. \nI do <code>m=m.reshape(-1, 1)</code> in case <code>n</code> is an array. This works well for access like</p>\n\n<pre><code>t[m, n]\n</code></pre>\n\n<p>I can then use</p>\n\n<pre><code>np.squeeze(t[m, n])\n</code></pre>\n\n<p>to remove the additional dimension that was added before (if <code>n</code> is <code>int</code>).</p>\n\n<p>However, if I do </p>\n\n<pre><code>t[m, n] = v\n</code></pre>\n\n<p>it won't work because if <code>n</code> is <code>int</code>, <code>v.shape=(m.size,)</code>, i.e. <code>v</code> has only a single dimension. I could check if <code>n</code> is an integer and change logic accordingly (either not adding a dimension to <code>m</code> or adding one to <code>v</code> as well). </p>\n\n<p>Is there a more elegant solution to this (<code>np.squeeze(t[m, n]) = v</code> would be nice but obviously that's not how it works)? </p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Concrete example:</p>\n\n<pre><code>def change_data(data, slices, channels, values):\n    data[slices.reshape(-1, 1), channels] = values\n\ndata = np.random.randint(low=0, high=10, size=(10, 4))\nslices = np.arange(4)\nchannels = [2]\nvalues = np.squeeze(np.random.randint(low=0, high=10, size=(slices.size, len(channels)))) # The values come as a list\ntry:\n    change_data(data, slices, channels, values) # Does not work\n    print(\"Single channel does work\")\nexcept:\n    print(\"Single channel does not work\")\nchannels = [1, 2]\nvalues = np.squeeze(np.random.randint(low=0, high=10, size=(slices.size, len(channels))))\ntry:\n    change_data(data, slices, channels, values) # Works\n    print(\"Multi channel does work\")\nexcept:\n    print(\"Multi channel does not work\")\n</code></pre>\n\n<p>It looks a bit ridiculous in this simple example as I have an extra <code>np.squeeze</code> operation here, but depending on how many dimensions the array has, this can be a bit cumbersome, hence if I could just \"squeeze\" the index selection, the problem would be solved. I hope it is clearer now...</p>\n"}, {"tags": ["python", "matlab", "performance"], "comments": [{"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1560986890, "post_id": 56677073, "comment_id": 99921085, "body": "The linked Q&amp;A don\u2019t mention the reason for your difference: MATLAB has a JIT, Python doesn\u2019t. You might be able to accelerate your Python code with <a href=\"https://numba.pydata.org/\" rel=\"nofollow noreferrer\">Numba</a>."}, {"owner": {"reputation": 101, "user_id": 11554376, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XmOCjM32KLM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdhpXbzN2nU_KF8ivFmnAD2UAnt8A/mo/photo.jpg?sz=128", "display_name": "ashish-ucsb", "link": "https://stackoverflow.com/users/11554376/ashish-ucsb"}, "edited": false, "score": 0, "creation_date": 1560987473, "post_id": 56677073, "comment_id": 99921237, "body": "You may remove <code>U = np.zeros(3)</code>, <code>V = np.zeros(3)</code>, <code>U = [0,0,1]</code> , <code>V = [0,1,0]</code> and replace it with <code>U = np.array([0,0,1])</code> and <code>V = np.array([0,1,0])</code>"}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1560987514, "post_id": 56677073, "comment_id": 99921248, "body": "I have replaced the original duplicate target with two other ones that I think will be more useful to you."}, {"owner": {"reputation": 43, "user_id": 11673062, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-n5mGi-CxWEk/AAAAAAAAAAI/AAAAAAAAFEQ/sCjs6CseMmE/photo.jpg?sz=128", "display_name": "Davood Norouzi", "link": "https://stackoverflow.com/users/11673062/davood-norouzi"}, "edited": false, "score": 0, "creation_date": 1560988450, "post_id": 56677073, "comment_id": 99921413, "body": "Could someone explain to me how to vectorize that one summation in python. I have both numpy functions and math functions. Thanks."}], "owner": {"reputation": 43, "user_id": 11673062, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-n5mGi-CxWEk/AAAAAAAAAAI/AAAAAAAAFEQ/sCjs6CseMmE/photo.jpg?sz=128", "display_name": "Davood Norouzi", "link": "https://stackoverflow.com/users/11673062/davood-norouzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "closed_date": 1560986725, "answer_count": 0, "score": 0, "last_activity_date": 1560988187, "creation_date": 1560986253, "last_edit_date": 1560988187, "question_id": 56677073, "link": "https://stackoverflow.com/questions/56677073/why-python-performance-speed-is-so-bad-much-slower-than-matlab", "closed_reason": "Duplicate", "title": "Why Python Performance/Speed is so Bad (much slower than Matlab)?", "body": "<p>I develop scientific software/code. I decided to move to Python, but Python's performance for mathematical functions is really bad (slow). So much so, that it is basically unusable. </p>\n\n<p>Below, the same code is written in Matlab and Python. Only four math functions (sign, dot product, cross product, and arcsin) are used. The Matlab code runs in ~6 sec while the python code takes ~400 sec. Is there any trick to fix this?</p>\n\n<h1>python code:</h1>\n\n<pre><code>import numpy as np\nimport math\nimport time\n\nstart_time = time.time()\n\nOmg = 0\nU = np.zeros(3)\nV = np.zeros(3)\nU = [0,0,1]\nV = [0,1,0]\nfor i in range(0, 10000000):\n    Omg = Omg + np.sign(np.dot(U, V)) + np.cross(U,V) * math.asin(1/(i+1))\n\nprint(Omg)\nprint(\"--- %s seconds ---\" % (time.time() - start_time))\n</code></pre>\n\n<h1>Matlab code:</h1>\n\n<pre><code>clc\nclear\n\nOmg = 0;\n\nU = [0,0,1];\nV = [0,1,0];\n\ntic\n\nfor i = 1:10000000\n    Omg = Omg + sign(dot(U, V)) + cross(U,V) .* asin(1/(i));\nend\n\ntoc\n\ndisp(Omg);\n</code></pre>\n\n<p>Should I forget python?</p>\n"}, {"tags": ["python", "integer", "limit", "boundary", "bounded-types"], "answers": [{"tags": [], "owner": {"reputation": 2677, "user_id": 5049813, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/24c885a2c774f7375807e048793cffa3?s=128&d=identicon&r=PG&f=1", "display_name": "Pro Q", "link": "https://stackoverflow.com/users/5049813/pro-q"}, "is_accepted": true, "score": 0, "last_activity_date": 1562523508, "last_edit_date": 1562523508, "creation_date": 1560986092, "answer_id": 56677054, "question_id": 56677041, "link": "https://stackoverflow.com/questions/56677041/how-can-i-create-a-bounded-int-in-python/56677054#56677054", "title": "How can I create a bounded int in Python?", "body": "<p>Try this. It should work both for <code>int</code>s and <code>float</code>s:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def BoundedNumber(number_class):\n    def BoundedNumberClassCreator(class_name, lower_bound, upper_bound):\n        if upper_bound and lower_bound and upper_bound &lt; lower_bound:\n            raise ValueError(f\"Upper bound {upper_bound} is lower than the lower bound {lower_bound}\")\n\n        def new(cls, number):\n            if lower_bound and number &lt; lower_bound:\n                raise ValueError(f\"{number} is below the lower bound of {lower_bound} for this class\")\n\n            if upper_bound and upper_bound &lt; number:\n                raise ValueError(f\"{number} is above the upper bound of {upper_bound} for this class\")\n\n            return number_class(number)\n\n        return type(class_name, (number_class,),\n                    {\"__new__\": new,\n                     \"__doc__\": f\"Class that acts like `{number_class.__name__}` but has an inclusive lower bound of {lower_bound} and an inclusive upper bound of {upper_bound}\",\n                     \"lower_bound\": lower_bound,\n                     \"upper_bound\": upper_bound})\n\n    return BoundedNumberClassCreator\n\nBoundedInt = BoundedNumber(int)\nBoundedFloat = BoundedNumber(float)\n\nif __name__ == \"__main__\":\n    IntBetween50And150 = BoundedInt('IntBetween50And150', 50, 150)\n    print(IntBetween50And150(100) == 100)  # True\n    try:\n        IntBetween50And150(200)\n    except ValueError as e:\n        print(f\"Caught the ValueError: {e}\")  # Caught the value error: 200 is above the upper bound of 150 for this class\n\n    print(IntBetween50And150(50.5))  # 50\n    print(IntBetween50And150.__doc__) # Class that acts like `int` but has an inclusive lower bound of 50 and an inclusive upper bound of 150\n</code></pre>\n\n<p>The hard part with subclassing from <code>int</code> is that it doesn't have an <code>__init__</code> function. Instead, you have to use the <code>__new__</code> function.</p>\n\n<p>The <code>BoundedNumber</code> class takes care of this, defining a <code>__new__</code> function that both runs the <code>int</code> (or <code>float</code>) <code>__new__</code> function by calling <code>int</code> (or <code>float</code>), but also runs its own checks on the bounds before doing so.</p>\n\n<p>Since we want to dynamically create a new class, we're going to have to use the <code>type</code> function. This will allow us to create a new class with whatever bounds we want during runtime.</p>\n\n<p>Technically, to answer your question, you only need the <code>BoundedNumberClassCreator</code> with <code>int</code> put in everywhere that the <code>number_class</code> is used, but since it works for <code>float</code>s as well, I figured I'd encapsulate it to reduce duplicate code.</p>\n\n<p>One odd thing about this solution if if you <code>ZeroToOne = BoundedInt('ZeroToOne', 0, 1)</code> and then create <code>i = ZeroToOne(1.1)</code> it will throw an error, even though <code>int(1.1)</code> is within the designated range. If you don't like this functionality, you can swap the order of the checks and the return inside of the <code>new</code> method of the <code>BoundedNumberClassCreator</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 2677, "user_id": 5049813, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/24c885a2c774f7375807e048793cffa3?s=128&d=identicon&r=PG&f=1", "display_name": "Pro Q", "link": "https://stackoverflow.com/users/5049813/pro-q"}, "edited": false, "score": 0, "creation_date": 1560989826, "post_id": 56677436, "comment_id": 99921653, "body": "I&#39;d like it to subclass from <code>int</code>, if possible (for example, see <a href=\"https://stackoverflow.com/a/56677054/5049813\">my answer</a>)"}], "tags": [], "owner": {"reputation": 101, "user_id": 11554376, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XmOCjM32KLM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdhpXbzN2nU_KF8ivFmnAD2UAnt8A/mo/photo.jpg?sz=128", "display_name": "ashish-ucsb", "link": "https://stackoverflow.com/users/11554376/ashish-ucsb"}, "is_accepted": false, "score": 0, "last_activity_date": 1560989642, "creation_date": 1560989642, "answer_id": 56677436, "question_id": 56677041, "link": "https://stackoverflow.com/questions/56677041/how-can-i-create-a-bounded-int-in-python/56677436#56677436", "title": "How can I create a bounded int in Python?", "body": "<p>This is right off the bat, not many errors are handled.</p>\n\n<pre><code>class boundedInt:\n\n    def __init__(self, lower, upper):\n        self.x = None\n        if (lower &lt;= upper):\n            self.lower = lower\n            self.upper = upper\n        else:\n            raise ValueError(\"Lower Bound must be lesser than Upper Bound\".format())  \n\n    def assign(self, x):\n        if (x&gt;= self.lower and x&lt;=self.upper):\n            self.x = x\n            return self.x\n        else:\n            raise ValueError(\"Not in bounds\")\n\nmyInt = boundedInt(15,20) # create object myInt\nf = myInt.assign(17) # assigns value to a variable\n</code></pre>\n"}], "owner": {"reputation": 2677, "user_id": 5049813, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/24c885a2c774f7375807e048793cffa3?s=128&d=identicon&r=PG&f=1", "display_name": "Pro Q", "link": "https://stackoverflow.com/users/5049813/pro-q"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 989, "favorite_count": 0, "accepted_answer_id": 56677054, "answer_count": 2, "score": 0, "last_activity_date": 1562523567, "creation_date": 1560986020, "last_edit_date": 1562523567, "question_id": 56677041, "link": "https://stackoverflow.com/questions/56677041/how-can-i-create-a-bounded-int-in-python", "title": "How can I create a bounded int in Python?", "body": "<p>I want to create a class that subclasses from <code>int</code>, but sets a lower bound and upper bound on what number it can be be.</p>\n\n<p>For example, if the lower bound is <code>2</code>, then <code>a = MyClass(1)</code> should raise an exception.</p>\n\n<p>I'm struggling because <code>int</code> doesn't seem to have an <code>__init__</code> function, so I'm not sure how to subclass from it, and my attempts are giving me errors.</p>\n\n<p>How should I go about doing this?</p>\n"}, {"tags": ["python", "sqlite", "heroku"], "comments": [{"owner": {"reputation": 91789, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 0, "creation_date": 1560988712, "post_id": 56677029, "comment_id": 99921462, "body": "It looks like you already know not to use <code>manage.py runserver</code> in production. Once you get your application working migrating to <code>gunicorn</code> or similar, as you suggest, is probably a good idea."}, {"owner": {"reputation": 327, "user_id": 3445896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8414d92b7d35c255f9ae2693ef4f5ae?s=128&d=identicon&r=PG&f=1", "display_name": "shardy", "link": "https://stackoverflow.com/users/3445896/shardy"}, "edited": false, "score": 4, "creation_date": 1561032807, "post_id": 56677029, "comment_id": 99936903, "body": "I have raised the concern with the heroku team and the suspect the new security patch released 15 hrs ago for SQLite is causing the issue   <code>I&#39;ve been taking a look and I see that a new version of the SQLite3 package for Xenial was released 15 hours ago with some security fixes. This package is installed by the Python buildpack, and I think this could be related to the installation errors in the build. </code>"}, {"owner": {"reputation": 8718, "user_id": 84128, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d1f63052c6046eb99e8ade3925a100d8?s=128&d=identicon&r=PG", "display_name": "Eric Conner", "link": "https://stackoverflow.com/users/84128/eric-conner"}, "edited": false, "score": 3, "creation_date": 1561067895, "post_id": 56677029, "comment_id": 99953978, "body": "I managed to get our app to build by forking the heroku buildpack and commenting out the part that installs sqlite3 and replacing the official buildpack. We just run some python scripts so I don&#39;t even know why it is installing SQLite3.... <a href=\"https://github.com/econner/heroku-buildpack-python\" rel=\"nofollow noreferrer\">github.com/econner/heroku-buildpack-python</a>"}, {"owner": {"reputation": 16137, "user_id": 2026508, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d76e464967fe7ab0b42754ae5401d3ba?s=128&d=identicon&r=PG&f=1", "display_name": "jmunsch", "link": "https://stackoverflow.com/users/2026508/jmunsch"}, "reply_to_user": {"reputation": 8718, "user_id": 84128, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d1f63052c6046eb99e8ade3925a100d8?s=128&d=identicon&r=PG", "display_name": "Eric Conner", "link": "https://stackoverflow.com/users/84128/eric-conner"}, "edited": false, "score": 0, "creation_date": 1561070589, "post_id": 56677029, "comment_id": 99954601, "body": "@EricConner just wanted to double check, so you replaced <code>&quot;buildpacks&quot;: [{&quot;url&quot;: &quot;https:&#47;&#47;github.com&#47;heroku&#47;heroku-buildpack-python&quot;}</code> with <code>&quot;buildpacks&quot;: [{&quot;url&quot;: &quot;https:&#47;&#47;github.com&#47;&lt;your_fork_with_changes&gt;&#47;heroku-buildpac&zwnj;&#8203;k-python&quot;}</code>in the <code>app.json</code> ? And, The changes being from : <a href=\"https://github.com/econner/heroku-buildpack-python/commit/cbf78e29ade9866a427386a2d412961f89f7b631\" rel=\"nofollow noreferrer\">github.com/econner/heroku-buildpack-python/commit/&hellip;</a> ?"}, {"owner": {"reputation": 16137, "user_id": 2026508, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d76e464967fe7ab0b42754ae5401d3ba?s=128&d=identicon&r=PG&f=1", "display_name": "jmunsch", "link": "https://stackoverflow.com/users/2026508/jmunsch"}, "reply_to_user": {"reputation": 8718, "user_id": 84128, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d1f63052c6046eb99e8ade3925a100d8?s=128&d=identicon&r=PG", "display_name": "Eric Conner", "link": "https://stackoverflow.com/users/84128/eric-conner"}, "edited": false, "score": 1, "creation_date": 1561072844, "post_id": 56677029, "comment_id": 99955055, "body": "@EricConner Thanks for sharing your fix. Was able to verify and deploy with the changes in your PR."}, {"owner": {"reputation": 8718, "user_id": 84128, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d1f63052c6046eb99e8ade3925a100d8?s=128&d=identicon&r=PG", "display_name": "Eric Conner", "link": "https://stackoverflow.com/users/84128/eric-conner"}, "edited": false, "score": 0, "creation_date": 1561074541, "post_id": 56677029, "comment_id": 99955371, "body": "correct, glad you got it working. no word on this still from heroku.... crazy"}, {"owner": {"reputation": 16137, "user_id": 2026508, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d76e464967fe7ab0b42754ae5401d3ba?s=128&d=identicon&r=PG&f=1", "display_name": "jmunsch", "link": "https://stackoverflow.com/users/2026508/jmunsch"}, "reply_to_user": {"reputation": 8718, "user_id": 84128, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d1f63052c6046eb99e8ade3925a100d8?s=128&d=identicon&r=PG", "display_name": "Eric Conner", "link": "https://stackoverflow.com/users/84128/eric-conner"}, "edited": false, "score": 1, "creation_date": 1561077984, "post_id": 56677029, "comment_id": 99956096, "body": "@EricConner looks like they are in the process of rolling out some changes for this : <a href=\"https://github.com/heroku/heroku-buildpack-python/pull/825\" rel=\"nofollow noreferrer\">github.com/heroku/heroku-buildpack-python/pull/825</a> by adding a config var to the app.json"}], "answers": [{"comments": [{"owner": {"reputation": 16137, "user_id": 2026508, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d76e464967fe7ab0b42754ae5401d3ba?s=128&d=identicon&r=PG&f=1", "display_name": "jmunsch", "link": "https://stackoverflow.com/users/2026508/jmunsch"}, "edited": false, "score": 1, "creation_date": 1561137719, "post_id": 56698781, "comment_id": 99979094, "body": "as well as : <code>&quot;env&quot;: [&quot;PYTHON_NO_SQLITE3&quot;: {&quot;value&quot;: &quot;true&quot;}]</code>"}, {"owner": {"reputation": 193, "user_id": 9606292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc9e3d6969ba9c50747b713622641960?s=128&d=identicon&r=PG", "display_name": "imba-tjd", "link": "https://stackoverflow.com/users/9606292/imba-tjd"}, "edited": false, "score": 0, "creation_date": 1604672690, "post_id": 56698781, "comment_id": 114426302, "body": "I don&#39;t think this works now. <a href=\"https://github.com/heroku/heroku-buildpack-python/pull/825\" rel=\"nofollow noreferrer\">github.com/heroku/heroku-buildpack-python/pull/825</a> wasn&#39;t merged."}], "tags": [], "owner": {"reputation": 327, "user_id": 3445896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8414d92b7d35c255f9ae2693ef4f5ae?s=128&d=identicon&r=PG&f=1", "display_name": "shardy", "link": "https://stackoverflow.com/users/3445896/shardy"}, "is_accepted": false, "score": 4, "last_activity_date": 1561102087, "creation_date": 1561102087, "answer_id": 56698781, "question_id": 56677029, "link": "https://stackoverflow.com/questions/56677029/heroku-python-app-failing-to-build-when-installing-sqlite3/56698781#56698781", "title": "Heroku python app failing to build when installing sqlite3", "body": "<p>Try this in your app.json. Although it a temporary solution</p>\n\n<pre><code>\"buildpacks\": [\n    {\n      \"url\": \"https://github.com/heroku/heroku-buildpack-python.git#remove- \n              sqlite\"\n    },\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2695, "user_id": 11175375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbefa83cbfe6c423d6a0569dac0c2c14?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/11175375/adam"}, "edited": false, "score": 0, "creation_date": 1561132339, "post_id": 56706537, "comment_id": 99976805, "body": "Just answer the question, no need to mention additional comment above like <code>Hi i was facing the same problem</code>, try to make the answer short and clear"}], "tags": [], "owner": {"reputation": 11, "user_id": 11678717, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9rIy1NBOfb4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd9_vNZq2EiAhWFIzllIAwFK-92MQ/mo/photo.jpg?sz=128", "display_name": "Zakaria Snoussi", "link": "https://stackoverflow.com/users/11678717/zakaria-snoussi"}, "is_accepted": false, "score": 1, "last_activity_date": 1561137846, "last_edit_date": 1561137846, "creation_date": 1561131419, "answer_id": 56706537, "question_id": 56677029, "link": "https://stackoverflow.com/questions/56677029/heroku-python-app-failing-to-build-when-installing-sqlite3/56706537#56706537", "title": "Heroku python app failing to build when installing sqlite3", "body": "<p>See: <a href=\"https://travis-ci.org/heroku/heroku-buildpack-python\" rel=\"nofollow noreferrer\">https://travis-ci.org/heroku/heroku-buildpack-python</a></p>\n\n<p><strong>Upgrade</strong> the the stack from <code>heroku-16</code> to <code>heroku-18</code> in <code>app.json</code>.</p>\n"}], "owner": {"reputation": 101, "user_id": 11673072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fJSqrTTfvgg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdA_zi24NSZKt1HqcZMR_wxOtOntw/mo/photo.jpg?sz=128", "display_name": "Samuel", "link": "https://stackoverflow.com/users/11673072/samuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 952, "favorite_count": 1, "answer_count": 2, "score": 10, "last_activity_date": 1561137846, "creation_date": 1560985880, "last_edit_date": 1560991908, "question_id": 56677029, "link": "https://stackoverflow.com/questions/56677029/heroku-python-app-failing-to-build-when-installing-sqlite3", "title": "Heroku python app failing to build when installing sqlite3", "body": "<p>My Python app on Heroku failed to build consistently:</p>\n\n<pre><code>-----&gt; Python app detected\n !     Python has released a security update! Please consider upgrading to python-3.6.8\n       Learn More: https://devcenter.heroku.com/articles/python-runtimes\n-----&gt; Found python-3.6.4, removing\n-----&gt; Installing python-3.6.7\n-----&gt; Installing pip\n-----&gt; Installing SQLite3\n !     Push rejected, failed to compile Python app.\n !     Push failed\n</code></pre>\n\n<p>It is a Django application that runs fine locally. </p>\n\n<p><code>python-3.6.7</code> specified in <code>runtime.txt</code>, and I've tried other versions.</p>\n\n<p>My <code>Procfile</code> contains:</p>\n\n<pre><code>\nrelease: python &lt;appname&gt;/manage.py migrate\nweb: python &lt;appname&gt;/manage.py runserver 0.0.0.0:$PORT\n</code></pre>\n\n<p>I could probably use <code>gunicorn</code> but that's irrelevant here. The build logs doesn't seem to provide me any information.</p>\n\n<p><code>requirements.txt</code></p>\n\n<pre><code>chardet==3.0.4\nDjango==2.0.2\nidna==2.6\npytz==2018.3\nrequests==2.18.4\nurllib3==1.22\ndj-database-url==0.5.0\nsetuptools==1.0.0\n</code></pre>\n"}, {"tags": ["python", "import", "operating-system", "shutil"], "comments": [{"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1560986520, "post_id": 56677017, "comment_id": 99921014, "body": "Disable the <code>try&#47;except</code> block to see if it raises an exception. Also isn&#39;t this going to find the already copied files too as <code>dst</code> is a subdirectory of <code>src</code>?"}, {"owner": {"reputation": 1, "user_id": 11673054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c066ff94b53ec24b2f14f070c91b752?s=128&d=identicon&r=PG&f=1", "display_name": "coyotejoe", "link": "https://stackoverflow.com/users/11673054/coyotejoe"}, "reply_to_user": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1561419300, "post_id": 56677017, "comment_id": 100048964, "body": "alright so the exception is                                                                             Errno 2] No such file or directory: &#39;/home/coyotejoe/3490_13.jpg&#39; [Errno 2] No such file or directory: &#39;/home/coyotejoe/3490_09.jpg&#39; ......................................... on and on and on, how would I assign a destination folder that wouldnt be a subdirectory of src?   thanks!! :-)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11673054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c066ff94b53ec24b2f14f070c91b752?s=128&d=identicon&r=PG&f=1", "display_name": "coyotejoe", "link": "https://stackoverflow.com/users/11673054/coyotejoe"}, "edited": false, "score": 0, "creation_date": 1561419443, "post_id": 56677094, "comment_id": 100048993, "body": "Hello there, thank you for your help, I ran your code and I get this error [Errno 2] No such file or directory: &#39;/home/coyotejoe/3490_01.jpg&#39; [Errno 2] No such file or directory: &#39;/home/coyotejoe/3490_0.jpg&#39;                                     ....... on and on and on, I think thats why its not copying them over, maybe I am confused about the src and dst variables? I just want to copy all jpegs on computer to new folder, any ideas? Thanks a lot!! :-)"}, {"owner": {"reputation": 778, "user_id": 11666391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP4xeWwe3UY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdzodOndRLVZTTsHfxE4wYA-10kGw/mo/photo.jpg?sz=128", "display_name": "S\u0131dd\u0131k A&#231;\u0131l", "link": "https://stackoverflow.com/users/11666391/s%c4%b1dd%c4%b1k-a%c3%a7%c4%b1l"}, "reply_to_user": {"reputation": 1, "user_id": 11673054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c066ff94b53ec24b2f14f070c91b752?s=128&d=identicon&r=PG&f=1", "display_name": "coyotejoe", "link": "https://stackoverflow.com/users/11673054/coyotejoe"}, "edited": false, "score": 0, "creation_date": 1561441090, "post_id": 56677094, "comment_id": 100052985, "body": "Are you sure that all of your JPG files immediately under <code>&#47;home&#47;coyotejoe</code>. You are os-walking and ignoring subdirectories."}, {"owner": {"reputation": 778, "user_id": 11666391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP4xeWwe3UY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdzodOndRLVZTTsHfxE4wYA-10kGw/mo/photo.jpg?sz=128", "display_name": "S\u0131dd\u0131k A&#231;\u0131l", "link": "https://stackoverflow.com/users/11666391/s%c4%b1dd%c4%b1k-a%c3%a7%c4%b1l"}, "reply_to_user": {"reputation": 1, "user_id": 11673054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c066ff94b53ec24b2f14f070c91b752?s=128&d=identicon&r=PG&f=1", "display_name": "coyotejoe", "link": "https://stackoverflow.com/users/11673054/coyotejoe"}, "edited": false, "score": 0, "creation_date": 1561441730, "post_id": 56677094, "comment_id": 100053201, "body": "Use <code>root</code> for src path join not <code>src</code> if you have subdirectories with JPG files in them. The error is probably because 3490_01.jpg is in one of the subdirectories of  <code>home&#47;coyotejoe</code>."}, {"owner": {"reputation": 1, "user_id": 11673054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c066ff94b53ec24b2f14f070c91b752?s=128&d=identicon&r=PG&f=1", "display_name": "coyotejoe", "link": "https://stackoverflow.com/users/11673054/coyotejoe"}, "edited": false, "score": 0, "creation_date": 1563307532, "post_id": 56677094, "comment_id": 100654479, "body": "using root in the the src path join worked! thanks so much Siddik!"}, {"owner": {"reputation": 778, "user_id": 11666391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP4xeWwe3UY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdzodOndRLVZTTsHfxE4wYA-10kGw/mo/photo.jpg?sz=128", "display_name": "S\u0131dd\u0131k A&#231;\u0131l", "link": "https://stackoverflow.com/users/11666391/s%c4%b1dd%c4%b1k-a%c3%a7%c4%b1l"}, "reply_to_user": {"reputation": 1, "user_id": 11673054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c066ff94b53ec24b2f14f070c91b752?s=128&d=identicon&r=PG&f=1", "display_name": "coyotejoe", "link": "https://stackoverflow.com/users/11673054/coyotejoe"}, "edited": false, "score": 0, "creation_date": 1563312040, "post_id": 56677094, "comment_id": 100656247, "body": "I would appreciate if you could accept the answer if it helps you."}], "tags": [], "owner": {"reputation": 778, "user_id": 11666391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP4xeWwe3UY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdzodOndRLVZTTsHfxE4wYA-10kGw/mo/photo.jpg?sz=128", "display_name": "S\u0131dd\u0131k A&#231;\u0131l", "link": "https://stackoverflow.com/users/11666391/s%c4%b1dd%c4%b1k-a%c3%a7%c4%b1l"}, "is_accepted": false, "score": 0, "last_activity_date": 1561441646, "last_edit_date": 1561441646, "creation_date": 1560986465, "answer_id": 56677094, "question_id": 56677017, "link": "https://stackoverflow.com/questions/56677017/copying-jpegs-in-python/56677094#56677094", "title": "Copying Jpegs in Python", "body": "<p>I tried your code on my computer on a directory which has 'png' files and it works.</p>\n\n<pre><code>#replace below with your directory / destination folder\nsrc = \"C:\\S\\SODTEST\\SODTEST\"\ndst = 'C:\\S\\SODTEST'\n\nimport os\nfrom shutil import copy2\n\nfor root, dirs, files in os.walk(src, topdown=True):\n   for name in files:\n         if name.endswith('png'):\n            try:\n               copy2(os.path.join(src,name), os.path.join(dst, name))\n\n            except Exception as e:\n                print(e)\n</code></pre>\n\n<p>Observe the exception you are getting instead of makine it fail silently.</p>\n\n<p>You are os-walking and ignoring subdirectories. If you have subdirectories with jpgs in them) use <code>copy2(os.path.join(root, name), os.path.join(dst, name))</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 11673054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c066ff94b53ec24b2f14f070c91b752?s=128&d=identicon&r=PG&f=1", "display_name": "coyotejoe", "link": "https://stackoverflow.com/users/11673054/coyotejoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1561441646, "creation_date": 1560985773, "last_edit_date": 1560986336, "question_id": 56677017, "link": "https://stackoverflow.com/questions/56677017/copying-jpegs-in-python", "title": "Copying Jpegs in Python", "body": "<p>Hello there I am new programmer trying to write a program to copy all jpegs found on my computer over to a folder.</p>\n\n<p>The program seems to be working in the sense that it finds all the jpegs but when it comes to copying them over to the new folder nothing happens.</p>\n\n<p>Can someone please help me? Thanks</p>\n\n<p>Ive made sure that the permissions on the destination folder are good to go.</p>\n\n<pre><code># program to go through all directories\n# and copy found jpg files\n# to new folder\nimport os\nfrom shutil import copy2\n\n#replace below with your directory / destination folder\nsrc = \"/home/coyotejoe\"\ndst = '/home/coyotejoe/Desktop/JPG'\n\n\n\nfor root, dirs, files in os.walk(src, topdown=True):\n   for name in files:\n\n         if name.endswith('jpg'):\n\n            try:\n               copy2(os.path.join(src,name), os.path.join(dst, name))\n\n            except:\n               pass\n</code></pre>\n\n<p>prints the names of all jpegs but destination folder is still blank</p>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 10213, "user_id": 1359058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f191024999528a3a7375f8d7181e1fe6?s=128&d=identicon&r=PG", "display_name": "abc", "link": "https://stackoverflow.com/users/1359058/abc"}, "edited": false, "score": 1, "creation_date": 1560985748, "post_id": 56676989, "comment_id": 99920869, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/15047122/python-private-function-coding-convention\">Python &quot;private&quot; function coding convention</a>"}], "answers": [{"comments": [{"owner": {"reputation": 449, "user_id": 11210476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f5f9d903571563a59d838fbbf577dc4?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11210476/alex"}, "edited": false, "score": 0, "creation_date": 1560985900, "post_id": 56677025, "comment_id": 99920900, "body": "But they do the same functionality. I still dont&#39;t understand what you mean by private."}, {"owner": {"reputation": 449, "user_id": 11210476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f5f9d903571563a59d838fbbf577dc4?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11210476/alex"}, "edited": false, "score": 0, "creation_date": 1560986024, "post_id": 56677025, "comment_id": 99920921, "body": "Does this mean that it is not safe to use them?"}, {"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "reply_to_user": {"reputation": 449, "user_id": 11210476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f5f9d903571563a59d838fbbf577dc4?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11210476/alex"}, "edited": false, "score": 3, "creation_date": 1560986122, "post_id": 56677025, "comment_id": 99920943, "body": "@Alex it means that it is for internal use of the package. You as the client of the package are expected to just ignore it and bad things can happen if you use it. If you want to know more (but you don&#39;t!) look at the source code."}, {"owner": {"reputation": 778, "user_id": 11666391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP4xeWwe3UY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdzodOndRLVZTTsHfxE4wYA-10kGw/mo/photo.jpg?sz=128", "display_name": "S\u0131dd\u0131k A&#231;\u0131l", "link": "https://stackoverflow.com/users/11666391/s%c4%b1dd%c4%b1k-a%c3%a7%c4%b1l"}, "reply_to_user": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 0, "creation_date": 1560986964, "post_id": 56677025, "comment_id": 99921105, "body": "As @Goyo mentioned, it may or may not be safe to use them. As a programmer, most of the time you want to hide your implementation details and offer a succinct interface to your client for him/her to work with. For example, you have a Tree class with a postorder_traverse method and an _rec_postorder_traverse method. The first method by convention interfaces with the client of your code whereas the second one does the heavy lifting by performing recursive traversal on your tree. A client is not interested how you recurse on that tree. So, you hide your internal method with an underscore."}], "tags": [], "owner": {"reputation": 778, "user_id": 11666391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP4xeWwe3UY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdzodOndRLVZTTsHfxE4wYA-10kGw/mo/photo.jpg?sz=128", "display_name": "S\u0131dd\u0131k A&#231;\u0131l", "link": "https://stackoverflow.com/users/11666391/s%c4%b1dd%c4%b1k-a%c3%a7%c4%b1l"}, "is_accepted": false, "score": 1, "last_activity_date": 1560985852, "creation_date": 1560985852, "answer_id": 56677025, "question_id": 56676989, "link": "https://stackoverflow.com/questions/56676989/why-in-some-modules-certain-classes-has-two-copies-of-the-same-method-one-start/56677025#56677025", "title": "Why in some modules, certain classes has two copies of the same method one starts with _?", "body": "<p>Python has no notion of private members, so underscore is used as a convention to denote private methods or fields.</p>\n\n<blockquote>\n  <p>The underscore prefix is meant as a hint to another programmer that a variable or method starting with a single underscore is intended for <strong>internal use.</strong> This convention is defined in PEP 8.</p>\n</blockquote>\n\n<p><a href=\"https://dbader.org/blog/meaning-of-underscores-in-python\" rel=\"nofollow noreferrer\">Link for the above quote</a></p>\n"}], "owner": {"reputation": 449, "user_id": 11210476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f5f9d903571563a59d838fbbf577dc4?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11210476/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560985852, "creation_date": 1560985627, "question_id": 56676989, "link": "https://stackoverflow.com/questions/56676989/why-in-some-modules-certain-classes-has-two-copies-of-the-same-method-one-start", "title": "Why in some modules, certain classes has two copies of the same method one starts with _?", "body": "<p>Sometimes I see classes that has attributes or methods that start with underscore. Why do they do that?</p>\n\n<p>For example: in Tensorflow, a model class has ._layers and .layers\nmethods.</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 38064, "user_id": 683080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69ad2af1f028b1b7e76c14f83bdf26cb?s=128&d=identicon&r=PG", "display_name": "John Szakmeister", "link": "https://stackoverflow.com/users/683080/john-szakmeister"}, "edited": false, "score": 2, "creation_date": 1560985666, "post_id": 56676986, "comment_id": 99920850, "body": "Regular ole CPython does not come with numpy.  You have to install it."}, {"owner": {"reputation": 2821, "user_id": 5662006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2eb237f223f66056b9ea829b44b4cf40?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Farr", "link": "https://stackoverflow.com/users/5662006/chris-farr"}, "edited": false, "score": 1, "creation_date": 1560986004, "post_id": 56676986, "comment_id": 99920916, "body": "Try importing it and see"}, {"owner": {"reputation": 1086, "user_id": 7619353, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e4d2a067a2026b3805e1f2f6a6ac48d0?s=128&d=identicon&r=PG&f=1", "display_name": "tyleax", "link": "https://stackoverflow.com/users/7619353/tyleax"}, "reply_to_user": {"reputation": 2821, "user_id": 5662006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2eb237f223f66056b9ea829b44b4cf40?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Farr", "link": "https://stackoverflow.com/users/5662006/chris-farr"}, "edited": false, "score": 0, "creation_date": 1560986530, "post_id": 56676986, "comment_id": 99921016, "body": "@ChrisFarr I already have my environment completely set up."}], "answers": [{"tags": [], "owner": {"reputation": 70, "user_id": 11596223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y3UA1.jpg?s=128&g=1", "display_name": "simone.zanoni", "link": "https://stackoverflow.com/users/11596223/simone-zanoni"}, "is_accepted": true, "score": 3, "last_activity_date": 1560985986, "creation_date": 1560985986, "answer_id": 56677038, "question_id": 56676986, "link": "https://stackoverflow.com/questions/56676986/does-python-come-with-numpy-library-as-default/56677038#56677038", "title": "Does Python come with numpy library as default", "body": "<p>Python doesn't come with numpy installed. However it could have been installed as requirement while installing other packages. \nYou could install it via pip:</p>\n\n<pre><code>pip install numpy\n</code></pre>\n\n<p>Or, you could check the list of the installed packages and their version via pip:</p>\n\n<pre><code>pip list\n</code></pre>\n"}], "owner": {"reputation": 1086, "user_id": 7619353, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e4d2a067a2026b3805e1f2f6a6ac48d0?s=128&d=identicon&r=PG&f=1", "display_name": "tyleax", "link": "https://stackoverflow.com/users/7619353/tyleax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 603, "favorite_count": 0, "accepted_answer_id": 56677038, "answer_count": 1, "score": 0, "last_activity_date": 1560985986, "creation_date": 1560985559, "question_id": 56676986, "link": "https://stackoverflow.com/questions/56676986/does-python-come-with-numpy-library-as-default", "title": "Does Python come with numpy library as default", "body": "<p>Does python come with numpy library as default or do you have to install it after installing python?</p>\n"}, {"tags": ["python", "matplotlib", "visual-studio-code"], "comments": [{"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1560985621, "post_id": 56676967, "comment_id": 99920843, "body": "You need 2 subplots (1 row, 2 columns). Check the answers in the duplicate. Also search for &quot;subplots in matplotlib&quot; to find more answers. Create two subplots, and use them individually to plot the train and test dataset. First try it out, if nothing works from the duplicate, include what you tried in your question, and tag me in your comment using <code>@Sheldore</code>. I will then answer"}, {"owner": {"reputation": 1, "user_id": 9613465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08135ea15b25fc5debabf1404a50c1e3?s=128&d=identicon&r=PG&f=1", "display_name": "Mitchell55", "link": "https://stackoverflow.com/users/9613465/mitchell55"}, "reply_to_user": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1561058475, "post_id": 56676967, "comment_id": 99950430, "body": "@Sheldore Thank you. I&#39;ve found that the code I added to my question description achieves what I want. If that is a sloppy way to do it then I would love to know"}], "owner": {"reputation": 1, "user_id": 9613465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08135ea15b25fc5debabf1404a50c1e3?s=128&d=identicon&r=PG&f=1", "display_name": "Mitchell55", "link": "https://stackoverflow.com/users/9613465/mitchell55"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "closed_date": 1560985583, "answer_count": 0, "score": 0, "last_activity_date": 1561058363, "creation_date": 1560985410, "last_edit_date": 1561058363, "question_id": 56676967, "link": "https://stackoverflow.com/questions/56676967/only-one-of-the-two-graphs-i-want-to-create-is-shown-when-i-run-my-program", "closed_reason": "Duplicate", "title": "Only one of the two graphs I want to create is shown when I run my program", "body": "<p>I am trying to create two graphs using <code>pyplot</code> from <code>matplotlib</code>. I would like to see them side by side, however the second graph only opens after I close the first one. Also I am using <code>vscode</code> from anaconda on Windows 10, if that helps.</p>\n\n<p>I have tried using <code>plt.show()</code> only once at the end, but that only shows the second graph and not the first. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>    # Visualising the Training set results\n\n    plt.scatter(X_train, y_train, color = 'red')\n    plt.plot(X_train, regressor.predict(X_train), color = 'blue')\n    plt.title('Salary vs Experience (Training Set Results)')\n    plt.xlabel('Years of Experience')\n    plt.ylabel('Salary')\n\n\n    # Visualising the Test set results\n\n    plt.scatter(X_test, y_test, color = 'red')\n    plt.plot(X_train, regressor.predict(X_train), color = 'blue')\n    plt.title('Salary vs Experience (Test Set Results)')\n    plt.xlabel('Years of Experience')\n    plt.ylabel('Salary')\n\n    plt.show()\n</code></pre>\n\n<p>I can include the code above that if that is necessary, but I figured it would just be clutter.</p>\n\n<p>Edit: I have found the code below accomplishes what I want</p>\n\n<pre><code># Create figure to visualize results\nfig = plt.figure()\nax1 = fig.add_subplot(211)\nax2 = fig.add_subplot(212)\n\n# Visualising the Training set results\nax1.scatter(X_train, y_train, color = 'red')\nax1.plot(X_train, regressor.predict(X_train), color = 'blue')\nax1.title.set_text('Salary vs Experience (Training Set Results)')\nax1.axes.set_xlabel('Years of Experience')\nax1.axes.set_ylabel('Salary')\n\n# Visualising the Test set results\nax2.scatter(X_test, y_test, color = 'red')\nax2.plot(X_train, regressor.predict(X_train), color = 'blue')\nax2.title.set_text('Salary vs Experience (Test Set Results)')\nax2.axes.set_xlabel('Years of Experience')\nax2.axes.set_ylabel('Salary')\n\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pygame", "pgzero"], "comments": [{"owner": {"reputation": 1086, "user_id": 1602069, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r7k1Q.jpg?s=128&g=1", "display_name": "Tom Holmes", "link": "https://stackoverflow.com/users/1602069/tom-holmes"}, "edited": false, "score": 1, "creation_date": 1560986227, "post_id": 56676965, "comment_id": 99920968, "body": "Could you share your attempt at implementing the looking algorithm from the link you shared, and what error you got?"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1561011776, "post_id": 56676965, "comment_id": 99926177, "body": "<i>&quot; I want to have a type of &#39;character&#39; [...] that can move around and &#39;look&#39; at the mouse.&quot;</i> -  what does &quot;look at&quot; mean in this context? Do you&#39;ve different sprites for looking left, right, up and down? Do you want to rotate the sprite by an certain angle dependent on the direction to the mouse?"}], "answers": [{"tags": [], "owner": {"reputation": 6913, "user_id": 4468078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BriNN.png?s=128&g=1", "display_name": "R Yoda", "link": "https://stackoverflow.com/users/4468078/r-yoda"}, "is_accepted": false, "score": 0, "last_activity_date": 1570382967, "creation_date": 1570382967, "answer_id": 58259683, "question_id": 56676965, "link": "https://stackoverflow.com/questions/56676965/how-do-i-aim-an-image-at-the-mouse/58259683#58259683", "title": "How do I &#39;aim&#39; an image at the mouse?", "body": "<p>I am not sure what exactly you mean with \"aim at the mouse\" but I guess you want to change the drawn image according to some program logic.</p>\n\n<p>You do this simply setting the <code>image</code> property of the <code>Actor</code> to another picture, eg. when you click on the image, see my modified version of your </p>\n\n<pre><code>def on_mouse_down(pos):\n\n    global score\n    if apple.collidepoint(pos):\n        print(\"Good Shot!\")\n        place_apple()\n        score = score + 1\n        apple.image = \"cactus\" # ADDED: Change the image if your click hit the Actor\n        print(score)\n\n    else:\n        print(\"You Missed!\")\n        quit()\n</code></pre>\n\n<p>You can find the documentation of the complete API (function calls and properties) here:</p>\n\n<p><a href=\"https://pygame-zero.readthedocs.io/en/stable/builtins.html\" rel=\"nofollow noreferrer\">https://pygame-zero.readthedocs.io/en/stable/builtins.html</a></p>\n"}], "owner": {"reputation": 1, "user_id": 11673022, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hK5zOh38WyU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfs4sUpqlDjBMryxVgmzCGjvhl-LQ/mo/photo.jpg?sz=128", "display_name": "SwegGaming", "link": "https://stackoverflow.com/users/11673022/sweggaming"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570382967, "creation_date": 1560985407, "last_edit_date": 1570382027, "question_id": 56676965, "link": "https://stackoverflow.com/questions/56676965/how-do-i-aim-an-image-at-the-mouse", "title": "How do I &#39;aim&#39; an image at the mouse?", "body": "<p>I'm starting out with python, I only know the basics and I want to create a top-down type of game to the one I have currently.\nI've tried some solutions on the internet and sadly, none of them has worked for me.</p>\n\n<p>As I said, I can't find a working solution as of right now but I've tried a few, including this one\n<a href=\"https://gamedev.stackexchange.com/questions/132163/how-can-i-make-the-player-look-to-the-mouse-direction-pygame-2d\">How can I make the player \u201clook\u201d to the mouse direction? (Pygame / 2D)</a>.\nI'm also using <code>pygame</code>, forgot to mention that. I also have <code>pgzero</code> if you need to know.</p>\n\n<p>This code works and it just places a new actor when you click on it, but I want to have a type of 'character' with a weapon that can move around and 'look' at the mouse.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pgzrun\n\nfrom random import randint\n\n\napple = Actor(\"apple\")\n\n\nscore = 0\n\n\ndef draw():\n\n    screen.clear()\n\n    apple.draw()\n\ndef place_apple():\n\n    apple.x = randint(10, 800)\n    apple.y = randint(10, 600)\n\ndef on_mouse_down(pos):\n\n    global score\n    if apple.collidepoint(pos):\n        print(\"Good Shot!\")\n        place_apple()\n        score = score + 1\n        print(score)\n\n    else:\n        print(\"You Missed!\")\n        quit()\n\npgzrun.go()\n</code></pre>\n\n<p>I just need to know how to make the picture 'look' at the cursor and then what each bit does to I know hot to do it for next time.</p>\n\n<p>The first time I tried with the link given above, It returned a positional argument and I can't figure it out.\nI may have messed something up when I put in the fixed code but I don't know, I was kind of tired.</p>\n"}, {"tags": ["python", "conditional-statements", "gekko"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1560989804, "post_id": 56676961, "comment_id": 99921650, "body": "I don&#39;t see <code>slk_1</code> anywhere in the code you posted. Are you sure this is the code with the error?"}, {"owner": {"reputation": 5870, "user_id": 2366941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DyN2Q.jpg?s=128&g=1", "display_name": "John Hedengren", "link": "https://stackoverflow.com/users/2366941/john-hedengren"}, "edited": false, "score": 1, "creation_date": 1561047387, "post_id": 56676961, "comment_id": 99945645, "body": "Good observation! Slack variables are automatically added when there is an inequality constraint to convert it back to an equality constraint (with the slack variable). The slk_1 is the additional variable."}], "answers": [{"comments": [{"owner": {"reputation": 912, "user_id": 11341994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B38pj.jpg?s=128&g=1", "display_name": "Junho Park", "link": "https://stackoverflow.com/users/11341994/junho-park"}, "edited": false, "score": 1, "creation_date": 1561140810, "post_id": 56690104, "comment_id": 99980387, "body": "Thanks for the kind answer. I have a follow-up question. Can I add a conditional statement on the variables that appear in the &#39;m.Equation&#39; directly in the m.Equation line? For example, for &#39;cH&#39; in the equation. Or, do I need to add another dummy variable to set the condition?"}, {"owner": {"reputation": 5870, "user_id": 2366941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DyN2Q.jpg?s=128&g=1", "display_name": "John Hedengren", "link": "https://stackoverflow.com/users/2366941/john-hedengren"}, "reply_to_user": {"reputation": 912, "user_id": 11341994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B38pj.jpg?s=128&g=1", "display_name": "Junho Park", "link": "https://stackoverflow.com/users/11341994/junho-park"}, "edited": false, "score": 0, "creation_date": 1561156237, "post_id": 56690104, "comment_id": 99985214, "body": "Yes, you can add the function directly in the equation such as from this example you could remove the R1_1 variable with: <code>m.Equation(cH.dt() == nus[0].dot([m.if3(R1, 0, R1), R2, R3]))</code>, <code>m.Equation(cM.dt() == nus[1].dot([m.if3(R1, 0, R1), R2, R3]))</code>, ... It is better to define R1_1 once above and use it multiple times so that you minimize the additional variables that come with <code>m.if3</code>."}], "tags": [], "owner": {"reputation": 5870, "user_id": 2366941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DyN2Q.jpg?s=128&g=1", "display_name": "John Hedengren", "link": "https://stackoverflow.com/users/2366941/john-hedengren"}, "is_accepted": true, "score": 3, "last_activity_date": 1561047268, "creation_date": 1561047268, "answer_id": 56690104, "question_id": 56676961, "link": "https://stackoverflow.com/questions/56676961/question-about-the-conditional-statement-m-if3-in-the-gekko/56690104#56690104", "title": "Question about the conditional statement (&#39;m.if3&#39;) in the GEKKO", "body": "<p>You need just one correction (remove the <code>&lt;0</code>) to use the <code>if3</code> function in Gekko.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>R1_1 = m.if3(R1, 0, R1)\n</code></pre>\n\n<p>The <code>m.if3</code> function uses a condition that switches what is used (argument 2 or 3) based on whether the condition is less than zero or greater than or equal to zero. Here is the result of help (m.if3) with some additional explanation:</p>\n\n<pre><code>if3(condition, x1, x2) method of gekko.gekko.GEKKO instance\n\nIF conditional with a binary switch variable.\nThe traditional method for IF statements is not continuously\ndifferentiable and can cause a gradient-based optimizer to fail\nto converge.\n\nUsage: y = m.if3(condition,x1,x2)\nInputs:\n   condition: GEKKO variable, parameter, or expression\n   x1 and x2: GEKKO variable, parameter, or expression\nOutput: GEKKO variable y = x1 when condition&lt;0\n                       y = x2 when condition&gt;=0\n</code></pre>\n\n<p>One other thing to consider is that the <code>if3</code> function uses binary variables and you'll need to use a Mixed Integer solver to find an integer solution. You can either remove the line that switches the solver to IPOPT (<code>if3</code> switches to the APOPT solver by default) or you can switch the option to APOPT manually.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>m.options.SOLVER = 1\n</code></pre>\n\n<p>Some of the constants were missing from your script. I added some dummy variables just to make it run.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from gekko import GEKKO\nimport numpy as np\n\nm = GEKKO()\n\nhelp(m.if3)\n\ntstep = 1.0\ncs0=[1,1,1,1]\nr0 = 1.0\ncFeMax = 1.0\nkd = [1,1,1]\nKeq = [1,1,1]\nDif = [1,1,1,1]\ncg0 = [1,1,1]\nnus = np.array([[1,1,1],[1,1,1],[1,1,1],[1,1,1]])\n\nm.time = np.array([0,tstep])\n\ncH = m.CV(value=cs0[0])\ncM = m.CV(value=cs0[1])\ncW = m.CV(value=cs0[2])\ncF = m.CV(value=cs0[3])\n\nR1_1 = m.Var()\n\nr3 = m.Intermediate(r0*(1-cF/cFeMax)**(1/3))\nr2 = m.Intermediate(r0*((2*cH + 3*cM)/cFeMax)**(1/3))\nr1 = m.Intermediate(r0*(2*cH/cFeMax)**(1/3))\nx = m.Intermediate(r1/r0)\ny = m.Intermediate(r2/r0)\nz = m.Intermediate(r3/r0)\nA1 = m.Intermediate(1/x**2/(kd[0]*(1+1/Keq[0])))\nA2 = m.Intermediate(1/y**2/(kd[1]*(1+1/Keq[1])))\nA3 = m.Intermediate(1/z**2/(kd[2]*(1+1/Keq[2])))\nB1 = m.Intermediate((y-x)/x/y*r0/Dif[1])\nB2 = m.Intermediate((z-y)/y/z*r0/Dif[2])\nB3 = m.Intermediate((1-z)/z*r0/Dif[3])\nF = 0\nW = m.Intermediate((A1+B1)*(A3*(A2+B2+B3+F)+(A2+B2)*(B3+F))+A2*(A3*(B2+B3+F))+B2*(B3+F))\nceq1 = m.Intermediate((cg0[0]+cg0[1])/(1+Keq[0]))\nceq2 = m.Intermediate((cg0[0]+cg0[1])/(1+Keq[1]))\nceq3 = m.Intermediate((cg0[0]+cg0[1])/(1+Keq[2]))\n\nR1 = m.Intermediate(3/r0/W*((A3*(A2+B2+B3+F)+(A2+B2)*(B3+F))*(cg0[0]-ceq1) \\\n                     -(A3*(B2+B3+F)+B2*(B3+F))*(cg0[0]-ceq2) \\\n                     -A2*(B3+F)*(cg0[0]-ceq3)))\nR2 = m.Intermediate(3/r0/W*(-(B2*(A3+B3+F)+A3*(B3+F))*(cg0[0]-ceq1) \\\n                     +((A1+B1+B2)*(A3+B3+F)+A3*(B3+F))*(cg0[0]-ceq2) \\\n                     -(A1+B1)*(B3+F)*(cg0[0]-ceq3)))\nR3 = m.Intermediate(3/r0/W*(-A2*(B3+F)*(cg0[0]-ceq1) \\\n                    -(A1+B1)*(B3+F)*(cg0[0]-ceq2) \\\n                    +((A1+B1)*(A2+B2+B3+F)+A2*(B2+B1+F))*(cg0[0]-ceq3)))\n\nR1_1 = m.if3(R1, 0, R1)\n\nm.Equation(cH.dt() == nus[0].dot([R1_1, R2, R3]))\nm.Equation(cM.dt() == nus[1].dot([R1_1, R2, R3]))\nm.Equation(cW.dt() == nus[2].dot([R1_1, R2, R3]))\nm.Equation(cF.dt() == nus[3].dot([R1_1, R2, R3]))\n\nm.options.IMODE = 4\nm.options.SOLVER = 1\nm.options.nodes = 2\n\nm.solve()\n</code></pre>\n"}], "owner": {"reputation": 912, "user_id": 11341994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B38pj.jpg?s=128&g=1", "display_name": "Junho Park", "link": "https://stackoverflow.com/users/11341994/junho-park"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "accepted_answer_id": 56690104, "answer_count": 1, "score": 3, "last_activity_date": 1561047268, "creation_date": 1560985396, "question_id": 56676961, "link": "https://stackoverflow.com/questions/56676961/question-about-the-conditional-statement-m-if3-in-the-gekko", "title": "Question about the conditional statement (&#39;m.if3&#39;) in the GEKKO", "body": "<p>I would like to add some conditional statements in the GEKKO code. </p>\n\n<p>I added the below statement with 'm.if3'. However, it has returned syntax error that I didn't have without the conditional statement.</p>\n\n<p>'R1_1 = m.if3(R1&lt;0, 0, R1)' </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#%% GEKKO\nm = GEKKO(remote=False)\n\n#print(m.version)\n#m.time = np.linspace(0, 3600, 100)\nm.time = np.array([0,tstep])\n\ncH = m.CV(value=cs0[0])\ncM = m.CV(value=cs0[1])\ncW = m.CV(value=cs0[2])\ncF = m.CV(value=cs0[3])\n\nR1_1 = m.Var()\n\nr3 = m.Intermediate(r0*(1-cF/cFeMax)**(1/3))\nr2 = m.Intermediate(r0*((2*cH + 3*cM)/cFeMax)**(1/3))\nr1 = m.Intermediate(r0*(2*cH/cFeMax)**(1/3))\nx = m.Intermediate(r1/r0)\ny = m.Intermediate(r2/r0)\nz = m.Intermediate(r3/r0)\nA1 = m.Intermediate(1/x**2/(kd[0]*(1+1/Keq[0])))\nA2 = m.Intermediate(1/y**2/(kd[1]*(1+1/Keq[1])))\nA3 = m.Intermediate(1/z**2/(kd[2]*(1+1/Keq[2])))\nB1 = m.Intermediate((y-x)/x/y*r0/Dif[1])\nB2 = m.Intermediate((z-y)/y/z*r0/Dif[2])\nB3 = m.Intermediate((1-z)/z*r0/Dif[3])\nF = 0\nW = m.Intermediate((A1+B1)*(A3*(A2+B2+B3+F)+(A2+B2)*(B3+F))+A2*(A3*(B2+B3+F))+B2*(B3+F))\nceq1 = m.Intermediate((cg0[0]+cg0[1])/(1+Keq[0]))\nceq2 = m.Intermediate((cg0[0]+cg0[1])/(1+Keq[1]))\nceq3 = m.Intermediate((cg0[0]+cg0[1])/(1+Keq[2]))\n\nR1 = m.Intermediate(3/r0/W*((A3*(A2+B2+B3+F)+(A2+B2)*(B3+F))*(cg0[0]-ceq1) \\\n                     -(A3*(B2+B3+F)+B2*(B3+F))*(cg0[0]-ceq2) \\\n                     -A2*(B3+F)*(cg0[0]-ceq3)))\nR2 = m.Intermediate(3/r0/W*(-(B2*(A3+B3+F)+A3*(B3+F))*(cg0[0]-ceq1) \\\n                     +((A1+B1+B2)*(A3+B3+F)+A3*(B3+F))*(cg0[0]-ceq2) \\\n                     -(A1+B1)*(B3+F)*(cg0[0]-ceq3)))\nR3 = m.Intermediate(3/r0/W*(-A2*(B3+F)*(cg0[0]-ceq1) \\\n                    -(A1+B1)*(B3+F)*(cg0[0]-ceq2) \\\n                    +((A1+B1)*(A2+B2+B3+F)+A2*(B2+B1+F))*(cg0[0]-ceq3)))\n\nR1_1 = m.if3(R1&lt;0, 0, R1)\n\nm.Equation(cH.dt() == nus[0].dot([R1_1, R2, R3]))\nm.Equation(cM.dt() == nus[1].dot([R1_1, R2, R3]))\nm.Equation(cW.dt() == nus[2].dot([R1_1, R2, R3]))\nm.Equation(cF.dt() == nus[3].dot([R1_1, R2, R3]))\n\nm.options.IMODE = 4\nm.options.SOLVER = 3\nm.options.nodes = 2\n\n</code></pre>\n\n<p>Exception:  @error: Model Expression\n *** Error in syntax of function string: Mismatched parenthesis</p>\n\n<p>Position: 4<br>\n (0)))-((((1-int_v5))*(i35)-slk_1\n    ?</p>\n"}, {"tags": ["python", "python-3.x", "list", "for-loop", "heapsort"], "comments": [{"owner": {"reputation": 43423, "user_id": 1011724, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/2JAXi.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1011724/dan"}, "edited": false, "score": 1, "creation_date": 1560985468, "post_id": 56676953, "comment_id": 99920805, "body": "It would help if you add a description for what you intend this code to do. Not just the outcome, but try to describe how you think your algorithm should work."}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1560985588, "post_id": 56676953, "comment_id": 99920836, "body": "I think we should use the tag [heaps] rather than <a href=\"https://stackoverflow.com/questions/tagged/heaps-algorithm\">heaps-algorithm</a> which was only created 2/2019 and seems unnecessary, also is grammatically wrong. There is an existing discussion on Meta: <a href=\"https://meta.stackoverflow.com/questions/297387/resolve-ambiguity-of-the-heap-tag-between-the-data-structure-and-the-memory-zo\">Resolve ambiguity of the &#91;heap&#93; tag between the data structure and the memory zone</a>"}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1560986583, "post_id": 56676953, "comment_id": 99921029, "body": "You write <code>heaps_func(art)</code> but that must have quotes around the string: <code>heaps_func(&#39;art&#39;)</code>"}, {"owner": {"reputation": 5, "user_id": 11536868, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Uso5NdcTkkI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rddqE8rWxWSPrvB4n95eF_7AbX83Q/mo/photo.jpg?sz=128", "display_name": "Thomas Duffy", "link": "https://stackoverflow.com/users/11536868/thomas-duffy"}, "edited": false, "score": 0, "creation_date": 1560987115, "post_id": 56676953, "comment_id": 99921142, "body": "Thanks sorry for the confusion"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 11536868, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Uso5NdcTkkI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rddqE8rWxWSPrvB4n95eF_7AbX83Q/mo/photo.jpg?sz=128", "display_name": "Thomas Duffy", "link": "https://stackoverflow.com/users/11536868/thomas-duffy"}, "edited": false, "score": 0, "creation_date": 1561411347, "post_id": 56677741, "comment_id": 100047067, "body": "Thanks! any chance could you explain what the n parameter does? it seems like it does not do any thing."}, {"owner": {"reputation": 5, "user_id": 11536868, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Uso5NdcTkkI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rddqE8rWxWSPrvB4n95eF_7AbX83Q/mo/photo.jpg?sz=128", "display_name": "Thomas Duffy", "link": "https://stackoverflow.com/users/11536868/thomas-duffy"}, "edited": false, "score": 0, "creation_date": 1561411936, "post_id": 56677741, "comment_id": 100047243, "body": "Also it seems that this produces alot of duplicates within the list also."}, {"owner": {"reputation": 1842, "user_id": 8695011, "user_type": "registered", "profile_image": "https://graph.facebook.com/886368414871996/picture?type=large", "display_name": "mahbubcseju", "link": "https://stackoverflow.com/users/8695011/mahbubcseju"}, "reply_to_user": {"reputation": 5, "user_id": 11536868, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Uso5NdcTkkI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rddqE8rWxWSPrvB4n95eF_7AbX83Q/mo/photo.jpg?sz=128", "display_name": "Thomas Duffy", "link": "https://stackoverflow.com/users/11536868/thomas-duffy"}, "edited": false, "score": 0, "creation_date": 1561412953, "post_id": 56677741, "comment_id": 100047525, "body": "I&#39;s it printing duplicates?"}, {"owner": {"reputation": 1842, "user_id": 8695011, "user_type": "registered", "profile_image": "https://graph.facebook.com/886368414871996/picture?type=large", "display_name": "mahbubcseju", "link": "https://stackoverflow.com/users/8695011/mahbubcseju"}, "reply_to_user": {"reputation": 5, "user_id": 11536868, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Uso5NdcTkkI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rddqE8rWxWSPrvB4n95eF_7AbX83Q/mo/photo.jpg?sz=128", "display_name": "Thomas Duffy", "link": "https://stackoverflow.com/users/11536868/thomas-duffy"}, "edited": false, "score": 0, "creation_date": 1561414505, "post_id": 56677741, "comment_id": 100047915, "body": "Also, if the string contains duplicate character it Will print duplicate.so we can use map for keeping track whether this string printed before or not."}], "tags": [], "owner": {"reputation": 1842, "user_id": 8695011, "user_type": "registered", "profile_image": "https://graph.facebook.com/886368414871996/picture?type=large", "display_name": "mahbubcseju", "link": "https://stackoverflow.com/users/8695011/mahbubcseju"}, "is_accepted": false, "score": 0, "last_activity_date": 1561419281, "last_edit_date": 1561419281, "creation_date": 1560993004, "answer_id": 56677741, "question_id": 56676953, "link": "https://stackoverflow.com/questions/56676953/creating-heap-algorithm-to-output-a-list-of-all-permutations-in-base-python-wit/56677741#56677741", "title": "Creating heap algorithm to output a list of all permutations, in base python without other modules", "body": "<p>You can do it by using recursion. Here I am goiing to add the python code for you.</p>\n\n<pre><code>def heaps_func(a,size):\n\n    if size ==1:\n        a = ''.join(a)\n        print(a)\n        return\n    for i in range(size):\n        heaps_func(a,size-1)\n        if size%2==1:\n            a[0],a[size-1]=a[size-1],a[0]\n        else:\n            a[i], a[size - 1] = a[size - 1], a[i]\n\n\nheaps_func(list('art'),3)\n</code></pre>\n\n<p>If the given string contains duplicate characters, this program will also print duplicate element. For example, in string \"arr\", 'r' contains two times. And output of this program will be :</p>\n\n<blockquote>\n  <p>arr rar rar arr rra rra</p>\n</blockquote>\n\n<p>To get rid of this, we can use a list and before printing we will search on that list whether this element exist in the list or not. If not exist then we will print it and store it on the list.  </p>\n\n<p>Programs:</p>\n\n<pre><code>def heaps_func(a,size,listofwords):\n    if size ==1:\n        a = ''.join(a)\n        #print(a)\n        if listofwords.count(a)==0:\n            print(a)\n            listofwords.append(a)\n        return\n    for i in range(size):\n        heaps_func(a,size-1,listofwords)\n        if size%2==1:\n            a[0],a[size-1]=a[size-1],a[0]\n        else:\n            a[i], a[size - 1] = a[size - 1], a[i]\n\nlistofwords=[]\nheaps_func(list('arr'),len('arr'),listofwords)\n</code></pre>\n\n<p>for details please read the following link . But there it is described in C/C++.</p>\n\n<p><a href=\"https://www.geeksforgeeks.org/heaps-algorithm-for-generating-permutations/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/heaps-algorithm-for-generating-permutations/</a></p>\n"}], "owner": {"reputation": 5, "user_id": 11536868, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Uso5NdcTkkI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rddqE8rWxWSPrvB4n95eF_7AbX83Q/mo/photo.jpg?sz=128", "display_name": "Thomas Duffy", "link": "https://stackoverflow.com/users/11536868/thomas-duffy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 383, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1561419281, "creation_date": 1560985344, "last_edit_date": 1560987129, "question_id": 56676953, "link": "https://stackoverflow.com/questions/56676953/creating-heap-algorithm-to-output-a-list-of-all-permutations-in-base-python-wit", "title": "Creating heap algorithm to output a list of all permutations, in base python without other modules", "body": "<p>I am trying to build an algorithm which will output a list of all permutations of an inputted string and I am getting very lost, especially when it comes to heap algorithm. I tried to copy the code listed on the Wikipedia page to no avail. I want a solution in base Python.</p>\n\n<pre><code># Desired output\nheaps_func('art')  \n['rta', 'tra', 'tar', 'rat', 'art', 'atr']\n\n# Current code\ndef heaps_func(a):\n    lst=[a]\n    l=len(a)\n    if len(a)==1:\n        return lst\n    else:\n        for x in range(len(a)-1):\n            if x&lt;(l-1):\n                if l%2==0:\n                    k=list(a)\n                    p=k[i]\n                    k[i]=k[l-1]\n                    k[l-1]=p\n                    k=''.join(k)\n                    lst.append(k)\n                else:\n                    k=list(a)\n                    p=k[0]\n                    k[0]=k[l-1]\n                    k[l-1]=p\n                    k=''.join(k)\n                    lst.append(k)\n\n    return lst\n</code></pre>\n"}, {"tags": ["python", "multithreading", "multiprocessing"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1560986948, "post_id": 56676934, "comment_id": 99921102, "body": "Your question seems too &quot;nuanced&quot; \u2014 what exactly is it that you want to know?"}, {"owner": {"reputation": 71, "user_id": 7910535, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c5ee346f466c59d7bf9034e78409d880?s=128&d=identicon&r=PG&f=1", "display_name": "hax", "link": "https://stackoverflow.com/users/7910535/hax"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1561052161, "post_id": 56676934, "comment_id": 99947870, "body": "&quot;The work that I would like to parallelize using the multiprocessing Pool is the compare() function call&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 7910535, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c5ee346f466c59d7bf9034e78409d880?s=128&d=identicon&r=PG&f=1", "display_name": "hax", "link": "https://stackoverflow.com/users/7910535/hax"}, "edited": false, "score": 1, "creation_date": 1561052128, "post_id": 56677997, "comment_id": 99947849, "body": "Thanks, this is what I ended up doing."}], "tags": [], "owner": {"reputation": 56, "user_id": 11662012, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fuxhp.jpg?s=128&g=1", "display_name": "Ze Xuan", "link": "https://stackoverflow.com/users/11662012/ze-xuan"}, "is_accepted": true, "score": 1, "last_activity_date": 1560995626, "creation_date": 1560995626, "answer_id": 56677997, "question_id": 56676934, "link": "https://stackoverflow.com/questions/56676934/best-use-of-multiprocessing-pool-for-nuanced-loop/56677997#56677997", "title": "Best use of multiprocessing Pool for nuanced loop?", "body": "<p>Do you mean you need an example of how to use Pool to parallelize your function? Here's an example.</p>\n\n<pre><code>import multiprocessing as mp\n\n# Generate your arguments as a list of tuples, using some method that fits your requirements. \n# Here is a hard-coded example\narguments = [(bucket1, bucket2), (bucket2, bucket3), (bucket1, bucket3)]\n\n# Create pool given number of logical CPUs you have\npool = mp.Pool(mp.cpu_count())\n\n# Assign work to pool (provide function and list of arguments)\n# Results will be list of results\nresults = pool.starmap(compare, arguments)\n\n\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 7910535, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c5ee346f466c59d7bf9034e78409d880?s=128&d=identicon&r=PG&f=1", "display_name": "hax", "link": "https://stackoverflow.com/users/7910535/hax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 56677997, "answer_count": 1, "score": 0, "last_activity_date": 1560995626, "creation_date": 1560985212, "last_edit_date": 1560986626, "question_id": 56676934, "link": "https://stackoverflow.com/questions/56676934/best-use-of-multiprocessing-pool-for-nuanced-loop", "title": "Best use of multiprocessing Pool for nuanced loop?", "body": "<p>I am trying to figure out the best way to make use of python's multiprocessing <code>Pool</code>. </p>\n\n<p>I have an n^2 nested for loop that makes a comparison for each bucket combination from a list of buckets.</p>\n\n<p>The work that I would like to parallelize using the multiprocessing <code>Pool</code> is the <code>compare()</code> function call.</p>\n\n<p>There are absolutely no shared resources in the <code>compare</code> function. If buckets A and B were comparing while buckets A and C were through another process, it would not matter.</p>\n\n<p>I am new to parallel processing but I do understand the basic nature of the multiprocessing <code>Pool</code>. However, I am finding it difficult to implement anything that does what I would like it to do. </p>\n\n<p>The reliance of the specific bucket pairs to pass to the function, along with their associated <code>reader_list</code> seems to be blocking me when I look at any examples of the <code>Pool</code>. I am not necessarily relying on a list that the function gets executed on each index of.</p>\n\n<pre><code>for i in range(0, len(bucket_names) - 1):\n    bucket1 = bucket_names[i]\n\n    for k in range(i+1, len(bucket_names)):\n        bucket2 = bucket_names[k]\n\n        reader_list1 = get_reader_list(bucket1)\n        reader_list2 = get_reader_list(bucket2)\n\n        compare(bucket1, bucket2, reader_list1, reader_list2)\n</code></pre>\n"}, {"tags": ["python", "pip", "wget", "vtk", "python-3.7"], "answers": [{"comments": [{"owner": {"reputation": 70, "user_id": 11596223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y3UA1.jpg?s=128&g=1", "display_name": "simone.zanoni", "link": "https://stackoverflow.com/users/11596223/simone-zanoni"}, "edited": false, "score": 0, "creation_date": 1560989838, "post_id": 56677260, "comment_id": 99921655, "body": "This definitely solved the problem! I accidentally installed the 32-bit version. For the sake of my curiosity, did you managed to debug it from the error message I attached or just because there isn&#39;t another explanation for that?"}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "reply_to_user": {"reputation": 70, "user_id": 11596223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y3UA1.jpg?s=128&g=1", "display_name": "simone.zanoni", "link": "https://stackoverflow.com/users/11596223/simone-zanoni"}, "edited": false, "score": 1, "creation_date": 1561022857, "post_id": 56677260, "comment_id": 99931577, "body": "First I looked at the list of distributions and found there are only 64-bit wheels. Then I saw the <i>&quot;ERROR: vtk-8.1.2-cp37-cp37m-win_amd64.whl is not a supported wheel on this platform.&quot;</i> which means either your Python is not 3.7, the OS is not Windows or Python is not 64-bit. Also I know the Python web site shows 32-bit Python for download by default; to download 64-bit you need to find it in the list of downloads. Because of that 32/64-bitness is a frequent problem."}, {"owner": {"reputation": 70, "user_id": 11596223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y3UA1.jpg?s=128&g=1", "display_name": "simone.zanoni", "link": "https://stackoverflow.com/users/11596223/simone-zanoni"}, "edited": false, "score": 0, "creation_date": 1561071036, "post_id": 56677260, "comment_id": 99954715, "body": "Very helpful! Thanks again for your help."}], "tags": [], "owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "is_accepted": true, "score": 2, "last_activity_date": 1560987851, "creation_date": 1560987851, "answer_id": 56677260, "question_id": 56676932, "link": "https://stackoverflow.com/questions/56676932/install-vtk-toolkit-for-python-3-7-3/56677260#56677260", "title": "Install vtk toolkit for Python 3.7.3", "body": "<p>Your Python is 32-bit and vtk only <a href=\"https://pypi.org/project/vtk/#files\" rel=\"nofollow noreferrer\">provides</a> 64-bit builds. Install 64-bit Python and retry.</p>\n"}], "owner": {"reputation": 70, "user_id": 11596223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y3UA1.jpg?s=128&g=1", "display_name": "simone.zanoni", "link": "https://stackoverflow.com/users/11596223/simone-zanoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1038, "favorite_count": 0, "accepted_answer_id": 56677260, "answer_count": 1, "score": 1, "last_activity_date": 1560987851, "creation_date": 1560985191, "last_edit_date": 1560985563, "question_id": 56676932, "link": "https://stackoverflow.com/questions/56676932/install-vtk-toolkit-for-python-3-7-3", "title": "Install vtk toolkit for Python 3.7.3", "body": "<p>I'm setting up a new Windows 10 PC at work. I'm facing issues in trying to install vtk 8.1.2 for Python 3.7.3, which is the only version there is on my PC.</p>\n\n<p>This is what I get trying with pip 19.1.1 and wget:</p>\n\n<pre><code>C:\\Users\\staff&gt;pip install vtk\nCollecting vtk\n  ERROR: Could not find a version that satisfies the requirement vtk (from \nversions: none)\nERROR: No matching distribution found for vtk\n\n\nC:\\Users\\staff&gt;wget https://files.pythonhosted.org/packages/6b/55/.../vtk-8.1.2-cp37-cp37m-win_amd64.whl\n--2019-06-20 08:52:49--  \nhttps://files.pythonhosted.org/packages/6b/55/.../vtk-8.1.2-cp37-cp37m-win_amd64.whl\nResolving files.pythonhosted.org (files.pythonhosted.org)... 151.101.29.63\nConnecting to files.pythonhosted.org \n(files.pythonhosted.org)|151.101.29.63|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 24390482 (23M) [binary/octet-stream]\nSaving to: 'vtk-8.1.2-cp37-cp37m-win_amd64.whl'\n\nvtk-8.1.2-cp37-cp37m-win_amd6 100% \n[==========================&gt;]  23.26M  52.7MB/s    in 0.4s\n\n2019-06-20 08:52:50 (52.7 MB/s) - 'vtk-8.1.2-cp37-cp37m-win_amd64.whl' saved \n[24390482/24390482]\n\n\nC:\\Users\\staff&gt;pip install vtk-8.1.2-cp37-cp37m-win_amd64.whl\nERROR: vtk-8.1.2-cp37-cp37m-win_amd64.whl is not a supported wheel on this \nplatform.\n</code></pre>\n\n<p>I omit the full <a href=\"https://files.pythonhosted.org/packages/6b/55/e4f0cdf6634def017a98374a6930ffdd65d84b8ddf1c885a08728de5b408/vtk-8.1.2-cp37-cp37m-win_amd64.whl\" rel=\"nofollow noreferrer\">wget link</a> for formatting purposes.\nI would prefer to keep the PC without virtual environments and multiple Python versions to avoid mess. Do you have any suggestion?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 418, "user_id": 5270376, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6ad0b40b2a746a1ec8a03ed1e09789cb?s=128&d=identicon&r=PG", "display_name": "Xorgon", "link": "https://stackoverflow.com/users/5270376/xorgon"}, "edited": false, "score": 0, "creation_date": 1560985205, "post_id": 56676906, "comment_id": 99920761, "body": "Not a huge difference, but you could combine your first two <code>for i,j in d1.items():</code> loops."}], "answers": [{"tags": [], "owner": {"reputation": 620, "user_id": 7306280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f688cc11416b656bf9da56cef229afd1?s=128&d=identicon&r=PG&f=1", "display_name": "arajshree", "link": "https://stackoverflow.com/users/7306280/arajshree"}, "is_accepted": false, "score": 4, "last_activity_date": 1560985338, "creation_date": 1560985338, "answer_id": 56676951, "question_id": 56676906, "link": "https://stackoverflow.com/questions/56676906/alternate-way-to-get-the-desired-output/56676951#56676951", "title": "Alternate way to get the desired output?", "body": "<p>Do something like this:</p>\n\n<pre><code>d1 = {'a': 100, 'b': 200, 'c':300}\nd2 = {'a': 300, 'b': 200, 'd':400}\n\nall_keys = list(d1.keys())+list(d2.keys())\nd ={}\nfor k in all_keys:\n    d[k] = d1.get(k,0)+d2.get(k,0)\n\nprint(d)\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 11442544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c2ebbac1d294415a7ee5db1ff1f0ab7?s=128&d=identicon&r=PG", "display_name": "Loki", "link": "https://stackoverflow.com/users/11442544/loki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "closed_date": 1560985398, "answer_count": 1, "score": 0, "last_activity_date": 1560988485, "creation_date": 1560985017, "last_edit_date": 1560988485, "question_id": 56676906, "link": "https://stackoverflow.com/questions/56676906/alternate-way-to-get-the-desired-output", "closed_reason": "Duplicate", "title": "Alternate way to get the desired output?", "body": "<p>Code looks very lengthy, is there more elegant way to solve this, i am just a beginner.</p>\n\n<pre><code># NOTE: Don't use any packages, i know it can be solved by importing counter from collections\n\n    d1 = {'a': 100, 'b': 200, 'c':300}\n    d2 = {'a': 300, 'b': 200, 'd':400}\n\n    d={}\n    for i,j in d1.items():\n        for k,l in d2.items():\n            if i==k:\n                c={i:j+l}\n                d.update(c)\n    for i,j in d1.items():\n        if i not in d:\n            d.update({i:j})\n    for m,n in d2.items():\n        if m not in d:\n            d.update({m:n})\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>output: {'a': 400, 'b': 400, 'c': 300, 'd': 400}\n</code></pre>\n"}, {"tags": ["python", "windows", "batch-file"], "comments": [{"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 2, "creation_date": 1560984871, "post_id": 56676856, "comment_id": 99920679, "body": "Task Scheduler is meant for this sort of thing... but if you must use a batch file, you can get the process ID via something like <code>tasklist | findstr</code>... then kill that process <code>taskkill &#47;F &#47;PID 18424</code>. This has some hints on getting the PID from a tasklist search: <a href=\"https://stackoverflow.com/questions/50555929/get-only-pid-from-tasklist-using-cmd-title\" title=\"get only pid from tasklist using cmd title\">stackoverflow.com/questions/50555929/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 335, "user_id": 11639518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oHyIi.jpg?s=128&g=1", "display_name": "jhelphenstine", "link": "https://stackoverflow.com/users/11639518/jhelphenstine"}, "is_accepted": true, "score": 1, "last_activity_date": 1560987694, "creation_date": 1560987694, "answer_id": 56677242, "question_id": 56676856, "link": "https://stackoverflow.com/questions/56676856/bat-run-python-and-kill-it-after-period-of-time/56677242#56677242", "title": "BAT run python and kill it after period of time", "body": "<p>I created a batch file to demonstrate some components for your solution:\n<strong>Note:</strong> Credit to <a href=\"https://stackoverflow.com/a/50561117/11639518\">this answer</a> for the PID extraction, pointed out by @JacobIRR.</p>\n\n<pre><code>TITLE Synology-Script\n\n@echo off\nfor /F \"tokens=2\" %%K in ('\n    tasklist /FI \"WINDOWTITLE eq Synology-Script\" /FI \"Status eq Running\" /FO LIST ^| findstr /B \"PID:\"    \n') do (\n    set pid=%%K\n   echo %%K\n)\necho \"I'm scheduled to stop execution in 10 seconds\"\n\ntimeout /t 10 /nobreak&gt;nul\ntaskkill /PID %pid% /F\n</code></pre>\n\n<p>I used the TITLE paremeter to give me something to search for, and searched for that in the tasklist filter command on offer from <a href=\"https://stackoverflow.com/questions/45012345/windows-cmd-tasklist-fi-windowtitle-eq-doesnt-work\">this question</a>. I recommend <a href=\"https://stackoverflow.com/questions/45012345/windows-cmd-tasklist-fi-windowtitle-eq-doesnt-work\"><em>not</em> including spaces</a> in your title. I used this pid as an argument to taskkill, which terminates this process.</p>\n\n<pre><code>timeout /t 10 /nobreak&gt;nul\n</code></pre>\n\n<p>This lets us sleep for 5 seconds, and stuffs the 'press ctrl+c' to nul, to keep it out of sight. You could set the 5 to whatever your desired sleep interval is.</p>\n"}], "owner": {"reputation": 616, "user_id": 4682909, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/53a5be191c2fd09e2f8a9b1b748c8315?s=128&d=identicon&r=PG&f=1", "display_name": "piguy", "link": "https://stackoverflow.com/users/4682909/piguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 56677242, "answer_count": 1, "score": 1, "last_activity_date": 1560987694, "creation_date": 1560984596, "last_edit_date": 1560987000, "question_id": 56676856, "link": "https://stackoverflow.com/questions/56676856/bat-run-python-and-kill-it-after-period-of-time", "title": "BAT run python and kill it after period of time", "body": "<p>Using the script below within a BAT file</p>\n\n<pre><code>pushd C:\\Users\\Me\npython -m bot_py synology\n</code></pre>\n\n<p>I execute a python script which <strong>never</strong> has an exit point (runs forever).</p>\n\n<p>How can I tell within my BAT file that after a period of time, for example 5 hours, the python script should be killed/exited?</p>\n"}, {"tags": ["python", "selenium", "google-chrome", "browser", "automation"], "comments": [{"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 2, "creation_date": 1560987417, "post_id": 56676855, "comment_id": 99921221, "body": "You can embed the username and password as part of url like this <code>https:&#47;&#47;username:password@mycompanyurl.jsp</code>"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1561011593, "post_id": 56676855, "comment_id": 99926109, "body": "I thought that sub resources were blocked with embedded credentials in chrome URLs."}, {"owner": {"reputation": 3, "user_id": 11673002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9832935769ca78d115c2dffdd74283a4?s=128&d=identicon&r=PG&f=1", "display_name": "blkskyrelm", "link": "https://stackoverflow.com/users/11673002/blkskyrelm"}, "edited": false, "score": 0, "creation_date": 1561045882, "post_id": 56676855, "comment_id": 99944826, "body": "Unfortunately, that didn&#39;t work, I&#39;m not sure if it matters but our company URL starts with http and not https."}], "owner": {"reputation": 3, "user_id": 11673002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9832935769ca78d115c2dffdd74283a4?s=128&d=identicon&r=PG&f=1", "display_name": "blkskyrelm", "link": "https://stackoverflow.com/users/11673002/blkskyrelm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560987275, "creation_date": 1560984584, "last_edit_date": 1560987275, "question_id": 56676855, "link": "https://stackoverflow.com/questions/56676855/how-do-i-fill-out-a-textbox-generated-by-the-chrome-browser-itself", "title": "How do I fill out a textbox generated by the chrome browser itself?", "body": "<p>I cannot figured out how to fill out a form that is generated by the chrome browser itself, since I cannot inspect any elements of the form I do not know what value to pass into \"find_element_by_name\". </p>\n\n<p>Here's the browser generated textbox:\n<a href=\"https://i.stack.imgur.com/4E0yx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4E0yx.png\" alt=\"enter image description here\"></a></p>\n\n<p>I've tried already using something like driver.send_keys('myusername') but that did not work. </p>\n\n<p>Here's the code snippet that I use to start the browser:</p>\n\n<pre><code>from selenium import webdriver\n\ndriver = webdriver.Chrome()  \ndriver.get('mycompanyurl.jsp');\ndriver.send_keys('myusername')\n</code></pre>\n"}, {"tags": ["python", "pandas", "loops"], "comments": [{"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1560985198, "post_id": 56676842, "comment_id": 99920758, "body": "is this python 2 or 3? Also, do you have a sense of what percentage of the tweets have the word vs not ?"}, {"owner": {"reputation": 23, "user_id": 11673000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2042e85daf9a16287199109fc64f5d1b?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/11673000/tom"}, "reply_to_user": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1560985623, "post_id": 56676842, "comment_id": 99920844, "body": "Python 3. I anticipate that only around 1% will have the keywords I intend on filtering on."}, {"owner": {"reputation": 43423, "user_id": 1011724, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/2JAXi.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1011724/dan"}, "edited": false, "score": 0, "creation_date": 1560986646, "post_id": 56676842, "comment_id": 99921037, "body": "Can you post some sample inputs and outputs. I suggest adding code to create a dataframe with say 3 fake tweets that are only a couple of words long as well as the desired result after the filtering. Don&#39;t use actual long tweets."}], "answers": [{"tags": [], "owner": {"reputation": 687, "user_id": 3350448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nbeps.png?s=128&g=1", "display_name": "PidgeyUsedGust", "link": "https://stackoverflow.com/users/3350448/pidgeyusedgust"}, "is_accepted": true, "score": 3, "last_activity_date": 1561020713, "last_edit_date": 1561020713, "creation_date": 1560986033, "answer_id": 56677045, "question_id": 56676842, "link": "https://stackoverflow.com/questions/56676842/speed-up-a-loop-filtering-a-string/56677045#56677045", "title": "Speed up a loop filtering a string", "body": "<p>Check out <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.str.contains.html#pandas-series-str-contains\" rel=\"nofollow noreferrer\"><code>pandas.Series.str.contains</code></a>, which you can use as follows.</p>\n\n<pre><code>df[~df.tweets.str.contains('filter_word')]\n</code></pre>\n\n<h2>MWE</h2>\n\n<pre><code>In [0]: df = pd.DataFrame(\n            [[1, \"abc\"],\n             [2, \"bce\"]],\n            columns=[\"number\", \"string\"]\n        )    \nIn [1]: df\nOut[1]: \n   number string\n0       1    abc\n1       2    bce\n\nIn [2]: df[~df.string.str.contains(\"ab\")]\nOut[2]: \n   number string\n1       2    bce\n</code></pre>\n\n<h2>Timing</h2>\n\n<p>Ran a small timing test on the following synthetic DataFrame with three million random strings the size of a tweet</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df = pd.DataFrame(\n    [\n        \"\".join(random.choices(string.ascii_lowercase, k=280))\n        for _ in range(3000000)\n    ],\n    columns=[\"strings\"],\n)\n</code></pre>\n\n<p>and the keyword <code>abc</code>, comparing the original solution, <a href=\"https://stackoverflow.com/a/56677097/3350448\">map + regex</a> and this proposed solution (<code>str.contains</code>). The results are as follows.</p>\n\n<pre><code>original       99s\nmap + regex    21s\nstr.contains  2.8s\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1035, "user_id": 5825760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u1You.png?s=128&g=1", "display_name": "B.Gees", "link": "https://stackoverflow.com/users/5825760/b-gees"}, "is_accepted": false, "score": 0, "last_activity_date": 1560986491, "creation_date": 1560986491, "answer_id": 56677097, "question_id": 56676842, "link": "https://stackoverflow.com/questions/56676842/speed-up-a-loop-filtering-a-string/56677097#56677097", "title": "Speed up a loop filtering a string", "body": "<p>I create the following example:</p>\n\n<pre><code>df = pd.DataFrame(\"\"\"Suggested order for Amazon Prime Doctor Who series\nWhy did pressing the joystick button spit out keypresses?\nWhy tighten down in a criss-cross pattern?\nWhat exactly is the 'online' in OLAP and OLTP?\nHow is hair tissue mineral analysis performed?\nUnderstanding the reasoning of the woman who agreed with King Solomon to \"cut the baby in half\"\nCan Ogre clerics use Purify Food and Drink on humanoid characters?\nHeavily limited premature compiler translates text into excecutable python code\nHow many children?\nWhy are &lt; or &gt; required to use /dev/tcp\nHot coffee brewing solutions for deep woods camping\nMinor traveling without parents from USA to Sweden\nNon-flat partitions of a set\nAre springs compressed by energy, or by momentum?\nWhat is \"industrial ethernet\"?\nWhat does the hyphen \"-\" mean in \"tar xzf -\"?\nHow long would it take to cross the Channel in 1890's?\nWhy do all the teams that I have worked with always finish a sprint without completion of all the stories?\nIs it illegal to withhold someone's passport and green card in California?\nWhen to remove insignificant variables?\nWhy does Linux list NVMe drives as /dev/nvme0 instead of /dev/sda?\nCut the gold chain\nWhy do some professors with PhDs leave their professorships to teach high school?\n\"How can you guarantee that you won't change/quit job after just couple of months?\" How to respond?\"\"\".split('\\n'), columns = ['Sentence'])\n</code></pre>\n\n<p>You can juste create a simple function with regular expression (more flexible in case of capital characters):</p>\n\n<pre><code>def tweetsFilter(s, keyword):\n    return bool(re.match('(?i).*(' + keyword + ').*', s))\n</code></pre>\n\n<p>This function can be called to obtain the boolean series of strings which contains the specific keywords. The <code>map</code>can speed up your script (you need to test!!!):</p>\n\n<pre><code>keyword = 'Why'\nsel = df.Sentence.map(lambda x: tweetsFilter(x, keyword))\ndf[sel]\n</code></pre>\n\n<p>And we obtained:</p>\n\n<pre><code>    Sentence\n1   Why did pressing the joystick button spit out ...\n2   Why tighten down in a criss-cross pattern?\n9   Why are &lt; or &gt; required to use /dev/tcp\n17  Why do all the teams that I have worked with a...\n20  Why does Linux list NVMe drives as /dev/nvme0 ...\n22  Why do some professors with PhDs leave their p...\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11673000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2042e85daf9a16287199109fc64f5d1b?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/11673000/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3591, "favorite_count": 0, "closed_date": 1560993460, "accepted_answer_id": 56677045, "answer_count": 2, "score": 2, "last_activity_date": 1561020713, "creation_date": 1560984442, "last_edit_date": 1560986504, "question_id": 56676842, "link": "https://stackoverflow.com/questions/56676842/speed-up-a-loop-filtering-a-string", "closed_reason": "Duplicate", "title": "Speed up a loop filtering a string", "body": "<p>I want to filter a column containing tweets (3+million rows) in a pandas dataframe by dropping those tweets that do not contain a keyword/s. To do this, I'm running the following loop (sorry, I'm new to python):</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>filter_word_indicators = []\nfor i in range(1, len(df)):\n    if 'filter_word' in str(df.tweets[0:i]):\n        indicator = 1 \n    else:\n        indicator = 0\n    filter_word_indicators.append(indicator)\n</code></pre>\n\n<p>The idea is to then drop tweets if the indicator equals 0. The problem is that this loop is taking forever to run. I'm sure there is a better way to drop tweets that do not contain my 'filer_word', but I don't know how to code it up. Any help would be great.</p>\n"}, {"tags": ["python", "rsa", "digital-signature"], "comments": [{"owner": {"reputation": 1239, "user_id": 1164866, "user_type": "registered", "profile_image": "https://graph.facebook.com/1403425322/picture?type=large", "display_name": "Javier Neyra", "link": "https://stackoverflow.com/users/1164866/javier-neyra"}, "edited": false, "score": 4, "creation_date": 1560984654, "post_id": 56676828, "comment_id": 99920630, "body": "i think you should read this: <a href=\"https://crypto.stackexchange.com/questions/9896/how-does-rsa-signature-verification-work\" title=\"how does rsa signature verification work\">crypto.stackexchange.com/questions/9896/&hellip;</a>"}, {"owner": {"reputation": 57, "user_id": 10037835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59684994594e5e9cf2a483c3bd271f93?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas M", "link": "https://stackoverflow.com/users/10037835/thomas-m"}, "reply_to_user": {"reputation": 1239, "user_id": 1164866, "user_type": "registered", "profile_image": "https://graph.facebook.com/1403425322/picture?type=large", "display_name": "Javier Neyra", "link": "https://stackoverflow.com/users/1164866/javier-neyra"}, "edited": false, "score": 0, "creation_date": 1560985306, "post_id": 56676828, "comment_id": 99920777, "body": "I saw that - what I don&#39;t get is that it says you can: You can use public key to &quot;encrypt&quot; (or &quot;decrypt&quot; which is same in &quot;textbook&quot; RSA) the signature and get hashed message. If the hashed message equals hashed message, then you verified the message being correctly signed. Does this mean just RSA encrypt the signature and then hash that, which will give you the same as the hashed &#39;message&#39;?"}, {"owner": {"reputation": 57, "user_id": 10037835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59684994594e5e9cf2a483c3bd271f93?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas M", "link": "https://stackoverflow.com/users/10037835/thomas-m"}, "reply_to_user": {"reputation": 1239, "user_id": 1164866, "user_type": "registered", "profile_image": "https://graph.facebook.com/1403425322/picture?type=large", "display_name": "Javier Neyra", "link": "https://stackoverflow.com/users/1164866/javier-neyra"}, "edited": false, "score": 0, "creation_date": 1560991449, "post_id": 56676828, "comment_id": 99921932, "body": "more specifically - the procedure explained in the answer in this thread: <a href=\"https://stackoverflow.com/questions/18257185/how-does-a-public-key-verify-a-signature\" title=\"how does a public key verify a signature\">stackoverflow.com/questions/18257185/&hellip;</a> I am looking for how to do that using python crypto libraries. Thus far I have not been able to figure out how"}, {"owner": {"reputation": 1239, "user_id": 1164866, "user_type": "registered", "profile_image": "https://graph.facebook.com/1403425322/picture?type=large", "display_name": "Javier Neyra", "link": "https://stackoverflow.com/users/1164866/javier-neyra"}, "edited": false, "score": 0, "creation_date": 1561111569, "post_id": 56676828, "comment_id": 99966151, "body": "when you say &quot; What I need is a way to take the public key and signature and get the SHA-256 hash back from that to compare it to the hash I&#39;ve generated.&quot; you do this by &quot;decrypting&quot; de signature and comparing de result to de original data, wich you already have, if what you decrypted matches the data, then you are certain that the data came from the holder of the private key, thats the whole idea. take for example how a signed jwt works, the header tells you how it was signed, the body is the data and the last part is the signature which you verify using a public key."}, {"owner": {"reputation": 1239, "user_id": 1164866, "user_type": "registered", "profile_image": "https://graph.facebook.com/1403425322/picture?type=large", "display_name": "Javier Neyra", "link": "https://stackoverflow.com/users/1164866/javier-neyra"}, "edited": false, "score": 0, "creation_date": 1561111831, "post_id": 56676828, "comment_id": 99966277, "body": "here is an example in python. <a href=\"https://gist.github.com/lkdocs/6519372\" rel=\"nofollow noreferrer\">gist.github.com/lkdocs/6519372</a>."}, {"owner": {"reputation": 87, "user_id": 11477760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/122b7a96b721e3dca1809e57b889dfc5?s=128&d=identicon&r=PG&f=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/11477760/justin"}, "edited": false, "score": 0, "creation_date": 1607022420, "post_id": 56676828, "comment_id": 115149107, "body": "Did you ever figure this out? I&#39;m having the same issue - trying to get the original hash from the digital signature"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 10037835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59684994594e5e9cf2a483c3bd271f93?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas M", "link": "https://stackoverflow.com/users/10037835/thomas-m"}, "edited": false, "score": 0, "creation_date": 1561044976, "post_id": 56679386, "comment_id": 99944339, "body": "How do you do this in python is my question - I know you need to decrypt with public key. is it just simply rsa_pub_key.decrypt(digital_signature)? I&#39;ve tried doing that but I get this error: <code>File &quot;&#47;usr&#47;local&#47;lib&#47;python2.7&#47;site-packages&#47;Crypto&#47;PublicKey&#47;RSA&zwnj;&#8203;.py&quot;, line 239, in _decrypt     mp = self.key._decrypt(cp) TypeError: Private key not available in this object</code>"}, {"owner": {"reputation": 2456, "user_id": 11451509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d07f2b18591b9a2aaf34b3ca5a777583?s=128&d=identicon&r=PG&f=1", "display_name": "Roland Weber", "link": "https://stackoverflow.com/users/11451509/roland-weber"}, "reply_to_user": {"reputation": 57, "user_id": 10037835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59684994594e5e9cf2a483c3bd271f93?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas M", "link": "https://stackoverflow.com/users/10037835/thomas-m"}, "edited": false, "score": 0, "creation_date": 1561106147, "post_id": 56679386, "comment_id": 99963432, "body": "@ThomasM The please edit your question to make clear what you&#39;re asking. Right now, it still says &quot;have run into problems because I don&#39;t have the RSA private key&quot;. Don&#39;t decrypt at all if you&#39;re verifying a signature, the libraries have extra code for the latter, see <a href=\"https://stackoverflow.com/questions/39402792/need-help-verifying-a-signature-with-the-python-cryptography-library\" title=\"need help verifying a signature with the python cryptography library\">stackoverflow.com/questions/39402792/&hellip;</a> And switch to Python 3 before the year is out... <a href=\"https://pythonclock.org/\" rel=\"nofollow noreferrer\">pythonclock.org</a>"}], "tags": [], "owner": {"reputation": 2456, "user_id": 11451509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d07f2b18591b9a2aaf34b3ca5a777583?s=128&d=identicon&r=PG&f=1", "display_name": "Roland Weber", "link": "https://stackoverflow.com/users/11451509/roland-weber"}, "is_accepted": false, "score": 0, "last_activity_date": 1561007915, "creation_date": 1561007915, "answer_id": 56679386, "question_id": 56676828, "link": "https://stackoverflow.com/questions/56676828/how-to-get-the-original-hashed-input-to-an-rsa-digital-signature/56679386#56679386", "title": "How to get the original hashed input to an RSA digital signature?", "body": "<p>The original hash was signed with the private key. To get the original hash, you need to decrypt the signature with the <em>public</em> key, not with the private key.</p>\n"}], "owner": {"reputation": 57, "user_id": 10037835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59684994594e5e9cf2a483c3bd271f93?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas M", "link": "https://stackoverflow.com/users/10037835/thomas-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 670, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1561007915, "creation_date": 1560984290, "question_id": 56676828, "link": "https://stackoverflow.com/questions/56676828/how-to-get-the-original-hashed-input-to-an-rsa-digital-signature", "title": "How to get the original hashed input to an RSA digital signature?", "body": "<p>I am given a network packet whose last 64 bytes (128 hex characters) are the RSA-512 digital signature of the SHA-256 hash of the packet. I take a truncated version of this packet (everything except the last 64 bytes) and calculate the hash myself, which is working fine, however I need a way to get back the hash that generated the signature in the first place</p>\n\n<p>I have tried to do this in Python and have run into problems because I don't have the RSA private key, only the public key and the Digital Signature. What I need is a way to take the public key and signature and get the SHA-256 hash back from that to compare it to the hash I've generated. Is there a way to do this? Any crypto libraries would be fine. I am using hashlib to generate the hash</p>\n"}, {"tags": ["python", "pdf", "pymupdf"], "answers": [{"tags": [], "owner": {"reputation": 117, "user_id": 8868620, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Y_1lakFi_0g/AAAAAAAAAAI/AAAAAAAAAFA/ZCyoJ4s5RTg/photo.jpg?sz=128", "display_name": "Stephen Mason", "link": "https://stackoverflow.com/users/8868620/stephen-mason"}, "is_accepted": false, "score": 0, "last_activity_date": 1560986058, "creation_date": 1560986058, "answer_id": 56677050, "question_id": 56676815, "link": "https://stackoverflow.com/questions/56676815/how-do-i-access-the-text-from-a-specific-pdf-page-rather-than-the-entire-documen/56677050#56677050", "title": "How do I access the text from a specific pdf page rather than the entire document", "body": "<p>You may want to consider <a href=\"https://pypi.org/project/PyPDF2/\" rel=\"nofollow noreferrer\">PyPDF2</a>, its <code>PdfFileReader</code> class has a <code>getPage</code> method</p>\n\n<p>Documentation : <a href=\"https://pythonhosted.org/PyPDF2/PdfFileReader.html\" rel=\"nofollow noreferrer\">PyPDF2 docs</a></p>\n"}, {"tags": [], "owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "is_accepted": false, "score": 0, "last_activity_date": 1565956055, "last_edit_date": 1565956055, "creation_date": 1565951489, "answer_id": 57523061, "question_id": 56676815, "link": "https://stackoverflow.com/questions/56676815/how-do-i-access-the-text-from-a-specific-pdf-page-rather-than-the-entire-documen/57523061#57523061", "title": "How do I access the text from a specific pdf page rather than the entire document", "body": "<p>Try the following to get the text from any specific page of that pdf.</p>\n\n<pre><code>import fitz\n\npath = r''\n\ndoc = fitz.open(path)\npage = doc.loadPage(1) #put here the page number\npage_to_text = page.getText(\"text\")\nprint(page_to_text)\n</code></pre>\n"}], "owner": {"reputation": 4676, "user_id": 30105, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a1dc4bddf38de8351ae70e98845242e9?s=128&d=identicon&r=PG", "display_name": "PyNEwbie", "link": "https://stackoverflow.com/users/30105/pynewbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 664, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1565956055, "creation_date": 1560984208, "last_edit_date": 1560990141, "question_id": 56676815, "link": "https://stackoverflow.com/questions/56676815/how-do-i-access-the-text-from-a-specific-pdf-page-rather-than-the-entire-documen", "title": "How do I access the text from a specific pdf page rather than the entire document", "body": "<p>I am trying to extract some stuff from some pdf documents.  I have been mucking around with various tools though I have invested the most in pdfminer and pymupdf.  I started with pdfminer but started testing pymupdf after not being able to address one specific problem - that is when my pdf document has a number of pages I want to choose whether or not to process each specific page.  However, the problem I am running into with both libraries is that when I try to retrieve the text from one specific page (or another) the text that is returned is all of the text from the document.</p>\n\n<p>Here is a link to a <a href=\"http://s000.tinyupload.com/index.php?file_id=43182414417945441664\" rel=\"nofollow noreferrer\">document</a> that has 57 pages.</p>\n\n<p>I will focus here on the case of using pymupdf</p>\n\n<p>Here is some code</p>\n\n<pre><code>import fitz\ndoc = fitz.open('local_path_to_file_from_link_above')\nfor page in doc:\n    text = page.getText().encode(\"utf8\")\n    break\n</code></pre>\n\n<p>I am breaking here to confirm that I pulled the text from one and only one page - but when I inspect text I discover it has almost all the text from the entire document (all 57 pages)</p>\n\n<p>So I was curious if despite the appearance of page boundaries in the pdf file - perhaps they do not exist so I used the pageCount attribute/property/method to determine if the pages were present - they seem to be</p>\n\n<pre><code>&gt;&gt;&gt; doc.pageCount\n57\n</code></pre>\n\n<p>It is a little hard to describe the output when I loop through all of the pages each page does not have exactly all of the content from all the pages but it has almost all of the content.  I determined this by using the following code</p>\n\n<pre><code>mydict = dict()\nfor n, page in doc:\n    print n, len(p.getText())\n    mydict[n] = p.getText()\n</code></pre>\n\n<p>Here is the output - for completeness</p>\n\n<pre><code>0 45491\n1 45491\n2 45491\n3 45491\n4 45491\n5 45491\n6 45491\n7 45491\n8 45491\n9 45492\n10 45492\n11 45492\n12 45492\n13 45492\n14 45492\n15 45492\n16 45492\n17 45492\n18 45492\n19 45492\n20 45492\n21 45492\n22 45492\n23 45492\n24 45492\n25 45492\n26 45492\n27 45492\n28 45492\n29 88408\n30 42990\n31 42990\n32 42990\n33 42990\n34 42990\n35 42990\n36 42990\n37 42990\n38 42990\n39 42990\n40 42990\n41 42990\n42 42990\n43 42990\n44 42990\n45 42990\n46 42990\n47 42990\n48 42990\n49 42990\n50 42990\n51 42990\n52 42990\n53 42990\n54 42990\n55 42990\n56 42990\n</code></pre>\n\n<p>So there is an aberration regarding the content of page 29 and there is variation in the length of the text retrieved from the pages but poking around at it there seems to be significant overlap for example</p>\n\n<pre><code>&gt;&gt;&gt; mydict[0][0:5000] == mydict[1][0:5000]\nTrue\n</code></pre>\n\n<p>but</p>\n\n<pre><code>&gt;&gt;&gt; mydict[0][-5000:] == mydict[1][-5000:]\nFalse\n</code></pre>\n\n<p>To sum this up - the library seems to understand the existing page boundaries but the text that is retrieved for an individual page is almost all of the text in the document.  Since the generates a good ToC - I want to use that and the page numbers that are provided from that ToC to identify the specific pages that I want to further parse and extract data.  </p>\n\n<p>I will observe that I ran into similar problems trying to use pdfminer.  I could retrieve all of the text but not just the text from a specific, specified page.</p>\n"}, {"tags": ["python", "bert-language-model"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4747688, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-inGCtM6TXec/AAAAAAAAAAI/AAAAAAAABvg/Veo7IeBWmQo/photo.jpg?sz=128", "display_name": "AAZ", "link": "https://stackoverflow.com/users/4747688/aaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1561415537, "creation_date": 1561415537, "answer_id": 56744721, "question_id": 56676804, "link": "https://stackoverflow.com/questions/56676804/can-python-flair-interpret-discontinuous-annotations/56744721#56744721", "title": "Can Python Flair interpret discontinuous annotations?", "body": "<p>Flair does not support discontinuous and overlapping annotations. \nSee more at <a href=\"https://github.com/zalandoresearch/flair/issues/824#issuecomment-504322361\" rel=\"nofollow noreferrer\">https://github.com/zalandoresearch/flair/issues/824#issuecomment-504322361</a></p>\n"}], "owner": {"reputation": 1, "user_id": 4747688, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-inGCtM6TXec/AAAAAAAAAAI/AAAAAAAABvg/Veo7IeBWmQo/photo.jpg?sz=128", "display_name": "AAZ", "link": "https://stackoverflow.com/users/4747688/aaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1561415537, "creation_date": 1560984143, "question_id": 56676804, "link": "https://stackoverflow.com/questions/56676804/can-python-flair-interpret-discontinuous-annotations", "title": "Can Python Flair interpret discontinuous annotations?", "body": "<p>I'm working on training a sequential labeling model in Python Flair. My raw text data has concept phrases that I want the model to be able to identify that are in some cases represented by a set of tokens that are not continuous, with words in between. An example is \"potassium and magnesium replacement\" where \"potassium replacement\" is one concept that is represented by discontinuous tokens, and \"magnesium replacement\" is another concept which is continuous yet overlaps the first. \nI trained another Flair model where all concepts could be represented by a single token, and building corpus CoNLL files for that data was pretty straight forward. In the case, the discontinuous and overlapping concepts bring up 3 questions:</p>\n\n<ol>\n<li>Does Flair sequential labeling model recognize multi-token concepts, like \"magnesium replacement\" as a single concept, if I mark it appropriately in CoNLL file as:</li>\n</ol>\n\n<p>\"magnesium B-CONC1</p>\n\n<p>replacement I-CONC1\"</p>\n\n<ol start=\"2\">\n<li>Does it recognize discontinuous concepts as \"potassium replacement\" in the phrase above:</li>\n</ol>\n\n<p>\"potassium B-CONC2</p>\n\n<p>and O</p>\n\n<p>magnesium O </p>\n\n<p>replacement I-CONC2\"</p>\n\n<ol start=\"3\">\n<li>How can I represent overlapping concepts in CoNLL file? Is there some alternative way of representing corpus with raw text and a list of start/end indices?</li>\n</ol>\n\n<p>PS It must be pretty clear in the context, but by word concept, I mean a single- or multi-token tag/term that I'm trying to train the model to identify.</p>\n\n<p>I appreciate your advice or information</p>\n"}, {"tags": ["python", "kivy", "pyinstaller"], "answers": [{"tags": [], "owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "is_accepted": true, "score": 3, "last_activity_date": 1560989245, "creation_date": 1560989245, "answer_id": 56677391, "question_id": 56676755, "link": "https://stackoverflow.com/questions/56676755/generate-a-single-exe-using-pyinstaller-for-a-kivy-app/56677391#56677391", "title": "Generate a single exe using pyinstaller for a kivy app", "body": "<p>Running <code>Pyinstaller</code> with a <code>.spec</code> file argument makes it ignore almost any options that you provide on the command line. I would recommend doing a <code>pyi-makespec --onefile touch.py</code> to get a one file starting <code>.spec</code> file. Then edit the <code>touch.spec</code> file to add the <code>sdl</code> stuff. Just add the same line (<code>*[Tree(p) for p in (sdl2.dep_bins + glew.dep_bins)]</code>) in the <code>exe</code> portion just after the <code>a.datas</code> line (just like you have it in the <code>coll</code> section). Then just run <code>python -m PyInstaller touch.spec</code>.</p>\n"}], "owner": {"reputation": 1749, "user_id": 1179317, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c97e780a81e79fa27fda17b56895512b?s=128&d=identicon&r=PG", "display_name": "user1179317", "link": "https://stackoverflow.com/users/1179317/user1179317"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 669, "favorite_count": 0, "accepted_answer_id": 56677391, "answer_count": 1, "score": 2, "last_activity_date": 1560989245, "creation_date": 1560983800, "question_id": 56676755, "link": "https://stackoverflow.com/questions/56676755/generate-a-single-exe-using-pyinstaller-for-a-kivy-app", "title": "Generate a single exe using pyinstaller for a kivy app", "body": "<p>I have a simple kivy app that I would like to generate an single exe for.  </p>\n\n<p>I generated a virtual env using <code>virtualenv --python=C:\\Python27\\python.exe &lt;path/to/new/virtualenv/&gt;</code>.  I then activate that environment.</p>\n\n<p>Within the virtualenv, I then install the following modules:</p>\n\n<pre><code>python -m pip install --upgrade pip wheel setuptools\n\npython -m pip install docutils pygments pypiwin32 kivy.deps.sdl2 kivy.deps.glew --extra-index-url https://kivy.org/downloads/packages/simple/\n\npython -m pip install kivy\n\npip install pyinstaller\n</code></pre>\n\n<p>I then have the following files below.</p>\n\n<p>The <code>touch.py</code> file contains the code below:</p>\n\n<pre><code>import ctypes\nimport kivy\nkivy.require('1.10.0')\nfrom kivy.app import App\nfrom kivy.uix.gridlayout import GridLayout\nfrom kivy.uix.button import Button\nfrom kivy.core.window import Window\n\nSIZE = 2\nNUM_BOXES = SIZE * SIZE\n\nclass MyGrid(GridLayout):\n    def __init__(self, app, matrix, m_size, **kwargs):\n        super(MyGrid, self).__init__(**kwargs)\n        self.app = app\n        self.matrix = matrix\n        self.m_size = m_size\n        self.sq_size_x = Window.size[0] / m_size\n        self.sq_size_y = Window.size[1] / m_size\n        self.count = set()\n\n    def on_touch_down(self, touch):\n        pass\n\n    def on_touch_move(self, touch):\n        try:\n            mouse_x, mouse_y = touch.pos\n            section_x = int(mouse_x // self.sq_size_x)\n            section_y = int(mouse_y // self.sq_size_y)\n\n            self.matrix[section_y][section_x].background_color = (0, 1, 0, 1)\n\n            self.count.add(str(section_y) + \"_\" + str(section_x))\n        except:\n            ## DONT KNOW WHY IT GETS OUT OF RANGE SOMETIMES\n            pass\n\n        ## FULLY COLORED, CLOSE APP\n        if len(self.count) &gt;= NUM_BOXES:\n            self.app.stop()\n\n    def on_touch_up(self, touch):\n        pass\n\nclass MyApp(App):\n    def populate_matrix(self):\n        matrix = [ [ Button(text=\"\") for x in range(self.m_size) ] for y in range(self.m_size)]\n        return matrix\n\n    def populate_layout(self):\n        for y in range(self.m_size-1,-1,-1): ## FILL y BACKWARDS, SINCE BOTTOM IS 0\n            for x in range(self.m_size):\n                self.layout.add_widget(self.matrix[y][x])\n\n    def get_screen_size(self):\n        user32 = ctypes.windll.user32\n        screensize = user32.GetSystemMetrics(0), user32.GetSystemMetrics(1)\n\n        return screensize\n\n    def build(self):\n        screensize = self.get_screen_size()\n        Window.size = (screensize[0], screensize[1])\n        Window.fullscreen = 'auto'  ## MAKES APP FULLSCREEN BUT HAS COORDINATE ISSUES (IF ONLY BYITSELF)\n        Window.borderless = True\n        self.m_size = SIZE\n        self.matrix = self.populate_matrix()\n        self.layout = MyGrid(self, self.matrix, self.m_size, cols=self.m_size)\n        self.populate_layout()\n\n        return self.layout\n\nif __name__ == \"__main__\":\n    MyApp().run()\n</code></pre>\n\n<p>The <code>touch.spec</code> file contains the code below:</p>\n\n<pre><code># -*- mode: python -*-\n\nblock_cipher = None\n\n\nfrom kivy_deps import sdl2, glew\n\na = Analysis(['touch.py'],\n             pathex=[\"C:\\\\Users\\\\XXX\\\\Desktop\\\\testingKivy\"],\n             binaries=[],\n             datas=[],\n             hiddenimports=[],\n             hookspath=[],\n             runtime_hooks=[],\n             excludes=[],\n             win_no_prefer_redirects=False,\n             win_private_assemblies=False,\n             cipher=block_cipher,\n             noarchive=False)\npyz = PYZ(a.pure, a.zipped_data,\n             cipher=block_cipher)\nexe = EXE(pyz,\n          a.scripts,\n          a.binaries,\n          a.zipfiles,\n          a.datas,\n          [],\n          name='touch',\n          debug=False,\n          bootloader_ignore_signals=False,\n          strip=False,\n          upx=True,\n          runtime_tmpdir=None,\n          console=True )\n\ncoll = COLLECT(exe, Tree(\"C:\\\\Users\\\\XXX\\\\Desktop\\\\testingKivy\"),\n   a.binaries,\n   a.zipfiles,\n   a.datas,\n   *[Tree(p) for p in (sdl2.dep_bins + glew.dep_bins)],\n   strip=False,\n   upx=True,\n   name='touchtracer')\n</code></pre>\n\n<p>I then run the command:</p>\n\n<pre><code>python -m PyInstaller --onefile touch.spec\n</code></pre>\n\n<p>When executing just <code>pyinstaller --onefile touch.py</code>, the exe generated doesnt work.  It seems like some of the dependencies under sld2 is not packaged correctly.  Thus I ended up updating the <code>.spec</code> file with the above.</p>\n\n<p>When using the touch.spec file, it does generate a single exe, but that doesnt work by itself.  Under the <code>dist</code> folder, it generates a touch.exe (which doesnt work by itself), but under dist folder, it also generates a folder <code>touchtracer</code>, which has a lot of files/dlls and also a touch.exe (which works fine).  My question is, is there a way to package this into a single exe?</p>\n\n<p>Somebody did say \"make sure in the spec file there is no collect step:</p>\n\n<p>\"In one-file mode, there is no call to COLLECT, and the EXE instance receives all of the scripts, modules and binaries.\"\" (<a href=\"https://stackoverflow.com/questions/47143315/using-onefile-with-a-spec-in-pyinstaller\">link</a>).  But I dont know how to include the sdl2 dependencies in another way.  Not sure how to use --add-data correctly in this case.</p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1560984016, "post_id": 56676722, "comment_id": 99920501, "body": "&quot;At this point I wasn&#39;t expecting anything to have happened as I haven&#39;t called any keys yet.&quot; One does not call keys. One calls <i>functions</i>, which you did here: <code>printhello()</code> and here: <code>printgoaway()</code>. In other words, the values in your dictionary are not the function objects, they are the result of <i>calling</i> the function objects, which aren&#39;t functions at all."}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1560984172, "post_id": 56676722, "comment_id": 99920539, "body": "Consider just looking up the functions in a class or module <code>__dict__</code>. But in that case, be sure to verify that they&#39;re functions you want, often by requiring a <code>cmd_</code> prefix or similar."}], "answers": [{"tags": [], "owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "is_accepted": false, "score": 0, "last_activity_date": 1560983830, "creation_date": 1560983830, "answer_id": 56676758, "question_id": 56676722, "link": "https://stackoverflow.com/questions/56676722/how-to-put-functions-into-a-dictionary-so-that-they-can-be-iterated-over/56676758#56676758", "title": "How to put functions into a dictionary so that they can be iterated over?", "body": "<p>The problem is that you are placing parentheses after the function names in the dictionary:</p>\n\n<pre><code>x={1:printhello(),2:printgoaway()}\n</code></pre>\n\n<p>This executes the functions and puts the returned values into the dictionary. Try removing the parentheses:</p>\n\n<pre><code>x={1:printhello ,2:printgoaway}\n</code></pre>\n\n<p>This puts the functions themselves in the dictionaries.</p>\n\n<p>As an example, here is a section of one of my programs:</p>\n\n<pre><code>OPERATIONS = {'+': sum, '*': rdmath.prod}\n\ndef evaluate_subtree(node_list, ndx: int) -&gt; int:\n    \"\"\"Evaluate the subtree inside node_list with the root at ndx.\n    Use recursion and postorder in depth first search.\"\"\"\n    this_payload, these_children = node_list[ndx]\n    if not these_children:  # if a leaf node\n        return int(this_payload)\n    return OPERATIONS[this_payload](evaluate_subtree(node_list, child)\n                                    for child in these_children)\n</code></pre>\n\n<p>Note that I put the <code>sum</code> function and <code>rdmath.prod</code> (which calculates the product of the members of an iterable) into the dictionary <code>OPERATIONS</code>. The last line of my snippet uses the dictionary to choose one of the two functions then executes the function on a generator comprehension, and the resulting value is returned. (So the values in the generator comprehension are either added or multiplied.)</p>\n\n<p>Try something like that and see if it works for you.</p>\n"}, {"tags": [], "owner": {"reputation": 1311, "user_id": 10766766, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqW5t.jpg?s=128&g=1", "display_name": "Raphael", "link": "https://stackoverflow.com/users/10766766/raphael"}, "is_accepted": false, "score": 0, "last_activity_date": 1560983840, "creation_date": 1560983840, "answer_id": 56676761, "question_id": 56676722, "link": "https://stackoverflow.com/questions/56676722/how-to-put-functions-into-a-dictionary-so-that-they-can-be-iterated-over/56676761#56676761", "title": "How to put functions into a dictionary so that they can be iterated over?", "body": "<p>printhello() runs printhello</p>\n\n<p>use <code>x={1:printhello, 2:printgoaway}</code>to store your functions and <code>x[1]()</code> to call it</p>\n"}, {"tags": [], "owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "is_accepted": false, "score": 2, "last_activity_date": 1560983879, "creation_date": 1560983879, "answer_id": 56676770, "question_id": 56676722, "link": "https://stackoverflow.com/questions/56676722/how-to-put-functions-into-a-dictionary-so-that-they-can-be-iterated-over/56676770#56676770", "title": "How to put functions into a dictionary so that they can be iterated over?", "body": "<p>When you put <code>()</code> after the function name, that tells Python to call the function immediately.</p>\n\n<p>You should change your code to do this:</p>\n\n<pre><code>x={1:printhello,2:printgoaway}\n</code></pre>\n\n<p>So that your dictionary contains references to the functions, instead of the result of calling them up front.</p>\n\n<p>Then you can call them later like this:</p>\n\n<pre><code>x[0]()\n</code></pre>\n\n<p>Note the brackets here, and lack of brackets in the previous line.</p>\n"}], "owner": {"reputation": 49, "user_id": 8677995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78b4ccf84ad9d0563a0c0f2477bf9bec?s=128&d=identicon&r=PG&f=1", "display_name": "Liam Michel", "link": "https://stackoverflow.com/users/8677995/liam-michel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "closed_date": 1560985514, "answer_count": 3, "score": 0, "last_activity_date": 1560984497, "creation_date": 1560983589, "last_edit_date": 1560984497, "question_id": 56676722, "link": "https://stackoverflow.com/questions/56676722/how-to-put-functions-into-a-dictionary-so-that-they-can-be-iterated-over", "closed_reason": "Duplicate", "title": "How to put functions into a dictionary so that they can be iterated over?", "body": "<p>I'm trying to make a dictionary which contains functions as the values. The idea is that the difficulty variable will change throughout the program, and this will affect which function we call from the dictionary.\nFor the sake of this, I'm not going to show the program, I've made a simple mock up that demonstrates the issue I'm having.</p>\n\n<p>Whenever I run the code, without even entering a key, it runs the functions. Why is this?</p>\n\n<pre><code>def printhello():\n    print(\"hello\")\n\ndef printgoaway():\n    print(\"go away\")\n\n\nx={1:printhello(),2:printgoaway()}\n</code></pre>\n\n<p>At this point I wasn't expecting anything to have happened as I haven't called any keys yet. It runs the functions anyway and prints the values.</p>\n\n<p>If I then call them by doing <code>x[1]</code> or <code>x[2]</code>, nothing happens.</p>\n\n<p>Can someone explain to me how I would use functions in a dictionary, and stop them from automatically calling them when I make the dictionary</p>\n"}, {"tags": ["python", "python-3.x", "parsing", "web-scraping", "beautifulsoup"], "comments": [{"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "edited": false, "score": 1, "creation_date": 1560984557, "post_id": 56676695, "comment_id": 99920619, "body": "Link does not work."}, {"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "edited": false, "score": 1, "creation_date": 1560984997, "post_id": 56676695, "comment_id": 99920711, "body": "Do you want just &lt;title&gt;Episode 116&lt;/title&gt;       &lt;link&gt;<a href=\"http://feeds.thisiscriminal.com/~r/...&lt;/link\" rel=\"nofollow noreferrer\">feeds.thisiscriminal.com/~r/...&lt;/link</a>&gt;  ?"}, {"owner": {"reputation": 101, "user_id": 11611598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b97f5f1017ad53f7a38d97eca1d552f?s=128&d=identicon&r=PG&f=1", "display_name": "leopheard", "link": "https://stackoverflow.com/users/11611598/leopheard"}, "reply_to_user": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "edited": false, "score": 0, "creation_date": 1560985682, "post_id": 56676695, "comment_id": 99920854, "body": "@QHarr Have updated link thanks. Yeah, just the Ep 116 title and then 115, etc. It&#39;st just picking up the first two erroneously because they are also surrounded with &lt;title&gt; tags too"}, {"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "edited": false, "score": 0, "creation_date": 1560985747, "post_id": 56676695, "comment_id": 99920868, "body": "So, do you want just the link following the title episode? e.g. <a href=\"http://feeds.thisiscriminal.com/~r/\" rel=\"nofollow noreferrer\">feeds.thisiscriminal.com/~r</a>..  or the link before? Or all links?"}, {"owner": {"reputation": 101, "user_id": 11611598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b97f5f1017ad53f7a38d97eca1d552f?s=128&d=identicon&r=PG&f=1", "display_name": "leopheard", "link": "https://stackoverflow.com/users/11611598/leopheard"}, "reply_to_user": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "edited": false, "score": 0, "creation_date": 1560986194, "post_id": 56676695, "comment_id": 99920960, "body": "@QHarr All links starting the numbered episodes thanks. The first two seem to be just website header &lt;titles&gt; not individual episode titles, so there&#39;s no .mp3 associated with them link episode 116 and beyond"}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 11611598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b97f5f1017ad53f7a38d97eca1d552f?s=128&d=identicon&r=PG&f=1", "display_name": "leopheard", "link": "https://stackoverflow.com/users/11611598/leopheard"}, "edited": false, "score": 0, "creation_date": 1560987838, "post_id": 56677203, "comment_id": 99921310, "body": "That looks good thanks, only thing is I&#39;m not sure how I&#39;d add it to the existing code? e.g. the get_playable_podcast section: <a href=\"https://github.com/leopheard/thisiscriminal/blob/master/resources/lib/thisiscriminal.py\" rel=\"nofollow noreferrer\">github.com/leopheard/thisiscriminal/blob/master/resources/li&zwnj;&#8203;b/&hellip;</a>"}, {"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "reply_to_user": {"reputation": 101, "user_id": 11611598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b97f5f1017ad53f7a38d97eca1d552f?s=128&d=identicon&r=PG&f=1", "display_name": "leopheard", "link": "https://stackoverflow.com/users/11611598/leopheard"}, "edited": false, "score": 0, "creation_date": 1560988455, "post_id": 56677203, "comment_id": 99921414, "body": "That might need to be a new question where you include the existing code?"}], "tags": [], "owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "is_accepted": false, "score": 2, "last_activity_date": 1560988383, "last_edit_date": 1560988383, "creation_date": 1560987348, "answer_id": 56677203, "question_id": 56676695, "link": "https://stackoverflow.com/questions/56676695/using-beautifulsoup-to-scrape-tags-from-website-but-skip-ignore-some-others/56677203#56677203", "title": "Using Beautifulsoup to scrape tags from website but skip / ignore some others", "body": "<p>Do you want something like as follows?</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup as bs\n\nr = requests.get('http://feeds.thisiscriminal.com/CriminalShow')\nsoup = bs(r.content, 'lxml')\n\nfor item in soup.select('item'):\n    print(item.select_one('title').text)\n    print([i.get('href', i.text) for i in item.select('[href], link') if i.get('href', i.text) !=''])\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 11611598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b97f5f1017ad53f7a38d97eca1d552f?s=128&d=identicon&r=PG&f=1", "display_name": "leopheard", "link": "https://stackoverflow.com/users/11611598/leopheard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560988383, "creation_date": 1560983406, "last_edit_date": 1560987517, "question_id": 56676695, "link": "https://stackoverflow.com/questions/56676695/using-beautifulsoup-to-scrape-tags-from-website-but-skip-ignore-some-others", "title": "Using Beautifulsoup to scrape tags from website but skip / ignore some others", "body": "<p>I'm using the following code to scrape the  tags amongst others:</p>\n\n<pre><code>for content in soup.find_all():\n  try:        \n        link = content.find('enclosure')\n        link = link.get('url')\n        print \"\\n\\nLink: \", link\n\n        title = content.find('title')\n        #&lt;item&gt;&lt;guid isPermaLink=\"false\"&gt; == is causing doubling of first episode\n        #title = content.find('title')\n        title = title.get_text()\n</code></pre>\n\n<p>It scrapes the URLs fine but also the following titles which are correct, but obviously picks up the two first ones as instructed. How do I ignore those and start at the title for the episodes (Ep 116)?</p>\n\n<p>(The site I'm scraping is <a href=\"http://feeds.thisiscriminal.com/CriminalShow\" rel=\"nofollow noreferrer\">http://feeds.thisiscriminal.com/CriminalShow</a>)</p>\n\n<pre><code>&lt;channel&gt;\n  &lt;title&gt;Criminal&lt;/title&gt;\n  &lt;link&gt;http://thisiscriminal.com/&lt;/link&gt;\n  &lt;/description&gt;\n    &lt;image&gt;\n    &lt;url&gt;https://f.prxu.org/criminal/images/....png&lt;/url&gt;\n      &lt;title&gt;Criminal&lt;/title&gt;\n      &lt;link&gt;http://thisiscriminal.com/&lt;/link&gt;\n      &lt;title&gt;Episode 116&lt;/title&gt;\n      &lt;link&gt;http://feeds.thisiscriminal.com/~r/...&lt;/link&gt;\n  &lt;description&gt;\n</code></pre>\n\n<p>Any input is greatly appreciated!</p>\n"}, {"tags": ["python", "windows", "digital-signature", "smartcard", "pkcs#7"], "comments": [{"owner": {"reputation": 2167, "user_id": 10504469, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MomS5.jpg?s=128&g=1", "display_name": "Jin Lee", "link": "https://stackoverflow.com/users/10504469/jin-lee"}, "edited": false, "score": 0, "creation_date": 1560988273, "post_id": 56676694, "comment_id": 99921381, "body": "It might take some time to read this, but it will help you a lot in the long run. <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 465, "user_id": 9659885, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DPzsN.png?s=128&g=1", "display_name": "Bharat Vasant", "link": "https://stackoverflow.com/users/9659885/bharat-vasant"}, "edited": false, "score": 0, "creation_date": 1565135921, "post_id": 56676694, "comment_id": 101254466, "body": "Check if this link is of any help <a href=\"http://help.signer.digital/digital_signing_and_authentication_from_web_browser.htm\" rel=\"nofollow noreferrer\">help.signer.digital/&hellip;</a>"}], "owner": {"reputation": 1, "user_id": 11672968, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NAq9RWkbf1k/AAAAAAAAAAI/AAAAAAAAAGA/qiBOXZzhru4/photo.jpg?sz=128", "display_name": "Riccardo Broggiato", "link": "https://stackoverflow.com/users/11672968/riccardo-broggiato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560999481, "creation_date": 1560983403, "last_edit_date": 1560999481, "question_id": 56676694, "link": "https://stackoverflow.com/questions/56676694/cades-digital-sign-with-smartcard", "title": "Cades Digital sign with smartcard", "body": "<p>I'm try to develop a software for Digital signing xml files and output a .p7m file format. The problem is that I have to use a smartcard to do that. Could you please, show me some resources to learn how to achieve that?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 1, "creation_date": 1560983722, "post_id": 56676659, "comment_id": 99920443, "body": "Running you code with that example prints: <code>Counter({&#39;001&#39;: 3, &#39;003&#39;: 2, &#39;002&#39;: 2})</code> for me."}, {"owner": {"reputation": 39, "user_id": 8926263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efe86cd1598787cc0d9c2e6974f33c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Ans", "link": "https://stackoverflow.com/users/8926263/ans"}, "reply_to_user": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 0, "creation_date": 1561032803, "post_id": 56676659, "comment_id": 99936898, "body": "Unforunately I only get: Nr powiatu: Wystapienia:   (),6  Anyway, Perplexabot helped me with that. It works perfectly - just as I want. (Sorry for these polish words in code - &#39;Nr powiatu: &#39; &#39;Wystapienia: &#39;. I completely forgot about them and it might look weird and incomprehensible for foreigners reading the code.)"}], "answers": [{"comments": [{"owner": {"reputation": 440, "user_id": 6047557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95e6e714cdc9f1c7d1df1d9398cad0e?s=128&d=identicon&r=PG&f=1", "display_name": "perennial_noob", "link": "https://stackoverflow.com/users/6047557/perennial-noob"}, "edited": false, "score": 1, "creation_date": 1560985078, "post_id": 56676832, "comment_id": 99920732, "body": "The <code>lst = []</code> is not needed, though."}, {"owner": {"reputation": 39, "user_id": 8926263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efe86cd1598787cc0d9c2e6974f33c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Ans", "link": "https://stackoverflow.com/users/8926263/ans"}, "edited": false, "score": 0, "creation_date": 1561032032, "post_id": 56676832, "comment_id": 99936446, "body": "You&#39;re great! Thanks Perplexabot and perennial_noob :)"}], "tags": [], "owner": {"reputation": 1446, "user_id": 2923937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e584af3bf364d2fa35ea9be1eb305ad?s=128&d=identicon&r=PG&f=1", "display_name": "Perplexabot", "link": "https://stackoverflow.com/users/2923937/perplexabot"}, "is_accepted": true, "score": 2, "last_activity_date": 1560985135, "last_edit_date": 1560985135, "creation_date": 1560984330, "answer_id": 56676832, "question_id": 56676659, "link": "https://stackoverflow.com/questions/56676659/how-to-count-the-number-of-occurrences-in-code/56676832#56676832", "title": "How to count the number of occurrences in code?", "body": "<p>Here is what you need:</p>\n\n<pre><code>import csv\nfrom collections import Counter\n\nwith open('myFile.txt', 'r') as fd:\n    next(fd)\n    occurrence = Counter([row[1] for row in csv.reader(fd, delimiter=';')])\nprint(occurrence)\n</code></pre>\n\n<p>I think you are missing the delimiter.</p>\n"}], "owner": {"reputation": 39, "user_id": 8926263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efe86cd1598787cc0d9c2e6974f33c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Ans", "link": "https://stackoverflow.com/users/8926263/ans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 56676832, "answer_count": 1, "score": 0, "last_activity_date": 1560985135, "creation_date": 1560983143, "last_edit_date": 1560983171, "question_id": 56676659, "link": "https://stackoverflow.com/questions/56676659/how-to-count-the-number-of-occurrences-in-code", "title": "How to count the number of occurrences in code?", "body": "<p>I need to count number of each instance for second column in file that looks like this:</p>\n\n<pre><code>1234;'001';X\n1234;'001';X\n1234;'003';Y\n1280;'001';X\n1280;'002';Y\n1280;'002';Y\n1280;'003';X\n</code></pre>\n\n<p>I tried to solve the problem, but my code shows how many elements are in the input file.</p>\n\n<pre><code>import csv\nfrom collections import Counter\n\n#get line\nwith open('myFile.txt', 'r') as file:\n    next(file) #skip header\n        occurrence = Counter(tuple(row[1:2]) for row in csv.reader(file))\nprint(occurrence)\n\n\n\nwith open('myOutputFile.txt', 'w') as file2:\nwriter = csv.writer(file2)\nwriter.writerow(['Nr powiatu: ' 'Wystapienia: '])\nfor occur, count in occurrence.items():\n    writer.writerow([occur, count])\n</code></pre>\n\n<p>The output I need is:\n001 - 3\n002 - 2\n003 - 2</p>\n\n<p>It's just the sum of specific occurrences in second column.\nAnd my result is 7</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 8877, "user_id": 992600, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a07696b9e9f01acc66822c3c4a880b96?s=128&d=identicon&r=PG", "display_name": "adhg", "link": "https://stackoverflow.com/users/992600/adhg"}, "edited": false, "score": 0, "creation_date": 1560984063, "post_id": 56676652, "comment_id": 99920509, "body": "&#39;The end result should have a total value of 1 for every row IF...&#39;?"}], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 1, "last_activity_date": 1560984313, "creation_date": 1560984313, "answer_id": 56676831, "question_id": 56676652, "link": "https://stackoverflow.com/questions/56676652/how-can-i-convert-to-a-tidy-format-in-python/56676831#56676831", "title": "How can I convert to a tidy format in python?", "body": "<p>Harder than what I thought </p>\n\n<pre><code>s1=df.iloc[:,1:-1]\ns2=df.iloc[:,0]\ndf[['name']].join(s1.mul(s2,0).replace('',np.nan).stack().reset_index(level=1)['level_1'].str.get_dummies(),how='right').assign(Total=1)\nOut[413]: \n  name  val1  val2  Total\n0  joe     1     0      1\n1  bob     0     1      1\n2  dan     1     0      1\n2  dan     0     1      1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 2, "last_activity_date": 1560984343, "creation_date": 1560984343, "answer_id": 56676835, "question_id": 56676652, "link": "https://stackoverflow.com/questions/56676652/how-can-i-convert-to-a-tidy-format-in-python/56676835#56676835", "title": "How can I convert to a tidy format in python?", "body": "<pre><code>d = df.drop('total', axis=1).set_index('name').stack().loc[lambda x: x == 1]\n\nn, v = zip(*d.index)\npd.concat([pd.Series(n, name='name'), pd.get_dummies(v).assign(total=1)], axis=1)\n\n  name  val1  val2  total\n0  joe     1     0      1\n1  bob     0     1      1\n2  dan     1     0      1\n3  dan     0     1      1\n</code></pre>\n"}], "owner": {"reputation": 1012, "user_id": 8610662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NW6qK.jpg?s=128&g=1", "display_name": "NLR", "link": "https://stackoverflow.com/users/8610662/nlr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1560984343, "creation_date": 1560983037, "question_id": 56676652, "link": "https://stackoverflow.com/questions/56676652/how-can-i-convert-to-a-tidy-format-in-python", "title": "How can I convert to a tidy format in python?", "body": "<p>My pandas dataframe has separate columns that are one-hot encoded and a total column at the end that sums them up (<code>total</code> = <code>val1</code>+<code>val2</code>). </p>\n\n<p>Some rows have 1s for multiple val columns:</p>\n\n<pre><code>| name | val1 | val2 | total | \n| joe  | 1    | 0    | 1     |\n| bob  | 0    | 1    | 1     |\n| dan  | 1    | 1    | 2     |\n</code></pre>\n\n<p>I want this:</p>\n\n<pre><code>| name | val1 | val2 | total | \n| joe  | 1    | 0    | 1     |\n| bob  | 0    | 1    | 1     |\n| dan  | 1    | 0    | 1     |\n| dan  | 0    | 1    | 1     |\n</code></pre>\n\n<p>I can't figure out how to get this to work: to melt it conditional upon the total column.</p>\n\n<p>The end result should have a total value of 1 for every row.</p>\n"}, {"tags": ["python", "numpy", "tensorflow", "matrix-multiplication"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1560984718, "post_id": 56676649, "comment_id": 99920644, "body": "<code>B</code> and <code>y</code> have different shapes?  I don&#39;t know about <code>tf</code>, but <code>numpy</code> <code>A@B</code> works."}, {"owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1560988220, "post_id": 56676649, "comment_id": 99921374, "body": "yup. for <code>numpy</code>, <code>x @ y[:, np.newaxis, :, :]</code> works. And that works for tensorflow too. I don&#39;t how efficient is <code>@</code> in tensorflow on a gpu."}], "answers": [{"comments": [{"owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "edited": false, "score": 0, "creation_date": 1560993515, "post_id": 56677681, "comment_id": 99922240, "body": "Thanks for the answer. How fast and memory efficient is tensorflow&#39;s implementation of <code>einsum</code> if I run it on a gpu? How about tensorflow&#39;s <code>@</code>? I remember numpy can use parallel mkl routines for <code>dot</code> and <code>tensordot</code> but not for <code>einsum</code>."}, {"owner": {"reputation": 15373, "user_id": 1667256, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1a9deb943177413468eb294d4a3b3e16?s=128&d=identicon&r=PG", "display_name": "greeness", "link": "https://stackoverflow.com/users/1667256/greeness"}, "reply_to_user": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "edited": false, "score": 0, "creation_date": 1560993688, "post_id": 56677681, "comment_id": 99922274, "body": "Not sure for GPU. For CPU, they might be the same. <a href=\"https://stackoverflow.com/questions/43100679/tensorflow-einsum-vs-matmul-vs-tensordot\" title=\"tensorflow einsum vs matmul vs tensordot\">stackoverflow.com/questions/43100679/&hellip;</a>. Also for TPU, einsum is faster from my personal experience (5%-10%)."}, {"owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "edited": false, "score": 0, "creation_date": 1561043865, "post_id": 56677681, "comment_id": 99943659, "body": "Speed of einsum in tf relies on the optimization by the <code>opt_einsum</code> package. <a href=\"https://github.com/tensorflow/tensorflow/issues/16835\" rel=\"nofollow noreferrer\">github.com/tensorflow/tensorflow/issues/16835</a> The @ operator uses another code path: <a href=\"https://github.com/tensorflow/tensorflow/issues/1062\" rel=\"nofollow noreferrer\">github.com/tensorflow/tensorflow/issues/1062</a>"}], "tags": [], "owner": {"reputation": 15373, "user_id": 1667256, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1a9deb943177413468eb294d4a3b3e16?s=128&d=identicon&r=PG", "display_name": "greeness", "link": "https://stackoverflow.com/users/1667256/greeness"}, "is_accepted": false, "score": 1, "last_activity_date": 1560992353, "creation_date": 1560992353, "answer_id": 56677681, "question_id": 56676649, "link": "https://stackoverflow.com/questions/56676649/tensorflow-matrix-multiplication-with-batching-and-broadcasting/56677681#56677681", "title": "tensorflow matrix multiplication with batching and broadcasting", "body": "<p><code>tf.einsum</code> - a generalized contraction between tensors of arbitrary dimension, would be your friend in such a problem. See tf documentation <a href=\"https://www.tensorflow.org/api_docs/python/tf/einsum\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>There is a great tutorial on stackoverflow: (<a href=\"https://stackoverflow.com/questions/26089893/understanding-numpys-einsum\">Understanding NumPy&#39;s einsum</a>).</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nimport tensorflow as tf\nimport numpy as np\n\na = 3\nb = 4\nc = 5\nd = 6\n\nx_shape = (a, b, 2, d)\ny_shape = (a, d, c)\nz_shape = (a, b, 2, c)\n\nx = tf.constant(np.random.uniform(0, 1, x_shape))\ny = tf.constant(np.random.uniform(0, 1, y_shape))\nz = tf.constant(np.empty(z_shape))\n\nv = tf.einsum('abzd,adc-&gt;abzc', x, y)\nprint z.shape, v.shape\n\nwith tf.Session() as sess:\n  print sess.run(v)\n\n\nRESULT:\n\n(3, 4, 2, 5) (3, 4, 2, 5)\n[[[[ 1.8353901   1.29175219  1.49873967  1.78156638  0.79548786]\n   [ 2.32836196  2.01395003  1.53038244  2.51846521  1.65700572]]\n\n  [[ 1.76139921  1.78029925  1.22302866  2.18659201  1.51694413]\n   [ 2.32021949  1.98895703  1.7098903   2.21515966  1.33412172]]\n\n  [[ 2.13246675  1.63539287  1.64610271  2.16745158  1.02269943]\n   [ 1.75559616  1.6715972   1.26049591  2.14399714  1.34957603]]\n\n  [[ 1.80167636  1.91194534  1.3438773   1.9659323   1.25718317]\n   [ 1.4379158   1.31033243  0.71024123  1.62527415  1.31030634]]]\n\n\n [[[ 2.04902039  1.59019464  1.32415689  1.59438659  2.02918951]\n   [ 2.23684642  1.27256603  1.63474052  1.73646679  2.42958829]]\n  ....\n  ....\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "is_accepted": true, "score": 0, "last_activity_date": 1561059656, "creation_date": 1561059656, "answer_id": 56692862, "question_id": 56676649, "link": "https://stackoverflow.com/questions/56676649/tensorflow-matrix-multiplication-with-batching-and-broadcasting/56692862#56692862", "title": "tensorflow matrix multiplication with batching and broadcasting", "body": "<p>Only need <code>tf.reshape</code> and <code>tf.matmul</code>. No need for transpose.</p>\n\n<pre><code>import tensorflow as tf\nimport numpy as np\n\njit_scope = tf.contrib.compiler.jit.experimental_jit_scope\n\na = 3\nb = 4\nc = 5\nd = 6\n\nx_shape = (a, b, 2, d)\ny_shape = (a, d, c)\n\nx = tf.constant(np.random.uniform(0, 1, x_shape))\ny = tf.constant(np.random.uniform(0, 1, y_shape))\n\nx2 = tf.reshape(x, (a, b * 2, d))\n\nwith jit_scope():\n    z = tf.reshape(tf.matmul(x2, y), (a, b, 2, c))\n    z2 = x @ (y[:, np.newaxis, :, :])\n    z3 = tf.einsum('abzd, adc -&gt; abzc', x, y)\n\nwith tf.Session() as sess:\n    z_, z2_, z3_ = sess.run([z, z2, z3])\n\nassert np.allclose(z_, z2_)\nassert np.allclose(z_, z3_)\n</code></pre>\n"}], "owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 56692862, "answer_count": 2, "score": -1, "last_activity_date": 1561059656, "creation_date": 1560983018, "question_id": 56676649, "link": "https://stackoverflow.com/questions/56676649/tensorflow-matrix-multiplication-with-batching-and-broadcasting", "title": "tensorflow matrix multiplication with batching and broadcasting", "body": "<p>I can use <code>tf.matmul(A, B)</code> to do batch matrix multiplication when:</p>\n\n<ul>\n<li><code>A.shape == (..., a, b)</code> and </li>\n<li><code>B.shape == (..., b, c)</code>,</li>\n</ul>\n\n<p>where the <code>...</code> are the same.</p>\n\n<p>But I want an additional broadcasting:</p>\n\n<ul>\n<li><code>A.shape == (a, b, 2, d)</code> and</li>\n<li><p><code>B.shape == (a, 1, d, c)</code></p></li>\n<li><p><code>result.shape == (a, b, 2, c)</code></p></li>\n</ul>\n\n<p>I expect the result to be <code>a x b</code> batches of matrix multiplication between <code>(2, d)</code> and <code>(d, c)</code>.</p>\n\n<p>How to do this?</p>\n\n<hr>\n\n<p>Test code:</p>\n\n<pre><code>import tensorflow as tf\nimport numpy as np\n\na = 3\nb = 4\nc = 5\nd = 6\n\nx_shape = (a, b, 2, d)\ny_shape = (a, d, c)\nz_shape = (a, b, 2, c)\n\nx = np.random.uniform(0, 1, x_shape)\ny = np.random.uniform(0, 1, y_shape)\nz = np.empty(z_shape)\n\nwith tf.Session() as sess:\n    for i in range(b):\n        x_now = x[:, i, :, :]\n        z[:, i, :, :] = sess.run(\n            tf.matmul(x_now, y)\n        )\n\nprint(z)\n</code></pre>\n"}, {"tags": ["python", "excel", "pyexcel"], "comments": [{"owner": {"reputation": 12105, "user_id": 6043170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iFy-IHfVniw/AAAAAAAAAAI/AAAAAAAAAFM/f_Xao2r127I/photo.jpg?sz=128", "display_name": "2ps", "link": "https://stackoverflow.com/users/6043170/2ps"}, "edited": false, "score": 0, "creation_date": 1560986241, "post_id": 56676643, "comment_id": 99920969, "body": "Could you please post a code sample for us?  It is hard for us to reproduce the error and offer suggestions without seeing what you are trying."}, {"owner": {"reputation": 1592, "user_id": 7403752, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07d8fe28ab264b0de19240d36d64e2cd?s=128&d=identicon&r=PG&f=1", "display_name": "edyvedy13", "link": "https://stackoverflow.com/users/7403752/edyvedy13"}, "reply_to_user": {"reputation": 12105, "user_id": 6043170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iFy-IHfVniw/AAAAAAAAAAI/AAAAAAAAAFM/f_Xao2r127I/photo.jpg?sz=128", "display_name": "2ps", "link": "https://stackoverflow.com/users/6043170/2ps"}, "edited": false, "score": 0, "creation_date": 1560986543, "post_id": 56676643, "comment_id": 99921019, "body": "updated the code and shared the full error"}, {"owner": {"reputation": 12105, "user_id": 6043170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iFy-IHfVniw/AAAAAAAAAAI/AAAAAAAAAFM/f_Xao2r127I/photo.jpg?sz=128", "display_name": "2ps", "link": "https://stackoverflow.com/users/6043170/2ps"}, "edited": false, "score": 0, "creation_date": 1560987153, "post_id": 56676643, "comment_id": 99921151, "body": "This seems to work just fine with CPython.  Are you creating a virtual environment and/or are you using a non-CPython interpreter?"}, {"owner": {"reputation": 1592, "user_id": 7403752, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07d8fe28ab264b0de19240d36d64e2cd?s=128&d=identicon&r=PG&f=1", "display_name": "edyvedy13", "link": "https://stackoverflow.com/users/7403752/edyvedy13"}, "reply_to_user": {"reputation": 12105, "user_id": 6043170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iFy-IHfVniw/AAAAAAAAAAI/AAAAAAAAAFM/f_Xao2r127I/photo.jpg?sz=128", "display_name": "2ps", "link": "https://stackoverflow.com/users/6043170/2ps"}, "edited": false, "score": 0, "creation_date": 1560987222, "post_id": 56676643, "comment_id": 99921167, "body": "I am using just both IDLE and Spyder, but the problem persists"}], "owner": {"reputation": 1592, "user_id": 7403752, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07d8fe28ab264b0de19240d36d64e2cd?s=128&d=identicon&r=PG&f=1", "display_name": "edyvedy13", "link": "https://stackoverflow.com/users/7403752/edyvedy13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 977, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560986528, "creation_date": 1560982984, "last_edit_date": 1560986528, "question_id": 56676643, "link": "https://stackoverflow.com/questions/56676643/unable-to-open-excel-file-using-pyexcel-even-after-ininstalling-pyexcel-xls-and", "title": "Unable to open Excel file using Pyexcel even after ininstalling pyexcel-xls and pyexcel-xlsx", "body": "<p>I try to open a simple excel file with pyexcel, however I get the following error:</p>\n\n<pre><code>SupportingPluginAvailableButNotInstalled: Please install one of these plugins for read data in 'xlsx': pyexcel-xls,pyexcel-xlsx\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>import pyexcel as pe\nsheet = pe.get_sheet(file_name=k, name_columns_by_row=0,skip_empty_rows=True)\n</code></pre>\n\n<p>Things I have tried:</p>\n\n<pre><code>pip install pyexcel-xls;\npip install pyexcel-xlsx;\nUse anaconda instead of IDLE;\nreinstall Python 3.7\n</code></pre>\n\n<p>However, no luck</p>\n\n<p>Full error:</p>\n\n<pre><code>runfile('H:/Data/Data/clean_data.py', wdir='H:/Data/Data')\nReloaded modules: d_help\n.\\added_c\\profile1 (1).xlsx\n[autoreload of pyexcel.internal failed: Traceback (most recent call last):\n  File \"C:\\Users\\XX\\Anaconda3\\lib\\site-packages\\IPython\\extensions\\autoreload.py\", line 244, in check\n    superreload(m, reload, self.old_objects)\n  File \"C:\\Users\\XX\\Anaconda3\\lib\\site-packages\\IPython\\extensions\\autoreload.py\", line 378, in superreload\n    module = reload(module)\n  File \"C:\\Users\\XX\\Anaconda3\\lib\\imp.py\", line 314, in reload\n    return importlib.reload(module)\n  File \"C:\\Users\\XX\\Anaconda3\\lib\\importlib\\__init__.py\", line 169, in reload\n    _bootstrap._exec(spec, module)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 630, in _exec\n  File \"&lt;frozen importlib._bootstrap_external&gt;\", line 728, in exec_module\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 219, in _call_with_frames_removed\n  File \"C:\\Users\\XX\\Anaconda3\\lib\\site-packages\\pyexcel\\internal\\__init__.py\", line 37, in &lt;module&gt;\n    white_list=WHITE_LIST,\n  File \"C:\\Users\\XX\\Anaconda3\\lib\\site-packages\\lml\\loader.py\", line 137, in scan_plugins_regex\n    do_import(module_name)\n  File \"C:\\Users\\XX\\Anaconda3\\lib\\site-packages\\lml\\utils.py\", line 42, in do_import\n    return _do_import(plugin_module_name)\nAttributeError: module 'pyexcel' has no attribute 'plugins'\n]\nTraceback (most recent call last):\n</code></pre>\n"}, {"tags": ["python", "bazel"], "answers": [{"tags": [], "owner": {"reputation": 1635, "user_id": 3918512, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001599098944/picture?type=large", "display_name": "Robin Nabel", "link": "https://stackoverflow.com/users/3918512/robin-nabel"}, "is_accepted": false, "score": 0, "last_activity_date": 1588508828, "creation_date": 1588508828, "answer_id": 61574421, "question_id": 56676636, "link": "https://stackoverflow.com/questions/56676636/bazel-run-with-tags/61574421#61574421", "title": "Bazel run with tags", "body": "<p>Bazel run only supports executing one binary at a time.</p>\n\n<p>However, you have a couple of options if you want to run tests concurrently:</p>\n\n<ol>\n<li>Use <code>bazel test</code> - I assume you already tried this. You can use <a href=\"https://docs.bazel.build/versions/master/command-line-reference.html#flag--test_tag_filters\" rel=\"nofollow noreferrer\"><code>--test_tag_filters</code></a> which has the same effect as <code>--build_tag_filter</code> has on <code>bazel build</code>. You can then control concurrency with <code>--jobs</code> and <a href=\"https://docs.bazel.build/versions/master/command-line-reference.html#flag--local_test_jobs\" rel=\"nofollow noreferrer\"><code>--local_test_jobs</code></a>.</li>\n<li>You can also use <code>bazel run</code> with <a href=\"https://docs.bazel.build/versions/master/command-line-reference.html#flag--script_path\" rel=\"nofollow noreferrer\"><code>--script_path</code></a> which results in Bazel outputting a shell script which contains all the logic to run the target independently of Bazel. You could, in theory, create a script for each target and then execute them in parallel.</li>\n</ol>\n"}], "owner": {"reputation": 67, "user_id": 9680641, "user_type": "registered", "profile_image": "https://graph.facebook.com/1906307822773119/picture?type=large", "display_name": "Josh Sullivan", "link": "https://stackoverflow.com/users/9680641/josh-sullivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 374, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1588508828, "creation_date": 1560982895, "question_id": 56676636, "link": "https://stackoverflow.com/questions/56676636/bazel-run-with-tags", "title": "Bazel run with tags", "body": "<p>This is more of a general question regarding the capabilities of Bazel. Does Bazel have the capability of running multiple tests at once based on a tag? </p>\n\n<p>Similar to how \n<code>bazel build --build_tag_filter=example_test //path/...</code>\nbuilds all binaries with the tag \"example_test\" that are located under //path/... </p>\n\n<p>I was wondering if there was a command option to run multiple binaries with a given tag?\n ex) \n<code>bazel run --run_tag_filter=example_test //path/...</code> or something alone those lines</p>\n"}, {"tags": ["python", "pyspark", "pyspark-sql"], "answers": [{"comments": [{"owner": {"reputation": 1436, "user_id": 6383910, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8d1b51902725c1fabcc6c280601b77dc?s=128&d=identicon&r=PG&f=1", "display_name": "Gingerbread", "link": "https://stackoverflow.com/users/6383910/gingerbread"}, "edited": false, "score": 0, "creation_date": 1561065263, "post_id": 56693875, "comment_id": 99953093, "body": "Beatiful! Thanks a lot for this!"}], "tags": [], "owner": {"reputation": 11518, "user_id": 9510729, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HbuuPS6a5d4/AAAAAAAAAAI/AAAAAAAAAvQ/8hLG9Jvhyzc/photo.jpg?sz=128", "display_name": "jxc", "link": "https://stackoverflow.com/users/9510729/jxc"}, "is_accepted": true, "score": 1, "last_activity_date": 1561064786, "creation_date": 1561064786, "answer_id": 56693875, "question_id": 56676604, "link": "https://stackoverflow.com/questions/56676604/read-one-column-as-json-strings-and-another-as-regular-using-pyspark-dataframe/56693875#56693875", "title": "Read one column as json strings and another as regular using pyspark dataframe", "body": "<p>You can use <strong>from_json()</strong> function, the key is to define the json_schema which you can manually create it or if you are using the pyspark 2.4+, you can use the function <a href=\"http://spark.apache.org/docs/2.4.0/api/python/pyspark.sql.html#pyspark.sql.functions.schema_of_json\" rel=\"nofollow noreferrer\">schema_of_json()</a> (below code tested under <em>pyspark 2.4.0</em>):</p>\n\n<pre><code>from pyspark.sql import functions as F\n\n# define all keys with a list:\nmy_keys = ['test1:subtest1', 'test1:subtest2']\n\n# find a sample json_code for a single key with all sub-fields and then construct its json_schema\nkey_schema = df.select(F.schema_of_json('{\"test1:subtest1\":[{\"Id\":\"17\",\"cName\":\"c1\",\"pScore\":0.00203}]}').alias('schema')).first().schema\n\n&gt;&gt;&gt; key_schema\nu'struct&lt;test1:subtest1:array&lt;struct&lt;Id:string,cName:string,pScore:double&gt;&gt;&gt;'\n\n# use the above sample key_schema to create the json_schema for all keys\nschema = u'struct&lt;' + ','.join([r'`{}`:array&lt;struct&lt;Id:string,cName:string,pScore:double&gt;&gt;'.format(k) for k in my_keys]) + r'&gt;'\n\n&gt;&gt;&gt; schema \nu'struct&lt;`test1:subtest1`:array&lt;struct&lt;Id:string,cName:string,pScore:double&gt;&gt;,`test1:subtest2`:array&lt;struct&lt;Id:string,cName:string,pScore:double&gt;&gt;&gt;'\n</code></pre>\n\n<p><strong>Note:</strong> backticks are required to surround the fieldname when it contains special characters like <strong><code>:</code></strong>.</p>\n\n<p>After we have the schema, the json data can be retrieved from the <code>col2</code>:</p>\n\n<pre><code>df1 = df.withColumn('data', F.from_json('col2', schema)).select('col1', 'data.*')\n\n&gt;&gt;&gt; df1.printSchema()\nroot\n |-- col1: string (nullable = true)\n |-- test1:subtest1: array (nullable = true)\n |    |-- element: struct (containsNull = true)\n |    |    |-- Id: string (nullable = true)\n |    |    |-- cName: string (nullable = true)\n |    |    |-- pScore: double (nullable = true)\n |-- test1:subtest2: array (nullable = true)\n |    |-- element: struct (containsNull = true)\n |    |    |-- Id: string (nullable = true)\n |    |    |-- cName: string (nullable = true)\n |    |    |-- pScore: double (nullable = true)\n\n&gt;&gt;&gt; df1.show(2,0)\n+------+--------------+--------------------+\n|col1  |test1:subtest1|test1:subtest2      |\n+------+--------------+--------------------+\n|test:1|[[17, c1,]]   |[[01, c2,]]         |\n|test:2|null          |[[18, c13, 0.00203]]|\n+------+--------------+--------------------+\n</code></pre>\n\n<p>Then you can use select and union to normalize the dataframe:</p>\n\n<pre><code>df_new = df1.select('col1', F.lit('test1:subtest1').alias('col2'), F.explode(F.col('test1:subtest1')).alias('arr')) \\\n            .union(\n                df1.select('col1', F.lit('test1:subtest2'), F.explode(F.col('test1:subtest2')))\n           ).select('col1', 'col2', 'arr.*')  \n\n&gt;&gt;&gt; df_new.show()\n+------+--------------+---+-----+-------+\n|  col1|          col2| Id|cName| pScore|\n+------+--------------+---+-----+-------+\n|test:1|test1:subtest1| 17|   c1|   null|\n|test:1|test1:subtest2| 01|   c2|   null|\n|test:2|test1:subtest2| 18|  c13|0.00203|\n+------+--------------+---+-----+-------+\n</code></pre>\n\n<h2>use reduce()</h2>\n\n<p>When there are many unique keys in the json strings, use reduce function to create <code>df_new</code>:</p>\n\n<pre><code>from functools import reduce     \n\ndf_new = reduce(lambda x,y: x.union(y)\n          , [ df1.select('col1', F.lit(k).alias('col2'), F.explode(F.col(k)).alias('arr')) for k in my_keys ]\n         ).select('col1', 'col2', 'arr.*')\n</code></pre>\n"}], "owner": {"reputation": 1436, "user_id": 6383910, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8d1b51902725c1fabcc6c280601b77dc?s=128&d=identicon&r=PG&f=1", "display_name": "Gingerbread", "link": "https://stackoverflow.com/users/6383910/gingerbread"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 56693875, "answer_count": 1, "score": 0, "last_activity_date": 1561064786, "creation_date": 1560982702, "question_id": 56676604, "link": "https://stackoverflow.com/questions/56676604/read-one-column-as-json-strings-and-another-as-regular-using-pyspark-dataframe", "title": "Read one column as json strings and another as regular using pyspark dataframe", "body": "<p>I have a dataframe like this:</p>\n\n<pre><code>col1    | col2        |\n-----------------------\ntest:1  | {\"test1:subtest1\":[{\"Id\":\"17\",\"cName\":\"c1\"}], \"test1:subtest2\":[{\"Id\":\"01\",\"cName\":\"c2\"}]}\ntest:2  | {\"test1:subtest2\":[{\"Id\":\"18\",\"cName\":\"c13\",\"pScore\":0.00203}]}\n</code></pre>\n\n<p>I want an output like this:</p>\n\n<pre><code>col1   | col2           | Id | cName | pScore  |\n------------------------------------------------\ntest:1 | test1:subtest1 | 17 | c1    | null    | \ntest:1 | test1:subtest2 | 01 | c2    | null    | \ntest:2 | test1:subtest2 | 18 | c13   | 0.00203 | \n</code></pre>\n\n<p>This is a follow up to this question - <a href=\"https://stackoverflow.com/questions/56409454/casting-a-column-to-json-dict-and-flattening-json-values-in-a-column-in-pyspark/56409889?noredirect=1#comment99918287_56409889\">Casting a column to JSON/dict and flattening JSON values in a column in pyspark</a></p>\n\n<p>I am new to pyspark and would appreciate any help on this. I tried the solution given in that post. It kept giving me errors </p>\n\n<pre><code>TypeError: type object argument after ** must be a mapping, not list\n</code></pre>\n\n<p>I also tried the following:</p>\n\n<pre><code>test = sqlContext.read.json(df.rdd.map(lambda r: r.col2))\n</code></pre>\n\n<p>But this gave me an output like the following:</p>\n\n<pre><code> test1:subtest1      | test1:subtest2        |\n----------------------------------------------\n[{\"Id\":\"17\",\"cName\":\"c1\"}] | [{\"Id\":\"01\",\"cName\":\"c2\"}]\nnull                       | [{\"Id\":\"18\",\"cName\":\"c13\",\"pScore\":0.00203}]\n</code></pre>\n\n<p>I am stuck at how I can use the ^ above to join to <code>col1</code> and get the desired output. </p>\n\n<p>Any help is much much appreciated, thanks in advance!!</p>\n"}, {"tags": ["python", "python-3.x", "pip"], "comments": [{"owner": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 2, "creation_date": 1560982900, "post_id": 56676589, "comment_id": 99920265, "body": "The only way to truly validate an email address is to send an email and get a response back."}, {"owner": {"reputation": 113, "user_id": 7551211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uIq6U.jpg?s=128&g=1", "display_name": "user7551211", "link": "https://stackoverflow.com/users/7551211/user7551211"}, "reply_to_user": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 0, "creation_date": 1560983054, "post_id": 56676589, "comment_id": 99920299, "body": "100% sure? There&#39;s gotta be some way to check before you send."}, {"owner": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 3, "creation_date": 1560983543, "post_id": 56676589, "comment_id": 99920410, "body": "No, a well-formed address does not mean there is a mail box that exists for it. puffin-ocelot-banjo-1234567890-fake-fake@google.com is well-formed but not a real address.  Until someone reading this decides to claim it  :)"}], "answers": [{"tags": [], "owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "is_accepted": false, "score": 3, "last_activity_date": 1560987611, "creation_date": 1560987611, "answer_id": 56677230, "question_id": 56676589, "link": "https://stackoverflow.com/questions/56676589/how-to-check-if-an-email-exist-through-python-3/56677230#56677230", "title": "How to Check if an Email Exist Through Python 3?", "body": "<p>By default, <code>validate_email</code> doesn't really validate much. You have to enable DNS validation and SMTP validation:</p>\n\n<pre><code>validate_email(email, check_mx=True, verify=True, smtp_timeout=60)\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 7551211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uIq6U.jpg?s=128&g=1", "display_name": "user7551211", "link": "https://stackoverflow.com/users/7551211/user7551211"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 792, "favorite_count": 3, "answer_count": 1, "score": 2, "last_activity_date": 1561045891, "creation_date": 1560982623, "last_edit_date": 1561045891, "question_id": 56676589, "link": "https://stackoverflow.com/questions/56676589/how-to-check-if-an-email-exist-through-python-3", "title": "How to Check if an Email Exist Through Python 3?", "body": "<p>I want to check if an email address exist before I send an email.</p>\n\n<p>I've tried pip's validate_email package and it doesn't work at all. It returns true for every string that include '@' in the middle without symbols. Maybe there's another pip package that does work (I saw packages like validate-email-address, email-validator, py3-validate-email and email-validator)? Or some code to check that with SMTP?</p>\n"}, {"tags": ["python", "xmlsec"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12895249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30359c6f8d72ee17cc76500f9ffd59b3?s=128&d=identicon&r=PG&f=1", "display_name": "rs-mkaiser", "link": "https://stackoverflow.com/users/12895249/rs-mkaiser"}, "is_accepted": false, "score": 0, "last_activity_date": 1581638917, "last_edit_date": 1581638917, "creation_date": 1581634736, "answer_id": 60217737, "question_id": 56676540, "link": "https://stackoverflow.com/questions/56676540/failed-to-sign-xmlsec-with-named-reference-uri/60217737#60217737", "title": "Failed to sign xmlsec with named reference URI", "body": "<p>You need to register the node and attribute:</p>\n\n<p><code>ctx.register_id(node=template, id_attr=\"ID\")</code></p>\n"}], "owner": {"reputation": 1, "user_id": 5758299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80e310f1c6850e117dbc2cf307df5faf?s=128&d=identicon&r=PG&f=1", "display_name": "user263229", "link": "https://stackoverflow.com/users/5758299/user263229"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1581638917, "creation_date": 1560982228, "question_id": 56676540, "link": "https://stackoverflow.com/questions/56676540/failed-to-sign-xmlsec-with-named-reference-uri", "title": "Failed to sign xmlsec with named reference URI", "body": "<p>I tried to use python-xmlsec to sign an xml document from a template. It works fine if URI=\"\". However, if URI is not empty, then I got error \"failed to sign\"</p>\n\n<p>python 3.6\nxmlsec from <a href=\"https://github.com/mehcode/python-xmlsec\" rel=\"nofollow noreferrer\">https://github.com/mehcode/python-xmlsec</a></p>\n\n<pre><code>import xmlsec\n\nxml_in='''&lt;Envelope xmlns=\"urn:envelope\"&gt;\n  &lt;Data ID=\"1234\"&gt;\n    Hello, World!\n  &lt;/Data&gt;\n  &lt;Signature xmlns=\"http://www.w3.org/2000/09/xmldsig#\"&gt;\n    &lt;SignedInfo&gt;\n      &lt;CanonicalizationMethod Algorithm=\"http://www.w3.org/TR/2001/REC-xml-c14n-20010315\" /&gt;\n      &lt;SignatureMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#rsa-sha1\" /&gt;\n      &lt;Reference URI=\"#1234\"&gt;\n        &lt;Transforms&gt;\n          &lt;Transform Algorithm=\"http://www.w3.org/2000/09/xmldsig#enveloped-signature\" /&gt;\n        &lt;/Transforms&gt;\n        &lt;DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\" /&gt;\n        &lt;DigestValue&gt;&lt;/DigestValue&gt;\n      &lt;/Reference&gt;\n    &lt;/SignedInfo&gt;\n    &lt;SignatureValue/&gt;\n    &lt;KeyInfo&gt;\n    &lt;KeyName/&gt;\n    &lt;/KeyInfo&gt;\n  &lt;/Signature&gt;\n&lt;/Envelope&gt;'''\n\ntemplate=etree.ElementTree(etree.fromstring(xml_in)).getroot()\n\nsignature_node = xmlsec.tree.find_node(template, xmlsec.constants.NodeSignature)\n\nctx = xmlsec.SignatureContext()\n\nctx.key = xmlsec.Key.from_file('c:/certificates/ercot.key', xmlsec.constants.KeyDataFormatPem)\n\nctx.sign(signature_node)\n\nprint(etree.tostring(template).decode())\n\n\nERROR below:\n\nTraceback (most recent call last):\n\n  File \"&lt;ipython-input-243-4de30b62be4f&gt;\", line 5, in &lt;module&gt;\n    ctx.sign(signature_node)\n\nError: (1, 'failed to sign')```\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "neural-network", "generative-adversarial-network"], "answers": [{"tags": [], "owner": {"reputation": 559, "user_id": 3884581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f79e296c8a5e8784d097fc89eeec45f?s=128&d=identicon&r=PG&f=1", "display_name": "pushStack", "link": "https://stackoverflow.com/users/3884581/pushstack"}, "is_accepted": false, "score": 0, "last_activity_date": 1573292745, "creation_date": 1573292745, "answer_id": 58778096, "question_id": 56676497, "link": "https://stackoverflow.com/questions/56676497/how-do-i-restore-the-generator-of-a-gan-from-a-tensorflow-model/58778096#58778096", "title": "How do I restore the Generator of a GAN from a Tensorflow Model?", "body": "<p>In the Tensorflow 2 doc, they save <strong>both</strong> the generator and the discriminator. However, they do not explain how to only restore the generator.</p>\n\n<pre><code>checkpoint_dir = './training_checkpoints'\ncheckpoint_prefix = os.path.join(checkpoint_dir, \"ckpt\")\ncheckpoint = tf.train.Checkpoint(generator_optimizer=generator_optimizer,\n                                 discriminator_optimizer=discriminator_optimizer,\n                                 generator=generator,\n                                 discriminator=discriminator)\n</code></pre>\n\n<p>And then restore with</p>\n\n<pre><code>checkpoint.restore(tf.train.latest_checkpoint(checkpoint_dir))\n</code></pre>\n\n<p>From <a href=\"https://www.tensorflow.org/tutorials/generative/dcgan#save_checkpoints\" rel=\"nofollow noreferrer\">https://www.tensorflow.org/tutorials/generative/dcgan#save_checkpoints</a></p>\n"}], "owner": {"reputation": 1, "user_id": 11672262, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--y-a75jIpg4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdHuupRjCKwA30azM4dksU3BT1CJw/mo/photo.jpg?sz=128", "display_name": "Carlos Tejeda", "link": "https://stackoverflow.com/users/11672262/carlos-tejeda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 598, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573292745, "creation_date": 1560981972, "question_id": 56676497, "link": "https://stackoverflow.com/questions/56676497/how-do-i-restore-the-generator-of-a-gan-from-a-tensorflow-model", "title": "How do I restore the Generator of a GAN from a Tensorflow Model?", "body": "<p>I\u00b4m trying to restore the trained Generator of a Generative Adversarial Network using a Tensorflow Model (the metagraph and the checkpoint)</p>\n\n<p>I\u00b4m new to tensorflow and python, so I\u00b4m not sure if what I\u00b4m doing is making sense. have already tried importing the metagraph from the meta file and restoring the variables from checkpoint, but i\u00b4m sure what to do next. My goal is to restore the trained Generator from the last checkpoint and then use it to generate new data from noise input. </p>\n\n<p>Here\u00b4s a link to a drive containing the model files:\n<a href=\"https://drive.google.com/drive/folders/1MaELMC4aOroSQlMJ32J3_ff3wxiBT_Fq?usp=sharing\" rel=\"nofollow noreferrer\">https://drive.google.com/drive/folders/1MaELMC4aOroSQlMJ32J3_ff3wxiBT_Fq?usp=sharing</a></p>\n\n<p>So far I have tried the following and it seems to be loading the graph:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\n# import the graph from the file\nimported_graph = tf.train.import_meta_graph(\"../../models/model-9.meta\")\n\n# list all the tensors in the graph\nfor tensor in tf.get_default_graph().get_operations():\n    print (tensor.name)\n\n# run the session\nwith tf.Session() as sess:\n    # restore the saved vairable\n    imported_graph.restore(sess, \"../../models/model-9\")\n\n</code></pre>\n\n<p>However, I\u00b4m not sure what to do next. Is it possible to run only the trained generator using this files? How can I acces it?</p>\n"}, {"tags": ["python", "pandas", "python-2.7", "dataframe"], "comments": [{"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 0, "creation_date": 1560981949, "post_id": 56676482, "comment_id": 99920030, "body": "What is the output of <code>print(pd.__version__)</code>"}, {"owner": {"reputation": 11, "user_id": 9550046, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XqyGEG2xtCo/AAAAAAAAAAI/AAAAAAAA7pE/uBKA1TvpVdk/photo.jpg?sz=128", "display_name": "Krishna Bang", "link": "https://stackoverflow.com/users/9550046/krishna-bang"}, "reply_to_user": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 0, "creation_date": 1560982071, "post_id": 56676482, "comment_id": 99920066, "body": "@Erfan: 0.22.0 it is this"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9550046, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XqyGEG2xtCo/AAAAAAAAAAI/AAAAAAAA7pE/uBKA1TvpVdk/photo.jpg?sz=128", "display_name": "Krishna Bang", "link": "https://stackoverflow.com/users/9550046/krishna-bang"}, "edited": false, "score": 0, "creation_date": 1561050626, "post_id": 56677428, "comment_id": 99947175, "body": "I have the data frame converted toPandas() before I do this operation."}, {"owner": {"reputation": 11, "user_id": 9550046, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XqyGEG2xtCo/AAAAAAAAAAI/AAAAAAAA7pE/uBKA1TvpVdk/photo.jpg?sz=128", "display_name": "Krishna Bang", "link": "https://stackoverflow.com/users/9550046/krishna-bang"}, "edited": false, "score": 0, "creation_date": 1561053439, "post_id": 56677428, "comment_id": 99948410, "body": "import pyspark from pyspark import SparkContext,SparkConf from pyspark.sql import HiveContext,SQLContext,functions from datetime import date, timedelta from pyspark.sql import Row from pyspark.sql.functions import col,explode from pyspark.sql import SparkSession import pandas as pd import numpy as np  #Set up Spark Session sqlSession = SparkSession\\         .builder\\         .appName(&quot;Beryllium Model&quot;)\\         .enableHiveSupport()\\         .config(&quot;hive.exec.dynamic.partition&quot;, &quot;true&quot;)\\         .config(&quot;hive.exec.dynamic.partition.mode&quot;, &quot;nonstrict&quot;)\\         .getOrCreate()"}, {"owner": {"reputation": 143, "user_id": 9277747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/790d5b3dd13f9c0faa7bc7d33d66eb90?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Stevens", "link": "https://stackoverflow.com/users/9277747/nicholas-stevens"}, "reply_to_user": {"reputation": 11, "user_id": 9550046, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XqyGEG2xtCo/AAAAAAAAAAI/AAAAAAAA7pE/uBKA1TvpVdk/photo.jpg?sz=128", "display_name": "Krishna Bang", "link": "https://stackoverflow.com/users/9550046/krishna-bang"}, "edited": false, "score": 0, "creation_date": 1561075477, "post_id": 56677428, "comment_id": 99955574, "body": "Just checking that you assigned toPandas() to something as it is not an in-place function"}], "tags": [], "owner": {"reputation": 143, "user_id": 9277747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/790d5b3dd13f9c0faa7bc7d33d66eb90?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Stevens", "link": "https://stackoverflow.com/users/9277747/nicholas-stevens"}, "is_accepted": false, "score": 0, "last_activity_date": 1560989553, "creation_date": 1560989553, "answer_id": 56677428, "question_id": 56676482, "link": "https://stackoverflow.com/questions/56676482/pandas-version-0-22-0-drop-duplicates-got-an-unexpected-keyword-argument-ke/56677428#56677428", "title": "Pandas version 0.22.0 - drop_duplicates() got an unexpected keyword argument &#39;keep&#39;", "body": "<p>It may be that your object is not a native pandas dataframe but instead a pyspark dataframe. \nFrom this <a href=\"http://spark.apache.org/docs/2.1.0/api/python/pyspark.sql.html#pyspark.sql.DataFrame.drop_duplicates\" rel=\"nofollow noreferrer\">http://spark.apache.org/docs/2.1.0/api/python/pyspark.sql.html#pyspark.sql.DataFrame.drop_duplicates</a> it seems that subset is only argument accepted. Can you add your imports and the lines where you create the dataframe.</p>\n"}], "owner": {"reputation": 11, "user_id": 9550046, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XqyGEG2xtCo/AAAAAAAAAAI/AAAAAAAA7pE/uBKA1TvpVdk/photo.jpg?sz=128", "display_name": "Krishna Bang", "link": "https://stackoverflow.com/users/9550046/krishna-bang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1927, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1561123780, "creation_date": 1560981856, "last_edit_date": 1561123780, "question_id": 56676482, "link": "https://stackoverflow.com/questions/56676482/pandas-version-0-22-0-drop-duplicates-got-an-unexpected-keyword-argument-ke", "title": "Pandas version 0.22.0 - drop_duplicates() got an unexpected keyword argument &#39;keep&#39;", "body": "<p>I am trying to drop duplicates in my dataframe using drop_duplicates(subset=[''], keep=False). Apparently it is working just okay in my Jupyter Notebook but when I am trying to executing through terminal as .py file I am getting the below error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/home/source/fork/PySpark_Analytics/Notebooks/Krish/beryllium_pandas.py\", line 54, in &lt;module&gt;\n    dffsamelname = dffsameflname.drop_duplicates(subset=['INDIVIDUAL_LASTNAME'], keep=False)\n\nFile \"/var/webeng/opensource/aetna-anaconda/lib/python2.7/site-packages/pandas/util/decorators.py\", line 88, in wrapper\n    return func(*args, **kwargs)\nTypeError: drop_duplicates() got an unexpected keyword argument 'keep'\n</code></pre>\n\n<p>Checked that the pandas version is >0.18 as keep = false was introduced then.</p>\n\n<pre><code># Trying to drop both the records with same last name\ndffsamelname = dffsameflname.drop_duplicates(subset=['INDIVIDUAL_LASTNAME'], keep=False)\n</code></pre>\n\n<p>I want to drop both the records being dropped. Hence keep=false is necessary.</p>\n\n<p>It just works fine if I remove the keep=false.</p>\n"}, {"tags": ["python", "mysql", "database", "distance"], "comments": [{"owner": {"reputation": 134, "user_id": 11644997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13afd6f0d08ea6d58382a24e4971aedb?s=128&d=identicon&r=PG&f=1", "display_name": "lc74", "link": "https://stackoverflow.com/users/11644997/lc74"}, "edited": false, "score": 0, "creation_date": 1560982754, "post_id": 56676468, "comment_id": 99920223, "body": "Are you trying to put the values of row  1 &#39;s lat and long and each other row&#39;s lat and long into that function?"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 3890023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0253d66a9153d875c80d394d40421fd?s=128&d=identicon&r=PG&f=1", "display_name": "GarthFabean", "link": "https://stackoverflow.com/users/3890023/garthfabean"}, "edited": false, "score": 0, "creation_date": 1561011686, "post_id": 56676638, "comment_id": 99926149, "body": "Thank you . Looking at your&#39;e answer it seems so easy now . I will definitely have to do some homework and more reading on my For loops . Thank you"}], "tags": [], "owner": {"reputation": 134, "user_id": 11644997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13afd6f0d08ea6d58382a24e4971aedb?s=128&d=identicon&r=PG&f=1", "display_name": "lc74", "link": "https://stackoverflow.com/users/11644997/lc74"}, "is_accepted": true, "score": 0, "last_activity_date": 1560982944, "creation_date": 1560982944, "answer_id": 56676638, "question_id": 56676468, "link": "https://stackoverflow.com/questions/56676468/distance-measurements-between-lat-and-long-co-ordinates-from-database-table-usin/56676638#56676638", "title": "Distance measurements between lat and long co-ordinates from database table using Python", "body": "<p>Here is what you would do if you want to compare each row to the long and lat of the first row.</p>\n\n<pre><code>for i in range(1,len(results)):\n     print haversine(results[0][2],results[0][3],results[i][2]results[i][3])\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 3890023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0253d66a9153d875c80d394d40421fd?s=128&d=identicon&r=PG&f=1", "display_name": "GarthFabean", "link": "https://stackoverflow.com/users/3890023/garthfabean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 56676638, "answer_count": 1, "score": 0, "last_activity_date": 1560982944, "creation_date": 1560981786, "question_id": 56676468, "link": "https://stackoverflow.com/questions/56676468/distance-measurements-between-lat-and-long-co-ordinates-from-database-table-usin", "title": "Distance measurements between lat and long co-ordinates from database table using Python", "body": "<p>I want to calculate the Distances  between lat and long co-ordinates from a database table with the first queried result in Table being reference for the other lat and long locations. The Db table will consist of \"USR,REF,LONG,LAT\" . </p>\n\n<p>Ultimately my goal is to make a GUI where user looks for a REF record . The user will then make a selection from a table . And based on the record selected , which will be used as reference for the other lat long points , the distant between the referenced lat &amp; long points and the other lat &amp; long points differences will be displayed  .   </p>\n\n<p>I have tried the haversine formula . But i see most of the tutorials show only two lat and lot points for distant measurements </p>\n\n<pre><code>import sys\nimport math \n\n\ndef haversine(lon1, lat1, lon2, lat2):\n\n    # convert decimal degrees to radians    \n    lon1, lat1, lon2, lat2 = map(math.radians, [lon1, lat1, lon2, lat2])\n\n    # haversine formula    \n    dlon = lon2 - lon1 \n    dlat = lat2 - lat1\n\n    a = math.sin(dlat/2)**2 + math.cos(lat1) * math.cos(lat2) *math.sin(dlon/2)**2\n\n    c = 2 * math.asin(math.sqrt(a))\n\n    km = 6367 * c\n\n    return km\n\nconn = pypyodbc.connect(# My MsAccessDB Location)\n\n\ncursor = conn.cursor()\n\nquery = \"SELECT*FROM Test_dist ORDER BY Licensee\"\n\ncursor.execute(query)\n\nresults = cursor.fetchall()\n\n\nfor x in results:\n\n     print(x) ```\n\n\n\nOUTPUT\n\n\n(' ABC JIM', 469.55, 18.533333, -33.85)\n(' CALLY', 383.5125, 23.460278, -33.234722)\n(' ROSS', 469.55, 21.983333, -34.166667)\n(' SALLY M', 383.5625, 23.2325, -33.072222)\n('KRACE', 400.36, 23.5688, -33.045668)\n('LEEMER', 202.36, 23.2566, -33.158859)\n\n\n\nWhen i run the code it displays all my records . I am not sure how to implement this into the haversine function thou as I would need to do it from my database table .\n</code></pre>\n"}, {"tags": ["python", "yaml"], "comments": [{"owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "edited": false, "score": 0, "creation_date": 1560981764, "post_id": 56676448, "comment_id": 99919968, "body": "use a yaml parsing library, you just need the attribute name"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 9496180, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aHFG1janYK0/AAAAAAAAAAI/AAAAAAAAAG0/s5Q44ubc2w4/photo.jpg?sz=128", "display_name": "Gabriel Shen", "link": "https://stackoverflow.com/users/9496180/gabriel-shen"}, "edited": false, "score": 0, "creation_date": 1561050704, "post_id": 56676605, "comment_id": 99947203, "body": "Thanks for the input! However I am getting some errors, the data[line_number] only gives the indexed character not the line. Also, I am getting an error of &quot;TypeError: an integer is required. I&#39;m assuming this is because data[line_number] doesn&#39;t actually replace the line. Do you have any ideas? Thanks!"}, {"owner": {"reputation": 157, "user_id": 8910101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ac3fada3bf332cdd9a5e58ea53ff889?s=128&d=identicon&r=PG&f=1", "display_name": "Moralous", "link": "https://stackoverflow.com/users/8910101/moralous"}, "reply_to_user": {"reputation": 93, "user_id": 9496180, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aHFG1janYK0/AAAAAAAAAAI/AAAAAAAAAG0/s5Q44ubc2w4/photo.jpg?sz=128", "display_name": "Gabriel Shen", "link": "https://stackoverflow.com/users/9496180/gabriel-shen"}, "edited": false, "score": 0, "creation_date": 1561060215, "post_id": 56676605, "comment_id": 99951190, "body": "@GabrielShen The TypeError you are getting - can you tell me what line it&#39;s on?"}, {"owner": {"reputation": 93, "user_id": 9496180, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aHFG1janYK0/AAAAAAAAAAI/AAAAAAAAAG0/s5Q44ubc2w4/photo.jpg?sz=128", "display_name": "Gabriel Shen", "link": "https://stackoverflow.com/users/9496180/gabriel-shen"}, "edited": false, "score": 0, "creation_date": 1561065971, "post_id": 56676605, "comment_id": 99953359, "body": "Yep! its the data[line_number] = replacement_line"}, {"owner": {"reputation": 157, "user_id": 8910101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ac3fada3bf332cdd9a5e58ea53ff889?s=128&d=identicon&r=PG&f=1", "display_name": "Moralous", "link": "https://stackoverflow.com/users/8910101/moralous"}, "reply_to_user": {"reputation": 93, "user_id": 9496180, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aHFG1janYK0/AAAAAAAAAAI/AAAAAAAAAG0/s5Q44ubc2w4/photo.jpg?sz=128", "display_name": "Gabriel Shen", "link": "https://stackoverflow.com/users/9496180/gabriel-shen"}, "edited": false, "score": 0, "creation_date": 1561718262, "post_id": 56676605, "comment_id": 100164792, "body": "@GabrielShen Sorry for the 8 day wait. If it isn&#39;t fixed, could you send me what you&#39;ve got on line 2 (The <code>line_number</code> one)?"}], "tags": [], "owner": {"reputation": 157, "user_id": 8910101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ac3fada3bf332cdd9a5e58ea53ff889?s=128&d=identicon&r=PG&f=1", "display_name": "Moralous", "link": "https://stackoverflow.com/users/8910101/moralous"}, "is_accepted": false, "score": 1, "last_activity_date": 1560982707, "creation_date": 1560982707, "answer_id": 56676605, "question_id": 56676448, "link": "https://stackoverflow.com/questions/56676448/how-to-change-a-line-in-a-yaml-file/56676605#56676605", "title": "How to change a line in a YAML file?", "body": "<p>Since you know the exact line number, this is quite easy - it doesn't even matter that the file is YAML if you know exactly what you need to replace it with.</p>\n\n<p>I'm assuming here that all the files that need their lines changed are in the same directory, with no other YAML files. If this isn't the case then the program will require fine-tuning of course.</p>\n\n<pre><code>import os\nline_number = 47  # Whatever the line number you're trying to replace is\nreplacement_line = \"Whatever string you're replacing this line with\"\n\nitems = os.listdir(\".\")  # Gets all the files &amp; directories in the folder containing the script\n\nfor file_name in items:  # For each of these files and directories,\n    if file_name.lower().endswith(\".yaml\"):  # check if the file is a YAML. If it is:\n        with open(file_name, \"w\") as file:  # Safely open the file\n            data = file.read()  # Read its contents\n            data[line_number] = replacement_line  # Replace the line\n            file.write(data)  # And save the file\n</code></pre>\n\n<p>Note that if your files are .yml rather than .yaml, then you would have to change that in the code. Additionally, if your files are too large this could cause problems as each file is loaded into memory.</p>\n\n<p>If this doesn't work for you, then there are other solutions around the internet, including Stack Overflow!</p>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 9496180, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aHFG1janYK0/AAAAAAAAAAI/AAAAAAAAAG0/s5Q44ubc2w4/photo.jpg?sz=128", "display_name": "Gabriel Shen", "link": "https://stackoverflow.com/users/9496180/gabriel-shen"}, "edited": false, "score": 0, "creation_date": 1561066312, "post_id": 56676647, "comment_id": 99953473, "body": "Hi! Thanks for the input! What is the data.pop(&quot;token_default&quot;) needed for?"}, {"owner": {"reputation": 1206, "user_id": 4039619, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh3.googleusercontent.com/-TD1WY5pcbCc/AAAAAAAAAAI/AAAAAAAAAFE/mxlKAxe_A2Q/photo.jpg?sz=128", "display_name": "Sigve Karolius", "link": "https://stackoverflow.com/users/4039619/sigve-karolius"}, "reply_to_user": {"reputation": 93, "user_id": 9496180, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aHFG1janYK0/AAAAAAAAAAI/AAAAAAAAAG0/s5Q44ubc2w4/photo.jpg?sz=128", "display_name": "Gabriel Shen", "link": "https://stackoverflow.com/users/9496180/gabriel-shen"}, "edited": false, "score": 0, "creation_date": 1561066629, "post_id": 56676647, "comment_id": 99953592, "body": "Just modifying the data by removing the &quot;token_default&quot; entry as it is not needed after serialisation. It was merely intended to illustrate that the YAML file is parsed and produces the good old dictionary datatype internally in python."}], "tags": [], "owner": {"reputation": 1206, "user_id": 4039619, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh3.googleusercontent.com/-TD1WY5pcbCc/AAAAAAAAAAI/AAAAAAAAAFE/mxlKAxe_A2Q/photo.jpg?sz=128", "display_name": "Sigve Karolius", "link": "https://stackoverflow.com/users/4039619/sigve-karolius"}, "is_accepted": false, "score": 0, "last_activity_date": 1561066723, "last_edit_date": 1561066723, "creation_date": 1560982995, "answer_id": 56676647, "question_id": 56676448, "link": "https://stackoverflow.com/questions/56676448/how-to-change-a-line-in-a-yaml-file/56676647#56676647", "title": "How to change a line in a YAML file?", "body": "<p>I use the <a href=\"https://pyyaml.org/\" rel=\"nofollow noreferrer\">pyyaml</a> library (<code>pip install pyyaml</code>):</p>\n\n<p>It handles the full YAML syntax as shown in the example below:</p>\n\n<ul>\n<li><code>python example</code></li>\n</ul>\n\n<pre><code>import yaml\n\nwith open(\"data.yaml\", \"w+\") as FILE:\n    data = yaml.load(FILE)\n    data.pop(\"token_default\")\n    yaml.dump(data)\n\n\n</code></pre>\n\n<ul>\n<li><code>data.yaml</code></li>\n</ul>\n\n<pre><code>token_default: &amp;token\n  token      : !!str\n  type       : # var, field, list, vector\n  version    : 0.1\n  namespace  : cam_tokens\n  properties :\n    unit   : !!seq [0, 0, 0, 0, 0, 0]\n    min    : !!float +inf\n    max    : !!float -inf\n    argPos : !!int -1\n  required   :\n    - unit\n    - argPos\n\nmass:\n  &lt;&lt;: *token\n  token: mass\n  namespace  : cam_tokens\n  properties :\n    unit   : !!seq [1, 0, 0, 0, 0, 0]\n  required   :\n    - unit\n    - argPos\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 9496180, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aHFG1janYK0/AAAAAAAAAAI/AAAAAAAAAG0/s5Q44ubc2w4/photo.jpg?sz=128", "display_name": "Gabriel Shen", "link": "https://stackoverflow.com/users/9496180/gabriel-shen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 904, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1561066723, "creation_date": 1560981596, "last_edit_date": 1560987230, "question_id": 56676448, "link": "https://stackoverflow.com/questions/56676448/how-to-change-a-line-in-a-yaml-file", "title": "How to change a line in a YAML file?", "body": "<p>I have a bunch of YAML files and each file has one line of code that needs to be changed. I am trying to automate it using Python, what's the best way to do this?</p>\n\n<p>Right now I have a list of the files, and I plan on opening each one and finding the line needed to be changed then replacing it. </p>\n\n<p>Is this possible? I can't seem to figure out how to replace the line. I know the exact line number, could that help?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1560981639, "post_id": 56676421, "comment_id": 99919937, "body": "Those are not arrays, those are <code>list</code> objects. But you probably just want to use a <code>dict</code> object"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11672826, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SiqmhRpEr1U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfxzXjQtR_bH6muN2__TyyPe-Qj9w/mo/photo.jpg?sz=128", "display_name": "Andrea Pinaroli", "link": "https://stackoverflow.com/users/11672826/andrea-pinaroli"}, "edited": false, "score": 0, "creation_date": 1561027935, "post_id": 56676478, "comment_id": 99934412, "body": "it translates only one element per time, if I write ab it says      Traceback (most recent call last):   File &quot;/Users/Andrea/PycharmProjects/charm_traduttore/venv/tradutt&zwnj;&#8203;ore gorg-ita.py&quot;, line 4, in &lt;module&gt;     dictionary[a] KeyError: &#39;ab&#39;"}, {"owner": {"reputation": 501, "user_id": 9154627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FEBQ.png?s=128&g=1", "display_name": "Theo", "link": "https://stackoverflow.com/users/9154627/theo"}, "reply_to_user": {"reputation": 3, "user_id": 11672826, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SiqmhRpEr1U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfxzXjQtR_bH6muN2__TyyPe-Qj9w/mo/photo.jpg?sz=128", "display_name": "Andrea Pinaroli", "link": "https://stackoverflow.com/users/11672826/andrea-pinaroli"}, "edited": false, "score": 0, "creation_date": 1561051490, "post_id": 56676478, "comment_id": 99947549, "body": "@AndreaPinaroli Edited my answer. The reason it would be <i>much</i> better for you to use a dictionary is because it&#39;s <i>much</i> easier to edit an earlier definition. If you have two lists that are each 100 words long, it&#39;s very time-consuming to find the 65th element in each list. A dictionary lets you see the untranslated and translated words side by side."}], "tags": [], "owner": {"reputation": 501, "user_id": 9154627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FEBQ.png?s=128&g=1", "display_name": "Theo", "link": "https://stackoverflow.com/users/9154627/theo"}, "is_accepted": true, "score": 1, "last_activity_date": 1561051290, "last_edit_date": 1561051290, "creation_date": 1560981844, "answer_id": 56676478, "question_id": 56676421, "link": "https://stackoverflow.com/questions/56676421/how-to-check-if-input-is-in-a-array-and-print-the-corresponding-element-of-anoth/56676478#56676478", "title": "How to check if input is in a array and print the corresponding element of another array?", "body": "<p>You <em>could</em> use two lists. However, a much better solution is to use dictionary values. That way, you simply enter a key (the input word) and are given the value it translates to. You can use this:</p>\n\n<pre><code>dictionary = { 'a': 'cat', 'b' : 'dog'}\n</code></pre>\n\n<p>and can easily add more translations with the form of <code>input : output</code> to more easily see what each input translates to. The way to then translate a word is to, for each input, type</p>\n\n<pre><code>dictionary[input]\n</code></pre>\n\n<p>and you will be given the correct output. For example, <code>dictionary['a']</code> will return <code>'cat'</code> in this example. This cuts away on time counting what position each key and output are in each list to make sure they match up.</p>\n\n<p>To translate multiple characters in a row, use this:</p>\n\n<pre><code>dictionary = { 'a': 'cat', 'b' : 'dog'}\nundecoded=\"abbabaa\"\ndecoded=\"\"\nfor i in undecoded:\n    decoded=decoded+dictionary[i]\nprint(decoded)\n</code></pre>\n\n<p>Hope this helps! -Theo</p>\n\n<p>Edit: As juanpa.arrivillaga mentions, if you already have two lists that you want to transition into dictionary form, you can use <code>dictionary=dict(zip(array_1, array_2))</code></p>\n"}, {"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1560982146, "post_id": 56676492, "comment_id": 99920077, "body": "this could just be <code>dict(zip(array_1, array_2))</code>"}], "tags": [], "owner": {"reputation": 843, "user_id": 8426627, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8203c0c714dd17ad3eff6d7188ff548a?s=128&d=identicon&r=PG&f=1", "display_name": "user8426627", "link": "https://stackoverflow.com/users/8426627/user8426627"}, "is_accepted": false, "score": 0, "last_activity_date": 1560981947, "creation_date": 1560981947, "answer_id": 56676492, "question_id": 56676421, "link": "https://stackoverflow.com/questions/56676421/how-to-check-if-input-is-in-a-array-and-print-the-corresponding-element-of-anoth/56676492#56676492", "title": "How to check if input is in a array and print the corresponding element of another array?", "body": "<p>Just make a dict like :</p>\n\n<pre><code>d = {array_1[n] :array_2[n] for n in range(len(array_1))}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 11672826, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SiqmhRpEr1U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfxzXjQtR_bH6muN2__TyyPe-Qj9w/mo/photo.jpg?sz=128", "display_name": "Andrea Pinaroli", "link": "https://stackoverflow.com/users/11672826/andrea-pinaroli"}, "edited": false, "score": 1, "creation_date": 1561027409, "post_id": 56676599, "comment_id": 99934148, "body": "thank you, how can I print the words all in one line?"}], "tags": [], "owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "is_accepted": false, "score": 1, "last_activity_date": 1561033518, "last_edit_date": 1561033518, "creation_date": 1560982667, "answer_id": 56676599, "question_id": 56676421, "link": "https://stackoverflow.com/questions/56676421/how-to-check-if-input-is-in-a-array-and-print-the-corresponding-element-of-anoth/56676599#56676599", "title": "How to check if input is in a array and print the corresponding element of another array?", "body": "<p>You can use <code>list.index()</code> function to find correct index:</p>\n\n<pre><code>array_1 = [\"a\", \"b\"]\narray_2 = [\"cat\", \"dog\"]\n\nphrase = 'acba'\n\ndef translation(phrase):\n    for letter in phrase:\n        yield array_2[array_1.index(letter)] if letter in array_1 else None\n\nfor t in translation(phrase):\n    if t:\n        print(t)\n    else:\n        print('NOT FOUND')\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>cat\nNOT FOUND\ndog\ncat\n</code></pre>\n\n<p>Edit: to join the phrases to one string you could to this for example:</p>\n\n<pre><code>final_string = ''.join(t if t is not None else '' for t in translation(phrase))\nprint(final_string)\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>catdogcat\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11672826, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SiqmhRpEr1U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfxzXjQtR_bH6muN2__TyyPe-Qj9w/mo/photo.jpg?sz=128", "display_name": "Andrea Pinaroli", "link": "https://stackoverflow.com/users/11672826/andrea-pinaroli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 56676478, "answer_count": 3, "score": 0, "last_activity_date": 1561051290, "creation_date": 1560981414, "last_edit_date": 1560984661, "question_id": 56676421, "link": "https://stackoverflow.com/questions/56676421/how-to-check-if-input-is-in-a-array-and-print-the-corresponding-element-of-anoth", "title": "How to check if input is in a array and print the corresponding element of another array?", "body": "<p>If I'm making a \"translator\" and for each letter i'm assigning a world (like cat = a, dog = b...) can i just make 2 arrays where the \"translation\" of every letter in the first array corresponds to the element with the same position of the letter itself in the other array for example</p>\n\n<pre><code>array_1 = [\"a\", \"b\"]\narray_2 = [\"cat\", \"dog\"]\n\ndef translation(phrase):\n     translation = \"\"\n     for letter in phrase:\n     if letter in array_1:\n          translation += #the element of array_2 in the same position of the element of array_1 witch is equal to letter\n\n     return translation\n\nprint(translation(input()))\n</code></pre>\n"}, {"tags": ["python", "selenium"], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 4428745, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/4FwqA.jpg?s=128&g=1", "display_name": "Dictador", "link": "https://stackoverflow.com/users/4428745/dictador"}, "edited": false, "score": 0, "creation_date": 1561196349, "post_id": 56676717, "comment_id": 99990970, "body": "After dismissing the cookie bar the line driver.find_element_by_id(&#39;shop-selection-master&#39;).click() still fails to find the element. However, &quot;driver.execute_script&quot; does the trick and brings up the popup window. I switch to it with &quot;driver.switch_to.active_element;     driver.find_element_by_xpath(&quot;//div[@id=&#39;geolocation_popup_s&zwnj;&#8203;elect_market_chosen&#39;&zwnj;&#8203;]/a/span&quot;).click();d&zwnj;&#8203;river.find_element_b&zwnj;&#8203;y_xpath(&quot;//div[@id=&#39;&zwnj;&#8203;geolocation_popup_se&zwnj;&#8203;lect_market_chosen&#39;]&zwnj;&#8203;/div/ul/li[5]&quot;).clic&zwnj;&#8203;k() &quot;. Then, the page configures itself to the selected shop and then I am unable to switch to the default content."}, {"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "reply_to_user": {"reputation": 181, "user_id": 4428745, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/4FwqA.jpg?s=128&g=1", "display_name": "Dictador", "link": "https://stackoverflow.com/users/4428745/dictador"}, "edited": false, "score": 0, "creation_date": 1561196604, "post_id": 56676717, "comment_id": 99991030, "body": "You probably need to loop through setting the store each time"}, {"owner": {"reputation": 181, "user_id": 4428745, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/4FwqA.jpg?s=128&g=1", "display_name": "Dictador", "link": "https://stackoverflow.com/users/4428745/dictador"}, "edited": false, "score": 0, "creation_date": 1561198533, "post_id": 56676717, "comment_id": 99991410, "body": "Can the selection of the store (executing the script) and then scrapping the webpage content be done with PyQt? Selenium is painfully slow."}], "tags": [], "owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "is_accepted": false, "score": 0, "last_activity_date": 1560984227, "last_edit_date": 1560984227, "creation_date": 1560983574, "answer_id": 56676717, "question_id": 56676398, "link": "https://stackoverflow.com/questions/56676398/find-and-click-an-element-inside-a-script-element/56676717#56676717", "title": "Find and click an element inside a script element", "body": "<p>Dismiss the cookie bar:</p>\n\n<pre><code>from selenium import webdriver\n\ndriver = webdriver.Firefox(executable_path='d:\\Work\\geckodriver.exe')\nurl = 'https://www.castorama.pl/deska-14x90x540-eslov-jodel-1-94-id-1105153.html'\ndriver.get(url)\ndriver.maximize_window()\ndriver.find_element_by_css_selector('[onclick=\"bold.cookie.closeCookie();\"]').click()\ndriver.find_element_by_id('shop-selection-master').click()\n</code></pre>\n\n<hr>\n\n<p>Purists won't like it but you can also use javascript</p>\n\n<pre><code>driver.execute_script(\"document.querySelector('#shop-selection-master').click();\")\n</code></pre>\n\n<hr>\n\n<p>selecting options is covered extensively here: <a href=\"https://stackoverflow.com/questions/7867537/selenium-python-drop-down-menu-option-value\">Selenium - Python - drop-down menu option value</a></p>\n\n<p>You have the id of the parent <code>select</code>: <code>geolocation-popup-select-market</code>.</p>\n"}], "owner": {"reputation": 181, "user_id": 4428745, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/4FwqA.jpg?s=128&g=1", "display_name": "Dictador", "link": "https://stackoverflow.com/users/4428745/dictador"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1560984227, "creation_date": 1560981277, "question_id": 56676398, "link": "https://stackoverflow.com/questions/56676398/find-and-click-an-element-inside-a-script-element", "title": "Find and click an element inside a script element", "body": "<p>I am trying to change store location on a website with python and selenium.\nSelenium IDE addon from Firefox gives me a sequence. The sequence works within selenium IDE from Firefox but I cannot get it to work from within Python (Spyder). The element I want to click is inside a script and no tool can find an element inside a script. Beautifulsoup can not do it, neither can selenium.\nWith the following code I try to get a product price in every store so I need to change the store (it is that yellow button in the top left corner and then the dropdown list) to every store from the dropdown list and scrap the page source for product price. But whenever I try \"driver.find_element_by_\" I get \"Unable to locate element: \"</p>\n\n<p>The click sequence is recorded with Selenium IDE addon from Firefox.\nOr maybe there is a faster way than selenium to switch between shops and get the product price. I could not do it just with Beautifulsoup.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from selenium import webdriver\ndriver = webdriver.Firefox(executable_path='d:\\Work\\geckodriver.exe')\nurl = 'https://www.castorama.pl/deska-14x90x540-eslov-jodel-1-94-id-1105153.html'\ndriver.get(url)\ndriver.maximize_window()\ndriver.find_element_by_id(\"market-name\").click() #Unable to locate element\ndriver.find_element_by_id(\"shop-selection-master-infostore\").click()\ndriver.find_element_by_xpath(\"//div[@id='geolocation_popup_select_market_chosen']/a/span\").click()\ndriver.find_element_by_xpath(\"//div[@id='geolocation_popup_select_market_chosen']/div/ul/li[2]\").click()\n</code></pre>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 14291, "user_id": 545424, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6a4ac5213b7eeab93dc09b263effcfcf?s=128&d=identicon&r=PG", "display_name": "user545424", "link": "https://stackoverflow.com/users/545424/user545424"}, "edited": false, "score": 0, "creation_date": 1560981541, "post_id": 56676387, "comment_id": 99919914, "body": "You can translate your hack to numpy using <code>vals[((len(vals)-1)*np.arange(4)&#47;(4-1)).astype(int)]</code> assuming <code>vals</code> is a numpy array."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 2, "creation_date": 1560982095, "post_id": 56676387, "comment_id": 99920068, "body": "<code>n=4; vals[::len(a)&#47;&#47;(n-1)]</code>"}, {"owner": {"reputation": 2248, "user_id": 824954, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fb9caff49a964c7f3c94b49f91812d78?s=128&d=identicon&r=PG", "display_name": "Jonathon Vandezande", "link": "https://stackoverflow.com/users/824954/jonathon-vandezande"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1560983721, "post_id": 56676387, "comment_id": 99920442, "body": "@wwii, that would not choose the end for n=5. Perhaps I should have added another example."}, {"owner": {"reputation": 1110, "user_id": 7025361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zn7VV.png?s=128&g=1", "display_name": "LiuXiMin", "link": "https://stackoverflow.com/users/7025361/liuximin"}, "edited": false, "score": 0, "creation_date": 1560984844, "post_id": 56676387, "comment_id": 99920672, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/46494029/nearly-evenly-select-items-from-a-list\">(Nearly) Evenly select items from a list</a>"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1560986093, "post_id": 56676387, "comment_id": 99920935, "body": "<code>Perhaps I should have added another example</code> - maybe the behaviour you need when the list cannot be evenly divided by <code>n</code>, and any other specs like <code>must include endpoints</code>..."}, {"owner": {"reputation": 2248, "user_id": 824954, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fb9caff49a964c7f3c94b49f91812d78?s=128&d=identicon&r=PG", "display_name": "Jonathon Vandezande", "link": "https://stackoverflow.com/users/824954/jonathon-vandezande"}, "reply_to_user": {"reputation": 1110, "user_id": 7025361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zn7VV.png?s=128&g=1", "display_name": "LiuXiMin", "link": "https://stackoverflow.com/users/7025361/liuximin"}, "edited": false, "score": 0, "creation_date": 1560988409, "post_id": 56676387, "comment_id": 99921404, "body": "@LiuXiMin, that appears to create a similar mask, but doesn&#39;t include the endpoints."}], "answers": [{"tags": [], "owner": {"reputation": 620, "user_id": 7306280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f688cc11416b656bf9da56cef229afd1?s=128&d=identicon&r=PG&f=1", "display_name": "arajshree", "link": "https://stackoverflow.com/users/7306280/arajshree"}, "is_accepted": false, "score": 0, "last_activity_date": 1560981564, "creation_date": 1560981564, "answer_id": 56676440, "question_id": 56676387, "link": "https://stackoverflow.com/questions/56676387/select-n-values-from-a-list-spanning-across-the-range/56676440#56676440", "title": "Select n values from a list, spanning across the range", "body": "<p>You can do something like this:</p>\n\n<pre><code>def select_n(vals,cnt):\n    inc = int(len(vals)/cnt)\n    # print(inc)\n    res = [vals[i] for i in range(0,len(vals),inc)]\n    # print(res)\n    return res\n\nvals = list(range(10))\n# print(vals)\nres = select_n(vals,4)\nprint(res)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": true, "score": 1, "last_activity_date": 1560984648, "creation_date": 1560984648, "answer_id": 56676863, "question_id": 56676387, "link": "https://stackoverflow.com/questions/56676387/select-n-values-from-a-list-spanning-across-the-range/56676863#56676863", "title": "Select n values from a list, spanning across the range", "body": "<p>you could use <code>np.linspace</code> for the \"heavy\" lifting:</p>\n\n<pre><code>from operator import itemgetter\n\na = [*range(10)]\n\nN = 5\n\n# if tuple ok \nitemgetter(*np.linspace(0.5,len(a)-0.5,N,dtype=int))(a)\n# (0, 2, 5, 7, 9)\n\n# if must be list\n[a[i] for i in np.linspace(0.5,len(a)-0.5,N,dtype=int)]\n# [0, 2, 5, 7, 9]\n</code></pre>\n"}], "owner": {"reputation": 2248, "user_id": 824954, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fb9caff49a964c7f3c94b49f91812d78?s=128&d=identicon&r=PG", "display_name": "Jonathon Vandezande", "link": "https://stackoverflow.com/users/824954/jonathon-vandezande"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 56676863, "answer_count": 2, "score": 0, "last_activity_date": 1560984648, "creation_date": 1560981214, "last_edit_date": 1560984050, "question_id": 56676387, "link": "https://stackoverflow.com/questions/56676387/select-n-values-from-a-list-spanning-across-the-range", "title": "Select n values from a list, spanning across the range", "body": "<p>I have a list of numbers and I would like to select n values evenly distributed across the list.</p>\n\n<p>For example:</p>\n\n<pre><code>vals = list(range(10))\nselect_n(vals, 4)\nselect_n(vals, 5)\n</code></pre>\n\n<p>should give</p>\n\n<pre><code>[0, 3, 6, 9]\n[0, 2, 5, 7, 9]\n</code></pre>\n\n<p>My current hack is to iterate as such:</p>\n\n<pre><code>[vals[round((len(vals) - 1)/(n-1) * i)] for i in range(n)]\n</code></pre>\n\n<p>Is there a Python or NumPy function to do this? If not, is there a more efficient way to write this?</p>\n"}, {"tags": ["python", "shutil"], "comments": [{"owner": {"reputation": 134, "user_id": 11644997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13afd6f0d08ea6d58382a24e4971aedb?s=128&d=identicon&r=PG&f=1", "display_name": "lc74", "link": "https://stackoverflow.com/users/11644997/lc74"}, "edited": false, "score": 0, "creation_date": 1560982432, "post_id": 56676385, "comment_id": 99920151, "body": "What code are you using?  <code>shutil.copytree(&quot;&#47;Users&#47;myname&#47;f1&#47;f2&#47;f3&quot;, &quot;&#47;Users&#47;myname&#47;fALPHA&#47;fBETA&#47;fCHARLIE&#47;fDELTA&#47;f3&quot;)</code>   Is this not giving you the desired result?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 134, "user_id": 11644997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13afd6f0d08ea6d58382a24e4971aedb?s=128&d=identicon&r=PG&f=1", "display_name": "lc74", "link": "https://stackoverflow.com/users/11644997/lc74"}, "edited": false, "score": 0, "creation_date": 1560987823, "post_id": 56676385, "comment_id": 99921307, "body": "What @lc74 suggests should work. Note that the destination path in it ends with <code>&#47;f3</code> unlike what you have in your current code. The documentation for <code>copytree()</code> specifies that the destination directory should not already exist, so you must specify one as part of the path to it."}], "answers": [{"tags": [], "owner": {"reputation": 136, "user_id": 6666796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a68261783e945f969187769bae974c5?s=128&d=identicon&r=PG&f=1", "display_name": "GeoMSI", "link": "https://stackoverflow.com/users/6666796/geomsi"}, "is_accepted": false, "score": 0, "last_activity_date": 1560986099, "creation_date": 1560986099, "answer_id": 56677057, "question_id": 56676385, "link": "https://stackoverflow.com/questions/56676385/how-to-use-shutil-copytree-without-copying-parent-file-path/56677057#56677057", "title": "How to use shutil.copytree without copying parent file path?", "body": "<p>As commented by @Ic74, what you are missing is the name of the target directory under \"fDELTA\" folder,</p>\n\n<pre><code>from shutil import copytree\nfrom_path = \"/Users/myname/f1/f2/f3\"\nto_path = \"/Users/myname/fALPHA/fBETA/fCHARLIE/fDELTA/f3\"\ncopytree(from_path,to_path)\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 11672845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/240e8f3eaf77400beca13c288f358634?s=128&d=identicon&r=PG&f=1", "display_name": "visualbread", "link": "https://stackoverflow.com/users/11672845/visualbread"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560986099, "creation_date": 1560981189, "last_edit_date": 1560984897, "question_id": 56676385, "link": "https://stackoverflow.com/questions/56676385/how-to-use-shutil-copytree-without-copying-parent-file-path", "title": "How to use shutil.copytree without copying parent file path?", "body": "<p>I am very new to Python, and am working through some exercises in the Automate the Boring Stuff with Python book. I am learning how to organize files using Python. I am confused about what happens when I use <code>shutil.copytree()</code>. When I use it, it copies my source folder, and every parent folder in its file path to my destination, but I don't want the parent folders.</p>\n\n<hr>\n\n<p>I have two directories:</p>\n\n<p>Directory 1: <code>/Users/myname/f1/f2/f3/f4/f5</code></p>\n\n<p>Directory 2: <code>/Users/myname/fALPHA/fBETA/fCHARLIE/fDELTA</code></p>\n\n<hr>\n\n<p>I want to copy everything starting at <code>f3</code> to the <code>fDELTA</code> folder. I want the new directory to look like this:</p>\n\n<p><code>/Users/myname/fALPHA/fBETA/fCHARLIE/fDELTA/f3/f4/f5</code></p>\n\n<hr>\n\n<p>My current code is this:</p>\n\n<pre><code>shutil.copy('/Users/myname/f1/f2/f3','/Users/myname/fALPHA/fBETA/fCHARLIE/fDELTA')\n</code></pre>\n\n<p>However, what I end up getting is this:</p>\n\n<p><code>/Users/myname/fALPHA/fBETA/fCHARLIE/fDELTA/Users/myname/f1/f2/f3/f4/f5</code></p>\n\n<p>I don't want it copying all of these parent folders. I just want the tree that begins at the specified source.</p>\n\n<p>I know this seems simple, but I just can't seem to find an solution.</p>\n"}, {"tags": ["python", "machine-learning", "gradient-descent", "backpropagation"], "comments": [{"owner": {"reputation": 466, "user_id": 5752859, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6a4c25cdadad0ed5096efecada8f89f9?s=128&d=identicon&r=PG&f=1", "display_name": "Olivia Watkins", "link": "https://stackoverflow.com/users/5752859/olivia-watkins"}, "edited": false, "score": 0, "creation_date": 1561006863, "post_id": 56676362, "comment_id": 99924627, "body": "I doubt this is the full issue, but it seems like you aren&#39;t using your learning rate."}, {"owner": {"reputation": 466, "user_id": 5752859, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6a4c25cdadad0ed5096efecada8f89f9?s=128&d=identicon&r=PG&f=1", "display_name": "Olivia Watkins", "link": "https://stackoverflow.com/users/5752859/olivia-watkins"}, "edited": false, "score": 0, "creation_date": 1561006938, "post_id": 56676362, "comment_id": 99924641, "body": "I&#39;m also confused about your softmax derivative is output -  predicted.  I expected something like this: <a href=\"https://stats.stackexchange.com/questions/235528/backpropagation-with-softmax-cross-entropy\" title=\"backpropagation with softmax cross entropy\">stats.stackexchange.com/questions/235528/&hellip;</a>.  But maybe I&#39;m missing something.  I might be able to help better if you explained that."}, {"owner": {"reputation": 11, "user_id": 10750386, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wFyZS7FNguI/AAAAAAAAAAI/AAAAAAAAA7s/lNOpV5S1LnY/photo.jpg?sz=128", "display_name": "Inon", "link": "https://stackoverflow.com/users/10750386/inon"}, "reply_to_user": {"reputation": 466, "user_id": 5752859, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6a4c25cdadad0ed5096efecada8f89f9?s=128&d=identicon&r=PG&f=1", "display_name": "Olivia Watkins", "link": "https://stackoverflow.com/users/5752859/olivia-watkins"}, "edited": false, "score": 0, "creation_date": 1561044820, "post_id": 56676362, "comment_id": 99944249, "body": "Edited My Comment (In the code [output - predicted]) so my post would be clearer."}], "owner": {"reputation": 11, "user_id": 10750386, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wFyZS7FNguI/AAAAAAAAAAI/AAAAAAAAA7s/lNOpV5S1LnY/photo.jpg?sz=128", "display_name": "Inon", "link": "https://stackoverflow.com/users/10750386/inon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1572712006, "creation_date": 1560981018, "last_edit_date": 1592644375, "question_id": 56676362, "link": "https://stackoverflow.com/questions/56676362/neural-network-not-converging-anywhere", "title": "Neural Network Not Converging &quot;anywhere&quot;", "body": "<p>In the past 2 weeks I've been trying to implement a Hand-Written-Digit Classifier with a Feed-Forward Neural Network, using the MNIST Database.\nThe neural network uses Cross-Entropy loss, and Softmax for the output layer; The rest of the nodes are activated with a Sigmoid function.</p>\n<p>The main problem I encountered while training the network, was that the loss never converged and was very spastic.</p>\n<p>I've already tried to re-write my script, check if I implemented the Math correctly, and I've had no luck with it. I also read other posts with the same problem, but none of them gave me an answer I looked for. Furthermore, I tried checking with a simpler neural network but no luck either.\nSources I've used in my code:\n<a href=\"https://www.linkedin.com/pulse/gradient-descent-backpropagation-ken-chen\" rel=\"nofollow noreferrer\">Backpropagation By Ken-Chen</a>\n<a href=\"https://peterroelants.github.io/posts/cross-entropy-softmax/\" rel=\"nofollow noreferrer\">Derivative of Softmax With Cross-Entropy</a>\n<a href=\"http://galaxy.agh.edu.pl/%7Evlsi/AI/backp_t_en/backprop.html\" rel=\"nofollow noreferrer\">Example to Feed-Forward and Backpropagation</a></p>\n<p><strong>Note</strong> I'm pretty sure the problem occurs when I'm updating the weights, but I cant tell.<br />\n<strong>Note</strong> The code below is the re-written script.</p>\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nimport matplotlib.pyplot as plt\nimport pickle\nfrom mnist import MNIST\n\n\nclass Neural_Re:\n    def __init__(self, layers):\n        self.layers = layers\n        self.weights = []\n        self.bias_weights = [0 for i in range(len(layers) - 1)]\n        self.activated_sums = []\n        self.derivative_sums = []\n        self.learning_rate = 0.1\n\n        self.error = []\n\n        # Initialize Random Weights\n        for i in range(len(layers) - 1):\n            weights_matrix = np.random.rand(self.layers[i + 1], self.layers[i]).dot(\n                np.sqrt(2 / (self.layers[i] + self.layers[i + 1])))\n            self.weights.append(weights_matrix)\n\n    def add_bias(self, layer):\n        # e.g: if layer == 0, layer in bias_weights is 0\n        layer -= 1\n        weights_matrix = np.random.rand(self.layers[layer + 1]).dot(\n            np.sqrt(2 / (self.layers[layer] + self.layers[layer + 1])))\n        self.bias_weights.insert(layer, weights_matrix)\n\n    def set_input(self, inputs):\n        self.activated_sums.append(inputs)\n\n    @staticmethod\n    def activation_sigmoid(sums, derivative=False):\n        for i in range(len(sums)):\n            if sums[i] &gt; 37:\n                sums[i] = 37\n            elif sums[i] &lt; -37:\n                sums[i] = -37\n\n        s = 1 / (1 + np.exp(-sums))\n        if derivative:\n            return s * (1 - s)\n        else:\n            return s\n\n    @staticmethod\n    def activation_softmax(sums):\n        exp = np.exp(sums)\n        return exp / exp.sum()\n\n    def propagate(self):\n        for layer in range(len(self.weights)):\n            # Calculate Sum w*x + b\n            zl = self.weights[layer].dot(self.activated_sums[layer])\n            np.add(zl, self.bias_weights[layer], out=zl)\n            # Saving Sums of (w*x + b) for use in calculating the error of \n              each node in backprop\n\n            self.derivative_sums.append(zl)\n\n            if layer == len(self.weights) - 1:\n                al = self.activation_softmax(zl)\n            else:\n                al = self.activation_sigmoid(zl)\n\n            self.activated_sums.append(al)\n\n    def backprop(self, target_vector):\n        for layer in range(len(self.weights) - 1, -1, -1):\n            if layer == len(self.weights) - 1: # If layer is output layer: \n                 # calculate derivative w.r.t Output sum vector (\u2202J/\u2202z)\n                 # [J = Loss function , z = Sum vector before activation]\n                self.derivative_sums[layer] = np.subtract(self.activated_sums[len(self.activated_sums)-1], target_vector)\n            else:\n                # Calculate Error of each Node in layer\n                derivative_sigmoid = self.activation_sigmoid(self.derivative_sums[layer], derivative=True)\n                sum_errors_in_next_layer = np.sum(self.derivative_sums[layer + 1].dot(self.weights[layer + 1]))\n                self.derivative_sums[layer] = np.multiply(sum_errors_in_next_layer, derivative_sigmoid)\n\n        for layer in range(0, len(self.weights) - 1):\n            # Stochastic Gradient Descent, Update weights.\n            self.SGD(layer)\n        \n        # Calculate Error of model in iteration n\n        self.calc_J(target_vector)\n        # Reset Activated_sums, derivative_sums for next iteration.\n        self.activated_sums = []\n        self.derivative_sums = []\n\n\n\n    def SGD(self, layer):\n        gradient_error = np.multiply(np.outer(self.derivative_sums[layer], self.activated_sums[layer].T), self.learning_rate)\n        self.weights[layer] = np.subtract(self.weights[layer], gradient_error)\n        if self.bias_weights[layer] is not 0:\n            self.bias_weights[layer] = np.subtract(self.bias_weights[layer], np.multiply(self.derivative_sums[layer], self.learning_rate))\n\n    def calc_J(self, hot_vector):\n        x = -np.sum(hot_vector * np.log(self.activated_sums[len(self.activated_sums) - 1]))\n        print(x)\n        self.error.append(x)\n\n    def graph_loss(self):\n        x = self.error\n        y = [i for i in range(len(self.error))]\n        plt.plot(y, x) # x axis -&gt; Loss, y axis -&gt; epochs\n        plt.show()\n\nif __name__ == &quot;__main__&quot;:\n    mndata = MNIST('samples', gz=True)\n    images, labels = mndata.load_training()\n\n    NN = Neural_Re([784, 200, 200, 10])\n    NN.learning_rate = 0.001\n    iter = 2000\n\n    for i in range(iter):\n        image = np.multiply(mndata.process_images_to_numpy(images[i]), 1 / 256)\n        # label vector\n        label = [0 for j in range(10)]\n        label[labels[i]] = 1\n\n        print(i)\n        NN.set_input(image)\n        NN.propagate()\n        NN.backprop(label)\n    NN.graph_loss()\n</code></pre>\n<p>Originally, I expected to get something like this (Graph information doesn't matter, only for context):\n<a href=\"https://i.stack.imgur.com/Sazln.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Sazln.jpg\" alt=\"Expected:\" /></a><br />\n<sub>(source: <a href=\"http://cs231n.github.io/assets/nn3/loss.jpeg\" rel=\"nofollow noreferrer\">github.io</a>)</sub></p>\n<p>But, when I let my Neural Network run (2000 Training Samples):\n<img src=\"https://prnt.sc/o4346c\" alt=\"result:\" /></p>\n<p>Why is the neural network not converging to anything?\nAny answers will be appreciated!</p>\n<p><strong>Edit 1:</strong> <em>Changed Line in Backprop &quot;Calculate Derivative w.r.t ___&quot;</em></p>\n<p><strong>Edit 2:</strong> <em>Added Learning rate [Wasn't the full problem, still doesn't work]</em></p>\n<p><strong>Edit 3:</strong> <em>added Reset statements for activated_sums and Derivative_Sum arrays [Caused problem of stacking inputs, which didn't fix it]</em></p>\n"}, {"tags": ["python", "mysql", "django"], "answers": [{"tags": [], "owner": {"reputation": 163, "user_id": 10292457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/709038b71ccab1445f0778cf082e2c5e?s=128&d=identicon&r=PG&f=1", "display_name": "ryan28561", "link": "https://stackoverflow.com/users/10292457/ryan28561"}, "is_accepted": true, "score": 1, "last_activity_date": 1560983386, "creation_date": 1560983386, "answer_id": 56676690, "question_id": 56676360, "link": "https://stackoverflow.com/questions/56676360/views-py-and-urls-py-do-not-connect-to-perform-a-function/56676690#56676690", "title": "views.py and urls.py do not connect to perform a function", "body": "<p>I'm not sure I understand your question, but it looks to me like your problem is that your form is submitting to the wrong url. Your form points to <code>/create</code> and your url pattern is <code>r'^create/$'</code>. </p>\n\n<p>To make the form submit to your create view, either set the regex to optionally match the trailing slash <code>r'^create/?$'</code>, or add the trailing slash to your form action, <code>action=\"/create/\"</code>.</p>\n"}], "owner": {"reputation": 77, "user_id": 11672851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6JjU34iegJU/AAAAAAAAAAI/AAAAAAAAA6Y/kIkSKhf4pzg/photo.jpg?sz=128", "display_name": "ardoYep", "link": "https://stackoverflow.com/users/11672851/ardoyep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 56676690, "answer_count": 1, "score": 0, "last_activity_date": 1560983386, "creation_date": 1560981012, "last_edit_date": 1560981749, "question_id": 56676360, "link": "https://stackoverflow.com/questions/56676360/views-py-and-urls-py-do-not-connect-to-perform-a-function", "title": "views.py and urls.py do not connect to perform a function", "body": "<p>I have a mysql database connected to django, I know it is connected because you already showed me data. However I made a small form to do tests and does not save the data. The code is correct because I already moved it from place to <code>def index (request):</code> and there if you send me the data what is not because it does not enter correctly in the function that I did</p>\n\n<p>views.py</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from django.shortcuts import render, redirect\nfrom models import Test\n\ndef index(request):\n    test = Test.objects.all()\n    context = {'test': test }\n\n    return render(request, 'test_app/index.html', context)\n\n\ndef create(request):\n    print request.POST  \n    test = Test(name=request.POST['name'], breed= request.POST['breed'])\n    test.save()\n    return redirect('/')\n\n</code></pre>\n\n<p>urls.py </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from django.conf.urls import url\nfrom . import views\n\nurlpatterns = [\n    url(r'^$', views.index),\n    url(r'^create/$', views.create)\n\n]\n</code></pre>\n\n<p>index.html</p>\n\n<pre class=\"lang-html prettyprint-override\"><code> &lt;form action\"/create\" method=\"post\"&gt;\n      {% csrf_token %}\n      &lt;label for=\"name\"&gt;Name: &lt;input type=\"text\" name=\"name\" /&gt;\n    &lt;/label&gt;\n      &lt;label for=\"breed\"&gt;Breed: &lt;input type=\"text\" name=\"breed\"/&gt; \n    &lt;/label&gt; &lt;input type=\"submit\" value=\"create\" /&gt;\n\n    &lt;/form&gt;\n</code></pre>\n\n<p>I do not have an error just do not save in the database, in the console if you send a <code>POST</code> but without any variable. Use python 2.7 and django 1.1</p>\n"}, {"tags": ["python", "oop", "data-structures"], "comments": [{"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 0, "creation_date": 1560980834, "post_id": 56676308, "comment_id": 99919725, "body": "Where did you define <code>incl_tax</code>?"}, {"owner": {"reputation": 620, "user_id": 7306280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f688cc11416b656bf9da56cef229afd1?s=128&d=identicon&r=PG&f=1", "display_name": "arajshree", "link": "https://stackoverflow.com/users/7306280/arajshree"}, "edited": false, "score": 0, "creation_date": 1560980969, "post_id": 56676308, "comment_id": 99919767, "body": "What I understand is total is a price object and incl_tax is a decimal field for it, so create a price object and using price.incl_tax find its value"}, {"owner": {"reputation": 168, "user_id": 9310031, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aU52l6TvDJM/AAAAAAAAAAI/AAAAAAAAACo/kKzOVGBFMTI/photo.jpg?sz=128", "display_name": "abi crazieeee", "link": "https://stackoverflow.com/users/9310031/abi-crazieeee"}, "edited": false, "score": 0, "creation_date": 1560981311, "post_id": 56676308, "comment_id": 99919860, "body": "incl_tax is defined in a class called Price in another file. However, my issue is with accessing this decimal field of  Price object in method charge."}, {"owner": {"reputation": 168, "user_id": 9310031, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aU52l6TvDJM/AAAAAAAAAAI/AAAAAAAAACo/kKzOVGBFMTI/photo.jpg?sz=128", "display_name": "abi crazieeee", "link": "https://stackoverflow.com/users/9310031/abi-crazieeee"}, "reply_to_user": {"reputation": 620, "user_id": 7306280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f688cc11416b656bf9da56cef229afd1?s=128&d=identicon&r=PG&f=1", "display_name": "arajshree", "link": "https://stackoverflow.com/users/7306280/arajshree"}, "edited": false, "score": 0, "creation_date": 1560981433, "post_id": 56676308, "comment_id": 99919887, "body": "@arajshree could you show me in code how to achieve this?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1560981540, "post_id": 56676308, "comment_id": 99919913, "body": "You should provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, but you probably just want <code>total.incl_tax</code> ?"}, {"owner": {"reputation": 168, "user_id": 9310031, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aU52l6TvDJM/AAAAAAAAAAI/AAAAAAAAACo/kKzOVGBFMTI/photo.jpg?sz=128", "display_name": "abi crazieeee", "link": "https://stackoverflow.com/users/9310031/abi-crazieeee"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1560982246, "post_id": 56676308, "comment_id": 99920101, "body": "@juanpa.arrivillaga I have updated my question with more details."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1560982308, "post_id": 56676308, "comment_id": 99920123, "body": "Ok, so what isn&#39;t working? You can access an attribute on an object with the <code>.</code> operator, so like I said, you probably just want <code>total.incl_tax</code>"}, {"owner": {"reputation": 168, "user_id": 9310031, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aU52l6TvDJM/AAAAAAAAAAI/AAAAAAAAACo/kKzOVGBFMTI/photo.jpg?sz=128", "display_name": "abi crazieeee", "link": "https://stackoverflow.com/users/9310031/abi-crazieeee"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1560982848, "post_id": 56676308, "comment_id": 99920251, "body": "@juanpa.arrivillaga &quot;Object of type Decimal is not JSON serializable&quot; I get this error now! It&#39;s probably coming from client.payment.capture"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1560983088, "post_id": 56676308, "comment_id": 99920308, "body": "That error gas nothing to do with your question. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> including the actual error you are encountering and the desired behavior. Likely, the client you are using requires the objects you pass to be json serializable. So maybe use a float (although if it is money then maybe a str)"}, {"owner": {"reputation": 168, "user_id": 9310031, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aU52l6TvDJM/AAAAAAAAAAI/AAAAAAAAACo/kKzOVGBFMTI/photo.jpg?sz=128", "display_name": "abi crazieeee", "link": "https://stackoverflow.com/users/9310031/abi-crazieeee"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1560984264, "post_id": 56676308, "comment_id": 99920550, "body": "@juanpa.arrivillaga that solves my problem. However, on a side note, the object <code>total.incl_tax</code> is of object type  ` &lt;class &#39;decimal.Decimal&#39;&gt;`, typecasting it to str() or using json.dumps() isn&#39;t helping? Any thoughts on this?"}], "answers": [{"tags": [], "owner": {"reputation": 15, "user_id": 7656449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/00AQ0.jpg?s=128&g=1", "display_name": "mateo", "link": "https://stackoverflow.com/users/7656449/mateo"}, "is_accepted": false, "score": 0, "last_activity_date": 1560983239, "creation_date": 1560983239, "answer_id": 56676672, "question_id": 56676308, "link": "https://stackoverflow.com/questions/56676308/how-to-access-class-object-attributes-in-python/56676672#56676672", "title": "how to access class object attributes in python", "body": "<p>You can access the element in that list with the following, where 2 is the value for <code>incl_tax</code>:</p>\n\n<p><code>print(total[2])</code></p>\n"}], "owner": {"reputation": 168, "user_id": 9310031, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aU52l6TvDJM/AAAAAAAAAAI/AAAAAAAAACo/kKzOVGBFMTI/photo.jpg?sz=128", "display_name": "abi crazieeee", "link": "https://stackoverflow.com/users/9310031/abi-crazieeee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1560983239, "creation_date": 1560980722, "last_edit_date": 1560982203, "question_id": 56676308, "link": "https://stackoverflow.com/questions/56676308/how-to-access-class-object-attributes-in-python", "title": "how to access class object attributes in python", "body": "<p>so I have a method called <strong>charge</strong> that takes total as an argument. When I print out total <code>print(total)</code> it gives me <code>Price(currency='INR', excl_tax=Decimal('1000.00'), incl_tax=Decimal('1180.0000'), tax=Decimal('180.0000'))</code>. How do I access lets say incl_tax from this?</p>\n\n<p><strong>views.py</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class PaymentDetailsView(CorePaymentDetailsView):\n\n\n    def handle_payment(self, order_number, total, **kwargs):\n\n        razorpay_ref = Facade().charge(\n            order_number,\n            total,\n            card=self.request.POST[RAZORPAY_TOKEN],\n            description=self.payment_description(order_number, total, **kwargs),\n            metadata=self.payment_metadata(order_number, total, **kwargs))\n\n        source_type, __ = SourceType.objects.get_or_create(name=PAYMENT_METHOD_RAZORPAY)\n        source = Source(\n            source_type=source_type,\n            currency=settings.RAZORPAY_CURRENCY,\n            amount_allocated=total.incl_tax,\n            amount_debited=total.incl_tax,\n            reference=razorpay_ref)\n        self.add_payment_source(source)\n\n        self.add_payment_event(PAYMENT_EVENT_PURCHASE, total.incl_tax)\n\n</code></pre>\n\n<p><strong>facade.py</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Facade(object):\n    def __init__(self):\n        pass\n\n    @staticmethod\n    def get_friendly_decline_message(error):\n        return 'The transaction was declined by your bank - please check your bankcard details and try again'\n\n    @staticmethod\n    def get_friendly_error_message(error):\n        return 'An error occurred when communicating with the payment gateway.'\n\n    def charge(self,\n        order_number,\n        total,\n        card,\n        currency=settings.STRIPE_CURRENCY,\n        description=None,\n        metadata=None,\n        **kwargs):\n\n        print(\"card\")\n        print(card)\n        print(\"total\")\n        print(total)\n        print(type(total))\n        # print(getattr(self, 'incl_tax'))\n        client = razorpay.Client(auth=(\"key\", \"pass\"))\n        client.payment.capture(card, total)\n        return card\n</code></pre>\n\n<p><strong>prices.py</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class TaxNotKnown(Exception):\n    \"\"\"\n    Exception for when a tax-inclusive price is requested but we don't know\n    what the tax applicable is (yet).\n    \"\"\"\n\n\nclass Price(object):\n    \"\"\"\n    Simple price class that encapsulates a price and its tax information\n    Attributes:\n        incl_tax (Decimal): Price including taxes\n        excl_tax (Decimal): Price excluding taxes\n        tax (Decimal): Tax amount\n        is_tax_known (bool): Whether tax is known\n        currency (str): 3 character currency code\n    \"\"\"\n\n    def __init__(self, currency, excl_tax, incl_tax=None, tax=None):\n        self.currency = currency\n        self.excl_tax = excl_tax\n        if incl_tax is not None:\n            self.incl_tax = incl_tax\n            self.is_tax_known = True\n        elif tax is not None:\n            self.incl_tax = excl_tax + tax\n            self.is_tax_known = True\n        else:\n            self.incl_tax = None\n            self.is_tax_known = False\n\n    def _get_tax(self):\n        return self.incl_tax - self.excl_tax\n\n    def _set_tax(self, value):\n        self.incl_tax = self.excl_tax + value\n        self.is_tax_known = True\n\n    tax = property(_get_tax, _set_tax)\n\n    def __repr__(self):\n        if self.is_tax_known:\n            return \"%s(currency=%r, excl_tax=%r, incl_tax=%r, tax=%r)\" % (\n                self.__class__.__name__, self.currency, self.excl_tax,\n                self.incl_tax, self.tax)\n        return \"%s(currency=%r, excl_tax=%r)\" % (\n            self.__class__.__name__, self.currency, self.excl_tax)\n\n    def __eq__(self, other):\n        \"\"\"\n        Two price objects are equal if currency, price.excl_tax and tax match.\n        \"\"\"\n        return (self.currency == other.currency and\n                self.excl_tax == other.excl_tax and\n                self.incl_tax == other.incl_tax)\n</code></pre>\n\n<p>My goal is to extract incl_tax which is supposed to be an integer value, so I can pass it on to <code>client.payment.capture(card,total)</code>. What is the best way to do it?</p>\n"}, {"tags": ["python", "python-3.x", "firebase", "google-cloud-functions", "google-cloud-pubsub"], "answers": [{"tags": [], "owner": {"reputation": 1422, "user_id": 5482999, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oyKRN.png?s=128&g=1", "display_name": "Racu", "link": "https://stackoverflow.com/users/5482999/racu"}, "is_accepted": true, "score": 10, "last_activity_date": 1562102467, "last_edit_date": 1562102467, "creation_date": 1560992472, "answer_id": 56677695, "question_id": 56676296, "link": "https://stackoverflow.com/questions/56676296/initialize-app-the-default-firebase-app-already-exists-cloud-functions-pub-s/56677695#56677695", "title": "&quot;initialize_app &#39;The default Firebase app already exists.&quot; Cloud functions pub sub", "body": "<p>Since this is a <code>cloud-function</code>, you don't need to use credentials, the function will pick up the credentials from the environment.\nI'd suggest to change your function for this:</p>\n\n<pre><code>import firebase_admin\nfrom firebase_admin import firestore\n\nfirebase_admin.initialize_app()\ndb = firestore.client()\n\n\ndef hello_pubsub(event, context):\n    pubsub_message = base64.b64decode(event['data']).decode('utf-8')\n    # Do your things\n</code></pre>\n\n<p>Use credentials when working with your functions before deployment and then remove the credentials part when deploying as you don't need it.</p>\n\n<p>Also if you don't need <code>firebase_admin</code> for other than importing firestore, you can skip initializing the <code>firebase_app</code> and use firestore alone like this:</p>\n\n<pre><code>import base64\n\nfrom google.cloud import firestore\n\ndb = firestore.Client()\n\n\ndef hello_pubsub(event, context):\n    pubsub_message = base64.b64decode(event['data']).decode('utf-8')\n    # Do your things\n</code></pre>\n\n<p>Note the difference between Firebase <code>firestore</code> client and google-cloud <code>firestore</code> client is a \"Capital C\" and that you have to install the firestore python library in your machine for developing and testing and modify your <code>requirements.txt</code></p>\n"}], "owner": {"reputation": 729, "user_id": 10541940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27b27664e2738f269f925ae0e984ae22?s=128&d=identicon&r=PG&f=1", "display_name": "Landon G", "link": "https://stackoverflow.com/users/10541940/landon-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1780, "favorite_count": 1, "accepted_answer_id": 56677695, "answer_count": 1, "score": 2, "last_activity_date": 1562102467, "creation_date": 1560980668, "last_edit_date": 1560989600, "question_id": 56676296, "link": "https://stackoverflow.com/questions/56676296/initialize-app-the-default-firebase-app-already-exists-cloud-functions-pub-s", "title": "&quot;initialize_app &#39;The default Firebase app already exists.&quot; Cloud functions pub sub", "body": "<p>I'm writing a a pub sub function on Google Cloud (cloud functions inline editor) that will trigger every half hour and it uses firestore. For some reason, the function will trigger fine the first time it runs, but after that the following error keeps popping up:</p>\n\n<pre><code>in initialize_app 'The default Firebase app already exists. This means you \ncalled ' ValueError: The default Firebase app already exists. This means you \ncalled initialize_app() more than once without providing an app name as the \nsecond argument. In most cases you only need to call initialize_app() once. \nBut if you do want to initialize multiple apps, pass a second argument to \ninitialize_app() to give each app a unique name.\n</code></pre>\n\n<p>I've had this error before when I used two apps, but this function is <strong>ONLY USING one firebase app.</strong> Here is the portion of my code where I suspect this is the problem:</p>\n\n<pre><code>import firebase_admin\nfrom firebase_admin import credentials\nfrom firebase_admin import firestore\n\ndef hello_pubsub(event, context):\n    pubsub_message = base64.b64decode(event['data']).decode('utf-8')\n    fire = {&lt;My firebase credentials&gt;}\n    cred = credentials.Certificate(fire)\n    default_app = firebase_admin.initialize_app(cred)\n    db = firestore.client()\n    ........\n</code></pre>\n\n<p>I figured that the problem is exactly what the error says, I haven't declared the name for the app, so I tried this(along with the other attempt):</p>\n\n<pre><code>default_app = firebase_admin.initialize_app(cred,'App')\n# other attempt\ndefault_app = firebase_admin.initialize_app()\n</code></pre>\n\n<p>And this still does not work. Again, this works the first time the function is triggered, but after that it continually crashes.</p>\n\n<p>Any suggestions?</p>\n\n<p>Thanks for the help! </p>\n"}, {"tags": ["python", "numpy", "machine-learning", "scikit-learn", "random-forest"], "comments": [{"owner": {"reputation": 2617, "user_id": 3697870, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/krATc.jpg?s=128&g=1", "display_name": "Heath Raftery", "link": "https://stackoverflow.com/users/3697870/heath-raftery"}, "edited": false, "score": 0, "creation_date": 1560980639, "post_id": 56676217, "comment_id": 99919659, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/25485503/valueerror-setting-an-array-element-with-a-sequence-while-using-svm-in-scikit\">ValueError: setting an array element with a sequence. while using SVM in scikit-learn</a>"}, {"owner": {"reputation": 2617, "user_id": 3697870, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/krATc.jpg?s=128&g=1", "display_name": "Heath Raftery", "link": "https://stackoverflow.com/users/3697870/heath-raftery"}, "edited": false, "score": 0, "creation_date": 1560980719, "post_id": 56676217, "comment_id": 99919689, "body": "Googling your error along with &quot;RandomForestClassifier&quot; or &quot;scikit-learn&quot; gives the answer."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1560983129, "post_id": 56676217, "comment_id": 99920316, "body": "Your data is a mix of numbers and arrays.  And the arrays vary in shape.  An array is a sequence."}], "answers": [{"tags": [], "owner": {"reputation": 1689, "user_id": 11523400, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tp6tl.png?s=128&g=1", "display_name": "skillsmuggler", "link": "https://stackoverflow.com/users/11523400/skillsmuggler"}, "is_accepted": false, "score": 1, "last_activity_date": 1560980789, "creation_date": 1560980789, "answer_id": 56676322, "question_id": 56676217, "link": "https://stackoverflow.com/questions/56676217/convert-sequence-to-array-element/56676322#56676322", "title": "convert sequence to array element", "body": "<p>Have a look at the <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html#sklearn.ensemble.RandomForestClassifier.fit\" rel=\"nofollow noreferrer\">documentation</a> for the <code>fit()</code> method from sci-kit learn.</p>\n\n<p>It clearly states that the training features <code>X</code> must be of the following format</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>X : array-like or sparse matrix of shape = [n_samples, n_features]\n</code></pre>\n\n<p>It is expecting a 2D array. You will have to modify your training data to match the required format.</p>\n"}], "owner": {"reputation": 67, "user_id": 9985996, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ral0q52xFYw/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0KG7l15gEWZkEYTPz-2nowPpt0UA/mo/photo.jpg?sz=128", "display_name": "Muaaz Kasker", "link": "https://stackoverflow.com/users/9985996/muaaz-kasker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560980789, "creation_date": 1560980268, "question_id": 56676217, "link": "https://stackoverflow.com/questions/56676217/convert-sequence-to-array-element", "title": "convert sequence to array element", "body": "<p>I am trying to input data into a random-forest classifier, but it keeps telling me I'm using a sequence. I'm not sure how to convert the sequence into anything that is acceptable</p>\n\n<p>I have tried feeding it into the classifier inside a <code>list()</code>, but that didn't work either.</p>\n\n<p>this is an example of X_train[1]:</p>\n\n<pre><code>array([30, array([[0, 0, 1]]), 5.2304265, 7.233890799999999,\n       array([[0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]),\n       array([[0, 1, 0, 0, 0, 0, 0]]), array([[0, 0, 0, 0, 1]]), 0, 0, 0,\n       2, 10000.0, 13000.0, 30, 1], dtype=object)\n</code></pre>\n\n<p>.</p>\n\n<pre><code>clf = RandomForestClassifier(n_estimators=100, max_depth=2, random_state=0)\nclf.fit(X_train, y_train)\n</code></pre>\n\n<p>...produces...\n<code>ValueError: setting an array element with a sequence.</code></p>\n\n<p>I expected it to accept the data, since it it is numerical, but it appears to reject the data</p>\n"}, {"tags": ["python", "pip", "package"], "comments": [{"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1560980889, "post_id": 56676206, "comment_id": 99919741, "body": "How are these packages made available? Are they published to pypi or a similar service? You can use the <a href=\"https://setuptools.readthedocs.io/en/latest/setuptools.html#declaring-dependencies\" rel=\"nofollow noreferrer\"><code>install_requires</code></a> argument for <code>setup</code>. If the packages are not available on pypi, you can still declare them as dependencies, as described <a href=\"https://setuptools.readthedocs.io/en/latest/setuptools.html#dependencies-that-aren-t-in-pypi\" rel=\"nofollow noreferrer\">here</a>. However if these are separate packages it feels a bit weird that they are listed in the package directories of other packages (instead of next to each other)."}, {"owner": {"reputation": 73, "user_id": 9730309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/209e4e13c0c2e189d8eb7f438637dd6d?s=128&d=identicon&r=PG", "display_name": "avasygn", "link": "https://stackoverflow.com/users/9730309/avasygn"}, "reply_to_user": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1560982868, "post_id": 56676206, "comment_id": 99920259, "body": "More details about my structure: - these packages are not published to pypi - each custom package is a single gitlab repository - each dependency package is set as a submodule  I cannot set local path in <code>install_requires</code> option. Maybe it could work if I set <code>dependency_links</code> option with the gitlab url (with a token to allow the download)."}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1560985522, "post_id": 56676206, "comment_id": 99920817, "body": "I&#39;m pretty sure you can set a local URL in <code>dependency_links</code> such as <code>file:&#47;&#47;&#47;path&#47;to&#47;dist</code>."}, {"owner": {"reputation": 73, "user_id": 9730309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/209e4e13c0c2e189d8eb7f438637dd6d?s=128&d=identicon&r=PG", "display_name": "avasygn", "link": "https://stackoverflow.com/users/9730309/avasygn"}, "reply_to_user": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1561101822, "post_id": 56676206, "comment_id": 99961574, "body": "It works with a single file, but not with a directory (I did not find the specific scheme for a directory). And dependency_links is ignored by default. We need to call <code>--process-dependency-links</code> but it has been removed in last version of pip."}], "answers": [{"comments": [{"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 1, "creation_date": 1561111200, "post_id": 56677369, "comment_id": 99965962, "body": "You can put the stuff in a <code>requirements.txt</code> and then use this to build and install your dependencies (see <a href=\"https://pip.pypa.io/en/latest/user_guide/index.html?highlight=--process-dependency-links#installing-from-wheels\" rel=\"nofollow noreferrer\">this part of the docs</a>). It won&#39;t be auto-discovered by <code>pip</code> but it&#39;s a mere <code>pip install -r requirements.txt</code> before the normal <code>pip install ...</code>. They disabled automatic installation of non-pypi resources for security reasons I think. If you want to install from an external source, you&#39;d have to do so explicitly (via <code>requirements.txt</code> for example)."}, {"owner": {"reputation": 73, "user_id": 9730309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/209e4e13c0c2e189d8eb7f438637dd6d?s=128&d=identicon&r=PG", "display_name": "avasygn", "link": "https://stackoverflow.com/users/9730309/avasygn"}, "reply_to_user": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1561710898, "post_id": 56677369, "comment_id": 100161321, "body": "I currently use a requirements.txt to install my parent packages and all its dependencies. But it is not recursive. Recursive requirements.txt won&#39;t be auto-discovered. I can call the requirements.txt of a dependency package like that: <code>-r .&#47;dependencies&#47;yregmap&#47;requirements.txt</code> but this way does not work for the requirements.txt of the dependency package because path are relative from the folder where I call the command <code>pip install -r requirements.txt .</code>"}, {"owner": {"reputation": 73, "user_id": 9730309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/209e4e13c0c2e189d8eb7f438637dd6d?s=128&d=identicon&r=PG", "display_name": "avasygn", "link": "https://stackoverflow.com/users/9730309/avasygn"}, "reply_to_user": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1561710901, "post_id": 56677369, "comment_id": 100161322, "body": "That&#39;s why, currently, I have to copy all recursive dependencies of all custom packages (parent package and all packages of all level of dependency) in the dependency folder of the parent package and call them from the requirements.txt."}], "tags": [], "owner": {"reputation": 73, "user_id": 9730309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/209e4e13c0c2e189d8eb7f438637dd6d?s=128&d=identicon&r=PG", "display_name": "avasygn", "link": "https://stackoverflow.com/users/9730309/avasygn"}, "is_accepted": false, "score": 2, "last_activity_date": 1561101938, "last_edit_date": 1561101938, "creation_date": 1560988952, "answer_id": 56677369, "question_id": 56676206, "link": "https://stackoverflow.com/questions/56676206/how-to-install-my-custom-python-package-with-its-custom-dependencies/56677369#56677369", "title": "How to install my custom python package with its custom dependencies?", "body": "<p>I almost solved my problem.</p>\n\n<p>I need to build each dependency with the following command: <code>python setup.py sdist</code> in order to create a single package file (tar.gz)</p>\n\n<p>Then, I can call them in the top-package setup.py:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>...\ndependency_links=[\"file:/local/path/myOwnPackage/dependencies/packageA/dist/packageA-0.1.tar.gz\"],\ninstall_requires=[\"packageA\"],\n...\n</code></pre>\n\n<p>Finaly, I run the following command to install <code>myOwnPackage</code> and its local dependencies:</p>\n\n<p><code>pip install . --process-dependency-links</code></p>\n\n<p>It installs all recursive dependencies if all repo are built and set correctly as describe above.</p>\n\n<p><code>--process-dependency-links</code> has been removed in last version of pip...</p>\n"}], "owner": {"reputation": 73, "user_id": 9730309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/209e4e13c0c2e189d8eb7f438637dd6d?s=128&d=identicon&r=PG", "display_name": "avasygn", "link": "https://stackoverflow.com/users/9730309/avasygn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1828, "favorite_count": 2, "answer_count": 1, "score": 4, "last_activity_date": 1561101938, "creation_date": 1560980202, "question_id": 56676206, "link": "https://stackoverflow.com/questions/56676206/how-to-install-my-custom-python-package-with-its-custom-dependencies", "title": "How to install my custom python package with its custom dependencies?", "body": "<p>I would like to find a way to install my own python package which depends on other custom python packages.</p>\n\n<p>I followed this guide to create my own python packages: <a href=\"https://python-packaging.readthedocs.iao/en/latest/\" rel=\"nofollow noreferrer\">https://python-packaging.readthedocs.iao/en/latest/</a></p>\n\n<p>For all packages, the minimal structure is:</p>\n\n<pre><code>myOwnPackage/\n    myOwnPackage/\n        __init__.py\n    setup.py\n</code></pre>\n\n<p>Now, I created a package wich depends on other custom packages. Its structure is:</p>\n\n<pre><code>myOwnPackage/\n    dependencies/\n        packageA\n        packageB\n    myOwnPackage/\n        __init__.py\n    setup.py\n</code></pre>\n\n<p>My question is: How to easily install <code>myOwnPackage</code> and its custom dependencies with pip ?</p>\n\n<p>For the above example, I would like to install myOwnPackage, packageA and packageB when I call pip like that: <code>pip install myOwnPackage</code></p>\n\n<p>I did not find a way to include dependency names in setup.py like I can do for offcial python packages like <code>numpy</code>, pyqt5 etc.</p>\n\n<p>I find a way to solve my problem partially by using a requirements.txt with pip: </p>\n\n<p><code>pip install -r requirements.txt myOwnPackage</code></p>\n\n<p>and here is how I wrote the requirement file:</p>\n\n<pre><code>./dependencies/packageA\n./dependencies/packageB\n</code></pre>\n\n<p>I works well, but not when I have recursive dependencies like that:</p>\n\n<pre><code>myOwnPackage/\n    dependencies/\n        packageA/\n            dependencies/\n                packageC\n            packageA/\n                __init__.py\n            setup.py\n            requirements.txt\n        packageB\n    myOwnPackage/\n        __init__.py\n    setup.py\n    requirements.txt\n</code></pre>\n\n<p>pip with the top-level requirements.txt will install myOwnPackage, packageA and packageB but it does not know that it has to install packageC which is a packageA dependency.</p>\n\n<p>Any idea ?</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 11666904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56ef2db54ce36c90dcf289184cfc32ba?s=128&d=identicon&r=PG&f=1", "display_name": "harro", "link": "https://stackoverflow.com/users/11666904/harro"}, "edited": false, "score": 0, "creation_date": 1561047680, "post_id": 56677101, "comment_id": 99945799, "body": "I&#39;ll change the strings to integers, thank you so much for your help!"}, {"owner": {"reputation": 37, "user_id": 11666904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56ef2db54ce36c90dcf289184cfc32ba?s=128&d=identicon&r=PG&f=1", "display_name": "harro", "link": "https://stackoverflow.com/users/11666904/harro"}, "edited": false, "score": 0, "creation_date": 1564178042, "post_id": 56677101, "comment_id": 100958967, "body": "Hi CrafterKolyan,   <code>df[&#39;flagMin&#39;][df[&#39;Min&#39;] == colMin] = &#39;1&#39; </code>  Looking at this code, It seems like the entire dataframe would be populated by a one if the condition is satisfied. Is it possible to populate up to a certain group of rows?"}, {"owner": {"reputation": 957, "user_id": 9632774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zP3nO.png?s=128&g=1", "display_name": "CrafterKolyan", "link": "https://stackoverflow.com/users/9632774/crafterkolyan"}, "reply_to_user": {"reputation": 37, "user_id": 11666904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56ef2db54ce36c90dcf289184cfc32ba?s=128&d=identicon&r=PG&f=1", "display_name": "harro", "link": "https://stackoverflow.com/users/11666904/harro"}, "edited": false, "score": 1, "creation_date": 1564269311, "post_id": 56677101, "comment_id": 100975737, "body": "@harro you can use <code>df.loc[rows, &#39;flagMin&#39;]</code> instead of <code>df[&#39;flagMin&#39;]</code> and the same change in condition"}, {"owner": {"reputation": 37, "user_id": 11666904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56ef2db54ce36c90dcf289184cfc32ba?s=128&d=identicon&r=PG&f=1", "display_name": "harro", "link": "https://stackoverflow.com/users/11666904/harro"}, "edited": false, "score": 0, "creation_date": 1564511897, "post_id": 56677101, "comment_id": 101052856, "body": "Thank you @CrafterKoylan. One more question, can I have two or more boolean logic within this line of code? I would like to add another condition within this line:   df[&#39;flagMin&#39;][df[&#39;Min&#39;] == colMin] = &#39;1&#39;"}, {"owner": {"reputation": 957, "user_id": 9632774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zP3nO.png?s=128&g=1", "display_name": "CrafterKolyan", "link": "https://stackoverflow.com/users/9632774/crafterkolyan"}, "reply_to_user": {"reputation": 37, "user_id": 11666904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56ef2db54ce36c90dcf289184cfc32ba?s=128&d=identicon&r=PG&f=1", "display_name": "harro", "link": "https://stackoverflow.com/users/11666904/harro"}, "edited": false, "score": 1, "creation_date": 1564570945, "post_id": 56677101, "comment_id": 101073029, "body": "Yes you can unite conditions with <code>|</code> as <code>or</code> or <code>&amp;</code> as <code>and</code>. But don&#39;t forget to put braces as the priority of operations is tricky here. <code>(df[&#39;Min&#39;] == colMin) &amp; (df[&#39;Max&#39;] == colMax)</code> as an example."}], "tags": [], "owner": {"reputation": 957, "user_id": 9632774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zP3nO.png?s=128&g=1", "display_name": "CrafterKolyan", "link": "https://stackoverflow.com/users/9632774/crafterkolyan"}, "is_accepted": true, "score": 1, "last_activity_date": 1560986519, "creation_date": 1560986519, "answer_id": 56677101, "question_id": 56676197, "link": "https://stackoverflow.com/questions/56676197/python-dataframe-updating-flags/56677101#56677101", "title": "Python Dataframe Updating Flags", "body": "<p>Just set to <code>'1'</code> only those elements you want to update and not the whole column.</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\ndf = pd.read_excel('help test 1.xlsx')\n\n#groupby function separates the different Name parameters within the Name column and performing functions like finding the lowest of the \"minimum\" and \"lower\" columns and highest of the \"maximum\" and \"upper\" columns.\n\nflagMin = df.groupby(['Name'], as_index=False)['Min'].min()\nflagMax = df.groupby(['Name'], as_index=False)['Max'].max()\nflagLow = df.groupby(['Name'], as_index=False)['Lower'].min()\nflagUp = df.groupby(['Name'], as_index=False)['Upper'].max()\nprint(flagMin)\nprint(flagMax)\nprint(flagLow)\nprint(flagUp)\n\nnum = len(flagMin)  #size of 2, works for all flags in this case\n\ndf['flagMin'] = '0'\ndf['flagMax'] = '0'\ndf['flagLow'] = '0'\ndf['flagUp'] = '0'\n\nfor i in range(num):\n    #iterating through each row of parameters and column number 1(min,max,lower,upper column) \n    colMin = flagMin.iloc[i, 1]\n    colMax = flagMax.iloc[i, 1]\n    colLow = flagLow.iloc[i, 1]\n    colUp = flagUp.iloc[i, 1]\n\n    #setting flags if any column's parameter matches the flag dataframe's parameter, sets a 1 if true, sets a 0 if false\n    df['flagMin'][df['Min'] == colMin] = '1'\n    df['flagMax'][df['Max'] == colMax] = '1'\n    df['flagLow'][df['Lower'] == colLow] = '1'\n    df['flagUp'][df['Upper'] == colUp] = '1'\n    print(df)\n</code></pre>\n\n<p>P.S. I don't know why you are using strings of <code>'0'</code> and <code>'1'</code> instead of just using <code>0</code> and <code>1</code> but that's up to you.</p>\n"}], "owner": {"reputation": 37, "user_id": 11666904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56ef2db54ce36c90dcf289184cfc32ba?s=128&d=identicon&r=PG&f=1", "display_name": "harro", "link": "https://stackoverflow.com/users/11666904/harro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 56677101, "answer_count": 1, "score": 0, "last_activity_date": 1561055298, "creation_date": 1560980180, "last_edit_date": 1561055298, "question_id": 56676197, "link": "https://stackoverflow.com/questions/56676197/python-dataframe-updating-flags", "title": "Python Dataframe Updating Flags", "body": "<p>I am creating four columns which are labeled as flagMin, flagMax, flagLow, flagUp. I am updating these dataframe columns each time it runs through the loop whoever my original data is being override. I would like to keep the previous data I had in the 4 columns since they contain 1s when true. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\nimport numpy as np\ndf = pd.read_excel('help test 1.xlsx')\n\n#groupby function separates the different Name parameters within the Name column and performing functions like finding the lowest of the \"minimum\" and \"lower\" columns and highest of the \"maximum\" and \"upper\" columns.\n\nflagMin = df.groupby(['Name'], as_index=False)['Min'].min()\nflagMax = df.groupby(['Name'], as_index=False)['Max'].max()\nflagLow = df.groupby(['Name'], as_index=False)['Lower'].min()\nflagUp = df.groupby(['Name'], as_index=False)['Upper'].max()\nprint(flagMin)\nprint(flagMax)\nprint(flagLow)\nprint(flagUp)\n\nnum = len(flagMin)  #size of 2, works for all flags in this case\n\nfor i in range(num):\n    #iterating through each row of parameters and column number 1(min,max,lower,upper column) \n    colMin = flagMin.iloc[i, 1]\n    colMax = flagMax.iloc[i, 1]\n    colLow = flagLow.iloc[i, 1]\n    colUp = flagUp.iloc[i, 1]\n\n    #setting flags if any column's parameter matches the flag dataframe's parameter, sets a 1 if true, sets a 0 if false\n    df['flagMin'] = np.where(df['Min'] == colMin, '1', '0') \n    df['flagMax'] = np.where(df['Max'] == colMax, '1', '0')\n    df['flagLow'] = np.where(df['Lower'] == colLow, '1', '0')\n    df['flagUp'] = np.where(df['Upper'] == colUp, '1', '0')\n    print(df)\n\n4 Dataframes for each flag printed above\n    Name       Min\n0     Vo       12.8\n1     Vi      -51.3\n\n    Name       Max\n0     Vo       39.9\n1     Vi      -25.7\n\n    Name       Low\n0     Vo      -46.0\n1     Vi      -66.1\n\n   Name        Up\n0     Vo       94.3\n1     Vi      -14.1\n\n</code></pre>\n\n<p>Output 1st iteration</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>      flagMax    flagLow   flagUp  \n0        0         0         0  \n1        0         0         0  \n2        0         0         0  \n3        1         0         0  \n4        0         0         0  \n5        0         0         0  \n6        0         0         1  \n7        0         1         0  \n8        0         0         0  \n9        0         0         0  \n10       0         0         0  \n11       0         0         0  \n12       0         0         0  \n13       0         0         0  \n14       0         0         0  \n15       0         0         0  \n16       0         0         0  \n17       0         0         0 \n</code></pre>\n\n<p>Output 2nd Iteration</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>      flagMax   flagLow   flagUp\n0        0         0         0  \n1        0         0         0  \n2        0         0         0  \n3        0         0         0  \n4        0         0         0  \n5        0         0         0  \n6        0         0         0  \n7        0         0         0  \n8        0         0         0  \n9        1         0         1  \n10       0         0         0  \n11       0         0         0  \n12       0         0         0  \n13       0         0         0  \n14       0         0         0  \n15       0         1         0  \n16       0         0         0  \n17       0         0         0  \n</code></pre>\n\n<p>I lose the 1s from row 3,6,7. I would like to keep the 1s from both sets of data. Thank you</p>\n"}, {"tags": ["python", "heroku", "tkinter"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1560988557, "post_id": 56676179, "comment_id": 99921437, "body": "You can&#39;t run tkinter on a web server."}, {"owner": {"reputation": 23, "user_id": 9575698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "ninjadev", "link": "https://stackoverflow.com/users/9575698/ninjadev"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1561071783, "post_id": 56676179, "comment_id": 99954859, "body": "What is an alternative to tkinter that can run on a web server?"}], "owner": {"reputation": 23, "user_id": 9575698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "ninjadev", "link": "https://stackoverflow.com/users/9575698/ninjadev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560981515, "creation_date": 1560980066, "last_edit_date": 1560981515, "question_id": 56676179, "link": "https://stackoverflow.com/questions/56676179/heroku-app-crashes-even-though-buildpack-for-tkinter-is-installed", "title": "Heroku app crashes even though buildpack for tkinter is installed", "body": "<p>Heroku displays this error when deploying my Flask application.</p>\n\n<pre><code>2019-06-19T21:23:08.319726+00:00 app[web.1]: File \"/app/main.py\", line 2, in &lt;module&gt;\n2019-06-19T21:23:08.319728+00:00 app[web.1]: from tkinter import Tk, font\n2019-06-19T21:23:08.319729+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/tkinter/__init__.py\", line 36, in &lt;module&gt;\n2019-06-19T21:23:08.319732+00:00 app[web.1]: import _tkinter # If this fails your Python may not be configured for Tk\n2019-06-19T21:23:08.319734+00:00 app[web.1]: ModuleNotFoundError: No module named '_tkinter'\n</code></pre>\n\n<p>I realized that tkinter isn't supported by default on Heroku so I installed a buildpack to solve. Followed this StackOverflow guide to solve it. <a href=\"https://stackoverflow.com/a/43820042/9575698\">https://stackoverflow.com/a/43820042/9575698</a></p>\n\n<p>However, I still get the same error. Below is the error log from Heroku CLI.</p>\n\n<pre><code>2019-06-19T21:23:08.319726+00:00 app[web.1]: File \"/app/main.py\", line 2, in &lt;module&gt;\n2019-06-19T21:23:08.319728+00:00 app[web.1]: from tkinter import Tk, font\n2019-06-19T21:23:08.319729+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/tkinter/__init__.py\", line 36, in &lt;module&gt;\n2019-06-19T21:23:08.319732+00:00 app[web.1]: import _tkinter # If this fails your Python may not be configured for Tk\n2019-06-19T21:23:08.319734+00:00 app[web.1]: ModuleNotFoundError: No module named '_tkinter'\n2019-06-19T21:23:08.320489+00:00 app[web.1]: [2019-06-19 21:23:08 +0000] [10] [INFO] Worker exiting (pid: 10)\n2019-06-19T21:23:08.436694+00:00 app[web.1]: [2019-06-19 21:23:08 +0000] [4] [INFO] Shutting down: Master\n2019-06-19T21:23:08.436783+00:00 app[web.1]: [2019-06-19 21:23:08 +0000] [4] [INFO] Reason: Worker failed to boot.\n2019-06-19T21:23:08.536043+00:00 heroku[web.1]: State changed from starting to crashed\n2019-06-19T21:23:08.541730+00:00 heroku[web.1]: State changed from crashed to starting\n2019-06-19T21:23:08.512970+00:00 heroku[web.1]: Process exited with status 3\n2019-06-19T21:23:14.000000+00:00 app[api]: Build succeeded\n2019-06-19T21:23:17.005526+00:00 heroku[web.1]: Starting process with command `gunicorn --bind 0.0.0.0:6467 main:app`\n2019-06-19T21:23:19.986418+00:00 app[web.1]: [2019-06-19 21:23:19 +0000] [4] [INFO] Starting gunicorn 19.9.0\n2019-06-19T21:23:19.987414+00:00 app[web.1]: [2019-06-19 21:23:19 +0000] [4] [INFO] Listening at: http://0.0.0.0:6467 (4)\n2019-06-19T21:23:19.987570+00:00 app[web.1]: [2019-06-19 21:23:19 +0000] [4] [INFO] Using worker: sync\n2019-06-19T21:23:19.998957+00:00 app[web.1]: [2019-06-19 21:23:19 +0000] [10] [INFO] Booting worker with pid: 10\n2019-06-19T21:23:20.088076+00:00 app[web.1]: [2019-06-19 21:23:20 +0000] [11] [INFO] Booting worker with pid: 11\n2019-06-19T21:23:20.897103+00:00 heroku[web.1]: State changed from starting to up\n2019-06-19T21:23:20.806536+00:00 app[web.1]: [2019-06-19 21:23:20 +0000] [10] [ERROR] Exception in worker process\n2019-06-19T21:23:20.806579+00:00 app[web.1]: Traceback (most recent call last):\n2019-06-19T21:23:20.806582+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/arbiter.py\", line 583, in spawn_worker\n2019-06-19T21:23:20.806584+00:00 app[web.1]: worker.init_process()\n2019-06-19T21:23:20.806586+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/workers/base.py\", line 129, in init_process\n2019-06-19T21:23:20.806588+00:00 app[web.1]: self.load_wsgi()\n2019-06-19T21:23:20.806591+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/workers/base.py\", line 138, in load_wsgi\n2019-06-19T21:23:20.806593+00:00 app[web.1]: self.wsgi = self.app.wsgi()\n2019-06-19T21:23:20.806595+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/app/base.py\", line 67, in wsgi\n2019-06-19T21:23:20.806596+00:00 app[web.1]: self.callable = self.load()\n2019-06-19T21:23:20.806599+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/app/wsgiapp.py\", line 52, in load\n2019-06-19T21:23:20.806601+00:00 app[web.1]: return self.load_wsgiapp()\n2019-06-19T21:23:20.806603+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/app/wsgiapp.py\", line 41, in load_wsgiapp\n2019-06-19T21:23:20.806605+00:00 app[web.1]: return util.import_app(self.app_uri)\n2019-06-19T21:23:20.806607+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/util.py\", line 350, in import_app\n2019-06-19T21:23:20.806609+00:00 app[web.1]: __import__(module)\n2019-06-19T21:23:20.806611+00:00 app[web.1]: File \"/app/main.py\", line 2, in &lt;module&gt;\n2019-06-19T21:23:20.806613+00:00 app[web.1]: from tkinter import Tk, font\n2019-06-19T21:23:20.806615+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/tkinter/__init__.py\", line 36, in &lt;module&gt;\n2019-06-19T21:23:20.806617+00:00 app[web.1]: import _tkinter # If this fails your Python may not be configured for Tk\n2019-06-19T21:23:20.806627+00:00 app[web.1]: ModuleNotFoundError: No module named '_tkinter'\n2019-06-19T21:23:20.807228+00:00 app[web.1]: [2019-06-19 21:23:20 +0000] [10] [INFO] Worker exiting (pid: 10)\n2019-06-19T21:23:20.918098+00:00 app[web.1]: [2019-06-19 21:23:20 +0000] [11] [ERROR] Exception in worker process\n2019-06-19T21:23:20.918103+00:00 app[web.1]: Traceback (most recent call last):\n2019-06-19T21:23:20.918105+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/arbiter.py\", line 583, in spawn_worker\n2019-06-19T21:23:20.918107+00:00 app[web.1]: worker.init_process()\n2019-06-19T21:23:20.918109+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/workers/base.py\", line 129, in init_process\n2019-06-19T21:23:20.918115+00:00 app[web.1]: self.load_wsgi()\n2019-06-19T21:23:20.918117+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/workers/base.py\", line 138, in load_wsgi\n2019-06-19T21:23:20.918119+00:00 app[web.1]: self.wsgi = self.app.wsgi()\n2019-06-19T21:23:20.918121+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/app/base.py\", line 67, in wsgi\n2019-06-19T21:23:20.918123+00:00 app[web.1]: self.callable = self.load()\n2019-06-19T21:23:20.918125+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/app/wsgiapp.py\", line 52, in load\n2019-06-19T21:23:20.918127+00:00 app[web.1]: return self.load_wsgiapp()\n2019-06-19T21:23:20.918130+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/app/wsgiapp.py\", line 41, in load_wsgiapp\n2019-06-19T21:23:20.918132+00:00 app[web.1]: return util.import_app(self.app_uri)\n2019-06-19T21:23:20.918134+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/util.py\", line 350, in import_app\n2019-06-19T21:23:20.918135+00:00 app[web.1]: __import__(module)\n2019-06-19T21:23:20.918137+00:00 app[web.1]: File \"/app/main.py\", line 2, in &lt;module&gt;\n2019-06-19T21:23:20.918139+00:00 app[web.1]: from tkinter import Tk, font\n2019-06-19T21:23:20.918141+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/tkinter/__init__.py\", line 36, in &lt;module&gt;\n2019-06-19T21:23:20.918143+00:00 app[web.1]: import _tkinter # If this fails your Python may not be configured for Tk\n2019-06-19T21:23:20.918152+00:00 app[web.1]: ModuleNotFoundError: No module named '_tkinter'\n2019-06-19T21:23:20.918897+00:00 app[web.1]: [2019-06-19 21:23:20 +0000] [11] [INFO] Worker exiting (pid: 11)\n2019-06-19T21:23:21.001455+00:00 app[web.1]: Traceback (most recent call last):\n2019-06-19T21:23:21.001467+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/arbiter.py\", line 210, in run\n2019-06-19T21:23:21.002166+00:00 app[web.1]: self.sleep()\n2019-06-19T21:23:21.002241+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/arbiter.py\", line 360, in sleep\n2019-06-19T21:23:21.002753+00:00 app[web.1]: ready = select.select([self.PIPE[0]], [], [], 1.0)\n2019-06-19T21:23:21.002761+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/arbiter.py\", line 245, in handle_chld\n2019-06-19T21:23:21.003203+00:00 app[web.1]: self.reap_workers()\n2019-06-19T21:23:21.003317+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/arbiter.py\", line 525, in reap_workers\n2019-06-19T21:23:21.003978+00:00 app[web.1]: raise HaltServer(reason, self.WORKER_BOOT_ERROR)\n2019-06-19T21:23:21.004042+00:00 app[web.1]: gunicorn.errors.HaltServer: &lt;HaltServer 'Worker failed to boot.' 3&gt;\n2019-06-19T21:23:21.004051+00:00 app[web.1]:\n2019-06-19T21:23:21.004053+00:00 app[web.1]: During handling of the above exception, another exception occurred:\n2019-06-19T21:23:21.004055+00:00 app[web.1]:\n2019-06-19T21:23:21.004059+00:00 app[web.1]: Traceback (most recent call last):\n2019-06-19T21:23:21.004064+00:00 app[web.1]: File \"/app/.heroku/python/bin/gunicorn\", line 11, in &lt;module&gt;\n2019-06-19T21:23:21.004296+00:00 app[web.1]: sys.exit(run())\n2019-06-19T21:23:21.004303+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/app/wsgiapp.py\", line 61, in run\n2019-06-19T21:23:21.004564+00:00 app[web.1]: WSGIApplication(\"%(prog)s [OPTIONS] [APP_MODULE]\").run()\n2019-06-19T21:23:21.004571+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/app/base.py\", line 223, in run\n2019-06-19T21:23:21.004894+00:00 app[web.1]: super(Application, self).run()\n2019-06-19T21:23:21.004902+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/app/base.py\", line 72, in run\n2019-06-19T21:23:21.005109+00:00 app[web.1]: Arbiter(self).run()\n2019-06-19T21:23:21.005117+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/arbiter.py\", line 232, in run\n2019-06-19T21:23:21.005404+00:00 app[web.1]: self.halt(reason=inst.reason, exit_status=inst.exit_status)\n2019-06-19T21:23:21.005412+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/arbiter.py\", line 345, in halt\n2019-06-19T21:23:21.005894+00:00 app[web.1]: self.stop()\n2019-06-19T21:23:21.005902+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/arbiter.py\", line 393, in stop\n2019-06-19T21:23:21.006306+00:00 app[web.1]: time.sleep(0.1)\n2019-06-19T21:23:21.006313+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/arbiter.py\", line 245, in handle_chld\n2019-06-19T21:23:21.006597+00:00 app[web.1]: self.reap_workers()\n2019-06-19T21:23:21.006604+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/arbiter.py\", line 525, in reap_workers\n2019-06-19T21:23:21.007070+00:00 app[web.1]: raise HaltServer(reason, self.WORKER_BOOT_ERROR)\n2019-06-19T21:23:21.007078+00:00 app[web.1]: gunicorn.errors.HaltServer: &lt;HaltServer 'Worker failed to boot.' 3&gt;\n2019-06-19T21:23:21.101775+00:00 heroku[web.1]: State changed from up to crashed\n2019-06-19T21:23:21.076488+00:00 heroku[web.1]: Process exited with status 1\n2019-06-19T21:23:24.914695+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=fontscan2.herokuapp.com request_id=006f5f6b-3a0d-4aee-8160-c96f09655306 fwd=\"96.255.225.169\" dyno= connect= service= status=503 bytes= protocol=https\n2019-06-19T21:23:25.337789+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=fontscan2.herokuapp.com request_id=71e97150-f1f1-48bb-8fe1-cd737c77f9ed fwd=\"96.255.225.169\" dyno= connect= service= status=503 bytes= protocol=https\n</code></pre>\n\n<p>I am able to run the Flask app locally. However, I can't deploy and run it on Heroku because of those errors.</p>\n\n<p>This is my Procfile</p>\n\n<pre><code>web: gunicorn --bind 0.0.0.0:$PORT main:app\n</code></pre>\n\n<p>This is my Aptfile for the Buildpack</p>\n\n<pre><code>python3-tk\n</code></pre>\n"}, {"tags": ["python", "pandas", "multiprocessing"], "comments": [{"owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "edited": false, "score": 0, "creation_date": 1560980316, "post_id": 56676147, "comment_id": 99919561, "body": "have you tried solving this using broadcasting internal to <code>pandas</code>?"}, {"owner": {"reputation": 1091, "user_id": 9497687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b54b9d1d94a58d81bd43a7ae50b567d6?s=128&d=identicon&r=PG&f=1", "display_name": "jeschwar", "link": "https://stackoverflow.com/users/9497687/jeschwar"}, "edited": false, "score": 0, "creation_date": 1560980439, "post_id": 56676147, "comment_id": 99919599, "body": "maybe you could look into using <a href=\"https://docs.dask.org/en/latest/dataframe.html\" rel=\"nofollow noreferrer\">dask</a>"}, {"owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 0, "creation_date": 1561017077, "post_id": 56676147, "comment_id": 99928590, "body": "<code>iterrows</code> in <code>pandas</code> is <b>really</b> slow if, <code>pool.apply</code> won&#39;t actually help you run anything in parallel (it just runs it in another process), also it&#39;s much easier returning results rather than assigning them to something that will get lost in another process"}], "owner": {"reputation": 259, "user_id": 1338194, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6efd059369a8813129d0719b2a40a025?s=128&d=identicon&r=PG", "display_name": "user1338194", "link": "https://stackoverflow.com/users/1338194/user1338194"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560980613, "creation_date": 1560979908, "last_edit_date": 1560980613, "question_id": 56676147, "link": "https://stackoverflow.com/questions/56676147/how-to-run-a-function-on-each-row-of-pandas-dataframe-in-parallel", "title": "How to run a function on each row of pandas dataframe in parallel", "body": "<p>I have a function x:</p>\n\n<pre><code>def xfunc (var_y, df_row):\n    l=do_something(df_row[1])\n    m=do_something(df_row[3])\n    #write(l,m) to var_y\n</code></pre>\n\n<p>I would like to pass a row to xfunc for each row in a df and execute this in parallel.</p>\n\n<p>I tried :</p>\n\n<pre><code># Parallelizing using Pool.apply()\nimport multiprocessing as mp\n\n# Step 1: Init multiprocessing.Pool()\npool = mp.Pool(mp.cpu_count())\n\nout='test'\n# Step 2: run `pool.apply`\n[pool.apply(concord_task, args=(out,r)) for i,r in df.iterrows()]\n\n# Step 3: close\npool.close() \n</code></pre>\n\n<p>Thanks, </p>\n"}, {"tags": ["python", "numpy", "tensorflow", "random", "keras"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1560980035, "post_id": 56676146, "comment_id": 99919468, "body": "You can use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.logspace.html\" rel=\"nofollow noreferrer\">np.logspace</a> to create evenly spaced numbers on a log scale between start and stop, it&#39;s not technically random numbers as in your question, but much more repeatable"}, {"owner": {"reputation": 977, "user_id": 9364931, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "michael0196", "link": "https://stackoverflow.com/users/9364931/michael0196"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1560980530, "post_id": 56676146, "comment_id": 99919628, "body": "x = np.logspace(start=0.0001, stop=1, num=5, endpoint=True, base=10.0, dtype=None) produces this array [1.0002302850208247, 1.778586534531975, 3.1626417517967864, 5.623736970908922, 10.0]. What am I getting wrong here?"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 1, "creation_date": 1560981043, "post_id": 56676146, "comment_id": 99919781, "body": "<a href=\"https://stackoverflow.com/a/31480118/7835267\">this answer</a> suggests taking the <code>np.log10()</code> of the endpoints due to how numpy calculates start and stop for logspace"}], "owner": {"reputation": 977, "user_id": 9364931, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "michael0196", "link": "https://stackoverflow.com/users/9364931/michael0196"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560979902, "creation_date": 1560979902, "question_id": 56676146, "link": "https://stackoverflow.com/questions/56676146/how-do-i-generate-logscale-random-values-between-two-numbers-for-hyper-parameter", "title": "How do I generate logscale random values between two numbers for hyper-parameter tuning i.e. learning rate?", "body": "<p>For hyperparameters like learning rate, generating random numbers between 0.0001 and 1 will not provide an accurate representation of the hyperspace.</p>\n\n<p>How would I generate 100 random numbers between 0.0001 and 1 with logscale?</p>\n"}, {"tags": ["python", "artificial-intelligence", "reinforcement-learning"], "comments": [{"owner": {"reputation": 581, "user_id": 575170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/805f967e9a88855c73bae46c7490a287?s=128&d=identicon&r=PG", "display_name": "Kirt Undercoffer", "link": "https://stackoverflow.com/users/575170/kirt-undercoffer"}, "edited": false, "score": 0, "creation_date": 1561055173, "post_id": 56676143, "comment_id": 99949102, "body": "I took your posted code and at form episode 1610-1632 the average score = -293 with a sd of 225.  From 1710-1732 the mean was -216 and the sd is 251.  It&#39;s still negative, there is a lot of back and forth in the scores and it runs slowly on my computer but right now it looks like the score might eventually become positive."}, {"owner": {"reputation": 11, "user_id": 11672757, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zcrThXCF_Ng/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcUnHRJlIW6ObTUPJsz3BCyPYaI1w/mo/photo.jpg?sz=128", "display_name": "Himanshu Prajapati", "link": "https://stackoverflow.com/users/11672757/himanshu-prajapati"}, "reply_to_user": {"reputation": 581, "user_id": 575170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/805f967e9a88855c73bae46c7490a287?s=128&d=identicon&r=PG", "display_name": "Kirt Undercoffer", "link": "https://stackoverflow.com/users/575170/kirt-undercoffer"}, "edited": false, "score": 0, "creation_date": 1561057492, "post_id": 56676143, "comment_id": 99950030, "body": "i run this code around 5000 times on colab after post this code but still i got nothing more than around -1000"}, {"owner": {"reputation": 11, "user_id": 11672757, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zcrThXCF_Ng/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcUnHRJlIW6ObTUPJsz3BCyPYaI1w/mo/photo.jpg?sz=128", "display_name": "Himanshu Prajapati", "link": "https://stackoverflow.com/users/11672757/himanshu-prajapati"}, "reply_to_user": {"reputation": 581, "user_id": 575170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/805f967e9a88855c73bae46c7490a287?s=128&d=identicon&r=PG", "display_name": "Kirt Undercoffer", "link": "https://stackoverflow.com/users/575170/kirt-undercoffer"}, "edited": false, "score": 0, "creation_date": 1561058089, "post_id": 56676143, "comment_id": 99950287, "body": "Can you please send me those weights file and png image so that i can find the problem. Thank You"}, {"owner": {"reputation": 11, "user_id": 11672757, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zcrThXCF_Ng/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcUnHRJlIW6ObTUPJsz3BCyPYaI1w/mo/photo.jpg?sz=128", "display_name": "Himanshu Prajapati", "link": "https://stackoverflow.com/users/11672757/himanshu-prajapati"}, "reply_to_user": {"reputation": 581, "user_id": 575170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/805f967e9a88855c73bae46c7490a287?s=128&d=identicon&r=PG", "display_name": "Kirt Undercoffer", "link": "https://stackoverflow.com/users/575170/kirt-undercoffer"}, "edited": false, "score": 0, "creation_date": 1561060118, "post_id": 56676143, "comment_id": 99951143, "body": "Thank you for your afford but i think now my model is working well. I think it&#39;s about random seed which i haven&#39;t fixed. Any suggestion about it will be helpful Thank you"}, {"owner": {"reputation": 4032, "user_id": 754136, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b74357259c20c3981c6c157ec38aa2fd?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/754136/simon"}, "edited": false, "score": 0, "creation_date": 1561111541, "post_id": 56676143, "comment_id": 99966134, "body": "DDPG can take a lot of time to converge and may work very poorly with the mountain car, which has sparse reward. Try with Pendulum-v0 for a simple benchmark, to check if your algorithm is working, it is much easier to solve."}, {"owner": {"reputation": 11, "user_id": 11672757, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zcrThXCF_Ng/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcUnHRJlIW6ObTUPJsz3BCyPYaI1w/mo/photo.jpg?sz=128", "display_name": "Himanshu Prajapati", "link": "https://stackoverflow.com/users/11672757/himanshu-prajapati"}, "edited": false, "score": 0, "creation_date": 1561133477, "post_id": 56676143, "comment_id": 99977375, "body": "Can we try different reward function to deal with that ?"}], "owner": {"reputation": 11, "user_id": 11672757, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zcrThXCF_Ng/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcUnHRJlIW6ObTUPJsz3BCyPYaI1w/mo/photo.jpg?sz=128", "display_name": "Himanshu Prajapati", "link": "https://stackoverflow.com/users/11672757/himanshu-prajapati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1561023440, "creation_date": 1560979899, "last_edit_date": 1561023440, "question_id": 56676143, "link": "https://stackoverflow.com/questions/56676143/my-deep-deterministic-policy-gradient-model-is-not-learning-anything-even-after", "title": "my deep deterministic policy gradient model is not learning anything even after 2000 iteration", "body": "<p>i have tried different hyper parameters and number of layers and node but my model is not learning anything even after 2000 iteration and i have also tried MountainCarContinuous-v0 environment but that also didn't work.</p>\n\n<p>i have tried different architecture and model from github but still my model is not learning anything </p>\n\n<pre><code>import numpy as np\nimport tensorflow as tf\nimport random\nimport gym\nimport pylab\nimport sys\n\nfrom keras.initializers import RandomUniform\nfrom keras.models import Sequential, Model\nfrom keras.optimizers import Adam\nfrom keras.layers import Dense, Input, Add, Concatenate, Flatten, GaussianNoise, Lambda\nfrom keras import backend as K\nfrom collections import deque\n\nconfig = tf.ConfigProto()\nconfig.gpu_options.allow_growth = True\nsess = tf.Session(config=config)\nK.set_session(sess)\n\nEPISODES = 100000\n\nclass Actor(object):\n\n    def __init__(self, sess, state_size, action_size, TAU, lr, action_bound=1, load=False):\n        self.sess = sess\n        self.TAU = TAU\n        self.lr = lr\n        self.load = load\n        self.action_bound = action_bound\n\n        self.model, self.weights, self.state = self.bulid_network(state_size, action_size)\n        self.target_model, self.target_weights, self.target_weights = self.bulid_network(state_size, action_size)\n        self.q_grads = tf.placeholder(tf.float32, [None, action_size])\n        self.grads = tf.gradients(self.model.output, self.weights, -self.q_grads)\n        self.optimize = tf.train.AdamOptimizer(lr).apply_gradients(zip(self.grads, self.weights))\n        self.sess.run(tf.global_variables_initializer())\n\n        if self.load:\n            self.model.load_weights(\"./DDPG_Actor.h5\")\n            self.target_model.load_weights(\"./DDPG_Actor_target.h5\")\n\n    def train(self, state, grads):\n        self.sess.run(self.optimize, feed_dict={self.state : state, self.q_grads : grads})\n\n    def update(self):\n        W, target_W = self.model.get_weights(), self.target_model.get_weights()\n        for i in range(len(W)):\n            target_W[i] = self.TAU*W[i] + (1 - self.TAU)*target_W[i]\n        self.target_model.set_weights(target_W)\n\n    def save(self):\n        self.model.save_weights(\"./DDPG_Actor.h5\")\n        self.target_model.save_weights(\"./DDPG_Actor_target.h5\")\n\n    def bulid_network(self, state_size, action_size):\n        input = Input(shape=[state_size])\n        X = Dense(400, activation='relu', kernel_initializer='glorot_normal')(input)\n        X = Dense(300, activation='relu', kernel_initializer='glorot_normal')(X)\n        output = Dense(action_size, activation='tanh', kernel_initializer='glorot_normal')(X)\n        output = Lambda(lambda i : i*self.action_bound)(output)\n        model = Model(input=input, output=output)\n        return model, model.trainable_weights, input \n\n\nclass Critic(object):\n\n    def __init__(self, sess, state_size, action_size, TAU, lr, load=False):\n        self.sess = sess\n        self.TAU = TAU\n        self.lr = lr\n        self.load = load\n        self.optimizer = tf.train.AdamOptimizer(lr)\n\n        self.model, self.state, self.action = self.build_network(state_size, action_size)\n        self.target_model, self.target_state, self.target_action = self.build_network(state_size, action_size)\n        self.q_grads = tf.gradients(self.model.output, self.action)\n        self.sess.run(tf.global_variables_initializer())\n\n        if self.load:\n            self.model.load_weights(\"./DDPG_Critic.h5\")\n            self.target_model.load_weights(\"./DDPG_Critic_target.h5\")\n\n    def gradients(self, state, action):\n        return self.sess.run(self.q_grads, feed_dict={self.state : state, self.action : action})[0]\n\n    def save(self):\n        self.model.save_weights(\"./DDPG_Critic.h5\")\n        self.target_model.save_weights(\"./DDPG_Critic_target.h5\")\n\n    def update(self):\n        W, target_W = self.model.get_weights(), self.target_model.get_weights()\n        for i in range(len(W)):\n            target_W[i] = self.TAU*W[i] + (1 - self.TAU)*target_W[i]\n        self.target_model.set_weights(target_W)        \n\n    def build_network(self, state_size, action_size):\n        S = Input(shape=[state_size])\n        A = Input(shape=[action_size])\n        X1 = Dense(400, activation='relu', kernel_initializer='glorot_normal')(S)\n        X2 = Dense(400, activation='relu', kernel_initializer='glorot_normal')(A)\n        X = Add()([X1,X2])\n        X = Dense(300, activation='relu', kernel_initializer='glorot_normal')(X)\n        output = Dense(action_size, activation='linear', kernel_initializer='glorot_normal')(X)\n        model = Model(inputs=[S, A], outputs=output)\n        model.compile(loss='mse', optimizer=Adam(lr=self.lr))\n        return model, S, A\n\n\nclass DDPG(object):\n    def __init__(self, sess, state_size, action_size, action_bound=1, memory_size=5000, batch_size=64, actor_lr=0.0001, critic_lr=0.001, gamma=0.99, TAU=0.001):\n        self.sess = sess\n        self.state_size = state_size\n        self.action_size = action_size\n        self.memory = deque(maxlen=memory_size)\n        self.batch_size = batch_size\n        self.actor_lr = actor_lr\n        self.critic_lr = critic_lr\n        self.gamma = gamma\n        self.TAU = TAU\n        self.train_start = 1000\n        self.epsilon =  1\n        self.epsilon_min = 0.001\n        self.mu = 0.0\n        self.x = 0\n        self.theta = 0.01\n        self.sigma = 0.1\n        self.epsilon_decay = (self.epsilon - self.epsilon_min) / 100000\n\n\n        self.actor = Actor(sess, state_size, action_size, TAU, actor_lr,action_bound, load=False)\n        self.critic = Critic(sess, state_size, action_size, TAU, critic_lr, load=False)\n\n    def append(self, state, action, reward, next_state, done):\n        self.memory.append((state, action, reward, next_state, done))\n        if self.epsilon &gt; self.epsilon_min :\n          self.epsilon -= self.epsilon_decay\n\n    def OU(self):\n        dx = self.theta*(self.mu - self.x) + self.sigma*np.random.randn(1)\n        self.x += dx\n        return self.x\n\n    def get_action(self, state):\n        action =  self.actor.model.predict(state)[0]\n        return action + self.OU()*self.epsilon\n\n    def save(self):\n        self.actor.save()\n        self.critic.save()\n\n    def train(self):\n        if len(self.memory) &lt; self.train_start:\n            return\n\n        batch_size = min(self.batch_size, len(self.memory))\n        mini_batch = random.sample(self.memory, batch_size)\n\n        states = np.asarray([e[0] for e in mini_batch])\n        states = np.reshape(states, [batch_size, self.state_size])\n        actions = np.asarray([e[1] for e in mini_batch])\n        rewards = np.asarray([e[2] for e in mini_batch])\n        next_states = np.asarray([e[3] for e in mini_batch])\n        next_states = np.reshape(next_states, [batch_size, self.state_size])\n        done = np.asarray([e[4] for e in mini_batch])\n        target = np.zeros_like(actions)\n\n        target_q_values = self.critic.target_model.predict([next_states, self.actor.target_model.predict(next_states)])\n        for i in range(len(mini_batch)):\n            if done[i]:\n                target[i] = rewards[i]\n\n            else :\n                target[i] = rewards[i] + self.gamma*target_q_values[i]\n\n        loss = self.critic.model.train_on_batch([states, actions], target)\n        action_for_grad = self.actor.model.predict(states)\n        q_grads = self.critic.gradients(states,action_for_grad)\n        self.actor.train(states,q_grads)\n        self.actor.update()\n        self.critic.update()\n\n\nenv = gym.make('Pendulum-v0')\n\nstate_size = env.observation_space.shape[0]\naction_size = 1\naction_bound = env.action_space.high\nagent = DDPG(sess, state_size, action_size, action_bound)\n\n\nscores, episodes = [], []\n\nfor e in range(EPISODES):\n    done = False\n    score = 0\n    state = env.reset()\n    state = np.reshape(state, [1,state_size])\n    step = 0\n\n    while not done:\n\n        action = agent.get_action(state)\n        #print(action)\n        next_state, reward, done, _ = env.step([action])\n        next_state = np.reshape(next_state,[1,state_size])\n\n        score += reward[0]\n        agent.append(state, action, reward, next_state, done)\n        state = next_state\n\n        step += 1\n        if step % 20 == 0:\n          agent.train()\n\n        if done:\n\n            scores.append(score)\n            episodes.append(e)\n            pylab.plot(episodes, scores, 'b')\n            pylab.savefig(\"./DDPG_Pendulum.png\")\n            print(\"episode:\", e, \" score:\", score, \" epsilon:\", agent.epsilon)\n\n            #if np.mean(scores[-min(10, len(scores)) :]) &gt; -120 :\n                #sys.exit()\n\n\n    if e % 50 == 0:\n        agent.save()\n</code></pre>\n\n<p>always i got around -1450 reward per episode</p>\n"}, {"tags": ["python", "dynamic"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1560980660, "post_id": 56676120, "comment_id": 99919668, "body": "Don&#39;t use <code>vars()</code>. Explicitly create a mapping, that is, a <code>dict</code>, that maps strings to the function objects you want. Then your dictionary won&#39;t depend on the scope you call <code>vars</code>  (a bad approach to begin with). You could probably just use <code>globals()</code> here, but again, that is just a messy, bad approach. If all your functions are going to be in the <code>domains</code> module anyway, don&#39;t do <code>from domains import *</code> (a bad practice) and simply use <code>import domains; func = getattr(domains, dom).fn1</code>"}, {"owner": {"reputation": 431, "user_id": 3370054, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a7aa12884e02b479d1177a82b56b2350?s=128&d=identicon&r=PG&f=1", "display_name": "leon", "link": "https://stackoverflow.com/users/3370054/leon"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1561039337, "post_id": 56676120, "comment_id": 99940819, "body": "Thanks Juanpa, I do like the direction of this approach.  I do however have additional constraints. First, domains is actually a package containing a variety of modules. If I can get the dict to map string to module that would go a long way."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1561044731, "post_id": 56676120, "comment_id": 99944200, "body": "sure you can do just that"}], "owner": {"reputation": 431, "user_id": 3370054, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a7aa12884e02b479d1177a82b56b2350?s=128&d=identicon&r=PG&f=1", "display_name": "leon", "link": "https://stackoverflow.com/users/3370054/leon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560979759, "creation_date": 1560979759, "question_id": 56676120, "link": "https://stackoverflow.com/questions/56676120/python-runtime-access-to-module-functions-or-dynamic-function-creation", "title": "Python runtime access to module functions or dynamic function creation", "body": "<p>I am coding a command line python application, and I want to access a module function known at run time.</p>\n\n<p>I have looked at dynamically creating the function at run time from the following : <a href=\"https://snipplr.com/view/17819/\" rel=\"nofollow noreferrer\">https://snipplr.com/view/17819/</a></p>\n\n<p>But the approach no longer does not appear to be valid.</p>\n\n<p>Here is some non-working code:</p>\n\n<pre><code>from domains import *\n\n\ndef execute(name, func, arg1, arg2):\n    pass\n\n\ndef main():\n\n    if sys.version_info &lt; (3, 0):\n        print(\"Detected Python 2.x, but code requires Python 3.x. Exiting\")\n\n    parser = argparse.ArgumentParser()\n    parser.add_argument(\"-d\", \"--doms\", help=\"dom name\", type=str)\n    parser.add_argument(\"-a\", \"--arg1\", help=\"arg1 name\", type=str)\n    parser.add_argument(\"-b\", \"--arg2\", help=\"arg2 name\", type=str)\n    args = parser.parse_args()\n\n    dom = args.doms\n    if dom in vars():\n        func = vars()[dom].fn1\n        execute(dom, func, arg1, arg2)\n    else:\n        print(\"{} not implemented!\\n\".format(dom))\n\n\nif __name__ == \"__main__\":\n    main()\n\n</code></pre>\n\n<p>Originally the code will work if placed in the if__name__ == <strong>main</strong> scope. But will break once in the main() function scope.</p>\n\n<p>Any pointer to a better (more pythonic) approach will be appreciated.</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 863, "user_id": 8786138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1af71491abb17b899e003a31f710415?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav Sharma", "link": "https://stackoverflow.com/users/8786138/vaibhav-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1560979771, "creation_date": 1560979771, "answer_id": 56676121, "question_id": 56676097, "link": "https://stackoverflow.com/questions/56676097/why-doesnt-the-logging-info-be-printed-out-to-the-screen/56676121#56676121", "title": "Why doesn&#39;t the logging info be printed out to the screen?", "body": "<p>You need to configure your logger, give it an output file and everything</p>\n\n<pre><code>logging.info(msg, *args, **kwargs)\nLogs a message with level INFO on the root logger. The arguments are interpreted as for debug().\n</code></pre>\n\n<p>More information can be found here: <a href=\"https://docs.python.org/3/howto/logging-cookbook.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/howto/logging-cookbook.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 0, "last_activity_date": 1560980145, "creation_date": 1560980145, "answer_id": 56676190, "question_id": 56676097, "link": "https://stackoverflow.com/questions/56676097/why-doesnt-the-logging-info-be-printed-out-to-the-screen/56676190#56676190", "title": "Why doesn&#39;t the logging info be printed out to the screen?", "body": "<p>The default level for the root logger is <code>WARNING</code>. You need to configure the logger first to change its level. For example,</p>\n\n<pre><code>import logging\n\nlogging.basicConfig(level=logging.INFO)\nlogging.info(\"This is the logging info ...\")\n</code></pre>\n"}], "owner": {"reputation": 1285, "user_id": 2079445, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/b3054d111aa00407c8d8000957ad9958?s=128&d=identicon&r=PG", "display_name": "ling", "link": "https://stackoverflow.com/users/2079445/ling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "closed_date": 1560988435, "answer_count": 2, "score": 0, "last_activity_date": 1560980145, "creation_date": 1560979656, "question_id": 56676097, "link": "https://stackoverflow.com/questions/56676097/why-doesnt-the-logging-info-be-printed-out-to-the-screen", "closed_reason": "Duplicate", "title": "Why doesn&#39;t the logging info be printed out to the screen?", "body": "<p>I am using PyCharm and want to test the logging:</p>\n\n<pre><code>import logging\n\n\nlogging.info(\"This is the logging info ...\")\n</code></pre>\n\n<p>I suppose this should print out the 'This is the logging info ...' to my console when I run the program, but it didn't.</p>\n\n<p>I don't have any other setting or configuration on logging. Where is the logging info going?</p>\n"}, {"tags": ["java", "python", "squish"], "comments": [{"owner": {"reputation": 245, "user_id": 10709983, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z7Gt795OFt4/AAAAAAAAAAI/AAAAAAAAAIE/PgWVubL9WBs/photo.jpg?sz=128", "display_name": "Jonathas Nascimento", "link": "https://stackoverflow.com/users/10709983/jonathas-nascimento"}, "edited": false, "score": 0, "creation_date": 1560985400, "post_id": 56676039, "comment_id": 99920792, "body": "Do you have some exemple, code or log that show this behavior?"}], "answers": [{"tags": [], "owner": {"reputation": 524, "user_id": 5413773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/184a03cc12e477815bcf19f690dcdc52?s=128&d=identicon&r=PG", "display_name": "frog.ca", "link": "https://stackoverflow.com/users/5413773/frog-ca"}, "is_accepted": false, "score": 0, "last_activity_date": 1561111141, "last_edit_date": 1561111141, "creation_date": 1561108927, "answer_id": 56700477, "question_id": 56676039, "link": "https://stackoverflow.com/questions/56676039/get-javaarray-property-from-object/56700477#56700477", "title": "Get JavaArray property from object", "body": "<p>Squish yields a <a href=\"https://doc.froglogic.com/squish/latest/ugs-javaapi.html#ugsjava-arrays\" rel=\"nofollow noreferrer\">JavaArray</a> when accessing a property or calling a method that is/returns a Java array.</p>\n\n<p>To access the elements in that array use the JavaArray.at(int) method:</p>\n\n<pre><code>items_array = swtMenuObj.items\ntest.log(\"Type of items container/array: %s\" % className(items_array))\ntest.log(\"A: Item 0 text: %s\" % items_array.at(0).text)\n// Example output/log entries:\n//  JavaArray\n//  &amp;File\n\n\nitems_array2 = getattr(swtMenuObj, \"items\")\ntest.log(\"Type of items container/array: %s\" % className(items_array))\ntest.log(\"B: Item 0 text: %s\" % items_array2.at(0).text)\n// Example output/log entries:\n//  JavaArray\n//  &amp;File\n</code></pre>\n\n<p>There should be (and for me is) no difference between using...</p>\n\n<pre><code>menuObj.items\n</code></pre>\n\n<p>...and...</p>\n\n<pre><code>getattr(menuObj, \"items\")\n</code></pre>\n\n<p>...and both yield an object of type JavaArray.</p>\n"}], "owner": {"reputation": 359, "user_id": 6524007, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/XvvNE.png?s=128&g=1", "display_name": "PySerial Killer", "link": "https://stackoverflow.com/users/6524007/pyserial-killer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1561111141, "creation_date": 1560979354, "question_id": 56676039, "link": "https://stackoverflow.com/questions/56676039/get-javaarray-property-from-object", "title": "Get JavaArray property from object", "body": "<p>I have a suite with python scripts to test a java application using squish.</p>\n\n<p>In my test I get an object named menuObj, containing a property called items, which type is JavaArray. When I try to get that property using getattr() I get an object containing properties instead of such list (or the string containing the items in the list).</p>\n\n<p>What is the proper method?</p>\n\n<p>expected = [MenuItem {Project   Ctrl+Shift+D},MenuItem {System  Ctrl+Shift+M},MenuItem {Panel}]\nobtained =  containing three properties.</p>\n"}, {"tags": ["python", "html", "web-scraping", "css-selectors"], "answers": [{"tags": [], "owner": {"reputation": 530, "user_id": 7195890, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/97r6C.jpg?s=128&g=1", "display_name": "Mobasshir Bhuiyan", "link": "https://stackoverflow.com/users/7195890/mobasshir-bhuiyan"}, "is_accepted": false, "score": 0, "last_activity_date": 1560980181, "creation_date": 1560980181, "answer_id": 56676198, "question_id": 56676025, "link": "https://stackoverflow.com/questions/56676025/web-scraping-a-whole-page-with-scrapy-and-css-selectors/56676198#56676198", "title": "Web Scraping a whole page with Scrapy and CSS Selectors", "body": "<p>I would suggest you to use Celery along with redis to scrape multiple webpages asynchronously and in a scheduled manner if you want. Besides also go through beautiful soup for a better understanding of scraping. In this case just to get the expected text you can use the split method like </p>\n\n<pre><code>list_separated_by_comma_words = sometext.split(',')\n</code></pre>\n\n<p>You can not access every expected words by indexing. Like to get this 'THE GOOD TEXT I WANT TO EXTRACT' you can do -</p>\n\n<pre><code>list_separated_by_comma_words[0]\n</code></pre>\n\n<p>To split by '\\n' you can do the same. But if you want to strip '\\n' you can use the <code>.strip()</code> method as well.</p>\n"}], "owner": {"reputation": 1, "user_id": 11672763, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20Ji_Wl9kHI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc-ZgxghvE-qyKEvA1Z2BDLefKI2g/mo/photo.jpg?sz=128", "display_name": "Scrape Junior", "link": "https://stackoverflow.com/users/11672763/scrape-junior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560980181, "creation_date": 1560979254, "question_id": 56676025, "link": "https://stackoverflow.com/questions/56676025/web-scraping-a-whole-page-with-scrapy-and-css-selectors", "title": "Web Scraping a whole page with Scrapy and CSS Selectors", "body": "<p>I am trying to scrape all of the text in an html page at once.  I know i will have a lot of extra information and that it will not be organized, but i am trying to see if there is some way to scrape multiple websites at once with one scraper.</p>\n\n<p>The problem is when i run the Scrapy spider in Python i get all the spaces : that i do not need as well as as extra information about the page even if I specified that i only wanted to extract the text in my code.</p>\n\n<p>I tried making my CSS selectors more specific but I always end up with no information at all or not enough information</p>\n\n<pre><code>import scrapy\nfrom ..items import WholePageItem\n\nclass WholePageSpiderSpider(scrapy.Spider):\n    name = 'whole_page_spider'\n    start_urls = ['https://www.justanexample.com']\n\n    def parse(self, response):\n        items = WholePageItem()\n        mission = response.css('body').css('::text').extract()\n\n        items['mission'] = mission\n\n        yield items\n</code></pre>\n\n<p>The output of the extraction is this:</p>\n\n<pre><code>   'THE GOOD TEXT I WANT TO EXTRACT',\n         '\\n',\n         '\\n',\n         '\\n',\n         'window.purechatApi = { l: [], t: [], on: function () { '\n         'this.l.push(arguments); } }; (function () { var done = false; '\n         \"var script = document.createElement('script'); script.async = \"\n         \"true; script.type = 'text/javascript'; script.src = \"\n         \"'https://blablabla.com'; \"\n         \"document.getElementsByTagName('HEAD').item(0).appendChild(script); \"\n         'script.onreadystatechange = script.onload = function (e) { if '\n         \"(!done &amp;&amp; (!this.readyState || this.readyState == 'loaded' || \"\n         \"this.readyState == 'complete')) { var w = new PCWidget({c: \"\n         \"'3a6f7d8e-a107-4582-b33c-c10aa2b80ac8', f: true }); done = true; \"\n         '} }; })();',\n         '\\n',\n</code></pre>\n\n<p>What am i trying to get is only this part:\n  'THE GOOD TEXT I WANT TO EXTRACT',</p>\n\n<p>I do not need to be specific,the only thing i dont want is the '\\n', as well as the code in the code.</p>\n\n<p>What can i do? thank you</p>\n"}, {"tags": ["python", "sys"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 3, "creation_date": 1560979444, "post_id": 56676024, "comment_id": 99919278, "body": "<code>myfunc(*sys.argv[1:])</code>"}, {"owner": {"reputation": 2162, "user_id": 3014097, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/47193d2bbe5b654700776fd2a7d14868?s=128&d=identicon&r=PG&f=1", "display_name": "dan_g", "link": "https://stackoverflow.com/users/3014097/dan-g"}, "edited": false, "score": 2, "creation_date": 1560979445, "post_id": 56676024, "comment_id": 99919279, "body": "Using <code>*args</code> and <code>**kwargs</code>. See <a href=\"https://stackoverflow.com/questions/36901/what-does-double-star-asterisk-and-star-asterisk-do-for-parameters\">What does ** (double star/asterisk) and * (star/asterisk) do for parameters?</a>"}, {"owner": {"reputation": 6812, "user_id": 7371893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=128&g=1", "display_name": "&#226;\u0144\u014d\u014b\u0177Xmo\u016f\u015c", "link": "https://stackoverflow.com/users/7371893/%c3%a2%c5%84%c5%8d%c5%8b%c5%b7xmo%c5%af%c5%9c"}, "edited": false, "score": 0, "creation_date": 1560979451, "post_id": 56676024, "comment_id": 99919280, "body": "yes, there is. Use *args in the argument list."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1560979961, "post_id": 56676024, "comment_id": 99919452, "body": "Related: <a href=\"https://docs.python.org/3/howto/argparse.html#argparse-tutorial\" rel=\"nofollow noreferrer\">Argparse Tutorial</a>"}], "owner": {"reputation": 19, "user_id": 11660137, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fwv-LMZIvDc/AAAAAAAAAAI/AAAAAAAAAYA/SbIhlEiEnsA/photo.jpg?sz=128", "display_name": "Dominik Mattioli", "link": "https://stackoverflow.com/users/11660137/dominik-mattioli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "closed_date": 1560982579, "answer_count": 0, "score": 0, "last_activity_date": 1561046444, "creation_date": 1560979244, "last_edit_date": 1561046444, "question_id": 56676024, "link": "https://stackoverflow.com/questions/56676024/how-do-you-handle-optional-arguments-in-python-function-calls", "closed_reason": "Duplicate", "title": "How do you handle optional arguments in python function calls?", "body": "<p>If you are calling a python script with optional arguments, how do you handle the length of sys.arv? I'm calling this script from MATLAB as a system call, and some of the arguments are not always needed.</p>\n\n<pre><code>#mymod\n\ndef myfunc(arg1, arg2, arg3=9, arg4=9):\n    out = arg1 + arg 2 + arg3 + arg4\n    return out\n\nif __name__ == '__main__':\n    arg1 = sys.argv[1]\n    arg2 = sys.argv[2]\n    nargin = len(sys.argv)\n    if nargin == 3:\n        myfunc(arg1 , arg2)\n    elif nargin == 4:\n        arg3= sys.argv[3]\n        myfunc(arg1 , arg2, arg3)\n    else:\n        arg3 = sys.argv[3]\n        arg4= sys.argv[4]\n        myfunc(arg1, arg2, arg3, arg4)\n</code></pre>\n\n<p>There's gotta be a more eloquent way than doing this if statement, right?</p>\n"}, {"tags": ["python", "amazon-web-services", "amazon-s3", "boto3"], "comments": [{"owner": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "edited": false, "score": 0, "creation_date": 1560980543, "post_id": 56676015, "comment_id": 99919632, "body": "What do you mean by &quot;iterate over&quot;? Can you be more specific? When you say that your code doesn&#39;t work, what were you expecting it to do that is different?"}], "answers": [{"comments": [{"owner": {"reputation": 3199, "user_id": 2005490, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/60f7a105be69d2445655481949141f7f?s=128&d=identicon&r=PG&f=1", "display_name": "Atihska", "link": "https://stackoverflow.com/users/2005490/atihska"}, "edited": false, "score": 0, "creation_date": 1560980878, "post_id": 56676269, "comment_id": 99919738, "body": "Sorry about the wrong terminology and thanks for correcting me here. I meant key paths alone. When I say, it doesn&#39;t work, I mean I don&#39;t get <code>obj</code> as <code>bucket-name&#47;fo1&#47;fo2&#47;fo3</code> after my for loop. I want to iterate after <code>bucket-name&#47;fo1&#47;fo2&#47;fo3</code> that consists of some other objects."}, {"owner": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "reply_to_user": {"reputation": 3199, "user_id": 2005490, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/60f7a105be69d2445655481949141f7f?s=128&d=identicon&r=PG&f=1", "display_name": "Atihska", "link": "https://stackoverflow.com/users/2005490/atihska"}, "edited": false, "score": 0, "creation_date": 1560981173, "post_id": 56676269, "comment_id": 99919820, "body": "I still don&#39;t understand what you are seeking. Can you provide an example?"}, {"owner": {"reputation": 3199, "user_id": 2005490, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/60f7a105be69d2445655481949141f7f?s=128&d=identicon&r=PG&f=1", "display_name": "Atihska", "link": "https://stackoverflow.com/users/2005490/atihska"}, "edited": false, "score": 0, "creation_date": 1560981621, "post_id": 56676269, "comment_id": 99919933, "body": "Sure. Here is my S3 str:"}, {"owner": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "reply_to_user": {"reputation": 3199, "user_id": 2005490, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/60f7a105be69d2445655481949141f7f?s=128&d=identicon&r=PG&f=1", "display_name": "Atihska", "link": "https://stackoverflow.com/users/2005490/atihska"}, "edited": false, "score": 0, "creation_date": 1560981735, "post_id": 56676269, "comment_id": 99919960, "body": "You can edit your question to add more details, rather than trying to put it in comments."}], "tags": [], "owner": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "is_accepted": false, "score": 2, "last_activity_date": 1560980506, "creation_date": 1560980506, "answer_id": 56676269, "question_id": 56676015, "link": "https://stackoverflow.com/questions/56676015/how-to-get-subkeys-to-iterate-over-and-eventually-the-files-inside-them-in-aws-s/56676269#56676269", "title": "How to get subkeys to iterate over and eventually the files inside them in AWS S3", "body": "<p>The first thing to understand about Amazon S3 is that <code>folders do not exist</code>. Rather, objects are stored with their full path as their <code>Key</code> (filename).</p>\n\n<p>For example, I could copy a file to a bucket using the <a href=\"http://aws.amazon.com/cli/\" rel=\"nofollow noreferrer\">AWS Command-Line Interface (CLI)</a>:</p>\n\n<pre><code>aws s3 cp foo.txt s3://my-bucket/fo1/fo2/fo3/foo.txt\n</code></pre>\n\n<p>This would work even though the folders do not exist.</p>\n\n<p>To make things convenient for humans, there is a \"pretend\" set of folders that are provided via the concept of a <strong>common prefix</strong>. Thus, in the management console, the folders would <em>appear</em> to be there. However, if the object was then deleted with:</p>\n\n<pre><code>aws s3 rm s3://my-buket/fo1/fo2/fo3/foo.txt\n</code></pre>\n\n<p>The result is that the folders would immediately disappear because <em>they never actually existed!</em></p>\n\n<p>Also for convenience, some Amazon S3 commands allow you to specify a <code>Prefix</code> and <code>Delimiter</code>. This can be used to, for example, only list objects in the <code>fo3</code> folder. What it is really doing is merely listing the objects that have a <code>Key</code> that starts with <code>fo1/fo2/fo3/</code>. When the <code>Key</code> for the object is returned, it will always have the full path to the object, because the <code>Key</code> actually <em>is</em> the full path. (There is no concept of a filename separate to the complete <code>Key</code>.)</p>\n\n<p>So, if you want a listing of all files in <code>fo1</code> and <code>fo2</code> and <code>fo3</code>, you can do a listing with a <code>Prefix</code> of <code>fo1</code> and receive back all objects that start with <code>fo1/</code>, but this will include objects in sub-folders since they all have a prefix of <code>fo1/</code>.</p>\n\n<p><strong>Bottom line:</strong> Rather than thinking of old-fashioned directories, think of Amazon S3 as a flat storage structure. If necessary, you can do filtering of results in your own code.</p>\n"}, {"tags": [], "owner": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "is_accepted": false, "score": 0, "last_activity_date": 1560984747, "creation_date": 1560984747, "answer_id": 56676875, "question_id": 56676015, "link": "https://stackoverflow.com/questions/56676015/how-to-get-subkeys-to-iterate-over-and-eventually-the-files-inside-them-in-aws-s/56676875#56676875", "title": "How to get subkeys to iterate over and eventually the files inside them in AWS S3", "body": "<p>You should examine the value returned by the <code>list_objects_v2()</code> call to understand the data that is being returned.</p>\n\n<ul>\n<li>If a Prefix has been specified, it returns the contents of the <em>exact prefix</em> that has been provided. Any sub-directories are returned as <code>CommonPrefixes</code>.</li>\n<li>If no Prefix is provided, all objects in the bucket are returned. You can then filter it yourself in code, as shown below.</li>\n</ul>\n\n<pre class=\"lang-py prettyprint-override\"><code>import boto3\n\ns3_client = boto3.client('s3', region_name='ap-southeast-2')\ns3_bucket = 'my-bucket'\nprefix = 'fo1/fo2/fo3/'\n\nresponse = s3_client.list_objects_v2(Bucket=s3_bucket)\nfor object in response['Contents']:\n    if object['Key'].startswith(prefix):\n        print(object['Key'])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 7445782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/924cc07f948b4d73ec3a537ae6bebcd0?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Lynch", "link": "https://stackoverflow.com/users/7445782/christopher-lynch"}, "is_accepted": false, "score": 0, "last_activity_date": 1611871942, "creation_date": 1611871942, "answer_id": 65945980, "question_id": 56676015, "link": "https://stackoverflow.com/questions/56676015/how-to-get-subkeys-to-iterate-over-and-eventually-the-files-inside-them-in-aws-s/65945980#65945980", "title": "How to get subkeys to iterate over and eventually the files inside them in AWS S3", "body": "<p>Possibly the following piece of code can be of use for you. I expanded a bit on John's answer as I was looking for something similar. I basically recreated the os.walk() behavior, which you might be more familiar with</p>\n<pre><code>    import os\n    import boto3\n    \n    # function to replicate os.walk behavior\n    def s3walk( locations,prefix):\n        \n        # recursively add location to roots starting from prefix\n        def processLocation( root,prefixLocal,location):\n            # add new root location if not available\n            if not prefixLocal in root:\n                root[prefixLocal]=(set(),set())\n            # check how many folders are available after prefix\n            remainder = location[len(prefixLocal)+1:]\n            structure = remainder.split('/')\n            #if we are not yet in the folder of the file we need to continue with a larger prefix\n            if len(structure)&gt;1:\n                # add folder dir\n                root[prefixLocal][0].add(structure[0])\n                #make sure file is added allong the way\n                processLocation(root, prefixLocal+'/'+structure[0],location )\n            else:\n                # add to file\n                root[prefixLocal][1].add(structure[0])\n            \n        root={}\n        for location in locations:\n            processLocation(root,prefix,location)\n    \n        return root.items()\n    \n    if __name__ == &quot;__main__&quot;:    \n        s3_client = boto3.client('s3', region_name='eu-west-3')\n        s3_bucket = 'bucket-name'\n        prefix = 'fo1/fo2/fo3'\n        \n        # get list of objects with prefix \n        response = s3_client.list_objects_v2(Bucket=s3_bucket,Prefix=prefix)\n        # retrieve key values\n        locations = [ object['Key'] for object in response['Contents']]\n       \n    \n    \n        for root, (subdir, files) in s3walk(locations,prefix):\n            print(root,subdir,files)\n</code></pre>\n"}], "owner": {"reputation": 3199, "user_id": 2005490, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/60f7a105be69d2445655481949141f7f?s=128&d=identicon&r=PG&f=1", "display_name": "Atihska", "link": "https://stackoverflow.com/users/2005490/atihska"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1611871942, "creation_date": 1560979207, "last_edit_date": 1560982000, "question_id": 56676015, "link": "https://stackoverflow.com/questions/56676015/how-to-get-subkeys-to-iterate-over-and-eventually-the-files-inside-them-in-aws-s", "title": "How to get subkeys to iterate over and eventually the files inside them in AWS S3", "body": "<p>I have AWS S3 key path as <code>bucket-name/fo1/fo2/fo3</code> that has subpaths as \n<code>bucket-name/fo1/fo2/fo3/fo_1, bucket-name/fo1/fo2/fo3/fo_2, bucket-name/fo1/fo2/fo3/fo_3</code> and so on. I want to iterate over these keys <code>fo_1, fo_2, fo_3 etc.</code> within the path <code>bucket-name/fo1/fo2/fo3</code>. </p>\n\n<p>I tried the following but this doesn't work.</p>\n\n<pre><code>s3 = boto3.client('s3')\ns3_bucket = 'bucket-name'\n\nprefix = 'fo1/fo2/fo3'\nfor obj in s3.list_objects_v2(Bucket=s3_bucket, Prefix=prefix, Delimiter='/'):\n     # Here when I print obj, it's a string with value as 'MaxKeys'\n</code></pre>\n\n<p>Any help will be appreciated!</p>\n\n<p>UPDATE: </p>\n\n<pre><code>s3://bucket-name/\n        fo1/\n           fo2/\n              fo3/\n                 fo_1/\n                     file1\n                     ...\n                 fo_2/\n                     file2\n                     ...\n                 fo_3/\n                     file1\n                     ...\n                 fo_4/\n                     file1\n                     ...\n                 ...\n</code></pre>\n\n<p>This is my structure and I am looking to get fo_1, fo_2, fo_3 and files inside it. I want everything inside object <code>fo3</code> and nothing outside of that.</p>\n"}, {"tags": ["python", "firebase", "google-cloud-firestore"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11672765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9e9093adcba0927c4dfd4edc7f99ee6?s=128&d=identicon&r=PG&f=1", "display_name": "ripley.sherlock", "link": "https://stackoverflow.com/users/11672765/ripley-sherlock"}, "edited": false, "score": 1, "creation_date": 1561052215, "post_id": 56676258, "comment_id": 99947891, "body": "Querying on <code>__name__</code> returns the following error: <code>RuntimeError: Error 3:  a filter on __name__ must be a document resource name</code>"}, {"owner": {"reputation": 21, "user_id": 11672765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9e9093adcba0927c4dfd4edc7f99ee6?s=128&d=identicon&r=PG&f=1", "display_name": "ripley.sherlock", "link": "https://stackoverflow.com/users/11672765/ripley-sherlock"}, "edited": false, "score": 1, "creation_date": 1561052668, "post_id": 56676258, "comment_id": 99948059, "body": "I can think of a few work arounds, but this seems like it should be possible"}], "tags": [], "owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "is_accepted": false, "score": 0, "last_activity_date": 1560980447, "creation_date": 1560980447, "answer_id": 56676258, "question_id": 56676006, "link": "https://stackoverflow.com/questions/56676006/how-to-set-up-a-realtime-listener-for-document-title-within-firebase-collection/56676258#56676258", "title": "How to set up a realtime listener for document title within firebase collection - python", "body": "<p>The JavaScript SDK seems to have an explicit options for it as shown <a href=\"https://stackoverflow.com/a/52252264\">here</a>:</p>\n\n<blockquote>\n<pre><code>db.collection('books').where(firebase.firestore.FieldPath.documentId(), '==', 'fK3ddutEpD2qQqRMXNW5').get()\n</code></pre>\n</blockquote>\n\n<p>So <code>firebase.firestore.FieldPath.documentId()</code> indicates the document ID.</p>\n\n<p>There is no direct equivalent in Python, but you can accomplish the same by querying on <code>__name__</code>, which is the internal name of that field:</p>\n\n<pre><code>col_query = db.collection(u'cities').where(u'__name__', u'==', u'your_document_id')\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11672765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9e9093adcba0927c4dfd4edc7f99ee6?s=128&d=identicon&r=PG&f=1", "display_name": "ripley.sherlock", "link": "https://stackoverflow.com/users/11672765/ripley-sherlock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1561052443, "creation_date": 1560979195, "last_edit_date": 1561052443, "question_id": 56676006, "link": "https://stackoverflow.com/questions/56676006/how-to-set-up-a-realtime-listener-for-document-title-within-firebase-collection", "title": "How to set up a realtime listener for document title within firebase collection - python", "body": "<p>I'm trying to listen to a firebase collection for a document creation. </p>\n\n<p>The firebase documentation lays it out like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># Create a callback on_snapshot function to capture changes\ndef on_snapshot(col_snapshot, changes, read_time):\n    print(u'Callback received query snapshot.')\n    print(u'Current cities in California:')\n    for doc in col_snapshot:\n        print(u'{}'.format(doc.id))\n\ncol_query = db.collection(u'cities').where(u'state', u'==', u'CA')\n\n# Watch the collection query\nquery_watch = col_query.on_snapshot(on_snapshot)\n</code></pre>\n\n<p>Instead of u'state' inside of the where(), is there some way to reference the document title? (The title is not present within the document)</p>\n\n<p>I've tried using <code>u'__name__'</code> but get the error:</p>\n\n<p><code>RuntimeError: Error 3:  a filter on __name__ must be a document resource name</code></p>\n"}, {"tags": ["python", "machine-learning", "keras", "keras-layer", "backpropagation"], "comments": [{"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1560982758, "post_id": 56675964, "comment_id": 99920225, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/47204116/shouldnt-model-trainable-false-freeze-weights-under-the-model\">shouldn&#39;t model.trainable=False freeze weights under the model?</a>"}, {"owner": {"reputation": 13, "user_id": 3755166, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4ec423528f3f9341f4475cd6b4bb6328?s=128&d=identicon&r=PG&f=1", "display_name": "user257330", "link": "https://stackoverflow.com/users/3755166/user257330"}, "reply_to_user": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1561007177, "post_id": 56675964, "comment_id": 99924702, "body": "Sorry, but that does not answer this question explicitly."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 13331988, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lY9BohdufoI/AAAAAAAAAAI/AAAAAAAAAAA/AAKWJJNoaFuGSysMR5ZzyzPqTF58ghmx_Q/photo.jpg?sz=128", "display_name": "Harshit Trehan", "link": "https://stackoverflow.com/users/13331988/harshit-trehan"}, "edited": false, "score": 0, "creation_date": 1619122693, "post_id": 56682979, "comment_id": 118816978, "body": "So I came across a code snippet where the author first sets all the <code>layers.trainable = False</code> and then the <code>model.trainable=False</code> and then calls <code>model.compile</code>. Now if I want to reuse the layers whose weights have been frozen (as done above), then I can just call <code>layers.trainable=True</code> again and reuse the layers, right ?  Btw thanks for the above answer, cleared my initial confusion."}, {"owner": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "reply_to_user": {"reputation": 71, "user_id": 13331988, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lY9BohdufoI/AAAAAAAAAAI/AAAAAAAAAAA/AAKWJJNoaFuGSysMR5ZzyzPqTF58ghmx_Q/photo.jpg?sz=128", "display_name": "Harshit Trehan", "link": "https://stackoverflow.com/users/13331988/harshit-trehan"}, "edited": false, "score": 1, "creation_date": 1619160931, "post_id": 56682979, "comment_id": 118825655, "body": "@HarshitTrehan If by &quot;reuse&quot; you mean you want to make the weights of the layer trainable again, then you are right: you first set the <code>trainable</code> to <code>True</code> and then compile the model (i.e. call the <code>compile</code> method) to make this change effective (otherwise, the trainability status of the layer would NOT change without compiling the model)."}, {"owner": {"reputation": 71, "user_id": 13331988, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lY9BohdufoI/AAAAAAAAAAI/AAAAAAAAAAA/AAKWJJNoaFuGSysMR5ZzyzPqTF58ghmx_Q/photo.jpg?sz=128", "display_name": "Harshit Trehan", "link": "https://stackoverflow.com/users/13331988/harshit-trehan"}, "edited": false, "score": 0, "creation_date": 1619207467, "post_id": 56682979, "comment_id": 118845031, "body": "Got it. Thanks!"}], "tags": [], "owner": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "is_accepted": false, "score": 7, "last_activity_date": 1561023078, "creation_date": 1561023078, "answer_id": 56682979, "question_id": 56675964, "link": "https://stackoverflow.com/questions/56675964/what-is-the-difference-between-setting-a-keras-model-trainable-vs-making-each-la/56682979#56682979", "title": "What is the difference between setting a Keras model trainable vs making each layer trainable", "body": "<p>To be able to answer this you need to take a look at the source code of Keras, which you might be surprised after doing so because you would realize that:</p>\n\n<ul>\n<li>The <code>Sequential</code> class <a href=\"https://github.com/keras-team/keras/blob/c658993cf596fbd39cf800873bc457e69cfb0cdb/keras/engine/sequential.py#L24\" rel=\"noreferrer\">is a subclass</a> of <code>Model</code> class, and</li>\n<li>the <code>Model</code> class <a href=\"https://github.com/keras-team/keras/blob/c658993cf596fbd39cf800873bc457e69cfb0cdb/keras/engine/training.py#L36\" rel=\"noreferrer\">is a subclass</a> of <code>Network</code> class, and</li>\n<li>the <code>Network</code> class <a href=\"https://github.com/keras-team/keras/blob/c658993cf596fbd39cf800873bc457e69cfb0cdb/keras/engine/network.py#L35\" rel=\"noreferrer\">is a subclass</a> of <code>Layer</code> class!</li>\n</ul>\n\n<p>As I said, this might be a bit surprising that a Keras model is derived from a Keras layer. But if you think further, you would find it reasonable since they have a lot of common functionalities (e.g. both get some inputs, do some computations on them, produce some output, and update their internal weights/parameters). One of their common attributes is <code>trainable</code> attribute. Now when you set the <code>trainable</code> property of a <strong>model</strong> as <code>False</code> it would <strong>skip</strong> the weight update step. In other words, it does not check the <code>trainable</code> attribute of its underlying layers; rather, first it <strong>checks its own</strong> <code>trainable</code> attribute (more precisely in <code>Network</code> class) and if it is <code>False</code> the updates are skipped. Therefore, that does not mean its underlying layers have their <code>trainable</code> attribute set to <code>False</code> as well. And there is a good reason for not doing that: a single instance of a layer could be used in multiple models. For example, consider the following two models which have a shared layer:</p>\n\n<pre><code>inp = Input(shape=...)\n\nshared_layer = Dense(...)\nsout = shared_layer(inp)\n\nm1_out = Dense(...)(sout)\nm2_out = Dense(...)(sout)\n\nmodel1 = Model(inp, m1_out)\nmodel2 = Model(inp, m2_out)\n</code></pre>\n\n<p>Now if we set <code>model1.trainable = False</code>, this would freezes the whole <code>model1</code> (i.e. training <code>model1</code> does not update the weights of its underlying layers including <code>shared_layer</code>); however, the <code>shared_layer</code> and the <code>model2</code> <strong>are still trainable</strong> (i.e. training <code>model2</code> would update the weights of all its layers including <code>shared_layer</code>). On the other hand, if we set <code>model1.layers[1].trainable = False</code>, then the <code>shared_layer</code> is freezed and therefore its weights would not be updated when training either <code>model1</code> or <code>model2</code>. This way you could have much more control and flexibility, and therefore you can build more complex architectures (e.g. GANs).</p>\n"}], "owner": {"reputation": 13, "user_id": 3755166, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4ec423528f3f9341f4475cd6b4bb6328?s=128&d=identicon&r=PG&f=1", "display_name": "user257330", "link": "https://stackoverflow.com/users/3755166/user257330"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 566, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1561023167, "creation_date": 1560979032, "last_edit_date": 1561023167, "question_id": 56675964, "link": "https://stackoverflow.com/questions/56675964/what-is-the-difference-between-setting-a-keras-model-trainable-vs-making-each-la", "title": "What is the difference between setting a Keras model trainable vs making each layer trainable", "body": "<p>I have a Keras Sequential model consisting of some Dense Layers. I set the trainable property of the whole model to False. But I see that the individual layers have still their trainable property set to True. Do I need to individually set the layers' trainable property also to False? Then what is the meaning of setting trainable property to False on the whole model?</p>\n"}, {"tags": ["python", "python-3.x", "pygame"], "answers": [{"tags": [], "owner": {"reputation": 501, "user_id": 9154627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FEBQ.png?s=128&g=1", "display_name": "Theo", "link": "https://stackoverflow.com/users/9154627/theo"}, "is_accepted": false, "score": 0, "last_activity_date": 1560980961, "creation_date": 1560980961, "answer_id": 56676355, "question_id": 56675963, "link": "https://stackoverflow.com/questions/56675963/how-can-i-play-an-animation-after-pressing-space/56676355#56676355", "title": "How can i play an animation after pressing space?", "body": "<p>The two ways you might want to do this are either: Interrupt the process of the run cycle to play the other animation, which is potentially easier but could cause cuts in animation between the run cycle and the other animation; OR you could wait until the current run cycle is completed before switching animations if you have a matching set of animations. Assuming you don't try this code:</p>\n\n<pre><code>walkcount = 0\nwalkanim = [list of images]\nfightanim = [list of images]\n\nif direction:\n    win.blit(walkanim[walkCount // n], (x, y))\n    if walkCount + 1 &gt;= 18:\n        walkCount = 0\n    else:\n        walkCount += 1\n    if (whenever the fight animation is triggered):\n        for i in range(len(fightanim)):\n            win.blit(walkanim[i // n], (x, y))\n</code></pre>\n\n<p>I don't know that much about the structure of your game/code, so that may require some tweaking. Regardless, hope it helps! -Theo</p>\n"}], "owner": {"reputation": 117, "user_id": 10503946, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rJIt2u9m-XU/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWeK-XpimpwmFG_nUI_Z9esd53vqA/mo/photo.jpg?sz=128", "display_name": "A.J.", "link": "https://stackoverflow.com/users/10503946/a-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560980961, "creation_date": 1560979031, "question_id": 56675963, "link": "https://stackoverflow.com/questions/56675963/how-can-i-play-an-animation-after-pressing-space", "title": "How can i play an animation after pressing space?", "body": "<p>I've got a list of images to animate a basic attack, but i don't know how to play through them when space is pressed.</p>\n\n<p>For the walk animation it was easy because i just played</p>\n\n<pre><code>    walkcount = 0\n    walkanim = [list of images]\n\n    if direction:\n        win.blit(walkanim[walkCount // n], (x, y))\n        if walkCount + 1 &gt;= 18:\n            walkCount = 0\n        else:\n            walkCount += 1\n</code></pre>\n\n<p>But I don't understand how to play through a whole list of images in a timely manner if space is pressed. </p>\n\n<p>because once its pressed then its false again</p>\n"}, {"tags": ["python", "flask", "process"], "comments": [{"owner": {"reputation": 21495, "user_id": 62288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01239dcaa443502ce71059f5308bca74?s=128&d=identicon&r=PG", "display_name": "Dave W. Smith", "link": "https://stackoverflow.com/users/62288/dave-w-smith"}, "edited": false, "score": 0, "creation_date": 1560981512, "post_id": 56675959, "comment_id": 99919905, "body": "<a href=\"https://stackoverflow.com/questions/55432430/how-to-control-a-python-gui-via-http-api/55434731#55434731\" title=\"how to control a python gui via http api\">stackoverflow.com/questions/55432430/&hellip;</a> will give you much of what you need to do this."}], "answers": [{"comments": [{"owner": {"reputation": 19260, "user_id": 1727392, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/KP9Ia.jpg?s=128&g=1", "display_name": "duhaime", "link": "https://stackoverflow.com/users/1727392/duhaime"}, "edited": false, "score": 0, "creation_date": 1560979958, "post_id": 56676029, "comment_id": 99919450, "body": "Hmm, seems interesting but I&#39;m not connecting the wires. What am I missing? <a href=\"https://gist.github.com/duhaime/cc3afe4b9e4c2abcb3c1cd736ca5c511\" rel=\"nofollow noreferrer\">gist.github.com/duhaime/cc3afe4b9e4c2abcb3c1cd736ca5c511</a>"}, {"owner": {"reputation": 863, "user_id": 8786138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1af71491abb17b899e003a31f710415?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav Sharma", "link": "https://stackoverflow.com/users/8786138/vaibhav-sharma"}, "reply_to_user": {"reputation": 19260, "user_id": 1727392, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/KP9Ia.jpg?s=128&g=1", "display_name": "duhaime", "link": "https://stackoverflow.com/users/1727392/duhaime"}, "edited": false, "score": 0, "creation_date": 1560980099, "post_id": 56676029, "comment_id": 99919488, "body": "The last two lines, you need to append x to threads and then start it"}, {"owner": {"reputation": 19260, "user_id": 1727392, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/KP9Ia.jpg?s=128&g=1", "display_name": "duhaime", "link": "https://stackoverflow.com/users/1727392/duhaime"}, "edited": false, "score": 0, "creation_date": 1560982044, "post_id": 56676029, "comment_id": 99920057, "body": "Can you perhaps provide an example? This seems not to work: <a href=\"https://gist.github.com/duhaime/cc3afe4b9e4c2abcb3c1cd736ca5c511\" rel=\"nofollow noreferrer\">gist.github.com/duhaime/cc3afe4b9e4c2abcb3c1cd736ca5c511</a>"}], "tags": [], "owner": {"reputation": 863, "user_id": 8786138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1af71491abb17b899e003a31f710415?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav Sharma", "link": "https://stackoverflow.com/users/8786138/vaibhav-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1560979274, "creation_date": 1560979274, "answer_id": 56676029, "question_id": 56675959, "link": "https://stackoverflow.com/questions/56675959/run-while-loop-as-background-process-in-flask-app/56676029#56676029", "title": "Run while loop as background process in Flask app", "body": "<p>You can try running it in a thread</p>\n\n<pre><code>import threading\nx = threading.Thread(target=thread_function, args=(index,))\nthreads.append(x)\nx.start()\n</code></pre>\n\n<p>for the thread function, define your while loop in it</p>\n"}, {"tags": [], "owner": {"reputation": 333, "user_id": 9722265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BB29N.png?s=128&g=1", "display_name": "pypalms", "link": "https://stackoverflow.com/users/9722265/pypalms"}, "is_accepted": false, "score": 0, "last_activity_date": 1560979337, "creation_date": 1560979337, "answer_id": 56676036, "question_id": 56675959, "link": "https://stackoverflow.com/questions/56675959/run-while-loop-as-background-process-in-flask-app/56676036#56676036", "title": "Run while loop as background process in Flask app", "body": "<p>Try looking into something like BackgroundScheduler. It runs tasks in the background as separate threads without stalling the flask listener.</p>\n\n<pre><code>from apscheduler.schedulers.background import BackgroundScheduler\n...\n...\ndef readlines():\n  l = sys.stdin.readline()\n  if 'end_frame' in l:\n    frames = [frame] + frames\n    frame = []\n  elif l.rstrip('\\n'):\n    frame.append(l.rstrip('\\n'))\n\nwith app.app_context():\n    scheduler = BackgroundScheduler()\n    scheduler.add_job(readlines, 'interval', seconds=10)\n    scheduler.start()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19260, "user_id": 1727392, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/KP9Ia.jpg?s=128&g=1", "display_name": "duhaime", "link": "https://stackoverflow.com/users/1727392/duhaime"}, "is_accepted": true, "score": 0, "last_activity_date": 1561037088, "creation_date": 1561037088, "answer_id": 56687008, "question_id": 56675959, "link": "https://stackoverflow.com/questions/56675959/run-while-loop-as-background-process-in-flask-app/56687008#56687008", "title": "Run while loop as background process in Flask app", "body": "<p>I ended up doing the following:</p>\n\n<p>I have a little file <code>publisher.py</code> that reads from a port on a given host (though it could just as well read from sys.stdin using the code above) in a while loop. When it composes a <code>frame</code>, it publishes that frame to a redis datastore.</p>\n\n<p>Then, inside my Flask route listener <code>/frame</code>, I just ping the redis data store and then <code>jsonify</code> the result. In that way my publisher and server work together to provide data to the client as it comes in...</p>\n\n<p><strong>publisher.py</strong>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import sys, socket, redis, json\n\n# config\nstream = {'host': '127.0.0.1', 'port': 6000} # streaming data host / port\nr = redis.Redis(host='127.0.0.1', port=6379) # redis instance host / port\n\n# consume data from a host+port and publish to redis on localhost\nclient = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nclient.connect((socket.gethostbyname(stream['host']), stream['port'])) # host, port\n\n# consume data\nframe = [] # initialize the container obj that will hold all frame data\nwhile True:\n  data = client.recv(1024).decode('utf8')\n  for l in data.split('\\n'):\n    if 'end_frame' in l:\n      d = {i.split(':')[0]: i.split(':')[1] for i in frame if ':' in i}\n      r.set('frame', json.dumps(d))\n      frame = []\n      print(' * published frame', d.get('frame_number', ''))\n    elif l.rstrip('\\n'):\n      frame.append(l.rstrip('\\n'))\n</code></pre>\n\n<p><strong>server.py</strong>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from flask import Flask, jsonify\nimport redis, sys, os, json\n\n# app\napp = Flask(__name__, static_url_path='')\n\n# redis\nr = redis.Redis(host='127.0.0.1', port=6379) # redis instance host / port\n\n# route listeners\n@app.route('/api/frame')\ndef get_frame():\n  frame = json.loads(r.get('frame').decode('utf8'))\n  return jsonify(frame)\n\nif __name__ == '__main__':\n  app.run(host='0.0.0.0', port=5050)\n</code></pre>\n"}], "owner": {"reputation": 19260, "user_id": 1727392, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/KP9Ia.jpg?s=128&g=1", "display_name": "duhaime", "link": "https://stackoverflow.com/users/1727392/duhaime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1189, "favorite_count": 0, "accepted_answer_id": 56687008, "answer_count": 3, "score": 0, "last_activity_date": 1561037088, "creation_date": 1560979022, "question_id": 56675959, "link": "https://stackoverflow.com/questions/56675959/run-while-loop-as-background-process-in-flask-app", "title": "Run while loop as background process in Flask app", "body": "<p>I'm looking to run a web server that reads a stream on <code>sys.stdin</code>. That reading needs to happen continuously, e.g. in a while loop.</p>\n\n<p>However, I'm also looking to run a Flask server that listens for requests to <code>/data</code> and sends the last bit of data read from <code>sys.stdin</code> to the requesting agent.</p>\n\n<p>So far I've found that my while loop is halting the execution of my app, which makes absolute sense. Here's my setup:</p>\n\n<pre><code>from flask import Flask, jsonify\nimport sys\n\n# state\nframes = []\nframe = []\n\nwhile True:\n  l = sys.stdin.readline()\n  if 'end_frame' in l:\n    frames = [frame] + frames\n    frame = []\n  elif l.rstrip('\\n'):\n    frame.append(l.rstrip('\\n'))\n\n# app\napp = Flask(__name__, static_url_path='')\n\n@app.route('/frames')\ndef get_frames():\n  return jsonify(frames)\n\napp.run(host='0.0.0.0', port=5050)\n</code></pre>\n\n<p>Is there a way to run that <code>while</code> loop as a background process so as to free up the flask route listeners? Any suggestions would be helpful!</p>\n"}, {"tags": ["python", "machine-learning", "artificial-intelligence", "pytorch"], "comments": [{"owner": {"reputation": 493, "user_id": 7984359, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xgVqq.png?s=128&g=1", "display_name": "thefifthjack005", "link": "https://stackoverflow.com/users/7984359/thefifthjack005"}, "edited": false, "score": 1, "creation_date": 1561022693, "post_id": 56675943, "comment_id": 99931493, "body": "10  suggests number of filters"}], "answers": [{"comments": [{"owner": {"reputation": 26154, "user_id": 5884955, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/J55wI.jpg?s=128&g=1", "display_name": "prosti", "link": "https://stackoverflow.com/users/5884955/prosti"}, "edited": false, "score": 0, "creation_date": 1561043757, "post_id": 56685627, "comment_id": 99943600, "body": "You are pointing on Conv3d rather than on Conv2d form the quest."}], "tags": [], "owner": {"reputation": 1401, "user_id": 598513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e4987226c3be3b081257ba7bfa9dc7?s=128&d=identicon&r=PG", "display_name": "Clemens Tolboom", "link": "https://stackoverflow.com/users/598513/clemens-tolboom"}, "is_accepted": false, "score": 1, "last_activity_date": 1561053726, "last_edit_date": 1561053726, "creation_date": 1561032343, "answer_id": 56685627, "question_id": 56675943, "link": "https://stackoverflow.com/questions/56675943/meaning-of-parameters-in-torch-nn-conv2d/56685627#56685627", "title": "Meaning of parameters in torch.nn.conv2d", "body": "<p>Checking the docs <a href=\"https://pytorch.org/docs/stable/nn.html#torch.nn.Conv2d\" rel=\"nofollow noreferrer\">https://pytorch.org/docs/stable/nn.html#torch.nn.Conv2d</a> you have 3 in_channels and 10 out_channels so these 10 out_channels are @thefifthjack005 filters also known as features.</p>\n"}, {"comments": [{"owner": {"reputation": 730, "user_id": 9815708, "user_type": "registered", "profile_image": "https://graph.facebook.com/872534512905210/picture?type=large", "display_name": "Marine Galantin", "link": "https://stackoverflow.com/users/9815708/marine-galantin"}, "edited": false, "score": 1, "creation_date": 1577436208, "post_id": 56685813, "comment_id": 105169165, "body": "thank you prosti for the answer. It is the only place where I found something even a little relevant to the topic. Moreover, you proved everything and you are really precise, so cheers. I have a quick question, why don&#39;t we define the filters ? One writes the size of the filter, and how many output filters one wants, but how are they define ? I saw during lectures that there exists different versions of filters (blurring, up lines, horizontal lines etc...) so how does pytorch chose which one to use ?"}, {"owner": {"reputation": 26154, "user_id": 5884955, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/J55wI.jpg?s=128&g=1", "display_name": "prosti", "link": "https://stackoverflow.com/users/5884955/prosti"}, "reply_to_user": {"reputation": 730, "user_id": 9815708, "user_type": "registered", "profile_image": "https://graph.facebook.com/872534512905210/picture?type=large", "display_name": "Marine Galantin", "link": "https://stackoverflow.com/users/9815708/marine-galantin"}, "edited": false, "score": 0, "creation_date": 1578072100, "post_id": 56685813, "comment_id": 105331709, "body": "Ah, filters are the freedom. They are set at random and learned during the learning process @MarineGalantin."}], "tags": [], "owner": {"reputation": 26154, "user_id": 5884955, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/J55wI.jpg?s=128&g=1", "display_name": "prosti", "link": "https://stackoverflow.com/users/5884955/prosti"}, "is_accepted": false, "score": 36, "last_activity_date": 1561422275, "last_edit_date": 1561422275, "creation_date": 1561033017, "answer_id": 56685813, "question_id": 56675943, "link": "https://stackoverflow.com/questions/56675943/meaning-of-parameters-in-torch-nn-conv2d/56685813#56685813", "title": "Meaning of parameters in torch.nn.conv2d", "body": "<p><a href=\"https://pytorch.org/docs/stable/nn.html#conv2d\" rel=\"noreferrer\">Here</a> is what you may find </p>\n\n<blockquote>\n  <p>torch.nn.Conv2d(in_channels, out_channels, kernel_size, stride=1, padding=0, dilation=1, groups=1, bias=True, padding_mode='zeros')</p>\n</blockquote>\n\n<p>Parameters</p>\n\n<ul>\n<li>in_channels (int) \u2013 Number of channels in the input image</li>\n<li>out_channels (int) \u2013 Number of channels produced by the convolution</li>\n<li>kernel_size (int or tuple) \u2013 Size of the convolving kernel</li>\n<li>stride (int or tuple, optional) \u2013 Stride of the convolution. (Default: 1)</li>\n<li>padding (int or tuple, optional) \u2013 Zero-padding added to both sides of the input (Default: 0)</li>\n<li>padding_mode (string, optional) \u2013 zeros</li>\n<li>dilation (int or tuple, optional) \u2013 Spacing between kernel elements. (Default: 1)</li>\n<li>groups (int, optional) \u2013 Number of blocked connections from input to output channels. (Default: 1)</li>\n<li>bias (bool, optional) \u2013 If True, adds a learnable bias to the output. (Default: True)</li>\n</ul>\n\n<p>And this <a href=\"https://github.com/vdumoulin/conv_arithmetic/blob/master/README.md\" rel=\"noreferrer\">URL</a> has helpful visualization of the process.</p>\n\n<p>So the <code>in_channels</code> in the beginning is 3 for images with 3 channels (colored images). \nFor images black and white it should be 1.\nSome satellite images should have 4.</p>\n\n<p>The <code>out_channels</code> is what convolution will produce so these are the number of filters.</p>\n\n<p>Let's create an example to \"prove\" that.</p>\n\n<pre><code>import torch\nimport torch.nn as nn\nc = nn.Conv2d(1,3, stride = 1, kernel_size=(4,5))\nprint(c.weight.shape)\nprint(c.weight)\n</code></pre>\n\n<p>Out</p>\n\n<pre><code>torch.Size([3, 1, 4, 5])\nParameter containing:\ntensor([[[[ 0.1571,  0.0723,  0.0900,  0.1573,  0.0537],\n          [-0.1213,  0.0579,  0.0009, -0.1750,  0.1616],\n          [-0.0427,  0.1968,  0.1861, -0.1787, -0.2035],\n          [-0.0796,  0.1741, -0.2231,  0.2020, -0.1762]]],\n\n\n        [[[ 0.1811,  0.0660,  0.1653,  0.0605,  0.0417],\n          [ 0.1885, -0.0440, -0.1638,  0.1429, -0.0606],\n          [-0.1395, -0.1202,  0.0498,  0.0432, -0.1132],\n          [-0.2073,  0.1480, -0.1296, -0.1661, -0.0633]]],\n\n\n        [[[ 0.0435, -0.2017,  0.0676, -0.0711, -0.1972],\n          [ 0.0968, -0.1157,  0.1012,  0.0863, -0.1844],\n          [-0.2080, -0.1355, -0.1842, -0.0017, -0.2123],\n          [-0.1495, -0.2196,  0.1811,  0.1672, -0.1817]]]], requires_grad=True)\n</code></pre>\n\n<p>If we would alter the number of out_channels, </p>\n\n<pre><code>c = nn.Conv2d(1,5, stride = 1, kernel_size=(4,5))\nprint(c.weight.shape) # torch.Size([5, 1, 4, 5])\n</code></pre>\n\n<p>We will get 5 filters each filter 4x5 as this is our kernel size.\nIf we would set 2 channels, (some images may have 2 channels only)</p>\n\n<pre><code>c = nn.Conv2d(2,5, stride = 1, kernel_size=(4,5))\nprint(c.weight.shape) # torch.Size([5, 2, 4, 5])\n</code></pre>\n\n<p>our filter will have 2 channels.</p>\n\n<p>I think they have terms from <a href=\"https://www.deeplearningbook.org/contents/convnets.html\" rel=\"noreferrer\">this book</a> and since in there they haven't called it filters, they haven't used that term. </p>\n\n<p>So you are right; filters are the what conv layer is learning and the number of filters is the number of out channels. They are set random at start.</p>\n\n<p>Number of activations is calculated based on <code>bs</code> and image dimension:</p>\n\n<pre><code>bs=16\nx = torch.randn(bs, 3, 28, 28)\nc = nn.Conv2d(3,10,kernel_size=5,stride=1,padding=2)\nout = c(x)\nprint(out.nelement()) #125440 number of activations\n</code></pre>\n"}], "owner": {"reputation": 192, "user_id": 8133163, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7htNJbFTVwQ/AAAAAAAAAAI/AAAAAAAACxw/48O4ShO4kJk/photo.jpg?sz=128", "display_name": "Shubh Patni", "link": "https://stackoverflow.com/users/8133163/shubh-patni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21148, "favorite_count": 10, "answer_count": 2, "score": 20, "last_activity_date": 1585660072, "creation_date": 1560978938, "last_edit_date": 1585660072, "question_id": 56675943, "link": "https://stackoverflow.com/questions/56675943/meaning-of-parameters-in-torch-nn-conv2d", "title": "Meaning of parameters in torch.nn.conv2d", "body": "<p>In the fastai cutting edge deep learning for coders course lecture 7.</p>\n\n<pre><code> self.conv1 = nn.Conv2d(3,10,kernel_size = 5,stride=1,padding=2)\n</code></pre>\n\n<p>Does 10 there mean the number of filters or the number activations the filter will give? </p>\n"}, {"tags": ["python", "loops", "os.walk"], "answers": [{"tags": [], "owner": {"reputation": 863, "user_id": 8786138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1af71491abb17b899e003a31f710415?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav Sharma", "link": "https://stackoverflow.com/users/8786138/vaibhav-sharma"}, "is_accepted": true, "score": 2, "last_activity_date": 1560978968, "creation_date": 1560978968, "answer_id": 56675951, "question_id": 56675939, "link": "https://stackoverflow.com/questions/56675939/python-for-loop-in-os-walk/56675951#56675951", "title": "python for loop in os.walk()", "body": "<p>because you are initializing i =0 in every iteration</p>\n\n<pre><code>import os\ni = 0 \nfor dir,subdir,files in os.walk(r\"C:\\Users\\adam\\Desktop\\test\"):\n    i = i + 1 \n    print(str(i) + \": files \"+str(len(files)))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 1, "last_activity_date": 1560979157, "creation_date": 1560979157, "answer_id": 56675998, "question_id": 56675939, "link": "https://stackoverflow.com/questions/56675939/python-for-loop-in-os-walk/56675998#56675998", "title": "python for loop in os.walk()", "body": "<p>this is pretty obvious as</p>\n\n<pre><code>i = 0 \ni = i + 1 \n</code></pre>\n\n<p>in a row is equivalent to </p>\n\n<pre><code>i = 1\n</code></pre>\n\n<p>Don't handle your indices yourself. Use <code>enumerate</code> instead, starting at 1, and since you're not using the dir parts, just anonymize them when unpacking.</p>\n\n<pre><code>for i,(_,_,files) in enumerate(os.walk(r\"C:\\Users\\adam\\Desktop\\test\"),1):\n    print(\"{} : files \".format(i,len(files)))\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 8039909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6f4db1a683a85196a56afe2cd2de0df3?s=128&d=identicon&r=PG&f=1", "display_name": "evilcode1", "link": "https://stackoverflow.com/users/8039909/evilcode1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 56675951, "answer_count": 2, "score": -2, "last_activity_date": 1560979157, "creation_date": 1560978925, "question_id": 56675939, "link": "https://stackoverflow.com/questions/56675939/python-for-loop-in-os-walk", "title": "python for loop in os.walk()", "body": "<p>i write this code to get the count of files inside my directory but i need it to count the output lines when it run ... </p>\n\n<pre><code>import os\nfor dir,subdir,files in os.walk(r\"C:\\Users\\adam\\Desktop\\test\"):\n    i = 0 \n    i = i + 1 \n    print(str(i) + \": files \"+str(len(files)))\n</code></pre>\n\n<p>output : </p>\n\n<pre><code>1: files 3\n1: files 0\n1: files 0\n</code></pre>\n\n<p>the line number is does not change it's stay 1 ?? how i can solve it and explain why please i need to understand </p>\n"}, {"tags": ["python", "web-scraping", "scrapy"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11672752, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-02euBh7DroI/AAAAAAAAAAI/AAAAAAAAAQo/7fgy6o4dfYM/photo.jpg?sz=128", "display_name": "Bhushan Pawar", "link": "https://stackoverflow.com/users/11672752/bhushan-pawar"}, "edited": false, "score": 0, "creation_date": 1561983771, "post_id": 56676995, "comment_id": 100223384, "body": "Thank you so much. This worked. Can you suggest any good source where I can learn more about scraping such sites?"}], "tags": [], "owner": {"reputation": 9446, "user_id": 347767, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/013da2590dd9f46e31cb022ec51eb192?s=128&d=identicon&r=PG", "display_name": "gangabass", "link": "https://stackoverflow.com/users/347767/gangabass"}, "is_accepted": true, "score": 0, "last_activity_date": 1560985651, "creation_date": 1560985651, "answer_id": 56676995, "question_id": 56675928, "link": "https://stackoverflow.com/questions/56675928/function-returning-null-when-trying-to-access-table-data/56676995#56676995", "title": "Function returning null when trying to access table data", "body": "<p>The data you're looking for is loaded <strong>dynamically using Javascript</strong> that's why Scrapy can't find it. You can try to use <a href=\"https://github.com/scrapy-plugins/scrapy-splash\" rel=\"nofollow noreferrer\">Scrapy-Splash</a> or parse it by yourself:</p>\n\n<pre><code>import json\n\ndef parse(self, response):\n    table_json = response.xpath('//script[contains(.,  \"var tabsSectorDataTable =\")]/text()').re_first(r'var tabsSectorDataTable =(.+?\\]);')\n    table = json.loads(table_json)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11672752, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-02euBh7DroI/AAAAAAAAAAI/AAAAAAAAAQo/7fgy6o4dfYM/photo.jpg?sz=128", "display_name": "Bhushan Pawar", "link": "https://stackoverflow.com/users/11672752/bhushan-pawar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 56676995, "answer_count": 1, "score": 0, "last_activity_date": 1561984007, "creation_date": 1560978852, "last_edit_date": 1561984007, "question_id": 56675928, "link": "https://stackoverflow.com/questions/56675928/function-returning-null-when-trying-to-access-table-data", "title": "Function returning null when trying to access table data", "body": "<p>I am trying to scrape a website for some data using Scrapy. I found the table using css but its returning only thread data. </p>\n\n<p>Tried using xpath too but that too didn't help. Actually, the code doesn't have tbody tag because of it the function returns null.</p>\n\n<p>I am trying to scrap this <a href=\"https://www.blackrock.com/us/individual/products/227548/blackrock-gnmainstitutional-class-fund\" rel=\"nofollow noreferrer\">website</a></p>\n\n<pre><code>def parse(self, response):\n        table = response.css('div.iw_component div.mobile-collapse div.fund-component div#exposureTabs div.component-tabs-panel div.table-chart-container div.fund-component table#tabsSectorDataTable')\n        print(table.extract())\n</code></pre>\n\n<p>I want to access data in the selected table which is present in tbody tag.</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 333, "user_id": 9722265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BB29N.png?s=128&g=1", "display_name": "pypalms", "link": "https://stackoverflow.com/users/9722265/pypalms"}, "edited": false, "score": 0, "creation_date": 1560979095, "post_id": 56675922, "comment_id": 99919152, "body": "Might want to look into python&#39;s set(). This is for unique values. Also it might make more sense with what you are doing to use a dictionary so a key is unique, but may have a list of values for each key."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1560979473, "post_id": 56675922, "comment_id": 99919292, "body": "Welcome to SO. This isn&#39;t a Tutorial or discussion forum. Please take the time to read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and the other links found on that page."}], "answers": [{"tags": [], "owner": {"reputation": 59, "user_id": 11433762, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qUwoylfJwUM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rem8ihC-IcLEKu90G3lWNhzgY3yiA/mo/photo.jpg?sz=128", "display_name": "Halfow", "link": "https://stackoverflow.com/users/11433762/halfow"}, "is_accepted": false, "score": 0, "last_activity_date": 1560985295, "creation_date": 1560985295, "answer_id": 56676943, "question_id": 56675922, "link": "https://stackoverflow.com/questions/56675922/deleting-doubled-measuring-points-and-adding-missing-one/56676943#56676943", "title": "deleting doubled measuring points and adding missing one", "body": "<p>Drafted a rough solution, there is probably a loot that could be done. But it works.</p>\n\n<pre><code>time = [1, 2, 3, 3, 5, 7, 7, 10]\nmeas = [10,20,30,40,50,60,70,80]\n\n# Remove duplicate time and sort result\nt = list(set(time))\nt.sort()\n\n# Remove duplicate objects (keep 1st instance)\nfor n, e in enumerate(t):\n    while e != time[n]:\n        del time[n]\n        del meas[n]\n\n# Check that it works\nprint(time)\nprint(meas)\n\n# Create list in the wanted format\nm = 0  # keep track of meas index\nmeas_padded = []  # new list for result, could be done using the meas list but im to lazy right now.\nfor n in range(0, time[-1]):\n    if n + 1 == time[m]:\n        meas_padded.append(meas[m])\n        m += 1\n    else:\n        meas_padded.append('--')\n\n# As the list is padded to time[-1] size, I will not create the time series as it will map towars meas_padded index n+1\n# Added padding and string repr since it was neat for debug.\nprint([str(n+1).zfill(2) for n, m in enumerate(meas_padded)])\nprint([str(m) for  m in meas_padded])\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[1, 2, 3, 5, 7, 10]\n[10, 20, 30, 50, 60, 80]\n['01', '02', '03', '04', '05', '06', '07', '08', '09', '10']\n['10', '20', '30', '--', '50', '--', '60', '--', '--', '80']\n</code></pre>\n\n<p>Hope it helps you out :)</p>\n\n<p>to pad <code>meas</code> and not have the need to create a new one some trickery with reverse_range can be used</p>\n"}, {"tags": [], "owner": {"reputation": 1035, "user_id": 5825760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u1You.png?s=128&g=1", "display_name": "B.Gees", "link": "https://stackoverflow.com/users/5825760/b-gees"}, "is_accepted": false, "score": 0, "last_activity_date": 1560985415, "creation_date": 1560985415, "answer_id": 56676970, "question_id": 56675922, "link": "https://stackoverflow.com/questions/56675922/deleting-doubled-measuring-points-and-adding-missing-one/56676970#56676970", "title": "deleting doubled measuring points and adding missing one", "body": "<p>You can use <code>numpy</code> which can be useful to speed up your script:</p>\n\n<pre><code>import numpy as np\n\ndef get_correction(time, meas):\n    \"\"\"\n    Deleting doubled measuring points and adding missing one\n\n    :param np.array time: 1D array which contains times\n    :param np.array time: 1D array with measurements for corresponding times\n    :return: a tuple of corrected arrays (`time`,`meas`)\n    \"\"\"\n    if type(t) == list: time = np.array(time)\n    if type(m) == list: meas = np.array(meas)\n    t_, index = np.unique(t, return_index=True) # Determine unique times and their indexes\n    measures = np.zeros(np.max(t)) ; measures[:] = np.nan # Create empty measures array\n    measures[t_ - 1] = m[index] # Insert correspondant values in measures array\n    time = np.arange(np.max(t)) + 1 # Create correpondant times\n    return (time, measures)\n</code></pre>\n\n<p>If you test this function:</p>\n\n<pre><code>time = [1, 2, 3, 3, 5, 7, 7, 10]\nmeas = [10,20,30,40,50,60,70,80]\n\nget_correction(time, meas)\n</code></pre>\n\n<p>You obtain:</p>\n\n<pre><code>(array([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10]),\n array([10., 20., 30., nan, 50., nan, 60., nan, nan, 80.]))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11672722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c7fc5fc0154f544148244d9a5776d47?s=128&d=identicon&r=PG&f=1", "display_name": "Siskins", "link": "https://stackoverflow.com/users/11672722/siskins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1560985415, "creation_date": 1560978832, "question_id": 56675922, "link": "https://stackoverflow.com/questions/56675922/deleting-doubled-measuring-points-and-adding-missing-one", "title": "deleting doubled measuring points and adding missing one", "body": "<p>I want to delete doubled time values including their assigned measurement values and fill the missing time values inbetween.</p>\n\n<p>I'm working with some simulation data. Basically I have lists in the example shown below. The doubled time elements shall be deleted and with it the assigned measurement value. Then the missing time elements shall be added. The missing measurement shall be replaced by a \"-\". Later I will probably interpolate.</p>\n\n<p>I tried a couple of things by just iterating through the list and appending and inserting but it doesn't seem to work. Also I couldn't find a similar problem with a solution.</p>\n\n<p><strong>Thank you!</strong> </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>time = [1, 2, 3, 3, 5, 7, 7, 10]\nmeas = [10,20,30,40,50,60,70,80]\n</code></pre>\n\n<p>The expected lists would look like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>time = [1,2,3,4,5,6,7,8,9,10]\nmeas = [10 20 30 - 50 - 60 - - 80]\n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy", "matplotlib", "scikit-learn"], "comments": [{"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 1, "creation_date": 1560978957, "post_id": 56675839, "comment_id": 99919106, "body": "try printing <code>km.cluster_centers_</code> and you will get your answer. It is a numpy array of shape (3,1). It has no second index. It only has <code>km.cluster_centers_[:, 0]</code> but no <code>km.cluster_centers_[:, 1]</code>"}, {"owner": {"reputation": 29479, "user_id": 1356000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef54c2101a4c23ea2441ce2b346ffb75?s=128&d=identicon&r=PG", "display_name": "Diziet Asahi", "link": "https://stackoverflow.com/users/1356000/diziet-asahi"}, "edited": false, "score": 0, "creation_date": 1560979286, "post_id": 56675839, "comment_id": 99919215, "body": "In other words, since your input data is 1-dimentional, the centroids are also 1-dimensional, you therefore cannot plot an x and a y"}], "answers": [{"tags": [], "owner": {"reputation": 778, "user_id": 11666391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP4xeWwe3UY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdzodOndRLVZTTsHfxE4wYA-10kGw/mo/photo.jpg?sz=128", "display_name": "S\u0131dd\u0131k A&#231;\u0131l", "link": "https://stackoverflow.com/users/11666391/s%c4%b1dd%c4%b1k-a%c3%a7%c4%b1l"}, "is_accepted": true, "score": 0, "last_activity_date": 1560979734, "creation_date": 1560979734, "answer_id": 56676113, "question_id": 56675839, "link": "https://stackoverflow.com/questions/56675839/kmeans-scatter-plot-with-centroids-on-timeseries-data-frame/56676113#56676113", "title": "KMeans scatter plot with centroids on timeseries data frame", "body": "<p>The cause for error is that the shape is [3, 1]. </p>\n\n<p>You have 3 cluster centroids in one dimension. It does not make sense to cluster-plot first centroid and second centroid as an (x,y) pair. Because all of the centroids in this plot are on the Y axis (because delta is on Y). So you must plot (0, KMC1), (0, KMC2), (0, KMC3).</p>\n\n<p><a href=\"https://colab.research.google.com/drive/1Y5sV29MdC5PLpDlc2FxADrnLuSYQv0KW\" rel=\"nofollow noreferrer\">Exemplary Visualization</a></p>\n"}], "owner": {"reputation": 4502, "user_id": 4614675, "user_type": "registered", "accept_rate": 54, "profile_image": "https://lh5.googleusercontent.com/-wENEinPp2ls/AAAAAAAAAAI/AAAAAAAAABw/oJ3bOTpW9ek/photo.jpg?sz=128", "display_name": "Giordano", "link": "https://stackoverflow.com/users/4614675/giordano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 56676113, "answer_count": 1, "score": -1, "last_activity_date": 1560979734, "creation_date": 1560978391, "question_id": 56675839, "link": "https://stackoverflow.com/questions/56675839/kmeans-scatter-plot-with-centroids-on-timeseries-data-frame", "title": "KMeans scatter plot with centroids on timeseries data frame", "body": "<p>I'm working on a pandas timeseries dataframe which contains 2 columns: timestamp and delta. <br>\nAn example is the following one: <br></p>\n\n<pre><code>&gt;&gt; df.head() \n   timestamp             delta \n0  2016-07-30 00:05:00     0.0 \n1  2016-07-30 00:10:00  4265.0 \n2  2016-07-30 00:15:00  4568.0 \n3  2016-07-30 00:20:00  5857.0 \n4  2016-07-30 00:25:00  3847.0 \n</code></pre>\n\n<p>timestamp contains strings and delta float64. <br>\nI'm trying to run KMeans (sklearn) and plot (using matplotlib) a scatter plot with points and relative centroids.</p>\n\n<p>My code is the follow:</p>\n\n<pre><code>delta = df['delta'].values\ndelta = delta.reshape(-1, 1)\ntimestamp = df['timestamp'].values\n\nkm = KMeans(n_clusters=3, random_state=0)\nkm.fit(delta)\nkm.predict(delta)\n\nplt.scatter(timestamp, delta, c=km.labels_)\nplt.scatter(km.cluster_centers_[:, 0], km.cluster_centers_[:, 1], c='red', marker='x')\nplt.show()\n</code></pre>\n\n<p>This code returns the following error:</p>\n\n<blockquote>\n  <blockquote>\n    <p>IndexError: index 1 is out of bounds for axis 1 with size 1</p>\n  </blockquote>\n</blockquote>\n\n<p>On this line:</p>\n\n<pre><code>plt.scatter(km.cluster_centers_[:, 0], km.cluster_centers_[:, 1], c='red', marker='x')\n</code></pre>\n\n<p>If I run the code without line with error, scatter plot is correctly plotted. <br>\nI've tried to convert timestamp into float64 but without success.</p>\n\n<p>Can anyone help me on this problem please?</p>\n"}, {"tags": ["python", "json", "pandas", "data-analysis"], "comments": [{"owner": {"reputation": 1103, "user_id": 4195814, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/26959ff5b81fb0f2a757dfdd76ca840e?s=128&d=identicon&r=PG&f=1", "display_name": "linamnt", "link": "https://stackoverflow.com/users/4195814/linamnt"}, "edited": false, "score": 0, "creation_date": 1560979705, "post_id": 56675819, "comment_id": 99919372, "body": "I think if you do table[&#39;h_timezone&#39;].loc[i], you are actually setting the values in your for loop to a copy of the data. You can put &#39;h_timezone&#39; inside your loc[] as follows: <code>table.loc[i, &#39;h_timezone&#39;] = data.loc[i][&#39;header&#39;][&#39;timeZone&#39;]</code>"}, {"owner": {"reputation": 21, "user_id": 11649889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3T5Y2dWm7Uc/AAAAAAAAAAI/AAAAAAAAA6o/qWL3vJ8JhL8/photo.jpg?sz=128", "display_name": "tjrdata", "link": "https://stackoverflow.com/users/11649889/tjrdata"}, "reply_to_user": {"reputation": 1103, "user_id": 4195814, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/26959ff5b81fb0f2a757dfdd76ca840e?s=128&d=identicon&r=PG&f=1", "display_name": "linamnt", "link": "https://stackoverflow.com/users/4195814/linamnt"}, "edited": false, "score": 0, "creation_date": 1560988093, "post_id": 56675819, "comment_id": 99921351, "body": "@linamnt Thanks for the correction! It worked. Thanks for the explanation too. I understand the process now."}], "owner": {"reputation": 21, "user_id": 11649889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3T5Y2dWm7Uc/AAAAAAAAAAI/AAAAAAAAA6o/qWL3vJ8JhL8/photo.jpg?sz=128", "display_name": "tjrdata", "link": "https://stackoverflow.com/users/11649889/tjrdata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1560980785, "creation_date": 1560978290, "last_edit_date": 1560980785, "question_id": 56675819, "link": "https://stackoverflow.com/questions/56675819/why-is-my-data-frame-empty-after-assigning-values-through-a-for-loop", "title": "Why is my Data frame empty after assigning values through a for loop?", "body": "<p>I am trying to create a dataframe with the attributes I need from a json data object through for loop. But when I try to print the dataframe contents its showing empty even the loop ran successfully. </p>\n\n<p>What I find weird is when I try to print </p>\n\n<p><code>table['h_timezone'].head()</code></p>\n\n<p>output is :</p>\n\n<pre><code>PST\nPST\nCST\n</code></pre>\n\n<p>But when I try to print table's content. it says empty data frame or 0 rows and 2 columns.</p>\n\n<p>Btw, my file has 10,000 json objects/transactions and I am following the assignments process for 40 columns in the same for loop below. </p>\n\n<p>Can anybody please help me with this issue? What am I exactly doing wrong in the code? Also, is there any efficient process to do the job?</p>\n\n<pre><code>import pandas as pd\n\nimport json \n\ndata = pd.read_json(open('sample.json'), lines=True)\n\ncolumns = ['h_timezone','h_apptimestamp']\n\ntable= pd.DataFrame(columns = columns)\n\nfor i in range(0,len(data)):\n\n    table['h_timezone'].loc[i] = data.loc[i]['header']['timeZone']\n\n    table['h_apptimestamp'].loc[i]=data.loc[i]['header']['applicationTimestamp']\n\ntable.count()\ntable.head()\n</code></pre>\n\n<p>expected output</p>\n\n<pre><code>h_timezone   h_apptimestamp\nPST          09-09-2018 01:20:20\nCST          10-09-2018 01:30:30\n</code></pre>\n\n<p>my output is coming as below:</p>\n\n<pre><code>table.count()\nh_timezone      0\nh_apptimestamp  0 \n\ntable.head()\nh_timezone  h_apptimestamp\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "typing"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1560978261, "post_id": 56675772, "comment_id": 99918855, "body": "not with <code>=</code> since it will bind the old name with the right hand part. You need a class and a setter/property method"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 1, "creation_date": 1560978371, "post_id": 56675772, "comment_id": 99918897, "body": "To me, this sounds like something to handle via input validation when the object is created, rather than a check after the fact. If <code>300</code> is an invalid number for your <code>ColorValue</code> object, you shouldn&#39;t be allowing it to be created in the first place"}, {"owner": {"reputation": 2677, "user_id": 5049813, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/24c885a2c774f7375807e048793cffa3?s=128&d=identicon&r=PG&f=1", "display_name": "Pro Q", "link": "https://stackoverflow.com/users/5049813/pro-q"}, "edited": false, "score": 0, "creation_date": 1560978761, "post_id": 56675772, "comment_id": 99919047, "body": "I know that the class should not allow that to happen, but that&#39;s only caught during runtime (right?). I would like this type of error to be caught during typechecking."}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1560978931, "post_id": 56675772, "comment_id": 99919091, "body": "Are you asking about <code>isinstance</code>? Otherwise I don\u2019t understand what you are trying to do."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1560979043, "post_id": 56675772, "comment_id": 99919136, "body": "Are you using a third-party type checker? Python itself does not do any type checking, regardless of whether or not you added type annotations. <code>check=lambda value: 0 &lt;= value &lt;= 255</code> seems to imply a runtime check, though..."}, {"owner": {"reputation": 2677, "user_id": 5049813, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/24c885a2c774f7375807e048793cffa3?s=128&d=identicon&r=PG&f=1", "display_name": "Pro Q", "link": "https://stackoverflow.com/users/5049813/pro-q"}, "edited": false, "score": 0, "creation_date": 1560980962, "post_id": 56675772, "comment_id": 99919763, "body": "Yes, I want this functionality from a third-party type checker"}], "answers": [{"comments": [{"owner": {"reputation": 2677, "user_id": 5049813, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/24c885a2c774f7375807e048793cffa3?s=128&d=identicon&r=PG&f=1", "display_name": "Pro Q", "link": "https://stackoverflow.com/users/5049813/pro-q"}, "edited": false, "score": 0, "creation_date": 1561058752, "post_id": 56690505, "comment_id": 99950564, "body": "This is close to what I want, but not quite, because I can still do <code>def another_valid_foo(): return Restricted(300)</code> and that won&#39;t raise any warning until I actually run the function."}, {"owner": {"reputation": 78, "user_id": 7061784, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Zg32NkorrH8/AAAAAAAAAAI/AAAAAAAADTQ/1st39YXT6qw/photo.jpg?sz=128", "display_name": "Robert Guggenberger", "link": "https://stackoverflow.com/users/7061784/robert-guggenberger"}, "reply_to_user": {"reputation": 2677, "user_id": 5049813, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/24c885a2c774f7375807e048793cffa3?s=128&d=identicon&r=PG&f=1", "display_name": "Pro Q", "link": "https://stackoverflow.com/users/5049813/pro-q"}, "edited": false, "score": 1, "creation_date": 1561064716, "post_id": 56690505, "comment_id": 99952929, "body": "Consider that <code>check</code> could be an arbitrarily complex function, and that <code>Restricted(300)</code> is essentially a placeholder for an arbitrary class instantiation. So we are searching for a code parser, which evaluates all class instantiations in the code, where all (or more complicated, some) of the  arguments are literals. I find it challenging to see how this does not imply a run-time check. So, what might solve your question is automatic unit test generation, e.g. with auger."}, {"owner": {"reputation": 78, "user_id": 7061784, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Zg32NkorrH8/AAAAAAAAAAI/AAAAAAAADTQ/1st39YXT6qw/photo.jpg?sz=128", "display_name": "Robert Guggenberger", "link": "https://stackoverflow.com/users/7061784/robert-guggenberger"}, "reply_to_user": {"reputation": 2677, "user_id": 5049813, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/24c885a2c774f7375807e048793cffa3?s=128&d=identicon&r=PG&f=1", "display_name": "Pro Q", "link": "https://stackoverflow.com/users/5049813/pro-q"}, "edited": false, "score": 1, "creation_date": 1561108995, "post_id": 56690505, "comment_id": 99964864, "body": "&quot;Literal types indicate that some expression has literally a specific value&quot; <a href=\"https://www.python.org/dev/peps/pep-0586/\" rel=\"nofollow noreferrer\">python.org/dev/peps/pep-0586</a>, apparently annotations like <code>Literal[1, 2, 3]</code> will then allow such static checking. Looking forward!"}], "tags": [], "owner": {"reputation": 78, "user_id": 7061784, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Zg32NkorrH8/AAAAAAAAAAI/AAAAAAAADTQ/1st39YXT6qw/photo.jpg?sz=128", "display_name": "Robert Guggenberger", "link": "https://stackoverflow.com/users/7061784/robert-guggenberger"}, "is_accepted": false, "score": 0, "last_activity_date": 1561363649, "last_edit_date": 1561363649, "creation_date": 1561048945, "answer_id": 56690505, "question_id": 56675772, "link": "https://stackoverflow.com/questions/56675772/how-to-add-checks-for-a-particular-type/56690505#56690505", "title": "How to add checks for a particular type", "body": "<p>Consider the following module called \"restrict.py\" </p>\n\n<pre><code>def restrict(cls, cache=[]):  \n    cache.append(cls)\n    return cls\n\ndef static_check(file, restrict):\n    import re        \n    cache = restrict.__defaults__[0]   \n    with open(file) as f:\n        lines = f.readlines()\n    for cls in cache:\n        c = cls.__name__\n        for lix, l in enumerate(lines):\n            m = re.findall(f\"{c}[^=)]*\\)\", l)\n            for m in m:\n                try:\n                    print(\"Attempting\", m)\n                    strargs = m.split(c)[1]\n                    cmd = f\"cls{strargs}\"\n                    eval(cmd)\n                    print(m, \"in line\", lix, \"evaluated\")\n                except ValueError as e:\n                    print(m, \"in line\", lix,\"threw\",e)\n\n</code></pre>\n\n<p>and another module called main.py, which you want to test</p>\n\n<pre><code>from restrict import restrict, static_check\n\n@restrict\nclass Restricted():\n    def __new__(cls, x:int=None) -&gt; int:\n        if x is None:\n            raise ValueError(\"Unspecified initialization\")\n        elif x &lt; 0:\n            raise(ValueError(\"&lt;0\"))\n        elif x &gt; 255:\n            raise(ValueError(\"&gt;255\"))\n        return int(x)\n\ndef output_foo(x):\n    Restricted(-1)\n    return Restricted(999)\n\nRestricted(1)\n\nif __name__ == \"__main__\":\n    static_check(__file__, restrict)   \n</code></pre>\n\n<p>running <code>python main.py</code> from the terminal will print you</p>\n\n<pre><code>Attempting Restricted()\nRestricted() in line 5 threw Unspecified initialization\nAttempting Restricted(-1)\nRestricted(-1) in line 16 threw &lt;0\nAttempting Restricted(999)\nRestricted(999) in line 17 threw &gt;255\nAttempting Restricted(1)\nRestricted(1) in line 19 evaluated\n</code></pre>\n\n<p>Not protecting the static_check with the <code>if __name__ == \"__main__\"</code> clause would allow you to check at import time.</p>\n\n<h1>OLD ANSWER</h1>\n\n<p>You could check at parse time, e.g. assume you have a file named <code>restricted.py</code> with the following code: </p>\n\n<pre><code>class Restricted():\n\n    def __new__(cls, x):\n        import sys\n        lineno = sys._getframe().f_back.f_lineno\n        if x &lt; 0:\n            print(f\"Value {x} is too low in line {lineno}\")\n        if x &gt; 255:\n            print(f\"Value {x} is too high in line {lineno}\")\n        return int(x)\n\ndef invalid_foo(x:Restricted=Restricted(300)):\n    return x\n\ndef valid_foo(x:Restricted=Restricted(222)):\n    return x\n</code></pre>\n\n<p>which prints <code>Value 300 is too high in line 13</code> when you would import the module / parse the code, e.g. from bash with <code>python restricted.py</code> in addition to <code>mypy restricted.py</code>. </p>\n\n<p>Apparently, neither mypy nor pytype alone printed the message, so it seems they actually do not import the module, and instead parse the file directly. One could fuse type checking and importing in bash with <code>tpcheck() { mypy $1  &amp;&amp;  python $1; }</code> and then you could call <code>tpcheck restricted.py</code> to do both.</p>\n\n<p>Just to note: NewType does not actually create a new class. as the _doc__ says: \"At runtime, NewType(name, tp) returns a dummy function that simply returns its argument\". </p>\n\n<p>An alternative option could be automatic unit test generation, e.g. with <code>auger-python</code>. For example, when we add the following code to the earlier snippet:</p>\n\n<pre><code>def output_foo():\n    return Restricted(999)\n\nif __name__ == '__main__':\n    import auger\n\n    with auger.magic([Restricted]):\n        output_foo()\n</code></pre>\n\n<p>tpcheck also showed me the error in the output_foo, i.e. <code>Value 999 is too high in line 22</code>. Please note that i exhibited a bug with auger, which i had to fix manually (see <a href=\"https://github.com/laffra/auger/issues/23\" rel=\"nofollow noreferrer\">https://github.com/laffra/auger/issues/23</a>). Additionally, mypy complained about a missing import for auger, so i had to redefine <code>tpcheck() { mypy $1 --ignore-missing-imports &amp;&amp;  python3 $1; }</code>.</p>\n\n<p>But in the end, this boils down to calling the function, and executing it at run-time. Can't see how you could evade that, but at least you could try to automatize this as much as feasible.</p>\n"}], "owner": {"reputation": 2677, "user_id": 5049813, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/24c885a2c774f7375807e048793cffa3?s=128&d=identicon&r=PG&f=1", "display_name": "Pro Q", "link": "https://stackoverflow.com/users/5049813/pro-q"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1561363649, "creation_date": 1560978047, "last_edit_date": 1561154604, "question_id": 56675772, "link": "https://stackoverflow.com/questions/56675772/how-to-add-checks-for-a-particular-type", "title": "How to add checks for a particular type", "body": "<p>Often times I find myself in a situation where my types are extremely similar to base types in Python, but they have some certain property that I'd like the typecheckers to know about.</p>\n\n<p>For example, I may have <code>ColorValue = NewType('ColorValue', int)</code> where a <code>ColorValue</code> should have a range between 0 and 255.</p>\n\n<p>Then, what I'd like to have happen is for the typechecker to let me know if I'm not actually matching the type specifications. For example, something like:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>red: ColorValue = 300 # value of 300 is not compatible with type ColorValue\n</code></pre>\n\n<p>Ideally, I'd like to be able to set something like this up with</p>\n\n<pre><code>ColorValue = NewType('ColorValue', int, check=lambda value: 0 &lt;= value &lt;= 255)\n</code></pre>\n\n<p>Is there any way to have type checkers check for specific properties?</p>\n\n<p>EDIT:</p>\n\n<p>To be clear, <strong>I'd like this checking to be done by a type checker like mypy or pytype, and I don't want the error to only occur during runtime.</strong></p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 3, "last_activity_date": 1560978470, "last_edit_date": 1560978470, "creation_date": 1560978105, "answer_id": 56675786, "question_id": 56675762, "link": "https://stackoverflow.com/questions/56675762/picking-values-from-columns/56675786#56675786", "title": "picking values from columns", "body": "<h3><a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.lookup.html\" rel=\"nofollow noreferrer\"><code>lookup</code></a></h3>\n\n<pre><code>df.lookup(df.index, df.c)\n\narray([10,  9,  2,  3,  6,  5,  4,  7,  8,  9])\n</code></pre>\n\n<hr>\n\n<h3>Comprehension</h3>\n\n<p>But why when you have <code>lookup</code>?</p>\n\n<pre><code>[df.at[t] for t in df.c.items()]\n\n[10, 9, 2, 3, 6, 5, 4, 7, 8, 9]\n</code></pre>\n\n<h3>Bonus Hack</h3>\n\n<p>Not intended for actual use</p>\n\n<pre><code>[*map(df.at.__getitem__, zip(df.index, df.c))]\n\n[10, 9, 2, 3, 6, 5, 4, 7, 8, 9]\n</code></pre>\n\n<p>Because <code>df.get_value</code> is deprecated</p>\n\n<pre><code>[*map(df.get_value, df.index, df.c)]\n</code></pre>\n\n<blockquote>\n  <p>FutureWarning: <code>get_value</code> is deprecated and will be removed in a future release. Please use <code>.at[]</code> or <code>.iat[]</code> accessors instead</p>\n</blockquote>\n\n<pre><code>[10, 9, 2, 3, 6, 5, 4, 7, 8, 9]\n</code></pre>\n"}], "owner": {"reputation": 7661, "user_id": 1291563, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FKQxr.jpg?s=128&g=1", "display_name": "RoyalTS", "link": "https://stackoverflow.com/users/1291563/royalts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "closed_date": 1560978131, "accepted_answer_id": 56675786, "answer_count": 1, "score": 1, "last_activity_date": 1560978470, "creation_date": 1560978016, "question_id": 56675762, "link": "https://stackoverflow.com/questions/56675762/picking-values-from-columns", "closed_reason": "Duplicate", "title": "picking values from columns", "body": "<p>I have a pandas DataFrame with values in a number of columns, make it two for simplicity, and a column of column names I want to use to pick values from the other columns:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\nnp.random.seed(1337)\ndf = pd.DataFrame(\n    {\"a\": np.arange(10), \"b\": 10 - np.arange(10), \"c\": np.random.choice([\"a\", \"b\"], 10)}\n)\n</code></pre>\n\n<p>which gives</p>\n\n<pre><code>&gt; df['c']\n\n0    b\n1    b\n2    a\n3    a\n4    b\n5    b\n6    b\n7    a\n8    a\n9    a\nName: c, dtype: object\n</code></pre>\n\n<p>That is, I want the first and second elements to be picked from column <code>b</code>, the third from <code>a</code> and so on.</p>\n\n<p>This works:</p>\n\n<pre><code>def pick_vals_from_cols(df, col_selector):\n    condlist = np.row_stack(col_selector.map(lambda x: x == df.columns))\n    values = np.select(condlist.transpose(), df.values.transpose())\n    return values\n\n&gt; pick_vals_from_cols(df, df[\"c\"])\n\narray([10, 9, 2, 3, 6, 5, 4, 7, 8, 9], dtype=object)\n</code></pre>\n\n<p>But it just feels so fragile and clunky. Is there a better way to do this?</p>\n"}, {"tags": ["python", "scrapy"], "comments": [{"owner": {"reputation": 9446, "user_id": 347767, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/013da2590dd9f46e31cb022ec51eb192?s=128&d=identicon&r=PG", "display_name": "gangabass", "link": "https://stackoverflow.com/users/347767/gangabass"}, "edited": false, "score": 1, "creation_date": 1560986696, "post_id": 56675752, "comment_id": 99921050, "body": "You need to login on this page <code>https:&#47;&#47;www.starcitygames.com&#47;login</code> and use <b>correct</b> form element names like <code>ex_usr_email</code> etc"}], "answers": [{"tags": [], "owner": {"reputation": 191, "user_id": 7242883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a880b9572228da433a4df5f3b31bd8?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/7242883/tim"}, "is_accepted": true, "score": 0, "last_activity_date": 1561645924, "creation_date": 1561645924, "answer_id": 56793329, "question_id": 56675752, "link": "https://stackoverflow.com/questions/56675752/struggling-with-logging-in-to-website-using-scrapy/56793329#56793329", "title": "Struggling with Logging in to website using scrapy", "body": "<p>You need to change the names for the username and password to match what is in the HTML code on the website, which is ex_usr_email and ex_usr_pass then you need to use include the line <code>formcss = '#existing_users form'</code>.  Hope this helps.</p>\n\n<pre><code>import scrapy\nfrom ..items import NameItem\n\nclass LoginSpider(scrapy.Spider):\n    name = \"LoginSpider\"\n    start_urls = [\"http://www.starcitygames.com/buylist/\"]\n\n    def parse(self, response):\n\n        return scrapy.FormRequest.from_response(\n        response,\n        formcss='#existing_users form',\n        formdata={'ex_usr_email': 'email123@example.com', 'ex_usr_pass': 'password123'},\n        callback=self.after_login\n        )\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11648394"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 56793329, "answer_count": 1, "score": 0, "last_activity_date": 1561646505, "creation_date": 1560977947, "last_edit_date": 1561646505, "question_id": 56675752, "link": "https://stackoverflow.com/questions/56675752/struggling-with-logging-in-to-website-using-scrapy", "title": "Struggling with Logging in to website using scrapy", "body": "<p>Trying login to a website using scrapy in order to scrape data but it is not logging in and I cannot figure out why. I used the example code posted on this website, <a href=\"https://doc.scrapy.org/en/latest/topics/request-response.html#using-formrequest-from-response-to-simulate-a-user-login\" rel=\"nofollow noreferrer\">https://doc.scrapy.org/en/latest/topics/request-response.html#using-formrequest-from-response-to-simulate-a-user-login</a>, so I do not know exactly what is going wrong.</p>\n\n<pre><code># Import from other python files and scrapy files and the needed csv file containing all URLs/proxies/ua\nimport csv\nimport scrapy\n#from scrapy.spiders import Spider\nfrom scrapy_splash import SplashRequest\nfrom ..items import NameItem\nfrom scrapy.http import FormRequest\n#from ..items import GameItem\n#from scrapy.http import FormRequest\n##########################          SPALSHSPIDER.PY OVERVIEW      #####################################################\n# process the csv file so the url + ip address + useragent pairs are the same as defined in the file\n# returns a list of dictionaries, example:\n# [ {'url': 'http://www.starcitygames.com/catalog/category/Rivals%20of%20Ixalan',\n#    'ip': 'http://204.152.114.244:8050',\n#    'ua': \"Mozilla/5.0 (BlackBerry; U; BlackBerry 9320; en-GB) AppleWebKit/534.11\"},\n#    ...\n# ]\n# plus python file also scrapes all URLs returning needed info and goes to all apges associated with URL by clicking next button\n\n# Function to read csv file that contains URLs that are paried with proxies and user agents\ndef process_csv(csv_file):\n    # Initialize data\n    data = []\n    # Initialize reader\n    reader = csv.reader(csv_file)\n    next(reader)\n\n    # While inside csv file and not at end of csv file\n    for fields in reader:\n\n        # Set URL\n        if fields[0] != \"\":\n            url = fields[0]\n        else:\n            continue # skip the whole row if the url column is empty\n        #Set proxy and pair with correct URL\n        if fields[1] != \"\":\n            ip = \"http://\" + fields[1] + \":8050\" # adding http and port because this is the needed scheme\n        # Set user agent and pair with correct URL\n        if fields[2] != \"\":\n            useragent = fields[2]\n        # Put all three together\n        data.append({\"url\": url, \"ip\": ip, \"ua\": useragent})\n    # Return URL paried with ua and proxy\n    return data\n\n\n\nclass LoginSpider(scrapy.Spider):\n    # Name of Spider\n    name = 'LoginSpider'\n    # getting all the url + ip address + useragent pairs then request them\n\n    def start_requests(self):\n        # get the file path of the csv file that contains the pairs from the settings.py\n        with open(self.settings[\"PROXY_CSV_FILE\"], mode=\"r\") as csv_file:\n            # requests is a list of dictionaries like this -&gt; {url: str, ua: str, ip: str}\n\n            requests = process_csv(csv_file)\n            for req in requests:\n                # Return needed url with set delay of 3 seconds\n                yield SplashRequest(url=req[\"url\"], callback=self.parse, args={\"wait\": 3},\n                    # Pair with user agent specified in csv file\n                    headers={\"User-Agent\": req[\"ua\"]},\n                    # Sets splash_url to whatever the current proxy that goes with current URL  is instead of actual splash url\n                    splash_url = req[\"ip\"],\n                    )\n\n\n    def parse(self, response):\n        yield scrapy.FormRequest.from_response(\n                response,\n                formdata={'username': 'username', 'password': 'password'},\n                callback=self.after_login\n                )\n    def after_login(self, response):\n        # check login succeed before going on\n        if b\"authentication failed\" in response.body:\n            self.logger.error(\"Login failed\")\n\n        else:\n            self.logger.error(\"Login succeeded!\")\n            item = NameItem()\n            item[\"Name\"] = response.css(\"div.column_data::text\").get()\n            item[\"Email\"] = response.css(\"div#display_email.editable_display::text\").get()\n            yield item\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "types", "python-3.6", "python-3.7"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1560978247, "post_id": 56675743, "comment_id": 99918851, "body": "@chepner crap, missed the inheritance from <code>type</code>. I still maintain that the singleton pattern is not really necessary :)"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1560978290, "post_id": 56675743, "comment_id": 99918861, "body": "The <code>else:</code> is your code is a syntax error."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1560979316, "post_id": 56675743, "comment_id": 99919229, "body": "@juanpa.arrivillaga I agree with that :) Use a module instead :)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6199840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f90eb8ec95ed86caa2abed8c4867daa?s=128&d=identicon&r=PG&f=1", "display_name": "Jitzal Inteligent", "link": "https://stackoverflow.com/users/6199840/jitzal-inteligent"}, "edited": false, "score": 0, "creation_date": 1560978392, "post_id": 56675803, "comment_id": 99918911, "body": "So when i create a new instance of the A object, isn&#39;t <code>__init__</code> the first method to be called? Is it <code>__call__</code>?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 1, "user_id": 6199840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f90eb8ec95ed86caa2abed8c4867daa?s=128&d=identicon&r=PG&f=1", "display_name": "Jitzal Inteligent", "link": "https://stackoverflow.com/users/6199840/jitzal-inteligent"}, "edited": false, "score": 0, "creation_date": 1560978595, "post_id": 56675803, "comment_id": 99918991, "body": "No; I was clarifying that as you commented. As a rule, instance methods of a metaclass become the <i>class</i> methods of its instances. <code>A()</code> becomes <code>Singeton.__call__(A)</code>, but <code>Singeton.__init__</code> is only called when the class is first defined."}, {"owner": {"reputation": 1, "user_id": 6199840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f90eb8ec95ed86caa2abed8c4867daa?s=128&d=identicon&r=PG&f=1", "display_name": "Jitzal Inteligent", "link": "https://stackoverflow.com/users/6199840/jitzal-inteligent"}, "edited": false, "score": 0, "creation_date": 1560978985, "post_id": 56675803, "comment_id": 99919113, "body": "So the <code>super().__init__(*args, **kwargs)</code> actually creates the A object, right? And it is necessary only for the first instance of the A class."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 1, "user_id": 6199840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f90eb8ec95ed86caa2abed8c4867daa?s=128&d=identicon&r=PG&f=1", "display_name": "Jitzal Inteligent", "link": "https://stackoverflow.com/users/6199840/jitzal-inteligent"}, "edited": false, "score": 0, "creation_date": 1560979082, "post_id": 56675803, "comment_id": 99919144, "body": "No, that call only initializes the class attribute <code>A.__instance</code> to <code>None</code>. It&#39;s the call to <code>super().__call__</code> that creates an instance of <code>A</code> to assign to the class attribute when necessary."}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 1, "last_activity_date": 1560979816, "last_edit_date": 1560979816, "creation_date": 1560978183, "answer_id": 56675803, "question_id": 56675743, "link": "https://stackoverflow.com/questions/56675743/how-does-get-manipulated-a-singleton/56675803#56675803", "title": "How does get manipulated a Singleton?", "body": "<p>You overrode <code>__call__</code>, so <code>A.__new__</code> isn't called if <code>self.__instance</code> is not <code>None</code>. No call to <code>A.__new__</code>, no implicit call to <code>A.__init__</code>.</p>\n\n<p>The metaclass <code>__init__</code> method does <em>not</em> become the <code>__init__</code> method of <code>A</code>; it gets called when the <em><code>class</code></em> statement is executed. So in this case, after</p>\n\n<pre><code>class A(metaclass=Singleton):\n    pass\n</code></pre>\n\n<p><code>A.__instance</code> would exist, initialized to <code>None</code> by <code>Singleton.__init__</code>.</p>\n\n<p>Given your definition of <code>A</code>, <code>A()</code> evaluates as <code>Singleton.__call__(A)</code>, with <code>A</code> being bound to <code>self</code>. If <code>A.__instance</code> is still <code>None</code>,\nthen <code>type.__call__(A)</code> is called, which invokes <code>A.__new__</code>, creating a new instance.</p>\n\n<hr>\n\n<p>The use of a module that juanpa.arrivillaga and I allude to replaces a class like</p>\n\n<pre><code>class A(metaclass=Singleton):\n    x = 3\n    def __init__(self, y):\n        self.y = 9\n\n    def combine(self):\n        return self.x + self.y\n</code></pre>\n\n<p>with a module <code>A.py</code> that looks like</p>\n\n<pre><code>x = 3\n\ndef init(val):\n    global y\n    y = val\n\ndef combine():\n    return x + y\n</code></pre>\n\n<p>Instance variables and methods become top-level functions and module globals. There's no real difference between a class attribute and an instance attribute if there is only one instance. <code>A.init</code> has to be called directly. If it doesn't take any arguments, you can omit it and put the code at the top level where it gets called upon import. (There is no parameterized form of import where <code>import A(3)</code> would import <code>A.py</code> and pass 3 as an argument to the top-level code.)</p>\n"}], "owner": {"reputation": 1, "user_id": 6199840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f90eb8ec95ed86caa2abed8c4867daa?s=128&d=identicon&r=PG&f=1", "display_name": "Jitzal Inteligent", "link": "https://stackoverflow.com/users/6199840/jitzal-inteligent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560979816, "creation_date": 1560977910, "last_edit_date": 1560979265, "question_id": 56675743, "link": "https://stackoverflow.com/questions/56675743/how-does-get-manipulated-a-singleton", "title": "How does get manipulated a Singleton?", "body": "<p>For defining a Singleton in Python (for example), we can define it as</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Singleton(type):\n    def __init__(self, *args, **kwargs):\n        self.__instance = None\n        super().__init__(*args, **kwargs)\n    def __call__(self, *args, **kwargs):\n        if self.__instance is None:\n            self.__instance = super().__call__(*args, **kwargs)\n            return self.__instance\n        else:\n            return self.__instance\n\nclass A(object, metaclass=Singleton):\n    //code\n</code></pre>\n\n<p>My question is, if we create two instances of class A, doesn't Singleton's <code>__init__</code> method get called twice? How does it manage to call the <code>__call__</code> method instead of <code>__init__</code>?</p>\n"}, {"tags": ["python", "mysql", "google-cloud-platform", "sqlalchemy", "google-cloud-sql"], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 8267536, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a0b2f52d9658d5dfabd6b0175fb8baae?s=128&d=identicon&r=PG&f=1", "display_name": "Blank", "link": "https://stackoverflow.com/users/8267536/blank"}, "edited": false, "score": 0, "creation_date": 1560986071, "post_id": 56676870, "comment_id": 99920929, "body": "Thank you for your respond! It worked, but I wasn&#39;t able to connect. I specified host  with my public IP from Cloud SQL and port (3306) from documentation and it gave me another error 2003, &quot;Can&#39;t connect to MySQL server on &#39;35.226.112.xxx&#39; (timed out)&quot;. Does this problem relate to my previous configuration? Do you know how to fix it?"}, {"owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "reply_to_user": {"reputation": 125, "user_id": 8267536, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a0b2f52d9658d5dfabd6b0175fb8baae?s=128&d=identicon&r=PG&f=1", "display_name": "Blank", "link": "https://stackoverflow.com/users/8267536/blank"}, "edited": false, "score": 0, "creation_date": 1560986329, "post_id": 56676870, "comment_id": 99920978, "body": "Did you add your IP address in the Cloud SQL Set Connectivity dialog?"}, {"owner": {"reputation": 125, "user_id": 8267536, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a0b2f52d9658d5dfabd6b0175fb8baae?s=128&d=identicon&r=PG&f=1", "display_name": "Blank", "link": "https://stackoverflow.com/users/8267536/blank"}, "edited": false, "score": 0, "creation_date": 1560986687, "post_id": 56676870, "comment_id": 99921047, "body": "I&#39;m afraid not. I&#39;m very disoriented in Google utilities. Do I need to? I though that I don&#39;t need to add my computer IP somewhere. I would like this little program, which I&#39;m creating to run on all computers.          <b>EDIT</b>: Meaning I set my public IP address from Cloud SQL as host. I meant my computer IP that I need to setup somewhere..."}, {"owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "reply_to_user": {"reputation": 125, "user_id": 8267536, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a0b2f52d9658d5dfabd6b0175fb8baae?s=128&d=identicon&r=PG&f=1", "display_name": "Blank", "link": "https://stackoverflow.com/users/8267536/blank"}, "edited": false, "score": 0, "creation_date": 1560987134, "post_id": 56676870, "comment_id": 99921147, "body": "If you want to connect to Cloud SQL then you either need to enable all networks or just your computer. Otherwise, connection attempts will be blocked. That is why Cloud SQL Proxy exists."}, {"owner": {"reputation": 125, "user_id": 8267536, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a0b2f52d9658d5dfabd6b0175fb8baae?s=128&d=identicon&r=PG&f=1", "display_name": "Blank", "link": "https://stackoverflow.com/users/8267536/blank"}, "edited": false, "score": 0, "creation_date": 1560987391, "post_id": 56676870, "comment_id": 99921214, "body": "Alright. I wanted just simple connect. Thank you for your answers. I&#39;ll rework it. ^^"}], "tags": [], "owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "is_accepted": true, "score": 2, "last_activity_date": 1560984722, "creation_date": 1560984722, "answer_id": 56676870, "question_id": 56675693, "link": "https://stackoverflow.com/questions/56675693/google-cloud-sql-can-i-directly-access-database-with-sqlalchemy-not-locally/56676870#56676870", "title": "Google Cloud SQL - Can I directly access database with SQLAlchemy - not locally", "body": "<blockquote>\n  <p>Can I directly access database with SQLAlchemy - not locally</p>\n</blockquote>\n\n<p>You are specifying a unix socket <code>/cloudsql/{}</code>. This requires that you set up the Cloud SQL Proxy on your local machine.</p>\n\n<p>To access Cloud SQL directly, you will need to specify the Public IP address for Cloud SQL. In your call to the function <code>sqlalchemy.engine.url.URL</code>, specify the host and port parameters and remove the query parameter.</p>\n"}], "owner": {"reputation": 125, "user_id": 8267536, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a0b2f52d9658d5dfabd6b0175fb8baae?s=128&d=identicon&r=PG&f=1", "display_name": "Blank", "link": "https://stackoverflow.com/users/8267536/blank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 680, "favorite_count": 1, "accepted_answer_id": 56676870, "answer_count": 1, "score": 1, "last_activity_date": 1560987503, "creation_date": 1560977635, "last_edit_date": 1560987503, "question_id": 56675693, "link": "https://stackoverflow.com/questions/56675693/google-cloud-sql-can-i-directly-access-database-with-sqlalchemy-not-locally", "title": "Google Cloud SQL - Can I directly access database with SQLAlchemy - not locally", "body": "<p>I'm trying to directly access Google Cloud SQL and create there table. I want to use as little services as possible (keep it simple), therefore I really don't want to use Cloud SDK whatever. \nI want to use something similar, that I saw <a href=\"https://stackoverflow.com/questions/10763171/can-sqlalchemy-be-used-with-google-cloud-sql\">here</a>. I tried to replicate it, but I ended up with error.</p>\n\n<pre><code>AttributeError: module 'socket' has no attribute 'AF_UNIX'\n</code></pre>\n\n<p>For all this I'm using Python with sqlalchemy &amp; pymysql</p>\n\n<p>I really don't know how to debug it since I'm using it first few hours, but I think that problem could be with URL or environmental variables (app.yamp file, which I created).\nI think that I already have installed all dependencies which I need </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>db_user = os.environ.get(\"db_user\")\ndb_pass = os.environ.get(\"db_pass\")\ndb_name = os.environ.get(\"db_name \")\ncloud_sql_connection_name = os.environ.get(\"cloud_sql_connection_name \")\n\ndb = sqlalchemy.create_engine(\n    # Equivalent URL:\n    # mysql+pymysql://&lt;db_user&gt;:&lt;db_pass&gt;@/&lt;db_name&gt;?unix_socket=/cloudsql/&lt;cloud_sql_instance_name&gt;\n    sqlalchemy.engine.url.URL(\n        drivername='mysql+pymysql',\n        username=db_user,\n        password=db_pass,\n        database=db_name,\n        query={\n            'unix_socket': '/cloudsql/{}'.format(cloud_sql_connection_name)\n        }\n     ),\n     pool_size=5,\n     max_overflow=2,\n     pool_timeout=30,\n     pool_recycle=1800,\n)\n\nwith db.connect() as conn:\n     conn.execute(\n         \"CREATE TABLE IF NOT EXISTS votes \"\n         \"( vote_id SERIAL NOT NULL, time_cast timestamp NOT NULL, \"\n         \"candidate CHAR(6) NOT NULL, PRIMARY KEY (vote_id) );\"\n)\n</code></pre>\n\n<p>I do not use db_user etc. as real values. These are just examples.\nIt should pass successfully and create an table in Google SQL</p>\n"}, {"tags": ["python", "json"], "answers": [{"tags": [], "owner": {"reputation": 6812, "user_id": 7371893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=128&g=1", "display_name": "&#226;\u0144\u014d\u014b\u0177Xmo\u016f\u015c", "link": "https://stackoverflow.com/users/7371893/%c3%a2%c5%84%c5%8d%c5%8b%c5%b7xmo%c5%af%c5%9c"}, "is_accepted": false, "score": 1, "last_activity_date": 1560977839, "creation_date": 1560977839, "answer_id": 56675728, "question_id": 56675692, "link": "https://stackoverflow.com/questions/56675692/printing-dictionary-from-inside-a-list-puts-one-character-on-each-line/56675728#56675728", "title": "Printing dictionary from inside a list puts one character on each line", "body": "<p>Orgs is a result of json.dump which produces a string. So instead of this code:</p>\n\n<pre><code>for org in orgs:\n    print(org)\n</code></pre>\n\n<p>replace it with simply:</p>\n\n<pre><code>#for org in orgs:\nprint(orgs)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 982, "user_id": 1602022, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e36f31b1645542323074d1ffc1bfbfc5?s=128&d=identicon&r=PG", "display_name": "theillien", "link": "https://stackoverflow.com/users/1602022/theillien"}, "edited": false, "score": 0, "creation_date": 1560978826, "post_id": 56675729, "comment_id": 99919061, "body": "Thanks! That was it. I&#39;m not familiar with <code>json.dumps</code> (or most of python for that matter) so that was the concept I was missing."}], "tags": [], "owner": {"reputation": 19276, "user_id": 8591431, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AqHwnjWu2tM/AAAAAAAAAAI/AAAAAAAAFrE/DVc4w4e1pDc/photo.jpg?sz=128", "display_name": "Devesh Kumar Singh", "link": "https://stackoverflow.com/users/8591431/devesh-kumar-singh"}, "is_accepted": true, "score": 4, "last_activity_date": 1560977851, "creation_date": 1560977851, "answer_id": 56675729, "question_id": 56675692, "link": "https://stackoverflow.com/questions/56675692/printing-dictionary-from-inside-a-list-puts-one-character-on-each-line/56675729#56675729", "title": "Printing dictionary from inside a list puts one character on each line", "body": "<p><code>display_all_results</code> is returning a string since you are doing <a href=\"https://docs.python.org/3/library/json.html#json.dumps\" rel=\"nofollow noreferrer\">json.dumps</a> in <code>json.dumps(results, indent=4, sort_keys=True)</code>,  which converts the dictionary to a string (you are getting that dictionary from <code>r.json()</code> in <code>get_json</code> function)</p>\n\n<p>You then end up iterating over the characters of that string in <code>main</code>, and you see one character per line</p>\n\n<p>Instead just return <code>results</code> from <code>display_all_results</code> and the code will work as intended</p>\n\n<pre><code>def display_all_results(url):\n    #results is already a dictionary, just return it\n    results = get_results(url)\n    if results:\n        return results\n</code></pre>\n"}], "owner": {"reputation": 982, "user_id": 1602022, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e36f31b1645542323074d1ffc1bfbfc5?s=128&d=identicon&r=PG", "display_name": "theillien", "link": "https://stackoverflow.com/users/1602022/theillien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 56675729, "answer_count": 2, "score": 2, "last_activity_date": 1560978969, "creation_date": 1560977630, "last_edit_date": 1560978969, "question_id": 56675692, "link": "https://stackoverflow.com/questions/56675692/printing-dictionary-from-inside-a-list-puts-one-character-on-each-line", "title": "Printing dictionary from inside a list puts one character on each line", "body": "<p>Yes, yet another. I can't figure out what the issue is. I'm trying to iterate over a list that is a subsection of JSON output from an API call.</p>\n\n<p>This is the section of JSON that I'm working with:</p>\n\n<pre><code>[\n    {\n        \"created_at\": \"2017-02-22 17:20:29 UTC\",\n        \"description\": \"\",\n        \"id\": 1,\n        \"label\": \"FOO\",\n        \"name\": \"FOO\",\n        \"title\": \"FOO\",\n        \"updated_at\": \"2018-12-04 16:37:09 UTC\"\n    }\n]\n</code></pre>\n\n<p>The code that I'm running that retrieves this and displays it:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!/usr/bin/python\nimport json\nimport sys\ntry:\n    import requests\nexcept ImportError:\n    print \"Please install the python-requests module.\"\n    sys.exit(-1)\n\nSAT_API = 'https://satellite6.example.com/api/v2/'\nUSERNAME = \"admin\"\nPASSWORD = \"password\"\nSSL_VERIFY = False   # Ignore SSL for now\n\ndef get_json(url):\n    # Performs a GET using the passed URL location\n    r = requests.get(url, auth=(USERNAME, PASSWORD), verify=SSL_VERIFY)\n    return r.json()\n\ndef get_results(url):\n    jsn = get_json(url)\n    if jsn.get('error'):\n        print \"Error: \" + jsn['error']['message']\n    else:\n        if jsn.get('results'):\n            return jsn['results']\n        elif 'results' not in jsn:\n            return jsn\n        else:\n            print \"No results found\"\n    return None\n\ndef display_all_results(url):\n    results = get_results(url)\n    if results:\n        return json.dumps(results, indent=4, sort_keys=True)\n\ndef main():\n    orgs = display_all_results(KATELLO_API + \"organizations/\")\n    for org in orgs:\n        print org\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n\n<p>I appear to be missing a concept because when I print <code>org</code> I get each character per line such as</p>\n\n<pre><code>[\n\n\n\n\n{\n\n\n\n\n\n\n\n\"\nc\nr\ne\na\nt\ne\nd\n_\na\nt\n\"\n</code></pre>\n\n<p>It does this through to the final <code>]</code></p>\n\n<p>I've also tried to print <code>org['name']</code> which throws the <code>TypeError: list indices must be integers, not str Python</code> error. This makes me think that <code>org</code> is being seen as a list rather than a dictionary which I thought it would be due to the <code>[{...}]</code> format.</p>\n\n<p>What concept am I missing?</p>\n\n<p><strong>EDIT:</strong> An explanation for why I'm not getting this: I'm working with a script in the <a href=\"https://access.redhat.com/documentation/en-us/red_hat_satellite/6.3/html/api_guide/sect-api_guide-running_queries_using_python\" rel=\"nofollow noreferrer\">Red Hat Satellite API Guide</a> which I'm using to base another script on. I'm basically learning as I go.</p>\n"}, {"tags": ["python", "html", "django"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1560977661, "post_id": 56675676, "comment_id": 99918629, "body": "What&#39;s your question? What happens when you try this?"}, {"owner": {"reputation": 109, "user_id": 11599806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95d5f0fdfb0b13fb95809d8dee61826?s=128&d=identicon&r=PG&f=1", "display_name": "garmars", "link": "https://stackoverflow.com/users/11599806/garmars"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1560977771, "post_id": 56675676, "comment_id": 99918677, "body": "Currently nothing happens, <code>{{ total }}</code> never produces a value."}, {"owner": {"reputation": 109, "user_id": 11599806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95d5f0fdfb0b13fb95809d8dee61826?s=128&d=identicon&r=PG&f=1", "display_name": "garmars", "link": "https://stackoverflow.com/users/11599806/garmars"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1560977972, "post_id": 56675676, "comment_id": 99918752, "body": "@DanielRoseman is it proper practice to have different views handling the data on a single template? Like how I send the data I want in this scenario to <code>presales_total.html</code> to dispaly it on <code>presales.html</code>. Or should I handle all in multiple views but use a singular template. Thanks!"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1560978222, "post_id": 56675676, "comment_id": 99918845, "body": "Not only is it not &quot;proper practice&quot;, but it doesn&#39;t work at all. A URL maps to a single view."}, {"owner": {"reputation": 109, "user_id": 11599806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95d5f0fdfb0b13fb95809d8dee61826?s=128&d=identicon&r=PG&f=1", "display_name": "garmars", "link": "https://stackoverflow.com/users/11599806/garmars"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1560978384, "post_id": 56675676, "comment_id": 99918903, "body": "@DanielRoseman how can I handle the user input fields in my logic without getting an UnboundLocalError since the values are not defined until some user input? My views are mapped to seperate URLs."}, {"owner": {"reputation": 109, "user_id": 11599806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95d5f0fdfb0b13fb95809d8dee61826?s=128&d=identicon&r=PG&f=1", "display_name": "garmars", "link": "https://stackoverflow.com/users/11599806/garmars"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1560980339, "post_id": 56675676, "comment_id": 99919570, "body": "@DanielRoseman in order to dynamically handle the user input fields, should I use Ajax or is there an easier way? Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 11599806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95d5f0fdfb0b13fb95809d8dee61826?s=128&d=identicon&r=PG&f=1", "display_name": "garmars", "link": "https://stackoverflow.com/users/11599806/garmars"}, "edited": false, "score": 0, "creation_date": 1561040699, "post_id": 56678062, "comment_id": 99941738, "body": "thank you for the response, I updated the original post like you asked. Originally, my idea was to have the total be dynamically calculated when the user inputed the necessary values. Is this possible without Ajax? Or should I just use a form action for on submit?"}, {"owner": {"reputation": 99, "user_id": 5248397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e201471682c4ed8528d63df3e259e31?s=128&d=identicon&r=PG&f=1", "display_name": "JDH", "link": "https://stackoverflow.com/users/5248397/jdh"}, "reply_to_user": {"reputation": 109, "user_id": 11599806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95d5f0fdfb0b13fb95809d8dee61826?s=128&d=identicon&r=PG&f=1", "display_name": "garmars", "link": "https://stackoverflow.com/users/11599806/garmars"}, "edited": false, "score": 0, "creation_date": 1561046178, "post_id": 56678062, "comment_id": 99944993, "body": "It&#39;s definitely possible to calculate values dynamically with Javascript. However, if you just want to use standard Django, you pass the POST request to a second view which does your calculation and then returns the user to the first page. I&#39;ve edited my response to include a method of accomplishing that."}, {"owner": {"reputation": 109, "user_id": 11599806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95d5f0fdfb0b13fb95809d8dee61826?s=128&d=identicon&r=PG&f=1", "display_name": "garmars", "link": "https://stackoverflow.com/users/11599806/garmars"}, "edited": false, "score": 0, "creation_date": 1561051900, "post_id": 56678062, "comment_id": 99947751, "body": "ok great, thank you. My only concern is that I have other data being submitted by the form, so can I pass the POST request to the second view while maintaining the data in other fields? Additionally, at the end of the workflow, I need to POST all of the data in the form."}, {"owner": {"reputation": 99, "user_id": 5248397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e201471682c4ed8528d63df3e259e31?s=128&d=identicon&r=PG&f=1", "display_name": "JDH", "link": "https://stackoverflow.com/users/5248397/jdh"}, "reply_to_user": {"reputation": 109, "user_id": 11599806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95d5f0fdfb0b13fb95809d8dee61826?s=128&d=identicon&r=PG&f=1", "display_name": "garmars", "link": "https://stackoverflow.com/users/11599806/garmars"}, "edited": false, "score": 0, "creation_date": 1561074876, "post_id": 56678062, "comment_id": 99955429, "body": "You can store the data from the form in a dictionary and pass it to the session. Then you can repopulate the form when it reloads with those values when the page renders. If you&#39;re just deploying this site for a small user base that will work fine. For a production website capable of scaling to large numbers, you&#39;ll probably want to look into AJAX as you mentioned before. If this is working, would you mind marking the the question answered?"}], "tags": [], "owner": {"reputation": 99, "user_id": 5248397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e201471682c4ed8528d63df3e259e31?s=128&d=identicon&r=PG&f=1", "display_name": "JDH", "link": "https://stackoverflow.com/users/5248397/jdh"}, "is_accepted": true, "score": 0, "last_activity_date": 1561046059, "last_edit_date": 1561046059, "creation_date": 1560996350, "answer_id": 56678062, "question_id": 56675676, "link": "https://stackoverflow.com/questions/56675676/how-to-dynamically-compute-value-in-view-and-display-in-template-django/56678062#56678062", "title": "How to Dynamically Compute Value in View and Display in Template (Django)", "body": "<p>Nothing is happening when you press submit because you haven't wrapped your inputs in a </p>\n\n<pre><code>&lt;form action=\".../presales_total\" method=\"post\"&gt;\n...\n&lt;/form&gt;\n</code></pre>\n\n<p>tag.</p>\n\n<p>You will need to include a csrf token <code>{% csrf_token %}</code>, convert your button type to 'submit', as well as changing your method to POST.</p>\n\n<p>Finally, make sure you convert the hours input with <code>int()</code> so that you are not multiplying a string.</p>\n\n<p>views.py</p>\n\n<pre><code>from django.shortcuts import render, redirect  ## Added 'redirect'\n\ndef presales(request):\n    # my_opportunities = cwObj.get_opportunities()\n    # context = {'my_opportunities': my_opportunities}\n    return render(request, 'sales/presales.html')\n\ndef presales_total(request):\n    if request.method=='POST':  # add this line\n\n        hours = request.POST['hours']   # change to POST\n        engineer_level = request.POST['selected_engineer_level']   # change to post\n        if engineer_level == 'PM':\n            wage = 225\n        elif engineer_level == 'Solutions Technician':\n            wage = 175\n        elif engineer_level == 'Solutions Engineer':\n            wage = 225\n        elif engineer_level == 'Senior Solutions Engineer':\n            wage = 275\n        elif engineer_level == 'Solutions Architect':\n            wage = 275\n        total = wage * int(hours)   # POST request default submissions to string, convert to type int with int()\n\n        request.session['total'] = total ## store the value in session\n        return redirect('/sales/presales') ## send the user back to the first page\n</code></pre>\n\n<p>presales.html</p>\n\n<pre><code>&lt;form action=\"/sales/presales_total\" method=\"post\"&gt;   # add this line\n    {% csrf_token %}   # add this line\n&lt;div class=\"field\"&gt;\n    &lt;div class=\"control\"&gt;\n        &lt;input class=\"input\" name=\"hours\" id=\"hours\" placeholder=\"Hours\"&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;label class=\"label\"&gt;Engineer Level:&lt;/label&gt;\n&lt;div class=\"field\"&gt;\n    &lt;div class=\"select\"&gt;\n        &lt;select name=\"selected_engineer_level\" id=\"selected_engineer_level\"&gt;\n            &lt;option value=\"\"&gt;Engineer Level&lt;/option&gt;\n            &lt;option value=\"PM\"&gt;PM&lt;/option&gt;\n            &lt;option value=\"Solutions Technician\"&gt;Solutions Technician&lt;/option&gt;\n            &lt;option value=\"Solutions Engineer\"&gt;Solutions Engineer&lt;/option&gt;\n            &lt;option value=\"Senior Solutions Engineer\"&gt;Senior Solutions Engineer&lt;/option&gt;\n            &lt;option value=\"Solutions Architect\"&gt;Solutions Architect&lt;/option&gt;\n        &lt;/select&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"field\"&gt;\n&lt;div class=\"control\"&gt;\n    &lt;button class=\"button is-info\" type=\"submit\"&gt;Add Task&lt;/button&gt;   # change to 'submit'\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;span class=\"label is-medium is-pulled-right\"&gt;Total: {{ request.session.total }}&lt;/span&gt;\n&lt;/form&gt;   # add this line ## change the template variable to 'request.session.total\n</code></pre>\n\n<p>Based on your comment, you can also `return redirect(\"sales/presales\") to display the value on the same form. You'll have to store the computed total in a session variable to be able to re-access it. If you edit the question to include that I can provide an example.</p>\n\n<p>Edit: To include displaying the total on first template. </p>\n\n<p>In order to make use of sessions we need to run <code>python manage.py migrate</code> from the command line at the base level of your project folder to initialize the database to store the session information and pass information between views. Once you've done that, you can import the <code>redirect</code> function to </p>\n\n<ul>\n<li>calculate the total</li>\n<li>store it in the session variable 'total'</li>\n<li>send the user back to the presales page</li>\n</ul>\n\n<p>There we can access the session variable with {{ request.session.total }}.</p>\n\n<p>It's not the fanciest solution, but it works.</p>\n"}], "owner": {"reputation": 109, "user_id": 11599806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95d5f0fdfb0b13fb95809d8dee61826?s=128&d=identicon&r=PG&f=1", "display_name": "garmars", "link": "https://stackoverflow.com/users/11599806/garmars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 549, "favorite_count": 0, "accepted_answer_id": 56678062, "answer_count": 1, "score": 1, "last_activity_date": 1561046059, "creation_date": 1560977550, "last_edit_date": 1561040552, "question_id": 56675676, "link": "https://stackoverflow.com/questions/56675676/how-to-dynamically-compute-value-in-view-and-display-in-template-django", "title": "How to Dynamically Compute Value in View and Display in Template (Django)", "body": "<p>I want to dynamically pull values from two user input fields, a textbox and a dropdown, and then send those values to my view to calculate a new value and display said value in my template. With my current solution, <code>{{ total }}</code> never produces a value when the user inputs <code>hours</code> and an <code>engineer_level</code> is selected. This seems like a fairly simple scenario, but I am new to Django/Python. Any help is greatly appreciated!</p>\n\n<p>Additionally, how might I store a value as a session variable?</p>\n\n<p>views.py</p>\n\n<pre><code>def presales(request):\n    my_opportunities = cwObj.get_opportunities()\n    context = {'my_opportunities': my_opportunities}\n    return render(request, 'website/presales.html', context)\n\ndef presales_total(request):\n    hours = request.GET.get('hours')\n    engineer_level = request.GET.get('selected_engineer_level')\n    if engineer_level == 'PM':\n        wage = 225\n    elif engineer_level == 'Solutions Technician':\n        wage = 175\n    elif engineer_level == 'Solutions Engineer':\n        wage = 225\n    elif engineer_level == 'Senior Solutions Engineer':\n        wage = 275\n    elif engineer_level == 'Solutions Architect':\n        wage = 275\n    total = wage * hours\n\n    context = {'total': total}\n    return render(request, 'website/presales_total.html', context)\n</code></pre>\n\n<p>presales.html</p>\n\n<pre><code>&lt;div class=\"field\"&gt;\n                        &lt;div class=\"control\"&gt;\n                            &lt;input class=\"input\" name=\"hours\" id=\"hours\" placeholder=\"Hours\"&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    &lt;label class=\"label\"&gt;Engineer Level:&lt;/label&gt;\n                    &lt;div class=\"field\"&gt;\n                        &lt;div class=\"select\"&gt;\n                            &lt;select name=\"selected_engineer_level\" id=\"selected_engineer_level\"&gt;\n                                &lt;option value=\"\"&gt;Engineer Level&lt;/option&gt;\n                                &lt;option value=\"PM\"&gt;PM&lt;/option&gt;\n                                &lt;option value=\"Solutions Technician\"&gt;Solutions Technician&lt;/option&gt;\n                                &lt;option value=\"Solutions Engineer\"&gt;Solutions Engineer&lt;/option&gt;\n                                &lt;option value=\"Senior Solutions Engineer\"&gt;Senior Solutions Engineer&lt;/option&gt;\n                                &lt;option value=\"Solutions Architect\"&gt;Solutions Architect&lt;/option&gt;\n                            &lt;/select&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"field\"&gt;\n                    &lt;div class=\"control\"&gt;\n                        &lt;button class=\"button is-info\" type=\"button\"&gt;Add Task&lt;/button&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;span class=\"label is-medium is-pulled-right\"&gt;Total: {{ total }}&lt;/span&gt;\n</code></pre>\n\n<p>presales_total.html</p>\n\n<pre><code>Total:\n&lt;span&gt;{{ total }}&lt;/span&gt;\n</code></pre>\n"}, {"tags": ["python", "html", "flask"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 2, "creation_date": 1560977572, "post_id": 56675646, "comment_id": 99918588, "body": "This is really unclear. Are you trying to access the <code>&#47;api</code> route in a browser? If you are - you&#39;ve explicitly defined that route to only accept POST requests (from your AJAX); trying the route in a browser is a GET request, which you&#39;ve excluded. No fix is needed."}, {"owner": {"reputation": 1160, "user_id": 11542188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6274585f76bff6b24e744a25dfa4f30?s=128&d=identicon&r=PG&f=1", "display_name": "Masoud", "link": "https://stackoverflow.com/users/11542188/masoud"}, "edited": false, "score": 0, "creation_date": 1560977779, "post_id": 56675646, "comment_id": 99918681, "body": "for /api decorator, use <code>methods=[&#39;GET&#39;, &#39;POST&#39;]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1560977922, "post_id": 56675689, "comment_id": 99918731, "body": "Allowing GET requests would work for a browser too, but I have a feeling that the plain JSON response might not be what they expected :)"}], "tags": [], "owner": {"reputation": 333, "user_id": 9722265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BB29N.png?s=128&g=1", "display_name": "pypalms", "link": "https://stackoverflow.com/users/9722265/pypalms"}, "is_accepted": true, "score": 2, "last_activity_date": 1560977607, "creation_date": 1560977607, "answer_id": 56675689, "question_id": 56675646, "link": "https://stackoverflow.com/questions/56675646/flask-how-to-make-html-page-show-up/56675689#56675689", "title": "Flask how to make html page show up?", "body": "<p>By adding <code>/api</code> you are only making a GET request and that is all that is defined:</p>\n\n<pre><code>@app2.route('/api', methods=['POST'])\ndef api():\n    input_data = request.json\n    output_data = model_api(input_data)\n    response = jsonify(output_data)\n    return response\n</code></pre>\n\n<p>If you want the information available for testing, you can just add the GET method like so:</p>\n\n<pre><code>@app2.route('/api', methods=['GET', 'POST'])\n</code></pre>\n\n<p>However, I think you may want to read up on HTML request methods to see what is the most appropriate type for what you are making the endpoint do.</p>\n\n<p>I'm guessing the tutorial information is expecting a POST for the api, which is common. A simple example of a POST request can be done from most commandline with curl:</p>\n\n<pre><code>curl -X POST MYIP/api -d \"{ \\\"myKey\\\": \\\"myValue\\\"}\"\n</code></pre>\n\n<p>This should return whatever response that is given by the api method. </p>\n"}], "owner": {"reputation": 35, "user_id": 11226876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03e2cffda11b846be107fef23eccbeb9?s=128&d=identicon&r=PG&f=1", "display_name": "Malonga", "link": "https://stackoverflow.com/users/11226876/malonga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 56675689, "answer_count": 1, "score": -2, "last_activity_date": 1560982480, "creation_date": 1560977406, "last_edit_date": 1560982480, "question_id": 56675646, "link": "https://stackoverflow.com/questions/56675646/flask-how-to-make-html-page-show-up", "title": "Flask how to make html page show up?", "body": "<p>Okay so I will just have some reading to do. I don't expect anyone to answer anymore. Thanks for everybody that took the effort to reply.</p>\n\n<p>I have followed the following guide to create a simple python app: <a href=\"https://guillaumegenthial.github.io/serving.html\" rel=\"nofollow noreferrer\">https://guillaumegenthial.github.io/serving.html</a> </p>\n\n<p>edit:\nOkay retrospectively I should have read more stuff before asking this question. Let me try to rephrase what I am trying to do.</p>\n\n<p>I am trying to access the below defined html page. There I want to input text in a textbox and then process that text in the api function defined in flask. The results I then want to output inside the html page.\nI tried to find some more ressources on this, but I am new to html and flask and am struggeling. \nAny tips would be appriciated.</p>\n\n<p>My app.py file:</p>\n\n<pre><code>from flask import Flask, request, jsonify\nfrom flask_cors import CORS\nfrom serve import get_model_api\n\napp2 = Flask(__name__)\nCORS(app2) # needed for cross-domain requests, allow everything by default\nmodel_api = get_model_api()\n\n# default route\n@app2.route('/')\ndef index():\n    return \"Index API\"\n\n# HTTP Errors handlers\n@app2.errorhandler(404)\ndef url_error(e):\n    return \"\"\"\n    Wrong URL!\n    &lt;pre&gt;{}&lt;/pre&gt;\"\"\".format(e), 404\n\n@app2.errorhandler(500)\ndef server_error(e):\n    return \"\"\"\n    An internal error occurred: &lt;pre&gt;{}&lt;/pre&gt;\n    See logs for full stacktrace.\n    \"\"\".format(e), 500\n\n# API route\n@app2.route('/api', methods=['POST'])\ndef api():\n    input_data = request.json\n    output_data = model_api(input_data)\n    response = jsonify(output_data)\n    return response\n\nif __name__ == '__main__':\n    app2.run(host='0.0.0.0', port=81, debug=True)\n</code></pre>\n\n<p>The html file:\n\n        \n        \n        \n    </p>\n\n<pre><code>&lt;body&gt;\n    &lt;div class=\"container col-lg-6\"&gt;\n        &lt;div style=\"padding-bottom: 0.5cm\"&gt;\n            &lt;div class=\"card text-center bg-light\"&gt;\n                &lt;div class=\"card-body\" style=\"padding-bottom: 0.2cm\"&gt;\n                    &lt;input class=\"card-title form-control\" type=\"text\" id=\"input\" name=\"input\" placeholder=\"Input sentence\"/&gt;\n                    &lt;button class=\"card-text btn btn-outline-primary\" id=\"btn\"&gt;Find Entities&lt;/button&gt;\n                    &lt;button class=\"card-text btn btn-outline-primary\" id=\"btn2\"&gt;Get random Tweet&lt;/button&gt;\n                    &lt;div class=\"spinner\" id=\"spinner\" style=\"display: none\"&gt;\n                      &lt;div class=\"double-bounce1\"&gt;&lt;/div&gt;\n                      &lt;div class=\"double-bounce2\"&gt;&lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"card-footer bg-white\"&gt;\n                    &lt;pre class=\"card-text api-pre\" style=\"padding-bottom: 0.2cm\"&gt;\n                        &lt;div class=\"item\" id=\"api_input\"&gt;Nur der HSV &lt;/div&gt;\n                        &lt;div class=\"item\" id=\"api_output\"&gt;0 0   B-ORG&lt;/div&gt;\n                    &lt;/pre&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n\n\n&lt;script type=\"text/javascript\"&gt;\n    function api_call(input) {\n        // hide button and make the spinner appear\n        $('#btn').toggle();\n        $('#spinner').toggle();\n\n        $.ajax({\n            url: \"0.0.0.0:81/api\",\n            method: 'POST',\n            contentType: 'application/json',\n            data: JSON.stringify(input),\n\n            success: function( data, textStatus, jQxhr ){\n                // toggle the spinner and button\n                $('#btn').toggle();\n                $('#spinner').toggle();\n\n                // fill the html for answer\n                $('#api_input').html( data.input );\n                $('#api_output').html( data.output );\n\n                $(\"#input\").val(\"\");\n            },\n            error: function( jqXhr, textStatus, errorThrown ){\n                $('#btn').toggle();\n                $('#spinner').toggle();\n\n                $('#api_input').html( \"Sorry, the server is asleep...\" );\n                $('#api_output').html( \"Try again in a moment!\" );\n\n                console.log( errorThrown );\n            },\n            timeout: 3000 // sets timeout to 10 seconds\n        });\n\n    }\n\n    $( document ).ready(function() {\n        // request when clicking on the button\n        $('#btn').click(function() {\n            // get the input data\n            var input = $(\"#input\").val();\n            api_call(input);\n            input = \"\";\n    });\n    });\n\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": ["python", "arangodb", "python-arango"], "comments": [{"owner": {"reputation": 1635, "user_id": 3571016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yTG7n.png?s=128&g=1", "display_name": "camba1", "link": "https://stackoverflow.com/users/3571016/camba1"}, "edited": false, "score": 0, "creation_date": 1560984926, "post_id": 56675625, "comment_id": 99920694, "body": "Since you appear to do a complete replace in your first statement, it appears that you would already have the new document in hand before you start anything in the DB. As such, can&#39;t you check the new document to see if it has any traits and remove it directly rather than updating it first and then removing it? It is a bit more work in the app server but you do not have to worry about  transactions"}, {"owner": {"reputation": 106, "user_id": 7479942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b3ecc37ebfea760b1e251a5eaafdc4a?s=128&d=identicon&r=PG&f=1", "display_name": "Bruce S.", "link": "https://stackoverflow.com/users/7479942/bruce-s"}, "reply_to_user": {"reputation": 1635, "user_id": 3571016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yTG7n.png?s=128&g=1", "display_name": "camba1", "link": "https://stackoverflow.com/users/3571016/camba1"}, "edited": false, "score": 0, "creation_date": 1561041927, "post_id": 56675625, "comment_id": 99942507, "body": "the replace command does update the DB and cannot be followed by a remove in the same query. if I understand you correctly, what you suggest is do a RETURN instead of REPLACE in the first query then in the app server figure out which document requires UPDATE and which requires REMOVE, then run REMOVE and UPDATE in bulk. I would need to keep track of the revision id of each document and filter by them on updates/removals which possibly takes the bulk update option out of the equation. I&#39;ll look into it."}], "owner": {"reputation": 106, "user_id": 7479942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b3ecc37ebfea760b1e251a5eaafdc4a?s=128&d=identicon&r=PG&f=1", "display_name": "Bruce S.", "link": "https://stackoverflow.com/users/7479942/bruce-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560977322, "creation_date": 1560977322, "question_id": 56675625, "link": "https://stackoverflow.com/questions/56675625/transactional-update-and-removal-of-documents-in-arangodb", "title": "Transactional Update and Removal of documents in ArangoDB", "body": "<p>Given the following document structure:</p>\n\n<pre><code>{\n    \"id\": \"123\"\n    \"traits\":\n     {\n        \"abc\": 6.5\n        \"def: 66\n     }\n}\n</code></pre>\n\n<p>I need to iterate over the documents and remove some of the traits based on criteria. \nA document with all traits removed should be removed as well.</p>\n\n<p>Finally, I need to keep track of how many traits and documents were removed.</p>\n\n<p>The update and removal operations should not be blocking and may be executed while these documents are being updated or queried.</p>\n\n<p>I have implemented this in python using python-arango by using an update/replace query to remove traits and a remove query to remove documents without traits by executing the following queries:</p>\n\n<pre><code>FOR some_doc IN some_collection\n    FILTER &lt;some filter&gt;\n    LET updated_doc = ...\n    REPLACE some_doc with updated_doc in some_collection OPTIONS { ignoreRevs: false, ignoreErrors: true }\n</code></pre>\n\n<pre><code>FOR some_doc IN some_collection\n    FILTER LENGTH(some_doc.traits)==0\n    REMOVE some_doc in some_collection OPTIONS { ignoreRevs: false, ignoreErrors: true }\n</code></pre>\n\n<p>I then pull statistics from each returned cursor:</p>\n\n<pre><code>cursor = db.aql.execute(remove_traits_query)\nstats = cursor.statistics()\nmodified = stats['modified']\n</code></pre>\n\n<p>The problem is I need to prevent the possibility that a lookup query initiated during the execution of the above process returns a document with an empty traits object, before the 2nd query (i.e. remove query) is complete.</p>\n\n<p>I tried implementing a transaction then pulling job cursor stats post commit like this:</p>\n\n<pre><code>trx_db = db.begin_transaction(write=collection)\ntraits_removal_job = trx_db.aql.execute(remove_traits_query)\ndoc_deletion_job = trx_db.aql.execute(delete_query)\ntrx_db.commit()\nstats = traits_removal_job.result().statistics()\n</code></pre>\n\n<p>but the cursors of the transaction jobs are empty.\nI suppose that's because ArangoDB executes transaction as a single Javascript function.</p>\n\n<p>I could filter out empty traits on all lookup queries, but it would be better if I could execute the above removal/update operations either in a single query (impossible in ArangoDB per <a href=\"https://www.arangodb.com/docs/stable/aql/operations-update.html\" rel=\"nofollow noreferrer\">documentation</a>), or in a transaction (no execution stats?).</p>\n\n<p>Any suggestions?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "datetime", "max", "grouping"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 7, "creation_date": 1560977202, "post_id": 56675586, "comment_id": 99918459, "body": "Max based on what criteria?  I assume you don&#39;t just want whatever python&#39;s sort does to strings."}], "answers": [{"comments": [{"owner": {"reputation": 42, "user_id": 261506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6798847fdbe0a6c7286770df02f76b20?s=128&d=identicon&r=PG", "display_name": "CoreyH", "link": "https://stackoverflow.com/users/261506/coreyh"}, "edited": false, "score": 0, "creation_date": 1560983748, "post_id": 56675775, "comment_id": 99920449, "body": "Thank you. That got me going in the right direction and it worked out in my specific case."}], "tags": [], "owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "is_accepted": false, "score": 1, "last_activity_date": 1560978056, "creation_date": 1560978056, "answer_id": 56675775, "question_id": 56675586, "link": "https://stackoverflow.com/questions/56675586/finding-max-value-in-a-list-of-list/56675775#56675775", "title": "Finding max value in a list of list", "body": "<p>You would need to get a datetime from your string-date - else <code>'1/5/2018'</code> compares \"bigger\" then <code>'1/10/2018'</code> because <code>'5' &gt; '1'</code> for strings.</p>\n\n<p>You can achieve this like so:</p>\n\n<pre><code>data = [['1','AAA','somestuff','1/5/2018'],\n        ['1','AAA','differentstuff','1/5/2018'] ,\n        ['1','AAA','evendifferent','1/10/2018'] ,\n        ['2','BBB','foo','1/12/2018'] ,\n        ['2','BBB','bar','1/20/2018']]\n\n\n# group by AAA, BBB etc. into lists \nfrom collections import defaultdict\n\ndd = defaultdict(list)\nfor d in data:\n    dd[d[1]].append(d)\n\nimport datetime\n\n# iterate over groups and get the maximum value of each list\nfor k in dd:\n    # for the datetime converted da\n    print(max ( dd[k], key = lambda x: datetime.datetime.strptime(x[-1],\"%d/%M/%Y\")))\n</code></pre>\n\n<p>Documentation:</p>\n\n<ul>\n<li><a href=\"https://docs.python.org/3/library/collections.html#collections.defaultdict\" rel=\"nofollow noreferrer\">defaultdict</a></li>\n<li><a href=\"https://docs.python.org/3/library/functions.html#max\" rel=\"nofollow noreferrer\">max using key</a></li>\n</ul>\n"}], "owner": {"reputation": 42, "user_id": 261506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6798847fdbe0a6c7286770df02f76b20?s=128&d=identicon&r=PG", "display_name": "CoreyH", "link": "https://stackoverflow.com/users/261506/coreyh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1560978144, "creation_date": 1560977123, "last_edit_date": 1560978144, "question_id": 56675586, "link": "https://stackoverflow.com/questions/56675586/finding-max-value-in-a-list-of-list", "title": "Finding max value in a list of list", "body": "<p>I am looking for an elegant way to take a list of lists and find the max value for a subset of elements. It is better explained with a small example. Given the following input:</p>\n\n<pre><code>data = [['1','AAA','somestuff','1/5/2018'],\n        ['1','AAA','differentstuff','1/5/2018'],\n        ['1','AAA','evendifferent','1/10/2018'],\n        ['2','BBB','foo','1/12/2018'],\n        ['2','BBB','bar','1/20/2018']]\n</code></pre>\n\n<p>I would like to return the following list of lists:</p>\n\n<pre><code>[['1','AAA','evendifferent','1/10/2018'], \n    ['2','BBB','bar','1/20/2018']]\n</code></pre>\n\n<p>Output is grouped by index 1 of inner lists and maximum value is based on the date (last item in inner list).</p>\n"}, {"tags": ["python", "html", "function", "ip"], "comments": [{"owner": {"reputation": 1986, "user_id": 7810777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EadKV.jpg?s=128&g=1", "display_name": "Stradivari", "link": "https://stackoverflow.com/users/7810777/stradivari"}, "edited": false, "score": 0, "creation_date": 1560980432, "post_id": 56675582, "comment_id": 99919597, "body": "Can you serve the html with something like flask? Then you could modify the templates in the html: <a href=\"https://stackabuse.com/serving-static-files-with-flask/\" rel=\"nofollow noreferrer\">stackabuse.com/serving-static-files-with-flask</a>"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11598438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7d4ed5a4e64707742543bfa7df013a?s=128&d=identicon&r=PG&f=1", "display_name": "JohnnyCyp", "link": "https://stackoverflow.com/users/11598438/johnnycyp"}, "edited": false, "score": 0, "creation_date": 1561049864, "post_id": 56676192, "comment_id": 99946845, "body": "how i do it with javascript?"}, {"owner": {"reputation": 298, "user_id": 7741840, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/12lI4.jpg?s=128&g=1", "display_name": "mbeiswenger", "link": "https://stackoverflow.com/users/7741840/mbeiswenger"}, "reply_to_user": {"reputation": 21, "user_id": 11598438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7d4ed5a4e64707742543bfa7df013a?s=128&d=identicon&r=PG&f=1", "display_name": "JohnnyCyp", "link": "https://stackoverflow.com/users/11598438/johnnycyp"}, "edited": false, "score": 0, "creation_date": 1561050158, "post_id": 56676192, "comment_id": 99946988, "body": "You can&#39;t interface with your Raspberry Pi while in the browser. You will have to run some sort of server implementation such as Flask which @stradivari suggested."}], "tags": [], "owner": {"reputation": 298, "user_id": 7741840, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/12lI4.jpg?s=128&g=1", "display_name": "mbeiswenger", "link": "https://stackoverflow.com/users/7741840/mbeiswenger"}, "is_accepted": false, "score": 0, "last_activity_date": 1560980154, "creation_date": 1560980154, "answer_id": 56676192, "question_id": 56675582, "link": "https://stackoverflow.com/questions/56675582/how-to-include-a-python-function-in-the-source-of-html-iframe/56676192#56676192", "title": "How to include a python function in the source of html iframe?", "body": "<p>Python unfortunately cannot run natively in the browser so this is not possible, you can only use JavaScript.</p>\n"}], "owner": {"reputation": 21, "user_id": 11598438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7d4ed5a4e64707742543bfa7df013a?s=128&d=identicon&r=PG&f=1", "display_name": "JohnnyCyp", "link": "https://stackoverflow.com/users/11598438/johnnycyp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560980154, "creation_date": 1560977099, "last_edit_date": 1560977827, "question_id": 56675582, "link": "https://stackoverflow.com/questions/56675582/how-to-include-a-python-function-in-the-source-of-html-iframe", "title": "How to include a python function in the source of html iframe?", "body": "<p>how i put a function from python file to the iframe source of html file ?</p>\n\n<p><strong>html file:</strong></p>\n\n<pre><code>&lt;iframe src='http://192.168.1.100/' id=\"gallery\" class=\"iframe\" name='gallery' width=\"100%\" height=\"100%\" frameborder=\"0\" scrolling=\"yes\" seamless=\"seamless\" align=\"left\"&gt;&lt;/iframe&gt;\n</code></pre>\n\n<p>in the src='...' i want to use the function: interact().GetInIP() and the http:// protocol. I have try this:  </p>\n\n<pre><code>&lt;iframe src= 'http://' + interact().GetInIP() + '/'\n</code></pre>\n\n<p>and also with parenthesis \nbut didn't works...</p>\n\n<p>This is my function <strong>GetInIP()</strong> in class: <strong>interact()</strong> which i use to take  automatic the ip address of raspberry pi:</p>\n\n<pre><code>def GetInIP(self):\n  output = check_output([\"ip\",\"addr\",\"show\",\"wlan0\"])\n  inIP = output.split('\\n')[2].strip().split(' ')[1].split('/')[0]\n  return inIP\n</code></pre>\n\n<p>the reason i want to do this is to avoid to change the ip address every time i connect the RPi to another network.</p>\n"}, {"tags": ["python", "kivy"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11420433, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wliBjEryA0g/AAAAAAAAAAI/AAAAAAABHKg/FtX1UqwC0HA/photo.jpg?sz=128", "display_name": "Fernando Foster", "link": "https://stackoverflow.com/users/11420433/fernando-foster"}, "edited": false, "score": 0, "creation_date": 1561159855, "post_id": 56676853, "comment_id": 99985872, "body": "It worked perfectly, can you help me in just one more little thing? I would like to access the text property of Label stats if login is wrong, how to do this?"}, {"owner": {"reputation": 1001, "user_id": 8864220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45ceb09abc594623aa31ac02b014f0a0?s=128&d=identicon&r=PG&f=1", "display_name": "Erik", "link": "https://stackoverflow.com/users/8864220/erik"}, "reply_to_user": {"reputation": 1, "user_id": 11420433, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wliBjEryA0g/AAAAAAAAAAI/AAAAAAABHKg/FtX1UqwC0HA/photo.jpg?sz=128", "display_name": "Fernando Foster", "link": "https://stackoverflow.com/users/11420433/fernando-foster"}, "edited": false, "score": 0, "creation_date": 1561160179, "post_id": 56676853, "comment_id": 99985932, "body": "Great! You can give a Label an <code>id</code> as well, then just use the same <code>.text</code> trick to get the text of a label."}, {"owner": {"reputation": 1, "user_id": 11420433, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wliBjEryA0g/AAAAAAAAAAI/AAAAAAABHKg/FtX1UqwC0HA/photo.jpg?sz=128", "display_name": "Fernando Foster", "link": "https://stackoverflow.com/users/11420433/fernando-foster"}, "edited": false, "score": 0, "creation_date": 1561164587, "post_id": 56676853, "comment_id": 99986564, "body": "Yes, I put an ID on the label, stats.  but I can not reference it, I&#39;ve tried self.stats.text, self.root.stats.text, self.root.current.login.stats.text.  but none worked, I have several problems to understand references between kivy and python rs.  would you have any books on that to indicate?"}, {"owner": {"reputation": 1001, "user_id": 8864220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45ceb09abc594623aa31ac02b014f0a0?s=128&d=identicon&r=PG&f=1", "display_name": "Erik", "link": "https://stackoverflow.com/users/8864220/erik"}, "reply_to_user": {"reputation": 1, "user_id": 11420433, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wliBjEryA0g/AAAAAAAAAAI/AAAAAAABHKg/FtX1UqwC0HA/photo.jpg?sz=128", "display_name": "Fernando Foster", "link": "https://stackoverflow.com/users/11420433/fernando-foster"}, "edited": false, "score": 0, "creation_date": 1561252175, "post_id": 56676853, "comment_id": 100001658, "body": "@FernandoFosterHomohabilis check out my youtube channels, I post kivy tutorials. To access a widget&#39;s <code>id</code>s in python, you need to call <code>your_widget.ids.some_id</code>. In your case, you would give your <code>Login</code> widget an <code>id</code> when you add it to &lt;Root&gt;, then in python write <code>self.root.ids.login_id.ids.label_id</code>"}], "tags": [], "owner": {"reputation": 1001, "user_id": 8864220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45ceb09abc594623aa31ac02b014f0a0?s=128&d=identicon&r=PG&f=1", "display_name": "Erik", "link": "https://stackoverflow.com/users/8864220/erik"}, "is_accepted": false, "score": 0, "last_activity_date": 1560984555, "creation_date": 1560984555, "answer_id": 56676853, "question_id": 56675573, "link": "https://stackoverflow.com/questions/56675573/functional-login-screen-in-kivy/56676853#56676853", "title": "Functional login screen in kivy", "body": "<p>You can reference functions or variables in your <code>App</code> class, which you have named <code>Prg</code>. For example, create a function to test the username and password, then change screens.</p>\n\n<pre><code>class Prg(App):\n    def build(self):\n        return Root()\n\n    def attempt_login(self, username, password):\n        if username == 'Fernando' and password == '123abc':\n            self.root.current = 'inicio'\n</code></pre>\n\n<p>Now you can call the <code>attempt_login</code> function in kv by referencing <code>app.attempt_login</code>, and you can pass the text from your <code>TextInputs</code> by referencing their <code>id</code>s (<code>txt_usr</code> and <code>txt_pass</code> as you have called them) and their <code>.text</code> value.</p>\n\n<pre><code>&lt;Login&gt;:\n    name: 'login'\n    GridLayout:\n        cols:2\n        TextInput:\n            id:txt_usr\n        Label:\n            text:'Senha'\n        TextInput:\n            id:txt_pass\n        Button:\n            text: ' Entrar'\n            on_release:\n                app.attempt_login(txt_usr.text, txt_pass.text)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11420433, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wliBjEryA0g/AAAAAAAAAAI/AAAAAAABHKg/FtX1UqwC0HA/photo.jpg?sz=128", "display_name": "Fernando Foster", "link": "https://stackoverflow.com/users/11420433/fernando-foster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 485, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560984555, "creation_date": 1560977042, "last_edit_date": 1560977394, "question_id": 56675573, "link": "https://stackoverflow.com/questions/56675573/functional-login-screen-in-kivy", "title": "Functional login screen in kivy", "body": "<p>I am creating an App and need to have a login screen, when I put the correct login it goes to another screen.</p>\n\n<p>I'm not getting very well with class references between python and kivy. For example, how to access kivy functions and classes in python and python in kivy</p>\n\n<h2>main.py</h2>\n\n<pre><code>class Root(ScreenManager):\n    pass\n\nclass Login(Screen):\n    def conf(self):\n        if self.tex_usr.txt == self.txt_pass.text:\n            self.inicio.lb_stats.text= 'ok' \n#By pressing the button that is in the kivy file, I would like to go to another one of it. the Call screen\nclass Chamada(Screen):\npass\n\nclass Prg(App):\n    def build(self):\n        return Root()\nPrg().run() \n</code></pre>\n\n<h2>kv file</h2>\n\n<pre><code>&lt;Root&gt;:\n    Login:\n    Inicio:\n    Chamada:        \n&lt;Login&gt;:\n    name: 'login'\n    GridLayout:\n        cols:2\n        TextInput:\n            id:txt_usr\n        Label:\n            text:'Senha'\n        TextInput:\n            id:txt_pass\n        Button:\n            text: ' Entrar'\n            on_release: app.root.current = 'inicio'\n\n&lt;Inicio&gt;:\n    name:'inicio'\n    GridLayout:\n        cols:1\n        Button:\n            text:'Chamada'\n            on_release: app.root.current = 'chamada'\n&lt;Chamada&gt;:\n    name:'chamada'\n    GridLayout:\n        id:grid\n</code></pre>\n\n<p>I would like it to be compared if the user and password are correct, if yes, to the other screen.</p>\n"}, {"tags": ["python", "glob"], "comments": [{"owner": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 0, "creation_date": 1560977734, "post_id": 56675549, "comment_id": 99918664, "body": "<code>glob.glob1()</code> is <a href=\"https://docs.python.org/3.7/library/glob.html\" rel=\"nofollow noreferrer\">undocumented</a> and considered private, so much so that CPython <a href=\"https://bugs.python.org/issue16620\" rel=\"nofollow noreferrer\">changed code</a> that relied on it."}, {"owner": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 0, "creation_date": 1560979087, "post_id": 56675549, "comment_id": 99919148, "body": "If you use <code>pathlib</code> you will get the semantics you want without having to provide the <code>recursive=True</code> argument.  Do <code>from pathlib import Path</code> then <code>my_dir = Path(&#39;home&#47;data&#39;)</code>.  To get a list of Paths <code>list(my_dir.glob(&#39;**&#47;*.txt&#39;))</code>.  List with <code>my_dir</code> prefixes <code>[my_dir &#47; p for p in my_dir.glob(&#39;**&#47;*.txt&#39;)]</code>. Strings instead of Paths <code>[str(my_dir &#47; p) for p in my_dir.glob(&#39;**&#47;*.txt&#39;)]</code>.  Much of the standard library will accept <code>Path</code> objects instead of strings to designate files and directories."}, {"owner": {"reputation": 6799, "user_id": 2635863, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/40a409653d0c3b49ceab04ab22c98c1f?s=128&d=identicon&r=PG", "display_name": "HappyPy", "link": "https://stackoverflow.com/users/2635863/happypy"}, "reply_to_user": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 0, "creation_date": 1560988154, "post_id": 56675549, "comment_id": 99921362, "body": "Thanks @Steven Rumbalski! What I liked about <code>glob1</code> was the ability to return file names (without full path) effortlessly. Is there an equivalent method in <code>pathlib</code> that provides a similar functionality?"}, {"owner": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 1, "creation_date": 1561057992, "post_id": 56675549, "comment_id": 99950246, "body": "<code>[p.name for p in Path(&#39;home&#47;data&#39;).glob(&#39;**&#47;*.txt&#39;)]</code> Note that if the filename is found in subdirectories this is an excellent way to lose that information. Use this only if that&#39;s exactly what you want."}], "owner": {"reputation": 6799, "user_id": 2635863, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/40a409653d0c3b49ceab04ab22c98c1f?s=128&d=identicon&r=PG", "display_name": "HappyPy", "link": "https://stackoverflow.com/users/2635863/happypy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 334, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560979697, "creation_date": 1560976928, "question_id": 56675549, "link": "https://stackoverflow.com/questions/56675549/glob1-returning-empty-list-python", "title": "glob1 returning empty list - python", "body": "<p>I am trying to find files recursively using <code>glob1</code> but have not been successful so far. For example if my folder structure is</p>\n\n<pre><code>/home/data\n   /subdir1\n    /subdir1.1\n        t1.txt\n    /subdir1.2\n        t2.txt\n   /subdir2\n        t3.txt\n\nmy_dir = \"/home/data\"\nglob.glob(os.path.join(my_dir, \"**/*.txt\"), recursive=True)\n</code></pre>\n\n<p>This works as expected. However</p>\n\n<pre><code>glob.glob1(my_dir,'**/*.txt')\n</code></pre>\n\n<p>returns an empty list. Why?</p>\n"}]