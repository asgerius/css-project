[{"tags": ["python", "django", "concurrency"], "answers": [{"tags": [], "owner": {"reputation": 4253, "user_id": 5449364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/843d0aabb84a3b312d08384834c0f26d?s=128&d=identicon&r=PG", "display_name": "Javier Buzzi", "link": "https://stackoverflow.com/users/5449364/javier-buzzi"}, "is_accepted": false, "score": 0, "last_activity_date": 1529539171, "creation_date": 1529539171, "answer_id": 50958616, "question_id": 50958595, "link": "https://stackoverflow.com/questions/50958595/django-make-a-view-run-only-once-at-a-time-mutex-lock-semaphore/50958616#50958616", "title": "Django: make a view run only once at a time (mutex/lock/semaphore)", "body": "<p><em>I may be missing your meaning of what you mean by \"most 1 thread/process at time within a Django view\"</em></p>\n\n<p>The simplest way -- that I DO NOT suggest it -- is to run:\n<code>./manage.py runserver --nothreading</code> </p>\n\n<p>Now, that is locking it down to a single python process -to- single request at a time, not per view.. but per request.</p>\n\n<p>Docs: <a href=\"https://docs.djangoproject.com/en/dev/ref/django-admin/#cmdoption-runserver-nothreading\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/dev/ref/django-admin/#cmdoption-runserver-nothreading</a></p>\n"}, {"tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": false, "score": -1, "last_activity_date": 1529539555, "creation_date": 1529539555, "answer_id": 50958653, "question_id": 50958595, "link": "https://stackoverflow.com/questions/50958595/django-make-a-view-run-only-once-at-a-time-mutex-lock-semaphore/50958653#50958653", "title": "Django: make a view run only once at a time (mutex/lock/semaphore)", "body": "<p>you can probably just use a file or something</p>\n\n<p>something like </p>\n\n<pre><code>def my_view(request):\n    if os.path.exists(\"/some/file.txt\"):\n       return HTTPResponse(open(\"/some/file.txt\",\"rb\").read())\n    try:\n       open(\"/some/file.txt\",\"wb\") as f:\n          f.write(\"Actively running this already1\")\n       return render_template(my_template,...)\n    finally:\n       os.remove(\"/some/file.txt\")\n</code></pre>\n"}], "owner": {"reputation": 1783, "user_id": 2390362, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c2d28dfb605e8c6b803ce6b1ba27943?s=128&d=identicon&r=PG&f=1", "display_name": "Jad S", "link": "https://stackoverflow.com/users/2390362/jad-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 336, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1529539555, "creation_date": 1529538952, "question_id": 50958595, "link": "https://stackoverflow.com/questions/50958595/django-make-a-view-run-only-once-at-a-time-mutex-lock-semaphore", "title": "Django: make a view run only once at a time (mutex/lock/semaphore)", "body": "<p>Is there an easy way (ideally built-in or library) to allow at most 1 thread/process at time within a Django view? A kind of semaphore I guess. Ideally, I can make other threads return a response if the process is already running./</p>\n\n<p>It doesn't need to handle any distributed system so locally managed is fine for my use case.</p>\n\n<p>Using Django 1.11</p>\n"}, {"tags": ["python", "file"], "comments": [{"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 2, "creation_date": 1529539038, "post_id": 50958584, "comment_id": 88914430, "body": "Usually when a problem statement contains an English &#39;if&#39;, the Python solution contains a Python <code>if</code>..."}, {"owner": {"reputation": 39, "user_id": 9614834, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jie83RcF7mQ/AAAAAAAAAAI/AAAAAAAAABQ/ghT9VH1eDsY/photo.jpg?sz=128", "display_name": "apoklyps3", "link": "https://stackoverflow.com/users/9614834/apoklyps3"}, "reply_to_user": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1529540893, "post_id": 50958584, "comment_id": 88914827, "body": "at this momment I&#39;m trying to get it working at least with one since path...baby steps."}, {"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1529541262, "post_id": 50958584, "comment_id": 88914890, "body": "... and you still need an <code>if</code>."}, {"owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 0, "creation_date": 1529541368, "post_id": 50958584, "comment_id": 88914907, "body": "You&#39;re also going to want to escape the backslashes (e.g. <code>exists(&#39;C:\\\\Program Files (x86)\\\\TeamViewer.exe&#39;)</code>."}, {"owner": {"reputation": 39, "user_id": 9614834, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jie83RcF7mQ/AAAAAAAAAAI/AAAAAAAAABQ/ghT9VH1eDsY/photo.jpg?sz=128", "display_name": "apoklyps3", "link": "https://stackoverflow.com/users/9614834/apoklyps3"}, "edited": false, "score": 0, "creation_date": 1529542057, "post_id": 50958584, "comment_id": 88915020, "body": "import os     import subprocess     if os.path.exists(&#39;C:\\\\Program Files (x86)\\\\TeamViewer.exe&#39;):         subprocess.run(&#39;C:\\\\Program Files (x86)\\\\TeamViewer.exe&#39;) this is what i got now..sorry about the format but I have no ideea how to introduce as code in a comment. problem is no error is given, teamviewer still won&#39;t start."}, {"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1529542367, "post_id": 50958584, "comment_id": 88915054, "body": "You can edit you post with new code rather than stuffing it in your comment. If it doesn&#39;t start it&#39;s probably because it doesn&#39;t exist..."}, {"owner": {"reputation": 39, "user_id": 9614834, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jie83RcF7mQ/AAAAAAAAAAI/AAAAAAAAABQ/ghT9VH1eDsY/photo.jpg?sz=128", "display_name": "apoklyps3", "link": "https://stackoverflow.com/users/9614834/apoklyps3"}, "edited": false, "score": 0, "creation_date": 1529542517, "post_id": 50958584, "comment_id": 88915084, "body": "I&#39;m stupid. thank you very much. how would i go now to check in two places and run it from wichever place it is found?"}, {"owner": {"reputation": 39, "user_id": 9614834, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jie83RcF7mQ/AAAAAAAAAAI/AAAAAAAAABQ/ghT9VH1eDsY/photo.jpg?sz=128", "display_name": "apoklyps3", "link": "https://stackoverflow.com/users/9614834/apoklyps3"}, "edited": false, "score": 0, "creation_date": 1529544874, "post_id": 50958584, "comment_id": 88915549, "body": "how would i go now to check in two places and run it from wichever place it is found?"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 9614834, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jie83RcF7mQ/AAAAAAAAAAI/AAAAAAAAABQ/ghT9VH1eDsY/photo.jpg?sz=128", "display_name": "apoklyps3", "link": "https://stackoverflow.com/users/9614834/apoklyps3"}, "edited": false, "score": 0, "creation_date": 1529573819, "post_id": 50960810, "comment_id": 88926742, "body": "already fixed that part. now I need the script to looki in two locations: <code>C:\\\\Program Files (x86)\\\\TeamViewer.exe</code> or <code>C:\\\\Program Files\\\\TeamViewer.exe</code> and then run it from wichever location it is found it"}], "tags": [], "owner": {"reputation": 16, "user_id": 9970964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de7d3bea9cebb643a694b82e67f9dca4?s=128&d=identicon&r=PG&f=1", "display_name": "MusafirRahi", "link": "https://stackoverflow.com/users/9970964/musafirrahi"}, "is_accepted": true, "score": 0, "last_activity_date": 1529558046, "creation_date": 1529558046, "answer_id": 50960810, "question_id": 50958584, "link": "https://stackoverflow.com/questions/50958584/python-check-if-file-exists-in-two-places-and-run-if-found-in-any-of-them/50960810#50960810", "title": "Python check if file exists in two places and run if found in any of them", "body": "<p>Please try using \"//\"\nI tried \"subprocess.call('C:\\Program Files (x86)\\Notepad++\\notepad++.exe')\"\nit worked.</p>\n"}], "owner": {"reputation": 39, "user_id": 9614834, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jie83RcF7mQ/AAAAAAAAAAI/AAAAAAAAABQ/ghT9VH1eDsY/photo.jpg?sz=128", "display_name": "apoklyps3", "link": "https://stackoverflow.com/users/9614834/apoklyps3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 50960810, "answer_count": 1, "score": -1, "last_activity_date": 1529558046, "creation_date": 1529538868, "last_edit_date": 1529538955, "question_id": 50958584, "link": "https://stackoverflow.com/questions/50958584/python-check-if-file-exists-in-two-places-and-run-if-found-in-any-of-them", "title": "Python check if file exists in two places and run if found in any of them", "body": "<p>I'm trying to create a script for python 3.6 that checks if teamviewer.exe is installed in any of the two places it can be found (in x64 os it's installed in Program files(x86) ) and if found in any of the two places to run it\nThis is what i came up with so far</p>\n\n<pre><code>import os\nimport subprocess\nos.path.exists('C:\\Program Files (x86)\\TeamViewer.exe')\n</code></pre>\n\n<p>using <code>subprocess.run('C:\\Program Files (x86)\\TeamViewer.exe')</code> gives me errors.\nany clues?</p>\n"}, {"tags": ["python", "file", "flask", "server", "writetofile"], "answers": [{"tags": [], "owner": {"reputation": 429, "user_id": 6828897, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1b82e5dc976be1b9daa046ae7a46bc65?s=128&d=identicon&r=PG&f=1", "display_name": "Rahmi Pruitt", "link": "https://stackoverflow.com/users/6828897/rahmi-pruitt"}, "is_accepted": false, "score": 1, "last_activity_date": 1529543787, "creation_date": 1529543787, "answer_id": 50959067, "question_id": 50958510, "link": "https://stackoverflow.com/questions/50958510/how-to-write-data-to-a-text-file-in-flask/50959067#50959067", "title": "How to write data to a text file in Flask?", "body": "<p>My guess is you are not specifying the correct directory. If flask is like Django, the path may be in different place with app is running. Try printing os.listdir() to see where you are.</p>\n\n<pre><code>from os import listdir\n\n@app.route('/', methods=['GET', 'POST'])\ndef my_form():\n    inputed_email = request.form.get(\"email\")\n    if request.method == 'POST' and inputed_email:\n        print(listdir) ## print listdir python 2\n        # write to file\n        with open('/var/www/FlaskApp/FlaskApp/test3.txt', 'w') as f:\n            f.write(str(inputed_email))\n\n        return render_template('my-form.html', email=inputed_email)\n    return render_template('my-form.html')\n</code></pre>\n\n<p>If it is printing nothing to the console, then the error is before the line print.</p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 5488412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w9iEN.png?s=128&g=1", "display_name": "Egor", "link": "https://stackoverflow.com/users/5488412/egor"}, "is_accepted": false, "score": 1, "last_activity_date": 1529565331, "creation_date": 1529565331, "answer_id": 50962536, "question_id": 50958510, "link": "https://stackoverflow.com/questions/50958510/how-to-write-data-to-a-text-file-in-flask/50962536#50962536", "title": "How to write data to a text file in Flask?", "body": "<p>Try running this</p>\n\n<pre><code>$ export FLASK_ENV=development\n$ export FLASK_DEBUG=True\n$ export FLASK_APP=&lt;your .py file&gt;\n$ flask run\n</code></pre>\n\n<p>Now the server will respond with a traceback, not just <code>Internal Server Error</code>. But don't use <code>FLASK_DEBUG</code> option in production.</p>\n"}], "owner": {"reputation": 115, "user_id": 8322412, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh5.googleusercontent.com/-XHS3uMIylKk/AAAAAAAAAAI/AAAAAAAAAaY/HsxNTW4eH34/photo.jpg?sz=128", "display_name": "Evan Yang", "link": "https://stackoverflow.com/users/8322412/evan-yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5425, "favorite_count": 0, "closed_date": 1529603473, "answer_count": 2, "score": 2, "last_activity_date": 1529603592, "creation_date": 1529538145, "question_id": 50958510, "link": "https://stackoverflow.com/questions/50958510/how-to-write-data-to-a-text-file-in-flask", "closed_reason": "Duplicate", "title": "How to write data to a text file in Flask?", "body": "<p>Our goal is to write a variable called \"inputed_email\" into a text file named \"test3.txt\". Because this takes place on the server, we need to make sure that this Python script can access the directory and text file. </p>\n\n<pre><code>@app.route('/', methods=['GET', 'POST'])\ndef my_form():\n    inputed_email = request.form.get(\"email\")\n    if request.method == 'POST' and inputed_email:\n\n        # write to file\n        with open('/var/www/FlaskApp/FlaskApp/test3.txt', 'w') as f:\n            f.write(str(inputed_email))\n\n        return render_template('my-form.html', email=inputed_email)\n    return render_template('my-form.html')\n</code></pre>\n\n<p>However, the code that writes to the \"test3.txt\" does not work. It returns error 500 (internal server error) when ran. Any help is appreciated!</p>\n"}, {"tags": ["python", "python-2.7", "arcgis", "arcpy"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 9807445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87c66b3daccd100d3679f5db3fe8f385?s=128&d=identicon&r=PG&f=1", "display_name": "rasenior", "link": "https://stackoverflow.com/users/9807445/rasenior"}, "edited": false, "score": 0, "creation_date": 1529574192, "post_id": 50958986, "comment_id": 88926980, "body": "Ok yes this seems like the sort of thing I was thinking, but it only seems to restart Python not re-run the failed script?   And I totally agree this it not good practice! But in the link you share you&#39;ll see this error is something crazy to do with arcpy mixing up environments or something, and I&#39;ve yet to find a reliable solution for this. It doesn&#39;t help that I can&#39;t reliably reproduce the error! It&#39;s basically just iterate over enough files and eventually the error will appear, seemingly at random :/"}, {"owner": {"reputation": 2884, "user_id": 6060083, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/10153430563728202/picture?type=large", "display_name": "sudonym", "link": "https://stackoverflow.com/users/6060083/sudonym"}, "reply_to_user": {"reputation": 81, "user_id": 9807445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87c66b3daccd100d3679f5db3fe8f385?s=128&d=identicon&r=PG&f=1", "display_name": "rasenior", "link": "https://stackoverflow.com/users/9807445/rasenior"}, "edited": false, "score": 0, "creation_date": 1529676215, "post_id": 50958986, "comment_id": 88973976, "body": "I have reworked my answer. Let me know if it works for you"}, {"owner": {"reputation": 81, "user_id": 9807445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87c66b3daccd100d3679f5db3fe8f385?s=128&d=identicon&r=PG&f=1", "display_name": "rasenior", "link": "https://stackoverflow.com/users/9807445/rasenior"}, "edited": false, "score": 0, "creation_date": 1533035919, "post_id": 50958986, "comment_id": 90188931, "body": "Thanks sudonym this is what I was thinking but didn&#39;t know how to execute. I think it will work, but I&#39;m now having problems with it importing the wrong bit version of arcpy when it restarts (similar to <a href=\"https://gis.stackexchange.com/questions/120686/import-arcgisscripting-gives-importerror-dll-load-failed-1-is-not-a-valid-win\">this</a>). Will try again when I&#39;ve sorted that"}, {"owner": {"reputation": 81, "user_id": 9807445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87c66b3daccd100d3679f5db3fe8f385?s=128&d=identicon&r=PG&f=1", "display_name": "rasenior", "link": "https://stackoverflow.com/users/9807445/rasenior"}, "edited": false, "score": 0, "creation_date": 1533399781, "post_id": 50958986, "comment_id": 90336927, "body": "Yep, this works. I did have some problems with the restart script sometimes not finding the <code>test.py</code> script (<code>can&#39;t open file &#39;c:\\program&#39;: [Errno 2] No such file or directory</code>). I don&#39;t know why it&#39;s looking there, so I hard-coded the path to the script for now."}], "tags": [], "owner": {"reputation": 2884, "user_id": 6060083, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/10153430563728202/picture?type=large", "display_name": "sudonym", "link": "https://stackoverflow.com/users/6060083/sudonym"}, "is_accepted": true, "score": 1, "last_activity_date": 1529683416, "last_edit_date": 1529683416, "creation_date": 1529543055, "answer_id": 50958986, "question_id": 50958442, "link": "https://stackoverflow.com/questions/50958442/restart-python-script-after-arcpy-error-until-successful/50958986#50958986", "title": "Restart python script after arcpy error, until successful", "body": "<p><strong>To answer your question</strong>:</p>\n\n<p>To <a href=\"https://gist.github.com/plieningerweb/39e47584337a516f56da105365a2e4c6\" rel=\"nofollow noreferrer\">force restart</a> any python script without a loop, you can call the function below (tested on python 2.7/windows 10). </p>\n\n<pre><code>import os, sys\n\ndef force_restart_script():\n    python = sys.executable\n    os.execl(python, python, * sys.argv)\n</code></pre>\n\n<p><strong>However</strong>:</p>\n\n<p>Since you call your python script using batch, the answer to your question does not solve your initial issue (classic <a href=\"https://meta.stackexchange.com/a/66378\">XY-Problem</a>). My recommendation is to do everything in python. Don't use batch if you don't have a reason. </p>\n\n<p><strong>Solution</strong>:</p>\n\n<ul>\n<li>Wrap <code>test.py</code> in a function </li>\n<li>Create a <a href=\"https://stackoverflow.com/a/2225582/6060083\">list of all input files</a> and submit them to the function</li>\n<li>Create a <code>for</code>-loop that calls the function once for each file</li>\n<li>In case of any Exception, skip the file</li>\n<li>Catch your error by investigating the <a href=\"https://stackoverflow.com/a/4308202/6060083\">error message string</a></li>\n<li>Otherwise, indicate that a given file is processed</li>\n<li>Wrap the <code>for</code>-loop in an infinite <code>while</code>-loop until all files are\nprocessed</li>\n<li>Do all of this in one python script to be able to use the <code>force_restart_script()</code> function</li>\n</ul>\n\n<p><strong>Code</strong>:</p>\n\n<pre><code>import sys, os, arcpy\nfrom time import sleep\n# put force_restart_script() here\n\ndef arcpy_function(shapefile)       # Formerly called test.py\n    try: \n       # arcpy stuff                # Your processing happens here\n       return shapefile             # Return name of processed file\n    except arcpy.ExecuteError as e: # In case ExecuteError:\n       print(e)                     # Print error FYI\n       return None                  # Return None\n    except Exception as e:          # For all other errors, check message\n       if 'ERROR 010088' in str(e): # restart in case of ERROR 010088\n           print str(e), \"hard restart\"\n           time.sleep(10)           # Wait so you can read what happened\n           force_restart_script()   # Call the restart function\n       else:                        # If not 010088, pass\n           print(e)                 # Print any other error FYI\n           return None              # Return None\n\nif __name__ == \"__main__\":\n    files_to_process = ['file1', 'file2', 'file3']       # Use glob, see link above   \n    completed_files = []                                 # Processed files\n    while len(completed_files) &lt; len(files_to_process):  # Work until all are processed\n        for shapefile in files_to_process:               # Process file by file\n            if shapefile in completed_files:             # If the file is processed already\n               os.rename(shapefile, \"processed_\" + shapefile)    # Rename\n               continue                                  # Go to next one\n            else:                                        # Otherwise\n               finished_file = arcpy_function(shapefile) # Process the file\n               if finished_file is not None:             # If processing worked, remember\n                  completed_files.append(finished_file)\n               else:                                     # If not, continue with next file\n                   pass  \n    else:\n         print \"all files processed\"\n</code></pre>\n\n<p>Note that <code>os.rename</code> is required to prevent double processing of input files in case the script was forcefully restarted after <code>ERROR 010088</code>.</p>\n\n<p>Also, people seem to have <a href=\"https://community.esri.com/thread/89261\" rel=\"nofollow noreferrer\">found a workaround</a> for something that looks like same issue in other ways.</p>\n"}, {"tags": [], "owner": {"reputation": 3820, "user_id": 3601654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c0d89715d4e6812ed50ecd0b6d19c0f?s=128&d=identicon&r=PG&f=1", "display_name": "ramwin", "link": "https://stackoverflow.com/users/3601654/ramwin"}, "is_accepted": false, "score": 1, "last_activity_date": 1529544258, "creation_date": 1529544258, "answer_id": 50959108, "question_id": 50958442, "link": "https://stackoverflow.com/questions/50958442/restart-python-script-after-arcpy-error-until-successful/50959108#50959108", "title": "Restart python script after arcpy error, until successful", "body": "<p>In that case, I will run a deamon script that every minue execute the script. </p>\n\n<pre><code>import datetime\nimport traceback\ndef main():\n    var filename = '/tmp/running.pid'  # a file indicate whether the script is running or not\n    if os.path.isfile(filename):\n        log.warning(\"the last script is still running perfectly, so i don't run\")\n        return\n    else:\n        try:\n            with open(filename, \"w\") as f:\n                # I choose to write the time so I can see when the script has been started.\n                # you can also write the thread id like .pid file\n                f.write(datetime.datetime.strftime(\"%Y-%m-%d %H:%M:%S\"))\n            run_your_script_here()  # here you run the script\n        except Exception  as e:\n            os.remove(filename)  # if an error occurs, delete the file so the script will be run next time in 1 minute\n            log.error(e)\n            log.error(traceback.format_exc())\n</code></pre>\n\n<p>The script has a con that if a script failed, it will wait 1 minute to start the next script in the worst case. If you need to reduce the interval, you should add some circulation in the script and set a time interval between the circulation or use other library like celery.</p>\n"}], "owner": {"reputation": 81, "user_id": 9807445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87c66b3daccd100d3679f5db3fe8f385?s=128&d=identicon&r=PG&f=1", "display_name": "rasenior", "link": "https://stackoverflow.com/users/9807445/rasenior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1397, "favorite_count": 0, "accepted_answer_id": 50958986, "answer_count": 2, "score": 0, "last_activity_date": 1533030086, "creation_date": 1529537594, "last_edit_date": 1533030086, "question_id": 50958442, "link": "https://stackoverflow.com/questions/50958442/restart-python-script-after-arcpy-error-until-successful", "title": "Restart python script after arcpy error, until successful", "body": "<p>I'm using the arcpy module of ArcGIS in Python (2.7) to process many polygon shapefiles, using many different tools. Every so often it will throw a random error, which I catch with an exception but all subsequent shapefiles are then affected by the same error. I really don't understand what is causing this error (ERROR 010088), and the only workaround I have is to restart the script from the last file that was processed successfully. </p>\n\n<p>My question is: how can I restart the script every time I hit this error, and then stop when all files have been processed successfully?</p>\n\n<p>I've looked at various different questions (e.g. <a href=\"https://stackoverflow.com/questions/1750757/restarting-a-self-updating-python-script\">Restarting a self-updating python script</a>) but nothing quite does the job, or I can't understand how to apply it to my situation because I'm still very much a Python beginner. The closest I've come is the example below, based on this blog post: <a href=\"https://www.alexkras.com/how-to-restart-python-script-after-exception-and-run-it-forever/\" rel=\"nofollow noreferrer\">https://www.alexkras.com/how-to-restart-python-script-after-exception-and-run-it-forever/</a>.</p>\n\n<p>Script called test.py:</p>\n\n<pre><code>import arcpy\nimport sys\n\ntry:\n    arcpy.Buffer_analysis(r\"E:\\temp\\boundary.shp\",\n                          r\"E:\\temp\\boundary2.shp\",\n                          \"100 Feet\")\n# Print arcpy execute error\nexcept arcpy.ExecuteError as e:\n    # Print\n    print(e)\n# Pass any other type of error\nexcept:\n    pass\n</code></pre>\n\n<p>Script called forever.py, in the same directory:</p>\n\n<pre><code>from subprocess import Popen\nimport sys\n\nfilename = sys.argv[1]\nwhile True:\n    print(\"\\nStarting \" + filename)\n    p = Popen(\"python \" + filename, shell=True)\n    p.wait()\n</code></pre>\n\n<p>(Note that boundary.shp is just a random boundary polygon - available here: <a href=\"https://drive.google.com/open?id=1LylBm7ABQoSdxKng59rsT4zAQn4cxv7a\" rel=\"nofollow noreferrer\">https://drive.google.com/open?id=1LylBm7ABQoSdxKng59rsT4zAQn4cxv7a</a>). </p>\n\n<p>I'm on a Windows machine, so I run all this in the command line with:</p>\n\n<pre><code>python.exe forever.py test.py\n</code></pre>\n\n<p>As expected, the first time this script runs without errors, and after that it hits an error because the output file already exists (ERROR 000725). The trouble is that ultimately I want the script to <em>only</em> restart when it hits ERROR 010088, and definitely not when the script has completed successfully. So in this example, it should not restart at all because the script should be successful the first time it is run. I know in advance how many files there are to process, so I know the script has finished successfully when it reaches the last one.</p>\n"}, {"tags": ["python", "multithreading", "parsing", "pyparsing", "logfile"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 9905602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3c1b6fd567d27f62e6db04bc5693dfc?s=128&d=identicon&r=PG&f=1", "display_name": "Jeppi", "link": "https://stackoverflow.com/users/9905602/jeppi"}, "edited": false, "score": 1, "creation_date": 1529715808, "post_id": 50985694, "comment_id": 88988464, "body": "Thanks for your assessment. I&#39;m still wondering whether and how it is possible to modify ParseResults while parsing, so I have edited my question and added a code example. Could you please have a look at that? Thanks again for creating pyparsing and sharing your knowledge about it!"}], "tags": [], "owner": {"reputation": 55852, "user_id": 165216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7Xse.jpg?s=128&g=1", "display_name": "PaulMcG", "link": "https://stackoverflow.com/users/165216/paulmcg"}, "is_accepted": true, "score": 1, "last_activity_date": 1529723413, "last_edit_date": 1529723413, "creation_date": 1529662353, "answer_id": 50985694, "question_id": 50958427, "link": "https://stackoverflow.com/questions/50958427/restructuring-pyparsing-parse-results-of-multithreaded-log-file/50985694#50985694", "title": "Restructuring pyparsing parse results of multithreaded log file", "body": "<p>Purely a judgment call on where to draw the line on this, and I have written parsers in both styles. </p>\n\n<p>In this particular case, my intuition tells me that it will make for clearer code if you focus your parser and parse actions on grouping, converting, and naming the parts of the individual log entries, and then use a separate method to reorganize them based on your various grouping strategies. My reasoning is that the log message structure is already somewhat complex, and so your parser will have enough work to do to pull out each message into a unified form. Also, your grouping strategies may evolve a bit (need to gather items that are within some small time window, not just exact timestamp matches), and doing this in a separate post-processing method would localize these changes.</p>\n\n<p>From a testing perspective, this would also allow you to test the restructuring code separately from the parsing code, perhaps with a list of dicts or namedtuples that would simulate the parsed results from the separate log records.</p>\n\n<p>tl;dr - For this situation, I'd go with the post-processing method for the final sorting/reorganizing of your parsed log records.</p>\n\n<p>EDIT:\nTo modify the parse results in place, define a parse action that takes a single argument, which I typically name <code>tokens</code>, and modify in place using typical list or dict mutators:</p>\n\n<pre><code>def rearrange(tokens):\n    # mutate tokens in place\n    tokens.contents[0].parameters.append(tokens.contents[2].parameters[0])\n\nlog.addParseAction(rearrange)\n</code></pre>\n\n<p>If you return <code>None</code> (as in this example), then the tokens structure that was passed in is retained as the token structure to be returned. If you return a non-<code>None</code> value, then the new return value replaces the given tokens in the parser output. This is how integer parsers convert the parsed string to actual integers, or date/time parsers convert the parsed strings to Python <code>datetime</code>s.</p>\n"}], "owner": {"reputation": 91, "user_id": 9905602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3c1b6fd567d27f62e6db04bc5693dfc?s=128&d=identicon&r=PG&f=1", "display_name": "Jeppi", "link": "https://stackoverflow.com/users/9905602/jeppi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 50985694, "answer_count": 1, "score": 1, "last_activity_date": 1529723413, "creation_date": 1529537468, "last_edit_date": 1529715671, "question_id": 50958427, "link": "https://stackoverflow.com/questions/50958427/restructuring-pyparsing-parse-results-of-multithreaded-log-file", "title": "Restructuring pyparsing parse results of multithreaded log file", "body": "<p>I have a log file of a multithreaded process which looks like this:</p>\n\n<pre><code>&lt;timestamp_in&gt; &lt;first_function_call_input&gt; &lt;thread:1&gt;\n    input_parameter_1:     value\n    input_parameter_2:     value\n\n&lt;timestamp_in&gt; &lt;another_function_call_input&gt; &lt;thread:2&gt;\n    input_parameters:      values\n&lt;timestamp_out&gt; &lt;another_function_call_output&gt; &lt;thread:2&gt;\n    output_parameters:     values\n\n&lt;timestamp_out&gt; &lt;first_function_call_output&gt; &lt;thread:1&gt;\n    output_parameters:     values\n</code></pre>\n\n<p>In my parse results variable I would like to have the input and output information of one function call paired together, for example like this:</p>\n\n<pre><code>&gt;&gt;&gt; print(parse_results.dump())\n  -[0]:\n       -function: first_function\n       -thread: 1\n       -timestamp_in: ...\n       -timestamp_out: ...\n       -input_parameters:\n             [0]:\n                  -parameter_name: input_parameter_1\n                  -parameter_value: value\n             [1]:\n                  -parameter_name: input_parameter_2\n                  -parameter_value: value\n       -output_parameters:\n             [0]: ...\n             ...\n  -[1]:\n       -function: another_function\n       -thread: 2\n       ...\n</code></pre>\n\n<p>Is there a way to restructure the parse_results directly while parsing, so I don't have to restructure the results afterwards? Maybe with some parse actions? Or would it be way easier to just parse the input-parts and the output-parts by themselves, then sort them by thread, timestamp, and function and stitch the input-parts and output-parts together in a new object?</p>\n\n<p>Thanks for your help!</p>\n\n<p><strong>Edit:</strong><br>\nI'm going to go do the sorting of the input-parts and output-parts after parsing them seperately, that seems way easier. However, I am still wondering if and how it is possible to restructure a parse results instance. Say I have the following grammar and test string:</p>\n\n<pre><code>from pyparsing import *\n\nParserElement.inlineLiteralsUsing(Suppress)\nkey_val_lines = OneOrMore(Group(Word(alphas)('key') + ':' + Word(nums)('val')))('parameters')\n\nspecial_key_val_lines = OneOrMore(Group(Word(printables)('key') + ':' + Word(alphas)('val')))('special_parameters')\n\nlog = OneOrMore(Group(key_val_lines | special_key_val_lines))('contents').setDebug()\n\ntest_string ='''\nfoo             : 1\nbar             : 2\nspecial_key1!   : wow\nanother_special : abc\nnormalAgain     : 3'''\n\nparse_results = log.parseString(test_string).dump()\nprint(parse_results)\n</code></pre>\n\n<p>This outputs the following:</p>\n\n<pre><code>- contents: [[['foo', '1'], ['bar', '2']], [['special_key1!', 'wow'], ['another_special', 'abc']], [['normalAgain', '3']]]\n  [0]:\n    [['foo', '1'], ['bar', '2']]\n    - parameters: [['foo', '1'], ['bar', '2']]\n      [0]:\n        ['foo', '1']\n        - key: 'foo'\n        - val: '1'\n      [1]:\n        ['bar', '2']\n        - key: 'bar'\n        - val: '2'\n  [1]:\n    [['special_key1!', 'wow'], ['another_special', 'abc']]\n    - special_parameters: [['special_key1!', 'wow'], ['another_special', 'abc']]\n      [0]:\n        ['special_key1!', 'wow']\n        - key: 'special_key1!'\n        - val: 'wow'\n      [1]:\n        ['another_special', 'abc']\n        - key: 'another_special'\n        - val: 'abc'\n  [2]:\n    [['normalAgain', '3']]\n    - parameters: [['normalAgain', '3']]\n      [0]:\n        ['normalAgain', '3']\n        - key: 'normalAgain'\n        - val: '3'\n</code></pre>\n\n<p>How can I modify the grammar of my parser in such a way that <code>parse_results.contents[2].parameters[0]</code> will instead become <code>parse_results.contents[0].parameters[3]</code>?</p>\n"}, {"tags": ["python", "pandas", "csv", "floating-point", "series"], "comments": [{"owner": {"reputation": 1246, "user_id": 2796965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a3bb1a1cb036a85f9b2ce76b02e1a40?s=128&d=identicon&r=PG&f=1", "display_name": "smj", "link": "https://stackoverflow.com/users/2796965/smj"}, "edited": false, "score": 2, "creation_date": 1529537698, "post_id": 50958377, "comment_id": 88914115, "body": "When you import the data using <code>.read_csv()</code>, set the dtype of the &quot;Id&quot; column to <code>object</code> using the <code>dtype</code> option with a dict. See documentation: <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/generated/&hellip;</a>"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 1246, "user_id": 2796965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a3bb1a1cb036a85f9b2ce76b02e1a40?s=128&d=identicon&r=PG&f=1", "display_name": "smj", "link": "https://stackoverflow.com/users/2796965/smj"}, "edited": false, "score": 0, "creation_date": 1529537979, "post_id": 50958377, "comment_id": 88914188, "body": "@smj, Sorry, this is a bad idea. There are better ways to compare floats than to read as strings. Given OP refers to <code>17980873.3391</code> as a number rather than a category, I can only believe it should be treated a number."}, {"owner": {"reputation": 125, "user_id": 8816168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1592830817447917/picture?type=large", "display_name": "Cristian Favaro Carri&#231;o", "link": "https://stackoverflow.com/users/8816168/cristian-favaro-carri%c3%a7o"}, "edited": false, "score": 0, "creation_date": 1529538286, "post_id": 50958377, "comment_id": 88914266, "body": "Thanks, man! I fixed my issue for good with dtype. I should pay more attention to the docs... my bad. Thanks again!"}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1529538644, "post_id": 50958377, "comment_id": 88914331, "body": "@jpp You are assuming the data is a float.  The OP implies it is an ID with an 8.4 ID, which is probably just a string.  The OP can clarify."}, {"owner": {"reputation": 125, "user_id": 8816168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1592830817447917/picture?type=large", "display_name": "Cristian Favaro Carri&#231;o", "link": "https://stackoverflow.com/users/8816168/cristian-favaro-carri%c3%a7o"}, "edited": false, "score": 0, "creation_date": 1529538820, "post_id": 50958377, "comment_id": 88914379, "body": "The compare I would like to do is the exactly ID number. It is possible to find the id 17980876.8560 looking for 17980876.856000 with the np.isclose parameter?  Would this be faster than use as string ou object?"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1529538849, "post_id": 50958377, "comment_id": 88914385, "body": "@CristianFavaroCarri&#231;o, Yes, it will match it. And yes, it will be faster."}, {"owner": {"reputation": 1246, "user_id": 2796965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a3bb1a1cb036a85f9b2ce76b02e1a40?s=128&d=identicon&r=PG&f=1", "display_name": "smj", "link": "https://stackoverflow.com/users/2796965/smj"}, "reply_to_user": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1529538876, "post_id": 50958377, "comment_id": 88914390, "body": "@MarkTolonen, out of interest, is there a difference/benefit from setting it to <code>str</code> instead of <code>object</code> ?"}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "reply_to_user": {"reputation": 1246, "user_id": 2796965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a3bb1a1cb036a85f9b2ce76b02e1a40?s=128&d=identicon&r=PG&f=1", "display_name": "smj", "link": "https://stackoverflow.com/users/2796965/smj"}, "edited": false, "score": 0, "creation_date": 1529539045, "post_id": 50958377, "comment_id": 88914432, "body": "@smj not that I know of, but I&#39;m not a heavy user of pandas."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 1, "creation_date": 1529539117, "post_id": 50958377, "comment_id": 88914455, "body": "Another note about <code>str</code> vs. float.  If an &quot;ID&quot; fields has &quot;111.500&quot; and &quot;111.50&quot; and &quot;111.5&quot; those will all compare the same as floats, but different as strings.  So for the OP using float will be faster, but incorrect if the zeros in your IDs are significant.  Just something to be aware of."}, {"owner": {"reputation": 1246, "user_id": 2796965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a3bb1a1cb036a85f9b2ce76b02e1a40?s=128&d=identicon&r=PG&f=1", "display_name": "smj", "link": "https://stackoverflow.com/users/2796965/smj"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 1, "creation_date": 1529539770, "post_id": 50958377, "comment_id": 88914612, "body": "@jpp I take your point that if it is a float, treating it as such and use <code>isclose()</code> would be best. Hadn&#39;t seen that before so thanks for the info! If it is in fact an ID, maybe it would actually be better to split the columns on the <code>.</code> and store them as <code>int</code>. Could be quite useful for grouping..."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1529539861, "post_id": 50958377, "comment_id": 88914632, "body": "@MarkTolonen, Excellent point. But OP has already asked <code>It is possible to find the id 17980876.8560 looking for 17980876.856000.. ?</code> So it seems to be fine. If <i>either</i> method works for OP&#39;s purposes, IMO we should propagate the <code>float</code> comparison first (there&#39;s no memory/performance trade-off here, it&#39;s <code>float</code> all the way)."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 1, "creation_date": 1529540110, "post_id": 50958377, "comment_id": 88914674, "body": "@jpp Agreed, we don&#39;t always get the full story from new users so I wanted to point out possible problems."}, {"owner": {"reputation": 125, "user_id": 8816168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1592830817447917/picture?type=large", "display_name": "Cristian Favaro Carri&#231;o", "link": "https://stackoverflow.com/users/8816168/cristian-favaro-carri%c3%a7o"}, "reply_to_user": {"reputation": 1246, "user_id": 2796965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a3bb1a1cb036a85f9b2ce76b02e1a40?s=128&d=identicon&r=PG&f=1", "display_name": "smj", "link": "https://stackoverflow.com/users/2796965/smj"}, "edited": false, "score": 0, "creation_date": 1529557598, "post_id": 50958377, "comment_id": 88918237, "body": "Thanks, folks. It helped me a lot. I liked the suggestions from @smj to split the columns on the . and store them as int. I think this is gonna be great for my search propose. About the possible problemns, I totally agree with you, Mark Tolonen. The search will be made by a robot that I&#39;ve been developing, so there might be some ID with conflit. This ID is from a page I&#180;m trying to scrap. Always when some new report apears on this page, the scrap program check if this report&#39;s ID its been added to the list. If wasn&#39;t, the robot will send me an e-mail notifying me of new posts."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 8816168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1592830817447917/picture?type=large", "display_name": "Cristian Favaro Carri&#231;o", "link": "https://stackoverflow.com/users/8816168/cristian-favaro-carri%c3%a7o"}, "edited": false, "score": 0, "creation_date": 1529538643, "post_id": 50958479, "comment_id": 88914329, "body": "Thanks! I&#39;ll definitely follow your tips in my code. At a first look, I fixed it with the dtype parameter. But I`m gonna try to implement the isclose parameter right now."}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 1, "last_activity_date": 1529539001, "last_edit_date": 1529539001, "creation_date": 1529537828, "answer_id": 50958479, "question_id": 50958377, "link": "https://stackoverflow.com/questions/50958377/pandas-importing-csv-issue-adding-and-deleting-0-at-the-end/50958479#50958479", "title": "Pandas - Importing CSV issue - adding and deleting 0 at the end", "body": "<p>You should first understand that Pandas isn't reading in your number as a decimal <code>17980873.33910</code>. It is reading it into your dataframe as a <code>float</code>, which counts in base-2 rather than base-10. Any numbers you see thenceforth is a <strong>string representation</strong> of a <code>float</code>, nothing more.</p>\n\n<p>In general, you shouldn't be looking to convert numeric data to strings. The process is expensive, any comparisons are expensive and you will be dealing with a series of pointers rather than data held in <strong>contiguous memory blocks</strong>. The last point is a principle benefit of using Pandas, as it enables <strong>vectorised operations</strong>.</p>\n\n<p>Now to your core problem:</p>\n\n<blockquote>\n  <p>The Id column should be exactly the way it is in csv file (I want to\n  use it as a filter to do searches).</p>\n</blockquote>\n\n<p>You should use <a href=\"https://docs.scipy.org/doc/numpy-1.14.0/reference/generated/numpy.isclose.html\" rel=\"nofollow noreferrer\"><code>numpy.isclose</code></a> to compare floats. This function works by setting a tolerance level, within which two numbers are deemed to be the same. Here's an example:</p>\n\n<pre><code>s = pd.Series([1.4532400, 67.1234, 54.4556, 765.32414])\nres = np.isclose(s, 1.45324)\n\nprint(res)\narray([ True, False, False, False])\n</code></pre>\n\n<p>Then to filter your series:</p>\n\n<pre><code>s_filtered = s[res]\n\nprint(s_filtered)\n\n0    1.45324\ndtype: float64\n</code></pre>\n\n<p>Here's a performance comparison:</p>\n\n<pre><code>s = pd.Series([1.4532400, 67.1234, 54.4556, 765.32414])\ns = pd.concat([s]*100000)\ns2 = s.astype(str)\n\n%timeit np.isclose(s, 1.45324)       # 5.02 ms\n%timeit s2.astype(str) == '1.45324'  # 79.5 ms\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": true, "score": 2, "last_activity_date": 1529538533, "creation_date": 1529538533, "answer_id": 50958544, "question_id": 50958377, "link": "https://stackoverflow.com/questions/50958377/pandas-importing-csv-issue-adding-and-deleting-0-at-the-end/50958544#50958544", "title": "Pandas - Importing CSV issue - adding and deleting 0 at the end", "body": "<p>Set the <code>dtype</code> for the <code>Id</code> to <code>str</code> for no translation.</p>\n\n<p>Given:</p>\n\n<pre><code>Data,Id,Text\n2018-06-11,17980873.3391,bla bla bla\n2018-06-11,17980874.4560,bla bla bla\n2018-06-11,17980876.8560,bla bla bla\n</code></pre>\n\n<p>Use:</p>\n\n<pre><code>import pandas as pd\ndata = pd.read_csv('data.csv',dtype={'Id':str})\nprint(data)\n</code></pre>\n\n<p>To get:</p>\n\n<pre><code>         Data             Id         Text\n0  2018-06-11  17980873.3391  bla bla bla\n1  2018-06-11  17980874.4560  bla bla bla\n2  2018-06-11  17980876.8560  bla bla bla\n</code></pre>\n\n<p>This does assume your ID field is intended to be an 8-digit dot 4-digit string and not a floating point value.</p>\n"}], "owner": {"reputation": 125, "user_id": 8816168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1592830817447917/picture?type=large", "display_name": "Cristian Favaro Carri&#231;o", "link": "https://stackoverflow.com/users/8816168/cristian-favaro-carri%c3%a7o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 50958544, "answer_count": 2, "score": 2, "last_activity_date": 1529539001, "creation_date": 1529537075, "last_edit_date": 1529538251, "question_id": 50958377, "link": "https://stackoverflow.com/questions/50958377/pandas-importing-csv-issue-adding-and-deleting-0-at-the-end", "title": "Pandas - Importing CSV issue - adding and deleting 0 at the end", "body": "<p>I want to import a csv dataset. \nMy problem is when I import the base, pandas kinds of try to convert it into something.</p>\n\n<p>Let me explain with numbers.\nThis is more or less how my csv file is.</p>\n\n<pre><code>&gt; Data, Id, Text\n\n&gt;2018-06-11, 17980873.3391, bla bla bla \n\n&gt;2018-06-11, 17980874.4560, bla bla bla\n\n&gt;2018-06-11, 17980876.8560, bla bla bla\n</code></pre>\n\n<p>The trouble is when I import it with pd.read_csv. The Id column should be exactly the way it is in csv file (I want to use it as a filter to do searches) . But pandas is returning something like:</p>\n\n<p>When I import with no changes in the structure (pandas transform the column into float automatically)</p>\n\n<pre><code>&gt; Data, Id, Text\n\n&gt;2018-06-11, 17980873.33910, bla bla bla \n\n&gt;2018-06-11, 17980874.45600, bla bla bla\n\n&gt;2018-06-11, 17980876.85600, bla bla bla\n</code></pre>\n\n<p>when I import the dataset and transform the id column as type(str):</p>\n\n<pre><code>&gt; Data, Id, Text\n\n&gt;2018-06-11, 17980873.3391, bla bla bla \n\n&gt;2018-06-11, 17980874.456, bla bla bla\n\n&gt;2018-06-11, 17980876.856, bla bla bla\n</code></pre>\n\n<p>It is deleting and adding 0. \nI really don't know how to make pandas import the real number</p>\n\n<pre><code>&gt;17980876.8560\n</code></pre>\n\n<p>Hope I've made myself understood. I'm still learning how to ask questions here. </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "installation", "anaconda", "unsatisfiedlinkerror", "mavlink"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10247052, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yF8DKTDFOtc/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOh0ZjyBg5rhwxl3LK8G0ubaSSKfA/mo/photo.jpg?sz=128", "display_name": "Vahid Asbaghi", "link": "https://stackoverflow.com/users/10247052/vahid-asbaghi"}, "is_accepted": false, "score": 0, "last_activity_date": 1539608062, "creation_date": 1539608062, "answer_id": 52817282, "question_id": 50958352, "link": "https://stackoverflow.com/questions/50958352/trying-to-install-mavlink-using-anaconda-i-keep-getting-unsatisfiableerror-t/52817282#52817282", "title": "Trying to install mavlink using anaconda. I keep getting &quot; UnsatisfiableError: The following specifications were found to be in conflict:&quot;", "body": "<p>I had the same problem after I try to install pyforms in anaconda environment. Finally I could solve the problem by uninstalling the pyforms and PyQt5 packages. These packages are considered as site-packages by anaconda/python that are located in AppData/Roaming/Python/Python36/site-packages. I suppose by uninstalling anaconda even completely, these site-packages will not be removed... So the solution is uninstall these packages manually after that you re-install anaconda. I use the commands below to uninstall them:</p>\n\n<pre><code>python -m pip uninstall pyforms-gui\npython -m pip uninstall PyQt5\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9970156, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6nrbKkSE_H8/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2keGT3H0dKwfWPqIlh982OYrnghw/mo/photo.jpg?sz=128", "display_name": "Jayden Fries", "link": "https://stackoverflow.com/users/9970156/jayden-fries"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 379, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539608062, "creation_date": 1529536893, "last_edit_date": 1529546028, "question_id": 50958352, "link": "https://stackoverflow.com/questions/50958352/trying-to-install-mavlink-using-anaconda-i-keep-getting-unsatisfiableerror-t", "title": "Trying to install mavlink using anaconda. I keep getting &quot; UnsatisfiableError: The following specifications were found to be in conflict:&quot;", "body": "<p>As you can see I am trying to install mavlink using Anaconda. My main goal is to use mavgraph to graph log files for a quadcopter I am working on. Any help would be appreciated. Thank you.</p>\n\n<p>Here is the code from my terminal:</p>\n\n<pre><code>$ conda install -c brenda pymavlink\nSolving environment: failed\n\nUnsatisfiableError: The following specifications were found to be in conflict:\n  - anaconda==5.2.0=py36_3\n  - pymavlink\nUse \"conda info &lt;package&gt;\" to see the dependencies for each package.\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "parallel-processing"], "comments": [{"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1529536505, "post_id": 50958259, "comment_id": 88913866, "body": "I&#39;m not totally clear on what your question is.  Are you trying to parallelize the execution of a generator?  That&#39;s not possible. Generators are inherently sequential, that&#39;s why things like context managers can be implemented as generators: you&#39;re guaranteed to get the results in order one after another.  If that&#39;s not true of your data generation logic then it shouldn&#39;t be a generator."}, {"owner": {"reputation": 75, "user_id": 6411997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d4ed4f3b89ab16cacf6d180c519cfc?s=128&d=identicon&r=PG&f=1", "display_name": "jdc", "link": "https://stackoverflow.com/users/6411997/jdc"}, "reply_to_user": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 1, "creation_date": 1529538950, "post_id": 50958259, "comment_id": 88914412, "body": "Sorry. Let me clarify. The data_iterator provides a single data point value. I would like to parallelize the process of creating a batch of data (e.g. 50 data points) via 50 calls to the generator. It doesn&#39;t seem like tf.data.Dataset.from_generator() easily allows for that."}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1529539701, "post_id": 50958259, "comment_id": 88914596, "body": "Sounds like your data generation should just be a function.  Maybe have a very basic generator that creates the correct number of slots and then <code>map</code> the actual data generation onto that?"}, {"owner": {"reputation": 75, "user_id": 6411997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d4ed4f3b89ab16cacf6d180c519cfc?s=128&d=identicon&r=PG&f=1", "display_name": "jdc", "link": "https://stackoverflow.com/users/6411997/jdc"}, "reply_to_user": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 1, "creation_date": 1529554723, "post_id": 50958259, "comment_id": 88917449, "body": "I did try that, but the speed stayed the same, so I am not sure if I was simply not properly dedicating enough cores or threads to the operation. Is the correct way to do that via <code>tf.ConfigProto</code>..?"}], "owner": {"reputation": 75, "user_id": 6411997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d4ed4f3b89ab16cacf6d180c519cfc?s=128&d=identicon&r=PG&f=1", "display_name": "jdc", "link": "https://stackoverflow.com/users/6411997/jdc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 683, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1563901362, "creation_date": 1529536096, "last_edit_date": 1529539140, "question_id": 50958259, "link": "https://stackoverflow.com/questions/50958259/parallelizing-batching-using-tf-data-dataset-from-generator", "title": "Parallelizing batching using tf.data.Dataset.from_generator()", "body": "<p>I have a computationally-expensive method for simulating data coded up as a generator that I want to feed into my neural network model in Tensorflow. I would like to quickly generate batches of data by parallelizing the calls made to the generator. My current data input pipeline as shown below: </p>\n\n<pre><code>def data_iterator():\n     # data generation procedure to be parallelized\n     pass\n\ndataset = tf.data.Dataset.from_generator(data_iterator, \n                                        (tf.float32,tf.float32), \n                                        (tf.TensorShape([HEIGHT, None, 1]), \n                                         tf.TensorShape([2])))\n\ndataset = dataset.padded_batch(BATCH_SIZE, \n                               padded_shapes=(tf.TensorShape([HEIGHT, None, 1]), \n                                              tf.TensorShape([2])))\niterator = dataset.make_one_shot_iterator()\nx_image, y_ = iterator.get_next()\n</code></pre>\n\n<p>Unfortunately, I found that creating a batch of data using the <code>from_generator()</code> method cannot easily be parallelized with no way to specify how many threads I use to pull data from the generator to create batches. I tried the solution in this thread(<a href=\"https://stackoverflow.com/a/47089278\">https://stackoverflow.com/a/47089278</a>) which uses a wrapper function and mapping in parallel and found that the speed did not increase at all. Previously, I was using queues to input my data which seemed to work well as follows:</p>\n\n<pre><code>class CustomRunner(object):\n    \"\"\"\n    This class manages the the background threads needed to fill\n        a queue full of data.\n    \"\"\"\n    def __init__(self):\n        self.dataX = tf.placeholder(dtype=tf.float32, shape=[HEIGHT,WIDTH,1])\n        self.dataY = tf.placeholder(dtype=tf.float32, shape=[2])\n        # The actual queue of data. The queue contains a vector for\n        # the features, and a scalar label.\n        self.queue = tf.FIFOQueue(shapes=[[HEIGHT,WIDTH,1],[2]],\n                                           dtypes=[tf.float32, tf.float32],\n                                           capacity=QUEUE_CAPACITY)\n        self.enqueue_op = self.queue.enqueue([self.dataX, self.dataY])\n\n    def get_inputs(self,batch_size):\n        \"\"\"\n        Return's tensors containing a batch of images and labels\n        \"\"\"\n        images_batch, labels_batch = self.queue.dequeue_many(batch_size)\n        return images_batch, labels_batch\n\n    def thread_main(self, sess):\n        \"\"\"\n        Function run on alternate thread. Basically, keep adding data to the queue.\n        \"\"\"\n        for dataX, dataY in data_iterator():\n            sess.run(self.enqueue_op, feed_dict={self.dataX:dataX,  self.dataY:dataY})\n\n    def start_threads(self, sess, n_threads=1):\n        \"\"\" Start background threads to feed queue \"\"\"\n        threads = []\n        for n in range(n_threads):\n            t = threading.Thread(target=self.thread_main, args=(sess,))\n            t.daemon = True # thread will close when parent quits\n            t.start()\n            threads.append(t)\n        return threads\n\nsess = tf.Session(config=tf.ConfigProto(intra_op_parallelism_threads=24, \n                 inter_op_parallelism_threads=24))\n</code></pre>\n\n<p>I had to change this because I couldn't feed dict with variable width. Does anyone know if there's a good solution for this?</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 11190, "user_id": 48956, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/06f001142c96af8fb111127e63d92579?s=128&d=identicon&r=PG", "display_name": "user48956", "link": "https://stackoverflow.com/users/48956/user48956"}, "edited": false, "score": 0, "creation_date": 1529536725, "post_id": 50958316, "comment_id": 88913912, "body": "Thanks. But <code>sys.__class__ = HookedModuleType</code> ==&gt; <code>TypeError: __class__ assignment: only for heap types</code>  :-("}, {"owner": {"reputation": 11190, "user_id": 48956, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/06f001142c96af8fb111127e63d92579?s=128&d=identicon&r=PG", "display_name": "user48956", "link": "https://stackoverflow.com/users/48956/user48956"}, "edited": false, "score": 0, "creation_date": 1529536768, "post_id": 50958316, "comment_id": 88913921, "body": "... in python 2.7"}, {"owner": {"reputation": 11190, "user_id": 48956, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/06f001142c96af8fb111127e63d92579?s=128&d=identicon&r=PG", "display_name": "user48956", "link": "https://stackoverflow.com/users/48956/user48956"}, "edited": false, "score": 0, "creation_date": 1529536900, "post_id": 50958316, "comment_id": 88913947, "body": "And <code>sys.__dict__ = HookedDict(sys.__dict__)</code> ==&gt; <code>TypeError: readonly attribute</code>"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 11190, "user_id": 48956, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/06f001142c96af8fb111127e63d92579?s=128&d=identicon&r=PG", "display_name": "user48956", "link": "https://stackoverflow.com/users/48956/user48956"}, "edited": false, "score": 0, "creation_date": 1529537010, "post_id": 50958316, "comment_id": 88913969, "body": "@user48956 See the third option then."}, {"owner": {"reputation": 11190, "user_id": 48956, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/06f001142c96af8fb111127e63d92579?s=128&d=identicon&r=PG", "display_name": "user48956", "link": "https://stackoverflow.com/users/48956/user48956"}, "edited": false, "score": 0, "creation_date": 1529537219, "post_id": 50958316, "comment_id": 88914015, "body": "This did it. I didn&#39;t find a ModuleProxy class but @kindall shows how."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 11190, "user_id": 48956, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/06f001142c96af8fb111127e63d92579?s=128&d=identicon&r=PG", "display_name": "user48956", "link": "https://stackoverflow.com/users/48956/user48956"}, "edited": false, "score": 0, "creation_date": 1529537258, "post_id": 50958316, "comment_id": 88914024, "body": "@user48956 What do you mean you didn&#39;t find it? You should be able to just copy and paste it from my answer; you don&#39;t need to find it anywhere else."}, {"owner": {"reputation": 11190, "user_id": 48956, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/06f001142c96af8fb111127e63d92579?s=128&d=identicon&r=PG", "display_name": "user48956", "link": "https://stackoverflow.com/users/48956/user48956"}, "edited": false, "score": 0, "creation_date": 1529537352, "post_id": 50958316, "comment_id": 88914042, "body": "Python 2.7 has no ModuleProxy class. @kindall&#39;s example does this nicely though."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 11190, "user_id": 48956, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/06f001142c96af8fb111127e63d92579?s=128&d=identicon&r=PG", "display_name": "user48956", "link": "https://stackoverflow.com/users/48956/user48956"}, "edited": false, "score": 0, "creation_date": 1529537390, "post_id": 50958316, "comment_id": 88914050, "body": "@user48956 Of course Python 2.7 has no ModuleProxy class. That&#39;s why I had to write one in my answer. <a href=\"https://repl.it/repls/ParchedEmbellishedCensorware\" rel=\"nofollow noreferrer\">You can see it working here.</a>"}, {"owner": {"reputation": 11190, "user_id": 48956, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/06f001142c96af8fb111127e63d92579?s=128&d=identicon&r=PG", "display_name": "user48956", "link": "https://stackoverflow.com/users/48956/user48956"}, "edited": false, "score": 0, "creation_date": 1529537574, "post_id": 50958316, "comment_id": 88914092, "body": "Cool... it showed up after reloading (or I missed it first time around)."}, {"owner": {"reputation": 11190, "user_id": 48956, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/06f001142c96af8fb111127e63d92579?s=128&d=identicon&r=PG", "display_name": "user48956", "link": "https://stackoverflow.com/users/48956/user48956"}, "edited": false, "score": 0, "creation_date": 1529537616, "post_id": 50958316, "comment_id": 88914100, "body": "Thanks -- its a pretty comprehensive answer."}, {"owner": {"reputation": 11190, "user_id": 48956, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/06f001142c96af8fb111127e63d92579?s=128&d=identicon&r=PG", "display_name": "user48956", "link": "https://stackoverflow.com/users/48956/user48956"}, "edited": false, "score": 0, "creation_date": 1529599785, "post_id": 50958316, "comment_id": 88943778, "body": "Thanks again -- this let me isolate and resolve a bug in numba."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 2, "last_activity_date": 1529537625, "last_edit_date": 1529537625, "creation_date": 1529536572, "answer_id": 50958316, "question_id": 50958222, "link": "https://stackoverflow.com/questions/50958222/possible-to-break-on-module-namespace-assignments/50958316#50958316", "title": "Possible to break on module namespace assignments?", "body": "<p><code>__setattr__</code> is a <a href=\"https://docs.python.org/3/reference/datamodel.html#special-method-lookup\" rel=\"nofollow noreferrer\">special method</a>:</p>\n\n<blockquote>\n  <p>For custom classes, implicit invocations of special methods are only guaranteed to work correctly if defined on an object\u2019s type, not in the object\u2019s instance dictionary.</p>\n</blockquote>\n\n<p>Python doesn't document anywhere exactly which special methods skip the instance dictionary, and when they do so\u2014in fact, it's really up to each implementation\u2014but (at least in CPython and PyPy), <code>__setattr__</code> always goes straight to the type.</p>\n\n<p>Note that <a href=\"https://www.python.org/dev/peps/pep-0562/\" rel=\"nofollow noreferrer\">PEP 562</a> adds a special case for <code>__getattr__</code> and <code>__dir__</code> on <code>ModuleType</code> to Python 3.7, but does not include <code>__setattr__</code>.</p>\n\n<p>So, assigning <code>sys.__setattr__</code> has no effect.</p>\n\n<p>This is also why <code>'__setattr__' in dir(sys)</code> is False\u2014just as it is for anything that isn't a type. The <code>dir</code> function doesn't return attributes found on the class (or inherited from a base class). If you want to check for an attribute, you normally use <code>hasattr(sys, '__setattr__')</code>\u2014or, better, just try to access the attribute (because that works even with, e.g., dynamic attributes created by custom <code>__getattribute__</code>).</p>\n\n<p>Also, this means that the place to set your breakpoint would be <code>types.ModuleType.__setattr__</code> (or <code>type(sys).__setattr__</code>, which is the same place). But that isn't going to work in CPython, because that's a C function slot on a builtin type (actually just inherited from <code>object.__setattr__</code>), not a Python method.</p>\n\n<hr>\n\n<p>There are two traditional ways around this. Neither of them is guaranteed to work with builtin modules; from a quick test, with CPython 3.7, the first one works but the second doesn't. But try them both on your own Python implementation/version.</p>\n\n<hr>\n\n<p>First, you can just create a subclass:</p>\n\n<pre><code>class HookedModuleType(types.ModuleType):\n    def __setattr__(self, name, value):\n        print(f'{self.__name__}.__setattr__({name}, {value})')\n        return super().__setattr__(name, value)\n</code></pre>\n\n<p>\u2026 and then re-type the module:</p>\n\n<pre><code>mymodule.__class__ = HookedModuleType\n</code></pre>\n\n<hr>\n\n<p>Alternatively, since <code>ModuleType</code> doesn't override the default behavior of <code>__setattr__</code>, it just inherits it from <code>object</code>, which means that all it does is set <code>self.__dict__[name] = value</code>. So, you can write a <code>dict</code> that intercepts <code>__setitem__</code> and get the same effect:</p>\n\n<pre><code>class HookedDict(dict):\n    def __setitem__(self, key, value):\n        print(f'{self._name}.__setitem__({key}, {value})')\n        return super().__setitem__(key, value)\n\nmymodule.__dict__ = HookedDict(mymodule.__dict__)\nmymodule.__dict__._name = mymodule.__name__\n</code></pre>\n\n<hr>\n\n<p>If neither of these works, you have to create a slightly more complicated class that proxies to an actual module object:</p>\n\n<pre><code>class ModuleProxy(object):\n    def __init__(self, module):\n        object.__setattr__(self, '_module', module)\n    def __getattr__(self, name):\n        return getattr(self._module, name)\n    def __delattr__(self, name):\n        delattr(self._module, name)\n    def __setattr__(self, name, value):\n        print(f'{self._module.__name__}.__setattr__({name}, {value})')\n        setattr(self._module, name, value)\n</code></pre>\n\n<p>\u2026 and then replace the module with a proxy to it:</p>\n\n<pre><code>sys = sys.modules['sys'] = ModuleProxy(sys)\n</code></pre>\n\n<p>This one is a bit easier to get wrong, and may cause some weird behavior in a few edge cases, but it doesn't rely on any non-guaranteed behavior, and it seems to work in CPython 3.7, 3.6, and 2.7 and PyPy 5.10/3.5 and 5.10/2.7 (obviously 2.7 requires changing the f-string to a <code>format</code> call).</p>\n"}, {"tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": false, "score": 2, "last_activity_date": 1529536577, "creation_date": 1529536577, "answer_id": 50958318, "question_id": 50958222, "link": "https://stackoverflow.com/questions/50958222/possible-to-break-on-module-namespace-assignments/50958318#50958318", "title": "Possible to break on module namespace assignments?", "body": "<p>A proxy or wrapper class will work:</p>\n\n<pre><code>class DebugModule(object):\n    def __init__(self, module):\n       self.__dict__[\"_module\"] = module\n    def __getattr__(self, name):\n        return getattr(self._module, name)\n    def __setattr__(self, name, value):\n        setattr(self._module, name, value)\n        print(\"{}.{} = {}\".format(self._module.__name__, name, repr(value)))\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>import sys\nsys = DebugModule(sys)\n</code></pre>\n"}], "owner": {"reputation": 11190, "user_id": 48956, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/06f001142c96af8fb111127e63d92579?s=128&d=identicon&r=PG", "display_name": "user48956", "link": "https://stackoverflow.com/users/48956/user48956"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 50958316, "answer_count": 2, "score": 0, "last_activity_date": 1529537625, "creation_date": 1529535792, "last_edit_date": 1529536534, "question_id": 50958222, "link": "https://stackoverflow.com/questions/50958222/possible-to-break-on-module-namespace-assignments", "title": "Possible to break on module namespace assignments?", "body": "<p>I'm trying to track down the cause of a bug: <a href=\"https://github.com/numba/numba/issues/3027\" rel=\"nofollow noreferrer\">https://github.com/numba/numba/issues/3027</a></p>\n\n<p>It seems that for some older ubuntu installations, compiling a recursive numba function causes sys.stdout to be reset. I've verified that <a href=\"https://stackoverflow.com/questions/50880121/possible-to-know-if-a-python-module-has-been-reloaded\">sys is not being reloaded</a>, instead it must be that something somewhere is assigning to sys. So, I'd like to arrange for a breakpoint to be hit if members of the sys namespace are assigned to. Is this possible?</p>\n\n<p>Reassigning: <code>sys.__setattr__</code>, <code>__builtins__.setattr</code> doesn't seem to catch it:</p>\n\n<pre><code>import sys\n\ndef f(*args, **kw):\n    print &gt;&gt;sys.stderr, args, kw\n    raise Exception(\"Break here\")  # Never reached\n\nprint &gt;&gt;sys.stderr, sys.__setattr__\nsys.__setattr__ = f\n__builtins__.setattr = f\nprint &gt;&gt;sys.stderr, sys.__setattr__ #Changed\n\n\nsys.stdout = 12345 # Should cause exception.\n</code></pre>\n\n<p>And also, there's something magic about the sys namespace:</p>\n\n<pre><code>pprint.pprint(dir(sys)) # No __setattr__ here\nprint \"__setattr__\" in dir(sys) # False. Nope\n\n# But this:\nprint &gt;&gt;sys.stderr, sys.__setattr__  # &lt;method-wrapper '__setattr__' of module object at 0x7f8065b6cbb0&gt;\n</code></pre>\n"}, {"tags": ["python", "numpy", "image-processing", "vectorization"], "answers": [{"tags": [], "owner": {"reputation": 17989, "user_id": 365102, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3139989e6548e7deac2cd45253d60df?s=128&d=identicon&r=PG", "display_name": "Mateen Ulhaq", "link": "https://stackoverflow.com/users/365102/mateen-ulhaq"}, "is_accepted": true, "score": 1, "last_activity_date": 1529535813, "creation_date": 1529535813, "answer_id": 50958223, "question_id": 50958158, "link": "https://stackoverflow.com/questions/50958158/vectorizing-code-of-looping-through-numpy-3d-array/50958223#50958223", "title": "Vectorizing code of looping through NumPy 3D array", "body": "<p>If <code>img</code> and <code>truth_table</code> are arrays where <code>truth_table</code> is of broadcastable shape:</p>\n\n<pre><code>img[truth_table == 12] = 0\n</code></pre>\n\n<p>You don't need to explicitly create another axis of 4 channels since broadcasting handles it for you.</p>\n"}], "owner": {"reputation": 707, "user_id": 8673320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IXaTouByYlA/AAAAAAAAAAI/AAAAAAAAFz0/M4v8pi51Xbs/photo.jpg?sz=128", "display_name": "Aviv Shai", "link": "https://stackoverflow.com/users/8673320/aviv-shai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 50958223, "answer_count": 1, "score": 0, "last_activity_date": 1529535813, "creation_date": 1529535330, "question_id": 50958158, "link": "https://stackoverflow.com/questions/50958158/vectorizing-code-of-looping-through-numpy-3d-array", "title": "Vectorizing code of looping through NumPy 3D array", "body": "<p>I'm currently writing a program that processes an image and returns the same image except some pixels that are identified as a certain feature (found via <code>truth_table</code>) are blackened. It works, but since the images are around 5000 by 5000 pixels, it takes about 1 whole minute just to go through this part:</p>\n\n<pre><code>image_DN_no_12s = np.copy(image_DN)\nfor y in range(y_size):\n    for x in range(x_size):\n        if truth_table[y, x] == 12:\n            image_DN_no_12s[y, x, :] = np.zeros((1, 1, 4))\n</code></pre>\n\n<p>(The 3rd dimension in <code>np.zeros()</code> is 4 because I am reading red, green, blue, and infrared channels.)</p>\n\n<p>I would like to vectorize this code so that it will run faster. I have tried using <code>np.where()</code> and boolean indexing, but I can't seem to find a way to make it run faster.</p>\n\n<p>Thanks in advance for the help!</p>\n"}, {"tags": ["python", "search", "dijkstra", "shortest-path"], "answers": [{"tags": [], "owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "is_accepted": true, "score": 1, "last_activity_date": 1529540041, "creation_date": 1529540041, "answer_id": 50958701, "question_id": 50958152, "link": "https://stackoverflow.com/questions/50958152/yens-algorithm-implementation-not-choosing-shortest-paths/50958701#50958701", "title": "Yen&#39;s Algorithm implementation not choosing shortest paths", "body": "<pre><code>import copy\nimport heapq\n#from dotmap import Map\nfrom itertools import count\n\nclass Map(dict):\n    def __getattr__(self, k):\n        return self[k]\n    def __setattr__(self, k, v):\n        self[k] = v\n\ngraph = {\n    'A': ['B', 'E'],\n    'B': ['C', 'D'],\n    'C': ['G'],\n    'D': ['C', 'F'],\n    'E': ['D'],\n    'F': [],\n    'G': ['F']\n}\n\nclass PriorityQueue:\n    def __init__(self):\n        self.elements = []\n        self._counter = count()\n\n    def empty(self):\n        return len(self.elements) == 0\n\n    def put(self, item, priority):\n        heapq.heappush(self.elements, (priority, item,))\n\n    def get(self):\n        return heapq.heappop(self.elements)[1]\n\n\nclass AStar:\n    def __init__(self, graph, start, goals=[]):\n        self.graph = graph\n        self.start = start\n        self.frontier = PriorityQueue()\n        self.frontier.put(start, 0)\n        self.previous = {}\n        self.previous[start] = None\n        self.costs = {}\n        self.costs[start] = 0\n        self.final_path = None\n        self.goals = goals\n        self.goal = None\n\n    def search(self):\n        graph = self.graph\n        frontier = self.frontier\n        goals = self.goals\n        costs = self.costs\n        while not frontier.empty():\n            state = frontier.get()\n            if state in goals:\n                cost = self.costs[state]\n                self.goal = state\n                self.final_path = self.trace_path()\n                return Map({'path': self.final_path, 'cost': cost})\n\n            for next_state in graph[state]:\n                new_cost = costs[state] + 1\n                if next_state not in costs or new_cost &lt; costs[next_state]:\n                    costs[next_state] = new_cost\n                    priority = new_cost\n                    frontier.put(next_state, priority)\n                    self.previous[next_state] = state\n        # No path found\n        return Map({'path': [], 'cost': float('inf')})\n\n    def trace_path(self):\n        current = self.goal\n        path = []\n        while current != self.start:\n            path.append(current)\n            current = self.previous[current]\n        path.append(self.start)\n        path.reverse()\n        return path\n\ndef YenKSP(graph, source, sink, k_paths):\n    A = [AStar(graph, source, sink).search().path]\n    B = []\n\n    for _ in range(1, k_paths):\n        for i in range(len(A[-1]) - 1):\n            graph_clone = copy.deepcopy(graph)\n\n            spur_node = A[-1][i]\n            root_path = A[-1][:i+1]\n            for path in A:\n                if len(path) &gt; i and root_path == path[:i+1]:\n                    if path[i+1] in graph_clone[path[i]]:\n                        graph_clone[path[i]].remove(path[i+1])\n\n            result = AStar(graph_clone, spur_node, sink).search()\n            spur_path = result.path\n            total_path = root_path[:-1] + spur_path\n            spur_cost = AStar(graph_clone, source, spur_node).search().cost\n            B.append(Map({'path': total_path, 'cost': result.cost + spur_cost}))\n\n        if len(B) == 0:\n            break\n\n        B.sort(key=lambda p: (p.cost, len(p.path)))\n        best_b = B.pop(0)\n        if best_b.cost != float('inf'):\n            A.append(best_b.path)\n    return A\n\npaths = YenKSP(graph, 'A', 'F', 4)\nprint(paths)\n</code></pre>\n\n<p>Produces:</p>\n\n<pre>\n[['A', 'B', 'D', 'F'], ['A', 'E', 'D', 'F'], ['A', 'B', 'C', 'G', 'F'], ['A', 'B', 'D', 'C', 'G', 'F']]\n</pre>\n\n<p>The main issue was that when there was no path found, your default returned a path with 0 cost.  So when sorted by path cost, these paths were appearing as the best choice in <code>B</code> and being added to <code>A</code>.  I changed the default path cost to <code>float('inf')</code>.  Doing so revealed an error that could occur when you tried to remove the same edge twice from <code>graph_clone</code> (inside <code>for path in A: ...</code>), so I added an <code>if</code> check to conditionally remove the edge.  The two last things <a href=\"https://www.diffchecker.com/JenTEakP\" rel=\"nofollow noreferrer\">the diff</a> indicate that I did were (a) imitate your <code>dotmap.Map</code> class (you can remove this and uncomment the import), and (b) only add a path to the resultset <code>A</code> if the cost is finite.</p>\n"}], "owner": {"reputation": 485, "user_id": 4979586, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/6go5k.jpg?s=128&g=1", "display_name": "adapap", "link": "https://stackoverflow.com/users/4979586/adapap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "accepted_answer_id": 50958701, "answer_count": 1, "score": 0, "last_activity_date": 1529540041, "creation_date": 1529535307, "question_id": 50958152, "link": "https://stackoverflow.com/questions/50958152/yens-algorithm-implementation-not-choosing-shortest-paths", "title": "Yen&#39;s Algorithm implementation not choosing shortest paths", "body": "<p>I am using Yen's Algorithm (<a href=\"https://en.wikipedia.org/wiki/Yen%27s_algorithm\" rel=\"nofollow noreferrer\" title=\"Wikipedia\">Wikipedia</a>) to find k shortest paths in a graph. In the example below, my graph is a dictionary where each node is a key, with its value being the neighbors. <code>Map()</code> from <code>dotmap</code> simply allows for dictionaries to be converted into an object where keys can be accessed with dot notation. I want to find the four shortest paths in descending order from A to F where every edge has equal weight. The first two are ties (A > B > D > F) and (A > E > D > F), and the next two are (A > B > C > G > F) and finally (A > B > D > C > G > F). It is possible that my implementation of Dijkstra's (called AStar despite having no heuristic) is flawed because it is returning an empty list when no path is found. How can I have my code only pick the valid paths? Currently it returns <code>[['A', 'B', 'D', 'F'], ['A', 'E', 'D', 'F'], [], []]</code> -- it should return <code>[['A', 'B', 'D', 'F'], ['A', 'E', 'D', 'F'], ['A', 'B', 'C', 'G', 'F'], ['A', 'B', 'D', 'C', 'G', 'F']]</code> which are the shortest paths.</p>\n\n<pre><code>import copy\nimport heapq\nfrom dotmap import Map\nfrom itertools import count\n\ngraph = {\n    'A': ['B', 'E'],\n    'B': ['C', 'D'],\n    'C': ['G'],\n    'D': ['C', 'F'],\n    'E': ['D'],\n    'F': [],\n    'G': ['F']\n}\n\nclass PriorityQueue:\n    def __init__(self):\n        self.elements = []\n        self._counter = count()\n\n    def empty(self):\n        return len(self.elements) == 0\n\n    def put(self, item, priority):\n        heapq.heappush(self.elements, (priority, item,))\n\n    def get(self):\n        return heapq.heappop(self.elements)[1]\n\n\nclass AStar:\n    def __init__(self, graph, start, goals=[]):\n        self.graph = graph\n        self.start = start\n        self.frontier = PriorityQueue()\n        self.frontier.put(start, 0)\n        self.previous = {}\n        self.previous[start] = None\n        self.costs = {}\n        self.costs[start] = 0\n        self.final_path = None\n        self.goals = goals\n        self.goal = None\n\n    def search(self):\n        graph = self.graph\n        frontier = self.frontier\n        goals = self.goals\n        costs = self.costs\n        while not frontier.empty():\n            state = frontier.get()\n            if state in goals:\n                cost = self.costs[state]\n                self.goal = state\n                self.final_path = self.trace_path()\n                return Map({'path': self.final_path, 'cost': cost})\n\n            for next_state in graph[state]:\n                new_cost = costs[state] + 1\n                if next_state not in costs or new_cost &lt; costs[next_state]:\n                    costs[next_state] = new_cost\n                    priority = new_cost\n                    frontier.put(next_state, priority)\n                    self.previous[next_state] = state\n        # No path found\n        return Map({'path': [], 'cost': 0})\n\n    def trace_path(self):\n        current = self.goal\n        path = []\n        while current != self.start:\n            path.append(current)\n            current = self.previous[current]\n        path.append(self.start)\n        path.reverse()\n        return path\n\ndef YenKSP(graph, source, sink, k_paths):   \n    graph_clone = copy.deepcopy(graph)\n    A = [AStar(graph, source, sink).search().path]\n    B = []\n\n    for k in range(1, k_paths):\n        for i in range(len(A[-1]) - 1):\n            spur_node = A[-1][i]\n            root_path = A[-1][:i+1]\n            for path in A:\n                if len(path) &gt; i and root_path == path[:i+1]:\n                    graph_clone[path[i]].remove(path[i+1])\n\n            result = AStar(graph_clone, spur_node, sink).search()\n            spur_path = result.path\n            total_path = root_path[:-1] + spur_path\n            spur_cost = AStar(graph_clone, source, spur_node).search().cost\n            B.append(Map({'path': total_path, 'cost': result.cost + spur_cost}))\n            graph_clone = copy.deepcopy(graph)\n        if len(B) == 0:\n            break\n        B.sort(key=lambda p: (p.cost, len(p.path)))\n        A.append(B[0].path)\n        B.pop()\n    return A\n\npaths = YenKSP(graph, 'A', 'F', 4)\nprint(paths)\n</code></pre>\n"}, {"tags": ["python", "decimal", "floating-accuracy", "currency-formatting"], "comments": [{"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1529535970, "post_id": 50958150, "comment_id": 88913743, "body": "what makes you think these are errors accumulating? <code>float</code> should not loose any precision in such calculation. can you give an example and show how you evaluate precision error?"}, {"owner": {"reputation": 1, "user_id": 9970055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6f0ed17deed8afe0cdb53b4195a4ae1?s=128&d=identicon&r=PG", "display_name": "KPA", "link": "https://stackoverflow.com/users/9970055/kpa"}, "reply_to_user": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1529536610, "post_id": 50958150, "comment_id": 88913889, "body": "@Evgeny You&#39;re right. It ends up being the same amount in the sample calculations I made and the error isn&#39;t big enough to show up. However, do you think the &#39;yearly&#39; conversion to Decimal as described in the (updated) question is a good best practice? Or should Decimal conversions only take place when data is being &#39;stored&#39;?"}, {"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1529537605, "post_id": 50958150, "comment_id": 88914099, "body": "I think you also need to include rounding of floats to your set of operations, which is not the same as using Decimals. For stricter operations &#39;on the balance&#39; you would rather use Decimals, which should add up stricter. For  calculating the coumpound rate you can perform the operation on floats and the round. I think there is important difference between rounding (dropping insignificant ammoints) and decimal representation (overcoming binary representation format)."}], "owner": {"reputation": 1, "user_id": 9970055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6f0ed17deed8afe0cdb53b4195a4ae1?s=128&d=identicon&r=PG", "display_name": "KPA", "link": "https://stackoverflow.com/users/9970055/kpa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 322, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1529536799, "creation_date": 1529535295, "last_edit_date": 1529536799, "question_id": 50958150, "link": "https://stackoverflow.com/questions/50958150/what-data-type-to-store-interest-rates-and-sums-of-compound-interest-calculation", "title": "What data type to store interest rates and sums of compound interest calculations?", "body": "<p>I use <code>Decimal</code> for currency amounts. However, I was wondering what data type to put the interest rate in. </p>\n\n<p>If I set it to <code>float</code>, I multiply the money amount (<code>Decimal</code>) with <code>float</code>, resulting in an 'inexact' <code>Decimal</code>. If I set it to <code>Decimal</code>, I get problems once there is compound interest, eventually also getting an inexact amount once the precision of the <code>Decimal</code> context is exceeded.</p>\n\n<p>I tried to find information on how to save interest rates and saw some examples using <code>float</code> and assume that this is common practice. </p>\n\n<p>Does that mean that I should go with <code>float</code> for interest and convert any amount to <code>Decimal</code> with a precision of '0.01' at the end of every financial year (and then use the returned value as starting value for the following year)? Would that be the correct way to code this?</p>\n"}, {"tags": ["python", "python-3.x", "tkinter"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7111497"}, "edited": false, "score": 1, "creation_date": 1529551163, "post_id": 50958112, "comment_id": 88916777, "body": "What is in the variable <code>nobre_jouer</code> ?"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1529552285, "post_id": 50958112, "comment_id": 88916980, "body": "The above code does not give that error. You are missing imports. When you fix the missing import you get another error. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1529552493, "post_id": 50958112, "comment_id": 88917017, "body": "The first step in debugging this is to verify that <code>nombre_jouer</code> is what you are assuming it is. Have you done that? What is in that variable immediately before calling <code>eval</code>?"}], "owner": {"reputation": 11, "user_id": 9970087, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-EBT5CuzhAPU/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq20DGrHIVj83fMINRr99gmaIYoohg/mo/photo.jpg?sz=128", "display_name": "mohamed zahrioui", "link": "https://stackoverflow.com/users/9970087/mohamed-zahrioui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1529551023, "creation_date": 1529534998, "last_edit_date": 1529551023, "question_id": 50958112, "link": "https://stackoverflow.com/questions/50958112/unexpected-eof-while-parsing-with-tkinter", "title": "Unexpected EOF while parsing with Tkinter", "body": "<p>I execute the following function:</p>\n\n<pre><code>def multi_joueurs():\n    global liste_des_joueurs\n    liste_des_joueurs=[]\n\ndef  nombre_des_joueurs():\n    fen2305=Tk()\n    fen2305.title(\"un seul joueur\")\n    fen2305.config(bg='royalblue')\n    label=Label(fen2305,text=\"nombre des joueurs dans ce matche:\")\n    global nobre_jouer\n    nobre_joer=Entry(fen2305)\n    botn=Button(fen2305,text=\"valider\")\n    label.grid()\n    nobre_joer.grid()\n    botn.grid()\n    nobre_jouer=nobre_joer.get()\n    ferme(fen2305)\n    fen2305.mainloop()\n\n\ndef ouvre(m):\n    fen23055=Tk()\n    fen23055.title(\"un seul joueur\")\n    fen23055.config(bg='royalblue')\n    label=Label(fen23055,text=\"donner le nom du joueur \"+str(m)+\":\")\n    nom_joueur=Entry(fen23055)\n\n    label.grid()\n    nom_joueur.grid()\n\n    def va():\n        global nom_pre_joueur\n        nom_pre_joueur=nom_joueur.get()\n        if nom_pre_joueur!='':\n            fen23055.destroy()\n    botn=Button(fen23055,text=\"valider\",command=va)\n    botn.grid()\n    fen23055.mainloop()\n\n\n\ndef nom_des_joueurs():\n    for m in range(int(eval(nobre_jouer))):\n        ouvre(nobre_jouer)\n        liste_des_joueurs.append(str(nom_pre_joueur))\n\n\nnombre_des_joueurs()\nnom_des_joueurs()\n</code></pre>\n\n<p>But here is the error:</p>\n\n<pre><code>, line 4, in nom_des_joueurs\n    for m in range(int(eval(nobre_jouer))):\n  File \"&lt;string&gt;\", line 0\n\n    ^\nSyntaxError: unexpected EOF while parsing\n</code></pre>\n"}, {"tags": ["python", "keras", "lstm", "keras-layer"], "answers": [{"tags": [], "owner": {"reputation": 809, "user_id": 1366393, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bad39cf0ed7c52f72f9678b7de802ad1?s=128&d=identicon&r=PG", "display_name": "johngull", "link": "https://stackoverflow.com/users/1366393/johngull"}, "is_accepted": false, "score": 0, "last_activity_date": 1531407594, "creation_date": 1531407594, "answer_id": 51308892, "question_id": 50958077, "link": "https://stackoverflow.com/questions/50958077/how-to-use-convlstm2d-followed-by-conv2d-in-keras-python/51308892#51308892", "title": "How to use ConvLSTM2D followed by Conv2D in Keras python", "body": "<p>The problem in your model that you try to use the sequence for the regular convolutional layer.\nThe only thing that you need is to remove <code>return_sequences=True</code> in <code>ConvLSTM2D</code>.</p>\n\n<p>So this line:</p>\n\n<pre><code>model.add(ConvLSTM2D(3, kernel_size=3, padding = \"same\", batch_input_shape=(1, None, 2*WINDOW_H+1, 2*WINDOW_W+1, 1), return_sequences=True, stateful=True))\n</code></pre>\n\n<p>should be like this:</p>\n\n<pre><code>model.add(ConvLSTM2D(3, kernel_size=3, padding = \"same\", batch_input_shape=(1, None, 2*WINDOW_H+1, 2*WINDOW_W+1, 1), stateful=True))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 324, "user_id": 4341458, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/563682825/picture?type=large", "display_name": "Pelonomi Moiloa", "link": "https://stackoverflow.com/users/4341458/pelonomi-moiloa"}, "is_accepted": false, "score": 1, "last_activity_date": 1542286233, "creation_date": 1542286233, "answer_id": 53319878, "question_id": 50958077, "link": "https://stackoverflow.com/questions/50958077/how-to-use-convlstm2d-followed-by-conv2d-in-keras-python/53319878#53319878", "title": "How to use ConvLSTM2D followed by Conv2D in Keras python", "body": "<p>I think you would need to do a time distributed Conv2D layer so that the dimensions match. Like this maybe:</p>\n\n<pre><code>model = Sequential()\nmodel.add(ConvLSTM2D(3, kernel_size=3, padding = \"same\", batch_input_shape=(1, None, 2*WINDOW_H+1, 2*WINDOW_W+1, 1), return_sequences=True, stateful=True))\nmodel.add(TimeDistributed((Conv2D(1, kernel_size=3, padding = \"same\")))\nmodel.compile(loss='binary_crossentropy', optimizer='adam', metrics=['accuracy'])\nmodel.summary()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11398010, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205946649621050/picture?type=large", "display_name": "Anggraini Puspitasari", "link": "https://stackoverflow.com/users/11398010/anggraini-puspitasari"}, "is_accepted": false, "score": 0, "last_activity_date": 1581064300, "last_edit_date": 1581064300, "creation_date": 1581062868, "answer_id": 60109387, "question_id": 50958077, "link": "https://stackoverflow.com/questions/50958077/how-to-use-convlstm2d-followed-by-conv2d-in-keras-python/60109387#60109387", "title": "How to use ConvLSTM2D followed by Conv2D in Keras python", "body": "<p>In the <code>ConvLSTM2D</code> layer before <code>Conv2D</code>, you use <code>return_sequence</code> is False. After you run the program, you can get the result ndim=4.</p>\n"}], "owner": {"reputation": 128, "user_id": 2421298, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/64a552a0c393761906eb0e9c1120a33b?s=128&d=identicon&r=PG", "display_name": "Manish Sharma", "link": "https://stackoverflow.com/users/2421298/manish-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 824, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1581064300, "creation_date": 1529534733, "question_id": 50958077, "link": "https://stackoverflow.com/questions/50958077/how-to-use-convlstm2d-followed-by-conv2d-in-keras-python", "title": "How to use ConvLSTM2D followed by Conv2D in Keras python", "body": "<p>I am trying to use the following model in Keras, where <code>ConvLSTM2D</code> output is followed by  <code>Conv2D</code> to generate segmentation-like output. Input and output should be time series of the size <code>(2*WINDOW_H+1, 2*WINDOW_W+1)</code> each</p>\n\n<pre><code>model = Sequential()\nmodel.add(ConvLSTM2D(3, kernel_size=3, padding = \"same\", batch_input_shape=(1, None, 2*WINDOW_H+1, 2*WINDOW_W+1, 1), return_sequences=True, stateful=True))\nmodel.add(Conv2D(1, kernel_size=3, padding = \"same\"))\nmodel.compile(loss='binary_crossentropy', optimizer='adam', metrics=['accuracy'])\nmodel.summary()\n</code></pre>\n\n<p>However, this gives the following error (when adding Conv2D):</p>\n\n<pre><code>Input 0 is incompatible with layer conv2d_1: expected ndim=4, found ndim=5\n</code></pre>\n\n<p>Any pointers on where I might be wrong really appreciated. Thanks!</p>\n"}, {"tags": ["python", "django", "tastypie"], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 6553469, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jjGuqbnXZy0/AAAAAAAAAAI/AAAAAAAAAG4/WX77l_gqUJU/photo.jpg?sz=128", "display_name": "aal", "link": "https://stackoverflow.com/users/6553469/aal"}, "is_accepted": false, "score": 1, "last_activity_date": 1529535878, "creation_date": 1529535878, "answer_id": 50958231, "question_id": 50958071, "link": "https://stackoverflow.com/questions/50958071/transform-post-data-before-persisting/50958231#50958231", "title": "Transform POST Data Before Persisting", "body": "<p>From <a href=\"https://django-tastypie.readthedocs.io/en/latest/validation.html#cleaneddataformvalidation\" rel=\"nofollow noreferrer\">the docs</a>, extend the <code>CleanedDataFormValidation</code> class and override the <code>is_valid</code> method with your business logic. Return <code>form.errors</code> if there are errors (<a href=\"https://github.com/django-tastypie/django-tastypie/blob/604e4ac97046773625c99ae43dd1c1df1b4d39af/tastypie/validation.py#L93\" rel=\"nofollow noreferrer\">official tastypie usage</a>).</p>\n"}], "owner": {"reputation": 1284, "user_id": 4167140, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/xWx95.jpg?s=128&g=1", "display_name": "redress", "link": "https://stackoverflow.com/users/4167140/redress"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "closed_date": 1529562300, "answer_count": 1, "score": 0, "last_activity_date": 1529535878, "creation_date": 1529534709, "last_edit_date": 1529535074, "question_id": 50958071, "link": "https://stackoverflow.com/questions/50958071/transform-post-data-before-persisting", "closed_reason": "Needs more focus", "title": "Transform POST Data Before Persisting", "body": "<p>I am writing an API with TastyPie that a Django application will hit.  One of the POST endpoints must validate data before inserting into the db.  The process includes checking a record in another table with a value in the POST data.</p>\n\n<p>How do I apply business logic before inserting the POST data?  If an insert is not deemed viable, how do I send a custom exception to the client?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 976, "user_id": 5352025, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5e471d4c27e99d76320c6cccf4905511?s=128&d=identicon&r=PG&f=1", "display_name": "JSolomonCulp", "link": "https://stackoverflow.com/users/5352025/jsolomonculp"}, "edited": false, "score": 0, "creation_date": 1529536185, "post_id": 50958206, "comment_id": 88913793, "body": "So I&#39;m hoping to expand this concept to functions that are a lot more complex than simply adding 5. Is it possible to do something like np.where(df1[2] &gt; 3, add5(df1[2]), df1[2])?"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 976, "user_id": 5352025, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5e471d4c27e99d76320c6cccf4905511?s=128&d=identicon&r=PG&f=1", "display_name": "JSolomonCulp", "link": "https://stackoverflow.com/users/5352025/jsolomonculp"}, "edited": false, "score": 0, "creation_date": 1529536383, "post_id": 50958206, "comment_id": 88913841, "body": "@JSolomonCulp, If it&#39;s a numeric function, it&#39;s <i>highly</i> likely you can vectorise it. So, in short, I advise against hypothetical judgements. If you have a complex algorithm which you are struggling to vectorise, it might be a good question <a href=\"https://stackoverflow.com/questions/ask\">to ask separately</a>."}, {"owner": {"reputation": 976, "user_id": 5352025, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5e471d4c27e99d76320c6cccf4905511?s=128&d=identicon&r=PG&f=1", "display_name": "JSolomonCulp", "link": "https://stackoverflow.com/users/5352025/jsolomonculp"}, "edited": false, "score": 0, "creation_date": 1529536737, "post_id": 50958206, "comment_id": 88913913, "body": "Fair enough, thanks for the help, np.where will definitely be helpful"}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 2, "last_activity_date": 1529535703, "creation_date": 1529535703, "answer_id": 50958206, "question_id": 50958065, "link": "https://stackoverflow.com/questions/50958065/pandas-vectorization-with-function-on-parts-of-column/50958206#50958206", "title": "Pandas Vectorization with Function on Parts of Column", "body": "<p>With Pandas, a function applied explicitly to each row typically cannot be vectorised. Even implicit loops such as <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.apply.html\" rel=\"nofollow noreferrer\"><code>pd.Series.apply</code></a> will likely be inefficient. Instead, you should use true vectorised operations, which lean heavily on NumPy in both functionality and syntax.</p>\n\n<p>In this case, you can use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html\" rel=\"nofollow noreferrer\"><code>numpy.where</code></a>:</p>\n\n<pre><code>df1[3] = np.where(df1[2] &gt; 3, df1[2] + 5, df1[2])\n</code></pre>\n\n<p>Alternatively, you can use <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.loc.html\" rel=\"nofollow noreferrer\"><code>pd.DataFrame.loc</code></a> in a couple of steps:</p>\n\n<pre><code>df1[3] = df1[2]\ndf1.loc[df1[2] &gt; 3, 3] = df1[2] + 5\n</code></pre>\n\n<p>In each case, the term <code>df1[2] &gt; 3</code> creates a Boolean series, which is then used to mask another series.</p>\n\n<p>Result:</p>\n\n<pre><code>print(df1)\n\n   0  1  2   3\n0  1  2  3   3\n1  5  7  8  13\n2  2  5  4   9\n</code></pre>\n"}], "owner": {"reputation": 976, "user_id": 5352025, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5e471d4c27e99d76320c6cccf4905511?s=128&d=identicon&r=PG&f=1", "display_name": "JSolomonCulp", "link": "https://stackoverflow.com/users/5352025/jsolomonculp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 50958206, "answer_count": 1, "score": 1, "last_activity_date": 1529535852, "creation_date": 1529534679, "last_edit_date": 1529535852, "question_id": 50958065, "link": "https://stackoverflow.com/questions/50958065/pandas-vectorization-with-function-on-parts-of-column", "title": "Pandas Vectorization with Function on Parts of Column", "body": "<p>So I have a dataframe that looks something like this: </p>\n\n<pre><code>df1 = pd.DataFrame([[1,2, 3], [5,7,8], [2,5,4]])\n   0  1  2\n0  1  2  3\n1  5  7  8\n2  2  5  4\n</code></pre>\n\n<p>I then have a function that adds 5 to a number called <code>add5</code>. I'm trying to create a new column in <code>df1</code> that adds 5 to all the numbers in column 2 that are greater than 3. I want to use vectorization not apply as this concept is going to be expanded to a dataset with hundreds of thousands of entries and speed will be important. I can do it without the greater than 3 constraint like this:</p>\n\n<pre><code>df1['3'] = add5(df1[2])\n</code></pre>\n\n<p>But my goal is to do something like this:</p>\n\n<pre><code>df1['3'] = add5(df1[2]) if df1[2] &gt; 3\n</code></pre>\n\n<p>Hoping someone can point me in the right direction on this. Thanks!</p>\n"}, {"tags": ["python", "sql", "python-3.x", "pandas", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 231, "user_id": 9500464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deeedf306963e26085787704c265663f?s=128&d=identicon&r=PG&f=1", "display_name": "satoshi", "link": "https://stackoverflow.com/users/9500464/satoshi"}, "edited": false, "score": 0, "creation_date": 1529538968, "post_id": 50958464, "comment_id": 88914417, "body": "No way dude <code>pandas.melt</code> ??? how do you even know this lol. Thank you so much. I am trying my own approach if you can take a look at my edit above."}], "tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": false, "score": 1, "last_activity_date": 1529537976, "last_edit_date": 1529537976, "creation_date": 1529537727, "answer_id": 50958464, "question_id": 50958010, "link": "https://stackoverflow.com/questions/50958010/pandas-appending-across-columns-or-sql/50958464#50958464", "title": "Pandas appending across columns (or SQL)", "body": "<p>That's what <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.melt.html\" rel=\"nofollow noreferrer\"><code>pandas.melt</code></a> does:</p>\n\n<pre><code>pd.melt(df, id_vars=['A', 'B', 'C'], var_name='Period', value_name='Cost')\n\n#   A  B  C    Period Cost\n#0  -  -  -  01/01/18    $\n#1  -  -  -  01/01/18    $\n#2  -  -  -  01/01/18    $\n#3  -  -  -  01/08/18    $\n#4  -  -  -  01/08/18    $\n#5  -  -  -  01/08/18    $\n</code></pre>\n\n<p>You can also set unchanged columns as index and then <code>stack</code> the other columns:</p>\n\n<pre><code>ids = ['A', 'B', 'C']\ndf.set_index(ids).stack().rename_axis(ids + ['Period']).rename('Cost').reset_index()\n\n#   A  B  C    Period Cost\n#0  -  -  -  01/01/18    $\n#1  -  -  -  01/08/18    $\n#2  -  -  -  01/01/18    $\n#3  -  -  -  01/08/18    $\n#4  -  -  -  01/01/18    $\n#5  -  -  -  01/08/18    $\n</code></pre>\n"}], "owner": {"reputation": 231, "user_id": 9500464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deeedf306963e26085787704c265663f?s=128&d=identicon&r=PG&f=1", "display_name": "satoshi", "link": "https://stackoverflow.com/users/9500464/satoshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529543057, "creation_date": 1529534252, "last_edit_date": 1592644375, "question_id": 50958010, "link": "https://stackoverflow.com/questions/50958010/pandas-appending-across-columns-or-sql", "title": "Pandas appending across columns (or SQL)", "body": "<p>I have the following dataframe where <code>-</code> and <code>$</code> is data</p>\n<pre><code>A B C 01/01/18 01/08/18\n- - -     $        $\n- - -     $        $\n- - -     $        $\n</code></pre>\n<p>I would like to transform into the following</p>\n<pre><code>A B C  Period   Cost\n- - -  01/01/18 $\n- - -  01/01/18 $\n- - -  01/01/18 $\n- - -  01/08/18 $\n- - -  01/08/18 $\n- - -  01/08/18 $\n</code></pre>\n<p>I know I can create two dataframes for each period <code>df1 and df2</code> then <code>total = df2.append(df1)</code> but I would have to create 52 dataframes for the year. Is there an easier way to do this using some fancy transpose?</p>\n<h2>Updated Approach</h2>\n<p>I am trying to do the following <code>df.grouby(['A','B',C'])</code> but I need to <code>df.transpose()</code> first I believe. If someone can help me out with this approach even if its in SQL I would appreciate it.</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9588242"}, "edited": false, "score": 0, "creation_date": 1529537575, "post_id": 50958008, "comment_id": 88914093, "body": "I just thought of something; if I try <code>scipy.ndimage.rotate()</code> on booleans, maybe they won&#39;t add like they did with numbers.  Confirming..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9588242"}, "reply_to_user": {"reputation": 7050, "user_id": 8033585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcd92ce2da15d74815d79b2908132d3?s=128&d=identicon&r=PG&f=1", "display_name": "AGN Gazer", "link": "https://stackoverflow.com/users/8033585/agn-gazer"}, "edited": false, "score": 0, "creation_date": 1529765650, "post_id": 50958008, "comment_id": 88998382, "body": "@AGNGazer I&#39;m not 100% sure of the criteria for closing a question, but I&#39;m asking for code.  I&#39;m not asking &quot;How do you convert between polar and Cartesian coordinates?&quot; which would be a math question.  My question is extremely computational and practical in nature"}, {"owner": {"reputation": 7050, "user_id": 8033585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcd92ce2da15d74815d79b2908132d3?s=128&d=identicon&r=PG&f=1", "display_name": "AGN Gazer", "link": "https://stackoverflow.com/users/8033585/agn-gazer"}, "edited": false, "score": 0, "creation_date": 1529770728, "post_id": 50958008, "comment_id": 88999552, "body": "You must understand that (in the general case) there is no way of rotating a bunch of pixels and have rotated coordinates be integers. So, then you need to &quot;resample&quot; your original image <code>I(i,j)</code> to a new grid <code>I(i&#39;,j&#39;)</code>. So, yeah, if it is OK for your problem - you can round to the nearest grid node. If you need to do better - use interpolation."}, {"owner": {"reputation": 7050, "user_id": 8033585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcd92ce2da15d74815d79b2908132d3?s=128&d=identicon&r=PG&f=1", "display_name": "AGN Gazer", "link": "https://stackoverflow.com/users/8033585/agn-gazer"}, "edited": false, "score": 0, "creation_date": 1529780113, "post_id": 50958008, "comment_id": 89001849, "body": "I misunderstood your question."}], "answers": [{"tags": [], "owner": {"reputation": 646, "user_id": 6565511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TOn0U.png?s=128&g=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6565511/nathan"}, "is_accepted": false, "score": -1, "last_activity_date": 1529629126, "creation_date": 1529629126, "answer_id": 50979278, "question_id": 50958008, "link": "https://stackoverflow.com/questions/50958008/how-can-i-vectorize-this-numpy-rotation-code/50979278#50979278", "title": "How can I vectorize this numpy rotation code?", "body": "<p>Here is some code for anyone also doing 3d modeling.  It solved my specific use-case pretty well.  Still figuring out how to rotate in the proper plane.  Hope it's helpful to you as well:</p>\n\n<pre><code>def rotate_model(m, theta):\n    '''\n        Redefines the prev 'rotate_model()' method\n        theta has to be in degrees\n    '''\n    rotated = scipy.ndimage.rotate(m, theta, axes=(1,2))\n    #       have tried (1,0), (2,0), and now (1,2)\n\n    #                                               ^ z is \"up\" and \"2\"\n    # scipy.ndimage.rotate() shrinks the model\n    # TODO: regrow it back\n    x_r     = rotated.shape[1]\n    y_r     = rotated.shape[0]\n    x_m     = m.shape[1]\n    y_m     = m.shape[0]\n    x_diff  = abs(x_r - x_m)\n    y_diff  = abs(y_r - y_m)\n    if   x_diff%2==0 and y_diff%2==0:\n        return rotated[\n            x_diff//2   : x_r-x_diff//2,\n            y_diff//2   : y_r-y_diff//2,\n                        :\n        ]\n    elif x_diff%2==0 and y_diff%2==1:\n        # if this shift ends up turning the model to shit in a few iterations,\n        # change the following lines to include a flag that alternates cutting off the top and bottom bits of the array\n        return rotated[\n            x_diff//2   : x_r-x_diff//2,\n            y_diff//2+1 : y_r-y_diff//2,\n                        :\n        ]\n    elif x_diff%2==1 and y_diff%2==0:\n        return rotated[\n            x_diff//2+1 : x_r-x_diff//2,\n            y_diff//2   : y_r-y_diff//2,\n                        :\n        ]\n    else:\n        # x_diff%2==1 and y_diff%2==1:\n        return rotated[\n            x_diff//2+1 : x_r-x_diff//2,\n            y_diff//2+1 : y_r-y_diff//2,\n                        :\n        ]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7050, "user_id": 8033585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcd92ce2da15d74815d79b2908132d3?s=128&d=identicon&r=PG&f=1", "display_name": "AGN Gazer", "link": "https://stackoverflow.com/users/8033585/agn-gazer"}, "is_accepted": false, "score": 1, "last_activity_date": 1530032811, "last_edit_date": 1530032811, "creation_date": 1529780063, "answer_id": 51004173, "question_id": 50958008, "link": "https://stackoverflow.com/questions/50958008/how-can-i-vectorize-this-numpy-rotation-code/51004173#51004173", "title": "How can I vectorize this numpy rotation code?", "body": "<p>You have a couple of problems in your code. First, if you want to fit the original image onto a rotated grid then you need a larger grid (usually). Alternatively, imagine a regular grid but the shape of your object - a rectangle - is rotated, thus becoming a \"rhomb\". It is obvious if you want to fit the entire rhomb - you need a larger output grid (array). On the other hand, you say in the code <em>\"<code>rotated.shape == arr.shape</code>, unlike <code>scipy.ndimage.rotate()</code>, which inflates size\"</em>. If that is the case, maybe you do not <em>want</em> to fit the entire object? So, maybe it is OK to do this: <code>rotated=np.zeros(arr.shape)</code>. But in general, yeah, one has to have a larger grid in order to fit the entire input image after it is rotated.</p>\n\n<p>Another issue is angle conversion that you are doing:</p>\n\n<pre><code>if theta == int(theta):\n    theta *= pi / 180\ntheta = -theta\n</code></pre>\n\n<p>Why??? What will happen when I want to rotate the image by 1 radian? Or 2 radians? Am I forbidden to use integer number of radians? I think you are trying to do too much in this function and therefore it will be very confusing to do use it. Just require the caller to convert angles to radians. Or, you can do it inside this function if input <code>theta</code> is <em>always</em> in degrees. Or, you can add another parameter called, e.g., <code>units</code> and caller could set it to <code>radians</code> or <code>degrees</code>. Don't try to guess it based on \"integer-ness\" of input!</p>\n\n<p>Now, let's rewrite your code a little bit:</p>\n\n<pre><code>rotated = np.zeros_like(arr) # instead of np.zero(arr.shape)\ny_mid = arr.shape[0] // 2\nx_mid = arr.shape[1] // 2\n# val = 0 &lt;- this is unnecessary\n# pre-compute cos(theta) and sin(theta):\ncs = cos(theta)\nsn = sin(theta)\nfor x_new in range(rotated.shape[1]):\n    for y_new in range(rotated.shape[0]):\n        x = int(round((x_new - x_mid) * cs - (y_new - y_mid) * sn + x_mid)\n        y = int(round((x_new - x_mid) * sn - (y_new - y_mid) * cs + y_mid)\n        # just use comparisons, don't search through many values!\n        if 0 &lt;= x &lt; arr.shape[1] and 0 &lt;= y &lt; arr.shape[0]:\n            rotated[y_new, x_new] = arr[y, x]\n</code></pre>\n\n<p>So, now I can see (more easily) that for each pixel from the <em>output</em> array is mapped to a location in the <em>input</em> array. Yes, you can vectorize this.</p>\n\n<hr>\n\n<pre><code>import numpy as np\n\ndef rotate(arr, theta, unit='rad'):\n    # deal with theta units:\n    if unit.startswith('deg'):\n        theta = np.deg2rad(theta)\n\n    # for convenience, store array size:\n    ny, nx = arr.shape\n\n    # generate arrays of indices and flatten them:\n    y_new, x_new = np.indices(arr.shape)\n    x_new = x_new.ravel()\n    y_new = y_new.ravel()\n\n    # compute center of the array:\n    x0 = nx // 2\n    y0 = ny // 2\n\n    # compute old coordinates\n    xc = x_new - x0\n    yc = y_new - y0\n    x = np.round(np.cos(theta) * xc - np.sin(theta) * yc + x0).astype(np.int)\n    y = np.round(np.sin(theta) * xc - np.cos(theta) * yc + y0).astype(np.int)\n\n    # main idea to deal with indices is to create a mask:\n    mask = (x &gt;= 0) &amp; (x &lt; nx) &amp; (y &gt;= 0) &amp; (y &lt; ny)\n\n    # ... and then select only those coordinates (both in\n    # input and \"new\" coordinates) that satisfy the above condition:\n    x = x[mask]\n    y = y[mask]\n    x_new = x_new[mask]\n    y_new = y_new[mask]\n\n    # map input values to output pixels *only* for selected \"good\" pixels:\n    rotated = np.zeros_like(arr)\n    rotated[y_new, x_new] = arr[y, x]\n\n    return rotated\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9588242"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1530032811, "creation_date": 1529534243, "question_id": 50958008, "link": "https://stackoverflow.com/questions/50958008/how-can-i-vectorize-this-numpy-rotation-code", "title": "How can I vectorize this numpy rotation code?", "body": "<h1>The Goal:</h1>\n\n<p>I would like to vectorize (or otherwise speed up) this code.  It rotates a 3d <code>numpy</code> model around its center point (let x,y,z denote the dimensions; then we want to rotate around the z-axis).  The np model is binary voxels that are either \"on\" or \"off\"</p>\n\n<p>I bet some basic matrix operation could do it, like take a layer and apply the rotation matrix to each element.  The only issue with that is decimals; where should I have the new value land since <code>cos(pi / 6) == sqrt(3) / 2</code>?</p>\n\n<h1>The Code:</h1>\n\n<pre><code>def rotate_model(m, theta):\n    '''\n        theta in degrees\n    '''\n    n           =np.zeros(m.shape)\n    for i,layer in enumerate(m):\n        rotated = rotate(layer,theta)\n        n[i]    = rotated\n    return n\n</code></pre>\n\n<p>where <code>rotate()</code> is:</p>\n\n<pre><code>def rotate(arr, theta):\n    '''\n        Rotates theta clockwise\n        rotated.shape == arr.shape, unlike scipy.ndimage.rotate(), which inflates size and also does some strange mixing\n    '''\n    if theta == int(theta):\n        theta *= pi / 180\n    theta      = -theta\n  # theta=-theta b/c clockwise.  Otherwise would default to counterclockwise\n    rotated    =np.zeros(arr.shape)\n    #print rotated.shape[0], rotated.shape[1]\n    y_mid      = arr.shape[0]//2\n    x_mid      = arr.shape[1]//2\n    val        = 0\n    for x_new in range(rotated.shape[1]):\n        for y_new in range(rotated.shape[0]):\n            x_centered = x_new - x_mid\n            y_centered = y_new - y_mid\n            x          = x_centered*cos(theta) - y_centered*sin(theta)\n            y          = x_centered*sin(theta) + y_centered*cos(theta)\n            x         += x_mid\n            y         += y_mid\n            x          = int(round(x)); y = int(round(y)) # cast so range() picks it up\n            # lossy rotation\n            if x in range(arr.shape[1]) and y in range(arr.shape[0]):\n                val                   = arr[y,x]\n                rotated[y_new,x_new]  = val\n                #print val\n                #print x,y\n    return rotated\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "nan"], "comments": [{"owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 0, "creation_date": 1529534908, "post_id": 50957993, "comment_id": 88913524, "body": "What is <code>print(df[&#39;Value&#39;].dtype)</code>?"}, {"owner": {"reputation": 1755, "user_id": 5059335, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0ca397cbec3c1264f0f22c6cab4e280?s=128&d=identicon&r=PG&f=1", "display_name": "haimen", "link": "https://stackoverflow.com/users/5059335/haimen"}, "reply_to_user": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 0, "creation_date": 1529534961, "post_id": 50957993, "comment_id": 88913535, "body": "@jedwards object ( string)"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1529538044, "post_id": 50957993, "comment_id": 88914198, "body": "reopening as I don&#39;t think the duplicate is related to this question."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1529538070, "post_id": 50957993, "comment_id": 88914211, "body": "I would think <code>df[&#39;Value&#39;] = df.groupby(&#39;cluster&#39;).Value.transform(&#39;first&#39;)</code> is the way to go here."}], "answers": [{"tags": [], "owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "is_accepted": true, "score": 2, "last_activity_date": 1529536848, "last_edit_date": 1529536848, "creation_date": 1529535990, "answer_id": 50958247, "question_id": 50957993, "link": "https://stackoverflow.com/questions/50957993/fill-all-values-in-a-group-with-the-first-non-null-value-in-that-group/50958247#50958247", "title": "Fill all values in a group with the first non-null value in that group", "body": "<p><strong>Edit</strong></p>\n\n<p>The following seems better:</p>\n\n<pre><code>nan_map = df.dropna().set_index('cluster').to_dict()['Value']\ndf['Value'] = df['cluster'].map(nan_map)\n\nprint(df)\n</code></pre>\n\n<p><strong>Original</strong></p>\n\n<p>I can't think of a better way to do this than iterate over all the rows, but one might exist.  First I built your DataFrame:</p>\n\n<pre><code>import pandas as pd\nimport math\n\n# Build your DataFrame\ndf = pd.DataFrame.from_items([\n    ('cluster', [1,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,5,5,5,5]),\n    ('Value', [float('nan') for _ in range(20)]),\n])\ndf['Value'] = df['Value'].astype(object)\ndf.at[ 0,'Value'] = 'A'\ndf.at[ 7,'Value'] = 'B'\ndf.at[11,'Value'] = 'C'\ndf.at[14,'Value'] = 'S'\ndf.at[17,'Value'] = 'A'\n</code></pre>\n\n<p>Now here's an approach that first creates a <code>nan_map</code> dict, then sets the values in <code>Value</code> as specified in the dict.</p>\n\n<pre><code># Create a dict to map clusters to unique values\nnan_map = df.dropna().set_index('cluster').to_dict()['Value']\n# nan_map: {1: 'A', 2: 'B', 3: 'C', 4: 'S', 5: 'A'}\n\n# Apply\nfor i, row in df.iterrows():\n    df.at[i,'Value'] = nan_map[row['cluster']]\n\nprint(df)\n</code></pre>\n\n<p>Output:</p>\n\n<pre>\n    cluster Value\n0         1     A\n1         1     A\n2         1     A\n3         1     A\n4         1     A\n5         2     B\n6         2     B\n7         2     B\n8         2     B\n9         3     C\n10        3     C\n11        3     C\n12        3     C\n13        4     S\n14        4     S\n15        4     S\n16        5     A\n17        5     A\n18        5     A\n19        5     A\n</pre>\n\n<p>Note: This sets <em>all</em> values based on the cluster and doesn't check for NaN-ness.  You may want to experiment with something like:</p>\n\n<pre><code># Apply\nfor i, row in df.iterrows():\n    if isinstance(df.at[i,'Value'], float) and math.isnan(df.at[i,'Value']):\n        df.at[i,'Value'] = nan_map[row['cluster']]\n</code></pre>\n\n<p>to see which is more efficient (my guess is the former, without the checks).</p>\n"}, {"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 5, "last_activity_date": 1529538167, "last_edit_date": 1592644375, "creation_date": 1529538167, "answer_id": 50958514, "question_id": 50957993, "link": "https://stackoverflow.com/questions/50957993/fill-all-values-in-a-group-with-the-first-non-null-value-in-that-group/50958514#50958514", "title": "Fill all values in a group with the first non-null value in that group", "body": "<h3><code>groupby</code> + <code>bfill</code>, and <code>ffill</code></h3>\n<pre><code>df = df.groupby('cluster').bfill().ffill()\ndf\n\n    cluster Value\n0         1     A\n1         1     A\n2         1     A\n3         1     A\n4         1     A\n5         2     B\n6         2     B\n7         2     B\n8         2     B\n9         3     B\n10        3     B\n11        3     C\n12        3     C\n13        4     S\n14        4     S\n15        4     S\n16        5     A\n17        5     A\n18        5     A\n19        5     A\n</code></pre>\n<hr />\n<p>Or,</p>\n<h3><code>groupby</code> + <code>transform</code> with <code>first</code></h3>\n<pre><code>df['Value'] = df.groupby('cluster').Value.transform('first')\ndf\n\n    cluster Value\n0         1     A\n1         1     A\n2         1     A\n3         1     A\n4         1     A\n5         2     B\n6         2     B\n7         2     B\n8         2     B\n9         3     B\n10        3     B\n11        3     C\n12        3     C\n13        4     S\n14        4     S\n15        4     S\n16        5     A\n17        5     A\n18        5     A\n19        5     A\n</code></pre>\n"}], "owner": {"reputation": 1755, "user_id": 5059335, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0ca397cbec3c1264f0f22c6cab4e280?s=128&d=identicon&r=PG&f=1", "display_name": "haimen", "link": "https://stackoverflow.com/users/5059335/haimen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 897, "favorite_count": 2, "accepted_answer_id": 50958247, "answer_count": 2, "score": 1, "last_activity_date": 1529731312, "creation_date": 1529534100, "last_edit_date": 1529731312, "question_id": 50957993, "link": "https://stackoverflow.com/questions/50957993/fill-all-values-in-a-group-with-the-first-non-null-value-in-that-group", "title": "Fill all values in a group with the first non-null value in that group", "body": "<p>The following is the pandas dataframe I have:</p>\n\n<pre><code>cluster Value\n1         A\n1        NaN\n1        NaN\n1        NaN\n1        NaN\n2        NaN\n2        NaN\n2         B\n2        NaN\n3        NaN\n3        NaN\n3         C\n3        NaN\n4        NaN\n4         S\n4        NaN\n5        NaN\n5         A\n5        NaN\n5        NaN\n</code></pre>\n\n<p>If we look into the data, cluster 1 has Value 'A' for one row and remain all are NA values. I want to fill 'A' value for all the rows of cluster 1. Similarly for all the clusters. Based on one of the values of the cluster, I want to fill the remaining rows of the cluster. The output should be like,</p>\n\n<pre><code>cluster Value\n1         A\n1         A\n1         A\n1         A\n1         A\n2         B\n2         B\n2         B\n2         B\n3         C\n3         C\n3         C\n3         C\n4         S\n4         S\n4         S\n5         A\n5         A\n5         A\n5         A\n</code></pre>\n\n<p>I am new to python and not sure how to proceed with this. Can anybody help with this ?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 569, "user_id": 3357979, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/69d38a7b3afce1b70368b8797c8abf27?s=128&d=identicon&r=PG&f=1", "display_name": "user3357979", "link": "https://stackoverflow.com/users/3357979/user3357979"}, "edited": false, "score": 0, "creation_date": 1529535711, "post_id": 50958090, "comment_id": 88913687, "body": "Unfortunately category are not strictly single-character. Should have been more clear in question. Updated question to reflect."}, {"owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "edited": false, "score": 2, "creation_date": 1529537754, "post_id": 50958090, "comment_id": 88914131, "body": "You could use the original <code>shift</code> pattern instead of the diff trick, e.g. <code>keys = df[[&quot;category&quot;, &quot;value&quot;]]; (keys != keys.shift()).any(axis=1).cumsum()</code>."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "edited": false, "score": 0, "creation_date": 1529538079, "post_id": 50958090, "comment_id": 88914217, "body": "@DSM Sure. Feel free to post it as an answer."}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 3, "last_activity_date": 1529537440, "last_edit_date": 1529537440, "creation_date": 1529534800, "answer_id": 50958090, "question_id": 50957961, "link": "https://stackoverflow.com/questions/50957961/pandas-unique-id-based-on-values-in-prior-row/50958090#50958090", "title": "Pandas - Unique ID based on values in prior row", "body": "<p>The following method is not necessarily faster than your loop but at least it does not have any explicit looping. Start by taking the difference between the next and previous values. The difference is not equal to zero when the value changes:</p>\n\n<pre><code>val_diff = df['value'].diff().fillna(0) != 0 # Boolean!\n</code></pre>\n\n<p>The same trick won't work for the category, because characters cannot be subtracted. Get a list of all unique categories, enumerate them, and use the enumerated values instead of the category names:</p>\n\n<pre><code>unique = df['category'].unique()\nunique_mapping = {y:x for x,y in enumerate(unique)}\n\ncat_diff = df['category'].replace(unique_mapping)\\\n                         .diff().fillna(0) != 0\n</code></pre>\n\n<p>The id increases when either the value of the category changes:</p>\n\n<pre><code>df['id'] = (val_diff | cat_diff).cumsum() + 1\ndf\n#       date category  value  id\n#0  1/1/2018        A      0   1\n#1  1/2/2018        A      0   1\n#2  1/3/2018        A      1   2\n#3  1/4/2018        A      0   3\n#4  1/1/2018        B      1   4\n#5  1/2/2018        B      1   4\n#6  1/3/2018        B      1   4\n#7  1/4/2018        B      0   5\n</code></pre>\n"}], "owner": {"reputation": 569, "user_id": 3357979, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/69d38a7b3afce1b70368b8797c8abf27?s=128&d=identicon&r=PG&f=1", "display_name": "user3357979", "link": "https://stackoverflow.com/users/3357979/user3357979"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1529537440, "creation_date": 1529533886, "last_edit_date": 1529535755, "question_id": 50957961, "link": "https://stackoverflow.com/questions/50957961/pandas-unique-id-based-on-values-in-prior-row", "title": "Pandas - Unique ID based on values in prior row", "body": "<p>I'm creating a ID for group of rows, where the ID is based on the values in the previous row.  I've currently accomplished this using a for loop, but since there are so many rows, this is very slow.  is there an easier way to do this?</p>\n\n<p>Specifically, I create a new unique ID when the category and value does not equal the category and value of the prior row.</p>\n\n<pre><code>df = date     category value\n     1/1/2018 A        0\n     1/2/2018 A        0\n     1/3/2018 A        1\n     1/4/2018 A        0\n     1/1/2018 AB       1\n     1/2/2018 AB       1\n     1/3/2018 AB       1\n     1/4/2018 ABC      0\n\ndf_out = date     category value unique_id\n         1/1/2018 A        0     1\n         1/2/2018 A        0     1\n         1/3/2018 A        1     2\n         1/4/2018 A        0     3\n         1/1/2018 AB       1     4\n         1/2/2018 AB       1     4\n         1/3/2018 AB       1     4\n         1/4/2018 ABC      0     5\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "web-scraping", "beautifulsoup"], "comments": [{"owner": {"reputation": 961, "user_id": 5348860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K96NO.jpg?s=128&g=1", "display_name": "odradek", "link": "https://stackoverflow.com/users/5348860/odradek"}, "edited": false, "score": 0, "creation_date": 1529533760, "post_id": 50957861, "comment_id": 88913236, "body": "You&#39;re not returning the string at the end of <code>remove_char</code> function. With <code>return string</code> at the end it should work."}, {"owner": {"reputation": 31, "user_id": 8885661, "user_type": "registered", "profile_image": "https://graph.facebook.com/818464578314639/picture?type=large", "display_name": "Nick Honings", "link": "https://stackoverflow.com/users/8885661/nick-honings"}, "reply_to_user": {"reputation": 961, "user_id": 5348860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K96NO.jpg?s=128&g=1", "display_name": "odradek", "link": "https://stackoverflow.com/users/5348860/odradek"}, "edited": false, "score": 0, "creation_date": 1529533899, "post_id": 50957861, "comment_id": 88913276, "body": "Damn, case closed!"}], "answers": [{"tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": false, "score": 0, "last_activity_date": 1529533803, "creation_date": 1529533803, "answer_id": 50957949, "question_id": 50957861, "link": "https://stackoverflow.com/questions/50957861/why-doesnt-this-function-return-the-same-output-in-both-situationswebscraping/50957949#50957949", "title": "Why doesn&#39;t this function return the same output in both situations(webscraping project)?", "body": "<p>Neither of your functions has a <code>return</code> statement, and so return <code>None</code> by default.  <code>remove_char()</code> should end with <code>return string</code> for example.</p>\n"}, {"tags": [], "owner": {"reputation": 2357, "user_id": 249833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c535c38d6c394f0a353ee6c335553f8?s=128&d=identicon&r=PG", "display_name": "SlavaNov", "link": "https://stackoverflow.com/users/249833/slavanov"}, "is_accepted": false, "score": 2, "last_activity_date": 1529533853, "creation_date": 1529533853, "answer_id": 50957956, "question_id": 50957861, "link": "https://stackoverflow.com/questions/50957861/why-doesnt-this-function-return-the-same-output-in-both-situationswebscraping/50957956#50957956", "title": "Why doesn&#39;t this function return the same output in both situations(webscraping project)?", "body": "<p>You forgot to return the value in the <code>remove_char()</code> function.\nThat's it!</p>\n"}, {"tags": [], "owner": {"reputation": 1643, "user_id": 8340867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D3XJl.jpg?s=128&g=1", "display_name": "ThunderHorn", "link": "https://stackoverflow.com/users/8340867/thunderhorn"}, "is_accepted": false, "score": 0, "last_activity_date": 1529534451, "creation_date": 1529534451, "answer_id": 50958034, "question_id": 50957861, "link": "https://stackoverflow.com/questions/50957861/why-doesnt-this-function-return-the-same-output-in-both-situationswebscraping/50958034#50958034", "title": "Why doesn&#39;t this function return the same output in both situations(webscraping project)?", "body": "<pre><code>import requests\n\nfrom bs4 import BeautifulSoup\n\nbase_url = \"https://festivalfans.nl/event/dominator-festival\"\nurl = requests.get(base_url)\nsoup = BeautifulSoup(url.content , \"html.parser\")\n\ndef get_date_info():\n\n    for link in soup.find_all(\"div\", {\"class\": \"event-single-data\"}):\n        day = link.find('div', {\"class\":\"event-single-day\"}).text.replace(\" \", '')\n        month = link.find('div', {\"class\": \"event-single-month\"}).text.replace('/', \"\").replace(' ', '')\n        year = link.find('div', {\"class\": \"event-single-year\"}).text.replace(\" \", '')\n        print(day, month, year)\n\nget_date_info()\n</code></pre>\n\n<p>here is an easier code no need of re</p>\n"}], "owner": {"reputation": 31, "user_id": 8885661, "user_type": "registered", "profile_image": "https://graph.facebook.com/818464578314639/picture?type=large", "display_name": "Nick Honings", "link": "https://stackoverflow.com/users/8885661/nick-honings"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1529534451, "creation_date": 1529533178, "last_edit_date": 1529533548, "question_id": 50957861, "link": "https://stackoverflow.com/questions/50957861/why-doesnt-this-function-return-the-same-output-in-both-situationswebscraping", "title": "Why doesn&#39;t this function return the same output in both situations(webscraping project)?", "body": "<pre><code>import requests\nimport re\nfrom bs4 import BeautifulSoup\n\n#The website I like to get, converts the contents of the web page to lxml format\nbase_url = \"https://festivalfans.nl/event/dominator-festival\"\nurl = requests.get(base_url)\nsoup = BeautifulSoup(url.content, \"lxml\")\n\n#Modifies the given string to look visually good. Like this:\n#['21 / JulZaterdag2018'] becomes 21 Jul 2018\ndef remove_char(string):\n    #All blacklisted characters and words\n    blacklist = [\"/\", \"[\", \"]\", \"'\", \"Maandag\", \"Dinsdag\", \"Woensdag\",\n                 \"Donderdag\", \"Vrijdag\", \"Zaterdag\", \"Zondag\"]\n\n    #Replace every blacklisted character with white space\n    for char in blacklist:\n        string = string.replace(char,' ')\n\n    #Replace more than 2 consecutive white spaces\n    string = re.sub(\"\\s\\s+\", \" \", string)\n\n\n#Gets the date of the festival I'm interested in\ndef get_date_info():\n    #Makes a list for the data\n    raw_info = []\n\n    #Adds every \"div\" with a certain name to list, and converts it to text\n    for link in soup.find_all(\"div\", {\"class\": \"event-single-data\"}):\n        raw_info.append(link.text)\n\n    #Converts list into string, because remove_char() only accepts strings    \n    raw_info = str(raw_info)\n\n    #Modifies the string as explained above\n    final_date = remove_char(raw_info)\n\n    #Prints the date in this format: 21 Jul 2018(example)\n    print(final_date)\n\n\nget_date_info()\n</code></pre>\n\n<hr>\n\n<p>Hi there! So I'm currently working on a little webscraping project. I thought I had a good idea and I wanted to get more experienced with Python. What it basically does is it gets festival information like date, time and price and puts it in a little text file. I'm using BeautifulSoup to navigate and edit the web page. Link is down there!</p>\n\n<p>But now I'm kinda running into a problem. I can't figure out what's wrong. Maybe I'm totally looking over it. So when I run this program it should give me this: 21 Jul 2018. But instead it returns 'None'. For some reason every character in the string gets removed.</p>\n\n<p>I tried running remove_char() on its own, with the same list(converted it to string first) as input. This worked perfectly. It returned \"21 Jul 2018\" like it was supposed to do. So I'm quite sure the error is not in this function.</p>\n\n<p>So somehow I'm missing something. Maybe it has to do with BeautifulSoup and how it handles things? </p>\n\n<p>Hope someone can help me out!</p>\n\n<p>BeautifulSoup:\n<a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/\" rel=\"nofollow noreferrer\">https://www.crummy.com/software/BeautifulSoup/bs4/doc/</a></p>\n\n<p>Web page:\n<a href=\"https://festivalfans.nl/event/dominator-festival\" rel=\"nofollow noreferrer\">https://festivalfans.nl/event/dominator-festival</a></p>\n"}, {"tags": ["python", "docker", "webserver", "couchdb"], "comments": [{"owner": {"reputation": 6742, "user_id": 4912329, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/6m1mT.jpg?s=128&g=1", "display_name": "Mathieu Lescaudron", "link": "https://stackoverflow.com/users/4912329/mathieu-lescaudron"}, "edited": false, "score": 0, "creation_date": 1529533407, "post_id": 50957848, "comment_id": 88913145, "body": "What is the content of <code>&#47;home&#47;WebDocker&#47;Webpage1&#47;main.py</code> ?"}, {"owner": {"reputation": 13, "user_id": 8920568, "user_type": "registered", "profile_image": "https://graph.facebook.com/1770098033003407/picture?type=large", "display_name": "Mashrafi Haider Iqra", "link": "https://stackoverflow.com/users/8920568/mashrafi-haider-iqra"}, "reply_to_user": {"reputation": 6742, "user_id": 4912329, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/6m1mT.jpg?s=128&g=1", "display_name": "Mathieu Lescaudron", "link": "https://stackoverflow.com/users/4912329/mathieu-lescaudron"}, "edited": false, "score": 0, "creation_date": 1529538245, "post_id": 50957848, "comment_id": 88914256, "body": "@MathieuLescaudron It is basically lauch a Web application in the local server. If it run succesfully I can load a  Webpage at 0.0.0.0:5000.."}], "owner": {"reputation": 13, "user_id": 8920568, "user_type": "registered", "profile_image": "https://graph.facebook.com/1770098033003407/picture?type=large", "display_name": "Mashrafi Haider Iqra", "link": "https://stackoverflow.com/users/8920568/mashrafi-haider-iqra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 510, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1529534298, "creation_date": 1529533070, "last_edit_date": 1529534298, "question_id": 50957848, "link": "https://stackoverflow.com/questions/50957848/socket-error-errno-99-address-not-available-get-this-error-while-trying-to-l", "title": "socket.error: [Errno 99] Address not available..Get this error while trying to link a container with another container of CouchDB in Docker", "body": "<p>I am trying to make a Docker Image of a Web Application which is based on python. As I am trying to link the official CouchDB container with the Docker Container that I have created I am getting the <strong>\"Address not available error\"</strong>. docker ps -a shows me that the couchdb is working in a perfect way.\nThe command that I have used in the terminal is:</p>\n\n<pre><code> docker run -p 5984:5984 --name my-couchdb -d couchdb\n\n docker run --name my-couchdb-app --link my-couchdb:couchdb webpage:test\n</code></pre>\n\n<p>My Docker File for webpage:test is given below:</p>\n\n<pre><code>FROM python:2.7.15-alpine3.6\n\nRUN apk update &amp;&amp; \\^M\n        apk upgrade &amp;&amp; \\^M\n        apk add bash vim sudo\nRUN mkdir /home/WebDocker/\nADD ./Webpage1 /home/WebDocker/Webpage1\n\nADD ./requirements.txt /home/WebDocker/requirements.txt\nWORKDIR /home/WebDocker\nRUN pip install -r /home/WebDocker/requirements.txt\n\nRUN chmod +x /home/WebDocker/Webpage1/main.py\n\nEXPOSE 8080\n\nENTRYPOINT [\"python\",\"/home/WebDocker/Webpage1/main.py\"]\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pip", "setuptools", "python-wheel"], "comments": [{"owner": {"reputation": 1170, "user_id": 7454638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac3d561d513c2ddb28d2d321f2f8e495?s=128&d=identicon&r=PG&f=1", "display_name": "leoschet", "link": "https://stackoverflow.com/users/7454638/leoschet"}, "edited": false, "score": 1, "creation_date": 1529533796, "post_id": 50957833, "comment_id": 88913247, "body": "<a href=\"https://stackoverflow.com/questions/20101834/pip-install-from-git-repo-branch\">this question</a> might help you... try <a href=\"https://stackoverflow.com/a/46666538/7454638\">this</a> <code>pip install git+https:&#47;&#47;github.com&#47;user&#47;project.git@version</code> or, if slow, <a href=\"https://stackoverflow.com/a/24811490/7454638\">try installing from zip</a> You can also have different files for development and production dependencies, installing them recursively"}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1529535899, "post_id": 50957833, "comment_id": 88913722, "body": "<code>--find-links</code> makes <code>pip</code> to look into either a directory with tars/eggs/wheels or an HTML file with links to packages in downloadable forms. You cannot just point it to a local project."}, {"owner": {"reputation": 4856, "user_id": 3700626, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/LGCnh.jpg?s=128&g=1", "display_name": "Lior Cohen", "link": "https://stackoverflow.com/users/3700626/lior-cohen"}, "edited": false, "score": 0, "creation_date": 1529536324, "post_id": 50957833, "comment_id": 88913831, "body": "Leoschet - this does not answer my usecase. My dependent is local folder and not remote or zip."}, {"owner": {"reputation": 4856, "user_id": 3700626, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/LGCnh.jpg?s=128&g=1", "display_name": "Lior Cohen", "link": "https://stackoverflow.com/users/3700626/lior-cohen"}, "reply_to_user": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1529536512, "post_id": 50957833, "comment_id": 88913872, "body": "@Phd - so no other way to resolve it but writing &quot;out of pip&quot; scripts to pip -e the dependencies too or to add b to sys.path?"}, {"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 0, "creation_date": 1529678239, "post_id": 50957833, "comment_id": 88975213, "body": "It&#39;s not quite clear to me why do you want to pass the dependency via <code>find-links</code>. Won&#39;t <code>pip install --editable path&#47;to&#47;B --editable path&#47;to&#47;A</code> already suffice?"}, {"owner": {"reputation": 4856, "user_id": 3700626, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/LGCnh.jpg?s=128&g=1", "display_name": "Lior Cohen", "link": "https://stackoverflow.com/users/3700626/lior-cohen"}, "reply_to_user": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 0, "creation_date": 1529701408, "post_id": 50957833, "comment_id": 88985598, "body": "@hoefling - your suggestion pass the management to the user and outside of pip config. What I would like is to consume B as any other &quot;install_requires&quot; of A but declared it as locally and editable (if found locally). I probably will have to write script that will hook to pip install -e path/to/A. But still looking for &quot;in pip&quot; solution."}, {"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 0, "creation_date": 1529701940, "post_id": 50957833, "comment_id": 88985746, "body": "You can&#39;t declare an editable dependency in setup script. You can pass a path to the dependency source files, e.g. via <code>dependency_links</code> or <code>pip</code>&#39;s <code>find-links</code>, but it will install the dependency in normal, non-editable mode."}, {"owner": {"reputation": 4856, "user_id": 3700626, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/LGCnh.jpg?s=128&g=1", "display_name": "Lior Cohen", "link": "https://stackoverflow.com/users/3700626/lior-cohen"}, "reply_to_user": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 1, "creation_date": 1529702484, "post_id": 50957833, "comment_id": 88985900, "body": "@hoefling - Thanks. I wish there was a way. BTW, I did not managed to declare dependency to the local source files at all. I tried to point find-links to the source setup.py folder and it just complained it can not find a distribution there. All the examples I see online are git+http. Do you know a working example that does this?"}, {"owner": {"reputation": 1719, "user_id": 1240305, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b64b8bf9d52afb18214925eba8dadc79?s=128&d=identicon&r=PG", "display_name": "F.D.F.", "link": "https://stackoverflow.com/users/1240305/f-d-f"}, "edited": false, "score": 0, "creation_date": 1538401822, "post_id": 50957833, "comment_id": 92119909, "body": "I&#39;m also quite interested on this sub ject: how would it be done when you have a tar.gz already generated?"}], "answers": [{"tags": [], "owner": {"reputation": 251, "user_id": 1069467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9ef584e9590e0b8d048c5ce9bf75ec5?s=128&d=identicon&r=PG", "display_name": "leopold.talirz", "link": "https://stackoverflow.com/users/1069467/leopold-talirz"}, "is_accepted": false, "score": 0, "last_activity_date": 1559436503, "creation_date": 1559436503, "answer_id": 56411443, "question_id": 50957833, "link": "https://stackoverflow.com/questions/50957833/python-pip-development-mode-with-local-dependencies/56411443#56411443", "title": "python pip - development mode with local dependencies", "body": "<p>Let me try and restate the problem:</p>\n\n<ul>\n<li>You work on two python <em>packages</em>, package A and package B. A depends on B.</li>\n<li>You have chosen to develop these two packages in separate virtual environments.</li>\n<li>You would like to make some local changes to package B and have package A use the modified version of package B.</li>\n</ul>\n\n<p>I apologize if I'm missing something here, but why not simply install both packages in the <em>same</em> virtual environment, which will make this problem go away?</p>\n\n<p>I.e. after creating your environment, you install package B in editable mode, followed by installing package A. Any changes in B will be picked up by A, no changes needed.</p>\n"}], "owner": {"reputation": 4856, "user_id": 3700626, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/LGCnh.jpg?s=128&g=1", "display_name": "Lior Cohen", "link": "https://stackoverflow.com/users/3700626/lior-cohen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1509, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1559436503, "creation_date": 1529532990, "last_edit_date": 1529533624, "question_id": 50957833, "link": "https://stackoverflow.com/questions/50957833/python-pip-development-mode-with-local-dependencies", "title": "python pip - development mode with local dependencies", "body": "<p><strong>Background</strong></p>\n\n<p>I have two python projects. Project A and Project B.</p>\n\n<p>Each project has its own virtual environment and its own setup.py.</p>\n\n<p>Both projects are not pure py files and has \"build\" process like building extensions, generate source etc.</p>\n\n<p>A is dependent on B (setup.py install_requires points on B).</p>\n\n<p>Each project is built and published/distributed as a wheel to pypi on-premise repository.</p>\n\n<p>pip install w/wo -e (development mode) of project A, nicely installs project B into project A venv site-packages.</p>\n\n<p>So far everything is working nicely and \"by the book\".</p>\n\n<p><strong>Now, my story get complicated ...</strong></p>\n\n<p>I would like to develop the two projects together without having to publish B in order A to consume it.</p>\n\n<p>As example, I would like to:</p>\n\n<ol>\n<li>Change something in B.</li>\n<li>build B (setup.py build).</li>\n<li><strong>NOT</strong> publish B as wheel to pypi.</li>\n<li><strong>Goal</strong> - Project A will \"know\" the modified Project B. <strong>WITHOUT</strong> manually tweaking sys.path.</li>\n</ol>\n\n<p>I actually want the pip install -e of project A to install project B in development mode too.</p>\n\n<p>After some reading I understood (hopefully correctly) that one can define a \"distribution\" as a <strong>local source folder</strong> by <strong>--find-links</strong> flag. </p>\n\n<p>I defined project B root folder in --find-links.</p>\n\n<p>I tried it with (on project A setup.py folder):</p>\n\n<ol>\n<li><p><em>pip install . -e --find-links = file:///path/to/B</em></p></li>\n<li><p><em>pip install . -e --find-links = git+file://path/to/B</em></p></li>\n</ol>\n\n<p><strong>Both did not work.</strong></p>\n\n<p>BTW, Puting in the path to B wheel or egg of B,</p>\n\n<p>ex: <em>pip install . -e --find-links = file:///path/to/B.whl</em></p>\n\n<p>did work but this is not what I am looking for.</p>\n\n<p>Hope you are still with me :-) (sorry for the tedious story)</p>\n\n<p><strong>What am I missing?</strong></p>\n\n<p>Tx</p>\n"}, {"tags": ["python", "xml", "xpath", "lxml", "xml-namespaces"], "comments": [{"owner": {"reputation": 46640, "user_id": 317052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GaULO.jpg?s=128&g=1", "display_name": "Daniel Haley", "link": "https://stackoverflow.com/users/317052/daniel-haley"}, "edited": false, "score": 0, "creation_date": 1529536435, "post_id": 50957772, "comment_id": 88913852, "body": "<i>&quot;The following code works on the given Xml&quot;</i> - What version of Python and lxml? I can&#39;t get your example to run without modifications using Python 3.6 and lxml 4.2.1."}], "answers": [{"comments": [{"owner": {"reputation": 7361, "user_id": 3607273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6cdb2fe7b9c6b5d10eaed35e2f16fa67?s=128&d=identicon&r=PG&f=1", "display_name": "S Meaden", "link": "https://stackoverflow.com/users/3607273/s-meaden"}, "edited": false, "score": 1, "creation_date": 1529696581, "post_id": 50958274, "comment_id": 88983855, "body": "Sorry for delay in reviewing, this works great. Thanks."}], "tags": [], "owner": {"reputation": 46640, "user_id": 317052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GaULO.jpg?s=128&g=1", "display_name": "Daniel Haley", "link": "https://stackoverflow.com/users/317052/daniel-haley"}, "is_accepted": true, "score": 2, "last_activity_date": 1529536597, "last_edit_date": 1529536597, "creation_date": 1529536242, "answer_id": 50958274, "question_id": 50957772, "link": "https://stackoverflow.com/questions/50957772/python-xpath-lxml-could-not-read-svg-path-element-due-to-empty-namespace/50958274#50958274", "title": "Python XPath lxml could not read SVG path element due to empty namespace?", "body": "<p>It's because the namespace URI is just <code>http://www.w3.org/2000/svg</code>.</p>\n\n<p>Change:</p>\n\n<pre><code>svgNamespace = \"xmlns:svg='http://www.w3.org/2000/svg'\"\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>svgNamespace = \"http://www.w3.org/2000/svg\"\n</code></pre>\n"}], "owner": {"reputation": 7361, "user_id": 3607273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6cdb2fe7b9c6b5d10eaed35e2f16fa67?s=128&d=identicon&r=PG&f=1", "display_name": "S Meaden", "link": "https://stackoverflow.com/users/3607273/s-meaden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "accepted_answer_id": 50958274, "answer_count": 1, "score": 2, "last_activity_date": 1529536597, "creation_date": 1529532616, "last_edit_date": 1529536468, "question_id": 50957772, "link": "https://stackoverflow.com/questions/50957772/python-xpath-lxml-could-not-read-svg-path-element-due-to-empty-namespace", "title": "Python XPath lxml could not read SVG path element due to empty namespace?", "body": "<p>I have an SVG (Xml) file from which I want to select some elements.  For the sake of a MCRE I have cut down the file to this </p>\n\n<pre><code>&lt;svg &gt;\n    &lt;!-- xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" --&gt;\n    &lt;g&gt;\n       &lt;path style=\"fill:#19518b;fill-opacity:1;fill-rule:nonzero;stroke:none\" /&gt;\n       &lt;path style=\"fill:#a80c3d;fill-opacity:1;fill-rule:nonzero;stroke:none\" /&gt;\n       &lt;path style=\"fill:#a98b6e;fill-opacity:1;fill-rule:nonzero;stroke:none\" /&gt;\n   &lt;/g&gt;\n&lt;/svg&gt;\n</code></pre>\n\n<p>Where some optional namespace attributes for the root element are located in a comment so they can be inserted back in to replicate the real scenario (where SVG root element is fulsomely attributed).</p>\n\n<p>From the following Xml (SVG) I want to select the elements styled with <code>fill:#19518b;fill-opacity:1;fill-rule:nonzero;stroke:none</code>.  There is one of match.  The following code works on the given Xml.</p>\n\n<pre><code>from lxml import etree\nsFileName = 'C:/Users/Simon/Downloads/pdf_skunkworks/inflation-report-may-2018-page6 - Copy.svg'\n\ntree = etree.Parse(sFileName)\nsvgNamespace = \"xmlns:svg='http://www.w3.org/2000/svg'\"\n#xpath = r\"//svg:path[@style='fill:#19518b;fill-opacity:1;fill-rule:nonzero;stroke:none']\"\nxpath = r\"//path[@style='fill:#19518b;fill-opacity:1;fill-rule:nonzero;stroke:none']\"\nPrint (XPath)\n#bluePaths = tree.xpath(xpath,namespaces={   'svg': svgNamespace  })\nbluePaths = tree.XPath(XPath)\n\nprint (bluePaths[0])\n</code></pre>\n\n<p>but it works on the given Xml because it does not have the namespace attributes that one finds in a real SVG file.  Once I reinsert the namespace attributes thus </p>\n\n<pre><code>&lt;svg xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\"    &gt;\n</code></pre>\n\n<p>then the Python code (as given fails).  I know I need to use namespaces and you can see my attempts commented out in the Python but they don't work.  One of the namespace prefix is an empty string and could not be passed to the namespace dictionary.</p>\n\n<p>Anyway, in the morning I will write could to clone the SVG file and remove the attributes from the root element because I know this approach works.  In the meantime if someone can figure the real way to solve this then I'd be grateful (cloning files seems suboptimal).</p>\n\n<p>P.S.  The SVG is created from running Inkscape from the command line, I give a single page pdf and ask for plain svg export.</p>\n"}, {"tags": ["python", "pip", "python-requests"], "comments": [{"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 3, "creation_date": 1529533333, "post_id": 50957750, "comment_id": 88913122, "body": "How are you trying to run the file?  Are you sure you&#39;re using the same version of Python as pip is using?"}, {"owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 0, "creation_date": 1529534249, "post_id": 50957750, "comment_id": 88913365, "body": "If, in the same place <code>import requests</code> fails you instead wrote <code>import sys; print(sys.path)</code>, is the path you list (<code>&#47;usr&#47;local&#47;lib&#47;python3.6&#47;site-packages</code>) there?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1529534411, "post_id": 50957750, "comment_id": 88913405, "body": "Also: you&#39;ve gone back and forth between referring to <code>request</code> and <code>requests</code> in this question, and you clearly typed out the error instead of copying and pasting it, and didn&#39;t show us your code, so\u2026 are you sure you didn&#39;t <code>import request</code>?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1529534551, "post_id": 50957750, "comment_id": 88913442, "body": "Anyway, the most likely problem is that you&#39;re using Apple&#39;s pre-installed Python 2.7, not your Python 3.6, because you&#39;re just typing <code>python</code>, or using <code>#!&#47;usr&#47;bin&#47;env python</code> in your script, or similar. (Even if the 2.7 <code>python</code> comes before the 3.6 <code>python</code> in your PATH, <code>pip</code> will still pick up the 3.6 version, because Apple&#39;s 2.7 doesn&#39;t include <code>pip</code>.) If so, the solution is to use <code>python3</code> instead of <code>python</code>."}, {"owner": {"reputation": 21, "user_id": 9969958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dV4FJ.jpg?s=128&g=1", "display_name": "Florence B.", "link": "https://stackoverflow.com/users/9969958/florence-b"}, "edited": false, "score": 0, "creation_date": 1529603278, "post_id": 50957750, "comment_id": 88945603, "body": "I changed the python path in my script to python3 to make sure the 3.6 version is being used, but I am still getting the same error."}, {"owner": {"reputation": 21, "user_id": 9969958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dV4FJ.jpg?s=128&g=1", "display_name": "Florence B.", "link": "https://stackoverflow.com/users/9969958/florence-b"}, "edited": false, "score": 0, "creation_date": 1529603340, "post_id": 50957750, "comment_id": 88945625, "body": "I checked and I was writing import requests.. so sadly not the issue."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 9969958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dV4FJ.jpg?s=128&g=1", "display_name": "Florence B.", "link": "https://stackoverflow.com/users/9969958/florence-b"}, "is_accepted": false, "score": 1, "last_activity_date": 1529605265, "creation_date": 1529605265, "answer_id": 50975249, "question_id": 50957750, "link": "https://stackoverflow.com/questions/50957750/i-am-still-getting-the-error-importerror-no-module-named-requests-after-install/50975249#50975249", "title": "I am still getting the error ImportError: No module named requests after installing requests using pip3", "body": "<p>I found the answer, turns out I was using an extension called Code Runner and I thought it used the integrated terminal, where I had configured Python3. But turns out it uses its own interpreter. I added the following to my user settings:</p>\n\n<pre><code>\"code-runner.executorMap\": {\n    \"python\": \"python3\",\n}\n</code></pre>\n\n<p>and now it works! :)</p>\n"}], "owner": {"reputation": 21, "user_id": 9969958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dV4FJ.jpg?s=128&g=1", "display_name": "Florence B.", "link": "https://stackoverflow.com/users/9969958/florence-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1529605265, "creation_date": 1529532487, "last_edit_date": 1529603444, "question_id": 50957750, "link": "https://stackoverflow.com/questions/50957750/i-am-still-getting-the-error-importerror-no-module-named-requests-after-install", "title": "I am still getting the error ImportError: No module named requests after installing requests using pip3", "body": "<p>I am using Python 3.6.5 in Visual Studio Code on a Mac.\nI installed pip3 and it is up to date, when I put in the command :</p>\n\n<pre><code>$ pip --version\n</code></pre>\n\n<p>I get this result :</p>\n\n<pre><code> pip 10.0.1 from /usr/local/lib/python3.6/site-packages/pip (python 3.6)\n</code></pre>\n\n<p>I imported the module requests.\nAnd when I put in this command : </p>\n\n<pre><code>pip freeze | grep requests\n</code></pre>\n\n<p>I get this result :</p>\n\n<pre><code>requests==2.19.1\n</code></pre>\n\n<p>So I thought this meant the requests module was installed, but I still get the error <strong>ImportError: No module named requests</strong> when I put in : import requests in my file and try to run it.</p>\n\n<p>Can somebody explain what is happening? Thank you :)</p>\n"}, {"tags": ["python", "recursion", "closures"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 1, "creation_date": 1529532894, "post_id": 50957744, "comment_id": 88913011, "body": "What is <code>foo()()()(&#39;ss&#39;)</code> supposed to do?"}, {"owner": {"reputation": 69, "user_id": 7631549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73cd0d0659dedf2ef61f66d0989b9fd3?s=128&d=identicon&r=PG&f=1", "display_name": "vkk07", "link": "https://stackoverflow.com/users/7631549/vkk07"}, "reply_to_user": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1529533744, "post_id": 50957744, "comment_id": 88913231, "body": "print foooooss .. printing o for every empty ()"}, {"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1529534447, "post_id": 50957744, "comment_id": 88913412, "body": "... but it is preferable in some way to <code>print(&#39;foooss&#39;)</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 7631549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73cd0d0659dedf2ef61f66d0989b9fd3?s=128&d=identicon&r=PG&f=1", "display_name": "vkk07", "link": "https://stackoverflow.com/users/7631549/vkk07"}, "edited": false, "score": 0, "creation_date": 1529538080, "post_id": 50958140, "comment_id": 88914218, "body": "Thanks. this is exactly what I was looking for... On what topics should my learning be focused on in order to solve these kinds of problems (Python)?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 69, "user_id": 7631549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73cd0d0659dedf2ef61f66d0989b9fd3?s=128&d=identicon&r=PG&f=1", "display_name": "vkk07", "link": "https://stackoverflow.com/users/7631549/vkk07"}, "edited": false, "score": 1, "creation_date": 1529539631, "post_id": 50958140, "comment_id": 88914577, "body": "@vkk07 Well, a function like this is kind of a weird thing to do in Python. If you really want to get deep into recursion, closures, etc., you might be a lot better off learning Scheme, Haskell, OCaml, F#, or Scala. Then, working out how (and when/whether) to map different things back to Python is a great learning experience. And then maybe work through <a href=\"https://rads.stackoverflow.com/amzn/click/com/8120326857\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">CTM</a>, which is all about that kind of mapping, but one level of abstraction higher."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 2, "last_activity_date": 1529535627, "last_edit_date": 1529535627, "creation_date": 1529535219, "answer_id": 50958140, "question_id": 50957744, "link": "https://stackoverflow.com/questions/50957744/how-to-accept-unlimited-closures-in-a-python-function/50958140#50958140", "title": "How to accept unlimited closures in a Python function?", "body": "<p>The closure captures are just a distraction here, and so is handling <code>90</code> and <code>ss</code> in different ways,<sup>1</sup> so let's throw all of that out and just solve the problem you're struggling with.</p>\n\n<p>First, you want a function that does one thing if called with an argument, and a different thing if called without an argument. That's easy; just use a parameter with a default value, or use <code>*args</code>.</p>\n\n<p>Second, the \"different thing\" you want to do is to return a function that recursively does the same thing as your function, except for sticking an extra <code>'o'</code> in the result. When defining a recursive data structure\u2014whether it's a recursive closure, or a recursive defaultdict, the easiest way to do it is usually to use recursion.</p>\n\n<p>For example:</p>\n\n<pre><code>def foo(x=None, *, _chain=0):\n    if x is None:\n        def bar(*args):\n            return foo(*args, _chain=_chain+1)\n        return bar\n    else:\n        return 'f' + 'o'*_chain + x\n</code></pre>\n\n<p>You <em>could</em> rewrite <code>bar</code> as a decorator, and <code>return bar(foo)</code>, but that seems unnecessary. It wouldn't change the fact that the key here is that <code>foo</code> returns a function that calls <code>foo</code>.</p>\n\n<hr>\n\n<p><sub>1. If you don't know how to do that, just <code>if isinstance(x, str):</code>. Or, if you want to get fancy, look up <code>functools.singledispatch</code>.</sub></p>\n"}], "owner": {"reputation": 69, "user_id": 7631549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73cd0d0659dedf2ef61f66d0989b9fd3?s=128&d=identicon&r=PG&f=1", "display_name": "vkk07", "link": "https://stackoverflow.com/users/7631549/vkk07"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 50958140, "answer_count": 1, "score": -1, "last_activity_date": 1546766849, "creation_date": 1529532437, "last_edit_date": 1546766849, "question_id": 50957744, "link": "https://stackoverflow.com/questions/50957744/how-to-accept-unlimited-closures-in-a-python-function", "title": "How to accept unlimited closures in a Python function?", "body": "<p>I have a code like below :</p>\n\n<pre><code>    # Define a function\n    def foo(x):\n        # inner function \"bar\"\n        def bar(y):\n            q = 10\n            # inner function \"baz\"\n            def baz(z):\n                print(\"Locals: \", locals())\n                print(\"Vars: \", vars())\n                return x + y + q + z\n            return baz\n        return bar\n\n    # Locals: {'y': 20, 'x': 10, 'z': 30, 'q': 10}\n    # Vars: {'y': 20, 'x': 10, 'z': 30, 'q': 10}\n\nprint(foo(10)(20)(30)) # 70\n</code></pre>\n\n<p>how can i modify the above function to accept unlimited calls and also to accept strings... ?</p>\n\n<p>and do we have to use imilar to how we write a decorators or is there any other way to achieve this ? </p>\n\n<pre><code>print(foo(90)) \nprint(foo()(90)) \nprint(foo()()(90)) \nprint(foo()()()('ss'))\n</code></pre>\n"}, {"tags": ["python", "oop", "tkinter"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1529535197, "post_id": 50957742, "comment_id": 88913584, "body": "Have you looked at the question <a href=\"https://stackoverflow.com/questions/36105688/why-tkinter-filedialog-askdirectory-isnt-returning-the-full-path-with-the-sele\">Why tkinter.filedialog.askdirectory isn&#39;t returning the full path (with the selected dirname)?</a>"}, {"owner": {"reputation": 311, "user_id": 7943938, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bf0e44f3e530763ad81d6c3d000034f4?s=128&d=identicon&r=PG&f=1", "display_name": "Nanoni", "link": "https://stackoverflow.com/users/7943938/nanoni"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1529556547, "post_id": 50957742, "comment_id": 88917928, "body": "I have read it now, doesnt unfortunately help in my case. The selected dir gets outputted inside the <b>Gui class</b>, but i cant access it from other classes. I can execute the code from other classes with  <b>a = Gui(self)</b> like i did inside <b>FunctionChangeName class</b> but i need to be able to save the actual string path to a variable that i can use else where, thats what i cannot do and need help with."}, {"owner": {"reputation": 311, "user_id": 7943938, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bf0e44f3e530763ad81d6c3d000034f4?s=128&d=identicon&r=PG&f=1", "display_name": "Nanoni", "link": "https://stackoverflow.com/users/7943938/nanoni"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1529557601, "post_id": 50957742, "comment_id": 88918239, "body": "Like i have now <b>a = Gui(self)</b> it calls the Classes and print the button and open directory browser and lets me select a directory then and it then outputs it to the screen, but if i do b = a, print(a) inside <b>class FunctionChangeName</b> all i get is = <b>.!frame.!functionchangename.!gui</b> so i need a way to print <b>b</b> as an actual path i.e /home/user/"}, {"owner": {"reputation": 4975, "user_id": 2323393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d52f68fba51eda4b59593a83a3c1250?s=128&d=identicon&r=PG", "display_name": "scotty3785", "link": "https://stackoverflow.com/users/2323393/scotty3785"}, "edited": false, "score": 0, "creation_date": 1529589280, "post_id": 50957742, "comment_id": 88936881, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/50964709/how-to-save-self-return-value-to-a-variable-from-class-b-to-class-a-when-clas\">How to save &quot;self&quot; return value to a variable from Class B: to Class A when Class B gets that value returned by Class C</a>"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1529589440, "post_id": 50957742, "comment_id": 88937013, "body": "Right after the <code>self.seldir.show()</code> in the <code>select_dir()</code> function, you should be able to access <code>self.seldir.selected</code>. Without an MCVE (see <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable Example</a> it&#39;s hard to understand and help with your question."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 12391930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09db8f64043fd7459dc3141de62de480?s=128&d=identicon&r=PG&f=1", "display_name": "pkanda", "link": "https://stackoverflow.com/users/12391930/pkanda"}, "is_accepted": false, "score": 0, "last_activity_date": 1583553681, "creation_date": 1583553681, "answer_id": 60574263, "question_id": 50957742, "link": "https://stackoverflow.com/questions/50957742/how-to-save-askdirectory-result-in-a-variable-i-can-use-using-tkinter-with-oop/60574263#60574263", "title": "How to save askdirectory result in a variable I can use using tkinter with OOP?", "body": "<h1>I had an idea:</h1>\n\n<p>example, if you have f inside a function, you can make it global to have access as variable </p>\n\n<pre><code>def print_path():  \n    # select working directory\n    global f #make f global to access the path\n    f = filedialog.askdirectory(parent=root, initialdir=\"/\", title='Select Dir') \n</code></pre>\n"}], "owner": {"reputation": 311, "user_id": 7943938, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bf0e44f3e530763ad81d6c3d000034f4?s=128&d=identicon&r=PG&f=1", "display_name": "Nanoni", "link": "https://stackoverflow.com/users/7943938/nanoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 392, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1583553681, "creation_date": 1529532429, "last_edit_date": 1529535474, "question_id": 50957742, "link": "https://stackoverflow.com/questions/50957742/how-to-save-askdirectory-result-in-a-variable-i-can-use-using-tkinter-with-oop", "title": "How to save askdirectory result in a variable I can use using tkinter with OOP?", "body": "<p>I have ran into some trouble.\nI'm quite new to OOP and working with <code>tkinter</code> and GUI's in general.</p>\n\n<p>I have managed to find some code on the Internet and meshed it all together to create something and I'm nearly where I want to be.</p>\n\n<p>So what I want is some help figuring this out.</p>\n\n<p>How can I assign results of <code>askdirectory</code> to a variable I can use elsewhere?</p>\n\n<pre><code># coding=utf-8\nimport tkinter as tk\nfrom tkinter import font as tkfont\nfrom tkinter import filedialog\n\n\nclass MainApp(tk.Tk):\n    ....\nclass SelectFunction(tk.Frame):\n    ....\nclass FunctionChangeName(tk.Frame):\n    ....\n        a = Gui(self)\n        # this gets me the askdirectory but how to add it to a variable?\n</code></pre>\n\n<p>Above is the call to run <code>askdirectory</code> code, and it works, just need to find out how to save it to a variable so I can use it, I have tried to print it in several ways, but all I get is something along the lines <code>.!frame.!functionchangename.!gui</code>.</p>\n\n<pre><code>class SelectDir:\n    def __init__(self, container, title, initial):\n        self.master = container\n\n        self.initial = initial\n        self.selected = initial\n\n        self.options = {'parent': container,'title': title,'initialdir':initial,}\n\n    def show(self):\n        result = filedialog.askdirectory()\n        if result:\n            self.selected = result\n\n    def get(self):\n        return self.selected\n\n\nclass Gui(tk.Frame):\n\n    def __init__(self, container):\n        tk.Frame.__init__(self, container)\n\n        frame = tk.Frame(container)\n        frame.pack()\n\n        self.seldir = SelectDir(self, \"Select directory\", \"D:\\\\MyPgm\\\\Python\\\\Tiles_8\")\n\n        button = tk.Button(frame, text=\"Select directory\", command=self.select_dir)\n        button.grid(column=0, row=0)\n\n        self.act_dir = tk.StringVar()\n        self.act_dir.set(\"D:\\\\MyPgm\\\\Python\\\\Tiles_8\")\n\n        entry = tk.Entry(frame, textvariable=self.act_dir, width=30)\n        entry.grid(column=0, row=1)\n\n    def select_dir(self):\n        self.seldir.show()\n        self.act_dir.set(self.seldir.get())\n        # or\n        # result = seldir.show()\n        # self.act_dir.set(result)\n\nif __name__ == \"__main__\":\n    app = MainApp()\n    app.mainloop()\n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "edited": false, "score": 0, "creation_date": 1529545282, "post_id": 50957704, "comment_id": 88915627, "body": "Could you elaborate on exactly how <code>ACC_SALES</code> is computed? If it&#39;s a rolling sum, why does it start at 7 when the only <code>SALES</code> observation in the first row is 3? Is the logic &quot;for each <code>(DATE, ITEM, STORE)</code> tuple, add up all sales within the past <code>LT</code> days&quot;?"}, {"owner": {"reputation": 137, "user_id": 8716580, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210346133391672/picture?type=large", "display_name": "Rodrigo Teixeira", "link": "https://stackoverflow.com/users/8716580/rodrigo-teixeira"}, "reply_to_user": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "edited": false, "score": 0, "creation_date": 1529580446, "post_id": 50957704, "comment_id": 88931071, "body": "The window rolls foward, starting by the next day. I&#180;m going to edit the question e add the code"}], "owner": {"reputation": 137, "user_id": 8716580, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210346133391672/picture?type=large", "display_name": "Rodrigo Teixeira", "link": "https://stackoverflow.com/users/8716580/rodrigo-teixeira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536189450, "creation_date": 1529532191, "last_edit_date": 1536189450, "question_id": 50957704, "link": "https://stackoverflow.com/questions/50957704/how-to-apply-rolling-function-with-iterable-windows-without-using-loops-or-itera", "title": "How to apply rolling function with iterable windows without using loops or iterating over (groupby) groups in Pandas?", "body": "<p>This question is actually an \"spin-off\" of this <a href=\"https://stackoverflow.com/questions/50727342/sort-values-in-dataframe-using-categorical-key-without-groupby-split-apply-combi/\">previous one</a></p>\n\n<p>But this time, imagine you have this \u00b4DataFrame\u00b4 but much larger</p>\n\n<pre><code>      DATE  ITEM   STORE   LT  SALES\n2018-06-06     A    L001    4      3\n2018-06-06     A    L002    2      1\n2018-06-06     A    L003    3      3\n2018-06-06     B    L001    4      1\n2018-06-06     B    L002    2      0\n</code></pre>\n\n<p>I added the column \"LT\" which stands for \"Lead Time\" and switched Stock for \"Sales\". This is just the head of the \u00b4DataFrame\u00b4. You can reproduce the same with the code below:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport itertools as it\n\nlojas = ['L001', 'L002', 'L003']\nitens = list(\"ABC\")\nlead_times = {'L001':4,'L002':2,'L003':3}\ndr = pd.date_range(start='2018-06-06', end='2018-06-12')\n\ndf = pd.DataFrame(data=list(it.product(dr, itens, lojas)), columns=['DATE', 'ITEM', 'STORE'])\ndf['LT'] = df.STORE.map(lead_times)\ndf['SALES'] = np.random.RandomState(seed=101).randint(0,5, size=len(df.ITEM))\n</code></pre>\n\n<p>If you read the thread, you see that the user @coldspeed provided the following answer to calculate the positional STOCK differences between days:</p>\n\n<pre><code>v = df.groupby(['ITEM', 'STORE'], sort=False).STOCK.diff()\ndf['DELTA'] = np.where(np.isnan(v), 0, v)\n</code></pre>\n\n<p>Now imagine that what we want now is to calculate the rollingsum (forward) of sales, in each STORE, but with the window parameter depending on the LT column. Producing the result  bellow (I\u00b4ll append the head and the tail together so you can see 2 examples):</p>\n\n<pre><code>      DATE  ITEM    STORE   LT  SALES   ACC_SALES\n2018-06-06     A     L001    4      3         7.0\n2018-06-07     A     L001    4      0        11.0\n2018-06-08     A     L001    4      3        11.0\n2018-06-09     A     L001    4      0         NaN\n2018-06-10     A     L001    4      4         NaN\n2018-06-11     A     L001    4      4         NaN\n2018-06-12     A     L001    4      3         NaN\n...\n2018-06-06     C     L003    3      4         8.0\n2018-06-07     C     L003    3      3         7.0\n2018-06-08     C     L003    3      3         8.0\n2018-06-09     C     L003    3      2         6.0\n2018-06-10     C     L003    3      2         NaN\n2018-06-11     C     L003    3      4         NaN\n2018-06-12     C     L003    3      0         NaN\n</code></pre>\n\n<p><strong>[EDIT]</strong>\nThere is the code I've used to compute the \"<strong>ACC_SALES</strong>\":</p>\n\n<pre><code>grouped_df = df.groupby(['ITEM','STORE'])\nauxlist = []\n\nfor (name, group) in grouped_df:\n    aux = group.copy()\n    aux.sort_values('DATE', inplace=True)\n    aux.reset_index(drop=True, inplace=True)\n    win = lead_times[aux.STORE.iloc[0]]\n    aux['ACC_SALES'] = aux.SALES.rolling(window=win, min_periods=1).sum().shift(-1*win)\n    auxlist.append(aux)\n\ndf = pd.concat(auxdf)\n</code></pre>\n\n<p>Is there a fast, vectorized \"numpythonic\" way to get this result without iterating over groups?</p>\n"}, {"tags": ["python", "pandas", "csv", "nltk", "corpus"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1529532911, "post_id": 50957686, "comment_id": 88913014, "body": "I cannot reproduce your error. Could you please include the first couple of lines of &quot;myfile.csv&quot; in the question."}, {"owner": {"reputation": 13, "user_id": 9969933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12f82c98ff54a2ce2a2e8f9d36b968a?s=128&d=identicon&r=PG&f=1", "display_name": "Revers3", "link": "https://stackoverflow.com/users/9969933/revers3"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1529580641, "post_id": 50957686, "comment_id": 88931196, "body": "The problem is solved. However if you&#39;re interested; here&#39;s a link to a dummy CSV with the first 100 rows: <a href=\"https://drive.google.com/file/d/1YT_QELpSJ0Rm4iLjCSznGD_8KwFh7kOQ/view?usp=sharing\" rel=\"nofollow noreferrer\">here</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9969933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12f82c98ff54a2ce2a2e8f9d36b968a?s=128&d=identicon&r=PG&f=1", "display_name": "Revers3", "link": "https://stackoverflow.com/users/9969933/revers3"}, "edited": false, "score": 0, "creation_date": 1529565667, "post_id": 50957878, "comment_id": 88921911, "body": "Downvote didn&#39;t come from me. I&#39;m trying it out right now :)"}], "tags": [], "owner": {"reputation": 104, "user_id": 9926654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NuuQH.jpg?s=128&g=1", "display_name": "Silas Bischoff", "link": "https://stackoverflow.com/users/9926654/silas-bischoff"}, "is_accepted": false, "score": -1, "last_activity_date": 1529537405, "last_edit_date": 1529537405, "creation_date": 1529533311, "answer_id": 50957878, "question_id": 50957686, "link": "https://stackoverflow.com/questions/50957686/removing-nltk-stopwords-from-csv-dataframe-rows/50957878#50957878", "title": "Removing nltk stopwords from csv DataFrame rows", "body": "<p>The <em>apply</em>-function does not delete any rows. It just maps a function onto every element of the Series <em>df[\"word1\"]</em>. Also, your entries in column <em>\"word1\"</em> seem to be of type <em>list</em> and not of type <em>string</em>.</p>\n\n<p>However, if <em>df</em> were a pandas DataFrame containing a column <em>\"word1\"</em> with strings in it, just do this</p>\n\n<pre><code>df = df[~df[\"word1\"].isin(stop)]\n</code></pre>\n\n<p>... and you drop all entries from df, where \"word1\" is in stop. Here <em>~</em> is the negation operator, so it means <em>not</em>. The <em>some_series.isin(some_iterable)</em> method returns a Series with the same indices as <em>some_series</em>, where every entry is a boolean denoting whether the respective entry in <em>some_series</em> is contained in <em>some_iterable</em>.</p>\n\n<p>Generally, you can select slices from a DataFrame with</p>\n\n<pre><code>df[Series of booleans]\n</code></pre>\n\n<p>where \"Series\" means a pandas Series. Since pandas Series' work with comparative operators, you can do things like</p>\n\n<pre><code>df[df[\"frequency\"] &gt; 2060]\n</code></pre>\n\n<p>which returns a DataFrame containing only the rows with a frequency-value higher than 2060.</p>\n\n<p><strong>EDIT: I'm not sure if the downvote came from you, but if the code provided here does not work, you should show a few lines of your .csv-file, because from your code alone we can not know what your DataFrame looks like exactly.</strong></p>\n\n<p>Cheers,\nSilas</p>\n"}, {"tags": [], "owner": {"reputation": 268, "user_id": 6698753, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_IfILFKX_q8/AAAAAAAAAAI/AAAAAAAAAxY/ZcI7b3tqyVs/photo.jpg?sz=128", "display_name": "JISHAD A.V", "link": "https://stackoverflow.com/users/6698753/jishad-a-v"}, "is_accepted": true, "score": 0, "last_activity_date": 1529563795, "creation_date": 1529563795, "answer_id": 50962091, "question_id": 50957686, "link": "https://stackoverflow.com/questions/50957686/removing-nltk-stopwords-from-csv-dataframe-rows/50962091#50962091", "title": "Removing nltk stopwords from csv DataFrame rows", "body": "<p>You can use list comprehension for this purpose. Here, created a new column <strong>temp</strong>. The values of <strong>temp</strong> are <strong>False</strong> if any of <strong>word1</strong> or <strong>word2</strong> are in <strong>stop</strong>. Remove those rows whose <strong>temp</strong> value is <strong>False</strong>. Lastly, drop that <strong>temp</strong> column and Write to a new csv file. Hope this helps.</p>\n\n<pre><code>import pandas as pd\nfrom nltk.corpus import stopwords\n\nstop = stopwords.words('english')\ndf = pd.read_csv(\"myfile.csv\", sep=\";\")\n\n\ndf[\"temp\"] = [True  if row.word1 not in stop and row.word2 not in stop else False for index, row in df.iterrows()]\ndf = df[df.temp == True]\ndf.drop('temp', axis=1, inplace=True)\n\ndf.to_csv(\"myfile_out.csv\", sep=';') \n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9969933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12f82c98ff54a2ce2a2e8f9d36b968a?s=128&d=identicon&r=PG&f=1", "display_name": "Revers3", "link": "https://stackoverflow.com/users/9969933/revers3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1100, "favorite_count": 0, "accepted_answer_id": 50962091, "answer_count": 2, "score": 1, "last_activity_date": 1529563795, "creation_date": 1529532111, "question_id": 50957686, "link": "https://stackoverflow.com/questions/50957686/removing-nltk-stopwords-from-csv-dataframe-rows", "title": "Removing nltk stopwords from csv DataFrame rows", "body": "<p>I'm attempting to remove stopwords from the following DataFrame read from a .csv. It's basically a long list of bigrams and the frequency of their occurence in a dataset of shampoo labels.</p>\n\n<p>The goal is to remove the whole row when a stopword appears in either column 'word1' or 'word2'.</p>\n\n<pre><code>                        word1                      word2  frequency\n0                       nicht                         in       3069\n1                        wenn                        sie       2729\n2                         von                    kindern       2108\n3                         die                      h\u00e4nde       2094\n4                        darf                      nicht       2091\n5                       h\u00e4nde                        von       2091\n6                      citric                       acid       2088\n7                     kindern                   gelangen       2082\n8                         sie                      einen       2053\n9                         mit                        den       2023\n10                       eine                   reaktion       1976\n</code></pre>\n\n<p>So far however, I've not even managed to delete a row based on only column 'word1' when it matches with a German stopword from nltk.</p>\n\n<p>The code I use is based on a previous question answered <a href=\"https://stackoverflow.com/questions/29523254/python-remove-stop-words-from-pandas-dataframe\">here</a>.</p>\n\n<pre><code>import pandas as pd\nfrom nltk.corpus import stopwords\n\nstop = stopwords.words('german')\n\ndf = pd.read_table(\"myfile.csv\", sep=\";\")\ndf.columns = [\"word1\",\"word2\",\"frequency\"]\n\ndf[\"word1\"] = df[\"word1\"].apply(lambda x: ' '.join([word for word in x.split() if word not in (stop)]))\n\nprint(df) \n</code></pre>\n\n<p>The error I'm getting is:\nAttributeError: 'list' object has no attribute 'split'</p>\n\n<p>I totally understand that I'm at fault here for not understanding the called function. I'm trying to develop an understanding of pandas &amp; nltk while I'm doing a course on the side, but this isn't really going anywhere :)</p>\n\n<p>Once the DataFrame is cleaned of the stopwords, the goal is to write it into a new CSV. But that's for a later stage.</p>\n\n<p>EDIT: title change for clarification</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "sorting", "pandas-groupby"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1529531996, "post_id": 50957641, "comment_id": 88912692, "body": "If I understand this correctly , you first have to <code>groupby</code> street.  <i>Then</i> you partition odd/even, sort each list, and concatenate the results as needed.  As a final output, do you sort your entire data base into that new order?  Please give a sample input and desired output with two or three streets and perhaps four houses on each street."}], "answers": [{"tags": [], "owner": {"reputation": 1246, "user_id": 2796965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a3bb1a1cb036a85f9b2ce76b02e1a40?s=128&d=identicon&r=PG&f=1", "display_name": "smj", "link": "https://stackoverflow.com/users/2796965/smj"}, "is_accepted": false, "score": 0, "last_activity_date": 1529533609, "creation_date": 1529533609, "answer_id": 50957916, "question_id": 50957641, "link": "https://stackoverflow.com/questions/50957641/conditionally-sort-a-single-column-in-ascending-and-descending-order-in-pandas/50957916#50957916", "title": "Conditionally sort a single column in ascending and descending order in Pandas", "body": "<p>Here is my attempt if I understand you correctly, I'm sure this can be done in a lambda function but it helped to set out the logic in a verbose way :)</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\nnumber_list = list(range(1, 11))\n\ndata = pd.DataFrame(\n    {\n        'town': sorted(['Springfield', 'Shelbyville'] * 10),\n        'street': sorted(['Evergreen Terrace', 'Main Street'] * 10),\n        'number': number_list + number_list\n    }\n)\n\ndata['is_even'] = data['number'] % 2 == 0\n\nfinal = pd.DataFrame()\n\nfor key, data_group in data.groupby(['town', 'street', 'is_even']):\n    if key[2] == True:\n        final = final.append(data_group.sort_values('number', ascending = False))\n    else:\n        final = final.append(data_group.sort_values('number'))\n\nfinal.drop('is_even', axis = 1, inplace = True)\n\nfinal\n</code></pre>\n\n<p>Gives:</p>\n\n<p><a href=\"https://i.stack.imgur.com/hhxWv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hhxWv.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 9357156, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kMWELXh0HVg/AAAAAAAAAAI/AAAAAAAAyqw/1vYGUAGyKso/photo.jpg?sz=128", "display_name": "fjm", "link": "https://stackoverflow.com/users/9357156/fjm"}, "edited": false, "score": 1, "creation_date": 1529585051, "post_id": 50958025, "comment_id": 88934022, "body": "tried both smj &amp; jpp both answer my question, can&#39;t pandasice piRSquared, ran %%timeit on Jupyter NB on both -   option smj 16.7 s &#177; 227 ms per loop (mean &#177; std. dev. of 7 runs, 1 loop each)  option jpp 1.24 s &#177; 2.6 ms per loop (mean &#177; std. dev. of 7 runs, 1 loop each)  -many thank, all 98k addresses sorted!"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 1, "creation_date": 1529587418, "post_id": 50958025, "comment_id": 88935606, "body": "Good answer, I had to leave mid answer (-:"}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 3, "last_activity_date": 1529534372, "creation_date": 1529534372, "answer_id": 50958025, "question_id": 50957641, "link": "https://stackoverflow.com/questions/50957641/conditionally-sort-a-single-column-in-ascending-and-descending-order-in-pandas/50958025#50958025", "title": "Conditionally sort a single column in ascending and descending order in Pandas", "body": "<p>Using <a href=\"https://docs.scipy.org/doc/numpy-1.14.0/reference/generated/numpy.lexsort.html\" rel=\"nofollow noreferrer\"><code>numpy.lexsort</code></a>, you can define a sequence of series by which to sort. Data from @smj.</p>\n\n<p><strong>Setup</strong></p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\nnumber_list = list(range(1, 11))\n\ndf = pd.DataFrame({'town': sorted(['Springfield', 'Shelbyville'] * 10),\n                   'street': sorted(['Evergreen Terrace', 'Main Street'] * 10),\n                   'number': number_list + number_list})\n</code></pre>\n\n<p><strong>Solution</strong></p>\n\n<p>Be careful with ordering. <code>np.lexsort</code> works from the last element of the sequence back; e.g. <code>s1</code> has the highest priority for sorting, <code>s4</code> the lowest.</p>\n\n<pre><code>s1 = df['town']\ns2 = df['street']\ns3 = ~df['number']%2                            # i.e. \"is odd\"\ns4 = np.where(s3, -df['number'], df['number'])  # i.e. \"negate if odd\"\n\nres = df.iloc[np.lexsort((s4, s3, s2, s1))]\n</code></pre>\n\n<p><strong>Result</strong></p>\n\n<pre><code>print(res)\n\n           town             street  number\n0   Shelbyville  Evergreen Terrace       1\n2   Shelbyville  Evergreen Terrace       3\n4   Shelbyville  Evergreen Terrace       5\n6   Shelbyville  Evergreen Terrace       7\n8   Shelbyville  Evergreen Terrace       9\n9   Shelbyville  Evergreen Terrace      10\n7   Shelbyville  Evergreen Terrace       8\n5   Shelbyville  Evergreen Terrace       6\n3   Shelbyville  Evergreen Terrace       4\n1   Shelbyville  Evergreen Terrace       2\n10  Springfield        Main Street       1\n12  Springfield        Main Street       3\n14  Springfield        Main Street       5\n16  Springfield        Main Street       7\n18  Springfield        Main Street       9\n19  Springfield        Main Street      10\n17  Springfield        Main Street       8\n15  Springfield        Main Street       6\n13  Springfield        Main Street       4\n11  Springfield        Main Street       2\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9357156, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kMWELXh0HVg/AAAAAAAAAAI/AAAAAAAAyqw/1vYGUAGyKso/photo.jpg?sz=128", "display_name": "fjm", "link": "https://stackoverflow.com/users/9357156/fjm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1527, "favorite_count": 1, "accepted_answer_id": 50958025, "answer_count": 2, "score": 2, "last_activity_date": 1529534372, "creation_date": 1529531811, "question_id": 50957641, "link": "https://stackoverflow.com/questions/50957641/conditionally-sort-a-single-column-in-ascending-and-descending-order-in-pandas", "title": "Conditionally sort a single column in ascending and descending order in Pandas", "body": "<p>I have 98,000 USA home street addresses that I need to sort in 'walking' order, i.e. listed in the order that you would walk, down one side of the street and then cross the street and walk back.</p>\n\n<pre><code>import pandas as pd\ndf = pd.read_excel('c:pdsort.xlsx')\n\n# add boolean column for even or odd on number column\nis_even = df.loc[:,'number'] % 2 == 0\ndf.loc[:, 'even'] = is_even\n\n# group and then sort by number\ndf.groupby(['town','street','even']).apply(lambda x: x.sort_values('number'))\n\n# sort odd numbers ascending and even numbers descending\n</code></pre>\n\n<p>Desired df results, sort ascending for odd street numbers, then switch to descending sort for even. [sorry, first stackoverflow question, don't qualify yet to copy image of Jupyter notebook]</p>\n\n<p></p>\n\n<p>4 columns: number,street,town,even</p>\n\n<p>desired outcome for column 'number':\n1231\n1233\n1235\n1237\n1239\n1238\n1236\n1234\n1232\n1230</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1529531840, "post_id": 50957627, "comment_id": 88912642, "body": "<code>except</code> clauses handle exceptions. What exception are you expecting here?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 2, "creation_date": 1529531974, "post_id": 50957627, "comment_id": 88912683, "body": "As a side note, a bare <code>except:</code> like this is almost always a bad idea. If there&#39;s, say, a typo in your code, instead of seeing the error, you&#39;re just going to see <code>Youve run out of lives!</code>, which would make it very hard to debug the problem."}, {"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1529532133, "post_id": 50957627, "comment_id": 88912750, "body": "When <code>health</code> reaches zero, your <code>while</code> condition becomes false, and the loop ends. Not sure why you expect anything else to happen."}, {"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 1, "creation_date": 1529532199, "post_id": 50957627, "comment_id": 88912768, "body": "And there is no such thing as a &quot;try except loop&quot;"}, {"owner": {"reputation": 5908, "user_id": 2442613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c872ea7055801788bec55c7703b96d88?s=128&d=identicon&r=PG", "display_name": "Paul Cornelius", "link": "https://stackoverflow.com/users/2442613/paul-cornelius"}, "edited": false, "score": 0, "creation_date": 1529532255, "post_id": 50957627, "comment_id": 88912792, "body": "This is not an appropriate use of exception handling.  Simply remove the <code>try:</code> and the <code>except:</code>.  Leave the print statement.  Re-indent your code.  I think it will work as you intend."}, {"owner": {"reputation": 5908, "user_id": 2442613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c872ea7055801788bec55c7703b96d88?s=128&d=identicon&r=PG", "display_name": "Paul Cornelius", "link": "https://stackoverflow.com/users/2442613/paul-cornelius"}, "edited": false, "score": 0, "creation_date": 1529532331, "post_id": 50957627, "comment_id": 88912821, "body": "Also I just noticed that both of the <code>global</code> statements can be removed.  A variable that&#39;s declared outside of a function or a class definition is already global."}, {"owner": {"reputation": 3209, "user_id": 8289095, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aIiQ6lodE94/AAAAAAAAAAI/AAAAAAAAACY/o_5Sl1VNeDA/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/8289095/chris"}, "edited": false, "score": 0, "creation_date": 1529535234, "post_id": 50957627, "comment_id": 88913592, "body": "Given each go is 50:50 and a successful result increases your health, I found it took a long time to run out of health!"}], "answers": [{"tags": [], "owner": {"reputation": 3209, "user_id": 8289095, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aIiQ6lodE94/AAAAAAAAAAI/AAAAAAAAACY/o_5Sl1VNeDA/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/8289095/chris"}, "is_accepted": false, "score": 0, "last_activity_date": 1529535686, "creation_date": 1529535686, "answer_id": 50958204, "question_id": 50957627, "link": "https://stackoverflow.com/questions/50957627/python-heads-or-tails-game-doesnt-display-except-clause/50958204#50958204", "title": "Python Heads or Tails game, doesnt display except clause", "body": "<p>To get the message to display when health reaches zero, just add an <code>else</code> clause to your <code>while</code> loop. </p>\n\n<p>A <code>try except</code> loop is for catching errors, and your code does not throw any errors.</p>\n\n<p>This will do what you want.</p>\n\n<pre><code>import random\n\nhealth = 3\n\nwhile health != 0:\n    print (\"Pick a side of the coin. Heads or Tails?\")\n    print (\"Your health is:\", health)\n    input_coin = input()\n    input_coin = input_coin.lower()\n    coin = random.choice([\"heads\", \"tails\"])\n\n    if input_coin == coin:\n        print (\"You picked the right side!\")\n        health = health + 1\n        continue\n    elif health == 0:\n        break\n    else:\n        print (\"Sadly, that is not the right side!\")\n        health = health - 1\n        continue\nelse:    \n    print(\"You\u2019ve run out of lives!\")\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9541173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4192daf9551a341fab961dbe35909232?s=128&d=identicon&r=PG&f=1", "display_name": "crayonzer92", "link": "https://stackoverflow.com/users/9541173/crayonzer92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1529535686, "creation_date": 1529531718, "last_edit_date": 1529531779, "question_id": 50957627, "link": "https://stackoverflow.com/questions/50957627/python-heads-or-tails-game-doesnt-display-except-clause", "title": "Python Heads or Tails game, doesnt display except clause", "body": "<p>I am currently working on a Heads or Tails game. So It loops till the health gets to 0 but when it gets to 0 its suppose to break out of the try except loop. But when it gets to the end it just displays \"Sadly, thats not the right side!\" and then just stops... No clue why any help is greatly appreciated.</p>\n\n<p>Code:</p>\n\n<pre><code>import random\n\nglobal health\n\ntry:\n    global health\n    health = 3\n    while health != 0:\n        print (\"Pick a side of the coin. Heads or Tails?\")\n        print (\"Your health is:\", health)\n        input_coin = input()\n        input_coin = input_coin.lower()\n        coin = random.choice([\"heads\", \"tails\"])\n\n        if input_coin == coin:\n            print (\"You picked the right side!\")\n            health = health + 1\n            continue\n        elif health == 0:\n            break\n        else:\n            print (\"Sadly, that is not the right side!\")\n            health = health - 1\n            continue\nexcept:\n    print(\"Youve run out of lives!\")\n</code></pre>\n"}, {"tags": ["python", "scikit-learn", "pipeline"], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 4034344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6045c1cad9720c08e4576a6bf81c81cc?s=128&d=identicon&r=PG&f=1", "display_name": "Shiva Kumar ", "link": "https://stackoverflow.com/users/4034344/shiva-kumar"}, "edited": false, "score": 0, "creation_date": 1529589352, "post_id": 50957835, "comment_id": 88936931, "body": "Thank you so much for this. But what if I had 50 columns of &#39;object&#39; type? I could write a TextSelector class that selects column by key passed in as parameter, but that would mean I would have to construct 50 different pipelines right?"}, {"owner": {"reputation": 3384, "user_id": 6632199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79a1d0417b6c144772be06286bd58d06?s=128&d=identicon&r=PG&f=1", "display_name": "Jan K", "link": "https://stackoverflow.com/users/6632199/jan-k"}, "reply_to_user": {"reputation": 165, "user_id": 4034344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6045c1cad9720c08e4576a6bf81c81cc?s=128&d=identicon&r=PG&f=1", "display_name": "Shiva Kumar ", "link": "https://stackoverflow.com/users/4034344/shiva-kumar"}, "edited": false, "score": 0, "creation_date": 1529590430, "post_id": 50957835, "comment_id": 88937774, "body": "It depends on your goal, what the 50 texts represent and how you want to set things up."}], "tags": [], "owner": {"reputation": 3384, "user_id": 6632199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79a1d0417b6c144772be06286bd58d06?s=128&d=identicon&r=PG&f=1", "display_name": "Jan K", "link": "https://stackoverflow.com/users/6632199/jan-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1529534158, "last_edit_date": 1592644375, "creation_date": 1529532997, "answer_id": 50957835, "question_id": 50957588, "link": "https://stackoverflow.com/questions/50957588/using-standard-and-custom-transformers-in-sklearn-with-pipeline-and-featureunion/50957835#50957835", "title": "Using standard and custom transformers in sklearn with pipeline and featureUnion throws error, TFIDF not iterating through the documents?", "body": "<p><strong>Question 1</strong></p>\n<p>You have 2 columns that hold text:</p>\n<ul>\n<li>meeting_subject_stem_sentence</li>\n<li>priority_label_stem_sentence</li>\n</ul>\n<p>Either apply <code>TfidfVectorizer</code> separately on each of them and then apply <code>FeatureUnion</code> or just concatenate the strings into 1 column and view this concatenation as one document.</p>\n<p>I guess this is the root of your problem, since <code>TfidfVectorizer.fit()</code> inputs <code>raw_documents</code> and it needs to be an iterable that yields str. In your case it is an iterable that yields another iterable (holding 2 strings - one per each text columns).</p>\n<p>Read <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.TfidfVectorizer.html#sklearn.feature_extraction.text.TfidfVectorizer.fit\" rel=\"nofollow noreferrer\">the official docs</a> for more info.</p>\n<p><strong>Question 2</strong></p>\n<p>You cannot use pairwise similarity/distances as a part of the pipeline because it is not a transformer. Transformers transform each sample independently of each other whereas a pairwise metric needs 2 samples at the same time. However,  you can simply compute it after you <code>fit_transform</code> the pipeline via <code>metrics.pairwise.pairwise_distances</code>.</p>\n"}], "owner": {"reputation": 165, "user_id": 4034344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6045c1cad9720c08e4576a6bf81c81cc?s=128&d=identicon&r=PG&f=1", "display_name": "Shiva Kumar ", "link": "https://stackoverflow.com/users/4034344/shiva-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 851, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1529590622, "creation_date": 1529531467, "last_edit_date": 1529590622, "question_id": 50957588, "link": "https://stackoverflow.com/questions/50957588/using-standard-and-custom-transformers-in-sklearn-with-pipeline-and-featureunion", "title": "Using standard and custom transformers in sklearn with pipeline and featureUnion throws error, TFIDF not iterating through the documents?", "body": "<p>I have a DataFrame with 14 columns. I am using custom transformers to</p>\n\n<ol>\n<li>Select desired columns from my DataFrame. Five columns from those fourteen.</li>\n<li>Select column of certain data type (categorical, object, int etc)</li>\n<li>Perform preprocessing on the column based on the type. </li>\n</ol>\n\n<p>My custom ColumnSelector transformer is:</p>\n\n<pre><code>    class ColumnSelector(BaseEstimator, TransformerMixin):\n          def __init__(self, columns):\n                self.columns = columns\n\n          def fit(self, X, y=None):\n              return self\n\n          def transform(self, X):\n              assert isinstance(X, pd.DataFrame)\n\n         try:\n            return X[self.columns]\n    except KeyError:\n            cols_error = list(set(self.columns) - set(X.columns))\n            raise KeyError(\"The DataFrame does not include the columns: %s\" % cols_error)\n</code></pre>\n\n<p>Followed by custom TypeSelector:</p>\n\n<pre><code>    class TypeSelector(BaseEstimator, TransformerMixin):\n        def __init__(self, dtype):\n            self.dtype = dtype\n\n        def fit(self, X, y=None):\n            return self\n\n        def transform(self, X):\n            assert isinstance(X, pd.DataFrame)\n            return X.select_dtypes(include=[self.dtype])\n</code></pre>\n\n<p>The original DataFrame, from which I select desired columns is\ndf_with_types and has 981 rows. The columns I wish to extract are listed below along with there respective data types;</p>\n\n<p>meeting_subject_stem_sentence : 'object',\npriority_label_stem_sentence : 'object',\nattendees: 'category',\nday_of_week: 'category',\nmeeting_time_mins: 'int64'</p>\n\n<p>I then proceed to construct my pipeline the following way</p>\n\n<pre><code>    preprocess_pipeline = make_pipeline(\nColumnSelector(columns=['meeting_subject_stem_sentence',\n                        'attendees', 'day_of_week', 'meeting_time_mins', 'priority_label_stem_sentence']),\nFeatureUnion(transformer_list=[\n    (\"integer_features\", make_pipeline(\n        TypeSelector('int64'),\n        StandardScaler()\n    )),\n    (\"categorical_features\", make_pipeline(\n        TypeSelector(\"category\"),\n        OneHotEnc()\n    )),\n    (\"text_features\", make_pipeline(\n        TypeSelector(\"object\"),\n        TfidfVectorizer(stop_words=stopWords)\n    ))\n])\n</code></pre>\n\n<p>)</p>\n\n<p>The error thrown when I fit the pipeline to data is:</p>\n\n<pre><code>    preprocess_pipeline.fit_transform(df_with_types)\n    ValueError: blocks[0,:] has incompatible row dimensions. Got blocks[0,2].shape[0] == 2, expected 981.\n</code></pre>\n\n<p>I have a hunch this is happening because of the TFIDF vectorizer. Fitting things only on the TFIDF vectorizer without FeatureUnion...</p>\n\n<pre><code>    the_pipe = Pipeline([('col_sel', ColumnSelector(columns=['meeting_subject_stem_sentence',\n                        'attendees', 'day_of_week', 'meeting_time_mins', 'priority_label_stem_sentence'])),\n                 ('type_selector', TypeSelector('object')), ('tfidf', TfidfVectorizer())])\n</code></pre>\n\n<p>When I fit the_pipe:</p>\n\n<pre><code>    a = the_pipe.fit_transform(df_with_types)\n</code></pre>\n\n<p>This gives me a 2*2 matrix instead of 981. </p>\n\n<pre><code>    (0, 0)  1.0\n    (1, 1)  1.0\n</code></pre>\n\n<p>Calling the feature names attribute using named_steps, I get </p>\n\n<pre><code>    the_pipe.named_steps['tfidf'].get_feature_names()\n\n    [u'meeting_subject_stem_sentence', u'priority_label_stem_sentence']\n</code></pre>\n\n<p>It seems to be fitting only on the column names and not iterating through the documents. How do I achieve this in a Pipeline like the above one. Also, if I wanted to apply a pairwise distance/similarity function to each feature as part of the pipeline after ColumnSelector and TypeSelector, what must I do. </p>\n\n<p>An example would be...</p>\n\n<pre><code>    preprocess_pipeline = make_pipeline(\nColumnSelector(columns=['meeting_subject_stem_sentence',\n                        'attendees', 'day_of_week', 'meeting_time_mins', 'priority_label_stem_sentence']),\nFeatureUnion(transformer_list=[\n    (\"integer_features\", make_pipeline(\n        TypeSelector('int64'),\n        StandardScaler(), \n        'Pairwise manhattan distance between each element of the integer feature'\n    )),\n    (\"categorical_features\", make_pipeline(\n        TypeSelector(\"category\"),\n        OneHotEnc(), \n      'Pairwise dice coefficient here'\n    )),\n    (\"text_features\", make_pipeline(\n        TypeSelector(\"object\"),\n        TfidfVectorizer(stop_words=stopWords), \n        'Pairwise cosine similarity here'\n    ))\n])\n</code></pre>\n\n<p>)</p>\n\n<p>Please help. Being a beginner, I have been wracking my head with this to no avail. I have gone through <a href=\"http://zacstewart.com/2014/08/05/pipelines-of-featureunions-of-pipelines.html\" rel=\"nofollow noreferrer\">zac_stewart's blog</a> and many other similar ones but none seem to talk about how to use TFIDF with TypeSelector or ColumnSelector. \nThank you so much for all the help. Hope I formulated the question clearly.</p>\n\n<p>EDIT 1:</p>\n\n<p>If I use a TextSelector transformer, like the following...</p>\n\n<pre><code>    class TextSelector(BaseEstimator, TransformerMixin):\n\"\"\" Transformer that selects text column from DataFrame by key.\"\"\"\n\n     def __init__(self, key):\n         self.key = key\n\n       def fit(self, X, y=None):\n         '''Create X attribute to be transformed'''\n           return self\n\n        def transform(self, X, y=None):\n          '''the key passed here indicates column name'''\n               return X[self.key]\n</code></pre>\n\n<p>text_processing_pipe_line_1 = Pipeline([('selector', TextSelector(key='meeting_subject')),\n                                      ('text_1',  TfidfVectorizer(stop_words=stopWords))])</p>\n\n<pre><code>    t = text_processing_pipe_line_1.fit_transform(df_with_types)\n\n    (0, 656)    0.378616399898\n    (0, 75) 0.378616399898\n    (0, 117)    0.519159384271\n    (0, 545)    0.512337545421\n     (0, 223)   0.425773433566\n      (1, 154)  0.5\n      (1, 137)  0.5\n       (1, 23)  0.5\n       (1, 355) 0.5\n        (2, 656)    0.497937369182\n</code></pre>\n\n<p>This works and it is iterating through the documents, thus if I could make TypeSelector return a series, that would right? Thanks again for the help. </p>\n"}, {"tags": ["python", "postgresql", "google-app-engine", "psycopg2", "google-cloud-sql"], "comments": [{"owner": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "edited": false, "score": 0, "creation_date": 1529568954, "post_id": 50957577, "comment_id": 88923798, "body": "Are you running standard or flexible env?  It looks like your are running in the standard sandboxed environment, which <a href=\"https://cloud.google.com/appengine/docs/standard/python/tools/using-libraries-python-27\" rel=\"nofollow noreferrer\">doesn&#39;t permit c extensions (or .so files)</a>"}, {"owner": {"reputation": 109, "user_id": 8743297, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-rY_dZIn1nDY/AAAAAAAAAAI/AAAAAAAAABE/zwGCUNhr0nc/photo.jpg?sz=128", "display_name": "Dannick Montanede", "link": "https://stackoverflow.com/users/8743297/dannick-montanede"}, "reply_to_user": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "edited": false, "score": 0, "creation_date": 1529579565, "post_id": 50957577, "comment_id": 88930450, "body": "I&#39;m running in standard env, so try to move to flexible"}, {"owner": {"reputation": 353, "user_id": 9741885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e572fe78f8d25ce4ec252d63f0768f?s=128&d=identicon&r=PG&f=1", "display_name": "J.L Valtue&#241;a", "link": "https://stackoverflow.com/users/9741885/j-l-valtue%c3%b1a"}, "reply_to_user": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "edited": false, "score": 0, "creation_date": 1529588124, "post_id": 50957577, "comment_id": 88936073, "body": "@snakecharmerb maybe you can post your comment as answer. Don&#39;t you think?"}, {"owner": {"reputation": 5517, "user_id": 1391685, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/T5JwH.jpg?s=128&g=1", "display_name": "khan", "link": "https://stackoverflow.com/users/1391685/khan"}, "edited": false, "score": 0, "creation_date": 1592099704, "post_id": 50957577, "comment_id": 110302243, "body": "Has this been resolved? I have been struggling to use the same psycopg driver i use locally in the app engine for sometime."}], "owner": {"reputation": 109, "user_id": 8743297, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-rY_dZIn1nDY/AAAAAAAAAAI/AAAAAAAAABE/zwGCUNhr0nc/photo.jpg?sz=128", "display_name": "Dannick Montanede", "link": "https://stackoverflow.com/users/8743297/dannick-montanede"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 251, "favorite_count": 0, "closed_date": 1529601468, "answer_count": 0, "score": 1, "last_activity_date": 1529546197, "creation_date": 1529531398, "last_edit_date": 1529546197, "question_id": 50957577, "link": "https://stackoverflow.com/questions/50957577/importerror-no-module-named-psycopg2-psycopg-with-google-appengine", "closed_reason": "Duplicate", "title": "ImportError: No module named psycopg2._psycopg with google appengine", "body": "<p>I used <a href=\"https://cloud.google.com/appengine/docs/flexible/python/using-cloud-sql-postgres\" rel=\"nofollow noreferrer\">this guide</a> from Google to connect my postgres instance to my application.\nGoogle indicates that psycopg2 is supported.</p>\n\n<p>But here is my error:</p>\n\n<pre><code>File \"/Users/Personal-Project/app/lib/psycopg2/__init__.py\", line 50, in &lt;module&gt;\nfrom psycopg2._psycopg import (                     # noqa\nFile \"/Users/google-cloud-sdk/platform/google_appengine/google/appengine/tools/devappserver2/python/runtime/sandbox.py\", line 1093, in load_module\nraise ImportError('No module named %s' % fullname)\nImportError: No module named psycopg2._psycopg\n</code></pre>\n\n<p>Here is my requirements.txt : </p>\n\n<pre><code>Flask==0.12.2\nFlask-SQLAlchemy==2.3.2\ngunicorn==19.7.1\npsycopg2==2.7.4\n</code></pre>\n\n<p>In my psycopg2 folder, I have a _psycopg.so file.\nI used python 2.7 and coding on Mac OS.</p>\n"}, {"tags": ["python", "opencv"], "comments": [{"owner": {"reputation": 1352, "user_id": 165606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kZART.jpg?s=128&g=1", "display_name": "DanyAlejandro", "link": "https://stackoverflow.com/users/165606/danyalejandro"}, "edited": false, "score": 0, "creation_date": 1529532650, "post_id": 50957574, "comment_id": 88912924, "body": "Does the rectangle always look more or less oriented like the example provided, or will it appear at 45 degree angles? whats the maximum tolerance you want to have to rotation?"}, {"owner": {"reputation": 81, "user_id": 9968946, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qce4xDB8AY4/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq068E6QxSsNZPv8BTi1hqRf3_MJ2A/mo/photo.jpg?sz=128", "display_name": "Amit Solanki", "link": "https://stackoverflow.com/users/9968946/amit-solanki"}, "reply_to_user": {"reputation": 1352, "user_id": 165606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kZART.jpg?s=128&g=1", "display_name": "DanyAlejandro", "link": "https://stackoverflow.com/users/165606/danyalejandro"}, "edited": false, "score": 0, "creation_date": 1529590037, "post_id": 50957574, "comment_id": 88937481, "body": "It might be +/- 5 degrees inclined at max. In that case too I just want the corner coordinates as before"}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 9968946, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qce4xDB8AY4/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq068E6QxSsNZPv8BTi1hqRf3_MJ2A/mo/photo.jpg?sz=128", "display_name": "Amit Solanki", "link": "https://stackoverflow.com/users/9968946/amit-solanki"}, "edited": false, "score": 1, "creation_date": 1529611412, "post_id": 50958269, "comment_id": 88949279, "body": "Thanks Dany, your flow was helpful in understanding on how to go about feature identification. Although, the python solution was more easy to apply."}], "tags": [], "owner": {"reputation": 1352, "user_id": 165606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kZART.jpg?s=128&g=1", "display_name": "DanyAlejandro", "link": "https://stackoverflow.com/users/165606/danyalejandro"}, "is_accepted": false, "score": 0, "last_activity_date": 1529536906, "last_edit_date": 1529536906, "creation_date": 1529536199, "answer_id": 50958269, "question_id": 50957574, "link": "https://stackoverflow.com/questions/50957574/opencv-python-find-corner-coordinates-of-a-greyscale-patterned-rectange-from-a/50958269#50958269", "title": "OpenCV/Python - Find corner coordinates of a greyscale patterned rectange from a grey scale image?", "body": "<p>From pre-processing, I get the following output:\n<a href=\"https://i.stack.imgur.com/7QKWq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7QKWq.png\" alt=\"enter image description here\"></a>\nFrom here you can easily find the 4 corners anyway you like (using things like HarrisCorners, vectorizing the image and taking a geometrical approach, your own corner detection algorithm, etc.). It really depends on your own needs.</p>\n\n<p>Here's my code, all I'm doing is:\n 1. Blur\n 2. Threshold\n 3. Find connected components\n 4. Find the biggest one and separating it\n 5. Finding the contour</p>\n\n<p>please <strong>modify as needed</strong>, take this only as a reference (just in case, OpenCV is the same in C++ and Python, and the examples you provide show that you know what you're doing):</p>\n\n<pre><code>#include &lt;opencv2/opencv.hpp&gt;\n#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\nusing namespace cv;\n\nint main(int argc, char* argv[])\n{\n    Mat img2, img = imread(\"pic.png\");\n    cvtColor(img, img, cv::COLOR_BGR2GRAY);\n    blur(img, img, Size(7, 7));\n\n    threshold(img, img2, 0, 255, THRESH_OTSU | THRESH_BINARY_INV);\n\n    Mat labels, stats, centroids;\n    int n = cv::connectedComponentsWithStats(img2, labels, stats, centroids, 8, CV_16U);\n    ushort area, x0, y0, labelBig = 0, maxArea = 0;\n    for (int i = 1 ; i &lt; n ; i++) {\n        area = stats.at&lt;int&gt;(i, cv::CC_STAT_AREA);\n        if (area &gt; maxArea) {\n            maxArea = area;\n            labelBig = i;\n        }\n    }\n\n    Mat img3 = Mat(img2.rows, img2.cols, CV_8U, Scalar(0));\n\n    std::mutex mtx;\n    labels.forEach&lt;ushort&gt;([&amp;img3, labelBig, &amp;mtx](ushort &amp;label, const int pos[]) -&gt; void {\n        if (label == labelBig) {\n            lock_guard&lt;mutex&gt; guard(mtx);\n            img3.at&lt;uchar&gt;(pos) = 255;\n        }\n    });\n    Mat img4;\n    Canny(img3, img4, 50, 100, 3);\n    imshow(\"Frame\", img4);\n    waitKey();\n    return 0;\n}\n</code></pre>\n\n<p>Notice that I'm using Otsu thresholding which gives it a bit of robustness. Also notice that I'm inverting your image as well; after that the biggest and whitest area is what I consider your rectangle.</p>\n"}, {"comments": [{"owner": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "edited": false, "score": 0, "creation_date": 1529587079, "post_id": 50965309, "comment_id": 88935379, "body": "Thanks for sharing the github link +1. Amazing work !!"}, {"owner": {"reputation": 81, "user_id": 9968946, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qce4xDB8AY4/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq068E6QxSsNZPv8BTi1hqRf3_MJ2A/mo/photo.jpg?sz=128", "display_name": "Amit Solanki", "link": "https://stackoverflow.com/users/9968946/amit-solanki"}, "edited": false, "score": 0, "creation_date": 1529610788, "post_id": 50965309, "comment_id": 88949040, "body": "Thanks Devashish, Your script work well and does exactly what i wanted. In case when i have <a href=\"https://imgur.com/VCW5drq\" rel=\"nofollow noreferrer\">imgur.com/VCW5drq</a> i get two images. How do i change the program that it only selects the largest rectangles?  Also in case of the tilt, i would like to extract the rectangle region and show rotated image without tilt.  Thanks !"}, {"owner": {"reputation": 876, "user_id": 8029329, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yOuxC.jpg?s=128&g=1", "display_name": "Devashish Prasad", "link": "https://stackoverflow.com/users/8029329/devashish-prasad"}, "reply_to_user": {"reputation": 81, "user_id": 9968946, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qce4xDB8AY4/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq068E6QxSsNZPv8BTi1hqRf3_MJ2A/mo/photo.jpg?sz=128", "display_name": "Amit Solanki", "link": "https://stackoverflow.com/users/9968946/amit-solanki"}, "edited": false, "score": 0, "creation_date": 1529655784, "post_id": 50965309, "comment_id": 88962235, "body": "Your welcome @AmitSolanki and JeruLuke ....Talking about your 1st problem, you need to alter the conditon at line number 27 in the above code. It checks the area of contours(rectangles). If the area is below 1000(which means contour is small), it skips that contour. So change 1000 to 2000 or more as needed."}, {"owner": {"reputation": 876, "user_id": 8029329, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yOuxC.jpg?s=128&g=1", "display_name": "Devashish Prasad", "link": "https://stackoverflow.com/users/8029329/devashish-prasad"}, "edited": false, "score": 0, "creation_date": 1529655977, "post_id": 50965309, "comment_id": 88962346, "body": "Now, about second problem.. You first need to find the angle of rotation of the rectangle... you can use code from my github repository then use this code to rotate image [<a href=\"https://codeshare.io/5XmJe8]\" rel=\"nofollow noreferrer\">codeshare.io/5XmJe8]</a> (this link will expire in 24 hrs), now to extract your rectangle find contours again and use <code>x,y,w,h = cv2.boundingRect(c)</code> then use these values to extract region of interest <code>roi = img[y:y+h, x:x+w]</code> . This roi is your extracted rectangle."}], "tags": [], "owner": {"reputation": 876, "user_id": 8029329, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yOuxC.jpg?s=128&g=1", "display_name": "Devashish Prasad", "link": "https://stackoverflow.com/users/8029329/devashish-prasad"}, "is_accepted": true, "score": 3, "last_activity_date": 1529573986, "creation_date": 1529573986, "answer_id": 50965309, "question_id": 50957574, "link": "https://stackoverflow.com/questions/50957574/opencv-python-find-corner-coordinates-of-a-greyscale-patterned-rectange-from-a/50965309#50965309", "title": "OpenCV/Python - Find corner coordinates of a greyscale patterned rectange from a grey scale image?", "body": "<p>If you are looking for python code to achieve a lot more, you can find it at this repo...</p>\n\n<p><a href=\"https://github.com/DevashishPrasad/Angle-Distance\" rel=\"nofollow noreferrer\">https://github.com/DevashishPrasad/Angle-Distance</a></p>\n\n<p>So, to solve your problem this code might be helpful - </p>\n\n<pre><code># import the necessary packages\nfrom imutils import perspective\nfrom imutils import contours\nimport numpy as np\nimport imutils\nimport cv2\n\n# load the image, convert it to grayscale, and blur it slightly\nimage = cv2.imread(\"test.png\")\ngray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\ngray = cv2.GaussianBlur(gray, (7, 7), 0)\n\n# perform edge detection, then perform a dilation + erosion to\n# close gaps in between object edges\nedged = cv2.Canny(gray, 50, 100)\nedged = cv2.dilate(edged, None, iterations=1)\nedged = cv2.erode(edged, None, iterations=1)\n\n# find contours in the edge map\ncnts = cv2.findContours(edged.copy(), cv2.RETR_EXTERNAL,\n    cv2.CHAIN_APPROX_SIMPLE)\ncnts = cnts[0] if imutils.is_cv2() else cnts[1]\n\n# loop over the contours individually\nfor c in cnts:\n    # This is to ignore that small hair countour which is not big enough\n    if cv2.contourArea(c) &lt; 1000:\n        continue\n\n    # compute the rotated bounding box of the contour\n    box = cv2.minAreaRect(c)\n    box = cv2.cv.BoxPoints(box) if imutils.is_cv2() else cv2.boxPoints(box)\n    box = np.array(box, dtype=\"int\")\n\n    # order the points in the contour such that they appear\n    # in top-left, top-right, bottom-right, and bottom-left\n    # order, then draw the outline of the rotated bounding\n    # box\n    box = perspective.order_points(box)\n    # draw the contours on the image\n    orig = image.copy()\n    cv2.drawContours(orig, [box.astype(\"int\")], -1, (0, 255, 0), 5)\n\n    # loop over the original points\n    for (xA, yA) in list(box):\n        # draw circles corresponding to the current points and\n        cv2.circle(orig, (int(xA), int(yA)), 9, (0,0,255), -1)\n        cv2.putText(orig, \"({},{})\".format(xA, yA), (int(xA - 50), int(yA - 10) - 20),\n            cv2.FONT_HERSHEY_SIMPLEX, 1.8, (255,0,0), 5)\n\n        # show the output image, resize it as per your requirements\n        cv2.imshow(\"Image\", cv2.resize(orig,(800,600))) \n\n    cv2.waitKey(0)\n</code></pre>\n\n<p>Comments explain it all</p>\n\n<p>Output - <a href=\"https://i.stack.imgur.com/nNdqB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nNdqB.png\" alt=\"4 corners and their coordinates\"></a></p>\n"}], "owner": {"reputation": 81, "user_id": 9968946, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qce4xDB8AY4/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq068E6QxSsNZPv8BTi1hqRf3_MJ2A/mo/photo.jpg?sz=128", "display_name": "Amit Solanki", "link": "https://stackoverflow.com/users/9968946/amit-solanki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3198, "favorite_count": 1, "accepted_answer_id": 50965309, "answer_count": 2, "score": 1, "last_activity_date": 1529573986, "creation_date": 1529531385, "question_id": 50957574, "link": "https://stackoverflow.com/questions/50957574/opencv-python-find-corner-coordinates-of-a-greyscale-patterned-rectange-from-a", "title": "OpenCV/Python - Find corner coordinates of a greyscale patterned rectange from a grey scale image?", "body": "<p>I would like to have the coordinates of the corners of a rectangle object from a greyscale image with some noise. </p>\n\n<p>I start with this image <a href=\"https://imgur.com/BNoCn1u\" rel=\"nofollow noreferrer\">https://imgur.com/BNoCn1u</a>. The central region has a checkered rectangle with different grey intensities. What i want is coordinates of the rectangle in green <a href=\"https://imgur.com/97efZlb\" rel=\"nofollow noreferrer\">https://imgur.com/97efZlb</a>.</p>\n\n<p>With below code:</p>\n\n<pre><code>im = cv2.imread(\"opencv_frame_0.tif\",0)\ndata = np.array(im)\nedg = cv2.Canny(data, 120, 255)\nret,thresh = cv2.threshold(data,140,255,1)\nimshow(thresh,interpolation='none', cmap=cm.gray)\n</code></pre>\n\n<p>I am able to get <a href=\"https://imgur.com/1xurVTB\" rel=\"nofollow noreferrer\">https://imgur.com/1xurVTB</a>. Which looks quite good but I don't know how to efficiently get the corner coordinates central white frame. I will have other images like this later where the central grey rectangle can be of a different size so I want the code to be optimized to work for that future.</p>\n\n<p>I tried other examples from <a href=\"https://stackoverflow.com/questions/46486078/opencv-how-to-find-rectangle-contour-of-a-rectangle-with-round-corner\">OpenCV - How to find rectangle contour of a rectangle with round corner?</a> and <a href=\"https://stackoverflow.com/questions/42255746/opencv-python-cv2-minarearect-wont-return-a-rotated-rectangle\">OpenCV/Python: cv2.minAreaRect won&#39;t return a rotated rectangle</a>. The last one gives me <a href=\"https://imgur.com/E4Gl8Z6\" rel=\"nofollow noreferrer\">https://imgur.com/E4Gl8Z6</a> with best settings. </p>\n\n<p>Any help is appreciated! Thanks.</p>\n"}, {"tags": ["python", "pandas", "average", "mean"], "comments": [{"owner": {"reputation": 1371, "user_id": 6291574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CDfBc.png?s=128&g=1", "display_name": "durjoy", "link": "https://stackoverflow.com/users/6291574/durjoy"}, "edited": false, "score": 0, "creation_date": 1529557773, "post_id": 50957548, "comment_id": 88918298, "body": "can you check the data type of the date column"}], "answers": [{"tags": [], "owner": {"reputation": 1952, "user_id": 4472331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b141db9afcc2c331f5f7f397fd667926?s=128&d=identicon&r=PG", "display_name": "gyoza", "link": "https://stackoverflow.com/users/4472331/gyoza"}, "is_accepted": true, "score": 0, "last_activity_date": 1529561527, "last_edit_date": 1529561527, "creation_date": 1529558187, "answer_id": 50960839, "question_id": 50957548, "link": "https://stackoverflow.com/questions/50957548/create-a-monthly-mean-column-in-multiple-years/50960839#50960839", "title": "Create a monthly mean column in multiple years", "body": "<p>Create separate dataframe for <code>mean</code> and merge it the original, followed by backfill of NaN values.</p>\n\n<pre><code>import numpy as np\n\n# calculate &amp; store `mean` in a new dataframe\ndf2 = df.set_index('date')['tmax'].resample('M', how=[np.mean]).reset_index(drop=False)\n\n# merge 2 dataframes\npd.merge(df, df2, on='date', how='left').fillna(method='bfill')\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 9911671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jLibF.jpg?s=128&g=1", "display_name": "fyec", "link": "https://stackoverflow.com/users/9911671/fyec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 50960839, "answer_count": 1, "score": 0, "last_activity_date": 1529561527, "creation_date": 1529531262, "last_edit_date": 1529540674, "question_id": 50957548, "link": "https://stackoverflow.com/questions/50957548/create-a-monthly-mean-column-in-multiple-years", "title": "Create a monthly mean column in multiple years", "body": "<p>I have a 'dates' column and a 'tmax' column. I want to create one another column that shows each month's average in each year. I tried </p>\n\n<pre><code>    df['date']=pd.date_range(start='1/01/1980', end='31/12/2015')\n    #df['date'] = df['date'].dt.strftime('%d-%b-%Y') format of date\n    df['means'] = df.resample('M', on='date').mean()\n</code></pre>\n\n<p>I have got</p>\n\n<pre><code>    ValueError: Wrong number of items passed 4, placement implies 1\n</code></pre>\n\n<p>Sample values are below:</p>\n\n<pre><code>    date        tmax\n    1-Jan-80    15.773\n    2-Jan-80    18.342\n    ...\n    30-Jan-80   15.851\n    31-Jan-80   11.962\n    ...\n    1-Dec-80    15.773\n    2-Dec-80    18.342\n    ...\n    30-Dec-80   15.851\n    31-Dec-80   11.962\n    1-Jan-81    15.773\n    2-Jan-81    18.342\n    ...\n    30-Jan-81   15.851\n    31-Jan-81   11.962\n    ...\n    1-Dec-2015  15.773\n    2-Dec-2015  18.342\n    ...\n    30-Dec-2015 15.851\n    31-Dec-2015 11.962\n</code></pre>\n"}, {"tags": ["python", "linux", "anaconda", "dicom"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1529532449, "post_id": 50957541, "comment_id": 88912857, "body": "If you&#39;re looking at the page for the library on anaconda.org, it&#39;s going to tell you how to use it with Anaconda. Go to the actual homepage for the library in question, and it should tell you how to use it in other ways. (There are a few libraries that <i>only</i> have Anaconda instructions, because they don&#39;t test with anything else, build wheel packages, etc. For those packages, you have to either know what you&#39;re doing with Python and setuptools, or just switch to Anaconda. But they&#39;re pretty rare.)"}], "answers": [{"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 2, "last_activity_date": 1529532966, "creation_date": 1529532966, "answer_id": 50957828, "question_id": 50957541, "link": "https://stackoverflow.com/questions/50957541/install-gdcm-without-conda/50957828#50957828", "title": "Install gdcm without conda", "body": "<p>The problem is that you've gone to the Anaconda page for gdcm, instead of to the project's homepage. Of course the Anaconda page tells you how to install it for Anaconda. But it's got a link to the homepage right there near the top:</p>\n\n<pre><code>Home: https://sourceforge.net/p/gdcm/gdcm/\n</code></pre>\n\n<p>If you follow the link, the readme refers you to an <a href=\"https://sourceforge.net/p/gdcm/gdcm/ci/master/tree/INSTALL.txt\" rel=\"nofollow noreferrer\"><code>INSTALL.TXT</code></a> file, which starts off with:</p>\n\n<blockquote>\n  <p>See the wiki page at:</p>\n  \n  <p><a href=\"http://gdcm.sourceforge.net/wiki/index.php/Getting_Started\" rel=\"nofollow noreferrer\">http://gdcm.sourceforge.net/wiki/index.php/Getting_Started</a></p>\n  \n  <p>If you are reading this file, it certainly means you do not know how to build GDCM. See:</p>\n  \n  <p><a href=\"http://gdcm.sourceforge.net/wiki/index.php/Configuring_and_Building\" rel=\"nofollow noreferrer\">http://gdcm.sourceforge.net/wiki/index.php/Configuring_and_Building</a></p>\n</blockquote>\n\n<p>It's pretty clear that this is a C library that has bindings for a bunch of languages, not a Python library. So, if you're not on a platform that has pre-built packages for it (it looks like that's only Debian and Ubuntu linux), you'll have to have a bunch of prereqs that you don't usually need for Python, but the directions look pretty easy to follow.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 5191860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8310ed4afa8997efa0fa7d6d3d796c90?s=128&d=identicon&r=PG&f=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/5191860/coredump"}, "is_accepted": false, "score": 0, "last_activity_date": 1529573778, "creation_date": 1529573778, "answer_id": 50965248, "question_id": 50957541, "link": "https://stackoverflow.com/questions/50957541/install-gdcm-without-conda/50965248#50965248", "title": "Install gdcm without conda", "body": "<p>You can compile it from the scratch.</p>\n\n<p>First step, you download from the website <code>https://sourceforge.net/p/gdcm/gdcm/</code></p>\n\n<p>Next step, it's done with <code>CMake</code> command</p>\n"}], "owner": {"reputation": 706, "user_id": 8155727, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/11e4d866d859b02f077ffe09cb3ae44d?s=128&d=identicon&r=PG&f=1", "display_name": "Mehdi", "link": "https://stackoverflow.com/users/8155727/mehdi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5413, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1529573778, "creation_date": 1529531221, "last_edit_date": 1529531834, "question_id": 50957541, "link": "https://stackoverflow.com/questions/50957541/install-gdcm-without-conda", "title": "Install gdcm without conda", "body": "<p>I want to install gdcm on linux. Based on the instructions (<a href=\"https://anaconda.org/clinicalgraphics/gdcm\" rel=\"nofollow noreferrer\">https://anaconda.org/clinicalgraphics/gdcm</a>), I have to use:</p>\n\n<pre><code>conda install -c clinicalgraphics gdcm\n</code></pre>\n\n<p>However, I can not use conda install because I should not use Anaconda for some reasons. So, how can I install gdcm?</p>\n"}, {"tags": ["python", "pulp", "chalice"], "comments": [{"owner": {"reputation": 21488, "user_id": 918215, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16f5fa1320e138acc5b4bc24f3da72ac?s=128&d=identicon&r=PG", "display_name": "Ram Narasimhan", "link": "https://stackoverflow.com/users/918215/ram-narasimhan"}, "edited": false, "score": 0, "creation_date": 1529612414, "post_id": 50957523, "comment_id": 88949717, "body": "Did you test the pulp installation? From EC2 Python IDE, can you try <code>&gt;&gt;&gt; import pulp</code> and then  <code>&gt;&gt;&gt; pulp.pulpTestAll().</code> That way you can start to rule out possible causes."}, {"owner": {"reputation": 2719, "user_id": 6029837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aac8f1edff43955f080f48d366242dd?s=128&d=identicon&r=PG", "display_name": "Renato Byrro", "link": "https://stackoverflow.com/users/6029837/renato-byrro"}, "edited": false, "score": 0, "creation_date": 1529787215, "post_id": 50957523, "comment_id": 89003369, "body": "In which instance type are you running this? <code>MemoryError</code> means the Python interpreter ran out of memory (RAM). Try running in an instance with more RAM and let us know."}], "owner": {"reputation": 1, "user_id": 9969937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2562a1c606a1a7780815060f5f06b67e?s=128&d=identicon&r=PG&f=1", "display_name": "j doe", "link": "https://stackoverflow.com/users/9969937/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1529531581, "creation_date": 1529531154, "last_edit_date": 1529531581, "question_id": 50957523, "link": "https://stackoverflow.com/questions/50957523/unable-to-deploy-on-chalice-with-pulp-python-library", "title": "unable to deploy on chalice with pulp python library", "body": "<p>I'm running <strong><em>amazon ec2 instance</em></strong>. Have created a chalice project. So far, have installed pulp into the project folder using <code>pip -install pulp -t /home/test/project/vendor/</code></p>\n\n<p>When doing chalice deploy, I get error:</p>\n\n<pre><code>return json.dumps(serialized_body).encode(self.DEFAULT_ENCODING)\nMemoryError\n</code></pre>\n\n<p>When deleting the pulp from the vendor folder, chalice deploy works fine. please help.</p>\n"}, {"tags": ["python", "css", "scrapy", "web-crawler"], "comments": [{"owner": {"reputation": 11736, "user_id": 1987838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2tIuS.jpg?s=128&g=1", "display_name": "Hackerman", "link": "https://stackoverflow.com/users/1987838/hackerman"}, "edited": false, "score": 0, "creation_date": 1529531416, "post_id": 50957522, "comment_id": 88912495, "body": "Where are you using <code>start_urls</code>?"}, {"owner": {"reputation": 1, "user_id": 9961688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59071a89ddc1b4198424badd32a96488?s=128&d=identicon&r=PG&f=1", "display_name": "Joana", "link": "https://stackoverflow.com/users/9961688/joana"}, "reply_to_user": {"reputation": 11736, "user_id": 1987838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2tIuS.jpg?s=128&g=1", "display_name": "Hackerman", "link": "https://stackoverflow.com/users/1987838/hackerman"}, "edited": false, "score": 0, "creation_date": 1529531550, "post_id": 50957522, "comment_id": 88912539, "body": "probably nowhere ... where should I use it?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9961688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59071a89ddc1b4198424badd32a96488?s=128&d=identicon&r=PG&f=1", "display_name": "Joana", "link": "https://stackoverflow.com/users/9961688/joana"}, "edited": false, "score": 0, "creation_date": 1529578307, "post_id": 50965873, "comment_id": 88929658, "body": "Thank you for your help :) But I still have the problem of not just getting the information from this line of code: &quot;response.css (&#39;ul.dotted-list, li.h4 :: text&#39;). Extract ()&quot;. What prints from this line is the ul.dotted-list &lt;li&gt; information &lt;/ li&gt; and I wanted it to appear just the information ... how do I do this? And another question, if I want to insert more information to extract from the subpage just add several more to that same correct code?"}, {"owner": {"reputation": 59, "user_id": 8885726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce7bb8b0131e31a2dde2ba72b47826d5?s=128&d=identicon&r=PG&f=1", "display_name": "mxmn", "link": "https://stackoverflow.com/users/8885726/mxmn"}, "reply_to_user": {"reputation": 1, "user_id": 9961688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59071a89ddc1b4198424badd32a96488?s=128&d=identicon&r=PG&f=1", "display_name": "Joana", "link": "https://stackoverflow.com/users/9961688/joana"}, "edited": false, "score": 0, "creation_date": 1529578804, "post_id": 50965873, "comment_id": 88930003, "body": "So you should replace it by <code>response.css(&#39; ul.dotted-list li::text&#39;).extract()</code>. Yes if you want to get more infomartion you can just put it in <code>youritem</code> e.g <code>youritem[&#39;title&#39;]=response.xpath(&#39;&#47;&#47;h1[@itemprop=&quot;name&quot;]&#47;tex&zwnj;&#8203;t()&#39;).extract_first(&zwnj;&#8203;)</code>"}, {"owner": {"reputation": 1, "user_id": 9961688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59071a89ddc1b4198424badd32a96488?s=128&d=identicon&r=PG&f=1", "display_name": "Joana", "link": "https://stackoverflow.com/users/9961688/joana"}, "edited": false, "score": 0, "creation_date": 1529579344, "post_id": 50965873, "comment_id": 88930320, "body": "Thanks for you help :) Can you help me with one more thing? I need the database to always be updated and this happens because the crawlers are always updating, how do I synchronize the crawlers? any suggestion?"}, {"owner": {"reputation": 59, "user_id": 8885726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce7bb8b0131e31a2dde2ba72b47826d5?s=128&d=identicon&r=PG&f=1", "display_name": "mxmn", "link": "https://stackoverflow.com/users/8885726/mxmn"}, "reply_to_user": {"reputation": 1, "user_id": 9961688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59071a89ddc1b4198424badd32a96488?s=128&d=identicon&r=PG&f=1", "display_name": "Joana", "link": "https://stackoverflow.com/users/9961688/joana"}, "edited": false, "score": 0, "creation_date": 1529587080, "post_id": 50965873, "comment_id": 88935381, "body": "What do you mean by synchronize the crawlers ? If I understand well, you want that the data in your data is still up-to-date, isn&#39;t it ?"}, {"owner": {"reputation": 59, "user_id": 8885726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce7bb8b0131e31a2dde2ba72b47826d5?s=128&d=identicon&r=PG&f=1", "display_name": "mxmn", "link": "https://stackoverflow.com/users/8885726/mxmn"}, "reply_to_user": {"reputation": 1, "user_id": 9961688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59071a89ddc1b4198424badd32a96488?s=128&d=identicon&r=PG&f=1", "display_name": "Joana", "link": "https://stackoverflow.com/users/9961688/joana"}, "edited": false, "score": 0, "creation_date": 1529664851, "post_id": 50965873, "comment_id": 88967387, "body": "I don&#39;t think it is possible to be always up-to-date without constantly scraping. But I think that a good practice would be to scrape everyday even though you would be up to date at least every day."}], "tags": [], "owner": {"reputation": 59, "user_id": 8885726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce7bb8b0131e31a2dde2ba72b47826d5?s=128&d=identicon&r=PG&f=1", "display_name": "mxmn", "link": "https://stackoverflow.com/users/8885726/mxmn"}, "is_accepted": false, "score": 0, "last_activity_date": 1529575685, "creation_date": 1529575685, "answer_id": 50965873, "question_id": 50957522, "link": "https://stackoverflow.com/questions/50957522/info-crawled-0-pages-at-0-pages-min-scraped-0-items-at-0-items-min/50965873#50965873", "title": "INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)", "body": "<p>There are two things to correct to make it work:</p>\n\n<ul>\n<li><p>You need to define FEED_URI setting with the path you want to store the result</p></li>\n<li><p>You need to use <code>response</code> in <code>parse_subpage</code> because the logic is the following<code>: scrapy downloads \"https://www.imovirtual.com/arrendar/apartamento/lisboa/\" and gives the response to</code>parse<code>, you extract ads url and you ask scrapy to download each pages and give the downloaded pages to</code>parse_subpage<code>. So</code>response<code>in</code>parse_subpage` corresponds to this <a href=\"https://www.imovirtual.com/anuncio/t0-totalmente-remodelado-localizacao-excelente-IDGBAY.html#913474cdaa\" rel=\"nofollow noreferrer\">https://www.imovirtual.com/anuncio/t0-totalmente-remodelado-localizacao-excelente-IDGBAY.html#913474cdaa</a> for example </p></li>\n</ul>\n\n<p>This should work:</p>\n\n<pre><code>import scrapy\n\n\nclass SapoSpider(scrapy.Spider):\n    name = \"imo\"\n    allowed_domains = [\"imovirtual.com\"]\n    start_urls = [\"https://www.imovirtual.com/arrendar/apartamento/lisboa/\"]\n    custom_settings = {\n        'FEED_URI': './output.json'\n    }\n    def parse(self,response):\n        subpage_links = []\n        for i in response.css('div.offer-item-details'):\n            youritem = {\n            'preco':i.css('span.offer-item title::text').extract_first(),\n            'autor':i.css('li.offer-item-price::text').extract(),\n            'data':i.css('li.offer-item-area::text').extract(),\n            'data_2':i.css('li.offer-item-price-perm::text').extract()\n            }\n            subpage_link = i.css('header[class=offer-item-header] a::attr(href)').extract()\n            subpage_links.extend(subpage_link)\n\n            for subpage_link in subpage_links:\n                yield scrapy.Request(subpage_link, callback=self.parse_subpage, meta={'item':youritem})\n\n    def parse_subpage(self,response):\n        youritem = response.meta.get('item')\n        youritem['info'] = response.css(' ul.dotted-list, li.h4::text').extract()\n        yield youritem\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9961688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59071a89ddc1b4198424badd32a96488?s=128&d=identicon&r=PG&f=1", "display_name": "Joana", "link": "https://stackoverflow.com/users/9961688/joana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529575685, "creation_date": 1529531153, "question_id": 50957522, "link": "https://stackoverflow.com/questions/50957522/info-crawled-0-pages-at-0-pages-min-scraped-0-items-at-0-items-min", "title": "INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)", "body": "<p>I just began to learn Python and Scrapy.\nMy first project is to crawl information on a website containing web security information. But when I run that using cmd, it says that \"Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)\" and nothing seems to come out. I'd be grateful if someone kind could solve my problem.</p>\n\n<p>My code:</p>\n\n<pre><code>import scrapy\n\nclass SapoSpider(scrapy.Spider):\nname = \"imo\"\nallowed_domains = [\"imovirtual.com\"]\nstart_urls = [\"https://www.imovirtual.com/arrendar/apartamento/lisboa/\"]\n\ndef parse(self,response):\n    subpage_links = []\n    for i in response.css('div.offer-item-details'):\n        youritem = {\n        'preco':i.css('span.offer-item title::text').extract_first(),\n        'autor':i.css('li.offer-item-price::text').extract(),\n        'data':i.css('li.offer-item-area::text').extract(),\n        'data_2':i.css('li.offer-item-price-perm::text').extract()\n        }\n        subpage_link = i.css('header[class=offer-item-header] a::attr(href)').extract()\n        subpage_links.extend(subpage_link)\n\n        for subpage_link in subpage_links:\n            yield scrapy.Request(subpage_link, callback=self.parse_subpage, meta={'item':youritem})\n\ndef parse_subpage(self,response):\n    for j in response.css('header[class=offer-item-header] a::attr(href)'):\n        youritem = response.meta.get('item')\n        youritem['info'] = j.css(' ul.dotted-list, li.h4::text').extract()\n        yield youritem\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1369, "user_id": 4383396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1279516226/picture?type=large", "display_name": "Grant Williams", "link": "https://stackoverflow.com/users/4383396/grant-williams"}, "edited": false, "score": 0, "creation_date": 1529530903, "post_id": 50957432, "comment_id": 88912294, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1548704/delete-multiple-files-matching-a-pattern\">Delete multiple files matching a pattern</a>"}, {"owner": {"reputation": 1369, "user_id": 4383396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1279516226/picture?type=large", "display_name": "Grant Williams", "link": "https://stackoverflow.com/users/4383396/grant-williams"}, "edited": false, "score": 0, "creation_date": 1529530937, "post_id": 50957432, "comment_id": 88912312, "body": "The linked question has some good approaches to the same problem!"}], "answers": [{"comments": [{"owner": {"reputation": 531, "user_id": 7933418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eec40b228d90adc86ec949347733d2e1?s=128&d=identicon&r=PG&f=1", "display_name": "iprof0214", "link": "https://stackoverflow.com/users/7933418/iprof0214"}, "edited": false, "score": 0, "creation_date": 1529533404, "post_id": 50957724, "comment_id": 88913141, "body": "Thanks Jianan.  def remove_files_by_pattern(dir, pattern):     for f in os.listdir(dir):         if re.search(pattern, f):             os.remove(os.path.join(dir, f))  dir = &#39;/home/documents/&#39; pattern = file_date+&#39;-rs.csv&#39;+&#39;*&#39;  purge(dir,pattern)  The above code gives me invalid syntax error."}, {"owner": {"reputation": 81, "user_id": 9963800, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uAlE2gaIJBQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1vHwscKHYhKLsyVxQin2QqoXTD4Q/mo/photo.jpg?sz=128", "display_name": "Jianan Ding", "link": "https://stackoverflow.com/users/9963800/jianan-ding"}, "reply_to_user": {"reputation": 531, "user_id": 7933418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eec40b228d90adc86ec949347733d2e1?s=128&d=identicon&r=PG&f=1", "display_name": "iprof0214", "link": "https://stackoverflow.com/users/7933418/iprof0214"}, "edited": false, "score": 0, "creation_date": 1529545775, "post_id": 50957724, "comment_id": 88915737, "body": "Without the proper code formatting, I cannot really say what is wrong with your code syntax. Besides, your <code>pattern</code> variable is not correct. Saying you have a <code>date</code> as <code>2018-06-20</code>, your <code>pattern</code> after concatenation will be <code>2018-06-20-rs.csv*</code>. I don&#39;t think this is what you expected."}], "tags": [], "owner": {"reputation": 81, "user_id": 9963800, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uAlE2gaIJBQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1vHwscKHYhKLsyVxQin2QqoXTD4Q/mo/photo.jpg?sz=128", "display_name": "Jianan Ding", "link": "https://stackoverflow.com/users/9963800/jianan-ding"}, "is_accepted": false, "score": 1, "last_activity_date": 1529545755, "last_edit_date": 1529545755, "creation_date": 1529532322, "answer_id": 50957724, "question_id": 50957432, "link": "https://stackoverflow.com/questions/50957432/remove-all-files-in-a-directory-matching-regular-expression-in-python/50957724#50957724", "title": "Remove all files in a directory matching regular expression in Python", "body": "<p>Try this:</p>\n\n<pre><code>import os, re\n\ndef purge(dir, pattern):\n    for f in os.listdir(dir):\n        if re.search(pattern, f):\n            os.remove(os.path.join(dir, f))\n</code></pre>\n\n<p>Make sure <code>dir</code> is the correct path to the directory that contains your files, and <code>pattern</code> is a valid regex. </p>\n"}], "owner": {"reputation": 531, "user_id": 7933418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eec40b228d90adc86ec949347733d2e1?s=128&d=identicon&r=PG&f=1", "display_name": "iprof0214", "link": "https://stackoverflow.com/users/7933418/iprof0214"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529545755, "creation_date": 1529530742, "question_id": 50957432, "link": "https://stackoverflow.com/questions/50957432/remove-all-files-in-a-directory-matching-regular-expression-in-python", "title": "Remove all files in a directory matching regular expression in Python", "body": "<p>I have two files in the directory home/documents/ named 2018-06-rs.csv000 and 2018-06-rs.csv001. I want to remove both the files from the directory.</p>\n\n<p>Following is my code:</p>\n\n<pre><code>import datetime\nimport os\n\nnow = datetime.datetime.now()\nfile_date = now.strftime(\"%Y-%m\")\n\nos.remove(\"/home/documents/\"+file_date+\"-rs.csv*\") \n</code></pre>\n\n<p>The error I'm getting is :</p>\n\n<pre><code>OSError: [Errno 2] No such file or directory: '/home/documents/201806-rs.csv*'\n</code></pre>\n\n<p>Listing the above path directs to the actual file though.</p>\n\n<pre><code>ls /home/documents/201806-rs.csv*\n</code></pre>\n\n<p>Appreciate any feedback. </p>\n"}, {"tags": ["python", "python-3.x", "class", "oop"], "comments": [{"owner": {"reputation": 986, "user_id": 7663649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2772ff178b6b78778a0018ddd77d6a25?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/7663649/pierre"}, "edited": false, "score": 0, "creation_date": 1529530813, "post_id": 50957382, "comment_id": 88912261, "body": "How are you planning to call <code>double_eggs()</code>? If you are calling it from the <code>Outside</code> class, you could just pass <code>eggs</code> as an argument."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1529531127, "post_id": 50957382, "comment_id": 88912384, "body": "Or you could make Inside take a <code>parent</code> argument on initialisation, and pass in <code>self</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9448725"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1529531244, "post_id": 50957382, "comment_id": 88912424, "body": "@DanielRoseman thanks for your comment, I&#39;m a beginner coder in Python, can you please explain what it means?"}, {"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 0, "creation_date": 1529532167, "post_id": 50957382, "comment_id": 88912760, "body": "@HUAN5235 Whose attribute eggs?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9448725"}, "reply_to_user": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 0, "creation_date": 1529532261, "post_id": 50957382, "comment_id": 88912794, "body": "@Goyo <code>Outside</code>&#39;s"}, {"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 0, "creation_date": 1529532515, "post_id": 50957382, "comment_id": 88912875, "body": "@HUAN5235  <code>Outside</code> does not have an attribute <code>eggs</code> (<code>Outside.eggs</code> will raise <code>AttributeError</code>). Instances of <code>Outside</code> have, but it is not clear what instance you want, there isn&#39;t any in your code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9448725"}, "reply_to_user": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 0, "creation_date": 1529532581, "post_id": 50957382, "comment_id": 88912899, "body": "@Goyo Whoops! I meant an <i>instance</i> of <code>Outside</code>. Sorry"}, {"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 0, "creation_date": 1529532604, "post_id": 50957382, "comment_id": 88912904, "body": "@HUAN5235 What instance?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9448725"}, "reply_to_user": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 0, "creation_date": 1529532751, "post_id": 50957382, "comment_id": 88912959, "body": "@Goyo When I create an <i>instance</i> of <code>Outside</code>, I want <code>Inside</code> to be able to access <code>Outside</code>&#39;s <code>eggs</code> instance attribute."}, {"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 1, "creation_date": 1529532908, "post_id": 50957382, "comment_id": 88913013, "body": "@HUAN5235 Again, there is no &quot;<code>Outside</code>&#39;s <code>eggs</code>&quot; class attribute. It is an instance attribute."}, {"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 1, "creation_date": 1529533053, "post_id": 50957382, "comment_id": 88913053, "body": "@HUAN5235 Just pass the instance as an argument <code>def double_eggs(self, outside)</code>? Then you can access any attribute of <code>outside</code> in the body of <code>double_eggs</code>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9448725"}, "edited": false, "score": 0, "creation_date": 1529531049, "post_id": 50957458, "comment_id": 88912353, "body": "Is there a way to <i>not</i> use inheritance? If it&#39;s hopeless, then I&#39;ll change my code."}, {"owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "edited": false, "score": 0, "creation_date": 1529531096, "post_id": 50957458, "comment_id": 88912371, "body": "@HUAN5235 It definitely cannot be done the way you want. There would be other ways than inheritance. But inheritance serves exactly that purpose so there is no reason not to use it."}], "tags": [], "owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "is_accepted": false, "score": 1, "last_activity_date": 1529531151, "last_edit_date": 1529531151, "creation_date": 1529530843, "answer_id": 50957458, "question_id": 50957382, "link": "https://stackoverflow.com/questions/50957382/can-a-class-instance-in-a-class-attribute-access-its-outer-class-python/50957458#50957458", "title": "Can a class instance in a class attribute access its outer class? ~ Python", "body": "<p>References are one-way, an object does not know who is refering to it. So it is not possible the way you set up your classes.</p>\n\n<p>Although, what you seem to want is for <code>Inside</code> to extend the functionalities of <code>Outside</code>. You do this with inheritance.</p>\n\n<pre><code>class Outside:\n    def __init__(self, spam, ham):\n        self.eggs = spam * ham\n\nclass Inside(Outside):\n    def double_eggs(self):\n        return self.eggs * 2\n\nobj = Inside(1, 2)\nprint(obj.double_eggs()) # 4\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9448725"}, "edited": false, "score": 0, "creation_date": 1529532429, "post_id": 50957675, "comment_id": 88912854, "body": "Does the variable <code>self</code> in the class <code>Outside</code> refer to the class <code>Outside</code>, or it refers to an <i>instance</i> of <code>Outside</code>?"}, {"owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "edited": false, "score": 0, "creation_date": 1529534505, "post_id": 50957675, "comment_id": 88913431, "body": "@Huan5235 unless a method is a classmethod or a staticmethod, the first argument is always the <i>instance</i> which invoked the method"}], "tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": true, "score": 0, "last_activity_date": 1529532038, "creation_date": 1529532038, "answer_id": 50957675, "question_id": 50957382, "link": "https://stackoverflow.com/questions/50957382/can-a-class-instance-in-a-class-attribute-access-its-outer-class-python/50957675#50957675", "title": "Can a class instance in a class attribute access its outer class? ~ Python", "body": "<p>If Inside needs a reference to Outside, you should pass it.</p>\n\n<pre><code>class Inside:\n    def __init__(self, outside):\n        self.outside = outside\n    def double_eggs(self):\n        return self.outside.eggs * 2\n\nclass Outside:\n    def __init__(self, spam, ham):\n        self.eggs = spam * ham\n        self.inside_class = Inside(self)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9448725"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 50957675, "answer_count": 2, "score": -1, "last_activity_date": 1529532038, "creation_date": 1529530518, "question_id": 50957382, "link": "https://stackoverflow.com/questions/50957382/can-a-class-instance-in-a-class-attribute-access-its-outer-class-python", "title": "Can a class instance in a class attribute access its outer class? ~ Python", "body": "<p>I'm wondering how you can access outer classes from the scope of class instances in an attribute of the outer class. I have heard of the <code>super()</code> function, but it only works for inheritance.</p>\n\n<p>To make things clear, I have given an example:</p>\n\n<pre><code>class Outside:\n    def __init__(self, spam, ham):\n        self.eggs = spam * ham\n        self.inside_class = Inside()\n\nclass Inside:\n    def double_eggs(self):\n        # TODO: return the attribute eggs mulitplied by 2\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "asynchronous", "async-await", "python-asyncio"], "answers": [{"tags": [], "owner": {"reputation": 998, "user_id": 3874512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2096d0d108e55ca0b691fb9161377ae1?s=128&d=identicon&r=PG&f=1", "display_name": "BowlingHawk95", "link": "https://stackoverflow.com/users/3874512/bowlinghawk95"}, "is_accepted": false, "score": 2, "last_activity_date": 1529531019, "creation_date": 1529531019, "answer_id": 50957496, "question_id": 50957341, "link": "https://stackoverflow.com/questions/50957341/how-to-setup-a-background-process-using-asyncio-as-part-of-a-module/50957496#50957496", "title": "How to setup a background process using asyncio as part of a module", "body": "<p>The general flow of an asyncio program is something like this.</p>\n\n<pre><code>async def long_io_bound_operation():\n    await &lt;call some async function that does your work&gt;\n    ...\n\ndef main():\n    asyncio.get_event_loop().run_until_complete(long_io_bound_operation())\n</code></pre>\n\n<p>There are other ways to actually wait on the coroutine returned by the function call <code>long_io_bound_operation()</code> depending on what you want, but this is the main form of it.  Read up on the asyncio module for the gritty details, but the gist of it is that every time you use the <code>await</code> keyword, the python runtime can elect to do a non-blocking wait for the result rather than blocking and spinning waiting on some work to be done.</p>\n\n<p>It's a little unclear to me from your code exactly what protocol you plan to invoke for this communication, but it's a really good bet that there is already an asyncio-compliant wrapper around that protocol written for you to leverage.  <code>aiohttp</code> is an async wrapper for http request, for example.</p>\n\n<p>If you give more details about the protocol you're using, then you'll probably get more specific advice for your problem.  Hope this general summary is useful, though.</p>\n"}, {"comments": [{"owner": {"reputation": 138, "user_id": 3166881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b04357749d4f401c3f28378858d7c340?s=128&d=identicon&r=PG&f=1", "display_name": "user3166881", "link": "https://stackoverflow.com/users/3166881/user3166881"}, "edited": false, "score": 0, "creation_date": 1529599984, "post_id": 50957973, "comment_id": 88943883, "body": "This comes close to what I was describing - to your point Joe, I suppose it&#39;s up to the user of this code to start the event loop?  I should look into several asyncio support modules to see how they implemented it"}, {"owner": {"reputation": 106, "user_id": 9967721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba254cff4e1553dceb555d9101fb2581?s=128&d=identicon&r=PG", "display_name": "Joe Weston", "link": "https://stackoverflow.com/users/9967721/joe-weston"}, "reply_to_user": {"reputation": 138, "user_id": 3166881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b04357749d4f401c3f28378858d7c340?s=128&d=identicon&r=PG&f=1", "display_name": "user3166881", "link": "https://stackoverflow.com/users/3166881/user3166881"}, "edited": false, "score": 0, "creation_date": 1529605582, "post_id": 50957973, "comment_id": 88946702, "body": "Yes, if you want to use asyncio then the client program will always need to &quot;cooperate&quot; with you by using asyncio itself. If you don&#39;t want this restriction then another option would be to use threads, but then you enter into a whole other world of pain."}], "tags": [], "owner": {"reputation": 106, "user_id": 9967721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba254cff4e1553dceb555d9101fb2581?s=128&d=identicon&r=PG", "display_name": "Joe Weston", "link": "https://stackoverflow.com/users/9967721/joe-weston"}, "is_accepted": true, "score": 4, "last_activity_date": 1529586338, "last_edit_date": 1529586338, "creation_date": 1529533969, "answer_id": 50957973, "question_id": 50957341, "link": "https://stackoverflow.com/questions/50957341/how-to-setup-a-background-process-using-asyncio-as-part-of-a-module/50957973#50957973", "title": "How to setup a background process using asyncio as part of a module", "body": "<p>A way to accomplish this is to have your class schedule a task on the event loop using <a href=\"https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.AbstractEventLoop.create_task\" rel=\"nofollow noreferrer\"><code>create_task</code></a>.\nThis can be done before or after the event loop has been started.</p>\n\n<p>As you want to have a separate timer for each address, it would be simplest to have 1 task per address;\nwe can keep these in a dictionary alongside the addresses:</p>\n\n<pre><code>class CustomMessagingSystem:\n\n    def __init__(self, computer=None, ioloop=asyncio.get_event_loop()):\n        self.addresses = {}\n        self.updaters = {}\n        self.ioloop = ioloop\n        if computer:\n            self._add_address(computer)\n\n    def get_address(self, computer):\n        try:\n            return self.addresses[computer]\n        except KeyError:\n            self._add_address(computer)\n            return self.addresses[computer]\n\n    def _add_address(self, computer):\n            address = self.find_address(INTERMEDIARY_COMPUTER_C_ADDRESS, computer)\n            task = self.ioloop.create_task(self._update_address, computer)\n            self.updaters[computer] = task\n            self.addresses[computer] = address\n\n    async def _update_address(self, computer):\n        while True:\n            addr, expiration_time = self.find_address(INTERMEDIARY_COMPUTER_C_ADDRESS, computer)\n            self.addresses[addr] = addr\n            await asyncio.sleep(expiration_time)\n\n    def send_message(self, computer, message):\n        deliver_msg(self.get_address(computer), message)\n</code></pre>\n\n<p>Naturally, if the event loop is never started, then the updating will never happen.</p>\n\n<p>Finally, something that you'll want to do is to control the lifetime of these updater tasks.\nI didn't implement this in the above example to keep it short.\nThe standard approach is to make your class into a context manager, and get <code>__exit__</code>\nto cancel all the updaters.</p>\n"}], "owner": {"reputation": 138, "user_id": 3166881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b04357749d4f401c3f28378858d7c340?s=128&d=identicon&r=PG&f=1", "display_name": "user3166881", "link": "https://stackoverflow.com/users/3166881/user3166881"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5259, "favorite_count": 0, "accepted_answer_id": 50957973, "answer_count": 2, "score": 3, "last_activity_date": 1529586338, "creation_date": 1529530338, "question_id": 50957341, "link": "https://stackoverflow.com/questions/50957341/how-to-setup-a-background-process-using-asyncio-as-part-of-a-module", "title": "How to setup a background process using asyncio as part of a module", "body": "<p>I'm writing a python module (experimental use case) which gives users the ability to send messages to another computer. The computer we want to send the message to has an unknown address which changes at arbitrary times. There is another computer (intermediary) which provides the address and time until the address expires. </p>\n\n<p>For simplicity sake, let's call the one sending the message <em>computer-A</em>, the one receiving <em>computer-B</em> and <em>computer-C</em> is the intermediary we need to contact for computer-B's address. </p>\n\n<p><strong>What I'm trying to accomplish:</strong></p>\n\n<p>I want to be able to defer the process of waiting for the expiration time to be over to asyncio.sleep(). When the time expires, I would expect the process to get back control of the event loop and run a function to update the address.</p>\n\n<p>The problem i'm struggling with is how do i implement this within a class where I cannot invoke run_until_complete/run_forever (or am i blatantly incorrect). How do you implement such a thing using the asyncio framework?</p>\n\n<p><strong>Example hypothetical code?:</strong></p>\n\n<pre><code>from some_random_messaging_service import deliver_msg\n\nINTERMEDIARY_COMPUTER_C_ADDRESS = \"some.random.address\"\n\nclass CustomMessagingSystem:\n\n    def __init__(self, computer=None):\n        \"\"\"Constructor\n\n        :param computer: computer name\n\n        \"\"\"\n        self.addresses = {}\n        if computer:\n            self.get_address(computer)\n\n    def get_address(self, computer):\n        \"\"\"Gets address from computer-C (intermediary)\n\n        :param computer: computer name\n\n        \"\"\"\n        self.addresses[computer] = self.find_address(INTERMEDIARY_COMPUTER_C_ADDRESS, computer)\n        await self.update_address(computer, self.expiration_time(computer))\n\n    def expiration_time(self, computer):\n        \"\"\"\n        :param computer: computer name\n        :return: address expiration time in seconds\n        \"\"\"\n        return self.addresses[computer][1]\n\n    def address(self, computer):\n        \"\"\"\n\n        :param computer: computer name\n        :return: computer address\n\n        \"\"\"\n        return self.addresses[computer][0]\n\n    async def update_address(self, computer, expiration_time):\n        \"\"\"updates address of computer after given expiration_time\n\n        :param computer: computer name\n        :expiration_time: expiration time in seconds\n\n        \"\"\"\n        asyncio.sleep(expiration_time)\n        self.get_address(computer)\n\n    def send_message(self, computer, message):\n        \"\"\"Sends message to target computer\n\n        :param computer: computer name\n        :param message: UTF-8 message\n\n        \"\"\"\n        deliver_msg(self.address(computer), message)\n</code></pre>\n"}, {"tags": ["python", "algorithm", "machine-learning", "scikit-learn", "anomaly-detection"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 5238383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1f5feefd82f9c944aae5dfae6c5a8df?s=128&d=identicon&r=PG&f=1", "display_name": "Dheepan Manoharan", "link": "https://stackoverflow.com/users/5238383/dheepan-manoharan"}, "edited": false, "score": 1, "creation_date": 1529571292, "post_id": 50957630, "comment_id": 88925201, "body": "what do you mean one to one mapping from feature to target. is it having same values in two columns? What is feature and target that you are referring too ?   And with respect to the reference, I referred it too but in my use case I don&#39;t have the labels to use Grid search."}, {"owner": {"reputation": 821, "user_id": 10452700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172245999723325/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/10452700/mario"}, "edited": false, "score": 0, "creation_date": 1615897509, "post_id": 50957630, "comment_id": 117829000, "body": "@Gambit1614 Thanks for your answer. May I ask you kindly to have a look at related post <a href=\"https://stackoverflow.com/questions/66643736/incorrect-results-of-isolationforest\">here</a>?"}], "tags": [], "owner": {"reputation": 7246, "user_id": 8160718, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/fFhDh.jpg?s=128&g=1", "display_name": "Gambit1614", "link": "https://stackoverflow.com/users/8160718/gambit1614"}, "is_accepted": true, "score": 2, "last_activity_date": 1529532940, "last_edit_date": 1529532940, "creation_date": 1529531749, "answer_id": 50957630, "question_id": 50957340, "link": "https://stackoverflow.com/questions/50957340/isolation-forest-sklearn-for-1d-array-or-list-and-how-to-tune-hyper-parameters/50957630#50957630", "title": "Isolation Forest Sklearn for 1D array or list and how to tune hyper parameters", "body": "<p>It won't make sense to apply Isolation forest to 1D array or list. This is because in that case it would simply be a one to one mapping from feature to target. </p>\n\n<p>You can read <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.ensemble.IsolationForest.html\" rel=\"nofollow noreferrer\">the official documentation</a> to get a better idea of the different parameters helps</p>\n\n<ul>\n<li><strong>contamination</strong></li>\n</ul>\n\n<blockquote>\n  <p>The amount of contamination of the data set, i.e. the proportion of outliers in the data set. Used when fitting to define the threshold on the decision function.</p>\n</blockquote>\n\n<p>Try experimenting with different values in range [0,0.5] to see which one gives the best results</p>\n\n<ul>\n<li><strong>max_features</strong> </li>\n</ul>\n\n<blockquote>\n  <p>The number of features to draw from X to train each base estimator.</p>\n</blockquote>\n\n<p>Try values like 5,6,10, etc. any int of your choice and validate it with the final test data</p>\n\n<ul>\n<li><strong>n_estimators</strong> try multiple values like 10,20,50, etc. to see which works best.</li>\n</ul>\n\n<p>You can also use <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.model_selection.GridSearchCV.html\" rel=\"nofollow noreferrer\">GridSearchCV</a> to automate this process of parameter estimation. </p>\n\n<p>Just try experimenting with different values using gridSearchCV and see which one gives the best results.</p>\n\n<p>Try this</p>\n\n<pre><code>from sklearn.model_selection import GridSearchCV\nfrom sklearn.metrics import f1_score, make_scorer\n\nmy_scoring_func = make_scorer(f1_score)\nparameters = {'n_estimators':[10,30,50,80], 'max_features':[0.1, 0.2, 0.3,0.4], 'contamination' : [0.1, 0.2, 0.3]}\niso_for =  IsolationForest(max_samples='auto')\nclf = GridSearchCV(iso_for, parameters,  scoring=my_scoring_func)\n</code></pre>\n\n<p>Then use <code>clf</code> to fit the data. Although note that GridSearchCV requires bot <code>x</code> and <code>y</code> (i.e. train data and labels) for the <code>fit</code> method.</p>\n\n<p><strong>Note</strong> :You can read <a href=\"http://sdsawtelle.github.io/blog/output/week9-anomaly-andrew-ng-machine-learning-with-python.html#Try-IsolationForests-for-High-Dimensions\" rel=\"nofollow noreferrer\">this blog post</a> for further reference if you wish to use GridSearchCv with Isolation forest, else you can manually try with different values and plot graphs to see the results.</p>\n"}], "owner": {"reputation": 27, "user_id": 5238383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1f5feefd82f9c944aae5dfae6c5a8df?s=128&d=identicon&r=PG&f=1", "display_name": "Dheepan Manoharan", "link": "https://stackoverflow.com/users/5238383/dheepan-manoharan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2792, "favorite_count": 0, "accepted_answer_id": 50957630, "answer_count": 1, "score": 0, "last_activity_date": 1616617604, "creation_date": 1529530337, "last_edit_date": 1616617604, "question_id": 50957340, "link": "https://stackoverflow.com/questions/50957340/isolation-forest-sklearn-for-1d-array-or-list-and-how-to-tune-hyper-parameters", "title": "Isolation Forest Sklearn for 1D array or list and how to tune hyper parameters", "body": "<p>Is there a way to implement sklearn isolation forest for a 1D array or list? All the examples I came across are for data of 2 Dimension or more.</p>\n<p>I have right now developed a model with three features and the example code snipped is mentioned below:</p>\n<pre><code># dataframe of three columns\ndf_data = datafr[['col_A', 'col_B', 'col_C']]\nw_train = page_data[:700]\nw_test = page_data[700:-2]\n\nfrom sklearn.ensemble import IsolationForest\n# fit the model\nclf = IsolationForest(max_samples='auto')\nclf.fit(w_train)\n\n#testing it using test set\ny_pred_test = clf.predict(w_test)\n</code></pre>\n<p>The reference I mainly relied upon: <a href=\"http://scikit-learn.org/stable/auto_examples/ensemble/plot_isolation_forest.html#sphx-glr-auto-examples-ensemble-plot-isolation-forest-py\" rel=\"nofollow noreferrer\">IsolationForest example | scikit-learn</a></p>\n<p>The df_data is a data frame with three columns. I am actually looking to find outlier in 1 Dimension or list data.</p>\n<p>The other question is how to tune an isolation forest model? One of the ways is to increase the contamination value to reduce the false positives. But how to use the other parameters like n_estimators, max_samples, max_features, versbose, etc.</p>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "answers": [{"comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 1, "creation_date": 1529531287, "post_id": 50957544, "comment_id": 88912442, "body": "Wow!  Why not do you own rolling?!?!?!  Nice!  +1"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 3, "creation_date": 1529531326, "post_id": 50957544, "comment_id": 88912461, "body": "That&#39;s how I <code>roll</code>"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 2, "last_activity_date": 1529531242, "creation_date": 1529531242, "answer_id": 50957544, "question_id": 50957329, "link": "https://stackoverflow.com/questions/50957329/pandas-adding-rolling-statistics-to-a-dataframe-for-all-the-columns/50957544#50957544", "title": "Pandas: Adding Rolling statistics to a dataframe for all the columns", "body": "<p>One way to do it</p>\n\n<pre><code>d = pd.concat({\n    df.index[i]: df[['A', 'B']].iloc[max(0, i - 1):i + 1].agg(\n        ['min', 'max', 'count', 'mean', 'sum', 'std']).rename(str.title)\n    for i in range(1, len(df))\n})\n\nd.unstack()\n\n                                   A                                                       B                                              \n                                 Min       Max Count      Mean       Sum       Std       Min       Max Count      Mean       Sum       Std\n2018-06-21 14:32:32.964218 -0.286073 -0.286073   1.0 -0.286073 -0.286073       NaN -0.886240 -0.475733   2.0 -0.680987 -1.361973  0.290272\n2018-06-22 14:32:32.964218 -0.286073 -0.286073   1.0 -0.286073 -0.286073       NaN -0.475733  0.689682   2.0  0.106974  0.213949  0.824073\n2018-06-23 14:32:32.964218 -2.653319 -2.653319   1.0 -2.653319 -2.653319       NaN  0.689682  0.689682   1.0  0.689682  0.689682       NaN\n2018-06-24 14:32:32.964218 -2.653319 -2.653319   1.0 -2.653319 -2.653319       NaN -1.305549 -1.305549   1.0 -1.305549 -1.305549       NaN\n2018-06-25 14:32:32.964218       NaN       NaN   0.0       NaN  0.000000       NaN -1.305549 -1.305549   1.0 -1.305549 -1.305549       NaN\n2018-06-26 14:32:32.964218       NaN       NaN   0.0       NaN  0.000000       NaN       NaN       NaN   0.0       NaN  0.000000       NaN\n2018-06-27 14:32:32.964218       NaN       NaN   0.0       NaN  0.000000       NaN       NaN       NaN   0.0       NaN  0.000000       NaN\n2018-06-28 14:32:32.964218  0.421051  0.421051   1.0  0.421051  0.421051       NaN -0.031075 -0.031075   1.0 -0.031075 -0.031075       NaN\n2018-06-29 14:32:32.964218 -1.065603  0.421051   2.0 -0.322276 -0.644552  1.051223 -0.031075 -0.031075   1.0 -0.031075 -0.031075       NaN\n</code></pre>\n"}], "owner": {"reputation": 365, "user_id": 9264149, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/45aa4b927dc8efa2ee413b1fc7abf3b7?s=128&d=identicon&r=PG&f=1", "display_name": "Behinoo", "link": "https://stackoverflow.com/users/9264149/behinoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 0, "accepted_answer_id": 50957544, "answer_count": 1, "score": 2, "last_activity_date": 1529531242, "creation_date": 1529530266, "question_id": 50957329, "link": "https://stackoverflow.com/questions/50957329/pandas-adding-rolling-statistics-to-a-dataframe-for-all-the-columns", "title": "Pandas: Adding Rolling statistics to a dataframe for all the columns", "body": "<p>I want to calculate the rolling average, rolling max, rolling min of a data frame and also respect the ID of observation too and store them in a new column. My original data frame have many columns so manually renaming the column is not possible. \nHere is an example: </p>\n\n<pre><code>from datetime import datetime, timedelta\nimport pandas as pd\nimport numpy as np\nimport random\nnp.random.seed(11) \ndate_today = datetime.now()\nndays = 10\ndf = pd.DataFrame({'date': [date_today + timedelta(days=x) for x in range(ndays)], \n               'A': pd.Series(np.random.randn(ndays)),     'B':pd.Series(np.random.randn(ndays))})\ndf = df.set_index('date')\ndf = df.mask(np.random.random(df.shape) &lt; .6)\n\ndf['ID']=1\ndf.ID[6:10]=2\ndf\n</code></pre>\n\n<p>Currently, I am doing the process manually in this form:</p>\n\n<pre><code>df[['A_mean','B_mean']]=df.groupby('ID').apply(pd.rolling_mean, 2, min_periods=1).drop('ID',axis=1)\ndf[['A_max','B_max']]=df.groupby('ID').apply(pd.rolling_max, 2, min_periods=1).drop('ID',axis=1)\n</code></pre>\n\n<p>is there any way to do this with out needing to manually store the new columns.</p>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup"], "comments": [{"owner": {"reputation": 894, "user_id": 3994693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9HjbX.jpg?s=128&g=1", "display_name": "Tomas Farias", "link": "https://stackoverflow.com/users/3994693/tomas-farias"}, "edited": false, "score": 0, "creation_date": 1529530363, "post_id": 50957283, "comment_id": 88912094, "body": "Use <code>soup.find_all</code> and iterate over the <code>ResultSet</code>"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1529530455, "post_id": 50957283, "comment_id": 88912118, "body": "The code you&#39;ve presented works with the example you&#39;ve given. (Although you shouldn&#39;t be using the undocumented legacy <code>getText</code> method that&#39;s only there for BS3 compatibility; just use the <code>text</code> attribute.) So\u2026 what&#39;s the problem here?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1529530551, "post_id": 50957283, "comment_id": 88912152, "body": "Is the problem that it works for this example, but doesn&#39;t work the next time you fetch a new page, because those IDs are auto-generated or something? If so, you need to explain that in your question. (The answer is probably going to be using a regex match or function match instead of a string match for <code>id</code>, but you&#39;ll need to show us a different example that doesn&#39;t work with the existing code before I could be sure of exactly what the regex or function should be.)"}, {"owner": {"reputation": 23, "user_id": 9969775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67d94bf6b0c0d56a4bbf3320c14306be?s=128&d=identicon&r=PG&f=1", "display_name": "Davicholo", "link": "https://stackoverflow.com/users/9969775/davicholo"}, "edited": false, "score": 0, "creation_date": 1529531116, "post_id": 50957283, "comment_id": 88912381, "body": "Sorry the error in terminal is:  first_page = int(soup.find(&#39;span&#39;, {&#39;id&#39;: &#39;viewns_Z7_AVEQAI930OBRD02JPMTPG21004_:form1:textfooterInfoN&zwnj;&#8203;umPagMAQ&#39;}).getText(&zwnj;&#8203;)) AttributeError: &#39;NoneType&#39; object has no attribute &#39;getText&#39;"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1529531673, "post_id": 50957283, "comment_id": 88912584, "body": "@Davicholo First, edit that into the question, don&#39;t paste it as a comment. Second, you <i>don&#39;t</i> get that for the example in your question, so you need to give us an example that actually reproduces your error. Please read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> in the help."}], "answers": [{"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 0, "last_activity_date": 1529531605, "creation_date": 1529531605, "answer_id": 50957613, "question_id": 50957283, "link": "https://stackoverflow.com/questions/50957283/get-num-of-page-with-beautifulsoup/50957613#50957613", "title": "Get num of page with beautifulsoup", "body": "<p>The code you provided already works for the example you provided.</p>\n\n<p>My guess is that your problem is that it doesn't work for any other page, probably because those <code>id</code> values are different each time.</p>\n\n<p>If that's the case, you need to look at (or show us) multiple different outputs to figure out if there's a recognizable pattern that you can match with a regular expression or a function full of string operations or whatever. See <a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/#searching-the-tree\" rel=\"nofollow noreferrer\">Searching the tree</a> in the docs for the different kinds of filters you can use.</p>\n\n<hr>\n\n<p>As a wild guess, that <code>Z7</code> and <code>AVEQAI930OBRD02JPMTPG21004</code> are replaced by different strings of capitals and digits each time, but the rest of the format is always the same? If so, there are some pretty obvious regular expressions you can use:</p>\n\n<pre><code>rnumpag = re.compile(r'.*:form1:textfooterInfoNumPagMAQ')\nrtotalpagina = re.compile(r'.*:form1:textfooterInfoTotalPaginaMAQ')\nrtotaltotal = re.compile(r'.*:form1:textfooterTotalTotalMAQ')\n\nnumpag = int(soup.find('span', id=rnumpag).string)\ntotalpagina = int(soup.find('span', id=rtotalpagina).string)\ntotaltotal = int(soup.find('span', id=rtotaltotal).string)\n</code></pre>\n\n<p>This works on your provided example, and would also work on a different page that had different strings of characters within the part we're matching with <code>.*</code>.</p>\n\n<p>And, even if my wild guess was wrong, this should show you how to write a search for whatever you actually <em>do</em> have to search for.</p>\n\n<hr>\n\n<p>As a side note, you were using the undocumented legacy function <code>getText()</code>. This implies that you're copying and pasting ancient BS3 code. Don't do that. Some of it will work with BS4, even when it isn't documented to (as in this case), but it's still a bad idea. It's like trying to run Python 2 source code with Python 3 without understanding the differences. </p>\n\n<p>What you want here is either <code>get_text()</code>, <code>string</code>, or <code>text</code>, and you should look at what all three of these mean in the docs to understand the difference\u2014but here, the only thing within the tag is a text string, so they all happen to do the same thing.</p>\n"}], "owner": {"reputation": 23, "user_id": 9969775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67d94bf6b0c0d56a4bbf3320c14306be?s=128&d=identicon&r=PG&f=1", "display_name": "Davicholo", "link": "https://stackoverflow.com/users/9969775/davicholo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1529602634, "creation_date": 1529530104, "last_edit_date": 1529602634, "question_id": 50957283, "link": "https://stackoverflow.com/questions/50957283/get-num-of-page-with-beautifulsoup", "title": "Get num of page with beautifulsoup", "body": "<p>i want to get the number of pages in the next code html:</p>\n\n<pre><code>&lt;span id=\"viewns_Z7_AVEQAI930OBRD02JPMTPG21004_:form1:textfooterInfoNumPagMAQ\" class=\"outputText marginLeft0punto5\"&gt;1&lt;/span&gt;\n\n&lt;span id=\"viewns_Z7_AVEQAI930OBRD02JPMTPG21004_:form1:textfooterInfoTotalPaginaMAQ\" class=\"outputText marginLeft0punto5\"&gt;37&lt;/span&gt;\n\n&lt;span id=\"viewns_Z7_AVEQAI930OBRD02JPMTPG21004_:form1:textfooterTotalTotalMAQ\" class=\"outputText marginLeft0punto5\"&gt;736&lt;/span&gt;\n</code></pre>\n\n<p>The goal is get the number 1, 37 and 736</p>\n\n<p>My problem is that i don't know how define the line to extract the numbers, for example for the number 1:</p>\n\n<pre><code>req = requests.get(url)\nsoup = BeautifulSoup(req.text, \"lxml\")\nfirst_page = int(soup.find('span', {'id': 'viewns_Z7_AVEQAI930OBRD02JPMTPG21004_:form1:textfooterInfoNumPagMAQ'}).getText())\n</code></pre>\n\n<p>Thanks so much</p>\n\n<p>EDIT: Finally i found a solution with Selenium:</p>\n\n<pre><code>numpag = int(driver.find_element_by_xpath('//*[@id=\"viewns_Z7_AVEQAI930OBRD02JPMTPG21004_:form1:textfooterInfoNumPagMAQ\"]').text)\npagtotal = int(driver.find_element_by_xpath('//*[@id=\"viewns_Z7_AVEQAI930OBRD02JPMTPG21004_:form1:textfooterInfoTotalPaginaMAQ\"]').text)\ntotaltotal = int(driver.find_element_by_xpath('//*[@id=\"viewns_Z7_AVEQAI930OBRD02JPMTPG21004_:form1:textfooterTotalTotalMAQ\"]').text)\n</code></pre>\n\n<p>Thanks @abarnert, sorry for the caos in my question, it was my first post =)</p>\n"}, {"tags": ["python", "django", "powershell", "pip", "virtualenv"], "comments": [{"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 0, "creation_date": 1529530147, "post_id": 50957229, "comment_id": 88912001, "body": "It looks as if <code>mathfilters</code> is in <code>INSTALLED_APPS</code> for the <code>wingqvist</code> project. In that case, you&#39;ll have to install it in the virtualenv for that project."}, {"owner": {"reputation": 11, "user_id": 2065647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d25ebab70dfc9c8b1584168e627026f7?s=128&d=identicon&r=PG", "display_name": "Viktor", "link": "https://stackoverflow.com/users/2065647/viktor"}, "reply_to_user": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 0, "creation_date": 1529530933, "post_id": 50957229, "comment_id": 88912311, "body": "Sorry, I forgot to mention that this was the first thing I checked. I just have the standard apps that comes with a new Django project in my settings.py for wingqvist projekt."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 2065647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d25ebab70dfc9c8b1584168e627026f7?s=128&d=identicon&r=PG", "display_name": "Viktor", "link": "https://stackoverflow.com/users/2065647/viktor"}, "edited": false, "score": 0, "creation_date": 1529531132, "post_id": 50957378, "comment_id": 88912386, "body": "I dont see the difference except the missing &quot;&gt;&quot; in the first line?"}], "tags": [], "owner": {"reputation": 1899, "user_id": 7678093, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pmOoYwmTf74/AAAAAAAAAAI/AAAAAAAAAL8/Y_o2wrESTgc/photo.jpg?sz=128", "display_name": "Mohammad Ali", "link": "https://stackoverflow.com/users/7678093/mohammad-ali"}, "is_accepted": false, "score": 0, "last_activity_date": 1529530503, "creation_date": 1529530503, "answer_id": 50957378, "question_id": 50957229, "link": "https://stackoverflow.com/questions/50957229/creating-a-new-virtualenv-project-and-creating-a-virtualenv-for-existing-project/50957378#50957378", "title": "Creating a new virtualenv project and creating a virtualenv for existing project causes error", "body": "<p>Viktor, you are in virtualenv path, please change the parh in your project directory</p>\n\n<pre><code>(wingqvist) PS C:\\Users\\Viktor Wingqvist\\documents\\webdev\\wingqvist python \n</code></pre>\n\n<p>manage.py migrate</p>\n\n<p>Change to</p>\n\n<pre><code>(wingqvist) PS C:\\Users\\Viktor Wingqvist\\documents\\webdev\\wingqvist&gt; python \n</code></pre>\n\n<p>manage.py migrate</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 2065647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d25ebab70dfc9c8b1584168e627026f7?s=128&d=identicon&r=PG", "display_name": "Viktor", "link": "https://stackoverflow.com/users/2065647/viktor"}, "is_accepted": true, "score": 0, "last_activity_date": 1529798541, "last_edit_date": 1529798541, "creation_date": 1529587491, "answer_id": 50969718, "question_id": 50957229, "link": "https://stackoverflow.com/questions/50957229/creating-a-new-virtualenv-project-and-creating-a-virtualenv-for-existing-project/50969718#50969718", "title": "Creating a new virtualenv project and creating a virtualenv for existing project causes error", "body": "<p>I solved this by completely reinstalling everything that had to do with python and I removed both projects. I also removed every environment variable and restarted from scratch. Then I remade both virtualenvs, created a new django project named wingqvist and git pulled the fadderjobb project. It took a bit of time but everything in (wingqvist) and (fadderjobb) works as expected with the wanted setup.</p>\n\n<p>EDIT:</p>\n\n<p>Now I experience the same problem, but only with the powershell instance I open by writing \"powershell\" in the address field in explorer when in the project root directory. When I open powershell as administrator by clicking \"windows key + x\" and clicking windows powershell (administrator) in the list everything works. So the reinstall might have been in vain.</p>\n"}], "owner": {"reputation": 11, "user_id": 2065647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d25ebab70dfc9c8b1584168e627026f7?s=128&d=identicon&r=PG", "display_name": "Viktor", "link": "https://stackoverflow.com/users/2065647/viktor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 0, "accepted_answer_id": 50969718, "answer_count": 2, "score": 0, "last_activity_date": 1529798541, "creation_date": 1529529854, "question_id": 50957229, "link": "https://stackoverflow.com/questions/50957229/creating-a-new-virtualenv-project-and-creating-a-virtualenv-for-existing-project", "title": "Creating a new virtualenv project and creating a virtualenv for existing project causes error", "body": "<p>I've tried to search for a solution or a thread handling this problem but I have a hard time expressing it in the first place since I'm fairly new to django, virtualenv, pip etc.</p>\n\n<p>I'm using windows 10 and I do everything below in powershell.</p>\n\n<p>When I started my first project, named fadderjobb, I didn't use virtualenv. I installed a couple of packages using pip install. Now when I started my second project, wingqvist, I installed virtualenv, made a virtual environment in a folder envs/wingqvist, installed Django and created a new Django project in another new folder webdev/wingqvist. Looking something like this.</p>\n\n<pre><code>webdev\n|-- fadderjobb\n|   `-- projectfiles for fadderjobb\n|-- wingqvist\n|   `-- projectfiles for wingqvist\n`-- envs\n    `-- wingqvist\n        `-- virualenv files for wingqvist\n</code></pre>\n\n<p>When I in my virtualenv (wingqvist) tried to run python manage.py migrate in webdev/wingqvist/ i got the following error:</p>\n\n<pre><code>(wingqvist) PS C:\\Users\\Viktor Wingqvist\\documents\\webdev\\wingqvist&gt; python \n\nmanage.py migrate\nTraceback (most recent call last):\n  File \"manage.py\", line 22, in &lt;module&gt;\n    execute_from_command_line(sys.argv)\n  File \"C:\\Users\\Viktor Wingqvist\\documents\\webdev\\envs\\wingqvist\\lib\\site-packages\\django\\core\\management\\__init__.py\", line 371, in execute_from_command_line\n    utility.execute()\n  File \"C:\\Users\\Viktor Wingqvist\\documents\\webdev\\envs\\wingqvist\\lib\\site-packages\\django\\core\\management\\__init__.py\", line 347, in execute\n    django.setup()\n  File \"C:\\Users\\Viktor Wingqvist\\documents\\webdev\\envs\\wingqvist\\lib\\site-packages\\django\\__init__.py\", line 24, in setup\n    apps.populate(settings.INSTALLED_APPS)\n  File \"C:\\Users\\Viktor Wingqvist\\documents\\webdev\\envs\\wingqvist\\lib\\site-packages\\django\\apps\\registry.py\", line 89, in populate\n    app_config = AppConfig.create(entry)\n  File \"C:\\Users\\Viktor Wingqvist\\documents\\webdev\\envs\\wingqvist\\lib\\site-packages\\django\\apps\\config.py\", line 90, in create\n    module = import_module(entry)\n  File \"C:\\Users\\Viktor Wingqvist\\documents\\webdev\\envs\\wingqvist\\lib\\importlib\\__init__.py\", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 994, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 971, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 953, in _find_and_load_unlocked\nModuleNotFoundError: No module named 'mathfilters'\n</code></pre>\n\n<p>I recognize 'mathfilters' as a packet I use in fadderjobb so I thought that it somehow (!?) ended up automatically as a dependency in my (wingqvist) virtualenv.</p>\n\n<p>I tried to solve it by creating another virtualenv for fadderjobb, save all installed pip packages in a requirements.txt, run pip uninstall -r requirements.txt, activate virualenv (fadderjobb) and pip install everything in requirements.txt.</p>\n\n<p>I now have a folder/file structure looking something like:</p>\n\n<pre><code>webdev\n|-- fadderjobb\n|   `-- projectfiles for fadderjobb\n|-- wingqvist\n|   `-- projectfiles for wingqvist\n`-- envs\n    |-- wingqvist\n    |   `-- virualenv files for wingqvist\n    `-- fadderjobb\n        `-- virualenv files for fadderjobb\n</code></pre>\n\n<p>To be sure I tested my old project in (fadderjobb) and it looks great, pip freeze returns what I want etc.</p>\n\n<p>I deactivated (fadderjobb) and saw that pip freeze didnt show the list of dependencies anymore, just virtualenv. I then removed webdev/envs/wingqvist and created a new one exactly as before (I even restared my computer if that is important). I activated the new (wingqvist) pip installed Django and tried to run python manage.py migrate, and got the same result with ModuleNotFoundError.</p>\n\n<p>I really dont know what to do. I suppose a solution is to pip install all dependencies in (wingqvist) but that sort of goes against the principle of using virtualenvs.</p>\n\n<p>(I updated my python version from 3.6.3 (I think) to 3.6.5 before tampering with virtualenvs, but I dont think that is relevant.)</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["python", "tkinter", "module", "class-instance-variables"], "comments": [{"owner": {"reputation": 12061, "user_id": 6415268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hHWNQ.png?s=128&g=1", "display_name": "j_4321", "link": "https://stackoverflow.com/users/6415268/j-4321"}, "edited": false, "score": 0, "creation_date": 1529529976, "post_id": 50957228, "comment_id": 88911930, "body": "Have you put the <code>from tkinter import Frame</code> at the top of the Clock.py file?"}, {"owner": {"reputation": 165, "user_id": 4921853, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/602d046ecc1bc07ce379e77e1d541766?s=128&d=identicon&r=PG&f=1", "display_name": "superhero", "link": "https://stackoverflow.com/users/4921853/superhero"}, "reply_to_user": {"reputation": 12061, "user_id": 6415268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hHWNQ.png?s=128&g=1", "display_name": "j_4321", "link": "https://stackoverflow.com/users/6415268/j-4321"}, "edited": false, "score": 0, "creation_date": 1529532587, "post_id": 50957228, "comment_id": 88912900, "body": "@j_4321 when I do that I get a <code>self.clock = Clock(self.topFrame) TypeError: &#39;module&#39; object is not callable</code> on the line where I instantiate the clock."}, {"owner": {"reputation": 12061, "user_id": 6415268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hHWNQ.png?s=128&g=1", "display_name": "j_4321", "link": "https://stackoverflow.com/users/6415268/j-4321"}, "edited": false, "score": 0, "creation_date": 1529533038, "post_id": 50957228, "comment_id": 88913048, "body": "It&#39;s because both your module and your class are named <code>Clock</code>. Given your import statement, what you want to do is <code>self.clock = Clock.Clock(self.topFrame)</code> (or you can change your import statement instead <code>from modules.clock.Clock import Clock</code>)"}], "owner": {"reputation": 165, "user_id": 4921853, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/602d046ecc1bc07ce379e77e1d541766?s=128&d=identicon&r=PG&f=1", "display_name": "superhero", "link": "https://stackoverflow.com/users/4921853/superhero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1529529840, "creation_date": 1529529840, "question_id": 50957228, "link": "https://stackoverflow.com/questions/50957228/how-classes-can-inherit-tk-frames-when-being-called-as-a-module-in-python", "title": "how classes can inherit tk.frames when being called as a module in python", "body": "<p>I am a <code>tk</code> newbie and am having trouble importing classes and having them inherit frames. If I stack all the code in one file it works. Something like (I found this on Github sorry for no attribution),</p>\n\n<pre><code>imports...\n\nclass Clock(Frame):\n    def __init__(self, parent, *args, **kwargs):\n        Frame.__init__(self, parent, bg='black')\n        code....\nclass FullscreenWindow:\n    def __init__(self):\n        self.tk = Tk()\n        self.tk.configure(background='black')\n        self.topFrame = Frame(self.tk, background = 'black')\n        self.bottomFrame = Frame(self.tk, background = 'black')\n        self.topFrame.pack(side = TOP, fill=BOTH, expand = YES)\n        self.bottomFrame.pack(side = BOTTOM, fill=BOTH, expand = YES)\n        self.state = False\n        self.tk.bind(\"&lt;Return&gt;\", self.toggle_fullscreen)\n        self.tk.bind(\"&lt;Escape&gt;\", self.end_fullscreen)\n        # clock\n        self.clock = Clock(self.topFrame)\n\nw = FullscreenWindow()\nw.tk.mainloop()\n</code></pre>\n\n<p>However, if I try to break up the code so I can import modules in directories and subdirectories I get errors because I do not understand how to pass the frames. For example, if I put the Clock class in a file <code>modules/clock/Clock.py</code> (yes I am including <code>__init__.py</code> in all directories) and change the code to </p>\n\n<pre><code>from modules.clock import Clock\n\nclass FullscreenWindow:\n        def __init__(self):\n            self.tk = Tk()\n            self.tk.configure(background='black')\n            self.topFrame = Frame(self.tk, background = 'black')\n            self.bottomFrame = Frame(self.tk, background = 'black')\n            self.topFrame.pack(side = TOP, fill=BOTH, expand = YES)\n            self.bottomFrame.pack(side = BOTTOM, fill=BOTH, expand = YES)\n            self.state = False\n            self.tk.bind(\"&lt;Return&gt;\", self.toggle_fullscreen)\n            self.tk.bind(\"&lt;Escape&gt;\", self.end_fullscreen)\n            # clock\n            self.clock = Clock(self.topFrame)\n\nw = FullscreenWindow()\nw.tk.mainloop()\n</code></pre>\n\n<p>I get the error</p>\n\n<pre><code>  File \"modules\\clock\\Clock.py\", line 8, in &lt;module&gt;\n    class Clock(Frame):\n\nNameError: name 'Frame' is not defined\n</code></pre>\n\n<p>How can I set up the code so I can break up code into modules and pass the tk.Frame? </p>\n"}, {"tags": ["python", "opencv", "image-processing"], "comments": [{"owner": {"reputation": 443, "user_id": 409007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d70267d20fb95a4bf022689ab8c04e4?s=128&d=identicon&r=PG&f=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/409007/jon"}, "edited": false, "score": 2, "creation_date": 1529554828, "post_id": 50957151, "comment_id": 88917471, "body": "It looks like you&#39;re trying to apply a single channel mask to a 3 channel RGB image. In this case, the mask also has to be 3 channels, and you would set 255 to each channel. You&#39;ll have to either convert the image to one channel grayscale, or apply a 3 channel mask."}], "answers": [{"tags": [], "owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "is_accepted": true, "score": 1, "last_activity_date": 1529559018, "last_edit_date": 1529559018, "creation_date": 1529556320, "answer_id": 50960541, "question_id": 50957151, "link": "https://stackoverflow.com/questions/50957151/opencv-error-bitwise-and-throws-error-that-mask-and-image-are-not-same-size/50960541#50960541", "title": "OpenCV error: bitwise_and throws error that mask and image are not same size", "body": "<p>It is not only complaining about the size of the mask. It is complaining about the type of the mask. The error:</p>\n\n<blockquote>\n  <p>OpenCV Error: Assertion failed ((mtype == 0 || mtype == 1) &amp;&amp; \n  _mask.sameSize(*psrc1))</p>\n</blockquote>\n\n<p>Means that either the type of the mask or the size (that in your case is equal) is not the same. In the <a href=\"https://docs.opencv.org/2.4/modules/core/doc/operations_on_arrays.html?highlight=compare#bitwise-and\" rel=\"nofollow noreferrer\">documentation</a> we see:</p>\n\n<blockquote>\n  <p><strong>mask</strong> \u2013 optional operation mask, 8-bit single channel array, that\n  specifies elements of the output array to be changed.</p>\n</blockquote>\n\n<p>And this is consistent with the error that asks for a type 0 (CV_8U) or 1 (CV_8S).</p>\n\n<p>Also, even if it is not said, the img should not be float, since it will not give a desired result (probably it will do it anyways).</p>\n\n<p>The solution is probably enough to change:</p>\n\n<pre><code>mask = np.zeros(img.shape[:2])\n</code></pre>\n\n<p>to</p>\n\n<pre><code>mask = np.zeros(img.shape[:2], dtype=np.uint8)\n</code></pre>\n\n<p>A small test shows what type you will get:</p>\n\n<pre><code>np.zeros((10,10)).dtype\n</code></pre>\n\n<p>gives you <code>dtype('float64')</code> which means doubles and not 8 bit </p>\n"}], "owner": {"reputation": 25, "user_id": 8622543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f09f5a770c62badb87771213e7ff3755?s=128&d=identicon&r=PG&f=1", "display_name": "cvik1", "link": "https://stackoverflow.com/users/8622543/cvik1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3106, "favorite_count": 0, "accepted_answer_id": 50960541, "answer_count": 1, "score": 1, "last_activity_date": 1529559018, "creation_date": 1529529406, "question_id": 50957151, "link": "https://stackoverflow.com/questions/50957151/opencv-error-bitwise-and-throws-error-that-mask-and-image-are-not-same-size", "title": "OpenCV error: bitwise_and throws error that mask and image are not same size", "body": "<p>I am trying to apply a mask I have made to an image using openCV (3.3.1) in python (3.6.5) to extract all the skin. I am looping over a photo and checking windows and classifying them using two premade sklearm GMMs. If the window is skin I have changing that area of the mask to True (255) otherwise leaving it as 0. </p>\n\n<p>I have initialized the numpy array to hold the mask before the loop to be the same dimensions as the image, but openCV keeps saying that the image and mask do not have the same dimensions (output and error message are below). I have seen other somewhat similar problems on the site but none with solutions that have worked for me.  </p>\n\n<p>Here is my code: </p>\n\n<pre><code># convert the image to hsv\nhsv = cv2.cvtColor(img, cv2.COLOR_BGR2HSV)\ndelta = 6\n# create an empty np array to make the mask\n#mask = np.zeros((img.shape[0], img.shape[1], 1))\nmask = np.zeros(img.shape[:2])\n# loop through image and classify each window\nfor i in range(0,hsv.shape[0],delta):\n    for j in range(0,hsv.shape[1],delta):\n        # get a copy of the window\n        arr = np.copy(hsv[i:i+delta,j:j+delta,0])\n        # create a normalized hue histogram for the window\n        if arr.sum() &gt; 0:\n            arr = np.histogram(np.ravel(arr/arr.sum()), bins=100, range=(0,1))\n        else:\n            arr = np.histogram(np.ravel(arr), bins=100, range=(0,1))\n        # take the histogram and reshape it\n        arr = arr[0].reshape(1,-1)\n        # get the probabilities that the window is skin or not skin\n        skin = skin_gmm.predict_proba(arr)\n        not_skin = background_gmm.predict_proba(arr)\n        if skin &gt; not_skin:\n            # becasue the window is more likely skin than not skin\n            # we fill that window of the mask with ones\n            mask[i:i+delta,j:j+delta].fill(255)\n# apply the mask to the original image to extract the skin\nprint(mask.shape)\nprint(img.shape)\nmasked_img = cv2.bitwise_and(img, img, mask = mask)\n</code></pre>\n\n<p>The output is: </p>\n\n<pre><code>(2816, 2112)\n(2816, 2112, 3)\nOpenCV Error: Assertion failed ((mtype == 0 || mtype == 1) &amp;&amp; \n_mask.sameSize(*psrc1)) in cv::binary_op, file C:\\ci\\opencv_1512688052760\n\\work\\modules\\core\\src\\arithm.cpp, line 241\nTraceback (most recent call last):\nFile \"skindetector_hist.py\", line 183, in &lt;module&gt;\nmain()\nFile \"skindetector_hist.py\", line 173, in main\nskin = classifier_mask(img, skin_gmm, background_gmm)\nFile \"skindetector_hist.py\", line 63, in classifier_mask\nmasked_img = cv2.bitwise_and(img, img, mask = mask)\ncv2.error: C:\\ci\\opencv_1512688052760\\work\\modules\\core\\src\n\\arithm.cpp:241: error: (-215) (mtype == 0 || mtype == 1) &amp;&amp; \n_mask.sameSize(*psrc1) in function cv::binary_op\n</code></pre>\n\n<p>As you can see in the output, the image and mask have the same width and height. I have also tried making the mask have depth one (line 5) but that didn't help. Thank you for any help!</p>\n"}, {"tags": ["python", "ide"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 8421275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab87c7589a56da77dd4e3a008097401?s=128&d=identicon&r=PG&f=1", "display_name": "kooldeji", "link": "https://stackoverflow.com/users/8421275/kooldeji"}, "edited": false, "score": 0, "creation_date": 1529530199, "post_id": 50957160, "comment_id": 88912018, "body": "Oh, Where can I get this option?"}, {"owner": {"reputation": 956, "user_id": 9530965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e6dc88ddd145802c359df43af6e0b2c?s=128&d=identicon&r=PG&f=1", "display_name": "Anurag Reddy", "link": "https://stackoverflow.com/users/9530965/anurag-reddy"}, "reply_to_user": {"reputation": 59, "user_id": 8421275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab87c7589a56da77dd4e3a008097401?s=128&d=identicon&r=PG&f=1", "display_name": "kooldeji", "link": "https://stackoverflow.com/users/8421275/kooldeji"}, "edited": false, "score": 0, "creation_date": 1529535796, "post_id": 50957160, "comment_id": 88913701, "body": "In shell menu in the shell window only, you get that option. I am still not sure whether this may help you."}, {"owner": {"reputation": 956, "user_id": 9530965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e6dc88ddd145802c359df43af6e0b2c?s=128&d=identicon&r=PG&f=1", "display_name": "Anurag Reddy", "link": "https://stackoverflow.com/users/9530965/anurag-reddy"}, "reply_to_user": {"reputation": 59, "user_id": 8421275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab87c7589a56da77dd4e3a008097401?s=128&d=identicon&r=PG&f=1", "display_name": "kooldeji", "link": "https://stackoverflow.com/users/8421275/kooldeji"}, "edited": false, "score": 0, "creation_date": 1529590798, "post_id": 50957160, "comment_id": 88938067, "body": "I am sorry then, I will try out some other solutions and check if I they help."}], "tags": [], "owner": {"reputation": 956, "user_id": 9530965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e6dc88ddd145802c359df43af6e0b2c?s=128&d=identicon&r=PG&f=1", "display_name": "Anurag Reddy", "link": "https://stackoverflow.com/users/9530965/anurag-reddy"}, "is_accepted": false, "score": 0, "last_activity_date": 1529529464, "creation_date": 1529529464, "answer_id": 50957160, "question_id": 50957098, "link": "https://stackoverflow.com/questions/50957098/how-to-retrieve-data-from-python-idle-manually/50957160#50957160", "title": "How to retrieve data from Python IDLE manually", "body": "<p>Unfortunately there is no method to do that but maybe view last restart shell option may help you. </p>\n"}], "owner": {"reputation": 59, "user_id": 8421275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab87c7589a56da77dd4e3a008097401?s=128&d=identicon&r=PG&f=1", "display_name": "kooldeji", "link": "https://stackoverflow.com/users/8421275/kooldeji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529529464, "creation_date": 1529529131, "question_id": 50957098, "link": "https://stackoverflow.com/questions/50957098/how-to-retrieve-data-from-python-idle-manually", "title": "How to retrieve data from Python IDLE manually", "body": "<p>During one of my IDLE sessions, I cut a text selection and mistakenly closed the IDLE and I lost the cut text. Is there a way to get this text back, perhaps, if I can get the path of its clipboard?</p>\n"}, {"tags": ["python", "flask", "flask-wtforms", "wtforms"], "comments": [{"owner": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "edited": false, "score": 0, "creation_date": 1530445534, "post_id": 50957084, "comment_id": 89231026, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8463209/how-to-make-a-field-conditionally-optional-in-wtforms\">How to make a field conditionally optional in WTForms?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 7750, "user_id": 5747944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90aefeb5e2f0ecf9a68bf851a2b61336?s=128&d=identicon&r=PG", "display_name": "sytech", "link": "https://stackoverflow.com/users/5747944/sytech"}, "is_accepted": true, "score": 1, "last_activity_date": 1529534075, "creation_date": 1529534075, "answer_id": 50957991, "question_id": 50957084, "link": "https://stackoverflow.com/questions/50957084/in-python-flask-wtforms-how-to-create-a-dependency-over-another-field/50957991#50957991", "title": "In Python Flask WTForms, how to create a dependency over another field", "body": "<p>This functionality doesn't exist in WTForms. You'll have to tool this yourself. This quickly gets nontrivial, depending on your specific application logic/needs.</p>\n\n<p>One way would be to have client-side JS send requests to a view that dynamically generates a new form, adding on the subsequent sections of the form based on inputs. For example, your fields could have an <code>onChange</code> or <code>onBlur</code> function that sends the inputs to a view that returns a new form with the next set of fields added on. </p>\n\n<p>Another way to go about this would be with some clever form rendering, CSS and JS. For example, the form would be rendered with all possible fields, but the fields will be hidden and revealed conditionally based on previous selections through via JS/CSS. One concern with this method is that validation becomes complicated.</p>\n\n<p>There are a few <a href=\"https://jacobian.org/writing/dynamic-form-generation/\" rel=\"nofollow noreferrer\">writeups</a> out there on how this is accomplished with Django Forms, but not WTForms. Though, the same concepts should be readily applicable to WTForms.</p>\n\n<p>Related docs: <a href=\"https://wtforms.readthedocs.io/en/stable/specific_problems.html#dynamic-form-composition\" rel=\"nofollow noreferrer\">dynamic form composition</a>.</p>\n"}], "owner": {"reputation": 663, "user_id": 890858, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3bdbc5120874dc6659e95c557b5b4e97?s=128&d=identicon&r=PG&f=1", "display_name": "Javier L&#243;pez", "link": "https://stackoverflow.com/users/890858/javier-l%c3%b3pez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 769, "favorite_count": 0, "accepted_answer_id": 50957991, "answer_count": 1, "score": 0, "last_activity_date": 1529534075, "creation_date": 1529529093, "question_id": 50957084, "link": "https://stackoverflow.com/questions/50957084/in-python-flask-wtforms-how-to-create-a-dependency-over-another-field", "title": "In Python Flask WTForms, how to create a dependency over another field", "body": "<p>I've a <code>source</code> field:</p>\n\n<pre><code>source = SelectField(\"Source\", choices=[\n                   ('option1', 'option1'),\n                   ('option2', 'option2'),\n                   ('option2', 'option2'),\n               validators=[InputRequired()])\n</code></pre>\n\n<p>Then an <code>uri</code> field which requires a different regex based on the above:</p>\n\n<pre><code>uri = StringField('URI', Regexp(regex=r'regex1'))\n</code></pre>\n\n<p>Eg. if <code>option1</code> is selected regex will be <code>regex1</code>, if <code>option2</code> <code>regex2</code>, and so on.</p>\n\n<p>What would be the proper way to implement it with WTForms?</p>\n"}, {"tags": ["python", "github"], "comments": [{"owner": {"reputation": 998, "user_id": 3874512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2096d0d108e55ca0b691fb9161377ae1?s=128&d=identicon&r=PG&f=1", "display_name": "BowlingHawk95", "link": "https://stackoverflow.com/users/3874512/bowlinghawk95"}, "edited": false, "score": 2, "creation_date": 1529529276, "post_id": 50957080, "comment_id": 88911642, "body": "Can you provide additional context? What is this script? What is the environment you wish to run it in?  The answer to your question will probably be one of &quot;your architecture with multiple repos seems flawed&quot; or &quot;make one a pypi package required by the other&quot; depending on the answers to these questions."}, {"owner": {"reputation": 405, "user_id": 4062625, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-Qsrh1RHLGX8/AAAAAAAAAAI/AAAAAAAAAGw/dCVzh6lGlLA/photo.jpg?sz=128", "display_name": "Coco Bennett", "link": "https://stackoverflow.com/users/4062625/coco-bennett"}, "reply_to_user": {"reputation": 998, "user_id": 3874512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2096d0d108e55ca0b691fb9161377ae1?s=128&d=identicon&r=PG&f=1", "display_name": "BowlingHawk95", "link": "https://stackoverflow.com/users/3874512/bowlinghawk95"}, "edited": false, "score": 0, "creation_date": 1529586745, "post_id": 50957080, "comment_id": 88935115, "body": "I&#39;ve added more context. Thanks @BowlingHawk95"}], "answers": [{"comments": [{"owner": {"reputation": 998, "user_id": 3874512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2096d0d108e55ca0b691fb9161377ae1?s=128&d=identicon&r=PG&f=1", "display_name": "BowlingHawk95", "link": "https://stackoverflow.com/users/3874512/bowlinghawk95"}, "edited": false, "score": 0, "creation_date": 1529529814, "post_id": 50957137, "comment_id": 88911867, "body": "The crux of his problem is that the script he wants to run lives in a different code repository than where he wants to invoke it.  So unless you happen to clone the repos next to each other and then invoke a file path (very fragile), this won&#39;t help."}], "tags": [], "owner": {"reputation": 1643, "user_id": 8340867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D3XJl.jpg?s=128&g=1", "display_name": "ThunderHorn", "link": "https://stackoverflow.com/users/8340867/thunderhorn"}, "is_accepted": false, "score": -1, "last_activity_date": 1529529354, "creation_date": 1529529354, "answer_id": 50957137, "question_id": 50957080, "link": "https://stackoverflow.com/questions/50957080/in-github-can-i-run-a-python-script-from-a-different-repo-than-where-its-store/50957137#50957137", "title": "In Github, can I run a python script from a different repo than where it&#39;s stored?", "body": "<p>let's say you have a python script that is reading text files you can excecute the code\nas it follows and it will work</p>\n\n<pre><code>python /dir/to/your/file.py /dir/to/another_file.txt \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 169, "user_id": 9828593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0d1b39539046182f7fddfe028f0a8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Silvia O&#39;Dwyer", "link": "https://stackoverflow.com/users/9828593/silvia-odwyer"}, "is_accepted": false, "score": 0, "last_activity_date": 1529529905, "creation_date": 1529529905, "answer_id": 50957239, "question_id": 50957080, "link": "https://stackoverflow.com/questions/50957080/in-github-can-i-run-a-python-script-from-a-different-repo-than-where-its-store/50957239#50957239", "title": "In Github, can I run a python script from a different repo than where it&#39;s stored?", "body": "<p>You can write a bash script that moves into the desired directory for you and executes the file from there.\nLet's say you want to execute program2.py in another directory from where you actually want to call it, then you could write a simple bash script to do this for you:</p>\n\n<pre><code>#!/bin/sh\ncd path/to/dir/where/program2.py/is/stored\npython program2.py --arg value\n</code></pre>\n\n<p>Save this bash script with a .sh file ending. Then just make it executable with <code>chmod +x</code> and make sure it's in the same directory as the directory where you want to execute it, of course, and you should be good to go!</p>\n"}], "owner": {"reputation": 405, "user_id": 4062625, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-Qsrh1RHLGX8/AAAAAAAAAAI/AAAAAAAAAGw/dCVzh6lGlLA/photo.jpg?sz=128", "display_name": "Coco Bennett", "link": "https://stackoverflow.com/users/4062625/coco-bennett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 774, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1529586725, "creation_date": 1529529081, "last_edit_date": 1529586725, "question_id": 50957080, "link": "https://stackoverflow.com/questions/50957080/in-github-can-i-run-a-python-script-from-a-different-repo-than-where-its-store", "title": "In Github, can I run a python script from a different repo than where it&#39;s stored?", "body": "<p>Let's say I have a a repo that has a python script stored in it, then another repo where I want to run that script, such as below within repo1.</p>\n\n<pre><code>sh \"python repo2/src/python.py --arg value --arg2 value2\"\n</code></pre>\n\n<p>I'm sorry. I know this seems like a simple question, but I either don't know how to phrase my question or else it's just not possible.</p>\n\n<p>Thank you.</p>\n\n<p>More info:\nThe script is part of a repo and this is where it needs to live, especially to stay modular. The other repo is a for a pipeline and it has a groovy Jenkinsfile. This is where I want to pull that script and run in within the Jenkinsfile</p>\n"}, {"tags": ["python", "python-3.x", "discord.py"], "comments": [{"owner": {"reputation": 23589, "user_id": 6622817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93f66cc4703b66b835cf13dfeee21e7b?s=128&d=identicon&r=PG&f=1", "display_name": "abccd", "link": "https://stackoverflow.com/users/6622817/abccd"}, "edited": false, "score": 0, "creation_date": 1529559699, "post_id": 50957031, "comment_id": 88919009, "body": "Are you sure that &quot;Task was destroyed but it is pending!&quot; was the exact error message? I think there should be more traceback that comes with it."}, {"owner": {"reputation": 1147, "user_id": 5071535, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8bc64d99de802e3fc17bedc722f6dd9e?s=128&d=identicon&r=PG&f=1", "display_name": "user5071535", "link": "https://stackoverflow.com/users/5071535/user5071535"}, "reply_to_user": {"reputation": 23589, "user_id": 6622817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93f66cc4703b66b835cf13dfeee21e7b?s=128&d=identicon&r=PG&f=1", "display_name": "abccd", "link": "https://stackoverflow.com/users/6622817/abccd"}, "edited": false, "score": 0, "creation_date": 1529563260, "post_id": 50957031, "comment_id": 88920576, "body": "@abccd Added more output including a traceback"}], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 12199158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1ohxa.jpg?s=128&g=1", "display_name": "Windgate", "link": "https://stackoverflow.com/users/12199158/windgate"}, "edited": false, "score": 0, "creation_date": 1615656832, "post_id": 50981577, "comment_id": 117761591, "body": "It works and keep the bot running, but when I try to test the &quot;die&quot; message it raises an exception:  Traceback (most recent call last):   File &quot;C:\\python\\main.py&quot;, line 126, in &lt;module&gt;     handle_exit()   File &quot;C:\\python\\main.py&quot;, line 31, in handle_exit     for t in asyncio.Task.all_tasks(loop=client.loop): AttributeError: type object &#39;_asyncio.Task&#39; has no attribute &#39;all_tasks&#39;"}, {"owner": {"reputation": 23589, "user_id": 6622817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93f66cc4703b66b835cf13dfeee21e7b?s=128&d=identicon&r=PG&f=1", "display_name": "abccd", "link": "https://stackoverflow.com/users/6622817/abccd"}, "reply_to_user": {"reputation": 327, "user_id": 12199158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1ohxa.jpg?s=128&g=1", "display_name": "Windgate", "link": "https://stackoverflow.com/users/12199158/windgate"}, "edited": false, "score": 0, "creation_date": 1615756219, "post_id": 50981577, "comment_id": 117783854, "body": "@Windgate Hey, it&#39;s because you&#39;re using py 3.9, <code>asyncio.Task.all_tasks</code> has been moved to <code>asyncio.all_tasks</code>"}, {"owner": {"reputation": 327, "user_id": 12199158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1ohxa.jpg?s=128&g=1", "display_name": "Windgate", "link": "https://stackoverflow.com/users/12199158/windgate"}, "edited": false, "score": 0, "creation_date": 1615763823, "post_id": 50981577, "comment_id": 117785743, "body": "YEEEEEEEEEEEEEEEAH today I tried with asyncio.all_tasks and it runs well, but had another errors while running, I will try to test again and comment here, thanks for all dude"}], "tags": [], "owner": {"reputation": 23589, "user_id": 6622817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93f66cc4703b66b835cf13dfeee21e7b?s=128&d=identicon&r=PG&f=1", "display_name": "abccd", "link": "https://stackoverflow.com/users/6622817/abccd"}, "is_accepted": true, "score": 8, "last_activity_date": 1615756332, "last_edit_date": 1615756332, "creation_date": 1529647321, "answer_id": 50981577, "question_id": 50957031, "link": "https://stackoverflow.com/questions/50957031/how-to-make-discord-py-bot-run-forever-if-client-run-returns/50981577#50981577", "title": "How to make discord.py bot run forever if client.run() returns", "body": "<p>You can't use the pre-defined <code>run</code> method since that only handles <code>KeyboardInterrupt</code>. You will need to create a exit strategy that closes all tasks while still leaving the loop running.</p>\n<p>The following example will raise <code>SystemExit</code> (to simulate your unexpected fatal error (The RST - ConnectionError error)) when a message &quot;die&quot; is received by the bot. The <code>SystemExit</code> will get &quot;caught&quot; and restarts your bot. Upon <code>KeyboardInterrupt</code> is raised, the bot will exit successfully without error.</p>\n<pre><code>import asyncio\nimport discord\n\nTOKEN = 'TOKEN_HERE'\nclient = discord.Client()\n\n\nasync def task():\n    await client.wait_until_ready()\n    while True:\n        await asyncio.sleep(1)\n        print('Running')\n\n\ndef handle_exit():\n    print(&quot;Handling&quot;)\n    client.loop.run_until_complete(client.logout())\n    # For python 3.9, use asyncio.all_tasks instead\n    for t in asyncio.Task.all_tasks(loop=client.loop):\n        if t.done():\n            t.exception()\n            continue\n        t.cancel()\n        try:\n            client.loop.run_until_complete(asyncio.wait_for(t, 5, loop=client.loop))\n            t.exception()\n        except (asyncio.InvalidStateError, asyncio.TimeoutError, asyncio.CancelledError):\n            pass\n\n\nwhile True:\n    @client.event\n    async def on_message(m):\n        if m.content == 'die':\n            print(&quot;Terminating&quot;)\n            raise SystemExit\n\n    client.loop.create_task(task())\n    try:\n        client.loop.run_until_complete(client.start(TOKEN))\n    except SystemExit:\n        handle_exit()\n    except KeyboardInterrupt:\n        handle_exit()\n        client.loop.close()\n        print(&quot;Program ended&quot;)\n        break\n    \n    print(&quot;Bot restarting&quot;)\n    client = discord.Client(loop=client.loop)\n</code></pre>\n<hr />\n<p>In Discord (someone types <code>die</code>):</p>\n<pre><code>die\n</code></pre>\n<p>In terminal (STDOUT):</p>\n<pre><code>Running\nRunning\nRunning\nTerminating\nHandling\nBot restarting\nRunning\nRunning\nRunning\nRunning\nRunning\n&lt;CTRL-C&gt; (KeyboardInterrupt)\nHandling\nProgram ended\n</code></pre>\n<hr />\n<p>Side note:</p>\n<p>If you're still confused about your error, it's not your code to blame. Errno 104 is a server side fatal error that's usually unpreventable by the end users.</p>\n"}], "owner": {"reputation": 1147, "user_id": 5071535, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8bc64d99de802e3fc17bedc722f6dd9e?s=128&d=identicon&r=PG&f=1", "display_name": "user5071535", "link": "https://stackoverflow.com/users/5071535/user5071535"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6415, "favorite_count": 1, "accepted_answer_id": 50981577, "answer_count": 1, "score": 4, "last_activity_date": 1615756332, "creation_date": 1529528803, "last_edit_date": 1529563386, "question_id": 50957031, "link": "https://stackoverflow.com/questions/50957031/how-to-make-discord-py-bot-run-forever-if-client-run-returns", "title": "How to make discord.py bot run forever if client.run() returns", "body": "<p><strong>Problem</strong></p>\n\n<p>My discord.py bot's client.run() is returning unexpectedly every few days or so followed by an error \"Task was destroyed but it is pending!\".</p>\n\n<p><strong>Question</strong></p>\n\n<p>Why is client.run() returning at all? And how can I change my bot to properly handle this issue and run forever?</p>\n\n<p><strong>Code (stripped out a lot to keep it simple for discussion):</strong></p>\n\n<pre><code>import asyncio\nimport discord\n\nTOKEN = 'my bot token goes here'\nCHANNEL_ID = 'my channel id goes here'\n\nasync def DiscordMsgSendTask():\n\n  await client.wait_until_ready()\n  my_channel = discord.Object(id=CHANNEL_ID)\n\n  while not client.is_closed:\n\n    # wait a bit to prevent busy loop\n    await asyncio.sleep(2)\n\n    # check for and handle new event here\n\n    # if an event was handled then send a message to the channel\n    embed = discord.Embed(description='Event was handled')\n    await client.send_message(my_channel, embed=embed)\n\nclient = discord.Client()\n\nwhile True:\n  client.loop.create_task(DiscordMsgSendTask())\n\n  try:\n    client.run(TOKEN)\n  except Exception as e:\n    logging.warning('Exception: ' + str(e))\n\n  client = discord.Client()\n</code></pre>\n\n<p><strong>Additional Info</strong></p>\n\n<p>The bot's purpose is basically just to check for a new file in a specific directory, and then send a message to a specific discord channel to report it. This only occurs around 10 times a day, so the bot's traffic is extremely low.</p>\n\n<p>In an attempt to make the bot tolerate errors/disconnects, I put it into the while True loop, which may be wrong approach.</p>\n\n<p>Using Python 3.6.5 and Discord.py 0.16.12</p>\n\n<p><strong>Edit - Added traceback</strong></p>\n\n<p>Adding traceback from a previous failure earlier in the day.</p>\n\n<pre><code>2018-06-20 04:33:08 [ERROR] Task exception was never retrieved\nfuture: &lt;Task finished coro=&lt;WebSocketCommonProtocol.run() done, defined at /usr/local/lib64/python3.6/site-packages/websockets/protocol.py:428&gt; exception=ConnectionResetError(104, 'Connection reset by peer')&gt;\nTraceback (most recent call last):\n  File \"/usr/local/lib64/python3.6/site-packages/websockets/protocol.py\", line 434, in run\n    msg = yield from self.read_message()\n  File \"/usr/local/lib64/python3.6/site-packages/websockets/protocol.py\", line 456, in read_message\n    frame = yield from self.read_data_frame(max_size=self.max_size)\n  File \"/usr/local/lib64/python3.6/site-packages/websockets/protocol.py\", line 511, in read_data_frame\n    frame = yield from self.read_frame(max_size)\n  File \"/usr/local/lib64/python3.6/site-packages/websockets/protocol.py\", line 546, in read_frame\n    self.reader.readexactly, is_masked, max_size=max_size)\n  File \"/usr/local/lib64/python3.6/site-packages/websockets/framing.py\", line 86, in read_frame\n    data = yield from reader(2)\n  File \"/usr/lib64/python3.6/asyncio/streams.py\", line 674, in readexactly\n    yield from self._wait_for_data('readexactly')\n  File \"/usr/lib64/python3.6/asyncio/streams.py\", line 464, in _wait_for_data\n    yield from self._waiter\n  File \"/usr/lib64/python3.6/asyncio/selector_events.py\", line 723, in _read_ready\n    data = self._sock.recv(self.max_size)\nConnectionResetError: [Errno 104] Connection reset by peer\n2018-06-20 04:33:08 [ERROR] Task was destroyed but it is pending!\ntask: &lt;Task pending coro=&lt;DiscordMsgSendTask() running at /home/bot.py:119&gt; wait_for=&lt;Future pending cb=[&lt;TaskWakeupMethWrapper object at 0x7fc99bfd7a68&gt;()]&gt;&gt;\n2018-06-20 04:33:08 [ERROR] Unclosed client session\nclient_session: &lt;aiohttp.client.ClientSession object at 0x7fc999b59240&gt;\n</code></pre>\n"}, {"tags": ["python", "string", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1529530716, "post_id": 50957267, "comment_id": 88912219, "body": "I&#39;d say this is anti-Pandas. For simple comparisons, there&#39;s no need to iterate over a Pandas index. There are methods, <code>pd.DataFrame.apply</code> and <code>pd.Series.apply</code>, which make this redundant."}, {"owner": {"reputation": 784, "user_id": 6064179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5a75261a58000618815040627fab24c?s=128&d=identicon&r=PG&f=1", "display_name": "killian95", "link": "https://stackoverflow.com/users/6064179/killian95"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1529530823, "post_id": 50957267, "comment_id": 88912268, "body": "How would you do it instead? I guess using pandas DataFrame.apply() function? I picked it up about a month ago, so I welcome more Panda-nic suggestions"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1529533492, "post_id": 50957267, "comment_id": 88913169, "body": "Exactly. Or, just in this specific case, list comprehensions are also more Pandorable."}, {"owner": {"reputation": 11, "user_id": 7409331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/293fdd85e048c88527b709fe69be20a5?s=128&d=identicon&r=PG&f=1", "display_name": "Marshall", "link": "https://stackoverflow.com/users/7409331/marshall"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 2, "creation_date": 1529566357, "post_id": 50957267, "comment_id": 88922290, "body": "@jpp offered a really elegant solution   df0[&#39;last_name_in_description&#39;] = [i in j for i, j in zip(df0[&#39;last_name&#39;], df0[&#39;description&#39;])]  Thank you. (your username happens to coincide with the initials of my best friend&#39;s.)"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 11, "user_id": 7409331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/293fdd85e048c88527b709fe69be20a5?s=128&d=identicon&r=PG&f=1", "display_name": "Marshall", "link": "https://stackoverflow.com/users/7409331/marshall"}, "edited": false, "score": 0, "creation_date": 1529568501, "post_id": 50957267, "comment_id": 88923554, "body": "@Marshall, No problem, I deleted my answer since it&#39;s also present in the marked duplicate."}], "tags": [], "owner": {"reputation": 784, "user_id": 6064179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5a75261a58000618815040627fab24c?s=128&d=identicon&r=PG&f=1", "display_name": "killian95", "link": "https://stackoverflow.com/users/6064179/killian95"}, "is_accepted": false, "score": 0, "last_activity_date": 1529530011, "creation_date": 1529530011, "answer_id": 50957267, "question_id": 50957015, "link": "https://stackoverflow.com/questions/50957015/how-to-perform-row-by-row-operation-in-pandas/50957267#50957267", "title": "how to perform row by row operation in pandas", "body": "<p>What might be nicer is to loop over the rows using the index. Then do your comparison using the <code>in</code> keyword:</p>\n\n<pre><code>import pandas as pd \n\na = pd.DataFrame([['Smith','Some description'],['Jones','Some Jones description']], columns=['last_name','description'])\n\nfor rname in a.index:\n    row = a.loc[rname]\n\n    it_contains = row['last_name'] in row['description']\n    print \"Description contains last name:\", it_contains\n\n# Outputs:\n# Description contains last name: False\n# Description contains last name: True\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 7409331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/293fdd85e048c88527b709fe69be20a5?s=128&d=identicon&r=PG&f=1", "display_name": "Marshall", "link": "https://stackoverflow.com/users/7409331/marshall"}, "edited": false, "score": 0, "creation_date": 1529566453, "post_id": 50957321, "comment_id": 88922351, "body": "Thank you for your speedy reply!"}], "tags": [], "owner": {"reputation": 2849, "user_id": 8471144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8TlP.jpg?s=128&g=1", "display_name": "koPytok", "link": "https://stackoverflow.com/users/8471144/kopytok"}, "is_accepted": false, "score": 4, "last_activity_date": 1529531124, "last_edit_date": 1529531124, "creation_date": 1529530249, "answer_id": 50957321, "question_id": 50957015, "link": "https://stackoverflow.com/questions/50957015/how-to-perform-row-by-row-operation-in-pandas/50957321#50957321", "title": "how to perform row by row operation in pandas", "body": "<p>The same result can be achieved with <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.apply.html\" rel=\"nofollow noreferrer\"><code>df.apply</code></a>:</p>\n\n<pre><code>df0['last_name_position'] = \\ \n    df0.apply(lambda x: x.description.find(x.last_name), axis=1)\n</code></pre>\n\n<p>In case you don't need to find an index of substring:</p>\n\n<pre><code>df0['last_name_position'] = \\ \n    df0.apply(lambda x: x.last_name in x.description, axis=1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 7409331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/293fdd85e048c88527b709fe69be20a5?s=128&d=identicon&r=PG&f=1", "display_name": "Marshall", "link": "https://stackoverflow.com/users/7409331/marshall"}, "edited": false, "score": 0, "creation_date": 1529566476, "post_id": 50957352, "comment_id": 88922366, "body": "Thank you for your speedy reply!"}], "tags": [], "owner": {"reputation": 126, "user_id": 7565352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJFN.jpg?s=128&g=1", "display_name": "Bram van Hout", "link": "https://stackoverflow.com/users/7565352/bram-van-hout"}, "is_accepted": false, "score": 0, "last_activity_date": 1529530394, "creation_date": 1529530394, "answer_id": 50957352, "question_id": 50957015, "link": "https://stackoverflow.com/questions/50957015/how-to-perform-row-by-row-operation-in-pandas/50957352#50957352", "title": "how to perform row by row operation in pandas", "body": "<p>Keeping a dataframe:</p>\n\n<pre><code>import pandas as pd \n\na = pd.DataFrame([['Smith','Some description'],['Jones','Some Jones description']], columns=['last_name','description'])\na['Match']=a.apply(lambda x: x['last_name'] in x['description'], axis=1)\na.head()\n\nlast_name   description             Match\n0   Smith   Some description        False\n1   Jones   Some Jones description  True\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7409331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/293fdd85e048c88527b709fe69be20a5?s=128&d=identicon&r=PG&f=1", "display_name": "Marshall", "link": "https://stackoverflow.com/users/7409331/marshall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2746, "favorite_count": 0, "closed_date": 1529533542, "answer_count": 3, "score": 1, "last_activity_date": 1529531124, "creation_date": 1529528750, "last_edit_date": 1529530786, "question_id": 50957015, "link": "https://stackoverflow.com/questions/50957015/how-to-perform-row-by-row-operation-in-pandas", "closed_reason": "Duplicate", "title": "how to perform row by row operation in pandas", "body": "<p>I have a dataframe with two columns,  <code>last_name</code> and <code>description</code></p>\n\n<p>What is an elegant way to see if <code>description</code> contains the <code>last_name</code> on each row?</p>\n\n<p>I have a ugly </p>\n\n<hr>\n\n<pre><code>for i in range(0,len(df0)):\n    df0['last_name_position'].loc[i] = \\ \n        df0['description'].loc[i].find(df0['last_name'].loc[i])\n</code></pre>\n\n<hr>\n\n<p>running.</p>\n\n<p>This is basically the same task as \n<a href=\"https://exceljet.net/formula/cell-contains-specific-text\" rel=\"nofollow noreferrer\">https://exceljet.net/formula/cell-contains-specific-text</a></p>\n"}, {"tags": ["python", "arrays", "python-3.x", "numpy", "replace"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1529528938, "post_id": 50957010, "comment_id": 88911509, "body": "When you say &quot;column&quot; do you really mean &quot;row&quot;?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1529528998, "post_id": 50957010, "comment_id": 88911534, "body": "I&#39;m not sure I understand the question. Are you asking about the numpy arrays, or how to use Python to edit the script itself?"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1529529082, "post_id": 50957010, "comment_id": 88911565, "body": "So you want the second column to be replaced with <code>k5</code> in your file?"}, {"owner": {"reputation": 1167, "user_id": 7613404, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/af19ec64033a8acc6891f60f02cd7543?s=128&d=identicon&r=PG&f=1", "display_name": "kinder chen", "link": "https://stackoverflow.com/users/7613404/kinder-chen"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1529535433, "post_id": 50957010, "comment_id": 88913625, "body": "@Barmar I transposed the the array, then it becomes column."}, {"owner": {"reputation": 1167, "user_id": 7613404, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/af19ec64033a8acc6891f60f02cd7543?s=128&d=identicon&r=PG&f=1", "display_name": "kinder chen", "link": "https://stackoverflow.com/users/7613404/kinder-chen"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1529535493, "post_id": 50957010, "comment_id": 88913634, "body": "@user3483203 Correct."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1529535590, "post_id": 50957010, "comment_id": 88913670, "body": "@kinderchan It&#39;s still unclear what you&#39;re asking about. The question says you want to modify the file, not the array."}, {"owner": {"reputation": 1167, "user_id": 7613404, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/af19ec64033a8acc6891f60f02cd7543?s=128&d=identicon&r=PG&f=1", "display_name": "kinder chen", "link": "https://stackoverflow.com/users/7613404/kinder-chen"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1529535938, "post_id": 50957010, "comment_id": 88913733, "body": "@Barmar Yes, I wanna modify the file with replacing a specific column."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1529536166, "post_id": 50957010, "comment_id": 88913790, "body": "Text files don&#39;t have columns. They have lines, and lines are made up of characters."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1529536283, "post_id": 50957010, "comment_id": 88913823, "body": "If you consider each character to be a column, you&#39;re replacing two columns: the <code>2</code> in <code>k2</code> and the <code>2</code> in <code>(0,2,10)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1167, "user_id": 7613404, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/af19ec64033a8acc6891f60f02cd7543?s=128&d=identicon&r=PG&f=1", "display_name": "kinder chen", "link": "https://stackoverflow.com/users/7613404/kinder-chen"}, "edited": false, "score": 0, "creation_date": 1529535837, "post_id": 50957153, "comment_id": 88913709, "body": "This is a simple example, my original files are much more complicated.  At first I considered the way to reopen , reedit and then rewrite the file as well, but I just wonder if there is a easy way to just replace a specific column."}, {"owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "reply_to_user": {"reputation": 1167, "user_id": 7613404, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/af19ec64033a8acc6891f60f02cd7543?s=128&d=identicon&r=PG&f=1", "display_name": "kinder chen", "link": "https://stackoverflow.com/users/7613404/kinder-chen"}, "edited": false, "score": 0, "creation_date": 1529593713, "post_id": 50957153, "comment_id": 88940190, "body": "@kinderchan as I said in the answer, <b>no</b>, you can&#39;t easily replace/delete part of a sequential file, because it is sequential."}], "tags": [], "owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "is_accepted": false, "score": 0, "last_activity_date": 1529529420, "creation_date": 1529529420, "answer_id": 50957153, "question_id": 50957010, "link": "https://stackoverflow.com/questions/50957010/how-to-replace-a-column-in-a-txt-file/50957153#50957153", "title": "How to replace a column in a txt file?", "body": "<p>It's not easy to do without rewriting the entire file. Text files are simple, sequential method of data storage, without fixed structure, indexing, or random access search. So you'd have to implement all those features. </p>\n\n<p>The common approach is to read the file, edit it, and overwrite the file with the data the way you want. </p>\n\n<p>Another approach when the file is too big to fit entirely in memory is to create a new temporary file, and read the old file line by line in a loop, while you write to the new file. Then delete the old file and rename the new file to have the same name as the original.</p>\n\n<p>If you need more than that, I suggest using a database. sqlite is included in python and can do what you request directly inside a file, really fast.</p>\n"}, {"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": -2, "last_activity_date": 1529536711, "creation_date": 1529536711, "answer_id": 50958336, "question_id": 50957010, "link": "https://stackoverflow.com/questions/50957010/how-to-replace-a-column-in-a-txt-file/50958336#50958336", "title": "How to replace a column in a txt file?", "body": "<p>You don't need a loop. You can read the whole file into a list with <code>readlines()</code>, modify a specific element of the list, then write it back out to the file with <code>writelines()</code>.</p>\n\n<pre><code>with open(\"filename.txt\", \"r+\") as f:\n    lines = f.readlines()\n    lines[2] = \"k5=np.linspace(0,5,10)\\n\"\n    f.seek(0)\n    f.writelines(lines)\n    f.truncate()\n</code></pre>\n\n<p><code>f.seek()</code> goes back to the beginning of the file, so that <code>f.writelines()</code> overwrites it. Then we use <code>f.truncate()</code> to remove any excess content if the replacement is shorter than the original file contents.</p>\n\n<p>Don't forget the <code>\\n</code> in the new contents of <code>lines[2]</code>. <code>writelines()</code> doesn't put newlines between the strings in its argument.</p>\n"}, {"tags": [], "owner": {"reputation": 888, "user_id": 908929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/900zn.png?s=128&g=1", "display_name": "Maxwell77", "link": "https://stackoverflow.com/users/908929/maxwell77"}, "is_accepted": false, "score": 0, "last_activity_date": 1529753239, "last_edit_date": 1529753239, "creation_date": 1529748973, "answer_id": 51000173, "question_id": 50957010, "link": "https://stackoverflow.com/questions/50957010/how-to-replace-a-column-in-a-txt-file/51000173#51000173", "title": "How to replace a column in a txt file?", "body": "<pre><code>def change(tuple):\n    line, newk = tuple\n    oldk = line.split()\n    return \"%s %.18e %s %s\\n\" % (oldk[0], newk, oldk[2], oldk[3])\n\nfilename = \"k.txt\" \nlines = fileinput.input(filename)\ntuples = zip(lines, k5)\nnewlines = list(map(change, tuples))\n\nfo = open(filename, \"r+\")\nfo.writelines(newlines)\n</code></pre>\n\n<p>Here the script creates a list of tuples(line, k) containing for each line the new value for k.</p>\n\n<p><code>%.18e</code> is the default format for the <em><code>NumPy.savetext()</code></em> method, so you need to adapt the format to same one used for creating your source file.</p>\n"}], "owner": {"reputation": 1167, "user_id": 7613404, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/af19ec64033a8acc6891f60f02cd7543?s=128&d=identicon&r=PG&f=1", "display_name": "kinder chen", "link": "https://stackoverflow.com/users/7613404/kinder-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 784, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1529753239, "creation_date": 1529528725, "question_id": 50957010, "link": "https://stackoverflow.com/questions/50957010/how-to-replace-a-column-in-a-txt-file", "title": "How to replace a column in a txt file?", "body": "<p>I have a txt file,</p>\n\n<pre><code>k1=np.linspace(0,1,10)\nk2=np.linspace(0,2,10)\nk3=np.linspace(0,3,10)\nk4=np.linspace(0,4,10)\n\nnp.savetxt('k.txt',np.transpose([k1,k2,k3,k4]))\n</code></pre>\n\n<p>Now I wanna replace the second column (<code>k2</code>) to a new array</p>\n\n<pre><code>k5=np.linspace(0,5,10)\n</code></pre>\n\n<p>How to efficiently replace the column without reusing <code>np.savetxt</code> or a loop?</p>\n"}, {"tags": ["python", "bash", "design-patterns", "marker", "lines"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1529528788, "post_id": 50956968, "comment_id": 88911452, "body": "Do you want the <code>empty</code> line?"}, {"owner": {"reputation": 15, "user_id": 9969735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec50902d532e1075d65a76dfa7e70e3?s=128&d=identicon&r=PG&f=1", "display_name": "marsed", "link": "https://stackoverflow.com/users/9969735/marsed"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1529561554, "post_id": 50956968, "comment_id": 88919765, "body": "@user3483203 without! Thanks for reading!"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9969735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec50902d532e1075d65a76dfa7e70e3?s=128&d=identicon&r=PG&f=1", "display_name": "marsed", "link": "https://stackoverflow.com/users/9969735/marsed"}, "edited": false, "score": 0, "creation_date": 1529570712, "post_id": 50957535, "comment_id": 88924842, "body": "Thank you! I&#39;ll try to adapt it from what you wrote."}, {"owner": {"reputation": 784, "user_id": 6064179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5a75261a58000618815040627fab24c?s=128&d=identicon&r=PG&f=1", "display_name": "killian95", "link": "https://stackoverflow.com/users/6064179/killian95"}, "reply_to_user": {"reputation": 15, "user_id": 9969735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec50902d532e1075d65a76dfa7e70e3?s=128&d=identicon&r=PG&f=1", "display_name": "marsed", "link": "https://stackoverflow.com/users/9969735/marsed"}, "edited": false, "score": 0, "creation_date": 1529589119, "post_id": 50957535, "comment_id": 88936770, "body": "You didn&#39;t mention that it was 50G before -- you&#39;ll want a streaming option instead that reads and writes at the same time."}, {"owner": {"reputation": 784, "user_id": 6064179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5a75261a58000618815040627fab24c?s=128&d=identicon&r=PG&f=1", "display_name": "killian95", "link": "https://stackoverflow.com/users/6064179/killian95"}, "reply_to_user": {"reputation": 15, "user_id": 9969735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec50902d532e1075d65a76dfa7e70e3?s=128&d=identicon&r=PG&f=1", "display_name": "marsed", "link": "https://stackoverflow.com/users/9969735/marsed"}, "edited": false, "score": 0, "creation_date": 1529590247, "post_id": 50957535, "comment_id": 88937628, "body": "Updated my answer to include a streaming version."}, {"owner": {"reputation": 15, "user_id": 9969735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec50902d532e1075d65a76dfa7e70e3?s=128&d=identicon&r=PG&f=1", "display_name": "marsed", "link": "https://stackoverflow.com/users/9969735/marsed"}, "edited": false, "score": 0, "creation_date": 1529597287, "post_id": 50957535, "comment_id": 88942449, "body": "No I didn&#39;t; thought it might not be relevant but it is! Thank you!"}], "tags": [], "owner": {"reputation": 784, "user_id": 6064179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5a75261a58000618815040627fab24c?s=128&d=identicon&r=PG&f=1", "display_name": "killian95", "link": "https://stackoverflow.com/users/6064179/killian95"}, "is_accepted": true, "score": 0, "last_activity_date": 1529590189, "last_edit_date": 1529590189, "creation_date": 1529531198, "answer_id": 50957535, "question_id": 50956968, "link": "https://stackoverflow.com/questions/50956968/python-or-bash-script-if-pattern-in-lines-between-two-identical-markers-remove/50957535#50957535", "title": "Python or bash script: if pattern in lines between two identical markers, remove lines and first marker", "body": "<p>Here's a way to do it in python. Treat <code>marker</code> as a separator, then remove anything from the text snippets between that don't contain <code>pattern</code></p>\n\n<pre><code>f = open('markerfile.txt','r')\n\nlines = f.read().split('marker\\n')\nlines = [entry for entry in lines if 'pattern' in entry or not entry]\nprint 'marker\\n'.join(lines)\n</code></pre>\n\n<p>Edit: the <code>or not entry</code> bit in the list comprehension just handles the case where <code>marker</code> is the first line in the file.</p>\n\n<p>Edit 2: Here's a streaming version (better suited for large files.) It uses <code>islice</code> from <code>itertools</code> to get <code>n</code> lines of the file at a time. The rest of the algorithm is more or less the same.</p>\n\n<pre><code>from itertools import islice\n\nf = open('markerfile.txt','r')\nfout = open('markersout.txt','w')\n\nn=5\nwhile True:\n    next_n_lines = ''.join(list(islice(f, n)))\n    if not next_n_lines:\n        break\n    lines = next_n_lines.split('marker\\n')\n    lines = [entry for entry in lines if 'pattern' in entry or not entry]\n    print &gt;&gt; fout, 'marker\\n'.join(lines).strip()\n\nf.close()\nfout.close()\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9969735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec50902d532e1075d65a76dfa7e70e3?s=128&d=identicon&r=PG&f=1", "display_name": "marsed", "link": "https://stackoverflow.com/users/9969735/marsed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 50957535, "answer_count": 1, "score": 1, "last_activity_date": 1529590189, "creation_date": 1529528526, "last_edit_date": 1529569485, "question_id": 50956968, "link": "https://stackoverflow.com/questions/50956968/python-or-bash-script-if-pattern-in-lines-between-two-identical-markers-remove", "title": "Python or bash script: if pattern in lines between two identical markers, remove lines and first marker", "body": "<p>As a beginner, I'm trying to solve the following problem (bash or python script):</p>\n\n<p>the file (~50G!):</p>\n\n<pre><code>marker\nxxx\nxxx\nxxx\npattern\nmarker\nxxx\nxxx\nxxx\nmarker\nxxx\nxxx\nxxx\npattern\n</code></pre>\n\n<p>I would like to find a way to remove the lines between two <code>markers</code> + the first <code>marker</code>, but not the last occurrence of the <code>marker</code> IF no <code>pattern</code> can be found throughout the lines.</p>\n\n<p>Wanted result:</p>\n\n<pre><code>marker\nxxx\nxxx\nxxx\npattern\n[empty!]\nmarker\nxxx\nxxx\nxxx\npattern\n</code></pre>\n\n<p>I tried to solve it with regex or awk (that's a very shy beginning)</p>\n\n<pre><code>awk '/marker/{f=1} f; /marker/{f=1}' file\n</code></pre>\n\n<p>but I'm having a hardtime understanding how to implement that in a function that would solve the entire problem. It would make me very happy if someone could help me with that!</p>\n\n<p>Cheers</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1529528653, "post_id": 50956966, "comment_id": 88911410, "body": "That has nothing to do with map, it&#39;s how the language was designed. The iterator is unpacked to the variables b and c."}], "answers": [{"comments": [{"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1529529145, "post_id": 50957008, "comment_id": 88911591, "body": "Can you explain <code>primitive combinators</code>? I&#39;m not familiar with this term."}, {"owner": {"reputation": 998, "user_id": 3874512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2096d0d108e55ca0b691fb9161377ae1?s=128&d=identicon&r=PG&f=1", "display_name": "BowlingHawk95", "link": "https://stackoverflow.com/users/3874512/bowlinghawk95"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 1, "creation_date": 1529529484, "post_id": 50957008, "comment_id": 88911713, "body": "@jpp see functions like <code>map</code>, <code>zip</code>, etc.  Many more of these are defined in the itertools library, and they are very common in functional languages.  The general way to think of these is that you have some generic action you want to take on one or more lists, and the combinators provide a generic way to do it.  I.e. mapping an arbitrary function lazily over an iterator (<code>map</code>)."}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1529529498, "post_id": 50957008, "comment_id": 88911716, "body": "@jpp I&#39;ve meant simple (standard) functions that operate on sequences and accept a function as argument; probably &#39;sequence processors&#39; would be a better term. Of  Python&#39;s built-in functions we can name at least <code>map</code> and <code>filter</code>. <code>zip</code> and <code>reversed</code>, e.g., work the same way: they used to return lists before, but now return iterators."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1529529748, "post_id": 50957008, "comment_id": 88911837, "body": "@bipll, Thank you. I get what it covers. I just don&#39;t understand the term <code>primitive combinators</code>. How is <code>map</code> &quot;primitive&quot; or a &quot;combinator&quot;? I <i>think</i> combinator is a term used in functional programming for a type of higher order function. Primitive I can&#39;t really pinpoint."}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1529529790, "post_id": 50957008, "comment_id": 88911857, "body": "@jpp Yes but I had <code>map</code> and <code>filter</code> in mind. They are very basic to be called &#39;primitive&#39;."}, {"owner": {"reputation": 39, "user_id": 8605335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qNQLj.jpg?s=128&g=1", "display_name": "OG_", "link": "https://stackoverflow.com/users/8605335/og"}, "edited": false, "score": 0, "creation_date": 1529530337, "post_id": 50957008, "comment_id": 88912082, "body": "@bipll what exactly is an iterator object??? I mean it&#39;s not a list or tuple.... what is its form?? I mean lists are like this [1,2,3] while tuples are like (1,2,3) and also these have some functions and operations to work with them.... what is the case with an iterator object"}, {"owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "edited": false, "score": 2, "creation_date": 1529530707, "post_id": 50957008, "comment_id": 88912214, "body": "I don&#39;t think <code>reversed</code> used to return a list did it?"}, {"owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "reply_to_user": {"reputation": 39, "user_id": 8605335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qNQLj.jpg?s=128&g=1", "display_name": "OG_", "link": "https://stackoverflow.com/users/8605335/og"}, "edited": false, "score": 0, "creation_date": 1529530768, "post_id": 50957008, "comment_id": 88912243, "body": "@OG_ read this <a href=\"https://stackoverflow.com/questions/231767/what-does-the-yield-keyword-do\" title=\"what does the yield keyword do\">stackoverflow.com/questions/231767/&hellip;</a>"}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "reply_to_user": {"reputation": 39, "user_id": 8605335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qNQLj.jpg?s=128&g=1", "display_name": "OG_", "link": "https://stackoverflow.com/users/8605335/og"}, "edited": false, "score": 0, "creation_date": 1529530815, "post_id": 50957008, "comment_id": 88912262, "body": "@OG_ Here&#39;s the brief explanation: <a href=\"https://docs.python.org/3.6/glossary.html#term-iterator\" rel=\"nofollow noreferrer\">docs.python.org/3.6/glossary.html#term-iterator</a> It is a value that is returned by <code>iter()</code> (and had been in Python2 as well). It allows to traverse the whole iterable by retrieving element-by-element, and throwing an exception in the end. Behind the scenes, this is how Python&#39;s built-in constructs work, like <code>for ... in </code>, list comprehension, etc."}], "tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": false, "score": 1, "last_activity_date": 1529528963, "last_edit_date": 1529528963, "creation_date": 1529528718, "answer_id": 50957008, "question_id": 50956966, "link": "https://stackoverflow.com/questions/50956966/behaviour-of-map-function-in-python/50957008#50957008", "title": "Behaviour of map function in Python", "body": "<p>In Python 3, <code>map</code> (and other primitive combinators) return an iterator object rather than a list (as they did before.) At the first attempt, you printed that iterator object per se, while the second time you matched it against a sequence, thus forcing and extracting elements. Consider:</p>\n\n<pre><code>&gt;&gt;&gt; a = map(int,[1,2])\n&gt;&gt;&gt; a\n&lt;map object at 0x7ff6ddbfe748&gt;\n&gt;&gt;&gt; list(a)\n[1, 2]\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 8605335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qNQLj.jpg?s=128&g=1", "display_name": "OG_", "link": "https://stackoverflow.com/users/8605335/og"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529529070, "creation_date": 1529528518, "last_edit_date": 1529529070, "question_id": 50956966, "link": "https://stackoverflow.com/questions/50956966/behaviour-of-map-function-in-python", "title": "Behaviour of map function in Python", "body": "<p>I can not understand <em>how and why</em> the <strong>first time</strong> it is printed a reference of the object(which object is referring to?) and the <strong>second time</strong> when I use two variables, these variables get the result of the function instead of a reference.</p>\n\n<pre><code>&gt;&gt;&gt; a = map(int,[1,2])\n&gt;&gt;&gt; a\n&lt;map object at 0x7f0b1142fa90&gt;\n\n&gt;&gt;&gt; b,c = a\n&gt;&gt;&gt; b\n1\n&gt;&gt;&gt; c\n2\n</code></pre>\n"}, {"tags": ["python", "forms", "web", "flask"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 8322412, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh5.googleusercontent.com/-XHS3uMIylKk/AAAAAAAAAAI/AAAAAAAAAaY/HsxNTW4eH34/photo.jpg?sz=128", "display_name": "Evan Yang", "link": "https://stackoverflow.com/users/8322412/evan-yang"}, "edited": false, "score": 0, "creation_date": 1529529079, "post_id": 50957016, "comment_id": 88911562, "body": "I tried this, however I got error 500 (internal server error) on my website when submitted the form that gets inputed_email. Why is this?"}, {"owner": {"reputation": 307, "user_id": 5771435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65bd0e9d0cbdda18483721cd04940278?s=128&d=identicon&r=PG&f=1", "display_name": "4d11", "link": "https://stackoverflow.com/users/5771435/4d11"}, "reply_to_user": {"reputation": 115, "user_id": 8322412, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh5.googleusercontent.com/-XHS3uMIylKk/AAAAAAAAAAI/AAAAAAAAAaY/HsxNTW4eH34/photo.jpg?sz=128", "display_name": "Evan Yang", "link": "https://stackoverflow.com/users/8322412/evan-yang"}, "edited": false, "score": 0, "creation_date": 1529529146, "post_id": 50957016, "comment_id": 88911593, "body": "You need to provide more information, could you post your error trace? Also, try logging <code>inputed_email</code> to see if you are actually getting a valid value."}, {"owner": {"reputation": 115, "user_id": 8322412, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh5.googleusercontent.com/-XHS3uMIylKk/AAAAAAAAAAI/AAAAAAAAAaY/HsxNTW4eH34/photo.jpg?sz=128", "display_name": "Evan Yang", "link": "https://stackoverflow.com/users/8322412/evan-yang"}, "edited": false, "score": 0, "creation_date": 1529529658, "post_id": 50957016, "comment_id": 88911786, "body": "Sounds good, I&#39;ll work on getting the error trace and logging it. I&#39;ll post them in a bit."}], "tags": [], "owner": {"reputation": 307, "user_id": 5771435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65bd0e9d0cbdda18483721cd04940278?s=128&d=identicon&r=PG&f=1", "display_name": "4d11", "link": "https://stackoverflow.com/users/5771435/4d11"}, "is_accepted": false, "score": 1, "last_activity_date": 1529529389, "last_edit_date": 1529529389, "creation_date": 1529528756, "answer_id": 50957016, "question_id": 50956922, "link": "https://stackoverflow.com/questions/50956922/writing-to-a-txt-file-in-flask/50957016#50957016", "title": "Writing to a .txt file in Flask", "body": "<p>Writing to a file has nothing to do with Flask. You can learn how to read/write to files <a href=\"https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files\" rel=\"nofollow noreferrer\">here</a>. \nKeep in mind writing a large amount of data is slow, and will slow down the request.</p>\n\n<pre><code>if request.method == 'POST' and inputed_email:\n    # open is a built-in function, w is for write-mode (default is read)\n    with open('workfile', 'w') as f: \n         f.write(inputed_email)\n    return render_template(....)\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 8322412, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh5.googleusercontent.com/-XHS3uMIylKk/AAAAAAAAAAI/AAAAAAAAAaY/HsxNTW4eH34/photo.jpg?sz=128", "display_name": "Evan Yang", "link": "https://stackoverflow.com/users/8322412/evan-yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1325, "favorite_count": 1, "closed_date": 1529603644, "answer_count": 1, "score": 0, "last_activity_date": 1529603680, "creation_date": 1529528314, "question_id": 50956922, "link": "https://stackoverflow.com/questions/50956922/writing-to-a-txt-file-in-flask", "closed_reason": "Duplicate", "title": "Writing to a .txt file in Flask", "body": "<p>I have a variable \"inputed_email\" that I want to write to a .txt file. However, how would you accomplish this in Flask? Any help is appreciated. Thank you!    </p>\n\n<pre><code>@app.route('/', methods=['GET', 'POST'])\ndef my_form():\n    inputed_email = request.form.get(\"email\")\n    if request.method == 'POST' and inputed_email:\n\n        # code that writes \"inputed_email\" to a .txt file\n\n        return render_template('my-form.html', email=inputed_email)\n    return render_template('my-form.html')\n</code></pre>\n"}, {"tags": ["python", "pygame"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1529528601, "post_id": 50956897, "comment_id": 88911402, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation, as suggested when you created this account.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described."}, {"owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "edited": false, "score": 0, "creation_date": 1529538296, "post_id": 50956897, "comment_id": 88914269, "body": "Create a list of rects which serve as the positions of the batteries. Use <code>for</code> loops to update the rects and blit the battery image at the rects. Remove rects that have left the screen and append new rects to create new batteries."}, {"owner": {"reputation": 11, "user_id": 9950934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9005de162774409bd480f8d567f912b7?s=128&d=identicon&r=PG&f=1", "display_name": "user9950934", "link": "https://stackoverflow.com/users/9950934/user9950934"}, "reply_to_user": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "edited": false, "score": 0, "creation_date": 1529548022, "post_id": 50956897, "comment_id": 88916156, "body": "could you post an example please @skrx"}], "answers": [{"tags": [], "owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "is_accepted": false, "score": 0, "last_activity_date": 1529550244, "creation_date": 1529550244, "answer_id": 50959769, "question_id": 50956897, "link": "https://stackoverflow.com/questions/50956897/having-an-image-appear-multiple-times-pygame/50959769#50959769", "title": "Having an image appear multiple times Pygame", "body": "<p>Create a list of rects which serve as the positions of the batteries. Use for loops to update the rects and blit the battery image at the rects. Remove rects that have left the screen and append new rects to create new batteries</p>\n\n<pre><code>import pygame as pg\n\n\npg.init()\nscreen = pg.display.set_mode((640, 480))\nclock = pg.time.Clock()\nBG_COLOR = pg.Color('gray12')\n\nbattery_image = pg.Surface((30, 50))\nbattery_image.fill(pg.Color('sienna1'))\n\n# Append pygame.Rect objects to this list.\nbatteries = []\nbatteries.append(battery_image.get_rect(topleft=(700, 100)))\nbattery_speed = -5\nbattery_timer = 40\n\ndone = False\nwhile not done:\n    for event in pg.event.get():\n        if event.type == pg.QUIT:\n            done = True\n\n    # A simple frame based timer.\n    battery_timer -= 1\n    if battery_timer &lt;= 0:\n        battery_timer = 40\n        # After 40 frames a new rect gets appended to the list.\n        batteries.append(battery_image.get_rect(topleft=(700, 100)))\n\n    temp_list = []\n    # Iterate over the rects to update them.\n    for battery_rect in batteries:\n        battery_rect.x += battery_speed\n        # Rects with x &lt;= 50 won't be appended to the temp_list.\n        if battery_rect.x &gt; 50:\n            temp_list.append(battery_rect)\n\n    # Assign the list with the remaining rects to the batteries variable.\n    batteries = temp_list\n\n    # Blit everything.\n    screen.fill(BG_COLOR)\n    for battery_rect in batteries:\n        screen.blit(battery_image, battery_rect)\n    pg.display.flip()\n    clock.tick(30)\n\npg.quit()\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9950934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9005de162774409bd480f8d567f912b7?s=128&d=identicon&r=PG&f=1", "display_name": "user9950934", "link": "https://stackoverflow.com/users/9950934/user9950934"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1529550244, "creation_date": 1529528153, "question_id": 50956897, "link": "https://stackoverflow.com/questions/50956897/having-an-image-appear-multiple-times-pygame", "title": "Having an image appear multiple times Pygame", "body": "<p>I have a single battery image appearing once here and it moves from right to left then goes away. I want batteries constantly coming and going until the player hits one of them. \nMy question is how do I get the batteries to keep on coming until a player hits it? I want them to appear maybe 100 units apart.</p>\n\n<pre><code>from pygame import * \nimport os\nimport random\nos.environ['SDL_VIDEO_WINDOW_POS'] = \"%d, %d\" %(0, 0)\ninit()\n#set screen size\nsize = width, height = 800, 600\nscreen = display.set_mode(size)\n#set fonts\nfontGame=font.SysFont(\"Times New Roman\", 30)\nfontBack=font.SysFont(\"Ariel\", 30)\nfontTitle=font.SysFont(\"Ariel\", 100)\nfontResearch=font.SysFont (\"Times New Roman\", 18)\n#set button and page to 0\nbutton = 0\npage=0\n\n#setting colours\nBLACK = (0, 0, 0)\nRED = (255,0,0)\nGREEN = (0, 255, 0)\nBLUE = (106,186,232)\n#loading image\nbackgroundPic=image.load(\"Background.jpg\")\nbackgroundGame=image.load(\"gameBackground.jpg\")\nbackgroundGame=transform.scale(backgroundGame,(800,600))\nbattery=image.load(\"Battery.png\")\nbattery=transform.scale(battery,(100,100))\n\nbackgroundx=0\nplayerPic=image.load(\"player.png\")\nplayerPic=transform.scale(playerPic,(70,70))\n\nbatteryx=[]\n\n\n#defining what is going to be shown on the screen\ndef drawScene(screen, button,page,locationx,locationy): \n    global batteryx\n    mx, my = mouse.get_pos() #will get where the mouse is\n    #if the user does nothing\n    if page==0:\n        draw.rect(screen, BLACK, (0,0, width, height))\n\n        screen.fill(BLACK)\n        rel_backgroundx= backgroundx % backgroundGame.get_rect().width\n        screen.blit(backgroundGame, (rel_backgroundx - backgroundGame.get_rect().width,0))\n        if rel_backgroundx &lt; width:\n            screen.blit (backgroundGame, (rel_backgroundx,0))\n        screen.blit(playerPic,(locationx,locationy))\n\n        screen.blit(battery,(batteryx,420))                \n        batteryx-=1               \n\n    display.flip()\n    return page\n\n#def collision (battery, playerPic):\n    #if battery.colliderect(playerPic):\n        #return True\n    #return False\n\nrunning = True\nmyClock = time.Clock()\n\nKEY_LEFT= False\nKEY_RIGHT= False\nKEY_UP= False\nKEY_DOWN= False\nlocationx=0\njumping=False\naccel=20\nonGround= height-150\nlocationy=onGround\n\nbatteryx=random.randrange(50,width,10)  \n\n# Game Loop\nwhile running:\n    button=0\n    print (KEY_LEFT, KEY_RIGHT)\n    for evnt in event.get():             # checks all events that happen\n        if evnt.type == QUIT:\n            running=False\n        if evnt.type == MOUSEBUTTONDOWN:\n            mx,my=evnt.pos\n            button = evnt.button\n        if evnt.type== KEYDOWN:\n            if evnt.key==K_LEFT:\n                KEY_LEFT= True\n                KEY_RIGHT= False\n            if evnt.key==K_RIGHT:\n                KEY_RIGHT= True\n                KEY_LEFT= False\n            if evnt.key==K_UP and jumping==False:\n                jumping=True \n                accel=20\n            if evnt.key== K_DOWN:\n                KEY_DOWN= True\n                KEY_UP= False \n        if evnt.type==KEYUP:\n            if evnt.key==K_LEFT:\n                KEY_LEFT= False\n            if evnt.key==K_RIGHT:\n                KEY_RIGHT= False\n            if evnt.key==K_DOWN:\n                KEY_DOWN=False\n\n    if KEY_LEFT== True:\n        locationx-=10\n        backgroundx+=10\n    if KEY_RIGHT== True:\n        locationx+=10\n        backgroundx-=10\n    if jumping==True:\n        locationy-=accel\n        accel-=1\n        if locationy&gt;=onGround:\n            jumping=False\n            locationy=onGround\n\n    #player cannot move off screen\n    if locationx&lt;0:\n        locationx=0\n    if locationx&gt;400:\n        locationx=400\n    #if collision(battery, playerPic)==True:\n        #screen.fill(BLACK)\n\n    page=drawScene(screen,button,page,locationx,locationy)\n    myClock.tick(60)  # waits long enough to have 60 fps\n    if page==6:  #if last button is clicked program closes\n        running=False\n\nquit()\n</code></pre>\n"}, {"tags": ["python", "pyqt", "pyqt5", "qthread"], "answers": [{"comments": [{"owner": {"reputation": 1459, "user_id": 2643471, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4d42c7e3d4c98b4bb2e01f55a187c310?s=128&d=identicon&r=PG", "display_name": "Xeberdee", "link": "https://stackoverflow.com/users/2643471/xeberdee"}, "edited": false, "score": 1, "creation_date": 1529561005, "post_id": 50957788, "comment_id": 88919521, "body": "Very clear and simple answer thankyou - I understand more now the handler class, and the actual running thread - I was confusing it with the code that runs on init."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1529532715, "creation_date": 1529532715, "answer_id": 50957788, "question_id": 50956886, "link": "https://stackoverflow.com/questions/50956886/pyqt-main-hangs-on-qthread/50957788#50957788", "title": "PyQt - Main hangs on QThread", "body": "<p><code>QThread</code> is not a thread, it is a thread handler, if you want to execute a task in another thread you must do it in the <code>run()</code> method, that method is the only part that is executed in the other thread. In your case the <code>Listen()</code> task is blocking and you call it in the constructor, and the <code>QThread</code> constructor runs in the GUI thread, that's why your GUI freezes. The solution is to move Connect and Listen to the <code>run()</code> method:</p>\n\n<pre><code>class HotKeys(QThread):\n    def __init__(self, parent=None):\n        QThread.__init__(self, parent)\n        self.COMBINATIONS = [\n            {keyboard.KeyCode(char='0')},\n            {keyboard.KeyCode(char='1')},\n            {keyboard.KeyCode(char='2')},\n            {keyboard.KeyCode(char='3')},  \n            ]\n\n        self.caspar = None\n        self.current = set()\n\n    def run(self):\n        self.Connect()\n        self.Listen()\n\n    def exit(self, i):\n        if self.caspar:\n            self.caspar.close()\n        sys.exit(i)\n\n    def Connect(self):\n        try:\n            self.caspar = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n            self.caspar.connect((\"127.0.0.1\", 10000))\n            print(\"Connected to caspar\")\n\n        except socket.error:\n            print(\"CasparCG not running, or incorrect settings.xml\")\n            self.exit(0)\n\n    def execute(self, k=None): # k is videofile \n        if self.caspar:\n            movie = bytes(\"PLAY 1-20 {} \\r\\n\".format(k), 'utf8')\n            self.caspar.send(movie)\n\n    def on_press(self, key):\n        if any([key in COMBO for COMBO in self.COMBINATIONS]):\n            self.current.add(key)\n            if any(all(k in self.current for k in COMBO) for COMBO in self.COMBINATIONS):\n                self.execute(key)\n\n    def on_release(self, key):\n        if any([key in COMBO for COMBO in self.COMBINATIONS]):\n            self.current.remove(key)\n\n    def Listen(self):\n        with keyboard.Listener(on_press=self.on_press, on_release=self.on_release) as listener:\n            listener.join()\n</code></pre>\n"}], "owner": {"reputation": 1459, "user_id": 2643471, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4d42c7e3d4c98b4bb2e01f55a187c310?s=128&d=identicon&r=PG", "display_name": "Xeberdee", "link": "https://stackoverflow.com/users/2643471/xeberdee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 568, "favorite_count": 0, "accepted_answer_id": 50957788, "answer_count": 1, "score": 2, "last_activity_date": 1530268588, "creation_date": 1529528098, "last_edit_date": 1530268588, "question_id": 50956886, "link": "https://stackoverflow.com/questions/50956886/pyqt-main-hangs-on-qthread", "title": "PyQt - Main hangs on QThread", "body": "<p>I have a Python QT application that connects to a CG server (CasparCG). The QT application triggers a QThread which listens for hotkeys using the module <em>pynput</em> - and sends a command to CasparCG to playback different video files for each of the keys pressed.</p>\n\n<p>In the Main GUI, I can assign video files to a list of hotkeys, and I trigger the HotKey listening thread from a submenu item.</p>\n\n<pre><code>self.actionStart_Hotkeys = QtWidgets.QAction(MainWindow)\nself.menuCasparCG.addAction(self.actionStart_Hotkeys)    \nself.actionStart_Hotkeys.triggered.connect(self.StartHotkeys)\n</code></pre>\n\n<p>The Main app and Ui_Window code is very long and has no problems - it functions like it should. Videos also playback as I would expect when the HotKeys are activated by pressing keys, but the Main window of the application freezes after a few video files are played - and I'm not sure why the main GUI is not responding to input after the HotKey thread is started.</p>\n\n<p>The code up until now looks like this..</p>\n\n<pre><code>from pynput import keyboard\n\nclass HotKeys(QThread):\n    def __init__(self, parent):\n        QThread.__init__(self, parent)\n        self.COMBINATIONS = [\n            {keyboard.KeyCode(char='0')},\n            {keyboard.KeyCode(char='1')},\n            {keyboard.KeyCode(char='2')},\n            {keyboard.KeyCode(char='3')},  \n            ]\n\n        self.caspar = None\n        self.current = set()\n        self.Connect()\n        self.Listen()\n\n    def exit(self, i):\n        if not self.caspar == None:\n            self.caspar.close\n        sys.exit(i)\n\n    def Connect(self):\n        try:\n            self.caspar = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n            self.caspar.connect((\"127.0.0.1\", 5250))\n            print(\"Connected to caspar\")\n\n        except socket.error:\n            print(\"CasparCG not running, or incorrect settings.xml\")\n            self.exit(0)\n\n    def execute(self, k=None): # k is videofile \n        movie = bytes(\"PLAY 1-20 {} \\r\\n\".format(k), 'utf8')\n        self.caspar.send(movie)\n\n    def on_press(self, key):\n        if any([key in COMBO for COMBO in self.COMBINATIONS]):\n             self.current.add(key)\n            if any(all(k in self.current for k in COMBO) for COMBO in self.COMBINATIONS):\n                self.execute(key)\n\n    def on_release(self, key):\n        if any([key in COMBO for COMBO in self.COMBINATIONS]):\n            self.current.remove(key)\n\n    def Listen(self):\n        with keyboard.Listener(on_press=self.on_press, on_release=self.on_release) as listener:\n            listener.join() \n</code></pre>\n\n<p>I trigger this Hotkey QThread in the Main class of the application like this...</p>\n\n<pre><code>class Main(QMainWindow, Ui_MainWindow):\n    def __init__(self):\n        QMainWindow.__init__(self)\n        self.setupUi(self) # from Ui_MainWindow class       \n\n    def StartHotkeys(self):\n        hotkey_thread = HotKeys(self)\n        hotkey_thread.start()   \n</code></pre>\n\n<p>and the application like this...</p>\n\n<pre><code>if __name__ == \"__main__\":\n    import sys\n    app = QtWidgets.QApplication(sys.argv) \n    gui = Main()\n    gui.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>So why does Main freeze?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1529528272, "post_id": 50956884, "comment_id": 88911258, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation, as suggested when you created this account.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described."}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1529528367, "post_id": 50956884, "comment_id": 88911292, "body": "Why not have your <code>Index</code> be <code>OrderedDict([(0, &#39;A&#39;), (1, &#39;B&#39;), ...])</code> so you can look up the values in it?  At the moment you&#39;re just treating it like a list of tuples."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1529528428, "post_id": 50956884, "comment_id": 88911327, "body": "The <code>if a[j] == &#39; &#39;</code> should not be in the <code>for alphabet, number</code> loop. That will add 26 spaces to the encoding."}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1529528515, "creation_date": 1529528515, "answer_id": 50956963, "question_id": 50956884, "link": "https://stackoverflow.com/questions/50956884/having-typeerror-int-object-is-not-subscriptable-trouble-while-programming-ca/50956963#50956963", "title": "Having TypeError: &#39;int&#39; object is not subscriptable trouble while programming caesar cipher", "body": "<p>You have confused yourself about your own data types:</p>\n\n<pre><code>enc_i = [1, 2, 3, ' ', 4, 5, 6, ' ', 7, 8, 9]\n\nfor a in enc_i:\n        if a[j] == ' ':\n</code></pre>\n\n<p><code>a</code> is a series of elements from <code>enc_1</code>, those being the integers 1 through 9 and two strings of a single blank.  The first three times through your loop, <code>a</code> is an integer.  When you hit the error, <code>a</code> and <code>j</code> are both zero.  Just what do you expect <code>0[0]</code> to mean in your <code>if</code> statement?</p>\n\n<p>I'm confused.  So is the Python parser.  Confusing the parser gets you an error message.  Remember, the parser makes the rules.  :-)</p>\n"}, {"tags": [], "owner": {"reputation": 1076, "user_id": 7996768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc230cda9ef8457b22c324edbc011413?s=128&d=identicon&r=PG&f=1", "display_name": "T. Kelher", "link": "https://stackoverflow.com/users/7996768/t-kelher"}, "is_accepted": false, "score": 0, "last_activity_date": 1529528610, "creation_date": 1529528610, "answer_id": 50956986, "question_id": 50956884, "link": "https://stackoverflow.com/questions/50956884/having-typeerror-int-object-is-not-subscriptable-trouble-while-programming-ca/50956986#50956986", "title": "Having TypeError: &#39;int&#39; object is not subscriptable trouble while programming caesar cipher", "body": "<pre><code>enc_i = [1, 2, 3, ' ', 4, 5, 6, ' ', 7, 8, 9]\nfor a in enc_i:\n</code></pre>\n\n<p>a will be 1 in the first iteration, then 2, then 3,... all integers</p>\n\n<pre><code>     if a[j] == ' ':\n</code></pre>\n\n<p>integer not subscriptable error, you cant access an index 0 of an integer, it's just a number. You can do enc_i[j] though</p>\n\n<pre><code>def change():\n    j=0\n    for a in enc_i:\n        for alphabet , number in Index.items():\n            if a == ' ':\n                enc_str.extend([' '])\n            elif number == a:\n                enc_str.append(alphabet)\n        j+=1\n</code></pre>\n\n<p>Maybe you want this?</p>\n"}], "owner": {"reputation": 1, "user_id": 9969715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54e33c22322ea533fe3f5099de1204f1?s=128&d=identicon&r=PG&f=1", "display_name": "Kim Gyeong Tae", "link": "https://stackoverflow.com/users/9969715/kim-gyeong-tae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1529528610, "creation_date": 1529528090, "last_edit_date": 1529528248, "question_id": 50956884, "link": "https://stackoverflow.com/questions/50956884/having-typeerror-int-object-is-not-subscriptable-trouble-while-programming-ca", "title": "Having TypeError: &#39;int&#39; object is not subscriptable trouble while programming caesar cipher", "body": "<p>I'm currently trying to make caesar cipher program. there's index dictionary made with dictionary data . showing index of letters like <code>OrderedDict([('A', 0), ('B', 1),...,  ('Y', 24), ('Z', 25)])</code> and lets say name of dictionary is \"Index\" so what i want to do is match value of list \"dec_i\" w dictionary Index's value and the get key value and put in list </p>\n\n<pre><code>enc_i = [1, 2, 3, ' ', 4, 5, 6, ' ', 7, 8, 9]\n</code></pre>\n\n<p>RESULT </p>\n\n<pre><code>enc_str = ['B', 'C', 'D',' ', 'E', 'F', 'G', ' ', 'H', 'I', 'J']\n</code></pre>\n\n<p>i tried to make it </p>\n\n<pre><code>def change():\n    j=0\n    for a in enc_i:\n        for alphabet , number in Index.items():\n            if a[j] == ' ':\n                enc_str.extend([' '])\n            elif number == a[j]:\n                    enc_str.append(alphabet)\n        j+=1\n</code></pre>\n\n<p>but it doesnt work. saying </p>\n\n<blockquote>\n  <p>TypeError: 'int' object is not subscriptable</p>\n</blockquote>\n\n<p>how should i modify or do with my code?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 5, "creation_date": 1529527955, "post_id": 50956836, "comment_id": 88911120, "body": "Both work for me. What error do you get?"}, {"owner": {"reputation": 467, "user_id": 4019495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KYh5a.png?s=128&g=1", "display_name": "extremeaxe5", "link": "https://stackoverflow.com/users/4019495/extremeaxe5"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1529529926, "post_id": 50956836, "comment_id": 88911914, "body": "I am getting &#39;ValueError: Must have equal len keys and value when setting with an iterable&#39; for the second one. This problem literally confused me for a good thirty minutes."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1529532147, "post_id": 50956836, "comment_id": 88912754, "body": "Must be being generated on data different from that presented here. Maybe the number of IDs being assigned is different from the size of the array you&#39;re assigning?"}], "owner": {"reputation": 467, "user_id": 4019495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KYh5a.png?s=128&g=1", "display_name": "extremeaxe5", "link": "https://stackoverflow.com/users/4019495/extremeaxe5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1529527860, "creation_date": 1529527860, "question_id": 50956836, "link": "https://stackoverflow.com/questions/50956836/dataframe-slice-assignment-inconsistency", "title": "DataFrame Slice Assignment inconsistency", "body": "<p>Why does </p>\n\n<pre><code>df = pd.DataFrame({1 : np.random.randn(5),\n                  2 : np.random.randn(5),\n                  3 : np.random.randn(5)}, index=[1, 1, 2, 2, 2])\n\na = np.array([3.1, 3.14, 3.1415])\ndf.loc[2, 2] = a\n</code></pre>\n\n<p>Work but </p>\n\n<pre><code>df = pd.DataFrame({1 : np.random.randn(5),\n                      2 : np.random.randn(5),\n                      3 : np.random.randn(5)}, index=[1, 2, 1, 2, 2])\n\na = np.array([3.1, 3.14, 3.1415])\ndf.loc[2, 2] = a\n</code></pre>\n\n<p>not? As you can tell, the only difference is the index.</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 3, "creation_date": 1529528009, "post_id": 50956835, "comment_id": 88911139, "body": "zip is a zip-to-smallest-list function, what&#39;s wrong with <code>[x[-1] for x in Y]</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 3, "last_activity_date": 1529528024, "creation_date": 1529528024, "answer_id": 50956866, "question_id": 50956835, "link": "https://stackoverflow.com/questions/50956835/using-zip-command-to-get-the-last-element-of-all-the-lists-from-list-of-lists/50956866#50956866", "title": "using zip command to get the last element of all the lists from list of lists", "body": "<p>You were close - just use the reversed list iterators:</p>\n\n<pre><code>&gt;&gt;&gt; list(zip(*[reversed(y) for y in Y]))[0]\n(200, 509, 529, 561, 637)\n</code></pre>\n\n<p>Or, more directly, a list comprehension:</p>\n\n<pre><code>[y[-1] for y in Y]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 2, "last_activity_date": 1529528450, "last_edit_date": 1529528450, "creation_date": 1529528088, "answer_id": 50956882, "question_id": 50956835, "link": "https://stackoverflow.com/questions/50956835/using-zip-command-to-get-the-last-element-of-all-the-lists-from-list-of-lists/50956882#50956882", "title": "using zip command to get the last element of all the lists from list of lists", "body": "<p><a href=\"https://docs.python.org/3/library/functions.html#zip\" rel=\"nofollow noreferrer\"><code>zip</code></a> zips up iterables of the same length. If you give it iterables of <em>different</em> lengths, it stops at the end of the first one.</p>\n\n<p>So, since your shortest list is length 2, you get the first elements, then the second elements\u2026 and that's it, so <code>[-1]</code> returns the second elements.</p>\n\n<p>You could use <code>itertools.zip_longest</code>, but that won't really help, because it handles iterables of different lengths by filling in extra <code>None</code> values at the end, not by\u2026\u00a0inserting extra values in the middle or something that would stretch them all out to the same length.</p>\n\n<hr>\n\n<p>The easiest thing to do is to take the first and last of each <em>first</em>, before zipping:</p>\n\n<pre><code>Y= [[192, 193, 194, 195, 196, 197, 198, 199, 200],\n    [507, 508, 509],\n    [526, 527, 528, 529],\n    [560, 561],\n    [635, 636, 637]]\n\nFL = [(sublist[0], sublist[-1]) for sublist in Y]\n</code></pre>\n\n<p>Then you can transpose that with <code>zip</code>:</p>\n\n<pre><code>F, L = zip(*FL)\n</code></pre>\n\n<hr>\n\n<p>Or just not <code>zip</code> anything, since you're not getting any real benefit out of transposing things anyway, just making things more complicated:</p>\n\n<pre><code>F = [sublist[0] for sublist in Y]\nL = [sublist[-1] for sublist in Y]\n</code></pre>\n\n<hr>\n\n<p>Alternatively, you could zip the forward and backward lists:</p>\n\n<pre><code>F = zip(*Y)\nL = zip(*map(reversed, Y))\n</code></pre>\n\n<p>And then get the first elements out of each of those:</p>\n\n<pre><code>f, l = next(F), next(L) # or list(F)[0] if you insist\n</code></pre>\n\n<p>I think this is the closest to what you were trying to do, but it seems like the most complicated way to do it.</p>\n"}], "owner": {"reputation": 403, "user_id": 5689638, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/4a56b3776c6255f540b407eebdcc5c7e?s=128&d=identicon&r=PG&f=1", "display_name": "kdba", "link": "https://stackoverflow.com/users/5689638/kdba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 50956866, "answer_count": 2, "score": 0, "last_activity_date": 1529528450, "creation_date": 1529527860, "question_id": 50956835, "link": "https://stackoverflow.com/questions/50956835/using-zip-command-to-get-the-last-element-of-all-the-lists-from-list-of-lists", "title": "using zip command to get the last element of all the lists from list of lists", "body": "<p>I have a list of lists:</p>\n\n<pre><code>       Y= [[192, 193, 194, 195, 196, 197, 198, 199, 200],\n         [507, 508, 509],\n         [526, 527, 528, 529],\n         [560, 561],\n         [635, 636, 637]]\n</code></pre>\n\n<p>and I want the last and first elements of each list into a separate list. \nI used the zip command:</p>\n\n<pre><code>list(zip(*Y))[0]\n</code></pre>\n\n<p>for all first elements and gave me:</p>\n\n<pre><code>[192,507,526,560,635]\n</code></pre>\n\n<p>but when I use <code>list(zip(*Y))[-1]</code></p>\n\n<p>I got <code>[193, 508, 527, 561, 636]</code></p>\n\n<p>instead of <code>[200,509,529,561,637]</code></p>\n\n<p>what am I doing wrong?</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 7293, "user_id": 5994041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dWWF9.png?s=128&g=1", "display_name": "Peter Badida", "link": "https://stackoverflow.com/users/5994041/peter-badida"}, "is_accepted": false, "score": 0, "last_activity_date": 1529528868, "last_edit_date": 1529528868, "creation_date": 1529528146, "answer_id": 50956894, "question_id": 50956810, "link": "https://stackoverflow.com/questions/50956810/how-can-i-check-for-a-keyhold-in-python/50956894#50956894", "title": "How can i check for a keyhold in python", "body": "<p>Not sure about other platforms, but on Windows there is a library <code>conio</code> which you can use in C like this:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n\nint main() {\n    while (1) {\n        printf(\"%c\", getch());\n    }\n    return 0;\n}\n</code></pre>\n\n<p>and with Cython you can use that <code>getch()</code> function the same way if you link against <code>conio</code> library.</p>\n\n<p>This should be what <a href=\"https://pypi.org/project/getch/\" rel=\"nofollow noreferrer\"><code>getch</code></a> package does for you in a cross-platform manner even with <code>termios</code> library on POSIX platforms.</p>\n\n<p>If you don't want to use a non-standard library, then you'll end up with writing a platform dependent code such as <code>getch</code> package does for you:</p>\n\n<pre><code>import msvcrt\nwhile True:\n    print(msvcrt.getch())\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 5385693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efdf068ff639deff979f4a4cbda5af02?s=128&d=identicon&r=PG&f=1", "display_name": "\u0394\u03b7\u03bc\u03ae\u03c4\u03c1\u03b7\u03c2 \u0391\u03c1\u03b1\u03bc\u03c0\u03b1\u03c4\u03b6\u03ae\u03c2", "link": "https://stackoverflow.com/users/5385693/%ce%94%ce%b7%ce%bc%ce%ae%cf%84%cf%81%ce%b7%cf%82-%ce%91%cf%81%ce%b1%ce%bc%cf%80%ce%b1%cf%84%ce%b6%ce%ae%cf%82"}, "edited": false, "score": 0, "creation_date": 1529529271, "post_id": 50956973, "comment_id": 88911640, "body": "Thank you for the immediate response and sorry for the noob question but where would you run this? When i run this in pycharm and press the up key i only move the cursor up in the code section.. When i run this through terminal it prints ^[[A... Am i doing something wrong?(i am using mac)"}, {"owner": {"reputation": 932, "user_id": 4903846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e1a1ec117d44421d2a9bbc63cf95206?s=128&d=identicon&r=PG&f=1", "display_name": "Rodolfo Don&#227; Hosp", "link": "https://stackoverflow.com/users/4903846/rodolfo-don%c3%a3-hosp"}, "reply_to_user": {"reputation": 93, "user_id": 5385693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efdf068ff639deff979f4a4cbda5af02?s=128&d=identicon&r=PG&f=1", "display_name": "\u0394\u03b7\u03bc\u03ae\u03c4\u03c1\u03b7\u03c2 \u0391\u03c1\u03b1\u03bc\u03c0\u03b1\u03c4\u03b6\u03ae\u03c2", "link": "https://stackoverflow.com/users/5385693/%ce%94%ce%b7%ce%bc%ce%ae%cf%84%cf%81%ce%b7%cf%82-%ce%91%cf%81%ce%b1%ce%bc%cf%80%ce%b1%cf%84%ce%b6%ce%ae%cf%82"}, "edited": false, "score": 0, "creation_date": 1529548879, "post_id": 50956973, "comment_id": 88916316, "body": "You can run this script anywhere actually, i tested it using IDLE. As this snippet is just a Listener from the keyboard, all key presses should do the same functions, if you press UP it will still scroll up, but the keyboard will trigger the on_press callback and do the extra stuff you tell it to. To get a clearer view you can try the snippet i edited on the response"}, {"owner": {"reputation": 93, "user_id": 5385693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efdf068ff639deff979f4a4cbda5af02?s=128&d=identicon&r=PG&f=1", "display_name": "\u0394\u03b7\u03bc\u03ae\u03c4\u03c1\u03b7\u03c2 \u0391\u03c1\u03b1\u03bc\u03c0\u03b1\u03c4\u03b6\u03ae\u03c2", "link": "https://stackoverflow.com/users/5385693/%ce%94%ce%b7%ce%bc%ce%ae%cf%84%cf%81%ce%b7%cf%82-%ce%91%cf%81%ce%b1%ce%bc%cf%80%ce%b1%cf%84%ce%b6%ce%ae%cf%82"}, "edited": false, "score": 0, "creation_date": 1529788772, "post_id": 50956973, "comment_id": 89003751, "body": "So i run the code with the edit you gave me but it only recognizes special characters like &#39;command, alt, shift&#39; etc. I am using a mac though.. I can&#39;t seem to make it work.."}, {"owner": {"reputation": 932, "user_id": 4903846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e1a1ec117d44421d2a9bbc63cf95206?s=128&d=identicon&r=PG&f=1", "display_name": "Rodolfo Don&#227; Hosp", "link": "https://stackoverflow.com/users/4903846/rodolfo-don%c3%a3-hosp"}, "reply_to_user": {"reputation": 93, "user_id": 5385693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efdf068ff639deff979f4a4cbda5af02?s=128&d=identicon&r=PG&f=1", "display_name": "\u0394\u03b7\u03bc\u03ae\u03c4\u03c1\u03b7\u03c2 \u0391\u03c1\u03b1\u03bc\u03c0\u03b1\u03c4\u03b6\u03ae\u03c2", "link": "https://stackoverflow.com/users/5385693/%ce%94%ce%b7%ce%bc%ce%ae%cf%84%cf%81%ce%b7%cf%82-%ce%91%cf%81%ce%b1%ce%bc%cf%80%ce%b1%cf%84%ce%b6%ce%ae%cf%82"}, "edited": false, "score": 0, "creation_date": 1529939969, "post_id": 50956973, "comment_id": 89046020, "body": "Perhaps its an IDE issue, try running it within IDLE (Python native editor) to see if it works out"}, {"owner": {"reputation": 93, "user_id": 5385693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efdf068ff639deff979f4a4cbda5af02?s=128&d=identicon&r=PG&f=1", "display_name": "\u0394\u03b7\u03bc\u03ae\u03c4\u03c1\u03b7\u03c2 \u0391\u03c1\u03b1\u03bc\u03c0\u03b1\u03c4\u03b6\u03ae\u03c2", "link": "https://stackoverflow.com/users/5385693/%ce%94%ce%b7%ce%bc%ce%ae%cf%84%cf%81%ce%b7%cf%82-%ce%91%cf%81%ce%b1%ce%bc%cf%80%ce%b1%cf%84%ce%b6%ce%ae%cf%82"}, "edited": false, "score": 0, "creation_date": 1529956971, "post_id": 50956973, "comment_id": 89054302, "body": "I have run it through IDLE and its the same..Does it print every key normally for you?"}, {"owner": {"reputation": 932, "user_id": 4903846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e1a1ec117d44421d2a9bbc63cf95206?s=128&d=identicon&r=PG&f=1", "display_name": "Rodolfo Don&#227; Hosp", "link": "https://stackoverflow.com/users/4903846/rodolfo-don%c3%a3-hosp"}, "reply_to_user": {"reputation": 93, "user_id": 5385693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efdf068ff639deff979f4a4cbda5af02?s=128&d=identicon&r=PG&f=1", "display_name": "\u0394\u03b7\u03bc\u03ae\u03c4\u03c1\u03b7\u03c2 \u0391\u03c1\u03b1\u03bc\u03c0\u03b1\u03c4\u03b6\u03ae\u03c2", "link": "https://stackoverflow.com/users/5385693/%ce%94%ce%b7%ce%bc%ce%ae%cf%84%cf%81%ce%b7%cf%82-%ce%91%cf%81%ce%b1%ce%bc%cf%80%ce%b1%cf%84%ce%b6%ce%ae%cf%82"}, "edited": false, "score": 0, "creation_date": 1530015526, "post_id": 50956973, "comment_id": 89076426, "body": "Perfectly normal, when i&#39;m pressing keys it show every single character (including Alt, shift keys, etc...), perhaps it&#39;s an OS divergence as i&#39;m using Windows, and if i&#39;m correct i&#39;m afraid i won&#39;t be able to help you"}], "tags": [], "owner": {"reputation": 932, "user_id": 4903846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e1a1ec117d44421d2a9bbc63cf95206?s=128&d=identicon&r=PG&f=1", "display_name": "Rodolfo Don&#227; Hosp", "link": "https://stackoverflow.com/users/4903846/rodolfo-don%c3%a3-hosp"}, "is_accepted": false, "score": 3, "last_activity_date": 1529549052, "last_edit_date": 1529549052, "creation_date": 1529528542, "answer_id": 50956973, "question_id": 50956810, "link": "https://stackoverflow.com/questions/50956810/how-can-i-check-for-a-keyhold-in-python/50956973#50956973", "title": "How can i check for a keyhold in python", "body": "<p>You can try ysing Pynput library and the keyboard listener.</p>\n\n<p>I made a snippet for you to test, hope it helps!</p>\n\n<pre><code>from pynput import keyboard\n\ndef keyPress(key):\n    if key == keyboard.Key.up:\n        print('Up pressed')\n\nwith keyboard.Listener(\n        on_press=keyPress) as kb:\n    kb.join()\n</code></pre>\n\n<p>And don't forget to </p>\n\n<pre><code>pip install pynput\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>To see all keypresses you can try changing the callback to:</p>\n\n<pre><code>try:\n    print('{0} pressed'.format(\n        key.char))\nexcept :\n    print('key {0} pressed'.format(\n        key))\n</code></pre>\n\n<p>The except block is just a workaround to show special keys too</p>\n"}], "owner": {"reputation": 93, "user_id": 5385693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efdf068ff639deff979f4a4cbda5af02?s=128&d=identicon&r=PG&f=1", "display_name": "\u0394\u03b7\u03bc\u03ae\u03c4\u03c1\u03b7\u03c2 \u0391\u03c1\u03b1\u03bc\u03c0\u03b1\u03c4\u03b6\u03ae\u03c2", "link": "https://stackoverflow.com/users/5385693/%ce%94%ce%b7%ce%bc%ce%ae%cf%84%cf%81%ce%b7%cf%82-%ce%91%cf%81%ce%b1%ce%bc%cf%80%ce%b1%cf%84%ce%b6%ce%ae%cf%82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 816, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1529549052, "creation_date": 1529527671, "question_id": 50956810, "link": "https://stackoverflow.com/questions/50956810/how-can-i-check-for-a-keyhold-in-python", "title": "How can i check for a keyhold in python", "body": "<p>I need to check whether arrow keys are being pressed on the PC and do something while it is being held down. For example if:</p>\n\n<p>if arrow up is held down the console will print:\nup,up,up,up..\n-until released.\nHow can i do that? I tried some libraries but every one seems to only register a click but not a repeated hold..</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "windows", "pywinauto"], "comments": [{"owner": {"reputation": 7644, "user_id": 3648361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1aeF.jpg?s=128&g=1", "display_name": "Vasily Ryabov", "link": "https://stackoverflow.com/users/3648361/vasily-ryabov"}, "edited": false, "score": 0, "creation_date": 1529529573, "post_id": 50956800, "comment_id": 88911743, "body": "Are you using default <code>Application(backend=&quot;win32&quot;)</code>?"}, {"owner": {"reputation": 8669, "user_id": 38258, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/f34841ef767a8ac8c4d48236e3e20ce8?s=128&d=identicon&r=PG", "display_name": "Nick Gotch", "link": "https://stackoverflow.com/users/38258/nick-gotch"}, "reply_to_user": {"reputation": 7644, "user_id": 3648361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1aeF.jpg?s=128&g=1", "display_name": "Vasily Ryabov", "link": "https://stackoverflow.com/users/3648361/vasily-ryabov"}, "edited": false, "score": 0, "creation_date": 1529585413, "post_id": 50956800, "comment_id": 88934229, "body": "@VasilyRyabov I wasn&#39;t so I tried it but it produces the same control identifiers list."}, {"owner": {"reputation": 7644, "user_id": 3648361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1aeF.jpg?s=128&g=1", "display_name": "Vasily Ryabov", "link": "https://stackoverflow.com/users/3648361/vasily-ryabov"}, "edited": false, "score": 0, "creation_date": 1529586127, "post_id": 50956800, "comment_id": 88934706, "body": "Yes, because it&#39;s default backend. But there is one more <code>backend=&quot;uia&quot;</code> which should produce another identifiers list probably. Did you try it?"}, {"owner": {"reputation": 7644, "user_id": 3648361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1aeF.jpg?s=128&g=1", "display_name": "Vasily Ryabov", "link": "https://stackoverflow.com/users/3648361/vasily-ryabov"}, "edited": false, "score": 0, "creation_date": 1529586181, "post_id": 50956800, "comment_id": 88934747, "body": "I would recommend using <code>backend=&quot;uia&quot;</code> for all MS Office products. It should see much more controls."}, {"owner": {"reputation": 8669, "user_id": 38258, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/f34841ef767a8ac8c4d48236e3e20ce8?s=128&d=identicon&r=PG", "display_name": "Nick Gotch", "link": "https://stackoverflow.com/users/38258/nick-gotch"}, "reply_to_user": {"reputation": 7644, "user_id": 3648361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1aeF.jpg?s=128&g=1", "display_name": "Vasily Ryabov", "link": "https://stackoverflow.com/users/3648361/vasily-ryabov"}, "edited": false, "score": 0, "creation_date": 1529588357, "post_id": 50956800, "comment_id": 88936256, "body": "That did it. I switched and was able to find the Cancel button and click it. Thank you!"}, {"owner": {"reputation": 7644, "user_id": 3648361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1aeF.jpg?s=128&g=1", "display_name": "Vasily Ryabov", "link": "https://stackoverflow.com/users/3648361/vasily-ryabov"}, "edited": false, "score": 0, "creation_date": 1529588686, "post_id": 50956800, "comment_id": 88936479, "body": "Cool! Posted it as an answer."}], "answers": [{"tags": [], "owner": {"reputation": 7644, "user_id": 3648361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1aeF.jpg?s=128&g=1", "display_name": "Vasily Ryabov", "link": "https://stackoverflow.com/users/3648361/vasily-ryabov"}, "is_accepted": true, "score": 3, "last_activity_date": 1529588671, "creation_date": 1529588671, "answer_id": 50970112, "question_id": 50956800, "link": "https://stackoverflow.com/questions/50956800/using-pywinauto-to-click-dialog-box-cancel-button/50970112#50970112", "title": "Using pywinauto to click dialog box Cancel button", "body": "<p>I would recommend using <code>Application(backend=\"uia\")</code> for all MS Office products. It should see much more controls.</p>\n"}], "owner": {"reputation": 8669, "user_id": 38258, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/f34841ef767a8ac8c4d48236e3e20ce8?s=128&d=identicon&r=PG", "display_name": "Nick Gotch", "link": "https://stackoverflow.com/users/38258/nick-gotch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 518, "favorite_count": 0, "accepted_answer_id": 50970112, "answer_count": 1, "score": 1, "last_activity_date": 1529588671, "creation_date": 1529527632, "question_id": 50956800, "link": "https://stackoverflow.com/questions/50956800/using-pywinauto-to-click-dialog-box-cancel-button", "title": "Using pywinauto to click dialog box Cancel button", "body": "<p>I have a situation where an automation process for PowerPoint gets hung up if a password protected .ppt file is passed into it. I've worked out a script to detect when this happens using <code>pywinauto</code> and hook up to the Password dialog but I can't seem to get it to click the Cancel button.</p>\n\n<p>Here's the control identifiers I see for the Enter Password dialog:</p>\n\n<pre><code>NUIDialog - 'Password'    (L649, T422, R999, B553)\n['NUIDialog', 'Password', 'PasswordNUIDialog']\nchild_window(title=\"Password\", class_name=\"NUIDialog\")\n   |\n   | NetUIHWND - ''    (L657, T453, R991, B545)\n   | ['NetUIHWND', 'PasswordNetUIHWND']\n   | child_window(class_name=\"NetUIHWND\")\n   |    |\n   |    | NetUICtrlNotifySink - ''    (L728, T495, R983, B510)\n   |    | ['PasswordNetUICtrlNotifySink', 'NetUICtrlNotifySink']\n   |    | child_window(class_name=\"NetUICtrlNotifySink\")\n   |    |    |\n   |    |    | RICHEDIT60W - ''    (L728, T495, R983, B510)\n   |    |    | ['PasswordRICHEDIT60W', 'RICHEDIT60W']\n   |    |    | child_window(class_name=\"RICHEDIT60W\")\n   |    |\n   |    | RICHEDIT60W - ''    (L728, T495, R983, B510)\n   |    | ['PasswordRICHEDIT60W', 'RICHEDIT60W']\n   |    | child_window(class_name=\"RICHEDIT60W\")\n   |\n   | NetUICtrlNotifySink - ''    (L728, T495, R983, B510)\n   | ['PasswordNetUICtrlNotifySink', 'NetUICtrlNotifySink']\n   | child_window(class_name=\"NetUICtrlNotifySink\")\n   |    |\n   |    | RICHEDIT60W - ''    (L728, T495, R983, B510)\n   |    | ['PasswordRICHEDIT60W', 'RICHEDIT60W']\n   |    | child_window(class_name=\"RICHEDIT60W\")\n   |\n   | RICHEDIT60W - ''    (L728, T495, R983, B510)\n   | ['PasswordRICHEDIT60W', 'RICHEDIT60W']\n   | child_window(class_name=\"RICHEDIT60W\")\n</code></pre>\n\n<p>I tried doing a <code>password_dialog.NetUICtrlNotifySink.Click()</code> but nothing happens. Any ideas?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1529527930, "post_id": 50956798, "comment_id": 88911111, "body": "In this specific case, there won&#39;t be a performance benefit. But if you call a method multiple time, e.g. in a loop, then the relatively high costs of method resolution in Python can have measurable effects on performance. Note, not only does resolving the attribute, <code>x.some_attr</code> cost a lot, but if it turns out to be a function, then a bound-method object is recreated every time."}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 2, "creation_date": 1529528105, "post_id": 50956798, "comment_id": 88911177, "body": "I would only worry about this if you&#39;re working on something very performance sensitive. Be sure to choose good names.  If you&#39;re doing this to imports, then you should probably have just imported the name on it&#39;s own from the other module <code>from math import sin, cos</code>."}, {"owner": {"reputation": 3012, "user_id": 6741482, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e2d07264d5857c8851212ac5c882039a?s=128&d=identicon&r=PG&f=1", "display_name": "pstatix", "link": "https://stackoverflow.com/users/6741482/pstatix"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1529529646, "post_id": 50956798, "comment_id": 88911780, "body": "@juanpa.arrivillaga Assume <code>x</code> is a class and <code>x.some_method</code> gets called a lot. Is there a way to improve the performance?"}, {"owner": {"reputation": 998, "user_id": 3874512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2096d0d108e55ca0b691fb9161377ae1?s=128&d=identicon&r=PG&f=1", "display_name": "BowlingHawk95", "link": "https://stackoverflow.com/users/3874512/bowlinghawk95"}, "edited": false, "score": 0, "creation_date": 1529529677, "post_id": 50956798, "comment_id": 88911791, "body": "This &quot;trick&quot; is more stylistic than performant.  I sometimes use it where I&#39;ve got lines that are very long because they contain calls to one or more lengthy function names, and I would like to shorted the line by breaking it up without abbreviating the function names.  It&#39;s just a style thing, though."}, {"owner": {"reputation": 3012, "user_id": 6741482, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e2d07264d5857c8851212ac5c882039a?s=128&d=identicon&r=PG&f=1", "display_name": "pstatix", "link": "https://stackoverflow.com/users/6741482/pstatix"}, "reply_to_user": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1529529689, "post_id": 50956798, "comment_id": 88911804, "body": "@PatrickHaugh Indeed I am, DBSCAN along a KDTree of ECEF points."}, {"owner": {"reputation": 3012, "user_id": 6741482, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e2d07264d5857c8851212ac5c882039a?s=128&d=identicon&r=PG&f=1", "display_name": "pstatix", "link": "https://stackoverflow.com/users/6741482/pstatix"}, "reply_to_user": {"reputation": 998, "user_id": 3874512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2096d0d108e55ca0b691fb9161377ae1?s=128&d=identicon&r=PG&f=1", "display_name": "BowlingHawk95", "link": "https://stackoverflow.com/users/3874512/bowlinghawk95"}, "edited": false, "score": 0, "creation_date": 1529529734, "post_id": 50956798, "comment_id": 88911828, "body": "@BowlingHawk95 That sounds like the inverse of the two prior posts...?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1529530347, "post_id": 50956798, "comment_id": 88912088, "body": "@pstatix if you mean <code>x</code> is some <i>instance of a class</i>, then yeah, do <code>some_method = x.some_method</code> and then use <code>some_method</code> in place of <code>x.some_method</code>"}, {"owner": {"reputation": 998, "user_id": 3874512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2096d0d108e55ca0b691fb9161377ae1?s=128&d=identicon&r=PG&f=1", "display_name": "BowlingHawk95", "link": "https://stackoverflow.com/users/3874512/bowlinghawk95"}, "edited": false, "score": 0, "creation_date": 1529530550, "post_id": 50956798, "comment_id": 88912151, "body": "@pstatix How? My point was not to worry about the performance difference between the implementations.  The above posts are correct, but 999 times out of 1000, the performance impact of one pointer assignment is not going to be noticeable.  So hence my suggestion to think of this as more of a stylistic difference than performance.  If your question really has to do with a performance-critical system (to which I&#39;d ask why you&#39;re writing it in python), then see above posts."}, {"owner": {"reputation": 3012, "user_id": 6741482, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e2d07264d5857c8851212ac5c882039a?s=128&d=identicon&r=PG&f=1", "display_name": "pstatix", "link": "https://stackoverflow.com/users/6741482/pstatix"}, "reply_to_user": {"reputation": 998, "user_id": 3874512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2096d0d108e55ca0b691fb9161377ae1?s=128&d=identicon&r=PG&f=1", "display_name": "BowlingHawk95", "link": "https://stackoverflow.com/users/3874512/bowlinghawk95"}, "edited": false, "score": 0, "creation_date": 1529530784, "post_id": 50956798, "comment_id": 88912247, "body": "@BowlingHawk95 <i>&quot;...(to which I&#39;d ask why you&#39;re writing it in python)...&quot;</i> I am using the tools I have available."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 998, "user_id": 3874512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2096d0d108e55ca0b691fb9161377ae1?s=128&d=identicon&r=PG&f=1", "display_name": "BowlingHawk95", "link": "https://stackoverflow.com/users/3874512/bowlinghawk95"}, "edited": false, "score": 0, "creation_date": 1529532205, "post_id": 50956798, "comment_id": 88912771, "body": "@BowlingHawk95 it&#39;s not a simple pointer assignment at all. Check <a href=\"https://medium.com/stepping-through-the-cpython-interpreter/how-does-attribute-access-work-d19371898fee\" rel=\"nofollow noreferrer\">this article</a> that goes through what normal attribute access does in Python. Indeed, this is why <code>__slots__</code> was added, to make this much more performant. There is also the creation of an entire new object each time (the bound method object). It isn&#39;t trivial."}, {"owner": {"reputation": 3012, "user_id": 6741482, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e2d07264d5857c8851212ac5c882039a?s=128&d=identicon&r=PG&f=1", "display_name": "pstatix", "link": "https://stackoverflow.com/users/6741482/pstatix"}, "reply_to_user": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1529539933, "post_id": 50956798, "comment_id": 88914649, "body": "@PatrickHaugh Doesn&#39;t just importing <code>from math import sin, cos</code> still have the overhead global lookup as <code>math.sin</code> and <code>math.cos</code>?"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1529540182, "post_id": 50956798, "comment_id": 88914687, "body": "I don&#39;t believe so.  As I understand it, the namespace is a mapping of names to objects.  So in your original example, you have a name <code>math</code> that points to the <code>module</code> object representing the <code>math</code> module <code>{&quot;math&quot;: &lt;module math&gt;}</code>.  You then basically do <code>getattr(math, &#39;sin&#39;)</code> to resolve <code>math.sin</code>.  In contrast, when you <code>from math import sin</code>, you create the mapping <code>{&quot;sin&quot;: &lt;function sin&gt;}</code>, so when you dereference <code>sin</code> you skip that <code>getattr</code> step."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1529541799, "post_id": 50956798, "comment_id": 88914979, "body": "@PatrickHaugh there is still overhead from the global lookup, which is a dictionary lookup, versus a local variable lookup, which is optimized to a symbol-table lookup. This one is even more minor than the method-resolution and bound-method object creation"}], "answers": [{"comments": [{"owner": {"reputation": 3012, "user_id": 6741482, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e2d07264d5857c8851212ac5c882039a?s=128&d=identicon&r=PG&f=1", "display_name": "pstatix", "link": "https://stackoverflow.com/users/6741482/pstatix"}, "edited": false, "score": 0, "creation_date": 1529550068, "post_id": 50958977, "comment_id": 88916557, "body": "Neat little test, thanks for that. Now the question slightly turns to <i>&quot;When should one do this?&quot;</i>. Surely a trade-off like this isn&#39;t worth assigning method calls to a local variable in every single function scope?? For the class instance method calls I can see why since it has a ton of overhead, but for this, seems like more lines of code."}], "tags": [], "owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "is_accepted": false, "score": 2, "last_activity_date": 1529542998, "creation_date": 1529542998, "answer_id": 50958977, "question_id": 50956798, "link": "https://stackoverflow.com/questions/50956798/benefit-of-binding-functions-to-names-in-local-scopes/50958977#50958977", "title": "Benefit of binding functions to names in local scopes?", "body": "<p>I did some profiling to get a sense of what the actual difference between these is.  You can <a href=\"https://repl.it/@Haugh/AmazingFewRuby\" rel=\"nofollow noreferrer\">find the REPL here</a>\nfrom timeit import timeit</p>\n\n<pre><code>import math\nfrom math import sin\n\nx = 10_000_000\n\n\ndef from_import():\n    for _ in range(x):\n        sin(100)\n\n\ndef import_module():\n    for _ in range(x):\n        math.sin(100)\n\n\ndef local_var():\n    s = math.sin\n    for _ in range(x):\n        s(100)\n\n\ndef local_import():\n    from math import sin\n    for _ in range(x):\n        sin(100)\n\n\nfuncs = (from_import, import_module, local_var, local_import)\n\nfor func in funcs:\n    print(\"{:&lt;15} {}\".format(\n        func.__name__, timeit(\n            func.__name__ + '()', number=1, globals=globals())))\n</code></pre>\n\n<p>The results:</p>\n\n<pre><code>from_import     4.354339323996101\nimport_module   5.608195230990532\nlocal_var       3.982630196987884\nlocal_import    3.9956486110022524\n</code></pre>\n\n<p>I was surprised that the local names were that much more performant over the global names.  Both vastly outperform additional attribute lookups.  </p>\n"}], "owner": {"reputation": 3012, "user_id": 6741482, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e2d07264d5857c8851212ac5c882039a?s=128&d=identicon&r=PG&f=1", "display_name": "pstatix", "link": "https://stackoverflow.com/users/6741482/pstatix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1529542998, "creation_date": 1529527628, "question_id": 50956798, "link": "https://stackoverflow.com/questions/50956798/benefit-of-binding-functions-to-names-in-local-scopes", "title": "Benefit of binding functions to names in local scopes?", "body": "<p>I read something a day or so ago, couldn't remember where, and the author of the post noted that it is better to bind function calls to a name in local space rather than making the <code>.</code> access call.</p>\n\n<p>For example:</p>\n\n<pre><code>def foo():\n    a = math.cos\n    b = math.sin\n    x = a(1) * b(0)\n</code></pre>\n\n<p>vs</p>\n\n<pre><code>def foo():\n    x = math.cos(1) * math.sin(0)\n</code></pre>\n\n<p>Now this was in the context of performance and if those calls were made more than once, but it got me wondering why does it perform better at all and when should it be used like such? Doesn't doing this just begin to clutter up the namespace?</p>\n"}, {"tags": ["python", "scikit-learn"], "answers": [{"comments": [{"owner": {"reputation": 672, "user_id": 7906629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4f8b5fa332d102ec7b44495ce707cf?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. J", "link": "https://stackoverflow.com/users/7906629/mr-j"}, "edited": false, "score": 0, "creation_date": 1529561297, "post_id": 50961389, "comment_id": 88919650, "body": "its difficult to identify without data which you are working with, but one this is pretty sure something is going wrong with your y_score, which is causing error."}], "tags": [], "owner": {"reputation": 672, "user_id": 7906629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4f8b5fa332d102ec7b44495ce707cf?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. J", "link": "https://stackoverflow.com/users/7906629/mr-j"}, "is_accepted": false, "score": 0, "last_activity_date": 1529561008, "creation_date": 1529561008, "answer_id": 50961389, "question_id": 50956762, "link": "https://stackoverflow.com/questions/50956762/pythreadstate-get-no-current-thread-error-when-calculating-roc-curve-with-sklea/50961389#50961389", "title": "PyThreadState_Get: no current thread error when calculating roc curve with sklearn", "body": "<p>as far as i remember this implementation is restricted to the binary classification task.</p>\n"}, {"tags": [], "owner": {"reputation": 87, "user_id": 1953737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12435886a59521557beb9a0f0fd35c57?s=128&d=identicon&r=PG", "display_name": "user1953737", "link": "https://stackoverflow.com/users/1953737/user1953737"}, "is_accepted": false, "score": 0, "last_activity_date": 1560340628, "creation_date": 1560340628, "answer_id": 56561707, "question_id": 50956762, "link": "https://stackoverflow.com/questions/50956762/pythreadstate-get-no-current-thread-error-when-calculating-roc-curve-with-sklea/56561707#56561707", "title": "PyThreadState_Get: no current thread error when calculating roc curve with sklearn", "body": "<p>I faced the same issue, and the problem was because of the data points I passed to the roc_curve function. Something must be weird about the data. So try to fix data points issue should solve this problem.</p>\n"}], "owner": {"reputation": 98, "user_id": 5968693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c177ab780438a9d2b8b37c01b86da1d?s=128&d=identicon&r=PG&f=1", "display_name": "Sljder", "link": "https://stackoverflow.com/users/5968693/sljder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1560340628, "creation_date": 1529527460, "last_edit_date": 1529560150, "question_id": 50956762, "link": "https://stackoverflow.com/questions/50956762/pythreadstate-get-no-current-thread-error-when-calculating-roc-curve-with-sklea", "title": "PyThreadState_Get: no current thread error when calculating roc curve with sklearn", "body": "<p>I'm trying to calculate multiple (~3000) roc curves using sklearn.metrics in a loop and add results to list.</p>\n\n<p>Basically code looks something like this:</p>\n\n<pre><code>from sklearn import metrics\n\nresults = []\n\nfor y_test in dataset:\n\n    fpr, tpr, thresholds = metrics.roc_curve(y, y_test, pos_label=1)\n\n    results.append([fpr, tpr, thresholds])\n</code></pre>\n\n<p>It works ok, however after ~2k iterations I get PyThreadState_Get: no current thread that points to sklearn files:</p>\n\n<pre><code>    Fatal Python error: PyThreadState_Get: no current thread\n\nCurrent thread 0x000017a4 (most recent call first):\n  File \"C:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\sklearn\\metrics\\ranking.py\", line 356 in _binary_clf_curve\n  File \"C:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\sklearn\\metrics\\ranking.py\", line 534 in roc_curve\n</code></pre>\n\n<p>I suspect that it's a memory issue, however I was not able to solve it by simply freeing up more RAM, Windows resource monitor does not show that all ram is used during error either.\nMaybe someone has encountered such issue before?</p>\n\n<p>I'm using Python 3 on Windows 7 (64bit)</p>\n"}, {"tags": ["python", "matlab"], "comments": [{"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1529527799, "post_id": 50956747, "comment_id": 88911054, "body": "<code>repmat</code> is no longer necessary in MATLAB, and has never been necessary with NumPy. You can subtract a vector from a row, the singleton dimension will be expanded automatically (&quot;broadcast&quot; is the term NumPy uses)."}, {"owner": {"reputation": 603, "user_id": 9473446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e62e126a3a6ea4f956453c444557b7?s=128&d=identicon&r=PG&f=1", "display_name": "srkdb", "link": "https://stackoverflow.com/users/9473446/srkdb"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1529531888, "post_id": 50956747, "comment_id": 88912650, "body": "@CrisLuengo: The keepdims flag solved the issue for me."}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1529532267, "post_id": 50956747, "comment_id": 88912797, "body": "Ah, hood you figured it out! I was just typing that out in an answer... :)"}], "answers": [{"comments": [{"owner": {"reputation": 603, "user_id": 9473446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e62e126a3a6ea4f956453c444557b7?s=128&d=identicon&r=PG&f=1", "display_name": "srkdb", "link": "https://stackoverflow.com/users/9473446/srkdb"}, "edited": false, "score": 0, "creation_date": 1529532882, "post_id": 50957709, "comment_id": 88913004, "body": "On that same note, I&#39;m trying an element-wise matrix division of two 3x2 matrices. I have  X = np.divide(np.exp(Xm),np.sum(np.exp(Xm),axis = 1)), the 1st argument being 3x2, the 2nd being 3x1 and I want X to be also 3x2 (The 2nd arg being repeated to form a 3x2 matrix)"}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "reply_to_user": {"reputation": 603, "user_id": 9473446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e62e126a3a6ea4f956453c444557b7?s=128&d=identicon&r=PG&f=1", "display_name": "srkdb", "link": "https://stackoverflow.com/users/9473446/srkdb"}, "edited": false, "score": 0, "creation_date": 1529533153, "post_id": 50957709, "comment_id": 88913079, "body": "@Deepayan: <code>np.sum</code> is just like <code>np.max</code>, you can add the <code>keepdims=True</code> argument. Then the division will be able to broadcast."}], "tags": [], "owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "is_accepted": true, "score": 1, "last_activity_date": 1529532231, "creation_date": 1529532231, "answer_id": 50957709, "question_id": 50956747, "link": "https://stackoverflow.com/questions/50956747/repmat-in-python-v-s-matlab/50957709#50957709", "title": "Repmat in Python v/s MATLAB", "body": "<p>In Python/NumPy, explicitly replicating an array to make it match another is not necessary. Dimensions of size 1 (singleton dimensions) are <a href=\"https://docs.scipy.org/doc/numpy/user/basics.broadcasting.html\" rel=\"nofollow noreferrer\">automatically expanded in a process they call \"broadcasting\"</a>.</p>\n\n<p>For example, given</p>\n\n<pre><code>X = np.array([[1,2,3,4,5],[4,5,6,7,8],[7,8,9,10,11]])\n</code></pre>\n\n<p>you can write</p>\n\n<pre><code>X - np.max(X, axis=0)\n</code></pre>\n\n<p>The array returned by <code>np.max</code> has a shape of <code>(5,)</code>, which is compatible with the shape of <code>X</code> (<code>(3, 5)</code>). NumPy aligns the shapes starting at the last dimension, and fills in singleton dimensions at the front if one array has fewer than the other.</p>\n\n<p>However, this process sometimes needs a little bit of help. Because <code>np.max</code> returns an array with fewer dimensions than the input, broadcasting cannot, in general. match up these arrays. For example, <code>X - np.max(X, axis=1)</code> doesn't work.</p>\n\n<p>The best solution is to use the <code>keepdims</code> argument to <code>np.max</code>:</p>\n\n<pre><code>X - np.max(X, axis=1, keepdims=True)\n</code></pre>\n\n<p>The other option is to add singleton dimensions using <code>np.newaxis</code> in indexing:</p>\n\n<pre><code>X - np.max(X, axis=1)[:, np.newaxis]\n</code></pre>\n"}], "owner": {"reputation": 603, "user_id": 9473446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e62e126a3a6ea4f956453c444557b7?s=128&d=identicon&r=PG&f=1", "display_name": "srkdb", "link": "https://stackoverflow.com/users/9473446/srkdb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 0, "accepted_answer_id": 50957709, "answer_count": 1, "score": 1, "last_activity_date": 1529532231, "creation_date": 1529527423, "question_id": 50956747, "link": "https://stackoverflow.com/questions/50956747/repmat-in-python-v-s-matlab", "title": "Repmat in Python v/s MATLAB", "body": "<p>For a given matrix, I'm subtracting the maximum of each row from the row. \nIn MATLAB, I'd do something like </p>\n\n<pre><code>Xm = X - repmat(max(X,[],2), 1, size(X,2));\n</code></pre>\n\n<p>For Python, I've been toying with variations of </p>\n\n<p><code>Xm = X - np.matlib.repmat(np.max(X,axis = 1), 1, len(X[0]))</code> but to no avail! </p>\n\n<p>Where exactly am I missing out? Thanks a lot. </p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 4, "creation_date": 1529527611, "post_id": 50956739, "comment_id": 88910954, "body": "It looks like you want us to write some code for you. While many users are willing to produce code for a coder in distress, they usually only help when the poster has already tried to solve the problem on his own. A good way to show this effort is to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a>. Check the <a href=\"https://stackoverflow.com/tour\">intro tour</a> you were <i>supposed</i> to finish before posting, especially <a href=\"http://stackoverflow.com/help/how-to-ask\">How to Ask</a>."}], "answers": [{"comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1529529198, "post_id": 50956964, "comment_id": 88911612, "body": "@user3483203 Thank you.   Looking for a clean way to name the columns like OP wants."}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 1, "last_activity_date": 1529529725, "last_edit_date": 1529529725, "creation_date": 1529528515, "answer_id": 50956964, "question_id": 50956739, "link": "https://stackoverflow.com/questions/50956739/calculate-the-percentage-contribution-of-a-value-in-a-column-in-python/50956964#50956964", "title": "calculate the percentage contribution of a value in a column in python", "body": "<p>Use <code>value_counts</code> with <code>normalize</code> parameter set to True:</p>\n\n<pre><code>pd.concat([df[i].value_counts(normalize=True).reset_index() for i in df.columns], axis=1)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>  index     item1 index     item2 index     item3\n0     x  0.500000     y  0.500000    z1  0.333333\n1    x2  0.333333    y1  0.333333    z2  0.333333\n2    x1  0.166667    y2  0.166667     z  0.333333\n</code></pre>\n\n<h3>Updated answer with scaling and column naming:</h3>\n\n<pre><code>pd.concat([df[i].value_counts(normalize=True)\n                .mul(100.0)\n                .rename_axis(i)\n                .reset_index(name='%con_'+i)  for i in df.columns], axis=1)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>  item1  %con_item1 item2  %con_item2 item3  %con_item3\n0     x   50.000000     y   50.000000    z1   33.333333\n1    x2   33.333333    y1   33.333333    z2   33.333333\n2    x1   16.666667    y2   16.666667     z   33.333333\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 9927054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3516ea696ded7de6bf64ad07116477ee?s=128&d=identicon&r=PG&f=1", "display_name": "andy", "link": "https://stackoverflow.com/users/9927054/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529529725, "creation_date": 1529527380, "question_id": 50956739, "link": "https://stackoverflow.com/questions/50956739/calculate-the-percentage-contribution-of-a-value-in-a-column-in-python", "title": "calculate the percentage contribution of a value in a column in python", "body": "<p>I have the below data frame </p>\n\n<pre><code> item1  item2    item3    \n  x      y         z    \n  x1     y1        z1   \n  x      y2        z2   \n  x      y         z1\n  x2     y         z         \n  x2     y1        z2     \n</code></pre>\n\n<p>i want to find the percentage contribution of each value in a column to the all value in the column(what is the contribution of x,x1,x2 in item1 same with item2 and item3)</p>\n\n<p>The below must be the result data frame.</p>\n\n<pre><code>item1  %con_item1  item2  %con_item2  item3 %con_item3\nx          50       y        50         z       33.33\nx1         16.66    y1       33.33      z1      33.33\nx2         33.33    y2       16.66      z2      33.33      \n</code></pre>\n"}, {"tags": ["python", "python-3.x", "aubio"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1529527580, "post_id": 50956724, "comment_id": 88910938, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation, as suggested when you created this account.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1529527602, "post_id": 50956724, "comment_id": 88910948, "body": "For debugging this yourself, it would really help to either run in a debugger, or print things out (like <code>print(colordict[key][0], colordict[key][1])</code> so you can see what you&#39;re asking Python to do for you instead of just guessing at it. If you do this, you&#39;ll see that <code>colordict[key]</code> is a string, like <code>&quot;Red&quot;</code>, so <code>colordict[key][0]</code> is a single character, like <code>&quot;R&quot;</code>, and <code>colordict[key][1]</code> is the next character, like <code>&quot;e&quot;</code>. You can&#39;t compare either of those to an array of floats."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1529527660, "post_id": 50956724, "comment_id": 88910978, "body": "I&#39;m not sure what you actually <i>wanted</i> to compare here. Maybe you wanted <code>key[0]</code> and <code>key[1]</code>, which are floats, so they can be compared to arrays of floats? But, even then, the result of the comparison is an array of bools, which you can&#39;t use in an <code>if</code> statement."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1529527888, "post_id": 50956724, "comment_id": 88911086, "body": "As a wild guess: do you want to get back an array of strings, one per sample, where each is <code>Red</code> or <code>Blue</code> depending on whether it&#39;s in the range 0-13.99 or 14-250? (If so, what are you supposed to use for 13.995, or 252?) To do that, you either need to loop over <code>samples</code>, or, better, use vectorized operations instead of an <code>if</code> statement."}, {"owner": {"reputation": 37, "user_id": 9912667, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ONh2mxedMgE/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0neOnORoe2S5Fu4z5y6VO6BrxdGw/mo/photo.jpg?sz=128", "display_name": "Richard Wenzel", "link": "https://stackoverflow.com/users/9912667/richard-wenzel"}, "edited": false, "score": 0, "creation_date": 1529530404, "post_id": 50956724, "comment_id": 88912105, "body": "Yes, that&#39;s exactly what I want to do, how would I loop over samples?"}], "answers": [{"comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 1, "creation_date": 1529528905, "post_id": 50956821, "comment_id": 88911493, "body": "Probably better &quot;string of length 1&quot; (or smth similar) instead of &quot;char&quot; :)"}], "tags": [], "owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "is_accepted": false, "score": 1, "last_activity_date": 1529527758, "creation_date": 1529527758, "answer_id": 50956821, "question_id": 50956724, "link": "https://stackoverflow.com/questions/50956724/typeerror-not-supported-between-instances-of-numpy-ndarray-and-str/50956821#50956821", "title": "TypeError: &#39;&gt;&#39; not supported between instances of &#39;numpy.ndarray&#39; and &#39;str&#39;", "body": "<p><code>samples</code> is a numpy array.\n<code>colordict[key][0]</code> is a char (since <code>colordict[key]</code> is a text like <code>\"Red\"</code>, the <code>[0]</code> will get first char from that string <code>\"R\"</code>)</p>\n\n<p>Your comparision <code>if samples &gt; colordict[key][0] and samples &lt; colordict[key][1]:</code> is comparing numpy array with a char and that fails.</p>\n\n<p>Now, I'm not sure what you really want. if you mean <code>key[0]</code> and <code>key[1]</code> (to get each value from the key separately) then you would need to compare to a single float, not <code>samples</code> (which contain multiple values - it is an array) or maybe iterate over <code>samples</code> to compare?</p>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 9912667, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ONh2mxedMgE/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0neOnORoe2S5Fu4z5y6VO6BrxdGw/mo/photo.jpg?sz=128", "display_name": "Richard Wenzel", "link": "https://stackoverflow.com/users/9912667/richard-wenzel"}, "is_accepted": false, "score": 0, "last_activity_date": 1529586848, "creation_date": 1529586848, "answer_id": 50969499, "question_id": 50956724, "link": "https://stackoverflow.com/questions/50956724/typeerror-not-supported-between-instances-of-numpy-ndarray-and-str/50969499#50969499", "title": "TypeError: &#39;&gt;&#39; not supported between instances of &#39;numpy.ndarray&#39; and &#39;str&#39;", "body": "<pre><code>for index, key in enumerate(colordict):\n    if pitch &gt; key[0] and pitch &lt; key[1]:\n        return colordict[key]\n</code></pre>\n\n<p>Ended up fixing it. Thank you all &lt;3 </p>\n"}], "owner": {"reputation": 37, "user_id": 9912667, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ONh2mxedMgE/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0neOnORoe2S5Fu4z5y6VO6BrxdGw/mo/photo.jpg?sz=128", "display_name": "Richard Wenzel", "link": "https://stackoverflow.com/users/9912667/richard-wenzel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21613, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1596368594, "creation_date": 1529527308, "last_edit_date": 1596368594, "question_id": 50956724, "link": "https://stackoverflow.com/questions/50956724/typeerror-not-supported-between-instances-of-numpy-ndarray-and-str", "title": "TypeError: &#39;&gt;&#39; not supported between instances of &#39;numpy.ndarray&#39; and &#39;str&#39;", "body": "<p>Basic rundown of what I want the program to do:</p>\n<p><strong>Aubio prints the frequency (pitch) and volume (volume) from what's being input from the microphone</strong></p>\n<p><strong>I want to iterate over the dictionary, and based on which frequency is output, print the color matching which key in the dictionary the frequency from samples is being put out</strong></p>\n<p>I keep getting this error:</p>\n<pre><code>Traceback (most recent call last):\nTypeError: '&gt;' not supported between instances of 'numpy.ndarray' and 'str'\n</code></pre>\n<p>Would anyone be able to help me? The code in question is the <strong>for</strong> statement</p>\n<pre><code>import aubio\nimport numpy as num\nimport pyaudio\nimport sys\n\n# Some constants for setting the PyAudio and the\n# Aubio.\nBUFFER_SIZE = 2048\nCHANNELS = 1\nFORMAT = pyaudio.paFloat32\nMETHOD = &quot;default&quot;\nSAMPLE_RATE = 44100\nHOP_SIZE = BUFFER_SIZE//2\nPERIOD_SIZE_IN_FRAME = HOP_SIZE\nindex = 0\n\ndef main(args):\n\n    # Initiating PyAudio object.\n    pA = pyaudio.PyAudio()\n    # Open the microphone stream.\n    mic = pA.open(format=FORMAT, channels=CHANNELS,\n                  rate=SAMPLE_RATE, input=True,\n                  frames_per_buffer=PERIOD_SIZE_IN_FRAME)\n\n    # Initiating Aubio's pitch detection object.\n    pDetection = aubio.pitch(METHOD, BUFFER_SIZE,\n                             HOP_SIZE, SAMPLE_RATE)\n    # Set unit.\n    pDetection.set_unit(&quot;Hz&quot;)\n    # Frequency under -40 dB will considered\n    # as a silence.\n    pDetection.set_silence(-40)\n\n    # Infinite loop!\n    while True:\n\n        # Always listening to the microphone.\n        data = mic.read(PERIOD_SIZE_IN_FRAME)\n        # Convert into number that Aubio understand.\n        samples = num.fromstring(data,\n                                 dtype=aubio.float_type)\n        # Finally get the pitch.\n        pitch = pDetection(samples)[0]\n        # Compute the energy (volume)\n        # of the current frame.\n        volume = num.sum(samples**2)/len(samples)\n        # Format the volume output so it only\n        # displays at most six numbers behind 0.\n        volume = &quot;{:6f}&quot;.format(volume)\n\n        answer = pitch_detection(samples)\n\n        # Finally print the pitch and the volume.\n        print(str(pitch) + &quot; &quot; + str(volume) + (str(answer)))\n\n\ndef pitch_detection(samples):\n    colordict = {\n        (0.0, 13.99): &quot;Red&quot;,\n        (14.00, 250.00): &quot;Blue&quot;,\n    }\n\n    for index, key in enumerate(colordict, start=0):\n        if samples &gt; colordict[key][0] and samples &lt; colordict[key][1]:\n            return key\n        return &quot;Not Found&quot;\n\n\nif __name__ == &quot;__main__&quot;:\n    main(sys.argv)\n</code></pre>\n"}, {"tags": ["python", "list", "pandas", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 2291, "user_id": 4154548, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-BNzoB40ZqD0/AAAAAAAAAAI/AAAAAAAAAA8/3muojOPIBTA/photo.jpg?sz=128", "display_name": "Thomas Matthew", "link": "https://stackoverflow.com/users/4154548/thomas-matthew"}, "edited": false, "score": 1, "creation_date": 1529527671, "post_id": 50956732, "comment_id": 88910989, "body": "It&#39;s interesting that this isn&#39;t default behavior in pandas, but than again I&#39;ve used pandas for almost 3 years and just now needed this functionality.  Thanks for drawing my attention back to <code>itertools</code>"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 4, "last_activity_date": 1529527355, "creation_date": 1529527355, "answer_id": 50956732, "question_id": 50956686, "link": "https://stackoverflow.com/questions/50956686/recycling-in-pandas-dataframe/50956732#50956732", "title": "Recycling in Pandas Dataframe", "body": "<p>Kinda, but it isn't as straightforward as it is in R.</p>\n\n<pre><code>from itertools import cycle, islice\ncyc = cycle(['a','b','c'])\n\npd.Series(list(islice(cyc, 0, 7)))\n\n0    a\n1    b\n2    c\n3    a\n4    b\n5    c\n6    a\ndtype: object\n</code></pre>\n\n<p>First, create an infinite iterator using <code>itertools.cycle</code>. Then, slice out a portion of this infinite iterator to retrieve just the number of elements you want, using <code>itertools.islice</code>.</p>\n\n<p>Change <code>7</code> to as small or as large as you want your Series to be.</p>\n"}, {"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 7, "last_activity_date": 1529527529, "creation_date": 1529527529, "answer_id": 50956773, "question_id": 50956686, "link": "https://stackoverflow.com/questions/50956686/recycling-in-pandas-dataframe/50956773#50956773", "title": "Recycling in Pandas Dataframe", "body": "<p>With <a href=\"https://docs.scipy.org/doc/numpy-1.14.0/reference/generated/numpy.resize.html\" rel=\"noreferrer\"><code>numpy.resize</code></a> -</p>\n\n<pre><code>In [199]: a = ['a','b','c']\n\nIn [200]: np.resize(a,7)\nOut[200]: array(['a', 'b', 'c', 'a', 'b', 'c', 'a'], dtype='|S1')\n</code></pre>\n"}], "owner": {"reputation": 2291, "user_id": 4154548, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-BNzoB40ZqD0/AAAAAAAAAAI/AAAAAAAAAA8/3muojOPIBTA/photo.jpg?sz=128", "display_name": "Thomas Matthew", "link": "https://stackoverflow.com/users/4154548/thomas-matthew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 0, "accepted_answer_id": 50956773, "answer_count": 2, "score": 8, "last_activity_date": 1529565017, "creation_date": 1529527108, "last_edit_date": 1529565017, "question_id": 50956686, "link": "https://stackoverflow.com/questions/50956686/recycling-in-pandas-dataframe", "title": "Recycling in Pandas Dataframe", "body": "<p>When filling an array with values from a shorter array in R, R will \"recycle\" the elements in the shorter array.  For example, setting an array of length 7 <code>[ , , , , , , ]</code> with the array <code>['a','b','c']</code> will give <code>['a','b','c','a','b','c','a']</code>.</p>\n\n<p>Is there a built-in method to fill a pandas column (or numpy array) using a similar style of recycling?</p>\n"}, {"tags": ["python", "python-3.x", "python-3.6", "atom-editor", "psycopg2"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 9969696, "user_type": "registered", "profile_image": "https://graph.facebook.com/1849990348357369/picture?type=large", "display_name": "Jesse Meiring", "link": "https://stackoverflow.com/users/9969696/jesse-meiring"}, "edited": false, "score": 0, "creation_date": 1529671717, "post_id": 50981062, "comment_id": 88971138, "body": "Thank you for the insight. I revised my path to use double back slashes as it was interpreting the \\a as unicode. It now appears my install of psycopg2 might have an issue:  <code>Traceback (most recent call last):   File &quot;C:\\Users\\J.Meiring\\Documents\\Py\\Database\\script2.py&quot;, line 4, in &lt;module&gt;     import psycopg2   File &quot;c:\\users\\j.meiring\\appdata\\local\\programs\\python\\python36-3&zwnj;&#8203;2\\lib\\site-packages\\&zwnj;&#8203;psycopg2\\__init__.py&zwnj;&#8203;&quot;, line 50, in &lt;module&gt;     from psycopg2._psycopg import (                     # noqa ModuleNotFoundError: No module named &#39;psycopg2._psycopg&#39; </code>"}], "tags": [], "owner": {"reputation": 36635, "user_id": 2449905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zBnOo.jpg?s=128&g=1", "display_name": "Dan Lowe", "link": "https://stackoverflow.com/users/2449905/dan-lowe"}, "is_accepted": false, "score": 0, "last_activity_date": 1529644444, "creation_date": 1529644444, "answer_id": 50981062, "question_id": 50956659, "link": "https://stackoverflow.com/questions/50956659/modulenotfounderror-on-psycopg2-only-on-compiled-script/50981062#50981062", "title": "ModuleNotFoundError on psycopg2 only on compiled script", "body": "<p>First you are showing this in your code, adding a path to <code>sys.path</code>:</p>\n\n<pre><code>sys.path.append('c:\\\\users\\j.meiring\\appdata\\local\\programs\\python\\python36-32\\lib\\site-packages')\n</code></pre>\n\n<p>Your error appears differently, however. I've added line breaks to the path it provides, for readability.</p>\n\n<pre><code>['C:\\\\Users\\\\J.Meiring\\\\Documents\\\\Py\\\\Database',\n 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\Shared\\\\Python36_64\\\\python36.zip',\n 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\Shared\\\\Python36_64\\\\DLLs',\n 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\Shared\\\\Python36_64\\\\lib',\n 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\Shared\\\\Python36_64',\n 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\Shared\\\\Python36_64\\\\lib\\\\site-packages',\n 'c:\\\\users\\\\j.meiring\\x07ppdata\\\\local\\\\programs\\\\python\\\\python36-32\\\\lib\\\\site-packages']\n</code></pre>\n\n<p>Note in the last line this part of the path...</p>\n\n<pre><code>'c:\\\\users\\\\j.meiring\\x07ppdata\\\\local......\n</code></pre>\n\n<p>Here instead of <code>appdata</code> you see <code>x07ppdata</code>. That may be 0x07, or the BELL character (a control-character, not typically visible). It may be this character is some kind of unicode embed in your file and you haven't noticed because it looks correct when it is rendered? In any case, this <code>x07ppdata</code> directory does not exist, therefore that path doesn't help.</p>\n"}], "owner": {"reputation": 31, "user_id": 9969696, "user_type": "registered", "profile_image": "https://graph.facebook.com/1849990348357369/picture?type=large", "display_name": "Jesse Meiring", "link": "https://stackoverflow.com/users/9969696/jesse-meiring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1529662618, "creation_date": 1529526981, "last_edit_date": 1529662618, "question_id": 50956659, "link": "https://stackoverflow.com/questions/50956659/modulenotfounderror-on-psycopg2-only-on-compiled-script", "title": "ModuleNotFoundError on psycopg2 only on compiled script", "body": "<p>I am currently working through a tutorial on database entry using psycopg2 but I can't seem to get my script to find it. Used pip install and my script is written in Atom. When I import psycopg2 in the command prompt it works fine but my Atom script wont run:</p>\n\n<p><strong>ATOM SCRIPT</strong></p>\n\n<pre><code>import sys\nsys.path.append('c:\\\\users\\j.meiring\\appdata\\local\\programs\\python\\python36-32\\lib\\site-packages')\nprint(sys.path)\nimport psycopg2\n\ndef create_table():\n    conn=psycopg2.connect(\"dbname='database1' user='postgres' password='postgres123' host='localhost' port='5432'\")\n    cur=conn.cursor()\n    cur.execute(\"CREATE TABLE IF NOT EXISTS store (item TEXT, quantity INTEGER, price REAL)\")\n    conn.commit()\n    conn.close()\n\ndef insert(item,quantity,price):\n    conn=psycopg2.connect(\"lite.db\")\n    cur=conn.cursor()\n    cur.execute(\"INSERT INTO store VALUES (?,?,?)\",(item,quantity,price))\n    conn.commit()\n    conn.close()\n\ndef view():\n    conn=psycopg2.connect(\"lite.db\")\n    cur=conn.cursor()\n    cur.execute(\"SELECT * FROM store\")\n    rows=cur.fetchall()\n    conn.close()\n    return rows\n\ndef delete(item):\n    conn=psycopg2.connect(\"lite.db\")\n    cur=conn.cursor()\n    cur.execute(\"DELETE FROM store WHERE item=?\",(item,))\n    conn.commit()\n    conn.close()\n\ndef update(quantity,price,item):\n    conn=psycopg2.connect(\"lite.db\")\n    cur=conn.cursor()\n    cur.execute(\"UPDATE store SET quantity=?, price=? WHERE item=?\",(quantity,price,item,))\n    conn.commit()\n    conn.close()\n\ncreate_table()\n#print(view())\n</code></pre>\n\n<p><strong>CMD OUTPUT</strong></p>\n\n<pre><code>C:\\Users\\J.Meiring\\Documents\\Py\\Database&gt;script2.py\n['C:\\\\Users\\\\J.Meiring\\\\Documents\\\\Py\\\\Database', 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\Shared\\\\Python36_64\\\\python36.zip', 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\Shared\\\\Python36_64\\\\DLLs', 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\Shared\\\\Python36_64\\\\lib', 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\Shared\\\\Python36_64', 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\Shared\\\\Python36_64\\\\lib\\\\site-packages', 'c:\\\\users\\\\j.meiring\\x07ppdata\\\\local\\\\programs\\\\python\\\\python36-32\\\\lib\\\\site-packages']\nTraceback (most recent call last):\n  File \"C:\\Users\\J.Meiring\\Documents\\Py\\Database\\script2.py\", line 4, in &lt;module&gt;\n    import psycopg2\nModuleNotFoundError: No module named 'psycopg2'\n\nC:\\Users\\J.Meiring\\Documents\\Py\\Database&gt;python\nPython 3.6.5 (v3.6.5:f59c0932b4, Mar 28 2018, 16:07:46) [MSC v.1900 32 bit (Intel)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import sys\n&gt;&gt;&gt; print(\"'c:\\\\users\\j.meiring\\appdata\\local\\programs\\python\\python36-32\\lib\\site-packages' in sys.path\")\n'c:\\users\\j.meiringppdata\\local\\programs\\python\\python36-32\\lib\\site-packages' in sys.path\n&gt;&gt;&gt; print('c:\\\\users\\j.meiring\\appdata\\local\\programs\\python\\python36-32\\lib\\site-packages' in sys.path)\nFalse\n&gt;&gt;&gt; sys.path.append('c:\\\\users\\j.meiring\\appdata\\local\\programs\\python\\python36-32\\lib\\site-packages')\n&gt;&gt;&gt; print('c:\\\\users\\j.meiring\\appdata\\local\\programs\\python\\python36-32\\lib\\site-packages' in sys.path)\nTrue\n&gt;&gt;&gt; import psycopg2\n&gt;&gt;&gt;\n</code></pre>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup"], "answers": [{"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 0, "last_activity_date": 1529529491, "creation_date": 1529529491, "answer_id": 50957164, "question_id": 50956573, "link": "https://stackoverflow.com/questions/50956573/how-to-move-in-and-out-of-a-web-page-when-web-scraping/50957164#50957164", "title": "How to Move in and out of a Web page when Web scraping", "body": "<p>You can iterate over all the letters in the alphabet, form the proper url with each letter, and scrap the resulting contents:</p>\n\n<pre><code>import string\nimport requests, contextlib, re\nfrom bs4 import BeautifulSoup as soup\nfrom collections import namedtuple\nfilm = namedtuple('film', ['title', 'tags', 'rating', 'extras', 'personel', 'ratings'])\ndef get_film_data(url):\n   current_page = soup(requests.get(url).text, 'html.parser')\n   title = [i for i in current_page.find_all('a') if 'title' in getattr(i, 'attrs', {})][0].text\n   tags = current_page.find('div', {'class':'genre'}).text.split(', ')\n   rating = current_page.find('span', {'class':'ratingsblock'}).text \n   data = [re.findall('[\\w\\W]+(?=:)|(?&lt;=:\\s)[\\w\\W]+', i.text) for i in current_page.find_all('p') if getattr(i, 'strong', None)][:7]\n   new_data = [{a:b[0]} if b else {a:[i.text for i in current_page.find_all('p') if 'strong' not in i.attrs][6]} for a, *b in data] \n   director_and_cast = [[re.findall('[a-zA-Z]+', i['href'])[0].capitalize(), i.text] for i in current_page.find_all('a') if re.findall('View all titles \\w+', i.attrs.get('title', ''))]\n   ratings = list(filter(lambda x:re.findall('\\d', x), {i['title'] for i in current_page.find_all('img', {'class':'starrating'})}))\n   return film(title, tags, rating, new_data, director_and_cast, ratings)\n\n@contextlib.contextmanager\ndef get_page_films(page='a'):\n  data = soup(requests.get('https://usa.newonnetflix.info/catalog/a2z/all/{}'.format(page)).text, 'html.parser')\n  links = [i['href'] for i in data.find_all('a', {'class':'infopop'})]\n  yield list(map(lambda x:get_film_data('https://usa.newonnetflix.info{}/s'.format(x)), links))\n\nfor i in string.ascii_lowercase:\n  with get_page_films(i) as results:\n    print(results)\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 8871023, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cdad8977851755417a7cb23fe2b91348?s=128&d=identicon&r=PG&f=1", "display_name": "Ezzy", "link": "https://stackoverflow.com/users/8871023/ezzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1612602204, "creation_date": 1529526644, "last_edit_date": 1612602204, "question_id": 50956573, "link": "https://stackoverflow.com/questions/50956573/how-to-move-in-and-out-of-a-web-page-when-web-scraping", "title": "How to Move in and out of a Web page when Web scraping", "body": "<p>This is the URL that has all of the movies that start with the letter 'A'. i want to go into each movie, collect the data, go back and then iterate through the list until there are no more movies that start with the letter 'A' and then move on to the next web page where all the movies start with 'B' and so on until i get to the end of the alphabet. =  <a href=\"https://usa.newonnetflix.info/catalog/a2z/all/a\" rel=\"nofollow noreferrer\">https://usa.newonnetflix.info/catalog/a2z/all/a</a> </p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport requests\nimport pandas as pd\n\nr = requests.get('https://usa.newonnetflix.info/catalog/a2z/all/a')\nsoup = BeautifulSoup(r.text, 'html.parser')\n</code></pre>\n\n<p>The below code is getting all the data i need from the url that is specific to each movie. So here i have clicked into a movie from the previous url and this is where i will scrape all the data i want. = <a href=\"https://usa.newonnetflix.info/info/70290905/s\" rel=\"nofollow noreferrer\">https://usa.newonnetflix.info/info/70290905/s</a></p>\n\n<pre><code>title = soup.find_all('article',attrs={'class':'post infopage'})\n\nfor first in title: \n    movie = first.find('a')['title'].split(':')[0]\n    category = first.find(attrs={'class':'genre'}).text\n    rating = first.find(attrs={'class':'ratingsblock'}).text\n    year = first.find('strong', text='Year:').next_sibling[1:]\n    duration = first.find('strong', text='Duration:').next_sibling[1:]\n    audio = first.find('strong', text='Audio:').next_sibling[1:]\n    subtitles = first.find('strong', text='Subtitles:').next_sibling[1:]\n    netflix = first.find_all(attrs={'class':'starrating'})[1]['title'][15:]\n    imdb = first.find_all(attrs={'class':'starrating'})[7]['title'][12:]\n    movieDB = first.find_all(attrs={'class':'starrating'})[13]['title'][26:]\n    avgRating = first.find_all(attrs={'class':'starrating'})[19]['title'][15:]\n</code></pre>\n\n<p>I am unsure how to go into a new url and back out to the previous url to scrape the data for all movies.</p>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "comments": [{"owner": {"reputation": 8523, "user_id": 4819376, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/744923bfd6e28c59c787a3efaeec02ca?s=128&d=identicon&r=PG", "display_name": "rpanai", "link": "https://stackoverflow.com/users/4819376/rpanai"}, "edited": false, "score": 0, "creation_date": 1529527308, "post_id": 50956558, "comment_id": 88910830, "body": "Hi, please share your <code>df.to_dict()</code> so it will be easier to help you. It is not clear to me what do you want to obtain: do you want to write the date the case is closed on last_event? Or do you want to do so just for the last attorney who received the case?"}, {"owner": {"reputation": 452, "user_id": 702383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FIFS.jpg?s=128&g=1", "display_name": "RCA", "link": "https://stackoverflow.com/users/702383/rca"}, "reply_to_user": {"reputation": 8523, "user_id": 4819376, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/744923bfd6e28c59c787a3efaeec02ca?s=128&d=identicon&r=PG", "display_name": "rpanai", "link": "https://stackoverflow.com/users/4819376/rpanai"}, "edited": false, "score": 1, "creation_date": 1529528071, "post_id": 50956558, "comment_id": 88911163, "body": "@user32185 <code>to_dict</code> posted. The final <code>last_event</code> for a group should be the <code>cas_closed_date</code> for that group (which is the second option you wrote, I believe)."}], "answers": [{"comments": [{"owner": {"reputation": 452, "user_id": 702383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FIFS.jpg?s=128&g=1", "display_name": "RCA", "link": "https://stackoverflow.com/users/702383/rca"}, "edited": false, "score": 0, "creation_date": 1529529197, "post_id": 50956826, "comment_id": 88911611, "body": "Thanks! I knew vaguely that&#39;s what it was doing, but your answer helped me think through how to create a flag."}], "tags": [], "owner": {"reputation": 56, "user_id": 7292978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7c95a465535a5aaf17baca959847ebb?s=128&d=identicon&r=PG&f=1", "display_name": "t0bi", "link": "https://stackoverflow.com/users/7292978/t0bi"}, "is_accepted": false, "score": 1, "last_activity_date": 1529527800, "creation_date": 1529527800, "answer_id": 50956826, "question_id": 50956558, "link": "https://stackoverflow.com/questions/50956558/fill-one-column-of-last-item-in-group-with-another-columns-value/50956826#50956826", "title": "Fill one column of last item in group with another column&#39;s value", "body": "<p>The <code>.transform</code> operation passes all columns for each group as a one dimensional Series to the function, while the <code>.apply</code> operation passes all columns for each group as a DataFrame to the function. So, <code>.transform</code> works on one Series (or column) at a time and <code>.apply</code> works for an entire DataFrame (or all columns). Hope this helps.</p>\n"}, {"comments": [{"owner": {"reputation": 8523, "user_id": 4819376, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/744923bfd6e28c59c787a3efaeec02ca?s=128&d=identicon&r=PG", "display_name": "rpanai", "link": "https://stackoverflow.com/users/4819376/rpanai"}, "edited": false, "score": 0, "creation_date": 1529532813, "post_id": 50957085, "comment_id": 88912983, "body": "do you mind to test this solution vs my last one with your df to see which one is faster on the real case? Then I think this condition <code>df[&#39;last_unassigned&#39;] != df[&#39;cas_closed_date&#39;]</code> is redundant. I mean in case these values are the same it doesn&#39;t harm update <code>df[&quot;last_event&quot;]</code> with itself."}], "tags": [], "owner": {"reputation": 452, "user_id": 702383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FIFS.jpg?s=128&g=1", "display_name": "RCA", "link": "https://stackoverflow.com/users/702383/rca"}, "is_accepted": false, "score": 0, "last_activity_date": 1529529097, "creation_date": 1529529097, "answer_id": 50957085, "question_id": 50956558, "link": "https://stackoverflow.com/questions/50956558/fill-one-column-of-last-item-in-group-with-another-columns-value/50957085#50957085", "title": "Fill one column of last item in group with another column&#39;s value", "body": "<p>I ended up doing a combination of <code>transform</code> and just plain indexing.</p>\n\n<pre><code>df = df.sort_values(['case_nb', 'last_event'])\ndf['last_unassigned'] = df.groupby('case_nb')['last_event'].transform('last')\ndf.loc[(df['last_event'] == df['last_unassigned'])\n        &amp; (df['last_unassigned'] != df['cas_closed_date']), 'last_event'] = df['cas_closed_date']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 452, "user_id": 702383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FIFS.jpg?s=128&g=1", "display_name": "RCA", "link": "https://stackoverflow.com/users/702383/rca"}, "edited": false, "score": 0, "creation_date": 1529590295, "post_id": 50957115, "comment_id": 88937675, "body": "With <code>%%timeit%%, your </code>np.where` solution took <code>1.45 ms &#177; 37.3 &#181;s per loop (mean &#177; std. dev. of 7 runs, 1000 loops each)</code>, and my <code>loc</code> solution took <code>2.14 ms &#177; 72.2 &#181;s per loop (mean &#177; std. dev. of 7 runs, 1000 loops each)</code>. So I would say <code>np.where</code> is the clear winner."}, {"owner": {"reputation": 8523, "user_id": 4819376, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/744923bfd6e28c59c787a3efaeec02ca?s=128&d=identicon&r=PG", "display_name": "rpanai", "link": "https://stackoverflow.com/users/4819376/rpanai"}, "reply_to_user": {"reputation": 452, "user_id": 702383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FIFS.jpg?s=128&g=1", "display_name": "RCA", "link": "https://stackoverflow.com/users/702383/rca"}, "edited": false, "score": 0, "creation_date": 1529591730, "post_id": 50957115, "comment_id": 88938808, "body": "@RCA Did you try on your real case <code>df</code>?"}], "tags": [], "owner": {"reputation": 8523, "user_id": 4819376, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/744923bfd6e28c59c787a3efaeec02ca?s=128&d=identicon&r=PG", "display_name": "rpanai", "link": "https://stackoverflow.com/users/4819376/rpanai"}, "is_accepted": true, "score": 1, "last_activity_date": 1529531880, "last_edit_date": 1529531880, "creation_date": 1529529211, "answer_id": 50957115, "question_id": 50956558, "link": "https://stackoverflow.com/questions/50956558/fill-one-column-of-last-item-in-group-with-another-columns-value/50957115#50957115", "title": "Fill one column of last item in group with another column&#39;s value", "body": "<p>In the case the same <code>case_nb</code> is never assigned on the same day to two different attorney you can try this solution.</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\n\ndf = pd.DataFrame({'assigned': {0: pd.Timestamp('2015-07-02'), 1: '2015-09-10',\n                                2: '2016-03-24', 3: '2013-10-21', 4: '2013-09-13',\n                                5: '2018-03-31'},\n                    'attorney': {0: 'A', 1: 'B', 2: 'C', 3: 'D', 4: 'C', 5: 'F'},\n                    'cas_closed_date': {0: pd.Timestamp('2015-07-02'), 1: '2015-09-10',\n                                        2: '2016-03-24', 3: '2018-06-07', 4: '2018-06-07',\n                                        5: '2018-06-07'},\n                    'case_nb': {0: 1, 1: 2, 2: 3, 3: 4, 4: 4, 5: 4},\n                    'last_event': {0: pd.Timestamp('2015-07-02'), 1: '2015-09-10',\n                                   2: '2016-03-24', 3: '2014-02-06', 4: '2013-09-13',\n                                   5: '2018-04-05'}})\n\nout = df.groupby(\"case_nb\")[\"assigned\"].max().reset_index()\nout[\"last\"] = True\ndf = pd.merge(df, out, how=\"left\", on= [\"case_nb\", \"assigned\"])\ndf[\"last_event\"] = np.where(df[\"last\"] == True, df[\"cas_closed_date\"], df[\"last_event\"])\ndel df[\"last\"], out\n</code></pre>\n\n<p>Probably there is a more elegant solution but at least this is vectorial (see <code>np.where</code>) and don't use <code>apply</code>. <a href=\"https://pandas.pydata.org/pandas-docs/version/0.22.0/enhancingperf.html\" rel=\"nofollow noreferrer\">pandas performaces</a>.</p>\n\n<p><strong>EDIT</strong> In case you want to use <code>transform</code> there is this option which seems to me to be the fastest solution.</p>\n\n<pre><code>df[\"last_assigned\"] = df.groupby(\"case_nb\")[\"assigned\"].transform(\"max\")\ndf[\"last_event\"] = np.where(df[\"assigned\"]==df[\"last_assigned\"], \n                            df[\"cas_closed_date\"],\n                            df[\"last_event\"])\ndel df[\"last_assigned\"]\n</code></pre>\n"}], "owner": {"reputation": 452, "user_id": 702383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FIFS.jpg?s=128&g=1", "display_name": "RCA", "link": "https://stackoverflow.com/users/702383/rca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 50957115, "answer_count": 3, "score": 1, "last_activity_date": 1529531880, "creation_date": 1529526549, "last_edit_date": 1529527974, "question_id": 50956558, "link": "https://stackoverflow.com/questions/50956558/fill-one-column-of-last-item-in-group-with-another-columns-value", "title": "Fill one column of last item in group with another column&#39;s value", "body": "<p>I have a dataset of assignments per case. I'm trying to fill the last <code>unassigned</code> from each case with the <code>case_closed</code> date.</p>\n\n<pre><code>case_nb   attorney      cas_closed_date assigned    last_event\n1         A             2015-07-02      2015-07-02  2015-07-02\n2         B             2015-09-10      2015-09-10  2015-09-10\n3         C             2016-03-24      2016-03-24  2016-03-24\n4         D             2018-06-07      2013-10-21  2014-02-06\n4         C             2018-06-07      2013-09-13  2013-09-13\n4         F             2018-06-07      2018-03-31  2018-04-05\n</code></pre>\n\n<p>(For replication: </p>\n\n<pre><code>df = pd.DataFrame({'assigned': {0: pd.Timestamp('2015-07-02'), 1: '2015-09-10', 2: '2016-03-24', 3: '2013-10-21', 4: '2013-09-13', 5: '2018-03-31'},\n                    'attorney': {0: 'A', 1: 'B', 2: 'C', 3: 'D', 4: 'C', 5: 'F'},\n                    'cas_closed_date': {0: pd.Timestamp('2015-07-02'), 1: '2015-09-10', 2: '2016-03-24', 3: '2018-06-07', 4: '2018-06-07', 5: '2018-06-07'},\n                    'case_nb': {0: 1, 1: 2, 2: 3, 3: 4, 4: 4, 5: 4},\n                    'last_event': {0: pd.Timestamp('2015-07-02'), 1: '2015-09-10', 2: '2016-03-24', 3: '2014-02-06', 4: '2013-09-13', 5: '2018-04-05'}}\n</code></pre>\n\n<p>)</p>\n\n<p>My dataset includes the case number, attorney assigned, the case closed date, the date the attorney was assigned, and the last event the attorney appeared on. For the above example, I'd want the last line to be</p>\n\n<pre><code>4         F             2018-06-07      2018-03-31  2018-06-07\n</code></pre>\n\n<p>I've seen a few ways of filling in NAs based on data in the same column, such as <a href=\"https://stackoverflow.com/questions/19966018/pandas-filling-missing-values-by-mean-in-each-group?noredirect=1&amp;lq=1\">this question</a>. But these ways use <code>transform</code>, which I can't get to use multiple columns.</p>\n\n<p>What I have so far works with <code>apply</code>, but not <code>transform</code>:</p>\n\n<pre><code>def fixdate(gp):\n    last_unasgn = gp.iloc[-1]['last_event']\n    if gp.iloc[-1]['cas_closed_date'] &gt; last_unasgn:\n        return gp.iloc[-1]['cas_closed_date']\n    else:\n       return last_unasgn\n\nasmt.groupby('evt_file_number').apply(lambda x: fixdate(x))\n&gt; 4  2018-06-07\n</code></pre>\n\n<p>Is there a way to use <code>transform</code>? If not, what's the best way to use that aggregate data to fill in my original dataset?</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 5, "creation_date": 1529527290, "post_id": 50956542, "comment_id": 88910823, "body": "Strides for the slice is (8000,8), same as for the original.  Strides for the copy is (400,8).  So the jump from one row to the next is much smaller.  While it&#39;s searching the same number of elements, the <code>copy</code> layout is more compact, and presumably faster to traverse for some combination of paging and caching factors."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1529527707, "post_id": 50956542, "comment_id": 88911005, "body": "@hpaulj I speak from ignorance on this but how is that overhead avoided when making a copy of the values?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1529529214, "post_id": 50956542, "comment_id": 88911618, "body": "It&#39;s only incurred once (instead of multiple times), but even comparing <code>arr[:, 25:75].copy() == 5</code> and <code>arr[:, 25:75] == 5</code>, the copy wins, and it really shouldn&#39;t with a good implementation. The performance impact of multidimensional arrays and noncontiguous arrays is just really weird with NumPy, and I&#39;ve always wanted to get a good enough understanding of how all the layers of indirection and buffering fit together to fully understand it."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1529529683, "post_id": 50956542, "comment_id": 88911800, "body": "@user2357112 if you and hpaulj can&#39;t give a definitive answer on this then I assume this question will remain in limbo. In any case, you&#39;ve both given me assurance that I&#39;m not going mad that this result is not intuitive, thanks."}], "answers": [{"comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1529568913, "post_id": 50958795, "comment_id": 88923777, "body": "Thanks for these pointers, I will have to take a bit of time to get my head around exactly what&#39;s going on there. Under &quot;Strided ufunc evaluation has significant overhead&quot; it says that this can be skipped with contiguous arrays, and my array is C contiguous so I&#39;m not sure that applies here"}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1529570116, "post_id": 50958795, "comment_id": 88924471, "body": "@roganjosh To be honest I just assumed that because of user2357112&#39;s post. I wouldn&#39;t rule out a similar effect happening at where even though it doesn&#39;t seem to be a proper ufunc."}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1529570390, "post_id": 50958795, "comment_id": 88924626, "body": "@roganjosh Re the contiguity: No, that&#39;s very important: once you slice any but the zeroth dimension the resulting array is no longer contiguous."}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1529572030, "post_id": 50958795, "comment_id": 88925650, "body": "@roganjosh Perhaps your intuition is right and only your terminology is off: consistent strides you will get, but contiguous means more than that, it also means no gaps. Obviously, anything you slice away will leave gaps."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1529572581, "post_id": 50958795, "comment_id": 88925959, "body": "Yes, I misunderstood your clarification sorry. I assumed that you were saying that by taking the slice rather than applying to the whole array, I was losing the advantage of the underlying array being contiguous and was hitting some overhead that wasn&#39;t as trivial as I imagined. This all just points to me needing to get better at understanding C - I&#39;ll stop pestering you now :)"}], "tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": true, "score": 5, "last_activity_date": 1529541585, "last_edit_date": 1529541585, "creation_date": 1529541184, "answer_id": 50958795, "question_id": 50956542, "link": "https://stackoverflow.com/questions/50956542/why-is-np-where-faster-on-copies-of-array-slices-rather-than-views-on-the-orig/50958795#50958795", "title": "Why is np.where() faster on copies of array slices rather than views on the original array?", "body": "<p>Here are a few source snippets that at least partially explain the observation. I'm not looking into <code>where</code> since the difference appears to be created before. Instead I'm looking at <code>ufuncs</code> in general.</p>\n\n<h2>Basic functioning of ufuncs</h2>\n\n<p>Ignoring for the moment some special casing ufuncs are computed by a potentially optimized innermost 1D loop inside an outer loop that covers the other dimensions.</p>\n\n<p>The outer loop is comparatively expensive, it uses a numpy <code>nditer</code>, so has to set this up and for each iteration call <code>iternext</code> which is a function pointer, so no inlining.</p>\n\n<p>By comparison, the inner loop is a simple <code>C</code> loop.</p>\n\n<h2>Strided ufunc evaluation has significant overhead</h2>\n\n<p>from numpy/core/src/private/lowlevel_strided_loops.h which is included by numpy/core/src/umath/ufunc_object.c</p>\n\n<pre><code>/*\n *            TRIVIAL ITERATION\n *\n * In some cases when the iteration order isn't important, iteration over\n * arrays is trivial.  This is the case when:\n *   * The array has 0 or 1 dimensions.\n *   * The array is C or Fortran contiguous.\n * Use of an iterator can be skipped when this occurs.  These macros assist\n * in detecting and taking advantage of the situation.  Note that it may\n * be worthwhile to further check if the stride is a contiguous stride\n * and take advantage of that.\n</code></pre>\n\n<p>So, we see that a <code>ufunc</code> with contiguous arguments can be evaluated by a single call to the fast inner loop, completely bypassing the outer loop.</p>\n\n<p>To appreciate the difference in complexity and overhead have a look at functions <code>trivial_two/three_operand_loop</code> vs <code>iterator_loop</code> in numpy/core/src/umath/ufunc_object.c and all the <code>npyiter_iternext_*</code> functions in numpy/core/src/multiarray/nditer_templ.c</p>\n\n<h2>Strided ufunc eval is more expensive than strided copy</h2>\n\n<p>from the autogenerated numpy/core/src/multiarray/lowlevel_strided_loops.c</p>\n\n<pre><code>/*\n * This file contains low-level loops for copying and byte-swapping\n * strided data.\n *\n</code></pre>\n\n<p>This file is almost a quarter million lines.</p>\n\n<p>By comparison the also autogenerated file numpy/core/src/umath/loops.c which provides ufunc innermost loops is a measly 15'000 lines.</p>\n\n<p>This in itself suggests that copying may be more optimized than ufunc evaluation.</p>\n\n<p>The relevant bit here are macros</p>\n\n<pre><code>/* Start raw iteration */\n#define NPY_RAW_ITER_START(idim, ndim, coord, shape) \\\n        memset((coord), 0, (ndim) * sizeof(coord[0])); \\\n        do {\n\n[...]\n\n/* Increment to the next n-dimensional coordinate for two raw arrays */\n#define NPY_RAW_ITER_TWO_NEXT(idim, ndim, coord, shape, \\\n                              dataA, stridesA, dataB, stridesB) \\\n            for ((idim) = 1; (idim) &lt; (ndim); ++(idim)) { \\\n                if (++(coord)[idim] == (shape)[idim]) { \\\n                    (coord)[idim] = 0; \\\n                    (dataA) -= ((shape)[idim] - 1) * (stridesA)[idim]; \\\n                    (dataB) -= ((shape)[idim] - 1) * (stridesB)[idim]; \\\n                } \\\n                else { \\\n                    (dataA) += (stridesA)[idim]; \\\n                    (dataB) += (stridesB)[idim]; \\\n                    break; \\\n                } \\\n            } \\\n        } while ((idim) &lt; (ndim))\n</code></pre>\n\n<p>which are used by function <code>raw_array_assign_array</code> in numpy/core/src/multiarray/array_assign_array.c which does the actual copying for the Python <code>ndarray.copy</code> method.</p>\n\n<p>We can see that the overhead of \"raw iteration\" is rather modest compared to \"full iteration\" as used by ufuncs.</p>\n"}], "owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 462, "favorite_count": 1, "accepted_answer_id": 50958795, "answer_count": 1, "score": 4, "last_activity_date": 1529541585, "creation_date": 1529526490, "last_edit_date": 1529528932, "question_id": 50956542, "link": "https://stackoverflow.com/questions/50956542/why-is-np-where-faster-on-copies-of-array-slices-rather-than-views-on-the-orig", "title": "Why is np.where() faster on copies of array slices rather than views on the original array?", "body": "<p>I was profiling some of my code and found a result that surprised me with <code>np.where()</code>. I wanted to use <code>where()</code> on a slice of my array (knowing that a good portion of the 2D array was irrelevant for my search) and found it to be a bottleneck in my code. As a test, I created a new 2D array as a copy of that slice and tested the speed of <code>where()</code>. It turned out that it ran appreciably faster. In my actual case, the speed increase was really significant, but I think this test code still demonstrates my findings:</p>\n\n<pre><code>import numpy as np\n\ndef where_on_view(arr):\n    new_arr = np.where(arr[:, 25:75] == 5, arr[:, 25:75], np.NaN)\n\ndef where_on_copy(arr):\n    copied_arr = arr[:, 25:75].copy()\n    new_arr = np.where(copied_arr == 5, copied_arr, np.NaN)\n\narr = np.random.choice(np.arange(10), 1000000).reshape(1000, 1000)\n</code></pre>\n\n<p>And the <code>timeit</code> results:</p>\n\n<pre><code>%timeit where_on_view(arr)\n398 \u00b5s \u00b1 2.82 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n%timeit where_on_copy(arr)\n295 \u00b5s \u00b1 6.07 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n</code></pre>\n\n<p>Since both methods return a new array, I'm unclear on how taking a full copy of the slice beforehand is able to speed up <code>np.where()</code> to this degree. I've also done a couple of sanity checks that confirm:</p>\n\n<ol>\n<li>They both return the same result in this case.</li>\n<li><code>where()</code> search is actually restricted to the slice and not checking the whole array then filtering the output.</li>\n</ol>\n\n<p>Here:</p>\n\n<pre><code># Sanity check that they do give the same output\n\ntest_arr = np.random.choice(np.arange(3), 25).reshape(5, 5)\ntest_arr_copy = test_arr[:, 1:3].copy()\n\nprint(\"No copy\")\nprint(np.where(test_arr[:, 1:3] == 2, test_arr[:, 1:3], np.NaN))\nprint(\"With copy\")\nprint(np.where(test_arr_copy == 2, test_arr_copy, np.NaN))\n\n# Sanity check that it doesn't search the whole array\n\ndef where_on_full_array(arr):\n    new_arr = np.where(arr == 5, arr, np.NaN)\n\n#%timeit where_on_full_array(arr)\n#7.54 ms \u00b1 47.6 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n</code></pre>\n\n<p>I'm curious about where the added overhead comes from in this case?</p>\n"}, {"tags": ["python", "django", "docker", "visual-studio-code"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1529526634, "post_id": 50956539, "comment_id": 88910562, "body": "Well appparently there is already a program running on that port, use <code>lsof -i</code> to check what programs listen to which ports."}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 1762165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68b8ca489ec32989f18dbbfb52a3b1fe?s=128&d=identicon&r=PG", "display_name": "Orinocco", "link": "https://stackoverflow.com/users/1762165/orinocco"}, "is_accepted": false, "score": 1, "last_activity_date": 1565191805, "creation_date": 1565191805, "answer_id": 57397843, "question_id": 50956539, "link": "https://stackoverflow.com/questions/50956539/address-already-in-use-errno-98-django-with-vscode-and-docker/57397843#57397843", "title": "Address already in use (Errno 98) django with vscode and docker", "body": "<p>From quinox's answer on Github (<a href=\"https://github.com/Microsoft/PTVS/issues/1057#issuecomment-421549892\" rel=\"nofollow noreferrer\">https://github.com/Microsoft/PTVS/issues/1057#issuecomment-421549892</a>):</p>\n\n<p>To use the auto reloading functionality you can make VSCode only attach in the main process. Based on Django's utils/autoreload.py and Django-Extensions' management/commands/runserver_plus.py:</p>\n\n<p><code>if os.environ.get('RUN_MAIN') or os.environ.get('WERKZEUG_RUN_MAIN'):\n    ptvsd.enable_attach(address=('0.0.0.0', 7913), redirect_output=True)</code></p>\n"}], "owner": {"reputation": 405, "user_id": 9622398, "user_type": "registered", "profile_image": "https://graph.facebook.com/1675958759156838/picture?type=large", "display_name": "Daniel Pereira", "link": "https://stackoverflow.com/users/9622398/daniel-pereira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1070, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565191805, "creation_date": 1529526470, "question_id": 50956539, "link": "https://stackoverflow.com/questions/50956539/address-already-in-use-errno-98-django-with-vscode-and-docker", "title": "Address already in use (Errno 98) django with vscode and docker", "body": "<p>I have a python application with django and I'm running it inside a docker container. I need to debug this application and every time I do the docker-compose up it gives this error below. I looked at several sites on how to debug and none of the solutions helped me. Does anyone know what can it be? I think the most important files for you to evaluate are below, if there is need of any more I edit the post.\nI'm using django 2.0.1, ptvsd 3.2.1 and the Docker-Toolbox.</p>\n\n<pre><code>File \"manage.py\", line 10, in &lt;module&gt;    ptvsd.enable_attach(secret='my_secret', address = ('192.168.99.100', 3000))\nFile \"/usr/local/lib/python3.6/site-packages/ptvsd/__init__.py\", line 87, in enable_attach\nreturn _attach_server().enable_attach(secret, address, certfile, keyfile, redirect_output)\nFile \"/usr/local/lib/python3.6/site-packages/ptvsd/attach_server.py\", line 109, in enable_attach\nserver.bind(address)\nOSError: [Errno 99] Cannot assign requested addres\n</code></pre>\n\n<p>s</p>\n\n<p>manage.py:</p>\n\n<pre><code>#!/usr/bin/env python\nimport os\nimport sys\n\nif __name__ == \"__main__\":\n    os.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"chatire.settings\")\n    try:\n        from django.core.management import execute_from_command_line\n        import ptvsd\n        ptvsd.enable_attach(secret='my_secret', address = ('192.168.99.100', 3000))\n    except ImportError as exc:\n        raise ImportError(\n            \"Couldn't import Django. Are you sure it's installed and \"\n            \"available on your PYTHONPATH environment variable? Did you \"\n            \"forget to activate a virtual environment?\"\n        ) from exc\n\n\n\n    execute_from_command_line(sys.argv)\n</code></pre>\n\n<p>docker-compose.yml:</p>\n\n<pre><code>version: '3'\nservices:\n  db:\n    image: postgres\n  backend:\n    build: .\n    command: bash app.sh\n    volumes:\n      - .:/code\n    ports:\n      - \"3000:3000\"\n      - \"8000:8000\"\n    depends_on:\n      - db\n  frontend:\n    build: ./chatire-frontend\n    command: bash front.sh\n    volumes:\n      - ./chatire-frontend:/to-do-app\n    ports:\n      - \"8080:8080\"\n      - \"8081:8081\"\n  rabbit1:\n    image: \"rabbitmq:3-management\"\n    hostname: \"rabbit1\"\n    environment:\n      RABBITMQ_ERLANG_COOKIE: \"SWQOKODSQALRPCLNMEQG\"\n      RABBITMQ_DEFAULT_USER: \"guest\"\n      RABBITMQ_DEFAULT_PASS: \"guest\"\n      RABBITMQ_DEFAULT_VHOST: \"/\"\n    ports:\n      - \"15672:15672\"\n      - \"5672:5672\"\n    labels:\n      NAME: \"rabbitmq1\"\n    volumes:\n      - \"./rabbitmq-compose/enabled_plugins:/etc/rabbitmq/enabled_plugins\"\n      #- \"./rabbitmq.config:/etc/rabbitmq/rabbitmq.config:ro\"\n      #- \"./autocluster-0.4.1.ez:/usr/lib/rabbitmq/lib/rabbitmq_server-3.5.5/plugins/autocluster-0.4.1.ez\"\n</code></pre>\n\n<p>Dockerfile</p>\n\n<pre><code>FROM python:3\nENV PYTHONUNBUFFERED 1\nRUN mkdir /code\nWORKDIR /code\nADD requirements.txt /code/\nRUN pip install -r requirements.txt\nADD . /code/\nEXPOSE 3000\n</code></pre>\n\n<p>requirements.txt:</p>\n\n<pre><code>amqp==2.2.2\nbilliard==3.5.0.3\ncelery==4.1.0\nDjango==2.0.1\ndjango-cors-headers==2.1.0\ndjango-notifs==2.6.0\ndjango-templated-mail==1.0.0\ndjangorestframework==3.7.7\ndjangorestframework-jwt==1.11.0\ndjoser==1.1.5\ngevent==1.2.2\ngreenlet==0.4.12\nkombu==4.1.0\npika==0.11.2\nPyJWT==1.6.1\npytz==2017.3\nsimplejson==3.13.2\nsix==1.11.0\nuWSGI==2.0.15\nvine==1.1.4\npsycopg2==2.7.4\npsycopg2-binary==2.7.4\nptvsd==3.2.1 \n</code></pre>\n"}, {"tags": ["python", "list", "dictionary", "sqlite", "executemany"], "comments": [{"owner": {"reputation": 1809, "user_id": 9801728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LXQkV.jpg?s=128&g=1", "display_name": "MoxieBall", "link": "https://stackoverflow.com/users/9801728/moxieball"}, "edited": false, "score": 1, "creation_date": 1529526221, "post_id": 50956459, "comment_id": 88910393, "body": "You&#39;re missing a parenthesis."}], "answers": [{"tags": [], "owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "is_accepted": false, "score": 1, "last_activity_date": 1529526366, "creation_date": 1529526366, "answer_id": 50956517, "question_id": 50956459, "link": "https://stackoverflow.com/questions/50956459/how-do-i-use-executemany-to-write-the-first-values-in-each-key-to-a-database/50956517#50956517", "title": "How do I use executemany to write the first values in each Key to a database", "body": "<p>executemany wants a list of tuples each one containing one row, that is, one element from yo, one from meh, and one from blah. That is not what <code>.items()</code> provide, since it will provide a key and the values associated with that key on each iteration.</p>\n\n<p>Luckly the <code>zip()</code> function does exactly what you need:</p>\n\n<pre><code>cur.executemany('...insert...', zip(my_dict['yo'], my_dict['meh'], my_dict['blah']))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9724871, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160275893240641/picture?type=large", "display_name": "Avy Kols", "link": "https://stackoverflow.com/users/9724871/avy-kols"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529526366, "creation_date": 1529526138, "question_id": 50956459, "link": "https://stackoverflow.com/questions/50956459/how-do-i-use-executemany-to-write-the-first-values-in-each-key-to-a-database", "title": "How do I use executemany to write the first values in each Key to a database", "body": "<p>I am new to Python and am trying to use a for loop to add the first and subsequent values, sequentially from a list within a dictionary to a database by using the cursor.executemany() function. </p>\n\n<p>here is my code, </p>\n\n<pre><code>dict = {'yo': [1,2,3,4,5,6,7],'meh':[1,2,3,4,5,6,7],'blah':[1,2,3,4,5,6,7]}\n\nconn = sqlite3.connect('tester.db')\ncur = conn.cursor()\n\ncur.executescript('''\nDROP TABLE IF EXISTS;\n\nCREATE TABLE Numbers (\n    id  INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE,\n    yo  INTEGER,\n    meh INTEGER,\n    blah    INTEGER\n);\n\n''')\n\nfor key,val in dict.items():\n    i = 0\n\n    cur.executemany('''INSERT OR IGNORE INTO Number_game (yo,meh,blah)\n    VALUES (?,?,?)''', (val(i))\n    i = i+1                     \n    conn.commit()\n</code></pre>\n\n<p>I keep getting a syntax error on the i = i+1 iteration. I am trying to add all the 1's to the first row, then the 2's and so on. Can someone tell me what I am doing wrong? it feels like a glaring mistake im unable to pick up. </p>\n\n<p>thanks in advance.</p>\n"}, {"tags": ["python", "list", "loops"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1529526522, "post_id": 50956456, "comment_id": 88910511, "body": "What <i>does</i> the program do?  &quot;does not work at all&quot; is not a problem specification."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1529526593, "post_id": 50956456, "comment_id": 88910550, "body": "Please explain the output logic.  &quot;B-I-L belong to each other&quot; is not sufficient to detail the logic of your number prefixes.  I strongly suspect that your logic and <code>regex</code> are overkill for what you need to do."}, {"owner": {"reputation": 782, "user_id": 3712761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1aPMK.png?s=128&g=1", "display_name": "dashiell", "link": "https://stackoverflow.com/users/3712761/dashiell"}, "edited": false, "score": 0, "creation_date": 1529526707, "post_id": 50956456, "comment_id": 88910590, "body": "I&#39;m very uncertain what the prefixes have to do with it. It seems like the suffix is what&#39;s determining what number you add to the beginning."}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 9969642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/39uCE.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/9969642/ron"}, "edited": false, "score": 0, "creation_date": 1529527785, "post_id": 50956684, "comment_id": 88911049, "body": "Perfect! Does this also work if the List looks like this: <code>List = [&quot;B-Guild&quot;,&quot;I-Guild&quot;,&quot;I-Guild&quot;,&quot;L-Guild&quot;,&quot;B-Guild&quot;,&quot;L-Guild&quot;&zwnj;&#8203;,&quot;U-Guild&quot;]</code>?"}, {"owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "reply_to_user": {"reputation": 135, "user_id": 9969642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/39uCE.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/9969642/ron"}, "edited": false, "score": 1, "creation_date": 1529527931, "post_id": 50956684, "comment_id": 88911112, "body": "I guess you can try for yourself at this point, but this will work fine, it will return <code>[&#39;0B-Guild&#39;, &#39;0I-Guild&#39;, &#39;0I-Guild&#39;, &#39;0L-Guild&#39;, &#39;0B-Guild&#39;, &#39;0L-Guild&#39;, &#39;0U-Guild&#39;]</code> since it is grouping by whatever is after the <code>-</code> on each element, so that&#39;s all in the same group"}, {"owner": {"reputation": 135, "user_id": 9969642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/39uCE.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/9969642/ron"}, "edited": false, "score": 1, "creation_date": 1529528128, "post_id": 50956684, "comment_id": 88911188, "body": "Yeah. Although I&#39;m expecting <code>[&#39;0B-Guild&#39;, &#39;0I-Guild&#39;, &#39;0I-Guild&#39;, &#39;0L-Guild&#39;, &#39;1B-Guild&#39;, &#39;1L-Guild&#39;, &#39;2U-Guild&#39;]</code> to be the results. I&#39;ll try it mysellf later. Thanks, man."}, {"owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "edited": false, "score": 0, "creation_date": 1529529861, "post_id": 50956684, "comment_id": 88911885, "body": "No, it will create a new number for each <code>U-</code> so <code>[&quot;U-Guild&quot;,&quot;U-Car&quot;,&quot;U-Gene&quot;]</code> will return <code>[&#39;0U-Guild&#39;, &#39;1U-Car&#39;, &#39;2U-Gene&#39;]</code>. But I forgot to increment <code>g_size</code> so it wasn&#39;t working. Fixed now."}, {"owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "edited": false, "score": 0, "creation_date": 1529530290, "post_id": 50956684, "comment_id": 88912062, "body": "I also simplified the code a bit and added comments"}, {"owner": {"reputation": 135, "user_id": 9969642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/39uCE.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/9969642/ron"}, "edited": false, "score": 0, "creation_date": 1529531101, "post_id": 50956684, "comment_id": 88912375, "body": "Thank you so much ! It works perfect and also thanks for the input that he missed to increment. Lovely work :)"}], "tags": [], "owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "is_accepted": true, "score": 3, "last_activity_date": 1529530291, "last_edit_date": 1529530291, "creation_date": 1529527106, "answer_id": 50956684, "question_id": 50956456, "link": "https://stackoverflow.com/questions/50956456/search-strings-in-a-list-with-loop-return-order/50956684#50956684", "title": "Search Strings in a List with Loop Return Order", "body": "<pre><code>def combine(some_list):\n    current_group = 0 # starts with 0\n    g_size = 0 # current group size\n    for elem in some_list:\n        g_size += 1\n        if elem.startswith('U-') and g_size &gt; 1:\n            g_size = 1 \n            current_group += 1\n        yield '{}{}'.format(current_group, elem)\n        if elem.startswith(('L-', 'U-')): # each L- or U- also finishes a group\n            g_size = 0\n            current_group += 1\n\n\n\n&gt;&gt;&gt; List = [\"B-Guild\",\"I-Guild\",\"I-Guild\",\"L-Guild\",\"B-Gene\",\"L-Gene\",\"U-Car\"]\n&gt;&gt;&gt; print(list(combine(List)))\n\n&gt;&gt;&gt; List = [\"B-Guild\",\"I-Guild\",\"I-Guild\",\"L-Guild\",\"B-Guild\",\"L-Guild\",\"U-Guild\"]\n&gt;&gt;&gt; print(list(combine(List)))\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 9969642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/39uCE.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/9969642/ron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 50956684, "answer_count": 1, "score": 1, "last_activity_date": 1529530291, "creation_date": 1529526114, "last_edit_date": 1529527188, "question_id": 50956456, "link": "https://stackoverflow.com/questions/50956456/search-strings-in-a-list-with-loop-return-order", "title": "Search Strings in a List with Loop Return Order", "body": "<p>I'm very new to Python and I have a question.</p>\n\n<p>I have a List that looks like this:</p>\n\n<pre><code>  List = [\"B-Guild\",\"I-Guild\",\"I-Guild\",\"L-Guild\",\"B-Gene\",\"L-Gene\",\"U-Car\"]\n</code></pre>\n\n<p>All of the words with B-(I)-L belong to each other and I want to use a function to show that.</p>\n\n<pre><code>def combine(x):\n foo = []\n regexp_B = (\"B-\" + r'.*')\n regexp_I = (\"I-\" + r'.*')\n regexp_L = (\"L-\" + r'.*')\n regexp_U = (\"U-\" + r'.*')\n for i in range(0,len(x),1):\n    if re.match(regexp_B, x[i]):\n        print(\"Found B\")\n        foo.append[i+x[i]]\n        if re.match(regexp_I, x[i+1]):\n            print(\"Found I\")\n            foo.append[i+1+x[i+1]]\n            if re.match(regexp_I, x[i+1]):\n                print(\"Found I\")\n                foo.append[i+1+x[i+1]]\n            else:\n                print(\"Found L\")\n                foo.append[i+1+x[i+1]]  \n        else:\n            print(\"Found L\")\n            foo.append[i1+x[i1]]    \n    elif re.match(regexp_L, x[i]):\n        print(\"L\")\n        foo.append[i1+x[i1]]    \n    elif re.match(regexp_U, x[i]):\n        print(\"Found U\")\n        foo.append[i1+x[i1]]\nreturn foo\n\nList_New = combine(List)\n</code></pre>\n\n<p>Desired Output:</p>\n\n<pre><code>foo = [\"0B-Guild\",\"0I-Guild\",\"0I-Guild\",\"OL-Guild\",\"1B-Gene\",\"1L-Gene\",\"2U-Car\"]\n</code></pre>\n\n<p>Edit: </p>\n\n<p>The output follows this logic: Every time a <code>\"B-\"</code> prefix appears, the words to follow are part of one \"theme\" until a <code>\"L-\"</code> prefix appears. These words got to have the same number before them so they can be grouped for further functions. <code>\"U-\"</code> prefixes don't follow that logic and just need a number before them to distinguish them from the other words. Think of it as a Counter that groups these word into a cluster.</p>\n"}, {"tags": ["python", "tensorflow", "distributed"], "comments": [{"owner": {"reputation": 25553, "user_id": 4790871, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-7sCm6Bl96nw/AAAAAAAAAAI/AAAAAAAAAH4/0LGbJtwJZd0/photo.jpg?sz=128", "display_name": "David Parks", "link": "https://stackoverflow.com/users/4790871/david-parks"}, "edited": false, "score": 1, "creation_date": 1529527838, "post_id": 50956392, "comment_id": 88911072, "body": "In my understanding the difference between in-graph and between-graph is where you run the code to build the dependency graph (aka your model) - on one server, or on all servers in the cluster. In large clusters between-graph doesn&#39;t bottleneck on a single server and is preferred. Both methods allow you, the user, to run any operations you define, be it a data parallel appraoch, a distributed model, or something inbetween. Since I haven&#39;t coded this I&#39;ll let someone else answer in case my understanding is in error."}], "answers": [{"tags": [], "owner": {"reputation": 3395, "user_id": 4255553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7ErKg.jpg?s=128&g=1", "display_name": "BlueSun", "link": "https://stackoverflow.com/users/4255553/bluesun"}, "is_accepted": true, "score": 4, "last_activity_date": 1530538674, "creation_date": 1530538674, "answer_id": 51137534, "question_id": 50956392, "link": "https://stackoverflow.com/questions/50956392/is-tensorflows-between-graph-replication-an-example-of-data-parallelism/51137534#51137534", "title": "Is Tensorflow&#39;s Between-graph replication an example of data parallelism?", "body": "<p>In-graph replication and between-graph replication are not directly related with data parallelism and model parallelism. Data parallelism and model parallelism are terms dividing parallelization algorithms into two categories, like described in the quora answer that you link. But in-graph replication and between-graph replication are two ways to implement parallelism in tensorflow. Data parallelism for instance can be implemented with both in-graph replication and between-graph replication.</p>\n\n<p>Like shown in the video, in-graph replication is achieved by assigning different parts of a single graph to different devices. In between-graph replication has multiple graphs running in parallel instead, which is achieved by using distributed tensorflow.</p>\n"}], "owner": {"reputation": 4977, "user_id": 187343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f55192e8e9dc799e5828b2af7ea3ca5f?s=128&d=identicon&r=PG&f=1", "display_name": "Amila", "link": "https://stackoverflow.com/users/187343/amila"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 542, "favorite_count": 2, "accepted_answer_id": 51137534, "answer_count": 1, "score": 8, "last_activity_date": 1530538674, "creation_date": 1529525861, "question_id": 50956392, "link": "https://stackoverflow.com/questions/50956392/is-tensorflows-between-graph-replication-an-example-of-data-parallelism", "title": "Is Tensorflow&#39;s Between-graph replication an example of data parallelism?", "body": "<p>I have read <a href=\"https://www.tensorflow.org/deploy/distributed\" rel=\"noreferrer\">distributed tensorflow documentation</a> and <a href=\"https://stackoverflow.com/questions/41600321/distributed-tensorflow-the-difference-between-in-graph-replication-and-between\">this answer</a>.</p>\n\n<p>According to <a href=\"https://www.quora.com/What-is-the-difference-between-model-parallelism-and-data-parallelism\" rel=\"noreferrer\">this</a>, in data parallelism approach:</p>\n\n<blockquote>\n  <ul>\n  <li>The algorithm distributes the data between various cores. </li>\n  <li>Each core independently tries to estimate the same parameter(s) </li>\n  <li>Cores then exchange their estimate(s) with each other to come up with the right estimate for the step.</li>\n  </ul>\n</blockquote>\n\n<p>And in model parallelism approach:</p>\n\n<blockquote>\n  <ul>\n  <li>The algorithm sends the same data to all the cores.</li>\n  <li>Each core is responsible for estimating different parameter(s)</li>\n  <li>Cores then exchange their estimate(s) with each other to come up with the right estimate for all the parameters.</li>\n  </ul>\n</blockquote>\n\n<p>How do <code>In-graph replication</code> and <code>Between-graph replication</code> relate to these approaches?</p>\n\n<p><a href=\"https://www.oreilly.com/ideas/distributed-tensorflow\" rel=\"noreferrer\">This article</a> says:</p>\n\n<blockquote>\n  <p>For example, different layers in a network may be trained in parallel\n  on different GPUs. This training procedure is commonly known as \"model\n  parallelism\" (or \"in-graph replication\" in the TensorFlow\n  documentation).</p>\n</blockquote>\n\n<p>And: </p>\n\n<blockquote>\n  <p>In \"data parallelism\" (or \u201cbetween-graph replication\u201d in the\n  TensorFlow documentation), you use the same model for every device,\n  but train the model in each device using different training samples.</p>\n</blockquote>\n\n<p>Is that accurate?</p>\n\n<p>From the <a href=\"https://www.youtube.com/watch?v=la_M6bCV91M\" rel=\"noreferrer\">Tensorflow DevSummit video</a> linked in tensorflow documentation page:\n<a href=\"https://i.stack.imgur.com/jFsTI.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/jFsTI.png\" alt=\"enter image description here\"></a>\nIt looks like data is split and distributed to each worker. So isn't <code>In-graph replication</code> following data parallelism approach? </p>\n"}, {"tags": ["python", "python-3.x", "tkinter", "win32gui"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 9636723, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Zerobell Lee", "link": "https://stackoverflow.com/users/9636723/zerobell-lee"}, "is_accepted": false, "score": 0, "last_activity_date": 1529646237, "last_edit_date": 1529646237, "creation_date": 1529526414, "answer_id": 50956528, "question_id": 50956383, "link": "https://stackoverflow.com/questions/50956383/python3-5-win32gui-tkinter-i-cant-get-pixel-from-screen/50956528#50956528", "title": "Python3.5, Win32gui, Tkinter. I can&#39;t get Pixel from screen", "body": "<p>Solved. When I just changed</p>\n\n<pre><code>dc = win32gui.GetDC(win32gui.GetActiveWindow())\n</code></pre>\n\n<p>to</p>\n\n<pre><code>dc = win32gui.getDC(0)\n</code></pre>\n\n<p>it worked.</p>\n"}], "owner": {"reputation": 21, "user_id": 9636723, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Zerobell Lee", "link": "https://stackoverflow.com/users/9636723/zerobell-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 477, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1612712570, "creation_date": 1529525833, "last_edit_date": 1612712570, "question_id": 50956383, "link": "https://stackoverflow.com/questions/50956383/python3-5-win32gui-tkinter-i-cant-get-pixel-from-screen", "title": "Python3.5, Win32gui, Tkinter. I can&#39;t get Pixel from screen", "body": "<p>I'm trying to make Macro by using Python 3.5.</p>\n<p>I made the program that searches the defined color from screen, then click it.</p>\n<p>When I tested it just with console environment, it worked.\nBut when I added Tkinter GUI, it doesn't work.</p>\n<p>The error message is</p>\n<pre><code>Exception in Tkinter callback\nTraceback (most recent call last):\n  File &quot;C:\\Users\\snowscale\\AppData\\Local\\Programs\\Python\\Python35\\lib\\tkinter\\__init__.py&quot;, line 1550, in __call__\n    return self.func(*args)\n  File &quot;D:/PyCharm/macro/main.py&quot;, line 39, in macro\n    color = win32gui.GetPixel(dc, x, y)\npywintypes.error: (0, 'GetPixel', 'No error message is available')\n</code></pre>\n<p>How can I solve this? I'm just guessing something's wrong with DeviceContext, for instance Tkinter root affected it.</p>\n<p>I'm not goot at Python and GUI. So I'll glad if you help me.</p>\n<p>here's my code.</p>\n<pre><code>import win32api\nimport win32gui\nimport win32con\nimport time\nfrom tkinter import *\n\n\nArea_Set = { &quot;center_square&quot; : (684, 471, 978, 706), &quot;vertical_rect&quot; : (703, 420, 1022, 838), &quot;horizontal_rect&quot; : (546, 524, 1152, 713), &quot;default&quot; : (747, 485, 1029, 814) }\n\nselectedColor = (13421568, 13172889, 14494037)\navoidColor = (14803425, 16777215, 6908265, 16645629, 14540253, 16711422, 15592941)\n\nclickPos = (1335, 954)\nconfirmPos = (1128,431)\nconfirmColor = 16024898\ninterval_arr = [35, 25, 15, 6]\nx_interval = 35\n\n\ndef macro():\n    global Area_Set\n    global selectedColor\n    global avoidColor\n    searchArea = Area_Set[&quot;center_square&quot;]\n    global clickPos\n    global confirmPos\n    global confirmColor\n    global interval_arr\n    global x_interval\n\n    print(&quot;started&quot;)\n    while True:\n        dc = win32gui.GetDC(win32gui.GetActiveWindow())\n        reset = False\n        for interval in interval_arr:\n            for y in range(searchArea[1], searchArea[3], 8):\n                endflag = False\n                for x in range(searchArea[0], searchArea[2], interval):\n                    color = win32gui.GetPixel(dc, x, y)\n                    if color in selectedColor:\n                        win32api.SetCursorPos((x, y))\n                        time.sleep(0.01)\n                        win32api.mouse_event(win32con.MOUSEEVENTF_LEFTDOWN, 0, 0, 0, 0)\n                        time.sleep(0.01)\n                        win32api.mouse_event(win32con.MOUSEEVENTF_LEFTUP, 0, 0, 0, 0)\n                        time.sleep(0.01)\n                        win32api.SetCursorPos(clickPos)\n                        time.sleep(0.01)\n                        win32api.mouse_event(win32con.MOUSEEVENTF_LEFTDOWN, 0, 0, 0, 0)\n                        time.sleep(0.01)\n                        win32api.mouse_event(win32con.MOUSEEVENTF_LEFTUP, 0, 0, 0, 0)\n                        if win32gui.GetPixel(DC, confirmPos[0], confirmPos[1]) == confirmColor:\n                            reset = True\n                            win32api.SetCursorPos(confirmPos)\n                            time.sleep(0.01)\n                            win32api.mouse_event(win32con.MOUSEEVENTF_LEFTDOWN, 0, 0, 0, 0)\n                            time.sleep(0.01)\n                            win32api.mouse_event(win32con.MOUSEEVENTF_LEFTUP, 0, 0, 0, 0)\n                        endflag = True\n                        break\n                if endflag:\n                    break\n            if endflag:\n                break\n        if (reset):\n            continue\n        else:\n            break\n        win32gui.ReleaseDC(dc)\n\n\nroot = Tk()\nbtn = Button(root, text=&quot;start&quot;, command=macro)\nbtn.pack()\nroot.wm_attributes(&quot;-topmost&quot;, 1)\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "web-services", "flask"], "owner": {"reputation": 2602, "user_id": 1204749, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8c7b2072c6586880fcb1e38a12de55ae?s=128&d=identicon&r=PG", "display_name": "cyber101", "link": "https://stackoverflow.com/users/1204749/cyber101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 309, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1529525808, "creation_date": 1529525808, "question_id": 50956377, "link": "https://stackoverflow.com/questions/50956377/python-flask-unable-to-set-content-length", "title": "Python Flask unable to set content-length", "body": "<p>Im creating a quick RESTful service using Python &amp; Flask in order to externalize configuration data and call the configuration on app start. </p>\n\n<p>Initially my server side code was:</p>\n\n<pre><code>#!/usr/bin/python\n# -*- coding: utf-8 -*-\nfrom flask import Flask, jsonify, request\napp = Flask(__name__)\n\n\n# this endpint returns backend server  connection settings\n@app.route('/config/server_config/&lt;string:customer_name&gt;',\n           methods=['GET'])\ndef get_config_server_config(customer_name):\n    if customer_name == 'grant':\n        return (jsonify([{\n            'address': 'aaa.bb.cc.dd',\n            'comm_hub_address': '192.168.137.38',\n            'comm_hub_udp_beacon': '192.168.42.129',\n            'comm_hub_port': '50000',\n            'mqtt_port': '1883',\n            'rest_port': '8000',\n            'chat_port': '8010',\n            }]), 200)\n    if customer_name == 'orange':\n        return (jsonify([{\n            'address': 'aaa.bb.cc.dd',\n            'comm_hub_address': '192.168.137.38',\n            'comm_hub_udp_beacon': '192.168.42.129',\n            'comm_hub_port': '50000',\n            'mqtt_port': '1883',\n            'rest_port': '8000',\n            'chat_port': '8010',\n            }]), 200)\n    if customer_name == 'blue':\n        return (jsonify([{\n            'address': 'aaa.bb.cc.dd',\n            'comm_hub_address': '192.168.137.38',\n            'comm_hub_udp_beacon': '192.168.42.129',\n            'comm_hub_port': '50000',\n            'mqtt_port': '1883',\n            'rest_port': '8000',\n            'chat_port': '8010',\n            }]), 200)\n    else:\n        return (jsonify({'error': 'customer does not exist'}), 404)\n\n#if __name__ == '__main__':\n    #app.run(debug=True, host='0.0.0.0', port=5000)\nif __name__ == '__main__':\n    app.run()\n</code></pre>\n\n<p><strong>The JSON was being returned correctly:</strong></p>\n\n<p>[[{\"address\":\"137.78.81.53\",\"chat_port\":\"8010\",\"comm_hub_address\":\"192.168.137.38\",\"comm_hub_port\":\"50000\",\"comm_hub_udp_beacon\":\"192.168.42.129\",\"mqtt_port\":\"1883\",\"rest_port\":\"8000\"}],200]</p>\n\n<p>However...</p>\n\n<p>The issue was my client side Android would through EOFException complaining that the Content-Length as 0</p>\n\n<p><strong>Therefore I attempted to set the content length on Python side since it was not being set explicitly:</strong></p>\n\n<pre><code> #!/usr/bin/python\n    # -*- coding: utf-8 -*-\n    from flask import Flask, jsonify, request\n    app = Flask(__name__)\n\n\n    # this endpint returns backend server  connection settings\n    @app.route('/config/server_config/&lt;string:customer_name&gt;',\n               methods=['GET'])\n    def get_config_server_config(customer_name):\n        if customer_name == 'grant':\n            # set response object &amp; return with http code\n            resp = Flask.make_response(jsonify([{\n                    'address': 'aaa.bb.cc.dd',\n                    'chat_port': '8010',\n                    'comm_hub_address': '192.168.137.38',\n                    'comm_hub_port': '50000',\n                    'comm_hub_udp_beacon': '192.168.42.129',\n                    'mqtt_port': '1883',\n                    'rest_port': '8000',\n                    }]), 200)\n            resp.mimetype = 'application/json'\n            #set content length\n            resp.headers['Content-Length'] = len(resp.get_data())\n            return resp\n        if customer_name == 'harris':\n            return (jsonify([{\n                'address': 'aaa.bb.cc.dd',\n                'comm_hub_address': '192.168.137.38',\n                'comm_hub_udp_beacon': '192.168.42.129',\n                'comm_hub_port': '50000',\n                'mqtt_port': '1883',\n                'rest_port': '8000',\n                'chat_port': '8010',\n                }]), 200)\n        if customer_name == 'hastings':\n            return (jsonify([{\n                'address': 'aaa.bb.cc.dd',\n                'comm_hub_address': '192.168.137.38',\n                'comm_hub_udp_beacon': '192.168.42.129',\n                'comm_hub_port': '50000',\n                'mqtt_port': '1883',\n                'rest_port': '8000',\n                'chat_port': '8010',\n                }]), 200)\n        else:\n            return (jsonify({'error': 'customer does not exist'}), 404)\n\n    #if __name__ == '__main__':\n        #app.run(debug=True, host='0.0.0.0', port=5000)\n    if __name__ == '__main__':\n        app.run()\n</code></pre>\n\n<p>However in the browser Im getting an error:</p>\n\n<p>Internal Server Error\nThe server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.</p>\n\n<p>and in the logs &amp; command line window im getting </p>\n\n<p>AttributeError: 'Response' object has no attribute 'response_class'\n127.0.0.1 - - [20/Jun/2018 13:08:44] \"GET /config/server_config/grant HTTP/1.1\" 500 -</p>\n\n<p><strong>How can i set the content-length of a response object using the Flask package?</strong> </p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "ssl"], "comments": [{"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1529527267, "post_id": 50956373, "comment_id": 88910813, "body": "<i>&quot;But the answer on this question DOES NOT explain or help why Python is different at all.&quot;</i> - It is not different. But how the CA store is configured is different. And, you are using the wrong argument to set the CA store, i.e. use <code>cert</code> which should be used for client certificates instead of <code>verify</code> which should be used for the CA store. I recommend to take a closer look at the documentation of what the arguments you use actually mean and maybe get some understanding of the difference between CA store and client certificate."}, {"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1529527423, "post_id": 50956373, "comment_id": 88910872, "body": "Also, the question I&#39;ve marked here and in your previous question as the duplicate talks exactly about what you are doing wrong, i.e. using <code>cert</code> instead of <code>verify</code>."}], "owner": {"reputation": 51, "user_id": 8138940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/904419147a6fb00d838e257a20ab00c5?s=128&d=identicon&r=PG&f=1", "display_name": "TF Newby", "link": "https://stackoverflow.com/users/8138940/tf-newby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "closed_date": 1529527108, "answer_count": 0, "score": 0, "last_activity_date": 1529525782, "creation_date": 1529525782, "question_id": 50956373, "link": "https://stackoverflow.com/questions/50956373/python-self-signed-cert-http-not-working-but-works-in-c", "closed_reason": "Duplicate", "title": "Python + self signed cert + HTTP not working but works in C#", "body": "<p>I'm new to Python and have been struggling with this for hours now, so I thought perhaps someone within the community would be able to help.</p>\n\n<p>I have a self signed certificate from a 3rd party enterprise who is not a valid CA which is fine.</p>\n\n<p>I've created a .p12 and I'm <strong><em>SUCCESSFULLY</em></strong> able to connect to said 3rd party's HTTP server using C# and .net (great).</p>\n\n<p>Using the same .p12, I'm able to create a keystore, import the key, and successfully connect to the 3rd party's HTTP server using Java HttpsURLConnection (also great).</p>\n\n<p>Unfortunately, it is not trivial at all to do this in Python!</p>\n\n<p>Someone has pointed to this post here:\n<a href=\"https://stackoverflow.com/questions/32194900/generating-cert-for-use-with-python-requests-getting-pem-lib-error\">generating cert for use with python requests getting PEM lib error</a></p>\n\n<p>But the answer on this question <strong>DOES NOT</strong> explain or help why Python is different at all.  In C# and Java, I don't need the ca-certificates.crt and I'm not sure how or what the process is of how to create it for Python from a .p12.  And I'm certain that I would still need to pass the crt.pem and key.pem which the answer does not use at all, which as I understand is specific to Python (as both C# and Java can use the .p12 instrinsically without any hacking)</p>\n\n<p>As such I have followed these instructions from IBM to split the .p12 into a key.pem and a cert.pem\n<a href=\"https://www.ibm.com/support/knowledgecenter/en/SSZRJV_10.1.0/admin_guide/pac_x509_web_services_python_convert.html\" rel=\"nofollow noreferrer\">https://www.ibm.com/support/knowledgecenter/en/SSZRJV_10.1.0/admin_guide/pac_x509_web_services_python_convert.html</a></p>\n\n<p>I have tried the following Python http libraries to try to make the connection (as imports below):</p>\n\n<ul>\n<li>import requests</li>\n<li>import http.client.HTTPSConnection</li>\n<li>import httplib2 </li>\n</ul>\n\n<p><strong>Code snippet using requests</strong></p>\n\n<pre><code>import requests \nr = requests.get(url, cert=('crt.pem', 'key_nopass.pem'))\nprint(r.text)\n</code></pre>\n\n<p><strong>Code snippet using httplib2 (and from IBM example)</strong>\n<a href=\"https://www.ibm.com/support/knowledgecenter/SSZRJV_10.1.0/admin_guide/pac_x509_web_services_test.html\" rel=\"nofollow noreferrer\">https://www.ibm.com/support/knowledgecenter/SSZRJV_10.1.0/admin_guide/pac_x509_web_services_test.html</a></p>\n\n<pre><code>import httplib2\nhttp = httplib2.Http()\nhttp.add_certificate('key_nopass.pem', 'crt.pem', '')\nresponse, content = http.request(url, 'GET')\nprint(content)\n</code></pre>\n\n<p>Using any of these libraries, I get the following error:</p>\n\n<p><strong>OpenSSL.SSL.Error: [('SSL routines', 'ssl3_get_server_certificate',\n 'certificate verify failed')]</strong></p>\n\n<p>Would appreciate if anyone can point me in right direction or tell me what I'm doing wrong.  Quite frustrating since as I mentioned the same simple HTTP calls work from C# and Java without issue (which confirms that the p12 and certs are valid)</p>\n\n<p>I've tried + used many different stackoverflow posts to no avail.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "strptime"], "comments": [{"owner": {"reputation": 76, "user_id": 7733772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7XmY.png?s=128&g=1", "display_name": "Lane Terry", "link": "https://stackoverflow.com/users/7733772/lane-terry"}, "edited": false, "score": 0, "creation_date": 1529525511, "post_id": 50956309, "comment_id": 88910076, "body": "Can you provide a more specific code example?"}, {"owner": {"reputation": 11, "user_id": 9969615, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S4ZfH5BbImI/AAAAAAAAAAI/AAAAAAAAAAs/o1sb1ojrtLE/photo.jpg?sz=128", "display_name": "Trending Now", "link": "https://stackoverflow.com/users/9969615/trending-now"}, "reply_to_user": {"reputation": 76, "user_id": 7733772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7XmY.png?s=128&g=1", "display_name": "Lane Terry", "link": "https://stackoverflow.com/users/7733772/lane-terry"}, "edited": false, "score": 0, "creation_date": 1529525769, "post_id": 50956309, "comment_id": 88910179, "body": "the above code yields error in my description, format doesnot match!"}, {"owner": {"reputation": 11, "user_id": 9969615, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S4ZfH5BbImI/AAAAAAAAAAI/AAAAAAAAAAs/o1sb1ojrtLE/photo.jpg?sz=128", "display_name": "Trending Now", "link": "https://stackoverflow.com/users/9969615/trending-now"}, "reply_to_user": {"reputation": 76, "user_id": 7733772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7XmY.png?s=128&g=1", "display_name": "Lane Terry", "link": "https://stackoverflow.com/users/7733772/lane-terry"}, "edited": false, "score": 0, "creation_date": 1529526954, "post_id": 50956309, "comment_id": 88910684, "body": "this is solved, Thank you, everyone, for the inputs!"}], "answers": [{"tags": [], "owner": {"reputation": 382, "user_id": 1581927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75c4ffacd0596bbc93dfd651e247031?s=128&d=identicon&r=PG", "display_name": "Innuendo", "link": "https://stackoverflow.com/users/1581927/innuendo"}, "is_accepted": false, "score": 0, "last_activity_date": 1529525905, "creation_date": 1529525905, "answer_id": 50956401, "question_id": 50956309, "link": "https://stackoverflow.com/questions/50956309/strptime-not-working-for-below-format/50956401#50956401", "title": "strptime not working for below format", "body": "<p>You're reading this value \" '2018-01-01 11:30:00'\" and not this \"2018-01-01 11:30:00\"</p>\n\n<p>Just try</p>\n\n<pre><code>LogTime = datetime.strptime(columns[2].strip(\" '\"),\"%Y-%m-%d %H:%M:%S\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 9969615, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S4ZfH5BbImI/AAAAAAAAAAI/AAAAAAAAAAs/o1sb1ojrtLE/photo.jpg?sz=128", "display_name": "Trending Now", "link": "https://stackoverflow.com/users/9969615/trending-now"}, "edited": false, "score": 0, "creation_date": 1529526205, "post_id": 50956404, "comment_id": 88910381, "body": "This is weird, I tried the manual method and it doesn&#39;t delete the first (&#39;), so the new string is like below &#39;2018-01-01:10:00:00"}, {"owner": {"reputation": 11, "user_id": 9969615, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S4ZfH5BbImI/AAAAAAAAAAI/AAAAAAAAAAs/o1sb1ojrtLE/photo.jpg?sz=128", "display_name": "Trending Now", "link": "https://stackoverflow.com/users/9969615/trending-now"}, "edited": false, "score": 0, "creation_date": 1529526482, "post_id": 50956404, "comment_id": 88910501, "body": "I want calculate running difference of timestamps and add to the same file, for the first record there is no timestamp to compare with. but second row will have &quot;1800&quot; added to it as the time difference between second rows and first row timestamps."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 11, "user_id": 9969615, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S4ZfH5BbImI/AAAAAAAAAAI/AAAAAAAAAAs/o1sb1ojrtLE/photo.jpg?sz=128", "display_name": "Trending Now", "link": "https://stackoverflow.com/users/9969615/trending-now"}, "edited": false, "score": 0, "creation_date": 1529526496, "post_id": 50956404, "comment_id": 88910503, "body": "@TrendingNow You clearly did something wrong, but I can&#39;t really debug <i>what</i> you did wrong without seeing your code. Maybe you did the two <code>strip</code> calls in reverse order?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 11, "user_id": 9969615, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S4ZfH5BbImI/AAAAAAAAAAI/AAAAAAAAAAs/o1sb1ojrtLE/photo.jpg?sz=128", "display_name": "Trending Now", "link": "https://stackoverflow.com/users/9969615/trending-now"}, "edited": false, "score": 0, "creation_date": 1529526529, "post_id": 50956404, "comment_id": 88910515, "body": "@TrendingNow After you solve your first problem, you should be able to work out how to do the diffing, or at least get farther and then ask a new question wherever you get stuck."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 3, "last_activity_date": 1529526923, "last_edit_date": 1529526923, "creation_date": 1529525912, "answer_id": 50956404, "question_id": 50956309, "link": "https://stackoverflow.com/questions/50956309/strptime-not-working-for-below-format/50956404#50956404", "title": "strptime not working for below format", "body": "<p>The problem is that your format has quotes around the datetimes, plus a leading space:</p>\n\n<pre><code>f.write(\"1, 1, '2018-01-01 10:00:00'\\n\")\n</code></pre>\n\n<p>But your parser doesn't strip those quotes and space off, and your <code>strptime</code> isn't expecting them. And, while <code>2018-01-01 10:00:00</code> would match your format, <code>'2018-01-01 10:00:00'</code> does not.</p>\n\n<p>You can solve this in a few ways:</p>\n\n<ul>\n<li>Use the <code>csv</code> module for reading (or numpy, since you're already importing it), which will handle CSV quoting and spaces automatically.</li>\n<li>Do the quote handling manually\u2014e.g., <code>timestamp = columns[2].strip().strip(\"'\")</code>.</li>\n<li>Add the space and quotes to the <code>strptime</code> format: <code>datetime.strptime(columns[2],\" '%Y-%m-%d %H:%M:%S'\")</code></li>\n</ul>\n\n<p>The first one seems by far the cleanest, but they'll all work.</p>\n\n<hr>\n\n<p>Of course once you fix that, you're going to have another problem: <code>a.write(','+LogTime-temp)</code> is trying to add a string <code>','</code> to a <code>datetime</code> object, and then subtract <code>None</code> from the result. None of those types are compatible, so this makes no sense.</p>\n\n<p>If you were trying to diff subsequent times, then you have to:</p>\n\n<ul>\n<li>Handle the first row specially, since it has no previous time;</li>\n<li>Handle the first <em>diff</em> specially too, since it has no preceding <code>,</code>;</li>\n<li>Subtract the times to get a <code>timedelta</code> <em>before</em> trying to attach one of them to a string;</li>\n<li>Either convert the diff to a string with <code>str</code> instead of just adding it to <code>','</code>, or, maybe better, use an f-string (or <code>format</code>) instead of adding strings.</li>\n</ul>\n\n<p>This should be enough to get you started, but it's not the complete program:</p>\n\n<pre><code>temp = None\nfor line in a:\n    # ... up to LogTime = ...\n    if temp is not None:\n        diff = LogTime - temp\n        print(diff)\n    temp = LogTime\n</code></pre>\n\n<hr>\n\n<p>And then you're trying to write to the file at the same time you're reading it, which is just going to make a horrible mess. You'll read one line, then overwrite the next line\u2014or, more likely, half the next line, or the next two and a third lines, or whatever, then read the next line after that\u2026 What you want to do is one of:</p>\n\n<ul>\n<li>Write to a <em>different</em> file (you can <code>os.replace</code> it over the original one when you're done if needed);</li>\n<li>Just build the rows you want to write into a list, then <code>close</code> the file, re<code>open</code> the same file, and write out the list of rows.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "is_accepted": false, "score": 0, "last_activity_date": 1529525937, "creation_date": 1529525937, "answer_id": 50956407, "question_id": 50956309, "link": "https://stackoverflow.com/questions/50956309/strptime-not-working-for-below-format/50956407#50956407", "title": "strptime not working for below format", "body": "<p>Your data seems to include quotes, so instead of \"2018-01-01 11:30:00\" you have \"'2018-01-01 11:30:00'\" in the variable.</p>\n\n<p>You can strip those in many ways, some ideas below:</p>\n\n<pre><code>LogTime = datetime.strptime(columns[2],\"'%Y-%m-%d %H:%M:%S'\")\n\nLogTime = datetime.strptime(columns[2].strip(\"'\"),\"%Y-%m-%d %H:%M:%S\")\n</code></pre>\n\n<p>or use the csv module, </p>\n"}], "owner": {"reputation": 11, "user_id": 9969615, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S4ZfH5BbImI/AAAAAAAAAAI/AAAAAAAAAAs/o1sb1ojrtLE/photo.jpg?sz=128", "display_name": "Trending Now", "link": "https://stackoverflow.com/users/9969615/trending-now"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 607, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1529526923, "creation_date": 1529525455, "last_edit_date": 1529525711, "question_id": 50956309, "link": "https://stackoverflow.com/questions/50956309/strptime-not-working-for-below-format", "title": "strptime not working for below format", "body": "<p>I have used the below format which is being read from a log file, The formatter used is matching the DateTime format. not sure why it is still erroring.\n - ValueError: time data \" '2018-01-01 10:00:00'\" does not match format '%Y-%m-%d %H:%M:%S'</p>\n\n<pre><code>f = open(\"log.txt\", 'w')\nf.write(\"UID, SID, LogTime\\n\")\nf.write(\"1, 1, '2018-01-01 10:00:00'\\n\")\nf.write(\"1, 1, '2018-01-01 10:30:00'\\n\")\nf.write(\"1, 1, '2018-01-01 11:30:00'\\n\")\nf.close()\nx = open(\"log.txt\", 'r')\n\nprint (x.read())\nx.close()\n\nimport numpy as np \nfrom datetime import datetime\na = open(\"log.txt\", 'r+')\ntemp = None\nheader = a.readline()\nfor line in a:\n    line = line.strip()\n    columns = line.split(',')\n    print (columns)\n    UID = columns[0]\n    SID = columns[1]\n    print (columns[2])\n    LogTime = datetime.strptime(columns[2],\"%Y-%m-%d %H:%M:%S\")\n    a.write(','+LogTime-temp)\n    temp = LogTime\n</code></pre>\n"}, {"tags": ["python", "multithreading", "python-multiprocessing"], "comments": [{"owner": {"reputation": 1621, "user_id": 4058364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EjxTc.jpg?s=128&g=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/4058364/leo"}, "edited": false, "score": 0, "creation_date": 1529526403, "post_id": 50956201, "comment_id": 88910463, "body": "&quot;that are saved in different folders&quot; - do any of these overlap? Are the different threads ever going to be trying to save to the same files at the same time?"}, {"owner": {"reputation": 88, "user_id": 8669783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89585f3d72b17c75179fdb66d5047d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Sandro H", "link": "https://stackoverflow.com/users/8669783/sandro-h"}, "reply_to_user": {"reputation": 1621, "user_id": 4058364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EjxTc.jpg?s=128&g=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/4058364/leo"}, "edited": false, "score": 0, "creation_date": 1529526531, "post_id": 50956201, "comment_id": 88910518, "body": "no, all the saved files are distinct (they contain the original file name in their names). However, they are saved in the same folders."}, {"owner": {"reputation": 1621, "user_id": 4058364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EjxTc.jpg?s=128&g=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/4058364/leo"}, "edited": false, "score": 0, "creation_date": 1529526538, "post_id": 50956201, "comment_id": 88910523, "body": "Also, you might want to check your resources, specifically how many disk operations are taking place. If the bottleneck is your storage io it makes sense that multiprocessing won&#39;t help."}, {"owner": {"reputation": 88, "user_id": 8669783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89585f3d72b17c75179fdb66d5047d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Sandro H", "link": "https://stackoverflow.com/users/8669783/sandro-h"}, "reply_to_user": {"reputation": 1621, "user_id": 4058364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EjxTc.jpg?s=128&g=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/4058364/leo"}, "edited": false, "score": 0, "creation_date": 1529526690, "post_id": 50956201, "comment_id": 88910581, "body": "To check that, I tried running multiple Spyder instances with single thread code, while dividing up the files manually. This improves the speed significantly, so the resource limit is not reached."}, {"owner": {"reputation": 1621, "user_id": 4058364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EjxTc.jpg?s=128&g=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/4058364/leo"}, "edited": false, "score": 0, "creation_date": 1529609098, "post_id": 50956201, "comment_id": 88948302, "body": "I see what you mean. Doesn&#39;t sound like its your storage. Could you provide more details about or share the <code>extract_from_file</code> function? Is it possible the function is referencing or depending on common objects? You could also try tracking the progress of each instance e.g., with time-stamped prints."}], "owner": {"reputation": 88, "user_id": 8669783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89585f3d72b17c75179fdb66d5047d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Sandro H", "link": "https://stackoverflow.com/users/8669783/sandro-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1529524989, "creation_date": 1529524989, "question_id": 50956201, "link": "https://stackoverflow.com/questions/50956201/multiprocessing-dummy-doesnt-improve-speed", "title": "multiprocessing.dummy doesn&#39;t improve speed", "body": "<p>From other posts, I read that all you need to do for multi threading in python is to use this simple code</p>\n\n<pre><code>from multiprocessing.dummy import Pool as ThreadPool\n\npool = ThreadPool(8) \nresults = pool.map(extract_from_file, file_list)\n</code></pre>\n\n<p>to replace</p>\n\n<pre><code>for file in file_list:\n   extract_from_file(file)\n</code></pre>\n\n<p>In my case, extract_from_file(file) reads in a very long file and cuts it into interesting sequences, that are saved in different folders.</p>\n\n<p>In my case, the multi threading brings no speed improvement at all. However, what I find strange is that I can manually split up the list and just open Spyder several times and run multiple instances of python without multi threading, which leads to a big speed improvement. Does that proof anything, i.e. can I assume that my function can be multi threaded, just not with this specific library?</p>\n"}, {"tags": ["python", "django", "mocking", "tdd", "django-2.0"], "answers": [{"comments": [{"owner": {"reputation": 2472, "user_id": 603819, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zYtBs.png?s=128&g=1", "display_name": "Bobort", "link": "https://stackoverflow.com/users/603819/bobort"}, "edited": false, "score": 0, "creation_date": 1585777668, "post_id": 50973892, "comment_id": 107886709, "body": "Oh, yes, absolutely helpful! Thank you so much! I&#39;m using Django 3. But I don&#39;t understand why the problem only shows up with using the mock library. Without it, <code>redirect(list_)</code> works just fine. There must be more to this."}], "tags": [], "owner": {"reputation": 1002, "user_id": 5704198, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/326e901a74f245b7c224df66d3873215?s=128&d=identicon&r=PG&f=1", "display_name": "fabio", "link": "https://stackoverflow.com/users/5704198/fabio"}, "is_accepted": true, "score": 3, "last_activity_date": 1529600605, "last_edit_date": 1529600605, "creation_date": 1529600220, "answer_id": 50973892, "question_id": 50956160, "link": "https://stackoverflow.com/questions/50956160/mock-function-gives-typeerror-in-django2/50973892#50973892", "title": "Mock() function gives TypeError in django2", "body": "<p>At last I found the solution on-line.</p>\n\n<p><a href=\"https://docs.djangoproject.com/en/2.0/releases/2.0/#removed-support-for-bytestrings-in-some-places\" rel=\"nofollow noreferrer\">Django 2 doesn't support anymore bytestrings</a> in some places so when the views redirect the mock Class List it does as a mock object and the <code>iri_to_uri</code> django function throws an error. In django 1.11 <code>iri_to_uri</code> forced the iri to a bytes <code>return quote(force_bytes(iri), safe=\"/#%[]=:;$&amp;()+,!?*@'~\")</code> instead now is <code>return quote(iri, safe=\"/#%[]=:;$&amp;()+,!?*@'~\")</code>. So the solution is to <code>return redirect(str(list_.get_absolute_url()))</code> instead of <code>return redirect(list_)</code> in the <code>lists.views.py</code></p>\n\n<pre><code>def new_list(request):\n    form = ItemForm(data=request.POST)\n    if form.is_valid():\n        list_ = List()\n        list_.owner = request.user\n        list_.save()\n        form.save(for_list=list_)\n        #return redirect(list_)\n        return redirect(str(list_.get_absolute_url()))\n    else:\n        return render(request, 'home.html', {\"form\": form})\n</code></pre>\n\n<p>I hope this helps someone else</p>\n"}, {"tags": [], "owner": {"reputation": 1414, "user_id": 2449877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebf0d224fb3836187122e73e7df66135?s=128&d=identicon&r=PG", "display_name": "Raoul", "link": "https://stackoverflow.com/users/2449877/raoul"}, "is_accepted": false, "score": 1, "last_activity_date": 1616681792, "last_edit_date": 1616681792, "creation_date": 1616676852, "answer_id": 66799932, "question_id": 50956160, "link": "https://stackoverflow.com/questions/50956160/mock-function-gives-typeerror-in-django2/66799932#66799932", "title": "Mock() function gives TypeError in django2", "body": "<p>I've solved this in the testing code without changing the desired production code as follows:</p>\n<pre><code>@patch('lists.views.NewListForm')\nclass NewListViewUnitTest(unittest.TestCase):\n    def setUp(self):\n        self.request = HttpRequest()\n        self.request.POST['text'] = 'new list item'\n        self.request.user = Mock()\n\ndef test_passes_POST_data_to_NewListForm(self, mockNewListForm):\n    mock_form = mockNewListForm.return_value\n    returned_object = mock_form.save.return_value\n    returned_object.get_absolute_url.return_value = 'fakeurl'\n\n    new_list2(self.request)\n\n    mockNewListForm.assert_called_once_with(data=self.request.POST)\n\ndef test_saves_form_with_owner_if_form_valid(self, mockNewListForm):\n    mock_form = mockNewListForm.return_value\n    mock_form.is_valid.return_value = True\n    returned_object = mock_form.save.return_value\n    returned_object.get_absolute_url.return_value = 'fakeurl'\n\n    new_list2(self.request)\n\n    mock_form.save.assert_called_once_with(owner=self.request.user)\n\n@patch('lists.views.redirect')\ndef test_redirects_to_form_returned_object_if_form_valid(\n    self, mock_redirect, mockNewListForm\n):\n    mock_form = mockNewListForm.return_value\n    mock_form.is_valid.return_value = True\n\n    response = new_list2(self.request)\n\n    self.assertEqual(response, mock_redirect.return_value)\n    mock_redirect.assert_called_once_with(mock_form.save.return_value)\n</code></pre>\n<p>Note that assigning <code>some_method.return_value</code> sets the response of <code>some_method</code>, <strong>without calling</strong> <code>some_method()</code>, so we can also test that the method was only called once.</p>\n<p>What I like about this solution is that it results in the desired production code:</p>\n<pre><code>def new_list2(request):\n    form = NewListForm(data=request.POST)\n    list_ = form.save(owner=request.user)\n    return redirect(list_)\n</code></pre>\n<p>.. instead of using a workaround in the production code like <code>return redirect(str(list_.get_absolute_url()))</code>, which is not desirable because it:</p>\n<ol>\n<li>Is not the desired production code</li>\n<li>Is less elegant production code</li>\n<li>Just returns the name of the mocked object as a string (i.e. <code>&lt;MagicMock name='NewListForm().save().get_absolute_url()' id='4363470544'&gt;</code>), which is not what we want: we want to call the <code>get_absolute_url()</code> method and <strong>that</strong> method (not <code>str()</code>) should return a url as a string.</li>\n</ol>\n"}], "owner": {"reputation": 1002, "user_id": 5704198, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/326e901a74f245b7c224df66d3873215?s=128&d=identicon&r=PG&f=1", "display_name": "fabio", "link": "https://stackoverflow.com/users/5704198/fabio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 0, "accepted_answer_id": 50973892, "answer_count": 2, "score": 3, "last_activity_date": 1616681792, "creation_date": 1529524753, "last_edit_date": 1529600532, "question_id": 50956160, "link": "https://stackoverflow.com/questions/50956160/mock-function-gives-typeerror-in-django2", "title": "Mock() function gives TypeError in django2", "body": "<p>I'm following <a href=\"https://www.obeythetestinggoat.com/book/chapter_purist_unit_tests.html\" rel=\"nofollow noreferrer\">this tutorial</a>.</p>\n\n<p>When I run <code>test_views.py</code> I have an error that shouldn't be there according the author: <code>TypeError: quote_from_bytes() expected bytes</code>. </p>\n\n<p>My <code>views</code> and my <code>test_views</code> are the same like the book, but I'm using django 2.0.6 instead django 1.11 so my <code>url.py</code> change, so maybe here's the problem. </p>\n\n<p><strong>Edit:</strong> </p>\n\n<p>at a second look the problem appears to be in the <code>mock()</code> function.</p>\n\n<p>When I use <code>patch('lists.views.List')</code> the <code>Print(list_)</code> in my view gives <code>&lt;MagicMock name='List()' id='79765800'&gt;</code> instead of <code>List object (1)</code></p>\n\n<p><strong>/edit</strong></p>\n\n<p>My <code>lists/urls.py</code>:</p>\n\n<pre><code>urlpatterns = [\n    path('new', views.new_list, name='new_list'),\n    path('&lt;slug:list_id&gt;/',\n        views.view_list, name='view_list'),\n    path('users/&lt;email&gt;/',         # I'm not sure about this one but it works in other tests\n        views.my_lists, name='my_lists'),\n]\n#instead of:\n#urlpatterns = [\n#    url(r'^new$', views.new_list, name='new_list'),\n#    url(r'^(\\d+)/$', views.view_list, name='view_list'),\n#    url(r'^users/(.+)/$', views.my_lists, name='my_lists'),\n#]\n</code></pre>\n\n<p>My <code>lists/views.py</code>:</p>\n\n<pre><code>[...]\ndef new_list(request):\n    form = ItemForm(data=request.POST)\n    if form.is_valid():\n        list_ = List()\n        list_.owner = request.user\n        list_.save()\n        form.save(for_list=list_)\n        Print(list_)\n        return redirect(list_)\n    else:\n        return render(request, 'home.html', {\"form\": form})\n</code></pre>\n\n<p>My <code>lists/tests/test_views.py</code>:</p>\n\n<pre><code>@patch('lists.views.List')\n@patch('lists.views.ItemForm')\ndef test_list_owner_is_saved_if_user_is_authenticated(self, \n    mockItemFormClass, mockListClass\n):\n    user = User.objects.create(email='a@b.com')\n    self.client.force_login(user)\n    self.client.post('/lists/new', data={'text': 'new item'})\n    mock_list = mockListClass.return_value\n    self.assertEqual(mock_list.owner, user)\n</code></pre>\n\n<p>My full traceback:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2iveS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2iveS.png\" alt=\"traceback\"></a></p>\n\n<p>What can be?</p>\n\n<p>thank you</p>\n"}, {"tags": ["python", "django", "filter"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 2595409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd9ccd47b2ad1d8a489e930221f328c2?s=128&d=identicon&r=PG", "display_name": "medvi_dinya", "link": "https://stackoverflow.com/users/2595409/medvi-dinya"}, "edited": false, "score": 0, "creation_date": 1529526004, "post_id": 50956218, "comment_id": 88910285, "body": "This is a very simple and clear solution. Thank you! The original solution is also good, but not in the case of several if."}], "tags": [], "owner": {"reputation": 1147, "user_id": 4770578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37eff09260d44b9cb8fab960d4ec2c32?s=128&d=identicon&r=PG&f=1", "display_name": "Carson Crane", "link": "https://stackoverflow.com/users/4770578/carson-crane"}, "is_accepted": true, "score": 4, "last_activity_date": 1529525047, "creation_date": 1529525047, "answer_id": 50956218, "question_id": 50956139, "link": "https://stackoverflow.com/questions/50956139/django-filtering-by-value-or-returning-all-records/50956218#50956218", "title": "Django: filtering by value or returning all records", "body": "<pre><code>def function(self, some_id):\n    filter_kwargs = {}\n\n    if some_id:\n        filter_kwargs['model2__id'] = some_id\n\n    return Model1.objects.filter(**filter_kwargs)\n</code></pre>\n\n<p>Should satisfy your question, though I'd say that its most likely okay as written.</p>\n"}, {"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 2, "last_activity_date": 1529530478, "last_edit_date": 1529530478, "creation_date": 1529525074, "answer_id": 50956226, "question_id": 50956139, "link": "https://stackoverflow.com/questions/50956139/django-filtering-by-value-or-returning-all-records/50956226#50956226", "title": "Django: filtering by value or returning all records", "body": "<p>Well you can fix this like:</p>\n\n<pre><code>def function(self, some_id):\n    return Model1.objects.filter(<b>*(some_id and [Q(model2__id=some_id)] or [])</b>)</code></pre>\n\n<p>But this is rather cryptical.</p>\n\n<p>Personally I like to implement a <code>filter_not_none</code>, that simply filters away statements with a <code>None</code> as value, like:</p>\n\n<pre><code>def filter_not_none(qs, **kwargs):\n    return qs.filter(<b>**{k: v for k, v in kwargs.item() if v is not None}</b>)</code></pre>\n\n<p>Then we can simply use:</p>\n\n<pre><code>def function(self, some_id):\n    return <b>filter_not_none</b>(Model1.objects, model2__id=some_id)</code></pre>\n\n<p>This works with an arbitrary number of <em>named</em> parameters. So not positional parameters, or <code>Q</code> objects.</p>\n\n<p>This works since a <code>filter(..)</code> with no parameters, does not filter anything. We use dictionary comprehension, to thus check which <code>kwargs</code> have a not-<code>None</code> value, and we only pass these to the <code>.filter(..)</code> call.</p>\n\n<p>You can then for example use:</p>\n\n<pre><code>return filter_not_none(\n    Model.objects,\n    name=some_name,\n    date__lt=some_date\n)\n</code></pre>\n\n<p>in case <code>some_name</code> is <code>None</code>, we do not filter on the name, in case <code>some_date</code> is <code>None</code> we do not filter on the <code>date__lt</code>, in case both are <code>None</code>, we do not filter at all, and in case both are <em>not</em> <code>None</code>, we filter on both.</p>\n\n<p>We can extend it to get it work with <code>Q</code> objects as well (as <code>*args</code>), but inspecting these <code>Q</code>-objects, and expressions, would be quite hard to do, and furthermore could result in all kinds of unwanted behavior. But an extension that takes <code>Q</code> objects as well is:</p>\n\n<pre><code>def filter_not_none(qs<b>, *args</b>, **kwargs):\n    # warning, does not perform manipulations on Q-objects, Q-expressions\n    # and unnamed parameters in general\n    return qs.filter(\n        <b>*args,</b>\n        **{k: v for k, v in kwargs.item() if v is not None}\n    )</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 2595409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd9ccd47b2ad1d8a489e930221f328c2?s=128&d=identicon&r=PG", "display_name": "medvi_dinya", "link": "https://stackoverflow.com/users/2595409/medvi-dinya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 1, "accepted_answer_id": 50956218, "answer_count": 2, "score": 4, "last_activity_date": 1529530478, "creation_date": 1529524664, "question_id": 50956139, "link": "https://stackoverflow.com/questions/50956139/django-filtering-by-value-or-returning-all-records", "title": "Django: filtering by value or returning all records", "body": "<p>I have the following piece of code (django, python):</p>\n\n<pre><code>def function(self, some_id):\n    if some_id:\n        return Model1.objects.filter(model2__id=some_id)\n    else:\n        return Model1.objects.all()\n</code></pre>\n\n<p>I'm wondering it is possible to refactoring this code with a single return statement? Model1 has a foreign key on Model2.id.</p>\n"}, {"tags": ["python", "gpu", "grid-search", "lightgbm"], "comments": [{"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1529568364, "post_id": 50956103, "comment_id": 88923481, "body": "Have you tried using <code>lgb.LGBMClassifier(&#39;device&#39;: &#39;gpu&#39;)</code>? The <a href=\"http://lightgbm.readthedocs.io/en/latest/Python-API.html#scikit-learn-api\" rel=\"nofollow noreferrer\">scikit API docs</a> suggest that you can pass extra keyword arguments (same as params dict in <code>train()</code>), but I cannot test that because I dont have a GPU."}, {"owner": {"reputation": 989, "user_id": 4157821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b62eeaf4a04ff29dc155057561c0d33?s=128&d=identicon&r=PG&f=1", "display_name": "tgordon18", "link": "https://stackoverflow.com/users/4157821/tgordon18"}, "reply_to_user": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1529581340, "post_id": 50956103, "comment_id": 88931662, "body": "I think you mean <code>lgb.LGBMClassifier(device=&#39;gpu&#39;)</code>, which does not give any errors but does not seem to activate the GPU"}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1529582230, "post_id": 50956103, "comment_id": 88932203, "body": "Yes. Indeed I meant that. And also I just read the Note below that page, that <code>&quot;**kwargs is not supported in sklearn, it may cause unexpected issues.&quot;</code> Upon further inspection, it looks like it has been handled correctly and should work. How are you detecting that its not activating?"}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1529582714, "post_id": 50956103, "comment_id": 88932523, "body": "Are you getting any difference when you use the GridSearchCV and when you dont? Have the library been compiled to use a GPU?"}, {"owner": {"reputation": 989, "user_id": 4157821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b62eeaf4a04ff29dc155057561c0d33?s=128&d=identicon&r=PG&f=1", "display_name": "tgordon18", "link": "https://stackoverflow.com/users/4157821/tgordon18"}, "reply_to_user": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1529582784, "post_id": 50956103, "comment_id": 88932565, "body": "I don&#39;t think it&#39;s activating because nothing is printed to console signaling that it&#39;s being used. When I run something like <code>lgb.train({&#39;device&#39;: &#39;gpu&#39;}, data)</code>, it prints status messages from the GPU, and when I run <code>lgb.train({&#39;device&#39;: &#39;cpu&#39;}, data)</code>, nothing is printed out. This is why I suspected that it is not hitting the gpu"}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 1, "creation_date": 1529583675, "post_id": 50956103, "comment_id": 88933189, "body": "I can confirm that the <code>&#39;device&#39;</code> param is successfully passed on to the <code>train()</code> method which is <a href=\"https://github.com/Microsoft/LightGBM/blob/master/python-package/lightgbm/sklearn.py#L468\" rel=\"nofollow noreferrer\">called under the hood here</a>. So make sure that you are on the latest version of lgbm and scikit."}, {"owner": {"reputation": 989, "user_id": 4157821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b62eeaf4a04ff29dc155057561c0d33?s=128&d=identicon&r=PG&f=1", "display_name": "tgordon18", "link": "https://stackoverflow.com/users/4157821/tgordon18"}, "reply_to_user": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1529584070, "post_id": 50956103, "comment_id": 88933461, "body": "Yeah actually upon further inspection, the GPU isn&#39;t printing anything but when run on a large dataset there is a noticeable difference in time, so I think it&#39;s working after all. Feel free to make an answer to the Q and I&#39;ll accept it"}], "answers": [{"tags": [], "owner": {"reputation": 7, "user_id": 8361837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a231493048a22925527d9536f11663b5?s=128&d=identicon&r=PG&f=1", "display_name": "Suffer Surfer", "link": "https://stackoverflow.com/users/8361837/suffer-surfer"}, "is_accepted": false, "score": 0, "last_activity_date": 1611847974, "creation_date": 1611847974, "answer_id": 65940268, "question_id": 50956103, "link": "https://stackoverflow.com/questions/50956103/gridsearch-lightgbm-with-gpu/65940268#65940268", "title": "GridSearch LightGBM with GPU", "body": "<p>LGBMClassifier() does have the <code>device</code>/<code>device_type</code> parameter which can be set to 'gpu' as per the <a href=\"https://lightgbm.readthedocs.io/en/latest/Parameters.html#device_type\" rel=\"nofollow noreferrer\">parameter docs</a>.</p>\n<p>To set it to 'gpu', you can configure GPU-based LGBM. A couple of community members have demonstrated how to do that <a href=\"https://medium.com/@vipulgote4/how-to-build-and-install-lightgbm-for-gpu-acceleration-2b53f0066c02\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://www.thekerneltrip.com/machine-learning/lgbmgpu/\" rel=\"nofollow noreferrer\">here</a>. The second resource also has something called <code>glances</code> (on PyPi.org) to observe the GPU usage which addresses the comments raised.</p>\n"}], "owner": {"reputation": 989, "user_id": 4157821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b62eeaf4a04ff29dc155057561c0d33?s=128&d=identicon&r=PG&f=1", "display_name": "tgordon18", "link": "https://stackoverflow.com/users/4157821/tgordon18"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2399, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1611847974, "creation_date": 1529524533, "question_id": 50956103, "link": "https://stackoverflow.com/questions/50956103/gridsearch-lightgbm-with-gpu", "title": "GridSearch LightGBM with GPU", "body": "<p>How do you use a GPU to do GridSearch with LightGBM? If you just want to train a lgb model with default parameters, you can do:</p>\n\n<pre><code>dataset = lgb.Dataset(X_train, y_train)\nlgb.train({'device': 'gpu'}, dataset)\n</code></pre>\n\n<p>To do GridSearch, it would be great to do something like this:</p>\n\n<pre><code>lgbm_classifier = lgb.LGBMClassifier()\n\nparam_grid = {\n    'learning_rate': [...],\n    'n_estimators': [...],\n}\n\nGridSearchCV(lgbm_classifier, param_grid)\n</code></pre>\n\n<p>But it doesn't look like <code>lgb.LGBMClassifier()</code> has a parameter for <code>device</code> like <code>lgb.train()</code> does. How do you set it to use the GPU?</p>\n"}, {"tags": ["python", "random"], "comments": [{"owner": {"reputation": 702, "user_id": 2390125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eec97f8649dd8f6f7fe4c1f6a1a4676?s=128&d=identicon&r=PG", "display_name": "RGV", "link": "https://stackoverflow.com/users/2390125/rgv"}, "edited": false, "score": 0, "creation_date": 1529524530, "post_id": 50956063, "comment_id": 88909637, "body": "Get the indexes of the elements that are blank or &#39; &#39; in a list and then do random.choice() on it. and then change corresponding data in your game list."}, {"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1529525036, "post_id": 50956063, "comment_id": 88909867, "body": "Rejection sampling with repeated calls of <code>random.choice</code> may be a reasonable thing to do here, the probability of it never ending rapidly approaches 0."}, {"owner": {"reputation": 155, "user_id": 9184849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b389806c32c643ec81c2935c265a24df?s=128&d=identicon&r=PG&f=1", "display_name": "Kushagra Gupta", "link": "https://stackoverflow.com/users/9184849/kushagra-gupta"}, "reply_to_user": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1529526513, "post_id": 50956063, "comment_id": 88910508, "body": "@miradulo rejection sampling is new to me and from what I read, I can&#39;t see a way to use it here. Can you explain it or give a link that explains it?"}, {"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1529527253, "post_id": 50956063, "comment_id": 88910808, "body": "@KushagraGupta Just continue calling <code>random.choice</code> until you happen upon a <code>&#39; &#39;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 9184849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b389806c32c643ec81c2935c265a24df?s=128&d=identicon&r=PG&f=1", "display_name": "Kushagra Gupta", "link": "https://stackoverflow.com/users/9184849/kushagra-gupta"}, "edited": false, "score": 0, "creation_date": 1529526635, "post_id": 50956106, "comment_id": 88910563, "body": "Thanks. This is exactly what I needed. I can&#39;t believe I didn&#39;t even think of this."}], "tags": [], "owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "is_accepted": true, "score": 2, "last_activity_date": 1529524542, "creation_date": 1529524542, "answer_id": 50956106, "question_id": 50956063, "link": "https://stackoverflow.com/questions/50956063/how-to-select-a-random-element-from-a-part-of-a-list/50956106#50956106", "title": "How to select a random element from a part of a list?", "body": "<p>Determine which indices have spaces and use <a href=\"https://docs.python.org/3/library/random.html#random.choice\" rel=\"nofollow noreferrer\"><code>random.choice</code></a> to choose one</p>\n\n<pre><code>from random import choice\n\ngame = ['X','O',' ',' ',' ',' ',' ',' ',' ']\nindex = choice([i for i, x in enumerate(game) if x == ' '])\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 9184849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b389806c32c643ec81c2935c265a24df?s=128&d=identicon&r=PG&f=1", "display_name": "Kushagra Gupta", "link": "https://stackoverflow.com/users/9184849/kushagra-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 50956106, "answer_count": 1, "score": 0, "last_activity_date": 1529524542, "creation_date": 1529524379, "question_id": 50956063, "link": "https://stackoverflow.com/questions/50956063/how-to-select-a-random-element-from-a-part-of-a-list", "title": "How to select a random element from a part of a list?", "body": "<p>I have a list called <code>game</code></p>\n\n<pre><code>game = ['X','O',' ',' ',' ',' ',' ',' ',' ']\n</code></pre>\n\n<p>I need to select a random element from all the <code>' '</code> elements only. It will then change it to X or O and do again.\nUsing simple <code>random.choice()</code> has a chance of never ending. <code>random.choices()</code> returns the element instead of its index so I cannot think of a way to update the weights.</p>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 301, "user_id": 6581811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ebe3bf1090ff5d46167ec62f9341689?s=128&d=identicon&r=PG&f=1", "display_name": "makunha", "link": "https://stackoverflow.com/users/6581811/makunha"}, "edited": false, "score": 0, "creation_date": 1529525764, "post_id": 50955987, "comment_id": 88910176, "body": "Frames will expand automatically. Can you post some code so we can solve your specific problem?"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1529525770, "post_id": 50955987, "comment_id": 88910181, "body": "Tkinter pretty much does that automatically if you use <code>pack</code> and/or <code>grid</code>, and let tkinter decide on the size of the window. Can you show us a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that illustrates the problem you are having?"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 1, "creation_date": 1529526569, "post_id": 50955987, "comment_id": 88910540, "body": "That code isn&#39;t nearly enough. We need to know what <code>runScript</code> does, and we need to see enough code to run your code. There&#39;s probably something in your code that is preventing the window from resizing, but there&#39;s no way to know without seeing a <i>small</i> working program."}, {"owner": {"reputation": 161, "user_id": 8067675, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06f9526db44a2e576d98bc5226e7d974?s=128&d=identicon&r=PG&f=1", "display_name": "E. Oregel", "link": "https://stackoverflow.com/users/8067675/e-oregel"}, "edited": false, "score": 0, "creation_date": 1529526969, "post_id": 50955987, "comment_id": 88910691, "body": "There you go. Let me know if you want something else. I tried using <code>pack()</code> for the buttons within the Frame, but that didn&#39;t increase the window size, so I took this route, of getting the height of the frame and setting the window size again. This is a hack, however, that i don&#39;t want to do."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1529527768, "post_id": 50955987, "comment_id": 88911034, "body": "The code won&#39;t run. It&#39;s missing an import statement, the indentation is wrong, and you&#39;re using a variable named <code>screen_width</code> and <code>screen_height</code> without defining it first. Plus, you use <code>self</code> but you haven&#39;t defined a  class. There are many other problems."}, {"owner": {"reputation": 2011, "user_id": 9445557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ybcW.gif?s=128&g=1", "display_name": "Artemis", "link": "https://stackoverflow.com/users/9445557/artemis"}, "edited": false, "score": 1, "creation_date": 1529528074, "post_id": 50955987, "comment_id": 88911166, "body": "When you set the window size, you prevent it from auto resizeing."}, {"owner": {"reputation": 161, "user_id": 8067675, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06f9526db44a2e576d98bc5226e7d974?s=128&d=identicon&r=PG&f=1", "display_name": "E. Oregel", "link": "https://stackoverflow.com/users/8067675/e-oregel"}, "edited": false, "score": 0, "creation_date": 1529528116, "post_id": 50955987, "comment_id": 88911183, "body": "It&#39;s a big project with lots of code, and I didn&#39;t recreate a smaller script that would work since there&#39;s a lot of components going into this. Sorry, but I located the issue. Thanks"}, {"owner": {"reputation": 161, "user_id": 8067675, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06f9526db44a2e576d98bc5226e7d974?s=128&d=identicon&r=PG&f=1", "display_name": "E. Oregel", "link": "https://stackoverflow.com/users/8067675/e-oregel"}, "reply_to_user": {"reputation": 2011, "user_id": 9445557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ybcW.gif?s=128&g=1", "display_name": "Artemis", "link": "https://stackoverflow.com/users/9445557/artemis"}, "edited": false, "score": 0, "creation_date": 1529528222, "post_id": 50955987, "comment_id": 88911234, "body": "@ArtemisFowl I saw that as I was trying to make another working script for here. Thanks man! I appreciate your help! I never would&#39;ve thought that would cause it to stop resizing."}, {"owner": {"reputation": 2011, "user_id": 9445557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ybcW.gif?s=128&g=1", "display_name": "Artemis", "link": "https://stackoverflow.com/users/9445557/artemis"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1529529612, "post_id": 50955987, "comment_id": 88911762, "body": "@BryanOakley technicaly <code>self</code> doesn&#39;t have to be used inside a class, it is just a variable that conventionaly refers to the class it is used in."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "reply_to_user": {"reputation": 2011, "user_id": 9445557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ybcW.gif?s=128&g=1", "display_name": "Artemis", "link": "https://stackoverflow.com/users/9445557/artemis"}, "edited": false, "score": 0, "creation_date": 1529530682, "post_id": 50955987, "comment_id": 88912204, "body": "@ArtemisFowl: yes, I know. But it looks pretty clear that this was designed to work inside a class."}, {"owner": {"reputation": 2011, "user_id": 9445557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ybcW.gif?s=128&g=1", "display_name": "Artemis", "link": "https://stackoverflow.com/users/9445557/artemis"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1529531145, "post_id": 50955987, "comment_id": 88912395, "body": "@BryanOakley: I don&#39;t disagree; I was being pedantic."}], "answers": [{"tags": [], "owner": {"reputation": 161, "user_id": 8067675, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06f9526db44a2e576d98bc5226e7d974?s=128&d=identicon&r=PG&f=1", "display_name": "E. Oregel", "link": "https://stackoverflow.com/users/8067675/e-oregel"}, "is_accepted": false, "score": 2, "last_activity_date": 1529527905, "creation_date": 1529527905, "answer_id": 50956843, "question_id": 50955987, "link": "https://stackoverflow.com/questions/50955987/auto-resize-tkinter-window-to-fit-all-widgets/50956843#50956843", "title": "Auto resize tkinter window to fit all widgets", "body": "<p>I found the issue. The problem was that I was setting an initial Width/Height for the Tkinter <code>mainWindow</code> in the block of code:</p>\n\n<pre><code>#Main Window min width\nself.window_width = screen_width * .01\nself.window_height = screen_height * .04\nmasterWindow.geometry(\"%dx%d+%d+%d\" % (self.window_width, self.window_height, self.window_start_x, self.window_start_y))\n</code></pre>\n\n<p>I removed that size definition and setting from the geometry so the code looks like this, and it worked:</p>\n\n<pre><code>masterWindow.geometry(\"+%d+%d\" % (self.window_start_x, self.window_start_y))\n</code></pre>\n\n<p>Now the window resizes automatically to account for all the buttons. </p>\n"}, {"comments": [{"owner": {"reputation": 161, "user_id": 8067675, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06f9526db44a2e576d98bc5226e7d974?s=128&d=identicon&r=PG&f=1", "display_name": "E. Oregel", "link": "https://stackoverflow.com/users/8067675/e-oregel"}, "edited": false, "score": 1, "creation_date": 1529613240, "post_id": 50956871, "comment_id": 88950057, "body": "I left the <code>self.window_start_x</code> &amp; <code>self.window_start_y</code> in my answer because I actually wanted to define where the window would appear. But this is correct. Removing the definition of the window size made the window dynamically resize itself when a widget is added."}], "tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": true, "score": 3, "last_activity_date": 1529528050, "creation_date": 1529528050, "answer_id": 50956871, "question_id": 50955987, "link": "https://stackoverflow.com/questions/50955987/auto-resize-tkinter-window-to-fit-all-widgets/50956871#50956871", "title": "Auto resize tkinter window to fit all widgets", "body": "<p>You are explicitly setting the window to a specific size with this line of code:</p>\n\n<pre><code>masterWindow.geometry(\"%dx%d\" % (self.window_width, self.window_height))\n</code></pre>\n\n<p>Because you're doing that, tkinter will keep the window to that size even when you add widgets. If you want it to auto-size you need to remove that line of code.</p>\n\n<p>Also, if the user resizes the window, tkinter will try to honor that size. If you want it to automatically resize when adding new widgets you'll need to remove the window size so that tkinter can compute it. You can do that by calling <code>masterWindow.geometry(\"\")</code>.</p>\n"}], "owner": {"reputation": 161, "user_id": 8067675, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06f9526db44a2e576d98bc5226e7d974?s=128&d=identicon&r=PG&f=1", "display_name": "E. Oregel", "link": "https://stackoverflow.com/users/8067675/e-oregel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14821, "favorite_count": 1, "accepted_answer_id": 50956871, "answer_count": 2, "score": 3, "last_activity_date": 1583251422, "creation_date": 1529524059, "last_edit_date": 1529527248, "question_id": 50955987, "link": "https://stackoverflow.com/questions/50955987/auto-resize-tkinter-window-to-fit-all-widgets", "title": "Auto resize tkinter window to fit all widgets", "body": "<p>I'd like to have a dynamic sizing for the main tkinter window so that when you add a new widget, you don't have to go change the size of the window. Instead, the main window will account for that widget size and automatically increase its height/width to fit that widget in the window.</p>\n\n<pre><code>        masterWindow = Tk()\n\n        #Main Window min width\n        self.window_width = screen_width * .01\n        self.window_height = screen_height * .04\n\n        #Window startst in center of screen\n        self.window_start_x = (screen_width/2)\n        self.window_start_y = (screen_height/2)\n        masterWindow.geometry(\"%dx%d+%d+%d\" % (self.window_width, self.window_height, self.window_start_x, self.window_start_y))\n        self.buttonsFrame.pack(side = TOP)\n        button_width = 13\n        button_height = 2\n\n        #A simple dict that stores script name strings\n        for script in SCRIPTS.keys():\n            #Remove script extension\n            script_name = script.split(\".\")[0]\n            button_width = 13\n            button_height = 2\n            BUTTONS[script] = Button(self.buttonsFrame, text = script, width = button_width, height = button_height, justify = LEFT, wraplength = 100, command = lambda s = script: self.runScript(s))\n            BUTTONS[script].grid(row = self.row, column = self.col)\n            self.update()\n\n            #Increment row and col and set new window size\n            if self.col == 2:\n                self.col = 0\n                self.row += 1\n                reached_max_width = True\n            else:\n                self.col += 1\n                if not reached_max_width:\n                    self.window_width += button_width * 13\n            self.window_height = self.buttonsFrame.winfo_height() * (self.row*3)\n            masterWindow.geometry(\"%dx%d\" % (self.window_width, self.window_height))\n\n\n        def runScript(self, script):\n            print(script)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1529524050, "post_id": 50955963, "comment_id": 88909446, "body": "nothing changes in your loop: infinite loop all right. and also busy (no delays)."}, {"owner": {"reputation": 5433, "user_id": 841339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0c6d669eb872c414d81490f00a2e626?s=128&d=identicon&r=PG", "display_name": "Mauro Baraldi", "link": "https://stackoverflow.com/users/841339/mauro-baraldi"}, "edited": false, "score": 1, "creation_date": 1529524127, "post_id": 50955963, "comment_id": 88909478, "body": "Add a <code>break</code> after <code>print &#39;Ok&#39;</code>"}, {"owner": {"reputation": 1181, "user_id": 2876994, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e2fad5cb13abf4dd5c102e86078ed439?s=128&d=identicon&r=PG&f=1", "display_name": "TMoraes", "link": "https://stackoverflow.com/users/2876994/tmoraes"}, "edited": false, "score": 0, "creation_date": 1529524971, "post_id": 50955963, "comment_id": 88909840, "body": "I&#39;d to know the reason about downvote, because I can update the question"}, {"owner": {"reputation": 1181, "user_id": 2876994, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e2fad5cb13abf4dd5c102e86078ed439?s=128&d=identicon&r=PG&f=1", "display_name": "TMoraes", "link": "https://stackoverflow.com/users/2876994/tmoraes"}, "reply_to_user": {"reputation": 5433, "user_id": 841339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0c6d669eb872c414d81490f00a2e626?s=128&d=identicon&r=PG", "display_name": "Mauro Baraldi", "link": "https://stackoverflow.com/users/841339/mauro-baraldi"}, "edited": false, "score": 0, "creation_date": 1529525007, "post_id": 50955963, "comment_id": 88909854, "body": "@MauroBaraldi It never goes in <code>IF</code>, that&#39;s one problem"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1529525527, "post_id": 50955963, "comment_id": 88910083, "body": "As a side note: is there a reason you don&#39;t want to use an off-the-shelf scheduling library, or just use your OS&#39;s scheduler to run your script?"}, {"owner": {"reputation": 1181, "user_id": 2876994, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e2fad5cb13abf4dd5c102e86078ed439?s=128&d=identicon&r=PG&f=1", "display_name": "TMoraes", "link": "https://stackoverflow.com/users/2876994/tmoraes"}, "edited": false, "score": 0, "creation_date": 1529525697, "post_id": 50955963, "comment_id": 88910148, "body": "no no, actually, I&#39;m using schedule module, but I need to update my question with more information. Do you care if take a time to update my question? I&#39;ll make it simple"}], "answers": [{"comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1529525402, "post_id": 50956107, "comment_id": 88910031, "body": "This doesn&#39;t solve any of the problems with the OP&#39;s code, it just replaces his working parsing code with more complicated parsing code. It still loops forever using 100% CPU without ever matching."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1529525448, "post_id": 50956107, "comment_id": 88910053, "body": "Also, it adds a new problem: after 00:00:00, the time has passed, but your code says the time will come."}], "tags": [], "owner": {"reputation": 1643, "user_id": 8340867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D3XJl.jpg?s=128&g=1", "display_name": "ThunderHorn", "link": "https://stackoverflow.com/users/8340867/thunderhorn"}, "is_accepted": true, "score": 0, "last_activity_date": 1529528610, "last_edit_date": 1529528610, "creation_date": 1529524549, "answer_id": 50956107, "question_id": 50955963, "link": "https://stackoverflow.com/questions/50955963/python-how-to-compare-two-hours/50956107#50956107", "title": "Python: How to compare two hours", "body": "<pre><code>import datetime as dt\nimport time\ncurrentH= dt.datetime.now().replace(microsecond=0).time()\n\nhrs = ['00:02', '12:00']\nfor i in range(len(hrs)):\n    h = [int(x) for x in hrs[i].split(':')]\n    h = dt.datetime.now().replace(hour=h[0], minute=h[1], second=0,microsecond=0).time()\n    hrs[i] = h\n\nwhile True:\n    currentH = dt.datetime.now().replace(microsecond=0).time()\n    print(currentH)\n    if currentH in hrs:\n        print('Time is now',currentH)\n    time.sleep(1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 0, "last_activity_date": 1529525327, "creation_date": 1529525327, "answer_id": 50956277, "question_id": 50955963, "link": "https://stackoverflow.com/questions/50955963/python-how-to-compare-two-hours/50956277#50956277", "title": "Python: How to compare two hours", "body": "<p>The biggest problem with your code is that you never call <code>now()</code> again inside the loop, so you're just spinning forever comparing the initial time to <code>16:15:10</code>.</p>\n\n<p>While we're at it: Why convert the time to a string for comparison instead of just comparing times?</p>\n\n<p>But there are bigger problems with this design that can't be fixed as easily.</p>\n\n<p>What happens if you check the time at 16:15, then go to sleep, then wake up at 16:25? Then <code>now()</code> never returns 16:15:10.</p>\n\n<p>Also, do you really want to burn 100% CPU for 10 hours?</p>\n\n<p>A better solution is to write a <code>sleep_until</code> function:</p>\n\n<pre><code>def sleep_until(target):\n    left = target - dt.datetime.now()\n    if left &gt; dt.timedelta(seconds=0):\n        time.sleep(left.total_seconds())\n</code></pre>\n\n<p>(If you're using Python 2.7 or 3.4, it's a bit more complicated, because <code>sleep</code> will wake up early if there's a signal. But to handle that case, you just need to add a <code>while True:</code> loop around the whole thing.)</p>\n\n<p>Now, the only tricky bit is working out the first time you need to sleep until, which isn't all that tricky:</p>\n\n<pre><code>waits = itertools.cycle(dt.timedelta(hours=wait) for wait in (10, 4, 10))\nnow = dt.datetime.now()\nstart = dt.datetime.combine(dt.date.today(), dt.time(hour=8))\nfor wait in waits:\n    start += wait\n    if start &gt; now:\n       break\n</code></pre>\n\n<p>And now, we just loop over the waits forever, sleeping until each next time:</p>\n\n<pre><code>for wait in waits:\n    sleep_until(start)\n    print('Time to make the donuts')\n    start += wait\n</code></pre>\n\n<p>Or, of course, you could just grab one of the many scheduling libraries off PyPI.</p>\n\n<p>Or just use your platform's cron/launchd/Scheduled Tasks API to run your script.</p>\n"}], "owner": {"reputation": 1181, "user_id": 2876994, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e2fad5cb13abf4dd5c102e86078ed439?s=128&d=identicon&r=PG&f=1", "display_name": "TMoraes", "link": "https://stackoverflow.com/users/2876994/tmoraes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1189, "favorite_count": 0, "accepted_answer_id": 50956107, "answer_count": 2, "score": -2, "last_activity_date": 1529528610, "creation_date": 1529523956, "last_edit_date": 1529527284, "question_id": 50955963, "link": "https://stackoverflow.com/questions/50955963/python-how-to-compare-two-hours", "title": "Python: How to compare two hours", "body": "<p>I need to call a function, exactly <code>08:00, 18:00, 22:00</code> hours. I've created a example to test the comparison between hours. When the current time reaches one of those horary. Put in inside a While loop thinking this example would work as a stopwatch, but I think I'm wrong. How is the best way to compare those values? </p>\n\n<pre><code>currentH= dt.datetime.now().strftime(\"%H:%M:%S\")\nh = \"16:15:10\"\nwhile True:\n    if(currentH==h):\n        print 'Ok'\nprint 'The current Hour is: '+h\n</code></pre>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1529532661, "post_id": 50955960, "comment_id": 88912927, "body": "Do you want a (1,4,2) array?  3d with that initial size 1 dimension."}], "answers": [{"comments": [{"owner": {"reputation": 1096, "user_id": 5150303, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5IihF.jpg?s=128&g=1", "display_name": "Daniel R. Livingston", "link": "https://stackoverflow.com/users/5150303/daniel-r-livingston"}, "edited": false, "score": 0, "creation_date": 1529524462, "post_id": 50956023, "comment_id": 88909611, "body": "good approach, but OP is looking for a method specific to <code>numpy.ndarray</code> parameters and returns."}], "tags": [], "owner": {"reputation": 650, "user_id": 3187487, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3ickb.jpg?s=128&g=1", "display_name": "Gerik", "link": "https://stackoverflow.com/users/3187487/gerik"}, "is_accepted": false, "score": 0, "last_activity_date": 1529524195, "creation_date": 1529524195, "answer_id": 50956023, "question_id": 50955960, "link": "https://stackoverflow.com/questions/50955960/how-can-i-map-2-numpy-arrays-with-same-indices/50956023#50956023", "title": "How can I map 2 numpy arrays with same indices", "body": "<p>The built in <code>zip</code> command is the job for you here.  It'll do exactly what you're asking.</p>\n\n<pre><code>arr1 = [1,2,3,4]\narr2 = [5,6,7,8]\nlist(zip(arr1, arr2))\n[(1, 5), (2, 6), (3, 7), (4, 8)]\n</code></pre>\n\n<p><a href=\"https://docs.python.org/3/library/functions.html#zip\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/functions.html#zip</a></p>\n"}, {"tags": [], "owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "is_accepted": false, "score": 2, "last_activity_date": 1529524285, "creation_date": 1529524285, "answer_id": 50956049, "question_id": 50955960, "link": "https://stackoverflow.com/questions/50955960/how-can-i-map-2-numpy-arrays-with-same-indices/50956049#50956049", "title": "How can I map 2 numpy arrays with same indices", "body": "<p>IIUC, one way is to use <a href=\"https://docs.scipy.org/doc/numpy-1.14.0/reference/generated/numpy.vstack.html\" rel=\"nofollow noreferrer\"><code>numpy.vstack()</code></a> followed by <a href=\"https://docs.scipy.org/doc/numpy-1.14.0/reference/generated/numpy.ndarray.transpose.html\" rel=\"nofollow noreferrer\"><code>transpose()</code></a>:</p>\n\n<pre><code>import numpy as np\narr1 = np.array([1, 2, 3, 4])\narr2 = np.array([5, 6, 7, 8])\nprint(np.vstack([arr1, arr2]).transpose())\n#array([[1, 5],\n#       [2, 6],\n#       [3, 7],\n#       [4, 8]])\n</code></pre>\n\n<p>Or you could pass the output of <code>zip</code> to the <code>array</code> constructor:</p>\n\n<pre><code>print(np.array(zip(arr1, arr2)))\n#array([[1, 5],\n#       [2, 6],\n#       [3, 7],\n#       [4, 8]])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1529524502, "post_id": 50956087, "comment_id": 88909624, "body": "I did not know this existed +1"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "reply_to_user": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 1, "creation_date": 1529524512, "post_id": 50956087, "comment_id": 88909630, "body": "It&#39;s numpy, something always exists ;)"}, {"owner": {"reputation": 3199, "user_id": 2005490, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/60f7a105be69d2445655481949141f7f?s=128&d=identicon&r=PG&f=1", "display_name": "Atihska", "link": "https://stackoverflow.com/users/2005490/atihska"}, "edited": false, "score": 0, "creation_date": 1529524618, "post_id": 50956087, "comment_id": 88909684, "body": "Thanks @user3483203. I tried the above and I am getting without comma-separated values."}, {"owner": {"reputation": 3199, "user_id": 2005490, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/60f7a105be69d2445655481949141f7f?s=128&d=identicon&r=PG&f=1", "display_name": "Atihska", "link": "https://stackoverflow.com/users/2005490/atihska"}, "edited": false, "score": 0, "creation_date": 1529524693, "post_id": 50956087, "comment_id": 88909721, "body": "yeah my input is of this type <code>&lt;class &#39;numpy.ndarray&#39;&gt;</code>"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1529524713, "post_id": 50956087, "comment_id": 88909728, "body": "Are you positive you are using <code>dstack</code> and not <code>stack</code>?"}, {"owner": {"reputation": 3199, "user_id": 2005490, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/60f7a105be69d2445655481949141f7f?s=128&d=identicon&r=PG&f=1", "display_name": "Atihska", "link": "https://stackoverflow.com/users/2005490/atihska"}, "edited": false, "score": 0, "creation_date": 1529524989, "post_id": 50956087, "comment_id": 88909846, "body": "Yes. Here <code>test = np.dstack([lons, lats])</code> and my output is <code>[[[ 2  3]   [ 4  6]   [ 6  9]   [ 8 12]]]</code>"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 3, "creation_date": 1529525018, "post_id": 50956087, "comment_id": 88909857, "body": "Oh that&#39;s just how your stdout represents a numpy array.  The values are separated, don&#39;t worry :)  Try converting to a list if you want to verify"}], "tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": true, "score": 2, "last_activity_date": 1529524875, "last_edit_date": 1529524875, "creation_date": 1529524464, "answer_id": 50956087, "question_id": 50955960, "link": "https://stackoverflow.com/questions/50955960/how-can-i-map-2-numpy-arrays-with-same-indices/50956087#50956087", "title": "How can I map 2 numpy arrays with same indices", "body": "<p>You are looking for <a href=\"https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.dstack.html\" rel=\"nofollow noreferrer\"><strong><code>np.dstack</code></strong></a></p>\n\n<blockquote>\n  <p>Stack arrays in sequence depth wise (along third axis).</p>\n</blockquote>\n\n<pre><code>np.dstack([arr1, arr2])\n\narray([[[1, 5],\n        [2, 6],\n        [3, 7],\n        [4, 8]]])\n</code></pre>\n"}], "owner": {"reputation": 3199, "user_id": 2005490, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/60f7a105be69d2445655481949141f7f?s=128&d=identicon&r=PG&f=1", "display_name": "Atihska", "link": "https://stackoverflow.com/users/2005490/atihska"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 50956087, "answer_count": 3, "score": 3, "last_activity_date": 1529524875, "creation_date": 1529523939, "last_edit_date": 1529524500, "question_id": 50955960, "link": "https://stackoverflow.com/questions/50955960/how-can-i-map-2-numpy-arrays-with-same-indices", "title": "How can I map 2 numpy arrays with same indices", "body": "<p>I am trying to map 2 numpy arrays as [x, y] similar to what zip does for lists and tuples.</p>\n\n<p>I have 2 numpy arrays as follows:</p>\n\n<pre><code>arr1 = [1, 2, 3, 4]\narr2 = [5, 6, 7, 8]\n</code></pre>\n\n<p>I am looking for an <code>output as np.array([[[1, 5], [2, 6], [3, 7], [4, 8]]])</code></p>\n\n<p>I tried this but it maps every value and not with same indices. I can add more if conditions here but is there any other way to do so without adding any more if conditions.</p>\n\n<pre><code>res = [arr1, arr2] for a1 in arr1 for a2 in arr2]\n</code></pre>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 938, "user_id": 1640095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/036cdad161fcfa1389d1c0051549dab7?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/1640095/kyle"}, "edited": false, "score": 3, "creation_date": 1529523838, "post_id": 50955924, "comment_id": 88909390, "body": "def check_time_difference(t1, t2):"}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1529523895, "post_id": 50955924, "comment_id": 88909406, "body": "Is your question how you can make it compatible with Python 2 without changing the code, or is your question how you can convert it to Python 2 code? If it&#39;s the former, you can&#39;t. If it&#39;s the latter, remove <code>: ...</code>"}, {"owner": {"reputation": 938, "user_id": 1640095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/036cdad161fcfa1389d1c0051549dab7?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/1640095/kyle"}, "edited": false, "score": 1, "creation_date": 1529523899, "post_id": 50955924, "comment_id": 88909407, "body": "The parts like &quot;t1: datetime&quot; are called Type Hints which are new in python3.5."}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1529523998, "post_id": 50955924, "comment_id": 88909432, "body": "<code>def check_time_difference(t1, t2): return t1-t2</code> .. the func is overly complicated... for python2 you simply remove the type hinting"}], "answers": [{"tags": [], "owner": {"reputation": 23605, "user_id": 1016216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xF5Ew.png?s=128&g=1", "display_name": "L3viathan", "link": "https://stackoverflow.com/users/1016216/l3viathan"}, "is_accepted": false, "score": 0, "last_activity_date": 1529524090, "creation_date": 1529524090, "answer_id": 50955998, "question_id": 50955924, "link": "https://stackoverflow.com/questions/50955924/how-to-convert-functionnamet1-datetime-t2-datetime-to-python-2/50955998#50955998", "title": "how to convert FunctionName(t1: datetime, t2: datetime): to Python 2", "body": "<p>Type hints, <a href=\"https://www.python.org/dev/peps/pep-0484/\" rel=\"nofollow noreferrer\">PEP 484</a>, are new in Python 3.5.</p>\n\n<p>The code you use will work under Python 2 if you just remove them:</p>\n\n<pre><code>def check_time_difference(t1, t2):\n</code></pre>\n\n<p>To make it truly compatible (as in: mypy will still be able to typecheck it), add a type hint comment:</p>\n\n<pre><code>def check_time_difference(t1, t2):\n    # type: (datetime, datetime) -&gt; timedelta\n</code></pre>\n\n<p>As far as I can see form <a href=\"https://mypy.readthedocs.io/en/latest/python2.html\" rel=\"nofollow noreferrer\">the mypy docs</a> this syntax requires the return type (in this case: timedelta) to be annotated, too. In your Python 3 syntax example, it is ommitted, but it would look like:</p>\n\n<pre><code>def check_time_difference(t1: datetime, t2: datetime) -&gt; timedelta:\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": false, "score": 0, "last_activity_date": 1529524150, "creation_date": 1529524150, "answer_id": 50956009, "question_id": 50955924, "link": "https://stackoverflow.com/questions/50955924/how-to-convert-functionnamet1-datetime-t2-datetime-to-python-2/50956009#50956009", "title": "how to convert FunctionName(t1: datetime, t2: datetime): to Python 2", "body": "<p>Just remove the annotations; they don't have any impact on the functionality anyway.</p>\n\n<pre><code>def check_time_difference(t1, T2):\n</code></pre>\n\n<p>Note, as mentioned in the comments, the function is unnecessarily complicated - it should just return <code>t1 - t2</code>.</p>\n"}], "owner": {"reputation": 781, "user_id": 8644283, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f848eda3b3994c341f237c9e53f2923b?s=128&d=identicon&r=PG&f=1", "display_name": "Kade Williams", "link": "https://stackoverflow.com/users/8644283/kade-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 828, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1529524150, "creation_date": 1529523743, "question_id": 50955924, "link": "https://stackoverflow.com/questions/50955924/how-to-convert-functionnamet1-datetime-t2-datetime-to-python-2", "title": "how to convert FunctionName(t1: datetime, t2: datetime): to Python 2", "body": "<p>There is an example located at \n<a href=\"https://stackoverflow.com/questions/1345827/how-do-i-find-the-time-difference-between-two-datetime-objects-in-python\">How do I find the time difference between two datetime objects in python?</a></p>\n\n<p>It uses </p>\n\n<pre><code>def check_time_difference(t1: datetime, t2: datetime):\n</code></pre>\n\n<p>as in </p>\n\n<pre><code>def check_time_difference(t1: datetime, t2: datetime):\n    t1_date = datetime(\n        t1.year,\n        t1.month,\n        t1.day,\n        t1.hour,\n        t1.minute,\n        t1.second)\n\n    t2_date = datetime(\n        t2.year,\n        t2.month,\n        t2.day,\n        t2.hour,\n        t2.minute,\n        t2.second)\n\n    t_elapsed = t1_date - t2_date\n\n    return t_elapsed\n</code></pre>\n\n<p>I'm wondering, is there a way to convert that first line so that it works with Python 2?  In Python 2, I get an error that says</p>\n\n<pre><code>def check_time_difference(t1: datetime, t2: datetime):\nSyntaxError: invalid syntax\n</code></pre>\n\n<p>It works fine in Python 3.</p>\n"}, {"tags": ["python", "django", "celery", "periodic-task"], "comments": [{"owner": {"reputation": 2093, "user_id": 8495108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZW5Oe.png?s=128&g=1", "display_name": "Chiefir", "link": "https://stackoverflow.com/users/8495108/chiefir"}, "edited": false, "score": 0, "creation_date": 1529524662, "post_id": 50955863, "comment_id": 88909708, "body": "What about querying those tables where that information is stored?"}, {"owner": {"reputation": 11, "user_id": 7388240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f000b872575c14258bd98e5938e9aff8?s=128&d=identicon&r=PG&f=1", "display_name": "toert", "link": "https://stackoverflow.com/users/7388240/toert"}, "reply_to_user": {"reputation": 2093, "user_id": 8495108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZW5Oe.png?s=128&g=1", "display_name": "Chiefir", "link": "https://stackoverflow.com/users/8495108/chiefir"}, "edited": false, "score": 0, "creation_date": 1529525579, "post_id": 50955863, "comment_id": 88910104, "body": "DB stores information about the last executing time and crontab/interval for the task. I want to find a built-in method to solve a task."}, {"owner": {"reputation": 2093, "user_id": 8495108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZW5Oe.png?s=128&g=1", "display_name": "Chiefir", "link": "https://stackoverflow.com/users/8495108/chiefir"}, "edited": false, "score": 0, "creation_date": 1529526307, "post_id": 50955863, "comment_id": 88910423, "body": "I think there is no such method. Or let me know if you find something similar built in :)"}], "answers": [{"comments": [{"owner": {"reputation": 583, "user_id": 2433865, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e56509cadf136b0f8dd8408d80a9753f?s=128&d=identicon&r=PG", "display_name": "mrwnt10", "link": "https://stackoverflow.com/users/2433865/mrwnt10"}, "edited": false, "score": 0, "creation_date": 1590554040, "post_id": 58505632, "comment_id": 109719256, "body": "last_run_at doesn&#39;t seem to be consistently accurate for my interval-based periodic task"}], "tags": [], "owner": {"reputation": 21, "user_id": 9523367, "user_type": "registered", "profile_image": "https://graph.facebook.com/1860293880708218/picture?type=large", "display_name": "Yarik Kovalchuk", "link": "https://stackoverflow.com/users/9523367/yarik-kovalchuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1571755955, "last_edit_date": 1571755955, "creation_date": 1571751594, "answer_id": 58505632, "question_id": 50955863, "link": "https://stackoverflow.com/questions/50955863/get-the-next-time-of-starting-a-celery-periodic-task/58505632#58505632", "title": "Get the next time of starting a Celery periodic task", "body": "<p>get my_task from db and then:</p>\n\n<pre><code>last_run_at = my_task.last_run_at\ninterval_every = my_task.interval.every\nnext_run_at = last_run_at + datetime.timedelta(0, interval_every)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7388240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f000b872575c14258bd98e5938e9aff8?s=128&d=identicon&r=PG&f=1", "display_name": "toert", "link": "https://stackoverflow.com/users/7388240/toert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571755955, "creation_date": 1529523489, "question_id": 50955863, "link": "https://stackoverflow.com/questions/50955863/get-the-next-time-of-starting-a-celery-periodic-task", "title": "Get the next time of starting a Celery periodic task", "body": "<p>I have several Celery periodic tasks which were defined via Django Celery admin page. How can I get information using Python about when tasks will be executed in the next time?</p>\n"}, {"tags": ["python", "sql", "date", "reporting-services", "sql-server-2016"], "comments": [{"owner": {"reputation": 7147, "user_id": 5464747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60df21c4da5e9dbe92aff62b4ded3b2?s=128&d=identicon&r=PG", "display_name": "dfundako", "link": "https://stackoverflow.com/users/5464747/dfundako"}, "edited": false, "score": 2, "creation_date": 1529523948, "post_id": 50955856, "comment_id": 88909421, "body": "In SQL Server, use EOMONTH() and DATEADD() to get your previous month ranges or dates. I&#39;m sure that would have come up when you searched &#39;SQL Server previous month end date&#39;."}], "answers": [{"tags": [], "owner": {"reputation": 584, "user_id": 7828702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/862afd555e6f7e6c6377601b53607aa0?s=128&d=identicon&r=PG&f=1", "display_name": "GandRalph", "link": "https://stackoverflow.com/users/7828702/gandralph"}, "is_accepted": false, "score": 0, "last_activity_date": 1529583848, "creation_date": 1529583848, "answer_id": 50968518, "question_id": 50955856, "link": "https://stackoverflow.com/questions/50955856/month-end-data-for-ssrs-report/50968518#50968518", "title": "Month End Data for SSRS Report", "body": "<p>This will also work:</p>\n\n<pre><code>DECLARE @today DATETIME = CONVERT(CHAR(8), GETDATE(), 112) \nSELECT DATEADD(DAY, - DAY(@Today), @Today) [Last Day of Last Month]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8839371, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7QxGcI2aAPc/AAAAAAAAAAI/AAAAAAAAAUo/rQk8LZmqOiI/photo.jpg?sz=128", "display_name": "wsnipes91", "link": "https://stackoverflow.com/users/8839371/wsnipes91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 255, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1529583848, "creation_date": 1529523454, "last_edit_date": 1529523524, "question_id": 50955856, "link": "https://stackoverflow.com/questions/50955856/month-end-data-for-ssrs-report", "title": "Month End Data for SSRS Report", "body": "<p>I am attempting to build an SSRS report that calls data from a shared data source. I need to build a table with several fields:</p>\n\n<p>Loan No, Borrower Name, Balance Today, Balance Month End</p>\n\n<p>I have created two data sources that are redundant; one for the date the report is ran (Balance today) and one to get the data from a date in the past (Balance Month End).</p>\n\n<p>In Python I am able to set a variable based upon an elif to get the previous month end (cant be a holiday or a weekend) using this logic:</p>\n\n<pre><code>import datetime\n\ntoday = datetime.date(2018, 6, 19)\nmonthend = datetime.date(2018, 12, 14)\n\nif today &gt;= datetime.date(2018, 6, 1) and today &lt; datetime.date(2018, 6, 30):\n    monthend = datetime.date(2018, 5, 31)\n    print(monthend)\nelif today &gt;= datetime.date(2018, 7, 1) and today &lt; datetime.date(2018, 7, 31):\n    monthend = datetime.date(2018, 6, 29)\n    print(monthend)\nelif today &gt;= datetime.date(2018, 8, 1) and today &lt; datetime.date(2018, 8, 31):\n    monthend = datetime.date(2018, 7, 31)\n    print(monthend)\nelif today &gt;= datetime.date(2018, 9, 1) and today &lt; datetime.date(2018, 9, 30):\n    monthend = datetime.date(2018, 8, 31)\n    print(monthend)\nelif today &gt;= datetime.date(2018, 10, 1) and today &lt; datetime.date(2018,\n                           10, 31):\n    monthend = datetime.date(2018, 9, 28)\n    print(monthend)\nelif today &gt;= datetime.date(2018, 11, 1) and today &lt; datetime.date(2018,\n                           11, 30):\n    monthend = datetime.date(2018, 10, 31)\n    print(monthend)\nelif today &gt;= datetime.date(2018, 12, 1) and today &lt; datetime.date(2018,\n                           12, 31):\n    monthend = datetime.date(2018, 11, 30)\n    print(monthend)\nelif today &gt;= datetime.date(2019, 1, 1) and today &lt; datetime.date(2019,\n                           1, 31):\n    monthend = datetime.date(2018, 12, 31)\n    print(monthend)\n</code></pre>\n\n<p>How would I write this logic either on the report side or db side to get the previous month end date parameter?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "python-3.x", "redis", "queue", "python-rq"], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 11354529, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-T0qnDl1WPCA/AAAAAAAAAAI/AAAAAAAAADY/xYy3lFXiZSc/photo.jpg?sz=128", "display_name": "user11354529", "link": "https://stackoverflow.com/users/11354529/user11354529"}, "is_accepted": false, "score": 1, "last_activity_date": 1560575080, "creation_date": 1560575080, "answer_id": 56607518, "question_id": 50955845, "link": "https://stackoverflow.com/questions/50955845/what-are-queue-classes-worker-classes-job-classes-in-python-rq-package/56607518#56607518", "title": "What are Queue classes, Worker Classes, Job Classes in Python rq package", "body": "<p>It's just inheritance of classes ( Worker from rq for example )</p>\n\n<p>Let it as base_worker.py</p>\n\n<pre><code>import pseudo_realy_necessery_library_for_every_job\n\nfrom rq import Worker as BaseClass\nclass Worker(BaseClass):\n    def __init__(self, queues=None, *args, **kwargs):\n        u'''\n        Constructor.\n\n        Accepts the same arguments as the constructor of\n        ``rq.worker.Worker``.\n        '''\n\n\n        super().__init__(queues, *args, **kwargs)\n</code></pre>\n\n<p>and u can run</p>\n\n<pre><code>rq worker --worker-class='base_worker.Worker'\n</code></pre>\n\n<p>In my case I have exclude reloading library for every new job </p>\n"}], "owner": {"reputation": 51505, "user_id": 741099, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9a7101fe3ba50e621e91ee1edf9d27bb?s=128&d=identicon&r=PG", "display_name": "Nyxynyx", "link": "https://stackoverflow.com/users/741099/nyxynyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 952, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1560575080, "creation_date": 1529523434, "last_edit_date": 1529565873, "question_id": 50955845, "link": "https://stackoverflow.com/questions/50955845/what-are-queue-classes-worker-classes-job-classes-in-python-rq-package", "title": "What are Queue classes, Worker Classes, Job Classes in Python rq package", "body": "<p>While reading through the <a href=\"http://python-rq.org/docs/workers/\" rel=\"nofollow noreferrer\"><code>rq</code> docs</a>, I notice that there are some arguments that you can pass to <code>rq worker</code> when starting the worker</p>\n\n<p>Example:</p>\n\n<pre><code>rq worker --worker-class 'foo.bar.MyWorker'\n</code></pre>\n\n<p>Argument list includes</p>\n\n<ul>\n<li><code>--worker-class</code> or <code>-w</code>: RQ Worker class to use (e.g rq worker --worker-class 'foo.bar.MyWorker')</li>\n<li><code>--job-class</code> or <code>-j</code>: RQ Job class to use.</li>\n<li><code>--queue-class</code>: RQ Queue class to use.</li>\n</ul>\n\n<p>What are worker classes, job classes and queue classes, and when do you utilize them?</p>\n"}, {"tags": ["python", "django"], "answers": [{"comments": [{"owner": {"reputation": 1643, "user_id": 8340867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D3XJl.jpg?s=128&g=1", "display_name": "ThunderHorn", "link": "https://stackoverflow.com/users/8340867/thunderhorn"}, "reply_to_user": {"reputation": 302, "user_id": 9297798, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1961677680762861/picture?type=large", "display_name": "Sue-May Xu", "link": "https://stackoverflow.com/users/9297798/sue-may-xu"}, "edited": false, "score": 0, "creation_date": 1529524655, "post_id": 50955965, "comment_id": 88909704, "body": "<code>$(&#39;.member-name&#39;).text(result);</code> did you add the &#39;.&#39; because I did a typo error  try sending the <code>selected_member.name</code> in the responce and try to <code>alert(responce)</code> to see if it gives you back the member&#39;s name"}, {"owner": {"reputation": 1643, "user_id": 8340867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D3XJl.jpg?s=128&g=1", "display_name": "ThunderHorn", "link": "https://stackoverflow.com/users/8340867/thunderhorn"}, "reply_to_user": {"reputation": 302, "user_id": 9297798, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1961677680762861/picture?type=large", "display_name": "Sue-May Xu", "link": "https://stackoverflow.com/users/9297798/sue-may-xu"}, "edited": false, "score": 0, "creation_date": 1529526079, "post_id": 50955965, "comment_id": 88910324, "body": "@ Sue-May Xu what does the <code>alert(responce)</code> says"}, {"owner": {"reputation": 302, "user_id": 9297798, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1961677680762861/picture?type=large", "display_name": "Sue-May Xu", "link": "https://stackoverflow.com/users/9297798/sue-may-xu"}, "edited": false, "score": 0, "creation_date": 1529532849, "post_id": 50955965, "comment_id": 88912992, "body": "not sure where I was wrong, when I click the button, nothing shows up."}, {"owner": {"reputation": 1643, "user_id": 8340867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D3XJl.jpg?s=128&g=1", "display_name": "ThunderHorn", "link": "https://stackoverflow.com/users/8340867/thunderhorn"}, "reply_to_user": {"reputation": 302, "user_id": 9297798, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1961677680762861/picture?type=large", "display_name": "Sue-May Xu", "link": "https://stackoverflow.com/users/9297798/sue-may-xu"}, "edited": false, "score": 0, "creation_date": 1529533364, "post_id": 50955965, "comment_id": 88913132, "body": "@Sue-MayXu <code>form action=&quot;&quot; method=&quot;GET&quot; id=&quot;selection-form</code> the form action is empty so the js doesnt get the url  did you try debugging the view <code>print(&quot;member select&quot;)</code> underneath <code>def member_select(request):</code> just to check if activates the function"}, {"owner": {"reputation": 302, "user_id": 9297798, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1961677680762861/picture?type=large", "display_name": "Sue-May Xu", "link": "https://stackoverflow.com/users/9297798/sue-may-xu"}, "edited": false, "score": 0, "creation_date": 1529549878, "post_id": 50955965, "comment_id": 88916502, "body": "yes. I print(&#39;selected_member&#39;) under def member_select(request): , but nothing shows up @Kostadin Slavov"}], "tags": [], "owner": {"reputation": 1643, "user_id": 8340867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D3XJl.jpg?s=128&g=1", "display_name": "ThunderHorn", "link": "https://stackoverflow.com/users/8340867/thunderhorn"}, "is_accepted": false, "score": 0, "last_activity_date": 1529524612, "last_edit_date": 1529524612, "creation_date": 1529523963, "answer_id": 50955965, "question_id": 50955838, "link": "https://stackoverflow.com/questions/50955838/how-to-fetch-data-from-dropdown-selection-and-display-it-on-the-same-html-page/50955965#50955965", "title": "How to fetch data from dropdown selection and display it on the same HTML page? Django", "body": "<p>Maybe use an empty <code>&lt;p class='member-name'&gt;&lt;p&gt;</code> and \nafter choosing in the jquery success function \nchange to</p>\n\n<pre><code>  success:function (result) {\n                $('.member-name').text(result);\n\n            },\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 302, "user_id": 9297798, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1961677680762861/picture?type=large", "display_name": "Sue-May Xu", "link": "https://stackoverflow.com/users/9297798/sue-may-xu"}, "edited": false, "score": 0, "creation_date": 1529525521, "post_id": 50956143, "comment_id": 88910080, "body": "what is content_type ? this did not work :/. @Dimitris Kougioumtzis"}, {"owner": {"reputation": 1870, "user_id": 924300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b50f3f7975431537e7855610a6eb66af?s=128&d=identicon&r=PG", "display_name": "Dimitris Kougioumtzis", "link": "https://stackoverflow.com/users/924300/dimitris-kougioumtzis"}, "reply_to_user": {"reputation": 302, "user_id": 9297798, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1961677680762861/picture?type=large", "display_name": "Sue-May Xu", "link": "https://stackoverflow.com/users/9297798/sue-may-xu"}, "edited": false, "score": 0, "creation_date": 1529525882, "post_id": 50956143, "comment_id": 88910230, "body": "yes because the id in your javascript function is wrong  (typo) change it to  $(&quot;#selection-button&quot;).  The content type tells django function that the response from the request is a json object"}, {"owner": {"reputation": 302, "user_id": 9297798, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1961677680762861/picture?type=large", "display_name": "Sue-May Xu", "link": "https://stackoverflow.com/users/9297798/sue-may-xu"}, "edited": false, "score": 0, "creation_date": 1529532686, "post_id": 50956143, "comment_id": 88912942, "body": "I changed it to &#39;#selection_button&#39;, but still does not work"}, {"owner": {"reputation": 1870, "user_id": 924300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b50f3f7975431537e7855610a6eb66af?s=128&d=identicon&r=PG", "display_name": "Dimitris Kougioumtzis", "link": "https://stackoverflow.com/users/924300/dimitris-kougioumtzis"}, "reply_to_user": {"reputation": 302, "user_id": 9297798, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1961677680762861/picture?type=large", "display_name": "Sue-May Xu", "link": "https://stackoverflow.com/users/9297798/sue-may-xu"}, "edited": false, "score": 0, "creation_date": 1529556050, "post_id": 50956143, "comment_id": 88917793, "body": "@Sue-May Xu i edited my answer and i added a div res so to display the result of the ajax inside that div. So when you run it  the result from ajax should display inside the div."}, {"owner": {"reputation": 302, "user_id": 9297798, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1961677680762861/picture?type=large", "display_name": "Sue-May Xu", "link": "https://stackoverflow.com/users/9297798/sue-may-xu"}, "edited": false, "score": 0, "creation_date": 1529584835, "post_id": 50956143, "comment_id": 88933903, "body": "How to display &#39;username&#39; instead of user &#39;id&#39;? For right now, it only shows id. Btw, how to store these data into database ? Since all the information is gone when I refresh the page.  @Dimitris Kougioumtzis"}], "tags": [], "owner": {"reputation": 1870, "user_id": 924300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b50f3f7975431537e7855610a6eb66af?s=128&d=identicon&r=PG", "display_name": "Dimitris Kougioumtzis", "link": "https://stackoverflow.com/users/924300/dimitris-kougioumtzis"}, "is_accepted": false, "score": 0, "last_activity_date": 1529555869, "last_edit_date": 1529555869, "creation_date": 1529524677, "answer_id": 50956143, "question_id": 50955838, "link": "https://stackoverflow.com/questions/50955838/how-to-fetch-data-from-dropdown-selection-and-display-it-on-the-same-html-page/50956143#50956143", "title": "How to fetch data from dropdown selection and display it on the same HTML page? Django", "body": "<p>try this (not fully tested)</p>\n\n<pre><code>from django.core import serializers\nfrom django.http import HttpResponse\ndef member_select(request):\n    selection = request.GET.get('id',None)\n    if selection:\n        data = serializers.serialize('json',User.objects.filter(pk=selection))\n    else:\n        data = {}\n    return HttpResponse(data, content_type='application/json')\n</code></pre>\n\n<p>from the docs <a href=\"https://docs.djangoproject.com/en/2.0/topics/serialization/\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/2.0/topics/serialization/</a></p>\n\n<p>In javascript ajax funtion the response should be a user object if exists or empty json string </p>\n\n<pre><code>&lt;form action=\"\" method=\"GET\" id=\"selection-form\"&gt;\n    {% csrf_token %}\n    &lt;select id=\"member_list\"&gt;\n       {% for user in user %}\n          &lt;option value=\"{{user.pk}}\"&gt;{{ user.username }}&lt;/option&gt;\n       {% endfor %}\n     &lt;/select&gt;\n     &lt;input type=\"button\" value=\"Add member\" id=\"selection-button\"&gt;\n  &lt;/form&gt;\n   &lt;di id='res'&gt;&lt;/div&gt;\n\n\n  $(\"#selection-button\").on('click', function(e) {\n     e.preventDefault();\n     var value =$('#member_list').val(); \n      $.ajax({\n         type:'GET',\n         url:'.',\n         data:{\n             id:value\n         },\n         success:function (result) {\n            alert('okay');\n            $('#res').append(result);\n            console.info(result);\n         },\n         error:function (result) {\n              alert('error');\n         }\n       });\n     });\n</code></pre>\n"}], "owner": {"reputation": 302, "user_id": 9297798, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1961677680762861/picture?type=large", "display_name": "Sue-May Xu", "link": "https://stackoverflow.com/users/9297798/sue-may-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 394, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1529555869, "creation_date": 1529523406, "question_id": 50955838, "link": "https://stackoverflow.com/questions/50955838/how-to-fetch-data-from-dropdown-selection-and-display-it-on-the-same-html-page", "title": "How to fetch data from dropdown selection and display it on the same HTML page? Django", "body": "<p>I am doing a project management tool web application. I would like user can choose 'user' from dropdown selection, click 'Add member', then the member will show somewhere under the member?. Here is what I am doing.</p>\n\n<p><a href=\"https://i.stack.imgur.com/NhedY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NhedY.png\" alt=\"Here is what I am doing\"></a></p>\n\n<p>Please do not worry about the styling. I have not done UI yet.</p>\n\n<p>view.py</p>\n\n<pre><code>def member_select(request):\n    if request.method == 'GET':\n        selection = request.GET.get('id',None)\n        if selection:\n            selected_member = User.objects.filter(pk=selection)\n            return selected_member\n</code></pre>\n\n<p>project_index.html</p>\n\n<pre><code> &lt;form action=\"\" method=\"GET\" id=\"selection-form\"&gt;\n                  {% csrf_token %}\n                    &lt;select id=\"member_list\"&gt;\n                            {% for user in user %}\n                        &lt;option&gt;\n                            {{ user.username }}\n                        &lt;/option&gt;\n                            {% endfor %}\n                    &lt;/select&gt;\n                     &lt;input type=\"button\" value=\"Add member\" id=\"selection-button\"&gt;\n                     &lt;/form&gt;\n</code></pre>\n\n<p>base.html</p>\n\n<pre><code> &lt;script&gt;\n      var url = $( '#selection-form' ).attr( 'action' );\n        $(\"selection-button\").onclick(function (e) {\n            e.preventDefault();\n            $.ajax({\n                type:'GET',\n                url:url,\n                data:{\n                    id:$('#member_list').val()\n                },\n                success:function (result) {\n                    alert('okay');\n                },\n                error:function (result) {\n                    alert('error');\n                }\n\n            });\n        });\n\n  &lt;/script&gt;\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "keras"], "comments": [{"owner": {"reputation": 1116, "user_id": 3321301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59ae7e7d455ef113fb15bf3c192d10cf?s=128&d=identicon&r=PG&f=1", "display_name": "josesuero", "link": "https://stackoverflow.com/users/3321301/josesuero"}, "edited": false, "score": 2, "creation_date": 1550792375, "post_id": 50955798, "comment_id": 96411898, "body": "After your change, how do you get dataset_inputs into model? I&#39;m not getting how line keras.models.Model(inputs=dataset_inputs, outputs=logits), and i&#39;m assuming this is the contents of the &quot;model&quot; variable, could you please complete the code, i have the exact same problem but can&#39;t seem to know how to apply your code, thanks in advance"}, {"owner": {"reputation": 771, "user_id": 2184122, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/012fd79085d24c78bb4ff12577ed1376?s=128&d=identicon&r=PG", "display_name": "Robert Lugg", "link": "https://stackoverflow.com/users/2184122/robert-lugg"}, "edited": false, "score": 0, "creation_date": 1583348714, "post_id": 50955798, "comment_id": 107089451, "body": "@mark rofail, I believe this line is incorrect and should receive batch_<b>valid</b>: itr_valid = make_iterator(batch_train)"}], "answers": [{"comments": [{"owner": {"reputation": 628, "user_id": 6205813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1W24S.jpg?s=128&g=1", "display_name": "Mark Rofail", "link": "https://stackoverflow.com/users/6205813/mark-rofail"}, "edited": false, "score": 0, "creation_date": 1529669925, "post_id": 50979587, "comment_id": 88970054, "body": "so I have to wrap tensorflow iterators in a python generator like:      <code>iterator = ds.make_one_shot_iterator()     while True:         next_val = iterator.get_next()         yield sess.run(next_val)</code>"}, {"owner": {"reputation": 778, "user_id": 8262057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64c1614c07a1d6444aa7c09421d9f711?s=128&d=identicon&r=PG&f=1", "display_name": "W. Sam ", "link": "https://stackoverflow.com/users/8262057/w-sam"}, "reply_to_user": {"reputation": 628, "user_id": 6205813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1W24S.jpg?s=128&g=1", "display_name": "Mark Rofail", "link": "https://stackoverflow.com/users/6205813/mark-rofail"}, "edited": false, "score": 0, "creation_date": 1530044007, "post_id": 50979587, "comment_id": 89092421, "body": "Hi, It is me this time asking you :). I am facing now another problem with fit_genertor which is I can get access to validation data. For example you want to evaluate the value of prediction at batch level, in order to accumulated them and then calculate the prediction  for the whole epoch in order to use it for AUC metric. DO you have any idea how we can accomplish this? or I should open a new post for it."}, {"owner": {"reputation": 628, "user_id": 6205813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1W24S.jpg?s=128&g=1", "display_name": "Mark Rofail", "link": "https://stackoverflow.com/users/6205813/mark-rofail"}, "edited": false, "score": 0, "creation_date": 1530098846, "post_id": 50979587, "comment_id": 89112996, "body": "please open a new question regardless, so others would benefit."}, {"owner": {"reputation": 628, "user_id": 6205813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1W24S.jpg?s=128&g=1", "display_name": "Mark Rofail", "link": "https://stackoverflow.com/users/6205813/mark-rofail"}, "edited": false, "score": 0, "creation_date": 1530102156, "post_id": 50979587, "comment_id": 89115150, "body": "to my knowledge you can not access minibatch metrics, however definig a custom loss function and including it in the metrics when you compile the model should do just that. Keras should give you the average auc per epoch  this is the auc loss function I came up with:  <code>from sklearn.metrics import roc_auc_score  def roc_auc(y_true, y_pred):     return roc_auc_score(y_true, y_pred)</code>"}, {"owner": {"reputation": 778, "user_id": 8262057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64c1614c07a1d6444aa7c09421d9f711?s=128&d=identicon&r=PG&f=1", "display_name": "W. Sam ", "link": "https://stackoverflow.com/users/8262057/w-sam"}, "reply_to_user": {"reputation": 628, "user_id": 6205813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1W24S.jpg?s=128&g=1", "display_name": "Mark Rofail", "link": "https://stackoverflow.com/users/6205813/mark-rofail"}, "edited": false, "score": 0, "creation_date": 1530122382, "post_id": 50979587, "comment_id": 89127574, "body": "Sorry I meant &quot; I can&#39;t get access to validation&quot; instead of I can. Yes probably I will open a new post for it."}, {"owner": {"reputation": 628, "user_id": 6205813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1W24S.jpg?s=128&g=1", "display_name": "Mark Rofail", "link": "https://stackoverflow.com/users/6205813/mark-rofail"}, "edited": false, "score": 0, "creation_date": 1530122870, "post_id": 50979587, "comment_id": 89127825, "body": "Keras automatically computes all metrics with the validation data if provided at the end of the epoch"}, {"owner": {"reputation": 778, "user_id": 8262057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64c1614c07a1d6444aa7c09421d9f711?s=128&d=identicon&r=PG&f=1", "display_name": "W. Sam ", "link": "https://stackoverflow.com/users/8262057/w-sam"}, "reply_to_user": {"reputation": 628, "user_id": 6205813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1W24S.jpg?s=128&g=1", "display_name": "Mark Rofail", "link": "https://stackoverflow.com/users/6205813/mark-rofail"}, "edited": false, "score": 0, "creation_date": 1530131201, "post_id": 50979587, "comment_id": 89131541, "body": "There is problem with AUC metric with Keras. I will explain in the post. By the way,  I  just saw in your code you put target_tensors=[dataset_labels] in model.compile. I think you don&#39;t need that if you use the generator. Is it written by mistake?"}, {"owner": {"reputation": 778, "user_id": 8262057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64c1614c07a1d6444aa7c09421d9f711?s=128&d=identicon&r=PG&f=1", "display_name": "W. Sam ", "link": "https://stackoverflow.com/users/8262057/w-sam"}, "reply_to_user": {"reputation": 628, "user_id": 6205813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1W24S.jpg?s=128&g=1", "display_name": "Mark Rofail", "link": "https://stackoverflow.com/users/6205813/mark-rofail"}, "edited": false, "score": 1, "creation_date": 1534109260, "post_id": 50979587, "comment_id": 90580827, "body": "The  @Dat-Nguyen&#39;s solution has been changed into passing the iterator directly into  model.fit instead of fit_generator. it should be supported with tensor flow 1.9, but it wasn&#39;t worked with me, give an error of &quot;AttributeError: &#39;Iterator&#39; object has no attribute &#39;ndim&#39;  &quot;."}], "tags": [], "owner": {"reputation": 778, "user_id": 8262057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64c1614c07a1d6444aa7c09421d9f711?s=128&d=identicon&r=PG&f=1", "display_name": "W. Sam ", "link": "https://stackoverflow.com/users/8262057/w-sam"}, "is_accepted": true, "score": 2, "last_activity_date": 1529632259, "creation_date": 1529632259, "answer_id": 50979587, "question_id": 50955798, "link": "https://stackoverflow.com/questions/50955798/keras-model-fit-with-tf-dataset-api-validation-data/50979587#50979587", "title": "Keras model.fit() with tf.dataset API + validation_data", "body": "<p>I solved the problem by using fit_genertor. I found the solution <a href=\"https://stackoverflow.com/questions/46135499/how-to-properly-combine-tensorflows-dataset-api-and-keras\">here</a>. I applied @Dat-Nguyen's solution.</p>\n\n<p>You need simply to create two iterators, one for  training and one for validation and then create your own generator where you will extract batches from the dataset and provide the data in form of (batch_data, batch_labels) . Finally in model.fit_generator you will pass the train_generator and validation_generator. </p>\n"}, {"tags": [], "owner": {"reputation": 188, "user_id": 3880039, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ef1e3862a8cc3beec4ebeaf4b9407b0d?s=128&d=identicon&r=PG&f=1", "display_name": "Razorocean", "link": "https://stackoverflow.com/users/3880039/razorocean"}, "is_accepted": false, "score": 2, "last_activity_date": 1555412647, "last_edit_date": 1555412647, "creation_date": 1546450804, "answer_id": 54010782, "question_id": 50955798, "link": "https://stackoverflow.com/questions/50955798/keras-model-fit-with-tf-dataset-api-validation-data/54010782#54010782", "title": "Keras model.fit() with tf.dataset API + validation_data", "body": "<p>The way to connect a reinitializable iterator to a Keras model is to plug in an Iterator that returns both the x and y values concurrently:</p>\n\n<pre><code>sess = tf.Session()\nkeras.backend.set_session(sess) \n\nx = np.random.random((5, 2))\ny = np.array([0, 1] * 3 + [1, 0] * 2).reshape(5, 2) # One hot encoded\ninput_dataset = tf.data.Dataset.from_tensor_slices((x, y))\n\n# Create your reinitializable_iterator and initializer\nreinitializable_iterator = tf.data.Iterator.from_structure(input_dataset.output_types, input_dataset.output_shapes)\ninit_op = reinitializable_iterator.make_initializer(input_dataset)\n\n#run the initializer\nsess.run(init_op) # feed_dict if you're using placeholders as input\n\n# build keras model and plug in the iterator\nmodel = keras.Model.model(...)\nmodel.compile(...)\nmodel.fit(reinitializable_iterator,...)\n</code></pre>\n\n<p>If you also have a validation dataset, the easiest thing to do is to just create a separate iterator and plug it in the validation_data parameter.  Make sure to define your steps_per_epoch and validation_steps since they cannot be inferred.  </p>\n"}], "owner": {"reputation": 628, "user_id": 6205813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1W24S.jpg?s=128&g=1", "display_name": "Mark Rofail", "link": "https://stackoverflow.com/users/6205813/mark-rofail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13334, "favorite_count": 8, "accepted_answer_id": 50979587, "answer_count": 2, "score": 17, "last_activity_date": 1555412647, "creation_date": 1529523255, "last_edit_date": 1529680597, "question_id": 50955798, "link": "https://stackoverflow.com/questions/50955798/keras-model-fit-with-tf-dataset-api-validation-data", "title": "Keras model.fit() with tf.dataset API + validation_data", "body": "<p>So I have got my keras model to work with a tf.Dataset through the following code:</p>\n\n<pre><code># Initialize batch generators(returns tf.Dataset)\nbatch_train = build_features.get_train_batches(batch_size=batch_size)\n\n# Create TensorFlow Iterator object\niterator = batch_train.make_one_shot_iterator()\ndataset_inputs, dataset_labels = iterator.get_next()\n\n# Create Model\nlogits = .....(some layers)\nkeras.models.Model(inputs=dataset_inputs, outputs=logits)\n\n# Train network\nmodel.compile(optimizer=train_opt, loss=model_loss, target_tensors=[dataset_labels])\nmodel.fit(epochs=epochs, steps_per_epoch=num_batches, callbacks=callbacks, verbose=1)\n</code></pre>\n\n<p>however when I try to pass <code>validation_data</code> parameter to the model. fit it tells me that I cannot use it with the generator. Is there a way to use validation while using tf.Dataset</p>\n\n<p><strong>for example in tensorflow I could do the following</strong>:</p>\n\n<pre><code># initialize batch generators\nbatch_train = build_features.get_train_batches(batch_size=batch_size)\nbatch_valid = build_features.get_valid_batches(batch_size=batch_size)\n\n# create TensorFlow Iterator object\niterator = tf.data.Iterator.from_structure(batch_train.output_types,\n                                           batch_train.output_shapes)\n\n# create two initialization ops to switch between the datasets\ninit_op_train = iterator.make_initializer(batch_train)\ninit_op_valid = iterator.make_initializer(batch_valid)\n</code></pre>\n\n<p>then just use <code>sess.run(init_op_train)</code> and <code>sess.run(init_op_valid)</code> to switch between the datasets</p>\n\n<p>I tried implementing a callback that does just that (switch to validation set, predict and back) but it tells me I can't use model.predict in a callback</p>\n\n<p>can someone help me get validation working with Keras+Tf.Dataset</p>\n\n<h2>edit: incorporate answer into the code</h2>\n\n<p><strong>so FINALLY what worked for me, thanks to the selected answer is:</strong></p>\n\n<pre><code># Initialize batch generators(returns tf.Dataset)\nbatch_train = # returns tf.Dataset\nbatch_valid = # returns tf.Dataset\n\n# Create TensorFlow Iterator object and wrap it in a generator\nitr_train = make_iterator(batch_train)\nitr_valid = make_iterator(batch_train)\n\n# Create Model\nlogits = # the keras model\nkeras.models.Model(inputs=dataset_inputs, outputs=logits)\n\n# Train network\nmodel.compile(optimizer=train_opt, loss=model_loss, target_tensors=[dataset_labels])\nmodel.fit_generator(\n    generator=itr_train, validation_data=itr_valid, validation_steps=batch_size,\n    epochs=epochs, steps_per_epoch=num_batches, callbacks=cbs, verbose=1, workers=0)\n\ndef make_iterator(dataset):\n    iterator = dataset.make_one_shot_iterator()\n    next_val = iterator.get_next()\n\n    with K.get_session().as_default() as sess:\n        while True:\n            *inputs, labels = sess.run(next_val)\n            yield inputs, labels\n</code></pre>\n\n<p>This doesn't introduce any <strong>overhead</strong></p>\n"}, {"tags": ["python", "arrays", "list", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 681, "user_id": 8173159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3985aa8d03a6e360e233ef4eaec34691?s=128&d=identicon&r=PG&f=1", "display_name": "James Carter", "link": "https://stackoverflow.com/users/8173159/james-carter"}, "edited": false, "score": 0, "creation_date": 1529681711, "post_id": 50956127, "comment_id": 88977240, "body": "Thank you for your solution! I am still working on understanding it. Only thing is, you have the opposite output as I expected. In your code, pos_out are the rows from pos that I expect to be deleted. What do you recommend to edit to make this happen?"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 681, "user_id": 8173159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3985aa8d03a6e360e233ef4eaec34691?s=128&d=identicon&r=PG&f=1", "display_name": "James Carter", "link": "https://stackoverflow.com/users/8173159/james-carter"}, "edited": false, "score": 0, "creation_date": 1529681855, "post_id": 50956127, "comment_id": 88977306, "body": "@JamesCarter Invert the mask : <code>pos[~(bincount2D_vectorized(pos)&gt;np.bincount(p)).any(1)]</code>."}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 0, "last_activity_date": 1529524631, "creation_date": 1529524631, "answer_id": 50956127, "question_id": 50955782, "link": "https://stackoverflow.com/questions/50955782/best-way-to-remove-rows-that-have-more-of-a-certain-value-than-a-given-amount-n/50956127#50956127", "title": "Best way to remove rows that have more of a certain value than a given amount (numpy)", "body": "<p>For positive integers, we can make use of <code>bincount</code>. So, we will use <a href=\"https://stackoverflow.com/a/46256361/\"><code>2D</code> bincount solution</a> to get the binned counts per row in <code>pos</code> and compare against the binned counts for <code>p</code> and use that mask to select valid rows off <code>pos</code>, like so -</p>\n\n<pre><code># https://stackoverflow.com/a/46256361/ @Divakar\ndef bincount2D_vectorized(a):    \n    N = a.max()+1\n    a_offs = a + np.arange(a.shape[0])[:,None]*N\n    return np.bincount(a_offs.ravel(), minlength=a.shape[0]*N).reshape(-1,N)\n\npos_out = pos[(bincount2D_vectorized(pos)&gt;np.bincount(p)).any(1)]\n</code></pre>\n"}], "owner": {"reputation": 681, "user_id": 8173159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3985aa8d03a6e360e233ef4eaec34691?s=128&d=identicon&r=PG&f=1", "display_name": "James Carter", "link": "https://stackoverflow.com/users/8173159/james-carter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 50956127, "answer_count": 1, "score": 2, "last_activity_date": 1529536760, "creation_date": 1529523197, "last_edit_date": 1529536760, "question_id": 50955782, "link": "https://stackoverflow.com/questions/50955782/best-way-to-remove-rows-that-have-more-of-a-certain-value-than-a-given-amount-n", "title": "Best way to remove rows that have more of a certain value than a given amount (numpy)", "body": "<p>I created an array of numbers of column size <code>d</code>, where the numbers are different combinations of <code>set(p)</code>. Next, I want to delete the rows where there are more instances of a number than there were in <code>p</code>. I can do it with a <code>for</code> loop, here is my code:</p>\n\n<pre><code>import numpy as np\nimport itertools as it\n\nfrom collections import Counter\n\np = [0,0,0,1,1,1,1,2,2,2,2,2,3,3,3,4,4,4,4,4,5,5,5]\nassert (len(set(p)) != 1)\ncnt = Counter(p)\npos = np.array(list(it.product(set(p), repeat=d)))\nds = []\nfor i in range(len(pos)):\n    for j, k in cnt.items():\n        if len(np.where(pos[i] == j)[0]) &gt; k:\n            ds.append(i)\npos = np.delete(pos, ds, axis=0)\n</code></pre>\n\n<p>I am looking for a faster way to do this. Thank you!</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1529523391, "post_id": 50955777, "comment_id": 88909178, "body": "Show how you run it. There&#39;s no error here and Python doesn&#39;t compile in the sense you mean."}], "answers": [{"tags": [], "owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "is_accepted": false, "score": 1, "last_activity_date": 1529523270, "creation_date": 1529523270, "answer_id": 50955804, "question_id": 50955777, "link": "https://stackoverflow.com/questions/50955777/error-when-reading-from-input-line-in-python/50955804#50955804", "title": "Error when reading from input line in Python", "body": "<p><code>.split()</code> splits on space. if your numbers have no space between it won't work, as they both will be in a single element (<code>tokens[0]</code>)</p>\n\n<p>Demonstration:</p>\n\n<pre><code>&gt;&gt;&gt; '12'.split()\n['12']\n&gt;&gt;&gt; '1 2'.split()\n['1', '2']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6167, "user_id": 7848065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-JkP5Ml62Rfo/AAAAAAAAAAI/AAAAAAAAABY/_BvmzYvsy74/photo.jpg?sz=128", "display_name": "whackamadoodle3000", "link": "https://stackoverflow.com/users/7848065/whackamadoodle3000"}, "is_accepted": true, "score": 0, "last_activity_date": 1529523551, "creation_date": 1529523551, "answer_id": 50955880, "question_id": 50955777, "link": "https://stackoverflow.com/questions/50955777/error-when-reading-from-input-line-in-python/50955880#50955880", "title": "Error when reading from input line in Python", "body": "<p>Try this:</p>\n\n<pre><code>import sys\n\ninputed = sys.stdin.read() \ntokens = str(inputed)\na = int(tokens[0]) \nb = int(tokens[1]) \n\nprint(a + b)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9969460, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Pw7N39iia-o/AAAAAAAAAAI/AAAAAAAAAAA/rBocUZ9Jq40/photo.jpg?sz=128", "display_name": "user9969460", "link": "https://stackoverflow.com/users/9969460/user9969460"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "closed_date": 1529523500, "accepted_answer_id": 50955880, "answer_count": 2, "score": 0, "last_activity_date": 1529523551, "creation_date": 1529523175, "question_id": 50955777, "link": "https://stackoverflow.com/questions/50955777/error-when-reading-from-input-line-in-python", "closed_reason": "Duplicate", "title": "Error when reading from input line in Python", "body": "<h1>Uses python3</h1>\n\n<pre><code>import sys\n\ninput = sys.stdin.read() \ntokens = input.split()\na = int(tokens[0]) \nb = int(tokens[1]) \n\nprint(a + b)\n</code></pre>\n\n<hr>\n\n<p>I am trying to compile this simple code in Python. HOwever it gives me Index Error:List Index out of range. I just need to compile this code and then feed 2 digits to it at input line.</p>\n"}, {"tags": ["python", "pandas", "pivot-table"], "comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 1, "creation_date": 1529523217, "post_id": 50955736, "comment_id": 88909105, "body": "Please read <a href=\"http://stackoverflow.com/questions/20109391/how-to-make-good-reproducible-pandas-examples\">how to make good reproducible pandas examples</a> and edit your post correspondingly."}, {"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 2, "creation_date": 1529523226, "post_id": 50955736, "comment_id": 88909108, "body": "1) post your data, not images of your data 2) use <code>df.assign</code> to create a new column"}, {"owner": {"reputation": 1, "user_id": 9969444, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-K_qCWGsHzQk/AAAAAAAAAAI/AAAAAAAAClc/SfzQQQ9Y77o/photo.jpg?sz=128", "display_name": "Gremlin", "link": "https://stackoverflow.com/users/9969444/gremlin"}, "edited": false, "score": 0, "creation_date": 1529523539, "post_id": 50955736, "comment_id": 88909254, "body": "problem not in creating. I can&#39;t call &#39;2018&#39; cause it not in columns name. its in columns values."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1529526109, "post_id": 50955736, "comment_id": 88910338, "body": "i guess you are dealing with the multi-level columns. Please post a small reproducible sample input data set (as text, so we could copy and paste it) and your desired data set..."}, {"owner": {"reputation": 1, "user_id": 9969444, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-K_qCWGsHzQk/AAAAAAAAAAI/AAAAAAAAClc/SfzQQQ9Y77o/photo.jpg?sz=128", "display_name": "Gremlin", "link": "https://stackoverflow.com/users/9969444/gremlin"}, "edited": false, "score": 0, "creation_date": 1529559616, "post_id": 50955736, "comment_id": 88918979, "body": "Ty. I am posted"}], "owner": {"reputation": 1, "user_id": 9969444, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-K_qCWGsHzQk/AAAAAAAAAAI/AAAAAAAAClc/SfzQQQ9Y77o/photo.jpg?sz=128", "display_name": "Gremlin", "link": "https://stackoverflow.com/users/9969444/gremlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1529644902, "creation_date": 1529523062, "last_edit_date": 1529559592, "question_id": 50955736, "link": "https://stackoverflow.com/questions/50955736/adding-and-calculating-values-in-pandas-pivot-table", "title": "Adding and calculating values in pandas pivot_table", "body": "<p>I have pivot_table with code:</p>\n\n<pre><code>df = pd.DataFrame({\"A\": [\"foo\", \"foo\", \"foo\", \"foo\", \"foo\",\n...                          \"bar\", \"bar\", \"bar\", \"bar\"],\n...                    \"B\": [\"one\", \"one\", \"one\", \"two\", \"two\",\n...                          \"one\", \"one\", \"two\", \"two\"],\n...                    \"C\": [\"2017\", \"2017\", \"2018\", \"2017\",\n...                          \"2018\", \"2017\", \"2018\", \"2017\",\n...                          \"2017\"],\n...                    \"D\": [1, 2, 2, 3, 3, 4, 5, 6, 7]})\ndataf = df.pivot_table(values=\"D\", index=[\"A\",\"B\"], columns=[\"C\"], aggfunc=np.sum, margins=True, dropna=True)\ndataf\nC       2017    2018    All\nA   B           \nbar one 4.0     5.0     9\ntwo     13.0    NaN    13\nfoo one 3.0     2.0     5\ntwo     3.0     3.0     6\nAll     23.0    10.0   33\n</code></pre>\n\n<p>I want to add new Column after 2018 that will be calculating 2018 / 2017 value. How can I do this?</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 1643, "user_id": 8340867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D3XJl.jpg?s=128&g=1", "display_name": "ThunderHorn", "link": "https://stackoverflow.com/users/8340867/thunderhorn"}, "is_accepted": false, "score": 1, "last_activity_date": 1529523529, "creation_date": 1529523529, "answer_id": 50955872, "question_id": 50955732, "link": "https://stackoverflow.com/questions/50955732/import-txt-file-with-commas-and-no-spaces-between-numbers/50955872#50955872", "title": "Import .txt file with commas and no spaces between numbers", "body": "<pre><code>with open('C:\\\\Users\\\\Downloads\\\\Python\\\\myfile.txt', 'r') as myfile:\n    for UV in myfile.read().replace(',', ' ').split('\\n'):\n        print(UV)\n</code></pre>\n\n<p>you have to split the file.read('\\n') instead of replacing the new line :) </p>\n"}, {"comments": [{"owner": {"reputation": 109, "user_id": 9969420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca175a7cbd8fe7d2e633a8489c51d695?s=128&d=identicon&r=PG&f=1", "display_name": "B. Moore", "link": "https://stackoverflow.com/users/9969420/b-moore"}, "edited": false, "score": 0, "creation_date": 1529603901, "post_id": 50955876, "comment_id": 88945910, "body": "This worked!!  Wow, that was way too simple.  Thank you for your help."}], "tags": [], "owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "is_accepted": true, "score": 2, "last_activity_date": 1529523545, "creation_date": 1529523545, "answer_id": 50955876, "question_id": 50955732, "link": "https://stackoverflow.com/questions/50955732/import-txt-file-with-commas-and-no-spaces-between-numbers/50955876#50955876", "title": "Import .txt file with commas and no spaces between numbers", "body": "<p>It seems to be a comma-separated-value file (csv). Use the <a href=\"https://docs.python.org/3/library/csv.html\" rel=\"nofollow noreferrer\">python <code>csv</code> module</a> or pandas <code>read_csv</code> function... Or if you want genfromtxt, you can use the delimiter parameter: </p>\n\n<pre><code>genfromtxt('my_file.txt', delimiter=',')\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 9969420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca175a7cbd8fe7d2e633a8489c51d695?s=128&d=identicon&r=PG&f=1", "display_name": "B. Moore", "link": "https://stackoverflow.com/users/9969420/b-moore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 0, "accepted_answer_id": 50955876, "answer_count": 2, "score": 1, "last_activity_date": 1564865933, "creation_date": 1529523040, "last_edit_date": 1564865933, "question_id": 50955732, "link": "https://stackoverflow.com/questions/50955732/import-txt-file-with-commas-and-no-spaces-between-numbers", "title": "Import .txt file with commas and no spaces between numbers", "body": "<p>I am currently trying to import a .txt file. I typically like the code:</p>\n\n<pre><code>GID = np.genfromtxt(\"C:\\\\Users\\\\Downloads\\\\Python\\\\myfile.txt\")\nq= GID[:,][:,0]\n</code></pre>\n\n<p>however I have even tried:</p>\n\n<pre><code>with open('C:\\\\Users\\\\Downloads\\\\Python\\\\myfile.txt', 'r') as myfile:\nUV = myfile.read().replace('\\n', '')\nUV = UV.replace(',', ' ')\n</code></pre>\n\n<p>The problem I am currently running into is that the file I am trying to import has over 1000 rows is supposed to have two columns of numbers.  However, it separates the two columns with a comma and no space as follows:</p>\n\n<pre><code>1234.56,-7.89\n987.65,43.21\n</code></pre>\n\n<p>If I try to import the values with the genfromtxt command it just imports everything as \"nan\".  If I try importing the values using the \"with open\" command and replacing all of the commas with spaces I loose the format of having two columns and over 1000 rows.  </p>\n\n<p>Any advice?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1154, "user_id": 9565387, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d6Y3JBWunV4/AAAAAAAAAAI/AAAAAAAAAEk/3020ZVdwdFU/photo.jpg?sz=128", "display_name": "ducminh", "link": "https://stackoverflow.com/users/9565387/ducminh"}, "edited": false, "score": 0, "creation_date": 1529523911, "post_id": 50955730, "comment_id": 88909409, "body": "You might want to take a look at <a href=\"https://docs.python.org/3/library/argparse.html\" rel=\"nofollow noreferrer\">argparse</a>."}, {"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1529523985, "post_id": 50955730, "comment_id": 88909428, "body": "You might want to look at invoke (<a href=\"https://pypi.org/project/invoke/\" rel=\"nofollow noreferrer\">pypi.org/project/invoke</a>) if you&#39;re writing simple tasks, otherwise the standard library module argparse (<a href=\"https://docs.python.org/3/library/argparse.html\" rel=\"nofollow noreferrer\">docs.python.org/3/library/argparse.html</a>) handles argument parsing for command line scripts."}, {"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1529524075, "post_id": 50955730, "comment_id": 88909457, "body": "ps:.. this <code>and len(user_guid) == False</code> is going to be true (<code>bool</code> is a subtype of <code>int</code>), but very confusing to read."}, {"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 0, "creation_date": 1529524220, "post_id": 50955730, "comment_id": 88909512, "body": "See <a href=\"https://stackoverflow.com/questions/2492087/how-to-get-the-nth-element-of-a-python-list-or-a-default-if-not-available\">How to get the nth element of a python list or a default if not available</a>."}], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 9969488, "user_type": "registered", "profile_image": "https://graph.facebook.com/1392833404193876/picture?type=large", "display_name": "Winston Yang", "link": "https://stackoverflow.com/users/9969488/winston-yang"}, "is_accepted": false, "score": 1, "last_activity_date": 1529524647, "last_edit_date": 1529524647, "creation_date": 1529524202, "answer_id": 50956031, "question_id": 50955730, "link": "https://stackoverflow.com/questions/50955730/how-to-structure-optional-arguments-in-python/50956031#50956031", "title": "How to structure optional arguments in python", "body": "<p>I would recommend the <a href=\"https://docs.python.org/3/library/argparse.html\" rel=\"nofollow noreferrer\">argparse</a> library. Tutorial <a href=\"https://docs.python.org/2/howto/argparse.html\" rel=\"nofollow noreferrer\">here.</a></p>\n\n<p>Write something like:</p>\n\n<pre><code>parser = argparse.ArgumentParser(description = \"[insert some description here]\")\nparser.add_argument('-i', \"--user_cat\", help = '[insert some help]')\nparser.add_argument('-i', \"--cat_list\", help = '[insert more help]')\nparser.add_argument('-u', \"--user_guid\", nargs = '?', help = '[insert some help]')\nargs = parser.parse_arg()\n# Access the variables with args.user_cat, args.cat_list, etc.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11114, "user_id": 363437, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f866fca5a7395a360cca27b5e9da0ed7?s=128&d=identicon&r=PG", "display_name": "vidstige", "link": "https://stackoverflow.com/users/363437/vidstige"}, "is_accepted": true, "score": 1, "last_activity_date": 1529567650, "last_edit_date": 1529567650, "creation_date": 1529525032, "answer_id": 50956212, "question_id": 50955730, "link": "https://stackoverflow.com/questions/50955730/how-to-structure-optional-arguments-in-python/50956212#50956212", "title": "How to structure optional arguments in python", "body": "<p>You should use <code>argparse</code> for this. You don't <em>always</em> need flags, sometimes just a positional argument is better as it saves typing, compare e.g. with <code>cat</code>. Try the following example</p>\n\n<pre><code>parser = argparse.ArgumentParser(description='LOLCATZ')\nparser.add_argument('cat')\nparser.add_argument('id')\nparser.add_argument('guid')\nparser.add_argument('optional1', nargs='?')  # positional and optional\nparser.add_argument('--optional2')  # optional flag\nargs = parser.parse_args()\nprint(args)\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 1348067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32e533facd0730d6e41679b6080c3101?s=128&d=identicon&r=PG", "display_name": "user1348067", "link": "https://stackoverflow.com/users/1348067/user1348067"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 50956212, "answer_count": 2, "score": 0, "last_activity_date": 1529567650, "creation_date": 1529523033, "last_edit_date": 1529523703, "question_id": 50955730, "link": "https://stackoverflow.com/questions/50955730/how-to-structure-optional-arguments-in-python", "title": "How to structure optional arguments in python", "body": "<p>I'm pretty new to python and im wondering whats the best way is to stucture and build my code in a specific data validation case. I'm building cmd line script that takes 3 arguments and save them to variables. The third argument is optional. How should i handle the optional argument. I get promted for \"IndexError: list index out of range\" when im not specifing the third argument. </p>\n\n<p>Whats the most simple and practical why to validate user input with a optional argument? </p>\n\n<pre><code>user_cat = sys.argv[1]\nuser_id = sys.argv[2]\nuser_guid = sys.argv[3]\n\ndef validate(user_cat, argv_cat_list, user_guid):\n    if len(user_cat) &gt; 10 or user_cat not in argv_cat_list:\n        print(\"Error! Please specify a valid category (AddDevice, GetAccount, c, p, GetDevices, r ,s)\")\n        sys.exit()\n    elif len(user_id) == 36 or user_id.startswith(\"SAM-\") and len(user_guid) == False:\n        getInfo()\n        sys.exit()\n    elif len(user_cat) &gt;= 10 and len(user_guid) == 36 and user_id.startswith(\"FRA-\"):\n        print (\"Test-hest!\")\n    else:\n        print(\"Error! Please specify a valid input\")\n        sys.exit()\n</code></pre>\n"}]