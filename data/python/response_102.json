[{"tags": ["javascript", "python", "html", "cgi"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1482367241, "post_id": 41273855, "comment_id": 69749764, "body": "Javascript runs on the client, CGI runs on the server."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5154816"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1482367398, "post_id": 41273855, "comment_id": 69749818, "body": "@ Barmar, does that mean that there is no way to get this javascript variable value in python variable?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1482367460, "post_id": 41273855, "comment_id": 69749826, "body": "You can use AJAX to send it to another script."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1482367517, "post_id": 41273855, "comment_id": 69749839, "body": "FYI, <code>sel.options[sel.selectedIndex].value</code> can be simplified to just <code>sel.value</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1482367535, "post_id": 41273855, "comment_id": 69749840, "body": "And you never set the variable <code>text</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1482367618, "post_id": 41273855, "comment_id": 69749867, "body": "When you submit the form, the selected IP will be in <code>cgi.FieldStorage[&#39;comboselect&#39;]</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5154816"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1482368190, "post_id": 41273855, "comment_id": 69750006, "body": "I haven&#39;t kept submit button to avoid multiple pages. Edited the question with your suggested changes."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1482368368, "post_id": 41273855, "comment_id": 69750056, "body": "If you don&#39;t want to reload the page, you need to use AJAX."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5154816"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1482376485, "post_id": 41273855, "comment_id": 69751924, "body": "I am not aware of AJAX, can you please guide me further on how can I do this with AJAX? Thanks!"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5154816"}, "is_accepted": true, "score": 0, "last_activity_date": 1483591615, "creation_date": 1483591615, "answer_id": 41477470, "question_id": 41273855, "link": "https://stackoverflow.com/questions/41273855/how-to-get-value-of-javascript-variable-in-python-variable-in-python-cgi-script/41477470#41477470", "title": "How to get value of javascript variable in python variable in Python-CGI script", "body": "<p>I was able to resolve it with following code and multiple pages:</p>\n\n<pre><code># Create instance of FieldStorage\nform = cgi.FieldStorage()\nop = form.getvalue('combo')\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5154816"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 915, "favorite_count": 0, "accepted_answer_id": 41477470, "answer_count": 1, "score": 0, "last_activity_date": 1483591615, "creation_date": 1482364786, "last_edit_date": 1482368351, "question_id": 41273855, "link": "https://stackoverflow.com/questions/41273855/how-to-get-value-of-javascript-variable-in-python-variable-in-python-cgi-script", "title": "How to get value of javascript variable in python variable in Python-CGI script", "body": "<p>I want to take the value of javascript variable into python variable.</p>\n\n<p>This is Python-CGI script which displays a selection box and selected value appears on the page. But I want to take selected value in python variable.</p>\n\n<pre><code>#!/usr/bin/python2.7 -u\nimport time, sys, os\n\n# Import modules for CGI handling\nimport cgi, cgitb\n\nsys.stdout.write('Content-Type: text/html;charset=utf-8\\n')\nprint \"\\n\\n\"\nprint \"&lt;html&gt;\"\nprint \"&lt;body&gt;\"\n\nrows = ['1.1.1.1', '2.2.2.2', '3.3.3.3']\nprint \"&lt;script&gt;\"\nprint \"function showData() {\"\nprint \"var sel = document.getElementById('combo');\"\nprint \"var value = sel.value;\"\nprint \"var text = sel.options[sel.selectedIndex].text;\"\nprint \"document.getElementById('secondP').innerHTML=text;}\"\nprint \"&lt;/script&gt;\"\n\nprint '&lt;form name=\"comboform\"&gt;'\nprint '&lt;select name=\"comboselect\" onchange=\"showData()\" id=\"combo\"&gt;'\nfor row in rows:\n    print \"&lt;option value='%s'&gt;%s&lt;/option&gt;\"%(row,row)\nprint \"&lt;/select&gt;\"\nprint \"&lt;/form&gt;\"\n\nprint '&lt;p id=\"secondP\"&gt;&amp;nbsp;&lt;/p&gt;'\n\n# HERE I WANT TO TAKE VALUE OF SELECTED IP ADDRESS (var value) IN PYTHON VARIABLE\n# selected_ip_adr = value #something like this where value has selected ip address\n# NEED TO PASS THE SAME TO ANOTHER SCRIPT\n\nsys.stdout.flush()\nprint \"&lt;/body&gt;\"\nprint \"&lt;/html&gt;\"\n</code></pre>\n\n<p>It would be great if someone can suggest a work-around to achieve this.</p>\n"}, {"tags": ["python", "datetime", "pandas", "numpy", "numpy-ufunc"], "comments": [{"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "edited": false, "score": 0, "creation_date": 1482365967, "post_id": 41273824, "comment_id": 69749452, "body": "Can you just use the precision up to microseconds and then add the nanoseconds back in. Do you really need the nanoseconds?"}, {"owner": {"reputation": 7235, "user_id": 3734914, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/JAGw8.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/3734914/batman"}, "reply_to_user": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "edited": false, "score": 0, "creation_date": 1482370021, "post_id": 41273824, "comment_id": 69750403, "body": "Unfortunately I do, for backwards compatibility."}], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 1, "last_activity_date": 1482366225, "creation_date": 1482366225, "answer_id": 41274038, "question_id": 41273824, "link": "https://stackoverflow.com/questions/41273824/add-n-business-days-to-a-numpy-datetime64-thats-not-of-unit-d/41274038#41274038", "title": "Add N Business Days to a Numpy datetime64 That&#39;s Not of Unit &#39;D&#39;", "body": "<pre><code>a = pd.date_range('2016-03-31', periods=5, freq='M').values\na\n\narray(['2016-03-31T00:00:00.000000000', '2016-04-30T00:00:00.000000000',\n       '2016-05-31T00:00:00.000000000', '2016-06-30T00:00:00.000000000',\n       '2016-07-31T00:00:00.000000000'], dtype='datetime64[ns]')\n\npd.to_datetime(a) + pd.offsets.BusinessDay(8)\n\nDatetimeIndex(['2016-04-12', '2016-05-11', '2016-06-10', '2016-07-12',\n               '2016-08-10'],\n              dtype='datetime64[ns]', freq=None)\n</code></pre>\n\n<p>Or if you want them in <code>datetime64[ns]</code></p>\n\n<pre><code>(pd.to_datetime(a) + pd.offsets.BusinessDay(8)).values\n\narray(['2016-04-12T00:00:00.000000000', '2016-05-11T00:00:00.000000000',\n       '2016-06-10T00:00:00.000000000', '2016-07-12T00:00:00.000000000',\n       '2016-08-10T00:00:00.000000000'], dtype='datetime64[ns]')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7235, "user_id": 3734914, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/JAGw8.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/3734914/batman"}, "edited": false, "score": 1, "creation_date": 1482369962, "post_id": 41274144, "comment_id": 69750383, "body": "I&#39;d love to use pandas, but unfortunately it need to be in numpy."}, {"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "reply_to_user": {"reputation": 7235, "user_id": 3734914, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/JAGw8.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/3734914/batman"}, "edited": false, "score": 0, "creation_date": 1482370005, "post_id": 41274144, "comment_id": 69750397, "body": "This is a pure numpy solution. I just create dummy dates with pandas. Start with your data in <code>np_dates</code> and it should be fine."}], "tags": [], "owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "is_accepted": true, "score": 2, "last_activity_date": 1482367051, "creation_date": 1482367051, "answer_id": 41274144, "question_id": 41273824, "link": "https://stackoverflow.com/questions/41273824/add-n-business-days-to-a-numpy-datetime64-thats-not-of-unit-d/41274144#41274144", "title": "Add N Business Days to a Numpy datetime64 That&#39;s Not of Unit &#39;D&#39;", "body": "<p>It's much easier to use pandas but here is a numpy implementation. I initially create dates from pandas but that is not necessary. Any numpy dates with ns precision should work.</p>\n\n<pre><code># get numpy only business days from pandas\npandas_dates = pd.date_range('today', periods=10, freq='B')\nnp_dates = pandas_dates.values\n\n# Just get the day part\nnp_days = np_dates.astype('datetime64[D]')\n\n# offset date using numpy and then convert back to ns precision.\n# all seconds will be 0\nnp_day_offsets = np.busday_offset(np_days, 5).astype('datetime64[ns]')\n\n# add back in nanoseconds\nnp_final = np_day_offsets + (np_dates - np_days)\n</code></pre>\n"}], "owner": {"reputation": 7235, "user_id": 3734914, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/JAGw8.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/3734914/batman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1308, "favorite_count": 0, "accepted_answer_id": 41274144, "answer_count": 2, "score": 2, "last_activity_date": 1482367051, "creation_date": 1482364563, "question_id": 41273824, "link": "https://stackoverflow.com/questions/41273824/add-n-business-days-to-a-numpy-datetime64-thats-not-of-unit-d", "title": "Add N Business Days to a Numpy datetime64 That&#39;s Not of Unit &#39;D&#39;", "body": "<p>I'm trying to add business days to a long list of data that's currently formatted as <code>datetime64</code> objects, but with type <code>'ns'</code>.  </p>\n\n<p>As per the Numpy <a href=\"https://docs.scipy.org/doc/numpy-dev/reference/arrays.datetime.html\" rel=\"nofollow noreferrer\">documentation</a>, the <code>busday_offset</code> function only works on objects with units of <code>'D'</code>. The functionality I want exists in Pandas, using 'BusiniessDay<code>in</code>tseries.offsets`.</p>\n\n<p>I could convert every date into a Pandas <code>Timestamp</code>, then add the offset, and then convert back, but that feels like more work than it should be.  </p>\n\n<p>Is there a way to directly add an arbitrary number of business days to a <code>datetime64</code> object that has <code>'ns'</code> units? </p>\n"}, {"tags": ["python", "python-2.7", "python-3.x", "scrapy"], "comments": [{"owner": {"reputation": 111, "user_id": 5554378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9240c70121d542eb7737584baeb97a52?s=128&d=identicon&r=PG&f=1", "display_name": "EmmaZhao", "link": "https://stackoverflow.com/users/5554378/emmazhao"}, "edited": false, "score": 0, "creation_date": 1482367181, "post_id": 41273809, "comment_id": 69749752, "body": "Do you installed MySQL-python? If not, see <a href=\"http://stackoverflow.com/questions/7459766/installing-mysql-python\" title=\"installing mysql python\">stackoverflow.com/questions/7459766/installing-mysql-python</a> to install it on Ubuntu."}, {"owner": {"reputation": 6829, "user_id": 2110294, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/EoD62.jpg?s=128&g=1", "display_name": "Craig van Tonder", "link": "https://stackoverflow.com/users/2110294/craig-van-tonder"}, "reply_to_user": {"reputation": 111, "user_id": 5554378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9240c70121d542eb7737584baeb97a52?s=128&d=identicon&r=PG&f=1", "display_name": "EmmaZhao", "link": "https://stackoverflow.com/users/5554378/emmazhao"}, "edited": false, "score": 0, "creation_date": 1482368995, "post_id": 41273809, "comment_id": 69750169, "body": "@EmmaZhao That was it, working now; thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 6829, "user_id": 2110294, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/EoD62.jpg?s=128&g=1", "display_name": "Craig van Tonder", "link": "https://stackoverflow.com/users/2110294/craig-van-tonder"}, "is_accepted": true, "score": 1, "last_activity_date": 1482369252, "creation_date": 1482369252, "answer_id": 41274408, "question_id": 41273809, "link": "https://stackoverflow.com/questions/41273809/saving-scrapy-output-to-a-mysql-database-using-twisted/41274408#41274408", "title": "Saving Scrapy output to a MySQL database using Twisted?", "body": "<p>The problem was solved with: </p>\n\n<p><code>sudo apt-get install python-mysqldb</code></p>\n"}], "owner": {"reputation": 6829, "user_id": 2110294, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/EoD62.jpg?s=128&g=1", "display_name": "Craig van Tonder", "link": "https://stackoverflow.com/users/2110294/craig-van-tonder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1634, "favorite_count": 0, "accepted_answer_id": 41274408, "answer_count": 1, "score": 0, "last_activity_date": 1482369252, "creation_date": 1482364477, "last_edit_date": 1482368970, "question_id": 41273809, "link": "https://stackoverflow.com/questions/41273809/saving-scrapy-output-to-a-mysql-database-using-twisted", "title": "Saving Scrapy output to a MySQL database using Twisted?", "body": "<p>I would like to save the output of <a href=\"https://doc.scrapy.org/en/latest/intro/tutorial.html#extracting-data-in-our-spider\" rel=\"nofollow noreferrer\">the tutorial spider</a> to MySQL but battling to understand why I am getting the following error in the item pipeline:</p>\n\n<pre><code>ImportError: No module named MySQLdb\nException AttributeError: \"'QuotePipeline' object has no attribute 'dbpool'\"\n</code></pre>\n\n<p>Using Ubuntu 16.04 and Python 3.5.2.</p>\n\n<p>If anyone could suggest where I have gone wrong with this then it would be greatly appreciated, many thanks!</p>\n\n<p>Here is the relative code:</p>\n\n<p><strong>/spiders/quotes.py</strong></p>\n\n<pre><code>import scrapy\n\n\nclass QuotesSpider(scrapy.Spider):\n    name = \"quotes\"\n    start_urls = [\n        'http://quotes.toscrape.com/page/1/',\n        'http://quotes.toscrape.com/page/2/',\n    ]\n\n    def parse(self, response):\n        for quote in response.css('div.quote'):\n            yield {\n                'text': quote.css('span.text::text').extract_first(),\n                'author': quote.css('span small::text').extract_first(),\n                'tags': quote.css('div.tags a.tag::text').extract(),\n            }\n</code></pre>\n\n<p><strong>/items.py</strong></p>\n\n<pre><code>import scrapy\n\n\nclass QuoteItem(scrapy.Item):\n    # define the fields for your item here like:\n    text = scrapy.Field()\n    author = scrapy.Field()\n    tags = scrapy.Field()\n    pass\n</code></pre>\n\n<p><strong>/pipelines.py</strong></p>\n\n<pre><code>from twisted.enterprise import adbapi\nfrom scrapy.utils.project import get_project_settings\n\nsettings = get_project_settings()\n\n\nclass QuotePipeline(object):\n    # The table you items.QuoteItem class map to, my table is named quotes\n    insert_sql = \"\"\"insert into quotes (%s) values ( %s )\"\"\"\n\n    def __init__(self):\n        dbargs = settings.get('DB_CONNECT')\n        db_server = settings.get('DB_SERVER')\n        dbpool = adbapi.ConnectionPool(db_server, **dbargs)\n        self.dbpool = dbpool\n\n    def __del__(self):\n        self.dbpool.close()\n\n    def process_item(self, item, spider):\n        self.insert_data(item, self.insert_sql)\n        return item\n\n    def insert_data(self, item, insert):\n        keys = item.keys()\n        fields = u','.join(keys)\n        qm = u','.join([u'%s'] * len(keys))\n        sql = insert % (fields, qm)\n        data = [item[k] for k in keys]\n        return self.dbpool.runOperation(sql, data)\n</code></pre>\n\n<p><strong>/settings.py</strong></p>\n\n<pre><code>BOT_NAME = 'tutorial'\n\nSPIDER_MODULES = ['tutorial.spiders']\nNEWSPIDER_MODULE = 'tutorial.spiders'\n\nDB_SERVER = 'MySQLdb'\nDB_CONNECT = {\n    'db': 'scrapy',\n    'user': 'username',\n    'passwd': 'password',\n    'host': 'ip.of.the.server',\n    'charset': 'utf8',\n    'use_unicode': True,\n}\n\n# Obey robots.txt rules\nROBOTSTXT_OBEY = True\n\n# Configure item pipelines\n# See http://scrapy.readthedocs.org/en/latest/topics/item-pipeline.html\nITEM_PIPELINES = {\n    'tutorial.pipelines.QuotePipeline': 500,\n}\n</code></pre>\n\n<p><strong>SQL Schema</strong></p>\n\n<pre><code>CREATE DATABASE `scrapy` /*!40100 DEFAULT CHARACTER SET utf8mb4 */\nCREATE TABLE `quotes` (\n `id` mediumint(6) NOT NULL AUTO_INCREMENT,\n `text` text NOT NULL,\n `author` varchar(255) NOT NULL,\n `tags` varchar(255) NOT NULL,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n</code></pre>\n"}, {"tags": ["python", "django", "django-admin", "tinymce", "django-tinymce"], "comments": [{"owner": {"reputation": 191, "user_id": 1960016, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/goBFD.jpg?s=128&g=1", "display_name": "whieronymus", "link": "https://stackoverflow.com/users/1960016/whieronymus"}, "edited": false, "score": 0, "creation_date": 1482367307, "post_id": 41273781, "comment_id": 69749784, "body": "Where are your js (query, bootstrap.js) links in your Base.html? If your page is loading the tinyMCE js links before jquery it won&#39;t run. I had a similar problem using redactor wsyiwyg editor. Check your page source and see which one loads first."}, {"owner": {"reputation": 2118, "user_id": 4107823, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/SdUGT.png?s=128&g=1", "display_name": "copser", "link": "https://stackoverflow.com/users/4107823/copser"}, "reply_to_user": {"reputation": 191, "user_id": 1960016, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/goBFD.jpg?s=128&g=1", "display_name": "whieronymus", "link": "https://stackoverflow.com/users/1960016/whieronymus"}, "edited": false, "score": 0, "creation_date": 1482384425, "post_id": 41273781, "comment_id": 69754095, "body": "you need to <a href=\"http://django-tinymce.readthedocs.io/en/latest/installation.html#configuration\" rel=\"nofollow noreferrer\">customize</a>  it more, lie @whieronymus said, you are missing a bunch of configuration in your <code>settings.py</code>"}], "answers": [{"comments": [{"owner": {"reputation": 556, "user_id": 3343744, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100006254263141/picture?type=large", "display_name": "Zeyad Obaia", "link": "https://stackoverflow.com/users/3343744/zeyad-obaia"}, "edited": false, "score": 0, "creation_date": 1482399556, "post_id": 41279457, "comment_id": 69761547, "body": "I did what you said, everything seems to work fine except that I can&#39;t add any more plugins, like emotions and iframes, if I add them to the plugins, they do not show up. how can I add them ?"}], "tags": [], "owner": {"reputation": 1564, "user_id": 2468201, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NCQu7.jpg?s=128&g=1", "display_name": "Ohad the Lad", "link": "https://stackoverflow.com/users/2468201/ohad-the-lad"}, "is_accepted": false, "score": 1, "last_activity_date": 1482397923, "creation_date": 1482397923, "answer_id": 41279457, "question_id": 41273781, "link": "https://stackoverflow.com/questions/41273781/django-tinymce-full-featured-in-admin/41279457#41279457", "title": "Django-tinymce full featured in admin", "body": "<p>You are missing some configurations settings .py</p>\n\n<pre><code>TINYMCE_JS_URL = 'http://debug.example.org/tiny_mce/tiny_mce_src.js'\nTINYMCE_DEFAULT_CONFIG = {\n    'plugins': \"table,spellchecker,paste,searchreplace\",\n    'theme': \"advanced\",\n    'cleanup_on_startup': True,\n    'custom_undo_redo_levels': 10,\n}\nTINYMCE_SPELLCHECKER = True\nTINYMCE_COMPRESSOR = True\n</code></pre>\n\n<p>this is the example given in the docs...try it out\n<a href=\"http://django-tinymce.readthedocs.io/en/latest/installation.html\" rel=\"nofollow noreferrer\">http://django-tinymce.readthedocs.io/en/latest/installation.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 556, "user_id": 3343744, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100006254263141/picture?type=large", "display_name": "Zeyad Obaia", "link": "https://stackoverflow.com/users/3343744/zeyad-obaia"}, "edited": false, "score": 3, "creation_date": 1482402322, "post_id": 41279989, "comment_id": 69763332, "body": "Thank you, Exactly what I was looking for !  Works like a charm and easy to configure and well documented !"}], "tags": [], "owner": {"reputation": 1192, "user_id": 4040307, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100000593567425/picture?type=large", "display_name": "Pulkit Pahwa", "link": "https://stackoverflow.com/users/4040307/pulkit-pahwa"}, "is_accepted": true, "score": 8, "last_activity_date": 1482399533, "creation_date": 1482399533, "answer_id": 41279989, "question_id": 41273781, "link": "https://stackoverflow.com/questions/41273781/django-tinymce-full-featured-in-admin/41279989#41279989", "title": "Django-tinymce full featured in admin", "body": "<p>TINYMCE is great. But at times, it fails to send input back to the server.</p>\n\n<p>One of the alternatives to TINYMCE is django-summernote, which is easy to setup and use.</p>\n\n<p>Check django-summernote here:\n<a href=\"https://github.com/summernote/django-summernote\" rel=\"noreferrer\">https://github.com/summernote/django-summernote</a></p>\n"}], "owner": {"reputation": 556, "user_id": 3343744, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100006254263141/picture?type=large", "display_name": "Zeyad Obaia", "link": "https://stackoverflow.com/users/3343744/zeyad-obaia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7102, "favorite_count": 1, "accepted_answer_id": 41279989, "answer_count": 2, "score": 6, "last_activity_date": 1482399533, "creation_date": 1482364243, "question_id": 41273781, "link": "https://stackoverflow.com/questions/41273781/django-tinymce-full-featured-in-admin", "title": "Django-tinymce full featured in admin", "body": "<p>I set up django-tinymce to work with admin just like the docs described </p>\n\n<p>in settings </p>\n\n<pre><code>INSTALLED_APPS = [ ..., 'tinymce',]\n</code></pre>\n\n<p>in models I added </p>\n\n<pre><code>from tinymce.models import HTMLField\ncontent = HTMLField()\n</code></pre>\n\n<p>and in urls</p>\n\n<pre><code>urlpatterns = [ ...., url(r'^tinymce/', include('tinymce.urls')),]\n</code></pre>\n\n<p>But I can not figure out how to add icons and plugins !\nI did a lot of research and I could not find anything useful.</p>\n\n<p>I need a <a href=\"https://www.tinymce.com/docs/demo/full-featured/\" rel=\"noreferrer\">Full Featured</a> editor.</p>\n"}, {"tags": ["python", "pandas", "matrix", "dataframe"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1482364898, "post_id": 41273770, "comment_id": 69749183, "body": "Does the order of 10 and 11 (or 9 and 8) matter?"}], "answers": [{"tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": false, "score": 2, "last_activity_date": 1482365085, "creation_date": 1482365085, "answer_id": 41273896, "question_id": 41273770, "link": "https://stackoverflow.com/questions/41273770/pandas-joining-items-with-same-index/41273896#41273896", "title": "Pandas: joining items with same index", "body": "<p>You can create an id variable for each unique index and then pivot the table to wide format:</p>\n\n<pre><code>df.assign(id = df.groupby([0]).cumcount()).set_index(['id', 0]).unstack(level=1)\n\n#      1\n#0  row1    row2\n#id     \n# 0   10       9\n# 1   11       8\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 137, "user_id": 5904789, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1021219957934862/picture?type=large", "display_name": "Guilherme Nazareth de Souza", "link": "https://stackoverflow.com/users/5904789/guilherme-nazareth-de-souza"}, "edited": false, "score": 0, "creation_date": 1482367264, "post_id": 41273902, "comment_id": 69749773, "body": "You got it! Thank you, sir!"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 2, "last_activity_date": 1482369515, "last_edit_date": 1482369515, "creation_date": 1482365123, "answer_id": 41273902, "question_id": 41273770, "link": "https://stackoverflow.com/questions/41273770/pandas-joining-items-with-same-index/41273902#41273902", "title": "Pandas: joining items with same index", "body": "<p>assign another column to the index and unstack</p>\n\n<pre><code>s.index = [s.groupby(level=0).cumcount(), s.index]\ns.unstack()\n\n0  row1  row2\n0    10     9\n1    11     8\n</code></pre>\n\n<hr>\n\n<p><strong><em>alternative numpy approach</em></strong><br>\nstill slower (blah...)</p>\n\n<pre><code>u, inv = np.unique(s.index.values, return_inverse=True)\ndata = dict(zip(u, [s.values[g] for g in (np.arange(len(u))[:, None] == inv)]))\npd.DataFrame(data)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 137, "user_id": 5904789, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1021219957934862/picture?type=large", "display_name": "Guilherme Nazareth de Souza", "link": "https://stackoverflow.com/users/5904789/guilherme-nazareth-de-souza"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1482367496, "post_id": 41273969, "comment_id": 69749836, "body": "@piRSquared -- complexity-wise, do you recommend this answer? And root, indeed, great job."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 137, "user_id": 5904789, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1021219957934862/picture?type=large", "display_name": "Guilherme Nazareth de Souza", "link": "https://stackoverflow.com/users/5904789/guilherme-nazareth-de-souza"}, "edited": false, "score": 1, "creation_date": 1482368155, "post_id": 41273969, "comment_id": 69749996, "body": "@GuilhermeNazarethdeSouza it&#39;s a matter of taste.  If you understand what root did (which I don&#39;t think is complicated), I&#39;d use this answer.  That said, I&#39;m inspired to add another answer to my post."}], "tags": [], "owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "is_accepted": false, "score": 2, "last_activity_date": 1482366549, "last_edit_date": 1482366549, "creation_date": 1482365691, "answer_id": 41273969, "question_id": 41273770, "link": "https://stackoverflow.com/questions/41273770/pandas-joining-items-with-same-index/41273969#41273969", "title": "Pandas: joining items with same index", "body": "<p>Use <code>groupby</code> on the index to get a list of elements for each index, use <code>to_dict</code> to get a dictionary, then use the <code>pd.DataFrame</code> constructor:</p>\n\n<pre><code>pd.DataFrame(df.groupby(level=0)['column_name'].apply(list).to_dict())\n</code></pre>\n\n<p>If you have a Series, say <code>s</code>, instead of a DataFrame you don't need to supply a column name:</p>\n\n<pre><code>pd.DataFrame(s.groupby(level=0).apply(list).to_dict())\n</code></pre>\n\n<p>The resulting output:</p>\n\n<pre><code>   row1  row2\n0    10     9\n1    11     8\n</code></pre>\n\n<p><strong>Timings</strong></p>\n\n<p>Using the following setup to produce larger sample data, assuming the input data is a DataFrame:</p>\n\n<pre><code>n = 10**6\ndf = pd.DataFrame(np.random.random(size=n), index=['row1', 'row2']*(n//2))\n\ndef pir2(s):\n    s.index = [s.groupby(level=0).cumcount(), s.index]\n    return s.unstack()\n</code></pre>\n\n<p>I get the following timings:</p>\n\n<pre><code>%timeit pd.DataFrame(df.groupby(level=0)[0].apply(list).to_dict())\n1 loop, best of 3: 210 ms per loop\n\n%timeit pir2(df.copy())\n1 loop, best of 3: 486 ms per loop\n\n%timeit df.assign(id = df.groupby([0]).cumcount()).set_index(['id', 0]).unstack(level=1)\n1 loop, best of 3: 1.34 s per loop\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "is_accepted": false, "score": 2, "last_activity_date": 1482368429, "creation_date": 1482368429, "answer_id": 41274299, "question_id": 41273770, "link": "https://stackoverflow.com/questions/41273770/pandas-joining-items-with-same-index/41274299#41274299", "title": "Pandas: joining items with same index", "body": "<p>And just a little bit faster using @root's example :)</p>\n\n<pre><code>pd.DataFrame({name:group.values for name, group in df.groupby(level=0)[0]})\n</code></pre>\n\n<p>Timings:</p>\n\n<pre><code>%timeit pd.DataFrame({name:group.values for name, group in df.groupby(level=0)[0]})\n10 loops, best of 3: 73.6 ms per loop\n\n%timeit pd.DataFrame(df.groupby(level=0)[0].apply(list).to_dict())\n1 loop, best of 3: 249 ms per loop\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 5904789, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1021219957934862/picture?type=large", "display_name": "Guilherme Nazareth de Souza", "link": "https://stackoverflow.com/users/5904789/guilherme-nazareth-de-souza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 1, "accepted_answer_id": 41273902, "answer_count": 4, "score": 3, "last_activity_date": 1482369515, "creation_date": 1482364163, "question_id": 41273770, "link": "https://stackoverflow.com/questions/41273770/pandas-joining-items-with-same-index", "title": "Pandas: joining items with same index", "body": "<p>I have a pandas data frame that is a vector with a value and an index, say:</p>\n\n<pre><code>row1  10\nrow1  11\nrow2  9\nrow2  8\n</code></pre>\n\n<p>However, I want to create a 2x2 matrix from this, in which the row index is actually a header (column index). Like this:</p>\n\n<pre><code>row1  row2\n10    9\n11    8\n</code></pre>\n\n<p>What is the most efficient way of doing this? This example is a simplification, but I could be dealing with thousands of data points. Does pandas have a specific function for joining items with same index into a table?</p>\n\n<p>Observation: all indexes would have the same number of entries.</p>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 1045, "user_id": 4410813, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JSSJ_0XXr7o/AAAAAAAAAAI/AAAAAAAAKSQ/_Z5gjtDL1U0/photo.jpg?sz=128", "display_name": "jorgemf", "link": "https://stackoverflow.com/users/4410813/jorgemf"}, "edited": false, "score": 0, "creation_date": 1482469302, "post_id": 41273756, "comment_id": 69793431, "body": "If you know the loop is going to be performed always the same number of times, then I think it is better to create a graph. Loops only make sense, in my opinion, when you don&#39;t know in advance the number of iterations and other special cases. You can also try the map function."}, {"owner": {"reputation": 784, "user_id": 3150181, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/3712d.png?s=128&g=1", "display_name": "Aditya369", "link": "https://stackoverflow.com/users/3150181/aditya369"}, "reply_to_user": {"reputation": 1045, "user_id": 4410813, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JSSJ_0XXr7o/AAAAAAAAAAI/AAAAAAAAKSQ/_Z5gjtDL1U0/photo.jpg?sz=128", "display_name": "jorgemf", "link": "https://stackoverflow.com/users/4410813/jorgemf"}, "edited": false, "score": 0, "creation_date": 1482470900, "post_id": 41273756, "comment_id": 69793895, "body": "I don&#39;t know the number of times the loop will be performed in advance. I just presented a simplified example."}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 6410979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a235eba385b718fe13b15e6c73ec54c6?s=128&d=identicon&r=PG&f=1", "display_name": "Yuan Yu", "link": "https://stackoverflow.com/users/6410979/yuan-yu"}, "is_accepted": false, "score": 0, "last_activity_date": 1482468906, "creation_date": 1482468906, "answer_id": 41295384, "question_id": 41273756, "link": "https://stackoverflow.com/questions/41273756/tensorflow-while-loop-parallelization-tensorarray/41295384#41295384", "title": "TensorFlow while_loop parallelization TensorArray", "body": "<p>You should probably get the parallel execution of the first 5 iterations and the second 5 iterations. I can say for sure if you provide a code sample. </p>\n"}], "owner": {"reputation": 784, "user_id": 3150181, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/3712d.png?s=128&g=1", "display_name": "Aditya369", "link": "https://stackoverflow.com/users/3150181/aditya369"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 537, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1482468906, "creation_date": 1482364029, "question_id": 41273756, "link": "https://stackoverflow.com/questions/41273756/tensorflow-while-loop-parallelization-tensorarray", "title": "TensorFlow while_loop parallelization TensorArray", "body": "<p>I don't exactly understand how the while_loop parallelization works. Suppose I have a TensorArray having 10 Tensors all of same shape. Now suppose the computations in the loop body for the first 5 Tensors are independent of the computations in the remaining 5 Tensors. Would TensorFlow run these two in parallel? Also if I use a Tensor instead of a TensorArray and made the updates to it using scatter_update, would it pass the gradients properly during backprop?</p>\n"}, {"tags": ["python", "arrays", "numpy", "multidimensional-array", "reshape"], "comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1482364108, "post_id": 41273699, "comment_id": 69748992, "body": "Your 4D case is actually only 3d with a different shape"}, {"owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1482364622, "post_id": 41273699, "comment_id": 69749098, "body": "Thanks! I just edited with 4D."}], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1482364203, "post_id": 41273736, "comment_id": 69749016, "body": "perhaps <code>arr.reshape(3, -1).T</code> to be more general."}, {"owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "edited": false, "score": 0, "creation_date": 1482364895, "post_id": 41273736, "comment_id": 69749181, "body": "Or better yet, <code>arr.reshape(arr.shape[0], -1).T</code>. This is (mostly) all magic to me. I&#39;m not sure how I would know to do this without trying different 2D combinations of reshaping and transposing. Can you give a bit of insight/explanation for this?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 2, "creation_date": 1482365371, "post_id": 41273736, "comment_id": 69749307, "body": "I came to the same solution - with a couple of trial-n-errors.  <code>reshape(9,3)</code> didn&#39;t look right; <code>reshape(3,9)</code> was almost there, it just needed the transpose."}, {"owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "edited": false, "score": 0, "creation_date": 1482365737, "post_id": 41273736, "comment_id": 69749391, "body": "I see, so I guess if you know the shape in one of the dimensions and that the product of all should give the number of elements then there&#39;s is somewhere to start. Great to know"}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 3, "last_activity_date": 1482363850, "creation_date": 1482363850, "answer_id": 41273736, "question_id": 41273699, "link": "https://stackoverflow.com/questions/41273699/convert-ndarray-into-2d-array-where-rows-are-the-elements-along-the-first-axis/41273736#41273736", "title": "Convert ndarray into 2d array where rows are the elements along the first axis", "body": "<p>Here is the easier way:</p>\n\n<pre><code>&gt;&gt;&gt; arr.reshape(3,9).T\narray([[ 1. ,  1.1,  1.2],\n       [ 2. ,  2.1,  2.2],\n       [ 3. ,  3.1,  3.2],\n       [ 4. ,  4.1,  4.2],\n       [ 5. ,  5.1,  5.2],\n       [ 6. ,  6.1,  6.2],\n       [ 7. ,  7.1,  7.2],\n       [ 8. ,  8.1,  8.2],\n       [ 9. ,  9.1,  9.2]])\n</code></pre>\n\n<p>Similar for the other case</p>\n\n<pre><code>&gt;&gt;&gt; arr.reshape(3,12).T\narray([[  1. ,   1.1,   1.2],\n       [  2. ,   2.1,   2.2],\n       [  3. ,   3.1,   3.2],\n       [  4. ,   4.1,   4.2],\n       [  5. ,   5.1,   5.2],\n       [  6. ,   6.1,   6.2],\n       [  7. ,   7.1,   7.2],\n       [  8. ,   8.1,   8.2],\n       [  9. ,   9.1,   9.2],\n       [ 10. ,  10.1,  10.2],\n       [ 11. ,  11.1,  11.2],\n       [ 12. ,  12.1,  12.2]])\n</code></pre>\n"}], "owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 0, "accepted_answer_id": 41273736, "answer_count": 1, "score": 3, "last_activity_date": 1482364600, "creation_date": 1482363561, "last_edit_date": 1495540418, "question_id": 41273699, "link": "https://stackoverflow.com/questions/41273699/convert-ndarray-into-2d-array-where-rows-are-the-elements-along-the-first-axis", "title": "Convert ndarray into 2d array where rows are the elements along the first axis", "body": "<p>I asked a similar question <a href=\"https://stackoverflow.com/questions/40773048/splitting-an-n-dimensional-numpy-array-into-multiple-1d-arrays\">here</a>, but since then my criteria have changed a little bit. Now, I'm not sure that this can be done without looping, however I'd like to avoid loops in the case of higher dimensional arrays in hopes that there is a general solution to this.</p>\n\n<p>Say that we have the following 3-dimensional array:</p>\n\n<pre><code>arr = np.array([np.arange(1, 10).reshape((3, 3)) + i/10 for i in range(3)])\narr[0]\nOut[36]: \narray([[ 1.,  2.,  3.],\n       [ 4.,  5.,  6.],\n       [ 7.,  8.,  9.]])\narr[1]\nOut[37]: \narray([[ 1.1,  2.1,  3.1],\n       [ 4.1,  5.1,  6.1],\n       [ 7.1,  8.1,  9.1]])\narr[2]\nOut[38]: \narray([[ 1.2,  2.2,  3.2],\n       [ 4.2,  5.2,  6.2],\n       [ 7.2,  8.2,  9.2]])\n</code></pre>\n\n<p>What I'd like to do is convert this into an 2-d array (list of lists works too). Where each row consists of the elements along the first dimension for a given position of the remaining indices.</p>\n\n<p>Here is the general solution that works for higher dimensional arrays as well:</p>\n\n<pre><code>from itertools import product:\n\nX, *Y = arr.shape\n\nresult = np.zeros((np.prod(Y), X))\n\nfor i, y in enumerate(product(*[range(y) for y in Y])):\n    for x in range(X):\n        result[i, x] = arr[(x,)+y]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Out[50]: \narray([[ 1. ,  1.1,  1.2],\n       [ 2. ,  2.1,  2.2],\n       [ 3. ,  3.1,  3.2],\n       [ 4. ,  4.1,  4.2],\n       [ 5. ,  5.1,  5.2],\n       [ 6. ,  6.1,  6.2],\n       [ 7. ,  7.1,  7.2],\n       [ 8. ,  8.1,  8.2],\n       [ 9. ,  9.1,  9.2]])\n</code></pre>\n\n<p>And for a 4D array:</p>\n\n<pre><code>arr = np.array([np.arange(1, 28).reshape((3, 3, 3)) + i/10 for i in range(3)])\nX, *Y = arr.shape\nresult = np.zeros((np.prod(Y), X))\nfor i, y in enumerate(product(*[range(y) for y in Y])):\n        for x in range(X):\n            result[i, x] = arr[(x,)+y]\n\nresult\nOut[62]: \narray([[  1. ,   1.1,   1.2],\n       [  2. ,   2.1,   2.2],\n       [  3. ,   3.1,   3.2],\n       [  4. ,   4.1,   4.2],\n       [  5. ,   5.1,   5.2],\n       [  6. ,   6.1,   6.2],\n       [  7. ,   7.1,   7.2],\n       [  8. ,   8.1,   8.2],\n       [  9. ,   9.1,   9.2],\n       [ 10. ,  10.1,  10.2],\n       [ 11. ,  11.1,  11.2],\n       [ 12. ,  12.1,  12.2],\n       [ 13. ,  13.1,  13.2],\n       [ 14. ,  14.1,  14.2],\n       [ 15. ,  15.1,  15.2],\n       [ 16. ,  16.1,  16.2],\n       [ 17. ,  17.1,  17.2],\n       [ 18. ,  18.1,  18.2],\n       [ 19. ,  19.1,  19.2],\n       [ 20. ,  20.1,  20.2],\n       [ 21. ,  21.1,  21.2],\n       [ 22. ,  22.1,  22.2],\n       [ 23. ,  23.1,  23.2],\n       [ 24. ,  24.1,  24.2],\n       [ 25. ,  25.1,  25.2],\n       [ 26. ,  26.1,  26.2],\n       [ 27. ,  27.1,  27.2]])\n</code></pre>\n\n<p>Is there anything in numpy that could be used to reshape arrays this way? Preferably without making a copy?</p>\n"}, {"tags": ["python", "python-3.x", "include", "cython", "mpi4py"], "comments": [{"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1482404296, "post_id": 41273644, "comment_id": 69764609, "body": "It may help to have an empty <code>__init__.py</code> in the directory as well since I think that&#39;s what Python uses to determine what is a package (although it actually loads the pyd file). I find this package stuff slightly confusing though..."}], "owner": {"reputation": 8239, "user_id": 4056181, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/G0SRK.jpg?s=128&g=1", "display_name": "jmd_dk", "link": "https://stackoverflow.com/users/4056181/jmd-dk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 728, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1483117394, "creation_date": 1482363145, "question_id": 41273644, "link": "https://stackoverflow.com/questions/41273644/cython-default-include-directories", "title": "Cython (default) include directories", "body": "<p>I am writing some cython code which uses the packages <code>mpi4py</code> and <code>cython_gsl</code>. From Python I can do <code>import mpi4py</code> and <code>import cython_gsl</code> without errors. I can also do <code>from cython_gsl cimport *</code> which cythonizes, compiles and runs correctly. If I do <code>from mpi4py cimport *</code> however, I get the error <code>'mpi4py.pxd' not found</code>. I can make it work if I supply the option <code>-I /path/to/python/lib/python3.5/site-packages</code> when invoking cython.</p>\n\n<p>The <code>__init__.pxd</code> files (which I believe is what is used by <code>cimport</code>) for the two packages are located in</p>\n\n<pre><code>/path/to/python/lib/python3.5/site-packages/cython_gsl/__init__.pxd\n/path/to/python/lib/python3.5/site-packages/mpi4py/include/mpi4py/__init__.pxd\n</code></pre>\n\n<p>My question is this: How come that cython is able to find the <code>__init__.pxd</code> for <code>cython_gsl</code> without explicitly including any path, but not the <code>__init__.pxd</code> for <code>mpi4py</code>? Sure the one for <code>mpi4py</code> is located at a deeper path, but why does including the <code>site-packages</code> directory enable cython to find <code>site-packages/mpi4py/include/mpi4py/__init__.pxd</code> when it already is able to find <code>site-packages/cython_gsl/__init__.pxd</code>?</p>\n\n<p>My hypothesis is that <code>cython_gsl</code> adds itself to the list of directories to include by cython when it is installed. How can I see a list of all directories included by default when invoking cython?</p>\n"}, {"tags": ["python", "scikit-learn", "transformation", "pipeline"], "answers": [{"tags": [], "owner": {"reputation": 11923, "user_id": 1577947, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f343750acd1f96953260b47c705582d9?s=128&d=identicon&r=PG", "display_name": "Jarad", "link": "https://stackoverflow.com/users/1577947/jarad"}, "is_accepted": false, "score": 1, "last_activity_date": 1482902817, "creation_date": 1482902817, "answer_id": 41355862, "question_id": 41273637, "link": "https://stackoverflow.com/questions/41273637/sklearn-featureunion-transformer-typeerror-fit-transform-takes-2-positio/41355862#41355862", "title": "Sklearn - FeatureUnion - Transformer: TypeError: fit_transform() takes 2 positional arguments but 3 were given", "body": "<p>Got it. Made another transformer to deal with the multi-label binarization. This is more like a work-around instead of a solution since the binarization happens within the transform instead of the pipeline.</p>\n\n<pre><code>from sklearn.preprocessing import MultiLabelBinarizer\nfrom sklearn.base import TransformerMixin, BaseEstimator\nfrom sklearn.pipeline import Pipeline, FeatureUnion\nfrom sklearn.feature_extraction.text import TfidfVectorizer\nfrom sklearn.multiclass import OneVsRestClassifier\nfrom sklearn.model_selection import GridSearchCV\nfrom sklearn.multiclass import OneVsRestClassifier\nfrom sklearn.linear_model import SGDClassifier\n\nimport pandas as pd\nimport numpy as np\n\nd = {'label': ['Help', 'Help', 'Other', 'Sale/Coupon', 'Other', 'Help', 'Help',\n           'Other', 'Sale/Coupon', 'Other', 'Help', 'Help', 'Other',\n           'Sale/Coupon', 'Other', 'Help', 'Help', 'Other', 'Sale/Coupon',\n           'Other', 'Help', 'Help', 'Other', 'Sale/Coupon', 'Other'],\n     'multilabels': [\"['Samples']\", \"['Deck']\", \"['Deck', 'Deck Over', 'Stain']\",\n                     \"['Coupons']\", \"['Bathroom']\", \"['Samples']\", \"['Deck']\",\n                     \"['Deck', 'Deck Over', 'Stain']\", \"['Coupons']\",\n                     \"['Bathroom']\", \"['Samples']\", \"['Deck']\",\n                     \"['Deck', 'Deck Over', 'Stain']\", \"['Coupons']\",\n                     \"['Bathroom']\", \"['Samples']\", \"['Deck']\",\n                     \"['Deck', 'Deck Over', 'Stain']\", \"['Coupons']\",\n                     \"['Bathroom']\", \"['Samples']\", \"['Deck']\",\n                     \"['Deck', 'Deck Over', 'Stain']\", \"['Coupons']\",\n                     \"['Bathroom']\"],\n     'response': ['this is some text', 'this is some more text',\n                  'and here is some more', 'and some more',\n                  'and here we go some more yay done', 'this is some text',\n                  'this is some more text', 'and here is some more',\n                  'and some more', 'and here we go some more yay done',\n                  'this is some text', 'this is some more text',\n                  'and here is some more', 'and some more',\n                  'and here we go some more yay done', 'this is some text',\n                  'this is some more text', 'and here is some more',\n                  'and some more', 'and here we go some more yay done',\n                  'this is some text', 'this is some more text',\n                  'and here is some more', 'and some more',\n                  'and here we go some more yay done']}\n\nclass ItemSelector(BaseEstimator, TransformerMixin):\n  def __init__(self, column):\n    self.column = column\n\n  def fit(self, X, y=None, **fit_params):\n    return self\n\n  def transform(self, X, y=None, **fit_params):\n    return X[self.column]\n\nclass MultiLabelTransformer(BaseEstimator, TransformerMixin):\n\n  def __init__(self, column):\n    self.column = column\n\n  def fit(self, X, y=None):\n    return self\n\n  def transform(self, X):\n    mlb = MultiLabelBinarizer()\n    return mlb.fit_transform(X[self.column])\n\npipeline = OneVsRestClassifier(\n  Pipeline([\n  ('union', FeatureUnion(\n    transformer_list=[\n      ('step1', Pipeline([\n        ('selector', ItemSelector(column='response')),\n        ('tfidf', TfidfVectorizer())\n        ])),\n      ('step2', Pipeline([\n        ('selector', MultiLabelTransformer(column='multilabels'))\n        ]))\n      ])),\n  ('sgd', SGDClassifier())\n  ])\n  )\n\ngrid = GridSearchCV(pipeline, {}, verbose=5)\n\ndf = pd.DataFrame(d, columns=['response', 'multilabels', 'label'])\ndf['multilabels'] = df['multilabels'].apply(lambda s: eval(s))\nX = df[['response', 'multilabels']]\ny = df['label']\ngrid.fit(X, y)\n</code></pre>\n"}], "owner": {"reputation": 11923, "user_id": 1577947, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f343750acd1f96953260b47c705582d9?s=128&d=identicon&r=PG", "display_name": "Jarad", "link": "https://stackoverflow.com/users/1577947/jarad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1721, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490472662, "creation_date": 1482363089, "last_edit_date": 1495540449, "question_id": 41273637, "link": "https://stackoverflow.com/questions/41273637/sklearn-featureunion-transformer-typeerror-fit-transform-takes-2-positio", "title": "Sklearn - FeatureUnion - Transformer: TypeError: fit_transform() takes 2 positional arguments but 3 were given", "body": "<p>My apologies in advance for this large code block. It is the most concise way I can provide a repeatable working example.</p>\n\n<p>In the code, I'm trying to use <code>FeatureUnion</code> to transform two columns from a dataframe where one column is text data so <code>TfidfVectorizer</code> and the other is a column of lists of tags so I want to use <code>MultiLabelBinarizer</code>.</p>\n\n<p><code>ItemSelector</code> transformer is for selecting the right column from the dataframe.</p>\n\n<p><strong>Why am I getting <code>TypeError: fit_transform() takes 2 positional arguments but 3 were given</code></strong> ?</p>\n\n<p><strong>What do I need to change in the code to get this example to run properly?</strong></p>\n\n<pre><code>from sklearn.preprocessing import MultiLabelBinarizer\nfrom sklearn.base import TransformerMixin, BaseEstimator\nfrom sklearn.pipeline import Pipeline, FeatureUnion\nfrom sklearn.feature_extraction.text import TfidfVectorizer\nfrom sklearn.multiclass import OneVsRestClassifier\nfrom sklearn.model_selection import GridSearchCV\nfrom sklearn.multiclass import OneVsRestClassifier\nfrom sklearn.linear_model import SGDClassifier\n\nimport pandas as pd\nimport numpy as np\n\nd = {'label': ['Help', 'Help', 'Other', 'Sale/Coupon', 'Other', 'Help', 'Help',\n           'Other', 'Sale/Coupon', 'Other', 'Help', 'Help', 'Other',\n           'Sale/Coupon', 'Other', 'Help', 'Help', 'Other', 'Sale/Coupon',\n           'Other', 'Help', 'Help', 'Other', 'Sale/Coupon', 'Other'],\n     'multilabels': [\"['Samples']\", \"['Deck']\", \"['Deck', 'Deck Over', 'Stain']\",\n                     \"['Coupons']\", \"['Bathroom']\", \"['Samples']\", \"['Deck']\",\n                     \"['Deck', 'Deck Over', 'Stain']\", \"['Coupons']\",\n                     \"['Bathroom']\", \"['Samples']\", \"['Deck']\",\n                     \"['Deck', 'Deck Over', 'Stain']\", \"['Coupons']\",\n                     \"['Bathroom']\", \"['Samples']\", \"['Deck']\",\n                     \"['Deck', 'Deck Over', 'Stain']\", \"['Coupons']\",\n                     \"['Bathroom']\", \"['Samples']\", \"['Deck']\",\n                     \"['Deck', 'Deck Over', 'Stain']\", \"['Coupons']\",\n                     \"['Bathroom']\"],\n     'response': ['this is some text', 'this is some more text',\n                  'and here is some more', 'and some more',\n                  'and here we go some more yay done', 'this is some text',\n                  'this is some more text', 'and here is some more',\n                  'and some more', 'and here we go some more yay done',\n                  'this is some text', 'this is some more text',\n                  'and here is some more', 'and some more',\n                  'and here we go some more yay done', 'this is some text',\n                  'this is some more text', 'and here is some more',\n                  'and some more', 'and here we go some more yay done',\n                  'this is some text', 'this is some more text',\n                  'and here is some more', 'and some more',\n                  'and here we go some more yay done']}\n\nclass ItemSelector(BaseEstimator, TransformerMixin):\n  def __init__(self, key):\n    self.key = key\n\n  def fit(self, X, y=None):\n    return self\n\n  def transform(self, df):\n    return df[self.key]\n\nfeature_union = FeatureUnion(\n  transformer_list=[\n    ('step1', Pipeline([\n      ('selector', ItemSelector(key='response')),\n      ('tfidf', TfidfVectorizer()),\n      ])),\n    ('step2', Pipeline([\n      ('selector', ItemSelector(key='multilabels')),\n      ('multilabel', MultiLabelBinarizer())\n      ]))\n    ])\n\npipeline = OneVsRestClassifier(\n  Pipeline([('union', feature_union),('sgd', SGDClassifier())])\n  )\n\ngrid = GridSearchCV(pipeline, {}, verbose=5)\n\ndf = pd.DataFrame(d, columns=['response', 'multilabels', 'label'])\nX = df[['response', 'multilabels']]\ny = df['label']\ngrid.fit(X, y)\n</code></pre>\n\n<p>This is the full error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/owner/Documents/my files/Account Tracking/Client/Foresee Analysis/SOQuestion.py\", line 72, in &lt;module&gt;\n    grid.fit(X, y)\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\model_selection\\_search.py\", line 945, in fit\n    return self._fit(X, y, groups, ParameterGrid(self.param_grid))\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\model_selection\\_search.py\", line 564, in _fit\n    for parameters in parameter_iterable\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\externals\\joblib\\parallel.py\", line 758, in __call__\n    while self.dispatch_one_batch(iterator):\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\externals\\joblib\\parallel.py\", line 608, in dispatch_one_batch\n    self._dispatch(tasks)\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\externals\\joblib\\parallel.py\", line 571, in _dispatch\n    job = self._backend.apply_async(batch, callback=cb)\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\externals\\joblib\\_parallel_backends.py\", line 109, in apply_async\n    result = ImmediateResult(func)\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\externals\\joblib\\_parallel_backends.py\", line 326, in __init__\n    self.results = batch()\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\externals\\joblib\\parallel.py\", line 131, in __call__\n    return [func(*args, **kwargs) for func, args, kwargs in self.items]\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\externals\\joblib\\parallel.py\", line 131, in &lt;listcomp&gt;\n    return [func(*args, **kwargs) for func, args, kwargs in self.items]\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\model_selection\\_validation.py\", line 238, in _fit_and_score\n    estimator.fit(X_train, y_train, **fit_params)\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\multiclass.py\", line 216, in fit\n    for i, column in enumerate(columns))\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\externals\\joblib\\parallel.py\", line 758, in __call__\n    while self.dispatch_one_batch(iterator):\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\externals\\joblib\\parallel.py\", line 608, in dispatch_one_batch\n    self._dispatch(tasks)\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\externals\\joblib\\parallel.py\", line 571, in _dispatch\n    job = self._backend.apply_async(batch, callback=cb)\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\externals\\joblib\\_parallel_backends.py\", line 109, in apply_async\n    result = ImmediateResult(func)\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\externals\\joblib\\_parallel_backends.py\", line 326, in __init__\n    self.results = batch()\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\externals\\joblib\\parallel.py\", line 131, in __call__\n    return [func(*args, **kwargs) for func, args, kwargs in self.items]\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\externals\\joblib\\parallel.py\", line 131, in &lt;listcomp&gt;\n    return [func(*args, **kwargs) for func, args, kwargs in self.items]\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\multiclass.py\", line 80, in _fit_binary\n    estimator.fit(X, y)\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\pipeline.py\", line 268, in fit\n    Xt, fit_params = self._fit(X, y, **fit_params)\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\pipeline.py\", line 234, in _fit\n    Xt = transform.fit_transform(Xt, y, **fit_params_steps[name])\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\pipeline.py\", line 734, in fit_transform\n    for name, trans, weight in self._iter())\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\externals\\joblib\\parallel.py\", line 758, in __call__\n    while self.dispatch_one_batch(iterator):\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\externals\\joblib\\parallel.py\", line 608, in dispatch_one_batch\n    self._dispatch(tasks)\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\externals\\joblib\\parallel.py\", line 571, in _dispatch\n    job = self._backend.apply_async(batch, callback=cb)\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\externals\\joblib\\_parallel_backends.py\", line 109, in apply_async\n    result = ImmediateResult(func)\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\externals\\joblib\\_parallel_backends.py\", line 326, in __init__\n    self.results = batch()\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\externals\\joblib\\parallel.py\", line 131, in __call__\n    return [func(*args, **kwargs) for func, args, kwargs in self.items]\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\externals\\joblib\\parallel.py\", line 131, in &lt;listcomp&gt;\n    return [func(*args, **kwargs) for func, args, kwargs in self.items]\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\pipeline.py\", line 577, in _fit_transform_one\n    res = transformer.fit_transform(X, y, **fit_params)\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\pipeline.py\", line 303, in fit_transform\n    return last_step.fit_transform(Xt, y, **fit_params)\nTypeError: fit_transform() takes 2 positional arguments but 3 were given\n</code></pre>\n\n<p>Note: I have looked at <a href=\"https://stackoverflow.com/questions/40363650/transform-takes-2-positional-arguments-but-3-were-given\">_transform() takes 2 positional arguments but 3 were given</a> but it still doesn't make sense to me.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1482363276, "post_id": 41273636, "comment_id": 69748791, "body": "Your title doesn&#39;t seem to match the question. Also this is neither a code-writing nor tutorial service; if your question is <i>how do I convert an integer to hex in Python</i> that seems trivially Googlable. If not, please clarify what it is, ideally with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your current implementation. See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1482363523, "post_id": 41273636, "comment_id": 69748845, "body": "What do you mean by calling an address? In general, you do not deal with addresses in Python. Also, what do you mean by &quot;convert an int to a hex&quot;. A <code>hex</code> isn&#39;t a data type."}, {"owner": {"reputation": 469, "user_id": 2407881, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/f7880c753111571008c76536033f45d1?s=128&d=identicon&r=PG", "display_name": "jgv115", "link": "https://stackoverflow.com/users/2407881/jgv115"}, "edited": false, "score": 0, "creation_date": 1482365906, "post_id": 41273636, "comment_id": 69749437, "body": "I know how to convert integers to a hex format. Yes I understand it&#39;s not a data type, I understand that if I use &quot;hex&quot; it will output a type string. I don&#39;t care what class it is in, I just want to be able to output and see the hex representation of the int."}, {"owner": {"reputation": 469, "user_id": 2407881, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/f7880c753111571008c76536033f45d1?s=128&d=identicon&r=PG", "display_name": "jgv115", "link": "https://stackoverflow.com/users/2407881/jgv115"}, "edited": false, "score": 0, "creation_date": 1482366054, "post_id": 41273636, "comment_id": 69749478, "body": "What I mean by address is that the function takes a integer input (which happens to be an address in the device I&#39;m connected to). Basically I want to be able to see the decimal and hex equivalent output corresponding to the integer I put into the function. Finally, I&#39;m not looking for someone to write the code for me. I&#39;m simply looking for some guidance into the logic on how I could do it on Python"}], "answers": [{"comments": [{"owner": {"reputation": 469, "user_id": 2407881, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/f7880c753111571008c76536033f45d1?s=128&d=identicon&r=PG", "display_name": "jgv115", "link": "https://stackoverflow.com/users/2407881/jgv115"}, "edited": false, "score": 0, "creation_date": 1482366251, "post_id": 41273676, "comment_id": 69749525, "body": "Please don&#39;t mind my ignorance, but is there any reason why storing the hex value is a bad practice? I&#39;m not doubting you, I&#39;m just curious why. But thanks for this answer! This is exactly what I was looking for!"}, {"owner": {"reputation": 14401, "user_id": 1730261, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/m57hO.jpg?s=128&g=1", "display_name": "Rushy Panchal", "link": "https://stackoverflow.com/users/1730261/rushy-panchal"}, "reply_to_user": {"reputation": 469, "user_id": 2407881, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/f7880c753111571008c76536033f45d1?s=128&d=identicon&r=PG", "display_name": "jgv115", "link": "https://stackoverflow.com/users/2407881/jgv115"}, "edited": false, "score": 0, "creation_date": 1482370654, "post_id": 41273676, "comment_id": 69750569, "body": "@jgv115 It&#39;s not the best practice because you can easily get the hex value using the <code>hex</code> function, which is quick to do. Unless you require the hex representation many times, it&#39;s just as easy to call the <code>hex</code> function when you need it as opposed to looking up a pre-computed value."}], "tags": [], "owner": {"reputation": 14401, "user_id": 1730261, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/m57hO.jpg?s=128&g=1", "display_name": "Rushy Panchal", "link": "https://stackoverflow.com/users/1730261/rushy-panchal"}, "is_accepted": true, "score": 2, "last_activity_date": 1506478320, "last_edit_date": 1506478320, "creation_date": 1482363336, "answer_id": 41273676, "question_id": 41273636, "link": "https://stackoverflow.com/questions/41273636/creating-a-database-of-numbers-in-python/41273676#41273676", "title": "Creating a database of numbers in Python", "body": "<p>To store, you can use the Python built-in dictionary type (<code>dict</code>)</p>\n\n<p>Say your function to get the integer values is <code>f</code>. Then, you can store each address's return value:</p>\n\n<pre><code>returned_ints = {}\nfor address in addresses:\n    returned_ints[address] = f(address)\n</code></pre>\n\n<p>I would suggest against storing the hexadecimal value, as this can be easily computed using the <code>hex</code> function when you need it. However, if you are adamant about storing it, you can store both the return value and the hexadecimal representation as a tuple:</p>\n\n<pre><code>ret = f(address)\nreturned_ints[address] = (ret, hex(ret))\n</code></pre>\n\n<p>Then, to get the value for any specific address, you would use <code>returned_ints[address][0]</code>; similarly, you can get the hexadecimal representation using <code>returned_ints[address][1]</code>.</p>\n"}], "owner": {"reputation": 469, "user_id": 2407881, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/f7880c753111571008c76536033f45d1?s=128&d=identicon&r=PG", "display_name": "jgv115", "link": "https://stackoverflow.com/users/2407881/jgv115"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 41273676, "answer_count": 1, "score": 0, "last_activity_date": 1506478320, "creation_date": 1482363088, "question_id": 41273636, "link": "https://stackoverflow.com/questions/41273636/creating-a-database-of-numbers-in-python", "title": "Creating a database of numbers in Python", "body": "<p>I'm fairly new to Python so I just need a bit of guidance.</p>\n\n<p>I'm reading from a database using a custom function by calling a particular address (an int). The function will return me another int and then I want to convert the returned integer to a hex. The problem is that the function will ONLY return me the int and nothing else.</p>\n\n<p>My question is this: How do I make a dictionary type object that I can access the outputted decimal AND the hex value from the int address I used to get them in the first place.</p>\n\n<p>I also want to be able to print it out in a legible way.</p>\n\n<p>Wonder if anyone can give me some guidance.</p>\n"}, {"tags": ["python", "session", "flask", "session-cookies"], "answers": [{"tags": [], "owner": {"reputation": 3819, "user_id": 5802335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6561d4f88469479b23557bdf8b4b6ae4?s=128&d=identicon&r=PG&f=1", "display_name": "metmirr", "link": "https://stackoverflow.com/users/5802335/metmirr"}, "is_accepted": false, "score": 0, "last_activity_date": 1482394244, "creation_date": 1482394244, "answer_id": 41278502, "question_id": 41273602, "link": "https://stackoverflow.com/questions/41273602/flask-session-variables-disappear-when-using-remote-server-tunnelling/41278502#41278502", "title": "Flask session variables disappear when using remote server tunnelling", "body": "<p>Two view function you have, first one add a value to session the other one edit this value, they are use same url so you can combine them. Well if you say I am posting the form then check for post method</p>\n\n<pre><code>@app.route('/', methods=['GET', 'POST'])\ndef home():\n    session['ax'] = 42\n    if request.method == 'POST':\n        incr = request.form('incr')\n        a = session['ax']\n        if incr == '1':\n            a = a + 1\n        session['ax'] = a\n    return render_template(\"test1.html\", session=session)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5400147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96d124aa70aa1aa840d8842834473a7?s=128&d=identicon&r=PG&f=1", "display_name": "Arijit Ray", "link": "https://stackoverflow.com/users/5400147/arijit-ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 477, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1482394244, "creation_date": 1482362870, "last_edit_date": 1482363690, "question_id": 41273602, "link": "https://stackoverflow.com/questions/41273602/flask-session-variables-disappear-when-using-remote-server-tunnelling", "title": "Flask session variables disappear when using remote server tunnelling", "body": "<p>I am trying to use session variables in a flask application like follows:</p>\n\n<pre><code>from flask import Flask, session\nfrom flask import request\nfrom flask import render_template\nfrom flask import redirect, url_for\n\napp = Flask(__name__)\n\napp.secret_key = 'verysecretindeed'\n\n@app.route('/')\ndef myform():\n    session['ax'] = 42\n    return render_template(\"test1.html\", session=session)\n\n@app.route('/', methods=['GET', 'POST'])\ndef modifyvalue():\n\n    incr = request.form('incr')\n    a = session['ax']\n    if incr == '1':\n         a = a + 1\n    session['ax']=a\n    return render_template(\"test1.html\", session=session)\n\nif __name__ == '__main__':\n    app.run(debug=True)\n</code></pre>\n\n<p>This code works fine on my local machine.</p>\n\n<p>Now, I run the code on a remote server and tunnel the remote server's localhost to my localhost in the following way:</p>\n\n<pre><code>ssh -N -f -L localhost:5000:localhost:5000 &lt;username&gt;@&lt;server&gt;.blah.edu\n</code></pre>\n\n<p>Now, when I run this code, after getting the \"incr\" request from the webpage, I get:</p>\n\n<p>keyerror: 'ax' inside the modifyvalue() function. </p>\n\n<p>When I print the session inside the myform() function, the values are there. However, when I print the session in the <code>modifyvalue()</code> function, the session is empty. </p>\n\n<p>I have tried setting APPLICATION_ROOT like:</p>\n\n<pre><code>app.config['APPLICATION_ROOT']= '/path/to/code/'\n</code></pre>\n\n<p>I have tried other browsers, incognito, nothing seems to work.\nI tried clearing the session first in myform() as well. My app.secret_key is just a static string value.  </p>\n\n<p>Any idea what might be going wrong?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 11, "creation_date": 1482362930, "post_id": 41273600, "comment_id": 69748695, "body": "I can&#39;t find a question here."}], "answers": [{"tags": [], "owner": {"reputation": 1604, "user_id": 1941973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7d5ad3acd2e7f78da8fd86dc0164300?s=128&d=identicon&r=PG", "display_name": "cg909", "link": "https://stackoverflow.com/users/1941973/cg909"}, "is_accepted": true, "score": 0, "last_activity_date": 1482363288, "creation_date": 1482363288, "answer_id": 41273662, "question_id": 41273600, "link": "https://stackoverflow.com/questions/41273600/list-index-out-of-range-in-python/41273662#41273662", "title": "List index out of range in python", "body": "<p>You check for the empty line after appending the splitted line to data. <code>.split()</code> on an empty line returns an empty list.</p>\n\n<p><code>x[0]</code> on an empty list produces an IndexError.</p>\n\n<pre><code>data +=[line.split()] # equal to data.append([])\nif line =='':\n    ips=[\n         x[0] # Access to the first element of every list in data.\n         for x in data\n        ]\n</code></pre>\n\n<p>You need to check for the empty line before appending it to <code>data</code></p>\n"}], "owner": {"reputation": 25, "user_id": 6765475, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-ZnI3YGUGeTw/AAAAAAAAAAI/AAAAAAAABUM/yIl2HOuUneM/photo.jpg?sz=128", "display_name": "arun soman", "link": "https://stackoverflow.com/users/6765475/arun-soman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 41273662, "answer_count": 1, "score": -11, "last_activity_date": 1482772923, "creation_date": 1482362856, "last_edit_date": 1482364359, "question_id": 41273600, "link": "https://stackoverflow.com/questions/41273600/list-index-out-of-range-in-python", "title": "List index out of range in python", "body": "<pre><code>data =[]\nips =[]\nwhile True:\n    line = sys.stdin.readline()\n    data +=[line.split()]\n    if line =='':\n        ips=[x[0] for x in data]        \n        break\n</code></pre>\n"}, {"tags": ["python", "gensim"], "answers": [{"comments": [{"owner": {"reputation": 8385, "user_id": 697911, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1", "display_name": "user697911", "link": "https://stackoverflow.com/users/697911/user697911"}, "edited": false, "score": 0, "creation_date": 1509041044, "post_id": 41324386, "comment_id": 80869288, "body": "I received the same error. I can import gensim in python terminal, but can&#39;t import it  in iPython. What&#39;s the issue? Both my python and gensim are installed in my own anaconda environment."}], "tags": [], "owner": {"reputation": 24080, "user_id": 15770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XEC8x.jpg?s=128&g=1", "display_name": "akaihola", "link": "https://stackoverflow.com/users/15770/akaihola"}, "is_accepted": false, "score": 1, "last_activity_date": 1482698678, "creation_date": 1482698678, "answer_id": 41324386, "question_id": 41273573, "link": "https://stackoverflow.com/questions/41273573/gensim-library-not-recognized-in-jupyter-notebook/41324386#41324386", "title": "Gensim Library not recognized in Jupyter notebook", "body": "<p>Probably you're running Jupyter with a different Python interpreter. See what this prints in the notebook:</p>\n\n<pre><code>import sys\nsys.path\n</code></pre>\n\n<p>Do the directories listed look similar or different from the ones you saw when starting Python in the terminal? </p>\n"}, {"tags": [], "owner": {"reputation": 910, "user_id": 2990066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993bf45e5e7c4f274593dad1eeec1754?s=128&d=identicon&r=PG", "display_name": "ShahNewazKhan", "link": "https://stackoverflow.com/users/2990066/shahnewazkhan"}, "is_accepted": false, "score": 2, "last_activity_date": 1512687202, "creation_date": 1512687202, "answer_id": 47705175, "question_id": 41273573, "link": "https://stackoverflow.com/questions/41273573/gensim-library-not-recognized-in-jupyter-notebook/47705175#47705175", "title": "Gensim Library not recognized in Jupyter notebook", "body": "<p><code>pip list</code> will not show you conda modules\ntry <code>conda list</code> to ensure you have the gensim module installed</p>\n\n<p>EDIT:</p>\n\n<p>Also ensure your kernelspec and the python interpreter are pointing to the same enviroment</p>\n\n<p><a href=\"http://jupyter-client.readthedocs.io/en/stable/api/kernelspec.html\" rel=\"nofollow noreferrer\">http://jupyter-client.readthedocs.io/en/stable/api/kernelspec.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 854, "user_id": 1495261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e7f500a45a26bc13e7b9898c1ef4156?s=128&d=identicon&r=PG", "display_name": "Bashar Ali Labadi", "link": "https://stackoverflow.com/users/1495261/bashar-ali-labadi"}, "is_accepted": false, "score": 2, "last_activity_date": 1537674865, "creation_date": 1537674865, "answer_id": 52462835, "question_id": 41273573, "link": "https://stackoverflow.com/questions/41273573/gensim-library-not-recognized-in-jupyter-notebook/52462835#52462835", "title": "Gensim Library not recognized in Jupyter notebook", "body": "<p>this question is old but since google dropped me here, for others, I had to install jupyter for that conda environment, because it was also installed globally which wasn't seeing my env packages.</p>\n"}, {"comments": [{"owner": {"reputation": 1500, "user_id": 1719931, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4101485031095085151db1f0b4a1f368?s=128&d=identicon&r=PG&f=1", "display_name": "robertspierre", "link": "https://stackoverflow.com/users/1719931/robertspierre"}, "edited": false, "score": 0, "creation_date": 1606409421, "post_id": 56081715, "comment_id": 114960989, "body": "The question clearly states that the OP installed gemsim. Total off-topic answer"}], "tags": [], "owner": {"reputation": 9, "user_id": 11482325, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-c2Dl1h5FBrg/AAAAAAAAAAI/AAAAAAAAADQ/BAz6CCw7voA/photo.jpg?sz=128", "display_name": "Tejaswi Pallerla", "link": "https://stackoverflow.com/users/11482325/tejaswi-pallerla"}, "is_accepted": false, "score": -1, "last_activity_date": 1557513297, "last_edit_date": 1557513297, "creation_date": 1557506570, "answer_id": 56081715, "question_id": 41273573, "link": "https://stackoverflow.com/questions/41273573/gensim-library-not-recognized-in-jupyter-notebook/56081715#56081715", "title": "Gensim Library not recognized in Jupyter notebook", "body": "<p>Execute in command prompt: </p>\n\n<pre><code>pip install gensim\n</code></pre>\n\n<p>will solve the problem \"No module named gensim\"</p>\n"}, {"tags": [], "owner": {"reputation": 708, "user_id": 11566849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IMv3n.jpg?s=128&g=1", "display_name": "powerPixie", "link": "https://stackoverflow.com/users/11566849/powerpixie"}, "is_accepted": false, "score": 0, "last_activity_date": 1572183217, "creation_date": 1572183217, "answer_id": 58579891, "question_id": 41273573, "link": "https://stackoverflow.com/questions/41273573/gensim-library-not-recognized-in-jupyter-notebook/58579891#58579891", "title": "Gensim Library not recognized in Jupyter notebook", "body": "<p>It's an old question, but I found myself with the same issue today. And all I had to do, to get it working properly, was to click on \"Update index\", for installed packages in the Environment menu of Anaconda. A little print to illustrate:</p>\n\n<p><a href=\"https://i.stack.imgur.com/4tSjU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4tSjU.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 1500, "user_id": 1719931, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4101485031095085151db1f0b4a1f368?s=128&d=identicon&r=PG&f=1", "display_name": "robertspierre", "link": "https://stackoverflow.com/users/1719931/robertspierre"}, "is_accepted": false, "score": 0, "last_activity_date": 1606417222, "last_edit_date": 1606417222, "creation_date": 1606412249, "answer_id": 65026888, "question_id": 41273573, "link": "https://stackoverflow.com/questions/41273573/gensim-library-not-recognized-in-jupyter-notebook/65026888#65026888", "title": "Gensim Library not recognized in Jupyter notebook", "body": "<p>For some reason, after installing gensim in a virtual environment with</p>\n<pre><code>conda install -c conda-forge gensim\n</code></pre>\n<p>You have to re-install jupyter with:</p>\n<pre><code>conda install jupyter\n</code></pre>\n<p>Otherwise jupyter will open the kernel and the <code>sys.path</code> of the base environment, and thus will not recognize gensim and <code>import gensim</code> will not work.</p>\n<p>I have no idea why is that, maybe the gensim conda package is broken.</p>\n<p><strong>EDIT:</strong></p>\n<p>If jupyter is installed with the previous command, you have to force reinstallation as follows:</p>\n<pre><code>conda update jupyter --force-reinstall --no-deps\n</code></pre>\n"}], "owner": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9222, "favorite_count": 0, "answer_count": 6, "score": 1, "last_activity_date": 1606417222, "creation_date": 1482362608, "last_edit_date": 1482363053, "question_id": 41273573, "link": "https://stackoverflow.com/questions/41273573/gensim-library-not-recognized-in-jupyter-notebook", "title": "Gensim Library not recognized in Jupyter notebook", "body": "<p>I have a bIg data platform. On that I install Anaconda. When I ssh to my account on the platform and open up a Python interpreter in terminal it works fine when I import the gensim library. I had earlier installed this library using </p>\n\n<pre><code>Conda install gensim\n\n$ python\nPython 2.7.12 |Anaconda 2.5.0 (64-bit)| (default, Jul  2 2016, 17:42:40) \n[GCC 4.4.7 20120313 (Red Hat 4.4.7-1)] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\nAnaconda is brought to you by Continuum Analytics.\nPlease check out: http://continuum.io/thanks and https://anaconda.org\n&gt;&gt;&gt; import gensim\n/home/anaconda2/lib/python2.7/site-packages/gensim/utils.py:1015: UserWarning: Pattern library is not installed, lemmatization won't be available.\n  warnings.warn(\"Pattern library is not installed, lemmatization won't be available.\")\n</code></pre>\n\n<p>If you see it does import the library (just gives some warning for Pattern library). However when I open up Jupyter notebook and try to import the same library there it gives the following:</p>\n\n<pre><code>In [11]:\n\nimport gensim \n---------------------------------------------------------------------------\nImportError                               Traceback (most recent call last)\n&lt;ipython-input-11-0539d76422c6&gt; in &lt;module&gt;()\n----&gt; 1 import gensim\n\nImportError: No module named gensim\n</code></pre>\n\n<p>Am not sure why the same library which is installed is not working in Jupyter. Please note that when I do </p>\n\n<pre><code>pip list\n</code></pre>\n\n<p>it shows me all the libraries and it has gensim there. </p>\n"}, {"tags": ["android", "python", "json", "android-volley"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1482362289, "post_id": 41273503, "comment_id": 69748499, "body": "Besides that point. <code>localhost</code> will not work on your Android device. This has been answered again and again. <a href=\"http://stackoverflow.com/questions/4779963/how-can-i-access-my-localhost-from-my-android-device\" title=\"how can i access my localhost from my android device\">stackoverflow.com/questions/4779963/&hellip;</a>"}, {"owner": {"reputation": 255, "user_id": 4862887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IG3N1.jpg?s=128&g=1", "display_name": "Matarata", "link": "https://stackoverflow.com/users/4862887/matarata"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1482362338, "post_id": 41273503, "comment_id": 69748510, "body": "I have web-server running"}, {"owner": {"reputation": 255, "user_id": 4862887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IG3N1.jpg?s=128&g=1", "display_name": "Matarata", "link": "https://stackoverflow.com/users/4862887/matarata"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1482362371, "post_id": 41273503, "comment_id": 69748524, "body": "I used my laptop ip. i edit my question"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1482362396, "post_id": 41273503, "comment_id": 69748531, "body": "<code>json.py</code> does not appear to be running from a web-server. Also, naming a file <code>json.py</code> will not work with the line <code>import json</code>"}, {"owner": {"reputation": 255, "user_id": 4862887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IG3N1.jpg?s=128&g=1", "display_name": "Matarata", "link": "https://stackoverflow.com/users/4862887/matarata"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1482362457, "post_id": 41273503, "comment_id": 69748550, "body": "import json is fine. I used this code to communicate with android to python using socket and it worked fine but not working with volley"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1482362511, "post_id": 41273503, "comment_id": 69748565, "body": "Sure, but what is hosting your python files? Flask? Apache HTTP?"}, {"owner": {"reputation": 255, "user_id": 4862887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IG3N1.jpg?s=128&g=1", "display_name": "Matarata", "link": "https://stackoverflow.com/users/4862887/matarata"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1482362617, "post_id": 41273503, "comment_id": 69748595, "body": "I can make this work with php code but don&#39;t know how to handle this with python coz i&#39;m new with python."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1482362747, "post_id": 41273503, "comment_id": 69748638, "body": "Unclear why you need Python, then if you can make this all work with PHP. Python has it&#39;s own web frameworks that can work with Apache, or you can run them separately. You have said yourself that you are &quot;pretty sure that your python code is not correct&quot;, so you should start there. Fix the server-side before even touching the Android client."}, {"owner": {"reputation": 255, "user_id": 4862887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IG3N1.jpg?s=128&g=1", "display_name": "Matarata", "link": "https://stackoverflow.com/users/4862887/matarata"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1482362862, "post_id": 41273503, "comment_id": 69748673, "body": "My android client is 100% correct. Yes i can do it with php but i need to handle server side with python for some reason.I asked here though someone know how to fix this.Its a simple question"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1482362871, "post_id": 41273503, "comment_id": 69748677, "body": "And there&#39;s a big long <a href=\"https://wiki.python.org/moin/WebFrameworks/\" rel=\"nofollow noreferrer\">list of Python Web Frameworks</a>. Basically, what I&#39;m trying to say is that Apache is serving the plain text of your Python file - it should not be executing any Python code."}, {"owner": {"reputation": 255, "user_id": 4862887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IG3N1.jpg?s=128&g=1", "display_name": "Matarata", "link": "https://stackoverflow.com/users/4862887/matarata"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1482362979, "post_id": 41273503, "comment_id": 69748710, "body": "So how people send JsonRequest with POST using python? Thats my question. there is no way for this?"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 1, "creation_date": 1482363111, "post_id": 41273503, "comment_id": 69748751, "body": "There is a way, but you have to pick a server that can accept those requests. Like Flask is really popular, but you can use whatever, just not a plain text file, essentially. <a href=\"http://flask.pocoo.org/docs/0.12/quickstart/#http-methods\" rel=\"nofollow noreferrer\">flask.pocoo.org/docs/0.12/quickstart/#http-methods</a>"}, {"owner": {"reputation": 255, "user_id": 4862887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IG3N1.jpg?s=128&g=1", "display_name": "Matarata", "link": "https://stackoverflow.com/users/4862887/matarata"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1482363159, "post_id": 41273503, "comment_id": 69748762, "body": "You probably know how you can send JsonObjects with POST or GET method in PHP. I want to do exacte same thing just with python."}, {"owner": {"reputation": 255, "user_id": 4862887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IG3N1.jpg?s=128&g=1", "display_name": "Matarata", "link": "https://stackoverflow.com/users/4862887/matarata"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1482363193, "post_id": 41273503, "comment_id": 69748774, "body": "Ok i will check Flask.ty"}, {"owner": {"reputation": 2192, "user_id": 5942579, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/o6P12.jpg?s=128&g=1", "display_name": "Emmanuel Mtali", "link": "https://stackoverflow.com/users/5942579/emmanuel-mtali"}, "edited": false, "score": 0, "creation_date": 1482363935, "post_id": 41273503, "comment_id": 69748942, "body": "Check djangi-rest-framework"}], "answers": [{"tags": [], "owner": {"reputation": 255, "user_id": 4862887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IG3N1.jpg?s=128&g=1", "display_name": "Matarata", "link": "https://stackoverflow.com/users/4862887/matarata"}, "is_accepted": true, "score": 2, "last_activity_date": 1482367981, "creation_date": 1482367981, "answer_id": 41274255, "question_id": 41273503, "link": "https://stackoverflow.com/questions/41273503/send-receive-jsonrequest-from-android-to-python/41274255#41274255", "title": "Send &amp; Receive JsonRequest from Android to Python", "body": "<p>I solve this issue with this codes:</p>\n\n<p>Android Code:</p>\n\n<pre><code>JsonObjectRequest jsObjRequest = new JsonObjectRequest\n                (Request.Method.GET, JsonUrl, null, new Response.Listener&lt;JSONObject&gt;() {\n                    @Override\n                    public void onResponse(JSONObject response) {\n                        try {\n                            JSONObject obj = new JSONObject(response.toString());\n                            String name = obj.getString(\"name\");\n                            String age = obj.getString(\"age\");\n                            data += \"Name: \" + name + \"\\nAge : \" + age;\n                            mTextView.setText(data);\n                        }\n                        catch (JSONException e) {\n                            mTextView.setText(e.toString());\n                        }\n                    }\n                }, new Response.ErrorListener() {\n                    @Override\n                    public void onErrorResponse(VolleyError error) {\n                        mTextView.setText(\"Error in recieving JSON Response:\\n\" + error.toString());\n                    }\n                }){\n            @Override\n            public Map&lt;String, String&gt; getHeaders() throws AuthFailureError {\n                Map&lt;String,String&gt; params = new HashMap&lt;String, String&gt;();\n                params.put(\"Content-Type\",\"application/x-www-form-urlencoded\");\n                return params;\n            }\n        };\n        // Access the RequestQueue through your singleton class.\n        MySingleton.getInstance(this).addToRequestQueue(jsObjRequest);\n</code></pre>\n\n<p>Python Code:</p>\n\n<pre><code>from flask import Flask\nimport json\n\napp = Flask(__name__)\n\n@app.route('/', methods=['GET'])\ndef echo_msg():\n    pythonDictionary = {'name': 'Bob', 'age': 44, 'isEmployed': True}\n    dictionaryToJson = json.dumps(pythonDictionary)\n    return dictionaryToJson\n\nif __name__ == '__main__':\n    app.run(host='0.0.0.0')\n</code></pre>\n\n<p>So you can run Flask web-server for Python and send your JsonObject (with GET method) like this.</p>\n"}], "owner": {"reputation": 255, "user_id": 4862887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IG3N1.jpg?s=128&g=1", "display_name": "Matarata", "link": "https://stackoverflow.com/users/4862887/matarata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2080, "favorite_count": 0, "accepted_answer_id": 41274255, "answer_count": 1, "score": 0, "last_activity_date": 1482367981, "creation_date": 1482362123, "last_edit_date": 1482362323, "question_id": 41273503, "link": "https://stackoverflow.com/questions/41273503/send-receive-jsonrequest-from-android-to-python", "title": "Send &amp; Receive JsonRequest from Android to Python", "body": "<p>I use Volley library in android and create a JsonObjectRequest like this:</p>\n\n<pre><code>String JsonUrl = \"192.168.1.3/json.py\";    \nJsonObjectRequest jsObjRequest = new JsonObjectRequest\n                (Request.Method.GET, JsonUrl, null, new Response.Listener&lt;JSONObject&gt;() {\n                    @Override\n                    public void onResponse(JSONObject response) {\n                        mTextView.setText(\"Json Response: \" + response.toString());\n                    }\n                }, new Response.ErrorListener() {\n                    @Override\n                    public void onErrorResponse(VolleyError error) {\n                        mTextView.setText(\"Error in recieving JSON Response\");\n                    }\n                });\n        // Access the RequestQueue through your singleton class.\n        MySingleton.getInstance(this).addToRequestQueue(jsObjRequest);\n</code></pre>\n\n<p>and this is my Python Code (json.py):</p>\n\n<pre><code>import json\n\npythonDictionary = {'name':'Bob', 'age':44, 'isEmployed':True}\ndictionaryToJson = json.dumps(pythonDictionary)\nprint(dictionaryToJson)\n</code></pre>\n\n<p>I'm pretty sure that my python code is not correct.\nMy problem is that how can i write a code in python to send &amp; receive JsonObjects to android with Get or POST method? Thanks.</p>\n"}, {"tags": ["python", "networkx", "gephi"], "comments": [{"owner": {"reputation": 17226, "user_id": 2966723, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e40a62626d129d5df080d4d57c22b53d?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/2966723/joel"}, "edited": false, "score": 0, "creation_date": 1482365390, "post_id": 41273467, "comment_id": 69749311, "body": "It is certainly possible to make one node of a graph be itself another graph.  So you can create two graphs <code>G1</code> and <code>G2</code>, and then create a new graph <code>H</code> which consists of <code>G1</code> and <code>G2</code> and an edge between them."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1482365493, "post_id": 41273467, "comment_id": 69749337, "body": "You are right, <code>networkx</code> does not support hierarchical networks. Hierarchical graph support in gephi apparently has been removed <a href=\"https://github.com/gephi/gephi/issues/1100\" rel=\"nofollow noreferrer\">github.com/gephi/gephi/issues/1100</a>"}, {"owner": {"reputation": 4062, "user_id": 436025, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/29de674ba550b421c3bafc2e9a298edb?s=128&d=identicon&r=PG", "display_name": "Alexander Kondratskiy", "link": "https://stackoverflow.com/users/436025/alexander-kondratskiy"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1482365782, "post_id": 41273467, "comment_id": 69749409, "body": "@DYZ Ah damn! I didn&#39;t realize that feature was removed :("}], "owner": {"reputation": 4062, "user_id": 436025, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/29de674ba550b421c3bafc2e9a298edb?s=128&d=identicon&r=PG", "display_name": "Alexander Kondratskiy", "link": "https://stackoverflow.com/users/436025/alexander-kondratskiy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 753, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1482361813, "creation_date": 1482361813, "question_id": 41273467, "link": "https://stackoverflow.com/questions/41273467/creating-hierarchical-graphs-with-networkx", "title": "Creating hierarchical graphs with networkx", "body": "<p>I'm exploring some options to do some graph analysis, and one crucial component is that the graph data I have is very hierarchical. I have many \"leaf\" nodes that are all interconnected, and then I have clusters of those nodes which themselves are interconnected (edges between the clusters themselves). There are several layers of this hierarchy</p>\n\n<p>A tool called Gephi seems to support these types of graphs, and can be represented in its .gexf format. The python <code>networkx</code> library seems to support gexf output, but doesn't seem to have a notion of hierarchy, unless I'm missing something.</p>\n\n<p>I've been tempted to create several <code>networkx</code> graphs (one for each layer of hierarchy), and add references to nodes in other graphs as part of the node data. It would then be possible to modify the GEXF writer to output such hierarchical graphs.</p>\n\n<p>Am I missing anything? Are there better ways to represent such graphs?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "pandas", "text"], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 7096907, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/78ade54233f113881ef64c595cbf6c8a?s=128&d=identicon&r=PG&f=1", "display_name": "J Sedai", "link": "https://stackoverflow.com/users/7096907/j-sedai"}, "edited": false, "score": 0, "creation_date": 1482416087, "post_id": 41273449, "comment_id": 69771973, "body": "Thanks a lot. I have the code set up to do both of those things at different times. Count frequencies and remove duplicates. I just couldn&#39;t get those lists separated and I think your code is probably more efficient for the rest. Thanks for your help."}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 2, "last_activity_date": 1482362149, "last_edit_date": 1482362149, "creation_date": 1482361720, "answer_id": 41273449, "question_id": 41273411, "link": "https://stackoverflow.com/questions/41273411/creating-lists-of-text-from-rows-in-a-dataframe-based-on-column-category/41273449#41273449", "title": "Creating lists of text from rows in a dataframe based on column category", "body": "<p>this should do it</p>\n\n<pre><code>df.groupby('category').strings.apply(' '.join).str.split()\n\ncategory\ncandy    [chocolate, frog, jelly, beans, lollipops]\npets              [leash, cat, dog, cat, dog, frog]\nName: strings, dtype: object\n</code></pre>\n\n<hr>\n\n<p><strong><em>extra credit</em></strong><br>\nget unique list</p>\n\n<pre><code>df.groupby('category').strings.apply(' '.join).str.split().apply(np.unique)\n\ncategory\ncandy    [beans, chocolate, frog, jelly, lollipops]\npets                        [cat, dog, frog, leash]\nName: strings, dtype: object\n</code></pre>\n\n<hr>\n\n<p><strong><em>over achiever</em></strong><br>\n<code>value_counts</code> because I think it's interesting</p>\n\n<pre><code>df.groupby('category').strings.apply(' '.join).str.split(expand=True) \\\n    .stack().groupby(level=0).apply(pd.value_counts)\n\n category           \ncandy     jelly        1\n          frog         1\n          lollipops    1\n          beans        1\n          chocolate    1\npets      cat          2\n          dog          2\n          leash        1\n          frog         1\ndtype: int64\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1482362647, "post_id": 41273470, "comment_id": 69748605, "body": "Thanks. Your answer with &#39; &#39;.join is quite a bit slicker though. Well done! And yes I&#39;ll check out the other question."}], "tags": [], "owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "is_accepted": false, "score": 3, "last_activity_date": 1482361820, "creation_date": 1482361820, "answer_id": 41273470, "question_id": 41273411, "link": "https://stackoverflow.com/questions/41273411/creating-lists-of-text-from-rows-in-a-dataframe-based-on-column-category/41273470#41273470", "title": "Creating lists of text from rows in a dataframe based on column category", "body": "<p>You can set the index first then split then group on the index and concatenate all the lists with <code>sum</code> and make a dict out of it.</p>\n\n<pre><code>df.set_index('category').strings.str.split().groupby(level='category').sum().to_dict()\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>{'candy': ['chocolate', 'frog', 'jelly', 'beans', 'lollipops'],\n 'pets': ['leash', 'cat', 'dog', 'cat', 'dog', 'frog']}\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 7096907, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/78ade54233f113881ef64c595cbf6c8a?s=128&d=identicon&r=PG&f=1", "display_name": "J Sedai", "link": "https://stackoverflow.com/users/7096907/j-sedai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 41273449, "answer_count": 2, "score": 1, "last_activity_date": 1482362149, "creation_date": 1482361487, "question_id": 41273411, "link": "https://stackoverflow.com/questions/41273411/creating-lists-of-text-from-rows-in-a-dataframe-based-on-column-category", "title": "Creating lists of text from rows in a dataframe based on column category", "body": "<p>I have a dataframe of categories and text strings:</p>\n\n<pre><code>category    strings\n\npets        leash cat dog\npets        cat dog frog\ncandy       chocolate frog\ncandy       jelly beans lollipops\n</code></pre>\n\n<p>I would like 2 lists: </p>\n\n<pre><code>petlist = ['leash', 'cat', 'dog', 'cat', 'dog', 'frog']\ncandylist = ['chocolate', 'frog', 'jelly', 'beans', 'lollipops']\n</code></pre>\n\n<p>The following code makes one list of all of the words from the strings column:</p>\n\n<pre><code>all_words = df['strings'].str.cat(sep=' ').split()\n</code></pre>\n\n<p>How can I split this up into 2 lists based on the category and put the 2 lists in a dictionary?</p>\n\n<p>Here is what I tried:</p>\n\n<pre><code>all_words = {}\nfor cata in df['category']:\n    all_words['wordlist_%s'% cata]=[]\nfor cata in df['category']:\n    df_cata = df.loc[df['category'] == cata]\n    all_words['wordlist_%s'% cata].append(df_cata['strings'].str.cat(sep=' ').split())\n</code></pre>\n\n<p>It has the correct keys but each key gives me the words from the first row of that category over and over. So I've got a dictionary with one list that says leash cat dog leash cat dog and another list that says chocolate frog chocolate frog (so it's clearly starting over in a way that I don't want it to).</p>\n"}, {"tags": ["python", "tensorflow", "neural-network", "deep-learning", "recurrent-neural-network"], "comments": [{"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 2, "creation_date": 1498775337, "post_id": 41273361, "comment_id": 76652429, "body": "I like your code style!  This is a great question for learning how nn&#39;s work too. thanks"}, {"owner": {"reputation": 2212, "user_id": 4040998, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/86b82552169f662b254e494a54bc083f?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/4040998/rahul"}, "edited": false, "score": 0, "creation_date": 1507580774, "post_id": 41273361, "comment_id": 80258173, "body": "The accepted answer is not the preferred way to do it. Please look at @ShaoTang&#39;s answer at the end."}, {"owner": {"reputation": 1453, "user_id": 1861627, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/18452c228ede1b8db735a6c310068947?s=128&d=identicon&r=PG", "display_name": "petrux", "link": "https://stackoverflow.com/users/1861627/petrux"}, "reply_to_user": {"reputation": 2212, "user_id": 4040998, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/86b82552169f662b254e494a54bc083f?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/4040998/rahul"}, "edited": false, "score": 0, "creation_date": 1507732755, "post_id": 41273361, "comment_id": 80329850, "body": "@Rahul thanks for pointing out. Anyway, it looks like ShaoTang is pointing to states, while the question is specifically on outputs. Or am I missing something?"}, {"owner": {"reputation": 1453, "user_id": 1861627, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/18452c228ede1b8db735a6c310068947?s=128&d=identicon&r=PG", "display_name": "petrux", "link": "https://stackoverflow.com/users/1861627/petrux"}, "edited": false, "score": 0, "creation_date": 1507793840, "post_id": 41273361, "comment_id": 80354742, "body": "AFAIR, the <code>state</code> (according to the TF nomenclature) is a tuple of vectors representing the inner state (indeed) of the cell and which is passed through the timesteps, while the question is focusing on the final output of the cell. By the way, the state size is not said to be the same of the output."}, {"owner": {"reputation": 1909, "user_id": 8089695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92107cb1b109e2b8281e9cb76b5e3f16?s=128&d=identicon&r=PG&f=1", "display_name": "MiloMinderbinder", "link": "https://stackoverflow.com/users/8089695/milominderbinder"}, "edited": false, "score": 0, "creation_date": 1519389123, "post_id": 41273361, "comment_id": 84902149, "body": "If only official documentation included such examples to demonstrate the behavior"}, {"owner": {"reputation": 2212, "user_id": 4040998, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/86b82552169f662b254e494a54bc083f?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/4040998/rahul"}, "edited": false, "score": 0, "creation_date": 1522946705, "post_id": 41273361, "comment_id": 86366277, "body": "@pertux I think LSTM has a tuple output for last state, which contains the last state and the output, so you can index for the output"}], "answers": [{"comments": [{"owner": {"reputation": 917, "user_id": 2368148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f791f07a8d25caccbd7a119f88b13cdd?s=128&d=identicon&r=PG", "display_name": "pabaldonedo", "link": "https://stackoverflow.com/users/2368148/pabaldonedo"}, "edited": false, "score": 1, "creation_date": 1482393718, "post_id": 41273737, "comment_id": 69758129, "body": "I would change tf.unpack() with tf.unstacks() as tf.unpack is deprecated: <a href=\"https://www.tensorflow.org/api_docs/python/array_ops/slicing_and_joining#unpack\" rel=\"nofollow noreferrer\">tensorflow.org/api_docs/python/array_ops/&hellip;</a>"}, {"owner": {"reputation": 917, "user_id": 2368148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f791f07a8d25caccbd7a119f88b13cdd?s=128&d=identicon&r=PG", "display_name": "pabaldonedo", "link": "https://stackoverflow.com/users/2368148/pabaldonedo"}, "edited": false, "score": 0, "creation_date": 1482413403, "post_id": 41273737, "comment_id": 69770226, "body": "you could also avoid the for loop using <code>tf.gather</code> as it is commented here <a href=\"http://stackoverflow.com/questions/36088277/how-to-select-rows-from-a-3-d-tensor-in-tensorflow\" title=\"how to select rows from a 3 d tensor in tensorflow\">stackoverflow.com/questions/36088277/&hellip;</a> and it is adapted for this same problem here: <a href=\"http://stackoverflow.com/questions/41267829/retrieving-last-value-of-lstm-sequence-in-tensorflow/41273843#41273843\" title=\"retrieving last value of lstm sequence in tensorflow\">stackoverflow.com/questions/41267829/&hellip;</a>"}, {"owner": {"reputation": 1453, "user_id": 1861627, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/18452c228ede1b8db735a6c310068947?s=128&d=identicon&r=PG", "display_name": "petrux", "link": "https://stackoverflow.com/users/1861627/petrux"}, "reply_to_user": {"reputation": 917, "user_id": 2368148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f791f07a8d25caccbd7a119f88b13cdd?s=128&d=identicon&r=PG", "display_name": "pabaldonedo", "link": "https://stackoverflow.com/users/2368148/pabaldonedo"}, "edited": false, "score": 0, "creation_date": 1485970655, "post_id": 41273737, "comment_id": 71149933, "body": "@pabaldonedo I tried a solution with the <code>tf.gather</code> function but I have a warning saying that <code>Converting sparse IndexedSlices to a dense Tensor of unknown shape. This may consume a large amount of memory.</code> I googled around a found that this can be originated by the <code>tf.gather</code>. Switching back to my solution, solves the problem. Any hint?"}, {"owner": {"reputation": 917, "user_id": 2368148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f791f07a8d25caccbd7a119f88b13cdd?s=128&d=identicon&r=PG", "display_name": "pabaldonedo", "link": "https://stackoverflow.com/users/2368148/pabaldonedo"}, "edited": false, "score": 0, "creation_date": 1486106729, "post_id": 41273737, "comment_id": 71212077, "body": "That is probably because tf.gather does not know in advance the size of the tensor. For example, if the input tensor has shape [None, 10], that None (dimension to be set dynamically when executing the graph) will lead tf.gather to that warning. If you have a fixed batch_size of let&#39;s say 5 and substitute input tensor to [5, 10] I think the warning will disappear."}, {"owner": {"reputation": 1513, "user_id": 6334174, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/22c62af5311ceebbc60b4484821211a9?s=128&d=identicon&r=PG&f=1", "display_name": "Zhao", "link": "https://stackoverflow.com/users/6334174/zhao"}, "edited": false, "score": 0, "creation_date": 1487415315, "post_id": 41273737, "comment_id": 71782265, "body": "Maybe the last dimension of the <code>size</code> argument of <code>tf.slice</code> should be <code>hidden</code>, i.e., 4?"}], "tags": [], "owner": {"reputation": 1453, "user_id": 1861627, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/18452c228ede1b8db735a6c310068947?s=128&d=identicon&r=PG", "display_name": "petrux", "link": "https://stackoverflow.com/users/1861627/petrux"}, "is_accepted": false, "score": 2, "last_activity_date": 1482421928, "last_edit_date": 1482421928, "creation_date": 1482363859, "answer_id": 41273737, "question_id": 41273361, "link": "https://stackoverflow.com/questions/41273361/get-the-last-output-of-a-dynamic-rnn-in-tensorflow/41273737#41273737", "title": "Get the last output of a dynamic_rnn in TensorFlow", "body": "<p>Actually, the solution was not that hard. I implemented the following code:</p>\n\n<pre><code>slices = []\nfor index, l in enumerate(tf.unstack(lengths)):\n    slice = tf.slice(rnn_out, begin=[index, l - 1, 0], size=[1, 1, 3])\n    slices.append(slice)\nlast = tf.concat(0, slices)\n</code></pre>\n\n<p>So, the full snippet would be the following:</p>\n\n<pre><code>import numpy as np\nimport tensorflow as tf\n\nbatch = 2\ndim = 3\nhidden = 4\n\nlengths = tf.placeholder(dtype=tf.int32, shape=[batch])\ninputs = tf.placeholder(dtype=tf.float32, shape=[batch, None, dim])\ncell = tf.nn.rnn_cell.GRUCell(hidden)\ncell_state = cell.zero_state(batch, tf.float32)\noutput, _ = tf.nn.dynamic_rnn(cell, inputs, lengths, initial_state=cell_state)\n\ninputs_ = np.asarray([[[0, 0, 0], [1, 1, 1], [2, 2, 2], [3, 3, 3]],\n                    [[6, 6, 6], [7, 7, 7], [8, 8, 8], [9, 9, 9]]],\n                    dtype=np.int32)\nlengths_ = np.asarray([3, 1], dtype=np.int32)\n\nslices = []\nfor index, l in enumerate(tf.unstack(lengths)):\n    slice = tf.slice(output, begin=[index, l - 1, 0], size=[1, 1, 3])\n    slices.append(slice)\nlast = tf.concat(0, slices)\n\nwith tf.Session() as sess:\n    sess.run(tf.global_variables_initializer())\n    outputs = sess.run([output, last], {inputs: inputs_, lengths: lengths_})\n    print 'RNN output:'\n    print(outputs[0])\n    print\n    print 'last relevant output:'\n    print(outputs[1])\n</code></pre>\n\n<p>And the output:</p>\n\n<pre><code>RNN output:\n[[[ 0.          0.          0.          0.        ]\n [-0.06667092 -0.09284072  0.01098599 -0.03676109]\n [-0.09101103 -0.19828682  0.03546784 -0.08721405]\n [ 0.          0.          0.          0.        ]]\n\n[[-0.00025157 -0.05704876  0.05527233 -0.03741353]\n [ 0.          0.          0.          0.        ]\n [ 0.          0.          0.          0.        ]\n [ 0.          0.          0.          0.        ]]]\n\nlast relevant output:\n[[[-0.09101103 -0.19828682  0.03546784]]\n\n [[-0.00025157 -0.05704876  0.05527233]]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1453, "user_id": 1861627, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/18452c228ede1b8db735a6c310068947?s=128&d=identicon&r=PG", "display_name": "petrux", "link": "https://stackoverflow.com/users/1861627/petrux"}, "edited": false, "score": 0, "creation_date": 1491841452, "post_id": 43298689, "comment_id": 73720967, "body": "Great! I tried to edit the answer and add all the code so that it was self-contained, but I had a weird message saying that <code>the edit queue is full</code>. Anyway, thanks for the answer!"}], "tags": [], "owner": {"reputation": 15126, "user_id": 1953800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4173076e5187c82e74379de9aeb00aa4?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1953800/alex"}, "is_accepted": true, "score": 14, "last_activity_date": 1491675882, "last_edit_date": 1491675882, "creation_date": 1491675311, "answer_id": 43298689, "question_id": 41273361, "link": "https://stackoverflow.com/questions/41273361/get-the-last-output-of-a-dynamic-rnn-in-tensorflow/43298689#43298689", "title": "Get the last output of a dynamic_rnn in TensorFlow", "body": "<p>This is what <a href=\"https://www.tensorflow.org/api_docs/python/tf/gather_nd\" rel=\"noreferrer\">gather_nd</a> is for!</p>\n\n<pre><code>def extract_axis_1(data, ind):\n    \"\"\"\n    Get specified elements along the first axis of tensor.\n    :param data: Tensorflow tensor that will be subsetted.\n    :param ind: Indices to take (one for each element along axis 0 of data).\n    :return: Subsetted tensor.\n    \"\"\"\n\n    batch_range = tf.range(tf.shape(data)[0])\n    indices = tf.stack([batch_range, ind], axis=1)\n    res = tf.gather_nd(data, indices)\n\n    return res\n</code></pre>\n\n<p>In your case:</p>\n\n<pre><code>output = extract_axis_1(output, lengths - 1)\n</code></pre>\n\n<p>Now <code>output</code> is a tensor of dimension <code>[batch_size, num_cells]</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1909, "user_id": 8089695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92107cb1b109e2b8281e9cb76b5e3f16?s=128&d=identicon&r=PG&f=1", "display_name": "MiloMinderbinder", "link": "https://stackoverflow.com/users/8089695/milominderbinder"}, "edited": false, "score": 3, "creation_date": 1519384056, "post_id": 44834855, "comment_id": 84899185, "body": "god i too get annoyed to no end by tensorflow documentation"}, {"owner": {"reputation": 1909, "user_id": 8089695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92107cb1b109e2b8281e9cb76b5e3f16?s=128&d=identicon&r=PG&f=1", "display_name": "MiloMinderbinder", "link": "https://stackoverflow.com/users/8089695/milominderbinder"}, "edited": false, "score": 1, "creation_date": 1519389443, "post_id": 44834855, "comment_id": 84902346, "body": "If you are using a dropout it will be applied to FIRST OUTPUT but not the SECOND OUTPUT  of the dynamic_rnn return. please see <a href=\"https://groups.google.com/a/tensorflow.org/forum/#!topic/discuss/EhZ6uWxpFzc\" rel=\"nofollow noreferrer\">here</a>"}], "tags": [], "owner": {"reputation": 113, "user_id": 8139253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fc760004a145770b99e5067a8a0860?s=128&d=identicon&r=PG", "display_name": "Shao Tang", "link": "https://stackoverflow.com/users/8139253/shao-tang"}, "is_accepted": false, "score": 9, "last_activity_date": 1498769744, "creation_date": 1498769744, "answer_id": 44834855, "question_id": 41273361, "link": "https://stackoverflow.com/questions/41273361/get-the-last-output-of-a-dynamic-rnn-in-tensorflow/44834855#44834855", "title": "Get the last output of a dynamic_rnn in TensorFlow", "body": "<p>From the following two sources, </p>\n\n<p><a href=\"http://www.wildml.com/2016/08/rnns-in-tensorflow-a-practical-guide-and-undocumented-features/\" rel=\"noreferrer\">http://www.wildml.com/2016/08/rnns-in-tensorflow-a-practical-guide-and-undocumented-features/</a></p>\n\n<pre><code>outputs, last_states = tf.nn.dynamic_rnn(\ncell=cell,\ndtype=tf.float64,\nsequence_length=X_lengths,\ninputs=X)\n</code></pre>\n\n<p>Or <a href=\"https://github.com/ageron/handson-ml/blob/master/14_recurrent_neural_networks.ipynb\" rel=\"noreferrer\">https://github.com/ageron/handson-ml/blob/master/14_recurrent_neural_networks.ipynb</a>,</p>\n\n<p>It is clear the last_states can be directly extracted from the SECOND output of the dynamic_rnn call. It will give you the last_states across <strong>all</strong> layers (in LSTM it is compsed from LSTMStateTuple) , while the outputs contains all the states in the <strong>last</strong> layer.</p>\n"}, {"tags": [], "owner": {"reputation": 416, "user_id": 5395078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fehLP.jpg?s=128&g=1", "display_name": "Sushant Kafle", "link": "https://stackoverflow.com/users/5395078/sushant-kafle"}, "is_accepted": false, "score": 5, "last_activity_date": 1513713636, "creation_date": 1513713636, "answer_id": 47894359, "question_id": 41273361, "link": "https://stackoverflow.com/questions/41273361/get-the-last-output-of-a-dynamic-rnn-in-tensorflow/47894359#47894359", "title": "Get the last output of a dynamic_rnn in TensorFlow", "body": "<p>Okay \u2014 so, looks like there actually <b>is</b> an easier solution. As @Shao Tang and @Rahul mentioned, the preferred way to do this would be by accessing the final cell state. Here\u2019s why:</p>\n\n<ul>\n<li>If you look at the GRUCell source code (below), you\u2019ll see that the \u201cstate\u201d that the cell maintains is actually the hidden weights themselves. So, when the <code>tf.nn.dynamic_rnn</code> returns the final state, it is actually returning the final hidden weights that you are interested in. To prove this, I just tweaked your setup and got the results:</li>\n</ul>\n\n<p>GRUCell Call (rnn_cell_impl.py):</p>\n\n<pre><code>def call(self, inputs, state):\n\"\"\"Gated recurrent unit (GRU) with nunits cells.\"\"\"\nif self._gate_linear is None:\n      bias_ones = self._bias_initializer\nif self._bias_initializer is None:\n        bias_ones = init_ops.constant_initializer(1.0, dtype=inputs.dtype)\nwith vs.variable_scope(\"gates\"):  # Reset gate and update gate.\nself._gate_linear = _Linear(\n            [inputs, state],\n2 * self._num_units,\nTrue,\nbias_initializer=bias_ones,\nkernel_initializer=self._kernel_initializer)\n    value = math_ops.sigmoid(self._gate_linear([inputs, state]))\n    r, u = array_ops.split(value=value, num_or_size_splits=2, axis=1)\n    r_state = r * state\nif self._candidate_linear is None:\nwith vs.variable_scope(\"candidate\"):\nself._candidate_linear = _Linear(\n            [inputs, r_state],\nself._num_units,\nTrue,\nbias_initializer=self._bias_initializer,\nkernel_initializer=self._kernel_initializer)\n    c = self._activation(self._candidate_linear([inputs, r_state]))\n    new_h = u * state + (1 - u) * c\nreturn new_h, new_h\n</code></pre>\n\n<p>Solution:</p>\n\n<pre><code>import numpy as np\nimport tensorflow as tf\n\nbatch = 2\ndim = 3\nhidden = 4\n\nlengths = tf.placeholder(dtype=tf.int32, shape=[batch])\ninputs = tf.placeholder(dtype=tf.float32, shape=[batch, None, dim])\ncell = tf.nn.rnn_cell.GRUCell(hidden)\ncell_state = cell.zero_state(batch, tf.float32)\noutput, state = tf.nn.dynamic_rnn(cell, inputs, lengths, initial_state=cell_state)\n\ninputs_ = np.asarray([[[0, 0, 0], [1, 1, 1], [2, 2, 2], [3, 3, 3]],\n                    [[6, 6, 6], [7, 7, 7], [8, 8, 8], [9, 9, 9]]],\n                    dtype=np.int32)\nlengths_ = np.asarray([3, 1], dtype=np.int32)\n\nwith tf.Session() as sess:\n    sess.run(tf.global_variables_initializer())\n    output_, state_ = sess.run([output, state], {inputs: inputs_, lengths: lengths_})\n    print (output_)\n    print (state_)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[[[ 0.          0.          0.          0.        ]\n  [-0.24305521 -0.15512943  0.06614969  0.16873555]\n  [-0.62767833 -0.30741733  0.14819752  0.44313088]\n  [ 0.          0.          0.          0.        ]]\n\n [[-0.99152333 -0.1006391   0.28767768  0.76360202]\n  [ 0.          0.          0.          0.        ]\n  [ 0.          0.          0.          0.        ]\n  [ 0.          0.          0.          0.        ]]]\n[[-0.62767833 -0.30741733  0.14819752  0.44313088]\n [-0.99152333 -0.1006391   0.28767768  0.76360202]]\n</code></pre>\n\n<ul>\n<li><p>For other readers who are working with the LSTMCell (another popular option), things work a little differently. The LSTMCell maintains the state in a different way - cell state is either a tuple or a concatenated version of the actual cell state and the hidden state. So, to access the final hidden weights, you could set (<code>is_state_tuple</code> to <code>True</code>) during cell-initialization, and the final state will be a tuple : (final cell state, final hidden weights). So, in this case,</p>\n\n<p>_, (_, h) = tf.nn.dynamic_rnn(cell, inputs, lengths, initial_state=cell_state)</p></li>\n</ul>\n\n<p>will give you the final weights.</p>\n\n<p>References: \n<a href=\"https://stackoverflow.com/questions/41789133/c-state-and-m-state-in-tensorflow-lstm\">c_state and m_state in Tensorflow LSTM</a>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/438604fc885208ee05f9eef2d0f2c630e1360a83/tensorflow/python/ops/rnn_cell_impl.py#L308\" rel=\"noreferrer\">https://github.com/tensorflow/tensorflow/blob/438604fc885208ee05f9eef2d0f2c630e1360a83/tensorflow/python/ops/rnn_cell_impl.py#L308</a>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/438604fc885208ee05f9eef2d0f2c630e1360a83/tensorflow/python/ops/rnn_cell_impl.py#L415\" rel=\"noreferrer\">https://github.com/tensorflow/tensorflow/blob/438604fc885208ee05f9eef2d0f2c630e1360a83/tensorflow/python/ops/rnn_cell_impl.py#L415</a></p>\n"}], "owner": {"reputation": 1453, "user_id": 1861627, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/18452c228ede1b8db735a6c310068947?s=128&d=identicon&r=PG", "display_name": "petrux", "link": "https://stackoverflow.com/users/1861627/petrux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7820, "favorite_count": 9, "accepted_answer_id": 43298689, "answer_count": 4, "score": 16, "last_activity_date": 1513713636, "creation_date": 1482361221, "last_edit_date": 1482399397, "question_id": 41273361, "link": "https://stackoverflow.com/questions/41273361/get-the-last-output-of-a-dynamic-rnn-in-tensorflow", "title": "Get the last output of a dynamic_rnn in TensorFlow", "body": "<p>I have a 3-D tensor of shape <code>[batch, None, dim]</code> where the second dimension, i.e. the timesteps, is unknown. I use <code>dynamic_rnn</code> to process such input, like in the following snippet:</p>\n\n<pre><code>import numpy as np\nimport tensorflow as tf\n\nbatch = 2\ndim = 3\nhidden = 4\n\nlengths = tf.placeholder(dtype=tf.int32, shape=[batch])\ninputs = tf.placeholder(dtype=tf.float32, shape=[batch, None, dim])\ncell = tf.nn.rnn_cell.GRUCell(hidden)\ncell_state = cell.zero_state(batch, tf.float32)\noutput, _ = tf.nn.dynamic_rnn(cell, inputs, lengths, initial_state=cell_state)\n</code></pre>\n\n<p>Actually, running this snipped with some actual numbers, I have some reasonable results:</p>\n\n<pre><code>inputs_ = np.asarray([[[0, 0, 0], [1, 1, 1], [2, 2, 2], [3, 3, 3]],\n                    [[6, 6, 6], [7, 7, 7], [8, 8, 8], [9, 9, 9]]],\n                    dtype=np.int32)\nlengths_ = np.asarray([3, 1], dtype=np.int32)\n\nwith tf.Session() as sess:\n    sess.run(tf.global_variables_initializer())\n    output_ = sess.run(output, {inputs: inputs_, lengths: lengths_})\n    print(output_)\n</code></pre>\n\n<p>And the output is:</p>\n\n<pre><code>[[[ 0.          0.          0.          0.        ]\n  [ 0.02188676 -0.01294564  0.05340237 -0.47148666]\n  [ 0.0343586  -0.02243731  0.0870839  -0.89869428]\n  [ 0.          0.          0.          0.        ]]\n\n [[ 0.00284752 -0.00315077  0.00108094 -0.99883419]\n  [ 0.          0.          0.          0.        ]\n  [ 0.          0.          0.          0.        ]\n  [ 0.          0.          0.          0.        ]]]\n</code></pre>\n\n<p>Is there a way to get a 3-D tensor of shape <code>[batch, 1, hidden]</code> with the <em>last relevant output</em> of the dynamic RNN? Thanks!</p>\n"}, {"tags": ["python", "sqlite", "sqlalchemy", "scrapy"], "answers": [{"comments": [{"owner": {"reputation": 26209, "user_id": 1592380, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1b375c795476432e64d4433a651d2804?s=128&d=identicon&r=PG", "display_name": "user1592380", "link": "https://stackoverflow.com/users/1592380/user1592380"}, "edited": false, "score": 0, "creation_date": 1482368393, "post_id": 41273366, "comment_id": 69750060, "body": "Thanks for looking at this. tried it, no errors. Also added   print(db.tables) to the code, and the correct tables are printed out in a list as expected, so it appears the connection is OK."}], "tags": [], "owner": {"reputation": 3740, "user_id": 3205932, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/569b5a439d57630f9ea1db63cdd2e75e?s=128&d=identicon&r=PG&f=1", "display_name": "FallAndLearn", "link": "https://stackoverflow.com/users/3205932/fallandlearn"}, "is_accepted": false, "score": 1, "last_activity_date": 1482361229, "creation_date": 1482361229, "answer_id": 41273366, "question_id": 41273314, "link": "https://stackoverflow.com/questions/41273314/database-insertion-fails-without-error-with-scrapy/41273366#41273366", "title": "Database insertion fails without error with scrapy", "body": "<p>Maybe some problems with the Db connection. Put your this snippet into a try except to check for the problem.</p>\n\n<pre><code>try:\n   db_path = \"sqlite:///\"+settings.SETTINGS_PATH+\"\\\\data.db\"\n   db = dataset.connect(db_path)\n   self.table = db[table_name].table\nexcept Exception:\n   traceback.exec_print()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 26209, "user_id": 1592380, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1b375c795476432e64d4433a651d2804?s=128&d=identicon&r=PG", "display_name": "user1592380", "link": "https://stackoverflow.com/users/1592380/user1592380"}, "edited": false, "score": 0, "creation_date": 1482423443, "post_id": 41285744, "comment_id": 69777022, "body": "Thank you, I removed  the @classmethod from my code, to simplify it. sorry. Thank you. BTW what db gui are you using?"}, {"owner": {"reputation": 748, "user_id": 6946615, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7Q3axndztLY/AAAAAAAAAAI/AAAAAAAAAF0/3qwzt2Vx82o/photo.jpg?sz=128", "display_name": "elacuesta", "link": "https://stackoverflow.com/users/6946615/elacuesta"}, "reply_to_user": {"reputation": 26209, "user_id": 1592380, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1b375c795476432e64d4433a651d2804?s=128&d=identicon&r=PG", "display_name": "user1592380", "link": "https://stackoverflow.com/users/1592380/user1592380"}, "edited": false, "score": 0, "creation_date": 1482425694, "post_id": 41285744, "comment_id": 69778551, "body": "Actually, the @classmethod decorator is necessary because the from_crawler method is invoked as a class method :-) As for the GUI, it&#39;s <a href=\"http://sqlitebrowser.org\" rel=\"nofollow noreferrer\">sqlitebrowser.org</a>"}, {"owner": {"reputation": 26209, "user_id": 1592380, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1b375c795476432e64d4433a651d2804?s=128&d=identicon&r=PG", "display_name": "user1592380", "link": "https://stackoverflow.com/users/1592380/user1592380"}, "edited": false, "score": 0, "creation_date": 1482425971, "post_id": 41285744, "comment_id": 69778719, "body": "Thank you. Can I ask 1 more question: is it it possible to set the order of the fields given that the dict passed to the insert command is unordered?"}], "tags": [], "owner": {"reputation": 748, "user_id": 6946615, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7Q3axndztLY/AAAAAAAAAAI/AAAAAAAAAF0/3qwzt2Vx82o/photo.jpg?sz=128", "display_name": "elacuesta", "link": "https://stackoverflow.com/users/6946615/elacuesta"}, "is_accepted": true, "score": 2, "last_activity_date": 1482418683, "last_edit_date": 1482418683, "creation_date": 1482417999, "answer_id": 41285744, "question_id": 41273314, "link": "https://stackoverflow.com/questions/41273314/database-insertion-fails-without-error-with-scrapy/41285744#41285744", "title": "Database insertion fails without error with scrapy", "body": "<p>The code you posted is not working as is for me:</p>\n\n<pre><code>TypeError: __init__() takes exactly 2 arguments (1 given)\n</code></pre>\n\n<p>That's because the <code>__init__</code> method expects a <code>table_name</code> argument which is not being passed. You need to implement the <code>from_crawler</code> class method in the pipeline object, something like:</p>\n\n<pre><code>@classmethod\ndef from_crawler(cls, crawler):\n    return cls(table_name=crawler.spider.name)\n</code></pre>\n\n<p>That would create a pipeline object using the spider name as table name, you can of course use any name you want.</p>\n\n<p>Also, the line <code>self.table = db[table_name].table</code> should be replaced by <code>self.table = db[table_name]</code> (<a href=\"https://dataset.readthedocs.io/en/latest/quickstart.html#storing-data\" rel=\"nofollow noreferrer\">https://dataset.readthedocs.io/en/latest/quickstart.html#storing-data</a>)</p>\n\n<p>After that, the data is stored:\n<a href=\"https://i.stack.imgur.com/9jxgB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9jxgB.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 26209, "user_id": 1592380, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1b375c795476432e64d4433a651d2804?s=128&d=identicon&r=PG", "display_name": "user1592380", "link": "https://stackoverflow.com/users/1592380/user1592380"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 0, "accepted_answer_id": 41285744, "answer_count": 2, "score": 1, "last_activity_date": 1482418683, "creation_date": 1482360981, "last_edit_date": 1495540423, "question_id": 41273314, "link": "https://stackoverflow.com/questions/41273314/database-insertion-fails-without-error-with-scrapy", "title": "Database insertion fails without error with scrapy", "body": "<p><a href=\"https://i.stack.imgur.com/aAOZb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aAOZb.png\" alt=\"enter image description here\"></a></p>\n\n<p>I'm working with scrapy and dataset (<a href=\"https://dataset.readthedocs.io/en/latest/quickstart.html#storing-data\" rel=\"nofollow noreferrer\">https://dataset.readthedocs.io/en/latest/quickstart.html#storing-data</a>) which is a layer on top of sqlalchemy , trying to load data into a sqllite table as a follow up to <a href=\"https://stackoverflow.com/questions/41106509/sqlalchemy-dynamically-create-table-from-scrapy-item\">Sqlalchemy : Dynamically create table from Scrapy item</a>.</p>\n\n<p>using the dataset package I have:</p>\n\n<pre><code>class DynamicSQLlitePipeline(object):\n\n    def __init__(self,table_name):\n\n        db_path = \"sqlite:///\"+settings.SETTINGS_PATH+\"\\\\data.db\"\n        db = dataset.connect(db_path)\n        self.table = db[table_name].table\n\n\n    def process_item(self, item, spider):\n\n        try:\n            print('TEST DATASET..')\n            self.table.insert(dict(name='John Doe', age=46, country='China'))\n            print('INSERTED')\n        except IntegrityError:\n                print('THIS IS A DUP')\n        return item\n</code></pre>\n\n<p>after running my spider I see the print statements printed out in the try except block, with no errors, but after completion , I look in the table and see the screenshot. No data is in the table. What am I doing wrong?</p>\n"}, {"tags": ["python", "ajax", "django", "redirect", "django-views"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 3972037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea134d70a85f58a3dedf68994e5068bb?s=128&d=identicon&r=PG&f=1", "display_name": "Bryce Morrow", "link": "https://stackoverflow.com/users/3972037/bryce-morrow"}, "edited": false, "score": 0, "creation_date": 1482363431, "post_id": 41273337, "comment_id": 69748824, "body": "How should I handle the redirection in the second part of the code you wrote above?"}, {"owner": {"reputation": 12105, "user_id": 6043170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iFy-IHfVniw/AAAAAAAAAAI/AAAAAAAAAFM/f_Xao2r127I/photo.jpg?sz=128", "display_name": "2ps", "link": "https://stackoverflow.com/users/6043170/2ps"}, "edited": false, "score": 0, "creation_date": 1482364503, "post_id": 41273337, "comment_id": 69749072, "body": "Return a JsonResponse in your view and return the next URL that you want to redirect to.  In your JavaScript, use window.location.href to do the redirection on the client."}, {"owner": {"reputation": 15599, "user_id": 4575071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9bceb35fc57e732ca44911b801b12e?s=128&d=identicon&r=PG&f=1", "display_name": "ettanany", "link": "https://stackoverflow.com/users/4575071/ettanany"}, "reply_to_user": {"reputation": 12105, "user_id": 6043170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iFy-IHfVniw/AAAAAAAAAAI/AAAAAAAAAFM/f_Xao2r127I/photo.jpg?sz=128", "display_name": "2ps", "link": "https://stackoverflow.com/users/6043170/2ps"}, "edited": false, "score": 0, "creation_date": 1482364741, "post_id": 41273337, "comment_id": 69749132, "body": "As @2ps mentioned, you can use <code>window.location.href = your_url</code>."}, {"owner": {"reputation": 405, "user_id": 8832815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6934387e66d7c0c6e5359ad4c2a27f30?s=128&d=identicon&r=PG&f=1", "display_name": "HamzDiou", "link": "https://stackoverflow.com/users/8832815/hamzdiou"}, "edited": false, "score": 0, "creation_date": 1542792674, "post_id": 41273337, "comment_id": 93692767, "body": "@aettanany : thanks for your code, well working. What about adding a context ? If I want to show something new in the template (refreshing the initial page). I tried passing a context and request through HttpRedirect but it&#39;s not Json Serializable. Any Idea ?"}], "tags": [], "owner": {"reputation": 15599, "user_id": 4575071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9bceb35fc57e732ca44911b801b12e?s=128&d=identicon&r=PG&f=1", "display_name": "ettanany", "link": "https://stackoverflow.com/users/4575071/ettanany"}, "is_accepted": true, "score": 13, "last_activity_date": 1482365483, "last_edit_date": 1482365483, "creation_date": 1482361078, "answer_id": 41273337, "question_id": 41273295, "link": "https://stackoverflow.com/questions/41273295/django-view-not-rendering-after-ajax-redirect/41273337#41273337", "title": "Django view not rendering after Ajax redirect", "body": "<p>You can not use Django redirect in your case. When you send an ajax request you usually expect a json response, and based on that you can redirect the user via your JavaScript code.</p>\n\n<pre><code>$.ajax({\n  // You send your request here\n}).done(function(data) {\n  // You can handle your redirection here\n});\n</code></pre>\n\n<hr>\n\n<p>Here is how you can handle a redirect with your setup, you pass back a JsonResponse from django with the next page that you want to go to:</p>\n\n<pre><code>from django.http import JsonResponse\n\ndef ajax_filter(request):\n    if request.is_ajax():\n        gender_filter = request.GET.get('gender_filter') #filter type\n        if gender_filter is not None:\n            return JsonResponse({\n                'success': True,\n                'url': reverse('filtered_index', args=[gender_filter]),\n            })\n    return JsonResponse({ 'success': False })\n</code></pre>\n\n<p>In JS, you use done (or success) function to grab the URL from the passed back <code>JsonResponse</code> and redirect to that URL using <code>window.location.href</code>:</p>\n\n<pre><code>$.ajax({\n  // You send your request here\n}).done(function (data) {\n    if (data.success) {\n        window.location.href = data.url;\n    }    \n});\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 3972037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea134d70a85f58a3dedf68994e5068bb?s=128&d=identicon&r=PG&f=1", "display_name": "Bryce Morrow", "link": "https://stackoverflow.com/users/3972037/bryce-morrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3654, "favorite_count": 0, "accepted_answer_id": 41273337, "answer_count": 1, "score": 4, "last_activity_date": 1482365483, "creation_date": 1482360874, "question_id": 41273295, "link": "https://stackoverflow.com/questions/41273295/django-view-not-rendering-after-ajax-redirect", "title": "Django view not rendering after Ajax redirect", "body": "<p>The main page of my website has multiple buttons at the top. Whenever one of these buttons is pushed, a get request is sent to a django view, which is redirected and a queryset of django models is filtered and eventually displayed on the web page. I know that my ajax works because the terminal says the request is redirected properly. The function it redirects to also seems to be working, as it is quite simple and has not thrown any errors. However, my view remains the same and I'm not sure why. </p>\n\n<p>urls.py</p>\n\n<pre><code>url(r'ajax_filter/', views.ajax_filter, name='ajax_filter'),\nurl(r'filter=(\\w+)/$', views.filtered_index, name='filtered_index'),\n</code></pre>\n\n<p>views.py</p>\n\n<pre><code>def filtered_index(request, filter):\n    clothes = Clothes_Item.objects.filter(gender=filter)\n    if request.user.is_authenticated():\n        favorite_clothes_ids = get_favorite_clothes_ids(request)\n        return render(request, 'test.html', {'clothes': clothes, 'favorite_clothes_ids': favorite_clothes_ids})\n    else:\n        return render(request, 'test.html', {'clothes': clothes, })\n\ndef ajax_filter(request):\n    if request.is_ajax():\n        gender_filter = request.GET.get('gender_filter') #filter type\n        if gender_filter is not None:\n            return HttpResponseRedirect(reverse('filtered_index', args=[gender_filter]))\n    return HttpResponse('')\n</code></pre>\n"}, {"tags": ["python", "mysql", "python-3.x", "sqlalchemy", "flask-sqlalchemy"], "answers": [{"comments": [{"owner": {"reputation": 1600, "user_id": 4562156, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WuCmq.jpg?s=128&g=1", "display_name": "Sean Pianka", "link": "https://stackoverflow.com/users/4562156/sean-pianka"}, "edited": false, "score": 0, "creation_date": 1482361504, "post_id": 41273375, "comment_id": 69748269, "body": "That makes perfect sense when it&#39;s explained like that -- the <code>__init__</code> for <code>sqlalchemy.dialects.mysql.INTEGER</code> will only recognize specific keyword arguments passed and ignore any that don&#39;t match its criteria. Since I misspelled one of the parameter names, it was ignored and ended up incorrectly propagating to any further calls to different <code>__init__</code>s. Thank you for quick response, much appreciated!"}, {"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "reply_to_user": {"reputation": 1600, "user_id": 4562156, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WuCmq.jpg?s=128&g=1", "display_name": "Sean Pianka", "link": "https://stackoverflow.com/users/4562156/sean-pianka"}, "edited": false, "score": 1, "creation_date": 1482361657, "post_id": 41273375, "comment_id": 69748317, "body": "exactly @SeanPianka. I&#39;m not familiar with the inheritance tree of the specific class but somewhere across those <code>__init__</code>s that get called something got passed to <code>object</code> that shouldn&#39;t of had."}], "tags": [], "owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "is_accepted": true, "score": 1, "last_activity_date": 1482361522, "last_edit_date": 1482361522, "creation_date": 1482361288, "answer_id": 41273375, "question_id": 41273284, "link": "https://stackoverflow.com/questions/41273284/integer-from-sqlalchemy-dialects-mysql-takes-no-parameters-in-its-init-metho/41273375#41273375", "title": "INTEGER from sqlalchemy.dialects.mysql takes no parameters in its __init__ method?", "body": "<p>In general you should be vigilant with the names of the attributes passed when you see an error like this.</p>\n\n<p>What the error essentially says is <code>object.__init__</code> got an argument it wasn't expecting. This happens when you pass an argument to a <code>**kwargs</code> defined <code>__init__</code> that isn't processed and get sent up to <code>object.__init__</code> during a <code>super</code> call (for example). </p>\n\n<p>Take the following snippet to reproduce a similar scenario:</p>\n\n<pre><code>class ExampleINTEGER:\n    def __init__(self, **kwargs):\n        # if unsigned is passed, grab it\n        self.unsigned = kwargs.pop('unsigned', None)\n        # yada yada for the rest of the expected args\n        # if it isn't found, it gets forwarded :/\n        super().__init__(**kwargs)\n\n&gt;&gt;&gt; ExampleINTEGER(unsigned=True)\n&lt;__main__.ExampleINTEGER at 0x7f41a048f978&gt;\n&gt;&gt;&gt; ExampleINTEGER(usigned=True)\nTypeErrorTraceback (most recent call last)\n&lt;ipython-input-15-4b996bd42b90&gt; in &lt;module&gt;()\n----&gt; 1 ExampleINTEGER(usigned=True)\n\n&lt;ipython-input-13-6e67a8d8cdde&gt; in __init__(self, **kwargs)\n      4         self.unsigned = kwargs.pop('unsigned', None)\n      5         # if it isn't found, it gets forwarded :/\n----&gt; 6         super().__init__(**kwargs)\n\nTypeError: object.__init__() takes no parameters\n</code></pre>\n\n<p>In your case, (as in the mock example I created) you misspelled <code>unsigned</code> with <code>usigned</code> :-)</p>\n"}], "owner": {"reputation": 1600, "user_id": 4562156, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WuCmq.jpg?s=128&g=1", "display_name": "Sean Pianka", "link": "https://stackoverflow.com/users/4562156/sean-pianka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 0, "accepted_answer_id": 41273375, "answer_count": 1, "score": 0, "last_activity_date": 1482361522, "creation_date": 1482360825, "question_id": 41273284, "link": "https://stackoverflow.com/questions/41273284/integer-from-sqlalchemy-dialects-mysql-takes-no-parameters-in-its-init-metho", "title": "INTEGER from sqlalchemy.dialects.mysql takes no parameters in its __init__ method?", "body": "<p>I am attempting to create the models for my database and plan to use MySQL as the database. I want to create various attributes of the models unsigned MySQL <code>INTEGER</code>s and found articles which recommended importing the types from  <code>sqlalchemy.dialects.mysql</code>, such as <code>INTEGER</code>, <code>BOOLEAN</code>, <code>VARCHAR</code> in order to specify MySQL specific constraints.</p>\n\n<p>Here's my attempt:</p>\n\n<pre><code>import datetime\n\nimport sqlalchemy\nfrom sqlalchemy.dialects.mysql import INTEGER, BOOLEAN, VARCHAR\n\nfrom app_name import app, db\n\nclass User(db.Model):\n    __tablename__ = 'User'\n    id = db.Column(sqlalchemy.dialects.mysql.INTEGER(usigned=True), primary_key=True, autoincrement=True, nullable=False)\n    realname = db.Column(VARCHAR(256), nullable=False)\n    username = db.Column(VARCHAR(256), nullable=False)\n    joined = db.Column(db.TIMESTAMP, default=datetime.datetime.now)\n    email = db.Column(VARCHAR(255), nullable=False)\n</code></pre>\n\n<p>However, both variations of the line defining the <code>id</code> attribute, either:\n<code>db.Column(sqlalchemy.dialects.mysql.INTEGER(usigned=True), primary_key=True, autoincrement=True, nullable=False)</code></p>\n\n<p>or </p>\n\n<p><code>db.Column(INTEGER(usigned=True), primary_key=True, autoincrement=True, nullable=False)</code></p>\n\n<p>fail with some variation of the following errors/traceback:</p>\n\n<pre><code>  File \"/Users/Username/Development/App_Name/app_name/models/__init__.py\", line 8, in &lt;module&gt;\n    class User(db.Model):\n  File \"/Users/Username/Development/App_Name/app_name/models/__init__.py\", line 10, in User\n    id = db.Column(sqlalchemy.dialects.mysql.INTEGER(usigned=True), primary_key=True, autoincrement=True, nullable=False)\n  File \"/Users/Username/Development/.virtualenvs/app_name/lib/python3.5/site-packages/sqlalchemy/dialects/mysql/types.py\", line 254, in __init__\n    super(INTEGER, self).__init__(display_width=display_width, **kw)\n  File \"/Users/Username/Development/.virtualenvs/app_name/lib/python3.5/site-packages/sqlalchemy/dialects/mysql/types.py\", line 54, in __init__\n    super(_IntegerType, self).__init__(**kw)\n  File \"/Users/Username/Development/.virtualenvs/app_name/lib/python3.5/site-packages/sqlalchemy/dialects/mysql/types.py\", line 24, in __init__\n    super(_NumericType, self).__init__(**kw)\nTypeError: object.__init__() takes no parameters\n</code></pre>\n\n<p>Any insight into why my attempts have failed?</p>\n"}, {"tags": ["python", "python-3.x", "filter", "list-comprehension"], "comments": [{"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "edited": false, "score": 0, "creation_date": 1482360991, "post_id": 41273234, "comment_id": 69748056, "body": "what&#39;s your python version?"}, {"owner": {"reputation": 1133, "user_id": 4136445, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/92OMH.jpg?s=128&g=1", "display_name": "MrJalapeno", "link": "https://stackoverflow.com/users/4136445/mrjalapeno"}, "reply_to_user": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "edited": false, "score": 0, "creation_date": 1482361153, "post_id": 41273234, "comment_id": 69748119, "body": "It&#39;s Python 3.5.2"}], "answers": [{"comments": [{"owner": {"reputation": 1133, "user_id": 4136445, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/92OMH.jpg?s=128&g=1", "display_name": "MrJalapeno", "link": "https://stackoverflow.com/users/4136445/mrjalapeno"}, "edited": false, "score": 0, "creation_date": 1482364242, "post_id": 41273382, "comment_id": 69749030, "body": "I like the readability of this one (even though I don&#39;t fully understand product), but it averaged on around 1.66 seconds versus the 0.034 of the other solution."}], "tags": [], "owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "is_accepted": false, "score": 2, "last_activity_date": 1482361676, "last_edit_date": 1482361676, "creation_date": 1482361330, "answer_id": 41273382, "question_id": 41273234, "link": "https://stackoverflow.com/questions/41273234/list-of-dictionaries-how-to-get-intersection-based-on-one-value-and-symmetric/41273382#41273382", "title": "list of dictionaries, how to get: intersection based on one value and symmetric difference based on another value", "body": "<p>Here is one way using list comprehension and <code>itertools.prodcut</code>:</p>\n\n<pre><code>In [41]: from itertools import product\nIn [42]: [d1 for d1, d2 in product(dict_listA, dict_listB) if d2['id'] == d1['id'] and d2['b'] != d1['b']]\nOut[42]: [{'id': 1, 'b': 2}]\n</code></pre>\n\n<p>But note that this will generate duplicate results if you have multiple matched items within <code>dict_listB</code>. If you don't want to keep all the duplicate ones, you can use a set comprehension instead.</p>\n"}, {"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1482362354, "post_id": 41273388, "comment_id": 69748515, "body": "You lose space efficiency with this solution, but I like it."}, {"owner": {"reputation": 1133, "user_id": 4136445, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/92OMH.jpg?s=128&g=1", "display_name": "MrJalapeno", "link": "https://stackoverflow.com/users/4136445/mrjalapeno"}, "edited": false, "score": 0, "creation_date": 1482364040, "post_id": 41273388, "comment_id": 69748972, "body": "I must admit that I have a hard time fully understanding how you do it. How and why <code>hashed</code>is created and how you utilize it (in <code>hashed[e[&#39;id&#39;]]</code>). Think I have to read up a little bit on list comprehension and what magic you can do with it. Even though the readability might take a hit, I can&#39;t argue with the result. It now finishes in 0.034 seconds instead of 9 and for that I&#39;m very thankful! :)"}], "tags": [], "owner": {"reputation": 1125, "user_id": 3369315, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/IG7fO.png?s=128&g=1", "display_name": "ADR", "link": "https://stackoverflow.com/users/3369315/adr"}, "is_accepted": true, "score": 4, "last_activity_date": 1482363856, "last_edit_date": 1482363856, "creation_date": 1482361359, "answer_id": 41273388, "question_id": 41273234, "link": "https://stackoverflow.com/questions/41273234/list-of-dictionaries-how-to-get-intersection-based-on-one-value-and-symmetric/41273388#41273388", "title": "list of dictionaries, how to get: intersection based on one value and symmetric difference based on another value", "body": "<p>Try this:</p>\n\n<pre><code>hashed = {e['id']: e['b'] for e in dict_listB}\nsame_a_different_b2 = [e for e in dict_listA if e['id'] in hashed and hashed[e['id']] != e['b']]\n</code></pre>\n\n<p>I think complexity of algorithm is equal to O(len(a) + len(b)).\nFor example in your solution it is equal to O(len(a) * len(b)).</p>\n\n<p>If list can have duplicates:</p>\n\n<pre><code>hashed = defaultdict(set)\nfor e in dict_listB:\n    hashed[e['id']].add(e['b'])\nsame_a_different_b2 = [e for e in dict_listA if e['id'] in hashed and e['b'] not in hashed[e['id']]]\n</code></pre>\n\n<p>Compare speed (len(a) == len(b) == 2000):</p>\n\n<pre><code>from collections import defaultdict\n\nimport time\nfrom itertools import product\n\ndict_listA = [\n    {'id': 0, 'b': 1},\n    {'id': 1, 'b': 2},\n    {'id': 2, 'b': 3},\n    *[{'id': i, 'b': 1} for i in range(10000, 10000 + 2000)]\n]\n\ndict_listB = [\n    {'id': 1, 'b': 1},\n    {'id': 2, 'b': 3},\n    {'id': 3, 'b': 2},\n    *[{'id': i, 'b': 1} for i in range(20000, 20000 + 2000)]\n]\n\nsame_a_different_b = [\n    {'id': 1, 'b': 2},\n]\nstart_time = time.clock()\n\n\ndef previous_solution():\n    new_same_a_different_b = []\n    for d1 in dict_listA:\n        new_same_a_different_b.extend(filter(lambda d2: d2['id'] == d1['id'] and d2['b'] != d1['b'], dict_listB))\n    return new_same_a_different_b\n\n\ndef new_solution():\n    hashed = {e['id']: e['b'] for e in dict_listB}\n    return [e for e in dict_listA if e['id'] in hashed and hashed[e['id']] != e['b']]\n\n\ndef other_solution():\n    return [d1 for d1, d2 in product(dict_listA, dict_listB) if d2['id'] == d1['id'] and d2['b'] != d1['b']]\n\n\nfor func, name in [\n    (previous_solution, 'previous_solution'),\n    (new_solution, 'new_solution'),\n    (other_solution, 'other_solution')\n]:\n    start_time = time.clock()\n    new_result = func()\n    print('{:20}: {:.5f}'.format(name, time.clock() - start_time))\n    assert new_result, same_a_different_b\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>previous_solution   : 1.06517\nnew_solution        : 0.00073\nother_solution      : 0.60582\n</code></pre>\n"}], "owner": {"reputation": 1133, "user_id": 4136445, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/92OMH.jpg?s=128&g=1", "display_name": "MrJalapeno", "link": "https://stackoverflow.com/users/4136445/mrjalapeno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 41273388, "answer_count": 2, "score": 4, "last_activity_date": 1482363856, "creation_date": 1482360575, "last_edit_date": 1482361341, "question_id": 41273234, "link": "https://stackoverflow.com/questions/41273234/list-of-dictionaries-how-to-get-intersection-based-on-one-value-and-symmetric", "title": "list of dictionaries, how to get: intersection based on one value and symmetric difference based on another value", "body": "<p>Lets say I have:</p>\n\n<pre><code>dict_listA = [\n    {'id':0, 'b':1},\n    {'id':1, 'b':2},\n    {'id':2, 'b':3},\n]\n</code></pre>\n\n<p>and</p>\n\n<pre><code>dict_listB = [\n    {'id':1, 'b':1},\n    {'id':2, 'b':3},\n    {'id':3, 'b':2},\n]\n</code></pre>\n\n<p>How would I get a list of the id's where we have the intersection of these based on 'id' but symmetric difference based on b?</p>\n\n<pre><code>same_a_different_b = [\n    {'id':1, 'b':2},\n]\n</code></pre>\n\n<p>currently this is my solution:</p>\n\n<pre><code>for d1 in list_dictA:\n    same_a_different_b = filter(lambda d2: d2['id'] == d1['id'] and d2['b'] != d1['b'], list_dictB)\n</code></pre>\n\n<p>I ask because this is currently the biggest time-sink in my program, I wish there was some way of doing it quicker. The result (<code>same_a_different_b</code>) is usually 0 or very small, one list has about 900 entries and the other around 1400. It currently takes 9 seconds.</p>\n"}, {"tags": ["python", "arrays", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "is_accepted": false, "score": 2, "last_activity_date": 1482360405, "creation_date": 1482360405, "answer_id": 41273201, "question_id": 41273164, "link": "https://stackoverflow.com/questions/41273164/is-there-a-way-to-loop-through-the-return-value-of-np-where/41273201#41273201", "title": "Is there a way to loop through the return value of np.where?", "body": "<p>Just use a simple indexing:</p>\n\n<pre><code>indices, values = my_tuple\n\narray[indices] = values\n</code></pre>\n\n<p>If you don't have the final array yet you can create it using a desire function like <code>np.zeros</code>, <code>np.ones</code>, etc. with a size as the size of maximum index.  </p>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 1, "last_activity_date": 1482363147, "creation_date": 1482363147, "answer_id": 41273645, "question_id": 41273164, "link": "https://stackoverflow.com/questions/41273164/is-there-a-way-to-loop-through-the-return-value-of-np-where/41273645#41273645", "title": "Is there a way to loop through the return value of np.where?", "body": "<p>I think you want the <code>transpose</code> of the <code>where</code> tuple:</p>\n\n<pre><code>In [204]: x=np.arange(1,13).reshape(3,4)\nIn [205]: x\nOut[205]: \narray([[ 1,  2,  3,  4],\n       [ 5,  6,  7,  8],\n       [ 9, 10, 11, 12]])\nIn [206]: idx=np.where(x)\nIn [207]: idx\nOut[207]: \n(array([0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2], dtype=int32),\n array([0, 1, 2, 3, 0, 1, 2, 3, 0, 1, 2, 3], dtype=int32))\nIn [208]: ij=np.transpose(idx)\nIn [209]: ij\nOut[209]: \narray([[0, 0],\n       [0, 1],\n       [0, 2],\n       [0, 3],\n       [1, 0],\n       [1, 1],\n       [1, 2],\n       [1, 3],\n       [2, 0],\n       [2, 1],\n       [2, 2],\n       [2, 3]], dtype=int32)\n</code></pre>\n\n<p>In fact there's a function that does just that:</p>\n\n<pre><code>np.argwhere(x)\n</code></pre>\n\n<p>Iterating on <code>ij</code>, I can print:</p>\n\n<pre><code>In [213]: for i,j in ij:\n     ...:     print('array[{}]={}'.format(i,j))\n     ...:     \narray[0]=0\narray[0]=1\narray[0]=2\n</code></pre>\n\n<p><code>zip(*)</code> is a list version of transpose:</p>\n\n<pre><code>for i,j in zip(*idx):\n     print(i,j)\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 6334115, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2abe83dc1a329717debdd8a7d069fbd5?s=128&d=identicon&r=PG&f=1", "display_name": "LarmadVara", "link": "https://stackoverflow.com/users/6334115/larmadvara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1482363147, "creation_date": 1482360226, "last_edit_date": 1482362095, "question_id": 41273164, "link": "https://stackoverflow.com/questions/41273164/is-there-a-way-to-loop-through-the-return-value-of-np-where", "title": "Is there a way to loop through the return value of np.where?", "body": "<p>Is there a way to loop-through this tuple(?) where the left array are positions in an array and the right array is the value I would like to insert into the given positions: </p>\n\n<pre><code>(array([   0,    4,    6, ..., 9992, 9996, 9997]), array([3, 3, 3, ..., 3, 3, 3]))\n</code></pre>\n\n<p>The output above is generated from the following piece of code:</p>\n\n<pre><code>np.where(h2 == h2[i,:].max())[1]\n</code></pre>\n\n<p>I would like the result to be like this:</p>\n\n<pre><code>array[0] = 3\narray[4] = 3\n...\narray[9997] = 3\n</code></pre>\n"}, {"tags": ["python", "google-people", "apiclient"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7318505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66464d5183bfbc04958aa5e3bf177771?s=128&d=identicon&r=PG&f=1", "display_name": "user7318505", "link": "https://stackoverflow.com/users/7318505/user7318505"}, "edited": false, "score": 1, "creation_date": 1484013172, "post_id": 41538880, "comment_id": 70324867, "body": "Yes, that did it (and removing the resourceName argument)!  Thanks so much!!"}], "tags": [], "owner": {"reputation": 302, "user_id": 181434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4699072755010c1fa0674042a76711e8?s=128&d=identicon&r=PG", "display_name": "j&#225;quer", "link": "https://stackoverflow.com/users/181434/j%c3%a1quer"}, "is_accepted": true, "score": 3, "last_activity_date": 1483917255, "last_edit_date": 1483917255, "creation_date": 1483916901, "answer_id": 41538880, "question_id": 41273162, "link": "https://stackoverflow.com/questions/41273162/python-people-api-quit-working/41538880#41538880", "title": "python people api quit working", "body": "<p>Messing around with it, I was able to get it to work with this change:</p>\n\n<pre><code>service.people().me().connections().list(pageSize=100).execute()\n</code></pre>\n\n<p>I'm not sure why the code was changed, or why it wasn't documented. I simply dug around calling <code>dir()</code> on each object.</p>\n"}], "owner": {"reputation": 23, "user_id": 7318505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66464d5183bfbc04958aa5e3bf177771?s=128&d=identicon&r=PG&f=1", "display_name": "user7318505", "link": "https://stackoverflow.com/users/7318505/user7318505"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 0, "accepted_answer_id": 41538880, "answer_count": 1, "score": 2, "last_activity_date": 1483917255, "creation_date": 1482360220, "question_id": 41273162, "link": "https://stackoverflow.com/questions/41273162/python-people-api-quit-working", "title": "python people api quit working", "body": "<p>I have a python (2.7.10) code based on the \"quickstart\" example at <a href=\"https://developers.google.com/people/quickstart/python\" rel=\"nofollow noreferrer\">https://developers.google.com/people/quickstart/python</a>, which reads contacts from a gmail account.  It has been running every Sunday for months.  On 12/18/16, it failed.  The error message and lines leading up to it are:</p>\n\n<pre><code>...\nhttp = credentials.authorize(httplib2.Http())\nservice = discovery.build('people', 'v1', http=http,\n    discoveryServiceUrl='https://people.googleapis.com/$discovery/rest')\n\nresults = service.people().connections().list(resourceName='people/me',\n    requestMask_includeField='person.names,person.email_addresses',\n    pageSize=160).execute()\n</code></pre>\n\n<p><strong>AttributeError: 'Resource' object has no attribute 'connections'</strong></p>\n\n<p>On entry to this code 'credentials' seems ok, but I am not skilled enough to really know.  credentials.invalid is false, which is what the code checks for.</p>\n\n<p>My code did not change.  Did something happen to the build/discovery service?  Could the credentials have something to do with this?</p>\n\n<p>This is on Windows 7.</p>\n\n<p>Thanks for any thoughts.</p>\n"}, {"tags": ["python", "audio", "pygame"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7143777"}, "edited": false, "score": 0, "creation_date": 1482369054, "post_id": 41273931, "comment_id": 69750183, "body": "It didn&#39;t seem to make any difference when I applied it. I still had the same fewer-sounds-than-clicks issue. I guess I&#39;ll keep it for now. Thanks for the response, though."}, {"owner": {"reputation": 2067, "user_id": 2588654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1227d97bdaa264abb9dc64cd71830a9?s=128&d=identicon&r=PG", "display_name": "CodeSurgeon", "link": "https://stackoverflow.com/users/2588654/codesurgeon"}, "edited": false, "score": 0, "creation_date": 1482369423, "post_id": 41273931, "comment_id": 69750263, "body": "@ShawnSong Have you tried using longer test sounds to better hear the overlap? Also, I did find that if I start clicking rapidly immediately when the app initially loads, it does end up missing a sound, so see if anything changes when you rapid-fire-click after waiting a few seconds. Also, it might not hurt to check <code>pygame.mixer.get_num_channels()</code> to see if it is indeed 8 by default."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7143777"}, "edited": false, "score": 0, "creation_date": 1482447254, "post_id": 41273931, "comment_id": 69788379, "body": "Could it perhaps be the version I&#39;m using (Python 3.3)? I&#39;ve seen pygame.mixer.find_channel() work for others online, but for me, it makes no difference. pygame.mixer.get_num_channels() returns 8; I&#39;ve already tried."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7143777"}, "edited": false, "score": 0, "creation_date": 1482447495, "post_id": 41273931, "comment_id": 69788442, "body": "No matter what sound effect I use, or how long I wait after the program starts up, or how many channels I set Pygame to have with pygame.mixer.set_num_channels(), sounds always seem to have a limit to how fast they can play. If all else fails, I might just remove sounds from my game."}, {"owner": {"reputation": 2067, "user_id": 2588654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1227d97bdaa264abb9dc64cd71830a9?s=128&d=identicon&r=PG", "display_name": "CodeSurgeon", "link": "https://stackoverflow.com/users/2588654/codesurgeon"}, "edited": false, "score": 0, "creation_date": 1482476291, "post_id": 41273931, "comment_id": 69795681, "body": "@ShawnSong I don&#39;t think the version makes a difference, since I just tested the code in my solution in python 3.5 and it worked just fine (modifying the print statement, of course!). What platform are you on? I am running my code on Windows 10, 64 bit."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7143777"}, "edited": false, "score": 0, "creation_date": 1482527867, "post_id": 41273931, "comment_id": 69818945, "body": "I&#39;m using Python 3.3 on Windows 8.1, 64 bit."}, {"owner": {"reputation": 2067, "user_id": 2588654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1227d97bdaa264abb9dc64cd71830a9?s=128&d=identicon&r=PG", "display_name": "CodeSurgeon", "link": "https://stackoverflow.com/users/2588654/codesurgeon"}, "edited": false, "score": 0, "creation_date": 1482552600, "post_id": 41273931, "comment_id": 69823753, "body": "@ShawnSong Honestly at this point I am not sure what is wrong. It could be that perhaps SDL_mixer dependency pygame has is not installed, but that is unlikely since the single sound without overlap is playing. Alternatively, you can use other pygame libraries to play your sound. I have seen PyAudio mentioned before, but I haven&#39;t personally used it. I am currently using PyAL, which is based on OpenAL and is low level, to play sounds in my 3D engine since it has 3D positional audio, but I think it should work in this use case as well."}], "tags": [], "owner": {"reputation": 2067, "user_id": 2588654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1227d97bdaa264abb9dc64cd71830a9?s=128&d=identicon&r=PG", "display_name": "CodeSurgeon", "link": "https://stackoverflow.com/users/2588654/codesurgeon"}, "is_accepted": false, "score": 0, "last_activity_date": 1482365355, "creation_date": 1482365355, "answer_id": 41273931, "question_id": 41273152, "link": "https://stackoverflow.com/questions/41273152/any-way-i-can-get-python-sounds-to-overlap/41273931#41273931", "title": "Any way I can get Python sounds to overlap?", "body": "<p>Playing around a bit, I think that you are right about using <code>pygame.mixer.Channel</code>. I would recommend taking a look at the <code>pygame.mixer</code> as well as the <code>pygame.mixer.Channel</code> pages. The simplest approach I could come up with is to see if there is an empty channel available in pygame (8 channels are available by default, more can be created with <code>pygame.mixer.set_num_channels()</code>). If there is an empty one available, then you can use the <strong>channel instead to play the sound rather than the sound object itself</strong>. With those two tweaks, your sample becomes this:</p>\n\n<pre><code>import pygame\nimport sys\n\npygame.init()\nsize = (200, 200)\nscreen = pygame.display.set_mode(size)\nLEFT = 1\ns = pygame.mixer.Sound(\"Sound.wav\")\n\nwhile True:\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            pygame.quit()\n            sys.exit()\n        elif event.type == pygame.MOUSEBUTTONDOWN:\n            if event.button == LEFT:\n                print \"click\"\n                empty_channel = pygame.mixer.find_channel()\n                empty_channel.play(s)\n</code></pre>\n\n<p>Let me know if it helps!</p>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 3669468, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001529134047/picture?type=large", "display_name": "petro4213", "link": "https://stackoverflow.com/users/3669468/petro4213"}, "edited": false, "score": 0, "creation_date": 1587930611, "post_id": 52646237, "comment_id": 108697644, "body": "I had a similar problem: I repeatedly issued <code>play()</code> calls on empty channels returned by <code>pygame.mixer.find_channel()</code> at intervals of about 0.25 seconds. The sounds I wanted to play on each of these calls was only about 0.1 seconds long. Anyway the sounds didn&#39;t play in intervals of 0.25s all the time. Instead sometimes two sounds came quicker after one another. When I initialized the buffer size to 1024, all was fine, but I had to use the <code>pre_init()</code> call to make this become effective."}], "tags": [], "owner": {"reputation": 21, "user_id": 9801909, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-n1Vs5YvoVrE/AAAAAAAAAAI/AAAAAAAAAmg/eSk50BNIAUI/photo.jpg?sz=128", "display_name": "Kaspars Putni\u0146\u0161", "link": "https://stackoverflow.com/users/9801909/kaspars-putni%c5%86%c5%a1"}, "is_accepted": false, "score": 2, "last_activity_date": 1538654602, "creation_date": 1538654602, "answer_id": 52646237, "question_id": 41273152, "link": "https://stackoverflow.com/questions/41273152/any-way-i-can-get-python-sounds-to-overlap/52646237#52646237", "title": "Any way I can get Python sounds to overlap?", "body": "<p>Old thread, but some one like me might be struggling with the same problem</p>\n\n<p>For CodeSurgeons solution to work I had to initialize the pygame.mixer with a smaller buffer size</p>\n\n<pre><code>pygame.mixer.init(buffer=2048)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>pygame.mixer.pre_init(buffer=2048)\npygame.init()\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7143777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 687, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1538654602, "creation_date": 1482360157, "question_id": 41273152, "link": "https://stackoverflow.com/questions/41273152/any-way-i-can-get-python-sounds-to-overlap", "title": "Any way I can get Python sounds to overlap?", "body": "<pre><code>import pygame,sys\n\npygame.init()\n\nsize = 40,40\nscreen = pygame.display.set_mode(size)\n\nLEFT = 1\n\ns = pygame.mixer.Sound(\"Sound.wav\")\n\nwhile True:\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            pygame.quit()\n            sys.exit()\n        elif event.type == pygame.MOUSEBUTTONDOWN:\n            if event.button == LEFT:\n                s.play()\n</code></pre>\n\n<p>So at the moment, I'm trying to make a game using Pygame. I have it set so a sound plays whenever you click the mouse. It works and all, but I get really annoyed, because I can only hear one sound effect at a time. If I click 7 times very quickly, I might hear only 4-6 sounds. If I click 2 times very quickly, I only hear one sound play. </p>\n\n<p>I've looked on various other questions about overlapping Pygame sounds (it's got something to do with pygame.mixer.Channel, which I don't understand). Nothing has worked for me so far. Any ideas?</p>\n"}, {"tags": ["python", "cython"], "owner": {"reputation": 318, "user_id": 1512724, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/7397d35c259c13e4bc99902cbb53d78f?s=128&d=identicon&r=PG", "display_name": "omgimdrunk", "link": "https://stackoverflow.com/users/1512724/omgimdrunk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1482360854, "creation_date": 1482359757, "last_edit_date": 1482360854, "question_id": 41273073, "link": "https://stackoverflow.com/questions/41273073/cython-include-an-existing-pyd-into-a-new-pyd-for-portablility", "title": "Cython - include an existing pyd into a new pyd for portablility", "body": "<p>I have searched everywhere for an example and I think I might be interpreting the documentation wrong. </p>\n\n<p>I wanted to include the pycrypto Hashing lib into a new Cython pyd file to be used on Windows systems that cannot download / compile pycrypto. After digging through the library I see the using <code>from Cipher.hash import SHA256</code>\nCalls a SHA256.py, which then does:</p>\n\n<pre><code>from Crypto.Util.py3compat import *\nfrom Crypto.Hash.hashalgo import HashAlgo\n\ntry:\n    import hashlib\n    hashFactory = hashlib.sha256\n\nexcept ImportError:\n    from Crypto.Hash import _SHA256\n    hashFactory = _SHA256\n</code></pre>\n\n<p>Now the _SHA256 is a pyd, how can i wrap that into a new pyd for portability?</p>\n\n<p>I see in the documentation that I can interface with external headers and wrap those, but what about already compiled?</p>\n\n<pre><code>cdef extern from \"spam.h\":\n\n    int spam_counter\n\n    void order_spam(int tons)\n</code></pre>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["python", "postgresql", "sqlalchemy"], "answers": [{"comments": [{"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1482701055, "post_id": 41279927, "comment_id": 69852837, "body": "Create an <a href=\"http://docs.sqlalchemy.org/en/latest/core/functions.html#sqlalchemy.sql.functions.FunctionElement.alias\" rel=\"nofollow noreferrer\">alias</a> from the function and follow the instructions on using it in <code>select_from</code>. The example is specifically for postgresql."}], "tags": [], "owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "is_accepted": false, "score": 0, "last_activity_date": 1482399353, "creation_date": 1482399353, "answer_id": 41279927, "question_id": 41273049, "link": "https://stackoverflow.com/questions/41273049/why-does-sqlalchmy-func-return-strings-instead-of-integer/41279927#41279927", "title": "Why does sqlalchmy func return strings instead of integer?", "body": "<p>I'm partway to an answer. Looking at the emitted SQL it's the difference between:</p>\n\n<pre><code>SELECT get_my_thing(someval)\n</code></pre>\n\n<p>And </p>\n\n<pre><code>SELECT * FROM get_my_thing(someval)\n</code></pre>\n\n<p>The former is what's emitted by </p>\n\n<pre><code>session.query(func.get_my_thing(someval))\n</code></pre>\n\n<p>I'm not sure how to emit the latter SQL</p>\n"}], "owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482399353, "creation_date": 1482359649, "question_id": 41273049, "link": "https://stackoverflow.com/questions/41273049/why-does-sqlalchmy-func-return-strings-instead-of-integer", "title": "Why does sqlalchmy func return strings instead of integer?", "body": "<p>We have a postgresql database with a stored procedure that returns a SETOF a type with this definition:</p>\n\n<pre><code>Column |  Type   | Modifiers\n-------+---------+----------\nmy_id  | integer |\n</code></pre>\n\n<p>However, when I execute the function like this:</p>\n\n<pre><code> for result in session.query(func.get_my_thing(someval)):\n     print(result)\n</code></pre>\n\n<p>It gives me results like this:</p>\n\n<pre><code>('(8968)',)\n</code></pre>\n\n<p>Yeah, that's a tuple of strings that look kind of like a single element tuple. It's definitely a string, i.e. <code>print(type(result[0]))</code> shows that it's of type <code>str</code>.</p>\n\n<p>Why does it return this string type instead of the integer that the function returns?</p>\n"}, {"tags": ["python", "sockets"], "answers": [{"tags": [], "owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "is_accepted": true, "score": 1, "last_activity_date": 1482360919, "creation_date": 1482360919, "answer_id": 41273300, "question_id": 41273047, "link": "https://stackoverflow.com/questions/41273047/python-sockets-objects/41273300#41273300", "title": "Python sockets objects", "body": "<p>The socket you call <code>.listen()</code> on is a <em>server socket</em>; about all you can do with it is to call <code>.accept()</code> to produce a <em>client socket</em>, which handles all actual communications.  One server socket can produce any number of client sockets over its lifetime.</p>\n"}], "owner": {"reputation": 108, "user_id": 6506041, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/0TT55.jpg?s=128&g=1", "display_name": "kiran_raj_r", "link": "https://stackoverflow.com/users/6506041/kiran-raj-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 41273300, "answer_count": 1, "score": -1, "last_activity_date": 1482360919, "creation_date": 1482359645, "last_edit_date": 1482359858, "question_id": 41273047, "link": "https://stackoverflow.com/questions/41273047/python-sockets-objects", "title": "Python sockets objects", "body": "<p>Consider the following example.</p>\n\n<pre><code>from socket import *\n\nmsg = input(\"Please enter your name \")\nmsg = msg.encode()\nmyHostIp = ''\nmyHostPort = 54040\n\nsocket_obj = socket(AF_INET, SOCK_STREAM)\nsocket_obj.bind((myHostIp,myHostPort))\nsocket_obj.listen(5)\n\nwhile True:\n    connection,address = socket_obj.accept()\n    print(\"Client : \",address)\n    connection.send(msg)\n    print(socket.getsockname(socket_obj))\n    print(socket.getsockname(connection))\n    print(socket.getpeername(socket_obj))\n    print(socket.getpeername(connection))\n    while True:\n        data = connection.recv(1024)\n        print(\"This was received from \", data)\n    connection.close()    \n</code></pre>\n\n<p>In this simple program the output of line <code>print(socket.getsockname(socket_obj))</code> was <code>(0.0.0.0)</code>\nand of the <code>print(socket.getpeername(socket_obj))</code> was <code>socket_obj is not connected.</code></p>\n\n<p>My question is: once <code>connection,address = socket_obj.accept()</code> is executed, is the control from <code>socket_obj</code> transferred to <code>connection</code>?</p>\n"}, {"tags": ["python", "django", "django-rest-framework"], "comments": [{"owner": {"reputation": 191, "user_id": 1960016, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/goBFD.jpg?s=128&g=1", "display_name": "whieronymus", "link": "https://stackoverflow.com/users/1960016/whieronymus"}, "edited": false, "score": 0, "creation_date": 1482361611, "post_id": 41273034, "comment_id": 69748306, "body": "Are your classes going to be further customized? Right now they all look exactly the same. Rather than using 3 different classes to change the name why don&#39;t you use one class Profile (or something) and have a field (user_type) for the type of user? It will be much easier to query all of your users that way, and you can filter based on user_type"}, {"owner": {"reputation": 2192, "user_id": 5942579, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/o6P12.jpg?s=128&g=1", "display_name": "Emmanuel Mtali", "link": "https://stackoverflow.com/users/5942579/emmanuel-mtali"}, "reply_to_user": {"reputation": 191, "user_id": 1960016, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/goBFD.jpg?s=128&g=1", "display_name": "whieronymus", "link": "https://stackoverflow.com/users/1960016/whieronymus"}, "edited": false, "score": 0, "creation_date": 1482362044, "post_id": 41273034, "comment_id": 69748436, "body": "How am i going to permit super users to create admins users, admin to create another model(event) using your approach@whieronymus"}], "answers": [{"comments": [{"owner": {"reputation": 8946, "user_id": 5675325, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/rM1RC.png?s=128&g=1", "display_name": "Tiago Martins Peres \u674e\u5927\u4ec1", "link": "https://stackoverflow.com/users/5675325/tiago-martins-peres-%e6%9d%8e%e5%a4%a7%e4%bb%81"}, "edited": false, "score": 1, "creation_date": 1587214090, "post_id": 41329678, "comment_id": 108424279, "body": "Could you clarify how you&#39;d do for case 1. if you wanted to limit access to specific HTTP method to only users of type X?"}], "tags": [], "owner": {"reputation": 627, "user_id": 4743269, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-EYICmoHiHNo/AAAAAAAAAAI/AAAAAAAABqs/zD1i_k4hXi4/photo.jpg?sz=128", "display_name": "Anton Manevskiy", "link": "https://stackoverflow.com/users/4743269/anton-manevskiy"}, "is_accepted": false, "score": 8, "last_activity_date": 1580940931, "last_edit_date": 1580940931, "creation_date": 1482747382, "answer_id": 41329678, "question_id": 41273034, "link": "https://stackoverflow.com/questions/41273034/implement-roles-in-django-rest-framework/41329678#41329678", "title": "Implement roles in django rest framework", "body": "<p>One possible solution is:</p>\n\n<ul>\n<li><ol>\n<li>Have only one User Model with role field, which defines what user role is.</li>\n</ol></li>\n<li><ol start=\"2\">\n<li>Create a User Group and add each group needed permissions.</li>\n</ol></li>\n<li><ol start=\"3\">\n<li>Add User to User Group</li>\n</ol></li>\n<li><ol start=\"4\">\n<li>Limit access using a Django REST Framework (later DRF) Permission Class.</li>\n</ol></li>\n</ul>\n\n<p>Explanation:</p>\n\n<ol>\n<li><p>Using only one user model is a more simple and flexible solution. You can query all users, or filtered by feature (like user role). Standart Django auth system expects one UserModel.</p></li>\n<li><p>Read more about Django user groups. See \"<a href=\"https://docs.djangoproject.com/en/3.0/topics/auth/default/#permissions-and-authorization\" rel=\"nofollow noreferrer\">Django Permissions Docs #1</a>\" and \"<a href=\"https://docs.djangoproject.com/en/3.0/topics/auth/default/#groups\" rel=\"nofollow noreferrer\">Django Groups Docs #2</a>\". Also useful is \"<a href=\"https://stackoverflow.com/questions/12393726/user-groups-and-permissions\">User groups and permissions</a>\".</p></li>\n</ol>\n\n<p>You need to create a group for each user role, and add needed permissions for each group. (Django has a default model permission, created automatically, look at the docs on the given links) or create the needed permission manually in the model definition.</p>\n\n<ol start=\"3\">\n<li><p>Manually or using a script, add User to the needed group by defining his role  when a user is created or manually by Django Admin interface.</p></li>\n<li><p>Now everything should be ready for limited access by the user's role. You can easily limit access to the DRF View using a permission class. See more information in the \"<a href=\"http://www.django-rest-framework.org/api-guide/permissions/\" rel=\"nofollow noreferrer\">DRF Permission Docs</a>\".</p></li>\n</ol>\n\n<p>Let's define our own:</p>\n\n<pre><code>from rest_framework.permissions import DjangoModelPermissions\n# Using DjangoModelPermissions we can limit access by checking user permissions.\n\n# Rights need only for CreateUpdateDelete actions.\nclass CUDModelPermissions(DjangoModelPermissions):\n  perms_map = {\n      'GET': [],\n      'OPTIONS': [],\n      'HEAD': ['%(app_label)s.read_%(model_name)s'],\n      'POST': ['%(app_label)s.add_%(model_name)s'],\n      'PUT': ['%(app_label)s.change_%(model_name)s'],\n      'PATCH': ['%(app_label)s.change_%(model_name)s'],\n      'DELETE': ['%(app_label)s.delete_%(model_name)s'],\n  }\n\n# Or you can inherit from BasePermission class and define your own rule for access\nfrom rest_framework.permissions import BasePermission\n\nclass AdminsPermissions(BasePermission):\n    allowed_user_roles = (User.SUPERVISOR, User.ADMINISTRATOR)\n\n    def has_permission(self, request, view):\n        is_allowed_user = request.user.role in self.allowed_user_roles\n        return is_allowed_user\n\n# ----\n# on views.py\n\nfrom rest_framework import generics\nfrom .mypermissions import CUDModelPermissions, AdminsPermissions\n\nclass MyViewWithPermissions(generics.RetrieveUpdateDestroyAPIView):\n    permission_classes = [CUDModelPermissions, ]\n    queryset = SomeModel.objects.all()\n    serializer_class = MyModelSerializer\n</code></pre>\n\n<p>You can add additional permission class to combine access limitation.</p>\n"}, {"tags": [], "owner": {"reputation": 14503, "user_id": 474563, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/3f27430d3d162c443506778a01a24dc2?s=128&d=identicon&r=PG", "display_name": "Pithikos", "link": "https://stackoverflow.com/users/474563/pithikos"}, "is_accepted": false, "score": 2, "last_activity_date": 1582903418, "last_edit_date": 1582903418, "creation_date": 1582902963, "answer_id": 60454540, "question_id": 41273034, "link": "https://stackoverflow.com/questions/41273034/implement-roles-in-django-rest-framework/60454540#60454540", "title": "Implement roles in django rest framework", "body": "<p>So in Django any user has a flag <code>is_superuser</code> that corresponds to your 'superuser'. So just use that - e.g. <code>User.objects.create(is_superuser=True)</code>.</p>\n\n<p>For the rest you can simply use a field for a normal User model to differentiate between subroles of a normal user.</p>\n\n<pre><code>class User(AbstractBaseUser):\n    can_participate_event = models.Boolean(default=False)\n    can_create_event = models.Boolean(default=False)\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>class User(AbstractBaseUser):\n    permissions = models.CharField(default='')  # and populate with e.g. 'create_event,participate_event'\n</code></pre>\n\n<p>Still you will need to check all those fields in your view probably. The more you add to your application, the hairier this becomes so I would suggest using a 3rd party library like <a href=\"https://github.com/Pithikos/rest-framework-roles\" rel=\"nofollow noreferrer\">rest-framework-roles</a> (I'm the author) or guardian.</p>\n"}], "owner": {"reputation": 2192, "user_id": 5942579, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/o6P12.jpg?s=128&g=1", "display_name": "Emmanuel Mtali", "link": "https://stackoverflow.com/users/5942579/emmanuel-mtali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6655, "favorite_count": 4, "answer_count": 2, "score": 8, "last_activity_date": 1582903418, "creation_date": 1482359587, "question_id": 41273034, "link": "https://stackoverflow.com/questions/41273034/implement-roles-in-django-rest-framework", "title": "Implement roles in django rest framework", "body": "<p>I am building an API that should have the following kind of users</p>\n\n<p><code>super_user</code> - create/manage admins</p>\n\n<p><code>admin</code> - manage events(model) and event participants</p>\n\n<p><code>participants</code> - participate in events, invited to events by admins</p>\n\n<p>Additional i want to have each type of user to have phone number field</p>\n\n<p>I <a href=\"https://docs.djangoproject.com/en/1.10/topics/auth/customizing/#extending-user\" rel=\"noreferrer\">tried</a> </p>\n\n<pre><code>class SuperUser(models.Model):\n    user = models.OneToOneField(User, on_delete=models.CASCADE)\n    phone_number = models.CharField(max_length=20)\n\nclass Admin(models.Model):\n    user = models.OneToOneField(User, on_delete=models.CASCADE)\n    phone_number = models.CharField(max_length=20)\n\n\nclass Participant(models.Model):\n    user = models.OneToOneField(User, on_delete=models.CASCADE)\n    phone_number = models.CharField(max_length=20)\n</code></pre>\n\n<p>But gut is telling me its a wrong way to handle this. Can someone please help.</p>\n"}, {"tags": ["python", "pandas", "dataframe", "series"], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 51, "last_activity_date": 1482360688, "last_edit_date": 1482360688, "creation_date": 1482359652, "answer_id": 41273050, "question_id": 41273005, "link": "https://stackoverflow.com/questions/41273005/how-to-get-the-index-of-ith-item-in-pandas-series-or-pandas-dataframe/41273050#41273050", "title": "How to get the index of ith item in pandas.Series or pandas.DataFrame?", "body": "<p>You could get it straight from the index</p>\n\n<pre><code>s.index[5]\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>s.index.values[5]\n</code></pre>\n\n<p>It all depends on what you consider <code>better</code>.  I can tell you that a <code>numpy</code> approach will probably be faster.</p>\n\n<p>For example.  <code>numpy.argsort</code> returns an array where the first element in the array is the position in the array being sorted that should be first.  The second element in argsort's return array is the position of the element in the array being sorted that should be second.  So on and so forth.</p>\n\n<p>So you could do this to get the index value of the 6th item after being sorted.</p>\n\n<pre><code>s.index.values[s.values.argsort()[5]]\n</code></pre>\n\n<p>Or more transparently</p>\n\n<pre><code>s.sort_values().index[5]\n</code></pre>\n\n<p>Or more creatively</p>\n\n<pre><code>s.nsmallest(6).idxmax()\n</code></pre>\n"}], "owner": {"reputation": 591, "user_id": 5363192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-GxjnIwQVgLA/AAAAAAAAAAI/AAAAAAAADQI/gct-Hc25wSY/photo.jpg?sz=128", "display_name": "D3VLPR", "link": "https://stackoverflow.com/users/5363192/d3vlpr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38867, "favorite_count": 8, "accepted_answer_id": 41273050, "answer_count": 1, "score": 26, "last_activity_date": 1604396265, "creation_date": 1482359449, "last_edit_date": 1604396265, "question_id": 41273005, "link": "https://stackoverflow.com/questions/41273005/how-to-get-the-index-of-ith-item-in-pandas-series-or-pandas-dataframe", "title": "How to get the index of ith item in pandas.Series or pandas.DataFrame?", "body": "<p>I'm trying to get the index of 6th item in a <code>Series</code> I have.</p>\n<p>This is how the head looks like:</p>\n<pre><code>United States    1.536434e+13\nChina            6.348609e+12\nJapan            5.542208e+12\nGermany          3.493025e+12\nFrance           2.681725e+12\n</code></pre>\n<p>For getting the 6th index name (6th Country after being sorted), I usually use <code>s.head(6)</code> and get the 6th index from there.</p>\n<p><code>s.head(6)</code> gives me:</p>\n<pre><code>United States     1.536434e+13\nChina             6.348609e+12\nJapan             5.542208e+12\nGermany           3.493025e+12\nFrance            2.681725e+12\nUnited Kingdom    2.487907e+12\n</code></pre>\n<p>and looking at this, I'm getting the index as United Kingdom.</p>\n<p>So, is there any better way for getting the index other than this? And also, for a dataframe, is there any function to get the 6th index on basis of a respective column after sorting.</p>\n<p>If it's a dataframe, I usually, sort, create a new column named index, and use <code>reset_index</code>, and then use <code>iloc</code> attribute to get the 6th (since it will be using a range in the index after reset).</p>\n<p>Is there any better way to do this with <code>pd.Series</code> and <code>pd.DataFrame</code>?</p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 110, "user_id": 6938240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ivbtb.jpg?s=128&g=1", "display_name": "moogle", "link": "https://stackoverflow.com/users/6938240/moogle"}, "edited": false, "score": 1, "creation_date": 1482359683, "post_id": 41272955, "comment_id": 69747570, "body": "Using if-statements is pretty low-commitment as is."}], "answers": [{"tags": [], "owner": {"reputation": 4469, "user_id": 6342812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/19e9e8f53f02cc9013f635a6bb67647d?s=128&d=identicon&r=PG&f=1", "display_name": "rassar", "link": "https://stackoverflow.com/users/6342812/rassar"}, "is_accepted": false, "score": 0, "last_activity_date": 1482359716, "creation_date": 1482359716, "answer_id": 41273060, "question_id": 41272955, "link": "https://stackoverflow.com/questions/41272955/how-to-merge-python-dictionaries-with-the-same-keys-where-a-particular-value-wi/41273060#41273060", "title": "How to merge python dictionaries with the same keys, where a particular value will always be overwritten if data is available", "body": "<p>Do you mean something like this?</p>\n\n<pre><code>def combine(dict1, dict2):\n    newDict = {}\n    for (key, value) in dict1.items():\n        if dict2[key] == \"Not Found\":\n            newDict[key] = value\n        else:\n            newDict[key] = dict2[key]\n    return newDict\n\n&gt;&gt;&gt; dict1 = {'MaterialBC': '2261651270620793', 'RFIDBC': 'Not Found'}\n&gt;&gt;&gt; dict2 = {'MaterialBC': 'Not Found', 'RFIDBC': '1022010911012012'}\n&gt;&gt;&gt; combine(dict1, dict2)\n{'RFIDBC': '1022010911012012', 'MaterialBC': '2261651270620793'}\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>{key: value if dict2[key] == \"Not Found\" else dict2[key] for (key, value) in dict1.items()}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "is_accepted": true, "score": 2, "last_activity_date": 1482359846, "creation_date": 1482359846, "answer_id": 41273092, "question_id": 41272955, "link": "https://stackoverflow.com/questions/41272955/how-to-merge-python-dictionaries-with-the-same-keys-where-a-particular-value-wi/41273092#41273092", "title": "How to merge python dictionaries with the same keys, where a particular value will always be overwritten if data is available", "body": "<p>This simplest I can think of is this,</p>\n\n<pre><code> a = {'MaterialBC': '2261651270620793', 'RFIDBC': 'Not Found'}\n b = {'MaterialBC': 'Not Found', 'RFIDBC': '1022010911012012'}\n\n c = { k: a[k] if b[k] == 'Not Found' else b[k] for k in a.keys() }\n</code></pre>\n\n<p>It contains an <code>if</code> but it is a one-liner.</p>\n\n<p>NB, this will prefer values from <code>b</code> if both <code>a</code> and <code>b</code> contain a number!</p>\n"}, {"tags": [], "owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "is_accepted": false, "score": 0, "last_activity_date": 1482359852, "creation_date": 1482359852, "answer_id": 41273094, "question_id": 41272955, "link": "https://stackoverflow.com/questions/41272955/how-to-merge-python-dictionaries-with-the-same-keys-where-a-particular-value-wi/41273094#41273094", "title": "How to merge python dictionaries with the same keys, where a particular value will always be overwritten if data is available", "body": "<p>Instead of using <code>\"Not Found\"</code>, simply put an empty string when a value is note present. This is so you can take advantage of an empty strings \"falsy\"-ness. As for your comment about limiting the usage of <code>if</code> statements, you can use the ternary form of if statements:</p>\n\n<pre><code>&gt;&gt;&gt; d1 = {'MaterialBC': '2261651270620793', 'RFIDBC': ''}\n&gt;&gt;&gt; d2 = {'MaterialBC': '', 'RFIDBC': '1022010911012012'}\n&gt;&gt;&gt; {k: v if v else d2[k] for k, v in d1.items()}\n{'MaterialBC': '2261651270620793', 'RFIDBC': '1022010911012012'}\n&gt;&gt;&gt; \n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 2479692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73767bad4b1d798d62277012a530eb74?s=128&d=identicon&r=PG", "display_name": "user2479692", "link": "https://stackoverflow.com/users/2479692/user2479692"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 41273092, "answer_count": 3, "score": 1, "last_activity_date": 1482359852, "creation_date": 1482359191, "question_id": 41272955, "link": "https://stackoverflow.com/questions/41272955/how-to-merge-python-dictionaries-with-the-same-keys-where-a-particular-value-wi", "title": "How to merge python dictionaries with the same keys, where a particular value will always be overwritten if data is available", "body": "<p>How would i combine the two dictionaries below to form the new dictionary.\nThe two dictionaries will either have a number or a Not Found field and i want the Not Found field to always be overwritten by a number. The dictionaries will always have the same keys and only 2 elements in each. This is an example.</p>\n\n<pre><code>Dict1: {'MaterialBC': '2261651270620793', 'RFIDBC': 'Not Found'}\nDict2: {'MaterialBC': 'Not Found', 'RFIDBC': '1022010911012012'}\n\nNewDict: {'MaterialBC': '2261651270620793', 'RFIDBC': '1022010911012012'}\n</code></pre>\n\n<p>Is there an easier way to do this other than using if statements for each scenario?</p>\n"}, {"tags": ["python", "datetime", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 2996, "user_id": 3553228, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b48e7a43f7c3cca4a3826be398b8e32a?s=128&d=identicon&r=PG&f=1", "display_name": "Lisa", "link": "https://stackoverflow.com/users/3553228/lisa"}, "edited": false, "score": 0, "creation_date": 1482359678, "post_id": 41272953, "comment_id": 69747568, "body": "the second solution works! would you explain more on int_current must be an iterable of some sort?"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 2, "last_activity_date": 1482359994, "last_edit_date": 1482359994, "creation_date": 1482359183, "answer_id": 41272953, "question_id": 41272913, "link": "https://stackoverflow.com/questions/41272913/print-single-date-string-from-a-dataframe/41272953#41272953", "title": "print single date string from a dataframe", "body": "<p><code>ind_current</code> must be an iterable of some sort.  </p>\n\n<p>Try:</p>\n\n<pre><code>swap_input.loc[ind_current[0], 'date']\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>pd.DataFrame.squeeze(swap_input.loc[ind_current, 'date'])\n</code></pre>\n\n<hr>\n\n<p><strong><em>explanation</em></strong><br>\n<strong><em>setup</em></strong>  </p>\n\n<pre><code>swap_input = pd.DataFrame(pd.Timestamp('2016-08-31'), [3], ['date'])\nind_current = [3] # this is ind_current being an iterable of some kind\n\nswap_input.loc[ind_current, 'date']\n\n3   2016-08-31\nName: date, dtype: datetime64[ns]\n</code></pre>\n\n<p><strong><em>on the other hand</em></strong>  </p>\n\n<pre><code>swap_input = pd.DataFrame(pd.Timestamp('2016-08-31'), [3], ['date'])\nind_current = 3 # this is ind_current being a single index value\nswap_input.loc[ind_current, 'date']\n\nTimestamp('2016-08-31 00:00:00')\n</code></pre>\n\n<p>Whenever you pass an array like object to an indexer (like loc), you get an array like thing back along that dimension.</p>\n\n<p>So, in your example <code>ind_current</code> is array like and <code>'date'</code> is a scalar.  Thus you get back a 1-dimensional object or a pandas series.  <code>squeeze</code> compresses dimensionality if it can.  So a single item in a one dimensional object can be squeezed to zero dimensions.</p>\n"}], "owner": {"reputation": 2996, "user_id": 3553228, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b48e7a43f7c3cca4a3826be398b8e32a?s=128&d=identicon&r=PG&f=1", "display_name": "Lisa", "link": "https://stackoverflow.com/users/3553228/lisa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 41272953, "answer_count": 1, "score": 2, "last_activity_date": 1482359994, "creation_date": 1482358981, "question_id": 41272913, "link": "https://stackoverflow.com/questions/41272913/print-single-date-string-from-a-dataframe", "title": "print single date string from a dataframe", "body": "<p>I have a dataframe called swap_input, and I want to print the current 'date' to screen.</p>\n\n<pre><code>swap_input.loc[ind_current, 'date']\nOut[26]: \n3   2016-08-31\n</code></pre>\n\n<p>How can I print  '2016-08-31' only?  The method above print the index '3', which is misleading</p>\n\n<p>I tried</p>\n\n<pre><code>swap_input.loc[ind_current, 'date'].values\n</code></pre>\n\n<p>but gives me </p>\n\n<pre><code>Out[27]: array(['2016-08-31T00:00:00.000000000'], dtype='datetime64[ns]')\n</code></pre>\n"}, {"tags": ["python", "shell", "python-3.x", "subprocess"], "comments": [{"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1482360248, "post_id": 41272899, "comment_id": 69747785, "body": "<a href=\"https://docs.python.org/3.5/library/subprocess.html#subprocess.Popen.communicate\" rel=\"nofollow noreferrer\"><code>Popen.communicate</code>: Interact with process: Send data to stdin. Read data from stdout and stderr, until end-of-file is reached. <b>Wait for process to terminate.</b></a>"}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1482369876, "post_id": 41272899, "comment_id": 69750364, "body": "<code>output</code> is what your process wrote to stdout though it will be empty since you aren&#39;t redirecting stdout, <code>err</code> is what it wrote to <code>stderr</code>. You should avoid <code>shell=True</code> and instead have <code>subprocess.Popen([cmd, &#39;-login&#39;], stderr=subprocess.PIPE)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 319, "user_id": 7259469, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2b5661676825c93813d2faa024452d7?s=128&d=identicon&r=PG&f=1", "display_name": "Clarkus978", "link": "https://stackoverflow.com/users/7259469/clarkus978"}, "is_accepted": true, "score": 0, "last_activity_date": 1484086251, "creation_date": 1484086251, "answer_id": 41579330, "question_id": 41272899, "link": "https://stackoverflow.com/questions/41272899/real-time-output-using-login-shell-command-from-python3/41579330#41579330", "title": "Real time output using login shell command from Python3", "body": "<p>I found another way around this situation. Instead of passing the real-time output I prompted for the the user's username and password information and inserted that information into the command. The below function works:</p>\n\n<pre><code>import subprocess\nimport getpass\n\nraidcom = '/usr/bin/raidcom'\n\ndef raidcom_login(cmd=raidcom):\n    \"\"\"Login to CCI and return its output.\"\"\"\n    horcm_user = input(\"Please enter your username for logging into CCI: \")\n    horcm_pass = getpass.getpass(\"Please enter your password: \")\n    try:\n        login_cmd = subprocess.check_output('{cmd} -login {} {}'.format(horcm_user, horcm_pass, cmd=cmd),\n                                 stderr=subprocess.PIPE, shell=True)\n    except subprocess.CalledProcessError:\n        print('Login failed')\n</code></pre>\n"}], "owner": {"reputation": 319, "user_id": 7259469, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2b5661676825c93813d2faa024452d7?s=128&d=identicon&r=PG&f=1", "display_name": "Clarkus978", "link": "https://stackoverflow.com/users/7259469/clarkus978"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "accepted_answer_id": 41579330, "answer_count": 1, "score": 0, "last_activity_date": 1484086251, "creation_date": 1482358929, "last_edit_date": 1482369892, "question_id": 41272899, "link": "https://stackoverflow.com/questions/41272899/real-time-output-using-login-shell-command-from-python3", "title": "Real time output using login shell command from Python3", "body": "<p>I'm trying to get the output of a subprocess to prompt for a login then continue with the rest of the script once logged in. I can get it to prompt for the login, but after entering my username and password I get the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"./login.py\", line 20, in &lt;module&gt;\n    login()\n  File \"./login.py\", line 13, in login\n    output = login_cmd.stderr.read(1)\nValueError: read of closed file.\n</code></pre>\n\n<p>Below is the script:</p>\n\n<pre><code>import subprocess, sys\n\nraidcom = '/usr/bin/raidcom'\n\ndef login(cmd=raidcom):\n    login_cmd = subprocess.Popen('{cmd} -login'.format(cmd=cmd),\n                                 stderr=subprocess.PIPE, shell=True)\n    (output, err) = login_cmd.communicate()\n    while True:\n        output = login_cmd.stderr.read(1)\n        if output == '' and login_cmd.poll() != None:\n            break\n        if output != '':\n            sys.stdout.write(output)\n            sys.stdout.flush()\n\nlogin()\n</code></pre>\n\n<p>When I normally execute the command from the shell it returns nothing after logging in.</p>\n"}, {"tags": ["python", "functional-programming"], "answers": [{"comments": [{"owner": {"reputation": 686, "user_id": 5875532, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4m7Sm.jpg?s=128&g=1", "display_name": "Jordan McQueen", "link": "https://stackoverflow.com/users/5875532/jordan-mcqueen"}, "edited": false, "score": 0, "creation_date": 1482359446, "post_id": 41272993, "comment_id": 69747466, "body": "Got it in just before me. The map needs to know which list instance&#39;s <code>__contains__</code> method it is invoking."}, {"owner": {"reputation": 29554, "user_id": 839957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3ac5824c6cc4817a754a186d6a45a08b?s=128&d=identicon&r=PG", "display_name": "maxymoo", "link": "https://stackoverflow.com/users/839957/maxymoo"}, "edited": false, "score": 0, "creation_date": 1482360611, "post_id": 41272993, "comment_id": 69747917, "body": "thanks for this, great trick  to use the list comprehension to get rid of the lambda, v. pythonic"}], "tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": true, "score": 2, "last_activity_date": 1482359405, "creation_date": 1482359405, "answer_id": 41272993, "question_id": 41272897, "link": "https://stackoverflow.com/questions/41272897/how-can-i-map-list-contains/41272993#41272993", "title": "How can I map list.__contains__?", "body": "<p>You need to flip the argument order, or just use a <code>lambda</code> which is easier.</p>\n\n<pre><code>map(lambda x: 3 in x, [[1,2],[1,3]])\n</code></pre>\n\n<p>Equivalent to a list comprehension, which is a bit shorter:</p>\n\n<pre><code>[3 in x for x in [[1,2],[1,3]]]\n</code></pre>\n"}], "owner": {"reputation": 29554, "user_id": 839957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3ac5824c6cc4817a754a186d6a45a08b?s=128&d=identicon&r=PG", "display_name": "maxymoo", "link": "https://stackoverflow.com/users/839957/maxymoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 41272993, "answer_count": 1, "score": 0, "last_activity_date": 1482359405, "creation_date": 1482358916, "question_id": 41272897, "link": "https://stackoverflow.com/questions/41272897/how-can-i-map-list-contains", "title": "How can I map list.__contains__?", "body": "<p>I'm trying to map the <code>list.__contains__</code>, but am getting the following error</p>\n\n<pre><code>In [31]: map(list.__contains__(3), [[1,2],[1,3]])\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n&lt;ipython-input-31-613ca9e4966b&gt; in &lt;module&gt;()\n----&gt; 1 map(list.__contains__(3), [[1,2],[1,3]])\n\nTypeError: descriptor '__contains__' requires a 'list' object but received a 'int'\n</code></pre>\n\n<p>What am I doing wrong here?</p>\n"}, {"tags": ["python", "loops"], "comments": [{"owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "edited": false, "score": 2, "creation_date": 1482358875, "post_id": 41272851, "comment_id": 69747206, "body": "why don&#39;t you just <code>print(i)</code> and test for yourself?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1482359502, "post_id": 41272851, "comment_id": 69747491, "body": "<code>del outer[i]</code> doesn&#39;t do what you think it does. <code>i</code> is the element, not its index."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1482359526, "post_id": 41272851, "comment_id": 69747498, "body": "Did you mean something like <code>for i, inner in enumerate(outer):</code>?"}, {"owner": {"reputation": 585, "user_id": 4280850, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/d5lAy.jpg?s=128&g=1", "display_name": "Scot Matson", "link": "https://stackoverflow.com/users/4280850/scot-matson"}, "reply_to_user": {"reputation": 5300, "user_id": 4727702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EfsoQ.jpg?s=128&g=1", "display_name": "Yevhen Kuzmovych", "link": "https://stackoverflow.com/users/4727702/yevhen-kuzmovych"}, "edited": false, "score": 0, "creation_date": 1482369143, "post_id": 41272851, "comment_id": 69750209, "body": "@Yevhen Kuzmovych Not sure what you are referencing here."}, {"owner": {"reputation": 585, "user_id": 4280850, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/d5lAy.jpg?s=128&g=1", "display_name": "Scot Matson", "link": "https://stackoverflow.com/users/4280850/scot-matson"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1482369327, "post_id": 41272851, "comment_id": 69750237, "body": "@Barmar I am unfamiliar with the approach using enumerate, I&#39;ll take a look at it. And just to be clear, removing the element is exactly what I want to do. I&#39;m not actually interested in the indexing at all, but when I delete the element the current <code>i</code> becomes the previous <code>i</code>, which is really why I had this question to begin with."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1482369392, "post_id": 41272851, "comment_id": 69750255, "body": "I understand that you want to delete the element. But <code>i</code> isn&#39;t the index of the element, it&#39;s a variable that holds the contents of the element. So there&#39;s no such thing as <code>outer[i]</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1482369447, "post_id": 41272851, "comment_id": 69750272, "body": "You generally should not modify a list while you&#39;re iterating over it with <code>for var in list</code>. There are a number of SO questions that address this and show the proper workarounds."}], "answers": [{"comments": [{"owner": {"reputation": 585, "user_id": 4280850, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/d5lAy.jpg?s=128&g=1", "display_name": "Scot Matson", "link": "https://stackoverflow.com/users/4280850/scot-matson"}, "edited": false, "score": 0, "creation_date": 1482368812, "post_id": 41273017, "comment_id": 69750136, "body": "Thanks for this, incorporating a continue into this was what I figured would be necessary. I try to avoid using continue/break where I can and usually in situations such as this there is probably a better way to more pythonically implement this logic.  In regards to not deleting elements of a container that I am looping over; this is also something I am aware of. Realistically making a copy and deleting elements out of it would be a better way to go. I can&#39;t find the exact reference any longer, but this code was partially a solution to another question, however it did not clarify this issue."}], "tags": [], "owner": {"reputation": 8239, "user_id": 4056181, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/G0SRK.jpg?s=128&g=1", "display_name": "jmd_dk", "link": "https://stackoverflow.com/users/4056181/jmd-dk"}, "is_accepted": true, "score": 1, "last_activity_date": 1482359520, "creation_date": 1482359520, "answer_id": 41273017, "question_id": 41272851, "link": "https://stackoverflow.com/questions/41272851/inner-loop-behavior-after-element-deletion/41273017#41273017", "title": "Inner Loop Behavior After Element Deletion", "body": "<p>No, Python is not \"smart enough\" to do what you are assuming. Some hard-coded <code>continue</code>s/<code>break</code>s are definitely needed if you do not want the inner loop to continue after the deletion.</p>\n\n<p>In general, you should not delete elements of a container that you are looping over. It is not clear to me what exactly you are doing in your example code, but one example where it is allowed (though still frown upon) is to loop backwards over a list (is that what you are attempting?) and delete the current or later element.</p>\n\n<p>As an aside, are you sure that you want to delete the <code>i</code>'th element of <code>outer</code>, when <code>i</code> is not an index but the actual <code>i</code>'th element itself?</p>\n"}], "owner": {"reputation": 585, "user_id": 4280850, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/d5lAy.jpg?s=128&g=1", "display_name": "Scot Matson", "link": "https://stackoverflow.com/users/4280850/scot-matson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 41273017, "answer_count": 1, "score": 1, "last_activity_date": 1482359520, "creation_date": 1482358652, "question_id": 41272851, "link": "https://stackoverflow.com/questions/41272851/inner-loop-behavior-after-element-deletion", "title": "Inner Loop Behavior After Element Deletion", "body": "<p>I have a large list of elements which contain other lists and dictionary values. The basic structure is:</p>\n\n<pre><code>for i in outer:\n    for j in range(len(inner)-1,-1,-1):\n        if j:\n            del outer[i]\n</code></pre>\n\n<p>So the presence of data in a nested structure dictates whether we retain that entire element in the outer list. Deleting the elements creates an immediate shift in the outer list.</p>\n\n<p>Would I need to explicitly continue the control logic or does this occur implicitly for me?</p>\n\n<pre><code>for i in outer:\n    for j in range(len(inner)-1,-1,-1):\n        if j:\n            del outer[i]\n            continue\n</code></pre>\n\n<p>I am currently using the former setup which appears to be giving me my desired results while running tests. I guess I am simply trying to determine if the inner loop needlessly will run after the call to <code>del</code> or if Python is smart enough to know that the previous ith element has been removed and it is no longer necessary to continue iterating over its internals.</p>\n"}, {"tags": ["python", "dictionary", "append"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1482358158, "post_id": 41272705, "comment_id": 69746913, "body": "Explicitly. There are several obvious ways to implement <code>x + y</code> for <code>dict</code>s, including your desired result, but none of them are obviously better than the others, so Python does not provide any of them."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1482358255, "post_id": 41272705, "comment_id": 69746960, "body": "Are <code>x</code> and <code>y</code> guaranteed to have the same set of keys?"}, {"owner": {"reputation": 10872, "user_id": 3135417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b989009ea961e780793f80ea6d53240?s=128&d=identicon&r=PG&f=1", "display_name": "Abdou", "link": "https://stackoverflow.com/users/3135417/abdou"}, "edited": false, "score": 1, "creation_date": 1482358406, "post_id": 41272705, "comment_id": 69747030, "body": "<code>{k:&quot;&quot;.join(v) for v in zip(x.values(), y.values()) for k in y}</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1482358234, "post_id": 41272742, "comment_id": 69746949, "body": "The OP left this unspecified, but this approach omits keys from <code>y</code> that aren&#39;t present in <code>x</code>."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 2, "creation_date": 1482358266, "post_id": 41272742, "comment_id": 69746963, "body": "And if they don&#39;t? Perhaps use <code>.get(k, &#39;&#39;)</code>?"}, {"owner": {"reputation": 5300, "user_id": 4727702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EfsoQ.jpg?s=128&g=1", "display_name": "Yevhen Kuzmovych", "link": "https://stackoverflow.com/users/4727702/yevhen-kuzmovych"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1482358364, "post_id": 41272742, "comment_id": 69747009, "body": "@roganjosh great idea. Updated"}, {"owner": {"reputation": 981, "user_id": 3033594, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qgRRk.jpg?s=128&g=1", "display_name": "testname123", "link": "https://stackoverflow.com/users/3033594/testname123"}, "edited": false, "score": 0, "creation_date": 1482366523, "post_id": 41272742, "comment_id": 69749590, "body": "excuse me?  what&#39;s awful about that question?"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 981, "user_id": 3033594, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qgRRk.jpg?s=128&g=1", "display_name": "testname123", "link": "https://stackoverflow.com/users/3033594/testname123"}, "edited": false, "score": 1, "creation_date": 1482366662, "post_id": 41272742, "comment_id": 69749630, "body": "@BrocolliRob no need to beat around the bush: Your question is bad because it doesn&#39;t show any attempt of your own, just asks for a solution for a problem that one can definitely solve with a little thought &quot;manually&quot;, but maybe less elegant. I see that there might be a few problems when some keys are in <code>y</code> that aren&#39;t in <code>x</code>, but you could at least have shown what you&#39;ve tried to give the people here something to start. The way you asked was plain lazy."}, {"owner": {"reputation": 981, "user_id": 3033594, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qgRRk.jpg?s=128&g=1", "display_name": "testname123", "link": "https://stackoverflow.com/users/3033594/testname123"}, "edited": false, "score": 0, "creation_date": 1482367595, "post_id": 41272742, "comment_id": 69749853, "body": "Oh please, how high and mighty of you.  How do you know what I&#39;ve done to try and solve this?  Am I supposed to put up the last 40 minutes of syntax errors and complaints from the interpreter to somehow prove to you that I&#39;ve done my homework?  I know how to Google and I know I don&#39;t know what I don&#39;t know. Python has many subtleties that one may not run into, and this instance is certainly one of them. My question was succinct and to the point, and your attitude that since I didn&#39;t properly satisfy your need to see what I have tried before coming here and asking for help is just plain rude."}, {"owner": {"reputation": 981, "user_id": 3033594, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qgRRk.jpg?s=128&g=1", "display_name": "testname123", "link": "https://stackoverflow.com/users/3033594/testname123"}, "edited": false, "score": 0, "creation_date": 1482367677, "post_id": 41272742, "comment_id": 69749882, "body": "And thank you @YevhenKuzmovych for the answer without any judgment from the pulpit of the religion of SO."}], "tags": [], "owner": {"reputation": 5300, "user_id": 4727702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EfsoQ.jpg?s=128&g=1", "display_name": "Yevhen Kuzmovych", "link": "https://stackoverflow.com/users/4727702/yevhen-kuzmovych"}, "is_accepted": false, "score": 5, "last_activity_date": 1482366540, "last_edit_date": 1482366540, "creation_date": 1482358111, "answer_id": 41272742, "question_id": 41272705, "link": "https://stackoverflow.com/questions/41272705/append-similar-keys-from-a-dictionary/41272742#41272742", "title": "Append similar keys from a Dictionary", "body": "<pre><code>z = { k : x.get(k, '') + y.get(k, '') for k in x.keys() | y.keys() }\n</code></pre>\n\n<p>This is a dictionary expression (<code>{...}</code>), mapping every element <code>k</code> from the set combination (<code>|</code>) of both <code>x.keys()</code> and <code>y.keys()</code> to the concatenation of the respective values (or concatenation of a present value and empty string, as specified as the default argument of <code>get</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "is_accepted": false, "score": 0, "last_activity_date": 1482358370, "creation_date": 1482358370, "answer_id": 41272793, "question_id": 41272705, "link": "https://stackoverflow.com/questions/41272705/append-similar-keys-from-a-dictionary/41272793#41272793", "title": "Append similar keys from a Dictionary", "body": "<p>Make a copy of <code>x</code> and then enumerate over all keys of <code>y</code> and append their values to the values in the copy. Use <code>z.get(key, '')</code> to catch the case of missing values.</p>\n\n<pre><code>z = x.copy()\nfor key in y.keys():\n   z[key] = z.get(key, '') + y[key]\n</code></pre>\n\n<p>You can generalize this to having more than two dicts</p>\n\n<pre><code>z = {}\nmore_than_two = [x, y]\nfor each in more_than_two:\n    for key in each.keys():\n        z[key] = z.get(key, '') + each[key]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": false, "score": 0, "last_activity_date": 1482358525, "creation_date": 1482358525, "answer_id": 41272828, "question_id": 41272705, "link": "https://stackoverflow.com/questions/41272705/append-similar-keys-from-a-dictionary/41272828#41272828", "title": "Append similar keys from a Dictionary", "body": "<p>This program takes an arbitrary number of dictionaries and sums them. It does something useful even if there are unique keys in some of your dicts:</p>\n\n<pre><code>def do_sum(*args):\n    result = dict()\n    for d in args:\n        for k, v in d.items():\n            result.setdefault(k, \"\")\n            result[k] = result.get(k, \"\") + v\n    return result\n\nx={'a':\"a\",'b':\"b\"}\ny={'a':\"c\",'b':\"d\"}\nz = do_sum(x, y)\nassert z=={'a':\"ac\",'b':\"bd\"}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1482363362, "post_id": 41272845, "comment_id": 69748809, "body": "Deep copy isn&#39;t really necessary."}, {"owner": {"reputation": 15599, "user_id": 4575071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9bceb35fc57e732ca44911b801b12e?s=128&d=identicon&r=PG&f=1", "display_name": "ettanany", "link": "https://stackoverflow.com/users/4575071/ettanany"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1482363531, "post_id": 41272845, "comment_id": 69748848, "body": "@juanpa.arrivillaga, I agree. <code>copy.copy()</code> would be enough!"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1482363585, "post_id": 41272845, "comment_id": 69748859, "body": "Or just <code>x.copy()</code>"}], "tags": [], "owner": {"reputation": 15599, "user_id": 4575071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9bceb35fc57e732ca44911b801b12e?s=128&d=identicon&r=PG&f=1", "display_name": "ettanany", "link": "https://stackoverflow.com/users/4575071/ettanany"}, "is_accepted": false, "score": 0, "last_activity_date": 1482364788, "last_edit_date": 1482364788, "creation_date": 1482358624, "answer_id": 41272845, "question_id": 41272705, "link": "https://stackoverflow.com/questions/41272705/append-similar-keys-from-a-dictionary/41272845#41272845", "title": "Append similar keys from a Dictionary", "body": "<p>Try the following:</p>\n\n<pre><code>import copy\n\nz = copy.copy(x)  # We use copy to avoid changing x in the following for loop\n\nfor k in z.keys():\n    z[k] += y[k]\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>&gt;&gt;&gt; z\n{'a': 'ac', 'b': 'bd'}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1129, "user_id": 6348578, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ade648e808fe790082a9879bb39de29f?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/6348578/noah"}, "is_accepted": false, "score": 0, "last_activity_date": 1482360102, "creation_date": 1482360102, "answer_id": 41273139, "question_id": 41272705, "link": "https://stackoverflow.com/questions/41272705/append-similar-keys-from-a-dictionary/41273139#41273139", "title": "Append similar keys from a Dictionary", "body": "<p>Using <code>collections.defaultdict</code>:</p>\n\n<pre><code>import collections\n\nx = {'a': 'a', 'b': 'b'}\ny = {'a': 'c', 'b': 'd'}\n\nz = collections.defaultdict(str)\n\nfor d in (x, y):\n    for k, v in d.items():\n        z[k] += v\n\ndict(z)\n# {'b': 'bd', 'a': 'ac'}\n</code></pre>\n"}], "owner": {"reputation": 981, "user_id": 3033594, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qgRRk.jpg?s=128&g=1", "display_name": "testname123", "link": "https://stackoverflow.com/users/3033594/testname123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1482366540, "creation_date": 1482357957, "question_id": 41272705, "link": "https://stackoverflow.com/questions/41272705/append-similar-keys-from-a-dictionary", "title": "Append similar keys from a Dictionary", "body": "<p>I have a dictionary that looks like this:</p>\n\n<pre><code>x={'a':\"a\",'b':\"b\"}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>y={'a':\"c\",'b':\"d\"}\n</code></pre>\n\n<p>I want this:</p>\n\n<pre><code>z={'a':\"ac\",'b':\"bd\"}\n</code></pre>\n\n<p>How do I do this with Python?</p>\n"}, {"tags": ["python", "unit-testing", "python-unittest"], "answers": [{"tags": [], "owner": {"reputation": 1370, "user_id": 2320784, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/976f615e3c8cb6be2b8364568c806428?s=128&d=identicon&r=PG", "display_name": "A.D", "link": "https://stackoverflow.com/users/2320784/a-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1482357888, "creation_date": 1482357888, "answer_id": 41272690, "question_id": 41272620, "link": "https://stackoverflow.com/questions/41272620/good-way-to-writing-unit-test-in-python/41272690#41272690", "title": "Good way to writing unit test in python", "body": "<p>Have you looked at the documentation? See <a href=\"https://docs.python.org/2/library/doctest.html\" rel=\"nofollow noreferrer\">doctest</a>. They are an easy way to integrate unit tests into python code. Another option is the <a href=\"https://docs.python.org/2/library/unittest.html\" rel=\"nofollow noreferrer\">unittest</a> framework.</p>\n"}], "owner": {"reputation": 87, "user_id": 7164418, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7a540e091ce26f50a7a48c120c6a87e4?s=128&d=identicon&r=PG&f=1", "display_name": "Damian Wysocki", "link": "https://stackoverflow.com/users/7164418/damian-wysocki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1482357888, "creation_date": 1482357596, "question_id": 41272620, "link": "https://stackoverflow.com/questions/41272620/good-way-to-writing-unit-test-in-python", "title": "Good way to writing unit test in python", "body": "<p>I have simply 'to do' app in python 2.7 and I wrote for this some unit test. This is my first time with python unit test and I just wanna to know idea of unit test.</p>\n\n<ol>\n<li>Someone can tell me whether I'm going in the right direction?</li>\n<li>How to improve this tests?</li>\n<li>How to check message in IndexError is correct? for this (\"<em>IndexError('<strong>Note doesn\\'t exist</strong>')</em>\" or IndexError('<strong>Returned more then one entry</strong>') )  </li>\n</ol>\n\n<p>App: </p>\n\n<pre><code># coding: utf-8\nfrom __future__ import unicode_literals\nfrom shutil import copyfile\nimport json\nimport os\n\nDATABASE = 'notes_data/notes.json'\nBOARDS = ['to do', 'in progress', 'done']\n\n\nclass NotesManagerMixin(object):\n\n    def count(self):\n        return len(self.notes)\n\n    def filter(self, *args, **kwargs):\n        result = self.notes\n        for key, value in kwargs.iteritems():\n            result = [\n                note for note in result\n                if getattr(note, key, None) == value or \n                note.message.startswith(str(value)) or \n                note.message.endswith(str(value))\n            ]\n        return NotesQueryset(result)\n\n    def get(self, *args, **kwargs):\n        notes = self.filter(*args,**kwargs)\n        if notes.count() == 0:\n            raise IndexError('Note doesn\\'t exist')\n        elif notes.count() == 1:\n            return notes[0]\n        else:\n            raise IndexError('Returned more then one entry')\n\n    def first(self):\n        return self.notes[0]\n\n    def last(self):\n        return self.notes[-1]\n\n\nclass NotesQueryset(NotesManagerMixin):\n\n    def __init__(self, notes):\n        self.notes = [note for note in notes]\n\n    def update(self, *args, **kwargs):\n        for note in self.notes:\n            for key, value in kwargs.items():\n                setattr(note, key, value)\n            note.save()\n        return self\n\n\n\n    def delete(self):\n        for note in self.notes:\n            note.delete()\n        return self\n\n\n    def __getitem__(self, idx):\n        return self.notes[idx]\n\n    def __str__(self):\n        return str(self.notes)\n\n    def __repr__(self):\n        return self.__str__()\n\n\nclass NotesManager(NotesManagerMixin):\n\n    def __init__(self):\n        self.notes = []\n\n    def __iter__(self):\n        return self.next()\n\n    def __generate_id(self):\n        \"\"\"\n            Funkcja pomocnicza do pobrania pewnej wolnej warto\u015bci indexu.\n        \"\"\"\n        try:\n            return max(note.id for note in self.notes) + 1\n        except ValueError:\n            return 1\n\n    def all(self):\n        return NotesQueryset(self.notes)\n\n    def add(self, idx, board, message):\n        self.notes.append(Note(idx=idx, board=board, message=message))\n\n    def create(self, board, message):\n        note = Note(\n            idx=self.__generate_id(),\n            board=board,\n            message=message\n        )\n        note.clean()\n\n        self.notes.append(note)\n        note.save()\n\n        return note\n\n    def next(self):\n        for note in self.notes:\n            yield note\n\n    def to_dict(self):\n        return [note.to_dict() for note in self.notes]\n\n\nclass Note(object):\n    objects = NotesManager()\n\n    def __init__(self, idx, board, message):\n        self.id = idx\n        self.board = board\n        self.message = message\n\n    def __str__(self):\n        return 'ID: {}, Board: {}, Message: {}'.format(\n            self.id,\n            self.board,\n            self.message\n        )\n\n    def __repr__(self):\n        return self.__str__()\n\n    def clean(self):\n        if not self.message:\n            raise ValueError('Message is required')\n\n        if self.board not in BOARDS:\n            raise ValueError('Board \"{}\" doesn\\'t exists'.format(self.board))\n\n        if type(self.id) != int:\n            raise ValueError('Note id \"{}\" is invalid'.format(self.id))\n\n    def save(self):\n        for key, note in enumerate(self.objects):\n            if note.id == self.id:\n                self.objects.notes[key] = self\n                break\n\n        with open(DATABASE, 'w') as database_file:\n            json.dump(self.objects.to_dict(), database_file, indent=4)\n\n        return True\n\n    def delete(self):\n        for key, note in enumerate(self.objects.notes):\n            if note.id == self.id:\n                self.objects.notes.pop(key)\n\n        with open(DATABASE, 'w') as database_file:\n            json.dump(self.objects.to_dict(), database_file, indent=4) \n\n\n    def to_dict(self):\n        return {\n            'id': self.id,\n            'message': self.message,\n            'board': self.board\n        }\n\n\ndef load_initial_data():\n\n    with open(DATABASE, 'r') as database_file:\n        json_data = json.load(database_file, encoding='utf-8')\n\n    for item in json_data:\n        Note.objects.add(\n            idx=item['id'],\n            board=item['board'],\n            message=item['message'],\n        )\n\n\nload_initial_data()\n</code></pre>\n\n<p>unit tests:</p>\n\n<pre><code>import unittest\nfrom notes_manager_v2 import NotesQueryset, Note, load_initial_data, NotesManagerMixin\n\nclass TestNotesQueryset(unittest.TestCase):\n\n    def test_filter(self):\n        actual = Note.objects.all().filter(board='in progress') # get all notes with board 'in progress'\n        expected = []\n        for note in Note.objects.all():\n            if note.board == 'in progress':\n                expected.append(note)\n        self.assertItemsEqual(actual, expected)\n\n    def test_get(self):\n        actual = [Note.objects.all().get(id=1)] # get note with method get\n        expected = []\n        for note in Note.objects.all(): # search note with index 1\n            if note.id == 1:\n                expected.append(note)\n        self.assertEqual(actual, expected)\n\n    def test_get_fail_1(self):\n        self.assertRaises(IndexError, lambda:Note.objects.all().get(id=9868976)) # thos note dont exist should raise IndexError\n\n\n    def test_update(self):\n        from_board = 'to do'\n        to_board = 'done'\n        before_change = Note.objects.filter(board=from_board) # use filter method to get all notes with board 'to do'\n        actual = Note.objects.filter(board=from_board).update(board=to_board) # update all board \n        self.assertNotEqual(before_change, actual) # check for difference\n        notes = Note.objects.all()\n        for note in actual:\n            self.assertIn(note, notes) # check notes are updated \n\n\n\n    def test_delete(self):\n        to_delete = Note.objects.filter(id=2).delete() # find note with filter method and delete it \n        notes = Note.objects.all()\n        self.assertNotIn(to_delete, notes) \n\n\n    def test_create(self):\n        new_note = Note.objects.create(message='lorem ipsum', board='in progress') # create new note\n        notes = Note.objects.all()\n        self.assertIn(new_note, notes) # \n\n\n\n\n\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre>\n"}, {"tags": ["python", "xml", "python-3.x", "csv"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4879582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9a4f19adff0b5998682f85a9f0edc77?s=128&d=identicon&r=PG&f=1", "display_name": "Jennifer", "link": "https://stackoverflow.com/users/4879582/jennifer"}, "edited": false, "score": 0, "creation_date": 1482433811, "post_id": 41275107, "comment_id": 69782713, "body": "Of course. Thank you for pointing that out. Again thanks for seeing that."}], "tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": false, "score": 1, "last_activity_date": 1482375248, "creation_date": 1482375248, "answer_id": 41275107, "question_id": 41272531, "link": "https://stackoverflow.com/questions/41272531/python-3-xml-tag-value-not-being-written-to-csv-file/41275107#41275107", "title": "Python 3: XML Tag Value not being written to csv file", "body": "<p>In the line <code>dcdata.append('rt')</code> there is no need for the quotes. Try <code>dcdata.append(rt)</code>. Similarly, there are unnecessary quotes in the <code>ce</code> and <code>lang</code> lines.</p>\n"}], "owner": {"reputation": 11, "user_id": 4879582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9a4f19adff0b5998682f85a9f0edc77?s=128&d=identicon&r=PG&f=1", "display_name": "Jennifer", "link": "https://stackoverflow.com/users/4879582/jennifer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482375248, "creation_date": 1482357240, "last_edit_date": 1482375167, "question_id": 41272531, "link": "https://stackoverflow.com/questions/41272531/python-3-xml-tag-value-not-being-written-to-csv-file", "title": "Python 3: XML Tag Value not being written to csv file", "body": "<p>My python 3 script takes an xml file and creates a csv file. </p>\n\n<p>Small excerpt of xml file:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n    &lt;metadata&gt;\n    &lt;dc&gt;\n    &lt;title&gt;Golden days for boys and girls, 1895-03-16, v. XVI #17&lt;/title&gt;\n    &lt;subject&gt;Children's literature--Children's periodicals&lt;/subject&gt;\n    &lt;description&gt;Archives &amp;amp; Special Collections at the Thomas J. Dodd Research Center, University of Connecticut Libraries&lt;/description&gt;\n    &lt;publisher&gt;James Elverson, 1880-&lt;/publisher&gt;\n    &lt;date&gt;1895-06-15&lt;/date&gt;\n    &lt;type&gt;Text | periodicals&lt;/type&gt;\n    &lt;format&gt;image/jp2&lt;/format&gt;\n    &lt;handle&gt;http://hdl.handle.net/11134/20002:860074494&lt;/handle&gt;\n    &lt;accessionNumber/&gt;\n    &lt;barcode/&gt;\n    &lt;identifier&gt;20002:860074494 | local:\u00a0868010272 | local:\u00a0997186613502432 | local:\u00a039153019382870 | hdl:\u00a0 | http://hdl.handle.net/11134/20002:860074494&lt;/identifier&gt;\n    &lt;rights&gt;These Materials are provided for educational and research purposes only. The University of Connecticut Libraries hold the copyright except where noted. Permission must be obtained in writing from the University of Connecticut Libraries and/or theowner(s) of the copyright to publish reproductions or quotations beyond \"fair use.\" | The collection is open and available for research.&lt;/rights&gt;\n    &lt;creator/&gt;\n    &lt;relation/&gt;\n    &lt;coverage/&gt;\n    &lt;language/&gt;\n    &lt;/dc&gt;\n    &lt;/metadata&gt;\n</code></pre>\n\n<p>Python3 code:</p>\n\n<pre><code>import csv\nimport xml.etree.ElementTree as ET\n\ntree = ET.ElementTree(file='ctda_set1_uniqueTags.xml')\ndoc = ET.parse(\"ctda_set1_uniqueTags.xml\")\nroot = tree.getroot()\n\noaidc_data = open('ctda_set1_uniqueTags.csv', 'w', encoding='utf-8')\n\ntitles = 'dc/title'\nsubjects = 'dc/subject'\n\ncsvwriter = csv.writer(oaidc_data)\noaidc_head = ['Title', 'Subject', 'Description', 'Publisher', 'Date', 'Type', 'Format', 'Handle', 'Accession Number', 'Barcode', 'Identifiers', 'Rights', 'Creator', 'Relation', 'Coverage', 'Language']\n\ncount = 0\nfor member in root.findall('dc'):\n    if count == 0:\n       csvwriter.writerow(oaidc_head)\n       count = count + 1\n\n    dcdata = []\n    titles = member.find('title').text\n    dcdata.append(titles)\n    subjects = member.find('subject').text\n    dcdata.append(subjects)\n    descriptions = member.find('description').text\n    dcdata.append(descriptions)\n    publishers = member.find('publisher').text\n    dcdata.append(publishers)\n    dates = member.find('date').text\n    dcdata.append(dates)\n    types = member.find('type').text\n    dcdata.append(types)\n    formats = member.find('format').text\n    dcdata.append(formats)\n    handle = member.find('handle').text\n    dcdata.append(handle)\n    accessionNo = member.find('accessionNumber').text\n    dcdata.append(accessionNo)\n    barcodes = member.find('barcode').text\n    dcdata.append(barcodes)\n    identifiers = member.find('identifier').text\n    dcdata.append(identifiers)\n    rt = member.find('rights').text\n    print(member.find('rights').text)\n    dcdata.append('rt')\n    ct = member.find('creator').text\n    dcdata.append('ct')\n    rt = member.find('relation').text\n    dcdata.append('rt')\n    ce = member.find('coverage').text\n    dcdata.append('ce')\n    lang = member.find('language').text\n    dcdata.append('lang')\n    csvwriter.writerow(dcdata)\n\noaidc_data.close()\n</code></pre>\n\n<hr>\n\n<p>Everything works as expected except for rt, ce, and lang. What happens is that in the csv, all the data is written with the comma delimiter. For rt, the value is always rt, for ce, ce, lang, lang, etc.</p>\n\n<p>Here's a snippet of the output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Title,Subject,Description,Publisher,Date,Type,Format,Handle,Accession Number,Barcode,Identifiers,Rights,Creator,Relation,Coverage,Language\n\n\"Golden days for boys and girls, 1895-03-16, v. XVI #17\",Children's literature--Children's periodicals,\"Archives &amp; Special Collections at the Thomas J. Dodd Research Center, University of Connecticut Libraries\",\"James Elverson, 1880-\",1895-06-15,Text | periodicals,image/jp2,hdl.handle.net/11134/20002:860074494,,,20002:860074494 | local:\u00a0868010272 | local:\u00a0997186613502432 | local:\u00a039153019382870,**rt,ct,rt,ce,lang**\n</code></pre>\n\n<hr>\n\n<p>Some of the rights statements get very long - perhaps that's the issue. That's why I added the <code>print(member.find('rights'))</code> to see the output. The text is printed just fine. The text just isn't written to the csv. What I'd like is to have the value or text written for these xml tags. Any help would be appreciated.</p>\n\n<p>Thanks.\nJennifer</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "edited": false, "score": 0, "creation_date": 1482357303, "post_id": 41272498, "comment_id": 69746505, "body": "Can the filter step be done separately and before shuffling?"}, {"owner": {"reputation": 10652, "user_id": 5666087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0eeb62bd4c02b40a8751ab3368368d02?s=128&d=identicon&r=PG&f=1", "display_name": "jakub", "link": "https://stackoverflow.com/users/5666087/jakub"}, "edited": false, "score": 0, "creation_date": 1482357311, "post_id": 41272498, "comment_id": 69746507, "body": "Are you on OSX by any chance? If you are, look at this <a href=\"http://stackoverflow.com/questions/11662960/ioerror-errno-22-invalid-argument-when-reading-writing-large-bytestring\">related SO question</a>"}, {"owner": {"reputation": 496, "user_id": 6061661, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c9b064b1ae978c886a3990d2e08fa7c5?s=128&d=identicon&r=PG&f=1", "display_name": "jbird", "link": "https://stackoverflow.com/users/6061661/jbird"}, "reply_to_user": {"reputation": 10652, "user_id": 5666087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0eeb62bd4c02b40a8751ab3368368d02?s=128&d=identicon&r=PG&f=1", "display_name": "jakub", "link": "https://stackoverflow.com/users/5666087/jakub"}, "edited": false, "score": 0, "creation_date": 1482357515, "post_id": 41272498, "comment_id": 69746609, "body": "@Jakub Yes I am running the code on an iMac."}, {"owner": {"reputation": 496, "user_id": 6061661, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c9b064b1ae978c886a3990d2e08fa7c5?s=128&d=identicon&r=PG&f=1", "display_name": "jbird", "link": "https://stackoverflow.com/users/6061661/jbird"}, "reply_to_user": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "edited": false, "score": 0, "creation_date": 1482357579, "post_id": 41272498, "comment_id": 69746635, "body": "@AlexReynolds no, the filtering is done in a separate Java module (along with a lot of other logic) that depends on pre-existing java classes"}], "answers": [{"comments": [{"owner": {"reputation": 35962, "user_id": 1399279, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e2e566682f50d53a06a121d82f7ed8de?s=128&d=identicon&r=PG", "display_name": "SethMMorton", "link": "https://stackoverflow.com/users/1399279/sethmmorton"}, "edited": false, "score": 1, "creation_date": 1482358117, "post_id": 41272559, "comment_id": 69746892, "body": "Or possibly more succinctly: <code>fout.writelines(line + &#39;\\n&#39; for line in lines)</code>"}], "tags": [], "owner": {"reputation": 5300, "user_id": 4727702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EfsoQ.jpg?s=128&g=1", "display_name": "Yevhen Kuzmovych", "link": "https://stackoverflow.com/users/4727702/yevhen-kuzmovych"}, "is_accepted": true, "score": 2, "last_activity_date": 1482357843, "last_edit_date": 1495535442, "creation_date": 1482357328, "answer_id": 41272559, "question_id": 41272498, "link": "https://stackoverflow.com/questions/41272498/ioerror-writing-very-large-file/41272559#41272559", "title": "IOError writing very large file", "body": "<p>You don't need to join your lines in one big line. You are probably getting a line that is too long. Try this:</p>\n\n<pre><code>def write_lines(filename, lines):\n    with io.open(filename, 'w', encoding='utf-8') as fout:\n        for line in lines:\n            fout.write(line + '\\n')\n</code></pre>\n\n<p>And look through this <a href=\"https://stackoverflow.com/questions/15141761/region-ioerror-errno-22-invalid-mode-w-or-filename\">question</a>.</p>\n"}], "owner": {"reputation": 496, "user_id": 6061661, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c9b064b1ae978c886a3990d2e08fa7c5?s=128&d=identicon&r=PG&f=1", "display_name": "jbird", "link": "https://stackoverflow.com/users/6061661/jbird"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 41272559, "answer_count": 1, "score": 0, "last_activity_date": 1482357843, "creation_date": 1482357122, "last_edit_date": 1495542400, "question_id": 41272498, "link": "https://stackoverflow.com/questions/41272498/ioerror-writing-very-large-file", "title": "IOError writing very large file", "body": "<p>I have a python module that is responsible for doing some preprocessing/tokenizing on a dataset that I want to use.  The dataset is a 144M line text file that I read into memory, split into different pieces, shuffle, then write to new files.  Previously, writing was done by the following function:</p>\n\n<pre><code>def write_lines(filename, lines):\nwith io.open(filename, 'w', encoding='utf-8') as fout:\n    fout.write('\\n'.join(lines))\n</code></pre>\n\n<p>When trying to do this on the 144M line dataset, I get the <code>IOError: [Errno 22]</code> error.  However, there are no issues running the exact same code on a 6M line dataset.  Before sending the dataset to this module, it is ran through a filtering service that ensures only the characters matching the pattern <code>[\\x00-\\x7f]</code> are in the file, as described in <a href=\"https://stackoverflow.com/questions/5008422/how-to-remove-high-ascii-characters-from-string-like-in-java\">this post</a>.</p>\n\n<p>I am running python2.7 in an Anaconda environment.  Some of the code I am using came from an open source project that performs some complicated string processing logic that does not work on Python3 no matter what I have tried, so switching to Python3 is not an option (if that would even help).</p>\n\n<p>Is there any way a larger dataset could be causing this error?  I would  have thought that the only thing that could go wrong is a memory error but <code>Errno 22</code> does not seem to have anything to do with memory.</p>\n"}, {"tags": ["python", "button", "canvas", "tkinter"], "answers": [{"tags": [], "owner": {"reputation": 4469, "user_id": 6342812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/19e9e8f53f02cc9013f635a6bb67647d?s=128&d=identicon&r=PG&f=1", "display_name": "rassar", "link": "https://stackoverflow.com/users/6342812/rassar"}, "is_accepted": true, "score": 3, "last_activity_date": 1482358581, "creation_date": 1482358581, "answer_id": 41272836, "question_id": 41272473, "link": "https://stackoverflow.com/questions/41272473/multiple-buttons-on-a-tkinter-canvas/41272836#41272836", "title": "multiple buttons on a tkinter canvas", "body": "<p>Your second button code in line 14 says <code>window=button1</code>. Change it to:</p>\n\n<pre><code>button2_window = convas.create_window(10, 50, anchor=NW, window=button2)\n</code></pre>\n\n<p>So that <code>button2</code> shows up on its window like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Xbm9v.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Xbm9v.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 684, "user_id": 4483819, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2083761ea3b1b6ef97a8ae0ca3c8165e?s=128&d=identicon&r=PG&f=1", "display_name": "Heinz", "link": "https://stackoverflow.com/users/4483819/heinz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1692, "favorite_count": 0, "accepted_answer_id": 41272836, "answer_count": 1, "score": 0, "last_activity_date": 1482358581, "creation_date": 1482357013, "last_edit_date": 1482358552, "question_id": 41272473, "link": "https://stackoverflow.com/questions/41272473/multiple-buttons-on-a-tkinter-canvas", "title": "multiple buttons on a tkinter canvas", "body": "<p>I need multiple buttons on a canvas in Python Tkinter. The purpose is to draw connection lines among the buttons. My code:</p>\n\n<pre><code>from tkinter import *\n\nroot=Tk()\nconvas = Canvas(root)\nconvas.pack()\nbutton1 = Button(text = \"button 1\")\nbutton1.configure(width = 0, activebackground = \"#D2D2D2\", relief = GROOVE)\nbutton1_window = convas.create_window(10, 10, anchor=NW, window=button1)\nbutton1.update()\nprint (button1.winfo_geometry())\n\nbutton2 = Button(text = \"button 2\")\nbutton2.configure(width = 0, activebackground = \"#D2D2D2\", relief = GROOVE)\nbutton2_window = convas.create_window(10, 50, anchor=NW, window=button1)\nbutton2.update()\nprint (button2.winfo_geometry())\nroot.mainloop()\n</code></pre>\n\n<p>running this code, I always just got <strong>button 1</strong> in the canvas although I tried to adjust the location in the <code>create_window</code> function, and the <code>anchor=</code>. the <strong>button 2</strong> does not show in the canvas at all.</p>\n\n<p>The two prints return:\n\n<blockquote>\n  <p>62x26+10+10<br>\n  1x1+0+0.</p>\n</blockquote>\n\n<p>Based on the output <strong>1x1+0+0</strong>, the <strong>button 2</strong> seems not being rendered. what I am doing wrong?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>My mistake:</p>\n\n<pre><code>button2_window = convas.create_window(10, 50, anchor=NW, window=button1)\n</code></pre>\n\n<p>should be </p>\n\n<pre><code>button2_window = convas.create_window(10, 50, anchor=NW, window=button2)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "module", "package"], "comments": [{"owner": {"reputation": 4901, "user_id": 6485881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4NDn3.jpg?s=128&g=1", "display_name": "Maurice", "link": "https://stackoverflow.com/users/6485881/maurice"}, "edited": false, "score": 0, "creation_date": 1482357241, "post_id": 41272454, "comment_id": 69746482, "body": "Can you please show us the code the code in the <code>module</code> module and <code>package</code> package and the way you are calling it?"}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 2, "creation_date": 1482357692, "post_id": 41272454, "comment_id": 69746701, "body": "probably want to call it like <code>package.module.printTest()</code>"}, {"owner": {"reputation": 31, "user_id": 7151232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d82b4e6e7a319ef0a401c62aabe1a61?s=128&d=identicon&r=PG&f=1", "display_name": "BSmith156", "link": "https://stackoverflow.com/users/7151232/bsmith156"}, "reply_to_user": {"reputation": 4901, "user_id": 6485881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4NDn3.jpg?s=128&g=1", "display_name": "Maurice", "link": "https://stackoverflow.com/users/6485881/maurice"}, "edited": false, "score": 0, "creation_date": 1482357739, "post_id": 41272454, "comment_id": 69746728, "body": "@Maurice just edited my post to include it"}, {"owner": {"reputation": 31, "user_id": 7151232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d82b4e6e7a319ef0a401c62aabe1a61?s=128&d=identicon&r=PG&f=1", "display_name": "BSmith156", "link": "https://stackoverflow.com/users/7151232/bsmith156"}, "reply_to_user": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1482357825, "post_id": 41272454, "comment_id": 69746765, "body": "@downshift This gives me an error module &#39;package&#39; has no attribute &#39;module&#39;."}, {"owner": {"reputation": 483, "user_id": 4324246, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rJNGx.png?s=128&g=1", "display_name": "Marvo", "link": "https://stackoverflow.com/users/4324246/marvo"}, "edited": false, "score": 2, "creation_date": 1482359927, "post_id": 41272454, "comment_id": 69747660, "body": "If you want to import a function of a module in a package you can either write <code>from package.module import function</code> and use <code>function()</code> or you can  write <code>import package.module as pm</code> and  use <code>pm.function()</code>. You cannot import all modules of a package with a single statement like <code>import package</code>, this imports only the functions/methods of the file <code>__init__.py</code> in the package directory."}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1482360378, "post_id": 41272454, "comment_id": 69747840, "body": "@BSmith156 my apologies, closest thing to the syntax you&#39;re looking for I can think of is <code>from package.module import *</code> then you&#39;d only use <code>print(printTest())</code>"}], "answers": [{"tags": [], "owner": {"reputation": 5223, "user_id": 1240001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f66ce663380899b28e694de73750d8b?s=128&d=identicon&r=PG", "display_name": "Victor Schr&#246;der", "link": "https://stackoverflow.com/users/1240001/victor-schr%c3%b6der"}, "is_accepted": false, "score": 13, "last_activity_date": 1615319421, "last_edit_date": 1615319421, "creation_date": 1553617254, "answer_id": 55361835, "question_id": 41272454, "link": "https://stackoverflow.com/questions/41272454/python-custom-module-name-not-defined/55361835#55361835", "title": "Python custom module name not defined", "body": "<p>This is a surprisingly common issue and this question was still without an proper answer, so here we go.</p>\n<p>Let's suppose we have a module only with functions inside, say:</p>\n<ul>\n<li><p>file <strong>app/foo.py</strong>:</p>\n<pre><code>  def a():\n      print('Hello from foo.a')\n\n  def b():\n      print('Hello from foo.b')\n</code></pre>\n</li>\n</ul>\n<p>I would genuinely expect this to work (but it <strong>DOESN'T</strong>):</p>\n<ul>\n<li><p>file <strong>app/bar.py</strong>:</p>\n<pre><code>  import app.foo\n\n  # These will not work!\n  foo.a()\n  foo.b()\n</code></pre>\n</li>\n</ul>\n<p>It turns out that you have to import each element explicitly or give <code>app.foo</code> a name:</p>\n<ul>\n<li><p>Import everything (usually considered a bad practice):</p>\n<pre><code>  from app.foo import *\n\n  # Both will work fine\n  a()\n  b()\n</code></pre>\n</li>\n<li><p>Import only what you want:</p>\n<pre><code>  from app.foo import b\n\n  # This will work\n  b()\n\n  # But this will not\n  a()\n</code></pre>\n</li>\n<li><p>Give <code>app.foo</code> a (nice) name:</p>\n<pre><code>  import app.foo as baz\n\n  # Both will work as expected\n  baz.a()\n  baz.b()\n</code></pre>\n</li>\n</ul>\n<p>Even if the examples above use only functions, it works exactly the same for everything declared at the top most scope of the module, like classes or variables.</p>\n<p>Hope it helps!</p>\n"}], "owner": {"reputation": 31, "user_id": 7151232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d82b4e6e7a319ef0a401c62aabe1a61?s=128&d=identicon&r=PG&f=1", "display_name": "BSmith156", "link": "https://stackoverflow.com/users/7151232/bsmith156"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8624, "favorite_count": 2, "answer_count": 1, "score": 3, "last_activity_date": 1615319421, "creation_date": 1482356918, "last_edit_date": 1482370030, "question_id": 41272454, "link": "https://stackoverflow.com/questions/41272454/python-custom-module-name-not-defined", "title": "Python custom module name not defined", "body": "<p>I have a custom package called 'package' and a custom module in that package called 'module' which has a function returning 'test' when called. When I import my package if I do:</p>\n\n<pre><code>from package import module\n</code></pre>\n\n<p>Everything works fine but if I do:</p>\n\n<pre><code>from package import *\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>import package\n</code></pre>\n\n<p>Then when trying to use the 'module' module it comes up with an error name 'module' is not defined. Why is it not importing the module when I use import * or when I import the package?</p>\n\n<p>The code in the module I am trying to call is this:</p>\n\n<pre><code>def printTest():\n    return(\"Test\")\n</code></pre>\n\n<p>The code in the file calling the module is this:</p>\n\n<pre><code>import package\n\nprint(module.printTest())\n</code></pre>\n"}, {"tags": ["python", "download", "twitch"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 3, "creation_date": 1482356787, "post_id": 41272394, "comment_id": 69746259, "body": "Please put a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> in the question."}, {"owner": {"reputation": 67, "user_id": 4219970, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a7a0e91c89f28843a1b13e08b97c3fe?s=128&d=identicon&r=PG&f=1", "display_name": "ismail yussuf", "link": "https://stackoverflow.com/users/4219970/ismail-yussuf"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1482357414, "post_id": 41272394, "comment_id": 69746558, "body": "Listed an example of me running it. Also where I found the place that did the same as me and it worked there (near bottom of article)"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 4219970, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a7a0e91c89f28843a1b13e08b97c3fe?s=128&d=identicon&r=PG&f=1", "display_name": "ismail yussuf", "link": "https://stackoverflow.com/users/4219970/ismail-yussuf"}, "edited": false, "score": 0, "creation_date": 1482360054, "post_id": 41272902, "comment_id": 69747701, "body": "Thank you, I really appreciate your response. I will continue to work on it."}, {"owner": {"reputation": 67, "user_id": 4219970, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a7a0e91c89f28843a1b13e08b97c3fe?s=128&d=identicon&r=PG&f=1", "display_name": "ismail yussuf", "link": "https://stackoverflow.com/users/4219970/ismail-yussuf"}, "edited": false, "score": 0, "creation_date": 1482361847, "post_id": 41272902, "comment_id": 69748373, "body": "Hey are you sure about twitch no longer giving access to raw videos?? Because this guy youtube.com/user/lolprovods uploads full videos on the daily??"}, {"owner": {"reputation": 475, "user_id": 4186948, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-odWsG0W_E-g/AAAAAAAAAAI/AAAAAAAAE10/j9IxlKgzXEs/photo.jpg?sz=128", "display_name": "Alexis Tacnet", "link": "https://stackoverflow.com/users/4186948/alexis-tacnet"}, "reply_to_user": {"reputation": 67, "user_id": 4219970, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a7a0e91c89f28843a1b13e08b97c3fe?s=128&d=identicon&r=PG&f=1", "display_name": "ismail yussuf", "link": "https://stackoverflow.com/users/4219970/ismail-yussuf"}, "edited": false, "score": 0, "creation_date": 1482402896, "post_id": 41272902, "comment_id": 69763741, "body": "The changement from Twitch is very recent. I tried a lot of solutions I founded on google like <a href=\"http://livestreamer.readthedocs.io/\" rel=\"nofollow noreferrer\">LiveStreamer</a> or <a href=\"https://nightdev.com/twitchdown/\" rel=\"nofollow noreferrer\">NightDev</a> but they all seems down because of the Twitch update. However it is possible for broadcasters to download the videos they recorded and upload them on youtube if they want."}], "tags": [], "owner": {"reputation": 475, "user_id": 4186948, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-odWsG0W_E-g/AAAAAAAAAAI/AAAAAAAAE10/j9IxlKgzXEs/photo.jpg?sz=128", "display_name": "Alexis Tacnet", "link": "https://stackoverflow.com/users/4186948/alexis-tacnet"}, "is_accepted": true, "score": 0, "last_activity_date": 1482360645, "last_edit_date": 1482360645, "creation_date": 1482358936, "answer_id": 41272902, "question_id": 41272394, "link": "https://stackoverflow.com/questions/41272394/downloading-past-twitch-broadcasts-in-python/41272902#41272902", "title": "Downloading past twitch broadcasts in python", "body": "<p>Huh it's not as easy at it seems ... The code you found on this gist is quite old and Twitch has completely changed its API. Now you will need a <strong>Client ID</strong> to download videos, in order to limit the amount of video you're downloading. </p>\n\n<p>If you want to correct this gist, here are simple steps you can do :</p>\n\n<ol>\n<li><strong>Register an application</strong> : Everything is explained <a href=\"https://dev.twitch.tv/docs/v5/guides/using-the-twitch-api/\" rel=\"nofollow noreferrer\">here</a> ! Register you app and keep closely your client id.</li>\n<li><strong>Change API route</strong> : It is no longer <code>'{base}/api/videos/a{id_}'</code> but <code>{base}/kraken/videos/{id_}</code> (not sure about the last one). You will need to change it inside the python code. The doc is <a href=\"https://github.com/justintv/Twitch-API\" rel=\"nofollow noreferrer\">here</a>.</li>\n<li><strong>Add the client id to the url</strong> : As said in the doc, you need to give a header to the request you make, so add a <code>Client-ID: &lt;client_id&gt;</code> header in the request.</li>\n</ol>\n\n<p>And now I think you will need to start debugging a bit, because it is old code :/</p>\n\n<p>I will try myself to do it and I will edit this answer when I'm finished, but try yourself :)</p>\n\n<p>See ya !</p>\n\n<p><strong>EDIT :</strong> Mhhh ... It doesn't seem to be possible anyway to download a video with the API :/ I was thinking only links to API changed, but the <code>chunks</code> section of the response from the video url disappeared and Twitch is no longer giving access to raw videos :/</p>\n\n<p>Really sorry I told you to do that, even with the API I think is no longer possible :/</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3886799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bd164db7cec083aeb5a80ab6fb5bc12?s=128&d=identicon&r=PG&f=1", "display_name": "user3886799", "link": "https://stackoverflow.com/users/3886799/user3886799"}, "is_accepted": false, "score": 0, "last_activity_date": 1586244274, "creation_date": 1586244274, "answer_id": 61074769, "question_id": 41272394, "link": "https://stackoverflow.com/questions/41272394/downloading-past-twitch-broadcasts-in-python/61074769#61074769", "title": "Downloading past twitch broadcasts in python", "body": "<p>You can download past broadcasts of Twitch videos with Python library <a href=\"https://pypi.org/project/streamlink/\" rel=\"nofollow noreferrer\">streamlink</a>. \nYou will need OAuth token which you can generate with the command </p>\n\n<pre><code>streamlink --twitch-oauth-authenticate\n</code></pre>\n\n<p>Download VODs with:</p>\n\n<pre><code>streamlink --twitch-oauth-token &lt;your-oauth-token&gt; https://www.twitch.tv/videos/&lt;VideoID&gt; best -o &lt;your-output-folder&gt;\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 4219970, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a7a0e91c89f28843a1b13e08b97c3fe?s=128&d=identicon&r=PG&f=1", "display_name": "ismail yussuf", "link": "https://stackoverflow.com/users/4219970/ismail-yussuf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2278, "favorite_count": 0, "accepted_answer_id": 41272902, "answer_count": 2, "score": 0, "last_activity_date": 1586244274, "creation_date": 1482356680, "last_edit_date": 1482357378, "question_id": 41272394, "link": "https://stackoverflow.com/questions/41272394/downloading-past-twitch-broadcasts-in-python", "title": "Downloading past twitch broadcasts in python", "body": "<p>I have been trying to download past broadcasts for a streamer on twitch using python. I found this python code online:</p>\n\n<p><a href=\"https://gist.github.com/baderj/8340312\" rel=\"nofollow noreferrer\">https://gist.github.com/baderj/8340312</a></p>\n\n<p>However, when I try to call the functions I am getting errors giving me a status 400 message.\nUnsure if this is the code I want to download the video (as an mp4) or how to use it properly.</p>\n\n<p>And by video I mean something like this as an example: <code>www(dot)twitch.tv/imaqtpie/v/108909385</code>  //note cant put more than 3 links since I don't have 10 reputation</p>\n\n<p>Any tips on how i should go about doing this?</p>\n\n<p>Here's an example of running it in cmd: </p>\n\n<p>python twitch_past_broadcast_downloader.py 108909385</p>\n\n<p>After running it, it gave me this:</p>\n\n<pre><code>Exception API returned 400\n</code></pre>\n\n<p>This is where i got the information on running it:\n<a href=\"https://www.johannesbader.ch/2014/01/find-video-url-of-twitch-tv-live-streams-or-past-broadcasts/\" rel=\"nofollow noreferrer\">https://www.johannesbader.ch/2014/01/find-video-url-of-twitch-tv-live-streams-or-past-broadcasts/</a></p>\n"}, {"tags": ["python", "python-3.x", "pytest", "python-unittest"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1482356881, "post_id": 41272327, "comment_id": 69746298, "body": "printing the code with the code lines isn&#39;t very convenient..."}, {"owner": {"reputation": 6557, "user_id": 2495795, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/13606de0b736d7191e2cf2bfea1d4fda?s=128&d=identicon&r=PG", "display_name": "BufBills", "link": "https://stackoverflow.com/users/2495795/bufbills"}, "edited": false, "score": 0, "creation_date": 1482357137, "post_id": 41272327, "comment_id": 69746429, "body": "can you clarify your question"}, {"owner": {"reputation": 531, "user_id": 853937, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b16cb4aeb41426c7dfa0877b41566744?s=128&d=identicon&r=PG", "display_name": "pupssman", "link": "https://stackoverflow.com/users/853937/pupssman"}, "edited": false, "score": 0, "creation_date": 1482359553, "post_id": 41272327, "comment_id": 69747510, "body": "<code>py.test</code> treats any exception raised from test method as a failure. Errors, on the other hand, are for cases when fixture setup/teardown does not end well."}], "answers": [{"tags": [], "owner": {"reputation": 9908, "user_id": 202645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2f43e38da40a19aaed435e10183450f?s=128&d=identicon&r=PG", "display_name": "Bruno Oliveira", "link": "https://stackoverflow.com/users/202645/bruno-oliveira"}, "is_accepted": false, "score": 2, "last_activity_date": 1482373674, "creation_date": 1482373674, "answer_id": 41274925, "question_id": 41272327, "link": "https://stackoverflow.com/questions/41272327/py-test-reporting-indexerror-keyerror-as-a-failure-instead-of-error/41274925#41274925", "title": "py.test reporting IndexError/KeyError as a Failure instead of Error", "body": "<p>pytest doesn't differentiate from test <em>failures</em> (due to an <code>AssertionError</code>) and test <em>errors</em> (any other exception) like <code>unittest</code> does. This is not a bug, but by design.</p>\n\n<p>There's been some discussion in <a href=\"https://github.com/pytest-dev/pytest/issues/1555\" rel=\"nofollow noreferrer\">this thread</a> to add support for this type of separation and it resulted in the <a href=\"https://pypi.python.org/pypi/pytest-finer-verdicts\" rel=\"nofollow noreferrer\">pytest-finer-verdicts</a> plugin. </p>\n"}], "owner": {"reputation": 21, "user_id": 1137390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5911d2caf944249827777f1f1ea85ff?s=128&d=identicon&r=PG", "display_name": "frankcui24", "link": "https://stackoverflow.com/users/1137390/frankcui24"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 647, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1482373674, "creation_date": 1482356377, "last_edit_date": 1482358711, "question_id": 41272327, "link": "https://stackoverflow.com/questions/41272327/py-test-reporting-indexerror-keyerror-as-a-failure-instead-of-error", "title": "py.test reporting IndexError/KeyError as a Failure instead of Error", "body": "<pre><code> import unittest\n import logging\n\n FORMAT = '%(asctime)-15s %(message)s'\n logging.basicConfig(format=FORMAT)\n\n\n log = logging.getLogger(__name__)\n log.root.setLevel(logging.DEBUG)\n\n class FixturesTest(unittest.TestCase):\n\n     def setUp(self):\n         log.info('starting setup')\n         self.fixture = range(1, 10)\n         log.warn('Hello world')\n\n     def tearDown(self):\n         log.info('starting teardown')\n         del self.fixture\n         log.info('Goodbye world')\n\n     def test_pass(self):\n         log.info('in test pass')\n         self.assertEqual(self.fixture, range(1, 10))\n         log.error('Test world')\n\n     def test_fail(self):\n         log.info('in test fail')\n         log.error(\"let's fail a test\")\n         assert(1==0)\n\n     def test_error(self):\n         log.info('in test error')\n         log.info(\"let's error a test\")\n         d = []\n         d[1]\n\n     if __name__ == '__main__':\n         unittest.main()\n</code></pre>\n\n<p>running the above code using py.test, it reports the test_error test method as a test failure instead of test error. whereas running it using unittest shows the test_error as an error instead of failure, could you share any thoughts on this?</p>\n\n<p>Update : Same code, nose also consider it as an error instead of failure for the test_error, is this an issue in py.test ??  </p>\n\n<p>Update : If you are not sure what I refer by this, if you run py.test test_filename.py, you get 1 pass, 2 failures, if you run python -m unittest test_filename.py or nosetest test_filename.py, it's 1 pass, 1 failure, 1 error.</p>\n"}, {"tags": ["python", "database", "sqlite"], "comments": [{"owner": {"reputation": 657, "user_id": 4577206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBGxT.png?s=128&g=1", "display_name": "beeftendon", "link": "https://stackoverflow.com/users/4577206/beeftendon"}, "edited": false, "score": 0, "creation_date": 1482356694, "post_id": 41272323, "comment_id": 69746227, "body": "You should post full error message. It will help identify the problem."}, {"owner": {"reputation": 5300, "user_id": 4727702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EfsoQ.jpg?s=128&g=1", "display_name": "Yevhen Kuzmovych", "link": "https://stackoverflow.com/users/4727702/yevhen-kuzmovych"}, "edited": false, "score": 0, "creation_date": 1482356726, "post_id": 41272323, "comment_id": 69746241, "body": "You should probably specify what output do you get and why it is unexpected."}, {"owner": {"reputation": 96, "user_id": 7287351, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d3aa121dc190ede3a3014859a76808f0?s=128&d=identicon&r=PG&f=1", "display_name": "Saqib Malik", "link": "https://stackoverflow.com/users/7287351/saqib-malik"}, "reply_to_user": {"reputation": 657, "user_id": 4577206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBGxT.png?s=128&g=1", "display_name": "beeftendon", "link": "https://stackoverflow.com/users/4577206/beeftendon"}, "edited": false, "score": 0, "creation_date": 1482356749, "post_id": 41272323, "comment_id": 69746250, "body": "@beeftendon there is no error message it&#39;s just the checking if exists bit doesn&#39;t work"}, {"owner": {"reputation": 96, "user_id": 7287351, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d3aa121dc190ede3a3014859a76808f0?s=128&d=identicon&r=PG&f=1", "display_name": "Saqib Malik", "link": "https://stackoverflow.com/users/7287351/saqib-malik"}, "reply_to_user": {"reputation": 5300, "user_id": 4727702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EfsoQ.jpg?s=128&g=1", "display_name": "Yevhen Kuzmovych", "link": "https://stackoverflow.com/users/4727702/yevhen-kuzmovych"}, "edited": false, "score": 0, "creation_date": 1482356823, "post_id": 41272323, "comment_id": 69746273, "body": "@YevhenKuzmovych there is no output it just tells me the product doesnt exist even though it does"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1482357515, "post_id": 41272323, "comment_id": 69746610, "body": "There is no need for any of this. Just execute &quot;delete from Products where Name=?&quot;. If it exists, it&#39;s deleted. If it doesn&#39;t, nothing is deleted."}], "answers": [{"tags": [], "owner": {"reputation": 657, "user_id": 4577206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBGxT.png?s=128&g=1", "display_name": "beeftendon", "link": "https://stackoverflow.com/users/4577206/beeftendon"}, "is_accepted": true, "score": 1, "last_activity_date": 1482357397, "creation_date": 1482357397, "answer_id": 41272575, "question_id": 41272323, "link": "https://stackoverflow.com/questions/41272323/check-if-sqlite3-python-data-exists/41272575#41272575", "title": "check if sqlite3 python data exists", "body": "<p>Regarding cursors, the Python <a href=\"https://docs.python.org/2/library/sqlite3.html#cursor-objects\" rel=\"nofollow noreferrer\"><code>sqlite3</code> documentation</a> states:</p>\n\n<blockquote>\n  <p>As required by the Python DB API Spec, the rowcount attribute \u201cis -1 in case no executeXX() has been performed on the cursor...</p>\n</blockquote>\n\n<p>You define the cursor variable without performing any execute command. Thus, <code>cursor.rowcount</code> will be -1, and <code>cursor.rowcount &lt;= 0</code> will always be true.</p>\n\n<p>Maybe you intended to place the line </p>\n\n<pre><code>cursor.execute(sql,data)\n</code></pre>\n\n<p>before the first <code>cursor.rowcount</code> check?</p>\n"}], "owner": {"reputation": 96, "user_id": 7287351, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d3aa121dc190ede3a3014859a76808f0?s=128&d=identicon&r=PG&f=1", "display_name": "Saqib Malik", "link": "https://stackoverflow.com/users/7287351/saqib-malik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 851, "favorite_count": 0, "accepted_answer_id": 41272575, "answer_count": 1, "score": 1, "last_activity_date": 1482357397, "creation_date": 1482356357, "last_edit_date": 1482356631, "question_id": 41272323, "link": "https://stackoverflow.com/questions/41272323/check-if-sqlite3-python-data-exists", "title": "check if sqlite3 python data exists", "body": "<p>This is my code :</p>\n\n<pre><code>import sqlite3\n\ndef delete_product(data):\n    with sqlite3.connect(\"main.db\") as db:\n        cursor = db.cursor()\n        sql = \"delete from Products where Name=?\"\n        if cursor.rowcount &lt;= 0:\n            print(\"The product {0} does not exist\" .format(name))\n        if cursor.rowcount &gt; 0:\n            cursor.execute(sql,data)\n            db.commit()\n            print(\"The product {0} has been delted successfully\" .format(name))\n\nif __name__ == \"__main__\":\n    name=input(\"Enter the name of the product you want to delete: &gt;&gt;\")\n    data=(name,)\n    delete_product(data)\n</code></pre>\n\n<p>I want to check if the name actually exists in the database or not if it exists then delete it. if it doen't exist then print out an error. can anyone help me spot where the problem is</p>\n"}, {"tags": ["python", "google-bigquery", "google-cloud-storage"], "answers": [{"comments": [{"owner": {"reputation": 1357, "user_id": 7049567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f25d5d4bcb95c6881bd4d20627b7c1b0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Bendevis", "link": "https://stackoverflow.com/users/7049567/paul-bendevis"}, "edited": false, "score": 0, "creation_date": 1482357183, "post_id": 41272399, "comment_id": 69746451, "body": "That was exactly it thank you. The sequence of string lead me to believe it needed a list of strings. <a href=\"https://googlecloudplatform.github.io/google-cloud-python/stable/bigquery-client.html\" rel=\"nofollow noreferrer\">googlecloudplatform.github.io/google-cloud-python/stable/&hellip;</a>"}, {"owner": {"reputation": 25696, "user_id": 6253347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1387a55798cae58a3a836dcbcd6e1951?s=128&d=identicon&r=PG&f=1", "display_name": "Elliott Brossard", "link": "https://stackoverflow.com/users/6253347/elliott-brossard"}, "reply_to_user": {"reputation": 1357, "user_id": 7049567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f25d5d4bcb95c6881bd4d20627b7c1b0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Bendevis", "link": "https://stackoverflow.com/users/7049567/paul-bendevis"}, "edited": false, "score": 1, "creation_date": 1482361248, "post_id": 41272399, "comment_id": 69748156, "body": "I was confused about that too. I think that <a href=\"https://github.com/GoogleCloudPlatform/google-cloud-python/issues\" rel=\"nofollow noreferrer\">this</a> is the place to report issues with the API documentation, although it might require a Github login. I found an example of the correct usage <a href=\"http://gcloud-python.readthedocs.io/en/latest/bigquery-usage.html#inserting-data-asynchronous\" rel=\"nofollow noreferrer\">here</a>. In any case, I&#39;m glad that you got it working!"}, {"owner": {"reputation": 166, "user_id": 7407133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2kV8x.jpg?s=128&g=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/7407133/greg"}, "edited": false, "score": 0, "creation_date": 1496855365, "post_id": 41272399, "comment_id": 75836363, "body": "I hit the same issue. Thanks for helping me resolve it. I went ahead and filed a github issue on the documentation: <a href=\"https://github.com/GoogleCloudPlatform/google-cloud-python/issues/3482\" rel=\"nofollow noreferrer\">github.com/GoogleCloudPlatform/google-cloud-python/issues/34&zwnj;&#8203;82</a>"}], "tags": [], "owner": {"reputation": 25696, "user_id": 6253347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1387a55798cae58a3a836dcbcd6e1951?s=128&d=identicon&r=PG&f=1", "display_name": "Elliott Brossard", "link": "https://stackoverflow.com/users/6253347/elliott-brossard"}, "is_accepted": true, "score": 2, "last_activity_date": 1482356709, "creation_date": 1482356709, "answer_id": 41272399, "question_id": 41272298, "link": "https://stackoverflow.com/questions/41272298/bigquery-load-table-from-storage-wont-recognize-uri/41272399#41272399", "title": "BigQuery load_table_from_storage won&#39;t recognize uri", "body": "<p>I could be wrong, but it looks like <code>load_table_from_storage</code> in the Python API expects a single string for the third argument as opposed to a list. If you want to match multiple files, you can use a <code>*</code> at the end. For example,</p>\n\n<pre><code>uri = 'gs://my-bucket-name/datastore_backup_analytics_2016_12_21_2_User/1569751766512529035929A5AA9742/output-*']\n\njob_name = 'Load_User' \ndestinationTable = dataset.table('Transfer')\njob = bigquery_client.load_table_from_storage(job_name, destinationTable, uri)            \njob.begin()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 8127208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/438fc8462725248230dfc7da4b3468a0?s=128&d=identicon&r=PG", "display_name": "Tres Seaver", "link": "https://stackoverflow.com/users/8127208/tres-seaver"}, "is_accepted": false, "score": 1, "last_activity_date": 1496857313, "creation_date": 1496857313, "answer_id": 44419434, "question_id": 41272298, "link": "https://stackoverflow.com/questions/41272298/bigquery-load-table-from-storage-wont-recognize-uri/44419434#44419434", "title": "BigQuery load_table_from_storage won&#39;t recognize uri", "body": "<p><a href=\"https://googlecloudplatform.github.io/google-cloud-python/stable/bigquery-client.html#google.cloud.bigquery.client.Client.load_table_from_storage\" rel=\"nofollow noreferrer\"><code>Client.load_table_from_storage</code></a> takes <em>one or more</em> source URIs (that is what <code>*soure_uris</code> means in python).  E.g.:</p>\n\n<pre><code>job = client.load_table_from_storage(\n    'load-job-123', my_table_object,\n    'gs://my-bucket-name/table_one',\n    'gs://my-bucket-name/table_two')\n</code></pre>\n"}], "owner": {"reputation": 1357, "user_id": 7049567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f25d5d4bcb95c6881bd4d20627b7c1b0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Bendevis", "link": "https://stackoverflow.com/users/7049567/paul-bendevis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1437, "favorite_count": 0, "accepted_answer_id": 41272399, "answer_count": 2, "score": 1, "last_activity_date": 1496857313, "creation_date": 1482356218, "question_id": 41272298, "link": "https://stackoverflow.com/questions/41272298/bigquery-load-table-from-storage-wont-recognize-uri", "title": "BigQuery load_table_from_storage won&#39;t recognize uri", "body": "<p>I'm running into the following error when trying to load a table from google cloud storage:\nBadRequest: 400 Load configuration must specify at least one source URI (POST <a href=\"https://www.googleapis.com/bigquery/v2/projects/fansidata/jobs\" rel=\"nofollow noreferrer\">https://www.googleapis.com/bigquery/v2/projects/fansidata/jobs</a>)</p>\n\n<p>Meanwhile my uri is valid (ie: i can see it in the gcs web app)</p>\n\n<pre><code>uris = ['gs://my-bucket-name/datastore_backup_analytics_2016_12_21_2_User/1569751766512529035929A5AA9742/output-0']\n\njob_name = 'Load_User' \ndestinationTable = dataset.table('Transfer')\njob = bigquery_client.load_table_from_storage(job_name, destinationTable, uris)            \njob.begin()\n</code></pre>\n"}, {"tags": ["python", "numpy", "distributed", "dask"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 492920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bca08d5951a34c6019dec98cb88003a7?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/492920/mark"}, "edited": false, "score": 0, "creation_date": 1482440571, "post_id": 41273032, "comment_id": 69785817, "body": "Yes, thank you, it&#39;s easier to see this now!  However, I get a <code>MemoryError</code> when I call <code>result.compute()</code>, running in threaded mode. I&#39;ll try to reproduce this on a different box just to make sure."}, {"owner": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "reply_to_user": {"reputation": 21, "user_id": 492920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bca08d5951a34c6019dec98cb88003a7?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/492920/mark"}, "edited": false, "score": 0, "creation_date": 1482458121, "post_id": 41273032, "comment_id": 69791109, "body": "I would not be surprised by a memory error in the <code>da.corrcoef</code> case (it&#39;s hard to do this operation in a low-memory way).  I would not expect a memory error in the second case.  If you want to spill to disk you can try the distributed scheduler: <a href=\"http://dask.pydata.org/en/latest/scheduler-choice.html\" rel=\"nofollow noreferrer\">dask.pydata.org/en/latest/scheduler-choice.html</a>"}, {"owner": {"reputation": 21, "user_id": 492920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bca08d5951a34c6019dec98cb88003a7?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/492920/mark"}, "edited": false, "score": 0, "creation_date": 1483560853, "post_id": 41273032, "comment_id": 70150650, "body": "I think I&#39;m getting an out of memory error because the only way I could figure out how to chunk it was by 900. Your example flipped the dimensions...I need to start with a set of say 10 images that are 900x900 and then flip into a time series of size (900, 900, 10). To do that, I started <code>imgs</code> with <code>chunks=900</code>, so my <code>reshaped</code> ended up having a <code>chunksize=(810000, 10)</code>. I would need to only correlate against the signal, the last block you have above, but I can&#39;t figure out the correct chunk size."}], "tags": [], "owner": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "is_accepted": false, "score": 1, "last_activity_date": 1482359578, "creation_date": 1482359578, "answer_id": 41273032, "question_id": 41272293, "link": "https://stackoverflow.com/questions/41272293/converting-a-correlateion-coefficient-function-from-numpy-to-dask/41273032#41273032", "title": "Converting a correlateion coefficient function from NumPy to Dask", "body": "<p>Perhaps something like the following?</p>\n\n<pre><code>import dask.array as da\nimport numpy as np\n\nimgs = da.random.random((10, 900, 900), chunks=(1, 900, 900))\nreshaped = imgs.reshape((10, 900 * 900))\n</code></pre>\n\n<p>If you wanted to correlate your images against each other</p>\n\n<pre><code>result = da.corrcoef(reshaped)\nresult.compute()\n</code></pre>\n\n<p>Or against some other signal</p>\n\n<pre><code>signal = np.random.random(900 * 900)\nresult = reshaped.map_blocks(np.corrcoef, signal, dtype=signal.dtype)\nresult.compute()\n</code></pre>\n\n<p>However, I'm not very familiar with your application, so the response above may be flawed.</p>\n"}], "owner": {"reputation": 21, "user_id": 492920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bca08d5951a34c6019dec98cb88003a7?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/492920/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1482359578, "creation_date": 1482356193, "question_id": 41272293, "link": "https://stackoverflow.com/questions/41272293/converting-a-correlateion-coefficient-function-from-numpy-to-dask", "title": "Converting a correlateion coefficient function from NumPy to Dask", "body": "<p>I'm trying to evaluate dask by converting a method from <a href=\"http://thunder-project.org/\" rel=\"nofollow noreferrer\">thunder</a> (using Spark), to the equivalent numpy version, but I'm not sure how to write this using dask/distributed.</p>\n\n<p>In thunder, I can take a stack of images, convert it to a series, and correlate against some signal:</p>\n\n<pre><code>imgs = thunder.images.fromrandom((10, 900, 900))\nseries = imgs.toseries()\nsignal = series[5, 5, :]\ncorrelated = series.correlate(signal)\n</code></pre>\n\n<p>The numpy version looks like this:</p>\n\n<pre><code>series = numpy.random.rand(900, 900, 10)\nsignal = series[5, 5, :]\n\nreshaped = series.reshape(900 * 900, 10)\n\ncorrelated = numpy.asarray(\n    map(lambda x: numpy.corrcoef(x, signal)[0, 1], reshaped))\n)\nfinal = correlated.reshape(900, 900)\n</code></pre>\n\n<p>I'm looking for some tips on how to convert this into something for distributed in particular.</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 4, "creation_date": 1482356260, "post_id": 41272290, "comment_id": 69746022, "body": "...what? Yes, they&#39;re both lists. One of them is a list that contains lists, the other isn&#39;t. Or maybe it is, depending on what <code>x</code>, <code>y</code> and <code>z</code> are. There <i>aren&#39;t</i> <i>&quot;two types of list in Python&quot;</i>, and it&#39;s not at all clear what gave you the idea that there were."}, {"owner": {"reputation": 14484, "user_id": 2291710, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0232aab5638a75f2286dccc43ecf4df3?s=128&d=identicon&r=PG&f=1", "display_name": "Delgan", "link": "https://stackoverflow.com/users/2291710/delgan"}, "edited": false, "score": 0, "creation_date": 1482356298, "post_id": 41272290, "comment_id": 69746045, "body": "There is no &quot;two types of list&quot;. There is &quot;list&quot; which is an object which can contains anything. So, a list can contain numbers, or others lists, which itself can contain other lists."}, {"owner": {"reputation": 1309, "user_id": 6510273, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wXQ7R.jpg?s=128&g=1", "display_name": "Florida Man", "link": "https://stackoverflow.com/users/6510273/florida-man"}, "edited": false, "score": 1, "creation_date": 1482356336, "post_id": 41272290, "comment_id": 69746065, "body": "ah, I see. Listception."}, {"owner": {"reputation": 1309, "user_id": 6510273, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wXQ7R.jpg?s=128&g=1", "display_name": "Florida Man", "link": "https://stackoverflow.com/users/6510273/florida-man"}, "edited": false, "score": 0, "creation_date": 1482356366, "post_id": 41272290, "comment_id": 69746079, "body": "Thanks for your quick answer. I will work with that."}], "answers": [{"comments": [{"owner": {"reputation": 1309, "user_id": 6510273, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wXQ7R.jpg?s=128&g=1", "display_name": "Florida Man", "link": "https://stackoverflow.com/users/6510273/florida-man"}, "edited": false, "score": 1, "creation_date": 1482356533, "post_id": 41272347, "comment_id": 69746161, "body": "Thank you all for the quick and precise answers. A newcomer appreciates them."}, {"owner": {"reputation": 35962, "user_id": 1399279, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e2e566682f50d53a06a121d82f7ed8de?s=128&d=identicon&r=PG", "display_name": "SethMMorton", "link": "https://stackoverflow.com/users/1399279/sethmmorton"}, "reply_to_user": {"reputation": 1309, "user_id": 6510273, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wXQ7R.jpg?s=128&g=1", "display_name": "Florida Man", "link": "https://stackoverflow.com/users/6510273/florida-man"}, "edited": false, "score": 0, "creation_date": 1482356990, "post_id": 41272347, "comment_id": 69746353, "body": "@FloridaMan If this answer helped you, please follow this guide for the next steps: <a href=\"http://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>"}, {"owner": {"reputation": 1309, "user_id": 6510273, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wXQ7R.jpg?s=128&g=1", "display_name": "Florida Man", "link": "https://stackoverflow.com/users/6510273/florida-man"}, "edited": false, "score": 0, "creation_date": 1482357131, "post_id": 41272347, "comment_id": 69746425, "body": "I had to wait 8min to accept ;-) Thanks for the help."}], "tags": [], "owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "is_accepted": true, "score": 4, "last_activity_date": 1482356535, "last_edit_date": 1482356535, "creation_date": 1482356472, "answer_id": 41272347, "question_id": 41272290, "link": "https://stackoverflow.com/questions/41272290/difference-between-x-y-z-and-x-y-z/41272347#41272347", "title": "Difference between [[x], [y], [z]] and [x, y, z]", "body": "<p><code>[[x],[y],[z]]</code> is <em>list of lists</em> whereas <code>[x, y, z]</code> is just a <em>list</em>.</p>\n\n<p>In order to convert them, you may use <em>list comprehensions</em> as:</p>\n\n<pre><code># convert list -&gt; list of lists\n&gt;&gt;&gt; my_list = [1, 2, 3]\n&gt;&gt;&gt; [[i] for i in my_list]\n[[1], [2], [3]]\n\n# convert list of lists -&gt; list\n&gt;&gt;&gt; my_list_of_lists = [[1], [2], [3]]\n&gt;&gt;&gt; [j for i in my_list_of_lists for j in i]\n[1, 2, 3]\n</code></pre>\n"}], "owner": {"reputation": 1309, "user_id": 6510273, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wXQ7R.jpg?s=128&g=1", "display_name": "Florida Man", "link": "https://stackoverflow.com/users/6510273/florida-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 41272347, "answer_count": 1, "score": 0, "last_activity_date": 1482356535, "creation_date": 1482356181, "last_edit_date": 1482356226, "question_id": 41272290, "link": "https://stackoverflow.com/questions/41272290/difference-between-x-y-z-and-x-y-z", "title": "Difference between [[x], [y], [z]] and [x, y, z]", "body": "<p>There are two types of list in Python, <code>[[x], [y], [z]]</code> and <code>[x, y, z]</code>. At least in the variable explorer both are stated as \"list\".</p>\n\n<p>What is the difference? Can I work with them together? How can I transfer one into the other to actually work with them together?</p>\n"}, {"tags": ["python", "http", "urllib2", "urllib"], "comments": [{"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1482356234, "post_id": 41272274, "comment_id": 69746009, "body": "make asynchronous requests via multiple process and process the records"}, {"owner": {"reputation": 61, "user_id": 1481112, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0f240d9abeaab85a5b514eb18f158644?s=128&d=identicon&r=PG", "display_name": "WhatWouldKantDo", "link": "https://stackoverflow.com/users/1481112/whatwouldkantdo"}, "reply_to_user": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1482371422, "post_id": 41272274, "comment_id": 69750761, "body": "Are you suggesting I multi-thread the application?"}], "owner": {"reputation": 61, "user_id": 1481112, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0f240d9abeaab85a5b514eb18f158644?s=128&d=identicon&r=PG", "display_name": "WhatWouldKantDo", "link": "https://stackoverflow.com/users/1481112/whatwouldkantdo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1482427969, "creation_date": 1482356129, "last_edit_date": 1482427969, "question_id": 41272274, "link": "https://stackoverflow.com/questions/41272274/sending-several-page-requests-before-receiving-the-first-response-python-urllib", "title": "Sending several page requests before receiving the first response python-urllib", "body": "<p>I am writing a python program to crawl Reddit(why is a bit complicated). The program uses a urllib http request to grab search pages, and then parses them. This takes an exceeding amount of time because of the gap between submitting a request and getting the page back (around 10s even on a university internet connection). Is there any way to send several requests at once and them process them all once the responses come back?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 2, "creation_date": 1482356149, "post_id": 41272247, "comment_id": 69745967, "body": "It&#39;s telling you it is not valid utf8. To fix it, use valid utf8."}, {"owner": {"reputation": 2727, "user_id": 986012, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/07059b53ad8cdae7f9955da84756b089?s=128&d=identicon&r=PG", "display_name": "Morgan Allen", "link": "https://stackoverflow.com/users/986012/morgan-allen"}, "reply_to_user": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1482356283, "post_id": 41272247, "comment_id": 69746032, "body": "ahh, it&#39;s saying I can&#39;t decode it into utf8 because it&#39;s not a valid utf8 character?"}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1482356512, "post_id": 41272247, "comment_id": 69746149, "body": "Right. For questions like this, posting the version of Python is useful as well. This looks like python 2."}, {"owner": {"reputation": 2727, "user_id": 986012, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/07059b53ad8cdae7f9955da84756b089?s=128&d=identicon&r=PG", "display_name": "Morgan Allen", "link": "https://stackoverflow.com/users/986012/morgan-allen"}, "reply_to_user": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1482356644, "post_id": 41272247, "comment_id": 69746216, "body": "yes, this is version 2. When I try this in the interpreter, it works <code>&#39;V&#205;ctor&#39;.decode(&#39;utf8&#39;)</code> returns <code>u&#39;V\\xcdctor&#39;</code> so why does it break in the script?"}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 3, "creation_date": 1482356721, "post_id": 41272247, "comment_id": 69746240, "body": "I have no idea, have you looked at your file? The error is essentially &#39;file is not utf8 encoded&#39; which probably means the file is not actually utf8 encoded."}, {"owner": {"reputation": 2727, "user_id": 986012, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/07059b53ad8cdae7f9955da84756b089?s=128&d=identicon&r=PG", "display_name": "Morgan Allen", "link": "https://stackoverflow.com/users/986012/morgan-allen"}, "reply_to_user": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1482356792, "post_id": 41272247, "comment_id": 69746261, "body": "If I take out row that has the special character, its fine. The file is a CSV file that I&#39;ve uploaded. How do I make the file utf8 encoded?"}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 1, "creation_date": 1482356944, "post_id": 41272247, "comment_id": 69746326, "body": "Open it in a text editor and save it as utf8 encoded is one simple way. Assuming the editor is correctly guessing the encoding to begin with."}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1482357098, "post_id": 41272247, "comment_id": 69746407, "body": "The actual right answer probably depends on you describing what you&#39;re trying to accomplish and what the inputs and outputs are. For instance, a lot of these issues are easily avoidable if it&#39;s possible for the input to be text someone pastes or types into a form rather than a file. With a file, you don&#39;t have any guarantees of the encoding."}, {"owner": {"reputation": 2727, "user_id": 986012, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/07059b53ad8cdae7f9955da84756b089?s=128&d=identicon&r=PG", "display_name": "Morgan Allen", "link": "https://stackoverflow.com/users/986012/morgan-allen"}, "reply_to_user": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1482357199, "post_id": 41272247, "comment_id": 69746461, "body": "Just updated my question!"}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 2, "creation_date": 1482357566, "post_id": 41272247, "comment_id": 69746632, "body": "Ok, that is basically a different question. You have to either know or guess (programatically) the encoding of the data and covert it to utf8. The data isn&#39;t utf8 and the only way to make it utf8 is to know what encoding it&#39;s in to begin with and convert."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1482357668, "post_id": 41272247, "comment_id": 69746686, "body": "What program or technique are you using to create the CSV file yourself?"}, {"owner": {"reputation": 8239, "user_id": 4056181, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/G0SRK.jpg?s=128&g=1", "display_name": "jmd_dk", "link": "https://stackoverflow.com/users/4056181/jmd-dk"}, "edited": false, "score": 0, "creation_date": 1482357717, "post_id": 41272247, "comment_id": 69746715, "body": "Can you read the file using <code>from codecs import open; open(filename, encoding=&#39;utf-8&#39;).read()</code> ?"}, {"owner": {"reputation": 2727, "user_id": 986012, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/07059b53ad8cdae7f9955da84756b089?s=128&d=identicon&r=PG", "display_name": "Morgan Allen", "link": "https://stackoverflow.com/users/986012/morgan-allen"}, "reply_to_user": {"reputation": 8239, "user_id": 4056181, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/G0SRK.jpg?s=128&g=1", "display_name": "jmd_dk", "link": "https://stackoverflow.com/users/4056181/jmd-dk"}, "edited": false, "score": 0, "creation_date": 1482357842, "post_id": 41272247, "comment_id": 69746773, "body": "@jmd_dk error : <code>TypeError: coercing to Unicode: need string or buffer, FileStorage found</code>"}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1482359663, "post_id": 41272247, "comment_id": 69747561, "body": "flagging this as a dupe now that the question is clearer"}], "answers": [{"comments": [{"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1482359108, "post_id": 41272890, "comment_id": 69747311, "body": "All of the single-byte encodings (which I believe includes all <code>cp*</code> and <code>iso8859*</code> encodings) will be able to read the file without error, but the user will still have to examine the results to check whether the file was decoded to the correct characters."}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1482359629, "post_id": 41272890, "comment_id": 69747546, "body": "This is not a sensible answer. There are better ways to attempt encoding detection."}, {"owner": {"reputation": 8239, "user_id": 4056181, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/G0SRK.jpg?s=128&g=1", "display_name": "jmd_dk", "link": "https://stackoverflow.com/users/4056181/jmd-dk"}, "edited": false, "score": 0, "creation_date": 1482359667, "post_id": 41272890, "comment_id": 69747565, "body": "Hence the wording &quot;seemingly working&quot;. The script finds encodings which do not throw an error. No guarantee is made that a given encoding actually does the job correctly."}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1482360266, "post_id": 41272890, "comment_id": 69747792, "body": "Having the code print &#39;this is a useless answer&#39; doesn&#39;t make the answer less useless. Chardet and other tools exist that make a much better attempt at this. Additionally, for all we know, the encoding might be included in wherever the poster is getting data from. Or defined."}], "tags": [], "owner": {"reputation": 8239, "user_id": 4056181, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/G0SRK.jpg?s=128&g=1", "display_name": "jmd_dk", "link": "https://stackoverflow.com/users/4056181/jmd-dk"}, "is_accepted": false, "score": -1, "last_activity_date": 1482358867, "creation_date": 1482358867, "answer_id": 41272890, "question_id": 41272247, "link": "https://stackoverflow.com/questions/41272247/unicodedecodeerror-utf8-codec-cant-decode-byte-0xea/41272890#41272890", "title": "UnicodeDecodeError: &#39;utf8&#39; codec can&#39;t decode byte 0xea", "body": "<p>It seems that your file is not encoded in utf8. You can try reading the file with <a href=\"https://docs.python.org/2/library/codecs.html#standard-encodings\" rel=\"nofollow noreferrer\">all the encodings that Python understand</a> and check which lets you read the entire content of the file. Try this script:</p>\n\n<pre><code>from codecs import open\n\nencodings = [\n    \"ascii\",\n    \"big5\",\n    \"big5hkscs\",\n    \"cp037\",\n    \"cp424\",\n    \"cp437\",\n    \"cp500\",\n    \"cp720\",\n    \"cp737\",\n    \"cp775\",\n    \"cp850\",\n    \"cp852\",\n    \"cp855\",\n    \"cp856\",\n    \"cp857\",\n    \"cp858\",\n    \"cp860\",\n    \"cp861\",\n    \"cp862\",\n    \"cp863\",\n    \"cp864\",\n    \"cp865\",\n    \"cp866\",\n    \"cp869\",\n    \"cp874\",\n    \"cp875\",\n    \"cp932\",\n    \"cp949\",\n    \"cp950\",\n    \"cp1006\",\n    \"cp1026\",\n    \"cp1140\",\n    \"cp1250\",\n    \"cp1251\",\n    \"cp1252\",\n    \"cp1253\",\n    \"cp1254\",\n    \"cp1255\",\n    \"cp1256\",\n    \"cp1257\",\n    \"cp1258\",\n    \"euc_jp\",\n    \"euc_jis_2004\",\n    \"euc_jisx0213\",\n    \"euc_kr\",\n    \"gb2312\",\n    \"gbk\",\n    \"gb18030\",\n    \"hz\",\n    \"iso2022_jp\",\n    \"iso2022_jp_1\",\n    \"iso2022_jp_2\",\n    \"iso2022_jp_2004\",\n    \"iso2022_jp_3\",\n    \"iso2022_jp_ext\",\n    \"iso2022_kr\",\n    \"latin_1\",\n    \"iso8859_2\",\n    \"iso8859_3\",\n    \"iso8859_4\",\n    \"iso8859_5\",\n    \"iso8859_6\",\n    \"iso8859_7\",\n    \"iso8859_8\",\n    \"iso8859_9\",\n    \"iso8859_10\",\n    \"iso8859_13\",\n    \"iso8859_14\",\n    \"iso8859_15\",\n    \"iso8859_16\",\n    \"johab\",\n    \"koi8_r\",\n    \"koi8_u\",\n    \"mac_cyrillic\",\n    \"mac_greek\",\n    \"mac_iceland\",\n    \"mac_latin2\",\n    \"mac_roman\",\n    \"mac_turkish\",\n    \"ptcp154\",\n    \"shift_jis\",\n    \"shift_jis_2004\",\n    \"shift_jisx0213\",\n    \"utf_32\",\n    \"utf_32_be\",\n    \"utf_32_le\",\n    \"utf_16\",\n    \"utf_16_be\",\n    \"utf_16_le\",\n    \"utf_7\",\n    \"utf_8\",\n    \"utf_8_sig\",\n]\n\nfor encoding in encodings:\n    try:\n        with open(file, encoding=encoding) as f:\n            f.read()\n        print('Seemingly working encoding: {}'.format(encoding))\n    except:\n        pass\n</code></pre>\n\n<p>where <code>file</code> is again the filename of your file.</p>\n"}, {"comments": [{"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1482360618, "post_id": 41273125, "comment_id": 69747922, "body": "This is not a great answer without at least pointing out that there are tools out there that attempt to determine character encoding and they are often quite effective. As it stands, your answer is basically &#39;trash the data&#39;. This isn&#39;t really necessary."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1482360803, "post_id": 41273125, "comment_id": 69747980, "body": "@pvg: That&#39;s a great contribution.  Please feel free to hit the &quot;edit&quot; button."}], "tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": false, "score": 2, "last_activity_date": 1482360024, "creation_date": 1482360024, "answer_id": 41273125, "question_id": 41272247, "link": "https://stackoverflow.com/questions/41272247/unicodedecodeerror-utf8-codec-cant-decode-byte-0xea/41273125#41273125", "title": "UnicodeDecodeError: &#39;utf8&#39; codec can&#39;t decode byte 0xea", "body": "<p>Your data is not UTF-8, it contains errors.  You say that you are generating the data, so the ideal solution is to generate better data.</p>\n\n<p>Unfortunately, sometimes we are unable to get high-quality data, or we have servers that give us garbage and we have to sort it out.  For these situations, we can use less strict error handling when decoding text.</p>\n\n<p>Instead of:</p>\n\n<pre><code>file.read().decode('UTF8')\n</code></pre>\n\n<p>You can use:</p>\n\n<pre><code>file.read().decode('UTF8', 'replace')\n</code></pre>\n\n<p>This will make it so that any \u201cgarbage\u201d characters (anything which is not correctly encoded as UTF-8) will get replaced with U+FFFD, which looks like this:</p>\n\n<blockquote>\n  <p>\ufffd</p>\n</blockquote>\n\n<p>You say that your file has the <code>\u00cd</code> character, but you are probably viewing the file using an encoding other than UTF-8.  Is your file <em>supposed</em> to contain <code>\u00cd</code>, or is it just <a href=\"https://en.wikipedia.org/wiki/Mojibake\" rel=\"nofollow noreferrer\">mojibake</a>?  Maybe you can figure out what the character is supposed to be, and from that, you can figure out what encoding your data uses if it's not UTF-8.</p>\n"}], "owner": {"reputation": 2727, "user_id": 986012, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/07059b53ad8cdae7f9955da84756b089?s=128&d=identicon&r=PG", "display_name": "Morgan Allen", "link": "https://stackoverflow.com/users/986012/morgan-allen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4302, "favorite_count": 0, "closed_date": 1482395646, "answer_count": 2, "score": 0, "last_activity_date": 1482360024, "creation_date": 1482356012, "last_edit_date": 1482357190, "question_id": 41272247, "link": "https://stackoverflow.com/questions/41272247/unicodedecodeerror-utf8-codec-cant-decode-byte-0xea", "closed_reason": "Duplicate", "title": "UnicodeDecodeError: &#39;utf8&#39; codec can&#39;t decode byte 0xea", "body": "<p>I have a CSV file that I'm uploading via an HTML form to a Python API</p>\n\n<p>The API looks like this:</p>\n\n<pre><code>@app.route('/add_candidates_to_db', methods=['GET','POST'])\ndef add_candidates():\n    file = request.files['csv_file']\n    x = io.StringIO(file.read().decode('UTF8'), newline=None)\n    csv_input = csv.reader(x)\n    for row in csv_input:\n        print(row)\n</code></pre>\n\n<p>I found the part of the file that causes the issue. In my file it has <code>\u00cd</code> character. </p>\n\n<p>I get this error: <code>UnicodeDecodeError: 'utf8' codec can't decode byte 0xea in position 1317: invalid continuation byte</code></p>\n\n<p>I thought I was decoding it with <code>.decode('UTF8')</code> or is the error happening before that with <code>file.read()</code>? </p>\n\n<p>How do I fix this?</p>\n\n<p>**\n**</p>\n\n<p>Edit: I have control of the file. I am creating the CSV file myself by pulling data (sometimes this data has strange characters). </p>\n\n<p>One the server side, I'm reading each row in the file and inserting into a database. </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 4168, "user_id": 6273251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fCGXep-7snc/AAAAAAAAAAI/AAAAAAAAADk/nk_YDFGfkc0/photo.jpg?sz=128", "display_name": "Random Davis", "link": "https://stackoverflow.com/users/6273251/random-davis"}, "edited": false, "score": 3, "creation_date": 1482356032, "post_id": 41272213, "comment_id": 69745904, "body": "Getting the index with <code>mylist.index(V)</code> returns the index of the <i>first</i> occurrence of <code>0</code>. It&#39;s always going to be the same spot, hence why the same number is being incremented. Also, your code could be replaced with <code>print([int(a == 0) for a in mylist])</code>, which produces <code>[0, 0, 1, 0, 1]</code>."}, {"owner": {"reputation": 10652, "user_id": 5666087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0eeb62bd4c02b40a8751ab3368368d02?s=128&d=identicon&r=PG&f=1", "display_name": "jakub", "link": "https://stackoverflow.com/users/5666087/jakub"}, "edited": false, "score": 3, "creation_date": 1482356111, "post_id": 41272213, "comment_id": 69745946, "body": "If you are iterating over <code>mylist</code> and you want to get the index of <code>V</code>, why not just use <code>for i, V in enumerate(myList)</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1482356522, "creation_date": 1482356522, "answer_id": 41272357, "question_id": 41272213, "link": "https://stackoverflow.com/questions/41272213/index-issue-creating-a-counter-in-python/41272357#41272357", "title": "Index issue creating a counter in python", "body": "<p><code>index()</code> will only give you the position in the list of the first instance of <code>0</code>. Instead you can create a list comprehension that will iterate the whole list once and create a <code>1</code> every time the item in that list is equal to zero.</p>\n\n<pre><code>mylist = [0.9971989983534086, 0.9855488723192819, 0, 0.979924988605467, 0.9740293465156515, 0]\ncounter = [1 if item == 0 else 0 for item in mylist]\nprint counter\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1591, "user_id": 420446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/406a84b65837087fd511c333fa2a389e?s=128&d=identicon&r=PG", "display_name": "willll", "link": "https://stackoverflow.com/users/420446/willll"}, "is_accepted": false, "score": 0, "last_activity_date": 1482356724, "creation_date": 1482356724, "answer_id": 41272405, "question_id": 41272213, "link": "https://stackoverflow.com/questions/41272213/index-issue-creating-a-counter-in-python/41272405#41272405", "title": "Index issue creating a counter in python", "body": "<p>mylist.index(V) returns the index of the first occurrence (<a href=\"https://docs.python.org/2/tutorial/datastructures.html\" rel=\"nofollow noreferrer\">https://docs.python.org/2/tutorial/datastructures.html</a>), a quick fix would be :</p>\n\n<pre><code>J=0\nfor V in mylist:\n    if V==0:\n        count[J] = count[J] + 1\n    J = J + 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4617, "user_id": 3954379, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HwYQ0.jpg?s=128&g=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/3954379/lucas"}, "is_accepted": true, "score": 1, "last_activity_date": 1482356896, "creation_date": 1482356896, "answer_id": 41272451, "question_id": 41272213, "link": "https://stackoverflow.com/questions/41272213/index-issue-creating-a-counter-in-python/41272451#41272451", "title": "Index issue creating a counter in python", "body": "<p>You can use <a href=\"https://docs.python.org/2/library/functions.html#enumerate\" rel=\"nofollow noreferrer\">enumerate</a></p>\n\n<pre><code>count=[0,0,0,0,0]  #counter\nmylist=[0.9971989983534086, 0.9855488723192819, 0, 0.979924988605467, 0]\n\nfor i, V in enumerate(mylist):\n    if V==0:\n        count[i] += 1\n\nprint count\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 6464987, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210079512848065/picture?type=large", "display_name": "rablo", "link": "https://stackoverflow.com/users/6464987/rablo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 41272451, "answer_count": 3, "score": 0, "last_activity_date": 1482356896, "creation_date": 1482355885, "question_id": 41272213, "link": "https://stackoverflow.com/questions/41272213/index-issue-creating-a-counter-in-python", "title": "Index issue creating a counter in python", "body": "<p>What I want to do is a counter of 0 values in a list.\nI'm trying to make a counter using python, but it seems it is not working.\nI need to have the final list count with all the values.</p>\n\n<p>My code is:</p>\n\n<pre><code>count=[0,0,0,0,0]  #counter\nmylist=[0.9971989983534086, 0.9855488723192819, 0, 0.979924988605467, 0.9740293465156515]\n\nfor V in mylist:\n\n    J=mylist.index(V) #J is the index of V \n    if V==0:\n        count[J] = count[J] + 1\n\nprint count\n</code></pre>\n\n<p>As results I have:</p>\n\n<pre><code>[0, 0, 1, 0, 0]\n</code></pre>\n\n<p>The problem is when I have 2 zeros on mylist:</p>\n\n<pre><code>count=[0,0,0,0,0]  #counter\nmylist=[0.9971989983534086, 0.9855488723192819, 0, 0.979924988605467, 0]\n\nfor V in mylist:\n\n    J=mylist.index(V)\n    if V==0:\n        count[J] = count[J] + 1\n\nprint count\n</code></pre>\n\n<p>The results is: \n<code>[0, 0, 2, 0, 0]</code> instead of <code>[0, 0, 1, 0, 1]</code></p>\n\n<p>It looks like it takes always the same J if V==0. </p>\n\n<p>Any idea to fix it ?</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 5300, "user_id": 4727702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EfsoQ.jpg?s=128&g=1", "display_name": "Yevhen Kuzmovych", "link": "https://stackoverflow.com/users/4727702/yevhen-kuzmovych"}, "is_accepted": false, "score": 0, "last_activity_date": 1482355996, "creation_date": 1482355996, "answer_id": 41272245, "question_id": 41272186, "link": "https://stackoverflow.com/questions/41272186/python-is-there-a-quick-way-to-break-out-of-all-functions-return-to-main-loop/41272245#41272245", "title": "Python: Is there a quick way to break out of all functions? Return to main loop?", "body": "<p>You can use exceptions</p>\n\n<pre><code>def func_1():\n    func_2()\n\ndef func_2():\n    func_3()\n\ndef func_3():\n    if condition:\n        raise Exception('something happened')\n\ntry:\n    func_1()\nexcept Exception:\n    pass\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35962, "user_id": 1399279, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e2e566682f50d53a06a121d82f7ed8de?s=128&d=identicon&r=PG", "display_name": "SethMMorton", "link": "https://stackoverflow.com/users/1399279/sethmmorton"}, "reply_to_user": {"reputation": 19, "user_id": 2603003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c467f9fdb926fafa8ab0ea480fe4d586?s=128&d=identicon&r=PG", "display_name": "Plecto", "link": "https://stackoverflow.com/users/2603003/plecto"}, "edited": false, "score": 0, "creation_date": 1482426673, "post_id": 41272254, "comment_id": 69779131, "body": "Please take a look at the following link if this helped you: <a href=\"http://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>"}], "tags": [], "owner": {"reputation": 35962, "user_id": 1399279, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e2e566682f50d53a06a121d82f7ed8de?s=128&d=identicon&r=PG", "display_name": "SethMMorton", "link": "https://stackoverflow.com/users/1399279/sethmmorton"}, "is_accepted": false, "score": 1, "last_activity_date": 1482356050, "creation_date": 1482356050, "answer_id": 41272254, "question_id": 41272186, "link": "https://stackoverflow.com/questions/41272186/python-is-there-a-quick-way-to-break-out-of-all-functions-return-to-main-loop/41272254#41272254", "title": "Python: Is there a quick way to break out of all functions? Return to main loop?", "body": "<p>You can use Python's built-in exception mechanism to do this.  If you are going to go this route, I recommend a custom, well-named exception.</p>\n\n<pre><code>class JumpToMainLoop(Exception):\n    pass\n\ndef func_1():\n    func_2()\n\ndef func_2():\n    func_3()\n\ndef func_3():\n    raise JumpToMainLoop\n\ntry:\n    func_1()\nexcept JumpToMainLoop:\n    pass\n</code></pre>\n\n<p>Using a built-in exception (like <code>ValueError</code>) or worse a generic exception (like <code>Exception</code>) is not desirable since other things that can go wrong would be caught and missed by your <code>try: except:</code>.</p>\n"}], "owner": {"reputation": 19, "user_id": 2603003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c467f9fdb926fafa8ab0ea480fe4d586?s=128&d=identicon&r=PG", "display_name": "Plecto", "link": "https://stackoverflow.com/users/2603003/plecto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1015, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1482356050, "creation_date": 1482355760, "question_id": 41272186, "link": "https://stackoverflow.com/questions/41272186/python-is-there-a-quick-way-to-break-out-of-all-functions-return-to-main-loop", "title": "Python: Is there a quick way to break out of all functions? Return to main loop?", "body": "<p>Quick example:</p>\n\n<pre><code>def func_1():\n    func_2()\n\ndef func_2():\n    func_3()\n\ndef func_3():\n    #Finds condition to end all calculations and break of out all functions\n\nfunc_1()\n</code></pre>\n\n<p>I have some code with functions running other functions running other functions all together doing a lot of time consuming audio calculations. I have a \"stop test\" tkinter button that I want to stop all testing with, but for that to happen, all functions has be broken out of. Is there a quick way to do this? To check for a stop condition would require butloads of IF-statements as the stop conditon can be set at any time during the calculation.</p>\n"}, {"tags": ["python", "python-2.7", "oop"], "answers": [{"comments": [{"owner": {"reputation": 1670, "user_id": 2140932, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/ca88a8f0c7b45b934594eaf22d1dc55c?s=128&d=identicon&r=PG", "display_name": "Rafael C.", "link": "https://stackoverflow.com/users/2140932/rafael-c"}, "edited": false, "score": 0, "creation_date": 1482355511, "post_id": 41272108, "comment_id": 69745675, "body": "Worked Will. Thanks a lot."}, {"owner": {"reputation": 3591, "user_id": 4107956, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LjlBF.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/4107956/will"}, "reply_to_user": {"reputation": 1670, "user_id": 2140932, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/ca88a8f0c7b45b934594eaf22d1dc55c?s=128&d=identicon&r=PG", "display_name": "Rafael C.", "link": "https://stackoverflow.com/users/2140932/rafael-c"}, "edited": false, "score": 1, "creation_date": 1482355780, "post_id": 41272108, "comment_id": 69745805, "body": "Glad to help!  Also, an <code>__init__()</code> method may not be necessary, but I find it helps with keeping organized.  See here: <a href=\"http://stackoverflow.com/questions/8609153/why-do-we-use-init-in-python-classes\" title=\"why do we use init in python classes\">stackoverflow.com/questions/8609153/&hellip;</a>"}, {"owner": {"reputation": 1670, "user_id": 2140932, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/ca88a8f0c7b45b934594eaf22d1dc55c?s=128&d=identicon&r=PG", "display_name": "Rafael C.", "link": "https://stackoverflow.com/users/2140932/rafael-c"}, "edited": false, "score": 0, "creation_date": 1485291817, "post_id": 41272108, "comment_id": 70863139, "body": "I&#39;m having the same problem again, see my code here: <a href=\"https://gist.github.com/anonymous/61e2a757b451871867964966a36940d5\" rel=\"nofollow noreferrer\">gist.github.com/anonymous/61e2a757b451871867964966a36940d5</a> and I&#39;m getting the error <code>AttributeError: &#39;CreateContractor&#39; object has no attribute &#39;firstname&#39;</code> Any idea?"}, {"owner": {"reputation": 3591, "user_id": 4107956, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LjlBF.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/4107956/will"}, "reply_to_user": {"reputation": 1670, "user_id": 2140932, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/ca88a8f0c7b45b934594eaf22d1dc55c?s=128&d=identicon&r=PG", "display_name": "Rafael C.", "link": "https://stackoverflow.com/users/2140932/rafael-c"}, "edited": false, "score": 0, "creation_date": 1485292709, "post_id": 41272108, "comment_id": 70863562, "body": "It&#39;s hard to say with no context, at first glace that code seems fine.  If I were going to guess, I would say something to do with <code>fake.first_name()</code> or possibly with the order in which you are calling these methods. Open a new question and post not just the class, but the code that uses the class as well."}], "tags": [], "owner": {"reputation": 3591, "user_id": 4107956, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LjlBF.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/4107956/will"}, "is_accepted": false, "score": 5, "last_activity_date": 1482355376, "creation_date": 1482355376, "answer_id": 41272108, "question_id": 41272087, "link": "https://stackoverflow.com/questions/41272087/calling-a-variable-from-another-method-in-the-same-class/41272108#41272108", "title": "Calling a variable from another method in the same class", "body": "<p>You need to set it to an instance variable by using <code>self</code>:</p>\n\n<pre><code>class UpdateTallysheet(Page):\n    def confirme_status_capture_exp_value(self):\n        self.select_dropdown_value(EventsLocators.STATUS, \"8\")\n        self.value_1 = self.find_element(EventsLocators.EXAM_EXP_VALUE).get_attribute(\"value\")\n        self.value_2 = self.find_element(EventsLocators.PANO_EXP_VALUE).get_attribute(\"value\")\n        self.value_3 = self.find_element(EventsLocators.TREATMENT_EXP_VALUE).get_attribute(\"value\")\n</code></pre>\n\n<p>Then you can use it in another method by using <code>self.value_1</code></p>\n"}], "owner": {"reputation": 1670, "user_id": 2140932, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/ca88a8f0c7b45b934594eaf22d1dc55c?s=128&d=identicon&r=PG", "display_name": "Rafael C.", "link": "https://stackoverflow.com/users/2140932/rafael-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3112, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1566320548, "creation_date": 1482355234, "last_edit_date": 1566320548, "question_id": 41272087, "link": "https://stackoverflow.com/questions/41272087/calling-a-variable-from-another-method-in-the-same-class", "title": "Calling a variable from another method in the same class", "body": "<p><strong>My scenario</strong></p>\n\n<p>I only have one class with two methods. In the first method I store values in a variable. In the second method I try to call these variables</p>\n\n<pre><code>class UpdateTallysheet(Page):\n\n    def confirme_status_capture_exp_value(self):\n\n        self.select_dropdown_value(EventsLocators.STATUS, \"8\")\n        value_1 = self.find_element(EventsLocators.EXAM_EXP_VALUE).get_attribute(\"value\")\n        value_2 = self.find_element(EventsLocators.PANO_EXP_VALUE).get_attribute(\"value\")\n        value_3 = self.find_element(EventsLocators.TREATMENT_EXP_VALUE).get_attribute(\"value\")\n\n        self.find_element(EventsLocators.SAVE_BUTTON).click()\n        WebDriverWait(self.driver, AUTOCOMPLETE_TIMEOUT).until(\n            EC.text_to_be_present_in_element((By.CLASS_NAME, \"success\"), 'Event updated successfully'))\n        self.find_element(EventsLocators.TALLYSHEET_LINK).click()\n\n    def fill_date(self):\n\n        self.select_current_date(EventsLocators.DATE_RECEIVED, EventsLocators.CURRENT_DATE)\n        self.select_current_date(EventsLocators.DATE_COMPLETED, EventsLocators.CURRENT_DATE)\n        print self.value_1\n</code></pre>\n\n<p><strong>My error</strong></p>\n\n<blockquote>\n  <p>AttributeError: 'UpdateTallysheet' object has no attribute 'value_1'</p>\n</blockquote>\n\n<p>How can I use the variable <code>value_1</code> in another method?</p>\n"}, {"tags": ["python", "mongodb", "dictionary", "pymongo", "aggregation-framework"], "comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 2, "creation_date": 1482355542, "post_id": 41272083, "comment_id": 69745688, "body": "Can you create a mapping of <code>&#39;name&#39;</code> -&gt; <code>&#39;color&#39;</code> and then use that mapping  with <code>name_list</code> to construct the color_list?  I don&#39;t know enough about mongodb to know if this could be done efficiently, but it seems like it could be..."}], "answers": [{"comments": [{"owner": {"reputation": 49301, "user_id": 3100115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46d2b7e69a0a4a82fefdd01a8cf476bd?s=128&d=identicon&r=PG&f=1", "display_name": "styvane", "link": "https://stackoverflow.com/users/3100115/styvane"}, "edited": false, "score": 0, "creation_date": 1482412700, "post_id": 41272637, "comment_id": 69769774, "body": "Collection object is not iterable. This will miserably fail with a beautiful TypeError"}, {"owner": {"reputation": 3072, "user_id": 6611672, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fa3f99cc3070ae57d877e08f9564ed22?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Metz", "link": "https://stackoverflow.com/users/6611672/johnny-metz"}, "edited": false, "score": 0, "creation_date": 1482425566, "post_id": 41272637, "comment_id": 69778468, "body": "This is a clean way of doing it if the dictionaries are in python and there&#39;s little data to iterate through."}, {"owner": {"reputation": 49301, "user_id": 3100115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46d2b7e69a0a4a82fefdd01a8cf476bd?s=128&d=identicon&r=PG&f=1", "display_name": "styvane", "link": "https://stackoverflow.com/users/3100115/styvane"}, "reply_to_user": {"reputation": 3072, "user_id": 6611672, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fa3f99cc3070ae57d877e08f9564ed22?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Metz", "link": "https://stackoverflow.com/users/6611672/johnny-metz"}, "edited": false, "score": 0, "creation_date": 1482426556, "post_id": 41272637, "comment_id": 69779063, "body": "@jcmetz21 I failed to see how this is <i>a clean way</i>. <code>db.favoriteColors</code> is a <code>Collection</code> object and does not implement the iterator protocol so this query will return a TypeError as I mentioned."}, {"owner": {"reputation": 3072, "user_id": 6611672, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fa3f99cc3070ae57d877e08f9564ed22?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Metz", "link": "https://stackoverflow.com/users/6611672/johnny-metz"}, "edited": false, "score": 0, "creation_date": 1482520987, "post_id": 41272637, "comment_id": 69816637, "body": "It works if I throw the dictionaries into a list and iterate over the list. But I do agree this is terrible practice if we&#39;re grabbing the dictionaries from MongoDB"}], "tags": [], "owner": {"reputation": 10059, "user_id": 1004725, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/70933c957372222f139e1283208692ae?s=128&d=identicon&r=PG", "display_name": "Hans Then", "link": "https://stackoverflow.com/users/1004725/hans-then"}, "is_accepted": false, "score": 0, "last_activity_date": 1482447034, "last_edit_date": 1482447034, "creation_date": 1482357677, "answer_id": 41272637, "question_id": 41272083, "link": "https://stackoverflow.com/questions/41272083/iterating-over-a-dictionary-to-create-a-list/41272637#41272637", "title": "Iterating over a dictionary to create a list", "body": "<p>If the datasets are small, you can merge the dicts into a single new dict.</p>\n\n<p>In python3 you can do something like this:</p>\n\n<pre><code>names = [\"Steve\", \"Steve\", \"Ben\", \"Ben\", \"Johnny\"]\nfavorites = {d[\"name\"]: d[\"color\"] for d in db.favoriteColors.find()}\ncolors = [favorites[name] for name in names]\nprint(colors)\n</code></pre>\n\n<h1>Updated</h1>\n\n<p>As styvane mentioned I forgot to call the <code>find</code> method on the <code>Collection</code>. Answer updated accordingly.</p>\n"}, {"comments": [{"owner": {"reputation": 49301, "user_id": 3100115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46d2b7e69a0a4a82fefdd01a8cf476bd?s=128&d=identicon&r=PG&f=1", "display_name": "styvane", "link": "https://stackoverflow.com/users/3100115/styvane"}, "edited": false, "score": 1, "creation_date": 1482412626, "post_id": 41274518, "comment_id": 69769720, "body": "Not the way to do this. What if you have 1  million documents that match your queries?"}, {"owner": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "reply_to_user": {"reputation": 49301, "user_id": 3100115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46d2b7e69a0a4a82fefdd01a8cf476bd?s=128&d=identicon&r=PG&f=1", "display_name": "styvane", "link": "https://stackoverflow.com/users/3100115/styvane"}, "edited": false, "score": 0, "creation_date": 1482420945, "post_id": 41274518, "comment_id": 69775293, "body": "The OP didn&#39;t say that his queries are huge like you&#39;ve said. But thanks for your comment. I&#39;ll try to improve my answer."}], "tags": [], "owner": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "is_accepted": false, "score": 0, "last_activity_date": 1482409554, "last_edit_date": 1482409554, "creation_date": 1482370257, "answer_id": 41274518, "question_id": 41272083, "link": "https://stackoverflow.com/questions/41272083/iterating-over-a-dictionary-to-create-a-list/41274518#41274518", "title": "Iterating over a dictionary to create a list", "body": "<p>You can also create a new <code>dict</code> from your current dicts in which every value of <code>dict[\"name\"]</code> will be associated with <code>dict[\"color\"]</code> value.</p>\n\n<p>For example: the new dict will be like:</p>\n\n<pre><code>{\"Jhonny\": \"green\", \"Steve\": \"blue\"}\n</code></pre>\n\n<p>And you can use a function like the example below which accept many arguments and return the desired list (Also, it appends <code>None</code> if there is any name in the input list that is not present in the default dicts):</p>\n\n<p>Here is my example:</p>\n\n<pre><code>a = { \"name\" : \"Johnny\", \"color\" : \"green\" }\nb = { \"name\" : \"Steve\", \"color\" : \"blue\" }\nc = { \"name\" : \"Ben\", \"color\" : \"red\" }\nd = { \"name\" : \"Timmy\", \"color\" : \"cyan\" }\n\nmy_list = [\"Steve\", \"Steve\", \"Ben\", \"Ben\", \"Johnny\"]\n\ndef iter_func(my_list = list, *args):\n    ne = {k[\"name\"]:k[\"color\"] for k in args}\n    return [ne[k] if k in ne.keys() else None for k in my_list]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>print(iter_func(my_list, a,b,c,d))\n&gt;&gt;&gt; ['blue', 'blue', 'red', 'red', 'green']\n</code></pre>\n\n<p>Example with <code>None</code> values:</p>\n\n<pre><code>a = { \"name\" : \"Johnny\", \"color\" : \"green\" }\nb = { \"name\" : \"Steve\", \"color\" : \"blue\" }\nc = { \"name\" : \"Ben\", \"color\" : \"red\" }\nd = { \"name\" : \"Timmy\", \"color\" : \"cyan\" }\n\nmy_list = [\"Steve\", \"Steve\", \"Alex\", \"Ben\", \"Ben\", \"Johnny\", \"Mark\"]\n\ndef iter_func(my_list = list, *args):\n    ne = {k[\"name\"]:k[\"color\"] for k in args}\n    return [ne[k] if k in ne.keys() else None for k in my_list]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>print(iter_func(my_list, a,b,c,d))\n&gt;&gt;&gt; ['blue', 'blue', None, 'red', 'red', 'green', None]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "edited": false, "score": 0, "creation_date": 1482421159, "post_id": 41284019, "comment_id": 69775426, "body": "Can you share the benchmark of your answer with enough queries ?. It seems effecient. Thanks."}, {"owner": {"reputation": 3072, "user_id": 6611672, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fa3f99cc3070ae57d877e08f9564ed22?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Metz", "link": "https://stackoverflow.com/users/6611672/johnny-metz"}, "edited": false, "score": 0, "creation_date": 1482521111, "post_id": 41284019, "comment_id": 69816669, "body": "This seems to work but looks so complex. There&#39;s gotta be a simpler way to do this using the aggregation framework. Why do you need all those entries under <code>&quot;$project&quot;</code>"}, {"owner": {"reputation": 49301, "user_id": 3100115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46d2b7e69a0a4a82fefdd01a8cf476bd?s=128&d=identicon&r=PG&f=1", "display_name": "styvane", "link": "https://stackoverflow.com/users/3100115/styvane"}, "reply_to_user": {"reputation": 3072, "user_id": 6611672, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fa3f99cc3070ae57d877e08f9564ed22?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Metz", "link": "https://stackoverflow.com/users/6611672/johnny-metz"}, "edited": false, "score": 0, "creation_date": 1482562259, "post_id": 41284019, "comment_id": 69825372, "body": "@jcmetz21 I don&#39;t think that this is complex, I will add explanation and possibly another way to do this if the elements in the output list do not need to appear in this exact order but it is not going to be <i>simpler</i>"}, {"owner": {"reputation": 3072, "user_id": 6611672, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fa3f99cc3070ae57d877e08f9564ed22?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Metz", "link": "https://stackoverflow.com/users/6611672/johnny-metz"}, "edited": false, "score": 0, "creation_date": 1483590127, "post_id": 41284019, "comment_id": 70160223, "body": "The elements need to be in the exact order so this looks good. Thanks!"}, {"owner": {"reputation": 49301, "user_id": 3100115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46d2b7e69a0a4a82fefdd01a8cf476bd?s=128&d=identicon&r=PG&f=1", "display_name": "styvane", "link": "https://stackoverflow.com/users/3100115/styvane"}, "reply_to_user": {"reputation": 3072, "user_id": 6611672, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fa3f99cc3070ae57d877e08f9564ed22?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Metz", "link": "https://stackoverflow.com/users/6611672/johnny-metz"}, "edited": false, "score": 0, "creation_date": 1483646351, "post_id": 41284019, "comment_id": 70193255, "body": "@jcmetz21 my answer does not just look good. It is the best way to do this. There may be another way to do this in MongoDB 3.4."}], "tags": [], "owner": {"reputation": 49301, "user_id": 3100115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46d2b7e69a0a4a82fefdd01a8cf476bd?s=128&d=identicon&r=PG&f=1", "display_name": "styvane", "link": "https://stackoverflow.com/users/3100115/styvane"}, "is_accepted": true, "score": 1, "last_activity_date": 1482412372, "creation_date": 1482412372, "answer_id": 41284019, "question_id": 41272083, "link": "https://stackoverflow.com/questions/41272083/iterating-over-a-dictionary-to-create-a-list/41284019#41284019", "title": "Iterating over a dictionary to create a list", "body": "<p>Actually, we can use the aggregation framework with client side processing to efficiently do this.</p>\n\n<pre><code>import pymongo\n\n\nclient = pymongo.MongoClient()\ndb = client.test # Or whatever is your database\nfavoriteColors = db.favoriteColors\nfirst_list = ['Johnny', 'Steve', 'Ben', 'Johnny']\n\ncursor = favoriteColors.aggregate([\n    {'$match': {'name': {'$in': first_list}}}, \n    {'$project': {'part': {'$map': {\n        'input': first_list, \n        'as': 'inp', \n        'in': {\n            '$cond': [\n                {'$eq': [ '$$inp', '$name']}, \n                '$color', \n                None\n            ]\n        }\n    }}}},\n    {'$group': {'_id': None, 'data': {'$push': '$part'}}}\n])\n</code></pre>\n\n<p>Because we <a href=\"https://docs.mongodb.com/v3.4/reference/operator/aggregation/group/\" rel=\"nofollow noreferrer\"><code>$group</code></a> by None, our cursor contains one document which we can retrieve using <code>next</code>. In fact the way we can verify that with <code>print(list(cursor))</code> </p>\n\n<pre><code>&gt;&gt;&gt; import pprint\n&gt;&gt;&gt; pprint.pprint(list(cursor))\n[{'_id': None,\n  'data': [['green', None, None, 'green'],\n           [None, 'blue', None, None],\n           [None, None, 'red', None]]}]\n</code></pre>\n\n<p>From here, we need to <em>unpack</em> the \"data\" field in the document with <a href=\"https://docs.python.org/3.6/library/functions.html#zip\" rel=\"nofollow noreferrer\"><code>zip</code></a>, chain the inputs using <a href=\"https://docs.python.org/3.6/library/itertools.html#itertools.chain.from_iterable\" rel=\"nofollow noreferrer\"><code>chain.from_iterable</code></a> and filter out the elements that are <code>None</code>.</p>\n\n<pre><code>from itertools import chain\n\nresult = [item \n          for item in chain.from_iterable(zip(*next(cursor)['data']))\n          if item is not None]\n</code></pre>\n\n<p>Which returns:</p>\n\n<pre><code>&gt;&gt;&gt; result\n['green', 'blue', 'red', 'green']\n</code></pre>\n"}], "owner": {"reputation": 3072, "user_id": 6611672, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fa3f99cc3070ae57d877e08f9564ed22?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Metz", "link": "https://stackoverflow.com/users/6611672/johnny-metz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 0, "accepted_answer_id": 41284019, "answer_count": 3, "score": 5, "last_activity_date": 1482561375, "creation_date": 1482355218, "last_edit_date": 1482561375, "question_id": 41272083, "link": "https://stackoverflow.com/questions/41272083/iterating-over-a-dictionary-to-create-a-list", "title": "Iterating over a dictionary to create a list", "body": "<p>I have the following 4 dictionaries in a MongoDB collection called <code>favoriteColors</code>:</p>\n\n<pre><code>{ \"name\" : \"Johnny\", \"color\" : \"green\" }\n{ \"name\" : \"Steve\", \"color\" : \"blue\" },\n{ \"name\" : \"Ben\", \"color\" : \"red\" },\n{ \"name\" : \"Timmy\", \"color\" : \"cyan\" }\n</code></pre>\n\n<p>I'm trying to create an ORDERED list of color values matching a different ordered list.</p>\n\n<p>For example, if I have the list <code>[\"Johnny\", \"Steve\", \"Ben\", \"Johnny\"]</code> the new list will <code>[\"green\", \"blue\", \"red\", \"green\"]</code>.</p>\n\n<p>And if I have the list <code>[\"Steve\", \"Steve\", \"Ben\", \"Ben\", \"Johnny\"]</code> the new list will be <code>[\"blue\", \"blue\", \"red\", \"red\", \"green\"]</code>.</p>\n\n<p>What's a good way of doing this using Python and/or PyMongo. This is what I have so far but it's not recognizing duplicates.</p>\n\n<pre><code>name_list = [\"Steve\", \"Steve\", \"Ben\", \"Ben\", \"Johnny\"]\n\ncolor_list = []\nfor document in db.favoriteColors.aggregate([\n    {\"$match\": {\"name\": {\"$in\": name_list }}},\n    {\"$project\": {\"color\": 1}}\n]):\n    for k, v in document.iteritems():\n        color_list.append(v)\n\nprint color_list\n# [\"blue\", \"red\", \"green\"]\n</code></pre>\n"}, {"tags": ["python", "algorithm"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1482355305, "post_id": 41272045, "comment_id": 69745574, "body": "Aren&#39;t you just asking if <code>random.random()</code> is uniformly distributed? That&#39;s a programming question. The rest does not appear to be."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 4, "creation_date": 1482355478, "post_id": 41272045, "comment_id": 69745653, "body": "You&#39;re talking about the unit disc, not the unit circle."}, {"owner": {"reputation": 21, "user_id": 6913568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mepkK.jpg?s=128&g=1", "display_name": "curious", "link": "https://stackoverflow.com/users/6913568/curious"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1482355568, "post_id": 41272045, "comment_id": 69745704, "body": "@jonrsharpe No, the actual point is that if I have a condition under which I &quot;re-roll&quot;, will the fact that <code>random()</code> is deterministic after the first call have any influence on the distribution of the result. It certaintly would not if <code>random()</code> was generated using actual randomness."}, {"owner": {"reputation": 21, "user_id": 6913568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mepkK.jpg?s=128&g=1", "display_name": "curious", "link": "https://stackoverflow.com/users/6913568/curious"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1482355613, "post_id": 41272045, "comment_id": 69745731, "body": "@EricDuminil Thanks, I am going to correct that!"}, {"owner": {"reputation": 21, "user_id": 6913568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mepkK.jpg?s=128&g=1", "display_name": "curious", "link": "https://stackoverflow.com/users/6913568/curious"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1482356034, "post_id": 41272045, "comment_id": 69745906, "body": "@chepner I am absolutely aware of this, this is how I would have done it in the first place, the algorithm in question is not mine however."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1482356230, "post_id": 41272045, "comment_id": 69746006, "body": "@chepner: r can be between 0 and 1."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1482356296, "post_id": 41272045, "comment_id": 69746044, "body": "@EricDuminil I was still working off the original question that asked about the unit circle."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1482356830, "post_id": 41272045, "comment_id": 69746277, "body": "Okay. I wasn&#39;t sure at first either, but the code made it clear."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6913568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mepkK.jpg?s=128&g=1", "display_name": "curious", "link": "https://stackoverflow.com/users/6913568/curious"}, "edited": false, "score": 1, "creation_date": 1482355716, "post_id": 41272127, "comment_id": 69745769, "body": "I would appreciate if you could elaborate on that &quot;no&quot;"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 21, "user_id": 6913568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mepkK.jpg?s=128&g=1", "display_name": "curious", "link": "https://stackoverflow.com/users/6913568/curious"}, "edited": false, "score": 0, "creation_date": 1482357868, "post_id": 41272127, "comment_id": 69746782, "body": "@curious: I&#39;ve added some elaboration."}, {"owner": {"reputation": 21, "user_id": 6913568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mepkK.jpg?s=128&g=1", "display_name": "curious", "link": "https://stackoverflow.com/users/6913568/curious"}, "edited": false, "score": 0, "creation_date": 1482358724, "post_id": 41272127, "comment_id": 69747154, "body": "Thanks, this seems to make sense to me. I did finally decide to ask this on math.se to get an answer independent of the usual restrictions in computing. I know that no pseudo-RNG out there would ever produce a completely uniform distribution, let alone the collisions implied by that. The point of this cancelling out the bias in the distribution is however very much appreciated. I think this passes as the answer to the question in context of programming."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1482357821, "last_edit_date": 1482357821, "creation_date": 1482355497, "answer_id": 41272127, "question_id": 41272045, "link": "https://stackoverflow.com/questions/41272045/does-this-algorithm-generate-a-uniform-distribution-on-the-unit-disc-determinis/41272127#41272127", "title": "Does this algorithm generate a uniform distribution on the unit disc (deterministic RNG)?", "body": "<blockquote>\n  <p>will this algorithm return every point obtainable with the same probability?</p>\n</blockquote>\n\n<p>Technically no, but a long RNG period essentially neutralizes the effect, and the exact probabilities of specific points aren't what we care about when sampling from continuous distributions anyway. Rejection sampling this way should be fine.</p>\n\n<p>Your analysis is correct, so far as the fact that if seed <code>s</code> results in a rejection and the result from <code>s'</code> is used instead, then both seeds produce the same output. However, for a long enough RNG period, many seeds will naturally correspond to the same output, and (assuming good statistical properties of the underlying RNG) this doubling effect will be spread near-uniformly across all possible outputs, so even the distribution over individual output points won't be compromised. Python's default RNG is Mersenne Twister, and the period of that is huge.</p>\n\n<p>Even if the above didn't hold, we wouldn't care. We're already accepting a fundamental non-uniformity in the fact that we literally can't even represent, let alone generate, almost all points in the unit disc. If some of the individual points we <em>can</em> generate get a higher weight than others, that doesn't really matter, as long as it doesn't introduce any important statistical biases. If points on the left got a higher weight than points on the right, we'd care. If points in one statistically-indistinguishable-from-uniform set get a higher weight than points in a different statistically-indistinguishable-from-uniform set, it's not a big deal.</p>\n\n<p>Finally, if seed <code>s</code> gets rejected and seed <code>s'</code> gets used in its place, that's two seeds that would give the same output, but we don't actually see that output twice, because we advanced past both seeds. If we're generating a sequence of points this way, without other intervening uses of the RNG, this mostly eliminates the effect you're worried about.</p>\n"}, {"comments": [{"owner": {"reputation": 35644, "user_id": 4954037, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YOM4r.jpg?s=128&g=1", "display_name": "hiro protagonist", "link": "https://stackoverflow.com/users/4954037/hiro-protagonist"}, "edited": false, "score": 0, "creation_date": 1482356509, "post_id": 41272285, "comment_id": 69746147, "body": "...and i was just about to ask you to visualize that. great timing!"}, {"owner": {"reputation": 21, "user_id": 6913568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mepkK.jpg?s=128&g=1", "display_name": "curious", "link": "https://stackoverflow.com/users/6913568/curious"}, "edited": false, "score": 0, "creation_date": 1482356545, "post_id": 41272285, "comment_id": 69746165, "body": "The problem I see with this is that the points are not placed independently of each other. Sure, every re-run of the program generates a new seed and is thus perfectly random, but after the initial point is discarded, another one is generated and this one depends on the previous on via the mersenne twister algorithm."}, {"owner": {"reputation": 21, "user_id": 6913568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mepkK.jpg?s=128&g=1", "display_name": "curious", "link": "https://stackoverflow.com/users/6913568/curious"}, "edited": false, "score": 0, "creation_date": 1482356719, "post_id": 41272285, "comment_id": 69746238, "body": "Considering your edit, I am not suggesting the difference will be big enough to be noticable by the human eye."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1487156210, "last_edit_date": 1487156210, "creation_date": 1482356167, "answer_id": 41272285, "question_id": 41272045, "link": "https://stackoverflow.com/questions/41272045/does-this-algorithm-generate-a-uniform-distribution-on-the-unit-disc-determinis/41272285#41272285", "title": "Does this algorithm generate a uniform distribution on the unit disc (deterministic RNG)?", "body": "<p>My point of view might be too simplistic, but you basically generate points inside the bounding box between (-1,-1) and (1,1), and remove every point outside the unit disk. You don't shuffle anything, you don't move any point, you just cut a shape into another one.</p>\n\n<p>The points inside the unit disk will be just as uniformly distributed as those in the square. It doesn't mean they are uniformly distributed. Just that your analysis shouldn't be influenced by the <code>while r &gt;= 1:</code>.</p>\n\n<p>Here are 1E6 points out of your algorithm :</p>\n\n<p><a href=\"https://i.stack.imgur.com/e8msw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e8msw.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 6913568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mepkK.jpg?s=128&g=1", "display_name": "curious", "link": "https://stackoverflow.com/users/6913568/curious"}, "edited": false, "score": 0, "creation_date": 1482356300, "post_id": 41272286, "comment_id": 69746046, "body": "As I said in a comment, I am aware of this method and it would be my preferred style of implementation. However, the proposed algorithm is not mine and I am curious to know if the results would be the same."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1482356356, "post_id": 41272286, "comment_id": 69746073, "body": "&quot;some of your samples will get outside of the circle&quot; - those get rejected. We don&#39;t actually output those."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1482356859, "post_id": 41272286, "comment_id": 69746293, "body": "Note : <code>r = math.sqrt(random.random())</code> is really important. See <a href=\"http://mathworld.wolfram.com/DiskPointPicking.html\" rel=\"nofollow noreferrer\">mathworld.wolfram.com/DiskPointPicking.html</a>"}, {"owner": {"reputation": 2017, "user_id": 7264476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/804ccec29cfd87c0081304fb1d7a2288?s=128&d=identicon&r=PG&f=1", "display_name": "Gribouillis", "link": "https://stackoverflow.com/users/7264476/gribouillis"}, "edited": false, "score": 0, "creation_date": 1482357236, "post_id": 41272286, "comment_id": 69746479, "body": "We also have the re-roll question for this algorithm, it looks like r and theta may not be independent random variables."}, {"owner": {"reputation": 141, "user_id": 3439675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d959f6b70882ff4ba584b9490d4749c?s=128&d=identicon&r=PG", "display_name": "olgierdh", "link": "https://stackoverflow.com/users/3439675/olgierdh"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1482412081, "post_id": 41272286, "comment_id": 69769362, "body": "@user2357112 yes you are right, thanks for pointing that - I was more concerned about the unpredictability of the solution with rejection. In terms of the correctness of uniform distribution that doesn&#39;t change much as it has been shown by others :)"}], "tags": [], "owner": {"reputation": 141, "user_id": 3439675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d959f6b70882ff4ba584b9490d4749c?s=128&d=identicon&r=PG", "display_name": "olgierdh", "link": "https://stackoverflow.com/users/3439675/olgierdh"}, "is_accepted": false, "score": 1, "last_activity_date": 1482412879, "last_edit_date": 1482412879, "creation_date": 1482356172, "answer_id": 41272286, "question_id": 41272045, "link": "https://stackoverflow.com/questions/41272045/does-this-algorithm-generate-a-uniform-distribution-on-the-unit-disc-determinis/41272286#41272286", "title": "Does this algorithm generate a uniform distribution on the unit disc (deterministic RNG)?", "body": "<p>The answer to your question is <strike>no</strike> yes. This algorithm will <strike>not</strike> provide uniform distribution inside a unit circle. <strike>The reason is that some of your samples will get outside of the circle</strike>. In order to get the <strike>mathematically correct</strike> predictable uniform distribution you have to use polar coordinates and for such coordinates your code sample should do this:</p>\n\n<pre><code>def get_random_point_in_unit_circle():\n    theta = random.random() * ( 2 * math.pi )\n    r = math.sqrt(random.random())\n    x = r * math.cos( theta )\n    y = r * math.sin( theta )\n    return (x, y)\n</code></pre>\n\n<p>edit:</p>\n\n<p>So my answer is not entirely correct, thanks for pointing that out. In terms of the probability your function provides uniform distribution as the probability of getting the sample within the area is constant. The drawback of solution with rejection is unpredictability.   </p>\n"}, {"tags": [], "owner": {"reputation": 51837, "user_id": 2144669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7393f439028063515255b63ed94cfd?s=128&d=identicon&r=PG", "display_name": "David Eisenstat", "link": "https://stackoverflow.com/users/2144669/david-eisenstat"}, "is_accepted": false, "score": 1, "last_activity_date": 1482357125, "creation_date": 1482357125, "answer_id": 41272500, "question_id": 41272045, "link": "https://stackoverflow.com/questions/41272045/does-this-algorithm-generate-a-uniform-distribution-on-the-unit-disc-determinis/41272500#41272500", "title": "Does this algorithm generate a uniform distribution on the unit disc (deterministic RNG)?", "body": "<p>There are several approximations on top of one another. </p>\n\n<p>Floats are merely an approximation to real numbers. </p>\n\n<p>Python random doesn't even give a correctly rounded random real; it gives a uniform distribution on 0, 1/2^53, 2/2^53, ..., (2^53-1)/2^53 assuming a uniform source.</p>\n\n<p>The source is only approximately uniform because MT states cannot be zero.</p>\n\n<p>Even if the source were uniform random in each particular sample given a true random seed, enough subsequent samples are not independent, because that's how pseudorandom generators work.</p>\n\n<p>Given that the seed is finite, it's impossible to generate uniform distributions that have a number of outcomes that does not divide the size of seed space. This is almost certainly the case for your distribution.</p>\n"}], "owner": {"reputation": 21, "user_id": 6913568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mepkK.jpg?s=128&g=1", "display_name": "curious", "link": "https://stackoverflow.com/users/6913568/curious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 0, "accepted_answer_id": 41272127, "answer_count": 4, "score": 1, "last_activity_date": 1487156210, "creation_date": 1482355028, "last_edit_date": 1490005771, "question_id": 41272045, "link": "https://stackoverflow.com/questions/41272045/does-this-algorithm-generate-a-uniform-distribution-on-the-unit-disc-determinis", "title": "Does this algorithm generate a uniform distribution on the unit disc (deterministic RNG)?", "body": "<p>Consider the following algorithm:</p>\n\n<pre><code>r = 2\nwhile r &gt;= 1:\n    x = -1 + 2 * random.random()\n    y = -1 + 2 * random.random()\n    r = x * x + y * y\n</code></pre>\n\n<p>Now if my research is correct, python's random module uses the system time as the initial seed (let us consider this to be uniformly distributed) and after that generates a deterministic sequence of numbers using the <a href=\"https://en.wikipedia.org/wiki/Mersenne_Twister\" rel=\"nofollow noreferrer\">mersenne twister algorithm</a> where every call to <code>random.random()</code> will result in a number between 0 (inclusive) and 1 (exclusive).</p>\n\n<p>When the algorithm terminates, the point <code>(x,y)</code> should be somewhere on the unit disc. Due to the limits of floating-point arithmetic, we can of course not obtain every point inside the unit disc, but <em>among those we can obtain, will this algorithm result in a uniform distribution?</em></p>\n\n<p>Or, equivalently, <em>will this algorithm return every point obtainable with the same probability?</em></p>\n\n<p>I considered posting this to math.se, but since the question is closely related to python and algorithms, I assumed StackOverflow to be more appropriate.</p>\n\n<p>Now my intuition tells me the distribution is not uniform. Consider a seed <code>s1</code> for which the point initially generated is not inside the unit disc, the algorithm will then deterministically generate a new point <code>(x,y)</code> (let us assume this point to be inside the unit circle) and terminate. Now I would assume there is a seed <code>s2</code> for which the point initially generated equals the point <code>(x,y)</code> generated by <code>s1</code>.</p>\n\n<p>Apparently, I can generate <code>(x,y)</code> by using at least 2 different seeds, of which one actually generated a different point outside the unit circle first. Now since the unit disc does not contain half the area of <code>[-1,1) x [-1,1)</code>, I would conclude that not every point is generated by the same number of seeds, which would mean that for uniformly distributed seeds, the points returned are not chosen uniformly.</p>\n\n<p>To prevent this from becoming an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY question</a>, please consider above paragraph to be part of my research and not the central point of this question. The actual question is the one printed in <em>italics</em>.</p>\n"}, {"tags": ["python", "arrays", "list", "numpy"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1482355152, "post_id": 41271997, "comment_id": 69745499, "body": "Very very interesting."}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 1, "creation_date": 1482356039, "post_id": 41271997, "comment_id": 69745907, "body": "Is the non-homogenous list just as an example, or do you really have a list with many different types in it?"}, {"owner": {"reputation": 1015, "user_id": 6441544, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/696681407136603/picture?type=large", "display_name": "Lee88", "link": "https://stackoverflow.com/users/6441544/lee88"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 1, "creation_date": 1482356095, "post_id": 41271997, "comment_id": 69745942, "body": "@mgilson just my contrived example. I am working with a list of numpy arrays of equal dimension"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1482356563, "post_id": 41271997, "comment_id": 69746175, "body": "Could you recast this to use <code>is</code> instead of <code>==</code> for the comparison?"}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1482358392, "post_id": 41271997, "comment_id": 69747020, "body": "@MadPhysicist -- it turns out that if you use the same array, numpy python <i>will</i> do the right thing.  <code>lst = [array]; lst.find(array)  # 0</code>.  The reason for this is because <code>is</code> checks are lightning fast (pointer comparisons) and since it&#39;s fairly common to search for something in a list that you already have a reference to, python does an <code>is</code> comparison before falling back to the <code>==</code> comparison."}, {"owner": {"reputation": 130643, "user_id": 3923281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNpoa.jpg?s=128&g=1", "display_name": "Alex Riley", "link": "https://stackoverflow.com/users/3923281/alex-riley"}, "edited": false, "score": 0, "creation_date": 1482358807, "post_id": 41271997, "comment_id": 69747186, "body": "Related: <a href=\"http://stackoverflow.com/questions/27696763/checking-if-an-array-is-element-of-a-list-of-arrays/27697254#27697254\" title=\"checking if an array is element of a list of arrays\">stackoverflow.com/questions/27696763/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/5488307/numpy-array-in-python-list\" title=\"numpy array in python list\">stackoverflow.com/questions/5488307/numpy-array-in-python-li&zwnj;&#8203;st</a>"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1482372602, "post_id": 41271997, "comment_id": 69751015, "body": "@mgilson. Yes, except that only works out of the box for a single-element array. I was just wondering if that would help OP&#39;s real problem since it is possible  he is searching with  an instance already in the list."}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1482378588, "post_id": 41271997, "comment_id": 69752411, "body": "@MadPhysicist -- No, it works out of the box for arrays of arbitrary size.  e.g. in my example (when I tested it locally), <code>array = np.array([1,2,3])</code> and it works fine."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1482391964, "post_id": 41271997, "comment_id": 69757238, "body": "@mgilson. I messed up. I meant single element lists, or more specifically lists where the target array is not the first element . otherwise you will invoke == at least once because is will be false."}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1482416235, "post_id": 41271997, "comment_id": 69772071, "body": "@MadPhysicist -- Ahh yes, that makes sense.  You&#39;re right.  Good point."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1482423835, "post_id": 41271997, "comment_id": 69777310, "body": "@Lee88 So, <b>all elements</b> in input list are NumPy arrays?"}, {"owner": {"reputation": 1015, "user_id": 6441544, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/696681407136603/picture?type=large", "display_name": "Lee88", "link": "https://stackoverflow.com/users/6441544/lee88"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1482423948, "post_id": 41271997, "comment_id": 69777398, "body": "@Divakar yes, of all equal dimension as well. Sorry for the unnecessarily complex example. I learned a lot from your idea of checking the type beforehand."}], "answers": [{"comments": [{"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1482429262, "post_id": 41272218, "comment_id": 69780534, "body": "Note that this is not identical to <code>list.index</code> which throws a <code>ValueError</code> when there is no such item. But good and simple solution!"}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "reply_to_user": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1482432466, "post_id": 41272218, "comment_id": 69782090, "body": "@MSeifert -- Yeah.  I was going for an API that is a little more like <code>str.find</code>.  If you want an exception then you can just drop the <code>-1</code> part (only passing the generator to <code>next</code>).  In that case, you&#39;ll get a <code>StopIteration</code> if it wasn&#39;t found."}], "tags": [], "owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "is_accepted": true, "score": 12, "last_activity_date": 1482358436, "last_edit_date": 1482358436, "creation_date": 1482355898, "answer_id": 41272218, "question_id": 41271997, "link": "https://stackoverflow.com/questions/41271997/finding-the-index-of-a-numpy-array-in-a-list/41272218#41272218", "title": "Finding the index of a numpy array in a list", "body": "<p>The reason for the error here is obviously because numpy's ndarray overrides <code>==</code> to return an array rather than a boolean.</p>\n\n<p>AFAIK, there is no simple solution here.  The following will work so long as the <br><code>np.all(val == array)</code> bit works.</p>\n\n<pre><code>next((i for i, val in enumerate(lst) if np.all(val == array)), -1)\n</code></pre>\n\n<p>Whether that bit works or not depends critically on what the other elements in the array are and if they can be compared with numpy arrays.</p>\n"}, {"comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1482423418, "post_id": 41272276, "comment_id": 69776997, "body": "Unfortunately, OP&#39;s list consists of only numpy arrays to begin with (based on comments), so this will provide more overhead than optimization."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1482423514, "post_id": 41272276, "comment_id": 69777071, "body": "@MadPhysicist Really? I thought OP has a sample of <code>foo = [1, &quot;hello&quot;, np.array([[1,2,3]]) ]</code>, which is a mixed one. I missed that mention of <code>&quot;.. list consists of only numpy arrays&quot;</code>?"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1482423950, "post_id": 41272276, "comment_id": 69777399, "body": "Yeah. Third comment on the question. It makes sense that OP wanted the most generic answer, which is why he asked with the contrived array, but it does throw a damper on your answer unfortunately."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1482424061, "post_id": 41272276, "comment_id": 69777476, "body": "@MadPhysicist I guess I will keep it for future readers who might have a mixed form as input list. Might be useful for them."}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": false, "score": 2, "last_activity_date": 1482356133, "creation_date": 1482356133, "answer_id": 41272276, "question_id": 41271997, "link": "https://stackoverflow.com/questions/41271997/finding-the-index-of-a-numpy-array-in-a-list/41272276#41272276", "title": "Finding the index of a numpy array in a list", "body": "<p>For performance, you might want to process only the NumPy arrays in the input list. So, we could type-check before going into the loop and index into the elements that are arrays.</p>\n\n<p>Thus, an implementation would be -</p>\n\n<pre><code>def find_index_of_array_v2(list1, array1):\n    idx = np.nonzero([type(i).__module__ == np.__name__ for i in list1])[0]\n    for i in idx:\n        if np.all(list1[i]==array1):\n            return i\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1482423829, "post_id": 41272776, "comment_id": 69777308, "body": "OP said in comments that the real list will only contain arrays, so this will be a preprocessing step at best."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1482430917, "post_id": 41272776, "comment_id": 69781321, "body": "Technically, the first method only works reliably if there is exactly one array in the list, and you know up-front that that array is the one you are looking for."}, {"owner": {"reputation": 41121, "user_id": 2956066, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Bqbcr.png?s=128&g=1", "display_name": "kmario23", "link": "https://stackoverflow.com/users/2956066/kmario23"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1482431168, "post_id": 41272776, "comment_id": 69781440, "body": "Yes. Isn&#39;t the OP&#39;s question asking for the index of <i>a</i> numpy array?"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1482431367, "post_id": 41272776, "comment_id": 69781540, "body": "No. OP&#39;s question is how to get the <code>==</code> comparator to return a boolean with numpy arrays so he can find the correct index, as in your second solution."}], "tags": [], "owner": {"reputation": 41121, "user_id": 2956066, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Bqbcr.png?s=128&g=1", "display_name": "kmario23", "link": "https://stackoverflow.com/users/2956066/kmario23"}, "is_accepted": false, "score": 2, "last_activity_date": 1482425663, "last_edit_date": 1482425663, "creation_date": 1482358290, "answer_id": 41272776, "question_id": 41271997, "link": "https://stackoverflow.com/questions/41271997/finding-the-index-of-a-numpy-array-in-a-list/41272776#41272776", "title": "Finding the index of a numpy array in a list", "body": "<p>How about this one?</p>\n\n<pre><code>arr = np.array([[1,2,3]])\nfoo = np.array([1, 'hello', arr], dtype=np.object)\n\n# if foo array is of heterogeneous elements (str, int, array)\n[idx for idx, el in enumerate(foo) if type(el) == type(arr)]\n\n# if foo array has only numpy arrays in it\n[idx for idx, el in enumerate(foo) if np.array_equal(el, arr)]\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>[2]\n</code></pre>\n\n<p>Note: This will also work even if <code>foo</code> is a list. I just put it as a <code>numpy</code> array here.</p>\n"}, {"comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1482431115, "post_id": 41289138, "comment_id": 69781413, "body": "I kept looking for a way to override the array class itself, but that wouldn&#39;t help with existing objects. Very nice solution."}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1482431590, "post_id": 41289138, "comment_id": 69781657, "body": "@MadPhysicist Yeah, one could also work with <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.view.html\" rel=\"nofollow noreferrer\"><code>ndarray.view</code></a> and a subclass overriding <code>__eq__</code>. The steps remain the same, you need one pass to create a list of these views before applying the <code>list.index</code>-operations."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1482431942, "post_id": 41289138, "comment_id": 69781845, "body": "Yes, with the advantage that you could then use the subclass list as your only list without further modification to the surrounding code."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1482431979, "post_id": 41289138, "comment_id": 69781869, "body": "Either way you need more upvotes. If you put the subclassing way into a separate answer, I&#39;d upvote that too."}, {"owner": {"reputation": 1015, "user_id": 6441544, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/696681407136603/picture?type=large", "display_name": "Lee88", "link": "https://stackoverflow.com/users/6441544/lee88"}, "edited": false, "score": 0, "creation_date": 1482506539, "post_id": 41289138, "comment_id": 69810240, "body": "@MSeifert As a beginner to python, this was extremely useful to me from a teaching perspective. Thank you."}], "tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": false, "score": 2, "last_activity_date": 1482433466, "last_edit_date": 1482433466, "creation_date": 1482429165, "answer_id": 41289138, "question_id": 41271997, "link": "https://stackoverflow.com/questions/41271997/finding-the-index-of-a-numpy-array-in-a-list/41289138#41289138", "title": "Finding the index of a numpy array in a list", "body": "<p>The issue here (you probably know already but just to repeat it) is that <code>list.index</code> works along the lines of:</p>\n\n<pre><code>for idx, item in enumerate(your_list):\n    if item == wanted_item:\n        return idx\n</code></pre>\n\n<p>The line <code>if item == wanted_item</code> is the problem, because it implicitly converts <code>item == wanted_item</code> to a boolean. But <code>numpy.ndarray</code> (except if it's a scalar) raises this <code>ValueError</code> then:</p>\n\n<blockquote>\n  <p>ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()</p>\n</blockquote>\n\n<h1>Solution 1: adapter (thin wrapper) class</h1>\n\n<p>I generally use a thin wrapper (adapter) around <code>numpy.ndarray</code> whenever I need to use python functions like <code>list.index</code>:</p>\n\n<pre><code>class ArrayWrapper(object):\n\n    __slots__ = [\"_array\"]  # minimizes the memory footprint of the class.\n\n    def __init__(self, array):\n        self._array = array\n\n    def __eq__(self, other_array):\n        # array_equal also makes sure the shape is identical!\n        # If you don't mind broadcasting you can also use\n        # np.all(self._array == other_array)\n        return np.array_equal(self._array, other_array)\n\n    def __array__(self):\n        # This makes sure that `np.asarray` works and quite fast.\n        return self._array\n\n    def __repr__(self):\n        return repr(self._array)\n</code></pre>\n\n<p>These thin wrappers are more expensive than manually using some <code>enumerate</code> loop or comprehension but you don't have to re-implement the python functions. Assuming the list contains only numpy-arrays (otherwise you need to do some <code>if ... else ...</code> checking):</p>\n\n<pre><code>list_of_wrapped_arrays = [ArrayWrapper(arr) for arr in list_of_arrays]\n</code></pre>\n\n<p>After this step you can use all your python functions on this list:</p>\n\n<pre><code>&gt;&gt;&gt; list_of_arrays = [np.ones((3, 3)), np.ones((3)), np.ones((3, 3)) * 2, np.ones((3))]\n&gt;&gt;&gt; list_of_wrapped_arrays.index(np.ones((3,3)))\n0\n&gt;&gt;&gt; list_of_wrapped_arrays.index(np.ones((3)))\n1\n</code></pre>\n\n<p>These wrappers are not numpy-arrays anymore but you have thin wrappers so the extra list is quite small. So depending on your needs you could keep the wrapped list and the original list and choose on which to do the operations, for example you can also <code>list.count</code> the identical arrays now:</p>\n\n<pre><code>&gt;&gt;&gt; list_of_wrapped_arrays.count(np.ones((3)))\n2\n</code></pre>\n\n<p>or <code>list.remove</code>:</p>\n\n<pre><code>&gt;&gt;&gt; list_of_wrapped_arrays.remove(np.ones((3)))\n&gt;&gt;&gt; list_of_wrapped_arrays\n[array([[ 1.,  1.,  1.],\n        [ 1.,  1.,  1.],\n        [ 1.,  1.,  1.]]), \n array([[ 2.,  2.,  2.],\n        [ 2.,  2.,  2.],\n        [ 2.,  2.,  2.]]), \n array([ 1.,  1.,  1.])]\n</code></pre>\n\n<h1>Solution 2: subclass and <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.view.html\" rel=\"nofollow noreferrer\"><code>ndarray.view</code></a></h1>\n\n<p>This approach uses explicit subclasses of <code>numpy.array</code>. It has the advantage that you get all builtin array-functionality and only modify the requested operation (which would be <code>__eq__</code>):</p>\n\n<pre><code>class ArrayWrapper(np.ndarray):\n    def __eq__(self, other_array):\n        return np.array_equal(self, other_array)\n\n&gt;&gt;&gt; your_list = [np.ones(3), np.ones(3)*2, np.ones(3)*3, np.ones(3)*4]\n\n&gt;&gt;&gt; view_list = [arr.view(ArrayWrapper) for arr in your_list]\n\n&gt;&gt;&gt; view_list.index(np.array([2,2,2]))\n1\n</code></pre>\n\n<p>Again you get most list methods this way: <code>list.remove</code>, <code>list.count</code> besides <code>list.index</code>.</p>\n\n<p>However this approach may yield subtle behaviour if some operation implicitly uses <code>__eq__</code>. You can always re-interpret is as plain numpy array by using <code>np.asarray</code> or <code>.view(np.ndarray)</code>:</p>\n\n<pre><code>&gt;&gt;&gt; view_list[1]\nArrayWrapper([ 2.,  2.,  2.])\n\n&gt;&gt;&gt; view_list[1].view(np.ndarray)\narray([ 2.,  2.,  2.])\n\n&gt;&gt;&gt; np.asarray(view_list[1])\narray([ 2.,  2.,  2.])\n</code></pre>\n\n<h1>Alternative: Overriding <code>__bool__</code> (or <code>__nonzero__</code> for python 2)</h1>\n\n<p>Instead of fixing the problem in the <code>__eq__</code> method you could also override <code>__bool__</code> or <code>__nonzero__</code>:</p>\n\n<pre><code>class ArrayWrapper(np.ndarray):\n    # This could also be done in the adapter solution.\n    def __bool__(self):\n        return bool(np.all(self))\n\n    __nonzero__ = __bool__\n</code></pre>\n\n<p>Again this makes the <code>list.index</code> work like intended:</p>\n\n<pre><code>&gt;&gt;&gt; your_list = [np.ones(3), np.ones(3)*2, np.ones(3)*3, np.ones(3)*4]\n&gt;&gt;&gt; view_list = [arr.view(ArrayWrapper) for arr in your_list]\n&gt;&gt;&gt; view_list.index(np.array([2,2,2]))\n1\n</code></pre>\n\n<p>But this will definitly modify more behaviour! For example:</p>\n\n<pre><code>&gt;&gt;&gt; if ArrayWrapper([1,2,3]):\n...     print('that was previously impossible!')\nthat was previously impossible!\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 831, "user_id": 8291566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0dp9a.png?s=128&g=1", "display_name": "Mahdi Ghelichi", "link": "https://stackoverflow.com/users/8291566/mahdi-ghelichi"}, "is_accepted": false, "score": 0, "last_activity_date": 1516243858, "creation_date": 1516243858, "answer_id": 48313088, "question_id": 41271997, "link": "https://stackoverflow.com/questions/41271997/finding-the-index-of-a-numpy-array-in-a-list/48313088#48313088", "title": "Finding the index of a numpy array in a list", "body": "<p>This should do the job:</p>\n\n<pre><code>[i for i,j in enumerate(foo) if j.__class__.__name__=='ndarray']\n[2]\n</code></pre>\n"}], "owner": {"reputation": 1015, "user_id": 6441544, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/696681407136603/picture?type=large", "display_name": "Lee88", "link": "https://stackoverflow.com/users/6441544/lee88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3496, "favorite_count": 3, "accepted_answer_id": 41272218, "answer_count": 5, "score": 18, "last_activity_date": 1516243858, "creation_date": 1482354778, "last_edit_date": 1516239555, "question_id": 41271997, "link": "https://stackoverflow.com/questions/41271997/finding-the-index-of-a-numpy-array-in-a-list", "title": "Finding the index of a numpy array in a list", "body": "<pre><code>import numpy as np\nfoo = [1, \"hello\", np.array([[1,2,3]]) ]\n</code></pre>\n\n<p>I would expect</p>\n\n<pre><code>foo.index( np.array([[1,2,3]]) ) \n</code></pre>\n\n<p>to return </p>\n\n<pre><code>2\n</code></pre>\n\n<p>but instead I get</p>\n\n<blockquote>\n  <p>ValueError: The truth value of an array with more than one element is\n  ambiguous. Use a.any() or a.all()</p>\n</blockquote>\n\n<p>anything better than my current solution? It seems inefficient.</p>\n\n<pre><code>def find_index_of_array(list, array):\n    for i in range(len(list)):\n        if np.all(list[i]==array):\n            return i\n\nfind_index_of_array(foo, np.array([[1,2,3]]) )\n# 2\n</code></pre>\n"}, {"tags": ["python", "datetime", "pandas"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 1, "creation_date": 1482354875, "post_id": 41271989, "comment_id": 69745369, "body": "If needed you can call <code>date</code> prior to <code>.values</code> should work, e.g. <code>p0_cost =  (cost_df[&#39;price1&#39;][cost_df[&#39;date&#39;]==p0] - cost_df[&#39;price2&#39;][cost_df[&#39;date&#39;]==p0]).dt.date.values[0]</code>"}, {"owner": {"reputation": 8790, "user_id": 668624, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/qMFcJ.jpg?s=128&g=1", "display_name": "codingknob", "link": "https://stackoverflow.com/users/668624/codingknob"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1482354964, "post_id": 41271989, "comment_id": 69745409, "body": "You are amazing! This works like a charm! Thank you"}], "answers": [{"tags": [], "owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "is_accepted": true, "score": 2, "last_activity_date": 1482355014, "creation_date": 1482355014, "answer_id": 41272043, "question_id": 41271989, "link": "https://stackoverflow.com/questions/41271989/extract-datetime-obj-value-from-pandas-series-single-row/41272043#41272043", "title": "extract datetime obj value from pandas Series (single row)", "body": "<p>Due to the high precision of the datetime64[ns] values if you're only interested in dates then you can calll <code>dt.date</code> prior to calling <code>.values</code>:</p>\n\n<pre><code>p0_cost = (cost_df['price1'][cost_df['date']==p0] - cost_df['price2'][cost_df['date']==p0]).dt.date.values[0]\n</code></pre>\n"}], "owner": {"reputation": 8790, "user_id": 668624, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/qMFcJ.jpg?s=128&g=1", "display_name": "codingknob", "link": "https://stackoverflow.com/users/668624/codingknob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 41272043, "answer_count": 1, "score": 1, "last_activity_date": 1482355014, "creation_date": 1482354744, "last_edit_date": 1495540418, "question_id": 41271989, "link": "https://stackoverflow.com/questions/41271989/extract-datetime-obj-value-from-pandas-series-single-row", "title": "extract datetime obj value from pandas Series (single row)", "body": "<p>I have same issue as describe here <a href=\"https://stackoverflow.com/questions/41022862/pandas-dataframe-subtraction-result-has-row-and-dtype-information\">link</a> but this time with a datetime object.</p>\n\n<p>Using .values converts the datetime object to something like <code>2011-02-28T19:00:00.000000000-0500</code>.</p>\n\n<p>Prior to the conversion the datetime was <code>2011-03-01</code></p>\n\n<p>What is the proper way to do what I want to do?</p>\n"}, {"tags": ["python", "django", "forms", "django-forms", "readonly"], "comments": [{"owner": {"reputation": 1842, "user_id": 4592608, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/9hXR4.jpg?s=128&g=1", "display_name": "Zagorodniy Olexiy", "link": "https://stackoverflow.com/users/4592608/zagorodniy-olexiy"}, "edited": false, "score": 0, "creation_date": 1482357676, "post_id": 41271979, "comment_id": 69746693, "body": "is it model-form? can you tell more of what you need"}, {"owner": {"reputation": 663, "user_id": 3825948, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/82ada1cb7432ff6215042c3df3dac434?s=128&d=identicon&r=PG&f=1", "display_name": "Foobar", "link": "https://stackoverflow.com/users/3825948/foobar"}, "reply_to_user": {"reputation": 1842, "user_id": 4592608, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/9hXR4.jpg?s=128&g=1", "display_name": "Zagorodniy Olexiy", "link": "https://stackoverflow.com/users/4592608/zagorodniy-olexiy"}, "edited": false, "score": 0, "creation_date": 1482358655, "post_id": 41271979, "comment_id": 69747128, "body": "Yes, it is a CharField of a ModelForm."}, {"owner": {"reputation": 1590, "user_id": 1248471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f35417c3606cd7b06af313abbbb14353?s=128&d=identicon&r=PG", "display_name": "mtt2p", "link": "https://stackoverflow.com/users/1248471/mtt2p"}, "edited": false, "score": 0, "creation_date": 1482361302, "post_id": 41271979, "comment_id": 69748188, "body": "<a href=\"http://stackoverflow.com/questions/324477/in-a-django-form-how-do-i-make-a-field-readonly-or-disabled-so-that-it-cannot\" title=\"in a django form how do i make a field readonly or disabled so that it cannot\">stackoverflow.com/questions/324477/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1301, "user_id": 4400697, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/lBJ0w.jpg?s=128&g=1", "display_name": "nael", "link": "https://stackoverflow.com/users/4400697/nael"}, "is_accepted": true, "score": 35, "last_activity_date": 1482388169, "last_edit_date": 1482388169, "creation_date": 1482358957, "answer_id": 41272908, "question_id": 41271979, "link": "https://stackoverflow.com/questions/41271979/read-only-field-in-django-form/41272908#41272908", "title": "Read-Only Field in Django Form", "body": "<p>You can use the optional <code>attrs</code> parameter when defining the <code>Field</code>.  To wit:</p>\n\n<pre><code>somefield = forms.CharField(\n    widget=forms.TextInput(attrs={'readonly':'readonly'})\n)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 820, "user_id": 5626341, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/225ed59da2a212f403bb7948cf396b5e?s=128&d=identicon&r=PG&f=1", "display_name": "kloddant", "link": "https://stackoverflow.com/users/5626341/kloddant"}, "edited": false, "score": 0, "creation_date": 1581025118, "post_id": 41273308, "comment_id": 106302177, "body": "The Django documentation is patently false here; in the case of using the disabled attribute, the value is not ignored in favor of the form&#39;s initial data; the value is not passed at all."}], "tags": [], "owner": {"reputation": 1590, "user_id": 1248471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f35417c3606cd7b06af313abbbb14353?s=128&d=identicon&r=PG", "display_name": "mtt2p", "link": "https://stackoverflow.com/users/1248471/mtt2p"}, "is_accepted": false, "score": 18, "last_activity_date": 1499929320, "last_edit_date": 1499929320, "creation_date": 1482360969, "answer_id": 41273308, "question_id": 41271979, "link": "https://stackoverflow.com/questions/41271979/read-only-field-in-django-form/41273308#41273308", "title": "Read-Only Field in Django Form", "body": "<p>In <strong>django 1.9</strong> in a Field.disabled attribute available : <a href=\"https://docs.djangoproject.com/en/1.9/ref/forms/fields/#disabled\" rel=\"noreferrer\">https://docs.djangoproject.com/en/1.9/ref/forms/fields/#disabled</a></p>\n\n<p><em>The disabled boolean argument, when set to True, disables a form field using the disabled HTML attribute so that it won\u2019t be editable by users. Even if a user tampers with the field\u2019s value submitted to the server, it will be ignored in favor of the value from the form\u2019s initial data.</em></p>\n\n<p><strong>otherwise</strong></p>\n\n<p>use the widget 'readonly' attribute</p>\n\n<pre><code>class PatientForm(forms.ModelForm):\n\n    def __init__(self, *args, **kwargs):\n       super(PatientForm, self).__init__(*args, **kwargs)\n       self.fields['field'].widget.attrs['readonly'] = True\n\n    class Meta:\n        model = Patient\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7756, "user_id": 2118666, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ND705.png?s=128&g=1", "display_name": "stephen", "link": "https://stackoverflow.com/users/2118666/stephen"}, "edited": false, "score": 14, "creation_date": 1512994222, "post_id": 46771489, "comment_id": 82465653, "body": "Important thing to note is the fields will not submit to the server when they are <code>disabled</code>. If you want the field data to be posted make it <code>readonly</code>"}, {"owner": {"reputation": 165, "user_id": 6137194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cde0cf8e3414f05ca2395b968ed4080e?s=128&d=identicon&r=PG&f=1", "display_name": "Mic", "link": "https://stackoverflow.com/users/6137194/mic"}, "edited": false, "score": 0, "creation_date": 1587688672, "post_id": 46771489, "comment_id": 108616767, "body": "there is no attribute called &quot;readonly&quot;, please propose a solution if you have. --Thanks"}, {"owner": {"reputation": 7756, "user_id": 2118666, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ND705.png?s=128&g=1", "display_name": "stephen", "link": "https://stackoverflow.com/users/2118666/stephen"}, "reply_to_user": {"reputation": 165, "user_id": 6137194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cde0cf8e3414f05ca2395b968ed4080e?s=128&d=identicon&r=PG&f=1", "display_name": "Mic", "link": "https://stackoverflow.com/users/6137194/mic"}, "edited": false, "score": 0, "creation_date": 1587710805, "post_id": 46771489, "comment_id": 108621978, "body": "Yes <code>readonly</code> is not a core field argument. So use the other answers. eg. <code>field.widget.attrs[&#39;readonly&#39;] = True</code>"}], "tags": [], "owner": {"reputation": 7756, "user_id": 2118666, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ND705.png?s=128&g=1", "display_name": "stephen", "link": "https://stackoverflow.com/users/2118666/stephen"}, "is_accepted": false, "score": 12, "last_activity_date": 1508160368, "creation_date": 1508160368, "answer_id": 46771489, "question_id": 41271979, "link": "https://stackoverflow.com/questions/41271979/read-only-field-in-django-form/46771489#46771489", "title": "Read-Only Field in Django Form", "body": "<p>In <code>Django 1.9+</code>:</p>\n\n<pre><code>somefield = forms.CharField(disabled=True)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 2173826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1f5850166aa5101cb826e612ccd8b2b?s=128&d=identicon&r=PG", "display_name": "LucianoBAF", "link": "https://stackoverflow.com/users/2173826/lucianobaf"}, "is_accepted": false, "score": 0, "last_activity_date": 1611256690, "creation_date": 1611256690, "answer_id": 65834322, "question_id": 41271979, "link": "https://stackoverflow.com/questions/41271979/read-only-field-in-django-form/65834322#65834322", "title": "Read-Only Field in Django Form", "body": "<p>Here is the only way I get it to work in Js:</p>\n<pre><code>function myFieldOnChange() {\n    var myField= document.getElementById(&quot;myFieldID&quot;)\n    myField.setAttribute('readonly', true)\n</code></pre>\n"}], "owner": {"reputation": 663, "user_id": 3825948, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/82ada1cb7432ff6215042c3df3dac434?s=128&d=identicon&r=PG&f=1", "display_name": "Foobar", "link": "https://stackoverflow.com/users/3825948/foobar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35682, "favorite_count": 0, "accepted_answer_id": 41272908, "answer_count": 4, "score": 22, "last_activity_date": 1611256690, "creation_date": 1482354704, "last_edit_date": 1482359975, "question_id": 41271979, "link": "https://stackoverflow.com/questions/41271979/read-only-field-in-django-form", "title": "Read-Only Field in Django Form", "body": "<p>How do I set a field to read-only in a Django form? I know how to disable a field but that's not what I'm looking for. Any help would be appreciated. </p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1482354721, "post_id": 41271930, "comment_id": 69745275, "body": "How are the data arranged in the file?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1482354782, "post_id": 41271930, "comment_id": 69745309, "body": "It looks like you&#39;re trying to create a dictionary via dictionary comprehension? <code>repldict={line.strip() for line in open(syspath+&#39;&#47;rules.txt&#39;, &#39;r&#39;)}</code>. This doesn&#39;t have key, value pairs that I can see. A guess: You need to load the file, split each line by its delimiter (e.g. a comma, space) and then use indexing to decide which word is the key, and which word is the value that should be used as a substitute for the word you&#39;ve defined as the key."}], "answers": [{"tags": [], "owner": {"reputation": 5300, "user_id": 4727702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EfsoQ.jpg?s=128&g=1", "display_name": "Yevhen Kuzmovych", "link": "https://stackoverflow.com/users/4727702/yevhen-kuzmovych"}, "is_accepted": false, "score": 1, "last_activity_date": 1482355012, "creation_date": 1482355012, "answer_id": 41272042, "question_id": 41271930, "link": "https://stackoverflow.com/questions/41271930/replacing-strings-in-a-file-from-other-txt-file-with-python/41272042#41272042", "title": "replacing strings in a file from other txt file with Python", "body": "<p>Considering that your 'rules.txt' file looks like:</p>\n\n<pre><code>zero:0\none:1\ntemp:bob\ngarage:nothing\n</code></pre>\n\n<p>then:</p>\n\n<pre><code>with open(syspath+'/rules.txt', 'r') as rules:\n    repldict={}\n    for line in rules:\n        key, value = line.strip().split(':')\n        repldict[key] = value\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 3, "last_activity_date": 1482356811, "last_edit_date": 1482356811, "creation_date": 1482355177, "answer_id": 41272071, "question_id": 41271930, "link": "https://stackoverflow.com/questions/41271930/replacing-strings-in-a-file-from-other-txt-file-with-python/41272071#41272071", "title": "replacing strings in a file from other txt file with Python", "body": "<p>If the dictionary file has the following simple format:</p>\n\n<pre><code>zero 0\none 1\ntemp bob\ngarage nothing\n</code></pre>\n\n<p>You can create your dictionary using <code>split</code> (not <code>strip</code>, <code>split</code> without parameters has an integrated <code>strip</code> feature somehow) in a generator comprehension which yields tuples (key,value), passed to <code>dict</code>:</p>\n\n<pre><code>repldict=dict(line.split() for line in open(os.path.join(syspath,\"rules.txt\"), 'r'))\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>{'temp': 'bob', 'one': '1', 'garage': 'nothing', 'zero': '0'}\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 5585465, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4f5f8adcbd28d720278a5eaa13b8161a?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/5585465/lucas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 41272071, "answer_count": 2, "score": 1, "last_activity_date": 1482356811, "creation_date": 1482354522, "last_edit_date": 1495535442, "question_id": 41271930, "link": "https://stackoverflow.com/questions/41271930/replacing-strings-in-a-file-from-other-txt-file-with-python", "title": "replacing strings in a file from other txt file with Python", "body": "<p>Ive got this code from  <a href=\"https://stackoverflow.com/questions/13089234/replacing-text-in-a-file-with-python\">replacing text in a file with Python</a></p>\n\n<pre><code>import re\nrepldict = {'zero':'0', 'one':'1' ,'temp':'bob','garage':'nothing'}\ndef replfunc(match):\n    return repldict[match.group(0)]\n\nregex = re.compile('|'.join(re.escape(x) for x in repldict))\nwith open('file.txt') as fin, open('fout.txt','w') as fout:\n    for line in fin:\n        fout.write(regex.sub(replfunc,line))\n</code></pre>\n\n<p>but i cant load the repldict from other txt file.\ni've tried with </p>\n\n<pre><code>repldict={line.strip() for line in open(syspath+'/rules.txt', 'r')}\n</code></pre>\n\n<p>But it doesn't work.</p>\n"}, {"tags": ["python", "python-3.x", "multiple-inheritance", "abc"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1482354430, "post_id": 41271894, "comment_id": 69745119, "body": "Where does <code>ABC</code> come from? Is it <code>abc.ABC</code>? Could you give a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 483, "user_id": 1440907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c492fca6840ea56a58ef3bcff7e682f?s=128&d=identicon&r=PG", "display_name": "Keith Wiley", "link": "https://stackoverflow.com/users/1440907/keith-wiley"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1482355456, "post_id": 41271894, "comment_id": 69745640, "body": "It&#39;s the standard Pythonic way of creating an abstract class:  from abc import ABC"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1482355497, "post_id": 41271894, "comment_id": 69745666, "body": "Then <i>put that in the question</i>. Please <a href=\"https://stackoverflow.com/posts/41271894/edit\">edit</a>, and give less abstract (and more internally consistent) examples."}, {"owner": {"reputation": 483, "user_id": 1440907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c492fca6840ea56a58ef3bcff7e682f?s=128&d=identicon&r=PG", "display_name": "Keith Wiley", "link": "https://stackoverflow.com/users/1440907/keith-wiley"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1482355588, "post_id": 41271894, "comment_id": 69745714, "body": "Okay jonrsharpe.  I added it.  I thought ABC could be assumed in a Python question about abstract classes.  Sorry."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1482355661, "post_id": 41271894, "comment_id": 69745749, "body": "Note that <code>class Quad(Shape, ABC):</code> does not have this error - see e.g. <a href=\"http://stackoverflow.com/a/3003284/3001761\">stackoverflow.com/a/3003284/3001761</a>"}, {"owner": {"reputation": 483, "user_id": 1440907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c492fca6840ea56a58ef3bcff7e682f?s=128&d=identicon&r=PG", "display_name": "Keith Wiley", "link": "https://stackoverflow.com/users/1440907/keith-wiley"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1482355722, "post_id": 41271894, "comment_id": 69745773, "body": "Interesting.  I have confirmed your solution.  Thanks."}, {"owner": {"reputation": 12770, "user_id": 420867, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/d3eFg.jpg?s=128&g=1", "display_name": "drevicko", "link": "https://stackoverflow.com/users/420867/drevicko"}, "edited": false, "score": 0, "creation_date": 1585007687, "post_id": 41271894, "comment_id": 107612544, "body": "so... why not just do <code>class Quad(Shape):</code>? It will inherit any <code>ABC</code> methods and variables that are not overridden in <code>Shape</code>."}], "answers": [{"tags": [], "owner": {"reputation": 483, "user_id": 1440907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c492fca6840ea56a58ef3bcff7e682f?s=128&d=identicon&r=PG", "display_name": "Keith Wiley", "link": "https://stackoverflow.com/users/1440907/keith-wiley"}, "is_accepted": false, "score": 2, "last_activity_date": 1482355788, "creation_date": 1482355788, "answer_id": 41272190, "question_id": 41271894, "link": "https://stackoverflow.com/questions/41271894/two-level-abstract-class-hierarchy-without-consistent-method-resolution-error/41272190#41272190", "title": "Two-level abstract class hierarchy without &#39;consistent method resolution&#39; error", "body": "<p>Apparently, simply reversing the order of the parent classes to Quad fixes the problem.  I'm still unclear on the underlying theory (although it can sort of be inferred), but at least my code is running now.</p>\n\n<p>class Quad(Shape, ABC)</p>\n"}], "owner": {"reputation": 483, "user_id": 1440907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c492fca6840ea56a58ef3bcff7e682f?s=128&d=identicon&r=PG", "display_name": "Keith Wiley", "link": "https://stackoverflow.com/users/1440907/keith-wiley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 872, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1482355788, "creation_date": 1482354305, "last_edit_date": 1482355547, "question_id": 41271894, "link": "https://stackoverflow.com/questions/41271894/two-level-abstract-class-hierarchy-without-consistent-method-resolution-error", "title": "Two-level abstract class hierarchy without &#39;consistent method resolution&#39; error", "body": "<p>I need two levels of abstract classes and a third level concrete class:</p>\n\n<pre><code>from abc import ABC\n\nclass Shape(ABC):\n...\n\nclass Quad(ABC, Shape):\n...\n\nclass Square(Quadrilateral)\n...\n</code></pre>\n\n<p>This code generates <code>TypeError: Cannot create a consistent method resolution</code> against the declaration of <code>Quad</code>.  I realize that the problem is a multiple inheritance ambiguity.  <code>Quad</code> doesn't know whether to derive certain functions directly from <code>ABC</code> or from <code>Shape</code>, but how do I fix it?  I can't drop <code>ABC</code> from <code>Quad</code>'s declaration because then it won't be abstract anymore.</p>\n"}, {"tags": ["python", "unit-testing"], "comments": [{"owner": {"reputation": 4380, "user_id": 1656850, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/RIotq.gif?s=128&g=1", "display_name": "boardrider", "link": "https://stackoverflow.com/users/1656850/boardrider"}, "edited": false, "score": 0, "creation_date": 1482356976, "post_id": 41271875, "comment_id": 69746344, "body": "Do you have non unittest objects that are called test_* ?"}, {"owner": {"reputation": 11654, "user_id": 370639, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/DhbyQ.png?s=128&g=1", "display_name": "themaestro", "link": "https://stackoverflow.com/users/370639/themaestro"}, "reply_to_user": {"reputation": 4380, "user_id": 1656850, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/RIotq.gif?s=128&g=1", "display_name": "boardrider", "link": "https://stackoverflow.com/users/1656850/boardrider"}, "edited": false, "score": 0, "creation_date": 1482357974, "post_id": 41271875, "comment_id": 69746828, "body": "nope, that doesn&#39;t seem to be the problem"}, {"owner": {"reputation": 40991, "user_id": 4794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f90cd356f2945b284946d5743467d850?s=128&d=identicon&r=PG", "display_name": "Don Kirkby", "link": "https://stackoverflow.com/users/4794/don-kirkby"}, "edited": false, "score": 0, "creation_date": 1482383695, "post_id": 41271875, "comment_id": 69753827, "body": "I suggest you show at least one code file, one test file, the command line you run, and the error you see. When I try to reproduce the problem, unittest doesn&#39;t find the tests unless the folder has an <code>__init__.py</code> file in it. Creating a gist so people can see a complete example would be great."}], "owner": {"reputation": 11654, "user_id": 370639, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/DhbyQ.png?s=128&g=1", "display_name": "themaestro", "link": "https://stackoverflow.com/users/370639/themaestro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1482354251, "creation_date": 1482354251, "question_id": 41271875, "link": "https://stackoverflow.com/questions/41271875/python-unitttest-discover-importing-non-modules", "title": "Python unitttest discover importing non-modules", "body": "<p>I have a Python package organized roughly as such:</p>\n\n<pre><code>pkg\n--subpkg1\n  --foo.py\n  --bar.py\n--subpkg2\n  --baz.py\n  --buz.py\n</code></pre>\n\n<p>When I run unittest discover passing in pkg as the start location, it imports the tests I have put in those packages, but throws import errors saying things like \"failed to import pkg.subpkg2..idea\" or \"failed to import pkg.subpkg2.\" Is there anyway to run discover from a root without having it fail when it discovers folders that are not Python modules? Would be nice if I didn't have to specify each individual test.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1482353976, "post_id": 41271763, "comment_id": 69744880, "body": "How are you calling it and what are you typing on the command line after for input? Where is the error exactly? Please post a textual screen dump in your question."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1482354035, "post_id": 41271763, "comment_id": 69744909, "body": "<code>readline()</code> includes the newline at the end of the string. There&#39;s no newline in <code>ab</code>, so <code>ab.index(letter)</code> fails when you get to the last character."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1482354062, "post_id": 41271763, "comment_id": 69744927, "body": "Your code will get that error if any of the input isn&#39;t an uppercase letter."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1482392148, "post_id": 41271763, "comment_id": 69757342, "body": "It is customary to select the answer that you found most helpful by clicking on the check mark next to it."}], "answers": [{"comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1482354193, "post_id": 41271818, "comment_id": 69744998, "body": "More generally: <code>txt = [x.upper() for x in sys.stdin.readline() if x.isalpha()]</code> might be a better approach. Alternatively, you could put the <code>isalpha</code> and <code>upper</code> calls in the loop."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1482354222, "post_id": 41271818, "comment_id": 69745009, "body": "I think I&#39;m gonna make that an answer."}, {"owner": {"reputation": 1, "user_id": 7327605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f76800f797249aa4242ba4db062960b?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan kj&#248;lstad", "link": "https://stackoverflow.com/users/7327605/jonathan-kj%c3%b8lstad"}, "edited": false, "score": 0, "creation_date": 1482354249, "post_id": 41271818, "comment_id": 69745026, "body": "Yep, it did. Thank you so much!"}], "tags": [], "owner": {"reputation": 294955, "user_id": 20670, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/251f2449ffba9fbcc3491db6564ff4a2?s=128&d=identicon&r=PG", "display_name": "Tim Pietzcker", "link": "https://stackoverflow.com/users/20670/tim-pietzcker"}, "is_accepted": false, "score": 2, "last_activity_date": 1482354027, "creation_date": 1482354027, "answer_id": 41271818, "question_id": 41271763, "link": "https://stackoverflow.com/questions/41271763/python-program-works-with-raw-input-but-not-with-sys-stdin-readline/41271818#41271818", "title": "Python program works with raw_input() but not with sys.stdin.readline", "body": "<p><code>readline()</code> will return the entire line, including the newline character at the end. Since <code>\\n</code> isn't present in <code>ascii_uppercase</code>, you're getting the error.</p>\n\n<p>Use <code>txt = sys.stdin.readline().strip()</code> and the error should go away.</p>\n"}, {"tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": false, "score": 1, "last_activity_date": 1482354594, "creation_date": 1482354594, "answer_id": 41271948, "question_id": 41271763, "link": "https://stackoverflow.com/questions/41271763/python-program-works-with-raw-input-but-not-with-sys-stdin-readline/41271948#41271948", "title": "Python program works with raw_input() but not with sys.stdin.readline", "body": "<p>The fundamental flaw with your code is that you do not sanitize your input and you are getting an illegal character (<code>\\n</code>) at the end. The operation <code>ab.index(...)</code> assumes that all inputs are uppercase letters, so it fails when they are not.</p>\n\n<p>You can fix this in a couple of ways. One is to convert everything that can be converted to uppercase to uppercase and leave the rest in as-is:</p>\n\n<pre><code>import string, sys\n\nab = string.ascii_uppercase\nn = int(sys.stdin.readline())\ntxt = sys.stdin.readline()\nresult = [ab[(ab.index(letter.upper()) % n) % 26] for letter in txt if letter.isalpha() else letter]\n</code></pre>\n\n<p>Alternatively, you can just throw away all the non-uppercase inputs:</p>\n\n<pre><code>import string, sys\n\nab = string.ascii_uppercase\nn = int(sys.stdin.readline())\ntxt = sys.stdin.readline()\nresult = [ab[(ab.index(letter) % n) % 26] for letter in txt if letter.isupper()]\n</code></pre>\n\n<p>There are any number of combinations of these methods you could use.</p>\n\n<p>By the way, if you are interested in having a prompt for your input, use <code>print</code> with <code>end=''</code>:</p>\n\n<pre><code>print('How far to shift? ', end='')\nn = int(sys.stdin.readline())\nprint('Text to encode? ', end='')\ntxt = sys.stdin.readline()\n...\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7327605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f76800f797249aa4242ba4db062960b?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan kj&#248;lstad", "link": "https://stackoverflow.com/users/7327605/jonathan-kj%c3%b8lstad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1482370023, "creation_date": 1482353801, "last_edit_date": 1482370023, "question_id": 41271763, "link": "https://stackoverflow.com/questions/41271763/python-program-works-with-raw-input-but-not-with-sys-stdin-readline", "title": "Python program works with raw_input() but not with sys.stdin.readline", "body": "<p>I was doing some practice tasks from NiO for an upcoming coding competition. The competition is held online and forces me to use stdin.readline so they can test my code.\nThe usage of stdin got me really stuck. The script is running flawlessly with raw_input but throws \"ValueError: substring not found\" whenever I switch to sys.stdin.readline. Am I doing something stupidly wrong?</p>\n\n<pre><code>import string\nimport sys\n\nn = int(sys.stdin.readline())\ntxt = sys.stdin.readline()\nab = string.ascii_uppercase\nresult = \"\"\n\nfor letter in txt:\n    result += ab[((ab.index(letter) + n) % 26)]\n\nprint result\n</code></pre>\n"}, {"tags": ["python", "windows", "powershell", "command-line"], "answers": [{"tags": [], "owner": {"reputation": 8928, "user_id": 6788803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sNRMz.png?s=128&g=1", "display_name": "BenH", "link": "https://stackoverflow.com/users/6788803/benh"}, "is_accepted": true, "score": 2, "last_activity_date": 1482354868, "creation_date": 1482354868, "answer_id": 41272012, "question_id": 41271743, "link": "https://stackoverflow.com/questions/41271743/get-infotip-via-command-line/41272012#41272012", "title": "get Infotip via command line", "body": "<p>Here's an example script that pulls that data from <code>System.Diagnostics.FileVersionInfo</code> and <code>Get-ChildItem</code>:</p>\n\n<pre><code>$path = \"C:\\example\\file.exe\"\n$versioninfo = [System.Diagnostics.FileVersionInfo]::GetVersionInfo($path)\n$itemproperties= get-childitem $path\n[pscustomobject]@{\n    \"File Description\" = $versioninfo.FileDescription\n    Company = $versioninfo.CompanyName\n    \"File version\" = $versioninfo.FileVersion\n    \"Date created\" = $itemproperties.CreationTime\n    Size = \"$($itemproperties.length/1kb) kb\"\n}\n</code></pre>\n"}], "owner": {"reputation": 670, "user_id": 7071093, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10202175266099488/picture?type=large", "display_name": "Jeff", "link": "https://stackoverflow.com/users/7071093/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 41272012, "answer_count": 1, "score": 1, "last_activity_date": 1482354868, "creation_date": 1482353700, "question_id": 41271743, "link": "https://stackoverflow.com/questions/41271743/get-infotip-via-command-line", "title": "get Infotip via command line", "body": "<p>How do I programmatically get the Infotip data for a particular exe file in Win7?</p>\n\n<p>I am referring to the popup box that you see when hovering over a filename in Windows Explorer. </p>\n"}, {"tags": ["python", "pandas", "machine-learning", "scikit-learn", "linear-regression"], "answers": [{"tags": [], "owner": {"reputation": 2749, "user_id": 6066528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/269311b2d12b388718e754c27680e69f?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Becker", "link": "https://stackoverflow.com/users/6066528/nick-becker"}, "is_accepted": true, "score": 8, "last_activity_date": 1482357791, "last_edit_date": 1482357791, "creation_date": 1482356576, "answer_id": 41272372, "question_id": 41271725, "link": "https://stackoverflow.com/questions/41271725/getting-valueerror-shapes-not-aligned-on-scikit-linear-regression/41272372#41272372", "title": "Getting &#39;ValueError: shapes not aligned&#39; on SciKit Linear Regression", "body": "<p>This is an extremely common problem when dealing with categorical data. There are differing opinions on how to best handle this.</p>\n\n<p>One possible approach is to apply a function to categorical features that limits the set of possible options. For example, if your feature contained the letters of the alphabet, you could encode features for A, B, C, D, and 'Other/Unknown'. In this way, you could apply the same function at test time and abstract from the issue. A clear downside, of course, is that by reducing the feature space you may lose meaningful information.</p>\n\n<p>Another approach is to build a model on your training data, with whichever dummies are naturally created, and treat that as the baseline for your model. When you predict with the model at test time, you transform your test data in the same way your training data is transformed. For example, if your training set had the letters of the alphabet in a feature, and the same feature in the test set contained a value of 'AA', you would ignore that in making a prediction. This is the reverse of your current situation, but the premise is the same. You need to create the missing features on the fly. This approach also has downsides, of course.</p>\n\n<p>The second approach is what you mention in your question, so I'll go through it with <code>pandas</code>.</p>\n\n<p>By using <code>get_dummies</code> you're encoding the categorical features into multiple one-hot encoded features. What you could do is force your test data to match your training data by using <code>reindex</code>, like this:</p>\n\n<pre><code>test_encoded = pd.get_dummies(test_data, columns=['your columns'])\ntest_encoded_for_model = test_encoded.reindex(columns = training_encoded.columns, \n    fill_value=0)\n</code></pre>\n\n<p>This will encode the test data in the same way as your training data, filling in 0 for dummy features that weren't created by encoding the test data but were created in during the training process.</p>\n\n<p>You could just wrap this into a function, and apply it to your test data on the fly. You don't need the encoded training data in memory (which I access with <code>training_encoded.columns</code>) if you create an array or list of the column names.</p>\n"}, {"tags": [], "owner": {"reputation": 827, "user_id": 4810950, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/G1tQb.jpg?s=128&g=1", "display_name": "Koen", "link": "https://stackoverflow.com/users/4810950/koen"}, "is_accepted": false, "score": 1, "last_activity_date": 1487189491, "creation_date": 1487189491, "answer_id": 42259085, "question_id": 41271725, "link": "https://stackoverflow.com/questions/41271725/getting-valueerror-shapes-not-aligned-on-scikit-linear-regression/42259085#42259085", "title": "Getting &#39;ValueError: shapes not aligned&#39; on SciKit Linear Regression", "body": "<p>For anyone interested: I ended up merging the train and test set, then generating the dummies, and then splitting the data again at exactly the same fraction. That way there wasn't any issue with different shapes anymore, as it generated exactly the same dummy data.</p>\n"}, {"comments": [{"owner": {"reputation": 616, "user_id": 2317421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBQvQ.png?s=128&g=1", "display_name": "kmundnic", "link": "https://stackoverflow.com/users/2317421/kmundnic"}, "edited": false, "score": 1, "creation_date": 1560730114, "post_id": 48289054, "comment_id": 99819709, "body": "Note that this is not a useless variable, but the constant term for the regression. Even more, whatever transformation (in this case, adding a constant dimension) you apply to your train data, you should apply to your test data as well."}], "tags": [], "owner": {"reputation": 793, "user_id": 9104424, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214095894292103/picture?type=large", "display_name": "Satyajit Dhawale", "link": "https://stackoverflow.com/users/9104424/satyajit-dhawale"}, "is_accepted": false, "score": 1, "last_activity_date": 1516133358, "creation_date": 1516133358, "answer_id": 48289054, "question_id": 41271725, "link": "https://stackoverflow.com/questions/41271725/getting-valueerror-shapes-not-aligned-on-scikit-linear-regression/48289054#48289054", "title": "Getting &#39;ValueError: shapes not aligned&#39; on SciKit Linear Regression", "body": "<p><strong>This works for me:</strong> <br>\nInitially, I was getting this error message: <br></p>\n\n<pre><code>shapes (15754,3) and (4, ) not aligned \n</code></pre>\n\n<p>I found out that, I was creating a model using <strong>3</strong> variables in my train data. But what I add constant <code>X_train = sm.add_constant(X_train)</code> the constant variable is automatically gets created. So, in total there are now <strong>4</strong> variables.<br>\nAnd when you test this model by default the test variable has <strong>3</strong> variables. So, the error gets pops up for dimension miss match.<br>\nSo, I used the trick that creates a dummy variable for y_test also. </p>\n\n<pre><code>`X_test = sm.add_constant(X_test)`\n</code></pre>\n\n<p>Though this a useless variable, but this solves all the issue.</p>\n"}], "owner": {"reputation": 827, "user_id": 4810950, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/G1tQb.jpg?s=128&g=1", "display_name": "Koen", "link": "https://stackoverflow.com/users/4810950/koen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7757, "favorite_count": 4, "accepted_answer_id": 41272372, "answer_count": 3, "score": 9, "last_activity_date": 1516133358, "creation_date": 1482353616, "last_edit_date": 1482359304, "question_id": 41271725, "link": "https://stackoverflow.com/questions/41271725/getting-valueerror-shapes-not-aligned-on-scikit-linear-regression", "title": "Getting &#39;ValueError: shapes not aligned&#39; on SciKit Linear Regression", "body": "<p>Quite new to SciKit and linear algebra/machine learning with Python in general, so I can't seem to solve the following:</p>\n\n<p>I have a training set and a test set of data, containing both continuous and discrete/categorical values. The CSV files are loaded into Pandas DataFrames and match in shape, being (1460,81) and (1459,81). \nHowever, after using <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.get_dummies.html\" rel=\"noreferrer\">Pandas' get_dummies</a>, the shapes of the DataFrames change to (1460, 306) and (1459, 294). So, when I do linear regression with the <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LinearRegression.html\" rel=\"noreferrer\">SciKit Linear Regression</a> module, it builds a model for 306 variables and it tries to predict one with only 294 with it. This then, naturally, leads to the following error:</p>\n\n<pre><code>ValueError: shapes (1459,294) and (306,1) not aligned: 294 (dim 1) != 306 (dim 0)\n</code></pre>\n\n<p>How could I tackle such a problem? Could I somehow reshape the (1459, 294) to match the other one? </p>\n\n<p>Thanks and I hope I've made myself clear :)</p>\n"}, {"tags": ["python", "html", "css"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 3, "creation_date": 1482353703, "post_id": 41271721, "comment_id": 69744746, "body": "What does Python have to do in this project?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1482353740, "post_id": 41271721, "comment_id": 69744770, "body": "Why do you mention Python? There&#39;s no Python involved in what you&#39;ve shown (and unless you want a round trip to the server, probably not in what you want to implement). Are you using a web app framework? Which one?"}, {"owner": {"reputation": 1025, "user_id": 2026740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efe3644e242eeabe917840ddd85204d1?s=128&d=identicon&r=PG", "display_name": "Daniel Corzo", "link": "https://stackoverflow.com/users/2026740/daniel-corzo"}, "edited": false, "score": 0, "creation_date": 1482354174, "post_id": 41271721, "comment_id": 69744989, "body": "Hello and welcome to StackOverflow. Please take some time to read the help page, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. And more importantly, please read <a href=\"http://meta.stackexchange.com/q/156810/204922\">the Stack Overflow question checklist</a>. You might also want to learn about <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Examples</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1186, "user_id": 7327411, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211446482337148/picture?type=large", "display_name": "wkzhu", "link": "https://stackoverflow.com/users/7327411/wkzhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1482354094, "creation_date": 1482354094, "answer_id": 41271837, "question_id": 41271721, "link": "https://stackoverflow.com/questions/41271721/python-button-to-change-style-of-html-div/41271837#41271837", "title": "Python button to change style of html div", "body": "<p>Python isn't best equipped to do what you're trying to accomplish - is there no way you can use Javascript? A simple <code>onclick()</code> <a href=\"http://www.w3schools.com/jsref/event_onclick.asp\" rel=\"nofollow noreferrer\">http://www.w3schools.com/jsref/event_onclick.asp</a> will get the job done in JS.</p>\n"}], "owner": {"reputation": 1, "user_id": 7327586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c92b0874bdd1e2ef33f525bdb0b8d66?s=128&d=identicon&r=PG&f=1", "display_name": "justAManNamedNam", "link": "https://stackoverflow.com/users/7327586/justamannamednam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1482354094, "creation_date": 1482353587, "question_id": 41271721, "link": "https://stackoverflow.com/questions/41271721/python-button-to-change-style-of-html-div", "title": "Python button to change style of html div", "body": "<p>I have a project in python that will hide a div when my icon is clicked and then collapse when it is clicked again. Right now I have the following html code</p>\n\n<pre><code>&lt;img scr=\"/path/to/img\"&gt;&lt;/img&gt;\n&lt;div&gt;\n    &lt;p&gt;Press the icon to see more stuff&lt;/p&gt;\n&lt;/div&gt;\n\n&lt;div id=\"showOrHide\" style=\"display: none;\"&gt;\n    &lt;p&gt;one&lt;/p&gt;\n    &lt;p&gt;two&lt;/p&gt;\n    &lt;p&gt;three&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>So my question is what is the best way to remove the style on the div with the id showOrHide when the user clicks on the image?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "list", "while-loop"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1482353949, "post_id": 41271704, "comment_id": 69744869, "body": "which of the <code>next = []</code>; <code>next.append(v)</code>; <code>frontier = next</code> didn&#39;t you understand?"}, {"owner": {"reputation": 31, "user_id": 7269745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e512159a1c3eedd447f48115c4a2250d?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot RG", "link": "https://stackoverflow.com/users/7269745/elliot-rg"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1482354609, "post_id": 41271704, "comment_id": 69745220, "body": "My doubt it was about frontier itself, what it represents on the graph? Neighbour nodes of the current node visited?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1482354834, "post_id": 41271704, "comment_id": 69745348, "body": "frontier are all the nodes that are to be handled next - they&#39;re the current... well, exterior part of the breadth-first search..."}], "answers": [{"tags": [], "owner": {"reputation": 4893, "user_id": 1007990, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f7d221c1acc0e71bf76018dc39ce8b25?s=128&d=identicon&r=PG", "display_name": "Zah", "link": "https://stackoverflow.com/users/1007990/zah"}, "is_accepted": false, "score": 1, "last_activity_date": 1482354120, "creation_date": 1482354120, "answer_id": 41271845, "question_id": 41271704, "link": "https://stackoverflow.com/questions/41271704/breadth-first-search-with-python-list/41271845#41271845", "title": "Breadth First Search with Python List", "body": "<p>In Python, the truth value of a list is True if it's non empty and False otherwise. The condition is effectively implementing a way to record visited nodes, so they are not iterated over again.</p>\n"}], "owner": {"reputation": 31, "user_id": 7269745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e512159a1c3eedd447f48115c4a2250d?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot RG", "link": "https://stackoverflow.com/users/7269745/elliot-rg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 651, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482359309, "creation_date": 1482353523, "last_edit_date": 1482359309, "question_id": 41271704, "link": "https://stackoverflow.com/questions/41271704/breadth-first-search-with-python-list", "title": "Breadth First Search with Python List", "body": "<p>I'm trying to code an algorithm to find the best path from one node <code>s</code> to another one <code>f</code> by Breadth First Search. I found the following code and I almost understand it all, but I don't get what are they doing in this line:</p>\n\n<pre><code>while frontier: ...\n</code></pre>\n\n<p>My questions are </p>\n\n<ul>\n<li>What frontier means on the graph? </li>\n<li>For how much time will while condition be true, or what depends on? </li>\n</ul>\n\n<p>Here's the code:</p>\n\n<pre><code>Graph_Adjs={'s':['a','x'],'a':['s','z'],'x':['s','d','c'],'z':['a'],'d':['x','c','f'], 'c':['d','x','f','v'],'f':['d','c','v'],'v':['f','c'] }\n\ndef BFS (Graph_Adjs,s='s'):\n    level = {'s':0}\n    father = {'s':None}\n    i = 1\n    frontier = [s]\n\n    while frontier:\n        next = []\n        for u in frontier:\n            for v in Graph_Adjs[u]:\n               if v not in level:\n                    level[v] = i\n                    father[v] = u\n                    next.append(v)\n        frontier = next\n        i+=1\nreturn father\n\nif __name__=='__main__':\n    father = BFS (Graph_Adjs,s='s')\n    f = 'f'\n    path = []\n    while f !=None:\n        path.append(f)\n        f = father[f]\n    path.reverse()\n    print (path)\n</code></pre>\n"}, {"tags": ["python", "function", "math", "statistics", "average"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1482353845, "post_id": 41271698, "comment_id": 69744826, "body": "What&#39;s the <i>problem</i> with that code? What would you consider simpler? Do you understand what it does now?"}], "answers": [{"comments": [{"owner": {"reputation": 35644, "user_id": 4954037, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YOM4r.jpg?s=128&g=1", "display_name": "hiro protagonist", "link": "https://stackoverflow.com/users/4954037/hiro-protagonist"}, "edited": false, "score": 1, "creation_date": 1482355027, "post_id": 41272020, "comment_id": 69745443, "body": "<code>sum(i*i for i in data)</code> is faster as it does not create a list before calculating the sum."}, {"owner": {"reputation": 820, "user_id": 3025412, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee6a9c95302726ef7cc23decc1207c99?s=128&d=identicon&r=PG&f=1", "display_name": "themistoklik", "link": "https://stackoverflow.com/users/3025412/themistoklik"}, "reply_to_user": {"reputation": 35644, "user_id": 4954037, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YOM4r.jpg?s=128&g=1", "display_name": "hiro protagonist", "link": "https://stackoverflow.com/users/4954037/hiro-protagonist"}, "edited": false, "score": 0, "creation_date": 1482355144, "post_id": 41272020, "comment_id": 69745494, "body": "Sure, see edit. Is the argument of sum considered a generator comprehension here? I&#39;m a little confused by the lack of surrounding brackets etc"}, {"owner": {"reputation": 31, "user_id": 6670165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c21ee6abc1286f48a4e83ba8985e801?s=128&d=identicon&r=PG&f=1", "display_name": "SolarCalf", "link": "https://stackoverflow.com/users/6670165/solarcalf"}, "edited": false, "score": 0, "creation_date": 1482435347, "post_id": 41272020, "comment_id": 69783493, "body": "Thanks for the help guys - much appreciated"}], "tags": [], "owner": {"reputation": 820, "user_id": 3025412, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee6a9c95302726ef7cc23decc1207c99?s=128&d=identicon&r=PG&f=1", "display_name": "themistoklik", "link": "https://stackoverflow.com/users/3025412/themistoklik"}, "is_accepted": true, "score": 0, "last_activity_date": 1482355094, "last_edit_date": 1482355094, "creation_date": 1482354901, "answer_id": 41272020, "question_id": 41271698, "link": "https://stackoverflow.com/questions/41271698/improving-a-convoluted-math-function-in-python/41272020#41272020", "title": "Improving a convoluted math function in python", "body": "<p>A beginner friendly implementation of the above code would be</p>\n\n<pre><code>def function(data):\n#get sum of squares\n    sum_of_squares = sum(i*i for i in data)\n#get sum\n    sum_of_items = sum(data)\n#total elements\n    total_elements = len(data)\n#same func\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6670165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c21ee6abc1286f48a4e83ba8985e801?s=128&d=identicon&r=PG&f=1", "display_name": "SolarCalf", "link": "https://stackoverflow.com/users/6670165/solarcalf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 41272020, "answer_count": 1, "score": 0, "last_activity_date": 1482355094, "creation_date": 1482353505, "question_id": 41271698, "link": "https://stackoverflow.com/questions/41271698/improving-a-convoluted-math-function-in-python", "title": "Improving a convoluted math function in python", "body": "<p>I would like to simplify the code below:</p>\n\n<pre><code>def function(data):\nss, s, n = reduce(lambda a, b: map(sum, zip(a,b)), [(x*x, x, 1) for x in data])\nreturn (ss - s*s/n) / n\n</code></pre>\n\n<p>So far, I've figured out that ss, s, and n are the sum of the squared terms in data, the sum of the terms in data, and the number of terms in data respectively. Knowing this, I simplified the return statement to (Avg. of squared terms) - (Avg. squared). Is there a better way to simplify the code and get the same output? Thanks in advance</p>\n"}, {"tags": ["python", "performance", "numpy", "optimization", "multidimensional-array"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1482355020, "post_id": 41271695, "comment_id": 69745440, "body": "MATLAB is probably faster because it is doing some form of jit compilation.  That lets you think iteratively.  <code>numpy</code> is more like old MATLAB where you had to focus on whole-matrix operations.  Can you write that in MATLAB without the iteration? (with masks and so on)?"}, {"owner": {"reputation": 49, "user_id": 5184616, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/--Oq9ARUL6Hk/AAAAAAAAAAI/AAAAAAAANog/s7WDC4aISNY/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/5184616/peter"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1482356360, "post_id": 41271695, "comment_id": 69746075, "body": "Agreed. And no, I am not sure there is a &quot;simple&quot; way of rewriting the Matlab code. Atleast not at present. I will instead spend some time trying to perfect the Python interpretation."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 5184616, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/--Oq9ARUL6Hk/AAAAAAAAAAI/AAAAAAAANog/s7WDC4aISNY/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/5184616/peter"}, "edited": false, "score": 0, "creation_date": 1482355702, "post_id": 41271884, "comment_id": 69745760, "body": "Thank you. Yes, there are several more sections happening later in the algorithm that depend on the region of interest generated from the above segment. I will try to implement your suggestion and report back with results."}, {"owner": {"reputation": 49, "user_id": 5184616, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/--Oq9ARUL6Hk/AAAAAAAAAAI/AAAAAAAANog/s7WDC4aISNY/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/5184616/peter"}, "edited": false, "score": 0, "creation_date": 1482357233, "post_id": 41271884, "comment_id": 69746476, "body": "Very interesting result: I am processing medical images and the old method takes ~2.34s per processed layer (i.e. roughly 2&#189;s per x, y or z)  New method, where one major change is making use of slicing, takes ~0.49s  Net result: ~4.8 times performance increase.  Seems xmas came early this year. Thank you."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 49, "user_id": 5184616, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/--Oq9ARUL6Hk/AAAAAAAAAAI/AAAAAAAANog/s7WDC4aISNY/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/5184616/peter"}, "edited": false, "score": 0, "creation_date": 1482357306, "post_id": 41271884, "comment_id": 69746506, "body": "@Peter That&#39;s not bad, is it! Awesome, have a great holiday!"}, {"owner": {"reputation": 50347, "user_id": 1763356, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zGWG9.png?s=128&g=1", "display_name": "Veedrac", "link": "https://stackoverflow.com/users/1763356/veedrac"}, "edited": false, "score": 0, "creation_date": 1482398431, "post_id": 41271884, "comment_id": 69760795, "body": "You&#39;re still doing ~2x the work generating <code>parte1</code> and <code>parte2</code>, since most values are duplicated between the arrays."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 50347, "user_id": 1763356, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zGWG9.png?s=128&g=1", "display_name": "Veedrac", "link": "https://stackoverflow.com/users/1763356/veedrac"}, "edited": false, "score": 0, "creation_date": 1482399326, "post_id": 41271884, "comment_id": 69761395, "body": "@Veedrac Good point, thanks! Updated with those improvements."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 49, "user_id": 5184616, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/--Oq9ARUL6Hk/AAAAAAAAAAI/AAAAAAAANog/s7WDC4aISNY/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/5184616/peter"}, "edited": false, "score": 0, "creation_date": 1482399416, "post_id": 41271884, "comment_id": 69761456, "body": "@Peter Check out some possible improvements in the edited codes!"}, {"owner": {"reputation": 50347, "user_id": 1763356, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zGWG9.png?s=128&g=1", "display_name": "Veedrac", "link": "https://stackoverflow.com/users/1763356/veedrac"}, "edited": false, "score": 0, "creation_date": 1482400264, "post_id": 41271884, "comment_id": 69762002, "body": "@Divakar I meant more like <code>parte = xCom - xcTes[:nxTes-1]; parte1 = parte - dtaCri; parte1 = (parte1[:-1] * parte1[1:]) &lt;= 0; parte2 = parte + dtaCri; parte2 = (parte2[:-1] * parte2[1:]) &lt;= 0</code>."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 50347, "user_id": 1763356, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zGWG9.png?s=128&g=1", "display_name": "Veedrac", "link": "https://stackoverflow.com/users/1763356/veedrac"}, "edited": false, "score": 0, "creation_date": 1482401146, "post_id": 41271884, "comment_id": 69762606, "body": "@Veedrac Ah yes, computing differences for <code>:n-1</code> and slicing to re-use, good trick, thanks! Updated."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 49, "user_id": 5184616, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/--Oq9ARUL6Hk/AAAAAAAAAAI/AAAAAAAANog/s7WDC4aISNY/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/5184616/peter"}, "edited": false, "score": 0, "creation_date": 1482490645, "post_id": 41271884, "comment_id": 69802422, "body": "@Peter I see, thanks for reporting back nevertheless!"}, {"owner": {"reputation": 49, "user_id": 5184616, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/--Oq9ARUL6Hk/AAAAAAAAAAI/AAAAAAAANog/s7WDC4aISNY/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/5184616/peter"}, "reply_to_user": {"reputation": 50347, "user_id": 1763356, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zGWG9.png?s=128&g=1", "display_name": "Veedrac", "link": "https://stackoverflow.com/users/1763356/veedrac"}, "edited": false, "score": 0, "creation_date": 1482490784, "post_id": 41271884, "comment_id": 69802490, "body": "@Veedrac and divakar New code shows no significant improvement in performance. If anything this new setup is slightly (tens of microseconds) slower. But since I only ran like five rounds of tests thats not really all that conclusive."}, {"owner": {"reputation": 49, "user_id": 5184616, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/--Oq9ARUL6Hk/AAAAAAAAAAI/AAAAAAAANog/s7WDC4aISNY/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/5184616/peter"}, "edited": false, "score": 1, "creation_date": 1482496937, "post_id": 41271884, "comment_id": 69805772, "body": "Not as to drag this comment section out forever but I just had to get a better understanding of what was going on in this new suggestion. I felt it SHOULD be somewhat faster (and a bit more than what I saw initially) so I did one more round of analysis and can now report a performance increase of ~3.8819% relative to previous method. With this new insight I have decided to go with the updated method, espec. since these sections of the algo are used frequently. Thank you once again!"}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 2, "last_activity_date": 1482401081, "last_edit_date": 1482401081, "creation_date": 1482354273, "answer_id": 41271884, "question_id": 41271695, "link": "https://stackoverflow.com/questions/41271695/optimization-of-numpy-array-traversal/41271884#41271884", "title": "Optimization of numpy array traversal", "body": "<p>Pre-compute those boolean conditional outputs before going into the loop in a vectorized manner and making use of slicing, which are just views into the input array, like so -</p>\n\n<pre><code>parte1 = ( (xCom-dtaCri-xcTes[:nxTes-2]) * (xCom-dtaCri-xcTes[1:nxTes-1]) ) &lt;=0.0\nparte2 = ( (xCom+dtaCri-xcTes[:nxTes-2]) * (xCom+dtaCri-xcTes[1:nxTes-1]) ) &lt;=0.0\n</code></pre>\n\n<p>We could see few computations are repeated. So, we could use some re-use there -</p>\n\n<pre><code>p = xCom-xcTes[:nxTes-1]\np0 = p - dtaCri\np1 = p + dtaCri\nparte1 = p0[:-1]*p0[1:] &lt;= 0.0\nparte2 = p1[:-1]*p1[1:] &lt;= 0.0\n</code></pre>\n\n<p>Then, just use those bools in the loop -</p>\n\n<pre><code>for ii in xrange(0,(nxTes-2)):\n    if parte1[ii]:\n        nxL=ii\n    if parte2[ii]:\n        nxR=ii+1\n</code></pre>\n\n<p>The idea is to do minimal work inside the loop with focus on performance.</p>\n\n<p>I am assuming you have more work going in the loop that is using <code>nxL</code> and <code>nxR</code>, because otherwise we are overwriting values into those two variables.</p>\n"}], "owner": {"reputation": 49, "user_id": 5184616, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/--Oq9ARUL6Hk/AAAAAAAAAAI/AAAAAAAANog/s7WDC4aISNY/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/5184616/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 41271884, "answer_count": 1, "score": 1, "last_activity_date": 1482401081, "creation_date": 1482353498, "question_id": 41271695, "link": "https://stackoverflow.com/questions/41271695/optimization-of-numpy-array-traversal", "title": "Optimization of numpy array traversal", "body": "<p><strong>1.</strong> Consider the following traversal of a <strong>numpy.ndarray</strong></p>\n\n<pre><code>for ii in xrange(0,(nxTes-2)):\n    if ( (xCom-dtaCri-xcTes[ii]) * (xCom-dtaCri-xcTes[ii+1]) ) &lt;= 0.0:\n        nxL=ii\n    if ( (xCom+dtaCri-xcTes[ii]) * (xCom+dtaCri-xcTes[ii+1]) ) &lt;= 0.0:\n        nxR=ii+1\n</code></pre>\n\n<p><strong>2.</strong> <code>xCom</code>, <code>dtaCri</code> and <code>xcTes</code> are of type() <strong>numpy.float64</strong>, <strong>float</strong> and <strong>numpy.ndarray</strong> respectively</p>\n\n<p><strong>3.</strong> The full block above is repeated for <code>nyTes</code> and <code>nzTes</code> i.e. a total of three blocks are done in the main algorithm loop. The goal is to create a region of interest with window size <code>dtaCri</code> and center at comparison point <code>xCom</code> using positional data from <code>xcTes</code></p>\n\n<p><strong>4.</strong> The above code is more or less a straight port from Matlab wherein the same block executes at somewhere around three to four times the speed.</p>\n\n<p><strong>5. Question:</strong> Is it possible to optimize the block above with respect to execution time and if so how?</p>\n\n<p><strong>6.</strong> So far I have tried some minor tweaks such as altering data types and using <strong>range()</strong> instead of <strong>xrange()</strong> from which I saw no noticeable changes in performance.</p>\n"}, {"tags": ["python", "pandas", "numbers", "format", "currency"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 2, "creation_date": 1482353518, "post_id": 41271673, "comment_id": 69744646, "body": "You can just do <code>df[&#39;($) millions&#39;] = &#39;$&#39; + (df[&#39;Amount&#39;].astype(float)&#47;1000000).astype(str) + &#39;MM&#39;</code>"}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1482355699, "post_id": 41271673, "comment_id": 69745757, "body": "if my answer or the other one resolved your question then please remember to accept the answer, there will be an empty tick mark at the top left of the answers, this is so the answer doesn&#39;t stay unanswered. Note you can only accept one answer, thanks"}], "answers": [{"comments": [{"owner": {"reputation": 2321, "user_id": 2377489, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/78lEW.jpg?s=128&g=1", "display_name": "quapka", "link": "https://stackoverflow.com/users/2377489/quapka"}, "edited": false, "score": 1, "creation_date": 1482353978, "post_id": 41271713, "comment_id": 69744881, "body": "I like this answer more!:)"}, {"owner": {"reputation": 888, "user_id": 7292363, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/828b3f03f4d030c996d0e1a670b5dc88?s=128&d=identicon&r=PG&f=1", "display_name": "thatMeow", "link": "https://stackoverflow.com/users/7292363/thatmeow"}, "edited": false, "score": 0, "creation_date": 1482354398, "post_id": 41271713, "comment_id": 69745101, "body": "I like the quick solution with the option to round number, thanks for the quick reply!"}], "tags": [], "owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "is_accepted": false, "score": 5, "last_activity_date": 1482354450, "last_edit_date": 1482354450, "creation_date": 1482353553, "answer_id": 41271713, "question_id": 41271673, "link": "https://stackoverflow.com/questions/41271673/format-numbers-in-a-python-pandas-dataframe-as-currency-in-thousands-or-millions/41271713#41271713", "title": "Format numbers in a Python pandas DataFrame as currency in thousands or millions", "body": "<p>I think the following should work:</p>\n\n<pre><code>df['($) millions'] = '$' + (df['Amount'].astype(float)/1000000).astype(str) + 'MM'\n\nIn [3]:\ndf['($) millions'] = '$' + (df['Amount'].astype(float)/1000000).astype(str) + 'MM'\ndf\n\nOut[3]:\n      Amount   ($) millions\n0   19000000        $19.0MM\n1    9873200      $9.8732MM\n2  823449242  $823.449242MM\n</code></pre>\n\n<p>if needed you can also <code>round</code>:</p>\n\n<pre><code>In [5]:\ndf['($) millions'] = '$' + (df['Amount'].astype(float)/1000000).round(2).astype(str) + 'MM'\ndf\n\nOut[5]:\n      Amount ($) millions\n0   19000000      $19.0MM\n1    9873200      $9.87MM\n2  823449242    $823.45MM\n</code></pre>\n\n<p>Another method is to apply a <code>format</code> on each value using <code>apply</code>:</p>\n\n<pre><code>In [15]:\ndf['($) millions'] = (df['Amount']/1000000).apply(lambda x: '${:,.2f}MM'.format(x))\ndf\n\nOut[15]:\n      Amount ($) millions\n0   19000000     $19.00MM\n1    9873200      $9.87MM\n2  823449242    $823.45MM\n</code></pre>\n\n<p>However, I expect the first method to scale better for large datasets, although sometimes list comprehensions are faster when it comes to strings</p>\n\n<p>Here is the list comprehension method:</p>\n\n<pre><code>In [17]:\ndf['($) millions'] = ['${:,.2f}MM'.format(x) for x in df['Amount']/1000000]\ndf\n\nOut[17]:\n      Amount ($) millions\n0   19000000     $19.00MM\n1    9873200      $9.87MM\n2  823449242    $823.45MM\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 888, "user_id": 7292363, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/828b3f03f4d030c996d0e1a670b5dc88?s=128&d=identicon&r=PG&f=1", "display_name": "thatMeow", "link": "https://stackoverflow.com/users/7292363/thatmeow"}, "edited": false, "score": 0, "creation_date": 1482354461, "post_id": 41271735, "comment_id": 69745139, "body": "I think your solution not only changes the way we visualize the numbers and it empowers us to do calculations on the numbers. Brilliant!!!"}, {"owner": {"reputation": 2321, "user_id": 2377489, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/78lEW.jpg?s=128&g=1", "display_name": "quapka", "link": "https://stackoverflow.com/users/2377489/quapka"}, "reply_to_user": {"reputation": 888, "user_id": 7292363, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/828b3f03f4d030c996d0e1a670b5dc88?s=128&d=identicon&r=PG&f=1", "display_name": "thatMeow", "link": "https://stackoverflow.com/users/7292363/thatmeow"}, "edited": false, "score": 2, "creation_date": 1482361741, "post_id": 41271735, "comment_id": 69748344, "body": "Consider accepting the answer, so to show, this Q is resolved.:)"}], "tags": [], "owner": {"reputation": 2321, "user_id": 2377489, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/78lEW.jpg?s=128&g=1", "display_name": "quapka", "link": "https://stackoverflow.com/users/2377489/quapka"}, "is_accepted": false, "score": 2, "last_activity_date": 1482353646, "creation_date": 1482353646, "answer_id": 41271735, "question_id": 41271673, "link": "https://stackoverflow.com/questions/41271673/format-numbers-in-a-python-pandas-dataframe-as-currency-in-thousands-or-millions/41271735#41271735", "title": "Format numbers in a Python pandas DataFrame as currency in thousands or millions", "body": "<p>This simply divides the values - it does not add the <code>$</code> sign etc. (it's only a matter of changing the lambda function), but Amount is still dtype <code>float</code> so you can treat it as numbers.</p>\n\n<pre><code> In [41]: df = pd.DataFrame({\"Amount\":[19000000, 9873200, 823449242]})\n\nIn [42]: df['MillionsAsFloat'] = df.apply(lambda row: row['Amount'] / 1000000, axis=1\n    ...: )\n\nIn [43]: df['MillionsAsString'] = df.apply(lambda row: '$' + str(round(row['Amount'] \n    ...: / 1000000,2)) + 'MM', axis=1)\n\nIn [44]: df\nOut[44]: \n      Amount  MillionsAsFloat MillionsAsString\n0   19000000        19.000000          $19.0MM\n1    9873200         9.873200          $9.87MM\n2  823449242       823.449242        $823.45MM\n</code></pre>\n"}], "owner": {"reputation": 888, "user_id": 7292363, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/828b3f03f4d030c996d0e1a670b5dc88?s=128&d=identicon&r=PG&f=1", "display_name": "thatMeow", "link": "https://stackoverflow.com/users/7292363/thatmeow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22556, "favorite_count": 2, "answer_count": 2, "score": 3, "last_activity_date": 1562014740, "creation_date": 1482353413, "question_id": 41271673, "link": "https://stackoverflow.com/questions/41271673/format-numbers-in-a-python-pandas-dataframe-as-currency-in-thousands-or-millions", "title": "Format numbers in a Python pandas DataFrame as currency in thousands or millions", "body": "<p>I have a dataframe: pd.DataFrame({\"Amount\":[19000000, 9873200, 823449242]}), and I need to convert the numbers into currency ($) in millions. i.e. $19.00MM, $9.88MM, and $823.45MM.</p>\n\n<p>Does anyone know a quick way to do this?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "edited": false, "score": 0, "creation_date": 1482353504, "post_id": 41271649, "comment_id": 69744643, "body": "There&#39;s a lot wrong here. Recursion is not what you want to do here. Look into <code>while</code> and <code>for</code> loops."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 4, "creation_date": 1482353580, "post_id": 41271649, "comment_id": 69744675, "body": "please consider reading the <a href=\"https://docs.python.org/3/tutorial/\" rel=\"nofollow noreferrer\">Python tutorial</a>."}, {"owner": {"reputation": 1651, "user_id": 530657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69ee153df5bde2f63d63b463be459e1d?s=128&d=identicon&r=PG", "display_name": "Jos&#233; Luis", "link": "https://stackoverflow.com/users/530657/jos%c3%a9-luis"}, "edited": false, "score": 0, "creation_date": 1482353600, "post_id": 41271649, "comment_id": 69744687, "body": "Welcome to StackOverflow. Congratulations on your first question. Could you please add some detail regarding in what way the code is not behaving as expected, and what errors are you getting? Be as specific as possible as it will lead to better answers."}], "answers": [{"tags": [], "owner": {"reputation": 5300, "user_id": 4727702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EfsoQ.jpg?s=128&g=1", "display_name": "Yevhen Kuzmovych", "link": "https://stackoverflow.com/users/4727702/yevhen-kuzmovych"}, "is_accepted": true, "score": 1, "last_activity_date": 1482353494, "creation_date": 1482353494, "answer_id": 41271693, "question_id": 41271649, "link": "https://stackoverflow.com/questions/41271649/how-do-i-make-my-python-program-loop/41271693#41271693", "title": "How do I make my Python program loop?", "body": "<p><code>close</code> can't be <code>'No'</code> and <code>'no'</code> at the same time, so it is always false.</p>\n\n<p>So you probably meant <code>close == 'No' or close == 'no'</code>. But better way to do it is <code>close.lower() == 'no'</code></p>\n\n<p>And what you are doing is not a loop but a recursion (function <code>main</code> calls itself). If you need loop then try this:</p>\n\n<pre><code>while True:\n    # your code\n\n    close = input (\"Do you want to exit?: \")\n    if close.lower() == 'yes':\n         break; # escapes the loop\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 7323530, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-w9xtmEpzDyk/AAAAAAAAAAI/AAAAAAAAArI/4qSKWhMo-GQ/photo.jpg?sz=128", "display_name": "theExtinctGamer", "link": "https://stackoverflow.com/users/7323530/theextinctgamer"}, "edited": false, "score": 0, "creation_date": 1484586807, "post_id": 41271788, "comment_id": 70560361, "body": "Thanks for helping!"}], "tags": [], "owner": {"reputation": 15599, "user_id": 4575071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9bceb35fc57e732ca44911b801b12e?s=128&d=identicon&r=PG&f=1", "display_name": "ettanany", "link": "https://stackoverflow.com/users/4575071/ettanany"}, "is_accepted": false, "score": 0, "last_activity_date": 1482354329, "last_edit_date": 1482354329, "creation_date": 1482353895, "answer_id": 41271788, "question_id": 41271649, "link": "https://stackoverflow.com/questions/41271649/how-do-i-make-my-python-program-loop/41271788#41271788", "title": "How do I make my Python program loop?", "body": "<p>Replace your <code>main()</code> function with the following one:</p>\n\n<pre><code>def main():\n    close = 'no'\n    while close.lower() == 'no':\n        print \"inside while\"\n        operation = input(\"What do you need me for? (+,-,*,/,**,%): \")\n        if operation not in ['+', '-', '*', '/', '**', '%']:\n            print(\"Sorry, but that's not an operation\")\n\n        else:\n            var1 = int(input(\"Enter num1: \"))\n            var2 = int(input(\"Enter num2: \"))\n            if(operation == '+'):\n                print(round(add(var1, var2), 2))\n\n            # ...\n\n            elif(operation == '%'):\n                print(round(rem(var1, var2), 2))\n\n        close = input (\"Do you want to exit?: \")\n</code></pre>\n\n<p><code>close</code> is initialized with <code>'no'</code>, so the loop is executed at least one time.</p>\n\n<p>Instead of <code>close == 'no' or close == 'No'</code>, you can use <code>lower()</code> like this: <code>close.lower() == 'no'</code></p>\n\n<p>You should use:</p>\n\n<pre><code>if operation not in ['+', '-', '*', '/', '**', '%']:\n</code></pre>\n\n<p>Instead of:</p>\n\n<pre><code>operation != '+' and operation != '-' and operation != '*' ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1930, "user_id": 1904485, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IZQVu.jpg?s=128&g=1", "display_name": "Tomasz Swider", "link": "https://stackoverflow.com/users/1904485/tomasz-swider"}, "is_accepted": false, "score": 0, "last_activity_date": 1482355080, "creation_date": 1482355080, "answer_id": 41272049, "question_id": 41271649, "link": "https://stackoverflow.com/questions/41271649/how-do-i-make-my-python-program-loop/41272049#41272049", "title": "How do I make my Python program loop?", "body": "<p>I would like to exit even if the user said 'yea' or just 'y'</p>\n\n<pre><code>while True:\n    operation = input(\"What do you need me for? (+,-,*,/,**,%): \")\n    if operation not in ['+', '-', '*', '/', '**', '%']:\n        print(\"Sorry, but that's not an operation\")\n        continue\n    ....\n    close = input (\"Do you want to exit?: \")\n    if close and close[0].lower() == 'y':\n        print('Bye')\n        return\n</code></pre>\n\n<p>It should deal with the empty string as well, when the user just hit enter.</p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 7274182, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-d1XMFn0zJwU/AAAAAAAAAAI/AAAAAAAACPQ/4uud23wFmek/photo.jpg?sz=128", "display_name": "Jacob", "link": "https://stackoverflow.com/users/7274182/jacob"}, "is_accepted": false, "score": 0, "last_activity_date": 1482356111, "creation_date": 1482356111, "answer_id": 41272270, "question_id": 41271649, "link": "https://stackoverflow.com/questions/41271649/how-do-i-make-my-python-program-loop/41272270#41272270", "title": "How do I make my Python program loop?", "body": "<p>The variable close can't be 2 strings at the same time. I suggest just changing:<code>if close == \"Yes\" and \"yes\":</code> to <code>if close == \"Yes \"or \"yes\"</code> if you don't want to change your code much</p>\n"}], "owner": {"reputation": 13, "user_id": 7323530, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-w9xtmEpzDyk/AAAAAAAAAAI/AAAAAAAAArI/4qSKWhMo-GQ/photo.jpg?sz=128", "display_name": "theExtinctGamer", "link": "https://stackoverflow.com/users/7323530/theextinctgamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 41271693, "answer_count": 4, "score": -1, "last_activity_date": 1482356111, "creation_date": 1482353323, "last_edit_date": 1482354577, "question_id": 41271649, "link": "https://stackoverflow.com/questions/41271649/how-do-i-make-my-python-program-loop", "title": "How do I make my Python program loop?", "body": "<p>I am trying to make an exit function in my calculator, I tried many ways but it does not work. I don't understand how to loop my code and no website explains what to do.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#Variables:\nabout = (\" + Addition, - Subtraction, * Multiplication, / Division, ** Exponent, % Remainder\")\n\nprint( )\n\nprint(about)\n\nprint( )\n\n#Functions:\n\n#Returns the sum of num1 + num2\ndef add(num1, num2):\n    return num1 + num2\n\n#Returns the difference of num1 - num2\ndef sub(num1, num2):\n    return num1 - num2\n\n#Returns the product of num1 * num2\ndef mul(num1, num2):\n    return num1 * num2\n\n#Returns the quotient of num1 / num2\ndef div(num1, num2):\n    return num1 / num2\n\n#Returns the power of num1 ** num2\ndef px(num1, num2):\n    return num1 ** num2\n\n#Returns the remainder of num1 % num2\ndef rem(num1, num2):\n    return num1 % num2\n\n#Main area where all the magic happens\n\n#Wrong operation\ndef main():\n    operation = input(\"What do you need me for? (+,-,*,/,**,%): \")\n    if(operation != '+' and operation != '-' and operation != '*'\n       and operation != '/' and operation != '**' and operation != '%'):\n\n        #invalid operation\n        print(\"Sorry, but that's not an operation\")\n\n    #What the operations should do\n    else:\n        var1 = int(input(\"Enter num1: \"))\n        var2 = int(input(\"Enter num2: \"))\n\n        if(operation == '+'):\n            print(round(add(var1, var2), 2))\n\n        elif(operation == '-'):\n            print(round(sub(var1, var2), 2))\n\n        elif(operation == '*'):\n            print(round(mul(var1, var2), 2))\n\n        elif(operation == '/'):\n            print(round(div(var1, var2), 2))\n\n        elif(operation == '**'):\n            print(round(px(var1, var2), 2))\n\n        elif(operation == '%'):\n            print(round(rem(var1, var2), 2))\n\n\n    #Exit function\n    close = input (\"Do you want to exit?: \")\n    if(close == 'Yes' and close == 'yes'):\n        close()\n\n    elif(close == 'No' and close == 'no'):\n        main()\n\n\nmain()\n</code></pre>\n\n<p>Can someone explain to me why it's not working?</p>\n"}, {"tags": ["python", "linux"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user554546"}, "edited": false, "score": 0, "creation_date": 1482353556, "post_id": 41271643, "comment_id": 69744661, "body": "Well, you can always build a module that has a <code>get</code> function that does nothing, passes all other functions along to <code>webbrowser</code>, and then use this new module as a drop-in replacement. That aside, why not use Dropbox, Google Drive, etc, to store and sync the images?"}, {"owner": {"reputation": 473, "user_id": 6286900, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/20NnH.jpg?s=128&g=1", "display_name": "Salvatore D&#39;angelo", "link": "https://stackoverflow.com/users/6286900/salvatore-dangelo"}, "edited": false, "score": 0, "creation_date": 1482358279, "post_id": 41271643, "comment_id": 69746969, "body": "I want my photos on my Media Center because sometime I could see them on my TV without have any PC to turn on. My media center is always available next to the TV. I have my photos in Flickr but slideshow is now fast when it starts. Have a copy on local protect also my photo to be resized by provider. This happened to me with PicasaWeb that a some point changed terms and condition and reduced the size of all my photos."}], "answers": [{"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 1, "last_activity_date": 1482354142, "creation_date": 1482354142, "answer_id": 41271852, "question_id": 41271643, "link": "https://stackoverflow.com/questions/41271643/python-disable-webbrowser-in-order-to-let-it-fails/41271852#41271852", "title": "Python disable webbrowser in order to let it fails", "body": "<p>I believe you can use the simple</p>\n\n<pre><code>del webbrowser._tryorder[:]\n</code></pre>\n\n<p>This might not be portable - <code>_tryorder</code> is not documented, and it starts with <code>_</code> which means that it is private to the module. </p>\n\n<p>Example:</p>\n\n<pre><code>Python 3.5.2+ (default, Sep 22 2016, 12:18:14) \n[GCC 6.2.0 20160927] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import webbrowser\n&gt;&gt;&gt; webbrowser.get()\n&lt;webbrowser.BackgroundBrowser object at 0x7f9e91773c88&gt;\n&gt;&gt;&gt; del webbrowser._tryorder[:]\n&gt;&gt;&gt; webbrowser.get()\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/lib/python3.5/webbrowser.py\", line 51, in get\n    raise Error(\"could not locate runnable browser\")\nwebbrowser.Error: could not locate runnable browser\n</code></pre>\n"}], "owner": {"reputation": 473, "user_id": 6286900, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/20NnH.jpg?s=128&g=1", "display_name": "Salvatore D&#39;angelo", "link": "https://stackoverflow.com/users/6286900/salvatore-dangelo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 41271852, "answer_count": 1, "score": -1, "last_activity_date": 1482354142, "creation_date": 1482353298, "question_id": 41271643, "link": "https://stackoverflow.com/questions/41271643/python-disable-webbrowser-in-order-to-let-it-fails", "title": "Python disable webbrowser in order to let it fails", "body": "<p>I am working on a mediacenter OSMC linux box where there is python. I am using an application called flyckrsmartsync used to sync up my Flickr account with a folder on my mediacenter. The python app must be authenticated on Flickr. I installed on another linux box where no browser where configured. The app showed me the url I can use on my Windows box to authenticate the app.</p>\n\n<p>On my OMC box the local browser is activated and I am not able to show the URL in the console.</p>\n\n<p>Basically the webbrowser.get() method that fails in first linux box and let appear the URL does not fail on second linux box and then it hangs once he enter in the browser.</p>\n\n<p>If I do on second box the command \"python\":</p>\n\n<pre><code>Python 2.7.9 (default, Aug 13 2016, 17:56:53)\n[GCC 4.9.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n</code></pre>\n\n<p>Then the following command:</p>\n\n<pre><code>&gt;&gt;&gt; import webbrowser\n&gt;&gt;&gt; webbrowser._tryorder\n['www-browser', 'lynx']\n</code></pre>\n\n<p>Is there a way to unregister in python all the browser so that the webbrowser.get api fails?\nIs there a why to add them again later once I authenticated the app?</p>\n"}, {"tags": ["python", "error-handling", "runtime-error"], "answers": [{"comments": [{"owner": {"reputation": 1443, "user_id": 6199836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0b95dec8e240d607aa9f0c2551a9f?s=128&d=identicon&r=PG", "display_name": "Alex G Rice", "link": "https://stackoverflow.com/users/6199836/alex-g-rice"}, "edited": false, "score": 0, "creation_date": 1482359646, "post_id": 41273023, "comment_id": 69747553, "body": "Nice! I was going to suggest monkey patching but this is way better."}], "tags": [], "owner": {"reputation": 46350, "user_id": 246616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb5db496ae1d5e7dbdcaa38f3c9b31b?s=128&d=identicon&r=PG", "display_name": "mVChr", "link": "https://stackoverflow.com/users/246616/mvchr"}, "is_accepted": true, "score": 2, "last_activity_date": 1482359543, "creation_date": 1482359543, "answer_id": 41273023, "question_id": 41271641, "link": "https://stackoverflow.com/questions/41271641/in-general-should-i-write-multiple-versions-of-a-code-body-in-case-a-user-is-mi/41273023#41273023", "title": "In general, should I write multiple versions of a code body in case a user is missing packages?", "body": "<p>In general it's better to have a pip <code>requirements.txt</code> file or <code>setup.py</code> that handles dependencies. However, if you need to do this for whatever reason, I think it would be better to have a single class that serves as a wrapper for either library and the consumer doesn't care which was imported. For example, in your module you'd have something like:</p>\n\n<pre><code>try:\n    import better_lib\n\n    class LibAPI(object):\n        root_lib = better_lib\n        def fizzle(self, *args, **kwargs):\n            return self.root_lib.better_fizzle(*args, **kwargs)\n        def mundun(self, n, x, **kwargs):\n            floof = (n, x)\n            return self.root_lib.better_mundun(floof, **kwargs)\n\nexcept ImportError:\n    import worse_lib\n\n    class LibAPI(object):\n        root_lib = worse_lib\n        def fizzle(self, x, y, z, **kwargs):\n            fizz = self.root_lib.worse_fizz(x, y)\n            return self.root_lib.izzle(fizz, z, **kwargs)\n        def mundun(self, *args, **kwargs):\n            return self.root_lib.worse_mundun(*args, **kwargs)\n\nlib_api = LibAPI()\n</code></pre>\n\n<p>That way even though the core libraries may be quite different, in your code you can interact with them in the same way (<code>lib_api.fizzle()</code> and <code>lib_api.mundun()</code>) since you've wrapped whatever differences there are in a single unified wrapper. It's better to have all this in one single place instead of checking which library has been imported in all sorts of places littered throughout your code. You can still introspect which library was used if you absolutely need to by checking what <code>lib_api.root_lib</code> is.</p>\n"}], "owner": {"reputation": 35, "user_id": 7027203, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EXVNt.jpg?s=128&g=1", "display_name": "sad_scientist", "link": "https://stackoverflow.com/users/7027203/sad-scientist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 41273023, "answer_count": 1, "score": 1, "last_activity_date": 1482359543, "creation_date": 1482353290, "question_id": 41271641, "link": "https://stackoverflow.com/questions/41271641/in-general-should-i-write-multiple-versions-of-a-code-body-in-case-a-user-is-mi", "title": "In general, should I write multiple versions of a code body in case a user is missing packages?", "body": "<p>Suppose that I'm building a Python program, and in the very beginning, I import two modules - <strong>something</strong>, which is included in the python libraries by default, and <strong>somethingElse</strong>, which isn't.</p>\n\n<p>I have two nearly-identical functions, one that works without <strong>somethingElse</strong>, but also a second version that works even better with it. While ideally, people would just install the required dependencies, I'd prefer if there accessible to users whose machines/systems are incompatible with the <strong>somethingElse</strong> package.\n<em>Example:</em></p>\n\n<pre><code>try:\n   import something\n   import somethingElse\nexcept ImportError:\n   import something\n\nif not ImportError:\n   versionA()\n\nelse:\n   versionB()\n</code></pre>\n\n<p>Is this good practice, or is there a better way to approach this problem?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "python-3.x", "python-imaging-library", "pillow", "hebrew"], "comments": [{"owner": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "edited": false, "score": 0, "creation_date": 1483367707, "post_id": 41271620, "comment_id": 70062999, "body": "Is the problem persistent for this niqqud only? or does it show similar problem for other niqqud as well?"}, {"owner": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "edited": false, "score": 0, "creation_date": 1483383785, "post_id": 41271620, "comment_id": 70069797, "body": "When I run the same code I get an error at this line <code>fnt = ImageFont.truetype(f[1], 40)</code> stating <code>IOError: cannot open resource</code>. Did you face this error?"}, {"owner": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "edited": false, "score": 0, "creation_date": 1483383880, "post_id": 41271620, "comment_id": 70069837, "body": "Also did you try this for other letters or are you facing this problem only for the letter &#39;lamed&#39;?"}, {"owner": {"reputation": 301, "user_id": 633648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96f7b720af4477bd4e33d2fd80f6d3ca?s=128&d=identicon&r=PG", "display_name": "maltman", "link": "https://stackoverflow.com/users/633648/maltman"}, "reply_to_user": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "edited": false, "score": 0, "creation_date": 1483456623, "post_id": 41271620, "comment_id": 70099509, "body": "@JeruLuke This happens not just with the lamed, but with the vav (last letter) as well. You might be receiving that error because the <b>Tammey FrankCLM</b> font is not standard. It&#39;s available online."}, {"owner": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "edited": false, "score": 0, "creation_date": 1485697456, "post_id": 41271620, "comment_id": 71023794, "body": "Have you tried it out with any another image processing library like <code>OpenCV</code> or <code>skimage</code>?"}, {"owner": {"reputation": 11200, "user_id": 84196, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a190d6bfddf4c8b63fc7882361ccde19?s=128&d=identicon&r=PG", "display_name": "Berry Tsakala", "link": "https://stackoverflow.com/users/84196/berry-tsakala"}, "edited": false, "score": 0, "creation_date": 1618647261, "post_id": 41271620, "comment_id": 118669265, "body": "It looks like the font author&#39;s fault.  If the bug is consistent in other apps you can report the bug to the author; If it&#39;s not a bug, you can try to write a special Nikud positioning for particular letters, but it&#39;s a lot of work."}], "owner": {"reputation": 301, "user_id": 633648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96f7b720af4477bd4e33d2fd80f6d3ca?s=128&d=identicon&r=PG", "display_name": "maltman", "link": "https://stackoverflow.com/users/633648/maltman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 2, "answer_count": 0, "score": 4, "last_activity_date": 1483437828, "creation_date": 1482353214, "last_edit_date": 1483437828, "question_id": 41271620, "link": "https://stackoverflow.com/questions/41271620/the-niqqud-are-not-aligned-properly-while-drawing-text-in-hebrew-using-pil-pyth", "title": "The niqqud are not aligned properly while drawing text in Hebrew using PIL (Python Imaging Library)", "body": "<p>I'm using Pillow / PIL to draw hebrew letters with nikud. I noticed that the nikudim (plural for nikud) are not properly aligned and sometimes overlap other letters. </p>\n\n<p>Any suggested fix for this? I've tried a few fonts, and they all seem to have their own issues.</p>\n\n<p>Here's the code that I'm using. </p>\n\n<pre><code>from bidi.algorithm import get_display\nfrom PIL import Image, ImageDraw, ImageFont\n\nfonts = [\n    ('Tammey FranckCLM', '/PATH/TO/FONT/TaameyFrankCLM-Medium.ttf'),\n    ('Times New Roman', '/PATH/TO/FONT/Times New Roman.ttf'),\n    ('Arial', '/PATH/TO/FONT/Arial.ttf')\n]\n\nim = Image.new(mode='RGBA', size = (1000, 1000), color = (0, 0, 0, 255))\ndraw = ImageDraw.Draw(im)\n\nheight = 100\nfor f in fonts:\n    fnt = ImageFont.truetype(f[1], 40)\n    text = '\u05e2\u05b8\u05dc\u05b5\u05d9\u05e0\u05d5\u05bc'\n    text_bidi = get_display(text, base_dir='R')\n    draw.text((100, height), f[0], font=fnt, fill=(255, 255, 255))\n    draw.text((500, height), text_bidi, font=fnt, fill=(255, 255, 255))\n    height += 70\nim.show()\nim.close()\n</code></pre>\n\n<p>Note, that due to text direction, the text renders in the proper direction on SO, but not in the terminal. In the terminal it looks like below. I'm using the BiDi algorithm to reverse the word.</p>\n\n<p><a href=\"https://i.stack.imgur.com/V2SQx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/V2SQx.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here's an example of the output. You can see the nikud (i.e. the dots underneath and next to the letters) are not the same in every font. The fonts render properly in text editors, but not in PIL. </p>\n\n<p>Any suggestions would be appreciated. Thanks!</p>\n\n<p><a href=\"https://i.stack.imgur.com/KSXX3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KSXX3.png\" alt=\"enter image description here\"></a></p>\n\n<p>For reference, it should look like below. </p>\n\n<p><a href=\"https://i.stack.imgur.com/qFISb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qFISb.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "xml", "nlp"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1482353234, "post_id": 41271597, "comment_id": 69744495, "body": "<code>re.sub(&#39;[&#47;Users&#47;xccxken&#47;Documents&#47;roget&#47;heads.txt]&#39;,&#39;&#39;,fn + &#39; &#39;)</code> is clearly a problem: you&#39;re creating a character class between square brackets with ... an url!"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1482353291, "post_id": 41271597, "comment_id": 69744527, "body": "&quot;it doesn&#39;t work&quot; isn&#39;t good enough. What&#39;s your exact problem? error message? stacktrace ?..."}, {"owner": {"reputation": 83, "user_id": 7259283, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1822214274668231/picture?type=large", "display_name": "Lyu Keting", "link": "https://stackoverflow.com/users/7259283/lyu-keting"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1482353575, "post_id": 41271597, "comment_id": 69744671, "body": "Sorry I have edited it, im new to python, but this is important to me, hope you can help me. And please tell me how to load the data file correctly.Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 7259283, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1822214274668231/picture?type=large", "display_name": "Lyu Keting", "link": "https://stackoverflow.com/users/7259283/lyu-keting"}, "edited": false, "score": 0, "creation_date": 1482355160, "post_id": 41271838, "comment_id": 69745506, "body": "thanks! can you tell me the data type of parameter a? I tried list\u2192&#39;list&#39; object has no attribute &#39;find&#39;\uff1bint\u2192&#39;int&#39; object has no attribute &#39;find&#39;\uff1b"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 83, "user_id": 7259283, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1822214274668231/picture?type=large", "display_name": "Lyu Keting", "link": "https://stackoverflow.com/users/7259283/lyu-keting"}, "edited": false, "score": 0, "creation_date": 1482355373, "post_id": 41271838, "comment_id": 69745604, "body": "maybe an <code>lxml.etree.Element</code>"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 1, "last_activity_date": 1482354099, "creation_date": 1482354099, "answer_id": 41271838, "question_id": 41271597, "link": "https://stackoverflow.com/questions/41271597/roget-python-script-unkonwn-bug/41271838#41271838", "title": "roget python script unkonwn bug", "body": "<p><code>pos</code> is a function, defined here:</p>\n\n<pre><code>def pos(pos_element):\n    return re.sub('[.#]','',pos_element.find(\"b\").text)\n</code></pre>\n\n<p>you're trying to add strings with a function (the error message is explicit enough)</p>\n\n<pre><code>return reverse_roget[w1 + '_' + pos] &amp; reverse_roget[w2 + '_' + pos]\n</code></pre>\n\n<p>Called from here:</p>\n\n<pre><code>common_categories(w1,w2,pos)\n</code></pre>\n\n<p>To get a string, you have to pass a parameter to <code>pos</code> (not sure what you would put instead of <code>a</code>):</p>\n\n<pre><code>common_categories(w1,w2,pos(a))\n</code></pre>\n\n<p>General advice: don't use the same names for parameters and function names (<code>pos</code> is a parameter in most of your functions and also a function) so you'll avoid mixups.</p>\n"}], "owner": {"reputation": 83, "user_id": 7259283, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1822214274668231/picture?type=large", "display_name": "Lyu Keting", "link": "https://stackoverflow.com/users/7259283/lyu-keting"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1482369168, "creation_date": 1482353123, "last_edit_date": 1482369168, "question_id": 41271597, "link": "https://stackoverflow.com/questions/41271597/roget-python-script-unkonwn-bug", "title": "roget python script unkonwn bug", "body": "<p>Thank you very much, can you help me more. sorry it say I need more details say I can only say happy new yer to every one!and merry christmas .</p>\n\n<pre><code>import glob, lxml, re\nfrom lxml import etree\n\n# clean the input\ndef clean(l):\n    l = l.replace('&lt;size=-1&gt;','')\n    l = l.replace('&lt;/size&gt;','')\n    l = l.replace('&lt;br&gt;','')\n    l = l.replace('&amp;','&amp;amp;')\n    l = l.replace('\"&lt;\"','&amp;lt;')\n    l = l.replace('\"&gt;\"','&amp;gt;')\n    return l.rstrip(',;\\n') + '\\n'\n\n# get information from the xml\ndef headword(class_element):\n    return re.sub('[0-9#\\[\\] ]','',class_element.find(\"headword\").find(\"b\").text)\n\ndef pos(pos_element):\n    return re.sub('[.#]','',pos_element.find(\"b\").text)\n\ndef words(paragraph_element):\n    return set([word.strip() for i in paragraph_element \n           if not i.text is None \n           for word in i.text.split(',') \n           if not word == ' '\n           ])\n\ndef index(fn,root):\n    return re.sub('[/heads.txt]','',fn + ' ') + headword(root)\n\n# helper generator:\ndef pospargen(c):\n    for a,b in [c[x:x+2] for x in xrange(len(c)-1)]:\n        if a.tag == 'pos' and b.tag == 'paragraph':\n            yield [a,b]\n\n# get list of [POS, [words,in,entry]]\ndef pos_words(c):\n    return dict([[pos(a),words(b)] for a,b in pospargen(c)])\n\nroget = {}\n\nfor fn in glob.glob(\"./heads/head*.txt\"):\n    with open(fn,'rb') as f:\n        xml = ['&lt;class&gt;']+[clean(l) for l in f.readlines()]+['&lt;/class&gt;']\n        root = etree.fromstring(''.join(xml), parser=etree.XMLParser(encoding=\"windows-1252\"))\n        roget[index(fn,root)] = pos_words(root.getchildren())\n\nparts_of_speech = ['INT', 'VB', 'ADJ', 'N']\n\nfrom collections import defaultdict\n\nreverse_roget = defaultdict(set)\nfor category in roget:\n    for pos in parts_of_speech:\n        if pos in roget[category]:\n            for word in roget[category][pos]:\n                reverse_roget[word + '_' + pos].add(category)\n\n# INTERFACE COMMANDS\ndef categories(word,pos):\n    \"If you want to know which entries a word with a given part of speech occurs in\"\n    return reverse_roget[word + '_' + pos]\n\ndef common_categories(w1,w2,pos):\n    \"If you want to know which categories are shared by two words with a given part of speech\"\n    return reverse_roget[w1 + '_' + pos] &amp; reverse_roget[w2 + '_' + pos]\n\ndef list_words(category,pos):\n    \"If you want to list the words with a given part of speech for an entry\"\n    return roget[category][pos]\n\ndef all_entries(word,pos):\n    \"If you want a list of lists, with each list containing the words for an entry\"\n    return [list_words(category,pos) for category in categories(word,pos)]\n\ndef shared_categories(l,pos):\n    \"If you want to know which categories are shared by a list of words with a given part of speech\"\n    return set.intersection(*[categories(w,pos) for w in l])\n\ndef pos(pos_element):\n    return re.sub('[.#]','',pos_element.find(\"b\").text\n</code></pre>\n\n<p>I have tried to revised the code following you suggestion.</p>\n\n<pre><code>w = \"apple\"\ncategories(word,pos(str(a)))\n</code></pre>\n\n<p>and the error is :</p>\n\n<pre><code>---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n&lt;ipython-input-242-77a24c5b4459&gt; in &lt;module&gt;()\n      1 w = \"apple\"\n----&gt; 2 categories(word,pos(str(a)))\n\n&lt;ipython-input-229-9d9e444ddd5a&gt; in pos(pos_element)\n     80 \n     81 def pos(pos_element):\n---&gt; 82     return re.sub('[.#]','',pos_element.find(\"b\").text)\n\nAttributeError: 'int' object has no attribute 'text'\n</code></pre>\n"}, {"tags": ["python", "html", "django", "web", "web-applications"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 5, "creation_date": 1482353088, "post_id": 41271546, "comment_id": 69744418, "body": "You are missing a close parenthesis on the line that includes the admin urls."}, {"owner": {"reputation": 276, "user_id": 7055610, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e8860464ed65fbc1f86f0d5a4660cb9e?s=128&d=identicon&r=PG&f=1", "display_name": "Steve D.", "link": "https://stackoverflow.com/users/7055610/steve-d"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1482353213, "post_id": 41271546, "comment_id": 69744482, "body": "oh god! Thanks so much! I&#39;ve been trying to debug this all night last night!"}, {"owner": {"reputation": 191, "user_id": 1960016, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/goBFD.jpg?s=128&g=1", "display_name": "whieronymus", "link": "https://stackoverflow.com/users/1960016/whieronymus"}, "edited": false, "score": 2, "creation_date": 1482359427, "post_id": 41271546, "comment_id": 69747457, "body": "What text editor are you using? I&#39;m using Sublime text with some plugins (everything is free) and it highlights syntax errors like that so you don&#39;t beat your head against the wall for hours trying to find a missing comma."}], "answers": [{"tags": [], "owner": {"reputation": 1313, "user_id": 5527679, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-RjAHr-Tz2HE/AAAAAAAAAAI/AAAAAAAAABc/vVLnSE3nlG8/photo.jpg?sz=128", "display_name": "Ashraful Islam", "link": "https://stackoverflow.com/users/5527679/ashraful-islam"}, "is_accepted": true, "score": 0, "last_activity_date": 1482468731, "creation_date": 1482468731, "answer_id": 41295353, "question_id": 41271546, "link": "https://stackoverflow.com/questions/41271546/syntaxerror-invalid-syntax-in-python-django/41295353#41295353", "title": "SyntaxError: invalid syntax in Python Django", "body": "<p>In your url it should be <code>url(r'^admin/', include(admin.site.urls)),</code></p>\n"}], "owner": {"reputation": 276, "user_id": 7055610, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e8860464ed65fbc1f86f0d5a4660cb9e?s=128&d=identicon&r=PG&f=1", "display_name": "Steve D.", "link": "https://stackoverflow.com/users/7055610/steve-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1786, "favorite_count": 0, "closed_date": 1482487773, "accepted_answer_id": 41295353, "answer_count": 1, "score": 0, "last_activity_date": 1482468731, "creation_date": 1482352899, "question_id": 41271546, "link": "https://stackoverflow.com/questions/41271546/syntaxerror-invalid-syntax-in-python-django", "closed_reason": "Not suitable for this site", "title": "SyntaxError: invalid syntax in Python Django", "body": "<p>I am currently using Python 3.4 with Django 1.10.3 to make a website that is basically an 'online notebook' where the user can store their notes (entries and respective topics). </p>\n\n<p>My project's main folder directory is in\n<em>C:\\Users\\Steven\\mynotes</em></p>\n\n<p>My apps' folder directory is in\n<em>C:\\Users\\Steven\\mynotess</em>\n(with <strong>double s</strong> -> I apologize for terrible naming. I'm a novice in web app development, and I don't want to go through the trouble changing the name right now)</p>\n\n<p>So I was given this error in the command prompt when I ran the server.</p>\n\n<pre><code>`Unhandled exception in thread started by &lt;function check_errors.&lt;locals&gt;.wrapper at 0x0465FB70&gt;\nTraceback (most recent call last):\n  File \"C:\\Python34\\lib\\site-packages\\django\\utils\\autoreload.py\", line 226, in wrapper\n    fn(*args, **kwargs)\n  File \"C:\\Python34\\lib\\site-packages\\django\\core\\management\\commands\\runserver.py\", line 121, in inner_run\n    self.check(display_num_errors=True)\n  File \"C:\\Python34\\lib\\site-packages\\django\\core\\management\\base.py\", line 374, in check\n    include_deployment_checks=include_deployment_checks,\n  File \"C:\\Python34\\lib\\site-packages\\django\\core\\management\\base.py\", line 361, in _run_checks\n    return checks.run_checks(**kwargs)\n  File \"C:\\Python34\\lib\\site-packages\\django\\core\\checks\\registry.py\", line 81, in run_checks\n    new_errors = check(app_configs=app_configs)\n  File \"C:\\Python34\\lib\\site-packages\\django\\core\\checks\\urls.py\", line 14, in check_url_config\n    return check_resolver(resolver)\n  File \"C:\\Python34\\lib\\site-packages\\django\\core\\checks\\urls.py\", line 24, in check_resolver\n    for pattern in resolver.url_patterns:\n  File \"C:\\Python34\\lib\\site-packages\\django\\utils\\functional.py\", line 35, in __get__\n    res = instance.__dict__[self.name] = self.func(instance)\n  File \"C:\\Python34\\lib\\site-packages\\django\\urls\\resolvers.py\", line 313, in url_patterns\n    patterns = getattr(self.urlconf_module, \"urlpatterns\", self.urlconf_module)\n  File \"C:\\Python34\\lib\\site-packages\\django\\utils\\functional.py\", line 35, in __get__\n    res = instance.__dict__[self.name] = self.func(instance)\n  File \"C:\\Python34\\lib\\site-packages\\django\\urls\\resolvers.py\", line 306, in urlconf_module\n    return import_module(self.urlconf_name)\n  File \"C:\\Python34\\lib\\importlib\\__init__.py\", line 109, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 2254, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 2237, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 2226, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 1200, in _load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 1129, in _exec\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 1467, in exec_module\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 1572, in get_code\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 1532, in source_to_code\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 321, in _call_with_frames_removed\n  File \"C:\\Users\\Steven\\mynotes\\urls.py\", line 23\n    ]\n    ^\nSyntaxError: invalid syntax`\n</code></pre>\n\n<p>This is inside <em>mynotes/urls.py</em> (main project folder)</p>\n\n<pre><code>from django.conf.urls import include, url\nfrom django.contrib import admin\n\n\nurlpatterns = [\n    url(r'^admin/', include(admin.site.urls),\n    url(r'', include('mynotess.urls', namespace= \"mynotess\")),\n]\n</code></pre>\n\n<p>This is inside <em>settings.py</em> </p>\n\n<pre><code>ROOT_URLCONF = 'mynotes.urls'\n</code></pre>\n\n<p>This is inside <em>mynotess/urls.py</em> (apps folder)</p>\n\n<pre><code>from django.conf.urls import url\nfrom . import views\n\nurlpatterns = [\n    #home page\n    url(r'^$', views.index, name = 'index'),\n    #topics page\n    url(r'^topics/$', views.topics, name = 'topics'),\n]\n</code></pre>\n\n<p>This is inside <em>views.py</em>. I have a Topic class and an Entry class in models.py. The Topic class has the attribute dateAdded (which is a timestamp)</p>\n\n<pre><code>from django.shortcuts import render\nfrom .models import Topic\n\ndef index(request):\n    #home page\n    return render(request, 'mynotess/index.html') #sends request to index.html template\n\ndef topics(request):\n    #topics page\n    topics = Topic.objects.order_by ('dateAdded')\n    context = {'topics' : topics}\n    return render(request, 'mynotess/topics.html', context)\n</code></pre>\n\n<p>Inside <em>mynotess/templates/mynotess/</em> I have three html files as follows:</p>\n\n<p><em>base.html</em> (the parent template)</p>\n\n<pre><code>&lt;p&gt; \n    &lt;a href = \"{% url 'mynotess:index' %}\"&gt;My Notes&lt;/a&gt; -\n    &lt;a href = \"{% url 'mynotess:topics' %}\"&gt;Topics&lt;/a&gt;\n&lt;/p&gt;\n\n{% block content %}{% endblock content %} \n</code></pre>\n\n<p><em>index.html</em> (for the home page)</p>\n\n<pre><code>{% extends \"mynotess/base.html\" %}\n\n{% block content %}\n&lt;p&gt;My Notes allows you to take notes online without having to worry about them getting deleted when your computer crashes! Type in anything you want to remember,\nincluding lecture notes, passwords, ANYTHING!&lt;/p&gt;\n{% endblock content %}\n</code></pre>\n\n<p><em>topics.html</em> (for the topics page)</p>\n\n<pre><code>{% extends \"mynotess/base.html\" %}\n\n{% block content %}\n\n&lt;p&gt;Topics&lt;/p&gt;\n\n&lt;ul&gt;\n{% for topic in topics %}\n&lt;li&gt;{{topic}}&lt;/li&gt;\n{% empty %}\n&lt;li&gt;No topics to show.&lt;/li&gt;\n{% endfor %}\n&lt;/ul&gt;\n\n{% endblock content %}\n</code></pre>\n\n<p>localhost:8000 would not load up as a result. I really have no idea where I went wrong here. I think the error has something to do with the URLs, but I have no idea what exactly is wrong about it. Any sort of help would be HIGHLY appreciated! Thanks!</p>\n"}, {"tags": ["python", "azure"], "answers": [{"tags": [], "owner": {"reputation": 3035, "user_id": 4074838, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8gS08_lyG7s/AAAAAAAAAAI/AAAAAAAAHqA/rU0O1y51fto/photo.jpg?sz=128", "display_name": "Laurent Mazuel", "link": "https://stackoverflow.com/users/4074838/laurent-mazuel"}, "is_accepted": true, "score": 1, "last_activity_date": 1482353577, "creation_date": 1482353577, "answer_id": 41271720, "question_id": 41271503, "link": "https://stackoverflow.com/questions/41271503/understanding-azure-compute-managment-resources-and-displaying-information/41271720#41271720", "title": "Understanding Azure Compute Managment Resources and Displaying Information", "body": "<p><em>Question 1: Can I get the JSON</em></p>\n\n<p>The SDK deserializes the JSON into specific objects, you can have a documentation of the object on ReadTheDocs: <a href=\"http://azure-sdk-for-python.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">http://azure-sdk-for-python.readthedocs.io/en/latest/</a></p>\n\n<p>For instance, <a href=\"http://azure-sdk-for-python.readthedocs.io/en/latest/ref/azure.mgmt.compute.models.html#azure.mgmt.compute.models.VirtualMachine\" rel=\"nofollow noreferrer\">VirtualMachine</a></p>\n\n<p>If you really need the JSON and not an object, you have two choices:</p>\n\n<ul>\n<li>Use raw=True in your call (see <a href=\"http://azure-sdk-for-python.readthedocs.io/en/latest/ref/azure.mgmt.compute.operations.html#azure.mgmt.compute.operations.VirtualMachinesOperations.get\" rel=\"nofollow noreferrer\">VM.get documentation</a>)</li>\n<li>Use the generic <a href=\"http://azure-sdk-for-python.readthedocs.io/en/latest/ref/azure.mgmt.resource.resources.operations.html#azure.mgmt.resource.resources.operations.ResourcesOperations.get\" rel=\"nofollow noreferrer\">resource.get</a> in the azure-mgmt-resource package. You will get <a href=\"http://azure-sdk-for-python.readthedocs.io/en/latest/ref/azure.mgmt.resource.resources.models.html#azure.mgmt.resource.resources.models.GenericResource\" rel=\"nofollow noreferrer\">GenericResource</a> object, half parsed with \"properties\" containing a dict of the properties that applies to your object.</li>\n</ul>\n\n<p><em>Question 2: How to get Network details</em></p>\n\n<p>You get the id returned in network_profile, parse it and use azure-mgmt-network package to get the details. <a href=\"https://github.com/Azure/azure-sdk-for-python/issues/897\" rel=\"nofollow noreferrer\">There is no faster way currently.</a></p>\n\n<p><em>Question 3: How to get more details about the VM</em></p>\n\n<p>The VM object is more precise using the \"expand\" mode (like running state only available in expand). In your call, use expand=\"instanceView\" (see <a href=\"http://azure-sdk-for-python.readthedocs.io/en/latest/ref/azure.mgmt.compute.operations.html#azure.mgmt.compute.operations.VirtualMachinesOperations.get\" rel=\"nofollow noreferrer\">VM.get</a> method)</p>\n\n<p>As a complement, this is the <a href=\"https://github.com/Azure-Samples/virtual-machines-python-manage\" rel=\"nofollow noreferrer\">official sample for VM</a> if it helps.</p>\n\n<p>(I'm the owner of the Azure SDK for Python at MS)</p>\n"}], "owner": {"reputation": 103, "user_id": 5893128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-dH-qqugDi34/AAAAAAAAAAI/AAAAAAAAAAw/fgAk3pLAxeA/photo.jpg?sz=128", "display_name": "Russ Kaehler", "link": "https://stackoverflow.com/users/5893128/russ-kaehler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 1, "accepted_answer_id": 41271720, "answer_count": 1, "score": 0, "last_activity_date": 1482353577, "creation_date": 1482352661, "question_id": 41271503, "link": "https://stackoverflow.com/questions/41271503/understanding-azure-compute-managment-resources-and-displaying-information", "title": "Understanding Azure Compute Managment Resources and Displaying Information", "body": "<p>I'd like to print all information that the ComputeManagementClient from the azure.mgmt.compute library offers. I've opened a compute client and found my target vm by matching the name. However when I return this object from my calling function (which is expecting a json formatted object) I get this error:</p>\n\n<pre><code>TypeError: &lt;azure.mgmt.compute.models.virtual_machine.VirtualMachine object at 0x10c19b550&gt; is not JSON serializable\n</code></pre>\n\n<p>When I print an object from inside my generating function I get a result like this:</p>\n\n<pre><code>{'os_profile': &lt;azure.mgmt.compute.models.os_profile.OSProfile object\nat 0x104966650&gt;, 'storage_profile':\n&lt;azure.mgmt.compute.models.storage_profile.StorageProfile object at\n0x104966710&gt;, 'availability_set': \n&lt;azure.mgmt.compute.models.sub_resource.SubResource object at \n0x104966850&gt;, 'name': u'azure-test-1b', 'tags': {'cluster': u'server', \n'name': u'azure-test-1b', 'service': u'server'}, \n'diagnostics_profile': None, 'vm_id': u'XXXX-XXXX-XXXX', \n'hardware_profile': \n&lt;azure.mgmt.compute.models.hardware_profile.HardwareProfile object at \n0x104966b90&gt;, 'provisioning_state': u'Failed', 'network_profile': \n&lt;azure.mgmt.compute.models.network_profile.NetworkProfile object at \n0x104966bd0&gt;, 'plan': None, 'license_type': None, 'instance_view': \nNone, 'type': u'Microsoft.Compute/virtualMachines', 'id': \nu'/subscriptions/XXXX-XXXX-XXXX/resourceGroups/YYY-YYYY-YYY/providers\n/Microsoft.Compute/virtualMachines/azure-test-1b', 'resources': None, \n'location': u'eastus2'}\n</code></pre>\n\n<p>This result looks like a json formatted objet, so I'm not sure why it returns as the object reference. What operation do I call to return the above output? Second question how can I expand the value like the network_profile that are themselves references to objects? Is there a way to return the most complete view of the VM using the azure python sdks? </p>\n"}, {"tags": ["python", "multithreading", "python-2.7", "python-3.x", "multiprocessing"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1482352796, "post_id": 41271495, "comment_id": 69744254, "body": "you may check this: <a href=\"http://stackoverflow.com/questions/26520781/multiprocessing-pool-whats-the-difference-between-map-async-and-imap\" title=\"multiprocessing pool whats the difference between map async and imap\">stackoverflow.com/questions/26520781/&hellip;</a>. Maybe <code>map</code> is too synchronous for you."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1482352814, "post_id": 41271495, "comment_id": 69744267, "body": "Don&#39;t use <code>open</code> as a function name, it&#39;s a builtin. Also, are you on Windows?"}, {"owner": {"reputation": 711, "user_id": 5736438, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ba716b39bf6f76b0ffa3c6049b024ac7?s=128&d=identicon&r=PG&f=1", "display_name": "Peter234", "link": "https://stackoverflow.com/users/5736438/peter234"}, "edited": false, "score": 0, "creation_date": 1482352863, "post_id": 41271495, "comment_id": 69744292, "body": "Check out this thread: <a href=\"http://stackoverflow.com/questions/5442910/python-multiprocessing-pool-map-for-multiple-arguments\" title=\"python multiprocessing pool map for multiple arguments\">stackoverflow.com/questions/5442910/&hellip;</a>"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 711, "user_id": 5736438, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ba716b39bf6f76b0ffa3c6049b024ac7?s=128&d=identicon&r=PG&f=1", "display_name": "Peter234", "link": "https://stackoverflow.com/users/5736438/peter234"}, "edited": false, "score": 0, "creation_date": 1482352945, "post_id": 41271495, "comment_id": 69744342, "body": "@Peter234 there aren&#39;t multiple arguments though? It&#39;s meant to take an iterable, which <code>urls</code> is."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1482353108, "post_id": 41271495, "comment_id": 69744427, "body": "You&#39;re not joining or closing the pool in this code. Is this an accurate representation of your approach? Granted I&#39;m on Windows so I&#39;ve had to shield with <code>if __name__ == &#39;__main__&#39;:</code> but currently I get no printouts at all, and zombie processes."}, {"owner": {"reputation": 361, "user_id": 6379632, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dadaaf7dd6d517dfa98a48211f3b7cb4?s=128&d=identicon&r=PG&f=1", "display_name": "Huligan", "link": "https://stackoverflow.com/users/6379632/huligan"}, "edited": false, "score": 0, "creation_date": 1482356762, "post_id": 41271495, "comment_id": 69746253, "body": "No, I run script on Cent OS"}], "answers": [{"tags": [], "owner": {"reputation": 711, "user_id": 5736438, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ba716b39bf6f76b0ffa3c6049b024ac7?s=128&d=identicon&r=PG&f=1", "display_name": "Peter234", "link": "https://stackoverflow.com/users/5736438/peter234"}, "is_accepted": false, "score": 0, "last_activity_date": 1482423980, "creation_date": 1482423980, "answer_id": 41287629, "question_id": 41271495, "link": "https://stackoverflow.com/questions/41271495/how-to-use-multiprocessing-in-python-in-this-case/41287629#41287629", "title": "How to use multiprocessing in Python in this case?", "body": "<p>I think this should do what you want to:</p>\n\n<pre><code>import multiprocessing\ndef func(x):\n    return x[0] + x[1]\n\nif __name__ == \"__main__\":    \n    p = multiprocessing.Pool(2)\n    for x in p.map(func, [(1, 2), (3, 4)]):\n        print(x)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code> 3\n 7\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7327523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/389de8137348f3cc9ce6d210384d329a?s=128&d=identicon&r=PG&f=1", "display_name": "Babajaha", "link": "https://stackoverflow.com/users/7327523/babajaha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1482423980, "creation_date": 1482352594, "question_id": 41271495, "link": "https://stackoverflow.com/questions/41271495/how-to-use-multiprocessing-in-python-in-this-case", "title": "How to use multiprocessing in Python in this case?", "body": "<p>I try to use simple way to make mulitiprocessing:</p>\n\n<pre><code>urls = [1, 2, 3, 4]\np = Pool(2)\np.map(open, urls)\n</code></pre>\n\n<p>Where <code>open()</code> is function, that does calculations.</p>\n\n<pre><code>def open(url):\n    print(url)\n</code></pre>\n\n<p>When I do <code>print(url)</code> it returns me strange result:</p>\n\n<pre><code>1\n2\n3\n4\n1\n2\n3\n4\n</code></pre>\n\n<p>I can assume that each of process <code>Pool(2)</code> handler the same calculations there is wrong.</p>\n\n<p>I need that process 1 takes <code>[1, 2]</code> for handling and process 2 takes <code>[3, 4]</code></p>\n"}, {"tags": ["python", "python-3.x", "floating-point", "precision", "comparison-operators"], "comments": [{"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1482352929, "post_id": 41271491, "comment_id": 69744335, "body": "Precision is limited, yes. Not exactly in the number of <i>decimal</i> digits though, so if you look at it as though it is, the precision will appear to vary."}, {"owner": {"reputation": 812, "user_id": 2812104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/32020ed2a1967e06e2c6a6be71921fd6?s=128&d=identicon&r=PG&f=1", "display_name": "jeremy radcliff", "link": "https://stackoverflow.com/users/2812104/jeremy-radcliff"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1482353016, "post_id": 41271491, "comment_id": 69744375, "body": "@harold, but when you <i>give</i> python two values to compare, there are no calculations to make (as in I&#39;m not asking python to add, subtract, etc...two floating point values), so why can&#39;t it figure out that 5 != 5.000000000000000001?"}, {"owner": {"reputation": 812, "user_id": 2812104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/32020ed2a1967e06e2c6a6be71921fd6?s=128&d=identicon&r=PG&f=1", "display_name": "jeremy radcliff", "link": "https://stackoverflow.com/users/2812104/jeremy-radcliff"}, "reply_to_user": {"reputation": 368279, "user_id": 1288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG", "display_name": "Bill the Lizard", "link": "https://stackoverflow.com/users/1288/bill-the-lizard"}, "edited": false, "score": 1, "creation_date": 1482353087, "post_id": 41271491, "comment_id": 69744416, "body": "@BilltheLizard, I think the question is different because the context is comparison operators, although it&#39;s obviously related. In this case I&#39;m asking why python can&#39;t figure out that 5.0000000000000000001 is not 5, not why python returns approximations when computing FPV&#39;s. Not sure it was worth an instant downvote...(not saying it was you, but whoever it was it&#39;d be nice to get an explanation)."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 3, "creation_date": 1482353226, "post_id": 41271491, "comment_id": 69744488, "body": "@jeremyradcliff well they&#39;re not strings, so clearly there&#39;s (implicitly) a parsing step. Since they become true floats, they become limited to that precision."}, {"owner": {"reputation": 812, "user_id": 2812104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/32020ed2a1967e06e2c6a6be71921fd6?s=128&d=identicon&r=PG&f=1", "display_name": "jeremy radcliff", "link": "https://stackoverflow.com/users/2812104/jeremy-radcliff"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 1, "creation_date": 1482353769, "post_id": 41271491, "comment_id": 69744784, "body": "@harold, thank you, that makes sense."}, {"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 1, "creation_date": 1482354026, "post_id": 41271491, "comment_id": 69744903, "body": "If you&#39;re up for it, look into <a href=\"https://github.com/python/cpython/blob/master/Objects/floatobject.c#L344\" rel=\"nofollow noreferrer\"><code>float_richcompare</code></a> he&#39;s responsible for this operation. I generally think this is a nice Q."}, {"owner": {"reputation": 812, "user_id": 2812104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/32020ed2a1967e06e2c6a6be71921fd6?s=128&d=identicon&r=PG&f=1", "display_name": "jeremy radcliff", "link": "https://stackoverflow.com/users/2812104/jeremy-radcliff"}, "reply_to_user": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 1, "creation_date": 1482354564, "post_id": 41271491, "comment_id": 69745197, "body": "@JimFasarakis-Hilliard, thank you. It&#39;s probably beyond my current skills to grasp all of what&#39;s in that function, but I think I can gain a lot by going through it slowly and trying nonetheless."}, {"owner": {"reputation": 967, "user_id": 4539233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8nuiJ.jpg?s=128&g=1", "display_name": "Ecko", "link": "https://stackoverflow.com/users/4539233/ecko"}, "reply_to_user": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 0, "creation_date": 1482354568, "post_id": 41271491, "comment_id": 69745200, "body": "@JimFasarakis-Hilliard I agree. Info could be posted as answer?"}, {"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "reply_to_user": {"reputation": 967, "user_id": 4539233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8nuiJ.jpg?s=128&g=1", "display_name": "Ecko", "link": "https://stackoverflow.com/users/4539233/ecko"}, "edited": false, "score": 1, "creation_date": 1482354678, "post_id": 41271491, "comment_id": 69745254, "body": "@XamuelSchulman I wouldn&#39;t feel comfortable doing that. I&#39;d like to see it  explained, I&#39;m trying to explain it to myself first and then I&#39;ll post an answer (If someone doesn&#39;t beat me to it :-)"}, {"owner": {"reputation": 967, "user_id": 4539233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8nuiJ.jpg?s=128&g=1", "display_name": "Ecko", "link": "https://stackoverflow.com/users/4539233/ecko"}, "reply_to_user": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 0, "creation_date": 1482354834, "post_id": 41271491, "comment_id": 69745347, "body": "@JimFasarakis-Hilliard Of course. I meant just that at some point all this could be put together into an answer instead of a bunch of comments."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 0, "creation_date": 1482354851, "post_id": 41271491, "comment_id": 69745356, "body": "@JimFasarakis-Hilliard: None of the stuff in <code>float_richcompare</code> is interesting in the context of this question, though; everything relevant happens in the source code-&gt;float conversion step. The code path for <code>float_richcompare</code> in the <code>some_float == some_other_float</code> case boils down to a C-level <code>==</code> check."}, {"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1482354930, "post_id": 41271491, "comment_id": 69745396, "body": "@user2357112 certain? care to explain in an answer? I was confident the cause was in the <code>richcompare</code>."}, {"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 0, "creation_date": 1482355079, "post_id": 41271491, "comment_id": 69745462, "body": "ok, just did <code>float(5.0000000000000000000000001)</code> and <code>float(5.00001)</code> and got my answer :-) that&#39;s what I get for going straight to the operation"}, {"owner": {"reputation": 368279, "user_id": 1288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG", "display_name": "Bill the Lizard", "link": "https://stackoverflow.com/users/1288/bill-the-lizard"}, "edited": false, "score": 0, "creation_date": 1482356468, "post_id": 41271491, "comment_id": 69746126, "body": "No, the question is not different. Python can&#39;t figure out that 5.0000000000000000001 is not 5 <i>because</i> Python returns approximations when interpreting FPVs. Just set <code>x = 5.0000000000000000001</code> then look at the value of <code>x</code>."}], "answers": [{"comments": [{"owner": {"reputation": 812, "user_id": 2812104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/32020ed2a1967e06e2c6a6be71921fd6?s=128&d=identicon&r=PG&f=1", "display_name": "jeremy radcliff", "link": "https://stackoverflow.com/users/2812104/jeremy-radcliff"}, "edited": false, "score": 0, "creation_date": 1482362401, "post_id": 41272619, "comment_id": 69748532, "body": "Thank you for writing a complete answer, this is very helpful; I had no idea python was going through the process of turning the input into a C double."}, {"owner": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 0, "creation_date": 1482394565, "post_id": 41272619, "comment_id": 69758551, "body": "Why &quot;unfortunately&quot;? You surely wouldn&#39;t want an equality comparison of floats to do some kind of fuzzy comparison: it would mess up transitivity of equality, and hence set and dict containment, etc."}, {"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "reply_to_user": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 0, "creation_date": 1482404919, "post_id": 41272619, "comment_id": 69765018, "body": "@MarkDickinson I initially though this was something <code>float_richcompare</code> did i.e I missed that ` 5.0000000000000001` is going to get approximated to <code>5.0</code> by <code>float_new</code>;. I thought that happened in <code>richcompare</code>. The &quot;unfortunately&quot; directs to my &quot;swing and miss&quot; comment under the question :-)"}, {"owner": {"reputation": 3231, "user_id": 100914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cecc94d6c01933540c51422aaa9e2a35?s=128&d=identicon&r=PG", "display_name": "Rick Regan", "link": "https://stackoverflow.com/users/100914/rick-regan"}, "edited": false, "score": 0, "creation_date": 1482413802, "post_id": 41272619, "comment_id": 69770493, "body": "Well, not <i>any</i> input with more than 16 digits: E.g., 5.0000000000000005 is not 5."}, {"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "reply_to_user": {"reputation": 3231, "user_id": 100914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cecc94d6c01933540c51422aaa9e2a35?s=128&d=identicon&r=PG", "display_name": "Rick Regan", "link": "https://stackoverflow.com/users/100914/rick-regan"}, "edited": false, "score": 0, "creation_date": 1482414140, "post_id": 41272619, "comment_id": 69770716, "body": "@RickRegan the wording was ambiguous, updated that to better describe what I meant to say."}], "tags": [], "owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "is_accepted": true, "score": 2, "last_activity_date": 1482414115, "last_edit_date": 1482414115, "creation_date": 1482357595, "answer_id": 41272619, "question_id": 41271491, "link": "https://stackoverflow.com/questions/41271491/why-is-5-5-0000000000000000001-false-but-5-5-00000001-true/41272619#41272619", "title": "Why is 5 != 5.0000000000000000001 False, but 5 != 5.00000001 True?", "body": "<p>In short, during the phase were parsing of input is done, Python needs to transform your input to a <code>C double</code> which can then be transformed to a Python <code>float</code>. Inputs with more <a href=\"https://en.wikipedia.org/wiki/Floating_point#Internal_representation\" rel=\"nofollow noreferrer\">than 16 decimal digits</a> are going to get approximated, with <code>5.0000000000000001</code> getting approximated to <code>5.0</code>:</p>\n\n<pre><code>&gt;&gt;&gt; 5.0000000000000001 \n5.0\n</code></pre>\n\n<p>As a result the comparison <code>5 == 5.0000000000000001</code> is going to succeed (<code>5</code> is going to get transformed to a Python float equal to <code>5.0</code> in order for the comparison to take place).</p>\n\n<p>For digits less than the aforementioned, the result (can be represented) and speaks for itself:</p>\n\n<pre><code>&gt;&gt;&gt; 5.000000000000001\n5.000000000000001\n</code></pre>\n\n<p>Yes, <code>float_richcompare</code> has --unfortunately-- nothing to do with this behavior as I thought in my original comment on the question. It all happens before it gets invoked. </p>\n"}], "owner": {"reputation": 812, "user_id": 2812104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/32020ed2a1967e06e2c6a6be71921fd6?s=128&d=identicon&r=PG&f=1", "display_name": "jeremy radcliff", "link": "https://stackoverflow.com/users/2812104/jeremy-radcliff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "closed_date": 1482359481, "accepted_answer_id": 41272619, "answer_count": 1, "score": 2, "last_activity_date": 1482414115, "creation_date": 1482352577, "last_edit_date": 1482354289, "question_id": 41271491, "link": "https://stackoverflow.com/questions/41271491/why-is-5-5-0000000000000000001-false-but-5-5-00000001-true", "closed_reason": "Duplicate", "title": "Why is 5 != 5.0000000000000000001 False, but 5 != 5.00000001 True?", "body": "<p>In python 3.5, I was just playing around with comparison operators and came across this (seeming) oddity.</p>\n\n<p>Is there a threshold of number of zeros after the decimal point past which the interpreter decides to not consider values relevant because of the inherent inaccuracy of floating point values?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 2502, "user_id": 3589054, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2af7ed5cc40b1b8479cd082ca3e0c4af?s=128&d=identicon&r=PG&f=1", "display_name": "NinjaGaiden", "link": "https://stackoverflow.com/users/3589054/ninjagaiden"}, "edited": false, "score": 4, "creation_date": 1482352569, "post_id": 41271439, "comment_id": 69744151, "body": "df[&#39;age_total&#39;]=df.groupby(&#39;city&#39;).cumsum()[&#39;age&#39;]  should do the trick"}, {"owner": {"reputation": 795, "user_id": 3302483, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/dc5fd6993e969109aca4a26cbe69fda2?s=128&d=identicon&r=PG&f=1", "display_name": "user3302483", "link": "https://stackoverflow.com/users/3302483/user3302483"}, "reply_to_user": {"reputation": 2502, "user_id": 3589054, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2af7ed5cc40b1b8479cd082ca3e0c4af?s=128&d=identicon&r=PG&f=1", "display_name": "NinjaGaiden", "link": "https://stackoverflow.com/users/3589054/ninjagaiden"}, "edited": false, "score": 0, "creation_date": 1482352838, "post_id": 41271439, "comment_id": 69744285, "body": "Perfect - thank you."}], "answers": [{"comments": [{"owner": {"reputation": 423, "user_id": 4781358, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-hRY4wr2Dt0M/AAAAAAAAAAI/AAAAAAAADGY/D4wnv7luqNY/photo.jpg?sz=128", "display_name": "RedVII", "link": "https://stackoverflow.com/users/4781358/redvii"}, "edited": false, "score": 0, "creation_date": 1482356899, "post_id": 41271543, "comment_id": 69746304, "body": "I&#39;m just curious, what if he wanted an overall sum across the city grouping and not a running sum? What&#39;s the quickest way to approach that."}, {"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "reply_to_user": {"reputation": 423, "user_id": 4781358, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-hRY4wr2Dt0M/AAAAAAAAAAI/AAAAAAAADGY/D4wnv7luqNY/photo.jpg?sz=128", "display_name": "RedVII", "link": "https://stackoverflow.com/users/4781358/redvii"}, "edited": false, "score": 1, "creation_date": 1482357637, "post_id": 41271543, "comment_id": 69746670, "body": "@RedVII That would be a usecase for <code>transform</code> df[&#39;overall_age_total&#39;] = df.groupby(&#39;city)[&#39;age&#39;].transform(&#39;sum&#39;)`"}], "tags": [], "owner": {"reputation": 795, "user_id": 3302483, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/dc5fd6993e969109aca4a26cbe69fda2?s=128&d=identicon&r=PG&f=1", "display_name": "user3302483", "link": "https://stackoverflow.com/users/3302483/user3302483"}, "is_accepted": false, "score": 3, "last_activity_date": 1482353009, "last_edit_date": 1482353009, "creation_date": 1482352890, "answer_id": 41271543, "question_id": 41271439, "link": "https://stackoverflow.com/questions/41271439/in-a-pandas-dataframe-how-do-i-add-a-field-that-is-a-running-total-with-a-group/41271543#41271543", "title": "In a pandas dataframe how do i add a field that is a running total with a group by", "body": "<pre><code>df['age_total']=df.groupby('city').cumsum()['age']\n</code></pre>\n"}], "owner": {"reputation": 795, "user_id": 3302483, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/dc5fd6993e969109aca4a26cbe69fda2?s=128&d=identicon&r=PG&f=1", "display_name": "user3302483", "link": "https://stackoverflow.com/users/3302483/user3302483"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1482353009, "creation_date": 1482352360, "question_id": 41271439, "link": "https://stackoverflow.com/questions/41271439/in-a-pandas-dataframe-how-do-i-add-a-field-that-is-a-running-total-with-a-group", "title": "In a pandas dataframe how do i add a field that is a running total with a group by", "body": "<p>I have the following dataframe:</p>\n\n<pre><code>import pandas\n\nmydata = [{'city': 'London', 'age': 75, 'fdg': 1.78},\n          {'city': 'Paris', 'age': 22, 'fdg': 1.56},\n          {'city': 'Paris', 'age': 32, 'fdg': 1.56},\n          {'city': 'New York', 'age': 37, 'fdg': 1.56},\n          {'city': 'London', 'age': 24, 'fdg': 1.56},\n          {'city': 'London', 'age': 22, 'fdg': 1.56},\n          {'city': 'New York', 'age': 60, 'fdg': 1.56},\n          {'city': 'Paris', 'age': 22, 'fdg': 1.56},\n\n\n          ]\ndf = pandas.DataFrame(mydata)\n\n   age      city   fdg\n0   75    London  1.78\n1   22     Paris  1.56\n2   32     Paris  1.56\n3   37  New York  1.56\n4   24    London  1.56\n5   22    London  1.56\n6   60  New York  1.56\n7   22     Paris  1.56\n</code></pre>\n\n<p>I'd like to add a field to the end called age_total which will be a cumulative total of the age field.  The cumulative calculation would work over a group by of city - So row 1 for London would be 75, row 2 for Paris would be 22 and row 3 for Paris would be 54 - (22+32)</p>\n"}, {"tags": ["python", "pandas", "pycharm"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user554546"}, "edited": false, "score": 2, "creation_date": 1482352413, "post_id": 41271425, "comment_id": 69744038, "body": "Well, according to the screenshot, you tried importing <code>pandas</code> after attempting to use <code>pd.read_csv</code>"}, {"owner": {"reputation": 7845, "user_id": 2182243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/REXWZ.jpg?s=128&g=1", "display_name": "Cybercop", "link": "https://stackoverflow.com/users/2182243/cybercop"}, "edited": false, "score": 0, "creation_date": 1482352557, "post_id": 41271425, "comment_id": 69744143, "body": "no <code>pandas</code> already exists..do u mean I have to put second screenshot on top?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user554546"}, "edited": false, "score": 0, "creation_date": 1482352616, "post_id": 41271425, "comment_id": 69744177, "body": "The order in which you evaluate cells matters. If you try to evaluate a cell in which a module is used before you attempt to import it in another cell, then the Python interpreter won&#39;t be able to find the module, because you haven&#39;t imported it, yet."}, {"owner": {"reputation": 7845, "user_id": 2182243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/REXWZ.jpg?s=128&g=1", "display_name": "Cybercop", "link": "https://stackoverflow.com/users/2182243/cybercop"}, "edited": false, "score": 1, "creation_date": 1482352776, "post_id": 41271425, "comment_id": 69744245, "body": "haha thank you so much i realised i have to run first cell first then the other. I am new to this python and pycharm thing. Thank you very much that helped"}], "answers": [{"tags": [], "owner": {"reputation": 7845, "user_id": 2182243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/REXWZ.jpg?s=128&g=1", "display_name": "Cybercop", "link": "https://stackoverflow.com/users/2182243/cybercop"}, "is_accepted": false, "score": 1, "last_activity_date": 1482352812, "creation_date": 1482352812, "answer_id": 41271531, "question_id": 41271425, "link": "https://stackoverflow.com/questions/41271425/pycharm-ipython-package-not-loading/41271531#41271531", "title": "pycharm ipython package not loading?", "body": "<p>Turns out I have to run the first cell first then the others. </p>\n"}], "owner": {"reputation": 7845, "user_id": 2182243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/REXWZ.jpg?s=128&g=1", "display_name": "Cybercop", "link": "https://stackoverflow.com/users/2182243/cybercop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1482352812, "creation_date": 1482352285, "last_edit_date": 1482352674, "question_id": 41271425, "link": "https://stackoverflow.com/questions/41271425/pycharm-ipython-package-not-loading", "title": "pycharm ipython package not loading?", "body": "<p>I am trying to work on a ipython notebook on pycharm but I am not being able to use the packages\n<a href=\"https://i.stack.imgur.com/09pTh.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/09pTh.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see it says <code>pd</code> is not defined in my case.\nAny idea why it is saying that?\nNot just that, when I try to use <code>sns</code> it says sns is not defined as well.</p>\n\n<p>I went to <code>file-&gt;settings-&gt;projectInterpreter</code> Below is a screnshot with pandas package installed. </p>\n\n<p>Pandas was already installed before i started writing any code. Seaborn was installed manually later.\n<a href=\"https://i.stack.imgur.com/7uZTl.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7uZTl.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Could anyone explain why I am getting this error in pycharm?\nThanking you in advance.</p>\n"}, {"tags": ["python", "pandas", "stock"], "comments": [{"owner": {"reputation": 33, "user_id": 6902058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c135581515076c6e733a394c8880781e?s=128&d=identicon&r=PG&f=1", "display_name": "Hemant Kumar", "link": "https://stackoverflow.com/users/6902058/hemant-kumar"}, "edited": false, "score": 0, "creation_date": 1482352017, "post_id": 41271327, "comment_id": 69743800, "body": "ticker_list = {&#39;IWM&#39;: &#39;IWM&#39;,                &#39;IBM&#39;: &#39;IBM&#39;}"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6902058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c135581515076c6e733a394c8880781e?s=128&d=identicon&r=PG&f=1", "display_name": "Hemant Kumar", "link": "https://stackoverflow.com/users/6902058/hemant-kumar"}, "edited": false, "score": 0, "creation_date": 1482377918, "post_id": 41272353, "comment_id": 69752267, "body": "thanks ..this work.  One more quick question.  For quartar to date, i added the following but it retruns start of month rather start of quarter.  ** quarter = today - pd.tseries.offsets.BQuarterBegin()  **  what am i doing wrong"}, {"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "reply_to_user": {"reputation": 33, "user_id": 6902058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c135581515076c6e733a394c8880781e?s=128&d=identicon&r=PG&f=1", "display_name": "Hemant Kumar", "link": "https://stackoverflow.com/users/6902058/hemant-kumar"}, "edited": false, "score": 0, "creation_date": 1482378168, "post_id": 41272353, "comment_id": 69752317, "body": "You have to add <code>startmonth=1</code>. Check the issue here <a href=\"https://github.com/pandas-dev/pandas/issues/8435\" rel=\"nofollow noreferrer\">github.com/pandas-dev/pandas/issues/8435</a>"}], "tags": [], "owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "is_accepted": true, "score": 2, "last_activity_date": 1482356799, "last_edit_date": 1482356799, "creation_date": 1482356493, "answer_id": 41272353, "question_id": 41271327, "link": "https://stackoverflow.com/questions/41271327/pandas-dataframe-for-stock-change/41272353#41272353", "title": "Pandas Dataframe for Stock % change", "body": "<p>I believe this will get you there</p>\n\n<pre><code>tickers = ['IWM', 'IBM']\ndf_list = []\nfor ticker in tickers:\n    prices = data.DataReader(ticker, 'yahoo', '2016')['Close']\n\n    # get all timestamps for specific lookups\n    today = prices.index[-1]\n    yest= prices.index[-2]\n    start = prices.index[0]\n    week = today - pd.tseries.offsets.Week(weekday=0)\n    month = today - pd.tseries.offsets.BMonthBegin()\n\n    # calculate percentage changes\n    close = prices[today]\n    daily =  (close - prices[yest]) / prices[yest] * 100\n    wtd = (close - prices[week]) / prices[week] * 100\n    mtd = (close - prices[month]) / prices[month] * 100\n    ytd = (close - prices[start]) / prices[start]* 100\n\n    # create temporary frame for current ticker\n    df = pd.DataFrame(data=[[ticker, close, daily, wtd, mtd,  ytd]], \n                      columns=['stock', 'Close', 'Daily', 'WTD', 'MTD', 'YTD'])\n    df_list.append(df)\n\n# stack all frames\npd.concat(df_list)\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>  stock       Close     Daily       WTD       MTD        YTD\n0   IWM  137.960007  0.847956  0.847956  5.337105  25.406785\n0   IBM  167.600006  0.551964  0.551964  4.867976  23.280625\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6902058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c135581515076c6e733a394c8880781e?s=128&d=identicon&r=PG&f=1", "display_name": "Hemant Kumar", "link": "https://stackoverflow.com/users/6902058/hemant-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2553, "favorite_count": 1, "accepted_answer_id": 41272353, "answer_count": 1, "score": 3, "last_activity_date": 1534879300, "creation_date": 1482351897, "last_edit_date": 1534879300, "question_id": 41271327, "link": "https://stackoverflow.com/questions/41271327/pandas-dataframe-for-stock-change", "title": "Pandas Dataframe for Stock % change", "body": "<p>I like to create a pandas df for tracking % change of stock on daily, weekly, monthly and yearly basis.\nHere is output what i would like the output to look like:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>stock\tClose\tDaily\tWTD\tMTD\tYTD\r\n0\tIWM\t137.960007\t0.847956\t0.847956\t5.337105\t25.406785\r\n1\tIBM\t167.600006\t0.551964\t0.551964\t4.867976\t23.280625</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Here is the code that used to generate it.  I am new to python and panda. Is there a better way of doing this. Also , i am inputing the dates manually, can it be generated automatically.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>import pandas as pd\r\nfrom datetime import datetime, timedelta\r\nfrom pandas_datareader import data,wb\r\n\r\n\r\nstart = datetime(2016, 1, 1)\r\nend = datetime.today()\r\n\r\nm_start = datetime(2016, 12, 1)\r\n\r\nw_start = datetime(2016, 12, 19)\r\n\r\nd_start = end - timedelta(days=2)\r\n\r\n\r\nlabels = ['stock','Close','Daily','WTD','MTD','YTD']\r\n\r\ndat = []\r\n\r\nfor ticker in ticker_list:\r\n    prices = data.DataReader(ticker, 'yahoo', start, end)\r\n    closing_prices = prices['Close']\r\n    change = 100 * (closing_prices[-1] - closing_prices[0]) / closing_prices[0]\r\n    \r\n    #get the monthly % gain\r\n    m_price = data.DataReader(ticker, 'yahoo', m_start, end)\r\n    m_close = m_price['Close']\r\n    m_change = 100 * (m_close[-1] - m_close[0]) / m_close[0]\r\n\r\n    #get the weekly % gain\r\n    w_price = data.DataReader(ticker, 'yahoo', w_start, end)\r\n    w_close = w_price['Close']\r\n    w_change = 100 * (w_close[-1] - w_close[0]) / w_close[0]\r\n\r\n    #get the Daily % gain\r\n    d_price = data.DataReader(ticker, 'yahoo', d_start, end)\r\n    d_close = d_price['Close']\r\n    d_change = 100 * (d_close[-1] - d_close[0]) / d_close[0]\r\n    \r\n    dat.append((ticker,closing_prices[-1],d_change,w_change,m_change,change))\r\n    \r\n\r\ndf2 = pd.DataFrame.from_records(dat,columns=labels)\r\ndf2</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Any help to improve this code is really appreciated.</p>\n\n<p>thanks</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 1225, "user_id": 4306963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8537acf9a738a567c04aee16365d977a?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/4306963/max"}, "edited": false, "score": 0, "creation_date": 1482352005, "post_id": 41271318, "comment_id": 69743793, "body": "What would you prefer it output?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user554546"}, "edited": false, "score": 1, "creation_date": 1482352017, "post_id": 41271318, "comment_id": 69743799, "body": "In Python 3, lots of things that used to return lists (including <code>itertools.permutations</code>) instead return generators."}, {"owner": {"reputation": 3467, "user_id": 3393308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a3f30f7c191e8d556c70c951fe3d9af?s=128&d=identicon&r=PG", "display_name": "yorodm", "link": "https://stackoverflow.com/users/3393308/yorodm"}, "edited": false, "score": 0, "creation_date": 1482352152, "post_id": 41271318, "comment_id": 69743887, "body": "Can you post an example of the expected output?"}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 7246792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d43934081601857fcbb0e6ebebb0e0b?s=128&d=identicon&r=PG&f=1", "display_name": "PAS", "link": "https://stackoverflow.com/users/7246792/pas"}, "edited": false, "score": 0, "creation_date": 1482352076, "post_id": 41271360, "comment_id": 69743832, "body": "how can I get around this"}, {"owner": {"reputation": 2321, "user_id": 2377489, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/78lEW.jpg?s=128&g=1", "display_name": "quapka", "link": "https://stackoverflow.com/users/2377489/quapka"}, "reply_to_user": {"reputation": 115, "user_id": 7246792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d43934081601857fcbb0e6ebebb0e0b?s=128&d=identicon&r=PG&f=1", "display_name": "PAS", "link": "https://stackoverflow.com/users/7246792/pas"}, "edited": false, "score": 0, "creation_date": 1482352254, "post_id": 41271360, "comment_id": 69743952, "body": "@PAS set <code>combos = p(...)</code> inside the inner loop."}, {"owner": {"reputation": 67418, "user_id": 418413, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e459bf8123c85dc2c708ee8210c0320b?s=128&d=identicon&r=PG", "display_name": "kojiro", "link": "https://stackoverflow.com/users/418413/kojiro"}, "reply_to_user": {"reputation": 2321, "user_id": 2377489, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/78lEW.jpg?s=128&g=1", "display_name": "quapka", "link": "https://stackoverflow.com/users/2377489/quapka"}, "edited": false, "score": 0, "creation_date": 1482352293, "post_id": 41271360, "comment_id": 69743980, "body": "@quapka why would we want to recalculate the permutations at each outer iteration?"}, {"owner": {"reputation": 2321, "user_id": 2377489, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/78lEW.jpg?s=128&g=1", "display_name": "quapka", "link": "https://stackoverflow.com/users/2377489/quapka"}, "reply_to_user": {"reputation": 115, "user_id": 7246792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d43934081601857fcbb0e6ebebb0e0b?s=128&d=identicon&r=PG&f=1", "display_name": "PAS", "link": "https://stackoverflow.com/users/7246792/pas"}, "edited": false, "score": 0, "creation_date": 1482352474, "post_id": 41271360, "comment_id": 69744085, "body": "@kojiro I guess it depends, what is more time consuming - whether iterating over list, or creating the generator each time. @PAS asked <code>how can I get around this</code>, that&#39;s why I answered.."}], "tags": [], "owner": {"reputation": 67418, "user_id": 418413, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e459bf8123c85dc2c708ee8210c0320b?s=128&d=identicon&r=PG", "display_name": "kojiro", "link": "https://stackoverflow.com/users/418413/kojiro"}, "is_accepted": true, "score": 6, "last_activity_date": 1482352100, "last_edit_date": 1482352100, "creation_date": 1482352037, "answer_id": 41271360, "question_id": 41271318, "link": "https://stackoverflow.com/questions/41271318/for-loop-not-looping-correctly/41271360#41271360", "title": "for loop not looping correctly", "body": "<p>itertools.permutations produces an iterator. That means it can be consumed. Once consumed, a subsequent loop will just skip it. If you convert it to a list, you will have continued access to its members.</p>\n\n<pre><code>from itertools import permutations as p\ncombos = list(p(['/','*','-','+'], 3))\nnumbers = list(p(['9','7','7','6']))\nfor y in numbers:\n    print(y)\n    for x in combos:\n        print(x)\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 7246792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d43934081601857fcbb0e6ebebb0e0b?s=128&d=identicon&r=PG&f=1", "display_name": "PAS", "link": "https://stackoverflow.com/users/7246792/pas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 41271360, "answer_count": 1, "score": 1, "last_activity_date": 1482352100, "creation_date": 1482351860, "question_id": 41271318, "link": "https://stackoverflow.com/questions/41271318/for-loop-not-looping-correctly", "title": "for loop not looping correctly", "body": "<p>this is probably an easy problem, but my code is only executing the outer for loop at the end, and once at the beginning. It should loop over every combo for every combination of numbers</p>\n\n<pre><code>from itertools import permutations as p                                                                                                              \ncombos = p(['/','*','-','+'], 3)                                                                                          \nnumbers = p(['9','7','7','6'])                                                                                                                       \nfor y in numbers:                                                                                                                                    \n    print(y)                                                                                                                                         \n    for x in combos:                                                                                                           \n        print(x)                                                                                                                                     \n</code></pre>\n\n<p>What am I doing wrong? It outputs:</p>\n\n<pre><code>('9', '7', '7', '6')\n('/', '*', '-')\n('/', '*', '+')\n('/', '-', '*')\n('/', '-', '+')\n('/', '+', '*')\n('/', '+', '-')\n('*', '/', '-')\n('*', '/', '+')\n('*', '-', '/')\n('*', '-', '+')\n('*', '+', '/')\n('*', '+', '-')\n('-', '/', '*')\n('-', '/', '+')\n('-', '*', '/')\n('-', '*', '+')\n('-', '+', '/')\n('-', '+', '*')\n('+', '/', '*')\n('+', '/', '-')\n('+', '*', '/')\n('+', '*', '-')\n('+', '-', '/')\n('+', '-', '*')\n('9', '7', '6', '7')\n('9', '7', '7', '6')\n('9', '7', '6', '7')\n('9', '6', '7', '7')\n('9', '6', '7', '7')\n('7', '9', '7', '6')\n('7', '9', '6', '7')\n('7', '7', '9', '6')\n('7', '7', '6', '9')\n('7', '6', '9', '7')\n('7', '6', '7', '9')\n('7', '9', '7', '6')\n('7', '9', '6', '7')\n('7', '7', '9', '6')\n('7', '7', '6', '9')\n('7', '6', '9', '7')\n('7', '6', '7', '9')\n('6', '9', '7', '7')\n('6', '9', '7', '7')\n('6', '7', '9', '7')\n('6', '7', '7', '9')\n('6', '7', '9', '7')\n('6', '7', '7', '9')\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3600, "user_id": 5247911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IpGVs.png?s=128&g=1", "display_name": "Dinesh Pundkar", "link": "https://stackoverflow.com/users/5247911/dinesh-pundkar"}, "edited": false, "score": 2, "creation_date": 1482351886, "post_id": 41271299, "comment_id": 69743723, "body": "&quot;first two numbers of a number&quot; -- you mean to say &quot;first two digit of number&quot; ??"}, {"owner": {"reputation": 2757, "user_id": 5308259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5628c03fe452a8420fc130408101e057?s=128&d=identicon&r=PG&f=1", "display_name": "Psytho", "link": "https://stackoverflow.com/users/5308259/psytho"}, "edited": false, "score": 3, "creation_date": 1482351914, "post_id": 41271299, "comment_id": 69743735, "body": "Convert to string and check if first two symbols are &quot;15&quot;."}, {"owner": {"reputation": 503, "user_id": 7245163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf69384a6273e4354238812ae3485308?s=128&d=identicon&r=PG&f=1", "display_name": "John28", "link": "https://stackoverflow.com/users/7245163/john28"}, "edited": false, "score": 0, "creation_date": 1482354613, "post_id": 41271299, "comment_id": 69745223, "body": "Sorry Dinesh Pundkar. Yes I mean the first two digit of number..."}, {"owner": {"reputation": 4055, "user_id": 2088339, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e2232bd21fc3bff471941de8a7fc7191?s=128&d=identicon&r=PG", "display_name": "ChrisFreeman", "link": "https://stackoverflow.com/users/2088339/chrisfreeman"}, "edited": false, "score": 0, "creation_date": 1558488536, "post_id": 41271299, "comment_id": 99114486, "body": "<code>str(i).startswith(str(15))</code> or <code>str(i).startswith(&#39;15&#39;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4055, "user_id": 2088339, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e2232bd21fc3bff471941de8a7fc7191?s=128&d=identicon&r=PG", "display_name": "ChrisFreeman", "link": "https://stackoverflow.com/users/2088339/chrisfreeman"}, "edited": false, "score": 3, "creation_date": 1558487692, "post_id": 41271341, "comment_id": 99114366, "body": "I originally came here for a math-based answer, but found this string-based solution is faster than the other math-based answer provided. <a href=\"https://stackoverflow.com/questions/41271299/how-can-i-get-the-first-two-digits-of-a-number/56248048#56248048\">see %timeit results below</a>"}, {"owner": {"reputation": 541, "user_id": 5737637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IeRo.jpg?s=128&g=1", "display_name": "soheshdoshi", "link": "https://stackoverflow.com/users/5737637/soheshdoshi"}, "edited": false, "score": 0, "creation_date": 1568630153, "post_id": 41271341, "comment_id": 102322044, "body": "what about rounding number ?"}], "tags": [], "owner": {"reputation": 15599, "user_id": 4575071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9bceb35fc57e732ca44911b801b12e?s=128&d=identicon&r=PG&f=1", "display_name": "ettanany", "link": "https://stackoverflow.com/users/4575071/ettanany"}, "is_accepted": true, "score": 84, "last_activity_date": 1482351954, "creation_date": 1482351954, "answer_id": 41271341, "question_id": 41271299, "link": "https://stackoverflow.com/questions/41271299/how-can-i-get-the-first-two-digits-of-a-number/41271341#41271341", "title": "How can I get the first two digits of a number?", "body": "<p>You can convert your number to string and use list slicing like this:</p>\n\n<pre><code>int(str(number)[:2])\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>&gt;&gt;&gt; number = 1520\n&gt;&gt;&gt; int(str(number)[:2])\n15\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 1, "last_activity_date": 1482353957, "last_edit_date": 1482353957, "creation_date": 1482353064, "answer_id": 41271585, "question_id": 41271299, "link": "https://stackoverflow.com/questions/41271299/how-can-i-get-the-first-two-digits-of-a-number/41271585#41271585", "title": "How can I get the first two digits of a number?", "body": "<p>You can use a regular expression to test for a match and capture the first two digits:</p>\n\n<pre><code>import re\n\nfor i in range(1000):\n    match = re.match(r'(1[56])', str(i))\n\n    if match:\n        print(i, 'begins with', match.group(1))\n</code></pre>\n\n<p>The regular expression <code>(1[56])</code> matches a 1 followed by either a 5 or a 6 and stores the result in the first capturing group.</p>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>15 begins with 15\n16 begins with 16\n150 begins with 15\n151 begins with 15\n152 begins with 15\n153 begins with 15\n154 begins with 15\n155 begins with 15\n156 begins with 15\n157 begins with 15\n158 begins with 15\n159 begins with 15\n160 begins with 16\n161 begins with 16\n162 begins with 16\n163 begins with 16\n164 begins with 16\n165 begins with 16\n166 begins with 16\n167 begins with 16\n168 begins with 16\n169 begins with 16\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1564, "user_id": 3126402, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7c2502d74600c9f320495ae855f98134?s=128&d=identicon&r=PG&f=1", "display_name": "Astrid", "link": "https://stackoverflow.com/users/3126402/astrid"}, "edited": false, "score": 0, "creation_date": 1539333928, "post_id": 48716024, "comment_id": 92473091, "body": "Obviously not since you cannot take logs of negative values. But since we are just looking at digits, just wrap it in np.abs() and then it works."}, {"owner": {"reputation": 1564, "user_id": 3126402, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7c2502d74600c9f320495ae855f98134?s=128&d=identicon&r=PG&f=1", "display_name": "Astrid", "link": "https://stackoverflow.com/users/3126402/astrid"}, "edited": false, "score": 7, "creation_date": 1539334725, "post_id": 48716024, "comment_id": 92473540, "body": "More importantly, this does <i>not</i> work for e.g. 1000 and 1; <code>first_n_digits(1000,1)</code> returns <code>10</code>. This method always has problems with digits followed by lots of zeros."}, {"owner": {"reputation": 368, "user_id": 6692757, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1761b168db288a0aa80f79b1bd530412?s=128&d=identicon&r=PG&f=1", "display_name": "noiivice", "link": "https://stackoverflow.com/users/6692757/noiivice"}, "edited": false, "score": 2, "creation_date": 1543856685, "post_id": 48716024, "comment_id": 94059446, "body": "this turns out to be slower than string conversion/list slicing for large N"}], "tags": [], "owner": {"reputation": 249, "user_id": 5938237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f724393e8fd7d657ba8b54e47c6486?s=128&d=identicon&r=PG&f=1", "display_name": "dom", "link": "https://stackoverflow.com/users/5938237/dom"}, "is_accepted": false, "score": 22, "last_activity_date": 1518222819, "creation_date": 1518222819, "answer_id": 48716024, "question_id": 41271299, "link": "https://stackoverflow.com/questions/41271299/how-can-i-get-the-first-two-digits-of-a-number/48716024#48716024", "title": "How can I get the first two digits of a number?", "body": "<p>Both of the previous 2 answers have at least O(n) time complexity and the string conversion has O(n) space complexity too. Here's a solution for constant time and space:</p>\n\n<pre><code>num // 10 ** (int(math.log(num, 10)) - 1)\n</code></pre>\n\n<h3>Function:</h3>\n\n<pre><code>import math\n\ndef first_n_digits(num, n):\n    return num // 10 ** (int(math.log(num, 10)) - n + 1)\n</code></pre>\n\n<h3>Output:</h3>\n\n<pre><code>&gt;&gt;&gt; first_n_digits(123456, 1)\n1\n&gt;&gt;&gt; first_n_digits(123456, 2)\n12\n&gt;&gt;&gt; first_n_digits(123456, 3)\n123\n&gt;&gt;&gt; first_n_digits(123456, 4)\n1234\n&gt;&gt;&gt; first_n_digits(123456, 5)\n12345\n&gt;&gt;&gt; first_n_digits(123456, 6)\n123456\n</code></pre>\n\n<p>You will need to add some checks if it's possible that your input number has less digits than you want.</p>\n"}, {"tags": [], "owner": {"reputation": 4055, "user_id": 2088339, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e2232bd21fc3bff471941de8a7fc7191?s=128&d=identicon&r=PG", "display_name": "ChrisFreeman", "link": "https://stackoverflow.com/users/2088339/chrisfreeman"}, "is_accepted": false, "score": 9, "last_activity_date": 1558487138, "creation_date": 1558487138, "answer_id": 56248048, "question_id": 41271299, "link": "https://stackoverflow.com/questions/41271299/how-can-i-get-the-first-two-digits-of-a-number/56248048#56248048", "title": "How can I get the first two digits of a number?", "body": "<p>Comparing the O(n) time solution with the \"constant time\" O(1) solution provided in other answers goes to show that if the O(n) algorithm is fast enough, <em>n</em> may have to get very large before it is slower than a slow O(1). </p>\n\n<p>The <strong>strings</strong> version is approx. 60% <em>faster</em> than the \"<strong>maths</strong>\" version for numbers of <strong>20 or fewer digits</strong>. They become closer only when then number of digits approaches <strong>200 digits</strong></p>\n\n<pre><code># the \"maths\" version\nimport math\n\ndef first_n_digits1(num, n):\n    return num // 10 ** (int(math.log(num, 10)) - n + 1)\n\n%timeit first_n_digits1(34523452452, 2)\n1.21 \u00b5s \u00b1 75 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n\n%timeit first_n_digits1(34523452452, 8)\n1.24 \u00b5s \u00b1 47.5 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n\n# 22 digits\n%timeit first_n_digits1(3423234239472523452452, 2)\n1.33 \u00b5s \u00b1 59.4 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n\n%timeit first_n_digits1(3423234239472523452452, 15)\n1.23 \u00b5s \u00b1 61.2 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n\n# 196 digits\n%timeit first_n_digits1(3423234239472523409283475908723908723409872390871243908172340987123409871234012089172340987734507612340981344509873123401234670350981234098123140987314509812734091823509871345109871234098172340987125988123452452, 39)\n1.86 \u00b5s \u00b1 21.8 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n\n# The \"string\" verions\ndef first_n_digits2(num, n):\n    return int(str(num)[:n])\n\n%timeit first_n_digits2(34523452452, 2)\n744 ns \u00b1 28.1 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n\n%timeit first_n_digits2(34523452452, 8)\n768 ns \u00b1 42.7 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n\n# 22 digits\n%timeit first_n_digits2(3423234239472523452452, 2)\n767 ns \u00b1 33.6 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n\n%timeit first_n_digits2(3423234239472523452452, 15)\n830 ns \u00b1 55.1 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n\n# 196 digits\n%timeit first_n_digits2(3423234239472523409283475908723908723409872390871243908098712340987123401208917234098773450761234098134450987312340123467035098123409812314098734091823509871345109871234098172340987125988123452452, 39)\n1.87 \u00b5s \u00b1 140 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n</code></pre>\n"}], "owner": {"reputation": 503, "user_id": 7245163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf69384a6273e4354238812ae3485308?s=128&d=identicon&r=PG&f=1", "display_name": "John28", "link": "https://stackoverflow.com/users/7245163/john28"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109694, "favorite_count": 5, "accepted_answer_id": 41271341, "answer_count": 4, "score": 38, "last_activity_date": 1563974315, "creation_date": 1482351795, "last_edit_date": 1482419426, "question_id": 41271299, "link": "https://stackoverflow.com/questions/41271299/how-can-i-get-the-first-two-digits-of-a-number", "title": "How can I get the first two digits of a number?", "body": "<p>I want to check the first two digits of a number in Python. Something like this:</p>\n\n<pre><code>for i in range(1000):\n\n    if(first two digits of i == 15):\n        print(\"15\")\n\n    elif(first two digits of i == 16):\n        print(\"16\")\n</code></pre>\n\n<p>Is there a command to check the first two digits of a number? I'd like to avoid commands like <code>if(i&gt;149 and i&lt;160):...</code></p>\n"}, {"tags": ["python", "datetime", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 2682, "user_id": 2662901, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7c91dbe3c7fdf96369fe85bf22f9fc29?s=128&d=identicon&r=PG", "display_name": "feetwet", "link": "https://stackoverflow.com/users/2662901/feetwet"}, "edited": false, "score": 0, "creation_date": 1482360310, "post_id": 41271514, "comment_id": 69747808, "body": "How can we <code>merge</code> to produce a DataFrame with the same index as the higher-frequency DF (<code>intraday</code> in this case)?  The first example produces an iterative index and appears to discard the <code>intraday</code> index.  Note also: The second example works if and only if at least one exact same DateTime occurs in the lower frequency of both DataFrames.  E.g., if <code>intraday</code> doesn&#39;t contain <code>00:00</code> each day it will fail even though the <code>daily</code> index does."}, {"owner": {"reputation": 14106, "user_id": 1391671, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f24419d9b9d95de452c5df62728fae28?s=128&d=identicon&r=PG", "display_name": "Igor Raush", "link": "https://stackoverflow.com/users/1391671/igor-raush"}, "reply_to_user": {"reputation": 2682, "user_id": 2662901, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7c91dbe3c7fdf96369fe85bf22f9fc29?s=128&d=identicon&r=PG", "display_name": "feetwet", "link": "https://stackoverflow.com/users/2662901/feetwet"}, "edited": false, "score": 1, "creation_date": 1482363880, "post_id": 41271514, "comment_id": 69748929, "body": "In this case you can just use <code>daily.merge(intraday).set_index(intraday.index)</code>. Seems that you can&#39;t ask <code>merge</code> to keep the index of one of the data frames (see <a href=\"http://stackoverflow.com/questions/11976503/how-to-keep-index-when-using-pandas-merge\">this answer</a>)."}], "tags": [], "owner": {"reputation": 14106, "user_id": 1391671, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f24419d9b9d95de452c5df62728fae28?s=128&d=identicon&r=PG", "display_name": "Igor Raush", "link": "https://stackoverflow.com/users/1391671/igor-raush"}, "is_accepted": true, "score": 2, "last_activity_date": 1482353161, "last_edit_date": 1482353161, "creation_date": 1482352735, "answer_id": 41271514, "question_id": 41271258, "link": "https://stackoverflow.com/questions/41271258/merge-daily-values-into-intraday-dataframe/41271514#41271514", "title": "Merge daily values into intraday DataFrame", "body": "<p>Given the following setup,</p>\n\n<pre><code>intraday = pd.DataFrame(index=pd.date_range('2016-01-01', '2016-01-07', freq='T'))\ndaily = pd.DataFrame(index=pd.date_range('2016-01-01', '2016-01-07', freq='D'))\ndaily['some_val'] = np.arange(daily.shape[0])\n</code></pre>\n\n<p>you can create a column from the date component of both indices, and merge on that column</p>\n\n<pre><code>daily['date'] = daily.index.date\nintraday['date'] = intraday.index.date    \ndaily.merge(intraday)\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>            date  some_val\n0     2016-01-01         0\n1     2016-01-01         0\n2     2016-01-01         0\n3     2016-01-01         0\n4     2016-01-01         0\n...          ...       ...\n8636  2016-01-06         5\n8637  2016-01-06         5\n8638  2016-01-06         5\n8639  2016-01-06         5\n8640  2016-01-07         6\n</code></pre>\n\n<hr>\n\n<p>Alternatively, you can take advantage of automatic index alignment, and use <code>fillna</code>.</p>\n\n<pre><code>intraday['some_val'] = daily['some_val']\nintraday.fillna(method='ffill', downcast='infer')\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>                     some_val\n2016-01-01 00:00:00         0\n2016-01-01 00:01:00         0\n2016-01-01 00:02:00         0\n2016-01-01 00:03:00         0\n2016-01-01 00:04:00         0\n...                       ...\n2016-01-06 23:56:00         5\n2016-01-06 23:57:00         5\n2016-01-06 23:58:00         5\n2016-01-06 23:59:00         5\n2016-01-07 00:00:00         6\n</code></pre>\n\n<p>Note that this only works if the time component of your <code>daily</code> index is <code>00:00</code>.</p>\n"}], "owner": {"reputation": 2682, "user_id": 2662901, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7c91dbe3c7fdf96369fe85bf22f9fc29?s=128&d=identicon&r=PG", "display_name": "feetwet", "link": "https://stackoverflow.com/users/2662901/feetwet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 812, "favorite_count": 0, "accepted_answer_id": 41271514, "answer_count": 1, "score": 2, "last_activity_date": 1482353161, "creation_date": 1482351593, "question_id": 41271258, "link": "https://stackoverflow.com/questions/41271258/merge-daily-values-into-intraday-dataframe", "title": "Merge daily values into intraday DataFrame", "body": "<p>Suppose I have two <code>DataFrames</code>: <code>intraday</code> which has one row per minute, and <code>daily</code> which has one row per day.</p>\n\n<p>How can I add a column <code>intraday['some_val']</code> where <code>some_val</code> is taken from the <code>daily['some_val']</code> row where the <code>intraday.index</code> value (date component) equals the <code>daily.index</code> value (date component)?</p>\n"}, {"tags": ["python", "encryption"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1482351835, "post_id": 41271230, "comment_id": 69743690, "body": "What are you going to do with the key?"}, {"owner": {"reputation": 510, "user_id": 7327043, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d7bb2882521c04cba9d19f96733c7c5f?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Wahba", "link": "https://stackoverflow.com/users/7327043/joseph-wahba"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1482351936, "post_id": 41271230, "comment_id": 69743755, "body": "I would like to use the session key to decrypt HTTPS traffic."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1482352476, "post_id": 41271230, "comment_id": 69744088, "body": "The library already does that for you."}, {"owner": {"reputation": 510, "user_id": 7327043, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d7bb2882521c04cba9d19f96733c7c5f?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Wahba", "link": "https://stackoverflow.com/users/7327043/joseph-wahba"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1482352714, "post_id": 41271230, "comment_id": 69744216, "body": "True and I know that. Because I&#39;m developing a code base that is processing unencrypted traffic, I need to manually decrypt HTTPs packets to get integrated into the existing software. Otherwise, the whole code architecture has to be modified and a lot of coding would be needed and there are soon deadlines."}, {"owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1482366367, "post_id": 41271230, "comment_id": 69749552, "body": "I don&#39;t think so. Maybe someday, perhaps when openssl supports it."}], "owner": {"reputation": 510, "user_id": 7327043, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d7bb2882521c04cba9d19f96733c7c5f?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Wahba", "link": "https://stackoverflow.com/users/7327043/joseph-wahba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 368, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1483020506, "creation_date": 1482351460, "last_edit_date": 1483020506, "question_id": 41271230, "link": "https://stackoverflow.com/questions/41271230/exporting-ssl-session-key-from-urllib2-python-ssl-implementation", "title": "Exporting SSL session key (from urllib2 / Python SSL implementation)", "body": "<p>Is there a way to save the session key generated during an SSL session ?\nAs far as I know, this session key is calculated on the server and client side in SSL Handshake using Diffie-Hellman as shown in this image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/nDL2L.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nDL2L.jpg\" alt=\"as shown in this image\"></a>\nI am having access to the client side. The client is using urllib2</p>\n"}, {"tags": ["python", "jenkins"], "comments": [{"owner": {"reputation": 3600, "user_id": 5247911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IpGVs.png?s=128&g=1", "display_name": "Dinesh Pundkar", "link": "https://stackoverflow.com/users/5247911/dinesh-pundkar"}, "edited": false, "score": 1, "creation_date": 1482351753, "post_id": 41271222, "comment_id": 69743657, "body": "In your jenkins job, instead of executing above script execute this command - &quot;python -V&quot;. If this executes successfully, then execute this script as - python &lt;complete path of script&gt;&quot;"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1482351874, "post_id": 41271222, "comment_id": 69743711, "body": "your code is irrelevant. the python executable cannot be found because it&#39;s not in the PATH. Try to echo the path from jenkins."}, {"owner": {"reputation": 989, "user_id": 1550159, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/03638355a90411b1146cff1a3080ce6b?s=128&d=identicon&r=PG", "display_name": "user1550159", "link": "https://stackoverflow.com/users/1550159/user1550159"}, "edited": false, "score": 0, "creation_date": 1482351925, "post_id": 41271222, "comment_id": 69743748, "body": "Getting same error."}, {"owner": {"reputation": 3600, "user_id": 5247911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IpGVs.png?s=128&g=1", "display_name": "Dinesh Pundkar", "link": "https://stackoverflow.com/users/5247911/dinesh-pundkar"}, "edited": false, "score": 0, "creation_date": 1482352069, "post_id": 41271222, "comment_id": 69743829, "body": "On which machine jenkin job is executing ? Windows or Linux?"}, {"owner": {"reputation": 989, "user_id": 1550159, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/03638355a90411b1146cff1a3080ce6b?s=128&d=identicon&r=PG", "display_name": "user1550159", "link": "https://stackoverflow.com/users/1550159/user1550159"}, "edited": false, "score": 0, "creation_date": 1482352142, "post_id": 41271222, "comment_id": 69743881, "body": "I am running on windows machine and confirmed the path is added in env variables."}, {"owner": {"reputation": 3600, "user_id": 5247911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IpGVs.png?s=128&g=1", "display_name": "Dinesh Pundkar", "link": "https://stackoverflow.com/users/5247911/dinesh-pundkar"}, "edited": false, "score": 0, "creation_date": 1482352201, "post_id": 41271222, "comment_id": 69743916, "body": "Try like - C:\\Python35\\python.exe &lt;complete path of script&gt;"}, {"owner": {"reputation": 431, "user_id": 4911701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h9Uct.jpg?s=128&g=1", "display_name": "SimonM", "link": "https://stackoverflow.com/users/4911701/simonm"}, "edited": false, "score": 0, "creation_date": 1482487296, "post_id": 41271222, "comment_id": 69800713, "body": "It might be in your path on the pc but is Jenkins and Python picking up your path?  I&#39;ve seen simillar before - and it required the env to be configured in Jenkins."}, {"owner": {"reputation": 2461, "user_id": 947784, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/EgtsY.jpg?s=128&g=1", "display_name": "Tidhar Klein Orbach", "link": "https://stackoverflow.com/users/947784/tidhar-klein-orbach"}, "reply_to_user": {"reputation": 3600, "user_id": 5247911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IpGVs.png?s=128&g=1", "display_name": "Dinesh Pundkar", "link": "https://stackoverflow.com/users/5247911/dinesh-pundkar"}, "edited": false, "score": 0, "creation_date": 1490250550, "post_id": 41271222, "comment_id": 73030533, "body": "@DineshPundkar was it solved?"}], "answers": [{"comments": [{"owner": {"reputation": 989, "user_id": 1550159, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/03638355a90411b1146cff1a3080ce6b?s=128&d=identicon&r=PG", "display_name": "user1550159", "link": "https://stackoverflow.com/users/1550159/user1550159"}, "edited": false, "score": 0, "creation_date": 1482353028, "post_id": 41271473, "comment_id": 69744381, "body": "The issue is not with my script or env variables. I think the Jenkins plugin is having issues with Python 3.5 version. I tried running the same command as windows batch file from Jenkins and it worked. (python d:\\test.py)"}, {"owner": {"reputation": 989, "user_id": 1550159, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/03638355a90411b1146cff1a3080ce6b?s=128&d=identicon&r=PG", "display_name": "user1550159", "link": "https://stackoverflow.com/users/1550159/user1550159"}, "edited": false, "score": 0, "creation_date": 1482353134, "post_id": 41271473, "comment_id": 69744441, "body": "i want to write scripts under my Jenkins console and run them, any idea how to do that."}], "tags": [], "owner": {"reputation": 3600, "user_id": 5247911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IpGVs.png?s=128&g=1", "display_name": "Dinesh Pundkar", "link": "https://stackoverflow.com/users/5247911/dinesh-pundkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1482352504, "creation_date": 1482352504, "answer_id": 41271473, "question_id": 41271222, "link": "https://stackoverflow.com/questions/41271222/jenkins-cannot-run-program-python-createprocess-error-2-the-system-cannot-fin/41271473#41271473", "title": "Jenkins Cannot run program &quot;python&quot; CreateProcess error=2, The system cannot find the file specified", "body": "<p>Above error has nothing to do with you python code.</p>\n\n<p>Add below to your Jenkins Job:</p>\n\n<pre><code>set PATH=&lt;Python Installation Path&gt;;%PATH%\npython &lt;Complete path to your script&gt;\n</code></pre>\n"}], "owner": {"reputation": 989, "user_id": 1550159, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/03638355a90411b1146cff1a3080ce6b?s=128&d=identicon&r=PG", "display_name": "user1550159", "link": "https://stackoverflow.com/users/1550159/user1550159"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 7349, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1610524845, "creation_date": 1482351419, "last_edit_date": 1482352104, "question_id": 41271222, "link": "https://stackoverflow.com/questions/41271222/jenkins-cannot-run-program-python-createprocess-error-2-the-system-cannot-fin", "title": "Jenkins Cannot run program &quot;python&quot; CreateProcess error=2, The system cannot find the file specified", "body": "<p>When I run below python script using Jenkins, it is throwing below error.</p>\n\n<pre><code>Jenkins Cannot run program \"python\" CreateProcess error=2, The system cannot find the file specified\n</code></pre>\n\n<p>Below is my code and it works when I execute it directly.</p>\n\n<pre><code>import _mssql,os,datetime\nif (os.getenv('ColumnName').isspace() or not os.getenv('ColumnName')):\n    print(\"White space Entered\")\nelse:\n    print(var)\n</code></pre>\n\n<p>I am running Python 3.5.</p>\n\n<p>Thank you.</p>\n\n<p>Tried python -v and getting same error</p>\n\n<pre><code>The system cannot find the file specified\nFATAL: command execution failed\njava.io.IOException: Cannot run program \"python\" (in directory \"D:\\test\\\"): CreateProcess error=2, The system cannot find the file specified\n    at java.lang.ProcessBuilder.start(Unknown Source)\n    at hudson.Proc$LocalProc.&lt;init&gt;(Proc.java:245)\n    at hudson.Proc$LocalProc.&lt;init&gt;(Proc.java:214)\n    at hudson.Launcher$LocalLauncher.launch(Launcher.java:846)\n    at hudson.Launcher$ProcStarter.start(Launcher.java:384)\n    at hudson.tasks.CommandInterpreter.perform(CommandInterpreter.java:108)\n    at hudson.tasks.CommandInterpreter.perform(CommandInterpreter.java:65)\n    at hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:20)\n    at hudson.model.AbstractBuild$AbstractBuildExecution.perform(AbstractBuild.java:779)\n    at hudson.model.Build$BuildExecution.build(Build.java:205)\n    at hudson.model.Build$BuildExecution.doRun(Build.java:162)\n    at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:534)\n    at hudson.model.Run.execute(Run.java:1729)\n    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:43)\n    at hudson.model.ResourceController.execute(ResourceController.java:98)\n    at hudson.model.Executor.run(Executor.java:404)\nCaused by: java.io.IOException: CreateProcess error=2, The system cannot find the file specified\n    at java.lang.ProcessImpl.create(Native Method)\n    at java.lang.ProcessImpl.&lt;init&gt;(Unknown Source)\n    at java.lang.ProcessImpl.start(Unknown Source)\n    ... 16 more\nBuild step 'Execute Python script' marked build as failure\nFinished: FAILURE\n</code></pre>\n"}, {"tags": ["python", "datetime", "time"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1482351528, "post_id": 41271206, "comment_id": 69743554, "body": "Please clarify <i>&quot;doesn&#39;t work&quot;</i> with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. There&#39;s a reason it requires a full <code>datetime</code> - what should happen if subtracting 40 seconds takes you into the previous day?"}, {"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 1, "creation_date": 1482351766, "post_id": 41271206, "comment_id": 69743663, "body": "You can&#39;t subtract a timedelta from a time, only from a datetime.  Also, your question title is misleading, as you apparently don&#39;t want to manipulate dates at all, only times."}], "answers": [{"tags": [], "owner": {"reputation": 761, "user_id": 1285014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a0a4e08b3675f8a10a20d81483da287?s=128&d=identicon&r=PG", "display_name": "TinBane", "link": "https://stackoverflow.com/users/1285014/tinbane"}, "is_accepted": false, "score": 1, "last_activity_date": 1482351710, "creation_date": 1482351710, "answer_id": 41271283, "question_id": 41271206, "link": "https://stackoverflow.com/questions/41271206/how-to-manipulate-time-objects-in-python/41271283#41271283", "title": "How to manipulate time objects in Python?", "body": "<p>Timedelta works with datetime objects.\nYou could make your time into a datetime (or just start with one, who cares what the year, etc is), and then extract a time object back out.</p>\n\n<pre><code>&gt;&gt;&gt;t1=datetime.datetime(2016, 3, 1, 15,45,20)\n&gt;&gt;&gt;t2=t1-datetime.timedelta(seconds=40)\n&gt;&gt;&gt;print t2.time()\n15:44:40\n&gt;&gt;&gt;type(t2.time())\n&lt;type 'datetime.time'&gt;\n</code></pre>\n\n<p>As one of the comments pointed out, this can give you odd results if you don't think about it. Take 40 seconds off, and end up with a time that's later (but a day earlier on the date data you are ignoring). But you can work around that with minimal logic to catch things that are going to go over 24:00:00 or under 0:0:0.</p>\n"}], "owner": {"reputation": 107, "user_id": 6189569, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/641d7e4c24ccd9dd661c5b252185a90e?s=128&d=identicon&r=PG&f=1", "display_name": "Jkev", "link": "https://stackoverflow.com/users/6189569/jkev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482351828, "creation_date": 1482351329, "last_edit_date": 1482351828, "question_id": 41271206, "link": "https://stackoverflow.com/questions/41271206/how-to-manipulate-time-objects-in-python", "title": "How to manipulate time objects in Python?", "body": "<p>I need to work with <code>datetime</code> but I can't find how to subtract or add minutes or seconds from a <code>datetime.time</code> object</p>\n\n<p>I've tried to use datetime.timedelta but it doesn't work.</p>\n\n<p>Here is what I've tried </p>\n\n<pre><code>t1=datetime.time(15,45,20)\nt2=t1-datetime.timedelta(seconds=40)\n</code></pre>\n\n<p>I would like to obtain <code>t2=datetime.time(15,44,40)</code></p>\n"}, {"tags": ["python", "numpy", "nested-lists", "flatten"], "comments": [{"owner": {"reputation": 4995, "user_id": 2907819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VZnjr.jpg?s=128&g=1", "display_name": "kmaork", "link": "https://stackoverflow.com/users/2907819/kmaork"}, "edited": false, "score": 0, "creation_date": 1482351270, "post_id": 41271146, "comment_id": 69743417, "body": "what are nans? What kind of object?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1482351340, "post_id": 41271146, "comment_id": 69743451, "body": "Is the nesting always consistent?"}, {"owner": {"reputation": 339, "user_id": 2896857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tjpGI.jpg?s=128&g=1", "display_name": "quietContest", "link": "https://stackoverflow.com/users/2896857/quietcontest"}, "edited": false, "score": 0, "creation_date": 1482351870, "post_id": 41271146, "comment_id": 69743707, "body": "assuming you already have a multidimensional numpy array, doesn&#39;t np.squeeze() do this?"}, {"owner": {"reputation": 1457, "user_id": 7327483, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oPIrY.jpg?s=128&g=1", "display_name": "Matthew Borish", "link": "https://stackoverflow.com/users/7327483/matthew-borish"}, "edited": false, "score": 0, "creation_date": 1482352003, "post_id": 41271146, "comment_id": 69743788, "body": "In the nan example, I used the list extend method to equalize the list lengths. This allowed me to convert to a numpy array and reshape it to remove the inner most level of nesting."}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 1, "creation_date": 1482352866, "post_id": 41271146, "comment_id": 69744295, "body": "What are typical lengths of these lists in your actual data?"}], "answers": [{"tags": [], "owner": {"reputation": 5300, "user_id": 4727702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EfsoQ.jpg?s=128&g=1", "display_name": "Yevhen Kuzmovych", "link": "https://stackoverflow.com/users/4727702/yevhen-kuzmovych"}, "is_accepted": false, "score": 0, "last_activity_date": 1482351456, "creation_date": 1482351456, "answer_id": 41271229, "question_id": 41271146, "link": "https://stackoverflow.com/questions/41271146/how-to-remove-the-innermost-level-of-nesting-in-a-list-of-lists-of-varying-lengt/41271229#41271229", "title": "How to remove the innermost level of nesting in a list of lists of varying lengths", "body": "<p>Try this:</p>\n\n<pre><code>l = [ [ [1],[2],[3],[4],[5] ],\n      [ [6],[7],[8], [None],[None]] ,\n      [ [11],[12],[None],[None],[None]] ]\n\nl = [ [x[0] for x in s if x[0] is not None] for s in l]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4995, "user_id": 2907819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VZnjr.jpg?s=128&g=1", "display_name": "kmaork", "link": "https://stackoverflow.com/users/2907819/kmaork"}, "is_accepted": false, "score": 1, "last_activity_date": 1482351878, "last_edit_date": 1482351878, "creation_date": 1482351466, "answer_id": 41271234, "question_id": 41271146, "link": "https://stackoverflow.com/questions/41271146/how-to-remove-the-innermost-level-of-nesting-in-a-list-of-lists-of-varying-lengt/41271234#41271234", "title": "How to remove the innermost level of nesting in a list of lists of varying lengths", "body": "<pre><code>&gt;&gt;&gt; from operator import add\n&gt;&gt;&gt; lists = [ [ [1],[2],[3],[4], [5] ],   [ [6],[7],[8] ] , [ [11],[12] ] ]\n&gt;&gt;&gt; [reduce(add, lst) for lst in lists]\n[[1, 2, 3, 4, 5], [6, 7, 8], [11, 12]]\n</code></pre>\n\n<p>This is not a very efficient, as it rebuilds a list each time add is called.\nAlternatively you can use <code>sum</code> or a simple list comprehension, as seen in the other answers.</p>\n"}, {"tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 5, "last_activity_date": 1482352457, "last_edit_date": 1482352457, "creation_date": 1482351501, "answer_id": 41271240, "question_id": 41271146, "link": "https://stackoverflow.com/questions/41271146/how-to-remove-the-innermost-level-of-nesting-in-a-list-of-lists-of-varying-lengt/41271240#41271240", "title": "How to remove the innermost level of nesting in a list of lists of varying lengths", "body": "<p>If the nesting is always consistent, then this is trivial:</p>\n\n<pre><code>In [2]: import itertools\n\nIn [3]: nested = [ [ [1],[2],[3],[4], [5] ], [ [6],[7],[8] ] , [ [11],[12] ] ]\n\nIn [4]: unested = [list(itertools.chain(*sub)) for sub in nested]\n\nIn [5]: unested\nOut[5]: [[1, 2, 3, 4, 5], [6, 7, 8], [11, 12]]\n</code></pre>\n\n<p>Note, the solutions that leverage <code>add</code> with lists are going to give you O(n^2) performance where n is the number of sub-sublists that are being merged within each sublist. </p>\n"}, {"tags": [], "owner": {"reputation": 339, "user_id": 2896857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tjpGI.jpg?s=128&g=1", "display_name": "quietContest", "link": "https://stackoverflow.com/users/2896857/quietcontest"}, "is_accepted": false, "score": 0, "last_activity_date": 1482352561, "last_edit_date": 1482352561, "creation_date": 1482352132, "answer_id": 41271384, "question_id": 41271146, "link": "https://stackoverflow.com/questions/41271146/how-to-remove-the-innermost-level-of-nesting-in-a-list-of-lists-of-varying-lengt/41271384#41271384", "title": "How to remove the innermost level of nesting in a list of lists of varying lengths", "body": "<p>How about <a href=\"https://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.squeeze.html\" rel=\"nofollow noreferrer\"><code>np.squeeze</code></a>?</p>\n\n<blockquote>\n  <p>Remove single-dimensional entries from the shape of an array.</p>\n</blockquote>\n\n<pre><code>arr = [ [ [1],[2],[3],[4], [5] ], [ [6],[7],[8] ] , [ [11],[12] ] ]\n&gt;&gt;&gt; arr\n[[[1], [2], [3], [4], [5]], [[6], [7], [8]], [[11], [12]]]\n&gt;&gt;&gt; [np.squeeze(i) for i in arr]\n[array([1, 2, 3, 4, 5]), array([6, 7, 8]), array([11, 12])]\n</code></pre>\n\n<p>Not necessarily the innermost (ie independent of how many dimensions) dimension though. But your question specifies \"list of lists\"</p>\n"}, {"tags": [], "owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "is_accepted": false, "score": 0, "last_activity_date": 1482352947, "last_edit_date": 1482352947, "creation_date": 1482352390, "answer_id": 41271447, "question_id": 41271146, "link": "https://stackoverflow.com/questions/41271146/how-to-remove-the-innermost-level-of-nesting-in-a-list-of-lists-of-varying-lengt/41271447#41271447", "title": "How to remove the innermost level of nesting in a list of lists of varying lengths", "body": "<p>As in your case, innermost object has just one element. You may access the value based on <em>index</em> instead of using some additional function. For example:</p>\n\n<pre><code>&gt;&gt;&gt; [[y[0] for y in x] for x in my_list]\n[[1, 2, 3, 4, 5], [6, 7, 8], [11, 12]]\n</code></pre>\n\n<p>If there is possibility that your inner-most list may have more than one element, you may do:</p>\n\n<pre><code>&gt;&gt;&gt; [[z for y in x for z in y] for x in my_list]\n[[1, 2, 3, 4, 5], [6, 7, 8], [11, 12]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 0, "last_activity_date": 1482360064, "last_edit_date": 1482360064, "creation_date": 1482353789, "answer_id": 41271757, "question_id": 41271146, "link": "https://stackoverflow.com/questions/41271146/how-to-remove-the-innermost-level-of-nesting-in-a-list-of-lists-of-varying-lengt/41271757#41271757", "title": "How to remove the innermost level of nesting in a list of lists of varying lengths", "body": "<p>If you know the level of nesting then one of the list comprehensions is easy.</p>\n\n<pre><code>In [129]: ll=[ [ [1],[2],[3],[4], [5] ], [ [6],[7],[8] ] , [ [11],[12] ] ]\nIn [130]: [[j[0] for j in i] for i in ll]        # simplest\nOut[130]: [[1, 2, 3, 4, 5], [6, 7, 8], [11, 12]]\n</code></pre>\n\n<p>If the criteria is just to remove an inner layer of nesting, regardless of how deep it occurs, the code will require more thought.  I'd probably try to write it as a recursive function.</p>\n\n<p>The <code>np.nan</code> (or <code>None</code>) padding doesn't help with the list version</p>\n\n<pre><code>In [131]: lln=[ [ [1],[2],[3],[4],[5] ], [ [6],[7],[8],[nan],[nan]] , [ [11],[12],[nan],[nan],[nan] ] ]\nIn [132]: [[j[0] for j in i if j[0] is not np.nan] for i in lln]\nOut[132]: [[1, 2, 3, 4, 5], [6, 7, 8], [11, 12]]\n</code></pre>\n\n<p>The padding does let us make a 3d array, which can then easily be squeezed:</p>\n\n<pre><code>In [135]: arr = np.array(lln)\nIn [136]: arr.shape\nOut[136]: (3, 5, 1)\nIn [137]: arr = arr[:,:,0]\nIn [138]: arr\nOut[138]: \narray([[  1.,   2.,   3.,   4.,   5.],\n       [  6.,   7.,   8.,  nan,  nan],\n       [ 11.,  12.,  nan,  nan,  nan]])\n</code></pre>\n\n<p>but then there's a question of how to remove those <code>nan</code> and create ragged sublists.</p>\n\n<p>Masked arrays might let you work with a 2d array without being bothered by these <code>nan</code>:</p>\n\n<pre><code>In [141]: M = np.ma.masked_invalid(arr)\nIn [142]: M\nOut[142]: \nmasked_array(data =\n [[1.0 2.0 3.0 4.0 5.0]\n [6.0 7.0 8.0 -- --]\n [11.0 12.0 -- -- --]],\n             mask =\n [[False False False False False]\n [False False False  True  True]\n [False False  True  True  True]],\n       fill_value = 1e+20)\nIn [144]: M.sum(axis=1)      # e.g. sublist sums\nOut[144]: \nmasked_array(data = [15.0 21.0 23.0],\n             mask = [False False False],\n       fill_value = 1e+20)\n</code></pre>\n\n<p>Removing the <code>nan</code> from <code>arr</code> is probably easiest with a list comprehension.  The values are float because <code>np.nan</code> is float.</p>\n\n<pre><code>In [153]: [[i for i in row if ~np.isnan(i)] for row in arr]\nOut[153]: [[1.0, 2.0, 3.0, 4.0, 5.0], [6.0, 7.0, 8.0], [11.0, 12.0]]\n</code></pre>\n\n<p>So the padding doesn't help.</p>\n\n<p>If the padding was with <code>None</code>, then the array would be object dtype, which is closer to a nested list in character.</p>\n\n<pre><code>In [163]: lln\nOut[163]: \n[[[1], [2], [3], [4], [5]],\n [[6], [7], [8], [None], [None]],\n [[11], [12], [None], [None], [None]]]\nIn [164]: arr=np.array(lln)[:,:,0]\nIn [165]: arr\nOut[165]: \narray([[1, 2, 3, 4, 5],\n       [6, 7, 8, None, None],\n       [11, 12, None, None, None]], dtype=object)\nIn [166]: [[i for i in row if i is not None] for row in arr]\nOut[166]: [[1, 2, 3, 4, 5], [6, 7, 8], [11, 12]]\n</code></pre>\n\n<p>Another array approach is to count the number of valid elements at the 2nd level; flatten the whole thing, and then <code>split</code>.</p>\n\n<p>A recursive function:</p>\n\n<pre><code>def foo(alist):\n    if len(alist)==1:\n        return alist[0]\n    else:\n        return [foo(i) for i in alist if foo(i) is not None]\n\nIn [200]: ll=[ [ [1],[2],[3],[4], [5] ], [ [6],[7],[8] ] , [11], [[[12],[13]]]] \nIn [201]: foo(ll)\nOut[201]: [[1, 2, 3, 4, 5], [6, 7, 8], 11, [[12], [13]]]\nIn [202]: lln=[ [ [1],[2],[3],[4],[5] ], [ [6],[7],[8],[None],[None]] , [ [11],[12],[None],[None],[None] ] ]\nIn [203]: foo(lln)\nOut[203]: [[1, 2, 3, 4, 5], [6, 7, 8], [11, 12]]\n</code></pre>\n\n<p>It recurses down to the level where lists have length 1.  It is still fragile, and misbehaves if the nesting levels vary.  Conceptually it's quite similar to <code>@piRSquared's</code> answer.</p>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 1, "last_activity_date": 1482355135, "creation_date": 1482355135, "answer_id": 41272066, "question_id": 41271146, "link": "https://stackoverflow.com/questions/41271146/how-to-remove-the-innermost-level-of-nesting-in-a-list-of-lists-of-varying-lengt/41272066#41272066", "title": "How to remove the innermost level of nesting in a list of lists of varying lengths", "body": "<p>Because this question looks fun!<br>\nI used a recursive function that unpacks a list if it only has one value.</p>\n\n<pre><code>def make_singular(l):\n    try:\n        if len(l) == 1:\n            return l[0]\n        else:\n            return [make_singular(l_) for l_ in l]\n    except:\n        return l\n\nnest = [ [ [1],[2],[3],[4], [5] ], [ [6],[7],[8] ] , [ [11],[12] ] ]\nmake_singular(nest)\n\n[[1, 2, 3, 4, 5], [6, 7, 8], [11, 12]]\n</code></pre>\n"}], "owner": {"reputation": 1457, "user_id": 7327483, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oPIrY.jpg?s=128&g=1", "display_name": "Matthew Borish", "link": "https://stackoverflow.com/users/7327483/matthew-borish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1681, "favorite_count": 1, "accepted_answer_id": 41271240, "answer_count": 7, "score": 4, "last_activity_date": 1582211007, "creation_date": 1482351098, "last_edit_date": 1582211007, "question_id": 41271146, "link": "https://stackoverflow.com/questions/41271146/how-to-remove-the-innermost-level-of-nesting-in-a-list-of-lists-of-varying-lengt", "title": "How to remove the innermost level of nesting in a list of lists of varying lengths", "body": "<p>I'm trying to remove the innermost nesting in a list of lists of single element length lists. Do you know a relatively easy way (converting to NumPy arrays is fine) to get from:</p>\n\n<pre><code>[[[1], [2], [3], [4], [5]], [[6], [7], [8]], [[11], [12]]]\n</code></pre>\n\n<p>to this?:</p>\n\n<pre><code>[[1, 2, 3, 4, 5], [6, 7, 8], [11, 12]]\n</code></pre>\n\n<p>Also, the real lists I'm trying to do this for contain datetime objects rather than ints in the example. And the initial collection of lists will be of varying lengths.</p>\n\n<p>Alternatively, it would be fine if there were nans in the original list so that the length of each list is identical as long as the nans aren't present in the output list. i.e.</p>\n\n<pre><code>[[[1], [2], [3], [4], [5]], \n [[6], [7], [8], [nan], [nan]], \n [[11], [12], [nan], [nan], [nan]]]\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>[[1, 2, 3, 4, 5], [6, 7, 8], [11, 12]]\n</code></pre>\n"}, {"tags": ["python", "image", "numpy"], "comments": [{"owner": {"reputation": 41121, "user_id": 2956066, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Bqbcr.png?s=128&g=1", "display_name": "kmario23", "link": "https://stackoverflow.com/users/2956066/kmario23"}, "edited": false, "score": 0, "creation_date": 1482351742, "post_id": 41271105, "comment_id": 69743652, "body": "why do you want to put this in a python list? It&#39;s far efficient to store it in 1D numpy array. Also could you please give more info about how <code>data</code> look like?"}, {"owner": {"reputation": 41121, "user_id": 2956066, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Bqbcr.png?s=128&g=1", "display_name": "kmario23", "link": "https://stackoverflow.com/users/2956066/kmario23"}, "edited": false, "score": 0, "creation_date": 1482351890, "post_id": 41271105, "comment_id": 69743725, "body": "And please never use <code>range(len(..))</code>. A better option is <code>enumerate(..)</code>"}, {"owner": {"reputation": 73, "user_id": 6621340, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8ca876d5ca3cfbb4f38c7d73bd168b68?s=128&d=identicon&r=PG&f=1", "display_name": "Tutanchamunon", "link": "https://stackoverflow.com/users/6621340/tutanchamunon"}, "reply_to_user": {"reputation": 41121, "user_id": 2956066, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Bqbcr.png?s=128&g=1", "display_name": "kmario23", "link": "https://stackoverflow.com/users/2956066/kmario23"}, "edited": false, "score": 0, "creation_date": 1482354330, "post_id": 41271105, "comment_id": 69745057, "body": "@kmario23 I will use enumerate, thanks :) It is? Okay, I will store it in a 1D Numpy array then. Data consists of 3 images (rgb values) and a value between 0-50.. So something like [[[255,255,255],[255,255,255], ..],[[255,255,255],[255,255,255], ..],[[255,255,255],[255,255,255], ..],10.5]"}, {"owner": {"reputation": 41121, "user_id": 2956066, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Bqbcr.png?s=128&g=1", "display_name": "kmario23", "link": "https://stackoverflow.com/users/2956066/kmario23"}, "edited": false, "score": 0, "creation_date": 1482355879, "post_id": 41271105, "comment_id": 69745843, "body": "I&#39;m not sure I understand it correctly. Please update your question providing more info about <code>data</code> and the <code>csv</code> file. It&#39;s very hard to understand what you mean. For an 8gb machine, this is nothing.."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 6621340, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8ca876d5ca3cfbb4f38c7d73bd168b68?s=128&d=identicon&r=PG&f=1", "display_name": "Tutanchamunon", "link": "https://stackoverflow.com/users/6621340/tutanchamunon"}, "edited": false, "score": 0, "creation_date": 1482354407, "post_id": 41271584, "comment_id": 69745106, "body": "Hm, difficult. I need to split the data after that (factor 1:4) and then save it into a <a href=\"https://docs.python.org/2/library/pickle.html\" rel=\"nofollow noreferrer\">pickled file</a>. Any idea on how I could solve this?"}], "tags": [], "owner": {"reputation": 159, "user_id": 1614734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0734f21345c8dff72bd25969bcb9e362?s=128&d=identicon&r=PG", "display_name": "rgacote", "link": "https://stackoverflow.com/users/1614734/rgacote"}, "is_accepted": false, "score": 0, "last_activity_date": 1482353054, "creation_date": 1482353054, "answer_id": 41271584, "question_id": 41271105, "link": "https://stackoverflow.com/questions/41271105/python-preprocessing-a-lot-of-image-data-loop-freezes/41271584#41271584", "title": "Python - Preprocessing a lot of image data - Loop freezes", "body": "<p>Depending on how large those image files are, you could be running out of RAM and being forced to swap. That would cause your system to be sluggish.\nInstead of gathering all the processed files into list, can you write them out one at a time? </p>\n"}], "owner": {"reputation": 73, "user_id": 6621340, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8ca876d5ca3cfbb4f38c7d73bd168b68?s=128&d=identicon&r=PG&f=1", "display_name": "Tutanchamunon", "link": "https://stackoverflow.com/users/6621340/tutanchamunon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1482354493, "creation_date": 1482350968, "last_edit_date": 1482354493, "question_id": 41271105, "link": "https://stackoverflow.com/questions/41271105/python-preprocessing-a-lot-of-image-data-loop-freezes", "title": "Python - Preprocessing a lot of image data - Loop freezes", "body": "<p>I have the following code in my Python Script:</p>\n\n<pre><code>def process_data(data):\n    features = []\n\n    for i in range(int(len(data))): # Should iterate 33'000 times (length of data)\n        for j in range(3):\n            img = plt.imread(data[i][j].strip()) # Data is from a csv file\n            img = normalize(img)  # Simple calculation\n\n            lis = img.flatten().tolist()\n            features += lis\n\nreturn features\n</code></pre>\n\n<p>This should run for about 33'000*3 times to preprocess the whole data. However, after around 10'000-12'000 iterations, the script slows down radically, freezes and sometimes my machine (i7 - 3.6GHz, 8GB RAM) freezes as well.</p>\n\n<p>What can I do? It's difficult to split up the data. I was told to use the Keras' <code>fit_generator</code> before but how would I do that?</p>\n"}, {"tags": ["python", "html", "flask"], "comments": [{"owner": {"reputation": 3438, "user_id": 2205785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FY5zS.png?s=128&g=1", "display_name": "pbuck", "link": "https://stackoverflow.com/users/2205785/pbuck"}, "edited": false, "score": 0, "creation_date": 1482351043, "post_id": 41271074, "comment_id": 69743292, "body": "Take another look at your code: You&#39;re returning only (t, p), which is the final value of your loop, not all of the element from the for loop."}, {"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1482351058, "post_id": 41271074, "comment_id": 69743299, "body": "Going back to my previous comment <a href=\"http://stackoverflow.com/a/41268356/2063361\">HERE</a>. <i>There is difference between what you print and what you return via Flask</i>. All you need to do is <code>jsonify(dict(zip(teamnames, points)))</code>. And, this answer I had already mentioned in your previous post"}], "answers": [{"tags": [], "owner": {"reputation": 2503, "user_id": 6411000, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nR4OG.png?s=128&g=1", "display_name": "Fejs", "link": "https://stackoverflow.com/users/6411000/fejs"}, "is_accepted": false, "score": 0, "last_activity_date": 1482351167, "creation_date": 1482351167, "answer_id": 41271165, "question_id": 41271074, "link": "https://stackoverflow.com/questions/41271074/flask-and-python-return-a-zipped-list/41271165#41271165", "title": "Flask and Python return a zipped list", "body": "<p>You are returning exactly what You see:</p>\n\n<pre><code>jsonify('{}: {}'.format(t,p))\n</code></pre>\n\n<p>This will create dictionary with only one item in it (with key <code>t</code> and value <code>p</code>, whose values are left over from previous <code>for</code> loop).</p>\n\n<p>I suggest creating dictionary first by looping through zipped lists, and then sending that dict to <code>jsonify</code>. Something like:</p>\n\n<pre><code>return_dict = {}\nfor t, p in zip(teamnames, points):\n    return_dict[t] = p\nreturn jsonify(return_dict)   \n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 7318078, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4f3335d52e54b480ef9b5ef0b3cbd282?s=128&d=identicon&r=PG&f=1", "display_name": "f_harrison", "link": "https://stackoverflow.com/users/7318078/f-harrison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 267, "favorite_count": 0, "closed_date": 1482363130, "answer_count": 1, "score": -2, "last_activity_date": 1482351167, "creation_date": 1482350832, "question_id": 41271074, "link": "https://stackoverflow.com/questions/41271074/flask-and-python-return-a-zipped-list", "closed_reason": "Duplicate", "title": "Flask and Python return a zipped list", "body": "<p>This is insanely frustrating and I've been all over the interwebs trying to find this.</p>\n\n<p>My issue is that I am not able to print my two lists - teamnames and points - next to each other.</p>\n\n<p>When I print (see code) it prints correctly to the terminal output.</p>\n\n<p>When I return the exact same thing, I am just getting the last place team!  </p>\n\n<pre><code>@app.route('/League Standing', methods=['GET','POST'])\n    def show_league():\n        text = request.form['league']\n        connection = httplib.HTTPConnection('api.football-data.org')\n        headers = {'X-Auth-Token': 'key', 'X-Response-Control': 'minified'}\n        connection.request('GET', '/v1/competitions/'+text+'/leagueTable', None, headers)\n        response = json.loads(connection.getresponse().read().decode())\n        teamnames = [r['team'] for r in response['standing']]\n        points = [r['points'] for r in response['standing']]\n        for t, p in zip(teamnames, points):\n           print('{}: {}'.format(t,p))\n        return jsonify('{}: {}'.format(t,p))\n\n\n\n\n    if __name__ == '__main__':\n        app.run(debug=True)\n</code></pre>\n\n<p>Here is what happens when I print to the terminal:</p>\n\n<pre><code>Chelsea: 43\nLiverpool: 37\nManCity: 36\nArsenal: 34\nSpurs: 33\nManU: 30\nSouthampton: 24\nWest Bromwich: 23\nEverton: 23\nBournemouth: 21\nStoke: 21\nWatford: 21\nWest Ham: 19\nMiddlesbrough: 18\nFoxes: 17\nBurnley: 17\nCrystal: 15\nSunderland: 14\nSwans: 12\nHull: 12\n</code></pre>\n\n<p>and when I print to the flask website:</p>\n\n<pre><code>Hull: 12\n</code></pre>\n\n<p>I want to return what is being printed to the terminal, the website!!!</p>\n\n<p>Please let me know any ideas!</p>\n\n<p>Please help.</p>\n"}, {"tags": ["python", "pandas", "plot"], "comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 1, "creation_date": 1482350886, "post_id": 41271046, "comment_id": 69743209, "body": "what do you consider perfect results?"}], "answers": [{"comments": [{"owner": {"reputation": 2762, "user_id": 3447653, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d764d2cae36e073b329a7d73cb222f6f?s=128&d=identicon&r=PG&f=1", "display_name": "user3447653", "link": "https://stackoverflow.com/users/3447653/user3447653"}, "edited": false, "score": 0, "creation_date": 1482351806, "post_id": 41271218, "comment_id": 69743681, "body": "Thanks, this is what I was actually looking for. Can I assign labels in plt.scatter?"}, {"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "reply_to_user": {"reputation": 2762, "user_id": 3447653, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d764d2cae36e073b329a7d73cb222f6f?s=128&d=identicon&r=PG&f=1", "display_name": "user3447653", "link": "https://stackoverflow.com/users/3447653/user3447653"}, "edited": false, "score": 0, "creation_date": 1482352305, "post_id": 41271218, "comment_id": 69743988, "body": "You would have to loop to get the labels correct. It would be much easier to use seaborn."}, {"owner": {"reputation": 2762, "user_id": 3447653, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d764d2cae36e073b329a7d73cb222f6f?s=128&d=identicon&r=PG&f=1", "display_name": "user3447653", "link": "https://stackoverflow.com/users/3447653/user3447653"}, "edited": false, "score": 0, "creation_date": 1482353426, "post_id": 41271218, "comment_id": 69744598, "body": "I tried with seaborn, i get the error &quot; regplot() got an unexpected keyword argument &#39;hue&#39;&quot;"}, {"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "reply_to_user": {"reputation": 2762, "user_id": 3447653, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d764d2cae36e073b329a7d73cb222f6f?s=128&d=identicon&r=PG&f=1", "display_name": "user3447653", "link": "https://stackoverflow.com/users/3447653/user3447653"}, "edited": false, "score": 0, "creation_date": 1482353559, "post_id": 41271218, "comment_id": 69744665, "body": "@user3447653 My fault. Regplot has no hue parameter. Try the same with &#39;lmplot&#39;"}], "tags": [], "owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "is_accepted": true, "score": 3, "last_activity_date": 1482353533, "last_edit_date": 1482353533, "creation_date": 1482351400, "answer_id": 41271218, "question_id": 41271046, "link": "https://stackoverflow.com/questions/41271046/scatter-plot-of-values-in-pandas-dataframe/41271218#41271218", "title": "Scatter plot of values in pandas dataframe", "body": "<p>You need to use the <code>scatter</code> function in matplotlib and there is no need to loop or do any grouping.</p>\n\n<pre><code>x = np.arange(len(dfprintscatter))\ny = dfprintscatter.Distance\nc = dfprintscatter.ClusterAssigned\nplt.scatter(x, y, c=c, marker='o') \n</code></pre>\n\n<p>Using seaborn</p>\n\n<pre><code>import seaborn as sns\nsns.lmplot(x=np.arange(len(dfprintscatter)), y='Distance', hue='ClusterAssigned', fit_reg=False)\n</code></pre>\n"}], "owner": {"reputation": 2762, "user_id": 3447653, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d764d2cae36e073b329a7d73cb222f6f?s=128&d=identicon&r=PG&f=1", "display_name": "user3447653", "link": "https://stackoverflow.com/users/3447653/user3447653"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 835, "favorite_count": 0, "accepted_answer_id": 41271218, "answer_count": 1, "score": -1, "last_activity_date": 1482353533, "creation_date": 1482350684, "question_id": 41271046, "link": "https://stackoverflow.com/questions/41271046/scatter-plot-of-values-in-pandas-dataframe", "title": "Scatter plot of values in pandas dataframe", "body": "<p>I have a pandas dataframe in the following format. I am trying to plot this data based on ClusterAssigned, with probably different colors for 0 and 1. </p>\n\n<pre><code>    Distance    ClusterAssigned\n    23      1\n    35      1\n    20      1\n    264     0\n    830     0\n</code></pre>\n\n<p>I tried with this code but does not seem to yield perfect results. </p>\n\n<pre><code>groups = dfprintscatter.groupby('ClusterAssigned')\n\nimport matplotlib.pyplot as plt\n\nfig, ax = plt.subplots()\nax.margins(0.05) \nfor name, group in groups:\n        ax.plot(group.Distance, group.ClusterAssigned, marker='o', linestyle='', ms=5, label=name)\nax.legend()\n\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "email-headers"], "owner": {"reputation": 63, "user_id": 3734292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33414e072c54f42fe0b4fdd4d55d256f?s=128&d=identicon&r=PG&f=1", "display_name": "ichaelm", "link": "https://stackoverflow.com/users/3734292/ichaelm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 312, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1482350258, "creation_date": 1482350258, "last_edit_date": 1495540799, "question_id": 41270954, "link": "https://stackoverflow.com/questions/41270954/handling-international-characters-in-email-subject-lines-with-python-3", "title": "Handling international characters in email subject lines with Python 3", "body": "<p>I\u2019m writing a script to read the subject lines on unread emails. My first attempt:</p>\n\n<pre><code>from imaplib import IMAP4_SSL\nfrom email.parser import HeaderParser\n\n# username = \n# password = \n# server = \n# port = \n\nM = IMAP4_SSL(server, port)\nM.login(username, password)\nM.select()\ntyp, data = M.search(None, '(UNSEEN)')\n\nfor num in data[0].split():\n    rv, data = M.fetch(num, '(BODY.PEEK[HEADER.FIELDS (SUBJECT FROM)])')\n    header_data = data[0][1].decode('utf-8')\n    parser = HeaderParser()\n    msg = parser.parsestr(header_data)\n    subject = msg['Subject']\n    print(subject)\n    print()\n</code></pre>\n\n<p>This works for most emails, but it fails when there's a non-ascii character in the subject line. The output looks like:</p>\n\n<blockquote>\n  <p>=?UTF-8?Q?This_email_has_internati=C3=B2nal_characters?=</p>\n</blockquote>\n\n<p>So it looks like HeaderParser doesn't handle encodings (specified in RFC 1342). Looking at the documentation, it seemed like I needed to use <code>decode_header</code> and <code>make_header</code>. My second attempt:</p>\n\n<pre><code># same setup code as before\n\nfrom email.header import decode_header, make_header\n\nfor num in data[0].split():\n    rv, data = M.fetch(num, '(BODY.PEEK[HEADER.FIELDS (SUBJECT FROM)])')\n    headers_encoded = data[0][1].decode('latin-1')\n    #print(headers_encoded)\n    header_code_pairs = decode_header(headers_encoded)\n    #print(header_code_pairs)\n    headers = make_header(header_code_pairs)\n    parser = HeaderParser()\n    msg = parser.parsestr(str(headers))\n    subject = msg['Subject']\n    print(subject)\n    print()\n</code></pre>\n\n<p>And the output looks like this:</p>\n\n<blockquote>\n  <p>This email has ASCII only</p>\n  \n  <p>This email has internati\u00f2nal characters From: Tester Testee\n  &lt;ichaelmtest@gmail.com&gt;</p>\n</blockquote>\n\n<p>For some reason it's concatenating the From field onto the second one. But it does decode the characters correctly! Both emails have the headers in the same order. When I uncomment the <code>headers_encoded</code> and <code>header_code_pairs</code> prints instead, I get this:</p>\n\n<blockquote>\n  <p>Subject: This email has ASCII only From: Tester Testee </p>\n  \n  <p>[('Subject: This email has ASCII only\\r\\nFrom: Tester Testee\n  &lt;ichaelmtest@gmail.com&gt;\\r\\n\\r\\n', None)]</p>\n  \n  <p>Subject: =?UTF-8?Q?This_email_has_internati=C3=B2nal_characters?=\n  From: Tester Testee </p>\n  \n  <p>[(b'Subject: ', None), (b'This email has internati\\xc3\\xb2nal\n  characters', 'utf-8'), (b'From: Tester Testee\n  &lt;ichaelmtest@gmail.com&gt;', None)]</p>\n</blockquote>\n\n<p>So to me, this looks like the problem is being caused by the fact that in the international example, <code>decode_header</code> misses a CRFL between the fields. So when <code>make_header</code> reads it, it sees only one field.</p>\n\n<p>I can work around this by separating the lines of the header before decoding, but am I missing something? Is there a better way?</p>\n\n<p>None of the answers to <a href=\"https://stackoverflow.com/questions/7331351/python-email-header-decoding-utf-8\">this old question</a> solved the problem with my example, so I'm posting it as my own question because I have code using <code>make_header</code> that produces a different error. If you want to reproduce the error without using a real mailbox, you should be able to paste the following block into a text editor and have it load that instead of <code>data[0][1]</code></p>\n\n<pre><code>Subject: =?UTF-8?Q?This_email_has_internati=C3=B2nal_characters?=\nFrom: Tester Testee &lt;ichaelmtest@gmail.com&gt;\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 2, "creation_date": 1482350358, "post_id": 41270928, "comment_id": 69742934, "body": "checkout <a href=\"http://stackoverflow.com/questions/5676646/how-can-i-fill-out-a-python-string-with-spaces\">How can I fill out a Python string with spaces?</a>"}, {"owner": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "edited": false, "score": 1, "creation_date": 1482350589, "post_id": 41270928, "comment_id": 69743058, "body": "How about <code>10 * &quot; &quot; + &quot;foo&quot;</code>... Or more generally: <code>n_spaces * &quot; &quot; + &lt;user word here&gt;</code>"}, {"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1482352734, "post_id": 41270928, "comment_id": 69744226, "body": "@JimFasarakisHilliard: Dupe question is related to filling up the spaces for constant width of OVERALL string. But here OP want the count of space as constant"}], "answers": [{"comments": [{"owner": {"reputation": 3600, "user_id": 5247911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IpGVs.png?s=128&g=1", "display_name": "Dinesh Pundkar", "link": "https://stackoverflow.com/users/5247911/dinesh-pundkar"}, "edited": false, "score": 0, "creation_date": 1482350934, "post_id": 41271038, "comment_id": 69743238, "body": "This one is beauty !!!"}], "tags": [], "owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "is_accepted": true, "score": 3, "last_activity_date": 1482350657, "creation_date": 1482350657, "answer_id": 41271038, "question_id": 41270928, "link": "https://stackoverflow.com/questions/41270928/i-want-to-change-the-amount-of-spaces-before-a-word/41271038#41271038", "title": "I want to change the amount of spaces before a word", "body": "<p>You may use <code>str.format</code> as:</p>\n\n<pre><code>&gt;&gt;&gt; space_count = 10\n&gt;&gt;&gt; '{}{}'.format(' '*space_count, 'Hello')\n'          Hello'\n#^^^^^^^^^^\n#1234567890 spaces\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "is_accepted": false, "score": 1, "last_activity_date": 1482350693, "creation_date": 1482350693, "answer_id": 41271050, "question_id": 41270928, "link": "https://stackoverflow.com/questions/41270928/i-want-to-change-the-amount-of-spaces-before-a-word/41271050#41271050", "title": "I want to change the amount of spaces before a word", "body": "<p>As I alluded to in the comments, you can define a function to add any number of spaces to the left of your string:</p>\n\n<pre><code>def add_spaces(n_spaces, string):\n    return \" \" * n_spaces + string\n</code></pre>\n\n<p>Test it out:</p>\n\n<pre><code>&gt;&gt;&gt; add_spaces(10, \"foo\")\n'          foo'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1604, "user_id": 6085595, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa066abb138dd22f51932878d3364cb0?s=128&d=identicon&r=PG&f=1", "display_name": "DiveIntoML", "link": "https://stackoverflow.com/users/6085595/diveintoml"}, "is_accepted": false, "score": 0, "last_activity_date": 1482351421, "last_edit_date": 1482351421, "creation_date": 1482351085, "answer_id": 41271139, "question_id": 41270928, "link": "https://stackoverflow.com/questions/41270928/i-want-to-change-the-amount-of-spaces-before-a-word/41271139#41271139", "title": "I want to change the amount of spaces before a word", "body": "<p>Let's say your string is <code>x=\"foo\"</code>, and you have <code>pad=10</code> indicating the number of spaces you want to pad to the left.</p>\n\n<p>Then you can use \"format\" method for strings in Python in the following way:</p>\n\n<pre><code>(\"{:&gt;%d}\" %(len(x)+pad)).format(x)\n</code></pre>\n\n<p>It is basically the same as <code>\"{:&gt;13}\".format(x)</code>, indicating you want to right align <code>x</code> within a total length of 13 by padding spaces between <code>x</code>.</p>\n"}], "owner": {"reputation": 91, "user_id": 7274182, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-d1XMFn0zJwU/AAAAAAAAAAI/AAAAAAAACPQ/4uud23wFmek/photo.jpg?sz=128", "display_name": "Jacob", "link": "https://stackoverflow.com/users/7274182/jacob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "closed_date": 1482351453, "accepted_answer_id": 41271038, "answer_count": 3, "score": 0, "last_activity_date": 1482351421, "creation_date": 1482350174, "question_id": 41270928, "link": "https://stackoverflow.com/questions/41270928/i-want-to-change-the-amount-of-spaces-before-a-word", "closed_reason": "Duplicate", "title": "I want to change the amount of spaces before a word", "body": "<p>I am trying to have a user input a word and a certain number of spaces before it: \ne.g. if the user wants 10 spaces before a word it will print:</p>\n\n<pre><code>..........foo\n</code></pre>\n\n<p>But without the .'s (That's just to make it clear that there is ten spaces here!). How would I go about doing this?</p>\n"}, {"tags": ["python", "popen"], "comments": [{"owner": {"reputation": 927, "user_id": 4950204, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/246295ada7d994b6b6a585163107f770?s=128&d=identicon&r=PG&f=1", "display_name": "kaminsknator", "link": "https://stackoverflow.com/users/4950204/kaminsknator"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1482350408, "post_id": 41270885, "comment_id": 69742965, "body": "From the actual output you can see that something is populating and the word test is being written by stdin but I&#39;m not seeing the print(s) part of the script."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1482350994, "post_id": 41270885, "comment_id": 69743270, "body": "The actual output I get is a traceback caused by <code>NameError: name &#39;test&#39; is not defined</code> followed by a line <code>input her</code>."}, {"owner": {"reputation": 927, "user_id": 4950204, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/246295ada7d994b6b6a585163107f770?s=128&d=identicon&r=PG&f=1", "display_name": "kaminsknator", "link": "https://stackoverflow.com/users/4950204/kaminsknator"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1482351334, "post_id": 41270885, "comment_id": 69743448, "body": "Well then I&#39;m not sure what needs to be modified for this to function."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1482351427, "post_id": 41270885, "comment_id": 69743501, "body": "Actually, when I switched to Python 3, it works correctly for me. What version are you using?"}, {"owner": {"reputation": 927, "user_id": 4950204, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/246295ada7d994b6b6a585163107f770?s=128&d=identicon&r=PG&f=1", "display_name": "kaminsknator", "link": "https://stackoverflow.com/users/4950204/kaminsknator"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1482351618, "post_id": 41270885, "comment_id": 69743591, "body": "The output was as expected? I&#39;m using python 3.5.1 from Anaconda 4.0.0 and working in the spyder IDE"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1482351810, "post_id": 41270885, "comment_id": 69743683, "body": "I&#39;m using Python 3.5.2 on Windows 7 (no Anaconda). Try running the main script, <code>test.py</code>, from the command-line if you aren&#39;t already."}, {"owner": {"reputation": 927, "user_id": 4950204, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/246295ada7d994b6b6a585163107f770?s=128&d=identicon&r=PG&f=1", "display_name": "kaminsknator", "link": "https://stackoverflow.com/users/4950204/kaminsknator"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1482352121, "post_id": 41270885, "comment_id": 69743868, "body": "&#39;C:\\Users\\Documents\\test&gt;python test.py input here:test   &#39; It is still not printing the input"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1482352413, "post_id": 41270885, "comment_id": 69744039, "body": "Think I figured it out: You&#39;re got <code>result = process.stdout.readline()[:-2].decode(&#39;utf-8&#39;)</code> <i>twice</i> in the main <code>test.py</code> script."}, {"owner": {"reputation": 11350, "user_id": 1172714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21b9325e81df235c9f3fbadd082ab651?s=128&d=identicon&r=PG", "display_name": "dsh", "link": "https://stackoverflow.com/users/1172714/dsh"}, "edited": false, "score": 0, "creation_date": 1482352711, "post_id": 41270885, "comment_id": 69744214, "body": "Python 2: <code>input()</code> will perform an <code>eval()</code> on the text received, thus the NameError.  In Python 3, <code>input()</code> is safer, and works like <code>raw_input()</code> in Python 2."}, {"owner": {"reputation": 11350, "user_id": 1172714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21b9325e81df235c9f3fbadd082ab651?s=128&d=identicon&r=PG", "display_name": "dsh", "link": "https://stackoverflow.com/users/1172714/dsh"}, "edited": false, "score": 1, "creation_date": 1482352818, "post_id": 41270885, "comment_id": 69744269, "body": "Note that the input is not echoed.  If you are sitting at a terminal and were to run &#39;python test2.py&#39;, the <i>terminal</i> would echo your input as you typed it. That would show the word &quot;test&quot; twice. The test.py program will send the word &quot;test&quot; through the pipe; it does not print it to stdout. The test2.py program prints the input once.  Thus the output &quot;input here:test&quot; is correct."}, {"owner": {"reputation": 927, "user_id": 4950204, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/246295ada7d994b6b6a585163107f770?s=128&d=identicon&r=PG&f=1", "display_name": "kaminsknator", "link": "https://stackoverflow.com/users/4950204/kaminsknator"}, "edited": false, "score": 0, "creation_date": 1482353431, "post_id": 41270885, "comment_id": 69744602, "body": "Thank you dsh that makes sense to me and I would have never figured that out. How can I capture the stdin and stdout pipe to show what test2.py is receiving from test.py?"}, {"owner": {"reputation": 11350, "user_id": 1172714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21b9325e81df235c9f3fbadd082ab651?s=128&d=identicon&r=PG", "display_name": "dsh", "link": "https://stackoverflow.com/users/1172714/dsh"}, "edited": false, "score": 0, "creation_date": 1482359863, "post_id": 41270885, "comment_id": 69747637, "body": "I don&#39;t think you can &quot;capture stdin&quot;. But since you control it, you could print everything you write to it.  You can create a function that will print the argument then write it to the pipe.  Then use that function to send data to the pipe."}], "answers": [{"tags": [], "owner": {"reputation": 11350, "user_id": 1172714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21b9325e81df235c9f3fbadd082ab651?s=128&d=identicon&r=PG", "display_name": "dsh", "link": "https://stackoverflow.com/users/1172714/dsh"}, "is_accepted": true, "score": 0, "last_activity_date": 1482359933, "creation_date": 1482359933, "answer_id": 41273108, "question_id": 41270885, "link": "https://stackoverflow.com/questions/41270885/using-popen-to-launch-another-script-and-send-input/41273108#41273108", "title": "Using Popen to launch another script and send input", "body": "<p>Note that the input is not echoed. If you are sitting at a terminal and were to run 'python test2.py', the <em>terminal</em> would echo your input as you typed it. That would show the word \"test\" twice. Your test.py program sends the word \"test\" through the pipe; it does not print it to stdout. The test2.py program prints the input once. Thus the output \"input here:test\" is correct.</p>\n"}], "owner": {"reputation": 927, "user_id": 4950204, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/246295ada7d994b6b6a585163107f770?s=128&d=identicon&r=PG&f=1", "display_name": "kaminsknator", "link": "https://stackoverflow.com/users/4950204/kaminsknator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 41273108, "answer_count": 1, "score": 0, "last_activity_date": 1482359933, "creation_date": 1482349979, "last_edit_date": 1482350600, "question_id": 41270885, "link": "https://stackoverflow.com/questions/41270885/using-popen-to-launch-another-script-and-send-input", "title": "Using Popen to launch another script and send input", "body": "<p>I have two scripts one just asks for input then prints the input. The other one launches the script. It is only half working and I was hoping someone could shed some light on the issue.</p>\n\n<p>test.py</p>\n\n<pre><code>import subprocess\n\nprocess = subprocess.Popen('python test2.py', shell=False,\n                           stdin=subprocess.PIPE, stdout=subprocess.PIPE,\n                           stderr=None)\nprocess.stdin.write(\"test\\r\\n\".encode('utf-8'))\nprocess.stdin.flush()\n\nresult = process.stdout.readline()[:-2].decode('utf-8')\nprint(result)\nwhile result != \"\":\n    result = process.stdout.readline()[:-2].decode('utf-8')\n    print(result)\n</code></pre>\n\n<p>test2.py</p>\n\n<pre><code>s=input(\"input here:\")\nprint(s)\n</code></pre>\n\n<p>expected output:</p>\n\n<pre><code>input here:test\ntest\n</code></pre>\n\n<p>actual output:</p>\n\n<pre><code>input here:test\n</code></pre>\n"}, {"tags": ["python", "elementtree"], "comments": [{"owner": {"reputation": 31, "user_id": 3682930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bd544d8f5cf4a91497398eba6f084b94?s=128&d=identicon&r=PG&f=1", "display_name": "emre5", "link": "https://stackoverflow.com/users/3682930/emre5"}, "reply_to_user": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1482350832, "post_id": 41270861, "comment_id": 69743187, "body": "for element in root.iter(&quot;ipsum&quot;):         print(&quot;%s - %s&quot; % (element.tag, element.text))  But I thought that would get me the actual child2, I want the text of the title element."}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 7327397, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CF2ZJOGLdl8/AAAAAAAAAAI/AAAAAAAAAN4/pvaVOTia0AU/photo.jpg?sz=128", "display_name": "Josh L", "link": "https://stackoverflow.com/users/7327397/josh-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1482356631, "creation_date": 1482356631, "answer_id": 41272385, "question_id": 41270861, "link": "https://stackoverflow.com/questions/41270861/get-child-element-based-on-value-of-different-child-element/41272385#41272385", "title": "Get child element based on value of different child element", "body": "<p>Part of the problem is that ipsum isn't an attribute in the xml you posted. It is the value of the attribute attr. Another example of this would be if you said <code>&lt;child2 name=\"John\"&gt;&lt;/child2&gt;</code>. In this case, name is the attribute and John is the value of that attribute. The following code should work if you are trying to maintain your current xml structure:</p>\n\n<pre><code>import xml.etree.ElementTree as ET\ntree = ET.parse('elements.xml')\nroot = tree.getroot()\n\nfor element in root:\n    childEl = element.find('child2')\n    if childEl != None and childEl.text == \"true\":\n        if element.find('title') != None:\n            print element.find('title').text\n</code></pre>\n\n<p>It loops over the elements, checking the child2 element to make sure it exists, and whether or not the text value of that element is \"true\".</p>\n\n<p>If you want your code to behave the way you described with ipsum being set to true, then you can use the following code and xml examples:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;data&gt;\n    &lt;element&gt;\n        &lt;title&gt;Hello world&lt;/title&gt;\n        &lt;child1&gt;Lorem&lt;/child1&gt;\n        &lt;child2 ipsum=\"true\"&gt;&lt;/child2&gt;\n    &lt;/element&gt;\n    &lt;element&gt;\n        &lt;title&gt;Hello world 2&lt;/title&gt;\n        &lt;child1&gt;Lorem&lt;/child1&gt;\n    &lt;/element&gt;\n    &lt;element&gt;\n        &lt;title&gt;Hello world 3&lt;/title&gt;\n        &lt;child1&gt;Lorem&lt;/child1&gt;\n        &lt;child2 ipsum=\"true\"&gt;&lt;/child2&gt;\n    &lt;/element&gt;    \n&lt;/data&gt;\n\nimport xml.etree.ElementTree as ET\ntree = ET.parse('elements.xml')\nroot = tree.getroot()\n\nfor element in root:\n    childEl = element.find('child2')\n    if childEl != None and childEl.get(\"ipsum\") == \"true\":\n        if element.find('title') != None:\n            print element.find('title').text\n</code></pre>\n\n<p>Hope this helps! Let me know if there's anything that you'd like me to clarify.</p>\n"}], "owner": {"reputation": 31, "user_id": 3682930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bd544d8f5cf4a91497398eba6f084b94?s=128&d=identicon&r=PG&f=1", "display_name": "emre5", "link": "https://stackoverflow.com/users/3682930/emre5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482356631, "creation_date": 1482349899, "question_id": 41270861, "link": "https://stackoverflow.com/questions/41270861/get-child-element-based-on-value-of-different-child-element", "title": "Get child element based on value of different child element", "body": "<p>Trying to get the title of all elements in XML file in which the child2 attribute ipsum text content is \"true\", using ElementTree in Python. Here's the XML:</p>\n\n<pre><code>&lt;element&gt;\n    &lt;title&gt;Hello world&lt;/title&gt;\n    &lt;child1&gt;Lorem&lt;/child1&gt;\n    &lt;child2 attr=\"ipsum\"&gt;true&lt;/child2&gt;\n&lt;/element&gt;\n&lt;element&gt;\n    &lt;title&gt;Hello world 2&lt;/title&gt;\n    &lt;child1&gt;Lorem&lt;/child1&gt;\n&lt;/element&gt;\n&lt;element&gt;\n    &lt;title&gt;Hello world 3&lt;/title&gt;\n    &lt;child1&gt;Lorem&lt;/child1&gt;\n    &lt;child2 attr=\"ipsum\"&gt;true&lt;/child2&gt;\n&lt;/element&gt;\n</code></pre>\n\n<p>The result I would like returned is a list that consists of the following titles: </p>\n\n<pre><code>Hello world\nHello world 3\n</code></pre>\n\n<p>The second element with title \"Hello world 2\" would be excluded because of missing this child element:</p>\n\n<pre><code>&lt;child2 attr=\"ipsum\"&gt;true&lt;/child2&gt;\n</code></pre>\n\n<p>Any tips?</p>\n"}, {"tags": ["python", "flask"], "answers": [{"tags": [], "owner": {"reputation": 3819, "user_id": 5802335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6561d4f88469479b23557bdf8b4b6ae4?s=128&d=identicon&r=PG&f=1", "display_name": "metmirr", "link": "https://stackoverflow.com/users/5802335/metmirr"}, "is_accepted": true, "score": 11, "last_activity_date": 1590739071, "last_edit_date": 1590739071, "creation_date": 1482355719, "answer_id": 41272173, "question_id": 41270855, "link": "https://stackoverflow.com/questions/41270855/flask-redirect-to-same-page-after-form-submission/41272173#41272173", "title": "Flask: redirect to same page after form submission", "body": "<p>Change form action to <code>action=\"{{url_for('delete_images')}}\"</code>. And for redirection you can use code below:</p>\n\n<pre><code>@app.route('/delete', methods=['POST'])\ndef delete_images():\n    if request.method == 'POST':\n        # do your work here\n        return redirect(url_for('delete_images'))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1314, "user_id": 5249708, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/HU6sl.jpg?s=128&g=1", "display_name": "tim", "link": "https://stackoverflow.com/users/5249708/tim"}, "is_accepted": false, "score": 0, "last_activity_date": 1493869960, "creation_date": 1493869960, "answer_id": 43773588, "question_id": 41270855, "link": "https://stackoverflow.com/questions/41270855/flask-redirect-to-same-page-after-form-submission/43773588#43773588", "title": "Flask: redirect to same page after form submission", "body": "<p>One way is set the current url by Javascript in your form. like:</p>\n\n<pre><code>&lt;form method=\"post\" action=\"/delete\"&gt;\n    &lt;div class=\"form-group\"&gt;\n        &lt;input type=\"hidden\" name=\"delete_input\"&gt;&lt;/input&gt;\n    &lt;/div&gt;\n    &lt;input type=hidden class=current_url value=\"\" name=current_url&gt;\n    &lt;button type=\"submit\" class=\"btn btn-danger\" id=\"btnSignUp\"&gt;Delete&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>And set the hidden input value by JS, like,</p>\n\n<pre><code>function get_current_url() {\n    var url=window.location.href;\n    return url\n}\n\n$(window).on('load',function(){\n    var current_url=document.getElementsByClassName('current_url')[0];\n    current_url.value=get_current_url();\n\n})\n</code></pre>\n\n<p>At server, <code>redirect</code> to the url that post data</p>\n"}, {"comments": [{"owner": {"reputation": 301, "user_id": 1522205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50793b07477f669018a5fe7d9016898c?s=128&d=identicon&r=PG", "display_name": "paul", "link": "https://stackoverflow.com/users/1522205/paul"}, "edited": false, "score": 0, "creation_date": 1579537583, "post_id": 54064433, "comment_id": 105791397, "body": "does not work if there is anything quoted in the url E.g. if you request <a href=\"http://example.org/?whatever=bla%20bla\" rel=\"nofollow noreferrer\">example.org/?whatever=bla%20bla</a> request.url will contain &quot;<a href=\"http://example.org/?whatever=bla\" rel=\"nofollow noreferrer\">example.org/?whatever=bla</a> bla&quot; (blank unquoted) wihch makes the redirection fail. AFAIK, there is no way to quote reliably to the original again"}], "tags": [], "owner": {"reputation": 1632, "user_id": 2256407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b883b472b93d8d1cabb5ff5e7fffc358?s=128&d=identicon&r=PG&f=1", "display_name": "Mahmoud", "link": "https://stackoverflow.com/users/2256407/mahmoud"}, "is_accepted": false, "score": 9, "last_activity_date": 1546797990, "creation_date": 1546797990, "answer_id": 54064433, "question_id": 41270855, "link": "https://stackoverflow.com/questions/41270855/flask-redirect-to-same-page-after-form-submission/54064433#54064433", "title": "Flask: redirect to same page after form submission", "body": "<p>You can get the currently requested URL by <code>request.url</code>:</p>\n\n<p>So, to redirect to the same page use:</p>\n\n<pre><code>redirect(request.url)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8280, "user_id": 8228558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd59fcdaa6fef158fce4b6d372998521?s=128&d=identicon&r=PG&f=1", "display_name": "IoaTzimas", "link": "https://stackoverflow.com/users/8228558/ioatzimas"}, "is_accepted": false, "score": 3, "last_activity_date": 1570995059, "creation_date": 1570995059, "answer_id": 58367071, "question_id": 41270855, "link": "https://stackoverflow.com/questions/41270855/flask-redirect-to-same-page-after-form-submission/58367071#58367071", "title": "Flask: redirect to same page after form submission", "body": "<p>This worked perfectly for me, in last line:</p>\n\n<pre><code>return redirect(request.referrer)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 11272411, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3AwyyJYcWE8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc73MXmFWOymJ1cTla6rXm-q9HzAw/mo/photo.jpg?sz=128", "display_name": "Jessie Danquah", "link": "https://stackoverflow.com/users/11272411/jessie-danquah"}, "is_accepted": false, "score": 4, "last_activity_date": 1589953999, "last_edit_date": 1589953999, "creation_date": 1589933429, "answer_id": 61902927, "question_id": 41270855, "link": "https://stackoverflow.com/questions/41270855/flask-redirect-to-same-page-after-form-submission/61902927#61902927", "title": "Flask: redirect to same page after form submission", "body": "<p>As archer said below:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>return redirect(request.referrer)\n</code></pre>\n\n<p>This is useful when you have a button that uses a route to perform a given function when it is clicked - you don't want to return the user to the URL for that button - you want to return the user to the URL that the button route was referred by, i.e. the page the user was on when they clicked the button.</p>\n\n<p>However, as Mahmoud said:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>redirect(request.url)\n</code></pre>\n\n<p>This is perfect if you perform a function on a page that doesn't use routes or special URLs or anything like that. It essentially just refreshes the page.</p>\n"}], "owner": {"reputation": 2464, "user_id": 3629892, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e82d30463a970d795b8b8cf1455ff7bb?s=128&d=identicon&r=PG&f=1", "display_name": "user3629892", "link": "https://stackoverflow.com/users/3629892/user3629892"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40116, "favorite_count": 2, "accepted_answer_id": 41272173, "answer_count": 5, "score": 6, "last_activity_date": 1590739071, "creation_date": 1482349869, "question_id": 41270855, "link": "https://stackoverflow.com/questions/41270855/flask-redirect-to-same-page-after-form-submission", "title": "Flask: redirect to same page after form submission", "body": "<p>I have two forms on in my template: one, to post something and the second, to activate file deletion on the server:</p>\n\n<pre><code>&lt;div style=\"margin-bottom:150px;\"&gt;\n    &lt;h4&gt;Delete&lt;/h4&gt;\n    &lt;form method=\"post\" action=\"/delete\"&gt;\n        &lt;div class=\"form-group\"&gt;\n            &lt;input type=\"hidden\" name=\"delete_input\"&gt;&lt;/input&gt;\n        &lt;/div&gt;\n        &lt;button type=\"submit\" class=\"btn btn-danger\" id=\"btnSignUp\"&gt;Delete&lt;/button&gt;\n    &lt;/form&gt;\n&lt;/div&gt;\n\n&lt;div style=\"margin-bottom:150px;\"&gt;\n    &lt;h4&gt;URLs&lt;/h4&gt;\n    &lt;form method=\"post\" action=\"/\"&gt;\n        &lt;div class=\"form-group\"&gt;\n            &lt;textarea class=\"form-control\" rows=\"5\" id=\"urls\" name=\"url_area\"&gt;&lt;/textarea&gt;\n        &lt;/div&gt;\n        &lt;button type=\"submit\" class=\"btn btn-primary\" id=\"btnSignUp\"&gt;Urls&lt;/button&gt;\n    &lt;/form&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>My <code>app.py</code> looks like this:</p>\n\n<pre><code>@app.route(\"/\")\ndef main():\n    return render_template('index.html')\n\n\n@app.route('/', methods=['POST'])\ndef parse_urls():\n    _urls = request.form['url_area'].split(\"\\n\")\n    image_list = get_images(_urls)\n    return render_template('index.html', images=image_list)\n\n\n@app.route('/delete', methods=['POST'])\ndef delete_images():\n    file_list = [f for f in os.listdir(\"./static\") if f.endswith(\".png\")]\n    for f in file_list:\n        os.remove(\"./static/\" + f)\n    image_list = []\n    conn = sqlite3.connect('_db/database.db')\n\n    curs = conn.cursor()\n    sql = \"DROP TABLE IF EXISTS images\"\n    curs.execute(sql)\n    conn.commit()\n    conn.close()\n    return render_template('index.html', images=image_list)\n</code></pre>\n\n<p>Two issues:</p>\n\n<ul>\n<li>I get the form resubmission message when I reload the page after submitting the form</li>\n<li>I would like to have one url for everything</li>\n</ul>\n\n<p>The way I see it, I need so use redirects to avoid the duplicate submission and after calling delete, I need to redirect to index.</p>\n\n<p>How can I do this correctly?</p>\n\n<p>I know about <code>redirect</code> and <code>url_for</code>, but how do I redirect to the same page?</p>\n"}, {"tags": ["python", "python-2.7", "search"], "comments": [{"owner": {"reputation": 4995, "user_id": 2907819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VZnjr.jpg?s=128&g=1", "display_name": "kmaork", "link": "https://stackoverflow.com/users/2907819/kmaork"}, "edited": false, "score": 0, "creation_date": 1482350086, "post_id": 41270824, "comment_id": 69742777, "body": "check <code>os.path.join</code>"}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1482350323, "post_id": 41270824, "comment_id": 69742907, "body": "While <code>os.path.join</code> is the correct solution, Windows is perfectly happy with <code>&#47;</code> directory separators."}, {"owner": {"reputation": 3, "user_id": 7280784, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_CGcTXzrFcI/AAAAAAAAAAI/AAAAAAAAACE/25pjFa7czXI/photo.jpg?sz=128", "display_name": "Purple Rain", "link": "https://stackoverflow.com/users/7280784/purple-rain"}, "edited": false, "score": 0, "creation_date": 1482351514, "post_id": 41270824, "comment_id": 69743549, "body": "So obviously answer. Thank you!"}, {"owner": {"reputation": 3567, "user_id": 4116239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ksElS.png?s=128&g=1", "display_name": "Kevin J. Chase", "link": "https://stackoverflow.com/users/4116239/kevin-j-chase"}, "reply_to_user": {"reputation": 3057, "user_id": 2415524, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/wQrhZ.jpg?s=128&g=1", "display_name": "mbomb007", "link": "https://stackoverflow.com/users/2415524/mbomb007"}, "edited": false, "score": 0, "creation_date": 1482353756, "post_id": 41270824, "comment_id": 69744776, "body": "@mbomb007:  Purple Rain is not looking for the <a href=\"https://docs.python.org/3/library/os.html#os.pathsep\" rel=\"nofollow noreferrer\"><code>PATH</code> separator</a> (typically <code>&#39;:&#39;</code> or <code>&#39;;&#39;</code>), but the <a href=\"https://docs.python.org/3/library/os.html#os.sep\" rel=\"nofollow noreferrer\"><i>directory</i> separator</a> (typically <code>&#39;&#47;&#39;</code> or <code>&#39;\\&#39;</code>)."}, {"owner": {"reputation": 3567, "user_id": 4116239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ksElS.png?s=128&g=1", "display_name": "Kevin J. Chase", "link": "https://stackoverflow.com/users/4116239/kevin-j-chase"}, "edited": false, "score": 0, "creation_date": 1482354246, "post_id": 41270824, "comment_id": 69745024, "body": "See &quot;<a href=\"https://stackoverflow.com/questions/32431150\">How/where to use <code>os.path.sep</code>?</a>&quot;, and the <a href=\"https://stackoverflow.com/questions/16789790/4116239\">accepted answer</a> from &quot;<a href=\"https://stackoverflow.com/questions/16789714\">Differences between use of <code>os.path.join</code> and <code>os.sep</code> concatenation</a>&quot; for better ways to handle directory separators."}, {"owner": {"reputation": 3057, "user_id": 2415524, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/wQrhZ.jpg?s=128&g=1", "display_name": "mbomb007", "link": "https://stackoverflow.com/users/2415524/mbomb007"}, "reply_to_user": {"reputation": 3567, "user_id": 4116239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ksElS.png?s=128&g=1", "display_name": "Kevin J. Chase", "link": "https://stackoverflow.com/users/4116239/kevin-j-chase"}, "edited": false, "score": 0, "creation_date": 1482354829, "post_id": 41270824, "comment_id": 69745343, "body": "@KevinJ.Chase I know, but in the linked question the OP says &quot;In the discussions to this question How do I find out my python path using python? , it is suggested that <code>os.sep</code>...&quot; and <code>os.sep</code> is presumably what he&#39;s looking for."}], "answers": [{"tags": [], "owner": {"reputation": 4421, "user_id": 1173529, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/4f64aeede68ff9de9a5100ece80e3a87?s=128&d=identicon&r=PG", "display_name": "Midiparse", "link": "https://stackoverflow.com/users/1173529/midiparse"}, "is_accepted": true, "score": 2, "last_activity_date": 1482350164, "creation_date": 1482350164, "answer_id": 41270926, "question_id": 41270824, "link": "https://stackoverflow.com/questions/41270824/avoid-backslash-in-path-python/41270926#41270926", "title": "Avoid backslash in path Python", "body": "<p>You can use <code>os.path.join</code> to join paths together, for example\ninstead of</p>\n\n<pre><code>subdir + \"\\\\\" + fname\n</code></pre>\n\n<p>you could do</p>\n\n<pre><code>os.path.join(subdir, fname)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3057, "user_id": 2415524, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/wQrhZ.jpg?s=128&g=1", "display_name": "mbomb007", "link": "https://stackoverflow.com/users/2415524/mbomb007"}, "is_accepted": false, "score": 0, "last_activity_date": 1482354956, "creation_date": 1482354956, "answer_id": 41272031, "question_id": 41270824, "link": "https://stackoverflow.com/questions/41270824/avoid-backslash-in-path-python/41272031#41272031", "title": "Avoid backslash in path Python", "body": "<p>You could use <a href=\"https://docs.python.org/2/library/os.html#os.sep\" rel=\"nofollow noreferrer\"><code>os.sep</code></a>. This is just showing that you can in fact get the character used by the operating system to separate pathname components if you want, but for concatenating path names, see the other answer on using <code>os.path.join()</code>.</p>\n\n<blockquote>\n  <p>The character used by the operating system to separate pathname components. This is <code>'/'</code> for POSIX and <code>'\\\\'</code> for Windows. Note that knowing this is not sufficient to be able to parse or concatenate pathnames \u2014 use <code>os.path.split()</code> and <code>os.path.join()</code> \u2014 but it is occasionally useful. Also available via <code>os.path</code>.</p>\n</blockquote>\n"}], "owner": {"reputation": 3, "user_id": 7280784, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_CGcTXzrFcI/AAAAAAAAAAI/AAAAAAAAACE/25pjFa7czXI/photo.jpg?sz=128", "display_name": "Purple Rain", "link": "https://stackoverflow.com/users/7280784/purple-rain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 794, "favorite_count": 0, "closed_date": 1482359604, "accepted_answer_id": 41270926, "answer_count": 2, "score": 0, "last_activity_date": 1482585833, "creation_date": 1482349728, "last_edit_date": 1482585833, "question_id": 41270824, "link": "https://stackoverflow.com/questions/41270824/avoid-backslash-in-path-python", "closed_reason": "Duplicate", "title": "Avoid backslash in path Python", "body": "<p>Below you can find a simple script to search text in files. I'm looking for how to be more crossplatform i mean how to avoid '\\' in path to look through all dirs and do it with standard library from Python. Because as i know, mac use '/' instead of backslash. Any idea how to do it? </p>\n\n<pre><code>#!/usr/bin/env python    \n\ndef find(text, search_path):\n    res = []\n\n    for subdir, dirs, files in os.walk(search_path):\n        for fname in files:\n            if os.path.isfile(subdir + \"\\\\\" + fname):\n                with open(subdir + \"\\\\\" + fname) as f:\n                    for i, line in enumerate(f):\n                        if text in line:\n                            res.append([fname, i])\n</code></pre>\n"}, {"tags": ["python", "geometry"], "answers": [{"comments": [{"owner": {"reputation": 1809, "user_id": 3715819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wUGc0.jpg?s=128&g=1", "display_name": "Rockcat", "link": "https://stackoverflow.com/users/3715819/rockcat"}, "edited": false, "score": 0, "creation_date": 1482418033, "post_id": 41270863, "comment_id": 69773268, "body": "In general, it is better to avoid hypot(x) and other functions based on sqrt(x) when comparing a threshold due to perfomance and round-off errors. Instead of <code>sqrt(x) &lt;= tolerance</code>, you should use  <code>x &lt;= tolerance**2</code>"}], "tags": [], "owner": {"reputation": 4995, "user_id": 2907819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VZnjr.jpg?s=128&g=1", "display_name": "kmaork", "link": "https://stackoverflow.com/users/2907819/kmaork"}, "is_accepted": true, "score": 2, "last_activity_date": 1482425572, "last_edit_date": 1482425572, "creation_date": 1482349909, "answer_id": 41270863, "question_id": 41270792, "link": "https://stackoverflow.com/questions/41270792/check-for-coincident-points-within-tolerance/41270863#41270863", "title": "Check for coincident points (within tolerance)", "body": "<p>For two dimensions you can use:</p>\n\n<pre><code>&gt;&gt;&gt; import math\n&gt;&gt;&gt; same = lambda p1, p2, tol: math.hypot(p2[0] - p1[0], p2[1] - p1[1]) &lt;= tol\n&gt;&gt;&gt; a = [1, 2]\n&gt;&gt;&gt; b = [1.1, 2.1]\n&gt;&gt;&gt; c = [1, 3]\n&gt;&gt;&gt; same(a, b, 0.5)\nTrue\n&gt;&gt;&gt; same(b, c, 0.5)\nFalse\n&gt;&gt;&gt; \n</code></pre>\n\n<p>And for more:</p>\n\n<pre><code>multiHypot = lambda diffs: math.sqrt(sum(diff**2 for diff in diffs))\nsame = lambda p1, p2, tol: multiHypot(p2[i] - p1[i] for i in range(len(p1))) &lt;= tol\n</code></pre>\n\n<p><strong>Update per Rockcat's comment (more efficient):</strong></p>\n\n<pre><code>same = lambda p1, p2, tol: sum((p2[i] - p1[i])**2 for i in range(len(p1))) &lt;= tol**2\n</code></pre>\n\n<p>A prettier version (maybe faster):</p>\n\n<pre><code>from operator import sub\nsame = lambda p1, p2, tol: sum(x**2 for x in map(sub, p1, p2)) &lt;= tol**2\n</code></pre>\n"}], "owner": {"reputation": 1394, "user_id": 3218398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n3AML.jpg?s=128&g=1", "display_name": "hstay", "link": "https://stackoverflow.com/users/3218398/hstay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 1, "accepted_answer_id": 41270863, "answer_count": 1, "score": 0, "last_activity_date": 1482425572, "creation_date": 1482349608, "question_id": 41270792, "link": "https://stackoverflow.com/questions/41270792/check-for-coincident-points-within-tolerance", "title": "Check for coincident points (within tolerance)", "body": "<p>I'd like to check if two points are identical within an absolute tolerance value in the most 'pythonic' and simple way.</p>\n\n<p>I am currently using 'numpy' built-in function <code>allclose()</code>:</p>\n\n<p><code>numpy.allclose(a, b, 0, tol)</code></p>\n\n<p>But I am looking for a 'non-numpy' solution if possible.</p>\n\n<p><strong>Example</strong></p>\n\n<pre><code>a = [1, 2, 3]\nb = [1.1, 2.1, 3.1]\nc = [1, 3, 3]\ntolerance = 0.5\n</code></pre>\n\n<p><code>a</code> compared to <code>b</code> should return <code>true</code></p>\n\n<p><code>a</code> compared to <code>c</code> should return <code>false</code> </p>\n"}, {"tags": ["python", "list", "list-processing"], "comments": [{"owner": {"reputation": 7400, "user_id": 1626719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33df8a8d3fe93ffd7d33fbf7c7d6b390?s=128&d=identicon&r=PG", "display_name": "tihom", "link": "https://stackoverflow.com/users/1626719/tihom"}, "edited": false, "score": 1, "creation_date": 1482349502, "post_id": 41270726, "comment_id": 69742478, "body": "<code>checklist = B</code> not <code>[B]</code>"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1482349525, "post_id": 41270726, "comment_id": 69742492, "body": "<i>&quot;make user input read not only integers, but strings?&quot;</i> - what? You explicitly convert the strings to integers. Maybe... don&#39;t?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1482350226, "post_id": 41270726, "comment_id": 69742845, "body": "<code>checklist=[B]</code> makes <code>B</code> a nested list in a new list named <code>checklist</code> (which will contain only <b>one</b> element, the entire <code>B</code> list)."}, {"owner": {"reputation": 29, "user_id": 7197803, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cfbda355fc3dac0358cebb1c1fa5f206?s=128&d=identicon&r=PG&f=1", "display_name": "v0id", "link": "https://stackoverflow.com/users/7197803/v0id"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1482350786, "post_id": 41270726, "comment_id": 69743163, "body": "@jonrsharpe I mean that user could input for example 1 and &#39;one&#39;, and it wouldn&#39;t mess up the execution of the code"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1482352291, "post_id": 41270726, "comment_id": 69743978, "body": "If you want to know how to parse words into numbers, you&#39;ll need to do some research; that&#39;s not built into the standard library."}], "answers": [{"tags": [], "owner": {"reputation": 1186, "user_id": 7327411, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211446482337148/picture?type=large", "display_name": "wkzhu", "link": "https://stackoverflow.com/users/7327411/wkzhu"}, "is_accepted": false, "score": 1, "last_activity_date": 1482351273, "creation_date": 1482351273, "answer_id": 41271195, "question_id": 41270726, "link": "https://stackoverflow.com/questions/41270726/how-to-find-elements-in-one-arbitrary-list-that-occur-in-another-list-preservin/41271195#41271195", "title": "How to find elements in one arbitrary list that occur in another list (preserving their order)?", "body": "<p>Here's one solution. Keep in mind there are many that have asked this type of question before and that best practice is to search around before asking.</p>\n\n<pre><code>a = input('enter list A with comma between each element: ')\nb = input('enter list B with comma between each element: ')\n\na = a.split(',')\nb = b.split(',')\n\ncontained_in_b = [element in b for element in a]\n\nfor i, in_b in enumerate(contained_in_b):\n    print('element {} contained in list B: {}'.format(a[i], in_b))\n</code></pre>\n\n<p>Better to take the raw input all together and use Python to split it into lists. This way, no need for the user to give the length of the list beforehand. Also, no need to convert to <code>int</code> - string comparisons work fine.</p>\n\n<p><code>contained_in_b</code> uses a list comprehension - a handy feature of Python that applies the boolean <code>element in b</code> to each <code>element</code> in <code>a</code>. Now you have a list of True/False values that you can <code>enumerate</code> through to print out the desired output.</p>\n"}, {"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1482351343, "creation_date": 1482351343, "answer_id": 41271209, "question_id": 41270726, "link": "https://stackoverflow.com/questions/41270726/how-to-find-elements-in-one-arbitrary-list-that-occur-in-another-list-preservin/41271209#41271209", "title": "How to find elements in one arbitrary list that occur in another list (preserving their order)?", "body": "<p>One weapon you get is the <strong>all</strong> operator, which just checks that all of the items in the iterable are True:</p>\n\n<pre><code>A = [1, 4, 6, 8, 13]\nB = [4, 6, 13, 8]\nC = [3, 8, 25]\n\nmaster = [i for i in range(20)]\n\nprint all(i in master for i in A)\nprint all(i in master for i in B)\nprint all(i in master for i in C)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>True\nTrue\nFalse\n</code></pre>\n\n<p>To get the order as well, you'll need to drop back to an iterative method, stepping through the first list with a loop, while you maintain an index to know where you are in the second.  For each value in the first list, go through the <em>rest</em> of the second list, until you either find the item (temporary success) or hit the end (failure).</p>\n\n<p>Reading in number names and converting them to integers is a separate problem, and longer code.</p>\n"}], "owner": {"reputation": 29, "user_id": 7197803, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cfbda355fc3dac0358cebb1c1fa5f206?s=128&d=identicon&r=PG&f=1", "display_name": "v0id", "link": "https://stackoverflow.com/users/7197803/v0id"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1482351343, "creation_date": 1482349378, "last_edit_date": 1482351193, "question_id": 41270726, "link": "https://stackoverflow.com/questions/41270726/how-to-find-elements-in-one-arbitrary-list-that-occur-in-another-list-preservin", "title": "How to find elements in one arbitrary list that occur in another list (preserving their order)?", "body": "<p>I need to create an algorithm which would read user input of lists <code>A</code> and <code>B</code> and determine whether elements from list <code>B</code> occur in list <code>A</code> (if they occur, program needs to print 'Yes', and 'No' otherwise').</p>\n\n<p>I have come up with the following code which should can be a starting point:</p>\n\n<pre><code>n=int(input('Enter the length of list A '))\nA=[]\nfor i in range (0,n):\n    InpEl=int(input('Enter the elements '))\n    A.append(InpEl)\nprint(A)\nn=int(input('Enter the length of list B '))\nB=[]\nfor i in range (0,n):\n    InpEl2=int(input('Enter the elements '))\n    B.append(InpEl2)\nprint(B)\n\nchecklist=B\nfor each in A:\n    if each in checklist:\n        print('YES')\n    else:\n         print('NO')\n</code></pre>\n\n<p>Although in any case, I get 'No'. What is the mistake here?</p>\n\n<p>Also, later I may need to modify the list so the program could determine if elements of <code>B</code> occur in <code>A</code> in the order they appear in <code>B</code>, but not necessarily consecutively.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>For example, let M be the length of B and N be the length of A.\nThen the program should return yes if there are indices i0, i1...im+1 such that 0&lt;= i0 &lt; i1...&lt; im-1 &lt; N such that A[i0] = B[0];A[i1] = B[1]...A[im-1] =\nB[m-1].\n</code></pre>\n\n<p>Is there a simpler way to build the loop which would satisfy this kind of request?</p>\n\n<p>P.S.: is it possible to make user input read not only integers, but strings? I am not sure if <code>raw_input</code> would be useful in Python 3.5.</p>\n\n<p>P.S.S:\nsorry, I made a minor mistake inputting the code here, I fixed it now. \nAnother question: I get the output of multiple yes' and no's for each element:</p>\n\n<pre><code>Enter the length of list A 3\nEnter the elements 1\nEnter the elements 2\nEnter the elements 3\n[1, 2, 3]\nEnter the length of list B 3\nEnter the elements 5\nEnter the elements 4\nEnter the elements 3\n[5, 4, 3]\nNO\nNO\nYES\n</code></pre>\n\n<p>How can I modify the code so it would print only one yes and no only once in case of any occurencies happen?</p>\n"}, {"tags": ["python", "list", "list-comprehension"], "answers": [{"comments": [{"owner": {"reputation": 1488, "user_id": 2460341, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/TG6Gx.jpg?s=128&g=1", "display_name": "Minoru", "link": "https://stackoverflow.com/users/2460341/minoru"}, "edited": false, "score": 0, "creation_date": 1482349973, "post_id": 41270724, "comment_id": 69742720, "body": "I didn&#39;t know <code>np.minimum</code> did the comparison pairwise. Thanks!"}], "tags": [], "owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "is_accepted": false, "score": 1, "last_activity_date": 1482349376, "creation_date": 1482349376, "answer_id": 41270724, "question_id": 41270704, "link": "https://stackoverflow.com/questions/41270704/how-to-use-list-comprehension-to-select-lower-value-between-2-lists/41270724#41270724", "title": "How to use list comprehension to select lower value between 2 lists?", "body": "<p>This is a simple application of <code>min</code> and <code>zip</code>:</p>\n\n<pre><code>c = [min(aa, bb) for aa, bb in zip(a, b)]\n</code></pre>\n\n<p>If you're going to do computations like this a lot, it might be worth using <code>numpy</code>:</p>\n\n<pre><code>c = numpy.minimum(a, b)\n</code></pre>\n\n<p>e.g.:</p>\n\n<pre><code>&gt;&gt;&gt; a = numpy.array([0.6, 0.8, 0.4])\n&gt;&gt;&gt; b = numpy.array([0.4, 1.0, 0.5])\n&gt;&gt;&gt; numpy.minimum(a, b)\narray([ 0.4,  0.8,  0.4])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1488, "user_id": 2460341, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/TG6Gx.jpg?s=128&g=1", "display_name": "Minoru", "link": "https://stackoverflow.com/users/2460341/minoru"}, "edited": false, "score": 1, "creation_date": 1482349938, "post_id": 41270734, "comment_id": 69742707, "body": "Didn&#39;t know you could use the <code>for</code> with <code>zip()</code> like that. Really liked that!"}, {"owner": {"reputation": 15599, "user_id": 4575071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9bceb35fc57e732ca44911b801b12e?s=128&d=identicon&r=PG&f=1", "display_name": "ettanany", "link": "https://stackoverflow.com/users/4575071/ettanany"}, "reply_to_user": {"reputation": 1488, "user_id": 2460341, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/TG6Gx.jpg?s=128&g=1", "display_name": "Minoru", "link": "https://stackoverflow.com/users/2460341/minoru"}, "edited": false, "score": 0, "creation_date": 1482350067, "post_id": 41270734, "comment_id": 69742763, "body": "@Lucas Python is powerful ;)"}], "tags": [], "owner": {"reputation": 15599, "user_id": 4575071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9bceb35fc57e732ca44911b801b12e?s=128&d=identicon&r=PG&f=1", "display_name": "ettanany", "link": "https://stackoverflow.com/users/4575071/ettanany"}, "is_accepted": true, "score": 6, "last_activity_date": 1482349402, "creation_date": 1482349402, "answer_id": 41270734, "question_id": 41270704, "link": "https://stackoverflow.com/questions/41270704/how-to-use-list-comprehension-to-select-lower-value-between-2-lists/41270734#41270734", "title": "How to use list comprehension to select lower value between 2 lists?", "body": "<p>You can use <a href=\"https://docs.python.org/3/library/functions.html#zip\" rel=\"noreferrer\"><code>zip()</code></a> like this:</p>\n\n<pre><code>c = [min(*item) for item in zip(a, b)]\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>&gt;&gt;&gt; a = [0.6, 0.8, 0.4]\n&gt;&gt;&gt; b = [0.4, 1.0, 0.5]\n&gt;&gt;&gt;\n&gt;&gt;&gt; c = [min(*item) for item in zip(a, b)]\n&gt;&gt;&gt; c\n[0.4, 0.8, 0.4]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 3, "creation_date": 1482349682, "post_id": 41270780, "comment_id": 69742574, "body": "It might be worth pointing out that this won&#39;t return a list on python3.x -- It&#39;ll return an iterable object which yields the expected items."}], "tags": [], "owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "is_accepted": false, "score": 3, "last_activity_date": 1482349541, "creation_date": 1482349541, "answer_id": 41270780, "question_id": 41270704, "link": "https://stackoverflow.com/questions/41270704/how-to-use-list-comprehension-to-select-lower-value-between-2-lists/41270780#41270780", "title": "How to use list comprehension to select lower value between 2 lists?", "body": "<p>Just pass <code>map</code> two list arguments:</p>\n\n<pre><code>c = map(min, a, b)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7400, "user_id": 1626719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33df8a8d3fe93ffd7d33fbf7c7d6b390?s=128&d=identicon&r=PG", "display_name": "tihom", "link": "https://stackoverflow.com/users/1626719/tihom"}, "is_accepted": false, "score": 1, "last_activity_date": 1482350450, "last_edit_date": 1482350450, "creation_date": 1482349790, "answer_id": 41270838, "question_id": 41270704, "link": "https://stackoverflow.com/questions/41270704/how-to-use-list-comprehension-to-select-lower-value-between-2-lists/41270838#41270838", "title": "How to use list comprehension to select lower value between 2 lists?", "body": "<p>Using numpy's <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.minimum.html\" rel=\"nofollow noreferrer\">minimum</a> function which does element-wise minimum of array elements.   </p>\n\n<pre><code>numpy.minimum(a, b)\n</code></pre>\n"}], "owner": {"reputation": 1488, "user_id": 2460341, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/TG6Gx.jpg?s=128&g=1", "display_name": "Minoru", "link": "https://stackoverflow.com/users/2460341/minoru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 662, "favorite_count": 0, "accepted_answer_id": 41270734, "answer_count": 4, "score": 1, "last_activity_date": 1482350450, "creation_date": 1482349307, "question_id": 41270704, "link": "https://stackoverflow.com/questions/41270704/how-to-use-list-comprehension-to-select-lower-value-between-2-lists", "title": "How to use list comprehension to select lower value between 2 lists?", "body": "<pre><code>a = list of number with length k\nb = list of number with length k\n</code></pre>\n\n<p>How to get a list c with the lower value of a and b, position by position?</p>\n\n<pre><code>Example:\na = [0.6, 0.8, 0.4]\nb = [0.4, 1.0, 0.5]\n\nc = [0.4, 0.8, 0.4]\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "scikit-learn", "neural-network"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 7327361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef2afeb99a7ca49b7c41951a488b0a51?s=128&d=identicon&r=PG&f=1", "display_name": "PARNAB SANYAL", "link": "https://stackoverflow.com/users/7327361/parnab-sanyal"}, "edited": false, "score": 0, "creation_date": 1482353020, "post_id": 41271351, "comment_id": 69744377, "body": "Thank you for reminding me about the random  initialization of synaptic weights. Will it be better if I just write the whole code from scratch? I have studied Backprop Neural Net from <b>Fundamentals of Neural Networks</b> by <b>Fausett</b>. The whole implementation is given there."}, {"owner": {"reputation": 65, "user_id": 7327361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef2afeb99a7ca49b7c41951a488b0a51?s=128&d=identicon&r=PG&f=1", "display_name": "PARNAB SANYAL", "link": "https://stackoverflow.com/users/7327361/parnab-sanyal"}, "edited": false, "score": 0, "creation_date": 1482353172, "post_id": 41271351, "comment_id": 69744464, "body": "The whole implementation is given there. Then I can use RMS error as stopping condition."}, {"owner": {"reputation": 65, "user_id": 7327361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef2afeb99a7ca49b7c41951a488b0a51?s=128&d=identicon&r=PG&f=1", "display_name": "PARNAB SANYAL", "link": "https://stackoverflow.com/users/7327361/parnab-sanyal"}, "edited": false, "score": 0, "creation_date": 1482353412, "post_id": 41271351, "comment_id": 69744588, "body": "And I just figured out that if I use <code>random_state</code> argument in the <code>MLPRegressor</code> constructor then I can get same output at different run"}, {"owner": {"reputation": 65, "user_id": 7327361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef2afeb99a7ca49b7c41951a488b0a51?s=128&d=identicon&r=PG&f=1", "display_name": "PARNAB SANYAL", "link": "https://stackoverflow.com/users/7327361/parnab-sanyal"}, "edited": false, "score": 0, "creation_date": 1482353490, "post_id": 41271351, "comment_id": 69744633, "body": "Thanks you for <code>inverse_transform</code>. I didn&#39;t know this. really helpful"}, {"owner": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "reply_to_user": {"reputation": 65, "user_id": 7327361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef2afeb99a7ca49b7c41951a488b0a51?s=128&d=identicon&r=PG&f=1", "display_name": "PARNAB SANYAL", "link": "https://stackoverflow.com/users/7327361/parnab-sanyal"}, "edited": false, "score": 1, "creation_date": 1482354068, "post_id": 41271351, "comment_id": 69744932, "body": "Fixing random seed makes it deterministic, but it will not make neural net free from local optima problems, you will simply select a single one. I would suggest looking at things like keras instead of coding from scratch, unless you want to do this as an exercise."}, {"owner": {"reputation": 65, "user_id": 7327361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef2afeb99a7ca49b7c41951a488b0a51?s=128&d=identicon&r=PG&f=1", "display_name": "PARNAB SANYAL", "link": "https://stackoverflow.com/users/7327361/parnab-sanyal"}, "edited": false, "score": 0, "creation_date": 1482354356, "post_id": 41271351, "comment_id": 69745073, "body": "Understood! Thanks"}], "tags": [], "owner": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "is_accepted": true, "score": 2, "last_activity_date": 1482352798, "last_edit_date": 1482352798, "creation_date": 1482352006, "answer_id": 41271351, "question_id": 41270698, "link": "https://stackoverflow.com/questions/41270698/how-to-use-root-mean-square-error-for-optimizing-neural-network-in-scikit-learn/41271351#41271351", "title": "How to use Root Mean Square Error for optimizing Neural Network in Scikit-Learn?", "body": "<blockquote>\n  <p>First confusing thing to me is that the same program is giving different RMS error at different run. Why? I am not getting it.</p>\n</blockquote>\n\n<p>Neural networks are prone to <strong>local optima</strong>. There is never a guarantee you will learn anything decent, nor (as a consequence) that multiple runs lead to the same solution. Learning process is <strong>heavily</strong> random, depends on the initialization, sampling order etc. thus this kind of behaviour is <strong>expected</strong>.</p>\n\n<blockquote>\n  <p>In the documentation of MLPRegressor I could not find a way to directly hit the RMS error and keep the network running until I reach the desired RMS error.</p>\n</blockquote>\n\n<p>Neural networks in sklearn are extremely basic, and they do not provide this kind of flexibility. If you need to work with more complex settings you simply need more NN oriented library, like Keras, TF etc. scikit-learn community struggled a lot to even make this NN implementation \"in\", and it does not seem like they are going to add much more flexibility in near future.</p>\n\n<p>As a minor thing - use of \"minmaxscaler\" seem slightly odd. You should not \"fit_transform\" each time, you should fit only once, and later on - use transform (or inverse_transform). In particular, it should be</p>\n\n<pre><code>y_max_min_scaler = preprocessing.MinMaxScaler()\ny_scaled = y_max_min_scaler.fit_transform(y)\n\n...\n\npredicted_scaled = y_max_min_scaler.inverse_transform(predicted.reshape(-1, 1))\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 7327361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef2afeb99a7ca49b7c41951a488b0a51?s=128&d=identicon&r=PG&f=1", "display_name": "PARNAB SANYAL", "link": "https://stackoverflow.com/users/7327361/parnab-sanyal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2101, "favorite_count": 2, "accepted_answer_id": 41271351, "answer_count": 1, "score": 2, "last_activity_date": 1482370074, "creation_date": 1482349282, "last_edit_date": 1482370074, "question_id": 41270698, "link": "https://stackoverflow.com/questions/41270698/how-to-use-root-mean-square-error-for-optimizing-neural-network-in-scikit-learn", "title": "How to use Root Mean Square Error for optimizing Neural Network in Scikit-Learn?", "body": "<p>I am new to neural network so please pardon any silly question.\nI am working with a weather dataset. Here I am using Dewpoint, Humidity, WindDirection, WindSpeed to predict temperature. I have read several papers on this so I felt intrigued to do a research on my own.At first I am training the model with 4000 observations and then trying to predict next 50 temperature points.</p>\n\n<p>Here goes my entire code.</p>\n\n<pre><code>from sklearn.neural_network import MLPRegressor\nfrom sklearn.metrics import mean_squared_error\nfrom sklearn import preprocessing\nimport numpy as np\nimport pandas as pd\n\ndf = pd.read_csv('WeatherData.csv', sep=',', index_col=0)\n\nX = np.array(df[['DewPoint', 'Humidity', 'WindDirection', 'WindSpeed']])\ny = np.array(df[['Temperature']])\n\n# nan_array = pd.isnull(df).any(1).nonzero()[0]\n\nneural_net = MLPRegressor(\n    activation='logistic',\n    learning_rate_init=0.001,\n    solver='sgd',\n    learning_rate='invscaling',\n    hidden_layer_sizes=(200,),\n    verbose=True,\n    max_iter=2000,\n    tol=1e-6\n)\n# Scaling the data\nmax_min_scaler = preprocessing.MinMaxScaler()\nX_scaled = max_min_scaler.fit_transform(X)\ny_scaled = max_min_scaler.fit_transform(y)\n\n\nneural_net.fit(X_scaled[0:4001], y_scaled[0:4001].ravel())\n\npredicted = neural_net.predict(X_scaled[5001:5051])\n\n# Scale back to actual scale\nmax_min_scaler = preprocessing.MinMaxScaler(feature_range=(y[5001:5051].min(), y[5001:5051].max()))\npredicted_scaled = max_min_scaler.fit_transform(predicted.reshape(-1, 1))\n\nprint(\"Root Mean Square Error \", mean_squared_error(y[5001:5051], predicted_scaled))\n</code></pre>\n\n<p>First <strong>confusing</strong> thing to me is that the same program is giving different RMS error at different run. Why? I am not getting it.</p>\n\n<p>Run 1:</p>\n\n<pre><code>Iteration 1, loss = 0.01046558\nIteration 2, loss = 0.00888995\nIteration 3, loss = 0.01226633\nIteration 4, loss = 0.01148097\nIteration 5, loss = 0.01047128\nTraining loss did not improve more than tol=0.000001 for two consecutive epochs. Stopping.\nRoot Mean Square Error  22.8201171703\n</code></pre>\n\n<p>Run 2(Significant Improvement):</p>\n\n<pre><code>Iteration 1, loss = 0.03108813\nIteration 2, loss = 0.00776097\nIteration 3, loss = 0.01084675\nIteration 4, loss = 0.01023382\nIteration 5, loss = 0.00937209\nTraining loss did not improve more than tol=0.000001 for two consecutive epochs. Stopping.\nRoot Mean Square Error  2.29407183124\n</code></pre>\n\n<p>In the documentation of <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.neural_network.MLPRegressor.html\" rel=\"nofollow noreferrer\">MLPRegressor</a> I could not find a way to directly hit the RMS error and keep the network running until I reach the desired RMS error. What am I missing here?</p>\n\n<p>Please help!</p>\n"}, {"tags": ["python", "django", "python-2.7", "pip", "requirements.txt"], "comments": [{"owner": {"reputation": 1301, "user_id": 4400697, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/lBJ0w.jpg?s=128&g=1", "display_name": "nael", "link": "https://stackoverflow.com/users/4400697/nael"}, "edited": false, "score": 0, "creation_date": 1482359181, "post_id": 41270667, "comment_id": 69747337, "body": "Can you post your requirements.txt file and what version of pip are you using?"}], "answers": [{"tags": [], "owner": {"reputation": 511, "user_id": 2343086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ca66d31bfccd0ac4e6910c999bd5ce6d?s=128&d=identicon&r=PG", "display_name": "abdul qayyum", "link": "https://stackoverflow.com/users/2343086/abdul-qayyum"}, "is_accepted": false, "score": 0, "last_activity_date": 1482350716, "creation_date": 1482350716, "answer_id": 41271055, "question_id": 41270667, "link": "https://stackoverflow.com/questions/41270667/install-fails-with-requirements-txt-but-works-with-pip-install/41271055#41271055", "title": "Install fails with requirements.txt but works with pip install", "body": "<p>Can not go through your error message, but you can check if your requirements.txt contain packages that have dependencies on packages enlisted in same file. Suppose req file contain pack1 and pack2 if pack1 import pack2 and pack2 is called later then installation will fail. there is been problem with me and here is a similar <a href=\"https://github.com/pypa/pip/issues/25\" rel=\"nofollow noreferrer\">problem on github</a></p>\n"}, {"tags": [], "owner": {"reputation": 1967, "user_id": 2530680, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/smdbc.jpg?s=128&g=1", "display_name": "cjav_dev", "link": "https://stackoverflow.com/users/2530680/cjav-dev"}, "is_accepted": true, "score": 1, "last_activity_date": 1482360822, "creation_date": 1482360822, "answer_id": 41273282, "question_id": 41270667, "link": "https://stackoverflow.com/questions/41270667/install-fails-with-requirements-txt-but-works-with-pip-install/41273282#41273282", "title": "Install fails with requirements.txt but works with pip install", "body": "<p>The issue was that in the requirements.txt file there is a dependency on <code>lxml</code> and that dependency is setup to be installed without-threading so it looked like this</p>\n\n<p><code>lxml==3.5.0 --install-option='--without-threading'</code></p>\n\n<p>Any time <code>--install-option</code> (or <code>--build-options</code> or <code>--global-options</code>) are passed, that disables all use of wheels.</p>\n\n<p>In the case of <code>mailchimp3</code> it requires wheels to install correctly. </p>\n\n<p>Our solution was to move the installation of <code>lxml</code> into a separate build step.</p>\n"}], "owner": {"reputation": 1967, "user_id": 2530680, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/smdbc.jpg?s=128&g=1", "display_name": "cjav_dev", "link": "https://stackoverflow.com/users/2530680/cjav-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1331, "favorite_count": 0, "accepted_answer_id": 41273282, "answer_count": 2, "score": -2, "last_activity_date": 1482360822, "creation_date": 1482349153, "last_edit_date": 1495540427, "question_id": 41270667, "link": "https://stackoverflow.com/questions/41270667/install-fails-with-requirements-txt-but-works-with-pip-install", "title": "Install fails with requirements.txt but works with pip install", "body": "<p>I'm seeing some weird behavior when using requirements.txt vs. when installing directly with pip. Hoping you can shed some light on this.</p>\n\n<p>This may be the same as this unanswered question: <a href=\"https://stackoverflow.com/questions/29499175/pip-install-r-requirements-txt-fails-on-scipy-but-works-when-run-manually-line\">pip install -r requirements.txt fails on scipy, but works when run manually line-by-line</a></p>\n\n<p><strong>Python 2.7.6</strong></p>\n\n<p><strong>Django 1.6.11</strong></p>\n\n<p>When I install <code>mailchimp3</code> using requirements.txt like this:</p>\n\n<p><code>sudo /usr/local/python/django/bin/pip install -r config/myvr/requirements.txt</code></p>\n\n<p>The install fails and I see:</p>\n\n<p><code>\nCollecting mailchimp3==2.0.3 (from -r config/myvr/requirements.txt (line 73))\n2016-12-21 11:23:22,286 [salt.loaded.int.module.cmdmod][ERROR   ][1759] stderr: /usr/local/python/django/local/lib/python2.7/site-packages/pip/req/req_f\nile.py:129: UserWarning: Disabling all use of wheels due to the use of --build-options / --global-options / --install-options.\n  cmdoptions.check_install_build_global(options, opts)\n/usr/local/python/django/local/lib/python2.7/site-packages/pip/_vendor/requests/packages/urllib3/util/ssl_.py:90: InsecurePlatformWarning: A true SSLCon\ntext object is not available. This prevents urllib3 from configuring SSL appropriately and may cause certain SSL connections to fail. For more informati\non, see https://urllib3.readthedocs.org/en/latest/security.html#insecureplatformwarning.\n  InsecurePlatformWarning\n  Could not find a version that satisfies the requirement mailchimp3==2.0.3 (from -r config/myvr/requirements.txt (line 73)) (from versions: )\nNo matching distribution found for mailchimp3==2.0.3 (from -r config/myvr/requirements.txt (line 73))\n2016-12-21 11:23:22,286 [salt.loaded.int.module.cmdmod][ERROR   ][1759] retcode: 1\n</code></p>\n\n<p>However, when I install directly like this:\n<code>sudo /usr/local/python/django/bin/pip install mailchimp3==2.0.3</code></p>\n\n<p>The install succeeds:</p>\n\n<p><code>\n(django)ubuntu@dev:~/myvr$ sudo /usr/local/python/django/bin/pip install mailchimp3==2.0.3\nThe directory '/home/ubuntu/.cache/pip/http' or its parent directory is not owned by the current user and the cache has been disabled. Please check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.\nThe directory '/home/ubuntu/.cache/pip' or its parent directory is not owned by the current user and caching wheels has been disabled. check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.\nCollecting mailchimp3==2.0.3\n/usr/local/python/django/local/lib/python2.7/site-packages/pip/_vendor/requests/packages/urllib3/util/ssl_.py:318: SNIMissingWarning: An HTTPS request has been made, but the SNI (Subject Name Indication) extension to TLS is not available on this platform. This may cause the server to present an incorrect TLS certificate, which can cause validation failures. You can upgrade to a newer version of Python to solve this. For more information, see https://urllib3.readthedocs.io/en/latest/security.html#snimissingwarning.\n  SNIMissingWarning\n/usr/local/python/django/local/lib/python2.7/site-packages/pip/_vendor/requests/packages/urllib3/util/ssl_.py:122: InsecurePlatformWarning: A true SSLContext object is not available. This prevents urllib3 from configuring SSL appropriately and may cause certain SSL connections to fail. You can upgrade to a newer version of Python to solve this. For more information, see https://urllib3.readthedocs.io/en/latest/security.html#insecureplatformwarning.\n  InsecurePlatformWarning\n  Downloading mailchimp3-2.0.3-py2.py3-none-any.whl (83kB)\n    100% |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 92kB 413kB/s\nRequirement already satisfied: requests in /usr/local/python/django/lib/python2.7/site-packages (from mailchimp3==2.0.3)\nInstalling collected packages: mailchimp3\nSuccessfully installed mailchimp3-2.0.3\n(django)ubuntu@dev:~/myvr$\n</code></p>\n\n<p>This must be installed using the requirements file and not installed directly for our production environment. Any chance you have an idea of what's up here?</p>\n\n<p>Do you need any other information?</p>\n"}]