[{"tags": ["python", "error-handling", "iteration"], "comments": [{"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 1, "creation_date": 1539216271, "post_id": 52750262, "comment_id": 92424939, "body": "Second argument of <code>map</code> must be some sort of sequence (or iterable to generate sequence) of objects to which one by one the function in <code>map</code>s first argument is applied."}, {"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "reply_to_user": {"reputation": 4254, "user_id": 10255652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5DDj.jpg?s=128&g=1", "display_name": "vash_the_stampede", "link": "https://stackoverflow.com/users/10255652/vash-the-stampede"}, "edited": false, "score": 0, "creation_date": 1539216622, "post_id": 52750262, "comment_id": 92425019, "body": "@vash_the_stampede Well, it is syntactically correct and throws no error. This doesn&#39;t mean it makes much sense."}, {"owner": {"reputation": 4254, "user_id": 10255652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5DDj.jpg?s=128&g=1", "display_name": "vash_the_stampede", "link": "https://stackoverflow.com/users/10255652/vash-the-stampede"}, "reply_to_user": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1539216764, "post_id": 52750262, "comment_id": 92425051, "body": "@MichaelButscher then its fine"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10486827, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-InsoYrpUn1k/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUj0Os8MJ75n37-ZKaKVGugaQy4sA/mo/photo.jpg?sz=128", "display_name": "MichaelCracker", "link": "https://stackoverflow.com/users/10486827/michaelcracker"}, "edited": false, "score": 0, "creation_date": 1539216860, "post_id": 52750336, "comment_id": 92425080, "body": "I forgot to inform that i can&#39;t convert it between int and string and can&#39;t use list comprehension as part of the assignment."}, {"owner": {"reputation": 2565, "user_id": 7340948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c4f727ef85a90ec4f5ae954f8718017?s=128&d=identicon&r=PG&f=1", "display_name": "CJR", "link": "https://stackoverflow.com/users/7340948/cjr"}, "reply_to_user": {"reputation": 13, "user_id": 10486827, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-InsoYrpUn1k/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUj0Os8MJ75n37-ZKaKVGugaQy4sA/mo/photo.jpg?sz=128", "display_name": "MichaelCracker", "link": "https://stackoverflow.com/users/10486827/michaelcracker"}, "edited": false, "score": 0, "creation_date": 1539218068, "post_id": 52750336, "comment_id": 92425339, "body": "OK, that makes it harder. I&#39;ve edited the answer to give you some ideas for how you might go about this."}], "tags": [], "owner": {"reputation": 2565, "user_id": 7340948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c4f727ef85a90ec4f5ae954f8718017?s=128&d=identicon&r=PG&f=1", "display_name": "CJR", "link": "https://stackoverflow.com/users/7340948/cjr"}, "is_accepted": false, "score": 0, "last_activity_date": 1539218034, "last_edit_date": 1539218034, "creation_date": 1539216262, "answer_id": 52750336, "question_id": 52750262, "link": "https://stackoverflow.com/questions/52750262/hi-i-have-an-assigment-to-sum-all-the-digits-of-a-number-in-one-line-using-lamb/52750336#52750336", "title": "Hi, i have an assigment to sum all the digits of a number in one line using lambda and map in python", "body": "<p>Map takes a function and applies it over some iterable thing. You haven't given it an iterable thing, just a function.</p>\n\n<p>Try something like this</p>\n\n<pre><code>import math\n\nsum_of_digits = lambda x: sum([int(c) for c in str(x)])\n\nthe_value_of_a_specific_digit = lambda x, d: int(x / 10 ** d % 10)\nan_iterable_of_number_of_digits = lambda x: range(int(math.log(x, 10))+1)\na_combined_function = lambda x: sum(map(func, iterable))\n\ndef main():\n    print(sum_of_digits(104))\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 10486827, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-InsoYrpUn1k/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUj0Os8MJ75n37-ZKaKVGugaQy4sA/mo/photo.jpg?sz=128", "display_name": "MichaelCracker", "link": "https://stackoverflow.com/users/10486827/michaelcracker"}, "edited": false, "score": 0, "creation_date": 1539218426, "post_id": 52750384, "comment_id": 92425408, "body": "I forgot to inform that i can&#39;t convert it between int and string and can&#39;t use list comprehension as part of the assignment."}, {"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "reply_to_user": {"reputation": 13, "user_id": 10486827, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-InsoYrpUn1k/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUj0Os8MJ75n37-ZKaKVGugaQy4sA/mo/photo.jpg?sz=128", "display_name": "MichaelCracker", "link": "https://stackoverflow.com/users/10486827/michaelcracker"}, "edited": false, "score": 0, "creation_date": 1539249951, "post_id": 52750384, "comment_id": 92436389, "body": "@MichaelCracker: That is a major change to your question. You really should have asked a new, separate question, adding those new requirements. I&#39;ll leave this answer for reference but note that it does not answer the new version of your question."}], "tags": [], "owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "is_accepted": false, "score": 1, "last_activity_date": 1539249886, "last_edit_date": 1539249886, "creation_date": 1539216840, "answer_id": 52750384, "question_id": 52750262, "link": "https://stackoverflow.com/questions/52750262/hi-i-have-an-assigment-to-sum-all-the-digits-of-a-number-in-one-line-using-lamb/52750384#52750384", "title": "Hi, i have an assigment to sum all the digits of a number in one line using lambda and map in python", "body": "<p>(This answer was for a previous version of the question but does not meet the requirements of the new, edited version.)</p>\n\n<p>As others have pointed out, the cause of your error is that the second parameter to your <code>map</code> function is an integer, <code>a % 10</code>, but it is supposed to be an iterable.</p>\n\n<p>Here is a one-liner that satisfies your problem requirements: it creates a function that returns the sum of the digits of a non-negative integer, and uses both <code>lambda</code> and <code>map</code>. It also uses <code>int</code> and <code>str</code> but that does not go against your stated requirements. This works because <code>str(a)</code> returns a string, which is an iterable of the digits of the number. Each digit is a 1-character string, which must be converted to an integer before summing. The <code>map</code> does that conversion.</p>\n\n<pre><code>sum_of_digits = lambda a: sum(map(int, str(a)))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2565, "user_id": 7340948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c4f727ef85a90ec4f5ae954f8718017?s=128&d=identicon&r=PG&f=1", "display_name": "CJR", "link": "https://stackoverflow.com/users/7340948/cjr"}, "edited": false, "score": 0, "creation_date": 1539218941, "post_id": 52750573, "comment_id": 92425513, "body": "That&#39;s a pretty neat one. Haven&#39;t seen that before."}, {"owner": {"reputation": 13, "user_id": 10486827, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-InsoYrpUn1k/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUj0Os8MJ75n37-ZKaKVGugaQy4sA/mo/photo.jpg?sz=128", "display_name": "MichaelCracker", "link": "https://stackoverflow.com/users/10486827/michaelcracker"}, "edited": false, "score": 0, "creation_date": 1539220091, "post_id": 52750573, "comment_id": 92425724, "body": "nice,it even works without importing from <b>future</b>. can you try helping me with my line of thought?"}, {"owner": {"reputation": 3844, "user_id": 833881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/856cdb57da6d0b4758d597d30602fcd8?s=128&d=identicon&r=PG", "display_name": "kungphu", "link": "https://stackoverflow.com/users/833881/kungphu"}, "edited": false, "score": 0, "creation_date": 1539232781, "post_id": 52750573, "comment_id": 92428478, "body": "I think this is more readable as <code>sum_of_digits = lambda n: n if (n &lt; 10) else (n % 10) + sum_of_digits(n &#47;&#47; 10)</code>. It also runs one less call deep for arguments with a non-zero ones digit."}], "tags": [], "owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "is_accepted": false, "score": 0, "last_activity_date": 1539218915, "last_edit_date": 1539218915, "creation_date": 1539218525, "answer_id": 52750573, "question_id": 52750262, "link": "https://stackoverflow.com/questions/52750262/hi-i-have-an-assigment-to-sum-all-the-digits-of-a-number-in-one-line-using-lamb/52750573#52750573", "title": "Hi, i have an assigment to sum all the digits of a number in one line using lambda and map in python", "body": "<p>There's a fun little recursive version using <code>and</code>:</p>\n\n<pre><code>sum_of_digits = lambda n: n and n%10 + sum_of_digits(n//10)\n</code></pre>\n\n<p>If <code>n</code> is falsy (i.e. zero) it returns <code>n</code>, otherwise it returns the sum of the least significant digit and <code>n//10</code></p>\n\n<p>If you're using Python 2, you'll have to <code>from __future__ import division</code></p>\n"}], "owner": {"reputation": 13, "user_id": 10486827, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-InsoYrpUn1k/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUj0Os8MJ75n37-ZKaKVGugaQy4sA/mo/photo.jpg?sz=128", "display_name": "MichaelCracker", "link": "https://stackoverflow.com/users/10486827/michaelcracker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1539249886, "creation_date": 1539215462, "last_edit_date": 1539218094, "question_id": 52750262, "link": "https://stackoverflow.com/questions/52750262/hi-i-have-an-assigment-to-sum-all-the-digits-of-a-number-in-one-line-using-lamb", "title": "Hi, i have an assigment to sum all the digits of a number in one line using lambda and map in python", "body": "<p>In addition i can't convert int to string both ways and can't use list comprehension</p>\n\n<p>I keep getting the same error and i don't know how to deal with it...</p>\n\n<p>This is the code:</p>\n\n<pre><code>sum_of_digits = lambda a: map(lambda b, c: b + sum_of_digits(c) if a &gt; 10 else None, a % 10, a / 10) if a &gt; 10 else None\n\ndef main():\n    print(sum_of_digits(104))\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>And this is the error:</p>\n\n<pre><code>TypeError: argument 2 to map() must support iteration\n</code></pre>\n"}, {"tags": ["python", "django", "python-imaging-library"], "comments": [{"owner": {"reputation": 607, "user_id": 3648890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74fd952c77b8227881c7cc798e01018a?s=128&d=identicon&r=PG&f=1", "display_name": "NinjaKitty", "link": "https://stackoverflow.com/users/3648890/ninjakitty"}, "edited": false, "score": 0, "creation_date": 1539217169, "post_id": 52750259, "comment_id": 92425143, "body": "Which line are you getting the error?"}, {"owner": {"reputation": 333, "user_id": 6812140, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/17dda4460ef7ce6aefb32e0e8c8c2b77?s=128&d=identicon&r=PG&f=1", "display_name": "Dasith", "link": "https://stackoverflow.com/users/6812140/dasith"}, "reply_to_user": {"reputation": 607, "user_id": 3648890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74fd952c77b8227881c7cc798e01018a?s=128&d=identicon&r=PG&f=1", "display_name": "NinjaKitty", "link": "https://stackoverflow.com/users/3648890/ninjakitty"}, "edited": false, "score": 0, "creation_date": 1539217237, "post_id": 52750259, "comment_id": 92425165, "body": "@NinjaKitty This line:  image = Image.open(io.BytesIO(b))"}], "answers": [{"comments": [{"owner": {"reputation": 607, "user_id": 3648890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74fd952c77b8227881c7cc798e01018a?s=128&d=identicon&r=PG&f=1", "display_name": "NinjaKitty", "link": "https://stackoverflow.com/users/3648890/ninjakitty"}, "reply_to_user": {"reputation": 333, "user_id": 6812140, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/17dda4460ef7ce6aefb32e0e8c8c2b77?s=128&d=identicon&r=PG&f=1", "display_name": "Dasith", "link": "https://stackoverflow.com/users/6812140/dasith"}, "edited": false, "score": 0, "creation_date": 1539278574, "post_id": 52750484, "comment_id": 92454182, "body": "@Dasith I saw your edit, and I have to say that you should not use <code>eval</code>. Please use <code>ast.literal_eval</code> as it should give you the same result, but not as much of a security risk."}, {"owner": {"reputation": 333, "user_id": 6812140, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/17dda4460ef7ce6aefb32e0e8c8c2b77?s=128&d=identicon&r=PG&f=1", "display_name": "Dasith", "link": "https://stackoverflow.com/users/6812140/dasith"}, "edited": false, "score": 0, "creation_date": 1539278707, "post_id": 52750484, "comment_id": 92454250, "body": "oh ok. Thank you! I&#39;ll try it again."}], "tags": [], "owner": {"reputation": 607, "user_id": 3648890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74fd952c77b8227881c7cc798e01018a?s=128&d=identicon&r=PG&f=1", "display_name": "NinjaKitty", "link": "https://stackoverflow.com/users/3648890/ninjakitty"}, "is_accepted": true, "score": 0, "last_activity_date": 1539217705, "creation_date": 1539217705, "answer_id": 52750484, "question_id": 52750259, "link": "https://stackoverflow.com/questions/52750259/how-to-build-an-image-from-an-str-containing-the-binary-data/52750484#52750484", "title": "How to build an image from an str containing the binary data?", "body": "<p>I am not entirely sure what exactly is the best solution to this issue because the problem you're running into is that <code>json.load(imageFile)[\"IMAGE_DATA\"]</code> is going to return <code>\"b'bytes'\"</code>, which when it converts to bytearray, you're doing <code>bytearray(\"b\\'bytes\\'\")</code>, which is wrong.</p>\n\n<p>Also this behavior is specific between JSON parsers, and different JSON parsers might interpret differently</p>\n\n<p>Either strip the <code>b''</code> that's wrapping your bytestring, or do an <code>ast.literal_eval()</code></p>\n\n<pre><code>def test_view(request):\n    with open(\"test_json.json\") as imageFile:\n        b = bytearray(\n            ast.literal_eval(\n                json.load(imageFile)[\"IMAGE_DATA\"], 'utf8')\n\n        print(b)\n\n    image = Image.open(io.BytesIO(b))\n    response = HttpResponse(content_type=\"image/jpeg\")\n    image.save(response, \"JPEG\")\n    return response\n</code></pre>\n"}], "owner": {"reputation": 333, "user_id": 6812140, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/17dda4460ef7ce6aefb32e0e8c8c2b77?s=128&d=identicon&r=PG&f=1", "display_name": "Dasith", "link": "https://stackoverflow.com/users/6812140/dasith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 52750484, "answer_count": 1, "score": 2, "last_activity_date": 1539217705, "creation_date": 1539215432, "question_id": 52750259, "link": "https://stackoverflow.com/questions/52750259/how-to-build-an-image-from-an-str-containing-the-binary-data", "title": "How to build an image from an str containing the binary data?", "body": "<p>I have a byte string, and trying to convert it into a file but I keep getting an error:</p>\n\n<pre><code>OS Error cannot identify image file &lt;_io.BytesIO object at 0x03BBD330&gt;\n</code></pre>\n\n<p>The code that I've implemented is below:</p>\n\n<pre><code>def test_view(request):\n    with open(\"test_json.json\") as imageFile:\n        b=bytearray(json.load(imageFile)[\"IMAGE_DATA\"], 'utf8')\n\n        print(b)\n\n    image = Image.open(io.BytesIO(b))\n    response = HttpResponse(content_type=\"image/jpeg\")\n    image.save(response, \"JPEG\")\n    return response\n</code></pre>\n\n<p>The byte string is read from a json file, it looks like this, but it is much longer, I've just copied some characters.</p>\n\n<pre><code>\"b'\\\\xff\\\\xd8\\\\xff\\\\xe0\\\\x00\\\\x10JFIF\\\\x00\\\\x01\\\\x01\\\\x01\\\\x00`\\\\x00`\\\\x00\\\\x00\\\\xff\\\\xdb\\\\x00C\\\\x00\\\\x05\\\\x04\\\\x04\\\\x04\\\\x04\\\\x03\\\\x05\\\\x04\\\\x04\\\\x04\\\\x06\\\\x05\\\\x05\\\\x06\\\\x08\\\\r\\\\x08\\\\x08\\\\x07\\\\x07\\\\x08\\\\x10\\\\x0b\\\\x0c\\\\t\\\\r\\\\x13\\\\x10\\\\x14\\\\x13\\\\x12\\\\x10\\\\x12\\\\x12\\\\x14\\\\x17\\\\x1d\\\\x19\\\\x14\\\\x16\\\\x1c\\\\x16\\\\x12\\\\x12\\\\x1a#\\\\x1a\\\\x1c\\\\x1e\\\\x1f!!!\\\\x14\\\\x19$\\\\'$ &amp;\\\\x1d ! \\\\xff\\\\xdb\\\\x00C\\\\x01\\\\x05\\\\x06\\\\x06\\\\x08\\\\x07\\\\x08\\\\x0f\\\\x08\\\\x08\\\\x0f \\\\x15\\\\x12\\\\x15                                                  \\\\xff\\\\xc0\\\\x00\\\\x11\\\\x08\\\\x01&amp;\\\\x02q\\\\x03\\\\x01\\\"\\\\x00\\\\x02\\\\x11\\\\x01\\\\x03\\\\x11\\\\x01\\\\xff\\\\xc4\\\\x00\\\\x1f\\\\x00\\\\x00\\\\x01\\\\x05\\\\x01\\\\x01\\\\x01\\\\x01\\\\x01\\\\x01\\\\x00\\\\x00\\\\x00\\\\x00\\\\x00\\\\x00\\\\x00\\\\x00\\\\x01\\\\x02\\\\x03\\\\x04\\\\x05\\\\x06\\\\x07\\\\x08\\\\t\\\\n\\\\x0b\\\\xff\\\\xc4\\\\x00\\\\xb5\\\\x10\\\\x00\\\\x02\\\\x01\\\\x03\\\\x03\\\\x02\\\\x04\\\\x03\\\\x05\\\\x05\\\\x04\\\\x04\\\\x00\\\\x00\\\\x01}\\\\x01\\\\x02\\\\x03\\\\x00\\\\x04\\\\x11\\\\x05\\\\x12!1A\\\\x06\\\\x13Qa\\\\x07\\\"q\\\\x142\\\\x81\\\\x91\\\\xa1\\\\x08#B\\\\xb1\\\\xc1\\\\x15R\\\\xd1\\\\xf0$3br\\\\x82\\\\t\\\\n\\\\x16\\\\x17\\\\x18\\\\x19\\\\x1a%&amp;\\\\'()*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz\\\\x83\\\\x84\\\\x85\\\\x86\\\\x87\\\\x88\\\\x89\\\\x8a\\\\x92\\\\x93\\\\x94\\\\x95\\\\x96\\\\x97\\\\x98\\\\x99\\\\x9a\\\\xa2\\\\xa3\\\\xa4\\\\xa5\\\\xa6\\\\xa7\\\\xa8\\\\xa9\\\\xaa\\\\xb2\\\\xb3\\\\xb4\\\\xb5\\\\xb6\\\\xb7\\\\xb8\\\\xb9\\\\xba\\\\xc2\\\\xc3\\\\xc4\\\\xc5\\\\xc6\\\\xc7\\\\xc8\\\\xc9\\\\xca\\\\xd2\\\\xd3\\\\xd4\\\\xd5\\\\xd6\\\\xd7\\\\xd8\\\\xd9\\\\xda\\\\xe1\\\\xe2\\\\xe3\\\\xe4\\\\xe5\\\\xe6\\\\xe7\\\\xe8\\\\xe9\\\\xea\\\\xf1\\\\xf2\\\\xf3\\\\xf4\\\\xf5\\\\xf6\\\\xf7\\\\xf8\\\\xf9\\\\xfa\\\\xff\\\\xc4\\\\x00\\\\x1f\\\\x01\\\\x00\\\\x03\\\\x01\\\\x01\\\\x01\\\\x01\\\\x01\\\\x01\\\\x01\\\\x01\\\\x01\\\\x00\\\\x00\\\\x00\\\\x00\\\\x00\\\\x00\\\\x01\\\\x02\\\\x03\\\\x04\\\\x05\\\\x06\\\\x07\\\\x08\\\\t\\\\n\\\\x0b\\\\xff\\\\xc4\\\\x00\\\\xb5\\\\x11\\\\x00\\\\x02\\\\x01\\\\x02\\\\x04\\\\x04\\\\x03\\\\x04\\\\x07\\\\x05\\\\x04\\\\x04\\\\x00\\\\x01\\\\x02w\\\\x00\\\\x01\\\\x02\\\\x03\\\\x11\\\\x04\\\\x05!1\\\\x06\\\\x12AQ\\\\x07aq\\\\x13\\\"2\\\\x81\\\\x08\\\\x14B\\\\x91\\\\xa1\\\\xb1\\\\xc1\\\\t#3R\\\\xf0\\\\x15br\\\\xd1\\\\n\\\\x16$4\\\\xe1%\\\\xf1\\\\x17\\\\x18\\\\x19\\\\x1a&amp;\\\\'()*56789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz\\\\x82\\\\x83\\\\x84\\\\x85\\\\x86\\\\x87\\\\x88\\\\x89\\\\x8a\\\\x92\\\\x93\\\\x94\\\\x95\\\\x96\\\\x97\\\\x98\\\\x99'\"\n</code></pre>\n"}, {"tags": ["python", "html", "loops", "selenium", "web-scraping"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 7406527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655fe294f8f96f4b74dea56e4b5ce96b?s=128&d=identicon&r=PG&f=1", "display_name": "BrianC", "link": "https://stackoverflow.com/users/7406527/brianc"}, "edited": false, "score": 0, "creation_date": 1539246820, "post_id": 52750499, "comment_id": 92434442, "body": "thanks again for your work! although part of the code keeps throwing up an error: races = driver.find_elements_by_class_name(&#39;time-location&#39;) Traceback (most recent call last):   File &quot;&lt;pyshell#18&gt;&quot;, line 1, in &lt;module&gt;     races = driver.find_elements_by_class_name(&#39;time-location&#39;) NameError: name &#39;driver&#39; is not defined"}, {"owner": {"reputation": 29, "user_id": 7406527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655fe294f8f96f4b74dea56e4b5ce96b?s=128&d=identicon&r=PG&f=1", "display_name": "BrianC", "link": "https://stackoverflow.com/users/7406527/brianc"}, "edited": false, "score": 0, "creation_date": 1539249138, "post_id": 52750499, "comment_id": 92435852, "body": "Yes I get SyntaxError: multiple statements found while compiling a single statement. If I try and run the code after the imports, i.e. from def races(main_url): I get SyntaxError: invalid syntax and it highlights &#39;def&#39; at the &#39;scrape(url): line of code."}, {"owner": {"reputation": 832, "user_id": 10321210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6440f6207ef22d725e12b1fb77e5d96d?s=128&d=identicon&r=PG&f=1", "display_name": "jxpython", "link": "https://stackoverflow.com/users/10321210/jxpython"}, "reply_to_user": {"reputation": 29, "user_id": 7406527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655fe294f8f96f4b74dea56e4b5ce96b?s=128&d=identicon&r=PG&f=1", "display_name": "BrianC", "link": "https://stackoverflow.com/users/7406527/brianc"}, "edited": false, "score": 0, "creation_date": 1539249284, "post_id": 52750499, "comment_id": 92435958, "body": "The code is really fine. Make a new python file and copy my EXACT code and run it. You&#39;re doing something wrong"}, {"owner": {"reputation": 832, "user_id": 10321210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6440f6207ef22d725e12b1fb77e5d96d?s=128&d=identicon&r=PG&f=1", "display_name": "jxpython", "link": "https://stackoverflow.com/users/10321210/jxpython"}, "reply_to_user": {"reputation": 29, "user_id": 7406527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655fe294f8f96f4b74dea56e4b5ce96b?s=128&d=identicon&r=PG&f=1", "display_name": "BrianC", "link": "https://stackoverflow.com/users/7406527/brianc"}, "edited": false, "score": 0, "creation_date": 1539249377, "post_id": 52750499, "comment_id": 92436017, "body": "Why would you have: from def race(main_url)? I never wrote it like that"}, {"owner": {"reputation": 29, "user_id": 7406527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655fe294f8f96f4b74dea56e4b5ce96b?s=128&d=identicon&r=PG&f=1", "display_name": "BrianC", "link": "https://stackoverflow.com/users/7406527/brianc"}, "edited": false, "score": 0, "creation_date": 1539250527, "post_id": 52750499, "comment_id": 92436778, "body": "No, I mean that&#39;s where I try and run the code &#39;from&#39; after the imports. I don&#39;t actually use the word &#39;from&#39; in the code. I&#39;ve copied and pasted line for line and still get - SyntaxError: invalid syntax - and it highlights the &#39;def&#39; for the scrape(url): line of the code"}, {"owner": {"reputation": 29, "user_id": 7406527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655fe294f8f96f4b74dea56e4b5ce96b?s=128&d=identicon&r=PG&f=1", "display_name": "BrianC", "link": "https://stackoverflow.com/users/7406527/brianc"}, "edited": false, "score": 0, "creation_date": 1539259291, "post_id": 52750499, "comment_id": 92442208, "body": "actually, sorry it&#39;s been posted above your ^^ the code copied and pasted exactly as I am pasting it in Python and getting the Syntax error."}, {"owner": {"reputation": 832, "user_id": 10321210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6440f6207ef22d725e12b1fb77e5d96d?s=128&d=identicon&r=PG&f=1", "display_name": "jxpython", "link": "https://stackoverflow.com/users/10321210/jxpython"}, "reply_to_user": {"reputation": 29, "user_id": 7406527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655fe294f8f96f4b74dea56e4b5ce96b?s=128&d=identicon&r=PG&f=1", "display_name": "BrianC", "link": "https://stackoverflow.com/users/7406527/brianc"}, "edited": false, "score": 0, "creation_date": 1539259396, "post_id": 52750499, "comment_id": 92442271, "body": "They are not the same. Notice the tabs on the lines. Make them EXACTLY the same."}, {"owner": {"reputation": 29, "user_id": 7406527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655fe294f8f96f4b74dea56e4b5ce96b?s=128&d=identicon&r=PG&f=1", "display_name": "BrianC", "link": "https://stackoverflow.com/users/7406527/brianc"}, "edited": false, "score": 0, "creation_date": 1539273830, "post_id": 52750499, "comment_id": 92451801, "body": "<a href=\"https://stackoverflow.com/questions/52764380/loop-not-working-as-its-throwing-up-a-syntax-error?noredirect=1#comment92451714_52764380\" title=\"loop not working as its throwing up a syntax error\">stackoverflow.com/questions/52764380/&hellip;</a> - took a screenshot as SO won&#39;t let me reproduce your code without adding indnents that are not part of your original code."}, {"owner": {"reputation": 15917, "user_id": 5211833, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Pyme2.jpg?s=128&g=1", "display_name": "Adriaan", "link": "https://stackoverflow.com/users/5211833/adriaan"}, "reply_to_user": {"reputation": 29, "user_id": 7406527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655fe294f8f96f4b74dea56e4b5ce96b?s=128&d=identicon&r=PG&f=1", "display_name": "BrianC", "link": "https://stackoverflow.com/users/7406527/brianc"}, "edited": false, "score": 1, "creation_date": 1539278097, "post_id": 52750499, "comment_id": 92453902, "body": "@BrianC I suspect something is going on in the copying process from this answer to your own terminal; tabs and spaces might be interchanged somewhere. Do check whether tabs and spaces are the same after you copied them as they are in this answer."}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 2, "creation_date": 1539279247, "post_id": 52750499, "comment_id": 92454554, "body": "Don&#39;t copy huge blocks of code like that into an interactive shell, these won&#39;t usually work. Save it to a .py file and execute that."}, {"owner": {"reputation": 29, "user_id": 7406527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655fe294f8f96f4b74dea56e4b5ce96b?s=128&d=identicon&r=PG&f=1", "display_name": "BrianC", "link": "https://stackoverflow.com/users/7406527/brianc"}, "edited": false, "score": 0, "creation_date": 1539552902, "post_id": 52750499, "comment_id": 92532734, "body": "Shout out to everyone who helped with this, but especially jxpython, who put the code together. As Andras Deak suggested I was just copying and pasting huge blocks of code before saving to .py executable file. This has now resolved the issue!! Cheers, all!!"}], "tags": [], "owner": {"reputation": 832, "user_id": 10321210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6440f6207ef22d725e12b1fb77e5d96d?s=128&d=identicon&r=PG&f=1", "display_name": "jxpython", "link": "https://stackoverflow.com/users/10321210/jxpython"}, "is_accepted": true, "score": 0, "last_activity_date": 1539217871, "creation_date": 1539217871, "answer_id": 52750499, "question_id": 52750222, "link": "https://stackoverflow.com/questions/52750222/create-a-loop-for-web-scraping-with-selenium-in-python/52750499#52750499", "title": "Create a loop for web scraping with selenium in python", "body": "<p>This will work. You can even change the date and the rest will be automatically be executed for you!</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support import expected_conditions\nfrom selenium.webdriver.support.ui import WebDriverWait\n\ndef races(main_url):\n    driver = webdriver.Chrome()\n    driver.get(main_url)\n    driver.implicitly_wait(2)\n\n    races = driver.find_elements_by_class_name('time-location')\n    races = [race.text[:5] for race in races]\n    races = [race.replace(':', '') for race in races]\n\n    driver.close()\n\n    return races\n\ndef scrape(url):\n    driver = webdriver.Chrome()\n    driver.get(url)\n    driver.implicitly_wait(2)\n    driver.find_elements_by_class_name('racecard-ajax-link')[1].click()\n\n    WebDriverWait(driver, 5).until(expected_conditions.presence_of_element_located((By.XPATH, '//*[@id=\"tab-racecard-sectional-times\"]/div/div[1]/div[1]/div[2]/div/button')))\n\n    for horse in driver.find_elements_by_class_name('card-item'):\n        horseName = horse.find_element_by_class_name('form-link').text\n        times = horse.find_elements_by_class_name('sectionals-time')\n        times = [time.text for time in times]\n        print('{}: {}'.format(horseName, times))\n    print()\n\n    driver.close()\n\ndef main():\n    date = '6-October-2018'\n    main_url = 'http://www.attheraces.com/racecard/Wolverhampton/' + date\n    for race in races(main_url):\n        url = main_url + '/' + race\n        print(url)\n        scrape(url)\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 7406527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655fe294f8f96f4b74dea56e4b5ce96b?s=128&d=identicon&r=PG&f=1", "display_name": "BrianC", "link": "https://stackoverflow.com/users/7406527/brianc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 821, "favorite_count": 0, "accepted_answer_id": 52750499, "answer_count": 1, "score": 0, "last_activity_date": 1539254324, "creation_date": 1539215108, "last_edit_date": 1539222595, "question_id": 52750222, "link": "https://stackoverflow.com/questions/52750222/create-a-loop-for-web-scraping-with-selenium-in-python", "title": "Create a loop for web scraping with selenium in python", "body": "<p>I want to create a loop so that I can scrape the individual time figures for each horse on all eight races from the at the races website.</p>\n\n<p>Below is an example of the first race (17:15) of eight:</p>\n\n<pre><code>from selenium import webdriver\n\nfrom selenium.webdriver.common.by import By\n\nfrom selenium.webdriver.support import expected_conditions\n\nfrom selenium.webdriver.support.ui import WebDriverWait\n\nurl = 'http://www.attheraces.com/racecard/Wolverhampton/6-October-2018/1715'\n\ndriver = webdriver.Chrome()\n\ndriver.get(url)\n\ndriver.implicitly_wait(2)\n\ndriver.find_element_by_xpath('//*[@id=\"racecard-tabs 1061960\"]/div[1]/div/div[1]/ul/li[2]/a').click()\n\nWebDriverWait(driver, 5).until(expected_conditions.presence_of_element_located((By.XPATH, '//*[@id=\"tab-racecard-sectional-times\"]/div/div[1]/div[1]/div[2]/div/button')))\n</code></pre>\n\n<p>The next race (17:45) would have the following url:</p>\n\n<pre><code>url = 'http://www.attheraces.com/racecard/Wolverhampton/6-October-2018/1745'\n</code></pre>\n\n<p>And the id in the following code keeps changing with the url</p>\n\n<pre><code>driver.find_element_by_xpath('//*[@id=\"racecard-tabs 1061961\"]/div[1]/div/div[1]/ul/li[2]/a').click()\n</code></pre>\n\n<p>So for the 17:15, the racecard-tabs becomes  1061960</p>\n\n<p>for the  17:45, the racecard-tabs becomes 1061961</p>\n\n<p>the 18:15, raecard-tabs becomes 1061963, and so on. </p>\n\n<p>Any help or advice is greatly appreciated. </p>\n"}, {"tags": ["python", "function"], "comments": [{"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1539215202, "post_id": 52750215, "comment_id": 92424698, "body": "&quot;format as a <i>f</i>loat&quot;"}, {"owner": {"reputation": 13849, "user_id": 2904896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428748f4b24cb77ed1745007d95e1ef6?s=128&d=identicon&r=PG", "display_name": "metatoaster", "link": "https://stackoverflow.com/users/2904896/metatoaster"}, "edited": false, "score": 0, "creation_date": 1539215302, "post_id": 52750215, "comment_id": 92424726, "body": "A <a href=\"https://stackoverflow.com/questions/48255952/f-string-list-comprehension-float-formatting\">similar question/answer</a>."}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1539215611, "post_id": 52750215, "comment_id": 92424790, "body": "<i>&quot;Does this have a name so I can look it up myself?</i>&quot; See <a href=\"https://docs.python.org/3.6/library/string.html#formatspec\" rel=\"nofollow noreferrer\"><code>6.1.3.1. Format Specification Mini-Language</code></a>."}, {"owner": {"reputation": 1, "user_id": 10486824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3390d53d3d929613407ff248e4a45b?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/10486824/j-doe"}, "edited": false, "score": 0, "creation_date": 1539246626, "post_id": 52750215, "comment_id": 92434323, "body": "Thank you so much!"}], "owner": {"reputation": 1, "user_id": 10486824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3390d53d3d929613407ff248e4a45b?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/10486824/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 292, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539215005, "creation_date": 1539215005, "question_id": 52750215, "link": "https://stackoverflow.com/questions/52750215/python-function-what-does-f-mean", "title": "Python function what does :f mean?", "body": "<pre><code>def fahrenheit_to_centigrade(deg_fahrenheit):\ndeg_c = (deg_fahrenheit - 32.)*5./9.\nreturn deg_c\n\nfor deg_F in [-40, -30, -20, -10, 0, 10, 50, 100]:\n    conv_temp = fahrenheit_to_centigrade(deg_F)\n    print(f\"{deg_F:f} degrees F is {conv_temp:f} degrees C\")\n</code></pre>\n\n<p>Above is a function I have been given (intro to python so I apologise in advance if this is a terribly stupid question). I don't understand the</p>\n\n<pre><code>:f\n</code></pre>\n\n<p>bit in the final print statement (after deg_F and conv_temp)? What does it mean? Does it modulate the outcome so the values are of the same sig.f / class? Does this have a name so I can look it up myself?</p>\n"}, {"tags": ["python", "excel", "openpyxl"], "comments": [{"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1539242180, "post_id": 52750173, "comment_id": 92432009, "body": "It looks like you have not even consulted the documents for the library,"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 7542156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c62914c9f143a886ca6a043c9d94685d?s=128&d=identicon&r=PG&f=1", "display_name": "Namratha", "link": "https://stackoverflow.com/users/7542156/namratha"}, "edited": false, "score": 0, "creation_date": 1539216865, "post_id": 52750365, "comment_id": 92425083, "body": "This is great! you mentioned about xlrd right? Could you give me the xlrd solution too? I dont mind using that if its simpler."}, {"owner": {"reputation": 178, "user_id": 3714404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGbSQ.png?s=128&g=1", "display_name": "Nerdrigo", "link": "https://stackoverflow.com/users/3714404/nerdrigo"}, "reply_to_user": {"reputation": 31, "user_id": 7542156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c62914c9f143a886ca6a043c9d94685d?s=128&d=identicon&r=PG&f=1", "display_name": "Namratha", "link": "https://stackoverflow.com/users/7542156/namratha"}, "edited": false, "score": 0, "creation_date": 1539217955, "post_id": 52750365, "comment_id": 92425311, "body": "@Namratha as you can see you get the number of rows from the start if you use xlrd, which is neat, you will not have that extra element at the end with a tuple of <code>None</code>s. The only drawback is that manipulating cells is not as intuitive with <code>xlrd</code> as <code>openpyxl</code> I usually use them both depending on the situation at hand."}, {"owner": {"reputation": 31, "user_id": 7542156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c62914c9f143a886ca6a043c9d94685d?s=128&d=identicon&r=PG&f=1", "display_name": "Namratha", "link": "https://stackoverflow.com/users/7542156/namratha"}, "edited": false, "score": 0, "creation_date": 1539218003, "post_id": 52750365, "comment_id": 92425324, "body": "Awesome! Thank you! But is there a way to grab the columns more dynamically, instead of hardcoding the values? I am talking about the lines &quot;testcase = ws.cell_value(i,0)         in_request = ws.cell_value(i,1)         req_change = ws.cell_value(i,2)&quot;. If I add another column, I have to manually change the code right? Instead, can that be more automated? I guess i&#39;ll have to go with a nested for loop in that case right?"}, {"owner": {"reputation": 178, "user_id": 3714404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGbSQ.png?s=128&g=1", "display_name": "Nerdrigo", "link": "https://stackoverflow.com/users/3714404/nerdrigo"}, "reply_to_user": {"reputation": 31, "user_id": 7542156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c62914c9f143a886ca6a043c9d94685d?s=128&d=identicon&r=PG&f=1", "display_name": "Namratha", "link": "https://stackoverflow.com/users/7542156/namratha"}, "edited": false, "score": 0, "creation_date": 1539219473, "post_id": 52750365, "comment_id": 92425612, "body": "@Namratha, yes you&#39;ll have to go with a nested loop in that case, I edited the answer for a more generic case. If you like the answer feel free to upvote or accept it ;)"}, {"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1539242228, "post_id": 52750365, "comment_id": 92432037, "body": "This is a poor and incorrect answer. <code>for row in ws</code> is sufficient."}, {"owner": {"reputation": 31, "user_id": 7542156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c62914c9f143a886ca6a043c9d94685d?s=128&d=identicon&r=PG&f=1", "display_name": "Namratha", "link": "https://stackoverflow.com/users/7542156/namratha"}, "edited": false, "score": 0, "creation_date": 1539280131, "post_id": 52750365, "comment_id": 92454981, "body": "Great! I think this is what I was looking for! Thanks much @Nerdrigo... Unfortunately my reputation is below 50, because of which I am not able to cast votes. :("}], "tags": [], "owner": {"reputation": 178, "user_id": 3714404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGbSQ.png?s=128&g=1", "display_name": "Nerdrigo", "link": "https://stackoverflow.com/users/3714404/nerdrigo"}, "is_accepted": false, "score": -2, "last_activity_date": 1539219220, "last_edit_date": 1539219220, "creation_date": 1539216633, "answer_id": 52750365, "question_id": 52750173, "link": "https://stackoverflow.com/questions/52750173/openpyxl-iterate-through-all-the-rows-and-get-the-row-data-in-a-tuple/52750365#52750365", "title": "openpyxl: Iterate through all the rows and get the row data in a tuple", "body": "<p>I think this task would be easier with <code>xlrd</code>. However, if you want to use <code>openpyxl</code>, then assuming that  <code>testcase_ID</code> is in column <code>A</code>, <code>input_request</code> in column <code>B</code>, and <code>request_change</code> in column <code>C</code> somehting like this might be what you are looking for:</p>\n\n<pre><code>import openpyxl as xl\n\n#Opening xl file\nwb = xl.load_workbook('PATH/TO/FILE.xlsx')\n#Select your sheet (for this example I chose active sheet)\nws = wb.active\n\n#Start row, where data begins\nrow = 2\ntestcase = '' #this is just so that you can enter while - loop\n\n#Initialiazing list\nfinal_list = []\n\n#With each iteration we get the value of testcase, if the cell is empty\n#tescase will be None, when that happens the while loop will stop\nwhile testcase is not None:\n\n    #Getting cell value, from columns A, B and C\n    #Iterating through rows 2, 3, 4 ... \n    testcase = ws['A' + str(row)].value\n    in_request = ws['B' + str(row)].value\n    req_change = ws['C' + str(row)].value\n\n    #Making tuple\n    row_tuple = (testcase, in_request, req_change)\n    #Adding tuple to list\n    final_list.append(row_tuple)\n\n    #Going to next row\n    row += 1\n\n#This is what you return, you don't want the last element\n#because it is tuple of None's\nprint(final_list[:-1])\n</code></pre>\n\n<p>If you want to do it with <code>xlrd</code> this is how I would do it:</p>\n\n<pre><code>import xlrd\n\n#Opening xl file\nwb = xlrd.open_workbook('PATH/TO/FILE.xlsx')\n#Select your sheet (for this example I chose first sheet)\n#you can also choose by name or something else\nws = wb.sheet_by_index(0)\n\n#Getting number of rows and columns\nnum_row = ws.nrows\nnum_col = ws.ncols\n\n#Initializing list\nfinal_list = []\n\n#Iterating over number of rows\nfor i in range(1,num_row):\n    #list of row values\n    row_values = []\n    #Iterating over number of cols\n    for j in range(num_col):  \n        row_values.append(ws.cell_value(i,j))\n\n    #Making tuple with row values\n    row_tuple = tuple(row_values)\n    #Adding tuple to list\n    final_list.append(row_tuple)\n\n\nprint(final_list)\n</code></pre>\n\n<p>Adding <code>xlrd</code> index specifications comments at the end for easy reading:</p>\n\n<ul>\n<li>Deleted if statement, when num_row is 1 then for-loop never happens</li>\n<li>xlrd indexes rows beginning at 0</li>\n<li>for row 2 we want index 1</li>\n<li>Columns are also zero-indexed (A=0, B=1, C=2...)</li>\n</ul>\n"}], "owner": {"reputation": 31, "user_id": 7542156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c62914c9f143a886ca6a043c9d94685d?s=128&d=identicon&r=PG&f=1", "display_name": "Namratha", "link": "https://stackoverflow.com/users/7542156/namratha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1987, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1562586657, "creation_date": 1539214698, "last_edit_date": 1562586657, "question_id": 52750173, "link": "https://stackoverflow.com/questions/52750173/openpyxl-iterate-through-all-the-rows-and-get-the-row-data-in-a-tuple", "title": "openpyxl: Iterate through all the rows and get the row data in a tuple", "body": "<p>How do I iterate through all the rows in an xls sheet, and get each row data in a tuple. So at the end of the iteration, I should have a list of tuples with each element in the list, being a tuple of row data.\nFor instance: This is the content of my spreadsheet:</p>\n\n<p><code>testcase_ID         input_request        request_change\n test_1A             test/request_1       YES\n test_2A             test/request_2       NO\n test_3A             test/request_3       YES\n test_4A             test/request_4       YES</code></p>\n\n<p>my final list should be:\n[(test_1A, test/request_1, YES), \n (test_2A, test/request_2, NO), \n (test_3A, test/request_3, YES), \n (test_4A, test/request_4, YES)]</p>\n\n<p>How can I do this in openpyxl?</p>\n"}, {"tags": ["python", "xml", "python-3.x", "lxml"], "comments": [{"owner": {"reputation": 41716, "user_id": 407651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e1f48e20177ed6c4c3197a9a92f48e5?s=128&d=identicon&r=PG", "display_name": "mzjn", "link": "https://stackoverflow.com/users/407651/mzjn"}, "edited": false, "score": 0, "creation_date": 1539273619, "post_id": 52750100, "comment_id": 92451701, "body": "You could try to use the <code>method=&quot;html&quot;</code> argument to <code>write()</code>."}, {"owner": {"reputation": 39, "user_id": 3502325, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/IBPgz.jpg?s=128&g=1", "display_name": "sbhatta", "link": "https://stackoverflow.com/users/3502325/sbhatta"}, "reply_to_user": {"reputation": 41716, "user_id": 407651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e1f48e20177ed6c4c3197a9a92f48e5?s=128&d=identicon&r=PG", "display_name": "mzjn", "link": "https://stackoverflow.com/users/407651/mzjn"}, "edited": false, "score": 0, "creation_date": 1539287318, "post_id": 52750100, "comment_id": 92458487, "body": "Well with <code>method=&quot;html&quot;</code> works but it again adds <code>&lt;&#47;p&gt;</code> where its not there. Say Original : <code>&lt;p name=&quot;param&quot;&#47;&gt;</code> to <code>&lt;p name=&quot;param&quot;&#47;&gt;&lt;&#47;p&gt;</code>. I don&#39;t want lxml to modify the given XML."}, {"owner": {"reputation": 41716, "user_id": 407651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e1f48e20177ed6c4c3197a9a92f48e5?s=128&d=identicon&r=PG", "display_name": "mzjn", "link": "https://stackoverflow.com/users/407651/mzjn"}, "edited": false, "score": 0, "creation_date": 1539321659, "post_id": 52750100, "comment_id": 92467342, "body": "AFAIK, there is no way to tell lxml &quot;don&#39;t change empty elements; keep the syntax exactly as it is in the input document&quot;."}], "owner": {"reputation": 39, "user_id": 3502325, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/IBPgz.jpg?s=128&g=1", "display_name": "sbhatta", "link": "https://stackoverflow.com/users/3502325/sbhatta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539323218, "creation_date": 1539214098, "last_edit_date": 1539323218, "question_id": 52750100, "link": "https://stackoverflow.com/questions/52750100/how-to-prevent-lxml-from-changing-empty-elements-when-writing-to-file", "title": "How to prevent lxml from changing empty elements when writing to file?", "body": "<p>Python lxml write is converting tag. Say:</p>\n\n<pre><code>&lt;p name=\"Param\"&gt;&lt;/p&gt;\n</code></pre>\n\n<p>To</p>\n\n<pre><code>&lt;p name=\"param\"/&gt;\n</code></pre>\n\n<p>My write method call is something like this:</p>\n\n<pre><code>treeobj.write('XYZ.xml', pretty_print=True, xml_declaration=True, encoding=\"UTF-8\")\n</code></pre>\n\n<p>I am having:</p>\n\n<p>Python 3.7 and lxml==4.2.5</p>\n\n<p>Now I don't want lxml write to change that. how can i prevent this ?</p>\n"}, {"tags": ["python", "django", "django-urls"], "comments": [{"owner": {"reputation": 4555, "user_id": 8046232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e3ba575c8b3e02aff4311da324f581?s=128&d=identicon&r=PG&f=1", "display_name": "Rocky Li", "link": "https://stackoverflow.com/users/8046232/rocky-li"}, "edited": false, "score": 0, "creation_date": 1539215230, "post_id": 52750095, "comment_id": 92424706, "body": "Fixed issue by moving to &#39;family&#39; and turning id to a get request and moving that path to the front of url list, still don&#39;t quite understand this behavior"}, {"owner": {"reputation": 2252, "user_id": 7654215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81374f7e9b250cdaf75cf92b6a6e883f?s=128&d=identicon&r=PG&f=1", "display_name": "seuling", "link": "https://stackoverflow.com/users/7654215/seuling"}, "edited": false, "score": 0, "creation_date": 1539220939, "post_id": 52750095, "comment_id": 92425884, "body": "Your <code>id</code> is str, not int?"}, {"owner": {"reputation": 1130, "user_id": 8966274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g6t6A.jpg?s=128&g=1", "display_name": "Bidhan Majhi", "link": "https://stackoverflow.com/users/8966274/bidhan-majhi"}, "edited": false, "score": 0, "creation_date": 1539240927, "post_id": 52750095, "comment_id": 92431383, "body": "Just check your link in the template with my_id is it according to your model? If you are adding slug, don&#39;t add it in the beginning, e.g. path(something/&lt;slug:..&gt;) or keep <code>path(&#39;&lt;slug:id&gt;&#39; , views.person, name=&quot;person&quot;),</code> at the end."}], "owner": {"reputation": 4555, "user_id": 8046232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e3ba575c8b3e02aff4311da324f581?s=128&d=identicon&r=PG&f=1", "display_name": "Rocky Li", "link": "https://stackoverflow.com/users/8046232/rocky-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1539214063, "creation_date": 1539214063, "question_id": 52750095, "link": "https://stackoverflow.com/questions/52750095/django-reverse-going-for-the-wrong-view-function", "title": "Django reverse going for the wrong view function", "body": "<p>I have the following url patterns defined in the <code>urls.py</code></p>\n\n<pre><code>urlpatterns = [\n    path('', views.index, name='index'),\n    path('start', views.start, name='start'),\n    path('&lt;slug:id&gt;' , views.person, name=\"person\"),\n    path('family/&lt;slug:id&gt;', views.family, name=\"family\")\n]\n</code></pre>\n\n<p>And the first 3 works just fine, for example if I call this link:</p>\n\n<pre><code>&lt;a href=\"{% url 'pops:person' id=my_id %}\"&gt;\n</code></pre>\n\n<p>Everything works fine and I go to the persons page, The other link such as start and index also works fine.</p>\n\n<p>But somehow if I do this link:</p>\n\n<pre><code>&lt;a href=\"{% url 'pops:family' id=my_id %}\"&gt;\n</code></pre>\n\n<p>Everything fails and throws a reverse not found error: </p>\n\n<pre><code>Reverse for 'index' with keyword arguments '{'id': 'BLAHBLAH'}' not found.\n</code></pre>\n\n<p>The problem is, I'm not even going for the <code>index</code>, Why is it reversing for <code>index</code> when it should be reversing for <code>family</code>? As a result, it's not even hitting the function defined in the views at all.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 3891, "user_id": 4585713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0163e6ba41d9dfd2c9d13c528c87e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "PMende", "link": "https://stackoverflow.com/users/4585713/pmende"}, "edited": false, "score": 1, "creation_date": 1539215312, "post_id": 52750090, "comment_id": 92424730, "body": "Super interesting. I can&#39;t imagine this is intended, and you might consider submitting an issue on <code>pandas</code>&#39; GitHub."}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 1, "creation_date": 1539219342, "post_id": 52750090, "comment_id": 92425596, "body": "pandas does some weird stuff when it reshapes the data. I found some odd behavior when <a href=\"https://stackoverflow.com/questions/50882090/why-does-transposing-a-dataframe-with-strings-and-timedeltas-convert-the-dtype\">transposing</a>"}], "answers": [{"comments": [{"owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "edited": false, "score": 0, "creation_date": 1539221914, "post_id": 52750894, "comment_id": 92426108, "body": "Thanks! Nice to see they fixed it! FYI, I found this when I was using <code>pandas</code> &#39;0.21.1&#39;"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 2, "last_activity_date": 1539221525, "creation_date": 1539221525, "answer_id": 52750894, "question_id": 52750090, "link": "https://stackoverflow.com/questions/52750090/categorical-dtype-changes-after-using-melt/52750894#52750894", "title": "Categorical dtype changes after using melt", "body": "<p>In <a href=\"https://github.com/pandas-dev/pandas/commit/9dc9d805fe58cf32a8a3c8ab2277517eaf73d4c6#diff-9d24108841e0a76fe806a808d84f4561\" rel=\"nofollow noreferrer\">source</a> code . 0.22.0(My old version)</p>\n\n<pre><code> for col in id_vars:\n        mdata[col] = np.tile(frame.pop(col).values, K)\n     mcolumns = id_vars + var_name + [value_name]\n</code></pre>\n\n<p>Which will return the datatype object with <code>np.tile</code>. </p>\n\n<p>It has been fixed in 0.23.4(After I update my <code>pandas</code>)</p>\n\n<pre><code>df.melt('Cat')\nOut[6]: \n  Cat variable  value\n0   A      L_1      1\n1   B      L_1      4\n2   C      L_1      7\n3   A      L_2      2\n4   B      L_2      5\n5   C      L_2      8\n6   A      L_3      3\n7   B      L_3      6\n8   C      L_3      9\ndf.melt('Cat').dtypes\nOut[7]: \nCat         category\nvariable      object\nvalue          int64\ndtype: object\n</code></pre>\n\n<p>More info how it fixed : </p>\n\n<pre><code>for col in id_vars:\n    id_data = frame.pop(col)\n    if is_extension_type(id_data): # here will return True , then become concat not np.tile\n        id_data = concat([id_data] * K, ignore_index=True)\n    else:\n        id_data = np.tile(id_data.values, K)\n    mdata[col] = id_data\n</code></pre>\n"}], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 0, "accepted_answer_id": 52750894, "answer_count": 1, "score": 5, "last_activity_date": 1539221525, "creation_date": 1539214010, "last_edit_date": 1539214362, "question_id": 52750090, "link": "https://stackoverflow.com/questions/52750090/categorical-dtype-changes-after-using-melt", "title": "Categorical dtype changes after using melt", "body": "<p>In answering <a href=\"https://stackoverflow.com/q/52749898/6671176\">this question</a>, I found that after using <code>melt</code> on a pandas dataframe, a column that was previously an ordered Categorical dtype becomes an <code>object</code>. Is this intended behaviour?</p>\n\n<p>Note: not looking for a solution, just wondering if there is any reason for this behaviour or if it's not intended behavior.</p>\n\n<p><strong>Example:</strong></p>\n\n<p>Using the following dataframe <code>df</code>:</p>\n\n<pre><code>  Cat  L_1  L_2  L_3\n0   A    1    2    3\n1   B    4    5    6\n2   C    7    8    9\n\ndf['Cat'] = pd.Categorical(df['Cat'], categories = ['C','A','B'], ordered=True)\n\n# As you can see `Cat` is a category\n&gt;&gt;&gt; df.dtypes\nCat    category\nL_1       int64\nL_2       int64\nL_3       int64\ndtype: object\n\nmelted = df.melt('Cat')\n\n&gt;&gt;&gt; melted\n  Cat variable  value\n0   A      L_1      1\n1   B      L_1      4\n2   C      L_1      7\n3   A      L_2      2\n4   B      L_2      5\n5   C      L_2      8\n6   A      L_3      3\n7   B      L_3      6\n8   C      L_3      9\n</code></pre>\n\n<p>Now, if I look at <code>Cat</code>, it's become an object:</p>\n\n<pre><code>&gt;&gt;&gt; melted.dtypes\nCat         object\nvariable    object\nvalue        int64\ndtype: object\n</code></pre>\n\n<p><strong>Is this intended?</strong></p>\n"}, {"tags": ["python", "python-idle"], "comments": [{"owner": {"reputation": 1271, "user_id": 4026629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca5c39c55fcfd19ca376038abf68a908?s=128&d=identicon&r=PG&f=1", "display_name": "JL_SO", "link": "https://stackoverflow.com/users/4026629/jl-so"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 1, "creation_date": 1539213730, "post_id": 52750046, "comment_id": 92424435, "body": "It&#39;s 32 spaces; possibly 31"}, {"owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 2, "creation_date": 1539213804, "post_id": 52750046, "comment_id": 92424443, "body": "what is in your ~/.idlerc/config-main.cfg?"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1539213894, "post_id": 52750046, "comment_id": 92424457, "body": "what version of idle is that? i cant get it to reproduce in mine ... with all of 2 minutes of trying"}, {"owner": {"reputation": 1271, "user_id": 4026629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca5c39c55fcfd19ca376038abf68a908?s=128&d=identicon&r=PG&f=1", "display_name": "JL_SO", "link": "https://stackoverflow.com/users/4026629/jl-so"}, "edited": false, "score": 0, "creation_date": 1539213913, "post_id": 52750046, "comment_id": 92424461, "body": "I can&#39;t find a file called config-main.cfg. I&#39;m on windows, BTW. Where might it be?"}, {"owner": {"reputation": 1271, "user_id": 4026629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca5c39c55fcfd19ca376038abf68a908?s=128&d=identicon&r=PG&f=1", "display_name": "JL_SO", "link": "https://stackoverflow.com/users/4026629/jl-so"}, "edited": false, "score": 0, "creation_date": 1539213937, "post_id": 52750046, "comment_id": 92424469, "body": "The version is 3.6.4"}, {"owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 2, "creation_date": 1539213950, "post_id": 52750046, "comment_id": 92424472, "body": "Probably in your user directory -- so like <code>C:\\Users\\&lt;your username&gt;\\.idlerc\\config-main.cfg</code>  It may be hidden?  I&#39;m not near a Windows box atm"}, {"owner": {"reputation": 1271, "user_id": 4026629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca5c39c55fcfd19ca376038abf68a908?s=128&d=identicon&r=PG&f=1", "display_name": "JL_SO", "link": "https://stackoverflow.com/users/4026629/jl-so"}, "edited": false, "score": 0, "creation_date": 1539214023, "post_id": 52750046, "comment_id": 92424485, "body": "Here is, thanks: <code>[Keys] name = Key Set 1 default = False</code>"}, {"owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 0, "creation_date": 1539214447, "post_id": 52750046, "comment_id": 92424561, "body": "I put a few more minutes into trying to reproduce it and I, too am jumping onto the consider-a-better-ide train.  For me, IDLE apparently puts tabs in, so..."}, {"owner": {"reputation": 1271, "user_id": 4026629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca5c39c55fcfd19ca376038abf68a908?s=128&d=identicon&r=PG&f=1", "display_name": "JL_SO", "link": "https://stackoverflow.com/users/4026629/jl-so"}, "edited": false, "score": 0, "creation_date": 1539214817, "post_id": 52750046, "comment_id": 92424632, "body": "I get the &quot;get a better IDE&quot; thing. I just wanted to check if there was an easy fix/solution, etc. What is a good lightweight IDE?  Using Eclipse with a plugin seems like using a sledgehammer to crack a nut."}, {"owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "edited": false, "score": 0, "creation_date": 1539215041, "post_id": 52750046, "comment_id": 92424673, "body": "If I may step in - <code>Spyder</code> is a well working IDE imo. It&#39;s part of <code>WinPython</code> and afaik of several other distributions, too."}, {"owner": {"reputation": 1271, "user_id": 4026629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca5c39c55fcfd19ca376038abf68a908?s=128&d=identicon&r=PG&f=1", "display_name": "JL_SO", "link": "https://stackoverflow.com/users/4026629/jl-so"}, "reply_to_user": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "edited": false, "score": 0, "creation_date": 1539215287, "post_id": 52750046, "comment_id": 92424716, "body": "Thanks @SpghttCd but the WinPython download is 444.6 MB.  Not so much a sledgehammer, more of a piledriver..."}, {"owner": {"reputation": 1271, "user_id": 4026629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca5c39c55fcfd19ca376038abf68a908?s=128&d=identicon&r=PG&f=1", "display_name": "JL_SO", "link": "https://stackoverflow.com/users/4026629/jl-so"}, "edited": false, "score": 0, "creation_date": 1539216089, "post_id": 52750046, "comment_id": 92424899, "body": "I&#39;ve just realised that I installed Anaconda3 a while ago; I&#39;m using Spyder now for the first time and I&#39;m happy with it. Thanks."}, {"owner": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "reply_to_user": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 0, "creation_date": 1539217406, "post_id": 52750046, "comment_id": 92425203, "body": "@jedwards Try <code>%USERPROFILE%</code>."}, {"owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 0, "creation_date": 1539288456, "post_id": 52750046, "comment_id": 92459031, "body": "I have used IDLE for over a decade and now help maintain it and I have never seen anything like this or a report like this.  Which version of Windows?  Which binary?  Please copy the first line IDLE displays.  I just installed 3.6.4 and see &quot;Python 3.6.4 (v3.6.4:d48eceb, Dec 19 2017, 06:04:45) [MSC v.1900 32 bit (Intel)] on win32&quot;.  Have you tried upgrading to a newer Python/IDLE release?  Did you try switching back to the default Windows keyset instead of your custom keyset?"}, {"owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "reply_to_user": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 0, "creation_date": 1539288580, "post_id": 52750046, "comment_id": 92459092, "body": "@jedwards Did you reproduce the reported behavior or not?"}, {"owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "reply_to_user": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 0, "creation_date": 1539295976, "post_id": 52750046, "comment_id": 92461895, "body": "@TerryJanReedy I couldn&#39;t get the 8 space tabs, no."}, {"owner": {"reputation": 1271, "user_id": 4026629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca5c39c55fcfd19ca376038abf68a908?s=128&d=identicon&r=PG&f=1", "display_name": "JL_SO", "link": "https://stackoverflow.com/users/4026629/jl-so"}, "reply_to_user": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 0, "creation_date": 1539296831, "post_id": 52750046, "comment_id": 92462101, "body": "@TerryJanReedy <code>Python 3.6.4 (v3.6.4:d48eceb, Dec 19 2017, 06:54:40) [MSC v.1900 64 bit (AMD64)] on win32</code>  I have been using Spyder for the last 24 hours, but being notified of new comments on this question has prompted me to check the behaviour is still occurring, and when starting IDLE up I am now not seeing it. I have no clue why the issue occurred; I had changed no settings (there is only one setting to change and that was already on 4 (which means presumably 4 spaces). So it will probably be forever a mystery."}, {"owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 0, "creation_date": 1548375407, "post_id": 52750046, "comment_id": 95529405, "body": "IDLE had a bug such that repeatedly entering code with certain kinds of syntax errors caused the automatic indents to grow.  This <i>might</i> have been the problem here.  This bug was fixed after 3.6.8/3.7.2 were released.  The fix will be in 3.7.3.  <a href=\"https://bugs.python.org/issue34055\" rel=\"nofollow noreferrer\">bugs.python.org/issue34055</a>"}], "owner": {"reputation": 1271, "user_id": 4026629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca5c39c55fcfd19ca376038abf68a908?s=128&d=identicon&r=PG&f=1", "display_name": "JL_SO", "link": "https://stackoverflow.com/users/4026629/jl-so"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539214075, "creation_date": 1539213572, "last_edit_date": 1592644375, "question_id": 52750046, "link": "https://stackoverflow.com/questions/52750046/why-is-idle-auto-indenting-by-a-massive-four-tabs-each-tab-appears-to-be-8-spac", "title": "Why is IDLE auto-indenting by a massive four tabs? Each tab appears to be 8 spaces, so it&#39;s indenting by 32 spaces", "body": "<p>When I hit <code>return</code>, I get an indent (actually the opposite of an indent, more of an outdent) of four tabs:</p>\n<p><a href=\"https://i.stack.imgur.com/uvGDY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uvGDY.png\" alt=\"FOUR TABS\" /></a></p>\n<p>Worse than this, it seems that each tab is 8 spaces, so that the resulting indent is humungous.\nWhy is this?  My settings seem to indicate four spaces, although there is no option to switch between spaces and tabs that I can see.\nI'm using version 3.6.4.\nContents of <code>.idlerc\\config-main.cfg</code>:</p>\n<pre><code>[Keys]\nname = Key Set 1\ndefault = False\n</code></pre>\n<p>Thanks in advance.</p>\n<p>Edit: One of the tabs shown using mouse click-drag:</p>\n<p><a href=\"https://i.stack.imgur.com/oSg1R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oSg1R.png\" alt=\"enter image description here\" /></a></p>\n<p>There are 4 of those.</p>\n"}, {"tags": ["python", "pandas", "loops"], "comments": [{"owner": {"reputation": 49880, "user_id": 1222578, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/daae63146dbed42f50cd56f7268c6260?s=128&d=identicon&r=PG", "display_name": "Marius", "link": "https://stackoverflow.com/users/1222578/marius"}, "edited": false, "score": 0, "creation_date": 1539213619, "post_id": 52750025, "comment_id": 92424410, "body": "Please try to include a simple <a href=\"https://stackoverflow.com/q/20109391/1222578\">example dataset</a> that shows what your data looks like."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5486516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d32ed4f165a51e7261160ac008348002?s=128&d=identicon&r=PG&f=1", "display_name": "user129818", "link": "https://stackoverflow.com/users/5486516/user129818"}, "edited": false, "score": 0, "creation_date": 1539214558, "post_id": 52750049, "comment_id": 92424584, "body": "I get that certain items could be removed with loc, but how would the script know the old v new items without checking each item against every other item? Or are you suggesting conditioning the df before appending the new item?"}, {"owner": {"reputation": 15, "user_id": 5486516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d32ed4f165a51e7261160ac008348002?s=128&d=identicon&r=PG&f=1", "display_name": "user129818", "link": "https://stackoverflow.com/users/5486516/user129818"}, "edited": false, "score": 0, "creation_date": 1539267665, "post_id": 52750049, "comment_id": 92447850, "body": "I think this will work but the actual dataset has good number of additional criteria, and adding a couple of criteria in the subset portion of <code>df[~df.duplicated(subset=[&#39;crit1&#39;], keep=&#39;last&#39;)]</code> seems like an easier way to go instead of repeated/levels of <code>groupby</code>"}, {"owner": {"reputation": 4592, "user_id": 1571826, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2fd1e91f14448fca131100f9c8f32f5a?s=128&d=identicon&r=PG", "display_name": "Def_Os", "link": "https://stackoverflow.com/users/1571826/def-os"}, "reply_to_user": {"reputation": 15, "user_id": 5486516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d32ed4f165a51e7261160ac008348002?s=128&d=identicon&r=PG&f=1", "display_name": "user129818", "link": "https://stackoverflow.com/users/5486516/user129818"}, "edited": false, "score": 0, "creation_date": 1539273863, "post_id": 52750049, "comment_id": 92451810, "body": "@user129818 Makes sense. Just note that <code>keep=&#39;last&#39;</code> keeps the last row encountered, which is not necessarily the <i>latest</i> row in terms of date/time."}], "tags": [], "owner": {"reputation": 4592, "user_id": 1571826, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2fd1e91f14448fca131100f9c8f32f5a?s=128&d=identicon&r=PG", "display_name": "Def_Os", "link": "https://stackoverflow.com/users/1571826/def-os"}, "is_accepted": false, "score": 1, "last_activity_date": 1539215332, "last_edit_date": 1539215332, "creation_date": 1539213587, "answer_id": 52750049, "question_id": 52750025, "link": "https://stackoverflow.com/questions/52750025/updating-pandas-row-without-iterrows/52750049#52750049", "title": "Updating Pandas row without iterrows", "body": "<p>This can be done using a <code>groupby</code> on the <code>crit1</code> and selecting the latest row, as such:</p>\n\n<pre><code>df.sort_values('date').groupby('crit1').tail(1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 5486516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d32ed4f165a51e7261160ac008348002?s=128&d=identicon&r=PG&f=1", "display_name": "user129818", "link": "https://stackoverflow.com/users/5486516/user129818"}, "edited": false, "score": 0, "creation_date": 1539265702, "post_id": 52750245, "comment_id": 92446343, "body": "This is perfect: elegant, and simple. Thanks so much I didn&#39;t know duplicated() existed!"}], "tags": [], "owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "is_accepted": true, "score": 1, "last_activity_date": 1539215320, "creation_date": 1539215320, "answer_id": 52750245, "question_id": 52750025, "link": "https://stackoverflow.com/questions/52750025/updating-pandas-row-without-iterrows/52750245#52750245", "title": "Updating Pandas row without iterrows", "body": "<p>IIUC, you can use <code>duplicated()</code> to create a boolean filter, so for a sample dataframe:</p>\n\n<pre><code>    crit1        date\n0   test1  01-01-2018\n1   test2  01-02-2018\n2   test3  01-03-2018\n3   test4  01-04-2018\n4   test5  01-05-2018\n5   test6  01-06-2018\n6   test3  01-07-2018\n7   test7  01-08-2018\n8   test8  01-09-2018\n9   test2  01-10-2018\n10  test9  01-11-2018\n</code></pre>\n\n<p>Simply do:</p>\n\n<pre><code>df[~df.duplicated(subset=['crit1'], keep='last')].reset_index(drop=True)\n</code></pre>\n\n<p>Yields:</p>\n\n<pre><code>   crit1        date\n0  test1  01-01-2018\n1  test4  01-04-2018\n2  test5  01-05-2018\n3  test6  01-06-2018\n4  test3  01-07-2018\n5  test7  01-08-2018\n6  test8  01-09-2018\n7  test2  01-10-2018\n8  test9  01-11-2018\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3329, "user_id": 6814154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76e235219baaddb83f38d12e6665fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Khalil Al Hooti", "link": "https://stackoverflow.com/users/6814154/khalil-al-hooti"}, "is_accepted": false, "score": 0, "last_activity_date": 1539218113, "creation_date": 1539218113, "answer_id": 52750520, "question_id": 52750025, "link": "https://stackoverflow.com/questions/52750025/updating-pandas-row-without-iterrows/52750520#52750520", "title": "Updating Pandas row without iterrows", "body": "<p>Probably the new entry has a date older than the one already existing. then doping simply by first or last might not be correct. </p>\n\n<p>another alternative is to drop the duplicate by finding the minimum entry.</p>\n\n<p>below is a worked out example.</p>\n\n<pre><code>import pandas as pd\n\ndate = pd.date_range(start='1/1/2018', end='1/5/2018')\n\ncrit = ['a', 'b', 'c', 'd', 'e']\n\ndf = pd.DataFrame({'crit':crit, 'date':date})\n\n# insert a new entry to df\ndf.loc[len(df)] = ['b', '1/6/2016']\n\n#convert date to datetime\ndf['date'] = pd.to_datetime(df['date'])\n\nprint(df, '\\n')\n\n\n#find the duplicated row in crit\n\nprint(df[df.duplicated('crit', keep=False)]['date'].min(), '\\n')\nprint(df['date'] != df[df.duplicated('crit', keep=False)]['date'].min())\n\n#apply \ndf[df['date'] != df[df.duplicated('crit', keep=False)]['date'].min()]\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/1Jec2.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1Jec2.jpg\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 15, "user_id": 5486516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d32ed4f165a51e7261160ac008348002?s=128&d=identicon&r=PG&f=1", "display_name": "user129818", "link": "https://stackoverflow.com/users/5486516/user129818"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 52750245, "answer_count": 3, "score": 0, "last_activity_date": 1539218113, "creation_date": 1539213381, "question_id": 52750025, "link": "https://stackoverflow.com/questions/52750025/updating-pandas-row-without-iterrows", "title": "Updating Pandas row without iterrows", "body": "<p>I have a local dataframe that gets appended with new entries daily. Once in a while, an old entry is updated. The give away is a bunch of columns will match, but the timestamp is more recent. </p>\n\n<p>With the goal of removing the old entry, and keeping the new (updated) entry, I append the new entry and then \"clean\" the dataframe by looping through the rows and finding the old entry:</p>\n\n<pre><code>del_rows=[]\ndf2 = df.copy()\nfor index, row in df.iterrows():\n    for index2, row2 in df2.iterrows():\n        if row[\"crit1\"]==row2[\"crit1\"] and row[\"date\"] &gt; row2[\"date\"]:\n            del_rows.append(index2)\n\ndf = df.drop(df.index[del_rows])\n</code></pre>\n\n<p>While functional, I'd love to know the more \"pandas\" way of going about this process. I know that <code>apply</code> and NumPy vectorization are faster; however, I can't think of a function that would achieve this that I could map <code>apply</code> to, or a way to use the vectorization given different data types.</p>\n"}, {"tags": ["python", "visual-studio-code"], "answers": [{"tags": [], "owner": {"reputation": 11092, "user_id": 116095, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/cedf2afd8c10019d52565f0a07617586?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/116095/jim"}, "is_accepted": true, "score": 1, "last_activity_date": 1539228522, "creation_date": 1539228522, "answer_id": 52751735, "question_id": 52749982, "link": "https://stackoverflow.com/questions/52749982/vs-code-cant-find-activated-virtualenv/52751735#52751735", "title": "VS Code can&#39;t find activated virtualenv", "body": "<p>The problem was that I had this setting in my .bashrc file:</p>\n\n<pre><code>PIP_REQUIRE_VIRTUALENV=true\n</code></pre>\n\n<p>It should be set to false per this other stackoverflow <a href=\"https://stackoverflow.com/questions/16460313/pip-could-not-find-an-activated-virtualenv-required\">question</a>.</p>\n"}], "owner": {"reputation": 11092, "user_id": 116095, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/cedf2afd8c10019d52565f0a07617586?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/116095/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2551, "favorite_count": 0, "accepted_answer_id": 52751735, "answer_count": 1, "score": 2, "last_activity_date": 1539228522, "creation_date": 1539213076, "last_edit_date": 1539213634, "question_id": 52749982, "link": "https://stackoverflow.com/questions/52749982/vs-code-cant-find-activated-virtualenv", "title": "VS Code can&#39;t find activated virtualenv", "body": "<p>I am trying to run some Python code in Visual Studio Code.  When I first save the file, say to fibonacci.py, I get a popup window that says,</p>\n\n<pre><code>    Linter pylint is not installed.\n</code></pre>\n\n<p>It also displays three buttons: Install, Disable pylint, and Disable linting.  If I click Install, I get the following error message:</p>\n\n<pre><code>    $ /Users/me/.pyenv/versions/3.6.5/bin/python -m pip -U pylint\n    Could not find an activated virtualenv (required).\n</code></pre>\n\n<p>I can't see to get rid of this error message.</p>\n\n<p>Here were the steps I took to set up my project:</p>\n\n<ol>\n<li>Installed the Python 3.6.5 interpreter: <code>pyenv install 3.6.5</code>.</li>\n<li>Created a directory for the project.</li>\n<li>Changed to that directory and ran <code>pyenv local 3.6.5</code> to set the interpreter for that folder.  This created a .python-version file containing the string \"3.6.5\" as expected.</li>\n<li>Also created a virtualenv by running <code>pyenv virtualenv 3.6.5 py365</code> and <code>pyenv activate py365</code>.</li>\n<li>Opened the directory in VS Code: <code>code .</code></li>\n<li>From the Command Palette, I selected <code>Python: Select interpreter</code> and selected the interpreter for the folder that I set above in step 3.</li>\n<li>From the Command Palette, I then ran <code>Python: Create Terminal</code> to open a terminal window.</li>\n</ol>\n\n<p>It's at this point that if I create a new file and save it as fibonacci.py that I get the Linter message and the subsequent error message when I try to install the linter.</p>\n\n<p>What's confusing to me is that the Code documentation <a href=\"https://code.visualstudio.com/docs/python/environments#_activate-an-environment-in-the-terminal\" rel=\"nofollow noreferrer\">Activate an environment in the Terminal</a> talks about selecting an interpreter but then it seems to refer to the interpreter as an environment too.  I thought that those are two different things, the interpreter being the Python interpreter and the environment the virtual environment where the packages you want to use for your project are installed.  The doc goes on to say you should use \"Python: Create Terminal\" to automatically activate the environment, but I did that in step 7 above.</p>\n\n<p>Furthermore, the next paragraph \"Where the extension looks for environments\" says one of the locations is \"Interpreters installed by pyenv\".  But as I said above, I used pyenv to specify the 3.6.5 interpreter which created the .python-version file in the project folder.  Isn't this what the document is talking about?</p>\n\n<p>What am I not understanding?</p>\n"}, {"tags": ["javascript", "python", "html", "beautifulsoup"], "comments": [{"owner": {"reputation": 154, "user_id": 9067271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74824d2cb6faf9226e0a2775943812b2?s=128&d=identicon&r=PG&f=1", "display_name": "misterflister", "link": "https://stackoverflow.com/users/9067271/misterflister"}, "edited": false, "score": 0, "creation_date": 1539213127, "post_id": 52749976, "comment_id": 92424292, "body": "Do you have a link to the data source?"}], "answers": [{"comments": [{"owner": {"reputation": 1133, "user_id": 6283073, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c7ae026b1a93bc8fadfb78934acdd2b7?s=128&d=identicon&r=PG&f=1", "display_name": "e.iluf", "link": "https://stackoverflow.com/users/6283073/e-iluf"}, "edited": false, "score": 0, "creation_date": 1539213714, "post_id": 52750009, "comment_id": 92424432, "body": "There are other &lt;li&gt; in the html, is the a way narrow it down to &lt;li&gt; inside id=&quot;goverment_funding&quot;"}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "reply_to_user": {"reputation": 1133, "user_id": 6283073, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c7ae026b1a93bc8fadfb78934acdd2b7?s=128&d=identicon&r=PG&f=1", "display_name": "e.iluf", "link": "https://stackoverflow.com/users/6283073/e-iluf"}, "edited": false, "score": 0, "creation_date": 1539214283, "post_id": 52750009, "comment_id": 92424533, "body": "@learner101 Please see my recent edit. The <code>&quot;government_funding&quot;</code> <code>div</code> object can be used."}, {"owner": {"reputation": 1133, "user_id": 6283073, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c7ae026b1a93bc8fadfb78934acdd2b7?s=128&d=identicon&r=PG&f=1", "display_name": "e.iluf", "link": "https://stackoverflow.com/users/6283073/e-iluf"}, "edited": false, "score": 0, "creation_date": 1539217429, "post_id": 52750009, "comment_id": 92425206, "body": "can you please explain the code, especially the return statement. I also discover that the subAgency is not being printed out"}], "tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": true, "score": 0, "last_activity_date": 1539214272, "last_edit_date": 1539214272, "creation_date": 1539213263, "answer_id": 52750009, "question_id": 52749976, "link": "https://stackoverflow.com/questions/52749976/python-beautiful-soup-retrieving-html-content-inside-and-element-id/52750009#52750009", "title": "Python Beautiful soup Retrieving html content inside and element id", "body": "<p>You can loop over the <code>li</code> tags and the subsequent <code>span</code> values, and use <code>re.findall</code> to access the data:</p>\n\n<pre><code>import re\ndef all_data(d):\n  a, b = [i.text for i in d.find_all('span')]\n  return [a, *re.findall('\\w+\\sthe\\s\\w+\\sof\\s\\w+\\s\\d+', d.text), b]\n\nresults = [all_data(b) for b in productsoup.find('div', {'id':'government_funding'}).find_all('li')]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[['$14,450', 'Thursday the 17th of August 2017', 'National Institutes Of Health'], ['$5,455', 'Thursday the 31st of August 2017', 'National Institutes Of Health'], ['$5,005', 'Tuesday the 8th of August 2017', 'National Institutes Of Health'], ['$5,005', 'Thursday the 17th of August 2017', 'National Institutes Of Health']]\n</code></pre>\n"}], "owner": {"reputation": 1133, "user_id": 6283073, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c7ae026b1a93bc8fadfb78934acdd2b7?s=128&d=identicon&r=PG&f=1", "display_name": "e.iluf", "link": "https://stackoverflow.com/users/6283073/e-iluf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 52750009, "answer_count": 1, "score": 0, "last_activity_date": 1539214272, "creation_date": 1539213029, "last_edit_date": 1539213345, "question_id": 52749976, "link": "https://stackoverflow.com/questions/52749976/python-beautiful-soup-retrieving-html-content-inside-and-element-id", "title": "Python Beautiful soup Retrieving html content inside and element id", "body": "<p>I am trying to scrape an HTML page </p>\n\n<pre><code> productsoup = BeautifulSoup(productdriver.page_source,\"lxml\");\n</code></pre>\n\n<p>This python script gives the html that contains the element id section below </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div style=\"padding-top: 10px;\" id=\"government_funding\"&gt;\r\n    &lt;h2&gt;Sampling of Recent Funding Actions/Set Asides&lt;/h2&gt;\r\n    &lt;p style=\"font-style: italic; font-size: .8em;\"&gt;In order by amount of set aside monies.&lt;/p&gt;\r\n    &lt;ul&gt;\r\n        &lt;li&gt;&lt;span style=\"color: green;\"&gt;$14,450&lt;/span&gt; - Thursday the 17th of August 2017&lt;br&gt;&lt;span style=\"font-weight: bold; font-size: 1.2em;\"&gt;National Institutes Of Health&lt;/span&gt; &lt;br&gt; NATIONAL INSTITUTES OF HEALTH NICHD&lt;br&gt;AVANTI POLAR LIPIDS:1109394 [17-010744]\r\n            &lt;hr&gt;\r\n        &lt;/li&gt;\r\n        &lt;li&gt;&lt;span style=\"color: green;\"&gt;$5,455&lt;/span&gt; - Thursday the 31st of August 2017&lt;br&gt;&lt;span style=\"font-weight: bold; font-size: 1.2em;\"&gt;National Institutes Of Health&lt;/span&gt; &lt;br&gt; NATIONAL INSTITUTES OF HEALTH NICHD&lt;br&gt;AVANTI POLAR LIPIDS:1109394 [17-004567]\r\n            &lt;hr&gt;\r\n        &lt;/li&gt;\r\n        &lt;li&gt;&lt;span style=\"color: green;\"&gt;$5,005&lt;/span&gt; - Tuesday the 8th of August 2017&lt;br&gt;&lt;span style=\"font-weight: bold; font-size: 1.2em;\"&gt;National Institutes Of Health&lt;/span&gt; &lt;br&gt; NATIONAL INSTITUTES OF HEALTH NIAID&lt;br&gt;CUSTOM LIPID SYNTHESIS (24:0-10:0 PE) 100 MG PACKAGED IN 10-10MG VIALS POWDER PER QUOTE #DQ-000665\r\n            &lt;hr&gt;\r\n        &lt;/li&gt;\r\n        &lt;li&gt;&lt;span style=\"color: green;\"&gt;$5,005&lt;/span&gt; - Thursday the 17th of August 2017&lt;br&gt;&lt;span style=\"font-weight: bold; font-size: 1.2em;\"&gt;National Institutes Of Health&lt;/span&gt; &lt;br&gt; NATIONAL INSTITUTES OF HEALTH NIAID&lt;br&gt;CUSTOM LIPID SYNTHESIS (24:0-10:0 PE) 100 MG PACKAGED IN 10-10MG VIALS POWDER PER QUOTE #DQ-000665\r\n            &lt;hr&gt;\r\n        &lt;/li&gt;\r\n    &lt;/ul&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>this is just a section of the html, this section is identified by id=\"government_funding\". for each of the li in id=\"goverment_funding\" print price, date, agency. So the output for one the li would be </p>\n\n<p>price = $14,450</p>\n\n<p>Date = 17th of August 2017</p>\n\n<p>Agency = National Institutes Of Health</p>\n\n<p>SubAgency = NATIONAL INSTITUTES OF HEALTH NICHD</p>\n\n<p>How could I code the output above?</p>\n\n<p>the link to the data source is this \n<a href=\"https://www.collierreporting.com/company/avanti-polar-lipids-inc-alabaster-al\" rel=\"nofollow noreferrer\">https://www.collierreporting.com/company/avanti-polar-lipids-inc-alabaster-al</a></p>\n"}, {"tags": ["python", "amazon-web-services", "amazon-ec2", "boto"], "comments": [{"owner": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "edited": false, "score": 0, "creation_date": 1539222198, "post_id": 52749959, "comment_id": 92426176, "body": "What is triggering the scale-out? It sounds like your instances are running specific jobs. Can instances run more than one job? If an instance self-terminates, will that stop some other jobs running? If an instance just runs one job and exits, why use Auto Scaling in the first place? Feel free to edit your question to provide more information."}, {"owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "edited": false, "score": 0, "creation_date": 1539222230, "post_id": 52749959, "comment_id": 92426182, "body": "If you detach from an autoscaling group another instance will be launched."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4080597, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RhuRaxnNUw4/AAAAAAAAAAI/AAAAAAAAADs/zM6L-Fmk7tI/photo.jpg?sz=128", "display_name": "Andrew Parmar", "link": "https://stackoverflow.com/users/4080597/andrew-parmar"}, "edited": false, "score": 0, "creation_date": 1539364500, "post_id": 52750984, "comment_id": 92489798, "body": "Thanks for this John. Worked well. Just want to clarify for others that this is for Boto3."}], "tags": [], "owner": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "is_accepted": true, "score": 0, "last_activity_date": 1539222477, "creation_date": 1539222477, "answer_id": 52750984, "question_id": 52749959, "link": "https://stackoverflow.com/questions/52749959/how-to-use-boto-to-self-terminate-instance-its-running-on/52750984#52750984", "title": "How to use Boto to self-terminate instance its running on?", "body": "<p>An instance can be removed from an Auto Scaling Group by using <a href=\"https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/autoscaling.html#AutoScaling.Client.detach_instances\" rel=\"nofollow noreferrer\"><code>detach_instances()</code></a>:</p>\n\n<blockquote>\n  <p>Removes one or more instances from the specified Auto Scaling group.</p>\n  \n  <p>After the instances are detached, you can manage them independent of the Auto Scaling group.</p>\n  \n  <p>If you do not specify the option to decrement the desired capacity, Amazon EC2 Auto Scaling launches instances to replace the ones that are detached.</p>\n</blockquote>\n\n<pre><code>response = client.detach_instances(\n    InstanceIds=[\n        'string',\n    ],\n    AutoScalingGroupName='string',\n    ShouldDecrementDesiredCapacity=True|False\n)\n</code></pre>\n\n<p>So, the steps would be:</p>\n\n<ul>\n<li>Obtain the Instance ID to be removed</li>\n<li>Call <code>detach_instances(InstanceIds=['i-xxx'], ShouldDecrementDesiredCapacity=True)</code></li>\n<li>Call <code>terminate_instances(InstanceIds=['i-xxx'])</code></li>\n</ul>\n\n<p>This can be run from the instance itself, or from anywhere on the Internet.</p>\n"}], "owner": {"reputation": 23, "user_id": 4080597, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RhuRaxnNUw4/AAAAAAAAAAI/AAAAAAAAADs/zM6L-Fmk7tI/photo.jpg?sz=128", "display_name": "Andrew Parmar", "link": "https://stackoverflow.com/users/4080597/andrew-parmar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "accepted_answer_id": 52750984, "answer_count": 1, "score": 0, "last_activity_date": 1539222477, "creation_date": 1539212917, "last_edit_date": 1539222031, "question_id": 52749959, "link": "https://stackoverflow.com/questions/52749959/how-to-use-boto-to-self-terminate-instance-its-running-on", "title": "How to use Boto to self-terminate instance its running on?", "body": "<p>I need to terminate an instance from an AutoScalingGroup as the policies ASG has are leaving the scaled out instances running longer than desired. I need to terminate said instance after its done running a python process.</p>\n\n<p>The code already uses Boto to access other AWS services, so I'm looking to leverage Boto to self-terminate. I have been told that I need to detach the instance from its ASG prior to terminate to avoid side effects.</p>\n\n<p>Any idea how I can go about doing this detachment and self-termination?</p>\n"}, {"tags": ["python", "selenium", "firefox"], "comments": [{"owner": {"reputation": 451, "user_id": 3170754, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000490076986/picture?type=large", "display_name": "Lafa", "link": "https://stackoverflow.com/users/3170754/lafa"}, "edited": false, "score": 0, "creation_date": 1539213922, "post_id": 52749947, "comment_id": 92424464, "body": "Could you provide the page or the page source? Screenshots might also help."}, {"owner": {"reputation": 93, "user_id": 10237461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7ZM6.jpg?s=128&g=1", "display_name": "P Song", "link": "https://stackoverflow.com/users/10237461/p-song"}, "reply_to_user": {"reputation": 451, "user_id": 3170754, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000490076986/picture?type=large", "display_name": "Lafa", "link": "https://stackoverflow.com/users/3170754/lafa"}, "edited": false, "score": 0, "creation_date": 1539214995, "post_id": 52749947, "comment_id": 92424669, "body": "I&#39;ve added source code to my post."}, {"owner": {"reputation": 451, "user_id": 3170754, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000490076986/picture?type=large", "display_name": "Lafa", "link": "https://stackoverflow.com/users/3170754/lafa"}, "edited": false, "score": 0, "creation_date": 1539215762, "post_id": 52749947, "comment_id": 92424833, "body": "It&#39;s still not clear what you want to do. What&#39;s the relationship between the html code you provided and the keys that you have? Does it mean that the answer for question 1, in the example, will be always &#39;a&#39;?"}, {"owner": {"reputation": 93, "user_id": 10237461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7ZM6.jpg?s=128&g=1", "display_name": "P Song", "link": "https://stackoverflow.com/users/10237461/p-song"}, "reply_to_user": {"reputation": 451, "user_id": 3170754, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000490076986/picture?type=large", "display_name": "Lafa", "link": "https://stackoverflow.com/users/3170754/lafa"}, "edited": false, "score": 0, "creation_date": 1539216814, "post_id": 52749947, "comment_id": 92425070, "body": "I want to loop through the keys and see if any of the keys are included in the html text. For example, &quot;spouse&quot; could be one of the keys and if it is in the html, I want to enter the value corresponding to &quot;spouse&quot; in the answer field. Yes the answer for 1 is always &#39;a&#39;."}], "answers": [{"tags": [], "owner": {"reputation": 451, "user_id": 3170754, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000490076986/picture?type=large", "display_name": "Lafa", "link": "https://stackoverflow.com/users/3170754/lafa"}, "is_accepted": true, "score": 0, "last_activity_date": 1539217222, "creation_date": 1539217222, "answer_id": 52750427, "question_id": 52749947, "link": "https://stackoverflow.com/questions/52749947/how-to-use-selenium-to-search-a-webpage-for-a-key-in-a-dictionary-fill-in-the-a/52750427#52750427", "title": "How to use selenium to search a webpage for a key in a dictionary, fill in the answer field with the corresponding value? (python, selenium)", "body": "<p>First you must find the question element. </p>\n\n<pre><code>q_element = driver.find_element_by_id(\"secu_ques\")\nquestion_strings = q_element.text.split(\" \")#get a list of words from the question sentence\n\nfor key in secuQA:\n    if key in question_strings:\n        ans = secuQA[key]\n        break\n</code></pre>\n\n<p>Naturally the keys you're using must be unique for being able to identify correctly the corresponding answer. \nLet me know if this helps.</p>\n"}], "owner": {"reputation": 93, "user_id": 10237461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7ZM6.jpg?s=128&g=1", "display_name": "P Song", "link": "https://stackoverflow.com/users/10237461/p-song"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 52750427, "answer_count": 1, "score": 1, "last_activity_date": 1539217222, "creation_date": 1539212803, "last_edit_date": 1539214975, "question_id": 52749947, "link": "https://stackoverflow.com/questions/52749947/how-to-use-selenium-to-search-a-webpage-for-a-key-in-a-dictionary-fill-in-the-a", "title": "How to use selenium to search a webpage for a key in a dictionary, fill in the answer field with the corresponding value? (python, selenium)", "body": "<p>I want to automatically answer a security question on a webpage. The question is chosen randomly from 6 questions. I have a dictionary whose keys and values correspond to the questions and answers respectively. I want to use selenium to search the webpage for the keys and if a key is found I want to enter in the answer field. Below is my failed attempt.</p>\n\n<pre><code>secuQA = {'a':1, 'b':2, 'c':3, 'd':4, 'e':5, 'f':6}\n\n# i want to loop through the keys in the secuQA and search the webpage for each of them \n\n# i think I will have to use: \nbrowser.find_element_by_name(keys)\n\n\n# if question contains a key in the dict, fill answer field w/ corresp value\nansElem = browser.find_element_by_id(\"secu_answ\")\nansElem.click()\nansElem.send_keys(secuQA[key])\n</code></pre>\n\n<p>Edit: Below is the source for the part of the webpage I thought was relevant.</p>\n\n<pre><code>&lt;form class=\"form_login\" id=\"vbsecques\" name=\"vbsecques\" method=\"post\" encType=\"multipart/form-data\"  action=\"fillquestions.aspx\"&gt;\n        &lt;label for=\"secu_ques\" class=\"\"&gt;Question 1 of 3:&lt;/label&gt;\n        &lt;div id=\"secu_ques\" class=\"\"&gt;\n            &lt;div id=\"secu_ques\" class=\"\"&gt;In what city did you meet your spouse/significant other?&lt;/div&gt;\n        &lt;/div&gt;\n        &lt;br /&gt;\n        &lt;label for=\"secu_answ\" class=\"\"&gt;Answer&lt;/label&gt;\n        &lt;input type=\"password\" id=\"secu_answ\" name=\"secu_answ\" class=\"form-control ehd_sec_ques\" placeholder=\"Answer\" autocomplete=\"off\" required autofocus /&gt;\n        &lt;input type=\"hidden\" id=\"lid\" name=\"lid\" value=\"1\" /&gt;\n        &lt;input type=\"hidden\" id=\"aflag\" name=\"aflag\" value=\"submit\" /&gt;\n        &lt;br /&gt;\n\n        &lt;br /&gt;\n        &lt;button class=\"btn btn-danger btn-block ehd_sec_ques\" type=\"submit\"&gt;Submit&lt;/button&gt;\n        &lt;br /&gt;\n    &lt;/form&gt;\n</code></pre>\n"}, {"tags": ["python", "pyzmail"], "comments": [{"owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 0, "creation_date": 1539212935, "post_id": 52749920, "comment_id": 92424243, "body": "<code>multipart&#47;alternative</code> (payload 0) is the content type <i>header</i> for what is likely the plaintext version of the email message, while <code>application&#47;octet-stream</code> is the header your attachment.  Your attachment will have other headers, one will be filename.  I&#39;m not familiar with the <code>pyzmail</code> module, but you may have some luck exploring <a href=\"http://www.magiksys.net/pyzmail/api/pyzmail.parse-module.html\" rel=\"nofollow noreferrer\">this section of the docs</a>:"}, {"owner": {"reputation": 381, "user_id": 10470463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qBjZ6.jpg?s=128&g=1", "display_name": "Pedroski", "link": "https://stackoverflow.com/users/10470463/pedroski"}, "reply_to_user": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 0, "creation_date": 1539234419, "post_id": 52749920, "comment_id": 92428871, "body": "Thanks! I&#39;ll read up. Someone told me I should use the imaplib module, but I can&#39;t seem to get that to work!"}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1539241060, "post_id": 52749920, "comment_id": 92431459, "body": "Relevant : <a href=\"https://stackoverflow.com/questions/38825943/mimemultipart-mimetext-mimebase-and-payloads-for-sending-email-with-file-atta\">mimemultipart-mimetext-mimebase-and-payloads-for-sending-ema&zwnj;&#8203;il-with-file-atta</a>"}], "owner": {"reputation": 381, "user_id": 10470463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qBjZ6.jpg?s=128&g=1", "display_name": "Pedroski", "link": "https://stackoverflow.com/users/10470463/pedroski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2318, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539213272, "creation_date": 1539212585, "last_edit_date": 1539213272, "question_id": 52749920, "link": "https://stackoverflow.com/questions/52749920/what-is-application-octet-stream-and-where-is-the-jpg", "title": "What is &#39;application/octet-stream&#39; and where is the .jpg?", "body": "<p>I'm trying to get .jpg files from emails. I sent myself an email with a photo. I am using the Idle3 shell. After logging in, the following successfully saves the photo to my computer. So later on, I want to adapt to use a loop.</p>\n\n<pre><code>rawMessage = server.fetch([59], ['BODY[]', 'FLAGS'])\n\nmessage = pyzmail.PyzMessage.factory(rawMessage[59][b'BODY[]'])\nlen(message.get_payload()) # response is 2\nattachment = message.get_payload()[1]\nattachment.get_content_type() # response is 'image/jpeg'\nopen(pathToFiles + 'rob.jpg', 'wb').write(attachment.get_payload(decode=True))\n</code></pre>\n\n<p>So then I look at another email <code>server.fetch([60], ['BODY[]', 'FLAGS'])</code>. I know there is a photo in there. I find this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt;&gt;&gt; len(message.get_payload())\n2\n&gt;&gt;&gt; attachment = message.get_payload()[1]\n&gt;&gt;&gt; attachment.get_content_type()\n'application/octet-stream'\n&gt;&gt;&gt; attachment = message.get_payload()[0]\n&gt;&gt;&gt; attachment.get_content_type() 'multipart/alternative'\n&gt;&gt;&gt;\n</code></pre>\n\n<p>These emails are sent by students from their mobile phones.\nIn this case, where is the photo? The payload has <code>len()</code> = 2, so one of those parts should be the photo, (I think).</p>\n\n<p>What is <code>'application/octet-stream'</code>?</p>\n\n<p>Somewhere in there must be the file name 'studentname.jpg'. I can download it with from the email using Thunderbird.</p>\n\n<p>How can I find the name of the file and the file?</p>\n"}, {"tags": ["python", "multithreading", "thread-safety"], "comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 2, "creation_date": 1539212885, "post_id": 52749912, "comment_id": 92424228, "body": "you &quot;access&quot;  it like any other python object ... if you want a better answer we will need a more realistic example of what you want to do when you &quot;access&quot; it"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1539214091, "post_id": 52749912, "comment_id": 92424500, "body": "You need to be very specific about what ways you want to &quot;control&quot; them (the threads). How that needs to be done will likely depend on those details."}, {"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1539214463, "post_id": 52749912, "comment_id": 92424563, "body": "There is no <code>kill</code> method for threads. If you want to kill a thread, you should have that thread check a variable occasionally. For example,  instead of <code>while True:</code>, use something like <code>while thread_1_keep_running:</code>, where <code>thread_1_keep_running</code> is a variable that you set to <code>True</code> or <code>False</code>."}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1539240477, "post_id": 52749912, "comment_id": 92431128, "body": "Read about <a href=\"https://docs.python.org/3/library/threading.html#condition-objects\" rel=\"nofollow noreferrer\">Condition Objects</a>"}, {"owner": {"reputation": 21, "user_id": 6305079, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JCd42.jpg?s=128&g=1", "display_name": "DrakoRod", "link": "https://stackoverflow.com/users/6305079/drakorod"}, "edited": false, "score": 0, "creation_date": 1539269357, "post_id": 52749912, "comment_id": 92449033, "body": "@JoranBeasleyI refer to &quot;access&quot; how I can in some time stop just the Thread 1 and change time sleep in Thread 2, and change a variable to Thread 3. But I don&#39;t understan how do that because the main program run in background in OS."}, {"owner": {"reputation": 21, "user_id": 6305079, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JCd42.jpg?s=128&g=1", "display_name": "DrakoRod", "link": "https://stackoverflow.com/users/6305079/drakorod"}, "edited": false, "score": 0, "creation_date": 1539269671, "post_id": 52749912, "comment_id": 92449273, "body": "actually, I read about how to safely stop Thread <a href=\"https://stackoverflow.com/questions/323972/is-there-any-way-to-kill-a-thread-in-python\" title=\"is there any way to kill a thread in python\">stackoverflow.com/questions/323972/&hellip;</a>,  but if my script with the main program start in background on OS, how I can send signals or access to this script or class if I make a class instead script??"}, {"owner": {"reputation": 21, "user_id": 6305079, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JCd42.jpg?s=128&g=1", "display_name": "DrakoRod", "link": "https://stackoverflow.com/users/6305079/drakorod"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1539270773, "post_id": 52749912, "comment_id": 92449985, "body": "@martineau I refer to control them, how to a stop someone, change variable, change sleep time if the main program is in background? How to send with other script a signal to specific thread??"}, {"owner": {"reputation": 21, "user_id": 6305079, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JCd42.jpg?s=128&g=1", "display_name": "DrakoRod", "link": "https://stackoverflow.com/users/6305079/drakorod"}, "reply_to_user": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1539271299, "post_id": 52749912, "comment_id": 92450312, "body": "@stovfl Thanks! I will read about that."}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1539273297, "post_id": 52749912, "comment_id": 92451486, "body": "<i>I refer to control them ...</i>, read <a href=\"https://docs.python.org/3/library/signal.html#module-signal\" rel=\"nofollow noreferrer\">Section: Signals and threads</a>."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1539276065, "post_id": 52749912, "comment_id": 92452834, "body": "&quot;..., and after that, how to control them.&quot; Don&#39;t think about it in terms of <i>controlling</i> threads. Think about how the threads can <i>cooperate</i> with each other to achieve some common purpose."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1539278511, "post_id": 52749912, "comment_id": 92454144, "body": "DrakoRod: You can&#39;t actually stop and then restart threads, but you can make them pause and optionally resume. See my answer to the question <a href=\"https://stackoverflow.com/questions/15729498/how-to-start-and-stop-thread\">How to start and stop thread?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 6305079, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JCd42.jpg?s=128&g=1", "display_name": "DrakoRod", "link": "https://stackoverflow.com/users/6305079/drakorod"}, "is_accepted": false, "score": 0, "last_activity_date": 1539288750, "creation_date": 1539288750, "answer_id": 52768221, "question_id": 52749912, "link": "https://stackoverflow.com/questions/52749912/what-is-the-correct-way-to-control-threads/52768221#52768221", "title": "What is the correct way to control threads?", "body": "<p>I understand now how to do, to resume the problem: I have a main program running in background and this main program have some threads. But I want with another script or program stop the main program with the threads safetly and in some cases pause and resume threads. </p>\n\n<p>I didn't have a correctly concept about how to use the Threads. I can stop or send signal to this threads from main program How?,with a database or config file.</p>\n\n<p>I updated my project with this changes: </p>\n\n<pre><code>import threading\nimport time\nimport sqlite3\n\ndef fun1(stop_event1):\n    while not stop_event1.is_set(): \n        print(\"Thread 1\")\n        time.sleep(1)\n\ndef fun2(stop_event2):\n    while not stop_event2.is_set(): \n        print(\"Thread 2\")\n        time.sleep(1)\n\ndef fun3(stop_event3):\n    while not stop_event3.is_set(): \n        print(\"Thread 3\")\n        time.sleep(1)\n\ndef main():\n    stop_event1 = threading.Event()\n    thread1 = threading.Thread(target=fun1, args=(stop_event1,))\n    thread1.daemon = True\n    thread1.start()\n\n    stop_event2 = threading.Event()\n    thread2 = threading.Thread(target=fun2, args=(stop_event2,))\n    thread2.daemon = True\n    thread2.start()\n\n    stop_event3 = threading.Event()\n    thread3 = threading.Thread(target=fun3, args=(stop_event3,))\n    thread3.daemon = True\n    thread3.start()\n\n    while True:\n        print(\"------------\")\n        print(\"Main program\")\n        print(\"------------\")\n        time.sleep(3)            \n        if alive_main():\n            print(\"Finish Threads\")\n            stop_event1.set()\n            stop_event2.set()\n            stop_event3.set()\n\n            print(\"Bye\")\n            break\n\n\ndef alive_main():\n    conn = sqlite3.connect('example.db')\n    c = conn.cursor()\n    c.execute('SELECT alive_main FROM config')\n    row = c.fetchone()\n    if row[0] == 1:\n        return True\n    else:\n        return False\n\nif __name__ == '__main__':\n    try:\n        main()\n    except (KeyboardInterrupt, SystemExit):\n        print(\"Terminated\")\n</code></pre>\n\n<p>If I want change with another class or script the state of my threads, I just change config table in my database y this take effect in the Threads, from main function. In this example if I stop correctly my threads and program just I update table, that's it.</p>\n\n<pre><code>sqlite&gt; UPDATE config SET alive_main = 1;\n</code></pre>\n\n<p>I need read about <a href=\"https://docs.python.org/3/library/signal.html#module-signal\" rel=\"nofollow noreferrer\">Signals</a> and <a href=\"https://docs.python.org/3/library/threading.html#condition-objects\" rel=\"nofollow noreferrer\">Condition Objects</a> to complement correctly Threads uses. </p>\n\n<p>Thanks everyone!</p>\n"}], "owner": {"reputation": 21, "user_id": 6305079, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JCd42.jpg?s=128&g=1", "display_name": "DrakoRod", "link": "https://stackoverflow.com/users/6305079/drakorod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539288750, "creation_date": 1539212544, "last_edit_date": 1539213766, "question_id": 52749912, "link": "https://stackoverflow.com/questions/52749912/what-is-the-correct-way-to-control-threads", "title": "What is the correct way to control threads?", "body": "<p>I need run 3 or 5 threads approx, this threads monitoring some activities in the OS. Because of this, the main program must be running in background. I've read many examples and explanations, but I'm not clear yet how to launch threads and main program in the background and after that, how to control them.</p>\n\n<p>I start threads in daemon mode from main program:</p>\n\n<pre><code>import threading\nimport time\n\ndef fun1():\n    while True:\n        print(\"Thread 1\")\n        time.sleep(1)\n\ndef fun2():\n    while True:\n        print(\"Thread 2\")\n        time.sleep(1)\n\ndef fun3():\n    while True:\n        print(\"Thread 3\")\n        time.sleep(1)\n\ndef main():\n    thread1 = threading.Thread(target=fun1)\n    thread1.daemon = True\n    thread1.start()\n\n    thread2 = threading.Thread(target=fun2)\n    thread2.daemon = True\n    thread2.start()\n\n    thread3 = threading.Thread(target=fun3)\n    thread3.daemon = True\n    thread3.start()\n\nif __name__ == '__main__':\n    try:\n        main()\n        while True:\n            print(\"------------\")\n            print(\"Main program\")\n            print(\"------------\")\n            time.sleep(3)\n    except (KeyboardInterrupt, SystemExit):\n        print(\"Terminated\")\n</code></pre>\n\n<p>and after that I run the <code>main</code> program in background with (I'm not sure that this is the best way to do it for what I want to achieve):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>python daemon_thread.py &amp;\n</code></pre>\n\n<p>How control the threads after main program initialization if I need stop a specific thread, change its state, or whatever? How to access a specific thread or the main program?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 699, "user_id": 6728958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2b8cbfe563cdfcd5524f9aff062e2a?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/6728958/chris"}, "edited": false, "score": 0, "creation_date": 1539213008, "post_id": 52749922, "comment_id": 92424264, "body": "I should have said that the columns don&#39;t follow alphabetical order"}, {"owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "reply_to_user": {"reputation": 699, "user_id": 6728958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2b8cbfe563cdfcd5524f9aff062e2a?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/6728958/chris"}, "edited": false, "score": 0, "creation_date": 1539213099, "post_id": 52749922, "comment_id": 92424288, "body": "Then the <code>stack</code> method I put as an alternative might be preferred, does that work? Otherwise, you could set <code>Cat</code> to be an ordered categorical variable, but that adds a whole separate step"}, {"owner": {"reputation": 699, "user_id": 6728958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2b8cbfe563cdfcd5524f9aff062e2a?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/6728958/chris"}, "edited": false, "score": 0, "creation_date": 1539213563, "post_id": 52749922, "comment_id": 92424397, "body": "I updated the labels so that they don&#39;t follow the alphabetical order. The simple sorting then doesn&#39;t give me the desired order of rows in the Label column"}, {"owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "reply_to_user": {"reputation": 699, "user_id": 6728958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2b8cbfe563cdfcd5524f9aff062e2a?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/6728958/chris"}, "edited": false, "score": 0, "creation_date": 1539214283, "post_id": 52749922, "comment_id": 92424532, "body": "See my update regarding ordered categoricals. Note I also asked <a href=\"https://stackoverflow.com/q/52750090/6671176\">a separate question</a> regarding the behaviour of melt, because for some reason, I can&#39;t keep the ordered categorical dtype after using melt, so I had to set it <i>after</i> using melt."}], "tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": true, "score": 2, "last_activity_date": 1539214197, "last_edit_date": 1539214197, "creation_date": 1539212590, "answer_id": 52749922, "question_id": 52749898, "link": "https://stackoverflow.com/questions/52749898/python-how-to-melt-dataframe-retaining-specific-order-custom-sorting/52749922#52749922", "title": "python: how to melt dataframe retaining specific order / custom sorting", "body": "<p>IIUC, you can use your exact same code and add <code>.sort_values('Cat')</code>, or more simply:</p>\n\n<pre><code>df.melt('Cat',var_name='Label',value_name='Value').sort_values('Cat')\n\n  Cat Label  Value\n0   A   L_1      1\n3   A   L_2      2\n6   A   L_3      3\n1   B   L_1      4\n4   B   L_2      5\n7   B   L_3      6\n2   C   L_1      7\n5   C   L_2      8\n8   C   L_3      9\n</code></pre>\n\n<p>If you want to order it in a custom manner (In the example below, <code>B</code> precedes <code>A</code> which precedes <code>C</code>), then you can set <code>Cat</code> to be an ordered categorical:</p>\n\n<pre><code>melted = df.melt('Cat',var_name='Label',value_name='Value')\n\nmelted['Cat'] = pd.Categorical(melted['Cat'], categories=['B','A','C'], ordered=True)\n\nmelted.sort_values('Cat')\n\n  Cat Label  Value\n1   B   L_1      4\n4   B   L_2      5\n7   B   L_3      6\n0   A   L_1      1\n3   A   L_2      2\n6   A   L_3      3\n2   C   L_1      7\n5   C   L_2      8\n8   C   L_3      9\n</code></pre>\n\n<p>An alternative is to use <code>stack</code>, but then you have to deal with annoying renaming of columns:</p>\n\n<pre><code>df.set_index('Cat').stack().reset_index().rename(columns={'level_1':'Label', 0:'Value'})\n\n  Cat Label  Value\n0   A   L_1      1\n1   A   L_2      2\n2   A   L_3      3\n3   B   L_1      4\n4   B   L_2      5\n5   B   L_3      6\n6   C   L_1      7\n7   C   L_2      8\n8   C   L_3      9\n</code></pre>\n"}], "owner": {"reputation": 699, "user_id": 6728958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2b8cbfe563cdfcd5524f9aff062e2a?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/6728958/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1356, "favorite_count": 1, "accepted_answer_id": 52749922, "answer_count": 1, "score": 1, "last_activity_date": 1539301677, "creation_date": 1539212362, "last_edit_date": 1539301677, "question_id": 52749898, "link": "https://stackoverflow.com/questions/52749898/python-how-to-melt-dataframe-retaining-specific-order-custom-sorting", "title": "python: how to melt dataframe retaining specific order / custom sorting", "body": "<p>I have a dataframe df</p>\n\n<pre><code>Cat  B_1 A_2 C_3\nA      1   2   3\nB      4   5   6\nC      7   8   9\n</code></pre>\n\n<p>which I want to convert into a dataframe so that the rows in column Label are following the order of df columns for each category.</p>\n\n<pre><code>Desired output\n\n    Cat Label Value\n    A     B_1    1\n    A     A_2    2\n    A     C_3    3\n    B     B_1    4\n    B     A_2    5\n    B     C_3    6\n    C     B_1    7\n    C     A_2    8\n    C     C_3    9  \n</code></pre>\n\n<p>when I try the </p>\n\n<pre><code>pd.melt(df, id_vars=[\"Cat\"], var_name=\"Label\",value_name=\"Value\")\n</code></pre>\n\n<p>I lose the desired order in column Label, the results are sorted like below,</p>\n\n<pre><code>Cat Label Value\nA     B_1    1\nB     B_1    4\nC     B_1    7\nA     A_2    2\n...\n</code></pre>\n\n<p><strong>Can the desired order of rows be forced in the melt function?\nif not, how can be this custom sorting achieved?</strong></p>\n\n<hr>\n\n<p>UPDATE</p>\n\n<p>I renamed the labels as they don't follow the alphabetical order, so that simple  sorting doesn't work</p>\n"}, {"tags": ["python", "pandas", "dataframe", "pandas-groupby", "cumulative-sum"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 7019904, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y_W2p9rxmIM/AAAAAAAAAAI/AAAAAAAAAVk/UM8nlgZ9mt8/photo.jpg?sz=128", "display_name": "kartriter", "link": "https://stackoverflow.com/users/7019904/kartriter"}, "edited": false, "score": 0, "creation_date": 1539222513, "post_id": 52750832, "comment_id": 92426256, "body": "Thank you @DSM. I updated the question as you pointed out. Your approach also works well so far. Only question is how can I apply it if I had to group by (say) 2 fields instead of one (b here)? For e.g. if the two grouping fields were b, p and I still wanted to sum a the same way to generate c&#39;s. Really appreciate your response."}, {"owner": {"reputation": 37, "user_id": 7019904, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y_W2p9rxmIM/AAAAAAAAAAI/AAAAAAAAAVk/UM8nlgZ9mt8/photo.jpg?sz=128", "display_name": "kartriter", "link": "https://stackoverflow.com/users/7019904/kartriter"}, "edited": false, "score": 0, "creation_date": 1539224318, "post_id": 52750832, "comment_id": 92426649, "body": "Nevermind @DSM. I concatenated the fields in my data into one field, sorted them and was able to achieve the same"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1566309076, "post_id": 52750832, "comment_id": 101610654, "body": "@DSM Would you take a look at this pandas multiindex potential bug?  <a href=\"https://stackoverflow.com/a/57574587/6361531\">stackoverflow.com/a/57574587/6361531</a>"}], "tags": [], "owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "is_accepted": true, "score": 0, "last_activity_date": 1539223079, "last_edit_date": 1539223079, "creation_date": 1539220973, "answer_id": 52750832, "question_id": 52749875, "link": "https://stackoverflow.com/questions/52749875/pandas-take-rolling-sum-of-next-1-n-rows-of-a-column-within-a-group-and-c/52750832#52750832", "title": "Pandas: Take rolling sum of next (1 ... n) rows of a column within a group and create a new column for each sum", "body": "<p>Your example dataframe doesn't match your expected output, so let's go with the latter.</p>\n\n<p>I think you can combine a rolling sum with a shift:</p>\n\n<pre><code>for x in range(1, 5):\n    c = pd.Series(df.groupby(\"b\")[\"a\"].rolling(x).sum().values, index=df.index)\n    df[f\"c{x}\"]= c.groupby(df[\"b\"]).shift(-x)\n</code></pre>\n\n<p>gives me</p>\n\n<pre><code>In [302]: df\nOut[302]: \n   a  b   c1    c2    c3    c4\n0  1  j  2.0   5.0   NaN   NaN\n1  2  j  3.0   NaN   NaN   NaN\n2  3  j  NaN   NaN   NaN   NaN\n3  4  k  5.0  11.0  18.0  26.0\n4  5  k  6.0  13.0  21.0   NaN\n5  6  k  7.0  15.0   NaN   NaN\n6  7  k  8.0   NaN   NaN   NaN\n7  8  k  NaN   NaN   NaN   NaN\n</code></pre>\n\n<p>If you really want to have multiple keys, you can use a list of keys, but we have to rearrange the call a little:</p>\n\n<pre><code>keys = [\"b\",\"b2\"]\nfor x in range(1, 5):\n    c = pd.Series(df.groupby(keys)[\"a\"].rolling(x).sum().values, index=df.index)\n    df[f\"c{x}\"]= c.groupby([df[k] for k in keys]).shift(-x)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>keys = [\"b\",\"b2\"]\nfor x in range(1, 5):\n    c = pd.Series(df.groupby(keys)[\"a\"].rolling(x).sum().values, index=df.index)\n    df[f\"c{x}\"]= df.assign(tmp=c).groupby(keys)[\"tmp\"].shift(-x)\n</code></pre>\n\n<p>give me</p>\n\n<pre><code>In [409]: df\nOut[409]: \n   a  b b2   c1    c2  c3  c4\n0  1  j  j  2.0   5.0 NaN NaN\n1  2  j  j  3.0   NaN NaN NaN\n2  3  j  j  NaN   NaN NaN NaN\n3  4  k  k  5.0   NaN NaN NaN\n4  5  k  k  NaN   NaN NaN NaN\n5  6  k  l  7.0  15.0 NaN NaN\n6  7  k  l  8.0   NaN NaN NaN\n7  8  k  l  NaN   NaN NaN NaN\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 7019904, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y_W2p9rxmIM/AAAAAAAAAAI/AAAAAAAAAVk/UM8nlgZ9mt8/photo.jpg?sz=128", "display_name": "kartriter", "link": "https://stackoverflow.com/users/7019904/kartriter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 751, "favorite_count": 0, "accepted_answer_id": 52750832, "answer_count": 1, "score": 0, "last_activity_date": 1539223079, "creation_date": 1539212203, "last_edit_date": 1539221662, "question_id": 52749875, "link": "https://stackoverflow.com/questions/52749875/pandas-take-rolling-sum-of-next-1-n-rows-of-a-column-within-a-group-and-c", "title": "Pandas: Take rolling sum of next (1 ... n) rows of a column within a group and create a new column for each sum", "body": "<p>I have the following dataframe :</p>\n\n<pre><code>a = [1,2,3,4,5,6,7,8]\nx1 = ['j','j','j','k','k','k','k','k']\ndf = pd.DataFrame({'a': a,'b':x1})  \n\nprint(df)\n\na   b\n1   j\n2   j\n3   j\n4   k\n5   k\n6   k\n7   k\n8   k\n</code></pre>\n\n<p>I am trying get the sum the \"a\" values for next n rows grouped within column \"b\" and store it in new columns (for n ranging from 1 to 4). </p>\n\n<p>Essentially I want to end up with four new columns c1, c2, c3, and c4 such that c1 has sum of \"next 1\" a's, c2 has sum of \"next 2\" a's, c3 has sum of \"next 3\" a's and c4 has sum of \"next 4\" a's.</p>\n\n<p>Therefore, my desired output is:</p>\n\n<pre><code>a   b   c1      c2      c3      c4  \n1   j   2.0     5.0     NaN     NaN\n2   j   3.0     NaN     NaN     NaN\n3   j   NaN     NaN     NaN     NaN\n4   k   5.0     11.0    18.0    26.0\n5   k   6.0     13.0    21.0    NaN\n6   k   7.0     15.0    NaN     NaN\n7   k   8.0     NaN     NaN     NaN\n8   k   NaN     NaN     NaN     NaN\n</code></pre>\n\n<p>I looked for solutions and best I can think of is something like:</p>\n\n<pre><code>for x in range(1,5): \n    df[x] = df.groupby(['b'])a[::-1].rolling(x+1).sum()[::-1] - a\n</code></pre>\n\n<p>but this syntax throws errors. </p>\n\n<p>If possible, can you also share how to implement if I need to group by more than one fields. Will really appreciate any help. </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "tensorflow", "keras", "deep-learning", "lstm"], "answers": [{"comments": [{"owner": {"reputation": 325, "user_id": 3511901, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65b8e27766f8e00b3cfcea7f0b044104?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian_\u5b78\u751f", "link": "https://stackoverflow.com/users/3511901/sebastian-%e5%ad%b8%e7%94%9f"}, "edited": false, "score": 0, "creation_date": 1539237301, "post_id": 52751219, "comment_id": 92429833, "body": "I see this point and thank you very much for the answer and the clarification. The CNN I am using at the moment is seeing the values of the pairwise cosine similarities of the input vectors of s1 and s2 as input. these are generated in advance. What I want to do is also generate the cosine similarity pairwise for the hidden states of the vectors in s1 and s2. I think this is a slightly different case then what you described (which seems to be just a CNN on top of a biLSTM which is also perfectly fine but serves a slightly different purpose I guess). Or am I getting something wrong?"}, {"owner": {"reputation": 19, "user_id": 10487091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f5631b95a1d0baff1b5def9cc878d04?s=128&d=identicon&r=PG&f=1", "display_name": "t26wtnb", "link": "https://stackoverflow.com/users/10487091/t26wtnb"}, "reply_to_user": {"reputation": 325, "user_id": 3511901, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65b8e27766f8e00b3cfcea7f0b044104?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian_\u5b78\u751f", "link": "https://stackoverflow.com/users/3511901/sebastian-%e5%ad%b8%e7%94%9f"}, "edited": false, "score": 0, "creation_date": 1539240327, "post_id": 52751219, "comment_id": 92431058, "body": "I&#39;m sorry for lack of my understanding. I guess that Keras <code>Lambda</code> layer may help you. <a href=\"https://keras.io/layers/core/#lambda\" rel=\"nofollow noreferrer\">keras.io/layers/core/#lambda</a> You can operate any calculations using this <code>Lambda</code> layer. I have found similar topic in Stack Overflow: <a href=\"https://stackoverflow.com/questions/51003027/computing-cosine-similarity-between-two-tensors-in-keras\" title=\"computing cosine similarity between two tensors in keras\">stackoverflow.com/questions/51003027/&hellip;</a>"}], "tags": [], "owner": {"reputation": 19, "user_id": 10487091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f5631b95a1d0baff1b5def9cc878d04?s=128&d=identicon&r=PG&f=1", "display_name": "t26wtnb", "link": "https://stackoverflow.com/users/10487091/t26wtnb"}, "is_accepted": false, "score": 1, "last_activity_date": 1539224395, "creation_date": 1539224395, "answer_id": 52751219, "question_id": 52749836, "link": "https://stackoverflow.com/questions/52749836/possible-to-add-a-bidirectional-lstm-before-a-cnn-in-keras/52751219#52751219", "title": "Possible to add a bidirectional LSTM before a CNN in Keras?", "body": "<p>Keras RNN layer including LSTM can return not only the last output in the output sequence but also the full sequence from all hidden layers using <code>return_sequences=True</code> option.</p>\n\n<p><a href=\"https://keras.io/layers/recurrent/\" rel=\"nofollow noreferrer\">https://keras.io/layers/recurrent/</a></p>\n\n<p>When you want to connect Bi-Directional LSTM layer before CNN layer, the following code is an example:</p>\n\n<pre><code>from keras.layers import Input, LSTM, Bidirectional, Conv1D\n\ninput = Input(shape=(50, 200))\nseq = Bidirectional(LSTM(16, return_sequences=True))(input)\ncnn = Conv1D(32, 3, padding=\"same\", activation=\"relu\")(seq)\n</code></pre>\n\n<p>Please note: If you want to use Conv2D layer after Bi-Directional LSTM layer, reshaping to <code>ndim=4</code> is required for input of Conv2D, like the following code:</p>\n\n<pre><code>from keras.layers import Input, LSTM, Bidirectional, Conv2D, Reshape\n\ninput = Input(shape=(50, 200))\nseq = Bidirectional(LSTM(16, return_sequences=True))(input)\nseq = Reshape((50, 32, 1))(seq)\ncnn = Conv2D(32, (3, 3), padding=\"same\", activation=\"relu\")(seq)\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 3511901, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65b8e27766f8e00b3cfcea7f0b044104?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian_\u5b78\u751f", "link": "https://stackoverflow.com/users/3511901/sebastian-%e5%ad%b8%e7%94%9f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1402, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1539224395, "creation_date": 1539211888, "question_id": 52749836, "link": "https://stackoverflow.com/questions/52749836/possible-to-add-a-bidirectional-lstm-before-a-cnn-in-keras", "title": "Possible to add a bidirectional LSTM before a CNN in Keras?", "body": "<p>I am currently working on a system that classifies whether two sentences share the same content or not. For this purpose I use pretrained word vectors, so there is an array with the word vectors of sentence one (s1) and an array with the word vectors of sentence 2 (s2). In order to classify whether they are similar or not I create a matrix by comparing all vectors in s1 pairwise with the vectors in s2. This matrix is then fed into a CNN classifier and trained on the data. This all pretty straight forward.</p>\n\n<p>Now I would like to enhance this system by making using bidirectional LSTMs on s1 and s2. The bidirectional LSTM should be used in order to get the hidden state of each vector in s1 and s2 and these hidden states should then be compared in the same way by pairwise cosine similarity as the vectors of s1 and s2 are compared before. This is in order to capture the information of the sentence context of each word in s1 and s2.</p>\n\n<p>Now the question is how to do this in Keras. Currently I am using numpy/sklearn to create the matrices which are then fed as training data into Keras. \nI found one implementation of what I want to do in plain tensorflow (<a href=\"https://github.com/LiuHuiwen/Pairwise-Word-Interaction-Modeling-by-Tensorflow-1.0/blob/master/model.py\" rel=\"nofollow noreferrer\">https://github.com/LiuHuiwen/Pairwise-Word-Interaction-Modeling-by-Tensorflow-1.0/blob/master/model.py</a>). </p>\n\n<p>I assume that I will have to change the input data to consist of just the two arrays of vectors of s1 and s2. Then I have to run the biLSTM first, get the hidden states, convert everything into matrices and feed this into the CNN. The example in plain tensorflow seems to be quite clear to me, but I cannot come up with an idea of how to do this in Keras. Is it possible at all in Keras or does one have to resort to tensorflow directly in order to do the necessary calculations on the output of the biLSTM? </p>\n"}, {"tags": ["python", "encoding"], "comments": [{"owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 1, "creation_date": 1539212259, "post_id": 52749834, "comment_id": 92424074, "body": "what does <code>print(type(dataFromAPI))</code> say?"}, {"owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 1, "creation_date": 1539212291, "post_id": 52749834, "comment_id": 92424083, "body": "and, if you can show it,  <code>print(repr(dataFromAPI[:10]))</code> (make sure it&#39;s nothing sensitive)"}, {"owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 1, "creation_date": 1539212450, "post_id": 52749834, "comment_id": 92424126, "body": "In case I&#39;m not around for the response, this should help you or someone else get you the rest of the way: <code>&quot;&#227;&quot;.encode(&#39;utf8&#39;).decode(&#39;iso-8859-1&#39;) = &#39;&#195;&#163;&#39;</code> and <code>&quot;&#231;&quot;.encode(&#39;utf8&#39;).decode(&#39;iso-8859-1&#39;) = &#39;&#195;&#167;&#39;</code>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1539212458, "post_id": 52749834, "comment_id": 92424128, "body": "Does the API you got this data from actually provide data in UTF-8? And have you configured whatever program you&#39;re viewing the CSV in to interpret the CSV as UTF-8?"}, {"owner": {"reputation": 361, "user_id": 9310446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/34fc3d3b2757a72379c569a17d93d6cf?s=128&d=identicon&r=PG&f=1", "display_name": "MGB.py", "link": "https://stackoverflow.com/users/9310446/mgb-py"}, "reply_to_user": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 0, "creation_date": 1539215290, "post_id": 52749834, "comment_id": 92424719, "body": "@jedwards, print(type(dataFromAPI)) says &lt;class &#39;bytes&#39;&gt;"}, {"owner": {"reputation": 361, "user_id": 9310446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/34fc3d3b2757a72379c569a17d93d6cf?s=128&d=identicon&r=PG&f=1", "display_name": "MGB.py", "link": "https://stackoverflow.com/users/9310446/mgb-py"}, "reply_to_user": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 0, "creation_date": 1539215421, "post_id": 52749834, "comment_id": 92424754, "body": "@jedwards, print(repr(dataFromAPI[:10])) says b&#39;record_id,&#39;"}, {"owner": {"reputation": 361, "user_id": 9310446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/34fc3d3b2757a72379c569a17d93d6cf?s=128&d=identicon&r=PG&f=1", "display_name": "MGB.py", "link": "https://stackoverflow.com/users/9310446/mgb-py"}, "reply_to_user": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 0, "creation_date": 1539215643, "post_id": 52749834, "comment_id": 92424795, "body": "@jedwards, In case I&#39;m not around for the response, this should help you or someone else get you the rest of the way: maybe this could solve but I am wondering that with this approach I am supposed to preview all possible accents &#225;,&#233;,&#237;,&#250;,&#243;,&#227;,&#245;,&#224;,&#234;,&#231;, etc you see...there are many possibilities so I thank that this approach is hard one."}, {"owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 0, "creation_date": 1539215717, "post_id": 52749834, "comment_id": 92424821, "body": "@MGB.py no, sorry, what I meant was that properly encoded utf8 bytes, <i>decoded improperly</i> will result in the multi-characters strings you&#39;re seeing."}, {"owner": {"reputation": 361, "user_id": 9310446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/34fc3d3b2757a72379c569a17d93d6cf?s=128&d=identicon&r=PG&f=1", "display_name": "MGB.py", "link": "https://stackoverflow.com/users/9310446/mgb-py"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1539216191, "post_id": 52749834, "comment_id": 92424918, "body": "@user2357112, Does the API you got this data from actually provide data in UTF-8? <b>Yes, the server shows .csv dataset with names in correct way keeping accented words like &#225;,&#233;,&#237;,&#250;,&#243;,&#227;,&#245;,&#224;,&#234;,&#231;, etc</b> And have you configured whatever program you&#39;re viewing the CSV in to interpret the CSV as UTF-8? <b>I use Excel to confirm dataset display, so when I view .csv downloaded directly from API it shows nicely in Excel but with dataset got from my python through API Excel shows theses weird characters &#195;&#163;,&#195;&#170;,&#195;&#167;,&#195;&#161;</b>"}], "answers": [{"comments": [{"owner": {"reputation": 4119, "user_id": 4447998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be2b81fe09ceb2ec13da299127f242f3?s=128&d=identicon&r=PG", "display_name": "roeland", "link": "https://stackoverflow.com/users/4447998/roeland"}, "reply_to_user": {"reputation": 361, "user_id": 9310446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/34fc3d3b2757a72379c569a17d93d6cf?s=128&d=identicon&r=PG&f=1", "display_name": "MGB.py", "link": "https://stackoverflow.com/users/9310446/mgb-py"}, "edited": false, "score": 0, "creation_date": 1539218534, "post_id": 52750228, "comment_id": 92425425, "body": "@MGB.py then it may be the second problem. Please follow jedwards\u2019 advice and include the result of <code>print(repr(dataFromAPI[:10]))</code> in the question."}], "tags": [], "owner": {"reputation": 4119, "user_id": 4447998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be2b81fe09ceb2ec13da299127f242f3?s=128&d=identicon&r=PG", "display_name": "roeland", "link": "https://stackoverflow.com/users/4447998/roeland"}, "is_accepted": false, "score": 1, "last_activity_date": 1539215162, "creation_date": 1539215162, "answer_id": 52750228, "question_id": 52749834, "link": "https://stackoverflow.com/questions/52749834/portuguese-encoding-%c3%83%c2%a3-%c3%83%c2%aa-%c3%83-%c3%83/52750228#52750228", "title": "Portuguese encoding &#195;&#163;, &#195;&#170;, &#195;&#167;, &#195;&#161;", "body": "<p>One possibility your file is fine but Notepad++ opens it using the wrong encoding.</p>\n\n<p>Note there\u2019s two groups of items in the Encoding menu:</p>\n\n<ul>\n<li><em>Encode in UTF-8</em> will reinterpret the current data as UTF-8. You should see the text in the editor change as you use this item.</li>\n<li><em>Convert to UTF-8</em> will convert the loaded data from the current encoding to UTF-8.</li>\n</ul>\n\n<p>Load the file, and then check the current encoding in the status bar. If it does not display UTF-8 use \u201cEncode in UTF-8\u201d to view it as UTF-8.</p>\n\n<p>The second possibility is that the server is incorrectly applying ISO 8859-1 to UTF-8 conversion to data which is already encoded as UTF-8. In that case, fix the server.</p>\n"}, {"comments": [{"owner": {"reputation": 361, "user_id": 9310446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/34fc3d3b2757a72379c569a17d93d6cf?s=128&d=identicon&r=PG&f=1", "display_name": "MGB.py", "link": "https://stackoverflow.com/users/9310446/mgb-py"}, "edited": false, "score": 0, "creation_date": 1539218148, "post_id": 52750254, "comment_id": 92425357, "body": "So, I am supposed to preview all possibles characters in this way. I think its hard way to solve."}], "tags": [], "owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "is_accepted": false, "score": 3, "last_activity_date": 1539215395, "creation_date": 1539215395, "answer_id": 52750254, "question_id": 52749834, "link": "https://stackoverflow.com/questions/52749834/portuguese-encoding-%c3%83%c2%a3-%c3%83%c2%aa-%c3%83-%c3%83/52750254#52750254", "title": "Portuguese encoding &#195;&#163;, &#195;&#170;, &#195;&#167;, &#195;&#161;", "body": "<p>As <a href=\"https://stackoverflow.com/questions/52749834/portuguese-encoding-%c3%83%c2%a3-%c3%83%c2%aa-%c3%83-%c3%83#comment92424126_52749834\">commented by jedwards</a> the encoding should be ISO 8859-1:</p>\n\n<pre><code>&gt;&gt;&gt; \"\u00e3\".encode('utf8').decode('iso-8859-1') \n'\u00c3\u00a3'\n</code></pre>\n\n<p>So you may want to try decoding the text with this encoding.</p>\n"}, {"comments": [{"owner": {"reputation": 361, "user_id": 9310446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/34fc3d3b2757a72379c569a17d93d6cf?s=128&d=identicon&r=PG&f=1", "display_name": "MGB.py", "link": "https://stackoverflow.com/users/9310446/mgb-py"}, "edited": false, "score": 0, "creation_date": 1539217300, "post_id": 52750322, "comment_id": 92425182, "body": "the last two options dont give erros of running but unfortunately the problem is kept not solved. The first option says this:     print(datafromAPI,file=myfile) TypeError: a bytes-like object is required, not &#39;str&#39;"}, {"owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "reply_to_user": {"reputation": 361, "user_id": 9310446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/34fc3d3b2757a72379c569a17d93d6cf?s=128&d=identicon&r=PG&f=1", "display_name": "MGB.py", "link": "https://stackoverflow.com/users/9310446/mgb-py"}, "edited": false, "score": 0, "creation_date": 1539217618, "post_id": 52750322, "comment_id": 92425245, "body": "Yeah, I removed that, sorry about that -- the two options that remain use <code>myfile.write(...)</code>."}, {"owner": {"reputation": 361, "user_id": 9310446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/34fc3d3b2757a72379c569a17d93d6cf?s=128&d=identicon&r=PG&f=1", "display_name": "MGB.py", "link": "https://stackoverflow.com/users/9310446/mgb-py"}, "edited": false, "score": 0, "creation_date": 1539217884, "post_id": 52750322, "comment_id": 92425299, "body": "Sorry, I didnt get your explanation. My problem is not solved yet."}, {"owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "reply_to_user": {"reputation": 361, "user_id": 9310446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/34fc3d3b2757a72379c569a17d93d6cf?s=128&d=identicon&r=PG&f=1", "display_name": "MGB.py", "link": "https://stackoverflow.com/users/9310446/mgb-py"}, "edited": false, "score": 0, "creation_date": 1539217975, "post_id": 52750322, "comment_id": 92425316, "body": "The options have changed, have you tried both of the options that appear now?"}, {"owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "reply_to_user": {"reputation": 361, "user_id": 9310446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/34fc3d3b2757a72379c569a17d93d6cf?s=128&d=identicon&r=PG&f=1", "display_name": "MGB.py", "link": "https://stackoverflow.com/users/9310446/mgb-py"}, "edited": false, "score": 0, "creation_date": 1539219020, "post_id": 52750322, "comment_id": 92425524, "body": "If the last one doesn&#39;t work, the issue almost definitely is with your viewer/editor or code that exists outside of this snippet.  (In this snippet, Python is doing nothing regarding string encoding and working directly on bytes)"}, {"owner": {"reputation": 361, "user_id": 9310446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/34fc3d3b2757a72379c569a17d93d6cf?s=128&d=identicon&r=PG&f=1", "display_name": "MGB.py", "link": "https://stackoverflow.com/users/9310446/mgb-py"}, "edited": false, "score": 0, "creation_date": 1539254978, "post_id": 52750322, "comment_id": 92439501, "body": "Can I have your email?"}], "tags": [], "owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "is_accepted": false, "score": 3, "last_activity_date": 1539217069, "last_edit_date": 1539217069, "creation_date": 1539216059, "answer_id": 52750322, "question_id": 52749834, "link": "https://stackoverflow.com/questions/52749834/portuguese-encoding-%c3%83%c2%a3-%c3%83%c2%aa-%c3%83-%c3%83/52750322#52750322", "title": "Portuguese encoding &#195;&#163;, &#195;&#170;, &#195;&#167;, &#195;&#161;", "body": "<p>I'll have to look into this further, but it's possible that <code>print</code> is doing something weird to your strings on the way to the file.</p>\n\n<p>Since you know <code>datafromAPI</code> is a <code>bytes</code> object, consider trying the <s>three</s> two different approaches below:</p>\n\n<p><strong>[<code>write</code> + text mode]</strong></p>\n\n<pre><code>with open('dataset.csv', \"w\", encoding=\"utf-8\") as myfile:\n    myfile.write(datafromAPI.decode(\"utf-8\"))\n</code></pre>\n\n<p><strong>[<code>write</code> + binary mode]</strong></p>\n\n<pre><code>with open('dataset.csv', \"wb\") as myfile:\n    myfile.write(datafromAPI)\n</code></pre>\n\n<p>This last version will certainly work, provided you open it with an editor that supports the source encoding.</p>\n\n<p><strong>Update:</strong> <em>removed the version I wasn't sure would even work -- it will not.</em></p>\n"}, {"tags": [], "owner": {"reputation": 471, "user_id": 12882771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z87ED.jpg?s=128&g=1", "display_name": "RicarHincapie", "link": "https://stackoverflow.com/users/12882771/ricarhincapie"}, "is_accepted": false, "score": 0, "last_activity_date": 1609789336, "last_edit_date": 1609789336, "creation_date": 1609634066, "answer_id": 65545557, "question_id": 52749834, "link": "https://stackoverflow.com/questions/52749834/portuguese-encoding-%c3%83%c2%a3-%c3%83%c2%aa-%c3%83-%c3%83/65545557#65545557", "title": "Portuguese encoding &#195;&#163;, &#195;&#170;, &#195;&#167;, &#195;&#161;", "body": "<p>Please try this:</p>\n<pre><code>&gt;&gt;&gt;'\u00e2, \u00ea, \u00f4&quot;.encode('iso-8859-1').decode('iso-8859-1')\n\n'\u00e2, \u00ea, \u00f4'\n\n&gt;&gt;&gt;'\u00e2, \u00ea, \u00f4&quot;.encode('utf-8').decode('utf-8')\n\n'\u00e2, \u00ea, \u00f4'\n</code></pre>\n<p>You will notice that you should encode with <code>iso-8859-1</code>, because when going with utf-8, you'll get:</p>\n<pre><code>&gt;&gt;&gt;&quot;\u00e2, \u00ea, \u00f4&quot;.encode('utf-8').decode('iso-8859-1')\n\n'\u00c3\u00a2, \u00c3\u00aa, \u00c3\u00b4'\n</code></pre>\n<p>The third case is:</p>\n<pre><code>&gt;&gt;&gt; &quot;\u00e2, \u00ea, \u00f4&quot;.encode('iso-8859-1').decode('utf-8')\n</code></pre>\n<p>But you'll get a UnicodeDecodeError.</p>\n"}], "owner": {"reputation": 361, "user_id": 9310446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/34fc3d3b2757a72379c569a17d93d6cf?s=128&d=identicon&r=PG&f=1", "display_name": "MGB.py", "link": "https://stackoverflow.com/users/9310446/mgb-py"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6276, "favorite_count": 1, "answer_count": 4, "score": 1, "last_activity_date": 1609789336, "creation_date": 1539211875, "last_edit_date": 1539214393, "question_id": 52749834, "link": "https://stackoverflow.com/questions/52749834/portuguese-encoding-%c3%83%c2%a3-%c3%83%c2%aa-%c3%83-%c3%83", "title": "Portuguese encoding &#195;&#163;, &#195;&#170;, &#195;&#167;, &#195;&#161;", "body": "<p>I have this code:</p>\n\n<pre><code>with open('dataset.csv', \"w\", encoding=\"utf-8\") as myfile:\n    print(datafromAPI.decode(\"utf-8\"),file=myfile)\n</code></pre>\n\n<p>which saves .csv file after decoding dataset from a data server through an API but the encoding is not displaying proper character. For instance, <strong>\u00e3 shows \u00c3\u00a3, \u00ea shows \u00c3\u00aa, \u00e7 shows \u00c3\u00a7, \u00e1 shows \u00c3\u00a1</strong>, etc\nI have tried to change starting from encoding of notepad++ and within my python code using <strong>utf-8, latin-1, ISO 8859-1</strong>, etc with no effect.</p>\n"}, {"tags": ["python", "opencv", "tensorflow", "keras"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 14281059, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/22c444c103a1e0d4dfc81e724756931c?s=128&d=identicon&r=PG", "display_name": "Majid Soroush manesh", "link": "https://stackoverflow.com/users/14281059/majid-soroush-manesh"}, "is_accepted": false, "score": 1, "last_activity_date": 1600182337, "last_edit_date": 1600182337, "creation_date": 1600170630, "answer_id": 63901244, "question_id": 52749816, "link": "https://stackoverflow.com/questions/52749816/how-to-use-a-image-set-in-rnn-model/63901244#63901244", "title": "How to use a image set in RNN model", "body": "<p>For the error before dense layers add this line:</p>\n<pre><code>model.add(Flatten())\n</code></pre>\n<p>Previously, you should import:</p>\n<pre><code>from keras.layers import Flatten\n</code></pre>\n"}], "owner": {"reputation": 2345, "user_id": 1009508, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9726da1353936e07ab69a35d5f11d4f6?s=128&d=identicon&r=PG", "display_name": "MNM", "link": "https://stackoverflow.com/users/1009508/mnm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1600182337, "creation_date": 1539211782, "last_edit_date": 1539233812, "question_id": 52749816, "link": "https://stackoverflow.com/questions/52749816/how-to-use-a-image-set-in-rnn-model", "title": "How to use a image set in RNN model", "body": "<p>Hello I am trying to do my first RNN using Keras and Tensorflow, but I am getting stuck on an issue or reshaping my images to fit into the model. </p>\n\n<p>I have looked at this post but could not figure out about the reshaping:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/47671732/keras-input-a-3-channel-image-into-lstm\">Keras - Input a 3 channel image into LSTM</a></p>\n\n<p>What I have is a bunch of images that are taken at every frame in a video. I saved all the frames outside of python so I have a very large folder of images.I separated the frames into 21 frames for a segment so 21 images per motion that I want to capture.  I want to read in these 21 images as one sequence. I have the same sequence captured from multiple cameras/angles which I want to us in this model.  What I want to try is to model a movement and see if a person is doing this movement or not, so it is a binary model yes or no basically. Not the most sophisticated but its a learning process to use this model and keras. </p>\n\n<p>I need help figuring out how to use these images inside the keras model. I have looked at a few tutorials on MINST data set but that didnt help me figure this out.\nAny help will be appreciated.   </p>\n\n<p>This is the error that is given to me when I try to train the model</p>\n\n<pre><code>ValueError: Error when checking input: expected lstm_1_input to have 3 dimensions, but got array with shape (2026, 200, 200, 1)\n</code></pre>\n\n<p>My code is this:</p>\n\n<pre><code>from keras.models import Sequential\nfrom keras.layers import Dense, Activation\nfrom keras.layers import LSTM\nfrom tqdm import tqdm\nimport cv2\nimport os\nimport numpy as np\n\nimageSize = 200\n\n#create lables for each image\ndef labelImage(img):\n    wordLabel = img.split('.')[-3]\n    #Conversion to one hot array [lat,not]\n    if wordLabel == \"FWAC\":\n        return[1,0]\n    else:\n        return[0,1]\n\n#Process images and add lables\n#Convert data into an array and add its lable\ndef makeTrainingData():\n    print(\"Creating Training Data\")\n    trainingData = []\n    for img in tqdm(os.listdir(trainDir)):\n        label = labelImage(img)\n        path = os.path.join(trainDir,img)\n        img = cv2.imread(path, cv2.IMREAD_GRAYSCALE)\n        img = cv2.resize(img, (imageSize,imageSize))\n        trainingData.append([np.array(img),np.array(label)])\n\n    #Save the array file to load it into other models if needed\n    np.save(\"trainingData.npy\", trainingData)\n    print(\"Training Data Saved\")\n    return trainingData\n\n#process the testing data in the same manner\ndef processTestData():\n    print(\"Creating Testing Data\")\n    testData = []\n    for img in tqdm(os.listdir(testDri)):\n        print(\"image\", img)\n        path = os.path.join(testDri, img)\n        imgNum = img.split(\".\")[0]\n        img = cv2.imread(path, cv2.IMREAD_GRAYSCALE)\n        img = cv2.resize(img, (imageSize, imageSize))\n        testData.append([np.array(img), imgNum])\n\n    np.save(\"testingData.npy\", testData)\n    print(\"Testing Data Saved\")\n    return testData\n\n\n\nrnnSize = 512\n\nmodel = Sequential()\nmodel.add(LSTM(rnnSize, input_shape=(imageSize, imageSize)))\nmodel.add(Dense(1024))\nmodel.add(Activation('relu'))\nmodel.add(Dense(50))\nmodel.add(Activation('sigmoid'))\nmodel.add(Dense(3))  \nmodel.add(Activation('softmax'))\n\n\nmodel.compile(loss='mean_squared_error', optimizer='adam',metrics=['accuracy'])\n\n#Data\ntrainDir = \"D:/TrainingDataSets/TrainingSet/\"\ntestDri = \"D:/TrainingDataSets/TestingSet/\"\n\n#trainData = makeTrainingData()\n#testData = processTestData()\ntrainData = np.load('trainingData.npy')\ntestData = np.load(\"testingData.npy\")\n#resize the image to this See above\ntrain = trainData[:-500]\ntest = trainData[-200:]\n\nx = []\ny = []\nfor xi in trainData:\n    x.append(xi[0].reshape((-1, imageSize, imageSize)))\n    y.append(xi[1])\n\nx_train = np.array([i[0] for i in train]).reshape(-1,imageSize, imageSize,1)\ny_train = [i[1] for i in train]\n\n\n\ntest_x = np.array([i[0] for i in test]).reshape(-1,imageSize , imageSize,1)\ntest_y = [i[1] for i in test]\n\n\nepoch = 5\nbatchSize = 100\n\nmodel.fit(x_train, y_train, epochs=epoch, batch_size= batchSize, verbose=1, shuffle=False)\n</code></pre>\n"}, {"tags": ["python", "regex", "parsing"], "comments": [{"owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 0, "creation_date": 1539211903, "post_id": 52749792, "comment_id": 92423976, "body": "Can you give some additional example lines, and what you want to match for each?  It&#39;s not super clear what you&#39;re trying to do."}, {"owner": {"reputation": 15, "user_id": 6042698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce5099a591975d1d10b35c98b046e6bf?s=128&d=identicon&r=PG&f=1", "display_name": "codeNoob", "link": "https://stackoverflow.com/users/6042698/codenoob"}, "reply_to_user": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 0, "creation_date": 1539220968, "post_id": 52749792, "comment_id": 92425889, "body": "@jedwards I added a section at the bottom with examples. I think my key issue here though is mixing character set matches with substring matches in the same line."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 6042698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce5099a591975d1d10b35c98b046e6bf?s=128&d=identicon&r=PG&f=1", "display_name": "codeNoob", "link": "https://stackoverflow.com/users/6042698/codenoob"}, "edited": false, "score": 0, "creation_date": 1539225592, "post_id": 52751229, "comment_id": 92426877, "body": "I should&#39;ve looked in to the rest of the re.* functions. Also need to read up on what the r does. Thanks a bunch. Additionally the third case passes with mathstr = re.sub(&#39;[/*+\\-^][a-zA-Z]&#39;,&#39;&#39;,mathstr), I <i>THINK</i> that would cover any cases where I have units like v/a or m/s"}, {"owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "reply_to_user": {"reputation": 15, "user_id": 6042698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce5099a591975d1d10b35c98b046e6bf?s=128&d=identicon&r=PG&f=1", "display_name": "codeNoob", "link": "https://stackoverflow.com/users/6042698/codenoob"}, "edited": false, "score": 0, "creation_date": 1539225909, "post_id": 52751229, "comment_id": 92426955, "body": "@codeNoob <code>r</code> specifies a <a href=\"https://stackoverflow.com/questions/2081640/what-exactly-do-u-and-r-string-flags-do-and-what-are-raw-string-literals\">&quot;raw&quot; string literal</a>."}], "tags": [], "owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "is_accepted": true, "score": 1, "last_activity_date": 1539224464, "creation_date": 1539224464, "answer_id": 52751229, "question_id": 52749792, "link": "https://stackoverflow.com/questions/52749792/using-negated-set-and-what-to-negate-substring-in-same-line/52751229#52751229", "title": "Using negated set [^] and what? to negate substring in same line", "body": "<p>Instead of \"deleting\" characters that <em>aren't</em> specified, what about \"keeping\" characters that <em>are</em> specified -- this is easy enough since you've already negated the group:</p>\n\n<pre><code>[0-9*()/+\\-.Q]\n</code></pre>\n\n<p>Then you can add any alternative literals you want, e.g.:</p>\n\n<pre><code>[0-9*()/+\\-.Q]|sqrt\n</code></pre>\n\n<p>In Python, this might look like, using <code>join</code> and <a href=\"https://docs.python.org/3/library/re.html#re.findall\" rel=\"nofollow noreferrer\"><code>re.findall()</code></a>:</p>\n\n<pre><code>tests = [\n    ('sqrt(5s+2s)+(3s**2/9s)', 'sqrt(5+2)+(3**2/9)'),\n    ('sqrt(4*(5+2)/(2))\\$', 'sqrt(4*(5+2)/(2))'),\n    ('sqrt(4v/a)-(3v+10.5v)/(20a-8a)+1/2ohms)', 'sqrt(4)-(3+10.5)/(20-8)+1/2')\n]\n\nimport re\n\nfor (before, expected) in tests:\n    matches = re.findall(r\"[0-9*()/+\\-.Q]|sqrt\", before)\n    after = ''.join(matches)\n\n    is_ok = (after == expected)\n    print(after, is_ok, '' if is_ok else expected)\n</code></pre>\n\n<p>Output:</p>\n\n<pre>\nsqrt(5+2)+(3**2/9)               True \nsqrt(4*(5+2)/(2))                True \nsqrt(4/)-(3+10.5)/(20-8)+1/2)    False    sqrt(4)-(3+10.5)/(20-8)+1/2\n</pre>\n\n<p>(the last one doesn't match what you're expecting because of the first forward slash, but that's outside the scope of the question really.)</p>\n"}], "owner": {"reputation": 15, "user_id": 6042698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce5099a591975d1d10b35c98b046e6bf?s=128&d=identicon&r=PG&f=1", "display_name": "codeNoob", "link": "https://stackoverflow.com/users/6042698/codenoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 52751229, "answer_count": 1, "score": 0, "last_activity_date": 1539260329, "creation_date": 1539211667, "last_edit_date": 1539260329, "question_id": 52749792, "link": "https://stackoverflow.com/questions/52749792/using-negated-set-and-what-to-negate-substring-in-same-line", "title": "Using negated set [^] and what? to negate substring in same line", "body": "<p>I'm writing a parser than converts <code>LaTeX</code> math in to python <code>eval()</code> compatible string.</p>\n\n<p>I get to a point where I have a string that looks like this:</p>\n\n<pre><code>\\sqrt{4m/s} - \\frac{3v+10.5v}{20a-8a} +1/2\n</code></pre>\n\n<p>Notice the still mostly <code>LaTeX</code> syntax, as well as some arbitrary \"unit\" letters thrown in.\nI then use the following Negated set, to replace everything except what is in the negated set.</p>\n\n<pre><code>    mathstr = re.sub('[^0-9*()/+\\-.Q]','',mathstr)\n</code></pre>\n\n<p>How Can I include a substring \"sqrt\" so that it can work in a similar fashion, and preferably in the same regular expression?</p>\n\n<p>Right now my work around is replacing '<code>\\sqrt</code>' with '<code>Q</code>', doing the line of code above, and then setting '<code>Q</code>' to '<code>sqrt</code>' after, my full routine for going from the above syntax to <code>eval()</code> syntax is as follows:</p>\n\n<pre><code>    mathstr = mathstr.replace(\" \",\"\")\n    if pwrRe.search(mathstr):\n        mathstr = re.sub(pwrRe,'**',mathstr)\n    if MultiplyRe.search(mathstr):\n        mathstr = re.sub(MultiplyRe,'*',mathstr)\n    if DivideRe.search(mathstr) or sqrtRe.search(mathstr):\n        mathstr = re.sub('\\\\\\\\frac{','(',mathstr)\n        mathstr = re.sub('\\\\\\\\sqrt{','\\\\\\\\sqrt(',mathstr)   \n        mathstr = re.sub('}{',')/(',mathstr)\n        mathstr = re.sub('}',')',mathstr)\n    mathstr = re.sub('[/*+\\-^][a-zA-Z]','',mathstr)\n    mathstr = re.sub('\\\\\\\\sqrt','Q',mathstr)\n    mathstr = re.sub('[^0-9*()/+\\-.Q]','',mathstr)\n    mathstr = re.sub(r'Q','sqrt',mathstr)\n</code></pre>\n\n<p>Which results in the <code>eval()</code> syntax'd:</p>\n\n<pre><code>sqrt(4)-(3+10.5)/(20-8)+1/2\n</code></pre>\n\n<p>But this is sloppy, and it would be useful in many areas if I could 'whitelist' characters and substrings in one line, blowing away all other characters that come up.</p>\n\n<p>EDIT:</p>\n\n<p>As I continue expanding my script this list will get longer but for now I want to match the following and discard everything else:</p>\n\n<pre><code>0123456789()/*+-^sqrt &lt;-- only sqrt when it's a substring\n</code></pre>\n\n<p>Here are a few examples:</p>\n\n<pre><code>Before: sqrt(5s+2s)+(3s**2/9s)\nAfter: sqrt(5+2)+(3**2/9)\n\nBefore: sqrt(4*(5+2)/(2))\\$\nAfter:  sqrt(4*(5+2)/(2))\n\nBefore: sqrt(4v/a)-(3v+10.5v)/(20a-8a)+1/2ohms\nAfter:  sqrt(4)-(3+10.5)/(20-8)+1/2\n</code></pre>\n\n<p>There is some nuance to this beyond simply matching only those characters as well. In my first example you can see I have v/a, even though there is an '/' there, I remove that as well. </p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1539211932, "post_id": 52749783, "comment_id": 92423988, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/22937618/reference-what-does-this-regex-mean\">Reference - What does this regex mean?</a>"}, {"owner": {"reputation": 11, "user_id": 10486677, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215303177345063/picture?type=large", "display_name": "John Wong", "link": "https://stackoverflow.com/users/10486677/john-wong"}, "edited": false, "score": 0, "creation_date": 1539212303, "post_id": 52749783, "comment_id": 92424086, "body": "That is what I am looking for:  the regex pattern to do this."}, {"owner": {"reputation": 11, "user_id": 10486677, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215303177345063/picture?type=large", "display_name": "John Wong", "link": "https://stackoverflow.com/users/10486677/john-wong"}, "edited": false, "score": 0, "creation_date": 1539212352, "post_id": 52749783, "comment_id": 92424095, "body": "In addition, please extend the regex code to not pick up lines with content such as January 2018, Jan 2018, etc.  I only want the lines with pure 2018 (no months)"}, {"owner": {"reputation": 11, "user_id": 10486677, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215303177345063/picture?type=large", "display_name": "John Wong", "link": "https://stackoverflow.com/users/10486677/john-wong"}, "edited": false, "score": 0, "creation_date": 1539212532, "post_id": 52749783, "comment_id": 92424143, "body": "E.g. here is the attempt:   df[&#39;textline&#39;].str.extractall(r&#39; ^(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[a-z]* (\\d{4})\\D&#39;)"}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 9374926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31a428a9f32258adde5a6d583afcf9f4?s=128&d=identicon&r=PG&f=1", "display_name": "Shervin Mirostovar", "link": "https://stackoverflow.com/users/9374926/shervin-mirostovar"}, "is_accepted": false, "score": -1, "last_activity_date": 1539212660, "creation_date": 1539212660, "answer_id": 52749927, "question_id": 52749783, "link": "https://stackoverflow.com/questions/52749783/python-regex-extractall-for-yyyy-only-but-not-mmm-yyyy/52749927#52749927", "title": "Python Regex extractall for (YYYY) only but not MMM YYYY", "body": "<p>may you try this:</p>\n\n<pre><code>(?&lt;=(\\s))\\d{4}(?=\\D)\n</code></pre>\n\n<hr>\n\n<p>Matches:</p>\n\n<p>This is a test with <strong>2018</strong>\\n</p>\n\n<p>This is a test with Jan <strong>2018</strong>\\n</p>\n\n<p>This is a test with Feb <strong>2018</strong>\\n</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 10486677, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215303177345063/picture?type=large", "display_name": "John Wong", "link": "https://stackoverflow.com/users/10486677/john-wong"}, "is_accepted": false, "score": 0, "last_activity_date": 1539215314, "creation_date": 1539215314, "answer_id": 52750243, "question_id": 52749783, "link": "https://stackoverflow.com/questions/52749783/python-regex-extractall-for-yyyy-only-but-not-mmm-yyyy/52750243#52750243", "title": "Python Regex extractall for (YYYY) only but not MMM YYYY", "body": "<p>I figured out the first part of the answer:</p>\n\n<pre><code>df['textline'].str.extractall(r'(?&lt;!Jan|Feb) ([1-2][0-9]{3})')\n</code></pre>\n\n<p>The second part is how to use the same line for the entire word January , February so that it will work for both Feb 2018 and February 2018</p>\n"}], "owner": {"reputation": 11, "user_id": 10486677, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215303177345063/picture?type=large", "display_name": "John Wong", "link": "https://stackoverflow.com/users/10486677/john-wong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1539215314, "creation_date": 1539211570, "question_id": 52749783, "link": "https://stackoverflow.com/questions/52749783/python-regex-extractall-for-yyyy-only-but-not-mmm-yyyy", "title": "Python Regex extractall for (YYYY) only but not MMM YYYY", "body": "<p>I have dataframe df with a column (textline) that consists of text</p>\n\n<pre><code>df['textline'].iloc[0] = 'This is a test with 2018\\n'\ndf['textline'].iloc[1] = 'This is a test with Jan 2018\\n'\ndf['textline'].iloc[2] = 'This is a test with Feb 2018\\n'\n</code></pre>\n\n<p>I want to use Regex extractall to run through the entire df['textline'] but it will only extract the year when there is no preceeding Month names.  For example, in the above example, it will extract 2018 from the first line, but not the 2018 from the second or third line because it has the Jan or Feb (or other months).  </p>\n\n<pre><code>df['textline'].str.extractall(r'&lt;&lt;Regex code&gt;&gt;')\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": true, "score": 4, "last_activity_date": 1539212983, "last_edit_date": 1539212983, "creation_date": 1539211211, "answer_id": 52749740, "question_id": 52749716, "link": "https://stackoverflow.com/questions/52749716/how-to-increment-x-number-of-elements-repeatedly-y-times-in-python/52749740#52749740", "title": "How to increment x number of elements repeatedly y times in Python", "body": "<p><strong><em>Option 1</em></strong> </p>\n\n<p>If you need to store the results in a list, you can use unpacking and arithmetic:</p>\n\n<pre><code>&gt;&gt;&gt; [[*range(i*x, i*x+x)] for i in range(y)]\n[[0, 1, 2, 3, 4], [5, 6, 7, 8, 9]]\n</code></pre>\n\n<p><strong><em>Option 2</em></strong></p>\n\n<p>If you're just interested in printing the values, you don't need to waste space by creating the intermediate sublists, and you can instead use the <code>range</code> objects:</p>\n\n<pre><code>for row in [range(i*x, i*x+x) for i in range(y)]:\n    print(*row)\n</code></pre>\n\n<p></p>\n\n<pre><code>0 1 2 3 4\n5 6 7 8 9\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "is_accepted": false, "score": 1, "last_activity_date": 1539211369, "creation_date": 1539211369, "answer_id": 52749761, "question_id": 52749716, "link": "https://stackoverflow.com/questions/52749716/how-to-increment-x-number-of-elements-repeatedly-y-times-in-python/52749761#52749761", "title": "How to increment x number of elements repeatedly y times in Python", "body": "<p>You could use numpy. As you simply count in the range of <code>[0, x*y[</code> and just want to have it plotted in a certain shape, numpy can exactly do that in a one liner:</p>\n\n<pre><code>import numpy as np\nx = 5\ny = 2\nnp.arange(x*y).reshape(y, x)\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>array([[0, 1, 2, 3, 4],\n       [5, 6, 7, 8, 9]])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "edited": false, "score": 0, "creation_date": 1539211715, "post_id": 52749784, "comment_id": 92423925, "body": "print(v,end=&#39; &#39;)                ^ SyntaxError: invalid syntax"}], "tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": false, "score": 1, "last_activity_date": 1539212006, "last_edit_date": 1539212006, "creation_date": 1539211578, "answer_id": 52749784, "question_id": 52749716, "link": "https://stackoverflow.com/questions/52749716/how-to-increment-x-number-of-elements-repeatedly-y-times-in-python/52749784#52749784", "title": "How to increment x number of elements repeatedly y times in Python", "body": "<p>It looks like you're just trying to print things, rather than store them (if you want to store them, the other answers look good). You can do it manually with this sort of loop:</p>\n\n<pre><code>for i,v in enumerate(range(y*x)):\n    if (i+1)%x == 0:\n        print(v)\n    else:\n        print(v,end=' ')\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>0 1 2 3 4\n5 6 7 8 9\n</code></pre>\n\n<p><strong>Edit for <code>python 2</code></strong>: Based on your syntax error in your comment, I suppose you're using python2. Change <code>print(v,end=' ')</code> to <code>print v,</code>:</p>\n\n<pre><code>for i,v in enumerate(range(y*x)):\n    if (i+1)%x == 0:\n        print v\n    else:\n        print v,\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "edited": false, "score": 0, "creation_date": 1539212188, "post_id": 52749800, "comment_id": 92424053, "body": "If I have to keep <code>for</code> loop for x, let&#39;s say <code>for i in range(x):</code> then is there any way to use list comprehension only for y?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "edited": false, "score": 0, "creation_date": 1539212219, "post_id": 52749800, "comment_id": 92424062, "body": "@npatel I don&#39;t know what you mean, but you can just luse <code>list(foo(5,2))</code>"}], "tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": false, "score": 1, "last_activity_date": 1539211712, "creation_date": 1539211712, "answer_id": 52749800, "question_id": 52749716, "link": "https://stackoverflow.com/questions/52749716/how-to-increment-x-number-of-elements-repeatedly-y-times-in-python/52749800#52749800", "title": "How to increment x number of elements repeatedly y times in Python", "body": "<p>You can compose various itertools iterators to create your own generator:</p>\n\n<pre><code>&gt;&gt;&gt; from itertools import count, islice\n&gt;&gt;&gt; def foo(x, y):\n...     elements = count()\n...     for _ in range(y):\n...         yield list(islice(elements, x))\n...\n&gt;&gt;&gt; for es in foo(5, 2):\n...     print(*es)\n...\n0 1 2 3 4\n5 6 7 8 9\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1539212333, "post_id": 52749880, "comment_id": 92424089, "body": "this is not idiomatic: <code>str(list(...))[1:-1].replace(&#39;,&#39;,&#39;&#39;)</code>, just use <code>&#39; &#39;.join(list(...))</code> which is also much more efficient."}, {"owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1539212406, "post_id": 52749880, "comment_id": 92424111, "body": "I don&#39;t get your point - I don&#39;t think that those two are equal in this case. To be clear: I tried a <code>&#39; &#39;.join(...)</code> based solution which did not work with my idea to just print a range with offsets."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1539212495, "post_id": 52749880, "comment_id": 92424137, "body": "Sorr,y, you need to replace <code>list</code> with <code>map(str(...))</code>, the point is, don&#39;t generate a string representation of a list just to slice it and replace the commas."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1539212594, "post_id": 52749880, "comment_id": 92424160, "body": "And for just printing, you can just do: <code>print(*range(i*x, (i+1)*x))</code>"}, {"owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1539212812, "post_id": 52749880, "comment_id": 92424205, "body": "<code>map</code> is not an option here - I would have to <code>list(map(...))</code> again to be able to print it... ugly. However: please note that I already posted my original idea below - i&#39;d stick with <code>numpy</code>. This here was created only after I saw that people optimized about printing."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1539212866, "post_id": 52749880, "comment_id": 92424224, "body": "You don&#39;t have to <code>list(map(...))</code> again, just <code>print(&#39; &#39;.join(map(str, (range(i*x, (i+1)*x)))))</code>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1539212890, "post_id": 52749880, "comment_id": 92424230, "body": "Or again, if you just want to print it, <code>print(*range(i*x, (i+1)*x))</code>"}, {"owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1539212899, "post_id": 52749880, "comment_id": 92424236, "body": "And so <i>this</i> (<code>print(*range(i*x, (i+1)*x))</code>) is really a very good and constructive hint, thank you"}], "tags": [], "owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "is_accepted": false, "score": 1, "last_activity_date": 1539213034, "last_edit_date": 1539213034, "creation_date": 1539212270, "answer_id": 52749880, "question_id": 52749716, "link": "https://stackoverflow.com/questions/52749716/how-to-increment-x-number-of-elements-repeatedly-y-times-in-python/52749880#52749880", "title": "How to increment x number of elements repeatedly y times in Python", "body": "<p>EDIT: Thanks to @juanpa.arrivillaga this \"range-with-offset\"-idea became a serious approach in the end:</p>\n\n<pre><code>for i in range(y):\n    print(*range(i*x, (i+1)*x))\n\n0 1 2 3 4\n5 6 7 8 9\n</code></pre>\n"}], "owner": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 52749740, "answer_count": 5, "score": 0, "last_activity_date": 1539213034, "creation_date": 1539211044, "question_id": 52749716, "link": "https://stackoverflow.com/questions/52749716/how-to-increment-x-number-of-elements-repeatedly-y-times-in-python", "title": "How to increment x number of elements repeatedly y times in Python", "body": "<p>I have <code>x</code> which is number of elements needed and <code>y</code> which is number of times the elements are needed.</p>\n\n<p>For example:</p>\n\n<pre><code>&gt;&gt;&gt; x = 5\n&gt;&gt;&gt; y = 2\n&gt;&gt;&gt; for i in range(y):\n...  for j in range(x):\n...   print j,\n... \n0 1 2 3 4 0 1 2 3 4\n</code></pre>\n\n<p>Expected output is:</p>\n\n<pre><code>0 1 2 3 4\n5 6 7 8 9\n</code></pre>\n\n<p>Can someone help me in achieving the expected output?\n<code>for</code> loop or list comprehension any way is fine.\nThanks in advance.</p>\n"}, {"tags": ["python", "http", "python-requests", "http-status-code-404", "http-status-code-302"], "comments": [{"owner": {"reputation": 8890, "user_id": 4349415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ta4zl.png?s=128&g=1", "display_name": "Mike Scotty", "link": "https://stackoverflow.com/users/4349415/mike-scotty"}, "edited": false, "score": 1, "creation_date": 1539211261, "post_id": 52749710, "comment_id": 92423816, "body": "The server may send you any error page it wants and an independent status code. In this case it would seem the server is just doing it wrong by displaying 404 on the page, but sending 302."}, {"owner": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "reply_to_user": {"reputation": 8890, "user_id": 4349415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ta4zl.png?s=128&g=1", "display_name": "Mike Scotty", "link": "https://stackoverflow.com/users/4349415/mike-scotty"}, "edited": false, "score": 0, "creation_date": 1539211383, "post_id": 52749710, "comment_id": 92423845, "body": "So you are saying the 404 is wrong, not really 302?!"}, {"owner": {"reputation": 8890, "user_id": 4349415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ta4zl.png?s=128&g=1", "display_name": "Mike Scotty", "link": "https://stackoverflow.com/users/4349415/mike-scotty"}, "edited": false, "score": 1, "creation_date": 1539211499, "post_id": 52749710, "comment_id": 92423873, "body": "I&#39;m just saying that the displayed code seems to differ from the sent code. Whoever implements the server backend may decide to set whatever status code he wants. The backend developer may even decide to send status  404 for an existing resource."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 1, "creation_date": 1539211836, "post_id": 52749710, "comment_id": 92423966, "body": "Browsers usually will automatically follow a 302 redirect, so maybe the 404 is from the followed link."}], "answers": [{"comments": [{"owner": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "edited": false, "score": 0, "creation_date": 1539224768, "post_id": 52749852, "comment_id": 92426724, "body": "Great! Problem sovled"}], "tags": [], "owner": {"reputation": 449289, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1539212324, "last_edit_date": 1539212324, "creation_date": 1539212024, "answer_id": 52749852, "question_id": 52749710, "link": "https://stackoverflow.com/questions/52749710/http-404-status-code-not-found-shown-as-302/52749852#52749852", "title": "HTTP 404 status code (Not Found) shown as 302", "body": "<p>302 is an HTTP redirection. A web browser will follow the redirect to the URL reported in the <code>Location</code> response header. When requesting that next URL, it will have its own response code, which can include 404.</p>\n\n<p>Your Python code does not follow the redirect, which would explain why it gets the original 302 instead.</p>\n\n<p>Per the <a href=\"http://docs.python-requests.org/en/master/user/quickstart/\" rel=\"nofollow noreferrer\">Requests</a> documentation:</p>\n\n<p><a href=\"http://docs.python-requests.org/en/master/user/quickstart/#redirection-and-history\" rel=\"nofollow noreferrer\">Redirection and History</a></p>\n\n<blockquote>\n  <p>By default Requests will perform location redirection for all verbs <strong>except HEAD</strong>.</p>\n  \n  <p>We can use the <code>history</code> property of the Response object to track redirection.</p>\n  \n  <p>The <code>Response.history</code> list contains the <code>Response</code> objects that were created in order to complete the request. The list is sorted from the oldest to the most recent response.</p>\n  \n  <p>...</p>\n  \n  <p>If you\u2019re using GET, OPTIONS, POST, PUT, PATCH or DELETE, you can disable redirection handling with the <code>allow_redirects</code> parameter:</p>\n\n<pre><code>&gt;&gt;&gt; r = requests.get('https://github.com/', allow_redirects=False)\n\n&gt;&gt;&gt; r.status_code\n301\n\n&gt;&gt;&gt; r.history\n[]\n</code></pre>\n  \n  <p><strong>If you\u2019re using HEAD, you can enable redirection as well</strong>:</p>\n\n<pre><code>&gt;&gt;&gt; r = requests.head('https://github.com/', allow_redirects=True)\n\n&gt;&gt;&gt; r.url\n'https://github.com/'\n\n&gt;&gt;&gt; r.history\n[&lt;Response [301]&gt;]\n</code></pre>\n</blockquote>\n\n<p>So, in your code, change this:</p>\n\n<pre><code>r = requests.head(testpoint_url)\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>r = requests.head(testpoint_url, allow_redirects=True)\n</code></pre>\n\n<p>Then <code>r.status_code</code> will be the final status code (ie, 404) after all redirects have been followed.</p>\n"}], "owner": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1417, "favorite_count": 1, "accepted_answer_id": 52749852, "answer_count": 1, "score": 0, "last_activity_date": 1539212324, "creation_date": 1539211006, "question_id": 52749710, "link": "https://stackoverflow.com/questions/52749710/http-404-status-code-not-found-shown-as-302", "title": "HTTP 404 status code (Not Found) shown as 302", "body": "<p>I'm trying to retrieve the HTTP status code of a list of URLs in python, using the following piece of code:</p>\n\n<pre><code>try:\n    r = requests.head(testpoint_url)\n    print(testpoint_url+\" : \"+str(r.status_code))\n    # prints the int of the status code.\nexcept requests.ConnectionError:\n    print(\"failed to connect\")\n</code></pre>\n\n<p>Surprisingly, for some URLs, I get <code>302</code> status code while if browsed by a browser, you see it showing a 404 code!</p>\n\n<p><a href=\"https://i.stack.imgur.com/vdBdi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vdBdi.png\" alt=\"enter image description here\"></a></p>\n\n<p>What is going on? How can I get the real status code (e.g. 404)?</p>\n"}, {"tags": ["python", "c", "python-3.x", "numpy"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1539211120, "post_id": 52749662, "comment_id": 92423777, "body": "Did you try the thing the warning says?"}, {"owner": {"reputation": 541, "user_id": 7517511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/326VD.jpg?s=128&g=1", "display_name": "Arnab Sanyal", "link": "https://stackoverflow.com/users/7517511/arnab-sanyal"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1539211665, "post_id": 52749662, "comment_id": 92423911, "body": "@user2357112 I tried a <code>#define NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION</code> in <code>my_c_file.c</code>  but I don&#39;t think that helped"}], "answers": [{"tags": [], "owner": {"reputation": 3496, "user_id": 2536294, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/5FtIH.png?s=128&g=1", "display_name": "adrin", "link": "https://stackoverflow.com/users/2536294/adrin"}, "is_accepted": false, "score": 6, "last_activity_date": 1573551341, "creation_date": 1573551341, "answer_id": 58815771, "question_id": 52749662, "link": "https://stackoverflow.com/questions/52749662/using-deprecated-numpy-api/58815771#58815771", "title": "Using deprecated Numpy API", "body": "<p>This is a known issue, and it stems from the fact that Cython historically has supported very old <code>numpy</code> versions. As <code>cython</code>'s <a href=\"https://github.com/cython/cython/blob/70d770324a230df6a429d82cf8e8187cd34b9709/docs/src/userguide/source_files_and_compilation.rst\" rel=\"noreferrer\">doc</a> mentions:</p>\n\n<blockquote>\n  <p>Despite this, you will still get warnings like the following from the\n  compiler, because Cython is using a deprecated Numpy API:</p>\n\n<pre><code>.../include/numpy/npy_1_7_deprecated_api.h:15:2: warning: #warning\n\"Using deprecated NumPy API, disable it by \" \"#defining\nNPY_NO_DEPRECATED_API NPY_1_7_API_VERSION\" [-Wcpp]\n</code></pre>\n  \n  <p>For the time being, it is just a warning that you can ignore.</p>\n</blockquote>\n\n<p>However, there's work in progress in several pull requests and the parent issue tracking the progress can be found <a href=\"https://github.com/cython/cython/issues/2498\" rel=\"noreferrer\">here</a>.</p>\n\n<p>Soon these warnings will be gone.</p>\n"}, {"tags": [], "owner": {"reputation": 840, "user_id": 2557404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fac664de62cf73081e721071d5b9d0d?s=128&d=identicon&r=PG", "display_name": "Jim Parker", "link": "https://stackoverflow.com/users/2557404/jim-parker"}, "is_accepted": false, "score": 2, "last_activity_date": 1605825664, "last_edit_date": 1605825664, "creation_date": 1605802470, "answer_id": 64915608, "question_id": 52749662, "link": "https://stackoverflow.com/questions/52749662/using-deprecated-numpy-api/64915608#64915608", "title": "Using deprecated Numpy API", "body": "<p>Until this is resolved upstream as mentioned by adrin, I found a way to insert the preprocessor symbol <code>NPY_NO_DEPRECATED_API</code> into the <code>setup.py</code> code so that the warning will be suppressed.  Add the keyword <code>define_macros=[args]</code> to your <code>Extension</code>. Just putting it in your .h, .cpp, or .pyx files will not help because the auto-generated project .cpp file will not see the preprocessor defines.\n<a href=\"https://docs.python.org/2.0/dist/node13.html\" rel=\"nofollow noreferrer\">https://docs.python.org/2.0/dist/node13.html</a></p>\n<p>Specifically for OP's case:</p>\n<pre><code>module1 = Extension('my_wrapper', sources = ['my_c_file.c'],  \n    include_dirs=[numpy.get_include()],\n    extra_compile_args = ['-fopenmp'],\n    extra_link_args = ['-lgomp']),\n    define_macros=[('NPY_NO_DEPRECATED_API', 'NPY_1_7_API_VERSION')])\n</code></pre>\n<p>This will add <code>-DNPY_NO_DEPRECATED_API=NPY_1_7_API_VERSION</code> to the compile line.</p>\n<p>Fair warning: doing this may enable several new warnings that were suppressed because it was maintaining compatibility with old versions.</p>\n"}], "owner": {"reputation": 541, "user_id": 7517511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/326VD.jpg?s=128&g=1", "display_name": "Arnab Sanyal", "link": "https://stackoverflow.com/users/7517511/arnab-sanyal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4703, "favorite_count": 0, "answer_count": 2, "score": 7, "last_activity_date": 1605825664, "creation_date": 1539210743, "question_id": 52749662, "link": "https://stackoverflow.com/questions/52749662/using-deprecated-numpy-api", "title": "Using deprecated Numpy API", "body": "<p>I am writing a small C function that is supposed to accelerate some compute intensive portions of a larger application that I have in Python. Naturally I have written a wrapper that ensures that my C code can talk seamlessly with my Python numpy arrays. All is well and I am using the following <code>setup.py</code></p>\n\n<pre><code>from distutils.core import setup, Extension\nimport numpy\n\nmodule1 = Extension('my_wrapper', \n    sources = ['my_c_file.c'],  \n    include_dirs=[numpy.get_include()],\n    extra_compile_args = ['-fopenmp'],\n    extra_link_args = ['-lgomp'])\n\nsetup(name = 'my_wrapper',\n    version = '1.0',\n    description = 'Some description here',\n    ext_modules = [module1])\n</code></pre>\n\n<p>Everything works when I compile this with the command <code>python3 setup.py install</code> and the code behaviour is as expected but I am getting the following warning,</p>\n\n<pre><code>warning: #warning \"Using deprecated NumPy API, disable it by \" \"#defining NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION\" [-Wcpp]\n#warning \"Using deprecated NumPy API, disable it by \" \\\n^\n</code></pre>\n\n<p>Although this is just a warning, I would still like to avoid this if I can. Any ideas on how to do that?</p>\n"}, {"tags": ["python", "list", "dictionary", "set"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1539210750, "post_id": 52749634, "comment_id": 92423658, "body": "Yes it&#39;s possible. But <code>[2]</code> doesn&#39;t exist as an index when your list only contains a single item at index <code>0</code>, which happens to be a <code>set</code>"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1539212246, "post_id": 52749634, "comment_id": 92424071, "body": "Please work through basic tutorials on the language features you&#39;re trying to use.  This will solve your specific problems, and give you a wider understanding of the language."}, {"owner": {"reputation": 41, "user_id": 10459602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/544c2d19de38d72f3d012ee6d14f11f1?s=128&d=identicon&r=PG&f=1", "display_name": "fynx", "link": "https://stackoverflow.com/users/10459602/fynx"}, "edited": false, "score": 0, "creation_date": 1539216153, "post_id": 52749634, "comment_id": 92424908, "body": "Yes I understand but in C++ you can have a vector v and start assigning it v[i] right away as per the code block above.  What is the equivalent data structure of vector in Python where I can use this kind of functionality?"}, {"owner": {"reputation": 784, "user_id": 6360875, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wta2LddsrRY/AAAAAAAAAAI/AAAAAAAAAlA/9mA91SZNpn8/photo.jpg?sz=128", "display_name": "Tanmay jain", "link": "https://stackoverflow.com/users/6360875/tanmay-jain"}, "edited": false, "score": 0, "creation_date": 1539236795, "post_id": 52749634, "comment_id": 92429605, "body": "@fynx take a look at this <a href=\"https://docs.python.org/3/tutorial/datastructures.html\" rel=\"nofollow noreferrer\">python_in_built_ds_page</a>"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 10459602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/544c2d19de38d72f3d012ee6d14f11f1?s=128&d=identicon&r=PG&f=1", "display_name": "fynx", "link": "https://stackoverflow.com/users/10459602/fynx"}, "edited": false, "score": 0, "creation_date": 1539212395, "post_id": 52749668, "comment_id": 92424107, "body": "Thanks, so what your saying is that all the 3 statements below are equivalent?      v = []      v.append({3, 2})      v.append(set([3, 1]))      v.append(set((1, 3)))"}, {"owner": {"reputation": 8890, "user_id": 4349415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ta4zl.png?s=128&g=1", "display_name": "Mike Scotty", "link": "https://stackoverflow.com/users/4349415/mike-scotty"}, "reply_to_user": {"reputation": 41, "user_id": 10459602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/544c2d19de38d72f3d012ee6d14f11f1?s=128&d=identicon&r=PG&f=1", "display_name": "fynx", "link": "https://stackoverflow.com/users/10459602/fynx"}, "edited": false, "score": 0, "creation_date": 1539212564, "post_id": 52749668, "comment_id": 92424152, "body": "@fynx exactly, <code>{3, 2} == set([3, 1] == set((1, 3))</code>"}, {"owner": {"reputation": 41, "user_id": 10459602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/544c2d19de38d72f3d012ee6d14f11f1?s=128&d=identicon&r=PG&f=1", "display_name": "fynx", "link": "https://stackoverflow.com/users/10459602/fynx"}, "edited": false, "score": 0, "creation_date": 1539215646, "post_id": 52749668, "comment_id": 92424796, "body": "Ok Thanks, but I am trying to convert C++ code which uses vectors into Python, so can I use a List for this purpose? here is the code I am trying to convert: ( The code does not format properly here so I will add it up above)"}, {"owner": {"reputation": 8890, "user_id": 4349415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ta4zl.png?s=128&g=1", "display_name": "Mike Scotty", "link": "https://stackoverflow.com/users/4349415/mike-scotty"}, "reply_to_user": {"reputation": 41, "user_id": 10459602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/544c2d19de38d72f3d012ee6d14f11f1?s=128&d=identicon&r=PG&f=1", "display_name": "fynx", "link": "https://stackoverflow.com/users/10459602/fynx"}, "edited": false, "score": 0, "creation_date": 1539239543, "post_id": 52749668, "comment_id": 92430693, "body": "@fynx sets are not ordered, so in your case, you should use a list of list or a list of tuples"}], "tags": [], "owner": {"reputation": 8890, "user_id": 4349415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ta4zl.png?s=128&g=1", "display_name": "Mike Scotty", "link": "https://stackoverflow.com/users/4349415/mike-scotty"}, "is_accepted": false, "score": 4, "last_activity_date": 1539210783, "creation_date": 1539210783, "answer_id": 52749668, "question_id": 52749634, "link": "https://stackoverflow.com/questions/52749634/python-is-it-possible-to-create-a-list-containing-sets-within-it/52749668#52749668", "title": "Python - Is it possible to create a list containing sets within it?", "body": "<blockquote>\n  <p>set(3, 2)</p>\n</blockquote>\n\n<p>That's not how you define a set. The set constructor only takes one argument.</p>\n\n<p>Instead use: </p>\n\n<pre><code>v = []\nv.append({3, 2})\nprint(v)\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>[{2, 3}]\n</code></pre>\n\n<p>As an alternative, you can pass any iterable to the set constructor:</p>\n\n<pre><code>set((3, 2))\nset([3, 2])\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10459602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/544c2d19de38d72f3d012ee6d14f11f1?s=128&d=identicon&r=PG&f=1", "display_name": "fynx", "link": "https://stackoverflow.com/users/10459602/fynx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539215981, "creation_date": 1539210594, "last_edit_date": 1539215981, "question_id": 52749634, "link": "https://stackoverflow.com/questions/52749634/python-is-it-possible-to-create-a-list-containing-sets-within-it", "title": "Python - Is it possible to create a list containing sets within it?", "body": "<p>Is it possible to create a list containing sets within it?</p>\n\n<p>This code is not compiling ( should I use a dictionary of sets instead? )</p>\n\n<pre><code>v = []\n\nv.append(set(3, 2))\n\nv[2] = set()\n\nv[2].append(3, 1)\n</code></pre>\n\n<p>I am trying to do a graph traversal using a quasi Dijkstra's Algorithm.\nI am trying to store the adjacency list in sets within a list.\nIs this the right approach or should I use another data structure?</p>\n\n<p>I am trying to convert the following C++ into Python. what data structure can I use for the Vector?</p>\n\n<pre><code>        long long leastTimeToInterview (int n, int k, int m)\n    {\n       vector&lt;set&lt;pair&lt;int, int&gt;&gt;&gt; v (n + 1); // first = time, second = stop #\n\n       while (m--) {\n          int i, j, t; cin &gt;&gt; i &gt;&gt; j &gt;&gt; t;\n          v[i].insert ({ t, j });\n          v[j].insert ({ t, i });\n       }\n\n       set&lt;pair&lt;int, int&gt;&gt; s ({ { 0,1 } });\n       unordered_set&lt;int&gt; done;\n</code></pre>\n"}, {"tags": ["python", "api", "telegram", "attributeerror"], "comments": [{"owner": {"reputation": 8215, "user_id": 263162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc7b6c240ed52a7aadf8603cca0766?s=128&d=identicon&r=PG", "display_name": "Ricardo C&#225;rdenes", "link": "https://stackoverflow.com/users/263162/ricardo-c%c3%a1rdenes"}, "edited": false, "score": 0, "creation_date": 1539211062, "post_id": 52749629, "comment_id": 92423765, "body": "How did you install the package? Notice that there are a number of Telegram related packages available at PyPI, and many of them do not have the API that you&#39;re looking for."}, {"owner": {"reputation": 8215, "user_id": 263162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc7b6c240ed52a7aadf8603cca0766?s=128&d=identicon&r=PG", "display_name": "Ricardo C&#225;rdenes", "link": "https://stackoverflow.com/users/263162/ricardo-c%c3%a1rdenes"}, "edited": false, "score": 0, "creation_date": 1539211137, "post_id": 52749629, "comment_id": 92423784, "body": "Packages that give you the <code>Bot</code> class would be for example <code>telegram-bot</code> or <code>python-telegram-bot</code>, but we would need to know which one you intend to use"}, {"owner": {"reputation": 57, "user_id": 10311011, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0ZbrD6XSoQQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP4W0JoW7qUhv570VZ1GqEZKTQb3A/mo/photo.jpg?sz=128", "display_name": "Duncan Jansen", "link": "https://stackoverflow.com/users/10311011/duncan-jansen"}, "reply_to_user": {"reputation": 8215, "user_id": 263162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc7b6c240ed52a7aadf8603cca0766?s=128&d=identicon&r=PG", "display_name": "Ricardo C&#225;rdenes", "link": "https://stackoverflow.com/users/263162/ricardo-c%c3%a1rdenes"}, "edited": false, "score": 0, "creation_date": 1539211606, "post_id": 52749629, "comment_id": 92423892, "body": "I did: &quot;pip install telegram&quot;."}, {"owner": {"reputation": 57, "user_id": 10311011, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0ZbrD6XSoQQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP4W0JoW7qUhv570VZ1GqEZKTQb3A/mo/photo.jpg?sz=128", "display_name": "Duncan Jansen", "link": "https://stackoverflow.com/users/10311011/duncan-jansen"}, "reply_to_user": {"reputation": 8215, "user_id": 263162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc7b6c240ed52a7aadf8603cca0766?s=128&d=identicon&r=PG", "display_name": "Ricardo C&#225;rdenes", "link": "https://stackoverflow.com/users/263162/ricardo-c%c3%a1rdenes"}, "edited": false, "score": 0, "creation_date": 1539211727, "post_id": 52749629, "comment_id": 92423929, "body": "As I understand it now I should have done: &quot;pip install telegram-bot&quot;? Or better inspect which package I download and use."}], "answers": [{"tags": [], "owner": {"reputation": 8215, "user_id": 263162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc7b6c240ed52a7aadf8603cca0766?s=128&d=identicon&r=PG", "display_name": "Ricardo C&#225;rdenes", "link": "https://stackoverflow.com/users/263162/ricardo-c%c3%a1rdenes"}, "is_accepted": false, "score": 3, "last_activity_date": 1539211996, "creation_date": 1539211996, "answer_id": 52749847, "question_id": 52749629, "link": "https://stackoverflow.com/questions/52749629/attributeerror-module-telegram-has-no-attribute-bot/52749847#52749847", "title": "AttributeError: module &#39;telegram&#39; has no attribute &#39;Bot&#39;", "body": "<p>It seems like you've installed the <code>telegram</code> package (according to the comments). Uninstall that one, and then you need to go and choose one that gives you the <code>Bot</code> class instead. For example:</p>\n\n<ul>\n<li><a href=\"https://pypi.org/project/python-telegram-bot/\" rel=\"nofollow noreferrer\">python-telegram-bot</a></li>\n<li><a href=\"https://pypi.org/project/telegram-bot/\" rel=\"nofollow noreferrer\">telegram-bot</a></li>\n</ul>\n\n<p>Looks to me like the first one is more developed (the second one hasn't been touched in a while), but they have different licenses. Explore the options!</p>\n"}, {"tags": [], "owner": {"reputation": 2600, "user_id": 3383640, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/tgnjS.png?s=128&g=1", "display_name": "Suuuehgi", "link": "https://stackoverflow.com/users/3383640/suuuehgi"}, "is_accepted": false, "score": 6, "last_activity_date": 1547374342, "creation_date": 1547374342, "answer_id": 54167858, "question_id": 52749629, "link": "https://stackoverflow.com/questions/52749629/attributeerror-module-telegram-has-no-attribute-bot/54167858#54167858", "title": "AttributeError: module &#39;telegram&#39; has no attribute &#39;Bot&#39;", "body": "<p>I assume you're referring to <a href=\"https://github.com/python-telegram-bot/python-telegram-bot/wiki/Introduction-to-the-API#hello-telegram\" rel=\"noreferrer\">python-telegram-bot</a> and that you solely use <code>python-pip</code> for package installation (and not your OS's package manager):</p>\n\n<ol>\n<li>Ensure that you don't have colliding telegram packages installed: </li>\n</ol>\n\n<pre><code>~&gt; pip3 list | grep -i telegram\npython-telegram-bot 11.1.0\n</code></pre>\n\n<ol start=\"2\">\n<li>Force reinstall:</li>\n</ol>\n\n<pre><code>pip install --user --force-reinstall python-telegram-bot\n</code></pre>\n\n<ol start=\"3\">\n<li>Ensure that you don't accidentally have a <code>telegram.py</code> within your project.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 2515, "user_id": 9422637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TZCt4.jpg?s=128&g=1", "display_name": "Saeed", "link": "https://stackoverflow.com/users/9422637/saeed"}, "is_accepted": false, "score": 1, "last_activity_date": 1568227817, "creation_date": 1568227817, "answer_id": 57895181, "question_id": 52749629, "link": "https://stackoverflow.com/questions/52749629/attributeerror-module-telegram-has-no-attribute-bot/57895181#57895181", "title": "AttributeError: module &#39;telegram&#39; has no attribute &#39;Bot&#39;", "body": "<p>Note that your file name (.py) does not the same with your package name.</p>\n"}, {"tags": [], "owner": {"reputation": 379, "user_id": 4784025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/291947249a324d10ba6c21b63a85994c?s=128&d=identicon&r=PG&f=1", "display_name": "Loniks", "link": "https://stackoverflow.com/users/4784025/loniks"}, "is_accepted": false, "score": 1, "last_activity_date": 1583683117, "creation_date": 1583683117, "answer_id": 60589274, "question_id": 52749629, "link": "https://stackoverflow.com/questions/52749629/attributeerror-module-telegram-has-no-attribute-bot/60589274#60589274", "title": "AttributeError: module &#39;telegram&#39; has no attribute &#39;Bot&#39;", "body": "<p>I have faced the same issue and founded comment in <a href=\"https://github.com/python-telegram-bot/python-telegram-bot/issues/817#issuecomment-328762020\" rel=\"nofollow noreferrer\">releated GitHub issue</a> that if you run code in <code>test.py</code> file you will have this issue. Maybe it will solve the issue for you.</p>\n"}], "owner": {"reputation": 57, "user_id": 10311011, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0ZbrD6XSoQQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP4W0JoW7qUhv570VZ1GqEZKTQb3A/mo/photo.jpg?sz=128", "display_name": "Duncan Jansen", "link": "https://stackoverflow.com/users/10311011/duncan-jansen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9448, "favorite_count": 1, "answer_count": 4, "score": 4, "last_activity_date": 1583683117, "creation_date": 1539210570, "question_id": 52749629, "link": "https://stackoverflow.com/questions/52749629/attributeerror-module-telegram-has-no-attribute-bot", "title": "AttributeError: module &#39;telegram&#39; has no attribute &#39;Bot&#39;", "body": "<p>I am using python and getting this error.</p>\n\n<ol>\n<li>import telegram</li>\n<li>telegram.Bot(token = '###############')</li>\n</ol>\n\n<p>When I run this, appears: \n\"AttributeError: module 'telegram' has no attribute 'Bot'\"\nAny ideas how to solve this?</p>\n"}, {"tags": ["python", "arrays", "numpy", "multiplication", "lapack"], "comments": [{"owner": {"reputation": 171, "user_id": 9360793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a77bdf22516d1fe4d6a0f4e69efce6f?s=128&d=identicon&r=PG&f=1", "display_name": "inarighas", "link": "https://stackoverflow.com/users/9360793/inarighas"}, "edited": false, "score": 1, "creation_date": 1539210955, "post_id": 52749624, "comment_id": 92423736, "body": "<code>z = np.einsum(&#39;ij,ijk-&gt;ijk&#39;,w,y)</code> does the job !"}], "answers": [{"comments": [{"owner": {"reputation": 1788, "user_id": 4867193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08dafc81858d97aae00892fd98d4c96?s=128&d=identicon&r=PG", "display_name": "DrM", "link": "https://stackoverflow.com/users/4867193/drm"}, "reply_to_user": {"reputation": 171, "user_id": 9360793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a77bdf22516d1fe4d6a0f4e69efce6f?s=128&d=identicon&r=PG&f=1", "display_name": "inarighas", "link": "https://stackoverflow.com/users/9360793/inarighas"}, "edited": false, "score": 0, "creation_date": 1539268167, "post_id": 52749981, "comment_id": 92448236, "body": "What you see in the answer, was copied from my screen.  I just tried it again to confirm.  Please try creating a fresh program file and insert just those four lines of code (or seven with the print statements)"}, {"owner": {"reputation": 171, "user_id": 9360793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a77bdf22516d1fe4d6a0f4e69efce6f?s=128&d=identicon&r=PG&f=1", "display_name": "inarighas", "link": "https://stackoverflow.com/users/9360793/inarighas"}, "edited": false, "score": 0, "creation_date": 1539269617, "post_id": 52749981, "comment_id": 92449237, "body": "yes it works on this example, but when i use it in my computation it raises an error (it cannot broadcast on the third dimensionn when its length is not equal to the length of the first dim/...). Anyway, thank you !"}, {"owner": {"reputation": 1788, "user_id": 4867193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08dafc81858d97aae00892fd98d4c96?s=128&d=identicon&r=PG", "display_name": "DrM", "link": "https://stackoverflow.com/users/4867193/drm"}, "reply_to_user": {"reputation": 171, "user_id": 9360793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a77bdf22516d1fe4d6a0f4e69efce6f?s=128&d=identicon&r=PG&f=1", "display_name": "inarighas", "link": "https://stackoverflow.com/users/9360793/inarighas"}, "edited": false, "score": 0, "creation_date": 1539274193, "post_id": 52749981, "comment_id": 92451960, "body": "You&#39;re right, I fixed it,  missed a transpose on the y array.   It now generalizes to any number &gt; 0 in the third dimension"}, {"owner": {"reputation": 1788, "user_id": 4867193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08dafc81858d97aae00892fd98d4c96?s=128&d=identicon&r=PG", "display_name": "DrM", "link": "https://stackoverflow.com/users/4867193/drm"}, "reply_to_user": {"reputation": 171, "user_id": 9360793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a77bdf22516d1fe4d6a0f4e69efce6f?s=128&d=identicon&r=PG&f=1", "display_name": "inarighas", "link": "https://stackoverflow.com/users/9360793/inarighas"}, "edited": false, "score": 1, "creation_date": 1539274873, "post_id": 52749981, "comment_id": 92452268, "body": "A note of caution,  when working with sufficiently large arrays, be careful about generating a lot of cache misses and check timing."}, {"owner": {"reputation": 551, "user_id": 9158985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1360d2e94e5bf96ba76459326334d97f?s=128&d=identicon&r=PG&f=1", "display_name": "natemcintosh", "link": "https://stackoverflow.com/users/9158985/natemcintosh"}, "edited": false, "score": 0, "creation_date": 1615987445, "post_id": 52749981, "comment_id": 117861462, "body": "Is there a way to do this but with matrix multiplication instead of element-wise multiplication?"}, {"owner": {"reputation": 551, "user_id": 9158985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1360d2e94e5bf96ba76459326334d97f?s=128&d=identicon&r=PG&f=1", "display_name": "natemcintosh", "link": "https://stackoverflow.com/users/9158985/natemcintosh"}, "edited": false, "score": 0, "creation_date": 1616700980, "post_id": 52749981, "comment_id": 118093087, "body": "The einsum notation for matrix multiplication of a 2d array on each slice of a 3d array is <code>np.einsum(&quot;ij,jkl-&gt;ikl&quot;, a, b)</code>"}], "tags": [], "owner": {"reputation": 1788, "user_id": 4867193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08dafc81858d97aae00892fd98d4c96?s=128&d=identicon&r=PG", "display_name": "DrM", "link": "https://stackoverflow.com/users/4867193/drm"}, "is_accepted": true, "score": 2, "last_activity_date": 1539274112, "last_edit_date": 1539274112, "creation_date": 1539213054, "answer_id": 52749981, "question_id": 52749624, "link": "https://stackoverflow.com/questions/52749624/multiplying-a-2d-array-with-each-slice-of-3d-array-numpy/52749981#52749981", "title": "Multiplying a 2d array with each slice of 3d array - Numpy", "body": "<p>Given arrays</p>\n\n<pre><code>import numpy as np\n\nw = np.array([[1,5], [4,9], [12,15]])\n\nprint(w)\n\n[[ 1  5]\n [ 4  9]\n [12 15]]\n</code></pre>\n\n<p>and </p>\n\n<pre><code>y = np.ones((3,2,3))\n\nprint(y)\n\n[[[ 1.  1.  1.]\n  [ 1.  1.  1.]]\n\n [[ 1.  1.  1.]\n  [ 1.  1.  1.]]\n\n [[ 1.  1.  1.]\n  [ 1.  1.  1.]]]\n</code></pre>\n\n<p>We can multiple the arrays directly,</p>\n\n<pre><code>z = ( y.transpose() * w.transpose() ).transpose()\n\nprint(z)\n\n[[[  1.   1.   1.]\n  [  5.   5.   5.]]\n\n [[  4.   4.   4.]\n  [  9.   9.   9.]]\n\n [[ 12.  12.  12.]\n  [ 15.  15.  15.]]]\n</code></pre>\n\n<p>We might note that this produces the same result as np.einsum('ij,ijk->ijk',w,y), perhaps with a little less effort and overhead.</p>\n"}], "owner": {"reputation": 171, "user_id": 9360793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a77bdf22516d1fe4d6a0f4e69efce6f?s=128&d=identicon&r=PG&f=1", "display_name": "inarighas", "link": "https://stackoverflow.com/users/9360793/inarighas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1696, "favorite_count": 0, "accepted_answer_id": 52749981, "answer_count": 1, "score": 3, "last_activity_date": 1539274112, "creation_date": 1539210517, "question_id": 52749624, "link": "https://stackoverflow.com/questions/52749624/multiplying-a-2d-array-with-each-slice-of-3d-array-numpy", "title": "Multiplying a 2d array with each slice of 3d array - Numpy", "body": "<p>I am looking for an optimized way of computing a element wise multiplication of a 2d array by each slice of a 3d array (using numpy).</p>\n\n<p>for example: </p>\n\n<p><code>w = np.array([[1,5], [4,9], [12,15]])\ny = np.ones((3,2,3))</code></p>\n\n<p>I want to get a result as a 3d array with the same shape as <code>y</code>.</p>\n\n<p>Broadcasting using the * operator is not allowed.\nIn my case, the third dimensions is very long and a for loop is not convenient.</p>\n"}, {"tags": ["python", "python-3.6", "argparse"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1539217483, "post_id": 52749597, "comment_id": 92425215, "body": "<a href=\"https://docs.python.org/3/library/argparse.html#sub-commands\" rel=\"nofollow noreferrer\">docs.python.org/3/library/argparse.html#sub-commands</a> - says <code>add_parser</code>  takes <code>any ArgumentParser constructor arguments</code>,  I suppose it could be more explicit (the topic has come up in a bug/issue)."}], "answers": [{"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1539210930, "creation_date": 1539210930, "answer_id": 52749696, "question_id": 52749597, "link": "https://stackoverflow.com/questions/52749597/python-argparse-how-to-control-line-wrapping-in-help-screen-for-subparsers/52749696#52749696", "title": "Python argparse: how to control line wrapping in help screen for subparsers?", "body": "<p>You need to give the subparser the same <code>formatter_class</code> you gave to the main parser, which you can do by passing <code>formatter_class</code> to <code>add_parser</code>:</p>\n\n<pre><code>abcd_parser = subparsers.add_parser('abcd', formatter_class=RawTextHelpFormatter)\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 6511046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46168424729018562ad9ee479baecc27?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/6511046/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 590, "favorite_count": 0, "accepted_answer_id": 52749696, "answer_count": 1, "score": 1, "last_activity_date": 1539210977, "creation_date": 1539210354, "last_edit_date": 1539210977, "question_id": 52749597, "link": "https://stackoverflow.com/questions/52749597/python-argparse-how-to-control-line-wrapping-in-help-screen-for-subparsers", "title": "Python argparse: how to control line wrapping in help screen for subparsers?", "body": "<p>I'm using Python 3.6.3 and have this piece of code:</p>\n\n<pre><code>import argparse\nfrom argparse import RawTextHelpFormatter\n\nparser = argparse.ArgumentParser(prog='foobar',\n                                     formatter_class=RawTextHelpFormatter)\nparser.add_argument('-lf', '--logfile', dest='logfile', default='/dev/null',\n                    help='some very long help message goes here ..............................\\n' +\n                   'more text here xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx')\n\nsubparsers = parser.add_subparsers()\nabcd_parser = subparsers.add_parser('abcd')\n\nabcd_parser.add_argument('zzz', nargs='+',\n                         help='A very long help message\\ngoes here...... more help text goes here zzzzzzz   zzzzzzzzzzzzzzzzzzzzzzz  ')\n\n\nargs = parser.parse_args()\n</code></pre>\n\n<p>The help output looks like:</p>\n\n<pre><code>$ ./foobar  -h\nusage: foobar [-h] [-lf LOGFILE] {abcd} ...\n\npositional arguments:\n  {abcd}\n\noptional arguments:\n  -h, --help            show this help message and exit\n  -lf LOGFILE, --logfile LOGFILE\n                        some very long help message goes here ..............................\n                        more text here xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n</code></pre>\n\n<p>The above output doesn't wrap the help text, as expected (except where i explicitly put in \"\\n\")</p>\n\n<p>However, the help output for the subparser looks like:</p>\n\n<pre><code>$ ./foobar  abcd  -h\nusage: foobar abcd [-h] zzz [zzz ...]\n\npositional arguments:\n  zzz         A very long help message goes here...... more help text goes\n              here zzzzzzz zzzzzzzzzzzzzzzzzzzzzzz\n\noptional arguments:\n  -h, --help  show this help message and exit\n</code></pre>\n\n<ol>\n<li>How can i get the \"goes here\" to be printed on a new line (i specified \"\\n\" but that didn't work)</li>\n<li>How can i disable the line wrap so that the entire help text for the \"zzz\" argument is on one line?</li>\n</ol>\n"}, {"tags": ["javascript", "python"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 4, "creation_date": 1539210182, "post_id": 52749559, "comment_id": 92423503, "body": "No, since if the value in the JavaScript version exists, but is <code>null</code>, it will take <code>value_if_empty</code> as well."}, {"owner": {"reputation": 8890, "user_id": 4349415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ta4zl.png?s=128&g=1", "display_name": "Mike Scotty", "link": "https://stackoverflow.com/users/4349415/mike-scotty"}, "edited": false, "score": 3, "creation_date": 1539210315, "post_id": 52749559, "comment_id": 92423542, "body": "Not just for <code>null</code>, but for any <code>falsey</code> values, such as <code>&quot;&quot;</code>, <code>false</code>, <code>0</code>, <code>Nan</code>, <code>null</code> or <code>undefined</code>."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1539211093, "post_id": 52749559, "comment_id": 92423770, "body": "It would make more sense to just use a JS <code>Map</code>"}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1539210425, "post_id": 52749603, "comment_id": 92423567, "body": "That still does the wrong thing if an object actually has <code>undefined</code> as a property value."}, {"owner": {"reputation": 8890, "user_id": 4349415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ta4zl.png?s=128&g=1", "display_name": "Mike Scotty", "link": "https://stackoverflow.com/users/4349415/mike-scotty"}, "edited": false, "score": 0, "creation_date": 1539210471, "post_id": 52749603, "comment_id": 92423578, "body": "It would make more sense to check if the property exists, e.g. with <code>hasOwnProperty</code>."}], "tags": [], "owner": {"reputation": 106, "user_id": 2774695, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ccb47d8a4d46ba18331d2ab8ff383feb?s=128&d=identicon&r=PG&f=1", "display_name": "user2774695", "link": "https://stackoverflow.com/users/2774695/user2774695"}, "is_accepted": false, "score": 0, "last_activity_date": 1539210377, "creation_date": 1539210377, "answer_id": 52749603, "question_id": 52749559, "link": "https://stackoverflow.com/questions/52749559/dict-lookup-in-python-to-javascript/52749603#52749603", "title": "Dict lookup in python to javascript", "body": "<p>You would have to do some sort of check yourself </p>\n\n<p>One method is to define a <code>get</code> function and use that </p>\n\n<p>e.g. </p>\n\n<pre><code>function get(object, key, default_value) {\n    var result = object[key];\n    return (typeof result !== \"undefined\") ? result : default_value;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10332687"}, "edited": false, "score": 0, "creation_date": 1539210610, "post_id": 52749606, "comment_id": 92423610, "body": "thanks for this clear explanation -- so then what would be the javascript to do the python equivalent?"}, {"owner": {"reputation": 11289, "user_id": 1822698, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/725a332cc5b93972e715f071b631f4a8?s=128&d=identicon&r=PG", "display_name": "slider", "link": "https://stackoverflow.com/users/1822698/slider"}, "edited": false, "score": 1, "creation_date": 1539210772, "post_id": 52749606, "comment_id": 92423664, "body": "What about <code>planType in PLAN_TO_COST_PER_UNIT ? PLAN_TO_COST_PER_UNIT[planType] : value_if_empty</code>?"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 1, "last_activity_date": 1539211635, "last_edit_date": 1539211635, "creation_date": 1539210410, "answer_id": 52749606, "question_id": 52749559, "link": "https://stackoverflow.com/questions/52749559/dict-lookup-in-python-to-javascript/52749606#52749606", "title": "Dict lookup in python to javascript", "body": "<p><strong>No</strong>.</p>\n\n<p><strong>Python</strong>. In Python if you write:</p>\n\n<pre><code>PLAN_TO_COST_PER_UNIT.get(planType, value_if_empty)\n</code></pre>\n\n<p>This means that if the <code>planType</code> key exists, that value is returned, regardless what that value is. In case it can not be found <code>value_if_empty</code> is returned.</p>\n\n<p>For example:</p>\n\n<pre><code>&gt;&gt;&gt; a = {'key': 0}\n&gt;&gt;&gt; a.get('key', 1425)\n0\n</code></pre>\n\n<p><strong>JavaScript</strong>. Your JavaScript version does not doe that: it fetches the value for the key, and in case no such key exists, <code>undefined</code> is returned. Then you use <code>||</code> such that if the \"truthiness\" of the result is <code>false</code>, it takes the right operand (<code>value_if_empty</code>).</p>\n\n<p>If you however would construct an object where the value is <code>0</code>, then it would still take the <code>value_if_empty</code>, like:</p>\n\n<pre><code>&gt; a = {key: 0}\n{ key: 0 }\n&gt; a['key'] || 1425\n1425\n</code></pre>\n\n<p>I think the closest to the Python version is making a membership check:</p>\n\n<pre><code>function tryget(obj, key, missing) {\n    if(key in obj) {\n        return obj[key];\n    }\n    else {\n        return missing;\n    }\n}\n</code></pre>\n\n<p>Then we thus can call it with <code>tryget({a: 0}, 'a', 1425)</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10332687"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 1, "accepted_answer_id": 52749606, "answer_count": 2, "score": 3, "last_activity_date": 1539211635, "creation_date": 1539210096, "question_id": 52749559, "link": "https://stackoverflow.com/questions/52749559/dict-lookup-in-python-to-javascript", "title": "Dict lookup in python to javascript", "body": "<p>Are the following two expressions equivalent?</p>\n\n<pre><code># python\nPLAN_TO_COST_PER_UNIT.get(planType, value_if_empty)\n\n# javascript\nPLAN_TO_COST_PER_UNIT[planType] || value_if_empty;\n</code></pre>\n\n<p>If not, what would be the closest equivalent in javasript to doing the above python dict lookup?</p>\n"}, {"tags": ["python", "testing", "pytest", "conda", "tox"], "comments": [{"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1539279533, "post_id": 52749553, "comment_id": 92454690, "body": "<a href=\"https://stackoverflow.com/questions/30555943/is-it-possible-to-use-tox-with-conda-based-python-installations\" title=\"is it possible to use tox with conda based python installations\">stackoverflow.com/questions/30555943/&hellip;</a>"}, {"owner": {"reputation": 2572, "user_id": 3346915, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/51e60cc6253004b7de8907371b9f9941?s=128&d=identicon&r=PG", "display_name": "Alex Tereshenkov", "link": "https://stackoverflow.com/users/3346915/alex-tereshenkov"}, "reply_to_user": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1539286152, "post_id": 52749553, "comment_id": 92457844, "body": "Thanks, worth digging into. Any non <code>tox</code> solutions are welcome, too :)"}], "answers": [{"comments": [{"owner": {"reputation": 2572, "user_id": 3346915, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/51e60cc6253004b7de8907371b9f9941?s=128&d=identicon&r=PG", "display_name": "Alex Tereshenkov", "link": "https://stackoverflow.com/users/3346915/alex-tereshenkov"}, "edited": false, "score": 1, "creation_date": 1539810304, "post_id": 52860194, "comment_id": 92641558, "body": "Thanks a ton, great tool. Where will this plugin read the paths to the Python installations? From tox.ini files? Or is there any other way to define those? The docs <a href=\"https://github.com/pytest-dev/pytest-xdist#running-tests-in-a-python-subprocess\" rel=\"nofollow noreferrer\">github.com/pytest-dev/&hellip;</a> do not seem to tell anything on this..."}, {"owner": {"reputation": 903, "user_id": 2312300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7bf30b3d1f6893d8710598eaedf84a?s=128&d=identicon&r=PG", "display_name": "SilentGuy", "link": "https://stackoverflow.com/users/2312300/silentguy"}, "reply_to_user": {"reputation": 2572, "user_id": 3346915, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/51e60cc6253004b7de8907371b9f9941?s=128&d=identicon&r=PG", "display_name": "Alex Tereshenkov", "link": "https://stackoverflow.com/users/3346915/alex-tereshenkov"}, "edited": false, "score": 0, "creation_date": 1539878889, "post_id": 52860194, "comment_id": 92669900, "body": "It does not require tox.ini file. Python2 and Python3 should be present in the environment and all the dependencies must be installed in both python2 and python3. Having both python2 and python3 in a virtual environment may be tricky. I would suggest you to try the command without python virtual environment. These commands seem to run tests for me. &gt;python2 --version &gt;python3 --version &gt;pip2 install -r requirements.txt &gt;pip3 install -r requirements.txt &gt;pytest --dist=each --tx popen//python=python3 --tx popen//python=python2"}, {"owner": {"reputation": 2572, "user_id": 3346915, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/51e60cc6253004b7de8907371b9f9941?s=128&d=identicon&r=PG", "display_name": "Alex Tereshenkov", "link": "https://stackoverflow.com/users/3346915/alex-tereshenkov"}, "edited": false, "score": 1, "creation_date": 1539892170, "post_id": 52860194, "comment_id": 92676558, "body": "thanks for getting back. How do I specify paths to conda environments? Could you elaborate on what do you mean by <code>Python2 and Python3 should be present in the environment </code>? Thanks!"}, {"owner": {"reputation": 903, "user_id": 2312300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7bf30b3d1f6893d8710598eaedf84a?s=128&d=identicon&r=PG", "display_name": "SilentGuy", "link": "https://stackoverflow.com/users/2312300/silentguy"}, "reply_to_user": {"reputation": 2572, "user_id": 3346915, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/51e60cc6253004b7de8907371b9f9941?s=128&d=identicon&r=PG", "display_name": "Alex Tereshenkov", "link": "https://stackoverflow.com/users/3346915/alex-tereshenkov"}, "edited": false, "score": 0, "creation_date": 1539892830, "post_id": 52860194, "comment_id": 92676835, "body": "I don&#39;t have experience with conda. I use virtualenv and virtualenvwrapper for python env management. I use pip for package management. Conda may be handling packages and envs differently."}, {"owner": {"reputation": 2572, "user_id": 3346915, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/51e60cc6253004b7de8907371b9f9941?s=128&d=identicon&r=PG", "display_name": "Alex Tereshenkov", "link": "https://stackoverflow.com/users/3346915/alex-tereshenkov"}, "edited": false, "score": 0, "creation_date": 1539894429, "post_id": 52860194, "comment_id": 92677610, "body": "OK, I see. So, when you write <code>python=python3.5</code> how does <code>pytest</code> know where to search for <code>python.exe</code> file for this particular environment?"}, {"owner": {"reputation": 903, "user_id": 2312300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7bf30b3d1f6893d8710598eaedf84a?s=128&d=identicon&r=PG", "display_name": "SilentGuy", "link": "https://stackoverflow.com/users/2312300/silentguy"}, "reply_to_user": {"reputation": 2572, "user_id": 3346915, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/51e60cc6253004b7de8907371b9f9941?s=128&d=identicon&r=PG", "display_name": "Alex Tereshenkov", "link": "https://stackoverflow.com/users/3346915/alex-tereshenkov"}, "edited": false, "score": 0, "creation_date": 1539898807, "post_id": 52860194, "comment_id": 92679370, "body": "If python3.5 exists in system path, it will run fine."}, {"owner": {"reputation": 903, "user_id": 2312300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7bf30b3d1f6893d8710598eaedf84a?s=128&d=identicon&r=PG", "display_name": "SilentGuy", "link": "https://stackoverflow.com/users/2312300/silentguy"}, "reply_to_user": {"reputation": 2572, "user_id": 3346915, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/51e60cc6253004b7de8907371b9f9941?s=128&d=identicon&r=PG", "display_name": "Alex Tereshenkov", "link": "https://stackoverflow.com/users/3346915/alex-tereshenkov"}, "edited": false, "score": 0, "creation_date": 1539898870, "post_id": 52860194, "comment_id": 92679395, "body": "Use this answer to create multiple env <a href=\"https://stackoverflow.com/a/30555944/2312300\">stackoverflow.com/a/30555944/2312300</a>"}], "tags": [], "owner": {"reputation": 903, "user_id": 2312300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7bf30b3d1f6893d8710598eaedf84a?s=128&d=identicon&r=PG", "display_name": "SilentGuy", "link": "https://stackoverflow.com/users/2312300/silentguy"}, "is_accepted": true, "score": 2, "last_activity_date": 1539795983, "creation_date": 1539795983, "answer_id": 52860194, "question_id": 52749553, "link": "https://stackoverflow.com/questions/52749553/how-to-run-python-tests-against-multiple-python-conda-environments/52860194#52860194", "title": "How to run Python tests against multiple Python conda environments?", "body": "<p>You can look into pytest-xdist <a href=\"https://pypi.org/project/pytest-xdist/\" rel=\"nofollow noreferrer\">plugin</a>. It allows you to run tests across different python environments. </p>\n\n<p>Usage:</p>\n\n<pre><code>pytest --dist=each --tx popen//python=python3.5 --tx popen//python=python2.7\n</code></pre>\n"}], "owner": {"reputation": 2572, "user_id": 3346915, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/51e60cc6253004b7de8907371b9f9941?s=128&d=identicon&r=PG", "display_name": "Alex Tereshenkov", "link": "https://stackoverflow.com/users/3346915/alex-tereshenkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1533, "favorite_count": 2, "accepted_answer_id": 52860194, "answer_count": 1, "score": 3, "last_activity_date": 1539795983, "creation_date": 1539210055, "last_edit_date": 1539243594, "question_id": 52749553, "link": "https://stackoverflow.com/questions/52749553/how-to-run-python-tests-against-multiple-python-conda-environments", "title": "How to run Python tests against multiple Python conda environments?", "body": "<p>I have a few carefully configured <code>conda</code> environments created using Anaconda. I have written a Python package that uses some of the packages and libraries installed in these environments. Now I would like to run the tests with each test file being executed for each environment to make sure the package can handle working with different Python versions and different set of 3rd party packages available.</p>\n\n<p>Using a <code>tox</code> did not work for me because it tries to recreate those environments locally to run tests against. This is how my <code>tox.ini</code> file looks:</p>\n\n<pre><code>[tox]\nenvlist = py36, py27\nskipsdist = True\n\n[testenv]\nbasepython = \n    py36: C:\\Users\\user\\AppData\\Local\\Continuum\\Anaconda2\\envs\\Env1\\python.exe\n    py27: C:\\Users\\user\\AppData\\Local\\Continuum\\Anaconda2\\envs\\Env2\\python.exe\n\ncommands = \n    {envpython} -m unittest discover\n</code></pre>\n\n<p>However, it is not possible to do just plain <code>pip install</code> into the environments <code>tox</code> creates on each run mainly because there are some compiled libraries and workarounds involved (which are solved in a <code>conda</code> environment - so I have to use those as they are).</p>\n\n<p>I currently have a dummy <code>.bat</code> file with the following content:</p>\n\n<pre><code>\"C:\\Users\\user\\AppData\\Local\\Continuum\\Anaconda2\\envs\\Env1\\python.exe\" -m unittest discover\n\"C:\\Users\\user\\AppData\\Local\\Continuum\\Anaconda2\\envs\\Env2\\python.exe\" -m unittest discover\n</code></pre>\n\n<p>which I execute in a Windows <code>cmd</code> to see the results. It does work, but I wonder whether there is any more Pythonic way to run these tests such using <code>py.test</code> or <code>tox</code>. I do not want to recreate the <code>conda</code> environments I already have; I just want to use different Python interpreters accessed at different locations to run my tests.</p>\n"}, {"tags": ["python", "json", "debugging", "visual-studio-code", "launch"], "comments": [{"owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 0, "creation_date": 1539211381, "post_id": 52749423, "comment_id": 92423843, "body": "Are you using anaconda or a standard python install?"}, {"owner": {"reputation": 79, "user_id": 10470519, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9mMM3.jpg?s=128&g=1", "display_name": "Jorvan", "link": "https://stackoverflow.com/users/10470519/jorvan"}, "reply_to_user": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 0, "creation_date": 1539211817, "post_id": 52749423, "comment_id": 92423956, "body": "Both maybe? I don&#39;t know how to check it, but the settings.json have this:                                         &quot;python.pythonPath&quot;: &quot;C:\\\\Users\\\\jorge\\\\Anaconda3\\\\python.exe&quot;"}, {"owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 0, "creation_date": 1539212021, "post_id": 52749423, "comment_id": 92424010, "body": "There&#39;s <a href=\"https://github.com/Microsoft/vscode-python/issues/2732\" rel=\"nofollow noreferrer\">an open issue</a> with vscode currently.   It was noted that installing and using a non-anaconda version might be a temporary work around."}], "answers": [{"tags": [], "owner": {"reputation": 79, "user_id": 10470519, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9mMM3.jpg?s=128&g=1", "display_name": "Jorvan", "link": "https://stackoverflow.com/users/10470519/jorvan"}, "is_accepted": true, "score": 0, "last_activity_date": 1539382848, "last_edit_date": 1539382848, "creation_date": 1539212810, "answer_id": 52749950, "question_id": 52749423, "link": "https://stackoverflow.com/questions/52749423/i-am-getting-6-times-property-is-not-allowed-and-dont-know-what-to-do/52749950#52749950", "title": "I am getting 6 times: Property _______ is not allowed (and don&#39;t know what to do)", "body": "<p>I don't know why, but now I'm not getting the error and everything works fine. Anyway, thanks for your attention and wish you a nice day</p>\n\n<p>Edit: Ok, it happened again, but now I know that I fixed it by adding a:</p>\n\n<pre><code>\"python.terminal.activateEnvironment\": false\n</code></pre>\n\n<p>to the settings.json, but I deleted it last time because I desestimated it :P</p>\n"}], "owner": {"reputation": 79, "user_id": 10470519, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9mMM3.jpg?s=128&g=1", "display_name": "Jorvan", "link": "https://stackoverflow.com/users/10470519/jorvan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1752, "favorite_count": 0, "accepted_answer_id": 52749950, "answer_count": 1, "score": -1, "last_activity_date": 1539382848, "creation_date": 1539209199, "last_edit_date": 1539209963, "question_id": 52749423, "link": "https://stackoverflow.com/questions/52749423/i-am-getting-6-times-property-is-not-allowed-and-dont-know-what-to-do", "title": "I am getting 6 times: Property _______ is not allowed (and don&#39;t know what to do)", "body": "<p>Yesterday, all my codes worked fine in my visual studio code. Today, after a windows update, I get the following messages everytime I try to debug:</p>\n\n<pre><code>Property localRoot is not allowed. (17, 13)\nProperty remoteRoot is not allowed. (18, 13)\nProperty secret is not allowed. (20, 13)\nProperty debugOptions is not allowed. (47, 13)\nProperty debugOptions is not allowed. (79, 13)\nProperty debugOptions is not allowed. (111, 13)\n</code></pre>\n\n<p>I use python 3.6.6 and my launch.json is as following:</p>\n\n<pre><code>{\n// Use IntelliSense to learn about possible attributes.\n// Hover to view descriptions of existing attributes.\n// For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387\n\"version\": \"0.2.0\",\n\"configurations\": [\n    {\n        \"name\": \"Python: Current File\",\n        \"type\": \"python\",\n        \"request\": \"launch\",\n        \"program\": \"${file}\"\n    },\n    {\n        \"name\": \"Python: Attach\",\n        \"type\": \"python\",\n        \"request\": \"attach\",\n        \"localRoot\": \"${workspaceFolder}\",\n        \"remoteRoot\": \"${workspaceFolder}\",\n        \"port\": 3000,\n        \"secret\": \"my_secret\",\n        \"host\": \"localhost\"\n    },\n    {\n        \"name\": \"Python: Terminal (integrated)\",\n        \"type\": \"python\",\n        \"request\": \"launch\",\n        \"program\": \"${file}\",\n        \"console\": \"integratedTerminal\"\n    },\n    {\n        \"name\": \"Python: Terminal (external)\",\n        \"type\": \"python\",\n        \"request\": \"launch\",\n        \"program\": \"${file}\",\n        \"console\": \"externalTerminal\"\n    },\n    {\n        \"name\": \"Python: Django\",\n        \"type\": \"python\",\n        \"request\": \"launch\",\n        \"program\": \"${workspaceFolder}/manage.py\",\n        \"args\": [\n            \"runserver\",\n            \"--noreload\",\n            \"--nothreading\"\n        ],\n        \"debugOptions\": [\n            \"RedirectOutput\",\n            \"Django\"\n        ]\n    },\n    {\n        \"name\": \"Python: Flask (0.11.x or later)\",\n        \"type\": \"python\",\n        \"request\": \"launch\",\n        \"module\": \"flask\",\n        \"env\": {\n            \"FLASK_APP\": \"app.py\"\n        },\n        \"args\": [\n            \"run\",\n            \"--no-debugger\",\n            \"--no-reload\"\n        ]\n    },\n    {\n        \"name\": \"Python: Module\",\n        \"type\": \"python\",\n        \"request\": \"launch\",\n        \"module\": \"module.name\"\n    },\n    {\n        \"name\": \"Python: Pyramid\",\n        \"type\": \"python\",\n        \"request\": \"launch\",\n        \"args\": [\n            \"${workspaceFolder}/development.ini\"\n        ],\n        \"debugOptions\": [\n            \"RedirectOutput\",\n            \"Pyramid\"\n        ]\n    },\n    {\n        \"name\": \"Python: Watson\",\n        \"type\": \"python\",\n        \"request\": \"launch\",\n        \"program\": \"${workspaceFolder}/console.py\",\n        \"args\": [\n            \"dev\",\n            \"runserver\",\n            \"--noreload=True\"\n        ]\n    },\n    {\n        \"name\": \"Python: All debug Options\",\n        \"type\": \"python\",\n        \"request\": \"launch\",\n        \"pythonPath\": \"${config:python.pythonPath}\",\n        \"program\": \"${file}\",\n        \"module\": \"module.name\",\n        \"env\": {\n            \"VAR1\": \"1\",\n            \"VAR2\": \"2\"\n        },\n        \"envFile\": \"${workspaceFolder}/.env\",\n        \"args\": [\n            \"arg1\",\n            \"arg2\"\n        ],\n        \"debugOptions\": [\n            \"RedirectOutput\"\n        ]\n    }\n]\n}\n</code></pre>\n\n<p>Please, help me. I tried removing the properties, but didn't work and have been researching but don't find anything useful :/</p>\n\n<p>Edit: Ok, now I deleted the old launch.json and created a new one. It still fails and give me a \"Timeout waiting for debugger connection\" message, but it doesn't tell what the problem could be :\\</p>\n"}, {"tags": ["python", "arrays", "python-2.7", "import", "text-files"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 9707135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7ffe8fdf5a781c931886584e5bad33?s=128&d=identicon&r=PG&f=1", "display_name": "Ehsan", "link": "https://stackoverflow.com/users/9707135/ehsan"}, "edited": false, "score": 0, "creation_date": 1539210610, "post_id": 52749496, "comment_id": 92423611, "body": "Thank you so much my friend for you complete answer. I dont know why, but just <code>numpy</code> is working."}, {"owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "reply_to_user": {"reputation": 53, "user_id": 9707135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7ffe8fdf5a781c931886584e5bad33?s=128&d=identicon&r=PG&f=1", "display_name": "Ehsan", "link": "https://stackoverflow.com/users/9707135/ehsan"}, "edited": false, "score": 0, "creation_date": 1539211093, "post_id": 52749496, "comment_id": 92423772, "body": "You&#39;re welcome. I think the three are very similar, except that pandas uses dataframes instead of plain arrays, but still: I don&#39;t know what you mean by <i>not</i> working, so perhaps your approach for some reason fits only to numpy arrays, but not to lists or dataframes."}], "tags": [], "owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "is_accepted": true, "score": 2, "last_activity_date": 1539209690, "creation_date": 1539209690, "answer_id": 52749496, "question_id": 52749410, "link": "https://stackoverflow.com/questions/52749410/importing-data-as-an-array-for-plotting-in-python/52749496#52749496", "title": "Importing data as an array for plotting in Python", "body": "<p>There are several ways. What comes to my mind is:</p>\n\n<p>plain python:</p>\n\n<pre><code>data = []\nwith open(filename, 'r') as f:\n    for line in f:\n        data.append([float(num) for num in line.split()])\n</code></pre>\n\n<p>numpy:</p>\n\n<pre><code>import numpy as np\ndata = np.genfromtxt(filename, ...)\n</code></pre>\n\n<p>pandas:</p>\n\n<pre><code>import pandas as pd\ndf = pd.read_table(filename, sep='\\s+', header=None)\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 9707135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7ffe8fdf5a781c931886584e5bad33?s=128&d=identicon&r=PG&f=1", "display_name": "Ehsan", "link": "https://stackoverflow.com/users/9707135/ehsan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 52749496, "answer_count": 1, "score": 0, "last_activity_date": 1539209690, "creation_date": 1539209152, "question_id": 52749410, "link": "https://stackoverflow.com/questions/52749410/importing-data-as-an-array-for-plotting-in-python", "title": "Importing data as an array for plotting in Python", "body": "<p>I am new to this question. I hop to get benefit of your advice. Sorry if it is amateurish.</p>\n\n<p>I have the following code which finally shows a plot. I just write one part of code.</p>\n\n<pre><code>...\ncov = np.dot(A, A.T)\nsamps2 = np.random.multivariate_normal([0]*ndim, cov, size=nsamp)\nprint(samps2)\nnames = [\"x%s\"%i for i in range(ndim)]\nlabels =  [\"x_%s\"%i for i in range(ndim)]\nsamples2 = MCSamples(samples=samps2,names = names, labels = labels, label='Second set')\ng = plots.getSubplotPlotter()\ng.triangle_plot([samples2], filled=True)\n</code></pre>\n\n<p>It has no problem. The plot is drawn using the data coming from <code>samps2</code>. To see what the <code>samps2</code> is, we do <code>print(samps2)</code> and see:</p>\n\n<pre><code>[[-0.11213986 -0.0582685 ]\n [ 0.20346731  0.25309022]\n [ 0.22737737  0.2250694 ]\n [-0.09544588 -0.12754274]\n [-1.05491483 -1.15432073]\n [-0.31340717 -0.36144749]\n [-0.99158936 -1.12785124]\n [-0.5218308  -0.59193326]\n [ 0.76552123  0.82138362]\n [ 0.65083618  0.70784292]]\n</code></pre>\n\n<p>My question is, If I want to read these data from a <code>txt</code> file. what should I do? </p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "pixel", "turtle-graphics", "tkinter-canvas"], "comments": [{"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 1, "creation_date": 1539210274, "post_id": 52749406, "comment_id": 92423526, "body": "The <code>turtle</code> module inverts all y-coordinates, in order to get the Y-axis-pointing-up behavior that is traditional with turtle graphics.  You need to do the inversion yourself if you&#39;re bypassing the module and using Tkinter directly."}], "answers": [{"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": true, "score": 0, "last_activity_date": 1539229504, "creation_date": 1539229504, "answer_id": 52751855, "question_id": 52749406, "link": "https://stackoverflow.com/questions/52749406/python-canvas-find-overlapping-appears-to-have-inverted-y-axis/52751855#52751855", "title": "python canvas.find_overlapping appears to have inverted y-axis", "body": "<p>Neat use of tkinter pixel detection within turtle!  If the inverted Y coordinate is bothersome, you can flip it from turtle's perspective:</p>\n\n<pre><code>from turtle import Screen, Turtle\n\nscreen = Screen()\nwidth, height = screen.window_width() / 2, screen.window_height() / 2\nscreen.setworldcoordinates(-width, height, width, -height)  # flip Y coordinate\n</code></pre>\n\n<p>Then your code doesn't have to think about negating Y as long as you know you're drawing upside down:</p>\n\n<pre><code>from turtle import Screen, Turtle\n\nPATH_WIDTH = 15\n\ndef get_pixel_color(x, y):\n    canvas = screen.getcanvas()\n    items = canvas.find_overlapping(x, y, x, y)\n\n    if items:\n        return canvas.itemcget(items[0], \"fill\")  # get 0 object (canvas)\n\n    return None\n\nscreen = Screen()\nwidth, height = screen.window_width() / 2, screen.window_height() / 2\nscreen.setworldcoordinates(-width, height, width, -height)\n\nmaze_drawer = Turtle(visible=False)\nmaze_drawer.color(\"purple\")\nmaze_drawer.speed(\"fastest\")\n\n# draw simplified maze\nwall_len = 0\n\nfor _ in range(20):\n    maze_drawer.left(90)\n    wall_len += PATH_WIDTH\n    maze_drawer.forward(wall_len)\n\n# navigate maze from center\nmaze_runner = Turtle()\nmaze_runner.color(\"dark green\", \"green\")\nmaze_runner.penup()\nmaze_runner.goto(-PATH_WIDTH, -PATH_WIDTH)\n\ndef run_maze():\n    maze_runner.forward(1)\n\n    x, y = maze_runner.position()\n    color_at_turtle = get_pixel_color(x, y)\n\n    if color_at_turtle == \"purple\":\n        maze_runner.backward(PATH_WIDTH - 1)\n        maze_runner.left(90)\n        x, y = maze_runner.position()\n\n    if -width &lt; x &lt; width and -height &lt; y &lt; height:\n        screen.ontimer(run_maze, 10)\n\nrun_maze()\n\nscreen.exitonclick()\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10486513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3303cbeca37f369990785ff612ba8f8a?s=128&d=identicon&r=PG&f=1", "display_name": "clk", "link": "https://stackoverflow.com/users/10486513/clk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 52751855, "answer_count": 1, "score": 1, "last_activity_date": 1539229504, "creation_date": 1539209134, "question_id": 52749406, "link": "https://stackoverflow.com/questions/52749406/python-canvas-find-overlapping-appears-to-have-inverted-y-axis", "title": "python canvas.find_overlapping appears to have inverted y-axis", "body": "<p>I am trying to find the color of the canvas under a Python turtle. I use <code>canvas.find_overlapping</code> but it is only successful when I negate the <code>ycor</code>, implying that the y-axis is inverted in the canvas object, compared to what is shown. Is there a problem with my code or is the y-axis inverted?</p>\n\n<pre><code>import turtle\n\nwn = turtle.Screen()\n\nmaze_drawer = turtle.Turtle()\nmaze_drawer.color(\"purple\")\nmaze_drawer.speed(\"fastest\")\npath_width = 15 \n\ndef get_pixel_color(x, y):\n    c = turtle.Screen().getcanvas()\n    # -y should not work??\n    items = c.find_overlapping(x, -y, x, -y)\n    if len(items) &gt; 0:\n        return c.itemcget(items[0], \"fill\") # get 0 object (canvas)\n\n# draw simplified maze\nwall_len = 0\nfor i in range(10): \n    maze_drawer.left(90)\n    wall_len += path_width\n    maze_drawer.forward(wall_len)\n\n# navigate maze from center\nmaze_runner = turtle.Turtle()\nmaze_runner.color(\"green\")\nmaze_runner.penup()\nmaze_runner.goto(-path_width, -path_width)\n# test in y dir: maze_runner.setheading(90)\n\nclear = True\nwhile(clear):\n    maze_runner.forward(1)\n    color_at_turtle = get_pixel_color(maze_runner.xcor(), maze_runner.ycor())\n    if (color_at_turtle == \"purple\"): \n        clear = False\n\nwn.exitonclick()\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1539208881, "post_id": 52749363, "comment_id": 92423135, "body": "Well your exchange rates apparently do not contain <code>USD</code>..."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1539208984, "post_id": 52749363, "comment_id": 92423167, "body": "Can you share part of your exchange rate file (with the <code>USD</code> key)?"}, {"owner": {"reputation": 55, "user_id": 10382606, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5kZqV9gBJ-g/AAAAAAAAAAI/AAAAAAAABBE/MMuetL7BiAU/photo.jpg?sz=128", "display_name": "coin1002", "link": "https://stackoverflow.com/users/10382606/coin1002"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1539211356, "post_id": 52749363, "comment_id": 92423838, "body": "ADF,5.8524 ADP,148.448 AED,3.6731 AFN,64.31 ALL,127.24 AMD,473.2 ANG,1.82 AOA,135.976 AON,135.976 ARS,9.4448 ATS,12.2768 AUD,1.419 AWG,1.81 AZM,3926 AZN,1.0488 BAM,1.7447 BBD,2 BDT,79.482 BEF,35.9908 BGN,1.7513 BHD,0.3775 BIF,1554 BMD,1 BND,1.4567 BOB,7.0905 BRL,3.9375 BSD,1.0062 BTN,65.372 BWP,10.726 BYR,17781 BZD,2.0401 CAD,1.3155 and so on. USD,1 is in there. Each is a separate line."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 10382606, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5kZqV9gBJ-g/AAAAAAAAAAI/AAAAAAAABBE/MMuetL7BiAU/photo.jpg?sz=128", "display_name": "coin1002", "link": "https://stackoverflow.com/users/10382606/coin1002"}, "edited": false, "score": 0, "creation_date": 1539211420, "post_id": 52749717, "comment_id": 92423853, "body": "It definitely does contain it. One line is USD,1"}, {"owner": {"reputation": 303, "user_id": 1770149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6zgeT.jpg?s=128&g=1", "display_name": "kimalser", "link": "https://stackoverflow.com/users/1770149/kimalser"}, "reply_to_user": {"reputation": 55, "user_id": 10382606, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5kZqV9gBJ-g/AAAAAAAAAAI/AAAAAAAABBE/MMuetL7BiAU/photo.jpg?sz=128", "display_name": "coin1002", "link": "https://stackoverflow.com/users/10382606/coin1002"}, "edited": false, "score": 0, "creation_date": 1539212122, "post_id": 52749717, "comment_id": 92424034, "body": "I ran your initial code with a sample file (except I added a line for USD,1 since that list was incomplete) and it runs perfectly. As previously, I changed <code>self.othercode</code> to just <code>othercode</code> in <code>j = i*self.exchange_rates[othercode]</code> though that shouldn&#39;t be the cause of your error. P.S: other currencies work perfectly too."}, {"owner": {"reputation": 55, "user_id": 10382606, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5kZqV9gBJ-g/AAAAAAAAAAI/AAAAAAAABBE/MMuetL7BiAU/photo.jpg?sz=128", "display_name": "coin1002", "link": "https://stackoverflow.com/users/10382606/coin1002"}, "edited": false, "score": 0, "creation_date": 1539212719, "post_id": 52749717, "comment_id": 92424178, "body": "Thank you. I believe the error is in the code I have to read the file, as if I type print(Money.exchange_rates) it returns {}."}], "tags": [], "owner": {"reputation": 303, "user_id": 1770149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6zgeT.jpg?s=128&g=1", "display_name": "kimalser", "link": "https://stackoverflow.com/users/1770149/kimalser"}, "is_accepted": false, "score": 0, "last_activity_date": 1539211052, "creation_date": 1539211052, "answer_id": 52749717, "question_id": 52749363, "link": "https://stackoverflow.com/questions/52749363/keyerror-dictionary-conversion-python/52749717#52749717", "title": "KeyError Dictionary Conversion Python", "body": "<p>Are you sure your file contains 'USD' key?</p>\n\n<p>Here is a slightly modified and simplified code (so I didn't have to create an exchange file): </p>\n\n<pre><code>def read_exchange_rates():\n    answer={}\n    answer['USD'] = 1\n    answer['GBP'] = 0.76\n    return answer\n\nclass Money:\n    exchange_rates = read_exchange_rates()\n    def __init__ (self, monamount, code):\n        self.monamount = monamount\n        self.code = code\n\n    def to(self, othercode):\n        i = self.monamount/self.exchange_rates[self.code]\n        j = i*self.exchange_rates[othercode]\n        return othercode + str(j)\n\na = Money(650,'USD')\nb = a.to('GBP')\nprint(b)\n</code></pre>\n\n<p>This prints out <code>GBP494.0</code>.</p>\n"}], "owner": {"reputation": 55, "user_id": 10382606, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5kZqV9gBJ-g/AAAAAAAAAAI/AAAAAAAABBE/MMuetL7BiAU/photo.jpg?sz=128", "display_name": "coin1002", "link": "https://stackoverflow.com/users/10382606/coin1002"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 468, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539211052, "creation_date": 1539208814, "question_id": 52749363, "link": "https://stackoverflow.com/questions/52749363/keyerror-dictionary-conversion-python", "title": "KeyError Dictionary Conversion Python", "body": "<p>I would like to create a program that converts money from one type of currency to another. So far this is my code: </p>\n\n<pre><code>def read_exchange_rates(exchange_file_name):\n    #reads file with exchange rates formatted like USD,1. Each line is a 3 letter currency code and a float to convert it to USD. \n    f=open(exchange_file_name,\"r\")\n    answer={}\n    for line in f:\n        k, v = line.split(\",\")\n        answer[k] = float(v)\n    return answer\n    f.close()\n    pass\nclass Money:\n\n    exchange_rates = read_exchange_rates(rate_file)\n    #calls previously defined function to read file with exchange rates\n    def __init__ (self, monamount, code):\n        self.monamount=monamount\n        self.code=code\n    def to(self, othercode):\n        i = self.monamount/self.exchange_rates[self.code]\n        j = i*self.exchange_rates[self.othercode]\n        return othercode+str(j)\n</code></pre>\n\n<p>It should return the converted amount along with it's currency code (othercode) but instead it returns a KeyError. If I type </p>\n\n<pre><code>a=Money(650,'USD')\nb=a.to('GBP')\n</code></pre>\n\n<p>it should return GBP somenumber. This is the error. Thank you!</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;pyshell#126&gt;\", line 1, in &lt;module&gt;\n    b=a.to('GBP')\n  File \"&lt;pyshell#124&gt;\", line 9, in to\n    i = self.monamount/self.exchange_rates[self.code]\nKeyError: 'USD'\n</code></pre>\n"}, {"tags": ["python", "r", "docker"], "answers": [{"comments": [{"owner": {"reputation": 357, "user_id": 7107269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-pgsHrxzyV2c/AAAAAAAAAAI/AAAAAAAACcY/hqrmPRbi_08/photo.jpg?sz=128", "display_name": "SarahGC", "link": "https://stackoverflow.com/users/7107269/sarahgc"}, "edited": false, "score": 0, "creation_date": 1539614304, "post_id": 52751428, "comment_id": 92555712, "body": "yeah, seems to be due to my work network. thanks for your help."}], "tags": [], "owner": {"reputation": 15564, "user_id": 6394722, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/117654f31d6ad5c9b2b0e00dcf4b24f3?s=128&d=identicon&r=PG&f=1", "display_name": "atline", "link": "https://stackoverflow.com/users/6394722/atline"}, "is_accepted": true, "score": 1, "last_activity_date": 1539226189, "creation_date": 1539226189, "answer_id": 52751428, "question_id": 52749331, "link": "https://stackoverflow.com/questions/52749331/python-package-installation-issue-when-docker-build-based-on-r-base-docker-image/52751428#52751428", "title": "Python package installation issue when docker build based on r-base docker image", "body": "<p>This is really strange as see this <a href=\"http://cdn-fastly.deb.debian.org/\" rel=\"nofollow noreferrer\">link</a></p>\n\n<blockquote>\n  <p>The server deb.debian.org does not have packages itself, but the name has SRV records in DNS that let apt in stretch and later find places.</p>\n</blockquote>\n\n<p>Maybe your local network is something special, something like:</p>\n\n<blockquote>\n  <p>If you hit the server behind deb.debian.org directly, either because you use an older apt or because you use a HTTP proxy that does not support SRV records, your requests will get HTTP redirected to one of the CDN instances. If you want to avoid the redirects, you can pick one instance directly.</p>\n</blockquote>\n\n<p>So, suggest add a direct source of apt in your <code>Dockerfile</code>, something like follows:</p>\n\n<pre><code>FROM r-base:3.5.1\n\nRUN echo \"deb http://cdn-fastly.deb.debian.org/debian stable main\" &gt; /etc/apt/sources.list &amp;&amp; \\\n  echo \"deb http://cdn-fastly.deb.debian.org/debian-security stable/updates main\" &gt;&gt; /etc/apt/sources.list &amp;&amp; \\\n  rm -fr /etc/apt/apt.conf.d/default &amp;&amp; \\\n  apt-get update &amp;&amp; apt-get install -y python3\n</code></pre>\n\n<p>If you have proxy, please also add something like <code>ENV http_proxy \"http://your_proxy\"</code> to <code>Dockerfile</code>, hope it helpful.</p>\n"}], "owner": {"reputation": 357, "user_id": 7107269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-pgsHrxzyV2c/AAAAAAAAAAI/AAAAAAAACcY/hqrmPRbi_08/photo.jpg?sz=128", "display_name": "SarahGC", "link": "https://stackoverflow.com/users/7107269/sarahgc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 52751428, "answer_count": 1, "score": 2, "last_activity_date": 1595675528, "creation_date": 1539208649, "last_edit_date": 1595675528, "question_id": 52749331, "link": "https://stackoverflow.com/questions/52749331/python-package-installation-issue-when-docker-build-based-on-r-base-docker-image", "title": "Python package installation issue when docker build based on r-base docker image", "body": "<p>I want to install python in a r-base docker image. When I try this:</p>\n\n<pre><code>FROM r-base:3.4.1\nRUN apt-get update &amp;&amp; apt-get install -y python3 \n</code></pre>\n\n<p>I get error:</p>\n\n<pre><code>Error, pkgProblemResolver::Resolve generated breaks, this may be caused by held packages.\n</code></pre>\n\n<p>When I try this:</p>\n\n<pre><code>FROM r-base:3.5.1\nRUN apt-get update &amp;&amp; apt-get install -y python3 \n</code></pre>\n\n<p>I get error:</p>\n\n<pre><code>The repository 'http://deb.debian.org/debian testing Release' does not have a Release file.\n</code></pre>\n\n<p>I can use both R and Python if I start with a jupyter notebook base, but I really want this image to be slim so I want to start with r-base instead. Note that USER root did not solve these issues either.</p>\n"}, {"tags": ["python", "flask"], "comments": [{"owner": {"reputation": 14624, "user_id": 5588279, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/31a5c0b08beca9ebc2c1d5e60ba691d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sraw", "link": "https://stackoverflow.com/users/5588279/sraw"}, "edited": false, "score": 0, "creation_date": 1539207984, "post_id": 52749206, "comment_id": 92422833, "body": "Did you run the <code>pkg&#47;subpkg&#47;apps&#47;myapp&#47;web&#47;views.py</code>? I believe you never import this file so the code is never executed, right?"}, {"owner": {"reputation": 8680, "user_id": 4013571, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh4.googleusercontent.com/-G_CrKyh2orQ/AAAAAAAAAAI/AAAAAAAAADA/d4aRKztH0r4/photo.jpg?sz=128", "display_name": "Alexander McFarlane", "link": "https://stackoverflow.com/users/4013571/alexander-mcfarlane"}, "reply_to_user": {"reputation": 14624, "user_id": 5588279, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/31a5c0b08beca9ebc2c1d5e60ba691d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sraw", "link": "https://stackoverflow.com/users/5588279/sraw"}, "edited": false, "score": 0, "creation_date": 1539208108, "post_id": 52749206, "comment_id": 92422869, "body": "I&#39;ll just double check my minimal example. I may have just forgotten the import. I&#39;ll respond in a moment but I&#39;ll be mad if it&#39;s that trivial..."}, {"owner": {"reputation": 8680, "user_id": 4013571, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh4.googleusercontent.com/-G_CrKyh2orQ/AAAAAAAAAAI/AAAAAAAAADA/d4aRKztH0r4/photo.jpg?sz=128", "display_name": "Alexander McFarlane", "link": "https://stackoverflow.com/users/4013571/alexander-mcfarlane"}, "reply_to_user": {"reputation": 14624, "user_id": 5588279, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/31a5c0b08beca9ebc2c1d5e60ba691d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sraw", "link": "https://stackoverflow.com/users/5588279/sraw"}, "edited": false, "score": 0, "creation_date": 1539208957, "post_id": 52749206, "comment_id": 92423160, "body": "@Sraw I can confirm I hate myself - it was as simple as adding one line <code>from . import views</code> ... not sure it there is much point in this thread remaining"}, {"owner": {"reputation": 14624, "user_id": 5588279, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/31a5c0b08beca9ebc2c1d5e60ba691d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sraw", "link": "https://stackoverflow.com/users/5588279/sraw"}, "edited": false, "score": 1, "creation_date": 1539209030, "post_id": 52749206, "comment_id": 92423180, "body": "Hum... At least you solve it now :)"}], "owner": {"reputation": 8680, "user_id": 4013571, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh4.googleusercontent.com/-G_CrKyh2orQ/AAAAAAAAAAI/AAAAAAAAADA/d4aRKztH0r4/photo.jpg?sz=128", "display_name": "Alexander McFarlane", "link": "https://stackoverflow.com/users/4013571/alexander-mcfarlane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539207819, "creation_date": 1539207819, "question_id": 52749206, "link": "https://stackoverflow.com/questions/52749206/unable-to-render-flask-hello-world-in-subpackage", "title": "Unable to render flask hello world in subpackage", "body": "<p>I cannot seem to be able to replicate any minimal example on the flask documentation page when the web app is a subpackage</p>\n\n<pre><code>In [8]: from subpkg.apps.myapp import run_me\n\nIn [9]: run_me.main()\n * Running on http://localhost:5050/ (Press CTRL+C to quit)\n127.0.0.1 - - [10/Oct/2018 22:38:09] \"GET / HTTP/1.1\" 404 -\n</code></pre>\n\n<p>Folder structure is part of a larger python library. For example the only <code>.py</code> files containing code are listed below</p>\n\n<pre><code>pkg/\n-- setup.py\n-- subpkg/\n-- __init__.py\n-- -- apps/\n-- -- __init__.py\n-- -- -- myapp/\n-- -- -- -- __init__.py\n-- -- -- -- run_me.py\n-- -- -- -- web/\n-- -- -- -- -- views.py\n-- -- -- -- -- __init__.py\n</code></pre>\n\n<p>Create the example</p>\n\n<pre><code>mkdir pkg; mkdir pkg/subpkg/; mkdir pkg/subpkg/apps; mkdir pkg/subpkg/apps/myapp; mkdir pkg/subpkg/apps/myapp/web\ntouch pkg/__init__.py; touch pkg/subpkg/__init__.py; touch pkg/subpkg/apps/__init__.py; touch pkg/subpkg/apps/myapp/__init__.py; touch pkg/subpkg/apps/myapp/web/__init__.py; touch pkg/setup.py; touch touch pkg/subpkg/apps/myapp/web/views.py; touch pkg/subpkg/apps/myapp/run_me.py\n</code></pre>\n\n<p><strong><code>pkg/setup.py</code></strong></p>\n\n<pre><code>from setuptools import find_packages, setup\nsetup(\n    name='pkg-myapp',\n    packages=find_packages(),\n    include_package_data=True,\n    install_requires=['flask==0.11.1'],\n    entry_points={'console_scripts': ['pkg-myapp=pkg.apps.myapp.run_me:main',],},\n)\n</code></pre>\n\n<p><strong><code>pkg/subpkg/apps/myapp/run_me.py</code></strong></p>\n\n<pre><code>from .web import app\ndef main():\n    app.run('localhost', 5050)\n</code></pre>\n\n<p><strong><code>pkg/subpkg/apps/myapp/web/views.py</code></strong></p>\n\n<pre><code>from . import app\n@app.route(\"/\")\ndef index():\n    return 'hello world'\n</code></pre>\n\n<p><strong><code>pkg/subpkg/apps/myapp/web/__init__.py</code></strong></p>\n\n<pre><code>from flask import Flask\napp = Flask('subpkg.apps.myapp.web')\n</code></pre>\n\n<h1>Refs</h1>\n\n<ul>\n<li><a href=\"http://exploreflask.com/en/latest/organizing.html\" rel=\"nofollow noreferrer\">http://exploreflask.com/en/latest/organizing.html</a></li>\n<li><a href=\"http://flask.pocoo.org/docs/1.0/quickstart/\" rel=\"nofollow noreferrer\">http://flask.pocoo.org/docs/1.0/quickstart/</a></li>\n<li><a href=\"https://damyanon.net/post/flask-series-structure/\" rel=\"nofollow noreferrer\">https://damyanon.net/post/flask-series-structure/</a></li>\n<li><a href=\"https://stackoverflow.com/questions/32874629/flask-not-finding-routes-in-imported-modules\">Flask not finding routes in imported modules</a></li>\n<li><a href=\"https://stackoverflow.com/questions/35071244/how-to-run-flask-app-after-reorganization-as-a-package\">How to run flask app after reorganization as a package</a></li>\n</ul>\n"}, {"tags": ["python", "imap", "phishing", "milter"], "comments": [{"owner": {"reputation": 19, "user_id": 9380904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e84ba9df88f3dd8f11812861a29fb9?s=128&d=identicon&r=PG&f=1", "display_name": "M. THY", "link": "https://stackoverflow.com/users/9380904/m-thy"}, "edited": false, "score": 0, "creation_date": 1539207711, "post_id": 52749148, "comment_id": 92422752, "body": "For instance, there is a URL in the message of the email, and I would like to add some warning besides the URL."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1539211134, "post_id": 52749148, "comment_id": 92423780, "body": "<a href=\"https://tools.ietf.org/html/draft-brandt-imap-replace-03\" rel=\"nofollow noreferrer\">IMAP REPLACE extension</a>"}, {"owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 0, "creation_date": 1539219713, "post_id": 52749148, "comment_id": 92425655, "body": "Only by removing it and responding.  It would be way better to rewrite before arrival, but youll break smime."}, {"owner": {"reputation": 19, "user_id": 9380904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e84ba9df88f3dd8f11812861a29fb9?s=128&d=identicon&r=PG&f=1", "display_name": "M. THY", "link": "https://stackoverflow.com/users/9380904/m-thy"}, "edited": false, "score": 0, "creation_date": 1539301549, "post_id": 52749148, "comment_id": 92463065, "body": "does responding mean put in to trash or spam mail box?"}], "answers": [{"tags": [], "owner": {"reputation": 1660, "user_id": 2329663, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/51c6ebd1d71376f03ce60859238088ec?s=128&d=identicon&r=PG", "display_name": "Lukas Kolletzki", "link": "https://stackoverflow.com/users/2329663/lukas-kolletzki"}, "is_accepted": false, "score": 1, "last_activity_date": 1566816629, "creation_date": 1566816629, "answer_id": 57656461, "question_id": 52749148, "link": "https://stackoverflow.com/questions/52749148/is-it-possible-for-using-imap-to-modify-the-message-of-email/57656461#57656461", "title": "Is it possible for using imap to modify the message of email?", "body": "<p>Since you already mention milter in your question: a milter would be capable to modify the message bodies and can solve your problem.</p>\n\n<p>The <code>xxfi_body</code> callback of libmilter allows you to obtain the message body.\nWhen the <code>xxfi_eom</code> callback is called, you can use <code>smfi_replacebody</code> to replace the body of the message.<br>\nThis would allow you to search for URLs in the bodies and append a warning message to them.</p>\n\n<p>Notes:</p>\n\n<ul>\n<li>You need to add the <code>SMFIF_CHGBODY</code> flag to the value of <code>xxfi_flags</code> when calling <code>smfi_register</code>, otherwise calling <code>smfi_replacebody</code> will fail</li>\n<li>Changing the message body may have a significant performance impact</li>\n<li>When configuring your MTA, the order of filters matters: later filters get the new body contents, when a previous filter replaces the body</li>\n<li>As noted in the comments: when you modify the message contents, things like PGP, S-MIME, etc. might break</li>\n<li>You might need to interpret the <code>Content-Type</code> of the message (and it's mime parts) so that you can distinguish between <code>text/plain</code> and <code>text/html</code> messages and append the warning message at the proper position</li>\n</ul>\n\n<p>For more information on how to write a milter application, you can find the current HTML docs in the <a href=\"ftp://ftp.sendmail.org/pub/sendmail/\" rel=\"nofollow noreferrer\">sendmail source</a> under the path <code>libmilter/docs/index.html</code>.\nThere is also an <a href=\"http://web.mit.edu/darwin/src/modules/sendmail/sendmail/libmilter/docs/index.html\" rel=\"nofollow noreferrer\">online version</a> (may not be the latest one).</p>\n"}], "owner": {"reputation": 19, "user_id": 9380904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e84ba9df88f3dd8f11812861a29fb9?s=128&d=identicon&r=PG&f=1", "display_name": "M. THY", "link": "https://stackoverflow.com/users/9380904/m-thy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566816629, "creation_date": 1539207498, "question_id": 52749148, "link": "https://stackoverflow.com/questions/52749148/is-it-possible-for-using-imap-to-modify-the-message-of-email", "title": "Is it possible for using imap to modify the message of email?", "body": "<p>is it possible to add a pop-up message on the received email?</p>\n\n<p>I have searched IMAP but it can only fetch the email, view the email content.\nand I have considered milter, but it only uses for filtering.\nMy idea is when there is a URL in the context of email, I could show a warning message to tell the users that it is a phishing URL or not.\nI would like to make the warning message is available for no matter what email client I am using. </p>\n"}, {"tags": ["python", "pandas", "matplotlib", "networkx"], "comments": [{"owner": {"reputation": 10439, "user_id": 1706564, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Tjt9e.jpg?s=128&g=1", "display_name": "Jamie Bull", "link": "https://stackoverflow.com/users/1706564/jamie-bull"}, "edited": false, "score": 0, "creation_date": 1539360903, "post_id": 52749143, "comment_id": 92488135, "body": "Can you add some sample data that is enough to reproduce the problem you&#39;re having?"}, {"owner": {"reputation": 10439, "user_id": 1706564, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Tjt9e.jpg?s=128&g=1", "display_name": "Jamie Bull", "link": "https://stackoverflow.com/users/1706564/jamie-bull"}, "edited": false, "score": 1, "creation_date": 1539361150, "post_id": 52749143, "comment_id": 92488245, "body": "Try adding <code>plt.clf()</code> after <code>plt.savefig()</code>"}, {"owner": {"reputation": 85, "user_id": 7371632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d14a4cfe8f267174dc6713888fa8cf66?s=128&d=identicon&r=PG&f=1", "display_name": "Sandra Young", "link": "https://stackoverflow.com/users/7371632/sandra-young"}, "reply_to_user": {"reputation": 10439, "user_id": 1706564, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Tjt9e.jpg?s=128&g=1", "display_name": "Jamie Bull", "link": "https://stackoverflow.com/users/1706564/jamie-bull"}, "edited": false, "score": 0, "creation_date": 1539540833, "post_id": 52749143, "comment_id": 92529686, "body": "Thank you! That worked, I had been trying to clear the wrong thing!"}], "answers": [{"tags": [], "owner": {"reputation": 10439, "user_id": 1706564, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Tjt9e.jpg?s=128&g=1", "display_name": "Jamie Bull", "link": "https://stackoverflow.com/users/1706564/jamie-bull"}, "is_accepted": true, "score": 2, "last_activity_date": 1539584075, "creation_date": 1539584075, "answer_id": 52810684, "question_id": 52749143, "link": "https://stackoverflow.com/questions/52749143/matplotlib-plus-networkx-producing-overlaying-graphs-when-looping-over-multiple/52810684#52810684", "title": "Matplotlib plus NetworkX producing overlaying graphs when looping over multiple files", "body": "<p>The problem is that you were not clearing <code>fig</code> which is a global object created by <code>pyplot</code>. This means every time around your loop more data is added (\"graphs seems to get saved on top of one another\").</p>\n\n<p>To avoid this, you can either call <code>plt.clf()</code> or <code>plt.close()</code> after your call to <code>plt.save_fig()</code>.</p>\n\n<p>If you are creating a lot of figures, you should definitely prefer <code>plt.close()</code>, since <code>plt.clf()</code> does not release the memory used for each figure.</p>\n"}], "owner": {"reputation": 85, "user_id": 7371632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d14a4cfe8f267174dc6713888fa8cf66?s=128&d=identicon&r=PG&f=1", "display_name": "Sandra Young", "link": "https://stackoverflow.com/users/7371632/sandra-young"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 52810684, "answer_count": 1, "score": 1, "last_activity_date": 1539584075, "creation_date": 1539207469, "last_edit_date": 1539259308, "question_id": 52749143, "link": "https://stackoverflow.com/questions/52749143/matplotlib-plus-networkx-producing-overlaying-graphs-when-looping-over-multiple", "title": "Matplotlib plus NetworkX producing overlaying graphs when looping over multiple files", "body": "<p>I have a script that should loop over series of csv files to create different directed graphs. When saving with matplotlib (plt.savefig()) then graphs seems to get saved on top of one another as the loop goes on. If I use plt.show() which requires me to manually close the file for each loop, this does not happen. The same if I do through the debugger. Can anyone give me any advice on what might be happening?</p>\n\n<pre><code>\"\"\"Script to read in CSV file with relations (after having processed with weighting),\nand then make a tree hierarchy of relations\n\"\"\"\nimport pandas as pd\nimport numpy as np\nimport networkx as nx\nimport matplotlib.pyplot as plt\nimport os\n\n\n#create graph\ndef panda_tree():  \n    path = './CONLL_test/weighted/weighted_out/'\n    filelist = os.listdir(path)\n    i = 1\n    # read in files as dataframe and change to lists\n    for file in filelist:\n        if file.endswith('csv'):\n            parent_child_rel = pd.read_csv(path+file)\n            parents = parent_child_rel['parent']\n            children = parent_child_rel['child']\n\n            # change lists to tuples\n            relations = pd.DataFrame({'from': parents, 'to': children})\n            print(relations)\n\n            # Build your graph\n            graph_name = 'G%s' %i\n            graph_name=nx.from_pandas_edgelist(relations, 'from', 'to', create_using=nx.DiGraph())\n\n            # Plot it\n            nx.draw(graph_name, with_labels=True)\n            filename = os.path.splitext(file)\n            (f, ext) = filename\n            plt.savefig(path+'directed/'+f+'_dirgraph.png')\n            i+=1\n\ndef main():\n    panda_tree()\n\n\nif __name__ == '__main__':\n    main ()\n</code></pre>\n\n<p>The files are dataframes containing increasingly less data as I include data only if it has over 10, 20, and so on hits up to 100. The 100 graph is the busiest one and when I run it on its own I don't have this problem. Has anyone else ever had this problem or can anyone give me a hint as to how to overcome it? The data is parent child relations (pairs).</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 5109, "user_id": 2373748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/moadr.png?s=128&g=1", "display_name": "galaxyan", "link": "https://stackoverflow.com/users/2373748/galaxyan"}, "edited": false, "score": 0, "creation_date": 1539210902, "post_id": 52749370, "comment_id": 92423714, "body": "it will only fill the cell if there is a data before it. if the order is not as I posted, it wouldn&#39;t work. Thank you"}, {"owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "reply_to_user": {"reputation": 5109, "user_id": 2373748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/moadr.png?s=128&g=1", "display_name": "galaxyan", "link": "https://stackoverflow.com/users/2373748/galaxyan"}, "edited": false, "score": 0, "creation_date": 1539212854, "post_id": 52749370, "comment_id": 92424219, "body": "@galaxyan, you can user ffill().bfill(). Pl see the edit"}], "tags": [], "owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "is_accepted": true, "score": 2, "last_activity_date": 1539212865, "last_edit_date": 1539212865, "creation_date": 1539208896, "answer_id": 52749370, "question_id": 52749141, "link": "https://stackoverflow.com/questions/52749141/pandas-merge-two-rows-with-condition/52749370#52749370", "title": "Pandas merge two rows with condition", "body": "<p>IIUC, You can used groupby and fill and then again group and sum</p>\n\n<pre><code>df['colB'] = df.groupby('colA').colB.ffill().bfill()\ndf.groupby(['colA','colB'], as_index = False).sum()\n\n    colA    colB    colC\n0   A       test1   11\n1   B       test1   4\n2   C       test1   5\n3   C       test3   4\n4   D       test4   9\n</code></pre>\n"}], "owner": {"reputation": 5109, "user_id": 2373748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/moadr.png?s=128&g=1", "display_name": "galaxyan", "link": "https://stackoverflow.com/users/2373748/galaxyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 1, "closed_date": 1615845121, "accepted_answer_id": 52749370, "answer_count": 1, "score": 1, "last_activity_date": 1539212865, "creation_date": 1539207462, "last_edit_date": 1539208425, "question_id": 52749141, "link": "https://stackoverflow.com/questions/52749141/pandas-merge-two-rows-with-condition", "closed_reason": "Needs details or clarity", "title": "Pandas merge two rows with condition", "body": "<p>I wonder if there is a way to groupby rows then conditional aggregate groups. Thank you <br>\nfor example, \nfor colA is A, it should set colB for second A to test1 and sum colC </p>\n\n<pre><code>colA colB colC\nA   test1  5\nA   None   6\nB   test1  4\nC   test1  5\nC   test3  4\nD   test4  5\nD   None   4\n</code></pre>\n\n<p>expected result</p>\n\n<pre><code>colA colB colC\nA   test1  11\nB   test1  4\nC   test1  5\nC   test3  4\nD   test4  9\n</code></pre>\n"}, {"tags": ["python", "list", "loops", "itertools"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1539207554, "post_id": 52749136, "comment_id": 92422705, "body": "To format your code correctly, copy-paste your code into the question box, then select everything you pasted (including the parts that look okay in the preview) and hit Ctrl-K or the button in the UI with the braces on it."}, {"owner": {"reputation": 2928, "user_id": 769971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JWve2.jpg?s=128&g=1", "display_name": "wholevinski", "link": "https://stackoverflow.com/users/769971/wholevinski"}, "edited": false, "score": 1, "creation_date": 1539207838, "post_id": 52749136, "comment_id": 92422784, "body": "Have you checked out <code>set</code>? Pass in the list you want to eliminate duplicates from like this <code>set(list_with_duplicates)</code>."}, {"owner": {"reputation": 2928, "user_id": 769971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JWve2.jpg?s=128&g=1", "display_name": "wholevinski", "link": "https://stackoverflow.com/users/769971/wholevinski"}, "edited": false, "score": 1, "creation_date": 1539208228, "post_id": 52749136, "comment_id": 92422908, "body": "I misread the question, but this is still a set operation. Check out set difference: <a href=\"https://docs.python.org/3.6/library/stdtypes.html#set\" rel=\"nofollow noreferrer\">docs.python.org/3.6/library/stdtypes.html#set</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1018, "user_id": 3233055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3TcV3.jpg?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/3233055/julian"}, "edited": false, "score": 0, "creation_date": 1539209761, "post_id": 52749170, "comment_id": 92423400, "body": "This isn&#39;t actually linear time, it&#39;s O(n^2) (or exponential) as the search function is O(n) while the iteration over the original list is O(n) as well.  What he needs to do is build a dictionary with the emails in the master list, then iterate over the slave list and check for existence in the map.  This would effective make it linear time or O(n) to do the whole thing.  This is going to be much faster than the originally proposed algorithm."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 1018, "user_id": 3233055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3TcV3.jpg?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/3233055/julian"}, "edited": false, "score": 0, "creation_date": 1539247657, "post_id": 52749170, "comment_id": 92434958, "body": "Yes, sorry, wasn&#39;t clear I was talking about the inner search loop."}, {"owner": {"reputation": 1018, "user_id": 3233055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3TcV3.jpg?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/3233055/julian"}, "edited": false, "score": 0, "creation_date": 1539268877, "post_id": 52749170, "comment_id": 92448704, "body": "Gotcha.  Your suggestion to use a hash-based solution was definitely correct though."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 1018, "user_id": 3233055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3TcV3.jpg?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/3233055/julian"}, "edited": false, "score": 0, "creation_date": 1539271569, "post_id": 52749170, "comment_id": 92450467, "body": "It&#39;s my fault, I shouldn&#39;t have rushed. Your explanation is far more detailed anyway \ud83d\ude09"}], "tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": false, "score": 1, "last_activity_date": 1539207618, "creation_date": 1539207618, "answer_id": 52749170, "question_id": 52749136, "link": "https://stackoverflow.com/questions/52749136/optimize-this-code-python-list-iter-for-comparing-2-lists/52749170#52749170", "title": "optimize this code: python list iter for comparing 2 lists", "body": "<p>The reason it's so slow is that the search is in linear time. Use a dictionary with the key being your search string. Should make lots of difference.</p>\n"}, {"comments": [{"owner": {"reputation": 27784, "user_id": 4531270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uw3pm.png?s=128&g=1", "display_name": "pylang", "link": "https://stackoverflow.com/users/4531270/pylang"}, "edited": false, "score": 0, "creation_date": 1539463764, "post_id": 52749903, "comment_id": 92514162, "body": "that last image, what program did you use to run those tests?"}, {"owner": {"reputation": 1018, "user_id": 3233055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3TcV3.jpg?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/3233055/julian"}, "reply_to_user": {"reputation": 27784, "user_id": 4531270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uw3pm.png?s=128&g=1", "display_name": "pylang", "link": "https://stackoverflow.com/users/4531270/pylang"}, "edited": false, "score": 1, "creation_date": 1539473742, "post_id": 52749903, "comment_id": 92516239, "body": "It was PyCharm by JetBrains.  It\u2019s amazing.  It\u2019s the best python IDE hands down."}], "tags": [], "owner": {"reputation": 1018, "user_id": 3233055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3TcV3.jpg?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/3233055/julian"}, "is_accepted": false, "score": 1, "last_activity_date": 1539269605, "last_edit_date": 1539269605, "creation_date": 1539212413, "answer_id": 52749903, "question_id": 52749136, "link": "https://stackoverflow.com/questions/52749136/optimize-this-code-python-list-iter-for-comparing-2-lists/52749903#52749903", "title": "optimize this code: python list iter for comparing 2 lists", "body": "<p>TL;DR: Here is your solution...</p>\n\n<pre><code>def cross(listMaster, listSlave, criteria=\"email\"):\n    if criteria == \"email\":\n        returnUnique = listMaster[:]  # create a copy of the master list\n        emails_in_master = set()\n\n        for item in listMaster:\n            emails_in_master.add(item[2])  # add the master emails to the set\n\n        for item in listSlave:\n            if item[2] in emails_in_master:\n                returnUnique.append(item)\n\n        return returnUnique\n</code></pre>\n\n<p>Your algorithm is O(n^2) because you are looping over a list, then searching another list per iteration of the above.  This results in exponential runtime, which is basically the worst you can get.  You need to try to get the algorithm to linear complexity in order to have a decent runtime.</p>\n\n<p>Your algorithm is basically the following:</p>\n\n<pre><code>loop for n:                             # this costs n\n    loop for n:                         # this costs n for each of the n's above\n         add an item or continue        # so total, this is O(n * n)\n</code></pre>\n\n<p>What you want is the following:</p>\n\n<pre><code>loop for n:                             # this costs n\n    build a lookup\n\nloop for n:                             # this costs n\n    add item if in lookup or continue   # so total, this is O(n)\n</code></pre>\n\n<p>I generated test data into CSV's on my local machine.  Here is how I created the CSV's...</p>\n\n<pre><code>&gt;&gt;&gt; import csv\n&gt;&gt;&gt; from faker import Faker\n&gt;&gt;&gt; fake = Faker()\n&gt;&gt;&gt; with open('masters.csv', 'wb') as csvfile:\n...     writer = csv.writer(csvfile, delimiter=',', quotechar='\"')\n...     for i in range(20000):\n...         writer.writerow([fake.name(), fake.address(), fake.email(), fake.job(), fake.ssn()])\n...\n&gt;&gt;&gt; with open('slaves.csv', 'wb') as csvfile:\n...     writer = csv.writer(csvfile, delimiter=',', quotechar='\"')\n...     for i in range(20000):\n...         writer.writerow([fake.name(), fake.address(), fake.email(), fake.job(), fake.ssn()])\n...\n</code></pre>\n\n<p>Once those were generated (note there were 20k per file, as 2 million would have taken too long to generate), I built the following test suite to compare the different approaches...</p>\n\n<pre><code>import csv\nimport unittest\n\nemail = lambda l: l[2]\n\n\nclass TestListComparison(unittest.TestCase):\n\n    @classmethod\n    def setUpClass(cls):\n        cls.masters = []\n        cls.slaves = []\n\n        with open('masters.csv', 'rb') as master_csv:\n            reader = csv.reader(master_csv, delimiter=',', quotechar='\"')\n            cls.masters = list(reader)\n\n        with open('slaves.csv', 'rb') as slave_csv:\n            reader = csv.reader(slave_csv, delimiter=',', quotechar='\"')\n            cls.slaves = list(reader)\n\n    def test_make_sure_lists_are_well_formed(self):\n        self.assertEqual(len(self.masters), len(self.slaves))\n        self.assertEqual(len(self.masters), 20000)\n\n    def test_list_combination_original(self):\n        emailListSlave = []\n        returnUnique = []\n\n        for item in self.slaves:\n            emailListSlave.append(email(item))\n\n        for no, item in enumerate(self.masters):  # O(n)\n            if email(item) not in self.slaves:    # O(n)\n                returnUnique.append(item)         # O(1)\n\n        # Total complexity: O(n * n * 1) =&gt; O(n^2)        \n\n    def test_list_combination_using_lookup(self):\n        lookup = set()\n        returnUnique = self.masters[:]     # create a copy of masters list\n\n        for master in self.masters:        # loop over the master list O(n)\n            lookup.add(email(master))      # add the email to the set  O(1)\n\n        for slave in self.slaves:          # loop over the list again  O(n)\n            if email(slave) in lookup:     # check the lookup          O(1)\n                returnUnique.append(slave) # add the item to the list  O(1)\n\n        # Total complexity: O(n + n) =&gt; O(2n) =&gt; O(n)\n</code></pre>\n\n<p>Here are the runtime results:</p>\n\n<p><a href=\"https://i.stack.imgur.com/EmWTh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EmWTh.png\" alt=\"test comparison\"></a></p>\n\n<p>Note that the lookup test took about 15ms while the original algorithm took around 14s.  Thats quite a few orders of magnitude faster.</p>\n"}], "owner": {"reputation": 11, "user_id": 10301901, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KHXad.png?s=128&g=1", "display_name": "davidhoff22", "link": "https://stackoverflow.com/users/10301901/davidhoff22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1539269605, "creation_date": 1539207419, "last_edit_date": 1539211849, "question_id": 52749136, "link": "https://stackoverflow.com/questions/52749136/optimize-this-code-python-list-iter-for-comparing-2-lists", "title": "optimize this code: python list iter for comparing 2 lists", "body": "<pre><code>def cross(listMaster, listSlave, criteria=\"email\"):\n    if criteria == \"email\":\n        emailListSlave = []\n        returnUnique = []\n\n        for item in listSlave: \n            emailListSlave.append(item[2]) #appends emails\n\n        for no,item in enumerate(listMaster):\n            if no % 10000 == 0: \n                print(\"Status: {percent:.2f} %\".format(percent=(no/len(listMaster))))\n\n            if item[2] not in emailListSlave:\n                returnUnique.append(item)\n\n        return returnUnique\n</code></pre>\n\n<p>I have 2 lists: listMaster and listSlave. \nBoth of these lists have a about 2,000,000 items which themselves have about 24 items within. My goal is to \"sort\" the lists by the third element in the list, which happens to be an email. And then I want to find unique emails between the Master and Slave list. So if the Slave list has an email present in the Master list, then throw out that item and continue. </p>\n\n<p>My algo:</p>\n\n<p>1) load the 3rd element of each item in the Slave list (email) into a new list (emailListSlave)</p>\n\n<p>2) iterate over the MasterList and check if the third element of each item in the MasterList is in the emailListSlave</p>\n\n<p>3) if 2 is True then continue, if false then append the returnUnique list with unique emails found only in listMaster</p>\n\n<p>Running this is EXTREMELY slow. I managed to get 10% done in about 20 minutes. Can I speed up this process perhaps with iter? itertools? Please help me optimize this code. </p>\n"}, {"tags": ["python", "tensorflow", "keras", "dataset"], "answers": [{"tags": [], "owner": {"reputation": 1246, "user_id": 1749629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vydft.jpg?s=128&g=1", "display_name": "jmsinusa", "link": "https://stackoverflow.com/users/1749629/jmsinusa"}, "is_accepted": false, "score": 1, "last_activity_date": 1539208982, "creation_date": 1539208982, "answer_id": 52749384, "question_id": 52749091, "link": "https://stackoverflow.com/questions/52749091/build-my-own-dataset-to-use-with-tensorflow-or-keras/52749384#52749384", "title": "Build my own dataset to use with Tensorflow or Keras", "body": "<p>Not the most elegant method, but for a small dataset this should be sufficient. \nFirst get a list of all of the files, and note their classes:</p>\n\n<pre><code>import os\nimport numpy as np\nfrom matplotlib import pyplot as plt\n\nfile_list = []\nclass_list = []\n\nclassnames = ['daisy', 'dandelion', 'roses', 'sunflowers', 'tulips']   \nfor class_name in classnames:\n    dir_list = os.listdir(os.path.join('flower_phoyos', class_name))\n    file_list.extend(dir_list)\n    class_list.extend([classnames] * len(dir_list))\n</code></pre>\n\n<p>Now you know how many examples you have (<code>len(file_list)</code>) and can read them in, assigning them to a numpy array.</p>\n\n<pre><code>img_data = np.zeros(len(file_list), height, width, n_bands)\n# Of course I've assumed that you want all of the images to be the same size.\nfor ii, file_ in enumerate(file_list):\n    img = plt.imread(file_)\n    # Resize to height, width if your images are not all the same size.\n    img_data[ii, :, :, :] = img\nclass_labels = np.array(class_list)\n</code></pre>\n\n<p>You can now reorder your img_data and class_labels (making sure you reorder them in the same way) and split them into train and test.</p>\n"}], "owner": {"reputation": 31, "user_id": 9401308, "user_type": "registered", "profile_image": "https://graph.facebook.com/2055827181109593/picture?type=large", "display_name": "Bruno Belloni", "link": "https://stackoverflow.com/users/9401308/bruno-belloni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1376, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1539208982, "creation_date": 1539207188, "question_id": 52749091, "link": "https://stackoverflow.com/questions/52749091/build-my-own-dataset-to-use-with-tensorflow-or-keras", "title": "Build my own dataset to use with Tensorflow or Keras", "body": "<p>Currently I load my dataset this way:</p>\n\n<pre><code>from keras.datasets import mnist\n(x_train, y_train), (x_test, y_test) = mnist.load_data()\n</code></pre>\n\n<p>But I would like to use my own dataset that is labeled in folders this way:</p>\n\n<pre><code>flower_phoyos/daisy \nflower_phoyos/dandelion\nflower_phoyos/roses\nflower_phoyos/sunflowers\nflower_phoyos/tulips\n</code></pre>\n\n<p>Each subfolder is a class to be classified, the classifier must sort daisy, dandelion, roses, sunflowers ou tulips.</p>\n\n<p>The solution can be with tensorflow or keras</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 2565, "user_id": 7340948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c4f727ef85a90ec4f5ae954f8718017?s=128&d=identicon&r=PG&f=1", "display_name": "CJR", "link": "https://stackoverflow.com/users/7340948/cjr"}, "is_accepted": false, "score": 1, "last_activity_date": 1539209430, "creation_date": 1539209430, "answer_id": 52749457, "question_id": 52749086, "link": "https://stackoverflow.com/questions/52749086/changing-a-specific-line-in-a-file-with-csv/52749457#52749457", "title": "Changing a specific line in a file with CSV", "body": "<p>This seems overly complicated. You'd be better off reading in all the data into a dict and then dealing with the logic of scores vs high scores once you've got that.</p>\n\n<pre><code>import csv\n\ndef write_score(hs_file_name, username, score):\n\n    high_scores = dict()\n    with open(hs_file_name) as hsfile:\n        for row in csv.reader(hsfile):\n            try:\n                high_scores[row[0]] = row[1]\n            except IndexError:\n                pass\n\n    if username not in high_scores:\n        high_scores[username] = score\n    elif high_scores[username] &lt; score:\n        high_scores[username] = score\n    else:\n        return False\n\n    with open(hs_file_name, mode=\"w\") as hsfile:\n        writer = csv.writer(hsfile)\n        for k, v in high_scores.items():\n            writer.writerow([k, v])\n\n    return True\n</code></pre>\n\n<p>Something like this, for example. You can even have it return True or False so that you can tell if this was a high scoring game. It's not necessary to do the temp file, it would be easier to just overwrite the old file.</p>\n"}], "owner": {"reputation": 1, "user_id": 10486511, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JMFZKn6MyCQ/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWNZxRzXLCiJui6Hh9HVfUqTORiaA/mo/photo.jpg?sz=128", "display_name": "Alex Harrison-Gaze", "link": "https://stackoverflow.com/users/10486511/alex-harrison-gaze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1539209430, "creation_date": 1539207157, "question_id": 52749086, "link": "https://stackoverflow.com/questions/52749086/changing-a-specific-line-in-a-file-with-csv", "title": "Changing a specific line in a file with CSV", "body": "<p>I'm currently trying to record high scores for a game I am making. The idea is the scores are recorded, they are checked against the file for a matching username. If they match up and the score recorded is lower on the file then a new file is created, everything aside from the one line with the lower score is copied across then the current username and score is recorded. The old file is then deleted and the new one is renamed to match.</p>\n\n<p>Unfortunately this does not seem to be working. The code seems to fail to copy across meaning I have to put another script in to make sure it does which then sometimes records incorrect results (lower) then reads them off wrong (readfile.[row]). Am I better off with another method or by pursuing this method further? </p>\n\n<pre><code>import csv, os, sys\ndef scorewriter():\nreplac = 0\nwritein = 1\nstring_score = str(score)\nwith open('highscores.txt','r') as csvfile:\n    highscoresReader=csv.reader(csvfile)\n    for row in highscoresReader:\n        for field in row:\n            #recording high scores\n            if field == username and string_score &gt; row[1]:\n                #MUST get to at least here\n                     with open('highscores_temp.txt','a') as csvfiletemp:\n                         highscoresWriter=csv.writer(csvfiletemp)\n                         for row in highscoresReader:\n                             for field in row:\n                              #something wrong here, doesn't sort properly?\n                                 if field == username:\n                                     writein = 0\n                                     replac=1\n\nhighscoresWriter.writerow([username,string_score])        \n                                 else:\n\nhighscoresWriter.writerow([field,row[1]])\n\n            elif field != username:\n                continue\n\n            elif field == username and string_score &lt;= row[1]:\n                writin = 0\n                continue\n\nif writein == 1:\n    with open('highscores.txt','a') as csvfile:\n        highscoresnewWriter = csv.writer(csvfile)\n        highscoresnewWriter.writerow([username,string_score])\nif replac == 1:\n    csvfile.close()\n    csvfiletemp.close()\n    os.remove(pathtofile)\n</code></pre>\n"}, {"tags": ["python", "pyspark", "tf-idf"], "comments": [{"owner": {"reputation": 2333, "user_id": 2429640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FZeWU.png?s=128&g=1", "display_name": "ldavid", "link": "https://stackoverflow.com/users/2429640/ldavid"}, "edited": false, "score": 0, "creation_date": 1557864099, "post_id": 52749061, "comment_id": 98906569, "body": "Correct me if I&#39;m wrong: you can&#39;t assume the word <code>a8g4i9g5y</code> is the one associated with feature 905 and, therefore, has tf-idf value of 7.34977707433047. The hashing process does not necessarily maintain the order of the words in this specific sentence. You can only be sure that either <code>a8g4i9g5y</code> or <code>hwcdn</code> are represented by column 905, while the other is represented by <code>1104</code>."}], "answers": [{"tags": [], "owner": {"reputation": 416, "user_id": 3441510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f41c4e8f4e3cd56b0eff3e9030950?s=128&d=identicon&r=PG", "display_name": "Phan Chuong", "link": "https://stackoverflow.com/users/3441510/phan-chuong"}, "is_accepted": true, "score": 6, "last_activity_date": 1539292777, "creation_date": 1539292777, "answer_id": 52769089, "question_id": 52749061, "link": "https://stackoverflow.com/questions/52749061/how-to-get-the-word-corresponding-to-highest-tf-idf-using-pyspark/52769089#52769089", "title": "How to get the word corresponding to highest tf-idf using PySpark?", "body": "<ol>\n<li><p>Your <code>feature</code> column has type <code>vector</code> from package <code>pyspark.ml.linalg</code>. It could be either</p>\n\n<ol>\n<li><code>pyspark.ml.linalg.DenseVector</code> (<a href=\"https://spark.apache.org/docs/2.1.1/api/python/_modules/pyspark/ml/linalg.html#DenseVector\" rel=\"noreferrer\">source</a>), e.g. <code>DenseVector([1., 2.])</code></li>\n<li><code>pyspark.ml.linalg.SparseVector</code> (<a href=\"https://spark.apache.org/docs/2.1.1/api/python/_modules/pyspark/ml/linalg.html#SparseVector\" rel=\"noreferrer\">source</a>), e.g. <code>SparseVector(4, [1, 3], [3.0, 4.0])</code></li>\n</ol></li>\n<li><p>Based on the data you have <code>(2000,[905,1104],[7.34977707433047,7.076179741760428])</code>, apparently it's <code>SparseVector</code>, and it could be broken down to 3 main components:</p>\n\n<ul>\n<li><code>size</code>: <code>2000</code></li>\n<li><code>indices</code>: <code>[905,1104]</code></li>\n<li><code>values</code>: <code>[7.34977707433047,7.076179741760428]</code></li>\n</ul></li>\n<li><p>And what you're looking for is the property <code>values</code> of that vector.</p></li>\n<li><p>With the other 'literal' PySpark SQL type such as <code>StringType</code> or <code>IntegerType</code>, you can access its properties (and aggregation functions) using SQL functions package (<a href=\"https://spark.apache.org/docs/2.1.1/api/python/pyspark.sql.html#module-pyspark.sql.functions\" rel=\"noreferrer\">docs</a>). However <code>vector</code> is not literal SQL type and the only way to access its properties is through an UDF, like so:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># Important: `vector.values` returns ndarray from numpy.\n# PySpark doesn't understand ndarray, therefore you'd want to \n# convert it to normal Python list using `tolist`\ndef extract_values_from_vector(vector):\n    return vector.values.tolist()\n\n# Just a regular UDF\ndef extract_values_from_vector_udf(col):\n    return udf(extract_values_from_vector, ArrayType(DoubleType()))\n\n# And use that UDF to get your values\nresults.select(extract_values_from_vector_udf('features'), 'features')\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 109, "user_id": 4832532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c59e088f335d291f5f1fbefdaf21f04?s=128&d=identicon&r=PG&f=1", "display_name": "qqplot", "link": "https://stackoverflow.com/users/4832532/qqplot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2246, "favorite_count": 2, "accepted_answer_id": 52769089, "answer_count": 1, "score": 3, "last_activity_date": 1539292777, "creation_date": 1539206987, "last_edit_date": 1539232651, "question_id": 52749061, "link": "https://stackoverflow.com/questions/52749061/how-to-get-the-word-corresponding-to-highest-tf-idf-using-pyspark", "title": "How to get the word corresponding to highest tf-idf using PySpark?", "body": "<p>I've seen similar posts but with no complete answer, hence posting here.</p>\n\n<p>I am using TF-IDF in Spark to get the word within a document which has the maximum tf-idf value. I use the following piece of code.</p>\n\n<pre><code>from pyspark.ml.feature import HashingTF, IDF, Tokenizer, CountVectorizer, StopWordsRemover\n\ntokenizer = Tokenizer(inputCol=\"doc_cln\", outputCol=\"tokens\")\nremover1 = StopWordsRemover(inputCol=\"tokens\", \noutputCol=\"stopWordsRemovedTokens\")\n\nstopwordList =[\"word1\",\"word2\",\"word3\"]\n\nremover2 = StopWordsRemover(inputCol=\"stopWordsRemovedTokens\", \noutputCol=\"filtered\" ,stopWords=stopwordList)\n\nhashingTF = HashingTF(inputCol=\"filtered\", outputCol=\"rawFeatures\", numFeatures=2000)\n\nidf = IDF(inputCol=\"rawFeatures\", outputCol=\"features\", minDocFreq=5)\n\nfrom pyspark.ml import Pipeline\npipeline = Pipeline(stages=[tokenizer, remover1, remover2, hashingTF, idf])\n\nmodel = pipeline.fit(df)\n\nresults = model.transform(df)\nresults.cache()\n</code></pre>\n\n<p>I get results like </p>\n\n<pre><code>|[a8g4i9g5y, hwcdn] |(2000,[905,1104],[7.34977707433047,7.076179741760428]) \n</code></pre>\n\n<p>where</p>\n\n<pre><code>filtered: array (nullable = true)\nfeatures: vector (nullable = true)\n</code></pre>\n\n<p>How can I get the array extracted from \"feature\"? Ideally, I would like to get the word corresponding to the highest tfidf, like below</p>\n\n<pre><code>|a8g4i9g5y|7.34977707433047\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "python-3.x", "matplotlib"], "comments": [{"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1539207185, "post_id": 52749012, "comment_id": 92422569, "body": "Your code works fine for me producing a plot"}, {"owner": {"reputation": 35, "user_id": 10095708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d2e0fea21a9efa8cc97bfd21f72a838?s=128&d=identicon&r=PG&f=1", "display_name": "ferthal", "link": "https://stackoverflow.com/users/10095708/ferthal"}, "reply_to_user": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1539207271, "post_id": 52749012, "comment_id": 92422608, "body": "@Bazingaa yes I have tested it so the data as I put here is working well, but when I try to run directly from the file that I&#39;ve imported it doesn&#39;t work. I think can be some problem with the importing"}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 1, "creation_date": 1539207354, "post_id": 52749012, "comment_id": 92422641, "body": "You will have to look more carefully in the contents of the file OR the dataframe generated after reading from the file"}, {"owner": {"reputation": 35, "user_id": 10095708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d2e0fea21a9efa8cc97bfd21f72a838?s=128&d=identicon&r=PG&f=1", "display_name": "ferthal", "link": "https://stackoverflow.com/users/10095708/ferthal"}, "reply_to_user": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1539207519, "post_id": 52749012, "comment_id": 92422694, "body": "Yes I will do it! Thanks and sorry for wasting time"}], "owner": {"reputation": 35, "user_id": 10095708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d2e0fea21a9efa8cc97bfd21f72a838?s=128&d=identicon&r=PG&f=1", "display_name": "ferthal", "link": "https://stackoverflow.com/users/10095708/ferthal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 892, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1539206707, "creation_date": 1539206707, "question_id": 52749012, "link": "https://stackoverflow.com/questions/52749012/python-typeerror-1-is-not-a-string", "title": "Python - TypeError: 1 is not a string -", "body": "<p>I'm trying to execute the code below but for some reason it raises the error \"TypeError: 1 is not a string\". </p>\n\n<p>I don't understand why because when I run it changing the dataset to a simple list with integers it's work.</p>\n\n<p>I'm importing the dataset in pandas in this way:</p>\n\n<pre><code>import pandas as pd\nimport matplotlib.pylab as plt\n\ndata = pd.read_csv('sedimento.csv', encoding ='latin-1', delimiter=';', decimal=',')\n</code></pre>\n\n<p>The importing is working well and the resulting dataset is something like that:</p>\n\n<pre><code>data = pd.DataFrame({\"xmin\": [1, 1, 2], \"ymin\": [-13.2, -14.2, -12.76], \"ymax\": [-12.2, -13.2, -11.76]})\n</code></pre>\n\n<p>So I define the parameters to make a plot in a map and lambda function: </p>\n\n<pre><code>xw = 1\nxmin = data['xmin']\nymin = data['ymin']\nymax = data['ymax']\n\nplt.figure()\nlist(map(lambda x,y,z:plt.broken_barh([(x,xw)], (y, z), facecolors = 'blue'), xmin,ymin,ymax))\n</code></pre>\n\n<p>So the \"TypeError: 1 is not a string\" rises right here!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "edited": false, "score": 0, "creation_date": 1539206274, "post_id": 52748914, "comment_id": 92422266, "body": "what happens if you only have 1 <code>o</code> I assume you keeping it ?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1539206496, "post_id": 52748914, "comment_id": 92422334, "body": "Okay ... so the problem is to reduce any sequence of <code>1</code>s to simply <code>&#39;o&#39;, &#39;o&#39;</code>?  Is there some reason to need this within a list comprehension?  I expect that <code>regex</code> could do a neat job on the string of characters."}, {"owner": {"reputation": 13, "user_id": 6019687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/064387e401f9feb43e18e5def61956e0?s=128&d=identicon&r=PG&f=1", "display_name": "dinv", "link": "https://stackoverflow.com/users/6019687/dinv"}, "reply_to_user": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "edited": false, "score": 0, "creation_date": 1539208356, "post_id": 52748914, "comment_id": 92422949, "body": "@MooingRawr yes, keep a single o if it is in the list"}, {"owner": {"reputation": 13, "user_id": 6019687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/064387e401f9feb43e18e5def61956e0?s=128&d=identicon&r=PG&f=1", "display_name": "dinv", "link": "https://stackoverflow.com/users/6019687/dinv"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1539208361, "post_id": 52748914, "comment_id": 92422954, "body": "@Prune not quite...&#39;o&#39; is going to be a dictionary.  Trying a lists comprehension to keep it clean and short but if there&#39;s some clean solutions that are outside of a list comprehension, that&#39;s fine too"}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 1, "last_activity_date": 1539208150, "last_edit_date": 1539208150, "creation_date": 1539206511, "answer_id": 52748969, "question_id": 52748914, "link": "https://stackoverflow.com/questions/52748914/python-remove-inner-items-of-a-sequence-in-a-list/52748969#52748969", "title": "Python remove inner items of a sequence in a list", "body": "<h1>By keeping track of the previous and next element</h1>\n\n<p>We can perform a check on the previous and next element, and check if these are <code>'o'</code>s as well, if so, we do <em>not</em> yield the element, otherwise we do, like:</p>\n\n<pre><code>nbar1 = len(bar) - 1\n[ x for i, x in enumerate(bar) if not (0 &lt; i &lt; nbar1 and bar[i] == bar[i-1] == bar[i+1] == 'o') ]\n</code></pre>\n\n<p>The above can be made more elegant by using <code>chain</code> and <code>zip</code>:</p>\n\n<pre><code>from itertools import chain, islice\n\nprev = chain((None,), bar)\nnxt = islice(chain(bar, (None, )), 1, None)\nresult = [ x for p, x, n in zip(prev, bar, nxt) if not (p == x == n == 'o') ]\n</code></pre>\n\n<p>where <code>p</code> is the \"previous item\", <code>x</code> is the \"current item\", and <code>n</code> is the \"next item\".</p>\n\n<p>This ten yields:</p>\n\n<pre><code>&gt;&gt;&gt; [ x for p, x, n in zip(prev, bar, nxt) if not (p == x == n == 'o') ]\n[0, 0, 'o', 'o', 0, 0, 'o', 'o', 0, 0, 'o']\n</code></pre>\n\n<p>The above will also work with elements that are not <code>0</code>s, for example:</p>\n\n<pre><code>&gt;&gt;&gt; bar = [1, 3, 'o', 'o', 'o', 'o', 'o', 'o', 0, 0, 'o', 'o', 'o', 2, 0, 'o', 'o']\n&gt;&gt;&gt; prev = chain((None,), bar)\n&gt;&gt;&gt; nxt = islice(chain(bar, (None, )), 1, None)\n&gt;&gt;&gt; [ x for p, x, n in zip(prev, bar, nxt) if not (p == x == n == 'o') ]\n[1, 3, 'o', 'o', 0, 0, 'o', 'o', 2, 0, 'o', 'o']\n</code></pre>\n\n<p>We can also easily change it to work with another element (than <code>'o'</code>), as long as it is not something that is equal to <code>None</code>. If that is the case, we can however chain other elements to the <code>prev</code> and <code>nxt</code> iterables.</p>\n\n<p>The above works in linear time <em>O(n)</em> with <em>n</em> the length of the list to process.</p>\n\n<h1>By grouping and slicing</h1>\n\n<p>An alternative is to use <code>itertools.groupby</code> to detect \"bursts\" of characters, and in case the burst contains <code>'o'</code>s, we <code>islice(..)</code> up to two elements:</p>\n\n<p>from itertools import groupby, islice</p>\n\n<pre><code>[ x for k, g in groupby(bar) for x in (islice(g, 2) if k == 'o' else g) ]\n</code></pre>\n\n<p>again yielding:</p>\n\n<pre><code>&gt;&gt;&gt; [ x for k, g in groupby(bar) for x in (islice(g, 2) if k == 'o' else g) ]\n[0, 0, 0, 0, 'o', 'o', 0, 0, 0, 'o', 'o', 0, 0, 'o', 'o']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4254, "user_id": 10255652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5DDj.jpg?s=128&g=1", "display_name": "vash_the_stampede", "link": "https://stackoverflow.com/users/10255652/vash-the-stampede"}, "is_accepted": false, "score": 0, "last_activity_date": 1539207377, "creation_date": 1539207377, "answer_id": 52749128, "question_id": 52748914, "link": "https://stackoverflow.com/questions/52748914/python-remove-inner-items-of-a-sequence-in-a-list/52749128#52749128", "title": "Python remove inner items of a sequence in a list", "body": "<p>Using <code>itertools.groupby</code> if <code>k</code> is <code>0</code> we append all the items from that group, if <code>k</code> is <code>'o'</code> we only append the first and last excluding the middle <code>'o'</code>'s </p>\n\n<pre><code>from itertools import groupby\n\nbar = [0, 0, 'o', 'o', 'o', 'o', 'o', 'o', 0, 0, 'o', 'o', 'o', 0, 0, 'o', 'o']\nnew = []\nfor k, g in groupby(bar):\n    x = list(g)\n    if k == 0:\n        for i in x:\n            new.append(i)\n    elif k == 'o':\n        new.append(x[0])\n        new.append(x[-1])\n\nprint(new)\n# [0, 0, 'o', 'o', 0, 0, 'o', 'o', 0, 0, 'o', 'o']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 83, "user_id": 9756362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omr0s.jpg?s=128&g=1", "display_name": "NyuB", "link": "https://stackoverflow.com/users/9756362/nyub"}, "is_accepted": false, "score": 1, "last_activity_date": 1539207460, "creation_date": 1539207460, "answer_id": 52749140, "question_id": 52748914, "link": "https://stackoverflow.com/questions/52748914/python-remove-inner-items-of-a-sequence-in-a-list/52749140#52749140", "title": "Python remove inner items of a sequence in a list", "body": "<p>If you really want to do it with one comprehension list:</p>\n\n<pre><code>bar=[x if x==0 else 'o' for i,x in enumerate(foo) if (i==0 or i==len(foo)-1) or x==0 or \nfoo[i-1]==0 or foo[i+1]==0]\n</code></pre>\n\n<p>should work for your example.</p>\n"}, {"tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 1, "last_activity_date": 1539219214, "last_edit_date": 1539219214, "creation_date": 1539207602, "answer_id": 52749167, "question_id": 52748914, "link": "https://stackoverflow.com/questions/52748914/python-remove-inner-items-of-a-sequence-in-a-list/52749167#52749167", "title": "Python remove inner items of a sequence in a list", "body": "<p>You can do:</p>\n\n<pre><code>&gt;&gt;&gt; foo = [0,0,0,0,1,1,1,1,1,1,0,0,0,1,1,1,0,0,1,1]\n&gt;&gt;&gt; from itertools import groupby\n&gt;&gt;&gt; [ext for c, grp in groupby(foo) for ext in (grp if c==0 else ['o']*min(2,len(list(grp))))]\n[0, 0, 0, 0, 'o', 'o', 0, 0, 0, 'o', 'o', 0, 0, 'o', 'o']\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6019687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/064387e401f9feb43e18e5def61956e0?s=128&d=identicon&r=PG&f=1", "display_name": "dinv", "link": "https://stackoverflow.com/users/6019687/dinv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 52748969, "answer_count": 4, "score": 1, "last_activity_date": 1539219214, "creation_date": 1539206208, "last_edit_date": 1539208105, "question_id": 52748914, "link": "https://stackoverflow.com/questions/52748914/python-remove-inner-items-of-a-sequence-in-a-list", "title": "Python remove inner items of a sequence in a list", "body": "<pre><code>foo = [0,0,0,0,1,1,1,1,1,1,0,0,0,1,1,1,0,0,1,1]\nbar = [x if x==0 else 'o' for x in foo]\n</code></pre>\n\n<p>bar:</p>\n\n<pre><code>[0, 0, 0, 0,'o', 'o', 'o', 'o', 'o', 'o', 0, 0, 0, 'o', 'o', 'o', 0, 0, 'o', 'o']\n</code></pre>\n\n<p>I would like to remove the inner 'o' at this point so that the result looks like so:</p>\n\n<pre><code>[0, 0, 0, 0, 'o','o', 0, 0, 0, 'o','o', 0, 0, 'o', 'o']\n</code></pre>\n\n<p>If possible, I'd like to do this within the list comprehension itself, and I would like to avoid anything with converting to a string (as my actual task for this involves dictionaries rather than 1's and 0's). Any ideas?</p>\n"}, {"tags": ["python", "pandas", "machine-learning", "scikit-learn", "logistic-regression"], "comments": [{"owner": {"reputation": 9523, "user_id": 2378649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hRA41.png?s=128&g=1", "display_name": "coffeinjunky", "link": "https://stackoverflow.com/users/2378649/coffeinjunky"}, "edited": false, "score": 0, "creation_date": 1539206153, "post_id": 52748854, "comment_id": 92422220, "body": "Just to clarify, the tag is for <code>scikit-learn</code>, but since you are calling <code>sm.Logit()</code>, do you by any chance mean <code>statsmodels</code>?"}], "owner": {"reputation": 11, "user_id": 10486456, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zj1H9AQLGC8/AAAAAAAAAAI/AAAAAAAADMU/m8jvcZT3H1U/photo.jpg?sz=128", "display_name": "Lili Torok", "link": "https://stackoverflow.com/users/10486456/lili-torok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 332, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1539205900, "creation_date": 1539205900, "question_id": 52748854, "link": "https://stackoverflow.com/questions/52748854/logistic-regression-typeerror-cannot-perform-reduce-with-flexible-type", "title": "Logistic Regression: TypeError: cannot perform reduce with flexible type", "body": "<p>I am trying to perform a logistic regression and I am getting the Type Error:\n'cannot perform reduce with flexible type'. I checked an all my variables are integers. \nI am getting the error at this line: </p>\n\n<pre><code>\"logit_model=sm.Logit(y,X)\"\n</code></pre>\n\n<p>and something here: </p>\n\n<pre><code>lib/python3.7/site-packages/numpy/core/_methods.py in _ptp(a, axis, out, keepdims)\n151 def _ptp(a, axis=None, out=None, keepdims=False):\n152     return um.subtract(\n</code></pre>\n\n<p>--> 153         umr_maximum(a, axis, None, out, keepdims),\n    154         umr_minimum(a, axis, None, None, keepdims),\n    155         out</p>\n\n<p>It does not feel like the series in the dataset are actually 'flexible', and since I converted them to integers, there are no Nans or infs. </p>\n\n<p>Thank you for your help,</p>\n\n<p>Lili</p>\n"}, {"tags": ["python", "django", "python-3.x", "heroku"], "comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1539206038, "post_id": 52748808, "comment_id": 92422184, "body": "I just checked the link - it actually says to put the <code>import</code> statement at the <i>top</i> of the file (which is where import statements usually should go). Does this fix the error? (I&#39;m not certain, I&#39;ve never used this package - I have deployed Django projects to Heroku but I&#39;ve always just used config vars for sensitive details and whitenoise for staticfiles.)"}, {"owner": {"reputation": 61, "user_id": 7571090, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a87f9294d275844e173719949e096f27?s=128&d=identicon&r=PG&f=1", "display_name": "hckrieger", "link": "https://stackoverflow.com/users/7571090/hckrieger"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1539207138, "post_id": 52748808, "comment_id": 92422553, "body": "I tried importing it at the top as well to no avail.   This is the only method of concealing sensitive information that I can find on Heroku&#39;s website (if i&#39;m not mistaken.)  If there are other ways of doing it I would like to know.   Thanks."}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1539207548, "post_id": 52748808, "comment_id": 92422704, "body": "It&#39;s simple enough to hide the sensitive connection details, just use Heroku &quot;config variables&quot; for them (which are what Heroku calls environment variables), then use <a href=\"https://docs.python.org/3/library/os.html#os.getenv\" rel=\"nofollow noreferrer\"><code>os.getenv</code></a> in your settings to get hold of them, without having the values in your code. But this package, which I&#39;ve never heard of, sounds really convenient for all deployment issues, so I&#39;d be curious to know why the steps you&#39;re directed to take aren&#39;t working!"}, {"owner": {"reputation": 61, "user_id": 7571090, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a87f9294d275844e173719949e096f27?s=128&d=identicon&r=PG&f=1", "display_name": "hckrieger", "link": "https://stackoverflow.com/users/7571090/hckrieger"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1539208010, "post_id": 52748808, "comment_id": 92422841, "body": "Trying to do it the way you suggested I entered this in settings.py: DATABASE_URL = os.getenv(&#39;DATABASE_URL&#39;).  After running the server from there I got a 500 server error in the browser.  Am I close?"}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1539208149, "post_id": 52748808, "comment_id": 92422885, "body": "you either need to provide a <code>DATABASE_URL</code> environment variable on your local machine, or give a default value to use if its not found (which is what the second parameter to <code>os.getenv</code> is). In the latter case you still have to hardcode it, but usually you&#39;re not bothered about giving away the connection details to your database on localhost :)"}], "owner": {"reputation": 61, "user_id": 7571090, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a87f9294d275844e173719949e096f27?s=128&d=identicon&r=PG&f=1", "display_name": "hckrieger", "link": "https://stackoverflow.com/users/7571090/hckrieger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539209478, "creation_date": 1539205658, "last_edit_date": 1539209478, "question_id": 52748808, "link": "https://stackoverflow.com/questions/52748808/django-heroku-package-isnt-working-with-django-app", "title": "django_heroku package isn&#39;t working with Django app", "body": "<p>I need to configure my Django app to pull the heroku config vars (The DATABASE_URL and SECRET_KEY) to get the database to work with it.  </p>\n\n<p>I look at the <a href=\"https://devcenter.heroku.com/articles/django-app-configuration\" rel=\"nofollow noreferrer\">docs for django_heroku</a> which said to put this at the bottom of the settings.py file after installing the package:</p>\n\n<pre><code>import django_heroku\ndjango_heroku.settings(locals())\n</code></pre>\n\n<p>I entered all that in and ran the server and got this error message:\n<a href=\"https://i.stack.imgur.com/8fCxq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8fCxq.png\" alt=\"enter image description here\"></a></p>\n\n<p>I unfortunately can't understand this error message enough to get the relevant information to fix this problem.  Would you know how I can fix this so I can't get my Django app to work with the database in Heroku?</p>\n\n<p>Any assistance with this problem will be much appreciated!</p>\n"}, {"tags": ["python", "animation", "matplotlib"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1539210751, "post_id": 52748789, "comment_id": 92423660, "body": "There are <a href=\"https://matplotlib.org/gallery/index.html#animation\" rel=\"nofollow noreferrer\">a lot of examples</a> on how to animate plots in matplotlib. I guess it would make sense to at least try to implement it and in addition clearly state what you want to achieve and at which point you&#39;re stuck."}, {"owner": {"reputation": 25, "user_id": 9905179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BdoTD.png?s=128&g=1", "display_name": "RKJ", "link": "https://stackoverflow.com/users/9905179/rkj"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1539214808, "post_id": 52748789, "comment_id": 92424630, "body": "Thanks I will look into it"}], "owner": {"reputation": 25, "user_id": 9905179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BdoTD.png?s=128&g=1", "display_name": "RKJ", "link": "https://stackoverflow.com/users/9905179/rkj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539205584, "creation_date": 1539205584, "question_id": 52748789, "link": "https://stackoverflow.com/questions/52748789/animation-in-matplotlib", "title": "Animation in matplotlib", "body": "<p>I wanted to make a matplotlib animation of trig functions in unit circle, so far I've menaged to get the still plot. I've done the exact same thing in PyGame but it has really bad antialiasing so I moved to matplotlib. I was thinking of achieving the animation effect by increasing the angle in each frame of animation but I just don't know how to make it work in matplotlib.</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom matplotlib.patheffects import withStroke\n\nfig, ax = plt.subplots(figsize=(8, 8))\n\nangle = np.pi / 6\nx = [0, np.cos(angle)]\ny = [0, np.sin(angle)]\n\nax.set_ylim((-1.5, 1.5))\nax.set_xlim((-1.5, 1.5))\n\n\ndef center_origin():\n    # Getting rid of axis values\n    plt.gca().axes.get_xaxis().set_visible(False)\n    plt.gca().axes.get_yaxis().set_visible(False)\n\n    # Move left y-axis and bottom x-axis to centre, passing through (0,0)\n    ax.spines['left'].set_position('center')\n    ax.spines['bottom'].set_position('center')\n\n    # Eliminate upper and right axes\n    ax.spines['right'].set_color('none')\n    ax.spines['top'].set_color('none')\n\n\ndef circle(x, y, radius=0.15):\n\n    circle = plt.Circle((x, y), radius, clip_on=False, zorder=10, linewidth=1,\n                    edgecolor='black', facecolor=(0, 0, 0, .0125),\n                    path_effects=[withStroke(linewidth=1)])\n    ax.add_artist(circle)\n\n\ncircle(0, 0, 1)\n\nax.plot(x, y)\nax.plot([x[1], x[1]], [y[0], y[1]])\nax.plot([x[0], x[1]], [y[1], y[1]])\n\ncenter_origin()\n\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "json"], "answers": [{"tags": [], "owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "is_accepted": true, "score": 0, "last_activity_date": 1539205845, "creation_date": 1539205845, "answer_id": 52748843, "question_id": 52748767, "link": "https://stackoverflow.com/questions/52748767/generate-json-layout-using-list/52748843#52748843", "title": "Generate json layout using list", "body": "<p>Use <code>itertools.groupby</code>:</p>\n\n<pre><code>import csv\nimport json\nimport itertools\nimport operator\n\nwith open('Test.csv') as f:\n    cf = csv.DictReader(f)\n    output = [{'data': list(rows)} \n        for id_, rows in itertools.groupby(cf, key=operator.itemgetter('Id'))]\ndata = json.dumps(output, indent=4)\nprint(data)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 0, "last_activity_date": 1539211841, "creation_date": 1539211841, "answer_id": 52749831, "question_id": 52748767, "link": "https://stackoverflow.com/questions/52748767/generate-json-layout-using-list/52749831#52749831", "title": "Generate json layout using list", "body": "<p>Although not quite as succinct and elegant as using <code>itertools.groupby</code>, here's one way it could which involves manually keeping track of group of data with the same <code>Id</code>:</p>\n\n<pre><code>import csv\nimport json\n\nwith open('Test.csv') as f:\n    output = []\n    data = []\n    key = None\n\n    for row in csv.DictReader(f):\n        if row['Id'] == key:\n            data.append(row)\n        else:\n            if data:\n                output.append({\"data\": data})\n                data = []\n            data.append(row)\n            key = row['Id']\n\n    if data:  # A final group?\n        output.append({\"data\": data})\n\nprint('output:\\n', json.dumps(output, indent=4))\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>output:\n [\n    {\n        \"data\": [\n            {\n                \"Id\": \"123545\",\n                \"LineNo\": \"1\",\n                \"Amt\": \"1000.00\",\n                \"ReceivedDt\": \"2019-02-01T00:00:00\",\n                \"FromDt\": \"2019-02-01T00:00:00\",\n                \"ToDate\": \"2019-02-01T00:00:00\",\n                \"regionId\": \"WA12\"\n            },\n            {\n                \"Id\": \"123545\",\n                \"LineNo\": \"2\",\n                \"Amt\": \"200.00\",\n                \"ReceivedDt\": \"2019-02-01T00:00:00\",\n                \"FromDt\": \"2019-02-01T00:00:00\",\n                \"ToDate\": \"2019-02-01T00:00:00\",\n                \"regionId\": \"WA12\"\n            },\n            {\n                \"Id\": \"123545\",\n                \"LineNo\": \"3\",\n                \"Amt\": \"200.00\",\n                \"ReceivedDt\": \"2019-02-01T00:00:00\",\n                \"FromDt\": \"2019-02-01T00:00:00\",\n                \"ToDate\": \"2019-02-01T00:00:00\",\n                \"regionId\": \"WA12\"\n            }\n        ]\n    },\n    {\n        \"data\": [\n            {\n                \"Id\": \"123546\",\n                \"LineNo\": \"1\",\n                \"Amt\": \"200.00\",\n                \"ReceivedDt\": \"2019-02-01T00:00:00\",\n                \"FromDt\": \"2019-02-01T00:00:00\",\n                \"ToDate\": \"2019-02-01T00:00:00\",\n                \"regionId\": \"WA13\"\n            },\n            {\n                \"Id\": \"123546\",\n                \"LineNo\": \"2\",\n                \"Amt\": \"200.00\",\n                \"ReceivedDt\": \"2019-02-01T00:00:00\",\n                \"FromDt\": \"2019-02-01T00:00:00\",\n                \"ToDate\": \"2019-02-01T00:00:00\",\n                \"regionId\": \"WA13\"\n            }\n        ]\n    }\n]\n</code></pre>\n"}], "owner": {"reputation": 1092, "user_id": 982747, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c85379da7665efb05e33f777bde1daca?s=128&d=identicon&r=PG", "display_name": "Praveenks", "link": "https://stackoverflow.com/users/982747/praveenks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 52748843, "answer_count": 2, "score": 0, "last_activity_date": 1539211841, "creation_date": 1539205462, "last_edit_date": 1539205761, "question_id": 52748767, "link": "https://stackoverflow.com/questions/52748767/generate-json-layout-using-list", "title": "Generate json layout using list", "body": "<p>I am trying to build JSON layout. I am reading all these records from input file. There could be multiple records with the same key(Id) in the file.</p>\n\n<p><strong><em>Sample Input File:</em></strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Id,LineNo,Amt,ReceivedDt,FromDt,ToDate,regionId\n123545,1,1000.00,2019-02-01T00:00:00,2019-02-01T00:00:00,2019-02-01T00:00:00,WA12\n123545,2,200.00,2019-02-01T00:00:00,2019-02-01T00:00:00,2019-02-01T00:00:00,WA12\n123545,3,200.00,2019-02-01T00:00:00,2019-02-01T00:00:00,2019-02-01T00:00:00,WA12\n123546,1,200.00,2019-02-01T00:00:00,2019-02-01T00:00:00,2019-02-01T00:00:00,WA13\n123546,2,200.00,2019-02-01T00:00:00,2019-02-01T00:00:00,2019-02-01T00:00:00,WA13\n</code></pre>\n\n<p>My logic is to read records from file in dictionary format and keep appending it\nin the list until the same key(Id) matches. If the keys stops matching, delete the list and append the new key and then compare the records with this new key. In between, the results needs to be stored so that I don't lose previously processed records. (This is what I am not able to figure it out).</p>\n\n<p><strong><em>Code :</em></strong></p>\n\n<pre><code>import json,csv\n\nwith open('Test.csv') as f:\n    inputfile = csv.DictReader(f)\n    output = []\n    key =1\n    for row in inputfile :\n\n        if len(output)==0:\n            output.append(row)\n\n        elif len(output)&gt;0:\n            if row['Id']==key:\n                output.append(row)\n\n            else:\n                del output[:]\n                output.append(row)\n        key=row['Id']\n        data = json.dumps({\"data\":output}, indent=4)\n\nprint(data)\n</code></pre>\n\n<p><strong><em>Output :</em></strong>\nOnly last 2 rows are coming as the first group is getting deleted.<br />\nPlease suggest how to store those rows.</p>\n\n<pre class=\"lang-json prettyprint-override\"><code>{\n    \"data\": [\n        {\n            \"ToDate\": \"2019-02-01T00:00:00\",\n            \"ReceivedDt\": \"2019-02-01T00:00:00\",\n            \"regionId\": \"WA13\",\n            \"Id\": \"123546\",\n            \"LineNo\": \"1\",\n            \"Amt\": \"200.00\",\n            \"FromDt\": \"2019-02-01T00:00:00\"\n        },\n        {\n            \"ToDate\": \"2019-02-01T00:00:00\",\n            \"ReceivedDt\": \"2019-02-01T00:00:00\",\n            \"regionId\": \"WA13\",\n            \"Id\": \"123546\",\n            \"LineNo\": \"2\",\n            \"Amt\": \"200.00\",\n            \"FromDt\": \"2019-02-01T00:00:00\"\n        }\n    ]\n}\n</code></pre>\n\n<p><strong><em>Desired output :</em></strong></p>\n\n<pre class=\"lang-json prettyprint-override\"><code>{\n    \"data\": [\n        {\n            \"ToDate\": \"2019-02-01T00:00:00\",\n            \"ReceivedDt\": \"2019-02-01T00:00:00\",\n            \"regionId\": \"WA12\",\n            \"Id\": \"123545\",\n            \"LineNo\": \"1\",\n            \"Amt\": \"1000.00\",\n            \"FromDt\": \"2019-02-01T00:00:00\"\n        },\n        {\n            \"ToDate\": \"2019-02-01T00:00:00\",\n            \"ReceivedDt\": \"2019-02-01T00:00:00\",\n            \"regionId\": \"WA12\",\n            \"Id\": \"123545\",\n            \"LineNo\": \"2\",\n            \"Amt\": \"200.00\",\n            \"FromDt\": \"2019-02-01T00:00:00\"\n        },\n        {\n            \"ToDate\": \"2019-02-01T00:00:00\",\n            \"ReceivedDt\": \"2019-02-01T00:00:00\",\n            \"regionId\": \"WA12\",\n            \"Id\": \"123545\",\n            \"LineNo\": \"3\",\n            \"Amt\": \"200.00\",\n            \"FromDt\": \"2019-02-01T00:00:00\"\n        }\n    ]\n},\n{\n    \"data\": [\n        {\n            \"ToDate\": \"2019-02-01T00:00:00\",\n            \"ReceivedDt\": \"2019-02-01T00:00:00\",\n            \"regionId\": \"WA13\",\n            \"Id\": \"123546\",\n            \"LineNo\": \"1\",\n            \"Amt\": \"200.00\",\n            \"FromDt\": \"2019-02-01T00:00:00\"\n        },\n        {\n            \"ToDate\": \"2019-02-01T00:00:00\",\n            \"ReceivedDt\": \"2019-02-01T00:00:00\",\n            \"regionId\": \"WA13\",\n            \"Id\": \"123546\",\n            \"LineNo\": \"2\",\n            \"Amt\": \"200.00\",\n            \"FromDt\": \"2019-02-01T00:00:00\"\n        }\n    ]\n}\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1539205597, "post_id": 52748765, "comment_id": 92422023, "body": "why not <i>replacing</i> the old value?"}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1539205610, "post_id": 52748765, "comment_id": 92422029, "body": "Just index the scores with position: <code>scores[position] = float(format(score, &quot;.2f&quot;))</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1539205631, "post_id": 52748765, "comment_id": 92422037, "body": "better: <code>scores[position] = score</code> you don&#39;t need format to convert back to float"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1539205664, "post_id": 52748765, "comment_id": 92422047, "body": "<code>new_scores=[fix_score(old_score) for old_score in scores_list]</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1539205704, "post_id": 52748765, "comment_id": 92422067, "body": "&quot;He wants me to not use things like .pop, or enumerate&quot;"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1539205721, "post_id": 52748765, "comment_id": 92422071, "body": "Look at your second loop: that&#39;s how you do it.  Just directly replace the old value with the new one."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1539205753, "post_id": 52748765, "comment_id": 92422086, "body": "but it&#39;s using <code>enumerate</code>. That&#39;s ridiculous now :) can the teacher post the answer ?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 4, "creation_date": 1539205803, "post_id": 52748765, "comment_id": 92422102, "body": "People who got 70% or 71% are not going to be happy with this."}, {"owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 2, "creation_date": 1539205914, "post_id": 52748765, "comment_id": 92422139, "body": "@AlexanderReynolds: the text says not to create a new list: <code>scores[:] = (min(100, (1.08 if score &lt; 70 else 1.05) * score) for score in scores)</code>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1539205950, "post_id": 52748765, "comment_id": 92422150, "body": "@AlexanderReynolds: At least where I&#39;m from, &quot;8% extra credit&quot; would always mean &quot;+ 0.08&quot;, not &quot;* 1.08&quot;."}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1539205957, "post_id": 52748765, "comment_id": 92422153, "body": "Jeez I am so bad at reading requirements. @user2357112 good catch, I was just assuming what the OP wrote was correct."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1539206066, "post_id": 52748765, "comment_id": 92422197, "body": "@AlexanderReynolds: Oh hey, you&#39;re right, the code in the question does the same thing. It should probably be doing <code>score += 8</code> or <code>score += 5</code> instead of multiplying."}, {"owner": {"reputation": 4254, "user_id": 10255652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5DDj.jpg?s=128&g=1", "display_name": "vash_the_stampede", "link": "https://stackoverflow.com/users/10255652/vash-the-stampede"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1539206358, "post_id": 52748765, "comment_id": 92422299, "body": "@user2357112 are confirming then this is an additonal 5% of 100 towards your grade, not 5% extra of your current grade?"}, {"owner": {"reputation": 4254, "user_id": 10255652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5DDj.jpg?s=128&g=1", "display_name": "vash_the_stampede", "link": "https://stackoverflow.com/users/10255652/vash-the-stampede"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1539206429, "post_id": 52748765, "comment_id": 92422317, "body": "@user2357112 in terms of relevance for breaking 100 it wont change effect those, but the kid with 75 could jump to a B!"}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 2, "creation_date": 1539206526, "post_id": 52748765, "comment_id": 92422345, "body": "Can we all agree this is a terrible assignment? Generally forces you to use non-Pythonic constructs, storing data which belongs to a key (a student) not in a dictionary (nor keeping them contained together in any other structure), ambiguity on what the percentage applies to, and the overall scheme actually unfairly gives advantages to students with 67, 68, 69 points. Who writes this stuff?"}, {"owner": {"reputation": 4254, "user_id": 10255652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5DDj.jpg?s=128&g=1", "display_name": "vash_the_stampede", "link": "https://stackoverflow.com/users/10255652/vash-the-stampede"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 1, "creation_date": 1539206604, "post_id": 52748765, "comment_id": 92422373, "body": "@AlexanderReynolds I suspect whoever wrote this was one of those students with 67, 68, 69 points :), looking out for his own"}, {"owner": {"reputation": 13, "user_id": 10486423, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216996654853215/picture?type=large", "display_name": "Jessica Suratso", "link": "https://stackoverflow.com/users/10486423/jessica-suratso"}, "edited": false, "score": 0, "creation_date": 1539368092, "post_id": 52748765, "comment_id": 92491363, "body": "my teacher is strict and weird :( can&#39;t argue with him, he&#39;s been teaching the course for years and wouldn&#39;t listen to feedback anyways. Anyways, thanks @everyone!"}], "answers": [{"comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1539206020, "post_id": 52748849, "comment_id": 92422176, "body": "See <a href=\"https://stackoverflow.com/questions/52748765/replace-items-in-a-list-without-using-pop#comment92422150_52748765\">this comment</a>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1539206137, "post_id": 52748849, "comment_id": 92422214, "body": "(except with 8 and 5 instead of 0.08 and 0.05, because that comment was written for percentages scaled to 0-1 instead of 0-100)"}, {"owner": {"reputation": 4254, "user_id": 10255652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5DDj.jpg?s=128&g=1", "display_name": "vash_the_stampede", "link": "https://stackoverflow.com/users/10255652/vash-the-stampede"}, "edited": false, "score": 0, "creation_date": 1539206191, "post_id": 52748849, "comment_id": 92422232, "body": "<code>Truncate each new score to be no more than 100 after adding the extra credit.</code> we are getting graded on this assignment"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1539206330, "post_id": 52748849, "comment_id": 92422290, "body": "Yes, there are other problems.  I&#39;m holding my answer to the question asked: how to replace items without <code>pop</code>.  OP can make the other adaptations, or ask a separate question if stuck.  The comments should suffice."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1539205876, "creation_date": 1539205876, "answer_id": 52748849, "question_id": 52748765, "link": "https://stackoverflow.com/questions/52748765/replace-items-in-a-list-without-using-pop/52748849#52748849", "title": "Replace items in a list without using .pop?", "body": "<p>Look at your second loop: that's how you do it. Just directly replace the old value with the new one.</p>\n\n<pre><code>for i in range(len(scores)):\n    if scores[i] &lt; 70:\n        scores[i] *= 1.08\n    elif scores[i] &gt;= 70:\n        scores[i] *= 1.05\n</code></pre>\n\n<p>No more <code>insert</code> and <code>pop</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 4254, "user_id": 10255652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5DDj.jpg?s=128&g=1", "display_name": "vash_the_stampede", "link": "https://stackoverflow.com/users/10255652/vash-the-stampede"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1539206450, "post_id": 52748899, "comment_id": 92422322, "body": "@roganjosh he&#39;s not allowed to use enumerate"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1539206500, "post_id": 52748899, "comment_id": 92422336, "body": "I suspect this is &quot;cheating&quot; but fair enough :)"}, {"owner": {"reputation": 4254, "user_id": 10255652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5DDj.jpg?s=128&g=1", "display_name": "vash_the_stampede", "link": "https://stackoverflow.com/users/10255652/vash-the-stampede"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1539206546, "post_id": 52748899, "comment_id": 92422355, "body": "@roganjosh I wonder how many times SO ruined the actual in class curve ;)"}], "tags": [], "owner": {"reputation": 4254, "user_id": 10255652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5DDj.jpg?s=128&g=1", "display_name": "vash_the_stampede", "link": "https://stackoverflow.com/users/10255652/vash-the-stampede"}, "is_accepted": true, "score": 1, "last_activity_date": 1539206152, "creation_date": 1539206152, "answer_id": 52748899, "question_id": 52748765, "link": "https://stackoverflow.com/questions/52748765/replace-items-in-a-list-without-using-pop/52748899#52748899", "title": "Replace items in a list without using .pop?", "body": "<p>Use <code>range(len)</code> in place of enumerate</p>\n\n<pre><code>scores = [73.75, 39.45, 72.60, 45.50, 82.75, 97, 54.50, 48.00, 96.50 ]\nprint(scores)\n\nfor i in range(len(scores)):\n    if scores[i] &lt; 70:\n        scores[i] = round(scores[i]*1.08, 2)\n        if scores[i] &gt; 100:\n            scores[i] = 100\n    elif scores[i] &gt; 70:\n        scores[i] = round(scores[i]*1.05, 2)\n        if scores[i] &gt; 100:\n            scores[i] = 100\n\nprint(scores)\n# [77.44, 42.61, 76.23, 49.14, 86.89, 100, 58.86, 51.84, 100]\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10486423, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216996654853215/picture?type=large", "display_name": "Jessica Suratso", "link": "https://stackoverflow.com/users/10486423/jessica-suratso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "closed_date": 1539244256, "accepted_answer_id": 52748899, "answer_count": 2, "score": -1, "last_activity_date": 1539206152, "creation_date": 1539205458, "question_id": 52748765, "link": "https://stackoverflow.com/questions/52748765/replace-items-in-a-list-without-using-pop", "closed_reason": "Needs details or clarity", "title": "Replace items in a list without using .pop?", "body": "<p><strong>This is the question:</strong></p>\n\n<p>A professor felt that scores on a test came out somewhat low. The professor decided to <strong><em>give 8% extra\ncredit to students whose score is less than 70, and 5% extra credit to students whose score is 70 or\nmore</em></strong>. Write a Python program that:</p>\n\n<ul>\n<li>Stores the scores in a list, and print the initial scores, with a message:</li>\n<li>scores = [73.75, 39.45, 72.60, 45.50, 82.75, 97, 54.50, 48.00, 96.50 ]</li>\n<li>Using a loop, process each score to calculate the new score and <strong>store it in the same list. You may\nnot change the order of the list</strong>, since the scores correspond to the class roster.</li>\n<li>Truncate each new score to be no more than 100 after adding the extra credit.</li>\n<li>Print the list of new scores, with a short message</li>\n<li>You may NOT use more than one list in your program.</li>\n<li>Your program must work on a list of any length. The list above is only for your program testing. </li>\n</ul>\n\n<p><strong>My code:</strong></p>\n\n<pre><code>#this code shows old scores and prints the new scores of students \n\nposition = 0 #initialize position for later \n\nscores = [73.75, 39.45, 72.60, 45.50, 82.75, 97, 54.50, 48.00, 96.50 ]\nprint (\"\\nThese are the old scores: \", scores)\n\nfor score in scores:\n    if score &lt; 70:\n        score *= 1.08\n    elif score &gt;= 70:\n        score *= 1.05\n    scores.insert (position,float(format(score,\".2f\"))) #this adds the new score into position\n    position += 1\n    scores.pop (position) #this removes the old score which was pushed to +1 position\n\nfor position, score in enumerate(scores):\n    if score &gt; 100:\n        scores[position] = 100\n\nprint (\"These are the new scores:\", scores)\n</code></pre>\n\n<p>He wants me to not use things like .pop, or enumerate and says there's a simpler way to do it but I just can't think of one. Please help!</p>\n"}, {"tags": ["python", "python-3.x", "class", "metaprogramming"], "comments": [{"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 1, "creation_date": 1539205640, "post_id": 52748764, "comment_id": 92422040, "body": "You&#39;re using <code>type</code> wrong. The first argument should be the class name. &quot;hey.Ho&quot; is not the class name. It should be just &quot;Ho&quot;."}, {"owner": {"reputation": 588, "user_id": 3758232, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4da26c459717c9a6092828637b887b42?s=128&d=identicon&r=PG&f=1", "display_name": "user3758232", "link": "https://stackoverflow.com/users/3758232/user3758232"}, "reply_to_user": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1539205912, "post_id": 52748764, "comment_id": 92422137, "body": "I tried that. In that case, in the second example, the namespace is <code>abc.Ho</code>."}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1539206769, "post_id": 52748764, "comment_id": 92422430, "body": "I&#39;m not saying it&#39;ll fix all your problems, I&#39;m just saying that the way you&#39;re doing it is wrong."}], "answers": [{"comments": [{"owner": {"reputation": 588, "user_id": 3758232, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4da26c459717c9a6092828637b887b42?s=128&d=identicon&r=PG&f=1", "display_name": "user3758232", "link": "https://stackoverflow.com/users/3758232/user3758232"}, "edited": false, "score": 0, "creation_date": 1539206129, "post_id": 52748842, "comment_id": 92422211, "body": "Hah. Spot-on. Thanks."}], "tags": [], "owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "is_accepted": true, "score": 2, "last_activity_date": 1539205842, "creation_date": 1539205842, "answer_id": 52748842, "question_id": 52748764, "link": "https://stackoverflow.com/questions/52748764/python-3-set-namespace-for-dynamic-classes/52748842#52748842", "title": "Python 3: Set namespace for dynamic classes", "body": "<p>You want to set the class's <code>__module__</code> attribute:</p>\n\n<pre><code>&gt;&gt;&gt; type('Ho', (), {'__module__': 'hey'})\n&lt;class 'hey.Ho'&gt;\n</code></pre>\n"}], "owner": {"reputation": 588, "user_id": 3758232, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4da26c459717c9a6092828637b887b42?s=128&d=identicon&r=PG&f=1", "display_name": "user3758232", "link": "https://stackoverflow.com/users/3758232/user3758232"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "closed_date": 1539206708, "accepted_answer_id": 52748842, "answer_count": 1, "score": 1, "last_activity_date": 1539205842, "creation_date": 1539205457, "question_id": 52748764, "link": "https://stackoverflow.com/questions/52748764/python-3-set-namespace-for-dynamic-classes", "closed_reason": "Duplicate", "title": "Python 3: Set namespace for dynamic classes", "body": "<p>I am writing a Python (3.6) program to generate classes dynamically from user-provided Yaml files. </p>\n\n<p>The process seems pretty straightforward using <code>type()</code>, but I am not able to control the module name of the generated class. </p>\n\n<p>A minimal example: </p>\n\n<pre><code>&gt;&gt;&gt; x = type('hey.Ho', (), {})\n&gt;&gt;&gt; x\n__main__.hey.Ho\n</code></pre>\n\n<p>Moreover (closer to my real-world code):</p>\n\n<pre><code>&gt;&gt;&gt; from abc import ABCMeta\n&gt;&gt;&gt; class BaseClass(metaclass=ABCMeta):\n...    pass\n\n&gt;&gt;&gt; x = type('hey.Ho', (BaseClass,), {})\n&gt;&gt;&gt; x\nabc.hey.Ho\n</code></pre>\n\n<p>How do I get my new class namespace to be just <code>hey.Ho</code>? </p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 7710693, "user_type": "registered", "accept_rate": 46, "profile_image": "https://lh3.googleusercontent.com/-Uq82XVJYZ7A/AAAAAAAAAAI/AAAAAAAAACk/PgWAWVpSeq0/photo.jpg?sz=128", "display_name": "Radwa Sharaf", "link": "https://stackoverflow.com/users/7710693/radwa-sharaf"}, "edited": false, "score": 1, "creation_date": 1539207145, "post_id": 52748773, "comment_id": 92422554, "body": "This is very helpful. Thank you very much!"}], "tags": [], "owner": {"reputation": 11289, "user_id": 1822698, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/725a332cc5b93972e715f071b631f4a8?s=128&d=identicon&r=PG", "display_name": "slider", "link": "https://stackoverflow.com/users/1822698/slider"}, "is_accepted": true, "score": 2, "last_activity_date": 1539205785, "last_edit_date": 1539205785, "creation_date": 1539205477, "answer_id": 52748773, "question_id": 52748728, "link": "https://stackoverflow.com/questions/52748728/in-a-new-class-how-to-avoid-calling-an-instance-of-another-class/52748773#52748773", "title": "In a new class, how to avoid calling an instance of another class?", "body": "<p>You don't need to create a new instance of <code>Student</code> in that method's argument list. Change that to:</p>\n\n<pre><code>def _check_if_school_matches(self, student):\n    if self.school == student.school:\n        print(\"yes\")\n</code></pre>\n\n<p>So now if you call that method on <code>teacher1</code> with the <code>student1</code> instance, it prints \"yes\"</p>\n\n<pre><code>student1=Student(\"Alex\", \"Highschool\")\nteacher1=Teacher(\"Mary\", \"Highschool\")\n\nteacher1._check_if_school_matches(student1) # yes\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/4205130/what-is-duck-typing\">What is duck typing?</a></p>\n"}], "owner": {"reputation": 147, "user_id": 7710693, "user_type": "registered", "accept_rate": 46, "profile_image": "https://lh3.googleusercontent.com/-Uq82XVJYZ7A/AAAAAAAAAAI/AAAAAAAAACk/PgWAWVpSeq0/photo.jpg?sz=128", "display_name": "Radwa Sharaf", "link": "https://stackoverflow.com/users/7710693/radwa-sharaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 52748773, "answer_count": 1, "score": 0, "last_activity_date": 1539205785, "creation_date": 1539205310, "last_edit_date": 1539205519, "question_id": 52748728, "link": "https://stackoverflow.com/questions/52748728/in-a-new-class-how-to-avoid-calling-an-instance-of-another-class", "title": "In a new class, how to avoid calling an instance of another class?", "body": "<p>Essentially, this is what I currently have:</p>\n\n<p>In script1 I have this:</p>\n\n<pre><code>class Student(object):\n    def __init__(self,name,school):\n        self.name = name\n        self.school = school\n</code></pre>\n\n<p>In script2 I have this:</p>\n\n<pre><code>class Teacher(object):\n    def __init__(self,name,school):\n        self.name = name\n        self.school = school\n</code></pre>\n\n<p>And in script3, I define the instances and check if the schools match:</p>\n\n<pre><code>student1=Student(\"Alex\",\"Highschool\")\nteacher1=Teacher(\"Mary\",\"Highschool\")\n\nif student1.school == teacher1.school:\n    print(\"yes\")\n</code></pre>\n\n<p>However I would like to incorporate checking if the schools matched in either script1 or script2. This is what I have tried:</p>\n\n<pre><code>class Teacher(object):\n    def __init__(self,name,school):\n        self.name = name\n        self.school = school\n    def _check_if_school_matches(self,Student()):\n        if self.school == Student.school:\n            print(\"yes\")\n</code></pre>\n\n<p>But of course I get a <code>SyntaxError</code>, and I can't say <code>_check_if_school_matches(self,student1)</code> because <code>student1</code> is not defined yet.</p>\n"}, {"tags": ["python", "json", "pandas", "csv"], "comments": [{"owner": {"reputation": 6910, "user_id": 567595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49e39b67d2ef2f9fc041495ae46fe6d?s=128&d=identicon&r=PG", "display_name": "Stuart", "link": "https://stackoverflow.com/users/567595/stuart"}, "edited": false, "score": 1, "creation_date": 1539205905, "post_id": 52748724, "comment_id": 92422134, "body": "What have you tried and what happened? Also please can you try to clarify your description of how the data is arranged and how you want it to be arranged."}, {"owner": {"reputation": 15, "user_id": 10334437, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lIb6gXJMPdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMLLlRkihG8oNiQgbvpDs8ZFou_Zw/mo/photo.jpg?sz=128", "display_name": "Johnny Guitar", "link": "https://stackoverflow.com/users/10334437/johnny-guitar"}, "reply_to_user": {"reputation": 6910, "user_id": 567595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49e39b67d2ef2f9fc041495ae46fe6d?s=128&d=identicon&r=PG", "display_name": "Stuart", "link": "https://stackoverflow.com/users/567595/stuart"}, "edited": false, "score": 0, "creation_date": 1539206280, "post_id": 52748724, "comment_id": 92422268, "body": "The data inside &quot;cols&quot; are individual columns in a CSV file. The data inside &quot;rows&quot; is assigned to the columns. This is the configuration: Depth 1 2 3 4 5 Page_Count 1, 661, 16773"}, {"owner": {"reputation": 15, "user_id": 10334437, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lIb6gXJMPdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMLLlRkihG8oNiQgbvpDs8ZFou_Zw/mo/photo.jpg?sz=128", "display_name": "Johnny Guitar", "link": "https://stackoverflow.com/users/10334437/johnny-guitar"}, "reply_to_user": {"reputation": 6910, "user_id": 567595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49e39b67d2ef2f9fc041495ae46fe6d?s=128&d=identicon&r=PG", "display_name": "Stuart", "link": "https://stackoverflow.com/users/567595/stuart"}, "edited": false, "score": 0, "creation_date": 1539206421, "post_id": 52748724, "comment_id": 92422316, "body": "@Stuart I&#39;ve updated the final line of the post with an image of what I&#39;m trying to accomplish"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 10334437, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lIb6gXJMPdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMLLlRkihG8oNiQgbvpDs8ZFou_Zw/mo/photo.jpg?sz=128", "display_name": "Johnny Guitar", "link": "https://stackoverflow.com/users/10334437/johnny-guitar"}, "edited": false, "score": 0, "creation_date": 1539207850, "post_id": 52748989, "comment_id": 92422789, "body": "Your solution works perfectly, but I get this error with my File TypeError: the JSON object must be str, bytes or bytearray, not dict"}, {"owner": {"reputation": 11591, "user_id": 1097347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/efffb39e9e98d002a5b9afe2fde7e50d?s=128&d=identicon&r=PG", "display_name": "Uri Goren", "link": "https://stackoverflow.com/users/1097347/uri-goren"}, "reply_to_user": {"reputation": 15, "user_id": 10334437, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lIb6gXJMPdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMLLlRkihG8oNiQgbvpDs8ZFou_Zw/mo/photo.jpg?sz=128", "display_name": "Johnny Guitar", "link": "https://stackoverflow.com/users/10334437/johnny-guitar"}, "edited": false, "score": 0, "creation_date": 1539249753, "post_id": 52748989, "comment_id": 92436265, "body": "You used a <code>dict</code> for <code>json_text</code> and not a string as your question suggests. just replace <code>json.loads(json_text)</code> with only <code>json_text</code>"}], "tags": [], "owner": {"reputation": 11591, "user_id": 1097347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/efffb39e9e98d002a5b9afe2fde7e50d?s=128&d=identicon&r=PG", "display_name": "Uri Goren", "link": "https://stackoverflow.com/users/1097347/uri-goren"}, "is_accepted": false, "score": 0, "last_activity_date": 1539206611, "creation_date": 1539206611, "answer_id": 52748989, "question_id": 52748724, "link": "https://stackoverflow.com/questions/52748724/python-json-convertion-with-pandas-to-csv/52748989#52748989", "title": "Python - JSON convertion with Pandas to CSV", "body": "<p>This example takes the first <code>aggs</code> value, and converts it to <code>csv</code></p>\n\n<pre><code>import pandas as pd\nimport json\ndata = json.loads(json_text)['aggs'][0]\npd.DataFrame(data['rows'], columns = data['cols']).to_csv('output.csv')\n</code></pre>\n\n<p>Just loop over <code>aggs</code> if you expect more than one table per <code>json_text</code></p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 10334437, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lIb6gXJMPdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMLLlRkihG8oNiQgbvpDs8ZFou_Zw/mo/photo.jpg?sz=128", "display_name": "Johnny Guitar", "link": "https://stackoverflow.com/users/10334437/johnny-guitar"}, "edited": false, "score": 0, "creation_date": 1539208047, "post_id": 52748994, "comment_id": 92422853, "body": "I don&#39;t know why, but I&#39;m getting  dfJson not define when I try this solution!"}, {"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "reply_to_user": {"reputation": 15, "user_id": 10334437, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lIb6gXJMPdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMLLlRkihG8oNiQgbvpDs8ZFou_Zw/mo/photo.jpg?sz=128", "display_name": "Johnny Guitar", "link": "https://stackoverflow.com/users/10334437/johnny-guitar"}, "edited": false, "score": 0, "creation_date": 1539208359, "post_id": 52748994, "comment_id": 92422951, "body": "If you copied it directly, maybe try it again. Inside the for loop there was an indentation issue that I just fixed (one indent had one space less than it should). I just ran the code again and it is working fine for me!"}, {"owner": {"reputation": 15, "user_id": 10334437, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lIb6gXJMPdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMLLlRkihG8oNiQgbvpDs8ZFou_Zw/mo/photo.jpg?sz=128", "display_name": "Johnny Guitar", "link": "https://stackoverflow.com/users/10334437/johnny-guitar"}, "edited": false, "score": 0, "creation_date": 1539209037, "post_id": 52748994, "comment_id": 92423182, "body": "I would love to figure this out and mark it as the right answer, because I&#39;m having so many  issues with this and your answer is the best one so far!"}, {"owner": {"reputation": 15, "user_id": 10334437, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lIb6gXJMPdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMLLlRkihG8oNiQgbvpDs8ZFou_Zw/mo/photo.jpg?sz=128", "display_name": "Johnny Guitar", "link": "https://stackoverflow.com/users/10334437/johnny-guitar"}, "edited": false, "score": 0, "creation_date": 1539209153, "post_id": 52748994, "comment_id": 92423214, "body": "The error seems to be here: if j == &#39;cols&#39;:                 dfJson.columns = k # make cols columns names  dfJson.to_csv(&#39;./Desktop/dfJson.csv&#39;, index=False)"}, {"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "reply_to_user": {"reputation": 15, "user_id": 10334437, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lIb6gXJMPdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMLLlRkihG8oNiQgbvpDs8ZFou_Zw/mo/photo.jpg?sz=128", "display_name": "Johnny Guitar", "link": "https://stackoverflow.com/users/10334437/johnny-guitar"}, "edited": false, "score": 0, "creation_date": 1539209180, "post_id": 52748994, "comment_id": 92423223, "body": "What happens if you <code>print(dfJson)</code> inside of the last if statement, like <code>if j == &#39;cols&#39;: dfJson.columns = k print(dfJson)</code>"}, {"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "reply_to_user": {"reputation": 15, "user_id": 10334437, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lIb6gXJMPdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMLLlRkihG8oNiQgbvpDs8ZFou_Zw/mo/photo.jpg?sz=128", "display_name": "Johnny Guitar", "link": "https://stackoverflow.com/users/10334437/johnny-guitar"}, "edited": false, "score": 0, "creation_date": 1539209232, "post_id": 52748994, "comment_id": 92423245, "body": "try printing dfJson in the last if statement to see if it populates a df, if so we can write out the df to csv in that if statement and I think it would be fine."}, {"owner": {"reputation": 15, "user_id": 10334437, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lIb6gXJMPdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMLLlRkihG8oNiQgbvpDs8ZFou_Zw/mo/photo.jpg?sz=128", "display_name": "Johnny Guitar", "link": "https://stackoverflow.com/users/10334437/johnny-guitar"}, "edited": false, "score": 0, "creation_date": 1539209269, "post_id": 52748994, "comment_id": 92423253, "body": "if j == &#39;cols&#39;: dfJson.columns = k print(dfJson)  this gives invalid syntax  also tried: if j == &#39;cols&#39;:                 print(dfJson) but this gives dfJson not defined"}, {"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "reply_to_user": {"reputation": 15, "user_id": 10334437, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lIb6gXJMPdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMLLlRkihG8oNiQgbvpDs8ZFou_Zw/mo/photo.jpg?sz=128", "display_name": "Johnny Guitar", "link": "https://stackoverflow.com/users/10334437/johnny-guitar"}, "edited": false, "score": 0, "creation_date": 1539209272, "post_id": 52748994, "comment_id": 92423255, "body": "I do not know why it is not defining for you. that is strange!"}, {"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "reply_to_user": {"reputation": 15, "user_id": 10334437, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lIb6gXJMPdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMLLlRkihG8oNiQgbvpDs8ZFou_Zw/mo/photo.jpg?sz=128", "display_name": "Johnny Guitar", "link": "https://stackoverflow.com/users/10334437/johnny-guitar"}, "edited": false, "score": 0, "creation_date": 1539209325, "post_id": 52748994, "comment_id": 92423271, "body": "I mean put <code>print(dfJson)</code> on its own line underneath the dfJson.columns = k statement. That would not be invalid syntax"}, {"owner": {"reputation": 15, "user_id": 10334437, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lIb6gXJMPdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMLLlRkihG8oNiQgbvpDs8ZFou_Zw/mo/photo.jpg?sz=128", "display_name": "Johnny Guitar", "link": "https://stackoverflow.com/users/10334437/johnny-guitar"}, "edited": false, "score": 0, "creation_date": 1539209458, "post_id": 52748994, "comment_id": 92423305, "body": "Can I contact you through some chat? or by e-mail? mine is: guschain1@outlook.pt"}, {"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "reply_to_user": {"reputation": 15, "user_id": 10334437, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lIb6gXJMPdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMLLlRkihG8oNiQgbvpDs8ZFou_Zw/mo/photo.jpg?sz=128", "display_name": "Johnny Guitar", "link": "https://stackoverflow.com/users/10334437/johnny-guitar"}, "edited": false, "score": 0, "creation_date": 1539209503, "post_id": 52748994, "comment_id": 92423315, "body": "I edited my answer, try it and if it doesn&#39;t work we can use the chat on here."}, {"owner": {"reputation": 15, "user_id": 10334437, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lIb6gXJMPdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMLLlRkihG8oNiQgbvpDs8ZFou_Zw/mo/photo.jpg?sz=128", "display_name": "Johnny Guitar", "link": "https://stackoverflow.com/users/10334437/johnny-guitar"}, "edited": false, "score": 0, "creation_date": 1539209533, "post_id": 52748994, "comment_id": 92423335, "body": "Yes, I tried to print, like so:  if j == &#39;rows&#39;:                 dfJson = pd.DataFrame(k) # make rows the row values             if j == &#39;cols&#39;:                 dfJson.columns = k                 print(dfJson)"}, {"owner": {"reputation": 15, "user_id": 10334437, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lIb6gXJMPdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMLLlRkihG8oNiQgbvpDs8ZFou_Zw/mo/photo.jpg?sz=128", "display_name": "Johnny Guitar", "link": "https://stackoverflow.com/users/10334437/johnny-guitar"}, "edited": false, "score": 0, "creation_date": 1539209654, "post_id": 52748994, "comment_id": 92423376, "body": "Still not defined with the new code edited, I can&#39;t move to chat, it seems I don&#39;t have enough reputation"}, {"owner": {"reputation": 15, "user_id": 10334437, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lIb6gXJMPdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMLLlRkihG8oNiQgbvpDs8ZFou_Zw/mo/photo.jpg?sz=128", "display_name": "Johnny Guitar", "link": "https://stackoverflow.com/users/10334437/johnny-guitar"}, "edited": false, "score": 0, "creation_date": 1539210109, "post_id": 52748994, "comment_id": 92423486, "body": "I sent email! :)"}], "tags": [], "owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "is_accepted": true, "score": 1, "last_activity_date": 1539212115, "last_edit_date": 1539212115, "creation_date": 1539206628, "answer_id": 52748994, "question_id": 52748724, "link": "https://stackoverflow.com/questions/52748724/python-json-convertion-with-pandas-to-csv/52748994#52748994", "title": "Python - JSON convertion with Pandas to CSV", "body": "<p>These json formats end up being nested dicts, so I handled it like this:</p>\n\n<pre><code>import pandas as pd\nimport os\n\nx =  {\n  \"aggs\": [\n    {\n      \"cols\": [\n        \"depth\",\n        \"page_count\"\n      ],\n      \"rows\": [\n        [\n          1,\n          1\n        ],\n        [\n          2,\n          661\n        ],\n        [\n          3,\n          16773\n        ],\n        [\n          4,\n          7078\n        ],\n        [\n          5,\n          221\n        ]\n      ]\n    }\n  ]\n}\n\ndfrows = []\ndfcolumns = []\nfor y,z in x.items(): # x.items() is a nested dict with aggs is outer key x and z is list as the value of aggs:\n    for a in z: # a accesses the inner dict in the list\n        for j,k in a.items(): # key, value of rows and cols in inner dict\n            if j == 'rows':\n                dfrows.append(k) # make list of list of row values\n            if j == 'cols':\n                dfcolumns.append(k) # make list of list of column names\n\nrows_flat_list = [item for x in dfrows for item in x] # flatten out list\ncolumns_flat_list = [item for x in dfcolumns for item in x] # flatten out list\n\ndfJson = pd.DataFrame(data = rows_flat_list, columns= columns_flat_list) # create df\n\ndfJson.to_csv('./dfJson.csv', index=False) # write to csv\n</code></pre>\n\n<p>output csv file looks like (or if you open with excel it is an excelfile format):</p>\n\n<pre><code>depth,page_count\n1,1\n2,661\n3,16773\n4,7078\n5,221\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 10334437, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lIb6gXJMPdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMLLlRkihG8oNiQgbvpDs8ZFou_Zw/mo/photo.jpg?sz=128", "display_name": "Johnny Guitar", "link": "https://stackoverflow.com/users/10334437/johnny-guitar"}, "edited": false, "score": 0, "creation_date": 1539207833, "post_id": 52749000, "comment_id": 92422782, "body": "Your solution works perfectly, but I get this error with my File TypeError: the JSON object must be str, bytes or bytearray, not dict"}, {"owner": {"reputation": 6910, "user_id": 567595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49e39b67d2ef2f9fc041495ae46fe6d?s=128&d=identicon&r=PG", "display_name": "Stuart", "link": "https://stackoverflow.com/users/567595/stuart"}, "reply_to_user": {"reputation": 15, "user_id": 10334437, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lIb6gXJMPdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMLLlRkihG8oNiQgbvpDs8ZFou_Zw/mo/photo.jpg?sz=128", "display_name": "Johnny Guitar", "link": "https://stackoverflow.com/users/10334437/johnny-guitar"}, "edited": false, "score": 0, "creation_date": 1539214736, "post_id": 52749000, "comment_id": 92424613, "body": "Then your data is probably a dict to start with? So no need for <code>json.loads</code>"}], "tags": [], "owner": {"reputation": 6910, "user_id": 567595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49e39b67d2ef2f9fc041495ae46fe6d?s=128&d=identicon&r=PG", "display_name": "Stuart", "link": "https://stackoverflow.com/users/567595/stuart"}, "is_accepted": false, "score": 1, "last_activity_date": 1539206656, "creation_date": 1539206656, "answer_id": 52749000, "question_id": 52748724, "link": "https://stackoverflow.com/questions/52748724/python-json-convertion-with-pandas-to-csv/52749000#52749000", "title": "Python - JSON convertion with Pandas to CSV", "body": "<p>As far as I can see <code>pandas.read_json</code> cannot deal with data in this format, so you have to read it in using <code>json.loads</code> (or <code>json.load</code> from a file) first.</p>\n\n<pre><code>import pandas as pd\nimport json\ndata = \"\"\"{\"aggs\": [{\"rows\": [[1, 1], [2, 661], [3, 16773], [4, 7078], \n        [5, 221]], \"cols\": [\"depth\", \"page_count\"]}]}\"\"\"\n\nmain_data = json.loads(data)[\"aggs\"][0]\ndf = pd.DataFrame(columns=main_data['cols'], data=main_data['rows'])\ndf.to_csv(\"my_file.csv\")\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 10334437, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lIb6gXJMPdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMLLlRkihG8oNiQgbvpDs8ZFou_Zw/mo/photo.jpg?sz=128", "display_name": "Johnny Guitar", "link": "https://stackoverflow.com/users/10334437/johnny-guitar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 52748994, "answer_count": 3, "score": 1, "last_activity_date": 1539212115, "creation_date": 1539205300, "last_edit_date": 1539206879, "question_id": 52748724, "link": "https://stackoverflow.com/questions/52748724/python-json-convertion-with-pandas-to-csv", "title": "Python - JSON convertion with Pandas to CSV", "body": "<p>I'm working with a JSON file that has nested objects like this.\nThe data is divided in to Columns and rows.</p>\n\n<p>The columns data should be in separate columns and in the rows object, the numbers inside it should be associated with the respective columns, like so:</p>\n\n<ul>\n<li>Depth: 1, 2, 3, 4, 5</li>\n<li>Page_Count: 1, 661, 16773, etc</li>\n</ul>\n\n<p>So far I haven't been able to convert the file into that format, how can I go about doing this?</p>\n\n<pre class=\"lang-js prettyprint-override\"><code> {\n      \"aggs\": [\n        {\n          \"cols\": [\n            \"depth\",\n            \"page_count\"\n          ],\n          \"rows\": [\n            [\n              1,\n              1\n            ],\n            [\n              2,\n              661\n            ],\n            [\n              3,\n              16773\n            ],\n            [\n              4,\n              7078\n            ],\n            [\n              5,\n              221\n            ]\n          ]\n        }\n      ]\n    }\n</code></pre>\n\n<p>The final product should look something like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>    depth | page_count\n    -----:|----------:\n        1 |          1\n        2 |        661\n        3 |      16773\n        4 |       7078\n        5 |        221\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "enums", "python-3.6"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1539205333, "post_id": 52748704, "comment_id": 92421927, "body": "using a dictionary?"}, {"owner": {"reputation": 11174, "user_id": 1069285, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6095e961b5a52fe62fd49451cd3e8f0a?s=128&d=identicon&r=PG", "display_name": "arno_v", "link": "https://stackoverflow.com/users/1069285/arno-v"}, "edited": false, "score": 1, "creation_date": 1539205414, "post_id": 52748704, "comment_id": 92421956, "body": "Use <code>Ranking[&#39;First&#39;]</code>?"}, {"owner": {"reputation": 1660, "user_id": 4156082, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/8ehGW.jpg?s=128&g=1", "display_name": "holtc", "link": "https://stackoverflow.com/users/4156082/holtc"}, "edited": false, "score": 0, "creation_date": 1539205555, "post_id": 52748704, "comment_id": 92422006, "body": "Ranking[&#39;First&#39;] displays the same error"}, {"owner": {"reputation": 11174, "user_id": 1069285, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6095e961b5a52fe62fd49451cd3e8f0a?s=128&d=identicon&r=PG", "display_name": "arno_v", "link": "https://stackoverflow.com/users/1069285/arno-v"}, "edited": false, "score": 0, "creation_date": 1539205599, "post_id": 52748704, "comment_id": 92422025, "body": "Did you try removing the commas?"}, {"owner": {"reputation": 1660, "user_id": 4156082, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/8ehGW.jpg?s=128&g=1", "display_name": "holtc", "link": "https://stackoverflow.com/users/4156082/holtc"}, "edited": false, "score": 0, "creation_date": 1539206193, "post_id": 52748704, "comment_id": 92422234, "body": "Yep, that fixed it!"}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1539205441, "post_id": 52748738, "comment_id": 92421967, "body": "oh interesting typo on a new feature."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1539205353, "creation_date": 1539205353, "answer_id": 52748738, "question_id": 52748704, "link": "https://stackoverflow.com/questions/52748704/python-enum-get-by-string-value-does-not-work/52748738#52748738", "title": "python enum get by string value does not work", "body": "<p>You're thinking C-style, where line breaks are meaningless and enum members need commas between them. In Python, line breaks matter, and those commas are actually creating tuples:</p>\n\n<pre><code># How Python sees your code\nclass Ranking(Enum):\n    FIRST = ('First',)\n    SECOND = ('Second',)\n    THIRD = 'Third'\n</code></pre>\n\n<p>Remove the commas.</p>\n"}], "owner": {"reputation": 1660, "user_id": 4156082, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/8ehGW.jpg?s=128&g=1", "display_name": "holtc", "link": "https://stackoverflow.com/users/4156082/holtc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 52748738, "answer_count": 1, "score": 2, "last_activity_date": 1539205353, "creation_date": 1539205197, "question_id": 52748704, "link": "https://stackoverflow.com/questions/52748704/python-enum-get-by-string-value-does-not-work", "title": "python enum get by string value does not work", "body": "<p>I have the below enum</p>\n\n<pre><code>class Ranking(Enum):\n    FIRST = 'First',\n    SECOND = 'Second',\n    THIRD = 'Third'\n</code></pre>\n\n<p>When I try <code>Ranking('First')</code> I get the following exception: <code>ValueError: 'First' is not a valid Ranking</code></p>\n\n<p>Is there any efficient way to get <code>Ranking.FIRST</code> from the string <code>'First'</code>?</p>\n"}, {"tags": ["python", "list", "replace"], "comments": [{"owner": {"reputation": 34248, "user_id": 269970, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Breov.jpg?s=128&g=1", "display_name": "esqew", "link": "https://stackoverflow.com/users/269970/esqew"}, "edited": false, "score": 2, "creation_date": 1539205211, "post_id": 52748686, "comment_id": 92421881, "body": "Why not just grab the text between the <code>&lt;h5&gt;&lt;&#47;h5&gt;</code> pairs during a scrape? Can you show us your relevant scrape code and what you&#39;ve tried so far to remove these?"}, {"owner": {"reputation": 221, "user_id": 9986139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3GfJY.jpg?s=128&g=1", "display_name": "Louie Lee", "link": "https://stackoverflow.com/users/9986139/louie-lee"}, "reply_to_user": {"reputation": 34248, "user_id": 269970, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Breov.jpg?s=128&g=1", "display_name": "esqew", "link": "https://stackoverflow.com/users/269970/esqew"}, "edited": false, "score": 0, "creation_date": 1539205377, "post_id": 52748686, "comment_id": 92421945, "body": "@esqew I said I tried that in the Ps and because it&#39;s a list, I cannot do that."}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "edited": false, "score": 2, "creation_date": 1539205415, "post_id": 52748686, "comment_id": 92421957, "body": "Are you using <code>BeautifulSoup</code>? The data posted looks like <code>BeautifulSoup</code> element objects. If so, to remove the tags, simply run <code>[[i.text for i in b] for b in data]</code>."}, {"owner": {"reputation": 34248, "user_id": 269970, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Breov.jpg?s=128&g=1", "display_name": "esqew", "link": "https://stackoverflow.com/users/269970/esqew"}, "edited": false, "score": 0, "creation_date": 1539205588, "post_id": 52748686, "comment_id": 92422019, "body": "@LouieLee I&#39;ll take your word for it, but not sure why the data being presented in a list format would prohibit you from extracting the inner text from a node."}, {"owner": {"reputation": 221, "user_id": 9986139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3GfJY.jpg?s=128&g=1", "display_name": "Louie Lee", "link": "https://stackoverflow.com/users/9986139/louie-lee"}, "reply_to_user": {"reputation": 34248, "user_id": 269970, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Breov.jpg?s=128&g=1", "display_name": "esqew", "link": "https://stackoverflow.com/users/269970/esqew"}, "edited": false, "score": 0, "creation_date": 1539210867, "post_id": 52748686, "comment_id": 92423697, "body": "@esqew one of the lines is locations_per_meal.append(main_content.find(&#39;h4&#39;,text=str(me&zwnj;&#8203;al_pick)).find_next_&zwnj;&#8203;siblings(&#39;h5&#39;).text) and I got the error &quot;ResultSet object has no attribute &#39;text&#39;. You&#39;re probably treating a list of items like a single item. Did you call find_all() when you meant to call find()?&quot;. The only way it works is that I remove that .text and get that list in the post."}], "answers": [{"comments": [{"owner": {"reputation": 221, "user_id": 9986139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3GfJY.jpg?s=128&g=1", "display_name": "Louie Lee", "link": "https://stackoverflow.com/users/9986139/louie-lee"}, "edited": false, "score": 0, "creation_date": 1539205643, "post_id": 52748735, "comment_id": 92422042, "body": "I got &quot;&#39;NoneType&#39; object is not callable&quot; but I checked that ele&#39;s type is bs4.element.Tag."}, {"owner": {"reputation": 361, "user_id": 8150822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f792f2ae77cc92ed283bba8a85465f?s=128&d=identicon&r=PG&f=1", "display_name": "Theodore Howell", "link": "https://stackoverflow.com/users/8150822/theodore-howell"}, "reply_to_user": {"reputation": 221, "user_id": 9986139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3GfJY.jpg?s=128&g=1", "display_name": "Louie Lee", "link": "https://stackoverflow.com/users/9986139/louie-lee"}, "edited": false, "score": 0, "creation_date": 1539205700, "post_id": 52748735, "comment_id": 92422065, "body": "I apologize, are the elements in the list not strings? the question doesnt have enough information"}, {"owner": {"reputation": 361, "user_id": 8150822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f792f2ae77cc92ed283bba8a85465f?s=128&d=identicon&r=PG&f=1", "display_name": "Theodore Howell", "link": "https://stackoverflow.com/users/8150822/theodore-howell"}, "reply_to_user": {"reputation": 221, "user_id": 9986139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3GfJY.jpg?s=128&g=1", "display_name": "Louie Lee", "link": "https://stackoverflow.com/users/9986139/louie-lee"}, "edited": false, "score": 0, "creation_date": 1539205835, "post_id": 52748735, "comment_id": 92422114, "body": "@LouieLee If you can elaborate on what the data type is of the elements in your sublist, or what library the object type is from I will gladly edit the answer to help out."}, {"owner": {"reputation": 221, "user_id": 9986139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3GfJY.jpg?s=128&g=1", "display_name": "Louie Lee", "link": "https://stackoverflow.com/users/9986139/louie-lee"}, "edited": false, "score": 0, "creation_date": 1539210733, "post_id": 52748735, "comment_id": 92423651, "body": "each sublist&#39;s type is bs4.element.ResultSet and every smallest item&#39;s type is bs4.element.Tag."}], "tags": [], "owner": {"reputation": 361, "user_id": 8150822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f792f2ae77cc92ed283bba8a85465f?s=128&d=identicon&r=PG&f=1", "display_name": "Theodore Howell", "link": "https://stackoverflow.com/users/8150822/theodore-howell"}, "is_accepted": false, "score": 0, "last_activity_date": 1539206019, "last_edit_date": 1539206019, "creation_date": 1539205332, "answer_id": 52748735, "question_id": 52748686, "link": "https://stackoverflow.com/questions/52748686/remove-characters-from-items-within-lists-that-are-inside-a-list/52748735#52748735", "title": "Remove characters from items within lists that are inside a list", "body": "<pre><code>for sublist in main_list:\n    for ele in sublist:\n        ele = ele.get_text()\n        ele.replace('&lt;h5&gt;', '')\n        ele.replace('&lt;/h5&gt;', '')\n</code></pre>\n\n<p>This will go through the main list and then iterate the sublists, then remove the unwanted h5 tags from the sublists. Hope this helps.</p>\n\n<p>Edit, since these are beautiful soup objects, you need to call the text method, there are a few ways to do this.</p>\n"}], "owner": {"reputation": 221, "user_id": 9986139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3GfJY.jpg?s=128&g=1", "display_name": "Louie Lee", "link": "https://stackoverflow.com/users/9986139/louie-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1539210918, "creation_date": 1539205116, "last_edit_date": 1539210918, "question_id": 52748686, "link": "https://stackoverflow.com/questions/52748686/remove-characters-from-items-within-lists-that-are-inside-a-list", "title": "Remove characters from items within lists that are inside a list", "body": "<p>I have a list looks like below. I got the list from scraping and I need to get rid of those <code>&lt;h5&gt;</code> &amp; <code>&lt;/h5&gt;</code>. Is there a way to do that or do it on the run during scraping? </p>\n\n<pre><code>[[&lt;h5&gt;Tomato Street Grill&lt;/h5&gt;, &lt;h5&gt;Go Live&lt;/h5&gt;, &lt;h5&gt;Bistro&lt;/h5&gt;, &lt;h5&gt;Fresh Inspirations&lt;/h5&gt;, &lt;h5&gt;Harvest Bakery&lt;/h5&gt;], [&lt;h5&gt;Tomato Street Grill&lt;/h5&gt;, &lt;h5&gt;Go Live&lt;/h5&gt;, &lt;h5&gt;Bistro&lt;/h5&gt;, &lt;h5&gt;Starch Bar&lt;/h5&gt;, &lt;h5&gt;Saucey&lt;/h5&gt;, &lt;h5&gt;Pacific Fusion&lt;/h5&gt;, &lt;h5&gt;Fresh Inspirations&lt;/h5&gt;, &lt;h5&gt;Harvest Bakery&lt;/h5&gt;], [&lt;h5&gt;Tomato Street Grill&lt;/h5&gt;, &lt;h5&gt;Bistro&lt;/h5&gt;, &lt;h5&gt;Go Live&lt;/h5&gt;, &lt;h5&gt;Saucey&lt;/h5&gt;, &lt;h5&gt;Pacific Fusion&lt;/h5&gt;, &lt;h5&gt;Fresh Inspirations&lt;/h5&gt;, &lt;h5&gt;Harvest Bakery&lt;/h5&gt;], [&lt;h5&gt;Tomato Street Grill&lt;/h5&gt;, &lt;h5&gt;Go Live&lt;/h5&gt;, &lt;h5&gt;Saucey&lt;/h5&gt;, &lt;h5&gt;Fresh Inspirations&lt;/h5&gt;, &lt;h5&gt;Harvest Bakery&lt;/h5&gt;]]\n</code></pre>\n\n<p>Ps: I tried to do something like <code>find_next_siblings('h5').text</code> and python what I got before the .text is a list so I cannot extract the text in that way. </p>\n\n<p>Pps: each sublist's type is bs4.element.ResultSet and every smallest item's type is bs4.element.Tag.</p>\n"}, {"tags": ["python", "json", "serialization"], "comments": [{"owner": {"reputation": 528, "user_id": 5446449, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-INdy0aXH9Bo/AAAAAAAAAAI/AAAAAAAAACA/hDTtkxDDtvM/photo.jpg?sz=128", "display_name": "James Russo", "link": "https://stackoverflow.com/users/5446449/james-russo"}, "edited": false, "score": 0, "creation_date": 1539204966, "post_id": 52748628, "comment_id": 92421776, "body": "I think it would be more helpful if you could also show us the serialization and deserialization code"}, {"owner": {"reputation": 283, "user_id": 3866107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000166929231/picture?type=large", "display_name": "Phillip McMullen", "link": "https://stackoverflow.com/users/3866107/phillip-mcmullen"}, "reply_to_user": {"reputation": 528, "user_id": 5446449, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-INdy0aXH9Bo/AAAAAAAAAAI/AAAAAAAAACA/hDTtkxDDtvM/photo.jpg?sz=128", "display_name": "James Russo", "link": "https://stackoverflow.com/users/5446449/james-russo"}, "edited": false, "score": 0, "creation_date": 1539205172, "post_id": 52748628, "comment_id": 92421867, "body": "@JamesRusso Done!"}], "owner": {"reputation": 283, "user_id": 3866107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000166929231/picture?type=large", "display_name": "Phillip McMullen", "link": "https://stackoverflow.com/users/3866107/phillip-mcmullen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539205158, "creation_date": 1539204814, "last_edit_date": 1539205158, "question_id": 52748628, "link": "https://stackoverflow.com/questions/52748628/jsonpickle-issues-python", "title": "JSONPickle Issues Python", "body": "<p>I have a few models that I deserialize to store in Redis using JSONPickle. I am having an issue where some of my enums are sporadically serializing. I get the following when I print the data stored in Redis. This is what is coming out of the jsonpickle serialization process:</p>\n\n<p>Working:</p>\n\n<pre><code>\"Error\": {\n    \"py/reduce\": [\n        {\n            \"py/type\": \"Enums.InputError\"\n        },\n        {\n            \"py/tuple\": [\n                -1\n            ]\n        },\n        null,\n        null,\n        null\n    ]\n}\n</code></pre>\n\n<p>Not Working:</p>\n\n<pre><code>\"Error\": \"&lt;InputError.NONE: -1&gt;\",\n</code></pre>\n\n<p>Is there a way to force jsonpickle to always serialize or something simliar? It looks like it's sometimes serializing to a string.</p>\n\n<p>Serialization Code:</p>\n\n<pre><code># value is a custom object\njsonpickle.encode(value, make_refs=False)     \n</code></pre>\n\n<p>Deserialization Code:</p>\n\n<pre><code># value is a jsonpickle encoded string (output from the serialization above)\njsonpickle.decode(value)\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 3, "creation_date": 1539204811, "post_id": 52748596, "comment_id": 92421702, "body": "What&#39;s going wrong with what you have?"}, {"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 2, "creation_date": 1539204861, "post_id": 52748596, "comment_id": 92421728, "body": "Hi Nicole, it seems like you have a fundamental misunderstanding of how functions work in python. None of your functions are returning values but you are trying to print variables defined inside of the functions. Perhaps you should dive a little deeper on functions <a href=\"https://anh.cs.luc.edu/python/hands-on/3.1/handsonHtml/functions.html\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 1, "creation_date": 1539205528, "post_id": 52748596, "comment_id": 92421996, "body": "You have Indentation Error. <a href=\"https://stackoverflow.com/posts/52748596/edit\">Edit</a> your Question and add the Errors you get."}], "answers": [{"tags": [], "owner": {"reputation": 4360, "user_id": 8324480, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/NJbWe.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/8324480/mathieu"}, "is_accepted": false, "score": 1, "last_activity_date": 1539204918, "creation_date": 1539204918, "answer_id": 52748647, "question_id": 52748596, "link": "https://stackoverflow.com/questions/52748596/how-to-get-python-functions-to-calculate-maths-operations/52748647#52748647", "title": "How to get Python functions to calculate maths operations?", "body": "<p>The question is not well explained + we don't really get what the boundaries are. Moreover, you should clearly state what is not working. Now, to give you some hint, this is how I would do it:</p>\n\n<pre><code>input = None\nL = list()\nwhile True:\n    try:\n        input = int(input('Type any positive integer, anything else to quit: '))\n        if input &lt; 0:\n            break\n        else:\n            L.append(input)\n    except:\n        break\n\nS = sum(L)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4360, "user_id": 8324480, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/NJbWe.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/8324480/mathieu"}, "edited": false, "score": 0, "creation_date": 1539207137, "post_id": 52748719, "comment_id": 92422551, "body": "The use of a try / except is quite useful to check if a user input is valid."}], "tags": [], "owner": {"reputation": 19, "user_id": 6020391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e4aba5f47a75216b1bf943d9922148f?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/6020391/vlad"}, "is_accepted": false, "score": 0, "last_activity_date": 1539205264, "creation_date": 1539205264, "answer_id": 52748719, "question_id": 52748596, "link": "https://stackoverflow.com/questions/52748596/how-to-get-python-functions-to-calculate-maths-operations/52748719#52748719", "title": "How to get Python functions to calculate maths operations?", "body": "<p>I think you don't need to use exceptions here. Condition statements would make it clearer.\nI would put the valid inputs in a list until the user make a invalid input. When it happens, just get out of your while loop using a break statement and return the result.</p>\n"}], "owner": {"reputation": 9, "user_id": 10486371, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155305413734930/picture?type=large", "display_name": "Nicole Harvey", "link": "https://stackoverflow.com/users/10486371/nicole-harvey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1539210423, "creation_date": 1539204636, "last_edit_date": 1539210423, "question_id": 52748596, "link": "https://stackoverflow.com/questions/52748596/how-to-get-python-functions-to-calculate-maths-operations", "title": "How to get Python functions to calculate maths operations?", "body": "<p>I have this assignment to create a program that asks user to input any positive integer repeatedly or type anything else to end and generate the sum, count and average of the numbers.  My teacher wants all the code in these this structure with these three def\u2019s only </p>\n\n<p>This is the code I have, any suggestions on how to get it to work?</p>\n\n<pre><code>def calcAverage(total,count):\n    sum = 0\n    count = 0\n    average = sum / count \n\ndef inputNumber(message):\n    while True:\n        try:\n            userInput = int(input(message))\n            count = count + 1\n            sum = sum + entry\n                if userInput &lt; 0:\n                   raise ValueError\n             except ValueError:\n                main()\n        else:\n          return userInput \n          break\n\nentry = inputNumber('Type any positive integer, anything else to quit')\n\ndef main():\n    print('Sum')\n    print(sum)\n    print('Average')\n    print(average)\n    print('Total Numbers')\n    print(count)\n</code></pre>\n"}, {"tags": ["java", "python", "scripting", "ignition"], "answers": [{"tags": [], "owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "is_accepted": false, "score": 1, "last_activity_date": 1539205495, "creation_date": 1539205495, "answer_id": 52748775, "question_id": 52748584, "link": "https://stackoverflow.com/questions/52748584/what-is-a-compoundcallable/52748775#52748775", "title": "What is a CompoundCallable?", "body": "<p>Looks like there is no code associated with the <code>mouseClicked</code> event of that object.</p>\n\n<p><code>CompoundCallable</code> is a \"composition of callables\", something callable that calls multiple callables - kind of a callable container. It is used to allow registering multiple functions to be called in a single event handler.</p>\n\n<p>However your <code>CompoundCallable</code> contains <em>zero</em> callables. That means nothing will be called if you call it.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 2816109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d80f79f60967b1801eafb8a137a2b01?s=128&d=identicon&r=PG&f=1", "display_name": "Valdo", "link": "https://stackoverflow.com/users/2816109/valdo"}, "is_accepted": false, "score": 0, "last_activity_date": 1541007221, "creation_date": 1541007221, "answer_id": 53089110, "question_id": 52748584, "link": "https://stackoverflow.com/questions/52748584/what-is-a-compoundcallable/53089110#53089110", "title": "What is a CompoundCallable?", "body": "<p>If I understand what you're asking, I don't believe you'll be able to access the data that is in that script (variables, etc.). You could have the mouseClicked script write data to something else in order to access data. There are multiple possibilities for that: Custom Window Property, Custom Component Property, or a tag. </p>\n"}], "owner": {"reputation": 21, "user_id": 6406010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ra09L.jpg?s=128&g=1", "display_name": "TheEngineEar", "link": "https://stackoverflow.com/users/6406010/theengineear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1541007221, "creation_date": 1539204582, "question_id": 52748584, "link": "https://stackoverflow.com/questions/52748584/what-is-a-compoundcallable", "title": "What is a CompoundCallable?", "body": "<p>I'm working with python scripts in Inductive Automation's Ignition HMI (java backend) software. I'm trying to write a script that locates other scripts that are tied to certain objects. Currently I have</p>\n\n<pre><code> result = window.getRootContainer().getComponent(\"Group 1\").getComponent(\"TheObject\").mouseClicked\n</code></pre>\n\n<p>which gets the window displaying my object, enters the root container of that object, then the group that the object is in and then finally the script tied to the mouseClicked event on TheObject. When I run this and print the result, I don't get an error, but: </p>\n\n<pre><code>&lt;CompoundCallable with 0 callables&gt;\n</code></pre>\n\n<p>Has anyone seen this before? Does anyone know what I may need to change in my first line of code to access the actual data stored in the mouseClicked script?</p>\n"}, {"tags": ["python", "pandas", "numpy", "vectorization"], "comments": [{"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1539205001, "post_id": 52748555, "comment_id": 92421793, "body": "Care to describe in words what you&#39;re trying to achieve?"}, {"owner": {"reputation": 169, "user_id": 8916162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63fd93797cef0644a00ebcb54385318e?s=128&d=identicon&r=PG&f=1", "display_name": "Yeison H. Arias", "link": "https://stackoverflow.com/users/8916162/yeison-h-arias"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1539205082, "post_id": 52748555, "comment_id": 92421823, "body": "I want to avoid the use of cycles, vectorize the code."}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1539205109, "post_id": 52748555, "comment_id": 92421838, "body": "I understand that, I mean can you explain what the <i>code</i> is trying to <i>do</i>."}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "reply_to_user": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1539205294, "post_id": 52748555, "comment_id": 92421918, "body": "@Parfait but he uses the result of the last iteration.  The results are <i>not</i> the same.  What you&#39;ve suggested will produce only the first two values correctly"}, {"owner": {"reputation": 169, "user_id": 8916162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63fd93797cef0644a00ebcb54385318e?s=128&d=identicon&r=PG&f=1", "display_name": "Yeison H. Arias", "link": "https://stackoverflow.com/users/8916162/yeison-h-arias"}, "edited": false, "score": 0, "creation_date": 1539205325, "post_id": 52748555, "comment_id": 92421925, "body": "Something similar to this: <code>df.result = np.where (df.colum1&gt; 1, 5 - (df [&#39;colum2&#39;] - df.result.shift (1) .cumsum ()), df.result)</code>      Since I&#39;m working with thousands of records, which is very slow"}, {"owner": {"reputation": 169, "user_id": 8916162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63fd93797cef0644a00ebcb54385318e?s=128&d=identicon&r=PG&f=1", "display_name": "Yeison H. Arias", "link": "https://stackoverflow.com/users/8916162/yeison-h-arias"}, "reply_to_user": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 2, "creation_date": 1539205359, "post_id": 52748555, "comment_id": 92421937, "body": "@Parfait, The results are not the same"}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1539205637, "post_id": 52748555, "comment_id": 92422038, "body": "@user3483203 ... I literally copied OP&#39;s post without change and ran above line resulting in <code>df[&#39;result&#39;] == df[&#39;result2&#39;]</code> in all rows."}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1539205665, "post_id": 52748555, "comment_id": 92422048, "body": "Unfortunately, that&#39;s because you already have the result of <code>df.result</code> in your dataframe (which is used in the <code>np.where</code>.  Your code does not work, you are simply copying over the given output"}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 8916162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63fd93797cef0644a00ebcb54385318e?s=128&d=identicon&r=PG&f=1", "display_name": "Yeison H. Arias", "link": "https://stackoverflow.com/users/8916162/yeison-h-arias"}, "edited": false, "score": 0, "creation_date": 1539205929, "post_id": 52748791, "comment_id": 92422147, "body": "Perfect, could you help me with this: <a href=\"https://stackoverflow.com/questions/52730328/optimization-of-the-python-code-using-numpy-and-pandas\">link</a>, thanks!"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "reply_to_user": {"reputation": 169, "user_id": 8916162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63fd93797cef0644a00ebcb54385318e?s=128&d=identicon&r=PG&f=1", "display_name": "Yeison H. Arias", "link": "https://stackoverflow.com/users/8916162/yeison-h-arias"}, "edited": false, "score": 0, "creation_date": 1539206680, "post_id": 52748791, "comment_id": 92422400, "body": "@YeisonH.Arias what exactly do you need help with, it looks like you already have an answer that vectorizes the operation"}, {"owner": {"reputation": 169, "user_id": 8916162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63fd93797cef0644a00ebcb54385318e?s=128&d=identicon&r=PG&f=1", "display_name": "Yeison H. Arias", "link": "https://stackoverflow.com/users/8916162/yeison-h-arias"}, "edited": false, "score": 0, "creation_date": 1539206877, "post_id": 52748791, "comment_id": 92422466, "body": "for the question: <a href=\"https://stackoverflow.com/questions/52730328/optimization-of-the-python-code-using-numpy-and-pandas\">link</a> the answer given does not work, the result is erroneous  :/"}, {"owner": {"reputation": 169, "user_id": 8916162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63fd93797cef0644a00ebcb54385318e?s=128&d=identicon&r=PG&f=1", "display_name": "Yeison H. Arias", "link": "https://stackoverflow.com/users/8916162/yeison-h-arias"}, "edited": false, "score": 0, "creation_date": 1539210652, "post_id": 52748791, "comment_id": 92423629, "body": "I appreciate you if you can help me with <a href=\"https://stackoverflow.com/questions/52730328/optimization-of-the-python-code-using-numpy-and-pandas\">link</a>, I have already updated the desired result, thanks!"}], "tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": true, "score": 3, "last_activity_date": 1539206594, "last_edit_date": 1539206594, "creation_date": 1539205593, "answer_id": 52748791, "question_id": 52748555, "link": "https://stackoverflow.com/questions/52748555/vectorization-of-loops-in-python/52748791#52748791", "title": "Vectorization of loops in python", "body": "<p>Your operation is dependent on two things, the previous row in the DataFrame, and the difference between consecutive values in the DataFrame.  That hints that the solution will require <code>shift</code> and <code>diff</code>.  However, you want to add a small constant to the expanding sum, as well as actually subtract this from each row, not add it.</p>\n\n<hr>\n\n<p>To set the pieces of the problem up, first create your shifted series, where you add <code>5</code>:</p>\n\n<pre><code>a = df.colum2.shift().add(5).cumsum().fillna(0)\n</code></pre>\n\n<p>Now you need the difference between elements in the Series, and fill missing results with their respective value in <code>colum2</code>:</p>\n\n<pre><code>b = df.colum2.diff().fillna(df.colum2)\n</code></pre>\n\n<p>To get your final result, simply subtract <code>a</code> from <code>b</code>:</p>\n\n<pre><code>b - a\n</code></pre>\n\n<p></p>\n\n<pre><code>0      10.0\n1      -5.0\n2     -30.0\n3     -65.0\n4    -110.0\n5    -165.0\n6    -230.0\n7    -305.0\n8    -390.0\n9    -485.0\n10   -590.0\n11   -705.0\nName: colum2, dtype: float64\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 8916162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63fd93797cef0644a00ebcb54385318e?s=128&d=identicon&r=PG&f=1", "display_name": "Yeison H. Arias", "link": "https://stackoverflow.com/users/8916162/yeison-h-arias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 52748791, "answer_count": 1, "score": 2, "last_activity_date": 1539206594, "creation_date": 1539204435, "last_edit_date": 1539206017, "question_id": 52748555, "link": "https://stackoverflow.com/questions/52748555/vectorization-of-loops-in-python", "title": "Vectorization of loops in python", "body": "<p>I have the following code in Python:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\ncolum1 = [1,2,3,4,5,6,7,8,9,10,11,12]\ncolum2 = [10,20,30,40,50,60,70,80,90,100,110,120]\n\ndf = pd.DataFrame({\n    'colum1' : colum1,\n    'colum2' : colum2\n});\n\ndf.loc[df.colum1 == 1,'result'] = df['colum2']\n\nfor i in range(len(colum2)):\n    df.result = np.where(df.colum1&gt;1, 5 - (df['colum2'] - df.result.shift(1)), df.result)\n</code></pre>\n\n<p>the result of df.result is:</p>\n\n<pre>\n    colum1  colum2  result\n0        1      10    10.0\n1        2      20    -5.0\n2        3      30   -30.0\n3        4      40   -65.0\n4        5      50  -110.0\n5        6      60  -165.0\n6        7      70  -230.0\n7        8      80  -305.0\n8        9      90  -390.0\n9       10     100  -485.0\n10      11     110  -590.0\n11      12     120  -705.0\n</pre>\n\n<p>I would like to know if there is a method that allows me to obtain the same result without using a cycle for</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1539204600, "post_id": 52748554, "comment_id": 92421611, "body": "If <code>x</code> is afile and you want to read the contents, you&#39;ll want something like <code>x.read()</code> or <code>x.readlines()</code>"}, {"owner": {"reputation": 17, "user_id": 9609454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ca25d9ea511bc356e51b8bb5c4e6021?s=128&d=identicon&r=PG&f=1", "display_name": "Frankicks", "link": "https://stackoverflow.com/users/9609454/frankicks"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1539205345, "post_id": 52748554, "comment_id": 92421933, "body": "Thanks @WilliamPursell. Tried readlines() before but it wouldn&#39;t work. Now it gives me strange error: Traceback (most recent call last):       x.readlines()   File &quot;path\\Desktop\\Python\\Python 3.7\\lib\\encodings\\cp1252.py&quot;, line 23, in decode     return codecs.charmap_decode(input,self.errors,decoding_table)[0] UnicodeDecodeError: &#39;charmap&#39; codec can&#39;t decode byte 0x8d in position 77: character maps to &lt;undefined&gt;"}, {"owner": {"reputation": 1142, "user_id": 10254804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QCdtJ.png?s=128&g=1", "display_name": "deadvoid", "link": "https://stackoverflow.com/users/10254804/deadvoid"}, "edited": false, "score": 0, "creation_date": 1539207477, "post_id": 52748554, "comment_id": 92422683, "body": "use <code>with open(bestand, mode=&#39;utf-8&#39;) as x:</code> instead, as a general rule, utf-8 &gt; default windows encoding (cp1252)"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 9609454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ca25d9ea511bc356e51b8bb5c4e6021?s=128&d=identicon&r=PG&f=1", "display_name": "Frankicks", "link": "https://stackoverflow.com/users/9609454/frankicks"}, "edited": false, "score": 0, "creation_date": 1539257970, "post_id": 52748850, "comment_id": 92441305, "body": "Thanks that worked. I&#39;m stuck on a different issue now. I need to put all the colomn names as keys and the data as their values. I&#39;ve edited the original post"}, {"owner": {"reputation": 21, "user_id": 9926716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97feb1d58fa1dbe0dcab07db97767ed6?s=128&d=identicon&r=PG&f=1", "display_name": "Roshani", "link": "https://stackoverflow.com/users/9926716/roshani"}, "reply_to_user": {"reputation": 17, "user_id": 9609454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ca25d9ea511bc356e51b8bb5c4e6021?s=128&d=identicon&r=PG&f=1", "display_name": "Frankicks", "link": "https://stackoverflow.com/users/9609454/frankicks"}, "edited": false, "score": 0, "creation_date": 1539269713, "post_id": 52748850, "comment_id": 92449299, "body": "Can you share more information on the type of text data that we are dealing with here? Which columns and data are you talking of?"}, {"owner": {"reputation": 17, "user_id": 9609454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ca25d9ea511bc356e51b8bb5c4e6021?s=128&d=identicon&r=PG&f=1", "display_name": "Frankicks", "link": "https://stackoverflow.com/users/9609454/frankicks"}, "edited": false, "score": 0, "creation_date": 1539608803, "post_id": 52748850, "comment_id": 92552233, "body": "Hi Roshani. Data like this: <a href=\"http://prntscr.com/l6avz3\" rel=\"nofollow noreferrer\">prntscr.com/l6avz3</a> - Every data file is different except for the timestamp. So different headers / data. I&#39;m trying to compare these files based on their headers and data to see if I can find similarities"}, {"owner": {"reputation": 21, "user_id": 9926716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97feb1d58fa1dbe0dcab07db97767ed6?s=128&d=identicon&r=PG&f=1", "display_name": "Roshani", "link": "https://stackoverflow.com/users/9926716/roshani"}, "reply_to_user": {"reputation": 17, "user_id": 9609454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ca25d9ea511bc356e51b8bb5c4e6021?s=128&d=identicon&r=PG&f=1", "display_name": "Frankicks", "link": "https://stackoverflow.com/users/9609454/frankicks"}, "edited": false, "score": 0, "creation_date": 1539629212, "post_id": 52748850, "comment_id": 92562997, "body": "@Frankicks So once you have each comma separated text file as string element in the list, store it to dataframe and you may want to use to_dict method of pandas to convert dataframe to dictionary with header names as keys."}, {"owner": {"reputation": 17, "user_id": 9609454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ca25d9ea511bc356e51b8bb5c4e6021?s=128&d=identicon&r=PG&f=1", "display_name": "Frankicks", "link": "https://stackoverflow.com/users/9609454/frankicks"}, "edited": false, "score": 0, "creation_date": 1539694063, "post_id": 52748850, "comment_id": 92587680, "body": "How would I put my text files list in a dataframe?"}], "tags": [], "owner": {"reputation": 21, "user_id": 9926716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97feb1d58fa1dbe0dcab07db97767ed6?s=128&d=identicon&r=PG&f=1", "display_name": "Roshani", "link": "https://stackoverflow.com/users/9926716/roshani"}, "is_accepted": false, "score": 1, "last_activity_date": 1539205878, "creation_date": 1539205878, "answer_id": 52748850, "question_id": 52748554, "link": "https://stackoverflow.com/questions/52748554/opening-multiple-text-files-from-a-location/52748850#52748850", "title": "Opening multiple text files from a location", "body": "<p>You need to read after you open the file. The open method opens the file and returns a TextIOWrapper object but does not read the files content.</p>\n\n<p>I am editing your code that gives a list of texts in these files:</p>\n\n<pre><code>from os import listdir, chdir, getcwd\npath = (r'...\\Text')\nchdir(path)\nfiles = [f for f in listdir(path)]\nactive = []\n\nfor bestand in files:\n    with open(bestand) as x:\n        active.append(x.read())\n\nprint(active)\n</code></pre>\n\n<p>The read method in append call does the work. Cheers!</p>\n"}], "owner": {"reputation": 17, "user_id": 9609454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ca25d9ea511bc356e51b8bb5c4e6021?s=128&d=identicon&r=PG&f=1", "display_name": "Frankicks", "link": "https://stackoverflow.com/users/9609454/frankicks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1539258182, "creation_date": 1539204424, "last_edit_date": 1539258182, "question_id": 52748554, "link": "https://stackoverflow.com/questions/52748554/opening-multiple-text-files-from-a-location", "title": "Opening multiple text files from a location", "body": "<p>I'm trying to open 583 text files from a location. I need to find similarities between these files so I can join them in a database. My thinking was that Python would be suited for this, but I'm not even able to open the files.. </p>\n\n<pre><code>    from os import listdir, chdir, getcwd\n    path = (r'...\\Text')\n    chdir(path)\n    files = [f for f in listdir(path)]\n    active = []\n\n    for bestand in files:\n        with open(bestand) as x:\n            active.append(x)\n\n    print(active)\n</code></pre>\n\n<p>The result I'm getting is some file names with a mode and encoding. Here is a example: </p>\n\n<pre><code>     &lt;_io.TextIOWrapper name='To-do.txt' mode='r' encoding='cp1252'&gt;\n</code></pre>\n\n<p>Would like to hear if it's possible what I want to achieve. I appreciated a push in the right direction instead of a fully working code.</p>\n\n<p>Thanks!</p>\n\n<p>Edit: New problem I'm facing. I want all the column names as keys in a dictionary and the data as the values. Current code give me the error: AttributeError: 'list' object has no attribute 'items'</p>\n\n<pre><code>from os import listdir, chdir, getcwd\nfrom os.path import isfile, join\npath = (r'...\\Text')\nchdir(path)\nfiles = [f for f in listdir(path)]\nactive = []\nvalues = {}\n\nfor bestand in files:\n    if bestand.lower().endswith(('.txt')):\n        with open(bestand) as x:\n            active.append(x.read())\n\nfor line in active:\n    if ',' not in line:\n        continue\n\n    #print(\"LINE: \", line)\n    for key, value in line.strip().split(',', 1).items():\n        values[key] = value\nprint(values)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1539204393, "post_id": 52748518, "comment_id": 92421535, "body": "Are you expecting your program to print something? Try using <code>print</code>."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1539204429, "post_id": 52748518, "comment_id": 92421548, "body": "You called <code>square(3.0)</code> but didn&#39;t save the return value or print it."}, {"owner": {"reputation": 1522, "user_id": 5759234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rb4Ai.jpg?s=128&g=1", "display_name": "haxtar", "link": "https://stackoverflow.com/users/5759234/haxtar"}, "edited": false, "score": 0, "creation_date": 1539204564, "post_id": 52748518, "comment_id": 92421597, "body": "Yes, as the above commenters have pointed out, it looks like you are only calling square(3.0), which does not print the result. Try modifying it to <code>print(square(3.0))</code>. You can also run this as <code>.&#47;temp.py</code> from a terminal."}, {"owner": {"reputation": 1662, "user_id": 10292170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0JUrO.jpg?s=128&g=1", "display_name": "ipramusinto", "link": "https://stackoverflow.com/users/10292170/ipramusinto"}, "edited": false, "score": 0, "creation_date": 1539204624, "post_id": 52748518, "comment_id": 92421625, "body": "<code>print(square(3.0))</code>"}], "answers": [{"tags": [], "owner": {"reputation": 832, "user_id": 10321210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6440f6207ef22d725e12b1fb77e5d96d?s=128&d=identicon&r=PG&f=1", "display_name": "jxpython", "link": "https://stackoverflow.com/users/10321210/jxpython"}, "is_accepted": false, "score": 2, "last_activity_date": 1539213656, "last_edit_date": 1539213656, "creation_date": 1539204825, "answer_id": 52748629, "question_id": 52748518, "link": "https://stackoverflow.com/questions/52748518/defining-this-function-returns-absolutely-nothing-back/52748629#52748629", "title": "Defining this function returns absolutely nothing back:", "body": "<p>Method 1:</p>\n\n<pre><code>def square(x):\n    print(x*x)\n\nsquare(3.0)\n</code></pre>\n\n<p>Method 2:</p>\n\n<pre><code>def square(x):\n    return x*x\n\nprint(square(3.0))\n</code></pre>\n\n<p>Method 3:</p>\n\n<pre><code>def square(x):\n    return x*x\n\nsq = square(3.0)\nprint(sq)\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 10486385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace78297a7a89aead9883c7a13cd8e9d?s=128&d=identicon&r=PG&f=1", "display_name": "Taran Basi", "link": "https://stackoverflow.com/users/10486385/taran-basi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1539213656, "creation_date": 1539204295, "last_edit_date": 1539204411, "question_id": 52748518, "link": "https://stackoverflow.com/questions/52748518/defining-this-function-returns-absolutely-nothing-back", "title": "Defining this function returns absolutely nothing back:", "body": "<p>What am I doing wrong with this code, it's not returning anything back at all and is just blank.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def square(x):\n    return x*x\n\nsquare(3.0)\n\nrunfile('C:/Users/taran/.spyder-py3/temp.py', wdir='C:/Users/taran/.spyder-py3'):\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "edited": false, "score": 3, "creation_date": 1539204153, "post_id": 52748473, "comment_id": 92421424, "body": "Did something go wrong with the program you wrote to do this which we could help you with?  Please post your code and describe what&#39;s wrong with it."}, {"owner": {"reputation": 2588, "user_id": 3476918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PJURd.png?s=128&g=1", "display_name": "OldGeeksGuide", "link": "https://stackoverflow.com/users/3476918/oldgeeksguide"}, "edited": false, "score": 0, "creation_date": 1539204370, "post_id": 52748473, "comment_id": 92421530, "body": "Roughly speaking, you should select all the rows that are in both files, then concatenate the columns together.  Pandas would be very helpful here."}, {"owner": {"reputation": 11958, "user_id": 16361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5781164bd15fcc344b9c2a57fa7e02a?s=128&d=identicon&r=PG", "display_name": "AdamKG", "link": "https://stackoverflow.com/users/16361/adamkg"}, "edited": false, "score": 0, "creation_date": 1539204383, "post_id": 52748473, "comment_id": 92421533, "body": "note that the <code>join text2.txt text1.txt</code> shell command does exactly what you want, though it requires the input files be sorted"}], "answers": [{"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": true, "score": 2, "last_activity_date": 1539204993, "creation_date": 1539204993, "answer_id": 52748661, "question_id": 52748473, "link": "https://stackoverflow.com/questions/52748473/combine-two-text-files-only-for-common-values-of-a-certain-column/52748661#52748661", "title": "Combine two text files only for common values of a certain column", "body": "<p>You can create two dictionaries from each input source to use to check for common names:</p>\n\n<pre><code>d1 = (lambda x:{a:b for a, *b in x})([i.strip('\\n').split() for i in open('file1.txt')])\nd2 = (lambda x:{a:b for a, *b in x})([i.strip('\\n').split() for i in open('file2.txt')])\nwith open('file3.txt', 'w') as f:\n  for a, b in d1.items():\n     if a in d2:\n        f.write(f\"{a} {' '.join(d2[a]+b)}\\n\")\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>maria 150 0.91 30\nmartin 200 0.76 45 0.078\nandres 350 0.67 47\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 8766822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bf72f9cd3d5d5e6755207e7af5bd7a3?s=128&d=identicon&r=PG&f=1", "display_name": "user140259", "link": "https://stackoverflow.com/users/8766822/user140259"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 52748661, "answer_count": 1, "score": 0, "last_activity_date": 1539204993, "creation_date": 1539204054, "question_id": 52748473, "link": "https://stackoverflow.com/questions/52748473/combine-two-text-files-only-for-common-values-of-a-certain-column", "title": "Combine two text files only for common values of a certain column", "body": "<p>I have two text files:</p>\n\n<p>text1.txt:</p>\n\n<pre><code>jose     50    0.037\nmaria    30    \nfernando 20    0.489\nmartin   45    0.078\nandres   47    \n</code></pre>\n\n<p>text2.txt:</p>\n\n<pre><code>maria    150    0.91\nmartin   200    0.76\nandres   350    0.67\n</code></pre>\n\n<p>I would like to reproduce this one:</p>\n\n<pre><code>maria    150    0.91    30    \nmartin   200    0.76    45    0.078\nandres   350    0.67    47\n</code></pre>\n\n<p>that is to say, a combined file containing only values from common elements in the first column. Thanks.</p>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1539204303, "post_id": 52748464, "comment_id": 92421500, "body": "shouldn&#39;t cumsum at 2018-08 be 3k? also it&#39;s prev*(1+ growth) not prev*growth, no?"}, {"owner": {"reputation": 1022, "user_id": 4967460, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f5bb310b6277f2f566b62a32c8acf8d8?s=128&d=identicon&r=PG&f=1", "display_name": "swifty", "link": "https://stackoverflow.com/users/4967460/swifty"}, "reply_to_user": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1539204775, "post_id": 52748464, "comment_id": 92421684, "body": "Yes to #1 - and #2 technically true, but I was assuming we added 1 already"}, {"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1539357388, "post_id": 52748464, "comment_id": 92486329, "body": "did the answers work for you?"}], "answers": [{"tags": [], "owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "is_accepted": false, "score": -1, "last_activity_date": 1539206965, "last_edit_date": 1539206965, "creation_date": 1539205046, "answer_id": 52748674, "question_id": 52748464, "link": "https://stackoverflow.com/questions/52748464/python-pandas-cumulative-sum-with-interest/52748674#52748674", "title": "Python/Pandas - Cumulative Sum with Interest", "body": "<p>assuming growth constant:</p>\n\n<pre><code>growth = 0.05/12\ndf['aux'] = df['Payment']*(1+growth)\ndf.loc[0,'aux'] = df.loc[0,'Payment']\ndf['cumsum'] = df['aux'].cumsum()\ndf = df.drop('aux', axis = 1)\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>    Month  Payment       cumsum\n0  2018-01     1000  1000.000000\n1  2018-02     2000  3008.333333\n2  2018-03      500  3510.416667\n3  2018-04     1000  4514.583333\n4  2018-05        0  4514.583333\n5  2018-06        0  4514.583333\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22688, "user_id": 3760920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aCfir.jpg?s=128&g=1", "display_name": "jeremycg", "link": "https://stackoverflow.com/users/3760920/jeremycg"}, "is_accepted": false, "score": 0, "last_activity_date": 1539206295, "creation_date": 1539206295, "answer_id": 52748921, "question_id": 52748464, "link": "https://stackoverflow.com/questions/52748464/python-pandas-cumulative-sum-with-interest/52748921#52748921", "title": "Python/Pandas - Cumulative Sum with Interest", "body": "<p>Here's a quick try:</p>\n\n<pre><code>def interest(data, rate):\n    #turn yearly to monthly rate\n    monthly = rate/12.0\n    #hole output\n    out = np.zeros_like(data, dtype = float)\n    #initial deposit\n    out[0] = data[0]\n    for i in range(1, len(data)):\n        #t+1 = t*(1+monthly) + deposit\n        out[i] = out[i - 1]*(1+monthly)+ data[i]\n    return out\n</code></pre>\n\n<p>It should work as expected:</p>\n\n<pre><code>x = pd.DataFrame({'amount':[1000,2000,500, 1000,0,0]})\ninterest(x.amount, 0.05)\n\narray([1000.        , 3004.16666667, 3516.68402778, 4531.33687789,\n       4550.21744822, 4569.17668759])\n</code></pre>\n"}], "owner": {"reputation": 1022, "user_id": 4967460, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f5bb310b6277f2f566b62a32c8acf8d8?s=128&d=identicon&r=PG&f=1", "display_name": "swifty", "link": "https://stackoverflow.com/users/4967460/swifty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 246, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1539206965, "creation_date": 1539204013, "last_edit_date": 1539205034, "question_id": 52748464, "link": "https://stackoverflow.com/questions/52748464/python-pandas-cumulative-sum-with-interest", "title": "Python/Pandas - Cumulative Sum with Interest", "body": "<p>Attempting to do some forecasting in pandas. I have a revenue schedule of monthly payments coming in and want to do a cumulative sum of the total - this I can esily do with <code>.cumsum()</code>. <strong>However I would like to add a 5%pa Interest/Growth factor.</strong></p>\n\n<p>Example df:</p>\n\n<pre><code>Month   Payment\n2018-01  1000\n2018-02  2000\n2018-03   500\n2018-04  1000\n2018-05     0\n2018-06     0\n</code></pre>\n\n<p>I'd like to output:</p>\n\n<pre><code>Month   Payment CumSum with Growth\n2018-01  1000    1000\n2018-02  2000    3005 (previous cumsum) * growth + 2000\n2018-03   500    3510 (previous cumsum) * growth + 500\n2018-04  1000    4510 (previous cumsum) * growth + 1000\n2018-05     0    4515\n2018-06     0    4520\n</code></pre>\n\n<ul>\n<li>Happy to do this outside of pandas and convert back if necessary.</li>\n<li>The df is SMALL - speed is very much secondary concern here. Opens up raw for loop solutions perhaps?</li>\n</ul>\n"}, {"tags": ["python", "scikit-learn", "feature-extraction"], "answers": [{"comments": [{"owner": {"reputation": 1872, "user_id": 6224975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d1ad2feebcd50e3040acca9ce83c133?s=128&d=identicon&r=PG&f=1", "display_name": "CutePoison", "link": "https://stackoverflow.com/users/6224975/cutepoison"}, "edited": false, "score": 1, "creation_date": 1539260583, "post_id": 52748588, "comment_id": 92442958, "body": "That is what I&#39;m looking for! I&#39;ve searched the documentation and alot of examples and I have no idea how I missed that. Thank you! :D"}], "tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": true, "score": 3, "last_activity_date": 1539204605, "creation_date": 1539204605, "answer_id": 52748588, "question_id": 52748426, "link": "https://stackoverflow.com/questions/52748426/from-featurers-to-words-python-reverse-bag-of-words/52748588#52748588", "title": "From featurers to words python (&quot;reverse&quot; bag of words)", "body": "<p>I'm not totally sure what you're going for, but it seems like you're just trying to figure out which column represents which word. For this, there is the handy <code>get_feature_names</code> argument. </p>\n\n<p>Let's take a look with the example corpus provided in the <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.CountVectorizer.html#sklearn.feature_extraction.text.CountVectorizer.inverse_transform\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<pre><code>corpus = [\n     'This is the first document.',\n     'This document is the second document.',\n     'And this is the third one.',\n     'Is this the first document?' ]\n\n# Put into a dataframe\ndata = pd.DataFrame(corpus,columns=['description'])\n# Take a look:\n&gt;&gt;&gt; data\n                             description\n0            This is the first document.\n1  This document is the second document.\n2             And this is the third one.\n3            Is this the first document?\n\n# Initialize CountVectorizer (you can put in your arguments, but for the sake of example, I'm keeping it simple):\nvec = CountVectorizer()\n\n# Fit it as you had before:\nfeatures = vec.fit_transform(data.loc[:,\"description\"]).todense()\n\n&gt;&gt;&gt; features\nmatrix([[0, 1, 1, 1, 0, 0, 1, 0, 1],\n        [0, 2, 0, 1, 0, 1, 1, 0, 1],\n        [1, 0, 0, 1, 1, 0, 1, 1, 1],\n        [0, 1, 1, 1, 0, 0, 1, 0, 1]], dtype=int64)\n</code></pre>\n\n<p>To see what column represents which word use <code>get_feature_names</code>:</p>\n\n<pre><code>&gt;&gt;&gt; vec.get_feature_names()\n['and', 'document', 'first', 'is', 'one', 'second', 'the', 'third', 'this']\n</code></pre>\n\n<p>So your first column is <code>and</code>, second is <code>document</code>, and so on. For readability, you can stick this in a dataframe:</p>\n\n<pre><code>&gt;&gt;&gt; pd.DataFrame(features, columns = vec.get_feature_names())\n   and  document  first  is  one  second  the  third  this\n0    0         1      1   1    0       0    1      0     1\n1    0         2      0   1    0       1    1      0     1\n2    1         0      0   1    1       0    1      1     1\n3    0         1      1   1    0       0    1      0     1\n</code></pre>\n"}], "owner": {"reputation": 1872, "user_id": 6224975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d1ad2feebcd50e3040acca9ce83c133?s=128&d=identicon&r=PG&f=1", "display_name": "CutePoison", "link": "https://stackoverflow.com/users/6224975/cutepoison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 533, "favorite_count": 0, "accepted_answer_id": 52748588, "answer_count": 1, "score": 3, "last_activity_date": 1539204634, "creation_date": 1539203852, "last_edit_date": 1539204634, "question_id": 52748426, "link": "https://stackoverflow.com/questions/52748426/from-featurers-to-words-python-reverse-bag-of-words", "title": "From featurers to words python (&quot;reverse&quot; bag of words)", "body": "<p>Using sklearn I've created a BOW with 200 features in Python, which are easily extracted. But, how can I reverse it? That is, go from a vector with 200 0's or 1's to the corresponding words? Since the vocabulary is a dictionary, thus not ordered, I am not sure which word each element in the feature list corresponds to. Also, if the first element in my 200 dimensional vector corresponds to the first word in the dictionary, how do I then extract a word from the dictionary via index?</p>\n\n<p>The BOW is created this way</p>\n\n<pre><code>vec = CountVectorizer(stop_words = sw, strip_accents=\"unicode\", analyzer = \"word\", max_features = 200)\nfeatures = vec.fit_transform(data.loc[:,\"description\"]).todense()\n</code></pre>\n\n<p>thus \"features\" is a matrix (n,200) matrix (n being the number of sentence).</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 0, "creation_date": 1539204306, "post_id": 52748415, "comment_id": 92421502, "body": "Are you sure the two QuerySets from the individual queries contain the same <code>File</code> object?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1539204562, "post_id": 52748415, "comment_id": 92421596, "body": "That is logical since you query a <i>related</i> object. But Django will, if you query related objects with several queries, filter the <i>same</i> related object."}, {"owner": {"reputation": 13, "user_id": 10486312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94c2687919e2c7fcd164196cf13c20b6?s=128&d=identicon&r=PG&f=1", "display_name": "Kel", "link": "https://stackoverflow.com/users/10486312/kel"}, "edited": false, "score": 0, "creation_date": 1539204697, "post_id": 52748415, "comment_id": 92421657, "body": "class File(models.Model):     name = models.CharField(max_length=50)     date_created = models.DateField(blank=True, null=True)  class RelatedJira(models.Model):     content = models.CharField(max_length=20, blank=True, null=True)     file = models.ForeignKey(File, on_delete=models.CASCADE)"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 0, "creation_date": 1539205006, "post_id": 52748415, "comment_id": 92421795, "body": "@schwobaseggl: this is the effect of having multiple constraints of an existentially quantified condition."}], "answers": [{"tags": [], "owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "is_accepted": true, "score": 1, "last_activity_date": 1539204779, "creation_date": 1539204779, "answer_id": 52748618, "question_id": 52748415, "link": "https://stackoverflow.com/questions/52748415/q-object-django-returns-empty-queryset-when-and-together/52748618#52748618", "title": "Q object django returns empty QuerySet when AND together", "body": "<p>For the combined query, it will only return files that have a single <code>relatedjira</code> where the content contains both <code>'1112'</code> and <code>'5368'</code>.</p>\n\n<p>If you put the <code>Q</code> objects in separate filters, then it will return files that have a <code>relatedjira</code> where the content contains <code>'1112'</code> and another <code>relatedjira</code> where the content contains <code>'5368'</code></p>\n\n<pre><code>File.objects.filter(Q(relatedjira__content__icontains='1112')).filter(Q(relatedjira__content__icontains='5368'))\n&lt;QuerySet [&lt;File: abc.txt&gt;]&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 0, "creation_date": 1539234404, "post_id": 52748652, "comment_id": 92428864, "body": "In both your Alasdair&#39;s answers, I notice the lack of links to documentation and at least a quick search through the django docs did&#39;t reveal anything either. Is this behaviour unique for <code>Q</code> objects. Or would it be the same for <code>filter(relj__content=&#39;1112&#39;).filter(relj__content=&#39;5368&#39;)</code> vs <code>filter(relj__content=&#39;1112&#39;, relj__content=&#39;5368&#39;)</code>? Also, if the two filter kwargs go along <i>multiple</i> relations, will the existential scope go all the way to the last common one?"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 1, "last_activity_date": 1539204959, "creation_date": 1539204959, "answer_id": 52748652, "question_id": 52748415, "link": "https://stackoverflow.com/questions/52748415/q-object-django-returns-empty-queryset-when-and-together/52748652#52748652", "title": "Q object django returns empty QuerySet when AND together", "body": "<p>This is logical. If you query for <em>related</em> objects, Django's filter mechanism is existential: so if one <code>relatedjira</code> has this content, that is enough.</p>\n\n<p>If you however perform multiple filters with the relation, these all have effect on the <em>same</em> related object. It is possible that for a given <code>File</code>, there are two <code>RelatedJira</code>s, one with <code>1112</code>, and one with <code>5368</code>, but if you query with the two, then this does not yield an element, since the two <code>RelatedJira</code>s are different ones.</p>\n\n<p>For example:</p>\n\n<pre><code>+---------------+      +-------+      +---------------+\n| RelatedJura   |  -&gt;  | File1 |  &lt;-  | RelatedJira   |\n+---------------+      +-------+      +---------------+\n| content: 5368 |                     | content: 1112 |\n+---------------+                     +---------------+\n</code></pre>\n\n<p>Your first query reads:</p>\n\n<blockquote>\n  <p>Give me the <code>File</code>s for which there is a related jira where the content contains <code>1112</code>.</p>\n</blockquote>\n\n<p>And this succeeds.</p>\n\n<p>The second query reads:</p>\n\n<blockquote>\n  <p>Give me the <code>File</code>s for which there is a related jira where the content contains <code>5368</code>.</p>\n</blockquote>\n\n<p>And this succeeds.</p>\n\n<p>but the last query is:</p>\n\n<blockquote>\n  <p>Give me the <code>File</code>s for which there is a related jira where the content contains <code>1112</code> and <code>5368</code>.</p>\n</blockquote>\n\n<p>and this fails, since there is no such <code>RelatedJira</code> that contains <em>both</em> substrings.</p>\n"}], "owner": {"reputation": 13, "user_id": 10486312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94c2687919e2c7fcd164196cf13c20b6?s=128&d=identicon&r=PG&f=1", "display_name": "Kel", "link": "https://stackoverflow.com/users/10486312/kel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 394, "favorite_count": 0, "accepted_answer_id": 52748618, "answer_count": 2, "score": 1, "last_activity_date": 1539204959, "creation_date": 1539203791, "question_id": 52748415, "link": "https://stackoverflow.com/questions/52748415/q-object-django-returns-empty-queryset-when-and-together", "title": "Q object django returns empty QuerySet when AND together", "body": "<p>In the django shell, when I filter individual Q object, it returns correct QuerySet. But when the same Q objects are AND together, it returns an empty QuerySet.</p>\n\n<pre><code>File.objects.filter(Q(relatedjira__content__icontains='1112'))\n&lt;QuerySet [&lt;File: abc.txt&gt;]&gt;\n\nFile.objects.filter(Q(relatedjira__content__icontains='5368'))\n&lt;QuerySet [&lt;File: abc.txt&gt;]&gt;\n</code></pre>\n\n<p>But when I combine the Q objects with AND, it returns empty set:</p>\n\n<pre><code>File.objects.filter(Q(relatedjira__content__icontains='1112') &amp; Q(relatedjira__content__icontains='5368'))\n&lt;QuerySet[]&gt;\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "dask"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 9874030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9592a108aa7cd163668a11e9bc2433a1?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil02", "link": "https://stackoverflow.com/users/9874030/nikhil02"}, "is_accepted": false, "score": 1, "last_activity_date": 1539286629, "creation_date": 1539286629, "answer_id": 52767684, "question_id": 52748400, "link": "https://stackoverflow.com/questions/52748400/pandas-dask-dataframe-apply-function-with-list-return/52767684#52767684", "title": "Pandas-Dask DataFrame Apply Function with List Return", "body": "<p>It appears there is already a similar question that I missed on stack overflow. Well at least a question that provides a solution to this problem.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/45246716/dask-dataframe-split-column-of-list-into-multiple-columns\">Dask Dataframe split column of list into multiple columns</a></p>\n"}], "owner": {"reputation": 31, "user_id": 9874030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9592a108aa7cd163668a11e9bc2433a1?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil02", "link": "https://stackoverflow.com/users/9874030/nikhil02"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1833, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1539286629, "creation_date": 1539203714, "question_id": 52748400, "link": "https://stackoverflow.com/questions/52748400/pandas-dask-dataframe-apply-function-with-list-return", "title": "Pandas-Dask DataFrame Apply Function with List Return", "body": "<p>I am trying to add multiple columns to a dask dataframe to store the results of an apply function. This will be my first question on stack overflow, I hope this isn't too long!</p>\n\n<p>Current I have this working piece of code:</p>\n\n<pre><code>from dask import dataframe as dd\nfrom multiprocessing import cpu_count\nnCores = cpu_count()\n\nimport dask.multiprocessing\ndask.config.set(scheduler='processes')\n\ndef dfFunc(varA, varB):\n    # Some calculations...\n    return NewValue\n\nddf = dd.from_pandas(weather,npartitions=nCores)\nddf['NewCol1'] = ddf.map_partitions(lambda df: df.apply(lambda x: dfFunc(x['VarA'],x['VarB']), axis=1))\nres = ddf.compute()\n</code></pre>\n\n<p>Essentially, I create as dask dataframe from a pandas dataframe 'weather' then I apply the function 'dfFunc' to each row of the dataframe.</p>\n\n<p>This piece of code works fine, as the output 'res' is the original weather dataframe with a new column called 'NewCol1'.</p>\n\n<p>My confusion comes in where if I want my function to return a list rather than a single value, how do I then go about creating multiple columns in the dask dataframe.</p>\n\n<p>From looking at previous threads, by using a list this is supposedly suppose to add columns to a Pandas Dataframe. Hence changing the lines </p>\n\n<pre><code>return NewValue\nddf['newCol1'] = \n</code></pre>\n\n<p>To the following:</p>\n\n<pre><code>return [NewValue1,NewValue2]\nddf = \n</code></pre>\n\n<p>However it does not seem to work so well with a dask dataframe or I just don't know how to correctly code this as I end up with a single column with a list of values in it.</p>\n\n<pre><code>X    Y    \nval  val  [NewValue1,NewValue2]\n</code></pre>\n\n<p>As a bonus I would like to assign names to these columns in this process as well, but as ddf.compute() returns a pandas dataframe adding column names thereafter shouldn't be too difficult.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 1, "creation_date": 1539203649, "post_id": 52748351, "comment_id": 92421227, "body": "Read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a> for tips on debugging your code."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 3, "creation_date": 1539203750, "post_id": 52748351, "comment_id": 92421264, "body": "Why are you doing all this weird, kludgy string manipulation instead of parsing and serializing the JSON with <code>json.loads</code> and <code>json.dumps</code>?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1539203811, "post_id": 52748351, "comment_id": 92421286, "body": "Also, <code>&quot;customfield_16815&quot;:{&quot;self&quot;:..</code> has a <code>{</code> in it."}, {"owner": {"reputation": 781, "user_id": 3712321, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/164e07d0086c414ddd750ee9214e0f4e?s=128&d=identicon&r=PG&f=1", "display_name": "timsterc", "link": "https://stackoverflow.com/users/3712321/timsterc"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1539204841, "post_id": 52748351, "comment_id": 92421718, "body": "@user2357112 Yes, I agree, it&#39;s fairly inelegant. Problem is that the original input file has <i>some</i> JSON in it, some just debug text, so I have to do a bunch of cleanup before I even get a good JSON-only file."}], "answers": [{"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": true, "score": 1, "last_activity_date": 1539205166, "creation_date": 1539205166, "answer_id": 52748700, "question_id": 52748351, "link": "https://stackoverflow.com/questions/52748351/parsing-file-via-iter-excludes-a-string/52748700#52748700", "title": "Parsing file via &#39;iter&#39; excludes a string", "body": "<p>You're missing an <code>else:</code> clause. Can be fixed as indicated below:</p>\n\n<pre><code>with open('file.in',encoding=\"utf8\") as in_file:\n    with open('file.out', 'w', encoding=\"utf8\") as out_file:\n        tag_to_check_line1 = '{'\n        tag_to_check_line2 = '\"description\"'\n        tag_to_check_not_line2 = ',\"description\"'\n        irofile = iter(in_file)\n        for line in irofile:\n            if tag_to_check_line1 in line:\n                out_file.write(line)\n                line = next(irofile)\n                if tag_to_check_line2 in line and tag_to_check_not_line2 not in line:\n                    out_file.write('\\n')\n                    out_file.write('\"fields\": {\\n')\n                    out_file.write('\"project\":\\n')\n                    out_file.write('{\\n')\n                    out_file.write('\"key\": \"GID\"\\n')\n                    out_file.write('},\\n')\n                    out_file.write(line)\n                else:                           # ADD THESE\n                    out_file.write(line)        # TWO LINES\n            else:\n                out_file.write(line)\n</code></pre>\n"}], "owner": {"reputation": 781, "user_id": 3712321, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/164e07d0086c414ddd750ee9214e0f4e?s=128&d=identicon&r=PG&f=1", "display_name": "timsterc", "link": "https://stackoverflow.com/users/3712321/timsterc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 52748700, "answer_count": 1, "score": -1, "last_activity_date": 1539205166, "creation_date": 1539203462, "last_edit_date": 1539204489, "question_id": 52748351, "link": "https://stackoverflow.com/questions/52748351/parsing-file-via-iter-excludes-a-string", "title": "Parsing file via &#39;iter&#39; excludes a string", "body": "<p>This is driving me crazy, help is appreciated. Here's what I'm trying to do:</p>\n\n<p>With a JSON file as input, find two consecutive lines that look like:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>{\n     \"description\"\n</code></pre>\n\n<p>Then, if that condition is found, insert additional JSON above this point. Following code <em>almost</em> works <strong>except</strong> that for some reason that I can't figure out, one line is getting skipped.</p>\n\n<p>Code:</p>\n\n<pre><code>with open('file.in',encoding=\"utf8\") as in_file:\n    with open('file.out','w',encoding=\"utf8\") as out_file:\n\n        tag_to_check_line1 = '{'\n        tag_to_check_line2 = '\"description\"'\n        tag_to_check_not_line2 = ',\"description\"'\n        irofile = iter(in_file)\n        for line in irofile:\n            if tag_to_check_line1 in line:\n                out_file.write(line)\n                line = next(irofile)\n                if tag_to_check_line2 in line and tag_to_check_not_line2 not in line:\n                    out_file.write('\\n')\n                    out_file.write('\"fields\": {\\n')\n                    out_file.write('\"project\":\\n')\n                    out_file.write('{\\n')\n                    out_file.write('\"key\": \"GID\"\\n')\n                    out_file.write('},\\n')\n                    out_file.write(line)\n            else:\n                out_file.write(line)\n</code></pre>\n\n<p>Input data looks like:</p>\n\n<pre class=\"lang-json prettyprint-override\"><code> {\n        \"description\": \"&lt;p&gt;The description is here.&lt;/p&gt;\",\n        \"customfield_16818\": \"REQ-7591\",\n        \"customfield_16819\": \"GID-1214020\",\n        \"customfield_16815\":{\"self\":\"https://jira.com/rest/api/2/customFieldOption/20685\",\"value\":\"No\",\"id\":\"20685\"},\n        \"summary\": \"MySQL Redundancy\",\n        \"customfield_16816\": \"0\",\n        \"customfield_16817\": \"0\",\n        \"tag\": \"tagtext\"\n    }\n</code></pre>\n\n<p>The resulting output looks right, except that the <code>\"summary\"</code> tag is missing:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> {\n\n\"fields\": {\n\"project\":\n{\n   \"key\": \"GID\"\n},\n        \"description\": \"&lt;p&gt;The description is here.&lt;/p&gt;\",\n        \"customfield_16818\": \"REQ-7591\",\n        \"customfield_16819\": \"GID-1214020\",\n        \"customfield_16815\":{\"self\":\"https://jira.com/rest/api/2/customFieldOption/20685\",\"value\":\"No\",\"id\":\"20685\"},\n        \"customfield_16816\": \"0\",\n        \"customfield_16817\": \"0\",\n        \"tag\": \"tagtext\"\n    }\n</code></pre>\n\n<p>So the question is: <strong>Why</strong> is the <code>\"summary\"</code> tag missing?</p>\n"}, {"tags": ["python", "json", "postgresql", "list", "jsonb"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9505087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f8XMS.jpg?s=128&g=1", "display_name": "BTL-Uni", "link": "https://stackoverflow.com/users/9505087/btl-uni"}, "edited": false, "score": 0, "creation_date": 1539622752, "post_id": 52748810, "comment_id": 92559912, "body": "Works great with a little tweak! I used the SELECT statement you wrote as a subquery in my SELECT statement, but instead of a CROSS JOIN, I used a regular JOIN, and the ON statement was ext_table._id = subq_table._id. A CROSS JOIN seemed to yield all &quot;Mobile&quot; numbers in the table for every row in my outer query, whereas the regular join yields the &quot;Mobile&quot; numbers for only that row. Maybe not the most elegant way, but the result is the desired one."}, {"owner": {"reputation": 85043, "user_id": 1995738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fXrVi.png?s=128&g=1", "display_name": "klin", "link": "https://stackoverflow.com/users/1995738/klin"}, "reply_to_user": {"reputation": 13, "user_id": 9505087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f8XMS.jpg?s=128&g=1", "display_name": "BTL-Uni", "link": "https://stackoverflow.com/users/9505087/btl-uni"}, "edited": false, "score": 0, "creation_date": 1539628133, "post_id": 52748810, "comment_id": 92562463, "body": "<code>cross join &lt;function&gt;</code> is always <b>lateral</b>, you should not be afraid of a cartesian product, see e.g. <a href=\"https://stackoverflow.com/a/33510935/1995738\">PostgreSQL json_array_elements in FROM clause - why is this not cartesian join?</a>"}], "tags": [], "owner": {"reputation": 85043, "user_id": 1995738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fXrVi.png?s=128&g=1", "display_name": "klin", "link": "https://stackoverflow.com/users/1995738/klin"}, "is_accepted": true, "score": 1, "last_activity_date": 1539205669, "creation_date": 1539205669, "answer_id": 52748810, "question_id": 52748337, "link": "https://stackoverflow.com/questions/52748337/postgresql-json-subset-of-nested-lists/52748810#52748810", "title": "PostgreSQL JSON - Subset of nested lists", "body": "<p>Assuming the column contains valid json as array of arrays you should unnest the outer array with <a href=\"https://www.postgresql.org/docs/current/static/functions-json.html\" rel=\"nofollow noreferrer\"><code>jsonb_array_elements()</code></a>, filter inner arrays <em>(tuples)</em> by the first (index 0) their elements and aggregate results with <a href=\"https://www.postgresql.org/docs/current/static/functions-aggregate.html\" rel=\"nofollow noreferrer\"><code>jsonb_agg().</code></a></p>\n\n<pre><code>with my_table(phone_numbers) as (\nvalues\n('[\n  [\"Mobile\",\"111-111-1111\"],\n  [\"Office\",\"222-222-2222\"],\n  [\"Mobile\",\"333-333-3333\"],\n  [\"Fax\",\"444-444-4444\"]\n]'::jsonb)\n)\n\nselect jsonb_agg(phone)\nfrom my_table\ncross join jsonb_array_elements(phone_numbers) as arr(phone)\nwhere phone-&gt;&gt;0 = 'Mobile'\n\n                        jsonb_agg                         \n----------------------------------------------------------\n [[\"Mobile\", \"111-111-1111\"], [\"Mobile\", \"333-333-3333\"]]\n(1 row) \n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9505087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f8XMS.jpg?s=128&g=1", "display_name": "BTL-Uni", "link": "https://stackoverflow.com/users/9505087/btl-uni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "accepted_answer_id": 52748810, "answer_count": 1, "score": 1, "last_activity_date": 1539628870, "creation_date": 1539203415, "last_edit_date": 1539628870, "question_id": 52748337, "link": "https://stackoverflow.com/questions/52748337/postgresql-json-subset-of-nested-lists", "title": "PostgreSQL JSON - Subset of nested lists", "body": "<p>I have a column in a PostgreSQL database that is basically a jsonified list of python tuples:</p>\n\n<pre><code>[\n  [\"Mobile\",\"111-111-1111\"],\n  [\"Office\",\"222-222-2222\"],\n  [\"Mobile\",\"333-333-3333\"],\n  [\"Fax\",\"444-444-4444\"],\n]\n</code></pre>\n\n<p>I'd like to construct a query that returns a subset of the list based on the first value in each of the nested lists. Below is a psudo-query to hopefully illustrate what I'm after:</p>\n\n<pre><code>SELECT\n  foo AS bar,\n  (SELECT \n     element \n   FROM \n     phone_numbers \n   WHERE\n     element::json-&gt;&gt;0 = \"Mobile\") AS mobile_numbers\nFROM\n  db\n;\n\nmobile_numbers == [[\"Mobile\",\"111-111-1111\"],[\"Mobile\",\"333-333-3333\"]]\n</code></pre>\n\n<p>I only know bits and pieces about json operators in PostgreSQL (and SQL queries in general), mostly in terms of dictionaries. I can find many examples on here about how to dig into nested dictionaries and return one value, but I haven't found anything that quite matches what I'm after.</p>\n\n<p>Thanks for your help.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "edited": false, "score": 0, "creation_date": 1539203450, "post_id": 52748298, "comment_id": 92421147, "body": "What operations do you hope to perform on this? Unless you&#39;ve got a massive machine, for a raw 200gb of that format, you should allow at least 600-700gb of RAM for in-memory dataframes (and that&#39;s probably very conservative... maybe even 1tb before you get started)."}, {"owner": {"reputation": 1512, "user_id": 1581390, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/075f8e33addc4f7aa47494e8121c8879?s=128&d=identicon&r=PG", "display_name": "user1581390", "link": "https://stackoverflow.com/users/1581390/user1581390"}, "reply_to_user": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "edited": false, "score": 0, "creation_date": 1539203507, "post_id": 52748298, "comment_id": 92421164, "body": "I have a massive machine."}, {"owner": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "edited": false, "score": 0, "creation_date": 1539203590, "post_id": 52748298, "comment_id": 92421204, "body": "Okay... got at least a few hundred gig ram to start with?"}, {"owner": {"reputation": 1512, "user_id": 1581390, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/075f8e33addc4f7aa47494e8121c8879?s=128&d=identicon&r=PG", "display_name": "user1581390", "link": "https://stackoverflow.com/users/1581390/user1581390"}, "reply_to_user": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "edited": false, "score": 0, "creation_date": 1539203657, "post_id": 52748298, "comment_id": 92421231, "body": "Yes, I do, and the size is about 100 GB raw."}, {"owner": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "edited": false, "score": 0, "creation_date": 1539204199, "post_id": 52748298, "comment_id": 92421436, "body": "What do you intend to do with those dataframes after?"}], "answers": [{"comments": [{"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1539239653, "post_id": 52749147, "comment_id": 92430743, "body": "Why wouldn&#39;t you use pandas? Would core python handle this better?"}, {"owner": {"reputation": 3169, "user_id": 7351755, "user_type": "registered", "profile_image": "https://graph.facebook.com/942331592534671/picture?type=large", "display_name": "Jared Wilber", "link": "https://stackoverflow.com/users/7351755/jared-wilber"}, "reply_to_user": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 1, "creation_date": 1539279055, "post_id": 52749147, "comment_id": 92454443, "body": "@Datanovice - to be fair, if you have enough RAM, then you could use pandas. I think a more conventional <code>big data</code> tool would be appropriate, e.g. spark."}], "tags": [], "owner": {"reputation": 3169, "user_id": 7351755, "user_type": "registered", "profile_image": "https://graph.facebook.com/942331592534671/picture?type=large", "display_name": "Jared Wilber", "link": "https://stackoverflow.com/users/7351755/jared-wilber"}, "is_accepted": false, "score": 2, "last_activity_date": 1539207494, "creation_date": 1539207494, "answer_id": 52749147, "question_id": 52748298, "link": "https://stackoverflow.com/questions/52748298/pandas-turn-a-column-into-a-table/52749147#52749147", "title": "Pandas: Turn a Column into a Table", "body": "<p>\"This is a HUGE table (200 GB) so I need this done efficiently.\" - then don't use <code>pandas</code>.</p>\n\n<p>If you must, you could first read the data in as a single dataframe:</p>\n\n<pre><code>  df = pd.read_csv('test.txt', header=None, sep='[,|]')\n</code></pre>\n\n<p>Then separate the data as required:</p>\n\n<pre><code>  df1 = df.iloc[:, 0:3]\n  df2 = df.iloc[:, 3:5]\n  del df\n</code></pre>\n\n<p>This deals with the separation, and only loads the data once, but you should look into a different tool for something of that size...</p>\n"}], "owner": {"reputation": 1512, "user_id": 1581390, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/075f8e33addc4f7aa47494e8121c8879?s=128&d=identicon&r=PG", "display_name": "user1581390", "link": "https://stackoverflow.com/users/1581390/user1581390"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1539207494, "creation_date": 1539203237, "question_id": 52748298, "link": "https://stackoverflow.com/questions/52748298/pandas-turn-a-column-into-a-table", "title": "Pandas: Turn a Column into a Table", "body": "<p>I have a table that is actually two tables. Each row in the table is the row from table A and the row from table B, separated by '|'. Columns in each one are separated by ','.</p>\n\n<p>This is a HUGE table (200 GB) so I need this done efficiently.</p>\n\n<p>Sample data:</p>\n\n<pre><code>0.0,0|586,abc,6\n0.4,2|416,efg,3\n1.0,8|007,hik,1\n</code></pre>\n\n<p>I want to get table A as a pandas table, and table B as a separate pandas table.</p>\n"}, {"tags": ["python", "opencv", "image-processing", "computer-vision"], "comments": [{"owner": {"reputation": 190, "user_id": 10325679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YAET7.jpg?s=128&g=1", "display_name": "user190081", "link": "https://stackoverflow.com/users/10325679/user190081"}, "edited": false, "score": 1, "creation_date": 1539205544, "post_id": 52748270, "comment_id": 92422002, "body": "Related: <a href=\"https://www.researchgate.net/post/How_can_I_remove_hair_from_skin_image\" rel=\"nofollow noreferrer\">researchgate.net/post/How_can_I_remove_hair_from_skin_image</a>,  <a href=\"http://www.cs.rug.nl/svcg/Shapes/GapDetection\" rel=\"nofollow noreferrer\">cs.rug.nl/svcg/Shapes/GapDetection</a> , <a href=\"https://www.researchgate.net/publication/276369854_Automatic_skin_lesion_segmentation_with_optimal_colour_channel_from_dermoscopic_images\" rel=\"nofollow noreferrer\">researchgate.net/publication/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 10473503, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LddCLLTy4DI/AAAAAAAAAAI/AAAAAAAAABI/j5F4ZdD_yY0/photo.jpg?sz=128", "display_name": "Tecnologia da Net", "link": "https://stackoverflow.com/users/10473503/tecnologia-da-net"}, "edited": false, "score": 0, "creation_date": 1539276016, "post_id": 52756229, "comment_id": 92452795, "body": "and in relation to these by those that remained on the skin, how to remove them? In my opinion, DullRazon, who does these removals, but found no implementation of it."}, {"owner": {"reputation": 307, "user_id": 6199844, "user_type": "registered", "profile_image": "https://graph.facebook.com/756589081107808/picture?type=large", "display_name": "Carlos Diego", "link": "https://stackoverflow.com/users/6199844/carlos-diego"}, "edited": false, "score": 0, "creation_date": 1541783452, "post_id": 52756229, "comment_id": 93347451, "body": "@kavko u can help me in the question: <a href=\"https://stackoverflow.com/questions/52858115/how-to-remove-hair-from-skin-images-using-opencv\" title=\"how to remove hair from skin images using opencv\">stackoverflow.com/questions/52858115/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2275, "user_id": 9789737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56767e4cc025351ea72c056afcb757d1?s=128&d=identicon&r=PG&f=1", "display_name": "kavko", "link": "https://stackoverflow.com/users/9789737/kavko"}, "is_accepted": true, "score": 13, "last_activity_date": 1539248689, "creation_date": 1539248689, "answer_id": 52756229, "question_id": 52748270, "link": "https://stackoverflow.com/questions/52748270/how-to-remove-image-noise-using-opencv-python/52756229#52756229", "title": "How to remove image noise using opencv - python?", "body": "<p>This is quite a difficult task becasue the hair goes over your ROI (mole). I don't know how to help remove it from the mole but I can help to remove the backround like in the picture without hairs. For the removal of hairs from mole I advise you to search for \"removing of watermarks from image\" and \"deep neural networks\" to maybe train a model to remove the hairs (note that this task will be quite difficult).</p>\n\n<p>That being said, for the removing of background you could try the same code that you allready have for detection without hairs. You will get a binary image like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/xcMaA.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/xcMaA.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now your region is filled with white lines (hairs) that go over your contour that is your ROI and <code>cv2.findContours()</code> would also pick them out because they are connected. But if you look at the picture you will find out that the white lines are quite thin and you can remove it from the image by performing opening (<code>cv2.morphologyEx</code>) on the image. Opening is erosion followed by dilation so when you erode the image with a big enough kernel size the white lines will dissapear:</p>\n\n<p><a href=\"https://i.stack.imgur.com/lKYsm.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/lKYsm.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now you have a white spot with some noises arround which you can connect by performing another dilation (<code>cv2.dilate()</code>):</p>\n\n<p><a href=\"https://i.stack.imgur.com/G5wQQ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/G5wQQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>To make the ROI a bit smoother you can blur the image <code>cv2.blur()</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/hH0Hh.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/hH0Hh.png\" alt=\"enter image description here\"></a></p>\n\n<p>After that you can make another treshold and search for the biggest contour. The final result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/vYL9L.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/vYL9L.png\" alt=\"enter image description here\"></a></p>\n\n<p>Hope it helps a bit. Cheers!</p>\n\n<p>Example code:</p>\n\n<pre><code>import numpy as np\nimport cv2\n\n# Read the image and perfrom an OTSU threshold\nimg = cv2.imread('hair.png')\ngray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)\nret, thresh = cv2.threshold(gray,0,255,cv2.THRESH_BINARY_INV+cv2.THRESH_OTSU)\n\n# Remove hair with opening\nkernel = np.ones((5,5),np.uint8)\nopening = cv2.morphologyEx(thresh,cv2.MORPH_OPEN,kernel, iterations = 2)\n\n# Combine surrounding noise with ROI\nkernel = np.ones((6,6),np.uint8)\ndilate = cv2.dilate(opening,kernel,iterations=3)\n\n# Blur the image for smoother ROI\nblur = cv2.blur(dilate,(15,15))\n\n# Perform another OTSU threshold and search for biggest contour\nret, thresh = cv2.threshold(blur,0,255,cv2.THRESH_BINARY+cv2.THRESH_OTSU)\n_, contours, hierarchy = cv2.findContours(thresh,cv2.RETR_TREE,cv2.CHAIN_APPROX_NONE)\ncnt = max(contours, key=cv2.contourArea)\n\n# Create a new mask for the result image\nh, w = img.shape[:2]\nmask = np.zeros((h, w), np.uint8)\n\n# Draw the contour on the new mask and perform the bitwise operation\ncv2.drawContours(mask, [cnt],-1, 255, -1)\nres = cv2.bitwise_and(img, img, mask=mask)\n\n# Display the result\ncv2.imshow('img', res)\ncv2.waitKey(0)\ncv2.destroyAllWindows()\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 10473503, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LddCLLTy4DI/AAAAAAAAAAI/AAAAAAAAABI/j5F4ZdD_yY0/photo.jpg?sz=128", "display_name": "Tecnologia da Net", "link": "https://stackoverflow.com/users/10473503/tecnologia-da-net"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6956, "favorite_count": 5, "accepted_answer_id": 52756229, "answer_count": 1, "score": 7, "last_activity_date": 1539702853, "creation_date": 1539203119, "last_edit_date": 1539702853, "question_id": 52748270, "link": "https://stackoverflow.com/questions/52748270/how-to-remove-image-noise-using-opencv-python", "title": "How to remove image noise using opencv - python?", "body": "<p>I am working with skin images, in recognition of skin blemishes, and due to the presence of noises, mainly by the presence of hairs, this work becomes more complicated.</p>\n\n<p>I have an image example in which I work in an attempt to highlight only the skin spot, but due to the large number of hairs, the algorithm is not effective. With this, I would like you to help me develop an algorithm to remove or reduce the amount of hair so that I can only highlight my area of \u200b\u200binterest (ROI), which are the spots.</p>\n\n<p>Algorithm used to highlight skin blemishes:</p>\n\n<pre><code>import numpy as np\nimport cv2\n\n#Read the image and perform threshold\nimg = cv2.imread('IMD006.bmp')\ngray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)\nblur = cv2.medianBlur(gray,5)\n_,thresh = cv2.threshold(blur,0,255,cv2.THRESH_BINARY_INV+cv2.THRESH_OTSU)\n\n#Search for contours and select the biggest one\ncontours, hierarchy =         cv2.findContours(thresh,cv2.RETR_TREE,cv2.CHAIN_APPROX_NONE)\ncnt = max(contours, key=cv2.contourArea)\n\n#Create a new mask for the result image\nh, w = img.shape[:2]\nmask = np.zeros((h, w), np.uint8)\n\n#Draw the contour on the new mask and perform the bitwise operation\ncv2.drawContours(mask, [cnt],-1, 255, -1)\nres = cv2.bitwise_and(img, img, mask=mask)\n\n#Display the result\ncv2.imwrite('IMD006.png', res)\n#cv2.imshow('img', res)\ncv2.waitKey(0)\ncv2.destroyAllWindows()\n</code></pre>\n\n<p>Example image used:\n<a href=\"https://i.stack.imgur.com/1BME2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1BME2.png\" alt=\"enter image description here\"></a></p>\n\n<p>How to deal with these noises to the point of improving my region of interest?</p>\n"}, {"tags": ["python", "pip", "virtualenv", "pipenv"], "comments": [{"owner": {"reputation": 1133, "user_id": 2387597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e97d265245b5a76657576d13768f6698?s=128&d=identicon&r=PG", "display_name": "n8sty", "link": "https://stackoverflow.com/users/2387597/n8sty"}, "edited": false, "score": 0, "creation_date": 1539204166, "post_id": 52748233, "comment_id": 92421428, "body": "what version of <code>pip</code> are you using? i&#39;ve had some trouble with the most recent version of <code>pip</code> and <code>pipenv</code>"}, {"owner": {"reputation": 1211, "user_id": 1064810, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/44c6e0cb82df26797533f6efc84143b5?s=128&d=identicon&r=PG", "display_name": "cat pants", "link": "https://stackoverflow.com/users/1064810/cat-pants"}, "reply_to_user": {"reputation": 1133, "user_id": 2387597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e97d265245b5a76657576d13768f6698?s=128&d=identicon&r=PG", "display_name": "n8sty", "link": "https://stackoverflow.com/users/2387597/n8sty"}, "edited": false, "score": 0, "creation_date": 1539211302, "post_id": 52748233, "comment_id": 92423826, "body": "pip version is 18.1"}, {"owner": {"reputation": 1211, "user_id": 1064810, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/44c6e0cb82df26797533f6efc84143b5?s=128&d=identicon&r=PG", "display_name": "cat pants", "link": "https://stackoverflow.com/users/1064810/cat-pants"}, "reply_to_user": {"reputation": 1133, "user_id": 2387597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e97d265245b5a76657576d13768f6698?s=128&d=identicon&r=PG", "display_name": "n8sty", "link": "https://stackoverflow.com/users/2387597/n8sty"}, "edited": false, "score": 0, "creation_date": 1539211328, "post_id": 52748233, "comment_id": 92423832, "body": "pipenv version 2018.7.1"}, {"owner": {"reputation": 1133, "user_id": 2387597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e97d265245b5a76657576d13768f6698?s=128&d=identicon&r=PG", "display_name": "n8sty", "link": "https://stackoverflow.com/users/2387597/n8sty"}, "edited": false, "score": 0, "creation_date": 1539269973, "post_id": 52748233, "comment_id": 92449480, "body": "try downgrading your pip to version 18.0.0 - <code>pipenv run pip install pip==18.0.0</code> and then retry"}, {"owner": {"reputation": 1211, "user_id": 1064810, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/44c6e0cb82df26797533f6efc84143b5?s=128&d=identicon&r=PG", "display_name": "cat pants", "link": "https://stackoverflow.com/users/1064810/cat-pants"}, "reply_to_user": {"reputation": 1133, "user_id": 2387597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e97d265245b5a76657576d13768f6698?s=128&d=identicon&r=PG", "display_name": "n8sty", "link": "https://stackoverflow.com/users/2387597/n8sty"}, "edited": false, "score": 0, "creation_date": 1539283621, "post_id": 52748233, "comment_id": 92456722, "body": "No luck with 18.0.0, same error."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7598322"}, "is_accepted": false, "score": 0, "last_activity_date": 1539330673, "creation_date": 1539330673, "answer_id": 52774799, "question_id": 52748233, "link": "https://stackoverflow.com/questions/52748233/how-do-i-tell-pipenv-to-use-a-library-that-is-installed-locally/52774799#52774799", "title": "How do I tell pipenv to use a library that is installed locally?", "body": "<p>This error is caused by the latest version of pip \u2014 v18.1. \nSo, if you are using pip 18.1 (<code>pip --version</code> to check the version) you need to downgrade to the previous version i.e v18 in order to get it working. </p>\n\n<p>Run the following command to downgrade it:</p>\n\n<p><code>pipenv run pip install pip==18.0\n</code></p>\n\n<p>Reference to the GitHub issue: <a href=\"https://github.com/pypa/pipenv/issues/2924\" rel=\"nofollow noreferrer\">pip 18.1 causes \"TypeError: 'module' object is not callable\" #2924\n</a></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 13450143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80c9b4c98fd2f329988411b12e1af9c9?s=128&d=identicon&r=PG&f=1", "display_name": "Etienne", "link": "https://stackoverflow.com/users/13450143/etienne"}, "is_accepted": false, "score": 1, "last_activity_date": 1605435266, "last_edit_date": 1605435266, "creation_date": 1605384305, "answer_id": 64838122, "question_id": 52748233, "link": "https://stackoverflow.com/questions/52748233/how-do-i-tell-pipenv-to-use-a-library-that-is-installed-locally/64838122#64838122", "title": "How do I tell pipenv to use a library that is installed locally?", "body": "<p>This solution comes a bit late but I encountered exact same issue with 'numpy' package which couldn't be installed using pip on raspberrypi.</p>\n<p>For anyone having same issue here is workaround: reinstall a new environment using following command:</p>\n<p><code>pipenv --three --site-packages</code></p>\n<p>From official pipenv <a href=\"https://pipenv-searchable.readthedocs.io/advanced.html#working-with-platform-provided-python-components\" rel=\"nofollow noreferrer\">docs</a>:</p>\n<blockquote>\n<p><strong>Working with Platform-Provided Python Components</strong></p>\n<p>It\u2019s reasonably common for platform specific Python bindings for operating system interfaces to only be available through the system package manager, and hence unavailable for installation into virtual environments with pip. In these cases, the virtual environment can be created with access to the system site-packages directory:</p>\n<p>$ pipenv --three --site-packages</p>\n</blockquote>\n"}], "owner": {"reputation": 1211, "user_id": 1064810, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/44c6e0cb82df26797533f6efc84143b5?s=128&d=identicon&r=PG", "display_name": "cat pants", "link": "https://stackoverflow.com/users/1064810/cat-pants"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 906, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1605435266, "creation_date": 1539203006, "last_edit_date": 1539203373, "question_id": 52748233, "link": "https://stackoverflow.com/questions/52748233/how-do-i-tell-pipenv-to-use-a-library-that-is-installed-locally", "title": "How do I tell pipenv to use a library that is installed locally?", "body": "<p>Trying to use the neopixel library. It looks like it can't be installed with pipenv, as I get:</p>\n\n<p><code>TypeError: 'module' object is not callable</code></p>\n\n<p>When I try and install with:</p>\n\n<p><code>PIPENV_TIMEOUT=300 pipenv install -e git+https://github.com/jgarff/rpi_ws281x.git#egg=neopixel\\&amp;subdirectory=python</code></p>\n\n<p>So I tried installing the neopixel library with these instructions here:</p>\n\n<p><a href=\"https://learn.adafruit.com/neopixels-on-raspberry-pi/software\" rel=\"nofollow noreferrer\">https://learn.adafruit.com/neopixels-on-raspberry-pi/software</a></p>\n\n<p>and it works great. Personal projects and the demo both work with no issues.</p>\n\n<p>However...I am now trying to integrate some code that uses the neopixel library with some other libraries that I install via pipenv. (As is best practice)</p>\n\n<p>I have no reference to neopixel in my Pipfile (as stated above, it can't be installed via pipenv without that error)</p>\n\n<p>But when I run my program with:\n<code>pipenv run python foo.py</code></p>\n\n<p>It complains about the missing neopixel library.</p>\n\n<p>How do I tell pipenv \"Even though I am using a virtual env for most of my libraries, this <strong>one</strong> library <strong>is not</strong> found in the virtual env, but it <strong>is</strong> found globally on the OS\" ?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1539203071, "post_id": 52748216, "comment_id": 92420971, "body": "You need to visit a tutorial, not ask here. Try <a href=\"https://docs.python.org/3/tutorial/\" rel=\"nofollow noreferrer\">docs.python.org/3/tutorial</a> . <code>solution = &quot;One Two Three&quot;.split()</code> does what you want."}, {"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 1, "creation_date": 1539203331, "post_id": 52748216, "comment_id": 92421100, "body": "<code>itemList=input (&quot;Enter all items: &quot;).split(&quot; &quot;)</code> should be enough"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1539204492, "post_id": 52748216, "comment_id": 92421577, "body": "@mad_: Typically, you&#39;d omit the argument to <code>split</code> entirely. That makes it strip leading and trailing whitespace, and split on runs of whitespace, so having two spaces or a tab between your inputs doesn&#39;t add an empty string to your result list in the former case, or fail to split at all in the latter case."}], "answers": [{"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1539204381, "post_id": 52748488, "comment_id": 92421532, "body": "<code>[i for i in items.split()]</code> is completely pointless. <code>items.split()</code> already returns a <code>list</code>, wrapping it in a no-op <code>list</code> comprehension just makes a new <code>list</code> for no reason."}], "tags": [], "owner": {"reputation": 154, "user_id": 9067271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74824d2cb6faf9226e0a2775943812b2?s=128&d=identicon&r=PG&f=1", "display_name": "misterflister", "link": "https://stackoverflow.com/users/9067271/misterflister"}, "is_accepted": false, "score": 0, "last_activity_date": 1539204125, "creation_date": 1539204125, "answer_id": 52748488, "question_id": 52748216, "link": "https://stackoverflow.com/questions/52748216/turn-all-input-items-into-a-list/52748488#52748488", "title": "Turn all &#39;input&#39; items into a list.", "body": "<p>You want to create a list consisting of the input string, split on spaces (calling \"split()\" defaults to splitting a string on spaces).</p>\n\n<pre><code>items = input (\"Enter all items: \")\nitemList = [i for i in items.split()]\nprint(itemList)\n</code></pre>\n\n<p>Output, using your suggested input:</p>\n\n<pre><code>['Test', 'Test2', 'Test3', 'Test4']\n</code></pre>\n"}], "owner": {"reputation": 405, "user_id": 4830458, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/dc026b82ce745c12e6dd32abf805f9d4?s=128&d=identicon&r=PG&f=1", "display_name": "dwb", "link": "https://stackoverflow.com/users/4830458/dwb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "closed_date": 1539204527, "answer_count": 1, "score": -2, "last_activity_date": 1539204125, "creation_date": 1539202946, "last_edit_date": 1539203084, "question_id": 52748216, "link": "https://stackoverflow.com/questions/52748216/turn-all-input-items-into-a-list", "closed_reason": "Duplicate", "title": "Turn all &#39;input&#39; items into a list.", "body": "<p>I am trying to have a user input items into a list, and then have all the items they entered go into a list. </p>\n\n<p>Example:</p>\n\n<pre><code>itemList = []\nitems = input (\"Enter all items: \")\n</code></pre>\n\n<p>What I would like to do is, if user inputs \"Test Test2 Test3 Test4\", each of the items (seperated by the spaces) gets put into the itemList. </p>\n\n<p>Sorry if I did not explain it very well, and I am not sure if this is even possible.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "django", "django-models"], "comments": [{"owner": {"reputation": 2089, "user_id": 5616565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xdEXf.jpg?s=128&g=1", "display_name": "DarkSuniuM", "link": "https://stackoverflow.com/users/5616565/darksunium"}, "edited": false, "score": 2, "creation_date": 1539203007, "post_id": 52748190, "comment_id": 92420939, "body": "What exactly you wanna do? Provide more information please!"}, {"owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "edited": false, "score": 0, "creation_date": 1539205158, "post_id": 52748190, "comment_id": 92421861, "body": "Why are you saving a date time in (multiple) textfields?"}, {"owner": {"reputation": 27, "user_id": 9866771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9de0c43dd736a8f67c3dcb1e28621acd?s=128&d=identicon&r=PG&f=1", "display_name": "green", "link": "https://stackoverflow.com/users/9866771/green"}, "edited": false, "score": 0, "creation_date": 1539205490, "post_id": 52748190, "comment_id": 92421983, "body": "I trying to make a cronjob generator."}, {"owner": {"reputation": 2089, "user_id": 5616565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xdEXf.jpg?s=128&g=1", "display_name": "DarkSuniuM", "link": "https://stackoverflow.com/users/5616565/darksunium"}, "edited": false, "score": 0, "creation_date": 1539208234, "post_id": 52748190, "comment_id": 92422911, "body": "Why not <code>CharField</code>?"}, {"owner": {"reputation": 27, "user_id": 9866771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9de0c43dd736a8f67c3dcb1e28621acd?s=128&d=identicon&r=PG&f=1", "display_name": "green", "link": "https://stackoverflow.com/users/9866771/green"}, "edited": false, "score": 0, "creation_date": 1539209240, "post_id": 52748190, "comment_id": 92423246, "body": "I think that is working (have a other error, but thats is here not the subject). Thanks. I also had originally first * and now &#39;*&#39;."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 9866771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9de0c43dd736a8f67c3dcb1e28621acd?s=128&d=identicon&r=PG&f=1", "display_name": "green", "link": "https://stackoverflow.com/users/9866771/green"}, "edited": false, "score": 0, "creation_date": 1539210021, "post_id": 52749296, "comment_id": 92423463, "body": "Thank you for your help!"}, {"owner": {"reputation": 27, "user_id": 9866771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9de0c43dd736a8f67c3dcb1e28621acd?s=128&d=identicon&r=PG&f=1", "display_name": "green", "link": "https://stackoverflow.com/users/9866771/green"}, "edited": false, "score": 0, "creation_date": 1539210679, "post_id": 52749296, "comment_id": 92423634, "body": "I&#39;m  newby: how do i give badges?"}, {"owner": {"reputation": 2089, "user_id": 5616565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xdEXf.jpg?s=128&g=1", "display_name": "DarkSuniuM", "link": "https://stackoverflow.com/users/5616565/darksunium"}, "reply_to_user": {"reputation": 27, "user_id": 9866771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9de0c43dd736a8f67c3dcb1e28621acd?s=128&d=identicon&r=PG&f=1", "display_name": "green", "link": "https://stackoverflow.com/users/9866771/green"}, "edited": false, "score": 0, "creation_date": 1539214093, "post_id": 52749296, "comment_id": 92424501, "body": "Just press on the tick next to the Answer and use the up vote button, uppon the votes count"}], "tags": [], "owner": {"reputation": 2089, "user_id": 5616565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xdEXf.jpg?s=128&g=1", "display_name": "DarkSuniuM", "link": "https://stackoverflow.com/users/5616565/darksunium"}, "is_accepted": false, "score": 0, "last_activity_date": 1539208409, "creation_date": 1539208409, "answer_id": 52749296, "question_id": 52748190, "link": "https://stackoverflow.com/questions/52748190/django-models-which-field-for-asteriks/52749296#52749296", "title": "django-models which field for asteriks *?", "body": "<p>As I understood, You just want a Type for putting <code>*</code> as data into it!</p>\n\n<p>The best option is <a href=\"https://docs.djangoproject.com/en/2.1/ref/models/fields/#django.db.models.CharField\" rel=\"nofollow noreferrer\"><code>CharField</code></a>!</p>\n\n<p>Also I see the other values the fields can get are integers!</p>\n\n<p>Why don't you just use <code>-1</code> and then when you are using the model replace it with <code>*</code>?</p>\n"}], "owner": {"reputation": 27, "user_id": 9866771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9de0c43dd736a8f67c3dcb1e28621acd?s=128&d=identicon&r=PG&f=1", "display_name": "green", "link": "https://stackoverflow.com/users/9866771/green"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1539208409, "creation_date": 1539202817, "last_edit_date": 1539204496, "question_id": 52748190, "link": "https://stackoverflow.com/questions/52748190/django-models-which-field-for-asteriks", "title": "django-models which field for asteriks *?", "body": "<p>I'm setting up a database in Django.\nWhich is the correct field type for asteriks * in models.py? \nI have tried TextField, IntegerField and Charfield.</p>\n\n<pre><code>class Task(models.Model):\n    class Meta:\n        verbose_name_plural = 'Task'\n\n    save_date = models.DateTimeField(default=timezone.now())\n    hour_cr = models.TextField(default='*', validators=[MaxValueValidator(24), MinValueValidator(0)])\n    minute_cr = models.TextField(default='*', validators=[MaxValueValidator(59), MinValueValidator(0)])\n    day_of_the_month_cr = models.TextField(default='*', validators=[MaxValueValidator(31), MinValueValidator(0)])\n    month_cr = models.TextField(default='*', validators=[MaxValueValidator(12), MinValueValidator(1)])\n    day_of_week_cr = models.TextField(default='*', validators=[MaxValueValidator(7), MinValueValidator(1)])\n    name_task = models.TextField(max_length=25)\n    user = models.ForeignKey(User, on_delete=models.CASCADE)\n</code></pre>\n\n<p>AttributeError: module 'django.db.models' has no attribute 'CharacterData'</p>\n"}, {"tags": ["python", "jquery", "ajax", "django", "django-views"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 2, "creation_date": 1539202846, "post_id": 52748178, "comment_id": 92420876, "body": "If you&#39;re using Django&#39;s own auth framework, you don&#39;t need to do this at all; the username is always available via <code>request.user</code>. (If you&#39;re not using it, you absolutely should be.)"}, {"owner": {"reputation": 187, "user_id": 5526273, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/12ad7d6907890f629222c5cb9cdf5252?s=128&d=identicon&r=PG&f=1", "display_name": "KChow", "link": "https://stackoverflow.com/users/5526273/kchow"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1539203051, "post_id": 52748178, "comment_id": 92420956, "body": "I am using django&#39;s auth framework. But I need to be able to access the session field for logout right? Also, why wouldn&#39;t I be able to access session in the above scenario?"}, {"owner": {"reputation": 502, "user_id": 4987005, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205513050159563/picture?type=large", "display_name": "Kristiyan Gospodinov", "link": "https://stackoverflow.com/users/4987005/kristiyan-gospodinov"}, "edited": false, "score": 0, "creation_date": 1539203080, "post_id": 52748178, "comment_id": 92420974, "body": "Do you have django.contrib.sessions.middleware.SessionMiddleware in your MIDDLEWARE list?"}, {"owner": {"reputation": 187, "user_id": 5526273, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/12ad7d6907890f629222c5cb9cdf5252?s=128&d=identicon&r=PG&f=1", "display_name": "KChow", "link": "https://stackoverflow.com/users/5526273/kchow"}, "edited": false, "score": 0, "creation_date": 1539203140, "post_id": 52748178, "comment_id": 92421007, "body": "Yes. I have that added."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 1, "creation_date": 1539203567, "post_id": 52748178, "comment_id": 92421184, "body": "No, why would you need the session for logout? You just do <code>logout(request)</code>. But in order to help you we really need to see real code; what you have here wouldn&#39;t work at all because <code>username</code> is not defined in the <code>home</code> view."}, {"owner": {"reputation": 187, "user_id": 5526273, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/12ad7d6907890f629222c5cb9cdf5252?s=128&d=identicon&r=PG&f=1", "display_name": "KChow", "link": "https://stackoverflow.com/users/5526273/kchow"}, "edited": false, "score": 0, "creation_date": 1539203618, "post_id": 52748178, "comment_id": 92421214, "body": "I tried set_test_cookie, it didn&#39;t work in the home view either. It worked on login view. The set_test_cookie was done in the index view. does it have anything to do with render or ajax?"}, {"owner": {"reputation": 187, "user_id": 5526273, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/12ad7d6907890f629222c5cb9cdf5252?s=128&d=identicon&r=PG&f=1", "display_name": "KChow", "link": "https://stackoverflow.com/users/5526273/kchow"}, "edited": false, "score": 0, "creation_date": 1539203676, "post_id": 52748178, "comment_id": 92421239, "body": "username is defined.. or else for the discussion consider username as any string. I will update my question."}, {"owner": {"reputation": 187, "user_id": 5526273, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/12ad7d6907890f629222c5cb9cdf5252?s=128&d=identicon&r=PG&f=1", "display_name": "KChow", "link": "https://stackoverflow.com/users/5526273/kchow"}, "edited": false, "score": 0, "creation_date": 1539204043, "post_id": 52748178, "comment_id": 92421381, "body": "Btw request.user prints AnonymousUser in the view XYZ even though authenticate and login was done with a particular user name."}], "owner": {"reputation": 187, "user_id": 5526273, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/12ad7d6907890f629222c5cb9cdf5252?s=128&d=identicon&r=PG&f=1", "display_name": "KChow", "link": "https://stackoverflow.com/users/5526273/kchow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539204940, "creation_date": 1539202759, "last_edit_date": 1539204940, "question_id": 52748178, "link": "https://stackoverflow.com/questions/52748178/django-session-not-working-between-multiple-views", "title": "Django Session not working between multiple views", "body": "<p>I have a login view which renders a login page for the user to fill.\nOnce the user submits the login page, a post call is made to another view named home. This home view verifies the user credentials and if successful redirects to another view that renders a new html file.</p>\n\n<p>In settings.py</p>\n\n<p>'django.contrib.sessions' is added to installed apps.\n'django.contrib.sessions.middleware.SessionMiddleware' is added to MIDDLEWARE.</p>\n\n<p>ISSUE:- I setup a session field in the home view and then from there when the flow gets redirected to the other view, the session field becomes invalid. I cannot give the entire code due to company policy, but I am giving as much as is needed to explain my question.</p>\n\n<p>N.B:- When the Index.html is loaded, the post transaction is through AJAX/jquery from the Index.html file and on success the same index.html file accesses the view XYZ using window.location.href('/XYZ');</p>\n\n<p>ERROR:- KeyError: 'userName'</p>\n\n<pre><code>def index(request):\n    return HttpResponseRedirect(reverse('login'))\n\ndef login( request ):\n    return render_to_response('Index.html')\n\ndef home( request ):\n    login( user );\n    request.session['userName'] = \"test\";\n    return HttpResponse( \"SUCCESS\" )\n\ndef XYZ( request ):\n    print( request.session['userName'])\n    return HttpResponse( \"FAILED\" )\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1539203258, "post_id": 52748148, "comment_id": 92421067, "body": "since your original code is quite tough to format and read, it&#39;s hard to give you a clear answer, but for sure print(good-bye) will not work, replace with <code>print(&#39;good-bye&#39;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1539203532, "post_id": 52748305, "comment_id": 92421169, "body": "It&#39;s more likely the <code>else</code> belongs to the inner <code>if</code>."}, {"owner": {"reputation": 2331, "user_id": 7207514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PSSHk.png?s=128&g=1", "display_name": "Deiv", "link": "https://stackoverflow.com/users/7207514/deiv"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1539203627, "post_id": 52748305, "comment_id": 92421219, "body": "If that&#39;s the case then the error is because of the indentation, with else being indented as if it is under the first elif."}], "tags": [], "owner": {"reputation": 2331, "user_id": 7207514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PSSHk.png?s=128&g=1", "display_name": "Deiv", "link": "https://stackoverflow.com/users/7207514/deiv"}, "is_accepted": false, "score": 0, "last_activity_date": 1539203281, "creation_date": 1539203281, "answer_id": 52748305, "question_id": 52748148, "link": "https://stackoverflow.com/questions/52748148/why-i-am-getting-syntax-error-in-elif-command-in-the-last-steps/52748305#52748305", "title": "why i am getting syntax error in ELIF command in the last steps.?", "body": "<p>You are getting the error because you have an elif after your last else. Elif can only be after an if statement, and else has to be the last choice.</p>\n\n<p>Here is what the code would look like:</p>\n\n<pre><code>    if choice ==\"0\":\n       print(good-bye)\n    elif choice ==\"1\":\n       term = input(\"What term do you want me to translate?: \")\n       if term in geek:\n          definition = geek[term]\n          print(\"\\n\", term, \"means\", definition)\n    elif choice == \"2\":\n       do something\n    else:\n       print(\"\\nSorry, I dont know\", term)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10486264, "user_type": "registered", "profile_image": "https://graph.facebook.com/1775822005848322/picture?type=large", "display_name": "Danish Ahmad", "link": "https://stackoverflow.com/users/10486264/danish-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1539203580, "creation_date": 1539202604, "last_edit_date": 1539203580, "question_id": 52748148, "link": "https://stackoverflow.com/questions/52748148/why-i-am-getting-syntax-error-in-elif-command-in-the-last-steps", "title": "why i am getting syntax error in ELIF command in the last steps.?", "body": "<pre><code>if choice ==\"0\":\n    print(good-bye)\nelif choice ==\"1\":\n    term = input(\"What term do you want me to translate?: \")\n    if term in geek:\n        definition = geek[term]\n        print(\"\\n\", term, \"means\", definition)\nelse:\n    print(\"\\nSorry, I dont know\", term)\nelif choice == \"2\":\n</code></pre>\n\n<p>SyntaxError: invalid syntax</p>\n\n<blockquote>\n  <blockquote>\n    <blockquote>\n      <p>elif choice ==\"2\":</p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n\n<p>SyntaxError: unexpected indent</p>\n\n<blockquote>\n  <blockquote>\n    <blockquote>\n      <p>elif choice ==\"2\":</p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n\n<p>SyntaxError: invalid syntax</p>\n"}, {"tags": ["python", "tkinter"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10474264"}, "is_accepted": false, "score": 0, "last_activity_date": 1539397331, "creation_date": 1539397331, "answer_id": 52788944, "question_id": 52748076, "link": "https://stackoverflow.com/questions/52748076/entry-widget-wont-work-properly-in-a-function-to-call-another-module/52788944#52788944", "title": "Entry Widget wont work properly in a function to call another module", "body": "<p>Your code works fine. Your function returns 'a1' because you never code anything else. </p>\n\n<p>Add some conditions like this:</p>\n\n<pre><code>from tkinter import *\n\nclass App(Frame):\n    def __init__(self, master):\n        super(App, self).__init__(master)\n        self.grid()\n        self.create_widgets()\n\n    def create_widgets(self):\n        self.a1 = 123456\n        self.a2 = 456789\n        self.a3 = 789456\n\n        self.Userin = StringVar()\n\n        self.user_input = Entry(self, insertwidth=0, width=30,\n        textvariable=self.Userin)\n        self.user_input.grid(row=2)\n        self.user_input.insert(0, \"0\")\n\n        self.bttn1 = Button(self, padx = 15, pady = 15, text = \"Call A1\",\n        command = lambda: self.getdata(self.a1))\n        self.bttn1.grid(row = 0, column = 0)\n\n        self.bttn2 = Button(self, padx=15, pady=15, text=\"Call your entry\",\n        command=lambda: self.userd(self.Userin.get()))\n        self.bttn2.grid(row=0, column=1)\n\n        self.label = Label(self,bg = \"white\", padx = 35, pady = 25, text = \"***\")\n        self.label.grid(row = 1)\n\n    def userd(self,xxx):\n        if xxx == \"a1\":\n            self.label.configure(text = self.a1)\n        elif xxx == \"a2\":\n            self.label.configure(text = self.a2)\n        elif xxx == \"a3\":\n            self.label.configure(text = self.a3)\n\n    def getdata(self,row):\n        self.label.configure(text = row)\n\nroot = Tk()\nroot.geometry(\"300x150\")\nApp(root)\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10486125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6311a26bfe9082b566ef106449f1e96e?s=128&d=identicon&r=PG&f=1", "display_name": "Mark C", "link": "https://stackoverflow.com/users/10486125/mark-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539397331, "creation_date": 1539202324, "last_edit_date": 1539260668, "question_id": 52748076, "link": "https://stackoverflow.com/questions/52748076/entry-widget-wont-work-properly-in-a-function-to-call-another-module", "title": "Entry Widget wont work properly in a function to call another module", "body": "<p>I am passing a Entry widget StringVal into a function that looks up what you type against another module. ie a1 = 123456.   when I type \"a1\" into the Entry widget, my function only returns \"a1\" and not its corresponding value of \"123456\".  I dont know how to get the def userd function to configure the label as 123456 rather than a1.</p>\n\n<pre><code>from tkinter import *\n\nclass App(Frame):\n    def __init__(self, master):\n        super(App, self).__init__(master)\n        self.grid()\n        self.create_widgets()\n\n    def create_widgets(self):\n        a1 = 123456\n        a2 = 456789\n        a3 = 789456\n\n        self.Userin = StringVar()\n\n        self.user_input = Entry(self, insertwidth=0, width=30,\n        textvariable=self.Userin)\n        self.user_input.grid(row=2)\n        self.user_input.insert(0, \"0\")\n\n        self.bttn1 = Button(self, padx = 15, pady = 15, text = \"Call A1\",\n        command = lambda: self.getdata(a1))\n        self.bttn1.grid(row = 0, column = 0)\n\n        self.bttn2 = Button(self, padx=15, pady=15, text=\"Call your entry\",\n        command=lambda: self.userd(self.Userin.get()))\n        self.bttn2.grid(row=0, column=1)\n\n        self.label = Label(self,bg = \"white\", padx = 35, pady = 25, text = \"***\")\n        self.label.grid(row = 1)\n\n    def userd(self,xxx):          \n        self.label.configure(text = xxx)\n\n    def getdata(self,row):\n        self.label.configure(text = row)\n\nroot = Tk()\nroot.geometry(\"300x150\")\nApp(root)\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1539202681, "post_id": 52748072, "comment_id": 92420796, "body": "How about using <code>np.stack</code>?"}, {"owner": {"reputation": 65, "user_id": 7833391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9306986474ccad51a4f9a5b492d2968a?s=128&d=identicon&r=PG&f=1", "display_name": "agnivesh", "link": "https://stackoverflow.com/users/7833391/agnivesh"}, "reply_to_user": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1539207434, "post_id": 52748072, "comment_id": 92422672, "body": "@PaulPanzer That worked too."}], "owner": {"reputation": 65, "user_id": 7833391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9306986474ccad51a4f9a5b492d2968a?s=128&d=identicon&r=PG&f=1", "display_name": "agnivesh", "link": "https://stackoverflow.com/users/7833391/agnivesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539203169, "creation_date": 1539202315, "last_edit_date": 1539203169, "question_id": 52748072, "link": "https://stackoverflow.com/questions/52748072/convert-a-pandas-column-of-2d-numpy-arrays-to-a-3d-numpy-array", "title": "Convert a pandas column of 2D numpy arrays to a 3D numpy array", "body": "<p>I have a pandas dataframe which has a row containing x numpy arrays of shape (y, z). I want to read it as a numpy array of shape (x, y, z).</p>\n\n<p><code>df.col.values</code> doesn't work, as it returns an array of 2D arrays, evident from the fact that <code>df.col.values.shape</code> evaluates to <code>(x,)</code></p>\n\n<p>In fact, <code>np.array(df.col).shape</code>, <code>df.col.shape</code> also evaluate to <code>(x,)</code>.<br>\nThe only way I have been able to get this to work is<br>\n<code>np.array([a for a in df.col])</code><br>\nbut this seems more of a hack.</p>\n\n<p>What is the correct way?</p>\n\n<p>Additional Info: I need this because <code>keras.model.fit</code> wants the input shape to be (x, y, z), and doesn't like it any other way.</p>\n"}, {"tags": ["python", "split", "floating-point", "format", "substring"], "comments": [{"owner": {"reputation": 4693, "user_id": 5501536, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/50b9ab14ab8699a3862c14ee48126abe?s=128&d=identicon&r=PG&f=1", "display_name": "chevybow", "link": "https://stackoverflow.com/users/5501536/chevybow"}, "edited": false, "score": 3, "creation_date": 1539202350, "post_id": 52748066, "comment_id": 92420653, "body": "You should look into regex"}, {"owner": {"reputation": 194, "user_id": 10322433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ouTTb.png?s=128&g=1", "display_name": "blueheart", "link": "https://stackoverflow.com/users/10322433/blueheart"}, "edited": false, "score": 1, "creation_date": 1539202512, "post_id": 52748066, "comment_id": 92420722, "body": "this should help: <a href=\"https://docs.python.org/3/library/re.html\" rel=\"nofollow noreferrer\">docs.python.org/3/library/re.html</a>"}, {"owner": {"reputation": 104, "user_id": 1089674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4RLTO.jpg?s=128&g=1", "display_name": "Darkoob12", "link": "https://stackoverflow.com/users/1089674/darkoob12"}, "edited": false, "score": 1, "creation_date": 1539202843, "post_id": 52748066, "comment_id": 92420874, "body": "use this <code>re.match(r&#39;(\\(\\.,\\d\\))|(\\[\\d,\\.\\))&#39;,str)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 361, "user_id": 1177794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79b5a37feac488fc03a3f4d486d284e8?s=128&d=identicon&r=PG", "display_name": "Soghra Gargari", "link": "https://stackoverflow.com/users/1177794/soghra-gargari"}, "edited": false, "score": 0, "creation_date": 1539262557, "post_id": 52748490, "comment_id": 92444199, "body": "Yes, thanks this is exactly what I was looking for. I know to how to check for number of characters in between parenthesis and comma but did not know to how to check if a substring is float."}], "tags": [], "owner": {"reputation": 26, "user_id": 10486247, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-S1Yq6fZ8Z6Q/AAAAAAAAAAI/AAAAAAAAIwc/jzTvkwx1_do/photo.jpg?sz=128", "display_name": "Chain", "link": "https://stackoverflow.com/users/10486247/chain"}, "is_accepted": true, "score": 1, "last_activity_date": 1539208569, "last_edit_date": 1539208569, "creation_date": 1539204137, "answer_id": 52748490, "question_id": 52748066, "link": "https://stackoverflow.com/questions/52748066/in-python-how-to-check-if-a-word-is-compatible-with-a-specific-word-format/52748490#52748490", "title": "In Python, how to check if a word is compatible with a specific word format?", "body": "<p>'\\d*\\.?\\d*' may help you check float.</p>\n\n<p>Try these two regular expressions:</p>\n\n<pre><code>pattern1: ^\\(\\.,\\d*\\.?\\d*\\)$\npattern2: ^\\[\\d*\\.?\\d*\\,\\.\\)$\n</code></pre>\n\n<p>( I assume your example is correct and your description to pattern2 is actually closedbracket float comma dot parenthesis)</p>\n\n<pre><code>import re\nr = '(.,0)'\nif(re.match('^\\(\\.,\\d*\\.?\\d*\\)$',r) is not None):\n    print('matches')\nelif(re.match('^\\[\\d*\\.?\\d*\\,\\.\\)$',r) is not None):\n    print('matches')\n</code></pre>\n"}], "owner": {"reputation": 361, "user_id": 1177794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79b5a37feac488fc03a3f4d486d284e8?s=128&d=identicon&r=PG", "display_name": "Soghra Gargari", "link": "https://stackoverflow.com/users/1177794/soghra-gargari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 1, "closed_date": 1539244266, "accepted_answer_id": 52748490, "answer_count": 1, "score": -2, "last_activity_date": 1604676399, "creation_date": 1539202287, "last_edit_date": 1604676399, "question_id": 52748066, "link": "https://stackoverflow.com/questions/52748066/in-python-how-to-check-if-a-word-is-compatible-with-a-specific-word-format", "closed_reason": "Needs more focus", "title": "In Python, how to check if a word is compatible with a specific word format?", "body": "<p>I have a list of words like my_list = {'(.,0)', '[6,.)', '(b)' , '(,2]'} in Python. Also, I have two predetermined string patterns like below:</p>\n<ul>\n<li><p>Pattrn_1: '/(/./,/a float number/)'</p>\n</li>\n<li><p>Pattrn_2: '/[/float number/,/./)'</p>\n</li>\n</ul>\n<p>For instance, from my_list '(.,0)' matches Pattrn_1 and '[6,.)' matches with Pattrn_2.</p>\n<p>Question: How can I check which word in the list is compatible with any of these predetermined patters??</p>\n"}, {"tags": ["python", "scrapy"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 6059941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d3b85ce9092bcb65fc3b2c47d1563f2?s=128&d=identicon&r=PG&f=1", "display_name": "R.L Le Hanie", "link": "https://stackoverflow.com/users/6059941/r-l-le-hanie"}, "edited": false, "score": 0, "creation_date": 1539204864, "post_id": 52748292, "comment_id": 92421731, "body": "This answer works perfectly and is very simple thanks, however when doing this it displays as scrapy output and stores to mongoDB as it should now, but the moment I export as CSV from mongoDB the [ ] brackets and empty rows are back again, any ideas on why this is happening ?"}, {"owner": {"reputation": 35, "user_id": 6059941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d3b85ce9092bcb65fc3b2c47d1563f2?s=128&d=identicon&r=PG&f=1", "display_name": "R.L Le Hanie", "link": "https://stackoverflow.com/users/6059941/r-l-le-hanie"}, "edited": false, "score": 0, "creation_date": 1539205055, "post_id": 52748292, "comment_id": 92421811, "body": "I have also tried scrapy loaders with &quot;strip&quot; and &quot;join&quot; which has had the same effect, it works as scrapy output and when stored into mongoDB but the moment I export to CSV the problems are back, I had originally thought this was a problem with scrapy but it seems like it&#39;s a problem with mongoDB export ?"}], "tags": [], "owner": {"reputation": 2565, "user_id": 7340948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c4f727ef85a90ec4f5ae954f8718017?s=128&d=identicon&r=PG&f=1", "display_name": "CJR", "link": "https://stackoverflow.com/users/7340948/cjr"}, "is_accepted": true, "score": 0, "last_activity_date": 1539203208, "creation_date": 1539203208, "answer_id": 52748292, "question_id": 52748016, "link": "https://stackoverflow.com/questions/52748016/scrapy-response-uniform-blank-rows-making-it-impossible-to-format-response-outpu/52748292#52748292", "title": "Scrapy response uniform blank rows making it impossible to format response output", "body": "<p>The easiest way to handle an error like this is to catch it and deal with it then (in this case, by just moving on past the blank lines).</p>\n\n<pre><code>class PopularitySpider(Spider):\n    name = \"popularity\"\n    allowed_domains = [\"stackoverflow.com\"]\n    start_urls = [\"https://stackoverflow.com/\"]\n\n    def parse(self, response):\n        popularity = response.xpath('//div[contains(@class, \"question-summary narrow\")]/div')\n        for poppart in popularity:\n            try:\n                item = PopularityItem()\n                item['votes'] = poppart.xpath('div[contains(@class, \"votes\")]//span/text()').extract()[0]\n                item['answers'] = poppart.xpath('div[contains(@class, \"answered\")]//span/text()').extract()[0]\n                item['views'] = poppart.xpath('div[contains(@class, \"views\")]//span/text()').extract()[0]\n            except IndexError:\n                continue\n            yield item\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 6059941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d3b85ce9092bcb65fc3b2c47d1563f2?s=128&d=identicon&r=PG&f=1", "display_name": "R.L Le Hanie", "link": "https://stackoverflow.com/users/6059941/r-l-le-hanie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 52748292, "answer_count": 1, "score": 0, "last_activity_date": 1539203208, "creation_date": 1539202079, "last_edit_date": 1539202525, "question_id": 52748016, "link": "https://stackoverflow.com/questions/52748016/scrapy-response-uniform-blank-rows-making-it-impossible-to-format-response-outpu", "title": "Scrapy response uniform blank rows making it impossible to format response output", "body": "<p>I want to remove the [ ] brackets scrapy adds to all it's output, to do this you simply add [0] at the end of an xpath statement as follows:</p>\n\n<pre><code>'a[@class=\"question-hyperlink\"]/text()').extract()[0]\n</code></pre>\n\n<p>this solves the [ ] problem in some cases but in other cases scrapy returns every second row of output as blank and as such the moment it gets to the second row when using [0] i'm given the error:</p>\n\n<pre><code>Index error: list index out of range\n</code></pre>\n\n<p>How can I prevent scrapy from creating blank rows ? It seems like this is a common problem, but everyone faces this problem when exporting to CSV while for me it's with the scrapy response before exporting as CSV.</p>\n\n<p>Items.py:</p>\n\n<pre><code>import scrapy\nfrom scrapy.item import Item, Field\n\n\nclass QuestionItem(Item):\n    title = Field()\n    url = Field()\n\nclass PopularityItem(Item):\n    votes = Field()\n    answers = Field()\n    views = Field()\n\n\nclass ModifiedItem(Item):\n    lastModified = Field()\n    modName = Field()\n</code></pre>\n\n<p>The spider that doesn't output every second row as blank and thus works with [0]:</p>\n\n<pre><code>from scrapy import Spider\nfrom scrapy.selector import Selector\n\nfrom stack.items import QuestionItem\n\nclass QuestionSpider(Spider):\n    name = \"questions\"\n    allowed_domains = [\"stackoverflow.com\"]\n    start_urls = [\n        \"http://stackoverflow.com/questions?pagesize=50&amp;sort=newest\",\n    ]\n\n    def parse(self, response):\n        questions = Selector(response).xpath('//div[@class=\"summary\"]/h3')\n\n        for question in questions:\n            item = QuestionItem()\n            item['title'] = question.xpath(\n                'a[@class=\"question-hyperlink\"]/text()').extract()[0]\n            item['url'] = question.xpath(\n                'a[@class=\"question-hyperlink\"]/@href').extract()[0]\n            yield item\n</code></pre>\n\n<p>The spider that gives every second row of output as blank:</p>\n\n<pre><code>from scrapy import Spider\nfrom scrapy.selector import Selector\n\nfrom stack.items import PopularityItem\n\n\nclass PopularitySpider(Spider):\n    name = \"popularity\"\n    allowed_domains = [\"stackoverflow.com\"]\n    start_urls = [\n        \"https://stackoverflow.com/\",\n    ]\n\n    def parse(self, response):\n        popularity = response.xpath('//div[contains(@class, \"question-summary narrow\")]/div')\n\n        for poppart in popularity:\n\n            item = PopularityItem()\n            item['votes'] = poppart.xpath(\n                'div[contains(@class, \"votes\")]//span/text()').extract()#[0]\n            item['answers'] = poppart.xpath(\n                'div[contains(@class, \"answered\")]//span/text()').extract()#[0]\n            item['views'] = poppart.xpath(\n                'div[contains(@class, \"views\")]//span/text()').extract()#[0]\n            yield item\n</code></pre>\n\n<p>Pipelines.py</p>\n\n<pre><code>import pymongo\nimport logging\n\nclass StackPipeline(object):\n    def process_item(self, item, spider):\n        return item\n\n\n\nfrom scrapy.conf import settings\nfrom scrapy.exceptions import DropItem\nfrom scrapy import log\n\nclass MongoDBPipeline(object):\n\n\n    def __init__(self):\n\n        connection = pymongo.MongoClient(settings['MONGODB_SERVER'], settings['MONGODB_PORT'])\n        self.db = connection[settings['MONGODB_DB']]\n\n    def process_item(self, item, spider):\n        collection = self.db[type(item).__name__.lower()]\n        logging.info(collection.insert(dict(item)))\n        return item\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "list", "arraylist", "append"], "comments": [{"owner": {"reputation": 8890, "user_id": 4349415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ta4zl.png?s=128&g=1", "display_name": "Mike Scotty", "link": "https://stackoverflow.com/users/4349415/mike-scotty"}, "edited": false, "score": 1, "creation_date": 1539202143, "post_id": 52748003, "comment_id": 92420548, "body": "Please include what you&#39;ve tried and why/how your attempt failed."}, {"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 0, "creation_date": 1539202330, "post_id": 52748003, "comment_id": 92420644, "body": "And please post code that works by copy and pasting and won&#39;t cause a <code>NameError</code>."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 10353700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e859d55bec7c12a9ac35e688e6a56bba?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Pernia", "link": "https://stackoverflow.com/users/10353700/jeff-pernia"}, "edited": false, "score": 0, "creation_date": 1539203689, "post_id": 52748091, "comment_id": 92421244, "body": "I shoulda had made it more clear but thanks I got It now , the code you showed me worked but it only accounts for 2 tuples , which they vary everytime , I shoulda stated this"}, {"owner": {"reputation": 69, "user_id": 10353700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e859d55bec7c12a9ac35e688e6a56bba?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Pernia", "link": "https://stackoverflow.com/users/10353700/jeff-pernia"}, "edited": false, "score": 0, "creation_date": 1539203849, "post_id": 52748091, "comment_id": 92421310, "body": "i did &quot;for bracket in listA: newlist.append([bracket[i][-1] for i in  range(len(bracket))])&quot; and that gave me what i wanted . But you pointed me in the right direction so thank you !"}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "reply_to_user": {"reputation": 69, "user_id": 10353700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e859d55bec7c12a9ac35e688e6a56bba?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Pernia", "link": "https://stackoverflow.com/users/10353700/jeff-pernia"}, "edited": false, "score": 0, "creation_date": 1539204850, "post_id": 52748091, "comment_id": 92421723, "body": "Glad to help :)"}], "tags": [], "owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "is_accepted": true, "score": 0, "last_activity_date": 1539202402, "creation_date": 1539202402, "answer_id": 52748091, "question_id": 52748003, "link": "https://stackoverflow.com/questions/52748003/create-a-list-from-a-list-of-list-of-tuples/52748091#52748091", "title": "create a list from a list of list of tuples", "body": "<p>I have converted you variables <code>A</code>, <code>B</code>, <code>C</code>, <code>D</code> to strings for providing an example output. You can use a single list comprehension then as follows. </p>\n\n<p><strong>Explanation</strong>: You loop over individual sublists using <code>i</code>. Each sublist have two tuples, of which you want the last elements. <code>i[0][-1]</code> gives you the last element of <em>first</em> tuple and <code>i[0][-1]</code> gives you the last element of <em>second</em> tuple,  </p>\n\n<pre><code>listA = [ [(1,2,'A'), (1,3,'B')], [(1,1,'B'),(1,2,'D')], [(1,1,'C'),(1,3,'F')], [(1,3,'D'),(1,5,'F')] ]\nlistB = [[i[0][-1], i[1][-1]] for i in listA]\n</code></pre>\n\n<p>outputs</p>\n\n<pre><code>[['A', 'B'], ['B', 'D'], ['C', 'F'], ['D', 'F']]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "is_accepted": false, "score": 3, "last_activity_date": 1539202489, "creation_date": 1539202489, "answer_id": 52748115, "question_id": 52748003, "link": "https://stackoverflow.com/questions/52748003/create-a-list-from-a-list-of-list-of-tuples/52748115#52748115", "title": "create a list from a list of list of tuples", "body": "<p>You can use the following nested comprehension:</p>\n\n<pre><code>[[y[2] for y in x] for x in listA]\n# [['A', 'B'], ['B', 'D'], ['C', 'F'], ['D', 'F']]\n</code></pre>\n\n<p>The inner comprehension has the added flexibility of working for inner lists of any length.</p>\n"}, {"tags": [], "owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "is_accepted": false, "score": 0, "last_activity_date": 1539203422, "creation_date": 1539203422, "answer_id": 52748339, "question_id": 52748003, "link": "https://stackoverflow.com/questions/52748003/create-a-list-from-a-list-of-list-of-tuples/52748339#52748339", "title": "create a list from a list of list of tuples", "body": "<p>If <code>numpy</code> is allowed you could do something like this:</p>\n\n<pre><code>import numpy as np\n\nlistA = [[(1, 2, 'A'), (1, 3, 'B')], [(1, 1, 'B'), (1, 2, 'D')], [(1, 1, 'C'), (1, 3, 'F')], [(1, 3, 'D'), (1, 5, 'F')]]\nprint(np.array(listA)[:, :, 2].tolist())\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>[['A', 'B'], ['B', 'D'], ['C', 'F'], ['D', 'F']]\n</code></pre>\n\n<p>As an alternative you could also do:</p>\n\n<pre><code>print(np.array(listA)[..., 2].tolist())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4254, "user_id": 10255652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5DDj.jpg?s=128&g=1", "display_name": "vash_the_stampede", "link": "https://stackoverflow.com/users/10255652/vash-the-stampede"}, "is_accepted": false, "score": 0, "last_activity_date": 1539203671, "creation_date": 1539203671, "answer_id": 52748386, "question_id": 52748003, "link": "https://stackoverflow.com/questions/52748003/create-a-list-from-a-list-of-list-of-tuples/52748386#52748386", "title": "create a list from a list of list of tuples", "body": "<p>You can use a condensed expression with <code>list</code> or using list comprehension    </p>\n\n<pre><code>print(list([j[-1] for j in i] for i in lista))\nprint([[j[-1] for j in i] for i in lista])\n</code></pre>\n\n<p>Expaneded explanation:</p>\n\n<pre><code>new = []\nfor i in lista:\n    x = []\n    for j in i:\n        x.append(j[-1])\n    new.append(x)\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 10353700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e859d55bec7c12a9ac35e688e6a56bba?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Pernia", "link": "https://stackoverflow.com/users/10353700/jeff-pernia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 0, "accepted_answer_id": 52748091, "answer_count": 4, "score": 0, "last_activity_date": 1539203671, "creation_date": 1539202028, "question_id": 52748003, "link": "https://stackoverflow.com/questions/52748003/create-a-list-from-a-list-of-list-of-tuples", "title": "create a list from a list of list of tuples", "body": "<p>I know this is probably simple but i'm having a hard time doing it,\nall i'm trying to do make a new list of list  from an existing list of list full of tuples , for example:</p>\n\n<pre><code>listA = [ [(1,2,A), (1,3,B)], [(1,1,B),(1,2,D)], [(1,1,C),(1,3,F], [(1,3,D),(1,5,F)] ]\n</code></pre>\n\n<p>and I want to make a new list to be composed of a list of list of the [2] element (the letters) from the original list.</p>\n\n<p>so my new list would look like :</p>\n\n<pre><code>newList = [ [A,B] , [B,D], [C,F], [D,F] ]\n</code></pre>\n\n<p>I hope this is clear.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1539202104, "post_id": 52747987, "comment_id": 92420532, "body": "Has this question gone through Google translate? Homework dumps without any effort are not appropriate for SO but I&#39;m having a hard time trying to understand what this question is about."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1539202250, "post_id": 52747987, "comment_id": 92420603, "body": "It sounds something like a Monte Carlo simulation"}], "answers": [{"tags": [], "owner": {"reputation": 1264, "user_id": 1194420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ynz8O.png?s=128&g=1", "display_name": "James McCorrie", "link": "https://stackoverflow.com/users/1194420/james-mccorrie"}, "is_accepted": false, "score": 0, "last_activity_date": 1539202546, "creation_date": 1539202546, "answer_id": 52748125, "question_id": 52747987, "link": "https://stackoverflow.com/questions/52747987/i-have-the-following-python-problem-for-school-but-i-dont-even-have-a-clue-whe/52748125#52748125", "title": "I have the following python problem for school, but I don&#39;t even have a clue where to begin with", "body": "<p>Rather than giving you a complete answer... as this is a school project, that would deprive you of some learning. I'll give you some pointers:</p>\n\n<ul>\n<li><p>If you need random numbers between -1 and 1, but random.random() only gives values between 0 and 1. What do you need to do to the random numbers to get the range you need? (One simple way would be to multiply by 2 - resulting in a number between 0 and 2, then subtract by 1, to bring it to -1 to 1)</p></li>\n<li><p>Try pyplot for plotting the graph so you can visualise the answer to check to see if your doing the right thing.</p></li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 10249786, "user_type": "registered", "profile_image": "https://graph.facebook.com/1868587776567951/picture?type=large", "display_name": "Dino Celikovic", "link": "https://stackoverflow.com/users/10249786/dino-celikovic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1539202546, "creation_date": 1539201941, "question_id": 52747987, "link": "https://stackoverflow.com/questions/52747987/i-have-the-following-python-problem-for-school-but-i-dont-even-have-a-clue-whe", "title": "I have the following python problem for school, but I don&#39;t even have a clue where to begin with", "body": "<p>At the origin of the coordinate system we place a circle with radius 1 and a square with radius 1, that is, with page 2.\nThe plane of the circle is \u03c0r2, so \u03c0, and the square of the square is a2, that is, 4. The square of the square covered with the circle is \u03c0 / 4.</p>\n\n<p>Choose two random coordinates within the square, i.e. two random numbers between -1 and 1. The probability that this point lies within the circle is equal to \u03c0 / 4.</p>\n\n<p>We do this a thousand times. There will be around n = 1000 \u00d7 \u03c0 / 4 points within the circle. If they did not know how much it was, they could actually do this experiment; with them we get the upper n, and from this n, if we turn the formula around, we calculate the value of \u03c0.\nWrite a program that draws out 1000 random coordinates within a square, (quietly) counts how much it is calculated in this way within the circle and in the end.</p>\n\n<p>This will help you: if you write from random random * at the beginning of the program, the random () function returns a random number between 0 and 1. How to convert it into numbers between -1 and 1, consider it yourself. You also deal with mathematics yourself.</p>\n\n<p><a href=\"https://i.stack.imgur.com/p7fo0.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}, {"tags": ["python", "numpy", "max", "minimum"], "comments": [{"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 2, "creation_date": 1539201955, "post_id": 52747970, "comment_id": 92420474, "body": "Too confusing explanation"}, {"owner": {"reputation": 206, "user_id": 9709105, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Yod2wn9KrYI/AAAAAAAAAAI/AAAAAAAAAH0/uxxn1DITBKg/photo.jpg?sz=128", "display_name": "Romain Reboulleau", "link": "https://stackoverflow.com/users/9709105/romain-reboulleau"}, "edited": false, "score": 0, "creation_date": 1539202130, "post_id": 52747970, "comment_id": 92420544, "body": "You ask no question"}, {"owner": {"reputation": 1, "user_id": 8569185, "user_type": "registered", "profile_image": "https://graph.facebook.com/1327660537363235/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440 \u041b\u0430\u0441\u043a\u043e\u0440\u0443\u043d\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/8569185/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b0%d0%bd%d0%b4%d1%80-%d0%9b%d0%b0%d1%81%d0%ba%d0%be%d1%80%d1%83%d0%bd%d1%81%d0%ba%d0%b8%d0%b9"}, "edited": false, "score": 0, "creation_date": 1539202992, "post_id": 52747970, "comment_id": 92420934, "body": "I asked the question in title: how can such task be solved using numpy."}, {"owner": {"reputation": 1, "user_id": 8569185, "user_type": "registered", "profile_image": "https://graph.facebook.com/1327660537363235/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440 \u041b\u0430\u0441\u043a\u043e\u0440\u0443\u043d\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/8569185/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b0%d0%bd%d0%b4%d1%80-%d0%9b%d0%b0%d1%81%d0%ba%d0%be%d1%80%d1%83%d0%bd%d1%81%d0%ba%d0%b8%d0%b9"}, "edited": false, "score": 0, "creation_date": 1539203181, "post_id": 52747970, "comment_id": 92421030, "body": "We can make pandas dataframe then, sort values by max and then min and after that get indexes. But i wonder if there are any way to do this using numpy."}], "owner": {"reputation": 1, "user_id": 8569185, "user_type": "registered", "profile_image": "https://graph.facebook.com/1327660537363235/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440 \u041b\u0430\u0441\u043a\u043e\u0440\u0443\u043d\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/8569185/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b0%d0%bd%d0%b4%d1%80-%d0%9b%d0%b0%d1%81%d0%ba%d0%be%d1%80%d1%83%d0%bd%d1%81%d0%ba%d0%b8%d0%b9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539237495, "creation_date": 1539201843, "last_edit_date": 1539237495, "question_id": 52747970, "link": "https://stackoverflow.com/questions/52747970/how-to-get-index-of-minimum-value-of-all-max-values-sliced-from-another-list-usi", "title": "How to get index of minimum value of all max_values sliced from another list using numpy", "body": "<p>I have two arrays</p>\n\n<pre><code>B = [[250, 100], [200, 120], [150, 150], [150, 80], [100, 150], [150, 250]]\nA = [[1, 1], [1, 0.5], [0.5, 0.5], [0.5, 1], [0.8, 0.3], [0.5, 0.9]]\n</code></pre>\n\n<p>first step is to recieve items with all max [0] values in A array and their indexes</p>\n\n<pre><code>a0 = [[1, 1], [1, 0.5]]\nmax_a_index_0 = [0, 1]\n</code></pre>\n\n<p>then we get items from B array by indexes of recieved max values </p>\n\n<pre><code>b0 = [[250, 100], [200,120]]\n</code></pre>\n\n<p>after that we select the item with minimum value and get it index from original B array.</p>\n\n<pre><code>max_b0_index_0 = 1\n</code></pre>\n\n<p>The same proccess with [1] elements:</p>\n\n<pre><code>b1 = [[250, 100], [150, 80]]\na1 = [[1, 1], [0.5, 1]]\nmax_a_index_1 = [0, 3]\nmax_b0_index_1 = 3\n</code></pre>\n\n<p>Update: Here is my code. Is there better way to do such calculations?</p>\n\n<pre><code>for n in range(2):\n    a_max_0 = np.argwhere(np.array(A)[:,n] == np.amax(np.array(A)[:,n])).flatten().tolist()\n    b_a_max_0 = [B[i] for i in range(len(A)) if i in a_max_0]\n    b_min_0 = np.argwhere(np.array(b_a_max_0)[:,n] == np.amin(np.array(b_a_max_0)[:,n])).flatten().tolist()\n    a_b_max_min_index = [a_max_0[i] for i in range(len(a_max_0)) if i in b_min_0]\n    print(a_b_max_min_index)\n</code></pre>\n"}, {"tags": ["python", "pandas", "odbc", "pyodbc"], "comments": [{"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 1, "creation_date": 1539204997, "post_id": 52747961, "comment_id": 92421789, "body": "Are you certain query string looks like that after your <code>create_query_string</code> call? This appears to be DB2 syntax. Please tag your RDBMS. Also, we need to see the data types of all fields. Likely pyodbc does not support for a specific field(s)."}, {"owner": {"reputation": 9, "user_id": 10431285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cabdae23c7a249fc7dc94c319a3dc42b?s=128&d=identicon&r=PG&f=1", "display_name": "JustinT", "link": "https://stackoverflow.com/users/10431285/justint"}, "reply_to_user": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1539343125, "post_id": 52747961, "comment_id": 92478292, "body": "@Parfait, Yes I am.  When I take out the nested portion, it works fine.  I am trying to replicate the exact script I have in R.  RODBC seems to handle the process fine, and I was trying to figure out why I can&#39;t seem to get it to work exactly in Python."}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1539368220, "post_id": 52747961, "comment_id": 92491413, "body": "That is very interesting as this is an ODBC error and not Python error and likely you use same driver in both R and Python ODBC connections. Are you reading the query from file also in R? Please pastebin or Github gist that R code you claim is <i>exact script</i> like this."}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1539368228, "post_id": 52747961, "comment_id": 92491423, "body": "Also, what is <code>textwrap</code>? What is <code>conn</code>? Please make sure your code is fully compilable with all objects assigned. Check encoding of your script as there may be a character(s) causing issues. You can edit your post (see link below question)."}, {"owner": {"reputation": 9, "user_id": 10431285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cabdae23c7a249fc7dc94c319a3dc42b?s=128&d=identicon&r=PG&f=1", "display_name": "JustinT", "link": "https://stackoverflow.com/users/10431285/justint"}, "reply_to_user": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1539608201, "post_id": 52747961, "comment_id": 92551829, "body": "Hi Parfait, thanks for looking into this.  It ended up being the SQL code was the result of the issue.  In the two case statements, Python was reading in the results with varying types, causing a DECFLOAT error.  Thanks again."}], "owner": {"reputation": 9, "user_id": 10431285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cabdae23c7a249fc7dc94c319a3dc42b?s=128&d=identicon&r=PG&f=1", "display_name": "JustinT", "link": "https://stackoverflow.com/users/10431285/justint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 582, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539204737, "creation_date": 1539201789, "last_edit_date": 1539204737, "question_id": 52747961, "link": "https://stackoverflow.com/questions/52747961/pyodbc-sql-type-error-when-reading-query-in-pandas", "title": "PyODBC SQL type error when reading query in Pandas", "body": "<p>Looking for some help with a specific error when I write out from a <code>pyodbc</code> connection. How do I fix the error:</p>\n\n<blockquote>\n  <p>ODBC SQL type -360 is not yet supported. column-index=1 type=-360', 'HY106' error from PYODBC</p>\n</blockquote>\n\n<p>Here is my code:</p>\n\n<pre><code>import pyodbc\nimport pandas as pd\nimport sqlparse\n\n## Function created to read SQL Query\ndef create_query_string(sql_full_path):\n    with open(sql_full_path, 'r') as f_in:\n        lines = f_in.read()\n\n    # remove any common leading whitespace from every line\n    query_string = textwrap.dedent(\"\"\"{}\"\"\".format(lines))\n    ## remove comments from SQL Code\n    query_string = sqlparse.format(query_string, strip_comments=True)\n\n    return query_string\n\nquery_string = create_query_string(\"Bad Code from R.sql\")\n\n## initializes the connection string\ncurs = conn.cursor()\n\ndf=pd.read_sql(query_string,conn)\n\ndf.to_csv(\"TestSql.csv\",index=None)\n</code></pre>\n\n<p>We are using the following SQL code in query string:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT loss_yr_qtr_cd, \n       CASE \n         WHEN loss_qtr_cd &lt;= 2 THEN loss_yr_num \n         ELSE loss_yr_num + 1 \n       END                    AS LOSS_YR_ENDING, \n       snap_yr_qtr_cd, \n       CASE \n         WHEN snap_qtr_cd &lt;= 2 THEN snap_yr_num \n         ELSE snap_yr_num + 1 \n       END                    AS CAL_YR_ENDING, \n       cur_ctstrph_loss_ind, \n       clm_symb_grp_cd, \n       adbfdb_pol_form_nm, \n       risk_st_nm, \n       wrt_co_nm, \n       wrt_co_part_cd, \n       src_of_bus_cd, \n       rt_zip_dlv_ofc_cd, \n       cur_rst_rt_terr_cd, \n       Sum(xtra_cntrc_py_amt) AS XTRA_CNTRC_PY_AMT \nFROM   (SELECT DT.loss_yr_qtr_cd, \n               DT.loss_qtr_cd, \n               DT.loss_yr_num, \n               SNAP.snap_yr_qtr_cd, \n               SNAP.snap_qtr_cd, \n               SNAP.snap_yr_num, \n               CLM.cur_ctstrph_loss_ind, \n               CLM.clm_symb_grp_cd, \n               POL_SLCT.adbfdb_pol_form_nm, \n               POL_SLCT.adbfdb_pol_form_cd, \n               CVR.bsic_cvr_ind, \n               POL_SLCT.priv_pass_ind, \n               POL_SLCT.risk_st_nm, \n               POL_SLCT.wrt_co_nm, \n               POL_SLCT.wrt_co_part_cd, \n               POL_SLCT.src_of_bus_cd, \n               TERR.rt_zip_dlv_ofc_cd, \n               TERR.cur_rst_rt_terr_cd, \n               LOSS.xtra_cntrc_py_amt \n        FROM   ahshdm1d.vmaloss_day_dt_dim DT, \n               ahshdm1d.vmasnap_yr_mo_dim SNAP, \n               ahshdm1d.tmaaclm_dim CLM, \n               ahshdm1d.tmaapol_slct_dim POL_SLCT, \n               ahshdm1d.tmaacvr_dim CVR, \n               ahshdm1d.tmaart_terr_dim TERR, \n               ahshdm1d.tmaaloss_fct LOSS, \n               ahshdm1d.tmaaprod_bus_dim BUS \n        WHERE  SNAP.snap_yr_qtr_cd BETWEEN '20083' AND '20182' \n               AND TRIM(POL_SLCT.adbfdb_lob_cd) = 'A' \n               AND CVR.bsic_cvr_ind = 'Y' \n               AND POL_SLCT.priv_pass_ind = 'Y' \n               AND POL_SLCT.adbfdb_pol_form_cd = 'V' \n               AND POL_SLCT.src_of_bus_cd NOT IN ( 'ITC', 'INV' ) \n               AND LOSS.xtra_cntrc_py_amt &gt; 0 \n               AND LOSS.loss_day_dt_id = DT.loss_day_dt_dim_id \n               AND LOSS.cvr_dim_id = CVR.cvr_dim_id \n               AND LOSS.pol_slct_dim_id = POL_SLCT.pol_slct_dim_id \n               AND LOSS.rt_terr_dim_id = TERR.rt_terr_dim_id \n               AND LOSS.prod_bus_dim_id = BUS.prod_bus_dim_id \n               AND LOSS.clm_dim_id = CLM.clm_dim_id \n               AND LOSS.snap_yr_mo_dt_id = SNAP.snap_yr_mo_dt_id) AS TABLE1 \nGROUP  BY loss_yr_qtr_cd, \n          loss_qtr_cd, \n          loss_yr_num, \n          snap_yr_qtr_cd, \n          snap_qtr_cd, \n          snap_yr_num, \n          cur_ctstrph_loss_ind, \n          clm_symb_grp_cd, \n          adbfdb_pol_form_nm, \n          risk_st_nm, \n          wrt_co_nm, \n          wrt_co_part_cd, \n          src_of_bus_cd, \n          rt_zip_dlv_ofc_cd, \n          cur_rst_rt_terr_cd \nFOR FETCH only \n</code></pre>\n\n<p>Just looking how to properly write out the database.</p>\n\n<p>Thanks,</p>\n\n<p>Justin</p>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 119, "user_id": 539060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qex1W.png?s=128&g=1", "display_name": "Moti Hamo", "link": "https://stackoverflow.com/users/539060/moti-hamo"}, "edited": false, "score": 0, "creation_date": 1552906774, "post_id": 52747947, "comment_id": 97174547, "body": "Did you solved the problem?"}], "answers": [{"tags": [], "owner": {"reputation": 972, "user_id": 10111931, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IVMlr7GdQao/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7r1TFfegYkjHak2p_n5Qv4tQV0ntA/mo/photo.jpg?sz=128", "display_name": "kvish", "link": "https://stackoverflow.com/users/10111931/kvish"}, "is_accepted": true, "score": 5, "last_activity_date": 1539202235, "creation_date": 1539202235, "answer_id": 52748056, "question_id": 52747947, "link": "https://stackoverflow.com/questions/52747947/tensorflow-read-file-does-nothing/52748056#52748056", "title": "Tensorflow read_file() does nothing", "body": "<p>Tensorflow creates a computation graph which should then be evaluated. What you see over there in the result is the op that is created. You need to define a Session object to get the results of your operations.</p>\n\n<pre><code>dir_path = os.path.dirname(os.path.realpath(__file__))\nfilename = dir_path + '/images/cat/cat1.jpg'\nimage_file = tf.read_file(filename)\nimage_decoded = tf.image.decode_jpeg(image_file, channels=3)\nwith tf.Session() as sess:\n     f, img = sess.run([image_file, image_decoded])\n     print(f)\n     print(img)\n</code></pre>\n\n<p>Check out this <a href=\"https://www.tensorflow.org/guide/#low_level_apis\" rel=\"noreferrer\">tensorflow</a> resource to help you further understand!</p>\n"}, {"tags": [], "owner": {"reputation": 94, "user_id": 11381722, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3arZRz-UFjc/AAAAAAAAAAI/AAAAAAAAABA/xqtGFvyTn9Y/photo.jpg?sz=128", "display_name": "Joocheol Kim", "link": "https://stackoverflow.com/users/11381722/joocheol-kim"}, "is_accepted": false, "score": 4, "last_activity_date": 1555725365, "creation_date": 1555725365, "answer_id": 55769602, "question_id": 52747947, "link": "https://stackoverflow.com/questions/52747947/tensorflow-read-file-does-nothing/55769602#55769602", "title": "Tensorflow read_file() does nothing", "body": "<p>That was one big obstacle when we first tried to use Tensorflow.</p>\n\n<p>Now, Tensorflow team has made a solution.</p>\n\n<pre><code>import tensorflow as tf\ntf.enable_eager_execution()\n</code></pre>\n\n<p>Run the above two lines at the very beginning of your program.</p>\n\n<p>Then your print functions will produce something like the followings.</p>\n\n<pre><code>&lt;tf.Tensor: id=15, shape=(), dtype=string, numpy=b'\\xff\\xd8\\xff\\xe0\\x00\\x10JFIF\\x00\\x01\\x01\\x00\\x00\\\n&lt;tf.Tensor: id=17, shape=(747, 1024, 3), dtype=uint8, numpy=\narray([[[ 0,  0,  0],\n        [ 0,  0, \n</code></pre>\n\n<p>Tensorflow team calls it eager execution. Now we don't need to run the tf.Session to see what are inside tensors.</p>\n"}], "owner": {"reputation": 518, "user_id": 10486207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70c37f72ed7bd4bde1524f41f385ee46?s=128&d=identicon&r=PG", "display_name": "Dirk Hoekstra", "link": "https://stackoverflow.com/users/10486207/dirk-hoekstra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3979, "favorite_count": 0, "accepted_answer_id": 52748056, "answer_count": 2, "score": 3, "last_activity_date": 1555725365, "creation_date": 1539201746, "question_id": 52747947, "link": "https://stackoverflow.com/questions/52747947/tensorflow-read-file-does-nothing", "title": "Tensorflow read_file() does nothing", "body": "<p>I am trying to read and decode an image file using Tensorflow. I have the following code:</p>\n\n<pre><code>dir_path = os.path.dirname(os.path.realpath(__file__))\nfilename = dir_path + '/images/cat/cat1.jpg'\nimage_file = tf.read_file(filename)\nimage_decoded = tf.image.decode_jpeg(image_file, channels=3)\n\nprint(image_file)\nprint(image_decoded)\n</code></pre>\n\n<p>This results in the following output:</p>\n\n<p><code>Tensor(\"ReadFile:0\", shape=(), dtype=string)\nTensor(\"DecodeJpeg:0\", shape=(?, ?, 3), dtype=uint8)</code></p>\n\n<p>It appears as if the file is not read at all by Tensorflow. However I could not find any error messages indicating that something went wrong. I don't know how I can resolve this, any help would be greatly appreciated!</p>\n"}, {"tags": ["python", "python-3.x", "postgresql", "asyncpg"], "comments": [{"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 1, "creation_date": 1539202172, "post_id": 52747946, "comment_id": 92420561, "body": "<code>await</code> is only valid inside a coroutine function (<code>async</code> function). And these two keywords were introduced with python 3.5, so you have to use python 3.5 or later."}, {"owner": {"reputation": 59, "user_id": 10118392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ba8709d487a47172bdf174cc3beb19e?s=128&d=identicon&r=PG&f=1", "display_name": "varham", "link": "https://stackoverflow.com/users/10118392/varham"}, "reply_to_user": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1539202227, "post_id": 52747946, "comment_id": 92420595, "body": "I tried to use str() but nothing has changed"}, {"owner": {"reputation": 59, "user_id": 10118392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ba8709d487a47172bdf174cc3beb19e?s=128&d=identicon&r=PG&f=1", "display_name": "varham", "link": "https://stackoverflow.com/users/10118392/varham"}, "reply_to_user": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1539202313, "post_id": 52747946, "comment_id": 92420634, "body": "Haken, thank you a lot, the problem was in miss of async before function name. I need to be more attentive"}], "owner": {"reputation": 59, "user_id": 10118392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ba8709d487a47172bdf174cc3beb19e?s=128&d=identicon&r=PG&f=1", "display_name": "varham", "link": "https://stackoverflow.com/users/10118392/varham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539202164, "creation_date": 1539201730, "last_edit_date": 1539202164, "question_id": 52747946, "link": "https://stackoverflow.com/questions/52747946/why-i-am-getting-an-error-when-i-try-to-get-a-row-from-the-database-in-python", "title": "Why I am getting an error when I try to get a row from the database in Python?", "body": "<p>I need to get a row from database with a needed parameter. I'm using asycpg to work with Postgresql\nHere is my code for this:</p>\n\n<pre><code>row = await connection.fetchrow('SELECT * FROM ' + self.game_name +' WHERE full_url = $1', full_url)\n</code></pre>\n\n<p>When I launch my script, I get this error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Mnil2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Mnil2.png\" alt=\"enter image description here\"></a></p>\n\n<p>What is the problem? P.S I'm using python3</p>\n"}, {"tags": ["python", "python-3.x", "pyqt5", "qtablewidget"], "answers": [{"comments": [{"owner": {"reputation": 1282, "user_id": 1532602, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/X547l.png?s=128&g=1", "display_name": "Elcid_91", "link": "https://stackoverflow.com/users/1532602/elcid-91"}, "edited": false, "score": 0, "creation_date": 1539255736, "post_id": 52749746, "comment_id": 92439962, "body": "Brilliant.  Thanks azalea.  I didn&#39;t realize that changing the color would also cause the signal to emit again.  Thanks for your help!"}], "tags": [], "owner": {"reputation": 7908, "user_id": 1292238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b41e8dc5fb7440e261335294cd11b35?s=128&d=identicon&r=PG", "display_name": "azalea", "link": "https://stackoverflow.com/users/1292238/azalea"}, "is_accepted": true, "score": 2, "last_activity_date": 1539211248, "creation_date": 1539211248, "answer_id": 52749746, "question_id": 52747936, "link": "https://stackoverflow.com/questions/52747936/pyqt5-qtablewidget-signal-connector-called-twice/52749746#52749746", "title": "PyQt5 QTableWidget signal connector called twice", "body": "<p>This is the expected behavior, because in</p>\n\n<pre><code>def update_phone_table(self,item):\n    print(item.text())\n    item.setForeground(QColor(255,0,0))\n</code></pre>\n\n<p><code>item.setForeground(QColor(255,0,0))</code> changes the item, so <code>itemChanged()</code> is emitted again.\nIf you comment out <code>item.setForeground(QColor(255,0,0))</code>, you will see <code>print(item.text())</code> is printed only once.</p>\n\n<p>If you insist that \"the update_phone_table method called (once) when a QTableViewItem is edited\", you can block the signal like this:</p>\n\n<pre><code>def update_phone_table(self,item):\n    print(item.text())\n    self.tbl_phone_numbers.blockSignals(True)\n    item.setForeground(QColor(255,0,0))\n    self.tbl_phone_numbers.blockSignals(False)\n</code></pre>\n"}], "owner": {"reputation": 1282, "user_id": 1532602, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/X547l.png?s=128&g=1", "display_name": "Elcid_91", "link": "https://stackoverflow.com/users/1532602/elcid-91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 52749746, "answer_count": 1, "score": 0, "last_activity_date": 1539212857, "creation_date": 1539201687, "last_edit_date": 1539212857, "question_id": 52747936, "link": "https://stackoverflow.com/questions/52747936/pyqt5-qtablewidget-signal-connector-called-twice", "title": "PyQt5 QTableWidget signal connector called twice", "body": "<p>I have the following code that populates a QTableWidget:</p>\n\n<pre><code> def populate_phone_table(self):\n        dataRows=[\"Office\",\"Fax\",\"Mobile\",\"Other\"]\n        self.tbl_phone_numbers.setRowCount(4)\n        self.tbl_phone_numbers.setColumnCount(2)\n        for ndx,value in enumerate(dataRows):\n            item = QTableWidgetItem(value)\n            item.setFlags(Qt.ItemIsEditable)\n            item.setForeground(QColor(0,0,0))\n            self.tbl_phone_numbers.setItem(ndx,0,item)\n            item = QTableWidgetItem(\"\")\n            self.tbl_phone_numbers.setItem(ndx, 1, item)\n        self.tbl_phone_numbers.verticalHeader().hide()\n        self.tbl_phone_numbers.resizeRowsToContents()\n        self.tbl_phone_numbers.horizontalHeader().setSectionResizeMode(1,QHeaderView.Stretch)\n        self.tbl_phone_numbers.horizontalHeader().hide()\n        self.tbl_phone_numbers.itemChanged.connect(self.update_phone_table)\n\n    def update_phone_table(self,item):\n        print(item.text())\n        item.setForeground(QColor(255,0,0))\n</code></pre>\n\n<p>The problem I am running into is when I edit a column, the connector is being called twice.  I'm not sure if it's the signal firing twice, this is be design or I'm not using the correct signal.  Essesntially, I need the <code>update_phone_table</code> method called (once) when a QTableViewItem is edited. </p>\n"}, {"tags": ["python", "g2o"], "answers": [{"comments": [{"owner": {"reputation": 1778, "user_id": 5698740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faee64fe3fa6b806a89f84492ba6c431?s=128&d=identicon&r=PG&f=1", "display_name": "clmno", "link": "https://stackoverflow.com/users/5698740/clmno"}, "edited": false, "score": 0, "creation_date": 1539202273, "post_id": 52747942, "comment_id": 92420616, "body": "Quick question: When I add it to my PYTHONPATH will I face any issue when working on a different python env?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 1778, "user_id": 5698740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faee64fe3fa6b806a89f84492ba6c431?s=128&d=identicon&r=PG&f=1", "display_name": "clmno", "link": "https://stackoverflow.com/users/5698740/clmno"}, "edited": false, "score": 0, "creation_date": 1539207463, "post_id": 52747942, "comment_id": 92422680, "body": "You shouldn&#39;t AFAIK."}], "tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": false, "score": 1, "last_activity_date": 1539201722, "creation_date": 1539201722, "answer_id": 52747942, "question_id": 52747902, "link": "https://stackoverflow.com/questions/52747902/python-import-successful-in-one-terminal-but-fails-in-another/52747942#52747942", "title": "python import successful in one terminal but fails in another", "body": "<p>If you installed the package locally, you need to set <code>PYTHONPATH</code>. Seems like it's not set properly.</p>\n"}, {"comments": [{"owner": {"reputation": 1778, "user_id": 5698740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faee64fe3fa6b806a89f84492ba6c431?s=128&d=identicon&r=PG&f=1", "display_name": "clmno", "link": "https://stackoverflow.com/users/5698740/clmno"}, "edited": false, "score": 0, "creation_date": 1539203109, "post_id": 52748001, "comment_id": 92420993, "body": "Hey, quick question: When I add the PYTHONPATH I&#39;m unable to add the other modules (cv2, numpy, etc). It seems the original PATH has been lost. How do I append into the original PATH or how do I fix this now to include the other modules?"}, {"owner": {"reputation": 64, "user_id": 8919086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92e643730e7969c75fec76f7171ca1c8?s=128&d=identicon&r=PG", "display_name": "KhanageRush", "link": "https://stackoverflow.com/users/8919086/khanagerush"}, "reply_to_user": {"reputation": 1778, "user_id": 5698740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faee64fe3fa6b806a89f84492ba6c431?s=128&d=identicon&r=PG&f=1", "display_name": "clmno", "link": "https://stackoverflow.com/users/5698740/clmno"}, "edited": false, "score": 0, "creation_date": 1539204603, "post_id": 52748001, "comment_id": 92421614, "body": "So this depends on how you installed those libraries. I think if you installed those with pip then they should be added to <code>&#47;usr&#47;lib&#47;python2.7&#47;</code>. Check to see if numpy and cv2 are in those directories, in which case change the export to: export PYTHONPATH=$PYTHONPATH:path/to/g2opy:/usr/lib/python2.7  If they weren&#39;t installed using pip then you need to find where they have been installed and add those paths to PYTHONPATH. Generally it is not a good idea to manually install packages using build_make. Always try to use pip if you can (although it seems g2opy does not have a pip binding)."}, {"owner": {"reputation": 64, "user_id": 8919086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92e643730e7969c75fec76f7171ca1c8?s=128&d=identicon&r=PG", "display_name": "KhanageRush", "link": "https://stackoverflow.com/users/8919086/khanagerush"}, "reply_to_user": {"reputation": 1778, "user_id": 5698740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faee64fe3fa6b806a89f84492ba6c431?s=128&d=identicon&r=PG&f=1", "display_name": "clmno", "link": "https://stackoverflow.com/users/5698740/clmno"}, "edited": false, "score": 0, "creation_date": 1539205360, "post_id": 52748001, "comment_id": 92421938, "body": "If you find that nothing is working with PYTHONPATH set, you can always just remove it from .bashrc and open a new terminal window. Another alternative is to just move the g2opy library to that /usr/lib/python2.7 directory (or whichever version of Python you are using), and you should be able to import it then."}], "tags": [], "owner": {"reputation": 64, "user_id": 8919086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92e643730e7969c75fec76f7171ca1c8?s=128&d=identicon&r=PG", "display_name": "KhanageRush", "link": "https://stackoverflow.com/users/8919086/khanagerush"}, "is_accepted": true, "score": 2, "last_activity_date": 1539202011, "creation_date": 1539202011, "answer_id": 52748001, "question_id": 52747902, "link": "https://stackoverflow.com/questions/52747902/python-import-successful-in-one-terminal-but-fails-in-another/52748001#52748001", "title": "python import successful in one terminal but fails in another", "body": "<p>In the second terminal, you are running Python in a different directory compared to the first terminal. This suggests that the library you built is not in the Python path. It worked in the first terminal because the g2o library is in the directory where you are currently running Python. As Matthieu suggested, add \"~/OpenSource/python/g2opy\" to your <code>PYTHONPATH</code> environment variable.</p>\n\n<p>In ~/.bashrc, add:</p>\n\n<pre><code>export PYTHONPATH=$PYTHONPATH:path/to/g2opy\n</code></pre>\n\n<p>then run <code>source ~/.bashrc</code> to update the environment variable in the current path.</p>\n"}], "owner": {"reputation": 1778, "user_id": 5698740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faee64fe3fa6b806a89f84492ba6c431?s=128&d=identicon&r=PG&f=1", "display_name": "clmno", "link": "https://stackoverflow.com/users/5698740/clmno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 804, "favorite_count": 0, "accepted_answer_id": 52748001, "answer_count": 2, "score": 0, "last_activity_date": 1539202011, "creation_date": 1539201596, "question_id": 52747902, "link": "https://stackoverflow.com/questions/52747902/python-import-successful-in-one-terminal-but-fails-in-another", "title": "python import successful in one terminal but fails in another", "body": "<p>I downloaded and installed (build + make) a cython package, <a href=\"http://github.com/uoip/g2opy\" rel=\"nofollow noreferrer\">g2opy</a> successfully. And when I tried checking if everything went well, I get this:</p>\n\n<pre><code>(cv) clmno@machine:~/OpenSource/python/g2opy$ python\nPython 3.4.5 |Continuum Analytics, Inc.| (default, Jul  2 2016, 17:47:47) \n[GCC 4.4.7 20120313 (Red Hat 4.4.7-1)] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import g2o\n&gt;&gt;&gt; import numpy\n&gt;&gt;&gt; import cv2\n</code></pre>\n\n<p>So, I assume everything is fine and opened another terminal window. And tried importing the same module, but failed:</p>\n\n<pre><code>(cv) clmno@machine:~$ python\nPython 3.4.5 |Continuum Analytics, Inc.| (default, Jul  2 2016, 17:47:47) \n[GCC 4.4.7 20120313 (Red Hat 4.4.7-1)] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import g2o\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nImportError: No module named 'g2o'\n</code></pre>\n\n<p>Has this to do with the shared library (.so file)? If it was successfully imported, why would it fail the next time?</p>\n"}, {"tags": ["python", "discord", "discord.py"], "answers": [{"tags": [], "owner": {"reputation": 158, "user_id": 10466743, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7sdEpTQTkWQ/AAAAAAAAAAI/AAAAAAAAAm4/kRMWIgxNUiw/photo.jpg?sz=128", "display_name": "Lucas", "link": "https://stackoverflow.com/users/10466743/lucas"}, "is_accepted": false, "score": 1, "last_activity_date": 1539210419, "last_edit_date": 1539210419, "creation_date": 1539204195, "answer_id": 52748499, "question_id": 52747855, "link": "https://stackoverflow.com/questions/52747855/how-do-i-get-all-user-input-as-a-string-with-my-discord-bot-after-they-type-a-ce/52748499#52748499", "title": "How do I get all user input as a string with my discord bot after they type a certain command?", "body": "<p>A <a href=\"https://discordpy.readthedocs.io/en/rewrite/ext/commands/commands.html#keyword-only-arguments\" rel=\"nofollow noreferrer\">feature of discord.py's commands extension framework</a> makes this easy </p>\n\n<pre><code>@bot.command(pass_context=True)\nasync def loot(ctx,*,message):\n    await bot.say(message)\n</code></pre>\n\n<p>If you notice the <code>*</code>, it tells the library to put everything the user types after it into <code>message</code> as a string.</p>\n"}], "owner": {"reputation": 117, "user_id": 10466773, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Wspc24VOyrk/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVCL_Z1_FYfetKbhyMBjERdKhG0xw/mo/photo.jpg?sz=128", "display_name": "Taerpe", "link": "https://stackoverflow.com/users/10466773/taerpe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2413, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539210419, "creation_date": 1539201403, "last_edit_date": 1539201603, "question_id": 52747855, "link": "https://stackoverflow.com/questions/52747855/how-do-i-get-all-user-input-as-a-string-with-my-discord-bot-after-they-type-a-ce", "title": "How do I get all user input as a string with my discord bot after they type a certain command?", "body": "<p>I have a discord bot made with python. I want it to retrieve everything typed after a user types the !loot command, and then store the number given in a text file based on the string/fruit given.</p>\n\n<p>For example, if someone types !loot 100 apples, 200 oranges, 300 plums, I would get the user input \"100 apples, 200 oranges, 300 plums\" in python as a string.</p>\n\n<p>My idea after getting this string is to split the string based on commas into a list,so the list would look like [100 apples, 200 oranges, 300 plums]. After this I could check if the keyword matches a text file and if it does extract number and put it in the file.</p>\n\n<p>I tried </p>\n\n<pre><code>async def loot(ctx, message):\n    messagelist = [x.strip() for x in message.split(',')]\n    await bot.say(messagelist)\n</code></pre>\n\n<p>but the bot only gives the first part,which would be [100] in the above example.</p>\n\n<p>tldr: take multiple item/number pairs separated by commas and put each number in a different text file based on if the items name matches the file name.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 7436, "user_id": 5514476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP6t0.jpg?s=128&g=1", "display_name": "DJK", "link": "https://stackoverflow.com/users/5514476/djk"}, "edited": false, "score": 0, "creation_date": 1539201600, "post_id": 52747834, "comment_id": 92420297, "body": "<code>df.cumsum()</code>???"}, {"owner": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "edited": false, "score": 0, "creation_date": 1539201655, "post_id": 52747834, "comment_id": 92420324, "body": "It&#39;s a little unclear what you mean by &quot;add these values to something outside the for loop&quot;.  Can you provide your expected output, and code for what that &quot;something&quot; would look like?"}, {"owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "edited": false, "score": 0, "creation_date": 1539202062, "post_id": 52747834, "comment_id": 92420517, "body": "Not sure what do you mean by &#39;sum increasing each time the for loop runs&#39;. Can you show the final output that you want to write to csv?"}, {"owner": {"reputation": 573, "user_id": 7748514, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Dy0VE.png?s=128&g=1", "display_name": "Liquidity", "link": "https://stackoverflow.com/users/7748514/liquidity"}, "reply_to_user": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "edited": false, "score": 0, "creation_date": 1539202187, "post_id": 52747834, "comment_id": 92420573, "body": "@andrew_reece Added, I hope that helps!"}, {"owner": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "edited": false, "score": 0, "creation_date": 1539202511, "post_id": 52747834, "comment_id": 92420720, "body": "I&#39;m still a little confused.  Are you saying that you have a for loop, and for each iteration you want to add the column-wise sums of <code>testdf</code> to a running sum?  So the same values are added to separate running totals for <code>a</code>, <code>b</code>, and <code>c</code> for every iteration?  If so, why not just multiply the column sums times the iteration length and store that?  Why do you need to perform <code>sum()</code> in each loop?  And how do you get to <code>8, 5, 8</code> for your final output?  Why is <code>b</code> not increased?  Try to provide as close as possible to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  As is, there&#39;s not enough information to give a precise answer."}, {"owner": {"reputation": 573, "user_id": 7748514, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Dy0VE.png?s=128&g=1", "display_name": "Liquidity", "link": "https://stackoverflow.com/users/7748514/liquidity"}, "reply_to_user": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "edited": false, "score": 0, "creation_date": 1539203029, "post_id": 52747834, "comment_id": 92420945, "body": "@andrew_reece I should have been more clear, each time the for loop runs new values are generated for the columns <code>a</code>, <code>b</code>, <code>c</code>, etc. I&#39;m having difficulty coming up with a minimal example, basically my code runs through chunks of a massive df and sums the columns for each chunk in a particular way. The df is so big that I have to sum each chunk individually, but I&#39;m not sure how to represent that in my question in a minimal way."}, {"owner": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "edited": false, "score": 0, "creation_date": 1539203300, "post_id": 52747834, "comment_id": 92421087, "body": "Ok, thanks for clarifying.  See my answer, I think I understand what you&#39;re going for now."}], "answers": [{"tags": [], "owner": {"reputation": 154, "user_id": 9067271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74824d2cb6faf9226e0a2775943812b2?s=128&d=identicon&r=PG&f=1", "display_name": "misterflister", "link": "https://stackoverflow.com/users/9067271/misterflister"}, "is_accepted": false, "score": 0, "last_activity_date": 1539203349, "last_edit_date": 1539203349, "creation_date": 1539203038, "answer_id": 52748246, "question_id": 52747834, "link": "https://stackoverflow.com/questions/52747834/pandas-and-python-saving-result-of-sum-outside-of-for-loop/52748246#52748246", "title": "Pandas and Python: Saving result of .sum() outside of for loop", "body": "<p>So, you have a loop that calls various parts of the data frame and produces<code>sumtest</code> each time it runs?</p>\n\n<p>If so, within each loop, you can create a dict out of the sumtest, then use Counter on that dict, and then add it to a dict defined outside of the loop, to which the loop continually adds.</p>\n\n<p>Here's how it works inside what you've posted above, if I just duplicate your dataframe into a second dictionary, and add those two together:</p>\n\n<pre><code>import pandas as pd\nfrom collections import Counter\ntestdf = pd.DataFrame({ 'a': [0, 2, 2],\n                        'b': [2, 1, 2],\n                        'c': [0, 2, 2]})\n\nsumtest = testdf.sum()\nsumtest2 = testdf.sum()\nst = Counter(dict(sumtest))\nst2 = Counter(dict(sumtest2))\nstc = st + st2\nprint(stc)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Counter({'b': 10, 'a': 8, 'c': 8})\n</code></pre>\n\n<p>The difference here between what I'm doing and what you'd do, is that inside whatever loop you're running (as a function, I'm assuming?), you'd have your overall dictionary input as a variable to the function, and then you'd add the two Counters inside the loop, and then have the function return the sum of those two dictionaries as your new overall dictionary.</p>\n\n<p>Without more of a sense of the language of the for loop, it's hard to specify, but this works in itself, and modifying it as I've described will get it to work inside any for loop.</p>\n"}, {"tags": [], "owner": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "is_accepted": true, "score": 1, "last_activity_date": 1539203198, "creation_date": 1539203198, "answer_id": 52748291, "question_id": 52747834, "link": "https://stackoverflow.com/questions/52747834/pandas-and-python-saving-result-of-sum-outside-of-for-loop/52748291#52748291", "title": "Pandas and Python: Saving result of .sum() outside of for loop", "body": "<p>IIUC, you can just <code>add()</code> each <code>sum(axis=0)</code> to a running master data frame:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\n\nnp.random.seed(42)\n\n# starting empty dataframe\nmaster = pd.DataFrame(np.zeros((1, 3)), columns=['a', 'b', 'c'])\n\nn = 10\nfor _ in range(n):\n    # initialize new data for a, b, c on each loop\n    df = pd.DataFrame(np.random.randint(0, 5, size=(3, 3)), columns=['a','b','c'])\n    # compute column sums, add to master\n    master = master.add(df.sum(axis=0))\n\n# transpose to get column names as row indices, per OP specs\nmaster.T\n      0\na  52.0\nb  67.0\nc  74.0\n\nmaster.T.to_csv(\"output.csv\")\n</code></pre>\n"}], "owner": {"reputation": 573, "user_id": 7748514, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Dy0VE.png?s=128&g=1", "display_name": "Liquidity", "link": "https://stackoverflow.com/users/7748514/liquidity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 958, "favorite_count": 0, "accepted_answer_id": 52748291, "answer_count": 2, "score": 0, "last_activity_date": 1539203349, "creation_date": 1539201319, "last_edit_date": 1539202713, "question_id": 52747834, "link": "https://stackoverflow.com/questions/52747834/pandas-and-python-saving-result-of-sum-outside-of-for-loop", "title": "Pandas and Python: Saving result of .sum() outside of for loop", "body": "<p>I have a large dataframe in this structure (mine has several thousand columns/rows):</p>\n\n<pre><code>testdf = pd.DataFrame({ 'a': [0, 2, 2],\n                        'b': [2, 1, 2],\n                        'c': [0, 2, 2]})\n</code></pre>\n\n<p>I'm summing all the values using <code>.sum()</code> within a for loop:</p>\n\n<pre><code>sumtest = testdf.sum()\n</code></pre>\n\n<p>I want to be able to add these values to something outside the for loop. Each time the loop occurs, values should be added on to something (a dictionary?) outside the loop. The final goal is to export all the added values once the for looping has finished. </p>\n\n<p>When I <code>print(sumtest)</code>, I get:</p>\n\n<pre><code>a    4\nb    5\nc    4\n</code></pre>\n\n<p>But I don't want to just print the values each time the for loop occurs, I want them to add together each time the for loop runs (so that at the end I can add them all to a .csv with only one entry for each <code>a</code>, <code>b</code>, <code>c</code>, etc.) New values are generated each time the for loop runs, so the second loop could produce <code>a 7</code>, <code>b 8</code>, <code>c 10</code>. </p>\n\n<p>As I said, I want to add these values to something outside the for loop, so each time it goes through again more values are added on. I tried using <code>enumerate</code> to get each value out to add it to a dictionary, but that doesn't give me my <code>a</code>, <code>b</code>, <code>c</code>, it only gives the values. </p>\n\n<p>It's not important how it's done, but I need a way to 1) autogenerate all the column names (<code>a</code>, <code>b</code>, <code>c</code>, etc), 2) associate those with their number, with the sum increasing each time the for loop runs, 3) save these to a .csv once the for loops are finished.</p>\n\n<p>I tried using <code>sumtest.to_csv('sumtest.csv', mode='a')</code> at the end of each for loop, but it gives me a file with the values repeated instead of added:</p>\n\n<pre><code>a    4\nb    5\nc    4\na    7\nb    8\nc    10\n...  ...\n</code></pre>\n\n<p>Instead, the final output should be like (commas not necessary, I'm just thinking for a .csv):</p>\n\n<pre><code>a, 11\nb, 13\nc, 14\n</code></pre>\n"}, {"tags": ["python", "pandas", "aggregate-functions", "pandas-groupby", "columnname"], "answers": [{"comments": [{"owner": {"reputation": 2313, "user_id": 7375754, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/830f6d236ab0502a68fd9b9daf7f729f?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Sully", "link": "https://stackoverflow.com/users/7375754/jane-sully"}, "edited": false, "score": 0, "creation_date": 1539202257, "post_id": 52747986, "comment_id": 92420608, "body": "Thank you so much for clearly showing both options! I like the first one better :)"}, {"owner": {"reputation": 2313, "user_id": 7375754, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/830f6d236ab0502a68fd9b9daf7f729f?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Sully", "link": "https://stackoverflow.com/users/7375754/jane-sully"}, "edited": false, "score": 1, "creation_date": 1539203763, "post_id": 52747986, "comment_id": 92421267, "body": "A quick follow-up, do you know how to make the index (A in your example) a column instead of an index?"}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "reply_to_user": {"reputation": 2313, "user_id": 7375754, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/830f6d236ab0502a68fd9b9daf7f729f?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Sully", "link": "https://stackoverflow.com/users/7375754/jane-sully"}, "edited": false, "score": 1, "creation_date": 1539226325, "post_id": 52747986, "comment_id": 92427047, "body": "Usually you could avoid this problem by using <code>df.groupby(&#39;A&#39;, as_index=False)</code>. This tells <code>groupby&#47;agg</code> to return a DataFrame with <code>A</code> being a column instead of the index. But in this case, that does not work well since the <code>A</code> is placed in the 0th column level which is dropped by <code>result.columns = result.columns.get_level_values(1)</code>."}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "reply_to_user": {"reputation": 2313, "user_id": 7375754, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/830f6d236ab0502a68fd9b9daf7f729f?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Sully", "link": "https://stackoverflow.com/users/7375754/jane-sully"}, "edited": false, "score": 2, "creation_date": 1539226487, "post_id": 52747986, "comment_id": 92427079, "body": "So instead use <code>result = result.reset_index()</code> to move the index into a column. (And by the way, <code>result.set_index</code> is the method you would use to do reverse -- moving column(s) into the index.)"}, {"owner": {"reputation": 1731, "user_id": 2780744, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/d8gAs.jpg?s=128&g=1", "display_name": "chasmani", "link": "https://stackoverflow.com/users/2780744/chasmani"}, "edited": false, "score": 0, "creation_date": 1585836400, "post_id": 52747986, "comment_id": 107907876, "body": "What I like about pandas is it is so intuitive and easy to troubleshoot"}], "tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": true, "score": 4, "last_activity_date": 1539202596, "last_edit_date": 1539202596, "creation_date": 1539201921, "answer_id": 52747986, "question_id": 52747805, "link": "https://stackoverflow.com/questions/52747805/how-to-get-rid-of-nested-column-names-in-pandas-from-group-by-aggregation/52747986#52747986", "title": "How to get rid of nested column names in Pandas from group by aggregation?", "body": "<p>You could simply rename the columns:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nnp.random.seed(2018)\n\ndf = pd.DataFrame(np.random.randint(10, size=(100, 3)), columns=['A','B','C'])\nresult = df.groupby('A').agg({'B': [('D','count'),('E','nunique')],\n                              'C': [('F','first'),('G','max')]})\nresult.columns = result.columns.get_level_values(1)\nprint(result)\n</code></pre>\n\n<p>Alternatively, you could save the <code>groupby</code> object, and use <code>grouped[col].agg(...)</code>\nto produce sub-DataFrames which can then be <code>pd.concat</code>'ed together:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nnp.random.seed(2018)\ndf = pd.DataFrame(np.random.randint(10, size=(100, 3)), columns=['A','B','C'])\ngrouped = df.groupby('A')\nresult = pd.concat([grouped['B'].agg([('D','count'),('E','nunique')]),\n                    grouped['C'].agg([('F','first'),('G','max')])], axis=1)\nprint(result)\n</code></pre>\n\n<p>both code snippets yield the following (though with columns perhaps in a different order):</p>\n\n<pre><code>    D  E  F  G\nA             \n0  18  8  8  9\n1  12  8  6  6\n2  14  8  0  8\n3  10  9  8  9\n4   7  6  3  5\n5   8  5  6  7\n6   9  7  9  9\n7   8  6  4  7\n8   8  7  2  9\n9   6  5  7  9\n</code></pre>\n\n<p>Overall, I think renaming the columns after-the-fact is the easiest and more readable option.</p>\n"}], "owner": {"reputation": 2313, "user_id": 7375754, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/830f6d236ab0502a68fd9b9daf7f729f?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Sully", "link": "https://stackoverflow.com/users/7375754/jane-sully"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2962, "favorite_count": 1, "accepted_answer_id": 52747986, "answer_count": 1, "score": 3, "last_activity_date": 1539202596, "creation_date": 1539201207, "question_id": 52747805, "link": "https://stackoverflow.com/questions/52747805/how-to-get-rid-of-nested-column-names-in-pandas-from-group-by-aggregation", "title": "How to get rid of nested column names in Pandas from group by aggregation?", "body": "<p>I have the following code that finds the total and unique sales for each employee using a group by with <code>Employee_id</code> and aggregation with <code>Customer_id</code>. </p>\n\n<pre><code>Sales.groupby('Employee_id').agg({\n    'Customer_id': [\n        ('total_sales', 'count'),\n        ('unique_sales', 'nunique')\n]})\n</code></pre>\n\n<p>It is important to know that I will perform aggregations with other columns as well, but so far this is all I have written. So if you have a proposed solution, I ask that you please consider that in case it makes a difference.</p>\n\n<p>While this does exactly what I want in terms of computing total and unique sales for each employee and creating two columns, it creates nested column names. So the column names look like, [('Customer_id', 'total_sales'), ('Customer_id', 'unique_sales')], which I don't want. Is there any way to easily get rid of the nested part to only include ['total_sales', 'unique_sales'], or is the easiest thing to just rename the columns once I have finished everything?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "python-3.x", "operator-overloading"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 16, "creation_date": 1539201482, "post_id": 52747784, "comment_id": 92420250, "body": "No, not the same for lists. <code>+=</code> extends a list. <code>+</code> concatenates two lists into a new list."}, {"owner": {"reputation": 18299, "user_id": 2648811, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ee5af60b10a2d5fd8c864437a2062f0a?s=128&d=identicon&r=PG", "display_name": "Green Cloak Guy", "link": "https://stackoverflow.com/users/2648811/green-cloak-guy"}, "edited": false, "score": 10, "creation_date": 1539201680, "post_id": 52747784, "comment_id": 92420338, "body": "Ideally, if you&#39;re using this idea in code, it&#39;s probably safer to use the <code>append()</code> and <code>extend()</code> methods for adding elements and concatenating lists, respectively, to avoid ambiguity like this."}], "answers": [{"tags": [], "owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "is_accepted": true, "score": 81, "last_activity_date": 1547130965, "last_edit_date": 1547130965, "creation_date": 1539201530, "answer_id": 52747886, "question_id": 52747784, "link": "https://stackoverflow.com/questions/52747784/is-i-i-n-truly-the-same-as-i-n/52747886#52747886", "title": "Is i = i + n truly the same as i += n?", "body": "<p>They don't have to be the same.</p>\n\n<p>Using the <code>+</code> operator calls the method <code>__add__</code> while using the <code>+=</code> operator calls <code>__iadd__</code>. It is completely up to the object in question what happens when one of these methods is called.</p>\n\n<p>If you use <code>x += y</code> but <code>x</code> does not provide an <code>__iadd__</code> method (or the method returns <code>NotImplemented</code>), <code>__add__</code> is used as a <strong>fallback</strong>, meaning that <code>x = x + y</code> happens. </p>\n\n<p>In the case of lists, using <code>l += iterable</code> actually extends the list <code>l</code> with the elements of <code>iterable</code>. In your case, every character from the string (which is an iterable) is appended during the <code>extend</code> operation.</p>\n\n<p>Demo 1: using <code>__iadd__</code></p>\n\n<pre><code>&gt;&gt;&gt; l = []\n&gt;&gt;&gt; l += 'table'\n&gt;&gt;&gt; l\n['t', 'a', 'b', 'l', 'e']\n</code></pre>\n\n<p>Demo 2: using <code>extend</code> does the same</p>\n\n<pre><code>&gt;&gt;&gt; l = []\n&gt;&gt;&gt; l.extend('table')\n&gt;&gt;&gt; l\n['t', 'a', 'b', 'l', 'e']\n</code></pre>\n\n<p>Demo 3: adding a list and a string raises a <code>TypeError</code>.</p>\n\n<pre><code>&gt;&gt;&gt; l = []\n&gt;&gt;&gt; l = l + 'table'\n[...]\nTypeError: can only concatenate list (not \"str\") to list\n</code></pre>\n\n<p>Not using <code>+=</code> gives you the <code>TypeError</code> here because only <code>__iadd__</code> implements the extending behavior.</p>\n\n<p>Demo 4: common pitfall: <code>+=</code> does not build a new list. We can confirm this by checking for equal object identities with the <code>is</code> operator.</p>\n\n<pre><code>&gt;&gt;&gt; l = []\n&gt;&gt;&gt; l_ref = l # another name for l, no data is copied here\n&gt;&gt;&gt; l += [1, 2, 3] # uses __iadd__, mutates l in-place\n&gt;&gt;&gt; l is l_ref # confirm that l and l_ref are names for the same object\nTrue\n&gt;&gt;&gt; l\n[1, 2, 3]\n&gt;&gt;&gt; l_ref # mutations are seen across all names\n[1, 2, 3]\n</code></pre>\n\n<p>However, the <code>l = l + iterable</code> syntax does build a new list.</p>\n\n<pre><code>&gt;&gt;&gt; l = []\n&gt;&gt;&gt; l_ref = l # another name for l, no data is copied here\n&gt;&gt;&gt; l = l + [1, 2, 3] # uses __add__, builds new list and reassigns name l\n&gt;&gt;&gt; l is l_ref # confirm that l and l_ref are names for different objects\nFalse\n&gt;&gt;&gt; l\n[1, 2, 3]\n&gt;&gt;&gt; l_ref\n[]\n</code></pre>\n\n<p>In some cases, this can produce subtle bugs, because <code>+=</code> <strong>mutates</strong> the original list, while<br>\n<code>l = l + iterable</code> builds a <strong>new</strong> list and <strong>reassigns</strong> the name <code>l</code>. </p>\n\n<p><strong>BONUS</strong></p>\n\n<p><a href=\"https://www.youtube.com/watch?v=_AEJHKGk9ns&amp;t=10m30s\" rel=\"nofollow noreferrer\">Ned Batchelder's challenge to find this in the docs</a></p>\n"}, {"tags": [], "owner": {"reputation": 547, "user_id": 4955133, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/86cbc56bf6db8c370d9c9ea06050c0bd?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/4955133/jake"}, "is_accepted": false, "score": 3, "last_activity_date": 1539261291, "last_edit_date": 1539261291, "creation_date": 1539202413, "answer_id": 52748097, "question_id": 52747784, "link": "https://stackoverflow.com/questions/52747784/is-i-i-n-truly-the-same-as-i-n/52748097#52748097", "title": "Is i = i + n truly the same as i += n?", "body": "<p>If in the second case, you wrap a list around <code>n</code> to avoid errors:</p>\n\n<pre><code>for n in l:\n    i = i + [n]\nprint(i)\n</code></pre>\n\n<p>you get</p>\n\n<pre><code>['table']\n</code></pre>\n\n<p>So they are different operations.</p>\n"}, {"tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": false, "score": 3, "last_activity_date": 1539251712, "creation_date": 1539251712, "answer_id": 52757203, "question_id": 52747784, "link": "https://stackoverflow.com/questions/52747784/is-i-i-n-truly-the-same-as-i-n/52757203#52757203", "title": "Is i = i + n truly the same as i += n?", "body": "<p><strong>No.</strong></p>\n\n<p><a href=\"https://docs.python.org/3.6/reference/simple_stmts.html#augmented-assignment-statements\" rel=\"nofollow noreferrer\">7.2.1. Augmented assignment statements</a>:</p>\n\n<blockquote>\n  <p><strong>An augmented assignment expression like <code>x += 1</code> can be rewritten as <code>x = x + 1</code> to achieve a similar, but not exactly equal effect.</strong> In the augmented version, x is only evaluated once. Also, when possible, the\n  actual operation is performed in-place, meaning that rather than\n  creating a new object and assigning that to the target, the old object\n  is modified instead.</p>\n</blockquote>\n"}], "owner": {"reputation": 643, "user_id": 7816303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2ae5bcb0f82a65e5ff13de15862459?s=128&d=identicon&r=PG&f=1", "display_name": "Luke Bakare", "link": "https://stackoverflow.com/users/7816303/luke-bakare"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6199, "favorite_count": 7, "closed_date": 1539266702, "accepted_answer_id": 52747886, "answer_count": 3, "score": 56, "last_activity_date": 1547130965, "creation_date": 1539201124, "last_edit_date": 1539212833, "question_id": 52747784, "link": "https://stackoverflow.com/questions/52747784/is-i-i-n-truly-the-same-as-i-n", "closed_reason": "Duplicate", "title": "Is i = i + n truly the same as i += n?", "body": "<p>One block of code works but the other does not. Which would make sense except the second block is the same as the first only with an operation written in shorthand. They are practically the same operation.</p>\n\n<pre><code>l = ['table']\ni = []\n</code></pre>\n\n<h3>Version 1</h3>\n\n<pre><code>for n in l:\n    i += n\nprint(i)\n</code></pre>\n\n<p>Output: <code>['t', 'a', 'b', 'l', 'e']</code></p>\n\n<h3>Version 2</h3>\n\n<pre><code>for n in l:\n    i = i + n\nprint(i)\n</code></pre>\n\n<p>Output: </p>\n\n<blockquote>\n  <p>TypeError: can only concatenate list (not \"str\") to list</p>\n</blockquote>\n\n<hr>\n\n<p>What is causing this strange error?</p>\n"}, {"tags": ["python", "python-import", "pytest"], "comments": [{"owner": {"reputation": 39425, "user_id": 812183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9639bd6ee5dfd07ff05fb848e67e9657?s=128&d=identicon&r=PG", "display_name": "Anthony Sottile", "link": "https://stackoverflow.com/users/812183/anthony-sottile"}, "edited": false, "score": 0, "creation_date": 1539290182, "post_id": 52747763, "comment_id": 92459819, "body": "your <code>__init__.py</code> you should have <code>from .funcs import f</code> -- you are making a package-relative import"}, {"owner": {"reputation": 1522, "user_id": 5759234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rb4Ai.jpg?s=128&g=1", "display_name": "haxtar", "link": "https://stackoverflow.com/users/5759234/haxtar"}, "reply_to_user": {"reputation": 39425, "user_id": 812183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9639bd6ee5dfd07ff05fb848e67e9657?s=128&d=identicon&r=PG", "display_name": "Anthony Sottile", "link": "https://stackoverflow.com/users/812183/anthony-sottile"}, "edited": false, "score": 0, "creation_date": 1539290953, "post_id": 52747763, "comment_id": 92460113, "body": "@AnthonySottile I considered that solution, as well. Unfortunately, running pytest with that modification still yields the same error: <code>E   ModuleNotFoundError: No module named &#39;funcs&#39;</code>"}, {"owner": {"reputation": 39425, "user_id": 812183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9639bd6ee5dfd07ff05fb848e67e9657?s=128&d=identicon&r=PG", "display_name": "Anthony Sottile", "link": "https://stackoverflow.com/users/812183/anthony-sottile"}, "edited": false, "score": 1, "creation_date": 1539292054, "post_id": 52747763, "comment_id": 92460571, "body": "oh also your test file should have <code>from my_folder.funcs import f</code> -- <code>$ python -m pytest -q my_folder</code> ==&gt; <code>1 passed in 0.01 seconds</code>"}, {"owner": {"reputation": 1522, "user_id": 5759234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rb4Ai.jpg?s=128&g=1", "display_name": "haxtar", "link": "https://stackoverflow.com/users/5759234/haxtar"}, "edited": false, "score": 0, "creation_date": 1539292755, "post_id": 52747763, "comment_id": 92460834, "body": "That works! (when it is run outside of my_folder). But running <code>pytest</code> within my_folder still fails"}, {"owner": {"reputation": 310, "user_id": 7770274, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-bz3OFleIb7k/AAAAAAAAAAI/AAAAAAAADGU/kviaafBMY2g/photo.jpg?sz=128", "display_name": "Yahya Abou Imran", "link": "https://stackoverflow.com/users/7770274/yahya-abou-imran"}, "edited": false, "score": 0, "creation_date": 1539295039, "post_id": 52747763, "comment_id": 92461608, "body": "This proves that the documentation is missing something! You&#39;re even providing another way to run the tests! The doc just says <code>pytest</code>..."}, {"owner": {"reputation": 310, "user_id": 7770274, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-bz3OFleIb7k/AAAAAAAAAAI/AAAAAAAADGU/kviaafBMY2g/photo.jpg?sz=128", "display_name": "Yahya Abou Imran", "link": "https://stackoverflow.com/users/7770274/yahya-abou-imran"}, "edited": false, "score": 0, "creation_date": 1543055093, "post_id": 52747763, "comment_id": 93786378, "body": "At the end of the day, this has nothing to do with pytest, it&#39;s just related to how python import statements work. Always use <code>-m</code> and almost everything should be okay."}, {"owner": {"reputation": 310, "user_id": 7770274, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-bz3OFleIb7k/AAAAAAAAAAI/AAAAAAAADGU/kviaafBMY2g/photo.jpg?sz=128", "display_name": "Yahya Abou Imran", "link": "https://stackoverflow.com/users/7770274/yahya-abou-imran"}, "edited": false, "score": 0, "creation_date": 1546702590, "post_id": 52747763, "comment_id": 94941229, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/10253826/path-issue-with-pytest-importerror-no-module-named-yadayadayada\">PATH issue with pytest &#39;ImportError: No module named YadaYadaYada&#39;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1522, "user_id": 5759234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rb4Ai.jpg?s=128&g=1", "display_name": "haxtar", "link": "https://stackoverflow.com/users/5759234/haxtar"}, "edited": false, "score": 0, "creation_date": 1539204258, "post_id": 52748424, "comment_id": 92421473, "body": "Just want to note: the path <code>&quot;&#47;Users&#47;Yahya&#47;Desktop&#47;my_folder&quot;</code> is just an example. If you would like to determine the absolute path of my_folder, you can open a terminal, <code>cd my_folder</code>, and <code>pwd</code>."}, {"owner": {"reputation": 310, "user_id": 7770274, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-bz3OFleIb7k/AAAAAAAAAAI/AAAAAAAADGU/kviaafBMY2g/photo.jpg?sz=128", "display_name": "Yahya Abou Imran", "link": "https://stackoverflow.com/users/7770274/yahya-abou-imran"}, "edited": false, "score": 0, "creation_date": 1539219159, "post_id": 52748424, "comment_id": 92425554, "body": "I know about this workaround, but are you saying that the documentation is wrong, or at the very least obviously incomplete? (see the added quote)"}, {"owner": {"reputation": 39425, "user_id": 812183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9639bd6ee5dfd07ff05fb848e67e9657?s=128&d=identicon&r=PG", "display_name": "Anthony Sottile", "link": "https://stackoverflow.com/users/812183/anthony-sottile"}, "edited": false, "score": 1, "creation_date": 1539290040, "post_id": 52748424, "comment_id": 92459766, "body": "monkeypatching <code>sys.path</code> is almost never the right way"}, {"owner": {"reputation": 1522, "user_id": 5759234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rb4Ai.jpg?s=128&g=1", "display_name": "haxtar", "link": "https://stackoverflow.com/users/5759234/haxtar"}, "edited": false, "score": 0, "creation_date": 1539290649, "post_id": 52748424, "comment_id": 92459998, "body": "The only other way to be able to use <code>funcs</code> in <code>tests&#47;test_funcs.py</code> is to move <code>__init__.py</code> (as is) from <code>my_folder</code> to <code>tests</code>. Running pytest from my_folder after this transfer will result in a passing test. Unfortunately, though, the documentation specifically advises against it: &quot;You shouldn\u2019t have <b>init</b>.py files in your test directories&quot;"}], "tags": [], "owner": {"reputation": 1522, "user_id": 5759234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rb4Ai.jpg?s=128&g=1", "display_name": "haxtar", "link": "https://stackoverflow.com/users/5759234/haxtar"}, "is_accepted": false, "score": -1, "last_activity_date": 1539204163, "last_edit_date": 1539204163, "creation_date": 1539203839, "answer_id": 52748424, "question_id": 52747763, "link": "https://stackoverflow.com/questions/52747763/folder-structure-and-import-problems-with-pytest/52748424#52748424", "title": "Folder structure and import problems with pytest", "body": "<p>The test file <code>test_funcs.py</code> must be run from the directory where the module <code>funcs</code> is located in order for the import to be successful.</p>\n\n<p>As a workaround, you can modify <a href=\"https://docs.python.org/2/tutorial/modules.html\" rel=\"nofollow noreferrer\"><code>sys.path</code></a>, which determines the interpeter's search path for modules.</p>\n\n<p><code>test_funcs.py</code>:</p>\n\n<pre><code>import sys\nsys.path.append('/Users/Yahya/Desktop/my_folder')\n\nfrom funcs import f\n\ndef test_f():\n    assert f() == 2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 310, "user_id": 7770274, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-bz3OFleIb7k/AAAAAAAAAAI/AAAAAAAADGU/kviaafBMY2g/photo.jpg?sz=128", "display_name": "Yahya Abou Imran", "link": "https://stackoverflow.com/users/7770274/yahya-abou-imran"}, "is_accepted": true, "score": 2, "last_activity_date": 1543054908, "last_edit_date": 1543054908, "creation_date": 1539299304, "answer_id": 52770058, "question_id": 52747763, "link": "https://stackoverflow.com/questions/52747763/folder-structure-and-import-problems-with-pytest/52770058#52770058", "title": "Folder structure and import problems with pytest", "body": "<p>Here is a very simple way:</p>\n\n<ol>\n<li>Empty out <code>__init__.py</code></li>\n<li>From a level above <code>my_folder</code> run <code>python -m pytest</code> or <code>python -m pytest tests</code> (but not <code>pytest</code>)</li>\n</ol>\n\n<p><strong>EXPLANATION:</strong> Running a module with the <code>-m</code> option will include it in the <code>PYTHONPATH</code>, so everything related to the import statements will be solved smoothly. </p>\n"}], "owner": {"reputation": 310, "user_id": 7770274, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-bz3OFleIb7k/AAAAAAAAAAI/AAAAAAAADGU/kviaafBMY2g/photo.jpg?sz=128", "display_name": "Yahya Abou Imran", "link": "https://stackoverflow.com/users/7770274/yahya-abou-imran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2152, "favorite_count": 2, "accepted_answer_id": 52770058, "answer_count": 2, "score": 3, "last_activity_date": 1543054908, "creation_date": 1539201005, "last_edit_date": 1539218965, "question_id": 52747763, "link": "https://stackoverflow.com/questions/52747763/folder-structure-and-import-problems-with-pytest", "title": "Folder structure and import problems with pytest", "body": "<p>Imagine a simple folder structure:</p>\n\n<pre><code>my_folder/\n    __init__.py\n    funcs.py\n    tests/\n        test_funcs.py\n</code></pre>\n\n<p><strong>funcs.py:</strong></p>\n\n<pre><code>def f():\n    return 2\n</code></pre>\n\n<p><strong>__init__.py:</strong></p>\n\n<pre><code>from funcs import f\n</code></pre>\n\n<p><strong>test_funcs.py:</strong></p>\n\n<pre><code>from funcs import f\n\ndef test_f():\n    assert f() == 2\n</code></pre>\n\n<p>It's one of the suggested ways in the documentation:\n<a href=\"https://pytest.readthedocs.io/en/reorganize-docs/new-docs/user/directory_structure.html\" rel=\"nofollow noreferrer\">https://pytest.readthedocs.io/en/reorganize-docs/new-docs/user/directory_structure.html</a></p>\n\n<p>But when I run pytest from <code>my_folder</code>:</p>\n\n<pre><code>tests/test_funcs.py:1: in &lt;module&gt;\n    from funcs import f\nE   ModuleNotFoundError: No module named 'funcs'\n</code></pre>\n\n<p>It's strange because I would have thought that <code>pytest</code> sets the path from where it's been running so those kinds of errors don't come up without dealing with it manually.</p>\n\n<p>The documentation doesn't gave any indication about this either...  They're just saying :</p>\n\n<blockquote>\n  <p>Typically you can run tests by pointing to test directories or modules:</p>\n\n<pre><code>pytest tests/test_appmodule.py      # for external test dirs\npytest src/tests/test_appmodule.py  # for inlined test dirs\npytest src                          # run tests in all below test directories\npytest                              # run all tests below current dir\n</code></pre>\n</blockquote>\n\n<p>What am I missing?</p>\n"}, {"tags": ["python", "html", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10438778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e705e7d162069a50779ce06572cb4e?s=128&d=identicon&r=PG&f=1", "display_name": "pianoman66", "link": "https://stackoverflow.com/users/10438778/pianoman66"}, "edited": false, "score": 0, "creation_date": 1539267847, "post_id": 52760751, "comment_id": 92447992, "body": "Thank you for your help! I am new to python and bs4, so much appreciated Sohan Das! Have a good day"}, {"owner": {"reputation": 1201, "user_id": 7694428, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-E1ZfhihLFPc/AAAAAAAAAAI/AAAAAAAAAQk/eoX3A3ZWths/photo.jpg?sz=128", "display_name": "Sohan Das", "link": "https://stackoverflow.com/users/7694428/sohan-das"}, "reply_to_user": {"reputation": 13, "user_id": 10438778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e705e7d162069a50779ce06572cb4e?s=128&d=identicon&r=PG&f=1", "display_name": "pianoman66", "link": "https://stackoverflow.com/users/10438778/pianoman66"}, "edited": false, "score": 0, "creation_date": 1539268332, "post_id": 52760751, "comment_id": 92448355, "body": "Glad to help you!"}, {"owner": {"reputation": 13, "user_id": 10438778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e705e7d162069a50779ce06572cb4e?s=128&d=identicon&r=PG&f=1", "display_name": "pianoman66", "link": "https://stackoverflow.com/users/10438778/pianoman66"}, "edited": false, "score": 0, "creation_date": 1540160823, "post_id": 52760751, "comment_id": 92750346, "body": "For those who are using bs4 to webscrap ebay, just use their API (I did not know they had one before. Do your homework lol) see here: <a href=\"https://developer.ebay.com/products/developer\" rel=\"nofollow noreferrer\">developer.ebay.com/products/developer</a>"}], "tags": [], "owner": {"reputation": 1201, "user_id": 7694428, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-E1ZfhihLFPc/AAAAAAAAAAI/AAAAAAAAAQk/eoX3A3ZWths/photo.jpg?sz=128", "display_name": "Sohan Das", "link": "https://stackoverflow.com/users/7694428/sohan-das"}, "is_accepted": true, "score": 0, "last_activity_date": 1539263000, "creation_date": 1539263000, "answer_id": 52760751, "question_id": 52747732, "link": "https://stackoverflow.com/questions/52747732/scrape-text-after-div-within-other-div/52760751#52760751", "title": "scrape text after div within other div", "body": "<p>You have to find the actual tag that contains the text. Check this code. I have provided 2 option to find the text!</p>\n\n<pre><code>from bs4 import BeautifulSoup\nhtml = '''&lt;h3 class=\"s-item__title s-item__title--has-tags\" role=\"text\"&gt;\n        &lt;div&gt;\n            &lt;div class=\"s-item__title-tag\"&gt;SOLD  Oct 9, 2018&lt;/div&gt;\n        &lt;/div&gt;\n        &lt;span class=\"LIGHT_HIGHLIGHT\"&gt;New Listing&lt;/span&gt;MAX DELL PRECISION M4800 I7-4930XM EXTREME EDITION 3GHz 16GB 500GB SSD K2100 FHD\n    &lt;/h3&gt;'''\n\nsoup = BeautifulSoup(html, 'html.parser')\ntitle = soup.find('h3', attrs={'s-item__title s-item__title--has-tags'}).span.next_sibling#first option\ntitle1 = soup.select('.LIGHT_HIGHLIGHT')[0].next_sibling#second option\nprint(title)\nprint(title1)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>MAX DELL PRECISION M4800 I7-4930XM EXTREME EDITION 3GHz 16GB 500GB SSD K2100 FHD\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10438778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e705e7d162069a50779ce06572cb4e?s=128&d=identicon&r=PG&f=1", "display_name": "pianoman66", "link": "https://stackoverflow.com/users/10438778/pianoman66"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 52760751, "answer_count": 1, "score": 1, "last_activity_date": 1612457906, "creation_date": 1539200812, "last_edit_date": 1612457906, "question_id": 52747732, "link": "https://stackoverflow.com/questions/52747732/scrape-text-after-div-within-other-div", "title": "scrape text after div within other div", "body": "<p>I have the html code:</p>\n\n<pre><code>    &lt;h3 class=\"s-item__title s-item__title--has-tags\" role=\"text\"&gt;\n        &lt;div&gt;\n            &lt;div class=\"s-item__title-tag\"&gt;SOLD  Oct 9, 2018&lt;/div&gt;\n        &lt;/div&gt;\n        &lt;span class=\"LIGHT_HIGHLIGHT\"&gt;New Listing&lt;/span&gt;MAX DELL PRECISION M4800 I7-4930XM EXTREME EDITION 3GHz 16GB 500GB SSD K2100 FHD\n    &lt;/h3&gt;\n</code></pre>\n\n<p>I want to get the \"MAX DELL PRECISION M4800 I7-4930XM EXTREME EDITION 3GHz 16GB 500GB SSD K2100 FHD\" but when I do:</p>\n\n<pre><code>pre_title_and_sold=rel_text.findAll(\"h3\",{\"class\":\"s-item__title s-item__title--has-tags\"})\nprint(pre_title_and_sold)\n</code></pre>\n\n<p>I get </p>\n\n<pre><code>SOLD  Oct 8, 2018Dell Precision M6500 17\" LED Workstation i7 1.6GHz 4GB RAM 111GB HD DVDRW Win 7\n</code></pre>\n\n<p>I want to get</p>\n\n<pre><code>\"MAX DELL PRECISION M4800 I7-4930XM EXTREME EDITION 3GHz 16GB 500GB SSD K2100 FHD\"\n</code></pre>\n\n<p>I'm thinking I could do the   [0].text   route (as I am iterating through a webpage) if I am able to remove the section</p>\n\n<pre><code>&lt;div class=\"s-item__title-tag\"&gt;SOLD  Oct 9, 2018&lt;/div&gt;\n</code></pre>\n\n<p>I have tried to look at the documentation but was confused.\nmy question is somewhat similar to <a href=\"https://stackoverflow.com/questions/20885255/get-content-after-a-div-within-another-div\">Get content after a div within another div</a> but clarification is still needed.</p>\n\n<p>python 3.5 with BeautifulSoup win 10</p>\n"}, {"tags": ["python", "amazon-web-services", "text"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1539201224, "post_id": 52747721, "comment_id": 92420142, "body": "If your code runs without any errors, <a href=\"https://codereview.stackexchange.com\">Code Review</a> might be a better place to ask."}, {"owner": {"reputation": 59, "user_id": 3897755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd9a0ad35e432b3e554543330bdcaf09?s=128&d=identicon&r=PG", "display_name": "Peter Waters", "link": "https://stackoverflow.com/users/3897755/peter-waters"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1539201346, "post_id": 52747721, "comment_id": 92420187, "body": "It runs without issue on my machine, but when we put it live online we get an error 500 from the server saying the headers are too large (Only when we combine larger files, small files are fine) -edit: Also didn&#39;t know Code Review even existed, I&#39;ll post this on there as well"}], "owner": {"reputation": 59, "user_id": 3897755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd9a0ad35e432b3e554543330bdcaf09?s=128&d=identicon&r=PG", "display_name": "Peter Waters", "link": "https://stackoverflow.com/users/3897755/peter-waters"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539200745, "creation_date": 1539200745, "question_id": 52747721, "link": "https://stackoverflow.com/questions/52747721/text-file-combining-script-python-big-data", "title": "Text file combining script - Python - Big Data", "body": "<p>I was wondering if anyone could help me come up with a better way of doing this,</p>\n\n<p>basically I have text files that are formatted like this (some have more columns some have less, each column separated by spaces)</p>\n\n<pre><code>AA BB CC DD Col1 Col2 Col3\nXX XX XX Total 1234 1234 1234\nAaaa OO0 LAHB TEXT 111 41 99\nAaaa OO0 BLAH XETT 112 35 176 \nAaaa OO0 BALH TXET 131 52 133\nAaaa OO0 HALB EXTT 144 32 193\n</code></pre>\n\n<p>These text files ranged in size from a few hundred KB to around 100MB for the newest and largest filesWhat I need to do is combine two or more files by adding the checking to see if there are any duplicate data first of all so checking if AA BB CC and DD from each row match with any rows from the other files, if so then I append the data from Col1 Col2 Col3 (etc) on to that row, if not then I fill the new columns in with zeros. The I calculate the top 100 rows based on the total of each row and output the top 100 results to a webpage.</p>\n\n<p>here is the python code I'm using</p>\n\n<pre><code>import operator\n\ndef combine(dataFolder, getName, sort):\n    files = getName.split(\",\")\n    longestHeader = 0\n    longestHeaderFile =[]\n    dataHeaders = []\n    dataHeaderCode = []\n    fileNumber = 1\n    combinedFile = {}\n    for fileName in files:\n        lines = []\n        file = dataFolder+\"/tableFile/\"+fileName+\".txt\"\n        with open(file) as f:\n            x = 0\n            for line in f:\n                lines.append(line.upper().split())\n                if x == 1:\n                    break\n        splitLine = lines[1].index(\"TOTAL\")+1\n        dataHeaders.extend(lines[0][splitLine:])\n        headerNumber = 1\n        for name in lines[0][splitLine:]:\n            dataHeaderCode.append(str(fileNumber)+\"_\"+str(headerNumber))\n            headerNumber += 1\n\n        if splitLine &gt; longestHeader:\n            longestHeader = splitLine\n            longestHeaderFile = lines[0][:splitLine]\n        fileNumber += 1\n\n    for fileName in files:\n        lines = []\n        file = dataFolder+\"/tableFile/\"+fileName+\".txt\"\n        with open(file) as f:\n            for line in f:\n                lines.append(line.upper().split())\n        splitLine = lines[1].index(\"TOTAL\")+1\n        headers = lines[0][:splitLine]\n        data = lines[0][splitLine:]\n        for x in range(2, len(lines)):\n            normalizedLine = {}\n            lineName = \"\"\n            total = 0\n            for header in longestHeaderFile:\n                try:\n                    if header == \"EE\" or header == \"DD\":\n                        index = splitLine-1\n                    else:\n                        index = headers.index(header)\n                    normalizedLine[header] = lines[x][index]\n                except ValueError:\n                    normalizedLine[header] = \"XX\"\n                lineName += normalizedLine[header]\n            combinedFile[lineName] = normalizedLine\n            for header in dataHeaders:\n                headIndex = dataHeaders.index(header)\n                name = dataHeaderCode[headIndex]\n                try:\n                    index = splitLine+data.index(header)\n                    value = int(lines[x][index])\n                except ValueError:\n                    value = 0\n                except IndexError:\n                    value = 0\n\n                try:\n                    value = combinedFile[lineName][header]\n                    combinedFile[lineName][name] = int(value)\n                except KeyError:\n                    combinedFile[lineName][name] = int(value)\n\n                total += int(value)\n            combinedFile[lineName][\"TOTAL\"] = total\n    combined = sorted(combinedFile.values(), key=operator.itemgetter(sort), reverse=True)\n    return combined\n</code></pre>\n\n<p>I'm pretty new to Python so this may not be the most \"Pythonic\" way of doing it, anyway this works but its slow (about 12 seconds for two files about 6MB each) and when we uploaded the code to our AWS server we found that we would get a 500 error from the server saying headers were too large (when we tried to combine larger files). Can anyone help me refine this into something a bit quicker and more suited for a web environment. Also just to clarify I don't have access to the AWS server or the setting of it, that goes through our Lead Developer, so I have no actual clue on how its set up, I do most of my dev work through localhost then commit to Github.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 16808, "user_id": 197011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2bfdf995aa973ef9974fca9aeb6c7fb?s=128&d=identicon&r=PG", "display_name": "GreenMatt", "link": "https://stackoverflow.com/users/197011/greenmatt"}, "edited": false, "score": 0, "creation_date": 1539201253, "post_id": 52747716, "comment_id": 92420157, "body": "Welcome to the site. Unfortunately, it&#39;s not clear what you want. Please clarify: Do you just want to know if the list contains an element greater than the given value? Or a list of all elements greater? Or if a specific element (say the 3rd element out of 5) is greater?"}], "answers": [{"tags": [], "owner": {"reputation": 18299, "user_id": 2648811, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ee5af60b10a2d5fd8c864437a2062f0a?s=128&d=identicon&r=PG", "display_name": "Green Cloak Guy", "link": "https://stackoverflow.com/users/2648811/green-cloak-guy"}, "is_accepted": false, "score": 2, "last_activity_date": 1539201043, "creation_date": 1539201043, "answer_id": 52747767, "question_id": 52747716, "link": "https://stackoverflow.com/questions/52747716/check-list-to-see-if-element-greater-than-specified-number/52747767#52747767", "title": "Check list to see if element greater than specified number", "body": "<p>You ask for \"if <em>any</em> element in the list is greater than <code>x</code>\". If you just want one element, you could just find the greatest element in the list using the <code>max()</code> function, and check if it's larger than <code>x</code>: </p>\n\n<pre><code>if max(list) &gt; x:\n    ...\n</code></pre>\n\n<p>There's also a one-liner you can do to make a list of <em>all</em> elements in the list greater than <code>x</code>, using <em>list comprehensions</em> (<a href=\"https://www.pythonforbeginners.com/basics/list-comprehensions-in-python\" rel=\"nofollow noreferrer\">here's a tutorial, if you want one</a>):</p>\n\n<pre><code>&gt;&gt;&gt; x = 22\n&gt;&gt;&gt; list = [10, 20, 30, 40]\n&gt;&gt;&gt; greater = [i for i in list if i &gt; x]\n&gt;&gt;&gt; print(greater)\n[30, 40]\n</code></pre>\n\n<p>This code generates a list <code>greater</code> of all the elements in <code>list</code> that are greater than <code>x</code>. You can see the code responsible for this: </p>\n\n<pre><code>[i for i in list if i &gt; x]\n</code></pre>\n\n<p>This means, \"Iterate over <code>list</code> and, if the condition <code>i &gt; x</code> is true for any element <code>i</code>, add that element to a new list. At the end, return that new list.\"</p>\n"}, {"tags": [], "owner": {"reputation": 136, "user_id": 5275769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b38d50cc1856e8e42c03b8db0e5fc93?s=128&d=identicon&r=PG&f=1", "display_name": "clony", "link": "https://stackoverflow.com/users/5275769/clony"}, "is_accepted": false, "score": 0, "last_activity_date": 1539201093, "creation_date": 1539201093, "answer_id": 52747778, "question_id": 52747716, "link": "https://stackoverflow.com/questions/52747716/check-list-to-see-if-element-greater-than-specified-number/52747778#52747778", "title": "Check list to see if element greater than specified number", "body": "<p>List comprehension would suit your use case.</p>\n\n<pre><code>In [1]: x=22\n\nIn [2]: l=[10,20,30]\n\nIn [3]: exist = [n for n in l if n &gt; x]\n\nIn [4]: if exist:\n   ...:     print \"elements {} are greater than x\".format(exist)\n   ...: \nelements [30] are greater than x\n</code></pre>\n\n<p>If your list is very long, use generator so that you do not have to iterate through all elements of the list.</p>\n\n<pre><code>In [5]: exist = next(n for n in l if n &gt; x)\n\nIn [6]: if exist:                          \n    print \"Element {} is greater than x\".format(exist)\n   ...:     \nElement 30 is greater than x\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "is_accepted": false, "score": 13, "last_activity_date": 1539202093, "last_edit_date": 1539202093, "creation_date": 1539201146, "answer_id": 52747789, "question_id": 52747716, "link": "https://stackoverflow.com/questions/52747716/check-list-to-see-if-element-greater-than-specified-number/52747789#52747789", "title": "Check list to see if element greater than specified number", "body": "<p>Use <a href=\"https://docs.python.org/3/library/functions.html#any\" rel=\"noreferrer\"><code>any</code></a>, Python's natural way of checking if a condition holds for, well, <em>any</em> out of many:</p>\n\n<pre><code>x = 22 \nlst = [10, 20, 30]  # do NOT use list as a variable anme\n\nif any(y &gt; x for y in lst):\n    # do stuff with lst\n</code></pre>\n\n<p><code>any</code> will terminate upon the first truthy element of the iterable it is passed and, thus, not perform any spurious iterations which makes it preferable to <code>max</code> or list comprehension based approaches that have to always iterate the entire list. Asymptotically however, its time complexity is, of course, still linear.</p>\n\n<p>Also, you should not shadow built-in names like <code>list</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4254, "user_id": 10255652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5DDj.jpg?s=128&g=1", "display_name": "vash_the_stampede", "link": "https://stackoverflow.com/users/10255652/vash-the-stampede"}, "is_accepted": false, "score": 1, "last_activity_date": 1539202839, "creation_date": 1539202839, "answer_id": 52748195, "question_id": 52747716, "link": "https://stackoverflow.com/questions/52747716/check-list-to-see-if-element-greater-than-specified-number/52748195#52748195", "title": "Check list to see if element greater than specified number", "body": "<p>You could use <code>filter</code> and filter your list for items greater than <code>22</code>, if \nthe <code>len</code> of this filtered list is <code>&gt; 0</code> that means your original list contains a value larger than <code>22</code></p>\n\n<pre><code>n = 22\nlst = [10,20,30]\n\nif len(list(filter(lambda x: x &gt; n, lst))) &gt; 0:\n    # do something to lst\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10486140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae7185507168e3d65e74ccd21d7a37b6?s=128&d=identicon&r=PG&f=1", "display_name": "user195491", "link": "https://stackoverflow.com/users/10486140/user195491"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15871, "favorite_count": 1, "closed_date": 1539211574, "answer_count": 4, "score": 1, "last_activity_date": 1539202839, "creation_date": 1539200706, "last_edit_date": 1539201265, "question_id": 52747716, "link": "https://stackoverflow.com/questions/52747716/check-list-to-see-if-element-greater-than-specified-number", "closed_reason": "Duplicate", "title": "Check list to see if element greater than specified number", "body": "<p>I'm trying to check if a specific element in the list is greater than a set value. </p>\n\n<p>So </p>\n\n<pre><code>x=22\nlist=[10,20,30] \n\n# check if anything in list is greater than x\n# do something to the list\n</code></pre>\n\n<p>I'm just not sure what commands to use in this scenario to check every list element or if it's even possible in one line. </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1539201935, "post_id": 52747715, "comment_id": 92420461, "body": "BTW, your expected output isn&#39;t nested correctly."}], "answers": [{"tags": [], "owner": {"reputation": 2565, "user_id": 7340948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c4f727ef85a90ec4f5ae954f8718017?s=128&d=identicon&r=PG&f=1", "display_name": "CJR", "link": "https://stackoverflow.com/users/7340948/cjr"}, "is_accepted": false, "score": 1, "last_activity_date": 1539201558, "last_edit_date": 1539201558, "creation_date": 1539201202, "answer_id": 52747803, "question_id": 52747715, "link": "https://stackoverflow.com/questions/52747715/convert-multi-line-slash-delimited-string-into-a-nested-dictionary/52747803#52747803", "title": "Convert multi-line slash-delimited string into a nested dictionary", "body": "<p>You probably want something that's not dependent on so many massively nested brackets. This is a problem that using references to a mutable object will work well on.</p>\n\n<pre><code>meta_line = 'abc/pqr123/xy2/yes//T,abc/pqr245/kl3/yes//T,abc/ijk123/op5/yes//T,abc/pqr245/kl4/yes//T'\n\ndata = dict()\nfor item in meta_line.split(','):\n    dref = data\n    dict_tree = item.strip().replace('//', '/').split('/')\n    for i, val in enumerate(dict_tree):\n        if val in dref:\n            pass\n        elif i != len(dict_tree) - 1:\n            dref[val] = dict()\n        elif i == len(dict_tree) - 1:\n           dref[val] = list()\n        dref = dref[val]\n</code></pre>\n\n<p>Every iteration of the inner loop will move the reference <code>dref</code> down a level, and then reset it on every iteration of the outer loop. At the end, <code>data</code> should hold your nested dict.</p>\n\n<p>Edit: Sorry, I just noticed that you wanted the last level to be a list. This is one solution to that problem, but isn't the best (it will create errors if there's a list in a spot that a later data entry wants to be a dict instead). I would probably choose to build my nested dict and then recursively replace any empty dicts with empty lists afterwards to avoid that problem.</p>\n"}, {"tags": [], "owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "is_accepted": false, "score": 0, "last_activity_date": 1539202059, "creation_date": 1539202059, "answer_id": 52748013, "question_id": 52747715, "link": "https://stackoverflow.com/questions/52747715/convert-multi-line-slash-delimited-string-into-a-nested-dictionary/52748013#52748013", "title": "Convert multi-line slash-delimited string into a nested dictionary", "body": "<p>You can use The <a href=\"https://docs.python.org/3/library/stdtypes.html#dict.setdefault\" rel=\"nofollow noreferrer\"><code>dict.setdefault</code></a> method in a loop to build the nested dictionary. I'll use the <a href=\"https://docs.python.org/3/library/pprint.html#module-pprint\" rel=\"nofollow noreferrer\"><code>pprint</code></a> module to display the output. Note that <code>pprint.pprint</code> sorts dictionary keys before the output is computed.</p>\n\n<pre><code>from pprint import pprint\n\ndata = '''\\\nabc/pqr123/xy2/yes//T\nabc/pqr245/kl3/yes//T\nabc/ijk123/op5/yes//T\nabc/pqr245/kl4/yes//T\n'''.splitlines()\n\nnested_dict = {}\n\nfor row in data:\n    d = nested_dict\n    keys = [s for s in row.split('/') if s]\n    for key in keys[:-1]:\n        d = d.setdefault(key, {})\n    d[keys[-1]] = []\n\npprint(nested_dict)\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>{'abc': {'ijk123': {'op5': {'yes': {'T': []}}},\n         'pqr123': {'xy2': {'yes': {'T': []}}},\n         'pqr245': {'kl3': {'yes': {'T': []}}, 'kl4': {'yes': {'T': []}}}}}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10485867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2cbdb3bc2a3997dd9855b2e7ec0fa48?s=128&d=identicon&r=PG&f=1", "display_name": "harshithavrao", "link": "https://stackoverflow.com/users/10485867/harshithavrao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1591177599, "creation_date": 1539200688, "last_edit_date": 1591177599, "question_id": 52747715, "link": "https://stackoverflow.com/questions/52747715/convert-multi-line-slash-delimited-string-into-a-nested-dictionary", "title": "Convert multi-line slash-delimited string into a nested dictionary", "body": "<pre><code>abc/pqr123/xy2/yes//T  \nabc/pqr245/kl3/yes//T  \nabc/ijk123/op5/yes//T  \nabc/pqr245/kl4/yes//T\n</code></pre>\n\n<p>These are the input values that I want to convert to a nested dictionary.Each value such as \n    abc, pqr123, xy2, yes, T \nrepresents the name of a product.</p>\n\n<p>My output should look something like this:  </p>\n\n<pre><code>{\"abc\":{\"pqr123\":{\"xy2\":{\"yes\":{\"T\":[]}},\"pqr245\":\"kl3\":{\"yes\":{\"T\": \n[]}},\"kl4\":{\"yes\":{\"T\":[]}},\"ijk123\":{\"op5\":{\"yes\":{\"T\":[]}}}  \n</code></pre>\n\n<p>So I need a nested dictionary of all unique values and at the last key of the dictionary should have a value of empty list.</p>\n\n<p>Below is my snippet of code that generates the output I require, but I want to do it more dynamically so it is best suited even\nif the length of the input grows or shrinks. Please do let me know if are any better solution for this problem.    </p>\n\n<pre><code>data_dict={}\nfor item in meta_line.split(','):\n    item = item.replace('//','/')\n    item = str(item) \n    item = item.split('/')\n    if item[0] == \"\":\n       continue  \n\n    if item[0] not in data_dict.keys():\n       data_dict[item[0]] = {}\n    if item[1] not in data_dict[item[0]].keys():\n       data_dict[item[0]][item[1]] = {}\n    if item[2] not in data_dict[item[0]][item[1]].keys():\n       data_dict[item[0]][item[1]][item[2]] = {}\n    if item[3] not in data_dict[item[0]][item[1]][item[2]].keys():\n       data_dict[item[0]][item[1]][item[2]][item[3]] = {}\n    if item[4] not in data_dict[item[0]][item[1]][item[2]][item[3]].keys():\n       data_dict[item[0]][item[1]][item[2]][item[3]][item[4]] = []\n</code></pre>\n"}, {"tags": ["python", "ipython"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1539203198, "post_id": 52747696, "comment_id": 92421038, "body": "Try ctrl upArrow"}, {"owner": {"reputation": 1133, "user_id": 2387597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e97d265245b5a76657576d13768f6698?s=128&d=identicon&r=PG", "display_name": "n8sty", "link": "https://stackoverflow.com/users/2387597/n8sty"}, "edited": false, "score": 1, "creation_date": 1539204256, "post_id": 52747696, "comment_id": 92421469, "body": "or try PageUp.."}], "answers": [{"tags": [], "owner": {"reputation": 1545, "user_id": 7019148, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/lPqN6.jpg?s=128&g=1", "display_name": "tda", "link": "https://stackoverflow.com/users/7019148/tda"}, "is_accepted": true, "score": 2, "last_activity_date": 1539243470, "creation_date": 1539243470, "answer_id": 52754743, "question_id": 52747696, "link": "https://stackoverflow.com/questions/52747696/jump-to-top-of-function-definition-in-ipython/52754743#52754743", "title": "Jump to top of function definition in IPython", "body": "<p>As said in the comments, <code>Ctrl + UpArrow</code> or <code>PageUp</code> give you the desired scrolling by each executed statement rather than line-by-line that a simple <code>UpArrow</code> provides. </p>\n"}], "owner": {"reputation": 1255, "user_id": 5431568, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2aa8d0ebf28cace58d0fcba0c16273e3?s=128&d=identicon&r=PG&f=1", "display_name": "Char", "link": "https://stackoverflow.com/users/5431568/char"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 52754743, "answer_count": 1, "score": 0, "last_activity_date": 1539243470, "creation_date": 1539200600, "question_id": 52747696, "link": "https://stackoverflow.com/questions/52747696/jump-to-top-of-function-definition-in-ipython", "title": "Jump to top of function definition in IPython", "body": "<p>If the last executed command is a long function definition, I have to press the up key many times to get to a previous command. How can I jump to the top of the function from the bottom line or skip over the function definition entirely to get to a previous command?</p>\n\n<pre><code>[1]: # want to get here\n\n[2]: def f():\n         x = 'foo'\n         # many lines\n         return x\n\n[3]: f() # currently here \n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy", "scikit-learn", "data-science"], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 4636521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28a41d3d58aef7a5964dab17eb167ce3?s=128&d=identicon&r=PG&f=1", "display_name": "kerato2323", "link": "https://stackoverflow.com/users/4636521/kerato2323"}, "edited": false, "score": 0, "creation_date": 1539201019, "post_id": 52747725, "comment_id": 92420042, "body": "it&#39;s work, but i have to include &#39;feature 3&#39;  too (without normalization) in new dataset."}, {"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "reply_to_user": {"reputation": 105, "user_id": 4636521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28a41d3d58aef7a5964dab17eb167ce3?s=128&d=identicon&r=PG&f=1", "display_name": "kerato2323", "link": "https://stackoverflow.com/users/4636521/kerato2323"}, "edited": false, "score": 0, "creation_date": 1539201089, "post_id": 52747725, "comment_id": 92420077, "body": "check the update (notice that your sample data has no index, so it should work)"}], "tags": [], "owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "is_accepted": true, "score": 4, "last_activity_date": 1539201057, "last_edit_date": 1539201057, "creation_date": 1539200771, "answer_id": 52747725, "question_id": 52747672, "link": "https://stackoverflow.com/questions/52747672/normalize-pandas-dataframe-at-specific-columns/52747725#52747725", "title": "Normalize Pandas DataFrame at specific columns", "body": "<p>Just create a view of your dataframe:</p>\n\n<pre><code>x = df[['Feature 1', 'Feature 2']]\nmin_max_scaler = preprocessing.MinMaxScaler()\nx_scaled = min_max_scaler.fit_transform(x)\ndataset = pd.DataFrame(x_scaled)\ndataset['Feature 3'] = df['Feature 3']\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 4636521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28a41d3d58aef7a5964dab17eb167ce3?s=128&d=identicon&r=PG&f=1", "display_name": "kerato2323", "link": "https://stackoverflow.com/users/4636521/kerato2323"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3104, "favorite_count": 0, "accepted_answer_id": 52747725, "answer_count": 1, "score": 1, "last_activity_date": 1539201057, "creation_date": 1539200462, "last_edit_date": 1539200737, "question_id": 52747672, "link": "https://stackoverflow.com/questions/52747672/normalize-pandas-dataframe-at-specific-columns", "title": "Normalize Pandas DataFrame at specific columns", "body": "<p>i have a Pandas DataFrame with the following structure.</p>\n\n<pre><code>Feature 1  | Feature 2  | Feature 3\n10         | 200        | True\n30         | 233        | False\n45         | 344        | True\n</code></pre>\n\n<p>any idea how i can do normalization for <strong>feature 1</strong> and <strong>feature 2</strong> only? without changing the index of original DataFrame.</p>\n\n<p>i already try this following code, but it's normalize all columns and change the index of dataframe to 0,1,2</p>\n\n<pre><code>x = df.values\nmin_max_scaler = preprocessing.MinMaxScaler()\nx_scaled = min_max_scaler.fit_transform(x)\ndataset = pd.DataFrame(x_scaled)\n</code></pre>\n"}]