[{"tags": ["python", "django", "many-to-many"], "comments": [{"owner": {"reputation": 12219, "user_id": 2505071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88523d3d83f1170a7c88ab917a3faf19?s=128&d=identicon&r=PG", "display_name": "iklinac", "link": "https://stackoverflow.com/users/2505071/iklinac"}, "edited": false, "score": 0, "creation_date": 1513815533, "post_id": 47916030, "comment_id": 82800383, "body": "It is always good to include what you tried"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5800105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b2bb13c1b3f3f6ed3d263b765bbdc6b?s=128&d=identicon&r=PG&f=1", "display_name": "willhelm", "link": "https://stackoverflow.com/users/5800105/willhelm"}, "edited": false, "score": 0, "creation_date": 1514640188, "post_id": 47918290, "comment_id": 83038576, "body": "Thank you very much! I am sure I was trying this way at first but somehow it didn&#39;t work. I&#39;ve tried that again and... voila! Sorry for late reply - Christmas time."}], "tags": [], "owner": {"reputation": 902, "user_id": 4366271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8qSNz.jpg?s=128&g=1", "display_name": "Sagar", "link": "https://stackoverflow.com/users/4366271/sagar"}, "is_accepted": true, "score": 2, "last_activity_date": 1513833025, "creation_date": 1513833025, "answer_id": 47918290, "question_id": 47916030, "link": "https://stackoverflow.com/questions/47916030/listing-tags-by-manytomany-relationship-in-django/47918290#47918290", "title": "Listing tags by ManyToMany relationship in django", "body": "<p>No of ways to achieve this.</p>\n\n<p>Get Tag, Find all posts in which it is incurred.</p>\n\n<pre><code>try:\n    tag = Tag.objects.get(name=\"#blawBlaw\")\n    posts_of_that_tag = tag.posts.all()\nexcept Tag.DoesNotExist:\n    pass\n</code></pre>\n\n<p>Other way:\n    Get Post and Find it's tags</p>\n\n<pre><code>try:\n    p = Post.Objects.get(id=1)\n    tags = p.tag_set.all();\nexcept Post.DoesNotExist:\n    pass\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 421, "user_id": 9152980, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J5rJrv3q9rs/AAAAAAAAAAI/AAAAAAAAKYg/qFp_4TNsNa8/photo.jpg?sz=128", "display_name": "azmirfakkri", "link": "https://stackoverflow.com/users/9152980/azmirfakkri"}, "is_accepted": false, "score": 0, "last_activity_date": 1573463754, "creation_date": 1573463754, "answer_id": 58798480, "question_id": 47916030, "link": "https://stackoverflow.com/questions/47916030/listing-tags-by-manytomany-relationship-in-django/58798480#58798480", "title": "Listing tags by ManyToMany relationship in django", "body": "<p>This is how I solved mine. Just slightly different from @Sagar \nI want to get the tags associated with my blog post.</p>\n\n<p>Rather than using tags_set I use the plural form of tag, tags.</p>\n\n<pre><code># object containing title, body etc\npost = Post.objects.get(slug=slug)\n\n# get all the tags\np = Post.objects.get(id=post.id)\ntags = p.tags.all()\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5800105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b2bb13c1b3f3f6ed3d263b765bbdc6b?s=128&d=identicon&r=PG&f=1", "display_name": "willhelm", "link": "https://stackoverflow.com/users/5800105/willhelm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 463, "favorite_count": 0, "accepted_answer_id": 47918290, "answer_count": 2, "score": 1, "last_activity_date": 1573463754, "creation_date": 1513814374, "question_id": 47916030, "link": "https://stackoverflow.com/questions/47916030/listing-tags-by-manytomany-relationship-in-django", "title": "Listing tags by ManyToMany relationship in django", "body": "<p>I'm learning Django and have gone already through various tutorials. I have created a basic blog site, but wanted to add tagging funcionality. It works - I have posts with assigned tags, but I'm struggling to list those tags in the post now.</p>\n\n<p><em>blog/models.py:</em></p>\n\n<pre><code>class Post(models.Model):\n    title = models.CharField(max_length=50)\n    text = models.CharField(max_length=1000)\n    pub_date = models.DateTimeField('date published')\n    author = models.CharField(max_length=30)\n    mail = models.EmailField()\n\nclass Tag(models.Model):\n    name = models.CharField(max_length=15)\n    posts = models.ManyToManyField(Post, related_name=\"tags\")\n</code></pre>\n\n<p>I know I would need something like:\n<code>Tag.objects.filter()</code>\nbut could you please guide me how to list only those related to the specific post? I was trying various combinations, but none of them worked really well...</p>\n"}, {"tags": ["python", "numpy", "tensorflow", "lstm", "recurrent-neural-network"], "comments": [{"owner": {"reputation": 734, "user_id": 7033436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yZmMT.png?s=128&g=1", "display_name": "Nogoseke", "link": "https://stackoverflow.com/users/7033436/nogoseke"}, "edited": false, "score": 0, "creation_date": 1513816768, "post_id": 47916029, "comment_id": 82800693, "body": "Which line throws the exception?"}, {"owner": {"reputation": 259, "user_id": 8436290, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/90746a6651c61ec3a2832b322a22f68c?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas REY", "link": "https://stackoverflow.com/users/8436290/nicolas-rey"}, "reply_to_user": {"reputation": 734, "user_id": 7033436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yZmMT.png?s=128&g=1", "display_name": "Nogoseke", "link": "https://stackoverflow.com/users/7033436/nogoseke"}, "edited": false, "score": 0, "creation_date": 1513831186, "post_id": 47916029, "comment_id": 82803927, "body": "It is outputs, state = tf.nn.dynamic_rnn(cells, x)"}], "answers": [{"comments": [{"owner": {"reputation": 259, "user_id": 8436290, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/90746a6651c61ec3a2832b322a22f68c?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas REY", "link": "https://stackoverflow.com/users/8436290/nicolas-rey"}, "edited": false, "score": 0, "creation_date": 1513889693, "post_id": 47920690, "comment_id": 82834191, "body": "Sorry, I trimmed the code to look less complicated but it was a list. I updated the code. Still I have the same error."}, {"owner": {"reputation": 47598, "user_id": 712995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/c7ImO.png?s=128&g=1", "display_name": "Maxim", "link": "https://stackoverflow.com/users/712995/maxim"}, "reply_to_user": {"reputation": 259, "user_id": 8436290, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/90746a6651c61ec3a2832b322a22f68c?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas REY", "link": "https://stackoverflow.com/users/8436290/nicolas-rey"}, "edited": false, "score": 0, "creation_date": 1513891021, "post_id": 47920690, "comment_id": 82834700, "body": "The error is not in your snippet. Show us the full code"}, {"owner": {"reputation": 259, "user_id": 8436290, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/90746a6651c61ec3a2832b322a22f68c?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas REY", "link": "https://stackoverflow.com/users/8436290/nicolas-rey"}, "edited": false, "score": 0, "creation_date": 1513895139, "post_id": 47920690, "comment_id": 82836275, "body": "When I run the outputs, state = tf.nn.dynamic_rnn(cells,x) I have the error. I updated to show the full traceback. You see it comes from the dynamic_rnn. It&#39;s a problem with the way I employ the numpy_input_fn."}], "tags": [], "owner": {"reputation": 47598, "user_id": 712995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/c7ImO.png?s=128&g=1", "display_name": "Maxim", "link": "https://stackoverflow.com/users/712995/maxim"}, "is_accepted": false, "score": 0, "last_activity_date": 1513844261, "creation_date": 1513844261, "answer_id": 47920690, "question_id": 47916029, "link": "https://stackoverflow.com/questions/47916029/estimator-with-numpy-array-input-fn/47920690#47920690", "title": "Estimator with numpy array input_fn", "body": "<p>You should pass a list of cells into <a href=\"https://www.tensorflow.org/api_docs/python/tf/contrib/rnn/MultiRNNCell\" rel=\"nofollow noreferrer\"><code>MultiRNNCell</code></a>:</p>\n\n<blockquote>\n  <p>Args:</p>\n  \n  <p><strong><code>cells</code></strong>: list of RNNCells that will be composed in this order.</p>\n  \n  <p><strong><code>state_is_tuple</code></strong>: If True, accepted and returned states are n-tuples,\n  where <code>n = len(cells)</code>. If False, the states are all concatenated along\n  the column axis. This latter behavior will soon be deprecated.</p>\n</blockquote>\n\n<p>If you really want to make a one-layer RNN, change the code to</p>\n\n<pre><code>cells = tf.nn.rnn_cell.MultiRNNCell([layers])\n</code></pre>\n\n<p>... or create more layers.</p>\n"}, {"tags": [], "owner": {"reputation": 553, "user_id": 3558698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4a092391e8441e887f7beb0c1a161ccf?s=128&d=identicon&r=PG&f=1", "display_name": "caspillaga", "link": "https://stackoverflow.com/users/3558698/caspillaga"}, "is_accepted": false, "score": 1, "last_activity_date": 1519137823, "last_edit_date": 1519137823, "creation_date": 1519137241, "answer_id": 48887617, "question_id": 47916029, "link": "https://stackoverflow.com/questions/47916029/estimator-with-numpy-array-input-fn/48887617#48887617", "title": "Estimator with numpy array input_fn", "body": "<p>I had a similar problem. In my case the exception was raised because inside my model (I guess \"forward\", in your case) x was used as a Tensor, but it was actually a function (specifically tf.estimator.inputs.numpy_input_fn).\nI figured it out by adding this:</p>\n\n<pre><code>print(x)\nprint(type(x))\n</code></pre>\n\n<p>Which printed something like this:</p>\n\n<pre><code>&lt;function numpy_input_fn.&lt;locals&gt;.input_fn at 0x7fcc6f065740&gt;\n&lt;class 'function'&gt;\n</code></pre>\n\n<p>I'm still not sure what is the correct way to solve it, but I was able to fix it by doing something similar to this:</p>\n\n<pre><code>input_dict, y = x()\nx = input_dict['x']\n</code></pre>\n\n<p>Hope it helps</p>\n"}], "owner": {"reputation": 259, "user_id": 8436290, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/90746a6651c61ec3a2832b322a22f68c?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas REY", "link": "https://stackoverflow.com/users/8436290/nicolas-rey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1392, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1519137823, "creation_date": 1513814373, "last_edit_date": 1513894805, "question_id": 47916029, "link": "https://stackoverflow.com/questions/47916029/estimator-with-numpy-array-input-fn", "title": "Estimator with numpy array input_fn", "body": "<p>I am creating an estimator with numpy array to feed to model with using <code>tf.estimator.inputs.numpy_input_fn</code>. Like the following:</p>\n\n<pre><code>def input_fun(data):\n    x, y = data\n\n    x, y = np.reshape(x, (batch_size, -1, 1)), \\\n           np.reshape(y, (batch_size, -1, 1))\n\n    return tf.estimator.inputs.numpy_input_fn({'x': x}, y)\n\ndef forward(x, params, mode):\n\n    layers = [tf.nn.rnn_cell.LSTMCell(n_neurons) for _ in range(n_layers)]\n    cells = tf.nn.rnn_cell.MultiRNNCell(layers)\n    outputs, state = tf.nn.dynamic_rnn(cells, x)\n\n    predictions = ...\n\n    return predictions\n\ndef model_fn(features, labels, mode, params):\n    predict = forward(features, params, mode)\n\n    return tf.estimator.EstimatorSpec(predict , ...)\n\ndef experiment_fn(config, params):\n    return learn.Experiment(\n        estimator = estimator(model_fn,...),\n        train_input_fn = lambda: input_fun(train_set),\n        eval_input_fn = lambda: input_fun(eval_set))\n</code></pre>\n\n<p>It throws the following:</p>\n\n<blockquote>\n  <p>Traceback (most recent call last):</p>\n  \n  <p>File \"\", line 1, in \n      runfile('/Experiment.py',\n  wdir='/TensorFlow')</p>\n  \n  <p>File\n  \"C:\\Users\\hp\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\",\n  line 710, in runfile\n      execfile(filename, namespace)</p>\n  \n  <p>File\n  \"C:\\Users\\hp\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\",\n  line 101, in execfile\n      exec(compile(f.read(), filename, 'exec'), namespace)</p>\n  \n  <p>File \"/Experiment.py\", line 490, in \n      hparams = params</p>\n  \n  <p>File\n  \"C:\\Users\\hp\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\learn_runner.py\",\n  line 218, in run\n      return _execute_schedule(experiment, schedule)</p>\n  \n  <p>File\n  \"C:\\Users\\hp\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\learn_runner.py\",\n  line 46, in _execute_schedule\n      return task()</p>\n  \n  <p>File\n  \"C:\\Users\\hp\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\experiment.py\",\n  line 367, in train\n      hooks=self._train_monitors + extra_hooks)</p>\n  \n  <p>File\n  \"C:\\Users\\hp\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\experiment.py\",\n  line 807, in _call_train\n      hooks=hooks)</p>\n  \n  <p>File\n  \"C:\\Users\\hp\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\estimator\\estimator.py\",\n  line 302, in train\n      loss = self._train_model(input_fn, hooks, saving_listeners)</p>\n  \n  <p>File\n  \"C:\\Users\\hp\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\estimator\\estimator.py\",\n  line 711, in _train_model\n      features, labels, model_fn_lib.ModeKeys.TRAIN, self.config)</p>\n  \n  <p>File\n  \"C:\\Users\\hp\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\estimator\\estimator.py\",\n  line 694, in _call_model_fn\n      model_fn_results = self._model_fn(features=features, **kwargs)</p>\n  \n  <p>File \"/Experiment.py\", line 350, in model_fn\n      predict = forward(features, params, mode)</p>\n  \n  <p>File \"/Experiment.py\", line 335, in forward\n      dtype = tf.float32</p>\n  \n  <p>File\n  \"C:\\Users\\hp\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\rnn.py\",\n  line 562, in dynamic_rnn\n      flat_input = [ops.convert_to_tensor(input_) for input_ in flat_input]</p>\n  \n  <p>File\n  \"C:\\Users\\hp\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\rnn.py\",\n  line 562, in \n      flat_input = [ops.convert_to_tensor(input_) for input_ in flat_input]</p>\n  \n  <p>File\n  \"C:\\Users\\hp\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\",\n  line 836, in convert_to_tensor\n      as_ref=False)</p>\n  \n  <p>File\n  \"C:\\Users\\hp\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\",\n  line 926, in internal_convert_to_tensor\n      ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)</p>\n  \n  <p>File\n  \"C:\\Users\\hp\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\constant_op.py\",\n  line 229, in _constant_tensor_conversion_function\n      return constant(v, dtype=dtype, name=name)</p>\n  \n  <p>File\n  \"C:\\Users\\hp\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\constant_op.py\",\n  line 208, in constant\n      value, dtype=dtype, shape=shape, verify_shape=verify_shape))</p>\n  \n  <p>File\n  \"C:\\Users\\hp\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\tensor_util.py\",\n  line 472, in make_tensor_proto\n      \"supported type.\" % (type(values), values))</p>\n  \n  <p>TypeError: Failed to convert object of type &lt;class 'function'> to\n  Tensor. Contents: &lt;function numpy_input_fn.&lt;locals>.input_fn at\n  0x000001AB2B1DBEA0>. Consider casting elements to a supported type.</p>\n</blockquote>\n\n<p>Does anyone know why ?</p>\n"}, {"tags": ["python", "sql-server"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9120674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad692e16922af87499893e292c582d3d?s=128&d=identicon&r=PG&f=1", "display_name": "Jones659", "link": "https://stackoverflow.com/users/9120674/jones659"}, "edited": false, "score": 0, "creation_date": 1513815838, "post_id": 47916068, "comment_id": 82800470, "body": "I have tried similar things to this before making the post. Running your code now, the error I am faced with is &quot;OperationalError: near &quot;%&quot;: syntax error&quot;."}, {"owner": {"reputation": 1663, "user_id": 454610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a61dafa016e70b5d0d88918f7c1d49c?s=128&d=identicon&r=PG&f=1", "display_name": "JMA", "link": "https://stackoverflow.com/users/454610/jma"}, "reply_to_user": {"reputation": 23, "user_id": 9120674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad692e16922af87499893e292c582d3d?s=128&d=identicon&r=PG&f=1", "display_name": "Jones659", "link": "https://stackoverflow.com/users/9120674/jones659"}, "edited": false, "score": 0, "creation_date": 1513816611, "post_id": 47916068, "comment_id": 82800653, "body": "I just modified my answer to solve that issue. Hope that answer helps you."}, {"owner": {"reputation": 23, "user_id": 9120674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad692e16922af87499893e292c582d3d?s=128&d=identicon&r=PG&f=1", "display_name": "Jones659", "link": "https://stackoverflow.com/users/9120674/jones659"}, "edited": false, "score": 0, "creation_date": 1513818340, "post_id": 47916068, "comment_id": 82801046, "body": "Thanks for the reply again. However with your edit, now I am given the following error: &quot;TypeError: not enough arguments for format string&quot; (occurs on the line where statement is defined). Maybe it&#39;s something small? If you know what&#39;s up, feel free to tinker with it and notify me of your edits, but if not, then please don&#39;t worry too much. The user &quot;SatanDmytro&quot; has posted a (different) working solution."}, {"owner": {"reputation": 1663, "user_id": 454610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a61dafa016e70b5d0d88918f7c1d49c?s=128&d=identicon&r=PG&f=1", "display_name": "JMA", "link": "https://stackoverflow.com/users/454610/jma"}, "reply_to_user": {"reputation": 23, "user_id": 9120674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad692e16922af87499893e292c582d3d?s=128&d=identicon&r=PG&f=1", "display_name": "Jones659", "link": "https://stackoverflow.com/users/9120674/jones659"}, "edited": false, "score": 0, "creation_date": 1513818474, "post_id": 47916068, "comment_id": 82801080, "body": "My apologies, I had forgottent to have userinput 3 times in the argument list, since you are using it three times in your query. I just corrected my answer."}, {"owner": {"reputation": 23, "user_id": 9120674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad692e16922af87499893e292c582d3d?s=128&d=identicon&r=PG&f=1", "display_name": "Jones659", "link": "https://stackoverflow.com/users/9120674/jones659"}, "edited": false, "score": 0, "creation_date": 1513821140, "post_id": 47916068, "comment_id": 82801707, "body": "The error now is: &quot;sqlite3.OperationalError: no such column: penn&quot; Clearly something is going wrong somewhere..."}], "tags": [], "owner": {"reputation": 1663, "user_id": 454610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a61dafa016e70b5d0d88918f7c1d49c?s=128&d=identicon&r=PG&f=1", "display_name": "JMA", "link": "https://stackoverflow.com/users/454610/jma"}, "is_accepted": false, "score": 0, "last_activity_date": 1513818425, "last_edit_date": 1513818425, "creation_date": 1513814727, "answer_id": 47916068, "question_id": 47916027, "link": "https://stackoverflow.com/questions/47916027/using-a-variable-in-an-sql-query/47916068#47916068", "title": "Using a variable in an SQL query", "body": "<p>Define your statement before you execute as:</p>\n\n<pre><code>statement=\"select distinct label,format,year,catnum,artist,relname from testtable where artist like %s or artist like %s or artist like %s order by year, label, catnum, year, format, artist asc\" % (userinput,userinput,userinput)\n</code></pre>\n\n<p>Then execute:</p>\n\n<pre><code>cursor.execute(statement)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 9120674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad692e16922af87499893e292c582d3d?s=128&d=identicon&r=PG&f=1", "display_name": "Jones659", "link": "https://stackoverflow.com/users/9120674/jones659"}, "edited": false, "score": 0, "creation_date": 1513815951, "post_id": 47916075, "comment_id": 82800496, "body": "This works. 100%. You only used one &quot;LIKE&quot; command. Are you telling me that the other two were redundant?"}, {"owner": {"reputation": 537, "user_id": 3906197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33053ddb36f10768ef6595a66b131e71?s=128&d=identicon&r=PG&f=1", "display_name": "SatanDmytro", "link": "https://stackoverflow.com/users/3906197/satandmytro"}, "reply_to_user": {"reputation": 23, "user_id": 9120674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad692e16922af87499893e292c582d3d?s=128&d=identicon&r=PG&f=1", "display_name": "Jones659", "link": "https://stackoverflow.com/users/9120674/jones659"}, "edited": false, "score": 0, "creation_date": 1513816146, "post_id": 47916075, "comment_id": 82800544, "body": "@Jones659, yes!"}, {"owner": {"reputation": 23, "user_id": 9120674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad692e16922af87499893e292c582d3d?s=128&d=identicon&r=PG&f=1", "display_name": "Jones659", "link": "https://stackoverflow.com/users/9120674/jones659"}, "edited": false, "score": 0, "creation_date": 1513894092, "post_id": 47916075, "comment_id": 82835895, "body": "I understand why double percentage signs are used, something to do with escaping. However could you tell me the significance of curly brackets {} here. This is extra, obviously, but if you know, please share."}], "tags": [], "owner": {"reputation": 537, "user_id": 3906197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33053ddb36f10768ef6595a66b131e71?s=128&d=identicon&r=PG&f=1", "display_name": "SatanDmytro", "link": "https://stackoverflow.com/users/3906197/satandmytro"}, "is_accepted": true, "score": -1, "last_activity_date": 1513814751, "creation_date": 1513814751, "answer_id": 47916075, "question_id": 47916027, "link": "https://stackoverflow.com/questions/47916027/using-a-variable-in-an-sql-query/47916075#47916075", "title": "Using a variable in an SQL query", "body": "<p>Try:</p>\n\n<pre><code>cursor.execute(\"\"\"\n    select distinct label,format,year,catnum,artist,relname\n    from testtable\n    where artist like '%%{userinput}%%'\n    order by year, label, catnum, year, format, artist asc\n\"\"\".format(userinput=userinput))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 9120674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad692e16922af87499893e292c582d3d?s=128&d=identicon&r=PG&f=1", "display_name": "Jones659", "link": "https://stackoverflow.com/users/9120674/jones659"}, "edited": false, "score": 0, "creation_date": 1513820864, "post_id": 47916646, "comment_id": 82801642, "body": "This works very nicely, thanks. Whenever I looked up similar threads, there was always somebody with a solution that was proofed against sql injection. The end program is meant for select individuals, and will be used offline. I guess tomorrow I will do some research on SQL injections and decide if this is the solution for me, since it&#39;s not something I am too well versed in."}, {"owner": {"reputation": 23, "user_id": 9120674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad692e16922af87499893e292c582d3d?s=128&d=identicon&r=PG&f=1", "display_name": "Jones659", "link": "https://stackoverflow.com/users/9120674/jones659"}, "edited": false, "score": 0, "creation_date": 1513821070, "post_id": 47916646, "comment_id": 82801691, "body": "The hyperlink in your reply &quot;this&quot; does not lead to a specific page, rather a home page of what appears to be a computing blog, what am I looking for? Thanks"}, {"owner": {"reputation": 1, "user_id": 8474798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b031908aad4babfb5aa19b4aaad72be8?s=128&d=identicon&r=PG", "display_name": "Shiprex", "link": "https://stackoverflow.com/users/8474798/shiprex"}, "reply_to_user": {"reputation": 23, "user_id": 9120674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad692e16922af87499893e292c582d3d?s=128&d=identicon&r=PG&f=1", "display_name": "Jones659", "link": "https://stackoverflow.com/users/9120674/jones659"}, "edited": false, "score": 0, "creation_date": 1513876974, "post_id": 47916646, "comment_id": 82828221, "body": "Thanks for the reply. Yes, if the access is limited to trusted users, the risk is minimal, but it is good practice for anyone using SQL in python. The link in question is also used as a reference in Python&#39;s documentation; XKCD is a technology webcomic that has been around forever and there&#39;s likely a witty take on any topic you can think of (in this case, SQL injection)."}], "tags": [], "owner": {"reputation": 1, "user_id": 8474798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b031908aad4babfb5aa19b4aaad72be8?s=128&d=identicon&r=PG", "display_name": "Shiprex", "link": "https://stackoverflow.com/users/8474798/shiprex"}, "is_accepted": false, "score": 0, "last_activity_date": 1513819636, "creation_date": 1513819636, "answer_id": 47916646, "question_id": 47916027, "link": "https://stackoverflow.com/questions/47916027/using-a-variable-in-an-sql-query/47916646#47916646", "title": "Using a variable in an SQL query", "body": "<p>Please note that any time you use the python string formatting methods (e.g. %s, \"{}\".format()) suggested in some of these other answers <em>directly in your SQL query</em> you are opening yourself up to sql injection. See <a href=\"https://xkcd.com/327/\" rel=\"nofollow noreferrer\">this</a></p>\n\n<p>Rather, you'll want to use the <a href=\"https://docs.python.org/3.6/library/sqlite3.html\" rel=\"nofollow noreferrer\">parameter options</a> available and write more like this: </p>\n\n<pre><code>#format the userinput for the wildcards first - still in your python environment\nsearch = (\"%{}%\".format(userinput), )\n#pass as parameter to the cursor\ncursor.execute(\"\"\"\nselect distinct label,format,year,catnum,artist,relname\nfrom testtable\nwhere artist like ?\norder by year, label, catnum, year, format, artist asc\n\"\"\", search)\n</code></pre>\n\n<p>This way, the input is somewhat sanitized at the database call.</p>\n"}], "owner": {"reputation": 23, "user_id": 9120674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad692e16922af87499893e292c582d3d?s=128&d=identicon&r=PG&f=1", "display_name": "Jones659", "link": "https://stackoverflow.com/users/9120674/jones659"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 479, "favorite_count": 0, "accepted_answer_id": 47916075, "answer_count": 3, "score": 1, "last_activity_date": 1513861782, "creation_date": 1513814349, "last_edit_date": 1513861782, "question_id": 47916027, "link": "https://stackoverflow.com/questions/47916027/using-a-variable-in-an-sql-query", "title": "Using a variable in an SQL query", "body": "<p><strong>NEW VIEWERS NOTE: THIS QUESTION HAS BEEN ANSWERED</strong> </p>\n\n<p>If I have a long SQL statement in python that references a string multiple times, how can I change the SQL statement so it references a variable equal to the string instead?</p>\n\n<p>In the program, the user's input will not be predefined. So when they put their keyword into the textbox and click \"search\", their input will be stored as a string, as a variable called \"userinput\". I need to use the variable \"userinput\" in the SQL command. So far, I can only make the SQL command work if I actually type in the user input into it.</p>\n\n<p>I am trialling this in a small separate program:</p>\n\n<pre><code>import sqlite3\nconn = sqlite3.connect(':memory:')\ncursor = conn.cursor()\ncursor.execute(\"\"\"CREATE TABLE testtable (\n        label char,\n        format char,\n        catnum char,\n        sidecat char,\n        year char,\n        artist char,\n        relname char,\n        trackname char,\n        composer char,\n        collection int\n        )\"\"\")\nconn.commit()\ncursor.execute('''INSERT INTO testtable VALUES (\"GBI\", \"LP\", \"104\", \"104 (B)\", \"1974\", \"The Mustangs\", \"On Tha Rocks\", \"Someday We'll Be Together\", \"Unknown\", 1)''')\nconn.commit()\ncursor.execute('''INSERT INTO testtable VALUES (\"GBI\", \"Single\", \"235\", \"235 (B)\", \"1978\", \"Willpower\", \"Love Makes It Alright\", \"The Mail\", \"Eddie Minnis\", 1)''')\nconn.commit()\ncursor.execute('''INSERT INTO testtable VALUES (\"PENN\", \"LP\", \"002\", \"002 (B)\", \"1972\", \"Frank Penn\", \"'72\", \"The Time For Loving Is Now\", \"Frank Penn\", 1)''')\nconn.commit()\ncursor.execute('''INSERT INTO testtable VALUES (\"PENN's\", \"Single\", \"111\", \"A-111\", \"Unknown\", \"Jay Mitchell\", \"Nitty Gritty Song\", \"Nitty Gritty Song\", \"Jay Mitchell\", 0)''')\nconn.commit()\ncursor.execute('''INSERT INTO testtable VALUES (\"PENN's\", \"Single\", \"111\", \"A-111\", \"Unknown\", \"Jay Mitchell\", \"Nitty Gritty Song\", \"Unhappy People\", \"Jay Mitchell\", 0)''')\nconn.commit()\ncursor.execute('''INSERT INTO testtable VALUES (\"PENN's\", \"Single\", \"7744-7745\", \"7744 (A)\", \"Unknown\", \"Wendell Stuart\", \"I Am Who I Am\", \"I Am Who I Am\", \"Frank Penn\", 1)''')\nconn.commit()\n\nuserinput = 'penn'\ncursor.execute(\"\"\"select distinct label,format,year,catnum,artist,relname from testtable where artist like '%penn' or artist like '%penn%' or artist like 'penn%' order by year, label, catnum, year, format, artist asc\"\"\")\nprint(cursor.fetchall())\nconn.close()\n</code></pre>\n\n<p>The above works... because I actually wrote out what would be the user's input, (\"penn\"). I know it works because the output is:</p>\n\n<pre><code>[('PENN', 'LP', '1972', '002', 'Frank Penn', \"'72\")]\n</code></pre>\n\n<p><strong>How can I change the SQL statement at the bottom so that it only uses the variable \"userinput\", while having the same functionality?</strong></p>\n\n<p>If I just replace the user input with the variable \"userinput\", like this:</p>\n\n<pre><code>cursor.execute(\"\"\"select distinct label,format,year,catnum,artist,relname from testtable where artist like '%userinput' or artist like '%userinput%' or artist like 'userinput%' order by year, label, catnum, year, format, artist asc\"\"\")\n</code></pre>\n\n<p>Then the search result is <code>[]</code> since it assumes that I am looking for instances of the string \"userinput\" within the database, instead of treating it like a variable containing a string. Therefore finds nothing.</p>\n\n<p><strong>Edit: Solutions presented by users \"SatanDmytro\" and \"Shiprex\" both work</strong></p>\n"}, {"tags": ["python", "python-2.7", "random"], "comments": [{"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1513814473, "post_id": 47916023, "comment_id": 82800110, "body": "So if they choose <code>0</code>..."}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1513814507, "post_id": 47916023, "comment_id": 82800118, "body": "I think you don&#39;t want to have them choose, no? Maybe you want to choose for them? So <code>import random; print random.random() * 100</code>. Even better <code>import random; print random.randint(1, 100)</code>"}, {"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 0, "creation_date": 1513814520, "post_id": 47916023, "comment_id": 82800120, "body": "So your question is, &quot;how does the <code>random</code> module work&quot;? That&#39;s too much to answer in one question."}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 1, "creation_date": 1513814884, "post_id": 47916023, "comment_id": 82800207, "body": "I&#39;d suggest you try your best to do what you need and come back when you have some specific question. You can take the <a href=\"https://docs.python.org/3/library/random.html\" rel=\"nofollow noreferrer\">random</a> module and run it through a translator, which will help you understand the module in a general sense."}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1513815150, "post_id": 47916023, "comment_id": 82800292, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3996904/generate-random-integers-between-0-and-9\">Generate random integers between 0 and 9</a>"}, {"owner": {"reputation": 6123, "user_id": 1163893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/942f6a63d4a85a1fc660ea6662e85832?s=128&d=identicon&r=PG", "display_name": "Thijs van Dien", "link": "https://stackoverflow.com/users/1163893/thijs-van-dien"}, "reply_to_user": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1513815612, "post_id": 47916023, "comment_id": 82800409, "body": "@smac89 I see no problem in an attack doing no damage succeeding 100% of the time."}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "reply_to_user": {"reputation": 6123, "user_id": 1163893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/942f6a63d4a85a1fc660ea6662e85832?s=128&d=identicon&r=PG", "display_name": "Thijs van Dien", "link": "https://stackoverflow.com/users/1163893/thijs-van-dien"}, "edited": false, "score": 0, "creation_date": 1513815868, "post_id": 47916023, "comment_id": 82800478, "body": "@ThijsvanDien exactly my point. What would be the point of having them choose if they would always choose 0 anyways?"}, {"owner": {"reputation": 6123, "user_id": 1163893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/942f6a63d4a85a1fc660ea6662e85832?s=128&d=identicon&r=PG", "display_name": "Thijs van Dien", "link": "https://stackoverflow.com/users/1163893/thijs-van-dien"}, "reply_to_user": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 1, "creation_date": 1513816118, "post_id": 47916023, "comment_id": 82800536, "body": "@smac89 If you pick a low value, you have a weak attack with a high chance of succeeding. If you pick a high value, you have a strong attack with a low chance of succeeding. Both extremes\u2014an attack that always succeeds but does no damage, or an attack that does maximum damage but never succeeds\u2014are useless, so I don&#39;t see why anyone would pick either. Still, choosing between high damage + high risk or low damage + low risk does make sense, based on how lucky you&#39;re feeling. :)"}], "answers": [{"comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1513815049, "post_id": 47916108, "comment_id": 82800259, "body": "0-100 is a range of 101"}], "tags": [], "owner": {"reputation": 4721, "user_id": 1112586, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9d2f37f51ca9e490fe489624aebc3f13?s=128&d=identicon&r=PG", "display_name": "SCB", "link": "https://stackoverflow.com/users/1112586/scb"}, "is_accepted": false, "score": 2, "last_activity_date": 1513815008, "creation_date": 1513815008, "answer_id": 47916108, "question_id": 47916023, "link": "https://stackoverflow.com/questions/47916023/how-to-set-a-percentage-chance-to-make-something/47916108#47916108", "title": "How to set a percentage chance to make something", "body": "<p>What you want is to generate a random number between <code>0</code> and <code>100</code> and check if it's greater than your inserted number.</p>\n\n<p>For example, if you enter 50, there's a 50% chance the random number will be greater (or equal), 50% lower. If you enter 10, there's a 90% chance the number will be greater.</p>\n\n<p>You can use <a href=\"https://docs.python.org/2/library/random.html#random.randrange\" rel=\"nofollow noreferrer\"><code>random.randrange(101)</code></a> to generate a random number between 0 and 100 inclusive. Then it's a simple comparison to your value, and that should be all you need.</p>\n"}, {"comments": [{"owner": {"reputation": 263, "user_id": 13682294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/202c74bdda3cb82b8066c3675fc6134c?s=128&d=identicon&r=PG&f=1", "display_name": "JoshJohnson", "link": "https://stackoverflow.com/users/13682294/joshjohnson"}, "edited": false, "score": 0, "creation_date": 1606410148, "post_id": 47916135, "comment_id": 114961278, "body": "This is a really good and underrated answer!"}], "tags": [], "owner": {"reputation": 6123, "user_id": 1163893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/942f6a63d4a85a1fc660ea6662e85832?s=128&d=identicon&r=PG", "display_name": "Thijs van Dien", "link": "https://stackoverflow.com/users/1163893/thijs-van-dien"}, "is_accepted": false, "score": 1, "last_activity_date": 1513824014, "last_edit_date": 1513824014, "creation_date": 1513815260, "answer_id": 47916135, "question_id": 47916023, "link": "https://stackoverflow.com/questions/47916023/how-to-set-a-percentage-chance-to-make-something/47916135#47916135", "title": "How to set a percentage chance to make something", "body": "<p>Generally, in statistics, a chance is expressed as a number between 0 and 1, so 0.6 represents a 60% chance. Then, if you want to have a 0.6 chance of success, you can determine success or not by picking a random floating point number between 0 and 1 and check if it is smaller than or equal to 0.6.</p>\n\n<p>Intuitively, you can look at it this way:</p>\n\n<pre><code>|-----------------------------------|-----------------------|\n0                                  0.6                      1\n</code></pre>\n\n<p>If you'd pick a random point on this line\u2014your random number between 0 and 1\u2014the chance of it being on the left side of the 0.6 is... 0.6 (60%).</p>\n\n<p>You can use <a href=\"https://docs.python.org/2/library/random.html#random.uniform\" rel=\"nofollow noreferrer\"><code>random.uniform</code></a> for this:</p>\n\n<pre><code>import random\nsuccess_rate_percentage = 60\nsuccess = random.uniform(0, 1) &lt;= success_rate_percentage / 100.0\n</code></pre>\n\n<p>Now as a simple check if this is functioning properly:</p>\n\n<pre><code>&gt;&gt;&gt; import random\n&gt;&gt;&gt; success_count = 0\n&gt;&gt;&gt; for _ in range(100000):\n...     if random.uniform(0, 1) &lt;= 0.6\n...         success_count += 1\n...\n&gt;&gt;&gt; success_count\n59954\n</code></pre>\n\n<p>The expected result is about 0.6 * 100000 = 60000 successes and the actual result is 59954, so that's close enough.</p>\n"}], "owner": {"reputation": 11, "user_id": 9124844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5dba9e7a81e29347264abead987deb?s=128&d=identicon&r=PG&f=1", "display_name": "frankcastle", "link": "https://stackoverflow.com/users/9124844/frankcastle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1091, "favorite_count": 1, "closed_date": 1513819070, "answer_count": 2, "score": -5, "last_activity_date": 1513854598, "creation_date": 1513814323, "last_edit_date": 1513854598, "question_id": 47916023, "link": "https://stackoverflow.com/questions/47916023/how-to-set-a-percentage-chance-to-make-something", "closed_reason": "Needs more focus", "title": "How to set a percentage chance to make something", "body": "<p>I making a fighting game. Its like there are two players. They have 100 hp and they choose attack value btween 0-100 when they're fighting. After they choose value they should have %(100-value) chance of being successful with this attack. For example if they choose value 60, they have %40 chance to be successful with this attack.Can you please help. Sorry for my bad english.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 942, "user_id": 2012809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IF0o7.png?s=128&g=1", "display_name": "Omni", "link": "https://stackoverflow.com/users/2012809/omni"}, "edited": false, "score": 0, "creation_date": 1513814698, "post_id": 47916016, "comment_id": 82800159, "body": "I think pandas restricts access to <code>unstack</code> on purpose because this does (don&#39;t ask me why, I don&#39;t know enough about pandas) not make sense for a <code>GroupBy</code> instance. Can you follow the advice in the error message and use <code>apply</code> instead?"}, {"owner": {"reputation": 1365, "user_id": 4032503, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XZyGYGtRux0/AAAAAAAAAAI/AAAAAAAACPo/xgHTSkTRldM/photo.jpg?sz=128", "display_name": "noslenkwah", "link": "https://stackoverflow.com/users/4032503/noslenkwah"}, "edited": false, "score": 0, "creation_date": 1513814773, "post_id": 47916016, "comment_id": 82800175, "body": "try doing <code>sum()</code> before <code>unstack()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 477, "user_id": 8745343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6237c44c2ffa37d46a8621bea760ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Bode ", "link": "https://stackoverflow.com/users/8745343/bode"}, "edited": false, "score": 0, "creation_date": 1513815972, "post_id": 47916091, "comment_id": 82800500, "body": "I got  this:AttributeError: &#39;DataFrame&#39; object has no attribute &#39;to_datetime&#39;"}, {"owner": {"reputation": 1509, "user_id": 9053238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4eb75e6286e55a54084a27ad8ac4e5f?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel A", "link": "https://stackoverflow.com/users/9053238/gabriel-a"}, "reply_to_user": {"reputation": 477, "user_id": 8745343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6237c44c2ffa37d46a8621bea760ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Bode ", "link": "https://stackoverflow.com/users/8745343/bode"}, "edited": false, "score": 0, "creation_date": 1513816228, "post_id": 47916091, "comment_id": 82800560, "body": "Can you post the code you run? Or at least the line  with to_datetime"}, {"owner": {"reputation": 477, "user_id": 8745343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6237c44c2ffa37d46a8621bea760ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Bode ", "link": "https://stackoverflow.com/users/8745343/bode"}, "edited": false, "score": 0, "creation_date": 1513816371, "post_id": 47916091, "comment_id": 82800598, "body": "cA.date= cA.to_datetime(cA.date)...sorry,let me correct it"}, {"owner": {"reputation": 1509, "user_id": 9053238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4eb75e6286e55a54084a27ad8ac4e5f?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel A", "link": "https://stackoverflow.com/users/9053238/gabriel-a"}, "reply_to_user": {"reputation": 477, "user_id": 8745343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6237c44c2ffa37d46a8621bea760ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Bode ", "link": "https://stackoverflow.com/users/8745343/bode"}, "edited": false, "score": 0, "creation_date": 1513816463, "post_id": 47916091, "comment_id": 82800623, "body": "to_datetime is a function from the library. Should be pd.to_datetime(cA.date)"}, {"owner": {"reputation": 477, "user_id": 8745343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6237c44c2ffa37d46a8621bea760ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Bode ", "link": "https://stackoverflow.com/users/8745343/bode"}, "edited": false, "score": 0, "creation_date": 1513816641, "post_id": 47916091, "comment_id": 82800660, "body": "it works fine now, thanks but it doesn&#39;t add up all the values monthly"}, {"owner": {"reputation": 1509, "user_id": 9053238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4eb75e6286e55a54084a27ad8ac4e5f?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel A", "link": "https://stackoverflow.com/users/9053238/gabriel-a"}, "reply_to_user": {"reputation": 477, "user_id": 8745343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6237c44c2ffa37d46a8621bea760ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Bode ", "link": "https://stackoverflow.com/users/8745343/bode"}, "edited": false, "score": 0, "creation_date": 1513817008, "post_id": 47916091, "comment_id": 82800732, "body": "what does it output?"}, {"owner": {"reputation": 1509, "user_id": 9053238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4eb75e6286e55a54084a27ad8ac4e5f?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel A", "link": "https://stackoverflow.com/users/9053238/gabriel-a"}, "reply_to_user": {"reputation": 477, "user_id": 8745343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6237c44c2ffa37d46a8621bea760ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Bode ", "link": "https://stackoverflow.com/users/8745343/bode"}, "edited": false, "score": 0, "creation_date": 1513817087, "post_id": 47916091, "comment_id": 82800745, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/161657/discussion-between-gabriel-a-and-bode\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 1509, "user_id": 9053238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4eb75e6286e55a54084a27ad8ac4e5f?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel A", "link": "https://stackoverflow.com/users/9053238/gabriel-a"}, "is_accepted": true, "score": 1, "last_activity_date": 1513814917, "creation_date": 1513814917, "answer_id": 47916091, "question_id": 47916016, "link": "https://stackoverflow.com/questions/47916016/grouper-with-unstack/47916091#47916091", "title": "grouper with unstack ()", "body": "<p>Unstack is used to remove a level of indices from a multi index. You applied unstack before you used an aggregation function. That's why you got the error. Even then I think there are some issues with your groupby. Does the following work for you?</p>\n\n<pre><code>df.date= pd.to_datetime(df.date)\ndf2 = df.groupby( [pd.Grouper(key='date', freq='1M'),\"name\"])[\"count\"].sum().unstack()\ndf2.index = df2.index.strftime('%B')\nprint(df2)\n</code></pre>\n"}], "owner": {"reputation": 477, "user_id": 8745343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6237c44c2ffa37d46a8621bea760ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Bode ", "link": "https://stackoverflow.com/users/8745343/bode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 47916091, "answer_count": 1, "score": 0, "last_activity_date": 1513814917, "creation_date": 1513814295, "question_id": 47916016, "link": "https://stackoverflow.com/questions/47916016/grouper-with-unstack", "title": "grouper with unstack ()", "body": "<p>I have the dataframe,df</p>\n\n<pre><code>       date     name   count\n 0  2017-08-07  ABC      12\n 1  2017-09-08  ABC      5\n 2  2017-09-22  TTT      6\n 3  2017-09-23  TAC      5\n 4  2017-10-09  ABC      10\n</code></pre>\n\n<p>It should now be:</p>\n\n<pre><code>   Index      ABC    TTT     TAC \n  August      12      0      0\n  September   5       6      5\n  October     10      0      0  \n</code></pre>\n\n<p>Then sum for each month</p>\n\n<pre><code>    index          \n   August      12     \n   September   16      \n   October     10  \n</code></pre>\n\n<p>Here is the code:</p>\n\n<pre><code>df.date= pd.to_datetime(df.date)\ndf2 = df.groupby(pd.Grouper(key='date', freq='1M')).unstack().sum()# groupby each 1 month\ndf2.index = df2.index.strftime('%B')\nprint(df2)\n</code></pre>\n\n<p>I get this error:AttributeError: Cannot access callable attribute 'unstack' of 'DataFrameGroupBy' objects, try using the 'apply' method</p>\n"}, {"tags": ["python", "python-2.7", "csv"], "comments": [{"owner": {"reputation": 4721, "user_id": 1112586, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9d2f37f51ca9e490fe489624aebc3f13?s=128&d=identicon&r=PG", "display_name": "SCB", "link": "https://stackoverflow.com/users/1112586/scb"}, "edited": false, "score": 0, "creation_date": 1513815510, "post_id": 47916009, "comment_id": 82800379, "body": "An <code>IndexError</code> means you are trying to access an element of a list that doesn&#39;t exist. For example, <code>[1, 2, 3][42]</code> is going to be an <code>IndexError</code> because we are trying to access the 42nd element in a 3 element list. However we can&#39;t help you with where the error is found without knowing where in your code the error occurs. Can you produce a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete and verifiable example</a> that exhibits the behavior you&#39;re getting here, instead of your full program?"}, {"owner": {"reputation": 35, "user_id": 8508691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93b398e3bccdbe257231fb0fa564504?s=128&d=identicon&r=PG&f=1", "display_name": "Siddharth Chaudhary", "link": "https://stackoverflow.com/users/8508691/siddharth-chaudhary"}, "reply_to_user": {"reputation": 4721, "user_id": 1112586, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9d2f37f51ca9e490fe489624aebc3f13?s=128&d=identicon&r=PG", "display_name": "SCB", "link": "https://stackoverflow.com/users/1112586/scb"}, "edited": false, "score": 0, "creation_date": 1513841971, "post_id": 47916009, "comment_id": 82807670, "body": "It&#39;s occurring in"}, {"owner": {"reputation": 35, "user_id": 8508691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93b398e3bccdbe257231fb0fa564504?s=128&d=identicon&r=PG&f=1", "display_name": "Siddharth Chaudhary", "link": "https://stackoverflow.com/users/8508691/siddharth-chaudhary"}, "reply_to_user": {"reputation": 4721, "user_id": 1112586, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9d2f37f51ca9e490fe489624aebc3f13?s=128&d=identicon&r=PG", "display_name": "SCB", "link": "https://stackoverflow.com/users/1112586/scb"}, "edited": false, "score": 0, "creation_date": 1513842027, "post_id": 47916009, "comment_id": 82807704, "body": "write_f.write(...) where ... is all the cells in my csv file"}, {"owner": {"reputation": 35, "user_id": 8508691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93b398e3bccdbe257231fb0fa564504?s=128&d=identicon&r=PG&f=1", "display_name": "Siddharth Chaudhary", "link": "https://stackoverflow.com/users/8508691/siddharth-chaudhary"}, "reply_to_user": {"reputation": 4721, "user_id": 1112586, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9d2f37f51ca9e490fe489624aebc3f13?s=128&d=identicon&r=PG", "display_name": "SCB", "link": "https://stackoverflow.com/users/1112586/scb"}, "edited": false, "score": 0, "creation_date": 1513842130, "post_id": 47916009, "comment_id": 82807745, "body": "write_f.write(data[0] + &#39;,&#39; + data[1] + &#39;,&#39; + data[2]... and so on till data[6])"}], "owner": {"reputation": 35, "user_id": 8508691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93b398e3bccdbe257231fb0fa564504?s=128&d=identicon&r=PG&f=1", "display_name": "Siddharth Chaudhary", "link": "https://stackoverflow.com/users/8508691/siddharth-chaudhary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513814222, "creation_date": 1513814222, "question_id": 47916009, "link": "https://stackoverflow.com/questions/47916009/index-error-list-index-out-of-range-when-overwriting-data-inside-a-csv-file", "title": "Index Error: List Index out of range, when overwriting data inside a csv file", "body": "<p>In the code below, I pass the path of my csv file, the topic that the user played for the quiz, the username of the user, the score obtained by the user in the quiz they played, and the difficulty the user played the quiz on into my \"QuizCSV\" class.</p>\n\n<p>In my \"CSV\" class, I pass the path of another csv file which contains the questions and answers for the quiz that the user chooses to play.</p>\n\n<p>The program is meant to take the user's score from the quiz and store the score in a csv file named \"Scores\", but most importantly, the program has to overwrite any previous score the user got on the quiz, with the new score the user just got which is where my program goes wrong and gives me an INDEX ERROR.</p>\n\n<p>This is my code(sorry for some unindented code for python):</p>\n\n<pre><code>class QuizCSV: #Now Functional through 'os' and 'sys' module\n\ndef __init__(self, path, topic, user, score, difficulty): \n    self.path = path\n    self.topic = topic\n    self.user = user\n    self.score = score\n    self.difficulty = difficulty\n\ndef writeScore(self):\n    f = open(self.path, \"r\")\n    for line in f:\n        data = line.split(\",\")\n        write_f = open(\"ScoresUpdated.csv\", \"a\")\n        if data[0] == self.user:\n            if self.topic == \"SCIENCE\":\n                if self.difficulty == \"Easy\":\n                    write_f.write(data[0] + ',' + self.score + ',' + data[2] + ',' + data[3] + ',' + data[4] + ',' + data[5] + ',' + data[6]+\"\\n\")\n                if self.difficulty == \"Medium\":\n                    write_f.write(data[0] + ',' + data[1] + ',' + self.score + ',' + data[3] + ',' + data[4] + ',' + data[5] + ',' + data[6]+\"\\n\")\n                if self.difficulty == \"Hard\":\n                    write_f.write(data[0] + ',' + data[1] + ',' + data[2] + ',' + self.score + ',' + data[4] + ',' + data[5] + ',' + data[6]+\"\\n\")\n            elif self.topic == \"COMPUTING\":\n                if self.difficulty == \"Easy\":\n                    write_f.write(data[0] + ',' + data[1] + ',' + data[2] + ',' + data[3] + ',' + self.score + ',' + data[5] + ',' + data[6]+\"\\n\")\n                if self.difficulty == \"Medium\":\n                    write_f.write(data[0] + ',' + data[1] + ',' + data[2] + ',' + data[3] + ',' + data[4] + ',' + self.score + ',' + data[6]+\"\\n\")\n                if self.difficulty == \"Hard\":\n                    write_f.write(data[0] + ',' + data[1] + ',' + data[2] + ',' + data[3] + ',' + data[4] + ',' + data[5] + ',' + self.score+\"\\n\")\n        else:\n            write_f.write(data[0] + ',' + data[1] + ',' + data[2] + ',' + data[3] + ',' + data[4] + ',' + data[5] + ',' + data[6])\n        write_f.close()\n    f.close()\n    os.remove(\"Scores.csv\")\n    os.rename(\"ScoresUpdated.csv\",\"Scores.csv\")\n\nclass CSV:\n\n    def __init__(self, path):\n         self.path = path # raw string path; i.e. using r\"/path/to/file\"\n\n    def write(self, data):  # list of strings ['Username', 'Password']\n        with open(self.path, 'a') as w:\n        w.seek(0, 2)\n        w.writelines(\"\\r\")\n        w.writelines((',').join(data))\n\n    def Easy(self):\n        correct = 0\n        for x in range(5):\n            with open(self.path, 'r') as r:\n               reader = csv.reader(r, delimiter=',')\n               for line in reader:\n                   if \"Question {}\".format(x + 1)  == line[0]:\n                   print(line[1])\n                   answersCSV = [line[3], line[4], line[5]]\n                   RandomAnswer = random.choice(answersCSV)\n                   UserAnswers = [line[6], RandomAnswer]\n                   shuffle(UserAnswers)\n                   print (\"A: {}\".format(UserAnswers[0]))\n                   print (\"B: {}\".format(UserAnswers[1]))\n\n                   while True:\n                       Question = input(\"Enter one of the answers above: \").lower()\n                       if Question == UserAnswers[0]:\n                           if UserAnswers[0] == line[6]:\n                               print (\"correct answer\")\n                               correct += 1\n                           elif UserAnswers[0] != line[6]:\n                               print (\"incorrect answer\")\n                           break\n                       elif Question == UserAnswers[1]:\n                           if UserAnswers[1] == line[6]:\n                               print (\"correct answer\")\n                               correct += 1\n                           elif UserAnswers[1] != line[6]:\n                               print (\"incorrect answer\")\n                           break\n                       else:\n                           print (\"Please enter one of the answers above\")\n\n\n    print (\"you got a score of {}\".format(str(correct)))\n    if self.path == \"Science.csv\":\n        UserScore = QuizCSV(\"Scores.csv\", \"SCIENCE\", userQ, str(correct), \"Easy\")\n        UserScore.writeScore()\n    if self.path == \"Computing.csv\":\n        UserScore = QuizCSV(\"Scores.csv\", \"COMPUTING\", userQ, str(correct), \"Easy\")\n        UserScore.writeScore()\n\ndef Medium(self):\n    correct = 0\n    for x in range(5):\n        with open(self.path, 'r') as r:\n            reader = csv.reader(r, delimiter=',')\n            for line in reader:\n                if \"Question {}\".format(x + 1) == line[0]:\n                    print(line[1])\n                    answersCSV = [line[3], line[4], line[5]]\n                    RandomAnswer = random.choice(answersCSV)\n                    while True:\n                        RandomAnswer2 = random.choice(answersCSV)\n                        if RandomAnswer2 == RandomAnswer:\n                            RandomAnswer2 = random.choice(answersCSV)\n                        else:\n                            break\n                    UserAnswers = [line[6], RandomAnswer, RandomAnswer2]\n                    shuffle(UserAnswers)\n                    print(\"A: {}\".format(UserAnswers[0]))\n                    print(\"B: {}\".format(UserAnswers[1]))\n                    print (\"C: {}\".format(UserAnswers[2]))\n\n                    while True:\n                        Question = input(\"Enter one of the answers above: \").lower()\n                        if Question == UserAnswers[0]:\n                            if UserAnswers[0] == line[6]:\n                                print(\"correct answer\")\n                                correct += 1\n                            elif UserAnswers[0] != line[6]:\n                                print(\"incorrect answer\")\n                            break\n                        elif Question == UserAnswers[1]:\n                            if UserAnswers[1] == line[6]:\n                                print(\"correct answer\")\n                                correct += 1\n                            elif UserAnswers[1] != line[6]:\n                                print(\"incorrect answer\")\n                            break\n                        elif Question == UserAnswers[2]:\n                            if UserAnswers[2] == line[6]:\n                                print (\"correct answer\")\n                                correct += 1\n                            elif UserAnswers[2] != line[6]:\n                                print (\"incorrect answer\")\n                            break\n                        else:\n                            print(\"Please enter one of the answers above\")\n\n    print(\"you got a score of {}\".format(correct))\n    if self.path == \"Science.csv\":\n        UserScore = QuizCSV(\"Scores.csv\", \"SCIENCE\", userQ, str(correct), \"Medium\")\n        UserScore.writeScore()\n    if self.path == \"Computing.csv\":\n        UserScore = QuizCSV(\"Scores.csv\", \"COMPUTING\", userQ, str(correct), \"Medium\")\n        UserScore.writeScore()\n\ndef Hard(self):\n    correct = 0\n    for x in range(5):\n        with open(self.path, 'r') as r:\n            reader = csv.reader(r, delimiter=',')\n            for line in reader:\n                if \"Question {}\".format(x + 1) == line[0]:\n                    print(line[1])\n                    UserAnswers = [line[3], line[4], line[5], line[6]]\n                    shuffle(UserAnswers)\n                    print(\"A: {}\".format(UserAnswers[0]))\n                    print(\"B: {}\".format(UserAnswers[1]))\n                    print(\"C: {}\".format(UserAnswers[2]))\n                    print(\"D: {}\".format(UserAnswers[3]))\n\n                    while True:\n                        Question = input(\"Enter one of the answers above: \").lower()\n                        if Question == UserAnswers[0]:\n                            if UserAnswers[0] == line[6]:\n                                print(\"correct answer\")\n                                correct += 1\n                            elif UserAnswers[0] != line[6]:\n                                print(\"incorrect answer\")\n                            break\n                        elif Question == UserAnswers[1]:\n                            if UserAnswers[1] == line[6]:\n                                print(\"correct answer\")\n                                correct += 1\n                            elif UserAnswers[1] != line[6]:\n                                print(\"incorrect answer\")\n                            break\n                        elif Question == UserAnswers[2]:\n                            if UserAnswers[2] == line[6]:\n                                print(\"correct answer\")\n                                correct += 1\n                            elif UserAnswers[2] != line[6]:\n                                print(\"incorrect answer\")\n                            break\n                        else:\n                           print(\"Please enter one of the answers above\")\n\n    print(\"you got a score of {}\".format(correct))\n    if self.path == \"Science.csv\":\n        UserScore = QuizCSV(\"Scores.csv\", \"SCIENCE\", userQ, str(correct), \"Hard\")\n        UserScore.writeScore()\n    if self.path == \"Computing.csv\":\n        UserScore = QuizCSV(\"Scores.csv\", \"COMPUTING\", userQ, str(correct), \"Hard\")\n        UserScore.writeScore()\n</code></pre>\n\n<p>Here's my csv file:</p>\n\n<pre><code>Username | Sci Easy | Sci Medium | Sci Hard | Comp Easy | Comp Medium | Comp Hard |   \nSID16    |     5    |            |          |           |             |\n</code></pre>\n\n<p>When all the cells in the file for 'SID16' is empty, then the program stores the user's score in the appropriate cell. But, if the user plays the same quiz, the program does not overwrite the '5' mark and gives me a \"INDEX ERROR\" where the \"list index\" is out of range. I don't understand why my program is unable to overwrite the already written data with the user's new score, for example, overwriting 5 to 2.\nHow can I correct the index error, and why is it occurring? Thank you.</p>\n"}, {"tags": ["python", "python-decorators"], "comments": [{"owner": {"reputation": 4233, "user_id": 6510523, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-d58ISqzIb4k/AAAAAAAAAAI/AAAAAAAADFo/4rh4L8K0zS0/photo.jpg?sz=128", "display_name": "Brett Beatty", "link": "https://stackoverflow.com/users/6510523/brett-beatty"}, "edited": false, "score": 1, "creation_date": 1513814364, "post_id": 47915980, "comment_id": 82800086, "body": "Can you alter the retry decorator to get <code>num_retries</code> from self instead of accepting it in an outer call?"}, {"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 1, "creation_date": 1513814480, "post_id": 47915980, "comment_id": 82800111, "body": "You can&#39;t refer to <code>self.retries</code> in the decorator call because that happens at class definition time, but there is no <code>self</code> until you instantiate the class.  But you can write <code>retry</code> so that it looks at <code>self</code> when the decorated function is called if no <code>num_retries</code> was given.  Can you give a (possibly sketchy) demonstration of the implementation of <code>retry</code> itself?  Right now you don&#39;t show anything about how <code>retry</code> actually works."}, {"owner": {"reputation": 599, "user_id": 3117494, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/f6f6c718c89885ac091ee842d2aed7ef?s=128&d=identicon&r=PG", "display_name": "sokeefe", "link": "https://stackoverflow.com/users/3117494/sokeefe"}, "edited": false, "score": 0, "creation_date": 1513814632, "post_id": 47915980, "comment_id": 82800143, "body": "Ah, that is interesting. Yes I think that is exactly what I&#39;m running into and one of these two solutions seems like it will work. I&#39;ll add to my question now to add additional information on the implementation of retry....."}, {"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1513814848, "post_id": 47915980, "comment_id": 82800200, "body": "Also, note that if you do this, your class and decorator will be intertwined in a possibly confusing way.  If you need to specify the number of retries when instantiating, why do you need <code>retry</code> as a decorator at all?  Why not just build the retry functionality into the appropriate methods?"}], "answers": [{"comments": [{"owner": {"reputation": 599, "user_id": 3117494, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/f6f6c718c89885ac091ee842d2aed7ef?s=128&d=identicon&r=PG", "display_name": "sokeefe", "link": "https://stackoverflow.com/users/3117494/sokeefe"}, "edited": false, "score": 0, "creation_date": 1513815620, "post_id": 47916110, "comment_id": 82800410, "body": "I was hoping that it wasn&#39;t going to be something like this :) but this makes sense. Thanks a lot for your help on this, Brett!"}], "tags": [], "owner": {"reputation": 4233, "user_id": 6510523, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-d58ISqzIb4k/AAAAAAAAAAI/AAAAAAAADFo/4rh4L8K0zS0/photo.jpg?sz=128", "display_name": "Brett Beatty", "link": "https://stackoverflow.com/users/6510523/brett-beatty"}, "is_accepted": true, "score": 1, "last_activity_date": 1513815022, "creation_date": 1513815022, "answer_id": 47916110, "question_id": 47915980, "link": "https://stackoverflow.com/questions/47915980/initialize-decorator-variable-in-class/47916110#47916110", "title": "Initialize Decorator Variable in Class", "body": "<p>Your current <code>retry</code> probably looks something like this:</p>\n\n<pre><code>def retry(num_retries=0):\n    def decorator(fn):\n        def wrapper(*args, **kwargs):\n            # ...\n        return wrapper\n    return decorator\n</code></pre>\n\n<p>You want to get <code>self.retries</code>, but you won't have a reference to <code>self</code> until <code>wrapper</code> is called. So the only way to do that is to get <code>self.retries</code> inside of <code>wrapper</code>. Since you aren't passing any arguments to the decorator, you can also get rid of a layer and do something like this:</p>\n\n<pre><code>def retry(fn):\n    def wrapper(self, *args, **kwargs):\n        num_retries = self.retries\n        # ...\n    return wrapper\n</code></pre>\n"}], "owner": {"reputation": 599, "user_id": 3117494, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/f6f6c718c89885ac091ee842d2aed7ef?s=128&d=identicon&r=PG", "display_name": "sokeefe", "link": "https://stackoverflow.com/users/3117494/sokeefe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "accepted_answer_id": 47916110, "answer_count": 1, "score": 2, "last_activity_date": 1513815390, "creation_date": 1513814008, "last_edit_date": 1513815390, "question_id": 47915980, "link": "https://stackoverflow.com/questions/47915980/initialize-decorator-variable-in-class", "title": "Initialize Decorator Variable in Class", "body": "<p>I'm working with a decorator within a class that can accept a variable and I'd like to initialize that variable within the class. </p>\n\n<p>Below is an example of what I'm currently working with (which is currently working). </p>\n\n<pre><code>_RETRIES = 3\n\nclass MyClass(object):\n  def __init__(self, foo):\n    self._foo=foo\n\n  @retry.FuzzedIntervalsOnException(num_retries=_RETRIES)\n  def my_method(self):\n    return some_data\n</code></pre>\n\n<p>However I'd like to change this to accept something like <code>def __init__(self, foo, retries=3)</code> to allow clients to decide the number of retries. However implementing this is throwing an undefined variable error. </p>\n\n<p>I'm hoping to get to something like the below, however it seems like the correct answer will be more complicated than this:</p>\n\n<pre><code>class MyClass(object):\n  def __init__(self, foo, retries=3):\n    self._foo=foo\n    self.retries=retries\n\n  @retry.FuzzedIntervalsOnException(num_retries=self.retries)\n  def my_method(self):\n    return some_data\n</code></pre>\n\n<p>Is there an ideal way to initialize a class variable to be used within a decorator?</p>\n\n<p>Many thanks in advance</p>\n\n<p>EDIT:\nFor additional information on the retry, below is the initialization. </p>\n\n<pre><code>class FuzzedIntervalsOnException(object):\n   \"\"\"Retry on exception \n\n   args:\n     delay: Time delay in seconds for each retry.\n     num_retries: Total number of retries.\n   \"\"\"\n   def __init__(self, delay, num_retries):\n     ...\n</code></pre>\n"}, {"tags": ["python", "pandas", "matplotlib", "heatmap", "seaborn"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1513814312, "post_id": 47915951, "comment_id": 82800071, "body": "Are you looking for a 2D histogram?"}, {"owner": {"reputation": 1119, "user_id": 977716, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/4b3bbdfde50144d6742d58de31400891?s=128&d=identicon&r=PG", "display_name": "rishabh", "link": "https://stackoverflow.com/users/977716/rishabh"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1513814581, "post_id": 47915951, "comment_id": 82800136, "body": "Yes, but I couldn&#39;t manage to represent data correctly with np.histogram2d, can you help out with this?"}, {"owner": {"reputation": 942, "user_id": 2012809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IF0o7.png?s=128&g=1", "display_name": "Omni", "link": "https://stackoverflow.com/users/2012809/omni"}, "edited": false, "score": 0, "creation_date": 1513814845, "post_id": 47915951, "comment_id": 82800198, "body": "Does this help? <a href=\"https://stackoverflow.com/questions/33282368/plotting-a-2d-heatmap-with-matplotlib\" title=\"plotting a 2d heatmap with matplotlib\">stackoverflow.com/questions/33282368/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1119, "user_id": 977716, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/4b3bbdfde50144d6742d58de31400891?s=128&d=identicon&r=PG", "display_name": "rishabh", "link": "https://stackoverflow.com/users/977716/rishabh"}, "edited": false, "score": 0, "creation_date": 1513829320, "post_id": 47916153, "comment_id": 82803487, "body": "Thank you, the bin ranges helped plot it correctly!"}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 4, "last_activity_date": 1513815438, "creation_date": 1513815438, "answer_id": 47916153, "question_id": 47915951, "link": "https://stackoverflow.com/questions/47915951/heatmap-in-python-to-represent-x-y-coordinates-in-a-given-rectangular-area/47916153#47916153", "title": "Heatmap in python to represent (x,y) coordinates in a given rectangular area", "body": "<p>It seems that what is wanted here is a 2-dimensional histogram. This can be plotted using <a href=\"https://matplotlib.org/devdocs/api/_as_gen/matplotlib.axes.Axes.hist2d.html\" rel=\"nofollow noreferrer\"><code>plt.hist2d</code></a>. </p>\n\n<p>Example:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nx = np.random.rayleigh(50, size=5000)\ny = np.random.rayleigh(50, size=5000)\n\n\nplt.hist2d(x,y, bins=[np.arange(0,400,5),np.arange(0,300,5)])\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/SMowa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SMowa.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1119, "user_id": 977716, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/4b3bbdfde50144d6742d58de31400891?s=128&d=identicon&r=PG", "display_name": "rishabh", "link": "https://stackoverflow.com/users/977716/rishabh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6885, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1513815438, "creation_date": 1513813783, "question_id": 47915951, "link": "https://stackoverflow.com/questions/47915951/heatmap-in-python-to-represent-x-y-coordinates-in-a-given-rectangular-area", "title": "Heatmap in python to represent (x,y) coordinates in a given rectangular area", "body": "<p>Let's say we have x,y coordinates as an input where x is in range(0,300) &amp; y is in range(0,400)\nI want to plot all of these coordinates as a heat map in a rectangular grid of width between (0,300) &amp; height between (0,400).</p>\n\n<p>Using seaborn, or matplotlib, I'm able to plot a scatter plot, but struggling to plot these points as a heatmap.</p>\n\n<pre><code>x = numpy.random.randint(0, high=50, size=5000, dtype='l')\ny = numpy.random.randint(0, high=50, size=5000, dtype='l')\n</code></pre>\n\n<p>Thus, if my sample size is 5000 points &amp; all are nearly in the range of x as (0,50) &amp; y as (0,50) representing them in a rectangular space of 300x400 should demonstrate the highest density of coordinates in 50x50 space.</p>\n\n<p>Can someone please guide me how to represent this data?</p>\n\n<p>For testing &amp; plotting on scatter plot, I used seaborn's lmplot function.</p>\n\n<pre><code>df = pd.DataFrame()\n\ndf['x'] = pd.Series(numpy.random.randint(0, high=320, size=5000, dtype='l'))\ndf['y'] = pd.Series(numpy.random.randint(0, high=480, size=5000, dtype='l'))\nsns.set_style('whitegrid')\nsns.lmplot('x','y',data=df,\n       palette='coolwarm',size=10,fit_reg=False)\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "pyqt", "pyqt5"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1513814192, "post_id": 47915941, "comment_id": 82800046, "body": "One solution is to define the app as a global variable: <code>app = None</code>  <code>def main():</code> <code>global app</code> <code>app = QtGui.QGuiApplication([])</code>"}, {"owner": {"reputation": 2159, "user_id": 92200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/adcd1bf065d7964320f5e69ca1fe9120?s=128&d=identicon&r=PG", "display_name": "Neil", "link": "https://stackoverflow.com/users/92200/neil"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1513814559, "post_id": 47915941, "comment_id": 82800130, "body": "Thanks, @eyllanesc , that gets rid of the error. It&#39;s an awkward way to do it though. Is there something missing from how I&#39;m shutting down QT?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 2, "creation_date": 1513814933, "post_id": 47915941, "comment_id": 82800220, "body": "What happens is that the app is a local variable, and python needs to remove it, but in your case, as a local app, it has already been deleted. the section of the main I put it directly in <code>if __name__ == &#39;__main __&#39;:</code>, I mean the following: <code>if __name__ == &#39;__main__&#39;:     import sys     app = QtGui.QGuiApplication([])     engine = QtQml.QQmlApplicationEngine()     engine.load(QtCore.QUrl(&#39;test.qml&#39;))     sys.exit(app.exec_())</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2159, "user_id": 92200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/adcd1bf065d7964320f5e69ca1fe9120?s=128&d=identicon&r=PG", "display_name": "Neil", "link": "https://stackoverflow.com/users/92200/neil"}, "is_accepted": true, "score": 1, "last_activity_date": 1513988906, "creation_date": 1513988906, "answer_id": 47948761, "question_id": 47915941, "link": "https://stackoverflow.com/questions/47915941/error-closing-pyqt-app-after-app-exec-returns/47948761#47948761", "title": "Error closing PyQT app, after app.exec() returns", "body": "<p>In order to keep most functionality inside <code>main()</code>, the best solution is to move the QGuiApplication() outside of all functions:</p>\n\n<pre><code>#!/usr/bin/env python3\n\nimport PyQt5.QtCore as QtCore\nimport PyQt5.QtGui as QtGui\nimport PyQt5.QtQml as QtQml\n\n\n\ndef main(app):\n    ''' setup and run the application '''\n\n    # Create a QML engine.\n    engine = QtQml.QQmlApplicationEngine(parent=app)\n\n    engine.load(QtCore.QUrl('test.qml'))\n\n    app.exec()\n\n    return\n\nif __name__ == '__main__':\n    # Create the application instance.\n    app = QtGui.QGuiApplication(sys.argv)\n\n    main(app)\n</code></pre>\n\n<p>This exits cleanly, but I'd still like to know how to fully shut down PyQT. I think the problem is that there are still events in an event loop that are trying to run after <code>app.exec()</code> returns, but I haven't found how to let them run to completion and stop.</p>\n\n<p>Thank you eyllanesc for your help.</p>\n"}], "owner": {"reputation": 2159, "user_id": 92200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/adcd1bf065d7964320f5e69ca1fe9120?s=128&d=identicon&r=PG", "display_name": "Neil", "link": "https://stackoverflow.com/users/92200/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 597, "favorite_count": 0, "accepted_answer_id": 47948761, "answer_count": 1, "score": 0, "last_activity_date": 1513988906, "creation_date": 1513813756, "last_edit_date": 1592644375, "question_id": 47915941, "link": "https://stackoverflow.com/questions/47915941/error-closing-pyqt-app-after-app-exec-returns", "title": "Error closing PyQT app, after app.exec() returns", "body": "<p>Every time a simple PyQT GUI is quit from a QT Button, I see an error: <code>Must construct a QGuiApplication first.</code> The error comes after running the application for any amount of time, but only if a button is clicked which triggers <code>Qt.quit()</code>. If the app is stopped by closing the window, there is no error. So far, I've only tested on Ubuntu Artful, with PyQT packages from Ubuntu.</p>\n<p>The simplest app to demonstrate this is:</p>\n<h2>test.py</h2>\n<pre><code>#!/usr/bin/env python3\n\nimport PyQt5.QtCore as QtCore\nimport PyQt5.QtGui as QtGui\nimport PyQt5.QtQml as QtQml\n\n\n\ndef main():\n    ''' setup and run the application '''\n\n    # Create the application instance.\n    app = QtGui.QGuiApplication([])\n\n    # Create a QML engine.\n    engine = QtQml.QQmlApplicationEngine(parent=app)\n\n    engine.load(QtCore.QUrl('test.qml'))\n\n    app.exec()\n\n    print('a')   # &lt;--- This is printed before the QT error message\n    return\n\nif __name__ == '__main__':\n    main()\n\n    print('b')\n</code></pre>\n<h2>test.qml</h2>\n<pre><code>import QtQuick 2\nimport QtQuick.Controls 1.4\n\n\nApplicationWindow {\n    id: main_window\n    visible: true\n\n    Button {\n        text: &quot;Quit&quot;\n        onClicked: Qt.quit()\n    }\n}\n</code></pre>\n<h2>output</h2>\n<pre><code>a\nMust construct a QGuiApplication first.\nb\n</code></pre>\n<p>The error comes after <code>app.exec()</code> finishes, but before <code>main()</code> returns.</p>\n<p>Is there something else that needs to be done to shutdown PyQT cleanly?</p>\n"}, {"tags": ["python", "class", "variables"], "comments": [{"owner": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "edited": false, "score": 7, "creation_date": 1513813838, "post_id": 47915933, "comment_id": 82799960, "body": "in <code>function1</code>, <code>a</code> is local. You probably wanted <code>self.a=&#39;hello world, &#39;</code>"}, {"owner": {"reputation": 33, "user_id": 9122869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c8a75874770539935fd0460c8e62cee?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro", "link": "https://stackoverflow.com/users/9122869/alessandro"}, "reply_to_user": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "edited": false, "score": 1, "creation_date": 1513813913, "post_id": 47915933, "comment_id": 82799973, "body": "so, if I want to have the printing of function2, I should define a in function1 as self.a?"}, {"owner": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "edited": false, "score": 1, "creation_date": 1513814031, "post_id": 47915933, "comment_id": 82800005, "body": "Yes. In your code as it is, <code>self.a</code> (attribute <code>a</code> of the object <code>self</code>) is never defined. <code>a</code> in <code>function1</code> is local variable. See <a href=\"https://docs.python.org/3/tutorial/classes.html#python-scopes-and-namespaces\" rel=\"nofollow noreferrer\">Classes - Python Scopes and Namespaces</a>."}, {"owner": {"reputation": 33, "user_id": 9122869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c8a75874770539935fd0460c8e62cee?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro", "link": "https://stackoverflow.com/users/9122869/alessandro"}, "reply_to_user": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "edited": false, "score": 0, "creation_date": 1513814109, "post_id": 47915933, "comment_id": 82800025, "body": "Thanks to everyone ;) now, it finally works"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 9122869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c8a75874770539935fd0460c8e62cee?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro", "link": "https://stackoverflow.com/users/9122869/alessandro"}, "edited": false, "score": 0, "creation_date": 1513813995, "post_id": 47915964, "comment_id": 82799997, "body": "and do I need to use <b>init</b>, or is not compulsory in a class?"}, {"owner": {"reputation": 30832, "user_id": 459745, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/08a2c6f16c0d4dad20d169d9d76848ac?s=128&d=identicon&r=PG", "display_name": "Hai Vu", "link": "https://stackoverflow.com/users/459745/hai-vu"}, "reply_to_user": {"reputation": 33, "user_id": 9122869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c8a75874770539935fd0460c8e62cee?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro", "link": "https://stackoverflow.com/users/9122869/alessandro"}, "edited": false, "score": 0, "creation_date": 1513814115, "post_id": 47915964, "comment_id": 82800026, "body": "It works the way it is. You only need <code>__init__</code> if you want to set <code>self.a</code> right after the object is created (instantiated)."}], "tags": [], "owner": {"reputation": 30832, "user_id": 459745, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/08a2c6f16c0d4dad20d169d9d76848ac?s=128&d=identicon&r=PG", "display_name": "Hai Vu", "link": "https://stackoverflow.com/users/459745/hai-vu"}, "is_accepted": false, "score": 3, "last_activity_date": 1513814199, "last_edit_date": 1513814199, "creation_date": 1513813853, "answer_id": 47915964, "question_id": 47915933, "link": "https://stackoverflow.com/questions/47915933/calling-variables-in-the-same-class-with-python/47915964#47915964", "title": "Calling variables in the same class with python", "body": "<p>What you need is:</p>\n\n<pre><code>    def function1(self):\n      self.a = 'hello world, '\n</code></pre>\n\n<p>Within <code>function1</code>, <code>a</code> is a local variable as someone stated, whereas <code>self.a</code> is an attribute attached to your current object.</p>\n"}, {"tags": [], "owner": {"reputation": 1146, "user_id": 3242426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6152ee90b2b5ea70b58e79a846757747?s=128&d=identicon&r=PG&f=1", "display_name": "Garrigan Stafford", "link": "https://stackoverflow.com/users/3242426/garrigan-stafford"}, "is_accepted": false, "score": 0, "last_activity_date": 1513814036, "creation_date": 1513814036, "answer_id": 47915984, "question_id": 47915933, "link": "https://stackoverflow.com/questions/47915933/calling-variables-in-the-same-class-with-python/47915984#47915984", "title": "Calling variables in the same class with python", "body": "<p>In <code>function1(self)</code> you need to change <code>a=</code> to <code>self.a=</code>. In your original code you were creating a local variable <code>a</code>, you need to explicitly use <code>self</code> to attach the variable <code>a</code> to the instance of the object and stay persistent across function calls.</p>\n"}, {"tags": [], "owner": {"reputation": 396, "user_id": 3540693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae966c7eaf577e02c4aca5443aef064f?s=128&d=identicon&r=PG", "display_name": "Pentux", "link": "https://stackoverflow.com/users/3540693/pentux"}, "is_accepted": true, "score": 0, "last_activity_date": 1513815260, "last_edit_date": 1513815260, "creation_date": 1513814505, "answer_id": 47916044, "question_id": 47915933, "link": "https://stackoverflow.com/questions/47915933/calling-variables-in-the-same-class-with-python/47916044#47916044", "title": "Calling variables in the same class with python", "body": "<p>Your <code>a</code> and <code>b</code> variables are local. You can only use these variables in the method scope. If you want a class attribute (shared with all the class) you have to set the like <code>self.a = ...</code> and <code>self.b = ...</code>.\nIn python is not necessary create a constructor method <code>__init__</code> neither initialize these attributes.\nBut in your example if you call <code>functions2</code> before <code>function1</code> it will crash because you are using one attribute that doen't exist. Then is recommended initialize the attributes.\nYou can initialize the attributes like this:</p>\n\n<pre><code>class Project:\n    a = ''\n    b = ''\n\n    def function1(self):\n        self.a='hello world,'\n\n    def function2(self):\n        self.b=self.a + ' I am alive'\n</code></pre>\n\n<p><strong>More things to keep in mind:</strong><br>\n1. The variables are in lower case and snake case: <code>project1 = Project()</code><br>\n2. Your prints won't print anything because your functions don't return anything. You have to return something like:</p>\n\n<pre><code>def function1():\n    return 'hello world,'\n</code></pre>\n\n<p>or if you need to set a and print:</p>\n\n<pre><code>def function1():\n    self.a = 'hello world,'\n    return self.a\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 9122869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c8a75874770539935fd0460c8e62cee?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro", "link": "https://stackoverflow.com/users/9122869/alessandro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1635, "favorite_count": 0, "accepted_answer_id": 47916044, "answer_count": 3, "score": 2, "last_activity_date": 1513815260, "creation_date": 1513813652, "last_edit_date": 1513814341, "question_id": 47915933, "link": "https://stackoverflow.com/questions/47915933/calling-variables-in-the-same-class-with-python", "title": "Calling variables in the same class with python", "body": "<p>I am trying to call a variable defined in a function, inside another function of the same class, but with <code>self</code> doesn't work.</p>\n\n<pre><code>class Project():\n    def function1(self):\n        a='hello world,'\n\n    def function2(self):\n        b=self.a + ' I am alive'\n\nProject1=Project()\nprint Project1.function1()\nprint Project1.function2()\n</code></pre>\n\n<p>python says: <code>Project instance has no attribute 'a'</code>.</p>\n\n<p>I don't know very well how to use classes. I didn't use <code>__init__</code> 'cause I do not have anything to put, is there maybe a way to add it even if I do not need it formally?</p>\n\n<p>Thanks for your help.</p>\n"}, {"tags": ["python", "python-3.x", "ubuntu-16.04"], "answers": [{"tags": [], "owner": {"reputation": 396, "user_id": 3540693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae966c7eaf577e02c4aca5443aef064f?s=128&d=identicon&r=PG", "display_name": "Pentux", "link": "https://stackoverflow.com/users/3540693/pentux"}, "is_accepted": true, "score": 0, "last_activity_date": 1513816765, "creation_date": 1513816765, "answer_id": 47916303, "question_id": 47915835, "link": "https://stackoverflow.com/questions/47915835/python-mysql-connector-installation-package/47916303#47916303", "title": "Python mysql.connector installation package", "body": "<p>The package is: <code>mysql-connector-python</code></p>\n\n<p><a href=\"https://pypi.python.org/pypi/mysql-connector-python\" rel=\"nofollow noreferrer\">https://pypi.python.org/pypi/mysql-connector-python</a><br>\nBe careful with the last version, I don't know if is fixed but there were some problems, try it and if doesn't work install the version 2.0.4</p>\n\n<p>Is the official connector for MySQL, you can find some examples <a href=\"https://dev.mysql.com/doc/connector-python/en/connector-python-example-connecting.html\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 7, "user_id": 9069739, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saTkI.png?s=128&g=1", "display_name": "jarmx", "link": "https://stackoverflow.com/users/9069739/jarmx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 47916303, "answer_count": 1, "score": 0, "last_activity_date": 1513816765, "creation_date": 1513812838, "question_id": 47915835, "link": "https://stackoverflow.com/questions/47915835/python-mysql-connector-installation-package", "title": "Python mysql.connector installation package", "body": "<p>I got a script from the internet to connect to a database, but there wasn't documentation of the packages. I searched all mysql packages but couldn't find the correct one. This is what the code imports:</p>\n\n<pre><code>import mysql.connector\nfrom mysql.connector import errorcode\n</code></pre>\n\n<p>and in some parts of the code they use this:</p>\n\n<pre><code>mysql.connector.connect(\n</code></pre>\n\n<p>does anyone knows the correct package? Im working in Ubuntu16.04 LTS btw</p>\n"}, {"tags": ["python", "regex", "directory", "escaping"], "comments": [{"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1513813154, "post_id": 47915831, "comment_id": 82799786, "body": "You wrote a regex and then appended it to a string, creating a string.  There&#39;s nowhere I&#39;m setting you apply the regex to the directory names."}, {"owner": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "edited": false, "score": 0, "creation_date": 1513813666, "post_id": 47915831, "comment_id": 82799917, "body": "You probably want to use <a href=\"https://docs.python.org/3/library/os.html#os.listdir\" rel=\"nofollow noreferrer\">os.listdir</a> or <a href=\"https://docs.python.org/3/library/os.html#os.walk\" rel=\"nofollow noreferrer\">os.walk</a> to iterate and check names with the regex <code>^\\d{4}2013$</code>. See <a href=\"https://stackoverflow.com/questions/973473/getting-a-list-of-all-subdirectories-in-the-current-directory\">Getting a list of all subdirectories in the current directory</a>."}], "answers": [{"tags": [], "owner": {"reputation": 388, "user_id": 6707099, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-piJ3cVj_PMs/AAAAAAAAAAI/AAAAAAAAAGo/IynFN5k_OAI/photo.jpg?sz=128", "display_name": "oBit91", "link": "https://stackoverflow.com/users/6707099/obit91"}, "is_accepted": false, "score": 0, "last_activity_date": 1513814448, "last_edit_date": 1513814448, "creation_date": 1513814085, "answer_id": 47915994, "question_id": 47915831, "link": "https://stackoverflow.com/questions/47915831/python-regex-as-part-of-directory-path-escape/47915994#47915994", "title": "Python - Regex as part of directory path - escape", "body": "<p>This code should do the trick:</p>\n\n<pre><code>import os\nimport shutil\nimport re\n\npattern = \"^\\d{4}2013$\"\nsearchDir = 'C:/Users/USER/Desktop/test/'\ninnerDirs = os.listdir(searchDir)\nfor dir in innerDirs:\n    if (re.search(pattern, dir)):\n        shutil.rmtree(searchDir + dir) \n</code></pre>\n\n<p>The code above will remove any \"date\" folder that ends with '2013'.</p>\n"}], "owner": {"reputation": 1, "user_id": 9124801, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t3UGolAB7Yw/AAAAAAAAAAI/AAAAAAAAAOs/avaZi62dBxA/photo.jpg?sz=128", "display_name": "Killah G", "link": "https://stackoverflow.com/users/9124801/killah-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 350, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513814448, "creation_date": 1513812817, "question_id": 47915831, "link": "https://stackoverflow.com/questions/47915831/python-regex-as-part-of-directory-path-escape", "title": "Python - Regex as part of directory path - escape", "body": "<p>I have a list of directories named by date MMDDYYYY (11222013).  I'm ultimately trying to delete all directories from the year 2013.    I believe my regex should be looking for 6 digits [0-9].  I've tried breaking the code into multiple variables but have had no luck.</p>\n\n<p>I suspect I'm not escaping the regex correctly.  I keep running into this error:  </p>\n\n<blockquote>\n  <p>FileNotFoundError: [WinError 3] The system cannot find the path specified: 'C:/U\n  sers/USER/Desktop/test/\\d{6}13'</p>\n</blockquote>\n\n<p>I've tried printing my output and I get this path:</p>\n\n<blockquote>\n  <p>C:/Users/USER/Desktop/test/\\d{6}13</p>\n</blockquote>\n\n<p>My code:</p>\n\n<pre><code>import os\nimport shutil\nimport re\nStrDir = 'C:/Users/USER/Desktop/test/'\nRegex = r\"\\d{6}\" + '13'\nprint (StrDir + Regex)\nshutil.rmtree (StrDir + Regex)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "opencv", "opencv3.0"], "comments": [{"owner": {"reputation": 942, "user_id": 2012809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IF0o7.png?s=128&g=1", "display_name": "Omni", "link": "https://stackoverflow.com/users/2012809/omni"}, "edited": false, "score": 0, "creation_date": 1513813387, "post_id": 47915793, "comment_id": 82799851, "body": "Looks like a kind of assert failure in the C++ code. Did you pass something empty to OpenCV which should not be empty?"}, {"owner": {"reputation": 23, "user_id": 9107428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a74418223e903de04b6205d34bde6f7?s=128&d=identicon&r=PG&f=1", "display_name": "KRK", "link": "https://stackoverflow.com/users/9107428/krk"}, "reply_to_user": {"reputation": 942, "user_id": 2012809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IF0o7.png?s=128&g=1", "display_name": "Omni", "link": "https://stackoverflow.com/users/2012809/omni"}, "edited": false, "score": 0, "creation_date": 1513816497, "post_id": 47915793, "comment_id": 82800627, "body": "No....Error..Line 28..somewhere around   for neigh in range(1, faceNeighborsMax, neighborStep):         faces = faceCascade.detectMultiScale(frameGray, 1.2, neigh)         frameClone = np.copy(frame)"}, {"owner": {"reputation": 252, "user_id": 6352720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c67607052a46db1c8405cde1f160b7a?s=128&d=identicon&r=PG&f=1", "display_name": "importnumpyasnp", "link": "https://stackoverflow.com/users/6352720/importnumpyasnp"}, "edited": false, "score": 0, "creation_date": 1513822145, "post_id": 47915793, "comment_id": 82801920, "body": "Try adding .xml after &#39;C:\\\\Users\\\\Mudit\\\\Desktop\\\\Thesis\\\\CNN-master\\\\haarcascade_&zwnj;&#8203;frontalface_default&#39;&zwnj;&#8203;?"}], "answers": [{"tags": [], "owner": {"reputation": 3203, "user_id": 1819423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6ruMr.png?s=128&g=1", "display_name": "Totoro", "link": "https://stackoverflow.com/users/1819423/totoro"}, "is_accepted": false, "score": 0, "last_activity_date": 1513826690, "creation_date": 1513826690, "answer_id": 47917473, "question_id": 47915793, "link": "https://stackoverflow.com/questions/47915793/opencv-web-cam-video-capture-issue/47917473#47917473", "title": "OpenCV Web Cam Video Capture issue", "body": "<p>Since </p>\n\n<pre><code>frameGray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)\n</code></pre>\n\n<p>does not result in an assertion, I think the image capture works correctly. You can add </p>\n\n<pre><code>cv2.imshow('Gray', frameGray)\n</code></pre>\n\n<p>to verify that the grayscale image is not empty</p>\n\n<p>The next suspect is the cascade classifier <code>faceCascade</code>. Do check if the path and the filename is correct and it has been loaded correctly. </p>\n"}], "owner": {"reputation": 23, "user_id": 9107428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a74418223e903de04b6205d34bde6f7?s=128&d=identicon&r=PG&f=1", "display_name": "KRK", "link": "https://stackoverflow.com/users/9107428/krk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 347, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513826690, "creation_date": 1513812453, "last_edit_date": 1513813130, "question_id": 47915793, "link": "https://stackoverflow.com/questions/47915793/opencv-web-cam-video-capture-issue", "title": "OpenCV Web Cam Video Capture issue", "body": "<p>I am new to OpenCV and Python as well.\nI am getting some errors in my code which I have tried my best but .....I hope anyone would help me out. I want that when I run the code it should capture 10-15 frames per second...below is the error I am getting...could anyone help me with the changes \nCode...</p>\n\n<pre><code>import cv2\nimport time\nimport sys\nimport numpy as np\n\nif __name__ == '__main__':\n    faceCascade = cv2.CascadeClassifier('C:\\\\Users\\\\Mudit\\\\Desktop\\\\Thesis\\\\CNN-master\\\\haarcascade_frontalface_default')\n    faceNeighborsMax = 10\n    neighborStep = 1\n\n    # Start default camera\n    video = cv2.VideoCapture(0);\n\n    # Number of frames to capture\n    num_frames = 10;\n    print(\"Capturing {0} frames\".format(num_frames))\n\n    # Start time\n    start = time.time()\n\n    # Grab a few frames\n    for i in range(0, num_frames):\n        ret, frame = video.read()\n\n    frameGray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)\n\n    for neigh in range(1, faceNeighborsMax, neighborStep):\n        faces = faceCascade.detectMultiScale(frameGray, 1.2, neigh)\n        frameClone = np.copy(frame)\n\n        # Display the image\n        for (x, y, w, h) in faces:\n            cv2.rectangle(frameClone, (x, y), (x + w, y + h), (255, 0, 0), 2)\n\n        cv2.putText(frameClone, \"# Neighbors = {}\".format(neigh), (10, 50),\n                    cv2.FONT_HERSHEY_SIMPLEX, 1, (0, 0, 255), 4)\n        cv2.imshow('Face Detection', frameClone)\n        if cv2.waitKey(500) &amp; 0xFF == 27:\n            cv2.destroyAllWindows()\n            sys.exit()\n\n    # End time\n    end = time.time()\n\n    # Time elapsed\n    seconds = end - start\n    print(\"Time taken : {0} seconds\".format(seconds))\n\n    # Calculate frames per second\n    fps = num_frames / seconds;\n    print(\"Estimated frames per second : {0}\".format(fps))\n\n    # Release video\n    video.release()\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>Traceback (most recent call last):   File \"C:/Users/Mudit/PycharmProjects/CNN/findframerateofacamera/webcam.py\", line 28, in &lt;module&gt;\n    faces = faceCascade.detectMultiScale(frameGray, 1.2, neigh) cv2.error: C:\\projects\\opencv-python\\opencv\\modules\\objdetect\\src\\cascadedetect.cpp:1698: error: (-215) !empty() in function cv::CascadeClassifier::detectMultiScale\n</code></pre>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1513812405, "post_id": 47915760, "comment_id": 82799596, "body": "Read a tutorial..."}, {"owner": {"reputation": 1, "user_id": 9124814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf313a40435d2662bcbdb2592cd9897d?s=128&d=identicon&r=PG&f=1", "display_name": "Cal Barker", "link": "https://stackoverflow.com/users/9124814/cal-barker"}, "reply_to_user": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1513812487, "post_id": 47915760, "comment_id": 82799618, "body": "I can\u2019t find one that does this for me though"}, {"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 2, "creation_date": 1513812592, "post_id": 47915760, "comment_id": 82799647, "body": "Tutorials aren&#39;t about finding somewhere that does things for you, but teaching you how to do things yourself..."}, {"owner": {"reputation": 1, "user_id": 9124814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf313a40435d2662bcbdb2592cd9897d?s=128&d=identicon&r=PG&f=1", "display_name": "Cal Barker", "link": "https://stackoverflow.com/users/9124814/cal-barker"}, "reply_to_user": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1513812664, "post_id": 47915760, "comment_id": 82799669, "body": "But if you can\u2019t do it yourself and the tutorial doesn\u2019t teach you how to do it what else are you supposed to do?"}, {"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1513812769, "post_id": 47915760, "comment_id": 82799697, "body": "Do you really think you are the first one to try to do such a thing? If others figured it out, you can figure it out too. It might just take you a little bit of effort."}, {"owner": {"reputation": 1, "user_id": 9124814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf313a40435d2662bcbdb2592cd9897d?s=128&d=identicon&r=PG&f=1", "display_name": "Cal Barker", "link": "https://stackoverflow.com/users/9124814/cal-barker"}, "reply_to_user": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1513813034, "post_id": 47915760, "comment_id": 82799761, "body": "Look I\u2019m asking for help, I have spent the last hour or so trying to research it and haven\u2019t really got anywhere. If you can\u2019t or don\u2019t want to help me in any other way then can we stop this. I\u2019m sure we both have better things to do"}, {"owner": {"reputation": 47, "user_id": 3746040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa98ddc0c36da8b023aecdacdb6c467?s=128&d=identicon&r=PG&f=1", "display_name": "Prem", "link": "https://stackoverflow.com/users/3746040/prem"}, "edited": false, "score": 0, "creation_date": 1513813210, "post_id": 47915760, "comment_id": 82799805, "body": "This might help you: <a href=\"http://stanford.edu/~mgorkove/cgi-bin/rpython_tutorials/Writing_Data_to_a_CSV_With_Python.php\" rel=\"nofollow noreferrer\">stanford.edu/~mgorkove/cgi-bin/rpython_tutorials/&hellip;</a>"}, {"owner": {"reputation": 5357, "user_id": 1030169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93b40f413b34463de22c81d35b4c1930?s=128&d=identicon&r=PG", "display_name": "jmoerdyk", "link": "https://stackoverflow.com/users/1030169/jmoerdyk"}, "edited": false, "score": 0, "creation_date": 1513813254, "post_id": 47915760, "comment_id": 82799814, "body": "Please see: <a href=\"http://meta.stackoverflow.com/q/284236\">Why is \u201cCan someone help me?\u201d not an actual question?</a>"}, {"owner": {"reputation": 1, "user_id": 9124814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf313a40435d2662bcbdb2592cd9897d?s=128&d=identicon&r=PG&f=1", "display_name": "Cal Barker", "link": "https://stackoverflow.com/users/9124814/cal-barker"}, "edited": false, "score": 0, "creation_date": 1513813392, "post_id": 47915760, "comment_id": 82799855, "body": "Sorry I forgot the ?"}, {"owner": {"reputation": 47, "user_id": 3746040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa98ddc0c36da8b023aecdacdb6c467?s=128&d=identicon&r=PG&f=1", "display_name": "Prem", "link": "https://stackoverflow.com/users/3746040/prem"}, "edited": false, "score": 0, "creation_date": 1513813505, "post_id": 47915760, "comment_id": 82799874, "body": "You should try writing code from the link as per your requirement and post the errors/problems you face."}, {"owner": {"reputation": 5357, "user_id": 1030169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93b40f413b34463de22c81d35b4c1930?s=128&d=identicon&r=PG", "display_name": "jmoerdyk", "link": "https://stackoverflow.com/users/1030169/jmoerdyk"}, "edited": false, "score": 1, "creation_date": 1513813562, "post_id": 47915760, "comment_id": 82799894, "body": "The point being that this site has very specific rules for what can be asked about. and if you&#39;re not asking a <i>specific</i> question, it&#39;s generally closed as too broad.  Break the problem down into smaller steps.  Find a tutorial about reading a CSV file, do that first, then tackle the next bit you don&#39;t know."}, {"owner": {"reputation": 74709, "user_id": 21945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631470ecb1d4fe8bd3be6d7e0dfe4449?s=128&d=identicon&r=PG", "display_name": "mhawke", "link": "https://stackoverflow.com/users/21945/mhawke"}, "edited": false, "score": 0, "creation_date": 1513817913, "post_id": 47915760, "comment_id": 82800928, "body": "@CalBarker: search for &#39;python csv tutorial&#39; on search engine and then read one of the many possible ones. That should take you from zero knowledge to something that you can at least start thinking about and tinkering with. I&#39;d be surprised if you were not able to solve the problem yourself quite quickly."}], "answers": [{"comments": [{"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 2, "creation_date": 1513813643, "post_id": 47915900, "comment_id": 82799914, "body": "Please don&#39;t encourage &quot;Do my work for me&quot; questions. You&#39;ll just get downvoted..."}], "tags": [], "owner": {"reputation": 43, "user_id": 7541810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faf937b4e2620c9d3c9798ccd648078?s=128&d=identicon&r=PG&f=1", "display_name": "branx", "link": "https://stackoverflow.com/users/7541810/branx"}, "is_accepted": false, "score": 0, "last_activity_date": 1513813424, "creation_date": 1513813424, "answer_id": 47915900, "question_id": 47915760, "link": "https://stackoverflow.com/questions/47915760/how-to-search-for-a-term-in-a-csv-file-and-retrieve-the-term-in-the-row-next-to/47915900#47915900", "title": "How to search for a term in a csv file and retrieve the term in the row next to it", "body": "<pre><code>with open(...) as f:\n    for line in f:\n        linesplit = line.split(,) # separate the line by comma (as its a csv)\n        websiteName = linesplit(column_number) # column_number is the column with the website names\n        if websiteName = websiteNameImSearchingFor:\n            password = linesplit(column_number + 1) # password is in next column over\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 952, "user_id": 7530245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf0b6f35f2d3b413a9108112e97deea3?s=128&d=identicon&r=PG&f=1", "display_name": "David Rosenman", "link": "https://stackoverflow.com/users/7530245/david-rosenman"}, "is_accepted": false, "score": 1, "last_activity_date": 1513814527, "creation_date": 1513814527, "answer_id": 47916045, "question_id": 47915760, "link": "https://stackoverflow.com/questions/47915760/how-to-search-for-a-term-in-a-csv-file-and-retrieve-the-term-in-the-row-next-to/47916045#47916045", "title": "How to search for a term in a csv file and retrieve the term in the row next to it", "body": "<p>So if I my csv file, which I've saved as passwords.csv looks like this: </p>\n\n<pre><code>website,password\nlinkedin,dan18234\ngmail,ba84jgga\nfacebook,d18mfg\n</code></pre>\n\n<p>I could use the package pandas to create a dataframe from the csv file. I'll save the dataframe as pw_data. (this is a good place to get started if you want to learn the basics of the pandas package <a href=\"https://pandas.pydata.org/pandas-docs/stable/10min.html\" rel=\"nofollow noreferrer\">https://pandas.pydata.org/pandas-docs/stable/10min.html</a> ) . I'll set the optional argument 'index_col' equal to 'website', so that the index of my dataframe (which by default would be 0, 1, 2, 3, etc...) will be the website names.</p>\n\n<pre><code>import pandas as pd\npw_data = pd.read_csv('passwords.csv', index_col='website')\nprint(pw_data)\n\n# What the dataframe will look like if you print it out:\n#           password\n# website            \n# linkedin   dan18234\n# gmail      ba84jgga\n# facebook     d18mfg \n</code></pre>\n\n<p>If I want to pull out the password for linked in and save it as linkedin_pw... here's all I have to do:</p>\n\n<pre><code>linkedin_pw = pw_data.at['linkedin','password']\n</code></pre>\n\n<p>And if I do <code>print(linkedin_pw)</code> I get <code>'dan18234'</code></p>\n\n<p>If you want to deal with csv files and data tables... pandas is usually your best option. The official pandas tutorial page is pretty good <a href=\"https://pandas.pydata.org/pandas-docs/stable/tutorials.html\" rel=\"nofollow noreferrer\">https://pandas.pydata.org/pandas-docs/stable/tutorials.html</a> . </p>\n"}], "owner": {"reputation": 1, "user_id": 9124814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf313a40435d2662bcbdb2592cd9897d?s=128&d=identicon&r=PG&f=1", "display_name": "Cal Barker", "link": "https://stackoverflow.com/users/9124814/cal-barker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "closed_date": 1513818494, "answer_count": 2, "score": -4, "last_activity_date": 1513814527, "creation_date": 1513812217, "last_edit_date": 1513812439, "question_id": 47915760, "link": "https://stackoverflow.com/questions/47915760/how-to-search-for-a-term-in-a-csv-file-and-retrieve-the-term-in-the-row-next-to", "closed_reason": "Needs more focus", "title": "How to search for a term in a csv file and retrieve the term in the row next to it", "body": "<p>I\u2019m trying to make a programme that will store passwords for websites. I have a csv file with a column with website names in it and in the next is the passwords. What I\u2019m trying to do is search for a website in the file and then go to the next column along and add that to a variable. </p>\n\n<p>I am new to python and don\u2019t really know were to start so unfortunately I don\u2019t have any code to show you what I am getting at. </p>\n\n<p>Hope this explains my situation and anyone can help me</p>\n\n<p>Thanks in advance </p>\n\n<p>Just to note I am using python 3.0</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1513812089, "post_id": 47915716, "comment_id": 82799508, "body": "What is wrong with your solution?"}, {"owner": {"reputation": 13, "user_id": 7023891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/558b5ef3d73d534954a133dbea26dc48?s=128&d=identicon&r=PG", "display_name": "overedge", "link": "https://stackoverflow.com/users/7023891/overedge"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1513812795, "post_id": 47915716, "comment_id": 82799703, "body": "Is a no cute or not optimised solution no ?"}], "answers": [{"tags": [], "owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "is_accepted": false, "score": 4, "last_activity_date": 1513812141, "creation_date": 1513812141, "answer_id": 47915746, "question_id": 47915716, "link": "https://stackoverflow.com/questions/47915716/regex-for-split-or-findall-each-digit-python/47915746#47915746", "title": "Regex for split or findall each digit python", "body": "<p>One solution without regex (that is not specific to digits) would be to use <code>itertools.groupby()</code>:</p>\n\n<pre><code>&gt;&gt;&gt; from itertools import groupby\n&gt;&gt;&gt; s = '2223334441214844'\n&gt;&gt;&gt; [''.join(g) for _, g in groupby(s)]\n['222', '333', '444', '1', '2', '1', '4', '8', '44']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 304245, "user_id": 216074, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/609c93bafd659500f83fde04802a9be5?s=128&d=identicon&r=PG", "display_name": "poke", "link": "https://stackoverflow.com/users/216074/poke"}, "is_accepted": true, "score": 4, "last_activity_date": 1513812683, "last_edit_date": 1513812683, "creation_date": 1513812233, "answer_id": 47915762, "question_id": 47915716, "link": "https://stackoverflow.com/questions/47915716/regex-for-split-or-findall-each-digit-python/47915762#47915762", "title": "Regex for split or findall each digit python", "body": "<p>The more flexible way would be to use <a href=\"https://docs.python.org/3/library/itertools.html#itertools.groupby\" rel=\"nofollow noreferrer\"><code>itertools.groupby</code></a> which is made to match consecutive groups in iterables:</p>\n\n<pre><code>&gt;&gt;&gt; s = '2223334441214844'\n&gt;&gt;&gt; import itertools\n&gt;&gt;&gt; [''.join(group) for key, group in itertools.groupby(s)]\n['222', '333', '444', '1', '2', '1', '4', '8', '44']\n</code></pre>\n\n<p>The <code>key</code> would be the single key that is being grouped on (in your case, the digit). And the <code>group</code> is an iterable of all the items in the group. Since the source iterable is a string, each item is a character, so in order to get back the fully combined group, we need to join the characters back together.</p>\n\n<p>You could also repeat the key for the length of the group to get this output:</p>\n\n<pre><code>&gt;&gt;&gt; [key * len(list(group)) for key, group in itertools.groupby(s)]\n['222', '333', '444', '1', '2', '1', '4', '8', '44']\n</code></pre>\n\n<p>If you wanted to use regular expressions, you could make use of backreferences to find consecutive characters without having to specify them explicitly:</p>\n\n<pre><code>&gt;&gt;&gt; re.findall('((.)\\\\2*)',  s)\n[('222', '2'), ('333', '3'), ('444', '4'), ('1', '1'), ('2', '2'), ('1', '1'), ('4', '4'), ('8', '8'), ('44', '4')]\n</code></pre>\n\n<p>For finding consecutive characters in a string, this is essentially the same that <code>groupby</code> will do. You can then filter out the combined match to get the desired result:</p>\n\n<pre><code>&gt;&gt;&gt; [x for x, *_ in re.findall('((.)\\\\2*)',  s)]\n['222', '333', '444', '1', '2', '1', '4', '8', '44']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 1, "last_activity_date": 1513812300, "creation_date": 1513812300, "answer_id": 47915771, "question_id": 47915716, "link": "https://stackoverflow.com/questions/47915716/regex-for-split-or-findall-each-digit-python/47915771#47915771", "title": "Regex for split or findall each digit python", "body": "<p>If you only need to extract consecutive identical digits, you may use a matching approach using <code>r'(\\d)\\1*'</code> regex:</p>\n\n<pre><code>import re\ns='2223334441214844'\nprint([x.group() for x in re.finditer(r'(\\d)\\1*', s)])\n# =&gt; ['222', '333', '444', '1', '2', '1', '4', '8', '44']\n</code></pre>\n\n<p>See the <a href=\"https://ideone.com/8eb7hG\" rel=\"nofollow noreferrer\">Python demo</a></p>\n\n<p>Here, </p>\n\n<ul>\n<li><code>(\\d)</code> - matches and captures into Group 1 any digit</li>\n<li><code>\\1*</code> - a backreference to Group 1 matching the same value, 0+ repetitions.</li>\n</ul>\n\n<p>This solution can be customized to match any specific consecutive chars (instead of <code>\\d</code>, you may use <code>\\S</code> - non-whitespace, <code>\\w</code> - word, <code>[a-fA-F]</code> - a specific set, etc.). If you replace <code>\\d</code> with <code>.</code> and use <code>re.DOTALL</code> modifier, it will work as the <code>itertools</code> solutions posted above.</p>\n"}, {"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1513812513, "creation_date": 1513812513, "answer_id": 47915801, "question_id": 47915716, "link": "https://stackoverflow.com/questions/47915716/regex-for-split-or-findall-each-digit-python/47915801#47915801", "title": "Regex for split or findall each digit python", "body": "<p>Use a capture group and backreference.</p>\n\n<pre><code>str = '2223334441214844'\n\nimport re\nprint([i[0] for i in re.findall(r'((\\d)\\2*)', str)])\n</code></pre>\n\n<p><code>\\2</code> matches whatever the <code>(\\d)</code> capture group matched. The list comprehension is needed because when the RE contains capture groups, <code>findall</code> returns a list of the capture groups, not the whole match. So we need an extra group to get the whole match, and then need to extract that group from the result.</p>\n"}, {"tags": [], "owner": {"reputation": 8912, "user_id": 5904928, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/jwFz9.png?s=128&g=1", "display_name": "Aaditya Ura", "link": "https://stackoverflow.com/users/5904928/aaditya-ura"}, "is_accepted": false, "score": 0, "last_activity_date": 1513831956, "creation_date": 1513831956, "answer_id": 47918140, "question_id": 47915716, "link": "https://stackoverflow.com/questions/47915716/regex-for-split-or-findall-each-digit-python/47918140#47918140", "title": "Regex for split or findall each digit python", "body": "<blockquote>\n  <p><strong>What about without importing any external module ?</strong></p>\n</blockquote>\n\n<p>You can create your own logic in pure python without importing any module Here is recursive approach, </p>\n\n<pre><code>string_1='2223334441214844'\n\nlist_2=[i for i in string_1]\n\n\ndef con(list_1):\n    group = []\n    if not list_1:\n        return 0\n    else:\n        track=list_1[0]\n        for j,i in enumerate(list_1):\n            if i==track[0]:\n                group.append(i)\n            else:\n                print(group)\n                return con(list_1[j:])\n\n        return group\n\n\n\nprint(con(list_2))\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>['2', '2', '2']\n['3', '3', '3']\n['4', '4', '4']\n['1']\n['2']\n['1']\n['4']\n['8']\n['4', '4']\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7023891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/558b5ef3d73d534954a133dbea26dc48?s=128&d=identicon&r=PG", "display_name": "overedge", "link": "https://stackoverflow.com/users/7023891/overedge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 298, "favorite_count": 0, "accepted_answer_id": 47915762, "answer_count": 5, "score": 0, "last_activity_date": 1513831956, "creation_date": 1513811946, "last_edit_date": 1513815416, "question_id": 47915716, "link": "https://stackoverflow.com/questions/47915716/regex-for-split-or-findall-each-digit-python", "title": "Regex for split or findall each digit python", "body": "<p>What is the best solution to split this <code>str</code> var into a continuous number list</p>\n\n<p>My solution : </p>\n\n<pre><code>&gt;&gt;&gt; str\n&gt; '2223334441214844'\n&gt;&gt;&gt; filter(None, re.split(\"(0+)|(1+)|(2+)|(3+)|(4+)|(5+)|(6+)|(7+)|(8+)|(9+)\", str))\n&gt; ['222', '333', '444', '1', '2', '1', '4', '8', '44']\n</code></pre>\n"}, {"tags": ["python", "math", "trigonometry"], "comments": [{"owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 1, "creation_date": 1513812185, "post_id": 47915713, "comment_id": 82799531, "body": "What values are you/the user entering when you get those errors? It might just be that you&#39;re entering values that are impossible to calculate. An adj that&#39;s longer than a hyp or something like that."}, {"owner": {"reputation": 78607, "user_id": 319403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG", "display_name": "cHao", "link": "https://stackoverflow.com/users/319403/chao"}, "edited": false, "score": 0, "creation_date": 1513812276, "post_id": 47915713, "comment_id": 82799559, "body": "Probably cause you&#39;re using variables you haven&#39;t given values to. (Let&#39;s say you pick &quot;B&quot;. You set *CAH, but then <i>use</i> *SOH.)"}, {"owner": {"reputation": 33, "user_id": 9124808, "user_type": "registered", "profile_image": "https://graph.facebook.com/2456318517927591/picture?type=large", "display_name": "Alex Barnett", "link": "https://stackoverflow.com/users/9124808/alex-barnett"}, "edited": false, "score": 0, "creation_date": 1513812410, "post_id": 47915713, "comment_id": 82799599, "body": "Just realised and edited that"}, {"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1513812539, "post_id": 47915713, "comment_id": 82799629, "body": "Because <code>oppDIVhyp</code> is probably not in [-1,1]..."}, {"owner": {"reputation": 33, "user_id": 9124808, "user_type": "registered", "profile_image": "https://graph.facebook.com/2456318517927591/picture?type=large", "display_name": "Alex Barnett", "link": "https://stackoverflow.com/users/9124808/alex-barnett"}, "edited": false, "score": 1, "creation_date": 1513812563, "post_id": 47915713, "comment_id": 82799636, "body": "Thanks mypetlion that was the problem m8"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1513812596, "post_id": 47915713, "comment_id": 82799651, "body": "@AlexBarnett If you want him to see your comment, put @ before the name to notify him."}, {"owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1513812808, "post_id": 47915713, "comment_id": 82799709, "body": "@Barmar I saw it."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1513812889, "post_id": 47915713, "comment_id": 82799730, "body": "@mypetlion He should still learn the proper way to use SO."}, {"owner": {"reputation": 51182, "user_id": 1468366, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2e313135581cf6ceaad355580af931f8?s=128&d=identicon&r=PG", "display_name": "MvG", "link": "https://stackoverflow.com/users/1468366/mvg"}, "reply_to_user": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1513814550, "post_id": 47915713, "comment_id": 82800128, "body": "@mypetlion: As your comment answered the question, I suggest you re-post it as an answer."}, {"owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "reply_to_user": {"reputation": 51182, "user_id": 1468366, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2e313135581cf6ceaad355580af931f8?s=128&d=identicon&r=PG", "display_name": "MvG", "link": "https://stackoverflow.com/users/1468366/mvg"}, "edited": false, "score": 0, "creation_date": 1513817527, "post_id": 47915713, "comment_id": 82800838, "body": "@MvG Done. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "is_accepted": true, "score": 2, "last_activity_date": 1513817496, "creation_date": 1513817496, "answer_id": 47916395, "question_id": 47915713, "link": "https://stackoverflow.com/questions/47915713/why-am-i-getting-math-domain-error-when-using-asin-acos-and-atan/47916395#47916395", "title": "Why am I getting math domain error when using asin, acos and atan?", "body": "<p>The <code>ValueError: math domain error</code> is produced when a function is being asked to calculate a value using parameters that don't make sense for the calculation. If you ask for the log of a negative number, for example. In this case, I'd bet that the user is entering values that are impossible for a right triangle. A hypotenuse that's shorter than one of the other two sides for example.</p>\n"}], "owner": {"reputation": 33, "user_id": 9124808, "user_type": "registered", "profile_image": "https://graph.facebook.com/2456318517927591/picture?type=large", "display_name": "Alex Barnett", "link": "https://stackoverflow.com/users/9124808/alex-barnett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 938, "favorite_count": 0, "accepted_answer_id": 47916395, "answer_count": 1, "score": 0, "last_activity_date": 1513817496, "creation_date": 1513811914, "last_edit_date": 1513812381, "question_id": 47915713, "link": "https://stackoverflow.com/questions/47915713/why-am-i-getting-math-domain-error-when-using-asin-acos-and-atan", "title": "Why am I getting math domain error when using asin, acos and atan?", "body": "<pre><code>import math\ndef SOH(oppositeSOH, hypotenuseSOH):\n    oppDIVhyp = oppositeSOH / hypotenuseSOH\n    soh = math.asin(oppDIVhyp)\n    print(\"The angle theta is equivelent to\", soh)\n\ndef CAH(adjacentCAH, hypotenuseCAH):\n    adjDIVhyp = adjacentCAH / hypotenuseCAH\n    cah = math.acos(adjDIVhyp)\n    print(\"Angle theta is equivelent to\", cah)\n\ndef TOA(oppositeTOA, adjacentTOA):\n    oppDIVhyp = oppositeTOA / adjacentTOA\n    toa = math.atan(oppDIVadj)\n    print(\"Angle theta is equivelent to\", toa)\n\nSOHCAHTOA = input(\"Do you want to calculate angle theta with a: soh, b:     cah, c: toh \")\nA = SOHCAHTOA.upper()\nif A == 'A':\n    oppositeSOH = int(input(\"Enter the length of the opposite side \"))\n    hypotenuseSOH = int(input(\"Enter the length of the hypotenuse \"))\n    SOH(oppositeSOH, hypotenuseSOH)\n\nif A == 'B':\n    adjacentCAH = int(input(\"Enter the length of the adjacent side \"))\n    hypotenuseCAH = int(input(\"Enter the length of the hypotenuse \"))\n    CAH(adjacentSOH, hypotenuseSOH)\n\nif A == 'C':\n    oppositeCAH = int(input(\"Enter the length of the opposite side \"))\n    adjacentCAH = int(input(\"Enter the length of the hypotenuse \"))\n    TOA(oppositeSOH, adjacentSOH)\n</code></pre>\n\n<p>When I put 'oppDIVhyp', 'adjDIVhyp', or 'oppDIVhyp' in math.a[sin, cos or tan], its a math domain error I get in return: </p>\n\n<pre><code>Traceback (most recent call last):\n    File \"C:\\Users\\Alex\\Documents\\sohcahtoa.py\", line 23, in &lt;module&gt;\n      SOH(oppositeSOH, hypotenuseSOH)\n    File \"C:\\Users\\Alex\\Documents\\sohcahtoa.py\", line 5, in SOH\n      soh = math.asin(oppDIVhyp)\nValueError: math domain error\n</code></pre>\n\n<p>What does the math domain error mean?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 749, "user_id": 5760411, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/91bb2e1992d06a35066e2d77dfe66249?s=128&d=identicon&r=PG&f=1", "display_name": "Brendan", "link": "https://stackoverflow.com/users/5760411/brendan"}, "edited": false, "score": 1, "creation_date": 1513811920, "post_id": 47915698, "comment_id": 82799457, "body": "Could you post your error message or your output from this program?"}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1513812049, "post_id": 47915698, "comment_id": 82799497, "body": "<a href=\"https://docs.python.org/2.4/lib/truth.html\" rel=\"nofollow noreferrer\">docs.python.org/2.4/lib/truth.html</a>  - read it, remember it. Several <i>*things*</i> in python are considered <code>False</code> - like any kind of <code>empty set</code>, <code>list</code>, <code>dict</code> or ...... <code>0</code>"}, {"owner": {"reputation": 22012, "user_id": 194586, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1a71658d81f8a82a8122050f21bb86d3?s=128&d=identicon&r=PG", "display_name": "Nick T", "link": "https://stackoverflow.com/users/194586/nick-t"}, "edited": false, "score": 0, "creation_date": 1513812812, "post_id": 47915698, "comment_id": 82799711, "body": "Many things: 1) You call the <code>human</code>/<code>comp</code> functions once, rather than in your loop. 2) <code>choice</code> in the <code>choose()</code> function will refer to a local variable and not overwrite the global...  Start with a program that has simpler logic (e.g. guess a number), get that flow working, then move the RPS logic back."}, {"owner": {"reputation": 942, "user_id": 2012809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IF0o7.png?s=128&g=1", "display_name": "Omni", "link": "https://stackoverflow.com/users/2012809/omni"}, "edited": false, "score": 2, "creation_date": 1513812834, "post_id": 47915698, "comment_id": 82799717, "body": "If your program does not what you expect, there are generally 2 options: 1. use a debugger and go through it line by line. 2. cut it down until you understand what it does."}], "answers": [{"comments": [{"owner": {"reputation": 7454, "user_id": 2511718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3jZ8.jpg?s=128&g=1", "display_name": "bgse", "link": "https://stackoverflow.com/users/2511718/bgse"}, "edited": false, "score": 0, "creation_date": 1513814321, "post_id": 47915885, "comment_id": 82800074, "body": "This doesn&#39;t really work as intended since you are only letting the computer make a choice once, plus encouraging a beginner to make excessive usage of globals is promoting bad habits, ultimately doing more harm than good."}, {"owner": {"reputation": 11, "user_id": 9124812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc2137707b6925795196aaf3ea46c384?s=128&d=identicon&r=PG&f=1", "display_name": "nashishi", "link": "https://stackoverflow.com/users/9124812/nashishi"}, "edited": false, "score": 0, "creation_date": 1513816144, "post_id": 47915885, "comment_id": 82800542, "body": "heck thank you! unfortunately this is an assignment for school and we haven&#39;t gone over the making something global thing  yet ^^;;; (its frustrating lol) is there any other way? if not, thank you for your code nonetheless!"}, {"owner": {"reputation": 380, "user_id": 8016768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39bfe45a303d7156e630c1bbaa3eb9b?s=128&d=identicon&r=PG&f=1", "display_name": "chemical", "link": "https://stackoverflow.com/users/8016768/chemical"}, "edited": false, "score": 0, "creation_date": 1513816564, "post_id": 47915885, "comment_id": 82800647, "body": "Updated without globals, and the computers choice changes every round."}], "tags": [], "owner": {"reputation": 380, "user_id": 8016768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39bfe45a303d7156e630c1bbaa3eb9b?s=128&d=identicon&r=PG&f=1", "display_name": "chemical", "link": "https://stackoverflow.com/users/8016768/chemical"}, "is_accepted": false, "score": 3, "last_activity_date": 1513817617, "last_edit_date": 1513817617, "creation_date": 1513813290, "answer_id": 47915885, "question_id": 47915698, "link": "https://stackoverflow.com/questions/47915698/python-function-not-running/47915885#47915885", "title": "Python Function not running?", "body": "<p>Here is my take on your code. \n<br><br>\nThe main reason it wasn't running is that your  <code>cscore</code> variable was being referenced before it was initialized, because you had setup <code>cscore</code> as a <code>global</code> variable, but didn't declare it as a <code>global</code> variable in your function.\n<br><br>\nYou also needed to import the <code>random</code> library\n<br><br>\nAlso instead of doing 4 <code>if/then</code> statements I combined them into 1 <code>if/then</code> statement\n<br><br>\nEDIT: cleaned up the code a little more\n<br><br>\nEDIT 2: no more globals, avoid globals if possible</p>\n\n<pre><code>import random    \n\n\ndef get_human_choice():\n    valid_choice = False\n    while not valid_choice:\n        choice = input(\"\\nWhat do you choose? &lt;rock, paper, scissors&gt;: \")\n        if choice == 'rock' or 'paper' or 'scissors':\n            valid_choice = True\n\n    return choice   \n\n\ndef get_comp_choice():\n    rps = ('rock', 'paper', 'scissors')\n    comp_choice = random.choice(rps)\n    return comp_choice    \n\n\ndef human_winner(comp_choice):\n    print(\"The computer chooses: %s\" % comp_choice)\n    print(\"Human wins this round.\")    \n\n\ndef comp_winner(comp_choice):\n    print(\"The computer chooses: %s\" % comp_choice)\n    print(\"Computer wins this round.\")    \n\n\ndef stats(attempts, human_score, comp_scored, tie_score):\n    print(\"Finished game number: %s\" % attempts)\n    print('Human Score: %s' % human_score)\n    print('Computer Score: %s' % comp_scored)\n    print('Ties: %s' % tie_score)    \n\n\ndef play_game(human_score, comp_score, tie_score):\n    choice = get_human_choice()\n    comp_choice = get_comp_choice()    \n\n    if choice == 'rock':\n        if comp_choice == 'scissors':\n            human_winner(comp_choice)\n            human_score += 1\n        else:\n            comp_winner(comp_choice)\n            comp_score += 1\n    elif choice == 'scissors':\n        if comp_choice == 'paper':\n            human_winner(comp_choice)\n            human_score += 1\n        else:\n            comp_winner(comp_choice)\n            comp_score += 1\n    elif choice == 'paper':\n        if comp_choice == 'rock':\n            human_winner(comp_choice)\n            human_score += 1\n        else:\n            comp_winner(comp_choice)\n            comp_score += 1\n    elif choice == comp_choice:\n        print(\"Tie.\")\n        tie_score += 1    \n\n    return human_score, comp_score, tie_score    \n\n\nif __name__ == '__main__':\n    tries = 1\n    h_score, c_score, t_score = 0, 0, 0\n    while tries &lt;= 10:\n        h_score, c_score, t_score = play_game(h_score, c_score, t_score)    \n\n        if tries == 10:\n            print(\"\\nLimit reached!\\n\")\n            stats(tries, h_score, c_score, t_score)\n            break\n        else:\n            tries += 1\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9124812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc2137707b6925795196aaf3ea46c384?s=128&d=identicon&r=PG&f=1", "display_name": "nashishi", "link": "https://stackoverflow.com/users/9124812/nashishi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513817617, "creation_date": 1513811820, "last_edit_date": 1513816638, "question_id": 47915698, "link": "https://stackoverflow.com/questions/47915698/python-function-not-running", "title": "Python Function not running?", "body": "<p>It's my first time here and I'm kinda panicking. I have an assignment to code Rock, Paper, Scissors in Python. (I use Python 3.1) and for some reason the function is not running...?</p>\n\n<p>Here's the code:</p>\n\n<pre><code>hscore = 0\ncscore = 0\ntries = 0\n\n#computer choice\nrock = (\"rock\")\npaper = (\"paper\")\nscissors = (\"scissors\")\nrps = (rock, paper, scissors)\ncchoice = random.choice(rps)\nchoice = input(\"\\nWhat do you choose? &lt;rock, paper, scissors&gt;: \")\ntries +=1\n\ndef humanfunction():\n    if choice == \"rock\":\n        if cchoice == scissors:\n            print(\"Human wins this round.\")\n            hscore +=1\n    if choice == \"scissors\":\n        if cchoice == paper:\n            print(\"Human wins this round.\")\n            hscore +=1\n    if choice == \"paper\":\n        if cchoice == rock:\n            print(\"Human wins this round.\")\n            hscore +=1\n    if cchoice == choice:\n        print(\"Tie.\")\ndef compfunction():\n    if cchoice == scissors:\n        if choice == \"paper\":\n            print(\"Computer wins this round.\")\n            cscore +=1\n    if cchoice == rock:\n        if choice == \"scissors\":\n            print(\"Computer wins this round.\")\n            cscore +=1\n    if cchoice == paper:\n        if choice == \"rock\":\n            print(\"Computer wins this rounud.\")\n            cscore +=1\n    if cchoice == choice:\n        print(\"Tie.\")\n\ndef choose():\n    tries = 0\n    while 0 == 0:\n        choice = input(\"\\nWhat do you choose? &lt;rock, paper, scissors&gt;: \")\n        tries +=1\n        print(\"\\nHuman choice: \", choice)\n        print(\"Computer choice: \", cchoice)\n        print(\"Finished game number\", tries)\n        if tries == 10:\n            print(\"Limit reached!\")\n            break\nhumanfunction()\ncompfunction()\nchoose()\n</code></pre>\n\n<p>I've been trying to solve this for days now and for some reason, when I run the code, it doesn't show up who won. Help would be appreciated &lt;3</p>\n\n<p>EDIT:\nhere's what i get when i run the code:\n<a href=\"https://i.stack.imgur.com/YTNtR.png\" rel=\"nofollow noreferrer\">output</a></p>\n\n<p>the program is actually supposed to show this: \n<a href=\"https://i.stack.imgur.com/ng6Rx.png\" rel=\"nofollow noreferrer\">output2</a></p>\n"}, {"tags": ["python", "xpath", "html-table", "scrapy", "scrapy-spider"], "comments": [{"owner": {"reputation": 23944, "user_id": 1305969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wlo8z.png?s=128&g=1", "display_name": "zx485", "link": "https://stackoverflow.com/users/1305969/zx485"}, "edited": false, "score": 4, "creation_date": 1513811764, "post_id": 47915676, "comment_id": 82799418, "body": "Please include code as text and not as image."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1513813615, "post_id": 47915676, "comment_id": 82799905, "body": "put HTML as text, not screenshot. Or add url to question."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1513813712, "post_id": 47915676, "comment_id": 82799929, "body": "try <code>&quot;(&#47;&#47;td)[3]&#47;text()&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8237797, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-oJnr1ztlabE/AAAAAAAAAAI/AAAAAAAAACs/vkNC-doKpBY/photo.jpg?sz=128", "display_name": "Xiaowei Cheng", "link": "https://stackoverflow.com/users/8237797/xiaowei-cheng"}, "edited": false, "score": 0, "creation_date": 1513873951, "post_id": 47916180, "comment_id": 82826703, "body": "Thank you so much!"}], "tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": true, "score": 0, "last_activity_date": 1513816399, "last_edit_date": 1513816399, "creation_date": 1513815684, "answer_id": 47916180, "question_id": 47915676, "link": "https://stackoverflow.com/questions/47915676/cant-locate-xpath-for-td-scrapyspider/47916180#47916180", "title": "can&#39;t locate xpath for td scrapyspider", "body": "<p>If you need all <code>td</code> then use <code>xpath('//td')</code></p>\n\n<pre><code>import lxml.html\n\nhtml = '''\n&lt;tr&gt;\n    &lt;td&gt;10&lt;/td&gt;\n    &lt;td&gt;$681&lt;/td&gt;\n    &lt;td&gt;Wednesday&lt;/td&gt;\n    &lt;td&gt;other&lt;/td&gt;\n    &lt;td&gt;data&lt;/td&gt;\n&lt;/tr&gt;\n'''\n\nsoup = lxml.html.fromstring(html)\nall_td = soup.xpath('//td')\n\nfor td in all_td:\n    print(td.text)\n</code></pre>\n\n<p>Result</p>\n\n<pre><code>10\n$681\nWednesday\nother\ndata\n</code></pre>\n\n<p>If you need only some of <code>td</code> then get all and later use index ie <code>[2]</code>, or slicing <code>[2:]</code></p>\n\n<pre><code>for td in all_td[2:]:\n    print(td.text)\n</code></pre>\n\n<p>Result</p>\n\n<pre><code>Wednesday\nother\ndata\n</code></pre>\n\n<p>You can get only one using <code>[3]</code> directly in xpath <code>xpath('//td[3]')</code></p>\n\n<pre><code>import lxml.html\n\nhtml = '''\n&lt;tr&gt;\n    &lt;td&gt;10&lt;/td&gt;\n    &lt;td&gt;$681&lt;/td&gt;\n    &lt;td&gt;Wednesday&lt;/td&gt;\n&lt;/tr&gt;\n'''\n\nsoup = lxml.html.fromstring(html)\ndate = soup.xpath('//td[3]/text()')[0]\n\nprint(date)\n</code></pre>\n\n<p>Result</p>\n\n<pre><code>Wednesday\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8237797, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-oJnr1ztlabE/AAAAAAAAAAI/AAAAAAAAACs/vkNC-doKpBY/photo.jpg?sz=128", "display_name": "Xiaowei Cheng", "link": "https://stackoverflow.com/users/8237797/xiaowei-cheng"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "closed_date": 1513822709, "accepted_answer_id": 47916180, "answer_count": 1, "score": -4, "last_activity_date": 1513816399, "creation_date": 1513811602, "last_edit_date": 1513814862, "question_id": 47915676, "link": "https://stackoverflow.com/questions/47915676/cant-locate-xpath-for-td-scrapyspider", "closed_reason": "Not suitable for this site", "title": "can&#39;t locate xpath for td scrapyspider", "body": "<p>I am trying to create a spider to get the following information <code>10, 861, Wednesday</code> from the <code>td</code> and much more for next many <code>td</code>. Please see the picture. Thank you so much!!!</p>\n\n<p><img src=\"https://i.stack.imgur.com/Yhb2z.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1513811721, "post_id": 47915670, "comment_id": 82799405, "body": "Have you made any attempt to figure this out on your own? The Python documentation is quite good."}, {"owner": {"reputation": 4473, "user_id": 3002273, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/14663c07f99bd2fdc191b05db9d3e900?s=128&d=identicon&r=PG&f=1", "display_name": "ignorance", "link": "https://stackoverflow.com/users/3002273/ignorance"}, "edited": false, "score": 1, "creation_date": 1513811964, "post_id": 47915670, "comment_id": 82799469, "body": "From <a href=\"http://perldoc.perl.org/functions/warn.html\" rel=\"nofollow noreferrer\">Perl docs</a> &quot;Prints the value of LIST to STDERR. If the last element of LIST does not end in a newline&quot;. <a href=\"https://stackoverflow.com/questions/5574702/how-to-print-to-stderr-in-python\">First link</a> after googling &quot;python Prints the value of LIST to STDERR&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 2358, "user_id": 1277637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/c2ADe.jpg?s=128&g=1", "display_name": "mattjegan", "link": "https://stackoverflow.com/users/1277637/mattjegan"}, "is_accepted": true, "score": 4, "last_activity_date": 1559873521, "last_edit_date": 1559873521, "creation_date": 1513820154, "answer_id": 47916707, "question_id": 47915670, "link": "https://stackoverflow.com/questions/47915670/python-equivalent-of-perls-warn/47916707#47916707", "title": "Python equivalent of Perl&#39;s &#39;warn&#39;?", "body": "<p>If you are looking for the equivalent of raising warnings you can use pythons <code>warnings</code> module like so:</p>\n\n\n\n<pre><code>from warnings import warn\n\nwarn('Your message here', Warning)\n</code></pre>\n\n<p>This will display <code>__main__:1: Warning: my message here</code> on stderr.</p>\n\n<p>If you are looking for the equivalent of raising errors you can use pythons <code>Exception</code> class like so:</p>\n\n\n\n<pre><code>raise Exception('Your message here')\n</code></pre>\n\n<p>This will display <code>Exception: Your message here</code> on stderr.</p>\n"}], "owner": {"reputation": 147, "user_id": 8469861, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/qMnAc.jpg?s=128&g=1", "display_name": "bailey.bailey", "link": "https://stackoverflow.com/users/8469861/bailey-bailey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 47916707, "answer_count": 1, "score": 3, "last_activity_date": 1614759698, "creation_date": 1513811552, "last_edit_date": 1614759698, "question_id": 47915670, "link": "https://stackoverflow.com/questions/47915670/python-equivalent-of-perls-warn", "title": "Python equivalent of Perl&#39;s &#39;warn&#39;?", "body": "<p>I'm trying to write a very simple address book webapp in Python.\nI'm new to Python but have had a fair amount of time writing in Perl, I want to know what is the equivalent to Perl's <code>warn</code> function in Python 3.6.</p>\n"}, {"tags": ["python", "tensorflow", "linear-regression"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 6036776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31c8440a22e5265843f2c42b0d956d0?s=128&d=identicon&r=PG&f=1", "display_name": "Kukai", "link": "https://stackoverflow.com/users/6036776/kukai"}, "edited": false, "score": 0, "creation_date": 1513823729, "post_id": 47916469, "comment_id": 82802253, "body": "It looks like I get a reasonable answer when I scale the values by 0.01.  Why do I need to scale the values when using tensorflow but the following sklearn code does not require scaling.      &#39;from sklearn import linear_model&#39;      &#39;regr = linear_model.LinearRegression()&#39;     &#39;regr.fit(performance_x, performance_y)&#39;      &#39;print regr.coef_&#39;"}, {"owner": {"reputation": 597, "user_id": 7818309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a15edab5b0ad1062ff983efb0a53b2?s=128&d=identicon&r=PG", "display_name": "Richard_wth", "link": "https://stackoverflow.com/users/7818309/richard-wth"}, "reply_to_user": {"reputation": 25, "user_id": 6036776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31c8440a22e5265843f2c42b0d956d0?s=128&d=identicon&r=PG&f=1", "display_name": "Kukai", "link": "https://stackoverflow.com/users/6036776/kukai"}, "edited": false, "score": 0, "creation_date": 1513829813, "post_id": 47916469, "comment_id": 82803584, "body": "@Kukai In the case of TensorFlow, the MSE loss diverged (became too large). One solution would be to scale the input. Another would be to use a small learning rate. I obtained an MSE around 33 with learning rate 1e-6 after 100k steps. In the case of Sklearn, since you did not parameterize how <code>linear_model</code> was trained (or did you?), I guess it used matrix inverse instead of gradient descent to calculate W."}, {"owner": {"reputation": 25, "user_id": 6036776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31c8440a22e5265843f2c42b0d956d0?s=128&d=identicon&r=PG&f=1", "display_name": "Kukai", "link": "https://stackoverflow.com/users/6036776/kukai"}, "edited": false, "score": 0, "creation_date": 1513878314, "post_id": 47916469, "comment_id": 82828882, "body": "Perfect!  Changing the learning rate worked.  Thanks for your help."}], "tags": [], "owner": {"reputation": 597, "user_id": 7818309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a15edab5b0ad1062ff983efb0a53b2?s=128&d=identicon&r=PG", "display_name": "Richard_wth", "link": "https://stackoverflow.com/users/7818309/richard-wth"}, "is_accepted": true, "score": 1, "last_activity_date": 1513818095, "creation_date": 1513818095, "answer_id": 47916469, "question_id": 47915615, "link": "https://stackoverflow.com/questions/47915615/error-in-simple-tensorflow-linear-regression/47916469#47916469", "title": "Error in simple tensorflow linear regression", "body": "<p>I scaled <code>performance_x</code> by <code>0.01</code>, i.e. <code>performance_x = np.stack((np.random.uniform(.24, .40, size), np.random.uniform(.80, 2.40, size), np.random.uniform(.80, 1.00, size), np.random.uniform(.15, .25, size)), axis=1)</code> and got an MSE around 0.0038 after 100k steps. </p>\n"}], "owner": {"reputation": 25, "user_id": 6036776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31c8440a22e5265843f2c42b0d956d0?s=128&d=identicon&r=PG&f=1", "display_name": "Kukai", "link": "https://stackoverflow.com/users/6036776/kukai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 47916469, "answer_count": 1, "score": 0, "last_activity_date": 1513818095, "creation_date": 1513811145, "question_id": 47915615, "link": "https://stackoverflow.com/questions/47915615/error-in-simple-tensorflow-linear-regression", "title": "Error in simple tensorflow linear regression", "body": "<p>I am just getting started with tensorflow.  I am trying to write a simple linear regression based off of an example I found online.</p>\n\n<p>I was able to get a reasonable answer when I used sklearn.</p>\n\n<p>Why is my MSE returning NaN?</p>\n\n<pre><code>import pandas as pd\nimport tensorflow as tf\nimport numpy as np\n\n# Create some fake data\nsize = 1000\nperformance_x = np.stack((np.random.uniform(24, 40, size), np.random.uniform(80, 240, size), np.random.uniform(80, 100, size), np.random.uniform(15, 25, size)), axis=1)\nperformance_y = np.sum(np.multiply(performance_x, [0.25, 1, 0.5, 0.75]), axis=1)\nperformance_y = performance_y + np.stack(np.random.uniform(-10, 10, size))\nperformance_y = np.reshape(performance_y, (size,1))\nn_dim = performance_x.shape[1]\n\n\n# Testing Tensorflow\n\nlearning_rate = 0.001\ntraining_epochs = 1000\ncost_history = np.empty(shape=[1], dtype=float)\n\n\nrnd_indices = np.random.rand(len(performance_x)) &lt; 0.80\n\ntrain_x = performance_x[rnd_indices]\ntrain_y = performance_y[rnd_indices]\n\ntest_x = performance_x[~rnd_indices]\ntest_y = performance_y[~rnd_indices]\n\n\nX = tf.placeholder(tf.float32, [None, n_dim])\nY = tf.placeholder(tf.float32, [None, 1])\n\nW = tf.Variable(tf.ones([n_dim, 1]))\n\ninit = tf.global_variables_initializer()\n\ny_ = tf.matmul(X, W)\n\ncost = tf.reduce_mean(tf.square(y_ - Y))\n\ntraining_step = tf.train.GradientDescentOptimizer(learning_rate).minimize(cost)\n\nsess = tf.Session()\nsess.run(init)\n\nfor epoch in range(training_epochs):\n  sess.run(training_step, feed_dict={X:train_x,Y:train_y})\n\npred_y = sess.run(y_, feed_dict={X: test_x})\n\nmse = tf.reduce_mean(tf.square(pred_y - test_y))\nprint(\"MSE: %.4f\" % sess.run(mse)) \n</code></pre>\n"}, {"tags": ["python", "django", "post", "request"], "comments": [{"owner": {"reputation": 708, "user_id": 2660006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6651198a3429631dae3236a10ee1d42?s=128&d=identicon&r=PG", "display_name": "Stuart Dines", "link": "https://stackoverflow.com/users/2660006/stuart-dines"}, "edited": false, "score": 0, "creation_date": 1513835361, "post_id": 47915570, "comment_id": 82805090, "body": "Which version of <code>pyopenssl</code> are you using? Maybe <a href=\"https://github.com/shazow/urllib3/pull/719\" rel=\"nofollow noreferrer\">github.com/shazow/urllib3/pull/719</a> could be the culprit"}, {"owner": {"reputation": 1698, "user_id": 2128414, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/EE8ag.jpg?s=128&g=1", "display_name": "Tsuna", "link": "https://stackoverflow.com/users/2128414/tsuna"}, "reply_to_user": {"reputation": 708, "user_id": 2660006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6651198a3429631dae3236a10ee1d42?s=128&d=identicon&r=PG", "display_name": "Stuart Dines", "link": "https://stackoverflow.com/users/2660006/stuart-dines"}, "edited": false, "score": 0, "creation_date": 1513883238, "post_id": 47915570, "comment_id": 82831286, "body": "@StuartDines where can I find the version of pyopenssl?"}], "owner": {"reputation": 1698, "user_id": 2128414, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/EE8ag.jpg?s=128&g=1", "display_name": "Tsuna", "link": "https://stackoverflow.com/users/2128414/tsuna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 273, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1513810794, "creation_date": 1513810794, "question_id": 47915570, "link": "https://stackoverflow.com/questions/47915570/typeerror-cannot-make-memory-view-because-object-does-not-have-the-buffer-dja", "title": "TypeError: cannot make memory view because object does not have the buffer - django", "body": "<p>I am trying to make a post request to mailchimp's api.  It works perfectly fine when I am doing it in my local machine but somehow when I push it into the cloud.  This error appears and I thought it was because of the python version since it's the only differences between local and the cloud.  In cloud it's python <code>2.7.6</code> local I am using <code>2.7.12</code></p>\n\n<p>I have searched up but a few issues only talks about other lib that's causing the error.  I didn't have new <code>requirements</code> installed at all.</p>\n\n<p>I can calling a <code>post request</code> by using something like <code>requests.post(MAILCHAMP_API, payload, headers=headers).json()</code></p>\n\n<p>Then I get an error of\n<code>cannot make memory view because object does not have the buffer interface</code>\n<code>Exception Location:    /usr/local/lib/python2.7/dist-packages/requests/packages/urllib3/contrib/pyopenssl.py in sendall, line 216</code></p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 2, "creation_date": 1513810875, "post_id": 47915560, "comment_id": 82799187, "body": "Try with <code>y = x &#47;&#47; i</code> which performs integer division."}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1513810945, "post_id": 47915560, "comment_id": 82799208, "body": "<a href=\"https://stackoverflow.com/a/2986161/7505395\">stackoverflow.com/a/2986161/7505395</a> - the short answer is;: floating point arythmetic is frought with rounding errors and what you see is not always what you get even if you see it due to the resolution of how floats are stored..."}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1513810969, "post_id": 47915560, "comment_id": 82799216, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2986150/python-floating-number\">python floating number</a>"}, {"owner": {"reputation": 131, "user_id": 8406938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cde7283ace0ca48b7dc26fd5ce4b88c8?s=128&d=identicon&r=PG&f=1", "display_name": "Allen W", "link": "https://stackoverflow.com/users/8406938/allen-w"}, "edited": false, "score": 4, "creation_date": 1513810970, "post_id": 47915560, "comment_id": 82799217, "body": "Because i*(x/i), the i cancel out and the result is x"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 6763429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a0B5R.jpg?s=128&g=1", "display_name": "trimonkeytri", "link": "https://stackoverflow.com/users/6763429/trimonkeytri"}, "edited": false, "score": 0, "creation_date": 1513814121, "post_id": 47915639, "comment_id": 82800027, "body": "Yup! That was it. I guess I just didn&#39;t realize i typed python and not python3 at the terminal. So I was in fact using 2 different versions. I know about //, just didn&#39;t know why I was seeing the discrepancy. Thanks all! -John"}], "tags": [], "owner": {"reputation": 6850, "user_id": 650884, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7475fa31c3962a357047617df181c680?s=128&d=identicon&r=PG", "display_name": "Pavel", "link": "https://stackoverflow.com/users/650884/pavel"}, "is_accepted": false, "score": 1, "last_activity_date": 1513811332, "creation_date": 1513811332, "answer_id": 47915639, "question_id": 47915560, "link": "https://stackoverflow.com/questions/47915560/simple-math-not-adding-up-in-python-for-loop/47915639#47915639", "title": "simple math not adding up in python For loop", "body": "<p>In Python 2.x <code>/</code> performs integer division, leading to what you expect:</p>\n\n<pre><code>$ python\nPython 2.7.12 (default, Nov 20 2017, 18:23:56) \n[GCC 5.4.0 20160609] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; x=20\n&gt;&gt;&gt; [x/i for i in range(1,7)]\n[20, 10, 6, 5, 4, 3]\n&gt;&gt;&gt; [x/i*i for i in range(1,7)]\n[20, 20, 18, 20, 20, 18]\n</code></pre>\n\n<p>But in Python 3, <code>/</code> performs a proper float division, such that the results are mathematically correct:</p>\n\n<pre><code>$ python3\nPython 3.5.2 (default, Nov 23 2017, 16:37:01) \n[GCC 5.4.0 20160609] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; x=20\n&gt;&gt;&gt; [x/i for i in range(1,7)]\n[20.0, 10.0, 6.666666666666667, 5.0, 4.0, 3.3333333333333335]\n&gt;&gt;&gt; [x/i*i for i in range(1,7)]\n[20.0, 20.0, 20.0, 20.0, 20.0, 20.0]\n</code></pre>\n\n<p>Just make sure you pick the interpreter you want and perform the operation you need. Remember: explicit is better than implicit! So, as others pointed out, just call <code>//</code> to do integer division.</p>\n"}, {"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1513813681, "post_id": 47915744, "comment_id": 82799922, "body": "Not sure why someone downvoted this, it&#39;s clearly the explanation for his discrepancy."}], "tags": [], "owner": {"reputation": 31, "user_id": 9064779, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-itgy6Byo0dg/AAAAAAAAAAI/AAAAAAAAC3U/LlP0CpO_5WQ/photo.jpg?sz=128", "display_name": "Nicholas Choi", "link": "https://stackoverflow.com/users/9064779/nicholas-choi"}, "is_accepted": false, "score": 1, "last_activity_date": 1573002233, "last_edit_date": 1573002233, "creation_date": 1513812137, "answer_id": 47915744, "question_id": 47915560, "link": "https://stackoverflow.com/questions/47915560/simple-math-not-adding-up-in-python-for-loop/47915744#47915744", "title": "simple math not adding up in python For loop", "body": "<p>The short answer: the key is that in python3 they seem to cast your division of two ints into floats instead of leaving them as ints. </p>\n\n<p>Here's my justification: </p>\n\n<p>I would guess that you are running two different versions of python: python3 when running the .py file, and python2 as your interpreter.</p>\n\n<p>Here's my output when I use python3:</p>\n\n<pre><code>/usr/local/bin$ python3\nPython 3.6.4\n&gt;&gt;&gt; print(3 * (20/3))\n20.0\n</code></pre>\n\n<p>And here's my output when i use python2:</p>\n\n<pre><code>/usr/local/bin$ python\nPython 2.7.13\n&gt;&gt;&gt; print(3 * (20/3))\n18\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6763429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a0B5R.jpg?s=128&g=1", "display_name": "trimonkeytri", "link": "https://stackoverflow.com/users/6763429/trimonkeytri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "closed_date": 1513831969, "answer_count": 2, "score": 0, "last_activity_date": 1573002233, "creation_date": 1513810718, "last_edit_date": 1513814200, "question_id": 47915560, "link": "https://stackoverflow.com/questions/47915560/simple-math-not-adding-up-in-python-for-loop", "closed_reason": "Not suitable for this site", "title": "simple math not adding up in python For loop", "body": "<p>Here's my code:</p>\n\n<pre><code>x = 20\nfor i in range(1,7):\n    y = x/i\n    print(i)    #  These lines are just to show what\n    print(y)    #  the code is doing. I know it's not elegant.\n    print(i*y)  #  And is not my final solution\n    print('\\n')\n</code></pre>\n\n<p>Here's my output:</p>\n\n<pre><code>1\n20.0\n20.0\n\n2\n10.0\n20.0\n\n3\n6.666666666666667\n20.0\n\n4\n5.0\n20.0\n\n5\n4.0\n20.0\n\n6\n3.3333333333333335\n20.0\n</code></pre>\n\n<p>So why is every answer to the equation the same (20)? When <code>i</code> clearly changes? Say for the third iteration, when <code>i=3</code>, going to the interpreter and performing <code>3*(20/3)</code> yields 18 correctly and not 20. So I'm not sure what's going on.</p>\n\n<p>This is answered below. The difference between floats in python2.7 and python3</p>\n"}, {"tags": ["python", "python-3.x", "attributeerror"], "comments": [{"owner": {"reputation": 388, "user_id": 6707099, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-piJ3cVj_PMs/AAAAAAAAAAI/AAAAAAAAAGo/IynFN5k_OAI/photo.jpg?sz=128", "display_name": "oBit91", "link": "https://stackoverflow.com/users/6707099/obit91"}, "edited": false, "score": 1, "creation_date": 1513810825, "post_id": 47915534, "comment_id": 82799171, "body": "where are you using <code>fnames</code> other than declaration?"}, {"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1513810981, "post_id": 47915534, "comment_id": 82799221, "body": "do you want a flat list as the final result ?"}], "answers": [{"comments": [{"owner": {"reputation": 9742, "user_id": 3848833, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/21958c044f4221396b316a0bdb70de4d?s=128&d=identicon&r=PG&f=1", "display_name": "cezar", "link": "https://stackoverflow.com/users/3848833/cezar"}, "edited": false, "score": 0, "creation_date": 1513811063, "post_id": 47915573, "comment_id": 82799250, "body": "Good idea with the <code>strip()</code>. It is more elegant and more pythonic than replacing newline character with space, which depending on the operating system might not always be just <code>\\n</code>."}], "tags": [], "owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "is_accepted": true, "score": 2, "last_activity_date": 1513810822, "creation_date": 1513810822, "answer_id": 47915573, "question_id": 47915534, "link": "https://stackoverflow.com/questions/47915534/attributeerror-list-object-has-no-attribute-replace-while-trying-to-remove/47915573#47915573", "title": "AttributeError: &#39;list&#39; object has no attribute &#39;replace&#39; while trying to remove &#39;/n&#39;", "body": "<p>The problem is that after <code>split</code> each <code>n</code> in <code>namelist</code> already is a <em>list</em> of strings.</p>\n\n<p>If you want to remove the newlines at the end of the lines, you can either reverse the two comprehensions, to first <code>remove</code> and then <code>split</code>, or just combine them into one. Also, instead of <code>replace</code>, you can use <code>strip</code> to get rid of the newline character at the end of the line.</p>\n\n<pre><code>namelist = [line.strip().split(' ') for line in file]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "is_accepted": false, "score": 0, "last_activity_date": 1513811110, "creation_date": 1513811110, "answer_id": 47915610, "question_id": 47915534, "link": "https://stackoverflow.com/questions/47915534/attributeerror-list-object-has-no-attribute-replace-while-trying-to-remove/47915610#47915610", "title": "AttributeError: &#39;list&#39; object has no attribute &#39;replace&#39; while trying to remove &#39;/n&#39;", "body": "<p><code>.readlines()</code> returns a list of lines, each ending with a <code>\\n</code>. There's no point to expect it anywhere else (provided that you use universal newlines when reading the file: mode <code>\"r\"</code>, not <code>\"rb\"</code>).</p>\n\n<p>The whole thing can be made a whole lot shorter is you just iterate over the file (it yields lines, too):</p>\n\n<pre><code>namelist = []\nfor line in input_file:  \n    namelist.extend(line.rstrip('\\n').split(' ')) \n</code></pre>\n\n<p>As a fun exercise, it can be made a one-liner (a bit less efficient):</p>\n\n<pre><code>namelist = sum((line.rstrip('\\n').split(' ') for line in file), [])\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 7180756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6114e498b881118df9933fd23621ef26?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/7180756/alec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5063, "favorite_count": 0, "accepted_answer_id": 47915573, "answer_count": 2, "score": 0, "last_activity_date": 1513811110, "creation_date": 1513810533, "question_id": 47915534, "link": "https://stackoverflow.com/questions/47915534/attributeerror-list-object-has-no-attribute-replace-while-trying-to-remove", "title": "AttributeError: &#39;list&#39; object has no attribute &#39;replace&#39; while trying to remove &#39;/n&#39;", "body": "<p>I've got a bunch of files that I need to rename. I've got the names in order in a text file and I need to remove the linebreaks that are inserted when reading the text file, but I keep getting this error.  <em>AttributeError: 'list' object has no attribute 'replace' while trying to remove '/n'</em></p>\n\n<p>Any and all help is appreciated, I really don't know what I'm doing.</p>\n\n<pre><code>from os import rename, listdir\n\n\nfnames = listdir('.')\nfile = open(\"names.txt\", \"r\")\nnamelist = [line.split(' ') for line in file.readlines()]\nnamelist = [n.replace('\\n', '') for n in namelist]\n\nprint (namelist)\n</code></pre>\n"}, {"tags": ["python", "django", "django-models"], "comments": [{"owner": {"reputation": 1536, "user_id": 6005145, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-8d0SktavI-o/AAAAAAAAAAI/AAAAAAAAAxU/Zrxn56xszBE/photo.jpg?sz=128", "display_name": "schrodigerscatcuriosity", "link": "https://stackoverflow.com/users/6005145/schrodigerscatcuriosity"}, "edited": false, "score": 2, "creation_date": 1513810848, "post_id": 47915487, "comment_id": 82799180, "body": "&quot;a kind of clown of stackoverflow&quot; hehe, you made an involuntary nice joke."}, {"owner": {"reputation": 5521, "user_id": 755851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bb0ef4d5aebec860f85f7c76b894fd?s=128&d=identicon&r=PG", "display_name": "Foon", "link": "https://stackoverflow.com/users/755851/foon"}, "edited": false, "score": 0, "creation_date": 1513887558, "post_id": 47915487, "comment_id": 82833362, "body": "This is an interesting question but there&#39;s a bit too much details.  I&#39;d suggest editing your code down to a smaller model and seeing if you still are having the error... if not, you might have answered your own question."}, {"owner": {"reputation": 1536, "user_id": 6005145, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-8d0SktavI-o/AAAAAAAAAAI/AAAAAAAAAxU/Zrxn56xszBE/photo.jpg?sz=128", "display_name": "schrodigerscatcuriosity", "link": "https://stackoverflow.com/users/6005145/schrodigerscatcuriosity"}, "edited": false, "score": 0, "creation_date": 1513893221, "post_id": 47915487, "comment_id": 82835569, "body": "Post the content of <code>questions_list.html</code>. You say &quot;In View360QuestionListView when i change the model to Question it fetch items from database&quot;, but those models have different field names, so in your template they should be call differently."}], "answers": [{"tags": [], "owner": {"reputation": 1052, "user_id": 4841787, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/AHfdD.jpg?s=128&g=1", "display_name": "NDZIE Patrick Joel", "link": "https://stackoverflow.com/users/4841787/ndzie-patrick-joel"}, "is_accepted": true, "score": 0, "last_activity_date": 1513964872, "creation_date": 1513964872, "answer_id": 47945419, "question_id": 47915487, "link": "https://stackoverflow.com/questions/47915487/is-it-possible-to-use-django-generic-class-based-view-with-a-database-view-as-mo/47945419#47945419", "title": "Is it possible to use django generic-class based view with a database view as model?", "body": "<p>As Guillermo chamorro said, the problem was in my template\ninstead of using the viewname_list i used question_list.\nThank you.</p>\n"}], "owner": {"reputation": 1052, "user_id": 4841787, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/AHfdD.jpg?s=128&g=1", "display_name": "NDZIE Patrick Joel", "link": "https://stackoverflow.com/users/4841787/ndzie-patrick-joel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 1, "accepted_answer_id": 47945419, "answer_count": 1, "score": -2, "last_activity_date": 1513964872, "creation_date": 1513810276, "last_edit_date": 1513838144, "question_id": 47915487, "link": "https://stackoverflow.com/questions/47915487/is-it-possible-to-use-django-generic-class-based-view-with-a-database-view-as-mo", "title": "Is it possible to use django generic-class based view with a database view as model?", "body": "<p>This is my problem, i'm building a q&amp;a website, i have <strong>questions, tags, category</strong> as models. I want to use django generic-class based view in other to display the list of questions in database. </p>\n\n<p>I have already done that using the Question class, but i don't have all the details that belong to another models like question category and tags so i decided to create a database view.</p>\n\n<p>Here is my models module</p>\n\n<pre><code>from django.db import models\nfrom ckeditor_uploader.fields import RichTextUploadingField\n\n\n\n\nclass QuestionCategory(models.Model):\n\n    name = models.CharField(max_length = 255, help_text=\"question\")\n    created_at = models.DateTimeField(auto_now_add=True)\n    last_edited_at = models.DateTimeField(auto_now=True)\n    image = models.FileField()\n\n\n    def __str__(self):\n\n        return self.name\n\nclass QuestionTag(models.Model):\n    title = models.CharField(max_length=255, primary_key=True)\n    description = models.TextField(null = True)\n\n    def __str__(self):\n        return self.title\n\n\nclass Question(models.Model):\n\n    title = models.CharField(max_length=1024)\n    nb_views = models.IntegerField(default=0)\n    anonymously = models.BooleanField(default = True)\n    created_at = models.DateTimeField(auto_now_add=True)\n    last_edited_at = models.DateTimeField(auto_now=True)\n    details = RichTextUploadingField(null = True)\n    #une question appartient \u00e0 une seule cat\u00e9gorie\n    category = models.ForeignKey('QuestionCategory', on_delete=models.SET_NULL, null=True)\n    tags = models.ManyToManyField(QuestionTag, help_text=\"Selectionnez un tag pour cette question\")\n\n    def __str__(self):\n        return self.title\n\n\n    def get_absolute_url(self):\n        return reverse('question-detail', args=[str(self.id)])\n\nclass Answer(models.Model):\n    nb_upvotes = models.IntegerField(default=0)\n    nb_downvotes = models.IntegerField(default=0)\n    nb_views = models.IntegerField(default = 0)\n    details = RichTextUploadingField()\n    question = models.ForeignKey(Question, on_delete=models.SET_NULL, null=True)\n    created_at = models.DateTimeField(auto_now_add=True)\n    last_edited_at = models.DateTimeField(auto_now=True)\n\n    def __str__(self):\n        return \"Answer \" + str(self.id) \n\n\nclass AnswerComment(models.Model):\n    nb_upvotes = models.IntegerField(default=0)\n    nb_downvotes = models.IntegerField(default =0)\n    details = models.TextField()\n    answer = models.ForeignKey(Answer, on_delete=models.CASCADE)\n    parent = models.ForeignKey('self', on_delete=models.CASCADE)\n    created_at = models.DateTimeField(auto_now_add=True)\n    last_edited_at = models.DateTimeField(auto_now=True)\n\n\nclass View360Question(models.Model):\n    id = models.BigIntegerField(primary_key=True)\n    title = models.TextField(max_length=1024)\n    nb_views = models.IntegerField()\n    created_at = models.DateTimeField()\n    last_edited_at = models.DateTimeField()\n    nb_answers = models.IntegerField()\n    tags = models.TextField()\n    category_name = models.TextField()\n    category_id = models.IntegerField()\n\n    def __str__(self):\n        return self.title\n\n    class Meta:\n        managed = False\n        db_table = \"qanda_view360question\"\n</code></pre>\n\n<p>And here is my views module</p>\n\n<pre><code>from django.shortcuts import render\nfrom django.views import generic\nfrom .models import Question, View360Question, QuestionCategory, Answer, QuestionTag, AnswerComment\n\n# Create your views here.\n\ndef index(request):\n\n    #on r\u00e9cup\u00e8re le nombre de questions\n    num_questions = Question.objects.all().count()\n\n    #nombre de questions anonymes\n    num_anonym_questions = Question.objects.filter(anonymously= True).count()\n\n    #nombre de r\u00e9ponses\n    num_answers = Answer.objects.all().count()\n\n    #nombre de Cat\u00e9gories\n    num_categories = QuestionCategory.objects.all().count() \n\n    return render(\n        request,\n        'index.html',\n        context={'num_questions': num_questions, 'num_anonym_questions': num_anonym_questions,\n        'num_answers': num_answers, 'num_categories': num_categories}\n    )\n\n\n\ndef qaIndex(request):\n\n    return render(request, 'qa.html')\n\n\ndef categoriesIndex(request):\n\n    return render(request, 'categories_index.html')\n\n\nclass View360QuestionListView(generic.ListView):\n    model = View360Question\n    template_name = 'questions/questions_list.html'\n</code></pre>\n\n<p>In View360QuestionListView when i change the model to Question it fetch items from database, but when i come back to View360Question which is the view i created, i always fetch an empty array, but in database the view returns items.</p>\n"}, {"tags": ["python", "pyodbc"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 8575198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/031d00e7c88b187514ecc5b086bee2a8?s=128&d=identicon&r=PG&f=1", "display_name": "PsychoPock", "link": "https://stackoverflow.com/users/8575198/psychopock"}, "is_accepted": false, "score": 2, "last_activity_date": 1513875371, "last_edit_date": 1513875371, "creation_date": 1513874183, "answer_id": 47929167, "question_id": 47915483, "link": "https://stackoverflow.com/questions/47915483/pyodbc-cant-connect-mssql-timeout/47929167#47929167", "title": "pyodbc cant connect mssql (Timeout)", "body": "<p>Try <code>SERVER</code> and <code>PORT</code> in one variable like this:\n<code>server = '192.168.0.19, 1433'</code> and remove <code>PORT</code>.</p>\n\n<p>If that doesn't work, try <code>{SQL Server}</code> in <code>DRIVER</code>.</p>\n"}], "owner": {"reputation": 3960, "user_id": 2959783, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/545d34855fbece473e6df31c29b22c43?s=128&d=identicon&r=PG&f=1", "display_name": "TyForHelpDude", "link": "https://stackoverflow.com/users/2959783/tyforhelpdude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1513875371, "creation_date": 1513810245, "question_id": 47915483, "link": "https://stackoverflow.com/questions/47915483/pyodbc-cant-connect-mssql-timeout", "title": "pyodbc cant connect mssql (Timeout)", "body": "<p>I have mssql in my windows host machine, and ubuntu in VMware. I try to connect this mssql from virtual machine with pyodbc module in python.</p>\n\n<pre><code>import pyodbc\n\nserver = '192.168.0.19'//host ip\ndatabase = 'mytestdb'\nusername = 'sa'\nport = \"1433\"\npassword = 'mypassword'\ncnxn = pyodbc.connect('DRIVER={ODBC Driver 13 for SQL Server};SERVER='+server+';PORT='+port+';DATABASE='+database+';UID='+username+';PWD='+ password)\ncursor = cnxn.cursor()\n</code></pre>\n\n<p>remote connection to my mssql instance is already enabled and I can login using same credentials so what might be problem here?</p>\n"}, {"tags": ["python", "python-3.x", "pyqt", "pyqt5"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 4610921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ba867364649ad5e30de6b3869a9c606?s=128&d=identicon&r=PG", "display_name": "joey leavell", "link": "https://stackoverflow.com/users/4610921/joey-leavell"}, "edited": false, "score": 0, "creation_date": 1513811273, "post_id": 47915581, "comment_id": 82799292, "body": "Awesome thank you very much! It wasn&#39;t exactly what I was looking for, but the code explained enough of what I needed to get me to the eventual resolution"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1513810840, "creation_date": 1513810840, "answer_id": 47915581, "question_id": 47915414, "link": "https://stackoverflow.com/questions/47915414/how-can-i-dynamically-add-remove-elements-in-an-element/47915581#47915581", "title": "How can I dynamically add/remove elements in an element?", "body": "<p>The problem is that when you pass a parent to a widget it is placed in the 0, 0 position with respect to the parent, in your case <code>QFrame</code> is on top of <code>QComboBox</code> since both are in the 0, 0 position. The proper thing is to use layouts. On the other hand you have to eliminate the widgets before adding new ones for it, we create a function that eliminates those items.</p>\n\n<pre><code>import sys\nfrom PyQt5.QtWidgets import *\n\ndef clearLayout(lay):\n    while lay.count() &gt; 0:\n        item = lay.takeAt(0)\n        widget = item.widget()\n        if widget:\n            widget.deleteLater()\n        del item\n\n\nclass GUI(QWidget):\n    def __init__(self):\n        super().__init__()\n        self.initgui()\n\n    def initgui(self):\n        lay = QHBoxLayout(self)\n        vlay1 = QVBoxLayout()\n        combobox = QComboBox(self)\n        combobox.addItems([str(i) for i in range(2, 11)])\n        vlay1.addWidget(combobox)\n        vlay1.addItem(QSpacerItem(20, 245, QSizePolicy.Minimum, QSizePolicy.Expanding))\n\n        self.vlay2 = QVBoxLayout()\n        lay.addLayout(vlay1)\n        lay.addLayout(self.vlay2)\n        self.comboboxchanged(combobox.currentText())\n        combobox.activated[str].connect(self.comboboxchanged)\n        self.setWindowTitle(\"Testing Easy Setup\")\n        self.show()\n\n    def comboboxchanged(self, text):\n        clearLayout(self.vlay2)\n        for num in range(0, int(text)):\n            self.vlay2.addWidget(QLineEdit(self))\n        self.vlay2.addItem(QSpacerItem(20, 245, QSizePolicy.Minimum, QSizePolicy.Expanding))\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    gui = GUI()\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 4610921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ba867364649ad5e30de6b3869a9c606?s=128&d=identicon&r=PG", "display_name": "joey leavell", "link": "https://stackoverflow.com/users/4610921/joey-leavell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 47915581, "answer_count": 1, "score": 1, "last_activity_date": 1560141621, "creation_date": 1513809774, "last_edit_date": 1560141621, "question_id": 47915414, "link": "https://stackoverflow.com/questions/47915414/how-can-i-dynamically-add-remove-elements-in-an-element", "title": "How can I dynamically add/remove elements in an element?", "body": "<p>Here's my code. I'm trying to make it such that as you change the dropdown box, it will dynamically show more or less QLineEdits for input. This is just the latest iteration of testing</p>\n\n<pre><code>import sys\nfrom PyQt5.QtWidgets import (QWidget, QPushButton, QLineEdit,\n    QInputDialog, QApplication, QComboBox, QFrame)\n\nimport numpy as np\n\n\nclass GUI(QWidget):\n\n    def __init__(self):\n        super().__init__()\n\n        self.initgui()\n\n    def initgui(self):\n        #\n        # Set up GUI \n        #\n        self.setGeometry(100, 100, 400, 400)\n        self.move(300, 300)\n        combobox = QComboBox(self)\n        for i in range(1, 10, 1):\n            combobox.addItem(str(i + 1))\n        combobox.activated[str].connect(self.comboboxchanged)\n        self.setWindowTitle(\"Testing Easy Setup\")\n        self.show()\n\n    def comboboxchanged(self, text):\n        frame = QWidget(self)\n        frame.hide()\n        for num in range(0, int(text), 1):\n            QLineEdit(frame).move(60, num * 19)\n        frame.show()\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    gui = GUI()\n    sys.exit(app.exec_())\n</code></pre>\n"}, {"tags": ["python", "sqlite"], "answers": [{"tags": [], "owner": {"reputation": 31155, "user_id": 4744514, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RQ2Np.jpg?s=128&g=1", "display_name": "MikeT", "link": "https://stackoverflow.com/users/4744514/miket"}, "is_accepted": true, "score": 0, "last_activity_date": 1513831838, "creation_date": 1513831838, "answer_id": 47918122, "question_id": 47915376, "link": "https://stackoverflow.com/questions/47915376/how-to-store-a-date-in-a-sqlite3-schema-for-flask/47918122#47918122", "title": "How to store a date in a SQLite3 schema for Flask?", "body": "<blockquote>\n  <p>I am aware that 'datetime' is not a valid data type for SQLite</p>\n</blockquote>\n\n<p>SQLite's flexibility results in virtually any column type being valid e.g.</p>\n\n<p><code>CREATE TABLE weidrcolumntypes (column1 rumplestiltskin, column2 weirdtestcolumn, column3 etc)</code></p>\n\n<p>is valid and will create a table with 3 columns (4 with <a href=\"https://sqlite.org/lang_createtable.html#rowid\" rel=\"nofollow noreferrer\">rowid</a> column) :-</p>\n\n<p><a href=\"https://i.stack.imgur.com/Yo8sn.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Yo8sn.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>SQLite's flexibility also allows any value to be stored in any column (an exception being the <a href=\"https://sqlite.org/lang_createtable.html#rowid\" rel=\"nofollow noreferrer\">rowid</a>, for tables that are not defined using <code>WITHOUT ROWID</code>, where the value must be an INTEGER).</p>\n\n<p>A more comprehensive answer (tagged for Android but the principles still apply) is <a href=\"https://stackoverflow.com/questions/45557278/how-flexible-restricive-are-sqlite-column-types\">here</a>.</p>\n\n<p><a href=\"https://sqlite.org/datatype3.html\" rel=\"nofollow noreferrer\">This may also be of interest</a>.</p>\n\n<p><strong>So in  brief any column type would be able to handle/store datetime.</strong></p>\n\n<blockquote>\n  <p>Take for example the following statements, would I store it as text\n  like the others?</p>\n</blockquote>\n\n<p>As per above even as it is the code you have would be usable. You may wish to specify a column type of <code>TEXT</code> or <code>INTEGER</code>.</p>\n\n<hr>\n\n<blockquote>\n  <p>If so, how would I then manipulate that later on, as a date?</p>\n</blockquote>\n\n<p>As for storing date time, Integer, Long or String could be used, the latter having the complimentary <a href=\"https://sqlite.org./lang_datefunc.html\" rel=\"nofollow noreferrer\">Date And Time Functions</a>. </p>\n\n<p>As such, you could do much of the manipulation within your queries which would be language independent.</p>\n"}], "owner": {"reputation": 3, "user_id": 9124737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af3f04660ccb72631ce754377cb132c8?s=128&d=identicon&r=PG&f=1", "display_name": "S.M", "link": "https://stackoverflow.com/users/9124737/s-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 47918122, "answer_count": 1, "score": 0, "last_activity_date": 1513831838, "creation_date": 1513809564, "last_edit_date": 1513813447, "question_id": 47915376, "link": "https://stackoverflow.com/questions/47915376/how-to-store-a-date-in-a-sqlite3-schema-for-flask", "title": "How to store a date in a SQLite3 schema for Flask?", "body": "<p>I am aware that 'datetime' is not a valid data type for SQLite, but I'm not quite sure what to replace it with. Take for example the following statements, would I store it as text like the others? If so, how would I then manipulate that later on, as a date?</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>drop table if exists entries;\ncreate table entries (\n  id integer primary key autoincrement,\n  title text not null,\n  'text' text not null,\n  date_created \n);\n</code></pre>\n"}, {"tags": ["python", "sqlalchemy"], "answers": [{"tags": [], "owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "is_accepted": true, "score": 1, "last_activity_date": 1513945252, "last_edit_date": 1513945252, "creation_date": 1513944343, "answer_id": 47941248, "question_id": 47915364, "link": "https://stackoverflow.com/questions/47915364/sqlalchemy-keyerror-when-looping-through-model-objects-in-order-to-copy-them/47941248#47941248", "title": "SQLAlchemy: KeyError when looping through model objects in order to copy them", "body": "<p>The reason why you're getting the exception is that you commit in the loop. All in all that's usually an antipattern. After first round <a href=\"http://docs.sqlalchemy.org/en/latest/orm/session_basics.html#committing\" rel=\"nofollow noreferrer\">the act of committing will expire the <code>Column</code> instances</a> that were in the session previously, so in the 2nd iteration <code>del colObj.id</code> raises, because the object has been expired and there's no loaded state. The solution is to simply move the commit after the loop.</p>\n"}], "owner": {"reputation": 2635, "user_id": 1435711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9fac7fe4c7290024faee8bfe6367f130?s=128&d=identicon&r=PG", "display_name": "Username", "link": "https://stackoverflow.com/users/1435711/username"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 744, "favorite_count": 0, "accepted_answer_id": 47941248, "answer_count": 1, "score": 0, "last_activity_date": 1513945252, "creation_date": 1513809487, "last_edit_date": 1513944504, "question_id": 47915364, "link": "https://stackoverflow.com/questions/47915364/sqlalchemy-keyerror-when-looping-through-model-objects-in-order-to-copy-them", "title": "SQLAlchemy: KeyError when looping through model objects in order to copy them", "body": "<p>I want to query rows and copy them while changing an attribute of each. Here's my code.</p>\n\n<pre><code> colObjs= db.session.query(Column).filter_by(chart_id=oldChartID).all()\n for colObj in colObjs:\n   make_transient(colObj)\n   print colObj.id\n   del colObj.id\n   colObj.chart_id= newChartID\n   db.session.add(colObj)\n   db.session.commit()\n</code></pre>\n\n<p>In this example, <code>colObjs</code> has two objects. I loop thru <code>colObjs</code>, going over each <code>colObj</code>. The first item in the loop copies fine. But when I try copying the second one, I get this error.</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/path/to/local/lib/python2.7/site-packages/flask/app.py\", line 1997, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"/path/to/local/lib/python2.7/site-packages/flask/app.py\", line 1985, in wsgi_app\n    response = self.handle_exception(e)\n  File \"/path/to/local/lib/python2.7/site-packages/flask/app.py\", line 1540, in handle_exception\n    reraise(exc_type, exc_value, tb)\n  File \"/path/to/local/lib/python2.7/site-packages/flask/app.py\", line 1982, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"/path/to/local/lib/python2.7/site-packages/flask/app.py\", line 1614, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n  File \"/path/to/local/lib/python2.7/site-packages/flask/app.py\", line 1517, in handle_user_exception\n    reraise(exc_type, exc_value, tb)\n  File \"/path/to/local/lib/python2.7/site-packages/flask/app.py\", line 1612, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"/path/to/local/lib/python2.7/site-packages/flask/app.py\", line 1598, in dispatch_request\n    return self.view_functions[rule.endpoint](**req.view_args)\n  File \"/path/to/myApp.py\", line 859, in copyGraphic\n    del colObj.id\n  File \"/path/to/local/lib/python2.7/site-packages/sqlalchemy/orm/attributes.py\", line 227, in __delete__\n    self.impl.delete(instance_state(instance), instance_dict(instance))\n  File \"/path/to/local/lib/python2.7/site-packages/sqlalchemy/orm/attributes.py\", line 679, in delete\n    del dict_[self.key]\nKeyError: 'id'\n</code></pre>\n\n<p>Furthermore, the output of the <code>print</code> statement on the first item of the loop shows the <code>coloObj</code> id, but the second one outputs <code>None</code>. </p>\n\n<p>Why does this error happen? How do I fix it? </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 1, "creation_date": 1513809653, "post_id": 47915362, "comment_id": 82798809, "body": "Shorter code isn&#39;t necessarily more efficient code. Unless this is for a code golf challenge, I&#39;m failing to see what&#39;s wrong with the solution you have."}, {"owner": {"reputation": 83, "user_id": 7320062, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQIwq.jpg?s=128&g=1", "display_name": "Bowen J Fung", "link": "https://stackoverflow.com/users/7320062/bowen-j-fung"}, "reply_to_user": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1513811671, "post_id": 47915362, "comment_id": 82799386, "body": "Good point, I suppose it&#39;s just because I use this type of operation a lot in other languages (where you can just use logical indexing), and I&#39;m looking for something similar in terms of ease of typing."}], "answers": [{"tags": [], "owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "is_accepted": false, "score": 7, "last_activity_date": 1513810473, "last_edit_date": 1513810473, "creation_date": 1513809623, "answer_id": 47915389, "question_id": 47915362, "link": "https://stackoverflow.com/questions/47915362/conditionally-replace-list-elements-with-values-from-shorter-list/47915389#47915389", "title": "Conditionally replace list elements with values from shorter list", "body": "<p>You can use an iterator made from the short list and just call <a href=\"https://docs.python.org/3/library/functions.html#next\" rel=\"nofollow noreferrer\">next</a> on it in the comprehension:</p>\n\n<pre><code>list1 = [1, 0, 1, 0, 1, 0]\nlist2 = [1, 2, 3]\n\nit2 = iter(list2)\n\n[x if x != 0 else next(it2) for x in list1]\n# [1, 1, 1, 2, 1, 3]\n</code></pre>\n\n<p>Note that you can provide a default value to <a href=\"https://docs.python.org/3/library/functions.html#next\" rel=\"nofollow noreferrer\">next</a> if there are not enough filler elements:</p>\n"}, {"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 1, "last_activity_date": 1513812230, "last_edit_date": 1513812230, "creation_date": 1513809629, "answer_id": 47915391, "question_id": 47915362, "link": "https://stackoverflow.com/questions/47915362/conditionally-replace-list-elements-with-values-from-shorter-list/47915391#47915391", "title": "Conditionally replace list elements with values from shorter list", "body": "<p>You can try this:</p>\n\n<pre><code>list1 = [1,0,1,0,1,0]\nlist2 = [1,2,3]\nnew_list = [list2[list1[:i].count(a)] if a != 1 else a for i, a in enumerate(list1)]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[1, 1, 1, 2, 1, 3]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 2, "creation_date": 1513810006, "post_id": 47915394, "comment_id": 82798926, "body": "While this works, you should note that every <code>pop(0)</code> is <code>O(N)</code>."}, {"owner": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "reply_to_user": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 0, "creation_date": 1513810689, "post_id": 47915394, "comment_id": 82799125, "body": "@schwobaseggl Nice catch."}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1513810710, "post_id": 47915394, "comment_id": 82799135, "body": "I guess you could reverse the list beforehand, and then call <code>pop()</code>. But then reversing a list is <code>O(N)</code>, which shouldn&#39;t be a problem."}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "reply_to_user": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 1, "creation_date": 1513810981, "post_id": 47915394, "comment_id": 82799220, "body": "@RoadRunner except as written it does <code>O(n)</code> <code>O(n)</code> pops, so it&#39;s <code>O(n^2)</code>. Reversing it first reduces that complexity to <code>O(n)</code> + <code>O(n)</code> instead."}], "tags": [], "owner": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "is_accepted": false, "score": 3, "last_activity_date": 1513809637, "creation_date": 1513809637, "answer_id": 47915394, "question_id": 47915362, "link": "https://stackoverflow.com/questions/47915362/conditionally-replace-list-elements-with-values-from-shorter-list/47915394#47915394", "title": "Conditionally replace list elements with values from shorter list", "body": "<p>Try something like:</p>\n\n<pre><code>[x if x else list2.pop(0) for x in list1]\n</code></pre>\n\n<p>Note this removes items from <code>list2</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "is_accepted": false, "score": 1, "last_activity_date": 1513811359, "last_edit_date": 1513811359, "creation_date": 1513810312, "answer_id": 47915494, "question_id": 47915362, "link": "https://stackoverflow.com/questions/47915362/conditionally-replace-list-elements-with-values-from-shorter-list/47915494#47915494", "title": "Conditionally replace list elements with values from shorter list", "body": "<p>If you want to use <a href=\"https://docs.python.org/3.6/library/functions.html#map\" rel=\"nofollow noreferrer\"><code>map()</code></a>, you could try this:</p>\n\n<pre><code>from collections import deque\n\nlist1 = [1,0,1,0,1,0]\nlist2 = [1,2,3]\n\nqueue = deque(list2)\n\nresult = list(map(lambda x : x if x else queue.popleft(), list1))\n\nprint(result)\n</code></pre>\n\n<p>Which outputs:</p>\n\n<pre><code>[1, 1, 1, 2, 1, 3]\n</code></pre>\n\n<p><strong>Note:</strong> I used a stack/queue data structure, <a href=\"https://docs.python.org/2/library/collections.html#collections.deque\" rel=\"nofollow noreferrer\"><code>collections.deque</code></a> to allow a <code>O(1)</code> <code>popleft()</code> from the front, instead of using <code>pop(0)</code>, which is <code>O(n)</code>. If you don't wish to use this library, you can just reverse <code>list2</code> beforehand, and call <code>pop()</code>, which is also <code>O(1)</code>. </p>\n"}], "owner": {"reputation": 83, "user_id": 7320062, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQIwq.jpg?s=128&g=1", "display_name": "Bowen J Fung", "link": "https://stackoverflow.com/users/7320062/bowen-j-fung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 499, "favorite_count": 0, "answer_count": 4, "score": 3, "last_activity_date": 1513812230, "creation_date": 1513809446, "question_id": 47915362, "link": "https://stackoverflow.com/questions/47915362/conditionally-replace-list-elements-with-values-from-shorter-list", "title": "Conditionally replace list elements with values from shorter list", "body": "<p>I am new to python and trying to simply replace the values of a list when they meet a condition with values from a shorter list.</p>\n\n<p>For example:</p>\n\n<pre><code>list1 = [1,0,1,0,1,0]\nlist2 = [1,2,3]\n</code></pre>\n\n<p>The output I want is:</p>\n\n<pre><code>list1 = [1,1,1,2,1,3]\n</code></pre>\n\n<p>I can use a loop with a counter:</p>\n\n<pre><code>counter = 0\nfor i, j in enumerate(list1):\n    if j == 1:\n        list1[i] = list2[counter]\n        counter += 1\n</code></pre>\n\n<p>But this seems inefficient for something so simple, so I'm guessing there might be a way to do this with a list comprehension, something like:</p>\n\n<pre><code>[list2[i] if j == 0 else j for i,j in enumerate(list1)]\n</code></pre>\n\n<p>(although this fails due the lists being different lengths).</p>\n\n<p>Is there any other concise way of doing this in base python, perhaps using <code>map</code> or <code>filter</code>?</p>\n"}, {"tags": ["python", "python-multithreading", "contextmanager"], "comments": [{"owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "edited": false, "score": 0, "creation_date": 1513810075, "post_id": 47915356, "comment_id": 82798949, "body": "What is your question exactly?  You seem to have a solution for what you&#39;re trying to do."}, {"owner": {"reputation": 4773, "user_id": 1075374, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/GsOoB.png?s=128&g=1", "display_name": "Bastian", "link": "https://stackoverflow.com/users/1075374/bastian"}, "reply_to_user": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "edited": false, "score": 0, "creation_date": 1513810179, "post_id": 47915356, "comment_id": 82798986, "body": "My solution is just some code I am trying. The question is how this should be done properly?"}, {"owner": {"reputation": 54296, "user_id": 128397, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG", "display_name": "Daniel Pryden", "link": "https://stackoverflow.com/users/128397/daniel-pryden"}, "edited": false, "score": 0, "creation_date": 1513810558, "post_id": 47915356, "comment_id": 82799092, "body": "What is the point of this Sleeper class? What are you sleeping for, and why do you need a separate thread to do it?"}, {"owner": {"reputation": 4773, "user_id": 1075374, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/GsOoB.png?s=128&g=1", "display_name": "Bastian", "link": "https://stackoverflow.com/users/1075374/bastian"}, "edited": false, "score": 0, "creation_date": 1513810947, "post_id": 47915356, "comment_id": 82799212, "body": "Indeed that particular sleeper is pointless. The one I use has more code that is very specific to AWS SQS and I thought not relevant to the question. I use it along a worker that does some time consuming task and this thread makes sure the visibility timeout of the SQS message gets pushed back as the main worker keeps working. If the worker fails, then the <code>finally</code> stops the thread."}], "answers": [{"tags": [], "owner": {"reputation": 1723, "user_id": 5840062, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q1ILS.jpg?s=128&g=1", "display_name": "Menglong Li", "link": "https://stackoverflow.com/users/5840062/menglong-li"}, "is_accepted": true, "score": 4, "last_activity_date": 1513825065, "creation_date": 1513825065, "answer_id": 47917281, "question_id": 47915356, "link": "https://stackoverflow.com/questions/47915356/how-to-use-a-thread-in-a-context-manager/47917281#47917281", "title": "How to use a thread in a context manager?", "body": "<p>Even though not quite understand your question, due to lack of background of your aws related problem. It's doable to use context to do this, just as you mentioned.</p>\n\n<pre><code>import threading\nimport time\n\n\nclass Sleeper(threading.Thread):\n    def __init__(self, sleep=5.0):\n        threading.Thread.__init__(self, name='Sleeper')\n        self.stop_event = threading.Event()\n        self.sleep = sleep\n\n    def run(self):\n        print('Thread {thread} started'.format(thread=threading.current_thread()))\n        while self.sleep &gt; 0 and not self.stop_event.is_set():\n            time.sleep(1.0)\n            self.sleep -= 1\n        print('Thread {thread} ended'.format(thread=threading.current_thread()))\n\n    def stop(self):\n        self.stop_event.set()\n\n    def __enter__(self):\n        self.start()\n        return self\n\n    def __exit__(self, *args, **kwargs):\n        self.stop()\n        print('Force set Thread Sleeper stop_event')\n\n\nwith Sleeper(sleep=2.0) as sleeper:\n    time.sleep(5)\n\nprint('Main Thread ends')\n</code></pre>\n\n<p>You can test the two cases: 1. main sleep more time, 2. Sleeper thread has a bigger sleep parameter, they will end up two results;</p>\n\n<p>If you still want to interact with the Sleeper thread with the main, your code should looks like this:</p>\n\n<pre><code>with Sleeper(sleep=2.0) as sleeper:\n    cnt = 15\n\n    while cnt &gt; 0 and sleeper.is_alive():\n        print(cnt)\n        cnt -= 1\n        time.sleep(1)\n</code></pre>\n\n<p>And you can see the main just print a few number, due to the sleeper has end and is not alive anymore.</p>\n"}], "owner": {"reputation": 4773, "user_id": 1075374, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/GsOoB.png?s=128&g=1", "display_name": "Bastian", "link": "https://stackoverflow.com/users/1075374/bastian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3532, "favorite_count": 0, "accepted_answer_id": 47917281, "answer_count": 1, "score": 3, "last_activity_date": 1513825065, "creation_date": 1513809424, "last_edit_date": 1513810657, "question_id": 47915356, "link": "https://stackoverflow.com/questions/47915356/how-to-use-a-thread-in-a-context-manager", "title": "How to use a thread in a context manager?", "body": "<p>Consider this <code>threading.Thread</code> class:</p>\n\n<pre><code>class Sleeper(threading.Thread):\n    def __init__(self, sleep=5.0):\n        threading.Thread.__init__(self)\n        self.event = threading.Event()\n        self.sleep = sleep\n\n    def run(self):\n        while self.sleep &gt; 0 and not self.event.is_set():\n            self.event.wait(1.0)\n            self.sleep -= 1\n\n    def stop(self):\n        self.event.set()\n</code></pre>\n\n<p>It sleeps for a certain amount of time and exits or is stopped before reaching that amount.</p>\n\n<p>I use it as:</p>\n\n<pre><code>sleeper = Sleeper()\ntry:\n    sleeper.start()\n    # do stuffs here\nexcept:\n    # handle possible exceptions here\nfinally:\n    sleeper.stop()\n</code></pre>\n\n<p>And I would much rather use it like a context manager:</p>\n\n<pre><code>with Sleeper():\n    # do stuffs here\n</code></pre>\n\n<p>and then the thread is stopped when exiting the <code>with</code> block.</p>\n\n<p>I have tried adding <code>__enter__</code> and <code>__exit__</code> methods and it seems to work but I'm not sure this is the way to go:</p>\n\n<pre><code>def __enter__(self):\n    self.start()\n    return self\n</code></pre>\n\n<p>and </p>\n\n<pre><code>def __exit__(self, type, value, traceback):\n    self.stop()\n</code></pre>\n\n<p>But I'm really not sure what I'm doing here. How should it be done properly?</p>\n"}, {"tags": ["python", "scikit-learn", "syntax-error"], "comments": [{"owner": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "edited": false, "score": 1, "creation_date": 1513809183, "post_id": 47915290, "comment_id": 82798668, "body": "Please include the complete error as a quote in your question. What is the definition of <code>SVR</code>? See <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a>"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 1, "creation_date": 1513809207, "post_id": 47915290, "comment_id": 82798671, "body": "When I type &quot;Syntaxerror non-keyword after keyword arg&quot; into the stackoverflow search box I get 77 questions. Have you read any of those to see if they explain what the error means, before asking this question?"}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 1, "creation_date": 1513809229, "post_id": 47915290, "comment_id": 82798676, "body": "needs <code>scikit-learn</code> tag? <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.svm.SVR.html\" rel=\"nofollow noreferrer\">scikit-learn.org/stable/modules/generated/sklearn.svm.SVR.ht&zwnj;&#8203;ml</a> , <code>gamma : float</code>"}, {"owner": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "edited": false, "score": 2, "creation_date": 1513809316, "post_id": 47915290, "comment_id": 82798697, "body": "Look carefully at <code>svr_rbf = SVR(kernel=&#39;rbf&#39;, C=1e3, gamma=0,1)</code>. What is the <code>,1</code> at the end for? This is the &quot;non-keyword&quot; after the keyword arguments. Perhaps you meant <code>svr_rbf = SVR(kernel=&#39;rbf&#39;, C=1e3, gamma=0.1)</code>?"}, {"owner": {"reputation": 279, "user_id": 2081675, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3hFbr.jpg?s=128&g=1", "display_name": "Rezkin", "link": "https://stackoverflow.com/users/2081675/rezkin"}, "edited": false, "score": 0, "creation_date": 1513810132, "post_id": 47915290, "comment_id": 82798968, "body": "The error itself tells you what&#39;s wrong.  You have a non-keyword argument after keyword arguments in the method line you posted.  Keyword args are optional, non-keyword args (or just args) are not, and are <b>positional</b>.  As such, they must come first, then optional args come second."}], "answers": [{"tags": [], "owner": {"reputation": 14299, "user_id": 791713, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/1d51e358999bd31439d3810486942e9b?s=128&d=identicon&r=PG", "display_name": "Niklas R", "link": "https://stackoverflow.com/users/791713/niklas-r"}, "is_accepted": true, "score": 1, "last_activity_date": 1513809363, "creation_date": 1513809363, "answer_id": 47915343, "question_id": 47915290, "link": "https://stackoverflow.com/questions/47915290/python-code-returns-syntaxerror-non-keyword-after-keyword-arg/47915343#47915343", "title": "Python code returns: Syntaxerror non-keyword after keyword arg", "body": "<p><code>gamma=0,1</code> is two arguments, the first a keyword, the second positional, which is invalid. You probably want <code>gamma=0.1</code> instead.</p>\n"}], "owner": {"reputation": 13, "user_id": 3846059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ece008e072566fcceea6e1ad0bdc0153?s=128&d=identicon&r=PG&f=1", "display_name": "LucidTruth", "link": "https://stackoverflow.com/users/3846059/lucidtruth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 47915343, "answer_count": 1, "score": 0, "last_activity_date": 1513811917, "creation_date": 1513809029, "last_edit_date": 1513811917, "question_id": 47915290, "link": "https://stackoverflow.com/questions/47915290/python-code-returns-syntaxerror-non-keyword-after-keyword-arg", "title": "Python code returns: Syntaxerror non-keyword after keyword arg", "body": "<pre><code>import csv\nimport numpy as np\nfrom sklearn.svm import SVR\nimport matplotlib.pyplot as plt\n\ndates = []\nprices = []\n\ndef get_data(filename):\n    with open(filename, 'r') as csvfile:\n        csvFileReader = csv.reader(csvfile)\n        next(csvFileReader)\n        for row in csvFileReader:\n            dates.append(int(row[0].split('-')[0]))\n            prices.append(float(row[1]))\n    return\n\ndef predict_price(dates, prices, x):\n    dates = np.reshape(dates,(len(dates), 1))\n\n    svr_rbf = SVR(kernel='rbf', C=1e3, gamma=0,1)\n    svr_lin = SVR(kernel='linear', C=1e3)\n    svr_poly = SVR(kernel='poly', C=1e3, degree=2)\n    svn_lin.fit(dates, prices)\n    svr_poly.fit(dates, prices)\n    svr_rbf.fit(dates, prices)\n\n\n    plt.scatter(dates, prices, color = 'black', label = 'Data')\n    plt.plot(dates, svr_rbf.predict(dates), color = 'red', label = 'RBF model')\n    plt.plot(dates, svr_lin.predict(dates), color = 'green', label = 'linear model')\n    plt.plot(dates, svr_poly.predict(dates), color = 'blue', label = 'polynomial model')\n    plt.xlabel('Date')\n    plt.xlabel(\"Price\")\n    plt.title('Support Vector Regression')\n    plt.legend()\n    plt.show()\n\n    return svr_rbf.predict(x)[0], svr_lin.predict(x)[0], svr_poly.predict(x)[0]\n\nget_data('aapl.csv')\n\npredicted_price = predict_price(dates, prices, 29)\n\nprint (predicted_price)\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code> File \"predictstocks.py\", line 21\n    svr_rbf = SVR(kernel='rbf', C=1e3, gamma=0,1)\nSyntaxError: non-keyword arg after keyword arg\n</code></pre>\n\n<p>Okay, so i have searched the internet for hours now, and looked in the different docs.. but i cant find the solution for my problem.\nas my title says the python code returns this: Syntaxerror non-keyword after keyword arg</p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1513809827, "post_id": 47915264, "comment_id": 82798861, "body": "<i>Doesn&#39;t zip pass a pointer to the element in the input array?</i> Even if it did it wouldn&#39;t work because <code>j=i</code> does nothing beyond binding the name &#39;j&#39; to whatever object is bound to the name &#39;i&#39;."}], "answers": [{"tags": [], "owner": {"reputation": 1229, "user_id": 9044469, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ab445818b77285bccf153015bba67538?s=128&d=identicon&r=PG&f=1", "display_name": "ShpielMeister", "link": "https://stackoverflow.com/users/9044469/shpielmeister"}, "is_accepted": false, "score": 0, "last_activity_date": 1513809115, "creation_date": 1513809115, "answer_id": 47915306, "question_id": 47915264, "link": "https://stackoverflow.com/questions/47915264/assigning-to-a-numpy-array-using-zip-in-a-for-loop/47915306#47915306", "title": "Assigning to a numpy array using zip in a for loop", "body": "<p>it's a bad idea to reset the index in a for loop</p>\n\n<p>secondly you loop accomplishes nothing as written, since neither A nor B is  in the body</p>\n"}, {"tags": [], "owner": {"reputation": 22012, "user_id": 194586, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1a71658d81f8a82a8122050f21bb86d3?s=128&d=identicon&r=PG", "display_name": "Nick T", "link": "https://stackoverflow.com/users/194586/nick-t"}, "is_accepted": false, "score": 0, "last_activity_date": 1513810065, "last_edit_date": 1513810065, "creation_date": 1513809752, "answer_id": 47915407, "question_id": 47915264, "link": "https://stackoverflow.com/questions/47915264/assigning-to-a-numpy-array-using-zip-in-a-for-loop/47915407#47915407", "title": "Assigning to a numpy array using zip in a for loop", "body": "<p>Python doesn't really have \"C-style\" pointers, but names that can point at objects. Sometimes the objects can change, so the data the name refers to will change (mutable objects). Sometimes the objects can't, so you need to create a new one and re-point the name at it (immutable objects).</p>\n\n<p>The output from <code>zip</code> that you bind to <code>i</code> and <code>j</code> in your loop are immutable values. Saying <code>j = i</code> will just point <em>the name</em> <code>j</code> at <code>i</code>, but won't do anything to the <em>object formerly known as <code>j</code></em> (which still exists as part of <code>B</code>).</p>\n\n<p>If you want to copy portions of arrays around, use slices then Numpy can do it for you very efficiently (see <a href=\"https://docs.scipy.org/doc/numpy-1.13.0/user/basics.indexing.html\" rel=\"nofollow noreferrer\"><em>Indexing &mdash; NumPy User Guide</em></a>):</p>\n\n<pre><code>A = np.array([1, 2, 3, 4])\nB = np.zeros_like(A)\nassert np.all(B == 0)\nB[:] = A[:]\nassert not np.any(B == 0)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 7433247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf6b932d3c5261c21c0da51f3c2ca9f?s=128&d=identicon&r=PG&f=1", "display_name": "Seth", "link": "https://stackoverflow.com/users/7433247/seth"}, "edited": false, "score": 0, "creation_date": 1513815283, "post_id": 47915720, "comment_id": 82800325, "body": "Thank your for the insight.  I think I understand the name assignment issue, and with that in mind, I&#39;ve updated my example to be more reflective of the issue I&#39;m having.  Please take a look if you can.  Since I&#39;m using <i>+=</i> and <i>/=</i>, shouldn&#39;t the underlying value get updated?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 13, "user_id": 7433247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf6b932d3c5261c21c0da51f3c2ca9f?s=128&d=identicon&r=PG&f=1", "display_name": "Seth", "link": "https://stackoverflow.com/users/7433247/seth"}, "edited": false, "score": 0, "creation_date": 1513826466, "post_id": 47915720, "comment_id": 82802815, "body": "In my example, the source is 2d, and the <code>j</code> a 1d array; in your case a 1d array and a &#39;scalar&#39; value.  I added some examples that may help show the difference."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 1, "last_activity_date": 1513826386, "last_edit_date": 1513826386, "creation_date": 1513811992, "answer_id": 47915720, "question_id": 47915264, "link": "https://stackoverflow.com/questions/47915264/assigning-to-a-numpy-array-using-zip-in-a-for-loop/47915720#47915720", "title": "Assigning to a numpy array using zip in a for loop", "body": "<p>In Python it is important to know what happens when you do an assignment.  Does it assign a new object to the variable, or does it modify a (mutable) object.</p>\n\n<p>In your code <code>j</code> is an element of a 1d array.  But <code>j=i</code> assigns to <code>j</code> the same object that was assigned to <code>i</code>.  This breaks all connection with the object produced by iteration.</p>\n\n<p>In contrast, iterating on the rows of a 2d array:</p>\n\n<pre><code>In [439]: A = np.arange(12).reshape(3,4)\nIn [440]: B = np.zeros_like(A)\nIn [441]: for i, j in zip(A,B):\n     ...:     print(i, j)\n     ...:     j[...] = i\n     ...:     \n[0 1 2 3] [0 0 0 0]\n[4 5 6 7] [0 0 0 0]\n[ 8  9 10 11] [0 0 0 0]\nIn [442]: B\nOut[442]: \narray([[ 0,  1,  2,  3],\n       [ 4,  5,  6,  7],\n       [ 8,  9, 10, 11]])\n</code></pre>\n\n<p>Here, <code>i</code> and <code>j</code> are 1d arrays, views of their respective 2d arrays.  <code>j[...] =...</code> changes the values of the <code>j</code> array, and hence are reflected in the parent array, <code>B</code>.</p>\n\n<p><code>+=</code> is another in-place operation, producing the same change to <code>B</code>:</p>\n\n<pre><code>In [444]: for i, j in zip(A,B):\n     ...:     j += i\n</code></pre>\n\n<p>Note that these rules apply to iterating on lists as well, though how the change back-propagates to the parent is different.  So it is important to understand what happens with <code>j=i</code> versus <code>j[:]=i</code> (and not just within a loop).  At the same time, don't get in the habit of working with arrays in this way.  Try to do the job without iterating on the arrays.</p>\n\n<p>A list example:</p>\n\n<pre><code>In [446]: Al = A.tolist(); Bl = B.tolist()\nIn [447]: for i,j in zip(Al, Bl):\n     ...:     j[:] = i[::-1]   # assign a reverse list\n     ...:     # j =  would not work\nIn [449]: Bl\nOut[449]: [[3, 2, 1, 0], [7, 6, 5, 4], [11, 10, 9, 8]]\n</code></pre>\n\n<hr>\n\n<p>The values that you are trying to change are elements of a 1d array.  They are effectively scalar (though wrapped in a numpy dtype):</p>\n\n<pre><code>In [455]: x=np.arange(3).astype(np.float64)\nIn [456]: for j in x:\n     ...:     print(j,type(j))\n     ...:     j += 1\n     ...:     print(j)\n     ...:     \n0.0 &lt;class 'numpy.float64'&gt;\n1.0\n1.0 &lt;class 'numpy.float64'&gt;\n2.0\n2.0 &lt;class 'numpy.float64'&gt;\n3.0\nIn [457]: x\nOut[457]: array([ 0.,  1.,  2.])\n</code></pre>\n\n<p>Or for elements of a flat list:</p>\n\n<pre><code>In [462]: x=[0,1,2]\nIn [463]: for j in x:\n     ...:     j += 1\n     ...:     \nIn [464]: x\nOut[464]: [0, 1, 2]\n</code></pre>\n\n<p>In my example above I just changing rows of a 2d array.  The values change within the loop, but they don't backpropagate to the source array.</p>\n\n<p>Another example:</p>\n\n<pre><code>In [469]: x = np.arange(3)\nIn [470]: y = x[0]\nIn [471]: y += 1\nIn [472]: y\nOut[472]: 1\nIn [473]: x\nOut[473]: array([0, 1, 2])\nIn [474]: x[0] += 1\nIn [475]: x\nOut[475]: array([1, 1, 2])\n</code></pre>\n\n<p>The iteration <code>j</code> is more like the <code>y=x[0]</code> case than the <code>x[0]+=</code> one.</p>\n"}, {"tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": false, "score": 0, "last_activity_date": 1513836407, "last_edit_date": 1513836407, "creation_date": 1513815931, "answer_id": 47916203, "question_id": 47915264, "link": "https://stackoverflow.com/questions/47915264/assigning-to-a-numpy-array-using-zip-in-a-for-loop/47916203#47916203", "title": "Assigning to a numpy array using zip in a for loop", "body": "<p>Here is how to make your examples work with minimal changes (arrows); for a more principled method see bottom of this post:</p>\n\n<pre><code>import numpy as np\n\nf = [1,2,3,4,5,6,7,8,9,10]\ntrials = [[0,1,2], [5,6,7], [8,9]]\ntrial_averages = np.zeros(len(trials))\nfor i, j in zip(trials, trial_averages[:, None]): # &lt;----\n    for k in i:\n        j += f[k]\n    j /= len(i)\nprint('trials = {0}'.format(trials))\nprint('averages = {0}'.format(trial_averages))\nprint('{0}, {1}'.format(i, j))\n\nA = np.array([1, 2, 3, 4], dtype=float)\nB = np.zeros(len(A))\nfor i, j in zip(A, B[:, None]):                   # &lt;----\n    j[...] = i                                    # &lt;----\nprint('A = {0}'.format(A))\nprint('B = {0}'.format(B))\nprint('{0}, {1}'.format(i, j))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>trials = [[0, 1, 2], [5, 6, 7], [8, 9]]\naverages = [ 2.   7.   9.5]\n[8, 9], [ 9.5]\nA = [ 1.  2.  3.  4.]\nB = [ 1.  2.  3.  4.]\n4.0, [ 4.]\n</code></pre>\n\n<p>As you can see in the first example it is enough to make <code>j</code> mutable. In the second example we also have to change the assignment into a <code>__setitem__</code> controlled one.</p>\n\n<p>A more verbose but less hackish way of creating something like a C pointer are 0d arrays. You can use <code>np.nditer</code> to create iterators returning 0d arrays instead of naked values. In many ways they behave like scalars but you can \"dereference\" them using <code>[()]</code> and then assign to them. Your second example would look like this and produce the same output as before:</p>\n\n<pre><code>ro, wo, rw = ['readonly'], ['writeonly'], ['readwrite']\n\nA = np.array([1, 2, 3, 4], dtype=float)\nB = np.zeros(len(A))\nfor i, j in np.nditer([A, B], [], [ro, wo]): # &lt;----\n    j[()] = i                                # &lt;----\nprint('A = {0}'.format(A))\nprint('B = {0}'.format(B))\nprint('{0}, {1}'.format(i, j))\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7433247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf6b932d3c5261c21c0da51f3c2ca9f?s=128&d=identicon&r=PG&f=1", "display_name": "Seth", "link": "https://stackoverflow.com/users/7433247/seth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1546, "favorite_count": 0, "accepted_answer_id": 47915720, "answer_count": 4, "score": 1, "last_activity_date": 1513876781, "creation_date": 1513808886, "last_edit_date": 1513876781, "question_id": 47915264, "link": "https://stackoverflow.com/questions/47915264/assigning-to-a-numpy-array-using-zip-in-a-for-loop", "title": "Assigning to a numpy array using zip in a for loop", "body": "<p>Thanks for the help everyone.  What seems to explain my problem the most concisely is that <em>zip</em> returns an iterator of tuples, not lists, and are therefore immutable.  You can see the working solution below and the original question code below that.</p>\n\n<p>Solution:</p>\n\n<pre><code>f = np.array([1,2,3,4,5,6,7,8,9,10])\ntrials = [[0,1,2], [5,6,7], [8,9]]\ntrial_averages = []\nfor i in trials:\n    a = 0\n    for j in i:\n        a += f[j]\n    a /= len(i)\n    trial_averages.append(a)\ntrial_averages = np.array(trial_averages)\nprint('trials = {0}'.format(trials))\nprint('averages = {0}'.format(trial_averages))\n\ntrials = [[0, 1, 2], [5, 6, 7], [8, 9]]\naverages = [ 2.   7.   9.5]\n</code></pre>\n\n<hr>\n\n<p>Question:</p>\n\n<p>I am trying to modify elements of a numpy array in a for loop with a zip of two arrays and the modified array isn't getting updated.  What am I missing?</p>\n\n<p>I've created a new example as my original one didn't seem to be illustrative of my exact issue.</p>\n\n<p>New example:</p>\n\n<pre><code>f = np.array([1,2,3,4,5,6,7,8,9,10])\ntrials = [[0,1,2], [5,6,7], [8,9]]\ntrial_averages = np.zeros(len(trials))\nfor i, j in zip(trials, trial_averages):\n    for k in i:\n        j += f[k]\n    j /= len(i)\nprint('trials = {0}'.format(trials))\nprint('averages = {0}'.format(trial_averages))\nprint('{0}, {1}'.format(i, j))\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>trials = [[0, 1, 2], [5, 6, 7], [8, 9]]\naverages = [ 0.  0.  0.  0.]\n[8, 9], 9.5\n</code></pre>\n\n<p>In this case, <em>j</em> is a pointer to the element in <em>trial_averages</em>, which I expect to be updated in the second for loop to a sum of the values in <em>f</em> pointed to by the list in <em>trials</em>, then divided by the length of the list in <em>trials</em>, computing an average of the values of <em>f</em> in each trial.</p>\n\n<hr>\n\n<p>Old example for reference:</p>\n\n<p>Working example:</p>\n\n<pre><code>A = np.array([1, 2, 3, 4], dtype=float)\nB = np.zeros(len(A))\nfor i, j in zip(A, B):\n    j = i\nprint('A = {0}'.format(A))\nprint('B = {0}'.format(B))\nprint('{0}, {1}'.format(i, j))\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>A = [ 1.  2.  3.  4.]\nB = [ 0.  0.  0.  0.]\n4.0, 4.0\n</code></pre>\n\n<p>Doesn't zip pass a pointer to the element in the input array?  Shouldn't the assignment j = i make B = [1. 2. 3. 4.]?</p>\n\n<p>Thanks for the help.</p>\n"}, {"tags": ["python", "database", "python-3.x", "sqlite"], "answers": [{"comments": [{"owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 1, "creation_date": 1513889718, "post_id": 47915329, "comment_id": 82834197, "body": "&quot;a column in SQL is always equal to itself&quot; Unless it is <code>NULL</code>. Hate to nitpick, but <code>NULL=NULL</code> returns false (really it returns unknown, but it&#39;s easier to think in 2-value logic)."}, {"owner": {"reputation": 10872, "user_id": 3135417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b989009ea961e780793f80ea6d53240?s=128&d=identicon&r=PG&f=1", "display_name": "Abdou", "link": "https://stackoverflow.com/users/3135417/abdou"}, "reply_to_user": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1513889987, "post_id": 47915329, "comment_id": 82834293, "body": "@mypetlion, that&#39;s far from nitpicking! It&#39;s a vital piece of information I failed to mention. I&#39;ll edit the answer to reflect that. Thank you!"}], "tags": [], "owner": {"reputation": 10872, "user_id": 3135417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b989009ea961e780793f80ea6d53240?s=128&d=identicon&r=PG&f=1", "display_name": "Abdou", "link": "https://stackoverflow.com/users/3135417/abdou"}, "is_accepted": false, "score": 3, "last_activity_date": 1513890172, "last_edit_date": 1513890172, "creation_date": 1513809311, "answer_id": 47915329, "question_id": 47915247, "link": "https://stackoverflow.com/questions/47915247/why-am-i-getting-incorrect-values-when-i-fetchone-why-writing-in-sqlite/47915329#47915329", "title": "Why am i getting incorrect values when i fetchone() why writing in SQLite?", "body": "<p><code>CPU=CPU</code> is the issue here. This is because a <em>non-null</em> column in SQL is always equal to itself. So your query will return everything from the table that does not have a null value in the <code>CPU</code> column.</p>\n\n<p>The fix is to wrap the string <code>'CPU'</code> around the quotes it needs, as follows:</p>\n\n<pre><code>c.execute(\"SELECT * FROM Entries WHERE CPU='CPU'\")\nfor i in range(3):\n    print(c.fetchone())\n</code></pre>\n\n<p>I hope this proves useful.</p>\n"}], "owner": {"reputation": 11, "user_id": 8854084, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pgCc_D5z6GI/AAAAAAAAAAI/AAAAAAAABf0/gKSMgKY8sCc/photo.jpg?sz=128", "display_name": "Miggy Reyes", "link": "https://stackoverflow.com/users/8854084/miggy-reyes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1513890172, "creation_date": 1513808797, "last_edit_date": 1513809124, "question_id": 47915247, "link": "https://stackoverflow.com/questions/47915247/why-am-i-getting-incorrect-values-when-i-fetchone-why-writing-in-sqlite", "title": "Why am i getting incorrect values when i fetchone() why writing in SQLite?", "body": "<pre><code>c.execute(\"SELECT * FROM Entries WHERE CPU=CPU\")\nfor i in range(3):\n    print(c.fetchone())\n</code></pre>\n\n<p>This returns:</p>\n\n<blockquote>\n  <p>('...', '...', '...', '...', '...', '...', 'CPU', '...', '...', '...', '...', '...', '...', '...', '...', '...', '...', '...', '...')<br>\n  ('...', '...', '...', '...', '...', '...', 'TEST', '...', '...', '...', '...', '...', '...', '...', '...', '...', '...', '...', '...')<br>\n  ('...', '...', '...', '...', '...', '...', 'TEST', '...', '...', '...', '...', '...', '...', '...', '...', '...', '...', '...', '...')</p>\n</blockquote>\n\n<p>I don't understand why I am getting the bottom two rows when CPU does not equal CPU for them...</p>\n"}, {"tags": ["python", "django", "windows", "cmd"], "answers": [{"tags": [], "owner": {"reputation": 1536, "user_id": 6005145, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-8d0SktavI-o/AAAAAAAAAAI/AAAAAAAAAxU/Zrxn56xszBE/photo.jpg?sz=128", "display_name": "schrodigerscatcuriosity", "link": "https://stackoverflow.com/users/6005145/schrodigerscatcuriosity"}, "is_accepted": true, "score": 2, "last_activity_date": 1513809297, "creation_date": 1513809297, "answer_id": 47915327, "question_id": 47915245, "link": "https://stackoverflow.com/questions/47915245/python-manage-py-migrate-django-error/47915327#47915327", "title": "python manage.py migrate Django Error", "body": "<p>You have a typo in your models</p>\n\n<pre><code>max_lenth\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>max_length\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8062458, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_f58KnWwgwY/AAAAAAAAAAI/AAAAAAAAABY/U3GsriYF63g/photo.jpg?sz=128", "display_name": "Prince A", "link": "https://stackoverflow.com/users/8062458/prince-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 0, "closed_date": 1513851311, "accepted_answer_id": 47915327, "answer_count": 1, "score": 1, "last_activity_date": 1513809297, "creation_date": 1513808793, "question_id": 47915245, "link": "https://stackoverflow.com/questions/47915245/python-manage-py-migrate-django-error", "closed_reason": "Needs details or clarity", "title": "python manage.py migrate Django Error", "body": "<p>I was following the django documentation <a href=\"https://docs.djangoproject.com/en/2.0/topics/migrations/\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/2.0/topics/migrations/</a> when i try to run <code>python manage.py migrate</code> I always get a traceback error. I even do <code>python manage.py makemigrations</code> and I still get this traceback error <a href=\"https://i.stack.imgur.com/caV27.png\" rel=\"nofollow noreferrer\">Here</a></p>\n"}, {"tags": ["python", "django", "forms", "csrf", "django-csrf"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 5179529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea701ad819dc30340ff77883f21fe3a?s=128&d=identicon&r=PG&f=1", "display_name": "km786", "link": "https://stackoverflow.com/users/5179529/km786"}, "edited": false, "score": 0, "creation_date": 1513809600, "post_id": 47915263, "comment_id": 82798787, "body": "Hi, thank you for your response. Yes, I tried that and I get the same error."}, {"owner": {"reputation": 1536, "user_id": 6005145, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-8d0SktavI-o/AAAAAAAAAAI/AAAAAAAAAxU/Zrxn56xszBE/photo.jpg?sz=128", "display_name": "schrodigerscatcuriosity", "link": "https://stackoverflow.com/users/6005145/schrodigerscatcuriosity"}, "reply_to_user": {"reputation": 55, "user_id": 5179529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea701ad819dc30340ff77883f21fe3a?s=128&d=identicon&r=PG&f=1", "display_name": "km786", "link": "https://stackoverflow.com/users/5179529/km786"}, "edited": false, "score": 0, "creation_date": 1513810077, "post_id": 47915263, "comment_id": 82798950, "body": "Did you reload the page?"}, {"owner": {"reputation": 3594, "user_id": 5992118, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/21UQh.png?s=128&g=1", "display_name": "dahrens", "link": "https://stackoverflow.com/users/5992118/dahrens"}, "edited": false, "score": 0, "creation_date": 1513810114, "post_id": 47915263, "comment_id": 82798962, "body": "This is basically correct - but the code above has a few problems on top. First there is not python form which might validate the CSRF token, second the are many forms (because you have the form tag inside of a loop). This can not work this way. Create a proper python form that only needs one form in HTML to work around the glitches."}, {"owner": {"reputation": 1536, "user_id": 6005145, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-8d0SktavI-o/AAAAAAAAAAI/AAAAAAAAAxU/Zrxn56xszBE/photo.jpg?sz=128", "display_name": "schrodigerscatcuriosity", "link": "https://stackoverflow.com/users/6005145/schrodigerscatcuriosity"}, "reply_to_user": {"reputation": 3594, "user_id": 5992118, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/21UQh.png?s=128&g=1", "display_name": "dahrens", "link": "https://stackoverflow.com/users/5992118/dahrens"}, "edited": false, "score": 0, "creation_date": 1513810526, "post_id": 47915263, "comment_id": 82799080, "body": "@dahrens As I understad there&#39;s no problem with many forms each one with its own csrf. You say it won&#39;t work because it&#39;s a loop?"}, {"owner": {"reputation": 55, "user_id": 5179529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea701ad819dc30340ff77883f21fe3a?s=128&d=identicon&r=PG&f=1", "display_name": "km786", "link": "https://stackoverflow.com/users/5179529/km786"}, "edited": false, "score": 0, "creation_date": 1513810863, "post_id": 47915263, "comment_id": 82799183, "body": "@guillermochamorro It works now! Once I reloaded the page, it worked. I didn&#39;t know I had to do that, thanks!"}], "tags": [], "owner": {"reputation": 1536, "user_id": 6005145, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-8d0SktavI-o/AAAAAAAAAAI/AAAAAAAAAxU/Zrxn56xszBE/photo.jpg?sz=128", "display_name": "schrodigerscatcuriosity", "link": "https://stackoverflow.com/users/6005145/schrodigerscatcuriosity"}, "is_accepted": true, "score": 3, "last_activity_date": 1513808878, "creation_date": 1513808878, "answer_id": 47915263, "question_id": 47915232, "link": "https://stackoverflow.com/questions/47915232/django-csrf-verfication-failed/47915263#47915263", "title": "Django CSRF verfication failed", "body": "<p>The csrf token goes inside the form:</p>\n\n<pre><code>&lt;form class=\"\" action=\".\" method=\"post\"&gt;\n {% csrf_token %} &lt;!--here goes the token--&gt;\n    &lt;input type=\"submit\" value=\"{{ a.answer }}\" name={{a.answer_id}}&gt;&lt;/input&gt;\n&lt;/form&gt;\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 5179529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea701ad819dc30340ff77883f21fe3a?s=128&d=identicon&r=PG&f=1", "display_name": "km786", "link": "https://stackoverflow.com/users/5179529/km786"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 47915263, "answer_count": 1, "score": 1, "last_activity_date": 1513849145, "creation_date": 1513808666, "last_edit_date": 1513849145, "question_id": 47915232, "link": "https://stackoverflow.com/questions/47915232/django-csrf-verfication-failed", "title": "Django CSRF verfication failed", "body": "<p>I am new to Django and I have a problem with CSRF verification. I have so far created Django POST forms that are successful and have no CSRF errors. But when I try to create the following form, I get CSRF verification failure: \"CSRF token missing or incorrect\".</p>\n\n<pre><code>{% for a in answers %}\n    {% csrf_token %}\n    &lt;form class=\"\" action=\".\" method=\"post\"&gt;\n        &lt;input type=\"submit\" value=\"{{ a.answer }}\" name={{a.answer_id}}&gt;&lt;/input&gt;\n    &lt;/form&gt;\n    &lt;p&gt;Number of votes: {{ a.votes }}&lt;/p&gt;\n{% empty %}\n    &lt;p&gt;There are no answers for the poll&lt;/p&gt;\n{% endfor %}\n</code></pre>\n\n<p>Here is what the models look like:</p>\n\n<pre><code>class Question(models.Model):\n    date_added = models.DateTimeField(auto_now_add=True)\n    question = models.CharField(max_length=200)\n    number_of_answers = models.IntegerField(default=0)\n\nclass Answer(models.Model):\n    question = models.ForeignKey(Question)\n    answer = models.CharField(max_length=200)\n    votes = models.IntegerField(default=0)\n</code></pre>\n\n<p>Here is what the view function for that form looks like (so far I haven't added any code to process the post request):</p>\n\n<pre><code>def poll(request, question_id):\n    if request.method == \"POST\":\n        pass\n    poll = Question.objects.get(id=question_id)\n    answers = poll.answer_set.order_by()\n    context = {'poll' : poll, 'answers' : answers}\n    return render(request, 'polls/poll.html', context)\n</code></pre>\n\n<p>Basically, for each question there are multiple answers. I want to allow the user to click the button associated to a particular answer. Once the user clicks a button, I want to increase the vote for that answer in the database (I haven't added the code to do this yet, but this is the goal). I then want the page to reload with the newly added vote. </p>\n\n<p><img src=\"https://i.stack.imgur.com/MfY5x.png\" alt=\"Here is just an example of what this looks like visually\"></p>\n\n<p>Does anybody know what I am doing wrong or what I am missing? </p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "conda"], "comments": [{"owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "reply_to_user": {"reputation": 1229, "user_id": 9044469, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ab445818b77285bccf153015bba67538?s=128&d=identicon&r=PG&f=1", "display_name": "ShpielMeister", "link": "https://stackoverflow.com/users/9044469/shpielmeister"}, "edited": false, "score": 0, "creation_date": 1513808552, "post_id": 47915166, "comment_id": 82798466, "body": "Right, but I&quot;d like to use anaconda to keep this in a nicely contained virtual environment so I cans witch too and fro with the conda CLI.  Manually installing a python version just seems like trouble."}, {"owner": {"reputation": 13816, "user_id": 921563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/527002381/picture?type=large", "display_name": "OptimusCrime", "link": "https://stackoverflow.com/users/921563/optimuscrime"}, "edited": false, "score": 1, "creation_date": 1513808568, "post_id": 47915166, "comment_id": 82798472, "body": "I am not familiar with how conda works. But according to the list of commands, you could try to <code>--no-deps</code> (Do not install dependencies.) or <code>--no-default-packages</code> (Ignore create_default_packages in the .condarc file.), but I am not sure if this includes the packages you are talking about. Might be worth a try. I guess these packages are included because they are used almost every single time. Reference: <a href=\"https://conda.io/docs/commands/conda-create.html\" rel=\"nofollow noreferrer\">conda.io/docs/commands/conda-create.html</a>"}, {"owner": {"reputation": 22012, "user_id": 194586, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1a71658d81f8a82a8122050f21bb86d3?s=128&d=identicon&r=PG", "display_name": "Nick T", "link": "https://stackoverflow.com/users/194586/nick-t"}, "edited": false, "score": 0, "creation_date": 1513809470, "post_id": 47915166, "comment_id": 82798747, "body": "If you&#39;re going pure vanilla, <a href=\"https://askubuntu.com/a/865644/140640\">Pyenv will make you Pythons</a>  directly from the source."}, {"owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "reply_to_user": {"reputation": 22012, "user_id": 194586, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1a71658d81f8a82a8122050f21bb86d3?s=128&d=identicon&r=PG", "display_name": "Nick T", "link": "https://stackoverflow.com/users/194586/nick-t"}, "edited": false, "score": 0, "creation_date": 1513809617, "post_id": 47915166, "comment_id": 82798795, "body": "Thanks @NickT  I&#39;d still prefer not go full vanilla simply because I like commands like conda env list to remind me where all my virtual envs are and stuff."}, {"owner": {"reputation": 22012, "user_id": 194586, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1a71658d81f8a82a8122050f21bb86d3?s=128&d=identicon&r=PG", "display_name": "Nick T", "link": "https://stackoverflow.com/users/194586/nick-t"}, "edited": false, "score": 0, "creation_date": 1513809892, "post_id": 47915166, "comment_id": 82798882, "body": "pyenv has similar facilities"}], "answers": [{"comments": [{"owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "edited": false, "score": 0, "creation_date": 1513808754, "post_id": 47915221, "comment_id": 82798524, "body": "Thanks, this is what I was looking for"}], "tags": [], "owner": {"reputation": 37387, "user_id": 137650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418a42c29b040f2e0a51eea5330e2b7f?s=128&d=identicon&r=PG", "display_name": "MatsLindh", "link": "https://stackoverflow.com/users/137650/matslindh"}, "is_accepted": true, "score": 2, "last_activity_date": 1513808579, "creation_date": 1513808579, "answer_id": 47915221, "question_id": 47915166, "link": "https://stackoverflow.com/questions/47915166/why-does-conda-install-pip-setuptools-etc/47915221#47915221", "title": "Why does conda install pip/setuptools etc...?", "body": "<p>Then don't run them. The point of these dependencies are that you can't extend your environment with any third party libraries unless they are present, and most projects do depend on some third party libraries (or that your own library should be installable) - so they're installed by default, since they're usually required and useful.</p>\n\n<p>You can ask the conda venv create script to not include any default packages with <code>--no-default-packages</code> and <code>--no-deps</code>. The official virtualenv package supports <code>--no-pip</code>, <code>--no-setuptools</code> and <code>--no-wheel</code> to skip them.</p>\n"}], "owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1935, "favorite_count": 0, "accepted_answer_id": 47915221, "answer_count": 1, "score": 1, "last_activity_date": 1513808803, "creation_date": 1513808246, "last_edit_date": 1513808803, "question_id": 47915166, "link": "https://stackoverflow.com/questions/47915166/why-does-conda-install-pip-setuptools-etc", "title": "Why does conda install pip/setuptools etc...?", "body": "<p>I am using conda to create clean environments for each my my python projects.  I'd like to bootstrap the environmetn with only python, and not muddy it up wtih dependencies that aren't necessary.  I noticed that when creating a barebones venv with anaconda:</p>\n\n<pre><code>conda create --name myenv python\n</code></pre>\n\n<p>It must install the following new packages,</p>\n\n<pre><code>certifi:        2017.11.5-py36hb8ac631_0\npip:            9.0.1-py36h226ae91_4\npython:         3.6.3-h3b118a2_4\nsetuptools:     36.5.0-py36h65f9e6e_0\nvc:             14-h2379b0c_2\nvs2015_runtime: 14.0.25123-hd4c4e62_2\nwheel:          0.30.0-py36h6c3ec14_1\nwincertstore:   0.2-py36h7fe50ca_0\n</code></pre>\n\n<p>Does conda <em>require</em> these in some sense to operate?  Can they be kept out of the installation if one only plans to use the python standard library?  </p>\n"}, {"tags": ["python", "yaml", "troposphere"], "answers": [{"comments": [{"owner": {"reputation": 184, "user_id": 2597237, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Cx30l.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/2597237/adam"}, "edited": false, "score": 0, "creation_date": 1513824387, "post_id": 47915478, "comment_id": 82802385, "body": "&quot;he bigger question now is how you expect to use those objects.&quot;  I&#39;m still working out the details but the blueprint and yaml I showed above are excperts.  The real blueprint orchastrates a cluster.  So far I have a few stacks;   1. <code>permissions</code> contains a role, policies etc. 2. <code>network</code> ...sort of obvious 3. <code>init&#39; contains launch config 4. </code>run` contains autoscaling group, which references the <code>network</code> stack&#39;s output(s) 5. <code>cluster</code> just a <code>ecs.Cluster()</code> that outputs its name and some other stacks that might be less interesting. Thanks!"}, {"owner": {"reputation": 184, "user_id": 2597237, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Cx30l.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/2597237/adam"}, "edited": false, "score": 0, "creation_date": 1513837027, "post_id": 47915478, "comment_id": 82805621, "body": "That fixed that error and now I&#39;m working through others.  Thanks again for pointing me in the right direction and the yaml anchors for network config are probably a lot better than creating a stack and referencing it, like I was trying.  Have a happy holidays, amigo! by the way, i&#39;m impressed with what you&#39;ve got with Stacker, so far.  Thanks for the good work!"}, {"owner": {"reputation": 404, "user_id": 3692133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d690079a11d6844e32509c0ac657ba4?s=128&d=identicon&r=PG&f=1", "display_name": "phobologic", "link": "https://stackoverflow.com/users/3692133/phobologic"}, "reply_to_user": {"reputation": 184, "user_id": 2597237, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Cx30l.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/2597237/adam"}, "edited": false, "score": 0, "creation_date": 1513909704, "post_id": 47915478, "comment_id": 82839730, "body": "Thanks @Adam!  Glad it got you going again.  In general, when we (@Remind) figure out our stacks, we tend to think about a few things:  - how often will it be updated?  Keep often updated stuff (like security group rules) separate from not often updated stuff (the security groups themselves) - How dangerous is it to accidentally update?  protected mode &amp; locking help  protect you from this in stacker, but it&#39;s still a good idea. It&#39;s safer to accidentally update a security group rule than it is to say, modify a subnet.  Good luck, and definitely stop by the slack channel sometime :)"}], "tags": [], "owner": {"reputation": 404, "user_id": 3692133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d690079a11d6844e32509c0ac657ba4?s=128&d=identicon&r=PG&f=1", "display_name": "phobologic", "link": "https://stackoverflow.com/users/3692133/phobologic"}, "is_accepted": true, "score": 1, "last_activity_date": 1513810221, "creation_date": 1513810221, "answer_id": 47915478, "question_id": 47915147, "link": "https://stackoverflow.com/questions/47915147/stacker-awsvpcconfiguration-passed-in-as-yaml-and-recieved-as-str/47915478#47915478", "title": "Stacker AwsvpcConfiguration passed in as yaml and recieved as str", "body": "<p>troposphere maintainer/stacker author here.  So a few things:</p>\n\n<ol>\n<li>You want to use <code>TroposphereType(ecs.NetworkConfiguration, many=True)</code> since that's the type of object you want to create.</li>\n<li>ecs.NetworkConfiguration (<a href=\"https://github.com/cloudtools/troposphere/blob/master/troposphere/ecs.py#L71\" rel=\"nofollow noreferrer\">https://github.com/cloudtools/troposphere/blob/master/troposphere/ecs.py#L71</a>) is a AWSProperty type, which means the values inside of it, if using \"many\" needs to be a list of dictionaries per: <a href=\"http://stacker.readthedocs.io/en/latest/blueprints.html#property-types\" rel=\"nofollow noreferrer\">http://stacker.readthedocs.io/en/latest/blueprints.html#property-types</a></li>\n</ol>\n\n<p>So what I think you want is in your config</p>\n\n<p><code>\nvariables:\n  Networks:\n    - AwsvpcConfiguration:\n        AssignPublicIp: False\n        SecurityGroups: \n          - sg-id\n        Subnets: \n          - subnet-id1\n          - subnet-id2\n</code></p>\n\n<p>This is because <code>TroposphereType</code> expects you to pass in the exact arguments that the type expects.  A <code>NetworkConfiguration</code> expects a single key, <code>AwsvpcConfiguration</code>, and the values you were passing were values that were expected by the <code>AwsvcpConfiguration</code> object.</p>\n\n<p>The bigger question now is how you expect to use those objects.  In Cloudformation/troposphere, Property types aren't created on their own - they used as properties of actual resources- in this case the <code>ecs.Service</code> type.  Are you not planning to include the Service in the same blueprint?  If not, what is your plan to share these properties with other blueprints where those services live?</p>\n\n<p>A better fit might be to have a blueprint that builds the service along with it's <code>NetworkConfiguration</code>.  Then, if you want to have the same NetworkConfiguration easily shared between multiple stacks using that blueprint, you can do something with YAML anchors like:</p>\n\n<p><code>\ncommon_network_configuration: &amp;common_network_configuration\n  - AwsvpcConfiguration:\n      AssignPublicIp: False\n      SecurityGroups: \n        - sg-id\n      Subnets:\n        - subnet-id1\n        - subnet-id2\n</code></p>\n\n<p>And then use it wherever you want in variables like:</p>\n\n<p><code>\nvariables:\n  &lt;&lt; : *common_network_configuration\n</code></p>\n\n<p>I hope that makes sense - if you have any more questions, you can always reach us on the stacker Slack as well: <a href=\"https://empire-slack.herokuapp.com/\" rel=\"nofollow noreferrer\">https://empire-slack.herokuapp.com/</a></p>\n\n<p>Have a good one!</p>\n"}], "owner": {"reputation": 184, "user_id": 2597237, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Cx30l.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/2597237/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 47915478, "answer_count": 1, "score": 0, "last_activity_date": 1513810221, "creation_date": 1513808180, "question_id": 47915147, "link": "https://stackoverflow.com/questions/47915147/stacker-awsvpcconfiguration-passed-in-as-yaml-and-recieved-as-str", "title": "Stacker AwsvpcConfiguration passed in as yaml and recieved as str", "body": "<p>I'm trying to get a <a href=\"https://github.com/remind101/stacker\" rel=\"nofollow noreferrer\">Stacker</a> project (uses <a href=\"https://github.com/cloudtools/troposphere\" rel=\"nofollow noreferrer\">Troposphere</a> under the covers) up and running and I've been able to create several resources but am failing to figure the subnet piece out.  I've tried to pass them into my blueprint class several different ways but I think this one is closest and it's similar to the other implementations that don't outright explode.  The idea is to accept some configuration for a subnet like this.</p>\n\n<p>In my <code>my_cluster.yaml</code>, I have:</p>\n\n<pre><code> stacks:\n ...\n  - name: cluster-networks\n    description: \"Networks for an ECS cluster\"\n    class_path: blueprints.networks.Networks\n    variables:\n      Networks: \n        InternalComms:\n          AssignPublicIp: False\n          SecurityGroups: \n            - sg-id\n          Subnets: \n            - subnet-id1\n            - subnet-id2\n</code></pre>\n\n<p>and to read that config, i have a blueprint called <code>blueprints/networks.py</code> that has this in it:</p>\n\n<pre><code>class Networks(Blueprint):\n\"\"\"Manages creation of networks for ECS clusters\"\"\"\n\n# Variables that are passed from the my_cluster.yaml\nVARIABLES = {\n    \"Networks\": {\n        \"type\": TroposphereType(ecs.AwsvpcConfiguration, many=True),\n        \"description\": \"Dictionary for ECS cluster networks\"\n    }\n}\n\ndef create_template(self):\n    \"\"\"method that Stacker calls to manipulate the template(s)\"\"\"\n    variables = self.get_variables()\n    for config in variables['Networks']:\n        network = ecs.NetworkConfiguration(config)\n        t.add_resource(network)\n        # do other useful stuff like set outputs\n</code></pre>\n\n<p>If you're wondering why I create an <code>AwsvpcConfiguration</code> object and then create a <code>NetworkConfiguration</code> object out of that, the reason is because I tried to pass this information in using a <code>NetworkConfiguration</code> object before I adopted the <code>AwsvpcConfiguration</code> object and it didn't work either.  I'm using this <a href=\"https://github.com/cloudtools/troposphere/blob/master/troposphere/ecs.py\" rel=\"nofollow noreferrer\">file</a> to guide me because it's where these objects are defined. The next step is to <code>build</code> the resources, so when I do that by running this command:</p>\n\n<pre><code>stacker build path/to/my.env path/to/my_cluster.yaml\n</code></pre>\n\n<p>I get an error that says this:</p>\n\n<pre><code>stacker.exceptions.ValidatorError: Validator 'AwsvpcConfiguration.create' \nfailed for variable 'Networks' with value \n'{'InternalComms': {'AssignPublicIp': False, 'SecurityGroups': ['sg-id'], 'Subnets': ['subnet-id1', 'subnet-id2']}}': \nTypeError: _from_dict() argument after ** must be a mapping, not str\n</code></pre>\n\n<p>This is probably my lack of skills at stacker, yaml and python but I'm stumped and have been for a day or so.</p>\n\n<p>I am not able to figure out how to pass the config from the yaml into the blueprint as a dictionary, like I am doing in an identical manner for other resources that do get successfully created in AWS-land.  If you could point me to the error(s), I would be much obliged and will for sure tell Santa all about how nice you were.</p>\n"}, {"tags": ["python", "http", "download", "scripting", "python-requests"], "comments": [{"owner": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "edited": false, "score": 0, "creation_date": 1513808086, "post_id": 47915107, "comment_id": 82798296, "body": "You assign a value to <code>todays_file</code> but never use that value anywhere... that&#39;s likely part of your problem."}, {"owner": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "edited": false, "score": 1, "creation_date": 1513810527, "post_id": 47915107, "comment_id": 82799081, "body": "If the URL is dynamic, use <a href=\"https://www.crummy.com/software/BeautifulSoup/\" rel=\"nofollow noreferrer\"><code>BeautifulSoup</code></a> to extract it from the source. It&#39;s difficult to guess exactly what is going wrong without knowing the details of the request you are trying to make."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1513812566, "post_id": 47915107, "comment_id": 82799639, "body": "Use <code>BeautifulSoup</code> or <code>lxml</code> to parse HTML and search element."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1513812637, "post_id": 47915107, "comment_id": 82799660, "body": "page can use JavaScript and then you can&#39;t get it with <code>requests</code>."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1513812797, "post_id": 47915107, "comment_id": 82799704, "body": "Use DevTools in Chrome/Firefox what url is used by browser to download it. It can use JavaScript to generate ulr, it can send extra cookies or it can use hidden form to send url as <code>POST</code> with extra data form hidden field."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1513812867, "post_id": 47915107, "comment_id": 82799726, "body": "If you see <code>\u201cThe page cannot be displayed because an internal server error has occurred.\u201d</code> when you download using browser then problem is on server and you can do nothing to repair it and download file."}, {"owner": {"reputation": 11, "user_id": 7117147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc9549cd51c3a5eb7778963e08134e5d?s=128&d=identicon&r=PG&f=1", "display_name": "AdagioYours", "link": "https://stackoverflow.com/users/7117147/adagioyours"}, "edited": false, "score": 0, "creation_date": 1513879765, "post_id": 47915107, "comment_id": 82829548, "body": "wpercy - I didn&#39;t include in my post for brevity, however the homepage is: &#39;<a href=\"https://bbo.efiserv.com/\" rel=\"nofollow noreferrer\">bbo.efiserv.com</a>.  How can I check to see if the login request went thru?                   Galen - I&#39;ll try using Bs4. I read requests may be better for downloading files than bs4, but could bs4 be used to do both instead?"}, {"owner": {"reputation": 11, "user_id": 7117147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc9549cd51c3a5eb7778963e08134e5d?s=128&d=identicon&r=PG&f=1", "display_name": "AdagioYours", "link": "https://stackoverflow.com/users/7117147/adagioyours"}, "edited": false, "score": 0, "creation_date": 1513884171, "post_id": 47915107, "comment_id": 82831773, "body": "I think I figured it out. I stumbled across this post: stackoverflow.com/questions/20119258, and found out that there is an &#39;action&#39; attribute to my login page. After some quick reading I s.post()&#39;ed to that form instead, and tried getting a protected page and printed that protected page via print(protected_page.text) and I can see the html code from the protected page. Now I need to figure out how to download the file from the hyperlink"}], "owner": {"reputation": 11, "user_id": 7117147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc9549cd51c3a5eb7778963e08134e5d?s=128&d=identicon&r=PG&f=1", "display_name": "AdagioYours", "link": "https://stackoverflow.com/users/7117147/adagioyours"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513807960, "creation_date": 1513807960, "question_id": 47915107, "link": "https://stackoverflow.com/questions/47915107/download-file-from-hyperlink", "title": "Download file from hyperlink", "body": "<p>beginner here, Try to write script in Python 3.x that downloads a file after logging into a website everyday. The file is embedded in a hyperlink, and typically when clicked on to download you get the OS popup window asking where to save it. I seem to have everything working, except after it downloads/writes to the file I open the file to find the message, \u201cThe page cannot be displayed because an internal server error has occurred.\u201d, instead of the text of the file I\u2019m expecting to find. At this point I\u2019m thinking it\u2019s probably the hyperlink may be where the problem lies (It changes daily based on the date, so I\u2019ve incorporated a datetime statement to account for it). I've tried using things like BeautifuSoup, and Selenium, and dug though dozens of other posts here but haven't quite found a solution. Although they came close still no cigar. Thoughts?</p>\n\n<p>Code:</p>\n\n<pre><code>today = datetime.datetime.now()\ntodays_file = today.strftime('%Y%m%d')\n\nfile_url = 'https://site.url/file.url'\nsite_url = 'https://site.url'\ns = requests.Session()\ns.get(site_url)\ns.post(site_url,data={'username':\u2019username\u2019,'dept':\u2019dept\u2019,'password':\u2019password\u2019})\nthe_file = s.get(file_url)\nwith open(\u2018file.txt','wb') as f:\n     f.write(the_file.content)\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1534235207, "post_id": 47915020, "comment_id": 90627141, "body": "Equivalently, <code>df[df.ne(0).all(1)]</code>"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 1, "creation_date": 1534235578, "post_id": 47915020, "comment_id": 90627364, "body": "@jpp, yes, it is"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 1, "creation_date": 1534235654, "post_id": 47915020, "comment_id": 90627414, "body": "Just adding a comment for the sake of <a href=\"https://stackoverflow.com/questions/51836849/deleting-row-from-dataframe-based-on-any-column-value\">this dup</a> :)."}, {"owner": {"reputation": 917, "user_id": 1667423, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3ff1fb6d7b142bca9bb38ec7abd66184?s=128&d=identicon&r=PG", "display_name": "user76284", "link": "https://stackoverflow.com/users/1667423/user76284"}, "edited": false, "score": 0, "creation_date": 1600385904, "post_id": 47915020, "comment_id": 113079607, "body": "I get a <code>FutureWarning: elementwise comparison failed; returning scalar instead, but in the future will perform elementwise comparison</code> when I&#39;m checking for a string value. What&#39;s the &quot;correct&quot; way to do this?"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 12, "last_activity_date": 1513807545, "creation_date": 1513807545, "answer_id": 47915020, "question_id": 47914985, "link": "https://stackoverflow.com/questions/47914985/drop-a-row-in-a-pandas-dataframe-if-any-column-contains-a-certain-value-in-said/47915020#47915020", "title": "Drop a row in a Pandas Dataframe if any column contains a certain value, in said row", "body": "<p>Demo:</p>\n\n<p>Sample DF:</p>\n\n<pre><code>In [7]: import string\n\nIn [8]: df = pd.DataFrame(np.random.randint(100, size=(10,10)), columns=list(string.ascii_letters[:10]))\n\nIn [9]: df\nOut[9]:\n    a   b   c   d   e   f   g   h   i   j\n0  95  79  14  64  97   3   0  49  84   2\n1  52  82  72  40  55  26  21  69   2  35\n2  30  63  27  63  14  23  70  62  83  80\n3  23  90  96  43  75  23  27  47  83  40\n4  82  87  63  37  36  58  88  18  50  29\n5  92  29  93   6  62  85  87  74  21  32\n6  23  64  19  22  50  86  51  93  46   1\n7  56   0   8  46   1  56  82  15  55  45\n8  67  35  83  65  63  58  48  85  75  90\n9  12   7  45  28  33  98  42  93  78  12\n</code></pre>\n\n<p>let's drop all rows containing at least one <code>0</code>:</p>\n\n<pre><code>In [10]: df.eq(0)\nOut[10]:\n       a      b      c      d      e      f      g      h      i      j\n0  False  False  False  False  False  False   True  False  False  False\n1  False  False  False  False  False  False  False  False  False  False\n2  False  False  False  False  False  False  False  False  False  False\n3  False  False  False  False  False  False  False  False  False  False\n4  False  False  False  False  False  False  False  False  False  False\n5  False  False  False  False  False  False  False  False  False  False\n6  False  False  False  False  False  False  False  False  False  False\n7  False   True  False  False  False  False  False  False  False  False\n8  False  False  False  False  False  False  False  False  False  False\n9  False  False  False  False  False  False  False  False  False  False\n\nIn [11]: res = df[~df.eq(0).any(1)]\n\nIn [12]: res\nOut[12]:\n    a   b   c   d   e   f   g   h   i   j\n1  52  82  72  40  55  26  21  69   2  35\n2  30  63  27  63  14  23  70  62  83  80\n3  23  90  96  43  75  23  27  47  83  40\n4  82  87  63  37  36  58  88  18  50  29\n5  92  29  93   6  62  85  87  74  21  32\n6  23  64  19  22  50  86  51  93  46   1\n8  67  35  83  65  63  58  48  85  75  90\n9  12   7  45  28  33  98  42  93  78  12\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 4, "last_activity_date": 1513808122, "last_edit_date": 1513808122, "creation_date": 1513807706, "answer_id": 47915060, "question_id": 47914985, "link": "https://stackoverflow.com/questions/47914985/drop-a-row-in-a-pandas-dataframe-if-any-column-contains-a-certain-value-in-said/47915060#47915060", "title": "Drop a row in a Pandas Dataframe if any column contains a certain value, in said row", "body": "<p>since you know, how to <code>dropnan</code>, you can <code>replace</code> it to NaN </p>\n\n<pre><code>df=df.replace('Yourvalue',np.nan).dropna(axis = 0, how = 'any')\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6911980"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4540, "favorite_count": 2, "accepted_answer_id": 47915020, "answer_count": 2, "score": 7, "last_activity_date": 1513808122, "creation_date": 1513807332, "question_id": 47914985, "link": "https://stackoverflow.com/questions/47914985/drop-a-row-in-a-pandas-dataframe-if-any-column-contains-a-certain-value-in-said", "title": "Drop a row in a Pandas Dataframe if any column contains a certain value, in said row", "body": "<p>If we want to drop a row in which any column has a missing value we can do this:</p>\n\n<pre><code>df.dropna(axis = 0, how = 'any', inplace = True)\n</code></pre>\n\n<p>How do we do the same if we want to drop a row in which any column of that row, has a certain value (let's say a column has the value \"turtle\")?</p>\n\n<p>Some column of row x contains \"turtle\" so we drop it.</p>\n"}, {"tags": ["python", "anaconda"], "comments": [{"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1513807480, "post_id": 47914980, "comment_id": 82798040, "body": "The conda tool is an executable. If you let the anaconda install change modify your paths, it&#39;s accessible in your console (cmd.exe)."}, {"owner": {"reputation": 2168, "user_id": 8709791, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P8fHX.jpg?s=128&g=1", "display_name": "srikavineehari", "link": "https://stackoverflow.com/users/8709791/srikavineehari"}, "edited": false, "score": 0, "creation_date": 1513807758, "post_id": 47914980, "comment_id": 82798162, "body": "Have you tried <code>anaconda -h</code> in PowerShell or Command Prompt?"}, {"owner": {"reputation": 2168, "user_id": 8709791, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P8fHX.jpg?s=128&g=1", "display_name": "srikavineehari", "link": "https://stackoverflow.com/users/8709791/srikavineehari"}, "edited": false, "score": 0, "creation_date": 1513808143, "post_id": 47914980, "comment_id": 82798319, "body": "Press Windows key, then search for Anaconda Prompt."}, {"owner": {"reputation": 819, "user_id": 3781009, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/XIh0x.jpg?s=128&g=1", "display_name": "user44796", "link": "https://stackoverflow.com/users/3781009/user44796"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1513808284, "post_id": 47914980, "comment_id": 82798380, "body": "@sascha I didn&#39;t do that with the 32-bit installation, and an anaconda command prompt was created in my windows start menu. During the installation, the Anaconda options states that this is not recommended. If I modify the system paths, will conda know which installation of Anaconda to use?"}, {"owner": {"reputation": 819, "user_id": 3781009, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/XIh0x.jpg?s=128&g=1", "display_name": "user44796", "link": "https://stackoverflow.com/users/3781009/user44796"}, "reply_to_user": {"reputation": 2168, "user_id": 8709791, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P8fHX.jpg?s=128&g=1", "display_name": "srikavineehari", "link": "https://stackoverflow.com/users/8709791/srikavineehari"}, "edited": false, "score": 0, "creation_date": 1513808329, "post_id": 47914980, "comment_id": 82798397, "body": "@srig, both anaconda -h and searching for a 64-bit Anaconda Prompt failed."}, {"owner": {"reputation": 41290, "user_id": 570918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/27ce5101af57acecf9a5fe563b6192b1?s=128&d=identicon&r=PG", "display_name": "merv", "link": "https://stackoverflow.com/users/570918/merv"}, "edited": false, "score": 0, "creation_date": 1604007122, "post_id": 47914980, "comment_id": 114224073, "body": "Proposed duplicate: <a href=\"https://stackoverflow.com/questions/18675907/how-to-run-conda\">How to run Conda?</a> Specifically, <code>conda init</code> is the current recommendation."}], "answers": [{"comments": [{"owner": {"reputation": 819, "user_id": 3781009, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/XIh0x.jpg?s=128&g=1", "display_name": "user44796", "link": "https://stackoverflow.com/users/3781009/user44796"}, "edited": false, "score": 1, "creation_date": 1513808793, "post_id": 47915189, "comment_id": 82798539, "body": "Only the 32-bit version of the anaconda prompt shows up."}, {"owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "edited": false, "score": 1, "creation_date": 1513809162, "post_id": 47915189, "comment_id": 82798661, "body": "Restarting? The cure-all thing for Windows."}, {"owner": {"reputation": 819, "user_id": 3781009, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/XIh0x.jpg?s=128&g=1", "display_name": "user44796", "link": "https://stackoverflow.com/users/3781009/user44796"}, "edited": false, "score": 1, "creation_date": 1513809287, "post_id": 47915189, "comment_id": 82798692, "body": "Haha. You are right about restarting. Maybe it will show up at some point. As a workaround,  I can open a command prompt, cd to the Anaconda/scripts directory, and use conda. Then open spyder and use the installed packages. Not pretty, but it works."}], "tags": [], "owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "is_accepted": false, "score": 39, "last_activity_date": 1513808386, "creation_date": 1513808386, "answer_id": 47915189, "question_id": 47914980, "link": "https://stackoverflow.com/questions/47914980/how-to-access-anaconda-command-prompt-in-windows-10-64-bit/47915189#47915189", "title": "How to access Anaconda command prompt in Windows 10 (64-bit)", "body": "<p>Go with the mouse to the Windows Icon (lower left) and start typing \"Anaconda\". There should show up some matching entries. Select \"Anaconda Prompt\". A new command window, named \"Anaconda Prompt\" will open. Now, you can work from there with Python, conda and other tools. </p>\n"}, {"comments": [{"owner": {"reputation": 596, "user_id": 585830, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aa1e6dca4bdc279d3ea374eef37ed394?s=128&d=identicon&r=PG", "display_name": "Lybecker", "link": "https://stackoverflow.com/users/585830/lybecker"}, "edited": false, "score": 4, "creation_date": 1555052778, "post_id": 53872163, "comment_id": 97981767, "body": "You should add \\Anaconda3\\Library\\bin too, otherwise pip and other libs will not work.  pip will fail with error: &quot;pip is configured with locations that require TLS/SSL, however the ssl module in Python is not available.&quot;"}], "tags": [], "owner": {"reputation": 516, "user_id": 104631, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/91796b73465dbd742aa5621967107e92?s=128&d=identicon&r=PG", "display_name": "Volker von Einem", "link": "https://stackoverflow.com/users/104631/volker-von-einem"}, "is_accepted": false, "score": 8, "last_activity_date": 1545321856, "creation_date": 1545321856, "answer_id": 53872163, "question_id": 47914980, "link": "https://stackoverflow.com/questions/47914980/how-to-access-anaconda-command-prompt-in-windows-10-64-bit/53872163#53872163", "title": "How to access Anaconda command prompt in Windows 10 (64-bit)", "body": "<p>I added \"\\Anaconda3_64\\\" and \"\\Anaconda3_64\\Scripts\\\" to the PATH variable. Then I can use conda from powershell or command prompt.</p>\n"}, {"tags": [], "owner": {"reputation": 883, "user_id": 5595995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iLI6c.jpg?s=128&g=1", "display_name": "Cloud Cho", "link": "https://stackoverflow.com/users/5595995/cloud-cho"}, "is_accepted": false, "score": 11, "last_activity_date": 1571188790, "last_edit_date": 1571188790, "creation_date": 1554514949, "answer_id": 55545141, "question_id": 47914980, "link": "https://stackoverflow.com/questions/47914980/how-to-access-anaconda-command-prompt-in-windows-10-64-bit/55545141#55545141", "title": "How to access Anaconda command prompt in Windows 10 (64-bit)", "body": "<p>To run Anaconda Prompt using icon, I made an icon and put </p>\n\n<p><code>%windir%\\System32\\cmd.exe \"/K\" C:\\ProgramData\\Anaconda3\\Scripts\\activate.bat C:\\ProgramData\\Anaconda3</code> The file location would be different in each computer. </p>\n\n<p>at icon -> right click -> Property -> Shortcut -> Target</p>\n\n<p>I see <code>%HOMEPATH%</code> at icon -> right click -> Property -> Start in</p>\n\n<p>OS: Windows 10, Library: Anaconda 10 (64 bit)</p>\n"}, {"tags": [], "owner": {"reputation": 1757, "user_id": 2145789, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8942916c4014f0716cb41e9b2227314?s=128&d=identicon&r=PG&f=1", "display_name": "Abdulrahman Bres", "link": "https://stackoverflow.com/users/2145789/abdulrahman-bres"}, "is_accepted": false, "score": 3, "last_activity_date": 1562258152, "creation_date": 1562258152, "answer_id": 56891764, "question_id": 47914980, "link": "https://stackoverflow.com/questions/47914980/how-to-access-anaconda-command-prompt-in-windows-10-64-bit/56891764#56891764", "title": "How to access Anaconda command prompt in Windows 10 (64-bit)", "body": "<p>To create Anaconda Prompt using Command Prompt, just create a shortcut file of Command Prompt and modify the shortcut target to:</p>\n\n<p><code>%windir%\\System32\\cmd.exe \"/K\" &lt;Anaconda Location&gt;\\anaconda3\\Scripts\\activate.bat</code></p>\n\n<p>Example:</p>\n\n<p><code>%windir%\\system32\\cmd.exe \"/K\" C:\\Users\\user_1\\AppData\\Local\\Continuum\\anaconda3\\Scripts\\activate.bat</code></p>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 4514707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64374971f0b0ec0ff8ff2b1573ea983a?s=128&d=identicon&r=PG&f=1", "display_name": "djm457", "link": "https://stackoverflow.com/users/4514707/djm457"}, "is_accepted": false, "score": -1, "last_activity_date": 1585780670, "creation_date": 1585780670, "answer_id": 60981429, "question_id": 47914980, "link": "https://stackoverflow.com/questions/47914980/how-to-access-anaconda-command-prompt-in-windows-10-64-bit/60981429#60981429", "title": "How to access Anaconda command prompt in Windows 10 (64-bit)", "body": "<p>After installing Anaconda3 on your system you need to add Anaconda to the PATH environment variable. This will allow you to access Anaconda with the 'conda' command from cmd.exe or PowerShell. </p>\n\n<p>The link I provided below go through the three major issues with not recognized error. Which are:</p>\n\n<ol>\n<li>Environment PATH for Conda is not set</li>\n<li>Environment PATH is incorrectly added </li>\n<li>Anaconda version is older than the version of the Anaconda Navigator</li>\n</ol>\n\n<p>LINK: <a href=\"https://appuals.com/fix-conda-is-not-recognized-as-an-internal-or-external-command-operable-program-or-batch-file/\" rel=\"nofollow noreferrer\">https://appuals.com/fix-conda-is-not-recognized-as-an-internal-or-external-command-operable-program-or-batch-file/</a></p>\n\n<p>My issue was resolved following the steps for issue #2 Environment PATH is incorrectly added. I did not have all three file paths in my variable environment. </p>\n"}, {"comments": [{"owner": {"reputation": 575, "user_id": 1724352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vNIGZ.png?s=128&g=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/1724352/mitch"}, "edited": false, "score": 0, "creation_date": 1609827655, "post_id": 61372328, "comment_id": 115936582, "body": "This worked for me. Thanks a lot."}], "tags": [], "owner": {"reputation": 1050, "user_id": 6710876, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gErZN.jpg?s=128&g=1", "display_name": "Tobi Obeck", "link": "https://stackoverflow.com/users/6710876/tobi-obeck"}, "is_accepted": false, "score": 7, "last_activity_date": 1587579604, "creation_date": 1587579604, "answer_id": 61372328, "question_id": 47914980, "link": "https://stackoverflow.com/questions/47914980/how-to-access-anaconda-command-prompt-in-windows-10-64-bit/61372328#61372328", "title": "How to access Anaconda command prompt in Windows 10 (64-bit)", "body": "<h2>How to add anaconda installation directory to your PATH variables</h2>\n\n<h3>1. open <em>environmental variables</em> window</h3>\n\n<p>Do this by either going to <em>my computer</em> and then right clicking the background for the context menu > \"properties\". On the left side open \"advanced system settings\" or just search for \"env...\" in start menu ([Win]+[s] keys).</p>\n\n<p>Then click on <em>environment variables</em></p>\n\n<p>If you struggle with this step read <a href=\"https://superuser.com/questions/949560/how-do-i-set-system-environment-variables-in-windows-10\">this explanation</a>.</p>\n\n<h3>2. Edit Path in the <em>user environmental variables</em> section and add three new entries:</h3>\n\n<ul>\n<li><code>D:\\path\\to\\anaconda3</code></li>\n<li><code>D:\\path\\to\\anaconda3\\Scripts</code></li>\n<li><code>D:\\path\\to\\anaconda3\\Library\\bin</code></li>\n</ul>\n\n<p><code>D:\\path\\to\\anaconda3</code> should be the folder where you have installed anaconda</p>\n\n<p>Click [OK] on all opened windows.</p>\n\n<p>If you did everything correctly, you can test a <code>conda</code> command by opening a <strong>new</strong> powershell window.</p>\n\n<pre class=\"lang-bsh prettyprint-override\"><code>conda --version\n</code></pre>\n\n<p>This should output something like: <code>conda 4.8.2</code></p>\n"}], "owner": {"reputation": 819, "user_id": 3781009, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/XIh0x.jpg?s=128&g=1", "display_name": "user44796", "link": "https://stackoverflow.com/users/3781009/user44796"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173380, "favorite_count": 6, "protected_date": 1585156778, "answer_count": 6, "score": 40, "last_activity_date": 1594069417, "creation_date": 1513807311, "last_edit_date": 1513808546, "question_id": 47914980, "link": "https://stackoverflow.com/questions/47914980/how-to-access-anaconda-command-prompt-in-windows-10-64-bit", "title": "How to access Anaconda command prompt in Windows 10 (64-bit)", "body": "<p>I had to install the 64-bit version of Anaconda with python 3.5 in Windows 10. I followed the default settings (<code>AppData/Continuum/Anaconda3</code>). However, after installation, I am unsure how to access the Anaconda command prompt so that I can use conda to install packages. I also attempted to install Anaconda 64 bit in <code>C:/Program Files,</code> but several of the python script did not like the space and it failed to install.</p>\n\n<p>What can I do to access the Anaconda prompt?</p>\n"}, {"tags": ["python", "pca", "knn"], "comments": [{"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1513807678, "post_id": 47914966, "comment_id": 82798126, "body": "What is the theoretical base of your check (why comparing PCA=linear with KNN=nonlinear)?"}, {"owner": {"reputation": 1, "user_id": 9124678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72cbda368901fac5d859615c2ab0612?s=128&d=identicon&r=PG&f=1", "display_name": "J. Eikens", "link": "https://stackoverflow.com/users/9124678/j-eikens"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1513808018, "post_id": 47914966, "comment_id": 82798272, "body": "My main goal is to digit recognition, therefore i found this implementation from somewhere else. Original code was using scikit learn pca, so i tried to implement my pca to better understand pca and see if i could succeed. Btw i&#39;m open to any suggesiton to solve this problem by any other approach."}], "answers": [{"tags": [], "owner": {"reputation": 369, "user_id": 8279988, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213215504279552/picture?type=large", "display_name": "SENHAJI RHAZI Hamza", "link": "https://stackoverflow.com/users/8279988/senhaji-rhazi-hamza"}, "is_accepted": false, "score": 0, "last_activity_date": 1519724921, "creation_date": 1519724921, "answer_id": 49005661, "question_id": 47914966, "link": "https://stackoverflow.com/questions/47914966/python-pca-implementation-low-success/49005661#49005661", "title": "Python PCA Implementation Low Success", "body": "<p>I d'ont know why you are dividing cp.cov() by x-1 and you use np.hstack, here is i think a much simple version of PCA(tested and compared witch scikit) each data is a column vector shape(N,1)</p>\n\n<pre><code>def myPCA(data, n_comp=3):\n   d= data - data.mean(axis = 1).reshape(data.shape[0], 1)\n   c = np.cov(d)\n   eigvals, eigvect = np.linalg.eigh(c)\n   ind = np.argsort(eigvals)\n   ind = ind[::-1]\n   eigvals = eigvals[ind]\n   eigvect = eigvect[:,ind]\n   data_projected = (d.T @ eigvect[:,:n_comp]).T\n   return eigvals[:n_comp], eigvect[:,:n_comp], data_projected\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9124678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72cbda368901fac5d859615c2ab0612?s=128&d=identicon&r=PG&f=1", "display_name": "J. Eikens", "link": "https://stackoverflow.com/users/9124678/j-eikens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519724921, "creation_date": 1513807250, "question_id": 47914966, "link": "https://stackoverflow.com/questions/47914966/python-pca-implementation-low-success", "title": "Python PCA Implementation Low Success", "body": "<p>I'm trying to implement PCA on python myself. I'm using KNN classifier on mnist dataset to check the sucess of my implementation but the success ratio is too low as %10 percentage. Can you please check my code and indicate what im doing wrong?</p>\n\n<pre><code>import numpy as np \nfrom sklearn.neighbors import KNeighborsClassifier\n\ndef PCA(data, ndimension): \n    x , y = data.shape\n    mean_vec = np.mean(data, axis=0)\n    mean_data = data - mean_vec\n    cov_mat = mean_data.T.dot(mean_data) / (x-1)\n    eig_vals, eig_vecs = np.linalg.eig(cov_mat)\n    eig_pairs = [(np.abs(eig_vals[i]), eig_vecs[:,i]) for i in range(len(eig_vals))]\n    eig_pairs.sort(key=lambda x: x[0], reverse=True)\n\n    matrix_w = eig_pairs[0][1].reshape(y,1)\n    for ar in range(1, ndimension):\n    matrix_w = np.hstack((matrix_w, eig_pairs[ar][1].reshape(y,1)))\n\n   FinalData = (mean_data.dot(matrix_w))\n\n   return FinalData\n\nxtrain = PCA(train_images,40)\nxtest = PCA(test_images, 40)   \n\nr=0\nw=0\nnum = len(xtest)\nfor i in range(num):\n    t = xtest[i]\n    j = getNearestSampleIndex(t, xtrain)\n\n    if (np.all(train_labels[j] == test_labels[i])):\n        r+=1\n    else:\n    w+=1\n\nprint (\"tested \", num, \" digits\")\nprint (\"correct: \", r, \"wrong: \", w, \"error rate: \", float(w)*100/(r+w), \"%\")\nprint (\"got correctly \", float(r)*100/(r+w), \"%\")    \n</code></pre>\n"}, {"tags": ["python", "unit-testing", "pytest"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1513807193, "post_id": 47914934, "comment_id": 82797923, "body": "<a href=\"https://docs.pytest.org/en/latest/skipping.html\" rel=\"nofollow noreferrer\"><i>&quot;Alternatively, it is also possible to skip imperatively during test execution or setup by calling the <code>pytest.skip(reason)</code> function...&quot;</i></a>"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1513807351, "post_id": 47914934, "comment_id": 82797990, "body": "I mean you can literally have the logic you show in your question, but replace <code>skip_me</code> with <code>pytest.skip</code>."}, {"owner": {"reputation": 3095, "user_id": 1008902, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/71cad26db42145bae6acca07bd2688d3?s=128&d=identicon&r=PG", "display_name": "DikobrAz", "link": "https://stackoverflow.com/users/1008902/dikobraz"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1513807506, "post_id": 47914934, "comment_id": 82798052, "body": "You right @jonrsharpe, somehow missed that, thanks :)"}], "answers": [{"tags": [], "owner": {"reputation": 3095, "user_id": 1008902, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/71cad26db42145bae6acca07bd2688d3?s=128&d=identicon&r=PG", "display_name": "DikobrAz", "link": "https://stackoverflow.com/users/1008902/dikobraz"}, "is_accepted": false, "score": 4, "last_activity_date": 1513807663, "creation_date": 1513807663, "answer_id": 47915043, "question_id": 47914934, "link": "https://stackoverflow.com/questions/47914934/py-test-skip-depending-on-parameters/47915043#47915043", "title": "py.test skip depending on parameters", "body": "<p>Okay, that was easy:</p>\n\n<pre><code>@pytest.mark.parametrize(\"a\", [1, 2])\n@pytest.mark.parametrize(\"b\", [1, 2, 3, 4])\n@pytest.mark.parametrize(\"c\", [1, 2, 3])\n@pytest.mark.parametrize(\"d\", [1, 2])\ndef test_func_variations(a, b, c, d):\n    if (a == 1 and b in (2, 3)) or (a == 2 and c == 3):\n        pytest.skip(\"invalid parameter combination\")\n    assert func(a, b, c, d) == a*b*c+d\n</code></pre>\n"}], "owner": {"reputation": 3095, "user_id": 1008902, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/71cad26db42145bae6acca07bd2688d3?s=128&d=identicon&r=PG", "display_name": "DikobrAz", "link": "https://stackoverflow.com/users/1008902/dikobraz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 779, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1513807663, "creation_date": 1513807108, "question_id": 47914934, "link": "https://stackoverflow.com/questions/47914934/py-test-skip-depending-on-parameters", "title": "py.test skip depending on parameters", "body": "<p>I want exhaustively test function by calling it with all possible argument combinations:</p>\n\n<pre><code>@pytest.mark.parametrize(\"a\", [1, 2])\n@pytest.mark.parametrize(\"b\", [1, 2, 3, 4])\n@pytest.mark.parametrize(\"c\", [1, 2, 3])\n@pytest.mark.parametrize(\"d\", [1, 2])\ndef test_func_variations(a, b, c, d):\n    assert func(a, b, c, d) == a*b*c+d\n</code></pre>\n\n<p>Though some of these combinations don't make sense. Is there an easy way to skip these combinations with py.test, e.g. too have logic like this:</p>\n\n<pre><code>def test_func_variations(a, b, c, d):\n    if (a == 1 and b in (2, 3)) or (a == 2 and c == 3):\n        skip_me()\n    assert func(a, b, c, d) == a*b*c+d\n</code></pre>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 1545, "user_id": 3657206, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76ec2024a0cee7d1bcf3a3980f54568e?s=128&d=identicon&r=PG&f=1", "display_name": "LThode", "link": "https://stackoverflow.com/users/3657206/lthode"}, "edited": false, "score": 1, "creation_date": 1513807531, "post_id": 47914909, "comment_id": 82798068, "body": "What&#39;s with all the \\r&#39;s in the output?"}, {"owner": {"reputation": 1, "user_id": 9124177, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yrGkSKmMoPI/AAAAAAAAAAI/AAAAAAAABhY/T_uqBTDG0Io/photo.jpg?sz=128", "display_name": "Jamie Jackson", "link": "https://stackoverflow.com/users/9124177/jamie-jackson"}, "reply_to_user": {"reputation": 1545, "user_id": 3657206, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76ec2024a0cee7d1bcf3a3980f54568e?s=128&d=identicon&r=PG&f=1", "display_name": "LThode", "link": "https://stackoverflow.com/users/3657206/lthode"}, "edited": false, "score": 0, "creation_date": 1513808235, "post_id": 47914909, "comment_id": 82798361, "body": "Not sure. That&#39;s directly from the error log in Apache. I removed the line C:/Apache24/cgi-bin/host-lookup-trace.py, referer: <a href=\"http://127.0.0.1/host-lookup-trace.html\" rel=\"nofollow noreferrer\">127.0.0.1/host-lookup-trace.html</a> that follows the \\r in each log entry"}], "answers": [{"comments": [{"owner": {"reputation": 55869, "user_id": 48503, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/672f798341250dd228b286738e8d6309?s=128&d=identicon&r=PG", "display_name": "Luke Woodward", "link": "https://stackoverflow.com/users/48503/luke-woodward"}, "edited": false, "score": 0, "creation_date": 1513808455, "post_id": 47915108, "comment_id": 82798437, "body": "If you take a close look at the stacktrace, the line <code>return self.data[key.upper()]</code> is within <code>os.py</code>, i.e. the built-in <code>os</code> module.  This is not the problem."}, {"owner": {"reputation": 1, "user_id": 9124177, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yrGkSKmMoPI/AAAAAAAAAAI/AAAAAAAABhY/T_uqBTDG0Io/photo.jpg?sz=128", "display_name": "Jamie Jackson", "link": "https://stackoverflow.com/users/9124177/jamie-jackson"}, "reply_to_user": {"reputation": 55869, "user_id": 48503, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/672f798341250dd228b286738e8d6309?s=128&d=identicon&r=PG", "display_name": "Luke Woodward", "link": "https://stackoverflow.com/users/48503/luke-woodward"}, "edited": false, "score": 0, "creation_date": 1513808712, "post_id": 47915108, "comment_id": 82798515, "body": "That is correct @LukeWoodward - I&#39;m not making that call in my code."}, {"owner": {"reputation": 1, "user_id": 9124177, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yrGkSKmMoPI/AAAAAAAAAAI/AAAAAAAABhY/T_uqBTDG0Io/photo.jpg?sz=128", "display_name": "Jamie Jackson", "link": "https://stackoverflow.com/users/9124177/jamie-jackson"}, "edited": false, "score": 0, "creation_date": 1513809073, "post_id": 47915108, "comment_id": 82798636, "body": "Also from the shell with upper case--- os.environ[&quot;PROGRAMFILES&quot;] &#39;C:\\\\Program Files&#39;"}], "tags": [], "owner": {"reputation": 877, "user_id": 2134991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dca82a9dd68adfb301485dcd30707?s=128&d=identicon&r=PG", "display_name": "Niema Moshiri", "link": "https://stackoverflow.com/users/2134991/niema-moshiri"}, "is_accepted": false, "score": 0, "last_activity_date": 1513823611, "last_edit_date": 1513823611, "creation_date": 1513807964, "answer_id": 47915108, "question_id": 47914909, "link": "https://stackoverflow.com/questions/47914909/python-keyerror-programfiles-r-when-calling-py-from-cgi/47915108#47915108", "title": "python - KeyError: &#39;PROGRAMFILES&#39;\\r: when calling .py from cgi", "body": "<p>Your problem is this:</p>\n\n<pre><code>return self.data[key.upper()]\n</code></pre>\n\n<p>You mention that you can do this:</p>\n\n<pre><code>os.environ[\"ProgramFiles\"]\n</code></pre>\n\n<p>But note that the key is <code>\"ProgramFiles\"</code>, not <code>\"PROGRAMFILES\"</code>. When you do <code>key.upper()</code>, you're taking whatever key you're passing in, even if it's the correct <code>\"ProgramFiles\"</code> string, and you're making it all upper-case</p>\n\n<p>EDIT: And +1 to the comment: what's with all the <code>\\r</code> everywhere?</p>\n\n<p>EDIT 2: Never mind, seems like this is not the case</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9124177, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yrGkSKmMoPI/AAAAAAAAAAI/AAAAAAAABhY/T_uqBTDG0Io/photo.jpg?sz=128", "display_name": "Jamie Jackson", "link": "https://stackoverflow.com/users/9124177/jamie-jackson"}, "is_accepted": false, "score": 0, "last_activity_date": 1513892109, "creation_date": 1513892109, "answer_id": 47933025, "question_id": 47914909, "link": "https://stackoverflow.com/questions/47914909/python-keyerror-programfiles-r-when-calling-py-from-cgi/47933025#47933025", "title": "python - KeyError: &#39;PROGRAMFILES&#39;\\r: when calling .py from cgi", "body": "<p>Since os.environ was pulling the environment variables for the cgi/html instance that was calling the script, it did not have an entry for \"ProgramFiles\" in the dict -- thus the KeyError.</p>\n\n<p>To fix it I added</p>\n\n<pre><code>os.environ[\"ProgramFiles\"] = 'C:\\\\Program Files'\n</code></pre>\n\n<p>above my import scapy. </p>\n\n<p><strong>I don't know that this is the correct way to do this, but for what I am looking to do it worked</strong></p>\n"}], "owner": {"reputation": 1, "user_id": 9124177, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yrGkSKmMoPI/AAAAAAAAAAI/AAAAAAAABhY/T_uqBTDG0Io/photo.jpg?sz=128", "display_name": "Jamie Jackson", "link": "https://stackoverflow.com/users/9124177/jamie-jackson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 447, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1513892109, "creation_date": 1513806981, "last_edit_date": 1513808116, "question_id": 47914909, "link": "https://stackoverflow.com/questions/47914909/python-keyerror-programfiles-r-when-calling-py-from-cgi", "title": "python - KeyError: &#39;PROGRAMFILES&#39;\\r: when calling .py from cgi", "body": "<p>***UPDATE at bottom</p>\n\n<p>I am building a simple webpage that I am using to launch some python scripts via cgi. I am running into an issue on one of my scripts that uses the scapy library. It appears that as scapy is imported I am running into a possible path issue (from the research I've done). I don't have this issue when running from the console or from a frozen pyinstaller .exe. </p>\n\n<p>Running Python 2.7</p>\n\n<p>Apache on Windows 7</p>\n\n<p>This is what I'm getting traceback wise from my Apache error logs (I've cleaned up some unnecessary stuff from the output to make it easier to read)</p>\n\n<pre><code>Traceback (most recent call last):\\r: \nFile \"C:/Apache24/cgi-bin/host-lookup-trace.py\", line 3, in &lt;module&gt;\\r: \nfrom scapy.all import *\\r: \n\nFile \"C:\\\\Python27\\\\lib\\\\site-packages\\\\scapy\\\\all.py\", line 11, in \n&lt;module&gt;\\r: \nfrom scapy.config import *\\r: \n\nFile \"C:\\\\Python27\\\\lib\\\\site-packages\\\\scapy\\\\config.py\", line 15, in \n&lt;module&gt;\\r: \nfrom scapy.data import *\\r: \n\nFile \"C:\\\\Python27\\\\lib\\\\site-packages\\\\scapy\\\\data.py\", line 240, in \n&lt;module&gt;\\r: \nMANUFDB = load_manuf(os.environ[\"ProgramFiles\"] + \n\"\\\\\\\\wireshark\\\\\\\\manuf\")\\r: \n\nFile \"C:\\\\Python27\\\\lib\\\\os.py\", line 425, in __getitem__\\r: \nreturn self.data[key.upper()]\\r: \n\nKeyError: 'PROGRAMFILES'\\r: \n</code></pre>\n\n<p>In my shell, I get</p>\n\n<pre><code>os.environ[\"ProgramFiles\"]\n'C:\\\\Program Files'\n</code></pre>\n\n<p>As a test, I did the following in my scapy\\data.py file</p>\n\n<pre><code>#MANUFDB = load_manuf(os.environ[\"ProgramFiles\"] + \"\\\\wireshark\\\\manuf\")\n MANUFDB = load_manuf(\"C:\\\\\\\\Program Files\\\\\\\\wireshark\\\\\\\\manuf\")\n</code></pre>\n\n<p>Same error with os.environ, just in a different call now:</p>\n\n<pre><code>Traceback (most recent call last):\\r: \nFile \"C:/Apache24/cgi-bin/host-lookup-trace.py\", line 3, in &lt;module&gt;\\r:\n\nfrom scapy.all import *\\r: \nFile \"C:\\\\Python27\\\\lib\\\\site-packages\\\\scapy\\\\all.py\", line 16, in \n&lt;module&gt;\\r: \nfrom scapy.arch import *\\r: \n\nFile \"C:\\\\Python27\\\\lib\\\\site-packages\\\\scapy\\\\arch\\\\__init__.py\", line 70, \nin &lt;module&gt;\\r: \nfrom scapy.arch.windows import *\\r: \n\nFile \"C:\\\\Python27\\\\lib\\\\site-packages\\\\scapy\\\\arch\\\\windows\\\\__init__.py\", \nline 317, in &lt;module&gt;\\r: \nconf.prog = WinProgPath()\\r: \n\nFile \"C:\\\\Python27\\\\lib\\\\site-packages\\\\scapy\\\\arch\\\\windows\\\\__init__.py\", \nline 288, in __init__\\r: \nself._reload()\\r: \n\nFile \"C:\\\\Python27\\\\lib\\\\site-packages\\\\scapy\\\\arch\\\\windows\\\\__init__.py\", \nline 301, in _reload\\r: \nself.wireshark = win_find_exe(\"wireshark\", \"wireshark\")\\r: \n\nFile \"C:\\\\Python27\\\\lib\\\\site-packages\\\\scapy\\\\arch\\\\windows\\\\__init__.py\", \nline 277, in win_find_exe\\r: \npath = _where(fn, dirs=[os.path.join(os.environ[env], installsubdir)])\\r: \n\nFile \"C:\\\\Python27\\\\lib\\\\os.py\", line 425, in __getitem__\\r: \n[return self.data[key.upper()]\\r: \n\nKeyError: 'PROGRAMFILES'\\r: \n</code></pre>\n\n<p>Hoping the great minds here can help me get to the bottom of this! I can post any further information as requested.</p>\n\n<p>***UPDATE</p>\n\n<p>I took out the import scapy line and I just tried to import os and then print the os.environ string. I get the same error, just not sure why calling this from within cgi is breaking this. </p>\n\n<pre><code>&lt;type 'exceptions.KeyError'&gt;    Python 2.7.13: C:\\Python27\\Python.exe\nWed Dec 20 16:04:55 2017\nA problem occurred in a Python script. Here is the sequence of function \ncalls leading up to the error, in the order they occurred.\n\nC:\\Apache24\\cgi-bin\\host-lookup-trace.py in ()\n32 print '&lt;input type = \\\"submit\\\" value = \\\"Submit Selected Host\\\" /&gt;'\n33 print '&lt;/form&gt;' \n=&gt;  34 print os.environ[\"ProgramFiles\"]\n35 print '&lt;body&gt;\\n\\n'\n36 print '&lt;/html&gt;\\n\\n'\nos = &lt;module 'os' from 'C:\\Python27\\lib\\os.pyc'&gt;, os.environ = \n{'HTTP_REFERER': 'http://127.0.0.1/host-lookup-t...'1', \n'HTTP_ACCEPT_ENCODING': 'gzip, deflate, br'}\nC:\\Python27\\lib\\os.py in __getitem__(self={'HTTP_REFERER': \n'http://127.0.0.1/host-lookup-t...'1', 'HTTP_ACCEPT_ENCODING': 'gzip, \ndeflate, br'}, key='ProgramFiles')\n423                 self.data[key.upper()] = item\n424             def __getitem__(self, key):\n=&gt;  425                 return self.data[key.upper()]\n426             try:\n427                 unsetenv\nself = {'HTTP_REFERER': 'http://127.0.0.1/host-lookup-t...'1', \n'HTTP_ACCEPT_ENCODING': 'gzip, deflate, br'}, self.data = {'COMSPEC': \nr'C:\\WINDOWS\\system32\\cmd.exe', 'CONTENT_LENGTH': '26', 'CONTENT_TYPE': \n'application/x-www-form-urlencoded', 'CONTEXT_DOCUMENT_ROOT': \n'c:/Apache24/cgi-bin/', 'CONTEXT_PREFIX': '/cgi-bin/', 'DOCUMENT_ROOT': \n'C:/Apache24/htdocs', 'GATEWAY_INTERFACE': 'CGI/1.1', 'HTTP_ACCEPT': \n</code></pre>\n\n<p>'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,<em>/</em>\n    ;q=0.8', 'HTTP_ACCEPT_ENCODING': 'gzip, deflate, br', 'HTTP_ACCEPT_LANGUAGE': \n    'en-US,en;q=0.9', ...}, key = 'ProgramFiles', key.upper = \n    : 'PROGRAMFILES' \n    args = ('PROGRAMFILES',) \n    message = 'PROGRAMFILES'</p>\n"}, {"tags": ["python", "matplotlib", "visualization", "axis-labels"], "answers": [{"comments": [{"owner": {"reputation": 2150, "user_id": 4879688, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9584120114c33e0a33279c40e7e79d2b?s=128&d=identicon&r=PG&f=1", "display_name": "abukaj", "link": "https://stackoverflow.com/users/4879688/abukaj"}, "edited": false, "score": 1, "creation_date": 1513855411, "post_id": 47915765, "comment_id": 82815281, "body": "&quot;draw it yorself&quot;, then"}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 7, "last_activity_date": 1549597023, "last_edit_date": 1549597023, "creation_date": 1513812271, "answer_id": 47915765, "question_id": 47914905, "link": "https://stackoverflow.com/questions/47914905/how-can-i-label-a-span-of-values-on-matplotlib-axis/47915765#47915765", "title": "How can I label a span of values on matplotlib axis?", "body": "<p>There is no <em>\"<code>.axvspan()</code> equivalent for axis\"</em>. Also <em>\"<code>.axvline()</code>\"</em> is not <em>\"for ticks\"</em>. And there is also nothing intended for labeling <code>.axvspan()</code>. </p>\n\n<p>So let's answer the question how to produce some red bracket (paranthesis) below the plot. You can basically just plot a line in form of the bracket and position it according to the xaxis transform. Below is a function to do that.</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\n\nfig, ax = plt.subplots()\nax.bar(range(-1,5),range(3,9), width=1, align=\"edge\", ec=\"k\", alpha=1)\nax.set_xticks(range(1,6))\n\n\ndef bracket(ax, pos=[0,0], scalex=1, scaley=1, text=\"\",textkw = {}, linekw = {}):\n    x = np.array([0, 0.05, 0.45,0.5])\n    y = np.array([0,-0.01,-0.01,-0.02])\n    x = np.concatenate((x,x+0.5)) \n    y = np.concatenate((y,y[::-1]))\n    ax.plot(x*scalex+pos[0], y*scaley+pos[1], clip_on=False, \n            transform=ax.get_xaxis_transform(), **linekw)\n    ax.text(pos[0]+0.5*scalex, (y.min()-0.01)*scaley+pos[1], text, \n                transform=ax.get_xaxis_transform(),\n                ha=\"center\", va=\"top\", **textkw)\n\nbracket(ax, text=\"0\", pos=[-1,-0.01], linekw=dict(color=\"crimson\", lw=2) )\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/UiMz3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UiMz3.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2150, "user_id": 4879688, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9584120114c33e0a33279c40e7e79d2b?s=128&d=identicon&r=PG&f=1", "display_name": "abukaj", "link": "https://stackoverflow.com/users/4879688/abukaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1545, "favorite_count": 2, "accepted_answer_id": 47915765, "answer_count": 1, "score": 4, "last_activity_date": 1549597023, "creation_date": 1513806960, "question_id": 47914905, "link": "https://stackoverflow.com/questions/47914905/how-can-i-label-a-span-of-values-on-matplotlib-axis", "title": "How can I label a span of values on matplotlib axis?", "body": "<p>In my histogram, I need to annotate the X-axis like that:\n<a href=\"https://i.stack.imgur.com/hxiA1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hxiA1.png\" alt=\"enter image description here\"></a></p>\n\n<p>The \"0\" label is spanning between two ticks since there is a separate bin for 0s only in the histogram, while rest of the axis is linear to indicate boundaries of other bins.\nThe underbrace is not crucial, but there shall be some indicator that \"0\" spans for entire bin.</p>\n\n<p>The closest solution I found so far is \"draw it yourself\" (<a href=\"https://stackoverflow.com/questions/19184484/how-to-add-group-labels-for-bar-charts-in-matplotlib\">How to add group labels for bar charts in matplotlib?</a>).\nI am looking rather for <code>.axvspan()</code> equivalent for axis (as <code>.axvline()</code> is for ticks), like something intended for labelling <code>.axvspan()</code>.</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 0, "creation_date": 1513807462, "post_id": 47914870, "comment_id": 82798031, "body": "Is your last formula correct? Not sure if you want the temperature to decrese by 5 degrees <i>once</i> after <code>t80</code> or <i>in every step</i> thereafter."}, {"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 0, "creation_date": 1513807605, "post_id": 47914870, "comment_id": 82798095, "body": "Also, one temperature drops below 80, will it stay below 80, and if not, what happens if it rises above 80 again (and drops below once more)?"}, {"owner": {"reputation": 307, "user_id": 8417039, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3ab1ee4badf1957844d6690115caf0ee?s=128&d=identicon&r=PG&f=1", "display_name": "Louise", "link": "https://stackoverflow.com/users/8417039/louise"}, "reply_to_user": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 0, "creation_date": 1513807793, "post_id": 47914870, "comment_id": 82798175, "body": "Essentially I have a liquid which is hot and cooling down to the Temperature if it\u2019s surroundings. I have defined a function which describes this behavior. After adding a cooler liquid, and the temperature then drops by 5 degrees."}], "answers": [{"tags": [], "owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1513808075, "creation_date": 1513808075, "answer_id": 47915131, "question_id": 47914870, "link": "https://stackoverflow.com/questions/47914870/conditional-statements-in-python-with-an-iterative-process/47915131#47915131", "title": "Conditional statements in python with an iterative process", "body": "<p>As I understand the question, the temperature will decrease <em>once</em> by an additional 5 degrees when the temperature drops below 80 degrees. If this is correct, you could simply add an <code>if</code> condition to your <code>for</code> loop:</p>\n\n<pre><code>cooling_liquid_poured = False\nfor i in range(1,len(t)):\n    te[i] = te[i-1] + f(te[i-1])*dt \n    if te[i] &lt; 80 and not cooling_liquid_poured:\n        te[i] -= 5\n        cooling_liquid_poured = True\n</code></pre>\n\n<p>If instead the temperature should drop by an additional 5 degrees in <em>every</em> step after the liquid has been poured, just remove that variable and just check <code>if te[i] &lt; 80</code>.</p>\n"}], "owner": {"reputation": 307, "user_id": 8417039, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3ab1ee4badf1957844d6690115caf0ee?s=128&d=identicon&r=PG&f=1", "display_name": "Louise", "link": "https://stackoverflow.com/users/8417039/louise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 47915131, "answer_count": 1, "score": 0, "last_activity_date": 1513808075, "creation_date": 1513806739, "question_id": 47914870, "link": "https://stackoverflow.com/questions/47914870/conditional-statements-in-python-with-an-iterative-process", "title": "Conditional statements in python with an iterative process", "body": "<p>I am simulating the temperature of a material in various circumstances. I would like to produce a plot of temperature versus time, where all the temperature drops by an additional 5 degrees after a certain temperature and then the rate of temperature change is observed. Initially I had the following: </p>\n\n<pre><code>for i in range(1,len(t)):\n    te[i] = te[i-1] + f(te[i-1])*dt    \n</code></pre>\n\n<p>Which was used to plot a curve decreasing with time (t). I would like to produce two parts to the plot now. The x-values of my plot are t. The y-values are Te. I would like to decrease all Te values by an additional 5, after the time at which Te is less than 80. I usually use IDL so would say something along the lines of T where(t=80). This is what I have so far, obviously the syntax is completely incorrect, and the i values are indexes and not values of time.</p>\n\n<pre><code>t80 = t where Te &lt;= 80.0\n\nfor i in range(1,t80):\n    te[i] = te[i-1] + f(te[i-1])*dt \n\nfor i in range(t80,len(t)):\n    te3[i] = te3[i-1] + f(te3[i-1])*dt - 5\n</code></pre>\n\n<p>Does anyone know how I would define t80 in python?</p>\n"}, {"tags": ["python", "csv", "stream", "python-3.6"], "comments": [{"owner": {"reputation": 1054, "user_id": 3316077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/js6iY.png?s=128&g=1", "display_name": "Cajuu&#39;", "link": "https://stackoverflow.com/users/3316077/cajuu"}, "edited": false, "score": 0, "creation_date": 1513806634, "post_id": 47914844, "comment_id": 82797703, "body": "I&#39;m sure there&#39;s a better title that describes my problem, but I just couldn&#39;t think of a better one. Anyone is free to edit this accordingly"}, {"owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1513841482, "post_id": 47914844, "comment_id": 82807464, "body": "The solutions depends on how your original data looks like."}, {"owner": {"reputation": 1054, "user_id": 3316077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/js6iY.png?s=128&g=1", "display_name": "Cajuu&#39;", "link": "https://stackoverflow.com/users/3316077/cajuu"}, "reply_to_user": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1513968197, "post_id": 47914844, "comment_id": 82861731, "body": "@MikeM&#252;ller updated."}, {"owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1513981730, "post_id": 47914844, "comment_id": 82866063, "body": "Instead of using <code>writer.writerows</code>, can&#39;t you just use <code>writer.writerow</code> in a loop to write out the dictionaries one at a time?  If you want, you could explicitly flush the file every one in a while to ensure that data is written in the event of a crash."}, {"owner": {"reputation": 1054, "user_id": 3316077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/js6iY.png?s=128&g=1", "display_name": "Cajuu&#39;", "link": "https://stackoverflow.com/users/3316077/cajuu"}, "edited": false, "score": 0, "creation_date": 1513982766, "post_id": 47914844, "comment_id": 82866332, "body": "@Iarsks no, I can&#39;t. Because for that to happen I&#39;d still have to have all the dicts in that list. And the problem is: &quot;What happens when you try to append the 6666 dict to that list and it crashes?&quot; Not because there&#39;s an error, but because there&#39;s no more memory left..."}, {"owner": {"reputation": 299, "user_id": 8797048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4974a292abfee54196b11ac351ad568?s=128&d=identicon&r=PG&f=1", "display_name": "J. Anderson", "link": "https://stackoverflow.com/users/8797048/j-anderson"}, "edited": false, "score": 0, "creation_date": 1514003610, "post_id": 47914844, "comment_id": 82869216, "body": "how does your original data populate from, database, network, filesystem?"}, {"owner": {"reputation": 1054, "user_id": 3316077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/js6iY.png?s=128&g=1", "display_name": "Cajuu&#39;", "link": "https://stackoverflow.com/users/3316077/cajuu"}, "reply_to_user": {"reputation": 299, "user_id": 8797048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4974a292abfee54196b11ac351ad568?s=128&d=identicon&r=PG&f=1", "display_name": "J. Anderson", "link": "https://stackoverflow.com/users/8797048/j-anderson"}, "edited": false, "score": 0, "creation_date": 1514015561, "post_id": 47914844, "comment_id": 82871015, "body": "@DanielJ.Anderson network (scraping) :)"}, {"owner": {"reputation": 299, "user_id": 8797048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4974a292abfee54196b11ac351ad568?s=128&d=identicon&r=PG&f=1", "display_name": "J. Anderson", "link": "https://stackoverflow.com/users/8797048/j-anderson"}, "edited": false, "score": 0, "creation_date": 1514060677, "post_id": 47914844, "comment_id": 82880878, "body": "@Cajuu&#39; is your envirment allow you to save temp data to database or disk?"}], "answers": [{"comments": [{"owner": {"reputation": 1054, "user_id": 3316077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/js6iY.png?s=128&g=1", "display_name": "Cajuu&#39;", "link": "https://stackoverflow.com/users/3316077/cajuu"}, "edited": false, "score": 1, "creation_date": 1514016827, "post_id": 47949510, "comment_id": 82871263, "body": "Thanks for your answer but it kind of doesn&#39;t work. I get: <code>sqlite3.OperationalError: table data has no column named d</code>"}, {"owner": {"reputation": 1054, "user_id": 3316077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/js6iY.png?s=128&g=1", "display_name": "Cajuu&#39;", "link": "https://stackoverflow.com/users/3316077/cajuu"}, "edited": false, "score": 0, "creation_date": 1514017296, "post_id": 47949510, "comment_id": 82871360, "body": "Apparently it throws this error when running your version the first time. After running it the second time it somehow works."}, {"owner": {"reputation": 352, "user_id": 7169448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7fcaad2f7bc6e7d3e61afbe9f851d5d?s=128&d=identicon&r=PG&f=1", "display_name": "alaricljs", "link": "https://stackoverflow.com/users/7169448/alaricljs"}, "reply_to_user": {"reputation": 1054, "user_id": 3316077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/js6iY.png?s=128&g=1", "display_name": "Cajuu&#39;", "link": "https://stackoverflow.com/users/3316077/cajuu"}, "edited": false, "score": 0, "creation_date": 1514037075, "post_id": 47949510, "comment_id": 82875384, "body": "Sorry about that, it&#39;s line 14, corrected above.  I did set(&quot;ignore_field&quot;) and it should have been either {&quot;ignore_field&quot;} or set([&quot;ignore_field&quot;])"}, {"owner": {"reputation": 352, "user_id": 7169448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7fcaad2f7bc6e7d3e61afbe9f851d5d?s=128&d=identicon&r=PG&f=1", "display_name": "alaricljs", "link": "https://stackoverflow.com/users/7169448/alaricljs"}, "reply_to_user": {"reputation": 1054, "user_id": 3316077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/js6iY.png?s=128&g=1", "display_name": "Cajuu&#39;", "link": "https://stackoverflow.com/users/3316077/cajuu"}, "edited": false, "score": 0, "creation_date": 1514037324, "post_id": 47949510, "comment_id": 82875432, "body": "The other thing is that this still stores the field names in a list which given little enough RAM or a large enough collection of data can still exhaust your memory and go no further.  The addition of columns to the DB can be done without maintaining the list, it&#39;s just going to be a lot slower since you&#39;d query the DB for what columns exist for every row of data added."}], "tags": [], "owner": {"reputation": 352, "user_id": 7169448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7fcaad2f7bc6e7d3e61afbe9f851d5d?s=128&d=identicon&r=PG&f=1", "display_name": "alaricljs", "link": "https://stackoverflow.com/users/7169448/alaricljs"}, "is_accepted": false, "score": 1, "last_activity_date": 1514037022, "last_edit_date": 1514037022, "creation_date": 1513999900, "answer_id": 47949510, "question_id": 47914844, "link": "https://stackoverflow.com/questions/47914844/avoid-bulk-data-export-into-csv-when-the-header-is-dynamic/47949510#47949510", "title": "Avoid bulk data export into csv when the header is dynamic", "body": "<p>Perhaps it's a bit over the top, however it was to me the easiest way to solve your issue.  It leverages sqlite and the ability to add columns to the table as you go.  Also, I didn't exhaustively test it.</p>\n\n<pre><code>#!/bin/env python\nfrom os import path\n\nimport sqlite3\nimport atexit\n\nhow_many = 0\n\n\nclass DB(object):\n    db_file = \"data.db\"\n\n    def __init__(self):\n        self._fieldnames = set([\"ignore_field\"])\n        self._cursor = None\n        self._db_conn = None\n        create = False\n\n        if not path.isfile(self.db_file):\n            create = True\n        self._db_conn = sqlite3.connect(self.db_file)\n        self._cursor = self._db_conn.cursor()\n\n        if create:\n            self._cursor.execute(\"\"\"CREATE TABLE data (ignore_field integer)\"\"\")\n        else:\n            # retrieve already existing fieldnames so we can continue\n            pragma = self._db_conn.execute(\"pragma table_info('data')\").fetchall()\n            self._fieldnames = set([x[1] for x in pragma])\n\n    def _add_fields(self, field_list):\n        for field in field_list:\n            if field not in self._fieldnames:\n                self._cursor.execute(\"alter table data add column '%s' 'TEXT'\" % field)\n                self._fieldnames.add(field)\n\n    def _insert_data(self, data):\n        fields = []\n        values = []\n        for f, v in data.iteritems():\n            fields.append(f)\n            values.append(\"'{}'\".format(v))\n        sql = \"\"\"insert into data ({}) values ({})\"\"\".format(\", \".join(fields), \", \".join(values))\n        self._db_conn.execute(sql)\n\n    def consume(self, one_dict):\n        self._add_fields(one_dict.keys())\n        self._insert_data(one_dict)\n        self._db_conn.commit()\n\n    def csv_out(self):\n        self._cursor.execute(\"select * from data\")\n        header = [x[0] for x in self._cursor.description]\n        print(\",\".join(header))\n        for row in self._cursor:\n            out = []\n            for field in row:\n                out.append(field if field else \"\")\n            print(\",\".join(out))\n\n\ndef cleanup(total):\n    print(\"Ended after record {}/{}\".format(how_many, total))\n\n\ndef main(data):\n    global how_many\n    atexit.register(cleanup, len(data))\n\n    db = DB()\n\n    skip = False\n    if how_many:\n        skip = how_many\n\n    for each in data:\n        if not skip:\n            db.consume(each)\n        else:\n            skip -= 1\n            if not skip:\n                print(\"Finished skipping {} records.\".format(how_many))\n\n        how_many += 1\n\n    print(\"Completed loading available data.\")\n\n    db.csv_out()\n\n\nif __name__ == \"__main__\":\n    data_ = [\n        {\n            'a': '1',\n            'b': '2',\n            'c': '3',\n        },\n        {\n            'a': '6',\n            'd': '1',\n            'b': '3',\n        },\n        {\n            'c': '2',\n            'e': '1',\n            'f': '9',\n        }\n    ]\n\n    main(data_)\n</code></pre>\n\n<p>If you modify how_many then the main loop skips that many records.  This lets you recover from a crash as the atexit hook should tell you how far the program got.</p>\n\n<p>There's also a bogus column/field name since you can't create an empty table and I went lazy and didn't tie the table creation into the first iteration of DB.consume().  You can always replace \"ignore_field\" with one of your existing fields.</p>\n\n<p>More laziness, I didn't do file IO I just print out the CSV.</p>\n"}, {"comments": [{"owner": {"reputation": 1054, "user_id": 3316077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/js6iY.png?s=128&g=1", "display_name": "Cajuu&#39;", "link": "https://stackoverflow.com/users/3316077/cajuu"}, "edited": false, "score": 0, "creation_date": 1514016893, "post_id": 47950485, "comment_id": 82871286, "body": "Thanks for the answer. That&#39;s a nice idea but unfortunately if I run your version against mine, the result is different :)"}, {"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "reply_to_user": {"reputation": 1054, "user_id": 3316077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/js6iY.png?s=128&g=1", "display_name": "Cajuu&#39;", "link": "https://stackoverflow.com/users/3316077/cajuu"}, "edited": false, "score": 0, "creation_date": 1514019162, "post_id": 47950485, "comment_id": 82871699, "body": "Can you explain that? What do you mean by <code>your version against mine</code>?"}, {"owner": {"reputation": 1054, "user_id": 3316077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/js6iY.png?s=128&g=1", "display_name": "Cajuu&#39;", "link": "https://stackoverflow.com/users/3316077/cajuu"}, "edited": false, "score": 0, "creation_date": 1514027568, "post_id": 47950485, "comment_id": 82873346, "body": "Run my version and then run yours. See if the result is the same"}, {"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "reply_to_user": {"reputation": 1054, "user_id": 3316077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/js6iY.png?s=128&g=1", "display_name": "Cajuu&#39;", "link": "https://stackoverflow.com/users/3316077/cajuu"}, "edited": false, "score": 0, "creation_date": 1514303926, "post_id": 47950485, "comment_id": 82930245, "body": "@Cajuu&#39;, updated the code and result with your example data"}], "tags": [], "owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "is_accepted": false, "score": 4, "last_activity_date": 1514303896, "last_edit_date": 1514303896, "creation_date": 1514012099, "answer_id": 47950485, "question_id": 47914844, "link": "https://stackoverflow.com/questions/47914844/avoid-bulk-data-export-into-csv-when-the-header-is-dynamic/47950485#47950485", "title": "Avoid bulk data export into csv when the header is dynamic", "body": "<p><strong>Edit-1 26-Dec: Updated code to generate data based on your data</strong></p>\n\n<p>Based on your requirements I would suggest the below</p>\n\n<ul>\n<li>Write headers in headers.csv file</li>\n<li>Write data in a data.csv file</li>\n<li>When you want to read/send this file, just merge the two files in one</li>\n<li>At start of your program read the existing headers.csv file and create field to index mapping</li>\n<li>When you encounter new keys in data you update the header map with a new index and update header.csv</li>\n<li>While writing dictionary data, you will use the header map to create the row data</li>\n</ul>\n\n<p>Below is a quick/dirty POC of the same and it works well for me</p>\n\n<pre><code>import csv\n\ntry:\n    f = open(\"headers.csv\", mode=\"r+\", encoding=\"utf-8\")\nexcept FileNotFoundError:\n    f = open(\"headers.csv\", mode=\"w+\", encoding=\"utf-8\")\n\nf2 = open(\"data.csv\", mode=\"a+\", encoding=\"utf-8\")\nf.seek(0)\nheaders = f.readline().strip().split(\",\")\nif headers == ['']:\n    headers = []\n\nheaders_map = {}\n\nfor index, field in enumerate(headers):\n    headers_map[field] = index\n\n\ndef update_header_dict(data):\n    updated_headers = False\n    for key in data.keys():\n        if key not in headers_map:\n            new_index = len(headers_map)\n            headers_map[key] = new_index\n            updated_headers = True\n\n    if updated_headers:\n        f.seek(0)\n        csv.DictWriter(f, headers_map.keys()).writeheader()\n        f.flush()\n\n\ndef get_row_data_dict(data):\n    row_data = [\"\"] * len(headers_map)\n\n    for k, v in data.items():\n        # if v and v[0] in ('=', '-'):\n        #     # Mark the value as text, only needed if you want to display data in excel\n        #     # else should be commented out\n        #     v = \"'\" + v\n        row_data[headers_map[k]] = v\n\n    return row_data\n\n\ndef main(data):\n    data_writer = csv.writer(f2)\n    for row in data:\n        update_header_dict(row)\n        data_writer.writerow(get_row_data_dict(row))\n\n\ndata_ = [\n    {'Catalog link': '',\n     'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n                 'Accessories / Sander Accessories',\n     'Description': 'Exclusive single-piece hub design reduces pad vibration and '\n                    'ensures smooth performance.',\n     'Each': '$ 24.70',\n     'Info': '',\n     'Line art': '',\n     'Name': '(5\") Non-Vacuum Disc Pad Vinyl-Face',\n     'Product number': '91456106T',\n     'Technical specifications': '',\n     'image_1': 'https://www.richelieu.com/documents/docsGr/120/107/6/1201076/1419675_700.jpg'},\n\n    {'Catalog link': '',\n     'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n                 'Accessories / Sander Accessories',\n     'Description': '',\n     'Each': '$ 8.19',\n     'Info': '&lt;p&gt;&lt;strong&gt;material: &lt;/strong&gt;Cork&lt;/p&gt;',\n     'Line art': '',\n     'Name': 'Replacement Plate for MKT9924DB Belt Sander',\n     'Product number': 'MKT4230358',\n     'Technical specifications': '&lt;p&gt;&lt;strong&gt;brand: &lt;/strong&gt;Makita&lt;/p&gt;',\n     'image_1': 'https://www.richelieu.com/documents/docsGr/116/631/4/1166314/1281513_700.jpg',\n     '\\xa0': '$ 257.80'},\n\n    {'Catalog link': '',\n     'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n                 'Accessories / Sander Accessories',\n     'Description': '',\n     'Each': '$ 8.19',\n     'Info': '&lt;p&gt;&lt;strong&gt;material: &lt;/strong&gt;Graphite&lt;/p&gt;',\n     'Line art': '',\n     'Name': 'Replacement Plate for MKT9924DB Belt Sander',\n     'Product number': 'MKT4230366',\n     'Technical specifications': '&lt;p&gt;&lt;strong&gt;brand: &lt;/strong&gt;Makita&lt;/p&gt;',\n     'image_1': 'https://www.richelieu.com/documents/docsPr/MK/T4/23/03/66/MKT4230366/1281514_700.jpg',\n     '\\xa0': '$ 257.80'},\n\n    {'Catalog link': '',\n     'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n                 'Accessories / Sander Accessories',\n     'Description': '- Exclusive single-piece hub design reduces pad vibration and '\n                    'ensures smooth performance.',\n     'Each': '$ 38.47',\n     'Info': '',\n     'Line art': '',\n     'Name': 'Non-Grip Vacuum Pads',\n     'Product number': '9154325',\n     'Technical specifications': '&lt;p&gt;&lt;strong&gt;thickness: &lt;/strong&gt;3/8 '\n                                 'in&lt;/p&gt;&lt;p&gt;&lt;strong&gt;density: '\n                                 '&lt;/strong&gt;Medium&lt;/p&gt;&lt;p&gt;&lt;strong&gt;nap: '\n                                 '&lt;/strong&gt;Short&lt;/p&gt;',\n     'image_1': 'https://www.richelieu.com/documents/docsPr/91/54/32/5/9154325/1213330_700.jpg',\n     'image_2': 'https://www.richelieu.com/documents/docsPr/91/54/32/5/9154325/1213331_700.jpg'},\n\n    {'Catalog link': '',\n     'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n                 'Accessories / Sander Accessories',\n     'Description': '- Exclusive single-piece hub design reduces pad vibration and '\n                    'ensures smooth performance.',\n     'Each': '$ 52.92',\n     'Info': '',\n     'Line art': '',\n     'Name': 'Non-Grip Vacuum Pads',\n     'Product number': '9154327',\n     'Technical specifications': '&lt;p&gt;&lt;strong&gt;thickness: &lt;/strong&gt;3/8 '\n                                 'in&lt;/p&gt;&lt;p&gt;&lt;strong&gt;density: '\n                                 '&lt;/strong&gt;Medium&lt;/p&gt;&lt;p&gt;&lt;strong&gt;nap: '\n                                 '&lt;/strong&gt;Short&lt;/p&gt;',\n     'image_1': 'https://www.richelieu.com/documents/docsGr/105/122/1/1051221/1213328_700.jpg',\n     'image_2': 'https://www.richelieu.com/documents/docsPr/91/54/32/7/9154327/1213332_700.jpg'},\n\n    {'Catalog link': '',\n     'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n                 'Accessories / Sander Accessories',\n     'Description': '- Unique one-piece hub design reduces pad vibration and '\n                    'ensures smooth performance.',\n     'Each': '$ 26.84',\n     'Info': '',\n     'Line art': '',\n     'Name': 'Stick-on Non-Vacuum Pads',\n     'Product number': '9156106',\n     'Technical specifications': '&lt;p&gt;&lt;strong&gt;thickness: &lt;/strong&gt;3/8 '\n                                 'in&lt;/p&gt;&lt;p&gt;&lt;strong&gt;density: &lt;/strong&gt;Medium&lt;/p&gt;',\n     'image_1': 'https://www.richelieu.com/documents/docsGr/105/122/4/1051224/1213343_700.jpg',\n     'image_2': 'https://www.richelieu.com/documents/docsPr/91/56/10/6/9156106/1213345_700.jpg'},\n\n    {'Catalog link': '',\n     'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n                 'Accessories / Sander Accessories',\n     'Description': '- Unique one-piece hub design reduces pad vibration and '\n                    'ensures smooth performance.',\n     'Each': '$ 51.70',\n     'Info': '',\n     'Line art': '',\n     'Name': 'Stick-on Non-Vacuum Pads',\n     'Product number': '9156107',\n     'Technical specifications': '&lt;p&gt;&lt;strong&gt;thickness: &lt;/strong&gt;3/8 '\n                                 'in&lt;/p&gt;&lt;p&gt;&lt;strong&gt;density: &lt;/strong&gt;Medium&lt;/p&gt;',\n     'image_1': 'https://www.richelieu.com/documents/docsPr/91/56/10/7/9156107/1213344_700.jpg',\n     'image_2': 'https://www.richelieu.com/documents/docsPr/91/56/10/7/9156107/1213346_700.jpg'},\n\n    {'Catalog link': '',\n     'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n                 'Accessories / Sander Accessories',\n     'Description': 'Size: 2-1/2\" x 14\".',\n     'Each': '$ 12.36',\n     'Info': '',\n     'Line art': '',\n     'Name': 'Sandpaper Belt 2\u00bd \" x 14\" for Compact Belt Sander PC371 or PC371K',\n     'Product number': 'PC371K060',\n     'Technical specifications': '',\n     'image_1': 'https://www.richelieu.com/documents/docsPr/PC/37/1K/06/0/PC371K060/1263523_700.jpg',\n     '\\xa0': '$ 148.18'},\n\n    {'Catalog link': '',\n     'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n                 'Accessories / Sander Accessories',\n     'Description': 'Size: 2-1/2\" x 14\".',\n     'Each': '$ 12.36',\n     'Info': '',\n     'Line art': '',\n     'Name': 'Sandpaper Belt 2\u00bd \" x 14\" for Compact Belt Sander PC371 or PC371K',\n     'Product number': 'PC371K080',\n     'Technical specifications': '',\n     'image_1': 'https://www.richelieu.com/documents/docsPr/PC/37/1K/08/0/PC371K080/1263524_700.jpg',\n     '\\xa0': '$ 148.18'},\n\n    {'Catalog link': '',\n     'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n                 'Accessories / Sander Accessories',\n     'Description': 'Size: 2-1/2\" x 14\".',\n     'Each': '$ 12.36',\n     'Info': '',\n     'Line art': '',\n     'Name': 'Sandpaper Belt 2\u00bd \" x 14\" for Compact Belt Sander PC371 or PC371K',\n     'Product number': 'PC371K120',\n     'Technical specifications': '',\n     'image_1': 'https://www.richelieu.com/documents/docsPr/PC/37/1K/12/0/PC371K120/1263526_700.jpg',\n     '\\xa0': '$ 148.18'},\n\n    {'Catalog link': '',\n     'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n                 'Accessories / Sander Accessories',\n     'Description': 'Size: 2-1/2\" x 14\".',\n     'Each': '$ 12.36',\n     'Info': '',\n     'Line art': '',\n     'Name': 'Sandpaper Belt 2\u00bd \" x 14\" for Compact Belt Sander PC371 or PC371K',\n     'Product number': 'PC371K100',\n     'Technical specifications': '',\n     'image_1': 'https://www.richelieu.com/documents/docsPr/PC/37/1K/10/0/PC371K100/1263525_700.jpg',\n     '\\xa0': '$ 148.18'},\n\n    {'Catalog link': '',\n     'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n                 'Accessories / Sander Accessories',\n     'Description': 'Exclusive single-piece hub design reduces pad vibration and '\n                    'ensures smooth performance.',\n     'Each': '$ 25.22',\n     'Info': '',\n     'Line art': '',\n     'Name': '5\" Non-Vacuum Disc Pad Hook-Face',\n     'Product number': '91454325T',\n     'Technical specifications': '',\n     'image_1': 'https://www.richelieu.com/documents/docsGr/120/107/7/1201077/1419678_700.jpg'},\n\n    {'Catalog link': '',\n     'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n                 'Accessories / Sander Accessories',\n     'Description': '- Pads mount with screws.',\n     'Each': '$ 31.80',\n     'Info': '',\n     'Line art': '',\n     'Name': 'Plates for Non-Vacuum (Grip-On) Dynabug II Disc Pads - 7.62 cm x '\n             '10.79 cm (3\" x 4-1/4\")',\n     'Product number': '9156315',\n     'Technical specifications': '&lt;p&gt;&lt;strong&gt;thickness: &lt;/strong&gt;3/8 '\n                                 'in&lt;/p&gt;&lt;p&gt;&lt;strong&gt;density: &lt;/strong&gt;Medium&lt;/p&gt;',\n     'image_1': 'https://www.richelieu.com/documents/docsGr/116/625/4/1166254/1280825_700.jpg',\n     '\\xa0': '$ 179.95'}\n]\n\ndata2_ = [\n    {\n        'a': '2',\n        'f': '1',\n        'z': '9',\n    },\n]\n\nmain(data_)\n# main(data2_)\n\nf.close()\nf2.close()\n</code></pre>\n\n<p>Running above generates two files and then i run below on terminal</p>\n\n<pre><code>cat headers.csv data.csv &gt; output.csv\n</code></pre>\n\n<p>And then open <code>output.csv</code> in excel</p>\n\n<p><a href=\"https://i.stack.imgur.com/TjZvs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TjZvs.png\" alt=\"Excel Data\"></a></p>\n\n<p>The only issue you may see is <code>#NAME?</code>, but those are because excel is trying to process the <code>-</code> you had at the start of the text. If you to process text like that you need to uncomment the below part of the code</p>\n\n<pre><code>    # if v and v[0] in ('=', '-'):\n    #     # Mark the value as text, only needed if you want to display data in excel\n    #     # else should be commented out\n    #     v = \"'\" + v\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "is_accepted": true, "score": 2, "last_activity_date": 1514029104, "last_edit_date": 1514029104, "creation_date": 1514025976, "answer_id": 47951835, "question_id": 47914844, "link": "https://stackoverflow.com/questions/47914844/avoid-bulk-data-export-into-csv-when-the-header-is-dynamic/47951835#47951835", "title": "Avoid bulk data export into csv when the header is dynamic", "body": "<h2>Temporary Saving Data</h2>\n\n<p>Since your data comes from scraping, it may be considered a stream.\nTo mimic a stream, I use <code>data_.pop()</code>to get one item at a time.\nThe following solution adds each item ones it comes form the stream.\nThe header and body of the csv are stored in different files.\nThe header potentially grows in length over time.\nThe the rows you saved before such a growth step naturally cannot know\nthis growth and therefore may be missing some trailing commas to indicate missing items.</p>\n\n<pre><code>import csv\nimport os\n\nclass StreamCSV:  # Python 3\n    def __init__(self, header_file_name, body_file_name):\n        self.header_file_name = header_file_name\n        self.fbody = open(body_file_name, 'a', newline='', encoding='utf-8')\n        self.csv_body = csv.writer(self.fbody)\n\n    def add_item(self, item):\n        if os.path.exists(self.header_file_name):\n            with open(self.header_file_name, 'r', newline='', encoding='utf-8') as fobj:\n                reader = csv.reader(fobj)\n                try:\n                    current_header = next(reader)\n                except StopIteration:\n                    current_header = []\n        else:\n            current_header = []\n        header_set = set(current_header)\n        for key in item:\n            if key not in header_set:\n                current_header.append(key)\n        if len(header_set) &lt; len(current_header):\n            with open(self.header_file_name, 'w', newline='', encoding='utf-8') as fobj:\n                writer = csv.writer(fobj)\n                writer.writerow(current_header)\n        item_data = [item.get(head, '') for head in current_header]\n        self.csv_body.writerow(item_data)\n        self.fbody.flush()  # allows peeing into the file\n\n\nif __name__ == '__main__':\n\n    data_ = [\n        {\n            'a': '1',\n            'b': '2',\n            'c': '3',\n        },\n        {\n            'a': '6',\n            'd': '1',\n            'b': '3',\n        },\n        {\n            'c': '2',\n            'e': '1',\n            'f': '9',\n        }\n    ]\n\n    def show_saved(file_names):\n        for name in file_names:\n            with open(name) as fobj:\n                print(name)\n                print(fobj.read())\n\n    header_file_name, body_file_name = 'header.csv', 'body.csv'\n    stream_writer = StreamCSV(header_file_name, body_file_name)\n\n    for x in range(1, 4):\n        print('step:', x)\n        stream_writer.add_item(data_.pop())\n        show_saved([header_file_name, body_file_name])\n</code></pre>\n\n<p>Output that shows the growth over time:</p>\n\n<pre><code>step: 1\nheader.csv\nc,e,f\n\nbody.csv\n2,1,9\n\nstep: 2\nheader.csv\nc,e,f,a,d,b\n\nbody.csv\n2,1,9\n,,,6,1,3\n\nstep: 3\nheader.csv\nc,e,f,a,d,b\n\nbody.csv\n2,1,9\n,,,6,1,3\n3,,,1,,2\n</code></pre>\n\n<h2>Merging final results</h2>\n\n<p>You might want to merge header and body in an additional step, adding such missing trailing commas. </p>\n\n<pre><code>def merge_header_body(header_file_name, body_file_name, out_file_name):\n    with open(header_file_name, 'r', newline='', encoding='utf-8') as fobj:\n        reader = csv.reader(fobj)\n        header = next(reader)\n\n    with open(out_file_name, 'w', newline='', encoding='utf-8') as fobj_out, \\\n    open(body_file_name, 'r', newline='', encoding='utf-8') as fobj_in:\n        reader = csv.reader(fobj_in)\n        writer = csv.writer(fobj_out)\n        writer.writerow(header)\n        target_length = len(header)\n        for row in reader:\n            diff = target_length - len(row)\n            row.extend([''] * diff)\n            writer.writerow(row)\n\nout_file_name = 'merged.csv'\nmerge_header_body(header_file_name, body_file_name, out_file_name)\n</code></pre>\n\n<p>Content of <code>merged.csv</code>:</p>\n\n<pre><code>c,e,f,a,d,b\n2,1,9,,,\n,,,6,1,3\n3,,,1,,2\n</code></pre>\n\n<h2>Crash Recovery</h2>\n\n<p>If the program crashes in between, it will resume.\nLet's take the same data as before and add more rows:</p>\n\n<pre><code>for x in range(1, 4):\n    print('step:', x)\n    stream_writer.add_item(data_.pop())\n    show_saved([header_file_name, body_file_name])\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>step: 1\nheader.csv\nc,e,f,a,d,b\n\nbody.csv\n2,1,9\n,,,6,1,3\n3,,,1,,2\n2,1,9,,,\n\nstep: 2\nheader.csv\nc,e,f,a,d,b\n\nbody.csv\n2,1,9\n,,,6,1,3\n3,,,1,,2\n2,1,9,,,\n,,,6,1,3\n\nstep: 3\nheader.csv\nc,e,f,a,d,b\n\nbody.csv\n2,1,9\n,,,6,1,3\n3,,,1,,2\n2,1,9,,,\n,,,6,1,3\n3,,,1,,2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 221, "user_id": 6468869, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P92hMO1J5Y4/AAAAAAAAAAI/AAAAAAAAAEk/MoKbjOZJX9k/photo.jpg?sz=128", "display_name": "dubusster", "link": "https://stackoverflow.com/users/6468869/dubusster"}, "is_accepted": false, "score": 2, "last_activity_date": 1514335959, "last_edit_date": 1514335959, "creation_date": 1514303910, "answer_id": 47980915, "question_id": 47914844, "link": "https://stackoverflow.com/questions/47914844/avoid-bulk-data-export-into-csv-when-the-header-is-dynamic/47980915#47980915", "title": "Avoid bulk data export into csv when the header is dynamic", "body": "<p><a href=\"https://stackoverflow.com/questions/47914844/avoid-bulk-data-export-into-csv-when-the-header-is-dynamic#comment82866063_47914844\">As it was said</a>, I would use a \"write-to-file\" per row(s) with flushing mechanisms system. If you don't mind using <a href=\"http://pandas.pydata.org/\" rel=\"nofollow noreferrer\">pandas</a>, the simplest way IMHO, would be to change your <code>main</code> function as following :</p>\n\n<pre><code>def main(data):\n    df = pd.DataFrame()\n    for item in data:\n        df_current = pd.DataFrame.from_dict(item, orient='index').T\n        df = df.append(df_current)\n        df.to_csv(RESULT_FILE, index=False)\n</code></pre>\n\n<p>This way you are updating your <code>RESULT_FILE</code> with a freshly updated <code>DataFrame</code> without having to know the complete header.</p>\n\n<p>For further performance enhancements, you can add a condition to write the file every <code>n</code> set of data :</p>\n\n<pre><code>def main(data):\n    df = pd.DataFrame()\n    chunksize = 5\n    for i, item in enumerate(data):\n        df_c = pd.DataFrame.from_dict(item, orient='index').T\n        df = df.append(df_c)\n        if ((i%chunksize)==0 or i==(len(data)-1)):\n            df.to_csv(RESULT_FILE, index=False)\n</code></pre>\n\n<p>As for the <a href=\"https://stackoverflow.com/questions/47914844/avoid-bulk-data-export-into-csv-when-the-header-is-dynamic#comment82866332_47914844\">memory issues</a>, I'd suggest you use <a href=\"https://stackoverflow.com/a/631619/6468869\">iterators over lists</a> for the initial scrapped <code>data</code> passed to this function to reduce memory consumption.</p>\n"}], "owner": {"reputation": 1054, "user_id": 3316077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/js6iY.png?s=128&g=1", "display_name": "Cajuu&#39;", "link": "https://stackoverflow.com/users/3316077/cajuu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 47951835, "answer_count": 4, "score": 4, "last_activity_date": 1514335959, "creation_date": 1513806585, "last_edit_date": 1514028141, "question_id": 47914844, "link": "https://stackoverflow.com/questions/47914844/avoid-bulk-data-export-into-csv-when-the-header-is-dynamic", "title": "Avoid bulk data export into csv when the header is dynamic", "body": "<p>I stumbled across a very simple situation which I cannot seem to find a solution for.</p>\n\n<p>What I want to do is simple: write some data into a <em>.csv</em> file containing:</p>\n\n<ul>\n<li>a <em>dynamic</em> header</li>\n<li>some data</li>\n</ul>\n\n<p>The way I'm doing it right now seems to be the only solution that I could come up with:</p>\n\n<ul>\n<li>store the data that I need in a list of dictionaries</li>\n<li>get the <code>keys()</code> of every dictionary in the above list and add them to a <code>set()</code> (this will be the header)</li>\n<li>write the data to the file using <code>writer.writerows(data)</code></li>\n</ul>\n\n<p>Basically, a simple <em>MCVE</em> might look like this:</p>\n\n<pre><code>from csv import DictWriter\n\nRESULT_FILE = 'test_result.csv'\n\n\ndef get_fieldnames(data):\n    fieldnames = set()\n    for item in data:\n        fieldnames.update(item.keys())\n    return fieldnames\n\n\ndef main(data):\n    fieldnames = get_fieldnames(data)\n\n    with open(RESULT_FILE, 'a', newline='', encoding='utf-8') as f:\n        writer = DictWriter(f, fieldnames=fieldnames, delimiter=',')\n        writer.writeheader()\n        writer.writerows(data)\n\n\nif __name__ == '__main__': \n    data_ = [\n        {\n            'a': '1',\n            'b': '2',\n            'c': '3',\n        },\n        {\n            'a': '6',\n            'd': '1',\n            'b': '3',\n        },\n        {\n            'c': '2',\n            'e': '1',\n            'f': '9',\n        }\n    ]\n    main(data_)\n</code></pre>\n\n<p>Now, what I don't like about this:</p>\n\n<ul>\n<li>The list might become extremely large (~100k dicts / each dict containing around 10 fields). </li>\n<li>If the program crashes when the 66666 dict is added to the list, everything is lost and I also don't have any data in the <em>csv</em>. Because I have to wait for all the data to be added to the list to get all the possible headers, I couldn't avoid this scenario.</li>\n</ul>\n\n<p>How can I avoid exporting all the data at once in the csv when the header is dynamic?</p>\n\n<hr>\n\n<p>As requested, the real data looks like this:</p>\n\n<pre><code>{'Catalog link': '',\n 'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n             'Accessories / Sander Accessories',\n 'Description': 'Exclusive single-piece hub design reduces pad vibration and '\n                'ensures smooth performance.',\n 'Each': '$ 24.70',\n 'Info': '',\n 'Line art': '',\n 'Name': '(5\") Non-Vacuum Disc Pad Vinyl-Face',\n 'Product number': '91456106T',\n 'Technical specifications': '',\n 'image_1': 'https://www.richelieu.com/documents/docsGr/120/107/6/1201076/1419675_700.jpg'}\n\n{'Catalog link': '',\n 'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n             'Accessories / Sander Accessories',\n 'Description': '',\n 'Each': '$ 8.19',\n 'Info': '&lt;p&gt;&lt;strong&gt;material: &lt;/strong&gt;Cork&lt;/p&gt;',\n 'Line art': '',\n 'Name': 'Replacement Plate for MKT9924DB Belt Sander',\n 'Product number': 'MKT4230358',\n 'Technical specifications': '&lt;p&gt;&lt;strong&gt;brand: &lt;/strong&gt;Makita&lt;/p&gt;',\n 'image_1': 'https://www.richelieu.com/documents/docsGr/116/631/4/1166314/1281513_700.jpg',\n '\\xa0': '$ 257.80'}\n\n{'Catalog link': '',\n 'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n             'Accessories / Sander Accessories',\n 'Description': '',\n 'Each': '$ 8.19',\n 'Info': '&lt;p&gt;&lt;strong&gt;material: &lt;/strong&gt;Graphite&lt;/p&gt;',\n 'Line art': '',\n 'Name': 'Replacement Plate for MKT9924DB Belt Sander',\n 'Product number': 'MKT4230366',\n 'Technical specifications': '&lt;p&gt;&lt;strong&gt;brand: &lt;/strong&gt;Makita&lt;/p&gt;',\n 'image_1': 'https://www.richelieu.com/documents/docsPr/MK/T4/23/03/66/MKT4230366/1281514_700.jpg',\n '\\xa0': '$ 257.80'}\n\n{'Catalog link': '',\n 'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n             'Accessories / Sander Accessories',\n 'Description': '- Exclusive single-piece hub design reduces pad vibration and '\n                'ensures smooth performance.',\n 'Each': '$ 38.47',\n 'Info': '',\n 'Line art': '',\n 'Name': 'Non-Grip Vacuum Pads',\n 'Product number': '9154325',\n 'Technical specifications': '&lt;p&gt;&lt;strong&gt;thickness: &lt;/strong&gt;3/8 '\n                             'in&lt;/p&gt;&lt;p&gt;&lt;strong&gt;density: '\n                             '&lt;/strong&gt;Medium&lt;/p&gt;&lt;p&gt;&lt;strong&gt;nap: '\n                             '&lt;/strong&gt;Short&lt;/p&gt;',\n 'image_1': 'https://www.richelieu.com/documents/docsPr/91/54/32/5/9154325/1213330_700.jpg',\n 'image_2': 'https://www.richelieu.com/documents/docsPr/91/54/32/5/9154325/1213331_700.jpg'}\n\n{'Catalog link': '',\n 'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n             'Accessories / Sander Accessories',\n 'Description': '- Exclusive single-piece hub design reduces pad vibration and '\n                'ensures smooth performance.',\n 'Each': '$ 52.92',\n 'Info': '',\n 'Line art': '',\n 'Name': 'Non-Grip Vacuum Pads',\n 'Product number': '9154327',\n 'Technical specifications': '&lt;p&gt;&lt;strong&gt;thickness: &lt;/strong&gt;3/8 '\n                             'in&lt;/p&gt;&lt;p&gt;&lt;strong&gt;density: '\n                             '&lt;/strong&gt;Medium&lt;/p&gt;&lt;p&gt;&lt;strong&gt;nap: '\n                             '&lt;/strong&gt;Short&lt;/p&gt;',\n 'image_1': 'https://www.richelieu.com/documents/docsGr/105/122/1/1051221/1213328_700.jpg',\n 'image_2': 'https://www.richelieu.com/documents/docsPr/91/54/32/7/9154327/1213332_700.jpg'}\n\n{'Catalog link': '',\n 'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n             'Accessories / Sander Accessories',\n 'Description': '- Unique one-piece hub design reduces pad vibration and '\n                'ensures smooth performance.',\n 'Each': '$ 26.84',\n 'Info': '',\n 'Line art': '',\n 'Name': 'Stick-on Non-Vacuum Pads',\n 'Product number': '9156106',\n 'Technical specifications': '&lt;p&gt;&lt;strong&gt;thickness: &lt;/strong&gt;3/8 '\n                             'in&lt;/p&gt;&lt;p&gt;&lt;strong&gt;density: &lt;/strong&gt;Medium&lt;/p&gt;',\n 'image_1': 'https://www.richelieu.com/documents/docsGr/105/122/4/1051224/1213343_700.jpg',\n 'image_2': 'https://www.richelieu.com/documents/docsPr/91/56/10/6/9156106/1213345_700.jpg'}\n\n{'Catalog link': '',\n 'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n             'Accessories / Sander Accessories',\n 'Description': '- Unique one-piece hub design reduces pad vibration and '\n                'ensures smooth performance.',\n 'Each': '$ 51.70',\n 'Info': '',\n 'Line art': '',\n 'Name': 'Stick-on Non-Vacuum Pads',\n 'Product number': '9156107',\n 'Technical specifications': '&lt;p&gt;&lt;strong&gt;thickness: &lt;/strong&gt;3/8 '\n                             'in&lt;/p&gt;&lt;p&gt;&lt;strong&gt;density: &lt;/strong&gt;Medium&lt;/p&gt;',\n 'image_1': 'https://www.richelieu.com/documents/docsPr/91/56/10/7/9156107/1213344_700.jpg',\n 'image_2': 'https://www.richelieu.com/documents/docsPr/91/56/10/7/9156107/1213346_700.jpg'}\n\n{'Catalog link': '',\n 'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n             'Accessories / Sander Accessories',\n 'Description': 'Size: 2-1/2\" x 14\".',\n 'Each': '$ 12.36',\n 'Info': '',\n 'Line art': '',\n 'Name': 'Sandpaper Belt 2\u00bd \" x 14\" for Compact Belt Sander PC371 or PC371K',\n 'Product number': 'PC371K060',\n 'Technical specifications': '',\n 'image_1': 'https://www.richelieu.com/documents/docsPr/PC/37/1K/06/0/PC371K060/1263523_700.jpg',\n '\\xa0': '$ 148.18'}\n\n{'Catalog link': '',\n 'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n             'Accessories / Sander Accessories',\n 'Description': 'Size: 2-1/2\" x 14\".',\n 'Each': '$ 12.36',\n 'Info': '',\n 'Line art': '',\n 'Name': 'Sandpaper Belt 2\u00bd \" x 14\" for Compact Belt Sander PC371 or PC371K',\n 'Product number': 'PC371K080',\n 'Technical specifications': '',\n 'image_1': 'https://www.richelieu.com/documents/docsPr/PC/37/1K/08/0/PC371K080/1263524_700.jpg',\n '\\xa0': '$ 148.18'}\n\n{'Catalog link': '',\n 'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n             'Accessories / Sander Accessories',\n 'Description': 'Size: 2-1/2\" x 14\".',\n 'Each': '$ 12.36',\n 'Info': '',\n 'Line art': '',\n 'Name': 'Sandpaper Belt 2\u00bd \" x 14\" for Compact Belt Sander PC371 or PC371K',\n 'Product number': 'PC371K120',\n 'Technical specifications': '',\n 'image_1': 'https://www.richelieu.com/documents/docsPr/PC/37/1K/12/0/PC371K120/1263526_700.jpg',\n '\\xa0': '$ 148.18'}\n\n{'Catalog link': '',\n 'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n             'Accessories / Sander Accessories',\n 'Description': 'Size: 2-1/2\" x 14\".',\n 'Each': '$ 12.36',\n 'Info': '',\n 'Line art': '',\n 'Name': 'Sandpaper Belt 2\u00bd \" x 14\" for Compact Belt Sander PC371 or PC371K',\n 'Product number': 'PC371K100',\n 'Technical specifications': '',\n 'image_1': 'https://www.richelieu.com/documents/docsPr/PC/37/1K/10/0/PC371K100/1263525_700.jpg',\n '\\xa0': '$ 148.18'}\n\n{'Catalog link': '',\n 'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n             'Accessories / Sander Accessories',\n 'Description': 'Exclusive single-piece hub design reduces pad vibration and '\n                'ensures smooth performance.',\n 'Each': '$ 25.22',\n 'Info': '',\n 'Line art': '',\n 'Name': '5\" Non-Vacuum Disc Pad Hook-Face',\n 'Product number': '91454325T',\n 'Technical specifications': '',\n 'image_1': 'https://www.richelieu.com/documents/docsGr/120/107/7/1201077/1419678_700.jpg'}\n\n{'Catalog link': '',\n 'Category': 'Tools and Shop Supplies / Workshop Accessories / Tool '\n             'Accessories / Sander Accessories',\n 'Description': '- Pads mount with screws.',\n 'Each': '$ 31.80',\n 'Info': '',\n 'Line art': '',\n 'Name': 'Plates for Non-Vacuum (Grip-On) Dynabug II Disc Pads - 7.62 cm x '\n         '10.79 cm (3\" x 4-1/4\")',\n 'Product number': '9156315',\n 'Technical specifications': '&lt;p&gt;&lt;strong&gt;thickness: &lt;/strong&gt;3/8 '\n                             'in&lt;/p&gt;&lt;p&gt;&lt;strong&gt;density: &lt;/strong&gt;Medium&lt;/p&gt;',\n 'image_1': 'https://www.richelieu.com/documents/docsGr/116/625/4/1166254/1280825_700.jpg',\n '\\xa0': '$ 179.95'}\n</code></pre>\n"}, {"tags": ["python", "date"], "answers": [{"comments": [{"owner": {"reputation": 479, "user_id": 9038804, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/x8PXe.png?s=128&g=1", "display_name": "Lycopersicum", "link": "https://stackoverflow.com/users/9038804/lycopersicum"}, "edited": false, "score": 0, "creation_date": 1513806570, "post_id": 47914793, "comment_id": 82797670, "body": "It doesn&#39;t seem like an answer to his question, I think he meant string conversion to another string which would be formatted little bit differently. Parsing of first string would still be part of the answer."}, {"owner": {"reputation": 109, "user_id": 8116441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e4c6a4b8a4bbe5d8c1b14583ebb6e2d?s=128&d=identicon&r=PG", "display_name": "clair3st", "link": "https://stackoverflow.com/users/8116441/clair3st"}, "reply_to_user": {"reputation": 479, "user_id": 9038804, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/x8PXe.png?s=128&g=1", "display_name": "Lycopersicum", "link": "https://stackoverflow.com/users/9038804/lycopersicum"}, "edited": false, "score": 0, "creation_date": 1513806693, "post_id": 47914793, "comment_id": 82797723, "body": "Oh I misunderstood. apologies"}], "tags": [], "owner": {"reputation": 109, "user_id": 8116441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e4c6a4b8a4bbe5d8c1b14583ebb6e2d?s=128&d=identicon&r=PG", "display_name": "clair3st", "link": "https://stackoverflow.com/users/8116441/clair3st"}, "is_accepted": false, "score": 0, "last_activity_date": 1513806336, "creation_date": 1513806336, "answer_id": 47914793, "question_id": 47914746, "link": "https://stackoverflow.com/questions/47914746/convert-specific-timestring-to-normal-time/47914793#47914793", "title": "Convert specific timestring to normal time?", "body": "<p>See the answer to this question:\n <a href=\"https://stackoverflow.com/questions/311627/how-to-print-date-in-a-regular-format-in-python\">How to print date in a regular format in Python?</a></p>\n\n<p>It's a very comprehensive answer with links to the documentations</p>\n"}, {"tags": [], "owner": {"reputation": 721, "user_id": 5666203, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fo0sw.jpg?s=128&g=1", "display_name": "AaronJPung", "link": "https://stackoverflow.com/users/5666203/aaronjpung"}, "is_accepted": false, "score": 0, "last_activity_date": 1513806582, "creation_date": 1513806582, "answer_id": 47914843, "question_id": 47914746, "link": "https://stackoverflow.com/questions/47914746/convert-specific-timestring-to-normal-time/47914843#47914843", "title": "Convert specific timestring to normal time?", "body": "<p>If it's the same string each time, you could use something like this:</p>\n\n<pre><code>time_string = '2017-12-22T05:00:00+01:00'\nyear = time_string.split('-')[0]\nmonth = time_string.split('-')[1]\nday = time_string.split('-')[2].split('T')[0]\ntime = time_string.split('T')[1].split(':')\nhour = time[0]\nminute = time[1]\nsecond = time[2].split('+')[0]\nprint(second,minute,hour,day,month,year)\n</code></pre>\n\n<p>(but there's probably a much better way to do it.)</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 9124637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6gVAg.jpg?s=128&g=1", "display_name": "shawnfunke", "link": "https://stackoverflow.com/users/9124637/shawnfunke"}, "edited": false, "score": 0, "creation_date": 1513808338, "post_id": 47915013, "comment_id": 82798402, "body": "Thanks for the fast help! This is what i needed."}], "tags": [], "owner": {"reputation": 74709, "user_id": 21945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631470ecb1d4fe8bd3be6d7e0dfe4449?s=128&d=identicon&r=PG", "display_name": "mhawke", "link": "https://stackoverflow.com/users/21945/mhawke"}, "is_accepted": true, "score": 1, "last_activity_date": 1513807897, "last_edit_date": 1513807897, "creation_date": 1513807504, "answer_id": 47915013, "question_id": 47914746, "link": "https://stackoverflow.com/questions/47914746/convert-specific-timestring-to-normal-time/47915013#47915013", "title": "Convert specific timestring to normal time?", "body": "<p>First you need to parse the input datetime string into a <code>datetime</code> object. Then convert the <code>datetime</code> object to the required format. The easiest way to do that is with the third-party <a href=\"https://dateutil.readthedocs.io/\" rel=\"nofollow noreferrer\"><code>dateutil</code></a> package. You can install it with <code>pip</code>.</p>\n\n<pre><code>&gt;&gt;&gt; from dateutil.parser import parse\n&gt;&gt;&gt; dt = parse('2017-12-22T05:00:00+01:00')\n&gt;&gt;&gt; dt\ndatetime.datetime(2017, 12, 22, 5, 0, tzinfo=tzoffset(None, 3600))\n</code></pre>\n\n<p>Converting to a new format can be done with <a href=\"https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior\" rel=\"nofollow noreferrer\"><code>datetime.strftime()</code></a>:</p>\n\n<pre><code>&gt;&gt;&gt; dt.strftime('%Y-%m-%d %H:%M:%S')\n'2017-12-22 05:00:00'\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 9124637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6gVAg.jpg?s=128&g=1", "display_name": "shawnfunke", "link": "https://stackoverflow.com/users/9124637/shawnfunke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 47915013, "answer_count": 3, "score": 0, "last_activity_date": 1513807897, "creation_date": 1513806053, "last_edit_date": 1513806454, "question_id": 47914746, "link": "https://stackoverflow.com/questions/47914746/convert-specific-timestring-to-normal-time", "title": "Convert specific timestring to normal time?", "body": "<p>I'm currently working on a small project, but I got a problem, I don't know how to convert this <code>\"2017-12-22T05:00:00+01:00</code>\" time, to an readable time, I would like to get it to this format <code>\"%Y-%m-%d %H:%M:%S\"</code>. Without success so far, is there something I can do to archive this?</p>\n"}, {"tags": ["python", "python-3.x", "web-scraping"], "comments": [{"owner": {"reputation": 898, "user_id": 1291371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PSSYX.jpg?s=128&g=1", "display_name": "Ilya Zub", "link": "https://stackoverflow.com/users/1291371/ilya-zub"}, "edited": false, "score": 0, "creation_date": 1611565718, "post_id": 47914696, "comment_id": 116482949, "body": "Use proxies to avoid being blocked."}], "answers": [{"tags": [], "owner": {"reputation": 810, "user_id": 8702611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lFYip.png?s=128&g=1", "display_name": "NatKSS", "link": "https://stackoverflow.com/users/8702611/natkss"}, "is_accepted": false, "score": 0, "last_activity_date": 1516177764, "creation_date": 1516177764, "answer_id": 48296635, "question_id": 47914696, "link": "https://stackoverflow.com/questions/47914696/can-i-scrape-all-url-results-using-python-from-a-google-search-without-getting-b/48296635#48296635", "title": "Can I scrape all URL results using Python from a google search without getting blocked?", "body": "<p>It seems that this package uses screen scraping to retrieve search results from google, so it doesn't play well with Google's Terms of Service which could be the reason why you've been blocked.</p>\n\n<p>The relevant clause in <a href=\"https://www.google.com/intl/en/policies/terms/\" rel=\"nofollow noreferrer\">Google's Terms of Service</a>:</p>\n\n<blockquote>\n  <p>Don\u2019t misuse our Services. For example, don\u2019t interfere with our Services or try to access them using a method other than the interface and the instructions that we provide. You may use our Services only as permitted by law, including applicable export and re-export control laws and regulations. We may suspend or stop providing our Services to you if you do not comply with our terms or policies or if we are investigating suspected misconduct.</p>\n</blockquote>\n\n<p>I haven't been able to find a definite number, but it seems like their limit for the number of search queries a day is rather strict too - at 100 search queries / day on their JSON Custom Search API documentation <a href=\"https://developers.google.com/custom-search/json-api/v1/overview\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Nonetheless, there's no harm trying out <strong>other alternatives</strong> to see if they work better:</p>\n\n<ol>\n<li><a href=\"https://pypi.python.org/pypi/beautifulsoup4\" rel=\"nofollow noreferrer\">BeautifulSoup</a> </li>\n<li><a href=\"https://scrapy.org/\" rel=\"nofollow noreferrer\">Scrapy</a> </li>\n<li><a href=\"https://www.parsehub.com/\" rel=\"nofollow noreferrer\">ParseHub</a> - this one is not in code, but is a useful piece of software with good documentation. Link to their tutorial on <a href=\"https://help.parsehub.com/hc/en-us/articles/235063768-Google-sheet-as-a-list-of-URLs-to-crawl\" rel=\"nofollow noreferrer\">how to scrape a list of URLs</a>. </li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 9124592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95cbcbc883c1accefd0fed0fa1521b55?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Kinder", "link": "https://stackoverflow.com/users/9124592/jordan-kinder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 533, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1516178028, "creation_date": 1513805758, "last_edit_date": 1516178028, "question_id": 47914696, "link": "https://stackoverflow.com/questions/47914696/can-i-scrape-all-url-results-using-python-from-a-google-search-without-getting-b", "title": "Can I scrape all URL results using Python from a google search without getting blocked?", "body": "<p>I realize that versions of this question have been asked and I spent several hours the other day trying a number of strategies.</p>\n\n<p>What I would like to is use python to scrape all of the URLs from a google search that I can use in a separate script to do text analysis of a large corpus (news sites mainly). This seems relatively straightforward, but none of the attempts I've tried have worked properly. </p>\n\n<p>This is as close as I got:</p>\n\n<pre><code>from google import search\n\nfor url in search('site:cbc.ca \"kinder morgan\" and \"trans mountain\" and protest*', stop=100):\n    print(url)\n</code></pre>\n\n<p>This returned about 300 URLs before I got kicked. An actual search using these parameters provides about 1000 results and I'd like all of them.</p>\n\n<p>First: is this possible? Second: does anyone have any suggestions to do this? I basically just want a txt file of all the URLs that I can use in another script.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2147, "user_id": 600775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5HgY2.jpg?s=128&g=1", "display_name": "Maciej", "link": "https://stackoverflow.com/users/600775/maciej"}, "edited": false, "score": 1, "creation_date": 1513805887, "post_id": 47914679, "comment_id": 82797420, "body": "Welcome to stackoverflow! You are much more likely to get assistance from the community if you provide a snippet of code that you wrote attempting to solve the problem."}, {"owner": {"reputation": 953, "user_id": 8272888, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bRUzh.jpg?s=128&g=1", "display_name": "sam-pyt", "link": "https://stackoverflow.com/users/8272888/sam-pyt"}, "edited": false, "score": 0, "creation_date": 1513806066, "post_id": 47914679, "comment_id": 82797495, "body": "what do you mean by &quot;keep the tuple with most recent date&quot;? keep it where?"}, {"owner": {"reputation": 16137, "user_id": 2026508, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d76e464967fe7ab0b42754ae5401d3ba?s=128&d=identicon&r=PG&f=1", "display_name": "jmunsch", "link": "https://stackoverflow.com/users/2026508/jmunsch"}, "edited": false, "score": 0, "creation_date": 1513806070, "post_id": 47914679, "comment_id": 82797499, "body": "this might be closely related : <a href=\"https://stackoverflow.com/questions/3922644/find-oldest-youngest-datetime-object-in-a-list#3922675\" title=\"find oldest youngest datetime object in a list%233922675\">stackoverflow.com/questions/3922644/&hellip;</a>"}, {"owner": {"reputation": 63, "user_id": 9124233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50b8bf5b523eb533955be1867af43e62?s=128&d=identicon&r=PG&f=1", "display_name": "mfn", "link": "https://stackoverflow.com/users/9124233/mfn"}, "reply_to_user": {"reputation": 953, "user_id": 8272888, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bRUzh.jpg?s=128&g=1", "display_name": "sam-pyt", "link": "https://stackoverflow.com/users/8272888/sam-pyt"}, "edited": false, "score": 0, "creation_date": 1513806562, "post_id": 47914679, "comment_id": 82797665, "body": "@sam-pyt I want to put the tuples into a new list - sorry for not being clear, I will edit my question to make it clearer."}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1513807313, "post_id": 47914679, "comment_id": 82797971, "body": "mfn, are your <code>id</code>s small numbers or can they be anything?"}, {"owner": {"reputation": 63, "user_id": 9124233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50b8bf5b523eb533955be1867af43e62?s=128&d=identicon&r=PG&f=1", "display_name": "mfn", "link": "https://stackoverflow.com/users/9124233/mfn"}, "reply_to_user": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1513807818, "post_id": 47914679, "comment_id": 82798197, "body": "@PaulPanzer the id&#39;s are always integers, up to 9 digits long"}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1513807875, "post_id": 47914679, "comment_id": 82798210, "body": "That&#39;s a teeny bit too large for what I had in mind :("}], "answers": [{"comments": [{"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 0, "creation_date": 1513806719, "post_id": 47914778, "comment_id": 82797737, "body": "The date is not always in position <code>[5]</code>. Feel free to use my <code>getdate</code> function to combine it with your dict approach if you like."}, {"owner": {"reputation": 3004, "user_id": 6451244, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-YX-fKMoU-ps/AAAAAAAAAAI/AAAAAAAAACE/qDO4Xj_LSFk/photo.jpg?sz=128", "display_name": "Jonathan DEKHTIAR", "link": "https://stackoverflow.com/users/6451244/jonathan-dekhtiar"}, "reply_to_user": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 0, "creation_date": 1513949253, "post_id": 47914778, "comment_id": 82854077, "body": "I am not planning to do the job for you. I just wan to give you the necessary knowledge or a feasible approach to answer your need."}], "tags": [], "owner": {"reputation": 3004, "user_id": 6451244, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-YX-fKMoU-ps/AAAAAAAAAAI/AAAAAAAAACE/qDO4Xj_LSFk/photo.jpg?sz=128", "display_name": "Jonathan DEKHTIAR", "link": "https://stackoverflow.com/users/6451244/jonathan-dekhtiar"}, "is_accepted": false, "score": 0, "last_activity_date": 1513806235, "creation_date": 1513806235, "answer_id": 47914778, "question_id": 47914679, "link": "https://stackoverflow.com/questions/47914679/how-to-return-a-list-of-tuples-with-unique-elements-based-on-maximum-values/47914778#47914778", "title": "How to return a list of tuples with unique elements based on maximum values?", "body": "<p>Up to me, you need to write custom code. There is no builtin function in python to do what you want to achieve.</p>\n\n<p>You can use classical python code or more data oriented libraries such as Pandas.</p>\n\n<p>The main idea is this one</p>\n\n<pre><code>result = dict()\n\nfor item in a:\n  if item[0] not in result:\n     result[item[0]] = ...\n  else:\n     if result[item[0]][5] &lt; item[5]:\n        result[item[0]] = ...\n</code></pre>\n\n<p>I don't do the details, this is just the global and generic idea.</p>\n"}, {"tags": [], "owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "is_accepted": true, "score": 4, "last_activity_date": 1513809071, "last_edit_date": 1513809071, "creation_date": 1513806499, "answer_id": 47914823, "question_id": 47914679, "link": "https://stackoverflow.com/questions/47914679/how-to-return-a-list-of-tuples-with-unique-elements-based-on-maximum-values/47914823#47914823", "title": "How to return a list of tuples with unique elements based on maximum values?", "body": "<p>First, you could define a function to get the <code>datetime</code> from the tuples, regardless of its position.\nThen you could sort the list in reverse by id and datetime, group by ID, get the next entry, and sort again (so it's sorted by ID).</p>\n\n<pre><code>&gt;&gt;&gt; getdate = lambda t: next(x for x in t if isinstance(x, datetime.datetime))\n&gt;&gt;&gt; sorted(next(g) for k, g in itertools.groupby(sorted(a, key=lambda t: (t[0], getdate(t)), reverse=True), key=lambda t: t[0]))\n[(1, 'N', None, None, 'Y', datetime.datetime(2017, 9, 17, 0, 0)),\n (2, 'Y', 'ox', datetime.datetime(2017, 9, 4, 0, 0), 'N', None),\n (3, 'Y', 'tiger', datetime.datetime(2013, 1, 18, 0, 0), 'N', None),\n (4, 'N', None, None, 'Y', datetime.datetime(2017, 10, 3, 0, 0))]\n</code></pre>\n\n<p>Or a bit shorter, sorting just once by ID and then getting the <code>max</code> by date; same result:</p>\n\n<pre><code>&gt;&gt;&gt; [max(g, key=getdate) for k, g in itertools.groupby(sorted(a), key=lambda t: t[0])]\n</code></pre>\n\n<p>Of course, the same would also be possible (and faster) with a simple loop and a dictionary...</p>\n\n<pre><code>d = dict()\nfor t in a:\n    if t[0] not in d or getdate(d[t[0]]) &lt; getdate(t):\n        d[t[0]] = t\n</code></pre>\n\n<p>...but hey, nothing beats an overcomplicated one-liner!</p>\n"}, {"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 0, "last_activity_date": 1513808721, "last_edit_date": 1513808721, "creation_date": 1513806849, "answer_id": 47914892, "question_id": 47914679, "link": "https://stackoverflow.com/questions/47914679/how-to-return-a-list-of-tuples-with-unique-elements-based-on-maximum-values/47914892#47914892", "title": "How to return a list of tuples with unique elements based on maximum values?", "body": "<p>You can try this:</p>\n\n<pre><code>import datetime\nimport itertools\na = [(1,'Y', 'rat', datetime.datetime(2016, 12, 12, 0, 0), 'N', None),\n (2,'Y', 'ox', datetime.datetime(2017, 9, 4, 0, 0), 'N', None),\n (1,'N', None, None, 'Y', datetime.datetime(2017, 9, 17, 0, 0)),\n (2,'N', None, None, 'Y', datetime.datetime(2017, 3, 16, 0, 0)),\n (3,'Y', 'tiger', datetime.datetime(2013, 1, 18, 0, 0), 'N', None),\n (4,'N', None, None, 'Y', datetime.datetime(2017, 10, 3, 0, 0))]\nnew_s = [d for c, d in [(a, sorted(list(b), key=lambda x:[h for h in x if type(h) == type(datetime.datetime(2017, 9, 17, 0, 0))][0], reverse=True)[0]) for a, b in itertools.groupby(sorted(a, key=lambda x:x[0]), key=lambda x:x[0])]]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[(1, 'N', None, None, 'Y', datetime.datetime(2017, 9, 17, 0, 0)), (2, 'Y', 'ox', datetime.datetime(2017, 9, 4, 0, 0), 'N', None), (3, 'Y', 'tiger', datetime.datetime(2013, 1, 18, 0, 0), 'N', None), (4, 'N', None, None, 'Y', datetime.datetime(2017, 10, 3, 0, 0))]\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 9124233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50b8bf5b523eb533955be1867af43e62?s=128&d=identicon&r=PG&f=1", "display_name": "mfn", "link": "https://stackoverflow.com/users/9124233/mfn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "accepted_answer_id": 47914823, "answer_count": 3, "score": 2, "last_activity_date": 1513809071, "creation_date": 1513805670, "last_edit_date": 1513806915, "question_id": 47914679, "link": "https://stackoverflow.com/questions/47914679/how-to-return-a-list-of-tuples-with-unique-elements-based-on-maximum-values", "title": "How to return a list of tuples with unique elements based on maximum values?", "body": "<p>I want to return a list of tuples with unique ID's but specifically keep the tuple with the most recent date.</p>\n\n<p>The unique ID is in the first element of each tuple (i.e. 1,2,3,4).</p>\n\n<p>The dates exist in more than one element of each tuple (3rd element &amp; 6th element of tuple).</p>\n\n<pre><code>a = [(1,'Y', 'rat', datetime.datetime(2016, 12, 12, 0, 0), 'N', None),\n(2,'Y', 'ox', datetime.datetime(2017, 9, 4, 0, 0), 'N', None),\n(1,'N', None, None, 'Y', datetime.datetime(2017, 9, 17, 0, 0)),\n(2,'N', None, None, 'Y', datetime.datetime(2017, 3, 16, 0, 0)),\n(3,'Y', 'tiger', datetime.datetime(2013, 1, 18, 0, 0), 'N', None),\n(4,'N', None, None, 'Y', datetime.datetime(2017, 10, 3, 0, 0))]\n</code></pre>\n\n<p>The output I am expecting is:</p>\n\n<pre><code>b = [(1,'N', None, None, 'Y', datetime.datetime(2017, 9, 17, 0, 0)),\n(2,'Y', 'ox', datetime.datetime(2017, 9, 4, 0, 0), 'N', None),\n(3,'Y', 'tiger', datetime.datetime(2013, 1, 18, 0, 0), 'N', None),\n(4,'N', None, None, 'Y', datetime.datetime(2017, 10, 3, 0, 0))]\n</code></pre>\n\n<p>I've put the tuples into a dictionary and sorted using groupby.</p>\n\n<pre><code>from itertools import groupby\ndict={}\nf = lambda x: x[0]\nfor key, group in groupby(sorted(a, key=f),f):\n    dict[key] = list(group)\n</code></pre>\n\n<p>This is the dictionary output:</p>\n\n<pre><code>{1: [(1, 'Y', 'rat', datetime.datetime(2016, 12, 12, 0, 0), 'N', None), \n(1, 'N', None, None, 'Y', datetime.datetime(2017, 9, 17, 0, 0))], \n2: [(2, 'Y', 'ox', datetime.datetime(2017, 9, 4, 0, 0), 'N', None), \n(2, 'N', None, None, 'Y', datetime.datetime(2017, 3, 16, 0, 0))], \n3: [(3, 'Y', 'tiger', datetime.datetime(2013, 1, 18, 0, 0), 'N', None)], \n4: [(4, 'N', None, None, 'Y', datetime.datetime(2017, 10, 3, 0, 0))]}\n</code></pre>\n\n<p>From this step I am having trouble extracting the dictionary values that I want into a new list.</p>\n\n<p>Thanks for your help in advance!</p>\n"}, {"tags": ["python", "python-3.x", "gzip"], "comments": [{"owner": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "edited": false, "score": 1, "creation_date": 1513806751, "post_id": 47914622, "comment_id": 82797753, "body": "<a href=\"https://docs.python.org/3/library/gzip.html#gzip.open\" rel=\"nofollow noreferrer\"><code>gzip.open</code></a> takes a filename. Also, IA_FIRM_SEC_Feed_12_20_2017.xml.gz from that link does not appear to be a valid gzip archive. It has HTML appended."}, {"owner": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "edited": false, "score": 0, "creation_date": 1513807121, "post_id": 47914622, "comment_id": 82797899, "body": "You could use <a href=\"https://docs.python.org/3/library/gzip.html#gzip.decompress\" rel=\"nofollow noreferrer\">gzip.decompress</a>. Note my comment about the appended HTML, though. <code>gzip.decompress(request.content[:request.content.find(b&quot;\\r\\n&zwnj;&#8203;\\r\\n&lt;!DOCTYPE html&gt;&quot;) - 1])</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "is_accepted": true, "score": 4, "last_activity_date": 1513807319, "creation_date": 1513807319, "answer_id": 47914983, "question_id": 47914622, "link": "https://stackoverflow.com/questions/47914622/extract-file-from-gzip-folder/47914983#47914983", "title": "Extract file from gzip folder", "body": "<p><a href=\"https://docs.python.org/3/library/gzip.html#gzip.open\" rel=\"nofollow noreferrer\">gzip.open</a> takes a filename, not compressed data. You could use <a href=\"https://docs.python.org/3/library/gzip.html#gzip.decompress\" rel=\"nofollow noreferrer\">gzip.decompress</a>.</p>\n\n<p>The archive from your question looks malformed. Specifically, it has HTML appended for some reason.</p>\n\n<p>The following works by only using the content before the beginning of the HTML:</p>\n\n<pre><code>import requests\nimport gzip\n\nrequest = requests.get(r'https://www.adviserinfo.sec.gov/IAPD/Content/BulkFeed/CompilationDownload.aspx?FeedPK=39545&amp;FeedType=IA_FIRM_SEC')\n\nxml = gzip.decompress(request.content[:request.content.find(b\"\\r\\n\\r\\n&lt;!DOCTYPE html&gt;\") - 1])\n</code></pre>\n"}], "owner": {"reputation": 2423, "user_id": 4043845, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/75de73b9f9301869e5136edf9b663a9b?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/4043845/kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 479, "favorite_count": 1, "accepted_answer_id": 47914983, "answer_count": 1, "score": 0, "last_activity_date": 1513807319, "creation_date": 1513805388, "last_edit_date": 1513806581, "question_id": 47914622, "link": "https://stackoverflow.com/questions/47914622/extract-file-from-gzip-folder", "title": "Extract file from gzip folder", "body": "<p>I am trying extract the XML file from the gzip that comes out of clicking the button \"SEC Investment Adviser Report\" at the website <a href=\"https://www.adviserinfo.sec.gov/IAPD/InvestmentAdviserData.aspx\" rel=\"nofollow noreferrer\">here</a> (FYI, this links to the SEC website). Below is my (minimal) code. I continue to get \"embedded null character\" or \"embedded null byte\", depending on whether I feed <code>gzip.open()</code> <code>.text</code> or <code>.content</code> from my request. Can anyone help me get this file loaded so I can access the XML?</p>\n\n<pre><code>import requests\nimport gzip\n\nfile = gzip.open(requests.get(r'https://www.adviserinfo.sec.gov/IAPD/Content/BulkFeed/CompilationDownload.aspx?FeedPK=39545&amp;FeedType=IA_FIRM_SEC').text,'rt')\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "dictionary"], "comments": [{"owner": {"reputation": 18362, "user_id": 1767754, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/00ba1fd17dc5970a0096cc4d7a932536?s=128&d=identicon&r=PG", "display_name": "user1767754", "link": "https://stackoverflow.com/users/1767754/user1767754"}, "edited": false, "score": 0, "creation_date": 1513805518, "post_id": 47914610, "comment_id": 82797273, "body": "How often are you hitting <code>else</code>?"}, {"owner": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "reply_to_user": {"reputation": 18362, "user_id": 1767754, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/00ba1fd17dc5970a0096cc4d7a932536?s=128&d=identicon&r=PG", "display_name": "user1767754", "link": "https://stackoverflow.com/users/1767754/user1767754"}, "edited": false, "score": 1, "creation_date": 1513805556, "post_id": 47914610, "comment_id": 82797289, "body": "&quot;Given a dict <code>d</code> that does not contain the key <code>k</code>&quot;, so every time"}, {"owner": {"reputation": 55248, "user_id": 2705542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc22708f70324dcbfe34f247637ca01?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Peters", "link": "https://stackoverflow.com/users/2705542/tim-peters"}, "edited": false, "score": 5, "creation_date": 1513805705, "post_id": 47914610, "comment_id": 82797350, "body": "Given that the key is never in the dict in your test, the <code>d[k]</code> part of your ternary expression is never executed.  So only one lookup is done in either case.  The rest is that there <i>is</i> another dict lookup in <code>d.get()</code>:  the attribute &quot;get&quot; has to be looked up in the dict containing <code>d</code>&#39;s methods."}, {"owner": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "edited": false, "score": 0, "creation_date": 1513805803, "post_id": 47914610, "comment_id": 82797385, "body": "Ah! that&#39;s a good point. I imagine that <code>get</code> would be faster if the item WAS present. Lets try that"}, {"owner": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "edited": false, "score": 1, "creation_date": 1513805824, "post_id": 47914610, "comment_id": 82797395, "body": "Set <code>m = d.get</code> and change the body of function to <code>m(k, &#39;foo&#39;)</code>, you&#39;ll see a big difference"}, {"owner": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "edited": false, "score": 1, "creation_date": 1513805967, "post_id": 47914610, "comment_id": 82797451, "body": "ok, interesting result: both setting <code>m=d.get</code> AND running with the item present both still have ternary outperforming <code>get</code>"}], "answers": [{"comments": [{"owner": {"reputation": 22012, "user_id": 194586, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1a71658d81f8a82a8122050f21bb86d3?s=128&d=identicon&r=PG", "display_name": "Nick T", "link": "https://stackoverflow.com/users/194586/nick-t"}, "edited": false, "score": 0, "creation_date": 1513809326, "post_id": 47914937, "comment_id": 82798700, "body": "If the object&#39;s <code>__contains__</code> wasn&#39;t implemented in C (I&#39;m guessing dict&#39;s is?) would the <code>COMPARE_OP...</code> be similar in cost?"}], "tags": [], "owner": {"reputation": 18362, "user_id": 1767754, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/00ba1fd17dc5970a0096cc4d7a932536?s=128&d=identicon&r=PG", "display_name": "user1767754", "link": "https://stackoverflow.com/users/1767754/user1767754"}, "is_accepted": false, "score": 3, "last_activity_date": 1513808893, "last_edit_date": 1513808893, "creation_date": 1513807118, "answer_id": 47914937, "question_id": 47914610, "link": "https://stackoverflow.com/questions/47914610/why-is-the-ternary-operator-faster-then-get-for-dicts/47914937#47914937", "title": "Why is the ternary operator faster then .get for dicts?", "body": "<p>If you disassemble the two methods, you will see that <code>get</code> has an extra <code>CALL_FUNCTION</code> which is expensive in python, compared to a <code>POP_JUMP_IF_FALSE</code> instruction.</p>\n\n<p><strong>if in</strong></p>\n\n<pre><code>  3           0 LOAD_CONST               1 ('blub')\n              3 LOAD_GLOBAL              0 (d)\n              6 COMPARE_OP               6 (in)\n              9 POP_JUMP_IF_FALSE       22\n             12 LOAD_GLOBAL              0 (d)\n             15 LOAD_CONST               1 ('blub')\n             18 BINARY_SUBSCR       \n             19 JUMP_FORWARD             3 (to 25)\n        &gt;&gt;   22 LOAD_CONST               2 ('foo')\n        &gt;&gt;   25 POP_TOP             \n             26 LOAD_CONST               0 (None)\n             29 RETURN_VALUE        \n</code></pre>\n\n<p><strong>Get Method:</strong></p>\n\n<pre><code>  6           0 LOAD_GLOBAL              0 (d)\n              3 LOAD_ATTR                1 (get)\n              6 LOAD_CONST               1 ('blub')\n              9 LOAD_CONST               2 ('foo')\n             12 CALL_FUNCTION            2          #Expensive call\n             15 POP_TOP             \n             16 LOAD_CONST               0 (None)\n             19 RETURN_VALUE        \n</code></pre>\n\n<p>There is a very long article I've read a while ago, which has a section that describes why <code>CALL_FUNCTION</code> is so expensive:\n<a href=\"https://doughellmann.com/blog/2012/11/12/the-performance-impact-of-using-dict-instead-of-in-cpython-2-7-2/\" rel=\"nofollow noreferrer\">https://doughellmann.com/blog/2012/11/12/the-performance-impact-of-using-dict-instead-of-in-cpython-2-7-2/</a></p>\n"}], "owner": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 2, "answer_count": 1, "score": 5, "last_activity_date": 1513808893, "creation_date": 1513805325, "question_id": 47914610, "link": "https://stackoverflow.com/questions/47914610/why-is-the-ternary-operator-faster-then-get-for-dicts", "title": "Why is the ternary operator faster then .get for dicts?", "body": "<p>I discovered something surprising recently. Given a dict <code>d</code> that does not contain the key <code>k</code>, using the ternary operator to attempt to retrieve an item with a default return:</p>\n\n<pre><code>&gt;&gt;&gt; def tern():\n...     d[k] if k in d else 'foo'\n...\n&gt;&gt;&gt; timeit.timeit(tern, number=1000000)\n0.12342095375061035\n</code></pre>\n\n<p>runs faster than the dict's <code>.get()</code> function:</p>\n\n<pre><code>&gt;&gt;&gt; def get_meth():\n...     d.get(k, 'foo')\n...\n&gt;&gt;&gt; timeit.timeit(get_meth, number=1000000)\n0.20549297332763672\n</code></pre>\n\n<p>This seems counter-intuitive to me. I would think that the ternary operator would require 2 searches through the dict (once to test <code>k in d</code>), then another to retrieve <code>d[k]</code>, while <code>.get</code> would simply attempt to retrieve <code>d[k]</code>, and if it fails, return <code>'foo'</code>.</p>\n\n<p>I ran this on both a large dict (one million elements) and a small one (100), and both times, ternary was significantly faster.  What's going on behind the scenes here?</p>\n"}, {"tags": ["python", "arrays", "list", "dictionary"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1513808074, "post_id": 47914515, "comment_id": 82798293, "body": "What does the <code>assemble()</code> function have to do with this problem?"}], "answers": [{"comments": [{"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 0, "creation_date": 1513807891, "post_id": 47914618, "comment_id": 82798220, "body": "IMHO both ways are not optimal, as the function is called or the list is copied even if the value <i>is</i> in the dict. Better not use <code>setdefault</code> but a simple <code>if</code> instead."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1513806898, "last_edit_date": 1513806898, "creation_date": 1513805356, "answer_id": 47914618, "question_id": 47914515, "link": "https://stackoverflow.com/questions/47914515/setdefault-with-list-filled-by-function/47914618#47914618", "title": ".setdefault with list filled by function", "body": "<p>You're not making a copy of the <code>foundwords</code> list when you use <code>.setdefault()</code>, so all the dictionary elements refer to the same list. Then you remove all the elements of that list with <code>del foundwords[:]</code>, so they all refer to that empty list.</p>\n\n<p>Make a copy of the list when you add it to the dictionary. </p>\n\n<pre><code>for word in words:\n    findwords(word)\n    wordsDict.setdefault(word, foundwords[:])\n    del foundwords[:]\n</code></pre>\n\n<p>Better would be to change <code>findwords()</code> so it returns a new list instead of writing into a global variable.</p>\n\n<pre><code>def findwords(word):\n    foundwords = []\n    for i in range(len(words) - 1):\n        if words[i] == word:\n            if not words[i + 1] == '':\n                foundwords.append(words[i + 1])\n    return foundwords\n\nfor words in words:\n    wordsDict.setdefault(word, findwords(word))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8007735, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-q8oTV_FWa6g/AAAAAAAAAAI/AAAAAAAAAMQ/TpbPeasyjhE/photo.jpg?sz=128", "display_name": "Hatch Gawd 8-------", "link": "https://stackoverflow.com/users/8007735/hatch-gawd-8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513806898, "creation_date": 1513804829, "question_id": 47914515, "link": "https://stackoverflow.com/questions/47914515/setdefault-with-list-filled-by-function", "title": ".setdefault with list filled by function", "body": "<p>How do I use .setdefault with the default being a list that i filled in a function? For example, </p>\n\n<pre><code>import random\nfoundwords = []\n\nwith open(\"text\", \"r\") as file:\n    contents = file.read().replace('\\n',' ')\nwords = contents.split(' ')\n\ndef findwords(word):\n    for i in range(len(words) - 1):\n        if words[i] == word:\n            if not words[i + 1] == '':\n                foundwords.append(words[i + 1])\n\nwordsDict = {}\nfor i in range(len(words) - 1):\n    findwords(words[i])\n    wordsDict.setdefault(words[i], foundwords)\n    del foundwords[:]\n\ndef assemble():\n    start = words[random.randint(0, len(words))]\n    print(start.capitalize())\n\n\n\nassemble()\n</code></pre>\n\n<p>When I check wordsDict, all lists are empty. However, I know that the lists <em>are</em> filled.</p>\n"}, {"tags": ["python", "python-3.x", "canvas", "tkinter"], "comments": [{"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 1, "creation_date": 1513805225, "post_id": 47914501, "comment_id": 82797127, "body": "You didn&#39;t layout several widgets. You need to add <code>self.pack()</code>, <code>self.canvas.pack()</code>, and <code>frame1.pack()</code> to your <code>__init__</code> method."}, {"owner": {"reputation": 11, "user_id": 9124553, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-peX_nuimkoE/AAAAAAAAAAI/AAAAAAAAAE0/T0ge4Rvgq8I/photo.jpg?sz=128", "display_name": "MrShroom - One Commands194744", "link": "https://stackoverflow.com/users/9124553/mrshroom-one-commands194744"}, "reply_to_user": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1513805699, "post_id": 47914501, "comment_id": 82797349, "body": "where do I put self.pack()"}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1513805812, "post_id": 47914501, "comment_id": 82797388, "body": "all of those go in <code>Space.__init__</code>."}, {"owner": {"reputation": 11, "user_id": 9124553, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-peX_nuimkoE/AAAAAAAAAAI/AAAAAAAAAE0/T0ge4Rvgq8I/photo.jpg?sz=128", "display_name": "MrShroom - One Commands194744", "link": "https://stackoverflow.com/users/9124553/mrshroom-one-commands194744"}, "reply_to_user": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1513805828, "post_id": 47914501, "comment_id": 82797399, "body": "doing self.pack() makes my panel and buttons disappear"}, {"owner": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "edited": false, "score": 0, "creation_date": 1513805849, "post_id": 47914501, "comment_id": 82797406, "body": "I usually want to call those layout managers from the parent, not sure if it@s the right way to do it though."}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1513805919, "post_id": 47914501, "comment_id": 82797433, "body": "Yes, that&#39;s because you made your Canvas as large as the screen, so it pushes the buttons off the screen. make the canvas smaller."}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "reply_to_user": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "edited": false, "score": 0, "creation_date": 1513805944, "post_id": 47914501, "comment_id": 82797440, "body": "@Nae I would agree, but the way OP starts the code in the last line prevents that."}, {"owner": {"reputation": 11, "user_id": 9124553, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-peX_nuimkoE/AAAAAAAAAAI/AAAAAAAAAE0/T0ge4Rvgq8I/photo.jpg?sz=128", "display_name": "MrShroom - One Commands194744", "link": "https://stackoverflow.com/users/9124553/mrshroom-one-commands194744"}, "edited": false, "score": 0, "creation_date": 1513806122, "post_id": 47914501, "comment_id": 82797519, "body": "packed the widgets, resized canvas but text still not appearing"}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1513806431, "post_id": 47914501, "comment_id": 82797620, "body": "I&#39;ll bet you made the canvas too small now. You are drawing text at 960, 580 so try a canvas size of  width = 1000, height = 600. I tested it so I know that works."}, {"owner": {"reputation": 11, "user_id": 9124553, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-peX_nuimkoE/AAAAAAAAAAI/AAAAAAAAAE0/T0ge4Rvgq8I/photo.jpg?sz=128", "display_name": "MrShroom - One Commands194744", "link": "https://stackoverflow.com/users/9124553/mrshroom-one-commands194744"}, "edited": false, "score": 0, "creation_date": 1513806701, "post_id": 47914501, "comment_id": 82797726, "body": "I made it width 1920, height 880 then changed and its still not working"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1513806906, "post_id": 47914501, "comment_id": 82797810, "body": "What does &quot;not work&quot; mean? Drawing the wrong thing? Drawing the right thing in the wrong place? Throwing an error? Have you verified that the canvas is visible, and that the coordinates you are using are in the visible part of the canvas?"}, {"owner": {"reputation": 11, "user_id": 9124553, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-peX_nuimkoE/AAAAAAAAAAI/AAAAAAAAAE0/T0ge4Rvgq8I/photo.jpg?sz=128", "display_name": "MrShroom - One Commands194744", "link": "https://stackoverflow.com/users/9124553/mrshroom-one-commands194744"}, "edited": false, "score": 0, "creation_date": 1513806939, "post_id": 47914501, "comment_id": 82797819, "body": "it means not happening at all and no error"}, {"owner": {"reputation": 11, "user_id": 9124553, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-peX_nuimkoE/AAAAAAAAAAI/AAAAAAAAAE0/T0ge4Rvgq8I/photo.jpg?sz=128", "display_name": "MrShroom - One Commands194744", "link": "https://stackoverflow.com/users/9124553/mrshroom-one-commands194744"}, "edited": false, "score": 0, "creation_date": 1513807228, "post_id": 47914501, "comment_id": 82797936, "body": "I tested it and changed the bg value to &quot;black&quot; and it is not black. it is probably hidden. so how do I make it visible"}, {"owner": {"reputation": 11, "user_id": 9124553, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-peX_nuimkoE/AAAAAAAAAAI/AAAAAAAAAE0/T0ge4Rvgq8I/photo.jpg?sz=128", "display_name": "MrShroom - One Commands194744", "link": "https://stackoverflow.com/users/9124553/mrshroom-one-commands194744"}, "edited": false, "score": 0, "creation_date": 1513807374, "post_id": 47914501, "comment_id": 82798001, "body": "but how do I show it I&#39;m a python noob"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1513807497, "post_id": 47914501, "comment_id": 82798049, "body": "The very first comment is telling you what is wrong. I suggest you start over, and start by just creating a <code>Space</code> frame that is empty but has a distinctive color. Make sure it&#39;s visible before you do anything else. Next, create <code>frame1</code> with a different color, and make sure it shows up. Then create the canvas and make sure it shows up. Solve one problem at a time."}, {"owner": {"reputation": 11, "user_id": 9124553, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-peX_nuimkoE/AAAAAAAAAAI/AAAAAAAAAE0/T0ge4Rvgq8I/photo.jpg?sz=128", "display_name": "MrShroom - One Commands194744", "link": "https://stackoverflow.com/users/9124553/mrshroom-one-commands194744"}, "edited": false, "score": 0, "creation_date": 1513808192, "post_id": 47914501, "comment_id": 82798348, "body": "wow thanks its working well!"}], "answers": [{"comments": [{"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1513808623, "post_id": 47915135, "comment_id": 82798483, "body": "Why do you subclass Frame?"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "reply_to_user": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1513811261, "post_id": 47915135, "comment_id": 82799290, "body": "@Novel I kept original code but I was thinking about changing this. Finally I only wrote that I could use <code>self</code> instead of  <code>root</code>, etc because it would be more logical."}], "tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": true, "score": 2, "last_activity_date": 1513808406, "last_edit_date": 1513808406, "creation_date": 1513808091, "answer_id": 47915135, "question_id": 47914501, "link": "https://stackoverflow.com/questions/47914501/canvas-command-not-working-inside-function/47915135#47915135", "title": "canvas command not working inside function", "body": "<p>I removed <code>frame1</code> and put <code>Canvas</code> in <code>root</code> , and use <code>canvas.pack()</code> to see canvas in window.<br>\n(but I could use <code>self</code> instead of <code>root</code> and use <code>self.pack()</code> because <code>Space</code> inherits from <code>Frame</code>. it would ne more logical)</p>\n\n<p>After that I had to only change text positions because windows was too big for my screen.</p>\n\n<p>I used variables <code>CENTER_X</code>, <code>CENTER_Y</code> to put text in center regardless of the size of the screen.</p>\n\n<pre><code>from tkinter import *\nimport time\nimport os\n\nclass Space(Frame):\n\n    def __init__(self, master):\n        Frame.__init__(self, master)\n\n        self.master.title(\"Planetary Creator Alpha 0.1\")\n\n        self.canvas = Canvas(root, width=WIDTH, height=HEIGHT, bg=\"white\")\n        self.canvas.pack()\n        self.canvas.focus_set()\n\n        self.canvas.create_text(CENTER_X, CENTER_Y, text='Planetary Creator', font=('Arial',15))\n\n        frame = Frame(root, bg='grey', width=WIDTH, height=40)\n        frame.pack(fill='x')\n\n        button1 = Button(frame, text='New Game', command=self.new_game)\n        button1.pack(side='left', padx=10)\n\n        button2 = Button(frame, text='Quit Game', command=root.destroy)\n        button2.pack(side='left')\n\n    def new_game(self):\n        self.canvas.delete(ALL)\n\n        size = self.canvas.create_text(CENTER_X, CENTER_Y, text=str(planet_size) + \"moon\", font=(\"Arial\",10))\n        life = self.canvas.create_text(CENTER_X, CENTER_Y-20, text=\"\u2723\" + str(planet_life) + \"%\", font=(\"Arial\",10))\n        temp = self.canvas.create_text(CENTER_X, CENTER_Y-40, text=str(planet_temp) + \"\u00b0C\", font=(\"Arial\",10))\n        name = self.canvas.create_text(CENTER_X, CENTER_Y-60, text=planet_name, font=(\"Arial\",15))\n\n# --- main ---\n\nWIDTH = 800 #1920\nHEIGHT = 500 #1080\n\nCENTER_X = WIDTH//2\nCENTER_Y = HEIGHT//2\n\nplanet_selected = 0\nplanet_name = \"nothing\"\nplanet_temp = -270\nplanet_size = 0.0\nplanet_life = 0.0\n\nroot = Tk()\n#root.state('zoomed')\nSpace(root)\nroot.mainloop()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/jDEl8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jDEl8.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/TpZVW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TpZVW.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 11, "user_id": 9124553, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-peX_nuimkoE/AAAAAAAAAAI/AAAAAAAAAE0/T0ge4Rvgq8I/photo.jpg?sz=128", "display_name": "MrShroom - One Commands194744", "link": "https://stackoverflow.com/users/9124553/mrshroom-one-commands194744"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 47915135, "answer_count": 1, "score": 0, "last_activity_date": 1513808406, "creation_date": 1513804774, "last_edit_date": 1513807710, "question_id": 47914501, "link": "https://stackoverflow.com/questions/47914501/canvas-command-not-working-inside-function", "title": "canvas command not working inside function", "body": "<p>Help! I am using python 3.5.2 and the function <code>self.new_game</code> is not working. It is supposed to put text on the canvas but it does nothing! There are also no errors that appear in the shell.</p>\n\n<pre><code>from tkinter import *\nimport time\nimport os\n\nWIDTH = 1920\nHEIGHT = 1080\nroot = Tk()\nroot.state('zoomed')\nplanet_selected = 0\nplanet_name = \"nothing\"\nplanet_temp = -270\nplanet_size = 0.0\nplanet_life = 0.0\n\nclass Space(Frame):\n    def __init__(self):\n        Frame.__init__(self)\n        frame1 = Frame(self)\n        self.canvas = Canvas(frame1, width = WIDTH, height = HEIGHT, bg =\"white\")\n        self.canvas.focus_set()\n        self.canvas.create_text(1920,1000,text='Planetary Creator',font=('Arial',15))\n        self.master.title(\"Planetary Creator Alpha 0.1\")\n        frame = Frame(root, bg='grey', width=1920, height=40)\n        frame.pack(fill='x')\n        button1 = Button(frame, text='New Game',command=lambda : self.new_game())\n        button1.pack(side='left', padx=10)\n        button2 = Button(frame, text='Quit Game',command=lambda : os._exit(0))\n        button2.pack(side='left')\n\n#this function below does not work!!!\n\n    def new_game(self):\n        self.canvas.delete(ALL)\n        size = self.canvas.create_text(960,540,text=str(planet_size) + \"moon\",font=(\"Arial\",10))\n        life = self.canvas.create_text(960,520,text=\"\u2723\" + str(planet_life) + \"%\",font=(\"Arial\",10))\n        temp = self.canvas.create_text(960,500,text=str(planet_temp) + \"\u00b0C\",font=(\"Arial\",10))\n        name = self.canvas.create_text(960,480,text=planet_name,font=(\"Arial\",15))\n\nSpace().mainloop()\n</code></pre>\n"}, {"tags": ["python", "numpy", "vectorization"], "comments": [{"owner": {"reputation": 1663, "user_id": 454610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a61dafa016e70b5d0d88918f7c1d49c?s=128&d=identicon&r=PG&f=1", "display_name": "JMA", "link": "https://stackoverflow.com/users/454610/jma"}, "edited": false, "score": 0, "creation_date": 1513805160, "post_id": 47914475, "comment_id": 82797102, "body": "Could you explain what you mean by &quot;I want to count, by location, the number of True&#39;s.&quot; What do you mean by &quot;by location&quot;?"}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1513805221, "post_id": 47914475, "comment_id": 82797121, "body": "Could you try <code>np.add.at(count, IDX, mask)</code>? I think that&#39;s what you want."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1513805230, "post_id": 47914475, "comment_id": 82797130, "body": "Look at <code>np.add.at</code>, which is an unbuffered version of <code>+=</code>."}, {"owner": {"reputation": 195, "user_id": 799723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EnRqt.jpg?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/799723/ryan"}, "reply_to_user": {"reputation": 1663, "user_id": 454610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a61dafa016e70b5d0d88918f7c1d49c?s=128&d=identicon&r=PG&f=1", "display_name": "JMA", "link": "https://stackoverflow.com/users/454610/jma"}, "edited": false, "score": 0, "creation_date": 1513805326, "post_id": 47914475, "comment_id": 82797181, "body": "@JMA I understand it&#39;s confusing, but I hope the code explains what I mean better. Assuming lets say my IDX variable is [1,3,1,3] and my mask is [True, True, True, False], I want a count of [0,2,0,1] (assuming N == 4)."}, {"owner": {"reputation": 195, "user_id": 799723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EnRqt.jpg?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/799723/ryan"}, "reply_to_user": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1513805383, "post_id": 47914475, "comment_id": 82797202, "body": "@PaulPanzer That sounds right, thanks! I never remember the .at ufunc. I&#39;ll try it out"}, {"owner": {"reputation": 195, "user_id": 799723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EnRqt.jpg?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/799723/ryan"}, "reply_to_user": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 1, "creation_date": 1513805581, "post_id": 47914475, "comment_id": 82797307, "body": "Yah, that actually solved it, you&#39;re a life saver, thanks! How do I, like, upvote you or something? @PaulPanzer"}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 1, "creation_date": 1513805668, "post_id": 47914475, "comment_id": 82797337, "body": "@Ryan Don&#39;t worry, this one&#39;s one the house."}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 1, "creation_date": 1513805917, "post_id": 47914475, "comment_id": 82797432, "body": "Just remembered: <code>np.bincount(IDX, mask, minlength=N)</code> also works and may be a bit faster."}, {"owner": {"reputation": 195, "user_id": 799723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EnRqt.jpg?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/799723/ryan"}, "edited": false, "score": 0, "creation_date": 1513826234, "post_id": 47914475, "comment_id": 82802765, "body": "Two ways to do anything I guess."}], "owner": {"reputation": 195, "user_id": 799723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EnRqt.jpg?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/799723/ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513804607, "creation_date": 1513804607, "question_id": 47914475, "link": "https://stackoverflow.com/questions/47914475/adding-to-numpy-array-by-index-where-there-are-duplicate-index-values", "title": "Adding to Numpy Array by-index, where there are duplicate index values", "body": "<p>Imagine we have an array called count, size N, initialized to zero:</p>\n\n<pre><code>import numpy as np\nN = 100\ncount = np.zeros(N)  # Shape (N,)\n</code></pre>\n\n<p>And a set of indexes, which may contain duplicates, and a set of boolean values (or whatever kind of values really):</p>\n\n<pre><code>IDX = np.random.choice(N,N,replace=True)  # Shape (N,)\nmask = np.random.rand(N)&gt;.5  # Shape (N,)\n</code></pre>\n\n<p>I want to count, by location, the number of True's.</p>\n\n<pre><code>count[IDX] += mask\n</code></pre>\n\n<p>But for this output, the maximum of count will be equal to 1.</p>\n\n<p>This is because, I assume, duplicates can't be processed in the pipeline like this, either the first or last is used I suspect.</p>\n\n<p>Is there any vectorized equivalent code which can perform this function accurately?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "beautifulsoup"], "comments": [{"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "edited": false, "score": 1, "creation_date": 1513804792, "post_id": 47914460, "comment_id": 82796923, "body": "1. What have you tried? 2. <a href=\"https://meta.stackoverflow.com/q/285551/771848\">Why not upload images of code on SO when asking a question?</a> 3. What is the input - what facts do you know and can use to find the element?"}, {"owner": {"reputation": 11, "user_id": 9124546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d749d2122b71298992c8847b0ac0d887?s=128&d=identicon&r=PG&f=1", "display_name": "jkung2314", "link": "https://stackoverflow.com/users/9124546/jkung2314"}, "reply_to_user": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "edited": false, "score": 0, "creation_date": 1513805527, "post_id": 47914460, "comment_id": 82797278, "body": "Honestly have no idea how to approach this"}, {"owner": {"reputation": 74709, "user_id": 21945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631470ecb1d4fe8bd3be6d7e0dfe4449?s=128&d=identicon&r=PG", "display_name": "mhawke", "link": "https://stackoverflow.com/users/21945/mhawke"}, "edited": false, "score": 0, "creation_date": 1513806365, "post_id": 47914460, "comment_id": 82797593, "body": "@jkung2314: start by reading the <a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/#beautiful-soup-documentation\" rel=\"nofollow noreferrer\">documentation</a>"}, {"owner": {"reputation": 2116, "user_id": 6929467, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8QLhMqjbYUU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfZX1kiTbhsA5xQMiKWekx9fqT5Yw/photo.jpg?sz=128", "display_name": "Yono", "link": "https://stackoverflow.com/users/6929467/yono"}, "edited": false, "score": 0, "creation_date": 1513808336, "post_id": 47914460, "comment_id": 82798401, "body": "jkung2314, Please include the actual HTML instead of a picture, I&#39;ll gladly solve this issue for you and help you with decent tips and guidance."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1513811485, "post_id": 47914460, "comment_id": 82799339, "body": "put HTML as text, not screenshot, and then we can use it to create example."}], "answers": [{"tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": true, "score": 0, "last_activity_date": 1513812369, "last_edit_date": 1513812369, "creation_date": 1513812021, "answer_id": 47915726, "question_id": 47914460, "link": "https://stackoverflow.com/questions/47914460/how-to-use-python-bs4-to-access-text-within-html-p-tag/47915726#47915726", "title": "How to use Python BS4 to access text within HTML &lt;p&gt; tag", "body": "<pre><code>from bs4 import BeautifulSoup\n\nhtml = '''\n&lt;p&gt;\n    &lt;strong&gt;123&lt;/strong&gt;\n    A CTS PAC is nearing its expiration date\n&lt;/p&gt;\n'''\n\nsoup = BeautifulSoup(html, 'html.parser')\n\np = soup.find('p')\n\ntext = list(p.children)[-1]\n\nprint(text.strip())\n</code></pre>\n\n<p>If you have more <code>&lt;p&gt;</code> inside </p>\n\n<pre><code>from bs4 import BeautifulSoup\n\nhtml = '''\n&lt;p&gt;\n    Other p-tag\n&lt;/p&gt;\n&lt;p&gt;\n    &lt;strong&gt;123&lt;/strong&gt;\n    A CTS PAC is nearing its expiration date\n&lt;/p&gt;\n'''\n\nsoup = BeautifulSoup(html, 'html.parser')\n\nall_p = soup.find_all('p')\n\n\ntext = list(all_p[1].children)[-1]\n\nprint(text.strip())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19199, "user_id": 131187, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/27eJi.jpg?s=128&g=1", "display_name": "Bill Bell", "link": "https://stackoverflow.com/users/131187/bill-bell"}, "is_accepted": false, "score": 0, "last_activity_date": 1513812182, "creation_date": 1513812182, "answer_id": 47915752, "question_id": 47914460, "link": "https://stackoverflow.com/questions/47914460/how-to-use-python-bs4-to-access-text-within-html-p-tag/47915752#47915752", "title": "How to use Python BS4 to access text within HTML &lt;p&gt; tag", "body": "<p>I believe this HTML came from the cisco.com site. If so, here's a direct answer to your question.</p>\n\n<pre><code>&gt;&gt;&gt; url = 'https://www.cisco.com/c/en/us/td/docs/security/asa/syslog/b_syslog/syslogs10.html'\n&gt;&gt;&gt; import bs4\n&gt;&gt;&gt; import requests\n&gt;&gt;&gt; page = requests.get(url).content\n&gt;&gt;&gt; soup = bs4.BeautifulSoup(page, 'lxml')\n</code></pre>\n\n<p>First I tried looking for the unadorned string. However, upon more careful examination of the page, I noticed some trailing blanks.</p>\n\n<pre><code>&gt;&gt;&gt; near = soup.find_all(string='A CTS PAC is nearing its expiration date')\n&gt;&gt;&gt; near\n[]\n</code></pre>\n\n<p>Using a regex makes it possible to search for a string <em>with</em> trailing blanks in the source page.</p>\n\n<pre><code>&gt;&gt;&gt; near = soup.find_all(string=bs4.re.compile('A CTS PAC is nearing its expiration date'))\n&gt;&gt;&gt; near\n['A CTS PAC is nearing its expiration date.\\n\\t ']\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9124546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d749d2122b71298992c8847b0ac0d887?s=128&d=identicon&r=PG&f=1", "display_name": "jkung2314", "link": "https://stackoverflow.com/users/9124546/jkung2314"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 816, "favorite_count": 0, "accepted_answer_id": 47915726, "answer_count": 2, "score": -1, "last_activity_date": 1513812369, "creation_date": 1513804551, "last_edit_date": 1513804695, "question_id": 47914460, "link": "https://stackoverflow.com/questions/47914460/how-to-use-python-bs4-to-access-text-within-html-p-tag", "title": "How to use Python BS4 to access text within HTML &lt;p&gt; tag", "body": "<p>So here is my HTML:</p>\n\n<p><a href=\"https://i.stack.imgur.com/kpEL5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kpEL5.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I go about accessing \"A CTS PAC is nearing its expiration date.\" specifically in beautifulsoup using \"find_all\" command?</p>\n"}, {"tags": ["python", "dataframe", "pandas-groupby"], "comments": [{"owner": {"reputation": 1341, "user_id": 6388994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d56f9550cf209ae3c4620eb1a31109?s=128&d=identicon&r=PG&f=1", "display_name": "Usernamenotfound", "link": "https://stackoverflow.com/users/6388994/usernamenotfound"}, "edited": false, "score": 0, "creation_date": 1513805087, "post_id": 47914428, "comment_id": 82797063, "body": "do a groupby and apply the formulas as a function across the column"}, {"owner": {"reputation": 3952, "user_id": 6696657, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c78dbc81728388bd956e9d4f4c1a6759?s=128&d=identicon&r=PG&f=1", "display_name": "MattR", "link": "https://stackoverflow.com/users/6696657/mattr"}, "edited": false, "score": 0, "creation_date": 1513805348, "post_id": 47914428, "comment_id": 82797187, "body": "would you mind giving us the r^2 and RMSE formula you have so we can test this out? It&#39;s been a while since stats class for me (and maybe others)"}], "answers": [{"comments": [{"owner": {"reputation": 3310, "user_id": 7077532, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/dc1c023b437567e50b600d8df7e1c995?s=128&d=identicon&r=PG&f=1", "display_name": "PineNuts0", "link": "https://stackoverflow.com/users/7077532/pinenuts0"}, "edited": false, "score": 0, "creation_date": 1513832701, "post_id": 47914634, "comment_id": 82804327, "body": "this is amazing! thank you .... any tips on how to do this for a confidence interval?"}, {"owner": {"reputation": 682, "user_id": 4590360, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d26d78bf730e76f579cd374070c970ec?s=128&d=identicon&r=PG&f=1", "display_name": "Abhilash Awasthi", "link": "https://stackoverflow.com/users/4590360/abhilash-awasthi"}, "edited": false, "score": 1, "creation_date": 1598276237, "post_id": 47914634, "comment_id": 112397390, "body": "<code>return</code> statement can be modified as <code>return pd.Series({&#39;r2&#39;:r2, &#39;rmse&#39;:rmse})</code>"}], "tags": [], "owner": {"reputation": 433, "user_id": 5162584, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3903ebc8ff4f79178eee6cb7470e53b5?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5162584/tom"}, "is_accepted": true, "score": 24, "last_activity_date": 1513805454, "creation_date": 1513805454, "answer_id": 47914634, "question_id": 47914428, "link": "https://stackoverflow.com/questions/47914428/python-dataframe-calculating-r2-and-rmse-using-groupby-on-one-column/47914634#47914634", "title": "Python Dataframe: Calculating R^2 and RMSE Using Groupby on One Column", "body": "<p>Here is a <code>groupby</code> method:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nfrom sklearn.metrics import r2_score, mean_squared_error\n\ndef r2_rmse( g ):\n    r2 = r2_score( g['Actual'], g['Predicted'] )\n    rmse = np.sqrt( mean_squared_error( g['Actual'], g['Predicted'] ) )\n    return pd.Series( dict(  r2 = r2, rmse = rmse ) )\n\nyour_df.groupby( 'Type' ).apply( r2_rmse ).reset_index()\n</code></pre>\n"}], "owner": {"reputation": 3310, "user_id": 7077532, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/dc1c023b437567e50b600d8df7e1c995?s=128&d=identicon&r=PG&f=1", "display_name": "PineNuts0", "link": "https://stackoverflow.com/users/7077532/pinenuts0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6330, "favorite_count": 6, "accepted_answer_id": 47914634, "answer_count": 1, "score": 9, "last_activity_date": 1595241820, "creation_date": 1513804383, "last_edit_date": 1595241820, "question_id": 47914428, "link": "https://stackoverflow.com/questions/47914428/python-dataframe-calculating-r2-and-rmse-using-groupby-on-one-column", "title": "Python Dataframe: Calculating R^2 and RMSE Using Groupby on One Column", "body": "<p>I have the following Python dataframe: </p>\n\n<pre><code>Type    Actual  Predicted\nA       4       3\nA       10      18\nA       13      11\nB       3       10\nB       4       2\nB       8       33\nC       20      17\nC       40      33\nC       87      80\nC       32      30\n</code></pre>\n\n<p>I have the code to calculate R^2 and RMSE but I don't know how to calculate it by distinct \"Type\".  </p>\n\n<p>For now, my methodology is breaking the larger table into three smaller tables consisting of only A, B, C values and then calculating R^2 and RMSE off each smaller table...then appending them back together.  </p>\n\n<p>But the above method is inefficient and I believe there should be an easier way?  </p>\n\n<p>Below is the format I want the results to produce when things are grouped:   </p>\n\n<pre><code>Type    R^2     RMSE    \nA       value   value   \nB       value   value   \nC       value   value   \n</code></pre>\n"}, {"tags": ["python", "python-3.x", "python-module"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1513807880, "post_id": 47914388, "comment_id": 82798216, "body": "If the <code>win32ui</code> module isn&#39;t found, it likely means it&#39;s not installed. Did you download a version for Python 3 (verses one for Python 2)? Did it install without errors? Also make sure you have the most current version. The website is <a href=\"https://github.com/mhammond/pywin32\" rel=\"nofollow noreferrer\">github.com/mhammond/pywin32</a>"}], "owner": {"reputation": 79, "user_id": 9044633, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NHsq6e9JCyc/AAAAAAAAAAI/AAAAAAAAAMI/Goew2y_MKM8/photo.jpg?sz=128", "display_name": "Luca Jeevanjee", "link": "https://stackoverflow.com/users/9044633/luca-jeevanjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 418, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1513804190, "creation_date": 1513804190, "question_id": 47914388, "link": "https://stackoverflow.com/questions/47914388/pywin32-module-not-found-after-installing-pywin32-for-python-3-6", "title": "PyWin32 module not found after installing pywin32 for python 3.6", "body": "<p>Hi I am trying to send an image to a printer via python but when I imported win32ui , win32gui and win32con it said that win32ui module was not found but I have already installed the latest version of pywin32.</p>\n\n<pre><code>import win32ui\nfrom win32 import win32gui\nimport win32con\nfrom PIL import Image, ImageWin\n</code></pre>\n\n<p>The code looks good to me so why???</p>\n"}, {"tags": ["python", "pyqt5"], "comments": [{"owner": {"reputation": 1334, "user_id": 4409117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/21e9w.png?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/4409117/daniel"}, "edited": false, "score": 2, "creation_date": 1513806009, "post_id": 47914378, "comment_id": 82797469, "body": "Some code snippets of what you have tried may be helpful to others that read your question."}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 0, "creation_date": 1513806059, "post_id": 47914378, "comment_id": 82797489, "body": "Welcome to SO.  In future I recommend you also tag the language you are using.  In this case <code>python</code> and  <code>pyqt5</code> together.  In order to find (and answer) your question users would need to be looking under the <code>pyqt5</code> tag.  Many who know <code>pyqt5</code> may not look under this tag specifically (so it is a good idea to maximize your audience while keeping it tagged with <i>all</i> relevant tags).  Also they will not know which language you are using and may for this reason skip it without reading."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1513806256, "post_id": 47914378, "comment_id": 82797559, "body": "Since you have installed PyQt5, and what is its version, you should have the QWebEngineView module, see this example:  <a href=\"https://stackoverflow.com/questions/47893838/make-any-link-even-blank-open-in-same-window-using-qwebengine\" title=\"make any link even blank open in same window using qwebengine\">stackoverflow.com/questions/47893838/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 8836745, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5nEyMeW2ass/AAAAAAAAAAI/AAAAAAAAADI/arNzgS1xZ4I/photo.jpg?sz=128", "display_name": "Morteza Afshari", "link": "https://stackoverflow.com/users/8836745/morteza-afshari"}, "is_accepted": true, "score": 0, "last_activity_date": 1513858687, "creation_date": 1513858687, "answer_id": 47924843, "question_id": 47914378, "link": "https://stackoverflow.com/questions/47914378/how-to-show-a-webpage-in-qmainwindow/47924843#47924843", "title": "How to show a webpage in Qmainwindow?", "body": "<p>Tnx All. The correct import was  <code>from PyQt5 import QtWebEngineWidgets</code>then, you can use <code>QWebEngineView</code>easily by <code>load()</code> method.</p>\n"}], "owner": {"reputation": 61, "user_id": 8836745, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5nEyMeW2ass/AAAAAAAAAAI/AAAAAAAAADI/arNzgS1xZ4I/photo.jpg?sz=128", "display_name": "Morteza Afshari", "link": "https://stackoverflow.com/users/8836745/morteza-afshari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 47924843, "answer_count": 1, "score": -1, "last_activity_date": 1513858687, "creation_date": 1513804145, "last_edit_date": 1513806245, "question_id": 47914378, "link": "https://stackoverflow.com/questions/47914378/how-to-show-a-webpage-in-qmainwindow", "title": "How to show a webpage in Qmainwindow?", "body": "<p>I have searched entire web to find a way to do this.</p>\n\n<p>All the answers are about PyQt4, Pyside, Qwebview, Qt4, or Qt5(C++), therefore they do not work on PyQt5.  </p>\n\n<p>the other answer is <code>QtWebEngineView</code>: unknown for PyQt5 (at least mine).</p>\n\n<p>I have the latest version of Python, Pycharm and PyQt5.</p>\n"}, {"tags": ["python", "testing", "travis-ci", "python-import"], "answers": [{"tags": [], "owner": {"reputation": 2574, "user_id": 4162641, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-QCRH93REO58/AAAAAAAAAAI/AAAAAAAAA20/uZA4Z48QSc0/photo.jpg?sz=128", "display_name": "StephenG", "link": "https://stackoverflow.com/users/4162641/stepheng"}, "is_accepted": true, "score": 3, "last_activity_date": 1513826087, "creation_date": 1513826087, "answer_id": 47917395, "question_id": 47914377, "link": "https://stackoverflow.com/questions/47914377/how-to-add-tests-directory-to-pythonpath-when-testing-with-travis-ci/47917395#47917395", "title": "How to add tests/ directory to PYTHONPATH when testing with Travis-CI?", "body": "<p>The travis <code>env</code> variable is what you're looking for.</p>\n\n<p>Try adding this <code>yml</code> to your <code>.travis.yml</code>:</p>\n\n<pre><code>env: PYTHONPATH=$PYTHONPATH:$TRAVIS_BUILD_DIR/tests:$TRAVIS_BUILD_DIR/foop\n</code></pre>\n"}], "owner": {"reputation": 1023, "user_id": 1175614, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/PZ2fL.jpg?s=128&g=1", "display_name": "jmborr", "link": "https://stackoverflow.com/users/1175614/jmborr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "accepted_answer_id": 47917395, "answer_count": 1, "score": 0, "last_activity_date": 1513826087, "creation_date": 1513804137, "question_id": 47914377, "link": "https://stackoverflow.com/questions/47914377/how-to-add-tests-directory-to-pythonpath-when-testing-with-travis-ci", "title": "How to add tests/ directory to PYTHONPATH when testing with Travis-CI?", "body": "<p>My package structure:</p>\n\n<pre><code>foop\n|___foop\n|   |___foo.py\n|\n|___tests\n    |__test_foo.py\n    |__test_helper.py\n</code></pre>\n\n<p><code>test_foo.py</code> imports both foo and test_helper:</p>\n\n<pre><code>import foo\nimport test_helper\n</code></pre>\n\n<p>The problem is that <code>tests</code> is not in <code>$PYTHONPATH</code> so <code>import test_helper</code> raises <code>ImportError</code>.</p>\n\n<p>I'm very new to Travis-CI. Could anyone please let me know how can I solve this import error?</p>\n"}, {"tags": ["python", "windows-subsystem-for-linux"], "comments": [{"owner": {"reputation": 1911, "user_id": 8928481, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/orscP.png?s=128&g=1", "display_name": "Biswapriyo", "link": "https://stackoverflow.com/users/8928481/biswapriyo"}, "edited": false, "score": 0, "creation_date": 1514218842, "post_id": 47914363, "comment_id": 82909886, "body": "Did you run old Ubuntu with lxrun? Or Ubuntu from Windows store?"}, {"owner": {"reputation": 1385, "user_id": 4422596, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/VQMFB.png?s=128&g=1", "display_name": "John Snow", "link": "https://stackoverflow.com/users/4422596/john-snow"}, "reply_to_user": {"reputation": 1911, "user_id": 8928481, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/orscP.png?s=128&g=1", "display_name": "Biswapriyo", "link": "https://stackoverflow.com/users/8928481/biswapriyo"}, "edited": false, "score": 0, "creation_date": 1514225398, "post_id": 47914363, "comment_id": 82911391, "body": "I installed through developer options so I&#39;m not sure"}], "owner": {"reputation": 1385, "user_id": 4422596, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/VQMFB.png?s=128&g=1", "display_name": "John Snow", "link": "https://stackoverflow.com/users/4422596/john-snow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528509553, "creation_date": 1513804077, "last_edit_date": 1528509553, "question_id": 47914363, "link": "https://stackoverflow.com/questions/47914363/bash-exe-opens-in-root-directory-when-launching-from-command-line-in-subdirector", "title": "bash.exe opens in root directory when launching from command line in subdirectory", "body": "<p>I am attempting to make a script using python to set up a work space with multiple bash windows.</p>\n\n<p>I use the following lines:</p>\n\n<pre><code>import os\nos.chdir('C:\\\\Users\\Patrick\\AppData\\Local\\lxss\\home\\Patrick\\catkin_ws')\nos.system('start bash.exe')\n</code></pre>\n\n<p>Which correctly sets the working directory, but opens bash at <code>C:\\\\Users\\Patrick\\AppData\\Local\\lxss</code>. </p>\n\n<p>My <code>.bashrc</code> file doesn't have any redirecting in it. \nIf I open from a directory higher such as <code>C:\\\\Users\\Patrick\\AppData\\Local</code> it opens bash in that folder, similarly it'll open in correct places elsewhere. \nNormally if I open bash from the start menu, it'll open in the directory accessed through <code>cd ~</code>. </p>\n"}, {"tags": ["python", "python-3.x", "pandas", "loops"], "comments": [{"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1513805297, "post_id": 47914351, "comment_id": 82797171, "body": "Curious, why would you want a dataframe in that structure? Other than presentation, any analysis would be difficult here. Your original resembles an <a href=\"https://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model\" rel=\"nofollow noreferrer\">entity-attribute-value model</a>. Ideally, you want to transpose your desired result with <i>Feature</i> as columns."}, {"owner": {"reputation": 13, "user_id": 8674322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebdd20587d60332af4af018ed0ee21c3?s=128&d=identicon&r=PG&f=1", "display_name": "omaraskar", "link": "https://stackoverflow.com/users/8674322/omaraskar"}, "reply_to_user": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1513805729, "post_id": 47914351, "comment_id": 82797360, "body": "It&#39;s exactly that - presentation. I&#39;m in a place where I need to see what I have to be able to figure out the next step, and whether or not this data is going to help my purpose."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8674322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebdd20587d60332af4af018ed0ee21c3?s=128&d=identicon&r=PG&f=1", "display_name": "omaraskar", "link": "https://stackoverflow.com/users/8674322/omaraskar"}, "edited": false, "score": 0, "creation_date": 1513806373, "post_id": 47914512, "comment_id": 82797596, "body": "Thanks! I&#39;m getting &quot;ValueError: Grouper for &#39;Feature&#39; not 1-dimensional&quot;. Any ideas why?"}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 1, "last_activity_date": 1513804809, "creation_date": 1513804809, "answer_id": 47914512, "question_id": 47914351, "link": "https://stackoverflow.com/questions/47914351/python3-dataframe-restructure/47914512#47914512", "title": "Python3 dataframe restructure", "body": "<p>Try this:</p>\n\n<pre><code>df.groupby('Feature')['Value'].apply(lambda x: pd.Series(x.tolist())).unstack().add_prefix('Value_')\n</code></pre>\n\n<p>Using <code>groupby</code>, <code>apply</code> and <code>unstack</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 8674322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebdd20587d60332af4af018ed0ee21c3?s=128&d=identicon&r=PG&f=1", "display_name": "omaraskar", "link": "https://stackoverflow.com/users/8674322/omaraskar"}, "edited": false, "score": 0, "creation_date": 1513807431, "post_id": 47914602, "comment_id": 82798020, "body": "Thank you!! I&#39;m getting &quot;ValueError: Grouper for &#39;Feature&#39; not 1-dimensional&quot;. Do you know what that means?"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 1, "last_activity_date": 1513805295, "creation_date": 1513805295, "answer_id": 47914602, "question_id": 47914351, "link": "https://stackoverflow.com/questions/47914351/python3-dataframe-restructure/47914602#47914602", "title": "Python3 dataframe restructure", "body": "<p>By using <code>pivot_table</code> </p>\n\n<pre><code>pd.pivot_table(df,index=df.Feature,columns=df.groupby('Feature').cumcount().add(1),values='Value',aggfunc='sum').add_prefix('Value_')\nOut[779]: \n                 Value_1   Value_2  Value_3\nFeature                                    \nBridge               yes       n/a     None\nCounty               n/a       n/a     None\nHighway    motorway_link  motorway     None\nName                 n/a       n/a     None\nName2                n/a       n/a     None\nName3                n/a       n/a     None\nName4                n/a       n/a     None\nNameType             n/a       n/a     None\nReference            n/a       A49     None\nToll                 yes       yes     None\nWayID            2781002   2788620  2954156\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8674322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebdd20587d60332af4af018ed0ee21c3?s=128&d=identicon&r=PG&f=1", "display_name": "omaraskar", "link": "https://stackoverflow.com/users/8674322/omaraskar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 47914512, "answer_count": 2, "score": 1, "last_activity_date": 1513805295, "creation_date": 1513804034, "last_edit_date": 1513804648, "question_id": 47914351, "link": "https://stackoverflow.com/questions/47914351/python3-dataframe-restructure", "title": "Python3 dataframe restructure", "body": "<p>I have a dataframe that consists of 2 columns; first columns 'Features', contains 11 unique values stacked vertically 148037 times, with the 'Values' column having different corresponding values.</p>\n\n<pre><code>    Feature         Value\n0   Way ID          2781002\n1   Highway         motorway_link\n2   Toll            yes\n3   Reference       n/a\n4   Bridge          yes\n5   County          n/a\n6   Name            n/a\n7   Name2           n/a\n8   Name3           n/a\n9   Name4           n/a\n10  Name Type       n/a\n11  Way ID          2788620\n12  Highway         motorway\n13  Toll            yes\n14  Reference       A 49\n15  Bridge          n/a\n16  County          n/a\n17  Name            n/a\n18  Name2           n/a\n19  Name3           n/a\n20  Name4           n/a\n21  Name Type       n/a\n22  Way ID          2954156\n... ... ...\n148026  Name Type   n/a\n148027  Way ID      545273699\n148028  Highway     motorway\n148029  Toll        yes\n148030  Reference   A 4\n148031  Bridge      n/a\n148032  County      n/a\n148033  Name        Autoroute de l'Est\n148034  Name2       n/a\n148035  Name3       n/a\n148036  Name4       n/a\n148037  Name Type   n/a\n</code></pre>\n\n<p>I'd like to have the dataframe set up horizontally in the following way:</p>\n\n<pre><code>    Feature         Value_1           Value_2        Value_3\n0   Way ID          2781002           2788620        2954156\n1   Highway         motorway_link     motorway       motorway\n2   Toll            yes               yes            yes       \n3   Reference       n/a               n/a            n/a\n4   Bridge          yes               yes            no\n... ... ...    \n10  Name Type       n/a               n/a            n/a\n</code></pre>\n\n<p>How can I do this? I tried to use a loop and create a new df/list for every new set of 11 rows, then concatenate them together. Problem is, I can't create new df with different names using '{}'.format(i) syntax within a loop, it doesn't like it for some reason.</p>\n"}, {"tags": ["python", "mysql", "django", "foreign-keys", "cascading-deletes"], "owner": {"reputation": 701, "user_id": 1717372, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8e4b867a4b7242a909dd97f635f068aa?s=128&d=identicon&r=PG", "display_name": "HelenM", "link": "https://stackoverflow.com/users/1717372/helenm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 612, "favorite_count": 1, "closed_date": 1513885662, "answer_count": 0, "score": 3, "last_activity_date": 1513885755, "creation_date": 1513803902, "last_edit_date": 1513885755, "question_id": 47914325, "link": "https://stackoverflow.com/questions/47914325/what-does-adding-on-delete-to-models-py-do-and-what-should-i-put-in-it", "closed_reason": "Duplicate", "title": "What does adding on_delete to models.py do, and what should I put in it?", "body": "<p>The text of this answer is provided in the \"duplicate question,\" though this goes into much more detail than any answers provided there.</p>\n\n<p>FYI, the on_delete parameter in models is backwards from what it sounds like.  You put \"on_delete\" on a Foreign Key (FK) on a model to tell django what to do if the FK entry that you are pointing to on your record is deleted.  The options our shop have used the most are PROTECT, CASCADE, and SET_NULL. Here are the basic rules I have figured out: </p>\n\n<ol>\n<li>Use PROTECT when your FK is pointing to a look-up table that really shouldn't be changing and that <em>certainly</em> should not cause your table to change.  If anyone tries to delete an entry on that look-up table, PROTECT prevents them from deleting it if it is tied to any records.  It also prevents django from deleting <em>your</em> record just because it deleted an entry on a look-up table.  This last part is critical.  <em>If someone were to delete the gender \"Female\" from my Gender table, I CERTAINLY would NOT want that to instantly delete any and all people I had in my Person table who had that gender.</em></li>\n<li>Use CASCADE when your FK is pointing to a \"parent\" record.  So, if a Person can have many PersonEthnicity entries (he/she can be American Indian, Black, and White), and that Person <em>is</em> deleted, I really <em>would</em> want any \"child\" PersonEthnicity entries to be deleted.  They are irrelevant without the Person.</li>\n<li>Use SET_NULL when you <em>do</em> want people to be allowed to delete an entry on a look-up table, but you still want to preserve your record.  For example, if a Person can have a HighSchool, but it doesn't really matter to me if that high-school goes away on my look-up table, I would say \"on_delete=SET_NULL.\"  This would leave my Person record out there; it just would just set the high-school FK on my Person to null.  Obviously, you will have to allow null=True on that FK.</li>\n</ol>\n\n<p>Here is an example of a model that does all three things:</p>\n\n<pre><code>class PurchPurchaseAccount(models.Model):\n    id = models.AutoField(primary_key=True)\n    purchase = models.ForeignKey(PurchPurchase, null=True, db_column='purchase', blank=True, on_delete=models.CASCADE) # If \"parent\" rec gone, delete \"child\" rec!!!\n    paid_from_acct = models.ForeignKey(PurchPaidFromAcct, null=True, db_column='paid_from_acct', blank=True, on_delete=models.PROTECT) # Disallow lookup deletion &amp; do not delete this rec.\n    _updated = models.DateTimeField()\n    _updatedby = models.ForeignKey(Person, null=True, db_column='_updatedby', blank=True, related_name='acctupdated_by', on_delete=models.SET_NULL) # Person records shouldn't be deleted, but if they are, preserve this PurchPurchaseAccount entry, and just set this person to null.\n\n    def __unicode__(self):\n        return str(self.paid_from_acct.display)\n    class Meta:\n        db_table = u'purch_purchase_account'\n</code></pre>\n\n<p>As a last tidbit, did you know that if you <em>don't</em> specify on_delete (or didn't), the default behavior is CASCADE?  This means that if someone deleted a gender entry on your Gender table, any Person records with that gender were also deleted!</p>\n\n<p>I would say, \"If in doubt, set on_delete=models.PROTECT.\"  Then go test your application.  You will quickly figure out which FKs should be labeled the other values without endangering any of your data.</p>\n\n<p>Also, it is worth noting that on_delete=CASCADE is actually not added to any of your migrations, if that is the behavior you are selecting. I guess this is because it is the default, so putting on_delete=CASCADE is the same thing as putting nothing.</p>\n"}, {"tags": ["python", "numpy", "numba", "in-place"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1513805505, "post_id": 47914320, "comment_id": 82797270, "body": "Yes, <code>numpy</code> operations tend to be buffered.  It shouldn&#39;t matter whether the underlying code iterates from start to end or the reverse.  Conceptually all elements are operated on in parallel."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1513812588, "post_id": 47914320, "comment_id": 82799646, "body": "I haven&#39;t worked with <code>numba</code> but it looks like it is doing the equivalent of <code>for i in range(6): arr[i] -= arr[3]</code>, which would be different if it iterated in the other direction, <code>range(5,-1,-1)</code>."}, {"owner": {"reputation": 188404, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1557467719, "post_id": 47914320, "comment_id": 98781813, "body": "Related to my earlier question (and maybe indirectly my fault!): <a href=\"https://stackoverflow.com/q/43151152/541686\">stackoverflow.com/q/43151152/541686</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1737, "user_id": 6793085, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59da9fd7490b959c0158e3ee56cf1a50?s=128&d=identicon&r=PG&f=1", "display_name": "godaygo", "link": "https://stackoverflow.com/users/6793085/godaygo"}, "edited": false, "score": 0, "creation_date": 1513851439, "post_id": 47916938, "comment_id": 82812943, "body": "I found <code>arr -= arr[3] </code> while reviewing some code, and was surprised how <code>numpy</code> treats this (also I did not know that this behaviour is guaranteed since <code>numpy 1.13</code> as @user2357112 said). Then I checked this in <code>numba</code> and the obtained results fits better my mentality, but because they are different I&#39;ve opened a ticket. Thinking about this after 1 week, I&#39;m still confused, honestly, I see practical reasons for python-dev to implement that in this way but for me it was better to leave it undefined."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6655984"}, "reply_to_user": {"reputation": 1737, "user_id": 6793085, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59da9fd7490b959c0158e3ee56cf1a50?s=128&d=identicon&r=PG&f=1", "display_name": "godaygo", "link": "https://stackoverflow.com/users/6793085/godaygo"}, "edited": false, "score": 0, "creation_date": 1513870891, "post_id": 47916938, "comment_id": 82824926, "body": "The NumPy output fits my expectation, because NumPy allows us to think of the array operations as atomic. It&#39;s &quot;take the [3, :] slice and subtracts it from the entire array at once&quot; , no loops."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6655984"}, "is_accepted": false, "score": 3, "last_activity_date": 1513822546, "last_edit_date": 1513822546, "creation_date": 1513822093, "answer_id": 47916938, "question_id": 47914320, "link": "https://stackoverflow.com/questions/47914320/why-numba-and-numpy-performs-differently-on-inplace-operations/47916938#47916938", "title": "Why numba and numpy performs differently on inplace operations?", "body": "<h3>Workaround</h3>\n\n<p>It will help Numba if you use an explicit in-place operation, with <code>out</code> argument, instead of augmented assignment: replace </p>\n\n<pre><code>arr -= arr[3] \n</code></pre>\n\n<p>with</p>\n\n<pre><code>np.subtract(arr, arr[3], out=arr)\n</code></pre>\n\n<p>This makes the jitted version (though with @jit, not @njit) perform identically to the NumPy version. Notably, an attempt to @njit this function will now fail, telling you than njit cannot handle the <code>out</code> argument. </p>\n\n<p>I see you already <a href=\"https://github.com/numba/numba/issues/2644\" rel=\"nofollow noreferrer\">opened an issue on this</a>, so there's a chance that the handling of augmented assignments will be changed to match NumPy. </p>\n\n<h3>Why this happens</h3>\n\n<p>As hpaulj said, the Numba output is equivalent to looping over the rows of the array. A Python JITter cannot do anything with C code underlying NumPy; it needs Python to work with. The reason that NumPy methods are supported (to some extent) is that Numba developers went into the trouble of decoding NumPy array operations into explicit Python iteration on scalar objects, which can then be passed to LLVM. From the <a href=\"http://numba.pydata.org/numba-doc/dev/developer/rewrites.html#the-lower-array-expr-function\" rel=\"nofollow noreferrer\">documentation</a>: </p>\n\n<blockquote>\n  <ul>\n  <li>Synthesize a Python function that implements the array expression: This new Python function essentially behaves like a Numpy ufunc, returning the result of the expression on scalar values in the broadcasted array arguments. The lowering function accomplishes this by translating from the array expression tree into a Python AST.</li>\n  <li>Compile the synthetic Python function into a kernel: At this point, the lowering function relies on existing code for lowering ufunc and DUFunc kernels, calling <code>numba.targets.numpyimpl.numpy_ufunc_kernel()</code> after defining how to lower calls to the synthetic function.</li>\n  </ul>\n  \n  <p>The end result is similar to loop lifting in Numba\u2019s object mode.</p>\n</blockquote>\n\n<p>The aforementioned <a href=\"https://github.com/numba/numba/blob/master/numba/targets/npyimpl.py#L296\" rel=\"nofollow noreferrer\"><code>numpy_ufunc_kernel</code></a> gathers indices and <em>iterates</em> over them. If the object being iterated over mutates in the process of iteration, that makes things hairy.   </p>\n"}, {"comments": [{"owner": {"reputation": 1737, "user_id": 6793085, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59da9fd7490b959c0158e3ee56cf1a50?s=128&d=identicon&r=PG&f=1", "display_name": "godaygo", "link": "https://stackoverflow.com/users/6793085/godaygo"}, "edited": false, "score": 1, "creation_date": 1513837272, "post_id": 47917013, "comment_id": 82805709, "body": "I did not know about this, and also that this behavior was guaranteed. While I still think that it will be better to leave it as undefined that others would not rely on, and not to see it during code review. Actually, I&#39;m in some confusion because mentally I agree more with numba, but I see practical reasons of numpy-devs. In any case I think this bug magnet form should be avoided."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1513822762, "creation_date": 1513822762, "answer_id": 47917013, "question_id": 47914320, "link": "https://stackoverflow.com/questions/47914320/why-numba-and-numpy-performs-differently-on-inplace-operations/47917013#47917013", "title": "Why numba and numpy performs differently on inplace operations?", "body": "<p>The operation you're doing:</p>\n\n<pre><code>arr -= arr[3]\n</code></pre>\n\n<p>used to be undefined behavior in NumPy. It only became defined very recently, in <a href=\"https://docs.scipy.org/doc/numpy-1.13.0/release.html#ufunc-behavior-for-overlapping-inputs\" rel=\"nofollow noreferrer\">NumPy 1.13.0</a>, released <a href=\"https://github.com/numpy/numpy/releases/tag/v1.13.0\" rel=\"nofollow noreferrer\">June 7th this year</a>. The new, defined behavior always acts as if it makes copies of all inputs, although it tries to avoid actually making copies when it can detect that it doesn't need to.</p>\n\n<p>It looks like Numba does not currently attempt to mimic the new behavior, either because of how new it is, or because of Numba-specific concerns.</p>\n"}], "owner": {"reputation": 1737, "user_id": 6793085, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59da9fd7490b959c0158e3ee56cf1a50?s=128&d=identicon&r=PG&f=1", "display_name": "godaygo", "link": "https://stackoverflow.com/users/6793085/godaygo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "accepted_answer_id": 47917013, "answer_count": 2, "score": 2, "last_activity_date": 1513851757, "creation_date": 1513803871, "last_edit_date": 1513851757, "question_id": 47914320, "link": "https://stackoverflow.com/questions/47914320/why-numba-and-numpy-performs-differently-on-inplace-operations", "title": "Why numba and numpy performs differently on inplace operations?", "body": "<p>Functions decorated with numba <strong><code>njit</code></strong> which is an alias to <strong><code>jit(nopython=True)</code></strong> yields different result from <strong><code>numpy</code></strong> on inplace operations (simple <strong><code>@jit(nopython=False)</code></strong> also gives different results from <code>numpy</code>):</p>\n\n<pre><code>In [1]: import numpy as np\n        from numba import njit\n\n        def npfun(arr):\n            arr -= arr[3]\n\n        @njit\n        def jitfun(arr):\n            arr -= arr[3]\n\n        arr1 = np.ones((6,2))\n        arr2 = arr1.copy()\n\n        npfun(arr1)\n        jitfun(arr2)\n\n        arr1 == arr2\n\nOut[1]: array([[ True,  True],\n               [ True,  True],\n               [ True,  True],\n               [ True,  True],\n               [False, False],\n               [False, False]], dtype=bool)  \n</code></pre>\n\n<p>It looks like <strong><code>numpy</code></strong> evaluates rhs and passes it as a copy, while <strong><code>numba</code></strong> treats rhs as a view. Is there any technical reason to do so?</p>\n\n<p><code>numpy 1.13.3</code>\n<code>numba 0.35</code></p>\n"}, {"tags": ["python", "python-2.7", "tkinter"], "comments": [{"owner": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "edited": false, "score": 0, "creation_date": 1513804265, "post_id": 47914319, "comment_id": 82796706, "body": "You should be defining a method for your button&#39;s <code>command</code> option if there are multiple methods it needs to call, what you&#39;re doing is frowned upon."}, {"owner": {"reputation": 311, "user_id": 8877753, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f89154babad5015a6e872c0550de20a?s=128&d=identicon&r=PG&f=1", "display_name": "Mars", "link": "https://stackoverflow.com/users/8877753/mars"}, "reply_to_user": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "edited": false, "score": 0, "creation_date": 1513804572, "post_id": 47914319, "comment_id": 82796828, "body": "I&#39;ve updated it now. Sorry about that. I&#39;m a real rookie at this python programming. So if my methods are bad, It is because I do not know better. If you can show me a better way. Then by all means, please do =)"}, {"owner": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "edited": false, "score": 0, "creation_date": 1513807239, "post_id": 47914319, "comment_id": 82797940, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1750757/restarting-a-self-updating-python-script\">Restarting a self-updating python script</a>"}, {"owner": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "edited": false, "score": 0, "creation_date": 1513807291, "post_id": 47914319, "comment_id": 82797962, "body": "Why do you want to restart entire script?"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 2, "creation_date": 1513807580, "post_id": 47914319, "comment_id": 82798081, "body": "First thing to do is stop using <code>lambda</code>. It is good for a certain type of problem but this isn&#39;t that type of problem. Create a proper function so that you can more easiliy debug it."}, {"owner": {"reputation": 311, "user_id": 8877753, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f89154babad5015a6e872c0550de20a?s=128&d=identicon&r=PG&f=1", "display_name": "Mars", "link": "https://stackoverflow.com/users/8877753/mars"}, "edited": false, "score": 0, "creation_date": 1513811758, "post_id": 47914319, "comment_id": 82799416, "body": "I need to restart the whole thing cause it gets a TLE code from a website, then breaks that code up into smaller bits, which are then translated into precise current latitude and longitude coordinates of a satellite. Then these long/lat coordinates are projected onto a 3D globe and a 2D map, showing its current location. Then I run those coordinates against a Google Chrome webdriver that opens a live weathermap and google earth with these coordinates and snaps the images based on the long/lat. At the end all of these images are cropped, resized and snuck neatly into a Tkinter."}, {"owner": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "edited": false, "score": 0, "creation_date": 1513857347, "post_id": 47914319, "comment_id": 82816411, "body": "@Kongstad To my knowledge there isn&#39;t any reason to restart the script as opposed to using main function concept still. You can make the script do all those things from starting over, you can destroy, or even update your GUI based on those. Would you think it would be infeasible to do that for some reason?"}], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 8877753, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f89154babad5015a6e872c0550de20a?s=128&d=identicon&r=PG&f=1", "display_name": "Mars", "link": "https://stackoverflow.com/users/8877753/mars"}, "edited": false, "score": 0, "creation_date": 1513811787, "post_id": 47914965, "comment_id": 82799425, "body": "I need to restart the whole thing cause it gets a TLE code from a website, then breaks that code up into smaller bits, which are then translated into precise current latitude and longitude coordinates of a satellite. Then these long/lat coordinates are projected onto a 3D globe and a 2D map, showing its current location. Then I run those coordinates against a Google Chrome webdriver that opens a live weathermap and google earth with these coordinates and snaps the images based on the long/lat. At the end all of these images are cropped, resized and snuck neatly into a Tkinter."}, {"owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "reply_to_user": {"reputation": 311, "user_id": 8877753, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f89154babad5015a6e872c0550de20a?s=128&d=identicon&r=PG&f=1", "display_name": "Mars", "link": "https://stackoverflow.com/users/8877753/mars"}, "edited": false, "score": 0, "creation_date": 1513898893, "post_id": 47914965, "comment_id": 82837422, "body": "You don&#39;t need to duplicate your comments. Comment the answer (that user is notified) and use &#39;@&#39; followed by the nickname of another user you want to notify. The original question poster is allways notified."}, {"owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "reply_to_user": {"reputation": 311, "user_id": 8877753, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f89154babad5015a6e872c0550de20a?s=128&d=identicon&r=PG&f=1", "display_name": "Mars", "link": "https://stackoverflow.com/users/8877753/mars"}, "edited": false, "score": 0, "creation_date": 1513898957, "post_id": 47914965, "comment_id": 82837442, "body": "I understand you need to restart the process, didn&#39;t doubt that. What I was saying is (and I think you already got it by now), that restarting some procedure doesn&#39;t imply that you restart a GUI."}, {"owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "reply_to_user": {"reputation": 311, "user_id": 8877753, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f89154babad5015a6e872c0550de20a?s=128&d=identicon&r=PG&f=1", "display_name": "Mars", "link": "https://stackoverflow.com/users/8877753/mars"}, "edited": false, "score": 1, "creation_date": 1513898974, "post_id": 47914965, "comment_id": 82837447, "body": "@Kongstad: Your GUI (presentation) should be decoupled from your business code (your process). The GUI is just something you get input from and update with results. You might even do everything with a Python script for the command-line, and generate image files without building a GUI. And be able to later build a GUI and glue it with your earlier code, if you wish. So for a GUI to restart a process, that does not imply the restart of the GUI itself."}], "tags": [], "owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "is_accepted": false, "score": 1, "last_activity_date": 1513807244, "creation_date": 1513807244, "answer_id": 47914965, "question_id": 47914319, "link": "https://stackoverflow.com/questions/47914319/tkinter-button-acting-up/47914965#47914965", "title": "Tkinter Button Acting up", "body": "<p>Don't destroy your application root window. If you destroy a window, its child widgets can no longer be used. Create a root window with <code>Tk()</code> and later use that one for calling <code>.mainloop()</code>. Then make the window you want a <code>Toplevel</code> one. You may close that one and recreate it again anytime.</p>\n\n<p>Also I don't understand why you want to run again your whole script. You just want to call code that recreates the Toplevel (maybe that is because you don't have the <code>Toplevel</code>...)</p>\n"}, {"comments": [{"owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "edited": false, "score": 0, "creation_date": 1513899418, "post_id": 47915157, "comment_id": 82837590, "body": "I don&#39;t agree in following OP intention of restart its own whole script. But I will give +1 for your help in suggesting the 2nd link on tkinter program structure."}], "tags": [], "owner": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "is_accepted": true, "score": 1, "last_activity_date": 1513808221, "creation_date": 1513808221, "answer_id": 47915157, "question_id": 47914319, "link": "https://stackoverflow.com/questions/47914319/tkinter-button-acting-up/47915157#47915157", "title": "Tkinter Button Acting up", "body": "<p>Based on <a href=\"https://stackoverflow.com/a/1750797/7032856\">this answer &amp; comments</a> the following script restarts script when button is pressed:</p>\n\n<pre><code>import os\nimport sys\n\nimport tkinter as tk\n\nwindow = tk.Tk()\n\ndef restart():\n    #CloseWindow()\n    RefreshAction()\n\ndef RefreshAction():\n    os.execl(sys.executable, *([sys.executable]+sys.argv))\n\ndef CloseWindow():\n    window.destroy()\n    #quit()\n\nbutton = tk.Frame(window)\nbutton = tk.Button(text='Refresh Data', width=25,command=restart)\nbutton.pack()\nwindow.mainloop()\n</code></pre>\n\n<p>Though on my end it errors as my username has space in it. All in all you should go like below code unless you have global variables or something:</p>\n\n<pre><code>import tkinter as tk\n\ndef restart(root):\n    CloseWindow(root)\n    RefreshAction()\n\ndef RefreshAction():\n    main()\n\ndef CloseWindow(root):\n    root.destroy()\n\ndef main():\n    window = tk.Tk()\n    button = tk.Frame(window)\n    button = tk.Button(text='Refresh Data', width=25,\n                        command= lambda arg=window: restart(arg))\n    button.pack()\n    window.mainloop()\n\nmain()\n</code></pre>\n\n<p>Also you probably want to see <a href=\"https://stackoverflow.com/q/17466561/7032856\">this question &amp; answers</a> about how to structure your tkinter programs. I use a very similar template to that of Bryan's.</p>\n"}], "owner": {"reputation": 311, "user_id": 8877753, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f89154babad5015a6e872c0550de20a?s=128&d=identicon&r=PG&f=1", "display_name": "Mars", "link": "https://stackoverflow.com/users/8877753/mars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 0, "accepted_answer_id": 47915157, "answer_count": 2, "score": 0, "last_activity_date": 1513808221, "creation_date": 1513803866, "last_edit_date": 1513804528, "question_id": 47914319, "link": "https://stackoverflow.com/questions/47914319/tkinter-button-acting-up", "title": "Tkinter Button Acting up", "body": "<p>I have the following python 2.7 snippet code from a much larger script.</p>\n\n<pre><code>def RefreshAction():\n    execfile(\"SatTracker.py\")\n\ndef CloseWindow():\n    window.destroy()\n\nbutton = tk.Frame(window)\nbutton = tk.Button(text='Refresh Data', width=25,command=lambda:[CloseWindow(),RefreshAction()])\nbutton.pack()\nwindow.mainloop()\n</code></pre>\n\n<p>So my entire code produces a tkinter window with images, text and a button.\nNow the button is supposed to trigger the command to close the Tkinter window, then rerun the entire script, which it does just fine. When I click the refresh button again, something weird happens. The window doesn't close anymore, but the script still starts up, with this error though.</p>\n\n<pre><code>Exception in Tkinter callback\nTraceback (most recent call last):\n  File \"C:\\ProgramData\\Anaconda3\\envs\\python2\\lib\\lib-tk\\Tkinter.py\", line 1541, in __call__\n    return self.func(*args)\n  File \"SatTracker.py\", line 294, in &lt;lambda&gt;\n    button = tk.Button(text='Refresh Data', width=25,command=lambda:[CloseWindow(),RefreshAction()])\n  File \"C:/Users/Peter Kongstad/Dropbox/Geoscience/2. Masters/7. Semester/Delphini-1 - Software Part/GUI/Programming/SatTracker.py\", line 291, in CloseWindow\n    window.destroy()\n  File \"C:\\ProgramData\\Anaconda3\\envs\\python2\\lib\\lib-tk\\Tkinter.py\", line 1864, in destroy\n    self.tk.call('destroy', self._w)\nTclError: can't invoke \"destroy\" command:  application has been destroyed\nException in Tkinter callback\nTraceback (most recent call last):\n  File \"C:\\ProgramData\\Anaconda3\\envs\\python2\\lib\\lib-tk\\Tkinter.py\", line 1541, in __call__\n    return self.func(*args)\n  File \"C:/Users/Peter Kongstad/Dropbox/Geoscience/2. Masters/7. Semester/Delphini-1 - Software Part/GUI/Programming/SatTracker.py\", line 294, in &lt;lambda&gt;\n    button = tk.Button(text='Refresh Data', width=25,command=lambda:[CloseWindow(),RefreshAction()])\n  File \"C:/Users/Peter Kongstad/Dropbox/Geoscience/2. Masters/7. Semester/Delphini-1 - Software Part/GUI/Programming/SatTracker.py\", line 288, in RefreshAction\n    execfile(\"SatTracker.py\")\n  File \"SatTracker.py\", line 297, in &lt;module&gt;\n    window.mainloop()\n  File \"C:\\ProgramData\\Anaconda3\\envs\\python2\\lib\\lib-tk\\Tkinter.py\", line 1129, in mainloop\n    self.tk.mainloop(n)\nKeyboardInterrupt\n</code></pre>\n\n<p>Effectively stopping everything.\nNow I do not necessarily need it to close the old tkinter window, as long as when I click the button, the script runs again and starts updating the current window with the new updated data. </p>\n\n<p>So either way to fix this is fine by me. Any suggestions?</p>\n"}, {"tags": ["python", "pip"], "comments": [{"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 1, "creation_date": 1513804772, "post_id": 47914304, "comment_id": 82796909, "body": "If no answer will help, try this as the absolute last resort: <a href=\"https://pypi.python.org/packages/16/d8/bc6316cf98419719bd59c91742194c111b6f2e85abac88e496adefaf7afe/six-1.11.0.tar.gz#md5=d12789f9baf7e9fb2524c0c64f1773f8\" rel=\"nofollow noreferrer\">download <code>six</code> source tar from PyPI</a>, unpack it with <code>tar</code>, go in the unpacked directory and run <code>sudo python3.5 setup.py install</code>. I should warn you, though - you will not be able to uninstall it afterwards and this installation method is highly discouraged, especially combined with <code>sudo</code>. Use only if nothing else helps."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1513804908, "post_id": 47914304, "comment_id": 82796982, "body": "In OEL, a RHEL derivative, a <code>python-six</code> rpm package is available for the reason you already mentioned. After installation of this package, <code>pip</code> and <code>easy_install</code> can then be used to install other modules. What python distribution are you running?"}, {"owner": {"reputation": 594, "user_id": 3854436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfad57b5d5e866b83ac500d1a7ddb638?s=128&d=identicon&r=PG&f=1", "display_name": "James T.", "link": "https://stackoverflow.com/users/3854436/james-t"}, "reply_to_user": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1513805331, "post_id": 47914304, "comment_id": 82797183, "body": "@alvits I think I already had the package <code>python-six</code> installed through <code>apt</code> if that&#39;s what you&#39;re talking about, and that didn&#39;t help. Solution found now anyways."}], "answers": [{"comments": [{"owner": {"reputation": 594, "user_id": 3854436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfad57b5d5e866b83ac500d1a7ddb638?s=128&d=identicon&r=PG&f=1", "display_name": "James T.", "link": "https://stackoverflow.com/users/3854436/james-t"}, "edited": false, "score": 0, "creation_date": 1513804600, "post_id": 47914419, "comment_id": 82796840, "body": "That also resulted in an ImportError"}], "tags": [], "owner": {"reputation": 71, "user_id": 3871815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76a31a88e5a5c7b544a55cf2ae1ce696?s=128&d=identicon&r=PG", "display_name": "baybatu", "link": "https://stackoverflow.com/users/3871815/baybatu"}, "is_accepted": false, "score": 0, "last_activity_date": 1513804349, "creation_date": 1513804349, "answer_id": 47914419, "question_id": 47914304, "link": "https://stackoverflow.com/questions/47914304/i-cant-install-six-because-pip-and-easy-install-wont-work-without-six/47914419#47914419", "title": "I can&#39;t install six because pip and easy_install won&#39;t work without six", "body": "<p>Can you try to run first:</p>\n\n<pre><code>[sudo] pip3.5 install --upgrade setuptools\n</code></pre>\n\n<p>before</p>\n\n<pre><code>sudo pip3.5 install six\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 594, "user_id": 3854436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfad57b5d5e866b83ac500d1a7ddb638?s=128&d=identicon&r=PG&f=1", "display_name": "James T.", "link": "https://stackoverflow.com/users/3854436/james-t"}, "edited": false, "score": 0, "creation_date": 1513805229, "post_id": 47914541, "comment_id": 82797129, "body": "Manually downloading and unpacking <code>six</code> as @hoefling mentioned is probably better in-case there&#39;s changes from py3.4 to py3.5 of the module, and it should be installed in the correct location(s) since it&#39;s installed through the setup.py."}], "tags": [], "owner": {"reputation": 594, "user_id": 3854436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfad57b5d5e866b83ac500d1a7ddb638?s=128&d=identicon&r=PG&f=1", "display_name": "James T.", "link": "https://stackoverflow.com/users/3854436/james-t"}, "is_accepted": true, "score": 0, "last_activity_date": 1513804988, "creation_date": 1513804988, "answer_id": 47914541, "question_id": 47914304, "link": "https://stackoverflow.com/questions/47914304/i-cant-install-six-because-pip-and-easy-install-wont-work-without-six/47914541#47914541", "title": "I can&#39;t install six because pip and easy_install won&#39;t work without six", "body": "<p>answer borrowed from <a href=\"https://stackoverflow.com/a/32385896/3854436\">https://stackoverflow.com/a/32385896/3854436</a></p>\n\n<pre><code>$ cd /usr/local/lib/python3.4/dist-packages    \n$ sudo cp six.py six-1.11.0.dist-info/ ../../python3.5/dist-packages/ -r\n</code></pre>\n"}], "owner": {"reputation": 594, "user_id": 3854436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfad57b5d5e866b83ac500d1a7ddb638?s=128&d=identicon&r=PG&f=1", "display_name": "James T.", "link": "https://stackoverflow.com/users/3854436/james-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 924, "favorite_count": 0, "accepted_answer_id": 47914541, "answer_count": 2, "score": 1, "last_activity_date": 1513804988, "creation_date": 1513803813, "question_id": 47914304, "link": "https://stackoverflow.com/questions/47914304/i-cant-install-six-because-pip-and-easy-install-wont-work-without-six", "title": "I can&#39;t install six because pip and easy_install won&#39;t work without six", "body": "<p>I'm on Linux Mint and have at least 3 versions of python (2, 3.4, 3.5).</p>\n\n<p>Trying to use <code>pip3.5</code>, I get:</p>\n\n<pre><code>Import Error: No module named six \n</code></pre>\n\n<p>But, trying to install six via any of the following give the same error:</p>\n\n<pre><code>sudo easy_install-3.5 six\nsudo python3.5 -m easy_install six\nsudo pip3.5 install six\n</code></pre>\n\n<p>It feels like this is circular reasoning since I can't use pip or easy_install since I don't have six, but I can't install six since pip or easy_install won't work without it.</p>\n"}, {"tags": ["python", "pandas", "sorting", "dataframe"], "comments": [{"owner": {"reputation": 3890, "user_id": 7517724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63c21233470c84bd8e36b40bf9fe8103?s=128&d=identicon&r=PG", "display_name": "Craig", "link": "https://stackoverflow.com/users/7517724/craig"}, "edited": false, "score": 1, "creation_date": 1513803696, "post_id": 47914274, "comment_id": 82796468, "body": "Please paste your code directly into the question, not as images. You can use the {} button to format it correctly. You should do this for the output too."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 2, "creation_date": 1513803707, "post_id": 47914274, "comment_id": 82796474, "body": "It&#39;s a column of strings, that&#39;s why."}], "answers": [{"comments": [{"owner": {"reputation": 411, "user_id": 7267141, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5a23c96f7b09ad01dc8ffd622b5cf13e?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Bajger", "link": "https://stackoverflow.com/users/7267141/adam-bajger"}, "edited": false, "score": 0, "creation_date": 1594912423, "post_id": 47914310, "comment_id": 111299133, "body": "What if I need to actually handle string values and keep them as such? For example strings &quot;1%&quot;, &quot;2%&quot;, &quot;10%&quot;, &quot;25%&quot;, ...? Is there a way of sorting the values by a custom comparator without having to transform the data back and forth?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 411, "user_id": 7267141, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5a23c96f7b09ad01dc8ffd622b5cf13e?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Bajger", "link": "https://stackoverflow.com/users/7267141/adam-bajger"}, "edited": false, "score": 0, "creation_date": 1594913148, "post_id": 47914310, "comment_id": 111299558, "body": "@AdamBajger You can lookup &quot;pandas natural sorting column&quot; online."}, {"owner": {"reputation": 411, "user_id": 7267141, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5a23c96f7b09ad01dc8ffd622b5cf13e?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Bajger", "link": "https://stackoverflow.com/users/7267141/adam-bajger"}, "edited": false, "score": 0, "creation_date": 1594914092, "post_id": 47914310, "comment_id": 111300083, "body": "@cs95 I just found a comprehensive answer <a href=\"https://stackoverflow.com/questions/13838405/custom-sorting-in-pandas-dataframe/54301218#54301218\">here</a>, thanks for natsorted, though, helped to."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 411, "user_id": 7267141, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5a23c96f7b09ad01dc8ffd622b5cf13e?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Bajger", "link": "https://stackoverflow.com/users/7267141/adam-bajger"}, "edited": false, "score": 0, "creation_date": 1594919065, "post_id": 47914310, "comment_id": 111302678, "body": "@AdamBajger oh awesome, I think I know the chap who owns that answer..."}, {"owner": {"reputation": 462, "user_id": 6166911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DybA9.jpg?s=128&g=1", "display_name": "Davidson Lima", "link": "https://stackoverflow.com/users/6166911/davidson-lima"}, "edited": false, "score": 0, "creation_date": 1615055981, "post_id": 47914310, "comment_id": 117575859, "body": "Saved my day, man! The <code>.astype(float)</code> worked."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 22, "last_activity_date": 1561314128, "last_edit_date": 1561314128, "creation_date": 1513803837, "answer_id": 47914310, "question_id": 47914274, "link": "https://stackoverflow.com/questions/47914274/pandas-sort-values-does-not-sort-numbers-correctly/47914310#47914310", "title": "Pandas sort_values does not sort numbers correctly", "body": "<p>For whatever reason, you seem to be working with a column of strings, and <code>sort_values</code> is returning you a lexsorted result.</p>\n\n<p>Here's an example.</p>\n\n<pre><code>df = pd.DataFrame({\"Col\": ['1', '2', '3', '10', '20', '19']})\ndf\n\n  Col\n0   1\n1   2\n2   3\n3  10\n4  20\n5  19\n\ndf.sort_values('Col')\n\n  Col\n0   1\n3  10\n5  19\n1   2\n4  20\n2   3\n</code></pre>\n\n<p>The remedy is to convert it to numeric, either using <code>.astype</code> or <code>pd.to_numeric</code>.</p>\n\n<pre><code>df.Col = df.Col.astype(float)\n</code></pre>\n\n<p>Or,</p>\n\n<pre><code>df.Col = pd.to_numeric(df.Col, errors='coerce')\n</code></pre>\n\n\n\n<pre><code>df.sort_values('Col')\n\n   Col\n0    1\n1    2\n2    3\n3   10\n5   19\n4   20\n</code></pre>\n\n<p>The only difference b/w <code>astype</code> and <code>pd.to_numeric</code> is that the latter is more robust at handling non-numeric strings (they're coerced to <code>NaN</code>), and will attempt to preserve integers if a coercion to float is not necessary (as is seen in this case).</p>\n"}], "owner": {"reputation": 125, "user_id": 5241317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c27dcfd1fe3fb50a8497f4ad51cf1eca?s=128&d=identicon&r=PG&f=1", "display_name": "Newkid", "link": "https://stackoverflow.com/users/5241317/newkid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15047, "favorite_count": 5, "accepted_answer_id": 47914310, "answer_count": 1, "score": 10, "last_activity_date": 1561314331, "creation_date": 1513803602, "last_edit_date": 1561314331, "question_id": 47914274, "link": "https://stackoverflow.com/questions/47914274/pandas-sort-values-does-not-sort-numbers-correctly", "title": "Pandas sort_values does not sort numbers correctly", "body": "<p>I'm new to pandas and working with tabular data in a programming environment. I have sorted a dataframe by a specific column but the answer that panda spits out is not exactly correct.</p>\n\n<p>Here is the code I have used:</p>\n\n<pre><code>league_dataframe.sort_values('overall_league_position')\n</code></pre>\n\n<p>The result that the sort method yields values in column 'overall league position' are not sorted in ascending or order which is the default for the method.</p>\n\n<p><a href=\"https://i.stack.imgur.com/19R4Z.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/19R4Z.png\" alt=\"enter image description here\"></a></p>\n\n<p>What am I doing wrong? Thanks for your patience!</p>\n"}, {"tags": ["python", "docker"], "comments": [{"owner": {"reputation": 19477, "user_id": 684908, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/18c7c8d0b7809e307991bfacc16470d0?s=128&d=identicon&r=PG", "display_name": "Andy Shinn", "link": "https://stackoverflow.com/users/684908/andy-shinn"}, "edited": false, "score": 1, "creation_date": 1513823962, "post_id": 47914261, "comment_id": 82802302, "body": "You are overwriting the <code>gdax_cli.egg-info</code> folder. The answer to this probably depends on your use case. Are you trying to use the same image as the development and eventual deployment image? Or are you only looking for a local development environment to keep Python off of the host? Maybe you could amend your question to elaborate on your goals so I could better create an answer."}, {"owner": {"reputation": 3272, "user_id": 3990806, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ad3e7b2553397335b7aab5fcebbd343b?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/3990806/adam"}, "reply_to_user": {"reputation": 19477, "user_id": 684908, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/18c7c8d0b7809e307991bfacc16470d0?s=128&d=identicon&r=PG", "display_name": "Andy Shinn", "link": "https://stackoverflow.com/users/684908/andy-shinn"}, "edited": false, "score": 0, "creation_date": 1513837441, "post_id": 47914261, "comment_id": 82805764, "body": "Ahh I see. I was using it in my case as a development environment by binding the volume but it could very easily be a deployed image. If you post the answer I will mark it correct. I mention that I am using it as a development environment in the parenthesis in the opening sentence."}, {"owner": {"reputation": 1768, "user_id": 2889970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Od4jO.jpg?s=128&g=1", "display_name": "timmwagener", "link": "https://stackoverflow.com/users/2889970/timmwagener"}, "edited": false, "score": 0, "creation_date": 1525956006, "post_id": 47914261, "comment_id": 87563098, "body": "@Adam I&#39;m running into the same issue for the exact same use case. Did you come up with any workaround for this (copying the <code>.egg-info</code> folder out of the container into the host...!?), or did you resort to calling the CLI via module directly during development?"}], "answers": [{"tags": [], "owner": {"reputation": 1768, "user_id": 2889970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Od4jO.jpg?s=128&g=1", "display_name": "timmwagener", "link": "https://stackoverflow.com/users/2889970/timmwagener"}, "is_accepted": false, "score": 1, "last_activity_date": 1526120680, "last_edit_date": 1526120680, "creation_date": 1525957619, "answer_id": 50273660, "question_id": 47914261, "link": "https://stackoverflow.com/questions/47914261/docker-volume-bind-breaks-python-script-cli-entry-point/50273660#50273660", "title": "Docker volume bind breaks python script CLI entry_point", "body": "<p>For anybody interested in calling the Python <code>entry_points</code> console scripts via <code>docker-compose run</code> during development. Copying the <code>.egg-info</code> folder into the mounted host directory from the running container one time works for me.</p>\n\n<p><em>Copy the <code>.egg-info</code> directory to host from running container. Turn mounting off beforehand so the <code>.egg-info</code> directory is not overriden.</em></p>\n\n<pre><code>sudo docker cp &lt;container id&gt;:/path/to/package/in/container/package.egg-info /path/to/mounted/package/on/host/package.egg-info\n</code></pre>\n\n<p><em>Re-enable mounting, the needed <code>.egg-info</code> folder is now present so the installed entry_points should work and you can run commands like:</em></p>\n\n<pre><code>sudo docker-compose run &lt;service name&gt; &lt;entry_point console script name&gt; [OPT] [ARG]\n</code></pre>\n\n<p>For this to work, the Python package needed to be installed in development mode in the image, like with <code>RUN pip install -e /path/to/package/</code>, because otherwise the <code>.egg-info</code> file will not be in the symlinked source code directory, I guess.</p>\n\n<p><em>Of course, the alternative, like @Adam mentions, is to always call the <code>CLI</code> scripts directly like:</em></p>\n\n<pre><code>sudo docker-compose run &lt;service name&gt; python /path/to/package/cli.py [OPT] [ARG]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2400, "user_id": 425050, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d3f6894c5dbedb1e0e4dd94fe6b9b7d?s=128&d=identicon&r=PG", "display_name": "mafrosis", "link": "https://stackoverflow.com/users/425050/mafrosis"}, "is_accepted": false, "score": 1, "last_activity_date": 1574108997, "creation_date": 1574108997, "answer_id": 58922442, "question_id": 47914261, "link": "https://stackoverflow.com/questions/47914261/docker-volume-bind-breaks-python-script-cli-entry-point/58922442#58922442", "title": "Docker volume bind breaks python script CLI entry_point", "body": "<p>When installing pip as editable in the current directory, the <code>&lt;package&gt;.egg-info</code> directory needs to be present for python to find the installed package.</p>\n\n<p>One can \u201cwhitelist\u201d directories from being overwritten by a <code>docker-compose.yml</code> mount point, like so:</p>\n\n<pre><code>services:\n  myapp:\n    image: mafrosis/myapp:dev\n    build:\n      context: .\n    volumes:\n      - ./:/app\n      - /app/.git\n      - /app/myapp.egg-info\n</code></pre>\n\n<p>In this example, both the <code>.git</code> and <code>myapp.egg-info</code> directories will be present when the container starts.</p>\n"}], "owner": {"reputation": 3272, "user_id": 3990806, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ad3e7b2553397335b7aab5fcebbd343b?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/3990806/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 582, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1574108997, "creation_date": 1513803503, "question_id": 47914261, "link": "https://stackoverflow.com/questions/47914261/docker-volume-bind-breaks-python-script-cli-entry-point", "title": "Docker volume bind breaks python script CLI entry_point", "body": "<p>Alright so I have a fairly basic python <code>click</code> CLI application that when ran with a bound volume in a container (live dev on files) appears to break the <code>entry_point</code> I have in <code>setup.py</code></p>\n\n<p>Running either of the following commands</p>\n\n<pre><code>$ docker run -it -v $(pwd):/opt/app gdax\n$ docker run -it --mount src=$(pwd),target=/opt/app,type=bind gdax\n</code></pre>\n\n<p>I get the following</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/usr/local/bin/gdax\", line 6, in &lt;module&gt;\n    from pkg_resources import load_entry_point\n  File \"/usr/local/lib/python3.6/site-packages/pkg_resources/__init__.py\", line 3144, in &lt;module&gt;\n    @_call_aside\n  File \"/usr/local/lib/python3.6/site-packages/pkg_resources/__init__.py\", line 3128, in _call_aside\n    f(*args, **kwargs)\n  File \"/usr/local/lib/python3.6/site-packages/pkg_resources/__init__.py\", line 3157, in _initialize_master_working_set\n    working_set = WorkingSet._build_master()\n  File \"/usr/local/lib/python3.6/site-packages/pkg_resources/__init__.py\", line 666, in _build_master\n    ws.require(__requires__)\n  File \"/usr/local/lib/python3.6/site-packages/pkg_resources/__init__.py\", line 984, in require\n    needed = self.resolve(parse_requirements(requirements))\n  File \"/usr/local/lib/python3.6/site-packages/pkg_resources/__init__.py\", line 870, in resolve\n    raise DistributionNotFound(req, requirers)\npkg_resources.DistributionNotFound: The 'gdax-cli' distribution was not found and is required by the application\n</code></pre>\n\n<h1>Dockerfile</h1>\n\n<pre><code>FROM python:3.6\n\nRUN mkdir /opt/app\nCOPY . /opt/app\n\n\nWORKDIR /opt/app\n\nRUN pip install --editable .\n\nCMD [\"gdax\", \"--help\"]\n</code></pre>\n\n<h1>setup.py</h1>\n\n<pre><code>from setuptools import setup\n\n\nsetup(\n    name='gdax-cli',\n    version='0.1',\n    py_modules=['app'],\n    install_requires=[\n        'click==6.7',\n        'gdax==1.0.6'\n    ],\n    entry_points='''\n        [console_scripts]\n        gdax=app:cli\n    ''',\n)\n</code></pre>\n\n<h1>/usr/local/bin/gdax &lt;- on container</h1>\n\n<pre><code>#!/usr/local/bin/python\n# EASY-INSTALL-ENTRY-SCRIPT: 'gdax-cli','console_scripts','gdax'\n__requires__ = 'gdax-cli'\nimport re\nimport sys\nfrom pkg_resources import load_entry_point\n\nif __name__ == '__main__':\n    sys.argv[0] = re.sub(r'(-script\\.pyw?|\\.exe)?$', '', sys.argv[0])\n    sys.exit(\n        load_entry_point('gdax-cli', 'console_scripts', 'gdax')()\n    )\n</code></pre>\n\n<p>If I don't bind the volume I can execute the script just fine but I lose the ability to edit the files on the host machine. I'm fairly confident this has something to do with how binding \"overwrites\" the files and will break <code>/usr/local/bin/gdax</code> ability to load the files which is placed there by <code>setuptools</code>. Is there anyway to circumvent this (outside of calling <code>python app.py</code> in the container)?</p>\n"}, {"tags": ["python", "audio", "ffmpeg"], "comments": [{"owner": {"reputation": 25733, "user_id": 4663670, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w2HBf.png?s=128&g=1", "display_name": "aergistal", "link": "https://stackoverflow.com/users/4663670/aergistal"}, "edited": false, "score": 2, "creation_date": 1513806635, "post_id": 47914237, "comment_id": 82797705, "body": "set the correct working directory in <code>check_call</code> (<code>cwd=</code>) or use an absolute path for the output in the <code>ffmpeg</code> command like you did for the input. Add <code>-y</code> to the command to overwrite an existing output without prompting."}, {"owner": {"reputation": 463, "user_id": 9034823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3y2sd.jpg?s=128&g=1", "display_name": "NBlaine", "link": "https://stackoverflow.com/users/9034823/nblaine"}, "reply_to_user": {"reputation": 25733, "user_id": 4663670, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w2HBf.png?s=128&g=1", "display_name": "aergistal", "link": "https://stackoverflow.com/users/4663670/aergistal"}, "edited": false, "score": 0, "creation_date": 1513807123, "post_id": 47914237, "comment_id": 82797900, "body": "Worked perfectly, thank you so much. My command is now:                &#39;ffmpeg -y -i C:\\Users\\Nathan\\Desktop\\MeetingRecorderWebAPP\\media\\recordin&zwnj;&#8203;gs\\upload_test_2.MOV -ab 160k -ac 2 -ar 44100 -vn C:\\Users\\Nathan\\Desktop\\MeetingRecorderWebAPP\\media\\recordin&zwnj;&#8203;gs\\upload_test_2.wav&zwnj;&#8203;&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 85974, "user_id": 1109017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PX561.png?s=128&g=1", "display_name": "llogan", "link": "https://stackoverflow.com/users/1109017/llogan"}, "edited": false, "score": 2, "creation_date": 1513820758, "post_id": 47914998, "comment_id": 82801610, "body": "You can remove <code>-ab 160k</code> as it won&#39;t do anything for wav output."}], "tags": [], "owner": {"reputation": 463, "user_id": 9034823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3y2sd.jpg?s=128&g=1", "display_name": "NBlaine", "link": "https://stackoverflow.com/users/9034823/nblaine"}, "is_accepted": false, "score": 1, "last_activity_date": 1513807429, "creation_date": 1513807429, "answer_id": 47914998, "question_id": 47914237, "link": "https://stackoverflow.com/questions/47914237/ffmpeg-command-from-python-3-5-does-not-actually-create-audio-file/47914998#47914998", "title": "FFMPEG command from Python 3.5 does not actually create audio file", "body": "<p>The correct answer as suggested by <a href=\"https://stackoverflow.com/users/4663670/aergistal\">aergistal</a>. I needed to set the absolute path for the output file!</p>\n\n<p>Changed command </p>\n\n<pre><code>ffmpeg -i C:\\Users\\Nathan\\Desktop\\MeetingRecorderWebAPP\\media\\recordings\\upload_sample.MOV -ab 160k -ac 2 -ar 44100 -vn upload_sample.wav\n</code></pre>\n\n<p>To new command</p>\n\n<pre><code>ffmpeg -y -i C:\\Users\\Nathan\\Desktop\\MeetingRecorderWebAPP\\media\\recordings\\upload_test_2.MOV -ab 160k -ac 2 -ar 44100 -vn C:\\Users\\Nathan\\Desktop\\MeetingRecorderWebAPP\\media\\recordings\\upload_test_2.wav\n</code></pre>\n"}], "owner": {"reputation": 463, "user_id": 9034823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3y2sd.jpg?s=128&g=1", "display_name": "NBlaine", "link": "https://stackoverflow.com/users/9034823/nblaine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1274, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1513807429, "creation_date": 1513803354, "question_id": 47914237, "link": "https://stackoverflow.com/questions/47914237/ffmpeg-command-from-python-3-5-does-not-actually-create-audio-file", "title": "FFMPEG command from Python 3.5 does not actually create audio file", "body": "<p>I have a Django web application that accepts user uploaded videos/audio and saves them into a folder '<strong>../WebAppDirectory/media/recordings</strong>'.</p>\n\n<p>I am then using a speech to text API to get a rough transcription of the audio. This is working fine for .wav and .mp4 files, but the web app also accepts videos (.MOV) that I would like to first convert to .wav, then pass off to the API.</p>\n\n<p>Using ffmpeg from my command line like this </p>\n\n<pre><code>ffmpeg -i C:\\Users\\Nathan\\Desktop\\MeetingRecorderWebAPP\\media\\recordings\\upload_sample.MOV -ab 160k -ac 2 -ar 44100 -vn upload_sample.wav\n</code></pre>\n\n<p>Correctly creates the .wav file from the original .MOV. </p>\n\n<p>However, when I run this from python with</p>\n\n<pre><code>subprocess.check_call(command, shell=True)\n</code></pre>\n\n<p>ffmpeg responds with </p>\n\n<blockquote>\n  <p>File 'upload_sample.wav' already exists. Overwrite ? [y/N]</p>\n</blockquote>\n\n<p>While Python tells me</p>\n\n<blockquote>\n  <p>FileNotFoundError: [Errno 2] No such file or directory: 'C:\\Users\\Nathan\\Desktop\\MeetingRecorderWebAPP\\media\\recordings\\upload_sample.wav'</p>\n</blockquote>\n\n<p>It is also worth noting that I do not see a 'upload_sample.wav' file in the <strong>media/recordings/</strong> directory. </p>\n\n<p>This leads me to believe that maybe Python and ffmpeg are looking in different folders, but I am not sure where I am going wrong. When I print the <strong>command</strong> from the subprocess.check_call and copy/paste it into cmd, the file is created as expected.</p>\n\n<p>Hoping someone with some experience with ffmpeg/Python subprocess can help shed some light! Here are the files I am working with:</p>\n\n<p><strong>Folder Structure</strong></p>\n\n<pre><code>DjangoWebApp\n|---media\n|---|---imgs\n|---|---recordings\n|---|---|---upload_sample.MOV\n|---uploaded_audio_to_text.py\n</code></pre>\n\n<p><strong>uploaded_audio_to_text.py</strong></p>\n\n<pre><code>import speech_recognition as sr\nfrom os import path\nimport os\nimport subprocess\n\n\ndef speech_to_text(file_name):\n    AUDIO_FILE = path.join(path.dirname(path.realpath(__file__)), 'media','recordings', file_name)\n    print(\"Looking at path: \",AUDIO_FILE)\n    # get extension\n    AUDIO_FILE_EXT = os.path.splitext(AUDIO_FILE)[1]\n\n    if(AUDIO_FILE_EXT == '.MOV'):\n        print(\"File is not .wav: \", AUDIO_FILE_EXT, \"found. Converting...\")\n        # We will use subprocess and ffmpeg to convert this .MOV file to .wav, so we can send to API\n        temp_wav = os.path.splitext(file_name)[0] + '.wav'\n        print(\"New audio file will be: \", temp_wav)\n        # build CMD ffmpeg command\n        command = \"ffmpeg -i \"\n        command += AUDIO_FILE\n        command += \" -ab 160k -ac 2 -ar 44100 -vn \"\n        command += temp_wav\n\n        print(\"Attempting to run this command: \\n\",command)\n        print(subprocess.check_call(command, shell=True))\n        print(\"Past Subprocess.call\")\n        AUDIO_FILE = path.join(path.dirname(path.realpath(__file__)), 'media','recordings', temp_wav)\n        print(\"AUDIO_FILE now set to: \", AUDIO_FILE)\n\n    else:\n        # continue with what we are doing\n        pass\n\n\n    r = sr.Recognizer()\n    with sr.AudioFile(AUDIO_FILE) as source:\n        audio = r.record(source)  # read the entire audio file\n        text_transcription = \"Sentinel\"\n        # recognize speech using Microsoft Bing Voice Recognition\n        BING_KEY = \"MY_KEY_:)\"\n        try:\n            text_transcription = r.recognize_bing(audio, key=BING_KEY)\n        except sr.UnknownValueError:\n            print(\"Microsoft Bing Voice Recognition could not understand audio\")\n        except sr.RequestError as e:\n            print(\"Could not request results from Microsoft Bing Voice Recognition service; {0}\".format(e))\n\n    return text_transcription\n\n\n#my tests\nmy_relative_file_path = \"upload_sample.MOV\"\nprint(speech_to_text(my_relative_file_path))\n</code></pre>\n\n<p><strong>Console output (traceback and my print()'s)</strong></p>\n\n<pre><code>Looking at path:  C:\\Users\\Nathan\\Desktop\\MeetingRecorderWebAPP\\media\\recordings\\upload_sample.MOV \nFile is not .wav:  .MOV found. Converting... \nNew audio file will be:  upload_sample.wav Attempting to run this command:\n ffmpeg -i C:\\Users\\Nathan\\Desktop\\MeetingRecorderWebAPP\\media\\recordings\\upload_sample.MOV -ab 160k -ac 2 -ar 44100 -vn upload_sample.wav \nffmpeg version git-2017-12-18-74f408c Copyright (c) 2000-2017 the FFmpeg developers   built with gcc 7.2.0 (GCC)   \n----REMOVED SOME FFMPEG OUTPUT FOR BREVITY----\nFile 'upload_sample.wav' already exists. Overwrite ? [y/N] y \nStream mapping:   Stream #0:1 -&gt; #0:0 (aac (native) -&gt; pcm_s16le (native)) Press [q] to stop, [?] for help Output #0, wav, to 'upload_sample.wav':   Metadata:\n    major_brand     : qt  \n    minor_version   : 0\n    compatible_brands: qt  \n    com.apple.quicktime.creationdate: 2017-12-19T16:06:10-0500\n    com.apple.quicktime.make: Apple\n    com.apple.quicktime.model: iPhone 6\n    com.apple.quicktime.software: 10.3.3\n    ISFT            : Lavf58.3.100\n    Stream #0:0(und): Audio: pcm_s16le ([1][0][0][0] / 0x0001), 44100 Hz, stereo, s16, 1411 kb/s (default)\n    Metadata:\n      creation_time   : 2017-12-19T21:06:11.000000Z\n      handler_name    : Core Media Data Handler\n      encoder         : Lavc58.8.100 pcm_s16le size=    1036kB time=00:00:06.01 bitrate=1411.3kbits/s speed=N/A     video:0kB audio:1036kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.007352% \n0 \nTraceback (most recent call last): Past Subprocess.call   \nFile \"C:\\Users\\Nathan\\Desktop\\MeetingRecorderWebAPP\\uploaded_audio_to_text.py\", line 53, in &lt;module&gt; \nAUDIO_FILE now set to:  C:\\Users\\Nathan\\Desktop\\MeetingRecorderWebAPP\\media\\recordings\\upload_sample.wav\n    print(speech_to_text(my_relative_file_path))   \nFile \"C:\\Users\\Nathan\\Desktop\\MeetingRecorderWebAPP\\uploaded_audio_to_text.py\", line 36, in speech_to_text\n    with sr.AudioFile(AUDIO_FILE) as source:   \nFile \"C:\\Users\\Nathan\\AppData\\Local\\Programs\\Python\\Python36-32\\lib\\site-packages\\speech_recognition\\__init__.py\", line 203, in __enter__\n    self.audio_reader = wave.open(self.filename_or_fileobject, \"rb\")   \nFile \"C:\\Users\\Nathan\\AppData\\Local\\Programs\\Python\\Python36-32\\lib\\wave.py\", line 499, in open\n    return Wave_read(f)   \nFile \"C:\\Users\\Nathan\\AppData\\Local\\Programs\\Python\\Python36-32\\lib\\wave.py\", line 159, in __init__\n    f = builtins.open(f, 'rb') \nFileNotFoundError: [Errno 2] No such file or directory: 'C:\\\\Users\\\\Nathan\\\\Desktop\\\\MeetingRecorderWebAPP\\\\media\\\\recordings\\\\upload_sample.wav'\n\nProcess finished with exit code 1\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "list", "sorting", "dictionary"], "comments": [{"owner": {"reputation": 2168, "user_id": 8709791, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P8fHX.jpg?s=128&g=1", "display_name": "srikavineehari", "link": "https://stackoverflow.com/users/8709791/srikavineehari"}, "edited": false, "score": 0, "creation_date": 1513804834, "post_id": 47914234, "comment_id": 82796940, "body": "The key/value pairs do not make a lot of sense: <code>&#39;number&#39;: &#39;Male&#39;</code>, <code>&#39;type&#39;: &#39;Gender&#39;</code>, <code>&#39;country&#39;: None</code>, <code>&#39;location&#39;: &#39;USA&#39;</code>."}, {"owner": {"reputation": 3186, "user_id": 4871483, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-HMwbAOtRjY4/AAAAAAAAAAI/AAAAAAAABQk/jXK1QQ0bfqw/photo.jpg?sz=128", "display_name": "ytpillai", "link": "https://stackoverflow.com/users/4871483/ytpillai"}, "edited": false, "score": 0, "creation_date": 1513805440, "post_id": 47914234, "comment_id": 82797237, "body": "Possibly random data he made on the spot? I&#39;d suggest <a href=\"http://www.mockaroo.com/\" rel=\"nofollow noreferrer\">Mockaroo</a> for that kind of thing."}, {"owner": {"reputation": 1056, "user_id": 5847412, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e00cfe1938337ca55b7496893faaa0f4?s=128&d=identicon&r=PG&f=1", "display_name": "unseen_damage", "link": "https://stackoverflow.com/users/5847412/unseen-damage"}, "reply_to_user": {"reputation": 2168, "user_id": 8709791, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P8fHX.jpg?s=128&g=1", "display_name": "srikavineehari", "link": "https://stackoverflow.com/users/8709791/srikavineehari"}, "edited": false, "score": 0, "creation_date": 1513805634, "post_id": 47914234, "comment_id": 82797320, "body": "@srig, it was contrived data I made up. Ultimately was just for example purpose"}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1513807210, "post_id": 47914234, "comment_id": 82797928, "body": "Why are you trying to sort them when you know that the only difference between them is that the lists do not follow an order?"}, {"owner": {"reputation": 1056, "user_id": 5847412, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e00cfe1938337ca55b7496893faaa0f4?s=128&d=identicon&r=PG&f=1", "display_name": "unseen_damage", "link": "https://stackoverflow.com/users/5847412/unseen-damage"}, "edited": false, "score": 0, "creation_date": 1513807430, "post_id": 47914234, "comment_id": 82798019, "body": "I want to compare the two data sets. If it was not obvious, the data above is contrived, but the real data I am comparing has a similar structure of nested data. I am comparing a known set of data to an unknown set of data from an API. Sometimes there will be a match, sometimes there will be different data. I need to know when that is."}], "answers": [{"comments": [{"owner": {"reputation": 1056, "user_id": 5847412, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e00cfe1938337ca55b7496893faaa0f4?s=128&d=identicon&r=PG&f=1", "display_name": "unseen_damage", "link": "https://stackoverflow.com/users/5847412/unseen-damage"}, "edited": false, "score": 0, "creation_date": 1513804339, "post_id": 47914372, "comment_id": 82796737, "body": "I don&#39;t have all lists and dictionaries in the top level dictionary. I do have some stand alone string values as well, something like <code>&#39;name&#39;:&#39;foobar&#39;</code>. Some of these key/val pairs have <code>None</code> values such as  <code>&#39;name&#39;: None</code>"}, {"owner": {"reputation": 3186, "user_id": 4871483, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-HMwbAOtRjY4/AAAAAAAAAAI/AAAAAAAABQk/jXK1QQ0bfqw/photo.jpg?sz=128", "display_name": "ytpillai", "link": "https://stackoverflow.com/users/4871483/ytpillai"}, "reply_to_user": {"reputation": 1056, "user_id": 5847412, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e00cfe1938337ca55b7496893faaa0f4?s=128&d=identicon&r=PG&f=1", "display_name": "unseen_damage", "link": "https://stackoverflow.com/users/5847412/unseen-damage"}, "edited": false, "score": 0, "creation_date": 1513804541, "post_id": 47914372, "comment_id": 82796814, "body": "That&#39;s why I added the last <code>elif</code> statement for."}, {"owner": {"reputation": 3186, "user_id": 4871483, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-HMwbAOtRjY4/AAAAAAAAAAI/AAAAAAAABQk/jXK1QQ0bfqw/photo.jpg?sz=128", "display_name": "ytpillai", "link": "https://stackoverflow.com/users/4871483/ytpillai"}, "reply_to_user": {"reputation": 1056, "user_id": 5847412, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e00cfe1938337ca55b7496893faaa0f4?s=128&d=identicon&r=PG&f=1", "display_name": "unseen_damage", "link": "https://stackoverflow.com/users/5847412/unseen-damage"}, "edited": false, "score": 0, "creation_date": 1513804595, "post_id": 47914372, "comment_id": 82796837, "body": "Also, do you have a primary key for dicts within <code>addresses</code>, <code>id</code> or anything else with dicts within lists?"}, {"owner": {"reputation": 1056, "user_id": 5847412, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e00cfe1938337ca55b7496893faaa0f4?s=128&d=identicon&r=PG&f=1", "display_name": "unseen_damage", "link": "https://stackoverflow.com/users/5847412/unseen-damage"}, "edited": false, "score": 0, "creation_date": 1513804814, "post_id": 47914372, "comment_id": 82796932, "body": "No primary key. Just the data itself"}, {"owner": {"reputation": 3186, "user_id": 4871483, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-HMwbAOtRjY4/AAAAAAAAAAI/AAAAAAAABQk/jXK1QQ0bfqw/photo.jpg?sz=128", "display_name": "ytpillai", "link": "https://stackoverflow.com/users/4871483/ytpillai"}, "reply_to_user": {"reputation": 1056, "user_id": 5847412, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e00cfe1938337ca55b7496893faaa0f4?s=128&d=identicon&r=PG&f=1", "display_name": "unseen_damage", "link": "https://stackoverflow.com/users/5847412/unseen-damage"}, "edited": false, "score": 0, "creation_date": 1513805355, "post_id": 47914372, "comment_id": 82797190, "body": "Then this solution should work. Also, please replace id key in dict_b with ids to match dict_a"}], "tags": [], "owner": {"reputation": 3186, "user_id": 4871483, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-HMwbAOtRjY4/AAAAAAAAAAI/AAAAAAAABQk/jXK1QQ0bfqw/photo.jpg?sz=128", "display_name": "ytpillai", "link": "https://stackoverflow.com/users/4871483/ytpillai"}, "is_accepted": false, "score": 1, "last_activity_date": 1513806462, "last_edit_date": 1513806462, "creation_date": 1513804125, "answer_id": 47914372, "question_id": 47914234, "link": "https://stackoverflow.com/questions/47914234/python-sort-and-compare-nested-dictionaries/47914372#47914372", "title": "Python Sort and Compare Nested Dictionaries", "body": "<p>So if all you have is lists and dictionaries, you can call custom equal methods on each one. For example,</p>\n\n<pre><code>def list_equal(l1, l2):\n    if type(l1[0]) is dict:\n        if len(l1) != len(l2):\n            return False\n        for i in range(len(l1)):\n            if not l1.count(l1[i]) == l2.count(l1[i]):\n                 return False\n        return True\n    return sorted(l1) == sorted(l2)\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>def structures_equal(s1, s2):\n    if not sorted(list(set(s1.keys()))) == sorted(list(set(s2.keys()))):\n        return False\n    for key in s1:\n        if type(s1[key]) is list:\n            if not type(s2[key]) is list:\n                return False\n            elif not list_equal(s1[key], s2[key]):\n                return False\n        elif not s1[key] == s2[key]:\n            return False\n        return True\n</code></pre>\n\n<p>Right now the list comparisons run in O(n^2) because it counts the instances of each row. If you are getting these rows from the same data source, it would be useful to pull a Unique ID for each one as well. Timing then becomes significantly faster because we only compare the UIDS and their counts in each list. Even more good if you can make this a dictionary of UIDS and the number of instances of the rows assigned. For example </p>\n\n<pre><code>[{'address': 'address0', 'foo': 'bar0', 'uid': 0},\n {'address': 'address1', 'foo': 'bar1', 'uid': 1},\n {'address': 'address2', 'foo': 'bar2', 'uid': 2},\n {'address': 'address3', 'foo': 'bar3', 'uid': 3},\n {'address': 'address4', 'foo': 'bar4', 'uid': 4},\n {'address': 'address0', 'foo': 'bar0', 'uid': 0},\n {'address': 'address1', 'foo': 'bar1', 'uid': 1},\n {'address': 'address2', 'foo': 'bar2', 'uid': 2}]\n</code></pre>\n\n<p>becomes </p>\n\n<pre><code>{0: [{'address': 'address0', 'foo': 'bar0', 'uid': 0},\n     {'address': 'address0', 'foo': 'bar0', 'uid': 0}],\n 1: [{'address': 'address1', 'foo': 'bar1', 'uid': 1},\n     {'address': 'address1', 'foo': 'bar1', 'uid': 1}],\n 2: [{'address': 'address2', 'foo': 'bar2', 'uid': 2},\n     {'address': 'address2', 'foo': 'bar2', 'uid': 2}],\n 3: [{'address': 'address3', 'foo': 'bar3', 'uid': 3}],\n 4: [{'address': 'address4', 'foo': 'bar4', 'uid': 4}]}\n</code></pre>\n\n<p>The algorithm for this will then be</p>\n\n<pre><code>def list_converted_to_dict_equal(d1, d2):\n    for key in d1:\n        if key not in d2 or len(d1[key]) != len(d2[key]):\n            return False\n    return True\n</code></pre>\n\n<p>Which is much better than before. </p>\n"}, {"comments": [{"owner": {"reputation": 1056, "user_id": 5847412, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e00cfe1938337ca55b7496893faaa0f4?s=128&d=identicon&r=PG&f=1", "display_name": "unseen_damage", "link": "https://stackoverflow.com/users/5847412/unseen-damage"}, "edited": false, "score": 0, "creation_date": 1513866680, "post_id": 47916032, "comment_id": 82822155, "body": "I&#39;m not quite sure I get what you are suggesting I do here."}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "reply_to_user": {"reputation": 1056, "user_id": 5847412, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e00cfe1938337ca55b7496893faaa0f4?s=128&d=identicon&r=PG&f=1", "display_name": "unseen_damage", "link": "https://stackoverflow.com/users/5847412/unseen-damage"}, "edited": false, "score": 0, "creation_date": 1513868475, "post_id": 47916032, "comment_id": 82823466, "body": "@unseen_damage I tried to expand on the answer a little more."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1513868811, "post_id": 47916032, "comment_id": 82823683, "body": "Sounds like a bit of overkill for this particular example, no?"}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1513874414, "post_id": 47916032, "comment_id": 82826958, "body": "@MadPhysicist, It depends on the extent to which the OP wishes to use these objects. Left to me, I wouldn&#39;t be handling raw dicts retrieved from an API like that, especially when they are this complex. I would much rather go the route of combining modularity with encapsulation, so that I&#39;m not scrambling about dealing with each individual component separately."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1513875000, "post_id": 47916032, "comment_id": 82827277, "body": "@smac89. I&#39;m just saying that it is not a very general solution to the problem OP poses. I agree with you entirely that the data is better off sitting in the specific objects in your model. Then you have complete control, without requiring these generic slow sorting algorithms."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1513875032, "post_id": 47916032, "comment_id": 82827291, "body": "@smac89. When you put it like that, +1"}], "tags": [], "owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "is_accepted": false, "score": 1, "last_activity_date": 1513868280, "last_edit_date": 1513868280, "creation_date": 1513814395, "answer_id": 47916032, "question_id": 47914234, "link": "https://stackoverflow.com/questions/47914234/python-sort-and-compare-nested-dictionaries/47916032#47916032", "title": "Python Sort and Compare Nested Dictionaries", "body": "<p>Convert your dictionaries to a data structure i.e. a real class.</p>\n\n<p>For this class, overload the <code>__cmp__</code> method for each object, if you want to be able to sort them.</p>\n\n<p>Overload <code>__eq__</code> if you want to be able to tell if two objects are equal.</p>\n\n<pre><code>class ApiDto(object):\n    def __cmp__ (self, other):\n        pass\n    def __eq__ (self, other):\n        pass\n\nclass Address(object):\n    def __cmp__ (self, other):\n        pass\n    def __eq__ (self, other):\n        pass\n\nclass Id(object):\n    def __cmp__ (self, other):\n        pass\n    def __eq__ (self, other):\n        pass\n</code></pre>\n\n<p>Change the dicts to now use the above classes.</p>\n\n<p>Now you can sort and compare as you like without having to deal with handling all the attributes at once.</p>\n\n<hr>\n\n<p>In case it's not obvious at this point, the dict you have will now be an <code>ApiDto</code> which has a <code>name</code> field, an <code>addresses</code> field which is a list of <code>Address</code>, an <code>ids</code> field which is a list of <code>Id</code>, and finally a <code>dob</code> field.</p>\n\n<p>When you overload <code>__cmp__</code> and <code>__eq__</code> methods for <code>ApiDto</code>, you will do the same for all the classes, and this will allow you to sort the objects and finally compare them to each other.</p>\n\n<p>Also if you ever need to convert the objects back to a dict, you can call the <code>__dict__</code> attribute to give you this</p>\n"}], "owner": {"reputation": 1056, "user_id": 5847412, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e00cfe1938337ca55b7496893faaa0f4?s=128&d=identicon&r=PG&f=1", "display_name": "unseen_damage", "link": "https://stackoverflow.com/users/5847412/unseen-damage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 746, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1513868280, "creation_date": 1513803338, "last_edit_date": 1513804393, "question_id": 47914234, "link": "https://stackoverflow.com/questions/47914234/python-sort-and-compare-nested-dictionaries", "title": "Python Sort and Compare Nested Dictionaries", "body": "<p>I am trying to sort and compare dictionaries that contain lists of dictionaries and other data in <code>Python 3.6</code>. I am not sure the best way to compare the two. The data in the two dictionaries is the same, but I can't control the order in which they are given. The data looks like the following:</p>\n\n<pre><code>dict_A = {\n    'addresses': [\n        {'address': 'Tribal Land', 'address_country': 'AB', 'city': None, 'postal_code': None, 'state': 'GY'},\n        {'address': 'Userland', 'address_country': 'ND', 'city': None, 'postal_code': None, 'state': 'KY'}],\n    'name': 'FooBar', \n    'dob': None, \n    'ids':[\n        {'date': None, 'country': None, 'number': 'Male', 'type': 'Gender', 'location': 'USA'},\n        {'date': None, 'country': 'VE', 'number': '1234567', 'type': 'Foo No.', 'location': 'USA'}]\n}\n\n\ndict_B = {\n    'addresses': [\n        {'address': 'Userland', 'address_country': 'ND', 'city': None, 'postal_code': None, 'state': 'KY'},\n        {'address': 'Tribal Land', 'address_country': 'AB', 'city': None, 'postal_code': None, 'state': 'GY'}],\n    'dob': None, \n    'id':[\n        {'country': 'VE', 'date': None, 'type': 'Foo No.', 'location': 'USA', 'number': '1234567'},\n        {'country': None, 'date': None, 'type': 'Gender', 'location': 'USA', 'number': 'Male'}],\n    'name': 'FooBar'\n} \n</code></pre>\n\n<p>I am trying to do get a comparison with <code>dict_A == dict_B</code> evaluating to <code>True</code>. </p>\n\n<p>I have tried to loop through the dictionary, send the items to Pandas and set the <code>dict</code> to <code>ordered_dict</code>, but that doesn't seem to work. I am not sure on the best approach to this.</p>\n\n<pre><code>        # Loop over data, and conver the list of dicts to data frame for sorting,\n            # then take the data, once sorted, and put it back into list of dicts\n            for key, val in dict_A.items():\n                if type(val) is list:\n                    val.sort(key=lambda x: x if isinstance(x, str) else \"\")\n                    dataframe = pd.DataFrame(val, index=range(len(val)))\n                    dataframe.sort_values(by=dataframe.columns[0])\n                    new_val = [OrderedDict(row) for i, row in dataframe.iterrows()]\n                    dict_A.update({key: new_val})\n</code></pre>\n\n<p>Perhaps would the better way be to set the dictionaries to lists, and compare it that way?</p>\n"}, {"tags": ["python", "pandas", "recursion", "rows"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1513803615, "post_id": 47914178, "comment_id": 82796428, "body": "Hmm, I don&#39;t think this is enough information to answer the question. There seems very little intuition behind the results generated here. Can you explain what it is you&#39;re trying to do and how you arrive at the result?"}, {"owner": {"reputation": 849, "user_id": 9028003, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f4a20f30230076b8851eba1d475abe57?s=128&d=identicon&r=PG&f=1", "display_name": "TylerNG", "link": "https://stackoverflow.com/users/9028003/tylerng"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1513807240, "post_id": 47914178, "comment_id": 82797942, "body": "@c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05 The logic that I used here is how I wrote the formula on excel.  My goal is to run the 2 recursion formulas on the given rows A and B.   The Ax, Ay and Bx, By are derived from the formulas in the first box."}], "answers": [{"comments": [{"owner": {"reputation": 849, "user_id": 9028003, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f4a20f30230076b8851eba1d475abe57?s=128&d=identicon&r=PG&f=1", "display_name": "TylerNG", "link": "https://stackoverflow.com/users/9028003/tylerng"}, "edited": false, "score": 0, "creation_date": 1513807011, "post_id": 47914434, "comment_id": 82797851, "body": "you&#39;re right!  However when I run the 1st line, I get: TypeError: Could not operate 1 with block values unsupported operand type(s) for -: &#39;int&#39; and &#39;str&#39;"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 849, "user_id": 9028003, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f4a20f30230076b8851eba1d475abe57?s=128&d=identicon&r=PG&f=1", "display_name": "TylerNG", "link": "https://stackoverflow.com/users/9028003/tylerng"}, "edited": false, "score": 0, "creation_date": 1513807117, "post_id": 47914434, "comment_id": 82797897, "body": "@TylerNG seems like you have <code>str</code> rather than <code>numeric</code>, df=df.apply(pd.to_numeric)"}, {"owner": {"reputation": 849, "user_id": 9028003, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f4a20f30230076b8851eba1d475abe57?s=128&d=identicon&r=PG&f=1", "display_name": "TylerNG", "link": "https://stackoverflow.com/users/9028003/tylerng"}, "edited": false, "score": 0, "creation_date": 1513807651, "post_id": 47914434, "comment_id": 82798114, "body": "I can&#39;t do that since the field Name is a string.   (&#39;Unable to parse string &quot;A&quot; at position 0&#39;, &#39;occurred at index Name&#39;)"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 849, "user_id": 9028003, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f4a20f30230076b8851eba1d475abe57?s=128&d=identicon&r=PG&f=1", "display_name": "TylerNG", "link": "https://stackoverflow.com/users/9028003/tylerng"}, "edited": false, "score": 0, "creation_date": 1513807741, "post_id": 47914434, "comment_id": 82798151, "body": "@TylerNG you can do , df=df.set_index(&#39;Name&#39;)"}, {"owner": {"reputation": 849, "user_id": 9028003, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f4a20f30230076b8851eba1d475abe57?s=128&d=identicon&r=PG&f=1", "display_name": "TylerNG", "link": "https://stackoverflow.com/users/9028003/tylerng"}, "edited": false, "score": 0, "creation_date": 1513807952, "post_id": 47914434, "comment_id": 82798240, "body": "Wow it works! This is so different than excel.  Thanks again! you&#39;re awesome!"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 849, "user_id": 9028003, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f4a20f30230076b8851eba1d475abe57?s=128&d=identicon&r=PG&f=1", "display_name": "TylerNG", "link": "https://stackoverflow.com/users/9028003/tylerng"}, "edited": false, "score": 0, "creation_date": 1513808018, "post_id": 47914434, "comment_id": 82798273, "body": "@TylerNG yw~ :-) happy coding"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 2, "last_activity_date": 1513807755, "last_edit_date": 1513807755, "creation_date": 1513804424, "answer_id": 47914434, "question_id": 47914178, "link": "https://stackoverflow.com/questions/47914178/python-performing-recursion-on-rows-in-df/47914434#47914434", "title": "python performing recursion on rows in df", "body": "<p>Let me explain a little bit .</p>\n\n<p><code>a2=c1*A2;c2=c1-a2, then c2=c1-a2=c1-c1*A2=c1(1-A2)</code>, </p>\n\n<p>c3 should be <code>c3=c2(1-A3)=c1(1-A2)(1-A3)</code>, that is where<code>(1-df).cumprod(1)</code>, come from </p>\n\n<pre><code>df=df.set_index('Name') \ndf1=(1-df).cumprod(1)\ndf2=df1.shift(1,axis=1).mul(df)\n\npd.concat([df,df1,df2],keys=['','x','y']).fillna({'1':0})\n\n\nOut[769]: \n          1      2        3         4         5\n  Name                                         \n  A     0.0  0.125  0.28600  0.250000  0.333000\n  B     0.0  0.000  0.00000  0.500000       NaN\nx A     1.0  0.875  0.62475  0.468562  0.312531\n  B     1.0  1.000  1.00000  0.500000       NaN\ny A     0.0  0.125  0.25025  0.156187  0.156031\n  B     0.0  0.000  0.00000  0.500000       NaN\n</code></pre>\n"}], "owner": {"reputation": 849, "user_id": 9028003, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f4a20f30230076b8851eba1d475abe57?s=128&d=identicon&r=PG&f=1", "display_name": "TylerNG", "link": "https://stackoverflow.com/users/9028003/tylerng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 47914434, "answer_count": 1, "score": 1, "last_activity_date": 1513807755, "creation_date": 1513803073, "question_id": 47914178, "link": "https://stackoverflow.com/questions/47914178/python-performing-recursion-on-rows-in-df", "title": "python performing recursion on rows in df", "body": "<p>I want to perform the following calculations with my df. I've done this in Excel but I'm not sure how to do this using Python. Here's the calculation </p>\n\n<pre><code>      initial|  recursion begins\nName  | 1    | 2        | 3        | 4   ...\n------------------------------------------------\nA     | A1   | A2       | A3       | A4         &lt;--given \na     | a1=0 | a2=c1*A2 | a3=c2*A3 | a4=c3*A4   &lt;--calculation (1st cell always = 0)\nc     | c1=1 | c2=c1-a2 | c3=c2-a3 | c4=c3-a4   &lt;--calculation (1st cell always 1)\n</code></pre>\n\n<p>Here's my example:</p>\n\n<p>df</p>\n\n<pre><code>Name    1    2     3    4     5\n----------------------------------\nA       0   .125  .286  .25  .333\nB       0   0     0    .5    -\n</code></pre>\n\n<p>the output would be:</p>\n\n<pre><code>Name    1    2     3     4    5\n----------------------------------\nA       0   .125  .286  .25  .333\nAx      0   .125  .25   .156 .156  \nAy      1   .875  .625  .469 .313\nB       0   .1    0     .25    -\nBx      0   .1    0     .225   -\nBy      1   .9    .9    .675   -\n</code></pre>\n\n<p>Thank you! </p>\n"}, {"tags": ["python", "concurrency", "websocket"], "owner": {"reputation": 21, "user_id": 9124324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a861603559fa5a4ae7add8315c542c8?s=128&d=identicon&r=PG&f=1", "display_name": "Gianluca Cremi", "link": "https://stackoverflow.com/users/9124324/gianluca-cremi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1513803065, "creation_date": 1513803065, "question_id": 47914176, "link": "https://stackoverflow.com/questions/47914176/how-would-you-open-multiple-websockets-in-multiple-threads-and-run-them-concurre", "title": "How would you open multiple websockets in multiple threads and run them concurrently", "body": "<p>I have this code that reads messages from Gdax, what I would like to do now is start a new thread that reads messages from another websocket from another exchange and runs concurrently. How do I do that ?</p>\n\n<pre><code>import websocket\nfrom json import dumps, loads\ntry:\n    import thread\nexcept ImportError:\n    import _thread as thread\n\ndef on_message(ws, message):\n    parsed_msg = loads(message)\n    print(parsed_msg[\"product_id\"], parsed_msg[\"price\"])\n\ndef on_open(ws):\n    def run(*args):\n        params = {\n            \"type\": \"subscribe\",\n            \"channels\": [{\"name\": \"ticker\", \"product_ids\": [\"BTC-USD\", \n\"ETH-USD\"]}]\n        }\n        ws.send(dumps(params))\n    thread.start_new_thread(run, ())\n\nif __name__ == \"__main__\":\n    websocket.enableTrace(True)\n    ws = websocket.WebSocketApp(\"wss://ws-feed.gdax.com\", on_open=on_open, \non_message = on_message)\n    ws.run_forever()\n</code></pre>\n"}, {"tags": ["python", "web", "web-scraping"], "answers": [{"comments": [{"owner": {"reputation": 1549, "user_id": 6084948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e5d032c08808069ed37e38ff8e81e4?s=128&d=identicon&r=PG", "display_name": "briancaffey", "link": "https://stackoverflow.com/users/6084948/briancaffey"}, "edited": false, "score": 0, "creation_date": 1513812266, "post_id": 47915718, "comment_id": 82799554, "body": "you could probably save time by starting at <a href=\"https://www.komplett.no/search?q=pc&amp;hits=1000\" rel=\"nofollow noreferrer\">komplett.no/search?q=pc&amp;hits=1000</a>"}, {"owner": {"reputation": 1549, "user_id": 6084948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e5d032c08808069ed37e38ff8e81e4?s=128&d=identicon&r=PG", "display_name": "briancaffey", "link": "https://stackoverflow.com/users/6084948/briancaffey"}, "reply_to_user": {"reputation": 3, "user_id": 9100572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85cee8944185b2391a66f161c8e60af9?s=128&d=identicon&r=PG&f=1", "display_name": "Even Lauvrak", "link": "https://stackoverflow.com/users/9100572/even-lauvrak"}, "edited": false, "score": 0, "creation_date": 1513882106, "post_id": 47915718, "comment_id": 82830712, "body": "@EvenLauvrak hey no problem. If the solution worked for you could you mark the answer as accepted? Otherwise let me know if you need more help. Thanks!"}, {"owner": {"reputation": 3, "user_id": 9100572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85cee8944185b2391a66f161c8e60af9?s=128&d=identicon&r=PG&f=1", "display_name": "Even Lauvrak", "link": "https://stackoverflow.com/users/9100572/even-lauvrak"}, "edited": false, "score": 0, "creation_date": 1513882253, "post_id": 47915718, "comment_id": 82830821, "body": "Yeah sure man i will accept it. Il lett you know if theres anything more."}], "tags": [], "owner": {"reputation": 1549, "user_id": 6084948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e5d032c08808069ed37e38ff8e81e4?s=128&d=identicon&r=PG", "display_name": "briancaffey", "link": "https://stackoverflow.com/users/6084948/briancaffey"}, "is_accepted": true, "score": 0, "last_activity_date": 1613570143, "last_edit_date": 1613570143, "creation_date": 1513811973, "answer_id": 47915718, "question_id": 47914127, "link": "https://stackoverflow.com/questions/47914127/web-scrape-with-python-limited-objects/47915718#47915718", "title": "Web scrape with python | Limited objects", "body": "<p>here's how I would approach this web scraping task:</p>\n<p>It looks like when you scroll to the bottom there are 24 new items added to the page. Since I see there are 3919 results when we filter by <code>pc</code>, let's use a headless browser/JavaScript engine like PhantomJS and tell it to scroll to the bottom of the page and then wait a few seconds for the new results to load, and repeat that number of process of 3919/24 times. For this to work you would need to install a webdriver like PhantomJS</p>\n<pre><code>from selenium import webdriver\n\ndriver = webdriver.PhantomJS()\ndriver.get('https://www.komplett.no/search?q=pc')\nnum_pages = int((3919/24) + 1)\nfor _ in range(num_pages):\n    driver.execute_script(&quot;window.scrollTo(0, document.body.scrollHeight);&quot;)\n    time.sleep(3)\n \nhtml = driver.page_source.encode('utf-8')\n</code></pre>\n<p>Once you have finished the loop, you can call <code>.driver.page_source.encode('utf-8')</code> to capture the html of currently loaded on the DOM tree and then do you the rest of the web scraping with that data.</p>\n<p>btw, I did a PC scraping project a while ago, <a href=\"http://briancaffey.github.io/2017/01/01/pc-data.html\" rel=\"nofollow noreferrer\">here's the link</a> if you want to check it out.</p>\n"}], "owner": {"reputation": 3, "user_id": 9100572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85cee8944185b2391a66f161c8e60af9?s=128&d=identicon&r=PG&f=1", "display_name": "Even Lauvrak", "link": "https://stackoverflow.com/users/9100572/even-lauvrak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 47915718, "answer_count": 1, "score": 0, "last_activity_date": 1613570143, "creation_date": 1513802810, "last_edit_date": 1513825776, "question_id": 47914127, "link": "https://stackoverflow.com/questions/47914127/web-scrape-with-python-limited-objects", "title": "Web scrape with python | Limited objects", "body": "<p>I'm trying to get data from a website that uses pc parts, and I have this link that have over 3500 parts on that page, the problem is that if I use the clean link:\n  <a href=\"https://www.komplett.no/search?q=pc\" rel=\"nofollow noreferrer\">https://www.komplett.no/search?q=pc</a></p>\n\n<p>it only get the data that is there before I scroll down and it loads new items.</p>\n\n<p>So I took the link edited like this:\n  <a href=\"https://www.komplett.no/search?q=pc&amp;hits=1000\" rel=\"nofollow noreferrer\">https://www.komplett.no/search?q=pc&amp;hits=1000</a></p>\n\n<p>Now it gets all the info from over 1000 products but I can't go over that because the script just don't want to work, I don't get an error or anything. \nBTW, I only get the things on sale so its not that much data.</p>\n\n<p>I want a way to go through the hole page without having to write the limit to how many products I want to go through. </p>\n"}, {"tags": ["python", "for-loop", "python-3.5", "bidirectional"], "comments": [{"owner": {"reputation": 36576, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 0, "creation_date": 1513802351, "post_id": 47914028, "comment_id": 82795843, "body": "Why not just run two separate <code>for</code> loops, one counting up and one counting down?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5420735"}, "reply_to_user": {"reputation": 36576, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 0, "creation_date": 1513802400, "post_id": 47914028, "comment_id": 82795869, "body": "Then I would not have access to both vars at the same time and it would double complexity"}, {"owner": {"reputation": 36576, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 0, "creation_date": 1513802547, "post_id": 47914028, "comment_id": 82795944, "body": "I can&#39;t think of a case wherein you&#39;d <i>need</i> access to two variables that were inversely proportional to each other at the same time. But surely you could just set something like <code>y = -x</code> inside of the loop over <code>x</code>, assuming that the &#39;midpoint&#39; was <code>0</code>. Then you&#39;d have access to both at the same time, and they would be inversely proportional (with only one additional line of code)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5420735"}, "reply_to_user": {"reputation": 36576, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 0, "creation_date": 1513802768, "post_id": 47914028, "comment_id": 82796057, "body": "Interesting point but how would you use a negative index, especially with a odd number of elements"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5420735"}, "edited": false, "score": 0, "creation_date": 1513825429, "post_id": 47914151, "comment_id": 82802596, "body": "Can you show a case where a generator used properly would cause a problem in with this example"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1513850896, "post_id": 47914151, "comment_id": 82812603, "body": "Actually it doesn&#39;t work at all with a generator unless forced into a list. I have edited my post."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 3, "last_activity_date": 1513850867, "last_edit_date": 1513850867, "creation_date": 1513802920, "answer_id": 47914151, "question_id": 47914028, "link": "https://stackoverflow.com/questions/47914028/how-do-you-create-a-bidirectional-for-loop-in-python-elegantly/47914151#47914151", "title": "How do you create a bidirectional for loop in Python elegantly?", "body": "<p>you could <code>zip</code> one iterator and its reverse:</p>\n\n<pre><code>z = range(20,30)\n\nfor x,y in zip(z,reversed(z)):\n    print(x,y)\n</code></pre>\n\n<p>results in:</p>\n\n<pre><code>20 29\n21 28\n22 27\n23 26\n24 25\n25 24\n26 23\n27 22\n28 21\n29 20\n</code></pre>\n\n<p>With generators, though, you have to force iteration into a <code>list</code> since <code>reverse</code> expects a sequence </p>\n\n<pre><code>TypeError: argument to reversed() must be a sequence\n</code></pre>\n\n<p><code>list</code>, <code>tuple</code> or <code>range</code> are OK.</p>\n\n<pre><code>g = (x for x in somefunc() if x &gt; 0)\nlst = list(g)\nfor x,y in zip(lst, reversed(lst)):\n   ...\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5420735"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1513850867, "creation_date": 1513802277, "last_edit_date": 1513803222, "question_id": 47914028, "link": "https://stackoverflow.com/questions/47914028/how-do-you-create-a-bidirectional-for-loop-in-python-elegantly", "title": "How do you create a bidirectional for loop in Python elegantly?", "body": "<p>As in with out outer scope variables, how do you loop getting the first element forward with one var and another var for the last element backward with the same loop? Is there a function similar to enumerate that returns two vars</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 63658, "user_id": 97248, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d891ba8bd448f11617333f8642870262?s=128&d=identicon&r=PG", "display_name": "pts", "link": "https://stackoverflow.com/users/97248/pts"}, "edited": false, "score": 0, "creation_date": 1513802719, "post_id": 47914005, "comment_id": 82796037, "body": "You may want to add a mockup image to your question to indicate how the output should look like."}, {"owner": {"reputation": 170, "user_id": 7733184, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_ImQQKn4eWY/AAAAAAAAAAI/AAAAAAAAGO8/t_wtKe1TamQ/photo.jpg?sz=128", "display_name": "dhanush-ai1990", "link": "https://stackoverflow.com/users/7733184/dhanush-ai1990"}, "reply_to_user": {"reputation": 29479, "user_id": 1356000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef54c2101a4c23ea2441ce2b346ffb75?s=128&d=identicon&r=PG", "display_name": "Diziet Asahi", "link": "https://stackoverflow.com/users/1356000/diziet-asahi"}, "edited": false, "score": 0, "creation_date": 1513803184, "post_id": 47914005, "comment_id": 82796231, "body": "@DizietAsahi Not exactly the same, this is not a gradient. These are custom colors."}], "answers": [{"comments": [{"owner": {"reputation": 170, "user_id": 7733184, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_ImQQKn4eWY/AAAAAAAAAAI/AAAAAAAAGO8/t_wtKe1TamQ/photo.jpg?sz=128", "display_name": "dhanush-ai1990", "link": "https://stackoverflow.com/users/7733184/dhanush-ai1990"}, "edited": false, "score": 0, "creation_date": 1513813338, "post_id": 47914519, "comment_id": 82799837, "body": "I was actually only looking for the scale on the right. Not the zvals or the random plot."}], "tags": [], "owner": {"reputation": 29479, "user_id": 1356000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef54c2101a4c23ea2441ce2b346ffb75?s=128&d=identicon&r=PG", "display_name": "Diziet Asahi", "link": "https://stackoverflow.com/users/1356000/diziet-asahi"}, "is_accepted": true, "score": 1, "last_activity_date": 1513804846, "creation_date": 1513804846, "answer_id": 47914519, "question_id": 47914005, "link": "https://stackoverflow.com/questions/47914005/color-filled-sequence-of-rectangles-using-custom-gradient/47914519#47914519", "title": "Color filled sequence of rectangles using custom gradient", "body": "<p>As per <a href=\"https://stackoverflow.com/a/9708079/1356000\">the answer to this question</a>, you can define a custom colormap using a <a href=\"https://matplotlib.org/api/_as_gen/matplotlib.colors.ListedColormap.html?highlight=listedcolormap\" rel=\"nofollow noreferrer\"><code>ListedColormap</code></a> object.</p>\n\n<pre><code>colors = ['#B03A2E','#EC7063','#FCF3CF','#F1C40F','#F39C12','#82E0AA','#28B463','#7FB3D5','#2980B9','#5B2C6F']\nbounds = [0.5,0.55,0.60,0.65,0.70,0.75,0.80,0.85,0.90,0.95,1]\ncmap = matplotlib.colors.ListedColormap(colors)\nnorm = matplotlib.colors.BoundaryNorm(bounds, cmap.N)\n\nzvals = np.random.rand(100, 100) * 10\n\n# tell imshow about color map so that only set colors are used\nimg = plt.imshow(zvals, cmap=cmap, norm=norm)\n\n# make a color bar\nplt.colorbar(img, cmap=cmap, norm=norm, boundaries=bounds, ticks=bounds)\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/iTsB4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iTsB4.png\" alt=\"enter image description here\"></a></p>\n\n<p>see also <a href=\"http://matplotlib.sourceforge.net/examples/api/colorbar_only.html\" rel=\"nofollow noreferrer\">the example</a> from matplotlib's documentation.</p>\n"}], "owner": {"reputation": 170, "user_id": 7733184, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_ImQQKn4eWY/AAAAAAAAAAI/AAAAAAAAGO8/t_wtKe1TamQ/photo.jpg?sz=128", "display_name": "dhanush-ai1990", "link": "https://stackoverflow.com/users/7733184/dhanush-ai1990"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "closed_date": 1513822772, "accepted_answer_id": 47914519, "answer_count": 1, "score": 0, "last_activity_date": 1513804846, "creation_date": 1513802143, "last_edit_date": 1513803129, "question_id": 47914005, "link": "https://stackoverflow.com/questions/47914005/color-filled-sequence-of-rectangles-using-custom-gradient", "closed_reason": "Duplicate", "title": "Color filled sequence of rectangles using custom gradient", "body": "<p>I am trying to create a color gradient rectangle with custom annotation in Python with <em>matplotlib</em>. The below is the function which assigns colors based on values. I am trying to create a label for reference ( A rectangle with scores shown for colors).\nI am looking for something like this: <a href=\"https://stackoverflow.com/a/25679063/7733184\">https://stackoverflow.com/a/25679063/7733184</a> for my colors but also with range indicated as per my function.</p>\n\n<pre><code>def returncolor(value,colors):\n    if value &lt; 0.55:\n        return '#B03A2E' #darkest red\n    if value &lt; 0.60:\n        return '#EC7063' # light red\n    if value &lt; 0.65:\n        return '#FCF3CF' # lighest yellow\n    if value &lt; 0.70:\n        return '#F1C40F' # yellow\n    if value &lt; 0.75:\n        return '#F39C12' # Orange\n    if value &lt; 0.80:\n        return '#82E0AA'#light green\n    if value &lt; 0.85:\n        return '#28B463'#dark green\n    if value &lt; 0.90:\n        return '#7FB3D5'#light blue\n    if value &lt; 0.95:\n        return '#2980B9'#dark blue\n    if value &lt; 1:\n        return '#5B2C6F'#dark blue\n</code></pre>\n\n<p>A mockup of what I am trying to do is below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/FtU0X.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FtU0X.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "matplotlib", "padding"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1513807709, "post_id": 47913994, "comment_id": 82798139, "body": "Are you asking for horizontal padding or vertical padding here?"}, {"owner": {"reputation": 415, "user_id": 6690682, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e0a961eb487e3f2a2281f9e6cbc82404?s=128&d=identicon&r=PG&f=1", "display_name": "s6hebern", "link": "https://stackoverflow.com/users/6690682/s6hebern"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1514371540, "post_id": 47913994, "comment_id": 82949768, "body": "Sorry for not clarifying that... I&#39;m looking for horizontal padding to move only the label itself, not the tick."}], "answers": [{"comments": [{"owner": {"reputation": 415, "user_id": 6690682, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e0a961eb487e3f2a2281f9e6cbc82404?s=128&d=identicon&r=PG&f=1", "display_name": "s6hebern", "link": "https://stackoverflow.com/users/6690682/s6hebern"}, "edited": false, "score": 0, "creation_date": 1514371544, "post_id": 47914330, "comment_id": 82949772, "body": "A good start, but this moves the labels up or down, not left or right."}], "tags": [], "owner": {"reputation": 29479, "user_id": 1356000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef54c2101a4c23ea2441ce2b346ffb75?s=128&d=identicon&r=PG", "display_name": "Diziet Asahi", "link": "https://stackoverflow.com/users/1356000/diziet-asahi"}, "is_accepted": false, "score": 0, "last_activity_date": 1513803939, "creation_date": 1513803939, "answer_id": 47914330, "question_id": 47913994, "link": "https://stackoverflow.com/questions/47913994/pyplot-additional-padding-for-xticklabels-if-keywords-are-not-enough/47914330#47914330", "title": "PyPlot - Additional padding for xticklabels if keywords are not enough", "body": "<p>You can use the <a href=\"https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.tick_params.html#matplotlib.axes.Axes.tick_params\" rel=\"nofollow noreferrer\">Axes.set_tick_params()</a> function to adjust the padding between the axe and the tick labels (minor, major, or both)</p>\n\n<pre><code>ax.xaxis.set_tick_params(which='minor', pad=25)\n</code></pre>\n"}], "owner": {"reputation": 415, "user_id": 6690682, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e0a961eb487e3f2a2281f9e6cbc82404?s=128&d=identicon&r=PG&f=1", "display_name": "s6hebern", "link": "https://stackoverflow.com/users/6690682/s6hebern"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 324, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514376983, "creation_date": 1513802111, "last_edit_date": 1514376983, "question_id": 47913994, "link": "https://stackoverflow.com/questions/47913994/pyplot-additional-padding-for-xticklabels-if-keywords-are-not-enough", "title": "PyPlot - Additional padding for xticklabels if keywords are not enough", "body": "<p>I have a plot where I set my ticks and labels manually, because pyplot did not do the job to my full satisfaction. I align the labels using the following code:</p>\n\n<pre><code>for tick in self.axes.xaxis.get_minorticklabels():\n    tick.set_horizontalalignment('right')\n    tick.set_rotation(40)\n</code></pre>\n\n<p>This is basically fine, but I'd like the labels to move a little bit further to the left (<code>center</code> is too far). I only found padding for the axis label in <a href=\"https://stackoverflow.com/questions/6406368/matplotlib-move-x-axis-label-downwards-but-not-x-axis-ticks#6406750\">this post</a>, but not for the tick labels. Is there something similar like <code>labelpad=X</code> to move the tick labels in horizontal direction?</p>\n"}, {"tags": ["python", "opengl", "pyopengl", "opengl-compat"], "comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1513802635, "post_id": 47913978, "comment_id": 82795993, "body": "Do you mean you want a transparent sphere? If not, what&#39;s the point of rendering the hidden half?"}, {"owner": {"reputation": 13, "user_id": 9119532, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cI0sy.jpg?s=128&g=1", "display_name": "TEB", "link": "https://stackoverflow.com/users/9119532/teb"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1513803353, "post_id": 47913978, "comment_id": 82796299, "body": "@Ripi2: no - see clarification in original question. I see your point about &quot;rendering the hidden half&quot;, but the goal here is to eventually have a rotating sphere that shows the entire 360-degree dataset on the sphere. So it would seem the place to start is getting the texture on the entire 3D object and then proceeding with interactive rotation."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1513803636, "post_id": 47913978, "comment_id": 82796441, "body": "Applying a texture is wrapping the rectangle of the image to the desired form, a circle in your case. What did you expect?"}, {"owner": {"reputation": 13, "user_id": 9119532, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cI0sy.jpg?s=128&g=1", "display_name": "TEB", "link": "https://stackoverflow.com/users/9119532/teb"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1513803947, "post_id": 47913978, "comment_id": 82796576, "body": "Was expecting texture applied to a 3D sphere, not a circle."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1513803982, "post_id": 47913978, "comment_id": 82796589, "body": "If you want part of the texture, then you must calculate the part that is shown and pass its coordinates by using <code>glTexCoord</code>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9119532, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cI0sy.jpg?s=128&g=1", "display_name": "TEB", "link": "https://stackoverflow.com/users/9119532/teb"}, "edited": false, "score": 1, "creation_date": 1513900102, "post_id": 47930127, "comment_id": 82837791, "body": "Thank you - this is exactly what I was looking for."}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 0, "last_activity_date": 1513878728, "last_edit_date": 1513878728, "creation_date": 1513878145, "answer_id": 47930127, "question_id": 47913978, "link": "https://stackoverflow.com/questions/47913978/texture-wrapping-an-entire-sphere-in-pyopengl/47930127#47930127", "title": "Texture wrapping an entire sphere in PyOpenGL", "body": "<p>To wrap a texture around a sphere you have to distribute the texture coordinates quadratic around the sphere. This is provided by <a href=\"http://pyopengl.sourceforge.net/documentation/manual-3.0/gluNewQuadric.html\" rel=\"nofollow noreferrer\"><code>gluNewQuadric</code></a>, <a href=\"http://pyopengl.sourceforge.net/documentation/manual-3.0/gluQuadricTexture.html\" rel=\"nofollow noreferrer\"><code>gluQuadricTexture</code></a> and <a href=\"http://pyopengl.sourceforge.net/documentation/manual-3.0/gluSphere.html\" rel=\"nofollow noreferrer\"><code>gluSphere</code></a>:</p>\n\n<pre><code>class MyWnd:\n    def __init__(self):\n        self.texture_id = 0\n        self.angle = 0\n\n    def run_scene(self):\n        glutInit()\n        glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH)\n        glutInitWindowSize(400, 400)\n        glutCreateWindow(b'Minimal sphere OpenGL')\n        self.lightning()\n        self.texture_id = self.read_texture('data/worldmap1.jpg')\n        glutDisplayFunc(self.draw_sphere)\n        glMatrixMode(GL_PROJECTION)\n        gluPerspective(40, 1, 1, 40)\n        glutMainLoop()\n\n    def draw_sphere(self):\n        glMatrixMode(GL_MODELVIEW)\n        glLoadIdentity()\n        gluLookAt(math.cos(self.angle)*4, math.sin(self.angle)*4, 0, 0, 0, 0, 0, 0, 1)\n        self.angle = self.angle+0.04\n        glEnable(GL_DEPTH_TEST)\n        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT)\n        glBindTexture(GL_TEXTURE_2D, self.texture_id)\n\n        glEnable(GL_TEXTURE_2D)\n\n        qobj = gluNewQuadric()\n        gluQuadricTexture(qobj, GL_TRUE)\n        gluSphere(qobj, 1, 50, 50)\n        gluDeleteQuadric(qobj)\n\n        glDisable(GL_TEXTURE_2D)\n\n        glutSwapBuffers()\n        glutPostRedisplay()        \n</code></pre>\n\n<p>See the preview:</p>\n\n<p><a href=\"https://i.stack.imgur.com/QlSNW.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QlSNW.gif\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 13, "user_id": 9119532, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cI0sy.jpg?s=128&g=1", "display_name": "TEB", "link": "https://stackoverflow.com/users/9119532/teb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1034, "favorite_count": 0, "accepted_answer_id": 47930127, "answer_count": 1, "score": 1, "last_activity_date": 1601905049, "creation_date": 1513802045, "last_edit_date": 1601905049, "question_id": 47913978, "link": "https://stackoverflow.com/questions/47913978/texture-wrapping-an-entire-sphere-in-pyopengl", "title": "Texture wrapping an entire sphere in PyOpenGL", "body": "<p>I copied the corrected code <a href=\"https://stackoverflow.com/questions/43033625/why-my-texture-is-not-showing-pyopengl\">here</a> to apply my own texture from a solar imaging dataset onto an OpenGL sphere. In doing so I noticed that the texture does not wrap entirely around the sphere - only the \"front half\" - and the lighting shadow is not applied (also evident in the answer to that question).</p>\n\n<p>How do you modify the code to wrap the texture around the <em>entire</em> sphere? </p>\n\n<p>Here is the texture image which is data in a 360-degree longitude x sine(latitude) format (which actually should be transformed to longitude x latitude before applying to the sphere, but that's a detail...):</p>\n\n<p><a href=\"https://i.stack.imgur.com/fTqeS.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fTqeS.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>And here's the result of the texture mapping which shows that the image is only applied to the front/visible hemisphere:</p>\n\n<p><a href=\"https://i.stack.imgur.com/w3Yr3.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/w3Yr3.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "multithreading", "python-3.x"], "comments": [{"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1513802938, "post_id": 47913963, "comment_id": 82796125, "body": "I was just about to answer using <code>current_thread()</code>. Why does that not work for you? I don&#39;t quite understand the &quot;problem&quot; you describe."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1513803126, "post_id": 47913963, "comment_id": 82796209, "body": "@bnaecker. I would like to be able to pass in the parameter when the task is called by the thread. I can&#39;t seem to get around the chicken or the egg problem here, where the thread has to exist to be able to be present in <code>args</code>."}, {"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1513803203, "post_id": 47913963, "comment_id": 82796237, "body": "What parameter are you trying to pass? Can it not be passed using either the <code>args</code> or <code>kwargs</code> keywords to the <code>Thread</code> constructor?"}, {"owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "edited": false, "score": 0, "creation_date": 1513803305, "post_id": 47913963, "comment_id": 82796276, "body": "In your function <code>my_task</code>, the <code>t</code> parameter is not the thread itself. <code>t</code> could take its value from the <code>args</code> argument, but you gave none."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "edited": false, "score": 1, "creation_date": 1513803409, "post_id": 47913963, "comment_id": 82796324, "body": "@LaurentLAPORTE. It could, but you can&#39;t pass the object you are constructing to its own constructor. Well, you can and do, but I can&#39;t make it appear in an argument other than <code>self</code>. That is the problem I am trying to overcome. I don&#39;t know how to pass in <code>t</code> effectively."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1513803465, "post_id": 47913963, "comment_id": 82796353, "body": "@bnaecker. I want the thread itself to be an argument to run, as it would be if I extended the class."}, {"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 2, "creation_date": 1513803642, "post_id": 47913963, "comment_id": 82796445, "body": "As you said, you can&#39;t pass the thread object as an argument to the target. I don&#39;t see why it&#39;s hacky at all to use <code>current_thread()</code>. This is exactly what it&#39;s designed for. Or just extend <code>Thread</code>, that seems perfectly legitimate to me too. You want to add functionality to a class, which is a pretty good operational definition of a subclass."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1513808528, "post_id": 47913963, "comment_id": 82798460, "body": "@bnaecker. I just tested my one real concern with <code>current_thread</code>: <a href=\"https://ideone.com/U7W4ph\" rel=\"nofollow noreferrer\">ideone.com/U7W4ph</a>. If you would like to post an answer, that would be nice."}], "answers": [{"tags": [], "owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "is_accepted": true, "score": 4, "last_activity_date": 1513809296, "creation_date": 1513809296, "answer_id": 47915326, "question_id": 47913963, "link": "https://stackoverflow.com/questions/47913963/accessing-self-from-thread-target/47915326#47915326", "title": "Accessing `self` from thread target", "body": "<p>It seems like your goal is to get access to the thread currently executing a task from within the task itself. You can't add the thread as an argument to the <code>threading.Thread</code> constructor, because it's not yet constructed. I think there are two real options. </p>\n\n<ol>\n<li><p>If your task runs many times, potentially on many different threads, I think the best option is to use <a href=\"https://docs.python.org/3/library/threading.html?highlight=current_thread#threading.current_thread\" rel=\"nofollow noreferrer\"><code>threading.current_thread()</code></a> from within the task. This gives you access directly to the thread object, with which you can do whatever you want. This seems to be exactly the kind of use-case this function was designed for.</p></li>\n<li><p>On the other hand, if your goal is implement a thread with some special characteristics, the natural choice is to subclass <code>threading.Thread</code>, implementing whatever extended behavior you wish. </p></li>\n</ol>\n\n<p>Also, as you noted in your comment, <code>insinstance(current_thread(), ThreadSubclass)</code> will return <code>True</code>, meaning you can use both options and be assured that your task will have access to whatever extra behavior you've implemented in your subclass.</p>\n"}, {"comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1513811010, "post_id": 47915448, "comment_id": 82799231, "body": "Nice use of decorator. Hadn&#39;t thought of that."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1513811574, "post_id": 47915448, "comment_id": 82799361, "body": "As a fan of the film Idiocracy, I liked it better before the edit."}], "tags": [], "owner": {"reputation": 30697, "user_id": 31667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/082b069c287878a1bd5731f44c8f10e7?s=128&d=identicon&r=PG", "display_name": "viraptor", "link": "https://stackoverflow.com/users/31667/viraptor"}, "is_accepted": false, "score": 1, "last_activity_date": 1513811195, "last_edit_date": 1513811195, "creation_date": 1513810021, "answer_id": 47915448, "question_id": 47913963, "link": "https://stackoverflow.com/questions/47913963/accessing-self-from-thread-target/47915448#47915448", "title": "Accessing `self` from thread target", "body": "<p>The simplest and most readable answer here is: use <code>current_thread()</code>. You can use various weird ways to pass the thread as a parameter, but there's no good reason for that. Calling <code>current_thread()</code> is the standard approach which is shorter than all the alternatives and will not confuse other developers. Don't try to overthink/overengineer this:</p>\n\n<pre><code>def runnable():\n    thread = threading.current_thread()\n\nThread(target=runnable).start()\n</code></pre>\n\n<p>If you want to hide it a bit and change for aesthetic reasons, you can try:</p>\n\n<pre><code>def with_current_thread(f):\n    return f(threading.current_thread())\n\n@with_current_thread\ndef runnable(thread):\n    print(thread.name)\n\nThread(target=runnable).start()\n</code></pre>\n\n<p>If this is not good enough, you may get better answers by describing why you think the parameter passing is better / more correct for your use case.</p>\n"}], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1144, "favorite_count": 0, "accepted_answer_id": 47915326, "answer_count": 2, "score": 4, "last_activity_date": 1513811195, "creation_date": 1513801965, "last_edit_date": 1513808531, "question_id": 47913963, "link": "https://stackoverflow.com/questions/47913963/accessing-self-from-thread-target", "title": "Accessing `self` from thread target", "body": "<p>According to a number of sources, including <a href=\"https://stackoverflow.com/q/660961/2988730\">this question</a>, passing a runnable as the <code>target</code> parameter in <a href=\"https://docs.python.org/3/library/threading.html#threading.Thread\" rel=\"nofollow noreferrer\"><code>__init__</code></a> (with or without <code>args</code> and <code>kwargs</code>) is preferable to extending the <code>Thread</code> class.</p>\n\n<p>If I create a runnable, how can I pass the thread it is running on as <code>self</code> to it without extending the <code>Thread</code> class? For example, the following would work fine:</p>\n\n<pre><code>class MyTask(Thread):\n    def run(self):\n        print(self.name)\nMyTask().start()\n</code></pre>\n\n<p>However, I can't see a good way to get this version to work:</p>\n\n<pre><code>def my_task(t):\n    print(t.name)\nThread(target=my_task, args=(), kwargs={}).start()\n</code></pre>\n\n<p>This question is a followup to <a href=\"https://stackoverflow.com/q/47912701/2988730\">Python - How can I implement a &#39;stoppable&#39; thread?</a>, which I answered, but possibly incompletely.</p>\n\n<p><strong>Update</strong></p>\n\n<p>I've thought of a hack to do this using <a href=\"https://docs.python.org/3/library/threading.html#threading.current_thread\" rel=\"nofollow noreferrer\"><code>current_thread()</code></a>:</p>\n\n<pre><code>def my_task():\n    print(current_thread().name)\nThread(target=my_task).start()\n</code></pre>\n\n<p>Problem: calling a function to get a parameter that should ideally be passed in.</p>\n\n<p><strong>Update #2</strong></p>\n\n<p>I have found an even hackier solution that makes <code>current_thread</code> seem much more attractive:</p>\n\n<pre><code>class ThreadWithSelf(Thread):\n    def __init__(self, **kwargs):\n        args = kwargs.get('args', ())\n        args = (self,) + tuple(args)\n        kwargs[args] = args\n        super().__init__(**kwargs)\nThreadWithSelf(target=my_task).start()\n</code></pre>\n\n<p>Besides being incredibly ugly (e.g. by <em>forcing</em> the user to use keywords only, even if that is the recommended way in the documentation), this completely defeats the purpose of not extending <code>Thread</code>.</p>\n\n<p><strong>Update #3</strong></p>\n\n<p>Another ridiculous (and unsafe) solution: to pass in a mutable object via <code>args</code> and to update it afterwards:</p>\n\n<pre><code>def my_task(t):\n    print(t[0].name)\ncontainer = []\nt = Thread(target=my_task, args=(container,))\ncontainer[0] = t\nt.start()\n</code></pre>\n\n<p>To avoid synchronization issues, you could kick it up a notch and implement another layer of ridiculousness:</p>\n\n<pre><code> def my_task(t, i):\n     print(t[i].name)\n container = []\n container[0] = Thread(target=my_task, args=(container, 0))\n container[1] = Thread(target=my_task, args=(container, 1))\n for t in container:\n     t.start()\n</code></pre>\n\n<p>I am still looking for a legitimate answer.</p>\n"}, {"tags": ["python", "pandas", "sorting", "dataframe"], "comments": [{"owner": {"reputation": 998, "user_id": 6725706, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5ufma.jpg?s=128&g=1", "display_name": "mrhallak", "link": "https://stackoverflow.com/users/6725706/mrhallak"}, "edited": false, "score": 0, "creation_date": 1513802038, "post_id": 47913881, "comment_id": 82795687, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/32528850/how-to-sort-descending-an-alphanumeric-pandas-index\">how to sort descending an alphanumeric pandas index.</a>"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1513805568, "post_id": 47913881, "comment_id": 82797297, "body": "Hmm, do the strings need to be sorted as well? Or is it okay if they just come after the numbers?"}], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 2, "last_activity_date": 1513802029, "creation_date": 1513802029, "answer_id": 47913975, "question_id": 47913881, "link": "https://stackoverflow.com/questions/47913881/how-to-sort-a-pandas-dataframe-by-a-column-that-has-both-numbers-and-strings/47913975#47913975", "title": "How to sort a pandas dataframe by a column that has both numbers and strings?", "body": "<p>By using <code>natsort</code> </p>\n\n<pre><code>from natsort import natsorted\n\ndf.set_index('col0').reindex(natsorted(df.col0.tolist(), key=lambda y: y.lower())).reset_index()\nOut[736]: \n        col0    col1  col2  col4\n0         34  865665   296     0\n1         56  865700   297     0\n2        100  865628   292     5\n3  '1ZE7999'  865545    20    20\n4  'R022428'  865584   297     0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 7, "last_activity_date": 1513802368, "creation_date": 1513802368, "answer_id": 47914046, "question_id": 47913881, "link": "https://stackoverflow.com/questions/47913881/how-to-sort-a-pandas-dataframe-by-a-column-that-has-both-numbers-and-strings/47914046#47914046", "title": "How to sort a pandas dataframe by a column that has both numbers and strings?", "body": "<p><code>pd.to_numeric</code> + <code>sort_values</code> + <code>loc</code> - </p>\n\n<pre><code>df.loc[pd.to_numeric(df.col0, errors='coerce').sort_values().index]\n\n        col0    col1  col2  col4\n3         34  865665   296     0\n4         56  865700   297     0\n5        100  865628   292     5\n1  '1ZE7999'  865545    20    20\n2  'R022428'  865584   297     0\n</code></pre>\n\n<hr>\n\n<p><strong>Details</strong></p>\n\n<p><code>pd.to_numeric</code> coerces non-integral values to <code>NaN</code> - </p>\n\n<pre><code>i = pd.to_numeric(df.col0, errors='coerce')\ni\n\n1      NaN\n2      NaN\n3     34.0\n4     56.0\n5    100.0\nName: col0, dtype: float64\n</code></pre>\n\n<p><code>sort_values</code> sorts the column, ignoring NaNs.</p>\n\n<pre><code>j = i.sort_values()\nj\n\n3     34.0\n4     56.0\n5    100.0\n1      NaN\n2      NaN\nName: col0, dtype: float64\n</code></pre>\n\n<p>Observe the index. All you need to do is use the index to <em>reindex</em> the dataframe. Either <code>loc</code> or <code>reindex</code> will do it.</p>\n\n<pre><code>df.loc[j.index]\n\n        col0    col1  col2  col4\n3         34  865665   296     0\n4         56  865700   297     0\n5        100  865628   292     5\n1  '1ZE7999'  865545    20    20\n2  'R022428'  865584   297     0\n</code></pre>\n\n\n\n<pre><code>df.reindex(index=j.index)\n\n        col0    col1  col2  col4\n3         34  865665   296     0\n4         56  865700   297     0\n5        100  865628   292     5\n1  '1ZE7999'  865545    20    20\n2  'R022428'  865584   297     0\n</code></pre>\n\n<p>If you need to reset the index, that's easily done.</p>\n\n<pre><code>df.loc[j.index].reset_index(drop=True)\n\n        col0    col1  col2  col4\n0         34  865665   296     0\n1         56  865700   297     0\n2        100  865628   292     5\n3  '1ZE7999'  865545    20    20\n4  'R022428'  865584   297     0\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 9047343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d9bfa29340199a3872ae47b05679c91?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Manjarrez", "link": "https://stackoverflow.com/users/9047343/miguel-manjarrez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2948, "favorite_count": 0, "accepted_answer_id": 47914046, "answer_count": 2, "score": 3, "last_activity_date": 1513802368, "creation_date": 1513801573, "question_id": 47913881, "link": "https://stackoverflow.com/questions/47913881/how-to-sort-a-pandas-dataframe-by-a-column-that-has-both-numbers-and-strings", "title": "How to sort a pandas dataframe by a column that has both numbers and strings?", "body": "<p>I have a dataframe that looks like this</p>\n\n<pre><code>         col0         col1  col2   col4\n         1    '1ZE7999'  865545   20    20\n         2    'R022428'  865584  297     0\n         3    34         865665  296     0 \n         4    56         865700  297     0\n         5    100        865628  292     5\n</code></pre>\n\n<p>I want to sort it by 'col0', first the numerical values, then the strings, the way that Excel sorts </p>\n\n<pre><code>       col0         col1  col2   col4\n  3    34         865665  296     0 \n  4    56         865700  297     0\n  5    100        865628  292     5\n  1    '1ZE7999'  865545   20    20\n  2    'R022428'  865584  297     0\n</code></pre>\n\n<p>I used </p>\n\n<pre><code>df.sort_values(by='col1', ascending=True)\n</code></pre>\n\n<p>But that does not sort it that way, it sorts it from 0-9 then a-z</p>\n\n<pre><code>      col0         col1  col2   col4\n 1    '1ZE7999'  865545   20    20\n 5    100        865628  292     5\n 3    34         865665  296     0 \n 4    56         865700  297     0\n 2    'R022428'  865584  297     0\n</code></pre>\n"}, {"tags": ["python", "google-cloud-platform", "fabric"], "answers": [{"tags": [], "owner": {"reputation": 472, "user_id": 8309589, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5d7c1cf7b0b7f4539355908c74887ae9?s=128&d=identicon&r=PG&f=1", "display_name": "glux", "link": "https://stackoverflow.com/users/8309589/glux"}, "is_accepted": false, "score": 0, "last_activity_date": 1513882500, "creation_date": 1513882500, "answer_id": 47931097, "question_id": 47913880, "link": "https://stackoverflow.com/questions/47913880/fabric-detect-host-os-information-through-env-gateway/47931097#47931097", "title": "Fabric - detect host os information through env.gateway", "body": "<p>No entirely sure what was going on here, but I ended up copying and pasting the script from another backup file that was working and the code properly executes. If anyone is interested, below is the working script:</p>\n\n<pre><code>#!  /usr/bin/env python\n# -*- coding: utf-8 -*-\n\nfrom fabric.api import env, run, sudo, task\nfrom googleapiclient.discovery import build\nfrom oauth2client.client import GoogleCredentials\n\ncredentials = GoogleCredentials.get_application_default()\ncompute = build('compute', 'v1', credentials=credentials)\n\n# set to path of private key\nenv.key_filename = 'google_compute_engine'\nforward_agent = True\n\n\n@task\n# gets bastion host and sets env.gateway to be used as ssh gateway\ndef ag_get_bh(project):\n    request = compute.instances().aggregatedList(project=project)\n    response = request.execute()\n\n    for zone, instances in response['items'].items():\n        for host in instances.get(\"instances\", []):\n            if host['status'] == 'RUNNING':\n                if 'bh' in host['name']:\n                    env.gateway = host['networkInterfaces'][0]['accessConfigs'][0]['natIP']\n            else:\n                print('No bastion host found')\n\n\n@task\n# gets running hosts in a single project across all zones\ndef ag_get_host(project):\n    request = compute.instances().aggregatedList(project=project)\n    response = request.execute()\n\n    env.hosts = []\n    for zone, instances in response['items'].items():\n        for host in instances.get(\"instances\", []):\n            if host['status'] == 'RUNNING':\n                env.hosts.append(host['name'])\n\n\n@task\n# gets uptime\ndef uptime():\n    run('uptime')\n\n\n@task\n# gets disk space\ndef disk_space():\n    run('df -h')\n\n\n# gets OS platform to be used in sec_update()\ndef get_platform():\n    x = sudo(\"python -c 'import platform; print(platform.platform())'\")\n    if x.failed:\n        raise Exception(\"Python not installed\")\n    else:\n        return x\n\n@task\n# runs OS security updates\ndef sec_update():\n    if 'redhat' in get_platform().lower():\n        sudo('echo 3 &gt; /proc/sys/vm/drop_caches')\n        sudo('yum -y --disablerepo=rhui* install google-rhui-client-rhel7')\n        sudo('yum update yum -y')\n        sudo('yum update-minimal --security -y')\n    elif 'centos' in get_platform().lower():\n        sudo('echo 3 &gt; /proc/sys/vm/drop_caches')\n        sudo('yum update yum -y')\n        sudo('yum update-minimal --security -y')\n    elif 'ubuntu' or 'debian' in get_platform().lower():\n        sudo('apt-get install unattended-upgrades')\n        sudo('unattended-upgrades -v')\n    else:\n        print(\"No supported OS found\")\n</code></pre>\n"}], "owner": {"reputation": 472, "user_id": 8309589, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5d7c1cf7b0b7f4539355908c74887ae9?s=128&d=identicon&r=PG&f=1", "display_name": "glux", "link": "https://stackoverflow.com/users/8309589/glux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530997784, "creation_date": 1513801560, "last_edit_date": 1530997784, "question_id": 47913880, "link": "https://stackoverflow.com/questions/47913880/fabric-detect-host-os-information-through-env-gateway", "title": "Fabric - detect host os information through env.gateway", "body": "<pre><code>#!  /usr/bin/env python\n# -*- coding: utf-8 -*-\n\nfrom fabric.api import env, run, sudo, task\nfrom googleapiclient.discovery import build\nfrom oauth2client.client import GoogleCredentials\n\ncredentials = GoogleCredentials.get_application_default()\ncompute = build('compute', 'v1', credentials=credentials)\n# sets static project\n# project = 'test1'\n\nenv.key_filename = 'google_compute_engine'\nforward_agent = True\n\n@task\n# gets bastion host and sets env.gateway to be used as ssh gateway\ndef ag_get_bh(project):\n    request = compute.instances().aggregatedList(project=project)\n    response = request.execute()\n\n    for zone, instances in response['items'].items():\n        for host in instances.get(\"instances\", []):\n            if host['status'] == 'RUNNING':\n                if 'bh' in host['name']:\n                    env.gateway = host['networkInterfaces'][0]['accessConfigs'][0]['natIP']\n            else:\n                print('No bastion host found')\n\n@task\n# gets running hosts in a single project across all zones\ndef ag_get_host(project):\n    request = compute.instances().aggregatedList(project=project)\n    response = request.execute()\n\n    env.hosts = []\n    for zone, instances in response['items'].items():\n        for host in instances.get(\"instances\", []):\n            if host['status'] == 'RUNNING':\n                env.hosts.append(host['name'])\n\n@task\n# identifies OS platform to be used in sec_update()\ndef get_platform():\n    x = sudo(\"python -c 'import platform; print(platform.platform())'\")\n    if x.failed:\n        raise Exception(\"Python not installed\")\n    else:\n        return x\n    print(x)\n\n@task\n# runs security updates\ndef sec_update():\n    if 'redhat' or 'centos' in get_platform().lower():\n        sudo('echo 3 &gt; /proc/sys/vm/drop_caches')\n        sudo('yum -y --disablerepo=rhui* install google-rhui-client-rhel7')\n        sudo('yum update yum -y')\n        sudo('yum update-minimal --security -y')\n    elif 'ubuntu' or 'debian' in get_platform().lower():\n        sudo('apt-get install unattended-upgrades')\n        sudo('unattended-upgrades \u2013v')\n</code></pre>\n\n<p>The above code gets the bastion host which is my <code>env.gateway</code>, then it gets hosts from GCP API and sets <code>env.hosts</code>, it then checks the host OS and then applies security updates. </p>\n\n<p>Only when running the script through an ssh proxy (<code>env.gateway</code>) <code>get_platform()</code> never runs and thus the if statement in sec_updates never executes so my OS specific logic never executes. When running locally, (not using <code>env.gateway</code>) <code>get_platform()</code> executes properly. Any ideas?</p>\n"}, {"tags": ["python", "interface", "abstract-class", "abc"], "answers": [{"comments": [{"owner": {"reputation": 8590, "user_id": 851699, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/jDiPy.png?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/851699/peter"}, "edited": false, "score": 0, "creation_date": 1513881412, "post_id": 47930397, "comment_id": 82830334, "body": "Yes!  That&#39;s exactly what I was looking for - somehow my searching hasn&#39;t found it before.  Thanks."}], "tags": [], "owner": {"reputation": 6414, "user_id": 4829258, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/3CeCz.jpg?s=128&g=1", "display_name": "Tai", "link": "https://stackoverflow.com/users/4829258/tai"}, "is_accepted": true, "score": 1, "last_activity_date": 1514259444, "last_edit_date": 1514259444, "creation_date": 1513879408, "answer_id": 47930397, "question_id": 47913849, "link": "https://stackoverflow.com/questions/47913849/python-library-for-function-interfaces/47930397#47930397", "title": "Python Library for Function Interfaces?", "body": "<p>PyContract seems like a library that you would want to look into. </p>\n\n<p>See <a href=\"https://pypi.python.org/pypi/PyContracts\" rel=\"nofollow noreferrer\">https://pypi.python.org/pypi/PyContracts</a></p>\n\n<p>See also </p>\n\n<ul>\n<li><p><a href=\"https://stackoverflow.com/questions/6025714/tools-for-static-type-checking-in-python\">Tools for static type checking in Python</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/41356784/how-to-use-type-hints-in-python-3-6\">How to use type hints in python 3.6?</a> </p></li>\n</ul>\n"}], "owner": {"reputation": 8590, "user_id": 851699, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/jDiPy.png?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/851699/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "accepted_answer_id": 47930397, "answer_count": 1, "score": 2, "last_activity_date": 1514259444, "creation_date": 1513801410, "last_edit_date": 1513875521, "question_id": 47913849, "link": "https://stackoverflow.com/questions/47913849/python-library-for-function-interfaces", "title": "Python Library for Function Interfaces?", "body": "<p>I'm wondering if there's an existing Python libary/technique for enforcing function interfaces/\"contracts\".  Something like ABC but for functions.</p>\n\n<p>E.g.  An example with made-up syntax:</p>\n\n<pre><code>@implements(i_state_updater)\ndef my_update(position, state, forces):\n    ... \n    return new_position, new_state\n</code></pre>\n\n<p>Where</p>\n\n<pre><code>@declare_interface\ndef i_state_updater(position, state, forces):\n    \"\"\"\n    :param position: ...\n    :returns: ....\n    \"\"\"\n</code></pre>\n\n<p>So that when I pass this function as an argument I can verify it, eg</p>\n\n<pre><code>def compute_trajectory(update_func, n_steps, initial_state):\n    \"\"\"\n    :param update_func: An i_state_updater\n    ...\n    \"\"\"\n    assert update_func.implements(i_state_updater)\n</code></pre>\n\n<p>Python's existing abc module does something like this, but only for classes.  Is there an equivalent out there for functions?</p>\n"}, {"tags": ["python", "matplotlib", "ubuntu-server"], "comments": [{"owner": {"reputation": 5160, "user_id": 2995038, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mtJf0.png?s=128&g=1", "display_name": "Tay2510", "link": "https://stackoverflow.com/users/2995038/tay2510"}, "edited": false, "score": 0, "creation_date": 1513801484, "post_id": 47913841, "comment_id": 82795395, "body": "Who do you mean you &quot;cannot install matplotlib via pip&quot; on Ubuntu Server?"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1513807800, "post_id": 47913841, "comment_id": 82798177, "body": "It seems pretty useless to use a plotting function like <code>hist</code> to calculate some values from the data. Just calculate the histogram and send it to the receipient without using matplotlib at all."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1513818521, "post_id": 47913841, "comment_id": 82801092, "body": "You can use X forwarding to run a GUI program on any compatible remote server, but that&#39;s nothing to do with python or matplotlib"}], "answers": [{"comments": [{"owner": {"reputation": 389, "user_id": 7999308, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c75f787550e842b3928168226ca7ecbd?s=128&d=identicon&r=PG", "display_name": "Gevorg Davoian", "link": "https://stackoverflow.com/users/7999308/gevorg-davoian"}, "edited": false, "score": 0, "creation_date": 1514030189, "post_id": 47916493, "comment_id": 82873943, "body": "Thanks a lot, I think this is the best solution for my problem"}], "tags": [], "owner": {"reputation": 14954, "user_id": 230468, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c41468488de903f8284d03d2980bc3bc?s=128&d=identicon&r=PG&f=1", "display_name": "DilithiumMatrix", "link": "https://stackoverflow.com/users/230468/dilithiummatrix"}, "is_accepted": true, "score": 2, "last_activity_date": 1513818292, "creation_date": 1513818292, "answer_id": 47916493, "question_id": 47913841, "link": "https://stackoverflow.com/questions/47913841/matplotlib-on-os-without-gui/47916493#47916493", "title": "Matplotlib on OS without GUI", "body": "<p>If you just want the histogram values, then just calculate them directly using something like <a href=\"https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.histogram.html\" rel=\"nofollow noreferrer\"><code>numpy.histogram</code></a>.</p>\n"}], "owner": {"reputation": 389, "user_id": 7999308, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c75f787550e842b3928168226ca7ecbd?s=128&d=identicon&r=PG", "display_name": "Gevorg Davoian", "link": "https://stackoverflow.com/users/7999308/gevorg-davoian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 47916493, "answer_count": 1, "score": -1, "last_activity_date": 1513818292, "creation_date": 1513801357, "question_id": 47913841, "link": "https://stackoverflow.com/questions/47913841/matplotlib-on-os-without-gui", "title": "Matplotlib on OS without GUI", "body": "<p>Though the question may seem strange, sometimes it really can be useful. For example, I have to build a histogram using <code>plt.hist</code>, but I am not going to plot it, only to send the heights of the bars to the front-end side for actual plotting, and since the back-end side is run on an Ubuntu Server instance, I cannot install <code>matplotlib</code> via <code>pip</code>. Is it possible in general? Are there any other options in my particular case?</p>\n"}, {"tags": ["python", "sorting", "merge"], "comments": [{"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1513801709, "post_id": 47913824, "comment_id": 82795509, "body": "Simply swapping <code>&lt;</code> with <code>&gt;</code> between <code>left[0]</code> and <code>right[0]</code> should do it if that wasn&#39;t obvious..."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1513801789, "post_id": 47913824, "comment_id": 82795554, "body": "Am I supposed to believe you wrote that code and the explanations but aren&#39;t able to change <code>&lt;</code> to <code>&gt;</code>?"}, {"owner": {"reputation": 2947, "user_id": 1401510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a5af28aa2061081b0f9516d4e66831a?s=128&d=identicon&r=PG&f=1", "display_name": "nkr", "link": "https://stackoverflow.com/users/1401510/nkr"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1513802016, "post_id": 47913824, "comment_id": 82795679, "body": "@StefanPochmann They didn&#39;t claim to have written it. This is obviously homework."}], "answers": [{"comments": [{"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 41, "user_id": 8964866, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3b9455309efb6772836fa0d362c70dcd?s=128&d=identicon&r=PG&f=1", "display_name": "user8964866", "link": "https://stackoverflow.com/users/8964866/user8964866"}, "edited": false, "score": 0, "creation_date": 1513812247, "post_id": 47913877, "comment_id": 82799549, "body": "@user8964866 - to preserve stability, the compare should be <code>left[0] &gt;= right[0]</code> . If the elements are equal, you want to move the left element to preserve the original order on equal elements."}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 0, "last_activity_date": 1513801556, "creation_date": 1513801556, "answer_id": 47913877, "question_id": 47913824, "link": "https://stackoverflow.com/questions/47913824/how-to-modify-my-merge-sort-code-to-sort-from-biggest-to-smallest/47913877#47913877", "title": "How to modify my merge sort code to sort from biggest to smallest", "body": "<p>You only make comparisons in one place in your code: during the merge, when you compare <code>left[0]</code> and <code>right[0]</code>. Reversing the sense of the comparison will reverse the overall sort. So to sort in <em>decreasing</em> order, add the <em>larger</em> of <code>left[0]</code> and <code>right[0]</code> to the output, i.e., if <code>left[0] &gt; right[0]: newest.append(left[0])</code>.</p>\n"}], "owner": {"reputation": 41, "user_id": 8964866, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3b9455309efb6772836fa0d362c70dcd?s=128&d=identicon&r=PG&f=1", "display_name": "user8964866", "link": "https://stackoverflow.com/users/8964866/user8964866"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 401, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1513801556, "creation_date": 1513801273, "question_id": 47913824, "link": "https://stackoverflow.com/questions/47913824/how-to-modify-my-merge-sort-code-to-sort-from-biggest-to-smallest", "title": "How to modify my merge sort code to sort from biggest to smallest", "body": "<p>I know this is trivial but can't find my way around this.I have this merge sort code which sort from smallest to biggest, now i have been asked to modify the code to sort from biggest to smallest, but can't seem to find my way. Please any help will be appreciated thanks.</p>\n\n<p>Here is the commented code:</p>\n\n<pre><code>def mergesort(lst):\n\n    #Then, what does it do? mergesort should recursively\n    #run mergesort on the left and right sides of lst until\n    #it's given a list only one item. So, if lst has only\n    #one item, we should just return that one-item list.\n\n    if len(lst) &lt;= 1:\n        return lst\n\n    #Otherwise, we should call mergesort separately on the\n    #left and right sides. Since each successive call to\n    #mergesort sends half as many items, we're guaranteed\n    #to eventually send it a list with only one item, at\n    #which point we'll stop calling mergesort again.\n    else:\n\n        #Floor division on the length of the list will\n        #find us the index of the middle value.\n        midpoint = len(lst) // 2\n\n        #lst[:midpoint] will get the left side of the\n        #list based on list slicing syntax. So, we want\n        #to sort the left side of the list alone and\n        #assign the result to the new smaller list left.\n        left = mergesort(lst[:midpoint])\n\n        #And same for the right side.\n        right = mergesort(lst[midpoint:])\n\n\n        #So, left and right now hold sorted lists of\n        #each half of the original list. They might\n        #each have only one item, or they could each\n        #have several items.\n\n        #Now we want to compare the first items in each\n        #list one-by-one, adding the smaller to our new\n        #result list until one list is completely empty.\n\n        newlist = []\n        while len(left) and len(right) &gt; 0:\n\n            #If the first number in left is lower, add\n            #it to the new list and remove it from left\n            if left[0] &lt; right[0]:\n                newlist.append(left[0])\n                del left[0]\n\n            #Otherwise, add the first number from right\n            #to the new list and remove it from right\n            else:\n                newlist.append(right[0])\n                del right[0]\n\n        #When the while loop above is done, it means\n        #one of the two lists is empty. Because both\n        #lists were sorted, we can now add the remainder\n        #of each list to the new list. The empty list\n        #will have no items to add, and the non-empty\n        #list will add its items in order.\n\n        newlist.extend(left)\n        newlist.extend(right)\n\n        #newlist is now the sorted version of lst! So,\n        #we can return it. If this was a recursive call\n        #to mergesort, then this sends a sorted half-\n        #list up the ladder. If this was the original\n        #call, then this is the final sorted list.\n\n        return newlist\n\n#Let's try it out!\nprint(mergesort([2, 5, 3, 8, 6, 9, 1, 4, 7]))\n</code></pre>\n\n<p>This prints</p>\n\n<pre><code>[1, 2, 3, 4, 5, 6, 7, 8, 9]\n</code></pre>\n\n<p>But am expected to print:</p>\n\n<pre><code>[9, 8, 7, 6, 5, 4, 3, 2, 1]\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "python-2.7", "gimp", "gimpfu"], "comments": [{"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1513801917, "post_id": 47913774, "comment_id": 82795624, "body": "I&#39;d try to edit <code>gimpfy.py</code> by adding a temporary line with <code>raise Exception(sys.path)</code>, to see what do paths look like form the Gimp side at invocation time."}, {"owner": {"reputation": 11, "user_id": 5824023, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207416560705558/picture?type=large", "display_name": "Nodine", "link": "https://stackoverflow.com/users/5824023/nodine"}, "reply_to_user": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 2, "creation_date": 1513804611, "post_id": 47913774, "comment_id": 82796848, "body": "I think i figured it out. The way python-fu works is that it interacts with a gimp process, so it has to be executed not via python standalone but via gimp, which of course makes it severly harder to work with."}, {"owner": {"reputation": 5658, "user_id": 6378557, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/GVoNt.png?s=128&g=1", "display_name": "xenoid", "link": "https://stackoverflow.com/users/6378557/xenoid"}, "edited": false, "score": 0, "creation_date": 1513814576, "post_id": 47913774, "comment_id": 82800135, "body": "@Nodine What makes it hard is Windows, that doesn&#39;t like windowed processes to also write to a console. Debugging Gimp python scripts under Linux is really easy. But see <a href=\"https://www.gimp-forum.net/Thread-Debugging-python-fu-scripts-in-Windows\" rel=\"nofollow noreferrer\">gimp-forum.net/Thread-Debugging-python-fu-scripts-in-Windows</a> for some hints."}, {"owner": {"reputation": 448, "user_id": 4292939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c603ee08f703ee120ae1cd27d4351766?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Schumacher", "link": "https://stackoverflow.com/users/4292939/michael-schumacher"}, "edited": false, "score": 0, "creation_date": 1514547177, "post_id": 47913774, "comment_id": 83012912, "body": "You could try to use a better shell on the Windows platforms, for example the bash from MinGW. Served me well when I was still building GIMP for the Windows platforms using msys+mingw..."}], "owner": {"reputation": 11, "user_id": 5824023, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207416560705558/picture?type=large", "display_name": "Nodine", "link": "https://stackoverflow.com/users/5824023/nodine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 268, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1513801919, "creation_date": 1513801041, "last_edit_date": 1513801919, "question_id": 47913774, "link": "https://stackoverflow.com/questions/47913774/gimp-python-fu-external-editor-importerror", "title": "Gimp python-fu external editor importerror", "body": "<p>I'm looking to build a script using Gimps build in Python extension.</p>\n\n<p>I have run into a problem though, and these are my symptoms, perhaps someone here is able to help me.</p>\n\n<p>When I run Python-fu from Gimp I get what you would expect, and a clear indication that everything is working.</p>\n\n<p>System details:\nWin10 - 64 bit</p>\n\n<p>Gimp 2.8.22\nPython.exe - version 2.7 (the one included in Gimp installation and seperate install to be sure)</p>\n\n<p>Gimp message:</p>\n\n<pre><code>GIMP 2.8.22 Python Console\nPython 2.7.10 (default, May 23 2015, 09:40:32) [MSC v.1500 32 bit (Intel)]\n&gt;&gt;&gt; sys.path\n['C:\\\\Program Files\\\\GIMP 2\\\\lib\\\\gimp\\\\2.0\\\\plug-ins',\n 'C:\\\\Program Files\\\\GIMP 2\\\\32\\\\lib\\\\gimp\\\\2.0\\\\python',\n 'C:\\\\Program Files\\\\GIMP 2\\\\Python\\\\python27.zip',\n 'C:\\\\Program Files\\\\GIMP 2\\\\Python\\\\DLLs',\n 'C:\\\\Program Files\\\\GIMP 2\\\\Python\\\\lib',\n 'C:\\\\Program Files\\\\GIMP 2\\\\Python\\\\lib\\\\plat-win',\n 'C:\\\\Program Files\\\\GIMP 2\\\\Python\\\\lib\\\\lib-tk',\n 'C:\\\\Program Files\\\\GIMP 2\\\\Python',\n 'C:\\\\Program Files\\\\GIMP 2\\\\Python\\\\lib\\\\site-packages',\n 'C:\\\\Program Files\\\\GIMP 2\\\\Python\\\\lib\\\\site-packages\\\\gtk-2.0',\n 'C:\\\\Program Files\\\\GIMP 2\\\\Python\\\\lib\\\\site-packages']     \n&gt;&gt;&gt; gimp\n&lt;module 'gimp' from 'C:\\Program Files\\GIMP 2\\32\\lib\\gimp\\2.0\\python\\gimp.pyd'&gt;\n</code></pre>\n\n<p>However when I run a script with that entire path included, from the python.exe file I get:</p>\n\n<pre><code>C:\\Python27\\python.exe D:/P5/m-cworkshop/Sprites2d/spritofu.py Traceback (most recent call last): File \"D:/P5/m-cworkshop/Sprites2d/spritofu.py\", line 2, in &lt;module&gt; from gimpfu import *\n  File \"C:\\Program Files\\GIMP 2\\32\\lib\\gimp\\2.0\\python\\gimpfu.py\", line 76, in &lt;module&gt;\n    import gimp\nImportError: DLL load failed: Det angivne modul blev ikke fundet. (Translation edit!: The indicated module was not found)\nProcess finished with exit code 1\n</code></pre>\n\n<p>So its clearly able to pick up the gimpfu.py file, but not the gimp.pyd file right next to it.</p>\n\n<p>Here is what i have been able to verify so far:\nMy python installations are 32 bit.\nThis happens on both my computers.\nThis happens no matter how many things I include in the path, as long as I include the <code>gimpfu.py</code> path.</p>\n"}, {"tags": ["python", "arrays", "json", "web-scraping"], "comments": [{"owner": {"reputation": 2832, "user_id": 3735873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K93GY.jpg?s=128&g=1", "display_name": "tonypdmtr", "link": "https://stackoverflow.com/users/3735873/tonypdmtr"}, "edited": false, "score": 1, "creation_date": 1513804624, "post_id": 47913709, "comment_id": 82796853, "body": "Why not <code>data[-2]</code> instead of <code>data[len(data)-2]</code> all over the place?"}], "answers": [{"comments": [{"owner": {"reputation": 30832, "user_id": 459745, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/08a2c6f16c0d4dad20d169d9d76848ac?s=128&d=identicon&r=PG", "display_name": "Hai Vu", "link": "https://stackoverflow.com/users/459745/hai-vu"}, "reply_to_user": {"reputation": 2832, "user_id": 3735873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K93GY.jpg?s=128&g=1", "display_name": "tonypdmtr", "link": "https://stackoverflow.com/users/3735873/tonypdmtr"}, "edited": false, "score": 0, "creation_date": 1513806065, "post_id": 47914390, "comment_id": 82797494, "body": "<code>data[-6:-1]</code> ==&gt; 5 rows immediately before the last, <code>data[-6:]</code> ==&gt; last 6 rows"}], "tags": [], "owner": {"reputation": 30832, "user_id": 459745, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/08a2c6f16c0d4dad20d169d9d76848ac?s=128&d=identicon&r=PG", "display_name": "Hai Vu", "link": "https://stackoverflow.com/users/459745/hai-vu"}, "is_accepted": true, "score": 1, "last_activity_date": 1513804196, "creation_date": 1513804196, "answer_id": 47914390, "question_id": 47913709, "link": "https://stackoverflow.com/questions/47913709/comparing-a-single-value-to-multiple-values-from-arrays-in-python/47914390#47914390", "title": "Comparing a single value to multiple values from arrays in python", "body": "<p>First, your data are not all converted to numbers, many of them are in string format. To convert them all to floating point numbers, you can use this formula:</p>\n\n<pre><code>data = [[float(x) for x in row] for row in data]\n</code></pre>\n\n<p>Next, in the if statement, you are comparing a number with a sequence of numbers. What you want is to compare this number with the largest in the sequence:</p>\n\n<pre><code>if current_price &gt; max(last_prices):\n    print \"the current price is greater than the last 5\"\n</code></pre>\n\n<p>Putting it all together:</p>\n\n<pre><code># code to obtain data is the same\n\nPRICE = 4\nVOLUME = 5\nLAST_ROW = -1\n\ndata = [[float(x) for x in row] for row in data]\n\ncurrent_price = data[LAST_ROW][PRICE]\ncurrent_volume = data[LAST_ROW][VOLUME]\nlast_prices = tuple(row[PRICE] for row in data[-6:-1])\nlast_volumes = tuple(row[VOLUME] for row in data[-6:-1])\n\nprint 'current_price =', current_price\nprint 'current_volume =', current_volume\nprint 'last_prices =', last_prices\nprint 'last_volumes =', last_volumes\n\nif current_price &gt; max(last_prices):\n    print \"the current price is greater than the last 5\"\n\nif current_volume &gt; max(last_volumes):\n    print \"the current volume is higher than the last 5\"\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 4544676, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/706594359455828/picture?type=large", "display_name": "Hellos Addme", "link": "https://stackoverflow.com/users/4544676/hellos-addme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 720, "favorite_count": 0, "accepted_answer_id": 47914390, "answer_count": 1, "score": -1, "last_activity_date": 1514504459, "creation_date": 1513800778, "last_edit_date": 1514504459, "question_id": 47913709, "link": "https://stackoverflow.com/questions/47913709/comparing-a-single-value-to-multiple-values-from-arrays-in-python", "title": "Comparing a single value to multiple values from arrays in python", "body": "<p>My code looks like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import requests\nimport re\nimport mechanize\nimport urllib\nimport json\n\nhtmltext = urllib.urlopen(\"https://www.binance.com/api/v1/klines?symbol=BCDBTC&amp;interval=4h\")\n\ndata = json.load(htmltext)\n\ncurrent_price= data[len(data)-1][4]\nlast_prices= (data[len(data)-2][4],data[len(data)-3][4],data[len(data)-4][4],data[len(data)-5][4],data[len(data)-6][4])\nlast_volumes= (data[len(data)-2][5],data[len(data)-3][5],data[len(data)-4][5],data[len(data)-5][5],data[len(data)-6][5])\ncurrent_volume= data[len(data)-1][5]\n\nprint current_price\nprint last_prices\nif current_price &gt; last_prices:\n    print \"the current price is greater than the last 5\"\nprint current_volume\nprint last_volumes\nif current_volume &gt; last_volumes:\n    print \"the current volume is higher than the last 5\"\n</code></pre>\n\n<p>But my output is this:</p>\n\n<pre><code>0.00495600\n(u'0.00492500', u'0.00366300', u'0.00332800', u'0.00333800', u'0.00308000')\nthe current price is greater than the last 5\n938.01000000\n(u'29687.32500000', u'14740.03800000', u'9366.77400000', u'10324.83200000', u'44953.53400000')\nthe current volume is higher than the last 5\n</code></pre>\n\n<p>The problem here is the current volume is certainly not greater than the last 5 but it's still printing it out regardless </p>\n\n<p>I'm grabbing data from here\n<a href=\"https://www.binance.com/tradeDetail.html?symbol=BCD_BTC\" rel=\"nofollow noreferrer\">https://www.binance.com/tradeDetail.html?symbol=BCD_BTC</a></p>\n"}, {"tags": ["python", "sql", "hiveql"], "comments": [{"owner": {"reputation": 1105, "user_id": 1274578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4a12ec24634222bf047f2ea532f9c25?s=128&d=identicon&r=PG", "display_name": "Anand", "link": "https://stackoverflow.com/users/1274578/anand"}, "edited": false, "score": 1, "creation_date": 1513800841, "post_id": 47913700, "comment_id": 82795107, "body": "Your original table is not normalized. You should have a separate father table and child table."}, {"owner": {"reputation": 157, "user_id": 5221819, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153397342591348/picture?type=large", "display_name": "Joohun Lee", "link": "https://stackoverflow.com/users/5221819/joohun-lee"}, "reply_to_user": {"reputation": 1105, "user_id": 1274578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4a12ec24634222bf047f2ea532f9c25?s=128&d=identicon&r=PG", "display_name": "Anand", "link": "https://stackoverflow.com/users/1274578/anand"}, "edited": false, "score": 0, "creation_date": 1513801468, "post_id": 47913700, "comment_id": 82795386, "body": "I don&#39;t get it about normalization on original table. can you elaborate it more detail with simple example?"}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 5221819, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153397342591348/picture?type=large", "display_name": "Joohun Lee", "link": "https://stackoverflow.com/users/5221819/joohun-lee"}, "edited": false, "score": 0, "creation_date": 1513880897, "post_id": 47929306, "comment_id": 82830079, "body": "Thanks Evan for your time, this is close to the output I want although it doesn&#39;t create data either json or list format."}, {"owner": {"reputation": 1792, "user_id": 6672746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba91b391da1f42e87437934cdd764a67?s=128&d=identicon&r=PG&f=1", "display_name": "Evan", "link": "https://stackoverflow.com/users/6672746/evan"}, "reply_to_user": {"reputation": 157, "user_id": 5221819, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153397342591348/picture?type=large", "display_name": "Joohun Lee", "link": "https://stackoverflow.com/users/5221819/joohun-lee"}, "edited": false, "score": 0, "creation_date": 1513907674, "post_id": 47929306, "comment_id": 82839398, "body": "Ah, got it. There&#39;s an easy enough change to get a list - see revised code :)"}], "tags": [], "owner": {"reputation": 1792, "user_id": 6672746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba91b391da1f42e87437934cdd764a67?s=128&d=identicon&r=PG&f=1", "display_name": "Evan", "link": "https://stackoverflow.com/users/6672746/evan"}, "is_accepted": true, "score": 2, "last_activity_date": 1513907707, "last_edit_date": 1513907707, "creation_date": 1513874715, "answer_id": 47929306, "question_id": 47913700, "link": "https://stackoverflow.com/questions/47913700/how-to-combine-rows-and-put-into-single-row-in-dataframe-by-sql-or-python/47929306#47929306", "title": "How to combine rows and put into single row in dataframe by sql or python", "body": "<p>Quick dirty inefficient hack, but it avoids for loops. Would love to have a better solution; I assume the multiple df copies and multiple merges could be simplified.</p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame({\n    \"Child Name\" : [\"Peter\",\"James\",\"Liz\",\"Paul\",\"Shirly\",\"Eva\"],\n    \"Child Age\" : [\"5\",\"15\",\"2\",\"6\",\"11\",\"9\"],\n    \"Father Name\" : [\"Richard\",\"Doug\",\"Doug\",\"Richard\",\"Charles\",\"Chris\"],\n    \"Father Age\" : [\"40\",\"45\",\"45\",\"40\",\"33\",\"29\"] })\n\ng2 = df.groupby(['Father Name'])[\"Child Name\"].apply(list).reset_index()\ng3 = df.groupby(['Father Name'])[\"Child Age\"].apply(list).reset_index()\ng4 = df[[\"Father Name\", \"Father Age\"]].drop_duplicates()\n\ndf2 = g2.merge(g4)\ndf2 = df2.merge(g3)\nprint(df2)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>  Father Name     Child Name Father Age Child Age\n0     Charles       [Shirly]         33      [11]\n1       Chris          [Eva]         29       [9]\n2        Doug   [James, Liz]         45   [15, 2]\n3     Richard  [Peter, Paul]         40    [5, 6]\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 5221819, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153397342591348/picture?type=large", "display_name": "Joohun Lee", "link": "https://stackoverflow.com/users/5221819/joohun-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "accepted_answer_id": 47929306, "answer_count": 1, "score": 0, "last_activity_date": 1513907707, "creation_date": 1513800736, "last_edit_date": 1513811840, "question_id": 47913700, "link": "https://stackoverflow.com/questions/47913700/how-to-combine-rows-and-put-into-single-row-in-dataframe-by-sql-or-python", "title": "How to combine rows and put into single row in dataframe by sql or python", "body": "<p>I'd like to aggregate rows in certain column base on the relationship with other column and create certain column which contain aggregated data in json format. </p>\n\n<p>This is the example.</p>\n\n<p>Original data table</p>\n\n<pre><code>Child Name     Child Age    Father Name    Father Age\n     Peter             5        Richard            40\n     James            15           Doug            45\n       Liz             2           Doug            45\n      Paul             6        Richard            40\n    Shirly            11        Charles            33\n       Eva             9          Chris            29\n</code></pre>\n\n<p>Converted Data table will be either </p>\n\n<pre><code>Father Name    Father Age     Children \n    Richard            40     {\"Peter\":\"5\", \"Paul\":\"6\"}\n       Doug            45     {\"James\":\"15\",\"Liz\":\"2\"}\n    Charles            33     {\"Shirly\" : \"11\"}\n      Chris            29     {\"Eva\" : \"9\"}\n</code></pre>\n\n<p>Or </p>\n\n<pre><code>Father Name    Father Age     Children Name       Children Age\n    Richard            40     {\"Peter\", \"Paul\"}      {\"5\",\"6\"}\n       Doug            45     {\"James\", \"Liz\"}      {\"15\",\"2\"}\n    Charles            33     {\"Shirly\"}                {\"11\"}\n      Chris            29     {\"Eva\"}                    {\"9\"}\n</code></pre>\n\n<p>My code is </p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame({\n    \"Child Name\" : [\"Peter\",\"James\",\"Liz\",\"Paul\",\"Shirly\",\"Eva\"],\n    \"Child Age\" : [\"5\",\"15\",\"2\",\"6\",\"11\",\"9\"],\n    \"Father Name\" : [\"Richard\",\"Doug\",\"Doug\",\"Richard\",\"Charles\",\"Chris\"],\n    \"Father Age\" : [\"40\",\"45\",\"45\",\"40\",\"33\",\"29\"] })\n\n print df\n\ng1 = df.groupby([\"Father Name\"])[\"Child Name\"].apply(\", \".join).reset_index()\ng1.columns = ['Father Name','Children Name']\nprint g1\n</code></pre>\n\n<p>and the output will be </p>\n\n<pre><code>  Father Name   Children Name\n0     Charles          Shirly\n1       Chris             Eva\n2        Doug      James, Liz\n3     Richard     Peter, Paul\n</code></pre>\n\n<p>I can't figure out how to add \"Father Age\" and \"Children Age\" in the columns.\nhow can I convert this in dataframe in most efficient way?\nI'd like to avoid loop via python as it will take long to process.</p>\n\n<p>thanks,</p>\n"}, {"tags": ["python", "sockets", "cookies"], "owner": {"reputation": 87, "user_id": 8210184, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b542ee3c75cc4b1d3ee96c032eb36015?s=128&d=identicon&r=PG&f=1", "display_name": "olexii.lavrov", "link": "https://stackoverflow.com/users/8210184/olexii-lavrov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 858, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1513800696, "creation_date": 1513800696, "question_id": 47913692, "link": "https://stackoverflow.com/questions/47913692/cookies-via-string-from-socket-in-python-3-6", "title": "Cookies via string from socket in python 3.6", "body": "<p>Before all answers, want to explain, that I cant use library like \"requests\" only socket, so that's why I asked to help me.\nI have a server on python which is generating HTTP response on any request.</p>\n\n<pre><code>def listenToClient(self, client):\n        size = 2048\n        while True:\n            try:\n                data = client.recv(size)\n                if data:\n                    self.cookie[\"session\"] = random.randint(0, 1000000000)\n                    expiration = datetime.datetime.now() + datetime.timedelta(days=30)\n                    self.cookie[\"session\"][\"domain\"] = str(self.bind_host)\n                    self.cookie[\"session\"][\"path\"] = \"/\"\n                    self.cookie[\"session\"][\"expires\"] = expiration.strftime(\"%a, %d-%b-%Y %H:%M:%S PST\")\n                    response_http = \"HTTP/1.1 200 OK\\nAccess-Control-Allow-Origin: *\\nAccess-Control-Allow-Headers:Content-Type, Set-Cookie, *\\n%s\\nContent-Type: application/json\\n\\n%s\\n\" % (self.cookie.output(), json.dumps(response_json))\n                    client.send(response_http.encode())\n                    client.close()\n                else:\n                    raise error('Client disconnected')\n            except:\n                client.close()\n                return False\n</code></pre>\n\n<p>Everything is working and it returning correctly response, like :</p>\n\n<pre><code>curl -X POST http://host:9999 -d '{\"test\":\"test\"}'\n\"{\\\"logged\\\":True}\"\n</code></pre>\n\n<p>response which i printed : </p>\n\n<pre><code>HTTP/1.1 200 OK\nAccess-Control-Allow-Origin: *\nAccess-Control-Allow-Headers:Content-Type, Set-Cookie, *\nSet-Cookie: session=344772952; Domain=0.0.0.0; expires=Fri, 19-Jan-2018 20:04:36 PST; Path=/\nContent-Type: application/json\n\n\"{\\\"logged\\\":True}\"\n</code></pre>\n\n<p>And in browser is getting correctly... but.. cookies is not setting in browser.... why? </p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "pandas", "numpy", "recode"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1513800696, "post_id": 47913654, "comment_id": 82795037, "body": "get_dummies .........................."}, {"owner": {"reputation": 864, "user_id": 8627559, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1a5ba760dc2b2ec8cabee703ad415414?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Dresl", "link": "https://stackoverflow.com/users/8627559/lucas-dresl"}, "edited": false, "score": 0, "creation_date": 1513801199, "post_id": 47913654, "comment_id": 82795263, "body": "or use <code>np.select</code>"}, {"owner": {"reputation": 339, "user_id": 8451069, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7d9970dc05dfd4080962e3b265e37a09?s=128&d=identicon&r=PG&f=1", "display_name": "mitch", "link": "https://stackoverflow.com/users/8451069/mitch"}, "edited": false, "score": 0, "creation_date": 1513802059, "post_id": 47913654, "comment_id": 82795700, "body": "I&#39;m not sure get_dummies is really the right solution. It will recode differently each time right? also sometimes I have 100s of categories but I only want to create binary variables for the top 25 this is what i want to keep consistent."}], "owner": {"reputation": 339, "user_id": 8451069, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7d9970dc05dfd4080962e3b265e37a09?s=128&d=identicon&r=PG&f=1", "display_name": "mitch", "link": "https://stackoverflow.com/users/8451069/mitch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513800506, "creation_date": 1513800506, "question_id": 47913654, "link": "https://stackoverflow.com/questions/47913654/recoding-categorical-variables-into-binary-variables-in-the-same-way-on-multiple", "title": "Recoding categorical variables into binary variables in the same way on multiple data sets", "body": "<p>I built a model using binary variables to represent categorical variables. I am trying to us the same binning and recodes I used in my research environment on production data. I use pyodc to query and pull realtime data that has the same elements as my development data did have, before I recoded it into binary variables. I want to keep the same designations from my development data in order to be able to reuse all my old code. When I developed this I used label encoder to change the strings to numbers, then code similar to below to make binary variables. this is proving to be difficult on production data as the number of categories is highly variable. how do I keep it consistent?</p>\n\n<pre><code>le = preprocessing.LabelEncoder()\nle.fit(df.NAME_VKORG)\ndf[\"NAME_VKORG_Auto\"] = le.transform(df.NAME_VKORG)\nle.fit(df.NAME_VTWEG)\ndf[\"NAME_VTWEG_Auto\"] = le.transform(df.NAME_VTWEG)\nle.fit(df.NAME_LGMNG)\ndf[\"NAME_LGMNG_Auto\"] = le.transform(df.NAME_LGMNG)\nle.fit(df.NAME_POSNR)\ndf[\"NAME_POSNR_Auto\"] = le.transform(df.NAME_POSNR)\nle.fit(df.NAME_WERKS)\ndf[\"NAME_WERKS_Auto\"] = le.transform(df.NAME_WERKS)\nle.fit(df.NAME_LGORT)\ndf[\"NAME_LGORT_Auto\"] = le.transform(df.NAME_LGORT)\nle.fit(df.NAME_CODE)\ndf[\"NAME_CODE_Auto\"] = le.transform(df.NAME_CODE)\nle.fit(df.NAME_VSTEL)\ndf[\"NAME_VSTEL_Auto\"] = le.transform(df.NAME_VSTEL)\nle.fit(df.NAME_LPRIO)\ndf[\"NAME_LPRIO_Auto\"] = le.transform(df.NAME_LPRIO)\n\ndf.loc[:,\"NAME_LGMNG_1\"] = np.where(df[\"NAME_LGMNG_Auto\"] == 1,1,0)\ndf.loc[:,\"NAME_LGMNG_2\"] = np.where(df[\"NAME_LGMNG_Auto\"] == 2,1,0)\ndf.loc[:,\"NAME_LGMNG_3\"] = np.where(df[\"NAME_LGMNG_Auto\"] == 3,1,0)\ndf.loc[:,\"NAME_LGMNG_4\"] = np.where(df[\"NAME_LGMNG_Auto\"] == 4,1,0)\n\n#Should be noted there are many more of the above, just used some for \nexamples\n</code></pre>\n"}, {"tags": ["python", "for-loop", "jupyter-notebook"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 2, "creation_date": 1513800233, "post_id": 47913568, "comment_id": 82794828, "body": "What&#39;s the input? What data do you have in <code>chessboard</code>?"}, {"owner": {"reputation": 2851, "user_id": 8003790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/439b528b13c53ea231f24bb46136c0a1?s=128&d=identicon&r=PG&f=1", "display_name": "IMCoins", "link": "https://stackoverflow.com/users/8003790/imcoins"}, "edited": false, "score": 0, "creation_date": 1513800392, "post_id": 47913568, "comment_id": 82794900, "body": "This code seems to be useless imho."}, {"owner": {"reputation": 49, "user_id": 9089598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c695784095e7044cba047518bb2b83b6?s=128&d=identicon&r=PG", "display_name": "Rayyan", "link": "https://stackoverflow.com/users/9089598/rayyan"}, "edited": false, "score": 0, "creation_date": 1514388545, "post_id": 47913568, "comment_id": 82957413, "body": "I&#39;m still learning, IMCoins"}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1513802760, "creation_date": 1513802760, "answer_id": 47914112, "question_id": 47913568, "link": "https://stackoverflow.com/questions/47913568/how-on-earth-does-this-code-work/47914112#47914112", "title": "How on earth does this code work", "body": "<p>A rook can move horizontally or vertically. So a rook can attack another rook if they're in the same row or column of the chessboard, i.e. there are at least two rooks in the same row or column.</p>\n\n<p>This code seems to assume that the only pieces in the chessboard are rooks. If a square has a piece the value of the list element is <code>1</code>, otherwise it's <code>0</code>.</p>\n\n<p>The first <code>for</code> loop goes through each row of the chessboard, counting the number of squares that have a piece in that row. If the count is more than <code>1</code>, the rooks are not safe, and it returns <code>false</code>.</p>\n\n<p>The second <code>for</code> loop does the same thing, but goes by column instead of row.</p>\n\n<p>If neither loop returns <code>false</code>, it means all the rooks are safe, and it returns <code>true</code> at the end.</p>\n"}], "owner": {"reputation": 49, "user_id": 9089598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c695784095e7044cba047518bb2b83b6?s=128&d=identicon&r=PG", "display_name": "Rayyan", "link": "https://stackoverflow.com/users/9089598/rayyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1513802760, "creation_date": 1513800123, "last_edit_date": 1513800568, "question_id": 47913568, "link": "https://stackoverflow.com/questions/47913568/how-on-earth-does-this-code-work", "title": "How on earth does this code work", "body": "<p>I am a bit confused on how this code works. What it does is check whether the rook piece can move somewhere without getting attacked by another root.\nHere's the code:</p>\n\n<pre><code>def rooks_are_safe(chessboard):\n    n = len(chessboard)\n\n    for row_i in range(n):\n        row_count = 0\n        for col_i in range(n):\n            row_count += chessboard[row_i][col_i]\n        if row_count &gt; 1:\n            return False\n\n    for col_i in range(n):\n        col_count = 0\n        for row_i in range(n):\n            col_count += chessboard[row_i][col_i]\n        if col_count &gt; 1:\n            return False\n\n    return True\n</code></pre>\n"}, {"tags": ["python", "tkinter", "pip", "applet", "jython"], "comments": [{"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 2, "creation_date": 1513800310, "post_id": 47913548, "comment_id": 82794861, "body": "You cannot run tkinter code on a webpage. Only webpage code (HTML, CSS, Javascript) will run on a webpage."}, {"owner": {"reputation": 67, "user_id": 8875986, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/23de9a3ad90e9ed890b3a2c66dd53206?s=128&d=identicon&r=PG&f=1", "display_name": "R watt", "link": "https://stackoverflow.com/users/8875986/r-watt"}, "reply_to_user": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1513800450, "post_id": 47913548, "comment_id": 82794924, "body": "@Novel Will java work? If so how would I then put it on a web page?"}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 1, "creation_date": 1513800570, "post_id": 47913548, "comment_id": 82794975, "body": "No, Java does not run on a webpage either. However Python (or Java) can be used to generate HTML, using a &quot;web framework&quot; like Django or Flask."}], "answers": [{"tags": [], "owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "is_accepted": false, "score": 1, "last_activity_date": 1513803169, "creation_date": 1513803169, "answer_id": 47914201, "question_id": 47913548, "link": "https://stackoverflow.com/questions/47913548/running-python-code-on-a-webpage/47914201#47914201", "title": "Running python code on a webpage", "body": "<p>You can run a <a href=\"https://en.wikipedia.org/wiki/Java_applet\" rel=\"nofollow noreferrer\">Java applet</a> in a browser. And you can write the applet in Python and compile it to Java byte code using <a href=\"http://www.jython.org/\" rel=\"nofollow noreferrer\">Jython</a>. But you cannot use Tkinter and other GUI libraries in applets.</p>\n"}, {"comments": [{"owner": {"reputation": 117, "user_id": 12042720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67fe98efe67a02ff6613cf09d01a828e?s=128&d=identicon&r=PG&f=1", "display_name": "Vik", "link": "https://stackoverflow.com/users/12042720/vik"}, "edited": false, "score": 0, "creation_date": 1587059483, "post_id": 48247232, "comment_id": 108367609, "body": "Is there a step by step tutorial for this?"}], "tags": [], "owner": {"reputation": 1, "user_id": 9183668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32e553245ca452d73aeb42dae6948596?s=128&d=identicon&r=PG", "display_name": "user9183668", "link": "https://stackoverflow.com/users/9183668/user9183668"}, "is_accepted": false, "score": 0, "last_activity_date": 1515911566, "creation_date": 1515911566, "answer_id": 48247232, "question_id": 47913548, "link": "https://stackoverflow.com/questions/47913548/running-python-code-on-a-webpage/48247232#48247232", "title": "Running python code on a webpage", "body": "<p>For a different approach a Tkinter GUI can be displayed in a webpage by the use of noVNC (HTML5 vncviewer), an Xvnc server (like TigerVNC) and a window manager (like matchbox-window-manager). At the server end per request you need a webserver configured to launch an Xdisplay via Xvnc, the window manager and the Tkinter gui using the same Xdisplay. You can configure a web page to use an iframe HTML tag to display the Tkinter GUI via noVNC. For an example of this check out CloudTk. It is written in Tcl using TclHttpd but I am sure this can be duplicated in Python. It shows a Tkinter GUI displayed in a web page using iframes but the code is executed on the server. Go to</p>\n\n<p><a href=\"https://wiki.tcl.tk/41972\" rel=\"nofollow noreferrer\">https://wiki.tcl.tk/41972</a></p>\n"}], "owner": {"reputation": 67, "user_id": 8875986, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/23de9a3ad90e9ed890b3a2c66dd53206?s=128&d=identicon&r=PG&f=1", "display_name": "R watt", "link": "https://stackoverflow.com/users/8875986/r-watt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1195, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1515911566, "creation_date": 1513800047, "last_edit_date": 1513803035, "question_id": 47913548, "link": "https://stackoverflow.com/questions/47913548/running-python-code-on-a-webpage", "title": "Running python code on a webpage", "body": "<p>I have a python code that uses a gui (tkinter) and I would like to be able to use it on a website.<br>\nHow can this be done?<br>\nFor the code to work on my laptop I had to do a pip download nltk so this would also need to be done.</p>\n\n<p>Many thanks,\nReuben   </p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "edited": false, "score": 0, "creation_date": 1513799601, "post_id": 47913381, "comment_id": 82794557, "body": "You need to implement <code>Edge.__eq__</code>, not <code>Plan.__eq__</code>. If you did, show the implementation of <code>Edge.__init__</code> and <code>Edge.__eq__</code>."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1513799898, "post_id": 47913381, "comment_id": 82794671, "body": "Please reduce your original program to the shortest possible <b>complete</b> program that demonstrates the error. See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for more info."}, {"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 3, "creation_date": 1513799900, "post_id": 47913381, "comment_id": 82794673, "body": "Do you alter any part of the edge&#39;s information after putting it into the set? For instance, if the <code>source</code> or its id changes, the hash will change and the set will no longer work correctly."}, {"owner": {"reputation": 89, "user_id": 5712523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70e7c7d400c0a0863eded4201fb2735?s=128&d=identicon&r=PG&f=1", "display_name": "drw", "link": "https://stackoverflow.com/users/5712523/drw"}, "edited": false, "score": 0, "creation_date": 1513800473, "post_id": 47913381, "comment_id": 82794940, "body": "It&#39;s true that right before the error, I mutate either the source or the sink in the edge. If set duplication is based on _<i>hash_</i> then this is the problem."}, {"owner": {"reputation": 89, "user_id": 5712523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70e7c7d400c0a0863eded4201fb2735?s=128&d=identicon&r=PG&f=1", "display_name": "drw", "link": "https://stackoverflow.com/users/5712523/drw"}, "edited": false, "score": 0, "creation_date": 1513800651, "post_id": 47913381, "comment_id": 82795019, "body": "Removing the edge and then adding a new one fixes the issue. Thanks."}, {"owner": {"reputation": 1723, "user_id": 5840062, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q1ILS.jpg?s=128&g=1", "display_name": "Menglong Li", "link": "https://stackoverflow.com/users/5840062/menglong-li"}, "edited": false, "score": 0, "creation_date": 1513825956, "post_id": 47913381, "comment_id": 82802707, "body": "It will be better to just implement the _<i>hash_</i> method like:return hash((self.source.ID, self.sink.ID, self.label)).  you can do hash((x, y)) to avoid XORing yourself."}], "owner": {"reputation": 89, "user_id": 5712523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70e7c7d400c0a0863eded4201fb2735?s=128&d=identicon&r=PG&f=1", "display_name": "drw", "link": "https://stackoverflow.com/users/5712523/drw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1513800244, "creation_date": 1513799270, "last_edit_date": 1513799925, "question_id": 47913381, "link": "https://stackoverflow.com/questions/47913381/python-3-class-attribute-set-contains-duplicate", "title": "Python 3 class attribute set contains == duplicate", "body": "<p>I have a class \"Plan'' that has an attribute \"edges\", which is a set.</p>\n\n<p>For example:</p>\n\n<pre><code>Plan.edges\n\nOut:\n{Edge literal-b851-True-bel --0--&gt; strut-23-b495,\n Edge strut-23-b495 --effect-of--&gt; literal-8b06-True-at,\n Edge cam-step-shot-24-8734 --effect-of--&gt; literal-b851-True-bel,\n Edge strut-23-b495 --effect-of--&gt; literal-8b06-True-at}\n</code></pre>\n\n<p>Each edge has a source node, a string label, and a sink node.\nConfused that I saw a duplicate, I let</p>\n\n<pre><code>edges = list(Plan.edges)\n\nOut:\n[Edge literal-b851-True-bel --0--&gt; strut-23-b495,\n Edge strut-23-b495 --effect-of--&gt; literal-8b06-True-at,\n Edge cam-step-shot-24-8734 --effect-of--&gt; literal-b851-True-bel,\n Edge strut-23-b495 --effect-of--&gt; literal-8b06-True-at]\n</code></pre>\n\n<p>and ask </p>\n\n<pre><code>edges[1] == edges[3]\n\nOut:\nTrue\n</code></pre>\n\n<p>It's my understanding that == operator is criteria for duplication (which I've customized using __eq__ hook). I've checked that the source and sink nodes are also equal via == operator. I also checked popping them out of the set and the == operator still found the edges to be equal. A simple fix is <code>Plan.edges = set(list(Plan.edges))</code> \n(this gives desired result) but I plan on running this over a million times so I'd prefer not to add unnecessary code, especially when I do not understand the root cause of the problem. </p>\n\n<pre><code>Edge.__eq__(e2, e4)\nEdge.__eq__(e4, e2)\ne2.__eq__(e4)\ne4.__eq__(e2)\ne2 == e4\ne4 == e2\n</code></pre>\n\n<p>all return True.</p>\n\n<p>My question is, how is this possible, and what can I do to prevent this? I'm running python 3.3.2. Thanks in advance for your help.</p>\n\n<p>... in class Edge</p>\n\n<pre><code>class Edge:\n__slots__ = 'source', 'sink', 'label'\ndef __init__(self, source, sink, label):\n    self.source=  source\n    self.sink = sink\n    self.label = label\n\ndef __eq__(self, other):\n        if other is None:\n            return False\n        if self.source.ID == other.source.ID and self.sink.ID == other.sink.ID and self.label == other.label:\n            return True\n        return False\n\n    def __ne__(self, other):\n        return (not self.__eq__(other))\n\n    def __hash__(self):\n        return hash(self.source.ID) ^ hash(self.sink.ID) ^ hash(self.label)\n</code></pre>\n"}, {"tags": ["python", "recursion", "binary"], "comments": [{"owner": {"reputation": 3836, "user_id": 4152153, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/s6Znl.png?s=128&g=1", "display_name": "dcg", "link": "https://stackoverflow.com/users/4152153/dcg"}, "edited": false, "score": 1, "creation_date": 1513799464, "post_id": 47913377, "comment_id": 82794508, "body": "Not related to the fix but you need to do <code>return max_bitonic(a)</code>, otherwise you&#39;re returning <code>None</code> instead of the value you want."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 2, "creation_date": 1513799635, "post_id": 47913377, "comment_id": 82794572, "body": "What if <code>len(a) == 2</code> and <code>mid &gt;= a[((len(a)&#47;&#47;2)-1)]</code>?"}, {"owner": {"reputation": 1, "user_id": 9012138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70ec64aeb12b5fde2102cbfc03082b49?s=128&d=identicon&r=PG&f=1", "display_name": "Michelle Jackson", "link": "https://stackoverflow.com/users/9012138/michelle-jackson"}, "edited": false, "score": 0, "creation_date": 1513800127, "post_id": 47913377, "comment_id": 82794781, "body": "if len(a)==2, mid should be a[1] and  a[0:0] should be deleted, right? so the next time the program is running, len(a)==1 and itll return a[0]"}, {"owner": {"reputation": 6008, "user_id": 1983772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2f429722c8167802b89cbe4d324aa1e?s=128&d=identicon&r=PG", "display_name": "Norrius", "link": "https://stackoverflow.com/users/1983772/norrius"}, "edited": false, "score": 1, "creation_date": 1513800725, "post_id": 47913377, "comment_id": 82795055, "body": "Try to run this: <code>a = [0,1,2]; del a[0:0]; print(a)</code>"}, {"owner": {"reputation": 25081, "user_id": 4804629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vGzEm.jpg?s=128&g=1", "display_name": "splash58", "link": "https://stackoverflow.com/users/4804629/splash58"}, "edited": false, "score": 0, "creation_date": 1513801405, "post_id": 47913377, "comment_id": 82795361, "body": "<a href=\"https://eval.in/922955\" rel=\"nofollow noreferrer\">eval.in/922955</a>"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1513802700, "post_id": 47913377, "comment_id": 82796026, "body": "<code>print a[0:0]</code> gives <code>[]</code>, so nothing gets deleted, and you&#39;re stuck doing taking the same branch with each recursion."}], "owner": {"reputation": 1, "user_id": 9012138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70ec64aeb12b5fde2102cbfc03082b49?s=128&d=identicon&r=PG&f=1", "display_name": "Michelle Jackson", "link": "https://stackoverflow.com/users/9012138/michelle-jackson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513799601, "creation_date": 1513799256, "last_edit_date": 1513799601, "question_id": 47913377, "link": "https://stackoverflow.com/questions/47913377/recursive-binary-search-for-find-max-in-bitonic-list-in-python", "title": "Recursive binary search for find max in bitonic list in Python", "body": "<p>Beginner here, I hope someone can help me. I wrote a code in Python to find the max value from a bitonic list by using a recursively called binary search. The problem is, that I get a max recursion depth error and I just can't figure out, why.</p>\n\n<p>basically Im reducing the length of the list by removing elements that are lower than my mid value. So, anyone has an idea, what is wrong here? Thanks in advance!</p>\n\n<pre><code>def max_bitonic(a):\n    if len(a) == 1:\n        return a[0]\n    else:\n        mid = a[len(a) // 2]\n        if mid &gt;= a[((len(a)//2)-1)]:\n            del a[0 : ((len(a)//2)-1)]\n            max_bitonic(a)\n        else:\n            del a[(len(a)//2)]\n            max_bitonic(a)\n</code></pre>\n"}, {"tags": ["python", "pandas", "pandas-groupby", "sklearn-pandas"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1513803180, "post_id": 47913343, "comment_id": 82796229, "body": "you could create simple code with example data so everyone could run it and create solution."}], "answers": [{"tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": false, "score": 3, "last_activity_date": 1513805062, "last_edit_date": 1513805062, "creation_date": 1513804567, "answer_id": 47914464, "question_id": 47913343, "link": "https://stackoverflow.com/questions/47913343/how-to-groupby-and-map-by-two-columns-pandas-dataframe/47914464#47914464", "title": "How to groupby and map by two columns pandas dataframe", "body": "<p>You can use </p>\n\n<ul>\n<li><code>groupby().means()</code> to calculate means </li>\n<li><code>reset_index()</code> to convert indexes <code>Cat1</code>, <code>Cat2</code> into columns again</li>\n<li><code>merge(how='left', )</code> to join two dataframes like tables in database (<code>LEFT JOIN</code> in <code>SQL</code>).</li>\n</ul>\n\n<p>.</p>\n\n<pre><code>headers = ['Cat1', 'Cat2', 'surface']\n\ntrain_data = [\n    [1, 3, 10],\n    [2, 2, 12],\n    [3, 1, 12],\n    [1, 3, 5],\n    [2, 2, 10],\n    [3, 2, 13],\n]\n\ntest_data = [\n    [1, 2],\n    [2, 1],\n    [3, 1],\n    [1, 3],\n    [2, 3],\n    [3, 1],\n]\nimport pandas as pd\n\ntrain = pd.DataFrame(train_data, columns=headers)\ntest = pd.DataFrame(test_data, columns=headers[:-1])\n\nprint('--- train ---')\nprint(train)\n\nprint('--- test ---')\nprint(test)\n\nprint('--- means ---')\nmeans = train.groupby(['Cat1', 'Cat2']).mean()\nprint(means)\n\nprint('--- means (dataframe) ---')\nmeans = means.reset_index(level=['Cat1', 'Cat2'])\nprint(means)\n\nprint('--- result ----')\nresult = pd.merge(df2, means, on=['Cat1', 'Cat2'], how='left')\nprint(result)\n\nprint('--- result (fillna)---')\nresult = result.fillna(0)\nprint(result)\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>--- train ---\n   Cat1  Cat2  surface\n0     1     3       10\n1     2     2       12\n2     3     1       12\n3     1     3        5\n4     2     2       10\n5     3     2       13\n--- test ---\n   Cat1  Cat2\n0     1     2\n1     2     1\n2     3     1\n3     1     3\n4     2     3\n5     3     1\n--- means ---\n           surface\nCat1 Cat2         \n1    3         7.5\n2    2        11.0\n3    1        12.0\n     2        13.0\n--- means (dataframe) ---\n   Cat1  Cat2  surface\n0     1     3      7.5\n1     2     2     11.0\n2     3     1     12.0\n3     3     2     13.0\n--- result ----\n   Cat1  Cat2  surface\n0     1     2      NaN\n1     2     1      NaN\n2     3     1     12.0\n3     1     3      7.5\n4     2     3      NaN\n5     3     1     12.0\n--- result (fillna)---\n   Cat1  Cat2  surface\n0     1     2      0.0\n1     2     1      0.0\n2     3     1     12.0\n3     1     3      7.5\n4     2     3      0.0\n5     3     1     12.0\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 9123885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3598aba54456fdb7ccf3f8a08afe534f?s=128&d=identicon&r=PG&f=1", "display_name": "John Karimov", "link": "https://stackoverflow.com/users/9123885/john-karimov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5434, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1513868703, "creation_date": 1513799114, "last_edit_date": 1513868703, "question_id": 47913343, "link": "https://stackoverflow.com/questions/47913343/how-to-groupby-and-map-by-two-columns-pandas-dataframe", "title": "How to groupby and map by two columns pandas dataframe", "body": "<p>i have a problem on python working with a pandas dataframe i'm trying to make a machine learning model predictin the surface . I have the surface column in the train dataframe and i don't have it in the test dataframe . So , i would to create some features based on the surface in the train like .</p>\n\n<pre><code>train['error_cat1'] = abs(train.groupby(train['cat1'])['surface'].transform('mean')  - train.surface.mean())\n</code></pre>\n\n<p>here i have set the values of grouby by \"cat\" feature with the mean of suface . Cool</p>\n\n<p>now i must add it to the test too . So , will use this method to map the values from the train for each groupby to the test row .</p>\n\n<pre><code>mp = {k: g['error_cat1'].tolist()[0] for k,g in train.groupby('cat1')}\ntest['error_cat1'] = test['cat1'].map(mp)\n</code></pre>\n\n<p>So , far there is no problem . Now , i would use two columns in groupby .</p>\n\n<pre><code>train['error_cat1_cat2'] = abs(train.groupby(train[['cat1','cat2']])['surface'].transform('mean')  - train.surface.mean())\n</code></pre>\n\n<p>but i don't know how to map it for test dataframe . Please can you help me handling this problem or give me some other methods so i can do it .</p>\n\n<p>Thanks</p>\n\n<p>for example my train is</p>\n\n<pre><code>+------+------+-------+\n| Cat1 | Cat2 | surface |\n+------+------+-------+\n| 1    | 3    | 10    |\n+------+------+-------+\n| 2    | 2    | 12    |\n+------+------+-------+\n| 3    | 1    | 12    |\n+------+------+-------+\n| 1    | 3    | 5     |\n+------+------+-------+\n| 2    | 2    | 10    |\n+------+------+-------+\n| 3    | 2    | 13    |\n+------+------+-------+\n</code></pre>\n\n<p>my test is</p>\n\n<pre><code>+------+------+\n| Cat1 | Cat2 |\n+------+------+\n| 1    | 2    |\n+------+------+\n| 2    | 1    |\n+------+------+\n| 3    | 1    |\n+------+------+\n| 1    | 3    |\n+------+------+\n| 2    | 3    |\n+------+------+\n| 3    | 1    |\n+------+------+\n</code></pre>\n\n<p>Now i would do a groupby mean surface on the cat1 and cat2 for example the mean surface on (cat1,cat2)=(1,3) is (10+5)/2 = 7.5</p>\n\n<p>Now , i must go to the test and map this value on the (cat1,cat2)=(1,3) rows .</p>\n\n<p>i hope that you have got me .</p>\n"}, {"tags": ["python", "django", "django-models", "django-rest-framework", "wagtail"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 6454889, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1448c8482d4d14dd33d10bc490bc4bc2?s=128&d=identicon&r=PG&f=1", "display_name": "Overflow2341313", "link": "https://stackoverflow.com/users/6454889/overflow2341313"}, "edited": false, "score": 0, "creation_date": 1513802635, "post_id": 47913727, "comment_id": 82795992, "body": "I tried that but whenever I run this management command it resets the time remaining to 1 hour for posts which are expired. Guess there&#39;s a bug somewhere in my code... I just tried this and a post which has the expire_at time set for 3 days ago has <code>expired = False</code> after running the command. Do these required page revision objects to exist?"}, {"owner": {"reputation": 61, "user_id": 6454889, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1448c8482d4d14dd33d10bc490bc4bc2?s=128&d=identicon&r=PG&f=1", "display_name": "Overflow2341313", "link": "https://stackoverflow.com/users/6454889/overflow2341313"}, "edited": false, "score": 0, "creation_date": 1513802999, "post_id": 47913727, "comment_id": 82796155, "body": "NEvermind it requires the page to be live + expired time to be less than the current time. Looking at the source code."}, {"owner": {"reputation": 18043, "user_id": 1853523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b28a2b9c38cb684fb7983d4d3c55db90?s=128&d=identicon&r=PG&f=1", "display_name": "gasman", "link": "https://stackoverflow.com/users/1853523/gasman"}, "edited": false, "score": 1, "creation_date": 1513852501, "post_id": 47913727, "comment_id": 82813643, "body": "Note that when you edit the expiry date, you need to publish the page again for the new expiry date to take effect - if you only hit &#39;save&#39;, it&#39;ll only be counted as a change to the draft version of the page."}], "tags": [], "owner": {"reputation": 1183, "user_id": 181793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077b7dd79bc5205ad802be73b1536f75?s=128&d=identicon&r=PG", "display_name": "tomd", "link": "https://stackoverflow.com/users/181793/tomd"}, "is_accepted": false, "score": 2, "last_activity_date": 1513800867, "creation_date": 1513800867, "answer_id": 47913727, "question_id": 47913326, "link": "https://stackoverflow.com/questions/47913326/wagtail-making-pages-expire/47913727#47913727", "title": "Wagtail making pages expire", "body": "<p>Yes, see <code>publish_scheduled_pages</code>:</p>\n\n<p><a href=\"http://docs.wagtail.io/en/v1.13.1/reference/management_commands.html#publish-scheduled-pages\" rel=\"nofollow noreferrer\">http://docs.wagtail.io/en/v1.13.1/reference/management_commands.html#publish-scheduled-pages</a></p>\n"}], "owner": {"reputation": 61, "user_id": 6454889, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1448c8482d4d14dd33d10bc490bc4bc2?s=128&d=identicon&r=PG&f=1", "display_name": "Overflow2341313", "link": "https://stackoverflow.com/users/6454889/overflow2341313"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513800867, "creation_date": 1513799037, "question_id": 47913326, "link": "https://stackoverflow.com/questions/47913326/wagtail-making-pages-expire", "title": "Wagtail making pages expire", "body": "<p>Is there a management command or something I should be running to make wagtail pick up expired pages?</p>\n\n<p>Example: I go into the admin dashboard and change the expiration time (not through the wagtail admin). </p>\n\n<p>Wagtail doesn't pick up that this post becomes expired / change the expired boolean to True. Since this is a non-editable field that isn't changeable through admin. Yes, I can mke my own but I'm curious as to why wagtail doesn't pick this up.</p>\n"}, {"tags": ["python", "python-3.x", "algorithm"], "comments": [{"owner": {"reputation": 664, "user_id": 9098899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9XjBg9sL9-s/AAAAAAAAAAI/AAAAAAAAAGs/1G1WcdPScmA/photo.jpg?sz=128", "display_name": "Bakhrom Rakhmonov", "link": "https://stackoverflow.com/users/9098899/bakhrom-rakhmonov"}, "edited": false, "score": 0, "creation_date": 1513799111, "post_id": 47913324, "comment_id": 82794345, "body": "and question is?"}, {"owner": {"reputation": 79, "user_id": 6393415, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-eqwIcF7q7s0/AAAAAAAAAAI/AAAAAAAAC5Y/ozF3moDau1U/photo.jpg?sz=128", "display_name": "Rushil Joshi", "link": "https://stackoverflow.com/users/6393415/rushil-joshi"}, "reply_to_user": {"reputation": 664, "user_id": 9098899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9XjBg9sL9-s/AAAAAAAAAAI/AAAAAAAAAGs/1G1WcdPScmA/photo.jpg?sz=128", "display_name": "Bakhrom Rakhmonov", "link": "https://stackoverflow.com/users/9098899/bakhrom-rakhmonov"}, "edited": false, "score": 0, "creation_date": 1513799178, "post_id": 47913324, "comment_id": 82794368, "body": "@BakhromRakhmonov question is italicized"}, {"owner": {"reputation": 2851, "user_id": 8003790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/439b528b13c53ea231f24bb46136c0a1?s=128&d=identicon&r=PG&f=1", "display_name": "IMCoins", "link": "https://stackoverflow.com/users/8003790/imcoins"}, "edited": false, "score": 0, "creation_date": 1513800823, "post_id": 47913324, "comment_id": 82795103, "body": "Show us what you tried, and I&#39;ll give you a hint on how to do this. :)"}, {"owner": {"reputation": 2851, "user_id": 8003790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/439b528b13c53ea231f24bb46136c0a1?s=128&d=identicon&r=PG&f=1", "display_name": "IMCoins", "link": "https://stackoverflow.com/users/8003790/imcoins"}, "edited": false, "score": 0, "creation_date": 1513801404, "post_id": 47913324, "comment_id": 82795359, "body": "Or just prove that you did your research, and I&#39;ll tell you."}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 6393415, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-eqwIcF7q7s0/AAAAAAAAAAI/AAAAAAAAC5Y/ozF3moDau1U/photo.jpg?sz=128", "display_name": "Rushil Joshi", "link": "https://stackoverflow.com/users/6393415/rushil-joshi"}, "edited": false, "score": 0, "creation_date": 1513800327, "post_id": 47913399, "comment_id": 82794865, "body": "Thanks for your reply! This only works on diagonals with a slope of 1, right? What if I needed to call fillSpaces(strMatrix, 0, 13), where the the diagonal is slanted heavily?"}, {"owner": {"reputation": 1853, "user_id": 6232665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41eeea507e28cddc2bc1efc3b2b73c45?s=128&d=identicon&r=PG&f=1", "display_name": "zenwraight", "link": "https://stackoverflow.com/users/6232665/zenwraight"}, "reply_to_user": {"reputation": 79, "user_id": 6393415, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-eqwIcF7q7s0/AAAAAAAAAAI/AAAAAAAAC5Y/ozF3moDau1U/photo.jpg?sz=128", "display_name": "Rushil Joshi", "link": "https://stackoverflow.com/users/6393415/rushil-joshi"}, "edited": false, "score": 0, "creation_date": 1513803060, "post_id": 47913399, "comment_id": 82796183, "body": "@RushilJoshi in that case you can see how many diagonals exists in that intervals like in 0 to 6 there will be 1 diagonal, 0 to 13 there will be 2 for n=7 and then you just mark the diagonals as *, you just want * to be present somewhere in between right"}], "tags": [], "owner": {"reputation": 1853, "user_id": 6232665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41eeea507e28cddc2bc1efc3b2b73c45?s=128&d=identicon&r=PG&f=1", "display_name": "zenwraight", "link": "https://stackoverflow.com/users/6232665/zenwraight"}, "is_accepted": false, "score": 1, "last_activity_date": 1513799364, "creation_date": 1513799364, "answer_id": 47913399, "question_id": 47913324, "link": "https://stackoverflow.com/questions/47913324/efficiently-filling-in-spaces-between-two-points-of-a-matrix/47913399#47913399", "title": "Efficiently filling in spaces between two points of a matrix", "body": "<p>From what I understand, this can be done in one for loop i.e O(n) complexity as you can fill in the diagonals on the go.</p>\n\n<p>Here is the pseudo code for it:-</p>\n\n<pre><code>for(int i=0; i&lt;n; i++) {\n  mat[i][i] = '*';\n}\n</code></pre>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 79, "user_id": 6393415, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-eqwIcF7q7s0/AAAAAAAAAAI/AAAAAAAAC5Y/ozF3moDau1U/photo.jpg?sz=128", "display_name": "Rushil Joshi", "link": "https://stackoverflow.com/users/6393415/rushil-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "closed_date": 1513808219, "answer_count": 1, "score": 0, "last_activity_date": 1513799914, "creation_date": 1513799036, "last_edit_date": 1513799914, "question_id": 47913324, "link": "https://stackoverflow.com/questions/47913324/efficiently-filling-in-spaces-between-two-points-of-a-matrix", "closed_reason": "Needs more focus", "title": "Efficiently filling in spaces between two points of a matrix", "body": "<p>Given an n*n matrix represented as a string of length n*n, such as: </p>\n\n<pre><code>strMatrix = \"......\n             ......\n             ......\n             ......\n             ......\n             ......\"\n</code></pre>\n\n<p>where n = 7, <em>what is the most efficient way to fill in the spaces between two indices</em>? For example, a function </p>\n\n<pre><code>fillSpaces(strMatrix, 0, 48)\n</code></pre>\n\n<p>would return:</p>\n\n<pre><code>            \"*.....\n             .*....\n             ..*...\n             ...*..\n             ....*.\n             .....*\"\n</code></pre>\n"}, {"tags": ["python", "pandas", "nlp"], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 2, "last_activity_date": 1513799233, "creation_date": 1513799233, "answer_id": 47913372, "question_id": 47913310, "link": "https://stackoverflow.com/questions/47913310/search-over-text-column-in-pandas-data-frame-without-looping/47913372#47913372", "title": "Search over text column in pandas data frame without looping", "body": "<p>By using <code>str.contains</code></p>\n\n<pre><code>list_ = ['unit', 'apartment']\ndf.Description.str.contains('|'.join(list_))\nOut[724]: \n0     True\n1     True\n2    False\nName: Description, dtype: bool\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1513799907, "post_id": 47913485, "comment_id": 82794678, "body": "Learn new thing : -)"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1513799965, "post_id": 47913485, "comment_id": 82794706, "body": "@Wen Cheers! It&#39;s interesting to know, but I think it&#39;s slower than <code>str.contains</code>."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 1, "last_activity_date": 1513799766, "creation_date": 1513799766, "answer_id": 47913485, "question_id": 47913310, "link": "https://stackoverflow.com/questions/47913310/search-over-text-column-in-pandas-data-frame-without-looping/47913485#47913485", "title": "Search over text column in pandas data frame without looping", "body": "<p>Using <code>np.char.find</code> - </p>\n\n<pre><code>v = df.Description.values.astype('U')[:, None]\ndf['in list'] = (np.char.find(v, list_) &gt; 0).any(1)\n\ndf\n\n                                         Description  in list\n0  2 Bedroom/1.5 Bathroom end unit Townhouse.  Av...     True\n1           Very spacious studio apartment available     True\n2   Two bedroom, 1 bathroom condominium, superbly...    False\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 5149839, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9e8ffc6a3901af0a5279bfd436197d9?s=128&d=identicon&r=PG&f=1", "display_name": "Daria", "link": "https://stackoverflow.com/users/5149839/daria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 47913372, "answer_count": 2, "score": 1, "last_activity_date": 1513800381, "creation_date": 1513798973, "last_edit_date": 1513800381, "question_id": 47913310, "link": "https://stackoverflow.com/questions/47913310/search-over-text-column-in-pandas-data-frame-without-looping", "title": "Search over text column in pandas data frame without looping", "body": "<p>I have a pandas data frame where one of the columns is a text description string. I need to create a new column which would identify if one of the strings from a list is in the text description. </p>\n\n<pre><code>df = pd.DataFrame({'Description': ['2 Bedroom/1.5 Bathroom end unit Townhouse.  \nAvailable now!', 'Very spacious studio apartment available', ' Two bedroom, 1 \nbathroom condominium, superbly located in downtown']})\n\nlist_ = ['unit', 'apartment']\n</code></pre>\n\n<p>Then the result should be</p>\n\n<pre><code>                                        Description    in list\n0  2 Bedroom/1.5 Bathroom end unit Townhouse.  Av...    True\n1           Very spacious studio apartment available    True\n2   Two bedroom, 1 bathroom condominium, superbly...   False\n</code></pre>\n\n<p>I can do it this way</p>\n\n<pre><code>for i in df.index.values:\n    df.loc[i,'in list'] = any(w in df.loc[i,'Description'] for w in list_)\n</code></pre>\n\n<p>But with a large data set it takes longer than I'd like to.</p>\n"}, {"tags": ["python", "pandas", "numpy", "matplotlib", "plot"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1513800254, "post_id": 47913300, "comment_id": 82794844, "body": "What about doing <code>df.Time = df.Time.astype(int)</code>?"}, {"owner": {"reputation": 41, "user_id": 8441637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/887ab023e112c96dea88da5b8dfbacda?s=128&d=identicon&r=PG&f=1", "display_name": "smashed_", "link": "https://stackoverflow.com/users/8441637/smashed"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1513800623, "post_id": 47913300, "comment_id": 82795008, "body": "I have added a picture of my graph"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1513800872, "post_id": 47913300, "comment_id": 82795126, "body": "Try converting it to string, and then plotting. <code>df.Time = df.Time.astype(str)</code>"}, {"owner": {"reputation": 41, "user_id": 8441637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/887ab023e112c96dea88da5b8dfbacda?s=128&d=identicon&r=PG&f=1", "display_name": "smashed_", "link": "https://stackoverflow.com/users/8441637/smashed"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1513801080, "post_id": 47913300, "comment_id": 82795217, "body": "I think that may have done the trick! I just need to convert unix time to datetime and angle the tick marks labels and it will be good! Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "is_accepted": false, "score": 2, "last_activity_date": 1513801635, "creation_date": 1513801635, "answer_id": 47913899, "question_id": 47913300, "link": "https://stackoverflow.com/questions/47913300/plotting-in-matplotlib-using-pandas/47913899#47913899", "title": "Plotting in matplotlib using pandas", "body": "<p>Convert your epoch timestamps to datetime and use pandas built-in axis label formatting. Try replacing this:</p>\n\n<pre><code>timedat = df.loc[:, 'Time']\n</code></pre>\n\n<p>with this:</p>\n\n<pre><code>timedat = pd.to_datetime(df['Time'], unit='s')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 8441637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/887ab023e112c96dea88da5b8dfbacda?s=128&d=identicon&r=PG&f=1", "display_name": "smashed_", "link": "https://stackoverflow.com/users/8441637/smashed"}, "edited": false, "score": 0, "creation_date": 1513873785, "post_id": 47913986, "comment_id": 82826608, "body": "I tried this code and it worked just how i wanted it running Python 3.6 on windows 10, but now I&#39;m in the process transferring over to my raspberry pi 3 (hoping to use this on a touchscreen eventually) and im getting an error: &#39;Series&#39; object has no attribute &#39;dt&#39;. If i remove everything after &quot;.dt&quot; in that line of code, it graphed incorrectly (how it did initially in the picture). but when I print timedat, it prints in the format: &quot;YYYY-MM-DD H:MM:SS.ms&quot; Could the error be because i am running the code on python 3.4.2 which is default on Pi&#39;?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 41, "user_id": 8441637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/887ab023e112c96dea88da5b8dfbacda?s=128&d=identicon&r=PG&f=1", "display_name": "smashed_", "link": "https://stackoverflow.com/users/8441637/smashed"}, "edited": false, "score": 0, "creation_date": 1513874845, "post_id": 47913986, "comment_id": 82827202, "body": "@smashed_ Are you still running the same code? What is the output of <code>pd.to_datetime(df.Time, unit=&#39;s&#39;)</code>?"}, {"owner": {"reputation": 41, "user_id": 8441637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/887ab023e112c96dea88da5b8dfbacda?s=128&d=identicon&r=PG&f=1", "display_name": "smashed_", "link": "https://stackoverflow.com/users/8441637/smashed"}, "edited": false, "score": 0, "creation_date": 1513875822, "post_id": 47913986, "comment_id": 82827660, "body": "@COLDSPEED I am running the same code. I have installed the latest version of pandas onto the pi. the code only breaks with <code>df.Time = pd.to_datetime(df.Time, unit=&#39;s&#39;).dt.strftime(&#39;%H:%I:%S %m&#47;%d&#47;%y&#39;)</code>  the output of <code>pd.to_datetime(df.Time, unit=&#39;s&#39;)</code> is:  0           2017-12-20 07:00:00  1           2017-12-20 07:00:01  2    2017-12-20 07:00:02.005000 ... but it will not plot that on the graph. It graphs as shown in the OP."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 41, "user_id": 8441637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/887ab023e112c96dea88da5b8dfbacda?s=128&d=identicon&r=PG&f=1", "display_name": "smashed_", "link": "https://stackoverflow.com/users/8441637/smashed"}, "edited": false, "score": 0, "creation_date": 1513875919, "post_id": 47913986, "comment_id": 82827720, "body": "@smashed_ Hmm, very puzzling. If you say that the code works on your desktop, but not on a rpi, then you could open a new question with the raspberry-pi tag and explain your problem?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 41, "user_id": 8441637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/887ab023e112c96dea88da5b8dfbacda?s=128&d=identicon&r=PG&f=1", "display_name": "smashed_", "link": "https://stackoverflow.com/users/8441637/smashed"}, "edited": false, "score": 0, "creation_date": 1513875937, "post_id": 47913986, "comment_id": 82827725, "body": "I am not familiar with the environment, so there&#39;s really nothing I can think of that explains this."}, {"owner": {"reputation": 41, "user_id": 8441637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/887ab023e112c96dea88da5b8dfbacda?s=128&d=identicon&r=PG&f=1", "display_name": "smashed_", "link": "https://stackoverflow.com/users/8441637/smashed"}, "edited": false, "score": 0, "creation_date": 1513879899, "post_id": 47913986, "comment_id": 82829611, "body": "@COLDSPEED Turns out its because i have an older version of pandas (version 0.14.1). I believe for <code>dt.strftime()</code> to work i need at least version 0.17, but for whatever reason i cannot get a newer version installed. I am not too familiar with Pi/Raspian but i have tried updating through the terminal it always says i have the most up to date version. Not sure!"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 41, "user_id": 8441637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/887ab023e112c96dea88da5b8dfbacda?s=128&d=identicon&r=PG&f=1", "display_name": "smashed_", "link": "https://stackoverflow.com/users/8441637/smashed"}, "edited": false, "score": 0, "creation_date": 1513879965, "post_id": 47913986, "comment_id": 82829646, "body": "@smashed_ Ah, makes sense. Check your python version too."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 41, "user_id": 8441637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/887ab023e112c96dea88da5b8dfbacda?s=128&d=identicon&r=PG&f=1", "display_name": "smashed_", "link": "https://stackoverflow.com/users/8441637/smashed"}, "edited": false, "score": 0, "creation_date": 1513879996, "post_id": 47913986, "comment_id": 82829664, "body": "@smashed_ Also, found this for your perusal: <a href=\"https://raspberrypi.stackexchange.com/questions/17073/how-do-i-install-pandas-on-raspberry-pi\" title=\"how do i install pandas on raspberry pi\">raspberrypi.stackexchange.com/questions/17073/&hellip;</a>"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1513871598, "last_edit_date": 1513871598, "creation_date": 1513802085, "answer_id": 47913986, "question_id": 47913300, "link": "https://stackoverflow.com/questions/47913300/plotting-in-matplotlib-using-pandas/47913986#47913986", "title": "Plotting in matplotlib using pandas", "body": "<p>To convert your <code>Time</code> column from unix format to string datetime, use <code>pd.to_datetime</code> + <code>dt.strftime</code> - </p>\n\n<pre><code>df.Time = pd.to_datetime(df.Time, unit='s').dt.strftime('%H:%I:%S %m/%d/%y')\ndf\n\n                 Time  Temperature  Humidity\n0   07:07:00 12/20/17           54        45\n1   07:07:01 12/20/17           55        48\n2   07:07:02 12/20/17           55        50\n3   07:07:03 12/20/17           56        52\n4   07:07:04 12/20/17           56        54\n5   07:07:05 12/20/17           57        54\n6   07:07:06 12/20/17           56        54\n7   07:07:07 12/20/17           56        55\n8   07:07:08 12/20/17           56        56\n9   07:07:09 12/20/17           55        56\n10  07:07:10 12/20/17           54        52\n11  07:07:11 12/20/17           53        50\n12  07:07:12 12/20/17           52        45\n13  07:07:13 12/20/17           51        45\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8441637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/887ab023e112c96dea88da5b8dfbacda?s=128&d=identicon&r=PG&f=1", "display_name": "smashed_", "link": "https://stackoverflow.com/users/8441637/smashed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 47913986, "answer_count": 2, "score": 1, "last_activity_date": 1513871598, "creation_date": 1513798936, "last_edit_date": 1513800698, "question_id": 47913300, "link": "https://stackoverflow.com/questions/47913300/plotting-in-matplotlib-using-pandas", "title": "Plotting in matplotlib using pandas", "body": "<p>I am trying to plot with 2 y axis and a shared x axis. I have gotten to this point, but its not the x axis I want.</p>\n\n<p>Here is my code: </p>\n\n<pre><code>import pandas as pd\nimport matplotlib.pyplot as plt\n\ndf = pd.read_excel(\"Live_data_test.xlsx\",\"Sheet1\")\n\n\n\ntimedat = df.loc[:, 'Time']\ntemperaturedat = df.loc[:, 'Temperature']\nhumiditydat = df.loc[:, 'Humidity']\n\nfig, ax1 = plt.subplots()\n\nax2 = ax1.twinx()\nax1.plot(timedat, temperaturedat, 'g-')\nax2.plot(timedat, humiditydat, 'b-')\n\nax1.set_xlabel('Time')\nax1.set_ylabel('Temperature', color='g')\nax2.set_ylabel('Humidity', color='b')\n\nplt.show()\n</code></pre>\n\n<p>The x axis is plotting as 0,1,2,... for however many points I have. It is not plotting the defined x axis which should be unix time that I have set in the spreadsheet.</p>\n\n<p>Spreadsheet:</p>\n\n<pre><code>Time    Temperature Humidity\n1513753200  54  45\n1513753201  55  48\n1513753202  55  50\n1513753203  56  52\n1513753204  56  54\n1513753205  57  54\n1513753206  56  54\n1513753207  56  55\n1513753208  56  56\n1513753209  55  56\n1513753210  54  52\n1513753211  53  50\n1513753212  52  45\n1513753213  51  45\n</code></pre>\n\n<p>When I do print(timedat) I get this:</p>\n\n<pre><code>0     1.513753e+09\n1     1.513753e+09\n2     1.513753e+09\n3     1.513753e+09\n4     1.513753e+09\n5     1.513753e+09\n6     1.513753e+09\n7     1.513753e+09\n8     1.513753e+09\n9     1.513753e+09\n10    1.513753e+09\n11    1.513753e+09\n12    1.513753e+09\n13    1.513753e+09\nName: Time, dtype: float64\n</code></pre>\n\n<p>I believe converting unix time to H:M:S M/D/Y time should be simple enough. I have been searching for hours trying to plot the x axis as the defined time, but to no avail.</p>\n\n<p><a href=\"https://i.stack.imgur.com/0Kpwy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0Kpwy.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "python-3.6"], "comments": [{"owner": {"reputation": 6008, "user_id": 1983772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2f429722c8167802b89cbe4d324aa1e?s=128&d=identicon&r=PG", "display_name": "Norrius", "link": "https://stackoverflow.com/users/1983772/norrius"}, "edited": false, "score": 2, "creation_date": 1513798996, "post_id": 47913291, "comment_id": 82794290, "body": "Just use <code>with open()</code>?"}, {"owner": {"reputation": 2142, "user_id": 7923124, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Y53Pw.jpg?s=128&g=1", "display_name": "Chetan_Vasudevan", "link": "https://stackoverflow.com/users/7923124/chetan-vasudevan"}, "edited": false, "score": 3, "creation_date": 1513799087, "post_id": 47913291, "comment_id": 82794328, "body": "@ajax_velu, python does not close the file automatically. In short Garbage collector will close file when it destroys file object."}, {"owner": {"reputation": 1974, "user_id": 694286, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2799043909f51ad0f159c6b0a13f5db1?s=128&d=identicon&r=PG", "display_name": "nageeb", "link": "https://stackoverflow.com/users/694286/nageeb"}, "edited": false, "score": 0, "creation_date": 1513799134, "post_id": 47913291, "comment_id": 82794355, "body": "I would recommend closing the file after you&#39;re done with it.  If only for the sake of good practice."}, {"owner": {"reputation": 186, "user_id": 3828003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b6248a7d55a634d8dfe6c933b10631?s=128&d=identicon&r=PG&f=1", "display_name": "electrogas", "link": "https://stackoverflow.com/users/3828003/electrogas"}, "edited": false, "score": 0, "creation_date": 1513800023, "post_id": 47913291, "comment_id": 82794731, "body": "If the file object goes out of scope then python will close it.  If I modify your first example to: jsonda = json.loads(open(&#39;./myConfig.cfg&#39;).read()) then the file object goes out of scope right away and there is nothing to call close() on."}], "answers": [{"tags": [], "owner": {"reputation": 1737, "user_id": 6793085, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59da9fd7490b959c0158e3ee56cf1a50?s=128&d=identicon&r=PG&f=1", "display_name": "godaygo", "link": "https://stackoverflow.com/users/6793085/godaygo"}, "is_accepted": false, "score": 1, "last_activity_date": 1513837665, "last_edit_date": 1513837665, "creation_date": 1513800128, "answer_id": 47913570, "question_id": 47913291, "link": "https://stackoverflow.com/questions/47913291/does-python-close-the-file-after-it-comes-out/47913570#47913570", "title": "Does python close the file after it comes out?", "body": "<p>See this part of documentation <a href=\"https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files\" rel=\"nofollow noreferrer\">Reading and writing files</a> its fully answers your question, so <em>\"read the docs\"</em>. I will provide a quote from there:</p>\n\n<blockquote>\n  <p>If you\u2019re not using the <code>with</code> keyword, then you should call <code>f.close()</code>\n  to close the file and immediately free up any system resources used by\n  it. If you don\u2019t explicitly close a file, <strong>Python\u2019s garbage collector\n  will eventually destroy the object and close the open file for you,\n  but the file may stay open for a while.</strong> Another risk is that different\n  Python implementations will do this clean-up at different times.</p>\n</blockquote>\n\n<p>Another part of the same section advocates to use <code>with</code> block, because in this case it is guaranteed to properly release the resources even if an exception is raised at some point (I think except <code>SystemError</code>):</p>\n\n<blockquote>\n  <p>It is good practice to use the <code>with</code> keyword when dealing with file\n  objects. The advantage is that the file is properly closed after its\n  suite finishes, even if an exception is raised at some point. Using\n  with is also much shorter than writing equivalent <code>try-finally</code> blocks.</p>\n</blockquote>\n\n<p>Eventually to answer your question - yes it is safe to assume that Python does an automatic close, but it is not safe to implicitly rely on.</p>\n"}], "owner": {"reputation": 286, "user_id": 3566633, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/0jlZR.jpg?s=128&g=1", "display_name": "ajax_velu", "link": "https://stackoverflow.com/users/3566633/ajax-velu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1513837665, "creation_date": 1513798880, "last_edit_date": 1513800215, "question_id": 47913291, "link": "https://stackoverflow.com/questions/47913291/does-python-close-the-file-after-it-comes-out", "title": "Does python close the file after it comes out?", "body": "<p>I tired two code examples , one with close and the other with out close, strace says both code has called .close()</p>\n\n<p>is it safe to understand python3.6 does an automatic close:</p>\n\n<p>Eg1: \nthe lines in the file is :</p>\n\n<pre><code>f = open('./myConfig.cfg')\njsonda = json.loads(f.read())\n</code></pre>\n\n<p>The corresponding strace o/p is </p>\n\n<pre><code>open(\"./myConfig.cfg\", O_RDONLY|O_CLOEXEC) = 3\nfstat(3, {st_mode=S_IFREG|0644, st_size=693, ...}) = 0\nioctl(3, TCGETS, 0x7ffe829a80a0)        = -1 ENOTTY (Inappropriate ioctl for device)\nlseek(3, 0, SEEK_CUR)                   = 0\nioctl(3, TCGETS, 0x7ffe829a8040)        = -1 ENOTTY (Inappropriate ioctl for device)\nlseek(3, 0, SEEK_CUR)                   = 0\nlseek(3, 0, SEEK_CUR)                   = 0\nfstat(3, {st_mode=S_IFREG|0644, st_size=693, ...}) = 0\nread(3, \"{\\n  \\\"osns\\\" : [\\n    {\\n      \\\"fabr\"..., 694) = 693\nread(3, \"\", 1)                          = 0\nrt_sigaction(SIGINT, {SIG_DFL, [], SA_RESTORER, 0x7f57b2bc1390}, {0x442160, [], SA_RESTORER, 0x7f57b2bc1390}, 8) = 0\nclose(3)                                = 0\nsigaltstack(NULL, {ss_sp=0x1f2b0b0, ss_flags=0, ss_size=8192}) = 0\nsigaltstack({ss_sp=NULL, ss_flags=SS_DISABLE, ss_size=0}, NULL) = 0\nexit_group(0)                           = ?\n+++ exited with 0 +++\n</code></pre>\n\n<hr>\n\n<p>Similarly  in the second file:</p>\n\n<pre><code>f = open('./myConfig.cfg')\njsonda = json.loads(f.read())\nf.close()\n</code></pre>\n\n<p>The corresponding strace o/p is </p>\n\n<pre><code>open(\"./myConfig.cfg\", O_RDONLY|O_CLOEXEC) = 3\nfstat(3, {st_mode=S_IFREG|0644, st_size=693, ...}) = 0\nioctl(3, TCGETS, 0x7fff2e3f27c0)        = -1 ENOTTY (Inappropriate ioctl for device)\nlseek(3, 0, SEEK_CUR)                   = 0\nioctl(3, TCGETS, 0x7fff2e3f2760)        = -1 ENOTTY (Inappropriate ioctl for device)\nlseek(3, 0, SEEK_CUR)                   = 0\nlseek(3, 0, SEEK_CUR)                   = 0\nfstat(3, {st_mode=S_IFREG|0644, st_size=693, ...}) = 0\nread(3, \"{\\n  \\\"osns\\\" : [\\n    {\\n      \\\"fabr\"..., 694) = 693\nread(3, \"\", 1)                          = 0\nclose(3)                                = 0\nrt_sigaction(SIGINT, {SIG_DFL, [], SA_RESTORER, 0x7f4f52f6d390}, {0x442160, [], SA_RESTORER, 0x7f4f52f6d390}, 8) = 0\nsigaltstack(NULL, {ss_sp=0x15130b0, ss_flags=0, ss_size=8192}) = 0\nsigaltstack({ss_sp=NULL, ss_flags=SS_DISABLE, ss_size=0}, NULL) = 0\nexit_group(0)                           = ?\n+++ exited with 0 +++\n</code></pre>\n"}, {"tags": ["python", "jinja2", "webapp2"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1513799344, "post_id": 47913278, "comment_id": 82794444, "body": "It&#39;s not clear what you are asking. You know that the 404 happens because you haven&#39;t written written a handler that deals with that route; so what&#39;s stopping you from writing one?"}, {"owner": {"reputation": 119, "user_id": 9010265, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/beb52b7a2a464ff2766f22883b184a61?s=128&d=identicon&r=PG&f=1", "display_name": "jb2003", "link": "https://stackoverflow.com/users/9010265/jb2003"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1513799629, "post_id": 47913278, "comment_id": 82794568, "body": "The IDs are generated randomly in cloud datastore every time a new entity is created. I then retrieve all these entities and put them into a HTML table with a delete link next to them like in my example. Because the IDs are random I cannot set up a handler. I just need a way to delete entities by their ID."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1513799688, "post_id": 47913278, "comment_id": 82794595, "body": "But I don&#39;t understand why you say &quot;Because the IDs are random I cannot set up a handler&quot;. Of course you can."}, {"owner": {"reputation": 119, "user_id": 9010265, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/beb52b7a2a464ff2766f22883b184a61?s=128&d=identicon&r=PG&f=1", "display_name": "jb2003", "link": "https://stackoverflow.com/users/9010265/jb2003"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1513799749, "post_id": 47913278, "comment_id": 82794616, "body": "Oh I can? Do you know how I can do that?"}, {"owner": {"reputation": 399, "user_id": 3282945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6V2YY.jpg?s=128&g=1", "display_name": "Shiva", "link": "https://stackoverflow.com/users/3282945/shiva"}, "edited": false, "score": 0, "creation_date": 1513799856, "post_id": 47913278, "comment_id": 82794653, "body": "What is you delete method route? Add your delete method and route.. as per 404 means the route not created"}, {"owner": {"reputation": 399, "user_id": 3282945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6V2YY.jpg?s=128&g=1", "display_name": "Shiva", "link": "https://stackoverflow.com/users/3282945/shiva"}, "edited": false, "score": 0, "creation_date": 1513800039, "post_id": 47913278, "comment_id": 82794740, "body": "It&#39;s better to add your code to your question. Then people can easily answer"}, {"owner": {"reputation": 119, "user_id": 9010265, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/beb52b7a2a464ff2766f22883b184a61?s=128&d=identicon&r=PG&f=1", "display_name": "jb2003", "link": "https://stackoverflow.com/users/9010265/jb2003"}, "edited": false, "score": 0, "creation_date": 1513800426, "post_id": 47913278, "comment_id": 82794916, "body": "I have added my code with my thinking behind it. It doesn&#39;t work however because I get 404 error and I am not sure if what this would even work anyway."}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 9010265, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/beb52b7a2a464ff2766f22883b184a61?s=128&d=identicon&r=PG&f=1", "display_name": "jb2003", "link": "https://stackoverflow.com/users/9010265/jb2003"}, "edited": false, "score": 0, "creation_date": 1513801043, "post_id": 47913619, "comment_id": 82795195, "body": "Thank you, this looks like what I am after. How can I work with the ID from the URL after the handler is invoked? Ideally I would like to take the ID from the URL and put it into a new variable in my delete handler so that I can use it in a query."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "reply_to_user": {"reputation": 119, "user_id": 9010265, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/beb52b7a2a464ff2766f22883b184a61?s=128&d=identicon&r=PG&f=1", "display_name": "jb2003", "link": "https://stackoverflow.com/users/9010265/jb2003"}, "edited": false, "score": 0, "creation_date": 1513801591, "post_id": 47913619, "comment_id": 82795442, "body": "I mentioned that in my answer, but I&#39;ve expanded it."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "reply_to_user": {"reputation": 119, "user_id": 9010265, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/beb52b7a2a464ff2766f22883b184a61?s=128&d=identicon&r=PG&f=1", "display_name": "jb2003", "link": "https://stackoverflow.com/users/9010265/jb2003"}, "edited": false, "score": 0, "creation_date": 1513801659, "post_id": 47913619, "comment_id": 82795482, "body": "Note also, you really shouldn&#39;t make destructive changes - especially deletions - with a GET from a simple link; you should use a form and POST."}], "tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": true, "score": 0, "last_activity_date": 1513801581, "last_edit_date": 1513801581, "creation_date": 1513800338, "answer_id": 47913619, "question_id": 47913278, "link": "https://stackoverflow.com/questions/47913278/pass-variable-from-jinja2-template-to-python/47913619#47913619", "title": "Pass variable from jinja2 template to python", "body": "<p>So I <em>think</em> what you're confused about is how to set up a route handler with a dynamic part to the URL. It's a shame that this is completely skipped over in the webapp2 tutorial, as it's a fundamental part of writing any web application. However, it is covered well in <a href=\"http://webapp2.readthedocs.io/en/latest/guide/routing.html\" rel=\"nofollow noreferrer\">the guide to routing</a>, which you should read.</p>\n\n<p>At its simplest, it's just a matter of putting a regex in the route:</p>\n\n<pre><code>app = webapp2.WSGIApplication([\n    ...\n    (r'/delete/(\\d+)', MyDeleteHandler),\n])\n</code></pre>\n\n<p>which will now route any URL of the form <code>/delete/&lt;number&gt;/</code> to your deletion handler.</p>\n\n<p>The ID that you pass in the URL will be the first positional argument to the handler method:</p>\n\n<pre><code>class MyDeleteHandler:\n    def get(self, item_id):\n        key = ndb.Key(MyModel, item_id)   # or whatever\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 9010265, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/beb52b7a2a464ff2766f22883b184a61?s=128&d=identicon&r=PG&f=1", "display_name": "jb2003", "link": "https://stackoverflow.com/users/9010265/jb2003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 497, "favorite_count": 0, "accepted_answer_id": 47913619, "answer_count": 1, "score": 1, "last_activity_date": 1513801581, "creation_date": 1513798801, "last_edit_date": 1513800343, "question_id": 47913278, "link": "https://stackoverflow.com/questions/47913278/pass-variable-from-jinja2-template-to-python", "title": "Pass variable from jinja2 template to python", "body": "<p>Sorry if this is a noob question I am still learning. I have passed a variable from python code to a jinja2 HTML template to set up a URL, like this:</p>\n\n<p><code>&lt;a href=\"/delete/{{ result.key.id() }}\"&gt;Delete&lt;/a&gt;</code></p>\n\n<p>When this link is pressed it should run a query that deletes the entity with that ID. But when the link is pressed it goes to /delete/1827424298 for example, which results in a 404 error as the request handler doesn't exist.</p>\n\n<p>I need to pass that ID back into my python code so it can run a method to delete the entity with that same ID. How do I go about doing this? Using webapp2 if that is important.</p>\n\n<pre><code>class DeleteRequestHandler(webapp2.RequestHandler):\n\ndef get():\n\n\n    template = template_env.get_template('myrequests.html')\n    context = {\n\n        'results': results.key.id()\n\n    }\n\n    self.response.out.write(template.render(context))\n</code></pre>\n\n<p>EDIT: I've added my delete handler - it is incomplete as I have yet to add the query to delete the entity. My thinking behind it so far is I can grab the <code>results.key.id()</code> from the jinja2 template and put it into <code>results</code> but I am not sure if this would work.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1513798777, "post_id": 47913232, "comment_id": 82794194, "body": "What does your expected output look like?"}, {"owner": {"reputation": 420, "user_id": 3910919, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/97b008fc9294b6d53cdf339827b96678?s=128&d=identicon&r=PG&f=1", "display_name": "natnay", "link": "https://stackoverflow.com/users/3910919/natnay"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1513800907, "post_id": 47913232, "comment_id": 82795142, "body": "@c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05 I&#39;ve updated the original post to include the expected output"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1513802183, "post_id": 47913232, "comment_id": 82795749, "body": "Okay, let me know if my answer is what you&#39;re looking for. It should be pretty fast."}, {"owner": {"reputation": 420, "user_id": 3910919, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/97b008fc9294b6d53cdf339827b96678?s=128&d=identicon&r=PG&f=1", "display_name": "natnay", "link": "https://stackoverflow.com/users/3910919/natnay"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1513803298, "post_id": 47913232, "comment_id": 82796274, "body": "@c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05 Yes, that worked. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 5, "last_activity_date": 1513801158, "creation_date": 1513801158, "answer_id": 47913799, "question_id": 47913232, "link": "https://stackoverflow.com/questions/47913232/loop-through-grouped-rows-and-compare-1st-row-in-group-python/47913799#47913799", "title": "Loop through grouped rows and compare 1st row in group- Python", "body": "<p>IIUC, you can do this with <code>groupby</code> + <code>first</code>. Use <code>np.where</code> for determining values for <code>Flag</code>.</p>\n\n<pre><code>i = df.VolPct &gt;= .1\nj = (df.Per - df.groupby('Orig').Per.transform('first') &gt;= .2)   \n\ndf['Flag'] = np.where(i &amp; j, 'X', '')\ndf\n\n  Orig Dest Route    Vol   Per  VolPct Flag\n0  ORD  ICN     A  2,251  0.64    0.78     \n1  ORD  ICN     B    366  0.97    0.13    X\n2  ORD  ICN     C    142  0.14    0.05     \n3  ORD  ICN     D    100  0.22    0.03     \n4  ORD  ICN     E     25  1.00    0.01  \n</code></pre>\n"}], "owner": {"reputation": 420, "user_id": 3910919, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/97b008fc9294b6d53cdf339827b96678?s=128&d=identicon&r=PG&f=1", "display_name": "natnay", "link": "https://stackoverflow.com/users/3910919/natnay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 1, "accepted_answer_id": 47913799, "answer_count": 1, "score": 4, "last_activity_date": 1513801158, "creation_date": 1513798640, "last_edit_date": 1513800869, "question_id": 47913232, "link": "https://stackoverflow.com/questions/47913232/loop-through-grouped-rows-and-compare-1st-row-in-group-python", "title": "Loop through grouped rows and compare 1st row in group- Python", "body": "<p>I have data that is grouped by origin and destination pairs. I would like to compare the first row in the group against the other rows in the group. If a row meets certain conditions, then I would like to flag it. Below is a snapshot of my data:</p>\n\n<pre><code>Orig    Dest    Route   Vol     Per   VolPct\nORD     ICN     A       2,251   0.64    0.78\nORD     ICN     B       366     0.97    0.13\nORD     ICN     C       142     0.14    0.05\nORD     ICN     D       100     0.22    0.03\nORD     ICN     E       25      1.00    0.01\n</code></pre>\n\n<p>If a row has a \"VolPct\" of >=.1, then it gets compared against the 1st row. So in this example, Route B would be compared against Route A. If the difference between \"Per\" of Route B and Route A is >= .2, then I'd like to flag Route B by putting an \"X\" in a new column. In this example, Route B would get flagged. Expected output would look like this:</p>\n\n<pre><code>Orig    Dest    Route   Vol      Per    VolPct  Flag\nORD     ICN     A       2,251    0.64   0.78    \nORD     ICN     B       366      0.97   0.13       x\nORD     ICN     C       142      0.14   0.05    \nORD     ICN     D       100      0.22   0.03    \nORD     ICN     E       25       1.00   0.01    \n</code></pre>\n\n<p>Any suggestions how to go about this? I'm using Pandas and Python 3.6. Thanks for your help! </p>\n"}, {"tags": ["python", "python-3.x", "list", "sorting", "dictionary"], "comments": [{"owner": {"reputation": 2442, "user_id": 4157124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb2110df592e8d6b210ad3a764f092a?s=128&d=identicon&r=PG", "display_name": "user4157124", "link": "https://stackoverflow.com/users/4157124/user4157124"}, "edited": false, "score": 0, "creation_date": 1602290017, "post_id": 47913215, "comment_id": 113683150, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/9845369/comparing-2-lists-consisting-of-dictionaries-with-unique-keys-in-python\">Comparing 2 lists consisting of dictionaries with unique keys in python</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1056, "user_id": 5847412, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e00cfe1938337ca55b7496893faaa0f4?s=128&d=identicon&r=PG&f=1", "display_name": "unseen_damage", "link": "https://stackoverflow.com/users/5847412/unseen-damage"}, "edited": false, "score": 0, "creation_date": 1513867346, "post_id": 47913285, "comment_id": 82822656, "body": "How would I go about calculating a hash for each dict? I will try out the solution and update accordingly"}, {"owner": {"reputation": 2682, "user_id": 5040035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sFkvw.jpg?s=128&g=1", "display_name": "plamut", "link": "https://stackoverflow.com/users/5040035/plamut"}, "reply_to_user": {"reputation": 1056, "user_id": 5847412, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e00cfe1938337ca55b7496893faaa0f4?s=128&d=identicon&r=PG&f=1", "display_name": "unseen_damage", "link": "https://stackoverflow.com/users/5847412/unseen-damage"}, "edited": false, "score": 0, "creation_date": 1513903526, "post_id": 47913285, "comment_id": 82838619, "body": "One idea would be to convert the list computed as the dict&#39;s key to a string and hash it. This will work as long as the same values in the dict have the same string representations - which seems to be the case with your data that only contains strings and <code>None</code>.  If this does not suffice, you might also want to check <a href=\"https://stackoverflow.com/a/8714242/5040035\">this answer</a> suggesting a much more advanced dict hashing function."}], "tags": [], "owner": {"reputation": 2682, "user_id": 5040035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sFkvw.jpg?s=128&g=1", "display_name": "plamut", "link": "https://stackoverflow.com/users/5040035/plamut"}, "is_accepted": true, "score": 2, "last_activity_date": 1513806142, "last_edit_date": 1513806142, "creation_date": 1513798857, "answer_id": 47913285, "question_id": 47913215, "link": "https://stackoverflow.com/questions/47913215/sort-and-compare-list-of-dicts-python/47913285#47913285", "title": "Sort and Compare List of Dicts Python", "body": "<p>You can sort both lists before comparing them and compare the sorted results:</p>\n\n<pre><code>&gt;&gt;&gt; list_dict_a = [\n        {'expiration_date': None, 'identifier_country': None, 'identifier_number': 'Male', 'identifier_type': 'Gender', 'issue_date': None},\n        {'expiration_date': None, 'identifier_country': 'VE', 'identifier_number': '1234567', 'identifier_type': 'Foo No.', 'issue_date': None}]\n\n&gt;&gt;&gt; list_dict_b = [\n        {'identifier_country': 'VE', 'expiration_date': None, 'identifier_type': 'Foo No.', 'issue_date': None, 'identifier_number': '1234567'},\n        {'identifier_country': None, 'expiration_date': None, 'identifier_type': 'Gender', 'issue_date': None, 'identifier_number': 'Male'}]\n\n&gt;&gt;&gt; list_dict_a == list_dict_b\nFalse\n&gt;&gt;&gt; def key_func(d):\n        items = ((k, v if v is not None else '') for k, v in d.items())\n        return sorted(items)\n&gt;&gt;&gt; sorted(list_dict_a, key=key_func) == sorted(list_dict_b, key=key_func)\nTrue\n</code></pre>\n\n<p>The order of the dicts within each list will then not matter.</p>\n\n<p>Passing the <code>key</code> function is needed, because dicts are not orderable, thus we need to tell the sorting function what key to use for each pair of dict objects when comparing them. A key for each dictionary is simply a sorted list of its (key, value) pairs.</p>\n\n<p>The key function calculates a key for each dict as follows:</p>\n\n<pre><code>&gt;&gt;&gt; dict_a0 = list_dict_a[0]\n&gt;&gt;&gt; key_func(dict_a0)\n[('expiration_date', ''), ('identifier_country', ''), ('identifier_number', 'Male'), ('identifier_type', 'Gender'), ('issue_date', '')]\n</code></pre>\n\n<p><strong>Footnotes</strong></p>\n\n<p>In order for this list of (key, value) pairs to be comparable with other dicts' lists, <code>None</code> values had to be converted to an empty string. This allows None values to be comparable with other non-None values.</p>\n\n<p>The underlying assumption in the solution above is that all dictionary values in your case are either strings or <code>None</code>, and that \"empty\" values are consistently represented as <code>None</code> (and not e.g. by an empty string). If this is not the case, <code>key_func()</code> would have to be adjusted accordingly to assure that the resulting lists are always comparable to each other for any dict value expected in the data.</p>\n\n<p>Also, for large dicts this key function might not be ideal, because comparisons of key pairs would be too slow. It would thus be better to instead calculate a unique hash value for each dict (but the same hash for dicts that compare equal).</p>\n"}, {"comments": [{"owner": {"reputation": 2682, "user_id": 5040035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sFkvw.jpg?s=128&g=1", "display_name": "plamut", "link": "https://stackoverflow.com/users/5040035/plamut"}, "edited": false, "score": 1, "creation_date": 1513799726, "post_id": 47913432, "comment_id": 82794606, "body": "Just please mind that this is an O(n^2) solution ... or O(a*b) where a and b are the lengths of list a and b, respectively. The difference can be considerable for larger datasets."}, {"owner": {"reputation": 1369, "user_id": 2584772, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/ce910c0f7a90e2e06ca9b54e213f9cb9?s=128&d=identicon&r=PG", "display_name": "Caco", "link": "https://stackoverflow.com/users/2584772/caco"}, "edited": false, "score": 0, "creation_date": 1535630326, "post_id": 47913432, "comment_id": 91143068, "body": "Note that this is comparing if all <code>dict</code> elements in <code>list_dict_a</code> are in <code>list_dict_b</code>, but if there are more dict elements in <code>list_dict_b</code> that sentence returns <code>True</code> too. So you must add one more line: <code>len(list_dict_a) == len(list_dict_b)</code>."}], "tags": [], "owner": {"reputation": 3236, "user_id": 6876009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/201968908078a1f1ea776c886d93631a?s=128&d=identicon&r=PG&f=1", "display_name": "f5r5e5d", "link": "https://stackoverflow.com/users/6876009/f5r5e5d"}, "is_accepted": false, "score": 0, "last_activity_date": 1513799502, "creation_date": 1513799502, "answer_id": 47913432, "question_id": 47913215, "link": "https://stackoverflow.com/questions/47913215/sort-and-compare-list-of-dicts-python/47913432#47913432", "title": "Sort and Compare List of Dicts Python", "body": "<p>you can also check if each dict in list_dict_a is in list_dict_b</p>\n\n<pre><code>all([dict_a in list_dict_b for dict_a in list_dict_a])\n\nOut[218]: True\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1056, "user_id": 5847412, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e00cfe1938337ca55b7496893faaa0f4?s=128&d=identicon&r=PG&f=1", "display_name": "unseen_damage", "link": "https://stackoverflow.com/users/5847412/unseen-damage"}, "edited": false, "score": 0, "creation_date": 1513867422, "post_id": 47914710, "comment_id": 82822709, "body": "If I didn&#39;t know the key, would I be able to do <code>key=lambda x:x[0]</code> instead?"}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "reply_to_user": {"reputation": 1056, "user_id": 5847412, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e00cfe1938337ca55b7496893faaa0f4?s=128&d=identicon&r=PG&f=1", "display_name": "unseen_damage", "link": "https://stackoverflow.com/users/5847412/unseen-damage"}, "edited": false, "score": 0, "creation_date": 1513867643, "post_id": 47914710, "comment_id": 82822872, "body": "@unseen_damage no, because in the scope of the lambda function, <code>x</code> is a dictionary, and <code>x[0]</code> will raise a <code>KeyError</code>. You can, however, use <code>dict.get</code> and provide a default argment. Please see my recent edit."}], "tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 0, "last_activity_date": 1513867691, "last_edit_date": 1513867691, "creation_date": 1513805849, "answer_id": 47914710, "question_id": 47913215, "link": "https://stackoverflow.com/questions/47913215/sort-and-compare-list-of-dicts-python/47914710#47914710", "title": "Sort and Compare List of Dicts Python", "body": "<p>You can try this:</p>\n\n<pre><code>list_dict_a = [\n{'expiration_date': None, 'identifier_country': None, 'identifier_number': 'Male', 'identifier_type': 'Gender', 'issue_date': None},\n{'expiration_date': None, 'identifier_country': 'VE', 'identifier_number':  '1234567', 'identifier_type': 'Foo No.', 'issue_date': None}]\n\nlist_dict_b = [\n{'identifier_country': 'VE', 'expiration_date': None, 'identifier_type': 'Foo No.', 'issue_date': None, 'identifier_number': '1234567'},\n{'identifier_country': None, 'expiration_date': None, 'identifier_type': 'Gender', 'issue_date': None, 'identifier_number': 'Male'}]\nnew_list = sorted(list_dict_a, key=lambda x:x['identifier_country'] is not None, reverse=True)\nprint(new_list == list_dict_b)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>True\n</code></pre>\n\n<p>If you do not know the key originally, you can try this:</p>\n\n<pre><code>new_list = sorted(list_dict_a, key=lambda x:x.get('identifier_country', None) is not None, reverse=True)\n</code></pre>\n"}], "owner": {"reputation": 1056, "user_id": 5847412, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e00cfe1938337ca55b7496893faaa0f4?s=128&d=identicon&r=PG&f=1", "display_name": "unseen_damage", "link": "https://stackoverflow.com/users/5847412/unseen-damage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2445, "favorite_count": 1, "accepted_answer_id": 47913285, "answer_count": 3, "score": 5, "last_activity_date": 1513867691, "creation_date": 1513798574, "question_id": 47913215, "link": "https://stackoverflow.com/questions/47913215/sort-and-compare-list-of-dicts-python", "title": "Sort and Compare List of Dicts Python", "body": "<p>I am trying to find a way to sort and compare two lists of dictionaries in Python 3.6. I ultimately just want <code>list_dict_a</code> and <code>list_dict_b</code> to compare with <code>==</code> and evaluate to <code>True</code>.</p>\n\n<p>Here is what the data looks like:</p>\n\n<pre><code>list_dict_a = [\n{'expiration_date': None, 'identifier_country': None, 'identifier_number': 'Male', 'identifier_type': 'Gender', 'issue_date': None},\n{'expiration_date': None, 'identifier_country': 'VE', 'identifier_number': '1234567', 'identifier_type': 'Foo No.', 'issue_date': None}]\n\nlist_dict_b = [\n{'identifier_country': 'VE', 'expiration_date': None, 'identifier_type': 'Foo No.', 'issue_date': None, 'identifier_number': '1234567'},\n{'identifier_country': None, 'expiration_date': None, 'identifier_type': 'Gender', 'issue_date': None, 'identifier_number': 'Male'}]\n</code></pre>\n\n<p>The data is the same, but it comes in different orders (I dont have any control over the initial order). </p>\n\n<p>When I try to compare them as such, I get a false value when doing something  like this: \n<code>print(\"does this match anything\",list_dict_a == list_dict_b)</code></p>\n\n<p>Is this even possible to do?</p>\n"}]