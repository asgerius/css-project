[{"tags": ["python", ".net", "azure", "azure-data-factory", "azure-logic-apps"], "comments": [{"owner": {"reputation": 20458, "user_id": 8198946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oRGKD.png?s=128&g=1", "display_name": "Jay Gong", "link": "https://stackoverflow.com/users/8198946/jay-gong"}, "edited": false, "score": 0, "creation_date": 1541641013, "post_id": 52637153, "comment_id": 93289304, "body": "Hi,if you think my answer helps you,you could mark it for answer ,thanks a lot."}], "answers": [{"tags": [], "owner": {"reputation": 20458, "user_id": 8198946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oRGKD.png?s=128&g=1", "display_name": "Jay Gong", "link": "https://stackoverflow.com/users/8198946/jay-gong"}, "is_accepted": false, "score": 0, "last_activity_date": 1583323482, "last_edit_date": 1583323482, "creation_date": 1539157839, "answer_id": 52735219, "question_id": 52637153, "link": "https://stackoverflow.com/questions/52637153/run-net-and-python-applications-on-azure-data-factory/52735219#52735219", "title": "Run .Net and Python applications on Azure Data Factory?", "body": "<p>Per my knowledge, maybe Azure Function is not suitable for entire application. Based on the statement in <a href=\"https://docs.microsoft.com/en-us/azure/azure-functions/functions-overview\" rel=\"nofollow noreferrer\">Azure Function Overview</a>, Functions is a great solution for processing data, integrating systems, working with the internet-of-things (IoT), and building simple APIs and microservices. It is more suitable for snippet of code to process data in schedule.</p>\n\n<p>For both .Net application and Python application, you could use custom activity. Please see the <a href=\"https://github.com/MicrosoftDocs/azure-docs/blob/master/articles/data-factory/v1/data-factory-use-custom-activities.md\" rel=\"nofollow noreferrer\">Github guidance</a> and this <a href=\"https://github.com/rawatsudhir1/ADFPythonCustomActivity\" rel=\"nofollow noreferrer\">Python tutorial</a>.</p>\n"}], "owner": {"reputation": 1775, "user_id": 959788, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d3c5e62f40da695b6340bcbe3b9fa65c?s=128&d=identicon&r=PG", "display_name": "Gadam", "link": "https://stackoverflow.com/users/959788/gadam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 527, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1583323482, "creation_date": 1538611189, "question_id": 52637153, "link": "https://stackoverflow.com/questions/52637153/run-net-and-python-applications-on-azure-data-factory", "title": "Run .Net and Python applications on Azure Data Factory?", "body": "<p>I am trying to create a pipeline in Azure which involves running .Net applications and python applications as part\nof the workflow. These applications read/write to ADLS and Azure databases. I am wondering what are the best tools for the job.</p>\n\n<p>So far I have landed on using ADF, with Azure Batch/Custom activity for .Net; and same or Databricks \nnotebook/Python activity for Python <a href=\"https://docs.microsoft.com/en-us/azure/data-factory/compute-linked-services\" rel=\"nofollow noreferrer\">as per this</a>.\n(preferably avoid having to spin up a Databricks cluster.) </p>\n\n<p>Other options I considered: use Azure Functions for .Net (and use it in ADF) but not sure if it is only suitable for small snippets of code \nor entier applications. Use Logic Apps to run .net/python applications in a\nDocker container activity step which seems like an overkill.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "qt", "user-interface", "pyqt5"], "comments": [{"owner": {"reputation": 41564, "user_id": 8708364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMdFT.jpg?s=128&g=1", "display_name": "U11-Forward", "link": "https://stackoverflow.com/users/8708364/u11-forward"}, "edited": false, "score": 0, "creation_date": 1538611415, "post_id": 52637147, "comment_id": 92207418, "body": "No need to do <code>Palette</code> stuff, just do style-sheet, you&#39;ve did it already just commented out, uncomment it."}, {"owner": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "reply_to_user": {"reputation": 41564, "user_id": 8708364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMdFT.jpg?s=128&g=1", "display_name": "U11-Forward", "link": "https://stackoverflow.com/users/8708364/u11-forward"}, "edited": false, "score": 0, "creation_date": 1538612180, "post_id": 52637147, "comment_id": 92207568, "body": "Doesn&#39;t work, without it I don&#39;t even get the red outline"}, {"owner": {"reputation": 5131, "user_id": 7919597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/905688a3a3921c2f03f4914e943e1915?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7919597/joe"}, "edited": false, "score": 0, "creation_date": 1538641612, "post_id": 52637147, "comment_id": 92216712, "body": "It works for me with <code>PyQt4</code> when I just un-comment the <code>setStyleSheet</code> line."}, {"owner": {"reputation": 5131, "user_id": 7919597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/905688a3a3921c2f03f4914e943e1915?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7919597/joe"}, "edited": false, "score": 0, "creation_date": 1538641912, "post_id": 52637147, "comment_id": 92216867, "body": "Uncommenting <code>setStyleSheet()</code> also works for me with Python 3.6.5, Qt 5.9.3, PyQt5 5.9.2"}, {"owner": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "edited": false, "score": 0, "creation_date": 1538663003, "post_id": 52637147, "comment_id": 92230080, "body": "Which operating system?"}], "answers": [{"comments": [{"owner": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "edited": false, "score": 0, "creation_date": 1538843418, "post_id": 52654497, "comment_id": 92290544, "body": "At least in my system the problem was not adding the border: none section to the style sheet"}], "tags": [], "owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "is_accepted": true, "score": 1, "last_activity_date": 1538684105, "creation_date": 1538684105, "answer_id": 52654497, "question_id": 52637147, "link": "https://stackoverflow.com/questions/52637147/python-qt-change-the-background-color-of-a-button-not-just-border/52654497#52654497", "title": "Python QT change the background color of a button, not just border", "body": "<p>Try it:</p>\n\n<pre><code>import sys\nfrom PyQt5.QtWidgets import QWidget, QHBoxLayout, QPushButton, QApplication\nfrom PyQt5.QtGui     import QIcon\nfrom PyQt5.QtCore    import pyqtSlot, QSize\n\n\nclass Window(QWidget):\n\n    def __init__(self, *args, **kwargs):\n        super(Window, self).__init__(*args, **kwargs)\n\n        self.setGeometry(800, 65, 500, 200)\n\n        layout = QHBoxLayout(self)\n        layout.addWidget(QPushButton(\"red button\", self,\n                                     objectName=\"RedButton\", minimumHeight=48))\n        # ----------------------------------------------------------------------\n        button = QPushButton('  \\n   PyQt5\\n   button\\n  ', self, \n                                     objectName=\"GreenButton\", minimumHeight=48)\n        button.setIcon(QIcon(\"E:/_Qt/img/qt-logo.png\"))\n        button.setIconSize(QSize(48, 48))                                     \n        layout.addWidget(button) \n        # ----------------------------------------------------------------------\n\n        layout.addWidget(QPushButton(\"blue button\", self,\n                                     objectName=\"BlueButton\", minimumHeight=48))\n        layout.addWidget(QPushButton(\"orange button\", self,\n                                     objectName=\"OrangeButton\", minimumHeight=48))\n        layout.addWidget(QPushButton(\"purple button\", self,\n                                     objectName=\"PurpleButton\", minimumHeight=48))\n\n\nStyleSheet = '''\nQPushButton {\n    border: none;\n}\nQPushButton#RedButton {\n    background-color: #f44336;\n}\n#RedButton:hover {\n    background-color: #e57373; \n    color: #fff;\n}\n#RedButton:pressed { \n    background-color: #ffcdd2; \n}\n#GreenButton {\n    background-color: #4caf50;\n    border-radius: 5px;       \n}\n#GreenButton:hover {\n    background-color: #81c784;\n    color: #fff;              \n}\n#GreenButton:pressed {\n    background-color: #c8e6c9;\n}\n#BlueButton {\n    background-color: #2196f3;\n    min-width:  96px;\n    max-width:  96px;\n    min-height: 96px;\n    max-height: 96px;\n    border-radius: 48px;        \n}\n#BlueButton:hover {\n    background-color: #64b5f6;\n}\n#BlueButton:pressed {\n    background-color: #bbdefb;\n}\n#OrangeButton {\n    max-height: 48px;\n    border-top-right-radius:   20px;   \n    border-bottom-left-radius: 20px;   \n    background-color: #ff9800;\n}\n#OrangeButton:hover {\n    background-color: #ffb74d;\n}\n#OrangeButton:pressed {\n    background-color: #ffe0b2;\n}\n\nQPushButton[text=\"purple button\"] {\n    color: white;                    \n    background-color: #9c27b0;\n}\n'''\n\nif __name__ == \"__main__\":\n    app = QApplication(sys.argv)\n    app.setStyleSheet(StyleSheet)\n    w = Window()\n    w.setWindowTitle(\"Demo color-button\")\n    w.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/55bTT.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/55bTT.jpg\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1546, "favorite_count": 1, "accepted_answer_id": 52654497, "answer_count": 1, "score": 0, "last_activity_date": 1538684105, "creation_date": 1538611081, "question_id": 52637147, "link": "https://stackoverflow.com/questions/52637147/python-qt-change-the-background-color-of-a-button-not-just-border", "title": "Python QT change the background color of a button, not just border", "body": "<p>I am trying to change the background color of a border using python Qt but only the border gets set.</p>\n\n<p>This is the code:</p>\n\n<pre><code>from PyQt5.QtWidgets import *\nfrom PyQt5.QtGui import *\nfrom PyQt5.QtCore import * \nfrom PyQt5.QtCore import pyqtSlot\nimport math\nimport sys\n\nclass Frame(QWidget):\n\n    def __init__(self):\n        super().__init__()\n\n        self.initUI()\n\n    def initUI(self):      \n\n        self.setGeometry(300, 100, 1000, 500)\n\n        pal = QPalette()\n        self.setAutoFillBackground(True)\n        self.setPalette(pal)\n\n        button = QPushButton('Clear Knots')\n        button.clicked.connect(quit)\n        pal.setColor(QPalette.Button, QColor(255,0,0,255))\n        button.setPalette(pal)\n        button.setAutoFillBackground(True)\n        #button.setStyleSheet(\"background-color: red;\")\n\n        Layout = QGridLayout()\n        Layout.addWidget(button, 2,0)\n        self.setLayout(Layout)\n\n        self.show()\n\n\n\nif __name__ == '__main__':\n\n    app = QApplication(sys.argv)\n    ex = Frame()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>And the result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ySyU3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ySyU3.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "list", "os.walk"], "comments": [{"owner": {"reputation": 553, "user_id": 9023746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b85e883dde2b07ffd09399d44ac9335?s=128&d=identicon&r=PG", "display_name": "sjdm", "link": "https://stackoverflow.com/users/9023746/sjdm"}, "edited": false, "score": 0, "creation_date": 1538611019, "post_id": 52637131, "comment_id": 92207332, "body": "You are looping over the filenames, therefore for each filename you are selecting the 3rd array element in the string which is the file name"}, {"owner": {"reputation": 553, "user_id": 9023746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b85e883dde2b07ffd09399d44ac9335?s=128&d=identicon&r=PG", "display_name": "sjdm", "link": "https://stackoverflow.com/users/9023746/sjdm"}, "edited": false, "score": 1, "creation_date": 1538611086, "post_id": 52637131, "comment_id": 92207344, "body": "e.g. each filename is a string, which is an array of characters, therefore your loop is looking at each filename, and selecting the 3rd element in the array of characters of that filename"}, {"owner": {"reputation": 553, "user_id": 9023746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b85e883dde2b07ffd09399d44ac9335?s=128&d=identicon&r=PG", "display_name": "sjdm", "link": "https://stackoverflow.com/users/9023746/sjdm"}, "edited": false, "score": 0, "creation_date": 1538611117, "post_id": 52637131, "comment_id": 92207359, "body": "Does that make sense?"}, {"owner": {"reputation": 553, "user_id": 9023746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b85e883dde2b07ffd09399d44ac9335?s=128&d=identicon&r=PG", "display_name": "sjdm", "link": "https://stackoverflow.com/users/9023746/sjdm"}, "edited": false, "score": 0, "creation_date": 1538611197, "post_id": 52637131, "comment_id": 92207376, "body": "Have a look at this: <a href=\"https://realpython.com/python-strings/#StringIndexing\" rel=\"nofollow noreferrer\">realpython.com/python-strings/#StringIndexing</a>"}, {"owner": {"reputation": 5, "user_id": 10453893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/147dca8f740795f31766ecc9ac971efc?s=128&d=identicon&r=PG&f=1", "display_name": "twizzler66", "link": "https://stackoverflow.com/users/10453893/twizzler66"}, "reply_to_user": {"reputation": 553, "user_id": 9023746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b85e883dde2b07ffd09399d44ac9335?s=128&d=identicon&r=PG", "display_name": "sjdm", "link": "https://stackoverflow.com/users/9023746/sjdm"}, "edited": false, "score": 0, "creation_date": 1538709441, "post_id": 52637131, "comment_id": 92246243, "body": "Yes, I was misunderstanding the workflow logic - I didn&#39;t realize the &#39;for&#39; loop was still in play when making the call to print - thank you for the explanation!"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 10453893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/147dca8f740795f31766ecc9ac971efc?s=128&d=identicon&r=PG&f=1", "display_name": "twizzler66", "link": "https://stackoverflow.com/users/10453893/twizzler66"}, "edited": false, "score": 0, "creation_date": 1538709507, "post_id": 52637387, "comment_id": 92246258, "body": "Yes, I understand now - I have marked your answer as correct, and thank you for offering a solution to the problem along with the explanation!"}], "tags": [], "owner": {"reputation": 3737, "user_id": 7417402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0362a30046be9244cf62d2a9fc6f8568?s=128&d=identicon&r=PG", "display_name": "Devstr", "link": "https://stackoverflow.com/users/7417402/devstr"}, "is_accepted": true, "score": 1, "last_activity_date": 1538613236, "creation_date": 1538613236, "answer_id": 52637387, "question_id": 52637131, "link": "https://stackoverflow.com/questions/52637131/when-listing-multiple-filenames-with-os-walk-why-can-i-not-call-each-file-name/52637387#52637387", "title": "when listing multiple filenames with os.walk, why can I not call each file name via a list index?", "body": "<p>As sjdm already said in the comments, the problem is that you are accessing 3rd element of the <code>filename</code> string (which is a character) and not the 3rd element in the list of files.</p>\n\n<p>To solve this I suggest to store all filenames in a list:</p>\n\n<pre><code>import os\ndirectory = \"J:\"\nextension = \"pdf\"\n\npdf_files = []\nfor root, dirs, files in os.walk(directory):\n    for filename in files:\n        if filename.endswith(\".\" + extension):\n            print(filename)\n            pdf_files.append(filename)\n\nprint(pdf_files)  # print all collected files\nprint(pdf_files[2]) # print third collected file\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 10453893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/147dca8f740795f31766ecc9ac971efc?s=128&d=identicon&r=PG&f=1", "display_name": "twizzler66", "link": "https://stackoverflow.com/users/10453893/twizzler66"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 52637387, "answer_count": 1, "score": 0, "last_activity_date": 1538613236, "creation_date": 1538610911, "question_id": 52637131, "link": "https://stackoverflow.com/questions/52637131/when-listing-multiple-filenames-with-os-walk-why-can-i-not-call-each-file-name", "title": "when listing multiple filenames with os.walk, why can I not call each file name via a list index?", "body": "<p>My apologies if this has been asked and answered - I have searched thoroughly but cannot seem to find a clear explanation for behaviour I am seeing, and I'm very new to programming and python.</p>\n\n<p>When I run the following code:</p>\n\n<pre><code>import os\ndirectory = \"J:\"\nextension = \"pdf\"\n\nfor root, dirs, files in os.walk(directory):\n    for filename in files:\n        if filename.endswith(\".\" + extension):\n            print(filename)\n</code></pre>\n\n<p>It produces the following:</p>\n\n<pre><code>Bristol.Investments.Ltd.y16m03.INVOICE.pdf\nBristol.Investments.Ltd.y16m04.INVOICE.pdf\nBristol.Investments.Ltd.y16m05.INVOICE.pdf\nJames.Cunningham.2017.PAID.pdf\nrandom.test.file.pdf\n</code></pre>\n\n<p>Now, if I were to change this to end in</p>\n\n<pre><code>print(filename[2])\n</code></pre>\n\n<p>I would expect it to print the third line like so:</p>\n\n<pre><code>Bristol.Investments.Ltd.y16m05.INVOICE.pdf\n</code></pre>\n\n<p>Instead I get the third letter from each line thus:</p>\n\n<pre><code>i\ni\ni\nm\nn\n</code></pre>\n\n<p>Can someone please explain this behaviour?  According to Python documentation, os.walk yields dirpath, dirnames, filenames, where \"filenames\" is \"a list of the names of the non-directory files in dirpath\" - but I guess I don't understand lists or how to access data within them properly.</p>\n\n<p>If someone could explain why I am seeing this behaviour, and/or how to call the full file name out of the list of filenames, I'd really appreciate it, thanks.</p>\n"}, {"tags": ["python", "machine-learning", "scikit-learn", "binning"], "answers": [{"tags": [], "owner": {"reputation": 94, "user_id": 10353642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/060349364db2b04167781e0bea1a7ad2?s=128&d=identicon&r=PG&f=1", "display_name": "Rhae", "link": "https://stackoverflow.com/users/10353642/rhae"}, "is_accepted": false, "score": 0, "last_activity_date": 1538655962, "creation_date": 1538655962, "answer_id": 52646680, "question_id": 52637106, "link": "https://stackoverflow.com/questions/52637106/binning-values-of-columns-features-in-scikit-learn/52646680#52646680", "title": "Binning values of columns (features) in scikit-learn", "body": "<p>Do it this way, decide you custom boundary on which you want to bucket the variable.</p>\n\n<pre><code>bins_boundary = [0,1,2,8]\nlabels = ['A','B','C'] #labels\n#CREATE BUCKETS\ndf['x1'] = pd.cut(df['x1'], bins=bins, labels=labels)\n</code></pre>\n\n<p>Continuous variables are bin to buckets for various purposes. Sometime you want to turn your regression problem into classification.</p>\n\n<p>Also look at pandas <strong><code>qcut</code></strong> for effective discretization. You can also create bins using <strong><code>quantiles</code></strong> and population distribution of your variable. </p>\n"}], "owner": {"reputation": 1876, "user_id": 2347063, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/jHvV2.jpg?s=128&g=1", "display_name": "Pedram", "link": "https://stackoverflow.com/users/2347063/pedram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 932, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1538655962, "creation_date": 1538610640, "last_edit_date": 1538614926, "question_id": 52637106, "link": "https://stackoverflow.com/questions/52637106/binning-values-of-columns-features-in-scikit-learn", "title": "Binning values of columns (features) in scikit-learn", "body": "<p>Let's say I have a training dataset including the following rows (couple of samples from the dataset):</p>\n\n<pre><code>X1     X2      X3      Y\n1      44.9    44.9    32.49370277\n8      402.4   1       28.79444926\n2      19.1    14      21.89679219\n1      -26.3   11.3    20.36124795\n1      -19.4   9.2     18.72667562\n2      4.1     2.1     16.93972179\n0      -1.2    1.2     16.59192825\n1      3.4     3.4     16.43835616\n3      7.8     4.6     16.35924841\n</code></pre>\n\n<p>where I have three variables (X1 to X3) as my features and a target variable (Y). When I train a model on the dataset (which includes more than 10,000 samples) I find not a strong correlation among these features. </p>\n\n<p>Now, I want to group the values in each column (X1, X2, and X3) and see if it is going to affect the result of my model. I am wondering if there is any function that does that in sklearn? A function/method which bins/groups the values of each column and also gives me a combination of all the possible binning of these three features (X1 to X3) so that I can test them all and find the best model.</p>\n\n<p>I noticed there is a function named <strong>KBinsDiscretizer</strong> in sklearn for binning, is this something I should use for the purpose of what I mentioned? And if yes, how should I choose the number of bins? Basically I am wondering if \"<strong>binning</strong>\" is the keyword that I should be looking for in order to group the values of features in the dataset for training models? Values could be either continuous or discrete.</p>\n\n<p>If there is any other library/package in python that could do what I described, that would be helpful too.</p>\n"}, {"tags": ["python", "elasticsearch", "search"], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 8088891, "user_type": "registered", "profile_image": "https://graph.facebook.com/1826040834376383/picture?type=large", "display_name": "Noah Omdal", "link": "https://stackoverflow.com/users/8088891/noah-omdal"}, "edited": false, "score": 0, "creation_date": 1538766564, "post_id": 52641685, "comment_id": 92273631, "body": "Thanks! However when I try the first solution using the list of indices, I&#39;m getting a NotFoundError where it telle me &quot;no such index&quot;. Any ideas? Also, If you look at the end of the line, there&#39;s &quot;title=term&quot; where term is the input I&#39;m trying to query and title is the name of one of the indices. I&#39;m still confused how I indicate there that I want to search over all of the indices and not only the &quot;title&quot; index. Any ideas?"}], "tags": [], "owner": {"reputation": 163519, "user_id": 4604579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/reC2t.jpg?s=128&g=1", "display_name": "Val", "link": "https://stackoverflow.com/users/4604579/val"}, "is_accepted": false, "score": 0, "last_activity_date": 1538639543, "creation_date": 1538639543, "answer_id": 52641685, "question_id": 52637098, "link": "https://stackoverflow.com/questions/52637098/how-do-you-use-elasticsearch-in-python-to-search-over-all-indices/52641685#52641685", "title": "How do you use elasticsearch in python to search over all indices?", "body": "<p>You can do it like this by enumerating your indices:</p>\n\n<pre><code>def search(term):\n    s = Search(index=['index1', 'index2']).filter('match_phrase', title=term)\n    response = s.execute()\n    return response\n</code></pre>\n\n<p>or like this using a wildcard</p>\n\n<pre><code>def search(term):\n    s = Search(index='index*').filter('match_phrase', title=term)\n    response = s.execute()\n    return response\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 8088891, "user_type": "registered", "profile_image": "https://graph.facebook.com/1826040834376383/picture?type=large", "display_name": "Noah Omdal", "link": "https://stackoverflow.com/users/8088891/noah-omdal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1538639543, "creation_date": 1538610558, "question_id": 52637098, "link": "https://stackoverflow.com/questions/52637098/how-do-you-use-elasticsearch-in-python-to-search-over-all-indices", "title": "How do you use elasticsearch in python to search over all indices?", "body": "<p>Here is my code:</p>\n\n<pre><code>def search(term):\n    s = Search().filter('match_phrase', title=term)\n    response = s.execute()\n    return response\n</code></pre>\n\n<p>Looking at the function, title is the name of one of my indices. How do I change it so instead of only searching over one index, it searches over all of my indices?</p>\n"}, {"tags": ["python", "linux", "pandas", "dataframe", "text"], "comments": [{"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1538610205, "post_id": 52637037, "comment_id": 92207186, "body": "I don&#39;t think so, but parsing your file line by line doesn&#39;t seem difficult at all, why don&#39;t you just try?"}], "answers": [{"tags": [], "owner": {"reputation": 19199, "user_id": 131187, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/27eJi.jpg?s=128&g=1", "display_name": "Bill Bell", "link": "https://stackoverflow.com/users/131187/bill-bell"}, "is_accepted": false, "score": 0, "last_activity_date": 1538689359, "creation_date": 1538689359, "answer_id": 52655570, "question_id": 52637037, "link": "https://stackoverflow.com/questions/52637037/how-can-i-create-a-pandas-dataframe-from-specific-columns-of-a-txt-file/52655570#52655570", "title": "How can I create a pandas dataframe from specific columns of a .txt file?", "body": "<p>It appears to me that the data in your file are in fixed-width columns. With this assumption, I have altered your file to make it acceptable to pandas, like this.</p>\n\n<pre><code> 1 ALA X   4 80.8 40.6\n 2 VAL X 234 90.1 42.7\n 3 VAL X1143 95.2 47.8\n34ALAN X3324100.2345.8\n</code></pre>\n\n<p>Then you can read the first and fourth columns in this way.</p>\n\n<pre><code>&gt;&gt;&gt; import pandas\n&gt;&gt;&gt; names = ['first', 'ignore', 'second']\n&gt;&gt;&gt; widths = [2, 7, 4]\n&gt;&gt;&gt; df = pandas.read_fwf('hilliard.txt', widths=widths, names=names, index_col=False)\n&gt;&gt;&gt; df\n   first   ignore  second\n0      1    ALA X       4\n1      2    VAL X     234\n2      3   VAL X1     143\n3     34  ALAN X3    3241\n</code></pre>\n\n<p>(Having done this, you could delete the unneeded column.)</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7675118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27ab125e1cb94f8250bb53a441d301d9?s=128&d=identicon&r=PG&f=1", "display_name": "S. Hilliard", "link": "https://stackoverflow.com/users/7675118/s-hilliard"}, "is_accepted": true, "score": 0, "last_activity_date": 1539206737, "creation_date": 1539206737, "answer_id": 52749019, "question_id": 52637037, "link": "https://stackoverflow.com/questions/52637037/how-can-i-create-a-pandas-dataframe-from-specific-columns-of-a-txt-file/52749019#52749019", "title": "How can I create a pandas dataframe from specific columns of a .txt file?", "body": "<p>I found that this seemed to be easiest to fathom.</p>\n\n<pre><code>for filename in glob.glob('*.pdb'):    \nnewfile = open((filename[:5])+\".txt\",\"a+\")   \nnewfile.write('Residue_ID')\ntemporaryfile = open(filename, 'r')        \nfor line in temporaryfile: \n\n    if \"CA\" in line:                      \n        newfile.write(line[23:26])         \n\n    else:                                  \n        pass\n</code></pre>\n\n<p>And then use </p>\n\n<pre><code>filename[:10] = pd.read_csv((filename[:5])+\".txt\", columns = [(filename[:10])]) \n</code></pre>\n\n<p>to create the dataframe with one column. I'm now just working with dataframes to add them together and what not.</p>\n"}], "owner": {"reputation": 1, "user_id": 7675118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27ab125e1cb94f8250bb53a441d301d9?s=128&d=identicon&r=PG&f=1", "display_name": "S. Hilliard", "link": "https://stackoverflow.com/users/7675118/s-hilliard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 587, "favorite_count": 0, "accepted_answer_id": 52749019, "answer_count": 2, "score": -1, "last_activity_date": 1539206737, "creation_date": 1538609829, "last_edit_date": 1538610726, "question_id": 52637037, "link": "https://stackoverflow.com/questions/52637037/how-can-i-create-a-pandas-dataframe-from-specific-columns-of-a-txt-file", "title": "How can I create a pandas dataframe from specific columns of a .txt file?", "body": "<p>I have a number of text files with a specific format. Each column of the text file is allocated to specific information. There aren't any real delimiters, sometimes the entire set of columns is filled up and thus there isn't always white space. For example</p>\n\n<pre><code>1 ALA X   4 80.8 40.6\n2 VAL X 234 90.1 42.7\n3 VAL X1143 95.2 47.8\n...\n34ALANX3324100.2345.8\n</code></pre>\n\n<p>Columns 1-2 are dedicated to a straight count from 1-99. Columns 3-6 are dedicated to an identification tag. Column 7 is an modifier tag. Columns 8-11 are a number representing a value in another sequence. The actual meanings don't matter, I'm just explaining to help make it clear what is going on with this .txt file.  </p>\n\n<p>In this case I'm interested in columns 1-2 (with values from 0-99) and columns 8-11 (which has values from 0-9999). It is possible that these values sometimes return NaN or letters. I need to take those columns from the .txt file and put them into a pandas dataframe that has two columns. It seems obnoxious to have to add my own delimiters. Is there a way to tell pandas to create a dataframe column using a few of these text file columns?</p>\n\n<p>I am using Python 3.6, pandas v0.23.4, on Linux. </p>\n\n<p>edit: For clarification, when referring to columns of the .txt file I mean to refer to the location of the cursor as you move along horizontally. So the very first character of any line is in column 1, the second character of any line is column 2, the thirteenth character of any line is column 13, etc. When I say column when referring to pandas, I mean the actual column in context of how that word is used in pandas dataframes. Sorry for any possible confusion. </p>\n"}, {"tags": ["python", "python-3.x", "probability", "dice"], "comments": [{"owner": {"reputation": 767, "user_id": 4044442, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/85762c20846d6c4a3d1557ef28c2334b?s=128&d=identicon&r=PG", "display_name": "Jenner Felton", "link": "https://stackoverflow.com/users/4044442/jenner-felton"}, "edited": false, "score": 3, "creation_date": 1538610165, "post_id": 52637031, "comment_id": 92207179, "body": "Could you expand a bit on what is wrong with the current output? I don&#39;t know the general rules of pig and it&#39;s not entirely clear from your question what the expected output should be."}, {"owner": {"reputation": 53, "user_id": 10427723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e496895678492d7ec08099dace5e58a?s=128&d=identicon&r=PG&f=1", "display_name": "ggezpython3", "link": "https://stackoverflow.com/users/10427723/ggezpython3"}, "reply_to_user": {"reputation": 767, "user_id": 4044442, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/85762c20846d6c4a3d1557ef28c2334b?s=128&d=identicon&r=PG", "display_name": "Jenner Felton", "link": "https://stackoverflow.com/users/4044442/jenner-felton"}, "edited": false, "score": 0, "creation_date": 1538614058, "post_id": 52637031, "comment_id": 92207910, "body": "@JennerFelton Apologies. The problem lies with the adding part of turn score and final score. Say its my turn and I decide to roll i.e. press r. It should show exactly how it shows the computers turn. It is weird( 5+3=8 but shows as 9) whenever the player rolls."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 10427723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e496895678492d7ec08099dace5e58a?s=128&d=identicon&r=PG&f=1", "display_name": "ggezpython3", "link": "https://stackoverflow.com/users/10427723/ggezpython3"}, "edited": false, "score": 0, "creation_date": 1538629896, "post_id": 52638744, "comment_id": 92211236, "body": "Thanks! I will try to understand your code! It works so far! But the final score sometimes crosses 110..."}, {"owner": {"reputation": 767, "user_id": 4044442, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/85762c20846d6c4a3d1557ef28c2334b?s=128&d=identicon&r=PG", "display_name": "Jenner Felton", "link": "https://stackoverflow.com/users/4044442/jenner-felton"}, "reply_to_user": {"reputation": 53, "user_id": 10427723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e496895678492d7ec08099dace5e58a?s=128&d=identicon&r=PG&f=1", "display_name": "ggezpython3", "link": "https://stackoverflow.com/users/10427723/ggezpython3"}, "edited": false, "score": 0, "creation_date": 1538630943, "post_id": 52638744, "comment_id": 92211536, "body": "@ggezpython3 Sorry if I didn&#39;t include enough explanation with my code. The only real difference between what I did and what you did is that I didn&#39;t add <code>turn_score</code> to <code>final_score</code> until <code>final_score</code> is over <code>100</code>. Looking at it again, I think my code actually doesn&#39;t work correctly (as the while loop could end without incrementing the final score)."}], "tags": [], "owner": {"reputation": 767, "user_id": 4044442, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/85762c20846d6c4a3d1557ef28c2334b?s=128&d=identicon&r=PG", "display_name": "Jenner Felton", "link": "https://stackoverflow.com/users/4044442/jenner-felton"}, "is_accepted": false, "score": 1, "last_activity_date": 1538625111, "creation_date": 1538625111, "answer_id": 52638744, "question_id": 52637031, "link": "https://stackoverflow.com/questions/52637031/python-program-that-runs-a-game-of-pig-with-a-human-player-and-the-computer/52638744#52638744", "title": "Python program that runs a game of pig with a human player and the computer", "body": "<p>Ok, unless I'm missunderstanding the game, I think your issue is that you are adding the turn score to the final score <em>on each round</em>, instead of adding the difference between the turn score and the original final score on each round (i.e. you are giving the player  points for previous rolls on that turn even if they roll a 1 on a subsequent roll).</p>\n\n<p>Instead of:</p>\n\n<pre><code>        turn_score = 0\n        final_score = 0\n        if (choice=='r'):\n            while(turn_score&lt;=20):\n                dice_value = roll_dice()\n                turn_score += dice_value\n                if (dice_value==1):\n                    turn_score = 0\n                    print(\"-rolled a \",dice_value)\n                    print(\"Pigged out!\")\n                    break\n                print(\"Turn score is: \",turn_score)\n                final_score += turn_score\n                print(\"Your final score is: \",final_score)\n                if (final_score&gt;100):\n                    break\n</code></pre>\n\n<p>I think you want:</p>\n\n<pre><code>        turn_score = 0\n        final_score = 0\n        if (choice=='r'):\n            while(turn_score&lt;=20):\n                dice_value = roll_dice()\n                turn_score += dice_value\n                if dice_value == 1:\n                    turn_score = 0\n                    print(\"-rolled a \",dice_value)\n                    print(\"Pigged out!\")\n                    break\n                print(\"Turn score is: \", turn_score)\n                print(\"Your final score is: \", final_score + turn_score)\n                if final_score + turn_score &gt; 100:\n                    final_score += turn_score\n                    break\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 10427723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e496895678492d7ec08099dace5e58a?s=128&d=identicon&r=PG&f=1", "display_name": "ggezpython3", "link": "https://stackoverflow.com/users/10427723/ggezpython3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3582, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1538625111, "creation_date": 1538609788, "last_edit_date": 1538614897, "question_id": 52637031, "link": "https://stackoverflow.com/questions/52637031/python-program-that-runs-a-game-of-pig-with-a-human-player-and-the-computer", "title": "Python program that runs a game of pig with a human player and the computer", "body": "<p>So in a nutshell, who goes first is decided randomly. When the human players turn does come up, he/she has the option to either hold or roll. If he chooses to roll, a dice is rolled and the values are added(to turn_score) till it is >20 after which it is the computers turn. </p>\n\n<p>The turn score is added to the final score after every turn. If a 1 rolls up, the turn score becomes 0(the final does NOT change). </p>\n\n<p>Any advice on  where I am going wrong with this one?</p>\n\n<pre><code>import random\ndef roll_dice():\n    return random.randint(1,6)\n\nplayers = ['Player One', 'Player Two']\nscores = {'Player One': 0, 'Player Two': 0}\nrandom.shuffle(players)\n\nwhile True:\n    for i in players:\n        if i == 'Player One':\n            choice = input(\"Roll(r) or Hold(h)?: \")\n            turn_score = 0\n            final_score = 0\n            if (choice=='r'):\n                while(turn_score&lt;=20):\n                    dice_value = roll_dice()\n                    turn_score += dice_value\n                    if (dice_value==1):\n                        turn_score = 0\n                        print(\"-rolled a \",dice_value)\n                        print(\"Pigged out!\")\n                        break\n                    print(\"Turn score is: \",turn_score)\n                    final_score += turn_score\n                    print(\"Your final score is: \",final_score)\n                    if (final_score&gt;100):\n                        break\n        else:\n            turn_score=0\n            print(\"It is \" +  str(i) + \"'s turn.\")\n            while(turn_score&lt;20):\n                dice_value = roll_dice()\n                if (dice_value==1):\n                    turn_score = 0\n                    scores[i] +=0\n                    print(\"- rolled a \",dice_value)\n                    print(\"Pigged out!\")\n                    break\n                else:\n                    turn_score+=dice_value\n                    print(\"-rolled a \",dice_value)\n        scores[i] += turn_score\n        print(\"Turn score is: \",turn_score)\n        print('{} score: {} {} score: {}'.format(players[0], scores[players[0]], players[1], scores[players[1]]))\n        if scores[i]&gt;100:\n            break\n    if scores[i]&gt;100:\n        break\n\nwinner = [winner for winner in scores if scores[winner] == max(scores.values())]\nprint(str(winner) + \" is the winner!\")`\n</code></pre>\n\n<p>Here is what I am getting as an output:</p>\n\n<pre><code>It is Player Twos turn.\n-rolled a  3\n-rolled a  5\n-rolled a  5\n-rolled a  5\n-rolled a  4\nTurn score is:  22\nPlayer Two score: 22 Player One score: 0\nRoll(r) or Hold(h)?: h\nIt is Player Twos turn.\n- rolled a  1\nPigged out!\nTurn score is:  0\nPlayer Two score: 22 Player One score: 0\nRoll(r) or Hold(h)?: r\nTurn score is:  3\nYour final score is:  3\nTurn score is:  5\nYour final score is:  8\nTurn score is:  9\nYour final score is:  17\nTurn score is:  13\nYour final score is:  30\nTurn score is:  16\nYour final score is:  46\nTurn score is:  19\nYour final score is:  65\n-rolled a  1\nPigged out!\nIt is Player Twos turn.\n- rolled a  1\nPigged out!\nTurn score is:  0\nPlayer Two score: 22 Player One score: 0\nRoll(r) or Hold(h)?:\n</code></pre>\n"}, {"tags": ["python", "charts", "colors", "bokeh", "pie-chart"], "answers": [{"comments": [{"owner": {"reputation": 682, "user_id": 6302270, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GTMFq.jpg?s=128&g=1", "display_name": "alexfrize", "link": "https://stackoverflow.com/users/6302270/alexfrize"}, "edited": false, "score": 0, "creation_date": 1538668454, "post_id": 52637078, "comment_id": 92233638, "body": "Thank you. It helped. I&#39;m new to Python. I tried to use &#39;data[&#39;color&#39;] = chart_colors&#39; instead of &#39;data[&#39;color&#39;] = chart_colors[:len(x)]&#39; and got an error. Now it works. Thank you!"}, {"owner": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "reply_to_user": {"reputation": 682, "user_id": 6302270, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GTMFq.jpg?s=128&g=1", "display_name": "alexfrize", "link": "https://stackoverflow.com/users/6302270/alexfrize"}, "edited": false, "score": 0, "creation_date": 1538668668, "post_id": 52637078, "comment_id": 92233743, "body": "Yes, it&#39;s worth stating explicitly: all of the columns of a ColumnDataSource must <i>always be the same length at all times</i> (the same as Pandas)"}], "tags": [], "owner": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "is_accepted": true, "score": 2, "last_activity_date": 1538610307, "creation_date": 1538610307, "answer_id": 52637078, "question_id": 52637025, "link": "https://stackoverflow.com/questions/52637025/python-bokeh-pie-chart-colors-how-to-change/52637078#52637078", "title": "Python Bokeh pie chart colors, how to change", "body": "<blockquote>\n  <p>but I use Bokeh 0.13.0, so I have only fill_color='color' for each color.</p>\n</blockquote>\n\n<p>This is not true. The <code>color</code> argument is available to to any glyph method (including <code>wedge</code>) is just a convenience to set both <code>fill_color</code> and <code>line_color</code> at the same time.  Your question is somewhat confusing since the size of your palette does not match the size of your data, but here is a complete example that simply uses the palette, truncated:</p>\n\n<pre><code>from collections import Counter\nfrom math import pi\n\nimport pandas as pd\n\nfrom bokeh.io import output_file, show\nfrom bokeh.plotting import figure\nfrom bokeh.transform import cumsum\n\nchart_colors = ['#44e5e2', '#e29e44', '#e244db',\n                '#d8e244', '#eeeeee', '#56e244', '#007bff', 'black']\n\nx = Counter({\n    'Submitted': 179,\n    'Approved': 90,\n    'Denied': 80\n})\n\ndata = pd.DataFrame.from_dict(dict(x), orient='index').reset_index().rename(\n    index=str, columns={0: 'value', 'index': 'claimNumber'})\ndata['angle'] = data['value']/sum(x.values()) * 2*pi\ndata['color'] = chart_colors[:len(x)]\n\np = figure(plot_height=350, title=\"Pie Chart\", toolbar_location=None)\n\np.wedge(x=0, y=1, radius=0.28,\n        start_angle=cumsum('angle', include_zero=True), end_angle=cumsum('angle'),\n        color='color', legend='claimNumber', source=data)\n\np.axis.axis_label=None\np.axis.visible=False\np.grid.grid_line_color = None\n\nshow(p)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/tCQae.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tCQae.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 682, "user_id": 6302270, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GTMFq.jpg?s=128&g=1", "display_name": "alexfrize", "link": "https://stackoverflow.com/users/6302270/alexfrize"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1008, "favorite_count": 0, "accepted_answer_id": 52637078, "answer_count": 1, "score": 1, "last_activity_date": 1538610307, "creation_date": 1538609703, "question_id": 52637025, "link": "https://stackoverflow.com/questions/52637025/python-bokeh-pie-chart-colors-how-to-change", "title": "Python Bokeh pie chart colors, how to change", "body": "<p>I have a palette:</p>\n\n<pre><code>chart_colors = ['#44e5e2', '#e29e44', '#e244db',\n                '#d8e244', '#eeeeee', '#56e244', '#007bff', 'black']\n</code></pre>\n\n<p>And a pie chart which is generated by Bokeh.</p>\n\n<pre><code>x = Counter({\n    'Submitted': 179,\n    'Approved': 90,\n    'Denied': 80\n})\n\ndata = pd.DataFrame.from_dict(dict(x), orient='index').reset_index().rename(\n    index=str, columns={0: 'value', 'index': 'claimNumber'})\ndata['angle'] = data['value']/sum(x.values()) * 2*pi\ndata['color'] = Category20c[len(x)]\n\np = figure(plot_height=200,\n           tooltips=\"@claimNumber: @value\",\n           name='claimChart')\n\np.wedge(x=0, y=1, radius=0.28,\n        start_angle=cumsum('angle', include_zero=True), end_angle=cumsum('angle'),\n        line_color=\"white\", fill_color='color', legend='claimNumber', source=data)\n\ncurdoc().add_root(p)\n</code></pre>\n\n<p>Now fill_color='color' and color is defined as 'data['color'] = Category20c[len(x)]'.</p>\n\n<p>In older versions it's possible to provide 'color' (p.wedge(..., color=...), but I use Bokeh 0.13.0, so I have only fill_color='color' for each color.</p>\n\n<p>How I can change data['color'] to the color from my 'chart_colors' array?</p>\n"}, {"tags": ["python", "utf-8", "hex"], "comments": [{"owner": {"reputation": 4539, "user_id": 1698431, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lpYwg.png?s=128&g=1", "display_name": "lenz", "link": "https://stackoverflow.com/users/1698431/lenz"}, "edited": false, "score": 1, "creation_date": 1538646552, "post_id": 52636988, "comment_id": 92219698, "body": "It&#39;s impossible to encode the character &quot;\u6227&quot; with ISO 8859-1 (&quot;Latin-1&quot;). If you open a file with this codec, the variable <code>c</code> can never have the value &quot;\u6227&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 4539, "user_id": 1698431, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lpYwg.png?s=128&g=1", "display_name": "lenz", "link": "https://stackoverflow.com/users/1698431/lenz"}, "edited": false, "score": 1, "creation_date": 1538646218, "post_id": 52637066, "comment_id": 92219489, "body": "You can remove some boilerplate by using the built-in function <code>hex</code>, ie. <code>&#39; &#39;.join(hex(b) for b in encoded_bytes)</code>."}], "tags": [], "owner": {"reputation": 3737, "user_id": 7417402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0362a30046be9244cf62d2a9fc6f8568?s=128&d=identicon&r=PG", "display_name": "Devstr", "link": "https://stackoverflow.com/users/7417402/devstr"}, "is_accepted": true, "score": 1, "last_activity_date": 1538648322, "last_edit_date": 1538648322, "creation_date": 1538610190, "answer_id": 52637066, "question_id": 52636988, "link": "https://stackoverflow.com/questions/52636988/how-to-convert-from-iso-8859-1-format-to-utf-8-and-then-into-hex-format-string-p/52637066#52637066", "title": "How to Convert from ISO-8859-1 format to UTF-8 and then into hex format string python", "body": "<p>This works for me in Python 3.7</p>\n\n<pre><code>a = '\u6227'\nencoded_bytes = a.encode(encoding='utf-8')\nprint(' '.join([hex(b) for b in encoded_bytes]))\n\n&gt;&gt;&gt; 0xe6 0x88 0xa7\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 7904198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a02d01c67a7bfcf3e93550ecabb296b9?s=128&d=identicon&r=PG&f=1", "display_name": "rakshithnrr", "link": "https://stackoverflow.com/users/7904198/rakshithnrr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 52637066, "answer_count": 1, "score": 0, "last_activity_date": 1538648322, "creation_date": 1538609377, "question_id": 52636988, "link": "https://stackoverflow.com/questions/52636988/how-to-convert-from-iso-8859-1-format-to-utf-8-and-then-into-hex-format-string-p", "title": "How to Convert from ISO-8859-1 format to UTF-8 and then into hex format string python", "body": "<p>How do I convert the  UTF-8 format character '\u6227' to a hex value and store it as a string \"0xe6 0x88 0xa7\".</p>\n\n<pre><code>with open(fromFilename,  encoding = \"ISO-8859-1\") as f:\n    while True:\n        c = f.read(1)\n        if not c:\n            print (\"End of file\")\n            break\n        print (\"Read a character: %c\", c)\n        newC = repr(c.encode('utf-8'))\n        print (\"Read a decode character: %c\", newC)\n        newString = newString + newC\n</code></pre>\n\n<p>This is my code. Please let me know what's wrong.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 8468, "user_id": 1586200, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/111c497a3eb270092100e5ee807d9994?s=128&d=identicon&r=PG&f=1", "display_name": "Autonomous", "link": "https://stackoverflow.com/users/1586200/autonomous"}, "edited": false, "score": 0, "creation_date": 1538611319, "post_id": 52636959, "comment_id": 92207398, "body": "I can&#39;t point out the exact problem but I think the basic cause of it is explained <a href=\"https://stackoverflow.com/questions/29785084/changing-one-list-unexpectedly-changes-another-too\">here</a>."}], "owner": {"reputation": 11, "user_id": 10453860, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PLcx0qiKDwg/AAAAAAAAAAI/AAAAAAAAIvc/6pP_axMqE5U/photo.jpg?sz=128", "display_name": "Manoj Kashyap", "link": "https://stackoverflow.com/users/10453860/manoj-kashyap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1538609083, "creation_date": 1538609083, "question_id": 52636959, "link": "https://stackoverflow.com/questions/52636959/value-in-a-list-is-being-parsed-incorrectly-in-python3", "title": "Value in a list is being parsed incorrectly in Python3", "body": "<p>The following function for some reason is displaying different values of q1 at two different executions of it. I use Pycharm and the value of the last element in q1 is different in both the outputs it is displaying</p>\n\n<pre><code>def rotation(mat):\n    q1 = mat[0]\n    q2 = [mat[i][-1] for i in range(len(mat))]\n    print('\\n\\n', q1, q2)\n\n    ####### This is where it goes wrong\n    print('Actual:', q1[len(q1)-1], len(q1)-1)\n    for i in range(0, len(q1)):\n        mat[i][-1] = q1[i]\n        print('Obtained:', q1[i], i)\n    ##########################\n\n\n    # display(mat)\n    q1 = q2\n    q2 = mat[-1][::-1]\n\n    for i in range(len(mat[-1]), 0):\n        mat[-1][i] = q1[len(mat)-i-1]\n\n    # display(mat)\n    q1 = q2\n    q2 = [mat[i][0] for i in range(len(mat)-1, 0, -1)]\n\n    for i in range(len(mat)-1, 0, -1):\n        mat[i][0] = q1[len(mat)-i-1]\n\n    # display(mat)\n    q1 = q2\n\n    for i in range(len(mat[0])-1 ):\n        mat[0][i] = q1[i]\n\n    print('\\n\\n')\n    # display(mat)\n</code></pre>\n\n<p>UPDATE: The value is printing correctly if I comment out the line where I assign the value to mat[i][-1].</p>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1538609074, "post_id": 52636943, "comment_id": 92206965, "body": "A stateful object is simply one that has <a href=\"https://en.wikipedia.org/wiki/State_(computer_science)#Program_state\" rel=\"nofollow noreferrer\">state</a>."}, {"owner": {"reputation": 1840, "user_id": 1917721, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/TgopK.png?s=128&g=1", "display_name": "HFBrowning", "link": "https://stackoverflow.com/users/1917721/hfbrowning"}, "edited": false, "score": 0, "creation_date": 1538609740, "post_id": 52636943, "comment_id": 92207104, "body": "The answer on this question might be able to help a little, even though it&#39;s about Keras: <a href=\"https://stackoverflow.com/questions/41695117/understanding-stateful-lstm\" title=\"understanding stateful lstm\">stackoverflow.com/questions/41695117/&hellip;</a>"}, {"owner": {"reputation": 1840, "user_id": 1917721, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/TgopK.png?s=128&g=1", "display_name": "HFBrowning", "link": "https://stackoverflow.com/users/1917721/hfbrowning"}, "edited": false, "score": 0, "creation_date": 1538609848, "post_id": 52636943, "comment_id": 92207127, "body": "Try also googling for stateful LSTM, perhaps read some of the papers [Note: commenting only because I don&#39;t know enough to reply with a good answer :) ]"}, {"owner": {"reputation": 69, "user_id": 1047543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2a0d0f041394b37719396e3a8ef6de4?s=128&d=identicon&r=PG", "display_name": "Lorenzo Riano", "link": "https://stackoverflow.com/users/1047543/lorenzo-riano"}, "edited": false, "score": 0, "creation_date": 1538610668, "post_id": 52636943, "comment_id": 92207274, "body": "Thanks for the hint! I&#39;m actually looking for an answer that is more coding and tensorflow-specific."}, {"owner": {"reputation": 1840, "user_id": 1917721, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/TgopK.png?s=128&g=1", "display_name": "HFBrowning", "link": "https://stackoverflow.com/users/1917721/hfbrowning"}, "edited": false, "score": 0, "creation_date": 1538611684, "post_id": 52636943, "comment_id": 92207473, "body": "Also, what about the example you posted leads you to believe that <code>make_one_shot_iterator()</code> is stateless? You still have to use <code>tf.Session.run()</code> to advance the iterator (this is shown with <code>sess.run()</code> at the completion of the example you used)"}, {"owner": {"reputation": 69, "user_id": 1047543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2a0d0f041394b37719396e3a8ef6de4?s=128&d=identicon&r=PG", "display_name": "Lorenzo Riano", "link": "https://stackoverflow.com/users/1047543/lorenzo-riano"}, "reply_to_user": {"reputation": 1840, "user_id": 1917721, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/TgopK.png?s=128&g=1", "display_name": "HFBrowning", "link": "https://stackoverflow.com/users/1917721/hfbrowning"}, "edited": false, "score": 0, "creation_date": 1538612247, "post_id": 52636943, "comment_id": 92207578, "body": "@HFBrowning The documentation specify that <code>make_one_shot_iterator()</code> only works with stateless objects. If you try to call it on a stateful object (whatever that is, now) it will throw an error. Hence my confusion."}], "answers": [{"tags": [], "owner": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "is_accepted": true, "score": 8, "last_activity_date": 1538729335, "last_edit_date": 1538729335, "creation_date": 1538645998, "answer_id": 52643573, "question_id": 52636943, "link": "https://stackoverflow.com/questions/52636943/what-is-a-stateful-object-in-tensorflow/52643573#52643573", "title": "What is a &quot;stateful object&quot; in tensorflow?", "body": "<p>As others have mentioned, stateful objects are those holding a state. <strong>Now, a state, in TensorFlow terms, is some value or data that is saved between different calls to <a href=\"https://www.tensorflow.org/api_docs/python/tf/Session#run\" rel=\"noreferrer\"><code>tf.Session.run</code></a></strong>. The most common and basic kind of stateful objects are variables. You can call <code>run</code> once to update a model's parameters, which are variables, and they will maintain their assigned value for the next call to <code>run</code>. This is different to most operations; for example, if you have an addition operation, which takes two tensors and outputs a third one, the output value that it computes in one call to <code>run</code> is not saved. Indeed, even if your graph consists only on operations with constant values, tensor operations will be evaluated every time you call <code>run</code>, even though the result will always be the same. <strong>When you <a href=\"https://www.tensorflow.org/api_docs/python/tf/assign\" rel=\"noreferrer\">assign</a> a value to a variable, however, it will \"stick\"</strong> (and, by the way, take the corresponding memory and, if you choose so, be serialized on checkpoints).</p>\n\n<p>Dataset iterators are also stateful. When you get a piece of data in one run then it is consumed, and then in the next run you get a different piece of data; the iterator \"remembers\" where it was between runs. That is why, similarly to how you initialize variables, you can initialize iterators (when they support it), to reset them back to a known state.</p>\n\n<p>Technically speaking, another kind of stateful objects is random operations. One usually regards random operations as, well, random, but in reality they hold a random number generator that does have a state which is held between runs, and if you provide a seed then they will be in a well-defined state when you start the session. However there is not, as far as I know, any way to reset random operations to their initial state within the same session.</p>\n\n<p>Note that frequently (when one is not referring to TensorFlow in particular) the term \"stateful\" is used in a slightly different sense, or at a different level of abstraction. For example, <a href=\"https://en.wikipedia.org/wiki/Recurrent_neural_network\" rel=\"noreferrer\">recurrent neural networks (RNNs)</a> are generally said to be stateful, because, conceptually, they have an internal state that changes with every input they receive. When you make a RNN in TensorFlow, however, that internal state does not necessarily have to be in a stateful object! Like any other kind of neural network, RNNs in TensorFlow will in principle have some parameters or weights, typically stored in trainable variables - so, in TensorFlow terms, all trainable models, RNN or not, have stateful objects for the trained parameters. However, the internal state of the RNN is represented in TensorFlow with an input state value and and output state value that you get on each run (see <a href=\"https://www.tensorflow.org/api_docs/python/tf/nn/dynamic_rnn\" rel=\"noreferrer\"><code>tf.nn.dynamic_rnn</code></a>), and you can just start with a \"zero\" state on each run and forget about the final output state. Of course, you can also, if you want, take the input state to be the value of a variable, and the write the output state back to that variable, and then your RNN internal state will be \"stateful\" for TensorFlow; that is, you would be able to process some data in one run and the \"pick up where you left it\" in the next run (which may or may not make sense depending on the case). I understand this can be a bit confusing but I hope it makes sense.</p>\n"}], "owner": {"reputation": 69, "user_id": 1047543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2a0d0f041394b37719396e3a8ef6de4?s=128&d=identicon&r=PG", "display_name": "Lorenzo Riano", "link": "https://stackoverflow.com/users/1047543/lorenzo-riano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2037, "favorite_count": 1, "accepted_answer_id": 52643573, "answer_count": 1, "score": 4, "last_activity_date": 1561150515, "creation_date": 1538608981, "last_edit_date": 1538609433, "question_id": 52636943, "link": "https://stackoverflow.com/questions/52636943/what-is-a-stateful-object-in-tensorflow", "title": "What is a &quot;stateful object&quot; in tensorflow?", "body": "<p>In several parts of the documentation (e.g. <code>Dataset Iterators</code> <a href=\"https://www.tensorflow.org/guide/datasets#consuming_values_from_an_iterator\" rel=\"nofollow noreferrer\">here</a>) there are references to <code>Stateful Objects</code>. What exactly are they and what role do they play in the graph?</p>\n\n<p>To clarify, in the Dataset documentation there's an example with the <code>one_shot_iterator</code> that works because it's stateless:  </p>\n\n<pre><code>dataset = tf.data.Dataset.range(100)\niterator = dataset.make_one_shot_iterator()\n</code></pre>\n\n<p>what makes the iterator stateless?</p>\n"}, {"tags": ["python", "typeerror", "discord", "discord.py", "discord.py-rewrite"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10431457"}, "edited": false, "score": 0, "creation_date": 1538612170, "post_id": 52637128, "comment_id": 92207565, "body": "Thanks Patrick I tried something similar like this. I also tried this  <code>if message.attachments:                 for attachment in message.attachments:                     delmessage.add_field(name=&#39;**Attachment**&#39;, value=&#39;[{0.filename}]({0.url})&#39;.format(attachment), inline=True)</code>  Unfortunately this doesn&#39;t work for me"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10431457"}, "edited": false, "score": 0, "creation_date": 1538620153, "post_id": 52637128, "comment_id": 92209120, "body": "When testing a image delete in the server it doesn&#39;t show up in the log as intended."}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1538621467, "post_id": 52637128, "comment_id": 92209352, "body": "I could get your code to work for file uploads (dragging and dropping an image in the chat window, for example.) So for a file named <code>image.png</code> i could get an embed with that filename as a link to the image."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10431457"}, "edited": false, "score": 0, "creation_date": 1538648613, "post_id": 52637128, "comment_id": 92220836, "body": "There must be an indentation issue perhaps? I&#39;ll have another look."}], "tags": [], "owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "is_accepted": true, "score": 0, "last_activity_date": 1538610868, "creation_date": 1538610868, "answer_id": 52637128, "question_id": 52636911, "link": "https://stackoverflow.com/questions/52636911/typeerror-format-argument-after-must-be-a-mapping-not-attachment/52637128#52637128", "title": "TypeError: format() argument after ** must be a mapping, not Attachment", "body": "<p>You can't unpack objects to get their attributes (unless the object is specifically designed to do that).  Instead, you can write your format string to access attributes via dot notation:</p>\n\n<pre><code>delmessage.add_field(name='**Attachment**', value='[{0.filename}]({0.url})'.format(attachment), inline=True)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 10456760, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/07028df780e2378c054aecd3343e0c07?s=128&d=identicon&r=PG", "display_name": "user10456760", "link": "https://stackoverflow.com/users/10456760/user10456760"}, "is_accepted": false, "score": 1, "last_activity_date": 1538658291, "creation_date": 1538658291, "answer_id": 52647486, "question_id": 52636911, "link": "https://stackoverflow.com/questions/52636911/typeerror-format-argument-after-must-be-a-mapping-not-attachment/52647486#52647486", "title": "TypeError: format() argument after ** must be a mapping, not Attachment", "body": "<p>Some information for the OP. Access to any links this way will not work. Discord has recently changed how images are cached. If you access the image before it's deleted you're able to get a cached copy otherwise if it's deleted before you access it is gone for good.</p>\n\n<p>Embedding a link and accessing it will only return a 403 error.  </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10431457"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 371, "favorite_count": 0, "accepted_answer_id": 52637128, "answer_count": 2, "score": 0, "last_activity_date": 1538658291, "creation_date": 1538608763, "last_edit_date": 1538610701, "question_id": 52636911, "link": "https://stackoverflow.com/questions/52636911/typeerror-format-argument-after-must-be-a-mapping-not-attachment", "title": "TypeError: format() argument after ** must be a mapping, not Attachment", "body": "<p>Hi I'm trying to fix an issue with a log module with my discord bot. I'm getting the error <code>TypeError: format() argument after ** must be a mapping, not Attachment</code></p>\n\n<p><code>cogs\\core.py\", line 351, in on_message_delete\n    delmessage.add_field(name='**Attachment**', value='[{filename}]({url})'.format(**attachment), inline=True)\nTypeError: format() argument after ** must be a mapping, not Attachment</code></p>\n\n<p>I'm not sure whats causing this.</p>\n\n<p>Heres what I'm working with:</p>\n\n<pre><code>async def on_message_delete(self, message):\n    guild = message.guild\n    author = message.author\n    bot_member = guild.me\n    time = dt.datetime.utcnow()\n    now = dt.datetime.utcnow()\n    if author.bot:\n        return\n    if not guild:\n        return\n    cleanmsg = message.content\n    for i in message.mentions:\n        cleanmsg = cleanmsg.replace(i.mention, str(i))\n    name = author\n    name = \" ~ \".join((name.name, name.nick)) if name.nick else name.name\n    changes = True\n    if author.id != self.bot.user.id:\n        infomessage = \"A message by {} was deleted.\".format(message.author.mention, message.channel.mention)\n        delmessage = discord.Embed(description=infomessage, colour=discord.Color.purple(), timestamp=time)\n        delmessage.add_field(name=\"Message:\", value=cleanmsg)\n        delmessage.set_footer(text=\"ID: {}\".format(message.author.id))\n        delmessage.set_author(name=name + \"'s message was deleted.\", icon_url=message.author.avatar_url)\n        if message.attachments:\n            for attachment in message.attachments:\n                delmessage.add_field(name='**Attachment**', value='[{filename}]({url})'.format(**attachment), inline=True)\n        await self.bot.send_log_message(guild, embed=delmessage)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "machine-learning", "reinforcement-learning", "openai-gym"], "comments": [{"owner": {"reputation": 383, "user_id": 7568866, "user_type": "registered", "profile_image": "https://graph.facebook.com/1227872887333866/picture?type=large", "display_name": "Stefan", "link": "https://stackoverflow.com/users/7568866/stefan"}, "edited": false, "score": 0, "creation_date": 1610564101, "post_id": 52636899, "comment_id": 116176977, "body": "Have you ever found a solution? I have the same problem."}], "answers": [{"comments": [{"owner": {"reputation": 3040, "user_id": 4439753, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/l4ACZ.png?s=128&g=1", "display_name": "Neabfi", "link": "https://stackoverflow.com/users/4439753/neabfi"}, "edited": false, "score": 0, "creation_date": 1548962288, "post_id": 53485133, "comment_id": 95743394, "body": "Good answer, From the doc: <code>video_callable (Optional[function, False]): function that takes in the index of the episode and outputs a boolean, indicating whether we should record a video on this episode. The default (for video_callable is None) is to take perfect cubes, capped at 1000. False disables video recording.</code> So you need to define <code>video_callable</code> because it is False by default."}], "tags": [], "owner": {"reputation": 521, "user_id": 4076059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc4ac6722d868da93c64bd430b968513?s=128&d=identicon&r=PG&f=1", "display_name": "Tejas", "link": "https://stackoverflow.com/users/4076059/tejas"}, "is_accepted": false, "score": 8, "last_activity_date": 1543248981, "creation_date": 1543248981, "answer_id": 53485133, "question_id": 52636899, "link": "https://stackoverflow.com/questions/52636899/python-openai-gym-monitor-creates-json-files-in-the-recording-directory/53485133#53485133", "title": "python OpenAI gym monitor creates json files in the recording directory", "body": "<p>Last time I checked, this was working fine:</p>\n\n<pre><code>env = gym.wrappers.Monitor(env, \"./vid\", video_callable=lambda episode_id: True,force=True)\n</code></pre>\n\n<p>This will record the video for all the episodes. You can use <code>episode_id</code> to choose which episode to record.</p>\n"}], "owner": {"reputation": 79, "user_id": 9652452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd2775467f63a0cc4581307f1d852be0?s=128&d=identicon&r=PG", "display_name": "AKuro", "link": "https://stackoverflow.com/users/9652452/akuro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4973, "favorite_count": 0, "answer_count": 1, "score": 7, "last_activity_date": 1579535387, "creation_date": 1538608680, "last_edit_date": 1579535387, "question_id": 52636899, "link": "https://stackoverflow.com/questions/52636899/python-openai-gym-monitor-creates-json-files-in-the-recording-directory", "title": "python OpenAI gym monitor creates json files in the recording directory", "body": "<p>I am implementing value iteration on the gym <code>CartPole-v0</code> environment and would like to record the video of the agent's actions in a video file. I have been trying to implement this using the Monitor wrapper but it generates json files instead of a video file in the recording directory. This is my code:</p>\n\n<pre><code>env = gym.make('FrozenLake-v0')\nenv = gym.wrappers.Monitor(env, 'recording', force=True)\nenv.seed(0)\noptimalValue = valueIteration(env)\nst = time.time()\npolicy = cal_policy(optimalValue)\npolicy_score = evaluate_policy(env, policy)\net = time.time()\nenv.close()\nprint('Best score: %.2f  Time: %4.4f sec' % (policy_score, et-st))\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/tWCNm.png\" rel=\"nofollow noreferrer\">monitoring json files</a></p>\n\n<p>I have followed <a href=\"https://hub.packtpub.com/openai-gym-environments-wrappers-and-monitors-tutorial/\" rel=\"nofollow noreferrer\">this</a> tutorial but not sure what is wrong. I have Googled a lot but haven't come across anything that could be useful.</p>\n"}, {"tags": ["python", "arrays", "list", "numpy", "matrix"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6427322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9be8a060908db8be6a44c92dd87e1a2b?s=128&d=identicon&r=PG&f=1", "display_name": "epaikins", "link": "https://stackoverflow.com/users/6427322/epaikins"}, "edited": false, "score": 0, "creation_date": 1538610981, "post_id": 52636978, "comment_id": 92207326, "body": "thanks but I am getting this &quot;&lt;generator object &lt;genexpr&gt; at 0x7fe874754aa0&gt;&quot;"}, {"owner": {"reputation": 33, "user_id": 6427322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9be8a060908db8be6a44c92dd87e1a2b?s=128&d=identicon&r=PG&f=1", "display_name": "epaikins", "link": "https://stackoverflow.com/users/6427322/epaikins"}, "edited": false, "score": 0, "creation_date": 1538611204, "post_id": 52636978, "comment_id": 92207377, "body": "Figured it out, the last line of code should be &quot;res = any([np.array_equal(A, i) for i in L])&quot;"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 33, "user_id": 6427322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9be8a060908db8be6a44c92dd87e1a2b?s=128&d=identicon&r=PG&f=1", "display_name": "epaikins", "link": "https://stackoverflow.com/users/6427322/epaikins"}, "edited": false, "score": 1, "creation_date": 1538611251, "post_id": 52636978, "comment_id": 92207385, "body": "No, <code>res = any(np.array_equal(A, i) for i in L)</code> should work fine. Using a list comprehension isn&#39;t recommended as it requires building a <code>list</code> first, which isn&#39;t necessary for this task."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1587288669, "post_id": 52636978, "comment_id": 108447009, "body": "The bad <code>any</code> output observed by the questioner is a symptom of using <code>from numpy import *</code>, or something else that hides the built-in <code>any</code> with <code>numpy.any</code>. This is one of the primary examples of why not to use star imports."}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 2, "last_activity_date": 1538609254, "creation_date": 1538609254, "answer_id": 52636978, "question_id": 52636882, "link": "https://stackoverflow.com/questions/52636882/how-to-check-if-a-matrix-is-in-a-list-of-matrices-python/52636978#52636978", "title": "How to Check if a Matrix is in a List of Matrices Python", "body": "<p>I assume you are using NumPy. If this is the case, don't use <code>np.matrix</code>, use <code>np.array</code>. <code>np.matrix</code> exists almost exclusively for legacy reasons and has undesirable features.</p>\n\n<p>You can use <code>any</code> with a generator comprehension and <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.array_equal.html\" rel=\"nofollow noreferrer\"><code>np.array_equal</code></a>. This will short-circuit to <code>True</code> if the array is found in the input list, otherwise return <code>False</code>.</p>\n\n<pre><code>import numpy as np\n\nL = [np.array([[1, 0], [1, 0], [1, 0], [1, 0]]),\n     np.array([[0, 0, 0, 0], [1, 1, 1, 1]]),\n     np.array([[0, 1], [0, 1], [0, 1], [0, 1]]),\n     np.array([[0, 0, 0, 0], [1, 1, 1, 1]]),\n     np.array([[1, 1, 1, 1], [0, 0, 0, 0]])]\n\nA = np.array([[0, 0, 0, 1], [1, 1, 1, 0]])\n\nres = any(np.array_equal(A, i) for i in L)  # False\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6427322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9be8a060908db8be6a44c92dd87e1a2b?s=128&d=identicon&r=PG&f=1", "display_name": "epaikins", "link": "https://stackoverflow.com/users/6427322/epaikins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1616, "favorite_count": 0, "accepted_answer_id": 52636978, "answer_count": 1, "score": 3, "last_activity_date": 1587288464, "creation_date": 1538608510, "last_edit_date": 1587288464, "question_id": 52636882, "link": "https://stackoverflow.com/questions/52636882/how-to-check-if-a-matrix-is-in-a-list-of-matrices-python", "title": "How to Check if a Matrix is in a List of Matrices Python", "body": "<p>This is the list of matrices;</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>[matrix([[1, 0],\n         [1, 0],\n         [1, 0],\n         [1, 0]]),\n matrix([[0, 0, 0, 0],\n         [1, 1, 1, 1]]),\n matrix([[0, 1],\n         [0, 1],\n         [0, 1],\n         [0, 1]]),\n matrix([[0, 0, 0, 0],\n         [1, 1, 1, 1]]),\n matrix([[1, 1, 1, 1],\n         [0, 0, 0, 0]])]\n</code></pre>\n\n<p>and I want to check if a matrix is already inside the list example;</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>a = matrix([[0, 0, 0, 1],\n            [1, 1, 1, 0]])\n</code></pre>\n\n<p>So if a is in m then print True else print False</p>\n"}, {"tags": ["python", "syntax"], "comments": [{"owner": {"reputation": 9739, "user_id": 3691783, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/18bfba7d4beb1c210fa670cf57c66f4b?s=128&d=identicon&r=PG", "display_name": "Matt Messersmith", "link": "https://stackoverflow.com/users/3691783/matt-messersmith"}, "edited": false, "score": 0, "creation_date": 1538610791, "post_id": 52636872, "comment_id": 92207294, "body": "What do you mean by &quot;it doesn&#39;t work in the shell&quot;? Do you mean in the REPL, or in a shell script? It should work in both..."}, {"owner": {"reputation": 1, "user_id": 10453851, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KnnKtOUxyks/AAAAAAAAAAI/AAAAAAAAC6k/do6MaEA0u34/photo.jpg?sz=128", "display_name": "Humberto Cardoso", "link": "https://stackoverflow.com/users/10453851/humberto-cardoso"}, "reply_to_user": {"reputation": 9739, "user_id": 3691783, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/18bfba7d4beb1c210fa670cf57c66f4b?s=128&d=identicon&r=PG", "display_name": "Matt Messersmith", "link": "https://stackoverflow.com/users/3691783/matt-messersmith"}, "edited": false, "score": 0, "creation_date": 1538712082, "post_id": 52636872, "comment_id": 92246782, "body": "Shell script. Somehow it gives me errors. Tried it with VB and no errors either."}, {"owner": {"reputation": 9739, "user_id": 3691783, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/18bfba7d4beb1c210fa670cf57c66f4b?s=128&d=identicon&r=PG", "display_name": "Matt Messersmith", "link": "https://stackoverflow.com/users/3691783/matt-messersmith"}, "edited": false, "score": 0, "creation_date": 1538737389, "post_id": 52636872, "comment_id": 92258146, "body": "VB? Can you copy the full <code>SyntaxError</code> into the question exactly as it is output to your screen?"}], "owner": {"reputation": 1, "user_id": 10453851, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KnnKtOUxyks/AAAAAAAAAAI/AAAAAAAAC6k/do6MaEA0u34/photo.jpg?sz=128", "display_name": "Humberto Cardoso", "link": "https://stackoverflow.com/users/10453851/humberto-cardoso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1538659547, "creation_date": 1538608435, "last_edit_date": 1538659547, "question_id": 52636872, "link": "https://stackoverflow.com/questions/52636872/why-do-i-get-this-syntax-error-in-python-shell-but-no-pycharm-ide", "title": "Why do I get this Syntax error in Python Shell but no Pycharm IDE?", "body": "<p>Error when put into Python Shell 3.7 Windows 64bit.</p>\n\n<pre><code>def square(number):\n    square_of_number = (number * number)  \n    return square_of_number  \n\nuser_input = int(input(\"What number do you want to square?\"))\n\nresult = square(user_input)\n\nprint(\"That number squared is {}\".format(result))\n</code></pre>\n\n<blockquote>\n<pre><code>SyntaxError: invalid syntax at user_input line\n</code></pre>\n</blockquote>\n\n<p>When I run this in the <code>Pycharm</code> IDE the code works fine. Why does it not work in Python Shell?</p>\n"}, {"tags": ["python", "sql", "python-3.x", "sqlite"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1538620492, "post_id": 52636864, "comment_id": 92209188, "body": "I suspect using prepared statement placeholders instead of inserting arbitrary user-provided text directly into a query string will make a difference, as well as not opening you up to <a href=\"http://bobby-tables.com/\" rel=\"nofollow noreferrer\">sql injection</a>."}, {"owner": {"reputation": 49, "user_id": 6829104, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H95EOn1OK4U/AAAAAAAAAAI/AAAAAAAALnY/l3JzXKIR-HU/photo.jpg?sz=128", "display_name": "OddlySpecific", "link": "https://stackoverflow.com/users/6829104/oddlyspecific"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1538670014, "post_id": 52636864, "comment_id": 92234440, "body": "Hey Shawn, thanks for the input, I know that if I ever released this to other users I would need to parameterize my queries, but at present this is just a tool I am developing to replace an MS Access one I use currently.  No outside access.  Still, a good point.  I&#39;ll test it out and see if it alters the surprising behavior I&#39;ve been receiving."}], "owner": {"reputation": 49, "user_id": 6829104, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H95EOn1OK4U/AAAAAAAAAAI/AAAAAAAALnY/l3JzXKIR-HU/photo.jpg?sz=128", "display_name": "OddlySpecific", "link": "https://stackoverflow.com/users/6829104/oddlyspecific"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1538608821, "creation_date": 1538608364, "last_edit_date": 1538608821, "question_id": 52636864, "link": "https://stackoverflow.com/questions/52636864/data-comparison-tool-broken-by-date-input-request", "title": "Data comparison tool broken by date input request:", "body": "<p>I am working on a Python program using sqlite3 that compares the hours billed to the hours on site for different employees, the code follows: </p>\n\n<pre><code>from dbConnect import db_connect\n\n\ncon = db_connect()\ncur = con.cursor()\n\n\ndef hours_discrepancy():\n\n    emp_ids_dict = [4759, 4477, 4475, 1230, 4479]\n    continue_marker = \"yes\"\n    chosen_date = input(\"Date: \")\n\n    for i in emp_ids_dict:\n\n        choose_emp = i\n        # chosen_date = input(\"Date: \")\n\n        emp_check = cur.execute(f\"SELECT LastName, FirstName \"\n                                f\"FROM BrandHours \"\n                                f\"WHERE EmpID LIKE {choose_emp} AND Date LIKE {chosen_date}\")\n        emp_fetch = emp_check.fetchone()\n        employee_name = str(emp_fetch[0] + \", \" + emp_fetch[1])\n        print(employee_name)\n\n        reported = cur.execute(f\"SELECT Reported, Punched \"\n                               f\"FROM BrandHours \"\n                               f\"WHERE EmpID LIKE {choose_emp} AND Date LIKE {chosen_date}\")\n\n        hours_fetch = reported.fetchone()\n\n        reported_hours = hours_fetch[0]\n        punched_hours = hours_fetch[1]\n\n        print(reported_hours)\n        print(punched_hours)\n\n        discrepancy = reported_hours - punched_hours\n        print(f\"Discrepancy: {discrepancy}\")\n        print(\"=============================================================================\")\n\n\nhours_discrepancy()\n</code></pre>\n\n<p>I was having an issue in which only one employee would come up until, as you can see, I commented out the chosen_date input variable and moved in outside of the for loop.  Definitely it is better to have it outside of the loop, I see that now.  Still, the behavior with the date input inside of the loop was not what I expected.</p>\n\n<p>My question is, why did the program merely return one employee, rather than asking for input \"Date: \" at each iteration?</p>\n\n<p>EDIT: dbConnect is another script I have that this one calls to:</p>\n\n<pre><code>import os\nimport sqlite3\n\n\ndefault_path = os.path.join(os.path.dirname(__file__), 'db.sqlite3')\n\n\ndef db_connect(db_path=default_path):\n    con = sqlite3.connect(db_path)\n    return con\n</code></pre>\n"}, {"tags": ["python", "json", "parsing", "runtime-error"], "comments": [{"owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "edited": false, "score": 1, "creation_date": 1538608389, "post_id": 52636846, "comment_id": 92206788, "body": "You can&#39;t fix the source to produce valid JSON?"}, {"owner": {"reputation": 733, "user_id": 5308802, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/zJ0dc.jpg?s=128&g=1", "display_name": "AivanF.", "link": "https://stackoverflow.com/users/5308802/aivanf"}, "reply_to_user": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "edited": false, "score": 0, "creation_date": 1538608952, "post_id": 52636846, "comment_id": 92206933, "body": "@Kingsley this is for user input in an online console. When there are many records in JSON dictionaries and you remove last of them, you get a trailing comma and can easily forget it... So, it&#39;s better to automate such small things."}], "answers": [{"comments": [{"owner": {"reputation": 733, "user_id": 5308802, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/zJ0dc.jpg?s=128&g=1", "display_name": "AivanF.", "link": "https://stackoverflow.com/users/5308802/aivanf"}, "edited": false, "score": 0, "creation_date": 1538608493, "post_id": 52636861, "comment_id": 92206807, "body": "That&#39;s obvious :) But anyway there is a need of processing such wrong JSONs. To my mind, it should be a popular question with a simple solution."}, {"owner": {"reputation": 733, "user_id": 5308802, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/zJ0dc.jpg?s=128&g=1", "display_name": "AivanF.", "link": "https://stackoverflow.com/users/5308802/aivanf"}, "edited": false, "score": 0, "creation_date": 1538609077, "post_id": 52636861, "comment_id": 92206967, "body": "I have seen jsoncomment, as far as I know it uses regexes and corrupts strings with nested specific symbols. I mean, it will remove comma in value-string here: <code>&#39;{&quot;foo&quot;: &quot;,}&quot;}&#39;</code>"}], "tags": [], "owner": {"reputation": 161307, "user_id": 67606, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e2173a4eb840daea86793815e3b1a63a?s=128&d=identicon&r=PG", "display_name": "Pablo Santa Cruz", "link": "https://stackoverflow.com/users/67606/pablo-santa-cruz"}, "is_accepted": false, "score": 0, "last_activity_date": 1538608527, "last_edit_date": 1538608527, "creation_date": 1538608358, "answer_id": 52636861, "question_id": 52636846, "link": "https://stackoverflow.com/questions/52636846/python-cant-parse-json-with-extra-trailing-comma/52636861#52636861", "title": "Python can&#39;t parse JSON with extra trailing comma", "body": "<p>That's because an extra <code>,</code> is invalid according to <a href=\"http://www.json.org\" rel=\"nofollow noreferrer\"><strong>JSON</strong> standard</a>.</p>\n\n<blockquote>\n  <p>An object is an unordered set of name/value pairs. An object begins\n  with { (left brace) and ends with } (right brace). Each name is\n  followed by : (colon) and the name/value pairs are separated by ,\n  (comma).</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/bK8T8.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bK8T8.gif\" alt=\"enter image description here\"></a></p>\n\n<p>If you really need this, you could wrap python's json parser with <a href=\"https://pypi.org/project/jsoncomment/\" rel=\"nofollow noreferrer\">jsoncomment</a>. But I would try to fix JSON in the origin.</p>\n"}, {"comments": [{"owner": {"reputation": 733, "user_id": 5308802, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/zJ0dc.jpg?s=128&g=1", "display_name": "AivanF.", "link": "https://stackoverflow.com/users/5308802/aivanf"}, "edited": false, "score": 0, "creation_date": 1538609162, "post_id": 52636881, "comment_id": 92206988, "body": "Thank you! Indeed, I&#39;m looking for such a parser for a superset of JSON."}], "tags": [], "owner": {"reputation": 15262, "user_id": 2131286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/9f0db34a996e06c4e4cd149fec17688d?s=128&d=identicon&r=PG", "display_name": "Lazar Ljubenovi\u0107", "link": "https://stackoverflow.com/users/2131286/lazar-ljubenovi%c4%87"}, "is_accepted": false, "score": 4, "last_activity_date": 1538608497, "creation_date": 1538608497, "answer_id": 52636881, "question_id": 52636846, "link": "https://stackoverflow.com/questions/52636846/python-cant-parse-json-with-extra-trailing-comma/52636881#52636881", "title": "Python can&#39;t parse JSON with extra trailing comma", "body": "<p>JSON specification doesn't allow trailing comma. The parser is throwing since it encounters invalid syntax token. </p>\n\n<p>You might be interested in using a different parser for those files, eg. a parser built for <a href=\"https://json5.org\" rel=\"nofollow noreferrer\">JSON5 spec</a> which allows such syntax.</p>\n"}, {"comments": [{"owner": {"reputation": 733, "user_id": 5308802, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/zJ0dc.jpg?s=128&g=1", "display_name": "AivanF.", "link": "https://stackoverflow.com/users/5308802/aivanf"}, "edited": false, "score": 1, "creation_date": 1538608752, "post_id": 52636887, "comment_id": 92206873, "body": "That&#39;s true, but such preprocessing will corrupt strings with these symbols. Consider this example: <code>&#39;{&quot;foo&quot;: &quot;,}&quot;}&#39;</code>"}, {"owner": {"reputation": 3438, "user_id": 2205785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FY5zS.png?s=128&g=1", "display_name": "pbuck", "link": "https://stackoverflow.com/users/2205785/pbuck"}, "reply_to_user": {"reputation": 733, "user_id": 5308802, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/zJ0dc.jpg?s=128&g=1", "display_name": "AivanF.", "link": "https://stackoverflow.com/users/5308802/aivanf"}, "edited": false, "score": 0, "creation_date": 1538608948, "post_id": 52636887, "comment_id": 92206932, "body": "True, if that&#39;s an expected input."}, {"owner": {"reputation": 15262, "user_id": 2131286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/9f0db34a996e06c4e4cd149fec17688d?s=128&d=identicon&r=PG", "display_name": "Lazar Ljubenovi\u0107", "link": "https://stackoverflow.com/users/2131286/lazar-ljubenovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1538609027, "post_id": 52636887, "comment_id": 92206954, "body": "Exactly. Don&#39;t use regex to parse HTML, don&#39;t use regex to parse JSON. What you&#39;re looking for is an extension language of JSON, which is JSON5. Your files are written in JSON5, so just use a parser for it."}], "tags": [], "owner": {"reputation": 3438, "user_id": 2205785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FY5zS.png?s=128&g=1", "display_name": "pbuck", "link": "https://stackoverflow.com/users/2205785/pbuck"}, "is_accepted": false, "score": -1, "last_activity_date": 1538608533, "creation_date": 1538608533, "answer_id": 52636887, "question_id": 52636846, "link": "https://stackoverflow.com/questions/52636846/python-cant-parse-json-with-extra-trailing-comma/52636887#52636887", "title": "Python can&#39;t parse JSON with extra trailing comma", "body": "<p>I suspect it doesn't parse because \"it's not json\", but you could pre-process strings, using regular expression to replace <code>, }</code> with <code>}</code> and <code>, ]</code> with <code>]</code></p>\n"}, {"comments": [{"owner": {"reputation": 733, "user_id": 5308802, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/zJ0dc.jpg?s=128&g=1", "display_name": "AivanF.", "link": "https://stackoverflow.com/users/5308802/aivanf"}, "edited": false, "score": 2, "creation_date": 1538608784, "post_id": 52636904, "comment_id": 92206879, "body": "This will mostly work, but such preprocessing will corrupt strings with specific symbols. Consider this example: <code>&#39;{&quot;foo&quot;: &quot;,}&quot;}&#39;</code>"}, {"owner": {"reputation": 14624, "user_id": 5588279, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/31a5c0b08beca9ebc2c1d5e60ba691d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sraw", "link": "https://stackoverflow.com/users/5588279/sraw"}, "reply_to_user": {"reputation": 733, "user_id": 5308802, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/zJ0dc.jpg?s=128&g=1", "display_name": "AivanF.", "link": "https://stackoverflow.com/users/5308802/aivanf"}, "edited": false, "score": 0, "creation_date": 1538609243, "post_id": 52636904, "comment_id": 92207003, "body": "@AivanF. You are right. But basically you are facing invalid JSON. I think there won&#39;t be a perfect solution."}, {"owner": {"reputation": 733, "user_id": 5308802, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/zJ0dc.jpg?s=128&g=1", "display_name": "AivanF.", "link": "https://stackoverflow.com/users/5308802/aivanf"}, "edited": false, "score": 0, "creation_date": 1538609391, "post_id": 52636904, "comment_id": 92207035, "body": "I&#39;m sure it is :) JavaScript and Python parse trailing comma without any problems, so, it just depends on the parser. Lazar suggested using JSON5 parser, I think this is the best option."}, {"owner": {"reputation": 14624, "user_id": 5588279, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/31a5c0b08beca9ebc2c1d5e60ba691d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sraw", "link": "https://stackoverflow.com/users/5588279/sraw"}, "reply_to_user": {"reputation": 733, "user_id": 5308802, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/zJ0dc.jpg?s=128&g=1", "display_name": "AivanF.", "link": "https://stackoverflow.com/users/5308802/aivanf"}, "edited": false, "score": 0, "creation_date": 1538609554, "post_id": 52636904, "comment_id": 92207069, "body": "JSON5 is a superset which means the string generated from JSON5 may be incompatible with JSON. Anyway, it depends on your situation. If you just need to parse, I think it is OK."}], "tags": [], "owner": {"reputation": 14624, "user_id": 5588279, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/31a5c0b08beca9ebc2c1d5e60ba691d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sraw", "link": "https://stackoverflow.com/users/5588279/sraw"}, "is_accepted": false, "score": -1, "last_activity_date": 1538608699, "creation_date": 1538608699, "answer_id": 52636904, "question_id": 52636846, "link": "https://stackoverflow.com/questions/52636846/python-cant-parse-json-with-extra-trailing-comma/52636904#52636904", "title": "Python can&#39;t parse JSON with extra trailing comma", "body": "<p>How about use the following regex?</p>\n\n<pre><code>s = re.sub(r\",\\s*}\", \"}\", s)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15262, "user_id": 2131286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/9f0db34a996e06c4e4cd149fec17688d?s=128&d=identicon&r=PG", "display_name": "Lazar Ljubenovi\u0107", "link": "https://stackoverflow.com/users/2131286/lazar-ljubenovi%c4%87"}, "edited": false, "score": 2, "creation_date": 1538608957, "post_id": 52636919, "comment_id": 92206935, "body": "You shouldn&#39;t use regex to parse JSON. This &quot;solution&quot; could change data, eg. the JSON could contain a string <code>&quot;, }&quot;</code>."}], "tags": [], "owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "is_accepted": false, "score": 3, "last_activity_date": 1538609489, "last_edit_date": 1538609489, "creation_date": 1538608804, "answer_id": 52636919, "question_id": 52636846, "link": "https://stackoverflow.com/questions/52636846/python-cant-parse-json-with-extra-trailing-comma/52636919#52636919", "title": "Python can&#39;t parse JSON with extra trailing comma", "body": "<p>It could be that this data stream is <a href=\"https://json5.org/\" rel=\"nofollow noreferrer\">JSON5</a>, in which case there's a parser for that: <a href=\"https://pypi.org/project/json5/\" rel=\"nofollow noreferrer\">https://pypi.org/project/json5/</a></p>\n\n<p>This situation can be <em>alleviated</em> by a regex substitution that looks for <code>\", }</code>, and replaces it with <code>\" }</code>, allowing for any amount of whitespace between the quotes, comma and close-curly.</p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; s = '{ \"key1\": \"value1\", \"key2\": \"value2\", }'\n&gt;&gt;&gt; re.sub(r\"\\\"\\s*,\\s*\\}\", \"\\\" }\", s)\n'{ \"key1\": \"value1\", \"key2\": \"value2\" }'\n</code></pre>\n\n<p>Giving:</p>\n\n<pre><code>&gt;&gt;&gt; import json\n&gt;&gt;&gt; s2 = re.sub(r\"\\\"\\s*,\\s*\\}\", \"\\\" }\", s)\n&gt;&gt;&gt; json.loads(s2)\n{'key1': 'value1', 'key2': 'value2'}\n</code></pre>\n\n<p>EDIT: as commented, this is not a good practice unless you are confident your JSON data contains only simple words, and this change is not corrupting the data-stream further.  As I commented on the OP, the best course of action is to repair the up-stream data source.  But sometimes that's not possible.</p>\n"}, {"comments": [{"owner": {"reputation": 733, "user_id": 5308802, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/zJ0dc.jpg?s=128&g=1", "display_name": "AivanF.", "link": "https://stackoverflow.com/users/5308802/aivanf"}, "edited": false, "score": 0, "creation_date": 1598255992, "post_id": 63555547, "comment_id": 112387574, "body": "Wow, that&#39;s simple and amazing, thanks! I just donut that YAML is a superset of JSON. It should be also mentioned that YAML parsing is much slower, but it&#39;s appropriate for rare user input parsing."}, {"owner": {"reputation": 372, "user_id": 3577667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dfbcd0646085e25278702f6fc9db087?s=128&d=identicon&r=PG&f=1", "display_name": "exyi", "link": "https://stackoverflow.com/users/3577667/exyi"}, "edited": false, "score": 0, "creation_date": 1616175112, "post_id": 63555547, "comment_id": 117929532, "body": "Yaml is not without issues, though - I&#39;d better suggest you use the JSON5 library to avoid pitfalls like the Norway problem, whitespace hell, ..."}], "tags": [], "owner": {"reputation": 3016, "user_id": 412529, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bdfe52039a721cc72e5750772d155d80?s=128&d=identicon&r=PG", "display_name": "jnnnnn", "link": "https://stackoverflow.com/users/412529/jnnnnn"}, "is_accepted": true, "score": 2, "last_activity_date": 1598249252, "creation_date": 1598249252, "answer_id": 63555547, "question_id": 52636846, "link": "https://stackoverflow.com/questions/52636846/python-cant-parse-json-with-extra-trailing-comma/63555547#63555547", "title": "Python can&#39;t parse JSON with extra trailing comma", "body": "<p>Another option is to parse it as YAML; YAML accepts valid JSON but also accepts all sorts of variations.</p>\n<pre><code>import yaml\ns = '{ &quot;key1&quot;: &quot;value1&quot;, &quot;key2&quot;: &quot;value2&quot;, }'\nyaml.load(s)\n</code></pre>\n"}], "owner": {"reputation": 733, "user_id": 5308802, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/zJ0dc.jpg?s=128&g=1", "display_name": "AivanF.", "link": "https://stackoverflow.com/users/5308802/aivanf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2863, "favorite_count": 0, "accepted_answer_id": 63555547, "answer_count": 6, "score": 4, "last_activity_date": 1598249252, "creation_date": 1538608204, "question_id": 52636846, "link": "https://stackoverflow.com/questions/52636846/python-cant-parse-json-with-extra-trailing-comma", "title": "Python can&#39;t parse JSON with extra trailing comma", "body": "<p>This code:</p>\n\n<pre><code>import json\ns = '{ \"key1\": \"value1\", \"key2\": \"value2\", }'\njson.loads(s)\n</code></pre>\n\n<p>produces this error in Python 2:</p>\n\n<blockquote>\n  <p>ValueError: Expecting property name: line 1 column 16 (char 15)</p>\n</blockquote>\n\n<p>Similar result in Python 3:</p>\n\n<blockquote>\n  <p>json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 16 (char 15)</p>\n</blockquote>\n\n<p>If I remove that trailing comma (after <code>\"value2\"</code>), I get no error. But my code will process many different JSONs, so I can't do it manually. Is it possible to setup the parser to ignore such last commas?</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver"], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 9221783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bEvk5.jpg?s=128&g=1", "display_name": "sic_null", "link": "https://stackoverflow.com/users/9221783/sic-null"}, "edited": false, "score": 1, "creation_date": 1538613452, "post_id": 52637055, "comment_id": 92207790, "body": "Nice! This is perfect."}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 1, "creation_date": 1538619576, "post_id": 52637055, "comment_id": 92209006, "body": "Simple and efficient logic."}], "tags": [], "owner": {"reputation": 1633, "user_id": 8791722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98WuV.png?s=128&g=1", "display_name": "PixelEinstein", "link": "https://stackoverflow.com/users/8791722/pixeleinstein"}, "is_accepted": true, "score": 3, "last_activity_date": 1538612400, "last_edit_date": 1538612400, "creation_date": 1538610052, "answer_id": 52637055, "question_id": 52636826, "link": "https://stackoverflow.com/questions/52636826/selenium-rotating-tabs-in-python/52637055#52637055", "title": "Selenium - Rotating Tabs in Python", "body": "<p>I would use <code>driver.switch_to.window</code> for this task, example:</p>\n\n<pre><code>while True:\n    Windows = driver.window_handles\n    for window in Windows:\n        driver.switch_to.window(window)\n        time.sleep(30)\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 9221783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bEvk5.jpg?s=128&g=1", "display_name": "sic_null", "link": "https://stackoverflow.com/users/9221783/sic-null"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "accepted_answer_id": 52637055, "answer_count": 1, "score": 3, "last_activity_date": 1538612400, "creation_date": 1538608012, "question_id": 52636826, "link": "https://stackoverflow.com/questions/52636826/selenium-rotating-tabs-in-python", "title": "Selenium - Rotating Tabs in Python", "body": "<p>I have a python script set up to open 10 tabs, and load a web page on each. What I need to happen now is have it rotate between those tabs every 30 seconds. </p>\n\n<p>Basically, after it's all loaded I just need it to Ctrl+Tab every 30 seconds so it rotates and acts as a slide show. </p>\n\n<p>All tips? </p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.chrome.options import Options\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nusernameStr = 'username'\npasswordStr = 'password'\n\noptions = Options()\noptions.add_argument('--kiosk')\noptions.add_argument('disable-infobars')\ndriver = webdriver.Chrome(chrome_options=options, executable_path=r'C:\\Users\\username\\Desktop\\chromedriver.exe')\ndriver.get('http://website.com')\n# fill in username and hit the next button\nusername = driver.find_element_by_id('username')\nusername.send_keys(usernameStr)\npassword = WebDriverWait(driver, 10).until(\n    EC.presence_of_element_located((By.ID, 'password')))\npassword.send_keys(passwordStr)\nnextButton = driver.find_element_by_class_name('emp-submit')\nnextButton.click()\n\n#second tab\ndriver.execute_script(\"window.open('about:blank', 'tab2');\")\ndriver.switch_to.window(\"tab2\")\ndriver.get('http://website.com')\n\n#third tab\ndriver.execute_script(\"window.open('about:blank', 'tab3');\")\ndriver.switch_to.window(\"tab3\")\ndriver.get('http://website.com')\n\n#fourth tab\ndriver.execute_script(\"window.open('about:blank', 'tab4');\")\ndriver.switch_to.window(\"tab4\")\ndriver.get('http://website.com')\n</code></pre>\n"}, {"tags": ["python", "serial-port", "hex", "decimal", "ignition"], "comments": [{"owner": {"reputation": 1472, "user_id": 1687248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0uyCQ.png?s=128&g=1", "display_name": "tazer84", "link": "https://stackoverflow.com/users/1687248/tazer84"}, "edited": false, "score": 2, "creation_date": 1538610219, "post_id": 52636797, "comment_id": 92207188, "body": "Theres no method on the serial module for reading hex. Even readStringAsBytes will still return a byte string, which you would have to cast over to hex."}, {"owner": {"reputation": 343, "user_id": 8973609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/138cdbfefdc7718a3f70d415d416eee5?s=128&d=identicon&r=PG&f=1", "display_name": "konichiwa", "link": "https://stackoverflow.com/users/8973609/konichiwa"}, "reply_to_user": {"reputation": 1472, "user_id": 1687248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0uyCQ.png?s=128&g=1", "display_name": "tazer84", "link": "https://stackoverflow.com/users/1687248/tazer84"}, "edited": false, "score": 1, "creation_date": 1561961158, "post_id": 52636797, "comment_id": 100213470, "body": "Please convert your comment into an answer, so I can mark this as answered."}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 2491529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5def32dda9b9c0a1350fc49f8ced25f8?s=128&d=identicon&r=PG&f=1", "display_name": "mnz", "link": "https://stackoverflow.com/users/2491529/mnz"}, "is_accepted": false, "score": 0, "last_activity_date": 1570503422, "creation_date": 1570503422, "answer_id": 58279652, "question_id": 52636797, "link": "https://stackoverflow.com/questions/52636797/read-hex-or-decimal-from-serial-in-ignition/58279652#58279652", "title": "Read hex or decimal from serial in Ignition", "body": "<p>You can convert them easily to a decimal value.</p>\n\n<pre><code>def signed2unsigned(val):\n    if val &gt;= 0:\n        return val\n    else:\n        return 256+val\n</code></pre>\n"}], "owner": {"reputation": 343, "user_id": 8973609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/138cdbfefdc7718a3f70d415d416eee5?s=128&d=identicon&r=PG&f=1", "display_name": "konichiwa", "link": "https://stackoverflow.com/users/8973609/konichiwa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1570503422, "creation_date": 1538607726, "question_id": 52636797, "link": "https://stackoverflow.com/questions/52636797/read-hex-or-decimal-from-serial-in-ignition", "title": "Read hex or decimal from serial in Ignition", "body": "<p>I have a serial device that returns 23 hex values. I read the values using <code>system.serial.readBytes('COM1', 23)</code> in Ignition. This returns <code>array('b', [-85, 112, 1, 18, -79, 0, 1, 116, -41, 2, -17, 10, 28, 22, 0, 0, 0, 0, 0, 0, 0, 0, 0])</code>. I know the values here are decimal from signed 2's complement, but how can I get the decimal value? For example -85 should be 171, or 0xAB in hex. I would prefer to directly read the hex values, but I don\u2019t know how to do this. Any idea?</p>\n"}, {"tags": ["python", "json", "api", "python-requests", "jupyter"], "answers": [{"tags": [], "owner": {"reputation": 3737, "user_id": 7417402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0362a30046be9244cf62d2a9fc6f8568?s=128&d=identicon&r=PG", "display_name": "Devstr", "link": "https://stackoverflow.com/users/7417402/devstr"}, "is_accepted": true, "score": 3, "last_activity_date": 1538607874, "creation_date": 1538607874, "answer_id": 52636812, "question_id": 52636795, "link": "https://stackoverflow.com/questions/52636795/saving-multiple-requests-in-a-single-json/52636812#52636812", "title": "Saving multiple requests in a single JSON", "body": "<p>Store response on every iteration:</p>\n\n<pre><code>url_auth = 'https://api.ipgeolocation.io/ipgeo?apiKey=APIKEYAPIKEYAPIKEY='\nresponses = []\nfor i in np.arange(1,4): \n    response = requests.request(method='get',url=url_auth,params={'ips':ip_array[i]})\n    responses.append(response.json())\n</code></pre>\n\n<p><code>responses</code> list will contain all response objects.</p>\n"}], "owner": {"reputation": 35, "user_id": 10409055, "user_type": "registered", "profile_image": "https://graph.facebook.com/2455307751160886/picture?type=large", "display_name": "Seba Chamena", "link": "https://stackoverflow.com/users/10409055/seba-chamena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 583, "favorite_count": 0, "accepted_answer_id": 52636812, "answer_count": 1, "score": 2, "last_activity_date": 1538609505, "creation_date": 1538607710, "last_edit_date": 1538609505, "question_id": 52636795, "link": "https://stackoverflow.com/questions/52636795/saving-multiple-requests-in-a-single-json", "title": "Saving multiple requests in a single JSON", "body": "<p>My problem is the following: I've a list of Ips that I sorted in an nparray (ip_array), then I wanna do a multiple request with all of them and saving the outputs in a single json. (the APIKEY is really the api key in the code xD)</p>\n\n<pre><code>url_auth = 'https://api.ipgeolocation.io/ipgeo?apiKey=APIKEYAPIKEYAPIKEY='\nfor i in np.arange(1,4): \n    r[i] = requests.request(method='get',url=url_auth,params={'ips':ip_array[i]}) #i tested the single request and it works in this way.\n</code></pre>\n\n<p>But then, i got </p>\n\n<pre><code>TypeError: 'Response' object does not support item assignment\n</code></pre>\n\n<p>And then, i tried replacing the last line with </p>\n\n<pre><code> r = requests.request(method='get',url=url_auth,params={'ips':ip_array[i]})\n</code></pre>\n\n<p>But, when i do </p>\n\n<pre><code>r.json()\n</code></pre>\n\n<p>I only get the last request (that is obvious).</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1538608992, "post_id": 52636783, "comment_id": 92206945, "body": "Setting the figure size works fine for me. I would suggest you open a new notebook and produce a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> inside of it to make sure there are no interactions with previous code."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1538610177, "post_id": 52636783, "comment_id": 92207183, "body": "So when you try something like <code>figsize=(13,13)</code> instead, the result is the same?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10449636"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1538611015, "post_id": 52636783, "comment_id": 92207331, "body": "@ImportanceOfBeingErnest yes"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1538611271, "post_id": 52636783, "comment_id": 92207387, "body": "Maybe some brower cache problem, like it will always show the same figure, even if code changes?"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1538613018, "post_id": 52636783, "comment_id": 92207708, "body": "The rcParam to control figure size is <code>plt.rcParam[&quot;figure.figsize&quot;]</code> you may indeed print that to see what it&#39;s set to or change it and see what happens. However, it shouldn&#39;t matter, because the <code>figsize</code> inside <code>figure</code> would take precedence over the rcParam settings."}], "answers": [{"comments": [{"owner": {"reputation": 2069, "user_id": 4386239, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-5YBlGTMysp8/AAAAAAAAAAI/AAAAAAAAAHE/I0tBoel4xHE/photo.jpg?sz=128", "display_name": "Paul Gowder", "link": "https://stackoverflow.com/users/4386239/paul-gowder"}, "edited": false, "score": 0, "creation_date": 1549146801, "post_id": 52768025, "comment_id": 95801437, "body": "hmm... I had the same problem, and this fix doesn&#39;t work for me as of jupyter 4.4.0 on macos"}, {"owner": {"reputation": 2069, "user_id": 4386239, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-5YBlGTMysp8/AAAAAAAAAAI/AAAAAAAAAHE/I0tBoel4xHE/photo.jpg?sz=128", "display_name": "Paul Gowder", "link": "https://stackoverflow.com/users/4386239/paul-gowder"}, "edited": false, "score": 0, "creation_date": 1549147496, "post_id": 52768025, "comment_id": 95801544, "body": "failing example: <a href=\"https://nbviewer.jupyter.org/gist/paultopia/e0609e25ac113a49e65e7be95a9bbe45\" rel=\"nofollow noreferrer\">nbviewer.jupyter.org/gist/paultopia/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1, "user_id": 7877690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaf63fe7242efa5861b469599dbc9deb?s=128&d=identicon&r=PG&f=1", "display_name": "NF997", "link": "https://stackoverflow.com/users/7877690/nf997"}, "is_accepted": false, "score": 0, "last_activity_date": 1539287935, "creation_date": 1539287935, "answer_id": 52768025, "question_id": 52636783, "link": "https://stackoverflow.com/questions/52636783/figsize-does-not-work-for-matplotlib-3d-plot/52768025#52768025", "title": "figsize does not work for matplotlib 3d plot", "body": "<p>It appears to be a bug in Jupyter.\nAs a quick fix, you can use the notebook- instead of the inline-backend for matplotlib.\nTo do so, replace <code>%matplotlib inline</code> with <code>%matplotlib notebook</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2069, "user_id": 4386239, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-5YBlGTMysp8/AAAAAAAAAAI/AAAAAAAAAHE/I0tBoel4xHE/photo.jpg?sz=128", "display_name": "Paul Gowder", "link": "https://stackoverflow.com/users/4386239/paul-gowder"}, "is_accepted": false, "score": 2, "last_activity_date": 1549150227, "creation_date": 1549150227, "answer_id": 54498537, "question_id": 52636783, "link": "https://stackoverflow.com/questions/52636783/figsize-does-not-work-for-matplotlib-3d-plot/54498537#54498537", "title": "figsize does not work for matplotlib 3d plot", "body": "<p>As of notebook version 5.7.4, on MacOS 10.14.2 and Chrome 71.0.3578.98, this problem persists but can be fixed with <code>%matplotlib inline</code> setting by using the magic command </p>\n\n<p><code>%config InlineBackend.print_figure_kwargs = {'bbox_inches':None}</code> </p>\n\n<p>as given in the documentation <a href=\"https://ipython.readthedocs.io/en/stable/interactive/magics.html\" rel=\"nofollow noreferrer\">here</a>. </p>\n\n<p><a href=\"https://nbviewer.jupyter.org/gist/paultopia/54e614e4925361a94c3af79957d29efb\" rel=\"nofollow noreferrer\">Correctly funcitoning example</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11056727, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/038f2248526ee3391267e29ea55b40ca?s=128&d=identicon&r=PG", "display_name": "Mateusz Bawaj", "link": "https://stackoverflow.com/users/11056727/mateusz-bawaj"}, "is_accepted": false, "score": 0, "last_activity_date": 1550064545, "creation_date": 1550064545, "answer_id": 54671399, "question_id": 52636783, "link": "https://stackoverflow.com/questions/52636783/figsize-does-not-work-for-matplotlib-3d-plot/54671399#54671399", "title": "figsize does not work for matplotlib 3d plot", "body": "<p>Upgrading matplotlib from version 3.0.0 to 3.0.2 solved the problem. If you use pip type:</p>\n\n<pre><code>pip install --upgrade matplotlib\n</code></pre>\n\n<p>I verified the case with Jupyter version 4.4.0.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10449636"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1327, "favorite_count": 3, "answer_count": 3, "score": 1, "last_activity_date": 1550064545, "creation_date": 1538607560, "last_edit_date": 1538612317, "question_id": 52636783, "link": "https://stackoverflow.com/questions/52636783/figsize-does-not-work-for-matplotlib-3d-plot", "title": "figsize does not work for matplotlib 3d plot", "body": "<p>I plotted 2 figures, here is the screenshot</p>\n\n<p><a href=\"https://i.stack.imgur.com/eXnmn.png\" rel=\"nofollow noreferrer\">figsize</a></p>\n\n<p>the one (2D) on top is rendered as expected.\nthe one (3D) on bottom is not, the figure is so small!</p>\n\n<p>setting the value of <code>figsize</code> does not work.</p>\n\n<p>figsize=(3,3) and figsize=(13,13) give the same result!</p>\n\n<p><code>%matplotlib inline</code> rendered same way. </p>\n\n<p>I tried different browsers, clear the cache, dose not work either.</p>\n\n<p>I guess some rcParams control this, because this is reproducible only on my mac, but I don't have a clue to find it!</p>\n\n<p>any clue will be appreciated.</p>\n\n<p>whole coding:</p>\n\n<pre><code>%pylab inline\nfrom mpl_toolkits.mplot3d import Axes3D\nfig = plt.figure(figsize=(3,3))\nax = fig.gca(projection='3d')\nax.scatter(0.5, 0.5, 0.5, marker = '^')\n</code></pre>\n"}, {"tags": ["python", "pyinstaller", "py2exe"], "comments": [{"owner": {"reputation": 3737, "user_id": 7417402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0362a30046be9244cf62d2a9fc6f8568?s=128&d=identicon&r=PG", "display_name": "Devstr", "link": "https://stackoverflow.com/users/7417402/devstr"}, "edited": false, "score": 0, "creation_date": 1538611109, "post_id": 52636719, "comment_id": 92207356, "body": "so what were the issues? PyInstaller should work as it bundles Python inside the .exe file."}, {"owner": {"reputation": 63, "user_id": 10250212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f082823287f785f4711506b0161be1c3?s=128&d=identicon&r=PG&f=1", "display_name": "Edoardo Maschio", "link": "https://stackoverflow.com/users/10250212/edoardo-maschio"}, "reply_to_user": {"reputation": 3737, "user_id": 7417402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0362a30046be9244cf62d2a9fc6f8568?s=128&d=identicon&r=PG", "display_name": "Devstr", "link": "https://stackoverflow.com/users/7417402/devstr"}, "edited": false, "score": 0, "creation_date": 1538646596, "post_id": 52636719, "comment_id": 92219724, "body": "The command prompt would show up for just a second and then nothing else happened, the program didn&#39;t run"}, {"owner": {"reputation": 3737, "user_id": 7417402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0362a30046be9244cf62d2a9fc6f8568?s=128&d=identicon&r=PG", "display_name": "Devstr", "link": "https://stackoverflow.com/users/7417402/devstr"}, "edited": false, "score": 0, "creation_date": 1538648384, "post_id": 52636719, "comment_id": 92220698, "body": "what was the exception? there&#39;s really not enough information in your question to give any meaningful answer. Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}], "owner": {"reputation": 63, "user_id": 10250212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f082823287f785f4711506b0161be1c3?s=128&d=identicon&r=PG&f=1", "display_name": "Edoardo Maschio", "link": "https://stackoverflow.com/users/10250212/edoardo-maschio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1538607056, "creation_date": 1538607056, "question_id": 52636719, "link": "https://stackoverflow.com/questions/52636719/how-to-convert-py-file-to-exe-with-references-to-workplace-network-directories", "title": "How to convert .py file to .exe with references to workplace network directories", "body": "<p>How can I convert a python file that loads data from directories in my workplace network into an executable file that can be used on PCs that don't have python installed?</p>\n\n<p>It would be shared with colleagues who have access to those given directories.</p>\n\n<p>I tried converting it with pyinstaller but I had some issues running the .exe file as administrator.</p>\n\n<p>Thank you in advance</p>\n"}, {"tags": ["python", "numpy", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 46350, "user_id": 246616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb5db496ae1d5e7dbdcaa38f3c9b31b?s=128&d=identicon&r=PG", "display_name": "mVChr", "link": "https://stackoverflow.com/users/246616/mvchr"}, "is_accepted": false, "score": 0, "last_activity_date": 1538607271, "creation_date": 1538607271, "answer_id": 52636753, "question_id": 52636716, "link": "https://stackoverflow.com/questions/52636716/meaning-of-t-when-using-numpy-random-multivariate-normal/52636753#52636753", "title": "Meaning of .T when using numpy.random.multivariate_normal", "body": "<p><a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.T.html\" rel=\"nofollow noreferrer\">ndarray.T</a> is a transposition of the rows and columns.</p>\n"}, {"comments": [{"owner": {"reputation": 1912, "user_id": 4691830, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-lqbwtD6n1nc/AAAAAAAAAAI/AAAAAAAAABg/vE8KR-oSqqE/photo.jpg?sz=128", "display_name": "Joooeey", "link": "https://stackoverflow.com/users/4691830/joooeey"}, "edited": false, "score": 1, "creation_date": 1538609846, "post_id": 52636759, "comment_id": 92207126, "body": "&quot;if <code>n=2</code>, your code will work without the transpose&quot;. No, it won&#39;t. It won&#39;t throw an error but it will plot the wrong thing."}, {"owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "reply_to_user": {"reputation": 1912, "user_id": 4691830, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-lqbwtD6n1nc/AAAAAAAAAAI/AAAAAAAAABg/vE8KR-oSqqE/photo.jpg?sz=128", "display_name": "Joooeey", "link": "https://stackoverflow.com/users/4691830/joooeey"}, "edited": false, "score": 1, "creation_date": 1538609892, "post_id": 52636759, "comment_id": 92207140, "body": "True, good point. I meant it will work as in that array will be able to be unpacked into 2 variables. I&#39;ve made a note in my answer, thanks!"}], "tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": true, "score": 1, "last_activity_date": 1538609927, "last_edit_date": 1538609927, "creation_date": 1538607299, "answer_id": 52636759, "question_id": 52636716, "link": "https://stackoverflow.com/questions/52636716/meaning-of-t-when-using-numpy-random-multivariate-normal/52636759#52636759", "title": "Meaning of .T when using numpy.random.multivariate_normal", "body": "<p><code>.T</code> transposes a matrix. So in your case, if <code>n=2</code>, your code will work (or at least, will run without error) without the transpose, because a matrix such as:</p>\n\n<pre><code>&gt;&gt;&gt; np.random.multivariate_normal(mean, cov, size = 2)\narray([[ 1.4594626 , -0.55863612],\n       [-1.17139735, -0.36484634]])\n</code></pre>\n\n<p>Can be split into 2 arrays (<code>x</code> will be <code>[ 1.4594626 , -0.55863612]</code> and <code>y</code> will be <code>[-1.17139735, -0.36484634]</code>). Note that this is not necessarily what you are looking for, and you might end up plotting the wrong thing (depending what you're trying to do).</p>\n\n<p>But for anything bigger (or smaller), it won't:</p>\n\n<pre><code>&gt;&gt;&gt; np.random.multivariate_normal(mean, cov, size = 5)\narray([[-0.34091962,  2.2368088 ],\n       [-1.11081547,  0.93089064],\n       [ 1.45452483, -0.40007311],\n       [ 0.96038401,  0.26206106],\n       [ 0.3079481 ,  0.66869094]])\n</code></pre>\n\n<p>Because that is essentially 5 arrays that you are trying to unpack into 2 variables (hence the error). However when you transpose it:</p>\n\n<pre><code>&gt;&gt;&gt; np.random.multivariate_normal(mean, cov, size = 5).T\narray([[ 0.04466423,  0.88384196,  0.09108559, -2.30473587,  1.58497064],\n       [ 0.66190894,  0.90202853,  0.31090378,  0.95697681, -0.61557393]])\n</code></pre>\n\n<p>You're good to go. Your <code>x</code> array will be the first \"row\": <code>[ 0.04466423,  0.88384196,  0.09108559, -2.30473587,  1.58497064]</code> and <code>y</code> will be your second: <code>[ 0.66190894,  0.90202853,  0.31090378,  0.95697681, -0.61557393]</code></p>\n"}], "owner": {"reputation": 65, "user_id": 10410787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b16b731f6e502a10195187695d80d459?s=128&d=identicon&r=PG&f=1", "display_name": "big daddy", "link": "https://stackoverflow.com/users/10410787/big-daddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 787, "favorite_count": 0, "closed_date": 1538607383, "accepted_answer_id": 52636759, "answer_count": 2, "score": 0, "last_activity_date": 1538609927, "creation_date": 1538607031, "question_id": 52636716, "link": "https://stackoverflow.com/questions/52636716/meaning-of-t-when-using-numpy-random-multivariate-normal", "closed_reason": "Duplicate", "title": "Meaning of .T when using numpy.random.multivariate_normal", "body": "<p>So if I have this code which is basically the same as the demonstartion on the numpy reference page: </p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nmean = [0,0]\ncov = [[1,-0.5], [-0.5,1]]\n\nn = int(input(\"How many random points?\"))\n\nx, y = np.random.multivariate_normal(mean, cov, size = n).T\n\nplt.plot(x,y, 'x')\nplt.show()\n</code></pre>\n\n<p>I don't understand the meaning of the .T at the end of line 9, but without it the program gives the error </p>\n\n<pre><code>ValueError: too many values to unpack (expected 2)\n</code></pre>\n\n<p>Can someone explain this error and the meaning of the .T which fixes it</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "postgresql", "session", "sqlalchemy"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4589556, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GlO-psuVdDE/AAAAAAAAAAI/AAAAAAAAAGQ/_lTnwW6IEUw/photo.jpg?sz=128", "display_name": "Ryan Ward Kelley", "link": "https://stackoverflow.com/users/4589556/ryan-ward-kelley"}, "edited": false, "score": 0, "creation_date": 1538615586, "post_id": 52636907, "comment_id": 92208222, "body": "hmm.  I tried your suggestion and I still get the same behavior as above."}, {"owner": {"reputation": 1, "user_id": 10453730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e46552063850bf427498aa6722b12dc4?s=128&d=identicon&r=PG&f=1", "display_name": "mmurray", "link": "https://stackoverflow.com/users/10453730/mmurray"}, "reply_to_user": {"reputation": 11, "user_id": 4589556, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GlO-psuVdDE/AAAAAAAAAAI/AAAAAAAAAGQ/_lTnwW6IEUw/photo.jpg?sz=128", "display_name": "Ryan Ward Kelley", "link": "https://stackoverflow.com/users/4589556/ryan-ward-kelley"}, "edited": false, "score": 0, "creation_date": 1538629687, "post_id": 52636907, "comment_id": 92211187, "body": "Sorry, I&#39;m still getting the hang of psql. Did you try putting autoflush=False in the session_maker() argument under test_search_path?"}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1538644812, "post_id": 52636907, "comment_id": 92218597, "body": "I think you&#39;re mixing autoflush with something else. It controls when changes held in the session are flushed to the database."}, {"owner": {"reputation": 1, "user_id": 10453730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e46552063850bf427498aa6722b12dc4?s=128&d=identicon&r=PG&f=1", "display_name": "mmurray", "link": "https://stackoverflow.com/users/10453730/mmurray"}, "edited": false, "score": 0, "creation_date": 1538664607, "post_id": 52636907, "comment_id": 92231130, "body": "Thank you Ilja. After rechecking the documentation there is also a parameter called expire_on_commit that is automatically set to True unless otherwise specified. Perhaps it would be worth using that in the original sessionmaker() call rather than my misplaced suggestion of using autoflush?"}, {"owner": {"reputation": 11, "user_id": 4589556, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GlO-psuVdDE/AAAAAAAAAAI/AAAAAAAAAGQ/_lTnwW6IEUw/photo.jpg?sz=128", "display_name": "Ryan Ward Kelley", "link": "https://stackoverflow.com/users/4589556/ryan-ward-kelley"}, "edited": false, "score": 0, "creation_date": 1538686460, "post_id": 52636907, "comment_id": 92241352, "body": "Thank you for the comment @mmurray -- I just gave it a try and unfortunately it didn&#39;t change the behavior.  I&#39;m not entirely sure that the documentation addresses this particular issue.  I&#39;m a bit worried that what I&#39;ve observed is unexpected behavior -- I was hoping someone would know what the issue is (probably on my end)."}], "tags": [], "owner": {"reputation": 1, "user_id": 10453730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e46552063850bf427498aa6722b12dc4?s=128&d=identicon&r=PG&f=1", "display_name": "mmurray", "link": "https://stackoverflow.com/users/10453730/mmurray"}, "is_accepted": false, "score": 0, "last_activity_date": 1538664807, "last_edit_date": 1538664807, "creation_date": 1538608748, "answer_id": 52636907, "question_id": 52636708, "link": "https://stackoverflow.com/questions/52636708/sqlalchemy-on-postgresql-resets-search-path-in-session-after-calling-get-bind/52636907#52636907", "title": "sqlalchemy on postgresql resets search_path in session after calling get_bind() -- is this expected?", "body": "<p>According to the documentation it appears that the sessionmaker() initialization automatically 'flushes' sessions, so if you want to reference your session again later in the program you may want to try adding autoflush=False to the argument of sessionmaker() in line 6. \nThat is, try replacing line 6 with:</p>\n\n<pre><code>session_maker = sessionmaker(bind=engine,autoflush=False)\n</code></pre>\n\n<p>Hope this helps!</p>\n\n<p>I used the documentation on <a href=\"https://docs.sqlalchemy.org/en/latest/orm/session_api.html\" rel=\"nofollow noreferrer\">this</a> page, in particular referring to the first code chunk referring to global scope and the listing of arguments.</p>\n\n<p>EDIT: This approach did not work. As was noted in the comments, autoflush refers to something else. The same documentation page also shows expire_on_commit=True is auto-set unless otherwise specified, so my new answer is to replace the original code snippet I suggested with:</p>\n\n<pre><code>session_maker = sessionmaker(bind=engine,expire_on_commit=False)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4589556, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GlO-psuVdDE/AAAAAAAAAAI/AAAAAAAAAGQ/_lTnwW6IEUw/photo.jpg?sz=128", "display_name": "Ryan Ward Kelley", "link": "https://stackoverflow.com/users/4589556/ryan-ward-kelley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 738, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1538664807, "creation_date": 1538606964, "question_id": 52636708, "link": "https://stackoverflow.com/questions/52636708/sqlalchemy-on-postgresql-resets-search-path-in-session-after-calling-get-bind", "title": "sqlalchemy on postgresql resets search_path in session after calling get_bind() -- is this expected?", "body": "<p>Consider the following example:</p>\n\n<pre><code>import unittest\nfrom sqlalchemy import create_engine\nfrom sqlalchemy.orm import sessionmaker\n\nengine = create_engine('postgresql://user:password@host:5432/dbname')\nsession_maker = sessionmaker(bind=engine)\n\ndef print_search_path(label, session):\nprint(\"{} -- search path: {}\".format(label, session.execute('show search_path').fetchall()[0][0]))\n\nclass TestSearchPath(unittest.TestCase):\n\n    def create_schema(self):\n        sql = \"\"\"\\\n        create schema if not exists test_schema;\n\n        drop table if exists test_schema.foo;\n\n        create table test_schema.foo(\n            foo_id serial primary key \n          , name varchar unique\n        );\n\n        insert into test_schema.foo(name) values ('foo1');\n        insert into test_schema.foo(name) values ('foo2');\n        \"\"\"\n        print(sql)\n        engine.execute(sql)\n\n    def drop_schema(self):\n        sql = \"drop schema test_schema cascade;\"\n        print(sql)\n        engine.execute(sql)\n\n    def setUp(self):\n        self.create_schema()\n\n    def tearDown(self):\n        self.drop_schema()\n\n    def test_search_path(self):\n\n        session = session_maker()\n        try:\n            print_search_path('beginning', session)\n            session.execute('set search_path to test_schema')\n            print_search_path('after initialize path', session)\n\n            # execute a read\n            session.get_bind().execute(\"select * from test_schema.foo where name='foo2'\")\n            print_search_path('before commit', session)\n            session.commit()\n            print_search_path('after commit', session)\n        except:\n            session.rollback()\n            raise\n        finally:\n            session.close()\n</code></pre>\n\n<p>I get the following output:</p>\n\n<pre><code>beginning -- search path: \"$user\", public\nafter initialize path -- search path: test_schema\nbefore commit -- search path: test_schema\nafter commit -- search path: \"$user\", public\n</code></pre>\n\n<p>So this is surprising to me so maybe I have a misconception.  Naively, I would have expected the schema to remain <code>test_schema</code> for the entire program; however after the commit, it appears that the search path is reset to <code>public</code>.  </p>\n\n<p>My question is</p>\n\n<ol>\n<li>Is this expected behavior? </li>\n<li>If it is not, is there a way to ensure that session always has same search_path throughout it's lifetime?</li>\n</ol>\n\n<p>Thanks\nRyan</p>\n"}, {"tags": ["python", "pyinstaller"], "comments": [{"owner": {"reputation": 2404, "user_id": 5052566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/awLyM.png?s=128&g=1", "display_name": "Employee", "link": "https://stackoverflow.com/users/5052566/employee"}, "edited": false, "score": 0, "creation_date": 1538607374, "post_id": 52636686, "comment_id": 92206550, "body": "Could you use a subprocess to do the job?"}, {"owner": {"reputation": 658, "user_id": 4184843, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/euuGW.jpg?s=128&g=1", "display_name": "Canh", "link": "https://stackoverflow.com/users/4184843/canh"}, "edited": false, "score": 0, "creation_date": 1538607606, "post_id": 52636686, "comment_id": 92206611, "body": "You could call terminal commands in python script like <a href=\"https://stackoverflow.com/questions/89228/calling-an-external-command-in-python\">this</a>"}, {"owner": {"reputation": 896, "user_id": 3285836, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f1e2758357ea983b75eb3833ade10cdd?s=128&d=identicon&r=PG&f=1", "display_name": "Einar", "link": "https://stackoverflow.com/users/3285836/einar"}, "edited": false, "score": 0, "creation_date": 1538608246, "post_id": 52636686, "comment_id": 92206758, "body": "I&#39;m able to run the commands with subprocess. But I see now that for me to run the command, I have to be in a specific folder (the terminal has to be cd&#39;d into the folder). Are there any ways you know of to achieve that through subprocess?"}, {"owner": {"reputation": 896, "user_id": 3285836, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f1e2758357ea983b75eb3833ade10cdd?s=128&d=identicon&r=PG&f=1", "display_name": "Einar", "link": "https://stackoverflow.com/users/3285836/einar"}, "edited": false, "score": 0, "creation_date": 1538608567, "post_id": 52636686, "comment_id": 92206827, "body": "I figured it out. Thanks for the tip!"}], "answers": [{"tags": [], "owner": {"reputation": 896, "user_id": 3285836, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f1e2758357ea983b75eb3833ade10cdd?s=128&d=identicon&r=PG&f=1", "display_name": "Einar", "link": "https://stackoverflow.com/users/3285836/einar"}, "is_accepted": true, "score": 5, "last_activity_date": 1538608764, "creation_date": 1538608764, "answer_id": 52636912, "question_id": 52636686, "link": "https://stackoverflow.com/questions/52636686/how-to-use-pyinstaller-from-script-not-terminal/52636912#52636912", "title": "How to use PyInstaller from script, not terminal?", "body": "<p>Thanks to Employee and Canh! Working proof of concept:</p>\n\n<p><strong>Terminal:</strong> </p>\n\n<pre><code>&gt;python -m PyInstaller --noconsole --name WorkLogger ../WorkLogger/main.py\n</code></pre>\n\n<p><strong>Python script:</strong></p>\n\n<pre><code>subprocess.call(r\"python -m PyInstaller --noconsole --name WorkLogger F:\\KivyApps\\WorkLogger\\main.py\")\n</code></pre>\n\n<p>If needed, you can <strong>start the subprocess from a specific working directory</strong>:</p>\n\n<pre><code>subprocess.call(r\"python -m PyInstaller --noconsole --name WorkLogger F:\\KivyApps\\WorkLogger\\main.py\", cwd=r\"F:\\KivyApps\\WorkLogger_Dist\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 3612740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61bc7e17da0b81c18e32c523f406bdc3?s=128&d=identicon&r=PG&f=1", "display_name": "Berniiiii", "link": "https://stackoverflow.com/users/3612740/berniiiii"}, "is_accepted": false, "score": 4, "last_activity_date": 1538812811, "creation_date": 1538812811, "answer_id": 52676985, "question_id": 52636686, "link": "https://stackoverflow.com/questions/52636686/how-to-use-pyinstaller-from-script-not-terminal/52676985#52676985", "title": "How to use PyInstaller from script, not terminal?", "body": "<p>You can even access directly to PyInstaller's module using spec file if you want. In this example this with different locations of spec-file, dist-dir and build-dir.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import PyInstaller\n\n# my spec file in \"dev\\config\" dir\nworkdir = os.getcwd()\nfn_msi_spec = os.path.join(workdir, 'main_msi.spec')\n\n# define the \"dev\\dist\" and \"dev\\build\" dirs\nos.chdir(\"..\")\ndevdir = os.getcwd()\ndistdir = os.path.join(devdir, 'dist')\nbuilddir = os.path.join(devdir, 'build')\n\n# call pyinstaller directly\nPyInstaller.__main__.run(['--distpath', distdir, '--workpath', builddir, fn_msi_spec])\n</code></pre>\n\n\n\n\n"}, {"comments": [{"owner": {"reputation": 589, "user_id": 1873108, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b657b898a98b18d615bab71f45cba853?s=128&d=identicon&r=PG", "display_name": "Dariusz", "link": "https://stackoverflow.com/users/1873108/dariusz"}, "edited": false, "score": 0, "creation_date": 1610797729, "post_id": 65079242, "comment_id": 116248346, "body": "using this approach, how would command look like if I want to add extra search paths, binaries, etc etc? I know this is example from docs and docs dont expalin any complex commands so I&#39;m not sure what to do."}], "tags": [], "owner": {"reputation": 309, "user_id": 10534497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/138dc2c708ad6b58e3a12779cd578803?s=128&d=identicon&r=PG", "display_name": "coder", "link": "https://stackoverflow.com/users/10534497/coder"}, "is_accepted": false, "score": 1, "last_activity_date": 1606761349, "creation_date": 1606761349, "answer_id": 65079242, "question_id": 52636686, "link": "https://stackoverflow.com/questions/52636686/how-to-use-pyinstaller-from-script-not-terminal/65079242#65079242", "title": "How to use PyInstaller from script, not terminal?", "body": "<p>Berniiiii's answer was correct but not straight to the point and I personally found it a bit confusing.</p>\n<p>this is an answer from the official docs: <a href=\"https://pyinstaller.readthedocs.io/en/stable/usage.html#running-pyinstaller-from-python-code\" rel=\"nofollow noreferrer\">running-pyinstaller-from-python-code</a></p>\n<pre class=\"lang-py prettyprint-override\"><code>import PyInstaller.__main__\n\nPyInstaller.__main__.run([\n    'my_script.py',\n    '--onefile',\n    '--windowed'\n])\n</code></pre>\n<p>Is equivalent to:</p>\n<pre class=\"lang-py prettyprint-override\"><code>pyinstaller my_script.py --onefile --windowed\n</code></pre>\n"}], "owner": {"reputation": 896, "user_id": 3285836, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f1e2758357ea983b75eb3833ade10cdd?s=128&d=identicon&r=PG&f=1", "display_name": "Einar", "link": "https://stackoverflow.com/users/3285836/einar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3435, "favorite_count": 1, "accepted_answer_id": 52636912, "answer_count": 3, "score": 3, "last_activity_date": 1606761349, "creation_date": 1538606782, "last_edit_date": 1538608852, "question_id": 52636686, "link": "https://stackoverflow.com/questions/52636686/how-to-use-pyinstaller-from-script-not-terminal", "title": "How to use PyInstaller from script, not terminal?", "body": "<p><strong>Short version:</strong></p>\n\n<p>How do I use PyInstaller from within a Python script, instead of from the terminal?</p>\n\n<p>What would I need to write inside a Python script to get the equivalent of writing this in the terminal:</p>\n\n<pre><code>&gt;python -m PyInstaller --noconsole --name WorkLogger ../WorkLogger/main.py\n</code></pre>\n\n<hr>\n\n<p><strong>Long version:</strong></p>\n\n<p>I'm using a library that requires using PyInstaller to distribute an executable. But I have to run PyInstaller once, then change the spec files, then run the spec file through PyInstaller.</p>\n\n<p>So in the terminal I would've done this:</p>\n\n<pre><code>&gt;python -m PyInstaller --noconsole --name WorkLogger ../WorkLogger/main.py\n</code></pre>\n\n<p>After this is done running, I manually change the spec file. Then I run:</p>\n\n<pre><code>&gt;python -m PyInstaller WorkLogger.spec\n</code></pre>\n\n<p>I've written a script that does the manual labor for me, by running</p>\n\n<pre><code>&gt;change_spec.py\n</code></pre>\n\n<p>But I ultimately want to do all of this in one Python script. I want to be able to type something like this:</p>\n\n<pre><code>&gt;distribute_python_project.py ./Worklogger\n</code></pre>\n\n<p>This means my Python script would need to look something like this:</p>\n\n<pre><code>#Psuedocode:\n#python -m PyInstaller --noconsole --name WorkLogger ../WorkLogger/main.py\n#Code from change_spec.py\n#python -m PyInstaller WorkLogger.spec\n</code></pre>\n\n<p>But I can't figure out how I use PyInstaller from a python script, instead of from the terminal. Is this possible? (The library I use is Kivy, for those interested).</p>\n"}, {"tags": ["python", "python-2.7", "hive", "presto", "pyhive"], "answers": [{"tags": [], "owner": {"reputation": 521, "user_id": 8707287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/168bc6875b6b449e0b0d9a529d1fa7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Tina Iris", "link": "https://stackoverflow.com/users/8707287/tina-iris"}, "is_accepted": false, "score": 0, "last_activity_date": 1539358589, "last_edit_date": 1539358589, "creation_date": 1539357625, "answer_id": 52782577, "question_id": 52636685, "link": "https://stackoverflow.com/questions/52636685/creating-scratch-table-with-partition-by-date-range/52782577#52782577", "title": "Creating scratch table with partition by date range", "body": "<p>Have you tried replacing the \"with\" with an \"over\"?</p>\n\n<pre><code>create table scratch.myTable\n        as (\n        select \n            concat(eid,'_',group) as eid_group,\n            name,\n            test\n        from \n            test_logs \n        where \n            regexp_like(eid, '[A-Z0-9]{22}') and \n            (regexp_like(group, '[a-z0-9]{8}') OR group = '') and\n            line_type = 'test' and\n            date between '2018-09-27' and '2018-09-30' and\n            eid NOT IN ('123456789','ABCDEFF')\n        ) over(partition by date)\n</code></pre>\n"}], "owner": {"reputation": 811, "user_id": 462228, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0ad1456f72687cd7167baf726aaf05b0?s=128&d=identicon&r=PG", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/462228/santhosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1539358589, "creation_date": 1538606776, "question_id": 52636685, "link": "https://stackoverflow.com/questions/52636685/creating-scratch-table-with-partition-by-date-range", "title": "Creating scratch table with partition by date range", "body": "<p>I am trying to create a scratch table using the below query, I am trying to modify it to create table with partition by dates</p>\n\n<pre><code>create table scratch.myTable\n        as (\n        select \n            concat(eid,'_',group) as eid_group,\n            name,\n            test\n        from \n            test_logs \n        where \n            regexp_like(eid, '[A-Z0-9]{22}') and \n            (regexp_like(group, '[a-z0-9]{8}') OR group = '') and\n            line_type = 'test' and\n            date between '2018-09-27' and '2018-09-30' and\n            eid NOT IN ('123456789','ABCDEFF')\n        ) WITH (partitioned_by sequence('2018-09-27','2018-09-30'))\n</code></pre>\n\n<p>this query creates a scratch table on s3 and dumps everything as orc files. I am trying to <code>partition</code> this table by date range </p>\n\n<p>Could someone help me with the query?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1538606821, "post_id": 52636650, "comment_id": 92206424, "body": "The function <i>recurses</i>, calls itself again to handle a subset of the problem."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1538607572, "post_id": 52636650, "comment_id": 92206601, "body": "It&#39;s worth pointing out, if it isn&#39;t clear, that the input is a <code>tuple</code>. Parentheses are not obligatory."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9932378"}, "edited": false, "score": 0, "creation_date": 1538607614, "post_id": 52636746, "comment_id": 92206613, "body": "This makes more sense to me now! Thanks for your help!"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1538657440, "post_id": 52636746, "comment_id": 92226173, "body": "Glad to have been of help! Feel free to <a href=\"http://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">accept my answer</a> if you feel it was useful to you. :-)"}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": false, "score": 3, "last_activity_date": 1538657428, "last_edit_date": 1538657428, "creation_date": 1538607237, "answer_id": 52636746, "question_id": 52636650, "link": "https://stackoverflow.com/questions/52636650/i-do-not-understand-how-this-flatten-with-extend-and-append-works-for-python-3-6/52636746#52636746", "title": "I do not understand how this flatten with extend and append works for Python 3.6", "body": "<p>The function uses <a href=\"https://en.wikipedia.org/wiki/Recursion#In_computer_science\" rel=\"nofollow noreferrer\">recursion</a> to call itself again. The idea is that you break down a larger problem into smaller parts that you each solve independently, then combine the results to solve the larger problem.</p>\n\n<p>Here, <code>flatten()</code> will call itself again whenever a <em>contained</em> element in the current sequence is a list. These recursive calls continue until the smaller part no longer contains more lists.</p>\n\n<p>The thing to remember is that local names such as <code>newList</code> are local to <em>each function call</em>. Even if <code>flatten()</code> calls itself, each call results in a new, local <code>newList</code> value that is independent.</p>\n\n<p>For your input, a tuple:</p>\n\n<pre><code>['b', 'a', 'c', 2], [[[3]], 'dog', 4, 5]\n</code></pre>\n\n<p>the first element is a list too:</p>\n\n<pre><code>['b', 'a', 'c', 2]\n</code></pre>\n\n<p>so that's passed to a new <code>flatten()</code> call. There are no more lists in that sub-list, so all the function then does is append each item to the <code>newList</code> list and return that as the result. Upon returning the first <code>flatten()</code> function is resumed and the returned list is added to the local <code>newList</code> with an <code>extend()</code> call.</p>\n\n<p>All the while you look at how Pythontutor visualises this, you'll note that there are a lot of pointers to those lists within the original object:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0B9LQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0B9LQ.png\" alt=\"Pythontutor visualisation of adding &quot;b&quot; to the new list during recursion\"></a></p>\n\n<p>You can see that the first <code>flatten()</code> call references a tuple with two elements, and that the second <code>flatten()</code> call references the first element of that tuple, the contained list. Python values all live in a dedicated area of memory called the 'heap', and names and list elements are all just <em>labels</em>, references, nametags with strings attached to those objects, and you can have any number such labels. See <a href=\"https://nedbatchelder.com/text/names.html\" rel=\"nofollow noreferrer\">Ned Batchelder's excellent article on the subject</a>. Both <code>flatten()</code> functions have their own <code>newList</code> reference pointing to a list object, and the currently active <code>flatten()</code> function is busy copying the values from the <code>aList</code> reference it has to <code>newList</code>.</p>\n\n<p>So once the recursive call to <code>flatten()</code> returns control to the remaining, still active <code>flatten()</code> function. Once the local <code>newList</code> function has been extended with the returned values, the function then moves to the next element, <code>[[[3]], 'dog', 4, 5]</code>, which has a few more lists to process, first <code>[[3]]</code>, then <code>[3]</code> and then there are no more nested lists to process.</p>\n\n<p>If you write this all out with indentation for new calls, you get:</p>\n\n<ul>\n<li>-> <code>flatten((['b', 'a', 'c', 2], [[[3]], 'dog', 4, 5]))</code></li>\n<li><code>newList</code> is set to an empty list</li>\n<li><code>item</code> is set to <code>['b', 'a', 'c', 2]</code></li>\n<li><code>type(item)</code> is a list, so recurse\n\n<ul>\n<li>-> <code>flatten(['b', 'a', 'c', 2])</code></li>\n<li><code>newList</code> is set to an empty list</li>\n<li><code>item</code> is set to <code>'b'</code>, not a list, appended to <code>newList</code>, now <code>['b']</code></li>\n<li><code>item</code> is set to <code>'a'</code>, not a list, appended to <code>newList</code>, now <code>['b', 'a']</code></li>\n<li><code>item</code> is set to <code>'c'</code>, not a list, appended to <code>newList</code>, now <code>['b', 'a', 'c']</code></li>\n<li><code>item</code> is set to <code>2</code>, not a list, appended to <code>newList</code>, now <code>['b', 'a', 'c', 2]</code></li>\n<li>loop is done, return <code>newList</code></li>\n<li>&lt;- <code>['b', 'a', 'c', 2]</code></li>\n</ul></li>\n<li><code>newList</code> is extended with <code>['b', 'a', 'c', 2]</code>, so now <code>['b', 'a', 'c', 2]</code></li>\n<li><code>item</code> is set to <code>[[[3]], 'dog', 4, 5]</code></li>\n<li><code>type(item)</code> is a list, so recurse\n\n<ul>\n<li>-> <code>flatten([[[3]], 'dog', 4, 5])</code></li>\n<li><code>newList</code> is set to an empty list</li>\n<li><code>item</code> is set to <code>[[3]]</code></li>\n<li><code>type(item)</code> is a list, so recurse\n\n<ul>\n<li>-> <code>flatten([[3]])</code></li>\n<li><code>newList</code> is set to an empty list</li>\n<li><code>item</code> is set to <code>[3]</code></li>\n<li><code>type(item)</code> is a list, so recurse\n\n<ul>\n<li>-> <code>flatten([3])</code></li>\n<li><code>newList</code> is set to an empty list</li>\n<li><code>item</code> is set to <code>3</code></li>\n<li><code>type(item)</code> is a list, so recurse\n\n<ul>\n<li>-> <code>flatten([3])</code></li>\n<li><code>item</code> is set to <code>3</code>, not a list, appended to <code>newList</code>, now <code>[3]</code></li>\n<li>loop is done, return <code>newList</code></li>\n<li>&lt;- <code>[3]</code></li>\n</ul></li>\n<li><code>newList</code> is extended with <code>[3]</code>, so now <code>[3]</code></li>\n<li>loop is done, return <code>newList</code></li>\n<li>&lt;- <code>[3]</code></li>\n</ul></li>\n<li><code>newList</code> is extended with <code>[3]</code>, so now <code>[3]</code></li>\n<li>loop is done, return <code>newList</code></li>\n<li>&lt;- <code>[3]</code></li>\n</ul></li>\n<li><code>newList</code> is extended with <code>[3]</code>, so now <code>[3]</code></li>\n<li><code>item</code> is set to <code>'dog'</code>, not a list, appended to <code>newList</code>, now <code>[3, 'dog']</code></li>\n<li><code>item</code> is set to <code>4</code>, not a list, appended to <code>newList</code>, now <code>[3, 'dog', 4]</code></li>\n<li><code>item</code> is set to <code>5</code>, not a list, appended to <code>newList</code>, now <code>[3, 'dog', 4, 5]</code></li>\n<li>loop is done, return <code>newList</code></li>\n<li>&lt;- <code>[3, 'dog', 4, 5]</code></li>\n</ul></li>\n<li><code>newList</code> is extended with <code>[3, 'dog', 4, 5]</code>, so now <code>['b', 'a', 'c', 2, 3, 'dog', 4, 5]</code></li>\n<li>&lt;- <code>['b', 'a', 'c', 2, 3, 'dog', 4, 5]</code></li>\n</ul>\n\n<p>In the Pythontutor visualisation (the default visualisation that Pythontutor uses for Python code), the fact that you see <code>\"b\"</code> <em>twice</em> is actually an artifact of the simplification that Pythontutor uses. While lists and tuples are shown as separate objects with arrows showing how they are referenced, 'primitive' types such as strings and integers are shown inside the lists or directly inside variables in function frames.</p>\n\n<p>In reality, these objects too are separate, and they too live on the heap and are referenced. That <code>\"b\"</code> value exists as a single object, with multiple lists referencing it. You can pick a different visualisation, however:</p>\n\n<p><a href=\"https://i.stack.imgur.com/cXWMf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cXWMf.png\" alt=\"Pythontutor rendering options dropdown open, with the &quot;render all objects on the heap&quot; option selected\"></a></p>\n\n<p>With that option, the visualisation becomes a lot larger:</p>\n\n<p><a href=\"https://i.stack.imgur.com/k08Ei.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/k08Ei.png\" alt=\"visualisation of adding &quot;b&quot; to the new list during recursion, verbose version\"></a></p>\n\n<p>Here you can see that both <code>newList</code> in the active function frame and the original list object referenced from the input tuple reference a single <code>str</code> object with value <code>\"b\"</code>. But you can perhaps see that with this level of detail things are a bit too verbose to take in in one go.</p>\n"}, {"tags": [], "owner": {"reputation": 24329, "user_id": 5237560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CO92P.png?s=128&g=1", "display_name": "Alain T.", "link": "https://stackoverflow.com/users/5237560/alain-t"}, "is_accepted": false, "score": 0, "last_activity_date": 1560104498, "creation_date": 1560104498, "answer_id": 56517263, "question_id": 52636650, "link": "https://stackoverflow.com/questions/52636650/i-do-not-understand-how-this-flatten-with-extend-and-append-works-for-python-3-6/56517263#56517263", "title": "I do not understand how this flatten with extend and append works for Python 3.6", "body": "<p>Perhaps it would be easier to understand if it were written simpler:</p>\n\n<pre><code>aList = ['b','a','c',2],[[[3]],'dog',4,5]  \ndef flatten(value):\n    if not isinstance(value,(list,tuple)) : return [value]\n    return [ item for subItem in value for item in flatten(subItem) ]\n</code></pre>\n\n<p>If the <code>value</code> parameter is a list or tuple, each element is concatenated to form the flattened output (2nd line).  Because each of these elements could itself be a list or tuple, the function calls itself to flattent the item out before concatenating to the others.  The function will stop calling itself when its parameter is a scalar value (i.e. not a list or tuple).  In that case it will return the value itself as a single element list (1st line) because it cannot be further flattened and its caller (itself) expects a list.</p>\n\n<pre><code>flatten( aList ) : returns ['b']+['a']+['c']+[2]+[3]+['dog']+[4]+[5]\n\n   --&gt; flatten( ['b','a','c',2] ) : returns ['b']+['a']+['c']+[2]\n         --&gt; flatten('b') : returns ['b']     \n         --&gt; flatten('a') : returns ['a']     \n         --&gt; flatten('c') : returns ['c']     \n         --&gt; flatten(2)   : returns [2] \n\n   --&gt; flatten( [[[3]],'dog',4,5] ): returns [3]+['dog']+[4]+[5]\n         --&gt; flatten([[3]]) : returns [3]\n               --&gt; flatten([3]) : returns [3]\n                     --&gt; flatten(3) : returns [3]\n         --&gt; flatten('dog') : returns ['dog']\n         --&gt; flatten(4)     : returns [4]\n         --&gt; flatten(5)     : returns [5]\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9932378"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1560104498, "creation_date": 1538606572, "last_edit_date": 1538608372, "question_id": 52636650, "link": "https://stackoverflow.com/questions/52636650/i-do-not-understand-how-this-flatten-with-extend-and-append-works-for-python-3-6", "title": "I do not understand how this flatten with extend and append works for Python 3.6", "body": "<p>I put the code below in Pythontutor.com to see if I could understand how this works. However, despite reading up on flattening, extend, and append I am a little lost. My question is why does it evaluate 'b' twice? For example, it goes to extend then creates a newlist and then takes 'b' to the else and appends? I would appreciate any help that will make this more clear to me. </p>\n\n<pre><code>aList = ['b','a','c',2],[[[3]],'dog',4,5]  \ndef flatten(aList):\n    newList = [ ]\n    for item in aList:\n        if type(item) == type([]):\n            newList.extend(flatten(item))\n        else:\n            newList.append(item)\n    return newList\n\nprint(flatten(aList))\n</code></pre>\n"}, {"tags": ["python", "beautifulsoup", "lxml"], "answers": [{"comments": [{"owner": {"reputation": 598, "user_id": 4678883, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e558m.jpg?s=128&g=1", "display_name": "corporateWhore", "link": "https://stackoverflow.com/users/4678883/corporatewhore"}, "edited": false, "score": 0, "creation_date": 1538611389, "post_id": 52636757, "comment_id": 92207412, "body": "Can you point me to something that explains this? For instance: what is {:&lt;25} doing in the python3 example?"}, {"owner": {"reputation": 598, "user_id": 4678883, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e558m.jpg?s=128&g=1", "display_name": "corporateWhore", "link": "https://stackoverflow.com/users/4678883/corporatewhore"}, "edited": false, "score": 0, "creation_date": 1538615748, "post_id": 52636757, "comment_id": 92208263, "body": "Nvm, I figured it out. Thanks"}, {"owner": {"reputation": 3271, "user_id": 3393095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YXNaj.jpg?s=128&g=1", "display_name": "Rodrigo L&#243;pez", "link": "https://stackoverflow.com/users/3393095/rodrigo-l%c3%b3pez"}, "reply_to_user": {"reputation": 598, "user_id": 4678883, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e558m.jpg?s=128&g=1", "display_name": "corporateWhore", "link": "https://stackoverflow.com/users/4678883/corporatewhore"}, "edited": false, "score": 1, "creation_date": 1538660790, "post_id": 52636757, "comment_id": 92228462, "body": ":&lt;25 justify text left so its nice formatted as your requirements, remove it and you will se the difference"}], "tags": [], "owner": {"reputation": 3271, "user_id": 3393095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YXNaj.jpg?s=128&g=1", "display_name": "Rodrigo L&#243;pez", "link": "https://stackoverflow.com/users/3393095/rodrigo-l%c3%b3pez"}, "is_accepted": true, "score": 5, "last_activity_date": 1538607287, "creation_date": 1538607287, "answer_id": 52636757, "question_id": 52636648, "link": "https://stackoverflow.com/questions/52636648/get-text-between-span-with-beautifulsoup/52636757#52636757", "title": "get text between span with BeautifulSoup", "body": "<p>Replace your print command for: </p>\n\n<p>Python 3.6+:</p>\n\n<pre><code>print(f'{item.text:&lt;25} {item.next_sibling}') \n</code></pre>\n\n<p>Python 3 - 3.5:</p>\n\n<pre><code>print('{:&lt;25} {}'.format(item.text, item.next_sibling))\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>District:                  AnyState - At Large\nPolitical Highlights:      AnyTown City Council, 19XX-XX\nBorn:                      June X, 19XX; AnyTown, Calif.\nResidence:                 Some Town\nReligion:                  Episcopalian\nFamily:                    Wife, Some Name; two children\nEducation:                 Some State College, A.A. 19XX; Some Other State College, B.A. 19XX\nElected:                   19XX\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 194, "user_id": 6049869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0w8UJ.png?s=128&g=1", "display_name": "Twahanz", "link": "https://stackoverflow.com/users/6049869/twahanz"}, "is_accepted": false, "score": 0, "last_activity_date": 1553564332, "creation_date": 1553564332, "answer_id": 55348676, "question_id": 52636648, "link": "https://stackoverflow.com/questions/52636648/get-text-between-span-with-beautifulsoup/55348676#55348676", "title": "get text between span with BeautifulSoup", "body": "<p>Have you tried using <code>getText()</code> seems to always work for me.</p>\n"}], "owner": {"reputation": 598, "user_id": 4678883, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e558m.jpg?s=128&g=1", "display_name": "corporateWhore", "link": "https://stackoverflow.com/users/4678883/corporatewhore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 735, "favorite_count": 0, "accepted_answer_id": 52636757, "answer_count": 2, "score": 1, "last_activity_date": 1553564332, "creation_date": 1538606553, "question_id": 52636648, "link": "https://stackoverflow.com/questions/52636648/get-text-between-span-with-beautifulsoup", "title": "get text between span with BeautifulSoup", "body": "<p>I'm trying to scrape various sites using BeautifulSoup in Python.  Say I have the following <code>html</code> excerpt:</p>\n\n<pre><code>&lt;div class=\"member_biography\"&gt;\n&lt;h3&gt;Biography&lt;/h3&gt;\n&lt;span class=\"sub_heading\"&gt;District:&lt;/span&gt; AnyState - At Large&lt;br/&gt;\n&lt;span class=\"sub_heading\"&gt;Political Highlights:&lt;/span&gt; AnyTown City Council, 19XX-XX&lt;br/&gt;\n&lt;span class=\"sub_heading\"&gt;Born:&lt;/span&gt; June X, 19XX; AnyTown, Calif.&lt;br/&gt;\n&lt;span class=\"sub_heading\"&gt;Residence:&lt;/span&gt; Some Town&lt;br/&gt;\n&lt;span class=\"sub_heading\"&gt;Religion:&lt;/span&gt; Episcopalian&lt;br/&gt;\n&lt;span class=\"sub_heading\"&gt;Family:&lt;/span&gt; Wife, Some Name; two children&lt;br/&gt;\n&lt;span class=\"sub_heading\"&gt;Education:&lt;/span&gt; Some State College, A.A. 19XX; Some Other State College, B.A. 19XX&lt;br/&gt;\n&lt;span class=\"sub_heading\"&gt;Elected:&lt;/span&gt; 19XX&lt;br/&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I need the results to be in the following format:</p>\n\n<pre><code>District:              AnyState - At Large\nPolitical Highlights:  AnyTown City Council, 19XX-XX\nBorn:                  June X, 19XX; AnyTown, Calif.\nResidence:             Some Town\nReligion:              Episcopalian\nFamily:                Wife, Some Name; two children\nEducation:             Some State College, A.A. 19XX; Some Other State College, B.A. 19XX\nElected:               19XX\n</code></pre>\n\n<p>But, so far, I've only been able to achieve the following:</p>\n\n<pre><code>District:\nPolitical Highlights:\nBorn:\nResidence:\nReligion:\nFamily:\nEducation:\nElected:\n</code></pre>\n\n<p>Using the following code:</p>\n\n<pre><code>import urllib.request\nimport sys\nfrom bs4 import BeautifulSoup\n\ndef main(url):\n    fp = urllib.request.urlopen(url)\n    site_bytearray = fp.read()\n    fp.close()\n\n    #bs_data = BeautifulSoup(site_str,features=\"html.parser\")\n    bs_data = BeautifulSoup(site_bytearray,'lxml')\n    tmplist = bs_data.find_all('span',{'class':'sub_heading'})\n    for item in tmplist:\n        print(item.text)\n    sys.exit(0)\n\nif __name__ == \"__main__\":\n    main(sys.argv[1])\n</code></pre>\n\n<p>In short, how do I extract <code>District</code> and <code>AnyState - At Large</code> from <code>&lt;span class=\"sub_heading\"&gt;District:&lt;/span&gt; AnyState - At Large&lt;br/&gt;</code> and accumulate the results in a list for further processing?</p>\n"}, {"tags": ["python", "django", "shopify", "shopify-app"], "comments": [{"owner": {"reputation": 2373, "user_id": 1640213, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/272d198a0c7701101af9298f67b2aa77?s=128&d=identicon&r=PG", "display_name": "Karim N Gorjux", "link": "https://stackoverflow.com/users/1640213/karim-n-gorjux"}, "edited": false, "score": 0, "creation_date": 1538608604, "post_id": 52636643, "comment_id": 92206838, "body": "Can you add the settings related to the session?"}], "answers": [{"tags": [], "owner": {"reputation": 594, "user_id": 4763016, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/22188044980475f778bab6c8424c62a5?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Melouah", "link": "https://stackoverflow.com/users/4763016/simon-melouah"}, "is_accepted": true, "score": 3, "last_activity_date": 1539121288, "creation_date": 1539121288, "answer_id": 52729731, "question_id": 52636643, "link": "https://stackoverflow.com/questions/52636643/django-iframe-sessionkey-being-created-every-request/52729731#52729731", "title": "Django iframe: sessionkey being created every request", "body": "<p>The version of Django being used was 2.1 which now includes a new feature which helps prevent CSRF attacks. According to the <a href=\"https://docs.djangoproject.com/en/2.1/ref/settings/#session-cookie-samesite\" rel=\"nofollow noreferrer\">docs</a> the new SESSION_COOKIE_SAMESITE defaults to a value of 'Lax' which is a middle ground between 'Strict' and None.</p>\n\n<p>This feature obviously works well for standalone Django apps but causes them to break when in an iframe similar to Shopify. Setting SESSION_COOKIE_SAMESITE = None in settings.py resolved the issue.</p>\n"}, {"tags": [], "owner": {"reputation": 165, "user_id": 7118663, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wg5le.png?s=128&g=1", "display_name": "Benny Chan", "link": "https://stackoverflow.com/users/7118663/benny-chan"}, "is_accepted": false, "score": 0, "last_activity_date": 1618479482, "last_edit_date": 1618479482, "creation_date": 1618479110, "answer_id": 67105873, "question_id": 52636643, "link": "https://stackoverflow.com/questions/52636643/django-iframe-sessionkey-being-created-every-request/67105873#67105873", "title": "Django iframe: sessionkey being created every request", "body": "<p>Your approach is not working anymore. Google is going to ban 3rd party cookies soon while firefox &amp; Safari already did that. New apps are required to implement <a href=\"https://shopify.dev/concepts/apps/building-embedded-apps-using-session-tokens\" rel=\"nofollow noreferrer\">session token authentication</a> since third-party cookies are not going to work soon.</p>\n<p>New apps submitted for app reviews will be tested under Chrome incognito tab, which doesn't allow third-party cookies by default. Even you add 'Samesite', session id is not going to pass through cookies. When it can't pass through, the browser will retry again so you see multiple sessions created. At first, I thought it was server-side error since it looked like infinite loops from the logs.</p>\n<p>Django by default creates a cookie storing sessionid when you call request.session in view functions. This cookie is only created when you use request.session. If you don't use request.session, the app can load without problems. But it's almost impossible to not use session at all. Even the sample shopify django app is using session.</p>\n<p>I think the possible way is to change the session middleware. With <a href=\"https://github.com/Shopify/shopify_django_app/issues/53\" rel=\"nofollow noreferrer\">the reply from Shopify developer</a>, I know that we can use the shop (dest) and user (sub) fields from the payload to create a unique id and store your session data based on that id. Just customize the <a href=\"https://github.com/django/django/blob/main/django/contrib/sessions/middleware.py\" rel=\"nofollow noreferrer\">default session middleware</a>, remove request.cookies and use this id as the session key. It should be ok.</p>\n<p>Personally, I didn't change this middleware since the workload is too huge. After finishing session token auth, I found out that sessions can't persist during tester doing app review. If you can implement <a href=\"https://shopify.dev/tools/app-bridge/getting-started\" rel=\"nofollow noreferrer\">App Bridge</a>, session token auth and update the default django session, you can persist session data.</p>\n<p>IMO, standalone apps may be a better choice for Python / Django developers. If anyone has an easier way, please let me know. I feel desperate to study all of these without any concrete examples.</p>\n"}], "owner": {"reputation": 594, "user_id": 4763016, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/22188044980475f778bab6c8424c62a5?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Melouah", "link": "https://stackoverflow.com/users/4763016/simon-melouah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 0, "accepted_answer_id": 52729731, "answer_count": 2, "score": 2, "last_activity_date": 1618479482, "creation_date": 1538606515, "question_id": 52636643, "link": "https://stackoverflow.com/questions/52636643/django-iframe-sessionkey-being-created-every-request", "title": "Django iframe: sessionkey being created every request", "body": "<p>I have a shopify app built in Django that was working fine up until recently. The sessions are not persisting across each request and as a result an exception is being raised because the session for that given key that was set in the previous request does not exist. \nTrying the app endpoints outside of Shopify works fine, the sessions persist perfectly between requests so it definitely is an issue within Shopify.</p>\n\n<p>Looking at the sessions table in our database we see multiple sessionkeys with the same data, this indicates another session is being created per request. How do we persist sessions across requests in an iframe?</p>\n"}, {"tags": ["python", "read-write"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10039288"}, "edited": false, "score": 2, "creation_date": 1538606043, "post_id": 52636566, "comment_id": 92206254, "body": "This question is quite broad. Can you please provide some code so we can see what you&#39;re working with. Also please provide context as to what you have, what you&#39;ve tried, and what you&#39;d like to see."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1538606656, "post_id": 52636566, "comment_id": 92206376, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation, as suggested when you created this account.  <a href=\"http://stackoverflow.com/help/on-topic\">On topic</a>, <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask</a>, and <a href=\"https://codeblog.jonskeet.uk/2010/08/29/writing-the-perfect-question/\" rel=\"nofollow noreferrer\">... the perfect question</a> apply here."}, {"owner": {"reputation": 11, "user_id": 10453757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e23310a29a19f51f8f4162e8c3d50a?s=128&d=identicon&r=PG&f=1", "display_name": "Shrini", "link": "https://stackoverflow.com/users/10453757/shrini"}, "edited": false, "score": 0, "creation_date": 1538607389, "post_id": 52636566, "comment_id": 92206554, "body": "Thanks for all the suggestions. I am a new user and will try best to adhere to the rules of the forum!"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10453757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e23310a29a19f51f8f4162e8c3d50a?s=128&d=identicon&r=PG&f=1", "display_name": "Shrini", "link": "https://stackoverflow.com/users/10453757/shrini"}, "edited": false, "score": 0, "creation_date": 1538607308, "post_id": 52636653, "comment_id": 92206531, "body": "Thanks a lot for quick response. I was actually using a small function to get the time the image was taken and using the time difference (last time the folder was opened and storing the last file) to check if it is &gt;= 0 to proceed with the file or not. I haven&#39;t checked if it works :-), but was hoping if there was another solution."}], "tags": [], "owner": {"reputation": 36, "user_id": 8773515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b16a401d26b946b8a90b5bf3315f3aed?s=128&d=identicon&r=PG&f=1", "display_name": "Rushin Naik", "link": "https://stackoverflow.com/users/8773515/rushin-naik"}, "is_accepted": false, "score": 0, "last_activity_date": 1538606577, "creation_date": 1538606577, "answer_id": 52636653, "question_id": 52636566, "link": "https://stackoverflow.com/questions/52636566/read-file-from-folder-which-is-being-written-python/52636653#52636653", "title": "Read file from folder which is being written python", "body": "<p>If you are reading the folder when the 5 files have been added. It may keep a log of those five files only. Any new files added will not be reflected. I think a good solution would be to main a set() of files being added to directory. While processing the files from the set, if the last file comes, you can check the directory again for any new files and add them to that set. Keeping this in a loop until your preferred condition is not met. </p>\n\n<p>I hope it helps. Thanks.</p>\n"}], "owner": {"reputation": 11, "user_id": 10453757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e23310a29a19f51f8f4162e8c3d50a?s=128&d=identicon&r=PG&f=1", "display_name": "Shrini", "link": "https://stackoverflow.com/users/10453757/shrini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "closed_date": 1538640790, "answer_count": 1, "score": -2, "last_activity_date": 1538607209, "creation_date": 1538605939, "last_edit_date": 1538607209, "question_id": 52636566, "link": "https://stackoverflow.com/questions/52636566/read-file-from-folder-which-is-being-written-python", "closed_reason": "Duplicate", "title": "Read file from folder which is being written python", "body": "<p>I have a folder which is being written continuously with files (from a Raspberry Pi). I want to run a Python code which will read files (and process them) from the same folder. I start the Python code after say 5 files have been written into the folder. But then the code stops after it has processed 5 files. Any suggestions as to how to \"stream\" the files from this dynamically updated folder into my Python code? </p>\n\n<p>Thanks</p>\n\n<p>I am using the following code and was wondering if there is another solution:</p>\n\n<pre><code>import os\nimport time\nimport numpy as np\nfrom PIL import Image\nimport datetime\n\n# get the data &amp; time of an image output is str with format '%Y:%m:%d \n%H:%M:%S'\ndef get_date_taken(path):\n    return Image.open(path)._getexif()[36867]\n\n# get the difference in time between two images in seconds\ndef getTimeDiffBetwImages(path1,path2):\n    a1 = get_date_taken(path1)\n    a2 = get_date_taken(path2)\n    b1 = datetime.datetime.strptime(a1,'%Y:%m:%d %H:%M:%S')\n    b2 = datetime.datetime.strptime(a2,'%Y:%m:%d %H:%M:%S')\n    return (b1-b2).total_seconds()\n\ndef getDiffImgs(img1,img2):\n    a = img1.shape\n    diff = np.zeros((a[0],a[1],a[2]),dtype = \"uint8\")\n    for i in range(0,a[0]):\n        for j in range(0,a[1]):\n            for k in range(0,a[2]):        \n                diff[i,j,k] = abs(int(img2[i,j,k]) - int(img1[i,j,k]))\n    return diff\n\nfolder = \"D:/work\"\nfile_num = 0\nimg_prev = []\nlast_file = None\nwhile True:\n    for f in os.listdir(folder):\n        path1 = os.path.join(folder,f) \n        if not(last_file == None):\n            path2 = os.path.join(folder,last_file) \n            time_diff = getTimeDiffBetwImages(path1,path2)\n        else:\n            time_diff = 0\n        if  time_diff &gt;= 0:\n            print(f)    \n            im = cv2.imread(os.path.join(folder,f))\n            img_curr = np.copy(im)\n            fname = \"Diff_\" + f\n            if file_num &gt; 0:\n                diff = getDiffImgs(img_prev,img_curr)\n                cv2.imwrite(fname,diff)\n            img_prev = np.copy(img_curr)\n            file_num += 1\n            time.sleep(10) # additional processing but just delay out here\n            last_file = f\n</code></pre>\n"}, {"tags": ["python", "google-cloud-platform", "google-cloud-functions", "google-cloud-pubsub"], "answers": [{"comments": [{"owner": {"reputation": 299, "user_id": 7571462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jtetb.jpg?s=128&g=1", "display_name": "Han M", "link": "https://stackoverflow.com/users/7571462/han-m"}, "edited": false, "score": 0, "creation_date": 1538667456, "post_id": 52636721, "comment_id": 92233046, "body": "Hi Dustin, thanks! I tried google-cloud-pubsub==0.28.0, but got another error ModuleNotFoundError: No module named &#39;google.api.core&#39;"}, {"owner": {"reputation": 15554, "user_id": 328036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db101b3a812b0464c53e5409c12ea94?s=128&d=identicon&r=PG", "display_name": "Dustin Ingram", "link": "https://stackoverflow.com/users/328036/dustin-ingram"}, "reply_to_user": {"reputation": 299, "user_id": 7571462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jtetb.jpg?s=128&g=1", "display_name": "Han M", "link": "https://stackoverflow.com/users/7571462/han-m"}, "edited": false, "score": 0, "creation_date": 1538680741, "post_id": 52636721, "comment_id": 92238833, "body": "Looks like there was a bugfix in 0.28.1 that solves that. Is there a reason why you need to pin to these old versions though? The latest is <code>google-cloud-pubsub==0.38.0</code>"}], "tags": [], "owner": {"reputation": 15554, "user_id": 328036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db101b3a812b0464c53e5409c12ea94?s=128&d=identicon&r=PG", "display_name": "Dustin Ingram", "link": "https://stackoverflow.com/users/328036/dustin-ingram"}, "is_accepted": false, "score": 3, "last_activity_date": 1538680698, "last_edit_date": 1538680698, "creation_date": 1538607072, "answer_id": 52636721, "question_id": 52636483, "link": "https://stackoverflow.com/questions/52636483/importerror-cannot-import-name-pubsub-v1-from-google-cloud-unknown-locatio/52636721#52636721", "title": "ImportError: cannot import name &#39;pubsub_v1&#39; from &#39;google.cloud&#39; (unknown location)", "body": "<p>You're using <a href=\"https://pypi.org/project/google-cloud-pubsub/0.26.0/\" rel=\"nofollow noreferrer\">a pretty old version of <code>google-cloud-pubsub</code></a>. You'll only be able to do:</p>\n\n<pre><code>from google.cloud import pubsub_v1\n</code></pre>\n\n<p>with <code>google-cloud-pubsub&gt;=0.28.1</code>.</p>\n\n<p>Also, it might worth mentioning that you probably don't need to list all the sub-dependencies (like <code>gapic-google-cloud-pubsub-v1</code>) in your <code>requirements.txt</code> -- when you deploy your function, Google Cloud Functions will resolve all these for you just by specifying <code>google-cloud-pubsub</code>.</p>\n"}], "owner": {"reputation": 299, "user_id": 7571462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jtetb.jpg?s=128&g=1", "display_name": "Han M", "link": "https://stackoverflow.com/users/7571462/han-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3244, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1538680698, "creation_date": 1538605219, "last_edit_date": 1538605296, "question_id": 52636483, "link": "https://stackoverflow.com/questions/52636483/importerror-cannot-import-name-pubsub-v1-from-google-cloud-unknown-locatio", "title": "ImportError: cannot import name &#39;pubsub_v1&#39; from &#39;google.cloud&#39; (unknown location)", "body": "<p>I am trying to import the pubsub_v1 in a cloud function. But when I tried to deploy it on GCP, the problem as in the title coming out. The requirements.txt file is in the same directory as the main.py file. Here is what in the requirements.txt:</p>\n\n<pre><code>google-api-core==1.3.0\ngoogle-auth==1.5.1\ngoogle-cloud-core==0.28.1\ngoogle-cloud-storage==1.10.0\ngoogle-resumable-media==0.3.1\ngoogleapis-common-protos==1.5.3\ngoogle-api-python-client==1.7.4\noauth2client==4.1.2\ngoogle-cloud-bigquery==1.5.0\ngoogle-cloud-logging==1.7.0\ngoogle-cloud-pubsub==0.26.0\nproto-google-cloud-pubsub-v1==0.15.4\ngapic-google-cloud-pubsub-v1==0.15.4\ngrpc-google-iam-v1==0.11.4\n</code></pre>\n\n<p>I used the following command to deploy the cloud function:</p>\n\n<pre><code>gcloud functions deploy some_function --runtime python37 --trigger-resource bucket --trigger-event google.storage.object.finalize --memory 2048 --timeout 500\n</code></pre>\n"}, {"tags": ["python", "parsing", "flask"], "comments": [{"owner": {"reputation": 3737, "user_id": 7417402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0362a30046be9244cf62d2a9fc6f8568?s=128&d=identicon&r=PG", "display_name": "Devstr", "link": "https://stackoverflow.com/users/7417402/devstr"}, "edited": false, "score": 0, "creation_date": 1538606222, "post_id": 52636452, "comment_id": 92206296, "body": "why are you using <code>flask_restful.reqparse</code> for parsing command line arguments? There are dedicated libraries like <a href=\"https://docs.python.org/3/library/argparse.html\" rel=\"nofollow noreferrer\"><code>argparse</code></a> for that."}, {"owner": {"reputation": 2793, "user_id": 1277639, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5ca10d9e7cad2a931d29debd5763b9ba?s=128&d=identicon&r=PG", "display_name": "Manish", "link": "https://stackoverflow.com/users/1277639/manish"}, "reply_to_user": {"reputation": 3737, "user_id": 7417402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0362a30046be9244cf62d2a9fc6f8568?s=128&d=identicon&r=PG", "display_name": "Devstr", "link": "https://stackoverflow.com/users/7417402/devstr"}, "edited": false, "score": 0, "creation_date": 1538607864, "post_id": 52636452, "comment_id": 92206674, "body": "thansk for your advise. I changed my question but still same pbm even if i use flask_restful.reqparse."}, {"owner": {"reputation": 3737, "user_id": 7417402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0362a30046be9244cf62d2a9fc6f8568?s=128&d=identicon&r=PG", "display_name": "Devstr", "link": "https://stackoverflow.com/users/7417402/devstr"}, "edited": false, "score": 0, "creation_date": 1538608231, "post_id": 52636452, "comment_id": 92206755, "body": "what are you trying to achieve?"}, {"owner": {"reputation": 2793, "user_id": 1277639, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5ca10d9e7cad2a931d29debd5763b9ba?s=128&d=identicon&r=PG", "display_name": "Manish", "link": "https://stackoverflow.com/users/1277639/manish"}, "reply_to_user": {"reputation": 3737, "user_id": 7417402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0362a30046be9244cf62d2a9fc6f8568?s=128&d=identicon&r=PG", "display_name": "Devstr", "link": "https://stackoverflow.com/users/7417402/devstr"}, "edited": false, "score": 0, "creation_date": 1538610134, "post_id": 52636452, "comment_id": 92207175, "body": "i am reading text(urlencoded) from command line and trying to process them and passing output to webservice."}, {"owner": {"reputation": 3737, "user_id": 7417402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0362a30046be9244cf62d2a9fc6f8568?s=128&d=identicon&r=PG", "display_name": "Devstr", "link": "https://stackoverflow.com/users/7417402/devstr"}, "edited": false, "score": 0, "creation_date": 1538610445, "post_id": 52636452, "comment_id": 92207229, "body": "why do you need to use <code>flask_restful.reqparse</code> in the first place? The whole thing is deprecated: <a href=\"https://flask-restful.readthedocs.io/en/0.3.6/reqparse.html\" rel=\"nofollow noreferrer\">flask-restful.readthedocs.io/en/0.3.6/reqparse.html</a>"}, {"owner": {"reputation": 3737, "user_id": 7417402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0362a30046be9244cf62d2a9fc6f8568?s=128&d=identicon&r=PG", "display_name": "Devstr", "link": "https://stackoverflow.com/users/7417402/devstr"}, "edited": false, "score": 0, "creation_date": 1538610488, "post_id": 52636452, "comment_id": 92207240, "body": "Why not just use <code>sys.argv</code> directly?"}, {"owner": {"reputation": 2793, "user_id": 1277639, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5ca10d9e7cad2a931d29debd5763b9ba?s=128&d=identicon&r=PG", "display_name": "Manish", "link": "https://stackoverflow.com/users/1277639/manish"}, "reply_to_user": {"reputation": 3737, "user_id": 7417402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0362a30046be9244cf62d2a9fc6f8568?s=128&d=identicon&r=PG", "display_name": "Devstr", "link": "https://stackoverflow.com/users/7417402/devstr"}, "edited": false, "score": 0, "creation_date": 1538611116, "post_id": 52636452, "comment_id": 92207358, "body": "i cannot use sys.argv as i start my webservice at one pplace where i don&#39;t pass any parameter while i pass parameter when i use curl. Can you pls advise some alternate as i am new bie in python."}, {"owner": {"reputation": 3737, "user_id": 7417402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0362a30046be9244cf62d2a9fc6f8568?s=128&d=identicon&r=PG", "display_name": "Devstr", "link": "https://stackoverflow.com/users/7417402/devstr"}, "edited": false, "score": 0, "creation_date": 1538611492, "post_id": 52636452, "comment_id": 92207431, "body": "could you please edit the question to include all the code that you have and exact commands that you are trying to run? so far it&#39;s totally unclear what you doing and what is the purpose of your code."}, {"owner": {"reputation": 2793, "user_id": 1277639, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5ca10d9e7cad2a931d29debd5763b9ba?s=128&d=identicon&r=PG", "display_name": "Manish", "link": "https://stackoverflow.com/users/1277639/manish"}, "reply_to_user": {"reputation": 3737, "user_id": 7417402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0362a30046be9244cf62d2a9fc6f8568?s=128&d=identicon&r=PG", "display_name": "Devstr", "link": "https://stackoverflow.com/users/7417402/devstr"}, "edited": false, "score": 0, "creation_date": 1538612581, "post_id": 52636452, "comment_id": 92207633, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/181257/discussion-between-manish-and-devstr\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 2793, "user_id": 1277639, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5ca10d9e7cad2a931d29debd5763b9ba?s=128&d=identicon&r=PG", "display_name": "Manish", "link": "https://stackoverflow.com/users/1277639/manish"}, "edited": false, "score": 0, "creation_date": 1538614238, "post_id": 52637426, "comment_id": 92207942, "body": "But request and httpie start from web but i want to pass my input on commnd line only."}, {"owner": {"reputation": 3737, "user_id": 7417402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0362a30046be9244cf62d2a9fc6f8568?s=128&d=identicon&r=PG", "display_name": "Devstr", "link": "https://stackoverflow.com/users/7417402/devstr"}, "reply_to_user": {"reputation": 2793, "user_id": 1277639, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5ca10d9e7cad2a931d29debd5763b9ba?s=128&d=identicon&r=PG", "display_name": "Manish", "link": "https://stackoverflow.com/users/1277639/manish"}, "edited": false, "score": 0, "creation_date": 1538614350, "post_id": 52637426, "comment_id": 92207964, "body": "<code>httpie</code> installs a command line tool which can be used to send http requests from the command line."}], "tags": [], "owner": {"reputation": 3737, "user_id": 7417402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0362a30046be9244cf62d2a9fc6f8568?s=128&d=identicon&r=PG", "display_name": "Devstr", "link": "https://stackoverflow.com/users/7417402/devstr"}, "is_accepted": true, "score": 1, "last_activity_date": 1538613612, "creation_date": 1538613612, "answer_id": 52637426, "question_id": 52636452, "link": "https://stackoverflow.com/questions/52636452/how-to-read-multi-url-encoded-text-by-reqparse-parser-in-python/52637426#52637426", "title": "How to read multi url-encoded text by reqparse.parser in python", "body": "<p>You can't use spaces in form parameters (which you pass with <code>-d</code> in curl). </p>\n\n<p>I suggest you urlencode your parameters before passing them to curl or use some other http client that does that for you. \ne.g. <a href=\"http://docs.python-requests.org/en/master/\" rel=\"nofollow noreferrer\">requests</a> or <a href=\"https://httpie.org/\" rel=\"nofollow noreferrer\">httpie</a></p>\n"}], "owner": {"reputation": 2793, "user_id": 1277639, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5ca10d9e7cad2a931d29debd5763b9ba?s=128&d=identicon&r=PG", "display_name": "Manish", "link": "https://stackoverflow.com/users/1277639/manish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 52637426, "answer_count": 1, "score": -2, "last_activity_date": 1538613612, "creation_date": 1538605090, "last_edit_date": 1538612575, "question_id": 52636452, "link": "https://stackoverflow.com/questions/52636452/how-to-read-multi-url-encoded-text-by-reqparse-parser-in-python", "title": "How to read multi url-encoded text by reqparse.parser in python", "body": "<p>I am using python (flask) for reading input from command line using following code but when i pass url-encoded strings(multi arguments seperated with space) as input it gets merged to single sting with space as '+'.   </p>\n\n<p>Sample.py</p>\n\n<pre><code>from flask_restful import reqparse\nparser = reqparse.RequestParser()\nparser.add_argument('output')\nargs = parser.parse_args()\nindata=args['output']\nprint(urllib.parse.quote_plus(indata))\n</code></pre>\n\n<p>run:</p>\n\n<pre><code>python sample.py \ncurl http://localhost:5000/mypage -d \"output=ld%22+to+the+term old+%7B%0A++++pub\" -X POST -v\n</code></pre>\n\n<p>output: </p>\n\n<pre><code> ld%22+to+the+term+old+%7B%0A++++pubin\n</code></pre>\n\n<p>while i expect output to be</p>\n\n<pre><code>   ld%22+to+the+term  old+%7B%0A++++pubin  (so that they can be spitted easily with separator)\n</code></pre>\n\n<p>How can i avoid such thing?</p>\n"}, {"tags": ["python", "command-line", "pytest"], "comments": [{"owner": {"reputation": 3737, "user_id": 7417402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0362a30046be9244cf62d2a9fc6f8568?s=128&d=identicon&r=PG", "display_name": "Devstr", "link": "https://stackoverflow.com/users/7417402/devstr"}, "edited": false, "score": 0, "creation_date": 1538606551, "post_id": 52636409, "comment_id": 92206359, "body": "not clear what you are asking and there&#39;s no <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 7542156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c62914c9f143a886ca6a043c9d94685d?s=128&d=identicon&r=PG&f=1", "display_name": "Namratha", "link": "https://stackoverflow.com/users/7542156/namratha"}, "edited": false, "score": 0, "creation_date": 1538607492, "post_id": 52636628, "comment_id": 92206581, "body": "This definitely works. But the position of the argument seems to be hardcoded. And if I enter a few extra options while running the code, it&#39;ll fail. For instance if I give my command as pytest -s -r file_name.py --testcase_id=&quot;test1A, test1B&quot;, it wouldnt work. Is there a way to get the argument values based on the argument name? As in, I want to check if &quot;--testcase_id&quot; is in the argument list. If yes, I want to get &quot;test1A, test1B&quot;"}, {"owner": {"reputation": 31, "user_id": 7542156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c62914c9f143a886ca6a043c9d94685d?s=128&d=identicon&r=PG&f=1", "display_name": "Namratha", "link": "https://stackoverflow.com/users/7542156/namratha"}, "edited": false, "score": 0, "creation_date": 1538608677, "post_id": 52636628, "comment_id": 92206854, "body": "also, I was looking at using pytest libraries and fixtures. the ArgumentParser python library doesnt seem to work for my case"}, {"owner": {"reputation": 3271, "user_id": 3393095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YXNaj.jpg?s=128&g=1", "display_name": "Rodrigo L&#243;pez", "link": "https://stackoverflow.com/users/3393095/rodrigo-l%c3%b3pez"}, "reply_to_user": {"reputation": 31, "user_id": 7542156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c62914c9f143a886ca6a043c9d94685d?s=128&d=identicon&r=PG&f=1", "display_name": "Namratha", "link": "https://stackoverflow.com/users/7542156/namratha"}, "edited": false, "score": 0, "creation_date": 1538608919, "post_id": 52636628, "comment_id": 92206919, "body": "this helps you? <a href=\"https://stackoverflow.com/questions/40880259/how-to-pass-arguments-in-pytest-by-command-line\" title=\"how to pass arguments in pytest by command line\">stackoverflow.com/questions/40880259/&hellip;</a>"}], "tags": [], "owner": {"reputation": 3271, "user_id": 3393095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YXNaj.jpg?s=128&g=1", "display_name": "Rodrigo L&#243;pez", "link": "https://stackoverflow.com/users/3393095/rodrigo-l%c3%b3pez"}, "is_accepted": false, "score": 1, "last_activity_date": 1538608328, "last_edit_date": 1538608328, "creation_date": 1538606425, "answer_id": 52636628, "question_id": 52636409, "link": "https://stackoverflow.com/questions/52636409/pytest-how-to-access-command-line-arguments-from-outside-a-test-method/52636628#52636628", "title": "Pytest: How to access command line arguments from outside a test method", "body": "<p>if your function is located on a file called file_name.py, that would be something like this:</p>\n\n<pre><code>import argparse\n\ndef read_test_data(testcase_id):\n    print(testcase_id)\n\nif __name__ == \"__main__\":\n    parser = argparse.ArgumentParser()\n    parser.add_argument(\"-t\", \"--testcase_id\", help=\"test case id helper documentation\")\n    args = parser.parse_args()\n    read_test_data(args.testcase_id)\n</code></pre>\n\n<p>if you make a call from command line like:</p>\n\n<pre><code>python file_name.py --testcase_id \"test1A, test1B\"\n</code></pre>\n\n<p>You will get as output:</p>\n\n<pre><code>test1A, test1B\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7542156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c62914c9f143a886ca6a043c9d94685d?s=128&d=identicon&r=PG&f=1", "display_name": "Namratha", "link": "https://stackoverflow.com/users/7542156/namratha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1538726570, "creation_date": 1538604796, "question_id": 52636409, "link": "https://stackoverflow.com/questions/52636409/pytest-how-to-access-command-line-arguments-from-outside-a-test-method", "title": "Pytest: How to access command line arguments from outside a test method", "body": "<p>I have a NON-TEST method defined in a python module. (Say- read_test_data()), which has to consume the test_ID's passed through the command line. I have another test-method, defined in a class, which calls read_test_data() and gets the values from there. \nNow, how can I get the values from command line arguments, into the non-test method?</p>\n"}, {"tags": ["python", "list", "loops", "max", "min"], "comments": [{"owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1538604842, "post_id": 52636401, "comment_id": 92205925, "body": "You should definitely be putting these into a class. It will make your life much easier."}, {"owner": {"reputation": 1125, "user_id": 9127165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c587412f6474fb6e90ff67a8541a0223?s=128&d=identicon&r=PG&f=1", "display_name": "Sachihiro", "link": "https://stackoverflow.com/users/9127165/sachihiro"}, "reply_to_user": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1538604996, "post_id": 52636401, "comment_id": 92205956, "body": "This is for learning purpose and it we are not allowed to use classes, nor import statistics nor zip"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1538605037, "post_id": 52636401, "comment_id": 92205968, "body": "You can find the minimum wage with <code>min(brand[1] for brand in brands)</code>, but due to your choice of data structure, there&#39;s no similarly easy way to also find the corresponding company name."}, {"owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1538605136, "post_id": 52636401, "comment_id": 92205996, "body": "@JohnGordon That is very false. <code>min(brands, key=lambda x:int(x[1]))[0]</code>"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "reply_to_user": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1538605248, "post_id": 52636401, "comment_id": 92206027, "body": "@mypetlion Very nice!"}], "answers": [{"tags": [], "owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "is_accepted": false, "score": 0, "last_activity_date": 1538605186, "creation_date": 1538605186, "answer_id": 52636471, "question_id": 52636401, "link": "https://stackoverflow.com/questions/52636401/how-can-i-compare-and-print-an-element-from-a-2d-list-in-python/52636471#52636471", "title": "How can i compare and print an element from a 2D list in python?", "body": "<pre><code>company = None\nminwage = None\n\nfor brand in brands:\n    if minwage is None or brand[1] &lt; minwage:\n        minwage = brand[1]\n        company = brand[0]\n\nprint 'Lowest wage was: %s,%s' % (minwage, company)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1125, "user_id": 9127165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c587412f6474fb6e90ff67a8541a0223?s=128&d=identicon&r=PG&f=1", "display_name": "Sachihiro", "link": "https://stackoverflow.com/users/9127165/sachihiro"}, "edited": false, "score": 0, "creation_date": 1538606187, "post_id": 52636482, "comment_id": 92206286, "body": "What does <code>key=lambda and x:int(x[1])</code> do, if you can explain?"}, {"owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "reply_to_user": {"reputation": 1125, "user_id": 9127165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c587412f6474fb6e90ff67a8541a0223?s=128&d=identicon&r=PG&f=1", "display_name": "Sachihiro", "link": "https://stackoverflow.com/users/9127165/sachihiro"}, "edited": false, "score": 0, "creation_date": 1538606231, "post_id": 52636482, "comment_id": 92206298, "body": "It says: sort the lists by the value of <code>x[1]</code>, cast as an integer. <code>x</code> is an anonymous variable (you can read about <a href=\"https://stackoverflow.com/q/16501/6671176\">lambda functions here</a>)"}], "tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": false, "score": 3, "last_activity_date": 1538605215, "creation_date": 1538605215, "answer_id": 52636482, "question_id": 52636401, "link": "https://stackoverflow.com/questions/52636401/how-can-i-compare-and-print-an-element-from-a-2d-list-in-python/52636482#52636482", "title": "How can i compare and print an element from a 2D list in python?", "body": "<p>I would sort your list, then take the first and last element. You can put it in an <code>f-string</code> for printing (if using python 3.6 or above):</p>\n\n<pre><code>sorted_brands = sorted(brands, key=lambda x: int(x[1]))\n\nprint(f'the lowest wage: {sorted_brands[0][0]}, {sorted_brands[0][1]}, the highest wage: {sorted_brands[-1][0]}, {sorted_brands[-1][1]}')\n#'the lowest wage: Google, 110, the highest wage: Apple, 150'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1125, "user_id": 9127165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c587412f6474fb6e90ff67a8541a0223?s=128&d=identicon&r=PG&f=1", "display_name": "Sachihiro", "link": "https://stackoverflow.com/users/9127165/sachihiro"}, "edited": false, "score": 1, "creation_date": 1538606809, "post_id": 52636623, "comment_id": 92206419, "body": "This works too, this was my initial idea to collect the values in a new list and then print the lowest value with min() method but did not know how, because i am in early beginning in coding. Thanks"}], "tags": [], "owner": {"reputation": 63, "user_id": 7770696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2253a110a7e6b7eed231c763b071878?s=128&d=identicon&r=PG&f=1", "display_name": "nikhilbisht21", "link": "https://stackoverflow.com/users/7770696/nikhilbisht21"}, "is_accepted": true, "score": 1, "last_activity_date": 1546421877, "last_edit_date": 1546421877, "creation_date": 1538606399, "answer_id": 52636623, "question_id": 52636401, "link": "https://stackoverflow.com/questions/52636401/how-can-i-compare-and-print-an-element-from-a-2d-list-in-python/52636623#52636623", "title": "How can i compare and print an element from a 2D list in python?", "body": "<p>Maybe this will work:</p>\n\n<pre><code>wage=[]\nfor var in range(len(brands)):\n   wage.append(brands[var][1])\n\nmin=wage.index(min(wage))\nprint(\"The lowest wage :{0}, {1}\".format(brands[min][0],brands[min][1])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1125, "user_id": 9127165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c587412f6474fb6e90ff67a8541a0223?s=128&d=identicon&r=PG&f=1", "display_name": "Sachihiro", "link": "https://stackoverflow.com/users/9127165/sachihiro"}, "edited": false, "score": 0, "creation_date": 1538607144, "post_id": 52636702, "comment_id": 92206493, "body": "Thanks man, @sacul did exactly the same thing. But i will save this code for the next project because this time i am not allowed to lambda, however i appreciate it."}], "tags": [], "owner": {"reputation": 4254, "user_id": 10255652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5DDj.jpg?s=128&g=1", "display_name": "vash_the_stampede", "link": "https://stackoverflow.com/users/10255652/vash-the-stampede"}, "is_accepted": false, "score": 1, "last_activity_date": 1538606922, "creation_date": 1538606922, "answer_id": 52636702, "question_id": 52636401, "link": "https://stackoverflow.com/questions/52636401/how-can-i-compare-and-print-an-element-from-a-2d-list-in-python/52636702#52636702", "title": "How can i compare and print an element from a 2D list in python?", "body": "<p>You can <em>sort</em> with <em>lambda</em> by the desired category <code>key=lambda x: x[1]</code>, would refer to wages, Then print the corresponding indices, of the <code>list[0][0], list[0][x]</code> for our low and <code>list[-1][0], list[-1][x]</code> for our highs    </p>\n\n<pre><code>wage = sorted(brands, key=lambda x: x[1])\nprint('The lowest wage: {}, {}'.format(wage[0][0], wage[0][1]))\nprint('The highest wage: {}, {}'.format(wage[-1][0], wage[-1][1]))\n\nhours = (sorted(brands, key=lambda x: x[2]))\nprint('The lowest working hours: {}, {}'.format(hours[0][0], hours[0][2]))\nprint('The highest working hours: {}, {}'.format(hours[-1][0], hours[-1][2]))\n</code></pre>\n\n<blockquote>\n<pre><code>The lowest wage: Google, 110\nThe highest wage: Apple, 150\nThe lowest working hours: Google, 35\nThe highest working hours: Apple, 40\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 1125, "user_id": 9127165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c587412f6474fb6e90ff67a8541a0223?s=128&d=identicon&r=PG&f=1", "display_name": "Sachihiro", "link": "https://stackoverflow.com/users/9127165/sachihiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 52636623, "answer_count": 4, "score": 0, "last_activity_date": 1546421877, "creation_date": 1538604758, "last_edit_date": 1538640720, "question_id": 52636401, "link": "https://stackoverflow.com/questions/52636401/how-can-i-compare-and-print-an-element-from-a-2d-list-in-python", "title": "How can i compare and print an element from a 2D list in python?", "body": "<p>I have this 2D list where the first element is the name of company the second is how much a senior developer gets salary and the third element is how many hours they work/week.</p>\n\n<pre><code>brands = [[\"Microsoft\", \"120\", \"38\", \"1124\"], [\"Apple\", \"150\", \"40\", \"1800\"], [\"Google\", \"110\", \"35\", \"1437\"]]\n</code></pre>\n\n<p>I am trying to compare <code>brands[0][1] with brand[1][1] and brands [2][1]</code> and print the lowest and highest wages in industry e.g <code>\"The lowest wage: Google, 110\" \"The highest wage: Apple,150\"</code>, then printing lowest and highest working hours, for a short list it is ease with if and else statements but i am trying to make a general loop for in case of a much larger list.</p>\n\n<p>I tried min() but it was unsuccessfully, i am sure there is a way to make it work though.</p>\n"}, {"tags": ["python", "spell-checking", "textblob"], "answers": [{"tags": [], "owner": {"reputation": 1312, "user_id": 2645252, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/bb55801eca56ea86014fac87ef96a062?s=128&d=identicon&r=PG", "display_name": "mobcdi", "link": "https://stackoverflow.com/users/2645252/mobcdi"}, "is_accepted": false, "score": 0, "last_activity_date": 1539449551, "creation_date": 1539449551, "answer_id": 52795192, "question_id": 52636398, "link": "https://stackoverflow.com/questions/52636398/how-to-use-python-and-textblob-to-get-list-of-incorrectly-spelled-words-in-my-nl/52795192#52795192", "title": "How to use python and TextBlob to get list of incorrectly spelled words in my nltk corpus", "body": "<p>It appears my corpus wasn't configured correctly to iterate through the base files\nI needed \n<code>PlaintextCorpusReader(completeFolder, '.*txt')</code> instead of\n<code>PlaintextCorpusReader(completeFolder, '.txt')</code></p>\n\n<p>the give away was Corpus.fileids() didn't return anything until I fixed the code</p>\n"}], "owner": {"reputation": 1312, "user_id": 2645252, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/bb55801eca56ea86014fac87ef96a062?s=128&d=identicon&r=PG", "display_name": "mobcdi", "link": "https://stackoverflow.com/users/2645252/mobcdi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539449551, "creation_date": 1538604743, "question_id": 52636398, "link": "https://stackoverflow.com/questions/52636398/how-to-use-python-and-textblob-to-get-list-of-incorrectly-spelled-words-in-my-nl", "title": "How to use python and TextBlob to get list of incorrectly spelled words in my nltk corpus", "body": "<p>I want to check the spelling of an nltk corpus I created</p>\n\n<p>When i pass raw text from an nltk corpus through textblob's spellcheck() I get the following error <code>Object has no len()</code> and the code section below. </p>\n\n<p>Is there a way to get the list of incorrect spellings detected in my text without having them corrected first</p>\n\n<pre><code>site-packages\\textblob\\_text.py in suggest(self, w)\n   1386         if len(self) == 0:\n   1387             self.load()\n-&gt; 1388         if len(w) == 1:\n   1389             return [(w, 1.0)] # I\n   1390         if w in PUNCTUATION:\n\nTypeError: object of type 'method' has no len()\n</code></pre>\n"}, {"tags": ["python", "scikit-learn", "sklearn-pandas"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1538604790, "post_id": 52636337, "comment_id": 92205904, "body": "For starters, <code>LabelEncoder()</code> is meant for a single column, your targets or category labels. Are you looking for <code>OneHotEncoder()</code>?"}, {"owner": {"reputation": 1578, "user_id": 9933449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6130945ff1667b14dc3ca894685e46cf?s=128&d=identicon&r=PG&f=1", "display_name": "user_6396", "link": "https://stackoverflow.com/users/9933449/user-6396"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1538605025, "post_id": 52636337, "comment_id": 92205965, "body": "@G.Anderson I have seen multiple posts on So that you can use it via <code>apply</code> function."}, {"owner": {"reputation": 1578, "user_id": 9933449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6130945ff1667b14dc3ca894685e46cf?s=128&d=identicon&r=PG&f=1", "display_name": "user_6396", "link": "https://stackoverflow.com/users/9933449/user-6396"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1538605067, "post_id": 52636337, "comment_id": 92205978, "body": "I want to convert category labels to <code>o</code> or <code>1</code> based on category directly."}, {"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "edited": false, "score": 0, "creation_date": 1538606447, "post_id": 52636337, "comment_id": 92206338, "body": "<code>df.apply(LabelEncoder().fit_transform)</code>, where <code>df</code> is the dataframe with all of the columns that you want transformed."}], "answers": [{"comments": [{"owner": {"reputation": 1578, "user_id": 9933449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6130945ff1667b14dc3ca894685e46cf?s=128&d=identicon&r=PG&f=1", "display_name": "user_6396", "link": "https://stackoverflow.com/users/9933449/user-6396"}, "edited": false, "score": 0, "creation_date": 1538605712, "post_id": 52636503, "comment_id": 92206149, "body": "Is it possible to achieve it via <code>apply</code> function?"}], "tags": [], "owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "is_accepted": false, "score": 0, "last_activity_date": 1538605356, "creation_date": 1538605356, "answer_id": 52636503, "question_id": 52636337, "link": "https://stackoverflow.com/questions/52636337/how-can-i-use-sklearn-label-encoder-and-apply-to-my-dataframe-directly/52636503#52636503", "title": "How can I use sklearn label encoder and apply to my dataframe directly", "body": "<p>The most basic way I can think is to select the object columns, then loop through them and <code>fit_transform()</code> using the LabelEncoder</p>\n\n<pre><code>for col in df.select_dtypes(object).columns:\n    df[col]=LabelEncoder().fit_transform(df[col])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1578, "user_id": 9933449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6130945ff1667b14dc3ca894685e46cf?s=128&d=identicon&r=PG&f=1", "display_name": "user_6396", "link": "https://stackoverflow.com/users/9933449/user-6396"}, "edited": false, "score": 0, "creation_date": 1538606919, "post_id": 52636660, "comment_id": 92206441, "body": "Thanks that seems to do the trick. Is it possible to convert them back?"}], "tags": [], "owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "is_accepted": true, "score": 2, "last_activity_date": 1538614951, "last_edit_date": 1538614951, "creation_date": 1538606609, "answer_id": 52636660, "question_id": 52636337, "link": "https://stackoverflow.com/questions/52636337/how-can-i-use-sklearn-label-encoder-and-apply-to-my-dataframe-directly/52636660#52636660", "title": "How can I use sklearn label encoder and apply to my dataframe directly", "body": "<p>Assuming <code>df</code> is your filtered dataframe that you want transformed (e.g. per your example in the question):</p>\n\n<pre><code>&gt;&gt;&gt; df.apply(LabelEncoder().fit_transform)\n   Gender  Married  x_y  x_z\n0       0        0    0    0\n1       0        1    1    0\n2       0        1    2    1\n3       0        1    3    0\n4       0        0    1    0\n</code></pre>\n\n<p>To make it more general for decoding, you need to keep track of your label encoders (I used a dictionary keyed on the dataframe column names).  You then need to fit each one.</p>\n\n<pre><code>encoders = {col: LabelEncoder().fit(df[col]) for col in df}\n\nencoded_df = pd.DataFrame(\n    {col: encoders[col].transform(df[col]) for col in df},\n    index=df.index)\n&gt;&gt;&gt;encoded_df\n   Gender  Married  x_y  x_z\n0       0        0    0    0\n1       0        1    1    0\n2       0        1    2    1\n3       0        1    3    0\n4       0        0    1    0\n\ndecoded_df = pd.DataFrame(\n    {col: encoders[col].inverse_transform(encoded_df[col]) for col in encoded_df},\n    index=encoded_df.index)\n  Gender Married x_y  x_z\n0   Male      No   0   No\n1   Male     Yes   1   No\n2   Male     Yes   2  Yes\n3   Male     Yes  3+   No\n4   Male      No   1   No\n</code></pre>\n"}], "owner": {"reputation": 1578, "user_id": 9933449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6130945ff1667b14dc3ca894685e46cf?s=128&d=identicon&r=PG&f=1", "display_name": "user_6396", "link": "https://stackoverflow.com/users/9933449/user-6396"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 52636660, "answer_count": 2, "score": 0, "last_activity_date": 1538614951, "creation_date": 1538604329, "last_edit_date": 1538604676, "question_id": 52636337, "link": "https://stackoverflow.com/questions/52636337/how-can-i-use-sklearn-label-encoder-and-apply-to-my-dataframe-directly", "title": "How can I use sklearn label encoder and apply to my dataframe directly", "body": "<p>I have a dataframe and I want to use LabelEncoder directly on it.</p>\n\n<p>DataFrame:</p>\n\n<pre><code>df.select_dtypes('object').iloc[:,1:]\n\n  Gender  Married x_y   x_z \n0   Male    No     0     No       \n1   Male    Yes    1     No         \n2   Male    Yes    2     Yes        \n3   Male    Yes    3+    No   \n4   Male    No     1     No     \n</code></pre>\n\n<p>I tried these:</p>\n\n<pre><code>le = LabelEncoder()\ndf.select_dtypes('object').iloc[:,1:].apply(le.fit_transform, axis=1)\n</code></pre>\n\n<blockquote>\n  <p>TypeError: (\"'&lt;' not supported between instances of 'float' and\n  'str'\", 'occurred at index 11')</p>\n</blockquote>\n\n<pre><code>df.select_dtypes('object').iloc[:,1:].apply(LabelEncoder.fit_transform)\n</code></pre>\n\n<blockquote>\n  <p>TypeError: (\"fit_transform() missing 1 required positional argument:\n  'y'\", 'occurred at index Gender')</p>\n</blockquote>\n\n<p>Any help on how to use it.</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 8316, "user_id": 2125827, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e2931c1ee2f6b4fefef20b2ef4a25082?s=128&d=identicon&r=PG", "display_name": "carte blanche", "link": "https://stackoverflow.com/users/2125827/carte-blanche"}, "reply_to_user": {"reputation": 15340, "user_id": 1560035, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fe3aa4a1766a44d8f27db8a95cb573ed?s=128&d=identicon&r=PG", "display_name": "TheoretiCAL", "link": "https://stackoverflow.com/users/1560035/theoretical"}, "edited": false, "score": 0, "creation_date": 1538604830, "post_id": 52636330, "comment_id": 92205921, "body": "is there an example with authentication?"}, {"owner": {"reputation": 8316, "user_id": 2125827, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e2931c1ee2f6b4fefef20b2ef4a25082?s=128&d=identicon&r=PG", "display_name": "carte blanche", "link": "https://stackoverflow.com/users/2125827/carte-blanche"}, "reply_to_user": {"reputation": 15340, "user_id": 1560035, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fe3aa4a1766a44d8f27db8a95cb573ed?s=128&d=identicon&r=PG", "display_name": "TheoretiCAL", "link": "https://stackoverflow.com/users/1560035/theoretical"}, "edited": false, "score": 0, "creation_date": 1538606540, "post_id": 52636330, "comment_id": 92206357, "body": "@TheoretiCAL - I already looked at that ,my code is exactly the same as the most voted one,I can try the accepted one aswell but am not posiitive..any other pointers?"}], "owner": {"reputation": 8316, "user_id": 2125827, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e2931c1ee2f6b4fefef20b2ef4a25082?s=128&d=identicon&r=PG", "display_name": "carte blanche", "link": "https://stackoverflow.com/users/2125827/carte-blanche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "closed_date": 1538640796, "answer_count": 0, "score": 1, "last_activity_date": 1538606851, "creation_date": 1538604276, "last_edit_date": 1538606851, "question_id": 52636330, "link": "https://stackoverflow.com/questions/52636330/how-to-download-a-zip-file-from-a-url-with-authentification", "closed_reason": "Duplicate", "title": "How to download a zip file from a URL with authentification?", "body": "<p>I am trying to download a zip file from url @<code>https://tools.company.com/api/v1/prkit/download/10102665/</code> using below logic ,I dont see any errors but the file doesnt download either?any guidance on what is wrong and how to fix it?</p>\n\n<pre><code>import urllib2, base64\nusername = 'xxxx'\npassword = 'xxxx'\nrequest = urllib2.Request(\"https://tools.company.com/api/v1/prkit/download/10102665/\")\nbase64string = base64.standard_b64encode('%s:%s' % (username, password)).replace('\\n', '')\nrequest.add_header(\"Authorization\", \"Basic %s\" % base64string)   \nresult = urllib2.urlopen(request)\nprint result\n</code></pre>\n\n<p>UPDATE:</p>\n\n<p>Tried <a href=\"https://stackoverflow.com/questions/19602931/basic-http-file-downloading-and-saving-to-disk-in-python\">Basic http file downloading and saving to disk in python?</a> but it doesnt seem to have a way to authenticate,added a comment.Any other ways this can be done?</p>\n"}, {"tags": ["python", "lambda", "neural-network", "keras", "nonetype"], "answers": [{"tags": [], "owner": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "is_accepted": true, "score": 3, "last_activity_date": 1538607875, "creation_date": 1538607875, "answer_id": 52636813, "question_id": 52636328, "link": "https://stackoverflow.com/questions/52636328/nonetype-object-has-no-attribute-inbound-nodes/52636813#52636813", "title": "NoneType&#39; object has no attribute &#39;_inbound_nodes&#39;", "body": "<p>Well, you need to put <code>tf.multiply()</code> inside a <code>Lambda</code> layer to get a Keras Tensor as output (and not a Tensor):</p>\n\n<pre><code>output = Lambda(lambda x: tf.multiply(x[0], x[1]))([gate, expert])\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9843744, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VryCXJn5qlI/AAAAAAAAAAI/AAAAAAAADwg/rI0cBoN10XA/photo.jpg?sz=128", "display_name": "DiegO.o Salz Barr", "link": "https://stackoverflow.com/users/9843744/diego-o-salz-barr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2019, "favorite_count": 0, "accepted_answer_id": 52636813, "answer_count": 1, "score": 2, "last_activity_date": 1538607875, "creation_date": 1538604263, "question_id": 52636328, "link": "https://stackoverflow.com/questions/52636328/nonetype-object-has-no-attribute-inbound-nodes", "title": "NoneType&#39; object has no attribute &#39;_inbound_nodes&#39;", "body": "<p>Hi I am trying to build a Mixture-of-experts neural network. I found a code here: <a href=\"http://blog.sina.com.cn/s/blog_dc3c53e90102x9xu.html\" rel=\"nofollow noreferrer\">http://blog.sina.com.cn/s/blog_dc3c53e90102x9xu.html</a>. My goal is that the gate and expert come from different data, but with same dimensions.</p>\n\n<pre><code>def sliced(x,expert_num):\n    return x[:,:,:expert_num]\n\ndef reduce(x, axis):\n    return K.sum(x, axis=axis, keepdims=True)\n\ndef gatExpertLayer(inputGate, inputExpert, expert_num, nb_class):\n    #expert_num=30\n    #nb_class=10\n    input_vector1 = Input(shape=(inputGate.shape[1:]))\n    input_vector2 = Input(shape=(inputExpert.shape[1:]))\n\n    #The gate\n    gate = Dense(expert_num*nb_class, activation='softmax')(input_vector1)\n    gate = Reshape((1,nb_class, expert_num))(gate)\n    gate = Lambda(sliced, output_shape=(nb_class, expert_num), arguments={'expert_num':expert_num})(gate)\n\n    #The expert\n    expert = Dense(nb_class*expert_num, activation='sigmoid')(input_vector2)\n    expert = Reshape((nb_class, expert_num))(expert)\n\n    #The output\n    output = tf.multiply(gate, expert)\n    #output = keras.layers.merge([gate, expert], mode='mul')\n    output = Lambda(reduce, output_shape=(nb_class,), arguments={'axis': 2})(output)\n\n    model = Model(input=[input_vector1, input_vector2], output=output)\n\n    model.compile(loss='mean_squared_error', metrics=['mse'], optimizer='adam')\n\n    return model\n</code></pre>\n\n<p>However, I got \"'NoneType' object has no attribute '_inbound_nodes'\". I checked other similar questions here: <a href=\"https://stackoverflow.com/questions/52448652/attributeerror-nonetype-object-has-no-attribute-inbound-nodes-while-trying\">AttributeError: &#39;NoneType&#39; object has no attribute &#39;_inbound_nodes&#39; while trying to add multiple keras Dense layers</a> but the problem is fixed with the Lambda function of keras to convert into a layer. </p>\n"}, {"tags": ["python", "python-3.x", "parsing", "command-line-arguments", "argparse"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1538605507, "post_id": 52636309, "comment_id": 92206088, "body": "Due to the <code>argparse</code> parsing approach it is hard, if not impossible, to do this. <a href=\"https://bugs.python.org/issue9334\" rel=\"nofollow noreferrer\">bugs.python.org/issue9334</a>"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1538615255, "post_id": 52636309, "comment_id": 92208159, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/16174992/cant-get-argparse-to-read-quoted-string-with-dashes-in-it\" title=\"cant get argparse to read quoted string with dashes in it\">stackoverflow.com/questions/16174992/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8239, "user_id": 4056181, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/G0SRK.jpg?s=128&g=1", "display_name": "jmd_dk", "link": "https://stackoverflow.com/users/4056181/jmd-dk"}, "edited": false, "score": 1, "creation_date": 1538604729, "post_id": 52636344, "comment_id": 92205889, "body": "True, though what I really want is a solution from within the Python script, allowing it to be called like <code>-s -begins-with-dash</code>."}], "tags": [], "owner": {"reputation": 111, "user_id": 10452774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8a900ad1b36dbe03713bf946a8bff67?s=128&d=identicon&r=PG&f=1", "display_name": "Joey Harrington", "link": "https://stackoverflow.com/users/10452774/joey-harrington"}, "is_accepted": false, "score": 11, "last_activity_date": 1538604381, "creation_date": 1538604381, "answer_id": 52636344, "question_id": 52636309, "link": "https://stackoverflow.com/questions/52636309/python-argparse-leading-dash-in-argument/52636344#52636344", "title": "Python argparse: Leading dash in argument", "body": "<p>You can force argparse to interpret an argument as a value by including an equals sign:\n<code>\npython test.py -s=-begins-with-dash -a bar -a baz\nNamespace(a=['bar', 'baz'], s='-begins-with-dash')\n</code></p>\n"}, {"tags": [], "owner": {"reputation": 6510, "user_id": 5889131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/S0TUH.jpg?s=128&g=1", "display_name": "jeremysprofile", "link": "https://stackoverflow.com/users/5889131/jeremysprofile"}, "is_accepted": false, "score": 1, "last_activity_date": 1554568080, "last_edit_date": 1554568080, "creation_date": 1553182341, "answer_id": 55284011, "question_id": 52636309, "link": "https://stackoverflow.com/questions/52636309/python-argparse-leading-dash-in-argument/55284011#55284011", "title": "Python argparse: Leading dash in argument", "body": "<p>If you are instead trying to provide multiple values to one argument:</p>\n\n<pre><code>parser.add_argument('-a', action='append', nargs=argparse.REMAINDER)\n</code></pre>\n\n<p>will grab <em>everything</em> after <code>-a</code> on the command line and shove it in <code>a</code>.</p>\n\n<pre><code>python test.py -toe -a bar fi -fo -fum -s fee -foo\nusage: test.py [-h] [-s S] [-a ...]\ntest.py: error: unrecognized arguments: -toe\n\npython test.py -a bar fi -fo -fum -s fee -foo\nNamespace(a=[['bar', 'fi', '-fo', '-fum', '-s', 'fee', '-foo']], s=None)\n</code></pre>\n\n<p>Note that even though <code>-s</code> is a recognized argument, <code>argparse.REMAINDER</code> adds it to the list of args found by <code>-a</code> since it is after <code>-a</code> on the command line</p>\n"}], "owner": {"reputation": 8239, "user_id": 4056181, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/G0SRK.jpg?s=128&g=1", "display_name": "jmd_dk", "link": "https://stackoverflow.com/users/4056181/jmd-dk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3846, "favorite_count": 0, "answer_count": 2, "score": 7, "last_activity_date": 1554568080, "creation_date": 1538604104, "question_id": 52636309, "link": "https://stackoverflow.com/questions/52636309/python-argparse-leading-dash-in-argument", "title": "Python argparse: Leading dash in argument", "body": "<p>I'm using Python's <a href=\"https://docs.python.org/3/library/argparse.html\" rel=\"noreferrer\"><code>argparse</code></a> module to parse command line arguments. Consider the following simplified example,</p>\n\n<pre><code># File test.py\nimport argparse\nparser = argparse.ArgumentParser()\nparser.add_argument('-s', action='store')\nparser.add_argument('-a', action='append')\nargs = parser.parse_args()\nprint(args)\n</code></pre>\n\n<p>which can successfully be called like</p>\n\n<pre><code>python test.py -s foo -a bar -a baz\n</code></pre>\n\n<p>A single argument is required after <code>-s</code> and after each <code>-a</code>, which may contain spaces if we use quotation. If however an argument starts with a dash (<code>-</code>) and does not contain any spaces, the code crashes:</p>\n\n<pre><code>python test.py -s -begins-with-dash -a bar -a baz\n</code></pre>\n\n<blockquote>\n  <p>error: argument -s: expected one argument</p>\n</blockquote>\n\n<p>I get that it interprets <code>-begins-with-dash</code> as the beginning of a new option, which is illegal as <code>-s</code> has not yet received its required argument. It's also pretty clear though that no option with the name <code>-begins-with-dash</code> has been defined, and so it should not interpret it as an option in the first place. How can I make <code>argparse</code> accept arguments with one or more leading dashes?</p>\n"}, {"tags": ["python", "algorithm", "performance"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1538605827, "post_id": 52636289, "comment_id": 92206201, "body": "Let&#39;s see -- you want to keep the original list intact and use minuscule additional memory.  You also want to solve some abstract counting problem described only in four indices with no associated semantics ..."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1538605900, "post_id": 52636289, "comment_id": 92206222, "body": "... as the posting guidelines say, please make it easy for people to help you.  Describe the problem you&#39;re trying to solve in practical terms.  From the interplay of loops here, I expect there&#39;s a much easier way to do this with the vectorization of numpy, but I&#39;m not going to cross my eyes enough to suss out what your goal might be."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1538668354, "post_id": 52636289, "comment_id": 92233587, "body": "@ppw0: somewhat better.  Still not quite up to standard, since the code doesn&#39;t run as given."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1538668473, "post_id": 52636289, "comment_id": 92233650, "body": "You keep referring to this as an array, but your code doesn&#39;t include anything with an array type.  Is this really an array, or nested lists?  Your lack of a full example leaves it ambiguous."}, {"owner": {"reputation": 101, "user_id": 7143340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f3a64703bcf38ba9228f6a8d78f8646?s=128&d=identicon&r=PG&f=1", "display_name": "ppw0", "link": "https://stackoverflow.com/users/7143340/ppw0"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1538676003, "post_id": 52636289, "comment_id": 92237287, "body": "@Prune It&#39;s declared as a RawArray, I added that now. But since it&#39;s 1D, without copying the array sections for each count, I can&#39;t &quot;pull out&quot; a vector of counts for every pair."}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 7143340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f3a64703bcf38ba9228f6a8d78f8646?s=128&d=identicon&r=PG&f=1", "display_name": "ppw0", "link": "https://stackoverflow.com/users/7143340/ppw0"}, "edited": false, "score": 0, "creation_date": 1538786298, "post_id": 52651071, "comment_id": 92278972, "body": "Is it advisable to try C-extensions next?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 101, "user_id": 7143340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f3a64703bcf38ba9228f6a8d78f8646?s=128&d=identicon&r=PG&f=1", "display_name": "ppw0", "link": "https://stackoverflow.com/users/7143340/ppw0"}, "edited": false, "score": 1, "creation_date": 1539011140, "post_id": 52651071, "comment_id": 92336799, "body": "I would think so.  I don&#39;t work there, myself -- if the job requires that much optimization, we leave interpreters behind and go to a fully-compiled language."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1538668909, "creation_date": 1538668909, "answer_id": 52651071, "question_id": 52636289, "link": "https://stackoverflow.com/questions/52636289/fastest-way-to-count-duplicate-integers-in-two-distinct-sections-of-an-array/52651071#52651071", "title": "Fastest way to count duplicate integers in two distinct sections of an array", "body": "<p>Since you can't change the array characteristics at all, I think you're stuck with <strong>O(n^2)</strong>.  <code>numpy</code> would gain some vectorization, but would change the access for others sharing the array.  Start with the innermost operation:</p>\n\n<pre><code>    for k in range(0,m):\n        count += (arr[i][k] == arr[j][k])\n</code></pre>\n\n<p>Change this to a one-line assignment:</p>\n\n<pre><code>    count = sum(arr[i][k] == arr[j][k] for k in range(m))\n</code></pre>\n\n<p>Now, if this is <em>truly</em> an array, rather than a list of lists, use the array package's vectorization to simplify the loops, one at a time:</p>\n\n<pre><code>    count = sum(arr[i] == arr[j])   # results in a vector of counts\n</code></pre>\n\n<p>You can now return the <code>j</code> indices where <code>count[j] / m &gt; 0.7</code>.  Note that there's no real need to return <code>i</code> for each one: it's constant within the function, and the calling program already has the value.  Your array package likely has a pair of vectorized indexing operations that can return those indices.  If you're using <code>numpy</code>, those are easy enough to look up on this site.</p>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 7143340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f3a64703bcf38ba9228f6a8d78f8646?s=128&d=identicon&r=PG&f=1", "display_name": "ppw0", "link": "https://stackoverflow.com/users/7143340/ppw0"}, "is_accepted": true, "score": 1, "last_activity_date": 1539548164, "creation_date": 1539548164, "answer_id": 52806718, "question_id": 52636289, "link": "https://stackoverflow.com/questions/52636289/fastest-way-to-count-duplicate-integers-in-two-distinct-sections-of-an-array/52806718#52806718", "title": "Fastest way to count duplicate integers in two distinct sections of an array", "body": "<p>So after fiddling around some more, I was able to cut down the running time greatly with help from NumPy's vectorization and Numba's JIT compiler. Going back to the original code:</p>\n\n<pre><code>arr = mp.RawArray(ctypes.c_uint, n*m)\n\ndef fun(i):\n    for j in range(i-1,0,-1):\n        count = 0\n        for k in range(0,m):\n            count += (arr[i*m+k] == arr[j*m+k])\n        if count/m &gt; 0.7:\n            return (i,j)\nreturn ()\n</code></pre>\n\n<p>We can leave out the bottom <code>return</code> statement as well as dismiss the idea of using <code>count</code> entirely, leaving us with:</p>\n\n<pre><code>def fun(i):\n    for j in range(i-1,0,-1):\n        if sum(arr[i*m+k] == arr[j*m+k] for k in range(m)) &gt; 0.7*m:\n            return (i,j)\n</code></pre>\n\n<p>Then, we change the array <code>arr</code> to a NumPy format:</p>\n\n<pre><code>np_arr = np.frombuffer(arr,dtype='int32').reshape(m,n)\n</code></pre>\n\n<p>The important thing to note here is that we do not use a NumPy array as a shared memory array to be <em>written</em> from multiple processes, avoiding the overhead pitfall.</p>\n\n<p>Finally, we apply Numba's decorator and rewrite the <code>sum</code> function in vector form so that it works with the new array:</p>\n\n<pre><code>import numba as nb\n@nb.njit(fastmath=True,parallel=True)\ndef fun(i):\n    for j in range(i-1, 0, -1):\n        if np.sum(np_arr[i] == np_arr[j]) &gt; 0.7*m:\n            return (i,j)\n</code></pre>\n\n<p>This reduced the running time to <strong>7.9s</strong>, which is definitely a victory for me.</p>\n"}], "owner": {"reputation": 101, "user_id": 7143340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f3a64703bcf38ba9228f6a8d78f8646?s=128&d=identicon&r=PG&f=1", "display_name": "ppw0", "link": "https://stackoverflow.com/users/7143340/ppw0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 52806718, "answer_count": 2, "score": 1, "last_activity_date": 1539548900, "creation_date": 1538603998, "last_edit_date": 1539548900, "question_id": 52636289, "link": "https://stackoverflow.com/questions/52636289/fastest-way-to-count-duplicate-integers-in-two-distinct-sections-of-an-array", "title": "Fastest way to count duplicate integers in two distinct sections of an array", "body": "<p>In this snippet of Python code,</p>\n\n<p><code>fun</code> iterates through the array <code>arr</code> and counts the number of identical integers in two array sections for every section pair. (It simulates a matrix.) This makes <code>n*(n-1)/2*m</code> comparisons in total, giving a time complexity of <code>O(n^2)</code>.</p>\n\n<p>Are there programming solutions or ways of reframing this problem that would yield equivalent results but have reduced time complexity?</p>\n\n<pre><code># n &gt; 500000, 0 &lt; i &lt; n, m = 100\n# dim(arr) = n*m, 0 &lt; arr[x] &lt; 4294967311\n\narr = mp.RawArray(ctypes.c_uint, n*m)\n\ndef fun(i):\n    for j in range(i-1,0,-1):\n        count = 0\n        for k in range(0,m):\n            count += (arr[i*m+k] == arr[j*m+k])\n        if count/m &gt; 0.7:\n            return (i,j)\n    return ()\n</code></pre>\n\n<ul>\n<li><p><code>arr</code> is a shared memory array, therefore it's best kept read-only for simplicity and performance reasons.</p></li>\n<li><p><code>arr</code> is implemented as a 1D RawArray from <code>multiprocessing</code>. The reason for this it has by far the fastest performance according to my tests. Using a <code>numpy</code> 2D array, for example, like this:</p>\n\n<pre><code>arr = np.ctypeslib.as_array(mp.RawArray(ctypes.c_uint, n*m)).reshape(n,m)\n</code></pre>\n\n<p>would provide vectorization capabilities, but increases the total runtime by an order of magnitude - 250s vs. 30s for n = 1500, which amounts to <strong>733%</strong>.</p></li>\n</ul>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "edited": false, "score": 0, "creation_date": 1538606535, "post_id": 52636288, "comment_id": 92206356, "body": "Added some timing to my answer. I did not expect that."}], "answers": [{"comments": [{"owner": {"reputation": 263, "user_id": 384593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eba9dc44a0d3a70b57542120809d3a58?s=128&d=identicon&r=PG", "display_name": "Michael Miller", "link": "https://stackoverflow.com/users/384593/michael-miller"}, "edited": false, "score": 0, "creation_date": 1538607489, "post_id": 52636390, "comment_id": 92206579, "body": "Do you think <code>np.transpose(coords)</code> is slightly clearer than <code>np.moveaxis(coords, -1, 0)</code>?"}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "reply_to_user": {"reputation": 263, "user_id": 384593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eba9dc44a0d3a70b57542120809d3a58?s=128&d=identicon&r=PG", "display_name": "Michael Miller", "link": "https://stackoverflow.com/users/384593/michael-miller"}, "edited": false, "score": 0, "creation_date": 1538608729, "post_id": 52636390, "comment_id": 92206865, "body": "@MikeMiller Thanks, I updated the post."}, {"owner": {"reputation": 2890, "user_id": 3821009, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8c7fb1f9e34d1b461b185b16dd447cad?s=128&d=identicon&r=PG&f=1", "display_name": "levant pied", "link": "https://stackoverflow.com/users/3821009/levant-pied"}, "edited": false, "score": 0, "creation_date": 1538658123, "post_id": 52636390, "comment_id": 92226578, "body": "Thanks @PaulPanzer!"}], "tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": true, "score": 3, "last_activity_date": 1538608691, "last_edit_date": 1538608691, "creation_date": 1538604693, "answer_id": 52636390, "question_id": 52636288, "link": "https://stackoverflow.com/questions/52636288/fastest-way-to-build-numpy-array-from-sum-of-coordinates/52636390#52636390", "title": "Fastest way to build numpy array from sum of coordinates", "body": "<p>Move to flat indexing and use <code>np.bincount</code>.</p>\n\n<pre><code>&gt;&gt;&gt; import numpy as np                                                   \n&gt;&gt;&gt;                                                                                                                 \n&gt;&gt;&gt; coords = [(0, 0), (1, 1), (0, 0)]                                       \n&gt;&gt;&gt; \n&gt;&gt;&gt; shp = np.max(coords, axis=0) + 1     \n&gt;&gt;&gt; flt = np.ravel_multi_index(np.moveaxis(coords, -1, 0), shp)               \n&gt;&gt;&gt; result = np.bincount(flt, minlength=shp.prod()).reshape(shp)                         \n&gt;&gt;&gt;                                                                                                                 \n&gt;&gt;&gt; result                                                                                                          \narray([[2, 0],                                                                                                      \n       [0, 1]])                                                                                                     \n</code></pre>\n\n<p><strong>EDIT</strong> As pointed out by @MikeMiller <code>moveaxis</code> is overkill here; <code>np.transpose(coords)</code> or if coords happen to be an array <code>coords.T</code> is better. <code>moveaxis</code> would be more general if <code>coords</code> were for some reason more than <code>2D</code> but that doesn't look like a likely scenario.</p>\n"}, {"tags": [], "owner": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "is_accepted": false, "score": 2, "last_activity_date": 1538607388, "last_edit_date": 1538607388, "creation_date": 1538605050, "answer_id": 52636445, "question_id": 52636288, "link": "https://stackoverflow.com/questions/52636288/fastest-way-to-build-numpy-array-from-sum-of-coordinates/52636445#52636445", "title": "Fastest way to build numpy array from sum of coordinates", "body": "<p>Using <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.unique.html\" rel=\"nofollow noreferrer\"><code>np.unique()</code></a> to count the number of unique coordinates (<s> however, I don't know this is the fastest way or not</s>, it is not, see the timings below):</p>\n\n<pre><code>import numpy as np\n\na = [(0,0), (1,1), (1,0), (0,0)]\n\nb = np.array(a)\nu, c = np.unique(b, axis=0, return_counts=True)\nm = np.max(b)+1\nans = np.zeros((m, m))\nans[u[:,0], u[:,1]] = c\n\n# ans\narray([[ 2.,  0.],\n       [ 1.,  1.]])\n</code></pre>\n\n<hr>\n\n<p>I did some timing:</p>\n\n<pre><code># data preparation\nmax_coord = 10000\nmax_size = 100000\n\n# this is awful, I know it can be done much better...\ncoords = [(int(np.random.randint(max_coord, size=1)),\n           int(np.random.randint(max_coord, size=1))) for _ in range(max_size)]\n\n# timings using %timeit\n\n# my solution\n139 ms \u00b1 592 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n\n# Paul Panzer's solution\n142 ms \u00b1 461 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n\n# with max_size = 1000000\n# my solution\n827 ms \u00b1 19.6 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n\n# Paul's solution\n748 ms \u00b1 4.62 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n</code></pre>\n\n<p>Almost the same (though I don't know about their memory footprint; with <code>max_size=1000000</code> and <code>max_coord=100000</code> both solutions give <code>MemoryError</code> on my machine). However, I'll go with the @Paul's solution, it is much more neat (and faster when data is big).</p>\n"}], "owner": {"reputation": 2890, "user_id": 3821009, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8c7fb1f9e34d1b461b185b16dd447cad?s=128&d=identicon&r=PG&f=1", "display_name": "levant pied", "link": "https://stackoverflow.com/users/3821009/levant-pied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "closed_date": 1538625839, "accepted_answer_id": 52636390, "answer_count": 2, "score": 1, "last_activity_date": 1538608691, "creation_date": 1538603997, "question_id": 52636288, "link": "https://stackoverflow.com/questions/52636288/fastest-way-to-build-numpy-array-from-sum-of-coordinates", "closed_reason": "Duplicate", "title": "Fastest way to build numpy array from sum of coordinates", "body": "<p>Say I have a list (or numpy.array) of <code>(row, col)</code> coordinates, e.g.:</p>\n\n<pre><code>[(0, 0), (1, 1), (0, 0)]\n</code></pre>\n\n<p>I'd like to build the 2x2 array like this:</p>\n\n<pre><code>2 0\n0 1\n</code></pre>\n\n<p>where each of the listed coordinates is counted and put in the right place in the array. I.e. <code>(0, 0)</code> appears twice, so <code>a[0, 0] == 2</code>.</p>\n\n<p>I know I can build this by iterating and poking the array for each element, but I wanted to check if there is any support in numpy regarding building the array like this, mostly for performance reasons. Can you point me in the right direction if so?</p>\n\n<p>Also, is there a reduce-like functionality along the above lines? I.e. do <code>new = f(acc, el)</code> instead of <code>new = acc + el</code>.</p>\n"}, {"tags": ["python", "string", "ini", "configparser"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1538604096, "post_id": 52636255, "comment_id": 92205718, "body": "<a href=\"https://docs.python.org/3/library/configparser.html#configparser.ConfigParser.read_string\" rel=\"nofollow noreferrer\"><code>read_string</code></a>?"}, {"owner": {"reputation": 5045, "user_id": 3469521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b1ea16472234c4b480dd7d5e9a2c4b9c?s=128&d=identicon&r=PG&f=1", "display_name": "activelearner", "link": "https://stackoverflow.com/users/3469521/activelearner"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1538604202, "post_id": 52636255, "comment_id": 92205760, "body": "See my comment to the response from jwodder"}], "answers": [{"comments": [{"owner": {"reputation": 5045, "user_id": 3469521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b1ea16472234c4b480dd7d5e9a2c4b9c?s=128&d=identicon&r=PG&f=1", "display_name": "activelearner", "link": "https://stackoverflow.com/users/3469521/activelearner"}, "edited": false, "score": 0, "creation_date": 1538604178, "post_id": 52636310, "comment_id": 92205748, "body": "I tried this but got this error: Traceback (most recent call last):   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;   File &quot;/Library/Python/2.7/site-packages/backports/configparser/__&zwnj;&#8203;init__.py&quot;, line 728, in read_string     sfile = io.StringIO(string) TypeError: initial_value must be unicode or None, not str"}, {"owner": {"reputation": 5045, "user_id": 3469521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b1ea16472234c4b480dd7d5e9a2c4b9c?s=128&d=identicon&r=PG&f=1", "display_name": "activelearner", "link": "https://stackoverflow.com/users/3469521/activelearner"}, "edited": false, "score": 0, "creation_date": 1538604302, "post_id": 52636310, "comment_id": 92205793, "body": "Seems like that function exists in Python 3 but not in Python 2."}, {"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "reply_to_user": {"reputation": 5045, "user_id": 3469521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b1ea16472234c4b480dd7d5e9a2c4b9c?s=128&d=identicon&r=PG&f=1", "display_name": "activelearner", "link": "https://stackoverflow.com/users/3469521/activelearner"}, "edited": false, "score": 0, "creation_date": 1538604334, "post_id": 52636310, "comment_id": 92205801, "body": "@activelearner: Based on that error message, you need to decode your string to <code>unicode</code> first."}], "tags": [], "owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "is_accepted": false, "score": 0, "last_activity_date": 1538604104, "creation_date": 1538604104, "answer_id": 52636310, "question_id": 52636255, "link": "https://stackoverflow.com/questions/52636255/python-parse-ini-text-not-ini-file/52636310#52636310", "title": "Python - Parse INI text (not INI file)", "body": "<p>This is what the <a href=\"https://docs.python.org/3/library/configparser.html#configparser.ConfigParser.read_string\" rel=\"nofollow noreferrer\"><code>read_string()</code></a> method is for.</p>\n\n<blockquote>\n  <p>Parse configuration data from a string.</p>\n</blockquote>\n\n<p>Hence:</p>\n\n<pre><code>&gt;&gt;&gt; config = configparser.ConfigParser()\n&gt;&gt;&gt; config.read_string(my_ini_str)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1796, "user_id": 5763327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/051c8032c315fd540790929f1d6a6510?s=128&d=identicon&r=PG&f=1", "display_name": "Setop", "link": "https://stackoverflow.com/users/5763327/setop"}, "is_accepted": false, "score": 0, "last_activity_date": 1538604797, "creation_date": 1538604797, "answer_id": 52636410, "question_id": 52636255, "link": "https://stackoverflow.com/questions/52636255/python-parse-ini-text-not-ini-file/52636410#52636410", "title": "Python - Parse INI text (not INI file)", "body": "<p>you have to use <code>read_string</code> in order to parse a string.</p>\n\n<p>then you have to use getters on \"config\" object, such as :</p>\n\n<pre><code>&gt;&gt;&gt; config.get('dev', 'Host')\n'abc.com'\n</code></pre>\n\n<p>or</p>\n\n<pre><code>&gt;&gt;&gt; config.getfloat(config.default_section, 'Score')\n0.1\n</code></pre>\n"}], "owner": {"reputation": 5045, "user_id": 3469521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b1ea16472234c4b480dd7d5e9a2c4b9c?s=128&d=identicon&r=PG&f=1", "display_name": "activelearner", "link": "https://stackoverflow.com/users/3469521/activelearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 328, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1538604797, "creation_date": 1538603819, "last_edit_date": 1538604327, "question_id": 52636255, "link": "https://stackoverflow.com/questions/52636255/python-parse-ini-text-not-ini-file", "title": "Python - Parse INI text (not INI file)", "body": "<p>I have a case where I get a string version of an INI file and not the file itself. I am getting it this way from an external source and hence cannot be changed. </p>\n\n<p>Example of the string version:</p>\n\n<pre><code>'[DEFAULT]\\nScore = 0.1\\n\\n[dev]\\nHost = abc.com\\nPort = 0000\\n\\n[qa]\\nHost = xyz.com\\nEsPort = 1000\\n\\n[main]\\nHost = pqr.com\\nPort = 2000\\n'\n</code></pre>\n\n<p>I tried parsing this string using the configParser library in python:</p>\n\n<pre><code>&gt;&gt;&gt; config = configparser.ConfigParser()\n&gt;&gt;&gt; config.read(my_ini_str)\n[]\n</code></pre>\n\n<p>I get back nothing with the read function. Is there any other way to achieve this?</p>\n\n<p>Thanks in advance!</p>\n\n<p>UPDATE - Forgot to add that I am using Python 2.</p>\n"}, {"tags": ["python", "python-3.x", "pyqt", "pyqt5"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1538605295, "post_id": 52636230, "comment_id": 92206043, "body": "Your code throws me many errors since several things are not defined, if you want help you must provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, that code has to be complete in the sense that you do not need anything else to execute it but as I point out yours is not."}, {"owner": {"reputation": 23, "user_id": 8877320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d5ef3ec854f52bee774522ab9969648?s=128&d=identicon&r=PG&f=1", "display_name": "CrescentStrike", "link": "https://stackoverflow.com/users/8877320/crescentstrike"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1538605549, "post_id": 52636230, "comment_id": 92206100, "body": "I just added a github link to the full code"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8877320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d5ef3ec854f52bee774522ab9969648?s=128&d=identicon&r=PG&f=1", "display_name": "CrescentStrike", "link": "https://stackoverflow.com/users/8877320/crescentstrike"}, "edited": false, "score": 0, "creation_date": 1538659512, "post_id": 52640696, "comment_id": 92227566, "body": "If i want to print or use <code>self.datasf</code>from the ui class, how should i do it?"}, {"owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "reply_to_user": {"reputation": 23, "user_id": 8877320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d5ef3ec854f52bee774522ab9969648?s=128&d=identicon&r=PG&f=1", "display_name": "CrescentStrike", "link": "https://stackoverflow.com/users/8877320/crescentstrike"}, "edited": false, "score": 0, "creation_date": 1538672189, "post_id": 52640696, "comment_id": 92235563, "body": "@Lie Sugahara  If my example helped you with something, do not forget to mark my answer as useful."}, {"owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "reply_to_user": {"reputation": 23, "user_id": 8877320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d5ef3ec854f52bee774522ab9969648?s=128&d=identicon&r=PG&f=1", "display_name": "CrescentStrike", "link": "https://stackoverflow.com/users/8877320/crescentstrike"}, "edited": false, "score": 0, "creation_date": 1538672429, "post_id": 52640696, "comment_id": 92235665, "body": "<code>self.datasf</code> this <code>&lt;class &#39;list&#39;&gt;</code> <code>[[&#39;x&#39;, &#39;y&#39;, &#39;max&#39;], [1.0, 0.0, &#39;&#39;], [2.0, 563.0, &#39;&#39;], [3.0, 0.0, &#39;&#39;], [4.0, 22000.0, &#39;&#39;], [5.0, 131.0, &#39;&#39;], [6.0, 475.0, &#39;&#39;], [7.0, 0.0, &#39;&#39;], [8.0, 15.0, &#39;&#39;], [9.0, 0.0, &#39;&#39;], [10.0, 282.0, &#39;&#39;], [11.0, 0.0, &#39;&#39;], [12.0, 0.0, &#39;&#39;], [13.0, 395.0, &#39;&#39;], [14.0, 563.0, &#39;&#39;], [15.0, 563.0, 22000.0]]</code>"}, {"owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "reply_to_user": {"reputation": 23, "user_id": 8877320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d5ef3ec854f52bee774522ab9969648?s=128&d=identicon&r=PG&f=1", "display_name": "CrescentStrike", "link": "https://stackoverflow.com/users/8877320/crescentstrike"}, "edited": false, "score": 0, "creation_date": 1538672664, "post_id": 52640696, "comment_id": 92235775, "body": "self.datasf[0] -&gt; [&#39;x&#39;, &#39;y&#39;, &#39;max&#39;],    self.datasf[0][0] -&gt; &#39;x&#39;"}], "tags": [], "owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "is_accepted": true, "score": 0, "last_activity_date": 1538635908, "creation_date": 1538635908, "answer_id": 52640696, "question_id": 52636230, "link": "https://stackoverflow.com/questions/52636230/how-do-i-go-back-to-the-main-class-after-jumping-to-another-one/52640696#52640696", "title": "How do I go back to the main Class after jumping to another one?", "body": "<p>Try replacing the <code>date_filter (self)</code> method in the <code>Test.py</code> module.</p>\n\n<pre><code>    def date_filter(self):\n##        self.main = Ui_MainWindow.setupUi(self, MainWindow)     # ---\n##        self.main.show()                                        # ---\n        date_text = str(date_select)\n        print(date_select)\n##        #self.label.setText(date_text)                          # ---\n        ui.label.setText(date_text)                               # +++\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/rxKGn.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rxKGn.jpg\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 23, "user_id": 8877320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d5ef3ec854f52bee774522ab9969648?s=128&d=identicon&r=PG&f=1", "display_name": "CrescentStrike", "link": "https://stackoverflow.com/users/8877320/crescentstrike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 52640696, "answer_count": 1, "score": -1, "last_activity_date": 1538635908, "creation_date": 1538603678, "last_edit_date": 1538605520, "question_id": 52636230, "link": "https://stackoverflow.com/questions/52636230/how-do-i-go-back-to-the-main-class-after-jumping-to-another-one", "title": "How do I go back to the main Class after jumping to another one?", "body": "<p>I am currently working on a GUI using Python 3.6 and PyQt5.</p>\n\n<p>With the menu bar i open a popup, but when it closes, it is stuck in the other class. How can I go back to my main class? I'm including some relevant pieces of my code. Everything works fine until I click the menu item and the popup opens, after I click on the date I want, it closes and I get errors like <code>MyPopup</code> object has no attribute '(atribute name)'</p>\n\n<pre><code>from PyQt5 import QtCore, QtGui, QtWidgets\nimport xlrd\nimport datetime\n\nclass Ui_MainWindow(QtWidgets.QWidget):\n    def setupUi(self, MainWindow):\n        MainWindow.setObjectName(\"MainWindow\")\n        MainWindow.setEnabled(True)\n        MainWindow.resize(1580, 1020)\n        MainWindow.setDockNestingEnabled(False)\n\n\n        import RAP_rc\n        icon = QtGui.QIcon()\n        icon.addPixmap(QtGui.QPixmap(\":/Register/logo2.png\"), QtGui.QIcon.Normal, QtGui.QIcon.Off)\n        MainWindow.setWindowIcon(icon)\n#        MainWindow.setWindowState(QtCore.Qt.WindowMaximized)\n        MainWindow.setWindowState(MainWindow.windowState() &amp; ~QtCore.Qt.WindowMinimized | QtCore.Qt.WindowActive)\n        MainWindow.setFocus(QtCore.Qt.PopupFocusReason)\n#        MainWindow.activateWindow()\n        MainWindow.raise_()\n        self.statusbar.showMessage('User: Test')\n        self.actionCargar_Archivo_Base.triggered.connect(self.getxlsbase)\n        self.actionCargar_Archivo_Facturacion.triggered.connect(self.getxlsfacturacion)\n        self.actionCargar_Archivo_Salesforce.triggered.connect(self.getxlssf)\n        self.actionSeleccionar_Fecha.triggered.connect(self.openPopUp)\n        if self.actionSeleccionar_Fecha.isChecked():\n            date_text = str(date_select)\n            print(date_select)\n            self.label.setText(date_text)\n\n    def openPopUp(self):\n        self.pop = MyPopup()\n        self.pop.show()\n\n    def date_filter(self):\n        self.main = Ui_MainWindow.setupUi(self, MainWindow)\n        self.main.show()\n        date_text = str(date_select)\n        print(date_select)\n        self.label.setText(date_text)\n\n\n\nclass MyPopup(QtWidgets.QWidget):\n    def __init__(self):\n        QtWidgets.QWidget.__init__(self)\n        import RAP_rc\n        icon = QtGui.QIcon()\n        icon.addPixmap(QtGui.QPixmap(\":/Register/logo2.png\"), QtGui.QIcon.Normal, QtGui.QIcon.Off)\n        self.setWindowIcon(icon)\n        self.setFixedSize(392, 241)\n        self.setWindowTitle('Fecha')\n        self.calendarWidget = QtWidgets.QCalendarWidget(self)\n        self.calendarWidget.setGeometry(QtCore.QRect(0, 0, 392, 241))\n        self.calendarWidget.setObjectName(\"calendarWidget\")\n        self.calendarWidget.clicked.connect(self.select_date)\n\n\n\n    def select_date(self):\n        global date_select\n        date_select=self.calendarWidget.selectedDate().toPyDate()\n        selected_month = date_select.month\n        selected_year = date_select.year\n        print('Month ', selected_month, '\\n', 'Year ', selected_year)\n        self.close()\n        Ui_MainWindow.date_filter(self)\n        return date_select\n\nif __name__ == \"__main__\":\n    import sys\n    app = QtWidgets.QApplication(sys.argv)\n    MainWindow = QtWidgets.QMainWindow()\n    ui = Ui_MainWindow()\n    ui.setupUi(MainWindow)\n    MainWindow.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>you can see the full code here\n<a href=\"https://github.com/liesugahara/Practicas/blob/master/Test\" rel=\"nofollow noreferrer\">https://github.com/liesugahara/Practicas/blob/master/Test</a></p>\n"}, {"tags": ["python", "while-loop", "prompt"], "comments": [{"owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 1, "creation_date": 1538603896, "post_id": 52636215, "comment_id": 92205661, "body": "you have to call isdigit: <code>s.isdigit()</code>."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1538603951, "post_id": 52636215, "comment_id": 92205674, "body": "You should check whether it&#39;s a digit first, instead of converting to an integer first."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1538603995, "post_id": 52636215, "comment_id": 92205688, "body": "<code>isdigit</code> isn&#39;t how you test whether a string represents an integer anyway. It rejects <code>&#39;-1&#39;</code>."}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1538604102, "post_id": 52636215, "comment_id": 92205720, "body": "You are converting <code>s</code> to string using <code>s = int(s)</code> and hence if you enter 1, you convert it from string to int. Now if you check int to be <code>isdigit()</code>, you will get an error. So better check <code>if str(s).isdigit()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1538604213, "post_id": 52636318, "comment_id": 92205765, "body": "Perhaps remove these unnecessary blank lines from your code"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "reply_to_user": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1538604264, "post_id": 52636318, "comment_id": 92205782, "body": "Blank lines are never necessary.  But I believe they make code more readable."}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1538604368, "post_id": 52636318, "comment_id": 92205814, "body": "Well places like before <code>else</code> makes it look not so good. Hardly in textbooks, github codes, tutorials you see such formatting. But yeah, it&#39;s a personal coding style."}], "tags": [], "owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "is_accepted": false, "score": 0, "last_activity_date": 1538604154, "creation_date": 1538604154, "answer_id": 52636318, "question_id": 52636215, "link": "https://stackoverflow.com/questions/52636215/invalid-literal-for-int-with-base-10-x-error-in-python/52636318#52636318", "title": "Invalid literal for int() with base 10: &#39;x&#39; error in Python?", "body": "<pre><code>def code_one(d, f):\n\n    while True:\n        answer = input('Enter a number between %d and %d: ' % (d, f))\n\n        try:\n            answer = int(answer)\n\n        except ValueError:\n            print('%s is not a number.  Please try again.' % answer)\n            continue\n\n        if d &lt;= answer &lt;= f:\n            return answer\n\n        else:\n            print('%d is out of range.  Please try again.' % answer)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10438801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b40fd1b561f7e3f2609d34b11ed19454?s=128&d=identicon&r=PG&f=1", "display_name": "vionigh", "link": "https://stackoverflow.com/users/10438801/vionigh"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 642, "favorite_count": 0, "closed_date": 1538604099, "answer_count": 1, "score": -3, "last_activity_date": 1538604154, "creation_date": 1538603606, "question_id": 52636215, "link": "https://stackoverflow.com/questions/52636215/invalid-literal-for-int-with-base-10-x-error-in-python", "closed_reason": "Duplicate", "title": "Invalid literal for int() with base 10: &#39;x&#39; error in Python?", "body": "<p>I'm working on a program that prompts a user for a number within a range of integers they've entered. If the number they enter is out of range, they're prompted to give another, and if they enter a letter instead they're prompted to change their answer as well. Here is what I've got:</p>\n\n<pre><code>def code_one(d, f):\n    s = input('Enter a number between' + str(d) + 'and' + str(f) + ': ')\n    s = int(s)\n    if int(d) &lt;= s &lt;= int(f):\n        return s\n    else:\n        while s &lt; int(d) or s &gt; int(f):\n            s = input(str(s) + 'is out of range. Please try again. ')\n            s = int(s)\n            if s &lt; int(d) or s &gt; int(f):\n                continue\n            else:\n                return s\n        while s.isdigit == False:\n            s = input(str(s) + 'is not a number. Please try again.' )\n            if s.isdigit == False:\n                continue\n            else:\n                return s\n</code></pre>\n\n<p>It works fine up until the line reading \"while s.isdigit == False:\" and then, if I input a letter instead of a number, I get the error \"invalid literal for int() with base 10: 'x'\", (the x being whatever letter I happen to enter). What can I do to fix this?</p>\n"}, {"tags": ["python", "docker", "ubuntu", "bokeh"], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 3386063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ad0e39812ee02719204b8fa37dd7941?s=128&d=identicon&r=PG&f=1", "display_name": "tkiral", "link": "https://stackoverflow.com/users/3386063/tkiral"}, "is_accepted": false, "score": 1, "last_activity_date": 1544743354, "last_edit_date": 1544743354, "creation_date": 1544666002, "answer_id": 53753963, "question_id": 52636205, "link": "https://stackoverflow.com/questions/52636205/run-detached-bokeh-server/53753963#53753963", "title": "Run Detached Bokeh Server", "body": "<p>You can use this line:</p>\n\n<pre><code>bokeh serve --show --allow-websocket-origin=localhost:5006 file_name.py\n</code></pre>\n\n<p>Put the following at the end of the dockerfile to run the command above and be able to access the app your trying to host:</p>\n\n<pre><code>CMD [\"bokeh\",\"serve\",\"--show\",\"--allow-websocket-origin=localhost:5006\",\"file_name.py\"]\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 3386063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ad0e39812ee02719204b8fa37dd7941?s=128&d=identicon&r=PG&f=1", "display_name": "tkiral", "link": "https://stackoverflow.com/users/3386063/tkiral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1544743354, "creation_date": 1538603548, "last_edit_date": 1538604918, "question_id": 52636205, "link": "https://stackoverflow.com/questions/52636205/run-detached-bokeh-server", "title": "Run Detached Bokeh Server", "body": "<p>I'm trying to run a bokeh server within a Docker container but bokeh doesn't allow me to enter commands while the server is running.  Is there a way to run the server detached so that I can enter other commands while the page is up?  I'm using a (slightly modified) ubuntu image with python3 for this container.</p>\n\n<p>If anyone happens to also know why I wouldn't be able to access the page from my host machine after exposing the ports that'd be even better-that's the larger issue I'm trying to solve.</p>\n"}, {"tags": ["python", "numba"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1538603826, "post_id": 52636191, "comment_id": 92205643, "body": "You don&#39;t seem to be doing anything to ensure proper synchronization between all the threads simultaneously updating the same cells of the same array."}, {"owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 1, "creation_date": 1538604778, "post_id": 52636191, "comment_id": 92205902, "body": "The algorithm is very inefficient. The two inner for-loops are unnecessary."}, {"owner": {"reputation": 580, "user_id": 3267763, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/29024606ac44660ff5f17369c1dc1f0d?s=128&d=identicon&r=PG&f=1", "display_name": "kgully", "link": "https://stackoverflow.com/users/3267763/kgully"}, "reply_to_user": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 0, "creation_date": 1538661523, "post_id": 52636191, "comment_id": 92229059, "body": "Good point from both of you. @Daniel thanks for pointing out the inefficiency - removing those inner loops got me about a 60x speedup which is more than parallelization can do anyways.  @user2357112 do you know of a way to make it thread-safe with numba? I tried <code>numba.config.THREADING_LAYER = &#39;threadsafe&#39;</code>, but that didn&#39;t help."}, {"owner": {"reputation": 951, "user_id": 9178179, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GlO7v4S0eNc/AAAAAAAAAAI/AAAAAAAAD74/sFdjjMIJOz0/photo.jpg?sz=128", "display_name": "Ankit Bindal", "link": "https://stackoverflow.com/users/9178179/ankit-bindal"}, "edited": false, "score": 0, "creation_date": 1603358577, "post_id": 52636191, "comment_id": 114014246, "body": "checkout <a href=\"https://github.com/numba/numba/issues/3681\" rel=\"nofollow noreferrer\">github.com/numba/numba/issues/3681</a>"}], "owner": {"reputation": 580, "user_id": 3267763, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/29024606ac44660ff5f17369c1dc1f0d?s=128&d=identicon&r=PG&f=1", "display_name": "kgully", "link": "https://stackoverflow.com/users/3267763/kgully"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1538603487, "creation_date": 1538603487, "question_id": 52636191, "link": "https://stackoverflow.com/questions/52636191/numba-prange-is-giving-the-wrong-result", "title": "numba prange is giving the wrong result", "body": "<p>While trying to use numba to speed up some code, I noticed that parallel execution is giving different (and wrong) results compared to serial. Consider this example:</p>\n\n<pre><code>import numba\n\n@numba.jit(nopython=True, parallel=False)\ndef get_nkj_serial(labels1, labels2, nunique_1, nunique_2):\n    labels1_uniques = np.arange(nunique_1)\n    labels2_uniques = np.arange(nunique_2)\n    n_kj = np.zeros((nunique_1, nunique_2))\n    for l in numba.prange(labels1.size):\n        l1, l2 = labels1[l], labels2[l]\n        for k, unique_1 in enumerate(labels1_uniques):\n\n            for j, unique_2 in enumerate(labels2_uniques):\n                if l2 == unique_2 and l1 == unique_1:\n                    n_kj[k, j] += 1\n    return n_kj\n\n@numba.jit(nopython=True, parallel=True)\ndef get_nkj_parallel(labels1, labels2, nunique_1, nunique_2):\n    labels1_uniques = np.arange(nunique_1)\n    labels2_uniques = np.arange(nunique_2)\n    n_kj = np.zeros((nunique_1, nunique_2))\n    for l in numba.prange(labels1.size):\n        l1, l2 = labels1[l], labels2[l]\n        for k, unique_1 in enumerate(labels1_uniques):\n\n            for j, unique_2 in enumerate(labels2_uniques):\n                if l2 == unique_2 and l1 == unique_1:\n                    n_kj[k, j] += 1\n    return n_kj\n\n\nlabels1 = np.random.randint(0, 20, size=1000000)\nlabels2 = np.random.randint(0, 10, size=labels1.size)\nnkj_serial = get_nkj_serial(labels1, labels2, 20, 10)\nnkj_parallel = get_nkj_parallel(labels1, labels2, 20, 10)\nprint(nkj_serial)\nprint('\\n')\nprint(nkj_parallel)\n</code></pre>\n\n<p>results in:</p>\n\n<pre><code>[[4974. 5088. 4973. 5002. 4870. 4890. 5056. 5090. 4851. 5069.]\n [5023. 5098. 4928. 5033. 5039. 4994. 5001. 4927. 5101. 4988.]\n [4945. 5028. 4845. 4819. 5053. 4983. 5072. 5100. 4884. 4989.]\n [5029. 5032. 4872. 4989. 4989. 5058. 4930. 5067. 4887. 5024.]\n [5012. 5006. 5045. 5003. 4942. 5124. 5036. 5145. 5004. 4929.]\n [5137. 5061. 5109. 5064. 4944. 5177. 4937. 5049. 5008. 5079.]\n [4889. 5086. 4888. 4956. 5107. 4983. 4979. 5008. 5004. 5098.]\n [4997. 5004. 4998. 5101. 4864. 4949. 5062. 5055. 5008. 5036.]\n [5087. 4953. 4972. 5022. 4889. 4816. 5017. 4947. 5011. 5054.]\n [5150. 4994. 5091. 4905. 5019. 4940. 4965. 5011. 5129. 4952.]\n [4934. 4912. 5019. 5171. 5070. 4950. 4956. 4889. 5063. 4949.]\n [5000. 4906. 4971. 4888. 5129. 4981. 4955. 4924. 4965. 4985.]\n [4985. 4979. 5034. 4970. 4935. 4824. 5074. 5005. 5047. 4897.]\n [5024. 4950. 5012. 5005. 5061. 4960. 5091. 4926. 5040. 5147.]\n [4943. 5070. 4984. 4899. 4948. 4904. 4972. 5015. 4928. 4979.]\n [5000. 4944. 5010. 4986. 4947. 5029. 5002. 5066. 4978. 5033.]\n [5013. 5146. 5021. 5061. 5079. 5087. 4971. 4995. 5020. 4958.]\n [5088. 4875. 4976. 4923. 5033. 5117. 5154. 5112. 4911. 4976.]\n [4961. 4908. 5027. 5093. 4993. 4980. 5099. 5018. 4932. 5092.]\n [5010. 4842. 4993. 5005. 5013. 5061. 4947. 4972. 4919. 5002.]]\n\n\n[[4573. 4685. 4605. 4629. 4517. 4560. 4650. 4706. 4436. 4639.]\n [4551. 4634. 4479. 4584. 4604. 4534. 4554. 4463. 4629. 4534.]\n [4515. 4570. 4411. 4394. 4585. 4522. 4568. 4602. 4469. 4528.]\n [4543. 4499. 4418. 4556. 4579. 4569. 4496. 4624. 4476. 4576.]\n [4527. 4521. 4603. 4517. 4500. 4652. 4547. 4644. 4574. 4458.]\n [4629. 4582. 4611. 4592. 4475. 4663. 4512. 4571. 4540. 4576.]\n [4445. 4619. 4462. 4493. 4612. 4493. 4467. 4519. 4520. 4628.]\n [4362. 4504. 4456. 4574. 4384. 4497. 4541. 4529. 4491. 4506.]\n [4533. 4429. 4435. 4468. 4351. 4305. 4498. 4422. 4495. 4520.]\n [4582. 4502. 4560. 4444. 4531. 4441. 4425. 4454. 4590. 4410.]\n [4409. 4385. 4503. 4561. 4565. 4462. 4443. 4396. 4515. 4451.]\n [4494. 4419. 4440. 4344. 4608. 4462. 4419. 4413. 4453. 4446.]\n [4505. 4518. 4548. 4490. 4443. 4387. 4527. 4387. 4565. 4461.]\n [4536. 4481. 4545. 4521. 4603. 4490. 4636. 4514. 2677. 4645.]\n [4503. 4611. 4520. 4462. 4509. 4500. 4526. 4570. 4485. 4538.]\n [4555. 4489. 4576. 4573. 4524. 4597. 4540. 4606. 4561. 4583.]\n [4547. 4658. 4582. 4604. 4610. 4638. 4506. 4564. 4587. 4565.]\n [4651. 4451. 4535. 4536. 4566. 4659. 4679. 4688. 4495. 4547.]\n [4535. 4479. 4608. 4591. 4565. 4571. 4659. 4617. 4509. 4674.]\n [4570. 4452. 4577. 4573. 4583. 4638. 4582. 4544. 4512. 4600.]]\n</code></pre>\n\n<p>As you can see, the result of the serial version is different from the parallel version. Is this a bug, or am I doing something wrong?</p>\n\n<p>I have <code>numba=0.39</code>, <code>llvmlite=0.24.0</code></p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1538604044, "post_id": 52636158, "comment_id": 92205702, "body": "That&#39;s floating point precision. Look at the output of <code>np.float32(168_000_001)</code>. You could use <code>float64</code> instead."}, {"owner": {"reputation": 1, "user_id": 10443441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f56f84ea8a07cb6bb10586ed34a0c555?s=128&d=identicon&r=PG&f=1", "display_name": "Ugo", "link": "https://stackoverflow.com/users/10443441/ugo"}, "reply_to_user": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1540155049, "post_id": 52636158, "comment_id": 92749039, "body": "Thank you Paul. Your suggestion solved the problem."}], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 7770696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2253a110a7e6b7eed231c763b071878?s=128&d=identicon&r=PG&f=1", "display_name": "nikhilbisht21", "link": "https://stackoverflow.com/users/7770696/nikhilbisht21"}, "is_accepted": false, "score": 0, "last_activity_date": 1538604461, "creation_date": 1538604461, "answer_id": 52636354, "question_id": 52636158, "link": "https://stackoverflow.com/questions/52636158/how-to-assign-column-values-in-large-numpy-array/52636354#52636354", "title": "How to assign column values in large numpy array?", "body": "<p>Maybe your program is consuming too much memory. Here is some basic math for your code.</p>\n\n<pre><code>Date type: float32\nBits used: 32 bits\nSize of array: 3288087180 (365343020*9)\nTotal memory consumed: 105218789760 bits(13.15234872 GB)\n</code></pre>\n\n<p>1.Try using float8 bit if value being stored in array is not large.<br>\n2.Try to decrease your array size.<br>\n3.Both 1 and 2</p>\n"}], "owner": {"reputation": 1, "user_id": 10443441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f56f84ea8a07cb6bb10586ed34a0c555?s=128&d=identicon&r=PG&f=1", "display_name": "Ugo", "link": "https://stackoverflow.com/users/10443441/ugo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1538604461, "creation_date": 1538603333, "question_id": 52636158, "link": "https://stackoverflow.com/questions/52636158/how-to-assign-column-values-in-large-numpy-array", "title": "How to assign column values in large numpy array?", "body": "<p>I am new to Python programming and I have a problem in assigning specific values to the first column of a very large numpy.array.</p>\n\n<p>This is the code I use:</p>\n\n<pre><code>import numpy as np\n\na = np.zeros ((365343020, 9), dtype = np.float32)\n\nfor n in range (0, 36534302):\n    a[n*10:(n+1)*10,0] = n\n</code></pre>\n\n<p>where the second row is where I create an array, of 365343020 rows and 9 columns, filled with zeros; while the successive \u201cfor\u201d is meant to replace the first column of the array with a vector whose elements are 36534302 sequential integers repeated 10 times each (eg [0,0,\u2026,0,1,1,\u2026,1,2,2,\u2026, 36534301, 36534301,\u2026, 36534301]).</p>\n\n<p>The code seems to respond as desired till around row 168000000 or the array, then it substitute the 10 repetitions of numbers with the last digit odd with a second repetition of the (even) number before.</p>\n\n<p>I have looked for explanations regarding the difference between views and copies. However, even trying to manually define the content of a specific cell of the array (where it is wrongly defined by the loop), it does not change.</p>\n\n<p>Could you please help me in solving this problem?\nThanks </p>\n"}, {"tags": ["python", "tensorflow", "keras", "tensorflow-datasets"], "comments": [{"owner": {"reputation": 1010, "user_id": 2823685, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/afcd78404c95b030ac21438321c0542f?s=128&d=identicon&r=PG&f=1", "display_name": "optimist", "link": "https://stackoverflow.com/users/2823685/optimist"}, "edited": false, "score": 0, "creation_date": 1566985379, "post_id": 52636127, "comment_id": 101823511, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/46135499/how-to-properly-combine-tensorflows-dataset-api-and-keras\">How to Properly Combine TensorFlow&#39;s Dataset API and Keras?</a>"}, {"owner": {"reputation": 1308, "user_id": 4332585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lUSzh.jpg?s=128&g=1", "display_name": "Zaccharie Ramzi", "link": "https://stackoverflow.com/users/4332585/zaccharie-ramzi"}, "edited": false, "score": 1, "creation_date": 1574341635, "post_id": 52636127, "comment_id": 104204441, "body": "Regarding why you need to pass <code>make_generator</code> rather than <code>train_generator</code>, the <a href=\"https://www.tensorflow.org/guide/data#consuming_python_generators\" rel=\"nofollow noreferrer\">docs explain it</a>: &quot;The constructor takes a callable as input, not an iterator. This allows it to restart the generator when it reaches the end. It takes an optional args argument, which is passed as the callable&#39;s arguments.&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 635, "user_id": 7656080, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f39035c7a7b7b04df0ce8f55fc5ada05?s=128&d=identicon&r=PG", "display_name": "siby", "link": "https://stackoverflow.com/users/7656080/siby"}, "edited": false, "score": 0, "creation_date": 1538685313, "post_id": 52649515, "comment_id": 92240897, "body": "Thank, you for the suggestion. It works and I able to get out output. However, when I feed train_dataset to model.fit(), it gives another error. I will update the original post with the new error."}], "tags": [], "owner": {"reputation": 991, "user_id": 4606149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c73bd95e9842fb8827a52358d359b691?s=128&d=identicon&r=PG&f=1", "display_name": "J.E.K", "link": "https://stackoverflow.com/users/4606149/j-e-k"}, "is_accepted": false, "score": 2, "last_activity_date": 1538664101, "creation_date": 1538664101, "answer_id": 52649515, "question_id": 52636127, "link": "https://stackoverflow.com/questions/52636127/how-to-use-keras-generator-with-tf-data-api/52649515#52649515", "title": "How to use Keras generator with tf.data API", "body": "<p>I have tried to reproduce your results with a simple example and I found out that you get different output shapes when one uses batching within the generator function and <code>tf.data</code>.</p>\n\n<p>The Keras function <code>train_datagen.flow_from_directory(batch_size=32)</code> already returns the data with shape <code>[batch_size, width, height, depth]</code>. If one uses <code>tf.data.Dataset().batch(32)</code> the output data is batched again into shape <code>[batch_size, batch_size, width, height, depth]</code>.</p>\n\n<p>This could have caused your issue for some reason.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 3387851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x6sEN.jpg?s=128&g=1", "display_name": "Adnan Fiaz", "link": "https://stackoverflow.com/users/3387851/adnan-fiaz"}, "is_accepted": false, "score": 1, "last_activity_date": 1554384047, "creation_date": 1554384047, "answer_id": 55517035, "question_id": 52636127, "link": "https://stackoverflow.com/questions/52636127/how-to-use-keras-generator-with-tf-data-api/55517035#55517035", "title": "How to use Keras generator with tf.data API", "body": "<p>Shouldn't </p>\n\n<pre><code>model_regular.fit(train_dataset,steps_per_epoch=1000,epochs=2)\n</code></pre>\n\n<p>be </p>\n\n<pre><code>model_regular.fit(train_dataset.make_one_shot_iterator(),steps_per_epoch=1000,epochs=2)\n</code></pre>\n\n<p>as per <a href=\"https://stackoverflow.com/a/48134765/3387851\">this answer</a>.</p>\n"}], "owner": {"reputation": 635, "user_id": 7656080, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f39035c7a7b7b04df0ce8f55fc5ada05?s=128&d=identicon&r=PG", "display_name": "siby", "link": "https://stackoverflow.com/users/7656080/siby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2992, "favorite_count": 3, "answer_count": 2, "score": 4, "last_activity_date": 1615021164, "creation_date": 1538603158, "last_edit_date": 1538685857, "question_id": 52636127, "link": "https://stackoverflow.com/questions/52636127/how-to-use-keras-generator-with-tf-data-api", "title": "How to use Keras generator with tf.data API", "body": "<p>I am trying to use the generator found in Keras preprocessing library. I wanted to experiment with this since Keras provides great functions for image augmentation. However, I am not sure if this is actually possible. </p>\n\n<p>Here is how I made a tf dataset from the Keras generator:</p>\n\n<pre><code>def make_generator():\n    train_datagen = ImageDataGenerator(rescale=1. / 255)\n    train_generator = \n    train_datagen.flow_from_directory(train_dataset_folder,target_size=(224, 224), class_mode='categorical', batch_size=32)\n    return train_generator\n\ntrain_dataset = tf.data.Dataset.from_generator(make_generator,(tf.float32, tf.float32)).shuffle(64).repeat().batch(32)\n</code></pre>\n\n<p>Note that if you try to directly give <code>train_generator</code> as the argument to <code>tf.data.Dataset.from_generator</code> there will be an error. However, the above method doesn't produce an error.</p>\n\n<p>When I run it within a session to check the output from the dataset I get the following error.</p>\n\n<pre><code>iterator = train_dataset.make_one_shot_iterator()\nnext_element = iterator.get_next()\nsess = tf.Session()\nfor i in range(100):\n    sess.run(next_element)\n</code></pre>\n\n<blockquote>\n  <p>Found 1000 images belonging to 2 classes.\n  --------------------------------------------------------------------------- InvalidArgumentError                      Traceback (most recent call\n  last)\n  /usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py\n  in _do_call(self, fn, *args)    1291     try:\n  -> 1292       return fn(*args)    1293     except errors.OpError as e:</p>\n  \n  <p>/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py\n  in _run_fn(feed_dict, fetch_list, target_list, options, run_metadata) \n  1276       return self._call_tf_sessionrun(\n  -> 1277           options, feed_dict, fetch_list, target_list, run_metadata)    1278 </p>\n  \n  <p>/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py\n  in _call_tf_sessionrun(self, options, feed_dict, fetch_list,\n  target_list, run_metadata)    1366         self._session, options,\n  feed_dict, fetch_list, target_list,\n  -> 1367         run_metadata)    1368 </p>\n  \n  <p>InvalidArgumentError: Cannot batch tensors with different shapes in\n  component 0. First element had shape [32,224,224,3] and element 29 had\n  shape [8,224,224,3].   [[{{node IteratorGetNext_2}} =\n  IteratorGetNextoutput_shapes=[, ],\n  output_types=[DT_FLOAT, DT_FLOAT],\n  _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"]]</p>\n  \n  <p>During handling of the above exception, another exception occurred:</p>\n</blockquote>\n\n<p>Please let me know if anyone has any experience with this or know any alternate way.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I was able to solve the problem after using the suggestion by J.E.K.</p>\n\n<pre><code>train_dataset = tf.data.Dataset.from_generator(make_generator,(tf.float32, tf.float32))\n</code></pre>\n\n<p>However when I give <code>train_dataset</code> to a Keras <code>.fit</code> method I get the following error.</p>\n\n<pre><code>model_regular.fit(train_dataset,steps_per_epoch=1000,epochs=2)\n</code></pre>\n\n<blockquote>\n  <p>--------------------------------------------------------------------------- ValueError                                Traceback (most recent call\n  last)  in ()\n  ----> 1 model_regular.fit(train_dataset,steps_per_epoch=1000,epochs=2)</p>\n  \n  <p>/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/engine/training.py\n  in fit(self, x, y, batch_size, epochs, verbose, callbacks,\n  validation_split, validation_data, shuffle, class_weight,\n  sample_weight, initial_epoch, steps_per_epoch, validation_steps,\n  **kwargs)    1507         steps_name='steps_per_epoch',    1508         steps=steps_per_epoch,\n  -> 1509         validation_split=validation_split)    1510     1511     # Prepare validation data.</p>\n  \n  <p>/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/engine/training.py\n  in _standardize_user_data(self, x, y, sample_weight, class_weight,\n  batch_size, check_steps, steps_name, steps, validation_split)\n      948           x = self._dataset_iterator_cache[x]\n      949         else:\n  --> 950           iterator = x.make_initializable_iterator()\n      951           self._dataset_iterator_cache[x] = iterator\n      952           x = iterator</p>\n  \n  <p>/usr/local/lib/python3.6/dist-packages/tensorflow/python/data/ops/dataset_ops.py\n  in make_initializable_iterator(self, shared_name)\n      119     with ops.colocate_with(iterator_resource):\n      120       initializer = gen_dataset_ops.make_iterator(self._as_variant_tensor(),\n  --> 121                                                   iterator_resource)\n      122     return iterator_ops.Iterator(iterator_resource, initializer,\n      123                                  self.output_types, self.output_shapes,</p>\n  \n  <p>/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/gen_dataset_ops.py\n  in make_iterator(dataset, iterator, name)    2542   if _ctx is None or\n  not _ctx._eager_context.is_eager:    2543     _, _, _op =\n  _op_def_lib._apply_op_helper(\n  -> 2544         \"MakeIterator\", dataset=dataset, iterator=iterator, name=name)    2545     return _op    2546     _result = None</p>\n  \n  <p>/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/op_def_library.py\n  in _apply_op_helper(self, op_type_name, name, **keywords)\n      348       # Need to flatten all the arguments into a list.\n      349       # pylint: disable=protected-access\n  --> 350       g = ops._get_graph_from_inputs(_Flatten(keywords.values()))\n      351       # pylint: enable=protected-access\n      352     except AssertionError as e:</p>\n  \n  <p>/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/ops.py\n  in _get_graph_from_inputs(op_input_list, graph)    5659         graph\n  = graph_element.graph    5660       elif original_graph_element is not None:\n  -> 5661         _assert_same_graph(original_graph_element, graph_element)    5662       elif graph_element.graph is not graph:<br>\n  5663         raise ValueError(\"%s is not from the passed-in graph.\" %\n  graph_element)</p>\n  \n  <p>/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/ops.py\n  in _assert_same_graph(original_item, item)    5595   if\n  original_item.graph is not item.graph:    5596     raise\n  ValueError(\"%s must be from the same graph as %s.\" % (item,\n  -> 5597                                                                 original_item))    5598     5599 </p>\n  \n  <p>ValueError: Tensor(\"IteratorV2:0\", shape=(), dtype=resource) must be\n  from the same graph as Tensor(\"FlatMapDataset:0\", shape=(),\n  dtype=variant).</p>\n</blockquote>\n\n<p>Is this a bug or is Keras fit method not meant to be used this way?</p>\n"}, {"tags": ["python", "snakemake"], "comments": [{"owner": {"reputation": 1489, "user_id": 512111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5f1d712b8bb45a9aed6b3989c4f2e9?s=128&d=identicon&r=PG", "display_name": "j08lue", "link": "https://stackoverflow.com/users/512111/j08lue"}, "edited": false, "score": 0, "creation_date": 1559287969, "post_id": 52636101, "comment_id": 99380250, "body": "<code>temp</code> does work for outputs containing wildcards."}], "answers": [{"tags": [], "owner": {"reputation": 351, "user_id": 3294994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a2893f25dd0c578a608df6d98665d5cb?s=128&d=identicon&r=PG", "display_name": "obk", "link": "https://stackoverflow.com/users/3294994/obk"}, "is_accepted": false, "score": 0, "last_activity_date": 1538608197, "last_edit_date": 1538608197, "creation_date": 1538603279, "answer_id": 52636147, "question_id": 52636101, "link": "https://stackoverflow.com/questions/52636101/snakemake-rule-to-delete-file/52636147#52636147", "title": "snakemake rule to delete file", "body": "<p>EDIT: Actually, this solution doesn't work.. it results in race condition...</p>\n\n<hr>\n\n<p>Ok, I figured it out...</p>\n\n<pre><code>rule a:\n    input: '{path}.csv'\n    output: '{path}.a.csv'\n    shell: 'cp {input} {output}'\nrule b:\n    input: '{path}.csv'\n    output: '{path}.b.csv'\n    shell: 'cp {input} {output}'\nrule c:\n    input: '{path}.csv'\n    output: '{path}.c.csv'\n    shell: 'cp {input} {output}'\nrule d:\n    input: '{path}.csv'\n    output: '{path}.d.csv'\n    shell: 'cp {input} {output}'\nrule remove:                          # &lt;-- rule to delete a file\n    input: '{path}'\n    output: touch('{path}.removed')\n    shell: 'rm {input}'\nrule all:\n    input: 'raw1.a.b.c.a.d.csv',\n           'raw2.a.b.c.d.a.csv',\n           'raw1.a.csv.removed',      # &lt;-- specify which files to rm\n           'raw2.a.b.c.csv.removed',  # &lt;-- specify which files to rm\n</code></pre>\n\n<p>and here's the dag:</p>\n\n<pre><code>$ snakemake --dag all | dot -Tpng &gt; dag.png\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/LIPq4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LIPq4.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 3263, "user_id": 3998252, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e12ce9e892926492f5436f0466e5e573?s=128&d=identicon&r=PG&f=1", "display_name": "Manavalan Gajapathy", "link": "https://stackoverflow.com/users/3998252/manavalan-gajapathy"}, "is_accepted": false, "score": 1, "last_activity_date": 1538606047, "creation_date": 1538606047, "answer_id": 52636580, "question_id": 52636101, "link": "https://stackoverflow.com/questions/52636101/snakemake-rule-to-delete-file/52636580#52636580", "title": "snakemake rule to delete file", "body": "<p><code>temp()</code> does work in this scenario.</p>\n\n<pre><code>rule all:\n    input: 'raw1.a.b.c.a.d.csv',\n        'raw2.a.b.c.d.a.csv'\n\nrule a:\n    input: '{path}.csv'\n    output: temp('{path}.a.csv')\n    shell: 'cp {input} {output}'\nrule b:\n    input: '{path}.csv'\n    output: '{path}.b.csv'\n    shell: 'cp {input} {output}'\nrule c:\n    input: '{path}.csv'\n    output: temp('{path}.c.csv')\n    shell: 'cp {input} {output}'\nrule d:\n    input: '{path}.csv'\n    output: '{path}.d.csv'\n    shell: 'cp {input} {output}'\n</code></pre>\n\n<p>Executing this would result in creation of files <code>raw1.a.b.c.a.d.csv , raw1.a.b.csv, raw2.a.b.c.d.csv, raw2.a.b.csv</code> and auto-deletion of files <code>raw1.a.csv, raw2.a.csv, raw1.a.b.c.csv, raw2.a.b.c.csv, raw1.a.b.c.a.csv, raw2.a.b.c.d.a.csv</code>.</p>\n"}], "owner": {"reputation": 351, "user_id": 3294994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a2893f25dd0c578a608df6d98665d5cb?s=128&d=identicon&r=PG", "display_name": "obk", "link": "https://stackoverflow.com/users/3294994/obk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 515, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1538608197, "creation_date": 1538603022, "question_id": 52636101, "link": "https://stackoverflow.com/questions/52636101/snakemake-rule-to-delete-file", "title": "snakemake rule to delete file", "body": "<p>I have a large snakemake file that looks like this (after simplifying a lot).</p>\n\n<pre><code>rule a:\n    input: '{path}.csv'\n    output: '{path}.a.csv'\n    shell: 'cp {input} {output}'\nrule b:\n    input: '{path}.csv'\n    output: '{path}.b.csv'\n    shell: 'cp {input} {output}'\nrule c:\n    input: '{path}.csv'\n    output: '{path}.c.csv'\n    shell: 'cp {input} {output}'\nrule d:\n    input: '{path}.csv'\n    output: '{path}.d.csv'\n    shell: 'cp {input} {output}'\nrule all:\n    input: 'raw1.a.b.c.a.d.csv',\n           'raw2.a.b.c.d.a.csv'\n</code></pre>\n\n<p>(This setup lets me use rules like functions, by chaining their filename suffixes in the <code>all</code> rule.)</p>\n\n<p>Starting state:</p>\n\n<pre><code>$ ls -tr1\nSnakefile\nraw1.csv\nraw2.csv\n\n$ snakemake all\n...\n</code></pre>\n\n<p>After:</p>\n\n<pre><code>$ ls -tr1\nSnakefile\nraw1.csv\nraw2.csv\nraw2.a.csv\nraw2.a.b.csv\nraw2.a.b.c.csv\nraw2.a.b.c.d.csv\nraw1.a.csv\nraw1.a.b.csv\nraw1.a.b.c.csv\nraw1.a.b.c.a.csv\nraw1.a.b.c.a.d.csv\nraw2.a.b.c.d.a.csv\n</code></pre>\n\n<p>Now, I'd like to <em>add</em> a rule that deletes specific intermediate files (for example <code>raw1.a.csv</code> and <code>raw2.a.b.csv</code>) because I don't need them and they take up a lot of disk space. I can't mark the outputs with <code>temp()</code> because of the wildcard <code>{path}</code>.</p>\n\n<p>Any tips? Thanks.</p>\n"}, {"tags": ["python", "pycharm"], "comments": [{"owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "edited": false, "score": 0, "creation_date": 1538603503, "post_id": 52636098, "comment_id": 92205538, "body": "Have you tried with PyCharm 2018.2?"}], "answers": [{"tags": [], "owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "is_accepted": true, "score": 2, "last_activity_date": 1538626864, "creation_date": 1538626864, "answer_id": 52638953, "question_id": 52636098, "link": "https://stackoverflow.com/questions/52636098/setting-the-project-interpreter-in-pycharm-to-python-3-7-causes-spurious-code-in/52638953#52638953", "title": "Setting the project interpreter in PyCharm to Python 3.7 causes spurious code incompatibility messages about Python 3.5", "body": "<p>I think PyCharm 2017.2 is too old and you should use PyCharm 2018.2. That old version was published before Python 3.7, so you may encounter troubles\u2026</p>\n"}], "owner": {"reputation": 13367, "user_id": 2084384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h5lY8.jpg?s=128&g=1", "display_name": "BoarGules", "link": "https://stackoverflow.com/users/2084384/boargules"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 466, "favorite_count": 0, "accepted_answer_id": 52638953, "answer_count": 1, "score": 2, "last_activity_date": 1538626864, "creation_date": 1538602993, "question_id": 52636098, "link": "https://stackoverflow.com/questions/52636098/setting-the-project-interpreter-in-pycharm-to-python-3-7-causes-spurious-code-in", "title": "Setting the project interpreter in PyCharm to Python 3.7 causes spurious code incompatibility messages about Python 3.5", "body": "<p>PyCharm 2017.2 highlights my <code>f</code>-strings with the message <em>Python version 3.5 does not support a 'F' prefix</em>.</p>\n\n<p>But...</p>\n\n<ul>\n<li>In File | Settings | Editor | Inspections, <em>Code compatibility inspection</em> is unchecked, both for Default (stored in IDE) and for Project Default (stored in project). (I have seen other questions where the answer was about this point. Not applicable here.)</li>\n<li>Even if I turn <em>Code compatibility inspection</em> on and check only Python 3.6, I still get the message about Python 3.5.</li>\n<li>File | Invalidate Caches / Restart fixes it briefly, until the <em>Indexing</em> message goes away, then it comes back.</li>\n<li>I don't have Python 3.5 installed (only 2.7, 3.6 and 3.7). Python 3.7 is set as the project interpreter.</li>\n<li>This behaviour is new, since I started using Python 3.7 for real. If I change the interpreter back to Python 3.6 it goes away. I don't regard that as a useful workaround.</li>\n</ul>\n\n<p>Either this is a bug I should report, or I am missing something that should be obvious. Anyone care to tell me which it is?</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1538603082, "post_id": 52636096, "comment_id": 92205395, "body": "You have two very different questions, which you should consider asking separately."}, {"owner": {"reputation": 967, "user_id": 2618563, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/Z8ILJ.jpg?s=128&g=1", "display_name": "Ashkan Kazemi", "link": "https://stackoverflow.com/users/2618563/ashkan-kazemi"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1538603490, "post_id": 52636096, "comment_id": 92205533, "body": "Sure, so I&#39;ll just ask the one that I really care about."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1538603912, "post_id": 52636096, "comment_id": 92205665, "body": "I&#39;m glad that&#39;s the one you chose. Everything you do in numpy for something this simple is going to be ok, but efficiency is very difficult to demonstrate universally."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1538604092, "post_id": 52636096, "comment_id": 92205716, "body": "Gotta say, excellent response time and clarity. Very nice to see that from someone calling themselves fairly new."}, {"owner": {"reputation": 967, "user_id": 2618563, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/Z8ILJ.jpg?s=128&g=1", "display_name": "Ashkan Kazemi", "link": "https://stackoverflow.com/users/2618563/ashkan-kazemi"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1538604142, "post_id": 52636096, "comment_id": 92205734, "body": "Thanks :) I said I was a beginner in numpy, not in general LOL"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1538607245, "post_id": 52636096, "comment_id": 92206517, "body": "I see. It shows."}], "answers": [{"comments": [{"owner": {"reputation": 43423, "user_id": 1011724, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/2JAXi.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1011724/dan"}, "edited": false, "score": 0, "creation_date": 1538603585, "post_id": 52636138, "comment_id": 92205571, "body": "You can also just add <code>1</code> to get the <code>1</code>s and <code>2</code>s of the original"}, {"owner": {"reputation": 967, "user_id": 2618563, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/Z8ILJ.jpg?s=128&g=1", "display_name": "Ashkan Kazemi", "link": "https://stackoverflow.com/users/2618563/ashkan-kazemi"}, "edited": false, "score": 0, "creation_date": 1538603640, "post_id": 52636138, "comment_id": 92205585, "body": "I want the data in 1s and 2s, and this returns a 2D boolean array."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 967, "user_id": 2618563, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/Z8ILJ.jpg?s=128&g=1", "display_name": "Ashkan Kazemi", "link": "https://stackoverflow.com/users/2618563/ashkan-kazemi"}, "edited": false, "score": 1, "creation_date": 1538603831, "post_id": 52636138, "comment_id": 92205646, "body": "@Ashkan. Updated"}], "tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": true, "score": 1, "last_activity_date": 1538604045, "last_edit_date": 1538604045, "creation_date": 1538603231, "answer_id": 52636138, "question_id": 52636096, "link": "https://stackoverflow.com/questions/52636096/numpy-inline-2d-array-manipulation/52636138#52636138", "title": "NumPy Inline 2D Array Manipulation", "body": "<p>Use broadcasting:</p>\n\n<pre><code>x = (x &lt;= np.median(x, axis=0))\n</code></pre>\n\n<p>The result will be a boolean array of zeros and ones. This wouldn't work, by the way, if you tried it with <code>axis=1</code>, because broadcasting matches axes from the right. Instead, you would have to insert a placeholder for the reduced axis, e.g. like this:</p>\n\n<pre><code>x = (x &lt;= np.median(x, axis=1)[..., np.newaxis])\n</code></pre>\n\n<p>An even more general approach would be</p>\n\n<pre><code>x = (x &lt;= np.median(x, axis=&lt;whatever&gt;, keepdims=True))\n</code></pre>\n\n<p>Since booleans are technically a subclass of integers in Python, and numpy honors that convention, you can get a mask with ones and twos instead of zeros and ones by adding one to the result, however you choose to compute it:</p>\n\n<pre><code>x = ... + 1\n</code></pre>\n"}], "owner": {"reputation": 967, "user_id": 2618563, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/Z8ILJ.jpg?s=128&g=1", "display_name": "Ashkan Kazemi", "link": "https://stackoverflow.com/users/2618563/ashkan-kazemi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 52636138, "answer_count": 1, "score": 0, "last_activity_date": 1538604045, "creation_date": 1538602986, "last_edit_date": 1538603971, "question_id": 52636096, "link": "https://stackoverflow.com/questions/52636096/numpy-inline-2d-array-manipulation", "title": "NumPy Inline 2D Array Manipulation", "body": "<p>How can we do the following operation in one line only in numpy?</p>\n\n<pre><code>medians = np.median(x, axis=0)\n\nfor i in range(0, len(x)): # transforming input data to binary values\n    for j in range(0, len(x[i])):\n        x[i][j] = 1 if x[i][j] &lt;= medians[j] else 2\n</code></pre>\n\n<p>What it does is to transform this feature vector into binary values based on the values of the median for that dimension of data.</p>\n"}, {"tags": ["python", "pandas", "dictionary", "dataframe", "any"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1538603695, "post_id": 52636092, "comment_id": 92205603, "body": "Why is <code>Green Apple</code> not replaced with <code>Apple</code>?"}, {"owner": {"reputation": 43, "user_id": 10409272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f118ff844734cbe0c223436405f988d?s=128&d=identicon&r=PG&f=1", "display_name": "B. Kristina", "link": "https://stackoverflow.com/users/10409272/b-kristina"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1538603735, "post_id": 52636092, "comment_id": 92205614, "body": "i just gave an example of what i want"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1538603772, "post_id": 52636092, "comment_id": 92205623, "body": "Yes, and I&#39;m asking why you don&#39;t change <code>Green Apple</code> to <code>Apple</code>, but you <i>do</i> change <code>Black Banana</code> to <code>Banana</code> in your output above"}, {"owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "edited": false, "score": 0, "creation_date": 1538603820, "post_id": 52636092, "comment_id": 92205640, "body": "Does my answer include your desired output? If not, can you clarify what your complete desired output is?"}], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 10365609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXPGi.jpg?s=128&g=1", "display_name": "JLuxton", "link": "https://stackoverflow.com/users/10365609/jluxton"}, "edited": false, "score": 1, "creation_date": 1538604500, "post_id": 52636226, "comment_id": 92205842, "body": "\u2018apply()\u2019 will be most efficient if dealing with larger dataframes."}, {"owner": {"reputation": 43, "user_id": 10409272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f118ff844734cbe0c223436405f988d?s=128&d=identicon&r=PG&f=1", "display_name": "B. Kristina", "link": "https://stackoverflow.com/users/10409272/b-kristina"}, "edited": false, "score": 0, "creation_date": 1538604535, "post_id": 52636226, "comment_id": 92205852, "body": "@rahlf23 tnx, it works for the dataframe and dictionary i&#39;ve gave as example, now i&#39;ve tried to do this with another one, and there is a problem:   the new dictionary <code>states = {&#39;OH&#39;: &#39;Ohio&#39;, &#39;KY&#39;: &#39;Kentucky&#39;, &#39;AS&#39;: &#39;American Samoa&#39;, &#39;NV&#39;: &#39;Nevada&#39;...} </code> and a dataframe with columns ` State and Region` the state also contains few words that i want to replace with one word. when i copied your code and only changed the variables it gives me a mistake: <code>----&gt; 5     return [k for k in states.values() if k in x][0] IndexError: list index out of range</code>  when i deleted the <code>[0]</code>"}, {"owner": {"reputation": 43, "user_id": 10409272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f118ff844734cbe0c223436405f988d?s=128&d=identicon&r=PG&f=1", "display_name": "B. Kristina", "link": "https://stackoverflow.com/users/10409272/b-kristina"}, "edited": false, "score": 0, "creation_date": 1538604633, "post_id": 52636226, "comment_id": 92205868, "body": "@rahlf23 when i deleted the <code>[0]</code> it gives me a &quot;good&quot; dataframe but with the next problems: `\tState\tRegionName 0\t[]\tAuburn 1\t[Alabama]\tFlorence 2\t[]\tJacksonville 3\t[Alabama]\tLivingston 4\t[]\tMontevallo 5\t[]\tTroy 6\t[Alabama]\tTuscaloosa 7\t[]\tTuskegee 8\t[Alaska]\tFairbanks 9\t[Arizona]\tFlagstaff` as you can see it skips some of the values and added &quot;[]&quot; to all the others"}, {"owner": {"reputation": 43, "user_id": 10409272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f118ff844734cbe0c223436405f988d?s=128&d=identicon&r=PG&f=1", "display_name": "B. Kristina", "link": "https://stackoverflow.com/users/10409272/b-kristina"}, "reply_to_user": {"reputation": 329, "user_id": 10365609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXPGi.jpg?s=128&g=1", "display_name": "JLuxton", "link": "https://stackoverflow.com/users/10365609/jluxton"}, "edited": false, "score": 0, "creation_date": 1538604697, "post_id": 52636226, "comment_id": 92205882, "body": "@JLuxton  the one that i use is much bigger, i just practised with small one =)"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "reply_to_user": {"reputation": 329, "user_id": 10365609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXPGi.jpg?s=128&g=1", "display_name": "JLuxton", "link": "https://stackoverflow.com/users/10365609/jluxton"}, "edited": false, "score": 0, "creation_date": 1538605142, "post_id": 52636226, "comment_id": 92205999, "body": "@JLuxton <code>apply</code> will almost certainly be slower for larger dataframes than other options.  <i>Especially</i> since this is an O(n*k) solution.  You&#39;d have better luck with a list comprehension, even <code>[find_category(x) for x in df.Fruit]</code> would be vastly more performant, but the algorithm itself will bottleneck performance at that point"}, {"owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "reply_to_user": {"reputation": 43, "user_id": 10409272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f118ff844734cbe0c223436405f988d?s=128&d=identicon&r=PG&f=1", "display_name": "B. Kristina", "link": "https://stackoverflow.com/users/10409272/b-kristina"}, "edited": false, "score": 1, "creation_date": 1538606683, "post_id": 52636226, "comment_id": 92206387, "body": "@B.Kristina This solution will return <code>[]</code> if there are no exact matches in the values of your dictionary. The reason for the <code>[0]</code> is to return the first match (as I am assuming that your values will be unique and not be valid for multiple keys). If you remove <code>[0]</code>, then it will return the list of keys that contained that value."}], "tags": [], "owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "is_accepted": false, "score": 2, "last_activity_date": 1538603675, "creation_date": 1538603675, "answer_id": 52636226, "question_id": 52636092, "link": "https://stackoverflow.com/questions/52636092/find-a-value-of-a-dictionary-in-dataframe-column-and-modify-it/52636226#52636226", "title": "Find a value of a dictionary in dataframe column and modify it", "body": "<p>IIUC, you can use <code>apply()</code> with a custom function:</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame([['Sweet Mango', 1],['Green Apple', 2],['Few blue Banana', 0],['Black Banana', 5]],\n  columns=['Fruit','Price'])\n\nfruits = {'BN':'Banana', 'LM': 'Lemon', 'AP':'Apple', 'MG': 'Mango'}\n\ndef find_category(x):\n\n  return [k for k in fruits.values() if k in x][0]\n\ndf['Fruit'] = df['Fruit'].apply(find_category)\n</code></pre>\n\n<p>Yields:</p>\n\n<pre><code>    Fruit  Price\n0   Mango      1\n1   Apple      2\n2  Banana      0\n3  Banana      5\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1538603868, "post_id": 52636250, "comment_id": 92205658, "body": "Or just <code>df.Fruit.str.extract(pat).fillna(df.Fruit)</code>.  You also don&#39;t need to specify the <code>expand=False</code>, because you only have a single capture group"}], "tags": [], "owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "is_accepted": true, "score": 2, "last_activity_date": 1538604042, "last_edit_date": 1538604042, "creation_date": 1538603785, "answer_id": 52636250, "question_id": 52636092, "link": "https://stackoverflow.com/questions/52636092/find-a-value-of-a-dictionary-in-dataframe-column-and-modify-it/52636250#52636250", "title": "Find a value of a dictionary in dataframe column and modify it", "body": "<p>Use string methods for condition and extracting required values,</p>\n\n<pre><code>pat = r'({})'.format('|'.join(d.values()))\ncond = df['Fruit'].str.contains('|'.join(d.values()))\ndf.loc[cond, 'Fruit'] = df['Fruit'].str.extract((pat), expand = False)\n\n    Fruit       Price\n0   Sweet Mango 1\n1   Apple       2\n2   Banana      0\n3   Banana      5\n</code></pre>\n\n<p>Edit: As @user3483203 suggested, you can fill the missing values with original once the pattern is extracted.</p>\n\n<pre><code>df['Fruit'] = df['Fruit'].str.extract(pat).fillna(df.Fruit)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3891, "user_id": 4585713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0163e6ba41d9dfd2c9d13c528c87e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "PMende", "link": "https://stackoverflow.com/users/4585713/pmende"}, "is_accepted": false, "score": 0, "last_activity_date": 1538607676, "last_edit_date": 1538607676, "creation_date": 1538605200, "answer_id": 52636479, "question_id": 52636092, "link": "https://stackoverflow.com/questions/52636092/find-a-value-of-a-dictionary-in-dataframe-column-and-modify-it/52636479#52636479", "title": "Find a value of a dictionary in dataframe column and modify it", "body": "<p>Using the results of the answer <a href=\"https://stackoverflow.com/questions/2912231/is-there-a-clever-way-to-pass-the-key-to-defaultdicts-default-factory\">here</a>, we create a new class that subclasses <code>defaultdict</code>, and override its <code>__missing__</code> attribute to allow for passing the key to the <code>default_factory</code>:</p>\n\n<pre><code>from collections import defaultdict\nclass keydefaultdict(defaultdict):\n    def __missing__(self, key):\n        if self.default_factory is None:\n            raise KeyError(key)\n        else:\n            ret = self[key] = self.default_factory(key)\n            return ret\n</code></pre>\n\n<p>We create an initial dictionary that maps the 2 values in the <code>'Fruits'</code> column we want to replace.</p>\n\n<pre><code>fruit_dict = {'Few blue Banana': 'Banana', 'Black Banana': 'Banana'}\n</code></pre>\n\n<p>Then we create a new instance of our class with a <code>default_factory</code> of <code>lambda x: x</code>. I.e., if we don't find the key when we search for it, put the key in as the value.</p>\n\n<pre><code>fruit_col_map = keydefaultdict(lambda x: x)\nfruit_col_map.update(**fruit_dict)\n</code></pre>\n\n<p>Finally, update the column:</p>\n\n<pre><code>df['Fruit'] = df['Fruit'].map(fruit_col_map)\ndf\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>         Fruit  Price\n0  Sweet Mango      1\n1  Green Apple      2\n2       Banana      0\n3       Banana      5\n</code></pre>\n\n<p>Comparing to the accepted answer, this is more than 6 times faster:</p>\n\n<pre><code>df = pd.DataFrame({\n    'Fruit': ['Sweet Mango', 'Green Apple', 'Few blue Banana', 'Black Banana']*1000,\n    'Price': [1, 2, 0, 5]*1000\n})\n%timeit df['Fruit'].map(fruit_col_map)\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>1.03 ms \u00b1 48.5 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n</code></pre>\n\n<p>Accepted answer:</p>\n\n<pre><code>pat = r'({})'.format('|'.join(fruit_dict.values()))\n%timeit df['Fruit'].str.extract(pat).fillna(df['Fruit'])\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>6.85 ms \u00b1 223 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 10409272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f118ff844734cbe0c223436405f988d?s=128&d=identicon&r=PG&f=1", "display_name": "B. Kristina", "link": "https://stackoverflow.com/users/10409272/b-kristina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4429, "favorite_count": 1, "accepted_answer_id": 52636250, "answer_count": 3, "score": 1, "last_activity_date": 1538607676, "creation_date": 1538602974, "question_id": 52636092, "link": "https://stackoverflow.com/questions/52636092/find-a-value-of-a-dictionary-in-dataframe-column-and-modify-it", "title": "Find a value of a dictionary in dataframe column and modify it", "body": "<p>I dealing with DataFrames and Dictionaries now, and i have a problem, \nI have a Dictionary \"<em>Fruits</em>\"</p>\n\n<pre><code>{BN:'Banana', LM:'Lemon', AP:'Apple' ..... etc}\n</code></pre>\n\n<p>And a DataFrame- \"<em>Stock</em>\":</p>\n\n<pre><code>   Fruit             Price\n0  Sweet Mango           1\n1  Green Apple           2\n2  Few blue Banana       0\n3  Black Banana          5\n</code></pre>\n\n<p>I wand to do the next thing:\nreplace all the values from <code>Stock['Fruit']</code> with the <code>Fruits.values()</code> this way:\nif the value from Fruits appears in the <code>Stock['Fruit']</code> row it will be replaced this way:</p>\n\n<p>Few blue <strong>Banana</strong> --->  <strong>Banana</strong></p>\n\n<p>Black <strong>Banana</strong> --->  <strong>Banana</strong></p>\n\n<p>now the DataFrame <em>Stock</em> will look this way:</p>\n\n<pre><code>   Fruit             Price\n0  Sweet Mango           1\n1  Green Apple           2\n2  Banana                0\n3  Banana                5\n</code></pre>\n\n<p>I found different codes to replace or to check if values from the Dicitionary appears in the DataFrame</p>\n\n<pre><code>Stock['Fruit'] = Stock.Fruit.map(Fruits)\n\nif (Fruits.values() in Stock['Fruit'] for item in Stock)\n\nany('Mango' in Stock['Fruit'] for index,item in Stock.iterrows())\n</code></pre>\n\n<p>But i cant find any thing to update the rows of the DataFrame</p>\n"}, {"tags": ["python", "interpolation"], "comments": [{"owner": {"reputation": 5131, "user_id": 7919597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/905688a3a3921c2f03f4914e943e1915?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7919597/joe"}, "edited": false, "score": 0, "creation_date": 1538642146, "post_id": 52636081, "comment_id": 92217005, "body": "Please post a complete example including some sample data and imports"}, {"owner": {"reputation": 5131, "user_id": 7919597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/905688a3a3921c2f03f4914e943e1915?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7919597/joe"}, "edited": false, "score": 0, "creation_date": 1538642962, "post_id": 52636081, "comment_id": 92217468, "body": "You are using <code>closestPoint</code> on your <code>y</code> data. Shouldn&#39;t you use it on your <code>x</code> data and read the according values using the index found?"}, {"owner": {"reputation": 5131, "user_id": 7919597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/905688a3a3921c2f03f4914e943e1915?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7919597/joe"}, "edited": false, "score": 0, "creation_date": 1538643315, "post_id": 52636081, "comment_id": 92217680, "body": "You know there are functions for linear interpolation in numpy and scipy?"}, {"owner": {"reputation": 5131, "user_id": 7919597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/905688a3a3921c2f03f4914e943e1915?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7919597/joe"}, "edited": false, "score": 0, "creation_date": 1538643812, "post_id": 52636081, "comment_id": 92217997, "body": "This topic discusses a numpy way to find the interval a value is in. You can use it to find the upper and lower value. <a href=\"https://stackoverflow.com/questions/17118350/how-to-find-nearest-value-that-is-greater-in-numpy-array\" title=\"how to find nearest value that is greater in numpy array\">stackoverflow.com/questions/17118350/&hellip;</a>"}, {"owner": {"reputation": 3, "user_id": 7916841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/629f695c46dd31a16343acb484d40f6b?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Spivack", "link": "https://stackoverflow.com/users/7916841/isaac-spivack"}, "reply_to_user": {"reputation": 5131, "user_id": 7919597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/905688a3a3921c2f03f4914e943e1915?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7919597/joe"}, "edited": false, "score": 0, "creation_date": 1538699053, "post_id": 52636081, "comment_id": 92244474, "body": "I do know that there are imports, I just had an assignment to program it myself (and my ta couldn&#39;t figure out what was wrong, so I tried here). I&#39;ll be able to give a more complete example tomorrow, thanks."}], "owner": {"reputation": 3, "user_id": 7916841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/629f695c46dd31a16343acb484d40f6b?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Spivack", "link": "https://stackoverflow.com/users/7916841/isaac-spivack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1538602929, "creation_date": 1538602929, "question_id": 52636081, "link": "https://stackoverflow.com/questions/52636081/what-is-causing-my-linear-interpolation-to-act-up", "title": "What is causing my linear interpolation to act up?", "body": "<p>My code for a linear interpolation is functioning strangely.</p>\n\n<pre><code>n = np.linspace(t[0],t[-1],101)\nprint(n)\nypl = np.zeros(len(n))\ndef closestPoint(x,ydat):\n    return ydat[int(round(x))]\n\ndef linearInt(T,ydat):\n    t0 = round(T+0.01-1)\n    y0 = closestPoint(T-1,ydat)\n    yn = closestPoint(T,ydat)\n    return y0 + (yn-y0)*(T-t0)\n\nfor i in range(len(n)):\n    if(i != 0):\n        ypl[i] = linearInt(n[i],y)\n\npl.plot(t,y,'o')\npl.plot(n,ypl)\n</code></pre>\n\n<p>The variable t is an array from 0 to 10 with a stepsize of 1. \nThe variable y is an array of data points (same size as t).<br>\nWhen I run this code the interpolation runs through all of the points, and looks almost correct, except for the weird spikes. What could be causing this?</p>\n\n<p><a href=\"https://i.stack.imgur.com/AawFH.png\" rel=\"nofollow noreferrer\">Image of the output</a></p>\n"}, {"tags": ["python", "shapely"], "answers": [{"comments": [{"owner": {"reputation": 639, "user_id": 3034415, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/6bcfdb73de4113b077a2db93629a2dc0?s=128&d=identicon&r=PG&f=1", "display_name": "Yair", "link": "https://stackoverflow.com/users/3034415/yair"}, "edited": false, "score": 0, "creation_date": 1538644483, "post_id": 52636680, "comment_id": 92218392, "body": "Thanks - though this is not really what I was looking for.  I am actually trying to find out if the  red polygon has the exact same coordinates as parts of the  yellow one."}, {"owner": {"reputation": 184, "user_id": 7264866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b548d37480dc70181c8d920691f3319e?s=128&d=identicon&r=PG&f=1", "display_name": "elpunkt", "link": "https://stackoverflow.com/users/7264866/elpunkt"}, "reply_to_user": {"reputation": 639, "user_id": 3034415, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/6bcfdb73de4113b077a2db93629a2dc0?s=128&d=identicon&r=PG&f=1", "display_name": "Yair", "link": "https://stackoverflow.com/users/3034415/yair"}, "edited": false, "score": 1, "creation_date": 1538660365, "post_id": 52636680, "comment_id": 92228158, "body": "@Yair but it is what you were asking for;) see my edit for an answer to your problem. I left the overlapping part in case people searching for the overlapping of multipolygons come here."}], "tags": [], "owner": {"reputation": 184, "user_id": 7264866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b548d37480dc70181c8d920691f3319e?s=128&d=identicon&r=PG&f=1", "display_name": "elpunkt", "link": "https://stackoverflow.com/users/7264866/elpunkt"}, "is_accepted": false, "score": 2, "last_activity_date": 1538660054, "last_edit_date": 1538660054, "creation_date": 1538606753, "answer_id": 52636680, "question_id": 52636047, "link": "https://stackoverflow.com/questions/52636047/python-shapely-find-if-parts-of-two-multi-polygons-overlap/52636680#52636680", "title": "Python Shapely - find if parts of two multi polygons overlap", "body": "<p><strong>Good to know:</strong></p>\n\n<p>You can apply the same \"Predicates and Relationships\" methods on MultiPolygons that you can apply on any other Geometric Object in shapely (<a href=\"https://shapely.readthedocs.io/en/latest/manual.html#predicates-and-relationships\" rel=\"nofollow noreferrer\">see documentation</a>).</p>\n\n<p><strong>Check for overlapping:</strong></p>\n\n<p>To check if two Multipolygons overlap you can use <code>object.intersects(other)</code>. See this example (not the MultiPolygons from your picture though):</p>\n\n<pre><code>from shapely.geometry import MultiPolygon\na = [(0, 0), (0, 1), (1, 1), (1, 0), (0, 0)]\nb = [(1, 1), (1, 2), (2, 2), (2, 1), (1, 1)]\n\nmulti1 = MultiPolygon([[a, []], [b, []]])\n\nc = [(0, 1.5), (1.5, 1.5), (1.5, 3), (0, 3), (1.5, 3)]\nd = [(1.5, 1.5), (1.5, 0), (3, 0), (3, 1.5), (1.5, 1.5)]\n\nmulti2 = MultiPolygon([[c, []], [d, []]])\n\nprint(multi1.intersects(multi2))\nprint(multi2.intersects(multi1))\n</code></pre>\n\n<p>Returns</p>\n\n<pre><code>&gt;&gt;&gt;True\n&gt;&gt;&gt;True\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>Apparently, OP is not interested in overlapping, but is \"trying to find out if the red [multi]polygon has the exact same coordinates as parts of the yellow one\".</p>\n\n<p>In that case you can iterate over the individual Polygons and check if they are equal to one of the target Polygons:</p>\n\n<pre><code>from shapely.geometry import MultiPolygon\n#target multipolygon\na = [(0, 0), (0, 1), (1, 1), (1, 0), (0, 0)]\nb = [(1, 1), (1, 2), (2, 2), (2, 1), (1, 1)]\nc = [(2, 1), (3, 1), (3, 0), (2, 0), (2, 1)]\nmulti_target = MultiPolygon([[a, []], [b, []], [c, []]])\n\n#test multipolygon with two polygons that match a target polygon\na = [(0, 0), (0, 1), (1, 1), (1, 0), (0, 0)]\nb = [(1, 1), (1, 2), (2, 2), (2, 1), (1, 1)]\nmulti_test1 = MultiPolygon([[a, []], [b, []]])\n\n#test multipolygon where one polygon does not exactly match a target polygon.\na = [(0, 0.5), (0, 1), (1, 1), (1, 0.5), (0, 0.5)]\nb = [(1, 1), (1, 2), (2, 2), (2, 1), (1, 1)]\nmulti_test2 = MultiPolygon([[a, []], [b, []]])\n\ndef check_multipolys(test, target):\n    for test_poly in test:\n        exists = False\n        for target_poly in target:\n            if test_poly.equals(target_poly):\n                exists = True\n                break\n        if not exists:\n            return False\n    return True\n\n&gt;&gt;&gt;check_multipolys(multi_test1, multi_target)\n&gt;&gt;&gt;True\n&gt;&gt;&gt;check_multipolys(multi_test2, multi_target)\n&gt;&gt;&gt;False\n</code></pre>\n\n<p>For the future: the source code would have been more helpful to answer your question, than a screenshot of the documentation.</p>\n"}], "owner": {"reputation": 639, "user_id": 3034415, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/6bcfdb73de4113b077a2db93629a2dc0?s=128&d=identicon&r=PG&f=1", "display_name": "Yair", "link": "https://stackoverflow.com/users/3034415/yair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1556, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1538660054, "creation_date": 1538602724, "question_id": 52636047, "link": "https://stackoverflow.com/questions/52636047/python-shapely-find-if-parts-of-two-multi-polygons-overlap", "title": "Python Shapely - find if parts of two multi polygons overlap", "body": "<p>From the Shapely documentation - is there any function that can let me know that the red multipolygon on the right overlaps some parts of the yellow multiplolygon on the right? \n<a href=\"https://i.stack.imgur.com/KgZtn.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KgZtn.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "modulus"], "answers": [{"tags": [], "owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "is_accepted": true, "score": 1, "last_activity_date": 1538603381, "last_edit_date": 1538603381, "creation_date": 1538603039, "answer_id": 52636109, "question_id": 52636031, "link": "https://stackoverflow.com/questions/52636031/how-do-i-check-each-number-instead-just-the-one-value/52636109#52636109", "title": "How do I check each number instead just the one value?", "body": "<p>Here is a corrected version of your code for a smaller value of <code>y</code> up to 6.\nYou can extend it to 100. </p>\n\n<p><em>Explanation</em>: The first while loop checks for <code>y</code> value. For each <code>y</code> value, you check for its divisors using the second while loop which runs over <code>x</code>. You update <code>x</code> by 1 within the inner <code>while</code> loop and update <code>y</code> by 1 within the outer <code>while</code> loop. Comment below if something is unclear.</p>\n\n<p><em>Problems with your code</em>: You were using two <code>while</code> loops just for <code>y</code>, one of which was redundant. Moreover, you were not incrementing <code>x</code> as you clearly pointed out in your question. Your <code>elif</code> was also not required because you were incrementing <code>y</code> in both the cases.</p>\n\n<pre><code>y = 2\nwhile y &lt;= 6: # Replace 6 by 100 here\n    x = 2 # Reset x to 2 for every y value because you count divisors from 2\n    while x &lt;= y:\n        if y % x == 0:\n            print(x, 'divides', y)\n        x += 1  \n    y += 1    \n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>2 divides 2\n3 divides 3\n2 divides 4\n4 divides 4\n5 divides 5\n2 divides 6\n3 divides 6\n6 divides 6\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 135, "user_id": 2524606, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/zshne.jpg?s=128&g=1", "display_name": "Filip Matyja", "link": "https://stackoverflow.com/users/2524606/filip-matyja"}, "is_accepted": false, "score": 0, "last_activity_date": 1538603455, "creation_date": 1538603455, "answer_id": 52636185, "question_id": 52636031, "link": "https://stackoverflow.com/questions/52636031/how-do-i-check-each-number-instead-just-the-one-value/52636185#52636185", "title": "How do I check each number instead just the one value?", "body": "<p>This should do a work. Give it a try, if something is unclear give me a shout</p>\n\n<pre><code>x = int(input(\"Give the range you want to check numbers in: \"))\n\nfor number in range(1,x):\n    for value in range(1,number+1):\n        if number % value == 0:\n            print(number, \" is divided by\", value)\n</code></pre>\n\n<p>Output for input \"10\":</p>\n\n<pre><code>1  is divided by 1\n2  is divided by 1\n2  is divided by 2\n3  is divided by 1\n3  is divided by 3\n4  is divided by 1\n4  is divided by 2\n4  is divided by 4\n5  is divided by 1\n5  is divided by 5\n6  is divided by 1\n6  is divided by 2\n6  is divided by 3\n6  is divided by 6\n7  is divided by 1\n7  is divided by 7\n8  is divided by 1\n8  is divided by 2\n8  is divided by 4\n8  is divided by 8\n9  is divided by 1\n9  is divided by 3\n9  is divided by 9\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4254, "user_id": 10255652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5DDj.jpg?s=128&g=1", "display_name": "vash_the_stampede", "link": "https://stackoverflow.com/users/10255652/vash-the-stampede"}, "is_accepted": false, "score": 0, "last_activity_date": 1538619720, "last_edit_date": 1538619720, "creation_date": 1538619410, "answer_id": 52638059, "question_id": 52636031, "link": "https://stackoverflow.com/questions/52636031/how-do-i-check-each-number-instead-just-the-one-value/52638059#52638059", "title": "How do I check each number instead just the one value?", "body": "<p>You can use <em>enumerate</em> here and cycling through the indexes prior to every item will produce the results you are trying to get   </p>\n\n<pre><code>x = [*range(2, 101)]\nfor idx, item in enumerate(x):\n    for i in x[:idx +1]:\n        if not item % i:\n            print('{} divides {}'.format(i, item))\n</code></pre>\n\n<blockquote>\n<pre><code>2 divides 2\n3 divides 3\n2 divides 4\n4 divides 4\n5 divides 5\n2 divides 6\n3 divides 6\n6 divides 6\n...\n99 divides 99\n2 divides 100\n4 divides 100\n5 divides 100\n10 divides 100\n20 divides 100\n25 divides 100\n50 divides 100\n100 divides 100\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 13, "user_id": 10369332, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-b8SVq7xpG1g/AAAAAAAAAAI/AAAAAAAAAtE/LZ19X4-4i6k/photo.jpg?sz=128", "display_name": "hs4545", "link": "https://stackoverflow.com/users/10369332/hs4545"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 898, "favorite_count": 0, "accepted_answer_id": 52636109, "answer_count": 3, "score": 0, "last_activity_date": 1538619720, "creation_date": 1538602665, "question_id": 52636031, "link": "https://stackoverflow.com/questions/52636031/how-do-i-check-each-number-instead-just-the-one-value", "title": "How do I check each number instead just the one value?", "body": "<p>Divisors:\nFor numbers from 2 to 100, print a series of lines indicating which numbers are divisors of other numbers.  For each, print out \u201cX divides Y\u201d, where X &lt;= Y, and both X and Y are between 2 and 100.  The first few lines will be:\n2 divides 2\n3 divides 3\n2 divides 4\n4 divides 4\n5 divides 5\netc.</p>\n\n<p>So far I have this </p>\n\n<pre><code>x = 2\ny = 2\nwhile y &lt;= 100:\n      while y &lt;= 100:\n            if y % x == 0:\n                print(x, 'divides', y)\n                y += 1\n            elif y % x != 0:\n                y += 1\n</code></pre>\n\n<p>Im not sure how to make it test the other values of x and y</p>\n"}, {"tags": ["python", "python-3.x", "line"], "answers": [{"comments": [{"owner": {"reputation": 781, "user_id": 3712321, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/164e07d0086c414ddd750ee9214e0f4e?s=128&d=identicon&r=PG&f=1", "display_name": "timsterc", "link": "https://stackoverflow.com/users/3712321/timsterc"}, "edited": false, "score": 1, "creation_date": 1538603655, "post_id": 52636080, "comment_id": 92205592, "body": "Sorry, had wrong link for code I was attempting to use. Fixed it. Anyway, tried your solution but get same empty output file."}], "tags": [], "owner": {"reputation": 315, "user_id": 3713719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24aeec9ea28e801fc98b11d5652d99b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3713719", "link": "https://stackoverflow.com/users/3713719/user3713719"}, "is_accepted": false, "score": 1, "last_activity_date": 1538602929, "creation_date": 1538602929, "answer_id": 52636080, "question_id": 52636019, "link": "https://stackoverflow.com/questions/52636019/remove-all-lines-from-text-file-up-until-specific-string-python3/52636080#52636080", "title": "Remove all lines from text file up until specific string - python3", "body": "<p>your tag_found is always False:</p>\n\n<pre><code>tag = '\"meta\": ['\ntag_found = False \n\nwith open('file.in',encoding=\"utf8\") as in_file:\nwith open('file.out','w',encoding=\"utf8\") as out_file:\n    for line in in_file:\n        if not tag_found and line.strip() == tag:\n            tag_found = True\n            continue\n\n        if tag_found:\n             out_file.write(line)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 781, "user_id": 3712321, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/164e07d0086c414ddd750ee9214e0f4e?s=128&d=identicon&r=PG&f=1", "display_name": "timsterc", "link": "https://stackoverflow.com/users/3712321/timsterc"}, "edited": false, "score": 0, "creation_date": 1538604407, "post_id": 52636293, "comment_id": 92205821, "body": "This solution writes out everything up to the tag to the output file, then nothing after the tag. I.e. the opposite of what i&#39;m looking for. :-)"}, {"owner": {"reputation": 781, "user_id": 3712321, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/164e07d0086c414ddd750ee9214e0f4e?s=128&d=identicon&r=PG&f=1", "display_name": "timsterc", "link": "https://stackoverflow.com/users/3712321/timsterc"}, "edited": false, "score": 0, "creation_date": 1538604813, "post_id": 52636293, "comment_id": 92205916, "body": "Ah, that did it. Thanks!"}], "tags": [], "owner": {"reputation": 3891, "user_id": 4585713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0163e6ba41d9dfd2c9d13c528c87e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "PMende", "link": "https://stackoverflow.com/users/4585713/pmende"}, "is_accepted": true, "score": 2, "last_activity_date": 1538604489, "last_edit_date": 1538604489, "creation_date": 1538604025, "answer_id": 52636293, "question_id": 52636019, "link": "https://stackoverflow.com/questions/52636019/remove-all-lines-from-text-file-up-until-specific-string-python3/52636293#52636293", "title": "Remove all lines from text file up until specific string - python3", "body": "<pre><code>tag = '\"meta\": ['\nlines_to_write = []\ntag_found = False\n\nwith open('file.in',encoding=\"utf8\") as in_file:\n    for line in in_file:\n        if line.strip() == tag:\n            tag_found = True\n        if tag_found:\n            lines_to_write.append(line)\nwith open('file.out','w',encoding=\"utf8\") as out_file:\n    out_file.writelines(lines_to_write)\n</code></pre>\n"}], "owner": {"reputation": 781, "user_id": 3712321, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/164e07d0086c414ddd750ee9214e0f4e?s=128&d=identicon&r=PG&f=1", "display_name": "timsterc", "link": "https://stackoverflow.com/users/3712321/timsterc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 0, "accepted_answer_id": 52636293, "answer_count": 2, "score": 1, "last_activity_date": 1538604489, "creation_date": 1538602602, "last_edit_date": 1538603422, "question_id": 52636019, "link": "https://stackoverflow.com/questions/52636019/remove-all-lines-from-text-file-up-until-specific-string-python3", "title": "Remove all lines from text file up until specific string - python3", "body": "<p>I have a text file that has a lot of debug information in it, prior to the data I need. I'm using python3 to attempt to rewrite the output so the file starts with a specific json tag. I attempted to use this solution <a href=\"https://stackoverflow.com/questions/13693213/remove-string-and-all-lines-before-string-from-file-python\">remove string and all lines before string from file python</a> but I'm getting an empty output file so I assume it's not finding the json tag.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>tag = '\"meta\": ['\ntag_found = False \n\nwith open('file.in',encoding=\"utf8\") as in_file:\nwith open('file.out','w',encoding=\"utf8\") as out_file:\n    for line in in_file:\n        if tag_found:\n            if line.strip() == tag:\n                tag_found = True \n            else:\n                out_file.write(line)\n</code></pre>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["python", "python-3.x", "parallel-processing", "multiprocessing", "range"], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 7891226, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hQOnP3Y-kaU/AAAAAAAAAAI/AAAAAAAAABY/rdFpHgAPRvw/photo.jpg?sz=128", "display_name": "Jibodeah", "link": "https://stackoverflow.com/users/7891226/jibodeah"}, "is_accepted": false, "score": 0, "last_activity_date": 1538616760, "creation_date": 1538616760, "answer_id": 52637741, "question_id": 52636002, "link": "https://stackoverflow.com/questions/52636002/how-to-parallelize-iteration-over-a-range-using-stdlib-and-python-3/52637741#52637741", "title": "How to parallelize iteration over a range, using StdLib and Python 3?", "body": "<pre><code>import timeit\n\nfrom multiprocessing import Pool\n\ndef appendNumber(x):\n    return x\n\nstart = timeit.default_timer()\n\nwith Pool(4) as p:\n    numbers = p.map(appendNumber, range(100000000))\n\nend = timeit.default_timer()\n\nprint('TIME: {} seconds'.format(end - start))\nprint('SUM:', sum(numbers))\n</code></pre>\n\n<p>So <code>Pool.map</code> is like the builtin <code>map</code> function. It takes a function and an iterable and produces a list of the result of calling that function on every element of the iterable. Here since we don't actually want to change the elements in the range iterable we just return the argument.</p>\n\n<p>The crucial thing is that <code>Pool.map</code> divides up the provided iterable (<code>range(1000000000)</code> here) into chunks and sends them to the number of processes it has (defined here as 4 in <code>Pool(4)</code>) then rejoins the results back into one list.</p>\n\n<p>The output I get when running this is</p>\n\n<pre><code>TIME: 8.748245699999984 seconds\nSUM: 4999999950000000\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "reply_to_user": {"reputation": 1042, "user_id": 7585554, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AY1Vh.jpg?s=128&g=1", "display_name": "probat", "link": "https://stackoverflow.com/users/7585554/probat"}, "edited": false, "score": 0, "creation_date": 1538619188, "post_id": 52637805, "comment_id": 92208928, "body": "@probat Yes, sorry forgot that one"}, {"owner": {"reputation": 1042, "user_id": 7585554, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AY1Vh.jpg?s=128&g=1", "display_name": "probat", "link": "https://stackoverflow.com/users/7585554/probat"}, "edited": false, "score": 0, "creation_date": 1538661175, "post_id": 52637805, "comment_id": 92228791, "body": "you must have a super computer getting 0.51 s :)"}, {"owner": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "reply_to_user": {"reputation": 1042, "user_id": 7585554, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AY1Vh.jpg?s=128&g=1", "display_name": "probat", "link": "https://stackoverflow.com/users/7585554/probat"}, "edited": false, "score": 0, "creation_date": 1538663442, "post_id": 52637805, "comment_id": 92230386, "body": "@probat 6 year old machine ;) But I&#39;m on Linux. When you&#39;re on Windows, starting up processes takes longer because Windows does no forking."}], "tags": [], "owner": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "is_accepted": true, "score": 3, "last_activity_date": 1544637758, "last_edit_date": 1544637758, "creation_date": 1538617224, "answer_id": 52637805, "question_id": 52636002, "link": "https://stackoverflow.com/questions/52636002/how-to-parallelize-iteration-over-a-range-using-stdlib-and-python-3/52637805#52637805", "title": "How to parallelize iteration over a range, using StdLib and Python 3?", "body": "<p>Yes, that is doable. Your calculation is not dependend on intermediate results, so you can easily divide the task into chunks and distribute it over multiple processes. It's what is called an </p>\n\n<blockquote>\n  <p><strong>embarrassingly parallel problem</strong>.</p>\n</blockquote>\n\n<p>The only tricky part here might be, to divide the range into fairly equal parts in the first place. Straight out my personal lib two functions to deal with this:</p>\n\n<pre><code># mp_utils.py\n\nfrom itertools import accumulate\n\ndef calc_batch_sizes(n_tasks: int, n_workers: int) -&gt; list:\n    \"\"\"Divide `n_tasks` optimally between n_workers to get batch_sizes.\n\n    Guarantees batch sizes won't differ for more than 1.\n\n    Example:\n    # &gt;&gt;&gt;calc_batch_sizes(23, 4)\n    # Out: [6, 6, 6, 5]\n\n    In case you're going to use numpy anyway, use np.array_split:\n    [len(a) for a in np.array_split(np.arange(23), 4)]\n    # Out: [6, 6, 6, 5]\n    \"\"\"\n    x = int(n_tasks / n_workers)\n    y = n_tasks % n_workers\n    batch_sizes = [x + (y &gt; 0)] * y + [x] * (n_workers - y)\n\n    return batch_sizes\n\n\ndef build_batch_ranges(batch_sizes: list) -&gt; list:\n    \"\"\"Build batch_ranges from list of batch_sizes.\n\n    Example:\n    # batch_sizes [6, 6, 6, 5]\n    # &gt;&gt;&gt;build_batch_ranges(batch_sizes)\n    # Out: [range(0, 6), range(6, 12), range(12, 18), range(18, 23)]\n    \"\"\"\n    upper_bounds = [*accumulate(batch_sizes)]\n    lower_bounds = [0] + upper_bounds[:-1]\n    batch_ranges = [range(l, u) for l, u in zip(lower_bounds, upper_bounds)]\n\n    return batch_ranges\n</code></pre>\n\n<p>Then your main script would look like this:</p>\n\n<pre><code>import time\nfrom multiprocessing import Pool\nfrom mp_utils import calc_batch_sizes, build_batch_ranges\n\n\ndef target_foo(batch_range):\n    return sum(batch_range)  # ~ 6x faster than target_foo1\n\n\ndef target_foo1(batch_range):\n    numbers = []\n    for num in batch_range:\n        numbers.append(num)\n    return sum(numbers)\n\n\nif __name__ == '__main__':\n\n    N = 100000000\n    N_CORES = 4\n\n    batch_sizes = calc_batch_sizes(N, n_workers=N_CORES)\n    batch_ranges = build_batch_ranges(batch_sizes)\n\n    start = time.perf_counter()\n    with Pool(N_CORES) as pool:\n        result = pool.map(target_foo, batch_ranges)\n        r_sum = sum(result)\n    print(r_sum)\n    print(f'elapsed: {time.perf_counter() - start:.2f} s')\n</code></pre>\n\n<p>Note that I also switched your for-loop for a simple sum over the range object, since it offers much better performance. If you cant do this in your real app, a list comprehension would still be ~60% faster than filling your list manually like in your example.</p>\n\n<p>Example Output:</p>\n\n<pre><code>4999999950000000\nelapsed: 0.51 s\n\nProcess finished with exit code 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2488, "user_id": 2745140, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/OGCDP.jpg?s=128&g=1", "display_name": "yoonghm", "link": "https://stackoverflow.com/users/2745140/yoonghm"}, "is_accepted": false, "score": 0, "last_activity_date": 1538631378, "creation_date": 1538631378, "answer_id": 52639670, "question_id": 52636002, "link": "https://stackoverflow.com/questions/52636002/how-to-parallelize-iteration-over-a-range-using-stdlib-and-python-3/52639670#52639670", "title": "How to parallelize iteration over a range, using StdLib and Python 3?", "body": "<p>I did a comparison, the time taken to split the tasks sometimes may take longer:</p>\n\n<p>File <strong><code>multiprocessing_summation.py</code></strong>:</p>\n\n<pre><code>def summation(lst):\n  sum = 0\n  for x in range(lst[0], lst[1]):\n    sum += x\n  return sum\n</code></pre>\n\n<p>File <strong><code>multiprocessing_summation_master.py</code></strong>:</p>\n\n<pre><code>%%file ./examples/multiprocessing_summation_master.py\nimport multiprocessing as mp\nimport timeit\nimport os\nimport sys\nimport multiprocessing_summation as mps\n\nif __name__ == \"__main__\":\n\n  if len(sys.argv) == 1:\n    print(f'{sys.argv[0]} &lt;number1 ...&gt;')\n    sys.exit(1)\n  else:\n    args = [int(x) for x in sys.argv[1:]]\n\n  nBegin = 1\n  nCore = os.cpu_count()\n\n  for nEnd in args:\n\n    ### Approach 1  ####\n    ####################\n    start = timeit.default_timer()\n    answer1 = mps.summation((nBegin, nEnd+1))\n    end = timeit.default_timer()\n    print(f'Answer1 = {answer1}')\n    print(f'Time taken = {end - start}')\n\n    ### Approach 2 ####\n    ####################\n    start = timeit.default_timer()\n    lst = []\n    for x in range(nBegin, nEnd, int((nEnd-nBegin+1)/nCore)):\n      lst.append(x)\n    lst.append(nEnd+1)\n\n    lst2 = []\n    for x in range(1, len(lst)):\n      lst2.append((lst[x-1], lst[x]))\n\n    with mp.Pool(processes=nCore) as pool:\n      answer2 = pool.map(mps.summation, lst2)\n    end = timeit.default_timer()\n    print(f'Answer2 = {sum(answer2)}')\n    print(f'Time taken = {end - start}')\n</code></pre>\n\n<p>Run the second script:</p>\n\n<p><strong><code>python multiprocessing_summation_master.py 1000 100000 10000000 1000000000</code></strong></p>\n\n<p>The outputs are:</p>\n\n<pre><code>Answer1 = 500500\nTime taken = 4.558405389566795e-05\nAnswer2 = 500500\nTime taken = 0.15728066685459452\nAnswer1 = 5000050000\nTime taken = 0.005781152051264199\nAnswer2 = 5000050000\nTime taken = 0.14532123447452705\nAnswer1 = 50000005000000\nTime taken = 0.4903863230334036\nAnswer2 = 50000005000000\nTime taken = 0.49744346392131533\nAnswer1 = 500000000500000000\nTime taken = 50.825169837068\nAnswer2 = 500000000500000000\nTime taken = 26.603663061636567\n</code></pre>\n"}], "owner": {"reputation": 1042, "user_id": 7585554, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AY1Vh.jpg?s=128&g=1", "display_name": "probat", "link": "https://stackoverflow.com/users/7585554/probat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 433, "favorite_count": 0, "accepted_answer_id": 52637805, "answer_count": 3, "score": 4, "last_activity_date": 1544638484, "creation_date": 1538602496, "last_edit_date": 1544638484, "question_id": 52636002, "link": "https://stackoverflow.com/questions/52636002/how-to-parallelize-iteration-over-a-range-using-stdlib-and-python-3", "title": "How to parallelize iteration over a range, using StdLib and Python 3?", "body": "<p>I've been searching for an answer on this now for days to no avail. I'm probably just not understanding the pieces that are floating around out there and the Python documentation on the <code>multiprocessing</code> module is rather large and not clear to me.</p>\n\n<p>Say you have the following for loop:</p>\n\n<pre><code>import timeit\n\n\nnumbers = []\n\nstart = timeit.default_timer()\n\nfor num in range(100000000):\n    numbers.append(num)\n\nend = timeit.default_timer()\n\nprint('TIME: {} seconds'.format(end - start))\nprint('SUM:', sum(numbers))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>TIME: 23.965870224497916 seconds\nSUM: 4999999950000000\n</code></pre>\n\n<p>For this example say you have a 4 core processor. Is there way to create 4 processes in total, where each process is running on a separate CPU core and finish roughly 4 times faster so 24s/4 processes = ~6 seconds?</p>\n\n<p>Somehow divide the for loop up into 4 equal chunks and then have the 4 chunks added into the numbers list to equate the same sum? There was this stackoverflow thread: <a href=\"https://stackoverflow.com/questions/9786102/how-do-i-parallelize-a-simple-python-loop\">Parallel Simple For Loop</a> but I don't get it. Thanks all.</p>\n"}, {"tags": ["python", "python-3.x", "animation", "module", "transition"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8396116"}, "edited": false, "score": 0, "creation_date": 1544306250, "post_id": 52636094, "comment_id": 94231152, "body": "I don&#39;t personally use Matplotlib much though. I use Pygame more"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8396116"}, "is_accepted": true, "score": 0, "last_activity_date": 1538602981, "creation_date": 1538602981, "answer_id": 52636094, "question_id": 52635968, "link": "https://stackoverflow.com/questions/52635968/how-to-make-animations-with-python/52636094#52636094", "title": "How to make animations with python", "body": "<p>There is a helpful python module(very famous), you have most likely heard of it. <a href=\"http://pygame.org\" rel=\"nofollow noreferrer\">Pygame</a>. There are many alternatives, but by far Pygame is the most popular. Another animation module(mostly used for math) is <a href=\"https://matplotlib.org/\" rel=\"nofollow noreferrer\">Matplotlib</a>. Really effective for data science.</p>\n"}, {"tags": [], "owner": {"reputation": 135, "user_id": 2524606, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/zshne.jpg?s=128&g=1", "display_name": "Filip Matyja", "link": "https://stackoverflow.com/users/2524606/filip-matyja"}, "is_accepted": false, "score": 0, "last_activity_date": 1538603840, "creation_date": 1538603840, "answer_id": 52636260, "question_id": 52635968, "link": "https://stackoverflow.com/questions/52635968/how-to-make-animations-with-python/52636260#52636260", "title": "How to make animations with python", "body": "<p>Or if you are the fan of ASCII Art - <a href=\"https://asciimatics.readthedocs.io/en/stable/\" rel=\"nofollow noreferrer\">https://asciimatics.readthedocs.io/en/stable/</a></p>\n"}], "owner": {"reputation": 3, "user_id": 10375267, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfqBugfzCjU/AAAAAAAAAAI/AAAAAAAARj0/4zMu4TbVGkU/photo.jpg?sz=128", "display_name": "Raymundo Gonzalez", "link": "https://stackoverflow.com/users/10375267/raymundo-gonzalez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "closed_date": 1538610506, "accepted_answer_id": 52636094, "answer_count": 2, "score": -2, "last_activity_date": 1538603840, "creation_date": 1538602305, "last_edit_date": 1538602899, "question_id": 52635968, "link": "https://stackoverflow.com/questions/52635968/how-to-make-animations-with-python", "closed_reason": "Needs more focus", "title": "How to make animations with python", "body": "<p>I'm new to this forum :) </p>\n\n<p>I'm learning python, so far I can make programs without much effort, I'm planning to make a program where it shows a window with some animations when it detects an event, for example, if I press a key the window shows a nice \"icon\" with some nice transitions and disappears.</p>\n\n<p>which module should fit perfect for this task? I want to work with nice icons made on Illustrator.</p>\n\n<p>Something like this page but the fact is I don't want to make it on a web browser.</p>\n\n<p><a href=\"https://www.jqueryscript.net/demo/Animated-Interactive-Donut-Chart-with-jQuery-Snap-svg/\" rel=\"nofollow noreferrer\">https://www.jqueryscript.net/demo/Animated-Interactive-Donut-Chart-with-jQuery-Snap-svg/</a></p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 33207, "user_id": 1399491, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a1cb3dec3a6f3411ce3460276e44b292?s=128&d=identicon&r=PG", "display_name": "Alex W", "link": "https://stackoverflow.com/users/1399491/alex-w"}, "edited": false, "score": 0, "creation_date": 1538602392, "post_id": 52635965, "comment_id": 92205150, "body": "What is the code you ran to get that output <code>&#39;str&#39; object has no attribute &#39;values&#39;</code>?"}, {"owner": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "reply_to_user": {"reputation": 33207, "user_id": 1399491, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a1cb3dec3a6f3411ce3460276e44b292?s=128&d=identicon&r=PG", "display_name": "Alex W", "link": "https://stackoverflow.com/users/1399491/alex-w"}, "edited": false, "score": 0, "creation_date": 1538602638, "post_id": 52635965, "comment_id": 92205234, "body": "Whoops, I forgot to add the line of code that threw the error.  Ok, I just updated my original post right now."}, {"owner": {"reputation": 27784, "user_id": 4531270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uw3pm.png?s=128&g=1", "display_name": "pylang", "link": "https://stackoverflow.com/users/4531270/pylang"}, "edited": false, "score": 0, "creation_date": 1538602839, "post_id": 52635965, "comment_id": 92205314, "body": "Does each dict indicate a separate row in the DataFrame?  And what do you mean be &quot;normalize the data&quot;?  Are you just trying to read json files into a DataFrame?"}, {"owner": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "edited": false, "score": 0, "creation_date": 1538603604, "post_id": 52635965, "comment_id": 92205576, "body": "Yes, each is a separate row.  I just updated my original post, with before and after samples."}, {"owner": {"reputation": 10123, "user_id": 3639023, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/RkSU9.png?s=128&g=1", "display_name": "johnchase", "link": "https://stackoverflow.com/users/3639023/johnchase"}, "edited": false, "score": 0, "creation_date": 1538605517, "post_id": 52635965, "comment_id": 92206093, "body": "I am confused by what is code is causing the failure, do you have an example of data that is not working as expected?"}], "answers": [{"comments": [{"owner": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "edited": false, "score": 0, "creation_date": 1538613011, "post_id": 52636545, "comment_id": 92207707, "body": "Thanks for the help Trenton.  I think this will work, but I still have to deal with the [],[],[] characters.  I think these are all blank rows; not totally sure.  I updated my original post with a screen shot.  Hopefully that illustrates my point.  I need to eliminate, or somehow handle, those blank rows, or whatever.  Around 50 or so rows have only [] in them.  I have tried various code samples I found online, and all fail if those [] are in the data frame.  Once the rows with [] are removed, everything works fine.  Any thoughts on how to handle these special rows?  Thanks."}, {"owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "reply_to_user": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "edited": false, "score": 0, "creation_date": 1538669486, "post_id": 52636545, "comment_id": 92234173, "body": "As noted in the new edit, use <code>df.empty</code>.  It returns <code>True</code> or <code>False</code>.  If this doesn&#39;t point you in the correct direction, please post some raw data and the method by which that data is read into a <code>DataFrame</code>."}], "tags": [], "owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "is_accepted": false, "score": 0, "last_activity_date": 1538669398, "last_edit_date": 1538669398, "creation_date": 1538605719, "answer_id": 52636545, "question_id": 52635965, "link": "https://stackoverflow.com/questions/52635965/struggling-to-normalize-nested-json-data/52636545#52636545", "title": "Struggling to normalize nested JSON data", "body": "<p>The <code>json_normalize</code> method,    </p>\n\n<pre><code>pandas.io.json.json_normalize(data, record_path=None, meta=None, meta_prefix=None, record_prefix=None, errors='raise', sep='.')\n</code></pre>\n\n<p>expects the <code>data</code> parameter as follows:</p>\n\n<pre><code>data : dict or list of dicts; Unserialized JSON objects\n</code></pre>\n\n<p><a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.io.json.json_normalize.html\" rel=\"nofollow noreferrer\">pandas.io.json.json_normalize</a></p>\n\n<pre><code>df1 = pd.DataFrame.from_dict(pd.io.json.json_normalize(df1), orient='columns')\n</code></pre>\n\n<p>Based upon the code sample, a <code>DataFrame</code> is seemingly being passed to <code>json_normalize</code> when it's supposed to be a dict or list of dicts.  If you pass the raw json, an error is not thrown, as you state above.</p>\n\n<p><a href=\"https://www.kaggle.com/jboysen/quick-tutorial-flatten-nested-json-in-pandas\" rel=\"nofollow noreferrer\">Quick Tutorial: Flatten Nested JSON in Pandas</a></p>\n\n<p>If I take the data provided:</p>\n\n<pre><code>d1 = [{'id': 36001, 'default': False, 'name': 'Production', 'raw_name': 'Production', 'value': 'production'}, \n      {'id': 3600, 'default': False, 'name': 'Development', 'raw_name': 'Development', 'value': 'development'}, \n      {'id': 36001, 'default': False, 'name': 'Staging', 'raw_name': 'Staging', 'value': 'staging'}]\nd2 = [{'id': 36001, 'default': False, 'name': 'Add/Remove User', 'raw_name': 'Add/Remove User', 'value': 'req____add/remove_user'}, \n      {'id': 36004, 'default': False, 'name': 'Add/Remove Subscription', 'raw_name': 'Add/Remove Subscription', 'value': 'req____add/remove_subscription'}, \n      {'id': 36001, 'default': False, 'name': 'Other', 'raw_name': 'Other', 'value': 'other'}]\nd3 = [{'id': 36002, 'default': False, 'name': '2', 'raw_name': '2', 'value': '2'}, \n      {'id': 362, 'default': False, 'name': 'A', 'raw_name': 'A', 'value': 'a'}, \n      {'id': 36001, 'default': False, 'name': 'B', 'raw_name': 'B', 'value': 'b'}, \n      {'id': 36001, 'default': False, 'name': 'C', 'raw_name': 'C', 'value': 'c'}]\n\ndf1 = pd.DataFrame.from_dict(pd.io.json.json_normalize(d1), orient='columns')\ndf2 = pd.DataFrame.from_dict(pd.io.json.json_normalize(d2), orient='columns')\ndf3 = pd.DataFrame.from_dict(pd.io.json.json_normalize(d3), orient='columns')\n</code></pre>\n\n<p><strong>Test if a DataFrame is empty</strong></p>\n\n<pre><code>df4 = pd.DataFrame.from_dict([])\ndf4.empty\nTrue\n</code></pre>\n\n<p><strong>Combine them - manual example</strong></p>\n\n<pre><code>df = pd.concat([df1, df2, df3])\n</code></pre>\n\n<p><strong>Combine them - loop</strong></p>\n\n<pre><code>list_of_dfs = [df1, df2, df3, df4]\n\ndf = pd.DataFrame()\nfor x in list_of_dfs:\n    if not x.empty:\n        df = df.append(x)\n\ndf.to_csv('test.csv')\n</code></pre>\n\n<p><strong>In this example, the output of <code>from_dict</code> and <code>json_normalize</code></strong></p>\n\n<p><code>pd.DataFrame.from_dict(d2) == pd.io.json.json_normalize(d2)</code> is <code>True</code></p>\n"}], "owner": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2528, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1538669398, "creation_date": 1538602264, "last_edit_date": 1538612837, "question_id": 52635965, "link": "https://stackoverflow.com/questions/52635965/struggling-to-normalize-nested-json-data", "title": "Struggling to normalize nested JSON data", "body": "<p>I have a bunch of JSON data points that look something like this:</p>\n\n<pre><code>[{'id': 36001, 'default': False, 'name': 'Production', 'raw_name': 'Production', 'value': 'production'}, {'id': 3600, 'default': False, 'name': 'Development', 'raw_name': 'Development', 'value': 'development'}, {'id': 36001, 'default': False, 'name': 'Staging', 'raw_name': 'Staging', 'value': 'staging'}]\n[{'id': 36001, 'default': False, 'name': 'Add/Remove User', 'raw_name': 'Add/Remove User', 'value': 'req____add/remove_user'}, {'id': 36004, 'default': False, 'name': 'Add/Remove Subscription', 'raw_name': 'Add/Remove Subscription', 'value': 'req____add/remove_subscription'}, {'id': 36001, 'default': False, 'name': 'Other', 'raw_name': 'Other', 'value': 'other'}]\n[{'id': 36002, 'default': False, 'name': '2', 'raw_name': '2', 'value': '2'}, {'id': 362, 'default': False, 'name': 'A', 'raw_name': 'A', 'value': 'a'}, {'id': 36001, 'default': False, 'name': 'B', 'raw_name': 'B', 'value': 'b'}, {'id': 36001, 'default': False, 'name': 'C', 'raw_name': 'C', 'value': 'c'}]\n</code></pre>\n\n<p>I want to normalize the data, and I tried this:</p>\n\n<pre><code>df1 = pd.DataFrame.from_dict(json_normalize(df1), orient='columns')\n</code></pre>\n\n<p>That gave the following error:</p>\n\n<pre><code> 'str' object has no attribute 'values'\n</code></pre>\n\n<p>Based on my research, that should work.  I think what's preventing it from working, is that I have a bunch of rows with only this: <code>[] [] [] []</code> (each of these 4 are on different rows in a data frame).  How can I eliminate the <code>[]</code> in each row and normalize all the JSON in a data frame?</p>\n\n<p>For instance if I do this:</p>\n\n<pre><code>df1 = [{'id': 36001, 'default': False, 'name': 'Production', 'raw_name': 'Production', 'value': 'production'}, {'id': 3600, 'default': False, 'name': 'Development', 'raw_name': 'Development', 'value': 'development'}, {'id': 36001, 'default': False, 'name': 'Staging', 'raw_name': 'Staging', 'value': 'staging'}]\ndf2 = pd.DataFrame.from_dict(json_normalize(df1), orient='columns')\nprint(df2)\n</code></pre>\n\n<p>I get this:</p>\n\n<pre><code>   default     id         name     raw_name        value\n0    False  36001   Production   Production   production\n1    False   3600  Development  Development  development\n2    False  36001      Staging      Staging      staging\n</code></pre>\n\n<p>That's what I want to end up with, but I am getting weird errors, and I think it's because of the <code>[] [] []</code> etc., I have dozens of these, all in separate rows, within my data frame.</p>\n\n<p>Here is a small screen shot of what i'm looking at in the CSV file that my code spits out (I don't know how to represent it in JSON; I just see what it looks like in the CSV file).</p>\n\n<p><a href=\"https://i.stack.imgur.com/tuCx1.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tuCx1.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "statistics", "linear-regression", "statsmodels"], "comments": [{"owner": {"reputation": 6402, "user_id": 6245650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vMp3K.jpg?s=128&g=1", "display_name": "Scratch&#39;N&#39;Purr", "link": "https://stackoverflow.com/users/6245650/scratchnpurr"}, "edited": false, "score": 1, "creation_date": 1538638361, "post_id": 52635962, "comment_id": 92214988, "body": "Is there a reason why you went with the formula approach vs fitting X to y? I suppose the formula also fits with an intercept. I might suggest using both ways and seeing what the adjusted R-squared value is."}, {"owner": {"reputation": 3988, "user_id": 2436862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4P7Vh.jpg?s=128&g=1", "display_name": "James Phillips", "link": "https://stackoverflow.com/users/2436862/james-phillips"}, "edited": false, "score": 0, "creation_date": 1538651731, "post_id": 52635962, "comment_id": 92222669, "body": "If you can try &quot;days since begin date&quot;, you can convert the dates to numeric data. This might be worth a test, sometimes it is a useful technique."}], "owner": {"reputation": 2015, "user_id": 8372455, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7937214051961aa38cd1b42a16a599d0?s=128&d=identicon&r=PG&f=1", "display_name": "HenryHub", "link": "https://stackoverflow.com/users/8372455/henryhub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 692, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1538602258, "creation_date": 1538602258, "question_id": 52635962, "link": "https://stackoverflow.com/questions/52635962/python-statsmodels-linear-regression", "title": "python statsmodels linear regression", "body": "<p>I am attempting to make a linear regression model based on pre project data and ultimately attempt to calculate some modeled data where I could compare pre/post project data... Can anyone tell me what the best proactice is else I maybe off in the weeds somewhere...</p>\n\n<p>For starters:</p>\n\n<pre><code>import statsmodels.api as sm\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\nng = pd.read_csv('C:/Users/ngDataBaseline.csv',  thousands=',', index_col='Date', parse_dates=True)\nng.head()\n</code></pre>\n\n<p>This will output:</p>\n\n<pre><code>    HDD Therm\nDate        \n2011-10-01  386 498\n2011-11-01  663 1810\n2011-12-01  972 4263\n2012-01-01  1131    5981\n2012-02-01  977 6951\n</code></pre>\n\n<p>And from statsmodels to fit my model I am using:</p>\n\n<pre><code>import statsmodels.formula.api as smf\n\nformula = 'Therm ~ HDD'\nmodel = smf.ols(formula, data=ng)\nresults = model.fit()\nresults.summary()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/d5Hbj.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d5Hbj.jpg\" alt=\"enter image description here\"></a></p>\n\n<pre><code>inter = results.params['Intercept']\nslope = results.params['HDD']\ninter, slope\n</code></pre>\n\n<p>prints:</p>\n\n<pre><code>(-532.6244255918659, 6.331883644532255)\n</code></pre>\n\n<p>So now I think I can import post project data and use some simple math in this format to calculate modeled data:\n<code>Y = mX + b</code></p>\n\n<pre><code>ng_postproject = pd.read_csv('C:/Users/ng_postproject.csv',  thousands=',', index_col='Date', parse_dates=True)\n\nng_postproject.head()\n</code></pre>\n\n<p>And this will output:</p>\n\n<pre><code>    HDD Therm\nDate        \n2014-10-01  291 663\n2014-11-01  545 1413\n2014-12-01  1069    6754\n2015-01-01  1134    7782\n2015-02-01  1415    10285\n</code></pre>\n\n<p>This is what I am using to calculate a modeled Therm usage.</p>\n\n<pre><code>ng_postproject['Therm_modeled'] = ng_postproject['HDD'].apply(lambda x: x * slope + inter)\n\n\nng_postproject['Therm_modeled']\n\nDate\n2014-10-01    1309.953715\n2014-11-01    2918.252161\n2014-12-01    6236.159190\n2015-01-01    6647.731627\n2015-02-01    8426.990931\n</code></pre>\n\n<p>Now if I am not too far off in  the weeds I should be able to add in a column header and compare post/pre project data... It would be really nice too if I could implement a confidence interval as well... Thanks for any response.</p>\n"}, {"tags": ["python", "aiohttp"], "comments": [{"owner": {"reputation": 14527, "user_id": 3454879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSMGz.jpg?s=128&g=1", "display_name": "Andrew Svetlov", "link": "https://stackoverflow.com/users/3454879/andrew-svetlov"}, "edited": false, "score": 0, "creation_date": 1538641911, "post_id": 52635941, "comment_id": 92216865, "body": "<code>discord-py 0.16.12 has requirement aiohttp&lt;1.1.0,&gt;=1.0.0, but you&#39;ll have aiohttp 3.4.4 which is incompatible.</code>  This is the key for your problem."}, {"owner": {"reputation": 63, "user_id": 10434683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6282393e31462d7601f94575a063d5ee?s=128&d=identicon&r=PG&f=1", "display_name": "Dome271", "link": "https://stackoverflow.com/users/10434683/dome271"}, "reply_to_user": {"reputation": 14527, "user_id": 3454879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSMGz.jpg?s=128&g=1", "display_name": "Andrew Svetlov", "link": "https://stackoverflow.com/users/3454879/andrew-svetlov"}, "edited": false, "score": 0, "creation_date": 1538646366, "post_id": 52635941, "comment_id": 92219587, "body": "So what am I supposed to do? Downloading an earlier version?"}, {"owner": {"reputation": 14527, "user_id": 3454879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSMGz.jpg?s=128&g=1", "display_name": "Andrew Svetlov", "link": "https://stackoverflow.com/users/3454879/andrew-svetlov"}, "edited": false, "score": 0, "creation_date": 1538646530, "post_id": 52635941, "comment_id": 92219682, "body": "I think yes. Install requirements that satisfy <code>discord-py</code>."}], "owner": {"reputation": 63, "user_id": 10434683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6282393e31462d7601f94575a063d5ee?s=128&d=identicon&r=PG&f=1", "display_name": "Dome271", "link": "https://stackoverflow.com/users/10434683/dome271"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1541, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1538602138, "creation_date": 1538602138, "question_id": 52635941, "link": "https://stackoverflow.com/questions/52635941/unable-to-pip-install-aiohttp-python", "title": "Unable to pip install aiohttp python", "body": "<p>Actually I'm just trying to install discord via pip and after some initial trouble achieving this. However I still get a traceback error. \n\"ModuleNotFoundError: No module named 'aiohttp'\"\nI tried so much now, via pip there is again an error:</p>\n\n<pre><code>Microsoft Windows [Version 10.0.17134.285]\n(c) 2018 Microsoft Corporation. Alle Rechte vorbehalten.\n\nC:\\Users\\Laptop&gt;pip install aiohttp\nCollecting aiohttp\n  Using cached https://files.pythonhosted.org/packages/7a/58/4476d96f35cc18a5133330f06c9ff3bc44fa64a9b6d15d2716efa6043b80/aiohttp-3.4.4-cp37-cp37m-win32.whl\nRequirement already satisfied: chardet&lt;4.0,&gt;=2.0 in c:\\users\\laptop\\appdata\\local\\programs\\python\\python37-32\\lib\\site-packages (from aiohttp) (3.0.4)\nCollecting yarl&lt;2.0,&gt;=1.0 (from aiohttp)\n  Using cached https://files.pythonhosted.org/packages/43/b8/057c3e5b546ff4b24263164ecda13f6962d85c9dc477fcc0bcdcb3adb658/yarl-1.2.6.tar.gz\nRequirement already satisfied: multidict&lt;5.0,&gt;=4.0 in c:\\users\\laptop\\appdata\\local\\programs\\python\\python37-32\\lib\\site-packages (from aiohttp) (4.4.2)\nRequirement already satisfied: attrs&gt;=17.3.0 in c:\\users\\laptop\\appdata\\local\\programs\\python\\python37-32\\lib\\site-packages (from aiohttp) (18.2.0)\nRequirement already satisfied: async-timeout&lt;4.0,&gt;=3.0 in c:\\users\\laptop\\appdata\\local\\programs\\python\\python37-32\\lib\\site-packages (from aiohttp) (3.0.0)\nRequirement already satisfied: idna&gt;=2.0 in c:\\users\\laptop\\appdata\\local\\programs\\python\\python37-32\\lib\\site-packages (from yarl&lt;2.0,&gt;=1.0-&gt;aiohttp) (2.7)\nBuilding wheels for collected packages: yarl\n  Running setup.py bdist_wheel for yarl ... error\n  Complete output from command c:\\users\\laptop\\appdata\\local\\programs\\python\\python37-32\\python.exe -u -c \"import setuptools, tokenize;__file__='C:\\\\Users\\\\Laptop\\\\AppData\\\\Local\\\\Temp\\\\pip-install-rak2eq35\\\\yarl\\\\setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" bdist_wheel -d C:\\Users\\Laptop\\AppData\\Local\\Temp\\pip-wheel-bz7m_99i --python-tag cp37:\n  running bdist_wheel\n  running build\n  running build_py\n  creating build\n  creating build\\lib.win32-3.7\n  creating build\\lib.win32-3.7\\yarl\n  copying yarl\\quoting.py -&gt; build\\lib.win32-3.7\\yarl\n  copying yarl\\__init__.py -&gt; build\\lib.win32-3.7\\yarl\n  running egg_info\n  writing yarl.egg-info\\PKG-INFO\n  writing dependency_links to yarl.egg-info\\dependency_links.txt\n  writing requirements to yarl.egg-info\\requires.txt\n  writing top-level names to yarl.egg-info\\top_level.txt\n  reading manifest file 'yarl.egg-info\\SOURCES.txt'\n  reading manifest template 'MANIFEST.in'\n  warning: no previously-included files matching '*.pyc' found anywhere in distribution\n  warning: no previously-included files matching '*.cache' found anywhere in distribution\n  warning: no previously-included files found matching 'yarl\\_quoting.html'\n  warning: no previously-included files found matching 'yarl\\_quoting.*.so'\n  warning: no previously-included files found matching 'yarl\\_quoting.pyd'\n  warning: no previously-included files found matching 'yarl\\_quoting.*.pyd'\n  no previously-included directories found matching 'docs\\_build'\n  writing manifest file 'yarl.egg-info\\SOURCES.txt'\n  copying yarl\\__init__.pyi -&gt; build\\lib.win32-3.7\\yarl\n  copying yarl\\_quoting.c -&gt; build\\lib.win32-3.7\\yarl\n  copying yarl\\_quoting.pyx -&gt; build\\lib.win32-3.7\\yarl\n  copying yarl\\py.typed -&gt; build\\lib.win32-3.7\\yarl\n  running build_ext\n  building 'yarl._quoting' extension\n\n  ----------------------------------------\n  Failed building wheel for yarl\n  Running setup.py clean for yarl\nFailed to build yarl\ndiscord-py 0.16.12 has requirement aiohttp&lt;1.1.0,&gt;=1.0.0, but you'll have aiohttp 3.4.4 which is incompatible.\ndiscord-py 0.16.12 has requirement websockets&lt;4.0,&gt;=3.1, but you'll have websockets 6.0 which is incompatible.\nInstalling collected packages: yarl, aiohttp\n  Running setup.py install for yarl ... error\n    Complete output from command c:\\users\\laptop\\appdata\\local\\programs\\python\\python37-32\\python.exe -u -c \"import setuptools, tokenize;__file__='C:\\\\Users\\\\Laptop\\\\AppData\\\\Local\\\\Temp\\\\pip-install-rak2eq35\\\\yarl\\\\setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record C:\\Users\\Laptop\\AppData\\Local\\Temp\\pip-record-fova16ok\\install-record.txt --single-version-externally-managed --compile:\n    running install\n    running build\n    running build_py\n    creating build\n    creating build\\lib.win32-3.7\n    creating build\\lib.win32-3.7\\yarl\n    copying yarl\\quoting.py -&gt; build\\lib.win32-3.7\\yarl\n    copying yarl\\__init__.py -&gt; build\\lib.win32-3.7\\yarl\n    running egg_info\n    writing yarl.egg-info\\PKG-INFO\n    writing dependency_links to yarl.egg-info\\dependency_links.txt\n    writing requirements to yarl.egg-info\\requires.txt\n    writing top-level names to yarl.egg-info\\top_level.txt\n    reading manifest file 'yarl.egg-info\\SOURCES.txt'\n    reading manifest template 'MANIFEST.in'\n    warning: no previously-included files matching '*.pyc' found anywhere in distribution\n    warning: no previously-included files matching '*.cache' found anywhere in distribution\n    warning: no previously-included files found matching 'yarl\\_quoting.html'\n    warning: no previously-included files found matching 'yarl\\_quoting.*.so'\n    warning: no previously-included files found matching 'yarl\\_quoting.pyd'\n    warning: no previously-included files found matching 'yarl\\_quoting.*.pyd'\n    no previously-included directories found matching 'docs\\_build'\n    writing manifest file 'yarl.egg-info\\SOURCES.txt'\n    copying yarl\\__init__.pyi -&gt; build\\lib.win32-3.7\\yarl\n    copying yarl\\_quoting.c -&gt; build\\lib.win32-3.7\\yarl\n    copying yarl\\_quoting.pyx -&gt; build\\lib.win32-3.7\\yarl\n    copying yarl\\py.typed -&gt; build\\lib.win32-3.7\\yarl\n    running build_ext\n    building 'yarl._quoting' extension\n\n    ----------------------------------------\nCommand \"c:\\users\\laptop\\appdata\\local\\programs\\python\\python37-32\\python.exe -u -c \"import setuptools, tokenize;__file__='C:\\\\Users\\\\Laptop\\\\AppData\\\\Local\\\\Temp\\\\pip-install-rak2eq35\\\\yarl\\\\setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record C:\\Users\\Laptop\\AppData\\Local\\Temp\\pip-record-fova16ok\\install-record.txt --single-version-externally-managed --compile\" failed with error code 3221225477 in C:\\Users\\Laptop\\AppData\\Local\\Temp\\pip-install-rak2eq35\\yarl\\\n\nC:\\Users\\Laptop&gt;\n</code></pre>\n\n<p>I even downloaded aiohttp manually and tried to install this way (discord.py worked like that):</p>\n\n<pre><code>Microsoft Windows [Version 10.0.17134.285]\n(c) 2018 Microsoft Corporation. Alle Rechte vorbehalten.\n\nC:\\Users\\Laptop\\Desktop\\Python\\discord\\aiohttp-master&gt;py setup.py install\nrunning install\nrunning bdist_egg\nrunning egg_info\nwriting aiohttp.egg-info\\PKG-INFO\nwriting dependency_links to aiohttp.egg-info\\dependency_links.txt\nwriting requirements to aiohttp.egg-info\\requires.txt\nwriting top-level names to aiohttp.egg-info\\top_level.txt\nreading manifest file 'aiohttp.egg-info\\SOURCES.txt'\nreading manifest template 'MANIFEST.in'\nwarning: no files found matching '*' under directory 'vendor'\nwarning: no files found matching 'aiohttp' anywhere in distribution\nwarning: no previously-included files matching '*.pyd' found anywhere in distribution\nwarning: no previously-included files matching '*.so' found anywhere in distribution\nwarning: no previously-included files matching '*.lib' found anywhere in distribution\nwarning: no previously-included files matching '*.dll' found anywhere in distribution\nwarning: no previously-included files matching '*.a' found anywhere in distribution\nwarning: no previously-included files matching '*.obj' found anywhere in distribution\nwarning: no previously-included files found matching 'aiohttp\\*.html'\nno previously-included directories found matching 'docs\\_build'\nwriting manifest file 'aiohttp.egg-info\\SOURCES.txt'\ninstalling library code to build\\bdist.win32\\egg\nrunning install_lib\nrunning build_py\nrunning build_ext\nbuilding 'aiohttp._websocket' extension\n\nC:\\Users\\Laptop\\Desktop\\Python\\discord\\aiohttp-master&gt;\n</code></pre>\n\n<p>However still nothing. I researched it on the internet and found nothing for my specific error.</p>\n\n<p>Can someone help me with that?</p>\n"}, {"tags": ["python", "python-asyncio", "aiohttp"], "comments": [{"owner": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "edited": false, "score": 1, "creation_date": 1538603007, "post_id": 52635940, "comment_id": 92205368, "body": "<code>html1</code> will be completely loaded before <code>html2</code> in your example. Why do you think they are being executed in parallel?"}, {"owner": {"reputation": 233, "user_id": 3691980, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/79a00ecc22ba97a0f26c48273a778557?s=128&d=identicon&r=PG&f=1", "display_name": "rickcoup", "link": "https://stackoverflow.com/users/3691980/rickcoup"}, "reply_to_user": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "edited": false, "score": 0, "creation_date": 1538608300, "post_id": 52635940, "comment_id": 92206766, "body": "I thought it goes to fetch the URL1. Without html1 coming back, it&#39;s fetching the URL2 as they are async?"}, {"owner": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "edited": false, "score": 1, "creation_date": 1538631369, "post_id": 52635940, "comment_id": 92211686, "body": "They are asynchronous but that doesn&#39;t mean they run at the same time. For them to run in parallel you&#39;d have to do <code>html1, html2 = await asyncio.gather(fetch(URL1), fetch(URL2))</code>. Think of <code>await</code> as a part of the code that tells the interpreter that it can go work on other stuff while the current task is pending. When the HTML has been fetched, the interpreter comes back and continues running your code where it left off."}, {"owner": {"reputation": 233, "user_id": 3691980, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/79a00ecc22ba97a0f26c48273a778557?s=128&d=identicon&r=PG&f=1", "display_name": "rickcoup", "link": "https://stackoverflow.com/users/3691980/rickcoup"}, "reply_to_user": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "edited": false, "score": 0, "creation_date": 1538662458, "post_id": 52635940, "comment_id": 92229691, "body": "It&#39;s interesting to learn that &quot;they are asynchronous but that doesn&#39;t mean they run at the same time&quot;. So back to the first code block, if the fetch an URL is in the hello function, and 10 requests coming in. The 10 requests are served one by one, even the CPU is idle while fetching. Is that correct?"}, {"owner": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "edited": false, "score": 1, "creation_date": 1538681330, "post_id": 52635940, "comment_id": 92239112, "body": "Not quite. <code>aiohttp</code> will accept every request you send to it and begin responding to each one immediately (otherwise, what would be the benefit of using an asynchronous HTTP server?). All your code is still running in a single thread, so you won&#39;t actually be executing two pieces of code at exactly the same time, just switching contexts every time you have to wait for something slow to happen (i.e. the <code>await</code>s). But when 99% of your time is spent waiting for data to come in over the network, this approach works just fine (and is used by webservers like nginx)."}, {"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 0, "creation_date": 1538784652, "post_id": 52635940, "comment_id": 92278718, "body": "<code>await x; await y</code> means that first <code>x</code> will be executed, then <code>y</code>. <code>await foo</code> means that the current coroutine will be suspended until <code>foo</code> is ready. Neither of those conflicts with <b>other</b> coroutines running at the same time. In other words, it is not correct that the 10 requests are served one by one, because there is no <code>await</code> that would force them into sequential order."}], "owner": {"reputation": 233, "user_id": 3691980, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/79a00ecc22ba97a0f26c48273a778557?s=128&d=identicon&r=PG&f=1", "display_name": "rickcoup", "link": "https://stackoverflow.com/users/3691980/rickcoup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 481, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1538602135, "creation_date": 1538602135, "question_id": 52635940, "link": "https://stackoverflow.com/questions/52635940/python-aiohttp-server-and-client-with-asyncio", "title": "python aiohttp server and client with asyncio", "body": "<p>I am running an aiohttp server. It's taking request one by one, and works fine.</p>\n\n<pre><code>from aiohttp import web\n\nasync def hello(request):\n    return web.Response(text='done')\n\napp = web.Application()\napp.add_routes([web.get('/', hello)])\n\nweb.run_app(app)\n</code></pre>\n\n<p>Now I need to make two slow outgoing requests one by one. I am thinking to put in the aiohttp client code into the hello function. So when the server is waiting for the outbound requests coming back, it can serve the next inbound request.</p>\n\n<pre><code>async def hello(request):\n\n\n        async def fetch(session, url):\n            with async_timeout.timeout(10):\n                async with session.get(url) as response:\n                    return await response.text()\n\n        async def main(loop):\n            async with aiohttp.ClientSession(loop=loop) as session:\n                html1 = await fetch(session, URL1)\n                html2 = await fetch(session, URL2)\n\n        loop = asyncio.get_event_loop()\n        loop.run_until_complete(main(loop))\n\n    return web.Response(text='done')\n</code></pre>\n\n<p>The above html1 and html2 will go out simultaneously. How can I make the second fetch when the first fetch is finished? Or some other design can help?</p>\n"}, {"tags": ["python", "random", "passwords"], "comments": [{"owner": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "edited": false, "score": 0, "creation_date": 1538601953, "post_id": 52635869, "comment_id": 92204981, "body": "Welcome to Stack Overflow!  Please consider formatting the code elements in your post properly (indent 4 spaces or use backticks for inline blocks).  Also, if you could provide the exact expected output (which I believe is <code>nigc5496</code>), and a consistent random seed (so that everyone can check against the same answer), that&#39;d make your post even better."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1538628182, "post_id": 52635869, "comment_id": 92210821, "body": "The instructions say &quot;consisting of three letters&quot;, but your example uses <i>four</i> letters. That&#39;s a bit confusing."}], "answers": [{"tags": [], "owner": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "is_accepted": false, "score": 0, "last_activity_date": 1538602086, "creation_date": 1538602086, "answer_id": 52635931, "question_id": 52635869, "link": "https://stackoverflow.com/questions/52635869/concatenate-tuple-elements-as-string-where-one-element-is-string-and-the-other-i/52635931#52635931", "title": "Concatenate tuple elements as string where one element is string and the other is a tuple of integers", "body": "<p>You can convert the numbers to strings, put them together as one string with <code>join</code>, and then concatenate with the letters:</p>\n\n<pre><code>password = ('nigc', (5, 4, 9, 6))\n\npassword[0] + ''.join([str(x) for x in password[1]])\n# 'nigc5496'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "is_accepted": false, "score": 0, "last_activity_date": 1538603159, "creation_date": 1538603159, "answer_id": 52636128, "question_id": 52635869, "link": "https://stackoverflow.com/questions/52635869/concatenate-tuple-elements-as-string-where-one-element-is-string-and-the-other-i/52636128#52636128", "title": "Concatenate tuple elements as string where one element is string and the other is a tuple of integers", "body": "<p>I think you can simplify your code and use a <a href=\"https://www.python.org/dev/peps/pep-0498/\" rel=\"nofollow noreferrer\">string format </a>to format your passwords. For instance:</p>\n\n<pre><code>import random\n\nname = \"Guido van Rossum\"\n\nname2 = name.replace(\" \", \"\")\n\nletter1 = random.choice(name2)\nletter2 = random.choice(name2)\nletter3 = random.choice(name2)\nletter4 = random.choice(name2)\n\nnum1 = random.randint(0, 9)\nnum2 = random.randint(0, 9)\nnum3 = random.randint(0, 9)\nnum4 = random.randint(0, 9)\n\nprint(f\"{letter1}{letter2}{letter3}{letter4}{num1}{num2}{num3}{num4}\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4254, "user_id": 10255652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5DDj.jpg?s=128&g=1", "display_name": "vash_the_stampede", "link": "https://stackoverflow.com/users/10255652/vash-the-stampede"}, "is_accepted": false, "score": 0, "last_activity_date": 1538626540, "creation_date": 1538626540, "answer_id": 52638911, "question_id": 52635869, "link": "https://stackoverflow.com/questions/52635869/concatenate-tuple-elements-as-string-where-one-element-is-string-and-the-other-i/52638911#52638911", "title": "Concatenate tuple elements as string where one element is string and the other is a tuple of integers", "body": "<p>You could use <em>formatted</em> printing and unpack the <code>passwordnumber</code> <em>tuple</em></p>\n\n<pre><code>print('{}{}{}{}{}'.format(passwordletter, *passwordnumber)\n# nigc5496\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1149, "user_id": 2480947, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/0fI4r.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/2480947/nick"}, "is_accepted": false, "score": 0, "last_activity_date": 1538687493, "last_edit_date": 1538687493, "creation_date": 1538642916, "answer_id": 52642655, "question_id": 52635869, "link": "https://stackoverflow.com/questions/52635869/concatenate-tuple-elements-as-string-where-one-element-is-string-and-the-other-i/52642655#52642655", "title": "Concatenate tuple elements as string where one element is string and the other is a tuple of integers", "body": "<p>This is all going in the right direction, just some confusion around strings and tuples to clear up. The reason you have brackets in the answer is that</p>\n\n<pre><code>(random.randint(0, 9),\n random.randint(0, 9),\n random.randint(0, 9),\n random.randint(0, 9))\n</code></pre>\n\n<p>(numbers separate by commas, in round brackets) and</p>\n\n<pre><code>passwordletter, passwordnumber\n</code></pre>\n\n<p>are tuples. You have ended up with a 4-tuple (the digits) inside a 2-tuple. Python is bracketing them to let you know:</p>\n\n<pre><code>('nigc', (5, 4, 9, 6))\n</code></pre>\n\n<p>means a 2-tuple with a string in the first place, and an embedded 4-tuple in the second place.</p>\n\n<p>What needs to happen now is:</p>\n\n<ol>\n<li>joining the 4-tuple together to make a string</li>\n<li>add the strings to each other to get the full password</li>\n</ol>\n\n<p>Before joining the numbers into a string, you need to convert the numbers themselves into strings, otherwise you'll get a <code>TypeError</code> when you try to add integers to strings. <code>str(5)</code> produces the string <code>'5'</code> so let's use <code>str()</code> on each of your numbers:</p>\n\n<pre><code>passwordnumber = (str(random.randint(0, 9)),\n                  str(random.randint(0, 9)),\n                  str(random.randint(0, 9)),\n                  str(random.randint(0, 9)))\n</code></pre>\n\n<p>But this is getting repetitive and complicated to read. And what if security got tighter and you wanted a 12-digit password? Python has a useful facility called a list comprehension, which is great for building lists of any size. We can use one to build a list of numbers without repeating code:</p>\n\n<pre><code>numbers_list = [str(randint(0, 9)) for _ in range(4)]\n</code></pre>\n\n<p>Here's a full answer, much shorter than yours, using comprehensions and a few other useful bits of Python. Note the use of<code>str()</code> to convert numbers to strings before joining, as mentioned above.</p>\n\n<pre><code>from random import choice, randint\n\nname = 'Sherlock Holmes'\nname_as_word_list = name.lower().split()\nname_no_spaces = ''.join(name_as_word_list)\n\nletters_list = [choice(name_no_spaces) for _ in range(3)]\nnumbers_list = [str(randint(0, 9)) for _ in range(4)]\npassword = ''.join(letters_list + numbers_list)\nprint(password)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7124263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32e93b8703183c41534bc74fb5cecf31?s=128&d=identicon&r=PG&f=1", "display_name": "N smith", "link": "https://stackoverflow.com/users/7124263/n-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1007, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1538687493, "creation_date": 1538601738, "last_edit_date": 1538602528, "question_id": 52635869, "link": "https://stackoverflow.com/questions/52635869/concatenate-tuple-elements-as-string-where-one-element-is-string-and-the-other-i", "title": "Concatenate tuple elements as string where one element is string and the other is a tuple of integers", "body": "<p>the prompt is:</p>\n\n<p>Write a Python program that prompts the user to enter his or her name and then creates a secret password consisting of three letters (in lowercase) randomly picked up from his or her name, and a random four-digit number. For example, if the user enters \u201cVassilis Bouras\u201d a secret password can probably be one of \u201csar1359\u201d or \u201cvbs7281\u201d or \u201cbor1459\u201d. Space characters are not allowed in the secret password. You will have to use string slicing, random, lower, and446670 concatenation.</p>\n\n<p>my code is:</p>\n\n<pre><code>import random\n\nname = input(\"Enter your name all lowercase \")\n\nname2 = name.replace(\" \", \"\")\n\nletter1 = random.choice(name2)\nletter2 = random.choice(name2)\nletter3 = random.choice(name2)\nletter4 = random.choice(name2)\n\npasswordnumber = (random.randint(0, 9),\n                  random.randint(0, 9),\n                  random.randint(0, 9),\n                  random.randint(0, 9))\n\npasswordletter = (letter1 + letter2 + letter3 + letter4)\n\npassword = passwordletter, passwordnumber\n\nprint(password)\n</code></pre>\n\n<p>Now I entered the name \"nick g\" into the program and got:</p>\n\n<p>('nigc', (5, 4, 9, 6))</p>\n\n<p>What I'm wondering is how can I make the output put the letters numbers together without spacing them out like this and putting parenthesis. any help is very appreciated thanks!</p>\n"}, {"tags": ["python", "numpy", "python-3.6"], "comments": [{"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1538603509, "post_id": 52635868, "comment_id": 92205541, "body": "The---arguably not very pretty---way to make the star expression work is <code>grid[(*ids,)]</code>."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1538626534, "post_id": 52635868, "comment_id": 92210421, "body": "<code>grid[id]</code> actually produces a (6,3,3,3,3,3) array, with 6 copies of <code>grid[0,...]</code> (the first &#39;row&#39; of <code>grid</code>.  A list <code>ids</code> indexes the first dimension."}], "answers": [{"comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1538604519, "post_id": 52635908, "comment_id": 92205846, "body": "It&#39;s Python itself that doesn&#39;t allow the * expansion in an indexing expression."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1538618245, "post_id": 52635908, "comment_id": 92208733, "body": "Obviously, since that&#39;s a <code>SyntaxError</code> :)   .. this was more referring to <code>grid[ids]</code>, which OP presumably tried first and found to be not working .."}, {"owner": {"reputation": 358, "user_id": 5112486, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/055d9302c2a0e6c1aff1876a69c6e29c?s=128&d=identicon&r=PG&f=1", "display_name": "Caladbolgll", "link": "https://stackoverflow.com/users/5112486/caladbolgll"}, "edited": false, "score": 0, "creation_date": 1538672007, "post_id": 52635908, "comment_id": 92235477, "body": "<i>facepalm</i> yup, that works."}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 2, "last_activity_date": 1538601981, "creation_date": 1538601981, "answer_id": 52635908, "question_id": 52635868, "link": "https://stackoverflow.com/questions/52635868/how-to-input-a-list-of-indices-into-ndarray-to-access-an-element/52635908#52635908", "title": "How to input a list (of indices) into ndarray to access an element?", "body": "<p>numpy doesn't duck-type correctly here.  It has to be a tuple. </p>\n\n<pre><code>grid[tuple(ids)]\n</code></pre>\n"}], "owner": {"reputation": 358, "user_id": 5112486, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/055d9302c2a0e6c1aff1876a69c6e29c?s=128&d=identicon&r=PG&f=1", "display_name": "Caladbolgll", "link": "https://stackoverflow.com/users/5112486/caladbolgll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1538603787, "accepted_answer_id": 52635908, "answer_count": 1, "score": 0, "last_activity_date": 1538603064, "creation_date": 1538601738, "last_edit_date": 1538603064, "question_id": 52635868, "link": "https://stackoverflow.com/questions/52635868/how-to-input-a-list-of-indices-into-ndarray-to-access-an-element", "closed_reason": "Duplicate", "title": "How to input a list (of indices) into ndarray to access an element?", "body": "<p>I have a high-dimensional ndarray that looks like below, and I'm trying to access one element with a list of N indices:</p>\n\n<pre><code>&gt;&gt;&gt; grid = np.ones([3, 3, 3, 3, 3, 3, 3], dtype=np.uint8)\n&gt;&gt;&gt; ids = [0, 0, 0, 0, 0, 0]\n&gt;&gt;&gt; print(grid[0, 0, 0, 0, 0, 0, 0])\n1\n&gt;&gt;&gt; print(grid[*id])\n\n  File \"&lt;stdin&gt;\", line 1\n    print(grid[*id])\n               ^\nSyntaxError: invalid syntax\n</code></pre>\n\n<p>I also tried <code>print(grid[id])</code>, but that prints out the entire <code>grid</code> instead of one element.</p>\n\n<p>What's the correct syntax to do this, and how come starred expression doesn't work in this case?</p>\n"}, {"tags": ["python", "tensorflow", "keras", "jupyter-notebook", "conda"], "answers": [{"comments": [{"owner": {"reputation": 2040, "user_id": 613326, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/xyLtQ.jpg?s=128&g=1", "display_name": "user613326", "link": "https://stackoverflow.com/users/613326/user613326"}, "edited": false, "score": 0, "creation_date": 1538604737, "post_id": 52636245, "comment_id": 92205893, "body": "i&#39;ve trying all day (multiple conda installs as well), i (think) I just got it working a minute ago, i&#39;ll post it, your welcome to comment it"}, {"owner": {"reputation": 2040, "user_id": 613326, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/xyLtQ.jpg?s=128&g=1", "display_name": "user613326", "link": "https://stackoverflow.com/users/613326/user613326"}, "edited": false, "score": 0, "creation_date": 1538605577, "post_id": 52636245, "comment_id": 92206110, "body": "posted it curious what you think of it, was it overkill (8gig) or not ?"}, {"owner": {"reputation": 329, "user_id": 10365609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXPGi.jpg?s=128&g=1", "display_name": "JLuxton", "link": "https://stackoverflow.com/users/10365609/jluxton"}, "reply_to_user": {"reputation": 2040, "user_id": 613326, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/xyLtQ.jpg?s=128&g=1", "display_name": "user613326", "link": "https://stackoverflow.com/users/613326/user613326"}, "edited": false, "score": 0, "creation_date": 1538620743, "post_id": 52636245, "comment_id": 92209234, "body": "Maybe overkill, but if it gets you up and running and you have the memory to spare... why not :)"}, {"owner": {"reputation": 2040, "user_id": 613326, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/xyLtQ.jpg?s=128&g=1", "display_name": "user613326", "link": "https://stackoverflow.com/users/613326/user613326"}, "edited": false, "score": 0, "creation_date": 1538648361, "post_id": 52636245, "comment_id": 92220681, "body": "Can you run environmenst without adding conda install jupyter ? I&#39;m new to this so i wasnt sure it would be required. It seams to run now, although now i get all kind of other python errors (python libs are in constant development and some libs are not that stable i noticed, so i joined in on a bug report about matplotlib)."}, {"owner": {"reputation": 329, "user_id": 10365609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXPGi.jpg?s=128&g=1", "display_name": "JLuxton", "link": "https://stackoverflow.com/users/10365609/jluxton"}, "reply_to_user": {"reputation": 2040, "user_id": 613326, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/xyLtQ.jpg?s=128&g=1", "display_name": "user613326", "link": "https://stackoverflow.com/users/613326/user613326"}, "edited": false, "score": 0, "creation_date": 1538655481, "post_id": 52636245, "comment_id": 92224910, "body": "Kinda tough to plug in without knowing more about the state of your environment. Here is a post I think explains things pretty well: <a href=\"https://jakevdp.github.io/blog/2017/12/05/installing-python-packages-from-jupyter/\" rel=\"nofollow noreferrer\">jakevdp.github.io/blog/2017/12/05/&hellip;</a> . Maybe this will help you troubleshoot?"}], "tags": [], "owner": {"reputation": 329, "user_id": 10365609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXPGi.jpg?s=128&g=1", "display_name": "JLuxton", "link": "https://stackoverflow.com/users/10365609/jluxton"}, "is_accepted": false, "score": 0, "last_activity_date": 1538603751, "creation_date": 1538603751, "answer_id": 52636245, "question_id": 52635866, "link": "https://stackoverflow.com/questions/52635866/how-to-add-a-conda-environment-in-jupyter/52636245#52636245", "title": "How to add a conda environment in jupyter", "body": "<p>Fundamentally the problem is usually rooted in the fact that the Jupyter kernels are disconnected from Jupyter's shell; in other words, the installer points to a different Python version than is being used in the notebook.</p>\n\n<p>You might first try installing with conda. </p>\n\n<pre><code>conda install -c conda-forge keras \n</code></pre>\n\n<p>Otherwise you can try installing from within the notebook itself:</p>\n\n<pre><code># Install a pip package in the current Jupyter kernel\nimport sys\n!{sys.executable} -m pip install keras \n</code></pre>\n\n<p>As tempting as it might be... DO NOT DO:</p>\n\n<pre><code># DON'T DO THIS\n!pip install keras \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2040, "user_id": 613326, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/xyLtQ.jpg?s=128&g=1", "display_name": "user613326", "link": "https://stackoverflow.com/users/613326/user613326"}, "is_accepted": false, "score": 1, "last_activity_date": 1538607439, "last_edit_date": 1538607439, "creation_date": 1538605535, "answer_id": 52636522, "question_id": 52635866, "link": "https://stackoverflow.com/questions/52635866/how-to-add-a-conda-environment-in-jupyter/52636522#52636522", "title": "How to add a conda environment in jupyter", "body": "<p>Well when i was in the (tf) environment made earlier and typed \"conda list\"\nI got a fairly short list of installed packages (just tensorflow) about 26 packages.\nThen I noted that jupyter package wasnt in this environment.\nNot sure if it should i added it with </p>\n\n<pre><code>conda install jupyter\n</code></pre>\n\n<p>After a while (that command added about 8 Gig of python code...) it got installed.\nWith the message:<br>\nEnabling notebook extension jupyter-js-widgets/extension...\n      - Validating: ok</p>\n\n<p>next i tried </p>\n\n<pre><code>(tf) C:\\Keras&gt;python -m ipykernel install --user --name tf --display-name \"Python3 tensorflow\"\n</code></pre>\n\n<p>with a message \"Installed kernelspec tf in C:\\Users\\Peter\\AppData\\Roaming\\jupyter\\kernels\\tf\"</p>\n\n<blockquote>\n  <p>I'm not sure though if this is the proper solution, because would it\n  always be required to add 8Giga just to launch it in a webpage.\n  (seams overkill, but i just dont know if that's normal for conda-jupyter. (while jupyther was allready in the 'plain' python 3\n  enviroment. (or it was available to conda)...not sure i'm thinking\n  perhaps it be better if conda was part of jupyter but maybe its just\n  the otherway around.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 1432481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a29327f3c15f30e936b1d324e98b637?s=128&d=identicon&r=PG", "display_name": "Raul", "link": "https://stackoverflow.com/users/1432481/raul"}, "is_accepted": false, "score": 0, "last_activity_date": 1546768348, "last_edit_date": 1546768348, "creation_date": 1546724520, "answer_id": 54056539, "question_id": 52635866, "link": "https://stackoverflow.com/questions/52635866/how-to-add-a-conda-environment-in-jupyter/54056539#54056539", "title": "How to add a conda environment in jupyter", "body": "<p>Create kernel.json file in  <code>~/local/share/jupyter/kernels/&lt;YOUR_KERNEL_NAME/</code>. Take an example for the content from:<code>/usr/local/share/jupyter/kernels/python3/kernel.json</code> </p>\n\n<p>see: <a href=\"https://jupyter-client.readthedocs.io/en/stable/kernels.html\" rel=\"nofollow noreferrer\">https://jupyter-client.readthedocs.io/en/stable/kernels.html</a>\n     <a href=\"https://ipython.org/ipython-doc/3/development/kernels.html\" rel=\"nofollow noreferrer\">https://ipython.org/ipython-doc/3/development/kernels.html</a> </p>\n"}], "owner": {"reputation": 2040, "user_id": 613326, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/xyLtQ.jpg?s=128&g=1", "display_name": "user613326", "link": "https://stackoverflow.com/users/613326/user613326"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2267, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1546768348, "creation_date": 1538601714, "last_edit_date": 1538602689, "question_id": 52635866, "link": "https://stackoverflow.com/questions/52635866/how-to-add-a-conda-environment-in-jupyter", "title": "How to add a conda environment in jupyter", "body": "<p>I'm try to enable a keras environmnt into jupyter.<br>\nUsing below commands I added the conda tf environment for Keras :</p>\n\n<pre><code>C:&gt;conda create --name tf python=3.5 \nC:&gt;activate tf (tf)\nC:\\Keras\\Test&gt;pip install --ignore-installed --upgrade https://storage.googleapis.com/tensorflow/windows/cpu/tensorflow-1.4.0-cp35-cp35m-win_amd64.whl\n</code></pre>\n\n<p>Next I downloaded Keras-2.1.3-py2.py3-none-any.whl (from : <a href=\"https://repo.continuum.io/archive/\" rel=\"nofollow noreferrer\">https://repo.continuum.io/archive/</a>)<br>\nAnd successfully installed it. </p>\n\n<pre><code>(tf) C:\\Keras&gt;pip install --ignore-installed --upgrade C:\\Keras\\Keras-2.1.3-py2.py3-none-any.whl\n</code></pre>\n\n<p>But then when i type </p>\n\n<pre><code>(tf) c:\\Keras\\Jupyter Notebook\n</code></pre>\n\n<p>.</p>\n\n<p>I would have thought to be able to 'switch' to the tf keras environment.\nWhen starting up the web browser\nBut all I see in below jupyter page is the python 3 environment which doesn't know of keras. So shouldn't I see a <strong>\"tf\"</strong> environment here as well?\nfrom both environments i can start the jupyter notebook, but not sure if that should make a difference, both startups dont show tf, am i missing something here?. (in the picture i also show both conda consoles)\n<a href=\"https://i.stack.imgur.com/d3h9o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d3h9o.png\" alt=\"enter image description here\"></a></p>\n\n<p>When i try to launch a notebook that makes use of keras.<br>\nThen this is the error i see like if it wasnt installed ?. (i'm sure it did though).\n<a href=\"https://i.stack.imgur.com/NUvy0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NUvy0.png\" alt=\"enter image description here\"></a></p>\n\n<p>.<br>\nHowever a small test in python ran directly from the console\nproves keras is installed and working \n<a href=\"https://i.stack.imgur.com/HsgdT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HsgdT.png\" alt=\"enter image description here\"></a></p>\n\n<p>(but why not in jupyter??)</p>\n"}, {"tags": ["python", "string", "pandas", "row"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1538601842, "post_id": 52635812, "comment_id": 92204947, "body": "<code>(df==&#39;cat&#39;).any(1) </code>"}], "answers": [{"tags": [], "owner": {"reputation": 23213, "user_id": 7131757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wvEUE.jpg?s=128&g=1", "display_name": "Giorgos Myrianthous", "link": "https://stackoverflow.com/users/7131757/giorgos-myrianthous"}, "is_accepted": true, "score": 3, "last_activity_date": 1538830230, "last_edit_date": 1538830230, "creation_date": 1538601927, "answer_id": 52635901, "question_id": 52635812, "link": "https://stackoverflow.com/questions/52635812/how-to-determine-if-any-column-has-a-particular-value/52635901#52635901", "title": "how to determine if any column has a particular value", "body": "<p>The following should do the trick for you:</p>\n\n<pre><code>df['Column4'] = np.where((df.astype(np.object)=='cat').any(1), 'Yes', 'No')\n</code></pre>\n\n<p>Working example: </p>\n\n<pre><code>&gt;&gt;&gt; import pandas as pd\n&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; d = {'ID': [1, 2, 3], 'Column1': ['cat', 'dog', 'leopard'], 'Column2': ['dog', 'elephant', 'monkey'], 'Column3': ['bird', 'tiger', 'cat']}\n&gt;&gt;&gt; df = pd.DataFrame(data=d)\n&gt;&gt;&gt; df\n   Column1   Column2 Column3  ID\n0      cat       dog    bird   1\n1      dog  elephant   tiger   2\n2  leopard    monkey     cat   3\n&gt;&gt;&gt; df['Column4'] = np.where((df.astype(np.object)=='cat').any(1), 'Yes', 'No')\n&gt;&gt;&gt; df\n   Column1   Column2 Column3  ID Column4\n0      cat       dog    bird   1     Yes\n1      dog  elephant   tiger   2      No\n2  leopard    monkey     cat   3     Yes\n</code></pre>\n\n<p><strong>EDIT:</strong> \nIn case you want to check if any of the columns <em>contains</em> a particular string you can use the following: </p>\n\n<pre><code>df['Column4'] = df.apply(lambda r: r.str.contains('cat', case=False).any(), axis=1)\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 10331210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18ec46715d1b41cce4ff28915359322f?s=128&d=identicon&r=PG&f=1", "display_name": "Priya", "link": "https://stackoverflow.com/users/10331210/priya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 52635901, "answer_count": 1, "score": 1, "last_activity_date": 1538830230, "creation_date": 1538601390, "last_edit_date": 1538661693, "question_id": 52635812, "link": "https://stackoverflow.com/questions/52635812/how-to-determine-if-any-column-has-a-particular-value", "title": "how to determine if any column has a particular value", "body": "<p>I have a dataframe that looks like this:</p>\n\n<pre><code>ID           Column1            Column2             Column3\n1            cats                 dog                bird\n2            dog                 elephant           tiger\n3            leopard             monkey             cat\n</code></pre>\n\n<p>I'd like to create a new column that indicates whether <code>cat</code> is present in that row, as part of a string, so that the dataframe looks like this:</p>\n\n<pre><code>   ID           Column1            Column2             Column3  Column4\n    1            cats                 dog                bird      Yes\n    2            dog                 elephant           tiger     No\n    3            leopard             monkey             cat       Yes\n</code></pre>\n\n<p>I would like to do this without assessing each column individually, because in the real data set there are a lot of columns. </p>\n"}, {"tags": ["python", "opencv", "object-detection"], "answers": [{"comments": [{"owner": {"reputation": 807, "user_id": 9537627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/054f3eb519a1804a60eea6c4a39f6cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Angelo", "link": "https://stackoverflow.com/users/9537627/angelo"}, "edited": false, "score": 0, "creation_date": 1538660242, "post_id": 52637852, "comment_id": 92228069, "body": "Thank you Sir, appreciated. May I ask if you could explain with simple English what&#39;s the meaning of param1 and param2? Probably they are the only two parameters I don&#39;t fully understand in the formula (I reviewed the official definition but i honestly don&#39;t understand it). Thanks"}, {"owner": {"reputation": 3247, "user_id": 1862500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cab10ec8f977e034feb17d4af73a9e6?s=128&d=identicon&r=PG", "display_name": "Yohanes Gultom", "link": "https://stackoverflow.com/users/1862500/yohanes-gultom"}, "reply_to_user": {"reputation": 807, "user_id": 9537627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/054f3eb519a1804a60eea6c4a39f6cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Angelo", "link": "https://stackoverflow.com/users/9537627/angelo"}, "edited": false, "score": 0, "creation_date": 1538663713, "post_id": 52637852, "comment_id": 92230574, "body": "I&#39;m afraid I too don&#39;t have sufficient understanding about the algorithm. I just increased/decreased the parameters step by step to find the best results. All that I know is that <code>param1</code> determines the sensitivity of edge detection algorithm while <code>param2</code> determines the sensitivity of center detection algorithm <a href=\"https://docs.opencv.org/3.1.0/d4/d70/tutorial_hough_circle.html\" rel=\"nofollow noreferrer\">docs.opencv.org/3.1.0/d4/d70/tutorial_hough_circle.html</a>"}, {"owner": {"reputation": 807, "user_id": 9537627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/054f3eb519a1804a60eea6c4a39f6cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Angelo", "link": "https://stackoverflow.com/users/9537627/angelo"}, "edited": false, "score": 0, "creation_date": 1538667858, "post_id": 52637852, "comment_id": 92233289, "body": "I see. Your solution is helpful but I tested on another instagram page and it shows more than 30 random circles all over the page. I don&#39;t understand how come this library is so unstable especially when it comes to identify clear objects on a web page"}, {"owner": {"reputation": 3247, "user_id": 1862500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cab10ec8f977e034feb17d4af73a9e6?s=128&d=identicon&r=PG", "display_name": "Yohanes Gultom", "link": "https://stackoverflow.com/users/1862500/yohanes-gultom"}, "reply_to_user": {"reputation": 807, "user_id": 9537627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/054f3eb519a1804a60eea6c4a39f6cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Angelo", "link": "https://stackoverflow.com/users/9537627/angelo"}, "edited": false, "score": 0, "creation_date": 1538690323, "post_id": 52637852, "comment_id": 92242726, "body": "You have to dive deeper to the theory &amp; library source code to understand that. You can also post question in dsp.stackexchange.com as this is not actually about  simple coding anymore. But if you don&#39;t want to go that far, you can play around with preprocessing methods such as filtering &amp; additional edge detection <a href=\"http://layer0.authentise.com/detecting-circular-shapes-using-contours.html\" rel=\"nofollow noreferrer\">layer0.authentise.com/&hellip;</a>"}], "tags": [], "owner": {"reputation": 3247, "user_id": 1862500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cab10ec8f977e034feb17d4af73a9e6?s=128&d=identicon&r=PG", "display_name": "Yohanes Gultom", "link": "https://stackoverflow.com/users/1862500/yohanes-gultom"}, "is_accepted": true, "score": 2, "last_activity_date": 1538617676, "creation_date": 1538617676, "answer_id": 52637852, "question_id": 52635798, "link": "https://stackoverflow.com/questions/52635798/python-opencv-to-detect-circles-giving-strange-results/52637852#52637852", "title": "Python - openCv to detect circles giving strange results", "body": "<p>I played around with the parameters and managed to detect all circles (Ubuntu 16.04 LTS x64, Python 3.7, <code>numpy==1.15.1</code>, <code>python-opencv==3.4.3</code>):</p>\n\n<pre><code>circles = cv2.HoughCircles(\n    gray,\n    cv2.HOUGH_GRADIENT,\n    1.7,\n    minDist=100,\n    param1=48,\n    param2=100,\n    minRadius=2,\n    maxRadius=100\n)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/yMiQt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yMiQt.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 807, "user_id": 9537627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/054f3eb519a1804a60eea6c4a39f6cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Angelo", "link": "https://stackoverflow.com/users/9537627/angelo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 811, "favorite_count": 0, "accepted_answer_id": 52637852, "answer_count": 1, "score": 0, "last_activity_date": 1538617676, "creation_date": 1538601320, "question_id": 52635798, "link": "https://stackoverflow.com/questions/52635798/python-opencv-to-detect-circles-giving-strange-results", "title": "Python - openCv to detect circles giving strange results", "body": "<p>I'm using the code explained in <a href=\"https://www.pyimagesearch.com/2014/07/21/detecting-circles-images-using-opencv-hough-circles/#comment-480634\" rel=\"nofollow noreferrer\">https://www.pyimagesearch.com/2014/07/21/detecting-circles-images-using-opencv-hough-circles/#comment-480634</a> and trying to basically detect the small rounded profile images (to be precise 5) displayed lower half of this sample instagram page (attached). What I can't figure out is why:\n1. only one out of the 5 small rounded profile circles is captured by the code\n2. how come there's a big circle displayed on the page and seems quite absurd to me.\nHere is the code I'm using:</p>\n\n<pre><code># we create a copy of the original image so we can draw our detected circles \n# without destroying the original image.\nimage = cv2.imread(\"instagram_page.png\")\n\n# the cv2.HoughCircles function requires an 8-bit, single channel image, \n# so we\u2019ll convert from the RGB color space to grayscale\ngray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n#blurred = cv2.GaussianBlur(gray, (5, 5), 0)\n\n# detect circles in the image. We pass in the image we want to detect circles as the first argument, \n# the circle detection method as the second argument (currently, the cv2.cv.HOUGH_GRADIENT method \n# is the only circle detection method supported by OpenCV and will likely be the only method for some time),\n# an accumulator value of 1.5 as the third argument, and finally a minDist of 100 pixels.\ncircles = cv2.HoughCircles(gray, cv2.HOUGH_GRADIENT, 1.7, minDist= 1, param1 = 300, param2 = 100, minRadius=3, maxRadius=150)\n\nprint(\"Circles len -&gt; {}\".format(len(circles)))\n\n\n# ensure at least some circles were found\nif circles is not None:    \n    # convert the (x, y) coordinates and radius of the circles to integers\n    # converting our circles from floating point (x, y) coordinates to integers, \n    # allowing us to draw them on our output image.\n    circles = np.round(circles[0, :]).astype(\"int\")\n\n    # loop over the (x, y) coordinates and radius of the circles\n    for (x, y, r) in circles:\n        # draw the circle in the output image, then draw a rectangle\n        # corresponding to the center of the circle\n        orange = (39, 127, 255)\n        cv2.circle(output, (x, y), r, orange, 4)\n        cv2.rectangle(output, (x - 5, y - 5), (x + 5, y + 5), (0, 128, 255), -1)\n\n\nimg_name = \"Output\"\ncv2.namedWindow(img_name,cv2.WINDOW_NORMAL)\ncv2.resizeWindow(img_name, 800,800)\ncv2.imshow(img_name, output)\ncv2.waitKey(0)    \ncv2.destroyAllWindows()\n</code></pre>\n\n<p>I use minDist = 1 to make sure those close circles are potentially captured. Does anybody see something completely wrong with my parameters?<a href=\"https://i.stack.imgur.com/E5XKB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/E5XKB.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "for-loop", "if-statement", "nested"], "answers": [{"tags": [], "owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "is_accepted": false, "score": 0, "last_activity_date": 1538601867, "last_edit_date": 1538601867, "creation_date": 1538601548, "answer_id": 52635836, "question_id": 52635793, "link": "https://stackoverflow.com/questions/52635793/no-output-when-using-nested-for-loops-inside-if-statements/52635836#52635836", "title": "No output when using nested for loops inside if statements", "body": "<p>You were almost correct. The problem was that the keyboard input is always of type <code>str</code> (string, by default) and you are comparing it to numbers of type <code>int</code> (integer). For ex. if you enter <code>1</code>, then <code>num_draw='1'</code> and so you are checking <code>if '1' == 1:</code> which is <code>False</code>. Similarly, none of your <code>if</code> or <code>elif</code> is <code>True</code> because you are comparing <code>str</code> type with <code>int</code> type. </p>\n\n<p>To make your code work, convert your input type to <code>int</code> as follows:</p>\n\n<pre><code>num_draw = int(input(\"Please enter the number of the design you would like[1-6] or -1 to quit: \"))\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>Please enter the number of the design you would like[1-6] or -1 to quit: \n\n1\n* \n* * \n* * * \n* * * * \n* * * * * \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4254, "user_id": 10255652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5DDj.jpg?s=128&g=1", "display_name": "vash_the_stampede", "link": "https://stackoverflow.com/users/10255652/vash-the-stampede"}, "is_accepted": false, "score": 0, "last_activity_date": 1538627885, "creation_date": 1538627885, "answer_id": 52639110, "question_id": 52635793, "link": "https://stackoverflow.com/questions/52635793/no-output-when-using-nested-for-loops-inside-if-statements/52639110#52639110", "title": "No output when using nested for loops inside if statements", "body": "<p>As mentioned your <code>input</code> needs to be an <code>int</code> to make proper comparisons.  As for your while loop <code>while num_draw != -1:</code> is correct but you need to move your <code>input</code> prompt within the loop so user can reelect an option. setting <code>num_draw = 'x'</code> is just to create a qualifying condition to start the loop    </p>\n\n<pre><code>num_draw = 'x'\nwhile num_draw != -1:\n    num_draw = int(input(\"Please enter the number of the design you would like[1-6] or -1 to quit: \"))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10453188, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-J9JRTOh_1w0/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU7HXdLfYh9f3RwwANWqyk1iopzSw/mo/photo.jpg?sz=128", "display_name": "Ryan Fantaskey", "link": "https://stackoverflow.com/users/10453188/ryan-fantaskey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1538627885, "creation_date": 1538601295, "question_id": 52635793, "link": "https://stackoverflow.com/questions/52635793/no-output-when-using-nested-for-loops-inside-if-statements", "title": "No output when using nested for loops inside if statements", "body": "<p>I'm trying to print out a series of patterns based off of the user input. However, when I add an if statement or while loop to it, I get no output even if I selected the correct number. The patterns work if I don't add the loops to it. I'm new to python and don't understand why it isn't printing anything out.</p>\n\n<pre><code>num_draw = input(\"Please enter the number of the design you would like[1-6] or -1 to quit: \")\n\n#while num_draw != -1:\nif num_draw == 1:\n\n    for i in range(0, 5):\n        for j in range(0, i+1):\n            print(\"* \",end=\"\")\n        print()\nelif num_draw == 2:\n#2\n    size = 5\n    isize = size - 2\n    print ('*' * size)\n    for i in range(isize):\n        print ('*' + ' ' * isize + '*')\n    print ('*' * size)\n\nelif num_draw == 3:\n\n    for i in range(5):\n        for j in range(5):\n            print(\" *\"[(j + i + 1)%2], end=' ')\n        print()\nelif num_draw == 4:\n\n    for i in range(0, 5):\n        for j in range(0, i+1):\n            print(\"* \",end=\"\")\n        print()\n\n\nelif num_draw == 5:\n    for i in range(0, 5):\n        for j in range(5, i, -1):\n            print(\"@ \", end=\"\")\n        print()\n\n\nelif num_draw == 6:\n    k = 8\n    for i in range(0, 5):\n        for j in range(0, k):\n            print(end=\" \")\n        k = k - 2\n        for j in range(0, i+1):\n            print(\"* \", end=\"\")\n        print()\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 5, "last_activity_date": 1538601781, "creation_date": 1538601781, "answer_id": 52635874, "question_id": 52635774, "link": "https://stackoverflow.com/questions/52635774/pandas-calculate-counts-by-months/52635874#52635874", "title": "pandas calculate counts by months", "body": "<p>So this is <a href=\"https://stackoverflow.com/questions/48197234/explode-stack-a-series-of-strings/48197300#48197300\">unnest</a> ,<code>get_dummies</code> and <code>reindex</code> mixed question </p>\n\n<pre><code>df.event_date=pd.to_datetime(df.event_date).dt.month\n\nl=list(range(df.event_date.min(),df.event_date.max()+1))\ndf.set_index('event_date').tags.apply(pd.Series).stack().\\\n  str.get_dummies().sum(level=0).\\\n   reindex(l,fill_value=0)\nOut[834]: \n            radio  tv  wifi\nevent_date                 \n8               2   2     0\n9               0   1     0\n10              0   0     0\n11              0   1     1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1538602032, "post_id": 52635906, "comment_id": 92205012, "body": "I feel like I am too lazy ( writing done repeat) :-) , BTW Nice one"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1538602091, "post_id": 52635906, "comment_id": 92205036, "body": "Mine could be much cleaner, I always forget you can sum across levels :P I&#39;m also stealing your <code>fill_value</code>"}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1538602205, "post_id": 52635906, "comment_id": 92205080, "body": "Any idea how the performance of something like <code>df.tags.str.join(&#39;*&#39;).str.get_dummies(sep=&#39;*&#39;)</code> to get the dummies holds up? I&#39;m always so clueless about the <code>.str</code> methods."}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1538602447, "post_id": 52635906, "comment_id": 92205169, "body": "Hmm, I&#39;d have to try it out.  I&#39;d imagine it could be faster than expanding the lists to a new series, but I don&#39;t think it would beat creating the new DataFrame.  String operations are unfortunately slow in pandas."}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1538602471, "post_id": 52635906, "comment_id": 92205179, "body": "Yeah it gets pretty slow actually, your method is pretty fast :D"}], "tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": true, "score": 3, "last_activity_date": 1538602174, "last_edit_date": 1538602174, "creation_date": 1538601968, "answer_id": 52635906, "question_id": 52635774, "link": "https://stackoverflow.com/questions/52635774/pandas-calculate-counts-by-months/52635906#52635906", "title": "pandas calculate counts by months", "body": "<p>A similar method to <a href=\"https://stackoverflow.com/a/52635874/3483203\">@Wen</a>, but creating a new DataFrame to avoid the <code>apply</code>:</p>\n\n<pre><code>s = (pd.DataFrame(df.tags.values.tolist(),\n        index=df.event_date.dt.month).stack().reset_index(1, drop=True))\n</code></pre>\n\n<p>Now using <code>pd.get_dummies</code>:</p>\n\n<pre><code>(pd.get_dummies(s).sum(level=0)\n    .reindex(np.arange(s.index.min(),s.index.max()+1), fill_value=0))\n</code></pre>\n\n<p></p>\n\n<pre><code>            radio  tv  wifi\nevent_date\n8               2   2     0\n9               0   1     0\n10              0   0     0\n11              0   1     1\n</code></pre>\n"}], "owner": {"reputation": 1098, "user_id": 3880205, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xxbe0.png?s=128&g=1", "display_name": "CodeNinja", "link": "https://stackoverflow.com/users/3880205/codeninja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 52635906, "answer_count": 2, "score": 1, "last_activity_date": 1538603550, "creation_date": 1538601192, "last_edit_date": 1538603550, "question_id": 52635774, "link": "https://stackoverflow.com/questions/52635774/pandas-calculate-counts-by-months", "title": "pandas calculate counts by months", "body": "<p>how to count items in each month with fill?</p>\n\n<pre><code>data = [\n        {\"event_date\": \"2018-08-10\", \"tags\": [\"tv\", \"radio\"]},\n        {\"event_date\": \"2018-08-11\", \"tags\": [\"tv\", \"radio\"]},\n        {\"event_date\": \"2018-09-10\", \"tags\": [\"tv\"]},\n        {\"event_date\": \"2018-11-10\", \"tags\": [\"tv\", \"wifi\"]}\n    ] \ndf = pd.DataFrame(data)\ndf.groupby([(df['event_date']).dt.month, df['tags']]).count()\n</code></pre>\n\n<p>what I expect:</p>\n\n<pre><code>month tv radio wifi\n8 2 2 0\n9 1 0 0\n10 0 0 0\n11 1 0 1\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "beautifulsoup", "html-parsing", "string-parsing"], "answers": [{"tags": [], "owner": {"reputation": 58, "user_id": 10012313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40a25c81e9363797e6d123acc7ca2524?s=128&d=identicon&r=PG&f=1", "display_name": "Andrej Shulaev", "link": "https://stackoverflow.com/users/10012313/andrej-shulaev"}, "is_accepted": true, "score": 1, "last_activity_date": 1538601207, "creation_date": 1538601207, "answer_id": 52635776, "question_id": 52635717, "link": "https://stackoverflow.com/questions/52635717/parse-html-to-get-specific-tags-in-python/52635776#52635776", "title": "Parse HTML to get specific tags in Python", "body": "<p>use lambda + startswith </p>\n\n<pre><code>soup.find_all('td', id=lambda x: x and x.startswith('name'))\n</code></pre>\n\n<p>or regex</p>\n\n<pre><code> soup.find_all('td', id=re.compile('^name'))\n</code></pre>\n"}], "owner": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 1, "accepted_answer_id": 52635776, "answer_count": 1, "score": 0, "last_activity_date": 1538601207, "creation_date": 1538600884, "question_id": 52635717, "link": "https://stackoverflow.com/questions/52635717/parse-html-to-get-specific-tags-in-python", "title": "Parse HTML to get specific tags in Python", "body": "<p>I'm trying to parse an HTML source with Python. I'm using <code>BeautifulSoup</code> for the purpose. What I need to get is to get all <code>td</code> tags with ids in the form of <code>nameX</code> format, where X starts from 1. So they are <code>name1, name2, ...</code> as many as we have. </p>\n\n<p>How can I achieve this? My simple code using regex doesn't work.</p>\n\n<pre><code>soup = BeautifulSoup(response.text,\"lxml\")\nresp=soup.find_all(\"td\",{\"id\":'name*'})\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>IndexError: list index out of range\n</code></pre>\n"}, {"tags": ["java", "python", "bots", "telegram", "telegram-bot"], "comments": [{"owner": {"reputation": 11, "user_id": 10453556, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PejsnWBIypA/AAAAAAAAAAI/AAAAAAAAAAw/5CEiGcpjd_Y/photo.jpg?sz=128", "display_name": "S D", "link": "https://stackoverflow.com/users/10453556/s-d"}, "reply_to_user": {"reputation": 3605, "user_id": 36532, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/cyMAs.png?s=128&g=1", "display_name": "LuRsT", "link": "https://stackoverflow.com/users/36532/lurst"}, "edited": false, "score": 0, "creation_date": 1538602113, "post_id": 52635712, "comment_id": 92205042, "body": "As we are talking right now, there are like a thousand bots out there doing this. They sure can do this as an administrator in groups, and actually this wasn&#39;t my question."}], "answers": [{"tags": [], "owner": {"reputation": 1786, "user_id": 3648740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNpVM.jpg?s=128&g=1", "display_name": "tashakori", "link": "https://stackoverflow.com/users/3648740/tashakori"}, "is_accepted": false, "score": 0, "last_activity_date": 1538640620, "creation_date": 1538640620, "answer_id": 52641993, "question_id": 52635712, "link": "https://stackoverflow.com/questions/52635712/telegram-bot-to-filter-certain-words/52641993#52641993", "title": "Telegram bot to filter certain words", "body": "<p>If your bot is the admin with the priviledge of deleting messages, it can remove any message it wants. \nMake sure that you have turned the group privacy of the bot off.</p>\n"}], "owner": {"reputation": 11, "user_id": 10453556, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PejsnWBIypA/AAAAAAAAAAI/AAAAAAAAAAw/5CEiGcpjd_Y/photo.jpg?sz=128", "display_name": "S D", "link": "https://stackoverflow.com/users/10453556/s-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1771, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1538640620, "creation_date": 1538600830, "question_id": 52635712, "link": "https://stackoverflow.com/questions/52635712/telegram-bot-to-filter-certain-words", "title": "Telegram bot to filter certain words", "body": "<p>I'm trying to manage a supergroup on Telegram.\nI'm wondering if there's a way to filter certain words (like curse words) through a bot?\nIf there is, I would much appreciate if you help me coding it.</p>\n"}, {"tags": ["python", "ta-lib"], "comments": [{"owner": {"reputation": 2053, "user_id": 841424, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ad3d6458e6133a1d3d305b4962af3110?s=128&d=identicon&r=PG", "display_name": "truf", "link": "https://stackoverflow.com/users/841424/truf"}, "edited": false, "score": 0, "creation_date": 1538612550, "post_id": 52635697, "comment_id": 92207623, "body": "Could you check your SBIN.Close? May be NaNs are there?"}, {"owner": {"reputation": 11, "user_id": 9818586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a72a1f030a4d60939a91e4a03128bb36?s=128&d=identicon&r=PG&f=1", "display_name": "Ronith ", "link": "https://stackoverflow.com/users/9818586/ronith"}, "reply_to_user": {"reputation": 2053, "user_id": 841424, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ad3d6458e6133a1d3d305b4962af3110?s=128&d=identicon&r=PG", "display_name": "truf", "link": "https://stackoverflow.com/users/841424/truf"}, "edited": false, "score": 0, "creation_date": 1538625437, "post_id": 52635697, "comment_id": 92210208, "body": "That was indeed the case. Thank you."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11660038, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TaBuzlLVPhU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reKVNfm5JbSKyPPwtRCG3PlWF8CYA/mo/photo.jpg?sz=128", "display_name": "Madhusudan Jha", "link": "https://stackoverflow.com/users/11660038/madhusudan-jha"}, "is_accepted": false, "score": 1, "last_activity_date": 1578587904, "creation_date": 1578587904, "answer_id": 59668502, "question_id": 52635697, "link": "https://stackoverflow.com/questions/52635697/ta-lib-ema-gives-inappropriate-nan-values/59668502#59668502", "title": "TA-Lib EMA gives inappropriate NaN values", "body": "<p>The csv file <code>SBIN.NS.csv</code> contains NaN values.<code>SBIN.dropna(axis=0)</code> will solve the problem.It will drop all the rows that contains NaN values.</p>\n\n<pre><code>SBIN=pd.read_csv('SBIN.NS.csv')\nSBIN.dropna(axis=0)\nema=TA.SMA(SBIN.Close,timeperiod=20)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9818586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a72a1f030a4d60939a91e4a03128bb36?s=128&d=identicon&r=PG&f=1", "display_name": "Ronith ", "link": "https://stackoverflow.com/users/9818586/ronith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 575, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1578587904, "creation_date": 1538600758, "question_id": 52635697, "link": "https://stackoverflow.com/questions/52635697/ta-lib-ema-gives-inappropriate-nan-values", "title": "TA-Lib EMA gives inappropriate NaN values", "body": "<p>I am using ta-lib for Technical Analysis in Python. Here is a small piece of code I wrote:</p>\n\n<pre><code>SBIN=pd.read_csv('SBIN.NS.csv')\nema=TA.SMA(SBIN.Close,timeperiod=20)\n</code></pre>\n\n<p>The first 19 values in the ema array are NaN, which are totally understandable. But after a certain position also, <code>ema</code> has NaN values. Why is this happening?</p>\n"}, {"tags": ["python", "selenium", "heroku", "proxy", "selenium-chromedriver"], "comments": [{"owner": {"reputation": 248, "user_id": 6137740, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-J1lPErcurW4/AAAAAAAAAAI/AAAAAAAAABM/fLXjnt-hHRM/photo.jpg?sz=128", "display_name": "Chuck LaPress", "link": "https://stackoverflow.com/users/6137740/chuck-lapress"}, "edited": false, "score": 0, "creation_date": 1538885994, "post_id": 52635688, "comment_id": 92298416, "body": "<a href=\"https://stackoverflow.com/questions/41059144/running-chromedriver-with-python-selenium-on-heroku\" title=\"running chromedriver with python selenium on heroku\">stackoverflow.com/questions/41059144/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 8062637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i4ScZ.jpg?s=128&g=1", "display_name": "Reese Williams", "link": "https://stackoverflow.com/users/8062637/reese-williams"}, "reply_to_user": {"reputation": 248, "user_id": 6137740, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-J1lPErcurW4/AAAAAAAAAAI/AAAAAAAAABM/fLXjnt-hHRM/photo.jpg?sz=128", "display_name": "Chuck LaPress", "link": "https://stackoverflow.com/users/6137740/chuck-lapress"}, "edited": false, "score": 0, "creation_date": 1539005043, "post_id": 52635688, "comment_id": 92333051, "body": "I already have Chrome set up in the browser. The question is how to route the requests through a proxy server. I\u2019ve tried using the chrome \u2014proxy-server flag but it gives me blank pages, so I was wondering what other options there were."}], "owner": {"reputation": 1, "user_id": 8062637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i4ScZ.jpg?s=128&g=1", "display_name": "Reese Williams", "link": "https://stackoverflow.com/users/8062637/reese-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 226, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1538600707, "creation_date": 1538600707, "question_id": 52635688, "link": "https://stackoverflow.com/questions/52635688/running-seleniumchromedriver-through-a-proxy", "title": "Running Selenium+Chromedriver through a proxy?", "body": "<p>I'm running Selenium (really <a href=\"https://splinter.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">Splinter</a>) in Python on a Heroku server. I need to run it through a proxy server, but most options for proxies seem to work only with Firefox, which can't run on Heroku.</p>\n\n<p>I've been trying to use the QuotaGuard addon by just adding an argument to chrome options, but it only results in getting blank web pages. Here's the setup (using the chromedriver/Google Chrome buildbacks, which place the bin in GOOGLE_CHROME_SHIM):</p>\n\n<pre><code>chrome_bin = os.environ.get('GOOGLE_CHROME_SHIM', None)\nopts = ChromeOptions()\nopts.add_argument(\"proxy-server=SOME_URL\")\nopts.binary_location = chrome_bin\nwith Browser('chrome', executable_path=\"chromedriver\", options=opts) as browser:\n    # Do stuff\n</code></pre>\n\n<p>What's the best way to basically have it run through another IP address? Is there another way to do that that's not a proxy server?</p>\n"}, {"tags": ["python", "json", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "edited": false, "score": 0, "creation_date": 1538640392, "post_id": 52636811, "comment_id": 92216062, "body": "Thanks for the help, however I got a <code>JSONDecodeError: Expecting value: line 1 column 146 (char 145)</code> in `     14     with open(&#39;../Downloads/b_lis.json&#39;) as fb: ---&gt; 15         b = json.load(fb)` maybe its not finding the words?"}, {"owner": {"reputation": 154, "user_id": 9067271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74824d2cb6faf9226e0a2775943812b2?s=128&d=identicon&r=PG&f=1", "display_name": "misterflister", "link": "https://stackoverflow.com/users/9067271/misterflister"}, "reply_to_user": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "edited": false, "score": 1, "creation_date": 1538653868, "post_id": 52636811, "comment_id": 92223877, "body": "Is the JSON exactly what you have above?"}, {"owner": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "edited": false, "score": 0, "creation_date": 1538694933, "post_id": 52636811, "comment_id": 92243779, "body": "yes, the first part is working well, however the second part of the code is not working... any idea of what to do?"}, {"owner": {"reputation": 154, "user_id": 9067271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74824d2cb6faf9226e0a2775943812b2?s=128&d=identicon&r=PG&f=1", "display_name": "misterflister", "link": "https://stackoverflow.com/users/9067271/misterflister"}, "reply_to_user": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "edited": false, "score": 1, "creation_date": 1538739288, "post_id": 52636811, "comment_id": 92259221, "body": "The error suggests that the file being written (b_lis.json) isn&#39;t being written correctly as JSON, and then the JSON decoder is having problems opening it. The code works on my end. Is there anything even a little bit different between the JSON you&#39;re starting with and the one above, or the code you&#39;re using and the code above?"}, {"owner": {"reputation": 154, "user_id": 9067271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74824d2cb6faf9226e0a2775943812b2?s=128&d=identicon&r=PG&f=1", "display_name": "misterflister", "link": "https://stackoverflow.com/users/9067271/misterflister"}, "reply_to_user": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "edited": false, "score": 1, "creation_date": 1538739343, "post_id": 52636811, "comment_id": 92259253, "body": "Note that I altered your JSON by adding double quotes to values marked true and false throughout the file."}], "tags": [], "owner": {"reputation": 154, "user_id": 9067271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74824d2cb6faf9226e0a2775943812b2?s=128&d=identicon&r=PG&f=1", "display_name": "misterflister", "link": "https://stackoverflow.com/users/9067271/misterflister"}, "is_accepted": false, "score": 2, "last_activity_date": 1538607871, "creation_date": 1538607871, "answer_id": 52636811, "question_id": 52635681, "link": "https://stackoverflow.com/questions/52635681/how-to-reformat-the-following-json-a-specific-value/52636811#52636811", "title": "How to reformat the following JSON a specific value?", "body": "<p>Given the many webs of lists and dictionaries here, iterating through them seems extremely laborious.</p>\n\n<p>A simpler way to tackle the problem is just to convert it to a string, replace \"apple\" with \"lemon\", then convert it to a new JSON file, and combine your two JSON files into a third, that merges both.</p>\n\n<p>This code works with a slightly-altered JSON file:</p>\n\n<pre><code>import json\n\nwith open('a_lis-wquotes.json') as fa:\n    a = json.load(fa)\n    stra = (str(a))\n    strb = stra.replace(\"apple\", \"lemon\")\n    strb = strb.replace(\"'\", '\"')\n    with open('b_lis.json', 'w') as fb:\n        fb.write(strb)\n\nwith open('a_lis-wquotes.json') as fa:\n    a = json.load(fa)\n    with open('b_lis.json') as fb:\n        b = json.load(fb)\n    c = a + b\n    strc = str(c)\n    strc = strc.replace(\"'\", '\"')\n    with open('c_lis.json', 'w') as fc:\n        fc.write(strc)\n</code></pre>\n\n<p>You'll notice there's a lot of playing around with the quotation marks here.</p>\n\n<p>That's for a few reasons:\n- Python's jsondecoder didn't want to import your original JSON, as it lacked double quotes around records marked \"true\" and \"false.\" I added those quotes to the JSON file before starting (hence the filename \"a_lis-wquotes.json\"). I did this with find/replace in a text editor. If you can't do this in a text editor because the file is too large, or you have too many files to do this by hand, you can do the same thing in Python by loading the file as a text file, and doing the text replacement there.</p>\n\n<ul>\n<li><p>When loading JSON into python and manipulating it in strings, the JSON double-quotes got replaced with single-quotes. That's why I had to write strb to a file before manipulating it as JSON.</p></li>\n<li><p>The single/double quotes problem arose again when merging the file a &amp; file b, and writing JSON to a file.</p></li>\n</ul>\n\n<p>Overall, the output, I believe, matches your desired output (though, again, ignore single/double quote differences):</p>\n\n<pre><code>[   {   'available': 'false',\n        'count': 0,\n        'id': '0394820934',\n        'obj': [   {   'fruit': 'mint',\n                       'origin': 'brazil',\n                       'record': 'false',\n                       'seller': 'unknown'}]},\n    {   'available': 'false',\n        'count': 0,\n        'id': '0239840394',\n        'obj': [   {   'fruit': 'grapes',\n                       'origin': 'origin',\n                       'record': 'false',\n                       'seller': 'unknown'},\n                   {'fruit': ' ', 'record': 'false'},\n                   {   'fruit': 'ARN',\n                       'origin': 'destination',\n                       'record': 'true',\n                       'seller': 'unknown'},\n                   {'fruit': ' no ', 'record': 'false'},\n                   {   'fruit': 'apple',\n                       'origin': 'unknown',\n                       'record': 'false',\n                       'seller': 'walmart'}]},\n    {   'available': 'false',\n        'count': 0,\n        'id': '0928293820982309',\n        'obj': [   {   'fruit': 'tomato',\n                       'origin': 'COL',\n                       'record': 'false',\n                       'seller': 'unknown'},\n                   {   'fruit': 'Watermelon',\n                       'origin': 'destination',\n                       'record': 'false',\n                       'seller': 'unknown'},\n                   {'fruit': ' ', 'record': 'false'},\n                   {   'fruit': 'pear',\n                       'origin': 'return_date',\n                       'record': 'true',\n                       'seller': 'walmart'}],\n        'updated': 0},\n    {   'available': 'false',\n        'count': 0,\n        'id': '23423423',\n        'obj': [   {   'fruit': '10',\n                       'origin': 'usa',\n                       'record': 'false',\n                       'seller': 'cotsco'}]},\n    {   'available': 'false',\n        'count': 0,\n        'id': '230948',\n        'obj': [   {'fruit': ' ', 'record': 'false'},\n                   {   'fruit': 'pear',\n                       'origin': 'adult_companion',\n                       'record': 'true',\n                       'seller': 'sears'},\n                   {'fruit': 'apple', 'record': 'false'},\n                   {   'fruit': 'Watermelon',\n                       'origin': 'Japan',\n                       'record': 'true',\n                       'seller': 'unknown'},\n                   {'fruit': ' apple ', 'record': 'false'},\n                   {   'fruit': ' lemon ',\n                       'origin': 'Canada',\n                       'record': 'true',\n                       'seller': 'unknown'},\n                   {'fruit': ' the apple is good ', 'record': 'false'},\n                   {   'fruit': ' apple ',\n                       'origin': 'COL',\n                       'record': 'true',\n                       'seller': 'sears'}]},\n    {   'available': 'false',\n        'count': 0,\n        'id': '0394820934',\n        'obj': [   {   'fruit': 'mint',\n                       'origin': 'brazil',\n                       'record': 'false',\n                       'seller': 'unknown'}]},\n    {   'available': 'false',\n        'count': 0,\n        'id': '0239840394',\n        'obj': [   {   'fruit': 'grapes',\n                       'origin': 'origin',\n                       'record': 'false',\n                       'seller': 'unknown'},\n                   {'fruit': ' ', 'record': 'false'},\n                   {   'fruit': 'ARN',\n                       'origin': 'destination',\n                       'record': 'true',\n                       'seller': 'unknown'},\n                   {'fruit': ' no ', 'record': 'false'},\n                   {   'fruit': 'lemon',\n                       'origin': 'unknown',\n                       'record': 'false',\n                       'seller': 'walmart'}]},\n    {   'available': 'false',\n        'count': 0,\n        'id': '0928293820982309',\n        'obj': [   {   'fruit': 'tomato',\n                       'origin': 'COL',\n                       'record': 'false',\n                       'seller': 'unknown'},\n                   {   'fruit': 'Watermelon',\n                       'origin': 'destination',\n                       'record': 'false',\n                       'seller': 'unknown'},\n                   {'fruit': ' ', 'record': 'false'},\n                   {   'fruit': 'pear',\n                       'origin': 'return_date',\n                       'record': 'true',\n                       'seller': 'walmart'}],\n        'updated': 0},\n    {   'available': 'false',\n        'count': 0,\n        'id': '23423423',\n        'obj': [   {   'fruit': '10',\n                       'origin': 'usa',\n                       'record': 'false',\n                       'seller': 'cotsco'}]},\n    {   'available': 'false',\n        'count': 0,\n        'id': '230948',\n        'obj': [   {'fruit': ' ', 'record': 'false'},\n                   {   'fruit': 'pear',\n                       'origin': 'adult_companion',\n                       'record': 'true',\n                       'seller': 'sears'},\n                   {'fruit': 'lemon', 'record': 'false'},\n                   {   'fruit': 'Watermelon',\n                       'origin': 'Japan',\n                       'record': 'true',\n                       'seller': 'unknown'},\n                   {'fruit': ' lemon ', 'record': 'false'},\n                   {   'fruit': ' lemon ',\n                       'origin': 'Canada',\n                       'record': 'true',\n                       'seller': 'unknown'},\n                   {'fruit': ' the lemon is good ', 'record': 'false'},\n                   {   'fruit': ' lemon ',\n                       'origin': 'COL',\n                       'record': 'true',\n                       'seller': 'sears'}]}]\n</code></pre>\n"}], "owner": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1538607871, "creation_date": 1538600660, "last_edit_date": 1538606667, "question_id": 52635681, "link": "https://stackoverflow.com/questions/52635681/how-to-reformat-the-following-json-a-specific-value", "title": "How to reformat the following JSON a specific value?", "body": "<p>I have the following JSON file:</p>\n\n<pre><code>   a_lis= [\n      {\n        \"id\": \"0394820934\",\n        \"obj\": [\n          {\n            \"fruit\": \"mint\",\n            \"origin\": \"brazil\",\n            \"seller\": \"unknown\",\n            \"record\": false\n          }\n        ],\n        \"available\": false,\n        \"count\": 0\n      },\n      {\n        \"id\": \"0239840394\",\n        \"obj\": [\n          {\n            \"fruit\": \"grapes\",\n            \"origin\": \"origin\",\n            \"seller\": \"unknown\",\n            \"record\": false\n          },\n          {\n            \"fruit\": \" \",\n            \"record\": false\n          },\n          {\n            \"fruit\": \"ARN\",\n            \"origin\": \"destination\",\n            \"seller\": \"unknown\",\n            \"record\": true\n          },\n          {\n            \"fruit\": \" no \",\n            \"record\": false\n          },\n          {\n            \"fruit\": \"apple\",\n            \"origin\": \"unknown\",\n            \"seller\": \"walmart\",\n            \"record\": false\n          }\n        ],\n        \"available\": false,\n        \"count\": 0\n      },\n      {\n        \"id\": \"0928293820982309\",\n        \"obj\": [\n          {\n            \"fruit\": \"tomato\",\n            \"origin\": \"COL\",\n            \"seller\": \"unknown\",\n            \"record\": false\n          },\n          {\n            \"fruit\": \"Watermelon\",\n            \"origin\": \"destination\",\n            \"seller\": \"unknown\",\n            \"record\": false\n          },\n          {\n            \"fruit\": \" \",\n            \"record\": false\n          },\n          {\n            \"fruit\": \"pear\",\n            \"origin\": \"return_date\",\n            \"seller\": \"walmart\",\n            \"record\": true\n          }\n        ],\n        \"available\": false,\n        \"count\": 0,\n        \"updated\": 0\n      },\n      {\n        \"id\": \"23423423\",\n        \"obj\": [\n          {\n            \"fruit\": \"10\",\n            \"origin\": \"usa\",\n            \"seller\": \"cotsco\",\n            \"record\": false\n          }\n        ],\n        \"available\": false,\n        \"count\": 0\n      },\n      {\n        \"id\": \"230948\",\n        \"obj\": [\n          {\n            \"fruit\": \" \",\n            \"record\": false\n          },\n          {\n            \"fruit\": \"pear\",\n            \"origin\": \"adult_companion\",\n            \"seller\": \"sears\",\n            \"record\": true\n          },\n          {\n            \"fruit\": \"apple\",\n            \"record\": false\n          },\n          {\n            \"fruit\": \"Watermelon\",\n            \"origin\": \"Japan\",\n            \"seller\": \"unknown\",\n            \"record\": true\n          },\n          {\n            \"fruit\": \" apple \",\n            \"record\": false\n          },\n          {\n            \"fruit\": \" lemon \",\n            \"origin\": \"Canada\",\n            \"seller\": \"unknown\",\n            \"record\": true\n          },\n          {\n            \"fruit\": \" the apple is good \",\n            \"record\": false\n          },\n          {\n            \"fruit\": \" apple \",\n            \"origin\": \"COL\",\n            \"seller\": \"sears\",\n            \"record\": true\n          }\n        ],\n        \"available\": false,\n        \"count\": 0\n      }\n    ]\n</code></pre>\n\n<p>The above file is a list of dicts. How can I duplicate and append to <code>a_list</code> all the sub dictionaries that contain the word 'apple' replacing that word for the word lemon?. For example:</p>\n\n<pre><code>a_lis = [\n  {\n    \"id\": \"0394820934\",\n    \"obj\": [\n      {\n        \"fruit\": \"mint\",\n        \"origin\": \"brazil\",\n        \"seller\": \"unknown\",\n        \"record\": false\n      }\n    ],\n    \"available\": false,\n    \"count\": 0\n  },\n  {\n    \"id\": \"0239840394\",\n    \"obj\": [\n      {\n        \"fruit\": \"grapes\",\n        \"origin\": \"origin\",\n        \"seller\": \"unknown\",\n        \"record\": false\n      },\n      {\n        \"fruit\": \" \",\n        \"record\": false\n      },\n      {\n        \"fruit\": \"ARN\",\n        \"origin\": \"destination\",\n        \"seller\": \"unknown\",\n        \"record\": true\n      },\n      {\n        \"fruit\": \" no \",\n        \"record\": false\n      },\n      {\n        \"fruit\": \"apple\",\n        \"origin\": \"unknown\",\n        \"seller\": \"walmart\",\n        \"record\": false\n      }\n    ],\n    \"available\": false,\n    \"count\": 0\n  },\n  {\n    \"id\": \"0928293820982309\",\n    \"obj\": [\n      {\n        \"fruit\": \"tomato\",\n        \"origin\": \"COL\",\n        \"seller\": \"unknown\",\n        \"record\": false\n      },\n      {\n        \"fruit\": \"Watermelon\",\n        \"origin\": \"destination\",\n        \"seller\": \"unknown\",\n        \"record\": false\n      },\n      {\n        \"fruit\": \" \",\n        \"record\": false\n      },\n      {\n        \"fruit\": \"pear\",\n        \"origin\": \"return_date\",\n        \"seller\": \"walmart\",\n        \"record\": true\n      }\n    ],\n    \"available\": false,\n    \"count\": 0,\n    \"updated\": 0\n  },\n  {\n    \"id\": \"23423423\",\n    \"obj\": [\n      {\n        \"fruit\": \"10\",\n        \"origin\": \"usa\",\n        \"seller\": \"cotsco\",\n        \"record\": false\n      }\n    ],\n    \"available\": false,\n    \"count\": 0\n  },\n  {\n    \"id\": \"230948\",\n    \"obj\": [\n      {\n        \"fruit\": \" \",\n        \"record\": false\n      },\n      {\n        \"fruit\": \"pear\",\n        \"origin\": \"adult_companion\",\n        \"seller\": \"sears\",\n        \"record\": true\n      },\n      {\n        \"fruit\": \"apple\",\n        \"record\": false\n      },\n      {\n        \"fruit\": \"Watermelon\",\n        \"origin\": \"Japan\",\n        \"seller\": \"unknown\",\n        \"record\": true\n      },\n      {\n        \"fruit\": \" apple \",\n        \"record\": false\n      },\n      {\n        \"fruit\": \" lemon \",\n        \"origin\": \"Canada\",\n        \"seller\": \"unknown\",\n        \"record\": true\n      },\n      {\n        \"fruit\": \" the apple is good \",\n        \"record\": false\n      },\n      {\n        \"fruit\": \" apple \",\n        \"origin\": \"COL\",\n        \"seller\": \"sears\",\n        \"record\": true\n      }\n    ],\n    \"available\": false,\n    \"count\": 0\n  },\n  {\n    \"id\": \"0239840394\",\n    \"obj\": [\n      {\n        \"fruit\": \"grapes\",\n        \"origin\": \"origin\",\n        \"seller\": \"unknown\",\n        \"record\": false\n      },\n      {\n        \"fruit\": \" \",\n        \"record\": false\n      },\n      {\n        \"fruit\": \"ARN\",\n        \"origin\": \"destination\",\n        \"seller\": \"unknown\",\n        \"record\": true\n      },\n      {\n        \"fruit\": \" no \",\n        \"record\": false\n      },\n      {\n        \"fruit\": \"lemon\",\n        \"origin\": \"unknown\",\n        \"seller\": \"walmart\",\n        \"record\": false\n      }\n    ],\n    \"available\": false,\n    \"count\": 0\n  },\n  {\n    \"id\": \"230948\",\n    \"obj\": [\n      {\n        \"fruit\": \" \",\n        \"record\": false\n      },\n      {\n        \"fruit\": \"pear\",\n        \"origin\": \"adult_companion\",\n        \"seller\": \"sears\",\n        \"record\": true\n      },\n      {\n        \"fruit\": \"lemon\",\n        \"record\": false\n      },\n      {\n        \"fruit\": \"Watermelon\",\n        \"origin\": \"Japan\",\n        \"seller\": \"unknown\",\n        \"record\": true\n      },\n      {\n        \"fruit\": \" lemon \",\n        \"record\": false\n      },\n      {\n        \"fruit\": \" lemon \",\n        \"origin\": \"Canada\",\n        \"seller\": \"unknown\",\n        \"record\": true\n      },\n      {\n        \"fruit\": \" the lemon is good \",\n        \"record\": false\n      },\n      {\n        \"fruit\": \" lemon \",\n        \"origin\": \"COL\",\n        \"seller\": \"sears\",\n        \"record\": true\n      }\n    ],\n    \"available\": false,\n    \"count\": 0\n  }\n]\n</code></pre>\n\n<p>In other words the original dictionaries with the word 'apple' are kept in the list, while a copied version is appended at the original list but with the word lemon? I tried to parse the json file as follows:</p>\n\n<pre><code>import json\nfrom pprint import pprint\njson_output = open('file.json','r')\njson_output = json.loads(json_output.read())\n</code></pre>\n\n<p>However, I dont know how to copy the dictionary and look along the nested structure of the dictionaries.</p>\n"}, {"tags": ["python", "postgresql", "flask", "sqlalchemy", "wtforms"], "comments": [{"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1538601229, "post_id": 52635661, "comment_id": 92204752, "body": "<code>field.iter_choices</code> can you show the values contained in this?"}, {"owner": {"reputation": 67, "user_id": 10402038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ac9401e3247490db76cb6d33634c1fe?s=128&d=identicon&r=PG&f=1", "display_name": "Seeker C", "link": "https://stackoverflow.com/users/10402038/seeker-c"}, "reply_to_user": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1538603395, "post_id": 52635661, "comment_id": 92205505, "body": "do you mean how i&#39;m calling it in my form? &lt;div class=&quot;form-group&quot; id=&quot;coi_name&quot; name=&quot;coi_name&quot; spellcheck=&quot;true&quot;&gt;  {{newProj.coi_name(class_=&#39;form-control&#39;)}}&lt;/div&gt;"}], "answers": [{"tags": [], "owner": {"reputation": 67, "user_id": 10402038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ac9401e3247490db76cb6d33634c1fe?s=128&d=identicon&r=PG&f=1", "display_name": "Seeker C", "link": "https://stackoverflow.com/users/10402038/seeker-c"}, "is_accepted": true, "score": 2, "last_activity_date": 1538775668, "creation_date": 1538775668, "answer_id": 52673608, "question_id": 52635661, "link": "https://stackoverflow.com/questions/52635661/dynamically-populate-wtform-selectfield-with-sqlalchemy-query/52673608#52673608", "title": "Dynamically Populate WTForm SelectField with sqlAlchemy query", "body": "<p>I should have been using QuerySelectField and lambda and added <strong>repr</strong> in my models. This is what worked for me:</p>\n\n<p>Forms.py</p>\n\n<pre><code>coi_name = QuerySelectField(label='COI', query_factory=lambda: db.session.query(Coi).filter_by(active=1), get_pk=lambda coi_id: coi_id, get_label=lambda coi_name: coi_name, allow_blank=True)\n</code></pre>\n\n<p>Models.py</p>\n\n<pre><code>def __repr__(self):\n        return '{}'.format(self.coi_name)\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 10402038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ac9401e3247490db76cb6d33634c1fe?s=128&d=identicon&r=PG&f=1", "display_name": "Seeker C", "link": "https://stackoverflow.com/users/10402038/seeker-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1053, "favorite_count": 0, "accepted_answer_id": 52673608, "answer_count": 1, "score": 1, "last_activity_date": 1538775668, "creation_date": 1538600575, "last_edit_date": 1538695171, "question_id": 52635661, "link": "https://stackoverflow.com/questions/52635661/dynamically-populate-wtform-selectfield-with-sqlalchemy-query", "title": "Dynamically Populate WTForm SelectField with sqlAlchemy query", "body": "<p>I'm trying to dynamically populate options in a drop down with data from a column in my postgreSQL database. When I try to load my form I get: TypeError: 'NoneType' object is not iterable. Any help will be greatly appreciated.     </p>\n\n<pre><code>  File \"/usr/lib/python2.7/site-packages/wtforms/widgets/core.py\", line 323, in __call__\n    for val, label, selected in field.iter_choices():\n  File \"/usr/lib/python2.7/site-packages/wtforms/fields/core.py\", line 454, in iter_choices\n    for value, label in self.choices:\nTypeError: 'NoneType' object is not iterable\n</code></pre>\n\n<p>Model.py</p>\n\n<pre><code>class ReqCriterion(Base):\n    __tablename__ = 'req_criteria'\n\n    criteria_id = Column(Integer, primary_key=True, server_default=text(\"nextval('req_criteria_criteria_id_seq'::regclass)\"))\n    req_id = Column(Integer, nullable=False)\n    req_name = Column(Text)\n    coi_id = Column(Integer, nullable=False)\n    coi_name = Column(Text, nullable=False)\n    criteria = Column(Text)\n\n    def __init__(self, criteria, req_name, coi_id, coi_name, req_id):\n        self.criteria = criteria\n        self.req_id = req_id\n        self.req_name = req_name\n        self.coi_id = coi_id\n        self.coi_name = coi_name\n</code></pre>\n\n<p>forms.py</p>\n\n<pre><code>class NewProjForm(Form):\n    pj_name = StringField('Project Name', validators=[InputRequired(), Length(min=1, max=1000)])\n    pj_desc = TextAreaField('Project Description', validators=[InputRequired(), Length(min=1, max=3000)])\n    coi_name = SelectField('COI:', validators=[InputRequired()])\n    pj_poc_first = StringField('POC First Name', validators=[InputRequired(), Length(min=1, max=500)])\n    pj_poc_last = StringField('POC Last Name', validators=[InputRequired(), Length(min=1, max=500)])\n</code></pre>\n\n<p>app.py</p>\n\n<pre><code>@app.route('/addProjForm', methods=['GET','POST'])\ndef addProjForm():\n        newProj = NewProjForm(request.form)\n        newProj.coi_name.choices = db.session.query(ReqCriterion).filter(coi_name)\n        if request.method == 'POST' and newProj.validate():\n            addProj = Project(request.form['pj_name'], request.form['pj_desc'], request.form['coi_name'], request.form['pj_poc_first'], request.form['pj_poc_last'])\n            db.session.add(addProj)\n            db.session.commit()\n            return redirect(url_for('project_conf', addProj=addProj))\n</code></pre>\n"}, {"tags": ["python", "django", "internet-explorer"], "answers": [{"tags": [], "owner": {"reputation": 4384, "user_id": 9321755, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MJdCwK_eJfw/AAAAAAAAAAI/AAAAAAAAAUg/iwt-_10hlFE/photo.jpg?sz=128", "display_name": "Vaibhav Vishal", "link": "https://stackoverflow.com/users/9321755/vaibhav-vishal"}, "is_accepted": false, "score": 1, "last_activity_date": 1538630264, "last_edit_date": 1538630264, "creation_date": 1538605589, "answer_id": 52636531, "question_id": 52635623, "link": "https://stackoverflow.com/questions/52635623/open-ie-browser-window-using-python-when-link-is-clicked/52636531#52636531", "title": "Open IE browser window using python when link is clicked", "body": "<p><strong>Shot Answer:</strong> You can't.<br>\n<strong>Long Answer:</strong> If user is using IE to view your website you can open links in other browsers. But if user is using any other browser(firefox, chrome, etc.) all links will open in same browser, you can't access other browsers. So in your case answer is no, because you are trying to open IE from some other browser.<br>\nHere is the code to open another browser from IE if you are interested:  </p>\n\n<pre><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\"&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n    &lt;title&gt;HTA Test&lt;/title&gt;\n    &lt;hta:application applicationname=\"HTA Test\" scroll=\"yes\" singleinstance=\"yes\"&gt;\n    &lt;script type=\"text/javascript\"&gt;\n        function openURL()\n        {\n            var shell = new ActiveXObject(\"WScript.Shell\");\n            shell.run(\"http://www.google.com\");\n        }\n    &lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;input type=\"button\" onclick=\"openURL()\" value=\"Open Google\"&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/185581/9321755\">Code from here</a></p>\n"}], "owner": {"reputation": 584, "user_id": 8221046, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/71cad417799c2e611c00f4c984ccc1d9?s=128&d=identicon&r=PG&f=1", "display_name": "supertramp", "link": "https://stackoverflow.com/users/8221046/supertramp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 654, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1538630264, "creation_date": 1538600401, "question_id": 52635623, "link": "https://stackoverflow.com/questions/52635623/open-ie-browser-window-using-python-when-link-is-clicked", "title": "Open IE browser window using python when link is clicked", "body": "<p>I need a url to be opened in a IE browser specifically.\nI know the following code is wrong but I don't know what else to try. \nHow can I achieve that through python?</p>\n\n<p><strong>template</strong></p>\n\n<pre><code>&lt;a href=\"{% url 'browser:ie' %}\" target=\"_blank\"&gt; Open in IE &lt;/a&gt;\n</code></pre>\n\n<p><strong>urls.py</strong></p>\n\n<pre><code>url(r'^open-ie$', views.open_in_ie, name='ie'),\n</code></pre>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>import webbrowser\ndef open_in_ie(request):\n    ie = webbrowser.get(webbrowser.iexplore)\n    return ie.open('https://some-link.com')\n</code></pre>\n\n<p>Again, I know this is wrong and it tries to open the ie browser at a server level. Any advices? Thank you!</p>\n"}, {"tags": ["python", "bottle"], "answers": [{"tags": [], "owner": {"reputation": 2915, "user_id": 3591014, "user_type": "registered", "profile_image": "https://graph.facebook.com/575197264/picture?type=large", "display_name": "eatmeimadanish", "link": "https://stackoverflow.com/users/3591014/eatmeimadanish"}, "is_accepted": false, "score": 0, "last_activity_date": 1539197467, "creation_date": 1539197467, "answer_id": 52746941, "question_id": 52635595, "link": "https://stackoverflow.com/questions/52635595/what-is-the-right-way-to-set-cors-headers-for-a-single-api-in-bottle/52746941#52746941", "title": "What is the right way to set CORS headers for a single API in Bottle", "body": "<p>If it's just one route, why not just apply the CORS header to that one route?  You could also use a decorator class to add the header to any routes you want.  </p>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 3870329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ebf3c1122a3d13a6cce7f0768235756?s=128&d=identicon&r=PG", "display_name": "rgercp", "link": "https://stackoverflow.com/users/3870329/rgercp"}, "is_accepted": false, "score": 0, "last_activity_date": 1540565237, "creation_date": 1540565237, "answer_id": 53011239, "question_id": 52635595, "link": "https://stackoverflow.com/questions/52635595/what-is-the-right-way-to-set-cors-headers-for-a-single-api-in-bottle/53011239#53011239", "title": "What is the right way to set CORS headers for a single API in Bottle", "body": "<p>You should create general route like below to intercept any request for method OPTIONS and then add a hook to apply CORS headers to all requests:</p>\n\n<pre><code>import bottle\n\n# This route capture all route for method OPTIONS\n@bottle.route('/&lt;:re:.*&gt;', method='OPTIONS')\ndef cors():\n    pass\n\nheaders = ['Origin', 'Accept', 'Content-Type',\n           'X-Requested-With', 'X-CSRF-Token',\n           'Authorization']\nHEADERS = ', '.join((headers + [h.lower() for h in headers]))\n\n# For all request I add cors headers\ndef apply_cors():\n    response.headers['Access-Control-Allow-Origin'] = '*'\n    response.headers['Access-Control-Allow-Methods'] = 'GET, POST, DELETE, PUT, OPTIONS'\n    response.headers['Access-Control-Allow-Headers'] = HEADERS\n\napp = bottle.default_app()\napp.add_hook('after_request', apply_cors)\n</code></pre>\n"}], "owner": {"reputation": 2419, "user_id": 1068609, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8a25458f79094fd580dda8fde39b8629?s=128&d=identicon&r=PG", "display_name": "asudhak", "link": "https://stackoverflow.com/users/1068609/asudhak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 376, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1540565237, "creation_date": 1538600284, "question_id": 52635595, "link": "https://stackoverflow.com/questions/52635595/what-is-the-right-way-to-set-cors-headers-for-a-single-api-in-bottle", "title": "What is the right way to set CORS headers for a single API in Bottle", "body": "<p>There is a ton of info on how to set CORS headers to allow origins on all requests in bottle, primarily using the Hooks plugin and using 'after-request'. (<a href=\"https://bottlepy.org/docs/dev/recipes.html\" rel=\"nofollow noreferrer\">https://bottlepy.org/docs/dev/recipes.html</a>)</p>\n\n<p>However, I have 10 routes, and I only want to enable CORS requests on one of them. Is there a way to do this with the hooks plugin ?</p>\n\n<p>If not, should I implement the OPTIONS method for a particular route ?</p>\n"}, {"tags": ["python", "algorithm", "list", "sorting"], "comments": [{"owner": {"reputation": 1873, "user_id": 1725553, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-CsRuoQmwqLo/AAAAAAAAAAI/AAAAAAAAAFM/hESpKGJTWZo/photo.jpg?sz=128", "display_name": "paddyg", "link": "https://stackoverflow.com/users/1725553/paddyg"}, "edited": false, "score": 0, "creation_date": 1538601003, "post_id": 52635572, "comment_id": 92204676, "body": "I would start out building a dict of array lengths. Like {4:[3], 5:[0], 6:[2], 8:[1]...} where each length is key to a list of indices in the original list of lists. I would then go through allocating elements that add up to nearest to the max. Then repeat incrementally to try to &#39;fill up&#39; the groups."}, {"owner": {"reputation": 10550, "user_id": 633094, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/8FbW8.jpg?s=128&g=1", "display_name": "munk", "link": "https://stackoverflow.com/users/633094/munk"}, "edited": false, "score": 4, "creation_date": 1538601222, "post_id": 52635572, "comment_id": 92204750, "body": "This seems similar to the Knapsack problem <a href=\"https://en.wikipedia.org/wiki/Knapsack_problem\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Knapsack_problem</a>"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1538601524, "post_id": 52635572, "comment_id": 92204850, "body": "See <a href=\"https://stackoverflow.com/q/16017197/674039\">binning files into approximately equal sized directories</a>"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1538601608, "post_id": 52635572, "comment_id": 92204876, "body": "This is known as the <a href=\"https://en.wikipedia.org/wiki/Bin_packing_problem\" rel=\"nofollow noreferrer\">bin packing problem</a>. The <a href=\"https://en.wikipedia.org/wiki/Bin_packing_problem#First-fit_algorithm\" rel=\"nofollow noreferrer\">greedy solution</a> works well enough for most applications."}, {"owner": {"reputation": 3891, "user_id": 4585713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0163e6ba41d9dfd2c9d13c528c87e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "PMende", "link": "https://stackoverflow.com/users/4585713/pmende"}, "edited": false, "score": 0, "creation_date": 1538615353, "post_id": 52635572, "comment_id": 92208173, "body": "How do you pick whether to make lists of length (12, 12, 1) vs (12, 6, 7) vs (12, 10, 3) vs ... ?"}, {"owner": {"reputation": 347, "user_id": 5884437, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7ffd6a59df3179dcabf261ce6b9b7880?s=128&d=identicon&r=PG&f=1", "display_name": "TimJ", "link": "https://stackoverflow.com/users/5884437/timj"}, "reply_to_user": {"reputation": 3891, "user_id": 4585713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0163e6ba41d9dfd2c9d13c528c87e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "PMende", "link": "https://stackoverflow.com/users/4585713/pmende"}, "edited": false, "score": 0, "creation_date": 1539010911, "post_id": 52635572, "comment_id": 92336674, "body": "@PMende that isn&#39;t important for my case, it is only the minimal number of total lists/bins that is important.  I&#39;m actually using this to optimise the ordering of samples being run through an analytical lab to reduce the number of QC samples that need to be run (that are run between a max of X samples) to the absolute minimum."}], "answers": [{"tags": [], "owner": {"reputation": 1679, "user_id": 1362977, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4b514db0fe12fa1baa8f099eb11de838?s=128&d=identicon&r=PG", "display_name": "Jan Mat\u011bjka", "link": "https://stackoverflow.com/users/1362977/jan-mat%c4%9bjka"}, "is_accepted": false, "score": 1, "last_activity_date": 1538712157, "last_edit_date": 1538712157, "creation_date": 1538614851, "answer_id": 52637563, "question_id": 52635572, "link": "https://stackoverflow.com/questions/52635572/most-efficient-way-to-combine-list-of-lists-to-get-groups-of-items-but-as-clo/52637563#52637563", "title": "Most efficient way to combine list of lists to get groups of items &lt;= but as close as possible to length X", "body": "<p>This solution does not necessarily find the length-optimal solution as it considers joining only two lists but it runs in O(n).</p>\n\n<pre><code>#!/usr/bin/env python3\n\nimport sys\nimport random\n\ndef foo(xs, n):\n    bins = {}\n    mid = (n+1)//2\n\n    # bin list positions by length\n    for i, x in enumerate(xs):\n        bucket = len(x)\n        if bucket &gt; n:\n            raise RuntimeError(\"invalid input\")\n\n        bins.setdefault(bucket, []).append(i)\n\n    # take out ones that are the desired length already\n    out = [xs[x] for x in bins[n]] if n in bins else []\n    bins.pop(n, None)\n\n    # find complements for the upper half of buckets\n    for i in list(bins.keys()):\n        if i &lt; mid:\n            continue\n\n        candidates = sorted([x for x in list(bins.keys()) if x &lt;= n-i], reverse=True)\n\n        while i in bins and bins[i]:\n            x = bins[i].pop()\n\n            for j in list(candidates):\n                if j not in bins or not bins[j]:\n                    candidates = candidates[1:]\n                    continue\n\n                y = bins[j].pop()\n                if not bins[j]:\n                    del bins[j]\n\n                out.append(xs[x] + xs[y])\n                break\n            else:\n                # complement not found\n                out.append(xs[x])\n\n\n    # add lists with no complements from the lower half\n    out += [xs[y] for ys in bins.values() for y in ys]\n\n    return out\n\n_check_n = 0\ndef check(n, xs):\n    ys = list(foo(xs, n))\n\n    try:\n        for y in ys:\n            assert len(y) &lt;= n\n        print(\".\", end=\"\")\n        n+=1\n        if n % 10 == 0:\n            sys.stdout.flush()\n    except:\n        print(\"n, xs =\", (n, xs))\n        print(\"ys =\", ys)\n        raise\n\nif __name__ == \"__main__\":\n    n, xs = 12, [ [\"a1\", \"a2\", \"a3\", \"a4\", \"a5\"], [\"b1\", \"b2\", \"b3\", \"b4\", \"b5\", \"b6\", \"b7\", \"b8\"], [\"c1\", \"c2\", \"c3\", \"c4\", \"c5\", \"c6\"], [\"d1\", \"d2\", \"d3\", \"d4\"] ]\n    check(n, xs)\n\n    cases = 10**4\n    max_n = 10**2\n    max_input_len = 10**3\n\n    for i in range(cases):\n        n = random.randint(1, max_n)\n        xs = [[1] * random.randint(1, n) for j in range(random.randint(1, max_input_len))]\n        check(n, xs)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 347, "user_id": 5884437, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7ffd6a59df3179dcabf261ce6b9b7880?s=128&d=identicon&r=PG&f=1", "display_name": "TimJ", "link": "https://stackoverflow.com/users/5884437/timj"}, "edited": false, "score": 1, "creation_date": 1539011014, "post_id": 52641720, "comment_id": 92336730, "body": "I think that Wiki was exactly what I was looking for!  The Modified First Fit Decreasing should work for what I need, although I note they reference a paper containing a mathematically optimum solution:  Benk\u0151 A., D&#243;sa G., Tuza Z. (2010) Bin Packing/Covering with Delivery, Solved with the Evolution of Algorithms, Proceedings 2010 IEEE 5th International Conference on Bio-Inspired Computing: Theories and Applications, BIC-TA 2010, art. no. 5645312, Pages 298-302."}], "tags": [], "owner": {"reputation": 4252, "user_id": 10562, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/89f032bea7ea14c8157aaa72a243bd06?s=128&d=identicon&r=PG", "display_name": "Paddy3118", "link": "https://stackoverflow.com/users/10562/paddy3118"}, "is_accepted": true, "score": 1, "last_activity_date": 1538639671, "creation_date": 1538639671, "answer_id": 52641720, "question_id": 52635572, "link": "https://stackoverflow.com/questions/52635572/most-efficient-way-to-combine-list-of-lists-to-get-groups-of-items-but-as-clo/52641720#52641720", "title": "Most efficient way to combine list of lists to get groups of items &lt;= but as close as possible to length X", "body": "<p>It seems to be a bin packing problem. </p>\n\n<p>My <a href=\"https://stackoverflow.com/questions/5626520/fitting-n-variable-height-images-into-3-similar-length-column-layout/5689594#5689594\">greedy algorithm with swapping and pre-sorting</a> should work, but you would need to adapt sub-list length to picture height, and compute an initial bin-count from your x and the total length of items.</p>\n"}], "owner": {"reputation": 347, "user_id": 5884437, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7ffd6a59df3179dcabf261ce6b9b7880?s=128&d=identicon&r=PG&f=1", "display_name": "TimJ", "link": "https://stackoverflow.com/users/5884437/timj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 52641720, "answer_count": 2, "score": 3, "last_activity_date": 1538712157, "creation_date": 1538600189, "question_id": 52635572, "link": "https://stackoverflow.com/questions/52635572/most-efficient-way-to-combine-list-of-lists-to-get-groups-of-items-but-as-clo", "title": "Most efficient way to combine list of lists to get groups of items &lt;= but as close as possible to length X", "body": "<p>Say I have a list of lists like:</p>\n\n<pre><code> [ [ a1, a2, a3, a4, a5], [b1, b2, b3, b4, b5, b6, b7, b8], [c1, c2, c3, c4, c5, c6], [d1, d2, d3, d4] ]\n</code></pre>\n\n<p>What's the easiest way to compare all the list item lengths and combine them into a list of lists with lengths as close as possible to, but less than or equal to, x?</p>\n\n<p>So with the above example, and x=12:</p>\n\n<pre><code>[ [a1, a2, a3, a4, a5, c1, c2, c3, c4, c5, c6], [b1, b2, b3, b4, b5, b6, b7, b8, d1, d2, d3, d4] ]\n</code></pre>\n\n<p>The ordering of the individual groups (e.g a, b, c...) in the output isn't important, but individual groups cannot be broken up.</p>\n\n<p>I know I could, for instance, take the length of the first group, then get the length of each subsequent group in order and if their sum = x then pop those lists and append their items to the returned list, and if not then work through each group again checking if the sum of their lengths=x-1 and if so pop and append, and on with sum of lengths=x-2 etc until the input list is empty.</p>\n\n<p>Which will work fine for small groups like the example given, but what about when the len of the input list gets very large?  Is there a more efficient method / algorithm?</p>\n"}, {"tags": ["python", "numpy", "opencv", "image-processing", "multidimensional-array"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1538608200, "post_id": 52635539, "comment_id": 92206749, "body": "First step, load the csv into a dictionary mapping ID to appliance. Then iterate over the paths returned by glob. Parse each path to get the ID from the file name. Look up corresponding appliance in the dictionary, generate the labels array for this image. Load the image and flatten it. Concatenate the two single row arrays. Finally stack them all vertically, to get an array of 1976 rows, one row per input. | I think you should be able to find existing guidance on how to do each of those steps either on SO, or on the net in general."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1538609812, "post_id": 52635539, "comment_id": 92207118, "body": "Or even better, since your CSV already contains all the labels (i.e. file names), you can even avoid the glob and parsing -- just generate filenames based on the IDs in the CSV."}, {"owner": {"reputation": 1194, "user_id": 9542954, "user_type": "registered", "profile_image": "https://graph.facebook.com/1624734454261564/picture?type=large", "display_name": "Miguel 2488", "link": "https://stackoverflow.com/users/9542954/miguel-2488"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1538609870, "post_id": 52635539, "comment_id": 92207130, "body": "Hi @DanMa\u0161ek,thank you for your answer. What you are telling seems the right way to go, but without a little more guidance over the steps i don&#39;t think i could get this done. Could you please show me a bit about how to follow this steps? Just the key steps are ok, you don&#39;t need to write a complete walkthrough, i know it&#39;s a lot. If you post it in an answer i would be happy to accept it as correct and upvote it. Thanks in advance"}, {"owner": {"reputation": 1194, "user_id": 9542954, "user_type": "registered", "profile_image": "https://graph.facebook.com/1624734454261564/picture?type=large", "display_name": "Miguel 2488", "link": "https://stackoverflow.com/users/9542954/miguel-2488"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1538610068, "post_id": 52635539, "comment_id": 92207167, "body": "hi again @DanMa\u0161ek i can&#39;t really do that with the csv, since i have 2 images per observation, so one observation would have e.g.: 1000_c.jpg and 1000_v.jpg. I0m not sure if i can go over it the way you are saying"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1538610224, "post_id": 52635539, "comment_id": 92207189, "body": "The same label applies to both, and each ID has the <code>_c</code> and <code>_v</code> variant? Although parsing the id from the filename wouldn&#39;t be difficult in this case anyway -- split off the filename, and the split that on the underscore and interpret the first part as integer."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1538611378, "post_id": 52635539, "comment_id": 92207411, "body": "Have a look at <a href=\"https://pastebin.com/aBrEFRmM\" rel=\"nofollow noreferrer\">this script</a> -- does that do what you want and does it make sense? I can also write the variant that uses glob and parses the filenames to get the ids if you want."}, {"owner": {"reputation": 1194, "user_id": 9542954, "user_type": "registered", "profile_image": "https://graph.facebook.com/1624734454261564/picture?type=large", "display_name": "Miguel 2488", "link": "https://stackoverflow.com/users/9542954/miguel-2488"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1538640289, "post_id": 52635539, "comment_id": 92216004, "body": "hi again @DanMa\u0161ek. Really i want to thank you for your help, you rally put a lot of work in there. Although, i&#39;m having an error when i try to run your script. I edited my question and added a screenshot of the error so you can see what&#39;s happening.  I&#39;m setting the variable ID_APP_MAP_FILENAME = &#39;train_labels.csv&#39; like this, because i assume you script is meant to convert the csv into a dictionary to map the id values to the images&#39;s names. But still, i&#39;m having a <code>TypeError</code> of kind <code>object of type &#39;map&#39; has no len()</code>. Please tell me your thinkings about this. And thanks a lot again"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1538643310, "post_id": 52635539, "comment_id": 92217676, "body": "Hmm, are you using Python 3.x? What that statement should do is first split the line at the location of <code>,</code> into separate strings, and then apply <code>int</code> on each element, so that you get a list of integers. I guess the way it works in 3.x changed, will have a look at it when I get back."}, {"owner": {"reputation": 1194, "user_id": 9542954, "user_type": "registered", "profile_image": "https://graph.facebook.com/1624734454261564/picture?type=large", "display_name": "Miguel 2488", "link": "https://stackoverflow.com/users/9542954/miguel-2488"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1538647218, "post_id": 52635539, "comment_id": 92220079, "body": "Hello again Dan, i didn&#39;t know this was python 2, i&#39;ll try it out in python 2 and will see if it works, if it does, i&#39;ll just save it as a txt file and continue the modeling phase with python 3, so i don&#39;t have to bother you again. I&#39;ll let you know as soon as i try it! Thanks again :)"}, {"owner": {"reputation": 1194, "user_id": 9542954, "user_type": "registered", "profile_image": "https://graph.facebook.com/1624734454261564/picture?type=large", "display_name": "Miguel 2488", "link": "https://stackoverflow.com/users/9542954/miguel-2488"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1538686130, "post_id": 52635539, "comment_id": 92241211, "body": "Hi @DanMa\u0161ek i tried your script in python 2 and it works perfectly. If you can post this as an answer i will be happy to accept it and close this question. You really helped me with this, thank you very much for the time you&#39;ve put into this. This community really needs more people like you!!"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1538686631, "post_id": 52635539, "comment_id": 92241415, "body": "Sound good, thanks :) | BTW, <a href=\"https://stackoverflow.com/questions/1303347/getting-a-map-to-return-a-list-in-python-3-x\">this question</a> shows what to do to get a list after using <code>map</code> in Python3. (I know I&#39;m a bit archaic, but there&#39;s so much stable code I&#39;ve got for 2.7.x with little reason to upgrade just for sake of upgrading ..) | I&#39;ll write something up, might take a bit tho."}, {"owner": {"reputation": 1194, "user_id": 9542954, "user_type": "registered", "profile_image": "https://graph.facebook.com/1624734454261564/picture?type=large", "display_name": "Miguel 2488", "link": "https://stackoverflow.com/users/9542954/miguel-2488"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1538724844, "post_id": 52635539, "comment_id": 92251238, "body": "That&#39;s ok @DanMa\u0161ek. Thank you again for your tips, no worries take your time to write your answer. I&#39;ll be here to upvote and accept it :)"}], "owner": {"reputation": 1194, "user_id": 9542954, "user_type": "registered", "profile_image": "https://graph.facebook.com/1624734454261564/picture?type=large", "display_name": "Miguel 2488", "link": "https://stackoverflow.com/users/9542954/miguel-2488"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1538640563, "creation_date": 1538600006, "last_edit_date": 1538640563, "question_id": 52635539, "link": "https://stackoverflow.com/questions/52635539/image-processing-how-to-store-image-list-and-its-labels-in-one-hot-encoded-nda", "title": "Image processing - How to store image list and its labels in one-hot encoded ndarray?", "body": "<p>I got a folder with 1976 training images. Each image has a shape (118,128,1) (greyscaled images). I created an array with all the images like this:</p>\n\n<pre><code>import glob\nimport scipy\nimport cv2\n\nimages = [cv2.imread(path, 0) for path in glob.glob('rootDir/train/*.png')]\nimages = np.asarray(images)\n</code></pre>\n\n<p>which yields:</p>\n\n<pre><code>images \nout[0]  array([[[ 38,  47,  51, ...,  53,  53,  46],\n            [ 48,  49,  50, ...,  53,  50,  51],\n            [ 48,  51,  53, ...,  54,  50,  51],\n            ...,\n            [ 59,  61,  57, ..., 194, 195, 200],\n            [ 76,  71,  65, ..., 212, 212, 199],\n            [ 81,  80,  77, ..., 179, 184, 197]],\n            ....\n\nimages.shape\nout[1]: (1976, 128, 118)\n</code></pre>\n\n<p>now the thing is, i have the images's labels stored in a csv file in the following format:</p>\n\n<pre><code>id,appliance\n1000,8\n1001,1\n1002,8\n1003,1\n1004,6\n1005,1\n1006,1\n1007,2\n1008\n1009,5\n1010\n1011,3\n1012,2\n....\n</code></pre>\n\n<p>the id matches the filename of each image and the \"appliance\" column contains the label values assigned to each image for training.</p>\n\n<p>In order to feed this data to a CNN model using CNTK I need to convert the image data into a one-hot encoded array with the image features and its labels. The expected output I would like to have would be something like this:</p>\n\n<pre><code>|labels 0 0 0 1 0 0 0 0 0 0 |features 0 0 0 0 ... \n                                              (15104 integers each representing a pixel)\n</code></pre>\n\n<p>I'm totally lost and appreciate any help on this.</p>\n\n<p>EDIT IN RESPONSE TO DAN-MASEK'S COMMENT:</p>\n\n<p>Hi Dan, here's the screenshot of the error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/r5UYx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r5UYx.png\" alt=\"Screenshot\"></a></p>\n\n<p>as i said before, i set the variable ID_APP_MAP_FILENAME = 'train_labels.csv' like this. Tell me if you need any further information. Thank you</p>\n"}, {"tags": ["python", "r", "collatz"], "comments": [{"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 2, "creation_date": 1538599990, "post_id": 52635518, "comment_id": 92204258, "body": "<a href=\"http://blog.revolutionanalytics.com/2014/04/a-look-a-r-vectorization-through-the-collatz-conjecture.html\" rel=\"nofollow noreferrer\">a-look-a-r-vectorization-through-the-collatz-conjecture</a>"}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 2, "creation_date": 1538600017, "post_id": 52635518, "comment_id": 92204268, "body": "<a href=\"http://blog.revolutionanalytics.com/2014/05/r-and-the-collatz-conjecture-part-2.html\" rel=\"nofollow noreferrer\">r-and-the-collatz-conjecture-part-2.html</a>"}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 2, "creation_date": 1538600056, "post_id": 52635518, "comment_id": 92204285, "body": "<code>google R collatz efficient</code> - first 2 hits - should help :) got no idea about R"}, {"owner": {"reputation": 2513, "user_id": 1695486, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/NxIza.jpg?s=128&g=1", "display_name": "tschm", "link": "https://stackoverflow.com/users/1695486/tschm"}, "reply_to_user": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1538600685, "post_id": 52635518, "comment_id": 92204538, "body": "Unfortunately not really. I have seen those links before. They don&#39;t even attempt to construct explicitly the sequence of numbers in the conjecture. They just update a counter to get the length of the sequence(s). They run for a vector of arguments. Nevertheless, very interesting. Thank you..."}], "answers": [{"comments": [{"owner": {"reputation": 2513, "user_id": 1695486, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/NxIza.jpg?s=128&g=1", "display_name": "tschm", "link": "https://stackoverflow.com/users/1695486/tschm"}, "edited": false, "score": 0, "creation_date": 1538627388, "post_id": 52637060, "comment_id": 92210628, "body": "Wow, fascinating results. Many thanks. Now, I try to keep away from C++ as it adds yet another layer of complexity. I am very surprised by the differences between baseR and baseR_updated. I assumed baseR_updated to be faster than baseR. So baseR wins both for efficiency and elegance (over baseR_updated...)"}, {"owner": {"reputation": 41871, "user_id": 6530970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c261ba0849b06fa0b34a50df358d7fe6?s=128&d=identicon&r=PG&f=1", "display_name": "Maurits Evers", "link": "https://stackoverflow.com/users/6530970/maurits-evers"}, "reply_to_user": {"reputation": 2513, "user_id": 1695486, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/NxIza.jpg?s=128&g=1", "display_name": "tschm", "link": "https://stackoverflow.com/users/1695486/tschm"}, "edited": false, "score": 1, "creation_date": 1538908734, "post_id": 52637060, "comment_id": 92302499, "body": "Thanks for an interesting question @tschm. I guess the conclusion is that the recursive algorithm (<code>baseR</code>) is very fast, despite dynamically growing a vector in R. The <code>Rcpp</code> approach is not recursive, and is significantly faster than the equivalent base R approach <code>baseR_updated</code>. A recursive <code>Rcpp</code> version would probably be the winner;-)"}, {"owner": {"reputation": 2513, "user_id": 1695486, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/NxIza.jpg?s=128&g=1", "display_name": "tschm", "link": "https://stackoverflow.com/users/1695486/tschm"}, "edited": false, "score": 0, "creation_date": 1538934761, "post_id": 52637060, "comment_id": 92309455, "body": "I guess the next stop will be caching in particular if you compute 10000 sequences as you do...."}, {"owner": {"reputation": 2513, "user_id": 1695486, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/NxIza.jpg?s=128&g=1", "display_name": "tschm", "link": "https://stackoverflow.com/users/1695486/tschm"}, "edited": false, "score": 0, "creation_date": 1538936034, "post_id": 52637060, "comment_id": 92309827, "body": "I guess it&#39;s not trivial to cache a function in R. I could do m_f&lt;-memoise(f) but in this case  the recursive calls of f in f are taking advantage of caching..."}], "tags": [], "owner": {"reputation": 41871, "user_id": 6530970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c261ba0849b06fa0b34a50df358d7fe6?s=128&d=identicon&r=PG&f=1", "display_name": "Maurits Evers", "link": "https://stackoverflow.com/users/6530970/maurits-evers"}, "is_accepted": true, "score": 2, "last_activity_date": 1540730261, "last_edit_date": 1540730261, "creation_date": 1538610085, "answer_id": 52637060, "question_id": 52635518, "link": "https://stackoverflow.com/questions/52635518/collatz-conjecture-in-r/52637060#52637060", "title": "Collatz conjecture in R", "body": "<p>I was curious to see how a C++ implementation through <code>Rcpp</code> would compare to your two base R approaches. Here are my results.</p>\n\n<p>First let's define a function <code>collatz_Rcpp</code> that returns the Hailstone sequence for a given integer <code>n</code>. The (non-recursive) implementation was adapted from <a href=\"https://rosettacode.org/wiki/Category:C%2B%2B\" rel=\"nofollow noreferrer\">Rosetta Code</a>.</p>\n\n<pre><code>library(Rcpp)\ncppFunction(\"\n    std::vector&lt;int&gt; collatz_Rcpp(int i) {\n        std::vector&lt;int&gt; v;\n        while(true) {\n            v.push_back(i);\n            if (i == 1) break;\n            i = (i % 2) ? (3 * i + 1) : (i / 2);\n        }\n        return v;\n    }\n\")\n</code></pre>\n\n<p>We now run a <code>microbenchmark</code> analysis using both your base R and the <code>Rcpp</code> implementation. We calculate the Hailstone sequences for the first 10000 integers</p>\n\n<pre><code># base R implementation\ncollatz_R &lt;- function(n) {\n    # construct the entire Collatz path starting from n\n    if (n==1) return(1)\n    if (n %% 2 == 0) return(c(n, collatz(n/2)))\n    return(c(n, collatz(3*n + 1)))\n}\n\n# \"updated\" base R implementation\ncollatz_R_updated &lt;-function(n) {\n  stopifnot(n &gt;= 1)\n  # define a vector without specifying the length\n  x = c()\n  i = 1\n  while (n &gt; 1) {\n    x[i] = n\n    i = i + 1\n    n = ifelse(n %% 2, 3*n + 1, n/2)\n  }\n  x[i] = 1\n  # now \"cut\" the vector\n  dim(x) = c(i)\n  return(x)\n}\n\nlibrary(microbenchmark)\nn &lt;- 10000\nres &lt;- microbenchmark(\n    baseR = sapply(1:n, collatz_R),\n    baseR_updated = sapply(1:n, collatz_R_updated),\n    Rcpp = sapply(1:n, collatz_Rcpp))\n\nres\n#         expr        min         lq       mean     median         uq       max\n#        baseR   65.68623   73.56471   81.42989   77.46592   83.87024  193.2609\n#baseR_updated 3861.99336 3997.45091 4240.30315 4122.88577 4348.97153 5463.7787\n#         Rcpp   36.52132   46.06178   51.61129   49.27667   53.10080  168.9824\n\nlibrary(ggplot2)\nautoplot(res)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/0OS3h.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0OS3h.png\" alt=\"enter image description here\"></a></p>\n\n<p>The (non-recursive) <code>Rcpp</code> implementation seems to be around 30% faster than the original (recursive) base R implementation. The \"updated\" (non-recursive) base R implementation is significantly slower than the original (recursive) base R approach (the <code>microbenchmark</code> takes around 10 minutes to finish on my MacBook Air due to <code>baseR_updated</code>).</p>\n"}], "owner": {"reputation": 2513, "user_id": 1695486, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/NxIza.jpg?s=128&g=1", "display_name": "tschm", "link": "https://stackoverflow.com/users/1695486/tschm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 1, "accepted_answer_id": 52637060, "answer_count": 1, "score": 2, "last_activity_date": 1540730261, "creation_date": 1538599897, "last_edit_date": 1538602025, "question_id": 52635518, "link": "https://stackoverflow.com/questions/52635518/collatz-conjecture-in-r", "title": "Collatz conjecture in R", "body": "<p>I am still teaching some R mainly to myself (and to my students). </p>\n\n<p>Here's an implementation of the Collatz sequence in R:</p>\n\n<pre><code>f &lt;- function(n)\n{\n    # construct the entire Collatz path starting from n\n    if (n==1) return(1)\n    if (n %% 2 == 0) return(c(n, f(n/2)))\n    return(c(n, f(3*n + 1)))\n}\n</code></pre>\n\n<p>Calling f(13) I get\n13, 40, 20, 10, 5, 16, 8, 4, 2, 1</p>\n\n<p>However note that a vector is growing dynamically in size here. Such moves tend to be a recipe for inefficient code. Is there a more efficient version?</p>\n\n<p>In Python I would use</p>\n\n<pre><code>def collatz(n):\n    assert isinstance(n, int)\n    assert n &gt;= 1\n\n    def __colla(n):\n\n        while n &gt; 1:\n            yield n\n\n            if n % 2 == 0:\n                n = int(n / 2)\n            else:\n                n = int(3 * n + 1)\n\n        yield 1\n\n    return list([x for x in __colla(n)])\n</code></pre>\n\n<p>I found a way to write into vectors without specifying their dimension a priori. Therefore a solution could be</p>\n\n<pre><code>collatz &lt;-function(n)\n{\n  stopifnot(n &gt;= 1)  \n  # define a vector without specifying the length\n  x = c()\n\n  i = 1\n  while (n &gt; 1)\n  {\n    x[i] = n\n    i = i + 1\n    n = ifelse(n %% 2, 3*n + 1, n/2)\n  }\n  x[i] = 1\n  # now \"cut\" the vector\n  dim(x) = c(i)\n  return(x)\n}\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 16677, "user_id": 1092820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc78da24118b403595f62fa7856e1b6c?s=128&d=identicon&r=PG", "display_name": "Ruzihm", "link": "https://stackoverflow.com/users/1092820/ruzihm"}, "edited": false, "score": 1, "creation_date": 1538600063, "post_id": 52635510, "comment_id": 92204291, "body": "start by using <code>&quot; &quot;.join(food)</code> to get a string of all the food separated by a space character."}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 2, "creation_date": 1538600257, "post_id": 52635510, "comment_id": 92204354, "body": "While asking &quot;How to make this better&quot; <i>can</i> sometimes be an acceptable question for Stack Overflow, it&#39;s not really a good question this time, as your current code doesn&#39;t actually come anywhere near doing what you want to do. Your question seems to be &quot;Please do my homework for me&quot; which is both not a good question for this site and also might be considered cheating by your school. Please try some more to solve the problem, and if you run into a particular problem, try asking us something more specific. We might be able to help you then!"}, {"owner": {"reputation": 11289, "user_id": 1822698, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/725a332cc5b93972e715f071b631f4a8?s=128&d=identicon&r=PG", "display_name": "slider", "link": "https://stackoverflow.com/users/1822698/slider"}, "edited": false, "score": 1, "creation_date": 1538600481, "post_id": 52635510, "comment_id": 92204440, "body": "You may want to look at the python string module documentation (which has many useful methods and great examples) here: <a href=\"https://docs.python.org/2/library/string.html\" rel=\"nofollow noreferrer\">docs.python.org/2/library/string.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 1, "creation_date": 1538600468, "post_id": 52635605, "comment_id": 92204433, "body": "Downvote with no comments? This is exactly what OP wants"}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1538601334, "post_id": 52635605, "comment_id": 92204789, "body": "I&#39;ll upvote your answer to compensate for the unjustified downvote. Just add some explanation to your answer."}], "tags": [], "owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "is_accepted": false, "score": 1, "last_activity_date": 1538601697, "last_edit_date": 1538601697, "creation_date": 1538600310, "answer_id": 52635605, "question_id": 52635510, "link": "https://stackoverflow.com/questions/52635510/can-someone-help-me-make-this-code-better/52635605#52635605", "title": "Can someone help me make this code better", "body": "<p><a href=\"https://docs.python.org/2/library/stdtypes.html#str.join\" rel=\"nofollow noreferrer\">join</a> can be used to condense the elements of any iterable like string, list or tuple and <code>' '</code> will join the elements with this as a separator and will return the final output as a string</p>\n\n<pre><code>' '.join(food).upper() \n' '.join(food).lower()\n' '.join(food).title()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10453500, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NreGWP33sdk/AAAAAAAAAAI/AAAAAAAAAY4/xtBYyJO6Ijk/photo.jpg?sz=128", "display_name": "Darren Gonzalez", "link": "https://stackoverflow.com/users/10453500/darren-gonzalez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "closed_date": 1538604644, "answer_count": 1, "score": -4, "last_activity_date": 1538601697, "creation_date": 1538599875, "last_edit_date": 1538599961, "question_id": 52635510, "link": "https://stackoverflow.com/questions/52635510/can-someone-help-me-make-this-code-better", "closed_reason": "Needs more focus", "title": "Can someone help me make this code better", "body": "<pre><code>food = ['pizza' , 'bread' , 'apple' , 'banana' , 'hamburger']\n\nprint(food[0].upper())\n</code></pre>\n\n<p>I want to print all of the indexes in a single line and all spaced out and not attached to each other. I also want to figure out how i can lowercase all of the indexes as well as keep them as a title.</p>\n\n<p>This is how I want it to look: </p>\n\n<pre><code>PIZZA BREAD APPLE BANANA HAMBURGER\n\npizza bread apple banana hamburger\n\nPizza Bread Apple Banana Hamburger\n</code></pre>\n"}, {"tags": ["python", "image", "scikit-image"], "answers": [{"tags": [], "owner": {"reputation": 3747, "user_id": 224254, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3574772b96b3708ab652c69914bbcce0?s=128&d=identicon&r=PG", "display_name": "Juan", "link": "https://stackoverflow.com/users/224254/juan"}, "is_accepted": false, "score": 1, "last_activity_date": 1538622972, "creation_date": 1538622972, "answer_id": 52638463, "question_id": 52635369, "link": "https://stackoverflow.com/questions/52635369/detecting-blobs-with-scikit/52638463#52638463", "title": "Detecting blobs with scikit", "body": "<p>Probably the yellow blobs are too lightly colored to be picked by <code>blob_doh</code>. Since you appear to have strong prior knowledge with these images (exact yellow and exact red, based on my color picker), you can make an image with <em>just</em> the target points:</p>\n\n<pre><code>from skimage import io, util\nimage = util.img_as_float(io.imread(\"2-9.jpg\"))\nt = 0.001  # tolerance of deviation from exact color\nblobs = ((image - [1, 0, 0])**2 &lt; t)  # distance from red less than t\n         | (image - [1, 1, 0])**2 &lt; t))  # distance from yellow\nblobs_float = blobs.astype(float)  # convert from boolean to 1.0/0.0\n</code></pre>\n\n<p>Then, use <code>blob_doh</code> on the <code>blobs_float</code> image.</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 57, "user_id": 6721866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6218525853fecbf803293800b0791327?s=128&d=identicon&r=PG&f=1", "display_name": "sydg", "link": "https://stackoverflow.com/users/6721866/sydg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 327, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1538723853, "creation_date": 1538599303, "last_edit_date": 1538723853, "question_id": 52635369, "link": "https://stackoverflow.com/questions/52635369/detecting-blobs-with-scikit", "title": "Detecting blobs with scikit", "body": "<p>I am trying to detect the large yellow and red circles (not the small ones at the bottom) using scikit. It seems to be very accurate for the red circles (after filtering for larger radii), but it can't seem to detect the yellow circles.</p>\n\n<p>What I've tried, based on <a href=\"http://scikit-image.org/docs/dev/auto_examples/features_detection/plot_blob.html#sphx-glr-download-auto-examples-features-detection-plot-blob-py\" rel=\"nofollow noreferrer\">this</a>. I am only interested in the array of x, y, and radius, so the code doesn't need the image with the circles overlaying.</p>\n\n<p>I've tried the three methods in the scikit example, but found the doh (Determinant of Hessian) worked best for at least identifying the red circles, as the other 2 methods didn't work for them.</p>\n\n<p>I've also tried using the scikit Hough circles from <a href=\"http://scikit-image.org/docs/dev/auto_examples/edges/plot_circular_elliptical_hough_transform.html#sphx-glr-auto-examples-edges-plot-circular-elliptical-hough-transform-py\" rel=\"nofollow noreferrer\">here</a>, but the same problem exists where it doesn't detect the yellow circles.</p>\n\n<pre><code>from skimage import data, io\nfrom skimage.feature import blob_doh\nfrom skimage.color import rgb2gray\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\n\nimage = io.imread(\"2-9.jpg\")\nimage_gray = rgb2gray(image)\n\nblobs_doh = blob_doh(image_gray, max_sigma=30, threshold=.01)\n\ndf_doh = pd.DataFrame(blobs_doh[:, :], columns=[\"y\", \"x\", \"radius\"])\n\ndf_doh.to_csv('doh.csv')\n</code></pre>\n\n<p>I then imported the data as a csv and plotted using R (to show accuracy)</p>\n\n<pre><code>df &lt;- fread('doh.csv')\nlibrary(imager)\nim &lt;- load.image(\"2-9.jpg\")\nplot(im)\npoints(df$x, df$y)\ndf_filtered &lt;- filter(df, radius &gt;= 4.22) #radius of any less gives too many points\nplot(im)\npoints(df_filtered$x, df_filtered$y)\n</code></pre>\n"}, {"tags": ["python", "utf-8"], "answers": [{"comments": [{"owner": {"reputation": 263, "user_id": 841539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db27efaa25869db9db39db67c3a08e7?s=128&d=identicon&r=PG", "display_name": "Olivier", "link": "https://stackoverflow.com/users/841539/olivier"}, "edited": false, "score": 0, "creation_date": 1538687784, "post_id": 52635558, "comment_id": 92241850, "body": "Thank you for your clear explanation. Indeed, I have LANG=&quot;fr_FR.utf8&quot;.  However my last question remains unanswered: if I have a string that reads &quot;\\303\\251&quot;, how can I output &quot;&#233;&quot; in the same way as in Python 2 ? Note: That string comes, for example, from the output of strace."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 263, "user_id": 841539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db27efaa25869db9db39db67c3a08e7?s=128&d=identicon&r=PG", "display_name": "Olivier", "link": "https://stackoverflow.com/users/841539/olivier"}, "edited": false, "score": 0, "creation_date": 1538691059, "post_id": 52635558, "comment_id": 92242927, "body": "@Olivier: You shouldn&#39;t pass Python 3 a <code>&quot;\\303\\251&quot;</code> string literal if you want <code>&#233;</code>, because that string literal means <code>&#195;&#169;</code>. What you should do depends on exactly what comes out of strace (backslash-3-0-3-backslash-2-5-1? two bytes?) and how that output is getting to Python. The solution might involve using a bytes literal (<code>b&quot;\\303\\251&quot;</code>) or reading characters from stdin and decoding octal escapes in the input."}, {"owner": {"reputation": 263, "user_id": 841539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db27efaa25869db9db39db67c3a08e7?s=128&d=identicon&r=PG", "display_name": "Olivier", "link": "https://stackoverflow.com/users/841539/olivier"}, "edited": false, "score": 0, "creation_date": 1538819918, "post_id": 52635558, "comment_id": 92284580, "body": "The input really is &quot;\\303\\251&quot; with 7 characters (not 2 bytes). This comes from strace output, for example when it reports the use of &quot;stat(...)&quot; with a path string that contains an utf-8 character &quot;&#233;&quot;. Your suggestion led me to: b&quot;M\\303\\251canique&quot;.decode()  --&gt; &#39;M&#233;canique&#39; That works with Python 3, thank you!"}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1538603361, "last_edit_date": 1538603361, "creation_date": 1538600102, "answer_id": 52635558, "question_id": 52635363, "link": "https://stackoverflow.com/questions/52635363/difference-between-python-2-and-3-for-utf-8/52635558#52635558", "title": "Difference between python 2 and 3 for utf-8", "body": "<p>On Python 2, you are telling Python to print two bytes. It prints two bytes. Your terminal interprets those two bytes as an encoding of <code>\u00e9</code> and displays <code>\u00e9</code>. (It looks like your terminal is using UTF8.)</p>\n\n<p>On Python 3, you are telling Python to print the two characters with Unicode code points 0o303 and 0o251 (in octal). Those characters are <code>\u00c3\u00a9</code>. Python encodes those characters in a system-dependent encoding (probably UTF8) and writes the resulting bytes to stdout. Your terminal then decodes the bytes and displays <code>\u00c3\u00a9</code>.</p>\n\n<p>If you want Python 3 to print <code>\u00e9</code>, give it the Unicode code point (<code>\\u00e9</code>), or just tell it to print <code>\u00e9</code>:</p>\n\n<pre><code>$ python3.6 -c 'print(\"\u00e9\")'\n\u00e9\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 263, "user_id": 841539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db27efaa25869db9db39db67c3a08e7?s=128&d=identicon&r=PG", "display_name": "Olivier", "link": "https://stackoverflow.com/users/841539/olivier"}, "is_accepted": true, "score": 2, "last_activity_date": 1538821638, "creation_date": 1538821638, "answer_id": 52678085, "question_id": 52635363, "link": "https://stackoverflow.com/questions/52635363/difference-between-python-2-and-3-for-utf-8/52678085#52678085", "title": "Difference between python 2 and 3 for utf-8", "body": "<p>As explained in the first answer by user2357112, this line tells Python 3 to print two characters indicated by their octal value (an octal byte indicates the unicode code point of the character):</p>\n\n<pre><code>$ python3.6 -c 'print(\"\\303\\251\")'\n\u00c3\u00a9\n</code></pre>\n\n<p>The following line can be used for a behavior similar to Python 2:</p>\n\n<pre><code>$ python3.6 -c 'print(b\"\\303\\251\".decode())'\n\u00e9\n</code></pre>\n"}], "owner": {"reputation": 263, "user_id": 841539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db27efaa25869db9db39db67c3a08e7?s=128&d=identicon&r=PG", "display_name": "Olivier", "link": "https://stackoverflow.com/users/841539/olivier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1413, "favorite_count": 0, "accepted_answer_id": 52678085, "answer_count": 2, "score": 2, "last_activity_date": 1538821638, "creation_date": 1538599290, "question_id": 52635363, "link": "https://stackoverflow.com/questions/52635363/difference-between-python-2-and-3-for-utf-8", "title": "Difference between python 2 and 3 for utf-8", "body": "<p>Why is the output different for the two commands below?</p>\n\n<pre><code>$ python2.7 -c 'print(\"\\303\\251\")' \n\u00e9   #\u00a0&lt;-- Great\n\n$ python3.6 -c 'print(\"\\303\\251\")'\n\u00c3\u00a9  # &lt;-- WTF?!\n</code></pre>\n\n<p>What would be the python3 command to output \"\u00e9\" from \"\\303\\251\"?</p>\n\n<p>Best regards,</p>\n\n<p>Olivier</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 0, "creation_date": 1538599352, "post_id": 52635321, "comment_id": 92203993, "body": "Is the element to be split always on the index <code>3</code> and is the input list always 1D?"}, {"owner": {"reputation": 146, "user_id": 3563378, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000125531872/picture?type=large", "display_name": "SocketPlayer", "link": "https://stackoverflow.com/users/3563378/socketplayer"}, "edited": false, "score": 0, "creation_date": 1538599413, "post_id": 52635321, "comment_id": 92204019, "body": "Should it be generic and works with more inputs?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4831795"}, "reply_to_user": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 0, "creation_date": 1538599498, "post_id": 52635321, "comment_id": 92204054, "body": "@zwer yes , its always at 3rd index."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4831795"}, "reply_to_user": {"reputation": 146, "user_id": 3563378, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000125531872/picture?type=large", "display_name": "SocketPlayer", "link": "https://stackoverflow.com/users/3563378/socketplayer"}, "edited": false, "score": 0, "creation_date": 1538599621, "post_id": 52635321, "comment_id": 92204113, "body": "@SocketPlayer i don&#39;t know what do you mean by generic , but this list is kind of a part of another list i.e` l=[inp1,inp2,inp3,...]` , but  every input list has always the same fixed size  with the comma seperated string at 3rd position."}], "answers": [{"tags": [], "owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "is_accepted": true, "score": 3, "last_activity_date": 1538601487, "last_edit_date": 1538601487, "creation_date": 1538599595, "answer_id": 52635447, "question_id": 52635321, "link": "https://stackoverflow.com/questions/52635321/converting-a-list-having-1-comma-seperated-string-into-2d-list/52635447#52635447", "title": "Converting a list having 1 comma-seperated string into 2d-list", "body": "<p>Given the hard constraints, you can <s>speed it up a bit</s> make it a bit more tidy using list comprehension and slicing:</p>\n\n<pre><code>inp = [1, 2, 3, \"a,b,c\", 4, \"blah\"]\noutp = [inp[:3] + [i] + inp[4:] for i in inp[3].split(\",\")]\n# [[1, 2, 3, 'a', 4, 'blah'],\n#  [1, 2, 3, 'b', 4, 'blah'],\n#  [1, 2, 3, 'c', 4, 'blah']]\n</code></pre>\n\n<p>But it won't reduce the complexity. In fact, it will probably run slower than your approach for your example as it has to perform 3 list creations and a list concatenation per each <em>entry</em> in <code>inp[3]</code> and unless <code>inp[3]</code> is very long, list comprehension won't show its real advantage to offset the list creation overhead.</p>\n"}, {"tags": [], "owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "is_accepted": false, "score": 0, "last_activity_date": 1538599924, "creation_date": 1538599924, "answer_id": 52635523, "question_id": 52635321, "link": "https://stackoverflow.com/questions/52635321/converting-a-list-having-1-comma-seperated-string-into-2d-list/52635523#52635523", "title": "Converting a list having 1 comma-seperated string into 2d-list", "body": "<p>You can find the index of your intended string with a generator expression within <code>next</code> function and then simply create your expected result with a list comprehension:</p>\n\n<pre><code>In [19]: ind = next(i for i, j in enumerate(inp) if isinstance(j, str) and ',' in j)\n\nIn [20]: [[*inp[:ind], i, *inp[ind + 1:]] for i in inp[ind].split(',')]\nOut[20]: \n[[1, 2, 3, 'a', 4, 'blah'],\n [1, 2, 3, 'b', 4, 'blah'],\n [1, 2, 3, 'c', 4, 'blah']]\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4831795"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 52635447, "answer_count": 2, "score": 3, "last_activity_date": 1538601487, "creation_date": 1538599067, "question_id": 52635321, "link": "https://stackoverflow.com/questions/52635321/converting-a-list-having-1-comma-seperated-string-into-2d-list", "title": "Converting a list having 1 comma-seperated string into 2d-list", "body": "<p>I don't know much about python's <code>map</code>/ <code>reduce</code> function but is there a way to convert this input list to  given output?  </p>\n\n<pre><code>inp  = [1,2,3,\"a,b,c\",4,\"blah\"]\noutp = [\n    [1,2,3,'a',4,'blah'],\n    [1,2,3,'b',4,'blah'],\n    [1,2,3,'c',4,'blah']\n    ]\n</code></pre>\n\n<p>As of now i am only doing this by using loops and it does not look like an efficient method to do so:  </p>\n\n<pre><code>inp[3]=inp[3].split(',')\nout=[]\nfor i in inp[3]:\n    k=list(inp)\n    k[3]=i\n    out.append(k)   \n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2986, "user_id": 1930814, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/k3Cu7.jpg?s=128&g=1", "display_name": "Dalton C&#233;zane", "link": "https://stackoverflow.com/users/1930814/dalton-c%c3%a9zane"}, "edited": false, "score": 0, "creation_date": 1538599145, "post_id": 52635303, "comment_id": 92203896, "body": "Try updating the <code>element</code> at the end of the <code>while</code> loop: <code>element = driver.find_element_by_xpath(variable)</code>..."}, {"owner": {"reputation": 1, "user_id": 10453436, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y3vsN-8EWoY/AAAAAAAAAAI/AAAAAAAAAAc/iC-ctbU1EdQ/photo.jpg?sz=128", "display_name": "Wadey", "link": "https://stackoverflow.com/users/10453436/wadey"}, "reply_to_user": {"reputation": 2986, "user_id": 1930814, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/k3Cu7.jpg?s=128&g=1", "display_name": "Dalton C&#233;zane", "link": "https://stackoverflow.com/users/1930814/dalton-c%c3%a9zane"}, "edited": false, "score": 0, "creation_date": 1538599635, "post_id": 52635303, "comment_id": 92204121, "body": "tried. same error :("}, {"owner": {"reputation": 2986, "user_id": 1930814, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/k3Cu7.jpg?s=128&g=1", "display_name": "Dalton C&#233;zane", "link": "https://stackoverflow.com/users/1930814/dalton-c%c3%a9zane"}, "edited": false, "score": 0, "creation_date": 1538688131, "post_id": 52635303, "comment_id": 92241957, "body": "Are you sure? Take a look here: <a href=\"https://sqa.stackexchange.com/questions/3464/element-is-no-longer-attached-to-the-dom-staleelementreferenceexception-when-s/20520#20520\" title=\"element is no longer attached to the dom staleelementreferenceexception when s\">sqa.stackexchange.com/questions/3464/&hellip;</a> . Also, how many times your while code is executing? 0? 1? More than 1?"}, {"owner": {"reputation": 1, "user_id": 10453436, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y3vsN-8EWoY/AAAAAAAAAAI/AAAAAAAAAAc/iC-ctbU1EdQ/photo.jpg?sz=128", "display_name": "Wadey", "link": "https://stackoverflow.com/users/10453436/wadey"}, "reply_to_user": {"reputation": 2986, "user_id": 1930814, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/k3Cu7.jpg?s=128&g=1", "display_name": "Dalton C&#233;zane", "link": "https://stackoverflow.com/users/1930814/dalton-c%c3%a9zane"}, "edited": false, "score": 0, "creation_date": 1538850627, "post_id": 52635303, "comment_id": 92292423, "body": "got there eventually. used a try/except in the end"}, {"owner": {"reputation": 2986, "user_id": 1930814, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/k3Cu7.jpg?s=128&g=1", "display_name": "Dalton C&#233;zane", "link": "https://stackoverflow.com/users/1930814/dalton-c%c3%a9zane"}, "edited": false, "score": 0, "creation_date": 1539007592, "post_id": 52635303, "comment_id": 92334661, "body": "Did you get it with my suggestion?"}, {"owner": {"reputation": 1, "user_id": 10453436, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y3vsN-8EWoY/AAAAAAAAAAI/AAAAAAAAAAc/iC-ctbU1EdQ/photo.jpg?sz=128", "display_name": "Wadey", "link": "https://stackoverflow.com/users/10453436/wadey"}, "reply_to_user": {"reputation": 2986, "user_id": 1930814, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/k3Cu7.jpg?s=128&g=1", "display_name": "Dalton C&#233;zane", "link": "https://stackoverflow.com/users/1930814/dalton-c%c3%a9zane"}, "edited": false, "score": 0, "creation_date": 1539156854, "post_id": 52635303, "comment_id": 92394622, "body": "I actually had to go with something wildly different. Im sure it could be made easier but as I say, im a noob so i played around with a try/except and got it working with the below code:"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10453436, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y3vsN-8EWoY/AAAAAAAAAAI/AAAAAAAAAAc/iC-ctbU1EdQ/photo.jpg?sz=128", "display_name": "Wadey", "link": "https://stackoverflow.com/users/10453436/wadey"}, "is_accepted": false, "score": 0, "last_activity_date": 1539157153, "creation_date": 1539157153, "answer_id": 52735023, "question_id": 52635303, "link": "https://stackoverflow.com/questions/52635303/while-loop-not-working-when-element-is-no-longer-visible-python/52735023#52735023", "title": "while loop not working when element is no longer visible - python", "body": "<pre><code>try:\n    driver.find_element_by_xpath(variable)\n    while True:\n        element = driver.find_element_by_xpath(variable)\n        ActionChains(driver).click_and_hold(element).perform()\n        time.sleep(quality)\n        try:\n            driver.find_element_by_xpath(variable)\n            if True:\n                element = driver.find_element_by_xpath(variable)\n                ActionChains(driver).release(element).perform()\n                time.sleep(quality)\n        except NoSuchElementException:\n            return False\nexcept NoSuchElementException:\n    return False\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10453436, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y3vsN-8EWoY/AAAAAAAAAAI/AAAAAAAAAAc/iC-ctbU1EdQ/photo.jpg?sz=128", "display_name": "Wadey", "link": "https://stackoverflow.com/users/10453436/wadey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539157153, "creation_date": 1538599012, "last_edit_date": 1538599102, "question_id": 52635303, "link": "https://stackoverflow.com/questions/52635303/while-loop-not-working-when-element-is-no-longer-visible-python", "title": "while loop not working when element is no longer visible - python", "body": "<p>Im quite a newbie to this so bear with me.\nIm trying to perform a continuous loop of key press and releases on a specific element all the time it is visible. This is what i have:</p>\n\n<pre><code>def do something(self):\n  element = driver.find_element_by_xpath(variable)\n  while element.is_displayed():\n      ActionChains(driver).click_and_hold(element).perform()\n      time.sleep(2)\n      ActionChains(driver).release(element).perform()\n      time.sleep(2)\n  driver.quit()\n</code></pre>\n\n<p>the issue is that is seems to still attempt to perform the action even when the element is no longer visible. The element is expected to disappear after a random amount of time, therefore the loop should end but i always get the error:</p>\n\n<pre><code>StaleElementReferenceException: Message: The element reference of &lt;div id=\"hearing-test-button\" class=\"btn-mega null\"&gt; is stale; either the element is no longer attached to the DOM, it is not in the current frame context, or the document has been refreshed\n</code></pre>\n"}, {"tags": ["python", "scipy", "numerical-integration"], "comments": [{"owner": {"reputation": 330, "user_id": 6762971, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZeQiles7NNM/AAAAAAAAAAI/AAAAAAAACWg/2ZfMBZvc3C0/photo.jpg?sz=128", "display_name": "Ravi Patel", "link": "https://stackoverflow.com/users/6762971/ravi-patel"}, "edited": false, "score": 1, "creation_date": 1538599378, "post_id": 52635241, "comment_id": 92204001, "body": "There are parts invisible to us that we may need, e.g., Class BaseWithTwoRanges, which I imagine defines x_range_min etc."}, {"owner": {"reputation": 1, "user_id": 10453397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed12e2bba6b74861c7ec136492e0f6d?s=128&d=identicon&r=PG&f=1", "display_name": "frankie_jo", "link": "https://stackoverflow.com/users/10453397/frankie-jo"}, "reply_to_user": {"reputation": 330, "user_id": 6762971, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZeQiles7NNM/AAAAAAAAAAI/AAAAAAAACWg/2ZfMBZvc3C0/photo.jpg?sz=128", "display_name": "Ravi Patel", "link": "https://stackoverflow.com/users/6762971/ravi-patel"}, "edited": false, "score": 0, "creation_date": 1538634524, "post_id": 52635241, "comment_id": 92213023, "body": "Thanks Ravi. I&#39;ve added the missing bits, but they really don&#39;t participate in the calculation."}, {"owner": {"reputation": 1, "user_id": 10453397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed12e2bba6b74861c7ec136492e0f6d?s=128&d=identicon&r=PG&f=1", "display_name": "frankie_jo", "link": "https://stackoverflow.com/users/10453397/frankie-jo"}, "reply_to_user": {"reputation": 330, "user_id": 6762971, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZeQiles7NNM/AAAAAAAAAAI/AAAAAAAACWg/2ZfMBZvc3C0/photo.jpg?sz=128", "display_name": "Ravi Patel", "link": "https://stackoverflow.com/users/6762971/ravi-patel"}, "edited": false, "score": 0, "creation_date": 1538933830, "post_id": 52635241, "comment_id": 92309183, "body": "The answer is here: <a href=\"https://scipython.com/book/chapter-8-scipy/examples/the-volume-of-the-unit-square/\" rel=\"nofollow noreferrer\">scipython.com/book/chapter-8-scipy/examples/&hellip;</a>, but I don&#39;t understand why the &quot;func&quot; param is required to just return the radius."}], "answers": [{"tags": [], "owner": {"reputation": 36288, "user_id": 353337, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/500a1e2e864ae08f386afde2cd21add0?s=128&d=identicon&r=PG", "display_name": "Nico Schl&#246;mer", "link": "https://stackoverflow.com/users/353337/nico-schl%c3%b6mer"}, "is_accepted": false, "score": 0, "last_activity_date": 1540563719, "creation_date": 1540563719, "answer_id": 53010792, "question_id": 52635241, "link": "https://stackoverflow.com/questions/52635241/volume-of-a-sphere-using-python3-scipy-integrate/53010792#53010792", "title": "Volume of a sphere using python3-scipy.integrate", "body": "<p>If you're looking for the approximate volume of arbitrary shapes, numerical quadrature might not help you much. The problem is that almost all quadrature methods assume reasonable smoothness of the function you're trying to integrate (e.g., polynomials of a certain degree). The characteristic function of a domain is not smooth at all.</p>\n\n<p>A better approach is to approximate your domain with simplices and then add their volumes. Python tools that can help you with the task are</p>\n\n<ul>\n<li><a href=\"https://github.com/nschloe/pygalmesh\" rel=\"nofollow noreferrer\">pygalmesh</a> (project of mine)</li>\n<li><a href=\"https://github.com/nschloe/pygmsh\" rel=\"nofollow noreferrer\">pygmsh</a> (another project of mine)</li>\n</ul>\n\n<p>Search for <em>mesh generation</em> and you'll find more.</p>\n"}], "owner": {"reputation": 1, "user_id": 10453397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed12e2bba6b74861c7ec136492e0f6d?s=128&d=identicon&r=PG&f=1", "display_name": "frankie_jo", "link": "https://stackoverflow.com/users/10453397/frankie-jo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540563719, "creation_date": 1538598732, "last_edit_date": 1538634259, "question_id": 52635241, "link": "https://stackoverflow.com/questions/52635241/volume-of-a-sphere-using-python3-scipy-integrate", "title": "Volume of a sphere using python3-scipy.integrate", "body": "<p>I'm trying to catch up on using python for numerical problems after not using it for quite some time. I am working towards solving a toy problem of calculating the volume of a fairly arbitrary shape (parametrically specified). So far to do this I have a base class as follows:</p>\n\n<pre><code>class BaseWithRange():\n    def __init__(self):\n        self._x_range = None\n\n    @property\n    def x_range_min(self):\n        return self.x_range[0]\n\n    @property\n    def x_range_max(self):\n        return self.x_range[1]\n\n    @property\n    def x_range(self):\n        if self._x_range is None:\n            raise NotImplementedError(\"You need to set the x range value\")\n        return self._x_range\n\n    @x_range.setter\n    def x_range(self, range):\n        self._x_range = range\n\n    def _check_in_x_range(self, x):\n        errString = f\"'x' is out of range of ({self.x_range_min}, {self.x_range_max}) at {x}\"\n        if hasattr(x, \"__iter__\") and not isinstance(x, str):\n            if (x &lt; self.x_range_min).any() or (x &gt; self.x_range_max).any():\n                raise ValueError(errString)\n        else:\n            if x &lt; self.x_range_min or x &gt; self.x_range_max:\n                raise ValueError(errString)\n\n    def _val(self, *args):\n        raise NotImplementedError()\n\n    def val(self, *args):\n        raise NotImplementedError()\n\n\nclass BaseWithTwoRanges(BaseWithRange):\n    def __init__(self):\n        super().__init__()\n        self._y_range = None\n\n    @property\n    def y_range_min(self):\n        return self.y_range[0]\n\n    @property\n    def y_range_max(self):\n        return self.y_range[1]\n\n    @property\n    def y_range(self):\n        if self._y_range is None:\n            raise NotImplementedError(\"You need to set the y range value\")\n        return self._y_range\n\n    @y_range.setter\n    def y_range(self, range):\n        self._y_range = range\n\n    def _check_in_y_range(self, y):\n        errString = f\"'y' is out of range of ({self.y_range_min}, {self.y_range_max}) at {y}\"\n        if hasattr(y, \"__iter__\") and not isinstance(y, str):\n            if (y &lt; self.y_range_min).any() or (y &gt; self.y_range_max).any():\n                raise ValueError(errString)\n        else:\n            if y &lt; self.y_range_min or y &gt; self.y_range_max:\n                raise ValueError(errString)\n\nclass SolidBase(BaseWithTwoRanges):\n    def __init__(self):\n            super().__init__()\n    @property\n    def volume(self):\n        volume, error = integrate.tplquad(self._val, self.x_range_min, self.x_range_max, self.y_lower_of_x, self.y_upper_of_x, self.z_lower_of_xy, self.z_upper_of_xy)\n        print(\"Error: \", error)\n        return volume\n\n    def _val(self, z, y, x, *args): \n        try:\n            self._check_in_x_range(x)\n            self._check_in_y_range(y)\n            return self.val(z, y, x, *args)\n        except:\n            t, v, tb = sys.exc_info()\n            errorString = \"Failed when called with these variables: \\n y    = {0}\\n x    = {1}\\n args = {2}\".format(y, x, args)\n\n            raise t(\"{0}\\n{1}\".format(v, errorString))\n\n    def val(self, z, y, x, *args):\n        raise NotImplementedError()\n\n    def y_lower_of_x(self, x):\n        raise NotImplementedError()\n\n    def y_upper_of_x(self, x):\n        raise NotImplementedError()\n\n    def z_lower_of_xy(self, x, y):\n        raise NotImplementedError()\n\n    def z_upper_of_xy(self, x, y):\n        raise NotImplementedError()\n</code></pre>\n\n<p>... and for a sphere I have implemented the following:</p>\n\n<pre><code>class Sphere(SolidBase):\n    def __init__(self, radius, center = [0,0,0]):\n        super().__init__()\n        self.radius = radius\n        self.center = center\n        self.x_range = [center[0], center[0] + radius]\n        self.y_range = [center[1], center[1] + radius]\n\n    def val(self, z, y, x):\n        a = self.center[0]\n        b = self.center[1]\n        c = self.center[2]\n        return c + sqrt(self.radius**2 - (x - a)**2 - (y - b)**2)\n\n    def y_lower_of_x(self, x):\n        return 0\n\n    def y_upper_of_x(self, x):\n        a = self.center[0]\n        b = self.center[1]\n        return b + sqrt(self.radius**2 - (x - a)**2)\n\n    def z_lower_of_xy(self, x, y):\n        return 0\n\n    def z_upper_of_xy(self, x, y):\n        a = self.center[0]\n        b = self.center[1]\n        c = self.center[2]\n        return c + sqrt(self.radius**2 - (x - a)**2 - (y - b)**2)\n</code></pre>\n\n<p>The problem is that the volume result for a sphere with radius 2 gives a result for a quarter hemisphere of 6.28, which is just not right. In other words:</p>\n\n<pre><code>In [14]: sphere = sh.Sphere(2)\n\nIn [15]: sphere.volume\nError:  8.845676088407289e-08\nOut[15]: 6.283185307096017\n</code></pre>\n\n<p>... rather than the expected (4/3*pi*2**3) / 8 = 4.1887902047863905.</p>\n\n<p>Can anyone see what I am doing wrong?</p>\n\n<p>Edit: Added more code are added missing words.</p>\n"}, {"tags": ["python", "openid", "openid-connect"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 1876187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WIcWL.png?s=128&g=1", "display_name": "C&#233;dric Clavier", "link": "https://stackoverflow.com/users/1876187/c%c3%a9dric-clavier"}, "is_accepted": false, "score": 2, "last_activity_date": 1561716059, "creation_date": 1561716059, "answer_id": 56804856, "question_id": 52635232, "link": "https://stackoverflow.com/questions/52635232/django-and-mozilla-django-oidc-how-to-log-out-of-session/56804856#56804856", "title": "Django and mozilla_django_oidc - how to log out of session?", "body": "<p>I used this trick to solve the problem</p>\n\n<p>File settings.py</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>OIDC_OP_LOGOUT_ENDPOINT = \"https://{...}/auth/realms/{...}/protocol/openid-connect/logout\"\nOIDC_OP_LOGOUT_URL_METHOD = \"main.openid.logout\"\n</code></pre>\n\n<p>I created a file openid in main folder with method logout</p>\n\n<p>main.openid.py</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>logout_endpoint = import_from_settings(\"OIDC_OP_LOGOUT_ENDPOINT\", \"\")\nreturn logout_endpoint + \"?redirect_uri=\" + request.build_absolute_uri(\"/\")\n</code></pre>\n\n<p>And I created a view LogoutView inherited from OIDCLogoutView</p>\n\n<p>view.py</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class LogoutView(OIDCLogoutView):\n    def get(self, request):\n        return self.post(request)\n</code></pre>\n\n<p>And finally</p>\n\n<p>urls.py</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>path('logout', views.LogoutView.as_view(), name='logout')\n</code></pre>\n\n<p>So when i use logout method in my http link (GET Method), it will redirect to OIDC_OP_LOGOUT_ENDPOINT that will redirect to home of current site</p>\n"}], "owner": {"reputation": 449, "user_id": 902327, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7933a001a62862c493b34588dfa0f572?s=128&d=identicon&r=PG", "display_name": "flypenguin", "link": "https://stackoverflow.com/users/902327/flypenguin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 529, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1561716059, "creation_date": 1538598678, "question_id": 52635232, "link": "https://stackoverflow.com/questions/52635232/django-and-mozilla-django-oidc-how-to-log-out-of-session", "title": "Django and mozilla_django_oidc - how to log out of session?", "body": "<p>I have successfully integrated a Django test application with our Okta IAM service, using the <code>mozilla_django_oidc</code> package. Now I can log in using Okta, which is just cool.</p>\n\n<p>But now I want to log <em>out</em> of the session again - which I cannot do it seems. <code>mozilla_django_oidc</code> provides three URLs basically:</p>\n\n<ul>\n<li><code>name=oidc_authentication_callback</code></li>\n<li><code>name=oidc_authentication_init</code> (the one <a href=\"https://mozilla-django-oidc.readthedocs.io/en/stable/installation.html#add-login-link-to-templates\" rel=\"nofollow noreferrer\">used for the \"Login\" link</a>)</li>\n<li><code>name=oidc_logout</code></li>\n</ul>\n\n<p>Naively I just added that code to my application, and expected a working logout:</p>\n\n<pre><code>{% if user.is_authenticated %}\n  &lt;p&gt;{{ user.email }} - &lt;a href=\"{% url 'oidc_logout' %}\"&gt;Logout&lt;/a&gt;&lt;/p&gt;\n{% else %}\n  # etc.\n{% end %}\n</code></pre>\n\n<p>The problem is: The <code>logout</code> endpoint only takes POST requests.</p>\n\n<p>Now, how can I log out of the session?</p>\n"}, {"tags": ["python", "python-3.x", "rest", "web-services", "flask"], "comments": [{"owner": {"reputation": 825, "user_id": 7596110, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O4cNE.jpg?s=128&g=1", "display_name": "Corina", "link": "https://stackoverflow.com/users/7596110/corina"}, "edited": false, "score": 0, "creation_date": 1538599482, "post_id": 52635230, "comment_id": 92204045, "body": "Hi Sridhar, welcome to Stack Overflow. I recommend sharing relevant snippets of your code so that the community may better assist you."}, {"owner": {"reputation": 1, "user_id": 10453045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44b676acb90889163ac87196da5617f3?s=128&d=identicon&r=PG&f=1", "display_name": "Sridhar", "link": "https://stackoverflow.com/users/10453045/sridhar"}, "reply_to_user": {"reputation": 825, "user_id": 7596110, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O4cNE.jpg?s=128&g=1", "display_name": "Corina", "link": "https://stackoverflow.com/users/7596110/corina"}, "edited": false, "score": 0, "creation_date": 1538599719, "post_id": 52635230, "comment_id": 92204142, "body": "Updated my question with code snippet. But I don&#39;t think that is relevant for what I was searching."}], "owner": {"reputation": 1, "user_id": 10453045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44b676acb90889163ac87196da5617f3?s=128&d=identicon&r=PG&f=1", "display_name": "Sridhar", "link": "https://stackoverflow.com/users/10453045/sridhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 561, "favorite_count": 0, "closed_date": 1538602414, "answer_count": 0, "score": 0, "last_activity_date": 1538637910, "creation_date": 1538598671, "last_edit_date": 1538637910, "question_id": 52635230, "link": "https://stackoverflow.com/questions/52635230/how-to-get-current-active-number-of-requests-in-flask-python", "closed_reason": "Duplicate", "title": "How to get current active number of requests in flask python?", "body": "<p>I am really new to Rest Webservices and Flask. </p>\n\n<p>I have implemented a request method which takes request and waits for 30 seconds to give response.</p>\n\n<p>I can access the request with a specific path.</p>\n\n<p>At any particulat time, I want to get how many active requests are in execution currently.</p>\n\n<p>Is there any inbuilt method or any trick to do that. </p>\n\n<p>I can't think of anything as it is completely new to me.</p>\n\n<p>Please suggest me something to think of.</p>\n\n<p>This is my code snippet for view. This is working fine. But how do I get list of active requests currently being executed.</p>\n\n<pre><code>    @app.route('/process/', methods=['GET', 'POST', 'PUT', 'DELETE'])\n    def hello_world():\n    now=datetime.now()\n    global global_dict,count\n    count+=1\n    global_dict[request.method][0]+=1\n    dt=dict()\n    dt['time']=now.strftime('%H:%M')\n    dt['method']=request.method\n    dt['headers']=dict(request.headers)\n    dt['query_string']=dict(request.args.items())\n    dt['body']=request.data.decode('utf-8')\n    time.sleep(random.randrange(30))\n    duration = datetime.now() - now\n    dt['duration'] = str(duration.seconds * 1000 + duration.microseconds) + ' microseconds'\n    print(global_dict)\n    return str(dt)\n</code></pre>\n\n<p>I need to return 0 when there are no requests currently being processed.</p>\n"}, {"tags": ["python", "sqlite", "tkinter"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 1, "creation_date": 1538598853, "post_id": 52635228, "comment_id": 92203778, "body": "<code>conn.commit</code> doesn&#39;t do anything. Perhaps you meant <code>conn.commit()</code>?"}, {"owner": {"reputation": 23, "user_id": 9224677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e94bf2d13cc461c670e7f62c839acd2?s=128&d=identicon&r=PG&f=1", "display_name": "Renier.Chaves", "link": "https://stackoverflow.com/users/9224677/renier-chaves"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1538598981, "post_id": 52635228, "comment_id": 92203828, "body": "Oh, my God, I&#39;m so sorry. I have not seen it. Thank you @BryanOakley"}], "owner": {"reputation": 23, "user_id": 9224677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e94bf2d13cc461c670e7f62c839acd2?s=128&d=identicon&r=PG&f=1", "display_name": "Renier.Chaves", "link": "https://stackoverflow.com/users/9224677/renier-chaves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1538598664, "creation_date": 1538598664, "question_id": 52635228, "link": "https://stackoverflow.com/questions/52635228/my-database-does-not-return-anything-python", "title": "My database does not return anything - Python", "body": "<p>This is my Application class, in it I enter a number and a text in the database. But when I get the database from the AssignProfile2 class it just does not return anything. It is as if it were empty, but it is not. I have already checked if the atx function is running. It is running but my select command does not return anything</p>\n\n<pre><code>class Application(tk.Tk):\n    def __init__(self, *args, **kwargs):\n        tk.Tk.__init__(self, *args, **kwargs)\n        self.configure(background='#a1dbcd')\n        tk.Tk.iconbitmap(self, default=\"images\\icon.ico\")\n        tk.Tk.wm_title(self, \"Task Hub\")\n        mainframe = tk.Frame(self)\n        mainframe.pack(side='top', fill='both', expand='True')\n        mainframe.grid_rowconfigure(0, weight=1)\n        mainframe.grid_columnconfigure(0, weight=1)\n        self.frames = {}\n        self.shared_data = {\"main\":\"nada\"}\n        for Page in (Menu, MatterPage, TeacherPage, AddTeacher, Credits, AssignProfile, AssignProfile2):\n            frame = Page(mainframe, self)\n            self.frames[Page] = frame\n            frame.grid(row=0, column=0, sticky='snew')\n        self.show_frames(Menu)\n\n    def show_frames_op(self, cont, tree):\n        frame = self.frames[cont]\n        frame.event_generate(\"&lt;&lt;ShowFrame&gt;&gt;\")\n        sptext = tree.item(tree.selection())['values'][1]\n        cursor.execute(\"INSERT INTO Ctc (Id, Text) VALUES (?, ?);\", (1, sptext))#&lt;--------- Here\n        conn.commit\n        frame.tkraise()\n\nclass AssignProfile2(tk.Frame):\n    def __init__(self, parent, controller):\n        tk.Frame.__init__(self, parent)\n        self.grid(padx=10)\n        self.controller = controller\n        self.bind(\"&lt;&lt;ShowFrame&gt;&gt;\", self.atx)\n        label = tk.Label(self, text=\"OI teste\")\n        label.grid(row=0, column=0)\n\n    def atx(self, event):\n        y = 1\n        cursor.execute(\"SELECT * FROM Ctc;\")\n        conn.commit\n        for h in cursor.fetchall():\n            print(h[1])\n</code></pre>\n"}, {"tags": ["python", "list", "loops", "dataframe"], "comments": [{"owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "edited": false, "score": 0, "creation_date": 1538598487, "post_id": 52635171, "comment_id": 92203606, "body": "You probably want <code>np.select</code> instead of <code>np.where</code>"}, {"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1538598568, "post_id": 52635171, "comment_id": 92203646, "body": "I think you can also achieve this by creating a temp df and using <code>join</code>"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 6111195, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/de15731a3ca770fb531d0df72f668b55?s=128&d=identicon&r=PG&f=1", "display_name": "scannon", "link": "https://stackoverflow.com/users/6111195/scannon"}, "edited": false, "score": 0, "creation_date": 1538600282, "post_id": 52635393, "comment_id": 92204363, "body": "Thanks, but what if my lists are of different lengths? thats not the case in the example I provided but thats what I will be dealing with."}, {"owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "reply_to_user": {"reputation": 5, "user_id": 6111195, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/de15731a3ca770fb531d0df72f668b55?s=128&d=identicon&r=PG&f=1", "display_name": "scannon", "link": "https://stackoverflow.com/users/6111195/scannon"}, "edited": false, "score": 0, "creation_date": 1538600803, "post_id": 52635393, "comment_id": 92204603, "body": "Good question, I have added another option above. This assumes that the query will only fall into a single category however. If it falls into multiple categories (i.e. is associated with multiple keys in your dictionary), then it will return the first matching key."}, {"owner": {"reputation": 5, "user_id": 6111195, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/de15731a3ca770fb531d0df72f668b55?s=128&d=identicon&r=PG&f=1", "display_name": "scannon", "link": "https://stackoverflow.com/users/6111195/scannon"}, "edited": false, "score": 0, "creation_date": 1538601282, "post_id": 52635393, "comment_id": 92204770, "body": "thanks! i think this will do the trick, or at least give me a dataframe i can then merge to my larger, original one"}, {"owner": {"reputation": 5, "user_id": 6111195, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/de15731a3ca770fb531d0df72f668b55?s=128&d=identicon&r=PG&f=1", "display_name": "scannon", "link": "https://stackoverflow.com/users/6111195/scannon"}, "edited": false, "score": 0, "creation_date": 1538608237, "post_id": 52635393, "comment_id": 92206756, "body": "i dont have a high enough reputation yet, but i will as soon as i do. thank again for your help"}], "tags": [], "owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "is_accepted": true, "score": 0, "last_activity_date": 1538600739, "last_edit_date": 1538600739, "creation_date": 1538599378, "answer_id": 52635393, "question_id": 52635171, "link": "https://stackoverflow.com/questions/52635171/create-new-column-based-on-other-column-values-after-iterating-through-multiple/52635393#52635393", "title": "create new column based on other column values after iterating through multiple lists", "body": "<p>I would just put your data into a dictionary as you suggested in your OP:</p>\n\n<pre><code>import pandas as pd\n\nfruits = ['apples', 'oranges', 'bananas']\nveggies = ['carrots', 'lettuce', 'onions']\nmeats = ['steak', 'chicken', 'fish']\n\ndata = {'fruits': fruits, 'veggies': veggies, 'meats': meats}\n\ndf = pd.DataFrame(data)\n</code></pre>\n\n<p>Yields:</p>\n\n<pre><code>    fruits  veggies    meats\n0   apples  carrots    steak\n1  oranges  lettuce  chicken\n2  bananas   onions     fish\n</code></pre>\n\n<p>Per your comment, this will not work if the list are of different lengths. Using your original dataframe format, you could do the following with <code>apply()</code>:</p>\n\n<pre><code>df = pd.DataFrame(fruits + veggies + meats, columns=['foods'])\n\ndef find_category(x):\n\n  return [k for k, v in data.items() if x in v][0]\n\ndf['food_type'] = df['foods'].apply(find_category)\n</code></pre>\n\n<p>Yields:</p>\n\n<pre><code>     foods food_type\n0   apples    fruits\n1  oranges    fruits\n2  bananas    fruits\n3  carrots   veggies\n4  lettuce   veggies\n5   onions   veggies\n6    steak     meats\n7  chicken     meats\n8     fish     meats\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 6111195, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/de15731a3ca770fb531d0df72f668b55?s=128&d=identicon&r=PG&f=1", "display_name": "scannon", "link": "https://stackoverflow.com/users/6111195/scannon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 52635393, "answer_count": 1, "score": 0, "last_activity_date": 1538600739, "creation_date": 1538598431, "last_edit_date": 1538598644, "question_id": 52635171, "link": "https://stackoverflow.com/questions/52635171/create-new-column-based-on-other-column-values-after-iterating-through-multiple", "title": "create new column based on other column values after iterating through multiple lists", "body": "<p>I have a dataframe that includes a column with multiple foods items. I want to create a new column with the food item type, which is stored in multiple lists. </p>\n\n<p>Here are my lists: </p>\n\n<pre><code>fruits = ['apples', 'oranges', 'bananas']\nveggies = ['carrots', 'lettuce', 'onions']\nmeats = ['steak', 'chicken', 'fish']\n</code></pre>\n\n<p>I have a column that contains all of these food items, but not want to create a column that has the food types. </p>\n\n<p>I have a pretty clunky solution to do this, but I was wondering if there is an easier way to iterate through these lists and append the food type to the new column.</p>\n\n<p>Here is my current solution:</p>\n\n<pre><code>df['food_type'] = np.where(df['foods'].isin(fruits),'fruits',\n                        (np.where(df['foods'].isin(veggies),'veggies',                            \n                        (np.where(df['foods'].isin(meats),'meats','other')))))\n</code></pre>\n\n<p>Would it better to create a dictionary containing the lists and iterate through that? i.e. </p>\n\n<pre><code>food_types ={'fruits':['apples','oranges','bananas'],'veggies':['carrots', 'lettuce', 'onions'],'meats': ['steak', 'chicken', 'fish']}\n</code></pre>\n"}, {"tags": ["python", "django", "mongodb", "aggregate", "pymongo"], "comments": [{"owner": {"reputation": 9279, "user_id": 6440033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f070f5eb58ce80fa0b975a805e712362?s=128&d=identicon&r=PG&f=1", "display_name": "dnickless", "link": "https://stackoverflow.com/users/6440033/dnickless"}, "edited": false, "score": 1, "creation_date": 1538601830, "post_id": 52635168, "comment_id": 92204945, "body": "Can you please post some sample data and the expected result?"}, {"owner": {"reputation": 3713, "user_id": 2276898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9820bd3aabac7f4b8df37078f6a9813f?s=128&d=identicon&r=PG", "display_name": "matthPen", "link": "https://stackoverflow.com/users/2276898/matthpen"}, "edited": false, "score": 0, "creation_date": 1538602126, "post_id": 52635168, "comment_id": 92205047, "body": "In your $group stage, you just define an _id without acculumator  =&gt; output only _id. In $project, &#39;aR&#39; doesn&#39;t exist (but &#39;_id.aR does!), and yo.user-email doesn&#39;t exist too (due to $group with only _id)"}], "owner": {"user_type": "does_not_exist", "display_name": "user10354541"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1538598425, "creation_date": 1538598425, "question_id": 52635168, "link": "https://stackoverflow.com/questions/52635168/group-returning-empty-rows-when-i-use-aggregate", "title": "$group returning empty rows when I use aggregate", "body": "<p>I want <strong>DISTINCT</strong> rows with my query. I am getting total instead of distinct rows. I tried <code>$group</code> but that is returning empty rows</p>\n\n<p>Query:</p>\n\n<pre><code>  pipeline = mycol.aggregate([\n    { '$lookup': {'from': \"theUL\", 'localField': \"data.rID\", 'foreignField': \"aR\", 'as': \"yo\"} },\n    { '$unwind': \"$yo\"},\n    {\"$unwind\":\"$tags\"},{'$match': {'tags.tag.name':'A A', 'url': {'$regex': 'abc.com'}}},\n   {'$group':{ '_id' : {'aR': \"$aR\"}} },\n   { '$project': {\"aR\":1, \"yo.user_email\":1,   \"_id\":0} }\n])  \n\nfor doc in pipeline:\n   pprint (doc)\n</code></pre>\n\n<p>Result: </p>\n\n<pre><code>{ }\n{ }\n{ }\n</code></pre>\n\n<p>Expected Result: </p>\n\n<pre><code>Distinct rows\n</code></pre>\n\n<p>I am new to MongoDB. Please help</p>\n"}, {"tags": ["python", "pandas", "beautifulsoup", "tuples"], "comments": [{"owner": {"reputation": 2953, "user_id": 2790838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1b32a4c6109138b1260310a7662f3e4?s=128&d=identicon&r=PG&f=1", "display_name": "Markus", "link": "https://stackoverflow.com/users/2790838/markus"}, "edited": false, "score": 0, "creation_date": 1538598608, "post_id": 52635163, "comment_id": 92203668, "body": "One of your find calls returns None. You need to handle that."}, {"owner": {"reputation": 113, "user_id": 10257173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a57315832648779d88d7a91d26178bf?s=128&d=identicon&r=PG&f=1", "display_name": "RobK", "link": "https://stackoverflow.com/users/10257173/robk"}, "reply_to_user": {"reputation": 2953, "user_id": 2790838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1b32a4c6109138b1260310a7662f3e4?s=128&d=identicon&r=PG&f=1", "display_name": "Markus", "link": "https://stackoverflow.com/users/2790838/markus"}, "edited": false, "score": 0, "creation_date": 1538598739, "post_id": 52635163, "comment_id": 92203724, "body": "it says it&#39;s this line: biz_name = result.find(&#39;span&#39;, attrs={&#39;itemprop&#39;:&#39;name&#39;}) but it&#39;s printing this info to the csv (it&#39;s the example i gave).  So what could be the problem?"}, {"owner": {"reputation": 2953, "user_id": 2790838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1b32a4c6109138b1260310a7662f3e4?s=128&d=identicon&r=PG&f=1", "display_name": "Markus", "link": "https://stackoverflow.com/users/2790838/markus"}, "edited": false, "score": 0, "creation_date": 1538598966, "post_id": 52635163, "comment_id": 92203819, "body": "What does <code>print biz_name</code> show in this case?"}, {"owner": {"reputation": 113, "user_id": 10257173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a57315832648779d88d7a91d26178bf?s=128&d=identicon&r=PG&f=1", "display_name": "RobK", "link": "https://stackoverflow.com/users/10257173/robk"}, "reply_to_user": {"reputation": 2953, "user_id": 2790838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1b32a4c6109138b1260310a7662f3e4?s=128&d=identicon&r=PG&f=1", "display_name": "Markus", "link": "https://stackoverflow.com/users/2790838/markus"}, "edited": false, "score": 0, "creation_date": 1538599505, "post_id": 52635163, "comment_id": 92204057, "body": "lol, a big fat &quot;None&quot;.  this is confusing.  If it&#39;s returning &quot;None&quot; then why is it printing to the csv?  wouldn&#39;t it just error out right then and there?! is my line of thinking totally wrong here?"}, {"owner": {"reputation": 2953, "user_id": 2790838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1b32a4c6109138b1260310a7662f3e4?s=128&d=identicon&r=PG&f=1", "display_name": "Markus", "link": "https://stackoverflow.com/users/2790838/markus"}, "edited": false, "score": 0, "creation_date": 1538600004, "post_id": 52635163, "comment_id": 92204263, "body": "Your sure you&#39;re not seeing NaN in your CSV output?"}, {"owner": {"reputation": 113, "user_id": 10257173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a57315832648779d88d7a91d26178bf?s=128&d=identicon&r=PG&f=1", "display_name": "RobK", "link": "https://stackoverflow.com/users/10257173/robk"}, "reply_to_user": {"reputation": 2953, "user_id": 2790838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1b32a4c6109138b1260310a7662f3e4?s=128&d=identicon&r=PG&f=1", "display_name": "Markus", "link": "https://stackoverflow.com/users/2790838/markus"}, "edited": false, "score": 0, "creation_date": 1538600710, "post_id": 52635163, "comment_id": 92204554, "body": "Ok, so just checked my CSV output and it all looks good (no NaN). Is there a way i can share the file with you so you can see?"}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 10257173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a57315832648779d88d7a91d26178bf?s=128&d=identicon&r=PG&f=1", "display_name": "RobK", "link": "https://stackoverflow.com/users/10257173/robk"}, "edited": false, "score": 0, "creation_date": 1538628460, "post_id": 52639038, "comment_id": 92210889, "body": "doesn&#39;t matter to me, it works!  i&#39;d given up and set up a macro in excel to remove all the tags once i got the report.  Thanks for finding a solution. :)"}], "tags": [], "owner": {"reputation": 86, "user_id": 10449640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22f6ccde801ce9574f7c04eb3e8d363c?s=128&d=identicon&r=PG&f=1", "display_name": "PepeGonza", "link": "https://stackoverflow.com/users/10449640/pepegonza"}, "is_accepted": true, "score": 1, "last_activity_date": 1538627472, "creation_date": 1538627472, "answer_id": 52639038, "question_id": 52635163, "link": "https://stackoverflow.com/questions/52635163/attributeerror-nonetype-object-has-no-attribute-text-tuples/52639038#52639038", "title": "AttributeError: &#39;NoneType&#39; object has no attribute &#39;text&#39; - tuples", "body": "<p>Maybe not the fanciest answer, but is seems that in some cases, some of the values are 'None', therefore, you will get an error if you try to access its text. Try this, it worked for me.</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\nimport pandas as pd\nimport csv\n\nr = requests.get('https://www.yellowpages.com/search?search_terms=remodeling&amp;geo_location_terms=New+York%2C+NY')\nsoup = BeautifulSoup(r.text, 'html.parser')\nresults = soup.find_all('div', attrs={'class':'info'})\n\nrecords = []\n\nfor result in results:\n    biz_name = result.find('span', attrs={'itemprop':'name'}).text if result.find('span', attrs={'itemprop':'name'}) is not None else ''\n    biz_phone = result.find('div', attrs={'itemprop':'telephone'}).text if result.find('span', attrs={'itemprop':'telephone'}) is not None else ''\n    biz_address = result.find('span', attrs={'itemprop':'streetAddress'}).text if result.find('span', attrs={'itemprop':'streetAddress'}) is not None else ''\n    biz_city = result.find('span', attrs={'itemprop':'addressLocality'}).text if result.find('span', attrs={'itemprop':'addressLocality'}) is not None else ''\n    biz_zip = result.find('span', attrs={'itemprop':'postalCode'}).text if result.find('span', attrs={'itemprop':'postalCode'}) is not None else ''\n    records.append((biz_name, biz_phone, biz_address, biz_city, biz_zip))\n\n\ndf = pd.DataFrame(records, columns=['biz_name', 'biz_phone', 'biz_address', 'biz_city', 'biz_zip'])\n\ndf.to_csv('Yp_Remodel.csv', index=False, encoding='utf-8')\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 10257173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a57315832648779d88d7a91d26178bf?s=128&d=identicon&r=PG&f=1", "display_name": "RobK", "link": "https://stackoverflow.com/users/10257173/robk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 0, "accepted_answer_id": 52639038, "answer_count": 1, "score": 0, "last_activity_date": 1538627472, "creation_date": 1538598391, "question_id": 52635163, "link": "https://stackoverflow.com/questions/52635163/attributeerror-nonetype-object-has-no-attribute-text-tuples", "title": "AttributeError: &#39;NoneType&#39; object has no attribute &#39;text&#39; - tuples", "body": "<p>it throws me an AttributeError when i add .text to the end of the variables in the loop. i remove them and it prints out all the tags along with the info.  i'm not sure why it keeps throwing the AttributeError.  </p>\n\n<p>Any help is appreciated T.T</p>\n\n<p>i've tried:</p>\n\n<pre><code>biz_name = result.find('span', attrs={'itemprop':'name'}).text\n</code></pre>\n\n<p>and</p>\n\n<pre><code>biz_name = result.find('span', attrs={'itemprop':'name'}).text[1:-1]\n</code></pre>\n\n<p>Here is one cell of the results:</p>\n\n<pre><code>&lt;span itemprop=\"name\"&gt;Efrain Jimenez Jr. General Contractor Inc.&lt;/span&gt;\n</code></pre>\n\n<p>and the script:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\nimport pandas as pd\nimport csv\n\nr = requests.get('https://www.yellowpages.com/search?search_terms=remodeling&amp;geo_location_terms=New+York%2C+NY')\n\nsoup = BeautifulSoup(r.text, 'html.parser')\n\nresults = soup.find_all('div', attrs={'class':'info'})\n\nrecords = []\n\nfor result in results:\n    biz_name = result.find('span', attrs={'itemprop':'name'})\n    biz_phone = result.find('div', attrs={'itemprop':'telephone'})\n    biz_address = result.find('span', attrs={'itemprop':'streetAddress'})\n    biz_city = result.find('span', attrs={'itemprop':'addressLocality'})\n    biz_zip = result.find('span', attrs={'itemprop':'postalCode'})\n    records.append((biz_name, biz_phone, biz_address, biz_city, biz_zip))\n\ndf = pd.DataFrame(records, columns=['biz_name', 'biz_phone', 'biz_address', 'biz_city', 'biz_zip'])\n\ndf.to_csv('Yp_Remodel.csv', index=False, encoding='utf-8')\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "inheritance"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1538598879, "post_id": 52635152, "comment_id": 92203788, "body": "We need to see a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Your code has a lot of bugs, and I don&#39;t just mean the <code>&#47;&#47;do stuff</code>. Normally, you <i>would</i> end up calling <code>Grandchild.foo</code> (which would be its own source of bugs because <code>Grandchild.foo</code> probably assumes <code>self</code> is initialized)."}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1538598995, "post_id": 52635152, "comment_id": 92203835, "body": "read about <code>super()</code> when you are at it - see <a href=\"https://stackoverflow.com/questions/222877/what-does-super-do-in-python\">What does super do in python</a>"}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1538599161, "post_id": 52635152, "comment_id": 92203902, "body": "Read about <a href=\"https://www.tutorialspoint.com/python/python_classes_objects.htm\" rel=\"nofollow noreferrer\">Class Inheritance</a>"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1538669618, "post_id": 52635152, "comment_id": 92234238, "body": "FWIW, in Python comments start with a <code>#</code> not <code>&#47;&#47;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1538600309, "post_id": 52635298, "comment_id": 92204371, "body": "While this is true, omitting <code>self</code> in the superclass constructor calls would lead to a TypeError, not to calling <code>Parent.foo</code>."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1538621583, "post_id": 52635298, "comment_id": 92209375, "body": "@user2357112: Not sure what point you&#39;re trying to make. I never said that leaving it out would call <code>Parent.foo</code>. THe problem with the OP&#39;s code is it doesn&#39;t construct the subclasses properly\u2014the <code>__init__()</code> method is both of them doesn&#39;t call their superclass&#39; <code>__init__()</code> because it&#39;s coded wrong. The code in the OP&#39;s question is somewhat misleading in the sense that it&#39;s not run-able (as well as not not properly calling super class <code>__init__()</code> methods)."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1538621943, "post_id": 52635298, "comment_id": 92209459, "body": "The question says &quot;when Grandchild is initiated, the foo() call in Parent.__init__() uses the Parent.foo() instead of Grandchild.foo()&quot;, which doesn&#39;t really make sense and needs a better code sample. You&#39;ve addressed the lack of <code>self</code> in the constructor calls, but that seems to be an artifact of the questioner making up the code snippet. Your answer doesn&#39;t have anything in it related to which version of <code>foo</code> gets called, which seems to be the core of the question."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1538622049, "post_id": 52635298, "comment_id": 92209478, "body": "I think the content of your post is true, but not an answer to the question. The question doesn&#39;t seem to be answerable in its current state, and I believe it should be closed."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1538634965, "post_id": 52635298, "comment_id": 92213264, "body": "@user2357112: In my opinion it answers the question because it shows that the whole problem is with how the code was written\u2014and if the subclass <code>__init__()</code> methods are written properly, then instances will start behaving the way the OP desires/expects."}], "tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": true, "score": 1, "last_activity_date": 1538599393, "last_edit_date": 1538599393, "creation_date": 1538598984, "answer_id": 52635298, "question_id": 52635152, "link": "https://stackoverflow.com/questions/52635152/parent-method-being-overwritten-by-child/52635298#52635298", "title": "Parent method being overwritten by child", "body": "<p>You're not calling the base classes' <code>__init__()</code> methods properly\u2014you need to pass along the <code>self</code> argument to them:</p>\n\n<pre><code>class Parent:\n    def __init__(self):\n        self.foo()\n\n    def foo(self):\n        print('Parent stuff')\n\nclass Child(Parent):\n    def __init__(self):\n        Parent.__init__(self)\n\nclass Grandchild(Child):\n    def __init__(self):\n        Child.__init__(self)\n\n    def foo(self):\n        print('Grandchild stuff')\n\nif __name__ == '__main__':\n    gc = Grandchild()  # -&gt; Grandchild stuff\n</code></pre>\n\n<p>If you use <code>super()</code> instead of explicitly stating the base class, you don't have to do that:</p>\n\n<pre><code>class Parent:\n    def __init__(self):\n        self.foo()\n\n    def foo(self):\n        print('Parent stuff')\n\nclass Child(Parent):\n    def __init__(self):\n#        Parent.__init__(self)\n        super().__init__()\n\nclass Grandchild(Child):\n    def __init__(self):\n#        Child.__init__(self)\n        super().__init__()\n\n    def foo(self):\n        print('Grandchild stuff')\n\nif __name__ == '__main__':\n    gc = Grandchild()  # -&gt; Grandchild stuff\n</code></pre>\n\n<p>Another advantage is that you likely wouldn't have to change the code in a subclass' <code>__init__()</code> method if you changed its base class.</p>\n"}], "owner": {"reputation": 3, "user_id": 10453361, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hBM3W1y8kNE/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXebJjBVG4PLToMxrNnEAp9mkP_pA/mo/photo.jpg?sz=128", "display_name": "throwaway122215", "link": "https://stackoverflow.com/users/10453361/throwaway122215"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 52635298, "answer_count": 1, "score": -2, "last_activity_date": 1538599393, "creation_date": 1538598345, "last_edit_date": 1538598617, "question_id": 52635152, "link": "https://stackoverflow.com/questions/52635152/parent-method-being-overwritten-by-child", "title": "Parent method being overwritten by child", "body": "<p>Let's say we have:</p>\n\n<pre><code>class Parent():\n    def __init__(self):\n        foo()\n\n    def foo(self):\n        //do stuff\n\nclass Child(Parent):\n    def __init__(self):\n        Parent.__init__()\n\nclass Grandchild(Child):\n    def __init__(self):\n        Child.__init__()\n\n    def foo(self):\n        //different stuff\n</code></pre>\n\n<p>There are a lot of classes at the <code>Child</code> level that use the same <code>foo()</code>. <code>Grandchild</code> level has a slightly different version of <code>foo</code>, but when <code>Grandchild</code> is initiated, the <code>foo()</code> call in <code>Parent.__init__()</code> uses the <code>Parent.foo()</code> instead of <code>Grandchild.foo()</code>.</p>\n\n<p>Is there a correct practice when in comes to this kind of situation?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 1, "creation_date": 1538597813, "post_id": 52635026, "comment_id": 92203303, "body": "What is 47 doing then?"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1538598014, "post_id": 52635026, "comment_id": 92203388, "body": "Can you post some code for what you&#39;ve tried so far?"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "edited": false, "score": 0, "creation_date": 1538598078, "post_id": 52635026, "comment_id": 92203416, "body": "Hi @Vaishali, I think this question is more complicate than the marked one ..."}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1538599071, "post_id": 52635026, "comment_id": 92203863, "body": "So the reason 47 is selected is because it&#39;s in the same group as the valid result?"}, {"owner": {"reputation": 232, "user_id": 546446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/274162bbd832545a37da2f20c0fff66c?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/546446/brandon"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1538599411, "post_id": 52635026, "comment_id": 92204017, "body": "@user3483203 yes"}, {"owner": {"reputation": 232, "user_id": 546446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/274162bbd832545a37da2f20c0fff66c?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/546446/brandon"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1538599771, "post_id": 52635026, "comment_id": 92204163, "body": "@user3483203 because it has an extra element in position 0 (47)."}], "answers": [{"comments": [{"owner": {"reputation": 232, "user_id": 546446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/274162bbd832545a37da2f20c0fff66c?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/546446/brandon"}, "edited": false, "score": 0, "creation_date": 1538600090, "post_id": 52635421, "comment_id": 92204296, "body": "Thanks, I&#39;m going to try this out."}, {"owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "reply_to_user": {"reputation": 232, "user_id": 546446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/274162bbd832545a37da2f20c0fff66c?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/546446/brandon"}, "edited": false, "score": 0, "creation_date": 1538600249, "post_id": 52635421, "comment_id": 92204352, "body": "@Brandon, sure. This solution checks for exactly two values in atomic_number - one 22 and another 28 for position 0. If the cond is met, it returns the test_ids which are used to filter the dataframe."}, {"owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "reply_to_user": {"reputation": 232, "user_id": 546446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/274162bbd832545a37da2f20c0fff66c?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/546446/brandon"}, "edited": false, "score": 0, "creation_date": 1538601048, "post_id": 52635421, "comment_id": 92204698, "body": "@Brandon, great that its worked and thank you for accepting:)"}], "tags": [], "owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "is_accepted": true, "score": 1, "last_activity_date": 1538599981, "last_edit_date": 1538599981, "creation_date": 1538599500, "answer_id": 52635421, "question_id": 52635026, "link": "https://stackoverflow.com/questions/52635026/pandas-dataframe-filtering-multiple-columns-and-rows/52635421#52635421", "title": "pandas dataframe filtering multiple columns and rows", "body": "<p>You can create a boolean series to capture test_ids and then index the df using the same.</p>\n\n<pre><code>s = df[df['POSITION'] == 0].groupby('TEST_ID').apply(lambda x: ((x['ATOMIC_NUMBER'].count() == 2 ) &amp; (sorted(x['ATOMIC_NUMBER'].values.tolist()) == [22,28])).all())\n\ntest_id = s[s].index.tolist()\n\ndf[df['TEST_ID'].isin(test_id)]\n\n    TEST_ID ATOMIC_NUMBER   COMPOSITION_PERCENT POSITION\n0   1       28              49.84               0\n1   1       22              50.01               0\n2   1       47              0.06                1\n</code></pre>\n"}], "owner": {"reputation": 232, "user_id": 546446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/274162bbd832545a37da2f20c0fff66c?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/546446/brandon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1953, "favorite_count": 0, "accepted_answer_id": 52635421, "answer_count": 1, "score": 1, "last_activity_date": 1538599981, "creation_date": 1538597781, "last_edit_date": 1538599694, "question_id": 52635026, "link": "https://stackoverflow.com/questions/52635026/pandas-dataframe-filtering-multiple-columns-and-rows", "title": "pandas dataframe filtering multiple columns and rows", "body": "<p>Given a dataframe with the following format:</p>\n\n<pre><code>TEST_ID | ATOMIC_NUMBER | COMPOSITION_PERCENT | POSITION\n1       | 28            | 49.84               | 0\n1       | 22            | 50.01               | 0\n1       | 47            | 0.06                | 1\n2       | 22            | 49.84               | 0\n2       | 47            | 50.01               | 1\n3       | 28            | 49.84               | 0\n3       | 22            | 50.01               | 0\n3       | 47            | 0.06                | 0\n</code></pre>\n\n<p>I want to select only the tests that have ATOMIC_NUMBER of 22 AND 28 in POSITION 0, no more no less. So I'd like a filter that returns:</p>\n\n<pre><code>TEST_ID | ATOMIC_NUMBER | COMPOSITION_PERCENT | POSITION\n1       | 28            | 49.84               | 0\n1       | 22            | 50.01               | 0\n1       | 47            | 0.06                | 1\n</code></pre>\n\n<p>EDIT: I'm trying to convert this logic from SQL into python. Here's the SQL code:</p>\n\n<pre><code>select * from compositions \nwhere compositions.test_id in (\n\n  select a.test_id from (\n\n    select test_id from compositions\n    where test_id in (\n      select test_id from (\n        select * from COMPOSITIONS where position == 0 )\n      group by test_id\n      having count(test_id) = 2 )\n    and atomic_number = 22) a\n\n  join (\n\n    select test_id from compositions\n    where test_id in (\n      select test_id from (\n        select * from COMPOSITIONS where position == 0 )\n      group by test_id\n      having count(test_id) = 2 )\n    and atomic_number = 28) b\n\n  on a.test_id = b.test_id )\n</code></pre>\n"}, {"tags": ["python", "numpy", "dictionary"], "comments": [{"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1538598767, "post_id": 52634992, "comment_id": 92203734, "body": "What do you want to do if your network produces a pattern that is not in the list, like [1, 1, 1, 0, 1], say?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1538599264, "post_id": 52634992, "comment_id": 92203957, "body": "I suspect the mapping, in both directions, will be easier if the dictionary values were tuples rather than arrays.  Then you could construct a reverse dictionary.  Converting a (10,24,5) array to (10,120) and back is just a simple application of <code>np.reshape</code>."}, {"owner": {"reputation": 35, "user_id": 9415336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89411fd93fbf30750cf6974620508b94?s=128&d=identicon&r=PG&f=1", "display_name": "richard_", "link": "https://stackoverflow.com/users/9415336/richard"}, "edited": false, "score": 0, "creation_date": 1538599601, "post_id": 52634992, "comment_id": 92204105, "body": "You right and the flatten was unnecessary too, with reshape it works"}], "answers": [{"tags": [], "owner": {"reputation": 8239, "user_id": 4056181, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/G0SRK.jpg?s=128&g=1", "display_name": "jmd_dk", "link": "https://stackoverflow.com/users/4056181/jmd-dk"}, "is_accepted": false, "score": 3, "last_activity_date": 1538598477, "creation_date": 1538598477, "answer_id": 52635182, "question_id": 52634992, "link": "https://stackoverflow.com/questions/52634992/how-to-reverse-the-process-of-np-flatten-and-mapping/52635182#52635182", "title": "How to reverse the process of np.flatten() and mapping?", "body": "<p>While <code>flatten</code> collapses dimensions, <code>reshape</code> can do arbitrary dimensional transformations. It exist in both function and method form. Quick example:</p>\n\n<pre><code>import numpy as np\na = np.empty((10, 24, 5))\nb = a.reshape(10, 120)  # or b = np.reshape(a, (10, 120))\nprint(b.shape)  # shows (10, 120)\nc = b.reshape(10, 24, 5)  # or c = np.reshape(b, (10, 24, 5))\nprint(c.shape)  # shows (10, 24, 5)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 9415336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89411fd93fbf30750cf6974620508b94?s=128&d=identicon&r=PG&f=1", "display_name": "richard_", "link": "https://stackoverflow.com/users/9415336/richard"}, "edited": false, "score": 0, "creation_date": 1538599507, "post_id": 52635245, "comment_id": 92204058, "body": "Thanks. I&#39;ll check with more than one dimension"}], "tags": [], "owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "is_accepted": false, "score": 2, "last_activity_date": 1538598764, "creation_date": 1538598764, "answer_id": 52635245, "question_id": 52634992, "link": "https://stackoverflow.com/questions/52634992/how-to-reverse-the-process-of-np-flatten-and-mapping/52635245#52635245", "title": "How to reverse the process of np.flatten() and mapping?", "body": "<p>You can use a nested list comprehension:</p>\n\n<pre><code>import numpy as np\n\nlabels = [ 1,  1,  0,  0,  0,  0,  0,  0,  0,  0,  1,  1,  0,  0,  0,  0,  0,\n    0,  0,  0,  0,  0,  0,  0,  0,  1,  1,  1,  0,  0,  0,  0,  0,  0,\n    0,  0,  0,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,\n    0,  0,  0,  0, -1, -1,  0,  0,  0,  1,  1,  1,  1,  0, -1, -1,  0,\n    0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, -1, -1, -1,  0,  0,\n   -1, -1, -1,  0,  0, -1, -1, -1, -1, -1,  1,  0,  0,  0,  0,  0,  0,\n    0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1,  1,  0,  0,\n    0]\n\nchecker_presence = {\n5: np.array([1,1,1,1,1], dtype=int),\n4: np.array([1,1,1,1,0], dtype=int),\n3: np.array([1,1,1,0,0], dtype=int),\n2: np.array([1,1,0,0,0], dtype=int),\n1: np.array([1,0,0,0,0], dtype=int),\n0: np.array([0,0,0,0,0], dtype=int),\n-1: np.array([-1,0,0,0,0], dtype=int),\n-2: np.array([-1,-1,0,0,0], dtype=int),\n-3: np.array([-1,-1,-1,0,0], dtype=int),\n-4: np.array([-1,-1,-1,-1,0], dtype=int),\n-5: np.array([-1,-1,-1,-1,-1], dtype=int)}\n\nchunked = [labels[i:i + 5] for i in range(0, len(labels), 5)]\n\ntarget = [key for chunk in chunked for key, value in checker_presence.items() if list(value)==chunk]\n</code></pre>\n\n<p>Yields:</p>\n\n<pre><code>[2, 0, 2, 0, 0, 3, 0, 0, 1, 0, 0, -2, 4, -2, 0, 0, -3, -3, -5, 1, 0, 0, 0, 2]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 9415336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89411fd93fbf30750cf6974620508b94?s=128&d=identicon&r=PG&f=1", "display_name": "richard_", "link": "https://stackoverflow.com/users/9415336/richard"}, "edited": false, "score": 1, "creation_date": 1538600757, "post_id": 52635550, "comment_id": 92204581, "body": "Wow. Thanks. This is a masterpiece."}], "tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": true, "score": 1, "last_activity_date": 1538600785, "last_edit_date": 1538600785, "creation_date": 1538600043, "answer_id": 52635550, "question_id": 52634992, "link": "https://stackoverflow.com/questions/52634992/how-to-reverse-the-process-of-np-flatten-and-mapping/52635550#52635550", "title": "How to reverse the process of np.flatten() and mapping?", "body": "<p>Here is a solution using advanced indexing for lookup which should be quite a bit faster than any dictionary based approach. I've also added a faster version of the forward map using this method. Btw. if you know that your network only produces legal patterns, then you can just reshape and then sum over the last axis to restore the original representation.</p>\n\n<pre><code>import numpy as np\n\nchecker_presence = {\n5: np.array([1,1,1,1,1], dtype=int),\n4: np.array([1,1,1,1,0], dtype=int),\n3: np.array([1,1,1,0,0], dtype=int),\n2: np.array([1,1,0,0,0], dtype=int),\n1: np.array([1,0,0,0,0], dtype=int),\n0: np.array([0,0,0,0,0], dtype=int),\n-1: np.array([-1,0,0,0,0], dtype=int),\n-2: np.array([-1,-1,0,0,0], dtype=int),\n-3: np.array([-1,-1,-1,0,0], dtype=int),\n-4: np.array([-1,-1,-1,-1,0], dtype=int),\n-5: np.array([-1,-1,-1,-1,-1], dtype=int)}\n\nforward_lookup = np.empty((11, 5), int)\nfor k, v in checker_presence.items():\n    forward_lookup[k] = v\n\nreverse_lookup = np.full((3, 3, 3, 3, 3), 999999)\nfor k, v in checker_presence.items():\n    reverse_lookup[(*v,)] = k\n\ndef forward(data, flatten=True):\n    mapped = forward_lookup[data]\n    return mapped.ravel() if flatten else mapped\n\ndef reverse(mapped, shape=(-1,), assume_all_legal=False):\n    if assume_all_legal:\n        return mapped.reshape(*shape, 5).sum(-1)\n    return reverse_lookup[(*np.moveaxis(mapped.reshape(*shape, 5), -1, 0),)]\n\n# small example\n\nA = np.random.randint(-5, 6, (1, 5))\nB = forward(A)\nC = reverse(B, A.shape)\nD = reverse(B, A.shape, True)\n\nprint(A)\nprint(B)\nprint(C)\nprint(D)\n\n# large example\n\nA = np.random.randint(-5, 6, (200, 1000))\nB = forward(A)\nC = reverse(B, A.shape)\nD = reverse(B, A.shape, True)\n\nassert np.all(A==C) and np.all(A==D)\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 9415336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89411fd93fbf30750cf6974620508b94?s=128&d=identicon&r=PG&f=1", "display_name": "richard_", "link": "https://stackoverflow.com/users/9415336/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 642, "favorite_count": 0, "accepted_answer_id": 52635550, "answer_count": 3, "score": 0, "last_activity_date": 1538600785, "creation_date": 1538597649, "question_id": 52634992, "link": "https://stackoverflow.com/questions/52634992/how-to-reverse-the-process-of-np-flatten-and-mapping", "title": "How to reverse the process of np.flatten() and mapping?", "body": "<p>I have a target value numpy array with this format, lets say 10 dimensions (24,10)</p>\n\n<pre><code>Target = [[ 2,  0,  2,  0,  0,  3,  0,  0,  1,  0,  0, -2,  4, -2,  0,  0,\n    -3, -3, -5,  1,  0,  0,  0,  2],...]\n</code></pre>\n\n<p>So I applied this map</p>\n\n<pre><code>checker_presence = {\n5: np.array([1,1,1,1,1], dtype=int),\n4: np.array([1,1,1,1,0], dtype=int),\n3: np.array([1,1,1,0,0], dtype=int),\n2: np.array([1,1,0,0,0], dtype=int),\n1: np.array([1,0,0,0,0], dtype=int),\n0: np.array([0,0,0,0,0], dtype=int),\n-1: np.array([-1,0,0,0,0], dtype=int),\n-2: np.array([-1,-1,0,0,0], dtype=int),\n-3: np.array([-1,-1,-1,0,0], dtype=int),\n-4: np.array([-1,-1,-1,-1,0], dtype=int),\n-5: np.array([-1,-1,-1,-1,-1], dtype=int)}\n\nlabels_ = np.array([list(map(checker_presence.__getitem__, row)) for row in target])\n</code></pre>\n\n<p>And the target value is now (10,24,5):</p>\n\n<pre><code>  [[ 1,  1,  0,  0,  0],\n   [ 0,  0,  0,  0,  0],\n   [ 1,  1,  0,  0,  0],\n   [ 0,  0,  0,  0,  0],\n   [ 0,  0,  0,  0,  0],\n   [ 1,  1,  1,  0,  0],\n   [ 0,  0,  0,  0,  0],\n   [ 0,  0,  0,  0,  0],\n   [ 1,  0,  0,  0,  0],\n   [ 0,  0,  0,  0,  0],\n   [ 0,  0,  0,  0,  0],\n   [-1, -1,  0,  0,  0],\n   [ 1,  1,  1,  1,  0],\n   [-1, -1,  0,  0,  0],\n   [ 0,  0,  0,  0,  0],\n   [ 0,  0,  0,  0,  0],\n   [-1, -1, -1,  0,  0],\n   [-1, -1, -1,  0,  0],\n   [-1, -1, -1, -1, -1],\n   [ 1,  0,  0,  0,  0],\n   [ 0,  0,  0,  0,  0],\n   [ 0,  0,  0,  0,  0],\n   [ 0,  0,  0,  0,  0],\n   [ 1,  1,  0,  0,  0]],...]\n</code></pre>\n\n<p>After this I applied a flatten function to be only one single array (10,120):</p>\n\n<pre><code>labels = np.array([i.flatten() for i in labels_])\n[ 1,  1,  0,  0,  0,  0,  0,  0,  0,  0,  1,  1,  0,  0,  0,  0,  0,\n    0,  0,  0,  0,  0,  0,  0,  0,  1,  1,  1,  0,  0,  0,  0,  0,  0,\n    0,  0,  0,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,\n    0,  0,  0,  0, -1, -1,  0,  0,  0,  1,  1,  1,  1,  0, -1, -1,  0,\n    0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, -1, -1, -1,  0,  0,\n   -1, -1, -1,  0,  0, -1, -1, -1, -1, -1,  1,  0,  0,  0,  0,  0,  0,\n    0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1,  1,  0,  0,\n    0],...]\n</code></pre>\n\n<p>My question is how I can reverse this process to my target value be the original </p>\n\n<pre><code>[ 2,  0,  2,  0,  0,  3,  0,  0,  1,  0,  0, -2,  4, -2,  0,  0,\n-3, -3, -5,  1,  0,  0,  0,  2]\n</code></pre>\n\n<p>In this example I only use one row to better understanding. The problem is that I needed do this transformations for my neural network, but to analyze the predict, I need reverse the process.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 2, "creation_date": 1538598476, "post_id": 52634970, "comment_id": 92203598, "body": "<code>if &#39;n&#39; in {a,b}:</code> - might be shorter characterwise, but not really clearer. why do you need it shorter?"}, {"owner": {"reputation": 33, "user_id": 2849069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3af28475e4d55822896a8ea5aea4d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "655e69cf802b31", "link": "https://stackoverflow.com/users/2849069/655e69cf802b31"}, "reply_to_user": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1538598715, "post_id": 52634970, "comment_id": 92203709, "body": "I am trying to do this:  if color1 in (&#39;blue&#39;, &#39;red&#39;) or color2 in (&#39;blue&#39;, &#39;red&#39;):"}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1538599261, "post_id": 52634970, "comment_id": 92203956, "body": "you are testing if <code>color1</code> is either <code>&quot;blue&quot;</code> or <code>&quot;red&quot;</code> twice that way ..."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1538606002, "post_id": 52634970, "comment_id": 92206244, "body": "Why does this have to be shorter?"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 2849069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3af28475e4d55822896a8ea5aea4d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "655e69cf802b31", "link": "https://stackoverflow.com/users/2849069/655e69cf802b31"}, "edited": false, "score": 0, "creation_date": 1538599917, "post_id": 52635417, "comment_id": 92204235, "body": "what if want color1 and color2 in (&#39;blue&#39;, &#39;red&#39;)"}, {"owner": {"reputation": 2644, "user_id": 747744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58e40f54006383a41c5c00347a7a0cc7?s=128&d=identicon&r=PG", "display_name": "Eugene Primako", "link": "https://stackoverflow.com/users/747744/eugene-primako"}, "reply_to_user": {"reputation": 33, "user_id": 2849069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3af28475e4d55822896a8ea5aea4d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "655e69cf802b31", "link": "https://stackoverflow.com/users/2849069/655e69cf802b31"}, "edited": false, "score": 1, "creation_date": 1538600330, "post_id": 52635417, "comment_id": 92204378, "body": "If you want both of them to be in the list, you just need to replace <code>any</code> with <code>all</code>."}], "tags": [], "owner": {"reputation": 2644, "user_id": 747744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58e40f54006383a41c5c00347a7a0cc7?s=128&d=identicon&r=PG", "display_name": "Eugene Primako", "link": "https://stackoverflow.com/users/747744/eugene-primako"}, "is_accepted": true, "score": 0, "last_activity_date": 1538599477, "creation_date": 1538599477, "answer_id": 52635417, "question_id": 52634970, "link": "https://stackoverflow.com/questions/52634970/is-there-a-shorter-way-to-ask-if-2-variables-are-a-value/52635417#52635417", "title": "Is there a shorter way to ask if 2 variables are a value?", "body": "<p>You can write</p>\n\n<pre><code>if any(color in ('blue', 'red') for color in (color1, color2)):\n</code></pre>\n\n<p>If will benefit if you have 3 variables or more. If there are only 2 of them, your variant looks fine.</p>\n"}, {"comments": [{"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1538605918, "post_id": 52636542, "comment_id": 92206225, "body": "You can shortcut this via <code>if {color1, color2} &amp; {&#39;blue&#39;, &#39;red&#39;}</code>."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 1, "creation_date": 1538606064, "post_id": 52636542, "comment_id": 92206261, "body": "@a_guest, They aren&#39;t the same. <code>set.isdisjoint</code> short-circuits and has lower time complexity. <code>set.intersection</code> actually calculates the entire intersection, not just the existence of non-empty intersection."}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 1, "last_activity_date": 1538605951, "last_edit_date": 1538605951, "creation_date": 1538605709, "answer_id": 52636542, "question_id": 52634970, "link": "https://stackoverflow.com/questions/52634970/is-there-a-shorter-way-to-ask-if-2-variables-are-a-value/52636542#52636542", "title": "Is there a shorter way to ask if 2 variables are a value?", "body": "<p>You can use <code>set</code>, specifically <a href=\"https://docs.python.org/3/library/stdtypes.html#frozenset.isdisjoint\" rel=\"nofollow noreferrer\"><code>set.isdisjoint</code></a>:</p>\n\n<pre><code>if not {color1, color2}.isdisjoint({'blue', 'red'}):\n    print(color1)\n</code></pre>\n\n<p>If two sets are not \"disjoint\", then they have a common element. This can only be the case if at least one of <code>color1</code> or <code>color2</code> belong to <code>{'blue', 'red'}</code>.</p>\n\n<hr>\n\n<p>If you want to check they <em>both</em> belong to <code>{'blue', 'red'}</code>, use <a href=\"https://docs.python.org/3/library/stdtypes.html#frozenset.issubset\" rel=\"nofollow noreferrer\"><code>set.issubset</code></a> or its syntactic sugar <code>&lt;=</code>:</p>\n\n<pre><code>if {color1, color2} &lt;= {'blue', 'red'}:\n    print(color1)\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 2849069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3af28475e4d55822896a8ea5aea4d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "655e69cf802b31", "link": "https://stackoverflow.com/users/2849069/655e69cf802b31"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 52635417, "answer_count": 2, "score": 1, "last_activity_date": 1538605951, "creation_date": 1538597523, "last_edit_date": 1538599546, "question_id": 52634970, "link": "https://stackoverflow.com/questions/52634970/is-there-a-shorter-way-to-ask-if-2-variables-are-a-value", "title": "Is there a shorter way to ask if 2 variables are a value?", "body": "<p>Is there a shorter way in python 3 to write:</p>\n\n<pre><code>if a in ('n', 'm') or b in ('n', 'm'):\n    print(a)\n</code></pre>\n\n<p>I have been searching but did't find a shorter way.\nI am try to type this line shorter:</p>\n\n<pre><code>if color1 in ('blue', 'red') or color2 in ('blue', 'red'):\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1561, "user_id": 4746328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E5r4V.png?s=128&g=1", "display_name": "Brian Peacock", "link": "https://stackoverflow.com/users/4746328/brian-peacock"}, "edited": false, "score": 0, "creation_date": 1538598628, "post_id": 52634949, "comment_id": 92203673, "body": "What have you tried so far?  You can improve your question by hitting the &#39;edit&#39; link at the bottom of the post. You may also find this useful: <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a>.... The excellent <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex101.com</a> has Python flavours and is a great way to troubleshoot problematic regex."}], "answers": [{"tags": [], "owner": {"reputation": 315, "user_id": 3713719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24aeec9ea28e801fc98b11d5652d99b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3713719", "link": "https://stackoverflow.com/users/3713719/user3713719"}, "is_accepted": false, "score": 0, "last_activity_date": 1538608707, "last_edit_date": 1538608707, "creation_date": 1538607630, "answer_id": 52636789, "question_id": 52634949, "link": "https://stackoverflow.com/questions/52634949/use-regular-expressions-to-extract-and-display-interface-and-method-status-for-a/52636789#52636789", "title": "Use regular expressions to extract and display Interface and method status for all the interfaces using Python", "body": "<p>you may do it as below: I would prefer split instead of regex due to uneven column length.</p>\n\n<pre><code>output = \"\"\"\nInterface       IP-Address  OK?     Method Status   Protocol\n\nFastEthernet0/0 192.168.1.242   YES     manual up   up\nFastEthernet1/0        unassigned   YES     unset       down\nSerial2/0               192.168.1.250   YES     manual up   up\nSerial3/0               192.168.1.233   YES     manual up   up\nFastEthernet4/0        unassigned   YES     unset       down\nFastEthernet5/0        unassigned   YES        unset        down\n\"\"\"\nimport re\nparsed_data = dict()\n\nfor line in output.split('\\n'):\n    line = line.strip()\n\n    if line == '' or not (line.startswith('Fast') or line.startswith('Serial')):\n        continue\n\n    # replace multiple space with one\n    line = re.sub('\\s+', ' ', line)\n    data = line.split(' ')\n    if len(data) == 5:\n        parsed_data[data[0]] = (data[0], data[3], None)\n    else:\n        parsed_data[data[0]] = (data[0], data[3], data[4])\n\nfor key in parsed_data.keys():\n    print parsed_data[key][0], parsed_data[key][1], parsed_data[key][2]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>FastEthernet1/0 unset None\nSerial3/0 manual up\nFastEthernet5/0 unset None\nFastEthernet0/0 manual up\nSerial2/0 manual up\nFastEthernet4/0 unset None\n</code></pre>\n\n<p>with regex:</p>\n\n<pre><code>import re\nparsed_data = dict()\n\nfor line in output.split('\\n'):\n    reobj = re.search('((Fast|Serial)\\S+)\\s+\\S+\\s+\\S+\\s+(\\S+)\\s+(\\S+)', line)\n    if reobj:\n        intf = reobj.group(1)\n        if reobj.group(3) == 'unset':\n            parsed_data[intf] = (intf, reobj.group(3), None)\n        else:\n            parsed_data[intf] = (intf, reobj.group(3), reobj.group(4))\n\nfor key in parsed_data.keys():\n    print parsed_data[key][0], parsed_data[key][1], parsed_data[key][2]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9356620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b7d3795b0835af18ea685344fb96e6d?s=128&d=identicon&r=PG&f=1", "display_name": "Auro..", "link": "https://stackoverflow.com/users/9356620/auro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 707, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1538608707, "creation_date": 1538597438, "last_edit_date": 1538598029, "question_id": 52634949, "link": "https://stackoverflow.com/questions/52634949/use-regular-expressions-to-extract-and-display-interface-and-method-status-for-a", "title": "Use regular expressions to extract and display Interface and method status for all the interfaces using Python", "body": "<p>I want to extract the Interface , Status and Protocol column from the below show output using Python Regular Expression ..Please help </p>\n\n<p>Below is the output of <code># show ip interface brief command</code> on a router</p>\n\n<pre><code>Interface       IP-Address  OK?     Method Status   Protocol\n\nFastEthernet0/0 192.168.1.242   YES     manual up   up \nFastEthernet1/0        unassigned   YES     unset       down \nSerial2/0               192.168.1.250   YES     manual up   up \nSerial3/0               192.168.1.233   YES     manual up   up \nFastEthernet4/0        unassigned   YES     unset       down    \nFastEthernet5/0        unassigned   YES        unset        down\n</code></pre>\n\n<p>I want to use regular expressions to extract and display Interface and method status for all the interfaces.</p>\n\n<pre><code>FastEthernet0/0, manual up\n</code></pre>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1538598159, "post_id": 52634921, "comment_id": 92203455, "body": "Can you be more specific? Your question mentions two frames, your code has three frames, and the picture has an unknown number of frames. Maybe you can mention frames by name, or give the frames distinctive colors, or make sure the code and the picture have the same names for all of the frames."}, {"owner": {"reputation": 91, "user_id": 4966750, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0df82a2c37de5f71626eebb3c3ee2d6a?s=128&d=identicon&r=PG&f=1", "display_name": "James Gerstenberg", "link": "https://stackoverflow.com/users/4966750/james-gerstenberg"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1538603531, "post_id": 52634921, "comment_id": 92205548, "body": "@BryanOakley I do have three frames one as a root, the characterFrame = Character Window, planetFrame = Planet Window. I have the scroll implemented but not as a frame and the Menu bar wouldn&#39;t be a frame either."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1538604303, "post_id": 52634921, "comment_id": 92205794, "body": "Your question still isn&#39;t clear. You say <i>&quot; three frames laid out next to each other&quot;</i>, but then say you have a container with two frames. How can the two inner frames be &quot;next&quot; to the container?"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1538604356, "post_id": 52634921, "comment_id": 92205811, "body": "In your picture, &quot;planet window&quot; is just a small rectangle. Is it supposed to be small, or is it supposed to fill the right side?"}, {"owner": {"reputation": 91, "user_id": 4966750, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0df82a2c37de5f71626eebb3c3ee2d6a?s=128&d=identicon&r=PG&f=1", "display_name": "James Gerstenberg", "link": "https://stackoverflow.com/users/4966750/james-gerstenberg"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1538611780, "post_id": 52634921, "comment_id": 92207497, "body": "@BryanOakley , Maybe Im explaining  wrong or just my lack of knowledge or both. But I was under the impression I needed to use a Frame (containerFrame) and then Place Other frames inside it to get Scroll function as well as better placement for widgets. So i created  characterFrame &amp; planetFrame inside the containerFrame. I have made a new mock up here <a href=\"https://i.imgur.com/FX6HodM.png\" rel=\"nofollow noreferrer\">i.imgur.com/FX6HodM.png</a> . The idea was to have characterFrame show  a list of names on the left then a bit of a empty space and then planetFrame take up the right side. As well if maximized kept the same format."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 4966750, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0df82a2c37de5f71626eebb3c3ee2d6a?s=128&d=identicon&r=PG&f=1", "display_name": "James Gerstenberg", "link": "https://stackoverflow.com/users/4966750/james-gerstenberg"}, "edited": false, "score": 0, "creation_date": 1539638446, "post_id": 52637810, "comment_id": 92566880, "body": "Ty exactly what i was looking for."}], "tags": [], "owner": {"reputation": 5878, "user_id": 8172933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c23be88780bfccade78eb5ffb64ba9?s=128&d=identicon&r=PG", "display_name": "figbeam", "link": "https://stackoverflow.com/users/8172933/figbeam"}, "is_accepted": true, "score": 1, "last_activity_date": 1538617289, "creation_date": 1538617289, "answer_id": 52637810, "question_id": 52634921, "link": "https://stackoverflow.com/questions/52634921/frame-not-expanding/52637810#52637810", "title": "Frame not expanding", "body": "<p>Normally you would use a frame to organize a widget with a scrollbar, but a frame is not scrollable. If you want to scroll an area containing other widgets the usual thing to do is to use a canvas. </p>\n\n<p>Study this guide: <a href=\"http://effbot.org/zone/tkinter-scrollbar-patterns.htm\" rel=\"nofollow noreferrer\">Tkinter Scrollbar Patterns</a></p>\n\n<p>Pack can be difficult to use and the only way I have found to overcome this is to keep trying. It's usually easier to see what you are doing if you let the different frames have different bg colors. Also I've taken the liberty to change some of your variable names as they do not give a hint as to what they are or are too similar to other names, eg. <code>mainWindow</code> and <code>MainWindow</code>. </p>\n\n<p>I have added some padding to some widgets to make it look better. </p>\n\n<pre><code>from tkinter import *\n\nroot = Tk()\n\ndef create_main_window():\n    root.option_add('*tearOff', False)\n    root.title(\"Interface\")\n    root.geometry('400x300+800+50')\n\n    menubar = Menu(root)\n    root.config(menu = menubar)\n    File = Menu(menubar)\n    About = Menu(menubar)\n    menubar.add_cascade(menu = File, label = \"File\")\n    menubar.add_cascade(menu = About, label = \"About\")\n\ndef create_container_frame():\n    container = Frame(root, bg='tan')\n    container.pack(fill=\"both\", expand=True)\n\n    scroller = Scrollbar(container, orient=\"vertical\")\n    scroller.pack(side=\"right\", fill=\"y\")\n\n    characterFrame = Frame(container, bd=2, relief=\"sunken\", bg='thistle')\n    characterFrame.pack(side=\"left\", fill='y', padx=(10,0), pady=10)\n\n    character_button = Button(characterFrame, text =\"Characters\")\n    character_button.pack(padx=10, pady=(10,0))\n    Label(characterFrame, text =\"Test1\").pack()\n    Label(characterFrame, text =\"Test2\").pack()\n\n    planetFrame = Frame(container ,bd=2, relief=\"sunken\", bg='khaki')\n    planetFrame.pack(side=\"left\", fill='both', expand=True, padx=10, pady=10)\n\n    Label(planetFrame, text=\"Test1\").pack(pady=(10,0))\n    Label(planetFrame, text=\"Test2\").pack()\n\ncreate_main_window()\ncreate_container_frame()\n\nroot.mainloop()\n</code></pre>\n\n<p>Is this the layout you are aiming for?</p>\n"}], "owner": {"reputation": 91, "user_id": 4966750, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0df82a2c37de5f71626eebb3c3ee2d6a?s=128&d=identicon&r=PG&f=1", "display_name": "James Gerstenberg", "link": "https://stackoverflow.com/users/4966750/james-gerstenberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 52637810, "answer_count": 1, "score": 0, "last_activity_date": 1538617289, "creation_date": 1538597286, "last_edit_date": 1538603619, "question_id": 52634921, "link": "https://stackoverflow.com/questions/52634921/frame-not-expanding", "title": "Frame not expanding", "body": "<p>Maybe this is just how Tkinter works but Im unsure. Currently I have the Main window with three frames laid out next to each other. Frame ContainerFrame is a master, then characterFrame and planetFrame are placed inside the ContainerFrame. The issue is or what I would like to happen is that the frames would fill up a set area of the window regardless of whether or not their is data/ widgets in them.\nHere is what I envision it to look like <a href=\"https://imgur.com/OjdKFh4\" rel=\"nofollow noreferrer\">https://imgur.com/OjdKFh4</a></p>\n\n<pre><code>from tkinter import *\nfrom tkinter import ttk\n\nMainWindow = Tk()\ndef mainWindow():\n  MainWindow.option_add('*tearOff', False)\n  MainWindow.title(\"Interface\")\n  MainWindow.geometry('800x600')\n  menubar = Menu(MainWindow)\n  MainWindow.config(menu = menubar)\n  File = Menu(menubar)\n  About = Menu(menubar)\n  menubar.add_cascade(menu = File, label = \"File\")\n  menubar.add_cascade(menu = About, label = \"About\")\n\ndef frameContainer():\n  containerFrame = Frame(MainWindow)\n  containerFrame.pack(anchor = \"nw\", side = \"left\", fill = \"both\", expand = False)\n  scroller = Scrollbar(orient = \"vertical\")\n\n  characterFrame = Frame(containerFrame, borderwidth=\"2\", relief=\"sunken\")\n  characterFrame.pack(anchor = \"nw\", side = \"left\", expand = True)\n\n  planetFrame =  Frame(containerFrame ,borderwidth=\"2\", relief=\"sunken\")\n  planetFrame.pack(anchor = \"nw\", side = \"right\", expand = True)\n\n  scroller = Scrollbar(orient = \"vertical\")\n  scroller.pack(anchor = \"e\", side = \"right\", fill = \"y\", expand = False)\n\n  characterLable = Button(characterFrame, text =\"Characters\")\n  characterLable.pack()\n  Label(characterFrame, text =\"Test1\").pack()\n  Label(characterFrame, text =\"Test2\").pack()\n\n  Label(planetFrame, text =\"Test1\").pack()\n  Label(planetFrame, text =\"Test2\").pack()\n\n\nmainWindow()\nframeContainer()\nMainWindow.mainloop()\n</code></pre>\n"}, {"tags": ["python", "amazon-ec2", "gstreamer", "gobject-introspection"], "comments": [{"owner": {"reputation": 4392, "user_id": 5215131, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2C8rv6T-3m8/AAAAAAAAAAI/AAAAAAAAAP0/ALwPPtWwxac/photo.jpg?sz=128", "display_name": "Florian Zwoch", "link": "https://stackoverflow.com/users/5215131/florian-zwoch"}, "edited": false, "score": 0, "creation_date": 1538819673, "post_id": 52634893, "comment_id": 92284518, "body": "GstRtspServer as an additional extra package that needs to be installed."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 10692365, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCsDyu0Y3MtJvIC0wD3HuY_XBnYlNkrN1fCFy-nGg=k-s128", "display_name": "Lidor shimoni", "link": "https://stackoverflow.com/users/10692365/lidor-shimoni"}, "edited": false, "score": 0, "creation_date": 1604241248, "post_id": 52819781, "comment_id": 114280728, "body": "This also solves the problem on LFT - ubuntu 18 on jetsons."}], "tags": [], "owner": {"reputation": 877, "user_id": 2725226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea22096f84dcf24b2cd7af29aa634a1?s=128&d=identicon&r=PG&f=1", "display_name": "micha137", "link": "https://stackoverflow.com/users/2725226/micha137"}, "is_accepted": false, "score": 4, "last_activity_date": 1539616299, "creation_date": 1539616299, "answer_id": 52819781, "question_id": 52634893, "link": "https://stackoverflow.com/questions/52634893/importerror-cannot-import-name-gstrtspserver-introspection-typelib-not-found/52819781#52819781", "title": "ImportError: cannot import name GstRtspServer, introspection typelib not found", "body": "<p>Specifically, on Ubuntu 16.04 one would have to install the package <strong>gir1.2-gst-rtsp-server-1.0</strong>, which contains the introspection typelib.</p>\n"}], "owner": {"reputation": 63, "user_id": 7491922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f45b3f09baecd4662af9c088661cc023?s=128&d=identicon&r=PG&f=1", "display_name": "CaptainScags", "link": "https://stackoverflow.com/users/7491922/captainscags"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3201, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1539616299, "creation_date": 1538597167, "last_edit_date": 1538597904, "question_id": 52634893, "link": "https://stackoverflow.com/questions/52634893/importerror-cannot-import-name-gstrtspserver-introspection-typelib-not-found", "title": "ImportError: cannot import name GstRtspServer, introspection typelib not found", "body": "<p>Im trying to get a simple GstRtspServer program working on an external amazon linux EC2 server at the moment, but I am having serious issues getting it to actually run. No matter what I do I keep getting this same error when I try to run it, even if the program is reduced only to</p>\n\n<pre><code>import gi\ngi.require_version('Gst','1.0')\nfrom gi.repository import GLib, Gst, GstRtspServer\n</code></pre>\n\n<p>I have pygobject installed, I have gstreamer installed, I have gobject-introspection installed, and any google results have been wildly non helpful. Does anyone know what I might be missing?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1472, "user_id": 7087143, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FFEhW1u4eWk/AAAAAAAAAAI/AAAAAAAAAKU/GXpyPSDtC2s/photo.jpg?sz=128", "display_name": "Karl", "link": "https://stackoverflow.com/users/7087143/karl"}, "edited": false, "score": 0, "creation_date": 1538597259, "post_id": 52634824, "comment_id": 92203057, "body": "Are you trying to write the lines you deleted to the new file? Or the cleaned out good lines? Also your for loops seem different then your explanation of your goal. When you are looping through <code>bad_code in bad_codes</code>, you are looking through each individual character in <code>bad_codes</code> which doesn&#39;t seem like the intended effect either."}, {"owner": {"reputation": 1472, "user_id": 7087143, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FFEhW1u4eWk/AAAAAAAAAAI/AAAAAAAAAKU/GXpyPSDtC2s/photo.jpg?sz=128", "display_name": "Karl", "link": "https://stackoverflow.com/users/7087143/karl"}, "edited": false, "score": 0, "creation_date": 1538597341, "post_id": 52634824, "comment_id": 92203093, "body": "I would suggest trying to work through a smaller problem first and just print out the lines you find or use debugging with breakpoints to help you, as there are multiple parts of your code that seem to have errors in them."}, {"owner": {"reputation": 1, "user_id": 9403600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/891f4182ed64f74d8897b8c1c913d2cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bcode", "link": "https://stackoverflow.com/users/9403600/bcode"}, "reply_to_user": {"reputation": 1472, "user_id": 7087143, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FFEhW1u4eWk/AAAAAAAAAAI/AAAAAAAAAKU/GXpyPSDtC2s/photo.jpg?sz=128", "display_name": "Karl", "link": "https://stackoverflow.com/users/7087143/karl"}, "edited": false, "score": 0, "creation_date": 1538597734, "post_id": 52634824, "comment_id": 92203275, "body": "I am trying to write the good lines to file."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1538599817, "post_id": 52634824, "comment_id": 92204190, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation, as suggested when you created this account.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described.  Over half of your posted code is overhead unrelated to the problem, such that it fails to exhibit the problem you claim."}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1538600352, "post_id": 52634824, "comment_id": 92204386, "body": "Your code gives <code>NameError: name &#39;fw&#39; is not defined</code>. Remove <b>all</b> above <code>bad_codes = </code>. Try with <b>one</b> file and give example data."}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1538600252, "creation_date": 1538600252, "answer_id": 52635586, "question_id": 52634824, "link": "https://stackoverflow.com/questions/52634824/trouble-with-stripping-out-everything-from-file-before-a-found-string/52635586#52635586", "title": "Trouble with stripping out everything from file before a found string", "body": "<p>You can do this very simply with a Boolean flag -- let's call it <code>found_str</code>.</p>\n\n<pre><code>found_str = False\nfor line in orig_file:\n    if search_str in line:\n        found_str = True\n        continue\n\n    if found_str:\n        new_file.write(line)\n</code></pre>\n\n<p>If you prefer, make two loops: one to find the string, one to write the rest of the file:</p>\n\n<pre><code>for line in orig_file:\n    if search_str in line:\n        break\n\nfor line in orig_file:\n    new_file.write(line)\n</code></pre>\n\n<p>Will either of these help you?</p>\n"}], "owner": {"reputation": 1, "user_id": 9403600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/891f4182ed64f74d8897b8c1c913d2cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bcode", "link": "https://stackoverflow.com/users/9403600/bcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1538600252, "creation_date": 1538596900, "question_id": 52634824, "link": "https://stackoverflow.com/questions/52634824/trouble-with-stripping-out-everything-from-file-before-a-found-string", "title": "Trouble with stripping out everything from file before a found string", "body": "<p>What I am trying to accomplish is search the file for a certain string when a match is found delete everything above it in the file and save the file. I am fairly new to Python so I am probably doing a few things wrong. Right now it creates a new file but nothing gets written into it.</p>\n\n<p>Here is my code below:</p>\n\n<pre><code>file_type = \".php\"\nsearch_str = \"}exit();}} ?&gt;&lt;?php\"\nprint(\"SANITIZING........\")\nprint(\"FOLDERPATH being searched in: \", search_path)\nprint(\"FILETYPE being searched for : \", file_type)\nprint(\"STRING being searched       : \", search_str)\n\n# LOOPING THROUGH ALL FOLDERS AND FILES\nfor subdir, dirs, files in os.walk(search_path):\n    for file in files:\n\n        # Apply file type filter   \n        if file.endswith(file_type):\n            bad_codes = ['exit();}} ?&gt;&lt;?php']\n            orig_file = open(os.path.join(subdir, file))\n\n                for line in orig_file:\n                    index = line.find(search_str)\n                    if ( index != -1) :\n                        new_file  = open(os.path.join(subdir, '-clean2-copy-' + file), 'w')\n                        if not any(bad_code in line for bad_code in bad_codes):\n                            new_file.write(line)\n                        fw.write(\"CREATED SANITIZED COPY OF BAD PHP FILE: \" + os.path.join(subdir, file) + \" \" + str(index) + \"\\r\\n\")\n</code></pre>\n"}]