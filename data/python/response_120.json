[{"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 938, "user_id": 3828443, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C7eMR.jpg?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/3828443/ryan"}, "edited": false, "score": 0, "creation_date": 1493252172, "post_id": 43646543, "comment_id": 74341438, "body": "Asked and answered! Wish that had been in the video I watched. Many thanks!"}], "tags": [], "owner": {"reputation": 678, "user_id": 7887265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/447565696c6376764ef04e96fac7f0af?s=128&d=identicon&r=PG&f=1", "display_name": "lsalamon", "link": "https://stackoverflow.com/users/7887265/lsalamon"}, "is_accepted": false, "score": 2, "last_activity_date": 1493251718, "creation_date": 1493251718, "answer_id": 43646543, "question_id": 43646445, "link": "https://stackoverflow.com/questions/43646445/do-groupby-statements-cause-dataframes-to-collapse-to-series/43646543#43646543", "title": "Do groupby statements cause dataframes to collapse to series?", "body": "<p>the answer is No, group by does preserve the structure.</p>\n\n<p>in your example <code>bsa_mod.groupby('Name').Winner.count()</code> returns a series object whereas <code>bsa_mod.groupby('Name').count()</code> returns a data frame. </p>\n"}, {"comments": [{"owner": {"reputation": 938, "user_id": 3828443, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C7eMR.jpg?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/3828443/ryan"}, "edited": false, "score": 0, "creation_date": 1493255075, "post_id": 43646616, "comment_id": 74342139, "body": "That is a very sexy lambda function. I&#39;ll definitely play around with it. Much appreciated!"}, {"owner": {"reputation": 938, "user_id": 3828443, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C7eMR.jpg?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/3828443/ryan"}, "edited": false, "score": 0, "creation_date": 1493256335, "post_id": 43646616, "comment_id": 74342441, "body": "I&#39;d like to accept your answer. If you don&#39;t mind me asking, how is it that your way manages to retain the index and the other way does not? And how do I interpret [x.Name]?"}, {"owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "reply_to_user": {"reputation": 938, "user_id": 3828443, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C7eMR.jpg?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/3828443/ryan"}, "edited": false, "score": 1, "creation_date": 1493256421, "post_id": 43646616, "comment_id": 74342459, "body": "Because when you do a groupby, you are doing an aggregation operation, which could reduce the number of records. If you have multiple &#39;Alice Brady&#39; for example, after groupby, there will be only one record for &#39;Alice Brady&#39;. It&#39;ll be ambiguous to use the original index as there are multiple of them. While in my solution, I&#39;m not doing group by at all. The apply function will only find the count of the name in the current row."}], "tags": [], "owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "is_accepted": true, "score": 1, "last_activity_date": 1493252390, "creation_date": 1493252390, "answer_id": 43646616, "question_id": 43646445, "link": "https://stackoverflow.com/questions/43646445/do-groupby-statements-cause-dataframes-to-collapse-to-series/43646616#43646616", "title": "Do groupby statements cause dataframes to collapse to series?", "body": "<pre><code>#if you want to retain the index and the dataframe format, try below:\nbsa_mod['Winner_Count'] = bsa_mod.apply(lambda x: bsa_mod.Name.value_counts()[x.Name],axis=1)\nprint(bsa_mod)\n\n     Year               Name  Winner  Winner_Count\n431  1936       Beulah Bondi     0.0             1\n432  1936        Alice Brady     0.0             1\n433  1936   Bonita Granville     0.0             1\n434  1936  Maria Ouspenskaya     0.0             1\n435  1936   Gale Sondergaard     1.0             1\n\n#Then you can do something like:\nbsa_mod[bsa_mod.Winner_Count == 2]\n</code></pre>\n"}], "owner": {"reputation": 938, "user_id": 3828443, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C7eMR.jpg?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/3828443/ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 43646616, "answer_count": 2, "score": 1, "last_activity_date": 1493252390, "creation_date": 1493251083, "question_id": 43646445, "link": "https://stackoverflow.com/questions/43646445/do-groupby-statements-cause-dataframes-to-collapse-to-series", "title": "Do groupby statements cause dataframes to collapse to series?", "body": "<p>I started with a large dataframe. I pared and rearranged some columns. The head of the last (rather large) dataframe I saved looked like this:</p>\n\n<pre><code># bsa_mod = 'best supporting actress modified' dataframe\n[1] bsa_mod = bsa_mod[['Year', 'Name', 'Winner']]\n[2] bsa_mod.head()\n\n    Year    Name              Winner\n431 1936    Beulah Bondi        0.0\n432 1936    Alice Brady         0.0\n433 1936    Bonita Granville    0.0\n434 1936    Maria Ouspenskaya   0.0\n435 1936    Gale Sondergaard    1.0\n</code></pre>\n\n<p>I needed to group all of the names together and count the dummy variables next to each. For example, Agnes Morehead appears in the Name column 4 times and has either a 0 or 1 next to her name each time, so the final summary table should say 'Agnes Morehead 4'. I got that with the following:</p>\n\n<pre><code># aggregate nominations by actress\nbsa_mod_count = bsa_mod.groupby('Name').Winner.count()\nName\nAbigail Breslin    1\nAdriana Barraza    1\nAgnes Moorehead    4\nAlfre Woodard      1\nAlice Brady        2\nName: Winner, dtype: int64\n</code></pre>\n\n<p>I ran .describe() on this to get summary stats and found that the max value calculated was 6. </p>\n\n<p>I wanted to find out who this mystery person was by running something like:</p>\n\n<pre><code>most_nominations = bsa_mod_count[bsa_mod_count.Winner == 6]\n</code></pre>\n\n<p>Much to my surprise, I got an attribute error saying that 'Winner' did not exist and that the data type with which I was now dealing was a series and no longer a dataframe. </p>\n\n<p>Do dataframes degenerate to a series after a 'groupby'? I wasn't expecting my index to be overwritten, which also seemed to happen when I ran .agg(['count']). Is there another way I could have done this, so as to preserve my dataframe and render that '6' useable?</p>\n"}, {"tags": ["python", "scrapy", "splash-screen"], "answers": [{"tags": [], "owner": {"reputation": 587, "user_id": 7912448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4508e4a9123000a5c0d138bdf4eebe38?s=128&d=identicon&r=PG&f=1", "display_name": "CK Chen", "link": "https://stackoverflow.com/users/7912448/ck-chen"}, "is_accepted": true, "score": 11, "last_activity_date": 1493256245, "creation_date": 1493256245, "answer_id": 43647092, "question_id": 43646438, "link": "https://stackoverflow.com/questions/43646438/using-proxy-with-scrapy-splash/43647092#43647092", "title": "using proxy with scrapy-splash", "body": "<p>You should add 'proxy' argument to SplashRequest object.</p>\n\n<pre><code>def start_requests(self):\n    for url in self.start_urls:\n        print url\n        yield SplashRequest(url, self.parse,\n            endpoint='execute',\n            args={'wait': 5,\n                  'lua_source': PROXY,\n                  'js_source': 'document.body',\n                  'proxy': 'http://proxy_ip:proxy_port'}\n</code></pre>\n"}], "owner": {"reputation": 310, "user_id": 5833932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc0f4b066c752860c5e553d2fb24a54b?s=128&d=identicon&r=PG&f=1", "display_name": "morea030", "link": "https://stackoverflow.com/users/5833932/morea030"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5906, "favorite_count": 4, "accepted_answer_id": 43647092, "answer_count": 1, "score": 4, "last_activity_date": 1493278963, "creation_date": 1493251016, "last_edit_date": 1493278963, "question_id": 43646438, "link": "https://stackoverflow.com/questions/43646438/using-proxy-with-scrapy-splash", "title": "using proxy with scrapy-splash", "body": "<p>I'm trying to use proxy (proxymesh) alongside scrapy-splash. I have following (relevant) code</p>\n\n<pre><code>PROXY = \"\"\"splash:on_request(function(request)\n    request:set_proxy{\n        host = http://us-ny.proxymesh.com,\n        port = 31280,\n        username = username,\n        password = secretpass,\n    }\n    return splash:html()\nend)\"\"\"\n</code></pre>\n\n<p>and in start_requests</p>\n\n<pre><code>def start_requests(self):\n    for url in self.start_urls:\n        print url\n        yield SplashRequest(url, self.parse,\n            endpoint='execute',\n            args={'wait': 5,\n                  'lua_source': PROXY,\n                  'js_source': 'document.body'},\n</code></pre>\n\n<p>But it does not seem to work. self.parse is not called at all. If I change endpoint to  'render.html' I hit the self.parse method, but when I inspect headers (response.headers) I can see that it is not going trough proxy. I confirmed that when I set <a href=\"http://checkip.dyndns.org/\" rel=\"nofollow noreferrer\">http://checkip.dyndns.org/</a> as starting url and saw, upon parsing response, my old ip address.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["python", "beautifulsoup", "mechanize", "html5lib"], "comments": [{"owner": {"reputation": 890, "user_id": 1236357, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1b2fa249e43a9c0ee1619545282df77b?s=128&d=identicon&r=PG", "display_name": "Borko Kovacev", "link": "https://stackoverflow.com/users/1236357/borko-kovacev"}, "edited": false, "score": 0, "creation_date": 1493251152, "post_id": 43646368, "comment_id": 74341182, "body": "Have you tried <code>pip install --ignore-installed six</code> prior to these commands? And try running your command afterwards."}, {"owner": {"reputation": 1486, "user_id": 6637004, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/84f0334c76323d612a5fefc5b1d2deef?s=128&d=identicon&r=PG&f=1", "display_name": "maddie", "link": "https://stackoverflow.com/users/6637004/maddie"}, "reply_to_user": {"reputation": 890, "user_id": 1236357, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1b2fa249e43a9c0ee1619545282df77b?s=128&d=identicon&r=PG", "display_name": "Borko Kovacev", "link": "https://stackoverflow.com/users/1236357/borko-kovacev"}, "edited": false, "score": 0, "creation_date": 1493251249, "post_id": 43646368, "comment_id": 74341203, "body": "when I try to run your command, I get a &quot;IOError: [Errno 13] Permission denied: &#39;/Library/Python/2.7/site-packages/six.py&#39;&quot;"}, {"owner": {"reputation": 890, "user_id": 1236357, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1b2fa249e43a9c0ee1619545282df77b?s=128&d=identicon&r=PG", "display_name": "Borko Kovacev", "link": "https://stackoverflow.com/users/1236357/borko-kovacev"}, "edited": false, "score": 0, "creation_date": 1493251533, "post_id": 43646368, "comment_id": 74341280, "body": "Try running <code>pip install --ignore-installed six --user</code>"}, {"owner": {"reputation": 890, "user_id": 1236357, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1b2fa249e43a9c0ee1619545282df77b?s=128&d=identicon&r=PG", "display_name": "Borko Kovacev", "link": "https://stackoverflow.com/users/1236357/borko-kovacev"}, "edited": false, "score": 0, "creation_date": 1493251633, "post_id": 43646368, "comment_id": 74341307, "body": "also - do you have both python2 and 3 installed? one other possible error is that you are installing to the wrong interpreter. I assume <code>pip3</code> worked because you installed it for python3, but your default is python2.7 as shown. So you can try <code>pip2</code> as well, in case pip is screwed up somehow. The <code>--user flag</code> should work."}, {"owner": {"reputation": 1486, "user_id": 6637004, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/84f0334c76323d612a5fefc5b1d2deef?s=128&d=identicon&r=PG&f=1", "display_name": "maddie", "link": "https://stackoverflow.com/users/6637004/maddie"}, "reply_to_user": {"reputation": 890, "user_id": 1236357, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1b2fa249e43a9c0ee1619545282df77b?s=128&d=identicon&r=PG", "display_name": "Borko Kovacev", "link": "https://stackoverflow.com/users/1236357/borko-kovacev"}, "edited": false, "score": 0, "creation_date": 1493252028, "post_id": 43646368, "comment_id": 74341401, "body": "the --user flag worked, but still no dice when I ran my commands afterwards. I&#39;m installing python 3.6.1 now"}, {"owner": {"reputation": 1486, "user_id": 6637004, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/84f0334c76323d612a5fefc5b1d2deef?s=128&d=identicon&r=PG&f=1", "display_name": "maddie", "link": "https://stackoverflow.com/users/6637004/maddie"}, "reply_to_user": {"reputation": 890, "user_id": 1236357, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1b2fa249e43a9c0ee1619545282df77b?s=128&d=identicon&r=PG", "display_name": "Borko Kovacev", "link": "https://stackoverflow.com/users/1236357/borko-kovacev"}, "edited": false, "score": 0, "creation_date": 1493252354, "post_id": 43646368, "comment_id": 74341487, "body": "I tried to run my program on 3.6.1, but I get the same ImportError"}, {"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1493253405, "post_id": 43646368, "comment_id": 74341723, "body": "There&#39;s a whole multitude of possible reasons mentioned in other questions around SO. Look through them and report on results."}, {"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1493253483, "post_id": 43646368, "comment_id": 74341739, "body": "In particular, the <code>build&#47;bdist.macosx-10.11-intel&#47;egg&#47;mechanize&#47;</code> path looks strange."}, {"owner": {"reputation": 1486, "user_id": 6637004, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/84f0334c76323d612a5fefc5b1d2deef?s=128&d=identicon&r=PG&f=1", "display_name": "maddie", "link": "https://stackoverflow.com/users/6637004/maddie"}, "reply_to_user": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1493256986, "post_id": 43646368, "comment_id": 74342606, "body": "@ivan_pozdeev what exactly about the path is suspicious?"}, {"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1493282148, "post_id": 43646368, "comment_id": 74352708, "body": "@Matt it&#39;s not a normal installation path. It rather looks like a directory for temporary build files."}, {"owner": {"reputation": 1486, "user_id": 6637004, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/84f0334c76323d612a5fefc5b1d2deef?s=128&d=identicon&r=PG&f=1", "display_name": "maddie", "link": "https://stackoverflow.com/users/6637004/maddie"}, "reply_to_user": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1493308276, "post_id": 43646368, "comment_id": 74371876, "body": "@ivan_pozdeev well the traceback is python itself looking for necessary modules when executing <code>import &lt;module&gt;</code>, correct? how does one reroute where the tracebook looks?"}], "answers": [{"comments": [{"owner": {"reputation": 890, "user_id": 1236357, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1b2fa249e43a9c0ee1619545282df77b?s=128&d=identicon&r=PG", "display_name": "Borko Kovacev", "link": "https://stackoverflow.com/users/1236357/borko-kovacev"}, "edited": false, "score": 0, "creation_date": 1493325676, "post_id": 43662808, "comment_id": 74381979, "body": "You should never sudo on  PIP because it will mess up with your global packages. You might want to setup a virtual environment next time as well."}], "tags": [], "owner": {"reputation": 1486, "user_id": 6637004, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/84f0334c76323d612a5fefc5b1d2deef?s=128&d=identicon&r=PG&f=1", "display_name": "maddie", "link": "https://stackoverflow.com/users/6637004/maddie"}, "is_accepted": false, "score": -1, "last_activity_date": 1493309254, "creation_date": 1493309254, "answer_id": 43662808, "question_id": 43646368, "link": "https://stackoverflow.com/questions/43646368/mechanize-select-first-form-returns-importerror-no-module-named-html5lib/43662808#43662808", "title": "Mechanize Select First Form returns &quot;ImportError: No module named html5lib&quot;", "body": "<p>I'm getting a different issue now, but this is the solution to the html5lib.</p>\n\n<pre><code>pip install --ignore-installed six --user\nsudo -H pip install html5lib --ignore-installed\n</code></pre>\n\n<p>To learn more, this is an excellent thread:<a href=\"https://github.com/pypa/pip/issues/3165\" rel=\"nofollow noreferrer\">https://github.com/pypa/pip/issues/3165</a></p>\n"}], "owner": {"reputation": 1486, "user_id": 6637004, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/84f0334c76323d612a5fefc5b1d2deef?s=128&d=identicon&r=PG&f=1", "display_name": "maddie", "link": "https://stackoverflow.com/users/6637004/maddie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 443, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1493344668, "creation_date": 1493250627, "last_edit_date": 1592644375, "question_id": 43646368, "link": "https://stackoverflow.com/questions/43646368/mechanize-select-first-form-returns-importerror-no-module-named-html5lib", "title": "Mechanize Select First Form returns &quot;ImportError: No module named html5lib&quot;", "body": "<p>After reading <a href=\"http://stockrt.github.io/p/handling-html-forms-with-python-mechanize-and-BeautifulSoup/\" rel=\"nofollow noreferrer\">this tutorial</a>, I came up with this code,</p>\n<pre><code>import requests\n   from bs4 import BeautifulSoup\n   import re\n   import mechanize\n   import cookielib\n   \n   # Browser\n   br = mechanize.Browser()\n   \n  # Cookie Jar\n  cj = cookielib.LWPCookieJar()\n  br.set_cookiejar(cj)\n  \n  # Browser options\n  br.set_handle_equiv(True)\n  br.set_handle_gzip(True)\n  br.set_handle_redirect(True)\n  br.set_handle_referer(True)\n  br.set_handle_robots(False)\n  \n  # Follows refresh 0 but not hangs on refresh &gt; 0\n  br.set_handle_refresh(mechanize._http.HTTPRefreshProcessor(), max_time=1)\n  \n  # User-Agent (this is cheating, ok?)\n  br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]\n  \n  # The site we will navigate into, handling it's session\n  br.open('http://www.cleanmetrics.net/foodcarbonscope')\n  \n  br.select_form(nr=0)\n  br.form['ctl00$ContentPlaceHolder1$userName'] = &quot;XXXXX&quot;\n  br.form['ctl00$ContentPlaceHolder1$passWord'] = &quot;XXXXXX&quot;\n  \n  # Login\n  br.submit()\n</code></pre>\n<p>Keeps getting this error:</p>\n<pre><code>File &quot;scrapeRecipe.py&quot;, line 30, in &lt;module&gt;\n    br.select_form(nr=0)\n  File &quot;build/bdist.macosx-10.11-intel/egg/mechanize/_mechanize.py&quot;, line 619, in select_form\n  File &quot;build/bdist.macosx-10.11-intel/egg/mechanize/_html.py&quot;, line 260, in global_form\n  File &quot;build/bdist.macosx-10.11-intel/egg/mechanize/_html.py&quot;, line 267, in forms\n  File &quot;build/bdist.macosx-10.11-intel/egg/mechanize/_html.py&quot;, line 282, in _get_forms\n  File &quot;build/bdist.macosx-10.11-intel/egg/mechanize/_html.py&quot;, line 247, in root\n  File &quot;build/bdist.macosx-10.11-intel/egg/mechanize/_html.py&quot;, line 145, in content_parser\nImportError: No module named html5lib\n</code></pre>\n<p>However, I know that I've successfully installed html5lib because when I run <code>pip3 freeze</code> I see</p>\n<pre><code>html5lib==0.999999999\nsix==1.10.0\nwebencodings==0.5.1\n</code></pre>\n<p><strong>Latest:</strong>\nI think my problem may have to do with my easy-install.pth file. In my site-packages directory, I don't actually see html5lib. I only have this:</p>\n<pre><code>BeautifulSoup-3.2.1-py2.7.egg\nappdirs-1.4.3.dist-info\nappdirs.py\nappdirs.pyc\nbeautifulsoup4-4.5.3.dist-info\nbs4\neasy-install.pth\nhtml2text-2016.9.19-py2.7.egg\nmechanize-0.3.1-py2.7.egg\npackaging\npackaging-16.8.dist-info\npip-9.0.1-py2.7.egg\nrequests-2.13.0-py2.7.egg\n</code></pre>\n<p>When I ran <code>easy_install html5lib</code>, I get <code>Adding html5lib 0.999999999 to easy-install.pth file</code>. However, after it successfully finished processing dependencies for html5lib, I opened my easy_install.pth file and I don't see html5lib mentioned anywhere?</p>\n<pre><code>   import sys; sys.__plen = len(sys.path)\n   ./BeautifulSoup-3.2.1-py2.7.egg\n   ./html2text-2016.9.19-py2.7.egg\n   ./mechanize-0.3.1-py2.7.egg\n   ./requests-2.13.0-py2.7.egg\n   ./pip-9.0.1-py2.7.egg\n   import sys; new=sys.path[sys.__plen:]; del sys.path[sys.__plen:]; p=getattr(sys,'__egginsert',0); sys.path[p:p]=new; sys.__egginsert = p+l    en(new)\n</code></pre>\n<p>Unless the html5lib is in one of those above packages? I'm wondering if I need to import html5lib in my python code and also list the root path?</p>\n<p>don't really know why this is getting downvoted? :/</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 2035, "user_id": 2750396, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EgeP0.png?s=128&g=1", "display_name": "romeric", "link": "https://stackoverflow.com/users/2750396/romeric"}, "edited": false, "score": 0, "creation_date": 1493252864, "post_id": 43646362, "comment_id": 74341607, "body": "This discussion would probably help: <a href=\"http://stackoverflow.com/questions/31327630/scipy-linalg-eig-giving-different-eigenvectors-from-gnu-octaves-eig\" title=\"scipy linalg eig giving different eigenvectors from gnu octaves eig\">stackoverflow.com/questions/31327630/&hellip;</a>"}, {"owner": {"reputation": 389, "user_id": 1868364, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/XtFQw.jpg?s=128&g=1", "display_name": "24x7", "link": "https://stackoverflow.com/users/1868364/24x7"}, "reply_to_user": {"reputation": 2035, "user_id": 2750396, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EgeP0.png?s=128&g=1", "display_name": "romeric", "link": "https://stackoverflow.com/users/2750396/romeric"}, "edited": false, "score": 0, "creation_date": 1493253696, "post_id": 43646362, "comment_id": 74341798, "body": "I&#39;ve looked at the link, but am really new to numpy.  Do you have any recommendations of what I should do?  I&#39;m running on Ubuntu 16.10 and using python 2.7 ... I just upgraded to <code>numpy-1.12.1-cp27-cp27mu-manylinux1_x86_64.whl</code> but am still getting the same strange behaviour"}], "owner": {"reputation": 389, "user_id": 1868364, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/XtFQw.jpg?s=128&g=1", "display_name": "24x7", "link": "https://stackoverflow.com/users/1868364/24x7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493250528, "creation_date": 1493250528, "question_id": 43646362, "link": "https://stackoverflow.com/questions/43646362/matrix-calculation-returns-varied-results-with-different-matrix", "title": "Matrix calculation returns varied results with different matrix", "body": "<p>I've been tinkering with <a href=\"http://glowingpython.blogspot.ca/2011/05/four-ways-to-compute-google-pagerank.html\" rel=\"nofollow noreferrer\">this python snippet</a> which is supposed to demonstrate four different approaches of calculating PageRank.  </p>\n\n<p>the code:</p>\n\n<pre><code>from numpy import *\n\ndef powerMethodBase(A,x0,iter):\n \"\"\" basic power method \"\"\"\n for i in range(iter):\n  x0 = dot(A,x0)\n  x0 = x0/linalg.norm(x0,1)\n return x0\n\ndef powerMethod(A,x0,m,iter):\n \"\"\" power method modified to compute\n     the maximal real eigenvector \n     of the matrix M built on top of the input matrix A \"\"\"\n n = A.shape[1]\n delta = m*(array([1]*n,dtype='float64')/n) # array([1]*n is [1 1 ... 1] n times\n for i in range(iter):\n  x0 = dot((1-m),dot(A,x0)) + delta\n return x0\n\ndef maximalEigenvector(A):\n \"\"\" using the eig function to compute eigenvectors \"\"\"\n n = A.shape[1]\n w,v = linalg.eig(A)\n return abs(real(v[:n,0])/linalg.norm(v[:n,0],1))\n\ndef linearEquations(A,m):\n \"\"\" solving linear equations \n     of the system (I-(1-m)*A)*x = m*s \"\"\"\n n = A.shape[1]\n C = eye(n,n)-dot((1-m),A)\n b = m*(array([1]*n,dtype='float64')/n)\n return linalg.solve(C,b)\n\ndef getTeleMatrix(A,m):\n \"\"\" return the matrix M\n     of the web described by A \"\"\"\n n = A.shape[1]\n S = ones((n,n))/n\n return (1-m)*A+m*S\n\nA = array([ [0,     0,     0,     1, 0, 1],\n            [1/2.0, 0,     0,     0, 0, 0],\n            [0,     1/2.0, 0,     0, 0, 0],\n            [0,     1/2.0, 1/3.0, 0, 0, 0],\n            [0,     0,     1/3.0, 0, 0, 0],\n            [1/2.0, 0,     1/3.0, 0, 1, 0 ] ])\n\nn = A.shape[1] # A is n x n\nm = 0.15\nM = getTeleMatrix(A,m)\n\nx0 = [1]*n\nx1 = powerMethod(A,x0,m,130)\nx2 = powerMethodBase(M,x0,130)\nx3 = maximalEigenvector(M)\nx4 = linearEquations(A,m)\n\n# comparison of the four methods\nlabels = range(1,6)\nprint array([labels, x1, x2, x3, x4]).T\n</code></pre>\n\n<p>The expected output:</p>\n\n<pre><code>[[ 1.          0.32954577  0.32954577  0.32954577  0.32954577]\n [ 2.          0.16505695  0.16505695  0.16505695  0.16505695]\n [ 3.          0.0951492   0.0951492   0.0951492   0.0951492 ]\n [ 4.          0.12210815  0.12210815  0.12210815  0.12210815]\n [ 5.          0.05195894  0.05195894  0.05195894  0.05195894]\n [ 6.          0.23618099  0.23618099  0.23618099  0.23618099]]\n</code></pre>\n\n<p>After modifying line 59 to <code>labels = range(1,7)</code>, I ran the script locally and got the expected output above.  Note how each line in the output repeats the same page rank four times to demonstrate that all four methods of calculating pagerank work and return the same results.</p>\n\n<p>However, when I swap out the A array for a different one:</p>\n\n<pre><code>A = array([ [0, 0, 1/2.0, 0],\n        [1, 0, 1/2.0, 0],\n        [0, 0, 0, 0],\n        [0, 1, 0, 0] ])\n</code></pre>\n\n<p>It gives me this output:</p>\n\n<pre><code>[[ 1.          0.0534375   0.11790211  0.11790211  0.0534375 ]\n [ 2.          0.09885937  0.29698454  0.29698454  0.09885937]\n [ 3.          0.0375      0.06701063  0.06701063  0.0375    ]\n [ 4.          0.12153047  0.51810272  0.51810272  0.12153047]]\n</code></pre>\n\n<p>note how the first and fourth methods return the same result and the second and third return the same results, but all four are returning different answers.  What am I doing wrong here?  Are the four methods supposed to return different results at times?</p>\n\n<p>I tried modifying the <code>getTeleMatrix()</code> function but it didn't solve the problem.</p>\n\n<p>Any help is greatly appreciated.</p>\n"}, {"tags": ["python", "machine-learning", "computer-vision", "cntk"], "owner": {"reputation": 41, "user_id": 7834200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882f63c71ad087a26b736eab9f85964f?s=128&d=identicon&r=PG&f=1", "display_name": "Mukesh Gokul Kastala", "link": "https://stackoverflow.com/users/7834200/mukesh-gokul-kastala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 434, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1493310485, "creation_date": 1493250431, "last_edit_date": 1493310485, "question_id": 43646352, "link": "https://stackoverflow.com/questions/43646352/using-cntks-fast-r-cnn-tutorial-to-detect-rotated-objects", "title": "Using CNTK&#39;s Fast R-CNN tutorial to detect Rotated Objects", "body": "<p>I am using <strong>CNTK's</strong> implementation of <strong>Fast R-CNN</strong>(released on github).<br> Selective Search was not giving me good Region Proposals, so I wrote something that better suited my data(I am dealing with scanned documents). My task is to identify WaterMarks in documents and bound a tight box around them. Extending <strong>CNTK's</strong> object detection tutorial to identify horizontally aligned WaterMarks was pretty straight forward, giving me decent accuracy. Although the network uses AlexNet's cov weights(transfer learning), it seems to generalize pretty well to images holding text. Now I am running into the issue of identifying rotated WaterMarks(rotated at some arbitrary degree).</p>\n\n<p>I have a few questions on this problem:</p>\n\n<ol>\n<li><p>The <strong>\"out-of-the-box\"</strong> Regression Head outputs <code>4 numbers -&gt; (topX, topY, width, height)</code>; <br>\nHowever this representation does not allow for rotated rectangles. I understand that when creating my ground truth boxes, I must draw rotated rectangles as well as have rotated region proposals. In what way do I change the network architecture to predict boxes like this? <code>5 numbers -&gt; (topX, topY, width, height, angle)</code>: similar to <code>cv2.minAreaRect()</code> function? <code>8 numbers -&gt; (x1, y1, x2, y2, x3, y3, x4, y4)</code>?<br>\nI apologize if this is a trivial problem, but I am having trouble wrapping my head around this.  </p></li>\n<li><p>Does the algorithm even care that the object is rotated? Am I making it harder than it should be? I have read of others purposefully applying Image augmentations(changing scale and rotating) to have a more robust model. When this sort of augmentation is done is the model able to recognize and bound tight rotated rectangles/squares around the object of interest? </p></li>\n</ol>\n"}, {"tags": ["python", "lda"], "comments": [{"owner": {"reputation": 952, "user_id": 5505161, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c62b36b7d0f6241b61ef9e9a671240a5?s=128&d=identicon&r=PG&f=1", "display_name": "lordingtar", "link": "https://stackoverflow.com/users/5505161/lordingtar"}, "edited": false, "score": 0, "creation_date": 1493250523, "post_id": 43646332, "comment_id": 74341012, "body": "Take a look at the docs, attempt to create a loop and come back with code. We&#39;ll be happy to help. Link to docs: <a href=\"https://docs.python.org/3/tutorial/controlflow.html\" rel=\"nofollow noreferrer\">docs.python.org/3/tutorial/controlflow.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 12740, "user_id": 3907250, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/RIhjj.jpg?s=128&g=1", "display_name": "Aerin", "link": "https://stackoverflow.com/users/3907250/aerin"}, "is_accepted": false, "score": 0, "last_activity_date": 1495048985, "creation_date": 1495048985, "answer_id": 44033181, "question_id": 43646332, "link": "https://stackoverflow.com/questions/43646332/how-to-create-for-loop-in-python-for-lda-model/44033181#44033181", "title": "How to create for loop in Python for LDA model", "body": "<p>This is a snippet of my code, how I usually create the matrix to perform LDA.</p>\n\n<pre><code># loop through the feature and construct the feature array  \nfeatures_size = len(features.items()) \n\nX = []  #np.ndarray. This is what we are going to put in LDA module.\n\nfor i in TweetFeatures.items(): # TweetFeatures is words that appeared in your tweet\n    current_vector = np.array([0]*features_size) \n    for j in i[1]: # TweetFeatures key is your tweet ID and value is array of words. (This depends on how you define them)\n        if j in map_id_2_index:\n            current_vector[map_id_2_index[j]] = 1\n    X.append(current_vector) \nX=np.array(X) # document-term matrix\nX=X[~np.all(X == 0, axis=1)] # remove all zero line\nprint(\"type(X): {}\".format(type(X)))\nprint(\"shape: {}\\n\".format(X.shape)) \n\n####################################\n#### LDA MODELLING #################\n####################################\nmodel = lda.LDA(n_topics=5, n_iter=1000, random_state=1)\nmodel.fit(X)\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 6611160, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb48221e47dbaa1df991acfb1dbe2c32?s=128&d=identicon&r=PG&f=1", "display_name": "Aoitori", "link": "https://stackoverflow.com/users/6611160/aoitori"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 414, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1495048985, "creation_date": 1493250289, "last_edit_date": 1493253072, "question_id": 43646332, "link": "https://stackoverflow.com/questions/43646332/how-to-create-for-loop-in-python-for-lda-model", "title": "How to create for loop in Python for LDA model", "body": "<p>I need some help creating a for loop in Python.  I am a complete coding novice.  Please point me in the right direction.</p>\n\n<p>Here's what I have done so far.  I have used the Twitter API to stream 1000 tweets about a subject.  I then used the lda model to find the top 3 topics.</p>\n\n<p>Now I need to loop through the documents (tweets) via the code below, where x is equal to the document number (0 through 999), to get the topic distribution for each document.\n    ldamodel.get_document_topics(corpus[x])\nCan someone point me in the right direction on how to formulate my loop?</p>\n\n<p>Here's my guess so far:</p>\n\n<p>Tweets were pulled using this code (not complete):</p>\n\n<pre><code>def get_tweets(input_query):\n    consumer_key = \"x\"\n    consumer_secret = \"x\"\n    access_token = \"x\"\n    access_token_secret = \"x\"\n    auth = tweepy.OAuthHandler(consumer_key, consumer_secret)\n    auth.set_access_token(access_token, access_token_secret)\n    api = tweepy.API(auth)\n    return tweepy.Cursor(api.search, q=input_query, lang=\"en\").items()\n\ninput_queries = ['Tornado']\ntweets = {}\ndataset = defaultdict(list)\nfor input_query in input_queries:\n    tweets = get_tweets(input_query)\n    download_tweet_count = 1000\n    print(input_query)\n    counter = 0\n    ....\n\n    ....\nldamodel = models.ldamodel.LdaModel(corpus, num_topics=3, id2word = \ndictionary, passes=20)\n\ncounter = 0\nfor x in download_tweet_count:\nwhile counter &lt; x:\n    try:\n        ldamodel.get_document_topics(corpus[x])\n</code></pre>\n\n<p>I need to run the model on every document (tweet) with ldamodel.get_document_topics(corpus[x]) and then assign that tweet to the topic with the highest probability topic match. I believe I can use the dataframe or separate lists to store the assignments. I don't know what is meant by the \"dataframe\".</p>\n"}, {"tags": ["python", "sql", "database", "select", "psycopg2"], "comments": [{"owner": {"reputation": 46235, "user_id": 3431869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16b2315fa60f613de9565af031264f31?s=128&d=identicon&r=PG&f=1", "display_name": "Vamsi Prabhala", "link": "https://stackoverflow.com/users/3431869/vamsi-prabhala"}, "edited": false, "score": 1, "creation_date": 1493250569, "post_id": 43646311, "comment_id": 74341029, "body": "what does <i>not working</i> mean?"}, {"owner": {"reputation": 694, "user_id": 7912237, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/PmxCe.jpg?s=128&g=1", "display_name": "Behzad Jamali", "link": "https://stackoverflow.com/users/7912237/behzad-jamali"}, "reply_to_user": {"reputation": 46235, "user_id": 3431869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16b2315fa60f613de9565af031264f31?s=128&d=identicon&r=PG&f=1", "display_name": "Vamsi Prabhala", "link": "https://stackoverflow.com/users/3431869/vamsi-prabhala"}, "edited": false, "score": 0, "creation_date": 1493250679, "post_id": 43646311, "comment_id": 74341050, "body": "It doesnt give me the correct results."}, {"owner": {"reputation": 46235, "user_id": 3431869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16b2315fa60f613de9565af031264f31?s=128&d=identicon&r=PG&f=1", "display_name": "Vamsi Prabhala", "link": "https://stackoverflow.com/users/3431869/vamsi-prabhala"}, "edited": false, "score": 0, "creation_date": 1493250729, "post_id": 43646311, "comment_id": 74341068, "body": "so you have these values for the first row..and want to get it for the others?"}, {"owner": {"reputation": 694, "user_id": 7912237, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/PmxCe.jpg?s=128&g=1", "display_name": "Behzad Jamali", "link": "https://stackoverflow.com/users/7912237/behzad-jamali"}, "reply_to_user": {"reputation": 46235, "user_id": 3431869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16b2315fa60f613de9565af031264f31?s=128&d=identicon&r=PG&f=1", "display_name": "Vamsi Prabhala", "link": "https://stackoverflow.com/users/3431869/vamsi-prabhala"}, "edited": false, "score": 0, "creation_date": 1493250977, "post_id": 43646311, "comment_id": 74341135, "body": "Yes, that&#39;s right. In the first row it is assumed that the previous current_volume was zero. So 4 - 2 = 2. the second row needs to know how much is the current_volume in the previous row and the rain and demand in the current row."}], "answers": [{"comments": [{"owner": {"reputation": 694, "user_id": 7912237, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/PmxCe.jpg?s=128&g=1", "display_name": "Behzad Jamali", "link": "https://stackoverflow.com/users/7912237/behzad-jamali"}, "edited": false, "score": 0, "creation_date": 1493260304, "post_id": 43646490, "comment_id": 74343479, "body": "You are right, I wasn&#39;t expecting this! Its working perfectly."}, {"owner": {"reputation": 694, "user_id": 7912237, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/PmxCe.jpg?s=128&g=1", "display_name": "Behzad Jamali", "link": "https://stackoverflow.com/users/7912237/behzad-jamali"}, "edited": false, "score": 0, "creation_date": 1493261729, "post_id": 43646490, "comment_id": 74343799, "body": "Just a quick question. What is the best method to save the results (preferably in the same table)?"}, {"owner": {"reputation": 46235, "user_id": 3431869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16b2315fa60f613de9565af031264f31?s=128&d=identicon&r=PG&f=1", "display_name": "Vamsi Prabhala", "link": "https://stackoverflow.com/users/3431869/vamsi-prabhala"}, "reply_to_user": {"reputation": 694, "user_id": 7912237, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/PmxCe.jpg?s=128&g=1", "display_name": "Behzad Jamali", "link": "https://stackoverflow.com/users/7912237/behzad-jamali"}, "edited": false, "score": 0, "creation_date": 1493293139, "post_id": 43646490, "comment_id": 74360559, "body": "you mean updating the table?"}, {"owner": {"reputation": 694, "user_id": 7912237, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/PmxCe.jpg?s=128&g=1", "display_name": "Behzad Jamali", "link": "https://stackoverflow.com/users/7912237/behzad-jamali"}, "edited": false, "score": 0, "creation_date": 1493343150, "post_id": 43646490, "comment_id": 74387768, "body": "Yes, I would like to write the result of the calculations (new_current_volume and new_unmet_demand) into two columns."}], "tags": [], "owner": {"reputation": 46235, "user_id": 3431869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16b2315fa60f613de9565af031264f31?s=128&d=identicon&r=PG&f=1", "display_name": "Vamsi Prabhala", "link": "https://stackoverflow.com/users/3431869/vamsi-prabhala"}, "is_accepted": true, "score": 0, "last_activity_date": 1493344187, "last_edit_date": 1493344187, "creation_date": 1493251405, "answer_id": 43646490, "question_id": 43646311, "link": "https://stackoverflow.com/questions/43646311/select-and-update-with-conditional-calculations-in-a-postgres-database/43646490#43646490", "title": "Select and update with conditional calculations in a Postgres database", "body": "<p>You should use a recursive cte to get the desired result. As each row depends on the previous calculation which can't be acheived with <code>lag</code>.</p>\n\n<pre><code>WITH RECURSIVE CTE(id,rain,demand,new_current_volume,new_unmet_demand) as \n(SELECT Id,rain,demand\n ,case when rain-demand &lt;0 then 0 else rain-demand end as new_current_volume\n ,case when rain-demand &lt;0 then rain-demand else 0 end as new_unmet_demand\n FROM rain_tanks\n WHERE id = 1\n UNION ALL\n SELECT r2.Id,r2.rain,r2.demand\n ,case when r1.new_current_volume+r2.rain-r2.demand &lt;0 then 0 else r1.new_current_volume+r2.rain-r2.demand end\n ,case when r1.new_current_volume+r2.rain-r2.demand &lt;0 then r1.new_current_volume+r2.rain-r2.demand else 0 end\n FROM cte r1\n JOIN rain_tanks r2 ON r2.id=r1.id+1\n)\nSELECT * FROM CTE;\n</code></pre>\n\n<p><a href=\"http://rextester.com/NWYDC53828\" rel=\"nofollow noreferrer\"><strong><code>Sample Demo</code></strong></a></p>\n\n<p>EDIT:</p>\n\n<p>To <code>update</code> the table based on the newly calculated values, include 2 <code>null</code> columns with the column names from the table, along with the calculated ones. Then you can <code>update</code> them with these calculations after the cte.</p>\n\n<pre><code>WITH RECURSIVE CTE(id,rain,demand,current_volume,unmet_demand,new_current_volume,new_unmet_demand) as \n(SELECT Id,rain,demand,null,null\n ,case when rain-demand &lt;0 then 0 else rain-demand end as new_current_volume\n ,case when rain-demand &lt;0 then rain-demand else 0 end as new_unmet_demand\n FROM rain_tanks\n WHERE id = 1\n UNION ALL\n SELECT r2.Id,r2.rain,r2.demand,null,null\n ,case when r1.new_current_volume+r2.rain-r2.demand &lt;0 then 0 else r1.new_current_volume+r2.rain-r2.demand end\n ,case when r1.new_current_volume+r2.rain-r2.demand &lt;0 then r1.new_current_volume+r2.rain-r2.demand else 0 end\n FROM cte r1\n JOIN rain_tanks r2 ON r2.id=r1.id+1\n)\nUPDATE rain_tanks r\nSET current_volume=c.new_current_volume\n   ,unmet_demand=c.new_unmet_demand\nFROM cte c\nWHERE r.id=c.id;\n</code></pre>\n"}], "owner": {"reputation": 694, "user_id": 7912237, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/PmxCe.jpg?s=128&g=1", "display_name": "Behzad Jamali", "link": "https://stackoverflow.com/users/7912237/behzad-jamali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 1, "accepted_answer_id": 43646490, "answer_count": 1, "score": 0, "last_activity_date": 1581281297, "creation_date": 1493250050, "last_edit_date": 1581281297, "question_id": 43646311, "link": "https://stackoverflow.com/questions/43646311/select-and-update-with-conditional-calculations-in-a-postgres-database", "title": "Select and update with conditional calculations in a Postgres database", "body": "<p>I have a Postgres table named rain_tanks as shown below:</p>\n\n<pre><code> id   hour     rain    demand    current_volume  unmet_demand\n 1    00:00    4.0     2.0       2               0.0\n 2    00:10    3.0     4.0       [null]          [null]\n 3    00:20    1.0     6.0       [null]          [null]\n 4    00:30    7.0     3.0       [null]          [null]\n</code></pre>\n\n<p>I would like to do this calculations and update current_volume and unmet_demand columns (this code is just to show what needs to be done. I would like to do it without using function or code lines in Python):</p>\n\n<pre><code>a = lag(current_volume) + rain - demand\nif a &lt; 0: \n    unmet_demand = current_volume    \n    current_volume = 0\nelse:\n    unmet_demand = 0\n    current_volume = a\n</code></pre>\n\n<p>Expected table:</p>\n\n<pre><code> id   hour     rain    demand    current_volume  unmet_demand\n 1    00:00    4.0     2.0       2               0\n 2    00:10    3.0     4.0       1               0\n 3    00:20    1.0     6.0       0               -4\n 4    00:30    7.0     3.0       4               0\n</code></pre>\n\n<p>I guess what I need is to first SELECT and the UPDATE the columns. I tried the following for the SELECT but its not working:</p>\n\n<pre><code>import psycopg2 as p\nconn = p.connect(\"dbname = 'test' user = 'postgres' password = 'pass' host = 'localhost'\")\ncur = conn.cursor()\n\ncur.execute(\"\"\"SELECT Id,rain,demand,current_volume,unmet_demand, \n                      CASE WHEN (rain - demand + lag(current_volume) over(\n                                 order by Id)) &gt;= 0 \n                           THEN (rain - demand + lag(current_volume) over(\n                                 order by Id)) ELSE 0 END \n               FROM rain_tanks ORDER BY Id\"\"\")\n</code></pre>\n\n<h2>Edit</h2>\n\n<p>This is an additional question related to performance. The reason I decided to do these calculations in a Postgres database was to see whether there is a speed improvement in comparison to using Numpy arrays in Python. I have around 10 million points for the rain and demand columns and the answer provided here takes longer than an equivalent python function over Numpy arrays of rain and demand. Is there still space to improve the performance of the query?</p>\n"}, {"tags": ["python", "c++", "swig"], "comments": [{"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 1, "creation_date": 1493249510, "post_id": 43646185, "comment_id": 74340753, "body": "without knowing the source code for <code>Vertices_iterator</code> it&#39;s impossible to give any help."}, {"owner": {"reputation": 1109, "user_id": 1267255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iiQrb.jpg?s=128&g=1", "display_name": "Devan Williams", "link": "https://stackoverflow.com/users/1267255/devan-williams"}, "reply_to_user": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 1, "creation_date": 1493403972, "post_id": 43646185, "comment_id": 74419398, "body": "FYI, it looks like this commit (<a href=\"https://github.com/swig/swig/pull/560/files\" rel=\"nofollow noreferrer\">github.com/swig/swig/pull/560/files</a>) attempted to fix a similar issue..."}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 1, "creation_date": 1494704448, "post_id": 43646185, "comment_id": 74945516, "body": "If you want me to be able to look at this you need a real minimal complete example that I can get running in my own debugger. I ignored it before because there isn&#39;t one and even with a bounty I still can&#39;t help. The traceback shows at least 459 lines of Python you&#39;ve not shown\u200b in your &quot;simple test case&quot; that could be related and goodness knows how much else in the rest of ncore C and Python generated code. If you really want an answer you need to isolate it to something we can reproduce."}], "answers": [{"comments": [{"owner": {"reputation": 1109, "user_id": 1267255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iiQrb.jpg?s=128&g=1", "display_name": "Devan Williams", "link": "https://stackoverflow.com/users/1267255/devan-williams"}, "edited": false, "score": 0, "creation_date": 1494609511, "post_id": 43915883, "comment_id": 74918957, "body": "Thanks for testing. I should mention we tried with g++ 4.6 and g++ 4.9 on Centos 6, and MSVS Pro 2013 on Windows."}, {"owner": {"reputation": 756, "user_id": 7598403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5945e03cfe58474ba442f45d1bbc7e39?s=128&d=identicon&r=PG&f=1", "display_name": "pe3k", "link": "https://stackoverflow.com/users/7598403/pe3k"}, "reply_to_user": {"reputation": 1109, "user_id": 1267255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iiQrb.jpg?s=128&g=1", "display_name": "Devan Williams", "link": "https://stackoverflow.com/users/1267255/devan-williams"}, "edited": false, "score": 0, "creation_date": 1494702006, "post_id": 43915883, "comment_id": 74944795, "body": "@DevanWilliams Works for me also on Centos6/g++ 4.6. Does this simple proposed example produce exactly the same problem? Is there any compilation warning?"}], "tags": [], "owner": {"reputation": 756, "user_id": 7598403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5945e03cfe58474ba442f45d1bbc7e39?s=128&d=identicon&r=PG&f=1", "display_name": "pe3k", "link": "https://stackoverflow.com/users/7598403/pe3k"}, "is_accepted": false, "score": 0, "last_activity_date": 1494701867, "last_edit_date": 1494701867, "creation_date": 1494506878, "answer_id": 43915883, "question_id": 43646185, "link": "https://stackoverflow.com/questions/43646185/systemerror-built-in-function-xxx-iterator-returned-a-result-with-an-error-se/43915883#43915883", "title": "SystemError: &lt;built-in function xxx_iterator&gt; returned a result with an error set", "body": "<p>That is strange, just recompiled everything from scratch. Then I tested your simplified example (if understood correctly):</p>\n\n<p>Mytest.i:</p>\n\n<pre><code>%module mytest                                                                                             \n%{                                                                                                       \n    #include &lt;list&gt;\n     using namespace std;                                                                                     \n%}                                                                                                       \n\n%include \"std_list.i\"\nnamespace std {                                                                                          \n    %template(Ints) list&lt;int&gt;;                                                           \n}   \n</code></pre>\n\n<p>Compile steps:</p>\n\n<pre><code>swig -Wall -c++ -python -py3 -o mytest_wrap.cpp mytest.i\ng++ -c -g -ansi mytest_wrap.cpp -I/usr/local/include/python3.6m/ -fPIC -o mytest_wrap.o\ng++ -g -ansi -o _mytest.so mytest_wrap.o -shared\n</code></pre>\n\n<p>Then, after importing mytest module to python, everything works like a charm.</p>\n\n<p>Tested configurations:</p>\n\n<ul>\n<li>dockerized Ubuntu16.04: Python 3.6.1, SWIG 3.0.12, g++ 5.4.</li>\n<li>dockerized Centos6: Python 3.6.1, SWIG 3.0.12, g++ (4.9.2 and 4.4.7)</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11372883, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5lE2rylmgjI/AAAAAAAAAAI/AAAAAAAAAAc/s8gbjPiejos/photo.jpg?sz=128", "display_name": "fangxlmr", "link": "https://stackoverflow.com/users/11372883/fangxlmr"}, "is_accepted": false, "score": 0, "last_activity_date": 1598934005, "creation_date": 1598934005, "answer_id": 63681337, "question_id": 43646185, "link": "https://stackoverflow.com/questions/43646185/systemerror-built-in-function-xxx-iterator-returned-a-result-with-an-error-se/63681337#63681337", "title": "SystemError: &lt;built-in function xxx_iterator&gt; returned a result with an error set", "body": "<p>Though it's an old question relatively, but recently I encountered a similar issue (<code>&lt;built-in function delete_qpol_iterator_t&gt; returned a result with an error set</code>) while dealing with SELinux and setools in CentOS7 docker. Building and installing libsepol and libselinux from <a href=\"https://github.com/SELinuxProject/selinux\" rel=\"nofollow noreferrer\">source code</a> might solve the problem.</p>\n<p>So I guess updating relevant libs and other dependencies might be useful.</p>\n"}], "owner": {"reputation": 1109, "user_id": 1267255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iiQrb.jpg?s=128&g=1", "display_name": "Devan Williams", "link": "https://stackoverflow.com/users/1267255/devan-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 6764, "favorite_count": 0, "answer_count": 2, "score": 8, "last_activity_date": 1616306725, "creation_date": 1493249233, "last_edit_date": 1493399955, "question_id": 43646185, "link": "https://stackoverflow.com/questions/43646185/systemerror-built-in-function-xxx-iterator-returned-a-result-with-an-error-se", "title": "SystemError: &lt;built-in function xxx_iterator&gt; returned a result with an error set", "body": "<p>I'm trying to upgrade from:\nSWIG 2.0.11 and Python 2.7.12 to\nSWIG 3.0.12 and Python 3.6,\nbut I get the following exception when I run the tests on any iterator (automatically generated using %template):</p>\n\n<pre><code>SystemError: &lt;built-in function xxx_iterator&gt; returned a result with an error set\n</code></pre>\n\n<p>For example, even the simplest iteration fails:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"testRender.py\", line 459, in testRender\n    for v in vertices:\nFile \"ncore.py\", line 90833, in __iter__\n    return self.iterator()\nFile \"ncore.py\", line 90830, in iterator\n    return _ncore.Vertices_iterator(self)\nSystemError: &lt;built-in function Vertices_iterator&gt; returned a result with an error set\n</code></pre>\n\n<p>Any ideas?</p>\n\n<p>Again, this was all working great with SWIG 2.0.11 and Python 2.7.12....</p>\n\n<p><strong>Edit: Adding simpler example:</strong></p>\n\n<p>It could be ANY %template-generated iterator, so, for example, this template, defined in the .i file:</p>\n\n<pre><code>%template(Ints) std::list&lt;int&gt;;\n</code></pre>\n\n<p>will fail when using this simple code:</p>\n\n<pre><code>intsList = ncore.Ints()\nintsList.append(1)\nintsList.append(2)\nfor i in intsList:\n    print(i)\n</code></pre>\n\n<p>with a message similar to this:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"testRender.py\", line 459, in testRender\n    for i in intsList:\nFile \"ncore.py\", line 90833, in __iter__\n    return self.iterator()\nFile \"ncore.py\", line 90830, in iterator\n    return _ncore.Ints_iterator(self)\nSystemError: &lt;built-in function Ints_iterator&gt; returned a result with an error set\n</code></pre>\n"}, {"tags": ["python", "arrays", "matrix"], "comments": [{"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1493249018, "post_id": 43646141, "comment_id": 74340624, "body": "You probably don&#39;t need to convert to a list to do any post-processing, but anyway <code>R.tolist()</code> is probably what you&#39;re looking for."}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1493252339, "post_id": 43646141, "comment_id": 74341481, "body": "Nevermind, I misread your question. Fortunately the kind free code writers didn&#39;t disappoint."}, {"owner": {"reputation": 381, "user_id": 5175815, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/596390c0392ea7e6bfa947f8dd4052a7?s=128&d=identicon&r=PG", "display_name": "Brenton", "link": "https://stackoverflow.com/users/5175815/brenton"}, "reply_to_user": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1493254286, "post_id": 43646141, "comment_id": 74341923, "body": "@AndrasDeak It&#39;s alright. I appreciate though you showing me the tolist function since I&#39;ve never seen it before"}], "answers": [{"tags": [], "owner": {"reputation": 1442, "user_id": 4020610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LdgzYsM5kJw/AAAAAAAAAAI/AAAAAAAAH4E/Qase_JE27jE/photo.jpg?sz=128", "display_name": "Lohmar ASHAR", "link": "https://stackoverflow.com/users/4020610/lohmar-ashar"}, "is_accepted": false, "score": 0, "last_activity_date": 1493250085, "creation_date": 1493250085, "answer_id": 43646317, "question_id": 43646141, "link": "https://stackoverflow.com/questions/43646141/python-create-list-of-values-from-matrix/43646317#43646317", "title": "Python: create list of values from matrix", "body": "<pre><code>R = [ ... ] # Function list\nT = [ ... ] #\nL = []\nthreshold = 0.4\nfor r in R:\n    found = None\n    for t in T:\n        if r(t) &gt; threshold:\n            found = t\n            break\n    L.append(t)\n# L should have for each r (in R) the value of t (in T) when r(t) &gt; threshold, or None otherwise\n</code></pre>\n\n<p>if you need the \"t-index\" instead of the \"t-value\", look into <code>enumerate</code> and adapt the code</p>\n"}, {"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 0, "last_activity_date": 1493251287, "creation_date": 1493251287, "answer_id": 43646475, "question_id": 43646141, "link": "https://stackoverflow.com/questions/43646141/python-create-list-of-values-from-matrix/43646475#43646475", "title": "Python: create list of values from matrix", "body": "<p>Using numpy:</p>\n\n<pre><code>import numpy as np; np.random.seed(9)\n# input array\nR = np.random.randint(13,42, size=(4,6))\n# timestamps\nt = np.arange(0.,R.shape[1])\n#threshold array\nthresh = np.random.randint(13,42, size=R.shape[0])\n# create 2D array for timestamps along columns, threshold along rows\nT,Thresh = np.meshgrid(t,thresh)\n# set timestamps where R is smaller than thresh to nan\nT[R&lt;Thresh] = np.nan\n# from remaining timestamps get minimum\nv = np.nanmin(T, axis=1)\n\nprint R\nprint thresh\nprint v\n</code></pre>\n\n<p>prints </p>\n\n<pre><code>[[41 34 35 37 40 35]\n [14 35 33 40 21 39]\n [30 37 34 40 14 41]\n [13 41 27 40 37 23]]\n[37 23 41 37]\n[ 0.  1.  5.  1.]\n</code></pre>\n\n<p>e.g. in the first row, 41 is already bigger than threshold 37, so return value in <code>v</code> is 0; in the third row the last value actually matches the threshold, so return timestamp is 5. </p>\n"}, {"comments": [{"owner": {"reputation": 381, "user_id": 5175815, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/596390c0392ea7e6bfa947f8dd4052a7?s=128&d=identicon&r=PG", "display_name": "Brenton", "link": "https://stackoverflow.com/users/5175815/brenton"}, "edited": false, "score": 0, "creation_date": 1493253144, "post_id": 43646486, "comment_id": 74341659, "body": "Wow this is really nice, thank you! This question might be really stupid, but is there a way after you have the first_occurence term, to extract the second column of the times? I&#39;m wanting to do some statistical analysis with the column index"}, {"owner": {"reputation": 19758, "user_id": 1534017, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/aa667d0e455aa30f3410756d719de795?s=128&d=identicon&r=PG", "display_name": "Cleb", "link": "https://stackoverflow.com/users/1534017/cleb"}, "reply_to_user": {"reputation": 381, "user_id": 5175815, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/596390c0392ea7e6bfa947f8dd4052a7?s=128&d=identicon&r=PG", "display_name": "Brenton", "link": "https://stackoverflow.com/users/5175815/brenton"}, "edited": false, "score": 0, "creation_date": 1493253376, "post_id": 43646486, "comment_id": 74341707, "body": "@Brenton: Yes, see my edit. If the answer is helpful, please also upvote it :)"}, {"owner": {"reputation": 381, "user_id": 5175815, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/596390c0392ea7e6bfa947f8dd4052a7?s=128&d=identicon&r=PG", "display_name": "Brenton", "link": "https://stackoverflow.com/users/5175815/brenton"}, "edited": false, "score": 1, "creation_date": 1493253684, "post_id": 43646486, "comment_id": 74341795, "body": "This is awesome, thank you! This just saved me a lot of time towards finishing my degree haha"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1493283784, "post_id": 43646486, "comment_id": 74353900, "body": "Seems much more complicated than the pure numpy solution below."}], "tags": [], "owner": {"reputation": 19758, "user_id": 1534017, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/aa667d0e455aa30f3410756d719de795?s=128&d=identicon&r=PG", "display_name": "Cleb", "link": "https://stackoverflow.com/users/1534017/cleb"}, "is_accepted": true, "score": 1, "last_activity_date": 1493253331, "last_edit_date": 1493253331, "creation_date": 1493251386, "answer_id": 43646486, "question_id": 43646141, "link": "https://stackoverflow.com/questions/43646141/python-create-list-of-values-from-matrix/43646486#43646486", "title": "Python: create list of values from matrix", "body": "<p>The following should work:</p>\n\n<pre><code>import numpy as np\n\n# for reproducibility\nnp.random.seed(0)\nR = np.random.rand(10, 15)\n\n# your threshold\nval = 0.7\n</code></pre>\n\n<p>Now you can use <code>nonzero</code> to find the indexes of entries that are larger than this threshold:</p>\n\n<pre><code>a1, a2 = (R &gt; val).nonzero()\n</code></pre>\n\n<p>This can be combined to row-column-pairs (I removed a few to save space):</p>\n\n<pre><code>pairs = zip(a1, a2)\n\n[(0, 1),\n (0, 7),\n (0, 8),\n (0, 10),\n (0, 13),\n (1, 2),\n (1, 3),\n ...\n (7, 13),\n (8, 0),\n (8, 2),\n (9, 5),\n (9, 8),\n (9, 9),\n (9, 10),\n (9, 12),\n (9, 13),\n (9, 14)]\n</code></pre>\n\n<p>You always want to find only the first occurrence, so we check where the row index jumps:</p>\n\n<pre><code>target_indexes = np.where(np.diff(a1) &gt; 0)[0] + 1\n</code></pre>\n\n<p>As we then miss the first index, we add the index <code>0</code></p>\n\n<pre><code>target_indexes = np.insert(target_indexes, 0, 0)\n</code></pre>\n\n<p>Now we can just select all our indexes:</p>\n\n<pre><code>first_occurence = [pairs[ind] for ind in target_indexes]\n</code></pre>\n\n<p>In this case we would receive:</p>\n\n<pre><code>[(0, 1),\n (1, 2),\n (2, 1),\n (3, 7),\n (4, 6),\n (5, 14),\n (6, 3),\n (7, 4),\n (8, 0),\n (9, 5)]\n</code></pre>\n\n<p>whereby the first value of the tuple is the row and the second value is the column index.</p>\n\n<p>You can the extract the column index easily doing a list comprehension:</p>\n\n<pre><code>[pi[1] for pi in first_occurence]\n</code></pre>\n\n<p>which gives</p>\n\n<pre><code>[1, 2, 1, 7, 6, 14, 3, 4, 0, 5]\n</code></pre>\n"}], "owner": {"reputation": 381, "user_id": 5175815, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/596390c0392ea7e6bfa947f8dd4052a7?s=128&d=identicon&r=PG", "display_name": "Brenton", "link": "https://stackoverflow.com/users/5175815/brenton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 43646486, "answer_count": 3, "score": 1, "last_activity_date": 1493253331, "creation_date": 1493248942, "question_id": 43646141, "link": "https://stackoverflow.com/questions/43646141/python-create-list-of-values-from-matrix", "title": "Python: create list of values from matrix", "body": "<p>I'm doing some analysis of neuron synchronization in python, and I have a matrix that shows a synchronization value as a function of time, R(t), for multiple trials. My matrix therefore has the following look:</p>\n\n<p><a href=\"https://i.stack.imgur.com/elCxZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/elCxZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>The subscript on the R indicates the trial number, and the subscript on the t represents the time point. I would like to create an array (call it L) where the first entry in L is the first time when R1 reaches a certain value, the second entry in L is the first time when R2 reaches a certain value, and so forth. So for a more concrete example, let's say I have 10 trials and 15 time stamps:</p>\n\n<pre><code>import numpy as np\n\nR = np.random.rand(10,15)\nprint R\n</code></pre>\n\n<p>How would I go about creating my array L (which will be of length 10) from R so that I can record the first time that each row in R reaches a value greater than 0.4? I can then use this code with the data tables I have which are too big to post on stack overflow.</p>\n"}, {"tags": ["python", "interactive-brokers"], "answers": [{"comments": [{"owner": {"reputation": 15654, "user_id": 3427777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55ac35260cb2f2c116ad66d7b2d8e005?s=128&d=identicon&r=PG&f=1", "display_name": "fantabolous", "link": "https://stackoverflow.com/users/3427777/fantabolous"}, "edited": false, "score": 0, "creation_date": 1571992494, "post_id": 44491169, "comment_id": 103429414, "body": "This exits as soon as the queue is empty, so would require you to keep calling it in presumably an infinite loop."}], "tags": [], "owner": {"reputation": 1, "user_id": 6435910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a15a1e225c33be0145d5bc3045bb136c?s=128&d=identicon&r=PG&f=1", "display_name": "Qishen Ha", "link": "https://stackoverflow.com/users/6435910/qishen-ha"}, "is_accepted": false, "score": -1, "last_activity_date": 1497239523, "creation_date": 1497239523, "answer_id": 44491169, "question_id": 43646118, "link": "https://stackoverflow.com/questions/43646118/python-interactive-brokers-ib-api-very-very-slow/44491169#44491169", "title": "Python Interactive brokers IB API very very slow", "body": "<p><code>app.run()</code> is an infinite loop while <code>app.done == False</code>, but it do not stop immediately when <code>app.done</code> is set to True. (I don't know why).</p>\n\n<p>What I have done is to write a new method instead of using <code>app.run()</code>.</p>\n\n<p>Here's my solution:</p>\n\n<pre><code>import time\nfrom ibapi import (decoder, reader, comm)\n</code></pre>\n\n<p>and put this function into your Client Class.</p>\n\n<pre><code>def getMessage(self, wait=3):\n    # wait 3 secs for response to come in\n    time.sleep(wait)\n    # get everything in app.msg_queue\n    while not self.msg_queue.empty():\n        text = self.msg_queue.get(block=True, timeout=0.2)\n        fields = comm.read_fields(text)\n        self.decoder.interpret(fields)\n</code></pre>\n\n<p>the usage is simple. Just use <code>app.getMessage()</code> instead of <code>app.run()</code></p>\n"}, {"comments": [{"owner": {"reputation": 15654, "user_id": 3427777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55ac35260cb2f2c116ad66d7b2d8e005?s=128&d=identicon&r=PG&f=1", "display_name": "fantabolous", "link": "https://stackoverflow.com/users/3427777/fantabolous"}, "edited": false, "score": 0, "creation_date": 1571992839, "post_id": 44658587, "comment_id": 103429576, "body": "The latest version of the api (May 2019) no longer has a lock in <code>recvMsg</code>; it&#39;s only used in <code>sendMsg</code> which seems reasonable. The timeout is still 1s but absent the lock that shouldn&#39;t cause issues considering that <code>sendMsg</code> and <code>recvMsg</code> would typically be running in different threads."}], "tags": [], "owner": {"reputation": 36, "user_id": 5302758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2007d030cbab73e6838b57be5909376e?s=128&d=identicon&r=PG&f=1", "display_name": "BenM", "link": "https://stackoverflow.com/users/5302758/benm"}, "is_accepted": true, "score": 2, "last_activity_date": 1497976514, "creation_date": 1497976514, "answer_id": 44658587, "question_id": 43646118, "link": "https://stackoverflow.com/questions/43646118/python-interactive-brokers-ib-api-very-very-slow/44658587#44658587", "title": "Python Interactive brokers IB API very very slow", "body": "<p>I would recommend you modify the connection socket lock within the connection class in the ibapi module.  The recommendation came from heshiming on github; if you have access to the private interactive brokers repo you can access the discussion here <a href=\"https://github.com/InteractiveBrokers/tws-api/issues/464\" rel=\"nofollow noreferrer\">https://github.com/InteractiveBrokers/tws-api/issues/464</a></p>\n\n<p>I did this and it improved performance significantly.</p>\n\n<p>Heshiming recommends you reduce the timeout on the socket lock object, which is called every time you send or receive a message. \nTo modify the socket lock, Go to the site-packages folder for ibapi and modify the connect function within connection.py, changing \"self.socket.settimeout(1)\" to \"self.socket.settimeout(0.01)\". This is line 48 in connection.py for the version I have.</p>\n\n<p>In case you can't see heshiming's post, I've included it at the bottom of this post. </p>\n\n<p>Alternative Option: another interesting solution would be to leverage asyncio for an asynchronous event loop. I have not done this but it looks promising. See the example Ewald put together <a href=\"https://github.com/erdewit/tws_async\" rel=\"nofollow noreferrer\">https://github.com/erdewit/tws_async</a></p>\n\n<p>Heshiming Comment:</p>\n\n<blockquote>\n  <p>The implementation of Connection /ibapi/connection.py\n  has a Lock object shared in both sendMsg and recvMsg. Since connect,\n  self.socket.settimeout(1) is called, therefore the underlying\n  self.socket.recv(4096) only times out once per second.</p>\n  \n  <p>Such implementation creates a performance problem. Since the lock is\n  shared, the socket cannot send data while receiving. In the scenario\n  where the message received is less than 4k bytes long, the recvMsg\n  function will wait for 1 second before releasing the lock, making\n  subsequent sendMsg wait. In my experiment, most messages appear to be\n  shorter than 4k bytes. In other words, this imposes a cap of one\n  recvMsg per second.</p>\n  \n  <p>There are couple strategies to mitigate this. One can reduce the\n  receive buffer to a number much less than 4k, or reduce the socket\n  timeout to something like 0.001 second to make it block less.</p>\n  \n  <p>Or according to\n  <a href=\"http://stackoverflow.com/questions/1981372/are-parallel-calls-to-send-recv-on-the-same-socket-valid\">http://stackoverflow.com/questions/1981372/are-parallel-calls-to-send-recv-on-the-same-socket-valid</a>\n  , the socket itself is actually thread-safe. Thus no locks are\n  necessary.</p>\n  \n  <p>I tried all three strategies. Removing the lock works the best. And\n  reducing the timeout to 0.001 works in similar ways.</p>\n  \n  <p>I can only vouch for linux/unix platforms, and I haven't tried it on\n  Windows. Would you consider to change the implementation to improve\n  this?</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 15654, "user_id": 3427777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55ac35260cb2f2c116ad66d7b2d8e005?s=128&d=identicon&r=PG&f=1", "display_name": "fantabolous", "link": "https://stackoverflow.com/users/3427777/fantabolous"}, "is_accepted": false, "score": 0, "last_activity_date": 1571994009, "creation_date": 1571994009, "answer_id": 58555346, "question_id": 43646118, "link": "https://stackoverflow.com/questions/43646118/python-interactive-brokers-ib-api-very-very-slow/58555346#58555346", "title": "Python Interactive brokers IB API very very slow", "body": "<p>The current API (May 2019) has improved speed by removing the lock in <code>recvMsg</code> as @BenM proposed in his answer. However, it can still be slow depending on the type of request. </p>\n\n<p><strong>Removing most of their logging</strong> helped, presumably because some msg types are quite large. I initially tried filtering it out using the <code>logging</code> library, but flat-out removing the code worked better speed-wise, and I put this down to the extra processing required to generate the larger strings before even being passed to <code>logging</code>.</p>\n\n<p><strong>Replace Queue with deque</strong>: It might also be worth replacing the <code>Queue</code> in <code>client.py</code> with a <a href=\"https://docs.python.org/2/library/collections.html#deque-objects\" rel=\"nofollow noreferrer\">collections.deque</a> because <code>deque</code> is >10x faster. I've done this elsewhere for big speed ups but haven't gotten to it yet for this. <code>deque</code> should be thread-safe without locks the way it would be used here: \"Deques support thread-safe, memory efficient appends and pops from either side of the deque\" (from the docs).</p>\n\n<p><a href=\"https://stackoverflow.com/a/20330499/3427777\">Queue vs deque speed comparison</a></p>\n"}], "owner": {"reputation": 3802, "user_id": 4961888, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7371eb9208d7ada55f63d42cd324feb1?s=128&d=identicon&r=PG&f=1", "display_name": "jim basquiat", "link": "https://stackoverflow.com/users/4961888/jim-basquiat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2402, "favorite_count": 4, "accepted_answer_id": 44658587, "answer_count": 3, "score": 3, "last_activity_date": 1571994009, "creation_date": 1493248782, "last_edit_date": 1493249212, "question_id": 43646118, "link": "https://stackoverflow.com/questions/43646118/python-interactive-brokers-ib-api-very-very-slow", "title": "Python Interactive brokers IB API very very slow", "body": "<p>I am trying out the new Python Interactive Broker API, but I am experiencing some serious speed issues at the very first step...</p>\n\n<p>The following code  (see below) times </p>\n\n<p><code>0:00:08.832813</code> until the data is done being received</p>\n\n<p><code>0:00:36.000785</code> until the app is fully disconnected...</p>\n\n<p>Why is it so slow?\nWhat would be the best way to speed it up?</p>\n\n<pre><code>from ibapi import wrapper\nfrom ibapi.client import EClient\nfrom ibapi.utils import iswrapper #just for decorator\nfrom ibapi.common import *\nfrom ibapi.contract import *\nimport datetime\nfrom datetime import timedelta\n\n\nclass DataApp(wrapper.EWrapper, EClient):\n    def __init__(self):\n        wrapper.EWrapper.__init__(self)\n        EClient.__init__(self, wrapper=self)\n\n    @iswrapper\n    def historicalData(self, reqId: TickerId, date: str, open: float, high: float,\n                            low: float, close: float, volume: int, barCount: int,\n                            WAP: float, hasGaps: int):\n        super().historicalData(reqId, date, open, high, low, close, volume,\n                                barCount, WAP, hasGaps)\n        print(\"HistoricalData. \", reqId, \" Date:\", date, \"Open:\", open,\n               \"High:\", high, \"Low:\", low, \"Close:\", close, \"Volume:\", volume)\n\n    @iswrapper\n    def historicalDataEnd(self, reqId: int, start: str, end: str):\n        super().historicalDataEnd(reqId, start, end)\n        print(\"HistoricalDataEnd \", reqId, \"from\", start, \"to\", end)\n        print(datetime.datetime.now()-startime)\n        self.done = True # This ends the messages loop - this was not in the example code...\n\n    def get_data(self):        \n        self.connect(\"127.0.0.1\", 4002, clientId=10)\n        print(\"serverVersion:%s connectionTime:%s\" % (self.serverVersion(),\n                                                self.twsConnectionTime()))\n\n        cont = Contract()\n        cont.symbol = \"ES\"\n        cont.secType = \"FUT\"\n        cont.currency = \"USD\"\n        cont.exchange = \"GLOBEX\"\n        cont.lastTradeDateOrContractMonth = \"201706\"\n        self.reqHistoricalData(1, cont, datetime.datetime.now().strftime(\"%Y%m%d %H:%M:%S\"),\n                               \"1800 S\", \"30 mins\", \"TRADES\", 0, 1, [])\n        self.run()        \n        self.disconnect()\n        print(datetime.datetime.now()-startime)\n\nglobal starttime\nstartime = datetime.datetime.now()\nDA = DataApp()\nDA.get_data()\n</code></pre>\n\n<p>I also tried to continually run it is the background, in order to only submit requests on the fly with </p>\n\n<pre><code>def runMe():\n    app.run() # where run() has be removed from the class definition\n\nimport threading\nthread = threading.Thread(target = runMe)\nthread.start()\n</code></pre>\n\n<p>But it was also incredibly slow.\nAny suggestions appreciated</p>\n"}, {"tags": ["python", "matplotlib", "matplotlib-basemap", "python-3.6"], "answers": [{"comments": [{"owner": {"reputation": 453, "user_id": 7808713, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ddad79bce113d95e279f2b4e74f29752?s=128&d=identicon&r=PG", "display_name": "Elsa Li", "link": "https://stackoverflow.com/users/7808713/elsa-li"}, "edited": false, "score": 0, "creation_date": 1528984658, "post_id": 43657301, "comment_id": 88721075, "body": "Is it possible to reverse the color bar using dark green to indicate heavily populated areas? And vice versa. Thanks! @Serenity"}, {"owner": {"reputation": 28401, "user_id": 2666859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LtKyC.png?s=128&g=1", "display_name": "Serenity", "link": "https://stackoverflow.com/users/2666859/serenity"}, "edited": false, "score": 0, "creation_date": 1529844248, "post_id": 43657301, "comment_id": 89012759, "body": "A Colormap has reversed version, just add _r postfix to the colormap name"}], "tags": [], "owner": {"reputation": 28401, "user_id": 2666859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LtKyC.png?s=128&g=1", "display_name": "Serenity", "link": "https://stackoverflow.com/users/2666859/serenity"}, "is_accepted": true, "score": 6, "last_activity_date": 1493295109, "last_edit_date": 1493295109, "creation_date": 1493294735, "answer_id": 43657301, "question_id": 43646097, "link": "https://stackoverflow.com/questions/43646097/add-colorbar-for-polygones-in-basemap-plot-of-us/43657301#43657301", "title": "Add colorbar for polygones in basemap plot of US", "body": "<p>You have construct custom colorbar based on values of your density dict with <code>ColorbarBase</code> function. Values you have to convert via <code>ScalarMappable</code>. Look at the comments:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom mpl_toolkits.basemap import Basemap\nfrom matplotlib.colors import rgb2hex, Normalize\nfrom matplotlib.cm import ScalarMappable\nfrom matplotlib.patches import Polygon\nfrom matplotlib.colorbar import ColorbarBase\n\nm = Basemap(llcrnrlon=-119,llcrnrlat=22,urcrnrlon=-64,urcrnrlat=49,\n        projection='lcc',lat_1=33,lat_2=45,lon_0=-95)\nax = plt.gca() \nfig = plt.gcf()\nshp_info = m.readshapefile('st99_d00','states',drawbounds=True)\n\npopdensity = {'ALABAMA': 37,\n 'ALASKA': 1,\n 'ARIZONA': 161,\n 'ARKANSAS': 35,\n 'CALIFORNIA': 1854,\n 'COLORADO': 104,\n 'CONNECTICUT': 170,\n 'DELAWARE': 53,\n 'DISTRICT OF COLUMBIA': 83,\n 'FLORIDA': 364,\n 'GEORGIA': 350,\n 'HAWAII': 15,\n 'IDAHO': 16,\n 'ILLINOIS': 553,\n 'INDIANA': 109,\n 'IOWA': 60,\n 'KANSAS': 47,\n 'KENTUCKY': 50,\n 'LOUISIANA': 48,\n 'MAINE': 17,\n 'MARYLAND': 187,\n 'MASSACHUSETTS': 351,\n 'MICHIGAN': 260,\n 'MINNESOTA': 170,\n 'MISSISSIPPI': 16,\n 'MISSOURI': 119,\n 'NA': 11,\n 'NEBRASKA': 28,\n 'NEVADA': 21,\n 'NEW HAMPSHIRE': 32,\n 'NEW JERSEY': 676,\n 'NEW MEXICO': 20,\n 'NEW YORK': 993,\n 'NORTH CAROLINA': 266,\n 'NORTH DAKOTA': 5,\n 'OHIO': 271}\n\nnodata_color = \"darkorange\"\ncolors={}\nstatenames=[]\npatches = []\n\ncmap = plt.cm.summer\nvmin = min(popdensity.values()); vmax = max(popdensity.values())\nnorm = Normalize(vmin=vmin, vmax=vmax)\n# color mapper to covert values to colors\nmapper = ScalarMappable(norm=norm, cmap=cmap)\n\nfor shapedict in m.states_info:\n    statename = shapedict['NAME'].upper()\n    if statename in popdensity:\n        pop = popdensity[statename]\n        colors[statename] = mapper.to_rgba(pop)\n        statenames.append(statename)\n    else:\n        statenames.append(statename)\n        colors[statename] = nodata_color\n\nfor nshape,seg in enumerate(m.states):\n    color = rgb2hex(colors[statenames[nshape]]) \n    poly = Polygon(seg,facecolor=color,edgecolor=color)\n    if (colors[statenames[nshape]] == nodata_color):\n        p_no = poly\n    ax.add_patch(poly)\nplt.title('Filling State Polygons by Population Density')\n\n# put legend for no data states\nif p_no is not None:\n    plt.legend((p_no,), ('No data',))\n\n# construct custom colorbar\ncax = fig.add_axes([0.27, 0.1, 0.5, 0.05]) # posititon\ncb = ColorbarBase(cax,cmap=cmap,norm=norm, orientation='horizontal')\ncb.ax.set_xlabel('Population density of U.S.A.')\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/FgE1D.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/FgE1D.png\" alt=\"enter image description here\"></a></p>\n\n<p>I guess horizontal colorbar is more suitable for your map.</p>\n"}], "owner": {"reputation": 43, "user_id": 7928236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c9b075031bb6a3bcd04d3b33cda458e?s=128&d=identicon&r=PG&f=1", "display_name": "Piyush Agrawal", "link": "https://stackoverflow.com/users/7928236/piyush-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1326, "favorite_count": 1, "accepted_answer_id": 43657301, "answer_count": 1, "score": 4, "last_activity_date": 1493330068, "creation_date": 1493248718, "last_edit_date": 1493330068, "question_id": 43646097, "link": "https://stackoverflow.com/questions/43646097/add-colorbar-for-polygones-in-basemap-plot-of-us", "title": "Add colorbar for polygones in basemap plot of US", "body": "<p>Any help with drawing the colorbar for below code is highly appreciated. <a href=\"https://i.stack.imgur.com/zPTSx.png\" rel=\"nofollow noreferrer\">I want my figure to be like this</a></p>\n\n<p>I am using shape file along with below mentioned file to draw color map based on density available in the dictionary object.</p>\n\n<pre><code>            {'ALABAMA': 37,\n             'ALASKA': 1,\n             'ARIZONA': 161,\n             'ARKANSAS': 35,\n             'CALIFORNIA': 1854,\n             'COLORADO': 104,\n             'CONNECTICUT': 170,\n             'DELAWARE': 53,\n             'DISTRICT OF COLUMBIA': 83,\n             'FLORIDA': 364,\n             'GEORGIA': 350,\n             'HAWAII': 15,\n             'IDAHO': 16,\n             'ILLINOIS': 553,\n             'INDIANA': 109,\n             'IOWA': 60,\n             'KANSAS': 47,\n             'KENTUCKY': 50,\n             'LOUISIANA': 48,\n             'MAINE': 17,\n             'MARYLAND': 187,\n             'MASSACHUSETTS': 351,\n             'MICHIGAN': 260,\n             'MINNESOTA': 170,\n             'MISSISSIPPI': 16,\n             'MISSOURI': 119,\n             'NA': 11,\n             'NEBRASKA': 28,\n             'NEVADA': 21,\n             'NEW HAMPSHIRE': 32,\n             'NEW JERSEY': 676,\n             'NEW MEXICO': 20,\n             'NEW YORK': 993,\n             'NORTH CAROLINA': 266,\n             'NORTH DAKOTA': 5,\n             'OHIO': 271,\n             'OKLAHOMA': 32,\n             'OREGON': 77,\n             'PENNSYLVANIA': 367,\n             'PUERTO RICO': 5,\n             'RHODE ISLAND': 37,\n             'SOUTH CAROLINA': 40,\n             'SOUTH DAKOTA': 9,\n             'TENNESSEE': 95,\n             'TEXAS': 954,\n             'UTAH': 52,\n             'VERMONT': 10,\n             'VIRGINIA': 278,\n             'WASHINGTON': 351,\n             'WEST VIRGINIA': 10,\n             'WISCONSIN': 127,\n             'WYOMING': 3}\n</code></pre>\n\n<p>Here is my code </p>\n\n<pre><code>            import matplotlib as mpl\n            from matplotlib.collections import PatchCollection\n            fig,ax=plt.subplots()\n\n\n            m = Basemap(llcrnrlon=-119,llcrnrlat=22,urcrnrlon=-64,urcrnrlat=49,projection='lcc',lat_1=33,lat_2=45,lon_0=-95)\n            # draw state boundaries.\n\n            shp_info = m.readshapefile('st99_d00','states',drawbounds=True)\n\n\n            popdensity = top10states.set_index('STATES').to_dict()['NOOFAPPS']\n\n\n\n\n            # choose a color for each state based on population density.\n            legendcolor = []\n            colors={}\n            statenames=[]\n            patches = []\n\n            cmap = plt.cm.summer \n            vmin = min(top10states[\"NOOFAPPS\"])\n            vmax = max(top10states[\"NOOFAPPS\"]) \n\n            # norm = mpl.colors.Normalize(vmin=vmin, vmax=vmax, clip=False)\n            # mapper=mpl.cm.ScalarMappable(cmap=cmap)\n\n\n            for shapedict in m.states_info:\n                statename = shapedict['NAME'].upper()\n                if statename in popdensity:\n                    pop = popdensity[statename]\n                    colors[statename] = cmap(1.-np.sqrt((pop-vmin)/(vmax-vmin)))[:3]\n                    statenames.append(statename)\n                else:\n                    statenames.append(statename)\n                    colors[statename] = \"darkorange\"\n\n            ax = plt.gca() # get current axes instance\n            fig = plt.gcf()\n\n\n\n\n            for nshape,seg in enumerate(m.states):\n\n                color = rgb2hex(colors[statenames[nshape]]) \n                legendcolor.append(color)\n                poly = Polygon(seg,facecolor=color,edgecolor=color)\n                ax.add_patch(poly)\n                patches.append(poly)\n\n            mappble = plt.gci()\n\n            # p = PatchCollection(patches, cmap=cmap)\n            # p.set_array(np.array(legendcolor))\n            # cb1 = mpl.colorbar.ColorbarBase(fig,cmap=cmap,norm=norm,orientation=\"horizontal\")\n            # cb = fig.colorbar.ColorbarBase(fig,cmap=cmap,norm=norm,orientation=\"horizontal\")\n\n            # fig.colorbar.ColorbarBase(fig,cmap=cmap,norm=norm,orientation=\"horizontal\")\n            # map.colorbar(norm=norm)\n            plt.title('Filling State Polygons by Population Density')\n            plt.show()\n</code></pre>\n\n<p>I have tried few of the commented combinations and nothing seems to be working for me</p>\n"}, {"tags": ["python", "nlp", "nltk", "arabic", "lemmatization"], "comments": [{"owner": {"reputation": 4306, "user_id": 5992438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07146d8ff0b15449d848f2a928e5417d?s=128&d=identicon&r=PG&f=1", "display_name": "bunji", "link": "https://stackoverflow.com/users/5992438/bunji"}, "edited": false, "score": 0, "creation_date": 1493250237, "post_id": 43646077, "comment_id": 74340942, "body": "Wordnet lemmatizer does English only.  If you want to stick with nltk there is an arabic <a href=\"http://www.nltk.org/api/nltk.stem.html\" rel=\"nofollow noreferrer\">stemming package</a> available but if you want true lemmatization for arabic you might have to look elsewhere."}, {"owner": {"reputation": 1, "user_id": 5683294, "user_type": "registered", "profile_image": "https://graph.facebook.com/559180094231040/picture?type=large", "display_name": "noura_7ussein", "link": "https://stackoverflow.com/users/5683294/noura-7ussein"}, "reply_to_user": {"reputation": 4306, "user_id": 5992438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07146d8ff0b15449d848f2a928e5417d?s=128&d=identicon&r=PG&f=1", "display_name": "bunji", "link": "https://stackoverflow.com/users/5992438/bunji"}, "edited": false, "score": 0, "creation_date": 1493251739, "post_id": 43646077, "comment_id": 74341335, "body": "but When I using stemming for Arabic sometimes it returns meaningless words If I choose to do stemming for the file do you think it will affect  badly on the results   or can I get acceptable results I want to get the frequency of words in txt document I want to simplify words that related to each other to one word like &quot;\u0642\u0627\u062a\u0644 , \u064a\u0642\u062a\u0644\u0648\u0646 , \u0642\u0627\u062a\u0644\u0648\u0646,  \u0642\u0627\u062a\u0644&quot;  I want them to return the same word whatever it is right or wrong"}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1493290154, "post_id": 43646077, "comment_id": 74358359, "body": "@noura, take a few minutes to search in the nltk book (or source code) and find out how stemming and lemmatization algorithms work. Or take one minute to think about it. You can&#39;t use an English lemmatizer on Arabic, no matter how much you would like to have lemmatization available for your project."}, {"owner": {"reputation": 1, "user_id": 5683294, "user_type": "registered", "profile_image": "https://graph.facebook.com/559180094231040/picture?type=large", "display_name": "noura_7ussein", "link": "https://stackoverflow.com/users/5683294/noura-7ussein"}, "reply_to_user": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1493322158, "post_id": 43646077, "comment_id": 74380144, "body": "@alexis I tried to use stemming but it still give meaningless words it remove some letters from the root of the word and I want the root at least"}], "owner": {"reputation": 1, "user_id": 5683294, "user_type": "registered", "profile_image": "https://graph.facebook.com/559180094231040/picture?type=large", "display_name": "noura_7ussein", "link": "https://stackoverflow.com/users/5683294/noura-7ussein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 312, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493248611, "creation_date": 1493248611, "question_id": 43646077, "link": "https://stackoverflow.com/questions/43646077/how-can-lemmatize-arabic-text-using-its-pos-tags", "title": "How can lemmatize arabic text using its POS tags?", "body": "<p>when I use lemmatize for arabic the word dosn't change how can lemmatize arabic text using its <strong>POS</strong> tags?</p>\n\n<p><a href=\"https://i.stack.imgur.com/oWZVp.png\" rel=\"nofollow noreferrer\">the output I get</a></p>\n"}, {"tags": ["python", "proxy", "http-error"], "answers": [{"comments": [{"owner": {"reputation": 2280, "user_id": 4577493, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh5.googleusercontent.com/--CF2KIHKIF8/AAAAAAAAAAI/AAAAAAAAADg/C-yjnAN1v7Y/photo.jpg?sz=128", "display_name": "Carlos Carrizales", "link": "https://stackoverflow.com/users/4577493/carlos-carrizales"}, "edited": false, "score": 0, "creation_date": 1493264530, "post_id": 43646749, "comment_id": 74344527, "body": "thanks, that solve my problem, but it now returns a new response, i update the questions"}], "tags": [], "owner": {"reputation": 23, "user_id": 4186075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/149e3cf8d38414cc0b56b4b730be0199?s=128&d=identicon&r=PG&f=1", "display_name": "jerald", "link": "https://stackoverflow.com/users/4186075/jerald"}, "is_accepted": false, "score": 0, "last_activity_date": 1493253381, "creation_date": 1493253381, "answer_id": 43646749, "question_id": 43646042, "link": "https://stackoverflow.com/questions/43646042/error-200-python/43646749#43646749", "title": "Error 200 python", "body": "<p>Appears like server allows only GET / HEAD method. </p>\n\n<p>As you are using \"\" as your data it gets initiated using POST method. That's why you are probably receiving a method not allowed. </p>\n\n<p>Change the Request line as below and see the results:-</p>\n\n<p>req = urllib2.Request(site, None ,headers)</p>\n"}], "owner": {"reputation": 2280, "user_id": 4577493, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh5.googleusercontent.com/--CF2KIHKIF8/AAAAAAAAAAI/AAAAAAAAADg/C-yjnAN1v7Y/photo.jpg?sz=128", "display_name": "Carlos Carrizales", "link": "https://stackoverflow.com/users/4577493/carlos-carrizales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 800, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493264885, "creation_date": 1493248375, "last_edit_date": 1493264885, "question_id": 43646042, "link": "https://stackoverflow.com/questions/43646042/error-200-python", "title": "Error 200 python", "body": "<p>I'm trying to fetch html using a proxy, but the server returns 200</p>\n\n<p>EDIT:\nchange the <em>user-agent</em> and <em>request</em></p>\n\n<pre><code>def FindHtml(self, text):\n    site = text\n    #headers = {'User-agent' : 'Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.4; en-US; rv:1.9.2.2) Gecko/20100316 Firefox/3.6.2'}\n    headers = {'User-agent' : 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)'}\n    proxy_support = self.proxi()\n    opener = urllib2.build_opener(proxy_support, urllib2.HTTPHandler(debuglevel=1))\n    urllib2.install_opener(opener)\n    page=\"\"\n    #req = urllib2.Request(site, None,headers)\n    req = urllib2.Request(site, None,headers)\n    try:\n        page = urllib2.urlopen(req).read()\n    except urllib2.HTTPError, e:\n        print e.fp.read()\n    content = page\n    #print content\n    return content\n</code></pre>\n\n<p>the proxy is:</p>\n\n<pre><code>def proxi(self):\n    print \"proxy\"\n    n = random.randrange(0,1,1)\n    if n == 0:\n        print \"es 0 \"#52.183.30.241 8888\n        link = 'http://162.243.77.188:3128'\n    else:\n        if n == 1:\n            print \"es 1\" #54.183.3.46   80\n            link = 'http://47.88.85.75:80'\n    pro_s = urllib2.ProxyHandler({'http' : link })\n    return pro_s\n</code></pre>\n\n<p>the response:</p>\n\n<pre><code>send: u'GET http://mangadoor.com/manga/fairy-tail/521/1 HTTP/1.1\\r\\nAccept-Encoding: identity\\r\\nHost: mangadoor.com\\r\\nConnection: close\\r\\nUser-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)\\r\\n\\r\\n'\nreply: 'HTTP/1.1 200 OK\\r\\n'\nheader: Server: openresty/1.11.2.2\nheader: Date: Thu, 27 Apr 2017 03:46:00 GMT\nheader: Content-Type: text/html; charset=UTF-8\nheader: Transfer-Encoding: chunked\nheader: Connection: close\nheader: Set-Cookie: __cfduid=d4b16b5d5caac66c54bd9a278abd397771493264759; expires=Fri, 27-Apr-18 03:45:59 GMT; path=/; domain=.mangadoor.com; HttpOnly\nheader: X-Powered-By: PHP/5.6.30\nheader: Cache-Control: no-cache\nheader: Set-Cookie: laravel_session=eyJpdiI6IndYOVlINnZsNG9yaENrM21MODNmd0E9PSIsInZhbHVlIjoiYXVWRHRmQThwbTQ1UDJxM1o0cEdmbnVxVkxOYzdxRm9sTk1jZmRpVndRM1l3SVwveWRWWGMxSm5VNGpwbm8zWEV5TEFtRFdzNmJzSEF3R3Axd0ZCK0R3PT0iLCJtYWMiOiI1YmE0NDUwN2YxMzYwY2RlMzA1ZjYwMDg2MTQ1ZjczZTM0NTczOWY0NWNjYzU2NGExMjAxYWFmOTE1NGE4OGExIn0%3D; expires=Thu, 27-Apr-2017 05:45:59 GMT; Max-Age=7200; path=/; httponly\nheader: Vary: Accept-Encoding\nheader: CF-RAY: 355ecacc3584186a-EWR\n</code></pre>\n\n<p>What's the problem in my code?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 1, "creation_date": 1493248227, "post_id": 43645991, "comment_id": 74340391, "body": "You have an unclosed parens in the <code>u[0]=</code> line."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1493250853, "post_id": 43645991, "comment_id": 74341096, "body": "&quot;if I put this line as a comment the next line turns to have the syntax error.&quot;: which usually means to look at the line(s) <i>before</i> the line of interest."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1493250925, "post_id": 43645991, "comment_id": 74341119, "body": "Note: StackOverflow doesn&#39;t provide line numbers: please quote the relevant line, instead of stating &quot;line 56&quot;."}, {"owner": {"reputation": 11, "user_id": 7928143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75b6bd5c35ca77a7fd109cd143374bec?s=128&d=identicon&r=PG&f=1", "display_name": "LUIGGI", "link": "https://stackoverflow.com/users/7928143/luiggi"}, "edited": false, "score": 0, "creation_date": 1493253594, "post_id": 43645991, "comment_id": 74341768, "body": "Thanks to everybody, problem solved, so the syntax error was in the line above."}], "owner": {"reputation": 11, "user_id": 7928143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75b6bd5c35ca77a7fd109cd143374bec?s=128&d=identicon&r=PG&f=1", "display_name": "LUIGGI", "link": "https://stackoverflow.com/users/7928143/luiggi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493260577, "creation_date": 1493248101, "last_edit_date": 1493260577, "question_id": 43645991, "link": "https://stackoverflow.com/questions/43645991/syntax-error-in-burger-equation-code-for-python", "title": "Syntax error in Burger&#39; Equation code for Python", "body": "<p>I am using Python 2.7.13. Anaconda 4.3.1 (64 bits) in Ubuntu 16.10 with Python 2.7.12 Shell for coding the Burger's Equation part of the 12 steps to Navier Stokes in Computational Fluid Dynamics.</p>\n\n<p>Well, the code I am using is written below, in which I keep getting a syntax error in line 56, and if I put this line as a comment the next line turns to have the syntax error.</p>\n\n<pre><code>import numpy #bunch of useful matrix operations\nimport matplotlib.pyplot as plt # 2d plottin library\nimport sympy#symbolic math library for python\nfrom sympy import init_printing\ninit_printing(use_latex=True)\n#setting up symbolic variables for the three variables in our inicial condition\nx, nu, t = sympy.symbols('x nu t')\nfi=(sympy.exp(-(x-4*t)**2/(4*nu*(t+1)))+sympy.exp(-(x-4*t-2*numpy.pi)**2/(4*nu*(t+1))))\nfi\n#phi\n#partial derivative is a trivial task\nfiprima=fi.diff(x)\nfiprima\n#phiprime\n#to see the unrendered version\n#print(fiprima)\n#lambdify function, which takes a sympy symbolic equation and turns it into a callable function\nfrom sympy.utilities.lambdify import lambdify\nu=-2*nu*(fiprima/fi)+4\nu\n#we tell lambdify which variables to request and the function we want to plug them in to\nufunc=lambdify((t,x,nu),u)\nufunc(1,4,3)\n#back to burger equation\nnx=101#int(input('inserte el numero de puntos de la grilla:'))\nnlast=2*numpy.pi#float(input('inserte el tama\u00f1o del dominio:'))\ndx=nlast/(nx-1.)\nnt=100#int(input('inserte el numero de pasos de tiempo:'))\nnu=0.07#float(input('inserte el valor de la viscosidad cinematica:'))\ndt=dx*nu\n#defimos las condiciones iniciales\n#u=numpy.ones(nx)\nx=numpy.linspace(0,2*numpy.pi,nx)\nx\nun=numpy.empty(nx)\nun\n#iterative process\nfor i in range(nt+1):\n    if i==0:\n        plt.clf()\n        t=0\n        u=numpy.asarray([ufunc(t,x0,nu) for x0 in x])\n        plt.figure(figsize=(11,7),dpi=100)\n        ax=plt.axes(xlim=(0,nlast),ylim=(0,8))\n        plt.title('Burger Equation='+str(i))\n        plt.grid(True)\n        plt.plot(x,u,marker='o',lw=2)\n        plt.pause(0.01) \n    else:\n        un=u.copy()\n        plt.clf()\n        for j in range(1,nx-1):\n            u[j]=un[j]-un[j]*dt/dx*(un[j]-un[j-1])+nu*(dt/(dx**2))*(un[j+1]-2*un[j]+un[j-1])\n#periodic boundary condition\n        u[0]=un[0]-un[0]*dt/dx*(un[0]-un[-2]+nu*(dt/(dx**2))*(un[1]-2*un[0]+un[-2])\n        u[-1] = u[0]\n        u_analytical=numpy.asarray([ufunc(i*dt,xi,nu) for xi in x])\n        plt.figure(figsize=(11,7),dpi=100)\n        ax=plt.axes(xlim=(0,nlast),ylim=(0,8))\n        plt.title('Burger Equation='+str(i))\n        plt.grid(True)\n        plt.plot(x,u,marker='o',lw=2, label='Computational');\n        plt.plot(x,u_analytical, label='Analytical');\n        plt.legend();\n        plt.pause(0.01)\n</code></pre>\n\n<p>How can I solve it?</p>\n"}, {"tags": ["python", "django", "pagination", "django-rest-framework"], "answers": [{"comments": [{"owner": {"reputation": 1159, "user_id": 8023932, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NF2QULeXKmQ/AAAAAAAAAAI/AAAAAAAAAZA/Y6zJWFi6PWg/photo.jpg?sz=128", "display_name": "giveJob", "link": "https://stackoverflow.com/users/8023932/givejob"}, "edited": false, "score": 1, "creation_date": 1562234076, "post_id": 43647602, "comment_id": 100317902, "body": "@itts how to rename the previous to prev ?? Key name"}, {"owner": {"reputation": 762, "user_id": 570752, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/5f80e7ec4cc2c7c52218713a8f23b8cc?s=128&d=identicon&r=PG", "display_name": "DoRivard", "link": "https://stackoverflow.com/users/570752/dorivard"}, "reply_to_user": {"reputation": 1159, "user_id": 8023932, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NF2QULeXKmQ/AAAAAAAAAAI/AAAAAAAAAZA/Y6zJWFi6PWg/photo.jpg?sz=128", "display_name": "giveJob", "link": "https://stackoverflow.com/users/8023932/givejob"}, "edited": false, "score": 0, "creation_date": 1609945705, "post_id": 43647602, "comment_id": 115979636, "body": "@giveJob To rename to previous override the function get_paginated_response like : <code>def get_paginated_response(self, data):         return Response(OrderedDict([             (&#39;count&#39;, self.page.paginator.count),             (&#39;next&#39;, self.get_next_link()),             (&#39;prev&#39;, self.get_previous_link()),             (&#39;results&#39;, data)         ]))</code>"}], "tags": [], "owner": {"reputation": 17195, "user_id": 2303610, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/09a878923ff2d6258a9f5a1c5deec5eb?s=128&d=identicon&r=PG", "display_name": "ittus", "link": "https://stackoverflow.com/users/2303610/ittus"}, "is_accepted": true, "score": 5, "last_activity_date": 1493259608, "creation_date": 1493259608, "answer_id": 43647602, "question_id": 43645889, "link": "https://stackoverflow.com/questions/43645889/django-rest-pagenumber-pagination/43647602#43647602", "title": "Django rest PageNumber Pagination", "body": "<p>You can override <code>get_next_link</code> and <code>get_previous_link</code> of PageNumberPagination\nDefault is:</p>\n\n<pre><code>   def get_next_link(self):\n        if not self.page.has_next():\n            return None\n        url = self.request.build_absolute_uri()\n        page_number = self.page.next_page_number()\n        return replace_query_param(url, self.page_query_param, page_number)\n\n    def get_previous_link(self):\n        if not self.page.has_previous():\n            return None\n        url = self.request.build_absolute_uri()\n        page_number = self.page.previous_page_number()\n        if page_number == 1:\n            return remove_query_param(url, self.page_query_param)\n        return replace_query_param(url, self.page_query_param, page_number)\n</code></pre>\n\n<p>You can override:</p>\n\n<pre><code>class StandardResultsSetPagination(PageNumberPagination):\n    page_size = 100\n    page_size_query_param = 'page_size'\n    max_page_size = 1000\n\n    def get_next_link(self):\n        if not self.page.has_next():\n            return None\n        page_number = self.page.next_page_number()\n        return page_number\n\n    def get_previous_link(self):\n        if not self.page.has_previous():\n            return None\n        page_number = self.page.previous_page_number()\n        return page_number\n</code></pre>\n"}], "owner": {"reputation": 2382, "user_id": 2370400, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5a0796d3f5a35d57f483d7d13d884007?s=128&d=identicon&r=PG", "display_name": "Pablo Estrada", "link": "https://stackoverflow.com/users/2370400/pablo-estrada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1338, "favorite_count": 1, "accepted_answer_id": 43647602, "answer_count": 1, "score": 2, "last_activity_date": 1612881651, "creation_date": 1493247522, "question_id": 43645889, "link": "https://stackoverflow.com/questions/43645889/django-rest-pagenumber-pagination", "title": "Django rest PageNumber Pagination", "body": "<p>I have a simple Pagination class of the django rest framework:</p>\n\n<pre><code>class StandardResultsSetPagination(PageNumberPagination):\n    page_size = 100\n    page_size_query_param = 'page_size'\n    max_page_size = 1000\n\n# Create your views here.\nclass ResultSet(generics.ListAPIView):\n    queryset = Result.objects.all()\n    serializer_class = ResultSetSerializer\n    pagination_class = StandardResultsSetPagination\n</code></pre>\n\n<p>This class currently returns a dict with <code>'prev'</code> and <code>'next'</code> keys that contains a URL with the next page and prev page. What I would like to achieve is that the <code>'prev'</code> and <code>'next'</code> return just the page number instead of the whole URL.</p>\n\n<p>How can I achieve this?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1493248870, "post_id": 43645870, "comment_id": 74340577, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem.   We should be able to paste your given code into a text file and reproduce the problem."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1493248971, "post_id": 43645870, "comment_id": 74340605, "body": "First of all, you never save the original value of the global variable.  Second, you specifically set it to <b>None</b>, but immediately overwrite that value with the next iteration&#39;s call to <b>locateOnScreen</b>.  Since you haven&#39;t bothered to show us the output you get, we don&#39;t have enough clues to work."}, {"owner": {"reputation": 539, "user_id": 3281831, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100002645507135/picture?type=large", "display_name": "user3281831", "link": "https://stackoverflow.com/users/3281831/user3281831"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1493288646, "post_id": 43645870, "comment_id": 74357378, "body": "Ok sorry, there was actually nothing wrong in the code, just the image was somewhere I could not see it but pyautogui could so I thought the code is wrong, thanks for help."}], "owner": {"reputation": 539, "user_id": 3281831, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100002645507135/picture?type=large", "display_name": "user3281831", "link": "https://stackoverflow.com/users/3281831/user3281831"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493247423, "creation_date": 1493247423, "question_id": 43645870, "link": "https://stackoverflow.com/questions/43645870/how-to-set-variable-back-to-original-in-python-loop", "title": "How to set variable back to original in python loop", "body": "<p>I use python with selenium and pyautogui for image recognition. In this code I'm looping image searching, when the image is on screen it should type Hi and then wait 20 seconds and set the variable back to original value,then search for the image again. It works except it does not set the variable to original again and keeps writing Hi even the image is not on screen. Thanks for any help.</p>\n\n<pre><code>    for i in range(0,20000):\n    time.sleep(2)\n    global enjoy1\n    enjoy1 = pyautogui.locateOnScreen('images/enjoy.png')\n    enjoy1\n    print(enjoy1)\n    if enjoy1 == None:\n        print(\"it is None\")\n    else:\n        pyautogui.click(856, 816)\n        pyautogui.typewrite('Hi') \n        pyautogui.click(1184, 816)\n        time.sleep(20)\n        enjoy1 = None\n</code></pre>\n"}, {"tags": ["javascript", "python", "html", "flask", "request"], "comments": [{"owner": {"reputation": 5130, "user_id": 1443478, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4J9cr.jpg?s=128&g=1", "display_name": "Brennan", "link": "https://stackoverflow.com/users/1443478/brennan"}, "edited": false, "score": 0, "creation_date": 1493247249, "post_id": 43645790, "comment_id": 74340038, "body": "This question is too broad. Learn how to create a minimal Flask application (great guide here: <a href=\"http://flask.pocoo.org/docs/0.12/quickstart/\" rel=\"nofollow noreferrer\">flask.pocoo.org/docs/0.12/quickstart</a>) and then learn how to pass parameters to a Flask endpoint."}, {"owner": {"reputation": 519, "user_id": 9537542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8c8317e666cc926c784900defea51fd?s=128&d=identicon&r=PG&f=1", "display_name": "hypothesis", "link": "https://stackoverflow.com/users/9537542/hypothesis"}, "edited": false, "score": 1, "creation_date": 1593798781, "post_id": 43645790, "comment_id": 110914785, "body": "I find it unfortunate that this question was closed. I&#39;ve used flask for simple setups before but the GET/POST stuff was still confusing to me. The provided answer below was incredibly useful. I wish I could contribute my as-simple-as-possible version for others to get started."}], "answers": [{"comments": [{"owner": {"reputation": 718, "user_id": 7828747, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-rpAHEAvybg4/AAAAAAAAAAI/AAAAAAAAQ_k/kPewVmIP2ww/photo.jpg?sz=128", "display_name": "Emac", "link": "https://stackoverflow.com/users/7828747/emac"}, "edited": false, "score": 1, "creation_date": 1534783479, "post_id": 43646382, "comment_id": 90820411, "body": "I am in the same boat as the OP where I am struggling to figure out how to pass a variable from JS to Flask, and I understand you can&#39;t but there&#39;s work-arounds. All the work-around explanations seem confusing for me, but I mostly followed along here, but I get lost at the &quot;return jsonify(data)&quot; part. I&#39;m looking to return results from a database, and I just want to get the parameters for what to query from JS."}], "tags": [], "owner": {"reputation": 81, "user_id": 7878712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2319cfb824d12d5ff3bc3b1a9ad08c11?s=128&d=identicon&r=PG&f=1", "display_name": "Kashim Aziz", "link": "https://stackoverflow.com/users/7878712/kashim-aziz"}, "is_accepted": false, "score": 8, "last_activity_date": 1587117358, "last_edit_date": 1587117358, "creation_date": 1493250719, "answer_id": 43646382, "question_id": 43645790, "link": "https://stackoverflow.com/questions/43645790/passing-javascript-variable-to-python-flask/43646382#43646382", "title": "Passing Javascript Variable to Python Flask", "body": "<p>How I did this was using an ajax request from the javascript which would look something like this. I think the easiest way would be using JQuery as well since it might be a bit more verbose with pure javascript.</p>\n\n<pre><code>// some movie data\nvar movies = {\n    'title': movie_title,\n    'release_date': movie_release_date\n    }\n\n$.ajax({\nurl: Flask.url_for('my_function'),\ntype: 'POST',\ndata: JSON.stringify(movies),   // converts js value to JSON string\n})\n.done(function(result){     // on success get the return object from server\n    console.log(result)     // do whatever with it. In this case see it in console\n})\n</code></pre>\n\n<p>Flask.url requires JSGlue which basically let's you use Flask's \nurl_for but with javascript. Look it up, easy install and usage. Otherwise I think you could just replace it with the url e.g '/function_url'</p>\n\n<p>Then on the server side you might have something like this:</p>\n\n<pre><code>from flask import request, jsonify, render_template\nimport sys\n\n@app.route(\"/function_route\", methods=[\"GET\", \"POST\"])\ndef my_function():\n    if request.method == \"POST\":\n        data = {}    // empty dict to store data\n        data['title'] = request.json['title']\n        data['release_date'] = request.json['movie_release_date']\n\n       // do whatever you want with the data here e.g look up in database or something\n       // if you want to print to console\n\n        print(data, file=sys.stderr)\n\n        // then return something back to frontend on success\n\n        // this returns back received data and you should see it in browser console\n        // because of the console.log() in the script.\n        return jsonify(data)\n    else:\n        return render_template('the_page_i_was_on.html')\n</code></pre>\n\n<p>I think the main points are to look up ajax requests in jquery, flask's request.json() and jsonify() functions.</p>\n\n<p>Edit: Corrected syntax</p>\n"}], "owner": {"reputation": 71, "user_id": 7476737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c8b247dfc056b7fe106f90acefb1dc7?s=128&d=identicon&r=PG&f=1", "display_name": "T.coder", "link": "https://stackoverflow.com/users/7476737/t-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12971, "favorite_count": 0, "closed_date": 1493263698, "answer_count": 1, "score": 5, "last_activity_date": 1587117358, "creation_date": 1493246888, "question_id": 43645790, "link": "https://stackoverflow.com/questions/43645790/passing-javascript-variable-to-python-flask", "closed_reason": "Duplicate", "title": "Passing Javascript Variable to Python Flask", "body": "<p>I have read several postings on different examples for passing a javascript variable to flask through post/get forms. I still don't understand how to do this. From my understanding, the form creates a post/get that can then be called and received by the python flask script. Can someone write up a very simple example on what this should look like?</p>\n\n<p>Starting from creating a variable with any value in javascript and then making the post/get. Lastly what should the receiving end on python should look like and finally print the variable from python.</p>\n"}, {"tags": ["python", "numpy", "matrix", "vector"], "answers": [{"comments": [{"owner": {"reputation": 609, "user_id": 6168921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d3fbf944304aae21d6513938cfbadb35?s=128&d=identicon&r=PG&f=1", "display_name": "DavidC.", "link": "https://stackoverflow.com/users/6168921/davidc"}, "edited": false, "score": 0, "creation_date": 1493297204, "post_id": 43645865, "comment_id": 74363765, "body": "You are completely right.... See the edit, I have derived the proper equation, so that the (8*pi**3) arises naturally. Let me know if you have some concerns with the derivation, I think that the vector quadruple product rule has to be applied."}], "tags": [], "owner": {"reputation": 15962, "user_id": 7214344, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/09fedcad60ad0dba2834ffffdd52f686?s=128&d=identicon&r=PG&f=1", "display_name": "Miriam Farber", "link": "https://stackoverflow.com/users/7214344/miriam-farber"}, "is_accepted": true, "score": 1, "last_activity_date": 1493247400, "creation_date": 1493247400, "answer_id": 43645865, "question_id": 43645776, "link": "https://stackoverflow.com/questions/43645776/python-program-to-operate-with-matrices-and-vector-cross-product/43645865#43645865", "title": "Python program to operate with matrices and vector cross product", "body": "<p>What you should have is <code>1/V_a=V_b/(8*pi**3)</code> and not <code>1/V_a=V_b</code> (as you ignored the <code>2*pi</code> in your last equation in the printscreen), and the former indeed holds when you run the code.</p>\n"}], "owner": {"reputation": 609, "user_id": 6168921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d3fbf944304aae21d6513938cfbadb35?s=128&d=identicon&r=PG&f=1", "display_name": "DavidC.", "link": "https://stackoverflow.com/users/6168921/davidc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "accepted_answer_id": 43645865, "answer_count": 1, "score": 1, "last_activity_date": 1493297198, "creation_date": 1493246817, "last_edit_date": 1493297198, "question_id": 43645776, "link": "https://stackoverflow.com/questions/43645776/python-program-to-operate-with-matrices-and-vector-cross-product", "title": "Python program to operate with matrices and vector cross product", "body": "<p>I have written a python program that, \ngiven a matrix <code>a</code> of 3 vectors <code>a1</code>, <code>a2</code>, <code>a3</code>,  it calculates a matrix <code>b</code> of 3 vectors <code>b1</code>, <code>b2</code>, <code>b3</code> in the following way:</p>\n\n<p><a href=\"https://i.stack.imgur.com/kV4KO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kV4KO.png\" alt=\"enter image description here\"></a></p>\n\n<p>The triple product (in the denominator) is just the determinant.</p>\n\n<p>In order to check if the program is working, this relation has to be satisfied:</p>\n\n<p><a href=\"https://i.stack.imgur.com/trizI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/trizI.png\" alt=\"enter image description here\"></a></p>\n\n<p>In other words:</p>\n\n<p><code>det(b) = 1/det(a)</code></p>\n\n<p>In the program I have carefully used <code>cross</code> and np <code>array</code>. However, it does not satisfy the above relation:</p>\n\n<pre><code>import numpy as np\nfrom numpy import pi as pi\n\n# 'a' matrix:\na = np.array([[ 0.291761097764E+01 , 0.000000000000E+00 , 0.574463427333E+01  ],\n              [ -0.145880548882E+01 , 0.252672522500E+01 , 0.574463427333E+01  ],\n              [ -0.145880548882E+01 ,-0.252672522500E+01 , 0.574463427333E+01  ]])\n\n# 'a' vectors:\na_1 = [ 0.291761097764E+01 , 0.000000000000E+00 , 0.574463427333E+01  ]\na_2 = [ -0.145880548882E+01 , 0.252672522500E+01 , 0.574463427333E+01  ]\na_3 = [ -0.145880548882E+01 ,-0.252672522500E+01 , 0.574463427333E+01  ]\n\n# volume of 'a' matrix:\nV_a = np.linalg.det(a)\nprint 'V_a = ', V_a\n\ncte = (2*pi)/V_a\n\nVEC_1 = np.cross(a_2, a_3)\nVEC_2 = np.cross(a_3, a_1)\nVEC_3 = np.cross(a_1, a_2)\n\n# calculation of 'b' vectors:\nb_1 = cte * VEC_1\nb_2 = cte * VEC_2\nb_3 = cte * VEC_3\n\nprint  'b_1 = ',  b_1\nprint  'b_2 = ',  b_2\nprint  'b_3 = ',  b_3\n\n# building 'b' matrix:\nb = np.vstack ([  b_1 , b_2,  b_3 ])\nprint 'b = ', b\n\n# volume of 'b' matrix:\nV_b = np.linalg.det(b)\nprint 'V_b = ', V_b\nprint \"1/V_a = \", 1/V_a\n\nprint \"1/V_a should be equal to V_b; however, we do not get this equality\"\n</code></pre>\n\n<p><strong>EDIT</strong>: The last equation shown is not correct. The following shall be more exact:</p>\n\n<p><a href=\"https://i.stack.imgur.com/DV5vS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DV5vS.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "csv", "pandas"], "comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1493247686, "post_id": 43645765, "comment_id": 74340195, "body": "This is because of the code you used to import and likely the separator you used.  Please include the code you used to import."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1493405593, "post_id": 43645765, "comment_id": 74420218, "body": "Feel free to upvote as well. Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 0, "last_activity_date": 1493253439, "creation_date": 1493253439, "answer_id": 43646757, "question_id": 43645765, "link": "https://stackoverflow.com/questions/43645765/columns-changing-order-after-opening-csv-with-pandas/43646757#43646757", "title": "columns changing order after opening csv with pandas", "body": "<p><strong><em>Example 1</em></strong>  </p>\n\n<pre><code>from io import StringIO\nimport pandas as pd\n\ntxt = \"\"\"Raw Filtered\n0.702 1.\n0.790 1.\n0.877 1.\n0.771 1.\"\"\"\n\npd.read_csv(StringIO(txt), sep=' ')\n\n     Raw  Filtered\n0  0.702       1.0\n1  0.790       1.0\n2  0.877       1.0\n3  0.771       1.0\n</code></pre>\n\n<p><strong><em>Example 2</em></strong><br>\n<em>Include some inconvenient spaces <code>' '</code></em>  </p>\n\n<pre><code>from io import StringIO\nimport pandas as pd\n\ntxt = \"\"\"  Raw Filtered\n 0.702 1.\n 0.790 1.\n 0.877 1.\n 0.771 1.\"\"\"\n\npd.read_csv(StringIO(txt), sep=' ')\n\n   Unnamed: 0  Unnamed: 1  Raw  Filtered\n0         NaN       0.702  1.0       NaN\n1         NaN       0.790  1.0       NaN\n2         NaN       0.877  1.0       NaN\n3         NaN       0.771  1.0       NaN\n</code></pre>\n\n<p><strong><em>Example 3</em></strong><br>\n<em>Same inconvenient spaces but with a different import</em>  </p>\n\n<pre><code>from io import StringIO\nimport pandas as pd\n\ntxt = \"\"\"  Raw Filtered\n 0.702 1.\n 0.790 1.\n 0.877 1.\n 0.771 1.\"\"\"\n\nprint(pd.read_csv(StringIO(txt), delim_whitespace=True))\n\n     Raw  Filtered\n0  0.702       1.0\n1  0.790       1.0\n2  0.877       1.0\n3  0.771       1.0\n</code></pre>\n"}], "owner": {"reputation": 601, "user_id": 7777625, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/500f4f6dc5222acc63e9042640c824a7?s=128&d=identicon&r=PG&f=1", "display_name": "Marcos Santana", "link": "https://stackoverflow.com/users/7777625/marcos-santana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 43646757, "answer_count": 1, "score": 1, "last_activity_date": 1493253439, "creation_date": 1493246770, "last_edit_date": 1493246905, "question_id": 43645765, "link": "https://stackoverflow.com/questions/43645765/columns-changing-order-after-opening-csv-with-pandas", "title": "columns changing order after opening csv with pandas", "body": "<p>I wrote code to open and get some data from a csv file with pandas.\nHowever, when i tried to open a similar file (just different data), two columns\nchanged place. \nLike this:</p>\n\n<pre><code>   Unnamed: 30  Unnamed: 31    Raw    Filtered  \n0  NaN          0.702          1.0    NaN  \n1  NaN          0.790          1.0    NaN  \n2  NaN          0.877          1.0    NaN  \n3  NaN          0.771          1.0    NaN \n</code></pre>\n\n<p>The correct input should be:</p>\n\n<pre><code>   Raw    Filtered  \n0  0.702  1.0                 \n1  0.790  1.0\n2  0.877  1.0\n3  0.771  1.0\n</code></pre>\n\n<p>How can I solve this?</p>\n"}, {"tags": ["python", "python-2.7", "list", "python-3.x", "tuples"], "answers": [{"tags": [], "owner": {"reputation": 38676, "user_id": 227884, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/L7EG1.png?s=128&g=1", "display_name": "UltraInstinct", "link": "https://stackoverflow.com/users/227884/ultrainstinct"}, "is_accepted": true, "score": 2, "last_activity_date": 1493246997, "creation_date": 1493246997, "answer_id": 43645804, "question_id": 43645754, "link": "https://stackoverflow.com/questions/43645754/how-to-use-map-function-on-a-list-which-contains-tuples-as-elements/43645804#43645804", "title": "How to use map function on a list which contains tuples as elements?", "body": "<p>Python's <code>map(..)</code> treats the first argument as a function (callable) and in each invocation it passes one element of the second argument (which it iterates over). With that in mind, you have to make the following fix:</p>\n\n<p>Remove variable arguments, and accept a list instead:</p>\n\n<pre><code>def decision(sm):  #Remove '*'\n</code></pre>\n"}], "owner": {"reputation": 110, "user_id": 2650871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76846518a2c7a2226c6a67644cecc375?s=128&d=identicon&r=PG", "display_name": "Sayed Ahmad", "link": "https://stackoverflow.com/users/2650871/sayed-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2063, "favorite_count": 0, "accepted_answer_id": 43645804, "answer_count": 1, "score": 0, "last_activity_date": 1493246997, "creation_date": 1493246738, "last_edit_date": 1493246947, "question_id": 43645754, "link": "https://stackoverflow.com/questions/43645754/how-to-use-map-function-on-a-list-which-contains-tuples-as-elements", "title": "How to use map function on a list which contains tuples as elements?", "body": "<p>I am trying to use map function on a list of tuples. each tuple has three elements and I want to test each element in the tuple with nested if as follow. </p>\n\n<pre><code>def decision(*sm):\n    smoker=sm[0]\n    age=sm[1]\n    diet=sm[2]\n    if smoker==\"yes\":\n        if age&lt;29.5:\n            return \"less risk\"\n        elif age&gt;29.5:\n            return \"more risk\"\n    elif smoker==\"no\":\n        if diet==\"good\":\n            return \"less risk\"\n        elif diet==\"poor\":\n            return \"more risk\" \n\nhealth=[('yes', 21, 'poor'), ('no', 50, 'good')]\nprint list(map(decision,health))\n</code></pre>\n\n<p>It gives error <code>tuple index out of range</code>.</p>\n"}, {"tags": ["python", "api", "mobile", "twilio", "mms"], "comments": [{"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1493300280, "post_id": 43645723, "comment_id": 74366117, "body": "What error are you getting from that code?"}, {"owner": {"reputation": 239, "user_id": 190248, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bea338c43c372e0a1d2a3ba8a387dbe6?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/190248/mark"}, "reply_to_user": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1493302995, "post_id": 43645723, "comment_id": 74368149, "body": "That&#39;s the thing.  I don&#39;t get an error, I just keep getting in this URI loop and never actually get to a place that I can download a photo.  No errors, just confusing."}, {"owner": {"reputation": 239, "user_id": 190248, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bea338c43c372e0a1d2a3ba8a387dbe6?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/190248/mark"}, "reply_to_user": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1493303746, "post_id": 43645723, "comment_id": 74368681, "body": "The above code returns a bunch of MediaInstance objects: &lt;Twilio.Api.V2010.MediaInstance message_sid=MMxxxxxxx sid=MExxxxxxx account_sid=ACxxxxxxxx&gt;"}, {"owner": {"reputation": 239, "user_id": 190248, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bea338c43c372e0a1d2a3ba8a387dbe6?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/190248/mark"}, "reply_to_user": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1493304475, "post_id": 43645723, "comment_id": 74369218, "body": "Those objects have a uri and when I call it I get  `` {u&#39;parent_sid&#39;: u&#39;MMxxxxx&#39;, u&#39;date_updated&#39;: u&#39;Wed, 26 Apr 2017 21:20:30 +0000&#39;, u&#39;uri&#39;: u&#39;/2010-04-01/Accounts/ACdxxxxx/Messages/MMxxxxx/Media/MExxx&zwnj;&#8203;xx.json&#39;, u&#39;account_sid&#39;: u&#39;ACxxxxx4&#39;, u&#39;content_type&#39;: u&#39;image/jpeg&#39;, u&#39;sid&#39;: u&#39;MExxxxx4&#39;, u&#39;date_created&#39;: u&#39;Wed, 26 Apr 2017 21:20:30 +0000&#39;}``"}], "answers": [{"comments": [{"owner": {"reputation": 239, "user_id": 190248, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bea338c43c372e0a1d2a3ba8a387dbe6?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/190248/mark"}, "edited": false, "score": 0, "creation_date": 1493311841, "post_id": 43661871, "comment_id": 74374307, "body": "You put the angel in evangelist!  Thanks so much; exactly the solution!"}, {"owner": {"reputation": 113, "user_id": 9454113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3mvlv466AVw/AAAAAAAAAAI/AAAAAAAAAOs/MPwZDFJcO1M/photo.jpg?sz=128", "display_name": "PatMcClellan__c", "link": "https://stackoverflow.com/users/9454113/patmcclellan-c"}, "edited": false, "score": 0, "creation_date": 1543271321, "post_id": 43661871, "comment_id": 93850124, "body": "@philnash That&#39;s not working for me. I&#39;m using the MediaUrl with no extension and it keeps sending me xml. Can&#39;t ever get to the actual image."}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1543346261, "post_id": 43661871, "comment_id": 93883033, "body": "Not sure what&#39;s going on for you but maybe check this blog post for better detail than I have in this answer: <a href=\"https://www.twilio.com/blog/2018/05/how-to-receive-and-download-picture-messages-in-python-with-twilio-mms.html\" rel=\"nofollow noreferrer\">twilio.com/blog/2018/05/&hellip;</a>"}], "tags": [], "owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "is_accepted": true, "score": 1, "last_activity_date": 1493306517, "creation_date": 1493306517, "answer_id": 43661871, "question_id": 43645723, "link": "https://stackoverflow.com/questions/43645723/downloading-media-files-from-twilio-in-python/43661871#43661871", "title": "Downloading media files from Twilio in Python", "body": "<p>Twilio developer evangelist here.</p>\n\n<p>When you get the Media URI from the helper library, it is the json representation of the resource and ends in .json. To get the raw resource you need only to strip the .json extension. You can use that URL to download the image.</p>\n"}], "owner": {"reputation": 239, "user_id": 190248, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bea338c43c372e0a1d2a3ba8a387dbe6?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/190248/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 0, "accepted_answer_id": 43661871, "answer_count": 1, "score": 0, "last_activity_date": 1493311956, "creation_date": 1493246578, "last_edit_date": 1493311956, "question_id": 43645723, "link": "https://stackoverflow.com/questions/43645723/downloading-media-files-from-twilio-in-python", "title": "Downloading media files from Twilio in Python", "body": "<p>I'm trying to download all the media that is sent to my Twilio account and cannot for the life of me figure out how to access the actual images.</p>\n\n<pre><code>from twilio.rest import Client\nimport requests\nfrom operator import itemgetter\nimport json\n\nACCOUNT_SID = \"xxxxxxx\"\nAUTH_TOKEN = \"xxxxxxxx\"\n\nclient = Client(ACCOUNT_SID, AUTH_TOKEN)\n\n\n# builds a list of messages and media uris\nmessages = client.messages.list(from_=\"+19999999999\")\nmsgs = []\nfor m in messages:\n    line = [m.from_, m.to, m.body, m.sid, m.subresource_uris['media']]\n    line = [str(x) for x in line]\n    msgs.append(line)\n\n# with list of all messages:\nmsgs = sorted(msgs, key=itemgetter(0))\nfor m in msgs:\n    # get media list for each message that has one, else catch exception\n    try:\n        medias = client.messages(m[3]).media.list()\n        # returns Twilio.Api.V2010.MediaInstance and i'm stuck\n        for med in medias:\n            print client.messages(m[3]).media(med.sid).fetch()\n    except Exception as e:\n        pass\n</code></pre>\n\n<p>I am just lost and can't find any concrete examples in the documentation.  I really can't even tell if I'm close, or waaaaaaaaaaay off.  Thanks in advance!</p>\n\n<p><strong>SOLUTION</strong> Thanks to philnash\n    from twilio.rest import Client\n    import requests\n    import json</p>\n\n<pre><code># Find these values at https://twilio.com/user/account\nACCOUNT_SID = \"xxxxx\"\nAUTH_TOKEN = \"xxxxxx\"\nBASE_URL = \"https://%s:%s@api.twilio.com\" % (ACCOUNT_SID, AUTH_TOKEN)\n\nclient = Client(ACCOUNT_SID, AUTH_TOKEN)\n\n\n# with list of all messages:\nmessages = client.messages.list(from_=\"+1999999999\")\nfor m in messages:\n    sid = m.sid\n    # get media list for each message that has one, else catch exception\n    try:\n        message = client.messages(sid).fetch()\n        print message.body\n        medias = message.media.list()\n        # returns Twilio.Api.V2010.MediaInstance and i'm stuck\n        for media in medias:\n            media_instance = client.messages(sid).media(media.sid).fetch()\n            uri = requests.get(BASE_URL + media_instance.uri).json()\n            uri2 = requests.get(BASE_URL + uri['uri'].replace('.json', ''))\n            with open(media_instance.uri.split(\"/\")[-1].replace(\".json\", \".png\"), \"wb\") as f:\n                f.write(uri2.content)\n                f.close()\n    except Exception as e:\n        print e\n</code></pre>\n"}, {"tags": ["python", "oop"], "comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1493246269, "post_id": 43645598, "comment_id": 74339707, "body": "Use the Pythagorean theorem to get the distances, then add them up? Without seeing your code or how you&#39;re storing the poliygon&#39;s points, there is no way to answer this."}, {"owner": {"reputation": 27, "user_id": 7809713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MHQVU.jpg?s=128&g=1", "display_name": "Sophie", "link": "https://stackoverflow.com/users/7809713/sophie"}, "reply_to_user": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1493260301, "post_id": 43645598, "comment_id": 74343477, "body": "hi, I just updated my original code"}], "answers": [{"tags": [], "owner": {"reputation": 1836, "user_id": 6281755, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-99Ov53Fu-tc/AAAAAAAAAAI/AAAAAAAAAHU/zL_keIDgCbw/photo.jpg?sz=128", "display_name": "Robert Seaman", "link": "https://stackoverflow.com/users/6281755/robert-seaman"}, "is_accepted": false, "score": 0, "last_activity_date": 1493246516, "creation_date": 1493246516, "answer_id": 43645708, "question_id": 43645598, "link": "https://stackoverflow.com/questions/43645598/how-to-set-method-to-get-total-length-for-each-points/43645708#43645708", "title": "how to set method to get total length for each points", "body": "<p>If you're purely looking for the structure of classes and methods, then you have a few options. You could either have a <code>length()</code> method of the <code>Poly</code> class as you've said, or you could have a dynamic property which runs a function underneath.</p>\n\n<p>Using your proposal:</p>\n\n<pre><code>class Poly(object):\n    def __init__(self, *args):\n        for arg in args:\n            # Do something with each side\n            print(arg)\n\n    def length(self):\n        return get_length_of_perimeter()\n</code></pre>\n\n<p>You can then call this like:</p>\n\n<pre><code>poly = Poly(p1, p2, p3)\nprint(poly.length())\n</code></pre>\n\n<p>Or you can use the <code>@property</code> decorator to return the function as if it was a property:</p>\n\n<pre><code>class Poly(object):\n    def __init__(self, *args):\n        for arg in args:\n            # Do something with each side\n            print(arg)\n\n    @property\n    def length(self):\n        return get_length_of_perimeter()\n</code></pre>\n\n<p>Which you will then call like:</p>\n\n<pre><code>poly = Poly(p1, p2, p3)\nprint(poly.length)  # notice you're not calling length as if it was a method\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 7809713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MHQVU.jpg?s=128&g=1", "display_name": "Sophie", "link": "https://stackoverflow.com/users/7809713/sophie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1493618421, "creation_date": 1493245956, "last_edit_date": 1493618421, "question_id": 43645598, "link": "https://stackoverflow.com/questions/43645598/how-to-set-method-to-get-total-length-for-each-points", "title": "how to set method to get total length for each points", "body": "<p>I need to provide a length() method for the Polygon class that returns the total length of the polygon's outline by summing up the distances from each point to the next, including the distance from the last point back to first point. eg:3 point polygon poly = Poly(p1, p2, p3), poly.length() should return distance from p1 to p2 plus the distance from  p2 to p3 plus the distance from p3 to p1. \nhow should I set the length()method in oop?\nhere is my code:</p>\n\n<pre><code>class Polygon:\ndef __init__(self, points=[]): # init with list of points\n    print(\"creating an instance of class\", self.__class__.__name__)\n    self.point_list = points[:]  # list to store a sequence of points\n\ndef draw(self):\n    turtle.penup()\n    for p in self.point_list:\n        p.draw()\n        turtle.pendown()\n    # go back to first point to close the polygon\n    self.point_list[0].draw()\n\ndef num_points(self):\n    return len(point_list)\n</code></pre>\n\n<p>Thanks</p>\n\n<p>so I already defined a dist() method thatreturns the 2D distance to a given point: </p>\n\n<pre><code>def dist(self, other):\n    dis_x = (other.x - self.x)*(other.x - self.x) \n    dis_y = (other.y - self.y)*(other.y - self.y)\n    dis_new = math.sqrt(dis_x + dis_y)\n    return dis_new\n</code></pre>\n\n<p>but still get stuck in how to get total length of the outline from each points...</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1493371243, "post_id": 43645586, "comment_id": 74399035, "body": "Did the posted solution work for you?"}], "answers": [{"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": false, "score": 0, "last_activity_date": 1493246442, "last_edit_date": 1493246442, "creation_date": 1493246117, "answer_id": 43645639, "question_id": 43645586, "link": "https://stackoverflow.com/questions/43645586/how-can-i-change-a-color-channel-in-an-image-using-numpy/43645639#43645639", "title": "How can I change a color channel in an image using numpy?", "body": "<p>Use <a href=\"https://docs.scipy.org/doc/numpy/user/basics.indexing.html#boolean-or-mask-index-arrays\" rel=\"nofollow noreferrer\"><code>masking</code></a> -</p>\n\n<pre><code>img[(img==zero_val).all(-1)] = new_val\n</code></pre>\n\n<p>, where <code>zero_val</code> is the <code>zero</code> color and <code>new_val</code> is the new color to be assigned at those places where we have <code>zero</code> colored pixels.</p>\n\n<p>Sample run -</p>\n\n<pre><code># Random image array\nIn [112]: img = np.random.randint(0,255,(4,5,3))\n\n# Define sample zero valued and new valued arrays\nIn [113]: zero_val = [255,146,0]\n     ...: new_val = [255,255,255]\n     ...: \n\n# Set two random points/pixels to be zero valued\nIn [114]: img[0,2] = zero_val\n\nIn [115]: img[2,3] = zero_val\n\n# Use proposed approach\nIn [116]: img[(img==zero_val).all(-1)] = new_val\n\n# Verify that new values have been assigned\nIn [117]: img[0,2]\nOut[117]: array([255, 255, 255])\n\nIn [118]: img[2,3]\nOut[118]: array([255, 255, 255])\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7737280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2665b607d218ea49fd0d0ca09e5f4ac9?s=128&d=identicon&r=PG&f=1", "display_name": "curie", "link": "https://stackoverflow.com/users/7737280/curie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 828, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1493246442, "creation_date": 1493245905, "question_id": 43645586, "link": "https://stackoverflow.com/questions/43645586/how-can-i-change-a-color-channel-in-an-image-using-numpy", "title": "How can I change a color channel in an image using numpy?", "body": "<p>I have an image where some color channels in the pixels have a value of zero (ie 255, 146, 0). I want to be able to change any value equal to zero in the array to a different value, but I do not know how to access these values. Any help with this?</p>\n\n<p>This is the image array:</p>\n\n<pre><code>[[[ 76 163 168]\n  [109 166 168]\n  [173 172 167]\n  ..., \n  [ 83 182 144]\n  [ 78 172 134]\n  [ 82 150 131]]\n\n [[ 51 151 168]\n  [ 99 157 171]\n  [173 195 159]\n  ..., \n  [ 56 165 144]\n  [ 25 198 125]\n  [ 35 185 121]]\n\n [[ 76 163 121]\n  [112 147 120]\n  [175 151 118]\n  ..., \n  [ 57 162 159]\n  [ 36 185 132]\n  [ 32 194  97]]\n\n ..., \n [[ 78 189 126]\n  [ 68 173 129]\n  [ 58 171 150]\n  ..., \n  [ 41 188 163]\n  [ 34 176 126]\n  [ 35 176 102]]\n\n [[131 155 161]\n  [101 141 161]\n  [ 42 151 177]\n  ..., \n  [ 56 178 122]\n  [ 45 192 114]\n  [ 46 184 112]]\n\n [[130 157 185]\n  [ 83 141 185]\n  [ 42 158 185]\n  ..., \n  [ 63 187  88]\n  [ 45 194 102]\n  [ 45 184 129]]]\n</code></pre>\n"}, {"tags": ["python", "regex", "string"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1493246165, "post_id": 43645571, "comment_id": 74339676, "body": "<code>str.translate</code>"}, {"owner": {"reputation": 1158, "user_id": 6117625, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/cff13813080b5f227531191b1dc96b60?s=128&d=identicon&r=PG&f=1", "display_name": "Dean coakley", "link": "https://stackoverflow.com/users/6117625/dean-coakley"}, "edited": false, "score": 0, "creation_date": 1493247030, "post_id": 43645571, "comment_id": 74339973, "body": "I believe you must use use <code>str.translate</code>. <code>.replace.replace</code> will still have his existing issue I believe. The output would just be:      <code>&quot;1&quot;: &quot; &quot;me&quot; and &quot;you&quot;&quot;</code>"}, {"owner": {"reputation": 1158, "user_id": 6117625, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/cff13813080b5f227531191b1dc96b60?s=128&d=identicon&r=PG&f=1", "display_name": "Dean coakley", "link": "https://stackoverflow.com/users/6117625/dean-coakley"}, "edited": false, "score": 0, "creation_date": 1493247267, "post_id": 43645571, "comment_id": 74340041, "body": "Correct. I don&#39;t understand why you and doing <code>&#39;&quot;&quot;&#39;</code>? Why isn&#39;t it <code>&#39;&quot;&#39;</code>?"}, {"owner": {"reputation": 1158, "user_id": 6117625, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/cff13813080b5f227531191b1dc96b60?s=128&d=identicon&r=PG&f=1", "display_name": "Dean coakley", "link": "https://stackoverflow.com/users/6117625/dean-coakley"}, "reply_to_user": {"reputation": 77715, "user_id": 396458, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/16961c15df3fee8c4b3056ff83d1938b?s=128&d=identicon&r=PG", "display_name": "NullUserException", "link": "https://stackoverflow.com/users/396458/nulluserexception"}, "edited": false, "score": 0, "creation_date": 1493247499, "post_id": 43645571, "comment_id": 74340127, "body": "@NullUserException Ah I understand it now! Thanks!"}, {"owner": {"reputation": 3072, "user_id": 6725184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40514a449959fa5e76f19afc41436221?s=128&d=identicon&r=PG&f=1", "display_name": "Christian K&#246;nig", "link": "https://stackoverflow.com/users/6725184/christian-k%c3%b6nig"}, "edited": false, "score": 0, "creation_date": 1493247646, "post_id": 43645571, "comment_id": 74340180, "body": "@NullUserException Although this triple replacement fails in certain cases: <code>&#39;&quot;</code>-&gt;<code>&#39;&quot;&quot;</code> -&gt;<code>&quot;&quot;&quot;</code> -&gt;<code>&#39;&quot;</code>."}, {"owner": {"reputation": 77715, "user_id": 396458, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/16961c15df3fee8c4b3056ff83d1938b?s=128&d=identicon&r=PG", "display_name": "NullUserException", "link": "https://stackoverflow.com/users/396458/nulluserexception"}, "reply_to_user": {"reputation": 3072, "user_id": 6725184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40514a449959fa5e76f19afc41436221?s=128&d=identicon&r=PG&f=1", "display_name": "Christian K&#246;nig", "link": "https://stackoverflow.com/users/6725184/christian-k%c3%b6nig"}, "edited": false, "score": 0, "creation_date": 1493247687, "post_id": 43645571, "comment_id": 74340197, "body": "@ChristianK&#246;nig Yes, I just realized that. It&#39;s an old trick; I just don&#39;t remember exactly how it should be done."}], "answers": [{"tags": [], "owner": {"reputation": 38676, "user_id": 227884, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/L7EG1.png?s=128&g=1", "display_name": "UltraInstinct", "link": "https://stackoverflow.com/users/227884/ultrainstinct"}, "is_accepted": true, "score": 6, "last_activity_date": 1493246173, "creation_date": 1493246173, "answer_id": 43645647, "question_id": 43645571, "link": "https://stackoverflow.com/questions/43645571/python-two-way-replacement-in-a-string/43645647#43645647", "title": "Python: Two way replacement in a string.", "body": "<p>This is a good use-case for <code>string.translate(..)</code>! In python 2.x:</p>\n\n<pre><code>&gt;&gt;&gt; import string\n&gt;&gt;&gt; print s.translate(string.maketrans('\"\\'', \"'\\\"\"))\n'1': ' \"me\" and \"you\"'\n&gt;&gt;&gt; print s\n\"1\": \" 'me' and 'you'\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3072, "user_id": 6725184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40514a449959fa5e76f19afc41436221?s=128&d=identicon&r=PG&f=1", "display_name": "Christian K&#246;nig", "link": "https://stackoverflow.com/users/6725184/christian-k%c3%b6nig"}, "is_accepted": false, "score": 1, "last_activity_date": 1493248621, "creation_date": 1493248621, "answer_id": 43646080, "question_id": 43645571, "link": "https://stackoverflow.com/questions/43645571/python-two-way-replacement-in-a-string/43646080#43646080", "title": "Python: Two way replacement in a string.", "body": "<p>As an alternative to <a href=\"https://docs.python.org/3.6/library/stdtypes.html#str.translate\" rel=\"nofollow noreferrer\"><code>str.translate()</code></a> (which I would recommend) you can use a <code>dict</code> to manually replace each character:</p>\n\n<pre><code>&gt;&gt;&gt; repl={'\"': \"'\", \"'\":'\"'}\n&gt;&gt;&gt; oldstr='''\"1\": \" 'me'\" and 'you'\"'''\n&gt;&gt;&gt; newstr=\"\".join([repl[i] if i in repl else i for i in oldstr])\n&gt;&gt;&gt; print(oldstr)\n\"1\": \" 'me'\" and 'you'\"\n&gt;&gt;&gt; print(newstr)\n'1': ' \"me\"' and \"you\"'\n</code></pre>\n"}], "owner": {"reputation": 1458, "user_id": 4159712, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/3Iwx7.png?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4159712/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 43645647, "answer_count": 2, "score": -1, "last_activity_date": 1493248621, "creation_date": 1493245834, "question_id": 43645571, "link": "https://stackoverflow.com/questions/43645571/python-two-way-replacement-in-a-string", "title": "Python: Two way replacement in a string.", "body": "<p>I would like to replace all the single quotes with double quotes and vice versa. So for example change this string <code>\"1\": \" 'me' and 'you'\"</code> to <code>'1': '\"me\" and \"you\"'</code>, how can I do that? if i do <code>mystering.replace('\"', \"'\")</code> then will be converted to ' and then if I do the reverse of it <code>mystering.replace( \"'\", '\"')</code>, all will be converted to \". </p>\n"}, {"tags": ["python", "pandas", "scikit-learn"], "answers": [{"tags": [], "owner": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "is_accepted": false, "score": 1, "last_activity_date": 1493250825, "last_edit_date": 1493250825, "creation_date": 1493249199, "answer_id": 43646180, "question_id": 43645554, "link": "https://stackoverflow.com/questions/43645554/splitting-survey-data-with-onehotencoder/43646180#43646180", "title": "Splitting survey data with OneHotEncoder", "body": "<p>Here's one approach, using <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.get_dummies.html\" rel=\"nofollow noreferrer\">get_dummies</a>:</p>\n\n<pre><code>import pandas as pd\n\n# example data provided by OP\nsurvey_data = pd.DataFrame({'Q1':  ['A','B','C','A;D', 'D;E', 'F']})\n\n# split out rows with multiple chosen options into columns\ntmp = survey_data.Q1.str.split(';').apply(pd.Series)\n\n# one-hot encode columns with get_dummies, then overlay into one df\ndf = (pd.get_dummies(tmp[0])\n        .add(pd.get_dummies(tmp[1]), fill_value=0)\n        .astype(int))\n\nprint(df)\n\n   A  B  C  D  E  F\n0  1  0  0  0  0  0\n1  0  1  0  0  0  0\n2  0  0  1  0  0  0\n3  1  0  0  1  0  0\n4  0  0  0  1  1  0\n5  0  0  0  0  0  1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "is_accepted": true, "score": 2, "last_activity_date": 1493274688, "creation_date": 1493274688, "answer_id": 43650199, "question_id": 43645554, "link": "https://stackoverflow.com/questions/43645554/splitting-survey-data-with-onehotencoder/43650199#43650199", "title": "Splitting survey data with OneHotEncoder", "body": "<p>You can also use <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.MultiLabelBinarizer.html\" rel=\"nofollow noreferrer\">MultilabelBinarizer</a> for this:</p>\n\n<pre><code>inputX = [element.split(';') for element in survey_data['Q1']]\n\nfrom sklearn.preprocessing import MultiLabelBinarizer\nmlb = MultiLabelBinarizer()\ntransformedX = mlb.fit_transform(inputX)\n\n#Out: transformedX\n#array([[1, 0, 0, 0, 0, 0],\n        [0, 1, 0, 0, 0, 0],\n        [0, 0, 1, 0, 0, 0],\n        [1, 0, 0, 1, 0, 0],\n        [0, 0, 0, 1, 1, 0],\n        [0, 0, 0, 0, 0, 1]])\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 7802215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33010555508aaebce7bc38d3a254cedd?s=128&d=identicon&r=PG&f=1", "display_name": "kdawson13", "link": "https://stackoverflow.com/users/7802215/kdawson13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 43650199, "answer_count": 2, "score": 1, "last_activity_date": 1493274688, "creation_date": 1493245749, "last_edit_date": 1493260812, "question_id": 43645554, "link": "https://stackoverflow.com/questions/43645554/splitting-survey-data-with-onehotencoder", "title": "Splitting survey data with OneHotEncoder", "body": "<p>I have a dataframe with results from a survey where there were options A-E and it was possible to select more than one option - a selection could be 'A' or 'A;C;D', etc. </p>\n\n<p>I will be using the data for some machine learning and am looking to run it through <code>OneHotEncoder</code> to end up with the 5 columns with 1's and 0's. </p>\n\n<p>An example of my initial survey data is :</p>\n\n<pre><code>survey_data = pd.DataFrame({'Q1':  ['A','B','C','A;D', 'D;E', 'F']})\n</code></pre>\n\n<p>I initially tried <code>LabelEncoder</code> but obviously ended up with a lot of features (rather than just the A-E).</p>\n\n<p><img src=\"https://i.stack.imgur.com/K7A8z.png\" alt=\"Final results\"></p>\n"}, {"tags": ["python", "json", "list", "psycopg2"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1493246266, "post_id": 43645552, "comment_id": 74339703, "body": "This isn&#39;t &quot;type information&quot;, a <code>Decimal</code> object is different from an <code>int</code> or ` float<code>, it is its own class. </code>decimal.Decimal<code>. You can probably just do </code>float(Decimal(&#39;0.05&#39;)`"}, {"owner": {"reputation": 466742, "user_id": 224671, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c90de868a7e95d75bdfd6a906dfedac7?s=128&d=identicon&r=PG", "display_name": "kennytm", "link": "https://stackoverflow.com/users/224671/kennytm"}, "edited": false, "score": 0, "creation_date": 1493248178, "post_id": 43645552, "comment_id": 74340376, "body": "Have you tried <a href=\"http://stackoverflow.com/questions/1960516/python-json-serialize-a-decimal-object\" title=\"python json serialize a decimal object\">stackoverflow.com/questions/1960516/&hellip;</a> ?"}], "answers": [{"tags": [], "owner": {"reputation": 913, "user_id": 3976696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/583320ab71255ceee5895cc850b24e2d?s=128&d=identicon&r=PG&f=1", "display_name": "sc28", "link": "https://stackoverflow.com/users/3976696/sc28"}, "is_accepted": true, "score": 0, "last_activity_date": 1493936832, "creation_date": 1493936832, "answer_id": 43793732, "question_id": 43645552, "link": "https://stackoverflow.com/questions/43645552/avoiding-decimalvalue-in-cursor-fetchall/43793732#43793732", "title": "Avoiding &quot;Decimal(&#39;value&#39;) in cursor.fetchall", "body": "<p>Here is the way I overcame this issue.</p>\n\n<p>First, I convert the query result into a pandas dataframe:</p>\n\n<pre><code>df = pd.DataFrame(query_data)\n</code></pre>\n\n<p>Then, I simply convert the troublesome columns to string:</p>\n\n<pre><code>df[2] = [str(r) for r in df[2]]\n</code></pre>\n\n<p>Finally, I convert the dataframe to a csv string:</p>\n\n<pre><code>df_csv = df.to_csv(sep=',', index = False, header = False) \n</code></pre>\n\n<p>And this can be used with no error in <code>print(json.dumps(result))</code>.</p>\n\n<p>Pretty specific workaround, but thought I'd post it anyway to provide at least one answer to the problem.</p>\n"}], "owner": {"reputation": 913, "user_id": 3976696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/583320ab71255ceee5895cc850b24e2d?s=128&d=identicon&r=PG&f=1", "display_name": "sc28", "link": "https://stackoverflow.com/users/3976696/sc28"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 866, "favorite_count": 0, "accepted_answer_id": 43793732, "answer_count": 1, "score": 0, "last_activity_date": 1493936832, "creation_date": 1493245730, "last_edit_date": 1495542860, "question_id": 43645552, "link": "https://stackoverflow.com/questions/43645552/avoiding-decimalvalue-in-cursor-fetchall", "title": "Avoiding &quot;Decimal(&#39;value&#39;) in cursor.fetchall", "body": "<p>In a Python script, a <code>cursor.fetchall</code> command is returning a list of tuples, some elements of which are marked as e.g. <code>Decimal('0.50')</code> instead of just <code>0.50</code>.</p>\n\n<pre><code>myList= [(1, 'string1', None, None, 'string2', 0, 'string3'),\n(1,   'string1',   Decimal('0.50'),   Decimal('2.5'),   'string2',   3,   'string3')]\n</code></pre>\n\n<p>The reason I'd like the latter form (i.e. just  <code>0.50</code>) is that I'm trying to send the list using <code>print(json.dumps(result))</code>, which currently returns <code>TypeError: Decimal('0.50') is not JSON serializable</code>.</p>\n\n<p>Is there a direct way to strip away this \"type\" information? I've been turning around on this without success, and I find previous related questions only cover cases where all elements are of the same type (e.g. <a href=\"https://stackoverflow.com/questions/31202956/json-typeerror-decimal34-3-is-not-json-serializable\">here</a>). Thanks for any tips! </p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 2315, "user_id": 1726909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71041112ea58a26acd5afcdc91c25696?s=128&d=identicon&r=PG", "display_name": "ChidG", "link": "https://stackoverflow.com/users/1726909/chidg"}, "edited": false, "score": 0, "creation_date": 1493260928, "post_id": 43645518, "comment_id": 74343647, "body": "You&#39;ve listed your template as &#39;detailview.html&#39;, but in your view code you&#39;ve specified <code>&quot;questions&#47;question_detail.html&quot; </code> as your template name. Which is it? Also, in your detailview.html, you&#39;ve said you tried to get the object id via <code>{{object.id}}</code>. That looks like it should work to me. What do you get there?"}], "answers": [{"comments": [{"owner": {"reputation": 2315, "user_id": 1726909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71041112ea58a26acd5afcdc91c25696?s=128&d=identicon&r=PG", "display_name": "ChidG", "link": "https://stackoverflow.com/users/1726909/chidg"}, "edited": false, "score": 0, "creation_date": 1493260772, "post_id": 43647727, "comment_id": 74343612, "body": "Sorry, code formatting appears to be borked - no idea why"}, {"owner": {"reputation": 129, "user_id": 5727612, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/978bd8b2fa23e86bbb7ac48ea5150af1?s=128&d=identicon&r=PG&f=1", "display_name": "arm93", "link": "https://stackoverflow.com/users/5727612/arm93"}, "edited": false, "score": 0, "creation_date": 1493297682, "post_id": 43647727, "comment_id": 74364168, "body": "Hay, thanks for the answer. The html name above is just a type, the file is actually called question_detail.html. I&#39;m just trying your solution now, I&#39;ll let you know how it goes."}], "tags": [], "owner": {"reputation": 2315, "user_id": 1726909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71041112ea58a26acd5afcdc91c25696?s=128&d=identicon&r=PG", "display_name": "ChidG", "link": "https://stackoverflow.com/users/1726909/chidg"}, "is_accepted": false, "score": 0, "last_activity_date": 1493261278, "last_edit_date": 1493261278, "creation_date": 1493260673, "answer_id": 43647727, "question_id": 43645518, "link": "https://stackoverflow.com/questions/43645518/django-problems-with-like-follow-buttons/43647727#43647727", "title": "Django- Problems with like/follow button&#39;s", "body": "<p>A few points:</p>\n\n<ol>\n<li>If I'm understanding your intention properly, you should not need <code>count = models.IntegerField(default=0)</code> on the <code>Question_Follows</code> model. A new row is created in the database table for this model every time a user follows a question. Can a user follow the same question more than once? If not, then you don't need a count field.</li>\n<li><p>The number of follows for the question should be available in the view using something like: </p>\n\n<p>def get_context_data(self, kwargs):</p>\n\n<pre><code>context = super(QuestionDetailView, self).get_context_data(**kwargs)\ncontext['now'] = timezone.now()\ncontext['follow_count'] = self.object.follows.count()\nreturn context\n</code></pre></li>\n</ol>\n\n<p>Note that you'll need to add a related name to your foreign key, so it will be  <code>question = models.ForeignKey(Question, on_delete=models.CASCADE, related_name='follows')</code> for this to work.</p>\n\n<ol start=\"3\">\n<li>It's conventional to name Django models in CamelCase (no underscores), and in singular form - so <code>Question_Follows</code> would be <code>QuestionFollow</code>.</li>\n</ol>\n\n<p>See my comment for further questions related to your template issues - I suspect you are just using the wrong template file name.</p>\n"}], "owner": {"reputation": 129, "user_id": 5727612, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/978bd8b2fa23e86bbb7ac48ea5150af1?s=128&d=identicon&r=PG&f=1", "display_name": "arm93", "link": "https://stackoverflow.com/users/5727612/arm93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493261278, "creation_date": 1493245508, "last_edit_date": 1493245821, "question_id": 43645518, "link": "https://stackoverflow.com/questions/43645518/django-problems-with-like-follow-buttons", "title": "Django- Problems with like/follow button&#39;s", "body": "<p>I want to create a like/follow system on user posts. </p>\n\n<p>Due to many users being able to like a post and users being able to like many posts I made 2 separate models. </p>\n\n<p>Models.py: </p>\n\n<pre><code>class Question(models.Model):\nuser= models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE)\ntitle = models.TextField()\ncontent = models.TextField()\ndate_published = models.DateTimeField(auto_now_add=True)\nlast_modified = models.DateTimeField(_('Last Edited'), auto_now=True)\nslug = models.SlugField(max_length=255)\n\nclass Question_Follows(models.Model): \nquestion = models.ForeignKey(Question, on_delete=models.CASCADE)\nuser = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE)\ncount = models.IntegerField(default=0)\n</code></pre>\n\n<p>views.py </p>\n\n<pre><code>class QuestionDetailView(DetailView):\n\nmodel = Question\nslug  = 'slug'\ntemplate_name = \"questions/question_detail.html\" \n\n\n def get_context_data(self, **kwargs):\n    context = super(QuestionDetailView, self).get_context_data(**kwargs)\n    context['now'] = timezone.now()\n\n    #obj= Question_Follows.objects.filter(id=question.id)\n    #context['follow_count'] = Question_Follows.objects.filter(id='question.id')\n    #obj.count &lt;----- none of these have worked so far.\n\n\n    return context\n</code></pre>\n\n<p>detailview.html:</p>\n\n<pre><code>&lt;div id=\"question_container\"&gt;\n&lt;input type='hidden' id=\"{{ object.id }}\" name=\"id\"&gt;  &lt;--- tried this as a way to get question id --&gt;\n&lt;h1&gt;{{ object.title }}&lt;/h1&gt;\n&lt;p&gt;{{ object.content }}&lt;/p&gt;\n&lt;p&gt;Published: {{ object.date_published|date }}&lt;/p&gt;\n&lt;p&gt;Date: {{ now |date }}&lt;/p&gt;\n\n&lt;button class=\"follow\"&gt;&lt;span id='follow-span'&gt;Follow| &lt;strong id='follow-count'&gt;{{ follow_count }}&lt;/strong&gt; &lt;/button&gt;\n&lt;/span&gt;&lt;/button&gt;\n</code></pre>\n\n<p></p>\n\n<p>I'm having problems 'collecting' the right question once the like button has been pressed and also showing the right number of likes for the question i.e the follow count for each question. </p>\n"}, {"tags": ["python", "labels", "astronomy", "ds9"], "comments": [{"owner": {"reputation": 405, "user_id": 4728722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V5XxN.jpg?s=128&g=1", "display_name": "saimn", "link": "https://stackoverflow.com/users/4728722/saimn"}, "edited": false, "score": 0, "creation_date": 1493285113, "post_id": 43645509, "comment_id": 74354861, "body": "I don&#39;t think it is possible. You can use one of the coordinate systems listed in <a href=\"http://ds9.si.edu/doc/ref/region.html\" rel=\"nofollow noreferrer\">ds9.si.edu/doc/ref/region.html</a> but they are all linked to the data."}, {"owner": {"reputation": 1, "user_id": 4064662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7757bde3586757dc93da6bef52c9008?s=128&d=identicon&r=PG&f=1", "display_name": "Olivaw", "link": "https://stackoverflow.com/users/4064662/olivaw"}, "reply_to_user": {"reputation": 405, "user_id": 4728722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V5XxN.jpg?s=128&g=1", "display_name": "saimn", "link": "https://stackoverflow.com/users/4728722/saimn"}, "edited": false, "score": 0, "creation_date": 1493396721, "post_id": 43645509, "comment_id": 74415718, "body": "Thanks for your comment. Yes, they are all linked to the data. Maybe there is an option to get the current edges values, calculate the range, and then I could multiply it by a fraction and add that to the left edge value."}], "owner": {"reputation": 1, "user_id": 4064662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7757bde3586757dc93da6bef52c9008?s=128&d=identicon&r=PG&f=1", "display_name": "Olivaw", "link": "https://stackoverflow.com/users/4064662/olivaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 219, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493246546, "creation_date": 1493245449, "last_edit_date": 1493246546, "question_id": 43645509, "link": "https://stackoverflow.com/questions/43645509/how-to-put-text-labels-relative-to-axes-in-ds9", "title": "How to put text labels relative to axes in DS9?", "body": "<p>I'm using pyds9 as a wrapper to DS9 and I want to put text labels on my images with positions relative to the axes and not the coordinates. This way, the labels won't get messed up no matter what zoom I apply to the image.</p>\n\n<p>Currently I am only able to put text in specified positions:</p>\n\n<pre><code>d.set('regions','fk5; text %s,%s #text=\"TEXT\" color=black'%(ra,dec))\n</code></pre>\n\n<p>I expected to just change the fk5 for other command and a (x,y) position from 0 to 1 but so far I haven't found anything. </p>\n"}, {"tags": ["python", "oauth", "python-requests", "vk"], "comments": [{"owner": {"reputation": 13, "user_id": 2689144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ly89N.jpg?s=128&g=1", "display_name": "jackdawrites", "link": "https://stackoverflow.com/users/2689144/jackdawrites"}, "edited": false, "score": 0, "creation_date": 1493245083, "post_id": 43645448, "comment_id": 74339302, "body": "Link to API documentation and oauth: <a href=\"https://vk.com/dev/access_token\" rel=\"nofollow noreferrer\">vk.com/dev/access_token</a>"}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1493245800, "post_id": 43645448, "comment_id": 74339555, "body": "Can&#39;t you change the redirect_uri? The usual procedure would be to open a local webserver (say on <code>localhost:5000</code>) and redirect the user there, then stop the server once it receives the token."}, {"owner": {"reputation": 13, "user_id": 2689144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ly89N.jpg?s=128&g=1", "display_name": "jackdawrites", "link": "https://stackoverflow.com/users/2689144/jackdawrites"}, "reply_to_user": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1493246901, "post_id": 43645448, "comment_id": 74339917, "body": "@Rawing thanks, I&#39;ll try that."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 2689144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ly89N.jpg?s=128&g=1", "display_name": "jackdawrites", "link": "https://stackoverflow.com/users/2689144/jackdawrites"}, "edited": false, "score": 0, "creation_date": 1493299657, "post_id": 43648938, "comment_id": 74365625, "body": "But the code to get the access_token is also supplied within the url which is only accessible through the address bar of my browser since I use <a href=\"https://oauth.vk.com\" rel=\"nofollow noreferrer\">oauth.vk.com</a> as a redirect_uri. My question is whether I can take this code from the url?"}, {"owner": {"reputation": 526, "user_id": 2139818, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tBfb7.png?s=128&g=1", "display_name": "Venkatesh Marepalli", "link": "https://stackoverflow.com/users/2139818/venkatesh-marepalli"}, "reply_to_user": {"reputation": 13, "user_id": 2689144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ly89N.jpg?s=128&g=1", "display_name": "jackdawrites", "link": "https://stackoverflow.com/users/2689144/jackdawrites"}, "edited": false, "score": 0, "creation_date": 1493325750, "post_id": 43648938, "comment_id": 74382015, "body": "Yes there some ways to achieve this. One way is create a httpserver using python which listens on a port for ex: localhost:8080. Once you are done with authentication give redirect_uri to localhost:8080. Once you redirect there you can get the code from query string params. If you are directly retrieving access_token by using response_type=access_token then you can use the same snippet above to post a request to server and get the access_token within in python code."}], "tags": [], "owner": {"reputation": 526, "user_id": 2139818, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tBfb7.png?s=128&g=1", "display_name": "Venkatesh Marepalli", "link": "https://stackoverflow.com/users/2139818/venkatesh-marepalli"}, "is_accepted": true, "score": 0, "last_activity_date": 1493268970, "creation_date": 1493268970, "answer_id": 43648938, "question_id": 43645448, "link": "https://stackoverflow.com/questions/43645448/retrieving-access-token-without-manual-copying/43648938#43648938", "title": "Retrieving access token without manual copying", "body": "<p>You can use Authorization Code flow wherein you receive Auth_code and then use this code to retrieve access_token.</p>\n\n<p>Getting auth_code and access_tokens are just POST requests to the OAuth server.</p>\n\n<p>In your code response_type should be code to get the auth code and then use this code to retrieve acccess_token</p>\n\n<p>Refer to this <a href=\"https://vk.com/dev/auth_sites\" rel=\"nofollow noreferrer\">https://vk.com/dev/auth_sites</a>. Generally, this flow is same on any OAuth provider.</p>\n"}], "owner": {"reputation": 13, "user_id": 2689144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ly89N.jpg?s=128&g=1", "display_name": "jackdawrites", "link": "https://stackoverflow.com/users/2689144/jackdawrites"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 977, "favorite_count": 0, "accepted_answer_id": 43648938, "answer_count": 1, "score": 1, "last_activity_date": 1510678425, "creation_date": 1493245078, "question_id": 43645448, "link": "https://stackoverflow.com/questions/43645448/retrieving-access-token-without-manual-copying", "title": "Retrieving access token without manual copying", "body": "<p>I make the following request:</p>\n\n<p><a href=\"https://oauth.vk.com/authorize?redirect_uri=https%3A%2F%2Foauth.vk.com%2Fblank.html&amp;response_type=token&amp;client_id=5842359&amp;v=5.63&amp;scope=friends%2Coffline&amp;display=page\" rel=\"nofollow noreferrer\">https://oauth.vk.com/authorize?redirect_uri=https%3A%2F%2Foauth.vk.com%2Fblank.html&amp;response_type=token&amp;client_id=5842359&amp;v=5.63&amp;scope=friends%2Coffline&amp;display=page</a></p>\n\n<p>to retrieve an access token. This url leads to a login page on vk.com (if not logged in already), then prompts a user to authorize application and then redirects to <a href=\"https://oauth.vk.com/blank.html#access_token=\" rel=\"nofollow noreferrer\">https://oauth.vk.com/blank.html#access_token=</a>{token}&amp;expires_in=0&amp;user_id={id}. So to actually retrieve an access token one needs to manually copy it from the address bar. This procedure is specified in the official API. Is there a way to go around this? How do I get a token using only python code?</p>\n\n<p>Below is the procedure that generates the url:</p>\n\n<pre><code>import requests\n\ndef authorize_app(client_id, redirect_uri = None):\n'''\n    The function generates an url, which redirects to login page (optional, if not logged in) and app authorization. \n'''\nif redirect_uri == None:\n    redirect_uri = 'https://oauth.vk.com/blank.html' # default callback url\noauth = requests.get('https://oauth.vk.com/authorize', params = {'client_id' : str(client_id), \n                                                                'redirect_uri' : redirect_uri,\n                                                                'display' : 'page',\n                                                                'scope' : ['friends,offline'], # offline option makes the token permanent\n                                                                'response_type' : 'token',\n                                                                'v' : 5.63})\nreturn oauth.url\n</code></pre>\n"}, {"tags": ["python", "django", "exception", "return", "try-catch"], "comments": [{"owner": {"reputation": 333, "user_id": 4561973, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zw81CFOGhOo/AAAAAAAAAAI/AAAAAAAAA7Q/WwSuwDSbJRM/photo.jpg?sz=128", "display_name": "adee alamsz", "link": "https://stackoverflow.com/users/4561973/adee-alamsz"}, "edited": false, "score": 0, "creation_date": 1493245313, "post_id": 43645418, "comment_id": 74339392, "body": "How did you import it? I think it related to the import, you might need to import the JsonResponse <code>from django.http import JsonResponse</code> and change it into <code>return JsonResponse({&#39;status&#39;: False})</code>"}, {"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1493245542, "post_id": 43645418, "comment_id": 74339466, "body": "The try and except branches return two different types (User/JSONResponse), that&#39;s not a good design choice.."}, {"owner": {"reputation": 1698, "user_id": 2128414, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/EE8ag.jpg?s=128&g=1", "display_name": "Tsuna", "link": "https://stackoverflow.com/users/2128414/tsuna"}, "reply_to_user": {"reputation": 333, "user_id": 4561973, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zw81CFOGhOo/AAAAAAAAAAI/AAAAAAAAA7Q/WwSuwDSbJRM/photo.jpg?sz=128", "display_name": "adee alamsz", "link": "https://stackoverflow.com/users/4561973/adee-alamsz"}, "edited": false, "score": 0, "creation_date": 1493245689, "post_id": 43645418, "comment_id": 74339513, "body": "@adeealamsz yes I did import that"}, {"owner": {"reputation": 1698, "user_id": 2128414, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/EE8ag.jpg?s=128&g=1", "display_name": "Tsuna", "link": "https://stackoverflow.com/users/2128414/tsuna"}, "reply_to_user": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1493245746, "post_id": 43645418, "comment_id": 74339537, "body": "@thebjorn what would be a good way though?"}, {"owner": {"reputation": 333, "user_id": 4561973, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zw81CFOGhOo/AAAAAAAAAAI/AAAAAAAAA7Q/WwSuwDSbJRM/photo.jpg?sz=128", "display_name": "adee alamsz", "link": "https://stackoverflow.com/users/4561973/adee-alamsz"}, "edited": false, "score": 0, "creation_date": 1493245879, "post_id": 43645418, "comment_id": 74339577, "body": "I don&#39;t think you correctly define it, see the case, you define it All uppercase for word JSON, while based on django it should be <code>JsonResponse</code> not <code>JSONresponse</code> <a href=\"https://docs.djangoproject.com/en/dev/ref/request-response/#jsonresponse-objects\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/dev/ref/request-response/&hellip;</a>"}, {"owner": {"reputation": 1442, "user_id": 4020610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LdgzYsM5kJw/AAAAAAAAAAI/AAAAAAAAH4E/Qase_JE27jE/photo.jpg?sz=128", "display_name": "Lohmar ASHAR", "link": "https://stackoverflow.com/users/4020610/lohmar-ashar"}, "edited": false, "score": 0, "creation_date": 1493246023, "post_id": 43645418, "comment_id": 74339628, "body": "instead of returning <code>return JSONresponse({&#39;status&#39;: False})</code> do a <code>raise</code> this should point you in the right direction of what might go wrong, or you could log it <code>logger.exception(&quot;something went wrong&quot;)</code> that should give you the error and the traceback"}], "answers": [{"comments": [{"owner": {"reputation": 1698, "user_id": 2128414, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/EE8ag.jpg?s=128&g=1", "display_name": "Tsuna", "link": "https://stackoverflow.com/users/2128414/tsuna"}, "edited": false, "score": 0, "creation_date": 1493247673, "post_id": 43645802, "comment_id": 74340191, "body": "where should I create these two classes though? <code>ImmediateHttpResponse</code>, <code>ImmediateHttpResponseMiddleware</code>"}, {"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "reply_to_user": {"reputation": 1698, "user_id": 2128414, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/EE8ag.jpg?s=128&g=1", "display_name": "Tsuna", "link": "https://stackoverflow.com/users/2128414/tsuna"}, "edited": false, "score": 0, "creation_date": 1493248184, "post_id": 43645802, "comment_id": 74340378, "body": "Wherever you want."}, {"owner": {"reputation": 1698, "user_id": 2128414, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/EE8ag.jpg?s=128&g=1", "display_name": "Tsuna", "link": "https://stackoverflow.com/users/2128414/tsuna"}, "edited": false, "score": 0, "creation_date": 1493400449, "post_id": 43645802, "comment_id": 74417698, "body": "I just tried it, still just returns as regular 404 page instead of <code>{&#39;status&#39;: False}</code>"}, {"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "reply_to_user": {"reputation": 1698, "user_id": 2128414, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/EE8ag.jpg?s=128&g=1", "display_name": "Tsuna", "link": "https://stackoverflow.com/users/2128414/tsuna"}, "edited": false, "score": 0, "creation_date": 1493411245, "post_id": 43645802, "comment_id": 74422977, "body": "Sorry about that. The exception raised was a <code>Http404</code>, not a <code>User.DoesNotExist</code>.  I&#39;ve fixed the code."}, {"owner": {"reputation": 1698, "user_id": 2128414, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/EE8ag.jpg?s=128&g=1", "display_name": "Tsuna", "link": "https://stackoverflow.com/users/2128414/tsuna"}, "edited": false, "score": 0, "creation_date": 1493579431, "post_id": 43645802, "comment_id": 74464502, "body": "thanks for this, it&#39;s so helpful.  Finally can reuse it.  Thanks a lot"}, {"owner": {"reputation": 1698, "user_id": 2128414, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/EE8ag.jpg?s=128&g=1", "display_name": "Tsuna", "link": "https://stackoverflow.com/users/2128414/tsuna"}, "edited": false, "score": 0, "creation_date": 1494007692, "post_id": 43645802, "comment_id": 74661856, "body": "sorry to bother, but I thought of modifying it a bit and realized, this only works if <code>DoesNotExist</code> is caught.  Anyway I can modify so it catches anything and still throw json response? for example if it&#39;s <code>AttributeError</code>"}, {"owner": {"reputation": 1698, "user_id": 2128414, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/EE8ag.jpg?s=128&g=1", "display_name": "Tsuna", "link": "https://stackoverflow.com/users/2128414/tsuna"}, "edited": false, "score": 0, "creation_date": 1494030264, "post_id": 43645802, "comment_id": 74670180, "body": "that&#39;s what I thought so too but then it doesn&#39;t o.O I also tried to use <code>Excetipion</code> instead of something like <code>AttributeError</code>, but it would only throw json response if <code>Excetipion</code> catches <code>DoesNotExist</code> anything else loads the 404 page."}], "tags": [], "owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "is_accepted": true, "score": 1, "last_activity_date": 1493411189, "last_edit_date": 1493411189, "creation_date": 1493246986, "answer_id": 43645802, "question_id": 43645418, "link": "https://stackoverflow.com/questions/43645418/how-to-properly-refactor-this-function-into-another-file-django/43645802#43645802", "title": "how to properly refactor this function into another file? django", "body": "<p>Best practice is to use as simple parameters as possible (this makes your function easier to test).</p>\n\n<p>What you're looking for in the exception case is something that can be sent from <code>auth_token</code> through your view:</p>\n\n<pre><code>def auth_token(email):  # this returns a User not a token..?\n    try:\n        return User.objects.get(email=email)\n    except User.DoesNotExist:\n        raise ImmediateHttpResponse(JSONresponse({'status': False}))\n</code></pre>\n\n<p>Usage would then be:</p>\n\n<pre><code>def myview(request, ...):\n    token = auth_token(data['email'])\n    ...\n</code></pre>\n\n<p>Any <code>ImmediateHttpResponse</code> exception will escape the view and must be picked up by a middleware class.</p>\n\n<p>Unfortunately, Django doesn't come with an <code>ImmediateHttpResponse</code> class, but TastyPie has one that we can steal. First the exception class:</p>\n\n<pre><code>class ImmediateHttpResponse(Exception):\n    \"\"\"This exception is used to interrupt the flow of processing to immediately\n       return a custom HttpResponse.\n\n       Common uses include::\n\n           * for authentication (like digest/OAuth)\n           * for throttling\n\n       (from TastyPie).\n    \"\"\"\n    _response = http.HttpResponse(\"Nothing provided.\")\n\n    def __init__(self, response):\n        self._response = response\n\n    @property\n    def response(self):\n        return self._response\n</code></pre>\n\n<p>then the middleware:        </p>\n\n<pre><code>from myexceptions import ImmediateHttpResponse\n\nclass ImmediateHttpResponseMiddleware(object):\n    \"\"\"Middleware that handles ImmediateHttpResponse exceptions, allowing \n       us to return a response from deep in form handling code.\n    \"\"\"\n    def process_exception(self, request, exception):\n        if isinstance(exception, ImmediateHttpResponse):\n            return exception.response\n        return None\n</code></pre>\n\n<p>This class must be added to your <code>MIDDLEWARE_CLASSES</code> in your <code>settings.py</code> file as <code>'mymiddleware.ImmediateHttpResponseMiddleware'</code>.</p>\n"}], "owner": {"reputation": 1698, "user_id": 2128414, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/EE8ag.jpg?s=128&g=1", "display_name": "Tsuna", "link": "https://stackoverflow.com/users/2128414/tsuna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 1, "accepted_answer_id": 43645802, "answer_count": 1, "score": 0, "last_activity_date": 1493411189, "creation_date": 1493244939, "last_edit_date": 1493245701, "question_id": 43645418, "link": "https://stackoverflow.com/questions/43645418/how-to-properly-refactor-this-function-into-another-file-django", "title": "how to properly refactor this function into another file? django", "body": "<p>I have a <code>try</code> and <code>except</code> which is used super often, so I am thinking of taking it out and make it into a <code>function</code> in other file but I cannot seem to make it work.</p>\n\n<p>Can someone please give me a hand?</p>\n\n<p>this is the code which I use really really often</p>\n\n<pre><code>    try:\n        user = get_object_or_404(User, email=data['email'])\n    except Exception as e:\n        print(e)\n        return JSONresponse(False, e.message)\n</code></pre>\n\n<p>I tried making it into another file and did it this way</p>\n\n<pre><code>def auth_token(data):\n    try:\n        return get_object_or_404(User, email=data['email'])\n    except Exception as e:\n        return JSONresponse({'status': False})\n</code></pre>\n\n<p>then when I call <code>auth_token</code> I did it this way in another way and of course I did import it</p>\n\n<pre><code>user = auth_token(data)\n</code></pre>\n\n<p>I can understand this would then return me <code>JSONresponse({'status': False})</code> and I tried using <code>raise</code> and it would tell me that I can't use <code>JSONresponse</code></p>\n\n<p>Can someone give me an idea how this can be done?</p>\n"}, {"tags": ["python", "objective-c", "core-audio", "extaudiofile"], "answers": [{"comments": [{"owner": {"reputation": 469, "user_id": 799169, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f8bd745fbea53b7cba8b394f9ac7f41b?s=128&d=identicon&r=PG", "display_name": "hoangpx", "link": "https://stackoverflow.com/users/799169/hoangpx"}, "edited": false, "score": 0, "creation_date": 1493255917, "post_id": 43645890, "comment_id": 74342350, "body": "The length of <code>audioTotal</code> is 10 so if I loop <code>fileLengthInFrames*clientFormat.mChannelsPerFrame</code>, it will be out of range. Did I calculate &#39;fileLengthInFrames&#39; twice ?"}, {"owner": {"reputation": 30089, "user_id": 22147, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/x74x2.png?s=128&g=1", "display_name": "Rhythmic Fistman", "link": "https://stackoverflow.com/users/22147/rhythmic-fistman"}, "reply_to_user": {"reputation": 469, "user_id": 799169, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f8bd745fbea53b7cba8b394f9ac7f41b?s=128&d=identicon&r=PG", "display_name": "hoangpx", "link": "https://stackoverflow.com/users/799169/hoangpx"}, "edited": false, "score": 0, "creation_date": 1493257210, "post_id": 43645890, "comment_id": 74342668, "body": "oops, <code>audioTotal</code> is wrong too. its length should be <code>fileLengthInFrames*clientFormat.mChannelsPerFrame</code> too. you fetch <code>fileLengthInFrames</code> from the file, then recalculate it."}, {"owner": {"reputation": 30089, "user_id": 22147, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/x74x2.png?s=128&g=1", "display_name": "Rhythmic Fistman", "link": "https://stackoverflow.com/users/22147/rhythmic-fistman"}, "reply_to_user": {"reputation": 469, "user_id": 799169, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f8bd745fbea53b7cba8b394f9ac7f41b?s=128&d=identicon&r=PG", "display_name": "hoangpx", "link": "https://stackoverflow.com/users/799169/hoangpx"}, "edited": false, "score": 0, "creation_date": 1493257475, "post_id": 43645890, "comment_id": 74342740, "body": "updated answer to use <code>channelsPerBuffer</code> which seems to understand the difference between interleaved and non-interleaved."}], "tags": [], "owner": {"reputation": 30089, "user_id": 22147, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/x74x2.png?s=128&g=1", "display_name": "Rhythmic Fistman", "link": "https://stackoverflow.com/users/22147/rhythmic-fistman"}, "is_accepted": true, "score": 1, "last_activity_date": 1493257996, "last_edit_date": 1493257996, "creation_date": 1493247526, "answer_id": 43645890, "question_id": 43645402, "link": "https://stackoverflow.com/questions/43645402/get-correct-filelengthframes-with-coreaudio/43645890#43645890", "title": "Get correct FileLengthFrames with CoreAudio", "body": "<p>When you have interleaved samples and you \"separate them by code\", you're forgetting to multiply by <code>channelsPerBuffer</code> (which seems to be  interleaved-savvy?), so for stereo you're missing out on half of the samples. Try changing the for loop to </p>\n\n<pre><code>for(int i = 0; i &lt; fileLengthInFrames*channelsPerBuffer; i++) {\n    // display left and right samples here ...\n}\n</code></pre>\n\n<p>The length of <code>audioTotal</code> should also be <code>fileLengthInFrames*channelsPerBuffer</code>. </p>\n\n<p>p.s. why recalculate <code>fileLengthInFrames</code> if client and file sample rates are the same?</p>\n"}], "owner": {"reputation": 469, "user_id": 799169, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f8bd745fbea53b7cba8b394f9ac7f41b?s=128&d=identicon&r=PG", "display_name": "hoangpx", "link": "https://stackoverflow.com/users/799169/hoangpx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 43645890, "answer_count": 1, "score": 1, "last_activity_date": 1493673992, "creation_date": 1493244874, "last_edit_date": 1493673992, "question_id": 43645402, "link": "https://stackoverflow.com/questions/43645402/get-correct-filelengthframes-with-coreaudio", "title": "Get correct FileLengthFrames with CoreAudio", "body": "<p>I'm working on converting my Python code to Objective C to run on ios devices. The code about reading audio file. In Python I'm using AudioSegment to read file , The result is 2 separated channels in array. </p>\n\n<p>For example:</p>\n\n<pre><code>Left channel  [-1,-2,-3,-4,-5,-6,-7,-8,-9,-10]  //length = 10\nRight channel [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]   //length = 10\n</code></pre>\n\n<p>So the total length from python is <strong>20</strong></p>\n\n<p>Here is how I get audio output in objective c</p>\n\n<pre><code>float *audioTotal = malloc(fileLengthInFrames * sizeof(float));\nSInt16 *inputFrames = (SInt16*)bufferList-&gt;mBuffers[0].mData;\nfor(int i = 0; i &lt; fileLengthInFrames; ++i) {\n    audioTotal[i] = (float)inputFrames[i];\n    printf(\"%f \", audioTotal[i]);\n}\n</code></pre>\n\n<p>And output is : </p>\n\n<pre><code>[-1, 1, -2, 2, -3, 3, -4, 4, -5, 5] // length = 10\n</code></pre>\n\n<p>So the out put from objective c is mixed left and right channel. So I have to separate them by code:</p>\n\n<pre><code>if (clientFormat.mChannelsPerFrame &gt; 1) {\n        int indexLeft = 0;\n        int indexRight = 0;\n        float *leftAudio = malloc(fileLengthInFrames* sizeof(float));\n        float *rightAudio = malloc(fileLengthInFrames * sizeof(float));\n        for(int i = 0; i &lt; fileLengthInFrames; i++) {\n            if (i%2 == 0) {\n                leftAudio[indexLeft] = audioTotal[i];\n                printf(\"%f \", leftAudio[indexLeft]);\n                indexLeft ++;\n            } else {\n                rightAudio[indexRight] = audioTotal[i];\n                printf(\"%f \", rightAudio[indexRight]);\n                indexRight ++;\n            }\n        }\n}\n</code></pre>\n\n<p>And now I have 2 separated channel from objective c: </p>\n\n<pre><code>Left channel  [-1,-2,-3,-4,-5]  //length = 5\nRight channel [ 1, 2, 3, 4, 5]   //length = 5\n</code></pre>\n\n<p>So the total length I got from objective c is 10 compare with 20 in python.\nWhere is my rest of data?  Did I miss some steps? Or wrong configuration? \nThanks for help.</p>\n"}, {"tags": ["python", "random"], "comments": [{"owner": {"reputation": 3557, "user_id": 7827863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d4401c9efd5a7a0a9a00f643b1484a25?s=128&d=identicon&r=PG&f=1", "display_name": "qbzenker", "link": "https://stackoverflow.com/users/7827863/qbzenker"}, "edited": false, "score": 0, "creation_date": 1493245329, "post_id": 43645350, "comment_id": 74339399, "body": "This is a great question! Hopefully, a statistician reads this. I don&#39;t think it&#39;s an artifact of your code."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1493245477, "post_id": 43645350, "comment_id": 74339443, "body": "Your intution that you should end up with a sequence that is roughly <code>a, b, a, b, a, b</code> is likely not right. But this is better suited for a probability/math/stats audience"}, {"owner": {"reputation": 315, "user_id": 5761601, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a9ebf68e0e1d012af83f81298bc1c205?s=128&d=identicon&r=PG&f=1", "display_name": "warreee", "link": "https://stackoverflow.com/users/5761601/warreee"}, "edited": false, "score": 0, "creation_date": 1493246335, "post_id": 43645350, "comment_id": 74339731, "body": "As a matter of fact I did ask this first on <a href=\"https://stats.stackexchange.com/questions/276025/taking-two-sets-a-b-out-of-the-same-distribution-merging-and-then-sorting-sh\">CrossValidated</a>. But no luck there yet."}], "answers": [{"tags": [], "owner": {"reputation": 11683, "user_id": 163633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764323a14e554c97ab74177e0bce51d4?s=128&d=identicon&r=PG", "display_name": "Robert Kern", "link": "https://stackoverflow.com/users/163633/robert-kern"}, "is_accepted": true, "score": 4, "last_activity_date": 1493248670, "creation_date": 1493248670, "answer_id": 43646089, "question_id": 43645350, "link": "https://stackoverflow.com/questions/43645350/combining-two-samples-out-of-numpy-random-does-not-end-up-in-a-random-sequence/43646089#43646089", "title": "Combining two samples out of numpy.random does not end up in a random sequence", "body": "<p>~1000 is the expected result. <a href=\"https://en.wikipedia.org/wiki/Wald%E2%80%93Wolfowitz_runs_test\" rel=\"nofollow noreferrer\">Following the Wikipedia article</a> on this statistical test, you have <code>Np = Nn = 1000</code> and <code>N = Np + Nn = 2000</code>. That means that the expected value for the number of runs is <code>mu = 2 * Np * Nn / N + 1</code> which is 1001.</p>\n"}, {"tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": false, "score": 2, "last_activity_date": 1493251501, "creation_date": 1493251501, "answer_id": 43646502, "question_id": 43645350, "link": "https://stackoverflow.com/questions/43645350/combining-two-samples-out-of-numpy-random-does-not-end-up-in-a-random-sequence/43646502#43646502", "title": "Combining two samples out of numpy.random does not end up in a random sequence", "body": "<p>Oh, that reminds me of the <a href=\"https://en.wikipedia.org/wiki/Gambler%27s_fallacy\" rel=\"nofollow noreferrer\">Gambler's fallacy</a>.</p>\n\n<p>I'm not a statistician but to get 2000 runs you would need a 100% chance that <code>A</code> follows <code>B</code> and <code>B</code> follows <code>A</code>. This would indicate that the PRNG has some sort of memory of previous draws. That wouldn't be good...</p>\n\n<p>OTOH, assume you have drawn a value labelled <code>A</code>, then there's a 50% chance to draw another <code>A</code> and a 50% chance to draw a <code>B</code>. So the chance to draw a length-one-run is actually only 50%, the chance to get a length-two run is 25%, for length-three it's 12.5%, for length-four it's 6.25 and so on.</p>\n\n<p>The last part can easily be verified:</p>\n\n<pre><code>import numpy as np\nlist_dist_A = np.random.chisquare(2, 1000)\nlist_dist_B = np.random.chisquare(2, 1000)\n\nlistA = [(value, 'A') for value in list_dist_A]\nlistB = [(value, 'B') for value in list_dist_B]\ncombined = sorted(listA+listB, key=lambda x: x[0])\ncombined = [x[1] for x in combined]\n\nfrom itertools import groupby\nfrom collections import Counter\n\nrunlengths = [len(list(it)) for _, it in groupby(combined)]  # lengths of the individual runs\nprint(Counter(runlengths))  # similar to a histogram\n# Counter({1: 497, 2: 234, 3: 131, 4: 65, 5: 29, 6: 20, 7: 11, 8: 2, 10: 1, 14: 1})\n</code></pre>\n\n<p>So this is actually quite close to the expectation (which would be: <code>1: 500, 2: 250, 3: 125, 4:62, ...</code> as mentioned above). If your assumption would be correct it would be more close to <code>1:2000, 2: 0, ...</code></p>\n"}], "owner": {"reputation": 315, "user_id": 5761601, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a9ebf68e0e1d012af83f81298bc1c205?s=128&d=identicon&r=PG&f=1", "display_name": "warreee", "link": "https://stackoverflow.com/users/5761601/warreee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 2, "accepted_answer_id": 43646089, "answer_count": 2, "score": 3, "last_activity_date": 1493255055, "creation_date": 1493244657, "last_edit_date": 1493255055, "question_id": 43645350, "link": "https://stackoverflow.com/questions/43645350/combining-two-samples-out-of-numpy-random-does-not-end-up-in-a-random-sequence", "title": "Combining two samples out of numpy.random does not end up in a random sequence", "body": "<p>I implemented the <a href=\"https://github.com/warreee/wald-wolfowitz-runs-test\" rel=\"nofollow noreferrer\">Wald-Wolfowitz runs test</a> but during testing I encountered weird behaviour, the steps I take are the following:</p>\n\n<ol>\n<li><p>I take two samples out of the same distribution: </p>\n\n<pre><code>import numpy as np\nlist_dist_A = np.random.chisquare(2, 1000)\nlist_dist_B = np.random.chisquare(2, 1000)\n</code></pre></li>\n<li><p>I concatenate the two lists and sort them, while remembering which number came from which sample. The following function does that and it returns a list of labels [\"A\",\"B\",\"A\",\"A\", ... \"B\"]</p>\n\n<pre><code>def _get_runs_list(list1, list2):\n     # Add labels  \n     l1 = list(map(lambda x: (x, \"A\"), list1))\n     l2 = list(map(lambda x: (x, \"B\"), list2))\n     # Concatenate\n     lst = l1 + l2\n     # Sort\n     sorted_list = sorted(lst, key=lambda x: x[0])\n     # Return only the labels:\n     return [l[1] for l in sorted_list]\n</code></pre></li>\n<li><p>Now I want to calculate the number of runs (a consecutive sequence of identical labels). e.g.:</p>\n\n<ul>\n<li>a,b,a,b has 4 runs </li>\n<li>a,a,a,b,b has 2 runs</li>\n<li>a,b,b,b,a,a has 3 runs</li>\n</ul>\n\n<p>For this I use the following code:</p>\n\n<pre><code>def _calculate_nruns(labels):\n    nruns = 0\n    last_seen = None\n\n    for label in labels:\n        if label != last_seen:\n            nruns += 1\n        last_seen = label\n\n    return nruns\n</code></pre></li>\n</ol>\n\n<p>Since all elements are randomly drawn I thought that I should roughly end up with a sequence <code>a,b,a,b,a,b...</code> So this would mean that the number of runs is roughly 2000. \nHowever as can be seen <a href=\"https://repl.it/H2uZ/0\" rel=\"nofollow noreferrer\">in this snippet on \"repl.it\"</a> this is not the case, it is always roughly around 1000.</p>\n\n<p>Can anyone explain why this is the case?</p>\n"}, {"tags": ["python", "if-statement", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 35013, "user_id": 626853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ILPj4.jpg?s=128&g=1", "display_name": "Aasmund Eldhuset", "link": "https://stackoverflow.com/users/626853/aasmund-eldhuset"}, "is_accepted": false, "score": 1, "last_activity_date": 1493245173, "last_edit_date": 1493245173, "creation_date": 1493244872, "answer_id": 43645401, "question_id": 43645344, "link": "https://stackoverflow.com/questions/43645344/compound-inequality-in-if-statement/43645401#43645401", "title": "Compound inequality in if statement", "body": "<p>The compound comparisons don't \"expand out of\" the dict lookup. <code>\"col_5\" &lt; \"col_6\" &lt; \"col_4\" &lt; \"col_1\" &lt; \"col_2\" &lt; \"col_3\"</code> will be evaluated first, producing <code>False</code> because the strings aren't sorted - so your if statement is actually <code>if row[(False)]:</code>. You need to do this:</p>\n\n<pre><code>if row[\"col_5\"] &lt; row[\"col_6\"] &lt; row[\"col_4\"] &lt; row[\"col_1\"] &lt; row[\"col_2\"] &lt; row[\"col_3\"]:\n</code></pre>\n\n<p>If you have a lot of these expressions, you should probably extract this to a method that takes <code>row</code> and a list of the column names, and uses a loop for the comparisons. If you only have one, but want a somewhat more nice-looking version, try this:</p>\n\n<pre><code>a, b, c, d, e, f = (row[c] for c in (\"col_5\", \"col_6\", \"col_4\", \"col_1\", \"col_2\", \"col_3\"))\nif a &lt; b &lt; c &lt; d &lt; e &lt; f:\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": false, "score": 0, "last_activity_date": 1493245199, "creation_date": 1493245199, "answer_id": 43645472, "question_id": 43645344, "link": "https://stackoverflow.com/questions/43645344/compound-inequality-in-if-statement/43645472#43645472", "title": "Compound inequality in if statement", "body": "<p>Also you can reorder the column names, use the <code>diff</code> function to check the difference along the rows and compare the result with <code>0</code>:</p>\n\n<pre><code>(df[[\"col_5\", \"col_6\", \"col_4\", \"col_1\", \"col_2\", \"col_3\"]]\n   .diff(axis=1).drop('col_5', 1).gt(0).all(1))\n</code></pre>\n\n<p><em>Example</em>:</p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame({\"A\": [1,2], \"B\": [3,1], \"C\": [4,2]})\ndf\n\n#   A   B   C\n#0  1   3   4\n#1  2   1   2\n\ndf.diff(axis=1).drop('A', 1).gt(0).all(1)\n\n#0     True\n#1    False\n#dtype: bool\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3627, "user_id": 1753919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m9UUd.jpg?s=128&g=1", "display_name": "plasmon360", "link": "https://stackoverflow.com/users/1753919/plasmon360"}, "is_accepted": false, "score": 0, "last_activity_date": 1493245773, "creation_date": 1493245773, "answer_id": 43645560, "question_id": 43645344, "link": "https://stackoverflow.com/questions/43645344/compound-inequality-in-if-statement/43645560#43645560", "title": "Compound inequality in if statement", "body": "<p>you could use <code>query</code> for this. See example below</p>\n\n<pre><code>df = pd.DataFrame(np.random.randn(5, 3), columns=['col1','col2','col3'])\nprint df\nprint df.query('col2&gt;col3&gt;col1') # query can accept a string with multiple comparisons. \n</code></pre>\n\n<p>results in</p>\n\n<pre><code>     col1      col2      col3\n0 -0.788909  1.591521  1.709402\n1 -1.563310  1.188993  2.295683\n2 -1.572323 -0.600015 -1.518411\n3  1.786051  0.303291 -0.344720\n4  0.756029 -0.393941  1.059874\n       col1      col2      col3\n2 -1.572323 -0.600015 -1.518411\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 2041197, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b76bc6d0c69839a67dc10801965320c5?s=128&d=identicon&r=PG", "display_name": "apkim221", "link": "https://stackoverflow.com/users/2041197/apkim221"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1388, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1493245773, "creation_date": 1493244630, "question_id": 43645344, "link": "https://stackoverflow.com/questions/43645344/compound-inequality-in-if-statement", "title": "Compound inequality in if statement", "body": "<p>This is a generalized function I want to use to check if each row of a dataframe follows a specific trend in column values. </p>\n\n<pre><code>def follows_trend(row):\n    trend = None\n    if row[(\"col_5\" &lt; \"col_6\" &lt; \"col_4\" &lt; \"col_1\" &lt; \"col_2\" &lt; \"col_3\")]:\n        trend = True        \n    else:\n        trend = False\n    return trend\n</code></pre>\n\n<p>I'll apply it like this</p>\n\n<pre><code>df_trend = df.apply(follows_trend, axis=1)\n</code></pre>\n\n<p>When I do, it returns all <code>True</code> when there are clearly some rows that should return <code>False</code>. I'm not sure if there is something wrong with the inequality I used or the function itself. </p>\n"}, {"tags": ["python", "json"], "comments": [{"owner": {"reputation": 2777, "user_id": 1002371, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/612ee2165cc4115ea14888dbf6ae24cf?s=128&d=identicon&r=PG", "display_name": "a p", "link": "https://stackoverflow.com/users/1002371/a-p"}, "edited": false, "score": 1, "creation_date": 1493244604, "post_id": 43645273, "comment_id": 74339132, "body": "It&#39;s not entirely clear what you&#39;re asking, or what you&#39;ve tried. Maybe check out the guidelines? <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1493244659, "post_id": 43645273, "comment_id": 74339150, "body": "Data can be added to the dictionary just like you would to any other. You can read and write JSON files with Python&#39;s <a href=\"https://docs.python.org/3/library/json.html#module-json\" rel=\"nofollow noreferrer\"><code>json</code></a> module."}, {"owner": {"reputation": 1442, "user_id": 4020610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LdgzYsM5kJw/AAAAAAAAAAI/AAAAAAAAH4E/Qase_JE27jE/photo.jpg?sz=128", "display_name": "Lohmar ASHAR", "link": "https://stackoverflow.com/users/4020610/lohmar-ashar"}, "edited": false, "score": 4, "creation_date": 1493244673, "post_id": 43645273, "comment_id": 74339158, "body": "that&#39;s an invalid construct in both json and python"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1493244869, "post_id": 43645273, "comment_id": 74339229, "body": "The <code>id&#47;power</code> dicts need to be put into a list, and that list should be the value of a key in the outer dict."}], "answers": [{"tags": [], "owner": {"reputation": 1442, "user_id": 4020610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LdgzYsM5kJw/AAAAAAAAAAI/AAAAAAAAH4E/Qase_JE27jE/photo.jpg?sz=128", "display_name": "Lohmar ASHAR", "link": "https://stackoverflow.com/users/4020610/lohmar-ashar"}, "is_accepted": true, "score": 2, "last_activity_date": 1493244998, "creation_date": 1493244998, "answer_id": 43645431, "question_id": 43645273, "link": "https://stackoverflow.com/questions/43645273/converting-this-format-to-a-json-string/43645431#43645431", "title": "Converting this format to a json string", "body": "<p>that's an invalid construct in both JSON and Python\nit should be something like</p>\n\n<pre><code>{\n  \"Module\": \"lights\",\n  \"Values\":[\n      {\n        \"id\": 1,\n        \"power\": 50\n      },\n      {\n        \"id\": 2,\n        \"power\": 0\n      },\n      {\n        \"id\": 3,\n        \"power\": 25\n      }\n  ]\n}\n</code></pre>\n\n<p>grouping all the dicts {_id: ..., power: ...} in a list</p>\n\n<p>taken care of that, converting from JSON to dict and vice-versa one could use the <code>load/loads</code> and <code>dump/dumps</code> methods from the <code>json</code> or <code>simplejson</code> packages</p>\n"}], "owner": {"reputation": 221, "user_id": 5009199, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4e193e9f37d56763ea4f90d52781ac32?s=128&d=identicon&r=PG&f=1", "display_name": "Teragon", "link": "https://stackoverflow.com/users/5009199/teragon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 43645431, "answer_count": 1, "score": -1, "last_activity_date": 1493244998, "creation_date": 1493244153, "last_edit_date": 1493244488, "question_id": 43645273, "link": "https://stackoverflow.com/questions/43645273/converting-this-format-to-a-json-string", "title": "Converting this format to a json string", "body": "<p>I'm trying to dynamically add some data to a dictionary in python which I then convert to a json formatted string.</p>\n\n<pre><code>{\n  \"Module\": \"lights\",\n  {\n    \"id\": 1,\n    \"power\": 50\n  },\n  {\n    \"id\": 2,\n    \"power\": 0\n  },\n  {\n    \"id\": 3,\n    \"power\": 25\n  }\n}\n</code></pre>\n\n<p>the id and power need to be added dynamically how would I achieve this with python? How would I read the same json format as well?</p>\n"}, {"tags": ["python", "django-models", "django-forms", "django-users"], "owner": {"reputation": 2095, "user_id": 2773461, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PJykN.jpg?s=128&g=1", "display_name": "bgarcial", "link": "https://stackoverflow.com/users/2773461/bgarcial"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 309, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1493244095, "creation_date": 1493244095, "question_id": 43645259, "link": "https://stackoverflow.com/questions/43645259/removing-username-field-to-django-abstractbaseuser-customize-model-unknown-fie", "title": "Removing username field to Django AbstractBaseUser customize model - Unknown field(s) (username) specified for User", "body": "<p>I have a custom User model in which the primary key is the <code>email</code> field and this is the <code>USERNAME_FIELD</code> and <code>REQUIRED_FIELD</code> too. My user model is of this way:</p>\n\n<pre><code>class User(AbstractBaseUser, PermissionsMixin):\n\n    '''\n    This is the username field which I've removed ...\n    username = models.CharField(\n        _('username'),\n        max_length=30,\n        primary_key=True,\n        help_text=_('Required. 30 characters or fewer. Letters, digits and @/./+/-/_ only.'),\n        validators=[\n            RegexValidator(\n                r'^[\\w.\u00f1@+-]+$',\n                _('Enter a valid username. This value may contain only '\n                  'letters, numbers ' 'and @/./+/-/_ characters.')\n            ),\n        ],\n        error_messages={\n            'unique': _(\"A user with that username already exists.\"),\n        },\n    )\n    '''\n\n    email = models.EmailField(max_length=254, primary_key=True)\n    USERNAME_FIELD = 'email'\n    REQUIRED_FIELDS = ['email']\n    objects = UserManager()\n</code></pre>\n\n<p>The <code>UserManager</code> class is:</p>\n\n<pre><code>class UserManager(BaseUserManager):\n    use_in_migrations = True\n\n    def _create_user(self, email, password, **extra_fields):\n        \"\"\"\n        Creates and saves a User with the given email and password.\n        \"\"\"\n        if not email:\n            raise ValueError('The given email must be set')\n        email = self.normalize_email(email)\n        user = self.model(email=email, **extra_fields)\n        user.set_password(password)\n        user.save(using=self._db)\n        return user\n\n    def create_user(self, email, password=None, **extra_fields):\n        extra_fields.setdefault('is_superuser', False)\n        return self._create_user(email, password, **extra_fields)\n\n    def create_superuser(self, email, password, **extra_fields):\n        extra_fields.setdefault('is_superuser', True)\n\n        if extra_fields.get('is_superuser') is not True:\n            raise ValueError('Superuser must have is_superuser=True.')\n\n        return self._create_user(email, password, **extra_fields)\n</code></pre>\n\n<p>Like I recently I've removed the <code>username</code> field, when I execute the <code>makemigrations</code> process, I get this error:</p>\n\n<pre><code> File \"/home/bgarcial/workspace/fuupbol_project/userprofiles/forms.py\", line 26, in &lt;module&gt;\n    class CustomUserCreationForm(UserCreationForm):\n  File \"/home/bgarcial/.virtualenvs/fuupbol2/lib/python3.5/site-packages/django/forms/models.py\", line 257, in __new__\n    raise FieldError(message)\ndjango.core.exceptions.FieldError: Unknown field(s) (username) specified for User\n</code></pre>\n\n<p>What happen is that in my forms.py I am using the <code>UserCreationForm</code> class  to inherit from her, to create user in my admin in my <code>CustomUserCreationForm</code> class </p>\n\n<p>class CustomUserCreationForm(UserCreationForm):\n    class Meta(UserCreationForm.Meta):\n        model = User</p>\n\n<p>In my my <code>admin.py</code> </p>\n\n<pre><code>class CustomUserAdmin(UserAdmin,):\n    form = CustomUserChangeForm\n    # Here I call the CustomUserCreationForm which inherit from\n    # UserCreationForm\n    add_form = CustomUserCreationForm\n    fieldsets = UserAdmin.fieldsets + (\n        (\n            None, {\n                'fields':(\n                  ...  some fields  ...\n                )\n            }\n        ),\n    )\n</code></pre>\n\n<p>In this admin.py file I call the CustomUserCreationForm which inherit from\n<code>UserCreationForm</code> django pre-built class</p>\n\n<p>What happen is that when I going to the <code>UserCreationForm</code> <a href=\"https://github.com/django/django/blob/master/django/contrib/auth/forms.py#L87\" rel=\"nofollow noreferrer\">source files</a> in their <code>class Meta</code> there is the <code>username</code> field in the <code>fields</code> attribute and the <code>field_classes</code> attribute</p>\n\n<p>Is for this reason that the <code>username</code> field is persistent in my custom user model schema, really?</p>\n\n<p>How to can remove the username without take in account this detail or follow using the <code>UserCreateForm</code> class and their implications ... ?</p>\n\n<p>There is a better alternative to accomplish remove the <code>username</code> field in my <code>User</code> model?</p>\n"}, {"tags": ["python", "django", "django-forms", "django-validation"], "comments": [{"owner": {"reputation": 700, "user_id": 2516846, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fff320b753b6fa1804a87752b63468a1?s=128&d=identicon&r=PG&f=1", "display_name": "kujosHeist", "link": "https://stackoverflow.com/users/2516846/kujosheist"}, "edited": false, "score": 1, "creation_date": 1493246904, "post_id": 43645246, "comment_id": 74339921, "body": "Not sure what you are asking here, none of the fields are boolean. Are you saying if the user enters True in the name field it validates? Are you programically filling the form or using the form fields in a template?"}, {"owner": {"reputation": 18471, "user_id": 4597501, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/AYPrE.jpg?s=128&g=1", "display_name": "All \u0406\u0455 V\u0430\u0438\u0456\u0442y", "link": "https://stackoverflow.com/users/4597501/all-%d0%86%d1%95-v%d0%b0%d0%b8%d1%96%d1%82y"}, "reply_to_user": {"reputation": 700, "user_id": 2516846, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fff320b753b6fa1804a87752b63468a1?s=128&d=identicon&r=PG&f=1", "display_name": "kujosHeist", "link": "https://stackoverflow.com/users/2516846/kujosheist"}, "edited": false, "score": 0, "creation_date": 1493278265, "post_id": 43645246, "comment_id": 74350180, "body": "@kujosHeist Yeah, I am validating data using django rest framework"}], "owner": {"reputation": 18471, "user_id": 4597501, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/AYPrE.jpg?s=128&g=1", "display_name": "All \u0406\u0455 V\u0430\u0438\u0456\u0442y", "link": "https://stackoverflow.com/users/4597501/all-%d0%86%d1%95-v%d0%b0%d0%b8%d1%96%d1%82y"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 203, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1493244026, "creation_date": 1493244026, "question_id": 43645246, "link": "https://stackoverflow.com/questions/43645246/django-forms-validating-boolean-values-and-numbers-as-string", "title": "Django forms validating boolean values and numbers as string", "body": "<p>I have a form as shown below,</p>\n\n<pre><code>class UserForm(forms.ModelForm):\n    name = forms.CharField(max_length=255)\n    tagline = forms.CharField(max_length=255)\n    privacy = forms.CharField(max_length=10)\n    description = forms.CharField(max_length=2000)\n    home_id = forms.CharField(max_length=32, required=False)\n\n    class Meta:\n        model = User\n        fields = ['name', 'tagline', 'privacy', 'description']\n</code></pre>\n\n<p>and when I pass any field as a boolean or numerical value (say, name=True) , the form validates it form.is_valid returns True while if I skip one field (say name=None), the form says the form is invalid. The form works, but not for a boolean value for any field.</p>\n\n<p>Form also validates correctly for floats, lists and dicts. What am I doing wrong? The same happens for a <code>form.Form</code> without mentioning a model. </p>\n"}, {"tags": ["python", "excel", "python-3.x"], "comments": [{"owner": {"reputation": 1442, "user_id": 4020610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LdgzYsM5kJw/AAAAAAAAAAI/AAAAAAAAH4E/Qase_JE27jE/photo.jpg?sz=128", "display_name": "Lohmar ASHAR", "link": "https://stackoverflow.com/users/4020610/lohmar-ashar"}, "edited": false, "score": 0, "creation_date": 1493244204, "post_id": 43645222, "comment_id": 74338948, "body": "1. you are reading and writing the same file at the same time (might not be a problem ... haven&#39;t tested ... who knows) 2. in the you are trying to use the reader on order to do the writing or something similar ( shouldn&#39;t work/ provide the expected result) 3.you have 2 loops with the same iterator (the &quot;row&quot; variable) try using a &quot;temp file&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 2679, "user_id": 1951317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd2327196ee4a159c7ee3897dde25b6?s=128&d=identicon&r=PG", "display_name": "ox.", "link": "https://stackoverflow.com/users/1951317/ox"}, "edited": false, "score": 0, "creation_date": 1493245734, "post_id": 43645295, "comment_id": 74339532, "body": "The above answer is write only, create only.  If you want to read and then write use my other answer.  I hope that helps!  \u22118\u2022D"}], "tags": [], "owner": {"reputation": 2679, "user_id": 1951317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd2327196ee4a159c7ee3897dde25b6?s=128&d=identicon&r=PG", "display_name": "ox.", "link": "https://stackoverflow.com/users/1951317/ox"}, "is_accepted": false, "score": 1, "last_activity_date": 1493244314, "creation_date": 1493244314, "answer_id": 43645295, "question_id": 43645222, "link": "https://stackoverflow.com/questions/43645222/exporting-a-string-into-a-specific-column-in-excel/43645295#43645295", "title": "Exporting a string into a specific column in Excel", "body": "<p>Try this:</p>\n\n<p><a href=\"http://xlsxwriter.readthedocs.io/example_demo.html#ex-demo\" rel=\"nofollow noreferrer\">http://xlsxwriter.readthedocs.io/example_demo.html#ex-demo</a></p>\n\n<p>Has the below example:</p>\n\n<pre><code>##############################################################################\n#\n# A simple example of some of the features of the XlsxWriter Python module.\n#\n# Copyright 2013-2016, John McNamara, jmcnamara@cpan.org\n#\nimport xlsxwriter\n\n\n# Create an new Excel file and add a worksheet.\nworkbook = xlsxwriter.Workbook('demo.xlsx')\nworksheet = workbook.add_worksheet()\n\n# Widen the first column to make the text clearer.\nworksheet.set_column('A:A', 20)\n\n# Add a bold format to use to highlight cells.\nbold = workbook.add_format({'bold': True})\n\n# Write some simple text.\nworksheet.write('A1', 'Hello')\n\n# Text with formatting.\nworksheet.write('A2', 'World', bold)\n\n# Write some numbers, with row/column notation.\nworksheet.write(2, 0, 123)\nworksheet.write(3, 0, 123.456)\n\n# Insert an image.\nworksheet.insert_image('B5', 'logo.png')\n\nworkbook.close()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2679, "user_id": 1951317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd2327196ee4a159c7ee3897dde25b6?s=128&d=identicon&r=PG", "display_name": "ox.", "link": "https://stackoverflow.com/users/1951317/ox"}, "is_accepted": false, "score": 0, "last_activity_date": 1493245519, "creation_date": 1493245519, "answer_id": 43645521, "question_id": 43645222, "link": "https://stackoverflow.com/questions/43645222/exporting-a-string-into-a-specific-column-in-excel/43645521#43645521", "title": "Exporting a string into a specific column in Excel", "body": "<p>I have a better answer...</p>\n\n<p>From this page:</p>\n\n<p><a href=\"http://openpyxl.readthedocs.io/en/default/usage.html\" rel=\"nofollow noreferrer\">http://openpyxl.readthedocs.io/en/default/usage.html</a></p>\n\n<p>Try these two in order (below)...</p>\n\n<p>Write a workbook</p>\n\n<pre><code>&gt;&gt;&gt; from openpyxl import Workbook\n&gt;&gt;&gt; from openpyxl.compat import range\n&gt;&gt;&gt; from openpyxl.utils import get_column_letter\n&gt;&gt;&gt;\n&gt;&gt;&gt; wb = Workbook()\n&gt;&gt;&gt;\n&gt;&gt;&gt; dest_filename = 'empty_book.xlsx'\n&gt;&gt;&gt;\n&gt;&gt;&gt; ws1 = wb.active\n&gt;&gt;&gt; ws1.title = \"range names\"\n&gt;&gt;&gt;\n&gt;&gt;&gt; for row in range(1, 40):\n...     ws1.append(range(600))\n&gt;&gt;&gt;\n&gt;&gt;&gt; ws2 = wb.create_sheet(title=\"Pi\")\n&gt;&gt;&gt;\n&gt;&gt;&gt; ws2['F5'] = 3.14\n&gt;&gt;&gt;\n&gt;&gt;&gt; ws3 = wb.create_sheet(title=\"Data\")\n&gt;&gt;&gt; for row in range(10, 20):\n...     for col in range(27, 54):\n...         _ = ws3.cell(column=col, row=row, value=\"{0}\".format(get_column_letter(col)))\n&gt;&gt;&gt; print(ws3['AA10'].value)\nAA\n&gt;&gt;&gt; wb.save(filename = dest_filename)\n</code></pre>\n\n<p>Read an existing workbook</p>\n\n<pre><code>&gt;&gt;&gt; from openpyxl import load_workbook\n&gt;&gt;&gt; wb = load_workbook(filename = 'empty_book.xlsx')\n&gt;&gt;&gt; sheet_ranges = wb['range names']\n&gt;&gt;&gt; print(sheet_ranges['D18'].value)\n3\n</code></pre>\n\n<p>Totally worked for me!</p>\n\n<p>\u22118\u2022D</p>\n"}], "owner": {"reputation": 447, "user_id": 7711899, "user_type": "registered", "accept_rate": 35, "profile_image": "https://graph.facebook.com/10202875997418689/picture?type=large", "display_name": "Bruno", "link": "https://stackoverflow.com/users/7711899/bruno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1493245519, "creation_date": 1493243895, "last_edit_date": 1493244865, "question_id": 43645222, "link": "https://stackoverflow.com/questions/43645222/exporting-a-string-into-a-specific-column-in-excel", "title": "Exporting a string into a specific column in Excel", "body": "<p>All I want to learn is how to make the ninth column contain Z (the link to the corresponding download file)\nI do not get any errors, but it does not execute what I want it to execute.\nAny help is really appreciated.    </p>\n\n<pre><code>import csv; import glob; import os\nfrom urllib.request import Request, urlopen\npath = 'C:\\\\Users\\\\bruno.rojas\\\\Desktop\\\\Python_Data\\\\Test'; extension = \n'csv'; os.chdir(path)\n\n\nfile_name = 'TESTEXCEL'\n# Creates empty lists that will hold their corresponding values\nlinks = []\ndef WebGrab(url, filename):\n    req = Request(url, headers={\"User-Agent\": \"Mozilla/5.0\"})\n    webpage = urlopen(req).read()\n    text_file = open(filename+'.csv', \"wb\")\n    text_file.write(webpage)\n    text_file.close()\n    return text_file\nwith \nopen('C:\\\\Users\\\\bruno.rojas\\\\Desktop\\\\Python_Data\\\\test\\\\'+file_name+'.csv') as f:\nreader = csv.reader(f)\nwriter = csv.writer(f)\nfor row in reader:\n    links.append(\"http://chart.finance.yahoo.com/table.csv?s=\"+row[0]+\"&amp;a=\"+row[3]+\"&amp;b=\"+row[4]+\"&amp;c=\"+row[2]+\"&amp;d=\"+row[7]+\"&amp;e=\"+row[8]+\"&amp;f=\"+row[6]+\"&amp;g=d&amp;ignore=.csv\")\n    for z in links:\n        WebGrab(z, row[0])\n        for row in reader:\n            row[9] = z\n</code></pre>\n"}, {"tags": ["python", "function", "exception", "methods"], "comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1493244063, "post_id": 43645187, "comment_id": 74338890, "body": "Virtually anything can raise an exception, particularly if you pass it arguments it can&#39;t handle."}, {"owner": {"reputation": 127, "user_id": 6388442, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ea04940de943380ca237f30c669078b1?s=128&d=identicon&r=PG", "display_name": "gusg21", "link": "https://stackoverflow.com/users/6388442/gusg21"}, "edited": false, "score": 0, "creation_date": 1493244250, "post_id": 43645187, "comment_id": 74338968, "body": "By &quot;which Python method can raise which Exception or Error&quot; do you mean which method <i>will</i> raise it, or just has the ability to raise it?"}, {"owner": {"reputation": 582, "user_id": 7637142, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e278c1bcb37e4b07da32c6e63027aee7?s=128&d=identicon&r=PG&f=1", "display_name": "no0by5", "link": "https://stackoverflow.com/users/7637142/no0by5"}, "edited": false, "score": 1, "creation_date": 1493244460, "post_id": 43645187, "comment_id": 74339049, "body": "I mean the Excpetions/Errors which possibly can be raised by a specific method."}, {"owner": {"reputation": 32227, "user_id": 2337736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77aacbcecad375ad6d8c45cfe43afbc5?s=128&d=identicon&r=PG", "display_name": "Peter DeGlopper", "link": "https://stackoverflow.com/users/2337736/peter-deglopper"}, "edited": false, "score": 0, "creation_date": 1493244481, "post_id": 43645187, "comment_id": 74339058, "body": "Then the answer is &quot;no&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 13885, "user_id": 7811673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc232c9c0c9748fdd3dec0d5b816fb7?s=128&d=identicon&r=PG&f=1", "display_name": "t.m.adam", "link": "https://stackoverflow.com/users/7811673/t-m-adam"}, "is_accepted": false, "score": 1, "last_activity_date": 1493244886, "last_edit_date": 1493244886, "creation_date": 1493244050, "answer_id": 43645250, "question_id": 43645187, "link": "https://stackoverflow.com/questions/43645187/is-there-a-way-to-find-out-which-python-method-can-raise-which-exception-or-erro/43645250#43645250", "title": "Is there a way to find out which Python method can raise which Exception or Error", "body": "<p>You can find the name of the exception with <code>__name__</code> , example :  </p>\n\n<pre><code>try : \n    some_function()\nexcept Exception as ex : \n    print('function: {0}, exception: {1}'.format(some_function.__name__, type(ex).__name__))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 180853, "user_id": 424499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc2071afd499daef001e75e14d7f9cce?s=128&d=identicon&r=PG", "display_name": "Raymond Hettinger", "link": "https://stackoverflow.com/users/424499/raymond-hettinger"}, "is_accepted": true, "score": 6, "last_activity_date": 1493244591, "last_edit_date": 1493244591, "creation_date": 1493244060, "answer_id": 43645253, "question_id": 43645187, "link": "https://stackoverflow.com/questions/43645187/is-there-a-way-to-find-out-which-python-method-can-raise-which-exception-or-erro/43645253#43645253", "title": "Is there a way to find out which Python method can raise which Exception or Error", "body": "<p>In general, the answer is no.  Some of the exceptions are documented but most just follow a general pattern that can be learned.  <em>SyntaxError</em> is checked first and is raised for syntactically invalid code.  <em>NameError</em> arises when a variable is undefined (not assigned yet or misspelled).  <em>TypeError</em> is raised for the wrong number of arguments or mismatched data types.  <em>ValueError</em> means the type is correct and but the value doesn't make sense for the function (i.e. negative inputs to math.sqrt().  If the value is an index in a sequence lookup, <em>IndexError</em> is raised.  If the value is a key for a mapping lookup, <em>KeyError</em> is raised.  Another common exception is <em>AttributeError</em> for missing attributes.  <em>IOError</em> is for failed I/O.  And <em>OSError</em> for operating system errors.</p>\n\n<p>Besides learning the common patterns, it is usually easy to just run a function and see what exception it raises in a given circumstance.</p>\n\n<p>In general a function cannot know or document all the possible errors, because the inputs can raise their own exceptions.  Consider this function:</p>\n\n<pre><code>def f(a, b):\n    return a + b\n</code></pre>\n\n<p>It can raise <em>TypeError</em> if the number of arguments are wrong or if <em>a</em> doesn't support the <code>__add__</code> method.  However, the underlying data can raise different exceptions:</p>\n\n<pre><code>&gt;&gt;&gt; f(10)\n\nTraceback (most recent call last):\n  File \"&lt;pyshell#3&gt;\", line 1, in &lt;module&gt;\n    f(10)\nTypeError: f() takes exactly 2 arguments (1 given)\n&gt;&gt;&gt; f(10, 20)\n30\n&gt;&gt;&gt; f('hello', 'world')\n'helloworld'\n&gt;&gt;&gt; f(10, 'world')\n\nTraceback (most recent call last):\n  File \"&lt;pyshell#6&gt;\", line 1, in &lt;module&gt;\n    f(10, 'world')\n  File \"&lt;pyshell#2&gt;\", line 2, in f\n    return a + b\nTypeError: unsupported operand type(s) for +: 'int' and 'str'\n&gt;&gt;&gt; class A:\n    def __init__(self, x):\n        self.x = x\n    def __add__(self, other):\n        raise RuntimeError(other)\n\n&gt;&gt;&gt; f(A(5), A(7))\n\nTraceback (most recent call last):\n  File \"&lt;pyshell#13&gt;\", line 1, in &lt;module&gt;\n    f(A(5), A(7))\n  File \"&lt;pyshell#2&gt;\", line 2, in f\n    return a + b\n  File \"&lt;pyshell#12&gt;\", line 5, in __add__\n    raise RuntimeError(other)\nRuntimeError: &lt;__main__.A instance at 0x103ce2ab8&gt;\n</code></pre>\n"}], "owner": {"reputation": 582, "user_id": 7637142, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e278c1bcb37e4b07da32c6e63027aee7?s=128&d=identicon&r=PG&f=1", "display_name": "no0by5", "link": "https://stackoverflow.com/users/7637142/no0by5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 43645253, "answer_count": 2, "score": 2, "last_activity_date": 1493397835, "creation_date": 1493243738, "last_edit_date": 1493397835, "question_id": 43645187, "link": "https://stackoverflow.com/questions/43645187/is-there-a-way-to-find-out-which-python-method-can-raise-which-exception-or-erro", "title": "Is there a way to find out which Python method can raise which Exception or Error", "body": "<p>Is there a way to find out which Python method can raise which Exception or Error? I didn't find much about it in the official Python documentation.</p>\n"}, {"tags": ["python", "python-2.7", "opencv", "microsoft-cognitive", "face-api"], "answers": [{"tags": [], "owner": {"reputation": 1169, "user_id": 2687601, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d07b3950a409b02bab9a49f08bc6cb93?s=128&d=identicon&r=PG", "display_name": "Dawid Laszuk", "link": "https://stackoverflow.com/users/2687601/dawid-laszuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1493249835, "creation_date": 1493249835, "answer_id": 43646274, "question_id": 43645100, "link": "https://stackoverflow.com/questions/43645100/face-api-python/43646274#43646274", "title": "Face API Python", "body": "<p>It seems like you need to use your API key when connecting to Face API. That's why your second example works and the others don't.</p>\n\n<p>Code 401 means that you're unauthorised, i.e. at that point you didn't log in with your key.</p>\n\n<p>Maybe it'd be easier for you to try and use <a href=\"http://docs.python-requests.org/en/master/\" rel=\"nofollow noreferrer\">requests</a> instead of urllib.</p>\n"}, {"tags": [], "owner": {"reputation": 718, "user_id": 2268644, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b0f13b5820e7576f6b12ecea25c9358c?s=128&d=identicon&r=PG", "display_name": "Xuan Hu", "link": "https://stackoverflow.com/users/2268644/xuan-hu"}, "is_accepted": false, "score": 0, "last_activity_date": 1504258309, "creation_date": 1504258309, "answer_id": 45997188, "question_id": 43645100, "link": "https://stackoverflow.com/questions/43645100/face-api-python/45997188#45997188", "title": "Face API Python", "body": "<p>The first and error is caused by sending file object instead of file content. You should send <code>image.read()</code> instead of <code>image</code>.</p>\n\n<p>The second error is caused by lacking of subscription key in the request header.</p>\n\n<p>For the last error, I suspect you may have read the image file object once and thus reading it again will return empty result. You can try to send file path instead and it should work with the helper in Face API Python SDK.</p>\n"}], "owner": {"reputation": 316, "user_id": 7457965, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/127abde82ca0cb31bc717c9c1c6b7a4d?s=128&d=identicon&r=PG&f=1", "display_name": "egorkh", "link": "https://stackoverflow.com/users/7457965/egorkh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 609, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1504258309, "creation_date": 1493243324, "last_edit_date": 1493261386, "question_id": 43645100, "link": "https://stackoverflow.com/questions/43645100/face-api-python", "title": "Face API Python", "body": "<p>I am trying to use Face API Python 2.7. I wanted to make gender recognition by photo but always getting the error. This is my code:</p>\n\n<pre><code>from six.moves import urllib\nimport httplib\nimport json\nparams = urllib.urlencode({\n\n    'returnFaceId': 'true',\n    'returnFaceAttributes': 'true',\n    'returnFaceAttributes': '{string}',\n})\n headers = {\n    'ocp-apim-subscription-key': \"ee6b8785e7504dfe91efb96d37fc7f51\",\n    'content-type': \"application/octet-stream\"\n    }\nimg = open(\"d:/Taylor.jpg\", \"rb\")\n\nconn = httplib.HTTPSConnection(\"api.projectoxford.ai\") \n\nconn.request(\"POST\",  \"/vision/v1.0/tag?%s\" % params, img, headers)\n\nres = conn.getresponse()\ndata = res.read()\nconn.close()\n</code></pre>\n\n<p>I've got this error :</p>\n\n<pre><code>  Traceback (most recent call last):\n\n  File \"&lt;ipython-input-314-df31294bc16f&gt;\", line 3, in &lt;module&gt;\n    res = conn.getresponse()\n\n  File \"d:\\Anaconda2\\lib\\httplib.py\", line 1136, in getresponse\n    response.begin()\n\n  File \"d:\\Anaconda2\\lib\\httplib.py\", line 453, in begin\n    version, status, reason = self._read_status()\n\n  File \"d:\\Anaconda2\\lib\\httplib.py\", line 409, in _read_status\n    line = self.fp.readline(_MAXLINE + 1)\n\n  File \"d:\\Anaconda2\\lib\\socket.py\", line 480, in readline\n    data = self._sock.recv(self._rbufsize)\n\n  File \"d:\\Anaconda2\\lib\\ssl.py\", line 756, in recv\n    return self.read(buflen)\n\n  File \"d:\\Anaconda2\\lib\\ssl.py\", line 643, in read\n    v = self._sslobj.read(len)\n\nerror: [Errno 10054] \n</code></pre>\n\n<p>If I use link instead photo:</p>\n\n<p><code>img_url='https://raw.githubusercontent.com/Microsoft/Cognitive-Face-Windows/master/Data/detection1.jpg'</code></p>\n\n<pre><code>conn = httplib.HTTPSConnection(\"api.projectoxford.ai\")\nconn.request(\"POST\",  \"/vision/v1.0/tag?%s\" % params, img_url, headers)\nres = conn.getresponse()\ndata = res.read()\nconn.close()\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code> data\nOut[330]: '{ \"statusCode\": 401, \"message\": \"Access denied due to invalid subscription key. Make sure to provide a valid key for an active subscription.\" }'\n</code></pre>\n\n<p>If I use:</p>\n\n<pre><code>KEY = 'ee6b8785e7504dfe91efb96d37fc7f51'  \nCF.Key.set(KEY)\n\nimg_url = 'https://raw.githubusercontent.com/Microsoft/Cognitive-Face-Windows/master/Data/detection1.jpg'\nresult = CF.face.detect(img_url)\n</code></pre>\n\n<p>all works fine:</p>\n\n<pre><code>result\n[{u'faceId': u'52c0d1ac-f041-49cd-a587-e81ef67be2fb',\n  u'faceRectangle': {u'height': 213,\n   u'left': 154,\n   u'top': 207,\n   u'width': 213}}]\n</code></pre>\n\n<p>But in this case I don't know how to use method <code>returnFaceAttribute</code> (for gender detection) \nand also if I use <code>img</code> in <code>result = CF.face.detect(img_url)</code> instead <code>img_url</code>\nI get an error: status_code: 400</p>\n\n<pre><code>response: {\"error\":{\"code\":\"InvalidImageSize\",\"message\":\"Image size is too small or too big.\"}}\nTraceback (most recent call last):\n\n  File \"&lt;ipython-input-332-3fe2623ccadc&gt;\", line 1, in &lt;module&gt;\n    result = CF.face.detect(img)\n\n  File \"d:\\Anaconda2\\lib\\site-packages\\cognitive_face\\face.py\", line 41, in detect\n    data=data)\n\n  File \"d:\\Anaconda2\\lib\\site-packages\\cognitive_face\\util.py\", line 84, in request\n    error_msg.get('message'))\n\nCognitiveFaceException: Image size is too small or too big. \n</code></pre>\n\n<p>This happends with all sorts of img sizes.</p>\n\n<p>Could anyone explain how to solve these problems?</p>\n"}, {"tags": ["python", "authentication", "oauth", "lyft-api"], "answers": [{"tags": [], "owner": {"reputation": 186, "user_id": 5006787, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AlSWodjIxf8/AAAAAAAAAAI/AAAAAAAAWn0/FN0LXA83FkE/photo.jpg?sz=128", "display_name": "Josh Cincinnati", "link": "https://stackoverflow.com/users/5006787/josh-cincinnati"}, "is_accepted": false, "score": 1, "last_activity_date": 1493257956, "creation_date": 1493257956, "answer_id": 43647373, "question_id": 43645095, "link": "https://stackoverflow.com/questions/43645095/automating-3-factor-authentication-through-a-script-for-the-lyft-api/43647373#43647373", "title": "Automating 3-factor authentication through a script for the Lyft Api", "body": "<p>[Full Disclosure: I'm one of Lyft's Developer Advocates]</p>\n\n<p>The only way to get that data is by requesting the<code>rides.request</code> scope is through the 3-legged OAuth flow (sorry about that). However, you only need to request this external authorization once if you ask for the <code>offline</code> scope as part of the initial authorization. If you have that scope requested initially, you can use <code>refresh_token</code>s as outlined here and not get prompted for the external URL:</p>\n\n<p><a href=\"https://developer.lyft.com/docs/authentication#section-step-5-refreshing-the-access-token\" rel=\"nofollow noreferrer\">https://developer.lyft.com/docs/authentication#section-step-5-refreshing-the-access-token</a></p>\n\n<p>If you're only using this script locally I'd recommend going through this authorization once and then building in refresh token logic into your script if your token has expired. Hope that helps!</p>\n"}], "owner": {"reputation": 1644, "user_id": 883910, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/LT8wz.jpg?s=128&g=1", "display_name": "Mahir", "link": "https://stackoverflow.com/users/883910/mahir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 528, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1493257956, "creation_date": 1493243297, "question_id": 43645095, "link": "https://stackoverflow.com/questions/43645095/automating-3-factor-authentication-through-a-script-for-the-lyft-api", "title": "Automating 3-factor authentication through a script for the Lyft Api", "body": "<p>I'm trying to use the <a href=\"https://pypi.python.org/pypi/lyft_rides\" rel=\"nofollow noreferrer\">Lyft rides</a> python API to access Lyft data.  Specifically, I'm trying to access the <a href=\"https://developer.lyft.com/v1/reference#availability-ride-estimates\" rel=\"nofollow noreferrer\">ride estimate endpoint</a> .</p>\n\n<pre><code>from lyft_rides.auth import ClientCredentialGrant\nfrom lyft_rides.session import Session\nfrom lyft_rides.client import LyftRidesClient\n\nauth_flow = ClientCredentialGrant(client_id=MY_ID, client_secret=MY_SECRET, scopes=\"public\")\nsession = auth_flow.get_session()\nclient = LyftRidesClient(session)\n\nresponse = client.get_cost_estimates(start_latitude=start_lat, start_longitude=start_long, end_latitude=end_lat, end_longitude=end_long)\n</code></pre>\n\n<p><strong>However, the surge rate in the response data is always 0</strong>, even during surge hours, and I've diagnosed that it's because I'm not utilizing the 3-legged authentication.</p>\n\n<p>From the <a href=\"https://developer.lyft.com/docs/authentication\" rel=\"nofollow noreferrer\">lyft developer docs</a>, </p>\n\n<p><strong>3-Legged flow for accessing user-specific endpoints.</strong></p>\n\n<blockquote>\n  <p>To make ride\n  requests or otherwise access user data, the user must grant you\n  access. Users who don't have a Lyft account will be prompted to create\n  a new account if they are directed through the following flow.</p>\n</blockquote>\n\n<p>From the <a href=\"https://pypi.python.org/pypi/lyft_rides\" rel=\"nofollow noreferrer\">python docs</a>,</p>\n\n<p><strong>Authorization</strong></p>\n\n<blockquote>\n  <p>If you need access to a Lyft user\u2019s account in order to make requests\n  on their behalf, you will go through a \u201c3-legged\u201d flow. In this case,\n  you will need the user to grant access to your application through the\n  OAuth 2.0 Authorization Code flow. See Lyft API docs.</p>\n  \n  <p>The Authorization Code flow is a two-step authorization process. The\n  first step is having the user authorize your app and the second\n  involves requesting an OAuth 2.0 access token from Lyft. This process\n  is mandatory if you want to take actions on behalf of a user or access\n  their information.</p>\n</blockquote>\n\n<pre><code>from lyft_rides.auth import AuthorizationCodeGrant\nauth_flow = AuthorizationCodeGrant(\n    YOUR_CLIENT_ID,\n    YOUR_CLIENT_SECRET,\n    YOUR_PERMISSION_SCOPES,\n)\nauth_url = auth_flow.get_authorization_url()\n</code></pre>\n\n<blockquote>\n  <p>Navigate the user to the auth_url where they can grant access to your\n  application. After, they will be redirected to a redirect_url with the\n  format REDIRECT_URL?code=UNIQUE_AUTH_CODE. Use this redirect_url to\n  create a session and start LyftRidesClient.</p>\n</blockquote>\n\n<pre><code>session = auth_flow.get_session(redirect_url)\nclient = LyftRidesClient(session)\ncredentials = session.oauth2credential\n</code></pre>\n\n<blockquote>\n  <p>Keep credentials information in a secure data store and reuse them to\n  make API calls on behalf of your user. The SDK will handle the token\n  refresh for you automatically when it makes API requests with a\n  LyftRidesClient.</p>\n</blockquote>\n\n<p><strong>Question</strong></p>\n\n<p>I'm trying to automate the python request within a script.  Given that the 3rd leg of the authentication requires manually visiting a url and obtaining a code, is it possible to do this through a script?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 1, "creation_date": 1493243372, "post_id": 43645064, "comment_id": 74338601, "body": "That error message doesn&#39;t seem to refer to the actual code you posted"}, {"owner": {"reputation": 21, "user_id": 7126214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4tBlqVgrsZ0/AAAAAAAAAAI/AAAAAAAAVOw/Vt8fDoju-j8/photo.jpg?sz=128", "display_name": "Aaron Maurer", "link": "https://stackoverflow.com/users/7126214/aaron-maurer"}, "reply_to_user": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1493243411, "post_id": 43645064, "comment_id": 74338618, "body": "I tried to fix up and sync some code but now I get this error  File &quot;CoffeePi_Test/Main.py&quot;, line 14 SyntaxError: Non-ASCII character &#39;\\xe2&#39; in file CoffeePi_Test/Main.py on line 14, but no encoding declared; see <a href=\"http://python.org/dev/peps/pep-0263/\" rel=\"nofollow noreferrer\">python.org/dev/peps/pep-0263</a> for details"}, {"owner": {"reputation": 4274, "user_id": 5113071, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/27afe5aa502eb75ce05a49b47846889d?s=128&d=identicon&r=PG", "display_name": "Shawn Mehan", "link": "https://stackoverflow.com/users/5113071/shawn-mehan"}, "edited": false, "score": 1, "creation_date": 1493243464, "post_id": 43645064, "comment_id": 74338641, "body": "You posted your tokens in your code. You should go and delete those tokens now and issue new ones before someone or somebot spams the universe with your tokens...."}, {"owner": {"reputation": 21, "user_id": 7126214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4tBlqVgrsZ0/AAAAAAAAAAI/AAAAAAAAVOw/Vt8fDoju-j8/photo.jpg?sz=128", "display_name": "Aaron Maurer", "link": "https://stackoverflow.com/users/7126214/aaron-maurer"}, "edited": false, "score": 0, "creation_date": 1493244033, "post_id": 43645064, "comment_id": 74338875, "body": "OOPS! Looks like they have been hidden. I will not do that again!"}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1493244128, "post_id": 43645064, "comment_id": 74338915, "body": "They are still in the edit history. I just read them now. Delete them and create new ones."}, {"owner": {"reputation": 21, "user_id": 7126214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4tBlqVgrsZ0/AAAAAAAAAAI/AAAAAAAAVOw/Vt8fDoju-j8/photo.jpg?sz=128", "display_name": "Aaron Maurer", "link": "https://stackoverflow.com/users/7126214/aaron-maurer"}, "edited": false, "score": 0, "creation_date": 1493245432, "post_id": 43645064, "comment_id": 74339430, "body": "Thank you for the heads up. I have deleted and created new ones."}, {"owner": {"reputation": 3397, "user_id": 7711283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qCfAB.jpg?s=128&g=1", "display_name": "Claudio", "link": "https://stackoverflow.com/users/7711283/claudio"}, "edited": false, "score": 0, "creation_date": 1493257253, "post_id": 43645064, "comment_id": 74342681, "body": "@AaronMaurer I there something unclear in my answer, or can you accept it as it is?"}], "answers": [{"tags": [], "owner": {"reputation": 3397, "user_id": 7711283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qCfAB.jpg?s=128&g=1", "display_name": "Claudio", "link": "https://stackoverflow.com/users/7711283/claudio"}, "is_accepted": false, "score": 2, "last_activity_date": 1493257080, "last_edit_date": 1592644375, "creation_date": 1493254991, "answer_id": 43646934, "question_id": 43645064, "link": "https://stackoverflow.com/questions/43645064/cant-determine-cause-of-syntaxerror-invalid-character-in-identifier/43646934#43646934", "title": "Can&#39;t determine cause of SyntaxError: invalid character in identifier", "body": "<p>Humor is usually not welcome on stackoverflow, but there are exceptions from this rule so let's this answer be such exception.</p>\n<p>But let's go back to answering the actual question:</p>\n<blockquote>\n<p><code>Can't determine cause of SyntaxError: invalid character in identifier</code></p>\n<p><code>I am not sure what is triggering this error.</code></p>\n</blockquote>\n<p>I have to admit that I write this fully correct answer with a chuckle :) :</p>\n<blockquote>\n<p><strong>The cause of the SyntaxError is an invalid character in identifier.</strong></p>\n</blockquote>\n<p>The invalid character in the identifier is the character:</p>\n<p>[ <strong>\u2019</strong> ]</p>\n<p>U+2019  \u2019   e2 80 99    RIGHT SINGLE QUOTATION MARK</p>\n<p>Here Python code with which you can find out for yourself details about the &quot;character&quot; which is causing the trouble:</p>\n<pre><code>#!/usr/bin/ python3\n# -*- coding: &lt;utf8&gt; -*-\n# tags=[\u2019coffeepi\u2019]\ncoffeepi = &quot;\u2019&quot;\nprint(ord(coffeepi), hex(ord(coffeepi)), bin(ord(coffeepi))) \n</code></pre>\n<p>what prints:</p>\n<blockquote>\n<p>8217, <strong>0x2019</strong> , 0b10000000011001</p>\n</blockquote>\n<p>Check out this here</p>\n<p><a href=\"http://www.utf8-chartable.de/unicode-utf8-table.pl\" rel=\"nofollow noreferrer\">http://www.utf8-chartable.de/unicode-utf8-table.pl</a>\nwhere I have got the information about the character from, and this here\n<a href=\"https://docs.python.org/3/reference/lexical_analysis.html#identifiers\" rel=\"nofollow noreferrer\">https://docs.python.org/3/reference/lexical_analysis.html#identifiers</a>\nfor more detailed information about which characters are allowed in an indentifier, because not all are and apparently this one does not belong to the range of allowed characters.</p>\n<p>By the way: this &quot;character&quot; is NOT a one byte character like it is for ASCII characters. How this character is encoded in UTF-8 is specified in the Unicode table (e2 80 99).</p>\n<p>AND ... in the entire code you have provided in the question there is no trace of what you have specified to cause the error message.</p>\n<p>How you can fix that?</p>\n<blockquote>\n<p><strong>Just replace these strange quotes with standard quotes &quot; &quot;</strong></p>\n</blockquote>\n<p>ADDENDUM: The strange quotes should be probably standard quotes around a string with a word put into the list. As the Python interpreter is running into this strange quotes it assumes they are part of a variable name (identifier) and not part of a string specification. That is the reason for the confusing error message as you don't see from the code at the first glance WHY the Python interpreter thinks it deals with an variable name (identifier) and not a quoted section of text which should be turned into a Python string.</p>\n"}], "owner": {"reputation": 21, "user_id": 7126214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4tBlqVgrsZ0/AAAAAAAAAAI/AAAAAAAAVOw/Vt8fDoju-j8/photo.jpg?sz=128", "display_name": "Aaron Maurer", "link": "https://stackoverflow.com/users/7126214/aaron-maurer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1953, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1493257080, "creation_date": 1493243187, "last_edit_date": 1493245615, "question_id": 43645064, "link": "https://stackoverflow.com/questions/43645064/cant-determine-cause-of-syntaxerror-invalid-character-in-identifier", "title": "Can&#39;t determine cause of SyntaxError: invalid character in identifier", "body": "<p>I am attempting to use Brickman to use Python coding on a LEGO EV3. When I try to run my code I get the following error</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt;&gt;robot@ev3dev:~$ python3 CoffeePi_Test/Main.py\nFile \"CoffeePi_Test/Main.py\", line 14\n  tags=[\u2018coffeepi\u2019]\n                 ^\n  SyntaxError: invalid character in identifier\n</code></pre>\n\n<p>Here is my code. I am not sure what is triggering this error.</p>\n\n<pre><code> #!/usr/bin/env python3\n#Import the necessary methods from tweepy library\nfrom tweepy.streaming import StreamListener\nfrom tweepy import OAuthHandler\nfrom tweepy import Stream\nimport json\nimport time\nimport vending\n\nimport ev3dev.ev3 as ev3\nfrom ev3dev.auto import *\n\n\ntags=[legovend]\nwords=[]\n#Variables that contains the user credentials to access Twitter API\n#Two versions, redudancy if the first fails...\naccess_token = # redacted\naccess_token_secret = # redacted\nconsumer_key = # redacted\nconsumer_secret = # redacted\n\naccess_token2 = # redacted\naccess_token_secret2 = # redacted\nconsumer_key2 = # redacted\nconsumer_secret2 = # redacted\n\n\n#This is a basic listener that just prints received tweets to stdout.\nclass StdOutListener(StreamListener):\n\n    def on_data(self, data):\n        global mA,mB,home,cs, lastVend\n        try:\n            tweet = json.loads(data)\n            tw\n        except:\n            pass\n\n        if tags:\n            if all(tag in tweet['text'].lower() for tag in tags):\n                print (tweet['user']['screen_name'], ' - ', tweet['text'])\n\n                if int(tweet['timestamp_ms'])&gt;lastVend:\n                    ev3.Leds.set_color(ev3.Leds.LEFT, ev3.Leds.RED)\n                    ev3.Leds.set_color(ev3.Leds.RIGHT, ev3.Leds.RED)\n\n                    vending.onTweet(mA, mB, cs, home)\n\n                    time.sleep(2)\n                    lastVend = int(round(time.time() * 1000))+1000\n                    ev3.Leds.set_color(ev3.Leds.LEFT, ev3.Leds.GREEN)\n                    ev3.Leds.set_color(ev3.Leds.RIGHT, ev3.Leds.GREEN)\n        return True\n\n    def on_error(self, status):\n        print( status)\n        return False\n\n\nif __name__ == '__main__':\n\n    #This handles Twitter authetification and the connection to Twitter Streaming API\n    print( 'here')\n    global mA,mB,home,cs, lastVend\n    mA = ev3.MediumMotor('outA')\n    mB = ev3.MediumMotor('outB')\n    home = mA.position - 40\n    cs=ColorSensor()\n    lastVend = int(round(time.time() * 1000))\n\n    l = StdOutListener()\n    auth = OAuthHandler(consumer_key, consumer_secret)\n    auth.set_access_token(access_token, access_token_secret)\n    stream = Stream(auth, l)\n\n    auth2 = OAuthHandler(consumer_key2, consumer_secret2)\n    auth2.set_access_token(access_token2, access_token_secret2)\n    stream2 = Stream(auth2, l)\n\n    try:\n\n        Sound.speak('Ready to go').wait()\n        print ('trying 1')\n        stream.filter(track=tags)\n        print('trying 2')\n        stream2.filter(track=tags)\n        Sound.speak('Could not connect').wait()\n    except Exception as e:\n        print( e)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1493246673, "post_id": 43645061, "comment_id": 74339834, "body": "Because Python does not have block scope."}], "answers": [{"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1493243678, "post_id": 43645133, "comment_id": 74338728, "body": "Note that a variable can be in scope even <i>before</i> its definition; that&#39;s why the <code>global</code> statement is required in something like <code>def foo(): print x; x=3</code> if your intention is to output the old value before assigning a new one. (That is, if you don&#39;t consider <code>global x</code> to be a definition.)"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1493247121, "post_id": 43645133, "comment_id": 74339999, "body": "Quite correct; I restricted my response to the specific problem, giving a reference to the documentation."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 5, "last_activity_date": 1493243486, "creation_date": 1493243486, "answer_id": 43645133, "question_id": 43645061, "link": "https://stackoverflow.com/questions/43645061/why-are-objects-allowed-to-be-used-after-a-block/43645133#43645133", "title": "Why are objects allowed to be used after a block?", "body": "<p>Read up on the scoping rules for Python.  In short, a scope is started with a new module: function, method, class, etc.  Mere control flow statements (e.g. <strong>if</strong> and <strong>for</strong>) do not start a new scope.  The scope of a variable is from its firs definition to the end of that scope.</p>\n\n<p>Since this example has only one scope, each variable is good from its first assignment to the end of the file.</p>\n\n<p>Is that enough to clear up the problem?</p>\n"}], "owner": {"reputation": 1454, "user_id": 3667450, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/738e0d1c296674d8e2846549dbe202ff?s=128&d=identicon&r=PG&f=1", "display_name": "shane", "link": "https://stackoverflow.com/users/3667450/shane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1493245917, "accepted_answer_id": 43645133, "answer_count": 1, "score": 0, "last_activity_date": 1493249566, "creation_date": 1493243178, "last_edit_date": 1493249566, "question_id": 43645061, "link": "https://stackoverflow.com/questions/43645061/why-are-objects-allowed-to-be-used-after-a-block", "closed_reason": "Duplicate", "title": "Why are objects allowed to be used after a block?", "body": "<p>In this code, why do <code>a</code> and <code>b</code> not get destroyed at the ends of their respective blocks?</p>\n\n<pre><code>flag = True\nif flag:\n    a = 1\n\nfor i in range(2):\n    b = 2\n\nprint(a, b)\n</code></pre>\n\n<p>Instead, this code prints <code>1 2</code>. Why does Python allow this? When can I rely on this behavior?</p>\n"}, {"tags": ["python", "merge"], "comments": [{"owner": {"reputation": 4274, "user_id": 5113071, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/27afe5aa502eb75ce05a49b47846889d?s=128&d=identicon&r=PG", "display_name": "Shawn Mehan", "link": "https://stackoverflow.com/users/5113071/shawn-mehan"}, "edited": false, "score": 2, "creation_date": 1493243195, "post_id": 43644985, "comment_id": 74338537, "body": "Welcome to SO! You are encouraged to take the <a href=\"http://stackoverflow.com/tour\">SO tour</a> where you can learn what this site is for. What it is not for is asking someone to write code for free. Have you attempted anything in Python to try to read in your files and represent them as lists that can have list operations conducted on them? If so, you will get more help if you post what you have done so far. Good luck."}, {"owner": {"reputation": 2996, "user_id": 6085135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lHKnG.png?s=128&g=1", "display_name": "brennan", "link": "https://stackoverflow.com/users/6085135/brennan"}, "edited": false, "score": 0, "creation_date": 1493243560, "post_id": 43644985, "comment_id": 74338673, "body": "Try this <a href=\"http://stackoverflow.com/questions/3925614/how-do-you-read-a-file-into-a-list-in-python\" title=\"how do you read a file into a list in python\">stackoverflow.com/questions/3925614/&hellip;</a> and this <a href=\"http://stackoverflow.com/questions/1388818/how-can-i-compare-two-lists-in-python-and-return-matches\" title=\"how can i compare two lists in python and return matches\">stackoverflow.com/questions/1388818/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 1, "creation_date": 1493244317, "post_id": 43645211, "comment_id": 74338997, "body": "Right idea, terrible execution. <code>d</code> should have the fruit as keys, not as values. Also, <code>l2</code> is undefined."}], "tags": [], "owner": {"reputation": 8755, "user_id": 4168397, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8e31d5748edf285187f67c329542ef96?s=128&d=identicon&r=PG", "display_name": "Rakesh Adhikesavan", "link": "https://stackoverflow.com/users/4168397/rakesh-adhikesavan"}, "is_accepted": false, "score": 1, "last_activity_date": 1493244670, "last_edit_date": 1493244670, "creation_date": 1493243845, "answer_id": 43645211, "question_id": 43644985, "link": "https://stackoverflow.com/questions/43644985/how-to-compare-and-merge-text-files-with-differing-column-numbers/43645211#43645211", "title": "How to compare and merge text files with differing column numbers?", "body": "<p>Here is one possible approach:</p>\n\n<p>Edit: taking the comment into consideration</p>\n\n<p>I would first read your text file #1 into a Python Dictionary</p>\n\n<pre><code>d = dict()\nwith open(\"file1.txt\") as f:\n    for line in f:\n       (val, key) = line.split()\n       d[key] = int(val)\n\nprint d\n\nOut: {'kiwi': 4, 1: 'banana', 3: 'pear', 4: 'kiwi', 5: 'apple', 'pear': 3, 'banana': 1, 'apple': 5}\n</code></pre>\n\n<p>Now, we read file 2 as a Python list</p>\n\n<pre><code>with open(\"file2.txt\") as f:\n    l = f.read().splitlines()\n\nprint l\nOut: ['apple', 'orange', 'strawberry', 'banana']\n</code></pre>\n\n<p>Now, create another dictionary with the desired output:</p>\n\n<pre><code>d2 = {key:val for key,val in d.iteritems() if key in l}\nprint d2\nOut: {'apple': 5, 'banana': 1}\n</code></pre>\n\n<p>I will leave it up to you to figure out how to write a dictionary into a text file. I would use pandas to convert it into a dataFrame and write the dataFrame as csv or a tsv. This is a workaround, there has to be a more direct way to do it.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7927980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c339e8712c5bf8c987c6986f59cd4128?s=128&d=identicon&r=PG&f=1", "display_name": "Kay", "link": "https://stackoverflow.com/users/7927980/kay"}, "is_accepted": false, "score": 0, "last_activity_date": 1493343362, "creation_date": 1493343362, "answer_id": 43670539, "question_id": 43644985, "link": "https://stackoverflow.com/questions/43644985/how-to-compare-and-merge-text-files-with-differing-column-numbers/43670539#43670539", "title": "How to compare and merge text files with differing column numbers?", "body": "<p>I apologize for not providing information on my attempts earlier (I wasn't trying to ask for codes for free, just got stuck and needed some guidance).  </p>\n\n<p>Essentially I had a txt document with 700,000 words in paragraph form and I wanted to count the words and cross-reference it to another document which was in list form. I got this far</p>\n\n<pre><code>fname = raw_input(\"Enter file name: \")\nfh = open(fname)\ninp = fh.read().upper()\nnew_fh2 = inp.replace('.','').replace(',','').replace('?','')\nnew_fh3 = new_fh2.replace('-','').replace('_','').replace(';','')\nnew_fh4 = new_fh3.replace(':','').replace('!','').replace('(','')\nnew_fh5 = new_fh4.replace(')','').replace('/','')\nnew_fh6 = new_fh5.replace('|','').replace('&amp;','').replace('[','')\nnew_fh7 = new_fh6.replace(']','').replace('%','').replace('+','')\nnew_fh8 = new_fh7.replace('*','').replace('@','').replace('=','')\nnew_fh9 = new_fh8.replace('&gt;','').replace('&lt;','')\nnew_fh10 = new_fh9.replace('{','').replace('}','').replace('~','')\nnew_fh11 = new_fh10.replace('\"','').split()\nnew_fh12 = sorted(set(new_fh11)) \nfor word in new_fh12:\n    print new_fh11.count(word), word`\n</code></pre>\n\n<p>At this point I was prepared to use LibreOffice Base to do my comparison using 2 tables, but even with the count function that reduced by word count from 700k to 34k, entering in data crashed the program whenever I tried to upload. So I had to try and think of a code which would allow me to compare the two txt files in python, which handles this volume of data nicely. And I really had NO idea where to even begin, although I did know of a few merge functions I just didn't know how to define the merge. I ended up doing this instead</p>\n\n<pre><code>new_fh12 = new_fh11.split()\nnew_fh12.sort()\nfor x in sorted(new_fh12):\n    print x\n</code></pre>\n\n<p>then I took this list and put it into excel in one column, added my second list to another column, then used the countif function to count and compare the two lists.</p>\n"}], "owner": {"reputation": 11, "user_id": 7927980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c339e8712c5bf8c987c6986f59cd4128?s=128&d=identicon&r=PG&f=1", "display_name": "Kay", "link": "https://stackoverflow.com/users/7927980/kay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493343362, "creation_date": 1493242877, "last_edit_date": 1493246030, "question_id": 43644985, "link": "https://stackoverflow.com/questions/43644985/how-to-compare-and-merge-text-files-with-differing-column-numbers", "title": "How to compare and merge text files with differing column numbers?", "body": "<p>Can anyone please direct me on how to perform the following merge in Python...</p>\n\n<p>Text File #1: </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>5     apple\n1     banana\n3     pear\n4     kiwi\n</code></pre>\n\n<p>(plus a few thousand more entries)</p>\n\n<p>My text file #2 looks like</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>apple\norange    \nstrawberry\nbanana\n</code></pre>\n\n<p>I want to combine the two text files such that I only add those which are in both but also keep the original numbers from the text file #1 link to the corresponding identifier. So in this example, my merge would look like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>5     apple\n1     banana\n</code></pre>\n"}, {"tags": ["python", "opencl", "pyopencl"], "comments": [{"owner": {"reputation": 5977, "user_id": 1745695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b932c5253c45af61dc443fbc1b9c935c?s=128&d=identicon&r=PG", "display_name": "Dithermaster", "link": "https://stackoverflow.com/users/1745695/dithermaster"}, "edited": false, "score": 0, "creation_date": 1493247131, "post_id": 43644979, "comment_id": 74340001, "body": "That&#39;s an NVIDIA-only attribute. They shouldn&#39;t be checking it on non-NVIDIA hardware. What is your GPU?"}, {"owner": {"reputation": 129, "user_id": 6264041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/693818fda41a85b15a67396f55eb25f4?s=128&d=identicon&r=PG&f=1", "display_name": "Jon.W", "link": "https://stackoverflow.com/users/6264041/jon-w"}, "reply_to_user": {"reputation": 5977, "user_id": 1745695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b932c5253c45af61dc443fbc1b9c935c?s=128&d=identicon&r=PG", "display_name": "Dithermaster", "link": "https://stackoverflow.com/users/1745695/dithermaster"}, "edited": false, "score": 0, "creation_date": 1493274878, "post_id": 43644979, "comment_id": 74348220, "body": "I am using NVIDIA Tesla K80."}, {"owner": {"reputation": 5977, "user_id": 1745695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b932c5253c45af61dc443fbc1b9c935c?s=128&d=identicon&r=PG", "display_name": "Dithermaster", "link": "https://stackoverflow.com/users/1745695/dithermaster"}, "edited": false, "score": 0, "creation_date": 1493332491, "post_id": 43644979, "comment_id": 74384821, "body": "Good point! I just saw the &quot;nv&quot; on the end. In any case, this appears to be an cldemosaic issue, so best to take it up with them on their github."}], "owner": {"reputation": 129, "user_id": 6264041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/693818fda41a85b15a67396f55eb25f4?s=128&d=identicon&r=PG&f=1", "display_name": "Jon.W", "link": "https://stackoverflow.com/users/6264041/jon-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493242864, "creation_date": 1493242864, "question_id": 43644979, "link": "https://stackoverflow.com/questions/43644979/device-object-has-no-attribute-wavefront-size-nv", "title": "&#39;Device&#39; object has no attribute &#39;wavefront_size_nv&#39;", "body": "<p>I am using the python library cldemosaic (<a href=\"https://github.com/nevion/cldemosaic\" rel=\"nofollow noreferrer\">https://github.com/nevion/cldemosaic</a>) to leverage the Opencl-based debayer. When I was trying to import the library:</p>\n\n<pre><code>import pyopencl\nfrom kernel_common import *\n</code></pre>\n\n<p>The error occurred:</p>\n\n<blockquote>\n  <p>AttributeError: 'Device' object has no attribute 'wavefront_size_nv'</p>\n</blockquote>\n\n<p>Has anyone used this library and got any idea how to solve this?</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["python", "tensorflow", "ipython-notebook"], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 7991999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb110dc0f35c7e6076eb33d9decaf4a?s=128&d=identicon&r=PG&f=1", "display_name": "luckycallor", "link": "https://stackoverflow.com/users/7991999/luckycallor"}, "is_accepted": true, "score": 3, "last_activity_date": 1494672421, "last_edit_date": 1494672421, "creation_date": 1494661214, "answer_id": 43950528, "question_id": 43644893, "link": "https://stackoverflow.com/questions/43644893/windows-tensorflow-could-not-restore-checkpoint-access-is-denied/43950528#43950528", "title": "Windows Tensorflow could not restore checkpoint. &quot;Access is denied.&quot;", "body": "<p>I used to have the same problem and now I have found what is wrong.\nI think it's because you didn't make the save_path right.\nFollowing is my way to make it right. Hope this would help you.</p>\n\n<p>The checkpoint files include two files: the xxx.index and xxx.data.</p>\n\n<p>The variable save_path in function saver.restore() should be the 'xxx'.</p>\n\n<p>For example,I saved my checkpoint in the direction ckpt_path, and there are three files:</p>\n\n<ul>\n<li>'model-20170508-212349.ckpt-17873.data-00000-of-00001'</li>\n<li>'model-20170508-212349.ckpt-17873.index'</li>\n<li>'model-20170508-212349.meta'</li>\n</ul>\n\n<p>and the script should be like this:</p>\n\n<pre><code>saver.restore(session,'ckpt_path/model-20170508-212349.ckpt-17873')\n</code></pre>\n"}], "owner": {"reputation": 2413, "user_id": 1079311, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/23baddd37564d6fd6f6b75169e255ad4?s=128&d=identicon&r=PG", "display_name": "AlexIIP", "link": "https://stackoverflow.com/users/1079311/alexiip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4704, "favorite_count": 3, "accepted_answer_id": 43950528, "answer_count": 1, "score": 4, "last_activity_date": 1494672421, "creation_date": 1493242441, "last_edit_date": 1493253435, "question_id": 43644893, "link": "https://stackoverflow.com/questions/43644893/windows-tensorflow-could-not-restore-checkpoint-access-is-denied", "title": "Windows Tensorflow could not restore checkpoint. &quot;Access is denied.&quot;", "body": "<p>I am trying to run <a href=\"https://github.com/balancap/SSD-Tensorflow\" rel=\"nofollow noreferrer\">SSD-Tensorflow</a> project using Tensorflow 1.1. When I try to restore the checkpoint file in cell 7 of <a href=\"https://github.com/balancap/SSD-Tensorflow/blob/master/notebooks/ssd_notebook.ipynb\" rel=\"nofollow noreferrer\">ssd_notebook.ipynb</a> I get the following error:</p>\n\n<p><code>Unable to open table file D:\\Projects\\SSD-Tensorflow\\checkpoints\\ssd_300_vgg.ckpt: Unknown: NewRandomAccessFile failed to Create/Open: D:\\Projects\\SSD-Tensorflow\\checkpoints\\ssd_300_vgg.ckpt : Access is denied.\n; Input/output error\n     [[Node: save_1/RestoreV2_70 = RestoreV2[dtypes=[DT_FLOAT], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_recv_save_1/Const_0, save_1/RestoreV2_70/tensor_names, save_1/RestoreV2_70/shape_and_slices)]]\n     [[Node: save_1/RestoreV2_31/_29 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=1, tensor_name=\"edge_421_save_1/RestoreV2_31\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/gpu:0\"]()]]</code></p>\n\n<p>Essentially,</p>\n\n<p><code>ckpt_filename = '../checkpoints/ssd_300_vgg.ckpt'\nsaver = tf.train.Saver()\nsession = tf.Session()\nsaver.restore(session, ckpt_filename)</code></p>\n\n<p>is throwing a <code>Access Denied</code> error when trying to restore a checkpoint file. I ensured that I can read and write from that folder and even tried running the notebook as an Admin. </p>\n"}, {"tags": ["python", "image", "canvas", "center", "reportlab"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 7914713, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4963d2f2831dd07a0cc52846631fe2b?s=128&d=identicon&r=PG&f=1", "display_name": "Julian Olivares", "link": "https://stackoverflow.com/users/7914713/julian-olivares"}, "edited": false, "score": 0, "creation_date": 1493328229, "post_id": 43666670, "comment_id": 74383190, "body": "I added the code/exchange it and it is not working. Any chance you would be willing to write the full code I gave with your correct edits, please?"}, {"owner": {"reputation": 8079, "user_id": 1748679, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/afebaed9a11b4b56934add3801429c9c?s=128&d=identicon&r=PG", "display_name": "Kyle Heuton", "link": "https://stackoverflow.com/users/1748679/kyle-heuton"}, "reply_to_user": {"reputation": 91, "user_id": 7914713, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4963d2f2831dd07a0cc52846631fe2b?s=128&d=identicon&r=PG&f=1", "display_name": "Julian Olivares", "link": "https://stackoverflow.com/users/7914713/julian-olivares"}, "edited": false, "score": 0, "creation_date": 1493328799, "post_id": 43666670, "comment_id": 74383431, "body": "Are you seeing an error? Is the image not centered?"}, {"owner": {"reputation": 91, "user_id": 7914713, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4963d2f2831dd07a0cc52846631fe2b?s=128&d=identicon&r=PG&f=1", "display_name": "Julian Olivares", "link": "https://stackoverflow.com/users/7914713/julian-olivares"}, "edited": false, "score": 0, "creation_date": 1493331554, "post_id": 43666670, "comment_id": 74384492, "body": "NameError: global name &#39;line_width&#39; is not defined handle_pageBegin args=()"}, {"owner": {"reputation": 8079, "user_id": 1748679, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/afebaed9a11b4b56934add3801429c9c?s=128&d=identicon&r=PG", "display_name": "Kyle Heuton", "link": "https://stackoverflow.com/users/1748679/kyle-heuton"}, "reply_to_user": {"reputation": 91, "user_id": 7914713, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4963d2f2831dd07a0cc52846631fe2b?s=128&d=identicon&r=PG&f=1", "display_name": "Julian Olivares", "link": "https://stackoverflow.com/users/7914713/julian-olivares"}, "edited": false, "score": 0, "creation_date": 1493332485, "post_id": 43666670, "comment_id": 74384819, "body": "Ah, you&#39;re right. It used to be called <code>line_x_width</code>. Replacing that with <code>line_width = 530</code> should fix that"}, {"owner": {"reputation": 91, "user_id": 7914713, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4963d2f2831dd07a0cc52846631fe2b?s=128&d=identicon&r=PG&f=1", "display_name": "Julian Olivares", "link": "https://stackoverflow.com/users/7914713/julian-olivares"}, "edited": false, "score": 0, "creation_date": 1493334575, "post_id": 43666670, "comment_id": 74385469, "body": "Awesome, thanks! Now, I am having trouble getting the story to work. I have known python for 3 days. Really need help here at work, to get this done for a client. Our third party producer fell through. any chance you can help me get the myLaterPages and myThirdPages flowing? Or anychance you would hop on an uber conference and teach me for 15 - 30 mins?"}, {"owner": {"reputation": 8079, "user_id": 1748679, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/afebaed9a11b4b56934add3801429c9c?s=128&d=identicon&r=PG", "display_name": "Kyle Heuton", "link": "https://stackoverflow.com/users/1748679/kyle-heuton"}, "reply_to_user": {"reputation": 91, "user_id": 7914713, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4963d2f2831dd07a0cc52846631fe2b?s=128&d=identicon&r=PG&f=1", "display_name": "Julian Olivares", "link": "https://stackoverflow.com/users/7914713/julian-olivares"}, "edited": false, "score": 0, "creation_date": 1493417768, "post_id": 43666670, "comment_id": 74425477, "body": "I&#39;m sorry, while I&#39;ve been in that exact situation (my first python project was ReportLab to meet a tight external deadline), that was years ago and my reportlab knowledge has diminished since then. I still know where to look in the documentation for simple things like this, but I don&#39;t have the time to help with more complex requests right now. Best of luck on your project!"}], "tags": [], "owner": {"reputation": 8079, "user_id": 1748679, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/afebaed9a11b4b56934add3801429c9c?s=128&d=identicon&r=PG", "display_name": "Kyle Heuton", "link": "https://stackoverflow.com/users/1748679/kyle-heuton"}, "is_accepted": true, "score": 3, "last_activity_date": 1493332449, "last_edit_date": 1493332449, "creation_date": 1493322298, "answer_id": 43666670, "question_id": 43644835, "link": "https://stackoverflow.com/questions/43644835/reportlab-how-to-center-an-image-on-canvas/43666670#43666670", "title": "ReportLab: How to Center an Image on Canvas", "body": "<p>You have a couple of options here. If you simply want the image centered above your line, and the position of that line is fixed, you can draw the image based on the location of the line:</p>\n\n<pre><code>line_x_start = 40\nline_width = 530\nline_y = 112\n\ncanvas.setStrokeColorCMYK(0.68,0.44,0,0.41)\ncanvas.setLineWidth(7)\ncanvas.line(line_x_start, line_y,\n            line_x_start+line_width, line_y)\n\ncanvas.drawImage(PartnerLogo, line_x_start, line_y, width=line_width, \n                 preserveAspectRatio=True, mask='auto') \n</code></pre>\n\n<p>If you want the logo smaller than the full width of the line, you could start the image at <code>line_x_start</code> + some buffer, and set <code>width = line_width - some_buffer*2</code></p>\n\n<p>Additionally, in the <a href=\"https://www.reportlab.com/docs/reportlab-reference.pdf\" rel=\"nofollow noreferrer\">documentation for drawImage</a> there is an option to anchor the image in the center of a bounding box, so you could do something like this:</p>\n\n<pre><code>canvas.drawImage(PartnerLogo, line_x_start, line_y, width=line_width, \n                 preserveAspectRatio=True, mask='auto', anchor='c') \n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 7914713, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4963d2f2831dd07a0cc52846631fe2b?s=128&d=identicon&r=PG&f=1", "display_name": "Julian Olivares", "link": "https://stackoverflow.com/users/7914713/julian-olivares"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7088, "favorite_count": 0, "accepted_answer_id": 43666670, "answer_count": 1, "score": 2, "last_activity_date": 1493332449, "creation_date": 1493242208, "last_edit_date": 1493321406, "question_id": 43644835, "link": "https://stackoverflow.com/questions/43644835/reportlab-how-to-center-an-image-on-canvas", "title": "ReportLab: How to Center an Image on Canvas", "body": "<p>trying to center an image here. Now, I am able to center the image with regards to the x axis, but I am unable to center the actual image on that point. Instead, it starts the image at the center of the page.</p>\n\n<pre><code>from reportlab.platypus import SimpleDocTemplate, Paragraph, Spacer\nfrom reportlab.lib.styles import getSampleStyleSheet, ParagraphStyle\nfrom reportlab.lib.pagesizes import letter\nfrom reportlab.lib.units import inch\nfrom reportlab.lib.units import mm\nfrom reportlab.platypus import Image\nfrom reportlab.lib.enums import TA_JUSTIFY\nfrom reportlab.lib.utils import ImageReader\nfrom reportlab.pdfgen import canvas\n\nWidth, Height = letter\nstyles = getSampleStyleSheet()\nTitle = \"Comparison Index\"\npageinfo = \"platypus example\"\nBTRLogo = 'BTALogo.png'\nPartnerLogo = 'PartnerLogo.png'\nClientLogo = 'ClientLogo.png'\nGraph1 = 'PlanOffered.jpg'\n\n\n\n# Define the fixed features of the first page of the document\ndef myFirstPage(canvas, doc):\n    canvas.saveState()\n\n    canvas.setFillColorCMYK(0.68, 0.44, 0, 0.41)\n    canvas.setFontSize(22)\n    canvas.setFont('Helvetica-Bold', 36)\n    canvas.drawString(40, 670, 'Health &amp; Welfare')\n\n    canvas.setFont('Helvetica-Bold', 24)\n    canvas.drawString(40, 625, 'Benchmark Comparison Report')\n\n    canvas.setFont('Helvetica', 16)\n    canvas.drawString(40, 550, 'Prepared for:')\n    canvas.drawString(40, 400, 'Prepared on:') #INSERY DYNAMIC DATE****\n\n    canvas.drawImage(BTRLogo,480,18,width=100,height=66.62,mask='auto') \n    #Logo is measured and good to go\n\n    canvas.drawImage(PartnerLogo, 10, Height/5, width=Width/1.2, \n    preserveAspectRatio=True, mask='auto') #MAKE SURE IMAGE IS DYNAMIC AND HAS MAX SETS\n\n    canvas.setStrokeColorCMYK(0.68,0.44,0,0.41)\n    canvas.setLineWidth(7)\n    canvas.line(40,112,570,112)\n\n\n\n# Since we want pages after the first to look different from the first we define an alternate layout for\n# the fixed features of the other pages.\n# Note that the two functions use the pdfgen level canvas operations to paint the annotations for the pages.\ndef myLaterPages(canvas, doc):\n    canvas.saveState()\n    canvas.setFont('Times-Roman', 23)\n    page_num = canvas.getPageNumber()\n    text = \"Page #%s\" % page_num\n    canvas.drawRightString(200 * mm, 20 * mm, text)\n    canvas.restoreState()\n\ndef myThirdPages(canvas, doc):\n    canvas.saveState()\n    canvas.setFont('Times-Roman', 9)\n    canvas.drawString(inch, 0.75 * inch, \"Page %d %s\")\n    canvas.restoreState()\n\n# Create a story and build the document\ndef createMultiPage():\n\n    doc = SimpleDocTemplate(\"Comparison Index.pdf\", pagesize=letter, rightMargin=72, leftMargin=72, topMargin=72, bottomMargin=18)\n    style = styles[\"Normal\"]\n    styles.add(ParagraphStyle(name='Justify', alignment=TA_JUSTIFY))\n\n    Story = [Spacer(1, 2 * inch)]\n\n    doc.build(Story, onFirstPage=myFirstPage, onLaterPages=myLaterPages)\n\nif __name__ == \"__main__\":\n    createMultiPage()\n</code></pre>\n\n<p>So, at the end of the day I need to ensure that my image is centered on the x-axis. Specifically the PartnerLogo only. This Logo needs to be right above the canvased line and centered. Please help!</p>\n"}, {"tags": ["python", "scipy", "mathematical-optimization"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6655984"}, "is_accepted": true, "score": 11, "last_activity_date": 1493255966, "last_edit_date": 1493255966, "creation_date": 1493253968, "answer_id": 43646813, "question_id": 43644797, "link": "https://stackoverflow.com/questions/43644797/what-is-xtol-for-in-minimizemethod-nelder-mead/43646813#43646813", "title": "What is xtol for in minimize(method=\u2019Nelder-Mead\u2019)?", "body": "<p><strong>Short answer</strong>: it's how accurate you want the result to be, in terms of absolute error. If <code>xatol</code> is 0.01 and the method returns the location of the minimum as <code>[1.23, 4.56]</code>, then there is hope (but no certainty) that the actual minimum has coordinates somewhere within 1.22 - 1.24 and 4.55 - 4.57.</p>\n\n<p><strong>Long answer.</strong>\nThe <a href=\"https://en.wikipedia.org/wiki/Nelder%E2%80%93Mead_method\" rel=\"noreferrer\">Nelder-Mead method</a> operates with a <em>simplex</em> (a triangle in two dimensions, tetrahedron in 3D, etc). The Wikipedia page illistrates how this simplex moves toward a minimum, while changing size and shape (it becomes smaller near the minimum). The search is considered to be successful if two conditions are satisfied:</p>\n\n<ol>\n<li>The size of the simplex is at most <code>xatol</code> (the option <code>xtol</code> is deprecated for this method; <code>xatol</code> is recommended)</li>\n<li>The difference of function values at the vertices of the simplex is at most <code>fatol</code>. </li>\n</ol>\n\n<p>Informally, this means the simplex became small and the values of the objective function at its vertices are almost the same. Formally, <a href=\"https://github.com/scipy/scipy/blob/v0.18.1/scipy/optimize/optimize.py#L527\" rel=\"noreferrer\">this is the stopping condition</a>:</p>\n\n<pre><code>if (numpy.max(numpy.ravel(numpy.abs(sim[1:] - sim[0]))) &lt;= xatol and\n        numpy.max(numpy.abs(fsim[0] - fsim[1:])) &lt;= fatol):\n    break\n</code></pre>\n\n<p>Here <code>sim[0]</code> is the first vertex of the simplex, <code>sim[1:]</code> are the rest of the vertices. The condition requires every coordinate of every vertex to be within <code>xatol</code> of the corresponding coordinate of <code>sim[0]</code>. The array <code>fsim</code> holds the function values at these vertices; here the requirement is that <code>|fsim[k] - fsim[0]| &lt;= fatol</code> for all k.</p>\n\n<p>The default value of <code>xatol</code> is 0.0001. When the search is successful, the final simplex will cover a point of minimum; thus, the size of the simplex is the precision to which we know the location of the minimum. Smaller <code>xatol</code> can be used to pinpoint the minimum more precisely, at the expense of a longer running time. </p>\n\n<h3>Usage example</h3>\n\n<p>Looking for the minimum of (x^2+y^2), which of course is at the point (0, 0). With the default settings the answer is off by about 3e-5.</p>\n\n<pre><code>&gt;&gt;&gt; from scipy.optimize import minimize\n&gt;&gt;&gt; minimize(lambda x: x[0]**2+x[1]**2, [1, 2], method='Nelder-Mead').x\narray([ -3.62769110e-05,  -3.03662006e-05])\n</code></pre>\n\n<p>With smaller <code>xatol</code> (1e-6 instead of default 1e-4), the result is about 100 times more accurate, with the error about 3e-7.</p>\n\n<pre><code>&gt;&gt;&gt; minimize(lambda x: x[0]**2+x[1]**2, [1, 2], method='Nelder-Mead', options={'xatol': 1e-6}).x\narray([  3.12645001e-07,  -2.53507540e-07])\n</code></pre>\n"}], "owner": {"reputation": 889, "user_id": 837471, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/131beae824c4866ed6ae995c7fc9bd58?s=128&d=identicon&r=PG", "display_name": "Loic Dachary", "link": "https://stackoverflow.com/users/837471/loic-dachary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3065, "favorite_count": 0, "accepted_answer_id": 43646813, "answer_count": 1, "score": 6, "last_activity_date": 1493319168, "creation_date": 1493241997, "last_edit_date": 1493319168, "question_id": 43644797, "link": "https://stackoverflow.com/questions/43644797/what-is-xtol-for-in-minimizemethod-nelder-mead", "title": "What is xtol for in minimize(method=\u2019Nelder-Mead\u2019)?", "body": "<p>The documentation of <a href=\"https://docs.scipy.org/doc/scipy-0.18.1/reference/optimize.minimize-neldermead.html#optimize-minimize-neldermead\" rel=\"noreferrer\">minimize(method=\u2019Nelder-Mead\u2019)</a> reads: <em>Absolute error in xopt between iterations that is acceptable for convergence</em>. What does that mean exactly? Are there examples showing how it could be used?</p>\n"}, {"tags": ["python", "python-2.7", "numpy", "scipy", "scientific-computing"], "comments": [{"owner": {"reputation": 1169, "user_id": 2687601, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d07b3950a409b02bab9a49f08bc6cb93?s=128&d=identicon&r=PG", "display_name": "Dawid Laszuk", "link": "https://stackoverflow.com/users/2687601/dawid-laszuk"}, "edited": false, "score": 0, "creation_date": 1493245654, "post_id": 43644790, "comment_id": 74339498, "body": "What is your goal here? To connect all points? Draw line that would resemble a trend? <code>Spline</code> is exploding because it&#39;s quite computationally demanding - I think O(N^3). With natural spline its trying to find decompose huge NxN matrix and maybe you don&#39;t have enough RAM."}, {"owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "reply_to_user": {"reputation": 1169, "user_id": 2687601, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d07b3950a409b02bab9a49f08bc6cb93?s=128&d=identicon&r=PG", "display_name": "Dawid Laszuk", "link": "https://stackoverflow.com/users/2687601/dawid-laszuk"}, "edited": false, "score": 0, "creation_date": 1493245777, "post_id": 43644790, "comment_id": 74339549, "body": "@DawidLaszuk I want to connect all points."}, {"owner": {"reputation": 1169, "user_id": 2687601, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d07b3950a409b02bab9a49f08bc6cb93?s=128&d=identicon&r=PG", "display_name": "Dawid Laszuk", "link": "https://stackoverflow.com/users/2687601/dawid-laszuk"}, "edited": false, "score": 0, "creation_date": 1493245912, "post_id": 43644790, "comment_id": 74339590, "body": "are those points on purpose unordered? Is that meant to be 2D zig-zag line? Or is this some kind of time series?"}, {"owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "reply_to_user": {"reputation": 1169, "user_id": 2687601, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d07b3950a409b02bab9a49f08bc6cb93?s=128&d=identicon&r=PG", "display_name": "Dawid Laszuk", "link": "https://stackoverflow.com/users/2687601/dawid-laszuk"}, "edited": false, "score": 0, "creation_date": 1493246084, "post_id": 43644790, "comment_id": 74339648, "body": "These points should not have damping connecting points 2 (line 2 in data) and (line 3 in data). So it shouldn&#39;t be a 2D zig-zag line. These points should be some kind of time series, you are correct."}, {"owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "reply_to_user": {"reputation": 1169, "user_id": 2687601, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d07b3950a409b02bab9a49f08bc6cb93?s=128&d=identicon&r=PG", "display_name": "Dawid Laszuk", "link": "https://stackoverflow.com/users/2687601/dawid-laszuk"}, "edited": false, "score": 0, "creation_date": 1493246431, "post_id": 43644790, "comment_id": 74339765, "body": "@DawidLaszuk My synthetic data is obtained from a simple process: Moving the object along a trajectory with constant velocity and constant time frame, say 0.01s, calculate the work done to the object by applying force collected by sensors. In strict condition, the force should be somehow ordered, so the work column should be somehow ordered as well. Therefore, my synthetic data curve is fairly smooth. I want to plot something similar in scipy as my synthetic data curve using my experiment data."}, {"owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "reply_to_user": {"reputation": 1169, "user_id": 2687601, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d07b3950a409b02bab9a49f08bc6cb93?s=128&d=identicon&r=PG", "display_name": "Dawid Laszuk", "link": "https://stackoverflow.com/users/2687601/dawid-laszuk"}, "edited": false, "score": 0, "creation_date": 1493310674, "post_id": 43644790, "comment_id": 74373543, "body": "This is a fair question, why there&#39;s no upvote :&gt;. Just being curious :&gt;"}], "answers": [{"comments": [{"owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "edited": false, "score": 0, "creation_date": 1493246964, "post_id": 43645635, "comment_id": 74339946, "body": "It didn&#39;t solve the problem of slow performance, the method you mentioned still hangs during computation."}, {"owner": {"reputation": 1169, "user_id": 2687601, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d07b3950a409b02bab9a49f08bc6cb93?s=128&d=identicon&r=PG", "display_name": "Dawid Laszuk", "link": "https://stackoverflow.com/users/2687601/dawid-laszuk"}, "reply_to_user": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "edited": false, "score": 0, "creation_date": 1493247363, "post_id": 43645635, "comment_id": 74340074, "body": "@LingboTang the performance problem is the (natural) cubic, because it&#39;s trying to fit all points at once. What you should be looking for is some pointwise interpolation."}, {"owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "edited": false, "score": 0, "creation_date": 1493248491, "post_id": 43645635, "comment_id": 74340466, "body": "I agree with the performance issue occurs when BSpline tried to fit all points at once with the order. However, it should be faster when I only take a few sample points into <code>BSpline()</code>. I still encounter this issue when I only have 10 samples of sorted <code>x</code> and <code>y</code>."}, {"owner": {"reputation": 1169, "user_id": 2687601, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d07b3950a409b02bab9a49f08bc6cb93?s=128&d=identicon&r=PG", "display_name": "Dawid Laszuk", "link": "https://stackoverflow.com/users/2687601/dawid-laszuk"}, "reply_to_user": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "edited": false, "score": 0, "creation_date": 1493249038, "post_id": 43645635, "comment_id": 74340632, "body": "In that case, this doesn&#39;t sound like interpolation or SciPy related. I&#39;d suspect that your bottleneck is in reading data from disk - that&#39;s usually the slowest part in any programme."}, {"owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "edited": false, "score": 0, "creation_date": 1493263661, "post_id": 43645635, "comment_id": 74344277, "body": "Acutally, if I comment out the <code>BSpline</code>, my entire program runs with a fair speed. I/O didn&#39;t take so much time. What I&#39;m guessing is that x and y are not correlated well even after sorting, so the time spend for fitting just gone exponential. I don&#39;t know the source of scipy, so it might be a bad guess."}, {"owner": {"reputation": 21050, "user_id": 143765, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/bd4477dc26bf9941268fbfa05abdeae6?s=128&d=identicon&r=PG", "display_name": "ev-br", "link": "https://stackoverflow.com/users/143765/ev-br"}, "edited": false, "score": 0, "creation_date": 1493273279, "post_id": 43645635, "comment_id": 74347423, "body": "<code>BSpline(x, y)</code> is <i>wrong</i> and will not do what you expect it to. Use <code>make_interp_spline</code> or <code>splrep(x, y, s=0)</code> instead."}, {"owner": {"reputation": 21050, "user_id": 143765, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/bd4477dc26bf9941268fbfa05abdeae6?s=128&d=identicon&r=PG", "display_name": "ev-br", "link": "https://stackoverflow.com/users/143765/ev-br"}, "edited": false, "score": 0, "creation_date": 1493273353, "post_id": 43645635, "comment_id": 74347452, "body": "Also your reasoning about spline order is flawed. Quadratic splines are not recommended.  <code>order=20</code> is quite extravagant but unlikely do yield anything useful."}], "tags": [], "owner": {"reputation": 1169, "user_id": 2687601, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d07b3950a409b02bab9a49f08bc6cb93?s=128&d=identicon&r=PG", "display_name": "Dawid Laszuk", "link": "https://stackoverflow.com/users/2687601/dawid-laszuk"}, "is_accepted": false, "score": 1, "last_activity_date": 1493247625, "last_edit_date": 1493247625, "creation_date": 1493246091, "answer_id": 43645635, "question_id": 43644790, "link": "https://stackoverflow.com/questions/43644790/how-to-improve-the-performance-when-2d-interpolating-smoothing-lines-using-scipy/43645635#43645635", "title": "How to improve the performance when 2d interpolating/smoothing lines using scipy?", "body": "<p>Most interpolation methods in SciPy are function-generating, i.e. they return function which you can then execute on your <em>x</em> data. For example, using <code>CubicSpline</code> method, which connects all points with <em>pointwise cubic</em> spline would be</p>\n\n<pre><code>from scipy.interpolate import CubicSpline\n\nspline = CubicSpline(x, y)\ny_smooth = spline(x_smooth)\n</code></pre>\n\n<p>Based on your description I think that you correctly want to use BSpline. To do so, follow the pattern above, i.e.</p>\n\n<pre><code>from scipy.interpolate import BSpline\n\norder = 2 # smoothness order\nspline = BSpline(x, y, order)\ny_smooth = spline(x_smooth)\n</code></pre>\n\n<p>Since you have such amount of data, it probably must be very noisy. I'd suggest using bigger spline order, which relates to the number of knots used for interpolation.</p>\n\n<p>In both cases, your knots, i.e. <em>x</em> and <em>y</em>, should be sorted. These are 1D interpolation (since you are using only <code>x_smooth</code> as input). You can sort them using <code>np.argsort</code>. In short:</p>\n\n<pre><code>from scipy.interpolate import BSpline\n\nsort_idx = np.argsort(x)\nx_sorted = x[sort_idx]\ny_sorted = y[sort_idx]\n\norder = 20 # smoothness order\nspline = BSpline(x_sorted, y_sorted, order)\ny_smooth = spline(x_smooth)\n\nplt.plot(x_sorted, y_sorted, '.')\nplt.plot(x_smooth, y_smooth, '-')\nplt.show()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "edited": false, "score": 0, "creation_date": 1493309816, "post_id": 43649817, "comment_id": 74372899, "body": "Well explained. I would also like to know another case. If I have original data set as <code>[(1,1.237482), (3,2.234232), (2,-1.45923), (4, 3.2211), (5,2.2425113)]</code>. Then I make linear space on <code>x</code> with <code>x_new = np.linspace(x.min(),x.max(),10)</code>, there are no corresponding <code>y</code> values when <code>x = 1.5, x = 2.5,..etc</code>. How would these <code>spl</code> module deal with this case? Or generally there are no other methods but creating fitting functions to fit the generated data points?"}], "tags": [], "owner": {"reputation": 21050, "user_id": 143765, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/bd4477dc26bf9941268fbfa05abdeae6?s=128&d=identicon&r=PG", "display_name": "ev-br", "link": "https://stackoverflow.com/users/143765/ev-br"}, "is_accepted": true, "score": 3, "last_activity_date": 1493273211, "creation_date": 1493273211, "answer_id": 43649817, "question_id": 43644790, "link": "https://stackoverflow.com/questions/43644790/how-to-improve-the-performance-when-2d-interpolating-smoothing-lines-using-scipy/43649817#43649817", "title": "How to improve the performance when 2d interpolating/smoothing lines using scipy?", "body": "<p>Several issues here. First and foremost, spline fitting you're trying to use is global. This means that you're solving a system of linear equations of the size 20000 at the construction time (evaluations are weakly sensitive to the dataset size though). This explains why the spline construction is slow.</p>\n\n<p><code>scipy.interpolate.spline</code>, furthermore, does linear algebra with full matrices --- hence memory consumption. This is precisely why it's deprecated from scipy 0.19.0 on.</p>\n\n<p>The recommended replacement, available in scipy 0.19.0, is the <code>BSpline</code>/ <code>make_interp_spline</code> combo:</p>\n\n<pre><code>&gt;&gt;&gt; spl = make_interp_spline(x, y, k=3)    # returns a BSpline object\n&gt;&gt;&gt; y_new = spl(x_new)                     # evaluate \n</code></pre>\n\n<p>Notice it is <strong>not</strong>  <code>BSpline(x, y, k)</code>: BSpline objects do not know anything about the data or fitting or interpolation.</p>\n\n<p>If you are using older scipy versions, your options are:</p>\n\n<ul>\n<li><code>CubicSpline(x, y)</code> for cubic splines</li>\n<li><code>splrep(x, y, s=0) / splev</code> combo.</li>\n</ul>\n\n<hr>\n\n<p>However, you may want to think if you really need twice continuously differentiable functions. If only once differentiable functions are smooth enough for your purposes, then you can use local spline interpolations, e.g. <code>Akima1DInterpolator</code> or <code>PchipInterpolator</code>:</p>\n\n<pre><code>In [1]: import numpy as np\n\nIn [2]: from scipy.interpolate import pchip, splmake\n\nIn [3]: x = np.arange(1000)\n\nIn [4]: y = x**2\n\nIn [5]: %timeit pchip(x, y)\n10 loops, best of 3: 58.9 ms per loop\n\nIn [6]: %timeit splmake(x, y)    \n1 loop, best of 3: 5.01 s per loop\n</code></pre>\n\n<p>Here <code>splmake</code> is what <code>spline</code> uses under the hood, and it's also deprecated.</p>\n"}, {"tags": [], "owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "is_accepted": false, "score": 0, "last_activity_date": 1493397585, "creation_date": 1493397585, "answer_id": 43685100, "question_id": 43644790, "link": "https://stackoverflow.com/questions/43644790/how-to-improve-the-performance-when-2d-interpolating-smoothing-lines-using-scipy/43685100#43685100", "title": "How to improve the performance when 2d interpolating/smoothing lines using scipy?", "body": "<p>My problem can be generalize to how to smoothly plot 2d graphs when data points are randomized. Since you are only dealing with two columns of data, if you sort your data by independent variable, at least your data points will be connected in order, and that's how <code>matplotlib</code> connects your data points. </p>\n\n<p>@Dawid Laszuk has provided one solution to sort data by independent variable, and I'll display mine here:</p>\n\n<pre><code>plotting_columns = []\n    for i in range(len(x)):\n        plotting_columns.append(np.array([x[i],y[i]]))\n    plotting_columns.sort(key=lambda pair : pair[0])\n    plotting_columns = np.array(plotting_columns)\n</code></pre>\n\n<p>traditional <code>sort()</code> by filter condition could also do the sorting job efficient here.</p>\n\n<p>But it's just your first step. The following steps are not hard either, to smooth your graph, you also want to keep your independent variable in linear ascending order with identical step interval, so </p>\n\n<pre><code>x_smooth = np.linspace(x.min(), x.max(), num_steps)\n</code></pre>\n\n<p>is enough to do the job. Usually, if you have plenty of data points, for example, more than 10000 points (correctness and accuracy are not human verifiable), you just want to plot the significant points to display the trend, then only smoothing <code>x</code> is enough. So you can <code>plt.plot(x_smooth,y)</code> simply. </p>\n\n<p>You will notice that <code>x_smooth</code> will generate many <code>x</code> values that will not have corresponding <code>y</code> value. When you want to maintain the correctness, you need to use line fitting functions. As @ev-br demonstrated in his answer, <code>spline</code> functions are expensive on purpose. Therefore you might want to do some simpler trick. I smoothed my graph without using those functions. And you have some simple steps to it.</p>\n\n<p>First, round your values so that your data will not vary too much in small  intervals. (You can skip this step)\nYou can change one line when you constructing the <code>plotting_columns</code> as:</p>\n\n<p><code>plotting_columns.append(np.around(np.array(x[i],y[i]), decimal=4))</code></p>\n\n<p>After done this, you can filter out the point that you don't want to plot by choosing the points close to the x_smooth values:</p>\n\n<pre><code>new_plots = []\nfor i in range(len(x_smooth)):\n    if plotting_columns[:,0][i] &gt;= x_smooth[i] - error and plotting_columns[:,0][i]&lt; x_smooth[i] + error:\n        new_plots.append(plotting_columns[i])\n    else:\n        # Remove all points between the interval #\n</code></pre>\n\n<p>This is how I solved my problems.</p>\n"}], "owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1888, "favorite_count": 0, "accepted_answer_id": 43649817, "answer_count": 3, "score": 1, "last_activity_date": 1493402854, "creation_date": 1493241965, "last_edit_date": 1493402854, "question_id": 43644790, "link": "https://stackoverflow.com/questions/43644790/how-to-improve-the-performance-when-2d-interpolating-smoothing-lines-using-scipy", "title": "How to improve the performance when 2d interpolating/smoothing lines using scipy?", "body": "<p>I have a moderate size data set, namely 20000 x 2 floats in a two column matrix. The first column is the the x column which represents the distance to the original point along a trajectory, another column is the y column which represents the work has done to the object. This data set is obtained from lab operations, so it's fairly arbitrary. I've already turned this structure into numpy array. I want to plot y vs x in a figure with a smooth curve. So I hope the following code could help me:</p>\n\n<pre><code>x_smooth = np.linspace(x.min(),x.max(), 20000)\ny_smooth = spline(x, y, x_smooth)\nplt.plot(x_smooth, y_smooth)\nplt.show()\n</code></pre>\n\n<p>However, when my program execute the line <code>y_smooth = spline(x,y,x_smooth)</code>, it takes a very long time,say 10 min, and even sometimes it will blow my memory that I have to restart my machine. I tried to reduce the chunk number to 200 and 2000 and none of them works. Then I checked the official scipy reference: <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.spline.html\" rel=\"nofollow noreferrer\">scipy.interpolate.spline</a> here. And they said that <code>spline</code> is deprecated in v 0.19, but I'm not using the new version. If <code>spline</code> is deprecated for quite a bit of the time, how to use the equivalent <code>Bspline</code> now? If <code>spline</code> is still functioning, then what causes the slow performance </p>\n\n<p>One portion of my data could look like this:</p>\n\n<pre><code>13.202      0.0\n13.234738      -0.051354643759\n12.999116      0.144464320836\n12.86252      0.07396528119\n13.1157      0.10019738758\n13.357109      -0.30288563381\n13.234004      -0.045792536285\n12.836279      0.0362257166275\n12.851597      0.0542649286915\n13.110691      0.105297378401\n13.220619      -0.0182963209185\n13.092143      0.116647353635\n12.545676      -0.641112204849\n12.728248      -0.147460703493\n12.874176      0.0755861585235\n12.746764      -0.111583725833\n13.024995      0.148079528382\n13.106033      0.119481137144\n13.327233      -0.197666132456\n13.142423      0.0901867159545\n</code></pre>\n"}, {"tags": ["python", "utf-8", "encode"], "comments": [{"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 1, "creation_date": 1493242227, "post_id": 43644778, "comment_id": 74338124, "body": "possibly related, or helpful, <a href=\"http://stackoverflow.com/questions/2477452/%C3%A2%E2%82%AC-showing-on-page-instead-of\">\u201c&#226;\u20ac\u2122\u201d showing on page instead of \u201c &#39; \u201d</a>"}, {"owner": {"reputation": 32227, "user_id": 2337736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77aacbcecad375ad6d8c45cfe43afbc5?s=128&d=identicon&r=PG", "display_name": "Peter DeGlopper", "link": "https://stackoverflow.com/users/2337736/peter-deglopper"}, "edited": false, "score": 0, "creation_date": 1493242317, "post_id": 43644778, "comment_id": 74338172, "body": "Yes, the initial a-macron is a sure sign that you have utf-8 being displayed as if it were one of the iso-8859-1 related encodings. Most likely some but not all of the single quotes are leaning quotes rather than apostrophes."}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1493245510, "post_id": 43644778, "comment_id": 74339457, "body": "How does Natural Reader handle Unicode? It seems like it would need to allow accented characters."}], "answers": [{"comments": [{"owner": {"reputation": 1975, "user_id": 1744744, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0ea2850ef9a0500fa0ea5de1a528107a?s=128&d=identicon&r=PG&f=1", "display_name": "jason", "link": "https://stackoverflow.com/users/1744744/jason"}, "edited": false, "score": 0, "creation_date": 1493248336, "post_id": 43644958, "comment_id": 74340420, "body": "option 2 worked. maybe i implemented option 1 wrong, but it stripped the <code>&#39;</code> out of the text."}, {"owner": {"reputation": 22012, "user_id": 194586, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1a71658d81f8a82a8122050f21bb86d3?s=128&d=identicon&r=PG", "display_name": "Nick T", "link": "https://stackoverflow.com/users/194586/nick-t"}, "reply_to_user": {"reputation": 1975, "user_id": 1744744, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0ea2850ef9a0500fa0ea5de1a528107a?s=128&d=identicon&r=PG&f=1", "display_name": "jason", "link": "https://stackoverflow.com/users/1744744/jason"}, "edited": false, "score": 0, "creation_date": 1493250264, "post_id": 43644958, "comment_id": 74340951, "body": "That&#39;s what I meant by &quot;drop the characters&quot;. The variable is also called <code>stripped</code> ;)"}, {"owner": {"reputation": 32227, "user_id": 2337736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77aacbcecad375ad6d8c45cfe43afbc5?s=128&d=identicon&r=PG", "display_name": "Peter DeGlopper", "link": "https://stackoverflow.com/users/2337736/peter-deglopper"}, "edited": false, "score": 0, "creation_date": 1493261722, "post_id": 43644958, "comment_id": 74343795, "body": "No objections if this got you past your immediate problem, but it&#39;s not an ideal overall solution. It&#39;s just not true that all of unicode can be collapsed into ASCII. It&#39;d probably be worthwhile to spend some time figuring out how to tell Natural Reader what encoding your files are using."}], "tags": [], "owner": {"reputation": 22012, "user_id": 194586, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1a71658d81f8a82a8122050f21bb86d3?s=128&d=identicon&r=PG", "display_name": "Nick T", "link": "https://stackoverflow.com/users/194586/nick-t"}, "is_accepted": true, "score": 1, "last_activity_date": 1493243657, "last_edit_date": 1493243657, "creation_date": 1493242795, "answer_id": 43644958, "question_id": 43644778, "link": "https://stackoverflow.com/questions/43644778/%c3%a2%e2%82%ac-instead-of-in-natural-reader-after-encoding-with-utf-8/43644958#43644958", "title": "&#226;\u20ac\u2122 instead of &#39; in Natural Reader after encoding with utf-8", "body": "<p>If you're opening the file with a native text editor and it looks fine, the issue is likely with your other program which isn't correctly detecting the encoding and <a href=\"https://en.wikipedia.org/wiki/Mojibake\" rel=\"nofollow noreferrer\">mojibaking</a> it up. As mentioned in comments, it's almost assuredly a <a href=\"https://www.cl.cam.ac.uk/~mgk25/ucs/quotes.html\" rel=\"nofollow noreferrer\">Unicode quote character</a> that looks like an <code>'</code> but isn't.</p>\n\n<pre><code>my_string = ('The Knights who say '\n    '\\N{LEFT SINGLE QUOTATION MARK}'\n    'Ni!'\n    '\\N{RIGHT SINGLE QUOTATION MARK}'\n)\ndef print_repr_escaped(x):\n    print(repr(x.encode('unicode_escape').decode('ascii')))\n\nprint_repr_escaped(my_string)\n# 'The Knights who say \\\\u2018Ni!\\\\u2019'\n</code></pre>\n\n<p>If you can't control the encoding of the other program, you have 2 options: </p>\n\n<ol>\n<li><p>Drop all Unicode characters <a href=\"https://stackoverflow.com/questions/15321138/removing-unicode-u2026-like-characters-in-a-string-in-python2-7\">like so</a>:</p>\n\n<pre><code>stripped = my_string.encode('ascii', 'ignore').decode('ascii')\nprint_repr_escaped(stripped)\n# 'The Knights who say Ni!'\n</code></pre></li>\n<li><p>Attempt to convert Unicode characters to ASCII with something like <a href=\"https://pypi.python.org/pypi/Unidecode\" rel=\"nofollow noreferrer\">Unidecode</a></p>\n\n<pre><code>import unidecode\n\nconverted = unidecode.unidecode(my_string)\nprint_repr_escaped(converted)\n# \"The Knights who say 'Ni!'\"\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": false, "score": 1, "last_activity_date": 1493264538, "creation_date": 1493264538, "answer_id": 43648281, "question_id": 43644778, "link": "https://stackoverflow.com/questions/43644778/%c3%a2%e2%82%ac-instead-of-in-natural-reader-after-encoding-with-utf-8/43648281#43648281", "title": "&#226;\u20ac\u2122 instead of &#39; in Natural Reader after encoding with utf-8", "body": "<p>If you are on Windows, many Windows applications assume the native ANSI encoding for files unless there is a byte order mark (BOM) at the beginning of the file.  A BOM is not normally necessary for UTF-8, but serves as a signature for a UTF-8 file on Windows.  You can write one with the <code>utf-8-sig</code> codec.  the following will work on Python 2.x and 3.x:</p>\n\n<pre><code>import io\nwith io.open(\"input.txt\", \"w\", encoding='utf-8-sig') as text_file:\n    text_file.write(finaltext)\n</code></pre>\n"}], "owner": {"reputation": 1975, "user_id": 1744744, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0ea2850ef9a0500fa0ea5de1a528107a?s=128&d=identicon&r=PG&f=1", "display_name": "jason", "link": "https://stackoverflow.com/users/1744744/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1300, "favorite_count": 0, "accepted_answer_id": 43644958, "answer_count": 2, "score": 1, "last_activity_date": 1493264538, "creation_date": 1493241933, "question_id": 43644778, "link": "https://stackoverflow.com/questions/43644778/%c3%a2%e2%82%ac-instead-of-in-natural-reader-after-encoding-with-utf-8", "title": "&#226;\u20ac\u2122 instead of &#39; in Natural Reader after encoding with utf-8", "body": "<p>I have some text that I got from the web. After processing, it is written to a <code>txt</code> file with </p>\n\n<pre><code>text_file = open(\"input.txt\", \"w\")\ntext_file.write(finaltext.encode('utf-8'))\ntext_file.close()\n</code></pre>\n\n<p>When i open the txt file, everything is fine. But when I load it into Natural Reader to turn into audio. I see <code>\u00e2\u20ac\u2122</code> instead of <code>'</code> only on some not all the <code>'</code></p>\n\n<p>what to do?</p>\n"}, {"tags": ["python", "matplotlib", "legend"], "answers": [{"comments": [{"owner": {"reputation": 1215, "user_id": 4414359, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a8314189196f1f31ae825807125de8d0?s=128&d=identicon&r=PG&f=1", "display_name": "Raksha", "link": "https://stackoverflow.com/users/4414359/raksha"}, "edited": false, "score": 0, "creation_date": 1493242613, "post_id": 43644830, "comment_id": 74338293, "body": "There isn&#39;t an actual legend though, so if I do that, I get an error: <code>&quot;UserWarning: No labelled objects found. Use label=&#39;...&#39; kwarg on individual plots. warnings.warn(&quot;No labelled objects found. &quot;&quot;</code>"}, {"owner": {"reputation": 1215, "user_id": 4414359, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a8314189196f1f31ae825807125de8d0?s=128&d=identicon&r=PG&f=1", "display_name": "Raksha", "link": "https://stackoverflow.com/users/4414359/raksha"}, "edited": false, "score": 0, "creation_date": 1493243386, "post_id": 43644830, "comment_id": 74338606, "body": "nevermind, it totally worked ... *facepalm* ... I was confusing rows with columns and kept wondering why <code>ncol=1</code> didn&#39;t make one line ... I guess this&#39;ll do. Thanks!"}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 8, "last_activity_date": 1493242188, "creation_date": 1493242188, "answer_id": 43644830, "question_id": 43644758, "link": "https://stackoverflow.com/questions/43644758/how-to-put-all-legend-entries-on-one-line/43644830#43644830", "title": "How to put all legend entries on one line?", "body": "<p>If you want to have <code>n</code> columns in the legend, you can use </p>\n\n<pre><code>plt.legend(ncol=n)\n</code></pre>\n"}], "owner": {"reputation": 1215, "user_id": 4414359, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a8314189196f1f31ae825807125de8d0?s=128&d=identicon&r=PG&f=1", "display_name": "Raksha", "link": "https://stackoverflow.com/users/4414359/raksha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2679, "favorite_count": 0, "accepted_answer_id": 43644830, "answer_count": 1, "score": 5, "last_activity_date": 1493242188, "creation_date": 1493241814, "question_id": 43644758, "link": "https://stackoverflow.com/questions/43644758/how-to-put-all-legend-entries-on-one-line", "title": "How to put all legend entries on one line?", "body": "<p>I can't seem to find a solution.\nI have a legend that's custom (using solution found <a href=\"https://l.facebook.com/l.php?u=http%3A%2F%2Fstackoverflow.com%2Fquestions%2F39500265%2Fmanually-add-legend-items-python-matplotlib&amp;h=ATME7DaamjHttEUXOesv8OKwKsnan0oO_KGeTwIkaYIcZwSvRAnhxL0jDcnS_GUoI9jvrou39Zcc3mmjdULYL0EFaVIR9P0RIbWRyPFTPyMPwKltbhWeQshyOdmKE7VE57t7w6KBYNJM0G0qFmN37go\" rel=\"noreferrer\">here</a>) and I'm trying to put multiple entries on one line rather than have each new entry under the previous one.\nHow does one do?</p>\n\n<pre><code>red_patch = mpatches.Patch(color='red', label='The red data')\nblue_patch = mpatches.Patch(color='blue', label='The blue data')\nplt.legend(handles=[red_patch, blue_patch])\n</code></pre>\n\n<p>I'd like to have \"(red marker) The red data, (blue marker) The blue data, etc...\" all in one line on top. It'd be nice to have it start a new line too when there are more entries than can fit on the plot. So just like normal text I guess.</p>\n"}, {"tags": ["python", "string", "function", "dataframe", "substring"], "comments": [{"owner": {"reputation": 40221, "user_id": 7311767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/13Fpq.png?s=128&g=1", "display_name": "Stephen Rauch", "link": "https://stackoverflow.com/users/7311767/stephen-rauch"}, "edited": false, "score": 0, "creation_date": 1493241988, "post_id": 43644748, "comment_id": 74338009, "body": "You don&#39;t want rpartition: <code>comment1.partition(start)[-1].partition(end)[0]</code>"}, {"owner": {"reputation": 1678, "user_id": 2397315, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/w7pZ9.jpg?s=128&g=1", "display_name": "VMRuiz", "link": "https://stackoverflow.com/users/2397315/vmruiz"}, "edited": false, "score": 0, "creation_date": 1493243194, "post_id": 43644748, "comment_id": 74338536, "body": "You could also use reg exp like <code>re.findall(&#39;due on:(.*)\\.&#39;, comment)</code>. It seems much more easy to read."}], "answers": [{"tags": [], "owner": {"reputation": 3072, "user_id": 6725184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40514a449959fa5e76f19afc41436221?s=128&d=identicon&r=PG&f=1", "display_name": "Christian K&#246;nig", "link": "https://stackoverflow.com/users/6725184/christian-k%c3%b6nig"}, "is_accepted": false, "score": 0, "last_activity_date": 1493242356, "creation_date": 1493242356, "answer_id": 43644877, "question_id": 43644748, "link": "https://stackoverflow.com/questions/43644748/fetch-partial-string-in-with-start-and-end/43644877#43644877", "title": "fetch partial string in with start and end", "body": "<p>From the docs:</p>\n\n<blockquote>\n  <p><a href=\"https://docs.python.org/3.6/library/stdtypes.html#str.rpartition\" rel=\"nofollow noreferrer\"><code>rpartition()</code></a>: Split the string at the last occurrence of sep</p>\n</blockquote>\n\n<p>Since your <code>end=\".\"</code> occurs last after <code>APPROVED.</code>, this position is used for the split.</p>\n\n<p>You want the first occurence after <code>due on:</code>, so another <a href=\"https://docs.python.org/3.6/library/stdtypes.html#str.partition\" rel=\"nofollow noreferrer\"><code>partition()</code></a> on the remainder of your first split:</p>\n\n<pre><code>&gt;&gt;&gt; comment.partition(start)[-1].partition(end)[0].strip()\n'12/31/2015'\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 7764698, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/574ed96d0603a4d10f08f0cc225328f7?s=128&d=identicon&r=PG&f=1", "display_name": "mikehuuuu", "link": "https://stackoverflow.com/users/7764698/mikehuuuu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1493242356, "creation_date": 1493241764, "last_edit_date": 1493242138, "question_id": 43644748, "link": "https://stackoverflow.com/questions/43644748/fetch-partial-string-in-with-start-and-end", "title": "fetch partial string in with start and end", "body": "<p>I'm trying to extract dates from strings with a start and end string. </p>\n\n<p>example:</p>\n\n<pre><code>comment = \" text text text due on: 12/31/2015. REVIEWER'S COMMENTS:     APPROVED. text text text\"\nstart = \"due on:\"\nend = \".\"\n</code></pre>\n\n<p>I want everything between <code>due on:</code> and the first period after that to be returned, which is <code>12/31/2015</code> </p>\n\n<p>Instead my code returns:</p>\n\n<pre><code>&gt;&gt;&gt; print(comment1.partition(start)[-1].rpartition(end)[0])\n\n12/31/2015. REVIEWER'S COMMENTS:     APPROVED\n</code></pre>\n\n<p>It seems like my code is returning everything between start and the period after \"Approved\" but I want it to end at the period after the date. </p>\n"}, {"tags": ["python", "scikit-learn"], "comments": [{"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1493257634, "post_id": 43644703, "comment_id": 74342788, "body": "Your question is very What is the problem? Are you getting any error? Are the predictions not right?"}], "answers": [{"comments": [{"owner": {"reputation": 902, "user_id": 6603658, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b64a8d63af5dfca2ec635aac587001bb?s=128&d=identicon&r=PG&f=1", "display_name": "astudentofmaths", "link": "https://stackoverflow.com/users/6603658/astudentofmaths"}, "edited": false, "score": 0, "creation_date": 1493245199, "post_id": 43645254, "comment_id": 74339346, "body": "I am unsure about your answer because I tried to fit other models (SVC, MLPClassifier etc) and it worked perfectly well."}, {"owner": {"reputation": 1255, "user_id": 7739713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p3hPF.png?s=128&g=1", "display_name": "acidtobi", "link": "https://stackoverflow.com/users/7739713/acidtobi"}, "reply_to_user": {"reputation": 902, "user_id": 6603658, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b64a8d63af5dfca2ec635aac587001bb?s=128&d=identicon&r=PG&f=1", "display_name": "astudentofmaths", "link": "https://stackoverflow.com/users/6603658/astudentofmaths"}, "edited": false, "score": 1, "creation_date": 1493245303, "post_id": 43645254, "comment_id": 74339387, "body": "What exactly doesn&#39;t work then? Can you add your error message to the question?"}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1493273285, "post_id": 43645254, "comment_id": 74347426, "body": "No, mostly column vectors will be fine (sometimes a warning)."}], "tags": [], "owner": {"reputation": 1255, "user_id": 7739713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p3hPF.png?s=128&g=1", "display_name": "acidtobi", "link": "https://stackoverflow.com/users/7739713/acidtobi"}, "is_accepted": false, "score": 0, "last_activity_date": 1493244075, "creation_date": 1493244075, "answer_id": 43645254, "question_id": 43644703, "link": "https://stackoverflow.com/questions/43644703/how-to-use-baggingclassifier/43645254#43645254", "title": "How to use BaggingClassifier", "body": "<p>In <code>fit()</code>, y needs to be a 1d vector, but training_target.values will return a column vector. You can transform it using <code>ravel()</code>:</p>\n\n<pre><code>model.fit(training_inputs.values, training_target.values.ravel())\n</code></pre>\n"}], "owner": {"reputation": 902, "user_id": 6603658, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b64a8d63af5dfca2ec635aac587001bb?s=128&d=identicon&r=PG&f=1", "display_name": "astudentofmaths", "link": "https://stackoverflow.com/users/6603658/astudentofmaths"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 330, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493244075, "creation_date": 1493241562, "question_id": 43644703, "link": "https://stackoverflow.com/questions/43644703/how-to-use-baggingclassifier", "title": "How to use BaggingClassifier", "body": "<p>I don't understand how to use the <code>BaggingClassifier</code> from sklearn.\nLet's say I have a dataframe of inputs of shape (10,5) and a dataframe of targets of shape (10,1):</p>\n\n<pre><code>traininginputs:\n\n              Date         A             B     \n       2015-01-02          5             1     \n       2015-01-02          6             2     \n       2015-01-02          4             3     \n       2015-01-02          1             2     \n       2015-01-02          3             2    \n       2015-01-03          1             1   \n\ntrainingtarget:\n            Date           t         \n       2015-01-02          1          \n       2015-01-02         -1               \n       2015-01-02          1               \n       2015-01-02          1                \n       2015-01-02          1              \n       2015-01-03         -1   \n</code></pre>\n\n<p>If I do the following:</p>\n\n<pre><code>clf1 = svm.SVC( probability=True)\nmodel = BaggingClassifier(base_estimator=clf1)\nmodel.fit(traininginputs.values, trainingtarget.values)\nmodel.predict(testinputs)\n</code></pre>\n\n<p>with</p>\n\n<p>testinputs:</p>\n\n<pre><code>          Date         A             B     \n   2015-01-02          5             1     \n   2015-01-02          6             2     \n   2015-01-02          4             3     \n   2015-01-02          1             2     \n   2015-01-02          3             2    \n   2015-01-03          1             1   \n</code></pre>\n\n<p>Why doesn't it work ?\nI feel like I am missing something about the way to use <code>BaggingClassifier</code></p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1493242522, "post_id": 43644666, "comment_id": 74338257, "body": "<code>return</code> ends the function. To return multiple things you must gather them into a list."}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1493242873, "creation_date": 1493242873, "answer_id": 43644984, "question_id": 43644666, "link": "https://stackoverflow.com/questions/43644666/python-creating-a-league-table-that-displays-the-lines-separately-and-a-funct/43644984#43644984", "title": "Python - Creating a league table, that displays the lines separately and a function to extract certain lines", "body": "<p>That's accurate per your code.  <strong>create_league</strong> enters the loop, processes the first item, and then returns that team's info without going back to the top of the loop.  You <em>told</em> it to return as soon as it gets to that point.  You need to allow it to finish the loop, writing and collecting things in whatever form you're using.</p>\n\n<p>Similarly, <strong>getTeam</strong> doesn't return anything: there's no <strong>return</strong> statement at all.  That's why the return value is <strong>None</strong>.</p>\n\n<p>I can't show you how to fix this, since you haven't specified the functionality in your posting, but that's where you're going wrong.  It <em>looks</em> as if you may be confusing yourself between the information you write to a file, compared to what you return in communicating between the function and the calling routine.</p>\n"}, {"tags": [], "owner": {"reputation": 333, "user_id": 4561973, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zw81CFOGhOo/AAAAAAAAAAI/AAAAAAAAA7Q/WwSuwDSbJRM/photo.jpg?sz=128", "display_name": "adee alamsz", "link": "https://stackoverflow.com/users/4561973/adee-alamsz"}, "is_accepted": false, "score": 0, "last_activity_date": 1493244834, "creation_date": 1493244834, "answer_id": 43645394, "question_id": 43644666, "link": "https://stackoverflow.com/questions/43644666/python-creating-a-league-table-that-displays-the-lines-separately-and-a-funct/43645394#43645394", "title": "Python - Creating a league table, that displays the lines separately and a function to extract certain lines", "body": "<p>There are mistakes to your code</p>\n\n<ol>\n<li>You put return on the loop, that's why it only loop once, then get out of the loop</li>\n<li>You did not write anything to file </li>\n</ol>\n\n<p>Probably you mean something like this</p>\n\n<pre><code>  def save_info():\n        with open(\"league.txt\",\"w\") as myFile:\n            for i in range(3):\n                team=input(\"Enter name of team: \")\n                matchesPlayed=input(\"Enter number of matches played: \")\n                matchesWon=int(input(\"Enter number of matches won: \"))\n                matchesDrawn=int(input(\"Enter number of matches drawn: \"))\n                matchesLost=int(input(\"Enter number of matches lost: \"))\n                myFile.write(\"{0},{1},{2},{3},{4}\\n\".format(team,matchesPlayed,matchesWon,matchesDrawn,matchesLost))\n\n\n    def create_league():\n        with open(\"league.txt\",\"r\") as myFile:\n            contents = myFile.readlines()\n            for content in contents:\n                content.rstrip('\\n')\n                team_info=content.split(\",\")\n                team_info[2]=int(team_info[2])\n                team_info[3]=int(team_info[3])\n                points=(team_info[2]*3)+(team_info[3]*1)\n                print(points)\n\nsave_info()\ncreate_league()\n</code></pre>\n\n<p>same applies to get_team method, and you should use snake case instead of camel case for python method</p>\n"}], "owner": {"reputation": 17, "user_id": 7703358, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10207860529225697/picture?type=large", "display_name": "Patrick Asindi", "link": "https://stackoverflow.com/users/7703358/patrick-asindi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 907, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493244834, "creation_date": 1493241367, "question_id": 43644666, "link": "https://stackoverflow.com/questions/43644666/python-creating-a-league-table-that-displays-the-lines-separately-and-a-funct", "title": "Python - Creating a league table, that displays the lines separately and a function to extract certain lines", "body": "<p>I am trying to write three funcitons that, create a league table(I used 3 teams to make it easier to test but in practice there will be 16), calculate the points of those teams (3 points for a win, 1 point for a draw and 0 for a loss) and a function that, given the name of a team will return all its information. The saveInfo function works and the createLeague function works however it only returns the first line not the subsequent 2, also the getTeam function returns (none). </p>\n\n<pre><code>def saveInfo():\n    myFile=open(\"league.txt\",\"w\")\n    for i in range(3):\n        team=input(\"Enter name of team: \")\n        matchesPlayed=input(\"Enter number of matches played: \")\n        matchesWon=int(input(\"Enter number of matches won: \"))\n        matchesDrawn=int(input(\"Enter number of matches drawn: \"))\n        matchesLost=int(input(\"Enter number of matches lost: \"))\n        return team,\"\",matchesPlayed,\"\",matchesWon,\"\",matchesDrawn,\"\",matchesLost\n     myFile.close()\n\ndef createLeague():\n    myFile=open(\"league.txt\",\"r\")\n    points=0\n    for info in myFile:\n        for i in range(3):\n            info=info.rstrip(\"/n\")\n            team_info=info.split()\n            team_info[2]=int(team_info[2])\n            team_info[3]=int(team_info[3])\n            points=(team_info[2]*3)+(team_info[3]*1)\n            team_info.append(points)\n            return team_info   \n     myFile.close()\n\ndef getTeam():\n    name=\"Enter name of team\"\n    myFile=open(\"league.txt\",\"r\")\n    team_info=\"\"\n    for line in myFile:\n        info=info.rstrip(\"/n\")\n        team_info=info.split()\n        if team_info[0]==name:\n            print(team_info)\n    myFile.close()\n\nsaveInfo()\nteam_info=createLeague\nprint(createLeague()) # only displays first line not the other 2\n</code></pre>\n"}, {"tags": ["python", "point-cloud-library"], "comments": [{"owner": {"reputation": 10312, "user_id": 1681480, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/0wsSK.jpg?s=128&g=1", "display_name": "beroe", "link": "https://stackoverflow.com/users/1681480/beroe"}, "edited": false, "score": 0, "creation_date": 1493242031, "post_id": 43644656, "comment_id": 74338033, "body": "Are you already using pandas / matplotlib?"}, {"owner": {"reputation": 43, "user_id": 7927931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ac533f75eee648236fc9b29d1d90b2?s=128&d=identicon&r=PG&f=1", "display_name": "S.sonia", "link": "https://stackoverflow.com/users/7927931/s-sonia"}, "reply_to_user": {"reputation": 10312, "user_id": 1681480, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/0wsSK.jpg?s=128&g=1", "display_name": "beroe", "link": "https://stackoverflow.com/users/1681480/beroe"}, "edited": false, "score": 0, "creation_date": 1493250429, "post_id": 43644656, "comment_id": 74340997, "body": "Yes, I am using matplotlib"}, {"owner": {"reputation": 10312, "user_id": 1681480, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/0wsSK.jpg?s=128&g=1", "display_name": "beroe", "link": "https://stackoverflow.com/users/1681480/beroe"}, "edited": false, "score": 0, "creation_date": 1493253978, "post_id": 43644656, "comment_id": 74341853, "body": "Could get more answers if you can include <a href=\"http://stackoverflow.com/help/mcve\">a minimal reproducible example</a> in your question, showing what you have at this point."}], "owner": {"reputation": 43, "user_id": 7927931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ac533f75eee648236fc9b29d1d90b2?s=128&d=identicon&r=PG&f=1", "display_name": "S.sonia", "link": "https://stackoverflow.com/users/7927931/s-sonia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 345, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493241345, "creation_date": 1493241345, "question_id": 43644656, "link": "https://stackoverflow.com/questions/43644656/converting-3d-point-cloud-to-a-2d-gridmap-on-python", "title": "Converting 3D point cloud to a 2D gridmap on python", "body": "<p>I have a 3d point cloud (x,y,z) and I want to get a 2d gridmap image, by projecting the point cloud into this gridmap. Does anyone know how I can do that using Python?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "compare", "multiplication", "divide", "interchange"], "comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 1, "creation_date": 1493241464, "post_id": 43644615, "comment_id": 74337750, "body": "@nevabyte How do you make 5 from 1 then?"}, {"owner": {"reputation": 1, "user_id": 7927911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee1c284b990ff12912f63e2db3fe14?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Doe", "link": "https://stackoverflow.com/users/7927911/diego-doe"}, "edited": false, "score": 0, "creation_date": 1493241755, "post_id": 43644615, "comment_id": 74337882, "body": "@MosesKoledoye The divisors are not arbitrary, they are either 2 or 3 or both."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1493241906, "post_id": 43644615, "comment_id": 74337964, "body": "@nevabyte Um, huh? But ok, ignore the 1 and make 5 using 2 and 3 then."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1493242051, "post_id": 43644615, "comment_id": 74338041, "body": "@nevabyte So? 1 isn&#39;t 5. Make <b>5</b>."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1493243263, "post_id": 43644615, "comment_id": 74338560, "body": "Um, what do you mean the &quot;real&quot; number for <code>2 &#47; 3 * 3 </code> is 1.99999999?"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1493243757, "post_id": 43644615, "comment_id": 74338761, "body": "@nevabyte That long expression doesn&#39;t make 5 but 32768/6561. Try again? Btw, you did start from 1 after all, so why did you complain about that earlier?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1493243945, "post_id": 43644615, "comment_id": 74338838, "body": "@nevabyte Again, what do you mean <b>the real number?</b>. <code>2&#47;3*3</code> is <i>exactly equal</i> to 2. Which happens to be <i>exactly equal</i> to <code>1.99999....</code> So again, what are you trying to get at?"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1493244176, "post_id": 43644615, "comment_id": 74338936, "body": "@nevabyte Well show us how then."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1493245185, "post_id": 43644615, "comment_id": 74339339, "body": "@nevabyte I see what you are getting at now. Not sure of the validity, it&#39;s been a while since I did any analysis, but I know what you mean now."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1493631823, "post_id": 43644615, "comment_id": 74477528, "body": "@juanpa.arrivillaga I don&#39;t think nevabyte&#39;s idea works. If we apply logarithms, the problem becomes turning log(1)=0 into log(5) by adding &#177;log(2) and &#177;log(3). So now we&#39;re talking about a series like nevabyte did. Is that how you understood it as well? The problem is, there is no series with those terms that converges to log(5), or even converges at all. Because we&#39;re always jumping up or down by at least log(2). While we might <b>get</b> arbitrarily close to the goal, we can&#39;t <b>stay</b> close enough."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1493631828, "post_id": 43644615, "comment_id": 74477533, "body": "Same with multiplication (i.e., no log). We might <b>get</b> arbitrarily close to 5 with some prefix product, but the very next prefix product will be far away again, as we have to multiply or divide by at least 2. So we don&#39;t <b>stay</b> close enough to &quot;converge&quot; to 5."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7927911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee1c284b990ff12912f63e2db3fe14?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Doe", "link": "https://stackoverflow.com/users/7927911/diego-doe"}, "edited": false, "score": 0, "creation_date": 1493245010, "post_id": 43645092, "comment_id": 74339282, "body": "But what if I have 9 operations total and by the time I get to the target I&#39;m one division or one multiplicacion short?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1493246906, "post_id": 43645092, "comment_id": 74339924, "body": "If you&#39;re short by an odd quantity of operations, you can&#39;t solve the problem as given."}, {"owner": {"reputation": 1, "user_id": 7927911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee1c284b990ff12912f63e2db3fe14?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Doe", "link": "https://stackoverflow.com/users/7927911/diego-doe"}, "edited": false, "score": 0, "creation_date": 1493264468, "post_id": 43645092, "comment_id": 74344508, "body": "Do you know the most efficient way to calculate the prime factors of a number? I try the: for x in range(2,number) and then asking if (number%x ==0) saving the numbers that enter the if in cuestion."}, {"owner": {"reputation": 1, "user_id": 7927911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee1c284b990ff12912f63e2db3fe14?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Doe", "link": "https://stackoverflow.com/users/7927911/diego-doe"}, "edited": false, "score": 0, "creation_date": 1493264639, "post_id": 43645092, "comment_id": 74344570, "body": "I already have the code done thanks to your tip, is just that my program just snaps when I enter a number &gt; 3^15 :("}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 1, "user_id": 7927911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee1c284b990ff12912f63e2db3fe14?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Doe", "link": "https://stackoverflow.com/users/7927911/diego-doe"}, "edited": false, "score": 0, "creation_date": 1493308883, "post_id": 43645092, "comment_id": 74372270, "body": "Most of all, note that you do <i>not</i> need a complete prime factorization: all you need is factors of 2 and 3.  As for primes in general, there&#39;s no one best way, but there are myriad solutions in the research you supposedly did before you posted.  Try &quot;prime sieve&quot;."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 1, "user_id": 7927911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee1c284b990ff12912f63e2db3fe14?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Doe", "link": "https://stackoverflow.com/users/7927911/diego-doe"}, "edited": false, "score": 0, "creation_date": 1493308903, "post_id": 43645092, "comment_id": 74372281, "body": "Also, if you have a new problem with your code, please post another question."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1493243283, "creation_date": 1493243283, "answer_id": 43645092, "question_id": 43644615, "link": "https://stackoverflow.com/questions/43644615/how-can-i-interchange-between-multypling-and-dividing-by-2-different-numbers/43645092#43645092", "title": "How can I interchange between multypling and dividing by 2 different numbers?", "body": "<p>First of all use descriptive variable names, such as <strong>start</strong>, <strong>target</strong>, and <strong>steps</strong>.</p>\n\n<p>No, there isn't an <em>easy</em> way to do this, but there are <em>straightforward</em> ways.</p>\n\n<p>First, you need to find the necessary change.  Break down both <strong>start</strong> and <strong>target</strong> into factors of 2, factors of 3, and anything else.  If this \"anything\" else\" doesn't match, then you can't solve the problem at all.</p>\n\n<p>For instance, look at your given problem: going from 9 to 4.  Breaking down each number:</p>\n\n<pre><code>9 = 3*3    # no 2's, no other stuff\n4 = 2*2    # no 3's, no other stuff\n</code></pre>\n\n<p>Since the \"other\" stuff matches (i.e. 1), you can make the transition.  You need to remove 2 factors of 3, and add 2 factors of 2.  That's 4 steps.  From there, all you have to do is add pairs of *3/3 or *2/2 until you have 8 steps.</p>\n\n<p>Let's try with changing 56 into 126:</p>\n\n<pre><code> 56 = 2*2*2*7   # no 3's, other = 7\n126 = 2*3*3*7   # other = 7\n</code></pre>\n\n<p>To make the transition, you need to remove two 2's and add two 3's.  That's four steps; you adjust to the desired number as before.</p>\n\n<p>There's your attack; can you code that?</p>\n"}, {"comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1493244783, "post_id": 43645318, "comment_id": 74339200, "body": "For accuracy you could use <code>fractions.Fraction</code>."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1493244948, "post_id": 43645318, "comment_id": 74339258, "body": "@StefanPochmann yes, the function should work if you just pass it <code>Fraction</code> objects, but boy does it slow down!"}], "tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": false, "score": 0, "last_activity_date": 1493244491, "creation_date": 1493244491, "answer_id": 43645318, "question_id": 43644615, "link": "https://stackoverflow.com/questions/43644615/how-can-i-interchange-between-multypling-and-dividing-by-2-different-numbers/43645318#43645318", "title": "How can I interchange between multypling and dividing by 2 different numbers?", "body": "<p>Just for fun, here is a brute-force approach <em>that scales horrifically</em> -- O(y^4), </p>\n\n<pre><code>def bruteforce(x, y, z, acc=\"\", accv=None):\n    if accv == z and len(acc) == y*2:\n        return acc\n    if accv is None:\n        accv = x\n    if len(acc) == y*2:\n        return\n    m2 = bruteforce(x, y, z, acc+'*2', accv*2)\n    m3 = bruteforce(x, y, z, acc+'*3', accv*3)\n    d2 = bruteforce(x, y, z, acc+'/2', accv/2)\n    d3 = bruteforce(x, y, z, acc+'/3', accv/3)\n    return m2 or m3 or d2 or d3\n</code></pre>\n\n<p>In action:</p>\n\n<pre><code>In [49]: exp = bruteforce(9, 8, 4)\n\nIn [50]: exp\nOut[50]: '*2*2*2*2/2/2/3/3'\n\nIn [51]: eval('9'+exp)\nOut[51]: 4.0\n\nIn [52]: exp = bruteforce(13, 8, 4)\n\nIn [53]: exp\n\nIn [54]: exp = bruteforce(9, 7, 2)\n\nIn [55]: exp\nOut[55]: '*2*2*2/2/2/3/3'\n\nIn [56]: eval('9'+exp)\nOut[56]: 2.0\n</code></pre>\n\n<p>Will be buggy because of floating-point inaccuracy...</p>\n"}], "owner": {"reputation": 1, "user_id": 7927911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee1c284b990ff12912f63e2db3fe14?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Doe", "link": "https://stackoverflow.com/users/7927911/diego-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493249353, "creation_date": 1493241180, "last_edit_date": 1493249353, "question_id": 43644615, "link": "https://stackoverflow.com/questions/43644615/how-can-i-interchange-between-multypling-and-dividing-by-2-different-numbers", "title": "How can I interchange between multypling and dividing by 2 different numbers?", "body": "<p>I'm given integers <strong>X</strong>, <strong>Y</strong>, and <strong>Z</strong>.  In each step, I can either multiply or divide, by either 2 or 3.  I need to transform <strong>X</strong> to <strong>Z</strong> in exactly <strong>Y</strong> steps ... or determine that it's not possible.</p>\n\n<p>For Example:</p>\n\n<pre><code>X is 9,\nY is 8,\nZ is 4.\n</code></pre>\n\n<p>9 can become 4 by: 9/3/3x2x2x2x2/2/2 = 4\nAs you can see I made 8 operations.</p>\n\n<p>How can this be done in Python?</p>\n"}, {"tags": ["python", "pywin32", "win32com"], "comments": [{"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "edited": false, "score": 1, "creation_date": 1493242988, "post_id": 43644614, "comment_id": 74338442, "body": "Can you see what <code>for folder in outlook.Folders: print(folder.Name)</code> gives you?"}, {"owner": {"reputation": 97, "user_id": 7222754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31495be3d9332d5e4df9c37d1d9de951?s=128&d=identicon&r=PG&f=1", "display_name": "kashmoney", "link": "https://stackoverflow.com/users/7222754/kashmoney"}, "reply_to_user": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "edited": false, "score": 0, "creation_date": 1493344346, "post_id": 43644614, "comment_id": 74388018, "body": "Thanks! It works. For some reason I was assuming that &quot;folders&quot; would be for folders like Inbox, Sent, etc and that there would be something like outlook.Mailbox for mailboxes. Did not know that they are all considered folders."}, {"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "edited": false, "score": 0, "creation_date": 1493353219, "post_id": 43644614, "comment_id": 74390087, "body": "Glad it works for you! I posted my comment as an answer."}], "answers": [{"tags": [], "owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "is_accepted": true, "score": 1, "last_activity_date": 1493353167, "creation_date": 1493353167, "answer_id": 43671891, "question_id": 43644614, "link": "https://stackoverflow.com/questions/43644614/win32com-python-connecting-to-one-of-multiple-mailboxes/43671891#43671891", "title": "win32com Python: Connecting to one of multiple mailboxes", "body": "<p>You should be able to enumerate the mailboxes with:</p>\n\n<pre><code>for folder in outlook.Folders: \n    print(folder.Name)\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 7222754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31495be3d9332d5e4df9c37d1d9de951?s=128&d=identicon&r=PG&f=1", "display_name": "kashmoney", "link": "https://stackoverflow.com/users/7222754/kashmoney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1037, "favorite_count": 0, "accepted_answer_id": 43671891, "answer_count": 1, "score": 0, "last_activity_date": 1493353167, "creation_date": 1493241180, "question_id": 43644614, "link": "https://stackoverflow.com/questions/43644614/win32com-python-connecting-to-one-of-multiple-mailboxes", "title": "win32com Python: Connecting to one of multiple mailboxes", "body": "<p>I have 2 mailboxes (abc@er.com and def@er.com) in outlook and need to connect to a specific mailbox. By default, Python's win32com.client is connecting to the wrong one. </p>\n\n<p>Is there a parameter to specify which mailbox to connect to? My code is:</p>\n\n<p><code>outlook = win32com.client.Dispatch(\"Outlook.Application\").GetNamespace(\"MAPI\")\ninbox = outlook.GetDefaultFolder(6)\nmessages = inbox.Items</code></p>\n\n<p>I have tried very hard to find which parameters allow me to connect to a specific mailbox but did not see anything. Thanks for your help.</p>\n"}, {"tags": ["python", "scikit-learn", "probability", "logistic-regression"], "comments": [{"owner": {"reputation": 1465, "user_id": 4681732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xuool.jpg?s=128&g=1", "display_name": "nbryans", "link": "https://stackoverflow.com/users/4681732/nbryans"}, "edited": false, "score": 0, "creation_date": 1493241401, "post_id": 43644605, "comment_id": 74337722, "body": "It&#39;s possible that the CSV file has a limited precision (i.e. is cutting off at 6 decimal places, for example) while the data over the network socket is full precision. This could cause a difference."}, {"owner": {"reputation": 1465, "user_id": 4681732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xuool.jpg?s=128&g=1", "display_name": "nbryans", "link": "https://stackoverflow.com/users/4681732/nbryans"}, "edited": false, "score": 0, "creation_date": 1493241482, "post_id": 43644605, "comment_id": 74337759, "body": "Alternatively, make sure that in both cases you are reading ALL the lines (check the the first and last rows are read in each case). Also, if your network socket implementation is not serial (i.e. coming in a different order) than maybe you are missing some."}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 3, "creation_date": 1493257461, "post_id": 43644605, "comment_id": 74342737, "body": "There can be a large number of possibilities for this to happen. Show some code to identify them. Also are you setting the random seed (<code>random_state</code>) parameter?"}, {"owner": {"reputation": 11, "user_id": 7903640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57faf59a695434ad6921c5ab10331f41?s=128&d=identicon&r=PG&f=1", "display_name": "calvin", "link": "https://stackoverflow.com/users/7903640/calvin"}, "edited": false, "score": 0, "creation_date": 1493401557, "post_id": 43644605, "comment_id": 74418201, "body": "There was an issue with data precision, so that there was difference between two data sources. Now I round to 5 decimal points while reading CSV file and also round to 5 decimals for network data. I double checked that data are exactly the same now - both for training set (I checked first and last row) and test data. However, I still see different prediction probability results. Are there any other possible reasons? Network socket is serial and there should be no order issue."}], "owner": {"reputation": 11, "user_id": 7903640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57faf59a695434ad6921c5ab10331f41?s=128&d=identicon&r=PG&f=1", "display_name": "calvin", "link": "https://stackoverflow.com/users/7903640/calvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 215, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1494166680, "creation_date": 1493241143, "last_edit_date": 1494166680, "question_id": 43644605, "link": "https://stackoverflow.com/questions/43644605/sklearn-logisticregression", "title": "sklearn LogisticRegression", "body": "<p>I trained a LogisticRegression model from sklearn.linear_model. I did two tests with the exact same data (both for training and testing). In one test the data was read from local csv file. In the other test data was received from network socket. However, I got different prediction probability results from predict_proba output. </p>\n\n<p>Is there any possible reason that can explain this issue? Or there must be some kind of problem with the code? I am using Python 3.4.4 and the scikit-learn version is 0.18.1.</p>\n\n<p>Thanks!</p>\n\n<p>Some updates:</p>\n\n<p>There was an issue with data precision, so that there was difference between two data sources. Now I round to 5 decimal points while reading CSV file and also round to 5 decimals for network data. I double checked that data are exactly the same now - both for training set (I checked first and last row) and test data. However, I still see different prediction probability results. Are there any other possible reasons? Network socket is serial and there should be no order issue.</p>\n"}, {"tags": ["python", "statistics", "pymc3", "mcmc"], "answers": [{"tags": [], "owner": {"reputation": 1005, "user_id": 1250948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dff2715003554162c9212d2e703e4b4?s=128&d=identicon&r=PG", "display_name": "aseyboldt", "link": "https://stackoverflow.com/users/1250948/aseyboldt"}, "is_accepted": true, "score": 0, "last_activity_date": 1493719135, "creation_date": 1493719135, "answer_id": 43735012, "question_id": 43644587, "link": "https://stackoverflow.com/questions/43644587/pymc3-binomial-switchpoint-model-highly-dependent-on-testval/43735012#43735012", "title": "PyMC3 binomial switchpoint model highly dependent on testval", "body": "<p>Models with discrete values can be problematic, all the nice sampling techniques using the derivatives don't work anymore, and they can behave a lot like multi modal distributions. I don't really see why this would be <em>that</em> problematic in this case, but you could try to use a continuous variable for the switchpoint instead (wouldn't that also make more sense conceptually?).</p>\n"}], "owner": {"reputation": 73, "user_id": 5633551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebf6c6f8592b2055d291a66f01000fbb?s=128&d=identicon&r=PG&f=1", "display_name": "Eddie", "link": "https://stackoverflow.com/users/5633551/eddie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 43735012, "answer_count": 1, "score": 1, "last_activity_date": 1493719135, "creation_date": 1493241036, "last_edit_date": 1493241950, "question_id": 43644587, "link": "https://stackoverflow.com/questions/43644587/pymc3-binomial-switchpoint-model-highly-dependent-on-testval", "title": "PyMC3 binomial switchpoint model highly dependent on testval", "body": "<p>I've set up the following binomial switchpoint model in PyMC3:</p>\n\n<pre><code>with pm.Model() as switchpoint_model:\n\n    switchpoint = pm.DiscreteUniform('switchpoint', lower=df['covariate'].min(), upper=df['covariate'].max())\n\n    # Priors for pre- and post-switch parameters\n    early_rate = pm.Beta('early_rate', 1, 1)\n    late_rate = pm.Beta('late_rate', 1, 1)\n\n    # Allocate appropriate binomial probabilities to years before and after current\n    p = pm.math.switch(switchpoint &gt;= df['covariate'].values, early_rate, late_rate)\n\n    p = pm.Deterministic('p', p)\n\n    y = pm.Binomial('y', p=p, n=df['trials'].values, observed=df['successes'].values)\n</code></pre>\n\n<p>It seems to run fine, except that it entirely centers in on one value for the switchpoint (999), as shown below.  </p>\n\n<p><a href=\"https://i.stack.imgur.com/PLrfx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PLrfx.png\" alt=\"enter image description here\"></a></p>\n\n<p>Upon further investigation it seems that the results for this model are highly dependent on the starting value (in PyMC3, \"testval\").  The below shows what happens when I set the testval = 750.</p>\n\n<pre><code>switchpoint = pm.DiscreteUniform('switchpoint', lower=gp['covariate'].min(), \nupper=gp['covariate'].max(), testval=750)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Lh4p4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lh4p4.png\" alt=\"enter image description here\"></a></p>\n\n<p>I get similarly different results with additional different starting values.</p>\n\n<p>For context, this is what my dataset looks like:\n<a href=\"https://i.stack.imgur.com/VstXA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VstXA.png\" alt=\"enter image description here\"></a></p>\n\n<p>My questions are:</p>\n\n<ol>\n<li>Is my model somehow incorrectly specified?</li>\n<li>If it's correctly specified, how should I interpret these results?  In particular, how do I compare / select results generated by different testvals?  The only idea I've had has been using WAIC to evaluate out of sample performance...</li>\n</ol>\n"}, {"tags": ["python", "django", "django-models"], "comments": [{"owner": {"reputation": 22012, "user_id": 194586, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1a71658d81f8a82a8122050f21bb86d3?s=128&d=identicon&r=PG", "display_name": "Nick T", "link": "https://stackoverflow.com/users/194586/nick-t"}, "edited": false, "score": 0, "creation_date": 1493241130, "post_id": 43644514, "comment_id": 74337595, "body": "Why even bother adding that <code>__init__</code> which will just shadow the field? Your script could just be changed to say <code>voiv[name] = models.Voiv(name=name)</code> and work just fine"}, {"owner": {"reputation": 1, "user_id": 6515522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/057b76e457e96debb8ad7f62a5a7270f?s=128&d=identicon&r=PG&f=1", "display_name": "Marek Puzyna", "link": "https://stackoverflow.com/users/6515522/marek-puzyna"}, "reply_to_user": {"reputation": 22012, "user_id": 194586, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1a71658d81f8a82a8122050f21bb86d3?s=128&d=identicon&r=PG", "display_name": "Nick T", "link": "https://stackoverflow.com/users/194586/nick-t"}, "edited": false, "score": 0, "creation_date": 1493241568, "post_id": 43644514, "comment_id": 74337796, "body": "I&#39;ve changed it to <code>models.Voivodeship(name=name)</code> and removed &#39;__init__`, but it didn&#39;t helped"}, {"owner": {"reputation": 22012, "user_id": 194586, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1a71658d81f8a82a8122050f21bb86d3?s=128&d=identicon&r=PG", "display_name": "Nick T", "link": "https://stackoverflow.com/users/194586/nick-t"}, "edited": false, "score": 0, "creation_date": 1493241839, "post_id": 43644514, "comment_id": 74337926, "body": "What does &quot;interpret it in manage.py (using exec)&quot; mean?"}, {"owner": {"reputation": 1, "user_id": 6515522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/057b76e457e96debb8ad7f62a5a7270f?s=128&d=identicon&r=PG&f=1", "display_name": "Marek Puzyna", "link": "https://stackoverflow.com/users/6515522/marek-puzyna"}, "reply_to_user": {"reputation": 22012, "user_id": 194586, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1a71658d81f8a82a8122050f21bb86d3?s=128&d=identicon&r=PG", "display_name": "Nick T", "link": "https://stackoverflow.com/users/194586/nick-t"}, "edited": false, "score": 0, "creation_date": 1493241990, "post_id": 43644514, "comment_id": 74338011, "body": "Ok, I&#39;ve added explanation"}], "owner": {"reputation": 1, "user_id": 6515522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/057b76e457e96debb8ad7f62a5a7270f?s=128&d=identicon&r=PG&f=1", "display_name": "Marek Puzyna", "link": "https://stackoverflow.com/users/6515522/marek-puzyna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "closed_date": 1493240851, "answer_count": 0, "score": 0, "last_activity_date": 1493243180, "creation_date": 1493240738, "last_edit_date": 1493243180, "question_id": 43644514, "link": "https://stackoverflow.com/questions/43644514/object-has-no-state", "closed_reason": "Duplicate", "title": "object has no _state", "body": "<p>In my Django app I have model:</p>\n\n<pre><code>class Voivodeship(models.Model):\n    name = models.CharField(max_length=20, primary_key=True)\n</code></pre>\n\n<p>I also have script to build my database from raw data:</p>\n\n<pre><code>import app.models as models\n...\nvoivodeships[name] = models.Voivodeship(name=name)\nvoivodeships[name].save()\n</code></pre>\n\n<p>But when I try to interpret it in <code>python manage.py shell</code> using exec (<code>exec(open('filler.py').read())</code>) it returns error:</p>\n\n<pre><code>'Voivodeship' object has no attribute '_state'\n</code></pre>\n\n<p>And I don't know what's going on. Can you suggest me any solution?</p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 5452, "user_id": 6824418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Du0yh.jpg?s=128&g=1", "display_name": "Allen Lavoie", "link": "https://stackoverflow.com/users/6824418/allen-lavoie"}, "is_accepted": true, "score": 5, "last_activity_date": 1493315841, "creation_date": 1493315841, "answer_id": 43664858, "question_id": 43644506, "link": "https://stackoverflow.com/questions/43644506/setting-up-py-func-op-after-importing-graphdef-in-tensorflow/43664858#43664858", "title": "Setting up py_func op after importing GraphDef in TensorFlow", "body": "<p>This is possible, but may be a bit fragile. In particular, the pyfuncs need to be re-defined in the same order that they were defined in the original graph (so that they have the same identifier in the <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/script_ops.py#L36\" rel=\"noreferrer\">FuncRegistry</a>).</p>\n\n<p>An example. We can define a graph that includes a py_func:</p>\n\n<pre><code>import tensorflow as tf\n\ndef my_py_func(x):\n  return 13. * x + 2.\n\ndef train_model():\n  with tf.Graph().as_default():\n    some_input = tf.constant([[1., 2., 3., 4.],\n                              [5., 6., 7., 8.]])\n    after_py_func = tf.py_func(my_py_func, [some_input], Tout=tf.float32,\n                               name=\"my_py_func\")\n    coefficient = tf.get_variable(\n        \"coefficient\",\n        shape=[])\n    bias = tf.get_variable(\n        \"bias\",\n        shape=[])\n    loss = tf.reduce_sum((coefficient * some_input + bias - after_py_func) ** 2)\n    global_step = tf.contrib.framework.get_or_create_global_step()\n    train_op = tf.group(tf.train.AdamOptimizer(0.1).minimize(loss),\n                        tf.assign_add(global_step, 1))\n    # Make it easy to retreive things we care about when the metagraph is reloaded.\n    tf.add_to_collection('useful_ops', bias)\n    tf.add_to_collection('useful_ops', coefficient)\n    tf.add_to_collection('useful_ops', loss)\n    tf.add_to_collection('useful_ops', train_op)\n    tf.add_to_collection('useful_ops', global_step)\n    tf.add_to_collection('useful_ops', some_input)\n    init_op = tf.global_variables_initializer()\n    saver = tf.train.Saver()\n    with tf.Session() as session:\n      session.run(init_op)\n      for i in range(5000):\n        (_, evaled_loss, evaled_coefficient, evaled_bias,\n         evaled_global_step) = session.run(\n             [train_op, loss, coefficient, bias, global_step])\n        if i % 1000 == 0:\n          print(evaled_global_step, evaled_loss, evaled_coefficient,\n                evaled_bias)\n      saver.save(session, \"./trained_pyfunc_model\", global_step=global_step)\n</code></pre>\n\n<p>This does some basic training (matching the linear function found in the py_func):</p>\n\n<pre><code>1 37350.4 -0.0934748 0.193026\n1001 19.2717 12.3749 5.40368\n2001 0.108373 12.9532 2.2548\n3001 8.28227e-06 12.9996 2.00222\n4001 3.77258e-09 13.0 2.00004\n</code></pre>\n\n<p>If we then, in a new Python session, try to load the metagraph without re-defining the pyfunc, we get an error:</p>\n\n<pre><code>def load_model():\n  with tf.Graph().as_default():\n    saver = tf.train.import_meta_graph(\"./trained_pyfunc_model-5000.meta\")\n    bias, coefficient, loss, train_op, global_step, some_input = tf.get_collection('useful_ops')\n    #after_py_func = tf.py_func(my_py_func, [some_input], Tout=tf.float32,\n    #                           name=\"my_py_func\")\n    with tf.Session() as session:\n      saver.restore(session, \"./trained_pyfunc_model-5000\")\n      (_, evaled_loss, evaled_coefficient, evaled_bias,\n       evaled_global_step) = session.run(\n           [train_op, loss, coefficient, bias, global_step])\n      print(\"Restored: \", evaled_global_step, evaled_loss, evaled_coefficient, evaled_bias)\n</code></pre>\n\n<blockquote>\n  <p>UnknownError (see above for traceback): KeyError: 'pyfunc_0'</p>\n</blockquote>\n\n<p>However, as long as the py_funcs are defined in the same order and have the same implementation, we should be fine:</p>\n\n<pre><code>def load_model():\n  with tf.Graph().as_default():\n    saver = tf.train.import_meta_graph(\"./trained_pyfunc_model-5000.meta\")\n    bias, coefficient, loss, train_op, global_step, some_input = tf.get_collection('useful_ops')\n    after_py_func = tf.py_func(my_py_func, [some_input], Tout=tf.float32,\n                               name=\"my_py_func\")\n    with tf.Session() as session:\n      saver.restore(session, \"./trained_pyfunc_model-5000\")\n      (_, evaled_loss, evaled_coefficient, evaled_bias,\n       evaled_global_step) = session.run(\n           [train_op, loss, coefficient, bias, global_step])\n      print(\"Restored: \", evaled_global_step, evaled_loss, evaled_coefficient, evaled_bias)\n</code></pre>\n\n<p>This lets us continue training, or whatever else we'd like to do with the restored model:</p>\n\n<pre><code>Restored:  5001 1.77897e-09 13.0 2.00003\n</code></pre>\n\n<p>Note that stateful py_funcs will be harder to deal with: TensorFlow is not saving any of the Python variables that may be associated with them!</p>\n"}], "owner": {"reputation": 368, "user_id": 1694636, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jV6vG.gif?s=128&g=1", "display_name": "swish", "link": "https://stackoverflow.com/users/1694636/swish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 950, "favorite_count": 1, "accepted_answer_id": 43664858, "answer_count": 1, "score": 3, "last_activity_date": 1493315841, "creation_date": 1493240708, "question_id": 43644506, "link": "https://stackoverflow.com/questions/43644506/setting-up-py-func-op-after-importing-graphdef-in-tensorflow", "title": "Setting up py_func op after importing GraphDef in TensorFlow", "body": "<p>I have a saved graph definition, which is imported with <code>tf.train.import_meta_graph</code>. The graph containes <code>py_func</code> op, which is not serializable. Can I define and assign python function to this op without building a graph from scratch?</p>\n"}, {"tags": ["python", "python-3.x", "closures", "python-internals", "dynamic-class-creation"], "comments": [{"owner": {"reputation": 5523, "user_id": 2594812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc8f4767c6d139bb824167fa04b992e0?s=128&d=identicon&r=PG", "display_name": "Sam Hartman", "link": "https://stackoverflow.com/users/2594812/sam-hartman"}, "reply_to_user": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 0, "creation_date": 1493242773, "post_id": 43644444, "comment_id": 74338355, "body": "It&#39;s close to why is python3.x&#39;s super magic, and I got some information from that, but I don&#39;t really feel I understand what&#39;s going on after reading that."}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1493243488, "post_id": 43644444, "comment_id": 74338651, "body": "What do you mean with &quot;I know that if I assign a function to a variable as part of creating a class it doesn&#39;t happen.&quot;? The example after that leaves out the &quot;as part of creating a class&quot;. Also could you clarify your question? Are you interested in knowing when the closure is assigned? How it is assigned? In the end it will be a lot of C code to go through that doesn&#39;t tell you anything more than &quot;if you use <code>__class__</code> or <code>super</code> in a <i>method</i> the <code>__class__</code> name will be avaiable&quot;."}, {"owner": {"reputation": 5523, "user_id": 2594812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc8f4767c6d139bb824167fa04b992e0?s=128&d=identicon&r=PG", "display_name": "Sam Hartman", "link": "https://stackoverflow.com/users/2594812/sam-hartman"}, "reply_to_user": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 1, "creation_date": 1493259444, "post_id": 43644444, "comment_id": 74343248, "body": "Explained the parts of this puzzle that I can&#39;t find in other questions."}], "answers": [{"tags": [], "owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "is_accepted": true, "score": 1, "last_activity_date": 1585899090, "last_edit_date": 1585899090, "creation_date": 1585662092, "answer_id": 60952017, "question_id": 43644444, "link": "https://stackoverflow.com/questions/43644444/how-is-the-class-cell-value-set-in-class-methods/60952017#60952017", "title": "How is the __class__ cell value set in class methods?", "body": "<p>In <a href=\"https://docs.python.org/3/reference/datamodel.html\" rel=\"nofollow noreferrer\">the docs for Python\u2019s data model</a>, <a href=\"https://docs.python.org/3/reference/datamodel.html#creating-the-class-object\" rel=\"nofollow noreferrer\">\u00a7 3.3.3.6</a> \u2013 \u201cCreating the class object\u201d \u2013 you will find the following:</p>\n\n<blockquote>\n  <p>[The] class object is the one that will be referenced by the\n  zero-argument form of <code>super()</code>. <strong><code>__class__</code> is an implicit closure\n  reference created by the compiler if any methods in a class body refer\n  to either <code>__class__</code> or <code>super</code></strong>. This allows the zero argument form\n  of <code>super()</code> to correctly identify the class being defined <strong>based on\n  lexical scoping</strong>, while the class or instance that was used to make\n  the current call is identified based on the first argument passed to\n  the method.</p>\n</blockquote>\n\n<p>\u2026emphasis is mine. This confirms your two putative criteria for a <code>__class__</code> closure happening: a \u201c<code>__class__</code>\u201d reference in the method def, which itself is defined inside a <code>class</code> statement.</p>\n\n<p>But then, the next \u00b6 in \u201cCreating the class object\u201d goes on to say:</p>\n\n<blockquote>\n  <p><strong>CPython implementation detail:</strong> In CPython 3.6 and later, the <code>__class__</code> cell is passed to the metaclass as a <code>__classcell__</code> entry\n  in the class namespace. If present, this must be propagated up to the\n  <code>type.__new__</code> call in order for the class to be initialized\n  correctly. Failing to do so will result in a <code>RuntimeError</code> in Python\n  3.8.</p>\n</blockquote>\n\n<p>\u2026 emphasis is theirs. This means that if you are employing a metaclass with a <code>__new__</code> method \u2013 in order to dictate the terms by which classes so designated are created \u2013 for example like e.g.:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Meta(type):\n\n    def __new__(metacls, name, bases, attributes, **kwargs):\n        # Or whatever:\n        if '__slots__' not in attributes:\n            attributes['__slots__'] = tuple()\n\n        # Call up, creating and returning the new class:\n        return super().__new__(metacls, name,\n                                        bases,\n                                        attributes,\n                                      **kwargs)\n</code></pre>\n\n<p>\u2026 that last <code>super(\u2026).__new__(\u2026)</code> call is effectively calling <code>type.__new__(\u2026)</code>. In real life, there might be some other ancestral \u201c<code>__new__(\u2026)</code>\u201d methods that get called between here and there, if your metaclass inherits from other metaclasses (like, e.g. <code>abc.ABCMeta</code>). Effectively, though, inside your <code>Meta.__new__(\u2026)</code> method, between the method entry point, the <code>super(\u2026).__new__(\u2026)</code> call, and <code>return</code>-ing the new class object, you can inspect or set the value of the eventual <code>__class__</code> cell variable through <code>attributes['__classcell__']</code>\u2020.</p>\n\n<p>Now as for whether this is at all useful: I don\u2019t know. I have been programming in <a href=\"/questions/tagged/python\" class=\"post-tag\" title=\"show questions tagged &#39;python&#39;\" rel=\"tag\">python</a> for ten years; I totally use metaclasses\u2021, like, absolutely all the time (for better or for worse); and in the course of doing so I have never done any of the following things:</p>\n\n<ol>\n<li>reassigned a <code>__class__</code> attribute;</li>\n<li>inspected the <code>__class__</code> cell variable of anything; nor</li>\n<li>messed around with this supposed <code>__classcell__</code> namespace entry, in like any capacity</li>\n</ol>\n\n<p>\u2026 Naturally, your programming experience will be different from mine, who knows what one does. It is not that any one of those aforementioned stratagems are <em>de facto</em> problematic, necessarily. But I am no stranger to bending Python\u2019s type systems and metaprogramming facilities to my whim, and these particular things have never presented themselves as partiuclarly useful, especially once you are working within the general context of metaclasses, and what they do.</p>\n\n<p>By which I suppose I mean, tl;dr: you are on the cusp of figuring out the basics of metaclasses and what they can do \u2013 do press on and experiment, but do investigate the topic with depth as well as breath. Indeed!</p>\n\n<hr>\n\n<p>\u2020 \u2013 In reading through code examples of this sort, you\u2019ll often find what my snippet here calls the <code>attributes</code> dictionary referred to as <code>namespace</code> or <code>ns</code>, or similar. It\u2019s all the same stuff.</p>\n\n<p>\u2021 \u2013 \u2026and ABCs and mixins and class decorators and <code>__init_subclass__(\u2026)</code> and the abuse of <code>__mro_entries__(\u2026)</code> for personal gain; <em>et cetera, ad nauseum</em></p>\n"}], "owner": {"reputation": 5523, "user_id": 2594812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc8f4767c6d139bb824167fa04b992e0?s=128&d=identicon&r=PG", "display_name": "Sam Hartman", "link": "https://stackoverflow.com/users/2594812/sam-hartman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 2, "accepted_answer_id": 60952017, "answer_count": 1, "score": 2, "last_activity_date": 1585899090, "creation_date": 1493240474, "last_edit_date": 1585662326, "question_id": 43644444, "link": "https://stackoverflow.com/questions/43644444/how-is-the-class-cell-value-set-in-class-methods", "title": "How is the __class__ cell value set in class methods?", "body": "<p>Looking at <a href=\"https://docs.python.org/3.5/library/functions.html#super\" rel=\"nofollow noreferrer\">the documentation of the <code>super</code> type in Python 3.5</a>, it notes that <code>super(\u2026)</code> is the same as <code>super(__class__, \u00abfirst argument to function\u00bb)</code>.  To my surprise, I wrote a method that returned <code>__class__</code> \u2013 and it actually worked:</p>\n\n<pre><code>&gt;&gt;&gt; class c:\n...   def meth(self): return __class__\n... \n&gt;&gt;&gt; c().meth()\n&lt;class '__main__.c'&gt;\n</code></pre>\n\n<p>Apparently, <code>__class__</code> is a free variable assigned by the closure of the function:</p>\n\n<pre><code>&gt;&gt;&gt; c.meth.__code__.co_freevars\n('__class__',)\n&gt;&gt;&gt; c.meth.__closure__\n(&lt;cell at 0x7f6346a91048: type object at 0x55823b17f3a8&gt;,)\n</code></pre>\n\n<p>I'd like to know under what circumstances that free variable is associated in the closure.  I know that if I assign a function to a variable as part of creating a class it doesn't happen.</p>\n\n<pre><code>&gt;&gt;&gt; def meth2(self): return __class__\n... \n&gt;&gt;&gt; meth2.__code__.co_freevars\n()\n</code></pre>\n\n<p>Even if I create a new class and as part of that creation assign some attribute to <code>meth2</code>, <code>meth2</code> doesn't somehow magically gain a free variable that gets filled in. </p>\n\n<p>That's unsurprising, because part of this appears to  depend on the lexical state of the compiler at the time that the code is compiled.</p>\n\n<p>I'd like to confirm that the conditions necessary for <code>__class__</code> to be treated as a free variable are simply:</p>\n\n<ul>\n<li>A reference to <code>__class__</code> in the code block; and</li>\n<li>The <code>def</code> containing the <code>__class__</code> reference is lexically within a <code>class</code> declaration block.</li>\n</ul>\n\n<p>I'd further like to understand what the conditions necessary for that variable getting filled in correctly are. It appears \u2013 at least from the Python 3.6 documentation \u2013 that something like <code>type.__new__(\u2026)</code> is involved somehow.  I haven't been able to understand for sure how <code>type</code> comes into play and how this all interacts with metaclasses that do not ultimately call <code>type.__new__(\u2026)</code>.</p>\n\n<p>I'm particularly confused because I didn't think that at the time the namespace's <code>__setattr__</code> method was used to assign the attribute containing the method to the method function (as it exists on the ultimately-constructed class object).  I know that this namespace object exists because it was either constructed implicitly by the use of the <code>class</code> statement, or explicitly by the metaclass's <code>__prepare__</code> method \u2013 but as best I can tell, the metaclass constructs the class object that populates <code>__class__</code> <em>after</em> the function object is set as a value within the class namespace.</p>\n"}, {"tags": ["python", "list", "class", "oop", "methods"], "comments": [{"owner": {"reputation": 4071, "user_id": 1705337, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/vzyhp.png?s=128&g=1", "display_name": "Morgoth", "link": "https://stackoverflow.com/users/1705337/morgoth"}, "edited": false, "score": 0, "creation_date": 1493240558, "post_id": 43644410, "comment_id": 74337309, "body": "Please post correctly formatted code. White-space is syntactically significant in Python, and as this stands it will not work."}, {"owner": {"reputation": 3890, "user_id": 7517724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63c21233470c84bd8e36b40bf9fe8103?s=128&d=identicon&r=PG", "display_name": "Craig", "link": "https://stackoverflow.com/users/7517724/craig"}, "edited": false, "score": 1, "creation_date": 1493240612, "post_id": 43644410, "comment_id": 74337337, "body": "You appear to have a function and a variable both named <code>self.draw</code>. How do you expect Python to know which one you mean?"}, {"owner": {"reputation": 22012, "user_id": 194586, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1a71658d81f8a82a8122050f21bb86d3?s=128&d=identicon&r=PG", "display_name": "Nick T", "link": "https://stackoverflow.com/users/194586/nick-t"}, "edited": false, "score": 1, "creation_date": 1493240732, "post_id": 43644410, "comment_id": 74337386, "body": "Python &quot;knows&quot; which one it is: it&#39;s the last one that was set. You&#39;re <i>overwriting</i> one with the other."}, {"owner": {"reputation": 255, "user_id": 7122412, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ak3ZX.png?s=128&g=1", "display_name": "Christian Singer", "link": "https://stackoverflow.com/users/7122412/christian-singer"}, "reply_to_user": {"reputation": 4071, "user_id": 1705337, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/vzyhp.png?s=128&g=1", "display_name": "Morgoth", "link": "https://stackoverflow.com/users/1705337/morgoth"}, "edited": false, "score": 0, "creation_date": 1493240741, "post_id": 43644410, "comment_id": 74337392, "body": "@Morgoth done, now it looks like on my PC where it works"}, {"owner": {"reputation": 5257, "user_id": 47078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/18f44bb2c283b0582c098d61b3d93ca8?s=128&d=identicon&r=PG", "display_name": "Harvey", "link": "https://stackoverflow.com/users/47078/harvey"}, "edited": false, "score": 0, "creation_date": 1493240845, "post_id": 43644410, "comment_id": 74337460, "body": "Why is full_deck an argument with a default value? And why not <code>num_decks = 6</code>, <code>self.full_deck = &#39;A23456789JQK&#39; * 4 * num_decks</code> then <code>random.shuffle(self.full_deck)</code>?"}, {"owner": {"reputation": 5257, "user_id": 47078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/18f44bb2c283b0582c098d61b3d93ca8?s=128&d=identicon&r=PG", "display_name": "Harvey", "link": "https://stackoverflow.com/users/47078/harvey"}, "edited": false, "score": 0, "creation_date": 1493240958, "post_id": 43644410, "comment_id": 74337523, "body": "Also, might be better to call it the &quot;shoe&quot;."}, {"owner": {"reputation": 255, "user_id": 7122412, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ak3ZX.png?s=128&g=1", "display_name": "Christian Singer", "link": "https://stackoverflow.com/users/7122412/christian-singer"}, "reply_to_user": {"reputation": 5257, "user_id": 47078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/18f44bb2c283b0582c098d61b3d93ca8?s=128&d=identicon&r=PG", "display_name": "Harvey", "link": "https://stackoverflow.com/users/47078/harvey"}, "edited": false, "score": 0, "creation_date": 1493240971, "post_id": 43644410, "comment_id": 74337531, "body": "@Harvey that makes sense, the way it was written is just a relict from when i had the full_deck list composed out of a few other lists incase i wanted to work with them seperatly. Thanks for the tipp with &quot;shoe&quot; i will change the name"}], "answers": [{"comments": [{"owner": {"reputation": 255, "user_id": 7122412, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ak3ZX.png?s=128&g=1", "display_name": "Christian Singer", "link": "https://stackoverflow.com/users/7122412/christian-singer"}, "edited": false, "score": 0, "creation_date": 1493241520, "post_id": 43644655, "comment_id": 74337771, "body": "The thing with the memory will come in later. For now I was just trying to make the card drawing work. With the boolean argument I thought it was somehow necessary. Thanks for your answer, it helped me very much :-)"}], "tags": [], "owner": {"reputation": 5257, "user_id": 47078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/18f44bb2c283b0582c098d61b3d93ca8?s=128&d=identicon&r=PG", "display_name": "Harvey", "link": "https://stackoverflow.com/users/47078/harvey"}, "is_accepted": true, "score": 1, "last_activity_date": 1493241567, "last_edit_date": 1493241567, "creation_date": 1493241339, "answer_id": 43644655, "question_id": 43644410, "link": "https://stackoverflow.com/questions/43644410/repeatedly-remove-items-from-list-in-class-object-python/43644655#43644655", "title": "repeatedly remove items from list in class-object (Python)", "body": "<p>You were overwriting the <code>Black_jack_deck.draw()</code> method with the card drawn. Hence the error about <code>deck.draw()</code> is a <code>'str' object</code> and <code>is not callable</code>.</p>\n\n<p>Here's a shorter version. Do you need to remember the drawn card in the shoe? And I removed the boolean argument to <code>draw()</code> because I didn't know why it was there.</p>\n\n<pre><code>In [94]: class CardShoe(object):\n    ...:     def __init__(self, num_decks=6):\n    ...:         self.cards = list('A23456789JQK' * 4 * num_decks)\n    ...:         random.shuffle(self.cards)\n    ...:\n    ...:     def draw(self):\n    ...:         self.last_card_drawn = self.cards.pop()\n    ...:         return self.last_card_drawn\n    ...:\n\nIn [95]: shoe = CardShoe()\n\nIn [96]: shoe.draw()\nOut[96]: '2'\n\nIn [97]: shoe.draw()\nOut[97]: '8'\n</code></pre>\n"}], "owner": {"reputation": 255, "user_id": 7122412, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ak3ZX.png?s=128&g=1", "display_name": "Christian Singer", "link": "https://stackoverflow.com/users/7122412/christian-singer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 43644655, "answer_count": 1, "score": 0, "last_activity_date": 1493241567, "creation_date": 1493240377, "last_edit_date": 1592644375, "question_id": 43644410, "link": "https://stackoverflow.com/questions/43644410/repeatedly-remove-items-from-list-in-class-object-python", "title": "repeatedly remove items from list in class-object (Python)", "body": "<p>How can I remove items from a list repeatedly in Python 3? For the first item my code works, but if I try to apply the method that removes items again it produces a <code>TypeError</code>. Here is the code that I am working with:</p>\n<h1>BlackJack Game</h1>\n<pre><code>from random import choice\n\nclass Black_jack_deck(object):\n\n    def __init__(self, full_deck=(([str(i) for i in range(2,11)]+[&quot;A&quot;,&quot;J&quot;,&quot;Q&quot;,&quot;K&quot;])*4*6)): #a deck of 312 cards containing 6* 52 french cards\n        self.full_deck = full_deck\n\n    def draw(self, draw=True):\n        self.draw = choice(self.full_deck)   #I use choice to simulate the dealer drawing a card from the top of a mixed card staple\n        return self.draw\n        self.full_deck = (self.full_deck).remove(self.draw)   \n\n\ndeck = Black_jack_deck() \n</code></pre>\n<p>The error that is produced when I try to call <code>deck.draw()</code> for a second time looks like this:</p>\n<pre><code>Traceback (most recent call last):\n  File &quot;&lt;pyshell#1&gt;&quot;, line 1, in &lt;module&gt;\n    deck.draw()\nTypeError: 'str' object is not callable\n</code></pre>\n<p>Note: even without the <code>choice()</code> function, for instance using <code>pop()</code> on a shuffled <code>full_deck</code>, the same error occurs.</p>\n"}, {"tags": ["python", "indexing", "variable-assignment"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1493240289, "post_id": 43644346, "comment_id": 74337147, "body": "You need to provide a <i>reproducible example</i>. Your example of <code>line</code> is not valid Python, and it seems you mean to make it a list, in which case, it would not throw that error."}, {"owner": {"reputation": 725, "user_id": 7586861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bb293ee301641307ed6ec7c3a81d639?s=128&d=identicon&r=PG&f=1", "display_name": "jarcobi889", "link": "https://stackoverflow.com/users/7586861/jarcobi889"}, "edited": false, "score": 1, "creation_date": 1493240379, "post_id": 43644346, "comment_id": 74337205, "body": "I don&#39;t know if it&#39;s because you typed it in or not, but the first quote mark &quot; &#39; &quot; is a different symbol.  When I copy your above code into the python interpreter, it says everything after &quot;641&#39;&quot; is a string."}, {"owner": {"reputation": 129, "user_id": 7576715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e252c6f9f501d025d53c49fede4adf06?s=128&d=identicon&r=PG&f=1", "display_name": "ocean.1234", "link": "https://stackoverflow.com/users/7576715/ocean-1234"}, "edited": false, "score": 0, "creation_date": 1493240621, "post_id": 43644346, "comment_id": 74337340, "body": "I added my full code so that you can see what I&#39;m doing. It is commented for clarification. The list of the line is created when I used read(). Everything in that list becomes a string. I have to convert the necessary elements to the output that I need."}, {"owner": {"reputation": 129, "user_id": 7576715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e252c6f9f501d025d53c49fede4adf06?s=128&d=identicon&r=PG&f=1", "display_name": "ocean.1234", "link": "https://stackoverflow.com/users/7576715/ocean-1234"}, "edited": false, "score": 0, "creation_date": 1493240697, "post_id": 43644346, "comment_id": 74337374, "body": "I also added my needed output. Let me know if you need anything else."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1493240898, "post_id": 43644346, "comment_id": 74337494, "body": "Yeah, the problem is that <code>line</code> is a <code>str</code>, since it is iterating over a file-handler. Indexing into a string gives the <i>character</i> at that position, e.g.<code>&quot;hello&quot;[1] == &#39;e&#39;</code>. You can&#39;t assign to a string. I think you want to split your line on commas... And you have <i>yet to provide a reproducible example</i>."}, {"owner": {"reputation": 129, "user_id": 7576715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e252c6f9f501d025d53c49fede4adf06?s=128&d=identicon&r=PG&f=1", "display_name": "ocean.1234", "link": "https://stackoverflow.com/users/7576715/ocean-1234"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1493241139, "post_id": 43644346, "comment_id": 74337599, "body": "@juanpa.arrivillaga added the example"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1493241294, "post_id": 43644346, "comment_id": 74337664, "body": "Right, as I suspected, you are working with some value-delimited file, i.e. a csv, but when you iterate over that file, line by line, <code>line</code> is a <b>string</b>. When you index into a string you index into the characters, and you can&#39;t assign to a string. You are assuming that <code>line</code> is a list of strings based on the delimiter in your file..."}, {"owner": {"reputation": 129, "user_id": 7576715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e252c6f9f501d025d53c49fede4adf06?s=128&d=identicon&r=PG&f=1", "display_name": "ocean.1234", "link": "https://stackoverflow.com/users/7576715/ocean-1234"}, "edited": false, "score": 0, "creation_date": 1493241432, "post_id": 43644346, "comment_id": 74337737, "body": "So is there no way to get around that? I don&#39;t want to change my whole code. I was trying to use readlines() and split at the commas but it created all sorts of chaos"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 7576715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e252c6f9f501d025d53c49fede4adf06?s=128&d=identicon&r=PG&f=1", "display_name": "ocean.1234", "link": "https://stackoverflow.com/users/7576715/ocean-1234"}, "edited": false, "score": 0, "creation_date": 1493242307, "post_id": 43644574, "comment_id": 74338165, "body": "Even using your method returns : [&#39;641&#39;, &#39;&quot;Tornadus&#39;, &#39; (Incarnate Form)&quot;&#39;, &#39;&quot;Flying&quot;&#39;, &#39;&quot;&quot;&#39;, &#39;5&#39;, &#39;&quot;TRUE&quot;&#39;]"}], "tags": [], "owner": {"reputation": 24193, "user_id": 5811078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NlknE.png?s=128&g=1", "display_name": "zipa", "link": "https://stackoverflow.com/users/5811078/zipa"}, "is_accepted": false, "score": 1, "last_activity_date": 1493280491, "last_edit_date": 1493280491, "creation_date": 1493240994, "answer_id": 43644574, "question_id": 43644346, "link": "https://stackoverflow.com/questions/43644346/python-how-do-i-update-an-index-of-a-for-loop-that-iterates-over-lines-in-a-fil/43644574#43644574", "title": "Python- How do I update an index of a for loop that iterates over lines in a file?", "body": "<p>It is quite unclear from your example, but my thoughts go to:</p>\n\n<pre><code>for line in f:\n    line = line.split(',')\n</code></pre>\n\n<p>Now you can mess with indexes and see whether you have more errors.\nAnd if you use:</p>\n\n<pre><code>if \"T\" in line[6]:  # format legendary if TRUE\n    line[6] = True\n</code></pre>\n\n<p>It will work.</p>\n"}, {"tags": [], "owner": {"reputation": 129, "user_id": 7576715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e252c6f9f501d025d53c49fede4adf06?s=128&d=identicon&r=PG&f=1", "display_name": "ocean.1234", "link": "https://stackoverflow.com/users/7576715/ocean-1234"}, "is_accepted": true, "score": -1, "last_activity_date": 1493241756, "creation_date": 1493241756, "answer_id": 43644743, "question_id": 43644346, "link": "https://stackoverflow.com/questions/43644346/python-how-do-i-update-an-index-of-a-for-loop-that-iterates-over-lines-in-a-fil/43644743#43644743", "title": "Python- How do I update an index of a for loop that iterates over lines in a file?", "body": "<p>Instead of reassigning it, I just did this and it worked:</p>\n\n<pre><code>if \"T\" in line[6]:  # format legendary if TRUE\n    legendary = True\nelse:  # format legendary if FALSE\n    legendary = False\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1134, "user_id": 2387806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebead5d6b9a6e8a2e443d77cd68d946b?s=128&d=identicon&r=PG", "display_name": "EvensF", "link": "https://stackoverflow.com/users/2387806/evensf"}, "is_accepted": false, "score": 1, "last_activity_date": 1493354141, "last_edit_date": 1493354141, "creation_date": 1493256193, "answer_id": 43647081, "question_id": 43644346, "link": "https://stackoverflow.com/questions/43644346/python-how-do-i-update-an-index-of-a-for-loop-that-iterates-over-lines-in-a-fil/43647081#43647081", "title": "Python- How do I update an index of a for loop that iterates over lines in a file?", "body": "<p>Your input file looks like a <a href=\"https://en.wikipedia.org/wiki/Comma-separated_values\" rel=\"nofollow noreferrer\">comma-separated values</a> file. If it is, what you want is pretty easy.</p>\n\n<p>Let's suppose your input file is literally this:</p>\n\n<p><strong>Input_file-43644346.txt</strong></p>\n\n<pre><code>info_file1 = '''\"ID\",\"Name\",\"Type 1\",\"Type 2\",\"Generation\",\"Legendary\"\n1,\"Bulbasaur\",\"Grass\",\"Poison\",1,\"FALSE\"\n641,\"Tornadus', ' (Incarnate Form)\",\"Flying\",,5,\"TRUE\"\n</code></pre>\n\n<p>You could do something like that:</p>\n\n<pre><code>#!/usr/bin/env python3\n\nimport csv\n\ninput_file_name = \"Input_file-43644346.txt\"\n\nwith open(input_file_name, newline='') as input_file:\n    next(input_file)        # skip first line\n    record_extractor = csv.reader(input_file)\n    d = {}\n    for row in record_extractor:\n        key = row[1].strip()\n        row_truth = row[5] == \"TRUE\"        # simplifying the boolean retrieving\n        # Using conditional expressions\n        row_second_type = row[3].strip() if row[3] else None   \n        output_row = (row[0], row[2], row_second_type, row[4], row_truth)\n        d[key] = output_row\n\nprint(\"d=\", d)\n</code></pre>\n\n<p>Here are some key points of this solution:</p>\n\n<ul>\n<li>This example is in Python 3's syntax</li>\n<li>Using <code>with</code> makes sure that the input file is closed timely</li>\n<li>Since a file object is also an iterator, you can skip the first line by using <a href=\"https://docs.python.org/3/library/functions.html#next\" rel=\"nofollow noreferrer\"><code>next()</code></a>.</li>\n<li><a href=\"https://docs.python.org/3/library/csv.html#csv.reader\" rel=\"nofollow noreferrer\"><code>csv.reader()</code></a>  will give you a tuple containing the information from a row. It will process quoted string like you would expect.</li>\n<li>The expression <code>row[5] == \"TRUE\"</code> will yield a boolean expression. You don't need to use an <code>if</code> statement.</li>\n<li>An empty string is equivalent to False. Any other string is True.</li>\n<li><a href=\"https://docs.python.org/3/faq/programming.html#is-there-an-equivalent-of-c-s-ternary-operator\" rel=\"nofollow noreferrer\">Conditional expressions</a> can be used to change an empty string to <code>None</code> like you wanted.</li>\n<li><a href=\"https://docs.python.org/3/library/stdtypes.html#dict.update\" rel=\"nofollow noreferrer\"><code>dict.update()</code></a> is useful if you already have a dictionary or a list of tuples you want to use its values to update an dictionary but you are better off using <code>d[key] = value</code></li>\n</ul>\n\n<hr>\n\n<p>But my guess is that your file is more like that:</p>\n\n<p><strong>Input_file-43644346b.txt</strong></p>\n\n<pre><code>\"ID\",\"Name\",\"Type 1\",\"Type 2\",\"Generation\",\"Legendary\"\n1,\"Bulbasaur\",\"Grass\",\"Poison\",1,\"FALSE\"\n641,\"Tornadus', ' (Incarnate Form)\",\"Flying\",,5,\"TRUE\"\n</code></pre>\n\n<p>You can then use <a href=\"https://docs.python.org/3/library/csv.html#csv.DictReader\" rel=\"nofollow noreferrer\"><code>csv.DictReader</code></a> to read your data:</p>\n\n<pre><code>#!/usr/bin/env python3\n\nimport csv\n\ninput_file_name = \"Input_file-43644346b.txt\"\n\nwith open(input_file_name, newline='') as input_file:\n    record_extractor = csv.DictReader(input_file)\n    d = {}\n    for row in record_extractor:\n        key = row[\"Name\"].strip()\n        row_truth = row[\"Legendary\"] == \"TRUE\"\n        row_second_type = row[\"Type 2\"].strip() if row[\"Type 2\"] else None\n        output_row = (row[\"ID\"], row[\"Type 1\"],\n                      row_second_type, row[\"Generation\"], row_truth)\n        d[key] = output_row\n\nprint(\"d=\", d)\n</code></pre>\n\n<p>That enables you to use \"column\" names to identify different parts of each row</p>\n\n<hr>\n\n<p>You can simplify even more your code by using a <a href=\"https://docs.python.org/3/tutorial/datastructures.html#dictionaries\" rel=\"nofollow noreferrer\">dictionary</a> comprehension:</p>\n\n<pre><code>#!/usr/bin/env python3\n\nimport csv\n\ninput_file_name = \"Input_file-43644346.txt\"\n\nwith open(input_file_name, newline='') as input_file:\n    next(input_file)        # skip first line\n    record_extractor = csv.reader(input_file)\n    d = { row[1]: (row[0],\n                   row[2],\n                   row[3].strip() if row[3] else None,\n                   row[4],\n                   row[5] == \"TRUE\")\n          for row in record_extractor }\n\nprint(\"d=\", d)\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 7576715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e252c6f9f501d025d53c49fede4adf06?s=128&d=identicon&r=PG&f=1", "display_name": "ocean.1234", "link": "https://stackoverflow.com/users/7576715/ocean-1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 43644743, "answer_count": 3, "score": -1, "last_activity_date": 1493354141, "creation_date": 1493240104, "last_edit_date": 1493241057, "question_id": 43644346, "link": "https://stackoverflow.com/questions/43644346/python-how-do-i-update-an-index-of-a-for-loop-that-iterates-over-lines-in-a-fil", "title": "Python- How do I update an index of a for loop that iterates over lines in a file?", "body": "<p>Using a for loop, I'm iterating over the lines in a file. Given this line: </p>\n\n<pre><code>line= [ \u2018641', '\"Tornadus', ' (Incarnate Form)\"', '\"Flying\"', '\"\"', '5', '\"TRUE\"']\n</code></pre>\n\n<p>I need to reformat index [6] from '\"TRUE\"' to the boolean True. </p>\n\n<p>Full expected output: d={'Tornadus, (Incarnate Form)': (641, 'Flying', None, 5, True}</p>\n\n<p>I used:</p>\n\n<pre><code>if \"T\" in line[6]:  # format legendary if TRUE\n    line[6] = True\n</code></pre>\n\n<p>But I get this error:</p>\n\n<blockquote>\n  <p>Traceback (most recent call last):\n  File \"tester5p.py\", line 305, in test_read_info_file_05\n  self.assertEqual(read_info_file(DATAFILE),info_db5())File \"/Users/kgreenwo/Desktop/student.py\", line 52, in read_info_file\n      line[5] = False</p>\n  \n  <p>TypeError: 'str' object does not support item assignment</p>\n</blockquote>\n\n<p>How can I assign it WITHIN the for loop? </p>\n\n<p>To see my full code:</p>\n\n<pre><code>def read_info_file(filename):\n    f = open(filename, 'r')  # open file in read mode\n    d = {}  # intitialze as empty\n    count = 0  # helps to skip first line\n    key = \"\"\n    for line in f:  # get each line from file\n        if count != 0:  # skip first line\n        # 1___________________________________________open file,read, skip 1st line\n            id_num = int(line[0])  # make id an integer\n        # 2________________________________________________\n            if ',' in line[1]:  # two parts to fullname, changes indexes\n                part1 = line[1].strip('\"')  # get format first part of name\n                part2 = line[2].strip()  # get format second part of name\n            # 3______________\n                fullname = part1 + part2\n                key = fullname\n            # 4______________\n                type1 = line[3].strip('\"')\n            # 5--------------\n                if line[4] == \"\":  # check if there is not a second type\n                    type2 = None  # correct format\n                else:  # is a second type\n                    type2 = line[4].strip('\"')  # format second type\n            # 6______________\n\n                generation = line[5]  # format generation\n            # 7_____________\n                if \"T\" in line[6]:  # format legendary if TRUE\n                    line[6] = True\n                    legendary = line[6]\n                else:  # format legendary if FALSE\n                    line[6] = False\n                    legendary = line[6]\n\n            # 8______________________________________________one part to name\n            else:  # one part to name\n                fullname = line[1].strip('\"')\n            # 9______________\n                type1 = line[2].strip('\"')\n            # 10_____________\n                if line[3] == \"\":  # if no second type\n                    type2 = None\n                else:\n                    type2 = line[3].strip('\"')  # there is a second type\n            # 11_____________\n                generation = line[4]  # format generation\n            # 12_____________\n                if \"T\" in line[5]:  # format legendary if TRUE\n                    line[5] = True\n                    legendary = line[5]\n                else:  # formmat Legendary if False\n                    line[5] = False\n                    legendary = line[5]\n\n            value = (id_num, type1, type2, generation, legendary)\n            d.update([(key, value)])\n        count += 1\n    return d\n</code></pre>\n\n<blockquote>\n  <p>Reproducible example:\n  input: (don't forget to skip first line!)</p>\n</blockquote>\n\n<pre><code>info_file1 = '''\"ID\",\"Name\",\"Type 1\",\"Type 2\",\"Generation\",\"Legendary\"\n1,\"Bulbasaur\",\"Grass\",\"Poison\",1,\"FALSE\"\n</code></pre>\n\n<blockquote>\n  <p>Output:\n          d={'Bulbasaur':(1,'Grass','Poison',1,False)}</p>\n</blockquote>\n"}, {"tags": ["python", "numpy", "matrix", "pagerank"], "answers": [{"comments": [{"owner": {"reputation": 1174, "user_id": 3406189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LWSmF.jpg?s=128&g=1", "display_name": "grofte", "link": "https://stackoverflow.com/users/3406189/grofte"}, "edited": false, "score": 0, "creation_date": 1523520988, "post_id": 43644348, "comment_id": 86597324, "body": "Fails for columns with sum zero."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 1174, "user_id": 3406189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LWSmF.jpg?s=128&g=1", "display_name": "grofte", "link": "https://stackoverflow.com/users/3406189/grofte"}, "edited": false, "score": 0, "creation_date": 1523522476, "post_id": 43644348, "comment_id": 86598184, "body": "@grofte As the question states we need to make the output such that the sum for each col adds upto 1. So, for columns that adds upto exactly <code>0</code>, I don&#39;t see how we can convert them to  add upto <code>1</code>."}, {"owner": {"reputation": 1174, "user_id": 3406189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LWSmF.jpg?s=128&g=1", "display_name": "grofte", "link": "https://stackoverflow.com/users/3406189/grofte"}, "edited": false, "score": 0, "creation_date": 1523524569, "post_id": 43644348, "comment_id": 86599642, "body": "But the OP is making a PageRank implementation. You can have nodes that don&#39;t point to anything. When this happens then they need 1/n in each value of the column."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 1174, "user_id": 3406189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LWSmF.jpg?s=128&g=1", "display_name": "grofte", "link": "https://stackoverflow.com/users/3406189/grofte"}, "edited": false, "score": 0, "creation_date": 1523524729, "post_id": 43644348, "comment_id": 86599750, "body": "@grofte So, are you saying that columns that add upto <code>0</code>, should stay as such. i.e. add upto <code>0</code> and not worry about adding upto <code>1</code>?. Think OP should have qualified on that."}, {"owner": {"reputation": 1174, "user_id": 3406189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LWSmF.jpg?s=128&g=1", "display_name": "grofte", "link": "https://stackoverflow.com/users/3406189/grofte"}, "edited": false, "score": 0, "creation_date": 1523525149, "post_id": 43644348, "comment_id": 86600025, "body": "OK. Here&#39;s an article about PageRank: <a href=\"https://www.rose-hulman.edu/~bryan/googleFinalVersionFixed.pdf\" rel=\"nofollow noreferrer\">rose-hulman.edu/~bryan/googleFinalVersionFixed.pdf</a>"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 1174, "user_id": 3406189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LWSmF.jpg?s=128&g=1", "display_name": "grofte", "link": "https://stackoverflow.com/users/3406189/grofte"}, "edited": false, "score": 0, "creation_date": 1523525569, "post_id": 43644348, "comment_id": 86600298, "body": "@grofte Seems like an informative piece, though I don&#39;t have time to read. Made edits in this post to take care of that case and not change column elements."}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 21, "last_activity_date": 1523525489, "last_edit_date": 1523525489, "creation_date": 1493240121, "answer_id": 43644348, "question_id": 43644320, "link": "https://stackoverflow.com/questions/43644320/how-to-make-numpy-array-column-sum-up-to-1/43644348#43644348", "title": "How to make numpy array column sum up to 1", "body": "<p>Divide the elements of each column by their column-summations -</p>\n\n<pre><code>a/a.sum(axis=0,keepdims=1) # or simply : a/a.sum(0)\n</code></pre>\n\n<p>For making the row-summations unity, change the axis input -</p>\n\n<pre><code>a/a.sum(axis=1,keepdims=1)\n</code></pre>\n\n<p>Sample run -</p>\n\n<pre><code>In [78]: a = np.random.rand(4,5)\n\nIn [79]: a\nOut[79]: \narray([[ 0.37,  0.74,  0.36,  0.41,  0.44],\n       [ 0.51,  0.86,  0.91,  0.03,  0.76],\n       [ 0.56,  0.46,  0.01,  0.86,  0.38],\n       [ 0.72,  0.66,  0.56,  0.84,  0.69]])\n\nIn [80]: b = a/a.sum(axis=0,keepdims=1)\n\nIn [81]: b.sum(0) # Verify\nOut[81]: array([ 1.,  1.,  1.,  1.,  1.])\n</code></pre>\n\n<p>To make sure it works on <code>int</code> arrays as well for Python 2.x, use <code>from __future__ import division</code> or use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.true_divide.html\" rel=\"noreferrer\"><code>np.true_divide</code></a>.</p>\n\n<hr>\n\n<p><strong>For columns adding upto <code>0</code></strong></p>\n\n<p>For columns that add upto <code>0</code>, assuming that we are okay with keeping them as they are, we can set the summations to <code>1</code>, rather than divide by <code>0</code>, like so -</p>\n\n<pre><code>sums = a.sum(axis=0,keepdims=1); \nsums[sums==0] = 1\nout = a/sums\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1174, "user_id": 3406189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LWSmF.jpg?s=128&g=1", "display_name": "grofte", "link": "https://stackoverflow.com/users/3406189/grofte"}, "is_accepted": false, "score": -1, "last_activity_date": 1523524676, "last_edit_date": 1523524676, "creation_date": 1523524131, "answer_id": 49792467, "question_id": 43644320, "link": "https://stackoverflow.com/questions/43644320/how-to-make-numpy-array-column-sum-up-to-1/49792467#49792467", "title": "How to make numpy array column sum up to 1", "body": "<pre><code>for i in range(len(A[0])):\n    col_sum = A[:, i].sum()\n    if col_sum != 0:\n        A[:, i] = A[:, i]/col_sum\n    else: \n        pass\n</code></pre>\n\n<p>The <code>for loop</code> is a bit sloppy and I'm sure there's a much more elegant way but it works.<br>\nReplace <code>pass</code> with <code>A[:, i] = 1/len(A[0])</code> to eliminate dangling nodes and make the matrix column stocastic. </p>\n"}], "owner": {"reputation": 431, "user_id": 3085207, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/7qezQ.jpg?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/3085207/simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18817, "favorite_count": 2, "accepted_answer_id": 43644348, "answer_count": 2, "score": 11, "last_activity_date": 1523525489, "creation_date": 1493239978, "question_id": 43644320, "link": "https://stackoverflow.com/questions/43644320/how-to-make-numpy-array-column-sum-up-to-1", "title": "How to make numpy array column sum up to 1", "body": "<p>I am working on building a transition matrix for implementing the PageRank algorithm. How could I use numpy to make sure that the columns add up to one.</p>\n\n<p>For example:  </p>\n\n<pre><code>1 1 1   \n1 1 1  \n1 1 1\n</code></pre>\n\n<p>should be normalized to be </p>\n\n<pre><code>.33 .33 .33  \n.33 .33 .33  \n.33 .33 .33\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "edited": false, "score": 1, "creation_date": 1493241694, "post_id": 43644356, "comment_id": 74337852, "body": "nice answer! Can you pl tell me why doesn&#39;t df.loc[(df.Group == &#39;B&#39; &amp; df.Value &gt; 0), &#39;Value&#39;]*= -1 work? I was getting an error, TypeError: cannot compare a dtyped [int64] array with a scalar of type [bool]"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "edited": false, "score": 1, "creation_date": 1493241781, "post_id": 43644356, "comment_id": 74337894, "body": "@A-Za-z, thank you! It&#39;s a <a href=\"http://stackoverflow.com/a/40578010/5741205\">Pandas &amp; Python precedence problem</a>. Try this instead: <code>df.loc[(df.Group == &#39;B&#39;) &amp; (df.Value &gt; 0), &#39;Value&#39;]</code>"}, {"owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "edited": false, "score": 0, "creation_date": 1493241947, "post_id": 43644356, "comment_id": 74337982, "body": "Ah! I feel so dumb:)"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1493252838, "post_id": 43644356, "comment_id": 74341603, "body": "@MaxU nice other answer too"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "edited": false, "score": 2, "creation_date": 1493252995, "post_id": 43644356, "comment_id": 74341634, "body": "@A-Za-z I feel so dumb too sometimes. But I also have moments of brilliance. Net net, it probably averages out.  Go ahead and feel dumb this time :-). It won&#39;t change the fact that you clearly aren&#39;t."}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 4, "last_activity_date": 1493240152, "creation_date": 1493240152, "answer_id": 43644356, "question_id": 43644299, "link": "https://stackoverflow.com/questions/43644299/pandas-filter-and-apply/43644356#43644356", "title": "pandas filter and apply", "body": "<pre><code>In [85]: df.loc[df.Group.eq('B') &amp; df.Value.gt(0), 'Value'] *= -1\n\nIn [86]: df\nOut[86]:\n  Group  Value\n0     A      1\n1     A      2\n2     A      3\n3     B     -1\n4     B     -2\n5     B     -3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 2, "last_activity_date": 1493241422, "creation_date": 1493241422, "answer_id": 43644675, "question_id": 43644299, "link": "https://stackoverflow.com/questions/43644299/pandas-filter-and-apply/43644675#43644675", "title": "pandas filter and apply", "body": "<p>A different way using <code>mask</code> and <code>np.sign</code></p>\n\n<pre><code>df.assign(Value=df.Value.mask(df.Group == 'B', -np.sign(df.Value) * df.Value))\n\n  Group  Value\n0     A      1\n1     A      2\n2     A      3\n3     B     -1\n4     B     -2\n5     B     -3\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 7879692, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec700f5263e6223e40f2afecf972d2c0?s=128&d=identicon&r=PG&f=1", "display_name": "python_analysis", "link": "https://stackoverflow.com/users/7879692/python-analysis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1047, "favorite_count": 1, "accepted_answer_id": 43644356, "answer_count": 2, "score": 2, "last_activity_date": 1493241422, "creation_date": 1493239905, "question_id": 43644299, "link": "https://stackoverflow.com/questions/43644299/pandas-filter-and-apply", "title": "pandas filter and apply", "body": "<p>Hello I have the following data frame (df):</p>\n\n<pre><code>Group Value\n  A     1\n  A     2\n  A     3\n  B    -1\n  B     2\n  B     3\n</code></pre>\n\n<p>I would like to convert all of group B to negative values if they arent already (ie multiply by -1).</p>\n\n<pre><code>df[df['group'] == 'B', 'value'].apply(... if value less than 0 then -1*value)\n</code></pre>\n\n<p>Please let me know the correct way to go about this in pandas framework. Thank you</p>\n"}, {"tags": ["python", "python-3.x", "twitter", "tweepy"], "comments": [{"owner": {"reputation": 2884, "user_id": 3658166, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/X8dHk.png?s=128&g=1", "display_name": "ninesalt", "link": "https://stackoverflow.com/users/3658166/ninesalt"}, "edited": false, "score": 0, "creation_date": 1493240963, "post_id": 43644286, "comment_id": 74337526, "body": "what does the <code>status</code> object look like?"}, {"owner": {"reputation": 8279, "user_id": 5309300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63d02949d5e7330b5db7c59283041d86?s=128&d=identicon&r=PG&f=1", "display_name": "asongtoruin", "link": "https://stackoverflow.com/users/5309300/asongtoruin"}, "edited": false, "score": 1, "creation_date": 1493281760, "post_id": 43644286, "comment_id": 74352454, "body": "your logic seems a little confused - <code>(status.retweeted) and (&#39;RT @&#39; not in status.text)</code> would just return &quot;official&quot; retweets. Maybe you should be using <code>(status.retweeted) or (&#39;RT @&#39; in status.text)</code> to exclude both &quot;official&quot; and &quot;manual&quot; retweets"}], "answers": [{"comments": [{"owner": {"reputation": 8279, "user_id": 5309300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63d02949d5e7330b5db7c59283041d86?s=128&d=identicon&r=PG&f=1", "display_name": "asongtoruin", "link": "https://stackoverflow.com/users/5309300/asongtoruin"}, "edited": false, "score": 0, "creation_date": 1493281845, "post_id": 43648110, "comment_id": 74352503, "body": "would this not assume &quot;official&quot; retweets (which I believe don&#39;t necessarily begin with &quot;RT @&quot;) were not retweeted?"}, {"owner": {"reputation": 148, "user_id": 1781516, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f9fe752b3321efc2d50b6f7f301856ed?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/1781516/brian"}, "reply_to_user": {"reputation": 8279, "user_id": 5309300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63d02949d5e7330b5db7c59283041d86?s=128&d=identicon&r=PG&f=1", "display_name": "asongtoruin", "link": "https://stackoverflow.com/users/5309300/asongtoruin"}, "edited": false, "score": 0, "creation_date": 1493293210, "post_id": 43648110, "comment_id": 74360613, "body": "I have let a <code>StreamListener()</code> run for a long time with a popular topic only printing when <code>status.retweeted</code> and it never prints. Maybe the .retweeted attribute is not working as intended?"}, {"owner": {"reputation": 8279, "user_id": 5309300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63d02949d5e7330b5db7c59283041d86?s=128&d=identicon&r=PG&f=1", "display_name": "asongtoruin", "link": "https://stackoverflow.com/users/5309300/asongtoruin"}, "edited": false, "score": 0, "creation_date": 1493307171, "post_id": 43648110, "comment_id": 74371091, "body": "hm, this seems unusual. You could try <code>hasattr(status, &#39;retweeted_status&#39;)</code>, which seems to be used fairly consistently for both traditional &quot;retweets&quot; and &quot;quotes&quot;, assuming it&#39;s been done through the twitter interface."}], "tags": [], "owner": {"reputation": 148, "user_id": 1781516, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f9fe752b3321efc2d50b6f7f301856ed?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/1781516/brian"}, "is_accepted": false, "score": 1, "last_activity_date": 1493263361, "creation_date": 1493263361, "answer_id": 43648110, "question_id": 43644286, "link": "https://stackoverflow.com/questions/43644286/ignoring-retweets-when-streaming-twitter-tweets/43648110#43648110", "title": "Ignoring Retweets When Streaming Twitter Tweets", "body": "<p>What you could do is create another function to call inside of the <code>on_status</code> in your <code>StreamListener</code>. Here is something that worked for me:</p>\n\n<pre><code>def analyze_status(text):\n    if 'RT' in text[0:3]:\n        print(\"This status was retweeted!\")\n        print(text)\n    else:\n        print(\"This status was not retweeted!\")\n        print(text)\n\nclass MyStreamListener(tweepy.StreamListener):\n    def on_status(self, status):\n        analyze_status(status.text)\n    def on_error(self, status_code):\n        print(status_code)\n\nmyStreamListener = MyStreamListener()\nmyStream = tweepy.Stream(auth=twitter_api.auth, listener=myStreamListener)\nmyStream.filter(track=['Trump'])\n</code></pre>\n\n<p>That yields the following:</p>\n\n<pre><code>This status was not retweeted!\n@baseballcrank @seanmdav But they won't, cause Trump's name is on it. I can already hear their stupidity, \"I hate D\u2026 \nThis status was retweeted!\nRT @OvenThelllegals: I'm about to end the Trump administration with a single tweet\nThis status was retweeted!\nRT @kylegriffin1: FLASHBACK: April 2016\n\nSAVANNAH GUTHRIE: \"Do you believe in raising taxes on the wealthy?\"\n\nTRUMP: \"I do. I do. Inc\u2026 \n</code></pre>\n\n<p>This is not the most elegant solution, but I do believe it addresses the issue that you were facing.</p>\n"}], "owner": {"reputation": 1149, "user_id": 5842911, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69183f53d55449640b734a49a7f6201a?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5842911/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1363, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1493263361, "creation_date": 1493239816, "last_edit_date": 1495540468, "question_id": 43644286, "link": "https://stackoverflow.com/questions/43644286/ignoring-retweets-when-streaming-twitter-tweets", "title": "Ignoring Retweets When Streaming Twitter Tweets", "body": "<p>I am trying to run a simple script that will stream live Tweets. Several attempts to filter out retweets have been unsuccessful. I still get manual retweets (with the text \"RT @\") in my stream. \nI've tried other methods including <a href=\"https://stackoverflow.com/a/30378987/5842911\">link</a> and <a href=\"https://stackoverflow.com/a/38874835/5842911\">link</a>. </p>\n\n<p>As I am learning, my code is very similar to the following: <a href=\"https://github.com/dataquestio/twitter-scrape/blob/master/scraper.py\" rel=\"nofollow noreferrer\">link</a></p>\n\n<p>What can I do to ignore retweets?</p>\n\n<p>Here is a snippet of my code:</p>\n\n<pre><code>class StreamListener(tweepy.StreamListener):\n\n    def on_status(self, status):\n        if (status.retweeted) and ('RT @' not in status.text):\n            return\n\n    description = status.user.description\n    loc = status.user.location\n    text = status.text\n    coords = status.coordinates\n    geo = status.geo\n    name = status.user.screen_name\n    user_created = status.user.created_at\n    followers = status.user.followers_count\n    id_str = status.id_str\n    created = status.created_at\n    retweets = status.retweet_count\n    bg_color = status.user.profile_background_color\n\n    # Initialize TextBlob class on text of each tweet\n    # To get sentiment score from each class\n    blob = TextBlob(text)\n    sent = blob.sentiment\n</code></pre>\n"}, {"tags": ["python", "multiprocessing"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1493260587, "post_id": 43644232, "comment_id": 74343565, "body": "Did you place any of your files in a folder with a unicode name? Or do you access such a file?"}, {"owner": {"reputation": 517, "user_id": 6906605, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/1122480731121536/picture?type=large", "display_name": "\u0645\u0647\u0646\u062f \u0639\u0628\u062f \u0627\u0644\u062c\u0644\u064a\u0644", "link": "https://stackoverflow.com/users/6906605/%d9%85%d9%87%d9%86%d8%af-%d8%b9%d8%a8%d8%af-%d8%a7%d9%84%d8%ac%d9%84%d9%8a%d9%84"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1493291756, "post_id": 43644232, "comment_id": 74359509, "body": "@KlausD. i am beginner on programming and computers and i am learning from internet there for i have no idea what is unicode name but i am going to search about it now"}, {"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 1, "creation_date": 1493294790, "post_id": 43644232, "comment_id": 74361814, "body": "Basically it is any name which has other characters than a-z and 0-9. Your name on SO would be a good example."}, {"owner": {"reputation": 517, "user_id": 6906605, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/1122480731121536/picture?type=large", "display_name": "\u0645\u0647\u0646\u062f \u0639\u0628\u062f \u0627\u0644\u062c\u0644\u064a\u0644", "link": "https://stackoverflow.com/users/6906605/%d9%85%d9%87%d9%86%d8%af-%d8%b9%d8%a8%d8%af-%d8%a7%d9%84%d8%ac%d9%84%d9%8a%d9%84"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1493299291, "post_id": 43644232, "comment_id": 74365352, "body": "@KlausD. thank you so much yes the problem was the file name in arabic but now i made it in english and its working :)"}], "answers": [{"tags": [], "owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "is_accepted": false, "score": 3, "last_activity_date": 1549465300, "last_edit_date": 1549465300, "creation_date": 1493297188, "answer_id": 43658257, "question_id": 43644232, "link": "https://stackoverflow.com/questions/43644232/multiprocessing-not-working-oserrorerrno-22-invalid-argument/43658257#43658257", "title": "multiprocessing not working (oserror:[Errno 22] Invalid argument )", "body": "<p>For an explanation of why the <code>if __name__ == '__main__':</code> part is necessary, see Programming guidelines.  </p>\n\n<blockquote>\n  <p><strong>Python \u00bb Documentation</strong> <a href=\"https://docs.python.org/3.6/library/multiprocessing.html#the-spawn-and-forkserver-start-methods\" rel=\"nofollow noreferrer\">Safe importing of main module</a></p>\n</blockquote>\n"}], "owner": {"reputation": 517, "user_id": 6906605, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/1122480731121536/picture?type=large", "display_name": "\u0645\u0647\u0646\u062f \u0639\u0628\u062f \u0627\u0644\u062c\u0644\u064a\u0644", "link": "https://stackoverflow.com/users/6906605/%d9%85%d9%87%d9%86%d8%af-%d8%b9%d8%a8%d8%af-%d8%a7%d9%84%d8%ac%d9%84%d9%8a%d9%84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2263, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1549465300, "creation_date": 1493239638, "last_edit_date": 1495540010, "question_id": 43644232, "link": "https://stackoverflow.com/questions/43644232/multiprocessing-not-working-oserrorerrno-22-invalid-argument", "title": "multiprocessing not working (oserror:[Errno 22] Invalid argument )", "body": "<p>i am using python3.5.2 and i am trying to learn about multiprocessing but it doesn't work for me it doesn't show me any error or any thing it just finish the program normally with out doing anything i already asked about this if you want to see my question for more details     </p>\n\n<p><a href=\"https://stackoverflow.com/questions/43459184/multiprocessing-dont-start\">multiprocessing don&#39;t start</a></p>\n\n<p>i tried everything and all the time is the same problem when i searched i found lot of people having the same problem every one was telling them that its the IDLE problem so i tried and i opened the python file with out the IDLE and now thankfully i had error message but i am beginner so i couldn't understand what is the problem , here is the problem : </p>\n\n<p><a href=\"https://i.stack.imgur.com/b61ii.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b61ii.png\" alt=\"and thanks for your help\"></a> </p>\n"}, {"tags": ["python", "csv", "parsing"], "comments": [{"owner": {"reputation": 91788, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 3, "creation_date": 1493239737, "post_id": 43644219, "comment_id": 74336841, "body": "If it&#39;s been bothering you for days you should have some code you&#39;ve tried. Please share that with us."}, {"owner": {"reputation": 4232, "user_id": 6772373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wMTdt.jpg?s=128&g=1", "display_name": "Mike Tung", "link": "https://stackoverflow.com/users/6772373/mike-tung"}, "edited": false, "score": 0, "creation_date": 1493240091, "post_id": 43644219, "comment_id": 74337028, "body": "Can you give us what you have in code so we can help you? We aren&#39;t here to do work for you."}], "answers": [{"comments": [{"owner": {"reputation": 91788, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 1, "creation_date": 1493261185, "post_id": 43645017, "comment_id": 74343697, "body": "It is almost always the wrong choice to use <code>eval()</code>. <a href=\"https://docs.python.org/3/library/ast.html?highlight=ast.literal_eval#ast.literal_eval\" rel=\"nofollow noreferrer\"><code>ast.literal_eval()</code></a> would work just as well while being much safer."}], "tags": [], "owner": {"reputation": 19199, "user_id": 131187, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/27eJi.jpg?s=128&g=1", "display_name": "Bill Bell", "link": "https://stackoverflow.com/users/131187/bill-bell"}, "is_accepted": false, "score": 0, "last_activity_date": 1493306213, "last_edit_date": 1493306213, "creation_date": 1493242998, "answer_id": 43645017, "question_id": 43644219, "link": "https://stackoverflow.com/questions/43644219/parse-csv-string-into-columns-in-python/43645017#43645017", "title": "Parse csv string into columns in python", "body": "<p>This code ignores the possibility that csv-style processing could be used, since I wasn't sure exactly how fields are delimited. I've assumed that they are separated by a '|' character and that it could be necessary to strip blanks. I have taken advantage of a comment in using <code>ast.literal_eval</code> for safe processing of the lists.</p>\n\n<pre><code>&gt;&gt;&gt; from io import StringIO\n&gt;&gt;&gt; import ast\n&gt;&gt;&gt; inputCSV = StringIO('''\\\n... Column1 | Column2\n... aaa | [u'xxx', u'yyy']\n... bbb | [u'sss', u'ttt']''')\n&gt;&gt;&gt; header = True\n&gt;&gt;&gt; with inputCSV as inCSV:\n...     for line in inCSV.readlines():\n...         \n...         column1, column2 = [_.strip() for _ in line.split('|')]\n...         \n...         \n...         if header:\n...             print ('%s|%s' % (column1, column2))\n...             header = False\n...         else:\n...             column2 = ast.literal_eval(column2)\n...             \n...             for item in column2:\n...                 print ('%s|%s' % (column1, item))\n... \nColumn1|Column2\naaa|xxx\naaa|yyy\nbbb|sss\nbbb|ttt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 2497874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88a52f0d17250dbd232a780455e0cf27?s=128&d=identicon&r=PG", "display_name": "user2497874", "link": "https://stackoverflow.com/users/2497874/user2497874"}, "is_accepted": false, "score": 0, "last_activity_date": 1493257021, "creation_date": 1493257021, "answer_id": 43647226, "question_id": 43644219, "link": "https://stackoverflow.com/questions/43644219/parse-csv-string-into-columns-in-python/43647226#43647226", "title": "Parse csv string into columns in python", "body": "<p>Thanks for the constructive answer! Although it didn't quite work for me specifically, I was definitely inspired by it and came up with some functional code! </p>\n\n<pre><code>header = True\n\nwith open('2.csv') as inCSV:\nwriter = csv.writer(open('1.csv', 'wb'))\nfor line in inCSV.readlines():\n    column1, column2 = [_.strip() for _ in line.split(',',1)]\n    if header:\n        writer.writerow(('source','target'))\n        header = False\n    else:\n        temp=column2.replace(\"[\",\"]\").replace(\"]\",\"\").replace('\"','').split(\",\")\n        for i in range(len(temp)):\n            data=(column1,temp[i])\n            writer.writerow(data)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 2497874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88a52f0d17250dbd232a780455e0cf27?s=128&d=identicon&r=PG", "display_name": "user2497874", "link": "https://stackoverflow.com/users/2497874/user2497874"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 174, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493306213, "creation_date": 1493239573, "last_edit_date": 1592644375, "question_id": 43644219, "link": "https://stackoverflow.com/questions/43644219/parse-csv-string-into-columns-in-python", "title": "Parse csv string into columns in python", "body": "<p>I have a csv file containing two columns. The first one is a stringID whereas the second one is a list of stringIDs.</p>\n<blockquote>\n<p>Column1 | Column2</p>\n<p>aaa    | [u'xxx', u'yyy']</p>\n</blockquote>\n<p>My question is how to create a new csv with the stringIDs in pairs (two columns with duplicates)? For example,</p>\n<blockquote>\n<p>Column1 | Column2</p>\n<p>aaa     | u'xxx'</p>\n<p>aaa     | u'yyy'</p>\n</blockquote>\n<p>Thanks a lot for helping me! I know this problem should be simple but it has been bothering me for days...</p>\n"}, {"tags": ["python", "graph", "networkx"], "comments": [{"owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "edited": false, "score": 0, "creation_date": 1493240201, "post_id": 43644210, "comment_id": 74337095, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. We don&#39;t have your input files, so it&#39;s harder for us to work with your code. Extract out just enough code to isolate the problem."}, {"owner": {"reputation": 648, "user_id": 7687981, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2a33cdaec53198ea6fd2cc2927e2000f?s=128&d=identicon&r=PG&f=1", "display_name": "andrewr", "link": "https://stackoverflow.com/users/7687981/andrewr"}, "reply_to_user": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "edited": false, "score": 0, "creation_date": 1493243607, "post_id": 43644210, "comment_id": 74338697, "body": "I apologize, I meant to provide samples initially. I provided samples of both files as well as links to the full data on Google Drive."}, {"owner": {"reputation": 1482, "user_id": 6696049, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/795be62fd4225fe5cf2622cd0916f832?s=128&d=identicon&r=PG&f=1", "display_name": "edo", "link": "https://stackoverflow.com/users/6696049/edo"}, "edited": false, "score": 0, "creation_date": 1493283591, "post_id": 43644210, "comment_id": 74353746, "body": "Let&#39;s say an edge between node A and node B appears 3 times in your data. Do you want to have multiple weighted edges between the nodes (i.e. there are 3 edges beween A and B and each has a weight 3), or do you want to have a single weighted edge (i.e. one edge between A and B with weight 3)?"}, {"owner": {"reputation": 648, "user_id": 7687981, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2a33cdaec53198ea6fd2cc2927e2000f?s=128&d=identicon&r=PG&f=1", "display_name": "andrewr", "link": "https://stackoverflow.com/users/7687981/andrewr"}, "edited": false, "score": 0, "creation_date": 1493289936, "post_id": 43644210, "comment_id": 74358219, "body": "Is it possible to see both? I would prefer to have multiple weighted edges since the graph is directed, however, I&#39;m not sure if that will complicate the edge visualization since the edge width or color will be dependent on the weight and at that point the edges between two nodes overlap"}], "answers": [{"comments": [{"owner": {"reputation": 648, "user_id": 7687981, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2a33cdaec53198ea6fd2cc2927e2000f?s=128&d=identicon&r=PG&f=1", "display_name": "andrewr", "link": "https://stackoverflow.com/users/7687981/andrewr"}, "edited": false, "score": 0, "creation_date": 1493328911, "post_id": 43667522, "comment_id": 74383481, "body": "That worked, thank you. As a side, I mentioned I&#39;m trying to use the weight to determine edge width or color, how can I use your solution to do so? I tried using solutions provided here <a href=\"http://stackoverflow.com/questions/17632151/coloring-networkx-edges-based-on-weight?rq=1\" title=\"coloring networkx edges based on weight\">stackoverflow.com/questions/17632151/&hellip;</a> and here <a href=\"http://stackoverflow.com/questions/22967086/colouring-edges-by-weight-in-networkx\" title=\"colouring edges by weight in networkx\">stackoverflow.com/questions/22967086/&hellip;</a> but I&#39;m not having any luck tailoring your solution to them. Thanks again!"}, {"owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "reply_to_user": {"reputation": 648, "user_id": 7687981, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2a33cdaec53198ea6fd2cc2927e2000f?s=128&d=identicon&r=PG&f=1", "display_name": "andrewr", "link": "https://stackoverflow.com/users/7687981/andrewr"}, "edited": false, "score": 0, "creation_date": 1493329759, "post_id": 43667522, "comment_id": 74383829, "body": "Updated my answer; should address your question."}, {"owner": {"reputation": 648, "user_id": 7687981, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2a33cdaec53198ea6fd2cc2927e2000f?s=128&d=identicon&r=PG&f=1", "display_name": "andrewr", "link": "https://stackoverflow.com/users/7687981/andrewr"}, "edited": false, "score": 0, "creation_date": 1493329985, "post_id": 43667522, "comment_id": 74383916, "body": "I received a value error: <code>need more than 2 values to unpack</code>"}, {"owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "reply_to_user": {"reputation": 648, "user_id": 7687981, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2a33cdaec53198ea6fd2cc2927e2000f?s=128&d=identicon&r=PG&f=1", "display_name": "andrewr", "link": "https://stackoverflow.com/users/7687981/andrewr"}, "edited": false, "score": 0, "creation_date": 1493330040, "post_id": 43667522, "comment_id": 74383938, "body": "Did you include <code>data=True</code>?"}, {"owner": {"reputation": 648, "user_id": 7687981, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2a33cdaec53198ea6fd2cc2927e2000f?s=128&d=identicon&r=PG&f=1", "display_name": "andrewr", "link": "https://stackoverflow.com/users/7687981/andrewr"}, "edited": false, "score": 0, "creation_date": 1493330163, "post_id": 43667522, "comment_id": 74383989, "body": "Ah, that&#39;s it! Do you know if this works the same for color?"}, {"owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "reply_to_user": {"reputation": 648, "user_id": 7687981, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2a33cdaec53198ea6fd2cc2927e2000f?s=128&d=identicon&r=PG&f=1", "display_name": "andrewr", "link": "https://stackoverflow.com/users/7687981/andrewr"}, "edited": false, "score": 2, "creation_date": 1493330429, "post_id": 43667522, "comment_id": 74384120, "body": "In principle, it&#39;s the same idea. It&#39;ll use whatever colormap you provide, or the default, and assign the values you pass in to values in the colormap. See <a href=\"https://networkx.github.io/documentation/networkx-1.10/reference/generated/networkx.drawing.nx_pylab.draw_networkx.html#networkx.drawing.nx_pylab.draw_networkx\" rel=\"nofollow noreferrer\">the docs</a>."}, {"owner": {"reputation": 648, "user_id": 7687981, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2a33cdaec53198ea6fd2cc2927e2000f?s=128&d=identicon&r=PG&f=1", "display_name": "andrewr", "link": "https://stackoverflow.com/users/7687981/andrewr"}, "edited": false, "score": 0, "creation_date": 1493331108, "post_id": 43667522, "comment_id": 74384349, "body": "Okay, I believe I got that to work and visualize properly. One last question related to the weights. Some edges have a weight of like 7-800, is it possible to normalize it so those edges aren&#39;t enormously disproportional? I&#39;m not sure if I&#39;ve explained that clearly, so I&#39;m adding an image in the question"}, {"owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "reply_to_user": {"reputation": 648, "user_id": 7687981, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2a33cdaec53198ea6fd2cc2927e2000f?s=128&d=identicon&r=PG&f=1", "display_name": "andrewr", "link": "https://stackoverflow.com/users/7687981/andrewr"}, "edited": false, "score": 2, "creation_date": 1493331192, "post_id": 43667522, "comment_id": 74384377, "body": "You can always scale it, e.g. with <code>np.log(d[&#39;width&#39;])</code>, or order them by rank with scipy&#39;s <code>stats.rankdata</code>."}, {"owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "reply_to_user": {"reputation": 648, "user_id": 7687981, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2a33cdaec53198ea6fd2cc2927e2000f?s=128&d=identicon&r=PG&f=1", "display_name": "andrewr", "link": "https://stackoverflow.com/users/7687981/andrewr"}, "edited": false, "score": 0, "creation_date": 1493331279, "post_id": 43667522, "comment_id": 74384401, "body": "If you have follow-ups, I encourage you to post them as new questions. More people will see those than just me."}], "tags": [], "owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "is_accepted": true, "score": 7, "last_activity_date": 1493329747, "last_edit_date": 1493329747, "creation_date": 1493325560, "answer_id": 43667522, "question_id": 43644210, "link": "https://stackoverflow.com/questions/43644210/python-networkx-add-weights-to-edges-by-frequency-of-edge-occurance/43667522#43667522", "title": "Python/NetworkX: Add Weights to Edges by Frequency of Edge Occurance", "body": "<p>Try this on for size.</p>\n\n<p>Note: I added a duplicate of an existing edge, just to show the behavior when there are repeats in your multigraph.</p>\n\n<pre><code>from collections import Counter\nc = Counter(g.edges())  # Contains frequencies of each directed edge.\n\nfor u, v, d in g.edges(data=True):\n    d['weight'] = c[u, v]\n\nprint(list(g.edges(data=True)))\n#[(340, 269, {'weight': 1}),\n# (340, 340, {'weight': 1}),\n# (269, 340, {'weight': 1}),\n# (398, 279, {'weight': 1}),\n# (69, 28, {'weight': 1}),\n# (382, 27, {'weight': 1}),\n# (27, 285, {'weight': 2}),\n# (27, 285, {'weight': 2}),\n# (120, 422, {'weight': 1}),\n# (422, 217, {'weight': 1}),\n# (217, 340, {'weight': 1}),\n# (458, 442, {'weight': 1}),\n# (291, 431, {'weight': 1}),\n# (68, 27, {'weight': 1}),\n# (112, 269, {'weight': 1})]\n</code></pre>\n\n<p><strong>Edit:</strong> To visualize the graph with edge weights as thicknesses, use this:</p>\n\n<pre><code>nx.draw_networkx(g, width=[d['weight'] for _, _, d in g.edges(data=True)])\n</code></pre>\n"}], "owner": {"reputation": 648, "user_id": 7687981, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2a33cdaec53198ea6fd2cc2927e2000f?s=128&d=identicon&r=PG&f=1", "display_name": "andrewr", "link": "https://stackoverflow.com/users/7687981/andrewr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4090, "favorite_count": 4, "accepted_answer_id": 43667522, "answer_count": 1, "score": 8, "last_activity_date": 1493333640, "creation_date": 1493239543, "last_edit_date": 1493333640, "question_id": 43644210, "link": "https://stackoverflow.com/questions/43644210/python-networkx-add-weights-to-edges-by-frequency-of-edge-occurance", "title": "Python/NetworkX: Add Weights to Edges by Frequency of Edge Occurance", "body": "<p>I have a MultiDiGraph created in <code>networkx</code> for which I am trying to add weights to the edges, after which I assign a new weight based on the frequency/count of the edge occurance. I used the following code to create the graph and add weights, but I'm not sure how to tackle reassigning weights based on count:</p>\n\n<pre><code>g = nx.MultiDiGraph()\n\ndf = pd.read_csv('G:\\cluster_centroids.csv', delimiter=',')\ndf['pos'] = list(zip(df.longitude,df.latitude))\ndict_pos = dict(zip(df.cluster_label,df.pos))\n#print dict_pos\n\n\nfor row in csv.reader(open('G:\\edges.csv', 'r')):\n    if '[' in row[1]:       #\n        g.add_edges_from(eval(row[1]))\n\nfor u, v, d in g.edges(data=True):\n    d['weight'] = 1\nfor u,v,d in g.edges(data=True):\n    print u,v,d\n</code></pre>\n\n<p><strong>Edit</strong></p>\n\n<p>I was able to successfully assign weights to each edge, first part of my original question, with the following:</p>\n\n<pre><code>for u, v, d in g.edges(data=True):\n    d['weight'] = 1\nfor u,v,d in g.edges(data=True):\n    print u,v,d\n</code></pre>\n\n<p>However, I am still unable to reassign weights based on the number of times an edge occurs (a single edge in my graph can occur multiple times)? I need to accomplish this in order to visualize edges with a higher count differently than edges with a lower count (using edge color or width). I'm not sure how to proceed with reassigning weights based on count, please advise. Below are sample data, and links to my full data set.</p>\n\n<p><strong>Data</strong></p>\n\n<p>Sample Centroids(nodes):</p>\n\n<pre><code>cluster_label,latitude,longitude\n0,39.18193382,-77.51885109\n1,39.18,-77.27\n2,39.17917928,-76.6688633\n3,39.1782,-77.2617\n4,39.1765,-77.1927\n5,39.1762375,-76.8675441\n6,39.17468,-76.8204499\n7,39.17457332,-77.2807235\n8,39.17406072,-77.274685\n9,39.1731621,-77.2716502\n10,39.17,-77.27\n</code></pre>\n\n<p>Sample Edges:</p>\n\n<pre><code>user_id,edges\n11011,\"[[340, 269], [269, 340]]\"\n80973,\"[[398, 279]]\"\n608473,\"[[69, 28]]\"\n2139671,\"[[382, 27], [27, 285]]\"\n3945641,\"[[120, 422], [422, 217], [217, 340], [340, 340]]\"\n5820642,\"[[458, 442]]\"\n6060732,\"[[291, 431]]\"\n6912362,\"[[68, 27]]\"\n7362602,\"[[112, 269]]\"\n</code></pre>\n\n<p><em>Full data</em>:</p>\n\n<p>Centroids(nodes):<a href=\"https://drive.google.com/open?id=0B1lvsCnLWydEdldYc3FQTmdQMmc\" rel=\"noreferrer\">https://drive.google.com/open?id=0B1lvsCnLWydEdldYc3FQTmdQMmc</a></p>\n\n<p>Edges: <a href=\"https://drive.google.com/open?id=0B1lvsCnLWydEdEtfM2E3eXViYkk\" rel=\"noreferrer\">https://drive.google.com/open?id=0B1lvsCnLWydEdEtfM2E3eXViYkk</a></p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I was able to solve, at least temporarily, the issue of overly disproportional edge widths due to high edge weight by setting a minLineWidth and multiplying it by the weight:</p>\n\n<pre><code>minLineWidth = 0.25\n\nfor u, v, d in g.edges(data=True):\n    d['weight'] = c[u, v]*minLineWidth\nedges,weights = zip(*nx.get_edge_attributes(g,'weight').items())\n</code></pre>\n\n<p>and using <code>width=[d['weight'] for u,v, d in g.edges(data=True)]</code> in <code>nx.draw_networkx_edges()</code> as provided in the solution below.</p>\n\n<p>Additionally, I was able to scale color using the following:</p>\n\n<pre><code># Set Edge Color based on weight\nvalues = range(7958) #this is based on the number of edges in the graph, use print len(g.edges()) to determine this\njet = cm = plt.get_cmap('YlOrRd')\ncNorm  = colors.Normalize(vmin=0, vmax=values[-1])\nscalarMap = cmx.ScalarMappable(norm=cNorm, cmap=jet)\ncolorList = []\n\nfor i in range(7958):\n    colorVal = scalarMap.to_rgba(values[i])\n    colorList.append(colorVal)\n</code></pre>\n\n<p>And then using the argument <code>edge_color=colorList</code> in <code>nx.draw_networkx_edges()</code>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/qhJyG.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/qhJyG.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "feedparser"], "comments": [{"owner": {"reputation": 43, "user_id": 7482415, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ef09077647544fc31b17f6ced45f0eac?s=128&d=identicon&r=PG&f=1", "display_name": "chris3389", "link": "https://stackoverflow.com/users/7482415/chris3389"}, "edited": false, "score": 0, "creation_date": 1493273960, "post_id": 43644187, "comment_id": 74347739, "body": "actually the page <a href=\"http://www.korben.info/feed\" rel=\"nofollow noreferrer\">korben.info/feed</a> lists 30 articles, which is what feedparser returns. But I know here are hundreds of articles. Is there a way to get a list of all of them ? Thank you"}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 7482415, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ef09077647544fc31b17f6ced45f0eac?s=128&d=identicon&r=PG&f=1", "display_name": "chris3389", "link": "https://stackoverflow.com/users/7482415/chris3389"}, "is_accepted": false, "score": 0, "last_activity_date": 1493296772, "creation_date": 1493296772, "answer_id": 43658081, "question_id": 43644187, "link": "https://stackoverflow.com/questions/43644187/python-feedparser-return-only-limited-number-of-entries/43658081#43658081", "title": "python feedparser return only limited number of entries", "body": "<p>Well this is not FeedParser related.\nFeedparser gets data from the feed url.\nIf the feed page has 30 posts listed then the number will be 30.\nEven if the site has hundreds of posts.</p>\n\n<p>I need something else.</p>\n"}], "owner": {"reputation": 43, "user_id": 7482415, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ef09077647544fc31b17f6ced45f0eac?s=128&d=identicon&r=PG&f=1", "display_name": "chris3389", "link": "https://stackoverflow.com/users/7482415/chris3389"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 462, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493296772, "creation_date": 1493239438, "question_id": 43644187, "link": "https://stackoverflow.com/questions/43644187/python-feedparser-return-only-limited-number-of-entries", "title": "python feedparser return only limited number of entries", "body": "<p>I'm new to feedparser and would like to retrive the full number or entries/articles from a feed.</p>\n\n<pre><code>myfeed = feedparser.parse(feedurl)\nprint len(myfeed['entries'])\n</code></pre>\n\n<p>For instance if I use </p>\n\n<pre><code>feedurl = 'http://www.korben.info/feed'\n</code></pre>\n\n<p>It only returns only 30 entries.\nIt's the same with other sites.</p>\n\n<p>Why is this so limited ?</p>\n\n<p>I need to retrieve the <strong>full</strong> list of articles URLs from a site.</p>\n\n<p>How can I achieve this please ?\nThank you for your help.</p>\n"}, {"tags": ["python", "twitter", "oauth-2.0"], "comments": [{"owner": {"reputation": 12498, "user_id": 3461, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/70b0265140eaff6e312eb3efcff3c195?s=128&d=identicon&r=PG", "display_name": "Benjamin Atkin", "link": "https://stackoverflow.com/users/3461/benjamin-atkin"}, "edited": false, "score": 0, "creation_date": 1493242477, "post_id": 43644137, "comment_id": 74338243, "body": "Did you sign in with twitter to get the access token and the access token secret? Did you use the access token from the response to /oauth/access_token, and not the one from the request? <a href=\"https://dev.twitter.com/web/sign-in/implementing\" rel=\"nofollow noreferrer\">dev.twitter.com/web/sign-in/implementing</a>"}, {"owner": {"reputation": 3417, "user_id": 886719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9f61f07eb4347b5dbbd090b8e4f4b1bc?s=128&d=identicon&r=PG", "display_name": "Jonas", "link": "https://stackoverflow.com/users/886719/jonas"}, "edited": false, "score": 0, "creation_date": 1494172810, "post_id": 43644137, "comment_id": 74703847, "body": "I used your exact code with my tokens and it worked fine. Try regenerating your access tokens."}], "answers": [{"tags": [], "owner": {"reputation": 82, "user_id": 7347574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a61e202c074e21fce5dd9b529eb607c9?s=128&d=identicon&r=PG&f=1", "display_name": "Treasure", "link": "https://stackoverflow.com/users/7347574/treasure"}, "is_accepted": false, "score": 0, "last_activity_date": 1514884708, "last_edit_date": 1514884708, "creation_date": 1514814969, "answer_id": 48050249, "question_id": 43644137, "link": "https://stackoverflow.com/questions/43644137/twitterapi-invalid-or-expired-token/48050249#48050249", "title": "TwitterAPI &quot;Invalid or expired token.&quot;", "body": "<p>Your code is fine, but you should manage your app on Twitter and change the permissions to \"Read, Write and Direct Message\".</p>\n"}], "owner": {"reputation": 1, "user_id": 5575864, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6lsZBSXXAPM/AAAAAAAAAAI/AAAAAAAAAkc/JpIX9lecnwY/photo.jpg?sz=128", "display_name": "Lorenzo Brigato", "link": "https://stackoverflow.com/users/5575864/lorenzo-brigato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 236, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514884708, "creation_date": 1493239238, "last_edit_date": 1493239370, "question_id": 43644137, "link": "https://stackoverflow.com/questions/43644137/twitterapi-invalid-or-expired-token", "title": "TwitterAPI &quot;Invalid or expired token.&quot;", "body": "<p>I'm writing a simple script in python to read the members of a Twitter list.</p>\n\n<p>The code:</p>\n\n<pre><code>TW_CONSUMER_KEY = '&lt;consumer key&gt;'\nTW_CONSUMER_SECRET = '&lt;consumer secret&gt;'\nTW_ACCESS_TOKEN = '&lt;access token&gt;'\nTW_ACCESS_TOKEN_SECRET = '&lt;token secret&gt;'\n\ntwapi = TwitterAPI(TW_CONSUMER_KEY, TW_CONSUMER_SECRET, TW_ACCESS_TOKEN, TW_ACCESS_TOKEN_SECRET)\n\ndef list_members(slug, owner_screen_name, limit=1e10):\n    \"\"\"See https://dev.twitter.com/rest/reference/get/lists/members\"\"\"\n    cursor = -1\n    members = []\n    try:\n        response = twapi.request('lists/members', {'slug': slug, 'owner_screen_name': owner_screen_name, 'cursor': cursor, 'count': 5000})\n        if response.status_code in [88, 130, 420, 429]:  # rate limit\n            sys.stderr.write('Error for %s/%s: %s\\nSleeping for 5 minutes...\\n' % (owner_screen_name, slug, response.text))\n            time.sleep(301)\n        elif response.status_code != 200:\n            sys.stderr.write('Skipping bad query: %s\\n' % response.text)\n            return members\n        else:\n            items = [r['screen_name'] for r in response if 'screen_name' in r]\n            return items\n    except Exception as e:\n        sys.stderr.write('Error: %s\\nskipping...\\n' % e)\n        return members\n    return members\n</code></pre>\n\n<p>This code raises the error:</p>\n\n<pre><code>Skipping bad query: {\"errors\":[{\"code\":89,\"message\":\"Invalid or expired token.\"}]}\n</code></pre>\n\n<p>I've renewed the token and consumer keys, even if the documentation says they don't expire, but to no avail.</p>\n\n<p>Can something be done about this issue? Is the TwitterAPI call correct?</p>\n"}, {"tags": ["python", "graph", "graph-tool"], "answers": [{"tags": [], "owner": {"reputation": 999, "user_id": 5313508, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cc324fd94b4258a000a5aa5e79da99a5?s=128&d=identicon&r=PG&f=1", "display_name": "P-M", "link": "https://stackoverflow.com/users/5313508/p-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1494003318, "creation_date": 1494003318, "answer_id": 43810208, "question_id": 43644087, "link": "https://stackoverflow.com/questions/43644087/how-to-get-the-edge-value-of-a-graph-in-graph-tool-library/43810208#43810208", "title": "How to get the edge value of a graph in graph-tool library?", "body": "<p>In general it is useful to know what you have already tried but knowing not much about your actual problem here is one suggestion: the first part could be achieved using <code>find_edge</code>. So if you needed <code>edge_capacity=5</code> your solution could look like something along these lines:</p>\n\n<pre><code>es = gt.find_edge(g,edge_capacity,5)\nfor e in es:\n    v1 = e.source()\n    v2 = e.target()\n</code></pre>\n"}], "owner": {"reputation": 428, "user_id": 2567806, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/72c507addbd6a0bbc3fb594d09ce7e0d?s=128&d=identicon&r=PG", "display_name": "user2567806", "link": "https://stackoverflow.com/users/2567806/user2567806"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "accepted_answer_id": 43810208, "answer_count": 1, "score": 0, "last_activity_date": 1494003318, "creation_date": 1493239011, "question_id": 43644087, "link": "https://stackoverflow.com/questions/43644087/how-to-get-the-edge-value-of-a-graph-in-graph-tool-library", "title": "How to get the edge value of a graph in graph-tool library?", "body": "<p>I am working on a project where I have to manipulate graphs. I am using graph-tool library for which I am new and I code using Python 2.7.</p>\n\n<p>I added a new edge property called <code>edge_capacity</code>. For some reason, I need to know to which edge that value belongs to and the vertices that form that edge.</p>\n\n<p>Thank you for pointing me out to a solution.</p>\n\n<p>Regards.</p>\n"}, {"tags": ["python", "multithreading", "flask", "bottle"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1493239206, "post_id": 43644083, "comment_id": 74336572, "body": "a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would be nice."}, {"owner": {"reputation": 40991, "user_id": 4794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f90cd356f2945b284946d5743467d850?s=128&d=identicon&r=PG", "display_name": "Don Kirkby", "link": "https://stackoverflow.com/users/4794/don-kirkby"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1493239302, "post_id": 43644083, "comment_id": 74336628, "body": "Following @Jean-Fran&#231;oisFabre&#39;s comment, what does <code>app.run()</code> do? That looks like the obvious suspect for a second thread of execution."}, {"owner": {"reputation": 241, "user_id": 6153119, "user_type": "registered", "profile_image": "https://graph.facebook.com/1160063440705271/picture?type=large", "display_name": "Bob Marley and Me", "link": "https://stackoverflow.com/users/6153119/bob-marley-and-me"}, "edited": false, "score": 0, "creation_date": 1493239452, "post_id": 43644083, "comment_id": 74336692, "body": "app.run() just runs some auxillary functions for the main part of the program. It does not have any thread calls though."}, {"owner": {"reputation": 2583, "user_id": 2304129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1720f638a041dee84fb724f880308fb7?s=128&d=identicon&r=PG", "display_name": "eshirazi", "link": "https://stackoverflow.com/users/2304129/eshirazi"}, "edited": false, "score": 0, "creation_date": 1493240846, "post_id": 43644083, "comment_id": 74337461, "body": "Is &#39;app&#39; defined as an object from an external library, (i.e. Flask)? On, Flask for example, app.run with a debug flag may cause the app to load twice. If that&#39;s the case, a possible solution is to set an environment variable (using os.environ) when the thread starts, and quitting if it&#39;s already set so that the thread won&#39;t run twice."}], "answers": [{"comments": [{"owner": {"reputation": 1923, "user_id": 3033441, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5128fcd3a14587660ea0cb737aa54143?s=128&d=identicon&r=PG&f=1", "display_name": "lakshayg", "link": "https://stackoverflow.com/users/3033441/lakshayg"}, "edited": false, "score": 0, "creation_date": 1506520437, "post_id": 43644746, "comment_id": 79855115, "body": "I was facing a similar problem with bottle. Solved this by changing <code>reloader=False</code>."}], "tags": [], "owner": {"reputation": 241, "user_id": 6153119, "user_type": "registered", "profile_image": "https://graph.facebook.com/1160063440705271/picture?type=large", "display_name": "Bob Marley and Me", "link": "https://stackoverflow.com/users/6153119/bob-marley-and-me"}, "is_accepted": false, "score": 13, "last_activity_date": 1493241759, "creation_date": 1493241759, "answer_id": 43644746, "question_id": 43644083, "link": "https://stackoverflow.com/questions/43644083/python-thread-running-twice-when-called-once-in-main/43644746#43644746", "title": "Python thread running twice when called once in main", "body": "<p>Thanks guys, I just changed app.run(debug=True) to app.run(debug=False) so that it didn't run twice</p>\n"}], "owner": {"reputation": 241, "user_id": 6153119, "user_type": "registered", "profile_image": "https://graph.facebook.com/1160063440705271/picture?type=large", "display_name": "Bob Marley and Me", "link": "https://stackoverflow.com/users/6153119/bob-marley-and-me"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4617, "favorite_count": 3, "answer_count": 1, "score": 11, "last_activity_date": 1520029083, "creation_date": 1493238987, "last_edit_date": 1520029083, "question_id": 43644083, "link": "https://stackoverflow.com/questions/43644083/python-thread-running-twice-when-called-once-in-main", "title": "Python thread running twice when called once in main", "body": "<pre><code>if __name__ == '__main__':\n\n    t = threading.Thread(target = authtarget)\n    t.daemon = True\n    t.start()\n    print 'running thread'\n    app.run(debug=True)\n</code></pre>\n\n<p>This main is in our server, where app.run will start the server and will be able to handle requests. The thread we are making is a timer that checks a certain if statement every 5 seconds. However, t.start() will create two threads instead of only one. We've tried changing t.start() to t.run() however when we do that we never get to app.run, which we need to run the server. </p>\n\n<pre><code>def authtarget():\n    sp  = Spotify()\n    db = Database()\n    resultList = []\n    while True:\n        time.sleep(5)\n        sp.timer(204) \n</code></pre>\n\n<p>timer() is a function that we need called every 5 seconds.\nHowever, with the code that we have currently, timer gets called twice instead of once every 5 seconds</p>\n"}, {"tags": ["python", "websocket"], "comments": [{"owner": {"reputation": 157, "user_id": 1535053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46da4b4ffee5b0955afdd9c48354ec9?s=128&d=identicon&r=PG", "display_name": "lkan", "link": "https://stackoverflow.com/users/1535053/lkan"}, "edited": false, "score": 0, "creation_date": 1496327237, "post_id": 43644069, "comment_id": 75625839, "body": "I have the same issue using nodejs client, did you manage to figure out what was wrong?"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7224491, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aJSavKXOrjg/AAAAAAAAAAI/AAAAAAAAACw/_Fqr4d152vQ/photo.jpg?sz=128", "display_name": "Unnati Shah", "link": "https://stackoverflow.com/users/7224491/unnati-shah"}, "is_accepted": false, "score": 0, "last_activity_date": 1497869309, "creation_date": 1497869309, "answer_id": 44628541, "question_id": 43644069, "link": "https://stackoverflow.com/questions/43644069/python-3-websocket-client-run-forever/44628541#44628541", "title": "Python 3 websocket client, run forever", "body": "<p>Create a thread where your block function exists, and in while condition run that thread function and put some sleep time of you want, this way you can have your block data irrespective of its existence, even if it doesn't exist it'll give you blank response.</p>\n\n<p>For e.g, I've done like this,\nThis is my thread function</p>\n\n<pre><code>def mail_data(self):\n    mailbox = getMailBox();\n    while True:\n        notify('notification',mailbox.checkMailBox()) // my email library in buiilt function\n        time.sleep(20)\n</code></pre>\n\n<p>and In my html page, I'm using websocket like this,</p>\n\n<pre><code>ws.onmessage = function (evt) {\n                // on receiving messages through websocket\n                var json_data = evt.data; //this will be got from that function\n};\n</code></pre>\n\n<p>I hope this helps !</p>\n"}], "owner": {"reputation": 93, "user_id": 7317891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e18d6c399426e991dc763c7506f426?s=128&d=identicon&r=PG", "display_name": "Bal&#225;zs Magyar", "link": "https://stackoverflow.com/users/7317891/bal%c3%a1zs-magyar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2344, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497869309, "creation_date": 1493238917, "question_id": 43644069, "link": "https://stackoverflow.com/questions/43644069/python-3-websocket-client-run-forever", "title": "Python 3 websocket client, run forever", "body": "<p>I'm trying to write a Python 3 code, which prints out every new Dogicoin blocks, using <a href=\"https://dogechain.info/api/websocket\" rel=\"nofollow noreferrer\">Dogechain Websocket API</a> and <a href=\"https://pypi.python.org/pypi/websocket-client\" rel=\"nofollow noreferrer\">python websocket client</a>.</p>\n\n<pre><code>import json\nimport ssl\nfrom websocket import create_connection\n\nws = create_connection(\"wss://ws.dogechain.info/inv\", sslopt={\"cert_reqs\": ssl.CERT_NONE})\nws.send(json.dumps({\"op\":\"blocks_sub\"}))\nwhile 1:\n    result = ws.recv()\n    print(result)\n</code></pre>\n\n<p>After a successful subscription, block updates are not coming. All I get is the following output, and nothing else. My goal is to run a function every time when a block arrives. What did I do wrong?</p>\n\n<pre><code>{\"op\": \"status\", \"msg\": \"subscribed, welcome, ...\"}\n{\"op\": \"status\", \"msg\": \"subscribed\"}\n</code></pre>\n"}, {"tags": ["python", "heroku", "flask", "gunicorn"], "comments": [{"owner": {"reputation": 2996, "user_id": 6085135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lHKnG.png?s=128&g=1", "display_name": "brennan", "link": "https://stackoverflow.com/users/6085135/brennan"}, "edited": false, "score": 0, "creation_date": 1493267855, "post_id": 43644038, "comment_id": 74345448, "body": "<code>&#47;tmp</code> files are ephemeral <a href=\"http://stackoverflow.com/a/43132396/6085135\">stackoverflow.com/a/43132396/6085135</a>"}, {"owner": {"reputation": 367, "user_id": 4967943, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/986719114682053/picture?type=large", "display_name": "Lakshay Kalbhor", "link": "https://stackoverflow.com/users/4967943/lakshay-kalbhor"}, "reply_to_user": {"reputation": 2996, "user_id": 6085135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lHKnG.png?s=128&g=1", "display_name": "brennan", "link": "https://stackoverflow.com/users/6085135/brennan"}, "edited": false, "score": 0, "creation_date": 1493346803, "post_id": 43644038, "comment_id": 74388587, "body": "Yes, but I don&#39;t see how it works on a desktop and not on a mobile"}, {"owner": {"reputation": 2996, "user_id": 6085135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lHKnG.png?s=128&g=1", "display_name": "brennan", "link": "https://stackoverflow.com/users/6085135/brennan"}, "edited": false, "score": 0, "creation_date": 1493359607, "post_id": 43644038, "comment_id": 74392248, "body": "Maybe time the tests. With slower download speeds on mobile there&#39;s a better chance of hitting the 30s timeout limit <a href=\"https://devcenter.heroku.com/articles/limits\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/limits</a>"}], "owner": {"reputation": 367, "user_id": 4967943, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/986719114682053/picture?type=large", "display_name": "Lakshay Kalbhor", "link": "https://stackoverflow.com/users/4967943/lakshay-kalbhor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 252, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493265311, "creation_date": 1493238812, "question_id": 43644038, "link": "https://stackoverflow.com/questions/43644038/flask-heroku-file-not-found-error-on-mobiles", "title": "Flask + Heroku : File not found error on mobiles", "body": "<p>I have a site that provides users with a download using <code>send_file</code> in <code>Flask</code>. It seems to work fine with Desktops but fails to send file on mobiles. </p>\n\n<p>These are the logs when it works (From a desktop)</p>\n\n<pre><code>at=info method=POST path=\"/process/\" host=www.musicseize.com request_id=1c7edff0-3ea6-4ab5-88f4-5b072fe4ebd6 fwd=\"196.53.41.11\" dyno=web.1 connect=0ms service=13284ms status=200 bytes=1911 protocol=http\n2017-04-26T20:19:57.284466+00:00 app[web.1]: tmp/[Lyrics] Tears In Heaven -  Eric Clapton.mp3\n2017-04-26T20:19:57.418202+00:00 heroku[router]: at=info method=GET path=\"/download/%5BLyrics%5D%20Tears%20In%20Heaven%20-%20%20Eric%20Clapton.mp3/Tears%20In%20Heaven/?Submit=Download\" host=www.musicseize.com request_id=3b241e25-ca2f-43da-b970-8956e6599ba3 fwd=\"196.53.41.11,66.249.93.201\" dyno=web.1 connect=9ms service=111ms status=200 bytes=6700881 protocol=http\n</code></pre>\n\n<p>These are the logs when it fails on a mobile </p>\n\n<pre><code>2017-04-26T20:19:57.725040+00:00 heroku[router]: at=info method=GET path=\"/download/%5BLyrics%5D%20Tears%20In%20Heaven%20-%20%20Eric%20Clapton.mp3/Tears%20In%20Heaven/?Submit=Download\" host=www.musicseize.com request_id=ec670402-d472-4872-9ed2-7f54c3e41203 fwd=\"196.53.41.11\" dyno=web.1 connect=0ms service=13ms status=500 bytes=456 protocol=http\n2017-04-26T20:19:57.716253+00:00 app[web.1]: tmp/[Lyrics] Tears In Heaven -  Eric Clapton.mp3\n2017-04-26T20:19:57.722196+00:00 app[web.1]: [2017-04-26 20:19:57,717] ERROR in app: Exception on /download/[Lyrics] Tears In Heaven -  Eric Clapton.mp3/Tears In Heaven/ [GET]\n2017-04-26T20:19:57.722198+00:00 app[web.1]: Traceback (most recent call last):\n2017-04-26T20:19:57.722199+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/flask/app.py\", line 1982, in wsgi_app\n2017-04-26T20:19:57.722199+00:00 app[web.1]:     response = self.full_dispatch_request()\n2017-04-26T20:19:57.722200+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/flask/app.py\", line 1614, in full_dispatch_request\n2017-04-26T20:19:57.722200+00:00 app[web.1]:     rv = self.handle_user_exception(e)\n2017-04-26T20:19:57.722201+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/flask/app.py\", line 1517, in handle_user_exception\n2017-04-26T20:19:57.722201+00:00 app[web.1]:     reraise(exc_type, exc_value, tb)\n2017-04-26T20:19:57.722202+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/flask/_compat.py\", line 33, in reraise\n2017-04-26T20:19:57.722202+00:00 app[web.1]:     raise value\n2017-04-26T20:19:57.722203+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/flask/app.py\", line 1612, in full_dispatch_request\n2017-04-26T20:19:57.722203+00:00 app[web.1]:     rv = self.dispatch_request()\n2017-04-26T20:19:57.722204+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/flask/app.py\", line 1598, in dispatch_request\n2017-04-26T20:19:57.722204+00:00 app[web.1]:     return self.view_functions[rule.endpoint](**req.view_args)\n2017-04-26T20:19:57.722205+00:00 app[web.1]:   File \"/app/deploy.py\", line 146, in download\n2017-04-26T20:19:57.722205+00:00 app[web.1]:     return send_file(os.path.join('tmp', path), as_attachment=True, attachment_filename='{}.{}'.format(title, EXT))\n2017-04-26T20:19:57.722206+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/flask/helpers.py\", line 549, in send_file\n2017-04-26T20:19:57.722206+00:00 app[web.1]:     file = open(filename, 'rb')\n2017-04-26T20:19:57.722240+00:00 app[web.1]: FileNotFoundError: [Errno 2] No such file or directory: '/app/tmp/[Lyrics] Tears In Heaven -  Eric Clapton.mp3'\n2017-04-26T20:19:57.722346+00:00 app[web.1]: Exception on /download/[Lyrics] Tears In Heaven -  Eric Clapton.mp3/Tears In Heaven/ [GET]\n2017-04-26T20:19:57.722346+00:00 app[web.1]: Traceback (most recent call last):\n2017-04-26T20:19:57.722347+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/flask/app.py\", line 1982, in wsgi_app\n2017-04-26T20:19:57.722347+00:00 app[web.1]:     response = self.full_dispatch_request()\n2017-04-26T20:19:57.722348+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/flask/app.py\", line 1614, in full_dispatch_request\n2017-04-26T20:19:57.722348+00:00 app[web.1]:     rv = self.handle_user_exception(e)\n2017-04-26T20:19:57.722348+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/flask/app.py\", line 1517, in handle_user_exception\n2017-04-26T20:19:57.722349+00:00 app[web.1]:     reraise(exc_type, exc_value, tb)\n2017-04-26T20:19:57.722349+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/flask/_compat.py\", line 33, in reraise\n2017-04-26T20:19:57.722349+00:00 app[web.1]:     raise value\n2017-04-26T20:19:57.722350+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/flask/app.py\", line 1612, in full_dispatch_request\n2017-04-26T20:19:57.722350+00:00 app[web.1]:     rv = self.dispatch_request()\n2017-04-26T20:19:57.722351+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/flask/app.py\", line 1598, in dispatch_request\n2017-04-26T20:19:57.722351+00:00 app[web.1]:     return self.view_functions[rule.endpoint](**req.view_args)\n2017-04-26T20:19:57.722352+00:00 app[web.1]:   File \"/app/deploy.py\", line 146, in download\n2017-04-26T20:19:57.722352+00:00 app[web.1]:     return send_file(os.path.join('tmp', path), as_attachment=True, attachment_filename='{}.{}'.format(title, EXT))\n2017-04-26T20:19:57.722353+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/flask/helpers.py\", line 549, in send_file\n2017-04-26T20:19:57.722356+00:00 app[web.1]:     file = open(filename, 'rb')\n2017-04-26T20:19:57.722358+00:00 app[web.1]: FileNotFoundError: [Errno 2] No such file or directory: '/app/tmp/[Lyrics] Tears In Heaven -  Eric Clapton.mp3'\n</code></pre>\n\n<p>I feel that somehow Flask changes the path for download to <code>FileNotFoundError: [Errno 2] No such file or directory: '/app/tmp/[Lyrics] Tears In Heaven -  Eric Clapton.mp3'</code></p>\n\n<p>The file is actually stored at <code>tmp/[Lyrics] Tears In Heaven -  Eric Clapton.mp3</code></p>\n"}, {"tags": ["python", "cmd", "terminal", "subprocess"], "comments": [{"owner": {"reputation": 930, "user_id": 7800665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cidmm.jpg?s=128&g=1", "display_name": "MrJLP", "link": "https://stackoverflow.com/users/7800665/mrjlp"}, "edited": false, "score": 0, "creation_date": 1493238930, "post_id": 43644034, "comment_id": 74336421, "body": "What happens? What are the errors?"}, {"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 1, "creation_date": 1493238981, "post_id": 43644034, "comment_id": 74336457, "body": "What is the question?"}, {"owner": {"reputation": 28755, "user_id": 5047996, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/la3kD.png?s=128&g=1", "display_name": "aschipfl", "link": "https://stackoverflow.com/users/5047996/aschipfl"}, "edited": false, "score": 0, "creation_date": 1493246295, "post_id": 43644034, "comment_id": 74339717, "body": "How is this related to tag <a href=\"https://stackoverflow.com/questions/tagged/cmd\">cmd</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 5639164, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2c489361da2726a9d6b451f443cdac74?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Bloom", "link": "https://stackoverflow.com/users/5639164/josh-bloom"}, "edited": false, "score": 0, "creation_date": 1493240576, "post_id": 43644159, "comment_id": 74337319, "body": "I think this works with, shell = True at the end. Other wise unknow directory is thrown. However nothing happens... but I think you solved it for now thanks Jean"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 135, "user_id": 5639164, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2c489361da2726a9d6b451f443cdac74?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Bloom", "link": "https://stackoverflow.com/users/5639164/josh-bloom"}, "edited": false, "score": 0, "creation_date": 1493241975, "post_id": 43644159, "comment_id": 74337997, "body": "okay, <code>shell=True</code> it is, when the command is an alias or a function (or a built-in). Glad it worked."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 4, "last_activity_date": 1493239327, "creation_date": 1493239327, "answer_id": 43644159, "question_id": 43644034, "link": "https://stackoverflow.com/questions/43644034/python-subprocess-call-with-cwd-not-working/43644159#43644159", "title": "Python subprocess.call with cwd not working", "body": "<p>First, argument line must be a string (with spaces, optionally) or a list of the arguments, but not the command line as sole argument.</p>\n\n<p>Then, current working directory must be a string, not a list.</p>\n\n<p>Try this:</p>\n\n<pre><code>subprocess.call(['cordova-test','android','tests','--app','platforms/android/build/outputs/apk/android-debug.apk','--device-name=emulator-5554','--no-compile'],\n       cwd = '/Users/User/Documents/dev/engineerappcopy')\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 5639164, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2c489361da2726a9d6b451f443cdac74?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Bloom", "link": "https://stackoverflow.com/users/5639164/josh-bloom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8921, "favorite_count": 0, "accepted_answer_id": 43644159, "answer_count": 1, "score": 5, "last_activity_date": 1493239327, "creation_date": 1493238804, "question_id": 43644034, "link": "https://stackoverflow.com/questions/43644034/python-subprocess-call-with-cwd-not-working", "title": "Python subprocess.call with cwd not working", "body": "<p>I have tried various things, none work.\nHere are my attempts:</p>\n\n<pre><code>subprocess.call(['cordova-test android tests --app platforms/android/build/outputs/apk/android-debug.apk --device-name=emulator-5554 --no-compile'],\n      cwd = ['/Users/User/Documents/dev/engineerappcopy'], shell = True)\n</code></pre>\n\n<p>next</p>\n\n<pre><code>subprocess.call(['cordova-test android tests --app platforms/android/build/outputs/apk/android-debug.apk --device-name=emulator-5554 --no-compile'],\n       cwd = shlex.split(['/Users/User/Documents/dev/engineerappcopy'])\n</code></pre>\n\n<p>next  </p>\n\n<pre><code>subprocess.call(['cordova-test android tests --app platforms/android/build/outputs/apk/android-debug.apk --device-name=emulator-5554 --no-compile'],\n       cwd = ['/Users/User/Documents/dev/engineerappcopy'])\n</code></pre>\n"}, {"tags": ["python", "firebase", "firebase-realtime-database"], "answers": [{"tags": [], "owner": {"reputation": 1437, "user_id": 7076502, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh4.googleusercontent.com/-vHkJ3UOLRJY/AAAAAAAAAAI/AAAAAAAAACc/jb9uvNFUSKk/photo.jpg?sz=128", "display_name": "Quan Vuong", "link": "https://stackoverflow.com/users/7076502/quan-vuong"}, "is_accepted": false, "score": 0, "last_activity_date": 1493239270, "creation_date": 1493239270, "answer_id": 43644148, "question_id": 43644009, "link": "https://stackoverflow.com/questions/43644009/populate-firebase-database-with-python/43644148#43644148", "title": "Populate Firebase Database With Python", "body": "<p>Firebase recently releases its admin SDK for python. </p>\n\n<p>You should definitely use it since it's officially supported. Here's the link to the list of available sdk.</p>\n\n<p><a href=\"https://firebase.google.com/docs/admin/setup\" rel=\"nofollow noreferrer\">https://firebase.google.com/docs/admin/setup</a></p>\n"}, {"tags": [], "owner": {"reputation": 1486, "user_id": 6637004, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/84f0334c76323d612a5fefc5b1d2deef?s=128&d=identicon&r=PG&f=1", "display_name": "maddie", "link": "https://stackoverflow.com/users/6637004/maddie"}, "is_accepted": false, "score": 0, "last_activity_date": 1493239522, "creation_date": 1493239522, "answer_id": 43644206, "question_id": 43644009, "link": "https://stackoverflow.com/questions/43644009/populate-firebase-database-with-python/43644206#43644206", "title": "Populate Firebase Database With Python", "body": "<p>It's not firebase, and not necessarily a solution, but amazon's relational database is an option perhaps: <a href=\"http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create-deploy-python-rds.html\" rel=\"nofollow noreferrer\">http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create-deploy-python-rds.html</a></p>\n"}], "owner": {"reputation": 1486, "user_id": 6637004, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/84f0334c76323d612a5fefc5b1d2deef?s=128&d=identicon&r=PG&f=1", "display_name": "maddie", "link": "https://stackoverflow.com/users/6637004/maddie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 772, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493239522, "creation_date": 1493238728, "question_id": 43644009, "link": "https://stackoverflow.com/questions/43644009/populate-firebase-database-with-python", "title": "Populate Firebase Database With Python", "body": "<p>Is there a way to populate my firebase database from within python code? Or is there not, because python isn't used to write web/iphone/or android apps? </p>\n\n<p>My code is currently this:</p>\n\n<pre><code>  page = requests.get('http://www.eatlowcarbon.org/food-scores')\n  from bs4 import BeautifulSoup\n  soup = BeautifulSoup(page.content, 'html.parser')\n\n  foodDict = {}\n  aTag = soup.findAll('a', class_=\"food\")\n\n  for tag in aTag:\n          name = tag.find(\"div\", {'class':\"name\"}).text\n\n          score = tag.find(\"div\", {'class':\"score\"}).text\n          foodDict[name] = score\n</code></pre>\n\n<p>And instead of putting the information in a dictionary, I'd like to put it in my firebase database. </p>\n"}, {"tags": ["python", "pandas", "group-by", "duplicates"], "answers": [{"comments": [{"owner": {"reputation": 921, "user_id": 7170271, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5vICV.jpg?s=128&g=1", "display_name": "Yale Newman", "link": "https://stackoverflow.com/users/7170271/yale-newman"}, "edited": false, "score": 0, "creation_date": 1493244340, "post_id": 43644204, "comment_id": 74339002, "body": "I should have been more specific, the rows with unique data will always be changing and will not be the same for all rows. I&#39;ll add more to the sample to make it more clear."}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 1, "last_activity_date": 1493239506, "creation_date": 1493239506, "answer_id": 43644204, "question_id": 43643996, "link": "https://stackoverflow.com/questions/43643996/identify-unique-values-within-pandas-dataframe-rows-that-share-a-common-id-numbe/43644204#43644204", "title": "Identify unique values within pandas dataframe rows that share a common id number", "body": "<p>Try this:</p>\n\n<pre><code>In [68]: cols = ['Cost','IN STOCK','Inventory Number','Maximum Price','Minimum Price']\n\nIn [69]: df[cols].drop_duplicates(subset=['Inventory Number'])\nOut[69]:\n   Cost  IN STOCK Inventory Number  Maximum Price  Minimum Price\n0  18.5        10           100566           30.0          23.96\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 921, "user_id": 7170271, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5vICV.jpg?s=128&g=1", "display_name": "Yale Newman", "link": "https://stackoverflow.com/users/7170271/yale-newman"}, "edited": false, "score": 0, "creation_date": 1493246086, "post_id": 43645063, "comment_id": 74339649, "body": "I&#39;ve edited the question to make it more clear. I need something to evaluate where data has effectively changed, as the way the file is generated is appending an old file to a new file. I want a final file that is as small as possible with only values where data has changed."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 921, "user_id": 7170271, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5vICV.jpg?s=128&g=1", "display_name": "Yale Newman", "link": "https://stackoverflow.com/users/7170271/yale-newman"}, "edited": false, "score": 0, "creation_date": 1493246192, "post_id": 43645063, "comment_id": 74339687, "body": "@YaleNewman Have you tried this code?  I think it does what you described."}, {"owner": {"reputation": 921, "user_id": 7170271, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5vICV.jpg?s=128&g=1", "display_name": "Yale Newman", "link": "https://stackoverflow.com/users/7170271/yale-newman"}, "edited": false, "score": 0, "creation_date": 1493246909, "post_id": 43645063, "comment_id": 74339927, "body": "My concern is that with hard coding a list of column names, it is leaving out the possibility of the columns that are not included to not be evaluated. Also, will this drop an entire column if there are no unique values in that column? I can easily change cols to equal all possible columns, so if this code meets the 2nd criteria, it will do what i need. I&#39;ll play around with it on my end. Thanks:)"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 921, "user_id": 7170271, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5vICV.jpg?s=128&g=1", "display_name": "Yale Newman", "link": "https://stackoverflow.com/users/7170271/yale-newman"}, "edited": false, "score": 0, "creation_date": 1493247028, "post_id": 43645063, "comment_id": 74339970, "body": "@YaleNewman are you saying you want only the cells that have changed?"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 3, "last_activity_date": 1493247482, "last_edit_date": 1493247482, "creation_date": 1493243187, "answer_id": 43645063, "question_id": 43643996, "link": "https://stackoverflow.com/questions/43643996/identify-unique-values-within-pandas-dataframe-rows-that-share-a-common-id-numbe/43645063#43645063", "title": "Identify unique values within pandas dataframe rows that share a common id number", "body": "<pre><code>icol = 'Inventory Number'\nd0 = df.drop_duplicates(keep=False)\ni = d0.groupby(icol).cumcount()\n\nd1 = d0.set_index([icol, i]).unstack(icol).T\n\nd1[1][d1[1] != d1[0]].unstack(0)\n\n                   Cost IN STOCK Maximum Price Minimum Price\nInventory Number                                            \n1                  19.5       15            35         25.96\n2                  None        1         45.12         17.54\n3                 18.19     None          None         28.29\n</code></pre>\n"}], "owner": {"reputation": 921, "user_id": 7170271, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5vICV.jpg?s=128&g=1", "display_name": "Yale Newman", "link": "https://stackoverflow.com/users/7170271/yale-newman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 43645063, "answer_count": 2, "score": 1, "last_activity_date": 1493247482, "creation_date": 1493238679, "last_edit_date": 1493245955, "question_id": 43643996, "link": "https://stackoverflow.com/questions/43643996/identify-unique-values-within-pandas-dataframe-rows-that-share-a-common-id-numbe", "title": "Identify unique values within pandas dataframe rows that share a common id number", "body": "<p>Here is a sample df:</p>\n\n<pre><code>data = {\"Brand\":{\"0\":\"BrandA\",\"1\":\"BrandA\",\"2\":\"BrandB\",\"3\":\"BrandB\",\"4\":\"BrandC\",\"5\":\"BrandC\"},\"Cost\":{\"0\":18.5,\"1\":19.5,\"2\":6,\"3\":6,\"4\":17.69,\"5\":18.19},\"IN STOCK\":{\"0\":10,\"1\":15,\"2\":5,\"3\":1,\"4\":12,\"5\":12},\"Inventory Number\":{\"0\":1,\"1\":1,\"2\":2,\"3\":2,\"4\":3,\"5\":3},\"Labels\":{\"0\":\"Black\",\"1\":\"Black\",\"2\":\"White\",\"3\":\"White\",\"4\":\"Blue\",\"5\":\"Blue\"},\"Maximum Price\":{\"0\":30.0,\"1\":35.0,\"2\":50,\"3\":45.12,\"4\":76.78,\"5\":76.78},\"Minimum Price\":{\"0\":23.96,\"1\":25.96,\"2\":12.12,\"3\":17.54,\"4\":33.12,\"5\":28.29},\"Product Name\":{\"0\":\"Product A\",\"1\":\"Product A\",\"2\":\"ProductB\",\"3\":\"ProductB\",\"4\":\"ProductC\",\"5\":\"ProductC\"}}\ndf = pd.DataFrame(data=data)\n</code></pre>\n\n<p>My actual data set is much larger, but maintains the same pattern of there being 2 rows that share the same Inventory Number throughout. </p>\n\n<p>My goal is to create a new data frame that contains only the inventory numbers where a cell value is not duplicated across both rows, and for those inventory numbers, only contains the data from the row with the lower index that is different from the other row. </p>\n\n<p>For this example the resulting data frame would need to look like: </p>\n\n<pre><code>data = {\"Inventory Number\":{\"0\":1,\"1\":2,\"2\":3},\"Cost\":{\"0\":18.50,\"1\":\"\",\"2\":17.69},\"IN STOCK\":{\"0\":10,\"1\":5,\"2\":\"\"},\"Maximum Price\":{\"0\":30,\"1\":50,\"2\":\"\"},\"Minimum Price\":{\"0\":23.96,\"1\":12.12,\"2\":33.12}}\ndf = pd.DataFrame(data=data)\n</code></pre>\n\n<p>The next time this would run, perhaps nothing changed in the \"Maximum Price\", so that column would need to not be included at all. </p>\n\n<p>I was hoping someone would have a clean solution using groupby, but if not, i imagine the solution would include dropping all duplicates. then looping through all of the remaining inventory numbers, evaluating each column for duplicates. </p>\n"}, {"tags": ["python", "django", "loops", "try-except"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1493238987, "post_id": 43643990, "comment_id": 74336465, "body": "For one thing, <a href=\"http://blog.codekills.net/2011/09/29/the-evils-of--except--/\" rel=\"nofollow noreferrer\"><i>don&#39;t use bare <code>except</code></i></a> - be specific about what could go wrong. For another, if you want to suppress errors for a line and you&#39;re using Python 3.4+, see <a href=\"https://docs.python.org/3/library/contextlib.html#contextlib.suppress\" rel=\"nofollow noreferrer\"><code>contextlib.suppress</code></a>. Also, aligning whitespace like that is not a great idea."}, {"owner": {"reputation": 15853, "user_id": 1925257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yY7YW.jpg?s=128&g=1", "display_name": "xyres", "link": "https://stackoverflow.com/users/1925257/xyres"}, "edited": false, "score": 0, "creation_date": 1493239291, "post_id": 43643990, "comment_id": 74336621, "body": "The <i>unique error</i> is raised when you try to <b>save</b> a duplicate object. So, no need for all those <code>try...except</code> clauses. Just move <code>newobj.save()</code> inside a <code>try...except</code> clause."}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 2397808, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/586de15d562fc045ffc75f12f7427424?s=128&d=identicon&r=PG", "display_name": "Felix Brousseau", "link": "https://stackoverflow.com/users/2397808/felix-brousseau"}, "is_accepted": false, "score": 1, "last_activity_date": 1493242945, "creation_date": 1493242945, "answer_id": 43645002, "question_id": 43643990, "link": "https://stackoverflow.com/questions/43643990/continue-after-try-has-failed/43645002#43645002", "title": "Continue after Try has failed", "body": "<p>Django is smart: like stated in one of the comments, it's only gonna raise an error when the <em>save()</em> method is called. Until then, <code>Article</code> is a normal Python object. What you should would look more like this :</p>\n\n<pre><code>from psycopg2 import IntegrityError # this is the actual error raised by psycopg2 (the postgres python driver)\n\nfrom article.models import Articles\n\nfor item in all_item_tags:\n    try:\n        new_article = Articles(\n            pub_date=item.contents[9].contents[0],        \n            title=item.contents[1].contents[0],\n            description=item.contents[5].contents[0],\n            image=get_the_picture(item.contents[7])\n\n        new_article.save() # this is where the actual save happens\n    except IntegrityError:\n        # Handle the exception here\n</code></pre>\n\n<p>Another (more advanced) option is to override the <code>save()</code> method and put your logic there.</p>\n\n<p>That said, you could also use <code>get_or_created</code> to do that. It looks like this:</p>\n\n<pre><code>for item in all_item_tags:\n    # this methods returns a boolean True of False if the object is already in the DB.\n    # use your unique identifier here\n    article, created = Article.objects.get_or_create(unique_id=...)\n\n    # You can then do a classic if-else without handling any errors...\n    if created: \n        # Great! The object a\n    else:\n        # the object exist, do something with it or not...\n</code></pre>\n\n<p>However, there are a few things I would suggest. My feeling is that you are diving into Django without really knowing Python. Django is a big beast that makes a lot of things really convenient (almost <em>magical</em>) but it's still Python. If you dive too deep and something breaks, it will be very hard for you to know what's going on. I would suggest furthering your knowledge of Python (it's an amazing language so it's gonna be fun) and then go back to Django or maybe start with a smaller framework like Flask which does less magic! For now, here's a link to the official doc on error handling so you can learn a bit more about it. Also, Django has really good <a href=\"https://docs.djangoproject.com/en/1.11/ref/models/\" rel=\"nofollow noreferrer\">doc</a> so I would first look there if a problem arises.</p>\n\n<p>Cheers and happy coding!</p>\n"}], "owner": {"reputation": 1, "user_id": 6776284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Km3mW.jpg?s=128&g=1", "display_name": "Lil_Scuba", "link": "https://stackoverflow.com/users/6776284/lil-scuba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1493242945, "creation_date": 1493238641, "question_id": 43643990, "link": "https://stackoverflow.com/questions/43643990/continue-after-try-has-failed", "title": "Continue after Try has failed", "body": "<p>I have a function:</p>\n\n<pre><code>def save_to_models(all_item_tags):\n    from article.models import Articles    \n    for item in all_item_tags:\n        newobj = Articles()\n        try:\n            newobj.pub_date    =item.contents[9].contents[0]\n        except:\n            continue\n        try:\n            newobj.title       =item.contents[1].contents[0]\n        except:\n            continue    \n        try:   \n            newobj.description =item.contents[5].contents[0]\n        except:\n            continue\n        try:\n            newobj.image       =get_the_picture(item.contents[7])\n        except:\n            continue\n\n        newobj.save()\n</code></pre>\n\n<p>each model has <code>unique=True</code> so I'm using try, except to skip over the error I get when its trying to input a data that's already in the database. How can I condense this code? I feel like its a lot of unnecessary lines of code.</p>\n"}, {"tags": ["python", "macos", "python-2.7", "sockets"], "comments": [{"owner": {"reputation": 13885, "user_id": 7811673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc232c9c0c9748fdd3dec0d5b816fb7?s=128&d=identicon&r=PG&f=1", "display_name": "t.m.adam", "link": "https://stackoverflow.com/users/7811673/t-m-adam"}, "edited": false, "score": 0, "creation_date": 1493239154, "post_id": 43643876, "comment_id": 74336550, "body": "It works fine for me (  python 2.7 , windows ) , can you include the traceback ?"}, {"owner": {"reputation": 3198, "user_id": 1636521, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/2116626f42d8a2f87ee420ecefb1ec0c?s=128&d=identicon&r=PG", "display_name": "flashburn", "link": "https://stackoverflow.com/users/1636521/flashburn"}, "reply_to_user": {"reputation": 13885, "user_id": 7811673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc232c9c0c9748fdd3dec0d5b816fb7?s=128&d=identicon&r=PG&f=1", "display_name": "t.m.adam", "link": "https://stackoverflow.com/users/7811673/t-m-adam"}, "edited": false, "score": 0, "creation_date": 1493241373, "post_id": 43643876, "comment_id": 74337700, "body": "@t.m.adam I should have mentioned that it does work in Windows, but I&#39;m running my code on a Mac."}, {"owner": {"reputation": 13885, "user_id": 7811673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc232c9c0c9748fdd3dec0d5b816fb7?s=128&d=identicon&r=PG&f=1", "display_name": "t.m.adam", "link": "https://stackoverflow.com/users/7811673/t-m-adam"}, "edited": false, "score": 0, "creation_date": 1493242491, "post_id": 43643876, "comment_id": 74338246, "body": "So it&#39;s an os thing apparently . Have you tried linux ?"}, {"owner": {"reputation": 3198, "user_id": 1636521, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/2116626f42d8a2f87ee420ecefb1ec0c?s=128&d=identicon&r=PG", "display_name": "flashburn", "link": "https://stackoverflow.com/users/1636521/flashburn"}, "reply_to_user": {"reputation": 13885, "user_id": 7811673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc232c9c0c9748fdd3dec0d5b816fb7?s=128&d=identicon&r=PG&f=1", "display_name": "t.m.adam", "link": "https://stackoverflow.com/users/7811673/t-m-adam"}, "edited": false, "score": 0, "creation_date": 1493249501, "post_id": 43643876, "comment_id": 74340751, "body": "@t.m.adam Same as OSX. Windows implements sockets differently. It makes sense that Linux and OSX match."}, {"owner": {"reputation": 13885, "user_id": 7811673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc232c9c0c9748fdd3dec0d5b816fb7?s=128&d=identicon&r=PG&f=1", "display_name": "t.m.adam", "link": "https://stackoverflow.com/users/7811673/t-m-adam"}, "edited": false, "score": 0, "creation_date": 1493251931, "post_id": 43643876, "comment_id": 74341382, "body": "This is beyond my knowledge, i tested it on debian and it works ok. On both win and linux, i tried to connect on localhost:80  with apache on / off and it works as expected in any case.. Can you post the full code and traceback ?"}], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 5404637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bbb8fb798456aa405aba62e2df09b0f?s=128&d=identicon&r=PG", "display_name": "Michael_Zhang", "link": "https://stackoverflow.com/users/5404637/michael-zhang"}, "edited": false, "score": 0, "creation_date": 1574117092, "post_id": 43651584, "comment_id": 104109582, "body": "Thank you! It takes me a hour to debug!"}], "tags": [], "owner": {"reputation": 5662, "user_id": 5781248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712de4f2f811d1a400d3311c9cdd5836?s=128&d=identicon&r=PG&f=1", "display_name": "J.J. Hakala", "link": "https://stackoverflow.com/users/5781248/j-j-hakala"}, "is_accepted": true, "score": 5, "last_activity_date": 1493279071, "creation_date": 1493279071, "answer_id": 43651584, "question_id": 43643876, "link": "https://stackoverflow.com/questions/43643876/python-socket-invalid-argument/43651584#43651584", "title": "python socket, invalid argument", "body": "<p>From <code>connect</code> man page that comes with Linux (debian / Jessie)</p>\n\n<blockquote>\n  <p>If <code>connect()</code> fails, consider the state of the socket as unspecified.\n  Portable applications should close the socket and create a new one  for\n  reconnecting.</p>\n</blockquote>\n\n<p>Based on this, the invalid argument error message refers to the given file descriptor that corresponds to a socket that not in usable state.</p>\n"}], "owner": {"reputation": 3198, "user_id": 1636521, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/2116626f42d8a2f87ee420ecefb1ec0c?s=128&d=identicon&r=PG", "display_name": "flashburn", "link": "https://stackoverflow.com/users/1636521/flashburn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2329, "favorite_count": 0, "accepted_answer_id": 43651584, "answer_count": 1, "score": 2, "last_activity_date": 1493279071, "creation_date": 1493238259, "last_edit_date": 1493241485, "question_id": 43643876, "link": "https://stackoverflow.com/questions/43643876/python-socket-invalid-argument", "title": "python socket, invalid argument", "body": "<p>I'm working with an <a href=\"https://www.controlanything.com/Relay/Device/R130PL_ETHERNET\" rel=\"nofollow noreferrer\">ethernet enabled relay</a>. Trying to communicate with it with python over a socket. I'm seeing very interesting behavior and I don't think it is device related. Below is the code that fails. The error I'm getting is <code>[Errno 22] Invalid argument</code></p>\n\n<pre><code>    self.ip_addr = &lt;some address&gt;\n    self.port = &lt;some port&gt;\n    self.max_attempt_cnt = &lt;some count&gt;\n    self.sleep_interval = &lt;some interval&gt;\n    try_cnt=0\n    skt = socket.socket(socket.AF_INET, socket.SOCK_STREAM)        \n    while True:\n        try:\n            skt.connect((self.ip_addr, int(self.port)))\n            break\n        except socket.error as e:\n            try_cnt+=1\n            if (self.max_attempt_cnt &gt; 0) and (try_cnt &gt; self.max_attempt_cnt):\n                msg = 'Maximum connection attempt count of {} is exceeded'.format(\n                        self.max_attempt_cnt\n                        )\n                raise ConnectionAttemptCountExceededError(msg)\n            time.sleep(self.sleep_interval)\n\n    &lt;do stuff 0&gt;\n    &lt;do stuff 1&gt;\n    &lt;do stuff 2&gt;\n</code></pre>\n\n<p>If I move my defition of <code>skt</code> inside the <code>while</code> loop, i.e like the following:</p>\n\n<pre><code>    while True:\n        try:\n            skt = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n            skt.connect((self.ip_addr, int(self.port)))\n            break\n</code></pre>\n\n<p>The issue disappears.</p>\n\n<p>I know there is a different way to write this code but that is not what I'm asking. </p>\n\n<p>My question is why the code is failing when the socket is created outside the loop and why it works when the socket is created inside the loop?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I realized that I didn't mention that this code does work on <code>Windows</code>, but it doesn't work on a <code>Mac</code> machine, which is what I'm using.</p>\n"}, {"tags": ["python", "pygame"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1493238341, "post_id": 43643873, "comment_id": 74336120, "body": "Fix your indentation to reflect the code you are actually running. The above would give a <code>SyntaxError</code>"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1493238371, "post_id": 43643873, "comment_id": 74336137, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem.   We should be able to paste your given code into a text file and reproduce the problem."}, {"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 2, "creation_date": 1493238424, "post_id": 43643873, "comment_id": 74336171, "body": "What is <code>score</code> and where did it come from?  Also, why are you trying to perform an inequality on <i>strings</i>?"}, {"owner": {"reputation": 19, "user_id": 6119773, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/22bf6201115564d10ea0bfa51d65ab7a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Plue", "link": "https://stackoverflow.com/users/6119773/alex-plue"}, "reply_to_user": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1493238511, "post_id": 43643873, "comment_id": 74336213, "body": "@Makoto Score is a number that gets auto increased. The code worked not it does not."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 6119773, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/22bf6201115564d10ea0bfa51d65ab7a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Plue", "link": "https://stackoverflow.com/users/6119773/alex-plue"}, "edited": false, "score": 0, "creation_date": 1493238703, "post_id": 43643980, "comment_id": 74336305, "body": "before i came here i tried with hs, hss,  hsss and hs2 both made no difference."}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "reply_to_user": {"reputation": 19, "user_id": 6119773, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/22bf6201115564d10ea0bfa51d65ab7a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Plue", "link": "https://stackoverflow.com/users/6119773/alex-plue"}, "edited": false, "score": 1, "creation_date": 1493238752, "post_id": 43643980, "comment_id": 74336325, "body": "Of course not. Trying things at random is no way to solve a problem."}, {"owner": {"reputation": 19, "user_id": 6119773, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/22bf6201115564d10ea0bfa51d65ab7a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Plue", "link": "https://stackoverflow.com/users/6119773/alex-plue"}, "edited": false, "score": 0, "creation_date": 1493240164, "post_id": 43643980, "comment_id": 74337075, "body": "I tried that and it didn&#39;t work. I have been playing with it for 20 mins now and still nothing."}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "reply_to_user": {"reputation": 19, "user_id": 6119773, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/22bf6201115564d10ea0bfa51d65ab7a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Plue", "link": "https://stackoverflow.com/users/6119773/alex-plue"}, "edited": false, "score": 0, "creation_date": 1493242171, "post_id": 43643980, "comment_id": 74338096, "body": "Stop playing and focus on understanding your code. Run each line in the interpreter and inspect the resulting variables. Where is the current high score? If you don&#39;t know, your first problem is in the lines you&#39;ve already written (or been given)."}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "reply_to_user": {"reputation": 19, "user_id": 6119773, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/22bf6201115564d10ea0bfa51d65ab7a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Plue", "link": "https://stackoverflow.com/users/6119773/alex-plue"}, "edited": false, "score": 0, "creation_date": 1493242251, "post_id": 43643980, "comment_id": 74338138, "body": "Oh and use more specific names than <code>hssssss</code>. Every variable in your program has <i>something</i> to do with high scores; but what? Better names will help you understand your program."}], "tags": [], "owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "is_accepted": false, "score": 3, "last_activity_date": 1493238727, "last_edit_date": 1493238727, "creation_date": 1493238614, "answer_id": 43643980, "question_id": 43643873, "link": "https://stackoverflow.com/questions/43643873/if-statement-being-disregarded-python/43643980#43643980", "title": "If statement being disregarded. Python", "body": "<p>Your main mistake is that you are comparing the current score with a file object, <code>hs2</code>. Try printing the two strings you compare and the problem will be obvious.</p>\n\n<p>As for the solution: First, find the previous high score. Ensure that both your score (<code>score</code>) and the previous high score are compared as integers. Otherwise, \"2\" compares after \"10\", \"11\" etc. when sorted alphabetically as strings.</p>\n"}], "owner": {"reputation": 19, "user_id": 6119773, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/22bf6201115564d10ea0bfa51d65ab7a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Plue", "link": "https://stackoverflow.com/users/6119773/alex-plue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1493238727, "creation_date": 1493238244, "last_edit_date": 1493238398, "question_id": 43643873, "link": "https://stackoverflow.com/questions/43643873/if-statement-being-disregarded-python", "title": "If statement being disregarded. Python", "body": "<p>So I am trying to make this high score system, where if your score is greater than a score saved in a text file it will override that text file and replace the previous score holders score with yours.</p>\n\n<p>One problem is that no matter what your score is it just simply overrides it.</p>\n\n<pre><code>hs = open(\"score.txt\")\nhss = [line for line in hs.readlines()]\nhsss = hs.readlines()\nhs.close()\n\nwhile True:\n    hs2 = open('score.txt', 'w')\n    for line in hss[1:]:\n        hs2.write(line)\n    if str(score) &lt;= str(hs2):    \n        hs2.write(str(score))\n</code></pre>\n\n<p>Any sugestions too fix?</p>\n"}, {"tags": ["java", "python", "hive"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1493238709, "post_id": 43643867, "comment_id": 74336308, "body": "You can register Python functions as Hive UDF&#39;s"}, {"owner": {"reputation": 30861, "user_id": 6336479, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-7ttJnI3nmS4/AAAAAAAAAAI/AAAAAAAAJnE/jcRD1UDdrzE/photo.jpg?sz=128", "display_name": "David \u05d3\u05d5\u05d3\u05d5 Markovitz", "link": "https://stackoverflow.com/users/6336479/david-%d7%93%d7%95%d7%93%d7%95-markovitz"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1493241070, "post_id": 43643867, "comment_id": 74337572, "body": "@cricket_007 - I wish, but I assume you are talking about scripts used in a TRANSFORM clause, not UDF."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "reply_to_user": {"reputation": 30861, "user_id": 6336479, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-7ttJnI3nmS4/AAAAAAAAAAI/AAAAAAAAJnE/jcRD1UDdrzE/photo.jpg?sz=128", "display_name": "David \u05d3\u05d5\u05d3\u05d5 Markovitz", "link": "https://stackoverflow.com/users/6336479/david-%d7%93%d7%95%d7%93%d7%95-markovitz"}, "edited": false, "score": 0, "creation_date": 1493242273, "post_id": 43643867, "comment_id": 74338149, "body": "@Dudu Is that not the same thing? Anyways, Pig definitely allows Python UDF, though PySpark would be more SQL friendly."}, {"owner": {"reputation": 2959, "user_id": 6933215, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BQEhb.jpg?s=128&g=1", "display_name": "Pushkr", "link": "https://stackoverflow.com/users/6933215/pushkr"}, "edited": false, "score": 0, "creation_date": 1493254027, "post_id": 43643867, "comment_id": 74341866, "body": "may be a possible duplicate of <a href=\"http://stackoverflow.com/questions/27391006/how-to-write-a-python-udf-for-user-defined-aggregate-function-in-hive#27494176\" title=\"how to write a python udf for user defined aggregate function in hive%2327494176\">stackoverflow.com/questions/27391006/&hellip;</a>"}, {"owner": {"reputation": 30861, "user_id": 6336479, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-7ttJnI3nmS4/AAAAAAAAAAI/AAAAAAAAJnE/jcRD1UDdrzE/photo.jpg?sz=128", "display_name": "David \u05d3\u05d5\u05d3\u05d5 Markovitz", "link": "https://stackoverflow.com/users/6336479/david-%d7%93%d7%95%d7%93%d7%95-markovitz"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1493270201, "post_id": 43643867, "comment_id": 74346249, "body": "@cricket_007 - No, not the same thing. STREAM returns a row set and this is what you have - you can&#39;t select any other column. Think on a reasonable scenario where I want to use 3 scalar UDF on the same record."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "reply_to_user": {"reputation": 30861, "user_id": 6336479, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-7ttJnI3nmS4/AAAAAAAAAAI/AAAAAAAAJnE/jcRD1UDdrzE/photo.jpg?sz=128", "display_name": "David \u05d3\u05d5\u05d3\u05d5 Markovitz", "link": "https://stackoverflow.com/users/6336479/david-%d7%93%d7%95%d7%93%d7%95-markovitz"}, "edited": false, "score": 0, "creation_date": 1493270443, "post_id": 43643867, "comment_id": 74346343, "body": "@DuduMarkovitz Alright fine. Anyway, this question is asking for us to translate code. Java has ArrayLists, casting and bit shifting, so I suggest OP do a little research."}], "owner": {"reputation": 2315, "user_id": 2205916, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/b94c32f9f3d58691775c304526abe634?s=128&d=identicon&r=PG", "display_name": "user2205916", "link": "https://stackoverflow.com/users/2205916/user2205916"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 263, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493238231, "creation_date": 1493238231, "question_id": 43643867, "link": "https://stackoverflow.com/questions/43643867/converting-python-function-to-hive-udaf", "title": "Converting Python Function to Hive UDAF", "body": "<p>How do I convert the following Python function, <code>longToDigitArray</code> to a HiveQL UDAF? I am not familiar with Java.</p>\n\n<pre><code># convert source (e.g. 2305843012434919424, into a list of source flags)\n# Desired behavior:\n# Input: longToDigitArray(2305843012434919424)\n# Output: [31, 32, 62]\n\ndef longToDigitArray(x):\n    a=[]\n    i=1 \n    try:\n        x=long(x)\n    except:\n        return(a)\n    while (x!=0):\n        if (x &amp; 1): # \"Bitwise AND\" &amp;: Returns a 1 in each bit position for which the corresponding bits of both operands are 1's.\n            a.append(i)\n        x = (x &gt;&gt; 1) # bitwise right-shift 1\n        i = i+1\n    return(a)\n</code></pre>\n\n<p>Any insight is appreciated.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1493237868, "post_id": 43643734, "comment_id": 74335859, "body": "What do you mean <i>precisely</i>? It <i>sounds</i> pretty straightforward... But you should <i>definitely not</i> use getters and setters in Python."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1493238023, "post_id": 43643734, "comment_id": 74335931, "body": "<code>a = A(); b = B(); a.b, b.a = b, a</code>"}, {"owner": {"reputation": 91, "user_id": 7927741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0765adf4cb8ef1742cdc7cda563482ed?s=128&d=identicon&r=PG&f=1", "display_name": "ender maz", "link": "https://stackoverflow.com/users/7927741/ender-maz"}, "edited": false, "score": 0, "creation_date": 1493238036, "post_id": 43643734, "comment_id": 74335939, "body": "ok how ?. How can I pass a reference of C to B before C is even created."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 1, "creation_date": 1493238092, "post_id": 43643734, "comment_id": 74335967, "body": "Have B create an instance of C itself"}, {"owner": {"reputation": 91, "user_id": 7927741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0765adf4cb8ef1742cdc7cda563482ed?s=128&d=identicon&r=PG&f=1", "display_name": "ender maz", "link": "https://stackoverflow.com/users/7927741/ender-maz"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1493238099, "post_id": 43643734, "comment_id": 74335972, "body": "@Adam - interesting !"}], "answers": [{"comments": [{"owner": {"reputation": 148712, "user_id": 19750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13b41b2620da0b1e630715e0c91a0b03?s=128&d=identicon&r=PG", "display_name": "Josh Lee", "link": "https://stackoverflow.com/users/19750/josh-lee"}, "edited": false, "score": 0, "creation_date": 1493238246, "post_id": 43643836, "comment_id": 74336062, "body": "It also does not pass the references to both constructors simultaneously, which is of course impossible."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 148712, "user_id": 19750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13b41b2620da0b1e630715e0c91a0b03?s=128&d=identicon&r=PG", "display_name": "Josh Lee", "link": "https://stackoverflow.com/users/19750/josh-lee"}, "edited": false, "score": 2, "creation_date": 1493238325, "post_id": 43643836, "comment_id": 74336108, "body": "@JoshLee that&#39;s splitting hairs to an absurd degree. Even atomic operations don&#39;t do two things simultaneously."}, {"owner": {"reputation": 148712, "user_id": 19750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13b41b2620da0b1e630715e0c91a0b03?s=128&d=identicon&r=PG", "display_name": "Josh Lee", "link": "https://stackoverflow.com/users/19750/josh-lee"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1493238484, "post_id": 43643836, "comment_id": 74336198, "body": "@AdamSmith Just to clarify. The specific question asked is not possible, but there are various creative ways to answer it."}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 2, "last_activity_date": 1493249508, "last_edit_date": 1495540487, "creation_date": 1493238118, "answer_id": 43643836, "question_id": 43643734, "link": "https://stackoverflow.com/questions/43643734/instantiating-two-classes-with-references-to-each-other/43643836#43643836", "title": "instantiating two classes with references to each other", "body": "<p>It is not possible within <code>__init__</code> directly due to a chicken and egg situation.  However, it is possible in one assignment statement:</p>\n\n<pre><code>&gt;&gt;&gt; class A:\n...     pass\n... \n&gt;&gt;&gt; class B:\n...     pass\n... \n&gt;&gt;&gt; a, b = b.a, a.b = A(), B()\n&gt;&gt;&gt; a.b is b\nTrue\n&gt;&gt;&gt; b.a is a\nTrue\n</code></pre>\n\n<p>This relies on the fact that Python evaluates assignments left to right.  </p>\n\n<p>It is <a href=\"https://stackoverflow.com/q/2623086/674039\">not thread safe</a>; if you need to guarantee that the references exist in a threaded application then you'll want to use a mutex to handle the possible race conditions.  The GIL works at the opcode level, which is a finer-grained resolution than lines of Python code.  </p>\n"}, {"tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": false, "score": 1, "last_activity_date": 1493239295, "last_edit_date": 1493239295, "creation_date": 1493238515, "answer_id": 43643951, "question_id": 43643734, "link": "https://stackoverflow.com/questions/43643734/instantiating-two-classes-with-references-to-each-other/43643951#43643951", "title": "instantiating two classes with references to each other", "body": "<p>You could do it in <code>__init__</code> if you make one of the class initializers take an object of the other class:</p>\n\n<pre><code>&gt;&gt;&gt; class B:\n...    def __init__(self):\n...       self.c = C(self)\n...\n&gt;&gt;&gt; class C:\n...    def __init__(self, b):\n...       self.b = b\n...\n&gt;&gt;&gt; b = B()\n&gt;&gt;&gt; c = b.c\n&gt;&gt;&gt; b.c\n&lt;__main__.C object at 0x107a4f6d8&gt;\n&gt;&gt;&gt; b.c.b.c\n&lt;__main__.C object at 0x107a4f6d8&gt;\n&gt;&gt;&gt; b.c.b.c.b\n&lt;__main__.B object at 0x107a60e80&gt;\n&gt;&gt;&gt; b\n&lt;__main__.B object at 0x107a60e80&gt;\n&gt;&gt;&gt; c\n&lt;__main__.C object at 0x107a4f6d8&gt;\n&gt;&gt;&gt; c.b\n&lt;__main__.B object at 0x107a60e80&gt;\n&gt;&gt;&gt; b.c\n&lt;__main__.C object at 0x107a4f6d8&gt;\n&gt;&gt;&gt; b.c.b.c\n&lt;__main__.C object at 0x107a4f6d8&gt;\n&gt;&gt;&gt; c.b.c.b\n&lt;__main__.B object at 0x107a60e80&gt;\n</code></pre>\n\n<p>Or even without any arguments to <code>__init__</code>:</p>\n\n<pre><code>&gt;&gt;&gt; class B:\n...     def __init__(self):\n...         self.c = C()\n...         self.c.b = self\n...\n&gt;&gt;&gt; class C:\n...     pass\n...\n&gt;&gt;&gt; b = B()\n&gt;&gt;&gt; c = b.c\n&gt;&gt;&gt; b\n&lt;__main__.B object at 0x10835c048&gt;\n&gt;&gt;&gt; c\n&lt;__main__.C object at 0x1085ccac8&gt;\n&gt;&gt;&gt; b.c\n&lt;__main__.C object at 0x1085ccac8&gt;\n&gt;&gt;&gt; c.b\n&lt;__main__.B object at 0x10835c048&gt;\n&gt;&gt;&gt; b.c.b.c.b\n&lt;__main__.B object at 0x10835c048&gt;\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 7927741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0765adf4cb8ef1742cdc7cda563482ed?s=128&d=identicon&r=PG&f=1", "display_name": "ender maz", "link": "https://stackoverflow.com/users/7927741/ender-maz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1208, "favorite_count": 0, "accepted_answer_id": 43643836, "answer_count": 2, "score": 2, "last_activity_date": 1493249508, "creation_date": 1493237705, "last_edit_date": 1493237954, "question_id": 43643734, "link": "https://stackoverflow.com/questions/43643734/instantiating-two-classes-with-references-to-each-other", "title": "instantiating two classes with references to each other", "body": "<p>I have two classes, B and C.</p>\n\n<p>I want to instantiate B with C reference and C with B reference.</p>\n\n<p>I could add a setter method, but was wondering if I can do it in the <strong>init</strong> stage or any other elegant ways</p>\n"}, {"tags": ["python", "selenium", "cookies", "web-scraping"], "comments": [{"owner": {"reputation": 4516, "user_id": 4213630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JlAuz.jpg?s=128&g=1", "display_name": "aberna", "link": "https://stackoverflow.com/users/4213630/aberna"}, "edited": false, "score": 0, "creation_date": 1493303204, "post_id": 43643727, "comment_id": 74368302, "body": "Can you share the code written so far ?"}, {"owner": {"reputation": 152, "user_id": 6561617, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207107326503271/picture?type=large", "display_name": "Vijay Ramesh", "link": "https://stackoverflow.com/users/6561617/vijay-ramesh"}, "reply_to_user": {"reputation": 4516, "user_id": 4213630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JlAuz.jpg?s=128&g=1", "display_name": "aberna", "link": "https://stackoverflow.com/users/4213630/aberna"}, "edited": false, "score": 0, "creation_date": 1493303623, "post_id": 43643727, "comment_id": 74368596, "body": "Added code above @aberna"}, {"owner": {"reputation": 4516, "user_id": 4213630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JlAuz.jpg?s=128&g=1", "display_name": "aberna", "link": "https://stackoverflow.com/users/4213630/aberna"}, "edited": false, "score": 0, "creation_date": 1493304380, "post_id": 43643727, "comment_id": 74369129, "body": "Cannot replicate your issue. I used your code and tried to access to login with Chrome (not incognito) and after clicking submit I received the message &quot;Invalid Login. Please check your credentials and try again.&quot; which seems quite fair."}, {"owner": {"reputation": 152, "user_id": 6561617, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207107326503271/picture?type=large", "display_name": "Vijay Ramesh", "link": "https://stackoverflow.com/users/6561617/vijay-ramesh"}, "reply_to_user": {"reputation": 4516, "user_id": 4213630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JlAuz.jpg?s=128&g=1", "display_name": "aberna", "link": "https://stackoverflow.com/users/4213630/aberna"}, "edited": false, "score": 0, "creation_date": 1493323164, "post_id": 43643727, "comment_id": 74380705, "body": "Providing the username and password for a wee bit. Please take a look as soon as possible @aberna"}, {"owner": {"reputation": 4516, "user_id": 4213630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JlAuz.jpg?s=128&g=1", "display_name": "aberna", "link": "https://stackoverflow.com/users/4213630/aberna"}, "edited": false, "score": 0, "creation_date": 1493366094, "post_id": 43643727, "comment_id": 74395908, "body": "Got it and tested. Are you sure the service it is correctly working ? I tried to access it in a normal browser and access it is denied for cookies issue. But they are on."}, {"owner": {"reputation": 152, "user_id": 6561617, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207107326503271/picture?type=large", "display_name": "Vijay Ramesh", "link": "https://stackoverflow.com/users/6561617/vijay-ramesh"}, "reply_to_user": {"reputation": 4516, "user_id": 4213630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JlAuz.jpg?s=128&g=1", "display_name": "aberna", "link": "https://stackoverflow.com/users/4213630/aberna"}, "edited": false, "score": 0, "creation_date": 1493385637, "post_id": 43643727, "comment_id": 74408593, "body": "That&#39;s really weird.:/"}], "owner": {"reputation": 152, "user_id": 6561617, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207107326503271/picture?type=large", "display_name": "Vijay Ramesh", "link": "https://stackoverflow.com/users/6561617/vijay-ramesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 289, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1493400864, "creation_date": 1493237673, "last_edit_date": 1493400864, "question_id": 43643727, "link": "https://stackoverflow.com/questions/43643727/proxy-server-message-enable-cookies-selenium-python-scraping", "title": "Proxy server message - enable cookies - Selenium/python/scraping", "body": "<p>I have been trying to access a password protected webpage to view academic articles and carry out a meta-analyses. I would like to point out that I have access to this service, but would like an automated bot to obtain abstracts, given a set of keywords. </p>\n\n<p>1) I tried accessing the page using Chrome \n2) I tried accessing the page in Incognito mode as well.</p>\n\n<p>Both situations, I get this error as soon as I click submit.</p>\n\n<pre><code>Please note: In order to use this proxy server, you will need to enable cookies in your web browser.\n</code></pre>\n\n<p>Any suggestions on by-passing this error? Partial Code below:</p>\n\n<pre><code>executable_path = \"C:\\\\Users\\\\rameshv\\\\Downloads\\\\chromedriver.exe\"\nchrome_options = Options()\nchrome_options.add_argument(\"--incognito\")\nbrowser = webdriver.Chrome(executable_path=executable_path, \nchrome_options=chrome_options)\n\nbrowser.get(\"https://login.proxy-remote.galib.uga.edu/login\") \n#time.sleep(15)\n\nusername = browser.find_element_by_xpath(\"//div[1]/form/input[2]\")\nusername.send_keys('')\n\npassword = browser.find_element_by_xpath(\"//div[1]/form/input[3]\")\npassword.send_keys('')\n\nbrowser.find_element_by_xpath(\"//div[1]/form/input[5]\").click()\n</code></pre>\n\n<p>I get the proxy error as soon as I hit the submit button. </p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 48120, "user_id": 458741, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6gQnI.png?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/458741/ben"}, "edited": false, "score": 0, "creation_date": 1493238014, "post_id": 43643713, "comment_id": 74335928, "body": "This is a little confusing. Your first statement is that you&#39;ve got a list of times, but the first bit of code is constructing dates from a csv. I&#39;m guessing that the list <code>mytime</code> contains the data and only the last two rows are the actual problem?"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1493238182, "post_id": 43643713, "comment_id": 74336020, "body": "please provide a sample reproducible data set in the orginal format (CSV)"}, {"owner": {"reputation": 57, "user_id": 7926294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b08781e00a4c5a98d514be9b20ae47c?s=128&d=identicon&r=PG&f=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/7926294/justin"}, "edited": false, "score": 0, "creation_date": 1493238229, "post_id": 43643713, "comment_id": 74336049, "body": "mytime is what i&#39;m trying to pull the data from - it is populated from a CSV file (row[1]). the list of data above is printed directly from mytime"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1493238308, "post_id": 43643713, "comment_id": 74336099, "body": "@Justin, it&#39;s much easier to process your original data in <code>%Y-%m-%d %H:%M:%S</code> format compared to list of strings, which you parsed. Beside that you did&#39;t state whether you want to group only by time ignoring date or not..."}, {"owner": {"reputation": 57, "user_id": 7926294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b08781e00a4c5a98d514be9b20ae47c?s=128&d=identicon&r=PG&f=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/7926294/justin"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1493238432, "post_id": 43643713, "comment_id": 74336178, "body": "@MaxU - there is no date involved, just a day and a time. I just need to group times. Also, I posted a snippet of the original file in the question. Thanks!"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1493238438, "post_id": 43643713, "comment_id": 74336182, "body": "How do you parse that <b>reproducible</b> CSV using <code>year, month, day = (int(x) for x in readin.split(&#39;-&#39;))</code> ?"}, {"owner": {"reputation": 57, "user_id": 7926294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b08781e00a4c5a98d514be9b20ae47c?s=128&d=identicon&r=PG&f=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/7926294/justin"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1493238534, "post_id": 43643713, "comment_id": 74336219, "body": "@MaxU - that is in regard to column1 - which is converting a date into a day of week. We are only working with column2 in this case - time (in the format of HH:MM)"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 7926294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b08781e00a4c5a98d514be9b20ae47c?s=128&d=identicon&r=PG&f=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/7926294/justin"}, "edited": false, "score": 0, "creation_date": 1493240164, "post_id": 43644102, "comment_id": 74337074, "body": "Thanks Max. So in my case I want to pull this directly from the mytime object. So can I just set the dataframe to something like df = pd.DataFrame(mytime) ?"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 57, "user_id": 7926294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b08781e00a4c5a98d514be9b20ae47c?s=128&d=identicon&r=PG&f=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/7926294/justin"}, "edited": false, "score": 0, "creation_date": 1493240443, "post_id": 43644102, "comment_id": 74337238, "body": "@Justin, sure, you can do this (see UPDATE). But it&#39;s much easier and much more efficient to use Pandas for parsing your data... ;-)"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 1, "last_activity_date": 1493241558, "last_edit_date": 1493241558, "creation_date": 1493239079, "answer_id": 43644102, "question_id": 43643713, "link": "https://stackoverflow.com/questions/43643713/python-pandas-counting-time-data-in-2h-increments/43644102#43644102", "title": "Python &amp; Pandas: counting time data in 2h increments", "body": "<p><strong>UPDATE:</strong></p>\n\n<pre><code>In [96]: mytime = ['15:23', '14:41', '13:54', '07:13', '20:21', '13:15', '14:48', '12:06', '08:37', '06:32', '07:04', '14:20', '16:28',\n    ...:\n    ...: '06:49', '08:39', '09:15', '08:54', '05:37', '14:43', '06:20', '11:25', '11:05', '09:28', '14:05', '14:24', '15:30',\n    ...: '13:28', '16:55', '09:29', '17:44', '07:24', '09:37', '06:47', '14:35', '10:55', '22:29', '06:24', '09:25', '06:45',\n    ...: '23:49', '19:34', '01:31', '14:22', '13:58', '09:08', '05:11', '08:09', '08:52', '02:50', '12:51', '17:33', '07:07',\n    ...: '08:11', '10:06', '23:48', '22:27', '11:15', '15:09', '16:45', '20:42', '12:12', '07:08', '16:13', '20:40', '17:26',\n    ...: '18:57', '15:07', '09:19', '09:10', '09:17', '09:26', '14:18', '06:31', '14:13', '14:01', '08:57', '21:34']\n\nIn [97]: s = pd.to_datetime(mytime).to_series()\n\nIn [98]: s\nOut[98]:\n2017-04-26 15:23:00   2017-04-26 15:23:00\n2017-04-26 14:41:00   2017-04-26 14:41:00\n2017-04-26 13:54:00   2017-04-26 13:54:00\n2017-04-26 07:13:00   2017-04-26 07:13:00\n2017-04-26 20:21:00   2017-04-26 20:21:00\n2017-04-26 13:15:00   2017-04-26 13:15:00\n2017-04-26 14:48:00   2017-04-26 14:48:00\n2017-04-26 12:06:00   2017-04-26 12:06:00\n2017-04-26 08:37:00   2017-04-26 08:37:00\n2017-04-26 06:32:00   2017-04-26 06:32:00\n                              ...\n2017-04-26 09:19:00   2017-04-26 09:19:00\n2017-04-26 09:10:00   2017-04-26 09:10:00\n2017-04-26 09:17:00   2017-04-26 09:17:00\n2017-04-26 09:26:00   2017-04-26 09:26:00\n2017-04-26 14:18:00   2017-04-26 14:18:00\n2017-04-26 06:31:00   2017-04-26 06:31:00\n2017-04-26 14:13:00   2017-04-26 14:13:00\n2017-04-26 14:01:00   2017-04-26 14:01:00\n2017-04-26 08:57:00   2017-04-26 08:57:00\n2017-04-26 21:34:00   2017-04-26 21:34:00\ndtype: datetime64[ns]\n\nIn [106]: s.groupby(pd.cut(s.dt.hour,\n     ...:                  bins=np.arange(26, step=2),\n     ...:                  right=False,\n     ...:                  include_lowest=True)) \\\n     ...:  .size()\n     ...:\nOut[106]:\n[0, 2)       1\n[2, 4)       1\n[4, 6)       2\n[6, 8)      12\n[8, 10)     17\n[10, 12)     5\n[12, 14)     7\n[14, 16)    15\n[16, 18)     7\n[18, 20)     2\n[20, 22)     4\n[22, 24)     4\ndtype: int64\n</code></pre>\n\n<hr>\n\n<pre><code>df = pd.read_csv('/path/to/file.csv', parse_dates=[1], names=['date','time'])\n\nIn [55]: df\nOut[55]:\n        date                time\n0     Sunday 2017-04-26 14:35:00\n1     Sunday 2017-04-26 10:55:00\n2     Friday 2017-04-26 22:29:00\n3     Friday 2017-04-26 06:24:00\n4   Thursday 2017-04-26 09:25:00\n5  Wednesday 2017-04-26 06:45:00\n\nIn [59]: df.groupby(pd.cut(df.time.dt.hour, bins=np.arange(26, step=2), include_lowest=True)).size()\nOut[59]:\ntime\n[0, 2]      0\n(2, 4]      0\n(4, 6]      2\n(6, 8]      0\n(8, 10]     2\n(10, 12]    0\n(12, 14]    1\n(14, 16]    0\n(16, 18]    0\n(18, 20]    0\n(20, 22]    1\n(22, 24]    0\ndtype: int64\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24193, "user_id": 5811078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NlknE.png?s=128&g=1", "display_name": "zipa", "link": "https://stackoverflow.com/users/5811078/zipa"}, "is_accepted": false, "score": 0, "last_activity_date": 1493239347, "creation_date": 1493239347, "answer_id": 43644164, "question_id": 43643713, "link": "https://stackoverflow.com/questions/43643713/python-pandas-counting-time-data-in-2h-increments/43644164#43644164", "title": "Python &amp; Pandas: counting time data in 2h increments", "body": "<p>This is what i got, still struggling with sort, you'll see the output:</p>\n\n<pre><code>data = ['15:23', '14:41', '13:54', '07:13', '20:21', '13:15', '14:48', '12:06', '08:37', '06:32', '07:04', '14:20', '16:28',     \n'06:49', '08:39', '09:15', '08:54', '05:37', '14:43', '06:20', '11:25', '11:05', '09:28', '14:05', '14:24', '15:30', \n'13:28', '16:55', '09:29', '17:44', '07:24', '09:37', '06:47', '14:35', '10:55', '22:29', '06:24', '09:25', '06:45', \n'23:49', '19:34', '01:31', '14:22', '13:58', '09:08', '05:11', '08:09', '08:52', '02:50', '12:51', '17:33', '07:07', \n'08:11', '10:06', '23:48', '22:27', '11:15', '15:09', '16:45', '20:42', '12:12', '07:08', '16:13', '20:40', '17:26', \n'18:57', '15:07', '09:19', '09:10', '09:17', '09:26', '14:18', '06:31', '14:13', '14:01', '08:57', '21:34']\n\n\nimport pandas as pd\n\ndf = pd.DataFrame({'mytime': data})\n\ndf['mytime'] = pd.to_datetime(df['mytime']).dt.floor('2H').dt.time\ndf['hour'] = df.mytime.apply(lambda x: str(x.hour) + '-' + str(x.hour +2)) \ndf = df.groupby('hour').size()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 7926294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b08781e00a4c5a98d514be9b20ae47c?s=128&d=identicon&r=PG&f=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/7926294/justin"}, "edited": false, "score": 0, "creation_date": 1493240339, "post_id": 43644215, "comment_id": 74337177, "body": "Thanks. So in my case can I just set &quot;data = mytime&quot; since the value of mytime is equal to your manual input ?"}], "tags": [], "owner": {"reputation": 2435, "user_id": 1231055, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k7x3R.png?s=128&g=1", "display_name": "Brad Campbell", "link": "https://stackoverflow.com/users/1231055/brad-campbell"}, "is_accepted": false, "score": 0, "last_activity_date": 1493239560, "creation_date": 1493239560, "answer_id": 43644215, "question_id": 43643713, "link": "https://stackoverflow.com/questions/43643713/python-pandas-counting-time-data-in-2h-increments/43644215#43644215", "title": "Python &amp; Pandas: counting time data in 2h increments", "body": "<p>Here is an approach using numpy's histogram function:</p>\n\n<pre><code>import numpy as np\ndata = ['15:23', '14:41', '13:54', '07:13', '20:21', '13:15', '14:48', '12:06', '08:37', '06:32', '07:04', '14:20', '16:28','06:49', '08:39', '09:15','08:54', '05:37', '14:43', '06:20', '11:25', '11:05', '09:28', '14:05','14:24', '15:30', '13:28', '16:55', '09:29', '17:44', '07:24', '09:37','06:47', '14:35', '10:55', '22:29', '06:24', '09:25', '06:45', '23:49','19:34', '01:31', '14:22', '13:58', '09:08', '05:11', '08:09', '08:52','02:50', '12:51', '17:33', '07:07', '08:11', '10:06', '23:48', '22:27','11:15', '15:09', '16:45', '20:42', '12:12', '07:08', '16:13', '20:40','17:26', '18:57', '15:07', '09:19', '09:10', '09:17', '09:26', '14:18', '06:31', '14:13', '14:01', '08:57', '21:34']\ntime = [int(h) + int(m)/60 for h, m in (y.split(':') for y in data)]\nbins = list(range(0, 26, 2))\ncounts, bins = np.histogram(time, bins)\ndict(zip(bins, counts))\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>{0: 1,\n 2: 1,\n 4: 2,\n 6: 12,\n 8: 17,\n 10: 5,\n 12: 7,\n 14: 15,\n 16: 7,\n 18: 2,\n 20: 4,\n 22: 4}\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 7926294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b08781e00a4c5a98d514be9b20ae47c?s=128&d=identicon&r=PG&f=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/7926294/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 43644102, "answer_count": 3, "score": 2, "last_activity_date": 1493241558, "creation_date": 1493237609, "last_edit_date": 1493238391, "question_id": 43643713, "link": "https://stackoverflow.com/questions/43643713/python-pandas-counting-time-data-in-2h-increments", "title": "Python &amp; Pandas: counting time data in 2h increments", "body": "<p>I'm trying to group a bunch of timeseries data into 2 hour chunks. I am very new to this so please bear wth me. I think I can use Pandas for this based on previous research. </p>\n\n<p>I've got a dataset (mytime) that looks like this:</p>\n\n<pre><code>['15:23', '14:41', '13:54', '07:13', '20:21', '13:15', '14:48', '12:06', '08:37', '06:32', '07:04', '14:20', '16:28',     \n'06:49', '08:39', '09:15', '08:54', '05:37', '14:43', '06:20', '11:25', '11:05', '09:28', '14:05', '14:24', '15:30', \n'13:28', '16:55', '09:29', '17:44', '07:24', '09:37', '06:47', '14:35', '10:55', '22:29', '06:24', '09:25', '06:45', \n'23:49', '19:34', '01:31', '14:22', '13:58', '09:08', '05:11', '08:09', '08:52', '02:50', '12:51', '17:33', '07:07', \n'08:11', '10:06', '23:48', '22:27', '11:15', '15:09', '16:45', '20:42', '12:12', '07:08', '16:13', '20:40', '17:26', \n'18:57', '15:07', '09:19', '09:10', '09:17', '09:26', '14:18', '06:31', '14:13', '14:01', '08:57', '21:34']\n</code></pre>\n\n<p>I want to take this dataset and basically see an output like this:</p>\n\n<pre><code>0-2: 4\n2-4: 7\n4-6: 3\n6-8: 3\n8-10: 2\n10-12: 5\n12-14: 14\n....etc\n</code></pre>\n\n<p>Here is a subset of my code</p>\n\n<pre><code>import csv\nfrom collections import Counter\nimport pandas as pd\nimport numpy as np\n\nmycount = Counter()\nmytime = []\nwith open('temp_dates.csv') as csvfile2:\n    readCSV2 = csv.reader(csvfile2, delimiter=',')\n    incoming = []\n    for row in readCSV2:\n         readin = row[0]\n         time = row[1]\n         year, month, day = (int(x) for x in readin.split('-'))\n         ans = datetime.date(year, month, day)\n         wkday = ans.strftime(\"%A\")\n         incoming.append([wkday,time])\n         mycount[wkday] += 1\n         mytime.append(time)\n    with open('new_dates2.csv', 'w') as out_file:\n        writer = csv.writer(out_file)\n        writer.writerows(incoming)\ncsvfile2.close()\n\nfor key,value in sorted(mycount.iteritems()):\n    daylist = key, value\n    print(daylist)\n\n#print(mytime)\ndf = pd.DataFrame()\n#print(df)\ndf.groupby([df['mytime'],pd.TimeGrouper(freq='2H')])\n</code></pre>\n\n<p>I'm guessing my first problem is the data is not properly formatted for TimeGrouper to understand? Second, i'm probably missing something else that tells the dataframe what to look at? Any help would be appreciated. </p>\n\n<p>By request a snippet of the original source CSV file is as follows (we are only talking about column 2 which is populated into 'mytime'). </p>\n\n<pre><code>Sunday,14:35\nSunday,10:55\nFriday,22:29\nFriday,06:24\nThursday,09:25\nWednesday,06:45\n</code></pre>\n"}, {"tags": ["python", "flask"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1493237575, "post_id": 43643679, "comment_id": 74335694, "body": "<code>#and so on...</code> should be replaced by a dictionary. No if statements. For example. <code>{&quot;1&quot;: &quot;USA&quot;}[countrycode]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "is_accepted": true, "score": 0, "last_activity_date": 1493684869, "last_edit_date": 1493684869, "creation_date": 1493237753, "answer_id": 43643747, "question_id": 43643679, "link": "https://stackoverflow.com/questions/43643679/performance-difference-in-handling-data/43643747#43643747", "title": "Performance difference in handling data", "body": "<p>Flask is rendering a template from the data, I assume? Adding one more web-server function call for a simple lookup wouldn't be the worst, but it could add up depending on the amount of data you have. </p>\n\n<p>Your code could rather be written as </p>\n\n<pre><code># Or load this from a JSON file\nCOUNTRIES = {\n    \"1\": \"USA\"\n}\n\ndef return_country(countrycode):\n     if countrycode not in COUNTRIES:\n         return None\n     else:\n         return COUNTRIES[countrycode]\n</code></pre>\n\n<p>The more performant solution is to add the column in the database, though. </p>\n"}], "owner": {"reputation": 3046, "user_id": 3557485, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/dzUaw.jpg?s=128&g=1", "display_name": "rihe", "link": "https://stackoverflow.com/users/3557485/rihe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 43643747, "answer_count": 1, "score": 0, "last_activity_date": 1493684869, "creation_date": 1493237441, "question_id": 43643679, "link": "https://stackoverflow.com/questions/43643679/performance-difference-in-handling-data", "title": "Performance difference in handling data", "body": "<p>I have a MySQL table with a column called <code>countrycode</code> and it contains phone codes of different countries. On my website I need to display the country names near the country code, however there is no matching data in the database.</p>\n\n<p>So I have two options, adding a new column for the countries and update it with the country names. Or I can write a function that returns the proper country names at page loads. The function would be something like this:</p>\n\n<pre><code>def return_country(countrycode):\n     if \"1\" == countrycode:\n         return \"USA\"\n     #and so on...\n</code></pre>\n\n<p>My question is that is there any serious time/performance difference between the two solution? I assume getting the values from the database would be better, however if there is no radical difference I may use the function. </p>\n"}, {"tags": ["python", "datetime", "suds"], "comments": [{"owner": {"reputation": 726, "user_id": 7780772, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/51e914134e488de42999994a203e24ec?s=128&d=identicon&r=PG&f=1", "display_name": "quantik", "link": "https://stackoverflow.com/users/7780772/quantik"}, "edited": false, "score": 2, "creation_date": 1493237844, "post_id": 43643675, "comment_id": 74335847, "body": "What sort of error are you getting?"}, {"owner": {"reputation": 31, "user_id": 7594237, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8afcd156631864bf1c70e243d9c964be?s=128&d=identicon&r=PG&f=1", "display_name": "athi", "link": "https://stackoverflow.com/users/7594237/athi"}, "reply_to_user": {"reputation": 726, "user_id": 7780772, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/51e914134e488de42999994a203e24ec?s=128&d=identicon&r=PG&f=1", "display_name": "quantik", "link": "https://stackoverflow.com/users/7780772/quantik"}, "edited": false, "score": 0, "creation_date": 1493239203, "post_id": 43643675, "comment_id": 74336571, "body": "I am receiving the following error   <code>print &quot;Nodes in topology:&quot;, len(allincidents.item) AttributeError: &#39;Text&#39; object has no attribute &#39;item&#39;</code>"}, {"owner": {"reputation": 2191, "user_id": 7070965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qEhQf.png?s=128&g=1", "display_name": "dtell", "link": "https://stackoverflow.com/users/7070965/dtell"}, "edited": false, "score": 0, "creation_date": 1493245882, "post_id": 43643675, "comment_id": 74339578, "body": "Please edit your question and add the error message there."}], "answers": [{"tags": [], "owner": {"reputation": 40221, "user_id": 7311767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/13Fpq.png?s=128&g=1", "display_name": "Stephen Rauch", "link": "https://stackoverflow.com/users/7311767/stephen-rauch"}, "is_accepted": true, "score": 0, "last_activity_date": 1493248110, "creation_date": 1493248110, "answer_id": 43645993, "question_id": 43643675, "link": "https://stackoverflow.com/questions/43643675/python-time-as-value/43645993#43645993", "title": "Python time as value", "body": "<blockquote>\n  <p>I am able to see result when I use values like filter2.value = \"1493078400000\"</p>\n</blockquote>\n\n<p>According to this statement, it looks <code>filter2.value</code> should be a string.  That would suggest that you need to use:</p>\n\n<pre><code>filter2.value = str(d_in_ms)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7594237, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8afcd156631864bf1c70e243d9c964be?s=128&d=identicon&r=PG&f=1", "display_name": "athi", "link": "https://stackoverflow.com/users/7594237/athi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 43645993, "answer_count": 1, "score": 1, "last_activity_date": 1493248200, "creation_date": 1493237425, "last_edit_date": 1493248200, "question_id": 43643675, "link": "https://stackoverflow.com/questions/43643675/python-time-as-value", "title": "Python time as value", "body": "<p>I am trying to consume hp nnmi web services. But here you can see I am using milliseconds as value in <code>filter2.value = d_in_ms</code>, and this is not working for me. I am able to see result when I use values like <code>filter2.value = \"1493078400000\"</code>, Please tell me if we can use int values like below:</p>\n\n<pre><code>#!/usr/bin/python\n\nfrom suds.client import Client\nfrom suds.transport.http import HttpAuthenticated\n\nimport datetime\nimport time\nnow = datetime.datetime.now()\ncurrenttime = now - datetime.timedelta(hours=12)\nepochtime = time.mktime(currenttime.timetuple())\nprint epochtime\nd_in_ms = int(epochtime)*1000\n\nt = HttpAuthenticated(username='xxxxx', password='xxxx')\n\nurl = 'http://example.com/IncidentBeanService/IncidentBean?wsdl'\n\nclient = Client(url, transport=t)\nfilter1 = client.factory.create('ns2:condition')\nfilter1.name = \"sourceNodeName\"\nfilter1.operator = \"EQ\"\nfilter1.value = \"DEVICE\"\n\nfilter2 = client.factory.create('ns2:condition')\nfilter2.name = \"lastOccurrenceTime\"\nfilter2.operator = \"GT\"\nfilter2.value  = d_in_ms\n\n\nfilter = client.factory.create('ns2:expression')\nfilter.operator = \"AND\"\nfilter.subFilters = [filter1, filter2]\n\nallincidents = client.service.getIncidents(filter)\nprint \"Nodes in topology:\", len(allincidents.item)\n\nfor i in allincidents.item[:]:\n  print i\n</code></pre>\n"}, {"tags": ["python", "anaconda", "jupyter-notebook"], "comments": [{"owner": {"reputation": 1183, "user_id": 1843486, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/182a396a44b8707669ccb54f34c3c703?s=128&d=identicon&r=PG&f=1", "display_name": "sparkonhdfs", "link": "https://stackoverflow.com/users/1843486/sparkonhdfs"}, "edited": false, "score": 0, "creation_date": 1493237456, "post_id": 43643648, "comment_id": 74335637, "body": "Have you made sure that the Python process has admin privileges?"}, {"owner": {"reputation": 15668, "user_id": 149076, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZHnYp.jpg?s=128&g=1", "display_name": "Jim Dennis", "link": "https://stackoverflow.com/users/149076/jim-dennis"}, "edited": false, "score": 0, "creation_date": 1493238750, "post_id": 43643648, "comment_id": 74336323, "body": "The <code>export</code> command is common to Unix (Linux and MacOS X) command shells.  Perhaps this old thread on the Continuum mailing list will help: <a href=\"https://groups.google.com/a/continuum.io/forum/#!topic/anaconda/IcRYtTJtFfw\" rel=\"nofollow noreferrer\">Running IPython under Windows7</a>"}, {"owner": {"reputation": 81, "user_id": 7927704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d391ac80f85d96c3db702fe829aade0?s=128&d=identicon&r=PG&f=1", "display_name": "Piallen", "link": "https://stackoverflow.com/users/7927704/piallen"}, "reply_to_user": {"reputation": 1183, "user_id": 1843486, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/182a396a44b8707669ccb54f34c3c703?s=128&d=identicon&r=PG&f=1", "display_name": "sparkonhdfs", "link": "https://stackoverflow.com/users/1843486/sparkonhdfs"}, "edited": false, "score": 0, "creation_date": 1493238762, "post_id": 43643648, "comment_id": 74336330, "body": "@iamseiko Probably not... how do I check that? I&#39;ve run the Command Prompt as Administrator but no change to the result unfortunately"}, {"owner": {"reputation": 81, "user_id": 7927704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d391ac80f85d96c3db702fe829aade0?s=128&d=identicon&r=PG&f=1", "display_name": "Piallen", "link": "https://stackoverflow.com/users/7927704/piallen"}, "reply_to_user": {"reputation": 15668, "user_id": 149076, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZHnYp.jpg?s=128&g=1", "display_name": "Jim Dennis", "link": "https://stackoverflow.com/users/149076/jim-dennis"}, "edited": false, "score": 0, "creation_date": 1493239572, "post_id": 43643648, "comment_id": 74336747, "body": "@JimDennis Thanks for the link, though had a look through it and it doesn&#39;t seem to be related to jupyter notebooks?"}, {"owner": {"reputation": 81, "user_id": 7927704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d391ac80f85d96c3db702fe829aade0?s=128&d=identicon&r=PG&f=1", "display_name": "Piallen", "link": "https://stackoverflow.com/users/7927704/piallen"}, "edited": false, "score": 0, "creation_date": 1493499420, "post_id": 43643648, "comment_id": 74445826, "body": "I&#39;ve created a new folder and moved all my previous .py files to this new folder, and it seems to have worked. Any idea why the file permissions might have changed for the original file?"}], "owner": {"reputation": 81, "user_id": 7927704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d391ac80f85d96c3db702fe829aade0?s=128&d=identicon&r=PG&f=1", "display_name": "Piallen", "link": "https://stackoverflow.com/users/7927704/piallen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 7449, "favorite_count": 1, "protected_date": 1522521948, "answer_count": 0, "score": 4, "last_activity_date": 1522521604, "creation_date": 1493237312, "last_edit_date": 1493243873, "question_id": 43643648, "link": "https://stackoverflow.com/questions/43643648/jupyter-notebooks-permission-denied-when-trying-to-create-new-notebook", "title": "Jupyter notebooks - &quot;Permission denied&quot; when trying to create new notebook", "body": "<p>I've been using jupyter notebooks for the past couple of months with no issue, but suddenly when launching jupyter notebook through the Command Prompt (I'm a Windows 10 user) and try to create a new python3 notebook through the browser, I suddenly receive the following error:</p>\n\n<blockquote>\n  <p>Permission Denied Error When Creating New Python Notebook</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/3PDJ5.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3PDJ5.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Anyone know what to do? I've tried uninstalling and reinstalling <strong>Anaconda3</strong>. I saw another post which suggested using export <code>XDG_RUNTIME_DIR=\"\"</code> but <code>export</code> wasn't recognized as an internal or external command by the Command Prompt.</p>\n\n<p>Thanks in advance! </p>\n"}, {"tags": ["python", "openpyxl"], "answers": [{"tags": [], "owner": {"reputation": 676, "user_id": 5252522, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TLdtyS7mY7A/AAAAAAAAAAI/AAAAAAAAAnI/iDfBO_ux0Bo/photo.jpg?sz=128", "display_name": "Quentin", "link": "https://stackoverflow.com/users/5252522/quentin"}, "is_accepted": false, "score": 0, "last_activity_date": 1493237647, "creation_date": 1493237647, "answer_id": 43643719, "question_id": 43643545, "link": "https://stackoverflow.com/questions/43643545/python-openpyxl-error/43643719#43643719", "title": "Python openpyxl error", "body": "<p>Maybe openpyxl doesn't convert iterables (which is what looks to be passed) to <code>ws.cell.value</code>.</p>\n\n<p>Try:<br>\n<code>for rowNum, data in enumerate(heatmap_data):\n    ws.cell(row=rowNum + 2, column=col).value = \", \".join(data[rowNum])\n    # Noticed the range you're choosing skips the first 2 values of your data.\n    # Looks like you're not incrementing the column. Meh. Guess not.</code></p>\n\n<p>Heh.</p>\n"}, {"tags": [], "owner": {"reputation": 17, "user_id": 7925293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160a2507a9e18f5be155ae300c36e345?s=128&d=identicon&r=PG&f=1", "display_name": "Tom S", "link": "https://stackoverflow.com/users/7925293/tom-s"}, "is_accepted": true, "score": 0, "last_activity_date": 1493310503, "creation_date": 1493310503, "answer_id": 43663289, "question_id": 43643545, "link": "https://stackoverflow.com/questions/43643545/python-openpyxl-error/43663289#43663289", "title": "Python openpyxl error", "body": "<p>Resolved the issue with the following code:</p>\n\n<pre><code>row = 1\n\n\n    for i in (heatmap_data):\n        print(i[0], i[1], i[2], i[3], i[4])\n        ws.cell(row=row, column=1).value = (i[0])\n        ws.cell(row=row, column=2).value = (i[1])\n        ws.cell(row=row, column=3).value = (i[2])\n        ws.cell(row=row, column=4).value = (i[3])\n        ws.cell(row=row, column=5).value = (i[4])\n        row += 1\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 7925293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160a2507a9e18f5be155ae300c36e345?s=128&d=identicon&r=PG&f=1", "display_name": "Tom S", "link": "https://stackoverflow.com/users/7925293/tom-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1194, "favorite_count": 0, "accepted_answer_id": 43663289, "answer_count": 2, "score": 0, "last_activity_date": 1493310503, "creation_date": 1493236950, "last_edit_date": 1493237083, "question_id": 43643545, "link": "https://stackoverflow.com/questions/43643545/python-openpyxl-error", "title": "Python openpyxl error", "body": "<p>I want to open a file using Python and paste query results out of Oracle in to a specific sheet.  I found a way to do with with xlswriter but that is not the right tool for the job.</p>\n\n<p>I can get my query to execute and append to a list. I have both strings and integers in the result.  I cannot get this to transfer to an excel file. Any help would be great.</p>\n\n<p>The error I'm getting is:</p>\n\n<pre><code>line 201, in _bind_value\n   raise ValueError(\"Cannot convert {0} to Excel\".format(value)) \n\nValueError: Cannot convert ('20 GA GV-CS-CT-DRY-G90 60xC COIL', 2, 848817, 982875, 1.15793510261929) to Excel\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>import cx_Oracle\nimport openpyxl\n\ncon = cx_Oracle.connect('example', 'example', \"example\")\ncur = con.cursor()\n\nheatmap_data = []\n\nstatement = \"\"\" select * from example\"\"\"\n\ncur.arraysize = 2000\ncur.execute(statement)\n\nfor result in cur:\n    heatmap_data.append(result)\n\ncon.close()\n\nfile = \"path/Test.xlsx\"\n\nwb = openpyxl.load_workbook(filename=file)\nws = wb.get_sheet_by_name(\"Sheet1\")\n\nrow = 1\ncol = 1\n\n\nfor rowNum in range(2, len(heatmap_data)):\n    ws.cell(row=row, column=col).value = heatmap_data[rowNum]\n    row =+ 1\n\nwb.save(file)\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 36, "last_activity_date": 1493237035, "creation_date": 1493237035, "answer_id": 43643571, "question_id": 43643506, "link": "https://stackoverflow.com/questions/43643506/select-columns-based-on-columns-names-containing-a-specific-string-in-pandas/43643571#43643571", "title": "select columns based on columns names containing a specific string in pandas", "body": "<p>alternative methods:</p>\n\n<pre><code>In [13]: df.loc[:, df.columns.str.startswith('alp')]\nOut[13]:\n       alp1      alp2\n0  0.357564  0.108907\n1  0.341087  0.198098\n2  0.416215  0.644166\n3  0.814056  0.121044\n4  0.382681  0.110829\n5  0.130343  0.219829\n6  0.110049  0.681618\n7  0.949599  0.089632\n8  0.047945  0.855116\n9  0.561441  0.291182\n\nIn [14]: df.loc[:, df.columns.str.contains('alp')]\nOut[14]:\n       alp1      alp2\n0  0.357564  0.108907\n1  0.341087  0.198098\n2  0.416215  0.644166\n3  0.814056  0.121044\n4  0.382681  0.110829\n5  0.130343  0.219829\n6  0.110049  0.681618\n7  0.949599  0.089632\n8  0.047945  0.855116\n9  0.561441  0.291182\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "is_accepted": false, "score": 3, "last_activity_date": 1493237108, "creation_date": 1493237108, "answer_id": 43643591, "question_id": 43643506, "link": "https://stackoverflow.com/questions/43643506/select-columns-based-on-columns-names-containing-a-specific-string-in-pandas/43643591#43643591", "title": "select columns based on columns names containing a specific string in pandas", "body": "<p>You've several options, here's a couple:</p>\n\n<p>1 - <code>filter</code> with <code>like</code>:</p>\n\n<pre><code>df.filter(like='alp')\n</code></pre>\n\n<p>2 - <code>filter</code> with <code>regex</code>:</p>\n\n<pre><code>df.filter(regex='alp')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 1, "creation_date": 1493237980, "post_id": 43643632, "comment_id": 74335911, "body": "That <code>np.core.defchararray</code> needs more participation in <code>pandas</code>."}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 3, "last_activity_date": 1493237267, "creation_date": 1493237267, "answer_id": 43643632, "question_id": 43643506, "link": "https://stackoverflow.com/questions/43643506/select-columns-based-on-columns-names-containing-a-specific-string-in-pandas/43643632#43643632", "title": "select columns based on columns names containing a specific string in pandas", "body": "<p><strong><em>option 1</em></strong><br>\n<em>Full <code>numpy</code> + <code>pd.DataFrame</code></em>  </p>\n\n<pre><code>m = np.core.defchararray.find(df.columns.values.astype(str), 'alp') &gt;= 0\npd.DataFrame(df.values[:, m], df.index, df.columns[m])\n\n       alp1      alp2\n0  0.819189  0.356867\n1  0.900406  0.968947\n2  0.201382  0.658768\n3  0.700727  0.946509\n4  0.176423  0.290426\n5  0.132773  0.378251\n6  0.749374  0.983251\n7  0.768689  0.415869\n8  0.292140  0.457596\n9  0.214937  0.976780\n</code></pre>\n\n<p><strong><em>option 2</em></strong><br>\n<em><code>numpy</code> + <code>loc</code></em>  </p>\n\n<pre><code>m = np.core.defchararray.find(df.columns.values.astype(str), 'alp') &gt;= 0\ndf.loc[:, m]\n\n       alp1      alp2\n0  0.819189  0.356867\n1  0.900406  0.968947\n2  0.201382  0.658768\n3  0.700727  0.946509\n4  0.176423  0.290426\n5  0.132773  0.378251\n6  0.749374  0.983251\n7  0.768689  0.415869\n8  0.292140  0.457596\n9  0.214937  0.976780\n</code></pre>\n\n<hr>\n\n<p><strong><em>timing</em></strong><br>\n<em><code>numpy</code> is faster</em></p>\n\n<p><a href=\"https://i.stack.imgur.com/BhKsp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BhKsp.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 6533, "user_id": 2119941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XA1Jr.jpg?s=128&g=1", "display_name": "Harvey", "link": "https://stackoverflow.com/users/2119941/harvey"}, "is_accepted": false, "score": 7, "last_activity_date": 1574928026, "last_edit_date": 1574928026, "creation_date": 1574926958, "answer_id": 59083898, "question_id": 43643506, "link": "https://stackoverflow.com/questions/43643506/select-columns-based-on-columns-names-containing-a-specific-string-in-pandas/59083898#59083898", "title": "select columns based on columns names containing a specific string in pandas", "body": "<p>In case @Pedro answer doesn't work here is official way of doing it for pandas 0.25</p>\n\n<p><strong>Sample dataframe:</strong></p>\n\n<pre><code>&gt;&gt;&gt; df = pd.DataFrame(np.array(([1, 2, 3], [4, 5, 6])),\n...                   index=['mouse', 'rabbit'],\n...                   columns=['one', 'two', 'three'])\n</code></pre>\n\n<blockquote>\n<pre><code>         one two three\nmouse     1   2   3\nrabbit    4   5   6\n</code></pre>\n</blockquote>\n\n<h1>Select columns by name</h1>\n\n<pre><code>df.filter(items=['one', 'three'])\n         one  three\nmouse     1      3\nrabbit    4      6\n</code></pre>\n\n<h1>Select columns by regular expression</h1>\n\n<pre><code>df.filter(regex='e$', axis=1) #ending with *e*, for checking containing just use it without *$* in the end\n         one  three\nmouse     1      3\nrabbit    4      6\n</code></pre>\n\n<h1>Select rows containing 'bbi'</h1>\n\n<pre><code>df.filter(like='bbi', axis=0)\n         one  two  three\nrabbit    4    5      6\n</code></pre>\n"}], "owner": {"reputation": 1235, "user_id": 7072629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8526a7cb3b7ae813292c44cc0d35394f?s=128&d=identicon&r=PG&f=1", "display_name": "Eric B", "link": "https://stackoverflow.com/users/7072629/eric-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31024, "favorite_count": 9, "accepted_answer_id": 43643571, "answer_count": 4, "score": 20, "last_activity_date": 1574928026, "creation_date": 1493236805, "question_id": 43643506, "link": "https://stackoverflow.com/questions/43643506/select-columns-based-on-columns-names-containing-a-specific-string-in-pandas", "title": "select columns based on columns names containing a specific string in pandas", "body": "<p>I created a dataframe using the following:</p>\n\n<pre><code>df = pd.DataFrame(np.random.rand(10, 3), columns=['alp1', 'alp2', 'bet1'])\n</code></pre>\n\n<p>I'd like to get a dataframe containing every columns from <code>df</code> that have <code>alp</code> in their names. This is only a light version of my problem, so my real dataframe will have more columns.</p>\n"}, {"tags": ["python", "dictionary", "filter"], "comments": [{"owner": {"reputation": 2070, "user_id": 378704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5318a95a23ff8a67c0edc171412c83a?s=128&d=identicon&r=PG", "display_name": "kiran.koduru", "link": "https://stackoverflow.com/users/378704/kiran-koduru"}, "edited": false, "score": 0, "creation_date": 1493236999, "post_id": 43643497, "comment_id": 74335393, "body": "What&#39;s the expected result for <code>d_filter</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": true, "score": 2, "last_activity_date": 1493237078, "creation_date": 1493237078, "answer_id": 43643584, "question_id": 43643497, "link": "https://stackoverflow.com/questions/43643497/filter-dictionary-keys-of-multilevel-dictionary/43643584#43643584", "title": "Filter Dictionary keys of multilevel dictionary", "body": "<p>Here's a <em>dictionary comprehension</em> that does just that; <code>dct</code> is your initial dictionary:</p>\n\n<pre><code>d = {k: {ky: [d for d in vl if d['a']==1] for ky, vl in v.items()} \n                                          for k, v in dct.items()}\nprint d\n# {12345: {2006: [{'a': 1, 'b': 2}, {'a': 1, 'b': 5}]}, 12346: {2007: [{'a': 1, 'b': 9}, {'a': 1, 'b': 12}]}}\n</code></pre>\n\n<p>You can change the inner filter (i.e. <code>d['a']==1</code>) to the dict key and/or value of your choice.</p>\n"}, {"comments": [{"owner": {"reputation": 213, "user_id": 3948766, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/e5oO6.png?s=128&g=1", "display_name": "Infinity Cliff", "link": "https://stackoverflow.com/users/3948766/infinity-cliff"}, "edited": false, "score": 0, "creation_date": 1493251141, "post_id": 43643614, "comment_id": 74341180, "body": "this works too, but i guess I can pick only one answer"}], "tags": [], "owner": {"reputation": 2090, "user_id": 2350575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d4561f06d70046f208fd3d6f4da576a?s=128&d=identicon&r=PG", "display_name": "Dean Fenster", "link": "https://stackoverflow.com/users/2350575/dean-fenster"}, "is_accepted": false, "score": 1, "last_activity_date": 1493237213, "creation_date": 1493237213, "answer_id": 43643614, "question_id": 43643497, "link": "https://stackoverflow.com/questions/43643497/filter-dictionary-keys-of-multilevel-dictionary/43643614#43643614", "title": "Filter Dictionary keys of multilevel dictionary", "body": "<p>You could do something like this:</p>\n\n<pre><code>filtered = {\n     item_code: {\n         year: [item for item in items if item['a'] == 1]\n         for year, items in years.items()\n     } \n     for item_code, years in d.items()\n}\n</code></pre>\n\n<p>Which results in:</p>\n\n<pre><code>{12345: {2006: [{'a': 1, 'b': 2}, {'a': 1, 'b': 5}]},\n 12346: {2007: [{'a': 1, 'b': 9}, {'a': 1, 'b': 12}]}}\n</code></pre>\n"}], "owner": {"reputation": 213, "user_id": 3948766, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/e5oO6.png?s=128&g=1", "display_name": "Infinity Cliff", "link": "https://stackoverflow.com/users/3948766/infinity-cliff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "accepted_answer_id": 43643584, "answer_count": 2, "score": 0, "last_activity_date": 1493237213, "creation_date": 1493236777, "question_id": 43643497, "link": "https://stackoverflow.com/questions/43643497/filter-dictionary-keys-of-multilevel-dictionary", "title": "Filter Dictionary keys of multilevel dictionary", "body": "<p>I have the following <code>dict</code> structure:</p>\n\n<pre><code>{12345: {2006: [{'a': 1, 'b': 2}, {'a': 3, 'b': 4}, {'a': 1, 'b': 5}]}, 12346: {2007: [{'a': 2, 'b': 7}, {'a': 1, 'b': 9}, {'a': 1, 'b': 12}]}}\n</code></pre>\n\n<p>I want to be able to filter based on the keys of <code>'a'</code> or <code>'b'</code></p>\n\n<p>for example if <code>'a' is 1</code> the my filtered <code>dict</code> would look like:</p>\n\n<pre><code>{12345: {2006: [{'a': 1, 'b': 2}, {'a': 1, 'b': 5}]}, 12346: {2007: [{'a': 1, 'b': 9}, {'a': 1, 'b': 12}]}}\n</code></pre>\n\n<p>I have the following for loop which gets me down to where I have the inner <code>dict's</code> I want, but I am not sure how to put it back into a <code>dict</code> of the same structure.</p>\n\n<pre><code>    d = {12345: {2006: [{'a': 1, 'b': 2}, {'a': 3, 'b': 4}, {'a': 1, 'b': 5}]}, 12346: {2007: [{'a': 2, 'b': 7}, {'a': 1, 'b': 9}, {'a': 1, 'b': 12}]}}\n\n    d_filter = {}\n    for item_code in d.keys():\n        for year in d[item_code]:\n            for item_dict in d[item_code][year]:\n                if item_dict['a'] == 1:\n                    print(item_dict)  # how to put this back in d_filter?\n</code></pre>\n\n<p>producing:</p>\n\n<pre><code>{'a': 1, 'b': 2}\n{'a': 1, 'b': 5}\n{'a': 1, 'b': 9}\n{'a': 1, 'b': 12}\n</code></pre>\n\n<p>I am guessing there is a better way to filter that I can not find, or something with dictionary comprehension that my small mind can not grasp.</p>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["python", "multithreading", "class", "methods"], "comments": [{"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1493238043, "post_id": 43643486, "comment_id": 74335941, "body": "You should use <code>t1.daemon = True</code> in your last example.  Make sure you understand the import restrictions mentioned in <a href=\"https://docs.python.org/2/library/threading.html#importing-in-threaded-code\" rel=\"nofollow noreferrer\">docs.python.org/2/library/&hellip;</a> before you elect to call <code>.start()</code> in the <code>__init__()</code> method of a global object..."}], "answers": [{"tags": [], "owner": {"reputation": 440, "user_id": 7406574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-HCDi5HoXGR0/AAAAAAAAAAI/AAAAAAAAAPc/2zCs49q5XfI/photo.jpg?sz=128", "display_name": "Max Paymar", "link": "https://stackoverflow.com/users/7406574/max-paymar"}, "is_accepted": true, "score": 0, "last_activity_date": 1493237364, "creation_date": 1493237364, "answer_id": 43643657, "question_id": 43643486, "link": "https://stackoverflow.com/questions/43643486/multithreading-class-vs-methods/43643657#43643657", "title": "multithreading class vs methods", "body": "<p>My rule of thumb for using classes is that you shouldn't use them until you find a good use case for them. One use case would be if you wanted to define multiple methods to interact with the thread. But usually developers can't see the future when designing classes so it's better to just code using functions, and when you see a use case for classes refactor your code. What I mean is, you might spend a lot of time designing a class and not even end up using or needing a lot of the functionality you implemented; so you wasted your time and made your code complex for no reason.</p>\n"}], "owner": {"reputation": 927, "user_id": 4950204, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/246295ada7d994b6b6a585163107f770?s=128&d=identicon&r=PG&f=1", "display_name": "kaminsknator", "link": "https://stackoverflow.com/users/4950204/kaminsknator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 43643657, "answer_count": 1, "score": 0, "last_activity_date": 1493237364, "creation_date": 1493236725, "question_id": 43643486, "link": "https://stackoverflow.com/questions/43643486/multithreading-class-vs-methods", "title": "multithreading class vs methods", "body": "<p>I'm starting to write a program that uses threads but after searching how to start threads in Python I have found two methods that accomplish the same thing. There must be a difference or advantage one over the other. Confused which road I should go down.</p>\n\n<p>My thread is going to be ran in the background continuously and never stop until the program is told to by the user. Also one or more arguments will be passed to the thread when started.</p>\n\n<p>one way using classes:</p>\n\n<pre><code>from threading import Thread\n\nclass myClassA(Thread):\n    def __init__(self):\n        Thread.__init__(self)\n        self.daemon = True\n        self.start()\n    def run(self):\n        while True:\n            print 'A'\n\nmyClassA()\nwhile True:\n    pass\n</code></pre>\n\n<p>Second way using methods:</p>\n\n<pre><code>from threading import Thread\n\ndef runA():\n    while True:\n        print 'A\\n'\n\nif __name__ == \"__main__\":\n    t1 = Thread(target = runA)\n    t1.setDaemon(True)\n    t1.start()\n    while True:\n        pass\n</code></pre>\n"}, {"tags": ["python", "aws-lambda"], "answers": [{"tags": [], "owner": {"reputation": 285, "user_id": 6660785, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/33bf9fc870af77f45e296578e3e8bbc8?s=128&d=identicon&r=PG&f=1", "display_name": "Isabel Cariod", "link": "https://stackoverflow.com/users/6660785/isabel-cariod"}, "is_accepted": false, "score": 1, "last_activity_date": 1493240976, "last_edit_date": 1493240976, "creation_date": 1493239756, "answer_id": 43644268, "question_id": 43643380, "link": "https://stackoverflow.com/questions/43643380/python-how-to-know-which-url-is-failing-using-urllib2-and-pool-map/43644268#43644268", "title": "Python: How to know which URL is failing using urllib2 and pool.map?", "body": "<pre><code>from multiprocessing import Process, Pool\nimport urllib2\n\n# Asynchronous request\ndef async_reqest(url):\n    try:\n        request = urllib2.Request(url)\n        response = urllib2.urlopen(request)\n        print response.info()\n    except:\n        pass\n\npool = Pool()\npool.map(async_reqest, links)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13750, "user_id": 3830997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lg47I.png?s=128&g=1", "display_name": "Matthias Fripp", "link": "https://stackoverflow.com/users/3830997/matthias-fripp"}, "is_accepted": true, "score": 1, "last_activity_date": 1493240418, "creation_date": 1493240418, "answer_id": 43644428, "question_id": 43643380, "link": "https://stackoverflow.com/questions/43643380/python-how-to-know-which-url-is-failing-using-urllib2-and-pool-map/43644428#43644428", "title": "Python: How to know which URL is failing using urllib2 and pool.map?", "body": "<p>I'm not sure whether the exception object will give you details on the URL that failed. If not, you need to wrap each call to <code>urllib2.urlopen(url)</code> with <code>try</code> and <code>catch</code>. You could do that like this:</p>\n\n<pre><code>urls = [\n    \"https://example.com/gives200.php\", \n    \"https://example.com/alsogives200.php\", \n    \"https://example.com/gives500.php\"\n]\n\ndef my_urlopen(url):\n    try:\n        return urllib2.urlopen(url)\n    except URLError:\n        urllib2.urlopen(\"https://example.com/log_error/?url=\"+url)\n        return None\n\nresults = pool.map(my_urlopen, urls)\n# At this point, any failed requests will have None as their value\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13750, "user_id": 3830997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lg47I.png?s=128&g=1", "display_name": "Matthias Fripp", "link": "https://stackoverflow.com/users/3830997/matthias-fripp"}, "edited": false, "score": 1, "creation_date": 1493241002, "post_id": 43644503, "comment_id": 74337542, "body": "When <code>pool.map</code> encounters an exception, it raises that one and then terminates all the other tasks. So with this code, you may find that some of the urls are never tried. If you want to try every url and log every one that produces an error, you will need something like one of the other two answers here."}, {"owner": {"reputation": 2768, "user_id": 713874, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ie8yV.jpg?s=128&g=1", "display_name": "Bing", "link": "https://stackoverflow.com/users/713874/bing"}, "reply_to_user": {"reputation": 13750, "user_id": 3830997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lg47I.png?s=128&g=1", "display_name": "Matthias Fripp", "link": "https://stackoverflow.com/users/3830997/matthias-fripp"}, "edited": false, "score": 0, "creation_date": 1493241351, "post_id": 43644503, "comment_id": 74337690, "body": "That&#39;s EXTREMELY good to know, thank you!  I&#39;ll rework my &quot;exact code&quot; solution, then accept your answer."}], "tags": [], "owner": {"reputation": 2768, "user_id": 713874, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ie8yV.jpg?s=128&g=1", "display_name": "Bing", "link": "https://stackoverflow.com/users/713874/bing"}, "is_accepted": false, "score": 1, "last_activity_date": 1493242071, "last_edit_date": 1495540465, "creation_date": 1493240705, "answer_id": 43644503, "question_id": 43643380, "link": "https://stackoverflow.com/questions/43643380/python-how-to-know-which-url-is-failing-using-urllib2-and-pool-map/43644503#43644503", "title": "Python: How to know which URL is failing using urllib2 and pool.map?", "body": "<p><strong>EDIT</strong> See <strong>UPDATE 3</strong> above.  <a href=\"https://stackoverflow.com/a/43644428/713874\">mfripp's answer</a> needed to be MERGED with this one to make it wholly complete.</p>\n\n<p>I updated the original post to explain, but this is exactly the code I needed.  <strong>I could not find any documentation which lead me to <code>e.url</code>, it was simply a lucky guess on my end.</strong></p>\n\n<pre><code>urls = [\n    \"https://example.com/gives200.php\", \n    \"https://example.com/alsogives200.php\", \n    \"https://example.com/gives500.php\"\n];\n\ntry:\n     results = pool.map(urllib2.urlopen, urls);\nexcept Exception as e:\n     urllib2.urlopen(\"https://example.com/log_error/?url=\"+str(e.url)+\"&amp;code=\"+str(e.code)+\"&amp;reason=\"+e.reason;\n</code></pre>\n"}], "owner": {"reputation": 2768, "user_id": 713874, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ie8yV.jpg?s=128&g=1", "display_name": "Bing", "link": "https://stackoverflow.com/users/713874/bing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 732, "favorite_count": 0, "accepted_answer_id": 43644428, "answer_count": 3, "score": 1, "last_activity_date": 1493242071, "creation_date": 1493236362, "last_edit_date": 1495541402, "question_id": 43643380, "link": "https://stackoverflow.com/questions/43643380/python-how-to-know-which-url-is-failing-using-urllib2-and-pool-map", "title": "Python: How to know which URL is failing using urllib2 and pool.map?", "body": "<p>I'm trying to simultaneously call 3 URLs and log any errors.  Here is my sample code:</p>\n\n<pre><code>urls = [\"https://example.com/gives200.php\", \"https://example.com/alsogives200.php\", \"https://example.com/gives500.php\"];\n\ntry:\n     results = pool.map(urllib2.urlopen, urls);\n except URLError:\n     urllib2.urlopen(\"https://example.com/log_error/?url=\"+URLError.url);\n</code></pre>\n\n<p>I just want to know which URLs (if any) erred by having them call that <code>/log_error/</code> URL.  But when I have the code like this, I'm getting an error saying <code>URLError</code> is not defined.</p>\n\n<p>I do have these imports at the top of my code:</p>\n\n<pre><code>import urllib2 \nfrom multiprocessing.dummy import Pool as ThreadPool \n</code></pre>\n\n<p>Here is my whole error response (this is using AWS Lambda, for whatever it's worth)</p>\n\n<pre><code>{\n  \"stackTrace\": [\n    [\n      \"/var/task/lambda_function.py\",\n      27,\n      \"lambda_handler\",\n      \"except Error as e:\"\n    ]\n  ],\n  \"errorType\": \"NameError\",\n  \"errorMessage\": \"global name 'URLError' is not defined\"\n}\n</code></pre>\n\n<p>How do I capture the erroring URLs so I know which they are?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I figured it out: the <code>urllib.error</code> class which <code>URLError</code> is a part of is just that: <code>urllib</code>, <em>not</em> <code>urllib2</code>.</p>\n\n<p>The top of this documentation page explains that: <a href=\"https://docs.python.org/2/library/urllib2.html\" rel=\"nofollow noreferrer\">https://docs.python.org/2/library/urllib2.html</a></p>\n\n<p>And here is the more detailed HTTPError object that I ACTUALLY get:\n<a href=\"https://docs.python.org/2/library/urllib2.html#urllib2.HTTPError\" rel=\"nofollow noreferrer\">https://docs.python.org/2/library/urllib2.html#urllib2.HTTPError</a></p>\n\n<p>The problem of erroring URL itself still exists though... currently I have no way to identify which URL is the one erroring.</p>\n\n<p><strong>UPDATE 2</strong></p>\n\n<p>Apparently <code>str(e.url)</code> was all I needed.  I did not find any documentation on this; it was solely a lucky guess on my part.</p>\n\n<p>So this is the working code now:</p>\n\n<pre><code>urls = [\"https://example.com/gives200.php\", \"https://example.com/alsogives200.php\", \"https://example.com/gives500.php\"];\n\ntry:\n     results = pool.map(urllib2.urlopen, urls);\n except Exception as e:\n     urllib2.urlopen(\"https://example.com/log_error/?url=\"+str(e.url)+\"&amp;code=\"+str(e.code)+\"&amp;reason=\"+e.reason;\n</code></pre>\n\n<p><strong>UPDATE 3</strong></p>\n\n<p>Thanks to @mfripp <a href=\"https://stackoverflow.com/questions/43643380/python-how-to-know-which-url-is-failing-using-urllib2-and-pool-map#comment74337542_43644503\">informing me about the dangers of <code>pool.map</code></a> I have revised this code once more to this:</p>\n\n<pre><code>def my_urlopen(url):\n    try:\n        return urllib2.urlopen(url)\n    except URLError:\n        urllib2.urlopen(\"https://example.com/log_error/?url=\"+url)\n        return None\n\ndef lambda_handler(event, context):\n\n    urls = [\n        \"https://example.com/gives200.php\", \n        \"https://example.com/alsogives200.php\", \n        \"https://example.com/gives500.php\"\n    ];\n\n    results = pool.map(urllib2.urlopen, urls);\n\n    return urls;\n</code></pre>\n"}, {"tags": ["python", "ssl", "https", "debian", "python-telegram-bot"], "answers": [{"tags": [], "owner": {"reputation": 118, "user_id": 3826254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d7b1900d29da62c0da4aa4004974ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Shinlos", "link": "https://stackoverflow.com/users/3826254/shinlos"}, "is_accepted": false, "score": 0, "last_activity_date": 1493492449, "last_edit_date": 1495535482, "creation_date": 1493492449, "answer_id": 43699426, "question_id": 43643316, "link": "https://stackoverflow.com/questions/43643316/error-ssl-with-python-https/43699426#43699426", "title": "Error SSL with python (https)", "body": "<p>I would recommend trying to reinstall python2.7 after installing OpenSSL, as was suggested in the following stackoverflow answer:</p>\n\n<p><a href=\"https://stackoverflow.com/a/19926770/3826254\">https://stackoverflow.com/a/19926770/3826254</a></p>\n\n<p>Or simply use <a href=\"https://pypi.python.org/pypi/pip\" rel=\"nofollow noreferrer\">pip</a> to install the python package instead.</p>\n"}, {"tags": [], "owner": {"reputation": 391, "user_id": 2817347, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvkK3.jpg?s=128&g=1", "display_name": "Saurav Kumar", "link": "https://stackoverflow.com/users/2817347/saurav-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1508428230, "creation_date": 1508428230, "answer_id": 46833937, "question_id": 43643316, "link": "https://stackoverflow.com/questions/43643316/error-ssl-with-python-https/46833937#46833937", "title": "Error SSL with python (https)", "body": "<p>I got exactly the same error when I was trying to install <strong>python2.7.13</strong> from <strong><a href=\"http://https://www.python.org/ftp/python/2.7.13/Python-2.7.13.tgz\" rel=\"nofollow noreferrer\">source</a></strong>.</p>\n\n<p>I tried a lot of things and after spending a lot of time got to know that one of the library <code>libreadline6-dev</code> was missing.</p>\n\n<p>So installed it:</p>\n\n<pre><code>sudo apt-get install libreadline6-dev\n</code></pre>\n\n<p>and it worked fine for me.</p>\n\n<p>Here are the commands which I used to compile and make install (inside Python-2.7.13 directory:</p>\n\n<pre><code>./configure --prefix /usr/bin/python2.7.13\nsudo make altinstall\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7927646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086f721f3862d3fc1e2d111dd09a940a?s=128&d=identicon&r=PG&f=1", "display_name": "rdpdo", "link": "https://stackoverflow.com/users/7927646/rdpdo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 647, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1508428230, "creation_date": 1493236142, "question_id": 43643316, "link": "https://stackoverflow.com/questions/43643316/error-ssl-with-python-https", "title": "Error SSL with python (https)", "body": "<p>I am under debian 8</p>\n\n<p>I'd tried to instal : python-telegram-bot (<a href=\"https://github.com/python-telegram-bot/python-telegram-bot\" rel=\"nofollow noreferrer\">https://github.com/python-telegram-bot/python-telegram-bot</a>) but when I did \"python setup.py install\" it make an error :</p>\n\n<pre><code>Installed /usr/local/lib/python2.7/site-packages/python_telegram_bot-5.3.1-py2.7.egg\nProcessing dependencies for python-telegram-bot==5.3.1 Searching for certifi \nReading https://pypi.python.org/simple/certifi/\nDownload error on https://pypi.python.org/simple/certifi/: unknown url type: https -- Some packages may not be found!\n</code></pre>\n\n<p>So I have tried to re-install python 2.7.13 with open-ssl:</p>\n\n<pre><code>apt-get install opensll\napt-get install libssl-dev\n</code></pre>\n\n<p>I edited the /Modules/setup.dist :</p>\n\n<pre><code># Socket module helper for socket(2)\n_socket socketmodule.c timemodule.c\n\n# Socket module helper for SSL support; you must comment out the other\n# socket line above, and possibly edit the SSL variable: SSL=/usr/local/ssl\n_ssl _ssl.c \\\n        -DUSE_SSL -I$(SSL)/include -I$(SSL)/include/openssl \\\n        -L$(SSL)/lib -lssl -lcrypto\n</code></pre>\n\n<p>After that, I ran ./configure and make &amp;&amp; make install</p>\n\n<p>I have the error :during install :</p>\n\n<pre><code>Makefile:1081: recipe for target 'libinstall' failed make: *** [libinstall] \nError 1\n</code></pre>\n\n<p>And python-telegram-bot would'n compile ...</p>\n\n<p>Can someone have a idea ?</p>\n\n<p>Thanks you very much.\nRegards</p>\n"}, {"tags": ["python", "for-loop", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 1486, "user_id": 6637004, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/84f0334c76323d612a5fefc5b1d2deef?s=128&d=identicon&r=PG&f=1", "display_name": "maddie", "link": "https://stackoverflow.com/users/6637004/maddie"}, "edited": false, "score": 0, "creation_date": 1493237475, "post_id": 43643441, "comment_id": 74335647, "body": "I believe it needs to be &quot;find(&quot;div&quot;, {&#39;class&#39;:&quot;name&quot;})&quot; but otherwise it works"}], "tags": [], "owner": {"reputation": 6200, "user_id": 1040092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/se31H.jpg?s=128&g=1", "display_name": "Wondercricket", "link": "https://stackoverflow.com/users/1040092/wondercricket"}, "is_accepted": true, "score": 2, "last_activity_date": 1493236584, "creation_date": 1493236584, "answer_id": 43643441, "question_id": 43643305, "link": "https://stackoverflow.com/questions/43643305/beautiful-soup-find-returns-attributeerror/43643441#43643441", "title": "Beautiful Soup Find() returns AttributeError", "body": "<p>The problem is not with your <code>tag.find('div', ...)</code>, but rather your <code>soup.findAll('a')</code>. You are pulling every <code>a</code> tag, even those without child tags you are trying to pull data from</p>\n\n<p>By the looks of what you are needing, you need to add a <code>class</code> to your <code>findAll</code> as well</p>\n\n<pre><code>aTag = soup.findAll('a', {'class': 'food'})\n</code></pre>\n"}], "owner": {"reputation": 1486, "user_id": 6637004, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/84f0334c76323d612a5fefc5b1d2deef?s=128&d=identicon&r=PG&f=1", "display_name": "maddie", "link": "https://stackoverflow.com/users/6637004/maddie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 959, "favorite_count": 0, "accepted_answer_id": 43643441, "answer_count": 1, "score": 2, "last_activity_date": 1493236584, "creation_date": 1493236130, "last_edit_date": 1495540010, "question_id": 43643305, "link": "https://stackoverflow.com/questions/43643305/beautiful-soup-find-returns-attributeerror", "title": "Beautiful Soup Find() returns AttributeError", "body": "<p>I have a web page that is set up like this:</p>\n\n<pre><code>//a bunch of container divs....\n</code></pre>\n\n<p></p>\n\n<pre><code>            &lt;a class=\"food cat2 isotope-item\" href=\"#\" style=\"position: absolute; left: 45px; top: 0px;\"&gt;\n              &lt;div class=\"background\"&gt;&lt;/div&gt;\n              &lt;div class=\"image\"&gt;\n                &lt;img src=\"/assets/score-images/cereal2.png\" alt=\"\"&gt;\n              &lt;/div&gt;\n              &lt;div class=\"score\"&gt;1148&lt;/div&gt;\n              &lt;div class=\"name\"&gt;Cereal with Banana&lt;/div&gt;\n            &lt;/a&gt;\n\n            &lt;a class=\"food cat1 isotope-item\" href=\"#\" style=\"position: absolute; left: 215px; top: 0px;\"&gt;\n              &lt;div class=\"background\"&gt;&lt;/div&gt;\n              &lt;div class=\"image\"&gt;\n                &lt;img src=\"/assets/score-images/burrito-all.png\" alt=\"\"&gt;\n              &lt;/div&gt;\n              &lt;div class=\"score\"&gt;2257&lt;/div&gt;\n              &lt;div class=\"name\"&gt;Beef &amp;amp; Cheese Burrito&lt;/div&gt;\n            &lt;/a&gt;\n\n   //hundreds more a tags....\n\n          &lt;/div&gt;\n</code></pre>\n\n<p>I'm running this code to extra the name and score of each \"a\" attribute. </p>\n\n<pre><code> page = requests.get('http://www.eatlowcarbon.org/food-scores')\n  from bs4 import BeautifulSoup\n  soup = BeautifulSoup(page.content, 'html.parser')\n\n  print('HEllO')\n  foodDict = {}\n  aTag = soup.findAll('a')\n\n  for tag in aTag:\n          print('HELLO 2')\n          name = tag.find(\"div\", {\"class\": \"name\"}).text\n          score = tag.find(\"div\", {\"class\": \"score\"}).text\n          foodDict[name] = score\n          print('hello')\n</code></pre>\n\n<p>Both print statements are successfully executed, and so the second one tells me that I've entered the for loop at least. However, I get the error, </p>\n\n<pre><code>File \"scrapeRecipe.py\", line 40, in &lt;module&gt;\n    name = tag.find(\"div\", {\"class\": \"name\"}).text\nAttributeError: 'NoneType' object has no attribute 'text'\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/8949252/python-attribute-error-nonetype-object-has-no-attribute-something\">From this post</a>, I'm assuming that my code doesn't find any div with a class type equal to \"name\", or \"score\" for that matter. I'm completely new to python. Does anyone have any advice? </p>\n"}, {"tags": ["python", "multithreading", "multiprocessing", "joblib", "htop"], "comments": [{"owner": {"reputation": 2031, "user_id": 4984066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T9n5j.jpg?s=128&g=1", "display_name": "ivan_bilan", "link": "https://stackoverflow.com/users/4984066/ivan-bilan"}, "edited": false, "score": 0, "creation_date": 1544533153, "post_id": 43643253, "comment_id": 94302712, "body": "Did you find a solution to this problem?"}, {"owner": {"reputation": 6134, "user_id": 2424587, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/c95aa6752be7d1cc0e88f7a4ad2f9106?s=128&d=identicon&r=PG", "display_name": "Hanan Shteingart", "link": "https://stackoverflow.com/users/2424587/hanan-shteingart"}, "reply_to_user": {"reputation": 2031, "user_id": 4984066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T9n5j.jpg?s=128&g=1", "display_name": "ivan_bilan", "link": "https://stackoverflow.com/users/4984066/ivan-bilan"}, "edited": false, "score": 1, "creation_date": 1544643751, "post_id": 43643253, "comment_id": 94353221, "body": "nope. no one answered..."}, {"owner": {"reputation": 2031, "user_id": 4984066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T9n5j.jpg?s=128&g=1", "display_name": "ivan_bilan", "link": "https://stackoverflow.com/users/4984066/ivan-bilan"}, "edited": false, "score": 0, "creation_date": 1544688002, "post_id": 43643253, "comment_id": 94366834, "body": "I found the solution eventually, see the answer below."}], "answers": [{"comments": [{"owner": {"reputation": 6134, "user_id": 2424587, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/c95aa6752be7d1cc0e88f7a4ad2f9106?s=128&d=identicon&r=PG", "display_name": "Hanan Shteingart", "link": "https://stackoverflow.com/users/2424587/hanan-shteingart"}, "edited": false, "score": 0, "creation_date": 1544903417, "post_id": 53750913, "comment_id": 94443040, "body": "can you please report an issue in joblib? I guess they should look into it. <a href=\"https://github.com/joblib/joblib/issues\" rel=\"nofollow noreferrer\">github.com/joblib/joblib/issues</a>"}], "tags": [], "owner": {"reputation": 2031, "user_id": 4984066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T9n5j.jpg?s=128&g=1", "display_name": "ivan_bilan", "link": "https://stackoverflow.com/users/4984066/ivan-bilan"}, "is_accepted": false, "score": 1, "last_activity_date": 1544688045, "last_edit_date": 1544688045, "creation_date": 1544646826, "answer_id": 53750913, "question_id": 43643253, "link": "https://stackoverflow.com/questions/43643253/python-multiprocessing-why-do-i-get-so-many-thread-per-process/53750913#53750913", "title": "Python multiprocessing - why do I get so many thread per process?", "body": "<p>It seems to be a problem with a joblib backend called <code>Loky</code> which is used by joblib as a default one, I've had exactly the same problem and the performance tanked massively due to there being too many threads. In order to only use cores and not threads, you have to force joblib to use <code>multiprocessing</code> as backend in the following way:</p>\n\n<pre><code>from joblib import Parallel, delayed\nmy_list_of_results = Parallel(n_jobs=-1, backend=\"multiprocessing\")(delayed(my_function)(my_stuff, ) for my_stuff in whatever)\n</code></pre>\n"}], "owner": {"reputation": 6134, "user_id": 2424587, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/c95aa6752be7d1cc0e88f7a4ad2f9106?s=128&d=identicon&r=PG", "display_name": "Hanan Shteingart", "link": "https://stackoverflow.com/users/2424587/hanan-shteingart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 949, "favorite_count": 3, "answer_count": 1, "score": 4, "last_activity_date": 1544688045, "creation_date": 1493235937, "question_id": 43643253, "link": "https://stackoverflow.com/questions/43643253/python-multiprocessing-why-do-i-get-so-many-thread-per-process", "title": "Python multiprocessing - why do I get so many thread per process?", "body": "<p>I am using <a href=\"https://pythonhosted.org/joblib/generated/joblib.Parallel.html?highlight=parallel\" rel=\"nofollow noreferrer\">joblib</a> (wrapper of multiprocessing package) to run a loop over some function over enumerable of arguments. When I do <code>htop</code> I see the number of processes equal to the number of cpu count (<code>n_jobs=-1</code> does that for you automatically). However, I also see that each process has as many threads as the <code>cpu_count - 1</code>... Is this expected? How come there is a second layer of parallelism and where does it come from?</p>\n"}, {"tags": ["python", "bash", "matplotlib", "debian", "python-3.5"], "comments": [{"owner": {"reputation": 1016, "user_id": 3856624, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b18b401d3a489632aa8eb16cb9eb04cf?s=128&d=identicon&r=PG&f=1", "display_name": "ivan7707", "link": "https://stackoverflow.com/users/3856624/ivan7707"}, "edited": false, "score": 0, "creation_date": 1493236278, "post_id": 43643237, "comment_id": 74334971, "body": "Try this:  sudo apt-get install python3-pip, then sudo pip3 install matplotlib"}], "answers": [{"comments": [{"owner": {"reputation": 424, "user_id": 5576024, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/HqOM5.jpg?s=128&g=1", "display_name": "Alon", "link": "https://stackoverflow.com/users/5576024/alon"}, "edited": false, "score": 0, "creation_date": 1493236996, "post_id": 43643371, "comment_id": 74335390, "body": "nope, first one works finde, second just tells me that there is nothing to be done since everything&#39;s into place yet"}], "tags": [], "owner": {"reputation": 419, "user_id": 7870534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ab97da3bdf3aeeee7b07c8ca0a9548?s=128&d=identicon&r=PG&f=1", "display_name": "Aklys", "link": "https://stackoverflow.com/users/7870534/aklys"}, "is_accepted": false, "score": 0, "last_activity_date": 1493236344, "creation_date": 1493236344, "answer_id": 43643371, "question_id": 43643237, "link": "https://stackoverflow.com/questions/43643237/matplotlib-works-with-default-python-but-not-python3-5-on-debian/43643371#43643371", "title": "matplotlib works with default python but not python3.5 on debian", "body": "<p>Try installing pip3 with:</p>\n\n<pre><code>sudo apt-get install python3-pip\n</code></pre>\n\n<p>and then try installing matplotlib with:</p>\n\n<pre><code>sudo pip3 install matplotlib\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 424, "user_id": 5576024, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/HqOM5.jpg?s=128&g=1", "display_name": "Alon", "link": "https://stackoverflow.com/users/5576024/alon"}, "edited": false, "score": 0, "creation_date": 1493240353, "post_id": 43643728, "comment_id": 74337189, "body": "although this could solve my problem, but my system doesnt let me install a &quot;second pip&quot; besides the first one"}, {"owner": {"reputation": 6394, "user_id": 3327666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/717bb7cd1896b19837f5ab1f4264bc9d?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre de Buyl", "link": "https://stackoverflow.com/users/3327666/pierre-de-buyl"}, "reply_to_user": {"reputation": 424, "user_id": 5576024, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/HqOM5.jpg?s=128&g=1", "display_name": "Alon", "link": "https://stackoverflow.com/users/5576024/alon"}, "edited": false, "score": 0, "creation_date": 1493240442, "post_id": 43643728, "comment_id": 74337237, "body": "Please post the actual error messages. To install the &quot;new&quot; pip, you need to call it with the python3.5 Also, what are the replies to the tests I propose?"}], "tags": [], "owner": {"reputation": 6394, "user_id": 3327666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/717bb7cd1896b19837f5ab1f4264bc9d?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre de Buyl", "link": "https://stackoverflow.com/users/3327666/pierre-de-buyl"}, "is_accepted": false, "score": 0, "last_activity_date": 1493270129, "last_edit_date": 1493270129, "creation_date": 1493237690, "answer_id": 43643728, "question_id": 43643237, "link": "https://stackoverflow.com/questions/43643237/matplotlib-works-with-default-python-but-not-python3-5-on-debian/43643728#43643728", "title": "matplotlib works with default python but not python3.5 on debian", "body": "<p>So, you installed python3.5 from source. What version of Debian are you using? (I suppose Jessie).</p>\n\n<p>If you want to install packages for this Python interpreter, you must have a pip that actually uses it. Two solutions:</p>\n\n<ol>\n<li><p>It is installed. If so,</p>\n\n<pre><code>python3.5 -m pip\n</code></pre>\n\n<p>will work and you can install packages with</p>\n\n<pre><code>python3.5 -m pip install matplotlib\n</code></pre>\n\n<p>or</p>\n\n<pre><code>python3.5 -m pip install --user matplotlib\n</code></pre></li>\n<li><p>It is not installed. You must install it following the instructions at <a href=\"https://packaging.python.org/installing/#requirements-for-installing-packages\" rel=\"nofollow noreferrer\">https://packaging.python.org/installing/#requirements-for-installing-packages</a></p></li>\n</ol>\n\n<p>apt-get will not install the appropriate pip for your needs. It will only install a pip that is related to the python3 (3.4 for jessie I believe) that is also in the apt-get system.</p>\n\n<p>EDIT: in light of the update, you need also to re-compile python3.5 with zip enabled.</p>\n"}, {"comments": [{"owner": {"reputation": 419, "user_id": 7870534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ab97da3bdf3aeeee7b07c8ca0a9548?s=128&d=identicon&r=PG&f=1", "display_name": "Aklys", "link": "https://stackoverflow.com/users/7870534/aklys"}, "edited": false, "score": 0, "creation_date": 1493292539, "post_id": 43645669, "comment_id": 74360106, "body": "Nice on solving it. But I run two python environments (2.7.9 and 3.4.2) and didn&#39;t have to anything other than install them (via apt-get) and execute the specific commands for each of the installed environments. Such as pip for 2.7.9 and pip3 for 3.4.2."}], "tags": [], "owner": {"reputation": 424, "user_id": 5576024, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/HqOM5.jpg?s=128&g=1", "display_name": "Alon", "link": "https://stackoverflow.com/users/5576024/alon"}, "is_accepted": false, "score": 0, "last_activity_date": 1493246275, "creation_date": 1493246275, "answer_id": 43645669, "question_id": 43643237, "link": "https://stackoverflow.com/questions/43643237/matplotlib-works-with-default-python-but-not-python3-5-on-debian/43645669#43645669", "title": "matplotlib works with default python but not python3.5 on debian", "body": "<p>I actually could solve the problem now. </p>\n\n<p>See this link for a reasonable description on how to run two different versions of python on the same system (and as @Pierre de Buyl suggested) use two different pip versions on the same system</p>\n\n<p><a href=\"https://www.linkedin.com/pulse/20140815081557-89781742-how-to-install-and-use-python-with-different-versions-on-same-linux-machine\" rel=\"nofollow noreferrer\">https://www.linkedin.com/pulse/20140815081557-89781742-how-to-install-and-use-python-with-different-versions-on-same-linux-machine</a></p>\n"}], "owner": {"reputation": 424, "user_id": 5576024, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/HqOM5.jpg?s=128&g=1", "display_name": "Alon", "link": "https://stackoverflow.com/users/5576024/alon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 371, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1493270129, "creation_date": 1493235895, "last_edit_date": 1493240978, "question_id": 43643237, "link": "https://stackoverflow.com/questions/43643237/matplotlib-works-with-default-python-but-not-python3-5-on-debian", "title": "matplotlib works with default python but not python3.5 on debian", "body": "<p>I have this issue. I think it's best described when I show you my bash commands that I used to produce the problem. See here: </p>\n\n<pre><code>josch@oogway:~$ python\nPython 2.7.9 (default, Jun 29 2016, 13:08:31) \n[GCC 4.9.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import matplotlib\n&gt;&gt;&gt; #works\n\n\n\njosch@oogway:~$ python3.5\nPython 3.5.0 (default, Apr 26 2017, 21:03:53) \n[GCC 4.9.2] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import matplotlib\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nImportError: No module named 'matplotlib'\n&gt;&gt;&gt; #what??\n</code></pre>\n\n<p>Matplotlib was installed by:</p>\n\n<pre><code> sudo apt-get install python-matplotlib\n</code></pre>\n\n<p>The \"default\" python came with my OS installation, python3.5 was downloaded and then compiled/installed from source. </p>\n\n<p>Can anyone help? Tried to solve it myselve for 2 hours now but google can't find answer</p>\n\n<p>Edit: I'm trying to install a \"second pip\" that works with my second installation of Python, which is Python3.5. My default-Python that is managed by the OS is Python 2.7.9. Now, as suggested I did:</p>\n\n<pre><code>joschua@oogway:~/Downloads$ wget https://bootstrap.pypa.io/get-pip.py\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>python3.5 get-pip.py\n</code></pre>\n\n<p>which gave me:</p>\n\n<pre><code>joschua@oogway:~/Downloads$ python3.5 get-pip.py \nTraceback (most recent call last):\n  File \"get-pip.py\", line 20061, in &lt;module&gt;\n    main()\n  File \"get-pip.py\", line 194, in main\n    bootstrap(tmpdir=tmpdir)\n  File \"get-pip.py\", line 82, in bootstrap\n    import pip\nzipimport.ZipImportError: can't decompress data; zlib not available\n</code></pre>\n"}, {"tags": ["python", "protocol-buffers"], "comments": [{"owner": {"reputation": 29741, "user_id": 741970, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/3MjXC.png?s=128&g=1", "display_name": "Dmitry Minkovsky", "link": "https://stackoverflow.com/users/741970/dmitry-minkovsky"}, "edited": false, "score": 0, "creation_date": 1493240753, "post_id": 43643218, "comment_id": 74337405, "body": "My solution for now is to switch to Python3. For some reason imports work differently, though I&#39;m not sure why"}], "owner": {"reputation": 29741, "user_id": 741970, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/3MjXC.png?s=128&g=1", "display_name": "Dmitry Minkovsky", "link": "https://stackoverflow.com/users/741970/dmitry-minkovsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1493302880, "creation_date": 1493235805, "last_edit_date": 1493302880, "question_id": 43643218, "link": "https://stackoverflow.com/questions/43643218/how-can-i-import-sources-generated-by-the-protocol-buffers-compiler", "title": "How can I import sources generated by the Protocol Buffers compiler?", "body": "<p>I am using the Protocol Buffers compiler to generate Python source code.</p>\n\n<p>The directory structure it generates looks like</p>\n\n<pre><code>namespace/\n|-- package1/\n|   \\-- messages_pb2.py\n|-- package2/\n    \\-- messages_pb2.py\n</code></pre>\n\n<p>It does not include <code>__init__.py</code> files. Given that the compiler wipes the whole directory structure on each compilation, adding the <code>__init__.py</code> files is not an option, and suggests that the built sources are intended to be imported some other ways.</p>\n\n<p>I have tried adding the path to <code>namespace</code> to <code>sys.path</code> but for some reason the import still fails:</p>\n\n<pre><code>&gt;&gt;&gt; from sys import path\n&gt;&gt;&gt; path.append(... absolute path to `namespace` ...)\n&gt;&gt;&gt; import package1.messages_pb2\n... ImportError ...\n</code></pre>\n\n<p>How are the Protocol Buffers generated sources intended to be used?</p>\n\n<p>So notes:</p>\n\n<ul>\n<li>I am using Python 2.7</li>\n<li>Some of the <code>messages_pb2</code> modules reference the other packages. So <code>package2.messages_pb2</code> might have <code>from namespace.package1 import messages_pb2</code></li>\n</ul>\n\n<p>I use Python very infrequently and am not coming up with a solution.</p>\n"}, {"tags": ["python", "animation", "pygame"], "comments": [{"owner": {"reputation": 7155, "user_id": 6486738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205523648805608/picture?type=large", "display_name": "Ted Klein Bergman", "link": "https://stackoverflow.com/users/6486738/ted-klein-bergman"}, "edited": false, "score": 1, "creation_date": 1493240847, "post_id": 43643195, "comment_id": 74337464, "body": "<code>if event.type == K_DOWN</code> should be <code>if event.key == K_DOWN</code>. When you have this little code, try to rewrite the program in a different file (without copying) and you&#39;ll most likely resolve problems that are caused by mistyping. It&#39;ll help you find an answer faster than positing it here. Also, try use English exclusively in your code, or else it might be hard for other people to help you when the code gets a bit larger."}, {"owner": {"reputation": 73, "user_id": 7927581, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10213436963865094/picture?type=large", "display_name": "Adam Harmand", "link": "https://stackoverflow.com/users/7927581/adam-harmand"}, "reply_to_user": {"reputation": 7155, "user_id": 6486738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205523648805608/picture?type=large", "display_name": "Ted Klein Bergman", "link": "https://stackoverflow.com/users/6486738/ted-klein-bergman"}, "edited": false, "score": 0, "creation_date": 1493252876, "post_id": 43643195, "comment_id": 74341608, "body": "Thanks dude, next time I will read my code properly before  I ask questions."}, {"owner": {"reputation": 3397, "user_id": 7711283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qCfAB.jpg?s=128&g=1", "display_name": "Claudio", "link": "https://stackoverflow.com/users/7711283/claudio"}, "edited": false, "score": 0, "creation_date": 1493261743, "post_id": 43643195, "comment_id": 74343802, "body": "Now you have an answer to your question posted here and can do for the first time the exercise of accepting an answer (you have to click the <code>V</code>) . To upvote it you will need some more reputation points (15 if I know it right), but your vote will be put in a queue for later. Bonjour and WELCOME to stackoverflow :) ."}, {"owner": {"reputation": 73, "user_id": 7927581, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10213436963865094/picture?type=large", "display_name": "Adam Harmand", "link": "https://stackoverflow.com/users/7927581/adam-harmand"}, "edited": false, "score": 1, "creation_date": 1493281983, "post_id": 43643195, "comment_id": 74352597, "body": "Bonjour et merci pour la r&#233;ponse :) !"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 7927581, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10213436963865094/picture?type=large", "display_name": "Adam Harmand", "link": "https://stackoverflow.com/users/7927581/adam-harmand"}, "edited": false, "score": 0, "creation_date": 1493282020, "post_id": 43647772, "comment_id": 74352622, "body": "Danke che, Halo from France ;) !"}], "tags": [], "owner": {"reputation": 3397, "user_id": 7711283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qCfAB.jpg?s=128&g=1", "display_name": "Claudio", "link": "https://stackoverflow.com/users/7711283/claudio"}, "is_accepted": true, "score": 0, "last_activity_date": 1493261465, "last_edit_date": 1493261465, "creation_date": 1493260988, "answer_id": 43647772, "question_id": 43643195, "link": "https://stackoverflow.com/questions/43643195/pygame-curtain-animation-not-working/43647772#43647772", "title": "Pygame curtain animation not working", "body": "<p>The code below moves both pictures on any KEYDOWN. Uncomment the print() commands to get some insight about the events going on (greetings to France from Germany :) where <code>window</code> is <code>Fenster</code> quite close to <code>fenetre</code> which means in Pygame <code>display</code>):  </p>\n\n<pre><code>import pygame\nfrom pygame.locals import *\n\npygame.init()\nfenetre = pygame.display.set_mode((700, 420))\n\nfond1 = pygame.image.load(\"cpart1.jpg\").convert_alpha()\nfond2 = pygame.image.load(\"cpart2.jpg\").convert_alpha()\n\nfenetre.blit(fond1, (350,0))\nfenetre.blit(fond2,(0,0))\n\npos_fond1 = 350\npos_fond2 = 0\n\npygame.display.flip()\n\ncontinuer = 1\nwhile continuer:\n    for event in pygame.event.get():\n        # print(event)        \n        if event.type == QUIT:                      \n            continuer = 0      \n        if event.type == KEYDOWN :\n            # print(\"KEYDOWN\")\n            pos_fond1 = pos_fond1 - 20\n            pos_fond2 = pos_fond2 + 20\n\n    fenetre.blit(fond1, (pos_fond1,0))\n    fenetre.blit(fond2, (pos_fond2,0))\n\n    pygame.display.flip()\n    pygame.display.update()\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 7927581, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10213436963865094/picture?type=large", "display_name": "Adam Harmand", "link": "https://stackoverflow.com/users/7927581/adam-harmand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 43647772, "answer_count": 1, "score": 1, "last_activity_date": 1493261465, "creation_date": 1493235745, "question_id": 43643195, "link": "https://stackoverflow.com/questions/43643195/pygame-curtain-animation-not-working", "title": "Pygame curtain animation not working", "body": "<p>I'm new to StackOverflow and in my daily life I help friends do some programming.</p>\n\n<p>So I have a question for you, I have a curtain background divided by two pictures and I want when I press the Down key to open a little bite the curtain. So here is my code, I don't know why it's not working, it drives me nuts :/ .</p>\n\n<p><pre> <code> \n    import pygame\n    from pygame.locals import *</p>\n\n<pre><code>pygame.init()\n\n\nfenetre = pygame.display.set_mode((700, 420))\n\n\nfond1 = pygame.image.load(\"cpart1.jpg\").convert_alpha()\nfond2 = pygame.image.load(\"cpart2.jpg\").convert_alpha()\n\nfenetre.blit(fond1, (350,0))\nfenetre.blit(fond2,(0,0))\n\npos_fond1 = 350\npos_fond2 = 0\n\n\npygame.display.flip()\n\n\ncontinuer = 1\nwhile continuer:\n        for event in pygame.event.get():                   \n            if event.type == QUIT:                      \n                continuer = 0      \n            if event.type == KEYDOWN :\n                    if event.type == K_DOWN:\n                            pos_fond1 = pos_fond1 - 20\n                            pos_fond2 = pos_fond2 + 20\n\n\n    fenetre.blit(fond1, (pos_fond1,0))\n    fenetre.blit(fond2, (pos_fond2,0))\n\n    pygame.display.flip()\n    pygame.display.update()\n</code></pre>\n\n<p></code> </pre> </p>\n\n<p>So I don't know I move the object within the x position and I don't know what's not working. Can you help me people of StackOverflow.</p>\n"}, {"tags": ["python", "dictionary", "tuples"], "comments": [{"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 3, "creation_date": 1493235708, "post_id": 43643170, "comment_id": 74334653, "body": "That&#39;s not a dictionary. Dictionaries have curly brackets and colons."}, {"owner": {"reputation": 694, "user_id": 5574063, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LO9TW.png?s=128&g=1", "display_name": "af3ld", "link": "https://stackoverflow.com/users/5574063/af3ld"}, "edited": false, "score": 0, "creation_date": 1493237545, "post_id": 43643170, "comment_id": 74335683, "body": "@ChrisC what <code>type</code> is GroupSearch?"}, {"owner": {"reputation": 53, "user_id": 4504433, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e6ba11c2ee2b6a58d8feaf6537f34469?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisC", "link": "https://stackoverflow.com/users/4504433/chrisc"}, "reply_to_user": {"reputation": 694, "user_id": 5574063, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LO9TW.png?s=128&g=1", "display_name": "af3ld", "link": "https://stackoverflow.com/users/5574063/af3ld"}, "edited": false, "score": 0, "creation_date": 1493237827, "post_id": 43643170, "comment_id": 74335839, "body": "@af3ld It is type dict"}], "answers": [{"tags": [], "owner": {"reputation": 419, "user_id": 7870534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ab97da3bdf3aeeee7b07c8ca0a9548?s=128&d=identicon&r=PG&f=1", "display_name": "Aklys", "link": "https://stackoverflow.com/users/7870534/aklys"}, "is_accepted": false, "score": 0, "last_activity_date": 1493235987, "creation_date": 1493235987, "answer_id": 43643273, "question_id": 43643170, "link": "https://stackoverflow.com/questions/43643170/how-do-i-parse-a-python-tuple-to-print-each-value-on-new-line/43643273#43643273", "title": "How Do I Parse A Python Tuple To Print Each Value On New Line?", "body": "<p>You are trying to print a list of tuples. You probably want to do something like</p>\n\n<pre><code>for e in GroupName:\n    print(\"GroupName \" + e[1] + \" \" + e[2])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 4504433, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e6ba11c2ee2b6a58d8feaf6537f34469?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisC", "link": "https://stackoverflow.com/users/4504433/chrisc"}, "edited": false, "score": 0, "creation_date": 1493294970, "post_id": 43644876, "comment_id": 74361964, "body": "I tried this and it returned multiple rows that look like this: &lt;generator object &lt;genexpr&gt; at 0x00000000067C5510&gt;"}, {"owner": {"reputation": 53, "user_id": 4504433, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e6ba11c2ee2b6a58d8feaf6537f34469?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisC", "link": "https://stackoverflow.com/users/4504433/chrisc"}, "edited": false, "score": 0, "creation_date": 1493297807, "post_id": 43644876, "comment_id": 74364271, "body": "Actually they are key-value pairs. If you look at my first code snippet, GroupName is the key and the folder info is the values. I verified this with for k,v in GroupSearch print k,v"}, {"owner": {"reputation": 1830, "user_id": 7919125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SutuY.jpg?s=128&g=1", "display_name": "Tom Wyllie", "link": "https://stackoverflow.com/users/7919125/tom-wyllie"}, "reply_to_user": {"reputation": 53, "user_id": 4504433, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e6ba11c2ee2b6a58d8feaf6537f34469?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisC", "link": "https://stackoverflow.com/users/4504433/chrisc"}, "edited": false, "score": 0, "creation_date": 1493328277, "post_id": 43644876, "comment_id": 74383208, "body": "Your first code snippet does not show a dictionary, it shows a class name (which I assume is an unconventially named variable) followed by a space, followed by a list. Dictionaries are defined using <code>{key: value}</code> in python. I think more clarification is needed on what you are trying to do before I can properly answer this question."}], "tags": [], "owner": {"reputation": 1830, "user_id": 7919125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SutuY.jpg?s=128&g=1", "display_name": "Tom Wyllie", "link": "https://stackoverflow.com/users/7919125/tom-wyllie"}, "is_accepted": false, "score": 0, "last_activity_date": 1493242353, "creation_date": 1493242353, "answer_id": 43644876, "question_id": 43643170, "link": "https://stackoverflow.com/questions/43643170/how-do-i-parse-a-python-tuple-to-print-each-value-on-new-line/43644876#43644876", "title": "How Do I Parse A Python Tuple To Print Each Value On New Line?", "body": "<p>Your problem is that you aren't dealing with a dictionary, there are no key value pairs here. What you have is a list of tuples: there are two different data types present. You will need to iterate through the list of groups, and deal with the values of each group tuple.</p>\n\n<p>This produces your desired result:</p>\n\n<pre><code>group_name = [('G:', 'G:/path/to/folder1', 'Full Access'), ('G:', 'G:/path/to/folder2', 'Full Access'), ('G:', 'G:/path/to/folder3', 'Full Access')]\n\nfor group in group_name:\n    print(*(group_property for group_property in group))\n</code></pre>\n\n<p>This loops through the list with <code>for group in group_name</code> and unpacks and prints the tuple that makes up each element in the list, using <code>print(*(group_property for group_property in group))</code></p>\n"}], "owner": {"reputation": 53, "user_id": 4504433, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e6ba11c2ee2b6a58d8feaf6537f34469?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisC", "link": "https://stackoverflow.com/users/4504433/chrisc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 551, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493242353, "creation_date": 1493235657, "question_id": 43643170, "link": "https://stackoverflow.com/questions/43643170/how-do-i-parse-a-python-tuple-to-print-each-value-on-new-line", "title": "How Do I Parse A Python Tuple To Print Each Value On New Line?", "body": "<p>Assuming I have a Python dictionary like so:</p>\n\n<pre><code>GroupName [('G:', 'G:/path/to/folder1', 'Full Access'), ('G:', 'G:/path/to/folder2', 'Full Access'), ('G:', 'G:/path/to/folder3', 'Full Access')]\n</code></pre>\n\n<p>How do I loop through it to print each entry on a new line like so:</p>\n\n<pre><code>GroupName G:/path/to/folder1 Full Access\nGroupName G:/path/to/folder2 Full Access\nGroupName G:/path/to/folder3 Full Access\n</code></pre>\n\n<p>I know that you can do </p>\n\n<pre><code>for k,v in GroupName.items:\n    print k,v\n</code></pre>\n\n<p>which results in </p>\n\n<pre><code>GroupName [('G:', 'G:/path/to/folder1', 'Full Access'), ('G:', 'G:/path/to/folder2', 'Full Access'), ('G:', 'G:/path/to/folder3', 'Full Access')]\n</code></pre>\n\n<p>But I am unsure how to further parse v to print the values individually.</p>\n\n<p>Assistance would be appreciated.</p>\n\n<p>Thank You!</p>\n"}]