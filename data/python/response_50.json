[{"tags": ["python", "pygame"], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 5712884, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-H2wj6Q06kRA/AAAAAAAAAAI/AAAAAAAAADI/H_yjcJHuzzA/photo.jpg?sz=128", "display_name": "Michael.C", "link": "https://stackoverflow.com/users/5712884/michael-c"}, "edited": false, "score": 0, "creation_date": 1450934227, "post_id": 34445797, "comment_id": 56637161, "body": "Thanks :), I was using a tutorial and got kindof confused between all the code"}], "tags": [], "owner": {"reputation": 1920, "user_id": 2277746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GrXaZ.jpg?s=128&g=1", "display_name": "Andrea Dusza", "link": "https://stackoverflow.com/users/2277746/andrea-dusza"}, "is_accepted": true, "score": 1, "last_activity_date": 1450917680, "creation_date": 1450917680, "answer_id": 34445797, "question_id": 34445446, "link": "https://stackoverflow.com/questions/34445446/pygame-window-displays-blank-black-screen/34445797#34445797", "title": "Pygame window displays blank black screen", "body": "<p>Problems:</p>\n\n<ol>\n<li>Indentation error</li>\n<li>Your <code>game_intro()</code> function is defined, but never called</li>\n<li>You wrote <code>gameDisplay</code> instead of <code>screen</code> 4 times, also <code>display_width, display_height</code> instead of <code>width, height</code></li>\n<li>In <code>game_intro()</code>, code after your infinite loop is never called</li>\n<li><code>pygame.display.update(screen)</code> does not work, it should be <code>pygame.display.update()</code> to update the whole screen. <code>flip(screen)</code> also needs to be changed to <code>flip()</code></li>\n<li>The function <code>text_objects()</code> is not defined but I found the definition in the example you probably copied the code from :)</li>\n</ol>\n\n<p>Corrected code:</p>\n\n<pre><code>import sys\nimport pygame\nfrom pygame.locals import *\npygame.init()\n\nsize = width, height = 720, 480\nspeed = [2, 2]\nblack = (0,0,0)\nblue = (0,0,255)\ngreen = (0,255,0)\nred = (255,0,0)\n\nscreen = pygame.display.set_mode(size)\n\npygame.display.set_caption(\"BETA::00.0.1\")\n\nclock = pygame.time.Clock()\n\n\ndef text_objects(text, font):\n    textSurface = font.render(text, True, black)\n    return textSurface, textSurface.get_rect()\n\ndef game_intro():\n\n  screen.fill(blue)\n\n  largeText = pygame.font.Font('freesansbold.ttf',115)\n  TextSurf, TextRect = text_objects(\"BETA\", largeText)\n  TextRect.center = ((width/2),(height/2))\n  screen.blit(TextSurf, TextRect)\n\n  pygame.draw.rect(screen, green,(150,450,100,50))\n  pygame.draw.rect(screen, red,(550,450,100,50))\n\n  pygame.display.flip()\n  pygame.display.update()\n  clock.tick(15)\n\n  intro = True\n\n  while intro:\n     for event in pygame.event.get():\n         print(event)\n         if event.type == pygame.QUIT:\n             pygame.quit()\n             quit()\n\n\ngame_intro()\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 5712884, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-H2wj6Q06kRA/AAAAAAAAAAI/AAAAAAAAADI/H_yjcJHuzzA/photo.jpg?sz=128", "display_name": "Michael.C", "link": "https://stackoverflow.com/users/5712884/michael-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5731, "favorite_count": 0, "accepted_answer_id": 34445797, "answer_count": 1, "score": 2, "last_activity_date": 1450917680, "creation_date": 1450914528, "question_id": 34445446, "link": "https://stackoverflow.com/questions/34445446/pygame-window-displays-blank-black-screen", "title": "Pygame window displays blank black screen", "body": "<p>Here is my code, please keep in mind that I picked up python a couple of days ago so my code may be incorrectly made, ect. I am trying to make a window that will display some text (beta) and will display two small rectangles that I want to make into buttons. </p>\n\n<pre><code>import sys\nimport pygame\nfrom pygame.locals import *\npygame.init()\n\nsize = width, height = 720, 480\nspeed = [2, 2]\nblack = (0,0,0)\nblue = (0,0,255)\ngreen = (0,255,0)\nred = (255,0,0)\n\nscreen = pygame.display.set_mode(size)\nscreen.fill((blue))\n\npygame.display.set_caption(\"BETA::00.0.1\")\n\nclock = pygame.time.Clock()\n\ndef game_intro():\n\n  intro = True\n\n  while intro:\n     for event in pygame.event.get():\n         print(event)\n         if event.type == pygame.QUIT:\n             pygame.quit()\n             quit()\n\n    gameDisplay.fill(blue)\n    largeText = pygame.font.Font('freesansbold.ttf',115)\n    TextSurf, TextRect = text_objects(\"BETA\", largeText)\n    TextRect.center = ((display_width/2),(display_height/2))\n    gameDisplay.blit(TextSurf, TextRect)\n\n    pygame.draw.rect(gameDisplay, green,(150,450,100,50))\n    pygame.draw.rect(gameDisplay, red,(550,450,100,50))\n\n    pygame.display.flip(screen)\n    pygame.display.update(screen)\n    clock.tick(15)\n</code></pre>\n"}, {"tags": ["python", "django", "django-templates", "django-template-filters"], "comments": [{"owner": {"reputation": 26441, "user_id": 202168, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/481f8ec4fe0149f2b3851eee91c23b8e?s=128&d=identicon&r=PG", "display_name": "Anentropic", "link": "https://stackoverflow.com/users/202168/anentropic"}, "edited": false, "score": 0, "creation_date": 1450914706, "post_id": 34445439, "comment_id": 56632881, "body": "from the image it seems like everything is working perfectly, what is your question?"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1450915575, "post_id": 34445439, "comment_id": 56633124, "body": "Why do you want to do this? Why not use a template?"}], "answers": [{"tags": [], "owner": {"reputation": 7775, "user_id": 5658350, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3vhKa.png?s=128&g=1", "display_name": "DhiaTN", "link": "https://stackoverflow.com/users/5658350/dhiatn"}, "is_accepted": true, "score": 1, "last_activity_date": 1450917125, "last_edit_date": 1450917125, "creation_date": 1450916718, "answer_id": 34445700, "question_id": 34445439, "link": "https://stackoverflow.com/questions/34445439/how-to-write-django-templates-tags-in-httpresponse/34445700#34445700", "title": "How to write Django templates tags {% %} in HttpResponse", "body": "<p>You need to tell django that svg_data is a Django template to interpret the tags:</p>\n\n<pre><code>from django.template import RequestContext, Template\n\ndef generate_some_svg_data():\n    return '{% block content %}&lt;svg width=\"100\" height=\"100\"&gt; &lt;circle cx=\"50\" cy=\"50\" r=\"40\" stroke=\"green\" stroke-width=\"4\" fill=\"yellow\" /&gt; &lt;/svg&gt;{% endblock %}'\n\ndef my_view(request):\n    svg_data = generate_some_svg_data()\n    template = Template(svg_data)\n    return HttpResponse(template)\n</code></pre>\n\n<p>in case you have a context too you can do as follow:</p>\n\n<pre><code>def my_view(request):\n    context = RequestContext(request, {\"a\":1, \"b\":2})\n    svg_data = generate_some_svg_data()\n    template = Template(svg_data)\n    return HttpResponse(template.render(context))\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 5704851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72dd132da0cfcbdb07adddd2601f0e56?s=128&d=identicon&r=PG&f=1", "display_name": "gb1982", "link": "https://stackoverflow.com/users/5704851/gb1982"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 502, "favorite_count": 0, "accepted_answer_id": 34445700, "answer_count": 1, "score": 1, "last_activity_date": 1513814354, "creation_date": 1450914505, "last_edit_date": 1513814354, "question_id": 34445439, "link": "https://stackoverflow.com/questions/34445439/how-to-write-django-templates-tags-in-httpresponse", "title": "How to write Django templates tags {% %} in HttpResponse", "body": "<p>I do not know how to fix this...</p>\n\n<p><a href=\"http://i.stack.imgur.com/N2tgf.png\" rel=\"nofollow\">template tags image</a></p>\n\n<pre><code>def generate_some_svg_data():\n    return '{% block content %}&lt;svg width=\"100\" height=\"100\"&gt; &lt;circle cx=\"50\" cy=\"50\" r=\"40\" stroke=\"green\" stroke-width=\"4\" fill=\"yellow\" /&gt; &lt;/svg&gt;{% endblock %}'\n\ndef my_view(request):\n    svg_data = generate_some_svg_data()\n    return HttpResponse(svg_data)\n</code></pre>\n"}, {"tags": ["python", "json", "api"], "comments": [{"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1450915106, "post_id": 34445401, "comment_id": 56632989, "body": "at least one of the fields is empty"}, {"owner": {"reputation": 5358, "user_id": 3171657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J3bKr.png?s=128&g=1", "display_name": "Turn", "link": "https://stackoverflow.com/users/3171657/turn"}, "edited": false, "score": 0, "creation_date": 1450915296, "post_id": 34445401, "comment_id": 56633039, "body": "If you print the entire <code>js</code> object you&#39;ll see what fields it has."}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1450915588, "post_id": 34445401, "comment_id": 56633130, "body": "Aside from your question... don&#39;t do this: <code>if &#39;status&#39; or &#39;OK&#39; in js == False</code>. Because: 1. <code>&#39;status&#39; or &#39;OK&#39; in js</code> always evaluates to <code>&#39;status&#39;</code>, and 2. you don&#39;t ever want to compare to <code>True</code> or <code>False</code>. Either do <code>if something</code> or <code>if not something</code>. That will save you from some unexpected problems. BTW <code>&#39;status&#39; or &#39;OK&#39; in js == False</code> also evaluates to <code>&#39;status&#39;</code>, so your <code>if</code> is always true ;)"}], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 2962438, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/33c97f3d3cd56015f2acaddd21ef6afa?s=128&d=identicon&r=PG&f=1", "display_name": "Arun.K", "link": "https://stackoverflow.com/users/2962438/arun-k"}, "edited": false, "score": 0, "creation_date": 1450917513, "post_id": 34445530, "comment_id": 56633586, "body": "Ok. Thanks for all the comments. I modified the code edited the question and i am getting this error -  <code>raise HTTPError(req.full_url, code, msg, hdrs, fp) urllib.error.HTTPError: HTTP Error 400: Bad Request</code>"}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "reply_to_user": {"reputation": 159, "user_id": 2962438, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/33c97f3d3cd56015f2acaddd21ef6afa?s=128&d=identicon&r=PG&f=1", "display_name": "Arun.K", "link": "https://stackoverflow.com/users/2962438/arun-k"}, "edited": false, "score": 0, "creation_date": 1450917962, "post_id": 34445530, "comment_id": 56633719, "body": "That is the response you get from server. It does not like the request. Maybe you are missing some data or you missspelled something or the server expects a session cookie or who knows what..."}], "tags": [], "owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "is_accepted": false, "score": 4, "last_activity_date": 1450915255, "creation_date": 1450915255, "answer_id": 34445530, "question_id": 34445401, "link": "https://stackoverflow.com/questions/34445401/python-nonetype-object-is-not-subscriptable/34445530#34445530", "title": "Python NoneType object is not subscriptable", "body": "<p>The error, <code>NoneType object is not subscriptable</code> means that you tried to do:</p>\n\n<pre><code>None[something]\n</code></pre>\n\n<p>If it happens in this line: <code>js[\"results\"][0][\"geometry\"][\"location\"][\"lat\"]</code>, that means <code>js[\"results\"][0][\"geometry\"][\"location\"][\"lat\"]</code> does not exist, i.e. something along that path evaluated to None.</p>\n\n<p>For example, if <code>js</code> is <code>None</code>, it will fail trying to evaluate <code>None[\"results\"]</code>.</p>\n\n<p>Or, if <code>js[\"results\"][0]</code> is <code>None</code>, it will fail trying to do <code>None[\"geometry\"]</code> etc.</p>\n\n<p>BTW, it is very likely that <code>js</code> is <code>None</code>, because you do have this:</p>\n\n<pre><code>except: js = None\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 2962438, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/33c97f3d3cd56015f2acaddd21ef6afa?s=128&d=identicon&r=PG&f=1", "display_name": "Arun.K", "link": "https://stackoverflow.com/users/2962438/arun-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15882, "favorite_count": 1, "closed_date": 1450915536, "answer_count": 1, "score": 2, "last_activity_date": 1450917406, "creation_date": 1450914223, "last_edit_date": 1450917406, "question_id": 34445401, "link": "https://stackoverflow.com/questions/34445401/python-nonetype-object-is-not-subscriptable", "closed_reason": "Duplicate", "title": "Python NoneType object is not subscriptable", "body": "<p>I am trying this code and getting the error in lines starting with lat, lng and location. Can anyone please help?</p>\n\n<pre><code>import urllib.parse\nimport urllib.request\nimport json\nwhile True:\n    address = input('Enter location: ')\n    if len(address) &lt; 1 : break \n    serviceurl = 'http://python-data.dr-chuck.net/geojson'\n    url = serviceurl + '?' + urllib.parse.urlencode({'sensor':'false', 'address':  address})\n   response = urllib.request.urlopen(url)\ndata = response.readall().decode('utf-8')\njs = json.loads(str(data))\nif 'status' not in js or js['status'] != 'OK':\n    print ('==== Failure To Retrieve ====')\n    print (data)\n    continue\n    print (json.dumps(js, indent=4))\n\n    lat = js[\"results\"][0][\"geometry\"][\"location\"][\"lat\"]\n    lng = js[\"results\"][0][\"geometry\"][\"location\"][\"lng\"]\n    print('lat',lat) #,('lng'),lng\n    location = js['results'[0]]['formatted_address']\n    print(location)\n</code></pre>\n\n<p>Thanks,\nArun</p>\n"}, {"tags": ["python", "openerp", "odoo-8", "python-unittest"], "answers": [{"comments": [{"owner": {"reputation": 2933, "user_id": 601182, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/64ebc54e23e49cf1663092f3944bc835?s=128&d=identicon&r=PG", "display_name": "Aftab Naveed", "link": "https://stackoverflow.com/users/601182/aftab-naveed"}, "edited": false, "score": 0, "creation_date": 1451350529, "post_id": 34447979, "comment_id": 56747865, "body": "your answer was also helpful, but --log-level=test would show it in a nice format."}], "tags": [], "owner": {"reputation": 2204, "user_id": 4376900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S8t20.jpg?s=128&g=1", "display_name": "Jainik Patel", "link": "https://stackoverflow.com/users/4376900/jainik-patel"}, "is_accepted": false, "score": 4, "last_activity_date": 1450937294, "last_edit_date": 1450937294, "creation_date": 1450936521, "answer_id": 34447979, "question_id": 34445394, "link": "https://stackoverflow.com/questions/34445394/how-to-run-odoo-tests-unittest2/34447979#34447979", "title": "How to run Odoo tests unittest2?", "body": "<p>This useful For Run odoo test case:</p>\n\n<pre><code>./odoo.py -i/-u module_being_tested -d being_used_to_test --test-enable\n</code></pre>\n\n<p>Common options:</p>\n\n<pre><code> -i INIT, --init=INIT\n       install one or more modules (comma-separated list, use \"all\" for all modules), requires -d\n\n-u UPDATE, --update=UPDATE\n       update one or more modules (comma-separated list, use \"all\" for all modules). Requires -d.\n</code></pre>\n\n<p>Database related options:</p>\n\n<pre><code>-d DB_NAME, --database=DB_NAME\n       specify the database name\n</code></pre>\n\n<p>Testing Configuration:</p>\n\n<pre><code> --test-enable:  Enable YAML and unit tests.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2933, "user_id": 601182, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/64ebc54e23e49cf1663092f3944bc835?s=128&d=identicon&r=PG", "display_name": "Aftab Naveed", "link": "https://stackoverflow.com/users/601182/aftab-naveed"}, "edited": false, "score": 0, "creation_date": 1451386469, "post_id": 34448036, "comment_id": 56760090, "body": "Bazzinga, would you know how can we run tests from IDE like Pycharm and also how to mock Odoo models?"}, {"owner": {"reputation": 986, "user_id": 2854907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0covj.jpg?s=128&g=1", "display_name": "Bazzinga...", "link": "https://stackoverflow.com/users/2854907/bazzinga"}, "reply_to_user": {"reputation": 2933, "user_id": 601182, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/64ebc54e23e49cf1663092f3944bc835?s=128&d=identicon&r=PG", "display_name": "Aftab Naveed", "link": "https://stackoverflow.com/users/601182/aftab-naveed"}, "edited": false, "score": 0, "creation_date": 1451387368, "post_id": 34448036, "comment_id": 56760563, "body": "Sorry no idea, using sublime ;)"}, {"owner": {"reputation": 2933, "user_id": 601182, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/64ebc54e23e49cf1663092f3944bc835?s=128&d=identicon&r=PG", "display_name": "Aftab Naveed", "link": "https://stackoverflow.com/users/601182/aftab-naveed"}, "edited": false, "score": 0, "creation_date": 1451388599, "post_id": 34448036, "comment_id": 56761140, "body": "and do you know about mocking the models?"}, {"owner": {"reputation": 2933, "user_id": 601182, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/64ebc54e23e49cf1663092f3944bc835?s=128&d=identicon&r=PG", "display_name": "Aftab Naveed", "link": "https://stackoverflow.com/users/601182/aftab-naveed"}, "edited": false, "score": 0, "creation_date": 1451392957, "post_id": 34448036, "comment_id": 56763292, "body": "sorry for not being clear, I meant mocking objects <a href=\"https://docs.python.org/3/library/unittest.mock.html\" rel=\"nofollow noreferrer\">docs.python.org/3/library/unittest.mock.html</a>"}, {"owner": {"reputation": 608, "user_id": 5494094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1f985d5edbd8b9c2e3df83318329338?s=128&d=identicon&r=PG&f=1", "display_name": "Ibrahim.H", "link": "https://stackoverflow.com/users/5494094/ibrahim-h"}, "edited": false, "score": 0, "creation_date": 1585045229, "post_id": 34448036, "comment_id": 107622107, "body": "It&#39;s also good practice to include ` --stop-after-init` if you want to stop odoo after running tests."}], "tags": [], "owner": {"reputation": 986, "user_id": 2854907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0covj.jpg?s=128&g=1", "display_name": "Bazzinga...", "link": "https://stackoverflow.com/users/2854907/bazzinga"}, "is_accepted": true, "score": 3, "last_activity_date": 1450936886, "creation_date": 1450936886, "answer_id": 34448036, "question_id": 34445394, "link": "https://stackoverflow.com/questions/34445394/how-to-run-odoo-tests-unittest2/34448036#34448036", "title": "How to run Odoo tests unittest2?", "body": "<p>@aftab You need add <code>log-level</code> please see below.</p>\n\n<pre><code>./odoo.py -d &lt;dbname&gt; --test-enable --log-level=test\n</code></pre>\n\n<p>and regarding you question, If you are making changes to installed modules and need to re test all test cases then you need to simple restart you server with <code>-u &lt;module_name&gt;</code> or <code>-u all</code>(for all modules) with the above command.</p>\n"}, {"tags": [], "owner": {"reputation": 4731, "user_id": 2498426, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cf3f31fe484579c868193e7e9c21badd?s=128&d=identicon&r=PG", "display_name": "Jerther", "link": "https://stackoverflow.com/users/2498426/jerther"}, "is_accepted": false, "score": 2, "last_activity_date": 1485381014, "creation_date": 1485381014, "answer_id": 41862286, "question_id": 34445394, "link": "https://stackoverflow.com/questions/34445394/how-to-run-odoo-tests-unittest2/41862286#41862286", "title": "How to run Odoo tests unittest2?", "body": "<p>Here is a REALLY nice plugin to run unit odoo tests directly with pytest:</p>\n\n<p><a href=\"https://github.com/camptocamp/pytest-odoo\" rel=\"nofollow noreferrer\">https://github.com/camptocamp/pytest-odoo</a></p>\n\n<p>Here's a result example:</p>\n\n<p><a href=\"https://i.stack.imgur.com/YOt6B.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YOt6B.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2933, "user_id": 601182, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/64ebc54e23e49cf1663092f3944bc835?s=128&d=identicon&r=PG", "display_name": "Aftab Naveed", "link": "https://stackoverflow.com/users/601182/aftab-naveed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3696, "favorite_count": 2, "accepted_answer_id": 34448036, "answer_count": 3, "score": 4, "last_activity_date": 1510947229, "creation_date": 1450914181, "last_edit_date": 1451161366, "question_id": 34445394, "link": "https://stackoverflow.com/questions/34445394/how-to-run-odoo-tests-unittest2", "title": "How to run Odoo tests unittest2?", "body": "<p>I tried running odoo tests using --test-enable, but it won't work. I have a couple of questions.</p>\n\n<p>According to the documentation Tests can only be run during module installation, what happens when we add functionality and then want to run tests? </p>\n\n<p>Is it possible to run tests from IDE like Pycharm ? </p>\n"}, {"tags": ["python", "selenium"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2559108"}, "edited": false, "score": 0, "creation_date": 1450914187, "post_id": 34445378, "comment_id": 56632745, "body": "sv:member_name uses a css selector: selector_dict[&#39;member_name&#39;] = &quot;cs:.fsl.fwb.fcb &gt; a&quot; where .fsl.fwb.fcb &gt; a is a child of the member element"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2559108"}, "edited": false, "score": 0, "creation_date": 1450914444, "post_id": 34445378, "comment_id": 56632811, "body": "Got it working like this: profile[&quot;name&quot;] = member.find_element(By.CSS_SELECTOR, &quot;.fsl.fwb.fcb &gt; a&quot;).get_attribute(&#39;innerHTML&#39;) thanks a bunch"}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 0, "last_activity_date": 1450914228, "last_edit_date": 1450914228, "creation_date": 1450914034, "answer_id": 34445378, "question_id": 34445280, "link": "https://stackoverflow.com/questions/34445280/selenium-webdriver-python-search-webelement/34445378#34445378", "title": "Selenium WebDriver Python, search WebElement", "body": "<p>As the error states, <a href=\"https://selenium-python.readthedocs.org/api.html#selenium.webdriver.remote.webelement.WebElement\" rel=\"nofollow\"><code>WebElement</code></a> object has no attribute <code>findElement</code>. Depending  on what are <code>sv:member_name</code>, <code>sv:member_image</code> and <code>sv:member_link</code>, you need to choose which of the <a href=\"https://selenium-python.readthedocs.org/api.html#selenium.webdriver.remote.webelement.WebElement.find_element_by_class_name\" rel=\"nofollow\"><code>find_element_by_*</code> methods</a> you need to use.</p>\n\n<p>For instance, if <code>sv:member_name</code> is a CSS selector:</p>\n\n<pre><code>profile[\"name\"] = member.find_element_by_css_selector(\"sv:member_name\").get_attribute('innerHTML')\n</code></pre>\n\n<p>Or, you may also use the <a href=\"https://selenium-python.readthedocs.org/api.html#selenium.webdriver.remote.webelement.WebElement.find_element\" rel=\"nofollow\"><code>find_element()</code></a> method directly supplying the <code>By</code> value:</p>\n\n<pre><code>from selenium.webdriver.common.by import By\n\nprofile[\"name\"] = member.find_element(By.CSS_SELECTOR, \"sv:member_name\").get_attribute('innerHTML')\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2559108"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5020, "favorite_count": 0, "accepted_answer_id": 34445378, "answer_count": 1, "score": 0, "last_activity_date": 1450914228, "creation_date": 1450913290, "last_edit_date": 1450914190, "question_id": 34445280, "link": "https://stackoverflow.com/questions/34445280/selenium-webdriver-python-search-webelement", "title": "Selenium WebDriver Python, search WebElement", "body": "<p>i am using Selenium to scrape some stuff live, but i can't seem to search a WebElement even tho the docs say i can.</p>\n\n<pre><code>while True:\n    try:\n        member = self.pdriver.find_all(\"sv:member_profile\")[index]\n        self.pdriver.info_log(\"Found a member\")\n    except IndexError:\n        self.pdriver.info_log(\"No more members\")\n        break\n\n    member.highlight(style = self.pdriver.get_config_value(\"highlight:style_on_assertion_success\"))\n\n    profile = {}\n    profile[\"name\"] = member.findElement(\"sv:member_name\").get_attribute('innerHTML')\n    profile[\"image\"] = member.findElement(\"sv:member_image\").get_attribute('src')\n    profile[\"link\"] = member.findElement(\"sv:member_link\").get_attribute('href')\n\n    members.append(profile)\n    index += 1\n</code></pre>\n\n<p>This returns a single web element:</p>\n\n<pre><code>member = self.pdriver.find_all(\"sv:member_profile\")[index]\n</code></pre>\n\n<p>which i need to search, according to the docs, this element would also have the findElement method, seems not to be the case tho?</p>\n\n<blockquote>\n  <p>AttributeError: 'WebElement' object has no attribute 'findElement'</p>\n</blockquote>\n"}, {"tags": ["python", "list", "dictionary"], "comments": [{"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 3, "creation_date": 1450913335, "post_id": 34445278, "comment_id": 56632463, "body": "What is <code>dct</code>? The input? The output? BTW, <code>dct</code> is a <code>set</code>. Applying the average to elements of different types has nothing to do with python, but with the concept of comparing apples to starfish"}, {"owner": {"reputation": 124, "user_id": 5710571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e14eb1f21ba6ec09e1efe05c7286e500?s=128&d=identicon&r=PG&f=1", "display_name": "user768518", "link": "https://stackoverflow.com/users/5710571/user768518"}, "edited": false, "score": 2, "creation_date": 1450914138, "post_id": 34445278, "comment_id": 56632732, "body": "It <i>feels</i> kind of weird to have &quot;keys&quot; in a set and &quot;corresponding&quot; (?) values in a separated list. Mind explaining where your data comes from ?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1451054699, "post_id": 34445278, "comment_id": 56669323, "body": "Sets are unordered so unless you sort or do some custom ordering then there is no way to know what will be paired"}], "answers": [{"comments": [{"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 2, "creation_date": 1450943158, "post_id": 34445390, "comment_id": 56640046, "body": "Nota Bene: for the zipping to work <code>input</code> must be an iterable which can keep the order of its elements, e.g. a tuple or a list. A set cannot do it."}], "tags": [], "owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "is_accepted": false, "score": 0, "last_activity_date": 1450944587, "last_edit_date": 1450944587, "creation_date": 1450914162, "answer_id": 34445390, "question_id": 34445278, "link": "https://stackoverflow.com/questions/34445278/assign-a-dictionary-key-to-a-given-list-using-python/34445390#34445390", "title": "Assign a Dictionary Key to a Given List Using Python", "body": "<p>Use <code>zip</code> and just construct a <code>dict</code>:</p>\n\n<pre><code>&gt;&gt;&gt; dict(zip(input, list_of_lists))\n{'03439': ['PersonA', 7, 8, 9, 10, 10], '03440': ['PersonB', 12, 13, 14, 15, 16]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "is_accepted": false, "score": 2, "last_activity_date": 1450944129, "last_edit_date": 1450944129, "creation_date": 1450914192, "answer_id": 34445396, "question_id": 34445278, "link": "https://stackoverflow.com/questions/34445278/assign-a-dictionary-key-to-a-given-list-using-python/34445396#34445396", "title": "Assign a Dictionary Key to a Given List Using Python", "body": "<p>In case you wanted to calculate the average there and then you could do</p>\n\n<pre><code>&gt;&gt;&gt; PersonA = 'Pino'\n&gt;&gt;&gt; PersonB = 'Gino'\n&gt;&gt;&gt; i=('03439', '03440') # tuple\n&gt;&gt;&gt; l=[[PersonA, 7, 8, 9, 10, 11],[PersonB, 12, 13, 14, 15, 16]]\n&gt;&gt;&gt; av={k:[v[0], sum(v[1:])/(len(v)-1)] for k,v in zip(i,l)}\n&gt;&gt;&gt; av\n{'03439': ['Pino', 9.0], '03440': ['Gino', 14.0], }\n</code></pre>\n\n<p>Nota Bene: for the zipping to work <code>input</code> must be an iterable which can keep the order of its elements, e.g. a tuple or a list. Sets and plain dictionaries cannot do it.</p>\n\n<p>And the answer is no, integers cannot be summed with strings</p>\n"}, {"comments": [{"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1450943938, "post_id": 34446215, "comment_id": 56640331, "body": "Nota Bene: for the zipping to work <code>input</code> must be an iterable which can keep the order of its elements, e.g. a tuple or a list. Sets and plain dictionaries cannot do it."}], "tags": [], "owner": {"reputation": 7503, "user_id": 3874768, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/nmQTg.jpg?s=128&g=1", "display_name": "repzero", "link": "https://stackoverflow.com/users/3874768/repzero"}, "is_accepted": false, "score": 0, "last_activity_date": 1450921494, "creation_date": 1450921494, "answer_id": 34446215, "question_id": 34445278, "link": "https://stackoverflow.com/questions/34445278/assign-a-dictionary-key-to-a-given-list-using-python/34446215#34446215", "title": "Assign a Dictionary Key to a Given List Using Python", "body": "<p>Using izip and list comprehension</p>\n\n<pre><code>from itertools import izip\n     [dict([(x,y)])for x,y in izip({'03439', '03440'},[['PersonA', 7, 8, 9, 10, 11],['PersonB', 12, 13, 14, 15, 16]])]\n</code></pre>\n\n<p>output</p>\n\n<pre><code>[{'03439': ['PersonA', 7, 8, 9, 10, 11]}, {'03440': ['PersonB', 12, 13, 14, 15, 16]}]\n</code></pre>\n"}], "owner": {"reputation": 307, "user_id": 4203981, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/3be6084c4d99eacafc42576ad4342a88?s=128&d=identicon&r=PG&f=1", "display_name": "Euxitheos", "link": "https://stackoverflow.com/users/4203981/euxitheos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1495289700, "creation_date": 1450913230, "last_edit_date": 1450914290, "question_id": 34445278, "link": "https://stackoverflow.com/questions/34445278/assign-a-dictionary-key-to-a-given-list-using-python", "title": "Assign a Dictionary Key to a Given List Using Python", "body": "<p>Can I assign a dictionary key to a list OR list of lists. Then take averages, cov, etc it:</p>\n\n<pre><code>input={'03439', '03440'}\nlist of list= [[PersonA, 7, 8, 9, 10, 11],[PersonB, 12, 13, 14, 15, 16]]\n</code></pre>\n\n<p>Desired Output</p>\n\n<pre><code>{'03439': [PersonA, 7, 8, 9, 10, 11],'03440':[PersonB, 12, 13, 14, 15, 16]}\n</code></pre>\n\n<p>If I wanted to take the average values of the above, can I do so even with part of this being string and the other values?</p>\n"}, {"tags": ["python", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 8116, "user_id": 815653, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a2beceb77bdda94b8097c2c21f615442?s=128&d=identicon&r=PG", "display_name": "zell", "link": "https://stackoverflow.com/users/815653/zell"}, "edited": false, "score": 0, "creation_date": 1450913544, "post_id": 34445303, "comment_id": 56632549, "body": "Thanks. I see you point. But what is the intuition that np.array(2.7) is 0-dimension?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 8116, "user_id": 815653, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a2beceb77bdda94b8097c2c21f615442?s=128&d=identicon&r=PG", "display_name": "zell", "link": "https://stackoverflow.com/users/815653/zell"}, "edited": false, "score": 0, "creation_date": 1450914306, "post_id": 34445303, "comment_id": 56632772, "body": "@zell: Count the layers of nested brackets. Don&#39;t see any? That&#39;s 0D."}, {"owner": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "edited": false, "score": 0, "creation_date": 1450914416, "post_id": 34445303, "comment_id": 56632801, "body": "While you can use 0-d arrays as normal numbers, you&#39;re still working with the precision that numpy has set for you. For example, <code>a = np.array(2); a ** 40</code>. However, <code>a.item()</code> will return a Python int and <code>a.item() ** 40</code> will give you a long result. (Tested on Python 2.7 with Numpy 1.8.1)"}], "tags": [], "owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "is_accepted": false, "score": 0, "last_activity_date": 1450913679, "last_edit_date": 1450913679, "creation_date": 1450913479, "answer_id": 34445303, "question_id": 34445257, "link": "https://stackoverflow.com/questions/34445257/how-to-get-2-7-from-np-array2-7/34445303#34445303", "title": "How to get 2.7 from np.array(2.7)?", "body": "<p><code>np.array(2.7)</code> is a zero dimensional array. You cannot index into them:</p>\n\n<pre><code>&gt;&gt;&gt; arr = np.array(2.7)\n&gt;&gt;&gt; arr[0]\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nIndexError: 0-d arrays can't be indexed\n</code></pre>\n\n<p>For most practical purposes, you can use these arrays just like you would use a regular float or integers.</p>\n\n<pre><code>&gt;&gt;&gt; arr*2\n5.4000000000000004\n&gt;&gt;&gt; arr+1\n3.7000000000000002\n&gt;&gt;&gt; float(arr)\n2.7\n</code></pre>\n\n<p>In response to your comment:</p>\n\n<blockquote>\n  <p>What is the intuition that it is 0-dimension?</p>\n</blockquote>\n\n<p>Well, one example where you could see it is accessing the array's <code>shape</code> attribute.</p>\n\n<pre><code>&gt;&gt;&gt; arr.shape\n()\n&gt;&gt;&gt; np.array([2.7]).shape\n(1,)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1450914250, "creation_date": 1450914250, "answer_id": 34445403, "question_id": 34445257, "link": "https://stackoverflow.com/questions/34445257/how-to-get-2-7-from-np-array2-7/34445403#34445403", "title": "How to get 2.7 from np.array(2.7)?", "body": "<pre><code>In [1]: import numpy\n\nIn [2]: a = numpy.array(2.7)\n\nIn [3]: a[()]\nOut[3]: 2.7000000000000002\n</code></pre>\n\n<p>You might want to think about why you even have a 0-dimensional array, though. They're kind of weird, and it can be a bit finicky whether operations on a 0D array produce a scalar or an array.</p>\n\n<p>(The extra <code>...02</code> you see is because 2.7 isn't exactly representable in floating point, indexing arrays gives you NumPy scalars instead of Python scalars, and NumPy's display logic is slightly different from Python's.)</p>\n"}], "owner": {"reputation": 8116, "user_id": 815653, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a2beceb77bdda94b8097c2c21f615442?s=128&d=identicon&r=PG", "display_name": "zell", "link": "https://stackoverflow.com/users/815653/zell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 34445403, "answer_count": 2, "score": 1, "last_activity_date": 1450914250, "creation_date": 1450913124, "last_edit_date": 1450913542, "question_id": 34445257, "link": "https://stackoverflow.com/questions/34445257/how-to-get-2-7-from-np-array2-7", "title": "How to get 2.7 from np.array(2.7)?", "body": "<p>In numpy it is easy to retrieve <code>2.7</code> from <code>np.array([2.7])</code>, but I get stuck when trying to retrieve the value <code>2.7</code> from an array like this: <code>np.array(2.7)</code>. </p>\n\n<p>How can I retrieve the value <code>2.7</code> from it? </p>\n\n<p>More concretely, I need a function</p>\n\n<pre><code>def get(a):\n   ......\n</code></pre>\n\n<p>so that <code>get(np.array(2.7))=2.7</code>. Any idea?</p>\n"}, {"tags": ["python", "xml", "python-3.x", "lxml"], "comments": [{"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1450918694, "post_id": 34445245, "comment_id": 56633904, "body": "The <a href=\"http://www.w3schools.com/xml/xml_namespaces.asp\" rel=\"nofollow noreferrer\">xmlns</a> is a special attribute part of the XML markup rules and is not quite treated the same as a regular attribute. Aside - I&#39;ve always liked XML. What else data structure is open-ended (any tree nesting) left to only the designer? Plus equipped with XSLT to restructure, XPath to parse content -a truly versatile/dynamic data type."}, {"owner": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "reply_to_user": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1450947584, "post_id": 34445245, "comment_id": 56641638, "body": "@Parfait Well you do have dictionaries (JSON) for one, it&#39;s less hassle and it does present a petter parsing structure than the XML raw data. But I guess it&#39;s a matter of taste and logic. And as you sad, <code>xmln</code> is a <b>special</b> deviant in the protocol that is thus treated different in the parsers which makes no sense to me. Data is data, it should all be picked up and the filtering should be optional and up to the developer. Hence why I&#39;m trying to convert the XML data into JSON so that all the data is accessible in the same manner."}], "answers": [{"comments": [{"owner": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 0, "creation_date": 1450947408, "post_id": 34445651, "comment_id": 56641561, "body": "It works, but <code>xmlns=...</code> becomes <code>None : ....</code> for some reason. But I&#39;ll take it!"}, {"owner": {"reputation": 5358, "user_id": 3171657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J3bKr.png?s=128&g=1", "display_name": "Turn", "link": "https://stackoverflow.com/users/3171657/turn"}, "reply_to_user": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 0, "creation_date": 1450972989, "post_id": 34445651, "comment_id": 56652211, "body": "Yeah, I agree that&#39;s kind of weird. Not sure why they did it like that."}], "tags": [], "owner": {"reputation": 5358, "user_id": 3171657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J3bKr.png?s=128&g=1", "display_name": "Turn", "link": "https://stackoverflow.com/users/3171657/turn"}, "is_accepted": true, "score": 0, "last_activity_date": 1450916268, "creation_date": 1450916268, "answer_id": 34445651, "question_id": 34445245, "link": "https://stackoverflow.com/questions/34445245/how-to-access-xmlns-key-val-in-xml-string/34445651#34445651", "title": "How to access xmlns key, val in xml string", "body": "<p>You can see the namespaces for a node by looking at the <code>.nsmap</code> property of <code>root</code>.</p>\n"}], "owner": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 34445651, "answer_count": 1, "score": 0, "last_activity_date": 1450916268, "creation_date": 1450913035, "question_id": 34445245, "link": "https://stackoverflow.com/questions/34445245/how-to-access-xmlns-key-val-in-xml-string", "title": "How to access xmlns key, val in xml string", "body": "<p>Assuming the following XML is loaded into <code>data</code> (and only this data):</p>\n\n<pre><code>&lt;stream:stream to='host.com' xmlns='jabber:client' xmlns:stream='http://etherx.jabber.org/streams' version='1.0'&gt;\n</code></pre>\n\n<p>I would assume the following code could do the job:</p>\n\n<pre><code>from lxml import etree as ET\nfrom io import StringIO\n\nparser = ET.XMLParser(recover=True)\n\ne = ET.parse(StringIO(data), parser)\nroot = e.getroot()\n\nfor key, val in root.items():\n    print(key, val)\n</code></pre>\n\n<p>The output however is just:</p>\n\n<pre><code>to host.com\nversion 1.0\n</code></pre>\n\n<p>How do I access <code>xmlns='jabber:client'</code> and more importantly why isn't this a part of the result?</p>\n\n<p>I've never liked XML and the whole thing with external namespace definitions is not to my liking so I've avoided it quite a bit, maybe I'm missing some fundamentals here?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1450912914, "post_id": 34445218, "comment_id": 56632341, "body": "Don&#39;t you want <code>self.name</code>?"}, {"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1450913078, "post_id": 34445218, "comment_id": 56632393, "body": "Please describe what you want to achieve. At present <code>name</code> lives in three different namespaces. Cool."}, {"owner": {"reputation": 695, "user_id": 5658017, "user_type": "registered", "accept_rate": 58, "profile_image": "https://lh3.googleusercontent.com/-ukvgwti8aOc/AAAAAAAAAAI/AAAAAAAAACk/WWHsp--Anq8/photo.jpg?sz=128", "display_name": "Yashu Seth", "link": "https://stackoverflow.com/users/5658017/yashu-seth"}, "edited": false, "score": 0, "creation_date": 1450913125, "post_id": 34445218, "comment_id": 56632407, "body": "you&#39;ll have to use self.name and not name in the method <code>greet</code>"}], "answers": [{"tags": [], "owner": {"reputation": 31937, "user_id": 2642204, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/AIjBF.jpg?s=128&g=1", "display_name": "BartoszKP", "link": "https://stackoverflow.com/users/2642204/bartoszkp"}, "is_accepted": false, "score": 3, "last_activity_date": 1450913144, "creation_date": 1450913144, "answer_id": 34445265, "question_id": 34445218, "link": "https://stackoverflow.com/questions/34445218/variable-is-both-global-and-local/34445265#34445265", "title": "Variable is both Global and Local", "body": "<p>You want:</p>\n\n<pre><code>def greet(self, color):\n  return \"Hi, my name is {0}, and my favorite color is {1}\".format(self.name, color)\n</code></pre>\n\n<p>(note the <code>self.</code> before <code>name</code>).</p>\n\n<p>without <code>global name</code>.</p>\n\n<p>The error saying that <code>name</code> is not defined is because in <code>greet</code> the compiler does not know what <code>name</code> is. It was known in the constructor, and assigned to <code>self.name</code>, and that's how you should refer to it.</p>\n\n<p>The <code>global</code> keyword is not related to your problem, you should avoid it in this case (consider reading <a href=\"https://docs.python.org/2/reference/simple_stmts.html?highlight=global#global\" rel=\"nofollow\">its documentation</a> though).</p>\n"}, {"tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": false, "score": 1, "last_activity_date": 1450913511, "last_edit_date": 1450913511, "creation_date": 1450913181, "answer_id": 34445270, "question_id": 34445218, "link": "https://stackoverflow.com/questions/34445218/variable-is-both-global-and-local/34445270#34445270", "title": "Variable is both Global and Local", "body": "<p>Remove the global statement.  You almost certainly don't want that, because <strong>different \"people\" (instances) should have different names</strong>.  They shouldn't all share the same global name, <a href=\"https://www.youtube.com/watch?v=lIpev8JXJHQ\" rel=\"nofollow\">unless you're modelling something really strange here</a>.  </p>\n\n<p>So, you just want to make <code>name</code> to be an attribute of the class.  Then you will also need to <em>access it as an attribute</em> of the class in your <code>greet</code> method, ergo:</p>\n\n<pre><code>class Person:\n  def __init__(self, name):\n      self.name = name\n\n  def greet(self, color):\n      return \"Hi, my name is {0}, and my favorite color is {1}\".format(\n          self.name, color\n      )\n</code></pre>\n\n<p>You might also consider making <code>color</code> an attribute, and taking it out of the argspec for greet.  </p>\n"}], "owner": {"reputation": 17, "user_id": 5667152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ef4cfefc31877c9bc4a1bb29ba149fd?s=128&d=identicon&r=PG&f=1", "display_name": "Macadooz", "link": "https://stackoverflow.com/users/5667152/macadooz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1450913511, "creation_date": 1450912876, "last_edit_date": 1450913070, "question_id": 34445218, "link": "https://stackoverflow.com/questions/34445218/variable-is-both-global-and-local", "title": "Variable is both Global and Local", "body": "<p>Here is my code:</p>\n\n<pre><code>class Person:\n  def __init__(self, name):\n      global name\n      self.name = name\n\n  def greet(self, color):\n      return \"Hi, my name is {0}, and my favorite color is {1}\".format(name, color)\n</code></pre>\n\n<p>When I try to run this I get an error that 'name' is both global and local, but if I take away the \"global name\" I get an error that says global 'name' name is not defined. How do I fix this problem?</p>\n"}, {"tags": ["python", "microsoft-ui-automation", "pyhook", "msaa"], "answers": [{"tags": [], "owner": {"reputation": 7644, "user_id": 3648361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1aeF.jpg?s=128&g=1", "display_name": "Vasily Ryabov", "link": "https://stackoverflow.com/users/3648361/vasily-ryabov"}, "is_accepted": false, "score": 0, "last_activity_date": 1451040192, "creation_date": 1451040192, "answer_id": 34462134, "question_id": 34445211, "link": "https://stackoverflow.com/questions/34445211/how-to-get-the-name-and-value-of-a-gui-object-in-python-after-click/34462134#34462134", "title": "how to get the name and value of a GUI object in Python after click", "body": "<p>There is an example for <a href=\"http://pywinauto.github.io/\" rel=\"nofollow\">pywinauto</a> and pyHook: <a href=\"https://github.com/pywinauto/pywinauto/blob/master/sandbox/recorder.py\" rel=\"nofollow\">recorder.py</a>.</p>\n\n<p>But you may stuck with some other pitfalls. The typical example is closing the dialog by button \"OK\" click. When you're in the event handler, the dialog may be already closed so you will not be able to retrieve any info about non-existing window. Some complicated tracking is required here.</p>\n\n<p>The same thing relates to UI Automation API events (pywinauto is going to support UIA soon). But we have no resources <a href=\"https://github.com/pywinauto/pywinauto/issues/43\" rel=\"nofollow\">to implement even pure Python analogue</a> of pyHook in a short term. So a good recorder implementation looks far far away from now. Any help is appreciated. ;)</p>\n"}], "owner": {"reputation": 683, "user_id": 5708480, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bd56b324652b2d3c3b4ac65a4e4df6bc?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Bridge", "link": "https://stackoverflow.com/users/5708480/bill-bridge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1119, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1451040839, "creation_date": 1450912833, "last_edit_date": 1451040839, "question_id": 34445211, "link": "https://stackoverflow.com/questions/34445211/how-to-get-the-name-and-value-of-a-gui-object-in-python-after-click", "title": "how to get the name and value of a GUI object in Python after click", "body": "<p>I want to record a user scenario of a windows application. For this I want to retrieve/log the object type, the object name and the object value of GUI objects after a mouse click on the object next to a screen capture and the mouse position.</p>\n\n<p>I am stucked with finding the how to's. Please help. </p>\n\n<p>I have the following Python code. </p>\n\n<pre><code>saveDir = r'C:\\Privat\\ZuppU\\temp'\nstepListID = 1\n\n\ndef capture_step_objects(event):\n    global stepListID\n    stepEvent = 'Click'\n\n    # Capture the application mouseclick area\n    (mx, my) = event.Position\n\n    fgWindow = win32gui.GetForegroundWindow()\n    fgWindowName = win32gui.GetWindowText(fgWindow)\n\n    # Capture the application window\n    (ax1, ay1, ax2, ay2) = win32gui.GetWindowRect(fgWindow)\n    stepCapture = ImageGrab.grab((ax1, ay1, ax2, ay2))\n    stepImage = os.path.join(saveDir, 'Step' + str(stepListID) + '.png')\n    stepCapture.save(stepImage)\n\nhm = pyHook.HookManager()\nhm.SubscribeMouseAllButtonsDown(capture_step_objects)\nhm.HookMouse()\npythoncom.PumpMessages()\nhm.UnhookMouse()\n\n# Main loop\n</code></pre>\n"}, {"tags": ["python", "c", "pointers", "data-structures", "cpython"], "comments": [{"owner": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 0, "creation_date": 1450914446, "post_id": 34445197, "comment_id": 56632812, "body": "in the example you show, the function <code>insert</code> takes a pointer to a pointer to a <code>list</code>. The first pointer is then dereferenced, to read and then change the pointer that points to the <code>list</code> structure. Are you asking how to do this same read &amp; change if a pointer to a list structure (<code>list *self</code>) is passed to the function, instead of a pointer to a pointer?"}, {"owner": {"reputation": 993, "user_id": 4541287, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/64f22664ee95fd0770558a2d2daeb879?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Ruzhitskiy", "link": "https://stackoverflow.com/users/4541287/bogdan-ruzhitskiy"}, "reply_to_user": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 0, "creation_date": 1450914668, "post_id": 34445197, "comment_id": 56632866, "body": "Yes. I want to send myList into insert without ampersand"}, {"owner": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 0, "creation_date": 1450915007, "post_id": 34445197, "comment_id": 56632959, "body": "the solution for what you want, is to access using <code>self</code> instead of <code>*self</code>, i.e. <code>p-&gt;next = self;</code>, but that also means that by doing <code>self = p;</code> on the next line, you are only modifying your function&#39;s copy of that pointer, and the caller won&#39;t see the change. The way to get around this is by passing a pointer to a pointer, like in the code you showed. What exactly is it you need to do?"}, {"owner": {"reputation": 993, "user_id": 4541287, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/64f22664ee95fd0770558a2d2daeb879?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Ruzhitskiy", "link": "https://stackoverflow.com/users/4541287/bogdan-ruzhitskiy"}, "reply_to_user": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 0, "creation_date": 1450915294, "post_id": 34445197, "comment_id": 56633038, "body": "is there possible to caller to see the changes?"}, {"owner": {"reputation": 993, "user_id": 4541287, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/64f22664ee95fd0770558a2d2daeb879?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Ruzhitskiy", "link": "https://stackoverflow.com/users/4541287/bogdan-ruzhitskiy"}, "reply_to_user": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 0, "creation_date": 1450915504, "post_id": 34445197, "comment_id": 56633106, "body": "As I understand, myList is a pointer with value of address to the first element of the structure. Can I change this value to another element of that structure?"}, {"owner": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 0, "creation_date": 1450916337, "post_id": 34445197, "comment_id": 56633333, "body": "the values passed into your function are copies. any changes you make to them will only be visible inside your function. So, yes, you can do whatever you want to <code>myList</code>, but if you&#39;re in a function then those changes won&#39;t be seen by the caller. If you need to change something in a function, the usual approach is to pass a pointer-- see my answer"}], "answers": [{"tags": [], "owner": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "is_accepted": false, "score": 1, "last_activity_date": 1450916863, "last_edit_date": 1450916863, "creation_date": 1450915746, "answer_id": 34445587, "question_id": 34445197, "link": "https://stackoverflow.com/questions/34445197/one-linked-list-for-python-using-c-api/34445587#34445587", "title": "One linked list for python using C api", "body": "<p>Well, you can just drop the <code>*</code>, i.e.:</p>\n\n<pre><code>void insert(list *self, int item) {\n    list *p = malloc(sizeof(list));\n    p-&gt;item = item;\n    p-&gt;next = self;\n    self = p;\n}\n</code></pre>\n\n<p>But I don't think this will behave like you expect, because the line <code>self = p</code> will not actually modify the same pointer that the caller was using. Your function gets a seperate copy of <code>*self</code> when it runs (C is <a href=\"http://denniskubes.com/2012/08/20/is-c-pass-by-value-or-reference\" rel=\"nofollow\">pass-by-value</a>). If you want to modify something in a function and have the caller see the change, the normal approach is to use a pointer-- so you don't need to modify the copy of the pointer passed into the function, but you can use it to access the same piece of memory that the caller has been working with. In your case, the caller is working with a pointer to <code>myList</code>, so if you want the function to change the value of that pointer, you need a pointer to a pointer i.e. <code>list **self</code>. </p>\n"}], "owner": {"reputation": 993, "user_id": 4541287, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/64f22664ee95fd0770558a2d2daeb879?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Ruzhitskiy", "link": "https://stackoverflow.com/users/4541287/bogdan-ruzhitskiy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1450916863, "creation_date": 1450912744, "question_id": 34445197, "link": "https://stackoverflow.com/questions/34445197/one-linked-list-for-python-using-c-api", "title": "One linked list for python using C api", "body": "<p>I'm trying to make one linked list for Python using C api. \nThis stuff works:</p>\n\n<pre><code>typedef struct list {\n    int item;\n    struct list *next;\n} list;\n\nvoid insert(list **self, int item) {\n    list *p = malloc(sizeof(list));\n    p-&gt;item = item;\n    p-&gt;next = *self;\n    *self = p;\n}\n\nint main() {\n    list *myList = NULL;\n    insert(&amp;myList, 1);\n    return 0;\n}\n</code></pre>\n\n<p>but Python C api use *self, instead **self. So, how can it works, if insert function would be like this:</p>\n\n<pre><code>void insert(list *self, int item) {\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 2700, "user_id": 347567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f658a58fa2f6a02b804b71e168d44da6?s=128&d=identicon&r=PG", "display_name": "pneumatics", "link": "https://stackoverflow.com/users/347567/pneumatics"}, "edited": false, "score": 0, "creation_date": 1450913240, "post_id": 34445184, "comment_id": 56632443, "body": "there&#39;s a singe row in each DataFrame?"}, {"owner": {"reputation": 18211, "user_id": 1610626, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d4738de350bcaf1777b12e8b77f7d018?s=128&d=identicon&r=PG", "display_name": "user1234440", "link": "https://stackoverflow.com/users/1610626/user1234440"}, "reply_to_user": {"reputation": 2700, "user_id": 347567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f658a58fa2f6a02b804b71e168d44da6?s=128&d=identicon&r=PG", "display_name": "pneumatics", "link": "https://stackoverflow.com/users/347567/pneumatics"}, "edited": false, "score": 0, "creation_date": 1450913363, "post_id": 34445184, "comment_id": 56632474, "body": "yea only 1 row in each dataframe"}, {"owner": {"reputation": 889, "user_id": 5623507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf1ba624c77a1440f26c17362a491f8c?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Misuta", "link": "https://stackoverflow.com/users/5623507/steve-misuta"}, "edited": false, "score": 0, "creation_date": 1450931944, "post_id": 34445184, "comment_id": 56636617, "body": "Is the column with dates significant? In other words: will you have to also find the minimum date? The solutions posted won&#39;t do that if you need it."}], "answers": [{"comments": [{"owner": {"reputation": 889, "user_id": 5623507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf1ba624c77a1440f26c17362a491f8c?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Misuta", "link": "https://stackoverflow.com/users/5623507/steve-misuta"}, "edited": false, "score": 0, "creation_date": 1450932417, "post_id": 34445391, "comment_id": 56636724, "body": "Will this will work if the date column is a datetime dtype?"}, {"owner": {"reputation": 34745, "user_id": 1494637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a50559f059e0621b4f543bcda9aad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1494637/stefan"}, "reply_to_user": {"reputation": 889, "user_id": 5623507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf1ba624c77a1440f26c17362a491f8c?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Misuta", "link": "https://stackoverflow.com/users/5623507/steve-misuta"}, "edited": false, "score": 0, "creation_date": 1450933500, "post_id": 34445391, "comment_id": 56636972, "body": "<code>Date</code> is the <code>index</code> in the example, and the OP is looking for values closest to zero in the <code>columns</code>. It&#39;s also not quite clear how to determine the &#39;least extreme&#39; date, doesn&#39;t necessarily have to be the minimum date."}, {"owner": {"reputation": 889, "user_id": 5623507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf1ba624c77a1440f26c17362a491f8c?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Misuta", "link": "https://stackoverflow.com/users/5623507/steve-misuta"}, "edited": false, "score": 0, "creation_date": 1450934885, "post_id": 34445391, "comment_id": 56637350, "body": "Yes, thanks, it will ignore the index. Should have confirmed it myself before asking the question, but the fingers type faster than the brain thinks sometimes... ;-)"}], "tags": [], "owner": {"reputation": 34745, "user_id": 1494637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a50559f059e0621b4f543bcda9aad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1494637/stefan"}, "is_accepted": true, "score": 2, "last_activity_date": 1450914167, "creation_date": 1450914167, "answer_id": 34445391, "question_id": 34445184, "link": "https://stackoverflow.com/questions/34445184/python-pandas-least-extreme-of-three-row-dataframes/34445391#34445391", "title": "Python Pandas Least Extreme of Three Row Dataframes", "body": "<p>Creating sample data - three single-row <code>DataFrames</code> with positive and negative values, and use <code>pd.concat()</code> to combine for calculation:</p>\n\n<pre><code>import string\nimport pandas as pd\n\ndf = {}\nfor i in range(3):\n    df[i] = pd.DataFrame(data=np.random.uniform(-5, 5, size=10), index=list(string.ascii_uppercase)[:10]).transpose()\ndf = pd.concat(list(df.values()))\n\n          A         B         C         D         E         F         G  \\\n0 -4.754784  1.193108  0.322375 -1.621932 -2.310099  1.710547 -4.272505   \n0 -1.806019 -3.790956  4.111070 -3.034269  0.607244  2.020302 -0.340587   \n0 -4.130075  3.218974 -3.791859  0.835340 -3.245390  1.738022  0.162090   \n\n          H         I         J  \n0  0.315760  0.805558 -0.134248  \n0 -1.608740  2.932232  1.905336  \n0  1.423596 -4.437640  0.868514 \n</code></pre>\n\n<p>Apply function to each column that returns the value associated with the <code>index</code> of the <code>min</code> <code>abs</code> value like so:</p>\n\n<pre><code>import numpy as np\ndf.apply(lambda x: x[(np.abs(x)).argmin()], raw=True)\n\nA   -1.806019\nB    1.193108\nC    0.322375\nD    0.835340\nE    0.607244\nF    1.710547\nG    0.162090\nH    0.315760\nI    0.805558\nJ   -0.134248\ndtype: float64\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 889, "user_id": 5623507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf1ba624c77a1440f26c17362a491f8c?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Misuta", "link": "https://stackoverflow.com/users/5623507/steve-misuta"}, "edited": false, "score": 0, "creation_date": 1450932424, "post_id": 34445427, "comment_id": 56636726, "body": "Will this will work if the date column is a datetime dtype?"}, {"owner": {"reputation": 2700, "user_id": 347567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f658a58fa2f6a02b804b71e168d44da6?s=128&d=identicon&r=PG", "display_name": "pneumatics", "link": "https://stackoverflow.com/users/347567/pneumatics"}, "reply_to_user": {"reputation": 889, "user_id": 5623507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf1ba624c77a1440f26c17362a491f8c?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Misuta", "link": "https://stackoverflow.com/users/5623507/steve-misuta"}, "edited": false, "score": 0, "creation_date": 1450933640, "post_id": 34445427, "comment_id": 56637013, "body": "It looks like the dates are index values, so the abs and min functions aren&#39;t applied to the index."}, {"owner": {"reputation": 889, "user_id": 5623507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf1ba624c77a1440f26c17362a491f8c?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Misuta", "link": "https://stackoverflow.com/users/5623507/steve-misuta"}, "edited": false, "score": 0, "creation_date": 1450935912, "post_id": 34445427, "comment_id": 56637637, "body": "I really like your answer, but when I reconstructed the dataframe and used your answer like this: df.ix[df.abs().idxmin()] it didn&#39;t work. First, when the index was a datetime it threw an exception, and then when I dropped the date column altogether it didn&#39;t handle the NaN properly."}, {"owner": {"reputation": 2700, "user_id": 347567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f658a58fa2f6a02b804b71e168d44da6?s=128&d=identicon&r=PG", "display_name": "pneumatics", "link": "https://stackoverflow.com/users/347567/pneumatics"}, "reply_to_user": {"reputation": 889, "user_id": 5623507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf1ba624c77a1440f26c17362a491f8c?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Misuta", "link": "https://stackoverflow.com/users/5623507/steve-misuta"}, "edited": false, "score": 0, "creation_date": 1450936799, "post_id": 34445427, "comment_id": 56637906, "body": "Would you post the code you used to reconstruct the dataframe?"}, {"owner": {"reputation": 889, "user_id": 5623507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf1ba624c77a1440f26c17362a491f8c?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Misuta", "link": "https://stackoverflow.com/users/5623507/steve-misuta"}, "edited": false, "score": 1, "creation_date": 1450938763, "post_id": 34445427, "comment_id": 56638528, "body": "Sure. See my post. Thanks!"}], "tags": [], "owner": {"reputation": 2700, "user_id": 347567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f658a58fa2f6a02b804b71e168d44da6?s=128&d=identicon&r=PG", "display_name": "pneumatics", "link": "https://stackoverflow.com/users/347567/pneumatics"}, "is_accepted": false, "score": 2, "last_activity_date": 1450914420, "creation_date": 1450914420, "answer_id": 34445427, "question_id": 34445184, "link": "https://stackoverflow.com/questions/34445184/python-pandas-least-extreme-of-three-row-dataframes/34445427#34445427", "title": "Python Pandas Least Extreme of Three Row Dataframes", "body": "<p>You can temporarily concatenate them, then take the index of minimum of the absolute values:</p>\n\n<pre><code>pd.concat([x, y, z]).ix[pd.concat([x, y, z]).abs().idxmin()]\n</code></pre>\n"}], "owner": {"reputation": 18211, "user_id": 1610626, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d4738de350bcaf1777b12e8b77f7d018?s=128&d=identicon&r=PG", "display_name": "user1234440", "link": "https://stackoverflow.com/users/1610626/user1234440"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 34445391, "answer_count": 2, "score": 2, "last_activity_date": 1450938735, "creation_date": 1450912653, "last_edit_date": 1450914373, "question_id": 34445184, "link": "https://stackoverflow.com/questions/34445184/python-pandas-least-extreme-of-three-row-dataframes", "title": "Python Pandas Least Extreme of Three Row Dataframes", "body": "<p>I have 3 rows of <code>DataFrame</code> each stored in separate variables. How can I create a new <code>pandas</code> <code>DataFrame</code> so that it contains the least extreme element of each <code>columns</code>?</p>\n\n<p>So if I had:</p>\n\n<pre><code>x:    \n                    C2        CL2          ED  ES  RB2\n1992-12-30 -200.145189 -36.711906  108.067018 NaN  NaN\n\ny:\n\n                    C2        CL2          ED  ES  RB2\n1992-12-30 -250.145189 -21.000000  107.067018 NaN  NaN\n\nz:\n\n                    C2        CL2          ED  ES  RB2\n1992-12-30 -249.145189 -31.711906  100.067018 NaN  NaN\n</code></pre>\n\n<p>I want back something:</p>\n\n<pre><code>                    C2        CL2          ED  ES  RB2\n1992-12-30 -200.145189 -21.000000  100.067018 NaN  NaN\n</code></pre>\n\n<p>I can do it with loops but was hoping for a more elegant/efficient solution because this can get big in terms of number of elements in each row.</p>\n\n<p>thanks</p>\n"}, {"tags": ["python", "pylint", "conda"], "comments": [{"owner": {"reputation": 14214, "user_id": 476410, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a2eca89d3f5a16ae846f501d0596116c?s=128&d=identicon&r=PG", "display_name": "tarabyte", "link": "https://stackoverflow.com/users/476410/tarabyte"}, "edited": false, "score": 0, "creation_date": 1450913399, "post_id": 34445171, "comment_id": 56632489, "body": "just using pep8 instead for now..."}, {"owner": {"reputation": 2700, "user_id": 347567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f658a58fa2f6a02b804b71e168d44da6?s=128&d=identicon&r=PG", "display_name": "pneumatics", "link": "https://stackoverflow.com/users/347567/pneumatics"}, "edited": false, "score": 0, "creation_date": 1450915174, "post_id": 34445171, "comment_id": 56633005, "body": "it&#39;s working for me on a fresh Conda environment on Python2.7, Windows7. Looks like you&#39;re on Python3.5 on Linux, is that it?"}, {"owner": {"reputation": 2700, "user_id": 347567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f658a58fa2f6a02b804b71e168d44da6?s=128&d=identicon&r=PG", "display_name": "pneumatics", "link": "https://stackoverflow.com/users/347567/pneumatics"}, "edited": false, "score": 0, "creation_date": 1450915885, "post_id": 34445171, "comment_id": 56633213, "body": "what is the output of <code>which pylint</code>?"}, {"owner": {"reputation": 14214, "user_id": 476410, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a2eca89d3f5a16ae846f501d0596116c?s=128&d=identicon&r=PG", "display_name": "tarabyte", "link": "https://stackoverflow.com/users/476410/tarabyte"}, "reply_to_user": {"reputation": 2700, "user_id": 347567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f658a58fa2f6a02b804b71e168d44da6?s=128&d=identicon&r=PG", "display_name": "pneumatics", "link": "https://stackoverflow.com/users/347567/pneumatics"}, "edited": false, "score": 0, "creation_date": 1450915887, "post_id": 34445171, "comment_id": 56633215, "body": "yes, i&#39;m using python3.5.  which pylint was added."}, {"owner": {"reputation": 2700, "user_id": 347567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f658a58fa2f6a02b804b71e168d44da6?s=128&d=identicon&r=PG", "display_name": "pneumatics", "link": "https://stackoverflow.com/users/347567/pneumatics"}, "edited": false, "score": 0, "creation_date": 1450916160, "post_id": 34445171, "comment_id": 56633280, "body": "thanks. which version of pylint? <code>conda list | grep pylint</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2700, "user_id": 347567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f658a58fa2f6a02b804b71e168d44da6?s=128&d=identicon&r=PG", "display_name": "pneumatics", "link": "https://stackoverflow.com/users/347567/pneumatics"}, "is_accepted": true, "score": 4, "last_activity_date": 1453232687, "last_edit_date": 1453232687, "creation_date": 1450916685, "answer_id": 34445697, "question_id": 34445171, "link": "https://stackoverflow.com/questions/34445171/pylint-failing-in-conda-environment/34445697#34445697", "title": "pylint failing in conda environment", "body": "<p>This problem has been fixed upstream at Bitbucket, and the code has percolated to pip, but not to Conda yet. Install it with pip for now.</p>\n\n<pre><code>conda uninstall -y pylint\npip install --no-input pylint\n</code></pre>\n\n<p>[edit] The <code>pylint</code> package has been updated in the Continuum repository, and you can now install <code>pylint</code> with Conda and Python 3.5 and it works without any trouble.</p>\n"}], "owner": {"reputation": 14214, "user_id": 476410, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a2eca89d3f5a16ae846f501d0596116c?s=128&d=identicon&r=PG", "display_name": "tarabyte", "link": "https://stackoverflow.com/users/476410/tarabyte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1935, "favorite_count": 1, "accepted_answer_id": 34445697, "answer_count": 1, "score": 4, "last_activity_date": 1453232687, "creation_date": 1450912589, "last_edit_date": 1450917022, "question_id": 34445171, "link": "https://stackoverflow.com/questions/34445171/pylint-failing-in-conda-environment", "title": "pylint failing in conda environment", "body": "<p>I'm unable to get basic usage of <code>pylint</code> in a conda virtual environment.  If this just isn't yet supported, is there another linting tool I can use?</p>\n\n<pre><code>conda install pylint\npylint testfile.py\n</code></pre>\n\n<p>testfile.py:</p>\n\n<pre><code>#!/usr/bin/env python\nprint(\"hello, world\")\n</code></pre>\n\n<p>pylint path:</p>\n\n<pre><code>$ which pylint\n/home/me/anaconda3/envs/myenv/bin/pylint\n\n$ conda list | grep pylint\npylint                    1.4.2                    py35_0    defaults\n</code></pre>\n\n<p>Traceback:</p>\n\n<pre><code>No config file found, using default configuration\nTraceback (most recent call last):\n  File \"/home/me/anaconda3/envs/myenv/lib/python3.5/site-packages/pylint/lint.py\", line 892, in get_ast\n    return MANAGER.ast_from_file(filepath, modname, source=True)\n  File \"/home/me/anaconda3/envs/myenv/lib/python3.5/site-packages/astroid/manager.py\", line 111, in ast_from_file\n    return AstroidBuilder(self).file_build(filepath, modname)\n  File \"/home/me/anaconda3/envs/myenv/lib/python3.5/site-packages/astroid/builder.py\", line 134, in file_build\n    module = self._data_build(data, modname, path)\n  File \"/home/me/anaconda3/envs/myenv/lib/python3.5/site-packages/astroid/builder.py\", line 177, in _data_build\n    module = rebuilder.visit_module(node, modname, node_file, package)\n  File \"/home/me/anaconda3/envs/myenv/lib/python3.5/site-packages/astroid/rebuilder.py\", line 146, in visit_module\n    newnode.body = [self.visit(child, newnode) for child in node.body]\n  File \"/home/me/anaconda3/envs/myenv/lib/python3.5/site-packages/astroid/rebuilder.py\", line 146, in &lt;listcomp&gt;\n    newnode.body = [self.visit(child, newnode) for child in node.body]\n  File \"/home/me/anaconda3/envs/myenv/lib/python3.5/site-packages/astroid/rebuilder.py\", line 159, in visit\n    return self._transform(visit_method(node, parent))\n  File \"/home/me/anaconda3/envs/myenv/lib/python3.5/site-packages/astroid/rebuilder.py\", line 407, in visit_discard\n    newnode.value = self.visit(node.value, newnode)\n  File \"/home/me/anaconda3/envs/myenv/lib/python3.5/site-packages/astroid/rebuilder.py\", line 159, in visit\n    return self._transform(visit_method(node, parent))\n  File \"/home/me/anaconda3/envs/myenv/lib/python3.5/site-packages/astroid/rebuilder.py\", line 311, in visit_callfunc\n    if node.starargs is not None:\nAttributeError: 'Call' object has no attribute 'starargs'\n************* Module testfile\nF:  1, 0: &lt;class 'AttributeError'&gt;: 'Call' object has no attribute 'starargs' (astroid-error)\n</code></pre>\n\n<p><a href=\"https://bitbucket.org/logilab/pylint/issues/643/attributeerror-call-object-has-no\" rel=\"nofollow\">https://bitbucket.org/logilab/pylint/issues/643/attributeerror-call-object-has-no</a></p>\n"}, {"tags": ["python", "plot", "bokeh"], "answers": [{"tags": [], "owner": {"reputation": 153, "user_id": 3439441, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d8425391de8ff24144449adc35e0bcf4?s=128&d=identicon&r=PG&f=1", "display_name": "RubyJ", "link": "https://stackoverflow.com/users/3439441/rubyj"}, "is_accepted": false, "score": 1, "last_activity_date": 1472483287, "creation_date": 1472483287, "answer_id": 39209510, "question_id": 34445122, "link": "https://stackoverflow.com/questions/34445122/changing-the-palette-in-a-bar-plot-in-bokeh/39209510#39209510", "title": "changing the palette in a bar plot in bokeh", "body": "<p>This is how I've used this: </p>\n\n<pre><code> color = color(columns = 'Week of', palette = palettes.Set1_9)\n</code></pre>\n\n<p>Here I am saying what palette to use while saying what column to color by</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14164928, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14Gj7DrtoEi2rxvSbDLdzl7jaLQzWjVSebr1GChlP=k-s128", "display_name": "Dillon", "link": "https://stackoverflow.com/users/14164928/dillon"}, "is_accepted": false, "score": 0, "last_activity_date": 1598371693, "creation_date": 1598371693, "answer_id": 63582914, "question_id": 34445122, "link": "https://stackoverflow.com/questions/34445122/changing-the-palette-in-a-bar-plot-in-bokeh/63582914#63582914", "title": "changing the palette in a bar plot in bokeh", "body": "<p>This is the method I find works, it will color each bar of the chart according to the 'Cost' of the object.</p>\n<pre><code>from bokeh.models import ColorBar, LinearColorMapper\nfrom bokeh.palettes import Viridis256\n\nmapper = LinearColorMapper(palette=Viridis256, low=0, high=150)\ncolor_bar = ColorBar(color_mapper=mapper, location=(0,0))\n\nplot = df.plot_bokeh.bar(\n    x='Date',\n    y='Cost',\n    title='Expenses'\n    color= {'field': 'Cost', 'transform': mapper})\n\nshow(plot)\n</code></pre>\n<p>You can see the result here:\n[1]: <a href=\"https://i.stack.imgur.com/6oVLr.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/6oVLr.png</a></p>\n"}], "owner": {"reputation": 961, "user_id": 3967334, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/64155fa28b39dc18d26df315036f6988?s=128&d=identicon&r=PG&f=1", "display_name": "manu", "link": "https://stackoverflow.com/users/3967334/manu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 922, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1598371693, "creation_date": 1450912303, "question_id": 34445122, "link": "https://stackoverflow.com/questions/34445122/changing-the-palette-in-a-bar-plot-in-bokeh", "title": "changing the palette in a bar plot in bokeh", "body": "<p>I'm checking the Bokeh tutorials, and I'm not able to change the palette in a Bar plot. In particular, I'm trying to complete the last exercise in \n<a href=\"http://nbviewer.ipython.org/github/bokeh/bokeh-notebooks/blob/master/tutorial/01%20-%20charts.ipynb\" rel=\"nofollow\">this notebook</a> with the following code:</p>\n\n<pre><code>from bokeh.palettes import brewer                                                                    \nfrom bokeh.palettes import Blues5,YlGnBu9, YlOrBr9, YlOrRd9\nbar = Bar(medals,label=\"name\",values=\"count\",stack=\"medal\",agg=\"sum\",color=\"medal\",palette=Blues5)\nshow(bar)\n</code></pre>\n\n<p>Whatever palette I try from the second line, the result is the same. Am I missing something? I'm using Bokeh 0.10.</p>\n\n<p>Cheers.</p>\n"}, {"tags": ["android", "python", "adb", "monkeyrunner"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 5712756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e40d908f0ed5fd973716203f3fafdc43?s=128&d=identicon&r=PG&f=1", "display_name": "Saeid Moemen", "link": "https://stackoverflow.com/users/5712756/saeid-moemen"}, "edited": false, "score": 0, "creation_date": 1450987429, "post_id": 34456662, "comment_id": 56656798, "body": "I used 2 thread at first and I think multithreading causes the problem, so for test I write the code snippet in the question but nothing changes. I consider to use AndroidViewClient/culebra but I cant find an easy way to send touch to x,y coordinate of screen(the app is Corona(openGL) and has only one View!)"}], "tags": [], "owner": {"reputation": 57412, "user_id": 236465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoAkG.jpg?s=128&g=1", "display_name": "Diego Torres Milano", "link": "https://stackoverflow.com/users/236465/diego-torres-milano"}, "is_accepted": false, "score": 0, "last_activity_date": 1450981923, "creation_date": 1450981923, "answer_id": 34456662, "question_id": 34445112, "link": "https://stackoverflow.com/questions/34445112/error-in-call-press-or-touch-methodes-from-monkeyrunner-while-reading-adb-logcat/34456662#34456662", "title": "Error in call press or touch methodes from monkeyrunner while reading adb logcat", "body": "<p>You can try <strong><a href=\"https://github.com/dtmilano/AndroidViewClient\" rel=\"nofollow\">AndroidViewClient/culebra</a></strong> and with barely no changes your script should work.</p>\n\n<p>You can do as I did to test it, run</p>\n\n<pre><code>$ culebra -uo myscript.py\n</code></pre>\n\n<p>Edit <code>myscript.py</code> to remove what's not needed (i.e. vc) and add your code at the end.</p>\n\n<pre><code>#! /usr/bin/env python\n# -*- coding: utf-8 -*-\n'''\nCopyright (C) 2013-2014  Diego Torres Milano\nCreated on 2015-12-24 by Culebra v11.0.9\n                      __    __    __    __\n                     /  \\  /  \\  /  \\  /  \\ \n____________________/  __\\/  __\\/  __\\/  __\\_____________________________\n___________________/  /__/  /__/  /__/  /________________________________\n                   | / \\   / \\   / \\   / \\   \\___\n                   |/   \\_/   \\_/   \\_/   \\    o \\ \n                                           \\_____/--&lt;\n@author: Diego Torres Milano\n@author: Jennifer E. Swofford (ascii art snake)\n'''\n\n\nimport re\nimport sys\nimport os\nimport subprocess\n\n\ntry:\n    sys.path.insert(0, os.path.join(os.environ['ANDROID_VIEW_CLIENT_HOME'], 'src'))\nexcept:\n    pass\n\nfrom com.dtmilano.android.viewclient import ViewClient\n\nTAG = 'CULEBRA'\n\n_s = 5\n_v = '--verbose' in sys.argv\n\n\nkwargs1 = {'ignoreversioncheck': False, 'verbose': False, 'ignoresecuredevice': False}\ndevice, serialno = ViewClient.connectToDeviceOrExit(**kwargs1)\nkwargs2 = {'forceviewserveruse': False, 'useuiautomatorhelper': False, 'ignoreuiautomatorkilled': True, 'autodump': False, 'startviewserver': True, 'compresseddump': True}\n\nproc = subprocess.Popen(['adb -e logcat'],shell=True, stdout=subprocess.PIPE)\ni = 0\nwhile 1:\n    for line in proc.stdout:\n        if line.find('Corona')!=-1:     \n            print line\n            device.press('KEYCODE_BACK')\n</code></pre>\n\n<p>However, I think you should start a new thread to read from logcat.</p>\n"}, {"tags": [], "owner": {"reputation": 17, "user_id": 5712756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e40d908f0ed5fd973716203f3fafdc43?s=128&d=identicon&r=PG&f=1", "display_name": "Saeid Moemen", "link": "https://stackoverflow.com/users/5712756/saeid-moemen"}, "is_accepted": false, "score": 0, "last_activity_date": 1451065953, "creation_date": 1451065953, "answer_id": 34465091, "question_id": 34445112, "link": "https://stackoverflow.com/questions/34445112/error-in-call-press-or-touch-methodes-from-monkeyrunner-while-reading-adb-logcat/34465091#34465091", "title": "Error in call press or touch methodes from monkeyrunner while reading adb logcat", "body": "<p>I found a way to get logs from logcat without using adb and problem solved.</p>\n\n<ul>\n<li>install udplogcat app on device, set (ip,port) and start service.</li>\n<li>recieve logs in python(monkeyrunner) from udp socket</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 27, "user_id": 8171101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ae54b5be006b64d34cfdbf2f3b47eb2?s=128&d=identicon&r=PG&f=1", "display_name": "JordanViaComputer", "link": "https://stackoverflow.com/users/8171101/jordanviacomputer"}, "is_accepted": false, "score": 0, "last_activity_date": 1501598284, "creation_date": 1501598284, "answer_id": 45440836, "question_id": 34445112, "link": "https://stackoverflow.com/questions/34445112/error-in-call-press-or-touch-methodes-from-monkeyrunner-while-reading-adb-logcat/45440836#45440836", "title": "Error in call press or touch methodes from monkeyrunner while reading adb logcat", "body": "<p>I always got this error message when I'd close the CMD window that's running the batch file, that's calling the monkeyrunner python script. If I let the bat file fully finish every time, the next time I'd run the script I wouldn't see this issue.</p>\n\n<p>I found another way to avoid that initial \"<strong>(...)Error sending press event: (...)</strong>\" error. And it works every time.</p>\n\n<p>In my .bat file, if I CALL a dummy file first (i.e. prep.py), before my actual script, the adb connection issue sorts itself out.</p>\n\n<pre><code>cd C:\\Users\\%USERNAME%\\AppData\\Local\\Android\\sdk\\tools\nCALL monkeyrunner.bat C:\\Users\\%USERNAME%\\Desktop\\MonkeyRunner\\prep.py\nCALL monkeyrunner.bat C:\\Users\\%USERNAME%\\Desktop\\MonkeyRunner\\monkeyRunnerScript1.py\n</code></pre>\n\n<p>What I mean by \"dummy file\" (prep.py), is a file that has only the monkeyrunner essentials. Like this...</p>\n\n<pre><code>from com.android.monkeyrunner import MonkeyRunner, MonkeyDevice\n\ndevice = MonkeyRunner.waitForConnection()\ndevice.installPackage('myproject/bin/MyApplication.apk')\npackage = 'com.example.android.myapplication'\nactivity = 'com.example.android.myapplication.MainActivity'\nrunComponent = package + '/' + activity\ndevice.startActivity(component=runComponent)\ndevice.press('KEYCODE_MENU', MonkeyDevice.DOWN_AND_UP)\n\nmonkeyrunner.sleep(1)\ndevice.press(\"KEYCODE_HOME\", MonkeyDevice.DOWN_AND_UP) #HOME button\nprint(\"Pressed HOME button.\")\nmonkeyrunner.sleep(1)\ndevice.drag((800,1300),(800,300),0.15,5) #swipe up to scroll down Routes list\nprint(\"Swiped Up to open Tablet.\")\nmonkeyrunner.sleep(1)\ndevice.press(\"KEYCODE_POWER\", MonkeyDevice.DOWN_AND_UP) #Power button\nprint(\"Fake script is done.\")\nprint(\"Now turning OFF tablet for actual script.\")\nprint(\"Please standby...\")\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 5712756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e40d908f0ed5fd973716203f3fafdc43?s=128&d=identicon&r=PG&f=1", "display_name": "Saeid Moemen", "link": "https://stackoverflow.com/users/5712756/saeid-moemen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 632, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1501598284, "creation_date": 1450912258, "question_id": 34445112, "link": "https://stackoverflow.com/questions/34445112/error-in-call-press-or-touch-methodes-from-monkeyrunner-while-reading-adb-logcat", "title": "Error in call press or touch methodes from monkeyrunner while reading adb logcat", "body": "<p>I'm beginner in monkeyrunner and python, I want to read logcat logs and after processing the logs, send feedback to app by calling press or touch methods, the reading section and press sections work fine separately, but when they comes together problem appears!</p>\n\n<pre><code>from com.android.monkeyrunner import MonkeyRunner, MonkeyDevice\nimport commands\nimport sys\nimport string\nimport subprocess\n\ndevice = MonkeyRunner.waitForConnection(10,'emulator-5554')\nproc = subprocess.Popen(['adb -e logcat'],shell=True, stdout=subprocess.PIPE)\ni = 0\nwhile 1:\n    for line in proc.stdout:       \n        #print \"test:\", line.rstrip()\n        if line.find('Corona')!=-1:     \n            print line\n            device.press('KEYCODE_BACK', MonkeyDevice.DOWN_AND_UP)\n</code></pre>\n\n<p>error:</p>\n\n<pre><code>    151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice] Er\nror sending press event: KEYCODE_BACK DOWN_AND_UP\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]jav\na.net.SocketException: Connection reset by peer: socket write error\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat java.net.SocketOutputStream.socketWrite0(Native Method)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat java.net.SocketOutputStream.write(SocketOutputStream.java:153)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:221)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:291)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat sun.nio.cs.StreamEncoder.implFlush(StreamEncoder.java:295)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:141)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat java.io.OutputStreamWriter.flush(OutputStreamWriter.java:229)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat java.io.BufferedWriter.flush(BufferedWriter.java:254)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat com.android.chimpchat.ChimpManager.sendMonkeyEventAndGetResponse(ChimpManager\n.java:187)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat com.android.chimpchat.ChimpManager.sendMonkeyEvent(ChimpManager.java:235)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat com.android.chimpchat.ChimpManager.press(ChimpManager.java:135)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat com.android.chimpchat.adb.AdbChimpDevice.press(AdbChimpDevice.java:327)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat com.android.monkeyrunner.MonkeyDevice.press(MonkeyDevice.java:196)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.\njava:43)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat java.lang.reflect.Method.invoke(Method.java:497)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat org.python.core.PyReflectedFunction.__call__(PyReflectedFunction.java:186)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat org.python.core.PyReflectedFunction.__call__(PyReflectedFunction.java:204)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat org.python.core.PyObject.__call__(PyObject.java:422)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat org.python.core.PyObject.__call__(PyObject.java:426)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat org.python.core.PyMethod.__call__(PyMethod.java:139)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat org.python.pycode._pyx0.f$0(C:\\adt\\adt\\sdk\\tools\\test11111.py:13)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat org.python.pycode._pyx0.call_function(C:\\adt\\adt\\sdk\\tools\\test11111.py)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat org.python.core.PyTableCode.call(PyTableCode.java:165)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat org.python.core.PyCode.call(PyCode.java:18)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat org.python.core.Py.runCode(Py.java:1275)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat org.python.core.__builtin__.execfile_flags(__builtin__.java:522)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat org.python.util.PythonInterpreter.execfile(PythonInterpreter.java:225)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat com.android.monkeyrunner.ScriptRunner.run(ScriptRunner.java:116)\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat com.android.monkeyrunner.MonkeyRunnerStarter.run(MonkeyRunnerStarter.java:77)\n\n151224 02:36:53.349:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]\nat com.android.monkeyrunner.MonkeyRunnerStarter.main(MonkeyRunnerStarter.java:18\n9)\n</code></pre>\n"}, {"tags": ["python", "c++", "swig"], "comments": [{"owner": {"reputation": 1271, "user_id": 4121210, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/lLgLn.jpg?s=128&g=1", "display_name": "El Sampsa", "link": "https://stackoverflow.com/users/4121210/el-sampsa"}, "edited": false, "score": 0, "creation_date": 1450912377, "post_id": 34445045, "comment_id": 56632141, "body": "alas, in <a href=\"http://www.swig.org/Doc2.0/SWIGDocumentation.html#SWIG_nn30\" rel=\"nofollow noreferrer\">swig.org/Doc2.0/SWIGDocumentation.html#SWIG_nn30</a> it is said that &quot;SWIG provides full support for function pointers provided that the callback functions are defined in C and not in the target language&quot; .. so I guess its impossible.  Any ideas how to do the callback logic from python appreciated though.."}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1450992409, "post_id": 34445045, "comment_id": 56658037, "body": "Definitely not impossible,  we can customise everything, but since you&#39;re using C++ not C why not use <code>std::function</code>? That makes writing a cleaner answer simpler - if you&#39;re happy with that change I&#39;ll write up a complete solution for you. (Essentially a Python version of <a href=\"http://stackoverflow.com/a/32668302/168175\">stackoverflow.com/a/32668302/168175</a>, or a generalised version of <a href=\"http://stackoverflow.com/a/11522655/168175\">stackoverflow.com/a/11522655/168175</a>)"}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1450992699, "post_id": 34445045, "comment_id": 56658105, "body": "Failing that do the real callbacks get a <code>void*</code> argument that you get to set when you register them? That makes life much cleaner."}, {"owner": {"reputation": 383, "user_id": 4336936, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-NEZ6nCvuLNw/AAAAAAAAAAI/AAAAAAAAABQ/UFN7WEgEn3Q/photo.jpg?sz=128", "display_name": "Xingjun Wang", "link": "https://stackoverflow.com/users/4336936/xingjun-wang"}, "edited": false, "score": 0, "creation_date": 1526386658, "post_id": 34445045, "comment_id": 87715707, "body": "I meet the same problem and could you please show your final solution\uff1f"}, {"owner": {"reputation": 1271, "user_id": 4121210, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/lLgLn.jpg?s=128&g=1", "display_name": "El Sampsa", "link": "https://stackoverflow.com/users/4121210/el-sampsa"}, "edited": false, "score": 0, "creation_date": 1526390489, "post_id": 34445045, "comment_id": 87718531, "body": "In my final solution, I decided not to pass python functions to the cpp level, but to do everything in the cpp level.  :)"}], "answers": [{"comments": [{"owner": {"reputation": 1271, "user_id": 4121210, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/lLgLn.jpg?s=128&g=1", "display_name": "El Sampsa", "link": "https://stackoverflow.com/users/4121210/el-sampsa"}, "edited": false, "score": 0, "creation_date": 1454490645, "post_id": 34445425, "comment_id": 58062824, "body": "Thanks for informing me about the directors.. by now, I have found them very usefull.  .. but I still don&#39;t have the slightest idea how they work..!  Is the python code &quot;compiled&quot; at some stage and passed to C, or does swig embed the python &quot;runtime environment&quot; into the wrapped C-code (i.e. does it execute &quot;PyRun_SimpleString&quot; and the like from C).  I am baffled."}, {"owner": {"reputation": 2883, "user_id": 5162389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FTqjP.jpg?s=128&g=1", "display_name": "m7thon", "link": "https://stackoverflow.com/users/5162389/m7thon"}, "reply_to_user": {"reputation": 1271, "user_id": 4121210, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/lLgLn.jpg?s=128&g=1", "display_name": "El Sampsa", "link": "https://stackoverflow.com/users/4121210/el-sampsa"}, "edited": false, "score": 0, "creation_date": 1454491780, "post_id": 34445425, "comment_id": 58063612, "body": "I also only know as much as it says in the SWIG manual. I am sure no python code is ever compiled. But python code is obviously being called from C. Does this require embedding the python runtime environment?"}, {"owner": {"reputation": 1271, "user_id": 4121210, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/lLgLn.jpg?s=128&g=1", "display_name": "El Sampsa", "link": "https://stackoverflow.com/users/4121210/el-sampsa"}, "edited": false, "score": 0, "creation_date": 1455740864, "post_id": 34445425, "comment_id": 58629772, "body": "hmm.. I guess it calls the PyObject_CallMethod of the python C api in the wrapper"}], "tags": [], "owner": {"reputation": 2883, "user_id": 5162389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FTqjP.jpg?s=128&g=1", "display_name": "m7thon", "link": "https://stackoverflow.com/users/5162389/m7thon"}, "is_accepted": true, "score": 3, "last_activity_date": 1450914405, "creation_date": 1450914405, "answer_id": 34445425, "question_id": 34445045, "link": "https://stackoverflow.com/questions/34445045/passing-python-functions-to-swig-wrapped-c-code/34445425#34445425", "title": "Passing python functions to SWIG wrapped C++ code", "body": "<p>You can implement the callback logic in Python by using <a href=\"http://www.swig.org/Doc3.0/SWIGDocumentation.html#Python_directors\" rel=\"nofollow\">\"directors\"</a>.</p>\n\n<p>Basically, instead of passing callback functions, you pass callback objects instead. The base object can be defined in C++ and provide a <code>virtual</code> callback member function. This object can then be inherited from and the callback function overwritten in Python. The inherited object can then be passed to a C++ function instead of a callback function. For this to work, you need to enable the director feature for such a callback class.</p>\n\n<p>This does require changing the underlying C++ library, though.</p>\n"}, {"comments": [{"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 1, "creation_date": 1450993530, "post_id": 34457964, "comment_id": 56658321, "body": "I like using ctypes like that. I think you can make the SWIG/Python bit slightly neater by hiding all the ctypes bit inside a <code>%pythoncode %{ ... %}</code> block so that from the user of the Pyhton module&#39;s perspective they just call <code>use_callback</code> with a Python callable and everything else just happens under the hood."}, {"owner": {"reputation": 1748, "user_id": 99279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36ea76ee226b4cdb598055de1eb1d67a?s=128&d=identicon&r=PG", "display_name": "sterin", "link": "https://stackoverflow.com/users/99279/sterin"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1450994375, "post_id": 34457964, "comment_id": 56658497, "body": "@Flexo, good suggestion, I&#39;ve incoporated it into the example."}, {"owner": {"reputation": 1271, "user_id": 4121210, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/lLgLn.jpg?s=128&g=1", "display_name": "El Sampsa", "link": "https://stackoverflow.com/users/4121210/el-sampsa"}, "edited": false, "score": 0, "creation_date": 1454490726, "post_id": 34457964, "comment_id": 58062882, "body": "A follow-up question: what happens at &quot;f = py_callback_type(py_callback)&quot; .. does the python code get converted to machine code or something like that..?  How does this thing work under the hood?"}, {"owner": {"reputation": 1748, "user_id": 99279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36ea76ee226b4cdb598055de1eb1d67a?s=128&d=identicon&r=PG", "display_name": "sterin", "link": "https://stackoverflow.com/users/99279/sterin"}, "edited": false, "score": 0, "creation_date": 1454537314, "post_id": 34457964, "comment_id": 58094592, "body": "The <code>ctypes</code> module uses <a href=\"https://en.wikipedia.org/wiki/Libffi\" rel=\"nofollow noreferrer\"><code>libffi</code></a> to do that. From the Wikipedia page:  libffi can produce a pointer to a function that can accept and decode any combination of arguments defined at run time."}, {"owner": {"reputation": 367, "user_id": 2321145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a6447f6df923c9aaac74a3b47a1e81c?s=128&d=identicon&r=PG", "display_name": "hmaarrfk", "link": "https://stackoverflow.com/users/2321145/hmaarrfk"}, "edited": false, "score": 1, "creation_date": 1515781148, "post_id": 34457964, "comment_id": 83446176, "body": "Just a note, for python 3.6, you need to use the typecast: <code>PyLong_AsVoidPtr</code> instead of <code>PyInt_AsLong</code>"}, {"owner": {"reputation": 1748, "user_id": 99279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36ea76ee226b4cdb598055de1eb1d67a?s=128&d=identicon&r=PG", "display_name": "sterin", "link": "https://stackoverflow.com/users/99279/sterin"}, "reply_to_user": {"reputation": 367, "user_id": 2321145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a6447f6df923c9aaac74a3b47a1e81c?s=128&d=identicon&r=PG", "display_name": "hmaarrfk", "link": "https://stackoverflow.com/users/2321145/hmaarrfk"}, "edited": false, "score": 0, "creation_date": 1515792350, "post_id": 34457964, "comment_id": 83450949, "body": "Thanks @user87746 , I&#39;ve incorporated your suggestion."}], "tags": [], "owner": {"reputation": 1748, "user_id": 99279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36ea76ee226b4cdb598055de1eb1d67a?s=128&d=identicon&r=PG", "display_name": "sterin", "link": "https://stackoverflow.com/users/99279/sterin"}, "is_accepted": false, "score": 4, "last_activity_date": 1515792258, "last_edit_date": 1515792258, "creation_date": 1450991743, "answer_id": 34457964, "question_id": 34445045, "link": "https://stackoverflow.com/questions/34445045/passing-python-functions-to-swig-wrapped-c-code/34457964#34457964", "title": "Passing python functions to SWIG wrapped C++ code", "body": "<p>Seems to me that a combination of <a href=\"https://docs.python.org/2/library/ctypes.html\" rel=\"nofollow noreferrer\"><code>ctypes</code></a> and a SWIG <a href=\"http://www.swig.org/Doc1.3/Typemaps.html\" rel=\"nofollow noreferrer\"><code>typemap</code></a> would be the easiest way to solve the problem. <code>ctypes</code> makes it easy to generate a C function that calls a Python callable. The Python code should be along the lines of:</p>\n\n<pre><code>import example\n\n# python callback\ndef py_callback(i, s):\n    print( 'py_callback(%d, %s)'%(i, s) )\n\nexample.use_callback(py_callback)\n</code></pre>\n\n<p>On the SWIG side we have: (1) a Python function <code>use_callback</code> that wraps the Python callback with a <code>ctypes</code> wrapper, and passes the address the wrapper as an integer to <code>_example.use_callback()</code>, and (2) a SWIG <code>typemap</code> that extracts the address and casts itto the appropriate function pointer. </p>\n\n<pre><code>%module example\n\n// a typemap for the callback, it expects the argument to be an integer\n// whose value is the address of an appropriate callback function\n%typemap(in) void (*f)(int, const char*) {\n    $1 = (void (*)(int i, const char*))PyLong_AsVoidPtr($input);;\n}\n\n%{\n    void use_callback(void (*f)(int i, const char* str));\n%}\n\n%inline\n%{\n\n// a C function that accepts a callback\nvoid use_callback(void (*f)(int i, const char* str))\n{\n    f(100, \"callback arg\");\n}\n\n%}\n\n%pythoncode\n%{\n\nimport ctypes\n\n# a ctypes callback prototype\npy_callback_type = ctypes.CFUNCTYPE(None, ctypes.c_int, ctypes.c_char_p)\n\ndef use_callback(py_callback):\n\n    # wrap the python callback with a ctypes function pointer\n    f = py_callback_type(py_callback)\n\n    # get the function pointer of the ctypes wrapper by casting it to void* and taking its value\n    f_ptr = ctypes.cast(f, ctypes.c_void_p).value\n\n    _example.use_callback(f_ptr)\n\n%}\n</code></pre>\n\n<p>You can find this complete example with a CMakeLists.txt file <a href=\"https://gist.github.com/sterin/32b5c7c42a177dacf455\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>edit: incorporated @Flexo suggestion to move the Python part into the %pythoncode block of the SWIG file.</p>\n\n<p>edit: incorporated @user87746 suggestion for Python 3.6+ compatibility.</p>\n"}], "owner": {"reputation": 1271, "user_id": 4121210, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/lLgLn.jpg?s=128&g=1", "display_name": "El Sampsa", "link": "https://stackoverflow.com/users/4121210/el-sampsa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2965, "favorite_count": 0, "accepted_answer_id": 34445425, "answer_count": 2, "score": 4, "last_activity_date": 1515792258, "creation_date": 1450911840, "question_id": 34445045, "link": "https://stackoverflow.com/questions/34445045/passing-python-functions-to-swig-wrapped-c-code", "title": "Passing python functions to SWIG wrapped C++ code", "body": "<p>I am trying to wrap a C++ library for python, using SWIG.  The library uses callback functions frequently, by passing <em>callback functions of certain type</em> to class methods.</p>\n\n<p>Now, after wrapping the code, I would like to create the callback logic from python.  Is this possible?  Here is an experiment I was doing to find it out .. does not work at the moment.</p>\n\n<p>The header and swig files are as follows:</p>\n\n<p>paska.h :</p>\n\n<pre><code>typedef void (handleri)(int code, char* codename);\n\n// handleri is now an alias to a function that eats int, string and returns void\n\nvoid wannabe_handleri(int i, char* blah);\n\nvoid handleri_eater(handleri* h);\n</code></pre>\n\n<p>paska.i :</p>\n\n<pre><code>%module paska\n\n%{ // this section is copied in the front of the wrapper file\n#define SWIG_FILE_WITH_INIT\n#include \"paska.h\"\n%}\n\n// from now on, what are we going to wrap ..\n\n%inline %{\n// helper functions here\n\nvoid wannabe_handleri(int i, char* blah) {\n};\n\nvoid handleri_eater(handleri* h) {\n};\n\n%}\n\n%include \"paska.h\"\n\n// in this case, we just put the actual .cpp code into the inline block ..\n</code></pre>\n\n<p>Finally, I test in python ..</p>\n\n<pre><code>import paska\n\ndef testfunc(i, st):\n  print i\n  print st\n\npaska.handleri_eater(paska.wannabe_handleri(1,\"eee\")) # THIS WORKS!\n\npaska.handleri_eater(testfunc) # THIS DOES NOT WORK!\n</code></pre>\n\n<p>The last line throws me \"TypeError: in method 'handleri_eater', argument 1 of type 'handleri *'\"</p>\n\n<p>Is there any way to \"cast\" the python function to a type accepted by the SWIG wrapper?</p>\n"}, {"tags": ["python", "string"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5712792, "user_type": "registered", "profile_image": "https://graph.facebook.com/1072968002735284/picture?type=large", "display_name": "Markus", "link": "https://stackoverflow.com/users/5712792/markus"}, "edited": false, "score": 0, "creation_date": 1450913457, "post_id": 34445163, "comment_id": 56632520, "body": "It works. I think i understood whats happening in this code. Thank you. :)"}], "tags": [], "owner": {"reputation": 124, "user_id": 5710571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e14eb1f21ba6ec09e1efe05c7286e500?s=128&d=identicon&r=PG&f=1", "display_name": "user768518", "link": "https://stackoverflow.com/users/5710571/user768518"}, "is_accepted": true, "score": 0, "last_activity_date": 1450913245, "last_edit_date": 1450913245, "creation_date": 1450912536, "answer_id": 34445163, "question_id": 34445031, "link": "https://stackoverflow.com/questions/34445031/generating-a-protocol-string/34445163#34445163", "title": "Generating a protocol string", "body": "<p>Well, simply put, the line <code>combined = str(hex(first_byte)) + \" \" + str(hex(second_byte))</code>\nis evaluated when you create the class.\nWhat you could do is the following:</p>\n\n<pre><code>class  MyStruct:\n    def __init__(self, first_byte, second_byte):\n        self.first_byte = first_byte\n        self.second_byte = second_byte\n        self.combined = hex(first_byte) + \" \" + hex(second_byte)\n\n\ntest = MyStruct(36, 128)\nprint(\"MyStruct: test first=%i second=%i comb=%s\" %(test.first_byte, test.second_byte, test.combined))\n</code></pre>\n\n<p>I suggest you take a look at classes, methods and attributes before you go any further, you may pick up a few useful tools.</p>\n\n<p>Further explanation:\nBy declaring first_byte and second_byte directly inside the class, you are creating static class variables, accessed by <code>MyStruct.first_byte</code> and <code>MyStruct.second_byte</code>. Here's an example to illustrate what I'm talking about:</p>\n\n<pre><code>&gt;&gt;&gt; class A:\n    tag = 10\n    def set_tag(self, val):\n        self.tag = val\n\n&gt;&gt;&gt; b = A()\n&gt;&gt;&gt; b.tag\n10\n&gt;&gt;&gt; A.tag\n10\n&gt;&gt;&gt; b.set_tag(5)\n&gt;&gt;&gt; b.tag\n5\n&gt;&gt;&gt; A.tag\n10\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5712792, "user_type": "registered", "profile_image": "https://graph.facebook.com/1072968002735284/picture?type=large", "display_name": "Markus", "link": "https://stackoverflow.com/users/5712792/markus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 34445163, "answer_count": 1, "score": 1, "last_activity_date": 1450914382, "creation_date": 1450911801, "last_edit_date": 1450914382, "question_id": 34445031, "link": "https://stackoverflow.com/questions/34445031/generating-a-protocol-string", "title": "Generating a protocol string", "body": "<p>I'd like to read combined information from of a bunch of variables.\nI tried this here:</p>\n\n<pre><code>class MyStruct:\n    first_byte = 0\n    second_byte = 0\n    combined = str(hex(first_byte)) + \" \" + str(hex(second_byte))\n\ntest = MyStruct() test.first_byte = 36 test.second_byte = 128\n\nprint(\"MyStruct: test first=%i second=%i comb=%s\" %(test.first_byte, test.second_byte, test.combined))\n</code></pre>\n\n<p>And I get:</p>\n\n<blockquote>\n  <blockquote>\n    <p>>\n    MyStruct: test first=36 second=128 comb=0x0 0x0</p>\n  </blockquote>\n</blockquote>\n\n<p>But I was expecting:</p>\n\n<blockquote>\n  <blockquote>\n    <p>>\n    MyStruct: test first=36 second=128 comb=0x24 0x80</p>\n  </blockquote>\n</blockquote>\n\n<p>I see that the calculations of them combined are made just when it is declared. But I don't know how to calculate it again.</p>\n\n<p>Why I am using this:\nI'd like to create a protocol-string for LIN-signals over a <a href=\"http://www.carberry.it/\" rel=\"nofollow\">CARBERRY</a>\nHere you can find further information: <a href=\"http://www.carberry.it/wiki/carberry:cmds:subsys:lintx\" rel=\"nofollow\">LIN-command</a></p>\n\n<p>I'd like to define each byte separately like this:</p>\n\n<pre><code>protokol.pid = 10\nprotokol.D0 = value_one\nprotokol.D1 = value_two\n</code></pre>\n\n<p>and so on..</p>\n"}, {"tags": ["python", "matplotlib", "wxpython"], "comments": [{"owner": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "edited": false, "score": 0, "creation_date": 1450915212, "post_id": 34444995, "comment_id": 56633015, "body": "can you please report this as a bug in the mpl issue tracker?"}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1451319258, "post_id": 34444995, "comment_id": 56735300, "body": "That works for me using the matplotlib 1.5.0 stable release. Could you add some platform information to your question? What version of wxPython are you using?"}], "answers": [{"tags": [], "owner": {"reputation": 2290, "user_id": 1945087, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a821bc5d486ccd8228e6cf740e12d51f?s=128&d=identicon&r=PG", "display_name": "J Jones", "link": "https://stackoverflow.com/users/1945087/j-jones"}, "is_accepted": true, "score": 0, "last_activity_date": 1452713054, "creation_date": 1452713054, "answer_id": 34775323, "question_id": 34444995, "link": "https://stackoverflow.com/questions/34444995/updated-matplotlib-package-does-not-work-with-wxpython/34775323#34775323", "title": "Updated matplotlib package does not work with wxPython", "body": "<p>This problem appears to be solved in matplotlib 1.5.1.  In addition, the code above requires inclusion of the line <code>matplotlib.use('WXAgg')</code>.  This ensures that the backend is set for wxPython, not for 'Qt4Agg', which is the matplotlib default.  </p>\n\n<p>More discussion of the issue is here:  <a href=\"https://github.com/matplotlib/matplotlib/issues/5737\" rel=\"nofollow\">https://github.com/matplotlib/matplotlib/issues/5737</a></p>\n"}], "owner": {"reputation": 2290, "user_id": 1945087, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a821bc5d486ccd8228e6cf740e12d51f?s=128&d=identicon&r=PG", "display_name": "J Jones", "link": "https://stackoverflow.com/users/1945087/j-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 34775323, "answer_count": 1, "score": 1, "last_activity_date": 1452713054, "creation_date": 1450911605, "last_edit_date": 1451411875, "question_id": 34444995, "link": "https://stackoverflow.com/questions/34444995/updated-matplotlib-package-does-not-work-with-wxpython", "title": "Updated matplotlib package does not work with wxPython", "body": "<p>I'm running into a strange compatibility problem between wxPython and matplotlib.  </p>\n\n<pre><code>import wx\nimport pylab\napp = wx.App(False)\napp.frame = wx.Frame(None)\napp.frame.Centre()\napp.frame.Show()\n</code></pre>\n\n<p>With matplotlib 1.5.0 or higher, this code will not run -- it hangs with no error on: </p>\n\n<pre><code>app = wx.App(False)\n</code></pre>\n\n<p>If I comment out <code>import pylab</code>, it works fine.  <code>import matplotlib</code> does not cause an error, but <code>import matplotlib.pyplot as plt</code> does.  </p>\n\n<p>With matplotlib 1.4.2, this code works fine as is, including the <code>pylab</code> import.  </p>\n\n<p>I've looked for possible changes here: <a href=\"http://matplotlib.org/1.5.0/api/api_changes.html\" rel=\"nofollow\">http://matplotlib.org/1.5.0/api/api_changes.html</a>, but nothing appears relevant.  </p>\n\n<p>I'm on OSX El Capitan, using wxPython 3.0.2.0.  </p>\n\n<p>Any ideas about what's gone wrong?</p>\n"}, {"tags": ["python", "fibonacci"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1450912050, "post_id": 34444970, "comment_id": 56632050, "body": "Break this into pieces. Do you know how to compute Fibonacci numbers? Do you know how to compute GCDs? Write functions for each piece, and then use those functions to perform your task."}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 2, "creation_date": 1450912244, "post_id": 34444970, "comment_id": 56632107, "body": "Consider using a function to return the Fibonacci number of a particular index and one to find the greatest common denominator of two given numbers.  Test the two functions independently with known value, and only when you&#39;re sure they work, tie them together in your compute function.  If you build your code with known good components, you will have an easier time debugging their combination."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1450915791, "post_id": 34444970, "comment_id": 56633189, "body": "You never specified the way in which your &quot;Python code not working,&quot; so how about those smart quotes there? SO&#39;s syntax highlighting will show you that those aren&#39;t working properly. There are also several syntax errors that are nowhere close to valid Python."}, {"owner": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "edited": false, "score": 0, "creation_date": 1450918714, "post_id": 34444970, "comment_id": 56633909, "body": "Is this homework? There was someone else asking <a href=\"http://stackoverflow.com/questions/34442200/python-fibonacci-number/34442379\">the same question</a> a few hours ago, where you incidentally borrowed your code from. You haven&#39;t exactly showed understanding of what you&#39;re trying to do."}], "answers": [{"comments": [{"owner": {"reputation": 3382, "user_id": 4759361, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/zu2kz.jpg?s=128&g=1", "display_name": "xrisk", "link": "https://stackoverflow.com/users/4759361/xrisk"}, "edited": false, "score": 1, "creation_date": 1450916013, "post_id": 34445192, "comment_id": 56633250, "body": "<a href=\"https://www.python.org/dev/peps/pep-0008/\" rel=\"nofollow noreferrer\">PEP8</a>"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1450916638, "post_id": 34445192, "comment_id": 56633388, "body": "May I ask why you saved a <code>lambda</code> instead of just using <code>def</code>?"}, {"owner": {"reputation": 1306, "user_id": 1305487, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U9hB5.png?s=128&g=1", "display_name": "qwertyboy", "link": "https://stackoverflow.com/users/1305487/qwertyboy"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1451225254, "post_id": 34445192, "comment_id": 56703961, "body": "@TigerhawkT3 - there was no special reason, but then again, there was also no reason to use <code>def</code> instead of <code>lambda</code> :)"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 1, "creation_date": 1451225789, "post_id": 34445192, "comment_id": 56704130, "body": "<a href=\"https://www.python.org/dev/peps/pep-0008/#programming-recommendations\" rel=\"nofollow noreferrer\">Yes, there is.</a>"}, {"owner": {"reputation": 1306, "user_id": 1305487, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U9hB5.png?s=128&g=1", "display_name": "qwertyboy", "link": "https://stackoverflow.com/users/1305487/qwertyboy"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1451484073, "post_id": 34445192, "comment_id": 56803237, "body": "@TigerhawkT3 - changed the code per your explanation. Thanks."}], "tags": [], "owner": {"reputation": 1306, "user_id": 1305487, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U9hB5.png?s=128&g=1", "display_name": "qwertyboy", "link": "https://stackoverflow.com/users/1305487/qwertyboy"}, "is_accepted": false, "score": 0, "last_activity_date": 1451484013, "last_edit_date": 1451484013, "creation_date": 1450912704, "answer_id": 34445192, "question_id": 34444970, "link": "https://stackoverflow.com/questions/34444970/python-code-not-working-trying-to-compute-two-fibonacci-numbers-and-find-greate/34445192#34445192", "title": "Python code not working. Trying to compute two fibonacci numbers and find greatest common factor", "body": "<p>You can use gcd from fractions for the greatest common divisor, and defining a non recursive fibonacci calculator is pretty simple. Now you just need to bring them in together:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!/usr/bin/env python\nfrom math import sqrt\nfrom fractions import gcd\nfrom sys import argv\n\ndef fib(n):\n    return int(((1+sqrt(5))**n-(1-sqrt(5))**n)/(2**n*sqrt(5)))\n\nfib1, fib2 = [fib(int(arg)) for arg in argv[1:3]]\nfibs_gcd = gcd(fib1, fib2)\n\nprint(\"greatest common divisor of {} and {} fibonacci numbers ({} and {}) is {}\".format(\n    argv[1], argv[2], fib1, fib2, fibs_gcd))\n</code></pre>\n\n<p>Save to file and run it with <code>python &lt;file name&gt; &lt;first num&gt; &lt;second num&gt;</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1086, "user_id": 1060162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/S7uFc.jpg?s=128&g=1", "display_name": "Luca Bezerra", "link": "https://stackoverflow.com/users/1060162/luca-bezerra"}, "is_accepted": false, "score": 2, "last_activity_date": 1450917002, "last_edit_date": 1592644375, "creation_date": 1450915513, "answer_id": 34445556, "question_id": 34444970, "link": "https://stackoverflow.com/questions/34444970/python-code-not-working-trying-to-compute-two-fibonacci-numbers-and-find-greate/34445556#34445556", "title": "Python code not working. Trying to compute two fibonacci numbers and find greatest common factor", "body": "<p>In my opinion, when it comes to Python, the simplest answer might be either the smallest piece of code or the code that's easiest to understand (and sometimes both things are the same). Since you're starting with Python, I think the easiest to understand is the best way to approach, but I reckon that qwertyboys's answer might be also correct (and more advanced).</p>\n<p>This is how I would do (I agree with user2357112's comment on splitting the problem into two parts):</p>\n<pre><code>first_num = int(input(&quot;Enter the first positive number: &quot;))\nsecond_num = int(input(&quot;Enter the second positive number: &quot;))\n\nfib_a, fib_b = 1, 1\nfib_sequence = [1, 1]\n\nfor i in range (first_num + second_num):\n    temp = fib_a + fib_b    \n    fib_a = fib_b\n    fib_b = temp\n    fib_sequence.append(temp)\n    \nfrom fractions import gcd\n\nprint(&quot;Fibonacci sequence's #%s: %s&quot; % (first_num, fib_sequence[first_num - 1]))\nprint(&quot;Fibonacci sequence's #%s: %s&quot; % (second_num, fib_sequence[second_num - 1]))\nprint(&quot;Their Greatest Common Divisor is: %s&quot; % gcd(fib_sequence[first_num - 1], fib_sequence[second_num - 1]))\n</code></pre>\n<p>I first created a Fibonacci's list that's long enough to fit both indexes, and then picked the ones I wanted. An output example would be:</p>\n<blockquote>\n<p>Enter the first positive number: 3</p>\n<p>Enter the second positive number: 6</p>\n<p>Fibonacci sequence's #3: 2</p>\n<p>Fibonacci sequence's #6: 8</p>\n<p>Their Greatest Common Divisor is: 2</p>\n</blockquote>\n<p>Although it's not the most elegant solution (yes, there is recursion and the likes), I've tried to keep it clear on what's happening, hope it helps. Remember that readability is a very important part of coding (specially on Python) :)</p>\n"}], "owner": {"reputation": 27, "user_id": 5712806, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvqga.png?s=128&g=1", "display_name": "Rob B", "link": "https://stackoverflow.com/users/5712806/rob-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "closed_date": 1451059042, "answer_count": 2, "score": 0, "last_activity_date": 1451484013, "creation_date": 1450911431, "question_id": 34444970, "link": "https://stackoverflow.com/questions/34444970/python-code-not-working-trying-to-compute-two-fibonacci-numbers-and-find-greate", "closed_reason": "Not suitable for this site", "title": "Python code not working. Trying to compute two fibonacci numbers and find greatest common factor", "body": "<p>Can someone please help with this code. I'm attempting to write the simplest program possible that reads in 2 numbers (m,n), then computes the nth fibonacci number and the mth fibonacci number and then finds the greatest common factor of the two inputted numbers. This is what I have so far. I'm new to Python, so any help would be appreciated. Thanks in advance!</p>\n\n<pre><code>def compute():\n    m, n = -1, -1\n    while m&lt;0: m = int(input(\u201cPlease enter a positive number for m: \u201c))\n    while n&lt;0: m = int(input(\u201cPlease enter a positive number for n: \u201c))\n    a, b = 1,1\n    for i in (\u2018temp\u2019, a+b), \n             (\u2018a\u2019, b), \n             (\u2018b\u2019, temp),\n             (\u2018mth\u2019, b if i==m)\n             (\u2018nth\u2019, b if i==m)\n    for i in range(2, n+1)),:pass\n    maxlen=0)\nreturn max(i for i in range(1, nth+1) if not mth%i and not nth%i)\n</code></pre>\n"}, {"tags": ["python", "django", "python-2.7", "unit-testing"], "comments": [{"owner": {"reputation": 1697, "user_id": 891975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d32f1c88cd4c4e200df4d428b1c2360?s=128&d=identicon&r=PG", "display_name": "\u041f\u0430\u0432\u0435\u043b \u0418\u0432\u0430\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/891975/%d0%9f%d0%b0%d0%b2%d0%b5%d0%bb-%d0%98%d0%b2%d0%b0%d0%bd%d0%be%d0%b2"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1450911944, "post_id": 34444946, "comment_id": 56632007, "body": "The key focus is on @patch decorator - does it work in general in a way I want or not and what should I do with it to run it to achieve the right behavior?"}, {"owner": {"reputation": 1697, "user_id": 891975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d32f1c88cd4c4e200df4d428b1c2360?s=128&d=identicon&r=PG", "display_name": "\u041f\u0430\u0432\u0435\u043b \u0418\u0432\u0430\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/891975/%d0%9f%d0%b0%d0%b2%d0%b5%d0%bb-%d0%98%d0%b2%d0%b0%d0%bd%d0%be%d0%b2"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1451381621, "post_id": 34444946, "comment_id": 56757658, "body": "@MartijnPieters I&#39;ve rewritten the question, may you unblock it?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1451385455, "post_id": 34444946, "comment_id": 56759621, "body": "It was reopened by community vote already. Thanks for updating it!"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1451385573, "post_id": 34444946, "comment_id": 56759685, "body": "Your code, as posted, just works. You patched the right object, the <code>rabbit</code> local variable in the decorator not is a <code>MagicMock</code> instance, but the <code>rabbit.run_rabbitmq()</code> call <i>is</i>."}], "owner": {"reputation": 1697, "user_id": 891975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d32f1c88cd4c4e200df4d428b1c2360?s=128&d=identicon&r=PG", "display_name": "\u041f\u0430\u0432\u0435\u043b \u0418\u0432\u0430\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/891975/%d0%9f%d0%b0%d0%b2%d0%b5%d0%bb-%d0%98%d0%b2%d0%b0%d0%bd%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1451383263, "creation_date": 1450911261, "last_edit_date": 1451380691, "question_id": 34444946, "link": "https://stackoverflow.com/questions/34444946/how-to-change-the-class-behavior-using-mock", "title": "How to change the class behavior using mock?", "body": "<p>For example, I have the following logic in my Django test:</p>\n\n<pre><code>from rest_framework.test import APITestCase, APIClient\nimport unittest\nfrom mock import patch\nfrom rest_framework.reverse import reverse\nfrom rest_framework import status\nfrom django.test import TestCase\nfrom django.contrib.auth.models import User\n\nclass APITest(unittest.TestCase):\n    def setUp(self):\n        self.client = APIClient(enforce_csrf_checks=False)\n        self.user = User.objects.create_user('test_user', 'test_user@test.com', 'password')\n        self.user.save()\n\n    def test_auth_get(self):\n        with patch('app.views.RabbitMq.run_rabbitmq'):\n            self.client.login(username='test_user', password='password')\n            self.client.force_authenticate(user=self.user)\n            response = self.client.get(reverse('user-list'), format='json')\n            print response\n            self.assertEqual(response.status_code, 200)\n</code></pre>\n\n<p>according to this urls.py:</p>\n\n<pre><code>from django.conf.urls import patterns, include, url\nfrom rest_framework import routers\nfrom views import UserViewSet, GroupViewSet\n\nrouter = routers.SimpleRouter()\nrouter.register(r'users', UserViewSet)\nrouter.register(r'groups', GroupViewSet)\n\nurlpatterns = [\n    url(r'^', include(router.urls)),\n    url(r'^api-auth/', include('rest_framework.urls', namespace='rest_framework')),\n]\n</code></pre>\n\n<p>and I want to mock run_rabbitmq in views.py:</p>\n\n<pre><code>from django.contrib.auth.models import User, Group\nimport pika\nfrom django.http import HttpResponse\nfrom rest_framework import viewsets\nfrom serializers import UserSerializer, GroupSerializer\n\nclass RabbitMq:\n    def __init__(self):\n        pass\n\n    def run_rabbitmq(self):\n        connection = pika.BlockingConnection(pika.ConnectionParameters('localhost'))\n        channel = connection.channel()\n        channel.queue_declare(queue='test')\n        channel.basic_publish(exchange='', routing_key='test', body='Hello World!')\n        connection.close()\n\ndef rabbitmq_wrap(OriginalClass):\n    orig_init = OriginalClass.__init__\n    def __init__(self, *args, **kws):\n        rabbit = RabbitMq()\n        rabbit.run_rabbitmq()\n        orig_init(self, *args, **kws)\n\n    OriginalClass.__init__ = __init__\n    return OriginalClass\n\n@rabbitmq_wrap\nclass Record:\n    def __init__(self):\n        pass # here is the logic of writing to database\n\nclass UserViewSet(viewsets.ModelViewSet, Rabbitmq):\n    record = Record()\n\n    queryset = User.objects.all().order_by('-date_joined')\n    serializer_class = UserSerializer\n\nclass GroupViewSet(viewsets.ModelViewSet):\n    queryset = Group.objects.all()\n    serializer_class = GroupSerializer\n\ndef my_view(request):\n    return HttpResponse('&lt;h1&gt;Hello!&lt;/h1&gt;')\n</code></pre>\n\n<p>in a way that it just does nothing. Neither returns nor processes something, just nothing (e.g. sending SMS messages while testing etc.), like it only has a \"pass\" in the body.</p>\n\n<p>Having <a href=\"https://docs.python.org/3/library/unittest.mock.html#where-to-patch\" rel=\"nofollow\">this</a> how to mock instance inside of the decorator?</p>\n"}, {"tags": ["python", "windows", "environment-variables", "anaconda"], "comments": [{"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1450911187, "post_id": 34444864, "comment_id": 56631769, "body": "I&#39;m probaby missing something, but I don&#39;t see the problem. I have multiple versions of python installed (Anaconda among them) and I simply run <code>path\\to\\python.exe app.py</code> and it works with each installation. I don&#39;t have any of pythons in <code>PATH</code> and I don&#39;t have  <code>PYTHONPATH</code> and <code>PYTHONHOME</code> configured."}, {"owner": {"reputation": 7225, "user_id": 1899628, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/PAWN2.png?s=128&g=1", "display_name": "stenci", "link": "https://stackoverflow.com/users/1899628/stenci"}, "reply_to_user": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1450911604, "post_id": 34444864, "comment_id": 56631904, "body": "Running the Anaconda app with Python environment crashes in <code>sre_compile.py</code>. Running the Python app with Anaconda environment crashes in <code>_collections_abc.py</code>. I had to set all the 3 variables in order to get rid of the errors."}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1450912042, "post_id": 34444864, "comment_id": 56632047, "body": "I see. I don&#39;t have any of them set, which is why I never have that problem. Anyway, can you show the script with which this happens: &quot;<i>Using set on the same script where python is executed causes python to crash immediately</i>&quot;?"}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1450912376, "post_id": 34444864, "comment_id": 56632140, "body": "I only now noticed you use <code>setx</code>. That is the problem. See my answer below."}], "answers": [{"comments": [{"owner": {"reputation": 7225, "user_id": 1899628, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/PAWN2.png?s=128&g=1", "display_name": "stenci", "link": "https://stackoverflow.com/users/1899628/stenci"}, "edited": false, "score": 0, "creation_date": 1450912396, "post_id": 34445129, "comment_id": 56632148, "body": "I tried that, as explained on the question, but it doesn&#39;t work."}, {"owner": {"reputation": 7225, "user_id": 1899628, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/PAWN2.png?s=128&g=1", "display_name": "stenci", "link": "https://stackoverflow.com/users/1899628/stenci"}, "edited": false, "score": 0, "creation_date": 1450912559, "post_id": 34445129, "comment_id": 56632206, "body": "Sorry, it wasn&#39;t clear, but I tried both <code>setx</code> and <code>set</code>. <code>setx</code> has not effect on this session, but it allows it to work at the next, while <code>set</code> it causes it to crash on this session, while has no effect on the next."}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "reply_to_user": {"reputation": 7225, "user_id": 1899628, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/PAWN2.png?s=128&g=1", "display_name": "stenci", "link": "https://stackoverflow.com/users/1899628/stenci"}, "edited": false, "score": 0, "creation_date": 1450912575, "post_id": 34445129, "comment_id": 56632217, "body": "That does not work for subsequent processes. You can do both <code>SET</code> and <code>SETX</code> to cover both, but honestly, if you ever need to use <code>SETX</code>, I believe you are going to have problems sooner or later. For example, if you try to run multiple pythons at the same time, that won&#39;t work."}, {"owner": {"reputation": 7225, "user_id": 1899628, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/PAWN2.png?s=128&g=1", "display_name": "stenci", "link": "https://stackoverflow.com/users/1899628/stenci"}, "edited": false, "score": 0, "creation_date": 1450912688, "post_id": 34445129, "comment_id": 56632264, "body": "I know, and I tried, but since <code>set</code> doesn&#39;t work and after installing Anaconda the server was a brick, I found that solution with <code>setx</code> and double execution. Now I will try to add all the libraries to Anaconda and get the old app to work in Anaconda, but in the meantime that&#39;s the only solution I found."}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "reply_to_user": {"reputation": 7225, "user_id": 1899628, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/PAWN2.png?s=128&g=1", "display_name": "stenci", "link": "https://stackoverflow.com/users/1899628/stenci"}, "edited": false, "score": 0, "creation_date": 1450912793, "post_id": 34445129, "comment_id": 56632300, "body": "Is it possible that this: <code>set PATH=&quot;[...]C:\\Anaconda3[...]&quot;</code> actually results in both pythons on path? I mean, one of them in the <code>...</code> part?"}, {"owner": {"reputation": 7225, "user_id": 1899628, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/PAWN2.png?s=128&g=1", "display_name": "stenci", "link": "https://stackoverflow.com/users/1899628/stenci"}, "edited": false, "score": 0, "creation_date": 1450912905, "post_id": 34445129, "comment_id": 56632338, "body": "No, each script has 3 folders for Python or Anaconda. Also, I don&#39;t think the problem is there, because with two delayed executions it works. But it doesn&#39;t with <code>set</code> on the same session."}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "reply_to_user": {"reputation": 7225, "user_id": 1899628, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/PAWN2.png?s=128&g=1", "display_name": "stenci", "link": "https://stackoverflow.com/users/1899628/stenci"}, "edited": false, "score": 0, "creation_date": 1450913041, "post_id": 34445129, "comment_id": 56632378, "body": "You will have to debug it. Try printing the whole environment (<code>SET</code> without arguments) before the call to python, both when it works and when it does not. There has to be a difference there."}, {"owner": {"reputation": 7225, "user_id": 1899628, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/PAWN2.png?s=128&g=1", "display_name": "stenci", "link": "https://stackoverflow.com/users/1899628/stenci"}, "edited": false, "score": 0, "creation_date": 1450913401, "post_id": 34445129, "comment_id": 56632491, "body": "I can&#39;t, Python crashes before loading the script. Executing just <code>C:\\Python34\\python</code> without running any app, with the correct environment previously set by <code>setx</code> it starts the interactive environment, while with the wrong environment Python crashes immediately with the error described on the post. It doesn&#39;t give me a chance to debug."}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "reply_to_user": {"reputation": 7225, "user_id": 1899628, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/PAWN2.png?s=128&g=1", "display_name": "stenci", "link": "https://stackoverflow.com/users/1899628/stenci"}, "edited": false, "score": 0, "creation_date": 1450913722, "post_id": 34445129, "comment_id": 56632607, "body": "Not in python, <i>before</i> calling python. Or even <i>instead</i> of calling python. Just print the enviornment to see how it is different."}, {"owner": {"reputation": 7225, "user_id": 1899628, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/PAWN2.png?s=128&g=1", "display_name": "stenci", "link": "https://stackoverflow.com/users/1899628/stenci"}, "edited": false, "score": 0, "creation_date": 1450915274, "post_id": 34445129, "comment_id": 56633033, "body": "The set returns the correct values, as expected. I see the same environment on the same session after the set as on the next session after the setx. But on the first case it crashes, on the second it works."}], "tags": [], "owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "is_accepted": false, "score": 0, "last_activity_date": 1450912336, "creation_date": 1450912336, "answer_id": 34445129, "question_id": 34444864, "link": "https://stackoverflow.com/questions/34444864/using-python-and-anaconda-on-the-same-machine/34445129#34445129", "title": "Using Python and Anaconda on the same machine", "body": "<p>You are using <code>SETX</code>, which does not change the environment variable. It saves the enviroment variable value in registry, to be used in future processes.</p>\n\n<p>In order to change the value in current process, use <code>SET</code>:</p>\n\n<pre><code>set PATH=\"[...]C:\\Anaconda3[...]\"\nset PYTHONPATH=\"C:\\Anaconda3\"\nset PYTHONHOME=\"C:\\Anaconda3\"\n</code></pre>\n"}], "owner": {"reputation": 7225, "user_id": 1899628, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/PAWN2.png?s=128&g=1", "display_name": "stenci", "link": "https://stackoverflow.com/users/1899628/stenci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2072, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1450912454, "creation_date": 1450910706, "last_edit_date": 1450912454, "question_id": 34444864, "link": "https://stackoverflow.com/questions/34444864/using-python-and-anaconda-on-the-same-machine", "title": "Using Python and Anaconda on the same machine", "body": "<p>I just installed Anaconda on C:\\Anaconda3 on the same computer where the old Python was installed on C:\\Python34. </p>\n\n<p>There are tools that manage <a href=\"https://pypi.python.org/pypi/virtualenv\" rel=\"nofollow\">different version of Python</a> or <a href=\"http://conda.pydata.org/docs/py2or3.html#install-a-different-version-of-python\" rel=\"nofollow\">different versions of Anaconda</a>, but I can't find anything that manages different versions of both Python and Anaconda on the same machine at the same time.</p>\n\n<p>I was able to get both the old app to run with Python 3.4 and the new with Anaconda 3.5 using the 4 scripts below. Double clicking on each of them in sequence the two apps run without problems.</p>\n\n<p>But I wasn't able to make one script to run both the apps at once, not even two scripts, one for the first app and one for the second. Any idea how I would solve this problem?</p>\n\n<p><strong>Python1.cmd</strong></p>\n\n<pre><code>setx PATH \"[...]C:\\Python34[...]\"\nsetx PYTHONPATH \"C:\\Python34\"\nsetx PYTHONHOME \"C:\\Python34\"\n</code></pre>\n\n<p><strong>Python2.cmd</strong></p>\n\n<pre><code>cd \\OldFolder\nC:\\Python34\\python app.py\n</code></pre>\n\n<p><strong>Anaconda1.cmd</strong></p>\n\n<pre><code>setx PATH \"[...]C:\\Anaconda3[...]\"\nsetx PYTHONPATH \"C:\\Anaconda3\"\nsetx PYTHONHOME \"C:\\Anaconda3\"\n</code></pre>\n\n<p><strong>Anaconda2.cmd</strong></p>\n\n<pre><code>cd \\NewFolder\nC:\\Python34\\python app.py\n</code></pre>\n\n<p>Using <code>setx</code> works, but only if the script that executes the <code>setx</code> and the one that executes <code>python</code> are not the same (as in the 4 scripts above). Using <code>setx</code> on the same script is ignored by <code>Python</code> or <code>Anaconda</code>.</p>\n\n<p>Using <code>set</code> on the same script where <code>python</code> is executed causes <code>python</code> to crash immediately. Here are the script and the error:</p>\n\n<p><strong>PythonSet.cmd</strong></p>\n\n<pre><code>set PATH=\"[...]C:\\Python34[...]\"\nset PYTHONPATH=\"C:\\Python34\"\nset PYTHONHOME=\"C:\\Python34\"\ncd \\OldFolder\nC:\\Python34\\python app.py\n</code></pre>\n\n<p><strong>Error</strong></p>\n\n<pre><code>Fatal Python error: Py_Initialize: unable to load the file system codec\nImportError: No module named 'encodings'\n</code></pre>\n"}, {"tags": ["python", "macos", "pip"], "answers": [{"comments": [{"owner": {"reputation": 16423, "user_id": 34935, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/27079559125269ea0a30acba3fb06235?s=128&d=identicon&r=PG", "display_name": "dfrankow", "link": "https://stackoverflow.com/users/34935/dfrankow"}, "edited": false, "score": 0, "creation_date": 1450910598, "post_id": 34444826, "comment_id": 56631555, "body": "Thank you!  But &quot;/usr/bin/python: No module named pip&quot;"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "reply_to_user": {"reputation": 16423, "user_id": 34935, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/27079559125269ea0a30acba3fb06235?s=128&d=identicon&r=PG", "display_name": "dfrankow", "link": "https://stackoverflow.com/users/34935/dfrankow"}, "edited": false, "score": 0, "creation_date": 1450910861, "post_id": 34444826, "comment_id": 56631649, "body": "P.s. do you know about <a href=\"https://virtualenv.readthedocs.org/en/latest/\" rel=\"nofollow noreferrer\">virtualenv</a> ?"}, {"owner": {"reputation": 16423, "user_id": 34935, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/27079559125269ea0a30acba3fb06235?s=128&d=identicon&r=PG", "display_name": "dfrankow", "link": "https://stackoverflow.com/users/34935/dfrankow"}, "edited": false, "score": 0, "creation_date": 1450910869, "post_id": 34444826, "comment_id": 56631651, "body": "This worked! Both pip-s seem to be living together somehow."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "reply_to_user": {"reputation": 16423, "user_id": 34935, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/27079559125269ea0a30acba3fb06235?s=128&d=identicon&r=PG", "display_name": "dfrankow", "link": "https://stackoverflow.com/users/34935/dfrankow"}, "edited": false, "score": 0, "creation_date": 1450910983, "post_id": 34444826, "comment_id": 56631684, "body": "It&#39;s normal.  And in fact very common to have <code>pip</code> and <code>pip3</code> on the same system."}, {"owner": {"reputation": 16423, "user_id": 34935, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/27079559125269ea0a30acba3fb06235?s=128&d=identicon&r=PG", "display_name": "dfrankow", "link": "https://stackoverflow.com/users/34935/dfrankow"}, "edited": false, "score": 0, "creation_date": 1450910997, "post_id": 34444826, "comment_id": 56631695, "body": "Can&#39;t use virtualenv, I want to try using it from R (rPython). I understand how f-ed up this seems."}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 1, "last_activity_date": 1450911111, "last_edit_date": 1450911111, "creation_date": 1450910469, "answer_id": 34444826, "question_id": 34444711, "link": "https://stackoverflow.com/questions/34444711/how-to-use-pip-on-a-python-by-path/34444826#34444826", "title": "How to use pip on a python by path?", "body": "<p>For two python installations you can have two pips.  </p>\n\n<p>Install a pip for the other python:</p>\n\n<pre><code>sudo /usr/bin/python -m easy_install pip\n</code></pre>\n\n<p>Execute pip as a module:</p>\n\n<pre><code>/usr/bin/python -m pip install --user your_package\n</code></pre>\n\n<p>Recommend to symlink them to separate names.  </p>\n"}, {"comments": [{"owner": {"reputation": 16423, "user_id": 34935, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/27079559125269ea0a30acba3fb06235?s=128&d=identicon&r=PG", "display_name": "dfrankow", "link": "https://stackoverflow.com/users/34935/dfrankow"}, "edited": false, "score": 0, "creation_date": 1450910789, "post_id": 34444846, "comment_id": 56631620, "body": "Thanks! pip has a shebang (#!) of the wrong python. Then, when I try executing it directly (/usr/bin/python <code>which pip</code> install package), the right python complains it doesn&#39;t know pip exists. I&#39;m afraid to easy-install for /usr/bin/python for fear pip will freak out."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1450910938, "post_id": 34444846, "comment_id": 56631668, "body": "If you have two installations of python, you can/should have two installations of pip.  Trying to use the same version of pip for multiple python versions will be a world of pain .."}, {"owner": {"reputation": 16423, "user_id": 34935, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/27079559125269ea0a30acba3fb06235?s=128&d=identicon&r=PG", "display_name": "dfrankow", "link": "https://stackoverflow.com/users/34935/dfrankow"}, "edited": false, "score": 0, "creation_date": 1450911062, "post_id": 34444846, "comment_id": 56631726, "body": "This might have worked, but I got the other one to work, so off I go. Thanks."}], "tags": [], "owner": {"reputation": 1041, "user_id": 1454143, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/44360e6437e6f1a83b61f34b2485185e?s=128&d=identicon&r=PG", "display_name": "Pierre Michard", "link": "https://stackoverflow.com/users/1454143/pierre-michard"}, "is_accepted": false, "score": 0, "last_activity_date": 1450910845, "last_edit_date": 1450910845, "creation_date": 1450910640, "answer_id": 34444846, "question_id": 34444711, "link": "https://stackoverflow.com/questions/34444711/how-to-use-pip-on-a-python-by-path/34444846#34444846", "title": "How to use pip on a python by path?", "body": "<p>you could :</p>\n\n<ol>\n<li><p>update your PATH variable to give priority to /usr/bin/python over /usr/local/bin/python</p></li>\n<li><p>call pip by its full path:</p>\n\n<p>/usr/bin/pip install package</p></li>\n</ol>\n\n<p>[EDIT] pip seems not to be present on /usr/bin on Yosemite, so you should use easy_install instead</p>\n\n<pre><code>/usr/bin/easy_install package\n</code></pre>\n"}], "owner": {"reputation": 16423, "user_id": 34935, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/27079559125269ea0a30acba3fb06235?s=128&d=identicon&r=PG", "display_name": "dfrankow", "link": "https://stackoverflow.com/users/34935/dfrankow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 34444826, "answer_count": 2, "score": 0, "last_activity_date": 1450911111, "creation_date": 1450909816, "last_edit_date": 1495542656, "question_id": 34444711, "link": "https://stackoverflow.com/questions/34444711/how-to-use-pip-on-a-python-by-path", "title": "How to use pip on a python by path?", "body": "<p><a href=\"https://stackoverflow.com/questions/6220274/install-python-module-to-non-default-version-of-python-on-mac\">This question</a> shows how to use pip for different python versions.  However, I have the same version of python installed in two different paths.  Let's not ask why, if I remove one, things break.</p>\n\n<pre><code>$ /usr/local/bin/python -c \"import sys; print sys.version\"\n2.7.10 (default, Jun 10 2015, 19:42:47) \n[GCC 4.2.1 Compatible Apple LLVM 6.1.0 (clang-602.0.53)]\n$ /usr/bin/python -c \"import sys; print sys.version\"\n2.7.10 (default, Jul 14 2015, 19:46:27) \n[GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.39)]\n</code></pre>\n\n<p>pip seems to install packages to /usr/local/bin/python.</p>\n\n<p>How do I install a package to /usr/bin/python?</p>\n\n<p>I'm on OS X, Yosemite (10.10).</p>\n"}, {"tags": ["python", "class", "wxpython"], "comments": [{"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 1, "creation_date": 1450914779, "post_id": 34444699, "comment_id": 56632902, "body": "<i>What I want to obtain is something similar as this, after clicking the button on the SecondFrame:</i> -- I added some code to achieve that."}], "answers": [{"tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": true, "score": 3, "last_activity_date": 1450915119, "last_edit_date": 1450915119, "creation_date": 1450910138, "answer_id": 34444772, "question_id": 34444699, "link": "https://stackoverflow.com/questions/34444699/send-message-from-one-class-to-another-class/34444772#34444772", "title": "Send message from one class to another class", "body": "<blockquote>\n  <p>That is, after clicking the button in the second frame, how to\n  communicate with the first frame that called it. Any suggestions?</p>\n</blockquote>\n\n<p>When you create the second Frame, send <code>self</code> to it:</p>\n\n<pre><code>frame = SecondFrame(self)  #Inside the first Frame, self is the first Frame\n</code></pre>\n\n<p>Or, equivalently:</p>\n\n<pre><code>first_frame = self\nframe = SecondFrame(first_frame)\n</code></pre>\n\n<p>In the second Frame's constructor do this:</p>\n\n<pre><code>class SecondFrame(wx.Frame):\n\n    def __init__(self, first_frame):\n        \"\"\"Constructor\"\"\"\n        wx.Frame.__init__(self, None, title=\"Second Frame\")\n        self.first_frame = first_frame\n</code></pre>\n\n<p>Then, in the second Frame's onclick handler, you can do this:</p>\n\n<pre><code>def onClose(self,event):\n    self.first_frame.do_something(\"I'm the first frame\")\n    self.Close()\n</code></pre>\n\n<p>And in the first Frame, you can do this:</p>\n\n<pre><code>class FirstFrame(wx.Frame):\n    ...\n    ...\n    def do_something(self, msg):\n        self.msg = msg  #Save the message\n        print(msg)      #Do something else with the message....\n</code></pre>\n\n<p>Or, in your particular case:</p>\n\n<pre><code>    def do_something(self, msg):\n        wx.StaticText(self.panel1, label=\"I'm the first frame\")\n</code></pre>\n\n<p>Note that in your first Frame constructor:</p>\n\n<pre><code>def __init__(self, parent, title):\n        wx.Frame.__init__(self, None, title=\"First Frame\", size=(400,400))\n</code></pre>\n\n<p>you don't use the parent or title parameter variables, so specifying arguments for those variables does nothing:</p>\n\n<pre><code>FirstFrame(None, title='')\n</code></pre>\n\n<p>The title won't be blank, it will be \"First Frame\".  You want to do something like this:</p>\n\n<pre><code>class FirstFrame(wx.Frame):\n\n    def __init__(self, the_title=\"First Frame\", the_parent=None):\n        wx.Frame.__init__(\n                self, \n                the_parent, \n                title=the_title, \n                size=(400,400)\n        )\n        self.UI()\n        self.Centre()\n        self.Show()\n</code></pre>\n\n<p>Then, if you want to use the defaults you can call the first Frame constructor like this:</p>\n\n<pre><code>app = wx.App(False)\nFirstFrame()\napp.MainLoop()\n</code></pre>\n\n<p>And, if you want to use another title, you can write:</p>\n\n<pre><code>app = wx.App(False)\nFirstFrame(\"Testing\")\napp.MainLoop()\n</code></pre>\n"}], "owner": {"reputation": 1124, "user_id": 4299720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hVaNK.png?s=128&g=1", "display_name": "MrPedru22", "link": "https://stackoverflow.com/users/4299720/mrpedru22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 699, "favorite_count": 0, "accepted_answer_id": 34444772, "answer_count": 1, "score": 2, "last_activity_date": 1450915119, "creation_date": 1450909673, "question_id": 34444699, "link": "https://stackoverflow.com/questions/34444699/send-message-from-one-class-to-another-class", "title": "Send message from one class to another class", "body": "<p><strong>Problem:</strong> I have a frame (<code>FirstFrame</code> class), which has a button that calls another frame (<code>SecondFrame</code> class). When I click the button in the <code>SecondFrame</code>, I want this frame to close and to send a message ('I'm the first frame', see below) to the <code>FirstFrame</code>.</p>\n\n<p>This is my code so far:</p>\n\n<pre><code>import wx\n\nclass FirstFrame(wx.Frame):\n\n    def __init__(self, parent, title):\n        wx.Frame.__init__(self, None, title=\"First Frame\", size=(400,400))\n        self.UI()\n        self.Centre()\n        self.Show()\n\n    def UI(self):\n        self.panel1 = wx.Panel(self, -1)\n        self.sizer = wx.BoxSizer()\n        self.sizer.Add(self.panel1, 1, flag=wx.EXPAND) \n        b = wx.Button(self.panel1, label='second window', size=(100,100), pos=(100,100))\n        b.Bind(wx.EVT_BUTTON, self.OnB)        \n\n        self.SetSizer(self.sizer)  \n\n    def OnB(self, event):\n        frame = SecondFrame()\n        frame.Show()\n\nclass SecondFrame(wx.Frame):\n\n    def __init__(self):\n        \"\"\"Constructor\"\"\"\n        wx.Frame.__init__(self, None, title=\"Second Frame\")\n        panel = wx.Panel(self)\n        txt = wx.StaticText(panel, label=\"I'm the second frame!\")\n        self.button = wx.Button(panel, -1, \"Close window and send message\", pos = (100,100))\n        self.button.Bind(wx.EVT_BUTTON, self.onClose)\n\n    def onClose(self,event):\n        self.Close()\n\n#----------------------------------------------------------------------\napp = wx.App(False)\nFirstFrame(None, title='')\napp.MainLoop()\n</code></pre>\n\n<p>I just don't know how to connect the two classes. That is, after clicking the button in the second frame, how to communicate with the first frame that called it. Any suggestions? What I want to obtain is something similar as this, after clicking the button on the <code>SecondFrame</code>:\n<a href=\"https://i.stack.imgur.com/NL5AA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NL5AA.png\" alt=\"enter image description here\"></a></p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1450911604, "post_id": 34444681, "comment_id": 56631903, "body": "It&#39;s not clear what you mean by a string being &quot;in&quot; a regular expression. Are you trying to tell whether a string is in the <i>language specified by</i> a regular expression, or are you trying to determine whether the string is in <i>the text of</i> the regular expression? Is <code>aaa</code> in <code>a*</code>, or is <code>*</code> in <code>a*</code>?"}, {"owner": {"reputation": 93, "user_id": 5426260, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c554fb86cc0108bde14b5bcd9ab4a3e4?s=128&d=identicon&r=PG&f=1", "display_name": "BrxttB", "link": "https://stackoverflow.com/users/5426260/brxttb"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1450911761, "post_id": 34444681, "comment_id": 56631958, "body": "@user2357112 Yes sorry whether the string is in the language specified by the regular expression within the text file. Is aaa in a* not is * in a*"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1450912181, "post_id": 34444681, "comment_id": 56632092, "body": "<code>in</code> isn&#39;t going to cut it. You&#39;re going to want to either write your own regular expression parser, NFA-based or DFA-based, or cop out and rewrite your regexes and inputs in the format expected by the built-in <code>re</code> module so you can fob all the work onto that module. Guessing from the input format, you&#39;re probably supposed to write your own parser."}, {"owner": {"reputation": 131, "user_id": 5527054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80c37ae30c4b95f726c56f05e57a4e7b?s=128&d=identicon&r=PG&f=1", "display_name": "tekim", "link": "https://stackoverflow.com/users/5527054/tekim"}, "edited": false, "score": 0, "creation_date": 1450912644, "post_id": 34444681, "comment_id": 56632244, "body": "Doesn&#39;t translating your &quot;regex&quot; in your example to regex yield: (((1|(21))|(22))((1|2)*))  And couldn&#39;t you programmaticly perform the necessary substitutions to do that translation, and then use re.match?"}, {"owner": {"reputation": 93, "user_id": 5426260, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c554fb86cc0108bde14b5bcd9ab4a3e4?s=128&d=identicon&r=PG&f=1", "display_name": "BrxttB", "link": "https://stackoverflow.com/users/5426260/brxttb"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1450912802, "post_id": 34444681, "comment_id": 56632305, "body": "@user2357112 regular expression parser meaning convert the RE to an NFA and then test the strings on the NFA?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1450912862, "post_id": 34444681, "comment_id": 56632326, "body": "@BrxttB: Pretty much."}, {"owner": {"reputation": 93, "user_id": 5426260, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c554fb86cc0108bde14b5bcd9ab4a3e4?s=128&d=identicon&r=PG&f=1", "display_name": "BrxttB", "link": "https://stackoverflow.com/users/5426260/brxttb"}, "reply_to_user": {"reputation": 131, "user_id": 5527054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80c37ae30c4b95f726c56f05e57a4e7b?s=128&d=identicon&r=PG&f=1", "display_name": "tekim", "link": "https://stackoverflow.com/users/5527054/tekim"}, "edited": false, "score": 0, "creation_date": 1450912930, "post_id": 34444681, "comment_id": 56632344, "body": "@tekim The program is just reading in text files so I&#39;m not going to see what regular expression I&#39;m going to get beforehand so it has to be something that can handle a variety of test cases/regular expressions. Unless I can somehow convert the symbols to the ones re uses then I may have to just convert it to an NFA then go from there"}, {"owner": {"reputation": 131, "user_id": 5527054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80c37ae30c4b95f726c56f05e57a4e7b?s=128&d=identicon&r=PG&f=1", "display_name": "tekim", "link": "https://stackoverflow.com/users/5527054/tekim"}, "edited": false, "score": 0, "creation_date": 1450930454, "post_id": 34444681, "comment_id": 56636288, "body": "@BrxttB It should be a pretty simple substitution: &quot;o&quot; in your regex can just be deleted as in standard regular expressions, just putting two things next to each other does a concatenation. &quot;U&quot; becomes &quot;|&quot;, &quot;e&quot; can be replaced by /x + hex code for epsilon. I am not sure how &quot;N&quot; would translate to a standard regular expression, and in your &quot;regex&quot; how does one escape these special characters.  i.e. what if I really do want to match a &quot;U&quot;?"}, {"owner": {"reputation": 131, "user_id": 5527054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80c37ae30c4b95f726c56f05e57a4e7b?s=128&d=identicon&r=PG&f=1", "display_name": "tekim", "link": "https://stackoverflow.com/users/5527054/tekim"}, "edited": false, "score": 0, "creation_date": 1450931474, "post_id": 34444681, "comment_id": 56636491, "body": "Correction on my earlier comment, should be \\x not /x"}, {"owner": {"reputation": 93, "user_id": 5426260, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c554fb86cc0108bde14b5bcd9ab4a3e4?s=128&d=identicon&r=PG&f=1", "display_name": "BrxttB", "link": "https://stackoverflow.com/users/5426260/brxttb"}, "reply_to_user": {"reputation": 131, "user_id": 5527054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80c37ae30c4b95f726c56f05e57a4e7b?s=128&d=identicon&r=PG&f=1", "display_name": "tekim", "link": "https://stackoverflow.com/users/5527054/tekim"}, "edited": false, "score": 0, "creation_date": 1450941358, "post_id": 34444681, "comment_id": 56639473, "body": "@tekim I&#39;m not sure how to replace the symbols. I realize I do have to convert the RE into an NFA, but I&#39;m not sure how to go about that. I&#39;ve read the algorithm, but I&#39;m having a tough time converting it and if I should use a stack or not."}, {"owner": {"reputation": 131, "user_id": 5527054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80c37ae30c4b95f726c56f05e57a4e7b?s=128&d=identicon&r=PG&f=1", "display_name": "tekim", "link": "https://stackoverflow.com/users/5527054/tekim"}, "edited": false, "score": 0, "creation_date": 1450972785, "post_id": 34444681, "comment_id": 56652136, "body": "@BrxttB regx.replace(&quot;|&quot;, &quot;U&quot;)"}], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1516354509, "creation_date": 1516354509, "answer_id": 48337975, "question_id": 34444681, "link": "https://stackoverflow.com/questions/34444681/incorporating-regular-expression-symbols-to-check-if-string-in-regular-expressio/48337975#48337975", "title": "Incorporating regular expression symbols to check if string in regular expression", "body": "<p>Expanding on tekim's suggestions:</p>\n\n<blockquote>\n  <p>\"o\" in your regex can just be deleted as in standard regular\n  expressions, just putting two things next to each other does a\n  concatenation. \"U\" becomes \"|\"</p>\n</blockquote>\n\n<ul>\n<li>Drop the <code>strings</code> dictionary; it serves no purpose but to mix up the order of the strings.</li>\n<li><p>To translate your kind of <em>regular expression</em> into the standard syntax:</p>\n\n<pre><code>regx = regx.strip().replace(\"U\", \"|\").replace(\"o\", \"\")+\"$\"\n</code></pre></li>\n<li><p>To check the example strings and produce the correct output:</p>\n\n<pre><code>for line in lines:\n    string = line.strip()\n    if re.match(regx, string):\n        print('True', string)\n    else:\n        print('False', string)\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 93, "user_id": 5426260, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c554fb86cc0108bde14b5bcd9ab4a3e4?s=128&d=identicon&r=PG&f=1", "display_name": "BrxttB", "link": "https://stackoverflow.com/users/5426260/brxttb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1516354509, "creation_date": 1450909571, "last_edit_date": 1450911902, "question_id": 34444681, "link": "https://stackoverflow.com/questions/34444681/incorporating-regular-expression-symbols-to-check-if-string-in-regular-expressio", "title": "Incorporating regular expression symbols to check if string in regular expression", "body": "<p>I'm writing a program that determines whether specific strings are in the language of a regular expression specified in the text file. In the regular expression there are special symbols that are substituted since they aren't traditional keyboard characters. Those substitutions are: e for epsilon, N for the empty set, U for union, o for concatenation and * for the star operator. I'm having trouble trying to figure out if I need to write code to explain this substitution so that the program runs correctly for example strings longer than one character. For example checking if the regular expression contains U and then define what that means, etc. </p>\n\n<p>An example text file looks like:</p>\n\n<pre><code>12\n(((1U(2o1))U(2o2))o((1U2)*))\n1\n21\n22\n1212121\n21121212\n22121212\ne\n2\n</code></pre>\n\n<p>My program so far:</p>\n\n<pre><code>'''\nSearching text for string that are in the language\nof a regular expression\n'''\nimport sys\nimport re\n\n\n\n# Part 1\n# Read from file (alphabet, regular expression, sequence of strings)\n\nfileName = sys.argv[1] # open file\n# outPut = sys.argv[2]\nalphabet = []\ninputs = []\nstrings = {}\n\n# Read lines from text file and store alphabet and regX\nf = open(fileName, 'r')\nlines = f.readlines()\nalphabet = lines[0].strip()\ndel lines[0]\nregx = lines[0]\ndel lines[0]\n\n\nprint(alphabet, regx, sep='\\n') # debug print statement\n\n# Remaining lines are the test regular expressions\n# print(lines) # debug print statement\n\nfor line in lines:\n    splitLine = line.split()\n    strings[splitLine[0]] = \",\".join(splitLine[0:])\n\nprint('Printing out the strings:', strings) # debug print statement\n\n# Substitute for epsilon, concat, empty set, union and star\n\n\n\n# Testing if the strings are apart of the regular expressions\nfor string in strings:\n    if string not in regx:\n        print('False', string)\n    else:\n        print('True', string)\n</code></pre>\n\n<p>In an example output of that particular text file is:</p>\n\n<pre><code>12\n(((1U(2o1))U(2o2))o((1U2)*))\n\nPrinting out the strings: {'1212121': '1212121', 'e': 'e', '22': '22'...}\n\nFalse 1212121\nFalse e\nFalse 22\nFalse 22121212\nTrue 2\nFalse 21\nTrue 1\nFalse 21121212\n</code></pre>\n\n<p>The correct output should be:</p>\n\n<pre><code>True 1\nTrue 21\nTrue 22\nTrue 1212121\nTrue 21121212\nTrue 22121212\nFalse e\nFalse 2\n</code></pre>\n"}, {"tags": ["python", "django", "google-calendar-api", "oauth2"], "answers": [{"tags": [], "owner": {"reputation": 653, "user_id": 5431594, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/Xu4DF.jpg?s=128&g=1", "display_name": "Ryan Shocker", "link": "https://stackoverflow.com/users/5431594/ryan-shocker"}, "is_accepted": false, "score": 0, "last_activity_date": 1450925350, "creation_date": 1450925350, "answer_id": 34446640, "question_id": 34444676, "link": "https://stackoverflow.com/questions/34444676/oauth2glogging-user-out-of-their-session-django/34446640#34446640", "title": "OAUTH2gLogging user out of their session Django", "body": "<p>Ok, so this was a bit more involved than I thought.</p>\n\n<p>I fixed this by adding a state parameter of the currently logged in username.</p>\n\n<pre><code>logged_in_username = request.user.username\nuser_data = {'var_test' : logged_in_username}\npass_param = urllib.urlencode(user_data)\nFLOW.params['state']=pass_param\nauthorize_url = FLOW.step1_get_authorize_url()\n</code></pre>\n\n<p>This gave me the ability to query the user from the DB via the User model in Django contrib. I parsed out the state var from the URL:</p>\n\n<pre><code>#Get the currently logged in username\nuser_variable_data = str(FLOW.params['state'])\n\n#get rid of the var_test= preprended text data for parsing reasons\nuser_variable_data = user_variable_data[9:]\n\n#Get that user from the database in the form of a user object\ncurrent_user = User.objects.get(username=user_variable_data)\n</code></pre>\n\n<p>and then built a custom backend authentication file to auth the user without a password to maintain the request like nothing weird ever even happened.</p>\n\n<pre><code>user = authenticate(username=user_variable_data)\nlogin(request, user)\nprint(\"AUTHENTICATED\")\n</code></pre>\n\n<h1>Appended this to settings file</h1>\n\n<pre><code>AUTHENTICATION_BACKENDS = (\n    'django.contrib.auth.backends.ModelBackend',\n    'procrastinate.auth_backend.PasswordlessAuthBackend',\n)\n</code></pre>\n\n<h1>Custom Backend File</h1>\n\n<p>from django.contrib.auth.backends import ModelBackend\nfrom django.contrib.auth.models import User</p>\n\n<p>class PasswordlessAuthBackend(ModelBackend):\n    \"\"\"Log in to Django without providing a password.</p>\n\n<pre><code>\"\"\"\ndef authenticate(self, username=None):\n    try:\n        return User.objects.get(username=username)\n    except User.DoesNotExist:\n        return None\n\ndef get_user(self, user_id):\n    try:\n        return User.objects.get(pk=user_id)\n    except User.DoesNotExist:\n        return None\n</code></pre>\n"}], "owner": {"reputation": 653, "user_id": 5431594, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/Xu4DF.jpg?s=128&g=1", "display_name": "Ryan Shocker", "link": "https://stackoverflow.com/users/5431594/ryan-shocker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450925350, "creation_date": 1450909534, "last_edit_date": 1592644375, "question_id": 34444676, "link": "https://stackoverflow.com/questions/34444676/oauth2glogging-user-out-of-their-session-django", "title": "OAUTH2gLogging user out of their session Django", "body": "<p>I am using the OAUTH API to verify access to the users google calendar. They are not logging into my system using OAUTH, just accepting my site accessing their data.</p>\n<p>The problem is, if the user is logged out of their google account and after they hit verify, it force logs them out of their session and I have no way of linking them back up.</p>\n<p>This DOES work if they are already logged into the google account in their browser session and hit accept, they will be redirected to the right page.</p>\n<p>I replicate the error when the cache, cookies are clear and they need to relogin into their google account to verify.</p>\n<p>I've tried storing the session ID, etc, but the request parameter is not containing the same request data as the initial view, so there is a conflict in the data I am trying to retrieve.</p>\n<p>The user is logged in using the standard Django libraries for the credentials model.</p>\n<h1>CODE</h1>\n<pre><code>FLOW = flow_from_clientsecrets(\n    CLIENT_SECRETS,\n    scope='https://www.googleapis.com/auth/calendar.readonly',\n    redirect_uri='http://127.0.0.1:8000/oauth2callback')\n</code></pre>\n<hr />\n<p>'''''''''''''''''''''''''''''''''''''''''''''''''''\nMain function dealing with auth verification\n'''''''''''''''''''''''''''''''''''''''''''''''''''</p>\n<pre><code>def index(request):\n  current_user = User.objects.get(username=request.user.username)\n  storage = Storage(CredentialsModel, 'id', current_user, 'credential')\n  credential = storage.get()\n  if credential is None or credential.invalid == True:\n    FLOW.params['state'] = xsrfutil.generate_token(settings.SECRET_KEY,\n                                                   request.user.id)\n    authorize_url = FLOW.step1_get_authorize_url()\n    return redirect(authorize_url)\n</code></pre>\n<hr />\n<p>'''''''''''''''''''''''''''''''''''''''''''''''''''''''''\nUser then calls the data function once authenticated\n''''''''''''''''''''''''''''''''''''''</p>\n<pre><code>def auth_return(request):\n\n    print(&quot;THE CURRENTLY REQUESTED USER IN THIS SESSION REQUEST IS %s&quot;%(request.user.username))\n\n    credential = FLOW.step2_exchange(request.REQUEST)\n    try:\n      current_user = User.objects.get(id=request.user.id)\n    except:\n        return HttpResponseRedirect(&quot;/login&quot;)\n\n    storage = Storage(CredentialsModel, 'id', current_user, 'credential')\n    storage.put(credential)\n    return HttpResponseRedirect(&quot;/get_cal&quot;)\n</code></pre>\n"}, {"tags": ["python", "json", "postgresql", "sqlalchemy"], "comments": [{"owner": {"reputation": 60742, "user_id": 99594, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5434869366641f527b3f25a34f6e4665?s=128&d=identicon&r=PG", "display_name": "van", "link": "https://stackoverflow.com/users/99594/van"}, "edited": false, "score": 0, "creation_date": 1451114837, "post_id": 34444655, "comment_id": 56680436, "body": "Does work for me in both cases using the same version of sqlalchemy and python 3.4.3. But I doubt that the difference in python version is causing this."}, {"owner": {"reputation": 336, "user_id": 278163, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/8e3b240fc7b76531ee99427ad4a3dfa4?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/278163/andrew"}, "reply_to_user": {"reputation": 60742, "user_id": 99594, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5434869366641f527b3f25a34f6e4665?s=128&d=identicon&r=PG", "display_name": "van", "link": "https://stackoverflow.com/users/99594/van"}, "edited": false, "score": 0, "creation_date": 1451143254, "post_id": 34444655, "comment_id": 56686426, "body": "For real? I filed a bug for SQLAlchemy regarding this and they turned it into a feature request: <a href=\"https://bitbucket.org/zzzeek/sqlalchemy/issues/3617/add-a-new-attributeevent-for-the-generic\" rel=\"nofollow noreferrer\">bitbucket.org/zzzeek/sqlalchemy/issues/3617/&hellip;</a>"}, {"owner": {"reputation": 336, "user_id": 278163, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/8e3b240fc7b76531ee99427ad4a3dfa4?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/278163/andrew"}, "reply_to_user": {"reputation": 60742, "user_id": 99594, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5434869366641f527b3f25a34f6e4665?s=128&d=identicon&r=PG", "display_name": "van", "link": "https://stackoverflow.com/users/99594/van"}, "edited": false, "score": 0, "creation_date": 1451158431, "post_id": 34444655, "comment_id": 56690691, "body": "And a full example: <a href=\"https://bitbucket.org/snippets/0xANDREW/9doBM\" rel=\"nofollow noreferrer\">bitbucket.org/snippets/0xANDREW/9doBM</a>"}, {"owner": {"reputation": 60742, "user_id": 99594, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5434869366641f527b3f25a34f6e4665?s=128&d=identicon&r=PG", "display_name": "van", "link": "https://stackoverflow.com/users/99594/van"}, "edited": false, "score": 0, "creation_date": 1451174608, "post_id": 34444655, "comment_id": 56694573, "body": "You are right. I missed the fact that during initial instance creation the event was triggered as well, so still had a count of 2."}], "owner": {"reputation": 336, "user_id": 278163, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/8e3b240fc7b76531ee99427ad4a3dfa4?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/278163/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 954, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1450909434, "creation_date": 1450909434, "question_id": 34444655, "link": "https://stackoverflow.com/questions/34444655/sqlalchemy-mutabledict-with-postgres-json-column-not-firing-set-event", "title": "SQLAlchemy MutableDict with Postgres JSON column not firing &quot;set&quot; event", "body": "<p>(SQLAlchemy 1.0.11, Python 2.7)</p>\n\n<p>Column definition in model:</p>\n\n<p><code>public_data = Column(MutableDict.as_mutable(JSON), nullable=False)</code></p>\n\n<p>Event listener in same model file:</p>\n\n<pre><code>def __listener(target, value, oldvalue, initiator):\n    ... do some stuff\n\nevent.listen(User.public_data, 'set', __listener)\n</code></pre>\n\n<p>Change that should trigger <code>set</code> event:</p>\n\n<pre><code># this doesn't work\nuser.public_data['address'] = ''\n\n# but this works\nuser.public_data = {}\n</code></pre>\n\n<p>The event is never triggered when only a JSON attribute is modified. I stepped through the SQLAlchemy code and found that after the above line is executed, the model's <code>changed()</code> method is called, which I assume should be responsible for the event firing. Am I doing something wrong or is this not supported?</p>\n"}, {"tags": ["python", "email", "flask"], "comments": [{"owner": {"reputation": 599, "user_id": 2326132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9396bad40c87c5fffe8ba3e522103d8?s=128&d=identicon&r=PG", "display_name": "Ryan O&#39;Donnell", "link": "https://stackoverflow.com/users/2326132/ryan-odonnell"}, "edited": false, "score": 0, "creation_date": 1450913879, "post_id": 34444540, "comment_id": 56632661, "body": "Do you get this error when you try to send email without Flask/through your form, or whenever you try to send any emails? Also, can you enable debug mode and get a traceback from the app? In general I&#39;d suggest against using your own mail server as well, it is very hard to manage and ensure you&#39;re not getting caught by spam."}, {"owner": {"reputation": 323, "user_id": 5490557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGSYf.png?s=128&g=1", "display_name": "J. Pawelczyk", "link": "https://stackoverflow.com/users/5490557/j-pawelczyk"}, "reply_to_user": {"reputation": 599, "user_id": 2326132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9396bad40c87c5fffe8ba3e522103d8?s=128&d=identicon&r=PG", "display_name": "Ryan O&#39;Donnell", "link": "https://stackoverflow.com/users/2326132/ryan-odonnell"}, "edited": false, "score": 0, "creation_date": 1450915101, "post_id": 34444540, "comment_id": 56632987, "body": "You got a fair point. I&#39;m gonna try set it up using a gmail server (or similar)."}, {"owner": {"reputation": 323, "user_id": 5490557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGSYf.png?s=128&g=1", "display_name": "J. Pawelczyk", "link": "https://stackoverflow.com/users/5490557/j-pawelczyk"}, "reply_to_user": {"reputation": 599, "user_id": 2326132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9396bad40c87c5fffe8ba3e522103d8?s=128&d=identicon&r=PG", "display_name": "Ryan O&#39;Donnell", "link": "https://stackoverflow.com/users/2326132/ryan-odonnell"}, "edited": false, "score": 0, "creation_date": 1450916210, "post_id": 34444540, "comment_id": 56633296, "body": "Using the Gmail SMTP server, I still get the same BadHeaderError ..."}, {"owner": {"reputation": 323, "user_id": 5490557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGSYf.png?s=128&g=1", "display_name": "J. Pawelczyk", "link": "https://stackoverflow.com/users/5490557/j-pawelczyk"}, "reply_to_user": {"reputation": 599, "user_id": 2326132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9396bad40c87c5fffe8ba3e522103d8?s=128&d=identicon&r=PG", "display_name": "Ryan O&#39;Donnell", "link": "https://stackoverflow.com/users/2326132/ryan-odonnell"}, "edited": false, "score": 4, "creation_date": 1450916883, "post_id": 34444540, "comment_id": 56633455, "body": "Fixed it. Derp. Got confused with the Message class. The first argument to the Message constructor is the subject, while one has to specify the actual content of the message by changing the value of the msg.body variable."}, {"owner": {"reputation": 599, "user_id": 2326132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9396bad40c87c5fffe8ba3e522103d8?s=128&d=identicon&r=PG", "display_name": "Ryan O&#39;Donnell", "link": "https://stackoverflow.com/users/2326132/ryan-odonnell"}, "edited": false, "score": 0, "creation_date": 1450929817, "post_id": 34444540, "comment_id": 56636188, "body": "Good catch! Yeah you&#39;re not allowed newlines in subjects. Something to remember!"}], "owner": {"reputation": 323, "user_id": 5490557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGSYf.png?s=128&g=1", "display_name": "J. Pawelczyk", "link": "https://stackoverflow.com/users/5490557/j-pawelczyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 930, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1450908844, "creation_date": 1450908844, "last_edit_date": 1495542818, "question_id": 34444540, "link": "https://stackoverflow.com/questions/34444540/badheadererror-using-flask-with-flaskmail-and-postfix-on-ubuntu-server", "title": "BadHeaderError using Flask with FlaskMail and Postfix on Ubuntu server", "body": "<p>I'm running a fullstack website with Flask and SQLite. On the page I have a contact-section to let visitors send me an email. The contact-section consists of an HTML form which sends the information to the webserver via HTTP POST. The server itself uses the FlaskMail plugin to create the message and send it to the mail-server (in this case a postfix server I set up on the same server).\nHowever, I'm getting a BadHeaderError every time I click submit.\nI already looked for existing fixes and found an existing Stackoverflow question <a href=\"https://stackoverflow.com/questions/14105452/what-is-the-cause-of-the-bad-request-error-when-submitting-form-in-flask-applica#14113958\">here</a>. However, the solution there seems to be unrelated to my issue.</p>\n\n<p>Relevant code from webserver.py (Flask python file):</p>\n\n<pre><code>app = Flask(__name__)\napp.debug = True\n\napp.config['MAIL_USERNAME'] = 'admin'\napp.config['MAIL_PASSWORD'] = 'password'\napp.config['MAIL_USE_TLS'] = True\n\nmail = Mail(app)\n\n@app.route('/contact', methods=['GET', 'POST'])\ndef contact():\n    lang = get_lang(request.headers)\n\n    if request.method == 'GET':\n            if lang == 'de':\n                    return render_template('contact.html', lang=lang, title=title_de, descriptio$\n            else:\n                    return render_template('contact.html', lang=lang, title=title_en, descriptio$\n    elif request.method == 'POST':\n            name = request.form['name']\n            email = request.form['email']\n            company = request.form['company']\n            message = request.form['message']\n\n            if not name:\n                    flash('Please enter your name')\n                    return redirect(url_for('contact'))\n            if not email:\n                    flash('Please enter your e-mail address')\n                    return redirect(url_for('contact'))\n            if not message:\n                    flash('Please enter a message')\n                    return redirect(url_for('contact'))\n\n            message += '\\n\\n'\n            message += ('Name: ' + name)\n            message += '\\n\\n'\n            message += ('Company: ' + company)\n\n            msg = Message(message, sender=email, recipients=['pawelczyk.johannes@gmail.com'])\n\n            mail.send(msg)\n\n            flash('You will receive an automatic confirmation mail')\n            return redirect(url_for('index'))\n    else:\n            flash('Bad request')\n            return redirect(url_for('index'))\n</code></pre>\n\n<p>Apache error log: <a href=\"http://pastebin.com/r3Lc9xiD\" rel=\"nofollow noreferrer\">pastebin</a></p>\n\n<p>HTML: </p>\n\n<pre><code>&lt;div id=\"contact-form-container\"&gt;\n    &lt;form id=\"contact-form\" action=\"{{ url_for('contact') }}\" method=\"post\"&gt;\n        &lt;div&gt;\n            &lt;div class=\"contact-form-row\"&gt;\n                &lt;h3 class=\"to-left\"&gt;Name:&lt;/h3&gt;\n                &lt;input class=\"to-right\" type=\"text\" name=\"name\" placeholder=\"Name\"&gt;\n            &lt;/div&gt;\n            &lt;div class=\"contact-form-row\"&gt;\n                &lt;h3 class=\"to-left\"&gt;E-Mail:&lt;/h3&gt;\n                &lt;input class=\"to-right\" type=\"text\" name=\"email\" placeholder=\"E-Mail\"&gt;\n            &lt;/div&gt;\n            &lt;div class=\"contact-form-row\"&gt;\n                &lt;h3 class=\"to-left\"&gt;Firma (optional):&lt;/h3&gt;\n                &lt;input class=\"to-right\" type=\"text\" name=\"company\" placeholder=\"Firma\"&gt;\n            &lt;/div&gt;\n            &lt;h3 class=\"gap-over\"&gt;Ihre Nachricht:&lt;/h3&gt;\n            &lt;textarea cols=\"40\" rows=\"10\" name=\"message\"&gt;&lt;/textarea&gt;&lt;/br&gt;\n        &lt;/div&gt;\n        &lt;div class=\"middle\"&gt;\n            &lt;input class=\"button\" type=\"submit\" value=\"Senden\"&gt;\n        &lt;/div&gt;\n    &lt;/form&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["python", "list", "loops", "pygame"], "answers": [{"tags": [], "owner": {"reputation": 6455, "user_id": 2363967, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e456a6a8bd35a0e65c22d202b48ccfa4?s=128&d=identicon&r=PG", "display_name": "Andrew Williamson", "link": "https://stackoverflow.com/users/2363967/andrew-williamson"}, "is_accepted": false, "score": 3, "last_activity_date": 1450909171, "last_edit_date": 1450909171, "creation_date": 1450908785, "answer_id": 34444528, "question_id": 34444477, "link": "https://stackoverflow.com/questions/34444477/how-do-i-get-this-program-to-draw-10-rectangles-in-python/34444528#34444528", "title": "How Do I Get This Program To Draw 10 Rectangles in Python?", "body": "<p>Change the drawing code loop from</p>\n\n<pre><code>for i in range(len(my_list)):\n    my_object.draw(screen)\n    i = i + 1\nmy_object.move()\n</code></pre>\n\n<p>to</p>\n\n<pre><code>for my_object in my_list\n    my_object.draw(screen)\n    my_object.move()\n</code></pre>\n\n<p>In this bit of code, the section <code>for my_object in my_list</code> goes through the objects in \"my_list\", one at a time, and names it \"my_object\". You need to draw each object, and move each object, so draw and move have to be called from within the loop. If you called them from outside the loop, it would only happen once.</p>\n"}], "owner": {"reputation": 27, "user_id": 5266498, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/35140aa543689b761c1a167440cb5af0?s=128&d=identicon&r=PG&f=1", "display_name": "Mahler7", "link": "https://stackoverflow.com/users/5266498/mahler7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1450909171, "creation_date": 1450908517, "question_id": 34444477, "link": "https://stackoverflow.com/questions/34444477/how-do-i-get-this-program-to-draw-10-rectangles-in-python", "title": "How Do I Get This Program To Draw 10 Rectangles in Python?", "body": "<blockquote>\n  <p>I'm trying to get this to program to print out 10 Rectangles that\n  move using a for loop. With what I've printed out below it it's only\n  printing out 1 moving rectangle. I believe my issue lies in lines\n  67-70? Does anyone know how to get this program to print out 10\n  rectangles?</p>\n</blockquote>\n\n<pre><code>import pygame\nfrom random import randrange \n\n#Colors\nblack = (0, 0, 0)\nwhite = (255, 255, 255)\ngreen = (0, 255, 0)\nred = (255, 0, 0)\n\npygame.init()\n\n#Set width and height of screen\nsize = (700, 500)\nscreen = pygame.display.set_mode(size)\n\npygame.display.set_caption(\"Classes\")\n\nclass Rectangle():\n\n    def __init__(self):\n        self.x = 0\n        self.y = 0\n        self.change_x = 0\n        self.change_y = 0\n        self.width = 0\n        self.height = 0\n        self.color = [0, 255, 0]\n    def draw(self, screen):\n        pygame.draw.rect(screen, self.color, [self.x, self.y, self.width, self.height])\n    def move(self):\n        self.x = self.x + self.change_x\n        self.y = self.y + self.change_y     \n\n\n#Loop until user clicks close\ndone = False\n\n#Manage how fast screen updates\nclock = pygame.time.Clock()\n\nmy_list = []\nfor i in range(10):\n\n    my_object = Rectangle()\n    my_object.x = randrange(0, 701)\n    my_object.y = randrange(0, 501)\n    my_object.change_x = randrange(-3, 3)\n    my_object.change_y = randrange(-3, 3)\n    my_object.width = randrange(20, 71)\n    my_object.height = randrange(20, 71)\n    my_object.color = [0, 255, 0]\n    my_list.append(my_object)\n\n#Main Program Loop\nwhile not done:\n    #Main event loop\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            done = True\n\n    #Game logic goes here\n\n    #Screen clearing code or background image goes here\n    screen.fill(black)\n\n    #drawing code goes here\n    for i in range(len(my_list)):\n        my_object.draw(screen)\n        i = i + 1\n    my_object.move()\n\n    #update and display drawn screen\n    pygame.display.flip()\n\n    #limit to 60 frames per second\n    clock.tick(60)\n\n#close the window and quit\npygame.quit()\n</code></pre>\n"}, {"tags": ["python", "memory-leaks", "zope"], "comments": [{"owner": {"reputation": 1426, "user_id": 673826, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f50a845aca7585dfa8bff6358258eabc?s=128&d=identicon&r=PG", "display_name": "mlt", "link": "https://stackoverflow.com/users/673826/mlt"}, "edited": false, "score": 1, "creation_date": 1450910276, "post_id": 34444448, "comment_id": 56631434, "body": "What Zope version are you using? Can it be ZODB cache? Delayed garbage collection? Are you using ZEO and/or any reverse proxy?"}, {"owner": {"reputation": 16942, "user_id": 452102, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6Rcyo.jpg?s=128&g=1", "display_name": "Nishant", "link": "https://stackoverflow.com/users/452102/nishant"}, "reply_to_user": {"reputation": 1426, "user_id": 673826, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f50a845aca7585dfa8bff6358258eabc?s=128&d=identicon&r=PG", "display_name": "mlt", "link": "https://stackoverflow.com/users/673826/mlt"}, "edited": false, "score": 0, "creation_date": 1450910707, "post_id": 34444448, "comment_id": 56631595, "body": "@mlt Zope2-2.13.22. We use ZeO and also Apache for load balancing. Its running on Windows as well. How do I check delayed garbage collection? Is there a way to gc forcefully?"}, {"owner": {"reputation": 1426, "user_id": 673826, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f50a845aca7585dfa8bff6358258eabc?s=128&d=identicon&r=PG", "display_name": "mlt", "link": "https://stackoverflow.com/users/673826/mlt"}, "edited": false, "score": 1, "creation_date": 1450911065, "post_id": 34444448, "comment_id": 56631728, "body": "<code>gc.collect()</code>?. Perhaps you may find <a href=\"http://maurits.vanrees.org/weblog/archive/2007/10/how-to-minimize-cpu-and-memory-usage-of-zope-and-plone-applications\" rel=\"nofollow noreferrer\">this old post</a> helpful."}], "owner": {"reputation": 16942, "user_id": 452102, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6Rcyo.jpg?s=128&g=1", "display_name": "Nishant", "link": "https://stackoverflow.com/users/452102/nishant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1450908752, "creation_date": 1450908364, "last_edit_date": 1450908752, "question_id": 34444448, "link": "https://stackoverflow.com/questions/34444448/how-do-i-debug-a-memory-leakage-issue-in-zope", "title": "How do I debug a memory leakage issue in Zope?", "body": "<p>Our web application is hogging memory when the load is high. We don't see any\npatterns that implicate any particular URL. Hence it looks like we would need to dig a bit more and see whats really happening with requests vis-a-vis memory. Are there any memory profilers that can monitor per URL memory consumption in the server? </p>\n\n<p>If I could assume that once the request is processed, the incremental memory is a leakage, I was thinking of monitoring the process memory at the Zope's Request(where the request hits first) and Publish(where it servers the content finally) classes and compare the difference. However since <code>Zope</code> seems to support <code>threading</code> which is a new concept to me, will there be there be a scenario where Thread1 Request starts processing, we capture the memory of the process at that time, Thread2 Request stars and finishes with some memory lekage, T1 finishes and we capture the memory causing T1 to show up memory leak of T2 as well since its the same process? Isn't that a general problems with thread and memory monitoring?</p>\n\n<p>How do I debug this problem? Even if its from a different framework I would like to hear that.</p>\n"}, {"tags": ["python", "python-2.7", "ubuntu-14.04", "expat-parser"], "owner": {"reputation": 167, "user_id": 4554976, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0051c0adc990243a6bb4ceead1069727?s=128&d=identicon&r=PG&f=1", "display_name": "CodeIK", "link": "https://stackoverflow.com/users/4554976/codeik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 789, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1450908089, "creation_date": 1450907683, "last_edit_date": 1450908089, "question_id": 34444329, "link": "https://stackoverflow.com/questions/34444329/importerror-xml-parsers-expat-does-not-work", "title": "ImportError xml.parsers.expat does not work", "body": "<p>I have a simple script that import xml.parsers.expat, that works fine if it is executed by command line. But if I call it using subprocess.call(python import-expat.py, shell=True) it does not work.</p>\n\n<p>The script is: </p>\n\n<pre><code>#! /usr/bin/env python\nimport xml.parsers.expat\n</code></pre>\n\n<p>And It is the error:</p>\n\n<pre><code>  File \"/opt/u_script_files/import-expat.py\", line 2, in &lt;module&gt; import xml.parsers.expat\n  File \"/usr/lib/python2.7/xml/parsers/expat.py\", line 4, in &lt;module&gt; from pyexpat import *\nImportError: /usr/lib/python2.7/lib-dynload/pyexpat.x86_64-linux-gnu.so: undefined symbol: XML_SetHashSalt\n</code></pre>\n\n<p>I verify the dependencies with:</p>\n\n<pre><code>$ ldd /usr/lib/python2.7/lib-dynload/pyexpat.x86_64-linux-gnu.so \nlinux-vdso.so.1 =&gt;  (0x00007ffd9b392000)\nlibpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f1608877000)\nlibc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f16084b2000)\nlibexpat.so.1 =&gt; /lib/x86_64-linux-gnu/libexpat.so.1 (0x00007f1608288000)\n/lib64/ld-linux-x86-64.so.2 (0x00007f1608ca6000)\n</code></pre>\n\n<p>And searched the file \"libexpat.so.1\"</p>\n\n<pre><code>$ apt-file search libexpat.so.1\nlibexpat1: /lib/x86_64-linux-gnu/libexpat.so.1\nlibexpat1: /lib/x86_64-linux-gnu/libexpat.so.1.6.0\n</code></pre>\n\n<p>I dont understand why it works only by CommandLine and It does not work if I call the script(import-expat.py) using subprocess.call. I renamed the file \"libexpat.so.1\" as said <a href=\"http://ubuntuforums.org/showthread.php?t=2094005\" rel=\"nofollow\">here</a> but it does not work for me. Some ideas?</p>\n"}, {"tags": ["python", "regex", "string"], "comments": [{"owner": {"reputation": 4136, "user_id": 2850808, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8f08107c3227db4da8ed3b1619a0df99?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/2850808/chris"}, "reply_to_user": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1450908076, "post_id": 34444319, "comment_id": 56630563, "body": "I&#39;ve tried all of the above solutions and tried to alter them to be able to split on the word &#39;and&#39; with little luck. I&#39;ll continue to post everything I tried above"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 2, "creation_date": 1450910815, "post_id": 34444319, "comment_id": 56631629, "body": "Short form: Regular expressions are a poor tool for the job at hand. This is one of those places where one should really build a real parser."}], "answers": [{"tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 0, "last_activity_date": 1450909514, "creation_date": 1450909514, "answer_id": 34444673, "question_id": 34444319, "link": "https://stackoverflow.com/questions/34444319/how-to-split-a-string-by-a-string-except-when-the-string-is-in-quotes-in-python/34444673#34444673", "title": "How to split a string by a string except when the string is in quotes in python?", "body": "<p>You can use the following regex with <code>re.findall</code>:</p>\n\n<pre><code>((?:(?!\\band\\b)[^'])*(?:'[^'\\\\]*(?:\\\\.[^'\\\\]*)*'(?:(?!\\band\\b)[^'])*)*)(?:and|$)\n</code></pre>\n\n<p>See the <a href=\"https://regex101.com/r/eT6uD2/2\" rel=\"nofollow\">regex demo</a>.</p>\n\n<p>The regular expression consists of an unwrapped sequences of either anything but a <code>'</code> up to the first <code>and</code> (with the tempered greedy token <code>(?:(?!\\band\\b)[^'])*</code>) and anything (supporting escaped entities) between and including single apostrophes (with <code>'[^'\\\\]*(?:\\\\.[^'\\\\]*)*'</code> - which is also an unwrapped version of <code>([^'\\\\]|\\\\.)*</code>).</p>\n\n<p>Python <a href=\"http://ideone.com/vytd1u\" rel=\"nofollow\">code demo</a>:</p>\n\n<pre><code>import re\np = re.compile(r'((?:(?!\\band\\b)[^\\'])*(?:\\'[^\\'\\\\]*(?:\\\\.[^\\'\\\\]*)*\\'(?:(?!\\band\\b)[^\\'])*)*)(?:and|$)')\ns = \"section_category_name = 'computer and equipment expense' and date &gt;= 2015-01-01 and date &lt;= 2015-03-31\"\nprint([x for x in p.findall(s) if x])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 541, "user_id": 5678325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7adec05602a8899beda24e1e69390687?s=128&d=identicon&r=PG", "display_name": "oystein-hr", "link": "https://stackoverflow.com/users/5678325/oystein-hr"}, "is_accepted": false, "score": 0, "last_activity_date": 1450910653, "creation_date": 1450910653, "answer_id": 34444851, "question_id": 34444319, "link": "https://stackoverflow.com/questions/34444319/how-to-split-a-string-by-a-string-except-when-the-string-is-in-quotes-in-python/34444851#34444851", "title": "How to split a string by a string except when the string is in quotes in python?", "body": "<p>If all your strings follow the the same pattern, you can use regex to divide it the search into 3 groups. First group from beginning and to the last '. Then the next group is everything between the first and last \"and\". And the last group the rest of the text.</p>\n\n<pre><code>import re\n\nstring = \"section_category_name = 'computer and equipment expense' and date &gt;= 2015-01-01 and date &lt;= 2015-03-31\"\n\noutput = re.match(r\"(^.+['].+['])\\sand\\s(.+)\\sand\\s(.+)\", string).groups()\nprint(output)\n</code></pre>\n\n<p>Each group is defined inside the parentheses in the regex. The square brackets defines a specific character to match. This example will only work as long as \"section_category_name\" equals something inside single quotation marks.</p>\n\n<pre><code>section_category_name = 'something here' and ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1905, "user_id": 794627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f0faa9b905f0eeff93547ec33fc59b?s=128&d=identicon&r=PG", "display_name": "Aldehir", "link": "https://stackoverflow.com/users/794627/aldehir"}, "is_accepted": false, "score": 0, "last_activity_date": 1450932213, "last_edit_date": 1450932213, "creation_date": 1450913606, "answer_id": 34445321, "question_id": 34444319, "link": "https://stackoverflow.com/questions/34444319/how-to-split-a-string-by-a-string-except-when-the-string-is-in-quotes-in-python/34445321#34445321", "title": "How to split a string by a string except when the string is in quotes in python?", "body": "<p>The following code will work, and doesn't need crazy regex to make it happen.</p>\n\n<pre><code>import re\n\n# We create a \"lexer\" using regex. This will match strings surrounded by single quotes,\n# words without any whitespace in them, and the end of the string. We then use finditer()\n# to grab all non-overlapping tokens.\nlexer = re.compile(r\"'[^']*'|[^ ]+|$\")\n\nstring = \"section_category_name = 'computer and equipment expense' and date &gt;= 2015-01-01 and date &lt;= 2015-03-31\"\n\nresults = []\nbuff = []\n\n# Iterate through all the tokens our lexer identified and parse accordingly\nfor match in lexer.finditer(string):\n    token = match.group(0) # group 0 is the entire matching string\n\n    if token in ('and', ''):\n        # Once we reach 'and' or the end of the string '' (matched by $)\n        # We join all previous tokens with a space and add to our results.\n        results.append(' '.join(buff))\n        buff = [] # Reset for the next set of tokens\n    else:\n        buff.append(token)\n\nprint results\n</code></pre>\n\n<p><a href=\"http://ideone.com/BGXA23\" rel=\"nofollow\">Demo</a></p>\n\n<p><strong>Edit</strong>: Here's a more concise version, effectively replacing the for loop in the above statement with <code>itertools.groupby</code>.</p>\n\n<pre><code>import re\nfrom itertools import groupby\n\nstring = \"section_category_name = 'computer and equipment expense' and date &gt;= 2015-01-01 and date &lt;= 2015-03-31\"\n\nlexer = re.compile(r\"'[^']*'|[^\\s']+\")\ngrouping = groupby(lexer.findall(string), lambda x: x == 'and')\nresults = [ ' '.join(g) for k, g in grouping if not k ]\n\nprint results\n</code></pre>\n\n<p><a href=\"http://ideone.com/PM583n\" rel=\"nofollow\">Demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 1757, "user_id": 5707914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ae16a383317591d00c53c4389a29dc0?s=128&d=identicon&r=PG&f=1", "display_name": "scope", "link": "https://stackoverflow.com/users/5707914/scope"}, "is_accepted": false, "score": 0, "last_activity_date": 1450915516, "creation_date": 1450915516, "answer_id": 34445557, "question_id": 34444319, "link": "https://stackoverflow.com/questions/34444319/how-to-split-a-string-by-a-string-except-when-the-string-is-in-quotes-in-python/34445557#34445557", "title": "How to split a string by a string except when the string is in quotes in python?", "body": "<p>I would just use the fact that <code>re.split</code> has this feature:</p>\n\n<blockquote>\n  <p>If capturing parentheses are used in pattern, then the text of all groups in the pattern are also returned as part of the resulting list.</p>\n</blockquote>\n\n<p>Which combined with usage of two capturing groups will return a list of  <code>None</code> separated strings. \nThis keeps regex simple, albeit needs some after-merging.</p>\n\n<pre><code>&gt;&gt;&gt; tokens = re.split(r\"('[^']*')|and\", string)\n# ['section_category_name = ', \"'computer and equipment expense'\", ' ', None, ' date &gt;= 2015-01-01 ', None, ' date &lt;= 2015-03-31']    \n&gt;&gt;&gt; ''.join([t if t else '\\0' for t in tokens]).split('\\0')\n[\"section_category_name = 'computer and equipment expense' \", ' date &gt;= 2015-01-01 ', ' date &lt;= 2015-03-31']\n</code></pre>\n\n<p>Note, <code>0x00</code> char is used there as a temporary separator, so if you need to  process strings with nulls it won't work very well.  </p>\n"}, {"tags": [], "owner": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "is_accepted": false, "score": 1, "last_activity_date": 1450919129, "last_edit_date": 1450919129, "creation_date": 1450917866, "answer_id": 34445823, "question_id": 34444319, "link": "https://stackoverflow.com/questions/34444319/how-to-split-a-string-by-a-string-except-when-the-string-is-in-quotes-in-python/34445823#34445823", "title": "How to split a string by a string except when the string is in quotes in python?", "body": "<p>You can use <code>re.findall</code> to generate a list of 2-tuples where the first element is either a quoted string or empty, or the second element is anything except white space characters or empty.</p>\n\n<p>You can then use <code>itertools.groupby</code> to partition by the word \"and\" (when not in a quoted string), then rejoin from the populated elements inside a list-comp, eg:</p>\n\n<pre><code>import re\nfrom itertools import groupby\n\ntext = \"section_category_name = 'computer and equipment expense'      and date &gt;= 2015-01-01 and date &lt;= 2015-03-31 and blah = 'ooops'\"\nitems = [\n    ' '.join(el[0] or el[1] for el in g)\n    for k, g in groupby(re.findall(\"('.*?')|(\\S+)\", text), lambda L: L[1] == 'and')\n    if not k\n]\n</code></pre>\n\n<p>Gives you:</p>\n\n<pre><code>[\"section_category_name = 'computer and equipment expense'\",\n 'date &gt;= 2015-01-01',\n 'date &lt;= 2015-03-31',\n \"blah = 'ooops'\"]\n</code></pre>\n\n<p>Note that whitespaces are also normalised outside the quoted string - whether that's desirable or not though...</p>\n\n<p>Also note - this does allow a bit of flexibility in grouping, so you could change <code>lambda L: L[1] == 'and'</code> to be <code>lambda L: L[1] in ('and', 'or')</code> to group on different words if needs be etc...</p>\n"}, {"tags": [], "owner": {"reputation": 1471, "user_id": 4086467, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a09b4041b111e58020670dcaaf6d386a?s=128&d=identicon&r=PG&f=1", "display_name": "texasflood", "link": "https://stackoverflow.com/users/4086467/texasflood"}, "is_accepted": false, "score": 0, "last_activity_date": 1450956662, "last_edit_date": 1450956662, "creation_date": 1450924968, "answer_id": 34446599, "question_id": 34444319, "link": "https://stackoverflow.com/questions/34444319/how-to-split-a-string-by-a-string-except-when-the-string-is-in-quotes-in-python/34446599#34446599", "title": "How to split a string by a string except when the string is in quotes in python?", "body": "<p>I'm not sure what you want to do about whitespace surrounding <code>and</code>, and what you want to do about repeated <code>and</code>s in the string. What would you want if your string was <code>'hello and and bye'</code>, or <code>'hello andand bye'</code>?</p>\n\n<p>I haven't tested all the corner cases, and I strip whitespace around 'and', which may or may not be what you want:</p>\n\n<pre><code>string = \"section_category_name = 'computer and equipment expense' and date &gt;= 2015-01-01 and date &lt;= 2015-03-31\"\nres = []\nspl = 'and'\nfor idx, sub in enumerate(string.split(\"'\")):\n  if idx % 2 == 0:\n    subsub = sub.split(spl)\n    for jdx in range(1, len(subsub) - 1):\n      subsub[jdx] = subsub[jdx].strip()\n    if len(subsub) &gt; 1:\n      subsub[0] = subsub[0].rstrip()\n      subsub[-1] = subsub[-1].lstrip()\n    res += [i for i in subsub if i.strip()]\n  else:\n    quoted_str = \"'\" + sub + \"'\"\n    if res:\n      res[-1] += quoted_str\n    else:\n      res.append(quoted_str)\n</code></pre>\n\n<p>An even simpler solution, if you know that <code>and</code> will be surrounded by a space on either side, and that it will not be repeated, and don't want to remove the extra whitespace:</p>\n\n<pre><code>string = \"section_category_name = 'computer and equipment expense' and date &gt;= 2015-01-01 and date &lt;= 2015-03-31\"\nspl = 'and'\nres = []\nspaced_spl = ' ' + spl + ' '\nfor idx, sub in enumerate(string.split(\"'\")):\n  if idx % 2 == 0:\n    res += [i for i in sub.split(spaced_spl) if i.strip()]\n  else:\n    quoted_str = \"'\" + sub + \"'\"\n    if res:\n      res[-1] += quoted_str\n    else:\n      res.append(quoted_str)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[\"section_category_name = 'computer and equipment expense'\", 'date &gt;= 2015-01-01', 'date &lt;= 2015-03-31']\n</code></pre>\n"}], "owner": {"reputation": 4136, "user_id": 2850808, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8f08107c3227db4da8ed3b1619a0df99?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/2850808/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 526, "favorite_count": 1, "accepted_answer_id": 34444673, "answer_count": 6, "score": 4, "last_activity_date": 1450956662, "creation_date": 1450907647, "last_edit_date": 1495540780, "question_id": 34444319, "link": "https://stackoverflow.com/questions/34444319/how-to-split-a-string-by-a-string-except-when-the-string-is-in-quotes-in-python", "title": "How to split a string by a string except when the string is in quotes in python?", "body": "<p>I'd like to split the following string by the word 'and' except when the word 'and' is within quotes</p>\n\n<pre><code>string = \"section_category_name = 'computer and equipment expense' and date &gt;= 2015-01-01 and date &lt;= 2015-03-31\"\n</code></pre>\n\n<p>Desired Result</p>\n\n<pre><code>[\"section_category_name = 'computer and equipment expense'\",\"date &gt;= 2015-01-01\",\"date &lt;= 2015-03-31\"]\n</code></pre>\n\n<p>I can't seem to find the correct regex pattern that splits the string correctly so that 'computer and equipment expense' is not split. </p>\n\n<p>Here's what I tried: </p>\n\n<pre><code>re.split('and',string)\n</code></pre>\n\n<p>Result</p>\n\n<pre><code>[\" section_category_name = 'computer \",\" equipment expense' \",' date &gt;= 2015-01-01 ',' date &lt;= 2015-03-31']\n</code></pre>\n\n<p>As you can see the result has split 'computer and equipment expense' into different items on the list.</p>\n\n<p>I've also tried the following from <a href=\"https://stackoverflow.com/questions/20256066/python-split-string-by-spaces-except-when-in-quotes-but-keep-the-quotes\">this question</a>: </p>\n\n<pre><code>r = re.compile('(?! )[^[]+?(?= *\\[)'\n               '|'\n               '\\[.+?\\]')\nr.findall(s)\n</code></pre>\n\n<p>Result: </p>\n\n<pre><code>[]\n</code></pre>\n\n<p>I've also tried the following from this <a href=\"https://stackoverflow.com/questions/9644784/python-splitting-on-spaces-except-between-certain-characters\">question</a></p>\n\n<pre><code>result = re.split(r\"and+(?=[^()]*(?:\\(|$))\", string)\n</code></pre>\n\n<p>Result: </p>\n\n<pre><code>[\" section_category_name = 'computer \",\n \" equipment expense' \",\n ' date &gt;= 2015-01-01 ',\n ' date &lt;= 2015-03-31']\n</code></pre>\n\n<p>The challenge is that the prior questions on this topic do not address how to split a string by a word within quotes, since they address how to split a string by a special character or a space.</p>\n\n<p>I was able to get the desired result if I modified the string to the following</p>\n\n<pre><code>string = \" section_category_name = (computer and equipment expense) and date &gt;= 2015-01-01 and date &lt;= 2015-03-31\"\nresult = re.split(r\"and+(?=[^()]*(?:\\(|$))\", string)\n</code></pre>\n\n<p>Desired Result</p>\n\n<pre><code>[' section_category_name = (computer and equipment expense) ',\n ' date &gt;= 2015-01-01 ',\n ' date &lt;= 2015-03-31']\n</code></pre>\n\n<p>However I need the function to not split on 'and' within apostrophes instead of parenthesis </p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 1158, "user_id": 2267992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wsP3m.jpg?s=128&g=1", "display_name": "Ryan Rebo", "link": "https://stackoverflow.com/users/2267992/ryan-rebo"}, "edited": false, "score": 0, "creation_date": 1450908348, "post_id": 34444269, "comment_id": 56630684, "body": "Maybe this other thread will help: <a href=\"http://stackoverflow.com/questions/31058554/how-to-merge-several-csv-columns-into-one-column-using-python-2-7\" title=\"how to merge several csv columns into one column using python 2 7\">stackoverflow.com/questions/31058554/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2023, "user_id": 3079302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d65ce13ff3ebb67092cbc09b912b88d3?s=128&d=identicon&r=PG", "display_name": "iled", "link": "https://stackoverflow.com/users/3079302/iled"}, "is_accepted": true, "score": 2, "last_activity_date": 1450910719, "last_edit_date": 1495540840, "creation_date": 1450910719, "answer_id": 34444867, "question_id": 34444269, "link": "https://stackoverflow.com/questions/34444269/pandas-read-csv-with-missing-values-in-headline/34444867#34444867", "title": "pandas - read_csv with missing values in headline", "body": "<p>You can parse your columns directly as a date, if you use the <code>parse_dates</code> argument.</p>\n\n<p>From the <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html#pandas.read_csv\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p><strong>parse_dates :</strong> boolean, list of ints or names, list of lists, or dict, default False</p>\n  \n  <p>If True -> try parsing the index. If [1, 2, 3] -> try parsing columns 1, 2, 3 each as a separate date column. If [[1, 3]] -> combine\n  columns 1 and 3 and parse as a single date column. {\u2018foo\u2019 : [1, 3]} ->\n  parse columns 1, 3 as date and call result \u2018foo\u2019 A fast-path exists\n  for iso8601-formatted dates.</p>\n</blockquote>\n\n<p>For your file, you can do something like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>pd.read_csv(file_path, names=['y', 'm', 'd', 'a', 'b', 'c'], header=0,\n    parse_dates={'date': [0, 1, 2]}, index_col='date', )\n\n              a   b   c\ndate                   \n2014-12-29  7.0  12  45\n2014-12-30  7.0  13  12\n2014-12-31  6.5   6   5\n</code></pre>\n\n<p>The thing with the missing values in headline is solved by passing the <code>names</code> argument and <code>header=0</code> (to overwrite the existing header). Then it is possible to specify which columns should be parsed as a date.</p>\n\n<p>See another example <a href=\"https://stackoverflow.com/questions/15465087/date-conversion-in-pandas-csv-reader\">here</a>.</p>\n"}], "owner": {"reputation": 2621, "user_id": 736211, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7e174130c3e5d2a6c7c54418ec149fec?s=128&d=identicon&r=PG", "display_name": "nivniv", "link": "https://stackoverflow.com/users/736211/nivniv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "accepted_answer_id": 34444867, "answer_count": 1, "score": 0, "last_activity_date": 1450911133, "creation_date": 1450907376, "question_id": 34444269, "link": "https://stackoverflow.com/questions/34444269/pandas-read-csv-with-missing-values-in-headline", "title": "pandas - read_csv with missing values in headline", "body": "<p>I have this kind of csv file:</p>\n\n<pre><code>date,a,b,c\n2014,12,29,7,12,45\n2014,12,30,7,13,12\n2014,12,31,6.5,6,5\n</code></pre>\n\n<p>So the first row does not explicitly specify all columns, and kind of assumes that you understand that the date is the first 3 columns.</p>\n\n<p>How do I tell read_csv to consider the first three columns as one date column (while keeping the other labels)?</p>\n"}, {"tags": ["python", "twitter-bootstrap", "select", "flask"], "comments": [{"owner": {"reputation": 3448, "user_id": 5530155, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/wtp3s.jpg?s=128&g=1", "display_name": "gariepy", "link": "https://stackoverflow.com/users/5530155/gariepy"}, "edited": false, "score": 0, "creation_date": 1450907496, "post_id": 34444212, "comment_id": 56630303, "body": "It doesn&#39;t look like record_num is defined...in which case, when the server tries to run the code, it will crash, generating an internal server error."}, {"owner": {"reputation": 599, "user_id": 2326132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9396bad40c87c5fffe8ba3e522103d8?s=128&d=identicon&r=PG", "display_name": "Ryan O&#39;Donnell", "link": "https://stackoverflow.com/users/2326132/ryan-odonnell"}, "edited": false, "score": 0, "creation_date": 1450912872, "post_id": 34444212, "comment_id": 56632332, "body": "Do you have debug mode on? Did you get a stack trace?"}], "answers": [{"tags": [], "owner": {"reputation": 390, "user_id": 3455352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/961609d14ef44f56be76b12f5168a091?s=128&d=identicon&r=PG", "display_name": "gkiwi", "link": "https://stackoverflow.com/users/3455352/gkiwi"}, "is_accepted": false, "score": 0, "last_activity_date": 1450933388, "creation_date": 1450933388, "answer_id": 34447492, "question_id": 34444212, "link": "https://stackoverflow.com/questions/34444212/python-flask-get-all-value-from-bootstrap-select-multiple/34447492#34447492", "title": "Python FLASK get all value from bootstrap select (multiple)", "body": "<p><code>reques.form.getlist</code> is function,not a dict:)</p>\n\n<p>Try:</p>\n\n<pre><code>request.form.getlist('usergroups')\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 4333406, "user_type": "registered", "profile_image": "https://graph.facebook.com/749087696/picture?type=large", "display_name": "Narayan Gowraj", "link": "https://stackoverflow.com/users/4333406/narayan-gowraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1840, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1450933388, "creation_date": 1450907118, "last_edit_date": 1450909580, "question_id": 34444212, "link": "https://stackoverflow.com/questions/34444212/python-flask-get-all-value-from-bootstrap-select-multiple", "title": "Python FLASK get all value from bootstrap select (multiple)", "body": "<p>I am using the flask web framework to get the values of select. </p>\n\n<p>HTML,</p>\n\n<pre><code>&lt;div class=\"form-group\"&gt;\n      &lt;div class=\"col-xs-7\"&gt;\n       &lt;label for=\"ex2\"&gt;Add User To Groups:&lt;/label&gt;\n       &lt;select id = \"usergroups\" name = \"usergroups\" class=\"selectpicker\" data-live-search=\"true\" multiple&gt;\n        {% for i in range(record_num): %}\n        &lt;option value=\"{{ name[i] }}\" data-tokens=\"{{ name[i] }}\"&gt;{{ name[i] }}&lt;/option&gt;\n        {% endfor %}\n       &lt;/select&gt;\n       &lt;/div&gt;\n     &lt;/div&gt;\n</code></pre>\n\n<p>Python Code, </p>\n\n<pre><code>groupnames = request.form.getlist['usergroups']\n</code></pre>\n\n<p>Output on the browser\nI get an internal server error. </p>\n\n<p>AM I MISSING SOMETHING HERE ?</p>\n"}, {"tags": ["python", "mysql", "tkinter"], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 1137278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/004e67a394dbdde5c6af8551e83a7a07?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1137278/max"}, "edited": false, "score": 0, "creation_date": 1450908156, "post_id": 34444281, "comment_id": 56630603, "body": "I think I see where you&#39;re going with that.  What would be the input for the &#39;event&#39; in the line      e2 = Button(frame, text=&quot;Log Data &quot;+str(row[0]), command=lambda: saveData(e1))"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1450911225, "post_id": 34444281, "comment_id": 56631781, "body": "<i>&quot;Callbacks always get the event&quot;</i> - not true, if the callback is associated with the <code>command</code> attribute. The event is only passed in when you use <code>bind</code>."}, {"owner": {"reputation": 125, "user_id": 1137278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/004e67a394dbdde5c6af8551e83a7a07?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1137278/max"}, "edited": false, "score": 0, "creation_date": 1450911457, "post_id": 34444281, "comment_id": 56631861, "body": "So why does the command attribute not pass the name of the Entry element, e1?  It passes only the last e1 name in the for row in rows loop."}, {"owner": {"reputation": 125, "user_id": 1137278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/004e67a394dbdde5c6af8551e83a7a07?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1137278/max"}, "edited": false, "score": 0, "creation_date": 1450911901, "post_id": 34444281, "comment_id": 56631996, "body": "This does not appear to be a duplicate, as there are exactly 1 button for each Entry and the button is not passing the relevant Entry reference, or am I way off base?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4171906"}, "edited": false, "score": 0, "creation_date": 1450919086, "post_id": 34444281, "comment_id": 56633992, "body": "The statement <b>print Entry.get(entryid)</b> is not what you do to get the entry in a specific Entry widget.  See the get examples at <a href=\"http://effbot.org/tkinterbook/entry.htm\" rel=\"nofollow noreferrer\">effbot.org/tkinterbook/entry.htm</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4171906"}, "edited": false, "score": 0, "creation_date": 1450919834, "post_id": 34444281, "comment_id": 56634162, "body": "Also partial is less confusing IMHO, <b>from functools import partial</b> and <b>e2 = Button(frame, text=&quot;Log Data &quot;+str(row[0]), command=partial(saveData, e1))</b> will hopefully solve your problem.  Note that you should always declare a function before you call it in a statement.  You do the reverse in the above code."}, {"owner": {"reputation": 125, "user_id": 1137278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/004e67a394dbdde5c6af8551e83a7a07?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1137278/max"}, "edited": false, "score": 0, "creation_date": 1450923927, "post_id": 34444281, "comment_id": 56634966, "body": "Curly Joe, YOU are the MAN!  That was it exactly.  I moved the saveData above the for loop and used your construct for the button and it works perfectly. Also allows me to add additional elements that I will be including later for GPS coordinates."}], "tags": [], "owner": {"reputation": 4289, "user_id": 908293, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a30b8d0b807c736c457e506cd7f7f699?s=128&d=identicon&r=PG", "display_name": "saulspatz", "link": "https://stackoverflow.com/users/908293/saulspatz"}, "is_accepted": false, "score": -1, "last_activity_date": 1450907441, "creation_date": 1450907441, "answer_id": 34444281, "question_id": 34444128, "link": "https://stackoverflow.com/questions/34444128/tkinter-passing-entry-name-to-function/34444281#34444281", "title": "Tkinter passing Entry name to function", "body": "<p>Callbacks always get the event as the first parameter.  Try changing</p>\n\n<pre><code>def saveData(entryid)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>def saveData(event, entryid)\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 1137278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/004e67a394dbdde5c6af8551e83a7a07?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1137278/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 402, "favorite_count": 0, "closed_date": 1450911384, "answer_count": 1, "score": 0, "last_activity_date": 1450924033, "creation_date": 1450906678, "last_edit_date": 1450924033, "question_id": 34444128, "link": "https://stackoverflow.com/questions/34444128/tkinter-passing-entry-name-to-function", "closed_reason": "Duplicate", "title": "Tkinter passing Entry name to function", "body": "<p>I'm a python/Tkinter newbie, so in advance I'll ask you not to throw bananas/rotten tomatoes/feces in my direction.</p>\n\n<p>I'm writing some code that will be used as a data logger which will be build to capture several data values.  Currently the program reads a set of survey lines and data points from a mysql database and populates the existing values into Entry elements with a button next to each element.  The concept is that when a user clicks a button next to the adjacent Entry element, the Entry value will be updated with the new data value.</p>\n\n<p>The specific problem I am having resides in passing the Entry element name to a function to overwrite its contents:</p>\n\n<pre><code>for row in rows:\n    cnt=cnt+1\n    Label(frame, text=\"Station: \"+str(row[2]), bg=backcolor).grid(row=cnt, column=0)\n    e1 = Entry(frame)\n    e1.config(width=5)\n    if row[5]!=\"\":#ensure data value is not null, or insert empty space\n        e1.insert(0, str(row[5]))\n    else:\n        e1.insert(0, \" \")\n    e1.grid(row=cnt,column=1)\n    e2 = Button(frame, text=\"Log Data \"+str(row[0]), command=lambda: saveData(e1))\n    e2.grid(row=cnt, column=2)\n...\ndef saveData(entryid):\n    print Entry.get(entryid)\n</code></pre>\n\n<p>The problem lies with the saveData(e1).  It appears to only pass the last element generated by the For row in rows constructor.  What am I missing here to tie each button to its specific Entry element?</p>\n\n<p>BTW, I am using Python 2.7</p>\n\n<p>Thanks in advance for your assistance.</p>\n\n<p>Here's the solution that Curly Joe pointed me to:</p>\n\n<pre><code>def saveData(stationdata):\n    print Entry.get(stationdata)\ndef getData():\n    #DATA TO GET SQL RESULTS/PREPARE FRAMED CANVAS ELEMENT HERE FOR SCROLLBARS\n    for row in rows:\n        cnt=cnt+1\n        Label(frame, text=\"Station: \"+str(row[2]), bg=backcolor).grid(row=cnt, column=0)\n        e1 = Entry(frame)#Data Entry \n        e1.config(width=5)\n        if row[5]!=\"\":\n                e1.insert(0, str(row[5]))\n        else:\n                e1.insert(0, \"NA\")\n        e1.grid(row=cnt,column=1)\n        e2 = Button(frame, text=\"Log Data \"+str(row[0]), command=partial(saveData, e1))\n        e2.grid(row=cnt, column=1)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1495, "user_id": 3250894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6d720748b2fcd1e5ec32be551279fef?s=128&d=identicon&r=PG&f=1", "display_name": "ziddarth", "link": "https://stackoverflow.com/users/3250894/ziddarth"}, "edited": false, "score": 2, "creation_date": 1450906754, "post_id": 34444092, "comment_id": 56629971, "body": "<code>os.path.expanduser(path)</code>"}, {"owner": {"reputation": 1656, "user_id": 4146943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54e34c794b157fdb8097d92c236aa8fb?s=128&d=identicon&r=PG", "display_name": "Habib Kazemi", "link": "https://stackoverflow.com/users/4146943/habib-kazemi"}, "edited": false, "score": 0, "creation_date": 1450906811, "post_id": 34444092, "comment_id": 56629996, "body": "<a href=\"http://stackoverflow.com/questions/10170407/find-home-directory-in-python\" title=\"find home directory in python\">stackoverflow.com/questions/10170407/&hellip;</a>"}, {"owner": {"reputation": 23806, "user_id": 4542359, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a6ea331ac684b52563d13e6ee44e03be?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Protopopov", "link": "https://stackoverflow.com/users/4542359/anton-protopopov"}, "reply_to_user": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 1, "creation_date": 1450907400, "post_id": 34444092, "comment_id": 56630264, "body": "@l&#39;L&#39;l ok I deleted that comment/flag"}], "answers": [{"tags": [], "owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "is_accepted": true, "score": 7, "last_activity_date": 1450906725, "creation_date": 1450906725, "answer_id": 34444138, "question_id": 34444092, "link": "https://stackoverflow.com/questions/34444092/is-there-a-way-i-can-use-to-point-to-the-home-directory-in-file-paths-in-pytho/34444138#34444138", "title": "Is there a way I can use ~ to point to the home directory in file paths in Python?", "body": "<p>Use <code>os.path.expanduser(\"~\")</code></p>\n\n<pre><code>for line in open(os.path.expanduser(\"~/my_file\")):\n    print line\n</code></pre>\n\n<p>Docs:</p>\n\n<blockquote>\n  <p>On Unix and Windows, return the argument with an initial component of ~ or ~user replaced by that user\u2018s home directory.</p>\n</blockquote>\n\n<p><a href=\"https://docs.python.org/2/library/os.path.html#os.path.expanduser\">https://docs.python.org/2/library/os.path.html#os.path.expanduser</a></p>\n"}], "owner": {"reputation": 59017, "user_id": 274627, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f84eb4d8ec7ec9a694d18ca9e54db3f0?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/274627/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 34444138, "answer_count": 1, "score": 0, "last_activity_date": 1450906725, "creation_date": 1450906542, "question_id": 34444092, "link": "https://stackoverflow.com/questions/34444092/is-there-a-way-i-can-use-to-point-to-the-home-directory-in-file-paths-in-pytho", "title": "Is there a way I can use ~ to point to the home directory in file paths in Python?", "body": "<p>I seek to automate some tasks with Python (version 3.5, but I am also curious about 2.7) instead of shell scripts. And I would be glad if I could write <code>\"~/myfile.txt\"</code> instead of <code>/home/me/myfile.txt</code>. Is this possible?</p>\n"}, {"tags": ["python", "django", "heroku"], "comments": [{"owner": {"reputation": 5586, "user_id": 3345051, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/100002242913967/picture?type=large", "display_name": "Hybrid", "link": "https://stackoverflow.com/users/3345051/hybrid"}, "edited": false, "score": 1, "creation_date": 1450906912, "post_id": 34444067, "comment_id": 56630045, "body": "Did you try just <code>web: gunicorn mysite.config.settings.wsgi</code> or <code>web: gunicorn mysite.config.settings.wsgi:application</code>? Also, what do you mean by &quot;Deploying Locally using Heroku Procfile? Are you attempting to use the same settings locally that you are using in production?"}, {"owner": {"reputation": 1425, "user_id": 357631, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4961fbcd89536082eb7b2def765388df?s=128&d=identicon&r=PG", "display_name": "Patrick Beeson", "link": "https://stackoverflow.com/users/357631/patrick-beeson"}, "reply_to_user": {"reputation": 5586, "user_id": 3345051, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/100002242913967/picture?type=large", "display_name": "Hybrid", "link": "https://stackoverflow.com/users/3345051/hybrid"}, "edited": false, "score": 0, "creation_date": 1452180336, "post_id": 34444067, "comment_id": 57062978, "body": "<code>web: gunicorn mysite.config.settings.wsgi</code> got me running. Basically, I wanted to be able to run Django management commands using the a command like <code>heroku local:run python manage.py runserver --settings=config.settings.local</code> Feel free to add a solution and I&#39;ll accept."}, {"owner": {"reputation": 5586, "user_id": 3345051, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/100002242913967/picture?type=large", "display_name": "Hybrid", "link": "https://stackoverflow.com/users/3345051/hybrid"}, "edited": false, "score": 0, "creation_date": 1452180437, "post_id": 34444067, "comment_id": 57063046, "body": "Glad to hear! I posted it as the answer in case anyone else stumbles in and needs a solution"}], "answers": [{"tags": [], "owner": {"reputation": 5586, "user_id": 3345051, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/100002242913967/picture?type=large", "display_name": "Hybrid", "link": "https://stackoverflow.com/users/3345051/hybrid"}, "is_accepted": true, "score": 1, "last_activity_date": 1452180394, "creation_date": 1452180394, "answer_id": 34658914, "question_id": 34444067, "link": "https://stackoverflow.com/questions/34444067/heroku-procfile-wont-run-django-app/34658914#34658914", "title": "Heroku Procfile won&#39;t run Django app", "body": "<p>Try just:</p>\n\n<pre><code>web: gunicorn mysite.config.settings.wsgi\n</code></pre>\n"}], "owner": {"reputation": 1425, "user_id": 357631, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4961fbcd89536082eb7b2def765388df?s=128&d=identicon&r=PG", "display_name": "Patrick Beeson", "link": "https://stackoverflow.com/users/357631/patrick-beeson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 539, "favorite_count": 1, "accepted_answer_id": 34658914, "answer_count": 1, "score": 1, "last_activity_date": 1452180394, "creation_date": 1450906432, "question_id": 34444067, "link": "https://stackoverflow.com/questions/34444067/heroku-procfile-wont-run-django-app", "title": "Heroku Procfile won&#39;t run Django app", "body": "<p>I'm trying to fire up my Django app locally using my Heroku Procfile. But it errors out with the following message:</p>\n\n<pre><code>forego | starting web.1 on port 5000\nweb.1  | [2015-12-23 13:27:19 -0800] [8313] [INFO] Starting gunicorn 19.3.0\nweb.1  | [2015-12-23 13:27:19 -0800] [8313] [INFO] Listening at: http://0.0.0.0:5000 (8313)\nweb.1  | [2015-12-23 13:27:19 -0800] [8313] [INFO] Using worker: sync\nweb.1  | [2015-12-23 13:27:19 -0800] [8317] [INFO] Booting worker with pid: 8317\nweb.1  | [2015-12-23 13:27:19 -0800] [8317] [ERROR] Exception in worker process:\nweb.1  | til.py\", line 355, in import_app\nweb.1  | ortlandpython/lib/python3.5/site-packages/gunicorn/util.py\", line 355, in import_app\nweb.1  | [2015-12-23 13:27:19 -0800] [8317] [INFO] Worker exiting (pid: 8317)\nweb.1  | [2015-12-23 13:27:19 -0800] [8313] [INFO] Shutting down: Master\nweb.1  | [2015-12-23 13:27:19 -0800] [8313] [INFO] Reason: Worker failed to boot.\n</code></pre>\n\n<p>Here's my Procfile:</p>\n\n<pre><code>web: gunicorn mysite.config.settings.wsgi:application --log-file -\n</code></pre>\n\n<p>My wsgi file is located at mysite/config/settings/wsgi.py</p>\n\n<p>Is there a fix here?</p>\n"}, {"tags": ["python", "urllib"], "comments": [{"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1450906364, "post_id": 34444039, "comment_id": 56629785, "body": "Regular expressions are almost always the wrong tool for HTML.  Use BeautifulSoup or HTML5Lib."}, {"owner": {"reputation": 49, "user_id": 5116042, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NWF7J.jpg?s=128&g=1", "display_name": "Vlassis Fotis", "link": "https://stackoverflow.com/users/5116042/vlassis-fotis"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1450906568, "post_id": 34444039, "comment_id": 56629876, "body": "@DietrichEpp does that mean i have to learn a new library? Is it included in the standard python libraries or do i have to download it?"}, {"owner": {"reputation": 113655, "user_id": 64004, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0ea88709c4b9bda3bc66c62237e12812?s=128&d=identicon&r=PG", "display_name": "gahooa", "link": "https://stackoverflow.com/users/64004/gahooa"}, "edited": false, "score": 1, "creation_date": 1450908070, "post_id": 34444039, "comment_id": 56630555, "body": "Read this and then come back and read the answers below: <a href=\"http://stackoverflow.com/a/1732454/64004\">stackoverflow.com/a/1732454/64004</a> ... &quot;the cancer that is killing StackOverflow it is too late it is too late we cannot be saved the trangession of a chi\u0361ld ensures regex will consume all living tissue &quot;"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 5116042, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NWF7J.jpg?s=128&g=1", "display_name": "Vlassis Fotis", "link": "https://stackoverflow.com/users/5116042/vlassis-fotis"}, "edited": false, "score": 0, "creation_date": 1450907046, "post_id": 34444129, "comment_id": 56630104, "body": "I ended up with a blank list :/"}, {"owner": {"reputation": 2700, "user_id": 347567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f658a58fa2f6a02b804b71e168d44da6?s=128&d=identicon&r=PG", "display_name": "pneumatics", "link": "https://stackoverflow.com/users/347567/pneumatics"}, "reply_to_user": {"reputation": 49, "user_id": 5116042, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NWF7J.jpg?s=128&g=1", "display_name": "Vlassis Fotis", "link": "https://stackoverflow.com/users/5116042/vlassis-fotis"}, "edited": false, "score": 1, "creation_date": 1450907421, "post_id": 34444129, "comment_id": 56630274, "body": "the html is not exactly as given in the question, it appears the snippet in question is included in the page as raw text, and doesn&#39;t make it into the DOM. I&#39;m looking at what else you can do, regex might actually be the easiest."}], "tags": [], "owner": {"reputation": 2700, "user_id": 347567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f658a58fa2f6a02b804b71e168d44da6?s=128&d=identicon&r=PG", "display_name": "pneumatics", "link": "https://stackoverflow.com/users/347567/pneumatics"}, "is_accepted": false, "score": 3, "last_activity_date": 1450908941, "last_edit_date": 1450908941, "creation_date": 1450906680, "answer_id": 34444129, "question_id": 34444039, "link": "https://stackoverflow.com/questions/34444039/getting-data-from-nested-span-tags/34444129#34444129", "title": "getting data from nested span tags", "body": "<p>In fact, you can't get this temperature data from the site in question, it's not being included as static html. Your original regex worked, but it was finding the text <code>temp +'\u00b0\u0421</code> or thereabouts, which is in a javascript function.</p>\n\n<p>You could use Selenium, but it's much easier to get the data from the same place the Javascript function gets it from, the OpenWeatherMap API:</p>\n\n<pre><code>import urllib\nimport json\n\nplace = \"Santa Monica\"\napiurl = \"http://api.openweathermap.org/data/2.5/weather?q={}&amp;appid=2de143494c0b295cca9337e1e96b00e0\".format(urllib.quote(place))\n\njsonfile = urllib.urlopen(apiurl)\njsontext = jsonfile.read()\nresult = json.loads(jsontext)\n\ntemp_K = result['main']['temp']\ntemp = (temp_K - 273.15)*(9/5) + 32\nprint(temp)\n</code></pre>\n\n<p>Note that temperature comes back in Kelvin. This gives you:</p>\n\n<pre><code>49.51\n</code></pre>\n\n<p>It's chilly in Santa Monica today :)</p>\n\n<p>[removed original answer based on BeautifulSoup, which would not work because the DOM element was generated by Javascript, so it doesn't exist in the static HTML]</p>\n"}, {"tags": [], "owner": {"reputation": 1905, "user_id": 794627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f0faa9b905f0eeff93547ec33fc59b?s=128&d=identicon&r=PG", "display_name": "Aldehir", "link": "https://stackoverflow.com/users/794627/aldehir"}, "is_accepted": true, "score": 2, "last_activity_date": 1450908106, "last_edit_date": 1450908106, "creation_date": 1450907930, "answer_id": 34444367, "question_id": 34444039, "link": "https://stackoverflow.com/questions/34444039/getting-data-from-nested-span-tags/34444367#34444367", "title": "getting data from nested span tags", "body": "<p>Why not use their JSON API instead of parsing the HTML? It would be much easier. You'll have all the data available to you, and you can reconstruct the paragraph using that data.</p>\n\n<pre><code>import json\nimport urllib\n\nurl = 'http://api.openweathermap.org/data/2.5/weather?units=metric&amp;q=' + str(b)\nrequest = urllib.urlopen(url)\ntext = request.read()\n\ndata = json.loads(text)\n\nprint u\"{}\\xb0C from {} to {}\\xb0C, wind {}m/s, clouds {}%, {} hpa\".format(\n    data['main']['temp'], data['main']['temp_min'], data['main']['temp_max'],\n    data['wind']['speed'], data['clouds']['all'], data['main']['pressure'])\n</code></pre>\n\n<p>You can read more about their API here: <a href=\"http://openweathermap.org/api\" rel=\"nofollow\">http://openweathermap.org/api</a></p>\n\n<p><strong>EDIT</strong>: Added \u00b0C in the string :)</p>\n"}], "owner": {"reputation": 49, "user_id": 5116042, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NWF7J.jpg?s=128&g=1", "display_name": "Vlassis Fotis", "link": "https://stackoverflow.com/users/5116042/vlassis-fotis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 34444367, "answer_count": 2, "score": 1, "last_activity_date": 1450908941, "creation_date": 1450906280, "question_id": 34444039, "link": "https://stackoverflow.com/questions/34444039/getting-data-from-nested-span-tags", "title": "getting data from nested span tags", "body": "<p>I'm trying to get weather data using this website    <a href=\"http://openweathermap.org/find?q=\" rel=\"nofollow\">http://openweathermap.org/find?q=</a> and the info i need lies in the following code:</p>\n\n<pre><code>&lt;p&gt;\n &lt;span class=\"badge badge-info\"&gt;6.2\u00b0\u0421 &lt;/span&gt;\n \" temperature from 5 to 7.8\u00b0\u0421, wind 1.17m/s. clouds 0%, 1031 hpa\"\n&lt;/p&gt;\n</code></pre>\n\n<p>I am using the following mechanism to do that:</p>\n\n<pre><code>import urllib\nurl = 'http://openweathermap.org/find?q=' + str(b)\nhtmlfile = urllib.urlopen(url)\n\nhtmltext = htmlfile.read()\n\nregex = '&lt;span class=\"badge badge-info\"&gt;(.+?)&lt;/span&gt;'\n\npattern = re.compile(regex)   \n\ntemp = re.findall(pattern,htmltext)\n\nprint temp\n</code></pre>\n\n<p>But the result i get is this:</p>\n\n<pre><code>[\"'+temp +'\\xc2\\xb0\\xd0\\xa1 \"]\n</code></pre>\n\n<p>and it's the same for every keyword i search (the b seen above)</p>\n\n<p>What am i doing wrong? Also how can i get the rest of the info included in the paragraph tag? Thanks in advance</p>\n"}, {"tags": ["python", "c++", "serial-port"], "owner": {"reputation": 11, "user_id": 5712622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c35add66dd247f0a8c74317be1f9c6b?s=128&d=identicon&r=PG&f=1", "display_name": "cracken", "link": "https://stackoverflow.com/users/5712622/cracken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1450906125, "creation_date": 1450906125, "question_id": 34444005, "link": "https://stackoverflow.com/questions/34444005/file-reading-serial-communication-issue", "title": "File reading /Serial communication issue", "body": "<p>i have 2 programs, one reading data, and putting it into a file, the other reads that file and sends the data via serial.\nboth program runs parallel, and both of them is an infinite loop with a 200ms delay.\nthey puts/reads  7 characters in/from the file (6, but \" \" does not count).</p>\n\n<p>the one which write the file works good, but the sender gets really slow after the 165th loop. always at 165, it only sends one character/second, so it takes the program 6 seconds to send the array.</p>\n\n<p>this is in the file:</p>\n\n<pre><code>s5 1038\n</code></pre>\n\n<ol>\n<li>an 's' character, it has a function.</li>\n<li><p>then one number from 1-9.</p>\n\n<p>3-4-5-6-7 space (\" \") which c filereader dont count, then 4 number, 0000-9999.</p></li>\n</ol>\n\n<p>the file always have only one line.</p>\n\n<p>the senders loop:</p>\n\n<pre><code>while(SP-&gt;IsConnected()) //see if the usb connection is on.\n    {\n        fstream file;\n        file.open(\"c:/Python27/beki.txt\");\n        for(int i=0;i&lt;6;i++)\n        {\n            file &gt;&gt; incomingData[i];  //puts the read data from the file into an array, i did this but now i  dont know how this works, but it works.\n            cout &lt;&lt; incomingData[i];\n        }\n        file.close();\n        cout &lt;&lt;szam &lt;&lt; \"\\n\";\n        SP-&gt;WriteData(incomingData,dataLength);\n\n        szam++; //counting, thats why i know its always slows at 166.\n        Sleep(200);\n\n    }\n</code></pre>\n\n<p>it did the same in python. dont know if there's a limit or something. please help.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 4558, "user_id": 4293417, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/15V7E.png?s=128&g=1", "display_name": "Zizouz212", "link": "https://stackoverflow.com/users/4293417/zizouz212"}, "edited": false, "score": 0, "creation_date": 1450907056, "post_id": 34443998, "comment_id": 56630108, "body": "Type <code>python3</code>. You&#39;re accessing the system python."}], "answers": [{"tags": [], "owner": {"reputation": 10017, "user_id": 301107, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2c87e8db57897b08332340b2c4b508ff?s=128&d=identicon&r=PG", "display_name": "masnun", "link": "https://stackoverflow.com/users/301107/masnun"}, "is_accepted": true, "score": 4, "last_activity_date": 1450906300, "creation_date": 1450906300, "answer_id": 34444044, "question_id": 34443998, "link": "https://stackoverflow.com/questions/34443998/how-to-install-python-3-on-os-x/34444044#34444044", "title": "how to install python 3 on OS X", "body": "<p>I use <code>pyenv</code> for this.</p>\n\n<pre><code>brew install pyenv\npyenv install 3.5.0\npyenv global 3.5.0\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5486864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffaf0054f4200b8abfddbe56af20a1aa?s=128&d=identicon&r=PG&f=1", "display_name": "iambot", "link": "https://stackoverflow.com/users/5486864/iambot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 935, "favorite_count": 0, "closed_date": 1450985517, "accepted_answer_id": 34444044, "answer_count": 1, "score": 1, "last_activity_date": 1450906570, "creation_date": 1450906096, "last_edit_date": 1450906570, "question_id": 34443998, "link": "https://stackoverflow.com/questions/34443998/how-to-install-python-3-on-os-x", "closed_reason": "Duplicate", "title": "how to install python 3 on OS X", "body": "<p>After I downloaded python 3 from python.org and installed it, I typed \"python\" on bash and still got \"Python 2.7.10 (default, Aug 22 2015, ...).</p>\n\n<p>How can I make python 3 the default, and is changing the default necessary to develop a Django application using python 3? </p>\n"}, {"tags": ["python", "function"], "comments": [{"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1450906238, "post_id": 34443957, "comment_id": 56629722, "body": "I can&#39;t put together an answer based on this, especially because I&#39;m not much of a pythonist, but it seems to me that currying a lambda that handled all these situations might help, though it&#39;s just a hunch that I thought might give somebody more knowledgable an idea  <a href=\"https://mtomassoli.wordpress.com/2012/03/18/currying-in-python/\" rel=\"nofollow noreferrer\">mtomassoli.wordpress.com/2012/03/18/currying-in-python</a>"}, {"owner": {"reputation": 695, "user_id": 5658017, "user_type": "registered", "accept_rate": 58, "profile_image": "https://lh3.googleusercontent.com/-ukvgwti8aOc/AAAAAAAAAAI/AAAAAAAAACk/WWHsp--Anq8/photo.jpg?sz=128", "display_name": "Yashu Seth", "link": "https://stackoverflow.com/users/5658017/yashu-seth"}, "reply_to_user": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1450906489, "post_id": 34443957, "comment_id": 56629834, "body": "Yes it will allow writing the foo function only once but it is slower than the former method which i cannot afford"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1450906583, "post_id": 34443957, "comment_id": 56629881, "body": "We&#39;d have to know how <code>foo</code> depends on <code>A</code>, <code>B</code>, and <code>C</code>. I would guess that this <code>create_foo</code> function is a misguided optimization, though. If checking <code>A</code>, <code>B</code>, and <code>C</code> inside the call is really a performance killer relative to whatever else goes on inside <code>foo</code>, you may want to consider using something like Cython, which will provide a much better speedup than what you&#39;re doing here."}, {"owner": {"reputation": 695, "user_id": 5658017, "user_type": "registered", "accept_rate": 58, "profile_image": "https://lh3.googleusercontent.com/-ukvgwti8aOc/AAAAAAAAAAI/AAAAAAAAACk/WWHsp--Anq8/photo.jpg?sz=128", "display_name": "Yashu Seth", "link": "https://stackoverflow.com/users/5658017/yashu-seth"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1450906718, "post_id": 34443957, "comment_id": 56629950, "body": "@user2357112 Lets say that if type (A) is a list then it takes it directly but if a dict it parses it to a list. Similarly for B and C as well."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1450907143, "post_id": 34443957, "comment_id": 56630151, "body": "@YashuSeth: I&#39;d say to just provide the input-processing functions to <code>foo</code> through default argument values or closure variables or <code>functools.partial</code> or something. (I&#39;m surprised you&#39;re not inlining the input-processing functions, though, if you consider the <code>A</code>, <code>B</code>, and <code>C</code> checks too much work to put into <code>foo</code>.)"}, {"owner": {"reputation": 78907, "user_id": 107660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0167bade38130f13a5fc468c10388d9d?s=128&d=identicon&r=PG", "display_name": "Duncan", "link": "https://stackoverflow.com/users/107660/duncan"}, "edited": false, "score": 0, "creation_date": 1450907240, "post_id": 34443957, "comment_id": 56630187, "body": "There simply isn&#39;t enough information given in the question for a sensible answer here. Probably the answer is to just write the code in the obvious way with one &#39;foo&#39; function and forget about performance until it works, then <i>if you have to</i> optimise the slow parts by rewriting them in something like Cython."}, {"owner": {"reputation": 2237, "user_id": 1219722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f308a0947ea106f91b5ba413cd9c04c?s=128&d=identicon&r=PG", "display_name": "Dmitry Rubanovich", "link": "https://stackoverflow.com/users/1219722/dmitry-rubanovich"}, "edited": false, "score": 0, "creation_date": 1450907617, "post_id": 34443957, "comment_id": 56630355, "body": "Are A,B,C used to demarshal or are their values actually used in the bodies of <code>foo</code> functions?"}, {"owner": {"reputation": 695, "user_id": 5658017, "user_type": "registered", "accept_rate": 58, "profile_image": "https://lh3.googleusercontent.com/-ukvgwti8aOc/AAAAAAAAAAI/AAAAAAAAACk/WWHsp--Anq8/photo.jpg?sz=128", "display_name": "Yashu Seth", "link": "https://stackoverflow.com/users/5658017/yashu-seth"}, "reply_to_user": {"reputation": 2237, "user_id": 1219722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f308a0947ea106f91b5ba413cd9c04c?s=128&d=identicon&r=PG", "display_name": "Dmitry Rubanovich", "link": "https://stackoverflow.com/users/1219722/dmitry-rubanovich"}, "edited": false, "score": 0, "creation_date": 1450907729, "post_id": 34443957, "comment_id": 56630400, "body": "@DmitryRubanovich No the values are not used in the foo function."}, {"owner": {"reputation": 5896, "user_id": 5644961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-r4jx_ltcdtA/AAAAAAAAAAI/AAAAAAAAAAA/7RjDfLKZHxg/photo.jpg?sz=128", "display_name": "Copperfield", "link": "https://stackoverflow.com/users/5644961/copperfield"}, "edited": false, "score": 0, "creation_date": 1450908219, "post_id": 34443957, "comment_id": 56630627, "body": "are A,B and C mutually dependent?? if not you don&#39;t have to make all combinations, only one for each case of each variable, so only 12"}], "answers": [{"tags": [], "owner": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "is_accepted": false, "score": 1, "last_activity_date": 1450907313, "last_edit_date": 1450907313, "creation_date": 1450906863, "answer_id": 34444163, "question_id": 34443957, "link": "https://stackoverflow.com/questions/34443957/what-is-the-fastest-way-to-create-a-function-if-its-creation-depends-upon-some-o/34444163#34444163", "title": "What is the fastest way to create a function if its creation depends upon some other input parameters?", "body": "<p>It's not 100% clear what you want, but I'll assume <code>A</code>, <code>B</code>, and <code>C</code> are the same as the <code>*args</code> to <code>foo</code>.</p>\n\n<p>Here are some thoughts toward possible solutions:</p>\n\n<p>(1) I wouldn't take it for granted that your 60 <code>if</code> statements necessarily make an impact. If the rest of your function is at all computationally demanding, you might not even notice the proportional increase in running time from 60 <code>if</code> statements.</p>\n\n<p>(2) You could parse/sanity-check the arguments <em>once</em> (slowly/inefficiently) and then pass the sanity-checked versions to a single function <code>foo</code> that runs 10^7 times.</p>\n\n<p>(3) You could write a single function <code>foo</code> that handles every case, but only let it parse/sanity check arguments if a certain optional keyword is provided:</p>\n\n<pre><code>def foo( A, B, C, check=False ):\n\n    if check:\n        pass # TODO: implement sanity-checking on A, B and C here\n\n    pass   # TODO: perform computationally-intensive stuff here\n</code></pre>\n\n<p>Call <code>foo(..., check=True )</code> once.  Then call it without <code>check=True</code> 10^7 times.</p>\n\n<p>(4) If you want to pass around multiple versions of the same callable function, each version configured with different argument values pre-filled, that's what <code>functools.partial</code> is for.  This may be what you want, rather than duplicating the same code 60 times.</p>\n"}, {"comments": [{"owner": {"reputation": 2237, "user_id": 1219722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f308a0947ea106f91b5ba413cd9c04c?s=128&d=identicon&r=PG", "display_name": "Dmitry Rubanovich", "link": "https://stackoverflow.com/users/1219722/dmitry-rubanovich"}, "edited": false, "score": 1, "creation_date": 1450911278, "post_id": 34444255, "comment_id": 56631797, "body": "I asked and he seems to indicate that the code will not be replicated.  The values of A,B,C will only be used to demarshal which function gets returned.  Seems like he is trying to get around not having a switch statement."}], "tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": false, "score": 0, "last_activity_date": 1450907321, "creation_date": 1450907321, "answer_id": 34444255, "question_id": 34443957, "link": "https://stackoverflow.com/questions/34443957/what-is-the-fastest-way-to-create-a-function-if-its-creation-depends-upon-some-o/34444255#34444255", "title": "What is the fastest way to create a function if its creation depends upon some other input parameters?", "body": "<p>Whoa whoa whoa. You're saying you're duplicating code <strong><em>SIXTY TIMES</em></strong> in your function? No, that will not do. Here's what you do instead.</p>\n\n<pre><code>def coerce_args(f):\n    def wrapped(a, b, c):\n        if isinstance(a, list):\n            pass\n        elif isinstance(a, dict):\n            a = list(a.items())  # turn it into a list\n        # etc for each argument\n        return f(a, b, c)\n    return wrapped\n\n@coerce_args\ndef foo(a, b, c): \n    \"\"\"foo will handle a, b, c in a CONCRETE form\"\"\"\n    # do stuff\n</code></pre>\n\n<p>Essentially you're building one decorator that's going to change <code>a</code>, <code>b</code>, and <code>c</code> into a known format for <code>foo</code> to handle the business logic on. You've already built an API where it's acceptable to call this in a number of different ways (which is bad to begin with), so you need to support it. Doing so means <em>internally</em> treating it as the same way every time, and providing a helper to coerce that.</p>\n"}, {"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1450911612, "post_id": 34444905, "comment_id": 56631908, "body": "This seems perfect to me. Maybe even avoid the performance hit of currying during runtime by rolling this into your server init, keep a copy of the whole table in memory, and have <code>foo(a, b, c)</code> just passthrough to the table (<code>def foo(a, b, c): return server.footable[(a,b,c,)]()</code>)"}, {"owner": {"reputation": 2237, "user_id": 1219722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f308a0947ea106f91b5ba413cd9c04c?s=128&d=identicon&r=PG", "display_name": "Dmitry Rubanovich", "link": "https://stackoverflow.com/users/1219722/dmitry-rubanovich"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1450912645, "post_id": 34444905, "comment_id": 56632246, "body": "@Adam Smith, I tried to stick to the original implementation of not compiling all the foo&#39;s at startup.  It does mean that the returned functions will be recompiled before create_foo returns them, but the question seemed to have that intention in mind."}], "tags": [], "owner": {"reputation": 2237, "user_id": 1219722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f308a0947ea106f91b5ba413cd9c04c?s=128&d=identicon&r=PG", "display_name": "Dmitry Rubanovich", "link": "https://stackoverflow.com/users/1219722/dmitry-rubanovich"}, "is_accepted": false, "score": 0, "last_activity_date": 1450928089, "last_edit_date": 1450928089, "creation_date": 1450910965, "answer_id": 34444905, "question_id": 34443957, "link": "https://stackoverflow.com/questions/34443957/what-is-the-fastest-way-to-create-a-function-if-its-creation-depends-upon-some-o/34444905#34444905", "title": "What is the fastest way to create a function if its creation depends upon some other input parameters?", "body": "<p>Because you don't specify what actually happens in each individual foo, there is not way to generalize how foo's are created.  But there is a way to speed up demarshaling.</p>\n\n<pre><code>def create_foo(A,B,C, d={}):\n    if len(d) == 0:\n        def _111():\n            def foo(*args):\n            /*calls some functions that parse the given parameters*/\n            /*does something*/\n            return foo\n        d[('a1','b1','c1')] = _111\n        def _211():\n            def foo(*args):\n            /*calls some functions that parse the given parameters*/\n            /*does something*/\n            return foo\n        d[('a2','b1','c1')] = _211\n        ....\n        def _345():\n            def foo(*args):\n            /*calls some functions that parse the given parameters*/\n            /*does something*/\n            return foo\n        d[('a3','b4','c5')] = _345\n    return d[(A,B,C)]()\n</code></pre>\n\n<p>The _XXX functions will not be evaluated each time you call create_foo.  So the functions will only be created at run-time.  Also the <strong>default</strong> value of <code>d</code> will be set when the <code>create_foo</code> function is defined (only once).  So after the first run, the code inside the if statement will not be entered anymore and the dictionary will have all the functions ready to start initializing and returning your foo's.</p>\n\n<p>Edit: if the behavior in each <code>foo</code> is the same (as the edit of the question seems to suggest), then rather than passing types of <code>foo</code>'s parameters in A,B and C, maybe its better to pass in conversion functions?  Then the whole thing becomes:</p>\n\n<pre><code>def create_foo(L1, L2, L3):\n    def foo(a,b,c):\n        a=L1(a)\n        b=L2(b)\n        c=L3(c)\n        /*does something*/\n    return foo\n</code></pre>\n\n<p>If you want to (for example) convert all 3 parameters to sets from lists, then you can call it as:</p>\n\n<pre><code>f = create_foo(set,set,set)\n</code></pre>\n\n<p>If you want foo to add 1 to 1st parameter, subtract 5 from second and multiply 3rd by 4, you'd say</p>\n\n<pre><code>f = create_foo(lambda x:x+1, lambda x:x-5, lambda x:x*4)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5896, "user_id": 5644961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-r4jx_ltcdtA/AAAAAAAAAAI/AAAAAAAAAAA/7RjDfLKZHxg/photo.jpg?sz=128", "display_name": "Copperfield", "link": "https://stackoverflow.com/users/5644961/copperfield"}, "is_accepted": false, "score": 0, "last_activity_date": 1450911973, "last_edit_date": 1450911973, "creation_date": 1450911473, "answer_id": 34444976, "question_id": 34443957, "link": "https://stackoverflow.com/questions/34443957/what-is-the-fastest-way-to-create-a-function-if-its-creation-depends-upon-some-o/34444976#34444976", "title": "What is the fastest way to create a function if its creation depends upon some other input parameters?", "body": "<p>given your vague explanation I will make some assumptions and work with that.\nI will assume that <code>A</code>, <code>B</code> and <code>C</code> are mutually independent, and that they are parsed to the same type, then I give you this </p>\n\n<pre><code>def _foo(*argv,parser_A=None,parser_B=None,parser_C=None):\n    if parser_A is not None:\n        #parse your A arguments here\n    if parser_B is not None:\n        #parse your B arguments here\n    if parser_C is not None:\n        #parse your C arguments here\n   # do something\n\ndef foo_maker(A,B,C):\n    parser_A = None\n    parser_B = None\n    parser_C = None\n    if A == \"list\": #or isinstance(A,list)\n        pass\n    elif A == \"dict\": #or isinstance(A,dict)\n        #put your parse here, for example:\n        parser_A = lambda x: x.items() \n\n    ...\n\n    #the same with B and C\n    return lambda *argv: _foo(*argv, parser_A=parser_A, parser_B=parser_B, parser_C=parser_C )\n</code></pre>\n\n<p>simple working example</p>\n\n<pre><code>def _foo(*argv,parser_A=None,parser_B=None,parser_C=None):\n    if parser_A is not None:\n        argv = parser_A(argv)\n    if parser_B is not None:\n        argv = parser_B(argv)\n    if parser_C is not None:\n        argv = parser_C(argv)\n    print(argv)\n\ndef foo_maker(A,B,C):\n    pa = None\n    pb = None\n    pc = None\n    if A==1:\n        pa = lambda x: (23,32)+x\n    if B==2:\n        pb = lambda x: list(map(str,x))\n    if C==3:\n        pc = lambda x: set(x)\n    return lambda *x:_foo(*x,parser_A=pa,parser_B=pb,parser_C=pc)\n</code></pre>\n\n<p>test</p>\n\n<pre><code>&gt;&gt;&gt; f1=foo_maker(1,4,3)\n&gt;&gt;&gt; f2=foo_maker(1,2,3)\n&gt;&gt;&gt; f1(1,2,3,5,8)\n{32, 1, 2, 3, 5, 8, 23}\n&gt;&gt;&gt; f2(1,2,3,5,8)\n{'8', '23', '2', '3', '5', '1', '32'}\n&gt;&gt;&gt; f3=foo_maker(0,0,3)\n&gt;&gt;&gt; f3(1,2,3,5,8)\n{8, 1, 2, 3, 5}\n&gt;&gt;&gt; f4=foo_maker(0,0,0)\n&gt;&gt;&gt; f4(1,2,3,5,8)\n(1, 2, 3, 5, 8)\n&gt;&gt;&gt; f5=foo_maker(1,0,0)\n&gt;&gt;&gt; f5(1,2,3,5,8)\n(23, 32, 1, 2, 3, 5, 8)\n&gt;&gt;&gt; \n</code></pre>\n"}], "owner": {"reputation": 695, "user_id": 5658017, "user_type": "registered", "accept_rate": 58, "profile_image": "https://lh3.googleusercontent.com/-ukvgwti8aOc/AAAAAAAAAAI/AAAAAAAAACk/WWHsp--Anq8/photo.jpg?sz=128", "display_name": "Yashu Seth", "link": "https://stackoverflow.com/users/5658017/yashu-seth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1450928089, "creation_date": 1450905894, "last_edit_date": 1450912609, "question_id": 34443957, "link": "https://stackoverflow.com/questions/34443957/what-is-the-fastest-way-to-create-a-function-if-its-creation-depends-upon-some-o", "title": "What is the fastest way to create a function if its creation depends upon some other input parameters?", "body": "<p>I have an API that supports (unfortunately) too many ways for a user to give inputs. I have to create a function depending upon the type of inputs. Once the function has been created (lets call it foo), it is run many times (around 10^7 times).</p>\n\n<p>The user first gives 3 inputs - A, B and C that tell us about the types of input given to our foo function. A can have three possible values, B can have four and C can have 5. Thus giving me 60 possible permutations. \nExample - if A is a list then the first parameter for foo will be a type list and similarly for B and C.</p>\n\n<p>Now I cannot make these checks inside the function <code>foo</code> for obvious reasons. Hence, I create a function create_foo that checks for all the possible combinations and returns a unique function foo. But the drawback with this approach is that I have to write the foo function 60 times for all the permutations.\nAn example of this approach - </p>\n\n<pre><code>def create_foo(A,B,C):\n    if A=='a1' and B=='b1' and C=='c1':\n        def foo(*args):\n            /*calls some functions that parse the given parameters*/\n            /*does something*/\n        return foo\n\n    if A=='a2' and B=='b1' and C=='c1':\n        def foo(*args):\n            /*calls some functions that parse the given parameters*/\n            /*does something*/\n        return foo\n\n    if A=='a3' and B=='b1' and C=='c1':\n        def foo(*args):\n            /*calls some functions that parse the given parameters*/\n            /*does something*/\n        return foo\n\n          .\n          .\n          .\n          .(60 times)\n\n          .\n          .\n          .\n    if A=='a3' and B=='b4' and C=='c5':\n        def foo(*args):\n            /*calls some functions that parse the given parameters*/\n            /*does something*/\n        return foo\n</code></pre>\n\n<p>The foo function parses the parameters differently every time, but then it performs the same task after parsing.</p>\n\n<p>Now I call the function </p>\n\n<pre><code>f = create_foo(A='a2',B='b3',C='c4')\n</code></pre>\n\n<p>Now foo is stored in <code>f</code> and <code>f</code> is called many times. Now <code>f</code> is very time efficient but the problem with this approach is the messy code which involves writing the foo function 60 times.</p>\n\n<p>Is there a cleaner way to do this? I cannot compromise on performance hence, the new method must not take more time for evaluation that this method.</p>\n\n<p>Currying lamda functions to handle all this takes more time than the above method because of the extra function calls. I cannot afford it.</p>\n\n<p><strong>A,B and C are not used by the function they are only used for parsing values and they would not change after the creation of <code>foo</code>.\nFor example - if A is a type list no change is required but if its a dict it needs to call a function that parses dict to list. A,B and C only tell us about the type of parameters in <code>*args</code></strong></p>\n"}, {"tags": ["python", "string", "count"], "comments": [{"owner": {"reputation": 918, "user_id": 2133905, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Y4wcC.jpg?s=128&g=1", "display_name": "SGM1", "link": "https://stackoverflow.com/users/2133905/sgm1"}, "edited": false, "score": 1, "creation_date": 1450905945, "post_id": 34443946, "comment_id": 56629603, "body": "What wrong with using <code>len(word) - 1</code>? Would also think you would need to initialize <code>counter</code> to 1"}, {"owner": {"reputation": 887, "user_id": 4054573, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e502ce9629be7ea58dd411c3a64e892a?s=128&d=identicon&r=PG&f=1", "display_name": "vashts85", "link": "https://stackoverflow.com/users/4054573/vashts85"}, "reply_to_user": {"reputation": 918, "user_id": 2133905, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Y4wcC.jpg?s=128&g=1", "display_name": "SGM1", "link": "https://stackoverflow.com/users/2133905/sgm1"}, "edited": false, "score": 0, "creation_date": 1450906071, "post_id": 34443946, "comment_id": 56629651, "body": "OK that actually helps a lot .... I&#39;ll keep working and see if I can come up with a solution!"}, {"owner": {"reputation": 1135, "user_id": 5063263, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b9dadb72e3e03e28dc7f64b43353f1e5?s=128&d=identicon&r=PG&f=1", "display_name": "ivan", "link": "https://stackoverflow.com/users/5063263/ivan"}, "edited": false, "score": 1, "creation_date": 1450906103, "post_id": 34443946, "comment_id": 56629663, "body": "why dont you add another if clause checking if i is bigger than len(word)"}, {"owner": {"reputation": 2464, "user_id": 494631, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/20649650b6209254e570442e953a8f5f?s=128&d=identicon&r=PG", "display_name": "baldr", "link": "https://stackoverflow.com/users/494631/baldr"}, "edited": false, "score": 1, "creation_date": 1450906142, "post_id": 34443946, "comment_id": 56629678, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/34401733/count-number-of-specific-elements-in-between-other-elements-in-list\">Count number of specific elements in between other elements in list</a>"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1450908259, "post_id": 34443946, "comment_id": 56630652, "body": "If your string was, instead, <code>&#39;100011&#39;</code> what would you want the output to be? My answer assumes <code>[(&quot;1&quot;, 1), (&quot;0&quot;, 3), (&quot;1&quot;, 2)]</code> but maybe you want something more nuanced than that?"}], "answers": [{"comments": [{"owner": {"reputation": 2464, "user_id": 494631, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/20649650b6209254e570442e953a8f5f?s=128&d=identicon&r=PG", "display_name": "baldr", "link": "https://stackoverflow.com/users/494631/baldr"}, "edited": false, "score": 0, "creation_date": 1450906404, "post_id": 34444034, "comment_id": 56629799, "body": "He don&#39;t need just a count. He asks for the consecutive chars. Like: <code>aabbbcdefabc</code>: <code>a:2, b:3, c:1, d:1, ...</code>"}, {"owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "edited": false, "score": 0, "creation_date": 1450906564, "post_id": 34444034, "comment_id": 56629869, "body": "Replace <code>for c in sentence</code> with <code>for c in zip(sentence, sentence[1:])</code>"}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "reply_to_user": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "edited": false, "score": 0, "creation_date": 1450907698, "post_id": 34444034, "comment_id": 56630385, "body": "@inspectorG4dget: Did something a bit different as that change would not have worked with the previous code."}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "reply_to_user": {"reputation": 2464, "user_id": 494631, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/20649650b6209254e570442e953a8f5f?s=128&d=identicon&r=PG", "display_name": "baldr", "link": "https://stackoverflow.com/users/494631/baldr"}, "edited": false, "score": 0, "creation_date": 1450908672, "post_id": 34444034, "comment_id": 56630816, "body": "@baldr: It produces <code>{&#39;a&#39;: 6, &#39;d&#39;: 4, &#39;f&#39;: 2, &#39;b&#39;: 2, &#39;c&#39;: 3}</code>. It looks ok to me. If it won&#39;t work, can you be more specific on what, exactly, you think the issue is?"}, {"owner": {"reputation": 2464, "user_id": 494631, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/20649650b6209254e570442e953a8f5f?s=128&d=identicon&r=PG", "display_name": "baldr", "link": "https://stackoverflow.com/users/494631/baldr"}, "edited": false, "score": 0, "creation_date": 1450908760, "post_id": 34444034, "comment_id": 56630842, "body": "@ray, expected output should be <code>a:1, b:2, c:3, d:4, a:4, f:2, a:3</code>"}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "reply_to_user": {"reputation": 2464, "user_id": 494631, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/20649650b6209254e570442e953a8f5f?s=128&d=identicon&r=PG", "display_name": "baldr", "link": "https://stackoverflow.com/users/494631/baldr"}, "edited": false, "score": 0, "creation_date": 1450909165, "post_id": 34444034, "comment_id": 56631006, "body": "@baldr: That&#39;s not what I understood when the OP said he/she wanted to &quot;see the number of times <i>each unique digit repeats</i>&quot; (my emphasis). To me, that implies getting totals and says nothing about the sub-grouping that you and Adam are producing."}, {"owner": {"reputation": 887, "user_id": 4054573, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e502ce9629be7ea58dd411c3a64e892a?s=128&d=identicon&r=PG&f=1", "display_name": "vashts85", "link": "https://stackoverflow.com/users/4054573/vashts85"}, "reply_to_user": {"reputation": 2464, "user_id": 494631, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/20649650b6209254e570442e953a8f5f?s=128&d=identicon&r=PG", "display_name": "baldr", "link": "https://stackoverflow.com/users/494631/baldr"}, "edited": false, "score": 0, "creation_date": 1450923807, "post_id": 34444034, "comment_id": 56634939, "body": "@baldr&#39;s comment describes what I was going for."}], "tags": [], "owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "is_accepted": false, "score": 2, "last_activity_date": 1450910251, "last_edit_date": 1450910251, "creation_date": 1450906257, "answer_id": 34444034, "question_id": 34443946, "link": "https://stackoverflow.com/questions/34443946/count-consecutive-characters/34444034#34444034", "title": "Count consecutive characters", "body": "<h3>Totals (without sub-groupings)</h3>\n\n<pre><code>#!/usr/bin/python3 -B\n\ncharseq = 'abbcccdddd'\ndistros = { c:1 for c in charseq  }\n\nfor c in range(len(charseq)-1):\n    if charseq[c] == charseq[c+1]:\n        distros[charseq[c]] += 1\n\nprint(distros)\n</code></pre>\n\n<p>I'll provide a brief explanation for the interesting lines.</p>\n\n<pre><code>distros = { c:1 for c in charseq  }\n</code></pre>\n\n<p>The line above is a dictionary comprehension, and it basically iterates over the characters in <code>charseq</code> and creates a key/value pair for a dictionary where the key is the character and the value is the number of times it has been encountered so far.</p>\n\n<p>Then comes the loop:</p>\n\n<pre><code>for c in range(len(charseq)-1):\n</code></pre>\n\n<p>We go from <code>0</code> to <code>length - 1</code> to avoid going out of bounds with the <code>c+1</code> indexing in the loop's body.</p>\n\n<pre><code>if charseq[c] == charseq[c+1]:\n    distros[charseq[c]] += 1\n</code></pre>\n\n<p>At this point, every match we encounter we know is consecutive, so we simply add 1 to the character key. For example, if we take a snapshot of one iteration, the code could look like this (using direct values instead of variables, for illustrative purposes):</p>\n\n<pre><code># replacing vars for their values\nif charseq[1] == charseq[1+1]:\n    distros[charseq[1]] += 1\n\n# this is a snapshot of a single comparison here and what happens later\nif 'b' == 'b':\n    distros['b'] += 1\n</code></pre>\n\n<p>You can see the program output below with the correct counts:</p>\n\n<pre><code>\u279c  /tmp  ./counter.py\n{'b': 2, 'a': 1, 'c': 3, 'd': 4}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 887, "user_id": 4054573, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e502ce9629be7ea58dd411c3a64e892a?s=128&d=identicon&r=PG&f=1", "display_name": "vashts85", "link": "https://stackoverflow.com/users/4054573/vashts85"}, "edited": false, "score": 0, "creation_date": 1450906514, "post_id": 34444035, "comment_id": 56629845, "body": "What I am actually trying to do is something like this:"}], "tags": [], "owner": {"reputation": 27354, "user_id": 948550, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YWVjs.jpg?s=128&g=1", "display_name": "Reut Sharabani", "link": "https://stackoverflow.com/users/948550/reut-sharabani"}, "is_accepted": false, "score": 1, "last_activity_date": 1450943892, "last_edit_date": 1450943892, "creation_date": 1450906264, "answer_id": 34444035, "question_id": 34443946, "link": "https://stackoverflow.com/questions/34443946/count-consecutive-characters/34444035#34444035", "title": "Count consecutive characters", "body": "<p>You only need to change <code>len(word)</code> to <code>len(word) - 1</code>. That said, you could also use the fact that <code>False</code>'s value is 0 and <code>True</code>'s value is 1 with <code>sum</code>:</p>\n\n<pre><code>sum(word[i] == word[i+1] for i in range(len(word)-1))\n</code></pre>\n\n<p>This produces the sum of <code>(False, True, True, False)</code> where <code>False</code> is 0 and <code>True</code> is 1 - which is what you're after.</p>\n\n<p>If you want this to be safe you need to guard empty words (index -1 access):</p>\n\n<pre><code>sum(word[i] == word[i+1] for i in range(max(0, len(word)-1)))\n</code></pre>\n\n<p>And this can be improved with <code>zip</code>:</p>\n\n<pre><code>sum(c1 == c2 for c1, c2 in zip(word[:-1], word[1:]))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16399, "user_id": 4016285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SvSVV.png?s=128&g=1", "display_name": "B. M.", "link": "https://stackoverflow.com/users/4016285/b-m"}, "is_accepted": true, "score": 18, "last_activity_date": 1559557859, "last_edit_date": 1559557859, "creation_date": 1450907111, "answer_id": 34444208, "question_id": 34443946, "link": "https://stackoverflow.com/questions/34443946/count-consecutive-characters/34444208#34444208", "title": "Count consecutive characters", "body": "<p>A solution \"that way\", with only basic statements:    </p>\n\n<pre><code>word=\"100011010\" #word = \"1\"\ncount=1\nlength=\"\"\nif len(word)&gt;1:\n    for i in range(1,len(word)):\n       if word[i-1]==word[i]:\n          count+=1\n       else :\n           length += word[i-1]+\" repeats \"+str(count)+\", \"\n           count=1\n    length += (\"and \"+word[i]+\" repeats \"+str(count))\nelse:\n    i=0\n    length += (\"and \"+word[i]+\" repeats \"+str(count))\nprint (length)\n</code></pre>\n\n<p>Output :</p>\n\n<pre><code>'1 repeats 1, 0 repeats 3, 1 repeats 2, 0 repeats 1, 1 repeats 1, and 0 repeats 1'\n#'1 repeats 1'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 2464, "user_id": 494631, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/20649650b6209254e570442e953a8f5f?s=128&d=identicon&r=PG", "display_name": "baldr", "link": "https://stackoverflow.com/users/494631/baldr"}, "edited": false, "score": 0, "creation_date": 1450908555, "post_id": 34444401, "comment_id": 56630770, "body": "@baldr thanks for the <code>list</code> cast edit. I forgot it gives you some funky view instead with no <code>__len__</code> defined. I prefer to sum the generator in those cases rather than building a list to throw away but YMMV"}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1450908614, "post_id": 34444401, "comment_id": 56630788, "body": "Isn&#39;t this just counting? What if you separate some of the numbers, like <code>11122111</code>?"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1450908667, "post_id": 34444401, "comment_id": 56630812, "body": "@ray Then you get <code>[(&quot;1&quot;, 3), (&quot;2&quot;, 2), (&quot;1&quot;, 3)]</code>. The OP wants <i>consecutive</i> characters."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1450908728, "post_id": 34444401, "comment_id": 56630835, "body": "If you think they want a count of <i>all</i> characters, then you just do <code>collections.Counter(s)</code> and call it a day."}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1450908888, "post_id": 34444401, "comment_id": 56630894, "body": "@AdamSmith: I understand what the OP wants. The code you provided groups each consecutive group, and does not provide the total for all the sub-groups you&#39;ve broken this into, i.e. I was expecting <code>(&quot;1&quot;: 6)</code> instead of 2 tuples with <code>(&quot;1&quot;: 3)</code>. So this seems to be slightly different from what was asked, AFAIK"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1450908941, "post_id": 34444401, "comment_id": 56630915, "body": "@ray I don&#39;t believe that&#39;s what the OP wants, but have included that canonical solution in case for some reason he means the opposite of what his question says."}, {"owner": {"reputation": 2464, "user_id": 494631, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/20649650b6209254e570442e953a8f5f?s=128&d=identicon&r=PG", "display_name": "baldr", "link": "https://stackoverflow.com/users/494631/baldr"}, "edited": false, "score": 0, "creation_date": 1450909014, "post_id": 34444401, "comment_id": 56630947, "body": "@adam-smith, I also think that the first part is what exactly was needed. This answer is the best as for me. It uses true pythonic-way."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1450909048, "post_id": 34444401, "comment_id": 56630962, "body": "@ray you&#39;ll notice that his sample code only loops while the current letter is the same as the next letter, not while the current letter still exists in the string."}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1450909212, "post_id": 34444401, "comment_id": 56631021, "body": "@AdamSmith: As I told baldr, that&#39;s not what I understood when the OP said he/she wanted to &quot;see the number of times <i>each unique digit repeats</i>&quot; (my emphasis). To me, that implies getting totals and says nothing about the sub-grouping that you and baldr want to produce. I think the question could&#39;ve been clearer by posting a sample output."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1450909773, "post_id": 34444401, "comment_id": 56631247, "body": "@ray well he did post a sample output, but it&#39;s not clear which meaning he&#39;s going for since his sample input doesn&#39;t have any repeating but non-consecutive characters."}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 1, "creation_date": 1450909799, "post_id": 34444401, "comment_id": 56631259, "body": "@AdamSmith: I gave you my +1. I think your answer is good and the use of built-in functionality is also better. It was at least my understanding (before OP&#39;s edit) that the OP was interested in an algorithm rather than built-in way of doing it."}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1450909851, "post_id": 34444401, "comment_id": 56631272, "body": "@AdamSmith: Yes, but you know I meant the ambiguity here is with the subgroupings, which the OP did not include in the sample, as you mentioned."}, {"owner": {"reputation": 378, "user_id": 1472770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8e4587a9f073c0c17d2f5c7a1217d5?s=128&d=identicon&r=PG", "display_name": "alancalvitti", "link": "https://stackoverflow.com/users/1472770/alancalvitti"}, "edited": false, "score": 0, "creation_date": 1548352963, "post_id": 34444401, "comment_id": 95520881, "body": "@AdamSmith, why not <code>len(list(group))</code> vs  <code>sum(1 for _ in group)</code>?  Also, what&#39;s the underscore, a wildcard?"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 378, "user_id": 1472770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8e4587a9f073c0c17d2f5c7a1217d5?s=128&d=identicon&r=PG", "display_name": "alancalvitti", "link": "https://stackoverflow.com/users/1472770/alancalvitti"}, "edited": false, "score": 0, "creation_date": 1548359334, "post_id": 34444401, "comment_id": 95523704, "body": "@alancalvitti oof this is a <i>very</i> old answer :). <code>len(list(group))</code> has to allocate a list, only to access one attribute of it (<code>__len__</code>), then throw it away. <code>sum(1 for _ in group)</code> doesn&#39;t need to do that. This is mostly performance for performance&#39;s sake, but if <code>group</code>&#39;s length was in the many hundreds of thousands, it&#39;s significant. <code>_</code> is just a placeholder here. This is a Python convention that means &quot;The syntax requires that I bind this value to a name, but I don&#39;t actually USE this value.&quot; Also used a lot as <code>for _ in range(10): action()</code> (which does calls <code>action</code> 10 times)."}, {"owner": {"reputation": 378, "user_id": 1472770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8e4587a9f073c0c17d2f5c7a1217d5?s=128&d=identicon&r=PG", "display_name": "alancalvitti", "link": "https://stackoverflow.com/users/1472770/alancalvitti"}, "edited": false, "score": 0, "creation_date": 1548429007, "post_id": 34444401, "comment_id": 95549759, "body": "@AdamSmith, thanks for explaining. Why doesn&#39;t <code>group</code> (and similar container objects) support <code>len</code> method? Ps in WL, it&#39;s <code>Range[10] &#47;&#47; Map[action]</code>, haven&#39;t used for loops since C/C++, it&#39;s like going back to assembly."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 378, "user_id": 1472770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8e4587a9f073c0c17d2f5c7a1217d5?s=128&d=identicon&r=PG", "display_name": "alancalvitti", "link": "https://stackoverflow.com/users/1472770/alancalvitti"}, "edited": false, "score": 0, "creation_date": 1548435019, "post_id": 34444401, "comment_id": 95553297, "body": "@alancalvitti the group object is not a container, it&#39;s a generator. Iterating over it to find out when it stops producing values would <i>consume</i> those values, and having <code>len(my_generator)</code> cause <code>my_generator</code> to be empty afterwards is non-obvious. Sounds like WL is more of a functional language -- of course it wouldn&#39;t have loops :)"}, {"owner": {"reputation": 378, "user_id": 1472770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8e4587a9f073c0c17d2f5c7a1217d5?s=128&d=identicon&r=PG", "display_name": "alancalvitti", "link": "https://stackoverflow.com/users/1472770/alancalvitti"}, "edited": false, "score": 0, "creation_date": 1548442361, "post_id": 34444401, "comment_id": 95556768, "body": "@AdamSmith, could <code>group</code> support a <code>len</code> method or attribute similar to <code>DataFrame</code> <code>shape</code>? I understand generators are lazy/JIT and can be used with streams where length is undefined, but clearly in this situation length is determined."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 378, "user_id": 1472770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8e4587a9f073c0c17d2f5c7a1217d5?s=128&d=identicon&r=PG", "display_name": "alancalvitti", "link": "https://stackoverflow.com/users/1472770/alancalvitti"}, "edited": false, "score": 0, "creation_date": 1548449061, "post_id": 34444401, "comment_id": 95559430, "body": "@alancalvitti I&#39;m not sure what <code>groupby</code> is doing under the hood, but I don&#39;t <i>think</i> it&#39;s doing any work ahead of time, so calculating the length and storing it in an attribute so you can look it up later is doing a lot of work and potentially costing quite a bit of memory to keep from losing those objects when they&#39;ve run out of the generator. I&#39;m not sure that it&#39;s worth avoiding the common <code>sum(1 for _ in some_generator)</code> idiom."}, {"owner": {"reputation": 1443, "user_id": 1738879, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c8b6bb8a36582396e2afdac592b8a7c4?s=128&d=identicon&r=PG&f=1", "display_name": "PedroA", "link": "https://stackoverflow.com/users/1738879/pedroa"}, "edited": false, "score": 1, "creation_date": 1569025015, "post_id": 34444401, "comment_id": 102474311, "body": "This is a bit old post, but I was trying this <code>zip_longest</code> solution and noticed that a reset of counts, <code>count = 1</code>, is also necessary as the last <code>else</code> statement (just as in the case of <code>zip</code>), otherwise the result will not be correct."}], "tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": false, "score": 63, "last_activity_date": 1569040853, "last_edit_date": 1569040853, "creation_date": 1450908158, "answer_id": 34444401, "question_id": 34443946, "link": "https://stackoverflow.com/questions/34443946/count-consecutive-characters/34444401#34444401", "title": "Count consecutive characters", "body": "<h2>Consecutive counts:</h2>\n\n<p>Ooh nobody's posted <a href=\"https://docs.python.org/3/library/itertools.html#itertools.groupby\" rel=\"noreferrer\"><code>itertools.groupby</code></a> yet!</p>\n\n<pre><code>s = \"111000222334455555\"\n\nfrom itertools import groupby\n\ngroups = groupby(s)\nresult = [(label, sum(1 for _ in group)) for label, group in groups]\n</code></pre>\n\n<p>After which, <code>result</code> looks like:</p>\n\n<pre><code>[(\"1\": 3), (\"0\", 3), (\"2\", 3), (\"3\", 2), (\"4\", 2), (\"5\", 5)]\n</code></pre>\n\n<p>And you could format with something like:</p>\n\n<pre><code>\", \".join(\"{}x{}\".format(label, count) for label, count in result)\n# \"1x3, 0x3, 2x3, 3x2, 4x2, 5x5\"\n</code></pre>\n\n<h2>Total counts:</h2>\n\n<p>Someone in the comments is concerned that you want a <em>total</em> count of numbers so <code>\"11100111\" -&gt; {\"1\":6, \"0\":2}</code>. In that case you want to use a <a href=\"https://docs.python.org/3/library/collections.html#collections.Counter\" rel=\"noreferrer\"><code>collections.Counter</code></a>:</p>\n\n<pre><code>from collections import Counter\n\ns = \"11100111\"\nresult = Counter(s)\n# {\"1\":6, \"0\":2}\n</code></pre>\n\n<h2>Your method:</h2>\n\n<p>As many have pointed out, your method fails because you're looping through <code>range(len(s))</code> but addressing <code>s[i+1]</code>. This leads to an off-by-one error when <code>i</code> is pointing at the last index of <code>s</code>, so <code>i+1</code> raises an <code>IndexError</code>. One way to fix this would be to loop through <code>range(len(s)-1)</code>, but it's more pythonic to generate something to iterate over.</p>\n\n<p>For string that's not absolutely huge, <code>zip(s, s[1:])</code> isn't a a performance issue, so you could do:</p>\n\n<pre><code>counts = []\ncount = 1\nfor a, b in zip(s, s[1:]):\n    if a==b:\n        count += 1\n    else:\n        counts.append((a, count))\n        count = 1\n</code></pre>\n\n<p>The only problem being that you'll have to special-case the last character if it's unique. That can be fixed with <a href=\"https://docs.python.org/3/library/itertools.html#itertools.zip_longest\" rel=\"noreferrer\"><code>itertools.zip_longest</code></a></p>\n\n<pre><code>import itertools\n\ncounts = []\ncount = 1\nfor a, b in itertools.zip_longest(s, s[1:], fillvalue=None):\n    if a==b:\n        count += 1\n    else:\n        counts.append((a, count))\n        count = 1\n</code></pre>\n\n<p>If you do have a truly <em>huge</em> string and can't stand to hold two of them in memory at a time, you can use the <a href=\"https://docs.python.org/3/library/itertools.html#itertools-recipes\" rel=\"noreferrer\"><code>itertools</code> recipe <code>pairwise</code></a>.</p>\n\n<pre><code>def pairwise(iterable):\n    \"\"\"iterates pairwise without holding an extra copy of iterable in memory\"\"\"\n    a, b = itertools.tee(iterable)\n    next(b, None)\n    return itertools.zip_longest(a, b, fillvalue=None)\n\ncounts = []\ncount = 1\nfor a, b in pairwise(s):\n    ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1465, "user_id": 4681732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xuool.jpg?s=128&g=1", "display_name": "nbryans", "link": "https://stackoverflow.com/users/4681732/nbryans"}, "edited": false, "score": 1, "creation_date": 1485368433, "post_id": 41858653, "comment_id": 70901456, "body": "This doesn&#39;t really answer the question. OP wants to count the number of consecutive characters for each character in the string."}], "tags": [], "owner": {"reputation": 11, "user_id": 7028959, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VrXFJsJHDVw/AAAAAAAAAAI/AAAAAAAADUM/uZHw__b5yAU/photo.jpg?sz=128", "display_name": "Bakijan Rahman", "link": "https://stackoverflow.com/users/7028959/bakijan-rahman"}, "is_accepted": false, "score": 0, "last_activity_date": 1485367857, "creation_date": 1485367857, "answer_id": 41858653, "question_id": 34443946, "link": "https://stackoverflow.com/questions/34443946/count-consecutive-characters/41858653#41858653", "title": "Count consecutive characters", "body": "<p>This is my simple code for finding maximum number of consecutive 1's in binaray string in python 3:</p>\n\n<pre><code>count= 0\nmaxcount = 0\nfor i in str(bin(13)):\n    if i == '1':\n        count +=1\n    elif count &gt; maxcount:\n        maxcount = count;\n        count = 0\n    else:\n        count = 0\nif count &gt; maxcount: maxcount = count        \nmaxcount\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1872, "user_id": 1332656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Zv8H8.jpg?s=128&g=1", "display_name": "Alpha", "link": "https://stackoverflow.com/users/1332656/alpha"}, "is_accepted": false, "score": 1, "last_activity_date": 1554520851, "last_edit_date": 1554520851, "creation_date": 1554505929, "answer_id": 55544390, "question_id": 34443946, "link": "https://stackoverflow.com/questions/34443946/count-consecutive-characters/55544390#55544390", "title": "Count consecutive characters", "body": "<p>If we want to count <strong>consecutive</strong> characters <strong>without looping</strong>, we can make use of <code>pandas</code>:</p>\n\n<pre><code>In [1]: import pandas as pd\n\nIn [2]: sample = 'abbcccddddaaaaffaaa'\nIn [3]: d = pd.Series(list(sample))\n\nIn [4]: [(cat[1], grp.shape[0]) for cat, grp in d.groupby([d.ne(d.shift()).cumsum(), d])]\nOut[4]: [('a', 1), ('b', 2), ('c', 3), ('d', 4), ('a', 4), ('f', 2), ('a', 3)]\n</code></pre>\n\n<p>The key is to find <strong>the first elements</strong> that are different from their previous values and then make proper groupings in <code>pandas</code>:</p>\n\n<pre><code>In [5]: sample = 'abba'\nIn [6]: d = pd.Series(list(sample))\n\nIn [7]: d.ne(d.shift())\nOut[7]:\n0     True\n1     True\n2    False\n3     True\ndtype: bool\n\nIn [8]: d.ne(d.shift()).cumsum()\nOut[8]:\n0    1\n1    2\n2    2\n3    3\ndtype: int32\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1229, "user_id": 9044469, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ab445818b77285bccf153015bba67538?s=128&d=identicon&r=PG&f=1", "display_name": "ShpielMeister", "link": "https://stackoverflow.com/users/9044469/shpielmeister"}, "is_accepted": false, "score": 0, "last_activity_date": 1580275470, "creation_date": 1580275470, "answer_id": 59960914, "question_id": 34443946, "link": "https://stackoverflow.com/questions/34443946/count-consecutive-characters/59960914#59960914", "title": "Count consecutive characters", "body": "<p>There is no need to count or groupby.  Just note the indices where a change occurs and subtract consecutive indicies.</p>\n\n<pre><code>w = \"111000222334455555\"\niw = [0] + [i+1 for i in range(len(w)-1) if w[i] != w[i+1]] + [len(w)]\ndw = [w[i] for i in range(len(w)-1) if w[i] != w[i+1]] + [w[-1]]\ncw = [ iw[j] - iw[j-1] for j in range(1, len(iw) ) ]\n\nprint(dw)  # digits\n['1', '0', '2', '3', '4']\nprint(cw)  # counts\n[3, 3, 3, 2, 2, 5]\n\nw = 'XXYXYYYXYXXzzzzzYYY'\niw = [0] + [i+1 for i in range(len(w)-1) if w[i] != w[i+1]] + [len(w)]\ndw = [w[i] for i in range(len(w)-1) if w[i] != w[i+1]] + [w[-1]]\ncw = [ iw[j] - iw[j-1] for j in range(1, len(iw) ) ]\nprint(dw)  # characters\nprint(cw)  # digits\n\n['X', 'Y', 'X', 'Y', 'X', 'Y', 'X', 'z', 'Y']\n[2, 1, 1, 3, 1, 1, 2, 5, 3]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 87, "user_id": 15224941, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GiDPWMuoxDz9dgVwzF8whI8EWSNAZGDTZo5N9gd=k-s128", "display_name": "akime", "link": "https://stackoverflow.com/users/15224941/akime"}, "is_accepted": false, "score": 0, "last_activity_date": 1613538834, "creation_date": 1613538834, "answer_id": 66236091, "question_id": 34443946, "link": "https://stackoverflow.com/questions/34443946/count-consecutive-characters/66236091#66236091", "title": "Count consecutive characters", "body": "<p>A one liner that returns the amount of consecutive characters with no imports:</p>\n<pre><code>def f(x):s=x+&quot; &quot;;t=[x[1] for x in zip(s[0:],s[1:],s[2:]) if (x[1]==x[0])or(x[1]==x[2])];return {h: t.count(h) for h in set(t)}\n</code></pre>\n<p>That returns the amount of times any repeated character in a list is in a consecutive run of characters.</p>\n<p>alternatively, this accomplishes the same thing, albeit much slower:</p>\n<pre><code>def A(m):t=[thing for x,thing in enumerate(m) if thing in [(m[x+1] if x+1&lt;len(m) else None),(m[x-1] if x-1&gt;0 else None)]];return {h: t.count(h) for h in set(t)}\n</code></pre>\n<p>In terms of performance, I ran them with</p>\n<pre><code>site = 'https://web.njit.edu/~cm395/theBeeMovieScript/'\ns = urllib.request.urlopen(site).read(100_000)\ns = str(copy.deepcopy(s))\nprint(timeit.timeit('A(s)',globals=locals(),number=100))\nprint(timeit.timeit('f(s)',globals=locals(),number=100))\n</code></pre>\n<p>which resulted in:</p>\n<pre><code>12.528256356999918\n5.351301653001428\n</code></pre>\n<p>This method can definitely be improved, but without using any external libraries, this was the best I could come up with.</p>\n"}], "owner": {"reputation": 887, "user_id": 4054573, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e502ce9629be7ea58dd411c3a64e892a?s=128&d=identicon&r=PG&f=1", "display_name": "vashts85", "link": "https://stackoverflow.com/users/4054573/vashts85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63269, "favorite_count": 16, "accepted_answer_id": 34444208, "answer_count": 8, "score": 26, "last_activity_date": 1613538834, "creation_date": 1450905861, "last_edit_date": 1580134908, "question_id": 34443946, "link": "https://stackoverflow.com/questions/34443946/count-consecutive-characters", "title": "Count consecutive characters", "body": "<p>How would I count consecutive characters in Python to see the number of times each unique digit repeats before the next unique digit? </p>\n\n<p>At first, I thought I could do something like:</p>\n\n<pre><code>word = '1000'\n\ncounter=0\nprint range(len(word))\n\n\nfor i in range(len(word)-1):\n    while word[i]==word[i+1]:\n        counter +=1\n        print counter*\"0\"\n    else:\n        counter=1\n        print counter*\"1\"\n</code></pre>\n\n<p>So that in this manner I could see the number of times each unique digit repeats. But this, of course, falls out of range when <code>i</code> reaches the last value.</p>\n\n<p>In the example above, I would want Python to tell me that 1 repeats 1, and that 0 repeats 3 times. The code above fails, however, because of my while statement.</p>\n\n<p>I know you can do this with just built-in functions and would prefer a solution that way. </p>\n"}, {"tags": ["python", "hyperlink", "openpyxl"], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 4183622, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-n6R2PzyxVRc/AAAAAAAAAAI/AAAAAAAAMpE/U1Hiwp3fBro/photo.jpg?sz=128", "display_name": "user987654321", "link": "https://stackoverflow.com/users/4183622/user987654321"}, "edited": false, "score": 0, "creation_date": 1450979648, "post_id": 34444153, "comment_id": 56654461, "body": "When I use this method, the text is indeed a link and not the cell.  However, it doesn&#39;t appear like a regular link (blue, underlined, etc.).  Is this a limitation of how cells are styled by Openpyxl?"}], "tags": [], "owner": {"reputation": 344, "user_id": 3689612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/824d2c137961f09c51e2c73c53274593?s=128&d=identicon&r=PG&f=1", "display_name": "tpearse", "link": "https://stackoverflow.com/users/3689612/tpearse"}, "is_accepted": true, "score": 1, "last_activity_date": 1450906806, "creation_date": 1450906806, "answer_id": 34444153, "question_id": 34443941, "link": "https://stackoverflow.com/questions/34443941/add-link-to-text-within-cell-not-entire-cell/34444153#34444153", "title": "Add link to text within cell, not entire cell", "body": "<p>You can try something like this:</p>\n\n<pre><code>wb = load_workbook(\"my_book.xlsx\")\nworksheet1 = wb.active()\ncell_value = '=HYPERLINK(\"http://mypage.com\", \"My Page\")'\nworksheet1.cell(row=1, column=1, value=cell_value)\n</code></pre>\n\n<p>The important part of my example is that you can just set the value of the cell to excel's hyperlink function as a string.  The first parameter is the link and the second parameter is the text to display in the cell.</p>\n"}], "owner": {"reputation": 199, "user_id": 4183622, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-n6R2PzyxVRc/AAAAAAAAAAI/AAAAAAAAMpE/U1Hiwp3fBro/photo.jpg?sz=128", "display_name": "user987654321", "link": "https://stackoverflow.com/users/4183622/user987654321"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 34444153, "answer_count": 1, "score": 0, "last_activity_date": 1450906806, "creation_date": 1450905843, "last_edit_date": 1450906499, "question_id": 34443941, "link": "https://stackoverflow.com/questions/34443941/add-link-to-text-within-cell-not-entire-cell", "title": "Add link to text within cell, not entire cell", "body": "<p>Using Openpyxl, is there a way to create a link within a cell?  </p>\n\n<p>I tried:</p>\n\n<pre><code>worksheet['A1'].hyperlink = 'http://mypage.com'\n</code></pre>\n\n<p>However, this sets the entire cell of 'A1' to be a link.  I would like it to set the text within the cell to a link so that it looks like: <a href=\"http://mypage.com\" rel=\"nofollow\">My page</a> in cell A1.</p>\n"}, {"tags": ["python", "list", "tuples"], "comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 2, "creation_date": 1450905573, "post_id": 34443844, "comment_id": 56629463, "body": "Is <code>find_path</code> a function or a method? You&#39;re calling it with <code>self.neighbors</code> as the first argument, so are you missing a <code>def find_path(self, ...)</code>?"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 3, "creation_date": 1450905645, "post_id": 34443844, "comment_id": 56629487, "body": "also be VERY CAREFUL about using mutable default arguments. This should work in this case, but it&#39;s one of those &quot;gotchas&quot; that are easy to screw up (for example if your first line was <code>path.append(start)</code>!"}, {"owner": {"reputation": 152, "user_id": 3914099, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/714927231/picture?type=large", "display_name": "Dor Cohen", "link": "https://stackoverflow.com/users/3914099/dor-cohen"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1450905779, "post_id": 34443844, "comment_id": 56629531, "body": "Thanks @AdamSmith , that was really the problem, I feel awkward that I didn&#39;t notice that"}], "answers": [{"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1450906305, "post_id": 34443966, "comment_id": 56629753, "body": "Well there&#39;s also the fact that he&#39;s defined a list literal, so we <i>know</i> the second element is a list by definition. There&#39;s no time when <code>[something]</code> isn&#39;t a list."}], "tags": [], "owner": {"reputation": 124, "user_id": 5710571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e14eb1f21ba6ec09e1efe05c7286e500?s=128&d=identicon&r=PG&f=1", "display_name": "user768518", "link": "https://stackoverflow.com/users/5710571/user768518"}, "is_accepted": false, "score": 0, "last_activity_date": 1450905929, "creation_date": 1450905929, "answer_id": 34443966, "question_id": 34443844, "link": "https://stackoverflow.com/questions/34443844/list-passed-with-default-parameter-is-considered-as-a-tuple/34443966#34443966", "title": "list passed with default parameter is considered as a tuple", "body": "<p>You need to look into what is passed as an argument for \"path\". I suspect your code somehow feeds it a tuple.</p>\n\n<pre><code>&gt;&gt;&gt; (4,4) + []\nTraceback (most recent call last):\n  File \"&lt;pyshell#13&gt;\", line 1, in &lt;module&gt;\n    (4,4) + []\nTypeError: can only concatenate tuple (not \"list\") to tuple\n&gt;&gt;&gt; [] + (4,4)\nTraceback (most recent call last):\n  File \"&lt;pyshell#14&gt;\", line 1, in &lt;module&gt;\n    [] + (4,4)\nTypeError: can only concatenate list (not \"tuple\") to list\n</code></pre>\n\n<p>The stacktrace you're getting corresponds to the 1st case, in which \"path\" is a tuple and [start] is, as expected, a list containing the tuple.</p>\n"}, {"tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": true, "score": 3, "last_activity_date": 1450906075, "creation_date": 1450906075, "answer_id": 34443995, "question_id": 34443844, "link": "https://stackoverflow.com/questions/34443844/list-passed-with-default-parameter-is-considered-as-a-tuple/34443995#34443995", "title": "list passed with default parameter is considered as a tuple", "body": "<p>As confirmed in the comments, the context of this code looks like:</p>\n\n<pre><code>class SomeClass:\n\n    ...\n    def find_path(graph, start, end, path=[]):\n        ...\n</code></pre>\n\n<p>In which case when you call it, it passes</p>\n\n<pre><code>find_path(graph=self, start=self.neighbors, end=(4,4), path=(0,4))\n</code></pre>\n\n<p>You need to define that method with the signature</p>\n\n<pre><code>def find_path(self, graph, start, end, path=[])\n</code></pre>\n\n<p>A note on mutable default arguments: be <strong>very careful</strong> when you decide to use them. It works in this case because the first thing you do is redefine <code>path</code> inside the scope of the method with <code>path = path + [start]</code>, but if your first line was the otherwise-identical <code>path.append(start)</code>, your method would be <em>very</em> hard to debug.</p>\n\n<p>Default arguments are scoped at the same level as the function they belong to, so mutating one will change it for every future call to that function. Because of that \"gotcha,\" a common idiom is:</p>\n\n<pre><code>def find_path(..., path=None):\n    if path is None:\n        path = []\n</code></pre>\n\n<p>or (equivalently but less-common)</p>\n\n<pre><code>path = [] if path is None else path\n</code></pre>\n"}], "owner": {"reputation": 152, "user_id": 3914099, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/714927231/picture?type=large", "display_name": "Dor Cohen", "link": "https://stackoverflow.com/users/3914099/dor-cohen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 34443995, "answer_count": 2, "score": 0, "last_activity_date": 1450906075, "creation_date": 1450905393, "question_id": 34443844, "link": "https://stackoverflow.com/questions/34443844/list-passed-with-default-parameter-is-considered-as-a-tuple", "title": "list passed with default parameter is considered as a tuple", "body": "<p>I tried to call this function (only the first line matters):</p>\n\n<pre><code>def find_path(graph, start, end, path=[]):\n    path = path + [start]\n    if start == end:\n        return path\n    if not graph.has_key(start):\n        return None\n    for node in graph[start]:\n        if node not in path:\n            newpath = find_path(graph, node, end, path)\n            if newpath: return newpath\n    return None\n</code></pre>\n\n<p>like this: </p>\n\n<pre><code>find_path(self.neighbors, (4,4), (0,4))\n</code></pre>\n\n<p>but I always get this error:</p>\n\n<pre><code>    path = path + [start]\nTypeError: can only concatenate tuple (not \"list\") to tuple\n</code></pre>\n\n<p>I know that I cannot change a tuple, but I assumed <code>path</code> is a list, and when I check it's type it says tuple, how come? what's your suggestion to solve it? thanks</p>\n"}, {"tags": ["python", "mongodb", "tornado", "tornado-motor"], "comments": [{"owner": {"reputation": 10401, "user_id": 681044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OWZ3c.jpg?s=128&g=1", "display_name": "kwarunek", "link": "https://stackoverflow.com/users/681044/kwarunek"}, "edited": false, "score": 0, "creation_date": 1450905882, "post_id": 34443809, "comment_id": 56629578, "body": "Show stacktrace of an error. Also it would help if you write (or enclose code) what is in settings[&#39;db&#39;]"}, {"owner": {"reputation": 161, "user_id": 4211218, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/d200a7b72dc507c8992e2da3529f8650?s=128&d=identicon&r=PG&f=1", "display_name": "Ashwini Purohit", "link": "https://stackoverflow.com/users/4211218/ashwini-purohit"}, "reply_to_user": {"reputation": 10401, "user_id": 681044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OWZ3c.jpg?s=128&g=1", "display_name": "kwarunek", "link": "https://stackoverflow.com/users/681044/kwarunek"}, "edited": false, "score": 0, "creation_date": 1450906566, "post_id": 34443809, "comment_id": 56629875, "body": "It shows : yielded unknown object MotorCursor(&lt;pymongo.cursor.Cursor object at 0xb695cb4c&gt;) In settings[&#39;db&#39;] contains the database settings. That&#39;s it. above it, db contains the database ."}], "answers": [{"tags": [], "owner": {"reputation": 10401, "user_id": 681044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OWZ3c.jpg?s=128&g=1", "display_name": "kwarunek", "link": "https://stackoverflow.com/users/681044/kwarunek"}, "is_accepted": false, "score": 1, "last_activity_date": 1450907148, "creation_date": 1450907148, "answer_id": 34444218, "question_id": 34443809, "link": "https://stackoverflow.com/questions/34443809/how-to-get-the-database-view-in-motor-tornado/34444218#34444218", "title": "How to get the database view in MOTOR Tornado?", "body": "<p>Motor's <code>find</code> returns only the cursor, it is not <code>Future</code> - it cannot be yielded. You can iterate over it with <a href=\"https://motor.readthedocs.org/en/stable/api/motor_cursor.html?highlight=fetch_next#motor.motor_tornado.MotorCursor.fetch_next\" rel=\"nofollow\"><code>fetch_next</code></a>, or use <a href=\"https://motor.readthedocs.org/en/stable/api/motor_cursor.html?highlight=fetch_next#motor.motor_tornado.MotorCursor.to_list\" rel=\"nofollow\"><code>to_list</code></a> to fetch more data (or more info in <a href=\"https://motor.readthedocs.org/en/stable/api/motor_cursor.html\" rel=\"nofollow\">docs</a>). Some sort of example </p>\n\n<pre><code>@gen.coroutine\ndef get(self):\n    db = self.settings['db']\n    cursor = db.ip.find()\n    res = yield cursor.to_list(length=100)\n    self.write(res)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21948, "user_id": 618967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Vfh11.jpg?s=128&g=1", "display_name": "A. Jesse Jiryu Davis", "link": "https://stackoverflow.com/users/618967/a-jesse-jiryu-davis"}, "is_accepted": false, "score": 0, "last_activity_date": 1450907241, "creation_date": 1450907241, "answer_id": 34444243, "question_id": 34443809, "link": "https://stackoverflow.com/questions/34443809/how-to-get-the-database-view-in-motor-tornado/34444243#34444243", "title": "How to get the database view in MOTOR Tornado?", "body": "<p>Motor is asynchronous. In order to get the result of a database operation like <code>find</code>, you must <code>yield</code> the Future it returns to resolve the Future into a result:</p>\n\n<pre><code>cursor = db.test_collection.find({'i': {'$lt': 5}}).sort('i')\nfor document in (yield cursor.to_list(length=100)):\n    self.write(str(document))\n</code></pre>\n\n<p>For more info, see the tutorial:</p>\n\n<p><a href=\"http://motor.readthedocs.org/en/stable/tutorial-tornado.html#querying-for-more-than-one-document\" rel=\"nofollow\">http://motor.readthedocs.org/en/stable/tutorial-tornado.html#querying-for-more-than-one-document</a></p>\n"}], "owner": {"reputation": 161, "user_id": 4211218, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/d200a7b72dc507c8992e2da3529f8650?s=128&d=identicon&r=PG&f=1", "display_name": "Ashwini Purohit", "link": "https://stackoverflow.com/users/4211218/ashwini-purohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1450907241, "creation_date": 1450905181, "question_id": 34443809, "link": "https://stackoverflow.com/questions/34443809/how-to-get-the-database-view-in-motor-tornado", "title": "How to get the database view in MOTOR Tornado?", "body": "<p>I have a database .\nIn that I want to view all the entries that have been inserted. \nFor that I made a route '/db' and added the below RequestHandler to it.</p>\n\n<pre><code>class dbHandler(RequestHandler):\n    @gen.coroutine\n    def get(self):\n        db = self.settings['db']\n        result = yield db.ip.find()\n        for res in result:\n           self.write(res)\n</code></pre>\n\n<p>This gives me Error 505 when I open /db route. \nHow to get the data of ip?</p>\n"}, {"tags": ["python", "compression"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 3, "creation_date": 1450905335, "post_id": 34443793, "comment_id": 56629360, "body": "What&#39;s in this file? English text? Random bytes? No lossless compression function can compress all inputs."}, {"owner": {"reputation": 2023, "user_id": 3079302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d65ce13ff3ebb67092cbc09b912b88d3?s=128&d=identicon&r=PG", "display_name": "iled", "link": "https://stackoverflow.com/users/3079302/iled"}, "edited": false, "score": 0, "creation_date": 1450905371, "post_id": 34443793, "comment_id": 56629375, "body": "Please add an example where that behaviour occurs."}, {"owner": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "edited": false, "score": 0, "creation_date": 1450905397, "post_id": 34443793, "comment_id": 56629388, "body": "If the text is small enough it may not actually save any space to compress it."}, {"owner": {"reputation": 100, "user_id": 5609267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15e320ff586bd7c4a694715cddac4101?s=128&d=identicon&r=PG&f=1", "display_name": "James Bond", "link": "https://stackoverflow.com/users/5609267/james-bond"}, "edited": false, "score": 0, "creation_date": 1451499967, "post_id": 34443793, "comment_id": 56811719, "body": "Thanks Morgan, your answer proved correct!"}, {"owner": {"reputation": 100, "user_id": 5609267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15e320ff586bd7c4a694715cddac4101?s=128&d=identicon&r=PG&f=1", "display_name": "James Bond", "link": "https://stackoverflow.com/users/5609267/james-bond"}, "edited": false, "score": 0, "creation_date": 1451500062, "post_id": 34443793, "comment_id": 56811758, "body": "And user2357112, what was in my document was randomized characters, like 1000 random characters."}], "answers": [{"comments": [{"owner": {"reputation": 100, "user_id": 5609267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15e320ff586bd7c4a694715cddac4101?s=128&d=identicon&r=PG&f=1", "display_name": "James Bond", "link": "https://stackoverflow.com/users/5609267/james-bond"}, "edited": false, "score": 0, "creation_date": 1451499898, "post_id": 34455211, "comment_id": 56811687, "body": "Thanks, I found out that what I was compressing was miniscule :)"}], "tags": [], "owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "is_accepted": true, "score": 0, "last_activity_date": 1450972809, "creation_date": 1450972809, "answer_id": 34455211, "question_id": 34443793, "link": "https://stackoverflow.com/questions/34443793/python-3x-compression-makes-file-bigger/34455211#34455211", "title": "Python 3x- Compression Makes File Bigger :(", "body": "<p>Not all inputs can be compressed. Your input might be too short to compress, or it might simply have no patterns or skewed statistics for the compressor to work with. Compression requires some form of redundancy in the input in order to compress.</p>\n"}], "owner": {"reputation": 100, "user_id": 5609267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15e320ff586bd7c4a694715cddac4101?s=128&d=identicon&r=PG&f=1", "display_name": "James Bond", "link": "https://stackoverflow.com/users/5609267/james-bond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 1, "accepted_answer_id": 34455211, "answer_count": 1, "score": 2, "last_activity_date": 1451521074, "creation_date": 1450905110, "last_edit_date": 1451521074, "question_id": 34443793, "link": "https://stackoverflow.com/questions/34443793/python-3x-compression-makes-file-bigger", "title": "Python 3x- Compression Makes File Bigger :(", "body": "<p>Ok. Recently I was testing out a piece of code for a small project. It required me to compress some files, and it actually makes the file size bigger, unless there is a problem in what it prints. Here's my code:</p>\n\n<pre><code>def Compress(z):\n    #Line Spacing May Be Off A Little Because I'm New to Stack Overflow\n    import zlib, sys, time, base64\n    text = open(z, \"rb\").read()\n    print (\"Raw Size:\", sys.getsizeof(text))\n    compressed = zlib.compress(text, 9)\n    print (\"Compressed Size:\", sys.getsizeof(compressed))\n    ratio = sys.getsizeof(text) / sys.getsizeof(compressed)\n    print (\"Compression Ratio:\", ratio)\n</code></pre>\n\n<p>EDIT: Hey, thanks for answering, you guys were a lot of help!</p>\n"}, {"tags": ["python", "numpy", "speech-recognition", "microphone", "wave"], "comments": [{"owner": {"reputation": 11698, "user_id": 166247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c5bd086b49b0b66cf9089d6f7e4d41?s=128&d=identicon&r=PG", "display_name": "Ashalynd", "link": "https://stackoverflow.com/users/166247/ashalynd"}, "edited": false, "score": 0, "creation_date": 1450905797, "post_id": 34443788, "comment_id": 56629543, "body": "Are you sure that the algorithm that checks start and end is doing its job correctly?"}, {"owner": {"reputation": 193, "user_id": 3370070, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/417de9898cc23b3cc3a545e5b63a5c1e?s=128&d=identicon&r=PG&f=1", "display_name": "Dusan J.", "link": "https://stackoverflow.com/users/3370070/dusan-j"}, "reply_to_user": {"reputation": 11698, "user_id": 166247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c5bd086b49b0b66cf9089d6f7e4d41?s=128&d=identicon&r=PG", "display_name": "Ashalynd", "link": "https://stackoverflow.com/users/166247/ashalynd"}, "edited": false, "score": 0, "creation_date": 1450906967, "post_id": 34443788, "comment_id": 56630075, "body": "Yes, I have plotted amplitudeSamples and vertical edges of start and end index and they fit really fine."}, {"owner": {"reputation": 11698, "user_id": 166247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c5bd086b49b0b66cf9089d6f7e4d41?s=128&d=identicon&r=PG", "display_name": "Ashalynd", "link": "https://stackoverflow.com/users/166247/ashalynd"}, "edited": false, "score": 0, "creation_date": 1450909219, "post_id": 34443788, "comment_id": 56631026, "body": "What about the parameters in setnchannels and setsampwidth calls? Are they correct?"}, {"owner": {"reputation": 193, "user_id": 3370070, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/417de9898cc23b3cc3a545e5b63a5c1e?s=128&d=identicon&r=PG&f=1", "display_name": "Dusan J.", "link": "https://stackoverflow.com/users/3370070/dusan-j"}, "reply_to_user": {"reputation": 11698, "user_id": 166247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c5bd086b49b0b66cf9089d6f7e4d41?s=128&d=identicon&r=PG", "display_name": "Ashalynd", "link": "https://stackoverflow.com/users/166247/ashalynd"}, "edited": false, "score": 0, "creation_date": 1450909512, "post_id": 34443788, "comment_id": 56631158, "body": "I record it with 1 channel, setsampwidth I guess its 2 because I record it with paInt16 which is 2byte."}], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 3370070, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/417de9898cc23b3cc3a545e5b63a5c1e?s=128&d=identicon&r=PG&f=1", "display_name": "Dusan J.", "link": "https://stackoverflow.com/users/3370070/dusan-j"}, "edited": false, "score": 0, "creation_date": 1450909678, "post_id": 34444628, "comment_id": 56631214, "body": "Also possible with soundfile.write(&#39;bla.wav&#39;, voiceSignal, 44100) using soundfilde library"}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "reply_to_user": {"reputation": 193, "user_id": 3370070, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/417de9898cc23b3cc3a545e5b63a5c1e?s=128&d=identicon&r=PG&f=1", "display_name": "Dusan J.", "link": "https://stackoverflow.com/users/3370070/dusan-j"}, "edited": false, "score": 0, "creation_date": 1450909890, "post_id": 34444628, "comment_id": 56631287, "body": "See also &#39;wavio&#39; on pypi."}], "tags": [], "owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "is_accepted": true, "score": 2, "last_activity_date": 1450909297, "creation_date": 1450909297, "answer_id": 34444628, "question_id": 34443788, "link": "https://stackoverflow.com/questions/34443788/how-to-save-trimmed-wave-file-in-python/34444628#34444628", "title": "How to save trimmed wave file in python?", "body": "<p>Convert the numpy array to a string before writing it:</p>\n\n<pre><code>wavFile.writeframes(voiceSample.tostring())\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 3370070, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/417de9898cc23b3cc3a545e5b63a5c1e?s=128&d=identicon&r=PG&f=1", "display_name": "Dusan J.", "link": "https://stackoverflow.com/users/3370070/dusan-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1376, "favorite_count": 0, "accepted_answer_id": 34444628, "answer_count": 1, "score": 2, "last_activity_date": 1450909297, "creation_date": 1450905089, "last_edit_date": 1450905535, "question_id": 34443788, "link": "https://stackoverflow.com/questions/34443788/how-to-save-trimmed-wave-file-in-python", "title": "How to save trimmed wave file in python?", "body": "<p>I am trying to record microphone input, perform some endpointing algorithm that will endpoint speech and save new wave file with speech only.</p>\n\n<p>I managed to save a file but when I play the recording it plays half of the speech sequence. </p>\n\n<p>1) What format should the array be in in order for me to succesfuly save it?</p>\n\n<p>2) How can I convert it to that format? </p>\n\n<p>I am using the following algorithm for microphone recording and the mistake is somewhere in the way I save the file:</p>\n\n<p>If I call writeframes(frames) it nicely saves complete 3second mic input.</p>\n\n<pre><code>FORMAT = pyaudio.paInt16                # We use 16bit format per sample\nCHANNELS = 1\nRATE = 44100\nCHUNK = 1024                            # 1024bytes of data red from a buffer\nRECORD_SECONDS = 3\nWAVE_OUTPUT_FILENAME = \"file.wav\"\n\naudio = pyaudio.PyAudio()\n\n# start Recording\nstream = audio.open(format=FORMAT,\n                    channels=CHANNELS,\n                    rate=RATE, input=True,\n                    frames_per_buffer=CHUNK)\n\nprint \"recording...\"\nframes = []\nfor i in range(0, int(RATE / CHUNK * RECORD_SECONDS)):\n    data = stream.read(CHUNK)\n    frames.append(data)\nprint \"finished recording\"\n# stop Recordings\nstream.stop_stream()\nstream.close()\naudio.terminate()\n\nframes = ''.join(frames)\n\n# important! convert from string to int\namplitudeSamples = np.fromstring(frames, np.int16)\n\n# Perform endpointing algorithm where I compute start and end indexes \n# within amplitudeSamples array\n\nvoiceSample = amplitudeSamples[start:end]\n\n# Here lies the problem\nwaveFile = wave.open(WAVE_OUTPUT_FILENAME, 'wb')\nwaveFile.setnchannels(1)\nwaveFile.setsampwidth(2)\nwaveFile.setframerate(RATE)\nwaveFile.writeframes(voiceSample) \n#waveFile.writeframesraw(voiceSample) # doesn't work also\nwaveFile.close()\n</code></pre>\n"}, {"tags": ["python", "django", "django-rest-framework", "django-serializer"], "comments": [{"owner": {"reputation": 497, "user_id": 1245659, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9116cc9a250e0990ae2b0395b28aa875?s=128&d=identicon&r=PG", "display_name": "arcee123", "link": "https://stackoverflow.com/users/1245659/arcee123"}, "edited": false, "score": 0, "creation_date": 1450905129, "post_id": 34443754, "comment_id": 56629289, "body": "did you include the models in serializer.py?  ie. <code>from app.models import Movie, Genre</code>"}, {"owner": {"reputation": 629, "user_id": 4966987, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/a98462949406ee05cb3518e1d986f8ea?s=128&d=identicon&r=PG&f=1", "display_name": "qwertp", "link": "https://stackoverflow.com/users/4966987/qwertp"}, "reply_to_user": {"reputation": 497, "user_id": 1245659, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9116cc9a250e0990ae2b0395b28aa875?s=128&d=identicon&r=PG", "display_name": "arcee123", "link": "https://stackoverflow.com/users/1245659/arcee123"}, "edited": false, "score": 0, "creation_date": 1450905547, "post_id": 34443754, "comment_id": 56629446, "body": "Yes, I&#39;ve done the imports."}, {"owner": {"reputation": 497, "user_id": 1245659, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9116cc9a250e0990ae2b0395b28aa875?s=128&d=identicon&r=PG", "display_name": "arcee123", "link": "https://stackoverflow.com/users/1245659/arcee123"}, "edited": false, "score": 0, "creation_date": 1450907575, "post_id": 34443754, "comment_id": 56630333, "body": "can you update your question with how you are calling them?  Or is it compiling with this error?  Thanks."}, {"owner": {"reputation": 629, "user_id": 4966987, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/a98462949406ee05cb3518e1d986f8ea?s=128&d=identicon&r=PG&f=1", "display_name": "qwertp", "link": "https://stackoverflow.com/users/4966987/qwertp"}, "reply_to_user": {"reputation": 497, "user_id": 1245659, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9116cc9a250e0990ae2b0395b28aa875?s=128&d=identicon&r=PG", "display_name": "arcee123", "link": "https://stackoverflow.com/users/1245659/arcee123"}, "edited": false, "score": 0, "creation_date": 1450907887, "post_id": 34443754, "comment_id": 56630478, "body": "@arcee123 done. It complies with these errors. It&#39;s only when I try to access <code>&#47;genres&#47;pk</code> that I get the error"}, {"owner": {"reputation": 497, "user_id": 1245659, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9116cc9a250e0990ae2b0395b28aa875?s=128&d=identicon&r=PG", "display_name": "arcee123", "link": "https://stackoverflow.com/users/1245659/arcee123"}, "edited": false, "score": 0, "creation_date": 1450908769, "post_id": 34443754, "comment_id": 56630845, "body": "Try what CptLemming says...if not try ditching your &quot;related_name&quot; attribute.  Could be killing your reverse-relationship."}], "answers": [{"tags": [], "owner": {"reputation": 6134, "user_id": 930517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1070cbf307dce1511a72bd84e755f9b0?s=128&d=identicon&r=PG", "display_name": "Ashley &#39;CptLemming&#39; Wilson", "link": "https://stackoverflow.com/users/930517/ashley-cptlemming-wilson"}, "is_accepted": true, "score": 2, "last_activity_date": 1450908429, "creation_date": 1450908429, "answer_id": 34444464, "question_id": 34443754, "link": "https://stackoverflow.com/questions/34443754/attributeerror-when-attempting-to-get-a-value-for-field-on-serializer/34444464#34444464", "title": "AttributeError when attempting to get a value for field on serializer", "body": "<p>Similar to your other question, you are using the incorrect serializer on your <code>GenreDetail</code> view. You need to add the serializer for the type of models you are returning from <code>get_queryset</code>:</p>\n\n<pre><code>class GenreDetail(generics.RetrieveUpdateDestroyAPIView):\n    serializer_class = MovieSerializer\n\n    def get_queryset(self):\n        genres = Genre.objects.get(pk=self.kwargs.get('pk', None))\n        movies = Movie.objects.filter(genres=genres)\n        return movies\n</code></pre>\n"}], "owner": {"reputation": 629, "user_id": 4966987, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/a98462949406ee05cb3518e1d986f8ea?s=128&d=identicon&r=PG&f=1", "display_name": "qwertp", "link": "https://stackoverflow.com/users/4966987/qwertp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3958, "favorite_count": 0, "accepted_answer_id": 34444464, "answer_count": 1, "score": 2, "last_activity_date": 1535349282, "creation_date": 1450904918, "last_edit_date": 1535349282, "question_id": 34443754, "link": "https://stackoverflow.com/questions/34443754/attributeerror-when-attempting-to-get-a-value-for-field-on-serializer", "title": "AttributeError when attempting to get a value for field on serializer", "body": "<p>Trying to get a <code>manytomany</code> relationship in django but I'm getting the following error - </p>\n\n<blockquote>\n  <p>Got AttributeError when attempting to get a value for field <code>name</code> on serializer GenreSerializer.\n  The serializer field might be named incorrectly and not match any attribute or key on the Movie instance.\n  Original exception text was: 'Movie' object has no attribute 'name'.</p>\n</blockquote>\n\n<p>There is a similar answer here recommending setting <code>many=True</code>, but it doesn't work - \n<a href=\"https://stackoverflow.com/questions/30562054/attribute-error-when-attempting-to-get-a-value-for-field\">Attribute error when attempting to get a value for field</a></p>\n\n<p>models.py</p>\n\n<pre><code>class Genre(models.Model):\n  name = models.CharField(max_length=255,unique=True)\n\n  def __unicode__(self):\n    return self.name\n\nclass Movie(models.Model):\n  mname = models.CharField(max_length=255)\n  genres = models.ManyToManyField(Genre,related_name='movies')\n\n  def __unicode__(self):\n    return self.mname\n</code></pre>\n\n<p>serializers.py</p>\n\n<pre><code>class GenreSerializer(serializers.ModelSerializer):\n  class Meta:\n    model = Genre\n    fields = ('name','id')\n\nclass MovieSerializer(serializers.ModelSerializer):\n  genres = GenreSerializer(many=True, read_only=True)    \n\n  class Meta:\n    model = Movie\n    fields = ('id','genres','mname')\n</code></pre>\n\n<p>urls.py</p>\n\n<pre><code>urlpatterns = [\nurl(r'^genres/$', views.GenreList.as_view()),\nurl(r'^genres/(?P&lt;pk&gt;[0-9]+)$', views.GenreDetail.as_view()),\n]\n\nurlpatterns = format_suffix_patterns(urlpatterns)\n</code></pre>\n\n<p>views.py</p>\n\n<pre><code>class GenreList(generics.ListCreateAPIView):\n  queryset = Genre.objects.all()\n  serializer_class = GenreSerializer\n\n\nclass GenreDetail(generics.RetrieveUpdateDestroyAPIView):\n  serializer_class = GenreSerializer\n\n  def get_queryset(self):\n    genres = Genre.objects.get(pk=self.kwargs.get('pk', None))\n    movies = Movie.objects.filter(genres=genres)\n    return movies\n</code></pre>\n"}, {"tags": ["python", "if-statement", "openfiledialog", "read-write"], "comments": [{"owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "edited": false, "score": 0, "creation_date": 1450906238, "post_id": 34443699, "comment_id": 56629723, "body": "Your <code>mypath</code> needs to be written correctly: <code>r&quot;C:\\Users\\LT GM\\Desktop&quot;</code>. And if you&#39;re going to manipulate filepaths, please use <code>os.path.join</code> instead of adding strings yourself"}, {"owner": {"reputation": 55, "user_id": 5702687, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e77fff0ecac29c3bcfc836aa2c4a755a?s=128&d=identicon&r=PG&f=1", "display_name": "Jihad 3aramouni", "link": "https://stackoverflow.com/users/5702687/jihad-3aramouni"}, "reply_to_user": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "edited": false, "score": 0, "creation_date": 1450906578, "post_id": 34443699, "comment_id": 56629878, "body": "i add r to the path as you said but still nothing happen"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 5702687, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e77fff0ecac29c3bcfc836aa2c4a755a?s=128&d=identicon&r=PG&f=1", "display_name": "Jihad 3aramouni", "link": "https://stackoverflow.com/users/5702687/jihad-3aramouni"}, "edited": false, "score": 0, "creation_date": 1450906106, "post_id": 34443822, "comment_id": 56629667, "body": "based on your code i changed mine but nothing happen  i will edit my question and add the changed script .. take a look"}], "tags": [], "owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "is_accepted": true, "score": -1, "last_activity_date": 1450905236, "creation_date": 1450905236, "answer_id": 34443822, "question_id": 34443699, "link": "https://stackoverflow.com/questions/34443699/how-to-copy-content-of-file-to-another-file-with-deleting-some-lines-in-a-txt-fi/34443822#34443822", "title": "how to copy content of file to another file with deleting some lines in a TXT file based on some strings with python", "body": "<pre><code>blacklist = set(['thumbnails', 'quraan', 'cache'])\n\nwith open('path/to/input') as infile, open('path/to/output', 'w') as outfile:\n    for line in infile:\n        if line.strip() in blacklist: continue  # if you want to match the full line\n        # if any(word in line for word in blacklist): continue  # if you want to check if a word exists on a line\n        outfile.write(line)\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 5702687, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e77fff0ecac29c3bcfc836aa2c4a755a?s=128&d=identicon&r=PG&f=1", "display_name": "Jihad 3aramouni", "link": "https://stackoverflow.com/users/5702687/jihad-3aramouni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 34443822, "answer_count": 1, "score": 0, "last_activity_date": 1450906139, "creation_date": 1450904681, "last_edit_date": 1450906139, "question_id": 34443699, "link": "https://stackoverflow.com/questions/34443699/how-to-copy-content-of-file-to-another-file-with-deleting-some-lines-in-a-txt-fi", "title": "how to copy content of file to another file with deleting some lines in a TXT file based on some strings with python", "body": "<p>i have this python script that open a file dialog and select a text file than copy its content to another file,  what i need to do before i copy to the next file is to delete several lines based on some strings that are predefined in the script. </p>\n\n<p>the problem is that the file is copied as it is without deleting anything.</p>\n\n<p><strong>can anyone help me to solve this issue??</strong></p>\n\n<h1>OPenDirectory.py</h1>\n\n<pre><code> #!/usr/bin/python\n\nimport Tkinter\nfrom os import listdir\nfrom os.path import isfile, join\nimport tkFileDialog\n\n\ndef readWrite():\n    unwanted = set(['thumbnails', 'tikare', 'cache'])\n    mypath = \"C:\\Users\\LT GM\\Desktop/\"\n\n    Tkinter.Tk().withdraw()\n    in_path = tkFileDialog.askopenfile(initialdir = mypath, filetypes=[('text files', ' TXT ')])\n\n    files = [f for f in listdir(mypath) if isfile(join(mypath, f))]\n    for file in files:\n        if file.split('.')[1] == 'txt':\n            outputFileName = 'Sorted-' + file\n            with open(mypath + outputFileName, 'w') as w:\n                with open(mypath + '/' + file) as f:\n                    for l in f:\n                        if l != unwanted:\n                            print l\n                            w.write(l)\n    in_path.close()\nif __name__== \"__main__\":\n    readWrite()\n</code></pre>\n\n<h1>ChangedScipt</h1>\n\n<pre><code>#!/usr/bin/python\n\nimport Tkinter\nfrom os import listdir\nfrom os.path import isfile, join\nimport tkFileDialog\n\n\ndef readWrite():\n    unwanted = set(['thumbnails', 'tikare', 'cache'])\n    mypath = \"C:\\Users\\LT GM\\Desktop/\"\n\n    Tkinter.Tk().withdraw()\n    in_path = tkFileDialog.askopenfile(initialdir = mypath, filetypes=[('text files', ' TXT ')])\n\n    files = [f for f in listdir(mypath) if isfile(join(mypath, f))]\n    for file in files:\n        if file.split('.')[1] == 'txt':\n\n            if file.strip() in unwanted:\n                continue\n                outputFileName = 'Sorted-' + file\n                with open(mypath + outputFileName, 'w') as w:\n                    with open(mypath + '/' + file) as f:\n                        for l in f:\n                            if l != unwanted:\n                                print l\n                                w.write(l)\n    in_path.close()\nif __name__== \"__main__\":\n    readWrite()\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1450904878, "post_id": 34443648, "comment_id": 56629187, "body": "This is known as the <a href=\"https://en.wikipedia.org/wiki/Euler%27s_totient_function\" rel=\"nofollow noreferrer\">totient function</a>. It can be done faster than what you have, but it&#39;s still really hard to calculate. However, Project Euler problem 243 <i>does not require you to calculate totients of arbitrary numbers</i>. It&#39;s a lot easier to construct a number x to match a totient(x)/x bound than it is to calculate totient(x)/x values until you find a match, since you know the prime factorization of your constructed x."}, {"owner": {"reputation": 731, "user_id": 5072765, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f0d70b5fda3dbdc111f38188c35954f7?s=128&d=identicon&r=PG&f=1", "display_name": "Larisa", "link": "https://stackoverflow.com/users/5072765/larisa"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1450905047, "post_id": 34443648, "comment_id": 56629259, "body": "Didn&#39;t know I don&#39;t need it, I will try looking it up, thank you!"}], "owner": {"reputation": 731, "user_id": 5072765, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f0d70b5fda3dbdc111f38188c35954f7?s=128&d=identicon&r=PG&f=1", "display_name": "Larisa", "link": "https://stackoverflow.com/users/5072765/larisa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1450904456, "creation_date": 1450904456, "question_id": 34443648, "link": "https://stackoverflow.com/questions/34443648/how-many-numbers-between-1-and-d-are-dividing-d-not-restricted-to-a-particular", "title": "How many numbers between 1 and d are dividing d - not restricted to a particular language", "body": "<p>I am actually solving the Problem 243 on Project Euler. </p>\n\n<h2>If you know the Problem 243:</h2>\n\n<p>The numbers d I am going to check the resilience for, are going to be multiplies of prime numbers, so they won't be dividable with 2 and all other primes up to d. The quickest function I can think of works like this: </p>\n\n<pre><code>def checkUnDivisibility(d, primeList):\n    for prime in primeList:\n        if d%prime == 0: return False\n    return True\n\ndef resilience(d, primeList):\n    allFractions = d-1\n    undivisibleFractions = 2 # 2 that are not divisible with d are 1 and d-1\n    for numerator in range(3, d-2, 2): \n        if checkUnDivisibility(numerator, primeList): undivisibleFractions +=  1\n        elif gcd(d, numerator) == 1: undivisibleFractions += 1\n    print(\"the number of undivisible fractions is \" + undivisibleFractions)\n</code></pre>\n\n<h2>If you do not know the Problem 243:</h2>\n\n<p>if you write down all fractions with the numerator going from 1 to d and the denominator d, I want to know how many fractions there is, that can't be cancelled down.</p>\n\n<p>For example, for d = 6:</p>\n\n<p>Fractions: 1/6, 2/6, 3/6, 4/6, 5/6, 6/6. Those that can't be cancelled down are 1/6 and 5/6. </p>\n\n<p>I know that when the denominator is a prime number, the number of those fractions is the same as the number of all the denominators and I know that 1/d and (d-1)/d are not going to be cancellable, and I do know how to write a function that will calculate the number of those fractions. </p>\n\n<p>But the thing is, I am calculating this for some huge numbers and I want to have a quicker function. Is there any kind of trick or an algorithm for calculating the number of those with a function or a formula or something? </p>\n\n<p>I would really appreciate the answer because I have been solving the problem for a few days now and still can't solve it for a really big d (around 15-30 digits).</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 5645, "user_id": 233076, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/489a0a450e5172afe13e5dd3c24423e0?s=128&d=identicon&r=PG", "display_name": "Carlos", "link": "https://stackoverflow.com/users/233076/carlos"}, "edited": false, "score": 0, "creation_date": 1450910247, "post_id": 34443643, "comment_id": 56631424, "body": "Why not just have one Profile model with a field that says which type it is?"}, {"owner": {"reputation": 12945, "user_id": 2246488, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7f300ea1293fd5e1b95783b6511d5a13?s=128&d=identicon&r=PG&f=1", "display_name": "James Wierzba", "link": "https://stackoverflow.com/users/2246488/james-wierzba"}, "reply_to_user": {"reputation": 5645, "user_id": 233076, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/489a0a450e5172afe13e5dd3c24423e0?s=128&d=identicon&r=PG", "display_name": "Carlos", "link": "https://stackoverflow.com/users/233076/carlos"}, "edited": false, "score": 0, "creation_date": 1450916786, "post_id": 34443643, "comment_id": 56633430, "body": "@Carlos Which would be the best datatype of the field specifying the type? Some integer for example 0=TrainerProfile, and 1=ClientProfile ?"}, {"owner": {"reputation": 5645, "user_id": 233076, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/489a0a450e5172afe13e5dd3c24423e0?s=128&d=identicon&r=PG", "display_name": "Carlos", "link": "https://stackoverflow.com/users/233076/carlos"}, "edited": false, "score": 0, "creation_date": 1450966339, "post_id": 34443643, "comment_id": 56649576, "body": "Yeah you have plenty of choice. I&#39;d go with an int or some other enum-like type since it looks like there&#39;s going to be a limited amount of choices."}], "owner": {"reputation": 12945, "user_id": 2246488, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7f300ea1293fd5e1b95783b6511d5a13?s=128&d=identicon&r=PG&f=1", "display_name": "James Wierzba", "link": "https://stackoverflow.com/users/2246488/james-wierzba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1525839583, "creation_date": 1450904430, "last_edit_date": 1525839583, "question_id": 34443643, "link": "https://stackoverflow.com/questions/34443643/maintain-two-exclusive-types-of-user-in-django", "title": "Maintain two exclusive types of User in Django?", "body": "<p>I have two distinctly different types of User in a django project: <strong>Trainer</strong> and <strong>Client</strong>.</p>\n\n<p>I have models for them like so:</p>\n\n<pre><code>class TrainerProfile(model.Model):\n    user = models.OneToOneField(User, primary_key=True)\n    #...other Trainer fields\n\nclass ClientProfile(models.Model):\n    user = models.OneToOneField(User, primary_key=True)\n    #...other Trainer fields\n</code></pre>\n\n<p>The problem I am facing is how can I explicitly enforce that a User can be only one of these, and then query which one they are?</p>\n"}, {"tags": ["python", "flask", "keyerror"], "answers": [{"tags": [], "owner": {"reputation": 2700, "user_id": 347567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f658a58fa2f6a02b804b71e168d44da6?s=128&d=identicon&r=PG", "display_name": "pneumatics", "link": "https://stackoverflow.com/users/347567/pneumatics"}, "is_accepted": false, "score": 3, "last_activity_date": 1450911501, "creation_date": 1450911501, "answer_id": 34444980, "question_id": 34443640, "link": "https://stackoverflow.com/questions/34443640/flask-tutorial-keyerror-database/34444980#34444980", "title": "Flask Tutorial: KeyError: &#39;DATABASE&#39;", "body": "<p>The trouble is that <code>Flask.config.from_envvar</code> is not finding your settings, because you have them here in <code>flaskr.py</code>. </p>\n\n<p>You can use the <code>from_object</code> configuration method, as given in the Flask tutorial, like this:</p>\n\n<pre><code>app.config.from_object(__name__)\n</code></pre>\n\n<p>which would find your capitalized variable names as given. Or, if you wanted to continue using the <code>from_envvar</code> config, which is advisable since it keeps your database credentials out of revision control, <a href=\"http://flask.pocoo.org/docs/0.10/config/\" rel=\"nofollow\">you can put those items into a <code>.cfg</code> file as documented here.</a>:</p>\n\n<p>Make a new file called <code>settings.cfg</code>:</p>\n\n<pre><code>DATABASE = '/tmp/flaskr.db'\nDEBUG = True\nSECRET_KEY = 'development key'\nUSERNAME = 'admin'\nPASSWORD = 'default'\n</code></pre>\n\n<p>And remove those lines from <code>flaskr.py</code>. Then to start your app:</p>\n\n<pre><code>$ export FLASKR_SETTINGS=/path/to/settings.cfg\n$ python flaskr.py\n * Running on http://127.0.0.1:5000/\n * Restarting with reloader...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "is_accepted": false, "score": 0, "last_activity_date": 1450913508, "creation_date": 1450913508, "answer_id": 34445305, "question_id": 34443640, "link": "https://stackoverflow.com/questions/34443640/flask-tutorial-keyerror-database/34445305#34445305", "title": "Flask Tutorial: KeyError: &#39;DATABASE&#39;", "body": "<p>You are setting a variable here:</p>\n\n<pre><code>DATABASE = '/tmp/flaskr.db'\n</code></pre>\n\n<p>...and then you are trying to read it from a different place:</p>\n\n<pre><code>sqlite3.connect(app.config['DATABASE'])\n</code></pre>\n\n<p>You can simply:</p>\n\n<pre><code>sqlite3.connect(DATABASE)\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>sqlite3.connect('/tmp/flaskr.db')\n</code></pre>\n"}], "owner": {"reputation": 1124, "user_id": 5199096, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/7121c9c8b95b9b4ba519af1d02515dff?s=128&d=identicon&r=PG&f=1", "display_name": "mk8efz", "link": "https://stackoverflow.com/users/5199096/mk8efz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4972, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1450913508, "creation_date": 1450904408, "question_id": 34443640, "link": "https://stackoverflow.com/questions/34443640/flask-tutorial-keyerror-database", "title": "Flask Tutorial: KeyError: &#39;DATABASE&#39;", "body": "<p>I've have searched through and tried every solution to this problem that I could find I am still having issues with creating the database in the flask tutorial:</p>\n\n<p><a href=\"http://flask.pocoo.org/docs/0.10/tutorial/dbinit/#tutorial-dbinit\" rel=\"nofollow\">http://flask.pocoo.org/docs/0.10/tutorial/dbinit/#tutorial-dbinit</a></p>\n\n<p>The previous stackoverflow answers to this question centered around changing the path in DATABASE = ... or adding the actual flaskr.db file to the project file (although I am under the impression that sqlite3 should generate it automatically)</p>\n\n<p>I'm using Cloud9 - which runs on ubuntu - so the original /tmp/flaskr.db path should work, yet it does not. </p>\n\n<p>The contents of my project are:</p>\n\n<pre><code>/Flaskr\n  /static\n  /templates\n  flaskr.db \n  flaskr.py\n  schema.sql\n</code></pre>\n\n<p>The contents of flaskr.py:</p>\n\n<pre><code># all the imports\nimport sqlite3\nfrom contextlib import closing\nfrom flask import Flask, request, session, g, redirect, url_for, \\\n abort, render_template, flash\n\napp = Flask(__name__)\napp.config.from_envvar('FLASKR_SETTINGS', silent=True)\n\nDATABASE = '/tmp/flaskr.db'\nDEBUG = True\nSECRET_KEY = 'development key'\nUSERNAME = 'admin'\nPASSWORD = 'default'\n\ndef connect_db():\n    return sqlite3.connect(app.config['DATABASE'])\n\ndef init_db():\n    with closing(connect_db()) as db:\n        with app.open_resource('schema.sql', mode='r') as f:\n            db.cursor().executescript(f.read())\n        db.commit()\n\n\n\nif __name__ == '__main__':\n    app.run()\n</code></pre>\n\n<p>For DATABASE = '' , I have also tried entering direct path:</p>\n\n<pre><code>DATABASE = '/home/ubuntu/workspace/flaskr/flaskr.db'\n</code></pre>\n\n<p>and (yes, I realize these are the same thing)</p>\n\n<pre><code>DATABASE = '/flaskr/flaskr.db'\n</code></pre>\n\n<p>I would also like to note that the flaskr.db file under the flaskr project was not originally there - but I added while I was troubleshooting to see if I could provide it's direct path. </p>\n\n<p>The error I get is:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"flaskr.py\", line 28, in init_db\n    with closing(connect_db()) as db:\n  File \"flaskr.py\", line 25, in connect_db\n    return sqlite3.connect(app.config['DATABASE'])\nKeyError: 'DATABASE'\n</code></pre>\n\n<p>Again, I'm using Cloud9 runs on a Unix OS</p>\n"}, {"tags": ["python", "parsing", "python-3.x", "html-parsing", "wikipedia"], "comments": [{"owner": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "edited": false, "score": 2, "creation_date": 1450904646, "post_id": 34443629, "comment_id": 56629085, "body": "Before you attack wikipedia&#39;s servers with requests, you do know that you can download <i>all</i> of the data for offline usage? <a href=\"https://en.m.wikipedia.org/wiki/Wikipedia:Database_download\" rel=\"nofollow noreferrer\">en.m.wikipedia.org/wiki/Wikipedia:Database_download</a>"}, {"owner": {"reputation": 141, "user_id": 3993333, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/78b4a0eb81fe78ce4a5ce697e2bb95d8?s=128&d=identicon&r=PG&f=1", "display_name": "Lila", "link": "https://stackoverflow.com/users/3993333/lila"}, "reply_to_user": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "edited": false, "score": 0, "creation_date": 1450949834, "post_id": 34443629, "comment_id": 56642662, "body": "Thanks for the tip. But that doesn&#39;t answer my question :)"}], "owner": {"reputation": 141, "user_id": 3993333, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/78b4a0eb81fe78ce4a5ce697e2bb95d8?s=128&d=identicon&r=PG&f=1", "display_name": "Lila", "link": "https://stackoverflow.com/users/3993333/lila"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1450904345, "creation_date": 1450904345, "question_id": 34443629, "link": "https://stackoverflow.com/questions/34443629/wikipedia-parsing-with-python-saving-the-nodes-in-edges-file", "title": "wikipedia parsing with python - saving the nodes in .edges file", "body": "<p>So I have this python code with which I get 1000 nodes from wikipedia page, in three depths, 10 nodes from every page.</p>\n\n<pre><code>import urllib.request as urllib2\nhtml = urllib2.urlopen('https://en.wikipedia.org/wiki/Computer_science').read()\nfrom bs4 import BeautifulSoup\nsoup = BeautifulSoup(html, \"lxml\")\n\n#first depth = list1\n\nfor link in soup.find_all('a', href=True, title=True)[:10]:\n        print(link['href'])\n\n    #second depth = list2\n    sub_html = urllib2.urlopen('https://en.wikipedia.org' + link['href'])\n    sub_soup = BeautifulSoup(sub_html, \"lxml\")\n    for sub_link in sub_soup.find_all('a', href=True, title=True)[:10]:\n        print(sub_link['href'])\n\n        #third depth = list3\n        sub_sub_html = urllib2.urlopen('https://en.wikipedia.org' + link['href'])\n        sub_sub_soup = BeautifulSoup(sub_sub_html, \"lxml\")\n        for sub2_link in sub_sub_soup.find_all('a', href=True, title=True)[:10]:\n            print(sub2_link['href'])\n</code></pre>\n\n<p>Next I need to save all the nodes in an edges file. I in the form:</p>\n\n<p>\"edge_from_list1\",\"edge_from_list2\";</p>\n\n<p>\"edge_from_list1\",\"edge_from_list2\";</p>\n\n<p>.......</p>\n\n<p>\"edge_from_list2\",\"edge_from_list3\"</p>\n\n<p>\"edge_from_list2\",\"edge_from_list3\"</p>\n\n<p>......</p>\n\n<p>Can anyone give me a hint how can I do that?</p>\n"}, {"tags": ["python", "python-2.7", "encryption", "aes", "pkcs#7"], "comments": [{"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "edited": false, "score": 1, "creation_date": 1450904781, "post_id": 34443523, "comment_id": 56629146, "body": "The AESCipher, <code>aes</code>, holds state which is mutated by the string it encrypts -- after all, the last encrypted block is used to encrypt the next block.  So to decrypt, you need to reset the AESCipher with the same <code>iv</code> initialization value as it started with."}], "owner": {"reputation": 31, "user_id": 5712498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0lC2nNtjmV8/AAAAAAAAAAI/AAAAAAAAAlY/MegAGvL9Rfk/photo.jpg?sz=128", "display_name": "Brian &#211;", "link": "https://stackoverflow.com/users/5712498/brian-%c3%93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "closed_date": 1450904453, "answer_count": 0, "score": 3, "last_activity_date": 1450903862, "creation_date": 1450903862, "question_id": 34443523, "link": "https://stackoverflow.com/questions/34443523/pycrypto-aes-decryption-weirdness-python-2-7", "closed_reason": "Duplicate", "title": "PyCrypto AES decryption weirdness - python 2.7", "body": "<p>I'm encrypting files with AES using PyCrypto, but when I decrypt them they have garbage characters at the head of the file. Here's a stripped down example that encrypts a text file of Moby Dick and then attempts to decrypt it:</p>\n\n<pre><code>from Crypto.Cipher import AES\nfrom os import urandom\n\nkey = urandom(32)\niv = urandom(16)\naes = AES.new(key, AES.MODE_CBC, iv)\n\ndef encrypt_data(chunk):\n    padding = AES.block_size\n    if len(chunk):\n        padding = AES.block_size - (len(chunk) % AES.block_size)\n    return aes.encrypt(chunk + chr(padding)*padding)\n\nwith open('melville-moby-106.txt', 'r') as infile:\n    with open('/tmp/test.tmp', 'w') as outfile:\n        chunk = infile.read()\n        while chunk:\n            outfile.write(encrypt_data(chunk))\n            chunk = infile.read()\n\n\nwith open('/tmp/test.tmp', 'r') as infile:\n    with open('melville-moby-106.txt.new', 'w') as outfile:\n        chunk = infile.read()\n        while chunk:\n            data = aes.decrypt(chunk)\n            data = data[0:-ord(data[-1])]\n            outfile.write(data)\n            chunk = infile.read()\n</code></pre>\n\n<p>After I've run the script, I have these files:</p>\n\n<pre><code>-rw-rw-r--  1 brian  brian  1223687 Dec 23 15:11 melville-moby-106.txt\n-rw-rw-r--  1 brian  brian  1223687 Dec 23 15:40 melville-moby-106.txt.new\n-rw-rw-r--  1 brian  brian  1223696 Dec 23 15:40 test.tmp\n</code></pre>\n\n<p>The size looks right, but the checksums don't match:</p>\n\n<pre><code>96e829710ef8966d6eaef34b439cae6b  melville-moby-106.txt\n94b94e495d449dad919083029a66b675  melville-moby-106.txt.new\n</code></pre>\n\n<p>If I look at the files, here's what I see:</p>\n\n<pre><code>$ head -n 1 melville-moby-106.txt\nc                                      1851\n\n$ head -n 1 melville-moby-106.txt.new \nZ\ufffdx#8i\ufffd\ufffd\ufffd[\ufffd\ufffd`j\ufffd6                       1851\n</code></pre>\n\n<p>The rest of the file's contents look OK.</p>\n\n<p>Can someone tell me what I'm doing wrong?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "blackjack"], "comments": [{"owner": {"reputation": 27354, "user_id": 948550, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YWVjs.jpg?s=128&g=1", "display_name": "Reut Sharabani", "link": "https://stackoverflow.com/users/948550/reut-sharabani"}, "edited": false, "score": 0, "creation_date": 1450903902, "post_id": 34443485, "comment_id": 56628757, "body": "A function is usually a piece of code that is supposed to do a specific thing. What does <code>get_card</code> do (in your own words)? did you note that it is recursive?"}, {"owner": {"reputation": 2535, "user_id": 365580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b6a66e5c9d45efe58ead78f1c55b4d5?s=128&d=identicon&r=PG", "display_name": "Doody P", "link": "https://stackoverflow.com/users/365580/doody-p"}, "edited": false, "score": 0, "creation_date": 1450904302, "post_id": 34443485, "comment_id": 56628923, "body": "explain more about what you are trying to achieve and what exactly is the problem (expected behaviour vs observed)"}, {"owner": {"reputation": 516, "user_id": 5600930, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/GLe89.jpg?s=128&g=1", "display_name": "Mint", "link": "https://stackoverflow.com/users/5600930/mint"}, "edited": false, "score": 0, "creation_date": 1450904403, "post_id": 34443485, "comment_id": 56628963, "body": "It simulates taking a random card from the deck. I did have that function broken into 3 functions but i figured it would be better to combine them into one function."}, {"owner": {"reputation": 516, "user_id": 5600930, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/GLe89.jpg?s=128&g=1", "display_name": "Mint", "link": "https://stackoverflow.com/users/5600930/mint"}, "edited": false, "score": 0, "creation_date": 1450904477, "post_id": 34443485, "comment_id": 56628994, "body": "i&#39;m attempting to print all 52 cards."}, {"owner": {"reputation": 2535, "user_id": 365580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b6a66e5c9d45efe58ead78f1c55b4d5?s=128&d=identicon&r=PG", "display_name": "Doody P", "link": "https://stackoverflow.com/users/365580/doody-p"}, "edited": false, "score": 0, "creation_date": 1450904554, "post_id": 34443485, "comment_id": 56629039, "body": "well, when I run it, it fails on this line <code>self.cardKey=random.sample(self.suitDict,1)</code>. because self.suitDict is already empty."}, {"owner": {"reputation": 516, "user_id": 5600930, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/GLe89.jpg?s=128&g=1", "display_name": "Mint", "link": "https://stackoverflow.com/users/5600930/mint"}, "edited": false, "score": 0, "creation_date": 1450904872, "post_id": 34443485, "comment_id": 56629183, "body": "that&#39;s what i thought, i need to figure out how to remove the dictionary once it becomes empty. Is there a method to get the number of keys or values stored in a dictionary? *found it, the len() function should do (="}], "answers": [{"comments": [{"owner": {"reputation": 516, "user_id": 5600930, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/GLe89.jpg?s=128&g=1", "display_name": "Mint", "link": "https://stackoverflow.com/users/5600930/mint"}, "edited": false, "score": 0, "creation_date": 1450906357, "post_id": 34443834, "comment_id": 56629779, "body": "This prints each card but the last ones are duplicated?"}], "tags": [], "owner": {"reputation": 2535, "user_id": 365580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b6a66e5c9d45efe58ead78f1c55b4d5?s=128&d=identicon&r=PG", "display_name": "Doody P", "link": "https://stackoverflow.com/users/365580/doody-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1450905291, "creation_date": 1450905291, "answer_id": 34443834, "question_id": 34443485, "link": "https://stackoverflow.com/questions/34443485/python-blackjack-game/34443834#34443834", "title": "Python BlackJack game -", "body": "<p>Well this answer just fixes the specific problem you're facing which is not getting all the cards from your deck. I made the minimum required changes to just make your program work. You should how ever try to make the design and code cleaner.</p>\n\n<p>This is the code:</p>\n\n<pre><code>import random\n\nclass Deck(object):\n\n    def __init__(self,deck={},suit=[],suitDict={},cardValue=0,cardKey={}):\n        self.deck=deck\n        self.suit=suit\n        self.suitDict=suitDict\n        self.cardValue=cardValue\n        self.cardKey=cardKey\n\n    def create_deck(self):\n\n        spades={'Ace':[1,10,11],2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,'Jack':10,'Queen':10,'King':10}\n        hearts={'Ace':[1,10,11],2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,'Jack':10,'Queen':10,'King':10}\n        diamonds={'Ace':[1,10,11],2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,'Jack':10,'Queen':10,'King':10}\n        clubs={'Ace':[1,10,11],2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,'Jack':10,'Queen':10,'King':10}\n        self.deck={'Spades':spades,'Clubs':clubs,'Hearts':hearts,'Diamonds':diamonds}\n        print 'Deck Created'\n\n    def empty(self):\n        return all(len(suit) == 0 for suit in self.deck.values())\n\n    def get_card(self):\n        while 1:\n            if self.empty():\n                break\n            #gets random suit\n            self.suit=random.sample(self.deck,1)\n            self.suitDict=self.deck[self.suit[0]]\n            if self.suitDict and self.suit[0] in self.deck:\n                #get random key[CARD]\n                self.cardKey=random.sample(self.suitDict,1)\n                if self.cardKey[0] in self.suitDict:\n                    #get card value\n                    self.cardValue=self.deck[self.suit[0]].pop(self.cardKey[0])\n                    break\n                else:\n                    self.get_card()\n            else:\n                self.get_card()\n\n    def return_hand(self):\n        self.get_card()\n        return [self.suit,self.cardKey,self.cardValue]\n\nd=Deck()\nd.create_deck()\nx = 52\n\nwhile x!=0:\n    print d.return_hand()\n    x-=1\n</code></pre>\n\n<p>I suggest you run a diff between this and your code to see exactly what has changed.</p>\n\n<p>Basically:</p>\n\n<ul>\n<li>I added an \"empty()\" boolean function that checks if there aren't any cards left in the deck</li>\n<li>I checked each time you choose a new card that the chosen <code>self.suitDict</code> is not empty before trying to randomly choose a chard from it.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 516, "user_id": 5600930, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/GLe89.jpg?s=128&g=1", "display_name": "Mint", "link": "https://stackoverflow.com/users/5600930/mint"}, "is_accepted": false, "score": 0, "last_activity_date": 1451606089, "creation_date": 1451606089, "answer_id": 34552531, "question_id": 34443485, "link": "https://stackoverflow.com/questions/34443485/python-blackjack-game/34552531#34552531", "title": "Python BlackJack game -", "body": "<p>i figured it out [=</p>\n\n<pre><code>import random\n\nclass Deck(object):\n\ndef __init__(self,deck={}):\n    self.deck=deck\n\ndef create_deck(self):\n\n    spades={'Ace':[1,10,11],2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,'Jack':10,'Queen':10,'King':10}\n    hearts={'Ace':[1,10,11],2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,'Jack':10,'Queen':10,'King':10}\n    diamonds={'Ace':[1,10,11],2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,'Jack':10,'Queen':10,'King':10}\n    clubs={'Ace':[1,10,11],2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,'Jack':10,'Queen':10,'King':10}\n    self.deck{'Spades':spades,'Clubs':clubs,'Hearts':hearts,'Diamonds':diamonds}\n\ndef get_card(self):\n\n    while True:\n        #picks random suit from deck // picks random key from deck dict.\n        #returns card attr. in a tuple\n        suit=random.choice(self.deck.keys())\n        if len(self.deck[suit]) &gt; 0:\n            #picks random card from suit \n            card=random.sample(self.deck[suit],1)\n            cardValue=self.deck[suit].pop(card[0])\n            return (suit,card,cardValue)\n        else:\n            #deletes empty suit from deck.      \n            del self.deck[suit]\n</code></pre>\n\n<p>and then this will print out all cards randomly:</p>\n\n<pre><code>deck=Deck()\ndeck.create_deck()\nfor i in range(52):\n    print i,deck.get_card()\n</code></pre>\n"}], "owner": {"reputation": 516, "user_id": 5600930, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/GLe89.jpg?s=128&g=1", "display_name": "Mint", "link": "https://stackoverflow.com/users/5600930/mint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1451606089, "creation_date": 1450903702, "question_id": 34443485, "link": "https://stackoverflow.com/questions/34443485/python-blackjack-game", "title": "Python BlackJack game -", "body": "<p>i want to print all cards in the deck (randomly). The program runs and prints up to 48 cards (prints different amount every time program is executed). i suspect my problem lies within the get_card() function. this is my first program so please be nice (=</p>\n\n<pre><code>import random\n\nclass Deck(object):\n\n    def __init__(self,deck={},suit=[],suitDict={},cardValue=0,cardKey={}):\n        self.deck=deck\n        self.suit=suit\n        self.suitDict=suitDict\n        self.cardValue=cardValue\n        self.cardKey=cardKey\n\n    def create_deck(self):\n\n        spades={'Ace':[1,10,11],2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,'Jack':10,'Queen':10,'King':10}\n        hearts={'Ace':[1,10,11],2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,'Jack':10,'Queen':10,'King':10}\n        diamonds={'Ace':[1,10,11],2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,'Jack':10,'Queen':10,'King':10}\n        clubs={'Ace':[1,10,11],2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,'Jack':10,'Queen':10,'King':10}\n        self.deck={'Spades':spades,'Clubs':clubs,'Hearts':hearts,'Diamonds':diamonds}\n        print 'Deck Created'\n\n    def get_card(self):\n        while 1:\n            #gets random suit\n            self.suit=random.sample(self.deck,1)\n            self.suitDict=self.deck[self.suit[0]]\n            if self.suit[0] in self.deck:\n                #get random key[CARD]\n                self.cardKey=random.sample(self.suitDict,1)\n                if self.cardKey[0] in self.suitDict:\n                    #get card value\n                    self.cardValue=self.deck[self.suit[0]].pop(self.cardKey[0])\n                    break\n                else:\n                    self.get_card()\n            else:\n                self.get_card()\n    def return_hand(self):\n        self.get_card()\n        return [self.suit,self.cardKey,self.cardValue]\n\n\n\n\nd=Deck()\nd.create_deck()\nx = 52\n\nwhile x!=0:\n    print d.return_hand()\n    x-=1\n</code></pre>\n"}, {"tags": ["python", "apache-spark", "pyspark"], "answers": [{"comments": [{"owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "edited": false, "score": 2, "creation_date": 1450916098, "post_id": 34443534, "comment_id": 56633260, "body": "You&#39;re right about the direct reason but it is a different issue than a JIRA you&#39;ve linked. Ignoring pickling issue it is pretty much the same problem as I&#39;ve described <a href=\"http://stackoverflow.com/q/31684842/1560062\">here</a>. Since DataFrame is just a wrapper around JVM object it cannot be accessed from PySpark action / transformation. But it would work just fine in Scala."}], "tags": [], "owner": {"reputation": 2869, "user_id": 845800, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cbfea1988a826b337d2572dc41c4e2cd?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/845800/paul"}, "is_accepted": true, "score": 14, "last_activity_date": 1450904407, "last_edit_date": 1450904407, "creation_date": 1450903896, "answer_id": 34443534, "question_id": 34443475, "link": "https://stackoverflow.com/questions/34443475/spark-getnewargs-error/34443534#34443534", "title": "Spark __getnewargs__ error", "body": "<p>The error is caused by the reference to <code>ex.columns</code> in the <code>.map(lambda...)</code> statement. You can't have references to an RDD inside the function being used in an RDD transformation. Spark is <a href=\"https://issues.apache.org/jira/browse/SPARK-5063\" rel=\"noreferrer\">supposed to issue more helpful errors in this case</a>, but apparently that didn't make it into this version.</p>\n\n<p>Solution is to replace references with copies of the referenced variables:</p>\n\n<pre><code>def replace_values(row,sub_rules):\n    d = row.asDict()\n    for col,old_val,new_val in sub_rules:\n        if d[col] == old_val:\n            d[col] = new_val      \n    return Row(**d)\nex = sc.parallelize([{'name': 'Alice', 'age': 1},{'name': 'Bob', 'age': 2}])\nex = sqlContext.createDataFrame(ex)\ncols = copy.deepcopy(ex.columns)\n(ex.map(lambda row: replace_values(row,[(col,1,3) for col in cols]))\n    .toDF(schema=ex.schema))\n</code></pre>\n"}], "owner": {"reputation": 2869, "user_id": 845800, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cbfea1988a826b337d2572dc41c4e2cd?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/845800/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7934, "favorite_count": 1, "accepted_answer_id": 34443534, "answer_count": 1, "score": 10, "last_activity_date": 1450904407, "creation_date": 1450903663, "last_edit_date": 1450903913, "question_id": 34443475, "link": "https://stackoverflow.com/questions/34443475/spark-getnewargs-error", "title": "Spark __getnewargs__ error", "body": "<p>I am trying to clean a Spark DataFrame by mapping it to RDD then back to DataFrame. Here's a toy example:</p>\n\n<pre><code>def replace_values(row,sub_rules):\n    d = row.asDict()\n    for col,old_val,new_val in sub_rules:\n        if d[col] == old_val:\n            d[col] = new_val      \n    return Row(**d)\nex = sc.parallelize([{'name': 'Alice', 'age': 1},{'name': 'Bob', 'age': 2}])\nex = sqlContext.createDataFrame(ex)\n(ex.map(lambda row: replace_values(row,[(col,1,3) for col in ex.columns]))\n    .toDF(schema=ex.schema))\n</code></pre>\n\n<p>Running the code above results in a <code>Py4JError</code> with a very long stack trace ending in the following:</p>\n\n<pre><code>Py4JError: An error occurred while calling o801.__getnewargs__. Trace:\npy4j.Py4JException: Method __getnewargs__([]) does not exist\n    at py4j.reflection.ReflectionEngine.getMethod(ReflectionEngine.java:333)\n    at py4j.reflection.ReflectionEngine.getMethod(ReflectionEngine.java:342)\n    at py4j.Gateway.invoke(Gateway.java:252)\n    at py4j.commands.AbstractCommand.invokeMethod(AbstractCommand.java:133)\n    at py4j.commands.CallCommand.execute(CallCommand.java:79)\n    at py4j.GatewayConnection.run(GatewayConnection.java:207)\n    at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n\n<p>What is going on here? How do I fix it? I am using PySpark 1.5.2.</p>\n"}, {"tags": ["python", "shapely"], "comments": [{"owner": {"reputation": 13257, "user_id": 248922, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b55c30cff18b13e2176c1359654ebf1c?s=128&d=identicon&r=PG&f=1", "display_name": "RickyA", "link": "https://stackoverflow.com/users/248922/rickya"}, "edited": false, "score": 3, "creation_date": 1450905315, "post_id": 34443464, "comment_id": 56629352, "body": "I think you can get the vertex (in order) from a Polygon with <code>list(polygon.exterior.coords)</code>"}, {"owner": {"reputation": 3832, "user_id": 1190200, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3ddb16de44c68374a3b7bc386d91ca76?s=128&d=identicon&r=PG", "display_name": "songololo", "link": "https://stackoverflow.com/users/1190200/songololo"}, "reply_to_user": {"reputation": 13257, "user_id": 248922, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b55c30cff18b13e2176c1359654ebf1c?s=128&d=identicon&r=PG&f=1", "display_name": "RickyA", "link": "https://stackoverflow.com/users/248922/rickya"}, "edited": false, "score": 0, "creation_date": 1450945132, "post_id": 34443464, "comment_id": 56640678, "body": "@RickyA is correct, and if you want to do some graph analysis, then I&#39;d suggest reading the vertices into a graph created with a network analysis package such as networkX."}], "owner": {"reputation": 111, "user_id": 5712561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9284e370fc83ad8b3eb9c2639c1fd791?s=128&d=identicon&r=PG", "display_name": "user8960", "link": "https://stackoverflow.com/users/5712561/user8960"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1450903835, "creation_date": 1450903625, "last_edit_date": 1450903835, "question_id": 34443464, "link": "https://stackoverflow.com/questions/34443464/trying-to-get-the-vertex-edge-structure-present-in-a-multipolygon-object-the-s", "title": "Trying to get the vertex-edge structure present in a MultiPolygon object (the &quot;shapely&quot; module in Python)", "body": "<p>Is there an elegant way to get the graph connectivity structure (vertices, edges) for a MultiPolygon object in shapely (python)?</p>\n"}, {"tags": ["python", "windows-8.1", "spyder"], "comments": [{"owner": {"reputation": 5896, "user_id": 5644961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-r4jx_ltcdtA/AAAAAAAAAAI/AAAAAAAAAAA/7RjDfLKZHxg/photo.jpg?sz=128", "display_name": "Copperfield", "link": "https://stackoverflow.com/users/5644961/copperfield"}, "edited": false, "score": 0, "creation_date": 1450905559, "post_id": 34443427, "comment_id": 56629453, "body": "anaconda install python and all its extras in its own folder, so you probably has right now 2 instances of python in your computer the old one and the anaconda one, check in the anaconda folder and you will see yours package in there, to avoid confusion remove the old one..."}, {"owner": {"reputation": 3127, "user_id": 2908528, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Kydf9.jpg?s=128&g=1", "display_name": "Naseer", "link": "https://stackoverflow.com/users/2908528/naseer"}, "reply_to_user": {"reputation": 5896, "user_id": 5644961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-r4jx_ltcdtA/AAAAAAAAAAI/AAAAAAAAAAA/7RjDfLKZHxg/photo.jpg?sz=128", "display_name": "Copperfield", "link": "https://stackoverflow.com/users/5644961/copperfield"}, "edited": false, "score": 0, "creation_date": 1450905806, "post_id": 34443427, "comment_id": 56629549, "body": "@Copperfield which one  to delete I got Python 27 and Python34 in my C: drive?"}, {"owner": {"reputation": 5896, "user_id": 5644961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-r4jx_ltcdtA/AAAAAAAAAAI/AAAAAAAAAAA/7RjDfLKZHxg/photo.jpg?sz=128", "display_name": "Copperfield", "link": "https://stackoverflow.com/users/5644961/copperfield"}, "edited": false, "score": 0, "creation_date": 1450905966, "post_id": 34443427, "comment_id": 56629613, "body": "delete the python in the folder C:\\Python27  and/or only use the python in the folder C:*********\\Anaconda3"}, {"owner": {"reputation": 5896, "user_id": 5644961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-r4jx_ltcdtA/AAAAAAAAAAI/AAAAAAAAAAA/7RjDfLKZHxg/photo.jpg?sz=128", "display_name": "Copperfield", "link": "https://stackoverflow.com/users/5644961/copperfield"}, "edited": false, "score": 0, "creation_date": 1450906578, "post_id": 34443427, "comment_id": 56629879, "body": "I also install anaconda without removing my other python and just in case I modify my global PATH variable removing all references to C:\\Python 27 and C:\\Python 35 and instead put in its place the references to C:\\Anaconda3 from my local PATH, making it my default python and with that I can use normally all its cool stuff"}], "owner": {"reputation": 3127, "user_id": 2908528, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Kydf9.jpg?s=128&g=1", "display_name": "Naseer", "link": "https://stackoverflow.com/users/2908528/naseer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1450904107, "creation_date": 1450903471, "last_edit_date": 1450904107, "question_id": 34443427, "link": "https://stackoverflow.com/questions/34443427/python-is-not-getting-the-path-of-the-installation-directory-of-anaconda", "title": "Python is NOT getting the path of the installation directory of Anaconda?", "body": "<p>I am trying to use the package unicodecsv and have installed anaconda already on my system.\nI did following</p>\n\n<pre><code>C:\\Python27\\lib\\site-packages\\xy&gt;conda install unicodecsv\nFetching package metadata: ....\nSolving package specifications: ........................\n# All requested packages already installed.\n# packages in environment at C:\\*********\\Anaconda3:\n#\nunicodecsv                0.14.1                   py35_0 \n</code></pre>\n\n<p>Why I am still not being able to import unicodecsv in my python editor?</p>\n"}, {"tags": ["python", "html", "django"], "answers": [{"comments": [{"owner": {"reputation": 813, "user_id": 3676943, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0536a6e66d7fe6c812d5221ef58ec023?s=128&d=identicon&r=PG&f=1", "display_name": "user3676943", "link": "https://stackoverflow.com/users/3676943/user3676943"}, "edited": false, "score": 0, "creation_date": 1450907818, "post_id": 34443951, "comment_id": 56630455, "body": "I followed your suggestion and I tried this:      from django.conf.urls import url     from django.contrib import admin          from . import views     urlpatterns = [         url(r&#39;^admin/&#39;, admin.site.urls),         url(r&#39;^index.html$&#39;, views.index, name=&#39;index&#39;),     ]  I saw this response in my browser:      TemplateDoesNotExist at /index.html          index.html          Request Method: \tGET     Request URL: \t<a href=\"http://lh:8000/index.html\" rel=\"nofollow noreferrer\">lh:8000/index.html</a>     Django Version: \t1.9     Exception Type: \tTemplateDoesNotExist     Exception Value:"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "reply_to_user": {"reputation": 813, "user_id": 3676943, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0536a6e66d7fe6c812d5221ef58ec023?s=128&d=identicon&r=PG&f=1", "display_name": "user3676943", "link": "https://stackoverflow.com/users/3676943/user3676943"}, "edited": false, "score": 0, "creation_date": 1450908682, "post_id": 34443951, "comment_id": 56630820, "body": "Well, my suggestion was <i>not</i> to do that, but never mind. You should show the TEMPLATES section of your settings; also it looks like your templates directory is one level too deep, it should be in the base dj10 directory."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "reply_to_user": {"reputation": 813, "user_id": 3676943, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0536a6e66d7fe6c812d5221ef58ec023?s=128&d=identicon&r=PG&f=1", "display_name": "user3676943", "link": "https://stackoverflow.com/users/3676943/user3676943"}, "edited": false, "score": 0, "creation_date": 1450909297, "post_id": 34443951, "comment_id": 56631066, "body": "Also note, if all you want to do is display the static text &quot;hello&quot;, there&#39;s no reason for a template at all; just do <code>return HttpResponse(&#39;hello&#39;)</code> in your view."}, {"owner": {"reputation": 813, "user_id": 3676943, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0536a6e66d7fe6c812d5221ef58ec023?s=128&d=identicon&r=PG&f=1", "display_name": "user3676943", "link": "https://stackoverflow.com/users/3676943/user3676943"}, "edited": false, "score": 0, "creation_date": 1450913849, "post_id": 34443951, "comment_id": 56632656, "body": "I agree that ~/dj10/dj10/templates/ looks too deep. But when I ran  django-admin startproject dj10 django gave me this: ~/dj10/dj10/ Based on what I read in the tutorial, I should put my code in ~/dj10/dj10/."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "reply_to_user": {"reputation": 813, "user_id": 3676943, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0536a6e66d7fe6c812d5221ef58ec023?s=128&d=identicon&r=PG&f=1", "display_name": "user3676943", "link": "https://stackoverflow.com/users/3676943/user3676943"}, "edited": false, "score": 0, "creation_date": 1450914308, "post_id": 34443951, "comment_id": 56632773, "body": "Yes, that&#39;s where the project settings and urls live. But you shouldn&#39;t create new files or directories in there - everything else should be one level higher, ie as siblings to that directory not children of it."}, {"owner": {"reputation": 813, "user_id": 3676943, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0536a6e66d7fe6c812d5221ef58ec023?s=128&d=identicon&r=PG&f=1", "display_name": "user3676943", "link": "https://stackoverflow.com/users/3676943/user3676943"}, "edited": false, "score": 0, "creation_date": 1450914514, "post_id": 34443951, "comment_id": 56632833, "body": "The purpose of my post is to find a way to SIMPLY serve index.html , I dont want to know how to serve a string.   Also I already know how to serve index.html from a clone of the polls tutorial.  That tutorial suggests I need to run this shell command:  python manage.py startapp polls  If I want to serve just 1 page do I need to run startapp?  It appears that django-admin startproject lays down a lot of code.  Is that code enough to serve a simple index.html if I configure these files:  settings.py urls.py views.py ??"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "reply_to_user": {"reputation": 813, "user_id": 3676943, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0536a6e66d7fe6c812d5221ef58ec023?s=128&d=identicon&r=PG&f=1", "display_name": "user3676943", "link": "https://stackoverflow.com/users/3676943/user3676943"}, "edited": false, "score": 0, "creation_date": 1450915253, "post_id": 34443951, "comment_id": 56633026, "body": "I don&#39;t know why you&#39;ve said all that, I told you what the problem is. Nevertheless Django is really meant for generating complex data driven sites; it is not for serving static content. If you want that you should just configure a standard web server line Apache or nginx."}], "tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": false, "score": 0, "last_activity_date": 1450905873, "creation_date": 1450905873, "answer_id": 34443951, "question_id": 34443417, "link": "https://stackoverflow.com/questions/34443417/how-to-simply-serve-index-html-with-django/34443951#34443951", "title": "How to SIMPLY serve index.html with django?", "body": "<p>I don't understand why you want to specifically serve the url \"index.html\". You have configured Django to serve that HTML file in response to the path \"/\", which is the correct thing to do. There is no reason to use the template name in the path, and it is much better practice not to do so.</p>\n\n<p>If you really did want to do this for some reason, you would need to specify that exact file path in your urls.py:</p>\n\n<pre><code> url(r'^index.html$', views.index, name='index'),\n</code></pre>\n\n<p>but as I say, you should not do this.</p>\n"}, {"tags": [], "owner": {"reputation": 813, "user_id": 3676943, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0536a6e66d7fe6c812d5221ef58ec023?s=128&d=identicon&r=PG&f=1", "display_name": "user3676943", "link": "https://stackoverflow.com/users/3676943/user3676943"}, "is_accepted": true, "score": 0, "last_activity_date": 1451615147, "creation_date": 1451615147, "answer_id": 34553102, "question_id": 34443417, "link": "https://stackoverflow.com/questions/34443417/how-to-simply-serve-index-html-with-django/34553102#34553102", "title": "How to SIMPLY serve index.html with django?", "body": "<p>It is very easy to SIMPLY serve index.html with Django:</p>\n\n<pre><code>git clone https://github.com/heroku/python-getting-started dj101\ncd dj101\nvi hello/templates/index.html\npip install -r requirements.txt\ngit commit -am hello\nheroku local\nheroku create dj101\ngit push heroku master\n</code></pre>\n"}], "owner": {"reputation": 813, "user_id": 3676943, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0536a6e66d7fe6c812d5221ef58ec023?s=128&d=identicon&r=PG&f=1", "display_name": "user3676943", "link": "https://stackoverflow.com/users/3676943/user3676943"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1370, "favorite_count": 0, "accepted_answer_id": 34553102, "answer_count": 2, "score": 0, "last_activity_date": 1451615147, "creation_date": 1450903414, "question_id": 34443417, "link": "https://stackoverflow.com/questions/34443417/how-to-simply-serve-index-html-with-django", "title": "How to SIMPLY serve index.html with django?", "body": "<p>sof,</p>\n\n<p>I just installed django 1.9 on my ubuntu box.</p>\n\n<p>I want to deploy a lightweight django app.</p>\n\n<p>I did this:</p>\n\n<pre><code>cd ~\ndjango-admin startproject dj10\ncd ~/dj10/dj10/\nmkdir templates\necho hello &gt; templates/index.html\n</code></pre>\n\n<p>How to configure\n<code>~/dj10/dj10/</code>\nso that django will serve <code>~/dj10/dj10/templates/index.html</code>\nwhen I GET <code>/index.html</code>\n??</p>\n\n<p>I tried editing <code>~/dj10/dj10/urls.py</code> so it looks like this:</p>\n\n<pre><code>from django.conf.urls import url\nfrom django.contrib import admin\n\nfrom . import views\n\nurlpatterns = [\n    url(r'^admin/', admin.site.urls),\n    url(r'^$', views.index, name='index'),\n]\n</code></pre>\n\n<p>Then I added this file:</p>\n\n<pre><code>~/dj10/dj10/views.py\n</code></pre>\n\n<p>which looks like this:</p>\n\n<pre><code>from django.shortcuts import render\n\ndef index(request):\n    context = {}\n    return render(request, 'index.html', context)\n</code></pre>\n\n<p>Next I started the server:</p>\n\n<pre><code>cd ~/dj10/\npython manage.py runserver\n</code></pre>\n\n<p>Here is what I want to happen.</p>\n\n<ul>\n<li>Browswer GETs <code>/index.html</code></li>\n<li><code>~/dj10/dj10/urls.py</code> matches <code>/index.html</code> to <code>views.index</code></li>\n<li>python runs <code>index()</code> inside of <code>views.py</code></li>\n<li><code>index()</code> finds <code>index.html</code> here: <code>~/dj10/dj10/templates/index.html</code></li>\n<li><code>index()</code> renders <code>index.html</code></li>\n</ul>\n\n<p>Instead I see this:</p>\n\n<pre><code>Page not found (404)\nRequest Method:     GET\nRequest URL:    http://lh:8000/index.html\n\nUsing the URLconf defined in dj10.urls, Django tried these URL patterns, in this order:\n    ^admin/\n    ^$ [name='index']\nThe current URL, index.html, didn't match any of these.\n</code></pre>\n\n<p>So, I probably have a syntax error in either <code>urls.py</code> or <code>views.py</code>?\nMaybe I should add some syntax to ... \n<code>~/dj10/dj10/settings.py</code>\n??</p>\n\n<p>Here is the question again:</p>\n\n<p>How to configure\n<code>~/dj10/dj10/</code>\nso that django will serve <code>~/dj10/dj10/templates/index.html</code>\nwhen I GET <code>/index.html</code>\n??</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "is_accepted": true, "score": 4, "last_activity_date": 1450903335, "creation_date": 1450903335, "answer_id": 34443399, "question_id": 34443349, "link": "https://stackoverflow.com/questions/34443349/when-is-getattr-not-like-normal-attribute-access/34443399#34443399", "title": "When is getattr() not like normal attribute access?", "body": "<p>According to the <a href=\"https://docs.python.org/2/library/functions.html#getattr\" rel=\"nofollow\">documentation</a>, they are equivalent (unless a third argument is provided to suppress the <code>AttributeError</code> when the attribute is not present).</p>\n\n<blockquote>\n  <p>Return the value of the named attribute of object. <em>name</em> must be a string. If the string is the name of one of the object\u2019s attributes, the result is the value of that attribute. <strong>For example, <code>getattr(x, 'foobar')</code> is equivalent to <code>x.foobar</code>.</strong> If the named attribute does not exist, default is returned if provided, otherwise <code>AttributeError</code> is raised.</p>\n</blockquote>\n\n<p>I can't think of many reasons to prefer <code>getattr</code> over normal dot notation here . . . The only time I can think where I might be tempted to use the former is if I was trying to prevent my linter from complaining about <code>protected-access</code> (which is probably best disabled with a pragma if you have a legitimate reason for doing it). . .</p>\n"}, {"comments": [{"owner": {"reputation": 31371, "user_id": 281108, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b160d50a7ecfe6018348629cb8677538?s=128&d=identicon&r=PG", "display_name": "Ismail Badawi", "link": "https://stackoverflow.com/users/281108/ismail-badawi"}, "edited": false, "score": 3, "creation_date": 1450904105, "post_id": 34443435, "comment_id": 56628838, "body": "That&#39;s not quite the same -- the original function will preserve a value of <code>None</code>, but your version will replace it with <code>&#39;something&#39;</code>."}], "tags": [], "owner": {"reputation": 118519, "user_id": 244297, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0e726125e86b084ffec695e845b360b7?s=128&d=identicon&r=PG", "display_name": "Eugene Yarmash", "link": "https://stackoverflow.com/users/244297/eugene-yarmash"}, "is_accepted": false, "score": 2, "last_activity_date": 1450910580, "last_edit_date": 1450910580, "creation_date": 1450903504, "answer_id": 34443435, "question_id": 34443349, "link": "https://stackoverflow.com/questions/34443349/when-is-getattr-not-like-normal-attribute-access/34443435#34443435", "title": "When is getattr() not like normal attribute access?", "body": "<p>These are equivalent, however <code>getattr</code> can take an optional default value to be returned when the attribute does not exist, e.g.</p>\n\n<p><code>getattr(self, '_attribute', None)</code></p>\n\n<p>Thus, the second function can alternatively be written without try/catch (assuming <code>self._attribute</code> can't be <code>None</code>):</p>\n\n<pre><code>def get_foo(self):\n    attr = getattr(self, '_attribute', None)\n    if attr is None:\n        self._attribute = 'something'\n    return attr\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8069, "user_id": 296923, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/cb7b3af2d2d967711454dc8d9c21798f?s=128&d=identicon&r=PG", "display_name": "Ziffusion", "link": "https://stackoverflow.com/users/296923/ziffusion"}, "edited": false, "score": 0, "creation_date": 1450905155, "post_id": 34443634, "comment_id": 56629301, "body": "bravo! (here are &gt; 9 more characters)"}, {"owner": {"reputation": 118519, "user_id": 244297, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0e726125e86b084ffec695e845b360b7?s=128&d=identicon&r=PG", "display_name": "Eugene Yarmash", "link": "https://stackoverflow.com/users/244297/eugene-yarmash"}, "edited": false, "score": 0, "creation_date": 1450909370, "post_id": 34443634, "comment_id": 56631097, "body": "How do we &#39;note that there is one more stack frame&#39; ? <code>print(len(calframe))</code> seems to output <code>3</code> in both cases."}], "tags": [], "owner": {"reputation": 4763, "user_id": 2329988, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b9ab817073f9499496b464905713e6a3?s=128&d=identicon&r=PG", "display_name": "en_Knight", "link": "https://stackoverflow.com/users/2329988/en-knight"}, "is_accepted": false, "score": 2, "last_activity_date": 1450905960, "last_edit_date": 1450905960, "creation_date": 1450904379, "answer_id": 34443634, "question_id": 34443349, "link": "https://stackoverflow.com/questions/34443349/when-is-getattr-not-like-normal-attribute-access/34443634#34443634", "title": "When is getattr() not like normal attribute access?", "body": "<p>As the other answers provide, the two are functionally the same thing without the third argument. </p>\n\n<p>One trivial difference is that they do not have the same effect on the stack; this is at best a code-golfy difference, and could only come up in very contrived scenarios (perhaps testing to see if you were in \"debug\" mode and providing different timings, if you were a malicious QA person).</p>\n\n<pre><code>import inspect\n\nclass Foo:\n\n    def __init__(self):\n        self._x = 3\n\n    @property\n    def x(self):\n        curframe = inspect.currentframe()\n        calframe = inspect.getouterframes(curframe, 2)      \n        print(calframe[1][2])\n        return self._x\n\nf = Foo()\ndef bar():\n    print( f.x )    \n    # if instead we use the print statement on the next line,\n    # we note that there is one more stack frame. In no universe\n    # is this particularly impact, but in a closed test case\n    # we would be able to determine which one was being used\n    #print( getattr(f,'x') )\n\nbar()\n</code></pre>\n"}], "owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1939, "favorite_count": 0, "closed_date": 1450985535, "accepted_answer_id": 34443399, "answer_count": 3, "score": 5, "last_activity_date": 1450910580, "creation_date": 1450903130, "question_id": 34443349, "link": "https://stackoverflow.com/questions/34443349/when-is-getattr-not-like-normal-attribute-access", "closed_reason": "Duplicate", "title": "When is getattr() not like normal attribute access?", "body": "<p>Is there any difference between this code, which uses dot notation for attribute access:</p>\n\n<pre><code>def get_foo(self):\n    try:\n        return self._attribute\n    except AttributeError:\n        self._attribute = 'something'\n        return self._attribute\n</code></pre>\n\n<p>And the following code, which uses the <code>getattr</code> function:</p>\n\n<pre><code>def get_foo(self):\n    try:\n        return getattr(self, '_attribute')\n    except AttributeError:\n        self._attribute = 'something'\n        return self._attribute\n</code></pre>\n\n<p>They seem to behave the same way to me, but I came across the latter example in some code and I was curious why one would opt for calling <code>getattr()</code> in this case.</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 10017, "user_id": 301107, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2c87e8db57897b08332340b2c4b508ff?s=128&d=identicon&r=PG", "display_name": "masnun", "link": "https://stackoverflow.com/users/301107/masnun"}, "edited": false, "score": 0, "creation_date": 1450903412, "post_id": 34443346, "comment_id": 56628548, "body": "Show us full codes and error messages"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5659156"}, "reply_to_user": {"reputation": 10017, "user_id": 301107, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2c87e8db57897b08332340b2c4b508ff?s=128&d=identicon&r=PG", "display_name": "masnun", "link": "https://stackoverflow.com/users/301107/masnun"}, "edited": false, "score": 0, "creation_date": 1450903709, "post_id": 34443346, "comment_id": 56628682, "body": "@AbuAshrafMasnun I just posted my full code, I don&#39;t get error message. It just says url field is required if I just leave empty."}, {"owner": {"reputation": 10017, "user_id": 301107, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2c87e8db57897b08332340b2c4b508ff?s=128&d=identicon&r=PG", "display_name": "masnun", "link": "https://stackoverflow.com/users/301107/masnun"}, "edited": false, "score": 0, "creation_date": 1450904068, "post_id": 34443346, "comment_id": 56628825, "body": "have you run migrations/syncdb and restarted the server?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5659156"}, "reply_to_user": {"reputation": 10017, "user_id": 301107, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2c87e8db57897b08332340b2c4b508ff?s=128&d=identicon&r=PG", "display_name": "masnun", "link": "https://stackoverflow.com/users/301107/masnun"}, "edited": false, "score": 0, "creation_date": 1450904299, "post_id": 34443346, "comment_id": 56628921, "body": "same thing....why is this happening url field has null for both..."}, {"owner": {"reputation": 10017, "user_id": 301107, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2c87e8db57897b08332340b2c4b508ff?s=128&d=identicon&r=PG", "display_name": "masnun", "link": "https://stackoverflow.com/users/301107/masnun"}, "edited": false, "score": 0, "creation_date": 1450904362, "post_id": 34443346, "comment_id": 56628942, "body": "Try removing the .pyc files"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5659156"}, "reply_to_user": {"reputation": 10017, "user_id": 301107, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2c87e8db57897b08332340b2c4b508ff?s=128&d=identicon&r=PG", "display_name": "masnun", "link": "https://stackoverflow.com/users/301107/masnun"}, "edited": false, "score": 0, "creation_date": 1450904484, "post_id": 34443346, "comment_id": 56628999, "body": "I don&#39;t have any pyc files...what are they/&gt;"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5659156"}, "edited": false, "score": 0, "creation_date": 1450914655, "post_id": 34444036, "comment_id": 56632864, "body": "Hello, thanks for the solution. There are so many things like that in django, do you know how to fix the first problem I posted?  return urlparse(self.url).netloc if self.url is not None else &quot;d&quot;,,,should return d if url is not inserted but wont return d...."}, {"owner": {"reputation": 5586, "user_id": 3345051, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/100002242913967/picture?type=large", "display_name": "Hybrid", "link": "https://stackoverflow.com/users/3345051/hybrid"}, "edited": false, "score": 0, "creation_date": 1451213515, "post_id": 34444036, "comment_id": 56701092, "body": "That may be because you wrote <code>is not None</code>, and <code>self.url</code> can actually equal <code>&#39;&#39;</code> (an empty string, which is not the same as None). Try <code>return urlparse(self.url).netloc if not self.url else &quot;d&quot;</code>"}], "tags": [], "owner": {"reputation": 5586, "user_id": 3345051, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/100002242913967/picture?type=large", "display_name": "Hybrid", "link": "https://stackoverflow.com/users/3345051/hybrid"}, "is_accepted": false, "score": 0, "last_activity_date": 1450906268, "creation_date": 1450906268, "answer_id": 34444036, "question_id": 34443346, "link": "https://stackoverflow.com/questions/34443346/i-set-url-to-blank-null-but-it-says-url-is-required-field/34444036#34444036", "title": "I set url to blank=null but it says url is required field", "body": "<p>Try changing:</p>\n\n<pre><code>url = forms.URLField(max_length=200,\n                         help_text=\"Please enter the URL of the page.\")\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>url = forms.URLField(max_length=200,\n                     help_text=\"Please enter the URL of the page.\",\n                     required=False)\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5659156"}, "edited": false, "score": 0, "creation_date": 1450915265, "post_id": 34445505, "comment_id": 56633032, "body": "Hello do you know how to fix the first problem I posted? return urlparse(self.url).netloc if self.url is not None else &quot;d&quot;,,,should return d if url is not inserted but wont return d.."}, {"owner": {"reputation": 1324, "user_id": 2299951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CW3GK.jpg?s=128&g=1", "display_name": "zsoobhan", "link": "https://stackoverflow.com/users/2299951/zsoobhan"}, "edited": false, "score": 0, "creation_date": 1450915689, "post_id": 34445505, "comment_id": 56633156, "body": "Try <code>return urlparse(self.url).netloc if self.url else &quot;d&quot;</code>. What is it returning? Is it throwing an error? If so, a stack trace would be useful."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5659156"}, "edited": false, "score": 0, "creation_date": 1450916667, "post_id": 34445505, "comment_id": 56633393, "body": "hmm I tried return urlsplit(urlparse(self.url)).netloc if self.url else &quot;d&quot;, but this gives me error....tried bunch of things...it says invalid syntax...but this is right python no?"}, {"owner": {"reputation": 1324, "user_id": 2299951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CW3GK.jpg?s=128&g=1", "display_name": "zsoobhan", "link": "https://stackoverflow.com/users/2299951/zsoobhan"}, "edited": false, "score": 0, "creation_date": 1450917348, "post_id": 34445505, "comment_id": 56633555, "body": "Why don&#39;t you add the errors you are getting, and any updates you have made to your code (if any), to the original question?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5659156"}, "edited": false, "score": 0, "creation_date": 1450917704, "post_id": 34445505, "comment_id": 56633633, "body": "Thanks for being patience with me, I just edited the code and provided error"}, {"owner": {"reputation": 1324, "user_id": 2299951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CW3GK.jpg?s=128&g=1", "display_name": "zsoobhan", "link": "https://stackoverflow.com/users/2299951/zsoobhan"}, "edited": false, "score": 0, "creation_date": 1450969744, "post_id": 34445505, "comment_id": 56650955, "body": "When you paste the code, it is more helpful to put the whole error. A lot of it might look like garbage but it&#39;s pretty useful for debugging. If you think the syntax is wrong for the inline if statement, try using a normal if statement."}], "tags": [], "owner": {"reputation": 1324, "user_id": 2299951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CW3GK.jpg?s=128&g=1", "display_name": "zsoobhan", "link": "https://stackoverflow.com/users/2299951/zsoobhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1450915078, "creation_date": 1450915078, "answer_id": 34445505, "question_id": 34443346, "link": "https://stackoverflow.com/questions/34443346/i-set-url-to-blank-null-but-it-says-url-is-required-field/34445505#34445505", "title": "I set url to blank=null but it says url is required field", "body": "<p>You are using a ModelForm so should not have to override the url field in your Form. </p>\n\n<pre><code>class PostForm(forms.ModelForm):\n\n    class Meta:\n        model = Post\n        fields = ('title', 'url', 'views', 'content', 'moderator', 'slug', 'objects')\n        widgets = {\n            'content': FroalaEditor(),  # Not sure if this widget is valid\n            'views':forms.HiddenInput()\n        }\n</code></pre>\n\n<p>You can also add your helptext to your models (see <a href=\"https://docs.djangoproject.com/en/1.9/ref/models/fields/#help-text\" rel=\"nofollow\"><code>help_text</code> docs</a>)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5659156"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1450917666, "creation_date": 1450903117, "last_edit_date": 1450917666, "question_id": 34443346, "link": "https://stackoverflow.com/questions/34443346/i-set-url-to-blank-null-but-it-says-url-is-required-field", "title": "I set url to blank=null but it says url is required field", "body": "<p>Edit 1 </p>\n\n<p>Models.py</p>\n\n<pre><code>class Post(models.Model):\n    category = models.ForeignKey(Category)\n    pub_date = models.DateTimeField(auto_now_add = True)\n    title = models.CharField(max_length = 100)\n    content = FroalaField()\n    url = models.URLField(max_length=250, blank=True, null=True)\n    moderator = models.ForeignKey(User)\n    rank_score = models.FloatField(default= 1)\n\n    views = models.IntegerField(default=0)\n    image = models.ImageField(upload_to=\"images\",blank=True, null=True)\n    slug = models.CharField(max_length=100, unique=True)\n\n    objects = models.Manager()            # default manager\n\n    @property\n    def domain(self):\n        return urlparse(urlsplit(self.url)).netloc if self.url else \"a\"\n</code></pre>\n\n<p>Here;s my forms.py  </p>\n\n<pre><code>class PostForm(forms.ModelForm):\n    title = forms.CharField(max_length=128, help_text=\"plz enter\")\n\n    url = forms.URLField(max_length=200,\n                         help_text=\"Please enter the URL of the page.\")\n    views = forms.IntegerField(widget=forms.HiddenInput(), initial=0)\n    content = forms.CharField(widget=FroalaEditor)\n    class Meta:\n        model = Post\n\n        exclude = ['pub_date', 'moderator', 'rank_score', 'image','slug']\n</code></pre>\n\n<p>I get invalid syntax error from here:           return urlparse(urlsplit(self.url)).netloc if self.url else \"a\"</p>\n"}, {"tags": ["python", "decorator", "python-decorators"], "answers": [{"comments": [{"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1450919537, "post_id": 34443272, "comment_id": 56634102, "body": "Both of your example decorators have an extra layer that is only necessary if you want to support passing arguments to the decorator (e.g. <code>@my_decorator(&quot;foo&quot;)</code>). For decorators like the ones in the question that are not being called by the user (just named, e.g. <code>@my_decorator</code>), you don&#39;t need that layer."}, {"owner": {"reputation": 4798, "user_id": 1484957, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9d74c77fa2f3b3b07bc0a955250deef0?s=128&d=identicon&r=PG", "display_name": "drs", "link": "https://stackoverflow.com/users/1484957/drs"}, "reply_to_user": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1450929169, "post_id": 34443272, "comment_id": 56636051, "body": "Thanks, @Blckknght. I believe my example decorators are suited for when the <i>function</i> requires arguments, not the <i>decorator</i> (e.g., <code>func(&quot;foo&quot;)</code>, no?  Either way I admit it isn&#39;t needed for the example in the question, I was just trying to provide the most complete solution in case it was relevant to anyone else."}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 1, "creation_date": 1450952166, "post_id": 34443272, "comment_id": 56643674, "body": "Yeah, they support functions that take arguments, but what I&#39;m, talking about is that <code>@my_decorator</code> won&#39;t work to apply them. Because of the extra layer, you need <code>@my_decorator()</code> (calling the decorator factory, which returns the decorator, which the <code>@</code> syntax calls on the function, returning the inner wrapped function). If you go rid of <code>wrapper</code> in your function version, it would work without the parentheses. The class version is a bit trickier, since not all decorators play nice with methods. You&#39;d probably want <code>__call__</code> to do <code>return lib_decorator(self.func)(*args, **kwargs)</code>."}, {"owner": {"reputation": 4798, "user_id": 1484957, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9d74c77fa2f3b3b07bc0a955250deef0?s=128&d=identicon&r=PG", "display_name": "drs", "link": "https://stackoverflow.com/users/1484957/drs"}, "reply_to_user": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1451075331, "post_id": 34443272, "comment_id": 56674349, "body": "@Blckknght, thanks. This helped make things much more clear for me.  I hadn&#39;t caught the distinction between <code>@my_decorator</code> and <code>@my_decorator()</code> in all of my reading before."}, {"owner": {"reputation": 360, "user_id": 12233973, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EoF3C.jpg?s=128&g=1", "display_name": "c_sagan", "link": "https://stackoverflow.com/users/12233973/c-sagan"}, "edited": false, "score": 0, "creation_date": 1614893563, "post_id": 34443272, "comment_id": 117532332, "body": "How does <code>arg</code> get passed to the <code>lib_decorator</code>?"}], "tags": [], "owner": {"reputation": 4798, "user_id": 1484957, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9d74c77fa2f3b3b07bc0a955250deef0?s=128&d=identicon&r=PG", "display_name": "drs", "link": "https://stackoverflow.com/users/1484957/drs"}, "is_accepted": false, "score": 9, "last_activity_date": 1451598003, "last_edit_date": 1451598003, "creation_date": 1450902777, "answer_id": 34443272, "question_id": 34443271, "link": "https://stackoverflow.com/questions/34443271/how-can-i-extend-a-librarys-decorator/34443272#34443272", "title": "How can I extend a library&#39;s decorator?", "body": "<p>You can incorporate the lib's decorator within yours. For simple, argument-less decorators, it's rather straight-forward:</p>\n\n<pre><code>def my_decorator():\n    @lib_decorator  # &lt;--- Just include the lib's decorator here\n    def inner:\n        func(*args, **kwargs)\n    return inner\n</code></pre>\n\n<hr>\n\n<p>It's a bit trickier for decorators that have arguments.  Just remember that your decorator is replacing the decorated function with the inner-most function. So that's the one you need to decorate.  So if you call your decorator with args, e.g.</p>\n\n<pre><code>@my_decorator(arg)\ndef func():\n    pass\n</code></pre>\n\n<p>Then decorate the inner function with the lib decorator:</p>\n\n<pre><code>def my_decorator(arg):\n    def wrapper(func):\n\n        @lib_decorator  # &lt;--- Just include the lib's decorator here\n        def inner(*args, **kwargs):\n            func(*args, **kwargs)\n\n        return inner\n\n    return wrapper\n</code></pre>\n\n<p>Or, using the <code>class</code> form of the decorator function:</p>\n\n<pre><code>class my_decorator():\n    def __init__(self, arg):\n        pass\n\n    def __call__(self, func):\n        @lib_decorator  # &lt;--- Just include the lib's decorator here\n        def inner(*args, **kwargs):\n            func(*args, **kwargs)\n\n        return inner\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1514, "user_id": 12415339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85de3f73b6e84dc630e925520171d19?s=128&d=identicon&r=PG&f=1", "display_name": "Happy-Monad", "link": "https://stackoverflow.com/users/12415339/happy-monad"}, "edited": false, "score": 0, "creation_date": 1597071628, "post_id": 34466098, "comment_id": 112006799, "body": "I love the function composition approach you showed as it recalls that decorators are indeed function returning functions which can be treated as such without having to use the <code>@something</code> sugar."}], "tags": [], "owner": {"reputation": 53404, "user_id": 2096752, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/B8PLE.jpg?s=128&g=1", "display_name": "shx2", "link": "https://stackoverflow.com/users/2096752/shx2"}, "is_accepted": false, "score": 3, "last_activity_date": 1451074644, "creation_date": 1451074644, "answer_id": 34466098, "question_id": 34443271, "link": "https://stackoverflow.com/questions/34443271/how-can-i-extend-a-librarys-decorator/34466098#34466098", "title": "How can I extend a library&#39;s decorator?", "body": "<p>You can easily transform a decoration like yours:</p>\n\n<pre><code>@my_decorator\n@lib_decorator\ndef func():\n    pass\n</code></pre>\n\n<p>To this simpler decoration, using function composition:</p>\n\n<pre><code>my_composed_decorator = lambda func: my_decorator(lib_decorator(func))\n\n@my_composed_decorator\ndef func():\n    pass\n</code></pre>\n"}], "owner": {"reputation": 4798, "user_id": 1484957, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9d74c77fa2f3b3b07bc0a955250deef0?s=128&d=identicon&r=PG", "display_name": "drs", "link": "https://stackoverflow.com/users/1484957/drs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2424, "favorite_count": 1, "answer_count": 2, "score": 6, "last_activity_date": 1451598003, "creation_date": 1450902777, "last_edit_date": 1451074084, "question_id": 34443271, "link": "https://stackoverflow.com/questions/34443271/how-can-i-extend-a-librarys-decorator", "title": "How can I extend a library&#39;s decorator?", "body": "<p>I would like to extend a library's decorator.  I know that I can just call both decorators:</p>\n\n<pre><code>@my_decorator\n@lib_decorator\ndef func():\n    pass\n</code></pre>\n\n<p>But I would like to avoid having to pass <code>@lib_decorator</code> to each function each time.  I would like my decorator to automatically decorate <code>func()</code> with <code>lib_decorator</code>.  How can I do this?  Can they be nested?</p>\n"}, {"tags": ["python", "beautifulsoup", "python-requests"], "comments": [{"owner": {"reputation": 3336, "user_id": 1269942, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abc009c30029c8f5ccf64388cfb088f9?s=128&d=identicon&r=PG", "display_name": "user1269942", "link": "https://stackoverflow.com/users/1269942/user1269942"}, "edited": false, "score": 0, "creation_date": 1450902492, "post_id": 34443198, "comment_id": 56628138, "body": "what do you want it to return? (update your question!)  (and welcome to SO!)"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5712504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e982313abd91f9d46766bfb181afb2e6?s=128&d=identicon&r=PG&f=1", "display_name": "PythonNoob12345", "link": "https://stackoverflow.com/users/5712504/pythonnoob12345"}, "edited": false, "score": 0, "creation_date": 1450902805, "post_id": 34443230, "comment_id": 56628256, "body": "Excellent, thank you very much introducing me to user agents - will mark solved shortly"}, {"owner": {"reputation": 3336, "user_id": 1269942, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abc009c30029c8f5ccf64388cfb088f9?s=128&d=identicon&r=PG", "display_name": "user1269942", "link": "https://stackoverflow.com/users/1269942/user1269942"}, "edited": false, "score": 0, "creation_date": 1450903197, "post_id": 34443230, "comment_id": 56628442, "body": "nice..beat me by a whisker!"}, {"owner": {"reputation": 1528, "user_id": 8580574, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/912ad5911e696e7aac0ea9ec35d80057?s=128&d=identicon&r=PG&f=1", "display_name": "PEREZje", "link": "https://stackoverflow.com/users/8580574/perezje"}, "edited": false, "score": 0, "creation_date": 1527964808, "post_id": 34443230, "comment_id": 88330092, "body": "I had the exact same problem with the same site, does it matter what kind of user agent I provide?"}, {"owner": {"reputation": 113, "user_id": 3454515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b68c14fac0618588fbd4d7e50766cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Utkarsh Bhushan", "link": "https://stackoverflow.com/users/3454515/utkarsh-bhushan"}, "edited": false, "score": 0, "creation_date": 1597249385, "post_id": 34443230, "comment_id": 112073427, "body": "If you are still facing the same issue, check this post  <a href=\"https://stackoverflow.com/questions/51154114/python-request-get-fails-to-get-an-answer-for-a-url-i-can-open-on-my-browser/51154676\" title=\"python request get fails to get an answer for a url i can open on my browser\">stackoverflow.com/questions/51154114/&hellip;</a>"}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 4, "last_activity_date": 1450902590, "creation_date": 1450902590, "answer_id": 34443230, "question_id": 34443198, "link": "https://stackoverflow.com/questions/34443198/python-requests-not-responding/34443230#34443230", "title": "Python requests not responding", "body": "<p>You need to <em>pretend to be a real user with a browser</em> and provide a <code>User-Agent</code> header:</p>\n\n<pre><code>r = requests.get(\"http://www.transfermarkt.co.uk/championship/marktwerte/wettbewerb/GB2\", headers={\n    \"User-Agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.106 Safari/537.36\"\n})\n</code></pre>\n\n<p>Demo:</p>\n\n<pre><code>&gt;&gt;&gt; from bs4 import BeautifulSoup\n&gt;&gt;&gt; import requests\n&gt;&gt;&gt; \n&gt;&gt;&gt; r = requests.get(\"http://www.transfermarkt.co.uk/championship/marktwerte/wettbewerb/GB2\", headers={\n...     \"User-Agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.106 Safari/537.36\"\n... })\n&gt;&gt;&gt; soup = BeautifulSoup(r.content,\"html.parser\")\n&gt;&gt;&gt; print(soup.title.get_text())\nTop market values 15/16 - Championship - Transfermarkt\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5712504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e982313abd91f9d46766bfb181afb2e6?s=128&d=identicon&r=PG&f=1", "display_name": "PythonNoob12345", "link": "https://stackoverflow.com/users/5712504/pythonnoob12345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1653, "favorite_count": 3, "accepted_answer_id": 34443230, "answer_count": 1, "score": 2, "last_activity_date": 1450902590, "creation_date": 1450902426, "last_edit_date": 1450902568, "question_id": 34443198, "link": "https://stackoverflow.com/questions/34443198/python-requests-not-responding", "title": "Python requests not responding", "body": "<p>Done a few small successful projects, been struggling to get the requests from this website fro ages - any tips?</p>\n\n<p>UPDATE - Would like to get full beautiful soup request so I can start scraping the information from the tables</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport requests\n\nr = requests.get(\"http://www.transfermarkt.co.uk/championship/marktwerte/wettbewerb/GB2\")\nsoup = BeautifulSoup(r.content,\"html.parser\")\nprint soup\n</code></pre>\n\n<p>returning</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;&lt;title&gt;404 Not Found&lt;/title&gt;&lt;/head&gt;\n&lt;body bgcolor=\"white\"&gt;\n&lt;center&gt;&lt;h1&gt;404 Not Found&lt;/h1&gt;&lt;/center&gt;\n&lt;hr&gt;&lt;center&gt;nginx&lt;/center&gt;\n&lt;/hr&gt;&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": ["python", "qt", "integer", "range", "qlist"], "comments": [{"owner": {"reputation": 1672, "user_id": 2158002, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/OiczH.jpg?s=128&g=1", "display_name": "Akiva", "link": "https://stackoverflow.com/users/2158002/akiva"}, "reply_to_user": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 0, "creation_date": 1450902596, "post_id": 34443169, "comment_id": 56628182, "body": "No. Just pure Qt. I only referenced python as I am familiar with the function (Which apparently and unsurprisingly exists in a slew of different languages, such as ruby, postgres, etc)"}, {"owner": {"reputation": 8289, "user_id": 2013738, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e411bdd253abc6ef58624ff72fd2b369?s=128&d=identicon&r=PG", "display_name": "Simon Warta", "link": "https://stackoverflow.com/users/2013738/simon-warta"}, "edited": false, "score": 1, "creation_date": 1450993035, "post_id": 34443169, "comment_id": 56658192, "body": "@Akiva, have a look on my edit of the answer below."}, {"owner": {"reputation": 1672, "user_id": 2158002, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/OiczH.jpg?s=128&g=1", "display_name": "Akiva", "link": "https://stackoverflow.com/users/2158002/akiva"}, "edited": false, "score": 0, "creation_date": 1450993318, "post_id": 34443169, "comment_id": 56658258, "body": "I gave you a thumbs up, but your answer requires me to write my own function, which my question explicitly states that I am trying to avoid. Sorry :-)"}, {"owner": {"reputation": 8289, "user_id": 2013738, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e411bdd253abc6ef58624ff72fd2b369?s=128&d=identicon&r=PG", "display_name": "Simon Warta", "link": "https://stackoverflow.com/users/2013738/simon-warta"}, "edited": false, "score": 0, "creation_date": 1450994204, "post_id": 34443169, "comment_id": 56658464, "body": "@Akiva I don&#39;t see how this can be a problem. Could you explain why you cannot add a two-line function? This two commands is the best you will get without adding additional dependencies. Qt can do a lot for you but those guys will not add every functionality that any user might need into their library as a separate method."}, {"owner": {"reputation": 1672, "user_id": 2158002, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/OiczH.jpg?s=128&g=1", "display_name": "Akiva", "link": "https://stackoverflow.com/users/2158002/akiva"}, "edited": false, "score": 0, "creation_date": 1451049977, "post_id": 34443169, "comment_id": 56668219, "body": "Understood, but sometimes these things do exist, and were just not privy to them. Sorry again :-) But here; i&#39;ll make it up to you~"}], "answers": [{"tags": [], "owner": {"reputation": 2352, "user_id": 5711725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cfaab398800db4fd0e9b0aae6621bda?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Mart&#237;n", "link": "https://stackoverflow.com/users/5711725/javier-mart%c3%adn"}, "is_accepted": false, "score": 2, "last_activity_date": 1450992923, "last_edit_date": 1450992923, "creation_date": 1450908055, "answer_id": 34444386, "question_id": 34443169, "link": "https://stackoverflow.com/questions/34443169/what-is-qts-equivalent-to-pythons-range-function-returning-a-qlistint/34444386#34444386", "title": "What is Qt&#39;s equivalent to Python&#39;s range() function, returning a QList&lt;int&gt;?", "body": "<p>I don't know the particularities of Qt containers, but in the STL you could do something like:</p>\n\n<p><code>std::vector&lt;int&gt; v(n);\nstd::iota(v.begin(), v.end(), 1);</code></p>\n\n<p>Or, if not using C++11, <code>std::generate_n(v.begin(), v.end(), my_iota(1));</code> where my_iota is a functor written by you that simply returns n++, with the initial value of n provided in the ctor.</p>\n\n<p><strike>If Qt containers provide iterators that comply with the STL OutputIterator concept you should be OK using std::generate or std::iota.</strike></p>\n\n<hr>\n\n<p>Qt containers (QList and QVector) provide STL compatible iterators that can utilize this functionality:</p>\n\n<pre><code>#include &lt;QDebug&gt;\n#include &lt;QVector&gt;\n#include &lt;numeric&gt;\n\ninline QVector&lt;int&gt; range(int start, int end)\n{\n    QVector&lt;int&gt; l(end-start+1);\n    std::iota(l.begin(), l.end(), start);\n    return l;\n}\n\nint main()\n{\n    qDebug() &lt;&lt; range(-3, 4);\n    return 0;\n}\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>QVector(-3, -2, -1, 0, 1, 2, 3, 4)\n</code></pre>\n"}], "owner": {"reputation": 1672, "user_id": 2158002, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/OiczH.jpg?s=128&g=1", "display_name": "Akiva", "link": "https://stackoverflow.com/users/2158002/akiva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1450992923, "creation_date": 1450902295, "question_id": 34443169, "link": "https://stackoverflow.com/questions/34443169/what-is-qts-equivalent-to-pythons-range-function-returning-a-qlistint", "title": "What is Qt&#39;s equivalent to Python&#39;s range() function, returning a QList&lt;int&gt;?", "body": "<p>If there is no equivalent function; is it possible to cleanly generate a <code>QList&lt;int&gt;</code> of <code>(1, 2, 3, 4, 5 ... )</code> with one line of code, avoiding a <code>for loop</code> or having to write my own function?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1450902556, "post_id": 34443121, "comment_id": 56628160, "body": "You did not say exactly where you are having problems, so without analysing your code, I&#39;d say you want to have two things: 1. a function which iterates through all appearances of email addresses, and 2. a <code>collections.Counter</code> which counts them."}], "answers": [{"comments": [{"owner": {"reputation": 5789, "user_id": 5704863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Vh2d.jpg?s=128&g=1", "display_name": "Karn Kumar", "link": "https://stackoverflow.com/users/5704863/karn-kumar"}, "edited": false, "score": 0, "creation_date": 1450909890, "post_id": 34443261, "comment_id": 56631288, "body": "@ Pei - Cool explanation , Though my posted code is working, I am just looking how to fit the <code>(re.findall)</code> for that code what i posted."}, {"owner": {"reputation": 7068, "user_id": 3837778, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/12c217d346b797e1a9b4d34b9aa91dce?s=128&d=identicon&r=PG&f=1", "display_name": "BAE", "link": "https://stackoverflow.com/users/3837778/bae"}, "reply_to_user": {"reputation": 5789, "user_id": 5704863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Vh2d.jpg?s=128&g=1", "display_name": "Karn Kumar", "link": "https://stackoverflow.com/users/5704863/karn-kumar"}, "edited": false, "score": 0, "creation_date": 1450910287, "post_id": 34443261, "comment_id": 56631440, "body": "@pygo <a href=\"http://stackoverflow.com/questions/8110059/python-regex-search-and-findall\" title=\"python regex search and findall\">stackoverflow.com/questions/8110059/&hellip;</a>"}, {"owner": {"reputation": 7068, "user_id": 3837778, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/12c217d346b797e1a9b4d34b9aa91dce?s=128&d=identicon&r=PG&f=1", "display_name": "BAE", "link": "https://stackoverflow.com/users/3837778/bae"}, "reply_to_user": {"reputation": 5789, "user_id": 5704863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Vh2d.jpg?s=128&g=1", "display_name": "Karn Kumar", "link": "https://stackoverflow.com/users/5704863/karn-kumar"}, "edited": false, "score": 0, "creation_date": 1450910636, "post_id": 34443261, "comment_id": 56631569, "body": "<a href=\"http://stackoverflow.com/questions/452104/is-it-worth-using-pythons-re-compile\" title=\"is it worth using pythons re compile\">stackoverflow.com/questions/452104/&hellip;</a>"}], "tags": [], "owner": {"reputation": 7068, "user_id": 3837778, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/12c217d346b797e1a9b4d34b9aa91dce?s=128&d=identicon&r=PG&f=1", "display_name": "BAE", "link": "https://stackoverflow.com/users/3837778/bae"}, "is_accepted": true, "score": 2, "last_activity_date": 1450904991, "last_edit_date": 1495535242, "creation_date": 1450902725, "answer_id": 34443261, "question_id": 34443121, "link": "https://stackoverflow.com/questions/34443121/dictionary-to-count-the-email-address-from-the-maillog-file-python/34443261#34443261", "title": "Dictionary to count the email-address from the maillog file python", "body": "<p>Hope this help...</p>\n\n<pre><code>from collections import Counter\nemails = re.findall('.*from=&lt;(.*)&gt;,\\ssize', line)# Modify re according to your file pattern  OR line pattern. If findall() on each line, each returned list should be combined.\nresult = Counter(emails)# type is &lt;class 'collections.Counter'&gt;\ndict(result)#convert to regular dict\n</code></pre>\n\n<p>re.findall() will return a list. Looking into <a href=\"https://stackoverflow.com/questions/2600191/how-can-i-count-the-occurrences-of-a-list-item-in-python\">How can I count the occurrences of a list item in Python?</a>, there are other ways to count the words in the returned list.</p>\n\n<p>By the way, interesting functions of Counter:</p>\n\n<pre><code>&gt;&gt;&gt; tmp1 = Counter(re.findall('from=&lt;([^\\s]*)&gt;', \"from=&lt;usr1@gmail.com&gt;, from=&lt;usr2@gmail.com&gt;, from=&lt;usr1@gmail.com&gt;, from=&lt;usr1@gmail.com&gt;, from=&lt;usr1@gmail.com&gt;,\") )\n&gt;&gt;&gt; tmp1\nCounter({'usr1@gmail.com': 4, 'usr2@gmail.com': 1})\n&gt;&gt;&gt; tmp2 = Counter(re.findall('from=&lt;([^\\s]*)&gt;', \"from=&lt;usr2@gmail.com&gt;, from=&lt;usr3@gmail.com&gt;, from=&lt;usr1@gmail.com&gt;, from=&lt;usr1@gmail.com&gt;, from=&lt;usr1@gmail.com&gt;,\") )\n&gt;&gt;&gt; dict(tmp1+tmp2)\n{'usr2@gmail.com': 2, 'usr1@gmail.com': 7, 'usr3@gmail.com': 1}\n</code></pre>\n\n<p>So, if the file is very large, we can count each line and combine them by aid of Counter.</p>\n"}, {"comments": [{"owner": {"reputation": 5789, "user_id": 5704863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Vh2d.jpg?s=128&g=1", "display_name": "Karn Kumar", "link": "https://stackoverflow.com/users/5704863/karn-kumar"}, "edited": false, "score": 0, "creation_date": 1450904137, "post_id": 34443422, "comment_id": 56628854, "body": "@ user2589273 - i dont have pandas module installed. Though thanks for the help, will try that later once i have pandas available."}], "tags": [], "owner": {"reputation": 1846, "user_id": 2589273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/34lAu.jpg?s=128&g=1", "display_name": "user2589273", "link": "https://stackoverflow.com/users/2589273/user2589273"}, "is_accepted": false, "score": 1, "last_activity_date": 1450903446, "creation_date": 1450903446, "answer_id": 34443422, "question_id": 34443121, "link": "https://stackoverflow.com/questions/34443121/dictionary-to-count-the-email-address-from-the-maillog-file-python/34443422#34443422", "title": "Dictionary to count the email-address from the maillog file python", "body": "<p>Have you considered using pandas, It can give you a nice table of results without the need for regex commands. </p>\n\n<pre><code> import pandas as pd\n\n emails = pd.Series(email_list)\n individual_emails = emails.unique()\n\n tally = pd.DataFrame( [individual_emails , [0]*len(individual_emails)] )\n #makes a table with emails and a zeroed talley\n\n for item in individual_emails.index:\n      address = tally.iloc[item,0]\n      sum = len(email[email==address])\n\n      tally.iloc[item,1] = sum\n\n\n print tally\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5789, "user_id": 5704863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Vh2d.jpg?s=128&g=1", "display_name": "Karn Kumar", "link": "https://stackoverflow.com/users/5704863/karn-kumar"}, "edited": false, "score": 0, "creation_date": 1450909337, "post_id": 34443680, "comment_id": 56631079, "body": "@ Hill - Thanks for the code .. this is working but i am looking with <code>re.findall()</code>  function using <code>re.compile</code> so, we can compile the regex once and not to loop it over agaian on the file.  Though My posted code is working fiine."}], "tags": [], "owner": {"reputation": 71, "user_id": 5433200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b83f3442523a87787732e0b2fe291cd?s=128&d=identicon&r=PG&f=1", "display_name": "Hill", "link": "https://stackoverflow.com/users/5433200/hill"}, "is_accepted": false, "score": 1, "last_activity_date": 1450904616, "creation_date": 1450904616, "answer_id": 34443680, "question_id": 34443121, "link": "https://stackoverflow.com/questions/34443121/dictionary-to-count-the-email-address-from-the-maillog-file-python/34443680#34443680", "title": "Dictionary to count the email-address from the maillog file python", "body": "<p>I hope the code at the bottom helps.</p>\n\n<p>However, here are three things to generally note:</p>\n\n<ol>\n<li>Use (<a href=\"https://docs.python.org/2/reference/compound_stmts.html#the-with-statement\" rel=\"nofollow\"><em>with</em></a>) when opening files</li>\n<li>When iterating over dictionaries, use <a href=\"https://docs.python.org/2/library/stdtypes.html#dict.iteritems\" rel=\"nofollow\"><em>iteritems()</em></a></li>\n<li>When working with containers, <a href=\"https://docs.python.org/2/library/collections.html\" rel=\"nofollow\"><em>collections</em></a> are your best friend</li>\n</ol>\n\n<hr>\n\n<pre><code>#!/usr/bin/python\nimport re\nfrom collections import Counter \n\nfmt = \" %-32s %-15s\"\nfilename = 'kkmail'\n\n# Extract the email addresses\nemail_list = []\nwith open(filename, 'r') as log:\n   for line in log.readlines():\n      _re = re.search('.*from=&lt;(.*)&gt;,\\ssize', line)\n         if _re:\n            name = _re.group(1)\n            email_list.append(name)\n\n# Count the email addresses\ncounts = dict(Counter(email_list)) # List to dict of counts: {'a':3, 'b':7,...}\nfor key, val in counts.iteritems():\n   print  fmt % (key, val)\n</code></pre>\n"}], "owner": {"reputation": 5789, "user_id": 5704863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Vh2d.jpg?s=128&g=1", "display_name": "Karn Kumar", "link": "https://stackoverflow.com/users/5704863/karn-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 848, "favorite_count": 0, "closed_date": 1450932515, "accepted_answer_id": 34443261, "answer_count": 3, "score": 1, "last_activity_date": 1450904991, "creation_date": 1450902077, "question_id": 34443121, "link": "https://stackoverflow.com/questions/34443121/dictionary-to-count-the-email-address-from-the-maillog-file-python", "closed_reason": "Not suitable for this site", "title": "Dictionary to count the email-address from the maillog file python", "body": "<p>Experts, I am trying to count the E-maill address and number of their repitions in the maillog file which somehow i am able to make using Regular expression (re.search) OR (re.match) but i am looking this to be accomplished with (re.findall) which currently i am dabbling with.. would appreciate any suggestions..</p>\n\n<p>1) Code Line ...</p>\n\n<pre><code># cat maillcount31.py\n#!/usr/bin/python\nimport re\n#count = 0\nmydic = {}\ncounts = mydic\nfmt = \" %-32s %-15s\"\nlog =  open('kkmail', 'r')\n\nfor line in log.readlines():\n        myre = re.search('.*from=&lt;(.*)&gt;,\\ssize', line)\n        if myre:\n           name = myre.group(1)\n           if name not in mydic.keys():\n              mydic[name] = 0\n           mydic[name] +=1\n\nfor key in counts:\n   print  fmt % (key, counts[key])\n\n2) Output from the Current code..\n\n# python maillcount31.py\n root@MyServer1.myinc.com         13\n User01@MyServer1.myinc.com       14\n</code></pre>\n"}, {"tags": ["python", "cluster-analysis", "igraph", "membership", "modularity"], "answers": [{"tags": [], "owner": {"reputation": 43955, "user_id": 156771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2163ccb26148ab885d6d827e7cb270a1?s=128&d=identicon&r=PG", "display_name": "Tam&#225;s", "link": "https://stackoverflow.com/users/156771/tam%c3%a1s"}, "is_accepted": false, "score": 0, "last_activity_date": 1451336597, "creation_date": 1451336597, "answer_id": 34500734, "question_id": 34443070, "link": "https://stackoverflow.com/questions/34443070/why-is-my-igraph-multilevel-community-modularity-none/34500734#34500734", "title": "Why is my igraph multilevel community modularity None?", "body": "<p><code>community_multilevel()</code> returns the optimal level (i.e. the one with the highest modularity) only. If you need to access all the levels, read the <a href=\"http://pythonhosted.org/python-igraph/igraph.Graph-class.html#community_multilevel\" rel=\"nofollow\">API docs of <code>community_multilevel()</code></a> and use the <code>return_levels=True</code> keyword argument; this will give you a list with all the levels.</p>\n\n<blockquote>\n  <p>I tried print modularity using [...] But my console returns null. Do you know why?</p>\n</blockquote>\n\n<p>Yes. You are accessing a private API that you are not supposed to access. You should use the <code>modularity</code> property, not <code>_modularity</code>. Modularity is calculated and cached in the private <code>_modularity</code> variable the first time you actually try to access the <code>modularity</code> property. Since you are bypassing this mechanism by reading <code>_modularity</code> directly, igraph will not calculate the modularity first.</p>\n"}], "owner": {"reputation": 671, "user_id": 894439, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/40dcf7b1d214c34f0b3a3a37430e4387?s=128&d=identicon&r=PG", "display_name": "MTA", "link": "https://stackoverflow.com/users/894439/mta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1160, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463777587, "creation_date": 1450901864, "last_edit_date": 1463777587, "question_id": 34443070, "link": "https://stackoverflow.com/questions/34443070/why-is-my-igraph-multilevel-community-modularity-none", "title": "Why is my igraph multilevel community modularity None?", "body": "<p>I created communities in igraph using:</p>\n\n<pre><code> g = Graph.TupleList(tupleMapping)\n layout = g.layout(\"rt\")\n comm = g.community_multilevel()\n</code></pre>\n\n<p>But how can I access these cluster levels? I can print the communities but I want to access the different clustering levels.</p>\n\n<p>I tried print modularity using:</p>\n\n<pre><code>print comm._modularity\n</code></pre>\n\n<p>But my console returns null. Do you know why?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "django", "django-logging"], "answers": [{"tags": [], "owner": {"reputation": 10017, "user_id": 301107, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2c87e8db57897b08332340b2c4b508ff?s=128&d=identicon&r=PG", "display_name": "masnun", "link": "https://stackoverflow.com/users/301107/masnun"}, "is_accepted": false, "score": 0, "last_activity_date": 1450902431, "creation_date": 1450902431, "answer_id": 34443202, "question_id": 34442973, "link": "https://stackoverflow.com/questions/34442973/distinguishing-production-logs-and-staging-logs/34443202#34443202", "title": "Distinguishing Production logs and staging logs", "body": "<p>Add formatters and put your environment there:</p>\n\n<pre><code>'formatters': {\n        'verbose': {\n            'format': 'PRODUCTION %(levelname)s %(asctime)s %(module)s %(process)d %(thread)d %(message)s'\n        },\n        'simple': {\n            'format': 'PRODUCTION %(levelname)s %(message)s'\n        },\n    },\n</code></pre>\n"}], "owner": {"reputation": 441, "user_id": 3346956, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1748420456/picture?type=large", "display_name": "Lavish", "link": "https://stackoverflow.com/users/3346956/lavish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1450902431, "creation_date": 1450901350, "question_id": 34442973, "link": "https://stackoverflow.com/questions/34442973/distinguishing-production-logs-and-staging-logs", "title": "Distinguishing Production logs and staging logs", "body": "<p>I have logging enabled in my django app, I receive all <code>ERRORS</code> related logs on my configured emails.\n<em>But I am unable to distinguish whether an error has occurred on <strong>PRODUCTION</strong> or <strong>STAGING</strong> system.</em></p>\n\n<p>Should I change some logging setting, or is there any way to add some environment variable in subject of the email?</p>\n\n<p>Here is my logging code in settings:</p>\n\n<pre><code>LOGGING = {\n    'version': 1,\n    'disable_existing_loggers': False,\n    'handlers': {\n        'mail_admins': {\n            'level': 'ERROR',\n            'class': 'django.utils.log.AdminEmailHandler'\n        }\n    },\n    'loggers': {\n        'django.request': {\n            'handlers': ['mail_admins'],\n            'level': 'ERROR',\n            'propagate': True,\n        },\n    }\n}\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 3583, "user_id": 5606352, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b334268d7a7805d0d4d4e406c79bbc2a?s=128&d=identicon&r=PG&f=1", "display_name": "abutremutante", "link": "https://stackoverflow.com/users/5606352/abutremutante"}, "edited": false, "score": 0, "creation_date": 1450902112, "post_id": 34443034, "comment_id": 56627965, "body": "would you mind adding the renaming command for the last column?"}], "tags": [], "owner": {"reputation": 23806, "user_id": 4542359, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a6ea331ac684b52563d13e6ee44e03be?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Protopopov", "link": "https://stackoverflow.com/users/4542359/anton-protopopov"}, "is_accepted": true, "score": 2, "last_activity_date": 1450904005, "last_edit_date": 1450904005, "creation_date": 1450901685, "answer_id": 34443034, "question_id": 34442930, "link": "https://stackoverflow.com/questions/34442930/concatenating-merging-data-frames-and-editing-column-names-in-python-pandas/34443034#34443034", "title": "Concatenating/merging data frames and editing column names in Python/Pandas", "body": "<p>You need to use <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.concat.html\" rel=\"nofollow\"><code>pd.concat</code></a> with <code>axis=1</code> and then rename your last column to 'population_movav':</p>\n\n<pre><code>In [27]: df1\nOut[27]: \n         population\nDate               \n2015-08          69\n2015-09          65\n2015-10          65\n2015-11          66\n2015-12          71\n\nIn [28]: df2\nOut[28]: \n         population\nDate               \n2015-08        68.0\n2015-09        69.9\n2015-10        71.6\n2015-11        71.1\n2015-12        71.2\n\nIn [30]: df3 = pd.concat([df1, df2], axis=1)\n\nIn [31]: df3.columns = ['population', 'population_movav']\nOut[31]: \n         population  population_movav\nDate                           \n2015-08          69        68.0\n2015-09          65        69.9\n2015-10          65        71.6\n2015-11          66        71.1\n2015-12          71        71.2\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>If you need to change only the last column you could do following:</p>\n\n<pre><code>df3.columns =  df3.columns[:-1].tolist() + ['population_movav']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "is_accepted": false, "score": 1, "last_activity_date": 1450902254, "creation_date": 1450902254, "answer_id": 34443155, "question_id": 34442930, "link": "https://stackoverflow.com/questions/34442930/concatenating-merging-data-frames-and-editing-column-names-in-python-pandas/34443155#34443155", "title": "Concatenating/merging data frames and editing column names in Python/Pandas", "body": "<p>You can use <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.join.html\" rel=\"nofollow\"><code>join</code></a> with <code>rsuffix</code>:</p>\n\n<pre><code>print population\n            population\nDate                  \n2015-08-01          69\n2015-09-01          65\n2015-10-01          65\n2015-11-01          66\n2015-12-01          71\n\nprint population_movav\n            population\nDate                  \n2015-08-01        68.0\n2015-09-01        69.9\n2015-10-01        71.6\n2015-11-01        71.1\n2015-12-01        71.2\n\np = population.join(population_movav, rsuffix=\"_movav\")\nprint p\n            population  population_movav\nDate                                    \n2015-08-01          69              68.0\n2015-09-01          65              69.9\n2015-10-01          65              71.6\n2015-11-01          66              71.1\n2015-12-01          71              71.2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "edited": false, "score": 0, "creation_date": 1450902423, "post_id": 34443177, "comment_id": 56628104, "body": "If it work, it is the best answer. Mayby you can change column name to <code>population_movav</code>"}], "tags": [], "owner": {"reputation": 2700, "user_id": 347567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f658a58fa2f6a02b804b71e168d44da6?s=128&d=identicon&r=PG", "display_name": "pneumatics", "link": "https://stackoverflow.com/users/347567/pneumatics"}, "is_accepted": false, "score": 1, "last_activity_date": 1450906204, "last_edit_date": 1450906204, "creation_date": 1450902334, "answer_id": 34443177, "question_id": 34442930, "link": "https://stackoverflow.com/questions/34442930/concatenating-merging-data-frames-and-editing-column-names-in-python-pandas/34443177#34443177", "title": "Concatenating/merging data frames and editing column names in Python/Pandas", "body": "<p>You can add a new column simply by referencing it by name in an assignment:</p>\n\n<pre><code>population['population_movav'] = pd.rolling_mean(population, 2, 1)\n</code></pre>\n\n<p>Gives you</p>\n\n<pre><code>         population  population_movav\nDate\n2015-08          69              69.0\n2015-09          65              67.0\n2015-10          65              65.0\n2015-11          66              65.5\n2015-12          71              68.5\n</code></pre>\n"}], "owner": {"reputation": 3583, "user_id": 5606352, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b334268d7a7805d0d4d4e406c79bbc2a?s=128&d=identicon&r=PG&f=1", "display_name": "abutremutante", "link": "https://stackoverflow.com/users/5606352/abutremutante"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 34443034, "answer_count": 3, "score": 1, "last_activity_date": 1585138465, "creation_date": 1450901142, "last_edit_date": 1585138465, "question_id": 34442930, "link": "https://stackoverflow.com/questions/34442930/concatenating-merging-data-frames-and-editing-column-names-in-python-pandas", "title": "Concatenating/merging data frames and editing column names in Python/Pandas", "body": "<p>I have built a DataFrame out of a Python dictionary, with the following command:</p>\n\n<pre><code>population=pd.DataFrame(population.items(),columns=['Date','population']).set_index('Date').sort_index(ascending=True)\n</code></pre>\n\n<p>That gave me the following frame <code>population</code>:</p>\n\n<pre><code>                 population\nDate                      \n2015-08                 69\n2015-09                 65\n2015-10                 65\n2015-11                 66\n2015-12                 71\n</code></pre>\n\n<p>Out of that DataFrame I created another one with its moving average, using the following command:</p>\n\n<pre><code>population_movav=pd.rolling_mean(population,10)\n</code></pre>\n\n<p>That gave me the following frame <code>population_movav</code>:</p>\n\n<pre><code>                 population\nDate                      \n2015-08               68.0\n2015-09               69.9\n2015-10               71.6\n2015-11               71.1\n2015-12               71.2\n</code></pre>\n\n<p>I want to combine them so they get like this:</p>\n\n<pre><code>                population   population_movav\nDate                      \n2015-08                 69               68.0  \n2015-09                 65               69.9\n2015-10                 65               71.6\n2015-11                 66               71.1\n2015-12                 71               71.2\n</code></pre>\n\n<p>Synthesizing, I need to concatenate them and change the column name of the variable <code>population_movav</code>. Tried the <code>pd.concat</code> but for some reason it is not working out right.</p>\n\n<p>How can I achieve this?</p>\n"}, {"tags": ["python", "unit-testing", "flask", "flask-login"], "comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1450906960, "post_id": 34442902, "comment_id": 56630071, "body": "I don&#39;t have a lot of ideas, but do you need to be passing a csrf token along with the request in your tests?"}], "answers": [{"comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1450911473, "post_id": 34444791, "comment_id": 56631865, "body": "Awesome!  I&#39;m glad you figured it out."}], "tags": [], "owner": {"reputation": 195, "user_id": 5712417, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Kb0DS.jpg?s=128&g=1", "display_name": "Michael Pinkard", "link": "https://stackoverflow.com/users/5712417/michael-pinkard"}, "is_accepted": true, "score": 3, "last_activity_date": 1450910236, "last_edit_date": 1495542874, "creation_date": 1450910236, "answer_id": 34444791, "question_id": 34442902, "link": "https://stackoverflow.com/questions/34442902/flask-app-post-failure/34444791#34444791", "title": "Flask app.post failure", "body": "<p>I am answering my own question. The answer can be found here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/21577481/flask-wtf-wtforms-with-unittest-fails-validation-but-works-without-unittest\">Flask-WTF / WTForms with Unittest fails validation, but works without Unittest</a></p>\n\n<p>The issue was that I had set </p>\n\n<pre><code>app.config['WTF_CSRF_ENABLED'] = True\n</code></pre>\n\n<p>in my setup. It needed to be set to False:</p>\n\n<pre><code>app.config['WTF_CSRF_ENABLED'] = False\n</code></pre>\n\n<p>Once this was done, the test worked.</p>\n"}], "owner": {"reputation": 195, "user_id": 5712417, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Kb0DS.jpg?s=128&g=1", "display_name": "Michael Pinkard", "link": "https://stackoverflow.com/users/5712417/michael-pinkard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "closed_date": 1451002164, "accepted_answer_id": 34444791, "answer_count": 1, "score": 1, "last_activity_date": 1450910236, "creation_date": 1450900997, "last_edit_date": 1450906753, "question_id": 34442902, "link": "https://stackoverflow.com/questions/34442902/flask-app-post-failure", "closed_reason": "Duplicate", "title": "Flask app.post failure", "body": "<p>I am trying to write some unit tests for an example Flask application, as I am new to Flask. I am trying to test if a login function works correctly. My relevant unit test code looks like this:</p>\n\n<pre><code>def login(self, name, password):\n    return self.app.post('/', data={\n        'password': password, 'name': name}, \n        follow_redirects=True)\n\ndef test_users_cannot_login_unless_registered(self):\n    response = self.login('foo', 'bar')\n    self.assertIn(b'Invalid username or password.', response.data)\n</code></pre>\n\n<p>When I manually test the app, I get an error message of 'Invalid username or password'. However, when I run the unit tests, I get the following Failure:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"tests.py\", line 55, in test_users_cannot_login_unless_registered\nself.assertIn(b'Invalid username or password.', response.data)\nAssertionError: 'Invalid username or password.' not found in '&lt;!DOCTYPE html&gt;\\n&lt;html&gt;\\n&lt;head&gt;\\n\\t&lt;title&gt;Welcome to FlaskTaskr!&lt;/title&gt;\\n\\t&lt;link rel=\"stylesheet\" href=\"/static/css/main.css\"&gt;\\n\\t&lt;/head&gt;\\n\\t&lt;body&gt;\\n\\t\\t&lt;div class=\"page\"&gt;\\n\\n\\t\\t\\t\\n\\n\\t\\t\\t\\n\\t\\t\\t&lt;div class=\"error\"&gt;&lt;strong&gt;ERROR:&lt;/strong&gt; Both fields are required.&lt;/div&gt;\\n\\t\\t\\t\\n\\n\\t\\t\\t&lt;br&gt;\\n\\n\\t\\t\\t\\n\\n&lt;h1&gt;Welcome to FlaskTaskr.&lt;/h1&gt;\\n&lt;div class=\"lead\"&gt;Please sign in to access your task list.&lt;/div&gt;\\n&lt;form class=\"form-signin\" role=\"form\" method=\"post\" action=\"/\"&gt;\\n\\t&lt;input id=\"csrf_token\" name=\"csrf_token\" type=\"hidden\" value=\"1450903611##20d216a4c9ad935bc78678f060bfd898a7ead69f\"&gt;\\n\\t&lt;p&gt;\\n\\t\\t&lt;input id=\"name\" name=\"name\" placeholder=\"name\" type=\"text\" value=\"foofoo\"&gt;\\n\\t\\t&lt;span class=\"error\"&gt;\\n\\t\\t\\t\\n\\t\\t&lt;/span&gt;\\n\\t&lt;/p&gt;\\n\\t&lt;p&gt;\\n\\t\\t&lt;input id=\"password\" name=\"password\" placeholder=\"password\" type=\"password\" value=\"\"&gt;\\n\\t\\t&lt;span class=\"error\"&gt;\\n\\t\\t\\t\\n\\t\\t&lt;/span&gt;\\n\\t&lt;/p&gt;\\n\\t&lt;button class=\"btn btn-sm btn-success\" type=\"submit\"&gt;Sign in&lt;/button&gt;\\n\\t&lt;br&gt;\\n\\t&lt;br&gt;\\n\\t&lt;p&gt;&lt;em&gt;Need an account? &lt;/em&gt;&lt;a href=\"/register\"&gt;Sign up!&lt;/a&gt;&lt;/p&gt;\\n&lt;/form&gt;\\n\\n\\n\\n\\t\\t&lt;/div&gt;\\n\\t&lt;/body&gt;\\n\\t&lt;/html&gt;'\n</code></pre>\n\n<p>The presence of the text 'Both fields are required', seems to suggest to me that the password is not being passed to the application. Here is the html/jinja2 code that I am using to the generate the page:</p>\n\n<pre><code>{% extends \"_base.html\" %}\n{% block content %}\n\n&lt;h1&gt;Welcome to FlaskTaskr.&lt;/h1&gt;\n&lt;div class=\"lead\"&gt;Please sign in to access your task list.&lt;/div&gt;\n&lt;form class=\"form-signin\" role=\"form\" method=\"post\" action=\"/\"&gt;\n  {{ form.csrf_token }}\n  &lt;p&gt;\n    {{ form.name(placeholder=\"name\") }}\n    &lt;span class=\"error\"&gt;\n      {% if form.name.errors %}\n      {% for error in form.name.errors %}\n      {{ error }}\n      {% endfor %}\n      {% endif %}\n    &lt;/span&gt;\n  &lt;/p&gt;\n  &lt;p&gt;\n    {{ form.password(placeholder=\"password\") }}\n    &lt;span class=\"error\"&gt;\n      {% if form.password.errors %}\n      {% for error in form.password.errors %}\n      {{ error }}\n      {% endfor %}\n      {% endif %}\n    &lt;/span&gt;\n  &lt;/p&gt;\n  &lt;button class=\"btn btn-sm btn-success\" type=\"submit\"&gt;Sign in&lt;/button&gt;\n  &lt;br&gt;\n  &lt;br&gt;\n  &lt;p&gt;&lt;em&gt;Need an account? &lt;/em&gt;&lt;a href=\"/register\"&gt;Sign up!&lt;/a&gt;&lt;/p&gt;\n&lt;/form&gt;\n{% endblock %}\n</code></pre>\n\n<p>Any ideas on what the problem might be or where to look for the issue?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 10017, "user_id": 301107, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2c87e8db57897b08332340b2c4b508ff?s=128&d=identicon&r=PG", "display_name": "masnun", "link": "https://stackoverflow.com/users/301107/masnun"}, "is_accepted": true, "score": 2, "last_activity_date": 1450906202, "last_edit_date": 1450906202, "creation_date": 1450901487, "answer_id": 34443005, "question_id": 34442810, "link": "https://stackoverflow.com/questions/34442810/automatically-replace-the-default-value-for-each-function-in-module/34443005#34443005", "title": "Automatically replace the default value for each function in module", "body": "<p>Here's how you can do it:</p>\n\n<pre><code>import easygui\nimport inspect\nimport functools\n\nfuncs = [f for f in easygui.__dict__.values() if callable(f)]\nfor func in funcs:\n    sig = inspect.signature(func)\n    if 'title' in sig.parameters:\n        newf = functools.partial(func, title='mytitle')\n        setattr(easygui, func.__name__, newf)\n</code></pre>\n"}], "owner": {"reputation": 1147, "user_id": 3430986, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fd07f78ffb9c601ae068d00938c8e0f7?s=128&d=identicon&r=PG&f=1", "display_name": "orestisf", "link": "https://stackoverflow.com/users/3430986/orestisf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 34443005, "answer_count": 1, "score": 0, "last_activity_date": 1450906202, "creation_date": 1450900593, "last_edit_date": 1450902720, "question_id": 34442810, "link": "https://stackoverflow.com/questions/34442810/automatically-replace-the-default-value-for-each-function-in-module", "title": "Automatically replace the default value for each function in module", "body": "<p>I've been toying with <code>easygui</code> and I was wondering if there was any way to automatically override the <code>title</code>'s argument default value for each method if the method has such an argument.</p>\n\n<p>For example I now can do:</p>\n\n<pre><code>import easygui\n\noldf = easygui.boolbox\ndef newf(title='mytitle', *args):\n    oldf(title=title, *args)\neasygui.boolbox = newf\n</code></pre>\n\n<p>Is there a more sophisticated and fast way to do this?</p>\n"}, {"tags": ["python", "pandas", "matplotlib", "plot"], "comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1450900737, "post_id": 34442791, "comment_id": 56627350, "body": "How did you import <code>matplotlib</code>?  e.g. where does <code>plt</code> come from?"}, {"owner": {"reputation": 21, "user_id": 5701827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5592f2c6e3bd463eb21963288aca7022?s=128&d=identicon&r=PG&f=1", "display_name": "Withoutahold", "link": "https://stackoverflow.com/users/5701827/withoutahold"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1450901017, "post_id": 34442791, "comment_id": 56627464, "body": "@mgilson Sorry about that, question is now fixed to reflect that"}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 1, "creation_date": 1450901233, "post_id": 34442791, "comment_id": 56627561, "body": "The problem is that <code>pyplot</code> is a stateful module which is meant to be convenient for people who are used to matlab.  In particular, the statefulness is why <code>plt.set_xlim</code> works -- <code>pyplot</code> has a reference to the figure (and axes) that you&#39;re currently working with.  If you want to work with the plots themselves, this doesn&#39;t work (well) and you&#39;ll need to use the object oriented interface provided by <code>matplotlib.figure</code>.  <a href=\"http://stackoverflow.com/a/5450333/748858\">reference</a>.  I suppose you <i>could</i> use <code>pyplot.gcf()</code> to get the current figure ..."}, {"owner": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "edited": false, "score": 0, "creation_date": 1450909740, "post_id": 34442791, "comment_id": 56631238, "body": "The problem is that the object passed into the <code>set_limits</code> function as written as used is the <code>Collection</code> artist returned by scatter which does not have any notion of limits."}], "answers": [{"tags": [], "owner": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "is_accepted": false, "score": 1, "last_activity_date": 1450909665, "creation_date": 1450909665, "answer_id": 34444698, "question_id": 34442791, "link": "https://stackoverflow.com/questions/34442791/pass-plot-to-function-matplotlib-python/34444698#34444698", "title": "Pass Plot to Function Matplotlib Python", "body": "<p>You probably want to be doing something like this:</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\ndef scatter_plot(ax, df, user_conditions):\n    \"\"\"\n    Parameters\n    ----------\n    ax : matplotlib.axes.Axes\n        The axes to put the data on\n    df : pd.DataFrame\n        The data\n    user_conditions : dict (?)\n        bucket of user input to control plotting?\n    \"\"\"\n    data_to_plot = user_conditions['data_to_plot']\n    title = data_to_plot.replace(\"_\", \" \").title()\n    print(title)\n    df1 = df[['time',data_to_plot]]\n    df1 = index_dataframe_time(df1)\n    # sc = ax.scatter(df1.index.to_pydatetime(), df1[data_to_plot])\n    # only works in 1.5.0+\n    sc = ax.scatter(df1.index.to_pydatetime(), data_to_plot,\n                    data=df)\n    set_limits(df1, ax)\n    ax.set_title('Hour of Day vs '+title, fontsize=14)\n\n    return sc\n\ndef set_limits(df, ax):\n    min = df.index.min()\n    max = df.index.max()\n    ax.set_xlim(min, max)\n\n\nfig, ax = plt.subplots()\narts = scatter_plot(ax, df, user_conditions)\n</code></pre>\n\n<p>if you are not varying the size or color of the markers you are better off using <code>ax.plot(..., linestile='none', marker='o')</code> which will render faster.  In this case something like (if you have 1.5.0+)</p>\n\n<pre><code>ax.plot(data_to_plot, linestyle='none', marker='o', data=df)\n</code></pre>\n\n<p>and it should 'do the right thing'.</p>\n"}], "owner": {"reputation": 21, "user_id": 5701827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5592f2c6e3bd463eb21963288aca7022?s=128&d=identicon&r=PG&f=1", "display_name": "Withoutahold", "link": "https://stackoverflow.com/users/5701827/withoutahold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3927, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450909665, "creation_date": 1450900470, "last_edit_date": 1450909172, "question_id": 34442791, "link": "https://stackoverflow.com/questions/34442791/pass-plot-to-function-matplotlib-python", "title": "Pass Plot to Function Matplotlib Python", "body": "<p>I was hoping to create a function that will set the x axis limit for a plot. Here is what is <strong>working</strong> currently:</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\ndef scatter_plot(df, user_conditions):\n    data_to_plot = user_conditions['data_to_plot']\n    title = data_to_plot.replace(\"_\", \" \").title()\n    df1 = df[['time',data_to_plot]]\n    df1 = index_dataframe_time(df1)\n    plt.scatter(df1.index.to_pydatetime(), df1[data_to_plot])\n    min = df1.index.min()\n    max = df1.index.max()\n    plt.xlim(min, max)\n    plt.title('Hour of Day vs '+title, fontsize=14)\n    plt.show()\n</code></pre>\n\n<p>Here is what I was hoping for:</p>\n\n<pre><code>def scatter_plot(df, user_conditions):\n    data_to_plot = user_conditions['data_to_plot']\n    title = data_to_plot.replace(\"_\", \" \").title()\n    print title\n    df1 = df[['time',data_to_plot]]\n    df1 = index_dataframe_time(df1)\n    plot = plt.scatter(df1.index.to_pydatetime(), df1[data_to_plot])\n    plot = set_limits(df1, plot)\n    plot.title('Hour of Day vs '+title, fontsize=14)\n    plot.show()\n\ndef set_limits(df, plot):\n    min = df.index.min()\n    max = df.index.max()\n    plot.xlim(min, max)\n    return plot\n</code></pre>\n\n<p>However, there is an issue in <code>set_limits</code> with <code>plot.xlim(min,max)</code>,</p>\n\n<pre><code>&gt; Traceback (most recent call last):   \nFile\n&gt; \"C:/Users/Application/main.py\", line 115, in &lt;module&gt;\n&gt;     \nmain()   \n&gt; \n&gt; File \"C:/Users/Application/main.py\", line\n&gt; 106,\n&gt; in main\n&gt;     plot_configuration(df, user_conditions)   File \"C:/Users/Application/main.py\", line 111,\n&gt; in plot_configuration\n&gt;     scatter_plot(df, user_conditions)   \nFile \"C:/Users/Application/main.py\", line 76,\n&gt; in scatter_plot\n&gt;     plot = set_limits(df1, plot)   File \"C:/Users/Application/main.py\", line 83,\n&gt; in set_limits\n&gt;     plot.xlim(min, max) AttributeError: 'PathCollection' object has no attribute 'xlim'\n</code></pre>\n\n<p>How can set_limits be modified in order to fix this?</p>\n"}, {"tags": ["python", "user-interface", "tkinter"], "comments": [{"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1450900163, "post_id": 34442626, "comment_id": 56627080, "body": "What OS are you using? On Ubuntu 14.04.3 LTS with Python 2.7.6, the menu appears."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 5516756, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a62c3ddfbabeb99cbb7564dcfab5919c?s=128&d=identicon&r=PG&f=1", "display_name": "JonSayer", "link": "https://stackoverflow.com/users/5516756/jonsayer"}, "edited": false, "score": 0, "creation_date": 1450900570, "post_id": 34442772, "comment_id": 56627272, "body": "Oh I see, this is really not what I thought I was aiming for. Duh!!  Thanks alot!! :)"}, {"owner": {"reputation": 10017, "user_id": 301107, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2c87e8db57897b08332340b2c4b508ff?s=128&d=identicon&r=PG", "display_name": "masnun", "link": "https://stackoverflow.com/users/301107/masnun"}, "reply_to_user": {"reputation": 141, "user_id": 5516756, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a62c3ddfbabeb99cbb7564dcfab5919c?s=128&d=identicon&r=PG&f=1", "display_name": "JonSayer", "link": "https://stackoverflow.com/users/5516756/jonsayer"}, "edited": false, "score": 0, "creation_date": 1450900616, "post_id": 34442772, "comment_id": 56627293, "body": "@JonSayer Please accept the answer if it&#39;s helpful :)"}, {"owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "reply_to_user": {"reputation": 141, "user_id": 5516756, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a62c3ddfbabeb99cbb7564dcfab5919c?s=128&d=identicon&r=PG&f=1", "display_name": "JonSayer", "link": "https://stackoverflow.com/users/5516756/jonsayer"}, "edited": false, "score": 0, "creation_date": 1450901183, "post_id": 34442772, "comment_id": 56627544, "body": "@JonSayer BTW, you have the privilege to <a href=\"http://stackoverflow.com/help/privileges/vote-up\">upvote</a>.  More than one answers. ;)"}, {"owner": {"reputation": 10017, "user_id": 301107, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2c87e8db57897b08332340b2c4b508ff?s=128&d=identicon&r=PG", "display_name": "masnun", "link": "https://stackoverflow.com/users/301107/masnun"}, "reply_to_user": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1450901251, "post_id": 34442772, "comment_id": 56627569, "body": "@MikeM&#252;ller We both have the same privilege too! ;-)"}, {"owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1450901319, "post_id": 34442772, "comment_id": 56627598, "body": "Just executed my privilege. :)"}], "tags": [], "owner": {"reputation": 10017, "user_id": 301107, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2c87e8db57897b08332340b2c4b508ff?s=128&d=identicon&r=PG", "display_name": "masnun", "link": "https://stackoverflow.com/users/301107/masnun"}, "is_accepted": true, "score": 8, "last_activity_date": 1450900742, "last_edit_date": 1450900742, "creation_date": 1450900392, "answer_id": 34442772, "question_id": 34442626, "link": "https://stackoverflow.com/questions/34442626/why-is-the-menu-not-showing-on-my-tkinter-gui/34442772#34442772", "title": "Why is the menu not showing on my Tkinter GUI?", "body": "<p>From the look &amp; feel of the GUI you posted, I assume you're on OS X. On OS X, the Menu is displayed separately, on the top menu bar. It is not displayed on the Window itself. Please check my screenshot. </p>\n\n<p><a href=\"https://i.stack.imgur.com/TOuJy.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/TOuJy.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/zShaF.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/zShaF.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "is_accepted": false, "score": 3, "last_activity_date": 1450900411, "creation_date": 1450900411, "answer_id": 34442773, "question_id": 34442626, "link": "https://stackoverflow.com/questions/34442626/why-is-the-menu-not-showing-on-my-tkinter-gui/34442773#34442773", "title": "Why is the menu not showing on my Tkinter GUI?", "body": "<p>On Mac OS X the menu is at the top of the desktop. Not at the actual Tkinter window. Your code works.</p>\n"}], "owner": {"reputation": 141, "user_id": 5516756, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a62c3ddfbabeb99cbb7564dcfab5919c?s=128&d=identicon&r=PG&f=1", "display_name": "JonSayer", "link": "https://stackoverflow.com/users/5516756/jonsayer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2368, "favorite_count": 0, "accepted_answer_id": 34442772, "answer_count": 2, "score": 3, "last_activity_date": 1450900742, "creation_date": 1450899693, "question_id": 34442626, "link": "https://stackoverflow.com/questions/34442626/why-is-the-menu-not-showing-on-my-tkinter-gui", "title": "Why is the menu not showing on my Tkinter GUI?", "body": "<p>I'm using python 2.7.11 with Anaconda 2.4.1. I'm currently working through a Tkinter tutorial, found <a href=\"http://zetcode.com/gui/tkinter/menustoolbars/\" rel=\"nofollow noreferrer\">here</a>. I'm trying to display a simple menu on a GUI. The code I have been using is as follows: </p>\n\n<pre><code>from Tkinter import *\n\nclass Example(Frame):\n\n    def __init__(self, parent):\n        Frame.__init__(self, parent)\n        self.parent = parent\n        self.initUI()\n\n    def initUI(self):\n\n        self.parent.title(\"Simple Menu\")\n        menubar = Menu(self.parent)\n        self.parent.config(menu = menubar)\n        filemenu = Menu(menubar)\n        filemenu.add_command(label = \"Exit\", command = self.onExit)\n        menubar.add_cascade(label = \"File\", menu = filemenu)\n\n    def onExit(self):\n        self.quit()\n\ndef main():\n    root = Tk()\n    root.geometry(\"250x150+300+300\")\n    app = Example(root)\n    root.mainloop()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>The result of the code shows the following GUI. </p>\n\n<p><a href=\"https://i.stack.imgur.com/GsuzM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GsuzM.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have tried similar codes from other websites that claim to render a GUI with a menu option, all of which render the same result. I have updated Anaconda and tried running from the XQuartz server with no avail. There are no error messages and all other Tkinter widgets seem to work fine (listboxes, text fields etc). Any suggestions would be greatly appreciated.</p>\n"}, {"tags": ["python", "elasticsearch", "upsert"], "answers": [{"comments": [{"owner": {"reputation": 1114, "user_id": 443363, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85fdb1536da4846561928133d6bfc54d?s=128&d=identicon&r=PG", "display_name": "L-R", "link": "https://stackoverflow.com/users/443363/l-r"}, "edited": false, "score": 0, "creation_date": 1450900295, "post_id": 34442707, "comment_id": 56627142, "body": "<code>doc_as_upsert</code> does not make a difference. Also I want the action to be <code>index</code>, which is default if you leave it out. Finally, I&#39;m using the bulk API which is different syntax from what you posted."}, {"owner": {"reputation": 123, "user_id": 2785738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/204649326f2bd89b39a78f9b2df63714?s=128&d=identicon&r=PG&f=1", "display_name": "J.Ku", "link": "https://stackoverflow.com/users/2785738/j-ku"}, "reply_to_user": {"reputation": 1114, "user_id": 443363, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85fdb1536da4846561928133d6bfc54d?s=128&d=identicon&r=PG", "display_name": "L-R", "link": "https://stackoverflow.com/users/443363/l-r"}, "edited": false, "score": 0, "creation_date": 1450900393, "post_id": 34442707, "comment_id": 56627195, "body": "I believe the <code>index</code> action always overwrites the existing value if exist."}, {"owner": {"reputation": 123, "user_id": 2785738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/204649326f2bd89b39a78f9b2df63714?s=128&d=identicon&r=PG&f=1", "display_name": "J.Ku", "link": "https://stackoverflow.com/users/2785738/j-ku"}, "reply_to_user": {"reputation": 1114, "user_id": 443363, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85fdb1536da4846561928133d6bfc54d?s=128&d=identicon&r=PG", "display_name": "L-R", "link": "https://stackoverflow.com/users/443363/l-r"}, "edited": false, "score": 0, "creation_date": 1450901807, "post_id": 34442707, "comment_id": 56627833, "body": "not sure how to do it with <code>index</code>. my answer uses <code>update</code> and it would behave like you expected"}, {"owner": {"reputation": 1114, "user_id": 443363, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85fdb1536da4846561928133d6bfc54d?s=128&d=identicon&r=PG", "display_name": "L-R", "link": "https://stackoverflow.com/users/443363/l-r"}, "edited": false, "score": 0, "creation_date": 1450901897, "post_id": 34442707, "comment_id": 56627892, "body": "sorry, I had the syntax wrong, I think the above works."}], "tags": [], "owner": {"reputation": 123, "user_id": 2785738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/204649326f2bd89b39a78f9b2df63714?s=128&d=identicon&r=PG&f=1", "display_name": "J.Ku", "link": "https://stackoverflow.com/users/2785738/j-ku"}, "is_accepted": false, "score": 1, "last_activity_date": 1450901964, "last_edit_date": 1450901964, "creation_date": 1450900084, "answer_id": 34442707, "question_id": 34442597, "link": "https://stackoverflow.com/questions/34442597/bulk-partial-upsert-in-elasticseach-with-python/34442707#34442707", "title": "Bulk Partial Upsert in Elasticseach with python", "body": "<p>I think you need to include the action as mentioned in the <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-bulk.html\" rel=\"nofollow\">documentation</a> and set upsert as true</p>\n\n<pre><code>data = [{\n    \"_op_type\": 'update',\n    \"_index\": 'my_index',\n    \"_type\": 'my_type',\n    \"_id\": 12345,\n    \"doc\": {\"newkey\": 'newvalue'}\n}]\nhelpers.bulk(es, data, index='my_index', doc_type='my_type')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133, "user_id": 4444206, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N_jWIYN9g80/AAAAAAAAAAI/AAAAAAAACYs/c1D7nuURPeg/photo.jpg?sz=128", "display_name": "jhandei", "link": "https://stackoverflow.com/users/4444206/jhandei"}, "is_accepted": false, "score": 12, "last_activity_date": 1489848291, "creation_date": 1489848291, "answer_id": 42875769, "question_id": 34442597, "link": "https://stackoverflow.com/questions/34442597/bulk-partial-upsert-in-elasticseach-with-python/42875769#42875769", "title": "Bulk Partial Upsert in Elasticseach with python", "body": "<p>As J. Ku answered, he has given the right answer but the code provided is incomplete. So posting the complete answer.</p>\n\n<pre><code>data = [{\n    \"_op_type\": 'update',\n    \"_index\": 'my_index',\n    \"_type\": 'my_type',\n    \"_id\": 12345,\n    \"doc\": {\"newkey\": 'newvalue'},\n    \"doc_as_upsert\":True\n}]\n\nhelpers.bulk(es, data, index='my_index', doc_type='my_type')\n</code></pre>\n"}], "owner": {"reputation": 1114, "user_id": 443363, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85fdb1536da4846561928133d6bfc54d?s=128&d=identicon&r=PG", "display_name": "L-R", "link": "https://stackoverflow.com/users/443363/l-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4769, "favorite_count": 3, "answer_count": 2, "score": 12, "last_activity_date": 1489848291, "creation_date": 1450899531, "question_id": 34442597, "link": "https://stackoverflow.com/questions/34442597/bulk-partial-upsert-in-elasticseach-with-python", "title": "Bulk Partial Upsert in Elasticseach with python", "body": "<p>I want to send n upsert partial requests to ES, is such a thing possible?\nSo if the document doesn't exist, insert my partial doc. If it already exists, update it with the partial doc.</p>\n\n<p>Using the bulk helpers, I've tried a ton of variations, but they all wipe out existing values in favour of the new ones.</p>\n\n<pre><code>data = [{\n    \"_index\": 'my_index',\n    \"_type\": 'my_type',\n    \"_id\": 12345,\n    \"doc\": {\"newkey\": 'newvalue'}\n}]\nhelpers.bulk(es, data, index='my_index', doc_type='my_type')\n</code></pre>\n\n<p>or</p>\n\n<pre><code>data = [{\n    \"_index\": 'my_index',\n    \"_type\": 'my_type',\n    \"_id\": 12345,\n    \"_source\": {\"newkey\": 'newvalue'}\n}]\nhelpers.bulk(es, data, index='my_index', doc_type='my_type')\n</code></pre>\n\n<p>Does not work either.</p>\n"}, {"tags": ["python", "django", "postgresql", "heroku"], "comments": [{"owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1450899779, "post_id": 34442566, "comment_id": 56626912, "body": "Post your <code>DATABASE_URL</code> that you set in the Heroku admin"}, {"owner": {"reputation": 1689, "user_id": 2877180, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/182c941bc3d53ce90c1bba28ee6b718c?s=128&d=identicon&r=PG&f=1", "display_name": "Programmingjoe", "link": "https://stackoverflow.com/users/2877180/programmingjoe"}, "reply_to_user": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1450900221, "post_id": 34442566, "comment_id": 56627113, "body": "Right now it&#39;s the default that it starts with. I tried setting it to the dump file i uploaded to S3 but I get the error: DATABASE_URL is invalid. Must be in the format FOO=bar."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1450901506, "post_id": 34442566, "comment_id": 56627684, "body": "It seems likely that Heroku is not finding your settings, since you obviously have configured the engine in the code you have posted. Can you show your Procfile, and the file layout showing where settings.py is?"}, {"owner": {"reputation": 1689, "user_id": 2877180, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/182c941bc3d53ce90c1bba28ee6b718c?s=128&d=identicon&r=PG&f=1", "display_name": "Programmingjoe", "link": "https://stackoverflow.com/users/2877180/programmingjoe"}, "edited": false, "score": 0, "creation_date": 1450902298, "post_id": 34442566, "comment_id": 56628050, "body": "This is all I have in my Procfile: web: gunicorn exchange.wsgi --log-file -"}, {"owner": {"reputation": 1689, "user_id": 2877180, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/182c941bc3d53ce90c1bba28ee6b718c?s=128&d=identicon&r=PG&f=1", "display_name": "Programmingjoe", "link": "https://stackoverflow.com/users/2877180/programmingjoe"}, "edited": false, "score": 0, "creation_date": 1450902364, "post_id": 34442566, "comment_id": 56628083, "body": "It&#39;s only when I run &quot;Heroku local&quot; that I get the database error."}], "answers": [{"comments": [{"owner": {"reputation": 1689, "user_id": 2877180, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/182c941bc3d53ce90c1bba28ee6b718c?s=128&d=identicon&r=PG&f=1", "display_name": "Programmingjoe", "link": "https://stackoverflow.com/users/2877180/programmingjoe"}, "edited": false, "score": 0, "creation_date": 1450908939, "post_id": 34443994, "comment_id": 56630913, "body": "Ah yes, my apologies. I&#39;ve been all over the place with this problem so I forgot that detail. What is the #### in the default value supposed to represent? EDIT: Nevermind, that is the default if I don&#39;t declare DATABASES at all. I understand."}], "tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": false, "score": 0, "last_activity_date": 1450906069, "creation_date": 1450906069, "answer_id": 34443994, "question_id": 34442566, "link": "https://stackoverflow.com/questions/34442566/difficult-pushing-existing-django-application-to-heroku-database-improperly-con/34443994#34443994", "title": "Difficult pushing existing django application to Heroku. Database improperly configured", "body": "<p>You mention in the comments that this problem only happens when you run <code>heroku local</code>, which is a <em>completely different problem</em> and certainly an issue you should have mentioned at the start in your question. Clearly, this isn't about \"uploading your application to Heroku\", or even about Heroku not finding the db, since you are not even running on Heroku yet but locally.</p>\n\n<p>The problem almost certainly occurs because in your local environment you don't have a DATABASE_URL, yet you have the call to <code>dj_database_url</code> completely overriding your existing default database configuration.</p>\n\n<p>The two ways to fix this are either to put a guard around that call:</p>\n\n<pre><code>if os.environ['DATABASE_URL']: \n    DATABASES['default'] = dj_database_url.config()\n</code></pre>\n\n<p>or, better, remove the DATABASES dictionary declaration altogether and use the default parameter to that library:</p>\n\n<pre><code>DATABASES = {'default': dj_database_url.config(default='postgres://joe:####@localhost/texchange')}\n</code></pre>\n"}], "owner": {"reputation": 1689, "user_id": 2877180, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/182c941bc3d53ce90c1bba28ee6b718c?s=128&d=identicon&r=PG&f=1", "display_name": "Programmingjoe", "link": "https://stackoverflow.com/users/2877180/programmingjoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 364, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450906069, "creation_date": 1450899437, "question_id": 34442566, "link": "https://stackoverflow.com/questions/34442566/difficult-pushing-existing-django-application-to-heroku-database-improperly-con", "title": "Difficult pushing existing django application to Heroku. Database improperly configured", "body": "<p>So I have a finished Django application and I am now trying to upload it to Heroku to go to production although I am running into some problems. I have been following the tutorials on Heroku's site:</p>\n\n<p><a href=\"https://devcenter.heroku.com/articles/django-app-configuration#migrating-an-existing-django-project\" rel=\"nofollow\">https://devcenter.heroku.com/articles/django-app-configuration#migrating-an-existing-django-project</a></p>\n\n<p><a href=\"https://devcenter.heroku.com/articles/getting-started-with-django#declare-process-types-with-procfile\" rel=\"nofollow\">https://devcenter.heroku.com/articles/getting-started-with-django#declare-process-types-with-procfile</a></p>\n\n<p>Although I am running into this error:</p>\n\n<pre><code>settings.DATABASES is improperly configured. Please supply the ENGINE value. Check settings documentation for more details.\n</code></pre>\n\n<p>It sounded like I needed to upload my database onto S3 so Heroku could access it so I did that with this tutorial</p>\n\n<p><a href=\"https://devcenter.heroku.com/articles/heroku-postgres-import-export#import\" rel=\"nofollow\">https://devcenter.heroku.com/articles/heroku-postgres-import-export#import</a></p>\n\n<p>but I am still getting the error. Here are some of my settings.</p>\n\n<p><strong>Settings.py</strong></p>\n\n<pre><code>DATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.postgresql_psycopg2',\n        'NAME': 'texchange',\n        'USER': 'joe',\n        'PASSWORD': '#######',\n        'HOST': 'localhost',\n        'PORT': '',\n    }\n}\n\n\nSTATICFILES_DIRS = (\n    ('/static/',\n    '/home/joe/Documents/exchange/Texchange/textchange/static/',),\n    ('/media/',\n    '/home/joe/Documents/exchange/Texchange/textchange/media/'),\n)\n\nMEDIA_ROOT = '/home/joe/Documents/exchange/Texchange/textchange/media/'\n\nMEDIA_URL = '/media/'\n\nSTATIC_ROOT = '/home/joe/Documents/exchange/Texchange/textchange/static/'\n\nSTATIC_URL = '/static/'\n\n# Parse database configuration from $DATABASE_URL\nimport dj_database_url\nDATABASES['default'] = dj_database_url.config()\n\n# Enable Persistent Connections\nDATABASES['default']['CONN_MAX_AGE'] = 500\n</code></pre>\n\n<p>What exactly am I not understanding? Any direction would be appreciated as this is my first time uploading an application with Heroku and S3.</p>\n"}, {"tags": ["python", "excel", "xlsxwriter"], "comments": [{"owner": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "edited": false, "score": 0, "creation_date": 1450911184, "post_id": 34442534, "comment_id": 56631767, "body": "The charts that seem &quot;not referenced&quot;: Are these charts actually <i>right</i>, other than not highlighting their source data when you click on them? Do some of your sheet names have spaces in them and some not?"}, {"owner": {"reputation": 221, "user_id": 5049514, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3b2710dba7e3254a9ec9827fc26bba8?s=128&d=identicon&r=PG&f=1", "display_name": "Emily K", "link": "https://stackoverflow.com/users/5049514/emily-k"}, "reply_to_user": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "edited": false, "score": 0, "creation_date": 1450914694, "post_id": 34442534, "comment_id": 56632874, "body": "Wow, yes, this did seem to be the issue! When I removed the spaces from the sheet names, all of the charts appeared correctly! Regarding your question, yes, other than the reference issue and the data labels appearing as decimals rather than percents, the charts were appearing correctly."}], "answers": [{"tags": [], "owner": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "is_accepted": true, "score": 3, "last_activity_date": 1450917053, "creation_date": 1450917053, "answer_id": 34445727, "question_id": 34442534, "link": "https://stackoverflow.com/questions/34442534/dynamically-produced-xlsxwriter-charts-in-python-not-referencing/34445727#34445727", "title": "Dynamically produced XLSXWriter charts in python - not referencing", "body": "<p>Your example invocations:</p>\n\n<pre><code>test.add_chart(df, 'Df Title', 1)\ntest.add_chart(df2, 'Df2 Title', 1)\n</code></pre>\n\n<p>suggest that you sometimes had spaces in the names. This results in broken references when you try things like</p>\n\n<pre><code>'name': '=' + tab_name +'!$' + self.letters[n] + '$1',\n</code></pre>\n\n<p>which would evaluate to</p>\n\n<pre><code>'name': '=Df Title!$A$1',\n</code></pre>\n\n<p>(when <code>tab_name</code> equals <code>'Df Title'</code> and <code>n</code> equals <code>0</code>), for example.</p>\n\n<p>You should still be able to have sheet references with spaces, but enclosed in single-quotes, like</p>\n\n<pre><code>'name': \"='Df Title'!$A$1\",\n</code></pre>\n\n<p>so a more robust way to code would be</p>\n\n<pre><code>'name': \"='\" + tab_name +\"'!$\" + self.letters[n] + '$1',\n</code></pre>\n\n<p>I'm a little surprised that the charts would work at all with the broken sheet references, but I haven't actually tested charts myself, just plain cell formulas that involve sheet names.</p>\n"}, {"tags": [], "owner": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "is_accepted": false, "score": 3, "last_activity_date": 1450944641, "creation_date": 1450944641, "answer_id": 34449439, "question_id": 34442534, "link": "https://stackoverflow.com/questions/34442534/dynamically-produced-xlsxwriter-charts-in-python-not-referencing/34449439#34449439", "title": "Dynamically produced XLSXWriter charts in python - not referencing", "body": "<p>@John Y is correct that you aren't quoting the worksheet names correctly in chart range references.</p>\n\n<p>You could avoid this issue, and the hand-rolled conversion from numbers to cell references, by using the chart list syntax rather than the string syntax:</p>\n\n<pre><code>chart.add_series({\n    'name':       ['Sheet1', 0, col],\n    'categories': ['Sheet1', 1, 0,   max_row, 0],\n    'values':     ['Sheet1', 1, col, max_row, col],\n})\n</code></pre>\n\n<p>The snippet is from <a href=\"https://xlsxwriter.readthedocs.org/example_pandas_chart_line.html\" rel=\"nofollow\">this example in the XlsxWriter docs</a>.</p>\n\n<p>This applies to a few other places in your code as well. As a general rule in XlsxWriter you can use <code>row-column</code> syntax (almost) anywhere you would use <code>A1</code> syntax: <a href=\"https://xlsxwriter.readthedocs.org/working_with_cell_notation.html\" rel=\"nofollow\">Working with Cell Notation</a>.</p>\n"}], "owner": {"reputation": 221, "user_id": 5049514, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3b2710dba7e3254a9ec9827fc26bba8?s=128&d=identicon&r=PG&f=1", "display_name": "Emily K", "link": "https://stackoverflow.com/users/5049514/emily-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2569, "favorite_count": 1, "accepted_answer_id": 34445727, "answer_count": 2, "score": 4, "last_activity_date": 1450944641, "creation_date": 1450899307, "last_edit_date": 1450899659, "question_id": 34442534, "link": "https://stackoverflow.com/questions/34442534/dynamically-produced-xlsxwriter-charts-in-python-not-referencing", "title": "Dynamically produced XLSXWriter charts in python - not referencing", "body": "<p>I'm using the below class I've written to try and dynamically create a single Excel file with several worksheets where there is a printed dataframe and a column chart in each worksheet. </p>\n\n<p>Interacton with the code (seen below) should function where you initiate a workbook:</p>\n\n<pre><code>test = Workbook('Test Workbook')\n</code></pre>\n\n<p>And then, you can add as many charts as you want:</p>\n\n<pre><code>test.add_chart(df, 'Df Title', 1)\ntest.add_chart(df2, 'Df2 Title', 1)\n</code></pre>\n\n<p>And then you produce the workbook:</p>\n\n<pre><code>test.produce()\n</code></pre>\n\n<p>Input dataframes have headers. First column is text categories, subsequent columns (of varying number) are data in the form of decimals, that are to be graphed as percents. </p>\n\n<p>THE ISSUE: The code works fairly well, and seems to produce all of the worksheets separately with charts, BUT some of the charts appear as \"not referenced\", meaning that when I click on a bar in the column chart, it does not highlight the source data. Some of the charts produced with the code, DO reference appropriately, so I am not sure where the issue is, and there is not an obvious trend.</p>\n\n<pre><code>import xlsxwriter\nimport pandas as pd\n\nclass Workbook:\n\ndef __init__(self, workbook_name):\n    self.workbook_name = workbook_name\n\n    self.workbook = xlsxwriter.Workbook(str(self.workbook_name) + '.xlsx')\n\n    self.letters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P']\n\ndef produce(self):\n    self.workbook.close()\n    print 'Created ' + str(self.workbook_name) + '.xlsx'\n\ndef print_frame(self, worksheet, dataframe, df_width, start_data_index):\n\n    col_as_lists = []\n    col_names = list(dataframe.columns.values)    \n\n    # loops through columns in df and converts to list\n    for n in range(0, df_width):\n        col_n = dataframe[col_names[n]].tolist()\n\n        # checks to see if column has numbers, if so -&gt; convert to float!\n        if n &lt; start_data_index:\n            col_n.insert(0, col_names[n])\n\n        elif self.is_number(col_n[0]):\n            convert = col_n[0:]\n            convert = [float(x) for x in convert]\n            convert.insert(0, col_names[n])\n            col_n = convert\n        else:\n            col_n.insert(0, col_names[n])\n\n        col_as_lists.append(col_n)\n\n        # Prints each list into the worksheet.\n        worksheet.write_column(self.letters[n] + '1', col_as_lists[n])\n\n    #Formats numerical data as percentage\n    percentformat = self.workbook.add_format({'num_format': '0%'})\n    worksheet.set_column(self.letters[start_data_index] + ':' + self.letters[df_width], None, percentformat)\n\n\ndef add_chart(self, dataframe, tab_name, start_data_index):\n\n    df_width = len(dataframe.columns)\n\n    worksheet = self.workbook.add_worksheet(tab_name)\n    self.print_frame(worksheet, dataframe, df_width, start_data_index)\n\n    chart = self.workbook.add_chart({'type': 'column'})\n    df_length = (len(dataframe.index))\n\n    for n in range(start_data_index, df_width):\n\n        chart.add_series({\n            'name': '=' + tab_name +'!$' + self.letters[n] + '$1',\n            'categories': '=' + tab_name +'!$' + self.letters[start_data_index - 1] + '$2:$'+ self.letters[start_data_index - 1] + '$' + str(df_length + 1),\n            'values': '=' + tab_name +'!$' + self.letters[n] + '$2:$'+ self.letters[n] + '$' + str(df_length + 1),\n            'fill': {'color': '#FFB11E'},\n            'data_labels': {'value': True, 'center': True}\n        })\n\n    chart.set_title({'name': tab_name})\n    chart.set_x_axis({'major_gridlines': {'visible': False}})\n    chart.set_y_axis({'major_gridlines': {'visible': False}, 'max': .70})\n\n    worksheet.insert_chart(self.letters[df_width + 2] + '2', chart)\n\n    return\n\ndef is_number(self, s):\n    \"\"\" Function used to help with detecting and converting floats \n    from string to number data types.\"\"\"\n    try:\n        float(s)\n        return True\n    except ValueError:\n        return False\n</code></pre>\n"}, {"tags": ["python", "instagram", "instagram-api"], "answers": [{"comments": [{"owner": {"reputation": 1341, "user_id": 3907365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17d58f74c0a8f023bf659922c0606fb7?s=128&d=identicon&r=PG&f=1", "display_name": "coderz", "link": "https://stackoverflow.com/users/3907365/coderz"}, "edited": false, "score": 0, "creation_date": 1450936343, "post_id": 34442825, "comment_id": 56637761, "body": "i think the <code>&#39;count&#39;: 10</code> parameter should not be passed in the signature generation as its not present in the url.  As per the Insta doc -       &gt; Token: API endpoint appended with a concatenation of all key/value pairs of your request parameters, sorted by key in ascending order. Each key/value pair is separated by the pipe character.  So either you add the count to your API request URL or remove it from the signature generation params, otherwise it will still give a &quot;Invalid signed request&quot; error!"}, {"owner": {"reputation": 695, "user_id": 4673553, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/71bbb290f3569d22a0aaad9da836e210?s=128&d=identicon&r=PG&f=1", "display_name": "Arjun", "link": "https://stackoverflow.com/users/4673553/arjun"}, "edited": false, "score": 0, "creation_date": 1450946925, "post_id": 34442825, "comment_id": 56641338, "body": "@felipsmartins Thanks for the answer. I tried it but it still doesn&#39;t work. It gives me the same &#39;Invalid signed-request: Signature does not match&#39; error."}, {"owner": {"reputation": 695, "user_id": 4673553, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/71bbb290f3569d22a0aaad9da836e210?s=128&d=identicon&r=PG&f=1", "display_name": "Arjun", "link": "https://stackoverflow.com/users/4673553/arjun"}, "reply_to_user": {"reputation": 1341, "user_id": 3907365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17d58f74c0a8f023bf659922c0606fb7?s=128&d=identicon&r=PG&f=1", "display_name": "coderz", "link": "https://stackoverflow.com/users/3907365/coderz"}, "edited": false, "score": 0, "creation_date": 1450947000, "post_id": 34442825, "comment_id": 56641366, "body": "@coderz I tried that as well. I removed it from the params and added it my URL as: <a href=\"https://api.instagram.com/v1/media/search?lat=48.858844&amp;lng=2.294351&amp;access_token=ACCESS-TOKEN&amp;sig=SIG&amp;count=10\" rel=\"nofollow noreferrer\">api.instagram.com/v1/media/&hellip;</a>. But, it still gives me the same error!"}, {"owner": {"reputation": 11566, "user_id": 1262820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mq3Cq.png?s=128&g=1", "display_name": "felipsmartins", "link": "https://stackoverflow.com/users/1262820/felipsmartins"}, "reply_to_user": {"reputation": 695, "user_id": 4673553, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/71bbb290f3569d22a0aaad9da836e210?s=128&d=identicon&r=PG&f=1", "display_name": "Arjun", "link": "https://stackoverflow.com/users/4673553/arjun"}, "edited": false, "score": 0, "creation_date": 1450959684, "post_id": 34442825, "comment_id": 56646873, "body": "@Arjun Have you  enabled &quot;Signed Requests&quot;? Also, can you provide the full error message information?"}, {"owner": {"reputation": 695, "user_id": 4673553, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/71bbb290f3569d22a0aaad9da836e210?s=128&d=identicon&r=PG&f=1", "display_name": "Arjun", "link": "https://stackoverflow.com/users/4673553/arjun"}, "edited": false, "score": 0, "creation_date": 1450961328, "post_id": 34442825, "comment_id": 56647520, "body": "@felipsmartins The error message was:  {&quot;code&quot;: 403, &quot;error_type&quot;: &quot;OAuthForbiddenException&quot;, &quot;error_message&quot;: &quot;Invalid signed-request: Signature does not match&quot;} Also, I unticked  &#39;Enforce Signed Requests&#39; and Now I am able to get the data."}, {"owner": {"reputation": 11566, "user_id": 1262820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mq3Cq.png?s=128&g=1", "display_name": "felipsmartins", "link": "https://stackoverflow.com/users/1262820/felipsmartins"}, "reply_to_user": {"reputation": 695, "user_id": 4673553, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/71bbb290f3569d22a0aaad9da836e210?s=128&d=identicon&r=PG&f=1", "display_name": "Arjun", "link": "https://stackoverflow.com/users/4673553/arjun"}, "edited": false, "score": 0, "creation_date": 1450962484, "post_id": 34442825, "comment_id": 56648000, "body": "@Arjun okay, I&#39;ll give a try later. BTW, there&#39;s some reason which you don&#39;t use the official client library? The official client library supports signed requests automatically."}, {"owner": {"reputation": 695, "user_id": 4673553, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/71bbb290f3569d22a0aaad9da836e210?s=128&d=identicon&r=PG&f=1", "display_name": "Arjun", "link": "https://stackoverflow.com/users/4673553/arjun"}, "edited": false, "score": 0, "creation_date": 1450970712, "post_id": 34442825, "comment_id": 56651337, "body": "@felipsmartins Do you mean this? <a href=\"https://github.com/Instagram/python-instagram\" rel=\"nofollow noreferrer\">github.com/Instagram/python-instagram</a> .. I started with it but decided that I can learn better about working with an API if I do it manually :)"}, {"owner": {"reputation": 11566, "user_id": 1262820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mq3Cq.png?s=128&g=1", "display_name": "felipsmartins", "link": "https://stackoverflow.com/users/1262820/felipsmartins"}, "reply_to_user": {"reputation": 695, "user_id": 4673553, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/71bbb290f3569d22a0aaad9da836e210?s=128&d=identicon&r=PG&f=1", "display_name": "Arjun", "link": "https://stackoverflow.com/users/4673553/arjun"}, "edited": false, "score": 0, "creation_date": 1450976880, "post_id": 34442825, "comment_id": 56653607, "body": "@Arjun It works for me. Look my answer again, I&#39;ve edited with snippet working code."}, {"owner": {"reputation": 695, "user_id": 4673553, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/71bbb290f3569d22a0aaad9da836e210?s=128&d=identicon&r=PG&f=1", "display_name": "Arjun", "link": "https://stackoverflow.com/users/4673553/arjun"}, "edited": false, "score": 0, "creation_date": 1451039924, "post_id": 34442825, "comment_id": 56666005, "body": "@felipsmartins Thank you so much! It works well.. could you tell me what I was doing wrong though?"}, {"owner": {"reputation": 11566, "user_id": 1262820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mq3Cq.png?s=128&g=1", "display_name": "felipsmartins", "link": "https://stackoverflow.com/users/1262820/felipsmartins"}, "reply_to_user": {"reputation": 695, "user_id": 4673553, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/71bbb290f3569d22a0aaad9da836e210?s=128&d=identicon&r=PG&f=1", "display_name": "Arjun", "link": "https://stackoverflow.com/users/4673553/arjun"}, "edited": false, "score": 0, "creation_date": 1451064345, "post_id": 34442825, "comment_id": 56671679, "body": "@Arjun If you&#39;ve been getting &quot;Invalid signed-request: Signature does not match&quot; it means values encoded and sent to request was wrong. Just compare my snippet code to your code."}], "tags": [], "owner": {"reputation": 11566, "user_id": 1262820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mq3Cq.png?s=128&g=1", "display_name": "felipsmartins", "link": "https://stackoverflow.com/users/1262820/felipsmartins"}, "is_accepted": true, "score": 3, "last_activity_date": 1450976572, "last_edit_date": 1450976572, "creation_date": 1450900656, "answer_id": 34442825, "question_id": 34442501, "link": "https://stackoverflow.com/questions/34442501/instagram-signature-did-not-match/34442825#34442825", "title": "Instagram: Signature did not match", "body": "<p>From docs:</p>\n\n<blockquote>\n  <p>When enabled, Instagram will check for the <em>sig</em> parameter of each\n  request and verify that the value matches a hash computed using your\n  Client Secret. The expected value is a HMAC using the SHA256 hash\n  algorithm with <strong>all your request parameters</strong> and your Client Secret.</p>\n</blockquote>\n\n<p>Your signature generator function is okay, but it is not includes all params. It should be:</p>\n\n<pre><code>params = {\n    'access_token': _______________,\n    'count': 10,\n    'lat':  \"&lt;lat value&gt;\",\n    'lng': \"&lt;long value&gt;\",\n}\n</code></pre>\n\n<p>It should be work well.\nAlso, here is some helpful aditional guidelines:<br>\n<a href=\"http://instagram-api.tumblr.com/post/120586735719/instagram-secure-api-requests\" rel=\"nofollow\">http://instagram-api.tumblr.com/post/120586735719/instagram-secure-api-requests</a></p>\n\n<h1>EDIT:</h1>\n\n<p>Here is exactly as I did:</p>\n\n<pre><code># coding: utf-8\n\n# My client_id, secret, access_token, etc...\nimport settings\nfrom urllib import urlencode\nimport hmac\nfrom hashlib import sha256\n\ndef generate_sig(endpoint, params, secret):\n    sig = endpoint\n    for key in sorted(params.keys()):\n        sig += '|%s=%s' % (key, params[key])\n    return hmac.new(secret, sig, sha256).hexdigest()\n\n\nendpoint = '/media/search'\nparams = {\n    'access_token': settings.ACCESS_TOKEN,\n    'lat': '48.858844',\n    'lng': '2.294351',\n    'count': 10,\n}\nparams.update({'sig': generate_sig(endpoint, params, settings.CLIENT_SECRET)})\nurl = 'https://api.instagram.com/v1' + endpoint + '?' + urlencode(params)\n\n# Success!!!\nprint url\n</code></pre>\n\n<p>It should give us an URL like this format:</p>\n\n<pre><code>https://api.instagram.com/v1/media/search?access_token=XXX&amp;lat=XXX&amp;lng=XXX&amp;sig=XXX&amp;count=XXX\n</code></pre>\n"}], "owner": {"reputation": 695, "user_id": 4673553, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/71bbb290f3569d22a0aaad9da836e210?s=128&d=identicon&r=PG&f=1", "display_name": "Arjun", "link": "https://stackoverflow.com/users/4673553/arjun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1857, "favorite_count": 0, "accepted_answer_id": 34442825, "answer_count": 1, "score": 0, "last_activity_date": 1450976572, "creation_date": 1450899126, "question_id": 34442501, "link": "https://stackoverflow.com/questions/34442501/instagram-signature-did-not-match", "title": "Instagram: Signature did not match", "body": "<p>I'm trying to get started with the Instagram API but I can't even make a simple call because I get an error </p>\n\n<pre><code>{\"code\": 403, \"error_type\": \"OAuthForbiddenException\", \"error_message\": \"Invalid signed-request: Signature does not match\"}\n</code></pre>\n\n<p>I generated my <code>access_token</code> with scope as <code>likes+comments</code>.</p>\n\n<p>This is my URL: \n<a href=\"https://api.instagram.com/v1/media/search?lat=48.858844&amp;lng=2.294351&amp;access_token=ACCESS-TOKEN&amp;sig=SIG\" rel=\"nofollow\">https://api.instagram.com/v1/media/search?lat=48.858844&amp;lng=2.294351&amp;access_token=ACCESS-TOKEN&amp;sig=SIG</a></p>\n\n<p>I generated the signature using this script from the Instagram developer site because it initially gave me</p>\n\n<pre><code>\"Invalid signed-request: Missing required parameter 'sig'\"\n</code></pre>\n\n<p>This is the script:</p>\n\n<pre><code>    # -*- coding: UTF-8 -*-\nimport hmac\nfrom hashlib import sha256\n\ndef generate_sig(endpoint, params, secret):\n    sig = endpoint\n    for key in sorted(params.keys()):\n        sig += '|%s=%s' % (key, params[key])\n    return hmac.new(secret, sig, sha256).hexdigest()\n\nendpoint = 'media/search'\nparams = {\n    'access_token': _______________,\n    'count': 10,\n}\nsecret = ______________________\nsig = generate_sig(endpoint, params, secret)\nprint \"sig is\",sig\n</code></pre>\n\n<p>Any help is appreciated! \nThanks</p>\n"}, {"tags": ["python", "json", "flask", "openshift"], "comments": [{"owner": {"reputation": 9745, "user_id": 1443118, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d758a80b64e30e08da95ae0430e420a5?s=128&d=identicon&r=PG", "display_name": "reptilicus", "link": "https://stackoverflow.com/users/1443118/reptilicus"}, "edited": false, "score": 0, "creation_date": 1450899392, "post_id": 34442485, "comment_id": 56626730, "body": "can you run in debug and send full traceback?"}, {"owner": {"reputation": 54548, "user_id": 128141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dfb4afd84b106d0855184bf0ae4675?s=128&d=identicon&r=PG", "display_name": "Graham Dumpleton", "link": "https://stackoverflow.com/users/128141/graham-dumpleton"}, "edited": false, "score": 0, "creation_date": 1450920639, "post_id": 34442485, "comment_id": 56634344, "body": "What was the name of the file you put this in? If this was added as <code>wsgi.py</code> it will not work unless you have set an override environment variable for the name of the WSGI application entry point. If this was added as <code>app.py</code>, you haven&#39;t used the environment variable to say what port you should be listening on to customise what port the Flask server will listen on."}, {"owner": {"reputation": 778, "user_id": 1048839, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/be02b82323745857876f3b2e78fdb5d0?s=128&d=identicon&r=PG", "display_name": "user1048839", "link": "https://stackoverflow.com/users/1048839/user1048839"}, "reply_to_user": {"reputation": 9745, "user_id": 1443118, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d758a80b64e30e08da95ae0430e420a5?s=128&d=identicon&r=PG", "display_name": "reptilicus", "link": "https://stackoverflow.com/users/1443118/reptilicus"}, "edited": false, "score": 0, "creation_date": 1451040458, "post_id": 34442485, "comment_id": 56666113, "body": "@reptilicus I added ran in debug mode but just nothing more shows up in the logs, even for 500 errors. Just getting <code>127.8.182.1 - - [25&#47;Dec&#47;2015 05:37:43] &quot;POST &#47;mine HTTP&#47;1.1&quot; 400 - </code>"}, {"owner": {"reputation": 778, "user_id": 1048839, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/be02b82323745857876f3b2e78fdb5d0?s=128&d=identicon&r=PG", "display_name": "user1048839", "link": "https://stackoverflow.com/users/1048839/user1048839"}, "reply_to_user": {"reputation": 54548, "user_id": 128141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dfb4afd84b106d0855184bf0ae4675?s=128&d=identicon&r=PG", "display_name": "Graham Dumpleton", "link": "https://stackoverflow.com/users/128141/graham-dumpleton"}, "edited": false, "score": 0, "creation_date": 1451040531, "post_id": 34442485, "comment_id": 56666122, "body": "@GrahamDumpleton Am using the standard file structure created by openshift while creating a Flask app as seem above. So my code goes into <code>flaskapp.py</code>"}], "answers": [{"tags": [], "owner": {"reputation": 778, "user_id": 1048839, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/be02b82323745857876f3b2e78fdb5d0?s=128&d=identicon&r=PG", "display_name": "user1048839", "link": "https://stackoverflow.com/users/1048839/user1048839"}, "is_accepted": true, "score": 2, "last_activity_date": 1451044004, "creation_date": 1451044004, "answer_id": 34462562, "question_id": 34442485, "link": "https://stackoverflow.com/questions/34442485/400-bad-request-while-posting-json-to-flask-on-openshift/34462562#34462562", "title": "400 Bad Request while POSTing json to Flask on openshift", "body": "<p>I found that a <code>POST</code> using curl without specifying the Content-Type defaults to sending <code>Content-Type application/x-www-form-urlencoded</code></p>\n\n<p><a href=\"http://curl.haxx.se/docs/httpscripting.html#POST\" rel=\"nofollow\">http://curl.haxx.se/docs/httpscripting.html#POST</a></p>\n\n<p>And if the (different) mimetype exists in Flask, then the json data becomes unavailable; hence <code>request.get_json(force=True)</code> fails.</p>\n\n<p>I therefore changed my code to look for form-data first before anything else</p>\n\n<pre><code>if request.form:\n   content = [item for item in request.form]\n   print \"Content:\", ''.join(content)\nelse:\n   content = request.get_json(force=True)\n   print \"Content:\", content\n</code></pre>\n"}], "owner": {"reputation": 778, "user_id": 1048839, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/be02b82323745857876f3b2e78fdb5d0?s=128&d=identicon&r=PG", "display_name": "user1048839", "link": "https://stackoverflow.com/users/1048839/user1048839"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 989, "favorite_count": 0, "accepted_answer_id": 34462562, "answer_count": 1, "score": 1, "last_activity_date": 1451044004, "creation_date": 1450899085, "last_edit_date": 1451040327, "question_id": 34442485, "link": "https://stackoverflow.com/questions/34442485/400-bad-request-while-posting-json-to-flask-on-openshift", "title": "400 Bad Request while POSTing json to Flask on openshift", "body": "<p>I have read all related SO questions on this but I still keep encountering this error(400 - Bad Request) when posting json to my Flask app running on RedHat's openshift cloud platform.</p>\n\n<p>This is my code:</p>\n\n<p><code>flaskapp.py</code></p>\n\n<pre><code>import os\nfrom datetime import datetime\nfrom flask import Flask, request, flash, url_for, redirect, \\\n     render_template, abort, send_from_directory\n\napp = Flask(__name__)\napp.config.from_pyfile('flaskapp.cfg')\n\n@app.route('/')\ndef index():\n    return render_template('index.html')\n\n@app.route('/&lt;path:resource&gt;')\ndef serveStaticResource(resource):\n    return send_from_directory('static/', resource)\n\n@app.route(\"/test\")\ndef test():\n    return \"&lt;strong&gt;It's Alive!&lt;/strong&gt;\"\n\n@app.route('/mine', methods=['POST'])\ndef mine():\n    content = request.get_json(force=True)\n    print content\n\n    return \"Success!\\n\"\n\nif __name__ == '__main__':\n    app.run(debug=True)\n</code></pre>\n\n<p>This is how my <code>app.py</code> looks like</p>\n\n<pre><code>#!/usr/bin/env python\n\n# This file may be used instead of Apache mod_wsgi to run your python\n# web application in a different framework.  A few examples are\n# provided (cherrypi, gevent), but this file may be altered to run\n# whatever framework is desired - or a completely customized service.\n#\nimport imp\nimport os\nimport sys\n\ntry:\n  virtenv = os.path.join(os.environ.get('OPENSHIFT_PYTHON_DIR','.'), 'virtenv')\n  python_version = \"python\"+str(sys.version_info[0])+\".\"+str(sys.version_info[1]) \n  os.environ['PYTHON_EGG_CACHE'] = os.path.join(virtenv, 'lib', python_version, 'site-packages')\n  virtualenv = os.path.join(virtenv, 'bin','activate_this.py')\n  if(sys.version_info[0] &lt; 3):\n    execfile(virtualenv, dict(__file__=virtualenv))\n  else:\n    exec(open(virtualenv).read(), dict(__file__=virtualenv))\n\nexcept IOError:\n  pass\n\n#\n# IMPORTANT: Put any additional includes below this line.  If placed above this\n# line, it's possible required libraries won't be in your searchable path\n#\n\n\n#\n#  main():\n#\nif __name__ == '__main__':\n  application = imp.load_source('app', 'flaskapp.py')\n  port = application.app.config['PORT']\n  ip = application.app.config['IP']\n  app_name = application.app.config['APP_NAME']\n  host_name = application.app.config['HOST_NAME']\n\n  fwtype=\"wsgiref\"\n  for fw in (\"gevent\", \"cherrypy\", \"flask\"):\n    try:\n      imp.find_module(fw)\n      fwtype = fw\n    except ImportError:\n      pass\n\n  print('Starting WSGIServer type %s on %s:%d ... ' % (fwtype, ip, port))\n  if fwtype == \"gevent\":\n    from gevent.pywsgi import WSGIServer\n    WSGIServer((ip, port), application.app).serve_forever()\n\n  elif fwtype == \"cherrypy\":\n    from cherrypy import wsgiserver\n    server = wsgiserver.CherryPyWSGIServer(\n      (ip, port), application.app, server_name=host_name)\n    server.start()\n\n  elif fwtype == \"flask\":\n    from flask import Flask\n    server = Flask(__name__)\n    server.wsgi_app = application.app\n    server.run(host=ip, port=port)\n\n  else:\n    from wsgiref.simple_server import make_server\n    make_server(ip, port, application.app).serve_forever()\n</code></pre>\n\n<p>And this how am posting the data:</p>\n\n<blockquote>\n  <p>curl -X POST -H \"application/json\" -d '{\"key\":\"val\"}'\n  <a href=\"https://python-bonga.rhcloud.com/mine\" rel=\"nofollow\">https://python-bonga.rhcloud.com/mine</a></p>\n</blockquote>\n\n<p><strong>N/B:</strong> This works fine on localhost</p>\n"}, {"tags": ["python", "scikit-learn"], "answers": [{"comments": [{"owner": {"reputation": 6134, "user_id": 2424587, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/c95aa6752be7d1cc0e88f7a4ad2f9106?s=128&d=identicon&r=PG", "display_name": "Hanan Shteingart", "link": "https://stackoverflow.com/users/2424587/hanan-shteingart"}, "edited": false, "score": 0, "creation_date": 1451300905, "post_id": 34458030, "comment_id": 56726441, "body": "Hi @Olologin, I have tried your change but it doesn&#39;t help as the check fails on other issue namely: &quot;File &quot;C:\\Users\\XXX\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-pac&zwnj;&#8203;kages\\sklearn\\utils\\&zwnj;&#8203;estimator_checks.py&quot;&zwnj;&#8203;, line 1419, in check_parameters_default_constructible     np.float64, types.FunctionType, Memory]) AssertionError: &lt;class &#39;sklearn.linear_model.logistic.LogisticRegression&#39;&gt; not found in [&lt;class &#39;str&#39;&gt;, &lt;class &#39;int&#39;&gt;, &lt;class &#39;float&#39;&gt;, &lt;class &#39;bool&#39;&gt;, &lt;class &#39;tuple&#39;&gt;, &lt;class &#39;NoneType&#39;&gt;, &lt;class &#39;numpy.float64&#39;&gt;, &lt;class &#39;function&#39;&gt;, &lt;class &#39;sklearn.externals.joblib.memory.Memory&#39;&gt;]&quot;"}, {"owner": {"reputation": 6134, "user_id": 2424587, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/c95aa6752be7d1cc0e88f7a4ad2f9106?s=128&d=identicon&r=PG", "display_name": "Hanan Shteingart", "link": "https://stackoverflow.com/users/2424587/hanan-shteingart"}, "edited": false, "score": 0, "creation_date": 1451301014, "post_id": 34458030, "comment_id": 56726497, "body": "I have started an issue in the project&#39;s github:  <a href=\"https://github.com/scikit-learn/scikit-learn/issues/6079#issuecomment-166990309\" rel=\"nofollow noreferrer\">fail to write a wrapper class to an estimator #6079</a>"}], "tags": [], "owner": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "is_accepted": false, "score": 3, "last_activity_date": 1450992314, "creation_date": 1450992314, "answer_id": 34458030, "question_id": 34442455, "link": "https://stackoverflow.com/questions/34442455/sklearn-wrapping-an-estimator-causes-error-on-get-params-missing-self/34458030#34458030", "title": "sklearn wrapping an estimator causes error on get_params missing self", "body": "<p><code>base_estimator</code> field must be initialized with object, instead of Class.</p>\n\n<pre><code>....\ndef __init__(self, base_estimator=LogisticRegression(), ...\n....\n</code></pre>\n\n<p>Your error happens because clone(safe=False) is used in some of tests.</p>\n\n<blockquote>\n<pre><code>safe: boolean, optional\n    If safe is false, clone will fall back to a deepcopy on objects\n    that are not estimators.\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 6134, "user_id": 2424587, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/c95aa6752be7d1cc0e88f7a4ad2f9106?s=128&d=identicon&r=PG", "display_name": "Hanan Shteingart", "link": "https://stackoverflow.com/users/2424587/hanan-shteingart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2206, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1450992314, "creation_date": 1450898931, "question_id": 34442455, "link": "https://stackoverflow.com/questions/34442455/sklearn-wrapping-an-estimator-causes-error-on-get-params-missing-self", "title": "sklearn wrapping an estimator causes error on get_params missing self", "body": "<p>I am trying to inherit from <code>BaseEstimator</code> and <code>MetaEstimatorMixin</code> to create a wrapping for a <code>base_estimator</code> but I am facing problems. I was trying to follow the <code>base_ensemble</code> code in the repository but it didn't help. I get <code>TypeError: get_params() missing 1 required positional argument: 'self'</code> when running the test below which calls <code>check_estimator(Wrapper)</code>. According to documentation I don't have to implement get_params if I inherit from <code>BaseEstimator</code>. It seems like something is a class rather than an instance but I am not able to nail it down.</p>\n\n<pre><code>from sklearn.base import BaseEstimator, ClassifierMixin, RegressorMixin, MetaEstimatorMixin, clone\nfrom functools import lru_cache\nimport numpy as np\nfrom sklearn.linear_model import LogisticRegression\n\n'''\nthis is a module containing classes which wraps a classifier or a regressor sklearn estimator\n'''\n\n\nclass Wrapper(BaseEstimator, MetaEstimatorMixin):\n    def __init__(self, base_estimator=LogisticRegression, estimator_params=None):\n        super().__init__()\n        self.base_estimator = base_estimator\n        self.estimator_params = estimator_params\n\n    def fit(self, x, y):\n        self.model = self._make_estimator().fit(x,y)\n\n    def _make_estimator(self):\n        \"\"\"Make and configure a copy of the `base_estimator_` attribute.\n        Warning: This method should be used to properly instantiate new\n        sub-estimators. taken from sklearn github\n        \"\"\"\n        estimator = self.base_estimator()\n        estimator.set_params(**dict((p, getattr(self, p))\n                                    for p in self.estimator_params))\n\n        return estimator\n\n    def predict(self, x):\n        self.model.predict(x)\n\n\nimport unittest\nfrom sklearn.utils.estimator_checks import check_estimator\nclass Test(unittest.TestCase):\n    def test_check_estimator(self):\n        check_estimator(Wrapper)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3764, "user_id": 4106826, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--44xjd_1cu0/AAAAAAAAAAI/AAAAAAAACe0/OOFCuOSMLNk/photo.jpg?sz=128", "display_name": "Salvador Medina", "link": "https://stackoverflow.com/users/4106826/salvador-medina"}, "edited": false, "score": 0, "creation_date": 1450899259, "post_id": 34442448, "comment_id": 56626669, "body": "Could you please explain a little bit more the expected output?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1450899550, "post_id": 34442448, "comment_id": 56626804, "body": "<code>d = dict.fromkeys(KEYS1, dict.fromkeys(KEYS2, 0))</code> - watch out. Every value in the outer dict is the <i>same</i> inner dict, so anything you do to <code>d[&#39;A&#39;]</code> will be visible through <code>d[&#39;B&#39;]</code>."}, {"owner": {"reputation": 271, "user_id": 5073217, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/077a1e82c578e8c01edf8f19a9dbbddc?s=128&d=identicon&r=PG&f=1", "display_name": "Oxonon", "link": "https://stackoverflow.com/users/5073217/oxonon"}, "edited": false, "score": 0, "creation_date": 1450899709, "post_id": 34442448, "comment_id": 56626880, "body": "Oh, you&#39;re right user2357112 - thanks for catching this. What would you suggest for instantiation of 2 dim storage with keys to zeros?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1450899843, "post_id": 34442448, "comment_id": 56626949, "body": "@Oxonon: Dict comprehension, or <code>dict</code> with a genexp in Python &lt;2.7. <code>{key1: dict.fromkeys(KEYS2, 0) for key1 in KEYS1}</code>, or <code>dict((key1, dict.fromkeys(KEYS2, 0)) for key1 in KEYS1)</code>. In cases where the inner values also need to be distinct, you can replace the inner <code>fromkeys</code> with a dict comprehension too."}], "answers": [{"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 10, "last_activity_date": 1450924950, "last_edit_date": 1450924950, "creation_date": 1450899572, "answer_id": 34442605, "question_id": 34442448, "link": "https://stackoverflow.com/questions/34442448/how-to-use-string-format-with-nested-dict/34442605#34442605", "title": "How to use string.format with nested dict", "body": "<pre><code>KEYS1 = (\"A\", \"B\", \"C\")\nKEYS2 = (\"X\", \"Y\", \"Z\")\n\nd = dict.fromkeys(KEYS1, dict.fromkeys(KEYS2, 0))\n\nprint(\"d['A']['X']={A[X]}\".format(**d))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>d['A']['X']=0\n</code></pre>\n\n<p>From python 3.6 you will be able to access the dict in the string use <a href=\"https://www.python.org/dev/peps/pep-0498/\" rel=\"noreferrer\">Literal string interpolation</a>:</p>\n\n<pre><code>In [23]: print(f\"d['A']['X']={d['A']['X']}\")\nd['A']['X']=0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7104, "user_id": 1612701, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/cdF23.jpg?s=128&g=1", "display_name": "Cody Piersall", "link": "https://stackoverflow.com/users/1612701/cody-piersall"}, "is_accepted": false, "score": 3, "last_activity_date": 1450899833, "last_edit_date": 1495540746, "creation_date": 1450899833, "answer_id": 34442654, "question_id": 34442448, "link": "https://stackoverflow.com/questions/34442448/how-to-use-string-format-with-nested-dict/34442654#34442654", "title": "How to use string.format with nested dict", "body": "<p>You can take advantage of <code>str.format</code>'s ability to do subscripting on the arguments you provide.</p>\n\n<pre><code>KEYS1 = (\"A\", \"B\", \"C\")\nKEYS2 = (\"X\", \"Y\", \"Z\")\n\nd = dict.fromkeys(KEYS1, dict.fromkeys(KEYS2, 0))\n\nprint(\"d['A']['X']={[A][X]}\".format(d))\n</code></pre>\n\n<p>This is really similar to <a href=\"https://stackoverflow.com/a/34442605/1612701\">Padraic Cunningham's answer</a>, which is also a good and correct way to do it (which is why I +1'd it).  The difference is that in his answer, the part of the string <code>{A[X]}</code> means that the <code>.format</code> method is looking for a keyword argument, which gets provided by unpacking the dict <code>d</code>.</p>\n\n<p>In my method, it is expecting a positional argument, which must be a dict with a key <code>'A'</code>, which must also be a dict with the key <code>'X'</code></p>\n"}], "owner": {"reputation": 271, "user_id": 5073217, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/077a1e82c578e8c01edf8f19a9dbbddc?s=128&d=identicon&r=PG&f=1", "display_name": "Oxonon", "link": "https://stackoverflow.com/users/5073217/oxonon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2975, "favorite_count": 1, "accepted_answer_id": 34442605, "answer_count": 2, "score": 8, "last_activity_date": 1450924950, "creation_date": 1450898889, "last_edit_date": 1450899432, "question_id": 34442448, "link": "https://stackoverflow.com/questions/34442448/how-to-use-string-format-with-nested-dict", "title": "How to use string.format with nested dict", "body": "<p>I have a nested dict:</p>\n\n<pre><code>KEYS1 = (\"A\", \"B\", \"C\")\nKEYS2 = (\"X\", \"Y\", \"Z\")\n\nd = dict.fromkeys(KEYS1, dict.fromkeys(KEYS2, 0))\n</code></pre>\n\n<p>I'd now like to embed its values in a string using format, something like</p>\n\n<pre><code>print(\"d['A']['X']={A,X:d}\".format(**d))\n</code></pre>\n\n<p>to output:</p>\n\n<pre><code>d['A']['X']=0\n</code></pre>\n\n<p>That does not work. Any suggestions on how to do this correctly?</p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"comments": [{"owner": {"reputation": 2946, "user_id": 4359986, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7e06667eb789ed0f6e469490a5e8ee83?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4359986/alex"}, "edited": false, "score": 0, "creation_date": 1450900361, "post_id": 34442629, "comment_id": 56627180, "body": "Thanks! After doing your suggestion, it all worked. Just curious, are  init_op = tf.initialize_all_variables() init_op.run()  and session.run(init_op) equivalent to each other?"}, {"owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "reply_to_user": {"reputation": 2946, "user_id": 4359986, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7e06667eb789ed0f6e469490a5e8ee83?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4359986/alex"}, "edited": false, "score": 1, "creation_date": 1450900598, "post_id": 34442629, "comment_id": 56627285, "body": "If you&#39;re inside a <code>with tf.Session():</code> or <code>with sess.as_default():</code>, or a using a <code>tf.InteractiveSession</code>, they&#39;re equivalent. Otherwise, only the <code>session.run(init_op)</code> version will work."}], "tags": [], "owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "is_accepted": true, "score": 5, "last_activity_date": 1450899718, "creation_date": 1450899718, "answer_id": 34442629, "question_id": 34442420, "link": "https://stackoverflow.com/questions/34442420/changing-tensorflow-mnist-code-with-interactive-session-into-session/34442629#34442629", "title": "Changing Tensorflow MNIST code with interactive session into session", "body": "<p>There are just two things you need to change to make this work:</p>\n\n<ol>\n<li><p>Initialise the variables before running the first training steps.</p>\n\n<pre><code>init_op = tf.initialize_all_variables()\ninit_op.run()\nfor i in range(1000):\n    # \u2026\n</code></pre>\n\n<p>This will fix the first error you are seeing, and is an important first step in any TensorFlow program that uses variables.</p></li>\n<li><p>Inline the bodies of <code>train()</code> and <code>eval()</code> in the <code>with tf.Session() as sess:</code> block. Your <code>eval()</code> function uses local variables from <code>train()</code> so the code is not valid Python as written. (Note that the <code>sess.run()</code> around <code>train()</code> and <code>eval()</code> is incorrect too\u2014those functions don't have a return value, so this is equivalent to calling <code>sess.run(None)</code>, which will raise an error.)</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 20711, "user_id": 5545260, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bKB2xg1RkdE/AAAAAAAAAAI/AAAAAAAAgnM/sdLgfXnDtwM/photo.jpg?sz=128", "display_name": "dga", "link": "https://stackoverflow.com/users/5545260/dga"}, "edited": false, "score": 0, "creation_date": 1461604066, "post_id": 34442780, "comment_id": 61262732, "body": "Note that it&#39;s faster to create your graph <i>before</i> creating the session.  (i.e., moving <code>x = ..</code> through <code>init_op = ...</code> to outside of the <code>with tf.Session</code> block."}], "tags": [], "owner": {"reputation": 2946, "user_id": 4359986, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7e06667eb789ed0f6e469490a5e8ee83?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4359986/alex"}, "is_accepted": false, "score": 1, "last_activity_date": 1450900432, "creation_date": 1450900432, "answer_id": 34442780, "question_id": 34442420, "link": "https://stackoverflow.com/questions/34442420/changing-tensorflow-mnist-code-with-interactive-session-into-session/34442780#34442780", "title": "Changing Tensorflow MNIST code with interactive session into session", "body": "<p>The following code works:</p>\n\n<pre><code>import input_data\nmnist = input_data.read_data_sets('MNIST_data', one_hot=True)\n\nimport tensorflow as tf\n\nwith tf.Session() as sess:\n\n    x = tf.placeholder(\"float\", shape=[None, 784])\n    y_ = tf.placeholder(\"float\", shape=[None, 10])\n    W = tf.Variable(tf.zeros([784,10]))\n    b = tf.Variable(tf.zeros([10]))\n    y = tf.nn.softmax(tf.matmul(x,W) + b)\n    init_op = tf.initialize_all_variables()\n    init_op.run()\n    cross_entropy = -tf.reduce_sum(y_*tf.log(y))\n    train_step = tf.train.GradientDescentOptimizer(0.01).minimize(cross_entropy)\n    for i in range(1000):\n        batch = mnist.train.next_batch(50)\n        train_step.run(feed_dict={x: batch[0], y_: batch[1]})\n\n    correct_prediction = tf.equal(tf.argmax(y,1), tf.argmax(y_,1))\n    accuracy = tf.reduce_mean(tf.cast(correct_prediction, \"float\"))\n    print(accuracy.eval(feed_dict={x: mnist.test.images, y_: mnist.test.labels}))\n</code></pre>\n"}], "owner": {"reputation": 2946, "user_id": 4359986, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7e06667eb789ed0f6e469490a5e8ee83?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4359986/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2030, "favorite_count": 0, "accepted_answer_id": 34442629, "answer_count": 2, "score": 2, "last_activity_date": 1450900432, "creation_date": 1450898769, "question_id": 34442420, "link": "https://stackoverflow.com/questions/34442420/changing-tensorflow-mnist-code-with-interactive-session-into-session", "title": "Changing Tensorflow MNIST code with interactive session into session", "body": "<p>So, I have been learning tensorflow, and I have tried to change the code on the documentation from being run on an interactive session to being run in a regular session, so that I can run the python file containing the code from command line. The relevant tensorflow code is here: <a href=\"https://www.tensorflow.org/versions/master/tutorials/mnist/pros/index.html\" rel=\"nofollow\">https://www.tensorflow.org/versions/master/tutorials/mnist/pros/index.html</a></p>\n\n<p>Here is my code:</p>\n\n<pre><code>import input_data\nmnist = input_data.read_data_sets('MNIST_data', one_hot=True)\n\nimport tensorflow as tf\ndef train():\n    x = tf.placeholder(\"float\", shape=[None, 784])\n    y_ = tf.placeholder(\"float\", shape=[None, 10])\n    W = tf.Variable(tf.zeros([784,10]))\n    b = tf.Variable(tf.zeros([10]))\n    y = tf.nn.softmax(tf.matmul(x,W) + b)\n    cross_entropy = -tf.reduce_sum(y_*tf.log(y))\n    train_step = tf.train.GradientDescentOptimizer(0.01).minimize(cross_entropy)\n    for i in range(1000):\n        batch = mnist.train.next_batch(50)\n        train_step.run(feed_dict={x: batch[0], y_: batch[1]})\n\ndef test():\n    correct_prediction = tf.equal(tf.argmax(y,1), tf.argmax(y_,1))\n    accuracy = tf.reduce_mean(tf.cast(correct_prediction, \"float\"))\n    print(accuracy.eval(feed_dict={x: mnist.test.images, y_: mnist.test.labels}))\n\nwith tf.Session() as sess:\n    sess.run(train())\n    sess.run(test())\n</code></pre>\n\n<p>However, I am getting error message when I try to run the code:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"tensorflow_mnist.py\", line 15, in &lt;module&gt;\n    train_step.run(feed_dict={x: batch[0], y_: batch[1]})\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1267, in run\n    _run_using_default_session(self, feed_dict, self.graph, session)\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2763, in _run_using_default_session\n    session.run(operation, feed_dict)\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 345, in run\n    results = self._do_run(target_list, unique_fetch_targets, feed_dict_string)\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 419, in _do_run\n    e.code)\ntensorflow.python.framework.errors.FailedPreconditionError: Attempting to use uninitialized value Variable\n     [[Node: MatMul = MatMul[T=DT_FLOAT, transpose_a=false, transpose_b=false, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_recv_Placeholder_0, Variable)]]\nCaused by op u'MatMul', defined at:\n  File \"tensorflow_mnist.py\", line 10, in &lt;module&gt;\n    y = tf.nn.softmax(tf.matmul(x,W) + b)\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/ops/math_ops.py\", line 781, in matmul\n    name=name)\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/ops/gen_math_ops.py\", line 600, in _mat_mul\n    transpose_b=transpose_b, name=name)\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/ops/op_def_library.py\", line 633, in apply_op\n    op_def=op_def)\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1710, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 988, in __init__\n    self._traceback = _extract_stack()\n</code></pre>\n\n<p>I have no idea what is causing this problem; most likely it is an incorrect usage of the session. Could someone give me some help? Thanks.</p>\n"}, {"tags": ["python", "gstreamer", "pygobject", "gobject"], "comments": [{"owner": {"reputation": 2714, "user_id": 1496237, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/V12VS.jpg?s=128&g=1", "display_name": "mpr", "link": "https://stackoverflow.com/users/1496237/mpr"}, "edited": false, "score": 0, "creation_date": 1451342434, "post_id": 34442391, "comment_id": 56745469, "body": "I know nothing about Python introspection, but I think the data you eventually want is on a subtype of GParamSpec, like GParamSpecInt.  Can you downcast to that and pull it off the struct members?  <a href=\"https://developer.gnome.org/gobject/unstable/gobject-Standard-Parameter-and-Value-Types.html#GParamSpecInt\" rel=\"nofollow noreferrer\">developer.gnome.org/gobject/unstable/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4022, "user_id": 2931197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e3379958588750196bc49f6925ab62?s=128&d=identicon&r=PG&f=1", "display_name": "Philip Withnall", "link": "https://stackoverflow.com/users/2931197/philip-withnall"}, "is_accepted": false, "score": 0, "last_activity_date": 1488881943, "creation_date": 1488881943, "answer_id": 42645581, "question_id": 34442391, "link": "https://stackoverflow.com/questions/34442391/how-to-access-gparamspec-related-functions-from-python-gobject-instrospection/42645581#42645581", "title": "How to access GParamSpec-related functions from Python GObject Instrospection?", "body": "<p>I\u2019m not sure what\u2019s going on with <code>GObject.ParamSpec</code> vs <code>gobject.GParamSpec</code>, but you can access members of the param spec as properties:</p>\n\n<pre><code>&gt;&gt;&gt; bitrate_property = element.find_property('bitrate')\n&gt;&gt;&gt; print(bitrate_property)\n&lt;GParamInt 'bitrate'&gt;\n&gt;&gt;&gt; type(bitrate_property)\n&lt;type 'gobject.GParamSpec'&gt;\n&gt;&gt;&gt; bitrate_property.name\n'bitrate'\n&gt;&gt;&gt; bitrate_property.minimum\n8\n&gt;&gt;&gt; bitrate_property.maximum\n320\n</code></pre>\n"}], "owner": {"reputation": 457, "user_id": 5712332, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/59caad12b4a40c5f12f695814683cb92?s=128&d=identicon&r=PG&f=1", "display_name": "JohnW", "link": "https://stackoverflow.com/users/5712332/johnw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 333, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1488881943, "creation_date": 1450898627, "last_edit_date": 1450907408, "question_id": 34442391, "link": "https://stackoverflow.com/questions/34442391/how-to-access-gparamspec-related-functions-from-python-gobject-instrospection", "title": "How to access GParamSpec-related functions from Python GObject Instrospection?", "body": "<p>I am wondering whether GObject Introspection is currently broken (with Python at least)...</p>\n\n<h1>1. Short code example</h1>\n\n<p>Let's try this piece of code to obtain a <code>GParamSpec</code> struct:</p>\n\n<pre><code># Various imports\nimport gi\ngi.require_version('Gst', '1.0')\nfrom gi.repository import GObject, Gst\nGst.init(None)\n\n# Create a Gstreamer element\nelement = Gst.ElementFactory.make(\"lamemp3enc\")\nbitrate_property = element.find_property(\"bitrate\")\n</code></pre>\n\n<p>Now if I do,</p>\n\n<pre><code>&gt;&gt;&gt; type(bitrate_property)\ngobject.GParamSpec\n</code></pre>\n\n<p>All seems fine as the <code>GParamSpec</code> structure is what <a href=\"https://developer.gnome.org/gobject/unstable/gobject-GParamSpec.html\" rel=\"nofollow\">various useful functions</a> feed on.</p>\n\n<h1>2. Problem</h1>\n\n<p>However, if I try to actually use these structures in Python, I get an exception with absolutely no hint in order to sort things out:</p>\n\n<pre><code>&gt;&gt;&gt; GObject.ParamSpec.get_name(bitrate_property)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n&lt;ipython-input-4-63f0daaa3a81&gt; in &lt;module&gt;()\n----&gt; 1 GObject.ParamSpec.get_name(bitrate_property)\n\nTypeError: argument self: Expected GObject.ParamSpec, but got gobject.GParamSpec\n</code></pre>\n\n<h1>3. Obvious problem, no solution?</h1>\n\n<p>The problem is <strong>obvious</strong>: it is expecting a <code>ParamSpec</code> object but it gets\na <code>GParamSpec</code> object instead. However,</p>\n\n<ul>\n<li>The doc seems to imply that <code>GParamSpec</code> is the correct object (at least in C);</li>\n<li><code>find_property</code> returns a <code>GParamSpec</code>, just like it does in C;</li>\n<li>there are no equivalent functions in <code>GObject.GParamSpec</code> yet such functions <em>do</em> exist (at least in C);</li>\n<li>even if a cast is needed, <strong>there is no obvious way</strong> to cast a <code>gobject.GParamSpec</code> to a <code>GObject.ParamSpec</code> as requested.</li>\n</ul>\n\n<p>Is that a bug? Am I missing something?</p>\n\n<hr>\n\n<p><strong>EDIT:</strong> </p>\n\n<p>For the sake of completeness, my ultimate purpose is to retrieve valid values from <code>GParamSpec</code> struct. <em>Not</em> their current/default ones. I also want to check whether the value I gave to the <code>set_property</code> method has been accepted. I want the <code>GParamSpec</code> type, its valid range (if applicable) or the list of possible values (in enums). Most of that is already implemented in the functions in <code>GObject.ParamSpec</code>.</p>\n"}, {"tags": ["python", "python-2.7", "curses"], "comments": [{"owner": {"reputation": 1375, "user_id": 1733321, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f2d5f600122e6803420e88740252973?s=128&d=identicon&r=PG", "display_name": "eestrada", "link": "https://stackoverflow.com/users/1733321/eestrada"}, "edited": false, "score": 2, "creation_date": 1450899692, "post_id": 34442361, "comment_id": 56626870, "body": "What is the current behavior when you run this code, and how is it not inline with what you expect? Also, is this Python 2 or Python 3? Please tag it with one or the other so that others easily know how to test your code."}, {"owner": {"reputation": 181, "user_id": 5245521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Zb5PW.jpg?s=128&g=1", "display_name": "acollection_", "link": "https://stackoverflow.com/users/5245521/acollection"}, "reply_to_user": {"reputation": 1375, "user_id": 1733321, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f2d5f600122e6803420e88740252973?s=128&d=identicon&r=PG", "display_name": "eestrada", "link": "https://stackoverflow.com/users/1733321/eestrada"}, "edited": false, "score": 0, "creation_date": 1450900620, "post_id": 34442361, "comment_id": 56627296, "body": "It&#39;s not doing anything. Input wise. The selection is supposed to change when you hit either an up key or down key. And python 2. Editing."}, {"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 1, "creation_date": 1450902433, "post_id": 34442361, "comment_id": 56628106, "body": "Protip: <a href=\"https://gist.github.com/waynew/5446da9ce372fa127d85\" rel=\"nofollow noreferrer\">add logging code</a> to help you see what&#39;s going on. <code>tail -f test.log</code> on Linux/Mac, or use baretail on Windows."}, {"owner": {"reputation": 181, "user_id": 5245521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Zb5PW.jpg?s=128&g=1", "display_name": "acollection_", "link": "https://stackoverflow.com/users/5245521/acollection"}, "edited": false, "score": 0, "creation_date": 1451011028, "post_id": 34442361, "comment_id": 56661268, "body": "Oh, thank you! I&#39;ve used this before, thanks for reminding me!"}], "answers": [{"tags": [], "owner": {"reputation": 181, "user_id": 5245521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Zb5PW.jpg?s=128&g=1", "display_name": "acollection_", "link": "https://stackoverflow.com/users/5245521/acollection"}, "is_accepted": true, "score": 0, "last_activity_date": 1450901831, "creation_date": 1450901831, "answer_id": 34443061, "question_id": 34442361, "link": "https://stackoverflow.com/questions/34442361/python-curses-menu-not-working/34443061#34443061", "title": "Python curses menu not working", "body": "<p>I was missing <code>window.keypad(1)</code> to actually activate the input.<br>\nI added it just before the <code>main_loop()</code>.</p>\n"}], "owner": {"reputation": 181, "user_id": 5245521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Zb5PW.jpg?s=128&g=1", "display_name": "acollection_", "link": "https://stackoverflow.com/users/5245521/acollection"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 579, "favorite_count": 0, "closed_date": 1450944066, "accepted_answer_id": 34443061, "answer_count": 1, "score": 1, "last_activity_date": 1450901831, "creation_date": 1450898496, "last_edit_date": 1450901649, "question_id": 34442361, "link": "https://stackoverflow.com/questions/34442361/python-curses-menu-not-working", "closed_reason": "Not suitable for this site", "title": "Python curses menu not working", "body": "<p>Trying to get a really basic curses menu to work. I've been following a tutorial but I've kinda split off to doing my own thing. I tried to touch on everything with comments. I just want to figure out how to get the selections to work.</p>\n\n<pre><code>import sys\nimport curses\nimport time\n\ndef menu(window, dims):\n    window.nodelay(0)                      # not sure what this does, lol\n    window.clear()                         # clear window\n    selection = -1                         # the menu code is from the tutorial\n    option = 0                             # so most of this is foreign to me\n    while selection &lt; 0:                   # loop\n        graphics = [0]*2                   # point to list\n        graphics[option] = curses.A_REVERSE # set graphic, reverse BKGND color\n        window.border()                    # border\n        window.addstr(1, dims[1]/2-2, \"Menu\")\n        window.addstr(3, dims[1]/2-2, \"Play\", graphics[0])\n        window.addstr(4, dims[1]/2-2, \"Exit\", graphics[1])\n        window.refresh()                   # refresh the window\n        action = window.getch()            # get input\n        if action == curses.KEY_UP:        # if key is up\n            option = (option - 1)          # go up?\n        elif action == curses.KEY_DOWN:    # key is down\n            option = (option + 1)          # go down?\n        elif action == ord('\\n'):          # if RETURN\n            selection = option             # make selection\n    window.clear()                         # clear all\n    if selection == 0:                     # if is 0, do nothing right now.\n        return                             # it's not changing selection\n    elif selection == 1:                   # so waiting for that to add here\n        return\n\ndef main():                                # main function // ran first\n    window = curses.initscr()              # making new window\n    dims = window.getmaxyx()               # getting window dimensions\n    if not curses.has_colors():            # color test\n        curses.endwin()                    # color test\n        print \"no colors\"                  # color test\n        sys.exit()                         # color test\n    else:                                  # color test\n        curses.start_color()               # color test\n    curses.noecho()                        # don't echo the keys on the screen\n    curses.cbreak()                        # don't wait enter for input\n    curses.curs_set(0)                     # don't show cursor\n    main_loop(window, dims)                # go into main loop\n\ndef main_loop(window, dims):\n    while menu(window, dims):\n        pass\n    window.clear()                         \n    window.addstr(dims[0]/2, (dims[1]-4)/2, \"Exiting...\")\n    window.refresh()\n    time.sleep(1)\n    curses.noecho()\n    curses.cbreak()\n    curses.curs_set(1)\n    curses.endwin()\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}, {"tags": ["python", "counter", "export-to-csv"], "answers": [{"comments": [{"owner": {"reputation": 3709, "user_id": 1454510, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cbfb9a1993333960f683cf038eaf6e4f?s=128&d=identicon&r=PG", "display_name": "return 0", "link": "https://stackoverflow.com/users/1454510/return-0"}, "edited": false, "score": 0, "creation_date": 1450899230, "post_id": 34442439, "comment_id": 56626655, "body": "What does <code>[x[0]] + x[1]</code> do?"}, {"owner": {"reputation": 3709, "user_id": 1454510, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cbfb9a1993333960f683cf038eaf6e4f?s=128&d=identicon&r=PG", "display_name": "return 0", "link": "https://stackoverflow.com/users/1454510/return-0"}, "edited": false, "score": 0, "creation_date": 1450900176, "post_id": 34442439, "comment_id": 56627089, "body": "Thanks for the update, I understand the code now. Just one thing for future reader of this thread: I used <code>D = [ [x] + C[x] for x in C ]</code> instead of the one given by the answer because my <code>C</code> is actually a Counter collection."}], "tags": [], "owner": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "is_accepted": true, "score": 2, "last_activity_date": 1450899515, "last_edit_date": 1450899515, "creation_date": 1450898834, "answer_id": 34442439, "question_id": 34442352, "link": "https://stackoverflow.com/questions/34442352/how-do-i-write-a-collection-of-arrays-to-csv-file-in-python/34442439#34442439", "title": "How do I write a collection of arrays to csv file in python?", "body": "<p>You can create a new list of lists that concatenates the second element of your lists to a list containing the first element of your list. Then you can just use the <a href=\"https://docs.python.org/2/library/csv.html#csv.writer\" rel=\"nofollow\"><code>csv.writer</code> and <code>writerows()</code></a> methods to write those lists to the file. </p>\n\n<pre><code>import csv\nD = [ [x[0]] + x[1] for x in C ]\nwith open(filename, 'w') as f:\n    writer = csv.writer(f)\n    writer.writerows(D)\n</code></pre>\n\n<p>The line <code>D = [ [x[0]] + x[1] for x in C ]</code> can use some explaining.</p>\n\n<p><code>[x[0]]</code> puts the first element of the element of <code>C</code> into its own list and then <code>+ x[1]</code> takes the second element of your list and adds it to the end of the list we just created. So for the first element in your example <code>('a', [10, 15])</code>: <code>[x[0]]</code> is the list containing the string <code>'a'</code> or <code>['a']</code>. <code>x[1]</code> is the list <code>[10, 15]</code>. The <code>+</code> operator concatenates lists. So if we concatenate <code>['a'] + [10, 15]</code> we get <code>['a', 10, 15]</code> which will write to the csv as you asked for. </p>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 1642546, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8442051759520098942e6d481b789f57?s=128&d=identicon&r=PG", "display_name": "themidnightoil", "link": "https://stackoverflow.com/users/1642546/themidnightoil"}, "is_accepted": false, "score": 0, "last_activity_date": 1450904092, "creation_date": 1450904092, "answer_id": 34443573, "question_id": 34442352, "link": "https://stackoverflow.com/questions/34442352/how-do-i-write-a-collection-of-arrays-to-csv-file-in-python/34443573#34443573", "title": "How do I write a collection of arrays to csv file in python?", "body": "<pre><code>import re\nc = [\n  ('a', [10, 15]),\n  ('b', [20, 23]),\n  ('c', [11, 55])\n]\n\nregex = r\"\\('(\\w)', \\[(\\d+), (\\d+)\\]\\)\"\nfor x in re.findall(regex ,str(c)):\n    print ','.join(x)\n</code></pre>\n"}], "owner": {"reputation": 3709, "user_id": 1454510, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cbfb9a1993333960f683cf038eaf6e4f?s=128&d=identicon&r=PG", "display_name": "return 0", "link": "https://stackoverflow.com/users/1454510/return-0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 614, "favorite_count": 0, "accepted_answer_id": 34442439, "answer_count": 2, "score": 1, "last_activity_date": 1450904092, "creation_date": 1450898471, "question_id": 34442352, "link": "https://stackoverflow.com/questions/34442352/how-do-i-write-a-collection-of-arrays-to-csv-file-in-python", "title": "How do I write a collection of arrays to csv file in python?", "body": "<p>I have a Counter collection in python that looks like</p>\n\n<pre><code>C = [\n  ('a', [10, 15]),\n  ('b', [20, 23]),\n  ('c', [11, 55])\n  ...\n]\n</code></pre>\n\n<p>I want to write this collection into a csv delimited file that looks like</p>\n\n<pre><code>letter    property1    property2\na         10           15\nb         20           23\nc         11           55\n</code></pre>\n\n<p>I have looked around in stack overflow, most people are trying to only output a dictionary to csv one row at a time. This probably doesn't apply to me. What should I do with my case?</p>\n"}, {"tags": ["python", "algorithm", "tree", "graph-reduction"], "comments": [{"owner": {"reputation": 2175, "user_id": 3045171, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/le4e9.jpg?s=128&g=1", "display_name": "shapiro yaacov", "link": "https://stackoverflow.com/users/3045171/shapiro-yaacov"}, "edited": false, "score": 0, "creation_date": 1450899012, "post_id": 34442341, "comment_id": 56626565, "body": "What is the goal? you say that <i>For each of these new trees, I need to again find all trees obtained by contracting one node</i>. How do you measure one contraction with another?"}], "answers": [{"tags": [], "owner": {"reputation": 1521, "user_id": 929210, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/1PuSd.jpg?s=128&g=1", "display_name": "Harman", "link": "https://stackoverflow.com/users/929210/harman"}, "is_accepted": false, "score": 1, "last_activity_date": 1450899203, "creation_date": 1450899203, "answer_id": 34442512, "question_id": 34442341, "link": "https://stackoverflow.com/questions/34442341/tree-or-graph-contraction/34442512#34442512", "title": "Tree or Graph contraction", "body": "<p>Each time you transform a tree, you are deciding on the sets of edges that you are contracting. In the example you gave, the set would contain only one edge from \"Child 2\" to Grandchild 1\".</p>\n\n<p>If you are interested in finding all the trees that you can get by contracting the edges, that would be 2^d(where d is the total number of edges in the original tree).\nAs you said, you want to convert a n-node tree to an m-node tree. If you already know \"m\" then you need to find all the sets from the total 2^d sets that have m-1 elements(as m node tree would have m-1 edges).</p>\n\n<p>If you are interested in only a subset of m-node tree, then randomly select how many you want.</p>\n"}], "owner": {"reputation": 457, "user_id": 2253041, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/ffcd8d910d185140342ac601bec444b4?s=128&d=identicon&r=PG", "display_name": "Arnob", "link": "https://stackoverflow.com/users/2253041/arnob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1450899203, "creation_date": 1450898439, "question_id": 34442341, "link": "https://stackoverflow.com/questions/34442341/tree-or-graph-contraction", "title": "Tree or Graph contraction", "body": "<p>I am currently using Python to solve a \"tree summarization\" problem.  My tree consists of nodes which have weights and children.  An example</p>\n\n<pre><code>Node(\n    name: \"Parent\", weight: 20, children: {[\n        Node(name: \"Child 1\" weight: 10, children: {[]},\n        Node(name: \"Child 2\", weight: 10, children: {[\n           Node(name: \"Grandchild 1\", weight: 5, children: {[]}\n        ]}\n     ]})\n</code></pre>\n\n<p>I am interested in finding all possible graphs obtainable by edge contractions.  When I contract two edges, the old vertices are replaced by a new vertex whose weight is the sum of the old vertices.  For example, contracting Child 2 with Grandchild 1 results in:</p>\n\n<pre><code>Node(\n    name: \"Parent\", weight: 20, children: {[\n        Node(name: \"Child 1\" weight: 10, children: {[]},\n        Node(name: \"(Child 2, Grandchild 1)\", weight: 15, children: {[]}\n     ]})\n</code></pre>\n\n<p>Of course this is only one possible edge contraction.  Even for this small tree, there are many more contractions (e.g. <code>(child 1, child 2)</code>, <code>(child 1, parent)</code>, <code>(child 2, parent)</code>).</p>\n\n<p>For each of these new trees, I need to again find all trees obtained by contracting one node (ultimately, the problem is to reduce a n-node tree to an m-node tree).</p>\n\n<p>I am currently \"brute forcing\", recursively calling edge_contract() until I reach trees of the right node size. But the code needs to be able to work on moderately sized trees (~25-50 nodes) and the current implementation is not.</p>\n\n<p>Is this type of tree contraction a solved problem.  What are some good ways to tackle the problem?</p>\n"}, {"tags": ["python", "terminal", "pipe", "iostat"], "answers": [{"comments": [{"owner": {"reputation": 515, "user_id": 550643, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6a3c677d60b90f997d796a8e67809fb3?s=128&d=identicon&r=PG", "display_name": "Bob R", "link": "https://stackoverflow.com/users/550643/bob-r"}, "edited": false, "score": 0, "creation_date": 1450899092, "post_id": 34442339, "comment_id": 56626602, "body": "Thank you Padriac, this is also be the same situation with Popen from subprocess if it helps anyone. iter(p.stdin.readline,&quot;&quot;):"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 515, "user_id": 550643, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6a3c677d60b90f997d796a8e67809fb3?s=128&d=identicon&r=PG", "display_name": "Bob R", "link": "https://stackoverflow.com/users/550643/bob-r"}, "edited": false, "score": 0, "creation_date": 1450899197, "post_id": 34442339, "comment_id": 56626645, "body": "@BobR, no worries, yes, it&#39;s a specific issue related to python2,  ``for line in sys.stdin:` using python3 would work just fine"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 2, "last_activity_date": 1450898976, "last_edit_date": 1450898976, "creation_date": 1450898437, "answer_id": 34442339, "question_id": 34442304, "link": "https://stackoverflow.com/questions/34442304/piping-iostat-d-1-to-python-sys-stdin/34442339#34442339", "title": "Piping iostat -d 1 to python sys.stdin", "body": "<p>The data is being buffered, you can call <code>iter</code> on <code>sys.stdout.readline</code>:</p>\n\n<pre><code>import sys\nfor line in iter(sys.stdin.readline,\"\"):\n    print line\n</code></pre>\n\n<p>Running <code>iostat</code> on it's own just outputs a few lines, <code>iostat -d 1</code> loops continuously so the data gets buffered.</p>\n"}], "owner": {"reputation": 515, "user_id": 550643, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6a3c677d60b90f997d796a8e67809fb3?s=128&d=identicon&r=PG", "display_name": "Bob R", "link": "https://stackoverflow.com/users/550643/bob-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "accepted_answer_id": 34442339, "answer_count": 1, "score": 1, "last_activity_date": 1450900733, "creation_date": 1450898241, "question_id": 34442304, "link": "https://stackoverflow.com/questions/34442304/piping-iostat-d-1-to-python-sys-stdin", "title": "Piping iostat -d 1 to python sys.stdin", "body": "<p>I am trying to pipe the output of utilities like iostat, mongostat, etc with the command:</p>\n\n<pre><code>$ iostat -d 1 | ./script.py\n</code></pre>\n\n<p>in which I am using the code:</p>\n\n<pre><code>for line in sys.stdin:\n    print line\n</code></pre>\n\n<p>I see that it hangs and does not print each line to the console.\nif I run without the flag to repeat every second '-d 1' where output only happens once, the script behaves as expected.</p>\n\n<p>$ iostat | ./script.py</p>\n"}, {"tags": ["python", "list", "pandas", "types"], "comments": [{"owner": {"reputation": 1846, "user_id": 2589273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/34lAu.jpg?s=128&g=1", "display_name": "user2589273", "link": "https://stackoverflow.com/users/2589273/user2589273"}, "edited": false, "score": 1, "creation_date": 1450899862, "post_id": 34442293, "comment_id": 56626959, "body": "Can you clarify what exactly you are doing. If you save the above as a list, then make it into a DataFrame, you get two columns. You can then happily iterate between each one as you please. ie      pd.DataFrame( [(&#39;P105&#39;, 1), (&#39;P31&#39;, 1), (&#39;P225&#39;, 1), (&#39;P70&#39;, 1)])"}, {"owner": {"reputation": 89, "user_id": 5121441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e377657c6c8808734b399127757c2e3b?s=128&d=identicon&r=PG&f=1", "display_name": "Aliossandro", "link": "https://stackoverflow.com/users/5121441/aliossandro"}, "reply_to_user": {"reputation": 1846, "user_id": 2589273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/34lAu.jpg?s=128&g=1", "display_name": "user2589273", "link": "https://stackoverflow.com/users/2589273/user2589273"}, "edited": false, "score": 0, "creation_date": 1450904715, "post_id": 34442293, "comment_id": 56629120, "body": "I have a data frame of which two columns were saved as python lists. To run my analysis, I have to select the tuples in each row&#39;s lists in which an element is present, e.g.:  finding P105 in [(&#39;P105&#39;, 1), (&#39;P31&#39;, 1), (&#39;P225&#39;, 1), (&#39;P70&#39;, 1)].  Now the problem is that I cannot iterate through the list, but only through its characters."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 5121441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e377657c6c8808734b399127757c2e3b?s=128&d=identicon&r=PG&f=1", "display_name": "Aliossandro", "link": "https://stackoverflow.com/users/5121441/aliossandro"}, "edited": false, "score": 0, "creation_date": 1450905763, "post_id": 34443863, "comment_id": 56629525, "body": "Thanks. However, this splits also the tuples within the lists. I will try to change it, in order to avoid that."}, {"owner": {"reputation": 1846, "user_id": 2589273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/34lAu.jpg?s=128&g=1", "display_name": "user2589273", "link": "https://stackoverflow.com/users/2589273/user2589273"}, "reply_to_user": {"reputation": 89, "user_id": 5121441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e377657c6c8808734b399127757c2e3b?s=128&d=identicon&r=PG&f=1", "display_name": "Aliossandro", "link": "https://stackoverflow.com/users/5121441/aliossandro"}, "edited": false, "score": 0, "creation_date": 1450920610, "post_id": 34443863, "comment_id": 56634336, "body": "@Aliossandro try:    df[&#39;col&#39;].apply(lambda x : pd.Series( x.replace(   &#39;),&#39;   ,    &#39;)&amp;&amp;&#39; ).split(&#39;&amp;&amp;&#39;)))"}], "tags": [], "owner": {"reputation": 1846, "user_id": 2589273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/34lAu.jpg?s=128&g=1", "display_name": "user2589273", "link": "https://stackoverflow.com/users/2589273/user2589273"}, "is_accepted": false, "score": 2, "last_activity_date": 1450920689, "last_edit_date": 1450920689, "creation_date": 1450905466, "answer_id": 34443863, "question_id": 34442293, "link": "https://stackoverflow.com/questions/34442293/parse-lists-in-pandas-columns/34443863#34443863", "title": "Parse lists in pandas columns", "body": "<p>I would personally split that into further columns and iterate over them: </p>\n\n<pre><code>   df['col'].apply(lambda x : pd.Series(x.split(',')))\n</code></pre>\n\n<p>or</p>\n\n<pre><code>   df['col'].apply(lambda x : pd.Series( x.replace( '),' , ')&amp;&amp;' ).split('&amp;&amp;'))) \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8633, "user_id": 3130926, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/809066dc63a3a988be053ec48ea2140f?s=128&d=identicon&r=PG&f=1", "display_name": "muon", "link": "https://stackoverflow.com/users/3130926/muon"}, "is_accepted": false, "score": 5, "last_activity_date": 1595402439, "last_edit_date": 1595402439, "creation_date": 1538849257, "answer_id": 52681943, "question_id": 34442293, "link": "https://stackoverflow.com/questions/34442293/parse-lists-in-pandas-columns/52681943#52681943", "title": "Parse lists in pandas columns", "body": "<p>pretty old question, but i guess this should work:</p>\n<pre><code>import ast\n\ndf['col'].apply(ast.literal_eval)\n</code></pre>\n<p>read data into chunks if file is too big, using e.g. <code>pd.read_csv(...,cunksize=50000)</code></p>\n"}], "owner": {"reputation": 89, "user_id": 5121441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e377657c6c8808734b399127757c2e3b?s=128&d=identicon&r=PG&f=1", "display_name": "Aliossandro", "link": "https://stackoverflow.com/users/5121441/aliossandro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3461, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1595402439, "creation_date": 1450898186, "last_edit_date": 1450938847, "question_id": 34442293, "link": "https://stackoverflow.com/questions/34442293/parse-lists-in-pandas-columns", "title": "Parse lists in pandas columns", "body": "<p>I am trying to figure out how to parse pandas columns containing lists: my problem is that these are recognised as strings, whereas I would like them to be treated as lists, to iterate through them.</p>\n\n<p>This is an example of my cells: <code>[('P105', 1), ('P31', 1), ('P225', 1), ('P70', 1)]</code></p>\n\n<p>When I try to iterate through it, I only get the characters contained in the string one by one (i.e. [, (, ', P etc.). \nHow do I make pandas 'understand' that these are lists?</p>\n\n<p>Edit: I have found a way to do that: I apply <code>ast.literal_eval</code> to each line.</p>\n\n<p>Example: </p>\n\n<pre><code>line = month_statement['properties_claims'][12]\nfor i in line:\n    print i\n\n[\n(\n'\nP\n7\n6\n'\n...\n</code></pre>\n\n<p>If I use <code>ast.literal_eval</code>, instead:</p>\n\n<pre><code>line = ast.literal_eval(month_statement['properties_claims'][12])\nline\nOut[23]: \n[('P76', 1),\n ('P77', 1),\n ('P75', 1),\n ('P273', 1),\n ('P70', 1),\n ('P107', 1),\n ('P225', 1)]\n</code></pre>\n\n<p>My doubt now is how efficient this approach will be to process millions of lines.</p>\n"}, {"tags": ["python", "matplotlib", "subplot"], "answers": [{"comments": [{"owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1452084791, "post_id": 34442406, "comment_id": 57012156, "body": "Does this explanation help?"}, {"owner": {"reputation": 1426, "user_id": 766685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PMd4j.jpg?s=128&g=1", "display_name": "Vincenzooo", "link": "https://stackoverflow.com/users/766685/vincenzooo"}, "edited": false, "score": 7, "creation_date": 1502991188, "post_id": 34442406, "comment_id": 78440648, "body": "that&#39;s not true. <code>plt.subplot(111)</code> returns a <code>matplotlib.axes._subplots.AxesSubplot</code> object, exactly as add_subplot, so you can do <code>ax=plt.subplot(111)</code>"}], "tags": [], "owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "is_accepted": false, "score": 9, "last_activity_date": 1450899582, "last_edit_date": 1450899582, "creation_date": 1450898700, "answer_id": 34442406, "question_id": 34442283, "link": "https://stackoverflow.com/questions/34442283/figure-add-subplot-vs-pyplot-subplot/34442406#34442406", "title": "figure.add_subplot() vs pyplot.subplot()", "body": "<p>If you need a reference to <code>ax</code> for later use:</p>\n\n<pre><code>ax = fig.add_subplot(111)\n</code></pre>\n\n<p>gives you one while with:</p>\n\n<pre><code>plt.subplot(111)\n</code></pre>\n\n<p>you would need to do something like:</p>\n\n<pre><code>ax = plt.gca()\n</code></pre>\n\n<p>Likewise, if want to manipulate the figure later:</p>\n\n<pre><code>fig = plt.figure()\n</code></pre>\n\n<p>gives you a reference right away instead of:</p>\n\n<pre><code>fig = plt.gcf()\n</code></pre>\n\n<p>Getting explicit references is even more useful if you work with multiple subplots of figures. Compare:</p>\n\n<pre><code>figures = [plt.figure() for _ in range(5)]\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>figures = []\nfor _ in range(5):\n    plt.figure()\n    figures.append(plt.gcf())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1008, "user_id": 4983201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f373fe950872f5f8d47ac6333b441731?s=128&d=identicon&r=PG&f=1", "display_name": "Guido Mocha", "link": "https://stackoverflow.com/users/4983201/guido-mocha"}, "is_accepted": false, "score": 3, "last_activity_date": 1568037356, "creation_date": 1568037356, "answer_id": 57855482, "question_id": 34442283, "link": "https://stackoverflow.com/questions/34442283/figure-add-subplot-vs-pyplot-subplot/57855482#57855482", "title": "figure.add_subplot() vs pyplot.subplot()", "body": "<p><code>pyplot.subplot</code> is wrapper of <code>Figure.add_subplot</code> with a difference in behavior.\nCreating a subplot with <code>pyplot.subplot</code> will delete any pre-existing subplot that overlaps with it beyond sharing a boundary. \nIf you do not want this behavior, use the <code>Figure.add_subplot</code> method or the <code>pyplot.axes</code> function instead. <a href=\"https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.pyplot.subplot.html\" rel=\"nofollow noreferrer\">More</a></p>\n"}], "owner": {"reputation": 179, "user_id": 5066932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w8xHy.png?s=128&g=1", "display_name": "bmorton12", "link": "https://stackoverflow.com/users/5066932/bmorton12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16666, "favorite_count": 6, "answer_count": 2, "score": 14, "last_activity_date": 1568037356, "creation_date": 1450898154, "last_edit_date": 1451727747, "question_id": 34442283, "link": "https://stackoverflow.com/questions/34442283/figure-add-subplot-vs-pyplot-subplot", "title": "figure.add_subplot() vs pyplot.subplot()", "body": "<p>What is the difference between <code>add_subplot()</code> and <code>subplot()</code>? They both seem to add a subplot if one isn't there. I looked at the documentation but I couldn't make out the difference. Is it just for making future code more flexible?</p>\n\n<p>For example:</p>\n\n<pre><code>fig = plt.figure()\nax = fig.add_subplot(111)\n</code></pre>\n\n<p>vs</p>\n\n<pre><code>plt.figure(1)\nplt.subplot(111)\n</code></pre>\n\n<p>from matplotlib tutorials.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "edited": false, "score": 0, "creation_date": 1450898383, "post_id": 34442282, "comment_id": 56626254, "body": "Hello and welcome to StackOverflow. Please take some time to read the help page, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. And more importantly, please read <a href=\"http://meta.stackexchange.com/q/156810/204922\">the Stack Overflow question checklist</a>. You might also want to learn about <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Examples</a>."}, {"owner": {"reputation": 5896, "user_id": 5644961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-r4jx_ltcdtA/AAAAAAAAAAI/AAAAAAAAAAA/7RjDfLKZHxg/photo.jpg?sz=128", "display_name": "Copperfield", "link": "https://stackoverflow.com/users/5644961/copperfield"}, "edited": false, "score": 1, "creation_date": 1450903909, "post_id": 34442282, "comment_id": 56628760, "body": "what is that <code>[q]</code> for? if q is a number with that you are printing the q-th character of the prompt, to ask for a input, that is not very helpful..."}], "answers": [{"comments": [{"owner": {"reputation": 5896, "user_id": 5644961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-r4jx_ltcdtA/AAAAAAAAAAI/AAAAAAAAAAA/7RjDfLKZHxg/photo.jpg?sz=128", "display_name": "Copperfield", "link": "https://stackoverflow.com/users/5644961/copperfield"}, "edited": false, "score": 1, "creation_date": 1450903422, "post_id": 34442340, "comment_id": 56628555, "body": "one liner: <code>input(...)+&quot;.txt&quot;</code>"}, {"owner": {"reputation": 3, "user_id": 5712320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d7c8dda832d8a01426b4f60cf0af72f?s=128&d=identicon&r=PG&f=1", "display_name": "Leo Weller", "link": "https://stackoverflow.com/users/5712320/leo-weller"}, "edited": false, "score": 0, "creation_date": 1451312012, "post_id": 34442340, "comment_id": 56731581, "body": "this was great thanks very much"}], "tags": [], "owner": {"reputation": 2464, "user_id": 494631, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/20649650b6209254e570442e953a8f5f?s=128&d=identicon&r=PG", "display_name": "baldr", "link": "https://stackoverflow.com/users/494631/baldr"}, "is_accepted": false, "score": 2, "last_activity_date": 1450898438, "creation_date": 1450898438, "answer_id": 34442340, "question_id": 34442282, "link": "https://stackoverflow.com/questions/34442282/how-do-i-add-txt-on-the-end-of-a-users-input/34442340#34442340", "title": "How do i add .txt on the end of a user&#39;s input?", "body": "<p>Like this:</p>\n\n<pre><code>FF = input(\"What Would You Like To Save Your Encription As?: \")\nFF = FF + \".txt\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5712618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9e54fc0986952d6121d1fa61087141?s=128&d=identicon&r=PG&f=1", "display_name": "Matt B.", "link": "https://stackoverflow.com/users/5712618/matt-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1450905463, "creation_date": 1450905463, "answer_id": 34443860, "question_id": 34442282, "link": "https://stackoverflow.com/questions/34442282/how-do-i-add-txt-on-the-end-of-a-users-input/34443860#34443860", "title": "How do i add .txt on the end of a user&#39;s input?", "body": "<p>You could also use format:</p>\n\n<pre><code>FF = input(\"What Would You Like To Save Your Encription As?: \")\nFF1 = '{0}.txt'.format(FF)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5712320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d7c8dda832d8a01426b4f60cf0af72f?s=128&d=identicon&r=PG&f=1", "display_name": "Leo Weller", "link": "https://stackoverflow.com/users/5712320/leo-weller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1450915614, "answer_count": 2, "score": -5, "last_activity_date": 1450905463, "creation_date": 1450898150, "last_edit_date": 1450902736, "question_id": 34442282, "link": "https://stackoverflow.com/questions/34442282/how-do-i-add-txt-on-the-end-of-a-users-input", "closed_reason": "Needs more focus", "title": "How do i add .txt on the end of a user&#39;s input?", "body": "<p>I need to add <code>.txt</code> at the end of the users input but I'm unsure it has to be put on the end of the input at <code>[q]</code> is to finish my assignment. </p>\n\n<pre><code>FF = input(\"What Would You Like To Save Your Encription As?: \"[q])\n</code></pre>\n"}, {"tags": ["python", "postgresql", "relational-database"], "answers": [{"tags": [], "owner": {"reputation": 5016, "user_id": 5508736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/156be54ad8a1d4eb8a3c3e82a333d0fd?s=128&d=identicon&r=PG&f=1", "display_name": "Darwin von Corax", "link": "https://stackoverflow.com/users/5508736/darwin-von-corax"}, "is_accepted": false, "score": 0, "last_activity_date": 1450984168, "creation_date": 1450984168, "answer_id": 34456971, "question_id": 34442260, "link": "https://stackoverflow.com/questions/34442260/relationalship-design-in-postgresql/34456971#34456971", "title": "Relationalship design in PostgreSQL", "body": "<p>If I've understood the question, you're creating a table of financial statements and want to know whether you should treat \"banking\" statements the same as other statements or as a \"special case\" of some other statement types.</p>\n\n<p>In my experience, \"special-case\" processing adds a layer of complexity and difficulty in maintenance which is rarely justifiable, and so as an experienced maintenance programmer my instinct is to avoid special cases whenever possible. I would simply create separate records for \"balance sheet\" and \"balance sheet (bank)\" &amp;c. &amp;c.</p>\n\n<p>I'm less clear on the second part of your question, but I'll give it a go anyway and you can correct me if I'm off the track: In the absence of contradicting requirements, I would give each statement its own set of line items, independent of the line items on other statements, the same way that one invoice's line items are independent of those of other invoices. It might be possible <em>if necessary</em> to share line items between statements, but I would need to see a convincing use case before attempting it.</p>\n"}, {"tags": [], "owner": {"reputation": 13920, "user_id": 3404097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e38747633941acae3957fd99b5ebe20?s=128&d=identicon&r=PG&f=1", "display_name": "philipxy", "link": "https://stackoverflow.com/users/3404097/philipxy"}, "is_accepted": false, "score": 0, "last_activity_date": 1451005255, "last_edit_date": 1495535242, "creation_date": 1451004809, "answer_id": 34459172, "question_id": 34442260, "link": "https://stackoverflow.com/questions/34442260/relationalship-design-in-postgresql/34459172#34459172", "title": "Relationalship design in PostgreSQL", "body": "<p>Apparently a statement name is the name of a format for a statement. Banks have bank-style statements. Non-banks have non-bank-style statements. Is there anything about the situation that's asymmetrical? Is there a need to parameterize either kind of statement that would suggest a different structure for bank or non-bank? If not, just have statement names for use in banks and non-banks:</p>\n\n<pre><code>Company(company_code, ...)\n    PK (company_code)\nStatement(statement_name, company_code, ...)\n    PK (statement_name, company_code)\n    FK (company_code) to Company)\nRow(statement_name, company_code, row_number, ...)\n    PK (statement_name, company_code, row_number)\n    FK (company_code) to Company)\n    FK(statement_name) to Statement)\n</code></pre>\n\n<p>Assign bank &amp; non-bank statements to banks &amp; non-banks as appropriate. Since the database doesn't actually distinguish banks vs non-banks, there isn't any redundancy or possible inconsistency. (Just DBMS-undetectably inappropriate statement assignments for a company of a given type.)</p>\n\n<p>But if you want to parameterize company and statement queries by company type (bank vs non-bank or whatever) then associate company type with companies and statements:</p>\n\n<pre><code>Company(company_code, company_type, ...)\n    PK (company_code)\n    UNIQUE NOT NULL (company_code, company_type)\nStatement(statement_name, company_code, company_type, ...)\n    PK (statement_name, company_code, company_type)\n    FK (company_code, company_type) to Company\nRow(statement_name, company_type, row_number, ...)\n    PK (statement_name, company_type, row_number)\n    FK(statement_name, company_type) to Statement\n</code></pre>\n\n<p>A statement must agree in company type with its company. An easy way to enforce this is a FK from Statement to Company on both company_code and company_type. Then SQL requires that every FK target be declared as PK or UNIQUE NOT NULL. We can identify statements by their name and company type.</p>\n\n<p>You don't need additional CK/PK surrogate id columns in either design as far as the database is concerned. You can add them; but if you use id values in other base tables unaccompanied by their respective natural key values then it can be difficult to know whether or how to constrain them with other ids.</p>\n\n<p>Re finding appropriate designs see <a href=\"https://stackoverflow.com/a/34447216/3404097\">this recent answer</a>.</p>\n"}], "owner": {"reputation": 73, "user_id": 5454973, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2c22ae6c630ef4d2e826a543791f2bee?s=128&d=identicon&r=PG&f=1", "display_name": "T.M", "link": "https://stackoverflow.com/users/5454973/t-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1451005255, "creation_date": 1450898039, "last_edit_date": 1450934541, "question_id": 34442260, "link": "https://stackoverflow.com/questions/34442260/relationalship-design-in-postgresql", "title": "Relationalship design in PostgreSQL", "body": "<p>I'm using PostgreSQL, I have created statements table in my database and insert info related by below code:</p>\n\n<pre><code>cur.execute(\"CREATE TABLE IF NOT EXISTS statements (statement_id SERIAL NOT NULL PRIMARY KEY, statement_name VARCHAR(255) NOT NULL, code INT NOT NULL, FOREIGN KEY (code) REFERENCES companies_list (code))\")\n\nstatement_name = [\"balance_sheet\", \"income_statement\", \"cash_flow\"]\n</code></pre>\n\n<p>After execution it gave me result below:</p>\n\n<pre><code> statement_id |  statement_name  | code \n--------------+------------------+---------\n        1     | balance_sheet    |    1111\n        2     | Income_statement |    1111\n        3     | cash_flow        |    1111\n        4     | balance_sheet    |    2222\n</code></pre>\n\n<p>I intiated 3 statements for each company code. companies codes in the table  is the full list, some of those codes (in banks sector) need to be using different statements for banks only ( balance sheet \"Banks\", income statement \"Banks\", and cash flow \"Banks\").\nwhat's the best solution to do it?.. do i need to make more statements names ( i.e. balance_sheets_banks ) or should i include all those codes of banks in a list and assign it some how ? either answer how can i do it?</p>\n\n<p>The reason I'm asking this question cause in later step i'm creating a table ( named statement_items ) it will include items of each statement, find it below:</p>\n\n<pre><code>cur.execute(\"CREATE TABLE IF NOT EXISTS statement_items (statement_row_id SERIAL NOT NULL PRIMARY KEY, statement_id INT NOT NULL, row_order INT NOT NULL, row_title VARCHAR(255) NOT NULL, FOREIGN KEY (statement_id) REFERENCES statements (statement_id))\")\n</code></pre>\n\n<p>After execturion it will give me:</p>\n\n<pre><code>  statement_row_id | statement_id | row_order |   row_title \n ------------------+--------------+-----------+----------------\n         1         |       1      |     1     | Current Assets\n         2         |       2      |     1     |      Sales\n</code></pre>\n\n<p>So in the end how to solve the first point above and how to implement the change on the next table ?</p>\n"}, {"tags": ["python", "pandas", "pivot-table"], "comments": [{"owner": {"reputation": 11698, "user_id": 166247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c5bd086b49b0b66cf9089d6f7e4d41?s=128&d=identicon&r=PG", "display_name": "Ashalynd", "link": "https://stackoverflow.com/users/166247/ashalynd"}, "edited": false, "score": 0, "creation_date": 1450898477, "post_id": 34442214, "comment_id": 56626308, "body": "What do you want to achieve by pivoting string values?"}, {"owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "edited": false, "score": 0, "creation_date": 1450899483, "post_id": 34442214, "comment_id": 56626774, "body": "There&#39;s something off about this data. Why is the same contact_id answering the same question multiple times. Are you grouping by contact_id or something else... what??"}, {"owner": {"reputation": 745, "user_id": 1116491, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3FzEu.jpg?s=128&g=1", "display_name": "jmhead", "link": "https://stackoverflow.com/users/1116491/jmhead"}, "edited": false, "score": 0, "creation_date": 1450915306, "post_id": 34442214, "comment_id": 56633042, "body": "The goal is to ultimately create a reporting table for use in Tableau; put the data in a form where more questions can be answered.  As far as the data, there are missing details that could be added in; the multiple contact_ids are from multiple surveys - those survey ids are not listed"}], "answers": [{"comments": [{"owner": {"reputation": 745, "user_id": 1116491, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3FzEu.jpg?s=128&g=1", "display_name": "jmhead", "link": "https://stackoverflow.com/users/1116491/jmhead"}, "edited": false, "score": 0, "creation_date": 1450919343, "post_id": 34442895, "comment_id": 56634051, "body": "The index should be perhaps id, because it is the unique identifier created by  SELECT Row_number()  OVER() AS id to give each row an unique int. If I added the survey id in addition to the contact_id then those would be unique, and I could dispense with the generated id"}, {"owner": {"reputation": 4420, "user_id": 1968405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63a734a216422efeab3b81d058f1b7b5?s=128&d=identicon&r=PG", "display_name": "cwharland", "link": "https://stackoverflow.com/users/1968405/cwharland"}, "reply_to_user": {"reputation": 745, "user_id": 1116491, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3FzEu.jpg?s=128&g=1", "display_name": "jmhead", "link": "https://stackoverflow.com/users/1116491/jmhead"}, "edited": false, "score": 0, "creation_date": 1450919481, "post_id": 34442895, "comment_id": 56634092, "body": "You can index the pivot in whatever manner you think matches the level of aggregation you desire. Just set the <code>index</code> arg to the specification you want."}, {"owner": {"reputation": 745, "user_id": 1116491, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3FzEu.jpg?s=128&g=1", "display_name": "jmhead", "link": "https://stackoverflow.com/users/1116491/jmhead"}, "edited": false, "score": 0, "creation_date": 1450920589, "post_id": 34442895, "comment_id": 56634333, "body": "The indexes for the purposes of this question is id and contact_id then I want the response_answer strings to be listed in the data frame values under their pivoted question column headers to create a SQL table from  A higher level question could be, is Pandas the best Python tool to pivot tables with string data; it seems it might be..."}, {"owner": {"reputation": 4420, "user_id": 1968405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63a734a216422efeab3b81d058f1b7b5?s=128&d=identicon&r=PG", "display_name": "cwharland", "link": "https://stackoverflow.com/users/1968405/cwharland"}, "reply_to_user": {"reputation": 745, "user_id": 1116491, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3FzEu.jpg?s=128&g=1", "display_name": "jmhead", "link": "https://stackoverflow.com/users/1116491/jmhead"}, "edited": false, "score": 0, "creation_date": 1450927540, "post_id": 34442895, "comment_id": 56635687, "body": "That&#39;s the exact thing the first snippet in the answer does...give it a try and see if it satisfies your desire."}, {"owner": {"reputation": 745, "user_id": 1116491, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3FzEu.jpg?s=128&g=1", "display_name": "jmhead", "link": "https://stackoverflow.com/users/1116491/jmhead"}, "edited": false, "score": 0, "creation_date": 1450980448, "post_id": 34442895, "comment_id": 56654664, "body": "Final solution form that works well (I added the screening_id to basically form a unique composite index of the contact_id and screening_id): pivot_table = unified_df.pivot_table(index=[&#39;id&#39;,&#39;contact_id&#39;,&#39;screening_i&zwnj;&#8203;d&#39;], columns=&#39;question&#39;, values=&#39;response_answer&#39;, aggfunc=lambda x: &#39; &#39;.join(x))"}], "tags": [], "owner": {"reputation": 4420, "user_id": 1968405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63a734a216422efeab3b81d058f1b7b5?s=128&d=identicon&r=PG", "display_name": "cwharland", "link": "https://stackoverflow.com/users/1968405/cwharland"}, "is_accepted": true, "score": 44, "last_activity_date": 1450900962, "creation_date": 1450900962, "answer_id": 34442895, "question_id": 34442214, "link": "https://stackoverflow.com/questions/34442214/pivoting-a-pandas-dataframe-containing-strings-no-numeric-types-to-aggregate/34442895#34442895", "title": "Pivoting a Pandas Dataframe containing strings - &#39;No numeric types to aggregate&#39; error", "body": "<p>The default <code>aggfunc</code> in <code>pivot_table</code> is <code>np.sum</code> and it doesn't know what to do with strings and you haven't indicated what the index should be properly. Trying something like:</p>\n\n<pre><code>pivot_table = unified_df.pivot_table(index=['id', 'contact_id'],\n                                     columns='question', \n                                     values='response_answer',\n                                     aggfunc=lambda x: ' '.join(x))\n</code></pre>\n\n<p>This explicitly sets one row per <code>id, contact_id</code> pair and pivots the set of <code>response_answer</code> values on <code>question</code>. The <code>aggfunc</code> just assures that if you have multiple answers to the same question in the raw data that we just concatenate them together with spaces. The syntax of <code>pivot_table</code> might vary depending on your pandas version.</p>\n\n<p>Here's a quick example:</p>\n\n<pre><code>In [24]: import pandas as pd\n\nIn [25]: import random\n\nIn [26]: df = pd.DataFrame({'id':[100*random.randint(10, 50) for _ in range(100)], 'question': [str(random.randint(0,3)) for _ in range(100)], 'response': [str(random.randint(100,120)) for _ in range(100)]})\n\nIn [27]: df.head()\nOut[27]:\n     id question response\n0  3100        1      116\n1  4500        2      113\n2  5000        1      120\n3  3900        2      103\n4  4300        0      117\n\nIn [28]: df.info()\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nInt64Index: 100 entries, 0 to 99\nData columns (total 3 columns):\nid          100 non-null int64\nquestion    100 non-null object\nresponse    100 non-null object\ndtypes: int64(1), object(2)\nmemory usage: 3.1+ KB\n\nIn [29]: df.pivot_table(index='id', columns='question', values='response', aggfunc=lambda x: ' '.join(x)).head()\nOut[29]:\nquestion        0        1    2        3\nid\n1000      110 120      NaN  100      NaN\n1100          NaN  106 108  104      NaN\n1200      104 113      119  NaN      101\n1300          102      NaN  116  108 120\n1400          NaN      NaN  116      NaN\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 169, "user_id": 8553299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76033450e54742b317db578e864c3dfd?s=128&d=identicon&r=PG&f=1", "display_name": "johnInHome", "link": "https://stackoverflow.com/users/8553299/johninhome"}, "is_accepted": false, "score": 10, "last_activity_date": 1510585649, "last_edit_date": 1592644375, "creation_date": 1510585649, "answer_id": 47267444, "question_id": 34442214, "link": "https://stackoverflow.com/questions/34442214/pivoting-a-pandas-dataframe-containing-strings-no-numeric-types-to-aggregate/47267444#47267444", "title": "Pivoting a Pandas Dataframe containing strings - &#39;No numeric types to aggregate&#39; error", "body": "<p>There are several ways.</p>\n<h1>1</h1>\n<pre><code>df1 = df.groupby([&quot;id&quot;,&quot;contact_id&quot;,&quot;Network_Name&quot;,&quot;question&quot;])['response_answer'].aggregate(lambda x: x).unstack().reset_index()\ndf1.columns=df1.columns.tolist()\nprint (df1)\n</code></pre>\n<h1>2</h1>\n<pre><code>df1 = df.set_index([&quot;id&quot;,&quot;contact_id&quot;,&quot;Network_Name&quot;,&quot;question&quot;])['response_answer'].unstack().reset_index()\ndf1.columns=df1.columns.tolist()\nprint (df1)\n</code></pre>\n<h1>3</h1>\n<pre><code>df1 = df.groupby([&quot;id&quot;,&quot;contact_id&quot;,&quot;Network_Name&quot;,&quot;question&quot;])['response_answer'].aggregate('first').unstack().reset_index()\ndf1.columns=df1.columns.tolist()\nprint (df1)\n</code></pre>\n<h1>4</h1>\n<pre><code>df1 = df.pivot_table(index=[&quot;id&quot;,&quot;contact_id&quot;,&quot;Network_Name&quot;], columns='question', values=['response_answer'], aggfunc='first')\ndf1.columns = df1.columns.droplevel()\ndf1 = df1.reset_index()\ndf1.columns=df1.columns.tolist()\nprint (df1)\n</code></pre>\n<p>Same ans.</p>\n<pre><code>    id  contact_id  Network_Name       City State Trip_End_Location\n0   16      137519          2206       None    Ca              None\n1   17      137520          2206       None    Ca              None\n2   18      137521          2206       None    Ca              None\n3   19      137522          2206       None    Ca              None\n4   20      137523          2208  Lancaster  None              None\n5   21      137524          2208  Lancaster  None              None\n6   22      137525          2208  Lancaster  None              None\n7   23      137526          2208  Lancaster  None              None\n8   24      137527          2208       None  None              Home\n9   25      137528          2208       None  None              Home\n10  26      137529          2208       None  None              Home\n11  27      137530          2208       None  None              Home\n</code></pre>\n"}], "owner": {"reputation": 745, "user_id": 1116491, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3FzEu.jpg?s=128&g=1", "display_name": "jmhead", "link": "https://stackoverflow.com/users/1116491/jmhead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28372, "favorite_count": 9, "accepted_answer_id": 34442895, "answer_count": 2, "score": 18, "last_activity_date": 1510585649, "creation_date": 1450897858, "question_id": 34442214, "link": "https://stackoverflow.com/questions/34442214/pivoting-a-pandas-dataframe-containing-strings-no-numeric-types-to-aggregate", "title": "Pivoting a Pandas Dataframe containing strings - &#39;No numeric types to aggregate&#39; error", "body": "<p>There is a good number of questions about this error, but after looking around I'm still not able to find/wrap my mind around a solution yet.\nI'm trying to pivot a data frame with strings, to get some row data to become columns, but not working out so far.</p>\n\n<p><strong>Shape of my df</strong> </p>\n\n<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;\nInt64Index: 515932 entries, 0 to 515931\nData columns (total 5 columns):\nid                 515932 non-null object\ncc_contact_id      515932 non-null object\nNetwork_Name       515932 non-null object\nquestion           515932 non-null object\nresponse_answer    515932 non-null object\ndtypes: object(5)\nmemory usage: 23.6+ MB\n</code></pre>\n\n<p><strong>Sample format</strong></p>\n\n<pre><code>id  contact_id  question    response_answer\n16  137519  2206    State   Ca\n17  137520  2206    State   Ca\n18  137521  2206    State   Ca\n19  137522  2206    State   Ca\n20  137523  2208    City    Lancaster\n21  137524  2208    City    Lancaster\n22  137525  2208    City    Lancaster\n23  137526  2208    City    Lancaster\n24  137527  2208    Trip_End Location   Home\n25  137528  2208    Trip_End Location   Home\n26  137529  2208    Trip_End Location   Home\n27  137530  2208    Trip_End Location   Home\n</code></pre>\n\n<p><strong>What I would like to pivot to</strong></p>\n\n<pre><code>id  contact_id      State   City       Trip_End Location\n16  137519  2206    Ca      None       None None\n20  137523  2208    None    Lancaster  None None\n24  137527  2208    None    None       None Home\netc. etc. \n</code></pre>\n\n<p>Where the <em>question</em> values become the columns, with the <em>response_answer</em> being in it's corresponding column, and retaining the ids</p>\n\n<p>What I have tried</p>\n\n<pre><code>unified_df = pd.DataFrame(unified_data, columns=target_table_headers, dtype=object)\n\npivot_table = unified_df.pivot_table('response_answer',['id','cc_contact_id'],'question')\n# OR\npivot_table = unified_df.pivot_table('response_answer','question')\n</code></pre>\n\n<p><em>DataError: No numeric types to aggregate</em></p>\n\n<p>What is the way to pivot a data frame with string values?</p>\n"}, {"tags": ["python", "django", "django-haystack", "docker-compose"], "comments": [{"owner": {"reputation": 1595, "user_id": 3461003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Oansd.jpg?s=128&g=1", "display_name": "&#214;zer S.", "link": "https://stackoverflow.com/users/3461003/%c3%96zer-s"}, "edited": false, "score": 0, "creation_date": 1486351896, "post_id": 34442202, "comment_id": 71292226, "body": "difficult to debug without the docker-compose.yml, possibly docker-entrypoint.sh, etc. (related to Docker). These connection issues are usually from Docker from my experience."}], "answers": [{"comments": [{"owner": {"reputation": 17732, "user_id": 237939, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/GYEZO.jpg?s=128&g=1", "display_name": "Rajesh Chamarthi", "link": "https://stackoverflow.com/users/237939/rajesh-chamarthi"}, "edited": false, "score": 0, "creation_date": 1450920539, "post_id": 34446098, "comment_id": 56634323, "body": "Thanks, I will try that. I was assuming that adding the dependency would make sure the linking happens at the end, at which point containers might already be created."}, {"owner": {"reputation": 17732, "user_id": 237939, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/GYEZO.jpg?s=128&g=1", "display_name": "Rajesh Chamarthi", "link": "https://stackoverflow.com/users/237939/rajesh-chamarthi"}, "edited": false, "score": 0, "creation_date": 1451532095, "post_id": 34446098, "comment_id": 56823175, "body": "I updated the question. I am able to do a curl from web to the elasticsearch container, but haystack connection is still failing. Any thoughts?"}, {"owner": {"reputation": 435, "user_id": 1491139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ed73a5aab73a7dabb6da4e924598e3?s=128&d=identicon&r=PG", "display_name": "jacoor", "link": "https://stackoverflow.com/users/1491139/jacoor"}, "edited": false, "score": 0, "creation_date": 1483052045, "post_id": 34446098, "comment_id": 69979020, "body": "I hit this wall too today... Any help?"}], "tags": [], "owner": {"reputation": 19007, "user_id": 444646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/996ae88559e4c401582326971c77c75a?s=128&d=identicon&r=PG", "display_name": "dnephin", "link": "https://stackoverflow.com/users/444646/dnephin"}, "is_accepted": true, "score": 1, "last_activity_date": 1450920398, "creation_date": 1450920398, "answer_id": 34446098, "question_id": 34442202, "link": "https://stackoverflow.com/questions/34442202/docker-compose-and-django-haystack/34446098#34446098", "title": "docker-compose and django-haystack", "body": "<p>I think what's happening is that the script assumes elasticsearch is already available, but when all the containers start at the same time, elasticsearch might still be starting and not available yet.</p>\n\n<p>Before running the migration either sleep a fixed number of seconds, or retry the connection a few times with a short sleep between retries.</p>\n"}, {"tags": [], "owner": {"reputation": 612, "user_id": 6615054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e433ac9c0b9d151b5ef61b666d6c6e57?s=128&d=identicon&r=PG", "display_name": "antikytheraton", "link": "https://stackoverflow.com/users/6615054/antikytheraton"}, "is_accepted": false, "score": 0, "last_activity_date": 1544239306, "last_edit_date": 1544239306, "creation_date": 1544238946, "answer_id": 53679180, "question_id": 34442202, "link": "https://stackoverflow.com/questions/34442202/docker-compose-and-django-haystack/53679180#53679180", "title": "docker-compose and django-haystack", "body": "<p>Where you set the connection</p>\n\n<pre><code>connections.create_connection()\n</code></pre>\n\n<p>write</p>\n\n<pre><code>connections.create_connection(\n    alias='default', \n    hosts=['http://elasticsearch:9200'], \n    timeout=60)\n</code></pre>\n\n<p>Here the documentation\n<a href=\"https://elasticsearch-dsl.readthedocs.io/en/latest/configuration.html#single-connection-with-an-alias\" rel=\"nofollow noreferrer\">https://elasticsearch-dsl.readthedocs.io/en/latest/configuration.html#single-connection-with-an-alias</a></p>\n"}], "owner": {"reputation": 17732, "user_id": 237939, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/GYEZO.jpg?s=128&g=1", "display_name": "Rajesh Chamarthi", "link": "https://stackoverflow.com/users/237939/rajesh-chamarthi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1096, "favorite_count": 0, "accepted_answer_id": 34446098, "answer_count": 2, "score": 3, "last_activity_date": 1544239306, "creation_date": 1450897823, "last_edit_date": 1451532015, "question_id": 34442202, "link": "https://stackoverflow.com/questions/34442202/docker-compose-and-django-haystack", "title": "docker-compose and django-haystack", "body": "<p>I am trying to get docker-compose and django-haystack to work together. I am using the following settings (web and elastic search in different containers) and seeing errors when I try to build my index.</p>\n\n<p>I have narrowed the problem a bit and it looks like the elasticsearch container is working as expected. However, haystack backend is unable to make the connection.</p>\n\n<p>All containers:</p>\n\n<pre><code>root@movie-new:/home/django/movie# docker-compose ps\n        Name                       Command               State                       Ports\n---------------------------------------------------------------------------------------------------------------\nmovie_data_1            /docker-entrypoint.sh true       Up      5432/tcp\nmovie_db_1              /docker-entrypoint.sh postgres   Up      0.0.0.0:5432-&gt;5432/tcp\nmovie_elasticsearch_1   /docker-entrypoint.sh elas ...   Up      0.0.0.0:9200-&gt;9200/tcp, 0.0.0.0:9300-&gt;9300/tcp\nmovie_nginx_1           /usr/sbin/nginx                  Up      0.0.0.0:80-&gt;80/tcp\nmovie_web_1             bash -c python manage.py m ...   Up      8000/tcp\nmovie_web_run_1         /bin/bash                        Up      8000/tcp\nmovie_web_run_3         /bin/bash                        Up      8000/tcp\n</code></pre>\n\n<p>Inside my web conatiner..</p>\n\n<pre><code>root@movie-new:/home/django/movie# docker-compose run --rm web /bin/bash\nroot@0351ddc88229:/usr/src/app# curl -XGET http://elasticsearch:9200/\n{\n  \"name\" : \"Dream Weaver\",\n  \"cluster_name\" : \"elasticsearch\",\n  \"version\" : {\n    \"number\" : \"2.1.1\",\n    \"build_hash\" : \"40e2c53a6b6c2972b3d13846e450e66f4375bd71\",\n    \"build_timestamp\" : \"2015-12-15T13:05:55Z\",\n    \"build_snapshot\" : false,\n    \"lucene_version\" : \"5.3.1\"\n  },\n  \"tagline\" : \"You Know, for Search\"\n}\n</code></pre>\n\n<p><strong>settings.py</strong></p>\n\n<pre><code>HAYSTACK_CONNECTIONS = {\n    'default': {\n        'ENGINE': 'haystack.backends.elasticsearch_backend.ElasticsearchSearchEngine',\n        'URL': 'http://elasticsearch:9200/',\n        'INDEX_NAME': 'haystack',\n        'TIMEOUT' : 120\n    },\n}\n</code></pre>\n\n<p>root@4b397e3ad5dc:/usr/src/app# python manage.py rebuild_index</p>\n\n<pre><code>WARNING: This will irreparably remove EVERYTHING from your search index in connection 'default'.\nYour choices after this are to restore from backups or rebuild via the `rebuild_index` command.\nAre you sure you wish to continue? [y/N] y\nRemoving all documents from your index because you said so.\nFailed to clear Elasticsearch index: ConnectionError(&lt;urllib3.connection.HTTPConnection object at 0x7fc67c8192d0&gt;: Failed to establish a new connection: [Errno 111] Connection refused) caused by: NewConnectionError(&lt;urllib3.connection.HTTPConnection object at 0x7fc67c8192d0&gt;: Failed to establish a new connection: [Errno 111] Connection refused)\nTraceback (most recent call last):\n  File \"/usr/local/lib/python2.7/site-packages/haystack/backends/elasticsearch_backend.py\", line 234, in clear\n    self.conn.indices.delete(index=self.index_name, ignore=404)\n  File \"/usr/local/lib/python2.7/site-packages/elasticsearch/client/utils.py\", line 69, in _wrapped\n    return func(*args, params=params, **kwargs)\n  File \"/usr/local/lib/python2.7/site-packages/elasticsearch/client/indices.py\", line 198, in delete\n    params=params)\n  File \"/usr/local/lib/python2.7/site-packages/elasticsearch/transport.py\", line 307, in perform_request\n    status, headers, data = connection.perform_request(method, url, params, body, ignore=ignore, timeout=timeout)\n  File \"/usr/local/lib/python2.7/site-packages/elasticsearch/connection/http_urllib3.py\", line 89, in perform_request\n    raise ConnectionError('N/A', str(e), e)\nConnectionError: ConnectionError(&lt;urllib3.connection.HTTPConnection object at 0x7fc67c8192d0&gt;: Failed to establish a new connection: [Errno 111] Connection refused) caused by: NewConnectionError(&lt;urllib3.connection.HTTPConnection object at 0x7fc67c8192d0&gt;: Failed to establish a new connection: [Errno 111] Connection refused)\n</code></pre>\n"}, {"tags": ["python", "sqlite", "sqlalchemy"], "comments": [{"owner": {"reputation": 517, "user_id": 307743, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/26b2328deaa0ff977e9863f22cee3f93?s=128&d=identicon&r=PG&f=1", "display_name": "compiledweird", "link": "https://stackoverflow.com/users/307743/compiledweird"}, "edited": false, "score": 0, "creation_date": 1581113610, "post_id": 34442157, "comment_id": 106335073, "body": "I&#39;m having the same problem when running tests (using sqlite) against code that has sqlalchemy running sql written for mysql syntax. :("}], "answers": [{"tags": [], "owner": {"reputation": 2179, "user_id": 2653384, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1dd72e30eaef778f5d7ca2e573b8f9ca?s=128&d=identicon&r=PG", "display_name": "Busturdust", "link": "https://stackoverflow.com/users/2653384/busturdust"}, "is_accepted": true, "score": 2, "last_activity_date": 1450898515, "creation_date": 1450898515, "answer_id": 34442370, "question_id": 34442157, "link": "https://stackoverflow.com/questions/34442157/sqlalchemy-date-functions-missing/34442370#34442370", "title": "sqlalchemy date functions missing", "body": "<p>I don't believe <code>Year()</code> Is a function in sqlite.</p>\n\n<p>You should use <code>strftime</code> Instead. </p>\n\n<p>Something like <code>select strftime('%Y',date) from data limit 1</code> </p>\n\n<p>W3 Resource on strftime.\n<a href=\"http://www.w3resource.com/sqlite/sqlite-strftime.php\" rel=\"nofollow\">http://www.w3resource.com/sqlite/sqlite-strftime.php</a></p>\n"}], "owner": {"reputation": 1309, "user_id": 4394564, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/vaE2u.jpg?s=128&g=1", "display_name": "dooms", "link": "https://stackoverflow.com/users/4394564/dooms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 893, "favorite_count": 0, "accepted_answer_id": 34442370, "answer_count": 1, "score": 1, "last_activity_date": 1450898515, "creation_date": 1450897637, "question_id": 34442157, "link": "https://stackoverflow.com/questions/34442157/sqlalchemy-date-functions-missing", "title": "sqlalchemy date functions missing", "body": "<p>I'm using sqlalchemy with sqlite and python.</p>\n\n<pre><code>dataset.to_sql('data', disk_engine, if_exists='replace')\ndef query(string):\n    return pd.read_sql_query(string, disk_engine)\n</code></pre>\n\n<p>Dataset is a pandas dataframe loaded from a csv file.</p>\n\n<pre><code> date = \"select SUBSTR(Date,1) from data LIMIT 1\"\n print query(date)\n\n                SUBSTR(Date,1)\n0  2014-08-08 00:00:00.000000\n</code></pre>\n\n<p>So the SUBSTR() method does work, but when I try this :</p>\n\n<pre><code>date = \"select YEAR(Date) from data LIMIT 1\"\nprint query(date)\n\nOperationalError: (sqlite3.OperationalError) no such function: YEAR [SQL: 'select YEAR(Date) from data LIMIT 1']\n</code></pre>\n\n<p>I get this error.<br/></p>\n\n<p>I didn't import SUBSTR so why the SUBSTR() method is recognized and not any Date functions ?</p>\n"}, {"tags": ["python", "file"], "comments": [{"owner": {"reputation": 36814, "user_id": 671543, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG", "display_name": "njzk2", "link": "https://stackoverflow.com/users/671543/njzk2"}, "edited": false, "score": 3, "creation_date": 1450896919, "post_id": 34441965, "comment_id": 56625556, "body": "because the close happens first, and therefore that part is flushed to the file. The rest is delayed until the file is closed, which happen when your program exists, since you never call it explicitely"}, {"owner": {"reputation": 36814, "user_id": 671543, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG", "display_name": "njzk2", "link": "https://stackoverflow.com/users/671543/njzk2"}, "edited": false, "score": 0, "creation_date": 1450897281, "post_id": 34441965, "comment_id": 56625714, "body": "note that this may vary depending on the environment."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 4611991, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/63b2d22f0d9da34c9a1a8d827f7754f6?s=128&d=identicon&r=PG&f=1", "display_name": "Maanish", "link": "https://stackoverflow.com/users/4611991/maanish"}, "edited": false, "score": 0, "creation_date": 1450898083, "post_id": 34442021, "comment_id": 56626089, "body": "I removed close from the function and no close anywhere. Still I have the same issue."}, {"owner": {"reputation": 5358, "user_id": 3171657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J3bKr.png?s=128&g=1", "display_name": "Turn", "link": "https://stackoverflow.com/users/3171657/turn"}, "reply_to_user": {"reputation": 89, "user_id": 4611991, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/63b2d22f0d9da34c9a1a8d827f7754f6?s=128&d=identicon&r=PG&f=1", "display_name": "Maanish", "link": "https://stackoverflow.com/users/4611991/maanish"}, "edited": false, "score": 1, "creation_date": 1450898285, "post_id": 34442021, "comment_id": 56626207, "body": "When the file pointer inside of <code>write_function</code> goes out of scope it is calling  <code>close</code> implicitly. The larger issue remains, don&#39;t keep around multiple writable filehandles. Pass the filehandle into your function or close it first."}, {"owner": {"reputation": 89, "user_id": 4611991, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/63b2d22f0d9da34c9a1a8d827f7754f6?s=128&d=identicon&r=PG&f=1", "display_name": "Maanish", "link": "https://stackoverflow.com/users/4611991/maanish"}, "edited": false, "score": 0, "creation_date": 1450900312, "post_id": 34442021, "comment_id": 56627155, "body": "I tried to click the check, but this throws me an error. (An error has occurred- please retry your request) This happens for me in every post. Even for an upvote .:)"}], "tags": [], "owner": {"reputation": 5358, "user_id": 3171657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J3bKr.png?s=128&g=1", "display_name": "Turn", "link": "https://stackoverflow.com/users/3171657/turn"}, "is_accepted": false, "score": 3, "last_activity_date": 1450898185, "last_edit_date": 1450898185, "creation_date": 1450896984, "answer_id": 34442021, "question_id": 34441965, "link": "https://stackoverflow.com/questions/34441965/writing-to-a-file-and-function/34442021#34442021", "title": "Writing to a file and function", "body": "<p>You shouldn't generally have two open write file descriptors to a file as you do. What's happening here is that writes are buffered until something causes them to get flushed. In this case you explicitly call the <code>close</code> in <code>write_function</code> so it is called (and that write gets flushed) first. The first write isn't flushed until the <code>close</code> on its file descriptor is implicitly closed when your program exits.</p>\n"}], "owner": {"reputation": 89, "user_id": 4611991, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/63b2d22f0d9da34c9a1a8d827f7754f6?s=128&d=identicon&r=PG&f=1", "display_name": "Maanish", "link": "https://stackoverflow.com/users/4611991/maanish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1450898185, "creation_date": 1450896718, "question_id": 34441965, "link": "https://stackoverflow.com/questions/34441965/writing-to-a-file-and-function", "title": "Writing to a file and function", "body": "<p>I have a code similar to:</p>\n\n<pre><code>'''\nThis is main file\n'''\n\npath_to_file = './sample.txt'\nconfig_file = open(path_to_file, 'a')\nimport functions_write as function\na = 1\nif a== 1:\n    config_file.write(\"Hello World\\n\")\n    function_text = \"Hi World\\n\"\n    function.write_function(function_text, path_to_file)\n</code></pre>\n\n#\n\n<p>Another file for writing functions functions_write.py</p>\n\n<pre><code>def write_function(text_write, path_to_file):\n    config_file = open(path_to_file, 'a')\n    config_file.write(text_write)\n    config_file.close()\n\n#################################################################\n</code></pre>\n\n<p>I had expected it would write in order</p>\n\n<p>Hello World \nHi World</p>\n\n<p>But it is writing as:\nHi World\nHello World</p>\n\n<p>Any thoughts on why it is writing the function first in the file.</p>\n\n<p>Thanks  </p>\n"}, {"tags": ["python", "pyqt"], "answers": [{"tags": [], "owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "is_accepted": true, "score": 1, "last_activity_date": 1450897857, "last_edit_date": 1450897857, "creation_date": 1450897135, "answer_id": 34442056, "question_id": 34441925, "link": "https://stackoverflow.com/questions/34441925/python-how-to-amend-file-after-importing/34442056#34442056", "title": "python how to amend file after importing", "body": "<p>Don't modify your auto-generated file. Just import and inherit from it: </p>\n\n<pre><code>from PySide import QtCore, QtGui\n# modify the import if needed\n# from PyQt5 import QtCore, QtGui\n# from PyQt4 import QtCore, QtGui\n\nfrom ui import Ui_MainWindow\n\nclass MainWindow(QtGui.QMainWindow, Ui_MainWindow):\n    \"\"\"Main Window.\n    \"\"\"\n    def __init__(self, parent=None):\n        super(MainWindow, self).__init__(parent)\n        self.setupUi(self)\n        #  your code here\n</code></pre>\n\n<p>Here <code>ui</code> is the auto-generated module. No code changes are needed next time you update it.</p>\n"}, {"tags": [], "owner": {"reputation": 1390, "user_id": 5567570, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/07905635915775fc5a98c92f7a35a4bb?s=128&d=identicon&r=PG&f=1", "display_name": "python_starter", "link": "https://stackoverflow.com/users/5567570/python-starter"}, "is_accepted": false, "score": 0, "last_activity_date": 1450932051, "creation_date": 1450932051, "answer_id": 34447328, "question_id": 34441925, "link": "https://stackoverflow.com/questions/34441925/python-how-to-amend-file-after-importing/34447328#34447328", "title": "python how to amend file after importing", "body": "<p>I have found that the best way to import &amp; use the file is as follows, this may just be in addition to the other answer.</p>\n\n<pre><code>import sys\nfrom PyQt4 import QtCore, QtGui\nfrom mysqlviewer import*\n\nclass Window(QtGui.QMainWindow):\n\n     def __init__(self, parent=None):\n        QtGui.QWidget.__init__(self, parent)\n        self.ui = Ui_MainWindow()\n        self.ui.setupUi(self)\n\n\n        self.ui.comboBox.addItem(\"Example Item\")\n\nif __name__ == \"__main__\":\n\n    app = QtGui.QApplication(sys.argv)\n    viewer = Window()\n    viewer.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 1390, "user_id": 5567570, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/07905635915775fc5a98c92f7a35a4bb?s=128&d=identicon&r=PG&f=1", "display_name": "python_starter", "link": "https://stackoverflow.com/users/5567570/python-starter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 34442056, "answer_count": 2, "score": 1, "last_activity_date": 1450932051, "creation_date": 1450896589, "last_edit_date": 1450903181, "question_id": 34441925, "link": "https://stackoverflow.com/questions/34441925/python-how-to-amend-file-after-importing", "title": "python how to amend file after importing", "body": "<p>I've just realized only after having lost all the changes I made, that once you go back to the QT designer and amend something on the GUI and convert that back to a .py file all changes are erased on the previous .py file.</p>\n\n<p>Would you recommend that I save it to a new .py file then copy &amp; paste or is there a better 'professional' way to do this?</p>\n\n<p>EDIT: </p>\n\n<p>I have now managed to import the file instead of amending it with the code below:</p>\n\n<pre><code>from PyQt4 import QtCore, QtGui\nfrom mysqlviewer import Ui_MainWindow\n\nclass MainWindow(QtGui.QMainWindow, Ui_MainWindow):\n\n    def __init__(self, parent=None):\n        super(MainWindow, self).__init__(parent)\n        self.setupUi(self)\n\n\n\nif __name__ == \"__main__\":\n    import sys\n    app = QtGui.QApplication(sys.argv)\n    MainWindow = QtGui.QMainWindow()\n    ui = Ui_MainWindow()\n    ui.setupUi(MainWindow)\n    MainWindow.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>I am now trying to simply add an item to the comboBox of the UI but it does not show.</p>\n\n<p>Here is what I am attempting,</p>\n\n<pre><code>from PyQt4 import QtCore, QtGui\nfrom mysqlviewer import Ui_MainWindow\n\nclass MainWindow(QtGui.QMainWindow, Ui_MainWindow):\n\n    def __init__(self, parent=None):\n        super(MainWindow, self).__init__(parent)\n        self.setupUi(self)\n\n        self.comboBox_2.addItem(\"Example Item\")\n\nif __name__ == \"__main__\":\n    import sys\n    app = QtGui.QApplication(sys.argv)\n    MainWindow = QtGui.QMainWindow()\n    ui = Ui_MainWindow()\n    ui.setupUi(MainWindow)\n    MainWindow.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}, {"tags": ["python", "django", "forms"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 1, "creation_date": 1450896887, "post_id": 34441901, "comment_id": 56625546, "body": "Really you should use a FormView and do this logic in the <code>form_valid</code> method."}], "answers": [{"tags": [], "owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "is_accepted": true, "score": 6, "last_activity_date": 1450896786, "creation_date": 1450896786, "answer_id": 34441981, "question_id": 34441901, "link": "https://stackoverflow.com/questions/34441901/how-to-access-a-modelforms-fields-in-django-view/34441981#34441981", "title": "How to access a ModelForm&#39;s fields in Django view", "body": "<p>You need to call <code>form.is_valid()</code> in order to access the form data:</p>\n\n<pre><code>form = StepOne(request.POST)\nif form.is_valid():\n    content = form.cleaned_data['content']\n    difficulty = form.cleaned_data['difficulty']\n</code></pre>\n\n<p><a href=\"https://docs.djangoproject.com/en/1.9/topics/forms/#building-a-form-in-django\" rel=\"noreferrer\">django doc</a>.</p>\n"}], "owner": {"reputation": 1309, "user_id": 4966877, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/02db551f2b05ae241c2b3dc0cadfbb5b?s=128&d=identicon&r=PG&f=1", "display_name": "Bora", "link": "https://stackoverflow.com/users/4966877/bora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1298, "favorite_count": 0, "accepted_answer_id": 34441981, "answer_count": 1, "score": 1, "last_activity_date": 1450896786, "creation_date": 1450896482, "question_id": 34441901, "link": "https://stackoverflow.com/questions/34441901/how-to-access-a-modelforms-fields-in-django-view", "title": "How to access a ModelForm&#39;s fields in Django view", "body": "<p>I would like to enter the fields' values after my <code>ModelForm</code> instance is posted. I have three forms and every step one form is posted. I would like to make a logging system to save data to database until the user saves finishes all three forms. One of the forms is a <code>ModelForm</code>.</p>\n\n<p>In my <code>forms.py</code> file:</p>\n\n<pre><code>class StepOne(forms.ModelForm):\n    class Meta:\n        model = Article\n        fields = ['name', 'difficulty', 'content']\n</code></pre>\n\n<p>I would like to access the form's field values after it has been posted in my view class, like this:</p>\n\n<pre><code>class MyView(views.View):\n    def post(self, request):\n        form = StepOne(request.POST)\n        content = form.content\n        difficulty = form.difficulty\n        ....\n</code></pre>\n\n<p>Is there such thing possible?</p>\n"}, {"tags": ["python", "django", "rest", "django-rest-framework", "django-serializer"], "answers": [{"comments": [{"owner": {"reputation": 629, "user_id": 4966987, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/a98462949406ee05cb3518e1d986f8ea?s=128&d=identicon&r=PG&f=1", "display_name": "qwertp", "link": "https://stackoverflow.com/users/4966987/qwertp"}, "edited": false, "score": 0, "creation_date": 1450909350, "post_id": 34444355, "comment_id": 56631084, "body": "point1 : I get the following error - <code>Field name </code>person_set` is not valid for model `Club``"}, {"owner": {"reputation": 6134, "user_id": 930517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1070cbf307dce1511a72bd84e755f9b0?s=128&d=identicon&r=PG", "display_name": "Ashley &#39;CptLemming&#39; Wilson", "link": "https://stackoverflow.com/users/930517/ashley-cptlemming-wilson"}, "reply_to_user": {"reputation": 629, "user_id": 4966987, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/a98462949406ee05cb3518e1d986f8ea?s=128&d=identicon&r=PG&f=1", "display_name": "qwertp", "link": "https://stackoverflow.com/users/4966987/qwertp"}, "edited": false, "score": 0, "creation_date": 1450909584, "post_id": 34444355, "comment_id": 56631182, "body": "This line <code>clubs = models.ManyToManyField(Club)</code> creates a related name of <code>person_set</code> automatically. You really should have this field available using the code you posted above."}, {"owner": {"reputation": 629, "user_id": 4966987, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/a98462949406ee05cb3518e1d986f8ea?s=128&d=identicon&r=PG&f=1", "display_name": "qwertp", "link": "https://stackoverflow.com/users/4966987/qwertp"}, "edited": false, "score": 0, "creation_date": 1450909861, "post_id": 34444355, "comment_id": 56631276, "body": "Also, point3: gives me single person details with details about multiple clubs he is in whereas I wanted clubdetails with various persons. And on clicking on one out of those persons, persondetails based on the view."}, {"owner": {"reputation": 6134, "user_id": 930517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1070cbf307dce1511a72bd84e755f9b0?s=128&d=identicon&r=PG", "display_name": "Ashley &#39;CptLemming&#39; Wilson", "link": "https://stackoverflow.com/users/930517/ashley-cptlemming-wilson"}, "reply_to_user": {"reputation": 629, "user_id": 4966987, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/a98462949406ee05cb3518e1d986f8ea?s=128&d=identicon&r=PG&f=1", "display_name": "qwertp", "link": "https://stackoverflow.com/users/4966987/qwertp"}, "edited": false, "score": 0, "creation_date": 1450910150, "post_id": 34444355, "comment_id": 56631394, "body": "You&#39;ve written <code>ClubDetail</code> as a <code>ListCreateAPIView</code> that returns a list of <code>Person</code> filtered by club. If I implement your code (with the changes in 3 &amp; 4) I get a list as described. If this is not what you want you may need to rethink this view."}, {"owner": {"reputation": 629, "user_id": 4966987, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/a98462949406ee05cb3518e1d986f8ea?s=128&d=identicon&r=PG&f=1", "display_name": "qwertp", "link": "https://stackoverflow.com/users/4966987/qwertp"}, "edited": false, "score": 1, "creation_date": 1450910449, "post_id": 34444355, "comment_id": 56631510, "body": "See what I wanted was 3 api&#39;s <code>&#47;clubs</code> <code>&#47;club&#47;&lt;pk&gt;&#47;details&#47;</code> and <code>&#47;persons&#47;&lt;pk&gt; - persons in a particular club</code> . Could you please explain what changes I need to make to achieve this. Thanks for explaining and answering so many questions. Been at it for hours."}, {"owner": {"reputation": 6134, "user_id": 930517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1070cbf307dce1511a72bd84e755f9b0?s=128&d=identicon&r=PG", "display_name": "Ashley &#39;CptLemming&#39; Wilson", "link": "https://stackoverflow.com/users/930517/ashley-cptlemming-wilson"}, "reply_to_user": {"reputation": 629, "user_id": 4966987, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/a98462949406ee05cb3518e1d986f8ea?s=128&d=identicon&r=PG&f=1", "display_name": "qwertp", "link": "https://stackoverflow.com/users/4966987/qwertp"}, "edited": false, "score": 0, "creation_date": 1450911188, "post_id": 34444355, "comment_id": 56631770, "body": "So I get you want <code>ClubList</code> to list clubs, <code>PersonDetail</code> to represent a single person, but what exactly do you want out of <code>ClubDetail</code>? Should it be a list of persons in a club, or should it be the club information, with a list of persons nested in the response?"}, {"owner": {"reputation": 629, "user_id": 4966987, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/a98462949406ee05cb3518e1d986f8ea?s=128&d=identicon&r=PG&f=1", "display_name": "qwertp", "link": "https://stackoverflow.com/users/4966987/qwertp"}, "edited": false, "score": 0, "creation_date": 1450911790, "post_id": 34444355, "comment_id": 56631964, "body": "Exactly.it should be a list of people in the club."}], "tags": [], "owner": {"reputation": 6134, "user_id": 930517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1070cbf307dce1511a72bd84e755f9b0?s=128&d=identicon&r=PG", "display_name": "Ashley &#39;CptLemming&#39; Wilson", "link": "https://stackoverflow.com/users/930517/ashley-cptlemming-wilson"}, "is_accepted": true, "score": 2, "last_activity_date": 1450907878, "creation_date": 1450907878, "answer_id": 34444355, "question_id": 34441899, "link": "https://stackoverflow.com/questions/34441899/django-rest-framework-implementing-many-to-many-relationship/34444355#34444355", "title": "Django Rest Framework implementing many to many relationship", "body": "<p>You have a number of issues in your code here. Namely:</p>\n\n<ul>\n<li>ClubSerializer.Meta.fields - person should be person_set</li>\n<li>PersonSerializer - clubs should be <code>clubs = ClubSerializer(many=True)</code></li>\n<li>ClubDetail.serializer_class  - ClubSerializer should be PersonSerializer</li>\n<li>ClubDetail - queryset should be <code>persons = Person.objects.filter(clubs=club)</code></li>\n</ul>\n\n<p>If you fix the above, you should be able to navigate to <code>ClubDetail</code> and see a list of club members.</p>\n"}, {"tags": [], "owner": {"reputation": 1086, "user_id": 908121, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8351915dac3d6271d383159e876b6e03?s=128&d=identicon&r=PG", "display_name": "Ben Wilson", "link": "https://stackoverflow.com/users/908121/ben-wilson"}, "is_accepted": false, "score": 0, "last_activity_date": 1611030059, "creation_date": 1611030059, "answer_id": 65785427, "question_id": 34441899, "link": "https://stackoverflow.com/questions/34441899/django-rest-framework-implementing-many-to-many-relationship/65785427#65785427", "title": "Django Rest Framework implementing many to many relationship", "body": "<p>If you are using a many to many relationship, make sure to explicitly declare the field, like so:</p>\n<pre><code>class WidgetSerializer(serializers.HyperlinkedModelSerializer):\n    \n    parts__part = serializers.CharField()\n    \n\n    class Meta:\n        model = Widget\n        fields = ['date', 'url', 'type','parts__part']\n</code></pre>\n"}], "owner": {"reputation": 629, "user_id": 4966987, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/a98462949406ee05cb3518e1d986f8ea?s=128&d=identicon&r=PG&f=1", "display_name": "qwertp", "link": "https://stackoverflow.com/users/4966987/qwertp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "accepted_answer_id": 34444355, "answer_count": 2, "score": 2, "last_activity_date": 1611030059, "creation_date": 1450896479, "question_id": 34441899, "link": "https://stackoverflow.com/questions/34441899/django-rest-framework-implementing-many-to-many-relationship", "title": "Django Rest Framework implementing many to many relationship", "body": "<p>I want implement a <code>many to many</code> relationship such that one person can join multiple social clubs and one social club can have multiple members. This is how far I've got but this doesn't display the movie details and serialization gives me an error -<br>\n<code>Original exception text was: 'ManyRelatedManager' object has no attribute 'club_name'.</code></p>\n\n<p><code>models.py</code></p>\n\n<pre><code>class Club(models.Model):\n  club_name = models.CharField(default='',blank=False,max_length=100)\n\nclass Person(models.Model):\n  person_name = models.CharField(default='',blank=False,max_length=200)\n  clubs = models.ManyToManyField(Club)\n</code></pre>\n\n<p><code>serializers.py</code></p>\n\n<pre><code>class ClubSerializer(serializers.ModelSerializer):\n  class Meta:\n    model = Club\n    fields = ('url','id','club_name','person')\n\nclass PersonSerializer(serializers.ModelSerializer):\n  clubs = ClubSerializer()\n  class Meta:\n    model = Person\n    fields = ('url','id','person_name','clubs')\n</code></pre>\n\n<p><code>views.py</code></p>\n\n<pre><code>class ClubDetail(generics.ListCreateAPIView):\nserializer_class = ClubSerializer\n\n  def get_queryset(self):\n    club = Clubs.objects.get(pk=self.kwargs.get('pk',None))\n    persons = Person.objects.filter(club=club)\n    return persons\n\nclass ClubList(generics.ListCreateAPIView):\n  queryset = Club.objects.all()\n  serializer_class = ClubSerializer\n\n\nclass PersonDetail(generics.RetrieveUpdateDestroyAPIView):\n  serializer_class = PersonSerializer\n\n\ndef get_object(self):\n  person_id = self.kwargs.get('pk',None)\n  return Person.objects.get(pk=person_id) \n</code></pre>\n\n<p><code>urls.py</code></p>\n\n<pre><code>urlpatterns = format_suffix_patterns([\nurl(r'^$', views.api_root),\nurl(r'^clubs/$',\nviews.ClubList.as_view(),\nname='club-list'),\nurl(r'^clubs/(?P&lt;pk&gt;[0-9]+)/persons/$',\nviews.ClubDetail.as_view(),\nname='club-detail'),\nurl(r'^person/(?P&lt;pk&gt;[0-9]+)/$',\nviews.PersonDetail.as_view(),\nname='person-detail'),\n])\n</code></pre>\n\n<p>on my local server, I get the clubs list which navigates me to clubdetail view,but it doesn't show the movie names or, but I can't see the person list. How do I do this correctly?</p>\n"}, {"tags": ["python", "multithreading"], "comments": [{"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 1, "creation_date": 1450896788, "post_id": 34441859, "comment_id": 56625496, "body": "Code is incomplete, you&#39;ve not reported any error, what you expect to happen, what actually happens."}, {"owner": {"reputation": 1598, "user_id": 817632, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/72c22b80c2768bb38e4201323c582c97?s=128&d=identicon&r=PG", "display_name": "Olga", "link": "https://stackoverflow.com/users/817632/olga"}, "edited": false, "score": 0, "creation_date": 1450897022, "post_id": 34441859, "comment_id": 56625597, "body": "What seems to be going wrong - please clarify?"}, {"owner": {"reputation": 1159, "user_id": 989962, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/zMiu3.jpg?s=128&g=1", "display_name": "BlueSky", "link": "https://stackoverflow.com/users/989962/bluesky"}, "edited": false, "score": 0, "creation_date": 1450897427, "post_id": 34441859, "comment_id": 56625771, "body": "My concern is that &quot;chunk&quot; is not thread-safe, and thus the uploaded chunks will be inconsistent with the source data."}], "answers": [{"tags": [], "owner": {"reputation": 2352, "user_id": 5711725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cfaab398800db4fd0e9b0aae6621bda?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Mart&#237;n", "link": "https://stackoverflow.com/users/5711725/javier-mart%c3%adn"}, "is_accepted": false, "score": 3, "last_activity_date": 1450896879, "creation_date": 1450896879, "answer_id": 34441996, "question_id": 34441859, "link": "https://stackoverflow.com/questions/34441859/how-do-you-properly-pass-a-bytes-object-to-a-new-thread-in-python/34441996#34441996", "title": "How do you properly pass a bytes object to a new Thread in Python?", "body": "<p>Even if arguments are passed by reference to the new thread (and thus changes to chunks would show in the other thread) your code does not <em>write</em> to the chunks byte array, it simple takes a reference to a new bytes object each time from <code>f.read</code>. Thus, it seems that you should be safe, although if the upload is slow enough you might be reading the whole file into memory at once.</p>\n"}, {"tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 4, "last_activity_date": 1450898603, "last_edit_date": 1450898603, "creation_date": 1450898414, "answer_id": 34442336, "question_id": 34441859, "link": "https://stackoverflow.com/questions/34441859/how-do-you-properly-pass-a-bytes-object-to-a-new-thread-in-python/34442336#34442336", "title": "How do you properly pass a bytes object to a new Thread in Python?", "body": "<p><code>bytes</code> is an immutable type (as is <code>str</code> for that matter). Immutable types are not subject to race conditions (except in the sense that you could completely replace a shared name with a reference to a completely different object).</p>\n\n<p>As soon as you do <code>args=[filename, chunk]</code>, you've made a new <code>list</code> that \"coincidentally\" contains a reference to the same <code>bytes</code> as <code>chunk</code> does; from that moment on, <code>chunk</code> can be reassigned and it will have no effect on the contents of that <code>list</code>, whether or not the <code>Thread</code> has successfully launched.</p>\n"}], "owner": {"reputation": 1159, "user_id": 989962, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/zMiu3.jpg?s=128&g=1", "display_name": "BlueSky", "link": "https://stackoverflow.com/users/989962/bluesky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 34442336, "answer_count": 2, "score": 1, "last_activity_date": 1450898603, "creation_date": 1450896290, "last_edit_date": 1450897398, "question_id": 34441859, "link": "https://stackoverflow.com/questions/34441859/how-do-you-properly-pass-a-bytes-object-to-a-new-thread-in-python", "title": "How do you properly pass a bytes object to a new Thread in Python?", "body": "<p>I'm attempting to read a 1GB file, chunk it into 4MB files, and upload those individually using multiple threads.  However, I don't think I'm passing the \"chunk\" object correctly.  I suspect this line may be incorrect:</p>\n\n<pre><code>threading.Thread(target=UploadFile, args=[filename, chunk]).start()\n</code></pre>\n\n<p>Do I need to copy \"chunk\" before passing it as a parameter?  My concern is that \"chunk\" is not thread-safe in this example, and as a result, the uploaded chunks will not be consistent with the source data.</p>\n\n<p>Here is the full method:</p>\n\n<pre><code>def ChunkAndUpload(inputFilename):\n    global runningThreadCount\n    maxThreads = 10\n    chunkSize = 1024*1024*4\n    index = 0\n    with open(inputFilename, \"rb\") as f:\n        while True:\n            chunk = f.read(chunkSize)\n            if not chunk: break\n            filename = str(index) + \".dat\"\n            while (True):\n                if (runningThreadCount&lt;maxThreads):\n                    runningThreadCount += 1\n                    threading.Thread(target=UploadFile, args=[filename, chunk]).start()\n                    break\n                else:\n                    sleep(.1)\n            index+=1\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "renpy"], "comments": [{"owner": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "edited": false, "score": 0, "creation_date": 1450896412, "post_id": 34441855, "comment_id": 56625288, "body": "I have no idea what you&#39;re asking. Please take some time to read <a href=\"https://stackoverflow.com/help\">help center</a> and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 1598, "user_id": 817632, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/72c22b80c2768bb38e4201323c582c97?s=128&d=identicon&r=PG", "display_name": "Olga", "link": "https://stackoverflow.com/users/817632/olga"}, "edited": false, "score": 1, "creation_date": 1450897714, "post_id": 34441855, "comment_id": 56625898, "body": "You have so many words yet your question is totally unclear. Try improving your question by separating out sections. - Your code. - It&#39;s expected behaviour. - How it fails. If there are error messages also add that to your question."}, {"owner": {"reputation": 2912, "user_id": 3081206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YaKOY.jpg?s=128&g=1", "display_name": "takendarkk", "link": "https://stackoverflow.com/users/3081206/takendarkk"}, "edited": false, "score": 0, "creation_date": 1450900726, "post_id": 34441855, "comment_id": 56627348, "body": "Still extremely unclear what the specific problem is when you try to code this."}], "answers": [{"tags": [], "owner": {"reputation": 1846, "user_id": 2589273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/34lAu.jpg?s=128&g=1", "display_name": "user2589273", "link": "https://stackoverflow.com/users/2589273/user2589273"}, "is_accepted": false, "score": 0, "last_activity_date": 1450900305, "creation_date": 1450900305, "answer_id": 34442757, "question_id": 34441855, "link": "https://stackoverflow.com/questions/34441855/variable-setting-a-variable-to-be-used/34442757#34442757", "title": "Variable setting a variable to be used", "body": "<p>Not too sure what you are asking but here are my four guesses: </p>\n\n<p>1) assigning a variable using a string name / string from other variable:</p>\n\n<pre><code>dict = {'variable_name':value}\nadd to locals().update(dict)\n</code></pre>\n\n<p>2) Supplying an argument consisting as two parts which have already been pre-defined: </p>\n\n<pre><code>a = [b,c]\nbarstuffs(a)\n</code></pre>\n\n<p>3) something to do with making a class that can take on certain values:\nHave a read through <a href=\"https://docs.python.org/2/tutorial/classes.html\" rel=\"nofollow\">https://docs.python.org/2/tutorial/classes.html</a></p>\n\n<p>4) dictionary use: </p>\n\n<pre><code>dict = {0: 'skill1', 1: 'skill2'}\nused = 1 \ndict[used]  will give 'skill2'\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5712266, "user_type": "registered", "profile_image": "https://graph.facebook.com/1221671971181625/picture?type=large", "display_name": "Lezalith", "link": "https://stackoverflow.com/users/5712266/lezalith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 581, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1450902329, "creation_date": 1450896279, "last_edit_date": 1450902329, "question_id": 34441855, "link": "https://stackoverflow.com/questions/34441855/variable-setting-a-variable-to-be-used", "title": "Variable setting a variable to be used", "body": "<p>I've been working with Ren'Py engine, a simple engine for visual novels using Python to do stuff.\nI came across this problem and dunno what to do, anybody can gimme a hand?</p>\n\n<p><strong>bar:</strong>\n    StaticValue(<strong>variable</strong>, <strong>value</strong>)</p>\n\n<p><strong>Bar</strong> creates a bar representing <strong>variable</strong>, with the maximum value of <strong>value</strong>. I will not mention <strong>value</strong> further, as it is irrelevant to my question.</p>\n\n<p>I am trying to use <strong>Used</strong> as <strong>variable</strong>, meaning <strong>Used</strong> is variable being represented. \n<strong>Used</strong> however, doesn't have value in integer. <strong>Used</strong> is a variable with a value of <strong>\"Skill1\"</strong> or <strong>\"Skill2\"</strong></p>\n\n<p><strong>Skill1</strong> and <strong>Skill2</strong> are variables with integers, and THEY are the ones I want to represent by the <strong>bar</strong>.</p>\n\n<p>So, what I want in the end is StaticValue(<strong>Skill1</strong>, <strong>value</strong>) OR StaticValue(<strong>Skill2</strong>, <strong>value</strong>), depending on the value of <strong>Used</strong> (There is If predated to define this). </p>\n\n<p>Another try at the explanation:</p>\n\n<p>What Python THIKS RIGHT NOW:</p>\n\n<p>bar: StaticValue(<strong>Used</strong>). Bar is supposed to represent variable <strong>Used</strong>.</p>\n\n<p>What I WANT Python TO THINK:</p>\n\n<p>bar: StaticValue(<strong>Used</strong>). <strong>Used</strong> is a variable with a value of <strong>\"Skill1\"</strong>. Bar is supposed to represent <strong>Skill1</strong>, as this results in StaticValue(<strong>Skill1</strong>).</p>\n\n<p>I took a second try on that explanation, hopefully better now.\nAny help is appreciated.</p>\n\n<hr>\n\n<p>As a reaction to User2589273's answer, for better overview:\nThe 4) would be exactly what I want/need, but it gives me unspecified error now. \nWhat I did was:</p>\n\n<pre><code>python:\n    if InTeaching == \"Skill1\":\n        UsedSkill = \"1\"\n    elif InTeaching == \"Skill2\":\n        UsedSkill = \"2\"\n    elif InTeaching == \"Skill3\":\n        UsedSkill = \"3\"\n    else:\n        pass\n    dict = {1: 'Skill1Value', 2: 'Skill2Value', 3: 'Skill3Value'}\n</code></pre>\n\n<p>Followed by:</p>\n\n<pre><code>bar:\n    value StaticValue(dict[UsedSkill], 10)\n</code></pre>\n\n<p>So if InTeaching == Skill1, UsedSkill will be set to 1. Later, in the bar, UsedSkill will be matched by the dictionary to fill in Skill1Value, variable that is supposed to be present in the StaticValue. \nIt works in my head, but python gives me error on line with \"bar:\".</p>\n"}, {"tags": ["python", "error-handling", "openfiledialog", "read-write"], "comments": [{"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1450897894, "post_id": 34441801, "comment_id": 56625981, "body": "Try specifying the complete path to the output file, for example, <code>writeFile = open (&#39;c:\\\\copiedFile.txt&#39;, &#39;w&#39;)</code>. Is the resulting file still empty?"}], "answers": [{"comments": [{"owner": {"reputation": 1592, "user_id": 1845919, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fbcee5c21c32397f287a3aa3aa06607b?s=128&d=identicon&r=PG", "display_name": "admix", "link": "https://stackoverflow.com/users/1845919/admix"}, "reply_to_user": {"reputation": 55, "user_id": 5702687, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e77fff0ecac29c3bcfc836aa2c4a755a?s=128&d=identicon&r=PG&f=1", "display_name": "Jihad 3aramouni", "link": "https://stackoverflow.com/users/5702687/jihad-3aramouni"}, "edited": false, "score": 0, "creation_date": 1450898449, "post_id": 34441993, "comment_id": 56626291, "body": "I updated my answer so it reads all the txt files in a specified directory and copies them"}, {"owner": {"reputation": 55, "user_id": 5702687, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e77fff0ecac29c3bcfc836aa2c4a755a?s=128&d=identicon&r=PG&f=1", "display_name": "Jihad 3aramouni", "link": "https://stackoverflow.com/users/5702687/jihad-3aramouni"}, "edited": false, "score": 0, "creation_date": 1450899876, "post_id": 34441993, "comment_id": 56626968, "body": "i used your code and it read and the file but it did not copy or write its content the second file"}, {"owner": {"reputation": 1592, "user_id": 1845919, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fbcee5c21c32397f287a3aa3aa06607b?s=128&d=identicon&r=PG", "display_name": "admix", "link": "https://stackoverflow.com/users/1845919/admix"}, "reply_to_user": {"reputation": 55, "user_id": 5702687, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e77fff0ecac29c3bcfc836aa2c4a755a?s=128&d=identicon&r=PG&f=1", "display_name": "Jihad 3aramouni", "link": "https://stackoverflow.com/users/5702687/jihad-3aramouni"}, "edited": false, "score": 0, "creation_date": 1450899988, "post_id": 34441993, "comment_id": 56627009, "body": "There is definitely something wrong with the way you&#39;re doing it.. works for me and works for others with similar ways.."}, {"owner": {"reputation": 55, "user_id": 5702687, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e77fff0ecac29c3bcfc836aa2c4a755a?s=128&d=identicon&r=PG&f=1", "display_name": "Jihad 3aramouni", "link": "https://stackoverflow.com/users/5702687/jihad-3aramouni"}, "edited": false, "score": 0, "creation_date": 1450900589, "post_id": 34441993, "comment_id": 56627279, "body": "@ admix  i solved the problem  it was the path i don&#39;t know what was the problem exactly but i changed the pass and it worked...  my second question will be about the sort of this file based on strings .....thank you"}, {"owner": {"reputation": 1592, "user_id": 1845919, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fbcee5c21c32397f287a3aa3aa06607b?s=128&d=identicon&r=PG", "display_name": "admix", "link": "https://stackoverflow.com/users/1845919/admix"}, "reply_to_user": {"reputation": 55, "user_id": 5702687, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e77fff0ecac29c3bcfc836aa2c4a755a?s=128&d=identicon&r=PG&f=1", "display_name": "Jihad 3aramouni", "link": "https://stackoverflow.com/users/5702687/jihad-3aramouni"}, "edited": false, "score": 0, "creation_date": 1450900641, "post_id": 34441993, "comment_id": 56627305, "body": "Awesome, no problem :)"}], "tags": [], "owner": {"reputation": 1592, "user_id": 1845919, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fbcee5c21c32397f287a3aa3aa06607b?s=128&d=identicon&r=PG", "display_name": "admix", "link": "https://stackoverflow.com/users/1845919/admix"}, "is_accepted": true, "score": 0, "last_activity_date": 1450898423, "last_edit_date": 1450898423, "creation_date": 1450896862, "answer_id": 34441993, "question_id": 34441801, "link": "https://stackoverflow.com/questions/34441801/copy-content-of-file-to-another-file-using-python-script/34441993#34441993", "title": "copy content of file to another file using python script", "body": "<p>Line by line way of copying from file to file:</p>\n\n<pre><code>#!/usr/bin/python\n\nfrom os import listdir\nfrom os.path import isfile, join\n\ndef readWrite():\n    mypath = 'D:\\\\'\n    files = [f for f in listdir(mypath) if isfile(join(mypath, f))]\n    for file in files:\n        if file.split('.')[1] == 'txt':\n            outputFileName = 'out-' + file\n            with open(mypath+outputFileName, 'w') as w:\n                with open(mypath+file) as f:\n                    for l in f:\n                        print l\n                        w.write(l)\n\nif __name__== \"__main__\":\n    readWrite()\n</code></pre>\n\n<p>UPDATE:\nupdated the code above, so it reads all the txt files in a specified directory and copies them into other files. You can play with directories how you like. I also added a <strong>\"print l\"</strong> which will print the contents of the incoming file.</p>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 5702687, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e77fff0ecac29c3bcfc836aa2c4a755a?s=128&d=identicon&r=PG&f=1", "display_name": "Jihad 3aramouni", "link": "https://stackoverflow.com/users/5702687/jihad-3aramouni"}, "edited": false, "score": 0, "creation_date": 1450897763, "post_id": 34442077, "comment_id": 56625916, "body": "also i tried your code but still the copiedFile.txt is empty"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 55, "user_id": 5702687, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e77fff0ecac29c3bcfc836aa2c4a755a?s=128&d=identicon&r=PG&f=1", "display_name": "Jihad 3aramouni", "link": "https://stackoverflow.com/users/5702687/jihad-3aramouni"}, "edited": false, "score": 0, "creation_date": 1450897801, "post_id": 34442077, "comment_id": 56625935, "body": "@Jihad3aramouni, you know what that is? Because the file you passed in is empty. This copies whatever file you open but there is not much to copy if the file is empty"}, {"owner": {"reputation": 55, "user_id": 5702687, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e77fff0ecac29c3bcfc836aa2c4a755a?s=128&d=identicon&r=PG&f=1", "display_name": "Jihad 3aramouni", "link": "https://stackoverflow.com/users/5702687/jihad-3aramouni"}, "edited": false, "score": 0, "creation_date": 1450898021, "post_id": 34442077, "comment_id": 56626052, "body": "@ Padraic Cunningham the file  that the user select  and its saved in the  variable <b>in_path</b> its not empty the file size is 144 kb so the logic is to get the same size for the copiedFile.txt         isn&#39;t that right??     because maybe i am missing the point here"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 55, "user_id": 5702687, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e77fff0ecac29c3bcfc836aa2c4a755a?s=128&d=identicon&r=PG&f=1", "display_name": "Jihad 3aramouni", "link": "https://stackoverflow.com/users/5702687/jihad-3aramouni"}, "edited": false, "score": 0, "creation_date": 1450898132, "post_id": 34442077, "comment_id": 56626113, "body": "@Jihad3aramouni, whatever file you open will be copied to the destination so the only way that is not happening is if the file you pass in is empty, where are you looking for the file?"}, {"owner": {"reputation": 55, "user_id": 5702687, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e77fff0ecac29c3bcfc836aa2c4a755a?s=128&d=identicon&r=PG&f=1", "display_name": "Jihad 3aramouni", "link": "https://stackoverflow.com/users/5702687/jihad-3aramouni"}, "edited": false, "score": 0, "creation_date": 1450898655, "post_id": 34442077, "comment_id": 56626406, "body": "the copied file is in the same location of the source file  and i have printed the content of the file to the console and its defiantly not empty"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 55, "user_id": 5702687, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e77fff0ecac29c3bcfc836aa2c4a755a?s=128&d=identicon&r=PG&f=1", "display_name": "Jihad 3aramouni", "link": "https://stackoverflow.com/users/5702687/jihad-3aramouni"}, "edited": false, "score": 0, "creation_date": 1450898728, "post_id": 34442077, "comment_id": 56626446, "body": "@Jihad3aramouni, change the name of the file you are writing to and then tell me what you see"}, {"owner": {"reputation": 55, "user_id": 5702687, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e77fff0ecac29c3bcfc836aa2c4a755a?s=128&d=identicon&r=PG&f=1", "display_name": "Jihad 3aramouni", "link": "https://stackoverflow.com/users/5702687/jihad-3aramouni"}, "edited": false, "score": 0, "creation_date": 1450899298, "post_id": 34442077, "comment_id": 56626689, "body": "i changed to just test.txt  and still empty file"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 55, "user_id": 5702687, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e77fff0ecac29c3bcfc836aa2c4a755a?s=128&d=identicon&r=PG&f=1", "display_name": "Jihad 3aramouni", "link": "https://stackoverflow.com/users/5702687/jihad-3aramouni"}, "edited": false, "score": 0, "creation_date": 1450899437, "post_id": 34442077, "comment_id": 56626747, "body": "@Jihad3aramouni, I have no idea then as this code works so unless there is some very strange behaviour using windows I don&#39;t see how you get an empty file"}, {"owner": {"reputation": 55, "user_id": 5702687, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e77fff0ecac29c3bcfc836aa2c4a755a?s=128&d=identicon&r=PG&f=1", "display_name": "Jihad 3aramouni", "link": "https://stackoverflow.com/users/5702687/jihad-3aramouni"}, "edited": false, "score": 0, "creation_date": 1450900089, "post_id": 34442077, "comment_id": 56627053, "body": "so any way thanks for your help and your time but is very strange it could be the problem because of the path ?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 55, "user_id": 5702687, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e77fff0ecac29c3bcfc836aa2c4a755a?s=128&d=identicon&r=PG&f=1", "display_name": "Jihad 3aramouni", "link": "https://stackoverflow.com/users/5702687/jihad-3aramouni"}, "edited": false, "score": 0, "creation_date": 1450900166, "post_id": 34442077, "comment_id": 56627082, "body": "You should always use raw strings for your paths  <code>r&#39;C:\\Users\\LT GM\\Downloads&#39;</code>"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 2, "last_activity_date": 1450898269, "last_edit_date": 1450898269, "creation_date": 1450897226, "answer_id": 34442077, "question_id": 34441801, "link": "https://stackoverflow.com/questions/34441801/copy-content-of-file-to-another-file-using-python-script/34442077#34442077", "title": "copy content of file to another file using python script", "body": "<p>You can use <code>shutil.copyfile</code>, there is no need to open or read the file.</p>\n\n<pre><code>from shutil import copyfile\n\ncopyfile(\"source\",\"dest\")\n</code></pre>\n\n<p>So for your code:</p>\n\n<pre><code> def OpenRead():\n    Tkinter.Tk().withdraw()\n    in_path = tkFileDialog.askopenfile(initialdir = 'C:\\Users\\LT GM\\Downloads', filetypes=[('text files', ' TXT ')])\n    copyfile(in_path.name, 'copiedFile.txt')\n    print \" we'r done!!\"\nif __name__== \"__main__\":\n    OpenRead()\n</code></pre>\n\n<p>The file is also going to be copied to you pwd so if you want it save somewhere in particular you need to pass the full path.</p>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 5702687, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e77fff0ecac29c3bcfc836aa2c4a755a?s=128&d=identicon&r=PG&f=1", "display_name": "Jihad 3aramouni", "link": "https://stackoverflow.com/users/5702687/jihad-3aramouni"}, "edited": false, "score": 0, "creation_date": 1450897456, "post_id": 34442091, "comment_id": 56625785, "body": "so how to get the content of the reading file into the destination file ?"}, {"owner": {"reputation": 61, "user_id": 5712222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4148c7cf1953668ea1ff0160fe1747c?s=128&d=identicon&r=PG&f=1", "display_name": "mchackam", "link": "https://stackoverflow.com/users/5712222/mchackam"}, "reply_to_user": {"reputation": 55, "user_id": 5702687, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e77fff0ecac29c3bcfc836aa2c4a755a?s=128&d=identicon&r=PG&f=1", "display_name": "Jihad 3aramouni", "link": "https://stackoverflow.com/users/5702687/jihad-3aramouni"}, "edited": false, "score": 0, "creation_date": 1450897971, "post_id": 34442091, "comment_id": 56626025, "body": "this works fine for me &#39;import Tkinter  import tkFileDialog  &#39;&#39;&#39;&#39;Open txt files in the selected path &#39;&#39;&#39; def OpenRead():      Tkinter.Tk().withdraw()     in_path = tkFileDialog.askopenfile(initialdir = &#39;C:\\Users\\LT GM\\Downloads&#39;, filetypes=[(&#39;text files&#39;, &#39; TXT &#39;)])     readingFile = in_path.read()     writeFile = open (&#39;copiedFile.txt&#39;, &#39;w&#39;)     writeFile.write(readingFile)     print &quot; we&#39;r done!!&quot;      in_path.close()     writeFile.close()   if <b>name__== &quot;__main</b>&quot;:     OpenRead()&#39;"}, {"owner": {"reputation": 55, "user_id": 5702687, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e77fff0ecac29c3bcfc836aa2c4a755a?s=128&d=identicon&r=PG&f=1", "display_name": "Jihad 3aramouni", "link": "https://stackoverflow.com/users/5702687/jihad-3aramouni"}, "edited": false, "score": 0, "creation_date": 1450898151, "post_id": 34442091, "comment_id": 56626126, "body": "what works fine for you ?? the copiedFile still empty here so what  am i missing here ??"}], "tags": [], "owner": {"reputation": 61, "user_id": 5712222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4148c7cf1953668ea1ff0160fe1747c?s=128&d=identicon&r=PG&f=1", "display_name": "mchackam", "link": "https://stackoverflow.com/users/5712222/mchackam"}, "is_accepted": false, "score": 0, "last_activity_date": 1450897296, "creation_date": 1450897296, "answer_id": 34442091, "question_id": 34441801, "link": "https://stackoverflow.com/questions/34441801/copy-content-of-file-to-another-file-using-python-script/34442091#34442091", "title": "copy content of file to another file using python script", "body": "<p><strong><code>readingFile = in_path.read()</code></strong> \nreads the contents of the file and puts it in variable readingFile\nsuppose the contents of the file is,say, hello the value of readingFile will be hello</p>\n\n<p><strong><code>destinationFile  = readingFile, '.txt'</code></strong>\ndestinationFile is a tuple with values '&lt;'contents of file'>','.txt'\ninstead use <strong><em><code>destinationFile  = readingFile+'.txt'</code></em></strong></p>\n\n<p>this will work. but the end result would not be what you are expecting.the result would be a file with name as contents of the reading file with contents also the same. better specify a file name in <strong>destinationFile</strong> like <strong><code>destinationFile = 'destfile.txt'</code></strong></p>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 5702687, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e77fff0ecac29c3bcfc836aa2c4a755a?s=128&d=identicon&r=PG&f=1", "display_name": "Jihad 3aramouni", "link": "https://stackoverflow.com/users/5702687/jihad-3aramouni"}, "edited": false, "score": 0, "creation_date": 1450900911, "post_id": 34442847, "comment_id": 56627421, "body": "because i need the program to be familiar will the end user                        if i understood your question"}, {"owner": {"reputation": 1846, "user_id": 2589273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/34lAu.jpg?s=128&g=1", "display_name": "user2589273", "link": "https://stackoverflow.com/users/2589273/user2589273"}, "reply_to_user": {"reputation": 55, "user_id": 5702687, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e77fff0ecac29c3bcfc836aa2c4a755a?s=128&d=identicon&r=PG&f=1", "display_name": "Jihad 3aramouni", "link": "https://stackoverflow.com/users/5702687/jihad-3aramouni"}, "edited": false, "score": 0, "creation_date": 1450902220, "post_id": 34442847, "comment_id": 56628015, "body": "@Jihad3aramouni what do you mean by familiar? This takes a file  and makes a copy to whatever location you wish with whatever name you wish to give it. It is all done within python, therefore the end uses doesn&#39;t have to see it, and even if they do it is pretty self explantory:  cp &lt;location/filename&gt;    &lt;newlocation/newfilename&gt;. You just need to add it to your loop."}], "tags": [], "owner": {"reputation": 1846, "user_id": 2589273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/34lAu.jpg?s=128&g=1", "display_name": "user2589273", "link": "https://stackoverflow.com/users/2589273/user2589273"}, "is_accepted": false, "score": -1, "last_activity_date": 1450900747, "creation_date": 1450900747, "answer_id": 34442847, "question_id": 34441801, "link": "https://stackoverflow.com/questions/34441801/copy-content-of-file-to-another-file-using-python-script/34442847#34442847", "title": "copy content of file to another file using python script", "body": "<p>Why don't you just use os, and the shell copy command. </p>\n\n<pre><code>import os \nstart= '~/user/file'\ndest= '~/user/folder1/file'\n\nos.system('cp %s %s' %(start,dest))\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 5702687, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e77fff0ecac29c3bcfc836aa2c4a755a?s=128&d=identicon&r=PG&f=1", "display_name": "Jihad 3aramouni", "link": "https://stackoverflow.com/users/5702687/jihad-3aramouni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 820, "favorite_count": 0, "accepted_answer_id": 34441993, "answer_count": 4, "score": 1, "last_activity_date": 1450900747, "creation_date": 1450896086, "last_edit_date": 1450896908, "question_id": 34441801, "link": "https://stackoverflow.com/questions/34441801/copy-content-of-file-to-another-file-using-python-script", "title": "copy content of file to another file using python script", "body": "<p>i have this python script that open a file dialog and select a text file than copy its content to another file.</p>\n\n<p><strong>when i open the second file it still empty</strong> </p>\n\n<p>can anyone help me to solve this problem ?</p>\n\n<h1>OPenDirectory.py</h1>\n\n<pre><code>#!/usr/bin/python\n\nimport Tkinter \nimport tkFileDialog\n\n''''Open txt files in the selected path '''\ndef OpenRead():\n\n    Tkinter.Tk().withdraw()\n    in_path = tkFileDialog.askopenfile(initialdir = 'C:\\Users\\LT GM\\Downloads', filetypes=[('text files', ' TXT ')])\n    readingFile = in_path.read()\n    writeFile = open ('copiedFile.txt', 'w')\n    writeFile.write(readingFile)\n    print \" we'r done!!\" \n    in_path.close()\n    writeFile.close()\n\n\nif __name__== \"__main__\":\n    OpenRead()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "exception", "coroutine", "python-asyncio"], "comments": [{"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 1, "creation_date": 1450897977, "post_id": 34441790, "comment_id": 56626028, "body": "is there any reason not to use <code>loop.run_until_complete(comain())</code> which works as expected?"}, {"owner": {"reputation": 2541, "user_id": 371970, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/35122322d66164b170ef5c1b20ef99d1?s=128&d=identicon&r=PG", "display_name": "WGH", "link": "https://stackoverflow.com/users/371970/wgh"}, "reply_to_user": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1450898311, "post_id": 34441790, "comment_id": 56626220, "body": "I need a task object because I call <code>task.cancel()</code> in a <code>KeyboardInterrupt</code> handler (not shown in this snippet)."}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 2, "creation_date": 1450898944, "post_id": 34441790, "comment_id": 56626535, "body": "you could add <code>if not task.cancelled(): task.result()</code> into the finally block. Though I don&#39;t know whether it is the intended behavior that you have to call <code>task.result()</code> or <code>task.exception()</code> manually (I would expect <code>run_until_complete()</code> do it for you)."}], "answers": [{"tags": [], "owner": {"reputation": 4023, "user_id": 5238308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CKZ9Y.jpg?s=128&g=1", "display_name": "Jashandeep Sohi", "link": "https://stackoverflow.com/users/5238308/jashandeep-sohi"}, "is_accepted": false, "score": 7, "last_activity_date": 1450898003, "last_edit_date": 1450898003, "creation_date": 1450896965, "answer_id": 34442015, "question_id": 34441790, "link": "https://stackoverflow.com/questions/34441790/asyncio-loop-run-until-completeloop-create-taskf-prints-task-exception-was/34442015#34442015", "title": "asyncio: loop.run_until_complete(loop.create_task(f)) prints &quot;Task exception was never retrieved&quot; even though it clearly was propagated", "body": "<p><code>SystemExit</code> seems to be a special case. If, for example, you raise and catch an <code>Exception</code>, you won't see any errors.\nThe way around this seems to be to manually retrieve the exception using <code>Task.exception()</code>:</p>\n\n<pre><code>import asyncio\n\n@asyncio.coroutine\ndef comain():\n    raise SystemExit(2)\n\ndef main():\n    loop = asyncio.get_event_loop()\n    task = loop.create_task(comain())\n    try:\n        loop.run_until_complete(task)\n    except SystemExit:\n        print(\"caught SystemExit!\")\n        task.exception()\n        raise\n    finally:\n        loop.close()\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Actually, all <code>BaseException</code> subclasses will behave this way.</p>\n"}, {"comments": [{"owner": {"reputation": 2541, "user_id": 371970, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/35122322d66164b170ef5c1b20ef99d1?s=128&d=identicon&r=PG", "display_name": "WGH", "link": "https://stackoverflow.com/users/371970/wgh"}, "edited": false, "score": 0, "creation_date": 1450898793, "post_id": 34442206, "comment_id": 56626470, "body": "My intention is to let this exception escape to the top level, so the interpreter will be terminated."}], "tags": [], "owner": {"reputation": 10017, "user_id": 301107, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2c87e8db57897b08332340b2c4b508ff?s=128&d=identicon&r=PG", "display_name": "masnun", "link": "https://stackoverflow.com/users/301107/masnun"}, "is_accepted": false, "score": 0, "last_activity_date": 1450897838, "creation_date": 1450897838, "answer_id": 34442206, "question_id": 34441790, "link": "https://stackoverflow.com/questions/34441790/asyncio-loop-run-until-completeloop-create-taskf-prints-task-exception-was/34442206#34442206", "title": "asyncio: loop.run_until_complete(loop.create_task(f)) prints &quot;Task exception was never retrieved&quot; even though it clearly was propagated", "body": "<p>I think it's because <code>SystemExit</code> and <code>KeyboardInterrupt</code> are different cases. Normal <code>Exception</code> won't cause the same issue for example. </p>\n\n<p>You can chain the <code>comain</code> coroutine inside another to consume the exception like this: </p>\n\n<pre><code>#!/usr/bin/env python3\n\nimport asyncio\n\n@asyncio.coroutine\ndef comain():\n    raise SystemExit(2)\n\n@asyncio.coroutine\ndef another():\n    try:\n        yield from comain()\n    except SystemExit:\n        print (\"consumed\")\n\ndef main():\n    loop = asyncio.get_event_loop()\n    task = loop.create_task(another())\n    try:\n        loop.run_until_complete(task)\n    except SystemExit:\n        print(\"caught SystemExit!\")\n        raise\n    finally:\n        loop.close()\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n\n<p>Here - I am calling <code>another()</code> instead of <code>comain()</code> and inside <code>another()</code> I am handling the exception from <code>comain()</code>. </p>\n"}], "owner": {"reputation": 2541, "user_id": 371970, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/35122322d66164b170ef5c1b20ef99d1?s=128&d=identicon&r=PG", "display_name": "WGH", "link": "https://stackoverflow.com/users/371970/wgh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3271, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1450898003, "creation_date": 1450896031, "question_id": 34441790, "link": "https://stackoverflow.com/questions/34441790/asyncio-loop-run-until-completeloop-create-taskf-prints-task-exception-was", "title": "asyncio: loop.run_until_complete(loop.create_task(f)) prints &quot;Task exception was never retrieved&quot; even though it clearly was propagated", "body": "<p>For some reason this program prints the following warning:</p>\n\n<pre><code>Task exception was never retrieved\nfuture: &lt;Task finished coro=&lt;coro() done, defined at /usr/lib64/python3.4/asyncio/coroutines.py:139&gt; exception=SystemExit(2,)&gt;\n</code></pre>\n\n<p>even though the exception is clearly retrieved and propagated, as <code>caught SystemExit!</code> is printed to the terminal, and process status code becomes 2.</p>\n\n<p>The same thing happens with Python 2 and trollius.</p>\n\n<p>Am I missing something?</p>\n\n<pre><code>#!/usr/bin/env python3\n\nimport asyncio\n\n@asyncio.coroutine\ndef comain():\n    raise SystemExit(2)\n\ndef main():\n    loop = asyncio.get_event_loop()\n    task = loop.create_task(comain())\n    try:\n        loop.run_until_complete(task)\n    except SystemExit:\n        print(\"caught SystemExit!\")\n        raise\n    finally:\n        loop.close()\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n"}, {"tags": ["python", "json", "list", "for-loop"], "owner": {"reputation": 307, "user_id": 4203981, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/3be6084c4d99eacafc42576ad4342a88?s=128&d=identicon&r=PG&f=1", "display_name": "Euxitheos", "link": "https://stackoverflow.com/users/4203981/euxitheos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1450897612, "creation_date": 1450895690, "last_edit_date": 1450897612, "question_id": 34441713, "link": "https://stackoverflow.com/questions/34441713/from-json-response-use-list-of-lists-to-display-averages-on-multiple-columns-usi", "title": "From JSON Response Use List of Lists to Display Averages on Multiple Columns Using Python", "body": "<p>If I have a list of lists that I obtain from an API response that I want to find the averages of, and I am looking at two or more different responses (say I look at two different players in a baseball game). I want to use pandas dataframe to display each player's averages, but I don't want it to reprint their averages just below the other as seen below.</p>\n\n<p>Let's say I have an API address that I only need to change the variable players of in order to get the next player's stats.</p>\n\n<blockquote>\n  <p>'stats.mlb.com/mlb/2014-15/gamelog/'+player+'&amp;SeasonType=Regular+Season'</p>\n</blockquote>\n\n<p>So if I want to look at multiple players, I create a for loop that iterates through a list of players I'm interested in:</p>\n\n<p>Below is the response I get when I print the df.mean() of the response I get from a list of multiple players:</p>\n\n<p>P - Player ID</p>\n\n<pre><code>P   4100\nH   55\nR   27\nER  24\nHR  5 \nBB  19\n\nP   4200\nH   44\nR   30\nER  24\nHR  8 \nBB  22\n.\n.\n.\n</code></pre>\n\n<p>Currently I have a for-loop that iterates through each player ID, assigning the new ID to the end of the API address, then I obtain the response and create a dataframe in which I am interested in obtaining the mean from.</p>\n\n<p>players = ['4100','4200','4300']\nfor player in players:</p>\n\n<blockquote>\n  <p>URL_PATTERN1='stats.mlb.com/201415/gamelog/'+player+'&amp;SeasonType=Regular+Season'</p>\n</blockquote>\n\n<p>response_stats = requests.get(URL_PATTERN1)\nmlb_data = data_mlb['resultSets'][0]['rowSet'] #mlb_data is now a list of lists of mlb stats</p>\n\n<p>Each time I go to a new player's ID, it creates a new dataframe. I would like it to output their averaged stats using pandas as so below:</p>\n\n<pre><code>P   4100   4200   4300   ...\nH   55     44     40     ...\nR   27     30     25     ...\nER  24     24     28     ...\nHR  5      8      9      ...\nBB  19     22     20     ...\n</code></pre>\n\n<p>I think I have to take the following approach:</p>\n\n<ol>\n<li>Given that I have a list of lists of each game that a player has played in; I use df.mean() to obtain that average</li>\n<li>Since I have more than one player I should somehow store those averages, created by the dataframe in another list that looks like below\n[[4100,55,27,24,5,19][4200,44,30,24,8,22],[...]]</li>\n</ol>\n\n<p>Using this list of list of averages then create another dataframe of all the players that I have stored averages of?</p>\n\n<p>I'm not sure how I might do that. Or obtain the averages as easy it is to print df.mean()</p>\n\n<p>The game log stats of the API response look like below:</p>\n\n<pre><code>[[\"0021401229\",12425489,\"DEN\",\"Denver\",4200,\"Joe Schmoe\",4.25,1.6,1,7,8,39,0,0,20,0,7,9,0.778,0,4,0.000,0.538],[\"0021401230\",12425490,\"MIL\",\"Milwaukee\",4200,\"Joe Schmoe\",4.25,1.6,1,7,8,39,0,0,20,0,7,9,0.778,0,4,0.000,0.538],...]\n</code></pre>\n\n<p>Then the program goes to the next player's API response:</p>\n\n<pre><code>[[\"0021401229\",12425489,\"DEN\",\"Denver\",4300,\"Choe Schmoe\",4.25,1.6,1,7,8,39,0,0,20,0,7,9,0.778,0,4,0.000,0.538],[\"0021401230\",12425490,\"MIL\",\"Milwaukee\",4200,\"Joe Schmoe\",4.25,1.6,1,7,8,39,0,0,20,0,7,9,0.778,0,4,0.000,0.538],...]\n</code></pre>\n\n<p>and so forth... I would like it all to print out as shown above or take averages line by line.</p>\n"}]