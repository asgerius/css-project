[{"tags": ["python", "flask", "raspberry-pi"], "comments": [{"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1536798496, "post_id": 52304860, "comment_id": 91557628, "body": "Maybe it&#39;s simpler to set <code>SERVER_NAME</code> as documented <a href=\"http://flask.pocoo.org/docs/0.12/config/\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 2089, "user_id": 5616565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xdEXf.jpg?s=128&g=1", "display_name": "DarkSuniuM", "link": "https://stackoverflow.com/users/5616565/darksunium"}, "edited": false, "score": 0, "creation_date": 1536814760, "post_id": 52304860, "comment_id": 91560943, "body": "Why dont u redirect user after turning on/off to the page it was? Its a famous pattern for doing such a thing"}], "answers": [{"tags": [], "owner": {"reputation": 1025, "user_id": 3303824, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92d481a4b63883196f2f427f6e14b20a?s=128&d=identicon&r=PG&f=1", "display_name": "andrea-f", "link": "https://stackoverflow.com/users/3303824/andrea-f"}, "is_accepted": false, "score": 0, "last_activity_date": 1536799039, "creation_date": 1536799039, "answer_id": 52305129, "question_id": 52304860, "link": "https://stackoverflow.com/questions/52304860/convert-get-method-to-post-method-in-flask/52305129#52305129", "title": "Convert GET Method to POST Method in Flask", "body": "<p>Probably the easiest thing to do is to fire an XHR from the frontend when an user clicks on a button. </p>\n\n<p>For example:\n<code>&lt;button&gt;&lt;a onclick='pinAction(\"/pin1/on\");'&gt;ON&lt;/a&gt;&lt;/button&gt;</code></p>\n\n<p>Then in JS do:</p>\n\n<pre><code>&lt;script&gt;\nfunction pinAction(endpoint) {\n    var xmlHttp = new XMLHttpRequest();\n    xmlHttp.open( \"GET\", endpoint, false ); // false for synchronous request\n    xmlHttp.send();\n    console.log(xmlHttp.responseText); // Maybe send a 200 reply\n    return false; // So the default is prevented.\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>Then in the Flask backend you can keep using the same structure without having to use forms.</p>\n"}, {"tags": [], "owner": {"reputation": 860, "user_id": 8840245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15e2756227e59763d37cb476dd558d6e?s=128&d=identicon&r=PG", "display_name": "Mrinal Roy", "link": "https://stackoverflow.com/users/8840245/mrinal-roy"}, "is_accepted": true, "score": 0, "last_activity_date": 1541664826, "creation_date": 1541664826, "answer_id": 53203697, "question_id": 52304860, "link": "https://stackoverflow.com/questions/52304860/convert-get-method-to-post-method-in-flask/53203697#53203697", "title": "Convert GET Method to POST Method in Flask", "body": "<p>I hope it's not too late. </p>\n\n<p>Here is what you need to do. I am just tweaking your Python codes below and using jQuery to send data in POST method.</p>\n\n<p>1) In your <code>server.py</code> or <code>app.py</code> file make a function like the following: </p>\n\n<pre><code>@app.route(\"/&lt;pinstatus&gt;/&lt;int:pin&gt;\", methods=['POST'])\ndef action(pinstatus, pin):\n    # Check the value of the parameter: 0 means Off, 1 means On\n    if pinstatus == \"light\" and pin == 0:\n        GPIO.setmode(GPIO.BOARD)\n        GPIO.setup(3, GPIO.OUT)\n        GPIO.output(3, GPIO.HIGH) \n    elif pinstatus == \"light\" and pin == 1:\n        GPIO.setmode(GPIO.BOARD)\n        GPIO.setup(3, GPIO.OUT)\n        GPIO.output(3, GPIO.LOW)\n    else:\n        return ('Error', 500)\n    return ('', 200)\n</code></pre>\n\n<p>2) Load jQuery in your static templates of Flask. e.g.: \n<code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js\"&gt;&lt;/script&gt;</code></p>\n\n<p>3) Use following JS codes inside <code>&lt;head&gt;</code> element or some script file like <code>static/js/script.js</code>and load it in your HTML file.</p>\n\n<pre><code>&lt;script&gt;\n    $(document).ready(function() {\n      $('#lighton').click(function() {\n        $.post('/light/1');\n      });\n      $('#lightoff').click(function() {\n        $.post('/light/0');\n      }); \n    });\n&lt;/script&gt;       \n</code></pre>\n\n<p>4) Use HTML like the following:</p>\n\n<pre><code>&lt;button id=\"lighton\"&gt;On&lt;/button&gt;             \n&lt;button id=\"lightoff\"&gt;Off&lt;/button&gt;\n</code></pre>\n\n<p>Now, it sends the data in POST method to the server and the URL doesn't change in the client-side. Let me know if it helps.</p>\n"}], "owner": {"reputation": 3, "user_id": 8901367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3140587be3905021f73345cdf0e0d962?s=128&d=identicon&r=PG&f=1", "display_name": "Sumon", "link": "https://stackoverflow.com/users/8901367/sumon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 0, "accepted_answer_id": 53203697, "answer_count": 2, "score": 0, "last_activity_date": 1541664826, "creation_date": 1536796221, "question_id": 52304860, "link": "https://stackoverflow.com/questions/52304860/convert-get-method-to-post-method-in-flask", "title": "Convert GET Method to POST Method in Flask", "body": "<p>I am building a simple web app to control leds in my Raspberry Pi. </p>\n\n<p>I have a route and function call for them like following:</p>\n\n<pre><code>@app.route(\"/&lt;pin&gt;/&lt;action&gt;\")\ndef action(pin, action):\n    if pin == \"pin1\" and action == \"on\":\n        GPIO.setmode(GPIO.BOARD)\n        GPIO.setup(3, GPIO.OUT)\n        GPIO.output(3, GPIO.LOW)\n\n    if pin == \"pin1\" and action == \"off\":\n        GPIO.setmode(GPIO.BOARD)\n        GPIO.setup(3, GPIO.OUT)\n        GPIO.output(3, GPIO.HIGH)\n</code></pre>\n\n<p>As by default Flask consider it GET method, I am using href with anchor tag in HTML file to pass the pin and action.</p>\n\n<pre><code>&lt;button&gt;&lt;a href=\"/pin1/on\"&gt;ON&lt;/a&gt;&lt;/button&gt;\n&lt;button&gt;&lt;a href=\"/pin2/off\"&gt;Off&lt;/a&gt;&lt;/button&gt;\n</code></pre>\n\n<p>This works fine to turn on turn off the LED but it changes the URL after clicking on button. e.g. <a href=\"http://0.0.0.0/pin1/on\" rel=\"nofollow noreferrer\">http://0.0.0.0/pin1/on</a> and <a href=\"http://0.0.0.0/pin1/off\" rel=\"nofollow noreferrer\">http://0.0.0.0/pin1/off</a></p>\n\n<p>I don't want the URL to change so the POST method is suggested with form element using action and name in button. So, I tried following but it doesn't work. Python codes are</p>\n\n<pre><code>@app.route(\"/pinstatus\", methods=['POST'])\ndef pinstatus():\n    if request.form['lighton']:\n        GPIO.setmode(GPIO.BOARD)\n        GPIO.setup(3, GPIO.OUT)\n        GPIO.output(3, GPIO.LOW)\n\n    if request.form['lightoff']:\n        GPIO.setmode(GPIO.BOARD)\n        GPIO.setup(3, GPIO.OUT)\n        GPIO.output(3, GPIO.HIGH)\n</code></pre>\n\n<p>HTML Codes</p>\n\n<pre><code>&lt;form action=\"{{ url_for('pinstatus') }}\" method=\"POST\"&gt;    \n    &lt;button name=\"lighton\"&gt;ON&lt;/button&gt;\n    &lt;button name=\"lightoff\"&gt;Off&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>I am seeking help on above situation. Is there any workaround? Thanks in advance.</p>\n"}, {"tags": ["python", "sorting", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 143, "user_id": 6935897, "user_type": "registered", "profile_image": "https://graph.facebook.com/1696009361/picture?type=large", "display_name": "wwwjjj", "link": "https://stackoverflow.com/users/6935897/wwwjjj"}, "is_accepted": false, "score": 1, "last_activity_date": 1536796022, "creation_date": 1536796022, "answer_id": 52304838, "question_id": 52304816, "link": "https://stackoverflow.com/questions/52304816/find-the-index-i-of-a-sorted-array-y-such-that-yi-1-x-yi/52304838#52304838", "title": "find the index i of a sorted array y[:], such that y[i-1] &lt;= x &lt;y[i]", "body": "<p><strong>numpy.searchsorted</strong></p>\n\n<p>I find it here:</p>\n\n<p><a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.searchsorted.html\" rel=\"nofollow noreferrer\">https://docs.scipy.org/doc/numpy/reference/generated/numpy.searchsorted.html</a></p>\n"}], "owner": {"reputation": 143, "user_id": 6935897, "user_type": "registered", "profile_image": "https://graph.facebook.com/1696009361/picture?type=large", "display_name": "wwwjjj", "link": "https://stackoverflow.com/users/6935897/wwwjjj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "closed_date": 1536795946, "answer_count": 1, "score": -3, "last_activity_date": 1536796022, "creation_date": 1536795770, "question_id": 52304816, "link": "https://stackoverflow.com/questions/52304816/find-the-index-i-of-a-sorted-array-y-such-that-yi-1-x-yi", "closed_reason": "Duplicate", "title": "find the index i of a sorted array y[:], such that y[i-1] &lt;= x &lt;y[i]", "body": "<pre><code>getindex(x,y) \n</code></pre>\n\n<p><strong>Input:</strong> a value <code>x</code>, and a sorted array <code>y[:]</code>  (no repeat element)</p>\n\n<p><strong>Output:</strong> the index  <code>i</code>, such that <code>y[i-1] &lt;= x &lt;y[i]</code></p>\n\n<p>The time complexity  should be <strong>O(log(N))</strong></p>\n\n<p>Is there a Python/Numpy function we can use?</p>\n\n<p><strong>For example:</strong></p>\n\n<pre><code>y[0]=-0.2\ny[1]=1.5\ny[2]=1.9\ny[3]=3.2\n</code></pre>\n\n<p>Then</p>\n\n<p><code>getindex(-4.0,y)</code> returns 0</p>\n\n<p><code>getindex(0.5,y)</code> returns 1</p>\n\n<p><code>getindex(6.0,y)</code> returns 4</p>\n"}, {"tags": ["python", "numpy", "scipy", "numpy-ndarray"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1536794751, "post_id": 52304712, "comment_id": 91556895, "body": "Is this thing a <code>numpy.matrix</code>? This is one of the reasons why you don&#39;t use <code>numpy.matrix</code>."}, {"owner": {"reputation": 735, "user_id": 1000026, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d31d03a7d58ec534e765d8d0e81cc39f?s=128&d=identicon&r=PG", "display_name": "David R", "link": "https://stackoverflow.com/users/1000026/david-r"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1536796646, "post_id": 52304712, "comment_id": 91557303, "body": "Hmm... okay.  neighbor_matrix is of type scipy.sparse.csr.csr_matrix and total votes is of type numpy.matrixlib.defmatrix.matrix.   &quot;don&#39;t use numpy.matrix&quot; seems like an odd explanation... but it may be the only one."}], "owner": {"reputation": 735, "user_id": 1000026, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d31d03a7d58ec534e765d8d0e81cc39f?s=128&d=identicon&r=PG", "display_name": "David R", "link": "https://stackoverflow.com/users/1000026/david-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "closed_date": 1536795006, "answer_count": 0, "score": 0, "last_activity_date": 1536794631, "creation_date": 1536794631, "question_id": 52304712, "link": "https://stackoverflow.com/questions/52304712/numpy-refusing-to-flatten-2d-array-flatten-ravel-reshape-index-all-fail", "closed_reason": "Duplicate", "title": "Numpy Refusing to flatten 2d array (flatten, ravel, reshape, index all fail)", "body": "<p>I cannot make heads or tails of this.</p>\n\n<p>I have a 2D numpy array that numpy refuses to flattened! I have tried 4 different methods to flatten it, and all of them fail.</p>\n\n<p><code>cluster_model</code> is a sklearn RadiusNeighborsClassifier.</p>\n\n<pre><code>cluster_model.fit(p_training_features, my_training_labels)\nneighbor_graph = neighbor_graph.astype('?')\nprint(neighbor_graph.shape)\ntotal_votes = neighbor_graph.sum(axis=0)\nprint(total_votes)\nprint(total_votes.shape)\ntotal_votes = total_votes[0]\nprint(total_votes.shape)\ntotal_votes = total_votes.flatten()\nprint(total_votes.shape)\ntotal_votes = total_votes.ravel()\nprint(total_votes.shape)\ntotal_votes = total_votes.reshape(-1,)\nprint(total_votes.shape)\nflattened_total_votes = total_votes[0]\nprint(flattened_total_votes.shape)\n</code></pre>\n\n<p>And the output is...</p>\n\n<pre><code>(10000, 20000)\n[[722 622 606 ...   0   2   0]]\n(1, 20000)\n(1, 20000)\n(1, 20000)\n(1, 20000)\n(1, 20000)\n(1, 20000)\n</code></pre>\n\n<p>When I print the matrix it comes out as dense... and I tried doing a conversion to dense, but it indicated an error because total_votes was already dense. I couldn't think of any other reason why the array was not flattening.</p>\n"}, {"tags": ["python", "pandas", "dataframe", "merge", "data-manipulation"], "answers": [{"comments": [{"owner": {"reputation": 728, "user_id": 3938025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gKV2z.png?s=128&g=1", "display_name": "Cody Glickman", "link": "https://stackoverflow.com/users/3938025/cody-glickman"}, "edited": false, "score": 0, "creation_date": 1536796382, "post_id": 52304831, "comment_id": 91557237, "body": "Hi @sacul, That works for this demo example and I think it is putting me on the right direction. Is there a more pythonic way to call the columns than individually typing each reverse compliment? (i.e. if I have two lists of column name and reverse compliment) Thank you very much though. I have tinkering to do!"}, {"owner": {"reputation": 728, "user_id": 3938025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gKV2z.png?s=128&g=1", "display_name": "Cody Glickman", "link": "https://stackoverflow.com/users/3938025/cody-glickman"}, "edited": false, "score": 1, "creation_date": 1536797685, "post_id": 52304831, "comment_id": 91557474, "body": "Thank you @sacul. This works for what I need. There is some edge cases (such as when the reverse compliment is not in the original dataframe). You are awesome and have been extremely helpful. Thank you!"}, {"owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "reply_to_user": {"reputation": 728, "user_id": 3938025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gKV2z.png?s=128&g=1", "display_name": "Cody Glickman", "link": "https://stackoverflow.com/users/3938025/cody-glickman"}, "edited": false, "score": 0, "creation_date": 1536797985, "post_id": 52304831, "comment_id": 91557539, "body": "Glad to help! Hope you figure out your edge cases! And I&#39;m sure there is a better way to get the non-included columns, but I&#39;m glad this pointed you in a direction you can work with."}], "tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": true, "score": 1, "last_activity_date": 1536796952, "last_edit_date": 1536796952, "creation_date": 1536795938, "answer_id": 52304831, "question_id": 52304699, "link": "https://stackoverflow.com/questions/52304699/pandas-merging-columns-by-reverse-compliment-string/52304831#52304831", "title": "Pandas merging columns by reverse compliment string", "body": "<p>I'd suggest just creating a new frame using <code>pd.concat</code>:</p>\n\n<pre><code>new_df = pd.concat([df[['AA', 'TT']].sum(1).rename('AA/TT'),\n                    df[['CC', 'GG']].sum(1).rename('CC/GG'),\n                    df['AT']], axis=1)\n\n&gt;&gt;&gt; new_df\n   AA/TT  CC/GG  AT\n0      9      7   9\n1      5     13   5\n2      9      8   8\n</code></pre>\n\n<p>More generally, you could do it in a list comprehension. Given the reverse compliments:</p>\n\n<pre><code>reverse_compliments = [['AA','TT'], ['CC','GG']]\n</code></pre>\n\n<p>Find those values in your original dataframe columns that are not in reverse compliments (There might be a better way here, but this works):</p>\n\n<pre><code>reverse_compliments.append(df.columns.difference(\n    pd.np.array(reverse_compliments)\n    .flatten()))\n</code></pre>\n\n<p>And use <code>pd.concat</code> with a list comprehension:</p>\n\n<pre><code>new_df = pd.concat([df[x].sum(1).rename('/'.join(x)) for x in reverse_compliments],\n                   axis=1)\n\n&gt;&gt;&gt; new_df\n   AA/TT  CC/GG  AT\n0      9      7   9\n1      5     13   5\n2      9      8   8\n</code></pre>\n"}], "owner": {"reputation": 728, "user_id": 3938025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gKV2z.png?s=128&g=1", "display_name": "Cody Glickman", "link": "https://stackoverflow.com/users/3938025/cody-glickman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 52304831, "answer_count": 1, "score": 0, "last_activity_date": 1536796952, "creation_date": 1536794519, "question_id": 52304699, "link": "https://stackoverflow.com/questions/52304699/pandas-merging-columns-by-reverse-compliment-string", "title": "Pandas merging columns by reverse compliment string", "body": "<p>So I am stuck on how to approach a data manipulation technique in pandas. I have an example dataframe below with a sum of 25 counts in each row. \nI would like to merge column names by the reverse compliment sequence. </p>\n\n<pre><code>   AA CC GG AT TT\n\n    4  7  0  9  5\n    3  8  5  5  2\n    8  6  2  8  1\n</code></pre>\n\n<p>The columns \"AA\" and \"TT\" are reverse compliments of each other as are \"CC\" and \"GG\" </p>\n\n<pre><code>   AA/TT CC/GG AT \n\n    9     7     9\n    5     13    5\n    9     8     8\n</code></pre>\n\n<p>How can I match the reverse compliment of a column name and merge it with the name of another column.</p>\n\n<p><strong>Note: I already have a function to find the reverse compliment of a string</strong></p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1536794683, "post_id": 52304695, "comment_id": 91556880, "body": "It is not a black bar but actual <code>df[&#39;value&#39;]</code> from your dataframe. It looks like a black bar because your dataframe has over 100s of values probably, all of which are written one over the other as x-tick labels."}, {"owner": {"reputation": 679, "user_id": 8027995, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/SunLF.jpg?s=128&g=1", "display_name": "rmahesh", "link": "https://stackoverflow.com/users/8027995/rmahesh"}, "reply_to_user": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1536796706, "post_id": 52304695, "comment_id": 91557311, "body": "@Bazingaa Ahh I see. Those are all dates that I am trying to have labeled in the x axis and some quantitative value in the y. It seems as if the Y axis is okay but is there any way to reformat the x axis to accommodate all the labels?"}, {"owner": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "edited": false, "score": 0, "creation_date": 1536797078, "post_id": 52304695, "comment_id": 91557371, "body": "Increasing the size of the plot could help, but you may need to make it very big before the problem goes away.  I would suggest there might be a better way to display the information that you&#39;re looking for - you shouldn&#39;t need X ticks for every single data value."}, {"owner": {"reputation": 679, "user_id": 8027995, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/SunLF.jpg?s=128&g=1", "display_name": "rmahesh", "link": "https://stackoverflow.com/users/8027995/rmahesh"}, "reply_to_user": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "edited": false, "score": 0, "creation_date": 1536797154, "post_id": 52304695, "comment_id": 91557389, "body": "@Apollys Can you possibly guide me as to how to do this? I am quite new using matplotlib and a lot of the syntax is quite new to me."}, {"owner": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "edited": false, "score": 0, "creation_date": 1536797349, "post_id": 52304695, "comment_id": 91557417, "body": "To change your figure size: <a href=\"https://stackoverflow.com/questions/332289/how-do-you-change-the-size-of-figures-drawn-with-matplotlib\" title=\"how do you change the size of figures drawn with matplotlib\">stackoverflow.com/questions/332289/&hellip;</a>"}, {"owner": {"reputation": 679, "user_id": 8027995, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/SunLF.jpg?s=128&g=1", "display_name": "rmahesh", "link": "https://stackoverflow.com/users/8027995/rmahesh"}, "reply_to_user": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "edited": false, "score": 0, "creation_date": 1536797413, "post_id": 52304695, "comment_id": 91557426, "body": "@Apollys Thanks for the link. Does matplotlib have any sort of auto resize feature in it?"}], "answers": [{"comments": [{"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1536795451, "post_id": 52304778, "comment_id": 91557053, "body": "I wouldn\u2019t put this as an answer but as a comment"}], "tags": [], "owner": {"reputation": 91, "user_id": 10355795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41f14372774f1e6d53b00533d1f6d2a3?s=128&d=identicon&r=PG&f=1", "display_name": "Art3mis", "link": "https://stackoverflow.com/users/10355795/art3mis"}, "is_accepted": false, "score": 0, "last_activity_date": 1536795247, "creation_date": 1536795247, "answer_id": 52304778, "question_id": 52304695, "link": "https://stackoverflow.com/questions/52304695/black-bar-covering-my-x-labels-for-matplotlib-plot/52304778#52304778", "title": "Black bar covering my x labels for matplotlib plot?", "body": "<p>It actually is not a black bar, but rather all of your x-axis labels being crammed into too small of a space. You can try rotating the axis labels to create more space or just remove them all together.</p>\n"}, {"tags": [], "owner": {"reputation": 44364, "user_id": 2487184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d8cd1dea84cfe8312c532088a0da08e8?s=128&d=identicon&r=PG", "display_name": "CT Zhu", "link": "https://stackoverflow.com/users/2487184/ct-zhu"}, "is_accepted": true, "score": 2, "last_activity_date": 1536797858, "last_edit_date": 1536797858, "creation_date": 1536797553, "answer_id": 52304988, "question_id": 52304695, "link": "https://stackoverflow.com/questions/52304695/black-bar-covering-my-x-labels-for-matplotlib-plot/52304988#52304988", "title": "Black bar covering my x labels for matplotlib plot?", "body": "<p><code>pos = np.arange(len(df['date']))</code> and <code>ticks = plt.xticks(pos, df['value'])</code> are causing the problem you are having.  You are putting an xtick at <em>every</em> value you have in the data frame.</p>\n\n<p>Don't know how you data looks like and what's the most sensible way to do this.  <code>ticks = plt.xticks(pos[::20], df['value'].values[::20], rotation=90)</code> will put a tick every 20 rows that would make the plot more readable.</p>\n"}], "owner": {"reputation": 679, "user_id": 8027995, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/SunLF.jpg?s=128&g=1", "display_name": "rmahesh", "link": "https://stackoverflow.com/users/8027995/rmahesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1465, "favorite_count": 1, "accepted_answer_id": 52304988, "answer_count": 2, "score": 1, "last_activity_date": 1536797858, "creation_date": 1536794498, "question_id": 52304695, "link": "https://stackoverflow.com/questions/52304695/black-bar-covering-my-x-labels-for-matplotlib-plot", "title": "Black bar covering my x labels for matplotlib plot?", "body": "<p>I am trying to play a figure and I am having a black box pop up on the bottom of the plot where the x labels should be. I tried this command from a similar question on here in the past:</p>\n\n<pre><code>from matplotlib import rcParams\nrcParams.update({'figure.autolayout': True})\n</code></pre>\n\n<p>But the problem was still the same. Here is my current code:</p>\n\n<pre><code>import pylab\nfrom matplotlib import rcParams\nrcParams.update({'figure.autolayout': True})\n\ndf['date'] =  df['date'].astype('str') \n\npos = np.arange(len(df['date']))\nplt.bar(pos,df['value'])\nticks = plt.xticks(pos, df['value'])\n</code></pre>\n\n<p>And my plot is attached here. Any help would be great!\n<a href=\"https://i.stack.imgur.com/00Wra.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/00Wra.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "imaplib"], "answers": [{"tags": [], "owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1536881739, "creation_date": 1536881739, "answer_id": 52323097, "question_id": 52304678, "link": "https://stackoverflow.com/questions/52304678/fetch-all-emails-from-gmail-of-a-particular-label/52323097#52323097", "title": "Fetch all emails from gmail of a particular label", "body": "<p><code>m.select(\"important\")</code> failed.  </p>\n\n<p>If you want the special starred folder, it is probably named \"[Gmail]/Important\".  Use the list() command to find the names used by the server.</p>\n"}], "owner": {"reputation": 565, "user_id": 9856270, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dinesh Ahuja", "link": "https://stackoverflow.com/users/9856270/dinesh-ahuja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 802, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1536881739, "creation_date": 1536794389, "question_id": 52304678, "link": "https://stackoverflow.com/questions/52304678/fetch-all-emails-from-gmail-of-a-particular-label", "title": "Fetch all emails from gmail of a particular label", "body": "<p>I want to fetch all the emails from gmail of a particular label called <code>important</code>. I am using <code>imaplib</code> and <code>python 2</code>.</p>\n\n<p>Below is my code,</p>\n\n<pre><code>import email, getpass, imaplib, os\n\ndetach_dir = '.' \nuser = raw_input(\"Enter your GMail username:\")\npwd = getpass.getpass(\"Enter your password: \")\n\n\n\n# connecting to the gmail imap server\nm = imaplib.IMAP4_SSL(\"imap.gmail.com\")\nm.login(user,pwd)\n\nm.select(\"important\") \n\nresp, items = m.search(None, \"ALL\")\n\nitems = items[0].split() \n\nprint len(items)\n\nfor emailid in items:\n    resp, data = m.fetch(emailid, \"(RFC822)\")\n    email_body = data[0][1] \n    mail = email.message_from_string(email_body) \n\n\n    if mail.get_content_maintype() != 'multipart':\n        continue\n\n    print \"[\"+mail[\"From\"]+\"] :\" + mail[\"Subject\"]\n\n\n    for part in mail.walk():\n\n        if part.get_content_maintype() == 'multipart':\n            continue\n\n\n        if part.get('Content-Disposition') is None:\n            continue\n\n\n\n        filename = mail[\"From\"] + \"_hw1answer\"\n\n        att_path = os.path.join(detach_dir, filename)\n\n\n        if not os.path.isfile(att_path) :\n\n            fp = open(att_path, 'wb')\n            fp.write(part.get_payload(decode=True))\n            fp.close()\n</code></pre>\n\n<p>The error is showing, </p>\n\n<pre><code>imaplib.error: command SEARCH illegal in state AUTH, only allowed in states SELECTED\n</code></pre>\n\n<p>But, if I use INBOX then it is working.</p>\n\n<p>Working when <code>m.select(\"inbox\")</code></p>\n\n<p>What is the recommended way to achieve it ? </p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1536795043, "post_id": 52304663, "comment_id": 91556967, "body": "Use <code>string = r&#39;zone\\s*&quot;example.com&quot;\\s*{\\s*type\\s*master;\\s+file\\s+&quot;&#47;etc&#47;b&zwnj;&#8203;ind&#47;zones&#47;example.co&zwnj;&#8203;m&quot;;\\s*};&#39;</code> and then <code>new_contents = re.sub(r&#39;(?m)^{}$&#39;.format(string), &#39;&#39;, thing.read())</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1536796026, "post_id": 52304663, "comment_id": 91557168, "body": "So ah, what do you suspect is happening here ?"}, {"owner": {"reputation": 1986, "user_id": 4180276, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f34129a97d735e6e19247c911626cb9a?s=128&d=identicon&r=PG&f=1", "display_name": "nadermx", "link": "https://stackoverflow.com/users/4180276/nadermx"}, "reply_to_user": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1536798421, "post_id": 52304663, "comment_id": 91557614, "body": "@WiktorStribi\u017cew that works, if you want to make it a answer so I can accept"}], "answers": [{"tags": [], "owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1536821144, "creation_date": 1536821144, "answer_id": 52308026, "question_id": 52304663, "link": "https://stackoverflow.com/questions/52304663/match-and-delete-a-string-from-a-file/52308026#52308026", "title": "Match and delete a string from a file", "body": "<p>You may declare the <code>string</code> pattern as </p>\n\n<pre><code>string = r'zone\\s*\"example.com\"\\s*{\\s*type\\s*master;\\s+file\\s+\"/etc/bind/zones/example.com\";\\s*};'\n</code></pre>\n\n<p>to ensure whitespaces, <code>\\s*</code> matching 0 or more whitespaces and <code>\\s+</code> matching 1 or more whitespaces, and then use it like</p>\n\n<pre><code>new_contents = re.sub(r'(?m)^{}$'.format(string), '', thing.read())\n</code></pre>\n\n<p>Note that here, <code>(?m)^{}$</code> will anchor the <code>string</code> pattern to match the whole line: <code>(?m)</code> enables <code>^</code> to match line start rather than string start and <code>$</code> to match end of a line rather than a string end.</p>\n\n<p>The <code>thing.read()</code> part will make sure you actually pass the whole file contents to the regex engine, and not a file handle.</p>\n"}], "owner": {"reputation": 1986, "user_id": 4180276, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f34129a97d735e6e19247c911626cb9a?s=128&d=identicon&r=PG&f=1", "display_name": "nadermx", "link": "https://stackoverflow.com/users/4180276/nadermx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 52308026, "answer_count": 1, "score": 1, "last_activity_date": 1536821144, "creation_date": 1536794261, "question_id": 52304663, "link": "https://stackoverflow.com/questions/52304663/match-and-delete-a-string-from-a-file", "title": "Match and delete a string from a file", "body": "<p>I'm currently trying to use <code>re</code> to search this file and delete a zone</p>\n\n<pre><code>//\n// Do any local configuration here\n//\n\n// Consider adding the 1918 zones here, if they are not used in your\n// organization\n//include \"/etc/bind/zones.rfc1918\";\nzone \"domain.com\" {\n        type master;\n        file \"/etc/bind/zones/domain.com.signed\";\n        allow-transfer { 1.2.3.4; };\n\n };\nzone \"4.3.2.in-addr.arpa\" {\n        type master;\n        file \"/etc/bind/rev.domain.com\";\n        allow-transfer { 1.2.3.4; };\n };\n\nzone \"example.com\" {\n        type master;\n        file \"/etc/bind/zones/example.com\";\n};\n</code></pre>\n\n<p>Currently I have this </p>\n\n<pre><code>import re\n\nstring = 'zone \"example.com\" { type master; file \"/etc/bind/zones/example.com\";};'\nwith open('zone.conf.local') as thing:\n    re.sub(r'^%s$' % string, '', thing)\n</code></pre>\n\n<p>But when I try and run this I get this error</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"zone.py\", line 5, in &lt;module&gt;\n    re.sub(r'^%s$' % string, '', thing)\n  File \"/home/john/.virtualenvs/hw/lib/python3.6/re.py\", line 191, in sub\n    return _compile(pattern, flags).sub(repl, string, count)\nTypeError: expected string or bytes-like object\n</code></pre>\n\n<p>I thought that maybe I shouldn't put a string the pattern for <code>re</code> but when I try this</p>\n\n<pre><code>import re\n\nstring = 'zone \"example.com\" { type master; file \"/etc/bind/zones/example.com\";};'\nwith open('zone.conf.local') as thing:\n    re.sub('^$', string, '', thing)\n</code></pre>\n\n<p>This still doesn't work and outputs this</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"zone.py\", line 5, in &lt;module&gt;\n    re.sub('^$', string, '', thing)\n  File \"/home/john/.virtualenvs/hw/lib/python3.6/re.py\", line 191, in sub\n    return _compile(pattern, flags).sub(repl, string, count)\nTypeError: '_io.TextIOWrapper' object cannot be interpreted as an integer\n</code></pre>\n"}, {"tags": ["python", "datetime"], "comments": [{"owner": {"reputation": 5778, "user_id": 5921693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104a78260ca097069cf8f8179e41acdd?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/5921693/nick"}, "edited": false, "score": 0, "creation_date": 1536794255, "post_id": 52304651, "comment_id": 91556784, "body": "<code>current_time</code> is not changing within in the <code>while</code> loop - it is fixed to the time it was when you set it."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1536798374, "post_id": 52304651, "comment_id": 91557606, "body": "When you get to a resolution, please remember to up-vote useful things and accept your favourite answer (even if you have to write it yourself), so Stack Overflow can properly archive the question."}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 10355744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3294f128c74209f7aa44052e6f7814c4?s=128&d=identicon&r=PG&f=1", "display_name": "Epacity", "link": "https://stackoverflow.com/users/10355744/epacity"}, "edited": false, "score": 0, "creation_date": 1536795733, "post_id": 52304689, "comment_id": 91557115, "body": "Thank you for the feedback!  I just have one question, when trying to convert start_time into a datetime object, I get an error that the format does not match what the text is, even though I put it in the right format.  This is the line of code that I used: <code>start_time = datetime.strptime(thing, &#39;%Y, %m, %d, %H, %M, %S, %f&#39;)</code>    By the way, thing is the new variable for the string version of start_time."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 87, "user_id": 10355744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3294f128c74209f7aa44052e6f7814c4?s=128&d=identicon&r=PG&f=1", "display_name": "Epacity", "link": "https://stackoverflow.com/users/10355744/epacity"}, "edited": false, "score": 0, "creation_date": 1536796177, "post_id": 52304689, "comment_id": 91557200, "body": "We can&#39;t help you without the applicable code to reproduce the problem.  Please edit that into your posting.  Don&#39;t read from the file; just assign the literal string to <code>thing</code> (which is a very unhelpful variable name)."}, {"owner": {"reputation": 87, "user_id": 10355744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3294f128c74209f7aa44052e6f7814c4?s=128&d=identicon&r=PG&f=1", "display_name": "Epacity", "link": "https://stackoverflow.com/users/10355744/epacity"}, "edited": false, "score": 0, "creation_date": 1536796393, "post_id": 52304689, "comment_id": 91557240, "body": "Sorry about that, when using the string itself, I still get the same error.  Here is the updated code: <code>start_time = datetime.strptime(&quot;2018-9-12 20:00:00.000000&quot;, &#39;%Y, %m, %d, %H, %M, %S, %f&#39;)</code>"}, {"owner": {"reputation": 87, "user_id": 10355744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3294f128c74209f7aa44052e6f7814c4?s=128&d=identicon&r=PG&f=1", "display_name": "Epacity", "link": "https://stackoverflow.com/users/10355744/epacity"}, "edited": false, "score": 0, "creation_date": 1536797842, "post_id": 52304689, "comment_id": 91557501, "body": "I finally got my code to work with your help.  Thank you for your patience as now looking back I seemed to have made a lot of careless mistakes."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 2, "last_activity_date": 1536797312, "last_edit_date": 1536797312, "creation_date": 1536794479, "answer_id": 52304689, "question_id": 52304651, "link": "https://stackoverflow.com/questions/52304651/trying-to-make-a-python-program-do-a-task-at-a-certain-time-using-datetime-but-i/52304689#52304689", "title": "Trying to make a Python program do a task at a certain time using datetime but it is not working, no errors output", "body": "<p>You have two problems:</p>\n\n<ol>\n<li>You failed to update the <code>current_time</code> within your loop: it's still stuck at the time you began the program.</li>\n<li>You're checking for an exact match.  Since <code>now</code> returns the time in microseconds, it's unlikely that you'll hit the exact time in looping.  Instead, I suggest that you use an inequality.</li>\n</ol>\n\n<p>For instance:</p>\n\n<pre><code>if datetime.now() &gt;= start_time:\n</code></pre>\n\n<p>... where you've already converted <code>start_time</code> to a <code>datetime</code> object.</p>\n\n<hr>\n\n<p>Make that <em>three</em> problems.  You also haven't properly formatted your <code>datetime</code> conversion for the string you feed it: you have punctuation in your string that is not represented in your conversion format.  Try this:</p>\n\n<pre><code>&gt;&gt;&gt; datetime.strptime(\"2018-09-12 20:10:13.141593\",\n                      '%Y-%m-%d %H:%M:%S.%f')\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>datetime.datetime(2018, 9, 12, 20, 10, 13, 141593)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 172, "user_id": 6575718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a621654989052fe84e87df0f2d16f92e?s=128&d=identicon&r=PG&f=1", "display_name": "shyam", "link": "https://stackoverflow.com/users/6575718/shyam"}, "is_accepted": false, "score": 0, "last_activity_date": 1536794495, "creation_date": 1536794495, "answer_id": 52304694, "question_id": 52304651, "link": "https://stackoverflow.com/questions/52304651/trying-to-make-a-python-program-do-a-task-at-a-certain-time-using-datetime-but-i/52304694#52304694", "title": "Trying to make a Python program do a task at a certain time using datetime but it is not working, no errors output", "body": "<p>The file you are taking as input will contain EOL(end of line) characters at the end of the file. First try to delete those characters (\\n \\r etc).</p>\n"}], "owner": {"reputation": 87, "user_id": 10355744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3294f128c74209f7aa44052e6f7814c4?s=128&d=identicon&r=PG&f=1", "display_name": "Epacity", "link": "https://stackoverflow.com/users/10355744/epacity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 52304689, "answer_count": 2, "score": -1, "last_activity_date": 1536797764, "creation_date": 1536794108, "last_edit_date": 1536797764, "question_id": 52304651, "link": "https://stackoverflow.com/questions/52304651/trying-to-make-a-python-program-do-a-task-at-a-certain-time-using-datetime-but-i", "title": "Trying to make a Python program do a task at a certain time using datetime but it is not working, no errors output", "body": "<p>I want to schedule a certain task from Python. I read the desired start time from a file and repeatedly compare this to the current time.  Here is the code:</p>\n\n<pre><code>from datetime import datetime\nimport sys\ncurrent_time = datetime.now()\nf = open(\"starttime.txt\", \"r\")\nstart_time = f.read()\nprint(current_time)\nprint(start_time)\n\nwhile True:\n    if str(current_time) == str(start_time):\n        print(\"the times match\")\n        sys.exit()\n    else:\n        print('not yet')\n</code></pre>\n\n<p>The <code>print</code>s work correctly, but when the start time arrives, the program keeps printing 'not yet'.  Is there any way to fix this?</p>\n\n<p>Edit:  I tried the suggestions that Prune said in the answers section and I got an error when trying to convert a str obj into a datetime obj saying that the format is incorrect.  Here is the line of code:\n<code>start_time = datetime.strptime(\"2018-9-12 20:00:00.000000\", '%Y, %m, %d, %H, %M, %S, %f')</code></p>\n\n<p>Edit 2:  My code is finally working!  Thanks Prune!</p>\n"}, {"tags": ["python", "ssh", "network-programming", "pexpect", "switching"], "comments": [{"owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "edited": false, "score": 0, "creation_date": 1536795954, "post_id": 52304637, "comment_id": 91557157, "body": "Just speculating (and it&#39;s been quite a long time since I used <code>pexpect</code>) but at a glance, I&#39;m skeptical of your <code>prompt</code> definition. At a minimum, won&#39;t you want it anchored at the beginning of the line?  <code>&quot;^#&quot;</code>"}, {"owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "edited": false, "score": 0, "creation_date": 1536796158, "post_id": 52304637, "comment_id": 91557195, "body": "The only other advice I can offer is that it&#39;s often better to start <i>without</i> a try-except. That way, if you get an exception, the interpreter shows you exactly where you went wrong (and can use <code>pdb</code> to diagnose). Then, once the basic logic is working, you can put try-except back in to intelligently recover from error conditions. As is, you can&#39;t distinguish between login failing and any other <code>expect</code> failure."}, {"owner": {"reputation": 23, "user_id": 8109902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52fa87910f4921c59ba5db2931a1658b?s=128&d=identicon&r=PG&f=1", "display_name": "Lj G", "link": "https://stackoverflow.com/users/8109902/lj-g"}, "reply_to_user": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "edited": false, "score": 0, "creation_date": 1536796295, "post_id": 52304637, "comment_id": 91557222, "body": "@GilHamilton I appreciate your response. I will take a look into both of your suggestions."}], "owner": {"reputation": 23, "user_id": 8109902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52fa87910f4921c59ba5db2931a1658b?s=128&d=identicon&r=PG&f=1", "display_name": "Lj G", "link": "https://stackoverflow.com/users/8109902/lj-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 271, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536794020, "creation_date": 1536794020, "question_id": 52304637, "link": "https://stackoverflow.com/questions/52304637/using-pexpect-to-automate-ip-validations", "title": "Using pexpect to automate IP validations", "body": "<p>My end goal is to log into a switch, get the CDP neighbor details written to a file. parse out the IP addresses and run pings on the IP address and output that to a file. I've searched the forums and found nothing really pertaining to switches. Mainly servers, and I've adapted from there. But Now I am stuck. </p>\n\n<p>I get as far as getting logged into a switch and my login prompts seem to be written to a file but nothing else. </p>\n\n<p>Please excuse errors in the code. Also, the second try block is a work in progress. I am new to python and learning as I go. I am open to any and all critiques and suggestions. I want to know what I have done incorrectly, fix it, and build from there. </p>\n\n<p>Thanks in advance!</p>\n\n<pre><code>import pexpect\nimport getpass\nimport sys\nimport re\nimport os\nimport time\n\n\ntry:\n    switch = raw_input(\"Host: \")\n    un = raw_input(\"Username: \")\n    pw = getpass.getpass(\"Password: \")\n\n    options = '-q -oStrictHostKeyChecking=no -oUserKnownHostsFile=/dev/null -oPubkeyAuthentication=no'\n    prompt = \"#\"\n\n\n    connection_string = (\"ssh %s@%s %s\" % (un,switch,options))\n\n\n    child = pexpect.spawn(connection_string, timeout=5)\n    file_output = open('switch_output.txt','wb+')\n    child.logfile = file_output\n    rva12 = \"\";\n\n    child.expect(re.escape(\"password:\"))\n    time.sleep(1)\n    child.sendline(pw)\n    time.sleep(1)\n    child.expect(prompt)\n    time.sleep(1)\n    child.sendline(\"no page\")\n    time.sleep(1)\n    child.expect(prompt)\n    child.sendline(\"show cdp nei det\")\n    time.sleep(1)\n    child.expect(prompt)\n    child.before\n\n    file_output.close()\n\nexcept Exception as e:\n    print(\"Failed on login\")\n    print(sys.exc_info()[0].__name__,\n          os.path.basename(sys.exc_info()[2].tb_frame.f_code.co_filename),\n          sys.exc_info()[2].tb_lineno)\n    print(e)\n\n\ntry:\n    f = open('switch_output.txt', 'r')\n    pattern_one = re.compile('.*A\\d\\n|\\:\\s\\d{2,}\\.\\d{2,}\\.\\d{1,}.\\d{1,}?')\n\n    for line in f:\n        matches = []\n\n        if pattern_one.search(line):\n        matches.append(line.split(':', 1)[-1].strip())\n\n        mp = re.compile('\\d{2,}\\.\\d{2,}\\.\\d{1,}.\\d{1,}')\n\n        with open('MDF1.txt', 'wb+') as file:\n            for match in matches:\n                if mp.search(match):\n                    file.write(match+'\\n')\n                    file.close()\n\n        for line in open('MDF1.txt','r'):\n            child.expect(prompt)\n            child.sendline('ping '+ line)\n            time.sleep(10)\n\n\nexcept Exception as e:\n    print(sys.exc_info()[0].__name__,\n        os.path.basename(sys.exc_info()[2].tb_frame.f_code.co_filename),\n        sys.exc_info()[2].tb_lineno)\n    print(e)\n</code></pre>\n"}, {"tags": ["python", "google-app-engine"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 7336090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed2001a8855a4604dd17b2777ab1c2db?s=128&d=identicon&r=PG&f=1", "display_name": "Johnson", "link": "https://stackoverflow.com/users/7336090/johnson"}, "edited": false, "score": 0, "creation_date": 1536859077, "post_id": 52305241, "comment_id": 91584803, "body": "The tasks I am running are for computing the some KPIs of our app, which contains at least a few million data points per day.   I haven&#39;t thought about just starting the job and adding a poll task. I&#39;ll look into doing that."}], "tags": [], "owner": {"reputation": 1298, "user_id": 6224592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh5.googleusercontent.com/-0cx-jEzsPMs/AAAAAAAAAAI/AAAAAAAAACk/ZNNXZEAOJ3w/photo.jpg?sz=128", "display_name": "Serge Hendrickx", "link": "https://stackoverflow.com/users/6224592/serge-hendrickx"}, "is_accepted": true, "score": 0, "last_activity_date": 1536800225, "last_edit_date": 1592644375, "creation_date": 1536800225, "answer_id": 52305241, "question_id": 52304614, "link": "https://stackoverflow.com/questions/52304614/google-app-engine-push-task-timing-out-on-flex-environment/52305241#52305241", "title": "Google App Engine push task timing out on flex environment", "body": "<p>Configuration looks good! I had similar problems and in my case I hit the 32MB limit for <strong>incoming</strong> http-requests.\nAs Google states:</p>\n<blockquote>\n<p><strong>Incoming bandwidth</strong></p>\n<p>The amount of data received by the application from\nrequests. Each incoming HTTP request can be no larger than 32MB.\nThis includes:</p>\n<ul>\n<li>Data received by the application in secure requests and non-secure</li>\n<li>requests uploads to the Blobstore data received in response to HTTP</li>\n<li>requests by the URL fetch service <a href=\"https://cloud.google.com/appengine/quotas\" rel=\"nofollow noreferrer\">[1]</a></li>\n</ul>\n</blockquote>\n<p>So it could be that you're downloading a resulting table that's too large for the #@MB limit? Not sure if API count towards this, I would guess it does.</p>\n<p>What is the task exactly doing?\nIf you just have a query to run, why not start a job and poll every few seconds to see if it completed, or use another task even. <a href=\"https://cloud.google.com/bigquery/docs/reference/rest/v2/jobs/query\" rel=\"nofollow noreferrer\">[2]</a> No need to keep the connection open it seems.</p>\n<p>By the way, the 32MB limit is ridiculously small these days in my opinion.</p>\n<p><a href=\"https://googlecloudplatform.github.io/google-cloud-python/latest/bigquery/usage.html#querying-data\" rel=\"nofollow noreferrer\">https://googlecloudplatform.github.io/google-cloud-python/latest/bigquery/usage.html#querying-data</a></p>\n"}], "owner": {"reputation": 35, "user_id": 7336090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed2001a8855a4604dd17b2777ab1c2db?s=128&d=identicon&r=PG&f=1", "display_name": "Johnson", "link": "https://stackoverflow.com/users/7336090/johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 52305241, "answer_count": 1, "score": 1, "last_activity_date": 1536800225, "creation_date": 1536793841, "question_id": 52304614, "link": "https://stackoverflow.com/questions/52304614/google-app-engine-push-task-timing-out-on-flex-environment", "title": "Google App Engine push task timing out on flex environment", "body": "<p>Currently I have a Google App Engine push task queue that is designed to generate reports from querying BigQuery DB.</p>\n\n<p>The push tasks are generated by cron, which adds a reporting task to the queue</p>\n\n<p>Here is the queue configuration:</p>\n\n<pre><code>- name: reporting-push-queue\n  target: reporting-dispatcher\n  rate: 1/m\n  bucket_size: 5\n  retry_parameters:\n    min_backoff_seconds: 60\n    max_backoff_seconds: 120\n    max_doublings: 5\n    task_retry_limit: 2\n    task_age_limit: 10m\n</code></pre>\n\n<p>For small queries this configuration is able to run and generate the report correctly. On slightly longer queries it would time out and return a 502 status code after 30 seconds. </p>\n\n<p>Based on the documentation push tasks on flex environments are suppose to have up to 10 minutes but this has not been the case.</p>\n\n<p>Here are the lib versions that I am using with Python 3</p>\n\n<pre><code>google-cloud==0.34\ngoogle-cloud-bigquery==1.5\ngoogle-cloud-pubsub==0.37\n</code></pre>\n\n<p>Here is the yaml file that is used.</p>\n\n<pre><code>runtime: python\nenv: flex\nentrypoint: gunicorn -b :$PORT reporting-dispatcher:app\nthreadsafe: true\n\nruntime_config:\n  python_version: 3\n\nservice: reporting-dispatcher\n\ninstance_class: F1\nautomatic_scaling:\n  min_num_instances: 1\n  max_num_instances: 10\n  max_concurrent_requests: 1\n\nliveness_check:\n  check_interval_sec: 60\n  timeout_sec: 60\n  failure_threshold: 10\n  success_threshold: 1\n\nreadiness_check:\n  check_interval_sec: 60\n  timeout_sec: 60\n  failure_threshold: 10\n  success_threshold: 1\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "exec"], "comments": [{"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1536793982, "post_id": 52304606, "comment_id": 91556735, "body": "Have you <i>tried</i> running indented code with <code>exec</code>? What was the problem?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10355408, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4bTI4fNb9hI/AAAAAAAAAAI/AAAAAAAAAU8/P-PsU8LHlD4/photo.jpg?sz=128", "display_name": "cattythe gamer", "link": "https://stackoverflow.com/users/10355408/cattythe-gamer"}, "edited": false, "score": 0, "creation_date": 1536797976, "post_id": 52304635, "comment_id": 91557537, "body": "Great, that fixed it."}, {"owner": {"reputation": 541, "user_id": 5737637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IeRo.jpg?s=128&g=1", "display_name": "soheshdoshi", "link": "https://stackoverflow.com/users/5737637/soheshdoshi"}, "reply_to_user": {"reputation": 3, "user_id": 10355408, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4bTI4fNb9hI/AAAAAAAAAAI/AAAAAAAAAU8/P-PsU8LHlD4/photo.jpg?sz=128", "display_name": "cattythe gamer", "link": "https://stackoverflow.com/users/10355408/cattythe-gamer"}, "edited": false, "score": 0, "creation_date": 1537078204, "post_id": 52304635, "comment_id": 91647963, "body": "Nice, that fixed it! @cattythegamer"}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1536794010, "creation_date": 1536794010, "answer_id": 52304635, "question_id": 52304606, "link": "https://stackoverflow.com/questions/52304606/is-it-possible-to-run-indented-blocks-using-exec/52304635#52304635", "title": "Is it possible to run indented blocks using exec()?", "body": "<p>The problem here isn't the indentation. The problem is that you're trying to <code>exec</code> the lines of a compound statement one by one. Python can't make sense of a compound statement without the whole thing.</p>\n\n<p><code>exec</code> the whole input as a single unit:</p>\n\n<pre><code>exec('\\n'.join(code_list))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10213, "user_id": 1359058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f191024999528a3a7375f8d7181e1fe6?s=128&d=identicon&r=PG", "display_name": "abc", "link": "https://stackoverflow.com/users/1359058/abc"}, "is_accepted": false, "score": 0, "last_activity_date": 1536794070, "creation_date": 1536794070, "answer_id": 52304643, "question_id": 52304606, "link": "https://stackoverflow.com/questions/52304606/is-it-possible-to-run-indented-blocks-using-exec/52304643#52304643", "title": "Is it possible to run indented blocks using exec()?", "body": "<p>From <a href=\"https://docs.python.org/3/library/functions.html#exec\" rel=\"nofollow noreferrer\">exec()</a> documentation:</p>\n\n<blockquote>\n  <p>This function supports dynamic execution of Python code. object must be either a string or a code object. If it is a string, the string is parsed as a suite of Python statements which is then executed ...</p>\n</blockquote>\n\n<p>Thus, you can do things like</p>\n\n<pre><code>exec(\"a=2\\nb=3\")\nexec(\"if a==2:\\n\\tprint(a)\\nelse:\\tprint(b)\")\n</code></pre>\n\n<p>You just need to follow the right syntax and indentation.</p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 9980925, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RE8Ybnppjhs/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2bA5kTg4FIIHU6RYHUwPoG7PpLNw/mo/photo.jpg?sz=128", "display_name": "MSam", "link": "https://stackoverflow.com/users/9980925/msam"}, "is_accepted": false, "score": 0, "last_activity_date": 1537075742, "creation_date": 1537075742, "answer_id": 52351225, "question_id": 52304606, "link": "https://stackoverflow.com/questions/52304606/is-it-possible-to-run-indented-blocks-using-exec/52351225#52351225", "title": "Is it possible to run indented blocks using exec()?", "body": "<p>Another way of formatting code within an exec() function is to use triple quotes, which makes it easy to see what the code looks like.</p>\n\n<pre><code>code = \"\"\"                     # Opening quotes\nfor i in range(0, 10):         # Code line 1         \n    print(i)                   # Code line 2\n\"\"\"                            # Closing quotes\nexec(code)\n</code></pre>\n\n<p>This would maybe not work if you're asking the user to input the code, but it's a trick that may come in handy.</p>\n"}], "owner": {"reputation": 3, "user_id": 10355408, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4bTI4fNb9hI/AAAAAAAAAAI/AAAAAAAAAU8/P-PsU8LHlD4/photo.jpg?sz=128", "display_name": "cattythe gamer", "link": "https://stackoverflow.com/users/10355408/cattythe-gamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 612, "favorite_count": 0, "accepted_answer_id": 52304635, "answer_count": 3, "score": 0, "last_activity_date": 1537075742, "creation_date": 1536793776, "last_edit_date": 1536794018, "question_id": 52304606, "link": "https://stackoverflow.com/questions/52304606/is-it-possible-to-run-indented-blocks-using-exec", "title": "Is it possible to run indented blocks using exec()?", "body": "<p>Using the <code>exec()</code> python command, is it possible to run indented blocks of code (Like <code>if/else</code> statements or <code>try/except</code>). For example:</p>\n\n<pre><code>name = input(\"Enter name: \")\nif name == \"Bob\":\n     print(\"Hi bob\")\nelse:\n     print(\"Hi user\")\n</code></pre>\n\n<p>At the moment I am using this to run the code:</p>\n\n<pre><code>code_list = []\nwhile True:\n     code = input(\"Enter code or type end: \")\n     if code == \"end\":\n          break\n     else:\n          code_list.append(code)\nfor code_piece in code_list:\n     exec(code_piece)\n</code></pre>\n\n<p>Also I know that this isn't very \"Pythonic\" or \"Good practise\" to let the user input their own code but it will be useful in other parts of my code.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 10354952, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iCptM70Ce4k/AAAAAAAAAAI/AAAAAAAAAC4/PM-8p1_aikw/photo.jpg?sz=128", "display_name": "Deepesh Nair", "link": "https://stackoverflow.com/users/10354952/deepesh-nair"}, "edited": false, "score": 1, "creation_date": 1536854067, "post_id": 52304682, "comment_id": 91582255, "body": "Thank you for the detailed explanation:) Your solution worked great and additionally i learnt about the &quot;coerce&quot; option .    # Find proper dates, create new column: Also, in the first step, the &quot;NaT&quot; were automatically assigned &#39;1970-01-01&#39; . So, i tried adding another argument. df[&#39;Date_New&#39;] = pd.to_datetime(df[&#39;Acct&#39;],infer_datetime_format=True errors=&#39;coerce&#39;)  This worked for me :)"}], "tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": false, "score": 2, "last_activity_date": 1536795507, "last_edit_date": 1536795507, "creation_date": 1536794407, "answer_id": 52304682, "question_id": 52304546, "link": "https://stackoverflow.com/questions/52304546/how-to-iterate-over-a-df-column-with-mixed-datatypes-values/52304682#52304682", "title": "How to iterate over a DF[ &#39;column&#39;] with mixed datatypes values?", "body": "<p>I'd suggest not iterating, but using <code>pandas</code> functions instead. To find proper dates, you can convert the <code>Acct</code> column to proper dates using <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.to_datetime.html\" rel=\"nofollow noreferrer\"><code>pd.to_datetime</code></a>, and use the argument <code>errors = 'coerce'</code>. Non-dates will be turned to null (<code>NaT</code>). Then, forward fill that column with the proper dates using <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.ffill.html\" rel=\"nofollow noreferrer\"><code>ffill</code></a>, and get rid of columns in which the <code>Time</code>, <code>Typ</code> and <code>Name</code> columns are all <code>NaN</code> by indexing. Finally you can reorder your columns:</p>\n\n<pre><code># Find proper dates, create new column:\ndf['Date_New'] = pd.to_datetime(df['Acct'], errors='coerce')\n# Fill non-valid dates:\ndf['Date_New'].ffill(inplace=True)\n# Get rid of `NaN` rows:\ndf = df[~df[['Time','Typ', 'Name']].isnull().all(1)]\n# Reorder Columns\ndf = df[['Date_New', 'Acct', 'Time', 'Typ', 'Name']]\n\n&gt;&gt;&gt; df\n     Date_New Acct      Time  Typ    Name\n1  2018-01-02   52  07:58:34  1.0    John\n2  2018-01-02   53  07:58:35  1.0    Jack\n3  2018-01-02   54  07:58:35  1.0     Ron\n4  2018-01-02   55  07:58:35  1.0     Lux\n6  2018-01-03   79  12:39:25  1.0    Mike\n8  2018-01-06  371  12:15:47  1.0    Eric\n9  2018-01-06  422  17:07:33  1.0   Shawn\n11 2018-01-07  492  12:43:54  1.0  George\n</code></pre>\n\n<p><strong>Further explanation</strong>:</p>\n\n<p>For easier understanding, here are the results after each step:</p>\n\n<pre><code>&gt;&gt;&gt; df['Date_New'] = pd.to_datetime(df['Acct'], errors='coerce')\n&gt;&gt;&gt; df\n          Acct      Time  Typ    Name   Date_New\n0   01/02/2018       NaN  NaN     NaN 2018-01-02\n1           52  07:58:34  1.0    John        NaT\n2           53  07:58:35  1.0    Jack        NaT\n3           54  07:58:35  1.0     Ron        NaT\n4           55  07:58:35  1.0     Lux        NaT\n5   01/03/2018       NaN  NaN     NaN 2018-01-03\n6           79  12:39:25  1.0    Mike        NaT\n7   01/06/2018       NaN  NaN     NaN 2018-01-06\n8          371  12:15:47  1.0    Eric        NaT\n9          422  17:07:33  1.0   Shawn        NaT\n10  01/07/2018       NaN  NaN     NaN 2018-01-07\n11         492  12:43:54  1.0  George        NaT\n\n&gt;&gt;&gt; df['Date_New'].ffill(inplace=True)\n&gt;&gt;&gt; df\n          Acct      Time  Typ    Name   Date_New\n0   01/02/2018       NaN  NaN     NaN 2018-01-02\n1           52  07:58:34  1.0    John 2018-01-02\n2           53  07:58:35  1.0    Jack 2018-01-02\n3           54  07:58:35  1.0     Ron 2018-01-02\n4           55  07:58:35  1.0     Lux 2018-01-02\n5   01/03/2018       NaN  NaN     NaN 2018-01-03\n6           79  12:39:25  1.0    Mike 2018-01-03\n7   01/06/2018       NaN  NaN     NaN 2018-01-06\n8          371  12:15:47  1.0    Eric 2018-01-06\n9          422  17:07:33  1.0   Shawn 2018-01-06\n10  01/07/2018       NaN  NaN     NaN 2018-01-07\n11         492  12:43:54  1.0  George 2018-01-07\n\n&gt;&gt;&gt; df = df[~df[['Time','Typ', 'Name']].isnull().all(1)]\n&gt;&gt;&gt; df\n   Acct      Time  Typ    Name   Date_New\n1    52  07:58:34  1.0    John 2018-01-02\n2    53  07:58:35  1.0    Jack 2018-01-02\n3    54  07:58:35  1.0     Ron 2018-01-02\n4    55  07:58:35  1.0     Lux 2018-01-02\n6    79  12:39:25  1.0    Mike 2018-01-03\n8   371  12:15:47  1.0    Eric 2018-01-06\n9   422  17:07:33  1.0   Shawn 2018-01-06\n11  492  12:43:54  1.0  George 2018-01-07\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10354952, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iCptM70Ce4k/AAAAAAAAAAI/AAAAAAAAAC4/PM-8p1_aikw/photo.jpg?sz=128", "display_name": "Deepesh Nair", "link": "https://stackoverflow.com/users/10354952/deepesh-nair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1536797525, "creation_date": 1536793200, "last_edit_date": 1536795552, "question_id": 52304546, "link": "https://stackoverflow.com/questions/52304546/how-to-iterate-over-a-df-column-with-mixed-datatypes-values", "title": "How to iterate over a DF[ &#39;column&#39;] with mixed datatypes values?", "body": "<p>I have imported an excel file and having a trouble with the <code>pandas</code> iteration.\nThe data looks like below after the import.</p>\n\n<pre><code>Acct            Time        Typ     Name   \n01/02/2018      NaN         NaN     NaN  \n52              07:58:34    1       John  \n53              07:58:35    1       Jack   \n54              07:58:35    1       Ron  \n55              07:58:35    1       Lux   \n01/03/2018      NaN         NaN     NaN  \n79              12:39:25    1       Mike    \n01/06/2018      NaN         NaN     NaN         \n371             12:15:47    1       Eric   \n422             17:07:33    1       Shawn  \n01/07/2018      NaN         NaN     NaN         \n492             12:43:54    1       George\n</code></pre>\n\n<p>I want to iterate over the string of the first column (<code>\"Acct\"</code>), check if its a <strong>date</strong> or a <strong>number</strong> . </p>\n\n<p>I created an additional column in a new data frame and tried to populate with the date field , however getting few Series errors. </p>\n\n<p>Expecting an output like this :</p>\n\n<pre><code>Date_New        Acct        Time        Typ     Name \n\n01/02/2018      52          07:58:34    1       John  \n01/02/2018      53          07:58:35    1       Jack   \n01/02/2018      54          07:58:35    1       Ron  \n01/02/2018      55          07:58:35    1       Lux   \n01/03/2018      79          12:39:25    1       Mike    \n01/06/2018      371         12:15:47    1       Eric   \n01/06/2018      422         17:07:33    1       Shawn  \n01/07/2018      492         12:43:54    1       George\n</code></pre>\n\n<p>I would appreciate if someone can send me some direction as I'm new to <code>pandas</code>.</p>\n"}, {"tags": ["javascript", "python", "beautifulsoup", "html-parsing"], "comments": [{"owner": {"reputation": 4807, "user_id": 4661269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yroRp.jpg?s=128&g=1", "display_name": "Josie Thompson", "link": "https://stackoverflow.com/users/4661269/josie-thompson"}, "edited": false, "score": 0, "creation_date": 1536793795, "post_id": 52304522, "comment_id": 91556697, "body": "That&#39;s odd! I ran this code, but I left out the headers because It&#39;s been a while since I used requests and I don&#39;t remember all the specifications. Everything seemed to be working fine! Maybe try running it without passing the headers kwarg? There could be some error with your header."}, {"owner": {"reputation": 209, "user_id": 8762087, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/fcce2d214f57132a204fffb64a568044?s=128&d=identicon&r=PG&f=1", "display_name": "Neil S", "link": "https://stackoverflow.com/users/8762087/neil-s"}, "reply_to_user": {"reputation": 4807, "user_id": 4661269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yroRp.jpg?s=128&g=1", "display_name": "Josie Thompson", "link": "https://stackoverflow.com/users/4661269/josie-thompson"}, "edited": false, "score": 0, "creation_date": 1536795196, "post_id": 52304522, "comment_id": 91557006, "body": "Still doesn&#39;t work. Headers seem to be fine. I am getting the correct information in the &#39;html&#39; element. &#39;soup&#39; is not catching all the code."}], "answers": [{"comments": [{"owner": {"reputation": 209, "user_id": 8762087, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/fcce2d214f57132a204fffb64a568044?s=128&d=identicon&r=PG&f=1", "display_name": "Neil S", "link": "https://stackoverflow.com/users/8762087/neil-s"}, "edited": false, "score": 0, "creation_date": 1536796434, "post_id": 52304672, "comment_id": 91557254, "body": "The result through this method is not the same I get to view in the <code>view-source</code> of chrome that I see.  The other part of my script needs to find a link ending with <code>keywords=9780307397980</code>           <code>for url in resultcol.find_all(&#39;a&#39;):             if url[&#39;href&#39;].endswith(&#39;keywords=&#39;+str(ISBN_search)):                 if &#39;dp&#39; in url[&#39;href&#39;]:                      sub_link.append(url[&#39;href&#39;])                     linklist[link_search - 1] = url[&#39;href&#39;]                     break</code>"}, {"owner": {"reputation": 2293, "user_id": 1794144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hn8jz.png?s=128&g=1", "display_name": "Vishvajit Pathak", "link": "https://stackoverflow.com/users/1794144/vishvajit-pathak"}, "reply_to_user": {"reputation": 209, "user_id": 8762087, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/fcce2d214f57132a204fffb64a568044?s=128&d=identicon&r=PG&f=1", "display_name": "Neil S", "link": "https://stackoverflow.com/users/8762087/neil-s"}, "edited": false, "score": 0, "creation_date": 1536796554, "post_id": 52304672, "comment_id": 91557285, "body": "@NeilS You can refine the element searching here."}, {"owner": {"reputation": 209, "user_id": 8762087, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/fcce2d214f57132a204fffb64a568044?s=128&d=identicon&r=PG&f=1", "display_name": "Neil S", "link": "https://stackoverflow.com/users/8762087/neil-s"}, "edited": false, "score": 0, "creation_date": 1536797768, "post_id": 52304672, "comment_id": 91557490, "body": "I am not able to located the URL containing the element. I can see it on Chrome but not in <code>soup</code>"}, {"owner": {"reputation": 2293, "user_id": 1794144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hn8jz.png?s=128&g=1", "display_name": "Vishvajit Pathak", "link": "https://stackoverflow.com/users/1794144/vishvajit-pathak"}, "reply_to_user": {"reputation": 209, "user_id": 8762087, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/fcce2d214f57132a204fffb64a568044?s=128&d=identicon&r=PG&f=1", "display_name": "Neil S", "link": "https://stackoverflow.com/users/8762087/neil-s"}, "edited": false, "score": 0, "creation_date": 1536828074, "post_id": 52304672, "comment_id": 91566609, "body": "@NeilS check the updated code for your required element. You will need a regex to fetch the URL."}, {"owner": {"reputation": 209, "user_id": 8762087, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/fcce2d214f57132a204fffb64a568044?s=128&d=identicon&r=PG&f=1", "display_name": "Neil S", "link": "https://stackoverflow.com/users/8762087/neil-s"}, "edited": false, "score": 0, "creation_date": 1536851941, "post_id": 52304672, "comment_id": 91581109, "body": "I am sorry if I wasnt clear before, but I am looking for this link in the script: <code>https:&#47;&#47;www.amazon.com&#47;Year-Flood-MaddAddam-Trilogy&#47;dp&#47;03073&zwnj;&#8203;9798X&#47;ref=sr_1_1?ie=&zwnj;&#8203;UTF8&amp;amp;qid=1536785&zwnj;&#8203;536&amp;amp;sr=8-1&amp;amp;k&zwnj;&#8203;eywords=978030739798&zwnj;&#8203;0</code>.... If you open the link <code>https:&#47;&#47;www.amazon.com&#47;s&#47;ref=nb_sb_noss?url=search-alias%3Ds&zwnj;&#8203;tripbooks&amp;field-keyw&zwnj;&#8203;ords=9780307397980</code> on chrome and view the source code (ctrl+u) and go to line 1419 (dont know it would be same for you), I can see this link. In <code>soup</code> that we just parsed, I cannot see this part. Any idea as to why?"}], "tags": [], "owner": {"reputation": 2293, "user_id": 1794144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hn8jz.png?s=128&g=1", "display_name": "Vishvajit Pathak", "link": "https://stackoverflow.com/users/1794144/vishvajit-pathak"}, "is_accepted": false, "score": 1, "last_activity_date": 1536828036, "last_edit_date": 1536828036, "creation_date": 1536794339, "answer_id": 52304672, "question_id": 52304522, "link": "https://stackoverflow.com/questions/52304522/python-beautifulsoup-html-parser-not-working/52304672#52304672", "title": "Python BeautifulSoup html.parser not working", "body": "<p>You need to wait until the page is completely loaded. You have to use <code>phantomJs</code> to make sure page is loaded correctly.</p>\n\n<p>I was able to get the correct element with following code.</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\nfrom selenium import webdriver\n\nurl = (\"https://www.amazon.com/s/ref=nb_sb_noss?url=search-alias%3D\"\n       \"stripbooks&amp;field-keywords=9780307397980\")\n\nbrowser = webdriver.PhantomJS()\nbrowser.get(url)\nhtml = browser.page_source\nsoup = BeautifulSoup(html, 'lxml')\nresultcol = soup.find('img', attrs={'class': 's-access-image'})\nprint resultcol\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209, "user_id": 8762087, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/fcce2d214f57132a204fffb64a568044?s=128&d=identicon&r=PG&f=1", "display_name": "Neil S", "link": "https://stackoverflow.com/users/8762087/neil-s"}, "edited": false, "score": 0, "creation_date": 1536796204, "post_id": 52304801, "comment_id": 91557207, "body": "I get this error <code>AttributeError: &#39;bytes&#39; object has no attribute &#39;parser&#39;</code>"}, {"owner": {"reputation": 3, "user_id": 10107462, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-01PJ-WaPngU/AAAAAAAAAAI/AAAAAAAAZ-Q/Zc-2GGqJV1A/photo.jpg?sz=128", "display_name": "Guar", "link": "https://stackoverflow.com/users/10107462/guar"}, "reply_to_user": {"reputation": 209, "user_id": 8762087, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/fcce2d214f57132a204fffb64a568044?s=128&d=identicon&r=PG&f=1", "display_name": "Neil S", "link": "https://stackoverflow.com/users/8762087/neil-s"}, "edited": false, "score": 0, "creation_date": 1536796376, "post_id": 52304801, "comment_id": 91557233, "body": "&quot;AttributeError: &#39;NoneType&#39; object has no attribute &#39;foo&#39; - This usually happens because you called find() and then tried to access the .foo` attribute of the result. But in your case, find() didn\u2019t find anything, so it returned None, instead of returning a tag or a string. You need to figure out why your find() call isn\u2019t returning anything.&quot; from BS4 Documentation"}, {"owner": {"reputation": 3, "user_id": 10107462, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-01PJ-WaPngU/AAAAAAAAAAI/AAAAAAAAZ-Q/Zc-2GGqJV1A/photo.jpg?sz=128", "display_name": "Guar", "link": "https://stackoverflow.com/users/10107462/guar"}, "reply_to_user": {"reputation": 209, "user_id": 8762087, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/fcce2d214f57132a204fffb64a568044?s=128&d=identicon&r=PG&f=1", "display_name": "Neil S", "link": "https://stackoverflow.com/users/8762087/neil-s"}, "edited": false, "score": 0, "creation_date": 1536796510, "post_id": 52304801, "comment_id": 91557276, "body": "I think the problem is with &#39;div&#39;"}], "tags": [], "owner": {"reputation": 3, "user_id": 10107462, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-01PJ-WaPngU/AAAAAAAAAAI/AAAAAAAAZ-Q/Zc-2GGqJV1A/photo.jpg?sz=128", "display_name": "Guar", "link": "https://stackoverflow.com/users/10107462/guar"}, "is_accepted": false, "score": 0, "last_activity_date": 1536796237, "last_edit_date": 1536796237, "creation_date": 1536795575, "answer_id": 52304801, "question_id": 52304522, "link": "https://stackoverflow.com/questions/52304522/python-beautifulsoup-html-parser-not-working/52304801#52304801", "title": "Python BeautifulSoup html.parser not working", "body": "<p>Remove headers, and it should work.</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport requests\nresponse = requests.get('https://www.amazon.com/s/ref=nb_sb_noss?url=search-    alias%3Dstripbooks&amp;field-keywords=9780307397980')\nhtml = response.content\nsoup = BeautifulSoup(html, \"html.parser\")\nresultcol = soup.find('div', attrs={'id':'resultsCol'})`\n</code></pre>\n"}], "owner": {"reputation": 209, "user_id": 8762087, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/fcce2d214f57132a204fffb64a568044?s=128&d=identicon&r=PG&f=1", "display_name": "Neil S", "link": "https://stackoverflow.com/users/8762087/neil-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2791, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1536845375, "creation_date": 1536793019, "last_edit_date": 1536820927, "question_id": 52304522, "link": "https://stackoverflow.com/questions/52304522/python-beautifulsoup-html-parser-not-working", "title": "Python BeautifulSoup html.parser not working", "body": "<p>I have a script to pull off book information from Amazon which was running successfully before but failed today. I am not able to figure out exactly what is going wrong but I am assuming its the parser or Javascript related. I am using the below code.</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport requests\n\nresponse = requests.get('https://www.amazon.com/s/ref=nb_sb_noss?url=search-alias%3Dstripbooks&amp;field-keywords=9780307397980',headers={'User-Agent': b'Mozilla/5.0 (X11; Linux x86_64; rv:52.0) Gecko/20100101 Firefox/52.0'})\nhtml = response.content\nsoup = BeautifulSoup(html, \"html.parser\")\nresultcol = soup.find('div', attrs={'id':'resultsCol'})\n</code></pre>\n\n<p>Previously I used to get data in <code>resultcol</code> but now its blank. When I check <code>html</code> I see the tag i am looking for i.e. <code>&lt;div id=\"resultsCol\" class=\\'\\' &gt;</code>. But <code>soup</code> does not have this text in it. Can anyone help me debug this? It was working perfectly fine before but now it is not.</p>\n"}, {"tags": ["python", "python-3.x", "pyqt", "pyqt5"], "comments": [{"owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "edited": false, "score": 1, "creation_date": 1536795012, "post_id": 52304519, "comment_id": 91556958, "body": "Change <code>ansbutton.clicked.connect (f1)</code> to <code>ansbutton.clicked.connect (lambda: f1 (dfte))</code>    and Change <code>def f1 ():</code> to <code>def f1 (dfte):</code>"}, {"owner": {"reputation": 13, "user_id": 10261368, "user_type": "registered", "profile_image": "https://graph.facebook.com/2132082997110892/picture?type=large", "display_name": "Hamza Maharmeh", "link": "https://stackoverflow.com/users/10261368/hamza-maharmeh"}, "reply_to_user": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "edited": false, "score": 1, "creation_date": 1536844437, "post_id": 52304519, "comment_id": 91576186, "body": "S. Nick thank you so much, it worked. I will be sending this program to school students to understand how to use program for calculation in physics and medecine. I am a medical student. thank you so much"}], "owner": {"reputation": 13, "user_id": 10261368, "user_type": "registered", "profile_image": "https://graph.facebook.com/2132082997110892/picture?type=large", "display_name": "Hamza Maharmeh", "link": "https://stackoverflow.com/users/10261368/hamza-maharmeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536849493, "creation_date": 1536793011, "last_edit_date": 1536849493, "question_id": 52304519, "link": "https://stackoverflow.com/questions/52304519/pyqt5-after-i-press-button-to-calculate-using-a-formula-the-app-closes", "title": "PYQT5: After I press button to calculate using a formula, The app closes.", "body": "<p>I am making a physics calculator that takes values from the person and uses a calculation to show the answer. the problem is that when i press submit to take the values and save them as variable and show a button to show the answer, the app closes and sublime text shows REPL closed. i have no idea why. please help. i think the problem is in f2(). thank you for your patience.</p>\n\n<pre><code>import sys\nfrom PyQt5.QtWidgets import QWidget\nfrom PyQt5.QtWidgets import QApplication\nfrom PyQt5.QtWidgets import QPushButton\nfrom PyQt5.QtWidgets import QToolTip , QCheckBox, QLCDNumber,QLineEdit,QInputDialog#just compile the modules like this\nfrom PyQt5.QtGui import QIcon\nfrom PyQt5.QtWidgets import QLabel\ndef ObjectDensity():\n    dflabel = QLabel(\"Please Enter Density of Fluid: \",w)\n    dflabel.move(25,220)\n    dflabel.show()\n    dfte = QLineEdit(w)\n    dfte.move(25,260)\n    dfte.show()\n    Weight2 = QLabel(\"Please Enter Weight:\",w)\n    Weight2.move(25,300)\n    Weight2.show()\n    Wte = QLineEdit(w)\n    Wte.move(25,340)\n    Wte.show()\n    AIW2 = QLabel(\"Enter Apperent Immersed Weight: \",w)\n    AIW2.move(25,380)\n    AIW2.show()\n    aiwte = QLineEdit(w)\n    aiwte.move(25,420)\n    aiwte.show()\n    ansbutton = QPushButton(\"Submit\",w)\n    ansbutton.move(50,480)\n    ansbutton.show()\n    ansbutton.clicked.connect(lambda: f1(dfte,Wte,aiwte,ansdo))\n    # df1 = dfte.text()\n    # w2 = Wte.text()\n    # aiw6 = aiwte.text()\ndef f1(dfte,Wte,aiwte,ansdo):\n\n    df1 = int(dfte.text())\n    w2 = int(Wte.text())\n    aiw6 = int(aiwte.text())\n    # ansdo = ((w2/w2-aiw6)*df1)\n    # ans4 = int(ansdo)\n    ans = QPushButton(\"press to show answer\",w)\n    ans.move(50,250)\n    ans.show()\n    ans.clicked.connect(lambda:f2(w2,aiw6,df1))\ndef f2(w2,aiw6,df1):\n    ansdo = ((w2/w2-aiw6)*df1)\n    ans4 = int(ansdo)\n    answer = QLabel(ans4,w)\n    answer.move(75,300)\n    answer.show()\n\n\ndef arch():\n    l_archimedes = QLabel(\"Archimedes' Law\",w)\n    l_archimedes.move(25,80)\n    l_archimedes.show()\n    l_archimedes2 = QLabel(\"Density of Object/Density of Fluid = Weight/(Weight - Apparent Immersed Weight)\",w)\n    l_archimedes2.move(25,110)\n    l_archimedes2.show()\n    Archimedeslaw = QLabel(\"What Do You Want to Solve For:\",w)\n    Archimedeslaw.move(25,145)\n    Archimedeslaw.show()\n    dop = QPushButton(\"Density of Object\",w)\n    dop.move(25,160)\n    dop.show()\n    dop.clicked.connect(ObjectDensity)\n\n\n    DF = QPushButton(\"Density of Fluid\",w)\n    DF.move(200,160)\n    DF.show()\n    Weight = QPushButton(\"Weight\",w)\n    Weight.move(375,160)\n    Weight.show()\n    AIW = QPushButton(\"Apperent Immersed Weight\",w)\n    AIW.move(500,160)\n    AIW.show()\n\napp = QApplication(sys.argv)\nw = QWidget()\nw.resize(900,600)\nw.move(460,0)\nw.setWindowTitle(\"Physics Laws\")\nL1 = QLabel(\"Welcome To Physics Laws\",w,)\nL1.move(25,0)\nb1 = QPushButton(\"Archimedes Law\",w)\nb1.move(25,45)\nb1.clicked.connect(arch)\n\n\n\n\n\n\n\n\n\nw. show()\nsys.exit(app.exec_())\n</code></pre>\n"}, {"tags": ["python", "sql-server", "stored-procedures", "pyodbc", "execute"], "comments": [{"owner": {"reputation": 350, "user_id": 3116150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff9e75963274fbb3753fe8f73ed440d?s=128&d=identicon&r=PG", "display_name": "geekmuse", "link": "https://stackoverflow.com/users/3116150/geekmuse"}, "edited": false, "score": 0, "creation_date": 1536793535, "post_id": 52304511, "comment_id": 91556654, "body": "Does using a <code>connection.commit()</code> after everything&#39;s done have any effect?  Seeing an example of your code could also be helpful."}, {"owner": {"reputation": 87, "user_id": 5647008, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10156285520820635/picture?type=large", "display_name": "Lynn Bou Nassif", "link": "https://stackoverflow.com/users/5647008/lynn-bou-nassif"}, "reply_to_user": {"reputation": 350, "user_id": 3116150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff9e75963274fbb3753fe8f73ed440d?s=128&d=identicon&r=PG", "display_name": "geekmuse", "link": "https://stackoverflow.com/users/3116150/geekmuse"}, "edited": false, "score": 0, "creation_date": 1536793602, "post_id": 52304511, "comment_id": 91556665, "body": "@geekmuse I already have auto-commit set to true in the connection string. Wouldn&#39;t that be enough?"}, {"owner": {"reputation": 350, "user_id": 3116150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff9e75963274fbb3753fe8f73ed440d?s=128&d=identicon&r=PG", "display_name": "geekmuse", "link": "https://stackoverflow.com/users/3116150/geekmuse"}, "edited": false, "score": 0, "creation_date": 1536793673, "post_id": 52304511, "comment_id": 91556675, "body": "Yep, you should be covered in that regard, then."}, {"owner": {"reputation": 87, "user_id": 5647008, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10156285520820635/picture?type=large", "display_name": "Lynn Bou Nassif", "link": "https://stackoverflow.com/users/5647008/lynn-bou-nassif"}, "reply_to_user": {"reputation": 350, "user_id": 3116150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff9e75963274fbb3753fe8f73ed440d?s=128&d=identicon&r=PG", "display_name": "geekmuse", "link": "https://stackoverflow.com/users/3116150/geekmuse"}, "edited": false, "score": 0, "creation_date": 1536793746, "post_id": 52304511, "comment_id": 91556686, "body": "@geekmuse could there be something specific to add since this stored procedure takes no parameter and has no output set? (btw I have already set NO COUNT ON in the procedure)"}, {"owner": {"reputation": 350, "user_id": 3116150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff9e75963274fbb3753fe8f73ed440d?s=128&d=identicon&r=PG", "display_name": "geekmuse", "link": "https://stackoverflow.com/users/3116150/geekmuse"}, "edited": false, "score": 0, "creation_date": 1536794129, "post_id": 52304511, "comment_id": 91556759, "body": "I wouldn&#39;t think so, since it sounds like the procedure&#39;s being initiated successfully from your Python script.  Does the procedure work as expected if invoked directly?"}, {"owner": {"reputation": 87, "user_id": 5647008, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10156285520820635/picture?type=large", "display_name": "Lynn Bou Nassif", "link": "https://stackoverflow.com/users/5647008/lynn-bou-nassif"}, "reply_to_user": {"reputation": 350, "user_id": 3116150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff9e75963274fbb3753fe8f73ed440d?s=128&d=identicon&r=PG", "display_name": "geekmuse", "link": "https://stackoverflow.com/users/3116150/geekmuse"}, "edited": false, "score": 0, "creation_date": 1536794222, "post_id": 52304511, "comment_id": 91556775, "body": "@geekmuse Yes. If called in SQL, it works."}, {"owner": {"reputation": 350, "user_id": 3116150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff9e75963274fbb3753fe8f73ed440d?s=128&d=identicon&r=PG", "display_name": "geekmuse", "link": "https://stackoverflow.com/users/3116150/geekmuse"}, "edited": false, "score": 0, "creation_date": 1536794615, "post_id": 52304511, "comment_id": 91556868, "body": "Grasping at straws a bit, but, are you using the same user in both places?  If not, maybe the user from Python doesn&#39;t have insert/update privs?"}, {"owner": {"reputation": 87, "user_id": 5647008, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10156285520820635/picture?type=large", "display_name": "Lynn Bou Nassif", "link": "https://stackoverflow.com/users/5647008/lynn-bou-nassif"}, "reply_to_user": {"reputation": 350, "user_id": 3116150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff9e75963274fbb3753fe8f73ed440d?s=128&d=identicon&r=PG", "display_name": "geekmuse", "link": "https://stackoverflow.com/users/3116150/geekmuse"}, "edited": false, "score": 0, "creation_date": 1536794964, "post_id": 52304511, "comment_id": 91556938, "body": "I&#39;m using &quot;trusted connection = Yes&quot;. Wouldn&#39;t that take care of it?"}, {"owner": {"reputation": 2125, "user_id": 1373708, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2b3de95d8edad63df07d023e06f3ad90?s=128&d=identicon&r=PG", "display_name": "Harry", "link": "https://stackoverflow.com/users/1373708/harry"}, "edited": false, "score": 0, "creation_date": 1536794966, "post_id": 52304511, "comment_id": 91556939, "body": "You can use SQL profiler to see what is happening when you run the stored procedure from python.."}, {"owner": {"reputation": 87, "user_id": 5647008, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10156285520820635/picture?type=large", "display_name": "Lynn Bou Nassif", "link": "https://stackoverflow.com/users/5647008/lynn-bou-nassif"}, "reply_to_user": {"reputation": 2125, "user_id": 1373708, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2b3de95d8edad63df07d023e06f3ad90?s=128&d=identicon&r=PG", "display_name": "Harry", "link": "https://stackoverflow.com/users/1373708/harry"}, "edited": false, "score": 0, "creation_date": 1536795015, "post_id": 52304511, "comment_id": 91556959, "body": "@Harry How can I use SQL Profiler?"}, {"owner": {"reputation": 2125, "user_id": 1373708, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2b3de95d8edad63df07d023e06f3ad90?s=128&d=identicon&r=PG", "display_name": "Harry", "link": "https://stackoverflow.com/users/1373708/harry"}, "edited": false, "score": 0, "creation_date": 1536796824, "post_id": 52304511, "comment_id": 91557326, "body": "@LynnBouNassif If you use SQL Management Studio, click on Tools -&gt; SQL Server Profiler.. connect to the server you want.. have a look at this link <a href=\"https://dba.stackexchange.com/questions/29284/how-to-profile-stored-procedures\" title=\"how to profile stored procedures\">dba.stackexchange.com/questions/29284/&hellip;</a>"}, {"owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "edited": false, "score": 0, "creation_date": 1536798179, "post_id": 52304511, "comment_id": 91557582, "body": "I am unable to reproduce your issue using the test code <a href=\"https://pastebin.com/cR0RmHKJ\" rel=\"nofollow noreferrer\">here</a>. Please try it (tweaking as required) and see if it works for you."}, {"owner": {"reputation": 87, "user_id": 5647008, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10156285520820635/picture?type=large", "display_name": "Lynn Bou Nassif", "link": "https://stackoverflow.com/users/5647008/lynn-bou-nassif"}, "edited": false, "score": 0, "creation_date": 1536843197, "post_id": 52304511, "comment_id": 91575428, "body": "I added a snippet of what my code conceptually does (very simplified)"}, {"owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "edited": false, "score": 0, "creation_date": 1536862067, "post_id": 52304511, "comment_id": 91586279, "body": "That&#39;s a start. Now can you add some Python code to illustrate how you are invoking the SP? Essentially, you need to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (similar to my test code) that illustrates your problem."}], "owner": {"reputation": 87, "user_id": 5647008, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10156285520820635/picture?type=large", "display_name": "Lynn Bou Nassif", "link": "https://stackoverflow.com/users/5647008/lynn-bou-nassif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 258, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536842967, "creation_date": 1536792911, "last_edit_date": 1536842967, "question_id": 52304511, "link": "https://stackoverflow.com/questions/52304511/run-sql-server-stored-procedure-with-no-parameter-from-python-using-pyodbc", "title": "Run SQL-server stored procedure with no parameter from python using pyodbc", "body": "<p>I am having an issue with running a SQL-server stored procedure from python.</p>\n\n<p>Basically, what the the stored procedure does is take the values from an existing table A, do some operations and store these results in another existing table B. So this procedure has no parameter whatsoever, no input and no output. I am trying to run it from python using pyodbc and while the code does run with no error or exception, the table B (the one that is supposed to take the results) is not updated. </p>\n\n<p>I've tried using \"Call\" and \"execute\" but both didn't work. I've tried with other procedures that do have parameters to see if there's something wrong with my code or my connection, and it works perfectly. </p>\n\n<p>So it seems that my problem is only happening with procedures that have no parameter. Any idea how I can get it to work? </p>\n\n<p>Here is an (oversimplified) version of what the procedure is supposed to do : </p>\n\n<pre><code>ALTER proc [dbo].[sptest] as\nBEGIN \nSET NOCOUNT ON\n\ninsert into dbo.test (column1, column2)\nvalues (1, 2)\n\nEND \n</code></pre>\n\n<p>When I tried running this from Python, I ran into the same issue (no error but nothing happens). I suspect it's the actual \"INSERT\" from a remote place that is causing the issue.</p>\n\n<p>Any help or suggestion would be really appreciated. Thanks!</p>\n"}, {"tags": ["python", "django", "oracle"], "comments": [{"owner": {"reputation": 13134, "user_id": 9225671, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y1fpFhWva_w/AAAAAAAAAAI/AAAAAAAAAC8/weHLi_-bFj8/photo.jpg?sz=128", "display_name": "Ralf", "link": "https://stackoverflow.com/users/9225671/ralf"}, "edited": false, "score": 0, "creation_date": 1536840779, "post_id": 52304507, "comment_id": 91573965, "body": "Side note: I don&#39;t think <code>... = models.DateTimeField(max_length = 7)</code> is correct; the argument <code>max_length</code> usually goes only for <code>CharField</code>."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 7158053, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gZhPy7urKJQ/AAAAAAAAAAI/AAAAAAAAAsQ/BjBFVYBoeNs/photo.jpg?sz=128", "display_name": "Thobs More", "link": "https://stackoverflow.com/users/7158053/thobs-more"}, "edited": false, "score": 0, "creation_date": 1537135893, "post_id": 52313504, "comment_id": 91662000, "body": "The major problem is &quot;m.date_created &gt;= (SYSDATE - 13/24)&quot;"}, {"owner": {"reputation": 53, "user_id": 7158053, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gZhPy7urKJQ/AAAAAAAAAAI/AAAAAAAAAsQ/BjBFVYBoeNs/photo.jpg?sz=128", "display_name": "Thobs More", "link": "https://stackoverflow.com/users/7158053/thobs-more"}, "edited": false, "score": 0, "creation_date": 1537136759, "post_id": 52313504, "comment_id": 91662181, "body": "The code above produces a where clause below and it does not run manually: WHERE (&quot;MESSAGE&quot;.&quot;DATE_CREATED&quot; &gt;= 2018-09-15 12:22:34.762710 AND &quot;MESSAGE&quot;.&quot;DIRECTION&quot; = 0 AND &quot;MESSAGE&quot;.&quot;STATUS1&quot; = 0"}, {"owner": {"reputation": 53, "user_id": 7158053, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gZhPy7urKJQ/AAAAAAAAAAI/AAAAAAAAAsQ/BjBFVYBoeNs/photo.jpg?sz=128", "display_name": "Thobs More", "link": "https://stackoverflow.com/users/7158053/thobs-more"}, "edited": false, "score": 0, "creation_date": 1537137245, "post_id": 52313504, "comment_id": 91662260, "body": "I need the where clause to have (SYSDATE-3) in place of the date: WHERE (&quot;MESSAGE&quot;.&quot;DATE_CREATED&quot; &gt;= (SYSDATE-3) AND &quot;MESSAGE&quot;.&quot;DIRECTION&quot; = 0 AND &quot;MESSAGE&quot;.&quot;STATUS1&quot; = 0"}, {"owner": {"reputation": 53, "user_id": 7158053, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gZhPy7urKJQ/AAAAAAAAAAI/AAAAAAAAAsQ/BjBFVYBoeNs/photo.jpg?sz=128", "display_name": "Thobs More", "link": "https://stackoverflow.com/users/7158053/thobs-more"}, "edited": false, "score": 0, "creation_date": 1537138324, "post_id": 52313504, "comment_id": 91662432, "body": "How do I produce SYSDATE-2 from django&#39;s perspective"}, {"owner": {"reputation": 13134, "user_id": 9225671, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y1fpFhWva_w/AAAAAAAAAAI/AAAAAAAAAC8/weHLi_-bFj8/photo.jpg?sz=128", "display_name": "Ralf", "link": "https://stackoverflow.com/users/9225671/ralf"}, "reply_to_user": {"reputation": 53, "user_id": 7158053, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gZhPy7urKJQ/AAAAAAAAAAI/AAAAAAAAAsQ/BjBFVYBoeNs/photo.jpg?sz=128", "display_name": "Thobs More", "link": "https://stackoverflow.com/users/7158053/thobs-more"}, "edited": false, "score": 0, "creation_date": 1537182090, "post_id": 52313504, "comment_id": 91676600, "body": "@ThobsMore Is there a meaningful difference between using <code>SYSDATE - 13&#47;24</code> and <code>tz.now() - datetime.timedelta(hours=13)</code> like I suggested? I think both filter rows that are younger than 13 hours."}, {"owner": {"reputation": 53, "user_id": 7158053, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gZhPy7urKJQ/AAAAAAAAAAI/AAAAAAAAAsQ/BjBFVYBoeNs/photo.jpg?sz=128", "display_name": "Thobs More", "link": "https://stackoverflow.com/users/7158053/thobs-more"}, "edited": false, "score": 0, "creation_date": 1537205648, "post_id": 52313504, "comment_id": 91690666, "body": "It is working fine now, if I keep it as <code>tz.now() - datetime.timedelta(hours=13) </code> as you advise. Thanks @Ralf"}], "tags": [], "owner": {"reputation": 13134, "user_id": 9225671, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y1fpFhWva_w/AAAAAAAAAAI/AAAAAAAAAC8/weHLi_-bFj8/photo.jpg?sz=128", "display_name": "Ralf", "link": "https://stackoverflow.com/users/9225671/ralf"}, "is_accepted": true, "score": 2, "last_activity_date": 1536840693, "creation_date": 1536840693, "answer_id": 52313504, "question_id": 52304507, "link": "https://stackoverflow.com/questions/52304507/how-to-convert-a-query-to-django-orm-query/52313504#52313504", "title": "How to convert a query to django ORM Query", "body": "<p>If you want to use Djangos ORM to build that query, you should use the <a href=\"https://docs.djangoproject.com/en/2.1/ref/models/fields/#module-django.db.models.fields.related\" rel=\"nofollow noreferrer\">relationship fields</a>.</p>\n\n<p>First, I suggest you change the field to this:</p>\n\n<pre><code>QUEUE = models.ForeignKey(to=Queue, on_delete=models.PROTECT)\n</code></pre>\n\n<p>And then try something like this:</p>\n\n<pre><code>import datetime\nfrom django.utils import timezone as tz\n\nnow = tz.now()\nfilter_date = now - datetime.timedelta(hours=...something...)\n\nqs = Message.objects.filter(\n    STATUS1=0, DIRECTION=0, DATE_CREATED__gte=filter_date)\n</code></pre>\n\n<p>You may want to look into <a href=\"https://docs.djangoproject.com/en/2.1/ref/models/querysets/#annotate\" rel=\"nofollow noreferrer\"><code>QuerySet.annotate()</code></a>.</p>\n\n<p>This still needs to be tweeked to fit your exact query, but my answer should but you on the right course to figure it out.</p>\n"}], "owner": {"reputation": 53, "user_id": 7158053, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gZhPy7urKJQ/AAAAAAAAAAI/AAAAAAAAAsQ/BjBFVYBoeNs/photo.jpg?sz=128", "display_name": "Thobs More", "link": "https://stackoverflow.com/users/7158053/thobs-more"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 52313504, "answer_count": 1, "score": 0, "last_activity_date": 1536840693, "creation_date": 1536792903, "question_id": 52304507, "link": "https://stackoverflow.com/questions/52304507/how-to-convert-a-query-to-django-orm-query", "title": "How to convert a query to django ORM Query", "body": "<p>I am trying to figure out how I can convert the following query into a Djangon ORM query.\nI am using Django 2.1 Python 3.5 on windows, I am trying to run the query against a Oracle database</p>\n\n<pre><code>SELECT m.msg_no, q.seq, To_Char(m.date_created,'yyyy/mm/dd hh24:mi:ss'), To_Char(SYSDATE,'yyyy/mm/dd hh24:mi:ss'), q.name, Round((round(SYSDATE - m.date_created,6)*1440),1) AS msg_age  \nFROM message m\nINNER JOIN queue q ON m.queue = q.seq\nWHERE m.date_created &gt;= (SYSDATE - 13/24)\nAND m.status1 = 0 \nAND m.direction = 0;\n</code></pre>\n\n<p>I have two models, would like to know how to best, the tables Message and Queue are relate by  Queue primary key SEQ  and Message foreign key QUEUE, so SEQ ==  QUEUE in Message table:</p>\n\n<pre><code>from django.db import models\n\n# Create your models here.\nclass Queue(models.Model):\n  SEQ = models.IntegerField(primary_key=True,)\n  NAME = models.CharField(max_length = 50)\n  INPUT_DRIVER = models.IntegerField()\n  OUTPUT_DRIVER = models.IntegerField()\n  DIRECTION = models.IntegerField()\n  ORIGINATOR = models.IntegerField()\n  DESTINATOR = models.IntegerField()\n  PRIORITY = models.IntegerField()\n  INPUTEXEC = models.CharField(max_length = 100)\n  OUTPUTEXEC = models.CharField(max_length = 100)\n  USERID = models.CharField(max_length = 8)\n  TMSTAMP = models.DateTimeField(max_length = 7)\n  QUEUE_TYPE = models.CharField(max_length = 16)\n\n  class Meta:\n      db_table = \"QUEUE\"\n\n# \nclass Message(models.Model):\n  MSG_NO = models.IntegerField(primary_key=True,)\n  MSG_TYPE = models.IntegerField()\n  DIRECTION = models.IntegerField()\n  SESSION_NO = models.IntegerField()\n  SEQUENCE_NO = models.IntegerField()\n  REF_SESSION = models.IntegerField()\n  REF_SEQUENCE = models.IntegerField()\n  ACKTIME = models.DateTimeField(max_length = 7)\n  ACKNAKSTATUS = models.IntegerField()\n  PRIORITY = models.CharField(max_length = 1)\n  DELIVMONITOR = models.IntegerField()\n  OBSOLESCENCE = models.IntegerField()\n  DISPOSITION = models.IntegerField()\n  TRAILER = models.IntegerField()\n  BYPASSED = models.IntegerField()\n  RESPONSE_QUEUE = models.IntegerField()\n  SOURCE_QUEUE = models.IntegerField()\n  QUEUE = models.IntegerField()\n  QUEUE_PRIORITY = models.IntegerField()\n  DATE_CREATED = models.DateTimeField(max_length = 7)\n  DATE_ROUTED = models.DateTimeField(max_length = 7)\n  INPUT_FILE = models.IntegerField()\n  OUTPUT_FILE = models.IntegerField()\n  STATUS1 = models.IntegerField()\n  STATUS2 = models.IntegerField()\n  STATUS3 = models.IntegerField()\n  USERID = models.CharField(max_length = 8)\n  TMSTAMP = models.DateTimeField(max_length = 7)\n\n  class Meta:\n      db_table = \"MESSAGE\"\n</code></pre>\n"}, {"tags": ["java", "python", "windows", "ubuntu", "minecraft"], "comments": [{"owner": {"reputation": 443, "user_id": 8406095, "user_type": "registered", "profile_image": "https://graph.facebook.com/1625271317546282/picture?type=large", "display_name": "Kuba Chraba\u0144ski", "link": "https://stackoverflow.com/users/8406095/kuba-chraba%c5%84ski"}, "reply_to_user": {"reputation": 14254, "user_id": 1663383, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3aaf8438a71124d393af5af486a7e78b?s=128&d=identicon&r=PG", "display_name": "Draco18s no longer trusts SE", "link": "https://stackoverflow.com/users/1663383/draco18s-no-longer-trusts-se"}, "edited": false, "score": 0, "creation_date": 1536841834, "post_id": 52304492, "comment_id": 91574605, "body": "But I\u2019m writing it for my friends and as a challenge, there will be no authentication, access token and uuid is randomly generated, so there is no risk of losing any data (non-premium)"}, {"owner": {"reputation": 443, "user_id": 8406095, "user_type": "registered", "profile_image": "https://graph.facebook.com/1625271317546282/picture?type=large", "display_name": "Kuba Chraba\u0144ski", "link": "https://stackoverflow.com/users/8406095/kuba-chraba%c5%84ski"}, "reply_to_user": {"reputation": 14254, "user_id": 1663383, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3aaf8438a71124d393af5af486a7e78b?s=128&d=identicon&r=PG", "display_name": "Draco18s no longer trusts SE", "link": "https://stackoverflow.com/users/1663383/draco18s-no-longer-trusts-se"}, "edited": false, "score": 0, "creation_date": 1536863328, "post_id": 52304492, "comment_id": 91586852, "body": "Minecraft has an option to be run without valid access token, moreover this launcher is meant to be used by my friends only and not shared to the public"}, {"owner": {"reputation": 443, "user_id": 8406095, "user_type": "registered", "profile_image": "https://graph.facebook.com/1625271317546282/picture?type=large", "display_name": "Kuba Chraba\u0144ski", "link": "https://stackoverflow.com/users/8406095/kuba-chraba%c5%84ski"}, "reply_to_user": {"reputation": 14254, "user_id": 1663383, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3aaf8438a71124d393af5af486a7e78b?s=128&d=identicon&r=PG", "display_name": "Draco18s no longer trusts SE", "link": "https://stackoverflow.com/users/1663383/draco18s-no-longer-trusts-se"}, "edited": false, "score": 0, "creation_date": 1536864391, "post_id": 52304492, "comment_id": 91587353, "body": "Moreover they could use any other working nonpremium launcher like SK, so the only reason why I\u2019m writing this one is convinience, because all non premium launchers are bloated with ads and unneccessary options"}, {"owner": {"reputation": 443, "user_id": 8406095, "user_type": "registered", "profile_image": "https://graph.facebook.com/1625271317546282/picture?type=large", "display_name": "Kuba Chraba\u0144ski", "link": "https://stackoverflow.com/users/8406095/kuba-chraba%c5%84ski"}, "reply_to_user": {"reputation": 14254, "user_id": 1663383, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3aaf8438a71124d393af5af486a7e78b?s=128&d=identicon&r=PG", "display_name": "Draco18s no longer trusts SE", "link": "https://stackoverflow.com/users/1663383/draco18s-no-longer-trusts-se"}, "edited": false, "score": 0, "creation_date": 1536864494, "post_id": 52304492, "comment_id": 91587402, "body": "To sum up if u want to give advices not connected with the main topic, then u r wasting time"}, {"owner": {"reputation": 443, "user_id": 8406095, "user_type": "registered", "profile_image": "https://graph.facebook.com/1625271317546282/picture?type=large", "display_name": "Kuba Chraba\u0144ski", "link": "https://stackoverflow.com/users/8406095/kuba-chraba%c5%84ski"}, "reply_to_user": {"reputation": 14254, "user_id": 1663383, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3aaf8438a71124d393af5af486a7e78b?s=128&d=identicon&r=PG", "display_name": "Draco18s no longer trusts SE", "link": "https://stackoverflow.com/users/1663383/draco18s-no-longer-trusts-se"}, "edited": false, "score": 0, "creation_date": 1536873447, "post_id": 52304492, "comment_id": 91591471, "body": "Ok so if u need a deeper explanation then I will provide it. They own a premium account but as u mentioned custom launcher is a source of leakage and we also to want to use new nicknames as the accounts where bought 6 yrs ago. Furthermore it is going to be a modpack, so using a custom launcher will make it easier for me to send them updates (it&#39;s already built compares hashes and downloads outdated files). So pls stop posting trash in the comments because people like u make forums useless. It&#39;s my last reply to u, no more time wasted. Have a nice day!! ;))"}, {"owner": {"reputation": 443, "user_id": 8406095, "user_type": "registered", "profile_image": "https://graph.facebook.com/1625271317546282/picture?type=large", "display_name": "Kuba Chraba\u0144ski", "link": "https://stackoverflow.com/users/8406095/kuba-chraba%c5%84ski"}, "reply_to_user": {"reputation": 14254, "user_id": 1663383, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3aaf8438a71124d393af5af486a7e78b?s=128&d=identicon&r=PG", "display_name": "Draco18s no longer trusts SE", "link": "https://stackoverflow.com/users/1663383/draco18s-no-longer-trusts-se"}, "edited": false, "score": 0, "creation_date": 1536873960, "post_id": 52304492, "comment_id": 91591636, "body": "PS minecraft can be played easily without paying that is why Mojang divided gameplay into &quot;online mode&quot;, and &quot;offline mode&quot;, customers pay for security, access to realms and premium servers, skins and always convenient and  available updates"}], "answers": [{"tags": [], "owner": {"reputation": 443, "user_id": 8406095, "user_type": "registered", "profile_image": "https://graph.facebook.com/1625271317546282/picture?type=large", "display_name": "Kuba Chraba\u0144ski", "link": "https://stackoverflow.com/users/8406095/kuba-chraba%c5%84ski"}, "is_accepted": true, "score": 2, "last_activity_date": 1537574577, "creation_date": 1537574577, "answer_id": 52452320, "question_id": 52304492, "link": "https://stackoverflow.com/questions/52304492/error-could-not-find-or-load-main-class-net-minecraft-launchwrapper-launch-when/52452320#52452320", "title": "Error: Could not find or load main class net.minecraft.launchwrapper.Launch when launching Minecraft 1.12.2 with Forge", "body": "<p>Ok, actually, on Windows the classpath separator is ; not :\nReplacing separator fixes this issue</p>\n"}], "owner": {"reputation": 443, "user_id": 8406095, "user_type": "registered", "profile_image": "https://graph.facebook.com/1625271317546282/picture?type=large", "display_name": "Kuba Chraba\u0144ski", "link": "https://stackoverflow.com/users/8406095/kuba-chraba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9397, "favorite_count": 0, "accepted_answer_id": 52452320, "answer_count": 1, "score": 2, "last_activity_date": 1560232762, "creation_date": 1536792756, "last_edit_date": 1536797583, "question_id": 52304492, "link": "https://stackoverflow.com/questions/52304492/error-could-not-find-or-load-main-class-net-minecraft-launchwrapper-launch-when", "title": "Error: Could not find or load main class net.minecraft.launchwrapper.Launch when launching Minecraft 1.12.2 with Forge", "body": "<p>I've written a launcher for Minecraft 1.12.2 in Python, which just prepares a command and runs it using subprocess.</p>\n\n<p>This is the command formed on Linux Ubuntu:</p>\n\n<pre><code>#!/usr/bin/env bash\n\njava -Xmx4G -XX:+UnlockExperimentalVMOptions -XX:+UseG1GC -XX:G1NewSizePercent=20 -XX:G1ReservePercent=20 -XX:MaxGCPauseMillis=50 -XX:G1HeapRegionSize=32M -Djava.library.path=/tmp/tmp2dl6pidh -cp /home/kuba/Desktop/launch/package/libraries/org/apache/maven/maven-artifact/3.5.3/maven-artifact-3.5.3.jar:/home/kuba/Desktop/launch/package/libraries/org/apache/httpcomponents/httpcore/4.3.2/httpcore-4.3.2.jar:/home/kuba/Desktop/launch/package/libraries/org/apache/httpcomponents/httpclient/4.3.3/httpclient-4.3.3.jar:/home/kuba/Desktop/launch/package/libraries/org/apache/logging/log4j/log4j-core/2.8.1/log4j-core-2.8.1.jar:/home/kuba/Desktop/launch/package/libraries/org/apache/logging/log4j/log4j-api/2.8.1/log4j-api-2.8.1.jar:/home/kuba/Desktop/launch/package/libraries/org/apache/commons/commons-compress/1.8.1/commons-compress-1.8.1.jar:/home/kuba/Desktop/launch/package/libraries/org/apache/commons/commons-lang3/3.5/commons-lang3-3.5.jar:/home/kuba/Desktop/launch/package/libraries/org/lwjgl/lwjgl/lwjgl_util/2.9.4-nightly-20150209/lwjgl_util-2.9.4-nightly-20150209.jar:/home/kuba/Desktop/launch/package/libraries/org/lwjgl/lwjgl/lwjgl-platform/2.9.4-nightly-20150209/lwjgl-platform-2.9.4-nightly-20150209-natives-linux.jar:/home/kuba/Desktop/launch/package/libraries/org/lwjgl/lwjgl/lwjgl/2.9.4-nightly-20150209/lwjgl-2.9.4-nightly-20150209.jar:/home/kuba/Desktop/launch/package/libraries/org/scala-lang/scala-xml_2.11/1.0.2/scala-xml_2.11-1.0.2.jar:/home/kuba/Desktop/launch/package/libraries/org/scala-lang/scala-compiler/2.11.1/scala-compiler-2.11.1.jar:/home/kuba/Desktop/launch/package/libraries/org/scala-lang/scala-reflect/2.11.1/scala-reflect-2.11.1.jar:/home/kuba/Desktop/launch/package/libraries/org/scala-lang/scala-swing_2.11/1.0.1/scala-swing_2.11-1.0.1.jar:/home/kuba/Desktop/launch/package/libraries/org/scala-lang/scala-parser-combinators_2.11/1.0.1/scala-parser-combinators_2.11-1.0.1.jar:/home/kuba/Desktop/launch/package/libraries/org/scala-lang/scala-actors-migration_2.11/1.1.0/scala-actors-migration_2.11-1.1.0.jar:/home/kuba/Desktop/launch/package/libraries/org/scala-lang/scala-library/2.11.1/scala-library-2.11.1.jar:/home/kuba/Desktop/launch/package/libraries/org/scala-lang/plugins/scala-continuations-plugin_2.11.1/1.0.2/scala-continuations-plugin_2.11.1-1.0.2.jar:/home/kuba/Desktop/launch/package/libraries/org/scala-lang/plugins/scala-continuations-library_2.11/1.0.2/scala-continuations-library_2.11-1.0.2.jar:/home/kuba/Desktop/launch/package/libraries/org/ow2/asm/asm-all/5.2/asm-all-5.2.jar:/home/kuba/Desktop/launch/package/libraries/it/unimi/dsi/fastutil/7.1.0/fastutil-7.1.0.jar:/home/kuba/Desktop/launch/package/libraries/commons-codec/commons-codec/1.10/commons-codec-1.10.jar:/home/kuba/Desktop/launch/package/libraries/oshi-project/oshi-core/1.1/oshi-core-1.1.jar:/home/kuba/Desktop/launch/package/libraries/commons-logging/commons-logging/1.1.3/commons-logging-1.1.3.jar:/home/kuba/Desktop/launch/package/libraries/commons-io/commons-io/2.5/commons-io-2.5.jar:/home/kuba/Desktop/launch/package/libraries/net/sf/jopt-simple/jopt-simple/5.0.3/jopt-simple-5.0.3.jar:/home/kuba/Desktop/launch/package/libraries/net/sf/trove4j/trove4j/3.0.3/trove4j-3.0.3.jar:/home/kuba/Desktop/launch/package/libraries/net/java/jinput/jinput/2.0.5/jinput-2.0.5.jar:/home/kuba/Desktop/launch/package/libraries/net/java/jinput/jinput-platform/2.0.5/jinput-platform-2.0.5-natives-linux.jar:/home/kuba/Desktop/launch/package/libraries/net/java/dev/jna/platform/3.4.0/platform-3.4.0.jar:/home/kuba/Desktop/launch/package/libraries/net/java/dev/jna/jna/4.4.0/jna-4.4.0.jar:/home/kuba/Desktop/launch/package/libraries/net/java/jutils/jutils/1.0.0/jutils-1.0.0.jar:/home/kuba/Desktop/launch/package/libraries/net/minecraftforge/forge/1.12.2-14.23.4.2705/forge-1.12.2-14.23.4.2705.jar:/home/kuba/Desktop/launch/package/libraries/net/minecraft/launchwrapper/1.12/launchwrapper-1.12.jar:/home/kuba/Desktop/launch/package/libraries/lzma/lzma/0.0.1/lzma-0.0.1.jar:/home/kuba/Desktop/launch/package/libraries/io/netty/netty-all/4.1.9.Final/netty-all-4.1.9.Final.jar:/home/kuba/Desktop/launch/package/libraries/java3d/vecmath/1.5.2/vecmath-1.5.2.jar:/home/kuba/Desktop/launch/package/libraries/com/google/guava/guava/21.0/guava-21.0.jar:/home/kuba/Desktop/launch/package/libraries/com/google/code/gson/gson/2.8.0/gson-2.8.0.jar:/home/kuba/Desktop/launch/package/libraries/com/paulscode/codecwav/20101023/codecwav-20101023.jar:/home/kuba/Desktop/launch/package/libraries/com/paulscode/soundsystem/20120107/soundsystem-20120107.jar:/home/kuba/Desktop/launch/package/libraries/com/paulscode/librarylwjglopenal/20100824/librarylwjglopenal-20100824.jar:/home/kuba/Desktop/launch/package/libraries/com/paulscode/libraryjavasound/20101123/libraryjavasound-20101123.jar:/home/kuba/Desktop/launch/package/libraries/com/paulscode/codecjorbis/20101023/codecjorbis-20101023.jar:/home/kuba/Desktop/launch/package/libraries/com/typesafe/config/1.2.1/config-1.2.1.jar:/home/kuba/Desktop/launch/package/libraries/com/typesafe/akka/akka-actor_2.11/2.3.3/akka-actor_2.11-2.3.3.jar:/home/kuba/Desktop/launch/package/libraries/com/ibm/icu/icu4j-core-mojang/51.2/icu4j-core-mojang-51.2.jar:/home/kuba/Desktop/launch/package/libraries/com/mojang/authlib/1.5.25/authlib-1.5.25.jar:/home/kuba/Desktop/launch/package/libraries/com/mojang/text2speech/1.10.3/text2speech-1.10.3-natives-linux.jar:/home/kuba/Desktop/launch/package/libraries/com/mojang/text2speech/1.10.3/text2speech-1.10.3.jar:/home/kuba/Desktop/launch/package/libraries/com/mojang/patchy/1.1/patchy-1.1.jar:/home/kuba/Desktop/launch/package/libraries/com/mojang/realms/1.10.22/realms-1.10.22.jar:/home/kuba/Desktop/launch/package/libraries/jline/jline/2.13/jline-2.13.jar:/home/kuba/Desktop/launch/package/versions/1.12.2/1.12.2.jar net.minecraft.launchwrapper.Launch --username kuba --version 1.12.2 --gameDir /home/kuba/Desktop/launch/package --assetsDir /home/kuba/Desktop/launch/package/assets --assetIndex 1.12 --uuid c8db861e4ea74ebba869459e68de5e15 --accessToken 6cf19a22fac84ebfa62ba697b899bd68 --userType offline --tweakClass net.minecraftforge.fml.common.launcher.FMLTweaker --versionType Forge\n</code></pre>\n\n<p>This is the command formed on Windows 10 Home:</p>\n\n<pre><code>@echo off\n\njava -Xmx4G -XX:+UnlockExperimentalVMOptions -XX:+UseG1GC -XX:G1NewSizePercent=20 -XX:G1ReservePercent=20 -XX:MaxGCPauseMillis=50 -XX:G1HeapRegionSize=32M -Djava.library.path=C:\\Users\\kubac\\AppData\\Local\\Temp\\tmpsmseu5hx -cp C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\com\\google\\code\\gson\\gson\\2.8.0\\gson-2.8.0.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\com\\google\\guava\\guava\\21.0\\guava-21.0.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\com\\ibm\\icu\\icu4j-core-mojang\\51.2\\icu4j-core-mojang-51.2.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\com\\mojang\\authlib\\1.5.25\\authlib-1.5.25.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\com\\mojang\\patchy\\1.1\\patchy-1.1.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\com\\mojang\\realms\\1.10.22\\realms-1.10.22.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\com\\mojang\\text2speech\\1.10.3\\text2speech-1.10.3-natives-windows.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\com\\mojang\\text2speech\\1.10.3\\text2speech-1.10.3.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\com\\paulscode\\codecjorbis\\20101023\\codecjorbis-20101023.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\com\\paulscode\\codecwav\\20101023\\codecwav-20101023.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\com\\paulscode\\libraryjavasound\\20101123\\libraryjavasound-20101123.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\com\\paulscode\\librarylwjglopenal\\20100824\\librarylwjglopenal-20100824.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\com\\paulscode\\soundsystem\\20120107\\soundsystem-20120107.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\com\\typesafe\\akka\\akka-actor_2.11\\2.3.3\\akka-actor_2.11-2.3.3.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\com\\typesafe\\config\\1.2.1\\config-1.2.1.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\commons-codec\\commons-codec\\1.10\\commons-codec-1.10.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\commons-io\\commons-io\\2.5\\commons-io-2.5.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\commons-logging\\commons-logging\\1.1.3\\commons-logging-1.1.3.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\io\\netty\\netty-all\\4.1.9.Final\\netty-all-4.1.9.Final.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\it\\unimi\\dsi\\fastutil\\7.1.0\\fastutil-7.1.0.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\java3d\\vecmath\\1.5.2\\vecmath-1.5.2.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\jline\\jline\\2.13\\jline-2.13.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\lzma\\lzma\\0.0.1\\lzma-0.0.1.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\net\\java\\dev\\jna\\jna\\4.4.0\\jna-4.4.0.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\net\\java\\dev\\jna\\platform\\3.4.0\\platform-3.4.0.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\net\\java\\jinput\\jinput\\2.0.5\\jinput-2.0.5.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\net\\java\\jinput\\jinput-platform\\2.0.5\\jinput-platform-2.0.5-natives-windows.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\net\\java\\jutils\\jutils\\1.0.0\\jutils-1.0.0.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\net\\minecraft\\launchwrapper\\1.12\\launchwrapper-1.12.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\net\\minecraftforge\\forge\\1.12.2-14.23.4.2705\\forge-1.12.2-14.23.4.2705.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\net\\sf\\jopt-simple\\jopt-simple\\5.0.3\\jopt-simple-5.0.3.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\net\\sf\\trove4j\\trove4j\\3.0.3\\trove4j-3.0.3.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\org\\apache\\commons\\commons-compress\\1.8.1\\commons-compress-1.8.1.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\org\\apache\\commons\\commons-lang3\\3.5\\commons-lang3-3.5.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\org\\apache\\httpcomponents\\httpclient\\4.3.3\\httpclient-4.3.3.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\org\\apache\\httpcomponents\\httpcore\\4.3.2\\httpcore-4.3.2.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\org\\apache\\logging\\log4j\\log4j-api\\2.8.1\\log4j-api-2.8.1.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\org\\apache\\logging\\log4j\\log4j-core\\2.8.1\\log4j-core-2.8.1.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\org\\apache\\maven\\maven-artifact\\3.5.3\\maven-artifact-3.5.3.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\org\\lwjgl\\lwjgl\\lwjgl\\2.9.4-nightly-20150209\\lwjgl-2.9.4-nightly-20150209.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\org\\lwjgl\\lwjgl\\lwjgl-platform\\2.9.4-nightly-20150209\\lwjgl-platform-2.9.4-nightly-20150209-natives-windows.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\org\\lwjgl\\lwjgl\\lwjgl_util\\2.9.4-nightly-20150209\\lwjgl_util-2.9.4-nightly-20150209.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\org\\ow2\\asm\\asm-all\\5.2\\asm-all-5.2.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\org\\scala-lang\\plugins\\scala-continuations-library_2.11\\1.0.2\\scala-continuations-library_2.11-1.0.2.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\org\\scala-lang\\plugins\\scala-continuations-plugin_2.11.1\\1.0.2\\scala-continuations-plugin_2.11.1-1.0.2.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\org\\scala-lang\\scala-actors-migration_2.11\\1.1.0\\scala-actors-migration_2.11-1.1.0.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\org\\scala-lang\\scala-compiler\\2.11.1\\scala-compiler-2.11.1.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\org\\scala-lang\\scala-library\\2.11.1\\scala-library-2.11.1.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\org\\scala-lang\\scala-parser-combinators_2.11\\1.0.1\\scala-parser-combinators_2.11-1.0.1.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\org\\scala-lang\\scala-reflect\\2.11.1\\scala-reflect-2.11.1.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\org\\scala-lang\\scala-swing_2.11\\1.0.1\\scala-swing_2.11-1.0.1.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\org\\scala-lang\\scala-xml_2.11\\1.0.2\\scala-xml_2.11-1.0.2.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\libraries\\oshi-project\\oshi-core\\1.1\\oshi-core-1.1.jar:C:\\Users\\kubac\\Desktop\\launch\\package\\versions\\1.12.2\\1.12.2.jar net.minecraft.launchwrapper.Launch --username kuba --version 1.12.2 --gameDir C:\\Users\\kubac\\Desktop\\launch\\package --assetsDir C:\\Users\\kubac\\Desktop\\launch\\package\\assets --assetIndex 1.12 --uuid 1e12c9641d68419c8e0ef3c43adc9678 --accessToken c270917a4aa44267859663b52ebdf07f --userType offline --tweakClass net.minecraftforge.fml.common.launcher.FMLTweaker --versionType Forge\n</code></pre>\n\n<p>PROBLEM:\nUbuntu version executes perfectly, without any complain, but\nWindows version says:</p>\n\n<pre><code>Error: Could not find or load main class net.minecraft.launchwrapper.Launch\n</code></pre>\n\n<p>and it does not start at all.</p>\n\n<p>As u see Ubuntu and Windows commands are almost identical.</p>\n\n<p>The minecraft installation (used on both Ubuntu and Windows) that I'm trying to start, comes from Windows (generated by official launcher, forge is installed, I only replace libraries marked as natives because they are platform dependent), and it can be started using official launcher on both platforms without any problems, so I assume that there is no issue with missing or corrupted minecraft files. Moreover I was able to start it using my custom launcher but only on Ubuntu, as I wrote above.</p>\n\n<p>Do u guys have any suggestions on what am I doing wrong?</p>\n\n<p>PS I've tried to start Vanilla Minecraft using my custom launcher and the issue is exactly the same, it works on Ubuntu, but fails on Windows with the same error (ofc it mentions vanilla class instead)</p>\n\n<p>EDIT I do not provide the Python code as it is long, and it just extracts natives to a temporary folder and forms the command to launch minecraft, which could be just written by hand and pasted into a script and executed.</p>\n"}, {"tags": ["python", "nginx"], "comments": [{"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1536792495, "post_id": 52304452, "comment_id": 91556446, "body": "Are you actually trying to issue a certificate for example.com, or did you sanitize the output of your command? Because I doubt you control example.com."}, {"owner": {"reputation": 625, "user_id": 7381054, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1292850170757872/picture?type=large", "display_name": "Jota", "link": "https://stackoverflow.com/users/7381054/jota"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1536792555, "post_id": 52304452, "comment_id": 91556463, "body": "I sanitized the output."}], "owner": {"reputation": 625, "user_id": 7381054, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1292850170757872/picture?type=large", "display_name": "Jota", "link": "https://stackoverflow.com/users/7381054/jota"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 249, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536792436, "creation_date": 1536792436, "question_id": 52304452, "link": "https://stackoverflow.com/questions/52304452/lets-encrypt-failed-authorization-procedure", "title": "Let&#39;s encrypt Failed authorization procedure", "body": "<p>I'm using Debian 9 and NGINX to deploy my app Django.\nWhen I type:</p>\n\n<p><code>sudo certbot --nginx -d example.com -d www.example.com</code></p>\n\n<p>I get the next error:</p>\n\n<pre><code>Failed authorization procedure. example.com (http-01): \nurn:acme:error:tls :: The server experienced a TLS error during domain \nverification :: Fetching https://example.com/.well-known/acme- \nchallenge/H9WJVzPYJ93jewGJjkUFFKQJBJ8-YT7t9z-Sw_PQQUg: remote error: tls: \ninternal error\n\nIMPORTANT NOTES:\n- The following errors were reported by the server:\n\nDomain: example.com\nType:   tls\nDetail: Fetching\nhttps://example.com/.well-known/acme- \nchallenge/H9WJVzPYJ93jewGJjkUFFKQJBJ8-YT7t9z-Sw_PQQUg:\nremote error: tls: internal error\n\nTo fix these errors, please make sure that your domain name was\nentered correctly and the DNS A/AAAA record(s) for that domain\ncontain(s) the right IP address. Additionally, please check that\nyou have an up-to-date TLS configuration that allows the server to\ncommunicate with the Certbot client.\n</code></pre>\n\n<p>I do not know what I'm doing wrong...</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 4015188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xyIrP.png?s=128&g=1", "display_name": "mviana", "link": "https://stackoverflow.com/users/4015188/mviana"}, "is_accepted": false, "score": 0, "last_activity_date": 1536793523, "last_edit_date": 1592644375, "creation_date": 1536793523, "answer_id": 52304577, "question_id": 52304411, "link": "https://stackoverflow.com/questions/52304411/how-to-add-a-stopping-condition-for-jacobian-matrix/52304577#52304577", "title": "How to add a stopping condition for Jacobian Matrix?", "body": "<p>You could add another condition to your while loop, so when it reaches your error threshold it stops.</p>\n<blockquote>\n<pre><code>def jacobi(m,numiter=100, error_threshold = 1e-4):\n\n  #Number of rows determins the number of variables\n  numvars = m.shape[0]\n\n  #construct array for final iterations\n  history = np.zeros((numvars,numiter))\n  i = 1\n  err = 10*error_threshold\n  while(i &lt; numiter and err &gt; error_threshold): #Loop for numiter and error threshold\n\n      for v in range(numvars): # Loop over all variables\n          current = m[v,numvars] # Start with left hand side (augmented side of matrix)\n          for col in range(numvars): #Loop over columns\n              if v != col: # Don't count colume for current variable\n                  current = current - (m[v,col]*history[col, i-1]) #subtract other guesses form previous timestep\n          current = current/m[v,v] #divide by current variable coefficent\n\n          history[v,i] = current #Add this answer to the rest\n      #check error here. In this case the maximum error\n      if i &gt; 1:\n        err = max((history[:,i] - history[:,i-1])/history[:,i-1])\n\n      i = i + 1 #iterate\n\n\n\n  #plot each variable\n  for v in range(numvars):\n    plt.plot(history[v,: i]);\nreturn history[:,i-1]\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 21, "user_id": 10355684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45370acf78ee9324f4791c2d9ca8c8ed?s=128&d=identicon&r=PG&f=1", "display_name": "M.Ash", "link": "https://stackoverflow.com/users/10355684/m-ash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536793523, "creation_date": 1536792112, "last_edit_date": 1536792503, "question_id": 52304411, "link": "https://stackoverflow.com/questions/52304411/how-to-add-a-stopping-condition-for-jacobian-matrix", "title": "How to add a stopping condition for Jacobian Matrix?", "body": "<pre><code>def jacobi(m,numiter=100):\n\n    #Number of rows determins the number of variables\n    numvars = m.shape[0]\n\n    #construct array for final iterations\n    history = np.zeros((numvars,numiter))\n    i = 1\n    while(i &lt; numiter): #Loop for numiter\n\n        for v in range(numvars): # Loop over all variables\n            current = m[v,numvars] # Start with left hand side (augmented side of matrix)\n            for col in range(numvars): #Loop over columns\n                if v != col: # Don't count colume for current variable\n                    current = current - (m[v,col]*history[col, i-1]) #subtract other guesses form previous timestep\n            current = current/m[v,v] #divide by current variable coefficent\n\n            history[v,i] = current #Add this answer to the rest\n        i = i + 1 #iterate\n\n\n    #plot each variable\n    for v in range(numvars):\n        plt.plot(history[v,: i]);\n    return history[:,i-1]\n</code></pre>\n\n<p>I have this code that calculates Jacobian method. How do I add a stopping condition for when the solutions converge? i.e. the values for the current iteration have changed less than some threshold <code>e</code> from the values for the previous iteration.</p>\n\n<p>The threshold <code>e</code> will be an input to the function and the default value to 0.00001</p>\n"}, {"tags": ["python", "python-3.x", "signal-processing", "moving-average"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 10187019, "user_type": "registered", "profile_image": "https://graph.facebook.com/1378250415530367/picture?type=large", "display_name": "Cesar Abascal", "link": "https://stackoverflow.com/users/10187019/cesar-abascal"}, "edited": false, "score": 0, "creation_date": 1536857200, "post_id": 52304541, "comment_id": 91583861, "body": "Thanks for your answer, but I&#39;m trying to implement it without using libraries. It can be good to implement in other languages."}], "tags": [], "owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "is_accepted": true, "score": 2, "last_activity_date": 1536798636, "last_edit_date": 1536798636, "creation_date": 1536793170, "answer_id": 52304541, "question_id": 52304384, "link": "https://stackoverflow.com/questions/52304384/how-to-implement-a-good-moving-average-in-python/52304541#52304541", "title": "How to implement a good moving average in Python", "body": "<p>You could just use Pandas and specify <code>center=True</code> for your moving average.</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\n\nnp.random.seed(0)\n\ns = pd.Series(np.random.randn(7)).round(1)\nmoving_avg = s.rolling(window=3).mean(center=True)\n&gt;&gt;&gt; pd.concat([s, moving_avg.round(2)], axis=1).rename(columns={0: 'signal', 1: 'MA'})\n   signal    MA\n0     1.8   NaN\n1     0.4  1.07  # 1.07 = (1.8 + 0.4 + 1.0) / 3\n2     1.0  1.20  # 1.20 = (0.4 + 1.0 + 2.2) / 3\n3     2.2  1.70\n4     1.9  1.03\n5    -1.0  0.63\n6     1.0   NaN\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 10187019, "user_type": "registered", "profile_image": "https://graph.facebook.com/1378250415530367/picture?type=large", "display_name": "Cesar Abascal", "link": "https://stackoverflow.com/users/10187019/cesar-abascal"}, "edited": false, "score": 0, "creation_date": 1536857205, "post_id": 52307057, "comment_id": 91583865, "body": "Thanks for your answer, but I&#39;m trying to implement it without using libraries. It can be good to implement in other languages."}], "tags": [], "owner": {"reputation": 491, "user_id": 8443371, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2Uc40Hai2U0/AAAAAAAAAAI/AAAAAAAAAAA/zTkPRnZJTXs/photo.jpg?sz=128", "display_name": "Gideon Kogan", "link": "https://stackoverflow.com/users/8443371/gideon-kogan"}, "is_accepted": false, "score": 0, "last_activity_date": 1536860307, "last_edit_date": 1536860307, "creation_date": 1536815789, "answer_id": 52307057, "question_id": 52304384, "link": "https://stackoverflow.com/questions/52304384/how-to-implement-a-good-moving-average-in-python/52307057#52307057", "title": "How to implement a good moving average in Python", "body": "<p>At the time I have found the following code:</p>\n\n<pre><code>def moving_average(samples, wind_len=1000):\n    wind_len = int(wind_len)\n    cumsum_samples = np.cumsum(samples)\n    cumsum_diff = cumsum_samples[wind_len:] - cumsum_samples[:-wind_len]\n    samples_average = cumsum_diff / float(wind_len)\n    return samples_average\n\ndef my_cumsum(samples):\n    for ind in range(1, len(samples)):\n       samples[ind] = samples[ind] + samples[ind - 1]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 10187019, "user_type": "registered", "profile_image": "https://graph.facebook.com/1378250415530367/picture?type=large", "display_name": "Cesar Abascal", "link": "https://stackoverflow.com/users/10187019/cesar-abascal"}, "edited": false, "score": 0, "creation_date": 1536857211, "post_id": 52313946, "comment_id": 91583867, "body": "Thanks for your answer, but I&#39;m trying to implement it without using libraries. It can be good to implement in other languages."}, {"owner": {"reputation": 871, "user_id": 8357969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d947836b34ed6238d065fd26bf75662?s=128&d=identicon&r=PG&f=1", "display_name": "fstop_22", "link": "https://stackoverflow.com/users/8357969/fstop-22"}, "reply_to_user": {"reputation": 69, "user_id": 10187019, "user_type": "registered", "profile_image": "https://graph.facebook.com/1378250415530367/picture?type=large", "display_name": "Cesar Abascal", "link": "https://stackoverflow.com/users/10187019/cesar-abascal"}, "edited": false, "score": 0, "creation_date": 1536858769, "post_id": 52313946, "comment_id": 91584670, "body": "It looks like you are already using numpy.  Scipy includes numpy with additional packages thrown in for various signal and numeric prcessing functions."}, {"owner": {"reputation": 1749, "user_id": 3442409, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0254d3da596f23e170b2c335cb0046b4?s=128&d=identicon&r=PG&f=1", "display_name": "mac13k", "link": "https://stackoverflow.com/users/3442409/mac13k"}, "edited": false, "score": 0, "creation_date": 1580571235, "post_id": 52313946, "comment_id": 106144885, "body": "If you want to implement the moving average this way, you have to set <code>a</code> to the length of <code>b</code>, so the window sum is divided and the result is the average, otherwise you end up multiplying the input by the window length."}, {"owner": {"reputation": 1749, "user_id": 3442409, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0254d3da596f23e170b2c335cb0046b4?s=128&d=identicon&r=PG&f=1", "display_name": "mac13k", "link": "https://stackoverflow.com/users/3442409/mac13k"}, "edited": false, "score": 0, "creation_date": 1580571435, "post_id": 52313946, "comment_id": 106144929, "body": "I have just made the edit. You can plot the previous version vs. the corrected one to see the difference."}], "tags": [], "owner": {"reputation": 871, "user_id": 8357969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d947836b34ed6238d065fd26bf75662?s=128&d=identicon&r=PG&f=1", "display_name": "fstop_22", "link": "https://stackoverflow.com/users/8357969/fstop-22"}, "is_accepted": false, "score": 1, "last_activity_date": 1580871944, "last_edit_date": 1580871944, "creation_date": 1536842388, "answer_id": 52313946, "question_id": 52304384, "link": "https://stackoverflow.com/questions/52304384/how-to-implement-a-good-moving-average-in-python/52313946#52313946", "title": "How to implement a good moving average in Python", "body": "<p>You could use a filter with taps of all 1</p>\n\n<pre><code>import scipy as sp\nimport scipy.signal as sig\n\nh = sp.ones(10)/10\ny = sig.lfilter(h, 1, x)\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 10187019, "user_type": "registered", "profile_image": "https://graph.facebook.com/1378250415530367/picture?type=large", "display_name": "Cesar Abascal", "link": "https://stackoverflow.com/users/10187019/cesar-abascal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 52304541, "answer_count": 3, "score": 1, "last_activity_date": 1580871944, "creation_date": 1536791937, "question_id": 52304384, "link": "https://stackoverflow.com/questions/52304384/how-to-implement-a-good-moving-average-in-python", "title": "How to implement a good moving average in Python", "body": "<p><br>\nI'm doing some research and I'm implementing a moving average in Python based on this mathematical expression:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ADHIx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ADHIx.png\" alt=\"Moving Average for Peak Detection\"></a>\nWhere: n = sample and W1 = Window</p>\n\n<p>I implemented like that:</p>\n\n<pre><code>def movingAverage(signal, window):\n\n   sum = 0\n   mAver = []\n   k = int((window-1)/2)\n\n   for i in np.arange(k, len(signal)-k):\n       for ii in np.arange(i-k, i+k):\n           sum = sum + signal[ii]\n       #end-for\n       mAver.append(sum / window)\n       sum = 0\n   #end-for\n\n   zeros = [0]*k\n   mAver = zeros + mAver + zeros\n\n   return mAver\n</code></pre>\n\n<p>It work very well. But I'm trying to discover some way to implement the <code>k</code> variant to minimize the signal lost in beginning and in final (Now I'm using an list with zeros).</p>\n\n<p><br>Can someone help me?</p>\n"}, {"tags": ["python", "statsmodels", "arima"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10355653, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mD5oHMpPiXE/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOADN2a8Qn5jYIUlbeALStMguMRZA/mo/photo.jpg?sz=128", "display_name": "Queena", "link": "https://stackoverflow.com/users/10355653/queena"}, "edited": false, "score": 0, "creation_date": 1537206797, "post_id": 52312015, "comment_id": 91691210, "body": "Thanks for your answer. But I&#39;m still confused about this equation. Do you know what X(t)\u03b2 represent in this formula?"}], "tags": [], "owner": {"reputation": 5842, "user_id": 6108661, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3b232c9453f6369d6150071ce9f506fc?s=128&d=identicon&r=PG&f=1", "display_name": "FLab", "link": "https://stackoverflow.com/users/6108661/flab"}, "is_accepted": false, "score": 0, "last_activity_date": 1536835391, "last_edit_date": 1592644375, "creation_date": 1536835391, "answer_id": 52312015, "question_id": 52304373, "link": "https://stackoverflow.com/questions/52304373/reference-of-arima-in-python/52312015#52312015", "title": "reference of ARIMA in python", "body": "<p>You can check the documentation:</p>\n<p><a href=\"https://www.statsmodels.org/dev/generated/statsmodels.tsa.arima_model.ARIMA.html\" rel=\"nofollow noreferrer\">https://www.statsmodels.org/dev/generated/statsmodels.tsa.arima_model.ARIMA.html</a></p>\n<p>that shows the formula used:</p>\n<blockquote>\n<p>If exogenous variables are given, then the model that is fit is</p>\n<pre><code>              \u03d5(L)(y(t)\u2212X(t)\u03b2)=\u03b8(L)\u03f5(t) \n</code></pre>\n<p>where \u03d5 and \u03b8 are polynomials in the lag operator,\nL. This is the regression model with ARMA errors, or ARMAX model. This\nspecification is used, whether or not the model is fit using\nconditional sum of square or maximum-likelihood, using the method\nargument in statsmodels.tsa.arima_model.ARIMA.fit. Therefore, for now,\ncss and mle refer to estimation methods only. This may change for the\ncase of the css model in future versions.</p>\n</blockquote>\n<p>If you click on 'source' you can see the source code.</p>\n"}], "owner": {"reputation": 1, "user_id": 10355653, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mD5oHMpPiXE/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOADN2a8Qn5jYIUlbeALStMguMRZA/mo/photo.jpg?sz=128", "display_name": "Queena", "link": "https://stackoverflow.com/users/10355653/queena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1536835391, "creation_date": 1536791860, "last_edit_date": 1536835209, "question_id": 52304373, "link": "https://stackoverflow.com/questions/52304373/reference-of-arima-in-python", "title": "reference of ARIMA in python", "body": "<p>I used <code>statsmodels.tsa.arima_model import ARIMA</code> in Python to develop an ARIMA model. Recently I am writing the methodology of ARIMA, but I can not find any reference on the page.</p>\n\n<p>So here my question is where could I find the reference (or formula) used <code>statsmodels.tsa.arima_model import ARIMA</code> in Python?</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 57, "user_id": 7150603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9935c78dc0adb7577d75285fec2c057a?s=128&d=identicon&r=PG&f=1", "display_name": "ash ketchum", "link": "https://stackoverflow.com/users/7150603/ash-ketchum"}, "is_accepted": false, "score": -2, "last_activity_date": 1536959671, "creation_date": 1536959671, "answer_id": 52339273, "question_id": 52304339, "link": "https://stackoverflow.com/questions/52304339/how-can-i-ensure-the-correct-behavior-of-tf-control-dependencies-when-i-am-tra/52339273#52339273", "title": "How can I ensure the correct behavior of tf.control_dependencies() when I am training a GAN-like graph with multiple networks?", "body": "<p>switch to pytorch like everyone is doing, <a href=\"https://discuss.pytorch.org/\" rel=\"nofollow noreferrer\">https://discuss.pytorch.org/</a> they even have forum where developers answer question.</p>\n"}, {"tags": [], "owner": {"reputation": 266, "user_id": 10530728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5x5AK.jpg?s=128&g=1", "display_name": "K. Bogdan", "link": "https://stackoverflow.com/users/10530728/k-bogdan"}, "is_accepted": false, "score": 1, "last_activity_date": 1553897661, "creation_date": 1553897661, "answer_id": 55426109, "question_id": 52304339, "link": "https://stackoverflow.com/questions/52304339/how-can-i-ensure-the-correct-behavior-of-tf-control-dependencies-when-i-am-tra/55426109#55426109", "title": "How can I ensure the correct behavior of tf.control_dependencies() when I am training a GAN-like graph with multiple networks?", "body": "<p>I am considering that you are using the <a href=\"https://www.tensorflow.org/api_docs/python/tf/layers/batch_normalization\" rel=\"nofollow noreferrer\">tf.layers.batch_normalization</a> function, since you are adding the update operations from <code>tf.GraphKeys.UPDATE_OPS</code> as dependencies.</p>\n\n<p>The problem with your code is that you define the dependencies that include the batch norm updates using the whole <code>tf.GraphKeys.UPDATE_OPS</code> collection. Whenever you create a batch norm layer with <code>tf.layers.batch_normalization</code>, the update ops for that layer is added to the <code>tf.GraphKeys.UPDATE_OPS</code> collection. Thus, in the first code block, which defines the uNet2D, the <code>optimizer</code> will have only the collection of batch norm updates for UNet2D as dependencies. But, when you create the attentionNetwork, more batch norm updates are added to <code>tf.GraphKeys.UPDATE_OPS</code>. Therefore, the dependencies for the optimizer of the attentionNetwork actually include all batch norm updates, including the ones for the uNet2D model.</p>\n\n<p>In order to solve that, you need to filter the batch norm updates for each model. If you are using scopes to create each model, for example, as in:</p>\n\n<pre><code>with tf.variable_scope('unet2d'):\n    # ... creation of the model uNet2D..\n\nwith tf.variable_scope('attention_network'):\n    # ... creation of the model attentionNetwork..\n</code></pre>\n\n<p>you can use the scopes to filter the batch norm updates for each model:</p>\n\n<pre><code>update_ops = tf.get_collection(tf.GraphKeys.UPDATE_OPS, scope='unet2d')\nwith tf.control_dependencies(update_ops):\n    optimizer = tf.train.AdamOptimizer(learning_rate=LR[i]).minimize(W*cost, var_list=tf.get_collection(tf.GraphKeys.TRAINABLE_VARIABLES, scope='unet2d'))    \n\n\nupdate_ops = tf.get_collection(tf.GraphKeys.UPDATE_OPS, scope='attention_network')\nwith tf.control_dependencies(update_ops):\n    optimizer_d = tf.train.AdamOptimizer(learning_rate=0.2*LR[i]).minimize(cost_d, var_list=tf.get_collection(tf.GraphKeys.TRAINABLE_VARIABLES, scope='attention_network'))\n</code></pre>\n\n<p>One side note: make sure that the correct variables are used in the optimizers. Since you are not passing the variables to the parameter <code>var_list</code> in the minimization function, the model will actually collect all variables in the <code>tf.GraphKeys.TRAINABLE_VARIABLES</code> collection. </p>\n"}], "owner": {"reputation": 111, "user_id": 3924269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c6f2edce0c2886b746e133c92a38ddb?s=128&d=identicon&r=PG&f=1", "display_name": "Karl", "link": "https://stackoverflow.com/users/3924269/karl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1553897661, "creation_date": 1536791588, "last_edit_date": 1536794225, "question_id": 52304339, "link": "https://stackoverflow.com/questions/52304339/how-can-i-ensure-the-correct-behavior-of-tf-control-dependencies-when-i-am-tra", "title": "How can I ensure the correct behavior of tf.control_dependencies() when I am training a GAN-like graph with multiple networks?", "body": "<p>I suppose I can summarize this question as, \"How do I use Batch Normalization when I have two unique networks?\"</p>\n\n<p>I am training what is essentially a GAN, with both the discriminator and generator having Batch Norm layers. This is a little different because the networks both have their own loss function entirely separate from one another, unlike the normal GAN framework. The second network is basically just being used to measure \"how wrong\" the generator is in a task but they both should be updated completely independently of one another.</p>\n\n<p>My networks are both defined on individual GPUs since they are quite large.</p>\n\n<p>I place the networks on each GPU and assign the dependcies in the following bit of my code:</p>\n\n<pre><code>with tf.device(\"/gpu:0\"):\n    pred = uNet2D(X, BETA[j], KERNEL_SIZE, is_training)\n    cost = tf.reduce_sum(tf.nn.sigmoid_cross_entropy_with_logits(labels=tf.reshape(Y,[-1]),logits=tf.reshape(pred,[-1])))\n\n    update_ops = tf.get_collection(tf.GraphKeys.UPDATE_OPS)\n    with tf.control_dependencies(update_ops):\n            optimizer = tf.train.AdamOptimizer(learning_rate=LR[i]).minimize(W*cost)    \n\n\n\nwith tf.device(\"/gpu:1\"):\n    attention = attentionNetwork(X_ATTN, BETA[j], KERNEL_SIZE, is_training)\n    cost_d = tf.reduce_sum(tf.nn.sigmoid_cross_entropy_with_logits(labels=Y_ATTN,logits=attention))\n\n    update_ops = tf.get_collection(tf.GraphKeys.UPDATE_OPS)\n    with tf.control_dependencies(update_ops):\n        optimizer_d = tf.train.AdamOptimizer(learning_rate=0.2*LR[i]).minimize(cost_d)\n</code></pre>\n\n<p>I am a little concerned about this however because my tensorboard graph image suggests that the output of uNet (my generator) is an input the gradients used to update attenteionNetwork (my discriminator).</p>\n\n<p>Can anyone help me determine the proper way to structure these blocks? I'm also concerned by the fact that optimizing attentionNetwork requires me to include the placeholders defined in uNet2D() and cost on gpu:0.</p>\n\n<p>Thanks! My Tensorboard graph is attached below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/8GgVd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8GgVd.png\" alt=\"enter image description here\"></a></p>\n\n<p>Edit: When I run this without Batch Norm and thus without control_dependencies() I get a Tensorboard that looks like this, which I'm pretty sure is what I want.</p>\n\n<p><a href=\"https://i.stack.imgur.com/YfinL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YfinL.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "python-3.x", "user-interface", "wxpython"], "comments": [{"owner": {"reputation": 4080, "user_id": 5838056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/A1TkO.jpg?s=128&g=1", "display_name": "arshbot", "link": "https://stackoverflow.com/users/5838056/arshbot"}, "edited": false, "score": 0, "creation_date": 1536792371, "post_id": 52304296, "comment_id": 91556410, "body": "How long does it take you to download the zip file? It could be freezing because it&#39;s still downloading the file. What happens if you let it run?"}, {"owner": {"reputation": 123, "user_id": 9545640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55FzV.png?s=128&g=1", "display_name": "NeverEndingCycle", "link": "https://stackoverflow.com/users/9545640/neverendingcycle"}, "reply_to_user": {"reputation": 4080, "user_id": 5838056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/A1TkO.jpg?s=128&g=1", "display_name": "arshbot", "link": "https://stackoverflow.com/users/5838056/arshbot"}, "edited": false, "score": 0, "creation_date": 1536798117, "post_id": 52304296, "comment_id": 91557572, "body": "The program works fine, but it freezes and says &#39;not responding&#39; while downloading. I need some way to multi thread it I just don&#39;t know how. Like I said, I know why its freezing, I just need to know how to fix it."}], "answers": [{"tags": [], "owner": {"reputation": 123, "user_id": 9545640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55FzV.png?s=128&g=1", "display_name": "NeverEndingCycle", "link": "https://stackoverflow.com/users/9545640/neverendingcycle"}, "is_accepted": true, "score": 0, "last_activity_date": 1536814862, "creation_date": 1536814862, "answer_id": 52306918, "question_id": 52304296, "link": "https://stackoverflow.com/questions/52304296/my-python-installer-freezes-while-working-how-do-i-fix-it/52306918#52306918", "title": "My python installer freezes while working. How do I fix it?", "body": "<p>Okay, so I figured it out. As I said I needed to multi-thread the GUI, but at the time I couldn't figure it out. Now I have. What I needed to do was multi-thread the GUI and my 'processes' on separate threads. This means that the GUI (what you see) is running on a separate thread than the one that is processing the data (downloading, extracting, etc.). </p>\n\n<p>Before you use this code I want to let you know this is not a finished program. It is just the bare minimum to download and extract a .zip from a download link without freezing.</p>\n\n<p>Here is the code I am using now to solve my problem:</p>\n\n<pre><code># Import libraries\nimport requests, os, sys, zipfile, shutil, subprocess, wx, urllib, time\nfrom threading import *\n\n# Define variables\nurl = \"Put any zip file URL here to test the program\"\nr = requests.get(url, stream = True)\n\n# Button definitions\nID_START = wx.NewId()\n\n# Define notification event for thread completion\nEVT_RESULT_ID = wx.NewId()\n\n# Check  for old files\ndef Check():\n    if os.path.exists(\"Folder\"):\n        print('\\n\\nRemoving old files...')\n        subprocess.check_call(('attrib -R ' + 'Folder' + '\\\\* /S').split())\n        shutil.rmtree('Folder')\n        print('\\nRemoved old files.')\n    else:\n        pass\n\n# Download new file\ndef Download():\n    print('\\n\\nDownloading:')\n    urllib.request.urlretrieve(url, 'temp.zip')\n    print('\\nDownload Complete.')\n\n# Extract new file\ndef Extract():\n    print('\\n\\nExtracting...')\n    zip_ref = zipfile.ZipFile(\"temp.zip\", 'r')\n    zip_ref.extractall(\"Folder\")\n    zip_ref.close()\n    print('\\nExtraction Complete')\n\n# Delete the .zip file but leave the folder\ndef Clean():\n    print('\\n\\nCleaning up...')\n    os.remove(\"temp.zip\")\n    print('\\nDone!')\n\n# Thread class that executes processing\nclass WorkerThread(Thread):\n    \"\"\"Worker Thread Class.\"\"\"\n    def __init__(self, notify_window):\n        \"\"\"Init Worker Thread Class.\"\"\"\n        Thread.__init__(self)\n        self._notify_window = notify_window\n        # This starts the thread running on creation.\n        self.start()\n\n# This is what runs on a separate thread when you click the download button\n    def run(self):\n        \"\"\"Run Worker Thread.\"\"\"\n        # This is the code executing in the new thread. \n        Check()\n        Download()\n        Extract()\n        Clean()\n\n# GUI Frame class that spins off the worker thread\nclass MainFrame(wx.Frame):\n    \"\"\"Class MainFrame.\"\"\"\n    def __init__(self, parent, id):\n        \"\"\"Create the MainFrame.\"\"\"\n        wx.Frame.__init__(self, parent, id, 'GUInstaller', \n                          style=wx.DEFAULT_FRAME_STYLE ^ wx.RESIZE_BORDER)\n        self.SetSize(400, 350)\n        wx.Button(self, ID_START, 'Download', size=(300,50), pos=(42,250))\n        self.status = wx.StaticText(self, -1, '', pos=(0,200))\n        self.Bind(wx.EVT_BUTTON, self.OnStart, id=ID_START)\n\n        # And indicate we don't have a worker thread yet\n        self.worker = None\n\n    def OnStart(self, event):\n        \"\"\"Start Computation.\"\"\"\n        # Trigger the worker thread unless it's already busy\n        if not self.worker:\n            self.status.SetLabel('Downloading...')\n            self.worker = WorkerThread(self)\n\n    def OnResult(self, event):\n        \"\"\"Show Result status.\"\"\"\n        self.status.SetLabel('Done!')\n        # The worker is done\n        self.worker = None\n\nclass MainApp(wx.App):\n    \"\"\"Class Main App.\"\"\"\n    def OnInit(self):\n        \"\"\"Init Main App.\"\"\"\n        self.frame = MainFrame(None, -1)\n        self.frame.Show(True)\n        self.SetTopWindow(self.frame)\n        return True\n\n# Main Loop\nif __name__ == '__main__':\n    app = MainApp(0)\n    app.MainLoop()\n</code></pre>\n\n<p>P.S. Not all of this is my code. I took an example from another website and modified it to work with my needs.</p>\n"}], "owner": {"reputation": 123, "user_id": 9545640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55FzV.png?s=128&g=1", "display_name": "NeverEndingCycle", "link": "https://stackoverflow.com/users/9545640/neverendingcycle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 52306918, "answer_count": 1, "score": 0, "last_activity_date": 1536814862, "creation_date": 1536791183, "last_edit_date": 1536798228, "question_id": 52304296, "link": "https://stackoverflow.com/questions/52304296/my-python-installer-freezes-while-working-how-do-i-fix-it", "title": "My python installer freezes while working. How do I fix it?", "body": "<p>I made a very simple GUI Installer for a game with wxPython. Although it is meant for a game it can technically be used to download and extract any zip file if you have the link. The problem is when I run the program the GUI freezes. It still downloads and extracts like its supposed to, but the GUI is completely frozen while this happens. I can't update text boxes or make a download bar unless I can unfreeze it.  I know why it freezes I just don't know how to fix it. Could someone help me out?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>import requests, os, sys, zipfile, shutil, subprocess, wx, urllib\n\nurl = \"{Put any zip file URL here to test the program}\"\nr = requests.get(url, stream = True)\n\nclass Frame(wx.Frame):\n    def __init__(self, parent, id, title):\n        wx.Frame.__init__(self, parent, id, title, style=wx.DEFAULT_FRAME_STYLE ^ wx.RESIZE_BORDER)\n        myPanel = wx.Panel(self,-1)\n        myButton = wx.Button(myPanel, -1, 'Download', size=(300,50), pos=(40,350))\n        myButton.Bind(wx.EVT_LEFT_DOWN, self.onClick)\n        self.Show(True)\n    def onClick(self, e):\n        print ('Clicked')\n        if os.path.exists(\"RFMB6_WINDOWS\"):\n            print('\\n\\nRemoving old RFMP files...')\n            subprocess.check_call(('attrib -R ' + 'RFMB6_WINDOWS' + '\\\\* /S').split())\n            shutil.rmtree('RFMB6_WINDOWS')\n            print('\\nRemoved old files.')\n        else:\n            pass\n\n        print('\\n\\nDownloading:')\n        urllib.request.urlretrieve(url, 'RFMP.zip')\n        print('\\nDownload Complete.')\n        print('\\n\\nExtracting...')\n        zip_ref = zipfile.ZipFile(\"RFMP.zip\", 'r')\n        zip_ref.extractall(\"RFMB6_WINDOWS\")\n        zip_ref.close()\n        print('\\nExtraction Complete')\n        print('\\n\\nCleaning up...')\n        os.remove(\"RFMP.zip\")\n        print('\\nDone! You have succesfully installed the newest version of the Ravenfield Multiplayer Private Alpha.')\n\napp = wx.App()\nframe = Frame(None, wx.ID_ANY, 'Image')\napp.MainLoop()\n</code></pre>\n"}, {"tags": ["python", "kivy", "kivy-language"], "answers": [{"tags": [], "owner": {"reputation": 6178, "user_id": 4420934, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a512a390a9af72bcac92dcb903e5cdeb?s=128&d=identicon&r=PG&f=1", "display_name": "syntonym", "link": "https://stackoverflow.com/users/4420934/syntonym"}, "is_accepted": false, "score": 0, "last_activity_date": 1536792584, "creation_date": 1536792584, "answer_id": 52304470, "question_id": 52304263, "link": "https://stackoverflow.com/questions/52304263/kv-file-and-python-file-not-matching-up-for-some-reason/52304470#52304470", "title": ".kv file and python file not matching up for some reason", "body": "<p>By default kivy tries to load a kv file named as the App class in lowercase with \"App\" removed if it appears at the end. So it would load a file named <code>simplekivy2.kv</code>. You can also load the kv file excplicitly from a builder as described <a href=\"https://kivy.org/doc/stable/guide/lang.html#how-to-load-kv\" rel=\"nofollow noreferrer\">in the documentation</a>: </p>\n\n<pre><code>Builder.load_file('path/to/file.kv')\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 9150638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5bf568de4c32204dfe34caa2f44d6d3?s=128&d=identicon&r=PG&f=1", "display_name": "John Gunasar", "link": "https://stackoverflow.com/users/9150638/john-gunasar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "closed_date": 1536795388, "answer_count": 1, "score": 0, "last_activity_date": 1536792584, "creation_date": 1536790927, "question_id": 52304263, "link": "https://stackoverflow.com/questions/52304263/kv-file-and-python-file-not-matching-up-for-some-reason", "closed_reason": "Duplicate", "title": ".kv file and python file not matching up for some reason", "body": "<p>Not sure what the issue is here, I want two buttons on my kivy screen, so on a seperate .kv file I have two buttons under a widgets attribute which I then call in my .py file. Can anyone help me spot what might be wrong please? Thanks.</p>\n\n<pre><code>from kivy.app import App\n#kivy.require(\"1.8.0\")\nfrom kivy.uix.label import Label\nfrom kivy.uix.widget import Widget\n\n\nclass Widgets(Widget):\n    pass\n\n\nclass SimpleKivy2(App):\n    def build(self):\n        return Widgets()\n\n\nif __name__ == \"__main__\":\n    SimpleKivy2().run()\n</code></pre>\n\n<p>here is the .kv file: </p>\n\n<pre><code>#File name: k4.py\n&lt;Widgets&gt;:\n    Button:\n        size: 100,75\n        pos: 0,0\n        text: \"Kivy\"\n        color: 0,1,0,1\n        font_size: 40\n\n    Button:\n        size: 170,75\n        pos: 100,0\n        text: \"Tutorials\"\n        color: 1,0,0,1\n        font_size: 40\n</code></pre>\n\n<p>My python file's name is \"k4.py\" my .kv's file name is k4.kv</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "dbus", "pygobject"], "answers": [{"tags": [], "owner": {"reputation": 2561, "user_id": 949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cced605a87da385e19565df616849f30?s=128&d=identicon&r=PG", "display_name": "Peter S. Housel", "link": "https://stackoverflow.com/users/949/peter-s-housel"}, "is_accepted": false, "score": 0, "last_activity_date": 1549705196, "last_edit_date": 1549705196, "creation_date": 1549656576, "answer_id": 54599507, "question_id": 52304262, "link": "https://stackoverflow.com/questions/52304262/writing-d-bus-service-with-pygobject/54599507#54599507", "title": "Writing D-Bus service with pygobject?", "body": "<p>It's not currently possible to write D-Bus services in pygobject because stable versions of <a href=\"https://gi.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">gobject-introspection</a> don't seem to properly detect all of the virtual methods, in particular the <code>get_vtable</code> method. You'll notice that <code>do_get_vtable</code> is missing from <a href=\"https://lazka.github.io/pgi-docs/#Gio-2.0/classes/DBusInterfaceSkeleton.html#virtual-methods\" rel=\"nofollow noreferrer\">the generated API docs</a>. I tried building gobject-introspection 1.59.4, and it is able to extract proper typelib information from glib 2.58.1, so perhaps there is hope for the future.</p>\n"}], "owner": {"reputation": 245, "user_id": 7864179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oST1u.jpg?s=128&g=1", "display_name": "Andreas Matthias", "link": "https://stackoverflow.com/users/7864179/andreas-matthias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 208, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1549705196, "creation_date": 1536790920, "last_edit_date": 1549705176, "question_id": 52304262, "link": "https://stackoverflow.com/questions/52304262/writing-d-bus-service-with-pygobject", "title": "Writing D-Bus service with pygobject?", "body": "<p>I'm trying to write a D-Bus service. But I'm confused about the python\npackages <strong><a href=\"https://pygobject.readthedocs.io\" rel=\"nofollow noreferrer\">pygobject</a></strong> and <strong><a href=\"https://dbus.freedesktop.org/doc/dbus-python/index.htm\" rel=\"nofollow noreferrer\">dbus-python</a></strong>.</p>\n\n<p>Is it possible to write a D-Bus service with pygobject alone (without using\ndbus-python)? My understanding was that pygobject provides everything\nthat dbus-python does. Is this correct? Or do I need dbus-python?</p>\n\n<p>I succeeded in calling methods of other programs via D-Bus by just using\npygobject. But how do I provide my own interface and own methods as a service in D-Bus? As far as I understand I have to inherit my interface class from\n<code>Gio.DBusInterfaceSkeleton</code>[1]. But how do I export my own methods?</p>\n\n<p>[1] <a href=\"https://lazka.github.io/pgi-docs/Gio-2.0/classes/DBusInterfaceSkeleton.html\" rel=\"nofollow noreferrer\">https://lazka.github.io/pgi-docs/Gio-2.0/classes/DBusInterfaceSkeleton.html</a></p>\n"}, {"tags": ["python", "api", "cross-reference"], "comments": [{"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 2, "creation_date": 1536790910, "post_id": 52304254, "comment_id": 91556032, "body": "Do you have a question or problem you&#39;re trying to solve?"}, {"owner": {"reputation": 1, "user_id": 8723064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s559G.jpg?s=128&g=1", "display_name": "annatar", "link": "https://stackoverflow.com/users/8723064/annatar"}, "reply_to_user": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1536887177, "post_id": 52304254, "comment_id": 91594495, "body": "The print doesn&#39;t actually do anything."}], "owner": {"reputation": 1, "user_id": 8723064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s559G.jpg?s=128&g=1", "display_name": "annatar", "link": "https://stackoverflow.com/users/8723064/annatar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536790869, "creation_date": 1536790869, "question_id": 52304254, "link": "https://stackoverflow.com/questions/52304254/crossref-api-output", "title": "Crossref API output", "body": "<p>I'm trying to figure out the output in the crossref.org API.  Using a python script, my goal is to take either a DOI or article/author name and output the inverse.  So when they enter in an article name, my hope is to output a list of DOI's. </p>\n\n<pre><code>from habanero import Crossref\n\ncr = Crossref()\n\narticle_input = raw_input('Enter name/author/DOI of article:')\n\nif type(input) == 'int': # checks if input is an integer\n    # deal with doi\n    article_output = cr.works(article_input)\n   # article_output['message']\n   # article_output['message']['total-results']\n   # article_output['message']['items']\n    print(article_output)\nif type(input) == 'str': # checks if input is a string\n    # deal with title/author\n    doi = cr.works(query=article_input)\n   # doi['message']\n   # doi['message']['total-results']\n   # doi['message']['items']\n    print(doi)\n</code></pre>\n"}, {"tags": ["python", "pandas", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 3962088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4dc537b159f3dc11c3e7412e78cd88e4?s=128&d=identicon&r=PG&f=1", "display_name": "augusto carillo ferrari", "link": "https://stackoverflow.com/users/3962088/augusto-carillo-ferrari"}, "edited": false, "score": 0, "creation_date": 1536846674, "post_id": 52304769, "comment_id": 91577601, "body": "It worked, but it&#39;s to poluted, it gives me in the Y axis, the name of the weekday and the platform."}], "tags": [], "owner": {"reputation": 44364, "user_id": 2487184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d8cd1dea84cfe8312c532088a0da08e8?s=128&d=identicon&r=PG", "display_name": "CT Zhu", "link": "https://stackoverflow.com/users/2487184/ct-zhu"}, "is_accepted": false, "score": 1, "last_activity_date": 1536797202, "last_edit_date": 1536797202, "creation_date": 1536795164, "answer_id": 52304769, "question_id": 52304186, "link": "https://stackoverflow.com/questions/52304186/plotting-multiple-subplots-with-pandas-visualization-tools/52304769#52304769", "title": "Plotting multiple subplots with pandas visualization tools", "body": "<p>Notice that above the plot you get one line for each of your groups such as <code>Super NES ....</code>? Those are the <code>matplotlib.AxesSubplot</code> object to your other plots. </p>\n\n<p><a href=\"http://pandas.pydata.org/pandas-docs/version/0.16.2/generated/pandas.core.groupby.DataFrameGroupBy.plot.html\" rel=\"nofollow noreferrer\"><code>groupby.plot</code></a> actually returns a <code>matplotlib.AxesSubplot</code> object for each of your groups.  On the other hand, ipython notebook is only showing your last plot. </p>\n\n<p>The solution is thus: change your <code>data.groupby(\"platform\").plot(\"barh\")</code> to <code>my_axes =  data.groupby(\"platform\").plot(\"barh\")</code> and then work on them one by one such as</p>\n\n<pre><code>for ax in my_axes:\n    ax.savefig(filename)\n</code></pre>\n\n<p>Alternative you can do this:</p>\n\n<pre><code>gp = data.groupby(\"platform\")\nf, axes = plt.subplots(5, 5)  # or any other large enough subplot grid\nfor k, ax in zip(gp.groups, axes.ravel()):\n    gp.get_group(k).plot('barh', ax=ax)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 3962088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4dc537b159f3dc11c3e7412e78cd88e4?s=128&d=identicon&r=PG&f=1", "display_name": "augusto carillo ferrari", "link": "https://stackoverflow.com/users/3962088/augusto-carillo-ferrari"}, "edited": false, "score": 1, "creation_date": 1536846718, "post_id": 52304942, "comment_id": 91577638, "body": "Thanks man, I would like to make a unique barplot for each platform, but thanks in advance !"}, {"owner": {"reputation": 41, "user_id": 3962088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4dc537b159f3dc11c3e7412e78cd88e4?s=128&d=identicon&r=PG&f=1", "display_name": "augusto carillo ferrari", "link": "https://stackoverflow.com/users/3962088/augusto-carillo-ferrari"}, "edited": false, "score": 1, "creation_date": 1536867572, "post_id": 52304942, "comment_id": 91588835, "body": "just got it worked using sns.catplot()  sns.catplot(y=&#39;week_day&#39;,x=&#39;value&#39;,col=&quot;platform&quot;,col_wrap=4 ,hue=&#39;week_day&#39;, data=data,kind= &quot;bar&quot;)"}], "tags": [], "owner": {"reputation": 504, "user_id": 10112632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdfa175416f245cb908b0cee8d03eba?s=128&d=identicon&r=PG&f=1", "display_name": "Sai Kumar", "link": "https://stackoverflow.com/users/10112632/sai-kumar"}, "is_accepted": true, "score": 1, "last_activity_date": 1536797098, "creation_date": 1536797098, "answer_id": 52304942, "question_id": 52304186, "link": "https://stackoverflow.com/questions/52304186/plotting-multiple-subplots-with-pandas-visualization-tools/52304942#52304942", "title": "Plotting multiple subplots with pandas visualization tools", "body": "<p>One solution would be to use <code>seaborn</code> and plot <code>barh</code> .</p>\n\n<pre><code>data = data.unstack().fillna(0).stack()\ndata = data.reset_index().rename(columns={0:'value'})\n\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nfig, ax = plt.subplots(figsize=(10,7))\nsns.barplot(y='platform',x='value', hue='week_day', data=data, orient='h')\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 3962088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4dc537b159f3dc11c3e7412e78cd88e4?s=128&d=identicon&r=PG&f=1", "display_name": "augusto carillo ferrari", "link": "https://stackoverflow.com/users/3962088/augusto-carillo-ferrari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 0, "accepted_answer_id": 52304942, "answer_count": 2, "score": 0, "last_activity_date": 1536797202, "creation_date": 1536790468, "question_id": 52304186, "link": "https://stackoverflow.com/questions/52304186/plotting-multiple-subplots-with-pandas-visualization-tools", "title": "Plotting multiple subplots with pandas visualization tools", "body": "<p>I'm using IGN review dataset from <a href=\"https://www.kaggle.com/egrinstein/20-years-of-games\" rel=\"nofollow noreferrer\">kaggle</a>, and i'm trying to get a frequency plot by each nintendo platform x week day of the given launch date, here is the code</p>\n\n<pre><code>import pandas as pd\ndf = pd.read_csv(\"ign.csv\")\ndatetime_df = pd.DataFrame({'year': df[\"release_year\"],\n                   'month': df[\"release_month\"],\n                   'day': df[\"release_day\"]})\ndf[\"date\"] = pd.to_datetime(datetime_df)\n\ndf[\"week_day\"] = df[\"date\"].apply(lambda x : x.weekday_name)\n\nnintendo = ['Wii','Nintendo DS','Nintendo 3DS','Nintendo DS',\n            'Game Boy', 'Game Boy Color','Nintendo 64DD','Game Boy Advance',\n            'New Nintendo 3DS','GameCube','Nintendo DSi','Super NES']\n\nbase_nintendo = df[df[\"platform\"].isin(nintendo)]\n\ndata = base_nintendo.groupby([\"platform\",\"week_day\"]).size()\n\ndata =data.unstack().fillna(0).stack()\n\ndata\n</code></pre>\n\n<p>with the output:</p>\n\n<pre><code>platform          week_day \nGame Boy          Friday         5.0\n                  Monday         5.0\n                  Saturday       0.0\n                  Sunday         0.0\n                  Thursday       0.0\n                  Tuesday        4.0\n                  Wednesday      8.0\nGame Boy Advance  Friday       131.0\n                  Monday       109.0\n                  Saturday       0.0\n                  Sunday         1.0\n                  Thursday     153.0\n                  Tuesday      123.0\n                  Wednesday    106.0\nGame Boy Color    Friday        89.0\n                  Monday        43.0\n                  Saturday       1.0\n                  Sunday         1.0\n                  Thursday      55.0\n                  Tuesday       78.0\n                  Wednesday     89.0\nGameCube          Friday        99.0\n                  Monday       100.0\n                  Saturday       3.0\n                  Sunday         0.0\n                  Thursday      83.0\n                  Tuesday      124.0\n                  Wednesday    100.0\n</code></pre>\n\n<p>I've tried doing:</p>\n\n<pre><code>data.groupby(\"platform\").plot(\"barh\")\n</code></pre>\n\n<p>but it only gives me the last platform (wii):</p>\n\n<p><a href=\"https://i.stack.imgur.com/DEIlX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DEIlX.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1536790470, "post_id": 52304172, "comment_id": 91555917, "body": "The error is very likely in the <i>template</i>. Can you please share the <i>template</i>?"}, {"owner": {"reputation": 1, "user_id": 9498728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d504ddefa7f7a3340238e8427a64eb59?s=128&d=identicon&r=PG&f=1", "display_name": "armin.h.ck.r", "link": "https://stackoverflow.com/users/9498728/armin-h-ck-r"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1536790738, "post_id": 52304172, "comment_id": 91555992, "body": "ok i can please the template!"}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1536790991, "post_id": 52304172, "comment_id": 91556069, "body": "looks like an error in your loop: should be <code>{% for post in list_posts %}</code> (you have <code>postS</code> instead"}, {"owner": {"reputation": 1, "user_id": 9498728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d504ddefa7f7a3340238e8427a64eb59?s=128&d=identicon&r=PG&f=1", "display_name": "armin.h.ck.r", "link": "https://stackoverflow.com/users/9498728/armin-h-ck-r"}, "edited": false, "score": 0, "creation_date": 1536792914, "post_id": 52304172, "comment_id": 91556525, "body": "help me please??"}], "answers": [{"tags": [], "owner": {"reputation": 1536, "user_id": 6005145, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-8d0SktavI-o/AAAAAAAAAAI/AAAAAAAAAxU/Zrxn56xszBE/photo.jpg?sz=128", "display_name": "schrodigerscatcuriosity", "link": "https://stackoverflow.com/users/6005145/schrodigerscatcuriosity"}, "is_accepted": false, "score": 0, "last_activity_date": 1536800836, "creation_date": 1536800836, "answer_id": 52305298, "question_id": 52304172, "link": "https://stackoverflow.com/questions/52304172/i-cant-create-a-post-detail-and-post-list/52305298#52305298", "title": "i can&#39;t create a post_detail and post_list", "body": "<p>Your path expects 4 arguments, including a slug at the end:</p>\n\n<pre><code>re_path(r'^(?P&lt;year&gt;\\d{4})-(?P&lt;month&gt;\\d{1,2})-(?P&lt;day&gt;\\d{1,2})/\n (?P&lt;slug&gt;[-\\w]+) # slug\n$/',views.detail,name='detail'),\n</code></pre>\n\n<p>But in your template it is only passed year, month, and day, no slug:</p>\n\n<pre><code>href=\"{% url 'blog:detail' \n         year=post.published_at.year \n         month=post.published_at.month \n         day=post.published_at.day \n         # slug missing here!: slug=post.slug\n         %}\"\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9498728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d504ddefa7f7a3340238e8427a64eb59?s=128&d=identicon&r=PG&f=1", "display_name": "armin.h.ck.r", "link": "https://stackoverflow.com/users/9498728/armin-h-ck-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536800836, "creation_date": 1536790380, "last_edit_date": 1536790614, "question_id": 52304172, "link": "https://stackoverflow.com/questions/52304172/i-cant-create-a-post-detail-and-post-list", "title": "i can&#39;t create a post_detail and post_list", "body": "<p>i am a error to create my list_posts and detail_post !\nmy code at list_posts :</p>\n\n<pre><code>def blog(request):\nlist_posts = Post.objects.filter(status = 'published').order_by('-published_at')[:]\ncontext = {\n    'list_posts':list_posts\n}\nreturn render(request, 'mysite/doc_2.html', context)\n</code></pre>\n\n<p>and my code at detail_post:</p>\n\n<pre><code>edef detail(request, year, month, day,slug):\npost = get_object_or_404(Post, status='published', \n                                published_at__year=year, \n                                published_at__month=month, \n                                published_at__day=day,\n                                slug=slug)\ncontext = {\n    'post':post\n}\nreturn render(request, 'mysite/ws-post.html', context)\n</code></pre>\n\n<p>and my code in my app_name.urls:</p>\n\n<pre><code>re_path(r'^(?P&lt;year&gt;\\d{4})-(?P&lt;month&gt;\\d{1,2})-(?P&lt;day&gt;\\d{1,2})/(?P&lt;slug&gt;[-\\w]+)$/',views.detail,name='detail'),\n</code></pre>\n\n<p>and my code in url's my html list_posts is :</p>\n\n<pre><code>&lt;a class=\"l-ws-more\" href=\"{% url 'blog:detail' year=post.published_at.year month=post.published_at.month day=post.published_at.day %}\"&gt;\n</code></pre>\n\n<p>and my error is :</p>\n\n<pre><code>NoReverseMatch at /blog/\nReverse for 'detail' with keyword arguments '{'year': '', 'month': '', \n'day': ''}' not found. 1 pattern(s) tried: ['blog/(?P&lt;year&gt;\\\\d{4})-(? \nP&lt;month&gt;\\\\d{1,2})-(?P&lt;day&gt;\\\\d{1,2})/(?P&lt;slug&gt;[-\\\\w]+)$/']\n</code></pre>\n\n<p>my template list_posts :</p>\n\n<pre><code>{% if list_posts %}\n          {% for posts in list_posts %}\n            &lt;div class=\"doc-item-2\"&gt;\n            &lt;div class=\"doc-intro-2 dark_unhover\"&gt;\n              &lt;figure class=\"effect-oscar\"&gt;\n                &lt;img src=\"{{ posts.banner.url }}\" alt=\"{{ posts.title }}\"&gt;\n                &lt;figcaption&gt;\n                  &lt;h2&gt;Warm &lt;span&gt;Oscar&lt;/span&gt;&lt;/h2&gt;\n                &lt;/figcaption&gt;\n              &lt;/figure&gt;\n              &lt;div class=\"rate-star\"&gt;\n                &lt;span class=\"fa fa-star star-checked\"&gt;&lt;/span&gt;\n                &lt;span class=\"fa fa-star star-checked\"&gt;&lt;/span&gt;\n                &lt;span class=\"fa fa-star star-checked\"&gt;&lt;/span&gt;\n                &lt;span class=\"fa fa-star\"&gt;&lt;/span&gt;\n                &lt;span class=\"fa fa-star\"&gt;&lt;/span&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"doc-content-2\"&gt;\n              &lt;h3&gt;{{ posts.title }}&lt;/h3&gt;\n              &lt;div class=\"info_blue\"&gt;\n                &lt;div class=\"date_1\"&gt;\n                  &lt;p&gt;\u0633\u0627\u0639\u062a&lt;/p&gt;\n                  &lt;span&gt;{{ posts.published_at|jalali_time }}&lt;/span&gt;\n                &lt;/div&gt;\n                &lt;div class=\"date_2\"&gt;\n                  &lt;p&gt;\u062a\u0627\u0631\u06cc\u062e&lt;/p&gt;\n                  &lt;!-- &lt;span&gt;{{ posts.published_at|date:\"Y D M\" }}&lt;/span&gt; --&gt;\n                  &lt;span&gt;{{ posts.published_at|jalali_date }}&lt;/span&gt;\n                &lt;/div&gt;\n              &lt;/div&gt;\n              &lt;p class=\"dec\"&gt;{{ posts.summary }}&lt;/p&gt;\n              &lt;a class=\"l-ws-more\" href=\"{% url 'blog:detail' year=post.published_at.year month=post.published_at.month day=post.published_at.day %}\"&gt;\n              \u0627\u062f\u0627\u0645\u0647 \u0645\u0637\u0644\u0628&lt;/a&gt;\n            &lt;/div&gt;\n            &lt;/div&gt;\n            {% endfor %}\n            {% else %}\n            &lt;h2&gt;no post!&lt;/h2&gt;\n            {% endif %}\n</code></pre>\n\n<p>please answer my question\nand error's pictures ==> \n<a href=\"https://i.stack.imgur.com/9a2If.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}, {"tags": ["python", "python-3.x", "pycharm", "type-hinting"], "comments": [{"owner": {"reputation": 63, "user_id": 2658236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e1ff454c8e698423df128da29eea5f?s=128&d=identicon&r=PG", "display_name": "ColdBrew", "link": "https://stackoverflow.com/users/2658236/coldbrew"}, "edited": false, "score": 0, "creation_date": 1536826572, "post_id": 52304128, "comment_id": 91565881, "body": "Oh thanks for pointing that out! I didn&#39;t find it before. I&#39;m still confused though, why would jetbrains make examples like this if it isn&#39;t supported?"}, {"owner": {"reputation": 40179, "user_id": 646543, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/a6xF2.jpg?s=128&g=1", "display_name": "Michael0x2a", "link": "https://stackoverflow.com/users/646543/michael0x2a"}, "edited": false, "score": 0, "creation_date": 1536944719, "post_id": 52304128, "comment_id": 91620016, "body": "Beats me. Maybe that&#39;s another bug report you could try filing? (This time, it&#39;s a bug in their docs). Or maybe variable annotations only work in very specific circumstances in Pycharm? I mostly use mypy, so I&#39;m afraid the best I can do is to just point you to that bug (and I guess recommend using mypy -- or one of the several mypy plugins for pycharm :P)."}], "owner": {"reputation": 63, "user_id": 2658236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e1ff454c8e698423df128da29eea5f?s=128&d=identicon&r=PG", "display_name": "ColdBrew", "link": "https://stackoverflow.com/users/2658236/coldbrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1536803101, "answer_count": 0, "score": 1, "last_activity_date": 1536790292, "creation_date": 1536790024, "last_edit_date": 1536790292, "question_id": 52304128, "link": "https://stackoverflow.com/questions/52304128/type-hinting-in-python-with-pycharm", "closed_reason": "Duplicate", "title": "type hinting in python with pycharm", "body": "<p>I'm trying to use type hinting in python 3.6 with PyCharm 2018.2</p>\n\n<p>It works fine for functions and methods:</p>\n\n<pre><code>def foo(x: int) -&gt; int:\n    return x + 1\n</code></pre>\n\n<p>However there are no warnings in all of the following cases:</p>\n\n<pre><code>a: str = 3\n\nb: int\nb = 'b'\n\nclass C:\n    d: int\n\n    def __init__(self):\n        self.d = 'd'\n        self.e: str = 3\n</code></pre>\n\n<p>I made sure to check 'type checker' and 'type hints' in the Inspections settings.</p>\n\n<p><a href=\"https://www.jetbrains.com/help/pycharm/type-hinting-in-product.html\" rel=\"nofollow noreferrer\">Jetbrains doc</a> even uses similar examples</p>\n\n<p>What am I missing? </p>\n"}, {"tags": ["python", "django", "model", "modelform"], "comments": [{"owner": {"reputation": 111, "user_id": 6759844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c04d7372b5ae33027ce5ea15112a4fa3?s=128&d=identicon&r=PG&f=1", "display_name": "bdbd", "link": "https://stackoverflow.com/users/6759844/bdbd"}, "edited": false, "score": 0, "creation_date": 1536795381, "post_id": 52304079, "comment_id": 91557043, "body": "Check this out: <a href=\"https://stackoverflow.com/a/16206978/6759844\">stackoverflow.com/a/16206978/6759844</a>"}], "answers": [{"tags": [], "owner": {"reputation": 54482, "user_id": 8283848, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/YiHgN.jpg?s=128&g=1", "display_name": "JPG", "link": "https://stackoverflow.com/users/8283848/jpg"}, "is_accepted": false, "score": 1, "last_activity_date": 1536827330, "creation_date": 1536827330, "answer_id": 52309617, "question_id": 52304079, "link": "https://stackoverflow.com/questions/52304079/how-do-i-make-a-field-optional-to-enter-in-a-django-modelform/52309617#52309617", "title": "How do I make a field optional to enter, in a django ModelForm?", "body": "<p>As <a href=\"https://stackoverflow.com/users/6759844/bdbd\"><em>@bdbd</em></a> mentioned in comments, you can do it by specifying by <strong><code>required=False</code></strong>.<br><br>\nFor example, if you want to <code>age</code> field to be optional, add it explicitly as</p>\n\n<pre><code><b>from django import forms</b>\n\n\nclass CheckinPatientMetaForm(ModelForm):\n    <b>age = forms.IntegerField(required=False)</b>\n\n    class Meta:\n        model = customer\n        exclude = [\n            'gender',\n            'maritalstatus',\n            'occupation',\n            'bloodgroup'\n        ]</code></pre>\n"}], "owner": {"reputation": 5328, "user_id": 1305947, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/660bcd99a216234e04adb27125cbf0a3?s=128&d=identicon&r=PG", "display_name": "Joel G Mathew", "link": "https://stackoverflow.com/users/1305947/joel-g-mathew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1035, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536827330, "creation_date": 1536789697, "question_id": 52304079, "link": "https://stackoverflow.com/questions/52304079/how-do-i-make-a-field-optional-to-enter-in-a-django-modelform", "title": "How do I make a field optional to enter, in a django ModelForm?", "body": "<p>Scenario:\nI instantiate a ModelForm and pass it to a template which displays the form. When POST is submitted, code tries to search the database by any of the given inputs. I dont require all inputs to be entered as in the Model. I just need one (or more, if user desires to do an AND search) to be entered.</p>\n\n<p>Question: How can I make any of the ModelForm fields optional, where in the Model, the field isnt optional. The field isnt optional in the Model because I have another ModelForm based on the same Model, where user is required to enter all his details.</p>\n\n<p>My model:</p>\n\n<pre><code>class customer(models.Model):\n    # Need autoincrement, unique and primary\n    cstid = models.AutoField(primary_key=True, unique=True)\n    name = models.CharField(max_length=35)\n    age=models.IntegerField()\n    gender_choices = (('male', 'Male'),\n                            ('female', 'Female'))\n    gender = models.CharField(\n        choices=gender_choices, max_length=10, default='male')\n    maritalstatus_choices = ( ('married', 'Married'),\n                            ('unmarried', 'Unmarried'))\n    maritalstatus = models.CharField(\n        choices=maritalstatus_choices, max_length=10, default='Unmarried')\n    mobile = models.CharField(max_length=15, default='')\n    alternate = models.CharField(max_length=15, default='')\n    email = models.CharField(max_length=50, default='', blank=True)\n    address = models.CharField(max_length=80, default='', blank=True)\n    city = models.CharField(max_length=25, default='', blank=True)\n    occupation = models.CharField(max_length=25, default='', blank=True)\n    bloodgroup_choices = (('apos', 'A+'),\n        ('aneg', 'A-'),\n        ('bpos', 'B+'),\n        ('bneg', 'B-'),\n        ('opos', 'O+'),\n        ('oneg', 'O-'),\n        ('abpos', 'AB+'),\n        ('abneg', 'AB-'),\n        ('unspecified', '-')\n        )\n    bloodgroup = models.CharField(choices=bloodgroup_choices, max_length=3, default='-', blank=True)\n    class Meta:\n        unique_together = [\"name\", \"mobile\", \"age\"]\n    def __str__(self):\n        return self.name\n</code></pre>\n\n<p>My form:</p>\n\n<pre><code>class CheckinPatientMetaForm(ModelForm):\n    class Meta:\n        model = customer\n        exclude = [\n            'gender',\n            'maritalstatus',\n            'occupation',\n            'bloodgroup'\n        ]\n</code></pre>\n\n<p>views.py:</p>\n\n<pre><code>def checkin_patient(request):\n    results = ''\n    if request.method == 'POST':\n        form = CheckinPatientMetaForm(request.POST)\n        print(\"POST data\",request.POST)\n    else:\n        form = CheckinPatientMetaForm()\n    return render(request, 'clinic/checkin.html', {'rnd_num': randomnumber(), 'form': form, 'SearchResults': results})\n</code></pre>\n"}, {"tags": ["python", "overflow", "exponent"], "comments": [{"owner": {"reputation": 5513, "user_id": 2718801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d4b144cdafa73e1d470362ed8d7c3a9?s=128&d=identicon&r=PG", "display_name": "jhpratt", "link": "https://stackoverflow.com/users/2718801/jhpratt"}, "edited": false, "score": 0, "creation_date": 1536789701, "post_id": 52304067, "comment_id": 91555707, "body": "Python has arbitrary precision arithmetic. You&#39;re not going to overflow, so long as you&#39;re using pure Python."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 5513, "user_id": 2718801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d4b144cdafa73e1d470362ed8d7c3a9?s=128&d=identicon&r=PG", "display_name": "jhpratt", "link": "https://stackoverflow.com/users/2718801/jhpratt"}, "edited": false, "score": 0, "creation_date": 1536789865, "post_id": 52304067, "comment_id": 91555767, "body": "@jhpratt: Python has arbitrary-precision integers by default, but if you want to use an arbitrary-precision real number representation, you&#39;re going to have to do so manually."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1536790064, "post_id": 52304067, "comment_id": 91555820, "body": "Looking at this, the <i>logarithms</i> of your values go down to -2.761e+075. That is an absurdly high magnitude for a logarithm. I don&#39;t know what the context here is, but you may need to just accept that this is going to underflow."}], "owner": {"reputation": 313, "user_id": 9829108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6619edf0517ba7c7c33c1555e125e542?s=128&d=identicon&r=PG&f=1", "display_name": "MAJ", "link": "https://stackoverflow.com/users/9829108/maj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 271, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1536789602, "creation_date": 1536789602, "question_id": 52304067, "link": "https://stackoverflow.com/questions/52304067/avoid-overflow-from-exponential-with-very-large-negative-numbers-python", "title": "Avoid Overflow from Exponential With Very large negative numbers python", "body": "<p>I am writing a code where I calculate an exponential distribution from data points. When running the code, the exponential resulted in arrays of zero. To avoid overflow, I took the log of the exponential. After taking the log, these are the values I get:</p>\n\n<pre><code>LL = [-2.206e+007 -5.209e+037 -1.525e+023 -2.761e+075 -5.577e+015 -4.774e+021 -3.420e+030 -8.149e+035 -1.320e+023 -8.438e+065]\n</code></pre>\n\n<p>I then subtract the Maximum value from the array to further help avoid overflow. However, when I take the exponent again afterwards all of my values are zero except for the maximum value which is equal to 1. </p>\n\n<p>I think it is because the values are so large that subtracting the maximum value doesn't make a difference. \nIs there a way to further avoid overflow in my calculations after taking the log and subtracting the maximum logged value before taking the exponent again?</p>\n"}, {"tags": ["python", "django", "file", "django-forms"], "owner": {"reputation": 1312, "user_id": 9717184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ad422fe492f8008ce2945c57c5148d?s=128&d=identicon&r=PG", "display_name": "connectyourcharger", "link": "https://stackoverflow.com/users/9717184/connectyourcharger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1537027923, "creation_date": 1536789547, "last_edit_date": 1537027923, "question_id": 52304057, "link": "https://stackoverflow.com/questions/52304057/file-not-updating-after-it-is-closed", "title": "File not updating after it is closed", "body": "<p>I have asked a few questions here related to a Django project I am working on which displays the contents of a file in a form, and you can edit the file with the form, when you submit it the project writes to the file and the changes are automatically reflected.</p>\n\n<p>So I have gotten the project to display the contents of a calendar text file in the form, and I have been able to get the form content into my Python script for manipulation. The issue I am having is writing that content to a file, because for some reason, the changes never commit themselves until after I restart the server (this is not ideal, as this should be able to run continuously).</p>\n\n<p>I suspect this has something to do with the file still remaining open for some reason after it is \"closed\". I attempted to fix that by creating functions for all read and write actions (that close the file as well) so I can call them every time I need to read/write. The issue still persists. Is there something I am doing incorrectly here? Is the file still open somewhere I cannot find? Resources below.</p>\n\n<p><strong>Link to project:</strong> <a href=\"https://repl.it/@xMikee/Calendar\" rel=\"nofollow noreferrer\">https://repl.it/@xMikee/Calendar</a> (<em>calendar is just a template for the time being</em>)</p>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>from django.shortcuts import render\nfrom django.contrib import messages\nfrom .forms import FileForm\nimport sys\n\nf = open('calendar.txt', \"r\")\nfile_content = f.read()\nf.close()\nif f.closed:\n  print(\"CLOSED FILE from read views\")\n\ndef writeFile(content, file):\n  f = open(file, \"w\")\n  f.write(content)\n  f.close()\n  if f.closed:\n    print(\"CLOSED FILE from write views\")\n\ndef home(request):\n  return render(request, 'main/index.html',{'file_content':file_content})\n\ndef form_get(request):\n  print('got form')\n  if request.method == 'POST':\n    print(\"OK\")\n    # create a form instance and populate it with data from the request:\n    form = FileForm(request.POST)\n    # check whether it's valid:\n    if form.is_valid():\n      print(\"OK\")\n      cd = form.cleaned_data['form']\n      writeFile(cd, 'calendar.txt')\n  else:\n    print('NOT OK')\n    form = FileForm()\n  return render(request, 'main/index.html', {'form': form})\n\ndef thanks(request):\n  # if this is a POST request we need to process the form data\n  if request.method == 'POST':\n    print(\"OK\")\n    # create a form instance and populate it with data from the request:\n    form = FileForm(request.POST)\n    # check whether it's valid:\n    if form.is_valid():\n      print(\"OK\")\n      cd = form.cleaned_data['form']\n      print(cd)\n      f = open('calendar.txt', 'r+')\n      f.write(cd)\n      f.close()\n  else:\n    print('NO POST')\n    form = FileForm()\n  return render(request, 'main/index.html', {'form': form})\n</code></pre>\n\n<p><strong>forms.py</strong></p>\n\n<pre><code>from django import forms\nglobal cd\n\nf = open('calendar.txt', \"r\")\nfile_content = f.read()\nf.close()\nif f.closed:\n  print(\"CLOSED FILE from read views\")\n\nclass FileForm(forms.Form):\n  form = forms.CharField(label='',initial=file_content,widget=forms.Textarea(attrs={'width':\"100%\", 'cols' : \"102\", 'rows': \"40\", }))\n</code></pre>\n\n<p><strong>index.html</strong></p>\n\n<pre><code>{% extends \"base.html\" %}\n\n{% block content %}\n  &lt;h1 style='text-align:center'&gt;Welcome to the calendar!&lt;/h1&gt;\n  &lt;div style='text-align:center'&gt;\n  &lt;form action=\"#\" method=\"post\"&gt;\n    {% csrf_token %}\n    {{ form }}\n    &lt;div style='margin: 0 auto'&gt;\n    &lt;input type=\"submit\" value=\"Submit\"&gt;\n    &lt;/div&gt;\n  &lt;/form&gt;\n  &lt;p&gt;{{cd}}&lt;/p&gt;\n  &lt;/div&gt;\n{% endblock content %}\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "tkinter", "tkinter-entry"], "comments": [{"owner": {"reputation": 133, "user_id": 8037818, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JEqWTB_A2Ac/AAAAAAAAAAI/AAAAAAAAAwk/eQgBCeHgilo/photo.jpg?sz=128", "display_name": "smp55", "link": "https://stackoverflow.com/users/8037818/smp55"}, "edited": false, "score": 0, "creation_date": 1536789518, "post_id": 52304036, "comment_id": 91555656, "body": "Note that the script works if you remove <code>self.label1.config(fg=&#39;red&#39;)</code>, and properly multiplies the two numbers and updates the result Label."}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 8037818, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JEqWTB_A2Ac/AAAAAAAAAAI/AAAAAAAAAwk/eQgBCeHgilo/photo.jpg?sz=128", "display_name": "smp55", "link": "https://stackoverflow.com/users/8037818/smp55"}, "edited": false, "score": 0, "creation_date": 1536789853, "post_id": 52304080, "comment_id": 91555763, "body": "Awesome! However, what if I have entries that need to modify each other? Is this just not possible using validatecommand?"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "reply_to_user": {"reputation": 133, "user_id": 8037818, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JEqWTB_A2Ac/AAAAAAAAAAI/AAAAAAAAAwk/eQgBCeHgilo/photo.jpg?sz=128", "display_name": "smp55", "link": "https://stackoverflow.com/users/8037818/smp55"}, "edited": false, "score": 1, "creation_date": 1536790116, "post_id": 52304080, "comment_id": 91555828, "body": "@smp55: anything is possible. the bottom line is, you can&#39;t write code that tries to modify something that doesn&#39;t exist yet. You could create the entries without the <code>validatecommand</code> option, and then add that option after everything is created. Or, modify your command to check that they exist and do nothing if they don&#39;t."}], "tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": true, "score": 2, "last_activity_date": 1536789715, "creation_date": 1536789715, "answer_id": 52304080, "question_id": 52304036, "link": "https://stackoverflow.com/questions/52304036/tkinter-entry-validatecommand-cannot-call-entry-config/52304080#52304080", "title": "tkinter Entry validatecommand cannot call Entry.config()", "body": "<p>The validate command is being called for the first time before the label is created. </p>\n\n<p>You can solve this by creating the label before creating the entry widgets. </p>\n"}], "owner": {"reputation": 133, "user_id": 8037818, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JEqWTB_A2Ac/AAAAAAAAAAI/AAAAAAAAAwk/eQgBCeHgilo/photo.jpg?sz=128", "display_name": "smp55", "link": "https://stackoverflow.com/users/8037818/smp55"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 52304080, "answer_count": 1, "score": 0, "last_activity_date": 1536789715, "creation_date": 1536789414, "question_id": 52304036, "link": "https://stackoverflow.com/questions/52304036/tkinter-entry-validatecommand-cannot-call-entry-config", "title": "tkinter Entry validatecommand cannot call Entry.config()", "body": "<p>In Python 3.6.6, I would like to configure a tkinter Entry widget whenever another Entry widget is modified. Entry widgets don't have a callback function, but they do have validatecommand, which can work the same way if validate='focus'. However, the interpreter doesn't recognize the to-be-modified Entry widget within the validatecommand function. Here is my minimal example:</p>\n\n<pre><code>import tkinter as tk\n\nclass app:\n    def __init__(self,window):\n        self.root = window\n\n        self.tv1 = tk.DoubleVar(None,2)\n        self.tv2 = tk.DoubleVar(None,3)\n        self.tv3 = tk.DoubleVar(None,0)\n\n        self.entry1 = tk.Entry(self.root, textvariable=self.tv1,\n                               validate='focus', validatecommand=self.valid)\n        self.entry2 = tk.Entry(self.root, textvariable=self.tv2,\n                               validate='focus', validatecommand=self.valid)\n        self.label1 = tk.Label(self.root, textvariable=self.tv3)\n\n        self.entry1.pack()\n        self.entry2.pack()\n        self.label1.pack()\n\n    def valid(self):\n        self.tv3.set(self.tv1.get()*self.tv2.get())\n        self.label1.config(fg='red')\n        return True\n\nmain = tk.Tk()\nwin = app(main)\nmain.mainloop()\n</code></pre>\n\n<p>which returns</p>\n\n<blockquote>\n  <p>AttributeError: 'app' object has no attribute 'label1'</p>\n</blockquote>\n\n<p>which is obviously not true.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 552, "user_id": 6712861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee55debfe687ba3065901fdd7895a196?s=128&d=identicon&r=PG&f=1", "display_name": "9bO3av5fw5", "link": "https://stackoverflow.com/users/6712861/9bo3av5fw5"}, "edited": false, "score": 0, "creation_date": 1536789819, "post_id": 52304023, "comment_id": 91555753, "body": "5D could be crude oil or dirty oil?"}, {"owner": {"reputation": 1054, "user_id": 1426941, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8f3c7357f1ed4399f4264556a11e679e?s=128&d=identicon&r=PG", "display_name": "robroc", "link": "https://stackoverflow.com/users/1426941/robroc"}, "reply_to_user": {"reputation": 552, "user_id": 6712861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee55debfe687ba3065901fdd7895a196?s=128&d=identicon&r=PG&f=1", "display_name": "9bO3av5fw5", "link": "https://stackoverflow.com/users/6712861/9bo3av5fw5"}, "edited": false, "score": 0, "creation_date": 1536789960, "post_id": 52304023, "comment_id": 91555794, "body": "Yes, my pseudocode sucks, sorry about that. Imagine there is just one &quot;oil&quot; value per row."}], "answers": [{"tags": [], "owner": {"reputation": 1091, "user_id": 9497687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b54b9d1d94a58d81bd43a7ae50b567d6?s=128&d=identicon&r=PG&f=1", "display_name": "jeschwar", "link": "https://stackoverflow.com/users/9497687/jeschwar"}, "is_accepted": false, "score": 0, "last_activity_date": 1536790471, "creation_date": 1536790471, "answer_id": 52304187, "question_id": 52304023, "link": "https://stackoverflow.com/questions/52304023/create-pandas-column-from-matching-words-in-other-columns/52304187#52304187", "title": "Create pandas column from matching words in other columns", "body": "<p>This answer sums the strings horizontally and then uses regex extract to get the desired output:</p>\n\n<pre><code># insert temporary columns containing spaces for this regex implementation to work\ndf.insert(1,'a',' ')\ndf.insert(3,'b',' ')\n\n# this regex contains a capture group which will get 'oil' instances and the preceding word\ndf['D'] = df.sum(axis=1).str.extract('([a-z]+ oil)')\n\n# remove the temporary columns\ndf.drop(['a', 'b'], axis=1, inplace=True)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 552, "user_id": 6712861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee55debfe687ba3065901fdd7895a196?s=128&d=identicon&r=PG&f=1", "display_name": "9bO3av5fw5", "link": "https://stackoverflow.com/users/6712861/9bo3av5fw5"}, "is_accepted": false, "score": 1, "last_activity_date": 1536790863, "last_edit_date": 1536790863, "creation_date": 1536790481, "answer_id": 52304189, "question_id": 52304023, "link": "https://stackoverflow.com/questions/52304023/create-pandas-column-from-matching-words-in-other-columns/52304189#52304189", "title": "Create pandas column from matching words in other columns", "body": "<p>Something like this:</p>\n\n<pre><code>import pandas as pd\nimport random\n\nvalues = ['oil', 'gas', 'water']\nmodifier = ['dirty', 'crude', 'fuel']\nwordzip = [modifier, values]\ndata = [[wordzip[0][random.randint(0,2)] + ' ' + wordzip[1][random.randint(0,2)] for c in wordzip[0]] for i in range(7)]\ndf=pd.DataFrame(data = data, columns = ['A', 'B', 'C'])\n\ntemp=df[df[['A', 'B', 'C']].apply(lambda x: x.str.contains('oil'))]\ndf['D'] = temp.A.combine_first(temp.B).combine_first(temp.C)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1536790925, "post_id": 52304251, "comment_id": 91556036, "body": "This was the exact same answer I was going to post 10 seconds ago until you already did. Nice."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1536791009, "post_id": 52304251, "comment_id": 91556076, "body": "Had to change my answer to something else ;)"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1536793003, "post_id": 52304251, "comment_id": 91556534, "body": "@coldspeed  I like yours better:-)"}, {"owner": {"reputation": 1054, "user_id": 1426941, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8f3c7357f1ed4399f4264556a11e679e?s=128&d=identicon&r=PG", "display_name": "robroc", "link": "https://stackoverflow.com/users/1426941/robroc"}, "edited": false, "score": 0, "creation_date": 1536850545, "post_id": 52304251, "comment_id": 91580213, "body": "This doesn&#39;t seem to work with <code>str</code> accessor functions in case I need to use <code>str.contains</code> or <code>str.startswith</code>."}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 1, "last_activity_date": 1536790854, "creation_date": 1536790854, "answer_id": 52304251, "question_id": 52304023, "link": "https://stackoverflow.com/questions/52304023/create-pandas-column-from-matching-words-in-other-columns/52304251#52304251", "title": "Create pandas column from matching words in other columns", "body": "<p>Using <code>applymap</code> with <code>bfill</code></p>\n\n<pre><code>df[df.applymap(lambda x : 'oil' in x)].bfill(1).loc[:,'A']\nOut[80]: \n0          NaN\n1          NaN\n2     fuel oil\n3    crude oil\n4    crude oil\n5     fuel oil\n6          NaN\nName: A, dtype: object\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1054, "user_id": 1426941, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8f3c7357f1ed4399f4264556a11e679e?s=128&d=identicon&r=PG", "display_name": "robroc", "link": "https://stackoverflow.com/users/1426941/robroc"}, "edited": false, "score": 0, "creation_date": 1536850407, "post_id": 52304272, "comment_id": 91580127, "body": "Never mind. This works really well. I was looking at my index numbers, not the Series length. And I can just subset the columns I want to extract the values from."}, {"owner": {"reputation": 1054, "user_id": 1426941, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8f3c7357f1ed4399f4264556a11e679e?s=128&d=identicon&r=PG", "display_name": "robroc", "link": "https://stackoverflow.com/users/1426941/robroc"}, "edited": false, "score": 0, "creation_date": 1536851934, "post_id": 52304272, "comment_id": 91581107, "body": "Follow-up question: if each column had a numerical column beside it, how would you extract just the &quot;oil&quot; quantities into a single column?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 1054, "user_id": 1426941, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8f3c7357f1ed4399f4264556a11e679e?s=128&d=identicon&r=PG", "display_name": "robroc", "link": "https://stackoverflow.com/users/1426941/robroc"}, "edited": false, "score": 1, "creation_date": 1536858842, "post_id": 52304272, "comment_id": 91584703, "body": "@robroc you will need to select all the non numeric columns first and then repeat this process. You can look into select_dtypes."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 4, "last_activity_date": 1536790999, "creation_date": 1536790999, "answer_id": 52304272, "question_id": 52304023, "link": "https://stackoverflow.com/questions/52304023/create-pandas-column-from-matching-words-in-other-columns/52304272#52304272", "title": "Create pandas column from matching words in other columns", "body": "<p>Let's use <code>stack</code> + <code>extract</code>:</p>\n\n<pre><code>df['D'] = df.stack().str.extract(r'(.* oil)').groupby(level=0).first()[0]\ndf\n             A            B            C          D\n0    dirty gas    crude oil  dirty water  crude oil\n1  dirty water     fuel gas    dirty gas        NaN\n2  dirty water     fuel gas    dirty oil  dirty oil\n3     fuel oil  crude water    crude gas   fuel oil\n4  dirty water     fuel oil  dirty water   fuel oil\n5    crude oil   fuel water    dirty oil  crude oil\n6   fuel water    crude gas  crude water        NaN\n</code></pre>\n"}], "owner": {"reputation": 1054, "user_id": 1426941, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8f3c7357f1ed4399f4264556a11e679e?s=128&d=identicon&r=PG", "display_name": "robroc", "link": "https://stackoverflow.com/users/1426941/robroc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 52304272, "answer_count": 4, "score": 1, "last_activity_date": 1536790999, "creation_date": 1536789352, "question_id": 52304023, "link": "https://stackoverflow.com/questions/52304023/create-pandas-column-from-matching-words-in-other-columns", "title": "Create pandas column from matching words in other columns", "body": "<p>I have a dataframe with several substance columns, like this:</p>\n\n<pre><code>import random\n\nvalues = ['oil', 'gas', 'water']\nmodifier = ['dirty', 'crude', 'fuel']\nwordzip = [modifier, values]\n\ndata = [[wordzip[0][random.randint(0,2)] + ' ' + wordzip[1][random.randint(0,2)] for c in wordzip[0]] for i in range(7)]\n\npd.DataFrame(data = data, columns = ['A', 'B', 'C'])\n\n             A            B            C   \n0    dirty gas    crude oil  dirty water \n1  dirty water     fuel gas    dirty gas  \n2  dirty water     fuel gas    dirty oil  \n3     fuel oil  crude water    crude gas  \n4  dirty water     fuel oil  dirty water  \n5    crude oil   fuel water    dirty oil\n6   fuel water    crude gas  crude water \n</code></pre>\n\n<p>I want to create a new column with the values within on those columns that contains the word \"oil\". So the final df should look like this:</p>\n\n<pre><code>             A            B            C          D\n0    dirty gas    crude oil  dirty water  crude oil\n1  dirty water     fuel gas    dirty gas  NaN\n2  dirty water     fuel gas    dirty oil  dirty oil\n3     fuel oil  crude water    crude gas  fuel oil\n4  dirty water     fuel oil  dirty water  fuel oil\n5    crude oil   fuel water    dirty oil  crude oil\n6   fuel water    crude gas  crude water  NaN\n</code></pre>\n\n<p>I tried <code>df[['A', 'B', 'C']].apply(lambda x: x.str.contains('oil'))</code> but that returns a Boolean dataframe, not the values themselves.</p>\n"}, {"tags": ["python", "r", "plot", "plotly", "plotly.js"], "comments": [{"owner": {"reputation": 41871, "user_id": 6530970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c261ba0849b06fa0b34a50df358d7fe6?s=128&d=identicon&r=PG&f=1", "display_name": "Maurits Evers", "link": "https://stackoverflow.com/users/6530970/maurits-evers"}, "edited": false, "score": 1, "creation_date": 1536795153, "post_id": 52304003, "comment_id": 91557000, "body": "I&#39;m not sure what you mean by making the x/y axis wider/narrower. Do you want to change the aspect ratio of your plot?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10316615"}, "reply_to_user": {"reputation": 41871, "user_id": 6530970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c261ba0849b06fa0b34a50df358d7fe6?s=128&d=identicon&r=PG&f=1", "display_name": "Maurits Evers", "link": "https://stackoverflow.com/users/6530970/maurits-evers"}, "edited": false, "score": 0, "creation_date": 1536831382, "post_id": 52304003, "comment_id": 91568608, "body": "@MauritsEvers Yes I meant is aspect ratio. So the plot look more rectangular"}], "answers": [{"tags": [], "owner": {"reputation": 2024, "user_id": 9461974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb35846c1f8d76ead6415a2a5db58d76?s=128&d=identicon&r=PG&f=1", "display_name": "Oysiyl", "link": "https://stackoverflow.com/users/9461974/oysiyl"}, "is_accepted": false, "score": 0, "last_activity_date": 1536828260, "creation_date": 1536828260, "answer_id": 52309888, "question_id": 52304003, "link": "https://stackoverflow.com/questions/52304003/make-x-axis-wider-and-y-axis-narrower-in-plotly/52309888#52309888", "title": "Make X axis wider and Y axis narrower in plotly", "body": "<p>You can make <code>yaxis</code> or <code>xaxis</code> more bigger or smaller using <code>domain</code> parameter.\nSuch <a href=\"https://plot.ly/r/mixed-subplots/#mixed-subplot\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9787263"}, "is_accepted": true, "score": 1, "last_activity_date": 1536834574, "creation_date": 1536834574, "answer_id": 52311810, "question_id": 52304003, "link": "https://stackoverflow.com/questions/52304003/make-x-axis-wider-and-y-axis-narrower-in-plotly/52311810#52311810", "title": "Make X axis wider and Y axis narrower in plotly", "body": "<p>You could make the x axis wider using aspectratio</p>\n\n<pre><code>plot_ly(x = kd$x, y = kd$y, z = kd$z) %&gt;% add_surface() %&gt;% layout(scene = list(aspectmode=\"manual\",aspectratio = list( x = 2, y = .5, z = 1)))\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10316615"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 488, "favorite_count": 0, "accepted_answer_id": 52311810, "answer_count": 2, "score": 0, "last_activity_date": 1536834574, "creation_date": 1536789236, "last_edit_date": 1536795114, "question_id": 52304003, "link": "https://stackoverflow.com/questions/52304003/make-x-axis-wider-and-y-axis-narrower-in-plotly", "title": "Make X axis wider and Y axis narrower in plotly", "body": "<p>I am trying to make the x axis of a surface plot wider (more space between each points in x) and y axis narrower (less space between points in y). Here is an example data</p>\n\n<pre><code>kd &lt;- with(MASS::geyser, MASS::kde2d(duration, waiting, n = 50))\np &lt;- plot_ly(x = kd$x, y = kd$y, z = kd$z) %&gt;% add_surface()\n</code></pre>\n\n<p>I couldn't find a param that does this. I came across width param and tried the following, but didn't help </p>\n\n<pre><code>plot_ly(x = kd$x, y = kd$y, z = kd$z) %&gt;% add_surface() %&gt;% layout(title=\"test data\",width=1000)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "tkinter"], "answers": [{"comments": [{"owner": {"reputation": 166, "user_id": 10231550, "user_type": "registered", "profile_image": "https://graph.facebook.com/2077435532521752/picture?type=large", "display_name": "Ron Zhang", "link": "https://stackoverflow.com/users/10231550/ron-zhang"}, "edited": false, "score": 0, "creation_date": 1536809353, "post_id": 52304720, "comment_id": 91559709, "body": "How do you add spacing to one side only?"}, {"owner": {"reputation": 166, "user_id": 10231550, "user_type": "registered", "profile_image": "https://graph.facebook.com/2077435532521752/picture?type=large", "display_name": "Ron Zhang", "link": "https://stackoverflow.com/users/10231550/ron-zhang"}, "edited": false, "score": 0, "creation_date": 1536811700, "post_id": 52304720, "comment_id": 91560217, "body": "The spacing feature from the padding with buttons does work, but however I still cannot find an effective way to get the buttons to have a specific amount of spacing to one specific side."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 166, "user_id": 10231550, "user_type": "registered", "profile_image": "https://graph.facebook.com/2077435532521752/picture?type=large", "display_name": "Ron Zhang", "link": "https://stackoverflow.com/users/10231550/ron-zhang"}, "edited": false, "score": 0, "creation_date": 1536820934, "post_id": 52304720, "comment_id": 91563079, "body": "Sorry, don&#39;t know of a way to do that directly. Perhaps you could put blank place-holder <code>Buttons</code> (or some other widget) between the real ones."}, {"owner": {"reputation": 166, "user_id": 10231550, "user_type": "registered", "profile_image": "https://graph.facebook.com/2077435532521752/picture?type=large", "display_name": "Ron Zhang", "link": "https://stackoverflow.com/users/10231550/ron-zhang"}, "edited": false, "score": 0, "creation_date": 1536828536, "post_id": 52304720, "comment_id": 91566890, "body": "Will such blank placeholder buttons be &quot;invisible&quot;? I also tried using blank labels but they simply won&#39;t work in my existing code because the labels just simply just go above or below the buttons."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1536869005, "post_id": 52304720, "comment_id": 91589556, "body": "Instead of an invisible button with an image, a simpler solution is to use an empty <code>Frame</code> which can be configure to be a specific width in pixels."}], "tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 0, "last_activity_date": 1536868421, "last_edit_date": 1536868421, "creation_date": 1536794675, "answer_id": 52304720, "question_id": 52303983, "link": "https://stackoverflow.com/questions/52303983/how-to-add-a-specific-spacing-in-pixels-between-tkinter-buttons/52304720#52304720", "title": "How to add a specific spacing in pixels between tkinter buttons?", "body": "<p>Using a specific number of pixels of spacing between each <code>Button</code>doesn't sound to me like such as good idea because it isn't very flexible nor easily portable to devices with different resolutions. </p>\n\n<p>Nevertheless I've figured-out a way of doing it\u2014namely by putting a do-nothing invisible button between of the each real ones. This get somewhat involved, mostly because it requires putting an image on each <code>Button</code> used this way so its <code>width</code> option argument will be interpreted as number of pixels instead of number of characters (here's <a href=\"http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/button.html\" rel=\"nofollow noreferrer\">some documentation</a> describing the various <code>Button</code> widget configuration options).</p>\n\n<pre><code>import tkinter as tk\n\n# Inline XBM format data for a 1x1 pixel image.\nBITMAP = \"\"\"\n    #define im_width 1\n    #define im_height 1\n    static char im_bits[] = {\n        0x00\n    };\n\"\"\"\n\nroot = tk.Tk()\nroot.geometry(\"960x600\")\nbitmap = tk.BitmapImage(data=BITMAP, maskdata=BITMAP)\n\nf1 = tk.Frame(root, width=70, height=30)\nf1.grid(row=3, column=0, sticky=tk.EW)\n\ndef banana():\n    print (\"Sundae\")\n\ndef tomato():\n    print (\"Ketchup\")\n\ndef potato():\n    print (\"Potato chips\")\n\ndef layout_buttons(parent, buttons, spacing):\n    if buttons:\n        first, *rest = buttons\n        first.grid(row=0, column=0)  # Position first Button.\n\n        for index, button in enumerate(rest, start=1):\n            col = 2*index\n            # Dummy widget to separate each button from the one before it.\n            separator = tk.Button(parent, relief=tk.FLAT, state=tk.ACTIVE,\n                                  image=bitmap, borderwidth=0, highlightthickness=0,\n                                  width=spacing)\n            separator.grid(row=0, column=col-1)\n            button.grid(row=0, column=col)\n\nbuttons = (\n    tk.Button(f1, text=\"Banana\", command=banana),\n    tk.Button(f1, text=\"Tomato\", command=tomato),\n    tk.Button(f1, text=\"Potato\", command=potato),\n)\n\nlayout_buttons(f1, buttons, 30)\nroot.mainloop()\n</code></pre>\n\n<p>Result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ylnXX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ylnXX.png\" alt=\"screenshot of window with buttons with space between them\"></a></p>\n\n<p>Here's a blow-up showing that the spacing is exactly 30 pixels (as counted in my image editor and indicated by the thin horizontal black line between the adjacent edges of the two <code>Button</code>s).</p>\n\n<p><a href=\"https://i.stack.imgur.com/8HCg9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8HCg9.png\" alt=\"blow-up of previous screenshot\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1536876735, "post_id": 52321022, "comment_id": 91592427, "body": "Bryan: Ah, yes, sounds much simpler...I was hoping you&#39;d chime in with some useful information or a &quot;trick&quot; to do it... <code>;&#172;)</code>"}, {"owner": {"reputation": 166, "user_id": 10231550, "user_type": "registered", "profile_image": "https://graph.facebook.com/2077435532521752/picture?type=large", "display_name": "Ron Zhang", "link": "https://stackoverflow.com/users/10231550/ron-zhang"}, "edited": false, "score": 0, "creation_date": 1536879117, "post_id": 52321022, "comment_id": 91593002, "body": "What exactly do I have to change my code to make the program look like what you have explained?"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "reply_to_user": {"reputation": 166, "user_id": 10231550, "user_type": "registered", "profile_image": "https://graph.facebook.com/2077435532521752/picture?type=large", "display_name": "Ron Zhang", "link": "https://stackoverflow.com/users/10231550/ron-zhang"}, "edited": false, "score": 0, "creation_date": 1536880869, "post_id": 52321022, "comment_id": 91593385, "body": "@RonZhang: I don&#39;t understand the question. Just replace your existing calls to <code>grid</code> with the code in my answer."}, {"owner": {"reputation": 166, "user_id": 10231550, "user_type": "registered", "profile_image": "https://graph.facebook.com/2077435532521752/picture?type=large", "display_name": "Ron Zhang", "link": "https://stackoverflow.com/users/10231550/ron-zhang"}, "edited": false, "score": 0, "creation_date": 1536881015, "post_id": 52321022, "comment_id": 91593408, "body": "Then what happens to the <code>f1.grid_columnconfigure((1, 3), minsize=10, weight=0)</code>? Where does it go in my current program?"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "reply_to_user": {"reputation": 166, "user_id": 10231550, "user_type": "registered", "profile_image": "https://graph.facebook.com/2077435532521752/picture?type=large", "display_name": "Ron Zhang", "link": "https://stackoverflow.com/users/10231550/ron-zhang"}, "edited": false, "score": 1, "creation_date": 1536882274, "post_id": 52321022, "comment_id": 91593656, "body": "@RonZhang: anywhere you want after creating <code>f1</code>"}], "tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": false, "score": 0, "last_activity_date": 1536868939, "creation_date": 1536868939, "answer_id": 52321022, "question_id": 52303983, "link": "https://stackoverflow.com/questions/52303983/how-to-add-a-specific-spacing-in-pixels-between-tkinter-buttons/52321022#52321022", "title": "How to add a specific spacing in pixels between tkinter buttons?", "body": "<p>Adding space between widgets depends on how you are putting the widgets in the window. Since you are using <code>grid</code>, one simple solution is to leave empty columns between the buttons, and then give these columns a <code>minsize</code> equal to the space you want.</p>\n\n<p>Example:</p>\n\n<pre><code>f1.grid_columnconfigure((1, 3), minsize=10, weight=0)\n\nbutton_qwer.grid(row=0, column=0)\nbutton_asdf.grid(row=0, column=2)\nbutton_zxcv.grid(row=0, column=4)\n</code></pre>\n"}], "owner": {"reputation": 166, "user_id": 10231550, "user_type": "registered", "profile_image": "https://graph.facebook.com/2077435532521752/picture?type=large", "display_name": "Ron Zhang", "link": "https://stackoverflow.com/users/10231550/ron-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1536868939, "creation_date": 1536789076, "last_edit_date": 1536793994, "question_id": 52303983, "link": "https://stackoverflow.com/questions/52303983/how-to-add-a-specific-spacing-in-pixels-between-tkinter-buttons", "title": "How to add a specific spacing in pixels between tkinter buttons?", "body": "<p>I have written some code for some buttons. However, I am not sure how to add a specific number of pixels of spacing for each button. So far is the code I have written. However, I have not yet figured out a reliable way to add spacing between the buttons in pixel sizes.</p>\n\n<pre><code>import tkinter as tk\n#from tkinter import PhotoImage\n\ndef banana():\n    print (\"Sundae\")\n\ndef tomato():\n    print (\"Ketchup\")\n\ndef potato():\n    print (\"Potato chips\")\n\nroot = tk.Tk()\nroot.geometry(\"960x600\")\n\nf1 = tk.Frame(root, width=70, height=30)\nf1.grid(row=3, column=0, sticky=\"we\")\n\nbutton_qwer = tk.Button(f1, text=\"Banana\", command=banana)\nbutton_asdf = tk.Button(f1, text=\"Tomato\", command=tomato)\nbutton_zxcv = tk.Button(f1, text=\"Potato\", command=potato)\n\nbutton_qwer.grid(row=0, column=0)\nbutton_asdf.grid(row=0, column=1)\nbutton_zxcv.grid(row=0, column=2)\n\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "pdf", "text", "pypdf2"], "comments": [{"owner": {"reputation": 714, "user_id": 9036814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250742688f24344257034879f1fc76ea?s=128&d=identicon&r=PG&f=1", "display_name": "mckuok", "link": "https://stackoverflow.com/users/9036814/mckuok"}, "edited": false, "score": 0, "creation_date": 1536792686, "post_id": 52303980, "comment_id": 91556485, "body": "Can you print <code>text1</code> and see what it contains?"}, {"owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "reply_to_user": {"reputation": 714, "user_id": 9036814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250742688f24344257034879f1fc76ea?s=128&d=identicon&r=PG&f=1", "display_name": "mckuok", "link": "https://stackoverflow.com/users/9036814/mckuok"}, "edited": false, "score": 0, "creation_date": 1536794074, "post_id": 52303980, "comment_id": 91556746, "body": "@mckuok it contains the exact same thing... You can easily reproduce my problem with the code I gave you and the paper I gave you in the post. I think I followed the MWE recommendations :). It&#39;s late here for me so I&#39;ll try to reply tomorrow."}, {"owner": {"reputation": 714, "user_id": 9036814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250742688f24344257034879f1fc76ea?s=128&d=identicon&r=PG&f=1", "display_name": "mckuok", "link": "https://stackoverflow.com/users/9036814/mckuok"}, "edited": false, "score": 1, "creation_date": 1536794158, "post_id": 52303980, "comment_id": 91556766, "body": "From what I read on the function <code>extractText()</code>, it returns <code>a unicode string object.</code>, not each line. So the behavior you observe makes sense"}, {"owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "reply_to_user": {"reputation": 714, "user_id": 9036814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250742688f24344257034879f1fc76ea?s=128&d=identicon&r=PG&f=1", "display_name": "mckuok", "link": "https://stackoverflow.com/users/9036814/mckuok"}, "edited": false, "score": 0, "creation_date": 1536827361, "post_id": 52303980, "comment_id": 91566279, "body": "@mckuok but then how do you read line by line ?"}, {"owner": {"reputation": 714, "user_id": 9036814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250742688f24344257034879f1fc76ea?s=128&d=identicon&r=PG&f=1", "display_name": "mckuok", "link": "https://stackoverflow.com/users/9036814/mckuok"}, "edited": false, "score": 0, "creation_date": 1536878984, "post_id": 52303980, "comment_id": 91592978, "body": "It is very unfortunate that pdf format does not work that way. Spaces and lines are awful. I found <a href=\"http://survivalengineer.blogspot.com/2014/04/parsing-pdfs-in-python.html\" rel=\"nofollow noreferrer\">this</a> for you. Pdfminer does additional work to figure out spaces and lines."}, {"owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "reply_to_user": {"reputation": 714, "user_id": 9036814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250742688f24344257034879f1fc76ea?s=128&d=identicon&r=PG&f=1", "display_name": "mckuok", "link": "https://stackoverflow.com/users/9036814/mckuok"}, "edited": false, "score": 0, "creation_date": 1536927976, "post_id": 52303980, "comment_id": 91610633, "body": "@mckuok ok thanks for that I would look into it and share an answer it if I manage to make it work. I knew about Pdfminer before but it seem a hassle to install so I thought I would go for the much easier PyPDF2. Thanks for your answer"}, {"owner": {"reputation": 714, "user_id": 9036814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250742688f24344257034879f1fc76ea?s=128&d=identicon&r=PG&f=1", "display_name": "mckuok", "link": "https://stackoverflow.com/users/9036814/mckuok"}, "edited": false, "score": 0, "creation_date": 1536956536, "post_id": 52303980, "comment_id": 91624771, "body": "use a <code>virtualenvironment</code>, and <code>pip install pdfminer</code>"}, {"owner": {"reputation": 3723, "user_id": 6109920, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-XXyibEYLPZI/AAAAAAAAAAI/AAAAAAAAAaY/DLJt0qVitJw/photo.jpg?sz=128", "display_name": "Rahul Agarwal", "link": "https://stackoverflow.com/users/6109920/rahul-agarwal"}, "edited": false, "score": 0, "creation_date": 1538123820, "post_id": 52303980, "comment_id": 92041755, "body": "I have used Pypdf2 for doing NLP on Pdf&#39;s by converting them to text. Even though here it is printing a word by word in every line, I am pretty sure if you want to use regex or anyother thing on the extracted text it will work fine!!"}, {"owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "reply_to_user": {"reputation": 3723, "user_id": 6109920, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-XXyibEYLPZI/AAAAAAAAAAI/AAAAAAAAAaY/DLJt0qVitJw/photo.jpg?sz=128", "display_name": "Rahul Agarwal", "link": "https://stackoverflow.com/users/6109920/rahul-agarwal"}, "edited": false, "score": 0, "creation_date": 1538167913, "post_id": 52303980, "comment_id": 92063531, "body": "@RahulAgarwal well here it is printing a letter per line, so that is really not fine. Especially since white spaces are removed"}, {"owner": {"reputation": 3723, "user_id": 6109920, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-XXyibEYLPZI/AAAAAAAAAAI/AAAAAAAAAaY/DLJt0qVitJw/photo.jpg?sz=128", "display_name": "Rahul Agarwal", "link": "https://stackoverflow.com/users/6109920/rahul-agarwal"}, "edited": false, "score": 0, "creation_date": 1538168815, "post_id": 52303980, "comment_id": 92063819, "body": "I have also tried it, and what you are saying is true. But I am hoping you dont want to just print information line by line..the end objective must be something else. So, if you try your end objective on &quot;text&quot; or &quot;text1&quot; it may produce the desired result!!"}], "owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 634, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1536789048, "creation_date": 1536789048, "question_id": 52303980, "link": "https://stackoverflow.com/questions/52303980/pypdf2-returns-only-one-line-per-character", "title": "PyPDF2 returns only one line per character", "body": "<p>I am currently trying to read and extract text from research papers (PDFs). I have tried using PyPDF with the following code:</p>\n\n<pre><code>import PyPDF2\n\npdfFileObj = open('my_research_paper.pdf', 'rb')\npdfReader = PyPDF2.PdfFileReader(pdfFileObj)\nprint(\"Number of pages:-\"+str(pdfReader.numPages))\nnum = pdfReader.numPages\ni =0\nwhile(i&lt;num):\n    pageObj = pdfReader.getPage(i)\n    text=pageObj.extractText()\n    text1 = text.lower()\n    for line in text1:\n        print(line)\n    i= I+1\n</code></pre>\n\n<p>The problem is that the output from that is only one character per line so that it makes it hard to process whole sentences. </p>\n\n<p>This is the kind of output I get from <a href=\"https://trackr-media.tangiblemedia.org/publishedmedia/Papers/653-OTQxO/Published/PDF\" rel=\"nofollow noreferrer\">this file</a>:</p>\n\n<pre><code>t\nh\na\nt\nc\na\nn\nb\ne\nh\na\nv\ne\ni\nn\na\nn\no\nn\n-\nd\ne\nt\ne\nr\nm\ni\nn\ni\n</code></pre>\n\n<p>Would anyone know why it does appear like that and why I can't get proper line that are easier to process. The ideal for me would be to get sentences from the pdf so that I could then look for some specific words in these sentences and count their occurrences.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10213, "user_id": 1359058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f191024999528a3a7375f8d7181e1fe6?s=128&d=identicon&r=PG", "display_name": "abc", "link": "https://stackoverflow.com/users/1359058/abc"}, "edited": false, "score": 1, "creation_date": 1536789296, "post_id": 52303977, "comment_id": 91555611, "body": "You are summing them and they are not in a list as well. Using a similar idea you can just remember the maximum element that you saw between the inputs."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 1, "creation_date": 1536789312, "post_id": 52303977, "comment_id": 91555618, "body": "You don&#39;t need a list. Just add another number <code>biggest = -sys.maxsize</code> (initialize it at the beginning, together with the others), and every time you read <code>num</code> do <code>if num &gt; buggest: biggest = num</code>. You will also need <code>import sys</code>."}, {"owner": {"reputation": 4254, "user_id": 10255652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5DDj.jpg?s=128&g=1", "display_name": "vash_the_stampede", "link": "https://stackoverflow.com/users/10255652/vash-the-stampede"}, "edited": false, "score": 0, "creation_date": 1536797957, "post_id": 52303977, "comment_id": 91557532, "body": "Are you just using <code>-999</code> to exit the loop and get the print statements?"}], "answers": [{"comments": [{"owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "edited": false, "score": 0, "creation_date": 1536789592, "post_id": 52304016, "comment_id": 91555677, "body": "biggest is not defined before your conditional, so this will throw an error"}, {"owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "edited": false, "score": 0, "creation_date": 1536789762, "post_id": 52304016, "comment_id": 91555734, "body": "no, as far as I can see it is not. <code>biggest = max(total)</code> is wrong code, which they ask to be replaced by sth that works."}, {"owner": {"reputation": 194, "user_id": 10322433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ouTTb.png?s=128&g=1", "display_name": "blueheart", "link": "https://stackoverflow.com/users/10322433/blueheart"}, "reply_to_user": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "edited": false, "score": 0, "creation_date": 1536789884, "post_id": 52304016, "comment_id": 91555776, "body": "sorry, my bad, I saw wrong, but he clearly knows how to do that, and since he&#39;s using negative numbers to end the program,it is up to him to decide the initial value."}], "tags": [], "owner": {"reputation": 194, "user_id": 10322433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ouTTb.png?s=128&g=1", "display_name": "blueheart", "link": "https://stackoverflow.com/users/10322433/blueheart"}, "is_accepted": false, "score": 1, "last_activity_date": 1536789313, "creation_date": 1536789313, "answer_id": 52304016, "question_id": 52303977, "link": "https://stackoverflow.com/questions/52303977/how-do-i-find-the-biggest-number-that-are-not-in-a-list/52304016#52304016", "title": "How do i find the biggest number that are not in a list?", "body": "<p>you can just:</p>\n\n<pre><code>if num &gt; biggest:\n   biggest = num\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "is_accepted": false, "score": 0, "last_activity_date": 1536789334, "creation_date": 1536789334, "answer_id": 52304019, "question_id": 52303977, "link": "https://stackoverflow.com/questions/52303977/how-do-i-find-the-biggest-number-that-are-not-in-a-list/52304019#52304019", "title": "How do i find the biggest number that are not in a list?", "body": "<p>initialize biggest with a value which can not be bigger than any input:</p>\n\n<pre><code>import numpy\nbiggest = -np.inf\n</code></pre>\n\n<p>replace </p>\n\n<pre><code>biggest = max(total)\n</code></pre>\n\n<p>by</p>\n\n<pre><code>biggest = max(biggest, num)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1536789886, "post_id": 52304021, "comment_id": 91555777, "body": "@abc That is a weakness of my answer, but the original code has similar weaknesses, e.g. not testing the result of <code>int()</code>.  If the questioner wants to address those weaknesses, I hope my answer helps them do so."}, {"owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "edited": false, "score": 0, "creation_date": 1536790181, "post_id": 52304021, "comment_id": 91555841, "body": "That&#39;s at least an attitude. :) However - the question is <code>How do i find the biggest number that are not in a list?</code> not <code>How many people can give me a hint which works only in half of the cases...?</code>"}], "tags": [], "owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "is_accepted": false, "score": 2, "last_activity_date": 1536789338, "creation_date": 1536789338, "answer_id": 52304021, "question_id": 52303977, "link": "https://stackoverflow.com/questions/52303977/how-do-i-find-the-biggest-number-that-are-not-in-a-list/52304021#52304021", "title": "How do i find the biggest number that are not in a list?", "body": "<pre><code>num=0 \ntotal=0 \naverage=0 \ncount=0\nbiggest=0\n\nwhile True: \n  num=input(\"enter a number:\")\n  num=int(num) \n  if num==-999: \n    break \n  total=total + num\n  count=count+1 \n  if num &gt; biggest:\n      biggest = num\n\naverage=total/count \n\n#print the results\nprint(\"the total is:\", total)\nprint(\"the biggest number is:\", biggest)\nprint(\"the average is:\", average)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "edited": false, "score": 1, "creation_date": 1536789880, "post_id": 52304029, "comment_id": 91555773, "body": "My test would be to enter <code>-100000, -200000, -300000, -999</code>"}, {"owner": {"reputation": 4583, "user_id": 2561714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/752d92663322e652223379492f83bbaa?s=128&d=identicon&r=PG", "display_name": "NickD", "link": "https://stackoverflow.com/users/2561714/nickd"}, "edited": false, "score": 0, "creation_date": 1536792232, "post_id": 52304029, "comment_id": 91556376, "body": "This would fail if all the numbers are less than -9999. Also, your answer lacks detail: you should describe how your answer works."}], "tags": [], "owner": {"reputation": 130, "user_id": 10193118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e14c04c39b654d14363b470010a982?s=128&d=identicon&r=PG&f=1", "display_name": "kw1jybo", "link": "https://stackoverflow.com/users/10193118/kw1jybo"}, "is_accepted": false, "score": 0, "last_activity_date": 1536846675, "last_edit_date": 1536846675, "creation_date": 1536789381, "answer_id": 52304029, "question_id": 52303977, "link": "https://stackoverflow.com/questions/52303977/how-do-i-find-the-biggest-number-that-are-not-in-a-list/52304029#52304029", "title": "How do i find the biggest number that are not in a list?", "body": "<p>Initialize a variable <code>biggest</code> before the loop:</p>\n\n<pre><code>biggest = -9999\n</code></pre>\n\n<p>This should be initialized to something smaller than any of the numbers that the program is going to encounter. The above assumes that -9999 is such a number which is a bad assumption in general; there are better ways to accomplish that, e.g. one of the comments suggests</p>\n\n<pre><code>import sys\nbiggest = -sys.maxint\n</code></pre>\n\n<p>That's the negative of the maximum integer value that this implementation can represent.</p>\n\n<p>Then in the body of the loop, update the variable <code>biggest</code>:</p>\n\n<pre><code>biggest = max(biggest, num)\n</code></pre>\n\n<p>If <code>num</code> is bigger than <code>biggest</code> then <code>max(biggest, num)</code> will return the value of <code>num</code> so that <code>biggest</code> will get the value of <code>num</code>. If it is smaller, <code>biggest</code> will stay unchanged. In other words, <code>biggest</code> remembers the largest value seen so far. At the end of the loop, it will then hold the largest value seen, period.</p>\n"}, {"comments": [{"owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "edited": false, "score": 0, "creation_date": 1536789821, "post_id": 52304087, "comment_id": 91555755, "body": "My test would be to enter <code>-1, -2, -3, -999</code>"}, {"owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "edited": false, "score": 0, "creation_date": 1536790386, "post_id": 52304087, "comment_id": 91555891, "body": "Then your program will crash throwing an error <code>TypeError: &#39;&gt;&#39; not supported between instances of &#39;NoneType&#39; and &#39;int&#39;</code>"}, {"owner": {"reputation": 3328, "user_id": 5599028, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/gEgEG.png?s=128&g=1", "display_name": "khelili miliana", "link": "https://stackoverflow.com/users/5599028/khelili-miliana"}, "reply_to_user": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "edited": false, "score": 0, "creation_date": 1536790677, "post_id": 52304087, "comment_id": 91555970, "body": "Yes , your &#39;re write"}], "tags": [], "owner": {"reputation": 3328, "user_id": 5599028, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/gEgEG.png?s=128&g=1", "display_name": "khelili miliana", "link": "https://stackoverflow.com/users/5599028/khelili-miliana"}, "is_accepted": false, "score": 0, "last_activity_date": 1536790648, "last_edit_date": 1536790648, "creation_date": 1536789761, "answer_id": 52304087, "question_id": 52303977, "link": "https://stackoverflow.com/questions/52303977/how-do-i-find-the-biggest-number-that-are-not-in-a-list/52304087#52304087", "title": "How do i find the biggest number that are not in a list?", "body": "<p>Here idited your code to be right </p>\n\n<pre><code>num=0 \ntotal=0 \naverage=0 \ncount=0 \nbiggest = None  ### added\n\nwhile True: \n  num=input(\"enter a number:\")\n  num=int(num)\n  if num==-999: \n    break \n  total=total + num\n  count=count+1 \n\n  #biggest = max(total)   Here where was you wrong\n  if num &gt; biggest :   #### added\n     biggest = num     #### added\n\naverage=total/count \n\n#print the results\nprint(\"the total is:\", total)\nprint(\"the biggest number is:\", biggest)\nprint(\"the average is:\", average)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "edited": false, "score": 0, "creation_date": 1536790062, "post_id": 52304106, "comment_id": 91555819, "body": "My test would be to enter -1, -2, -3, -999"}, {"owner": {"reputation": 51, "user_id": 10260372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t51Eb.png?s=128&g=1", "display_name": "Juan Pablo Peveri Rodriguez", "link": "https://stackoverflow.com/users/10260372/juan-pablo-peveri-rodriguez"}, "reply_to_user": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "edited": false, "score": 0, "creation_date": 1536790797, "post_id": 52304106, "comment_id": 91556005, "body": "Then you could set the biggest variable to be None. So at the beginning you have it set at None, and you do an if like this: if biggest is None or num &gt; biggest:     biggest = num"}, {"owner": {"reputation": 19, "user_id": 9964725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f906e98ebdd13ce1ef6e29ec4e580fad?s=128&d=identicon&r=PG&f=1", "display_name": "R Gao", "link": "https://stackoverflow.com/users/9964725/r-gao"}, "edited": false, "score": 1, "creation_date": 1536918556, "post_id": 52304106, "comment_id": 91605434, "body": "Thank you! This one helped alot"}], "tags": [], "owner": {"reputation": 51, "user_id": 10260372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t51Eb.png?s=128&g=1", "display_name": "Juan Pablo Peveri Rodriguez", "link": "https://stackoverflow.com/users/10260372/juan-pablo-peveri-rodriguez"}, "is_accepted": true, "score": 0, "last_activity_date": 1536789881, "creation_date": 1536789881, "answer_id": 52304106, "question_id": 52303977, "link": "https://stackoverflow.com/questions/52303977/how-do-i-find-the-biggest-number-that-are-not-in-a-list/52304106#52304106", "title": "How do i find the biggest number that are not in a list?", "body": "<p>Let me share you a solution for your problem. (Take a look at the if clause after the check of the number being \"-999\"). Feel free to ask if you have any questions! Hope it helps you</p>\n\n<pre><code>num=0 \ntotal=0 \naverage=0 \ncount=0\nbiggest=0 \n\nwhile True: \n  num=input(\"enter a number:\")\n  num=int(num) \n  if num==-999: \n    break\n  if num &gt; biggest:\n    biggest = num\n  total=total + num\n  count=count+1 \n\naverage=total/count \n\n#print the results\nprint(\"the total is:\", total)\nprint(\"the biggest number is:\", biggest)\nprint(\"the average is:\", average)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4254, "user_id": 10255652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5DDj.jpg?s=128&g=1", "display_name": "vash_the_stampede", "link": "https://stackoverflow.com/users/10255652/vash-the-stampede"}, "is_accepted": false, "score": 0, "last_activity_date": 1536798621, "creation_date": 1536798621, "answer_id": 52305088, "question_id": 52303977, "link": "https://stackoverflow.com/questions/52303977/how-do-i-find-the-biggest-number-that-are-not-in-a-list/52305088#52305088", "title": "How do i find the biggest number that are not in a list?", "body": "<p>If you look into some other methods you can get a lot more functionality and do even more with your program, take a look at this code and try to take some ideas it could make your task and future tasks easier for you</p>\n\n<pre><code>numbers = []\n\nprint(\"Enter any non-number to perform calculations.\\n\")\n\nwhile True:\n    try:\n        num = int(input(\"Enter a number: \"))\n        numbers.append(num)\n\n    except ValueError:\n        break\n\ntotal = sum(numbers)\naverage = total/len(numbers)\nbiggest = max(numbers)\n\nprint(f\"\\nThe total is: {total}\")\nprint(f\"The biggest number is: {biggest}\")\nprint(f\"The average is: {average}\")\n</code></pre>\n\n<blockquote>\n<pre><code>(xenial)vash@localhost:~/python$ python3.7 biggest.py\nEnter any non-number to perform calculations.\n\nEnter a number: 1\nEnter a number: 2\nEnter a number: 3\nEnter a number: 4\nEnter a number: -1\nEnter a number: 2\nEnter a number: 3\nEnter a number: q\n\nThe total is: 14\nThe biggest number is: 4\nThe average is: 2.0\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 19, "user_id": 9964725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f906e98ebdd13ce1ef6e29ec4e580fad?s=128&d=identicon&r=PG&f=1", "display_name": "R Gao", "link": "https://stackoverflow.com/users/9964725/r-gao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "accepted_answer_id": 52304106, "answer_count": 7, "score": 0, "last_activity_date": 1536846675, "creation_date": 1536789033, "question_id": 52303977, "link": "https://stackoverflow.com/questions/52303977/how-do-i-find-the-biggest-number-that-are-not-in-a-list", "title": "How do i find the biggest number that are not in a list?", "body": "<p>I am trying to make a program that gives you the average, total, and biggest number entered. I am stuck at the biggest number part. My numbers are not in a list, so I don't know how to find the biggest one. </p>\n\n<pre><code>num=0 \ntotal=0 \naverage=0 \ncount=0 \n\nwhile True: \n  num=input(\"enter a number:\")\n  num=int(num) \n  if num==-999: \n    break \n  total=total + num\n  count=count+1 \n  biggest = max(total)\n\naverage=total/count \n\n#print the results\nprint(\"the total is:\", total)\nprint(\"the biggest number is:\", biggest)\nprint(\"the average is:\", average)\n</code></pre>\n\n<p>I would like it to print the biggest number at the end.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver", "amazon-ec2", "phantomjs"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 9132256, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GirreAw5e8s/AAAAAAAAAAI/AAAAAAAAACk/pJhSovy10Zw/photo.jpg?sz=128", "display_name": "requizm", "link": "https://stackoverflow.com/users/9132256/requizm"}, "edited": false, "score": 0, "creation_date": 1536836048, "post_id": 52304270, "comment_id": 91571254, "body": "Oh thank you. I did run &#39;chmod a+x phantomsjs&#39; in terminal. Then i get error: &#39;phantomjs unexpectedly exited. Status code was: 127&#39; Then i install libfontconfig and problem solved. &#39;yum install fontconfig freetype freetype-devel fontconfig-devel libstdc++&#39;"}], "tags": [], "owner": {"reputation": 53073, "user_id": 16148, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/XTzm1.jpg?s=128&g=1", "display_name": "Corey Goldberg", "link": "https://stackoverflow.com/users/16148/corey-goldberg"}, "is_accepted": true, "score": 3, "last_activity_date": 1536790982, "creation_date": 1536790982, "answer_id": 52304270, "question_id": 52303961, "link": "https://stackoverflow.com/questions/52303961/phantomjs-executable-may-have-wrong-permissions/52304270#52304270", "title": "&#39;phantomjs&#39; executable may have wrong permissions", "body": "<p>change the permissions so it is executable.</p>\n\n<p><code>$ chmod a+x phantomsjs</code></p>\n"}, {"tags": [], "owner": {"reputation": 57, "user_id": 12175303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rhPDo.jpg?s=128&g=1", "display_name": "Taha Hamedani", "link": "https://stackoverflow.com/users/12175303/taha-hamedani"}, "is_accepted": false, "score": 1, "last_activity_date": 1581574117, "last_edit_date": 1581574117, "creation_date": 1581572774, "answer_id": 60201173, "question_id": 52303961, "link": "https://stackoverflow.com/questions/52303961/phantomjs-executable-may-have-wrong-permissions/60201173#60201173", "title": "&#39;phantomjs&#39; executable may have wrong permissions", "body": "<p>Grant full permission to the phantomjs file :</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>sudo chmod a+rwx phantomjs \n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 9132256, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GirreAw5e8s/AAAAAAAAAAI/AAAAAAAAACk/pJhSovy10Zw/photo.jpg?sz=128", "display_name": "requizm", "link": "https://stackoverflow.com/users/9132256/requizm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1321, "favorite_count": 0, "accepted_answer_id": 52304270, "answer_count": 2, "score": 2, "last_activity_date": 1581574117, "creation_date": 1536788939, "question_id": 52303961, "link": "https://stackoverflow.com/questions/52303961/phantomjs-executable-may-have-wrong-permissions", "title": "&#39;phantomjs&#39; executable may have wrong permissions", "body": "<p>This script works fine on Google Cloud Service. But i get error on Amazon Web Service EC2: (operation system: linux 64bit)</p>\n\n<pre><code>selenium.common.exceptions.WebDriverException: Message: 'phantomjs' executable may have wrong permissions.\n</code></pre>\n\n<p>Full Code:</p>\n\n<pre><code> /usr/local/lib/python3.7/site-packages/selenium/webdriver/phantomjs/webdriver.py:49: UserWarning: Selenium support for PhantomJS has been deprecated, please use headless versions of Chrome or Firefox instead\n  warnings.warn('Selenium support for PhantomJS has been deprecated, please use headless '\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.7/site-packages/selenium/webdriver/common/service.py\", line 76, in start\n    stdin=PIPE)\n  File \"/usr/lib64/python3.7/subprocess.py\", line 756, in __init__\n    restore_signals, start_new_session)\n  File \"/usr/lib64/python3.7/subprocess.py\", line 1499, in _execute_child\n    raise child_exception_type(errno_num, err_msg, err_filename)\nPermissionError: [Errno 13] Permission denied: '/usr/local/share/phantomjs-2.1.1-linux-x86_64/bin/phantomjs'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"turkish.py\", line 114, in &lt;module&gt;\n    bot = TransBot()\n  File \"turkish.py\", line 13, in __init__\n    self.driver = webdriver.PhantomJS(executable_path='/usr/local/share/phantomjs-2.1.1-linux-x86_64/bin/phantomjs')\n  File \"/usr/local/lib/python3.7/site-packages/selenium/webdriver/phantomjs/webdriver.py\", line 56, in __init__\n    self.service.start()\n  File \"/usr/local/lib/python3.7/site-packages/selenium/webdriver/common/service.py\", line 88, in start\n    os.path.basename(self.path), self.start_error_message)\nselenium.common.exceptions.WebDriverException: Message: 'phantomjs' executable may have wrong permissions.\n</code></pre>\n\n<p>I try move '/usr/local/bin' and '/usr/local/share' phantomjs file. Same error. What do you suggest? Sorry my english. </p>\n"}, {"tags": ["python", "jquery", "ajax", "selenium", "iframe"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10355496, "user_type": "registered", "profile_image": "https://graph.facebook.com/1822091434572042/picture?type=large", "display_name": "Guilherme Moreira Barbosa", "link": "https://stackoverflow.com/users/10355496/guilherme-moreira-barbosa"}, "edited": false, "score": 0, "creation_date": 1536817525, "post_id": 52306724, "comment_id": 91561764, "body": "Thank you very much! If it&#39;s not too much to ask, could you also give me at least a hint about how can I change this &quot;time.sleep(50)&quot; line? I wanted to use webdriver.wait, with the condition being the website&#39;s database query is completed, but I don&#39;t know exactly how it does that. Is there a &quot;jquery done&quot; or something like that?"}, {"owner": {"reputation": 1872, "user_id": 2425654, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/q5XPD.jpg?s=128&g=1", "display_name": "thebadguy", "link": "https://stackoverflow.com/users/2425654/thebadguy"}, "reply_to_user": {"reputation": 3, "user_id": 10355496, "user_type": "registered", "profile_image": "https://graph.facebook.com/1822091434572042/picture?type=large", "display_name": "Guilherme Moreira Barbosa", "link": "https://stackoverflow.com/users/10355496/guilherme-moreira-barbosa"}, "edited": false, "score": 0, "creation_date": 1536818878, "post_id": 52306724, "comment_id": 91562278, "body": "add this line inplace of sleep WebDriverWait(driver, 30).until(EC.presence_of_element_located((By.CSS_SELECTOR,&#39;#&zwnj;&#8203;divContainerIframeBm&zwnj;&#8203;f &gt; form &gt; div &gt; div &gt; div:nth-child(1) &gt; div:nth-child(3) &gt; div &gt; div &gt; p&#39;))) with these imports from selenium.webdriver.support.ui import WebDriverWait from selenium.webdriver.support import expected_conditions as EC from selenium.webdriver.common.by import By"}], "tags": [], "owner": {"reputation": 1872, "user_id": 2425654, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/q5XPD.jpg?s=128&g=1", "display_name": "thebadguy", "link": "https://stackoverflow.com/users/2425654/thebadguy"}, "is_accepted": true, "score": 0, "last_activity_date": 1536818985, "last_edit_date": 1536818985, "creation_date": 1536813483, "answer_id": 52306724, "question_id": 52303910, "link": "https://stackoverflow.com/questions/52303910/using-selenium-in-python-to-get-data-from-dynamic-website-how-to-discover-the-w/52306724#52306724", "title": "Using selenium in python to get data from dynamic website: how to discover the way databases querys are done?", "body": "<p>This code will work(updated few lines in your code)</p>\n\n<pre><code>from selenium import webdriver\nfrom bs4 import BeautifulSoup as bs\nimport time\nimport pandas as pd\ndef GetDataFromWeb(day, month, year):\n\n***#to avoid data error in date handler***\nif month &lt; 10:\n    month=\"0\"+str(month)\nif day &lt; 10:\n    day=\"0\"+str(day)\n\noptions = webdriver.ChromeOptions()\noptions.add_argument('headless')\noptions.add_argument('window-size=1920x1080')\n#had to use these two below because of webdriver crashing issues\noptions.add_argument('no-sandbox')\noptions.add_argument('disable-dev-shm-usage')\n\ndriver = webdriver.Chrome(chrome_options=options)\n\ndriver.get(\"http://www.b3.com.br/pt_br/market-data-e-indices/servicos-de-dados/market-data/consultas/mercado-de-derivativos/precos-referenciais/taxas-referenciais-bm-fbovespa/\")\n\n#the table is on an iframe\niframe = driver.find_element_by_id(\"bvmf_iframe\")\ndriver.switch_to.default_content()\ndriver.switch_to.frame(iframe)\n\n#getting to the place where I should input the data\ndate = driver.find_element_by_id(\"Data\")\ndate.clear() ***#to clear auto populated data***\ndate.send_keys(((str(day),str(month),str(year)))) ***# removed the join part***\n\ndriver.find_element_by_tag_name(\"button\").click()\n\n#I have put this wait just to be sure it doesn't try to get info from an unloaded page\ntime.sleep(50)\n\npage = bs(driver.page_source,\"html.parser\")\n\ntable = page.find(id='tb_principal1')\n\nheaders = ['Dias Corridos', '252','360']\n\nmatrix = []\nfor rows in table.select('tr')[2:]:\n    values = []\n    for columns in rows.select('td'):\n        values.append(columns.text.replace(',','.'))\n    matrix.append(values)\n\ndf = pd.DataFrame(data=matrix, columns=headers)\n\ndriver.close()\n\n#only the first 2 columns are interesting for my purposes\nreturn df.iloc[:,0:2]\n\nprint GetDataFromWeb(3,9,2018)\n</code></pre>\n\n<p>It will print the matching data for the required date.</p>\n\n<p>I have added <strong><em>#to avoid data error in date handler</em></strong></p>\n\n<pre><code>if month &lt; 10:\n    month=\"0\"+str(month)\nif day &lt; 10:\n    day=\"0\"+str(day)\n</code></pre>\n\n<p><code>date.clear()</code> <strong><em>#to clear auto populated data</em></strong>\n <code>date.send_keys(((str(day),str(month),str(year))))</code> <strong><em># removed the join part</em></strong></p>\n\n<p>Note the problem in your code was the date&amp; month fields take two digit number and <code>date.send_keys(\"/\".join((str(day), str(month), str(year))))</code> line was generating an error because of which the system date was picked and you always see same data coming for any input data. Also when you click on the date it was picking default date so first, we have to clear that and send custom date. Hope this helps</p>\n\n<hr>\n\n<p>Update for additional query: Add these imports</p>\n\n<pre><code>from selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.common.by import By\n</code></pre>\n\n<p>Add this line in place of wait</p>\n\n<pre><code>WebDriverWait(driver, 30).until(EC.presence_of_element_located((By.CSS_SELECTOR,'#divContainerIframeBmf &gt; form &gt; div &gt; div &gt; div:nth-child(1) &gt; div:nth-child(3) &gt; div &gt; div &gt; p')))\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10355496, "user_type": "registered", "profile_image": "https://graph.facebook.com/1822091434572042/picture?type=large", "display_name": "Guilherme Moreira Barbosa", "link": "https://stackoverflow.com/users/10355496/guilherme-moreira-barbosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 1, "accepted_answer_id": 52306724, "answer_count": 1, "score": 0, "last_activity_date": 1536818985, "creation_date": 1536788651, "question_id": 52303910, "link": "https://stackoverflow.com/questions/52303910/using-selenium-in-python-to-get-data-from-dynamic-website-how-to-discover-the-w", "title": "Using selenium in python to get data from dynamic website: how to discover the way databases querys are done?", "body": "<p>I had some experience with coding before, but not specifically for web applications. I have been tasked with getting data from this website: <a href=\"http://www.b3.com.br/pt_br/market-data-e-indices/servicos-de-dados/market-data/consultas/mercado-de-derivativos/precos-referenciais/taxas-referenciais-bm-fbovespa/\" rel=\"nofollow noreferrer\">http://www.b3.com.br/pt_br/market-data-e-indices/servicos-de-dados/market-data/consultas/mercado-de-derivativos/precos-referenciais/taxas-referenciais-bm-fbovespa/</a></p>\n\n<p>They are avaliable on a day-to-day basis. I have used selenium in Python, and so far the results are good: I can get the entire table, store it in a pandas dataframe, and then to a mysql database and stuff. The problem is: the result from the website is always the same!</p>\n\n<p>Here is my code:</p>\n\n<pre><code>from selenium import webdriver\nfrom bs4 import BeautifulSoup as bs\nimport time\ndef GetDataFromWeb(day, month, year):\noptions = webdriver.ChromeOptions()\noptions.add_argument('headless')\noptions.add_argument('window-size=1920x1080')\n#had to use these two below because of webdriver crashing issues\noptions.add_argument('no-sandbox')\noptions.add_argument('disable-dev-shm-usage')\n\ndriver = webdriver.Chrome(chrome_options=options)\n\ndriver.get(\"http://www.b3.com.br/pt_br/market-data-e-indices/servicos-de-dados/market-data/consultas/mercado-de-derivativos/precos-referenciais/taxas-referenciais-bm-fbovespa/\")\n\n#the table is on an iframe\niframe = driver.find_element_by_id(\"bvmf_iframe\")\ndriver.switch_to.default_content()\ndriver.switch_to.frame(iframe)\n\n#getting to the place where I should input the data\ndate = driver.find_element_by_id(\"Data\")\ndate.send_keys(\"/\".join((str(day),str(month),str(year))))\ndate = driver.find_element_by_tag_name(\"button\").click()\n\n#I have put this wait just to be sure it doesn't try to get info from an unloaded page\ntime.sleep(5)\n\npage = bs(driver.page_source,\"html.parser\")\n\ntable = page.find(id='tb_principal1')\n\nheaders = ['Dias Corridos', '252','360']\n\nmatrix = []\nfor rows in table.select('tr')[2:]:\n    values = []\n    for columns in rows.select('td'):\n        values.append(columns.text.replace(',','.'))\n    matrix.append(values)\n\ndf = pd.DataFrame(data=matrix, columns=headers)\n\ndriver.close()\n\n#only the first 2 columns are interesting for my purposes\nreturn df.iloc[:,0:2]\n</code></pre>\n\n<p>The table resulting from this function is always the same, no matter what inputs I send to it. And they seem to be from the corresponding date of 06/09/2018 (month=09,day=06). I think the main problem is that I don't know how the queries to their database is done, so this always runs like a \"default date\". I have read some people talking about Ajax and JavaScript requests, but I don't know if that's the case. How can I tell?</p>\n"}, {"tags": ["python", "scrapy"], "comments": [{"owner": {"reputation": 1031, "user_id": 4108524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fS7pf.jpg?s=128&g=1", "display_name": "jschnurr", "link": "https://stackoverflow.com/users/4108524/jschnurr"}, "edited": false, "score": 1, "creation_date": 1536800161, "post_id": 52303882, "comment_id": 91557905, "body": "You need to <code>return</code> the items, not <code>print</code> them.  Returned values are captured by Scrapy, and will be output as per your <code>-o items.csv</code> parameter."}], "answers": [{"tags": [], "owner": {"reputation": 3389, "user_id": 3121975, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/27507c7b9958f8863c6640543baec276?s=128&d=identicon&r=PG&f=1", "display_name": "Woody1193", "link": "https://stackoverflow.com/users/3121975/woody1193"}, "is_accepted": false, "score": 0, "last_activity_date": 1536789827, "last_edit_date": 1536789827, "creation_date": 1536789005, "answer_id": 52303974, "question_id": 52303882, "link": "https://stackoverflow.com/questions/52303882/python-scrapy-not-outputting-to-csv-file/52303974#52303974", "title": "Python Scrapy not outputting to csv file", "body": "<p>On inspection of your code, I notice a number of problems:</p>\n\n<p>First, you initialize <code>items</code> to a tuple, when it should be a list: <code>items = []</code>.</p>\n\n<p>You should change your <code>name</code> property to reflect the name you want on your crawler so you can use it like so: <code>scrapy crawl my_crawler</code> where <code>name = \"my_crawler\"</code>.</p>\n\n<p><code>start_urls</code> is supposed to contain strings, not <code>Request</code> objects. You should change the entry from <code>page</code> to the exact search string you want to use. If you have a number of search strings and want to iterate over them, I would suggest using a <a href=\"https://docs.scrapy.org/en/latest/topics/spider-middleware.html\" rel=\"nofollow noreferrer\">middleware</a>.</p>\n\n<p>When you try to extract the data from CSS you're forgetting to call <code>extract_all()</code> which would actually transform your selector into string data which you could use.</p>\n\n<p>Also, you shouldn't be redirecting to the standard output stream because a lot of logging goes there and it'll make your output file really messy. Instead, you should extract the responses into <a href=\"https://docs.scrapy.org/en/latest/topics/items.html\" rel=\"nofollow noreferrer\">items</a> using <a href=\"https://docs.scrapy.org/en/latest/topics/loaders.html\" rel=\"nofollow noreferrer\">loaders</a>.</p>\n\n<p>Finally, you're probably missing the appropriate settings from your <code>settings.py</code> file. You can find the relevant documentation <a href=\"https://docs.scrapy.org/en/latest/topics/feed-exports.html#topics-feed-format-csv\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<pre><code>FEED_FORMAT = \"csv\"\nFEED_EXPORT_FIELDS = [\"Field 1\", \"Field 2\", \"Field 3\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 738, "user_id": 6042206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aMQZp.jpg?s=128&g=1", "display_name": "Kamikaze_goldfish", "link": "https://stackoverflow.com/users/6042206/kamikaze-goldfish"}, "edited": false, "score": 0, "creation_date": 1536852125, "post_id": 52305215, "comment_id": 91581213, "body": "Is there another way to contact you other than here? I have more questions about this code and how I can make it work further but i don&#39;t want to clog up this."}, {"owner": {"reputation": 326, "user_id": 7494890, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ICAJ4.png?s=128&g=1", "display_name": "soldy", "link": "https://stackoverflow.com/users/7494890/soldy"}, "reply_to_user": {"reputation": 738, "user_id": 6042206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aMQZp.jpg?s=128&g=1", "display_name": "Kamikaze_goldfish", "link": "https://stackoverflow.com/users/6042206/kamikaze-goldfish"}, "edited": false, "score": 0, "creation_date": 1536863447, "post_id": 52305215, "comment_id": 91586912, "body": "Telegram: @Nozent"}], "tags": [], "owner": {"reputation": 326, "user_id": 7494890, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ICAJ4.png?s=128&g=1", "display_name": "soldy", "link": "https://stackoverflow.com/users/7494890/soldy"}, "is_accepted": true, "score": 3, "last_activity_date": 1536799901, "creation_date": 1536799901, "answer_id": 52305215, "question_id": 52303882, "link": "https://stackoverflow.com/questions/52303882/python-scrapy-not-outputting-to-csv-file/52305215#52305215", "title": "Python Scrapy not outputting to csv file", "body": "<p>Simple spider without project.</p>\n\n<p>Use my code, I wrote comments to make it easier to understand. This spider looks for all blocks on all pages for a pair of parameters \"service\" and \"location\". To run, use:</p>\n\n<p>In your case:</p>\n\n<blockquote>\n  <p>scrapy runspider yellowpages.py -a servise=\"Plumbers\" -a location=\"Hammond, LA\" -o Hammondsplumbers.csv</p>\n</blockquote>\n\n<p>The code will also work with any queries. For example:</p>\n\n<blockquote>\n  <p>scrapy runspider yellowpages.py -a servise=\"Doctors\" -a location=\"California, MD\" -o MDDoctors.json</p>\n</blockquote>\n\n<p>etc...</p>\n\n<pre><code># -*- coding: utf-8 -*-\nimport scrapy\nfrom scrapy.http import Request\nfrom scrapy.exceptions import CloseSpider\n\n\nclass YellowpagesSpider(scrapy.Spider):\n    name = 'yellowpages'\n    allowed_domains = ['yellowpages.com']\n    start_urls = ['https://www.yellowpages.com/']\n\n    # We can use any pair servise + location on our request\n    def __init__(self, servise=None, location=None):\n        self.servise = servise\n        self.location = location\n\n    def parse(self, response):\n        # If \"service \" and\" location \" are defined \n        if self.servise and self.location:\n            # Create search phrase using \"service\" and \" location\"\n            search_url = 'search?search_terms={}&amp;geo_location_terms={}'.format(self.servise, self.location)\n            # Send request with url \"yellowpages.com\" + \"search_url\", then call parse_result\n            yield Request(url=response.urljoin(search_url), callback=self.parse_result)\n        else:\n            # Else close our spider\n            # You can add deffault value if you want.\n            self.logger.warning('=== Please use keys -a servise=\"service_name\" -a location=\"location\" ===')\n            raise CloseSpider()\n\n    def parse_result(self, response):\n        # all blocks without AD posts\n        posts = response.xpath('//div[@class=\"search-results organic\"]//div[@class=\"v-card\"]')\n        for post in posts:\n            yield {\n                'title': post.xpath('.//span[@itemprop=\"name\"]/text()').extract_first(),\n                'url': response.urljoin(post.xpath('.//a[@class=\"business-name\"]/@href').extract_first()),\n            }\n\n        next_page = response.xpath('//a[@class=\"next ajax-page\"]/@href').extract_first()\n        # If we have next page url\n        if next_page:\n            # Send request with url \"yellowpages.com\" + \"next_page\", then call parse_result\n            yield scrapy.Request(url=response.urljoin(next_page), callback=self.parse_result)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2108, "user_id": 5939254, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rlneIgGDRmo/AAAAAAAAAAI/AAAAAAAAAY8/nARwrdmA_jY/photo.jpg?sz=128", "display_name": "Yash Pokar", "link": "https://stackoverflow.com/users/5939254/yash-pokar"}, "is_accepted": false, "score": 1, "last_activity_date": 1536807877, "creation_date": 1536807877, "answer_id": 52306070, "question_id": 52303882, "link": "https://stackoverflow.com/questions/52303882/python-scrapy-not-outputting-to-csv-file/52306070#52306070", "title": "Python Scrapy not outputting to csv file", "body": "<pre><code>for item in items:\n    print(item)\n</code></pre>\n\n<p>put yield instead of print there,</p>\n\n<pre><code>for item in items:\n    yield item\n</code></pre>\n"}], "owner": {"reputation": 738, "user_id": 6042206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aMQZp.jpg?s=128&g=1", "display_name": "Kamikaze_goldfish", "link": "https://stackoverflow.com/users/6042206/kamikaze-goldfish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 52305215, "answer_count": 3, "score": 0, "last_activity_date": 1536807877, "creation_date": 1536788528, "question_id": 52303882, "link": "https://stackoverflow.com/questions/52303882/python-scrapy-not-outputting-to-csv-file", "title": "Python Scrapy not outputting to csv file", "body": "<p>What am I doing wrong with the script so it's not outputting a csv file with the data? I am running the script with <code>scrapy runspider yellowpages.py -o items.csv</code> and still nothing is coming out but a blank csv file. I have followed different things here and also watched youtube trying to figure out where I am making the mistake and still cannot figure out what I am not doing correctly. </p>\n\n<pre><code># -*- coding: utf-8 -*-\nimport scrapy\nimport requests\n\nsearch = \"Plumbers\"\nlocation = \"Hammond, LA\"\nurl = \"https://www.yellowpages.com/search\"\nq = {'search_terms': search, 'geo_location_terms': location}\npage = requests.get(url, params=q)\npage = page.url\nitems = ()\n\n\nclass YellowpagesSpider(scrapy.Spider):\n    name = 'quotes'\n    allowed_domains = ['yellowpages.com']\n    start_urls = [page]\n\n    def parse(self, response):\n        self.log(\"I just visited: \" + response.url)\n        items = response.css('a[class=business-name]::attr(href)')\n        for item in items:\n            print(item)\n</code></pre>\n"}, {"tags": ["python", "json", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 303, "user_id": 4430375, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/51ee13ebaef0e2d2b136f5f07b5f5249?s=128&d=identicon&r=PG&f=1", "display_name": "twegner", "link": "https://stackoverflow.com/users/4430375/twegner"}, "edited": false, "score": 0, "creation_date": 1536788969, "post_id": 52303771, "comment_id": 91555514, "body": "have you tried json.load() instead of loads()?"}, {"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 0, "creation_date": 1536791854, "post_id": 52303771, "comment_id": 91556279, "body": "Use <code>&quot;float64&quot;</code> instead of <code>&quot;np.float64&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 23864, "user_id": 146073, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2c69ccb9eb83c7ef2ba155a850df68a9?s=128&d=identicon&r=PG", "display_name": "holdenweb", "link": "https://stackoverflow.com/users/146073/holdenweb"}, "edited": false, "score": 0, "creation_date": 1536837343, "post_id": 52303999, "comment_id": 91571960, "body": "This simply describes a different but equivalent way to read the JSON, but does not address the problem, which is the inability of the JSON parser to understand symbolic values."}], "tags": [], "owner": {"reputation": 303, "user_id": 4430375, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/51ee13ebaef0e2d2b136f5f07b5f5249?s=128&d=identicon&r=PG&f=1", "display_name": "twegner", "link": "https://stackoverflow.com/users/4430375/twegner"}, "is_accepted": false, "score": -1, "last_activity_date": 1536789217, "creation_date": 1536789217, "answer_id": 52303999, "question_id": 52303771, "link": "https://stackoverflow.com/questions/52303771/whats-the-proper-way-to-format-and-pass-a-json-file-as-an-object-of-parameters/52303999#52303999", "title": "What&#39;s the proper way to format and pass a json file as an object of parameters into a pandas function?", "body": "<p>When reading JSON formatted data from an external file use <code>json.load(file_path)</code> like this:</p>\n\n<p><code>\nimport json\nwith open(file_path, 'r') as j:\n    obj = json.load(j)</code></p>\n"}, {"comments": [{"owner": {"reputation": 23864, "user_id": 146073, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2c69ccb9eb83c7ef2ba155a850df68a9?s=128&d=identicon&r=PG", "display_name": "holdenweb", "link": "https://stackoverflow.com/users/146073/holdenweb"}, "edited": false, "score": 0, "creation_date": 1536837337, "post_id": 52304077, "comment_id": 91571956, "body": "This simply describes a different but equivalent way to read the JSON, but does not address the problem, which is the inability of the JSON parser to understand symbolic values."}], "tags": [], "owner": {"reputation": 133, "user_id": 1319300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ac0ef1b944b1da6179d47814fc06681?s=128&d=identicon&r=PG", "display_name": "al3x609", "link": "https://stackoverflow.com/users/1319300/al3x609"}, "is_accepted": false, "score": -1, "last_activity_date": 1536789685, "creation_date": 1536789685, "answer_id": 52304077, "question_id": 52303771, "link": "https://stackoverflow.com/questions/52303771/whats-the-proper-way-to-format-and-pass-a-json-file-as-an-object-of-parameters/52304077#52304077", "title": "What&#39;s the proper way to format and pass a json file as an object of parameters into a pandas function?", "body": "<p>try this, read the .json not like string\n<strong>json.load(opened)</strong> . load is for a file, loads for a string...</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport json\nwith open('json.json') as opened:\n\n        options = json.load(opened)\n\n        import_pd_df = pd.read_excel(**options)\n\n        print(import_pd_df)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9739, "user_id": 3691783, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/18bfba7d4beb1c210fa670cf57c66f4b?s=128&d=identicon&r=PG", "display_name": "Matt Messersmith", "link": "https://stackoverflow.com/users/3691783/matt-messersmith"}, "is_accepted": false, "score": 1, "last_activity_date": 1536790690, "creation_date": 1536790690, "answer_id": 52304231, "question_id": 52303771, "link": "https://stackoverflow.com/questions/52303771/whats-the-proper-way-to-format-and-pass-a-json-file-as-an-object-of-parameters/52304231#52304231", "title": "What&#39;s the proper way to format and pass a json file as an object of parameters into a pandas function?", "body": "<p><code>np.float64</code> is a numpy dtype that is also a callable (which it must be a callable in order to be a converter from <code>pandas</code> perspective). <code>\"np.float64\"</code> is a string that cannot be called. You need to convert the string you've stored in the JSON file (<code>\"np.float64\"</code>) into the callable desired (<code>np.float64</code>). You <em>could</em> do it like this:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport json\n\nwith open('json.json', 'r') as opened:\n        options = json.loads(opened.read())\n        for col, converter in options[\"converters\"].items():\n                exec('options[\"converters\"][\"{0}\"] = {1}'.format(col, converter))\n        import_pd_df = pd.read_excel(**options)\n        print(import_pd_df)\n</code></pre>\n\n<p>If we step through with <code>pdb</code>, it's easy to verify the column converters get changed to a <code>np.float64</code>:</p>\n\n<pre><code>-&gt; import_pd_df = pd.read_excel(**options)\n(Pdb) l\n  5     with open('json.json', 'r') as opened:\n  6         options = json.loads(opened.read())\n  7         for col, converter in options[\"converters\"].items():\n  8             exec('options[\"converters\"][\"{0}\"] = {1}'.format(col, converter))\n  9         import pdb; pdb.set_trace()\n 10  -&gt;     import_pd_df = pd.read_excel(**options)\n 11         print(import_pd_df)\n[EOF]\n(Pdb) options[\"converters\"][\"col1\"]\n&lt;class 'numpy.float64'&gt;\n(Pdb) options[\"converters\"][\"col2\"]\n&lt;class 'numpy.float64'&gt;\n</code></pre>\n\n<p>as desired.</p>\n\n<p><strong>Note: You might want to consider just storing your \"options\" file as a <code>pickle</code> file instead of JSON.</strong> That way you can just serialize Python functions and objects (like <code>np.float64</code>) to your \"options\" file. You won't have to do goofy string conversions. I can provide an example if desired, but there are plenty elsewhere.</p>\n\n<p><strong>Note2: This is not particularly secure.</strong> Be sure that you trust the party that is giving you that <code>json.json</code> file. You're open to some pretty serious injection attacks with the code above. <code>pickle</code> has similar issues: you'll have to trust the party that's giving you the file.</p>\n"}, {"tags": [], "owner": {"reputation": 23864, "user_id": 146073, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2c69ccb9eb83c7ef2ba155a850df68a9?s=128&d=identicon&r=PG", "display_name": "holdenweb", "link": "https://stackoverflow.com/users/146073/holdenweb"}, "is_accepted": false, "score": 0, "last_activity_date": 1536837228, "last_edit_date": 1536837228, "creation_date": 1536791386, "answer_id": 52304316, "question_id": 52303771, "link": "https://stackoverflow.com/questions/52303771/whats-the-proper-way-to-format-and-pass-a-json-file-as-an-object-of-parameters/52304316#52304316", "title": "What&#39;s the proper way to format and pass a json file as an object of parameters into a pandas function?", "body": "<p>The problem is that you are trying to use a string value to represent a Python symbol.</p>\n\n<p>Unfortunately, JSON can only represent number and strings, and knows nothing about symbolic values such as <code>np.float64</code> so cannot parse them. Similarly, it would not work to call <code>pd.read_excel</code> with string values for those options (but it did work without the quotes, because you were then using the right values - functions, which Python can call).</p>\n\n<p>You would therefore have to do some conversion after reading the JSON input before you obtained a dictionary you could pass to <code>excel_read</code>,</p>\n"}], "owner": {"reputation": 2206, "user_id": 1175788, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/ed6991f13be59c3996322a3afd84708e?s=128&d=identicon&r=PG", "display_name": "simplycoding", "link": "https://stackoverflow.com/users/1175788/simplycoding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 547, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1536837228, "creation_date": 1536787960, "question_id": 52303771, "link": "https://stackoverflow.com/questions/52303771/whats-the-proper-way-to-format-and-pass-a-json-file-as-an-object-of-parameters", "title": "What&#39;s the proper way to format and pass a json file as an object of parameters into a pandas function?", "body": "<p>I've got a JSON file that contains the parameters/options for pandas' <code>read_excel</code> function. I'm having trouble passing them into that function call.</p>\n\n<p>JSON file is structured similar to this: </p>\n\n<pre><code>{\n    \"io\": \"~/home/test.xlsx\",\n    \"sheet_name\": \"Sheet1\",\n    \"header\": 0,\n    \"usecols\": 2,\n    \"engine\": \"xlrd\",\n    \"converters\": {\n            \"col1\": \"np.float64\",\n            \"col2\": \"np.float64\"\n    }\n}\n</code></pre>\n\n<p>And I call it in my Python script like this: </p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport json\nwith open('json.json', 'r') as opened:\n\n        options = json.loads(opened.read())\n\n        import_pd_df = pd.read_excel(**options)\n\n        print(import_pd_df)\n</code></pre>\n\n<p>When I have the options declared as a dictionary within the Python script and remove the double quotes that are around <code>np.float64</code>, the script works. But when I move the options to the JSON file, it fails while trying to parse the <code>np.float64</code>.</p>\n\n<p>The error I get is: <code>TypeError: 'str' object is not callable</code></p>\n\n<p>Is there a way to properly format the JSON to be used as options in the function?</p>\n"}, {"tags": ["python", "google-bigquery"], "answers": [{"tags": [], "owner": {"reputation": 25696, "user_id": 6253347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1387a55798cae58a3a836dcbcd6e1951?s=128&d=identicon&r=PG&f=1", "display_name": "Elliott Brossard", "link": "https://stackoverflow.com/users/6253347/elliott-brossard"}, "is_accepted": true, "score": 1, "last_activity_date": 1536788943, "creation_date": 1536788943, "answer_id": 52303963, "question_id": 52303761, "link": "https://stackoverflow.com/questions/52303761/python-sdk-query-job-result-fail-to-poll-job-status/52303963#52303963", "title": "python sdk query_job.result() fail to poll job status", "body": "<p>This indicates an error in your query, not in the client code. The error is:</p>\n\n<blockquote>\n  <p>Cannot return an invalid timestamp value of 1534808046936000000 microseconds relative to the Unix epoch. The range of valid timestamp values is [0001-01-1 00:00:00, 9999-12-31 23:59:59.999999]; error in writing field request_started_at</p>\n</blockquote>\n\n<p>It sounds like you have a field/column named <code>request_started_at</code> that is scaled incorrectly; <code>1534808046936000000</code> should probably be <code>1534808046936000</code>. There is some material related to this in the <a href=\"https://cloud.google.com/bigquery/docs/reference/standard-sql/migrating-from-legacy-sql#timestamp_differences\" rel=\"nofollow noreferrer\">guide on migrating to standard SQL</a>. If all the values of this column are scaled incorrectly, then you can do something like this to fix them:</p>\n\n<pre><code>CREATE OR REPLACE dataset.table AS\nSELECT *\n  REPLACE (TIMESTAMP_MICROS(DIV(UNIX_MICROS(request_started_at), 1000)) AS request_started_at)\nFROM dataset.table\n</code></pre>\n\n<p>This replaces the values in the column after scaling them down by a factor of 1000.</p>\n"}], "owner": {"reputation": 132, "user_id": 9085972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdTvY.jpg?s=128&g=1", "display_name": "Lei Chen", "link": "https://stackoverflow.com/users/9085972/lei-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 52303963, "answer_count": 1, "score": 0, "last_activity_date": 1536788943, "creation_date": 1536787911, "question_id": 52303761, "link": "https://stackoverflow.com/questions/52303761/python-sdk-query-job-result-fail-to-poll-job-status", "title": "python sdk query_job.result() fail to poll job status", "body": "<p>google-cloud-bigquery version is 1.5.0 and the stack crashed in sdk code. is there any workaround?</p>\n\n<p><code>\n[2018-09-12 21:18:01,265] {base_task_runner.py:98} INFO - Subtask:     query_job.result()  # Waits for the query to finish\n...\n[2018-09-12 21:18:01,315] {base_task_runner.py:98} INFO - Subtask:     raise exceptions.from_http_response(response)\n[2018-09-12 21:18:01,316] {base_task_runner.py:98} INFO - Subtask: google.api_core.exceptions.BadRequest: 400 GET https://www.googleapis.com/bigquery/v2/projects/fsql-production/queries/[my job id]?maxResults=0: Cannot return an invalid timestamp value of 1534808046936000000 microseconds relative to the Unix epoch. The range of valid timestamp values is [0001-01-1 00:00:00, 9999-12-31 23:59:59.999999]; error in writing field request_started_at\n</code></p>\n"}, {"tags": ["python", "pandas", "dataframe", "replace"], "comments": [{"owner": {"reputation": 619, "user_id": 1680521, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pu7Cx.jpg?s=128&g=1", "display_name": "yogkm", "link": "https://stackoverflow.com/users/1680521/yogkm"}, "edited": false, "score": 1, "creation_date": 1536788282, "post_id": 52303742, "comment_id": 91555298, "body": "Can you mention what error you&#39;re getting?"}, {"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 1, "creation_date": 1536788730, "post_id": 52303742, "comment_id": 91555451, "body": "you&#39;re generating the new string, but you&#39;re not saving it anywhere, I believe :)"}, {"owner": {"reputation": 15, "user_id": 3565521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/080ea873e58031ceb5fc96dbbc60e03e?s=128&d=identicon&r=PG&f=1", "display_name": "user3565521", "link": "https://stackoverflow.com/users/3565521/user3565521"}, "edited": false, "score": 0, "creation_date": 1536789078, "post_id": 52303742, "comment_id": 91555550, "body": "yes you were right, I thought that replaces and saves directly"}, {"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1536789609, "post_id": 52303742, "comment_id": 91555683, "body": "check if there&#39;s a <code>inplace</code> parameter somwhere, if there&#39;s one then you can use that syntax to achieve what you want"}, {"owner": {"reputation": 15, "user_id": 3565521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/080ea873e58031ceb5fc96dbbc60e03e?s=128&d=identicon&r=PG&f=1", "display_name": "user3565521", "link": "https://stackoverflow.com/users/3565521/user3565521"}, "edited": false, "score": 0, "creation_date": 1536789942, "post_id": 52303742, "comment_id": 91555788, "body": "yes with inline = True it works too! Great advice, thank you so much!"}], "answers": [{"tags": [], "owner": {"reputation": 15, "user_id": 3565521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/080ea873e58031ceb5fc96dbbc60e03e?s=128&d=identicon&r=PG&f=1", "display_name": "user3565521", "link": "https://stackoverflow.com/users/3565521/user3565521"}, "is_accepted": false, "score": 0, "last_activity_date": 1536789212, "creation_date": 1536789212, "answer_id": 52303996, "question_id": 52303742, "link": "https://stackoverflow.com/questions/52303742/replace-function-of-python-not-working-in-a-for-loop/52303996#52303996", "title": "Replace Function of Python Not Working in a For Loop", "body": "<p>this solved the issue</p>\n\n<pre><code> temp = df[1] \n for j in range (0, len(products_master)):\n        temp['Product_Name'] = temp['Product_Name'].replace({products_master[j] : 'PROD' + str(j)})\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 3565521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/080ea873e58031ceb5fc96dbbc60e03e?s=128&d=identicon&r=PG&f=1", "display_name": "user3565521", "link": "https://stackoverflow.com/users/3565521/user3565521"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536789212, "creation_date": 1536787795, "question_id": 52303742, "link": "https://stackoverflow.com/questions/52303742/replace-function-of-python-not-working-in-a-for-loop", "title": "Replace Function of Python Not Working in a For Loop", "body": "<p>I have a very basic case where I am lost a bit. I have products_master as series and want to iterate one by one to find and replace these entries in some other dataframe column. It works well if I do it separately but not in the for loop.</p>\n\n<pre><code>temp = df[1] \nfor j in range (0, len(products_master)):\n    temp['Product_Name'].replace(products_master[j], 'PROD' + str(j))\n</code></pre>\n\n<p>Any quick ideas?</p>\n\n<p>Best,\nAtamert</p>\n"}, {"tags": ["python", "python-3.x", "bots", "telegram", "telegram-bot"], "comments": [{"owner": {"reputation": 1828, "user_id": 1886270, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d424665f1f96bbf49a74da036ebde03a?s=128&d=identicon&r=PG", "display_name": "Danil Pyatnitsev", "link": "https://stackoverflow.com/users/1886270/danil-pyatnitsev"}, "edited": false, "score": 0, "creation_date": 1537174266, "post_id": 52303725, "comment_id": 91672071, "body": "Can you specify an technical problem? Wellcome to stackoverflow! Please read How to ask: <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 286, "user_id": 9899109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588a5a4486a0813c251ccdb8e55ffd4e?s=128&d=identicon&r=PG&f=1", "display_name": "M. T.", "link": "https://stackoverflow.com/users/9899109/m-t"}, "reply_to_user": {"reputation": 1828, "user_id": 1886270, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d424665f1f96bbf49a74da036ebde03a?s=128&d=identicon&r=PG", "display_name": "Danil Pyatnitsev", "link": "https://stackoverflow.com/users/1886270/danil-pyatnitsev"}, "edited": false, "score": 0, "creation_date": 1537220693, "post_id": 52303725, "comment_id": 91696973, "body": "for example I want to send a message every hour in a telegram channel, how can I make this? (without input from users)"}, {"owner": {"reputation": 397, "user_id": 5405813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XEiH6.jpg?s=128&g=1", "display_name": "bipin_s", "link": "https://stackoverflow.com/users/5405813/bipin-s"}, "edited": false, "score": 1, "creation_date": 1540702709, "post_id": 52303725, "comment_id": 92958146, "body": "@m-t In order to be able to do so, you will have first to:      Create a Telegram public channel      Create a Telegram BOT via BotFather     Set the bot as administrator in your channel  Provided that you did the above, now you can send a message to your channel by issuing and HTTP GET request to the Telegram BOT API at the following URL: api.telegram.org/bot[BOT_API_KEY]/sendMessage?chat_id=[MY_CH&zwnj;&#8203;ANNEL_NAME]&amp;text=[MY&zwnj;&#8203;_MESSAGE_TEXT]"}], "owner": {"reputation": 286, "user_id": 9899109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588a5a4486a0813c251ccdb8e55ffd4e?s=128&d=identicon&r=PG&f=1", "display_name": "M. T.", "link": "https://stackoverflow.com/users/9899109/m-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 709, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536787722, "creation_date": 1536787722, "question_id": 52303725, "link": "https://stackoverflow.com/questions/52303725/how-to-make-an-auto-posting-bot-for-telegram-in-python", "title": "How to make an auto posting bot for Telegram in python?", "body": "<p>I want to make a simple bot for a channel in Telegram that an a specific interval of time send a message.\nI only read about other bot that makes this...</p>\n\n<p>Someone knows something more?</p>\n"}, {"tags": ["python", "pyspark", "apache-spark-mllib", "random-forest"], "comments": [{"owner": {"reputation": 45172, "user_id": 4685471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/327dc718c142e3ea70e5db4b38050a36?s=128&d=identicon&r=PG", "display_name": "desertnaut", "link": "https://stackoverflow.com/users/4685471/desertnaut"}, "edited": false, "score": 0, "creation_date": 1536850059, "post_id": 52303723, "comment_id": 91579937, "body": "Impossible to say without knowing your data; are you sure you don&#39;t have a class imbalance issue, i.e. <i>much more</i> 0&#39;s than 1&#39;s in your initial <code>df</code>?"}, {"owner": {"reputation": 9, "user_id": 10355477, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HBQnLhIGiMw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPyy7WRch8pdvl_Jq4GDYB5uCytMg/mo/photo.jpg?sz=128", "display_name": "Jiahuan Li", "link": "https://stackoverflow.com/users/10355477/jiahuan-li"}, "reply_to_user": {"reputation": 45172, "user_id": 4685471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/327dc718c142e3ea70e5db4b38050a36?s=128&d=identicon&r=PG", "display_name": "desertnaut", "link": "https://stackoverflow.com/users/4685471/desertnaut"}, "edited": false, "score": 0, "creation_date": 1536869439, "post_id": 52303723, "comment_id": 91589750, "body": "I used dummy data in this model, there is no 0 in the original data set"}, {"owner": {"reputation": 45172, "user_id": 4685471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/327dc718c142e3ea70e5db4b38050a36?s=128&d=identicon&r=PG", "display_name": "desertnaut", "link": "https://stackoverflow.com/users/4685471/desertnaut"}, "edited": false, "score": 0, "creation_date": 1536871789, "post_id": 52303723, "comment_id": 91590850, "body": "You mean, you get <code>0.0</code> as prediction, but there is no <code>0.0</code> in your original labels??"}, {"owner": {"reputation": 9, "user_id": 10355477, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HBQnLhIGiMw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPyy7WRch8pdvl_Jq4GDYB5uCytMg/mo/photo.jpg?sz=128", "display_name": "Jiahuan Li", "link": "https://stackoverflow.com/users/10355477/jiahuan-li"}, "reply_to_user": {"reputation": 45172, "user_id": 4685471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/327dc718c142e3ea70e5db4b38050a36?s=128&d=identicon&r=PG", "display_name": "desertnaut", "link": "https://stackoverflow.com/users/4685471/desertnaut"}, "edited": false, "score": 0, "creation_date": 1537036970, "post_id": 52303723, "comment_id": 91640913, "body": "Yes. Do you know what could cause the result to be 0?"}], "owner": {"reputation": 9, "user_id": 10355477, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HBQnLhIGiMw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPyy7WRch8pdvl_Jq4GDYB5uCytMg/mo/photo.jpg?sz=128", "display_name": "Jiahuan Li", "link": "https://stackoverflow.com/users/10355477/jiahuan-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536792971, "creation_date": 1536787710, "last_edit_date": 1536792971, "question_id": 52303723, "link": "https://stackoverflow.com/questions/52303723/pyspark-mllib-random-forest-prediction-result-always-0", "title": "PySpark &amp; MLLib: random forest prediction result always 0", "body": "<pre><code>df = pd.read_csv(r'main.csv', header=0)\nspark = SparkSession \\\n    .builder \\\n    .master(\"local\") \\\n    .appName(\"myapp\") \\\n    .getOrCreate()\ns_df = spark.createDataFrame(df)\ntransformed_df = s_df.rdd.map(lambda row: LabeledPoint(row[0], Vectors.dense(row[1:])))\n\nsplits = [0.7, 0.3]\ntraining_data, test_data = transformed_df.randomSplit(splits, 100)\nmodel = RandomForest.trainClassifier(training_data, numClasses=2, categoricalFeaturesInfo={},\n                                 numTrees=3, featureSubsetStrategy=\"auto\",\n                                 impurity='gini', maxDepth=4, maxBins=32)\n\npredictions = model.predict(test_data.map(lambda x: x.features))\n</code></pre>\n\n<p>when print test_data.map(lambda x: x.features) the result is</p>\n\n<pre><code>[DenseVector([1431500000.0, 9.3347, 79.8337, 44.6364, 194.0, 853.0, 196.9998]),\n DenseVector([1431553600.0, 9.5484, 80.7409, 39.5968, 78.0, 923.0, 196.9994])....]\n</code></pre>\n\n<p>numbers inside the <code>DenseVector([numbers])</code> are correct for prediction</p>\n\n<p>but the result of the prediction is 0</p>\n\n<pre><code>[0.0, 0.0, 0.0, 0.0, 0.0...]\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "set"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1536787982, "post_id": 52303720, "comment_id": 91555176, "body": "<code>seen.add(fqdn)</code> returns <code>None</code>. What do you want it to do? do <code>seen_add(fqdn)</code> but don&#39;t print the result. and print the ip address with <code>end=&quot; &quot;</code> smth like that."}, {"owner": {"reputation": 309, "user_id": 9824074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85db191d448811bc1be91df3ee92c86?s=128&d=identicon&r=PG&f=1", "display_name": "Karan M", "link": "https://stackoverflow.com/users/9824074/karan-m"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1536788765, "post_id": 52303720, "comment_id": 91555460, "body": "@Jean-Fran&#231;oisFabre The output I am expecting is to print all the ip addresses that are associated with the device, but print the device name only once."}, {"owner": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "edited": false, "score": 0, "creation_date": 1536864965, "post_id": 52303720, "comment_id": 91587616, "body": "can you provide what you&#39;ve tried to writing a csv , even if it doesn&#39;t work so we can start somewhere :D"}, {"owner": {"reputation": 309, "user_id": 9824074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85db191d448811bc1be91df3ee92c86?s=128&d=identicon&r=PG&f=1", "display_name": "Karan M", "link": "https://stackoverflow.com/users/9824074/karan-m"}, "reply_to_user": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "edited": false, "score": 0, "creation_date": 1536867456, "post_id": 52303720, "comment_id": 91588760, "body": "@MooingRawr Thanks! I have updated it :)"}], "answers": [{"comments": [{"owner": {"reputation": 309, "user_id": 9824074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85db191d448811bc1be91df3ee92c86?s=128&d=identicon&r=PG&f=1", "display_name": "Karan M", "link": "https://stackoverflow.com/users/9824074/karan-m"}, "edited": false, "score": 0, "creation_date": 1536789425, "post_id": 52303853, "comment_id": 91555639, "body": "This prints the IP Addresses of all the devices together in a single line., I got your 2nd point, but I don&#39;t know exactly how to think of a logic there in my script"}], "tags": [], "owner": {"reputation": 28, "user_id": 2125570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oq71e.jpg?s=128&g=1", "display_name": "John Steill", "link": "https://stackoverflow.com/users/2125570/john-steill"}, "is_accepted": false, "score": 0, "last_activity_date": 1536788362, "creation_date": 1536788362, "answer_id": 52303853, "question_id": 52303720, "link": "https://stackoverflow.com/questions/52303720/skip-duplicate-values-of-a-particular-iteration-while-printing-corresponding-val/52303853#52303853", "title": "Skip duplicate values of a particular iteration while printing corresponding values - My End Goal is to write it on a CSV file", "body": "<p>Two suggestions: </p>\n\n<p>1) the seen_add <em>does</em> something, but it doesn't <em>return</em> anything, that's what is giving you the None's. </p>\n\n<p>2) If you don't want them to be separated by new lines, you can't have the print in the for loop, you need just one print. You can build the string as you go: out_str = out_str + ' ' + ips</p>\n\n<p>If you dont care about the order, a little flatten set should work:</p>\n\n<p>print(' '.join{ips for device in data for ips in device[\"DTO\"][0][\"IPaddress\"]})</p>\n"}, {"comments": [{"owner": {"reputation": 309, "user_id": 9824074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85db191d448811bc1be91df3ee92c86?s=128&d=identicon&r=PG&f=1", "display_name": "Karan M", "link": "https://stackoverflow.com/users/9824074/karan-m"}, "edited": false, "score": 0, "creation_date": 1536866567, "post_id": 52320198, "comment_id": 91588339, "body": "Thank you for your response Kevin! Probably, it&#39;s be a mistake on my part, that I didn&#39;t mention the other JSON object from where I&#39;m extracting the name from the API. I am running another for loop to extract the name as it isn&#39;t the one in DTO. I need to extract device name as <code>Device[&#39;name&#39;]</code> and ip address from <code>[DTO][0][&#39;IPaddress&#39;]</code> like this. I doubt it will work if the for loop is only one for the &#39;DTO&#39;"}, {"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "reply_to_user": {"reputation": 309, "user_id": 9824074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85db191d448811bc1be91df3ee92c86?s=128&d=identicon&r=PG&f=1", "display_name": "Karan M", "link": "https://stackoverflow.com/users/9824074/karan-m"}, "edited": false, "score": 0, "creation_date": 1536866761, "post_id": 52320198, "comment_id": 91588440, "body": "I&#39;m not sure I&#39;m visualizing the structure of your JSON properly. Can you post a complete representative sample?"}, {"owner": {"reputation": 309, "user_id": 9824074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85db191d448811bc1be91df3ee92c86?s=128&d=identicon&r=PG&f=1", "display_name": "Karan M", "link": "https://stackoverflow.com/users/9824074/karan-m"}, "edited": false, "score": 0, "creation_date": 1536867479, "post_id": 52320198, "comment_id": 91588778, "body": "Just added!! :D"}, {"owner": {"reputation": 309, "user_id": 9824074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85db191d448811bc1be91df3ee92c86?s=128&d=identicon&r=PG&f=1", "display_name": "Karan M", "link": "https://stackoverflow.com/users/9824074/karan-m"}, "edited": false, "score": 0, "creation_date": 1536869461, "post_id": 52320198, "comment_id": 91589757, "body": "Thanks for your help and time Kevin! @MooingRawr has shared his code that worked. :D"}], "tags": [], "owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "is_accepted": false, "score": 2, "last_activity_date": 1536865290, "creation_date": 1536865290, "answer_id": 52320198, "question_id": 52303720, "link": "https://stackoverflow.com/questions/52303720/skip-duplicate-values-of-a-particular-iteration-while-printing-corresponding-val/52320198#52320198", "title": "Skip duplicate values of a particular iteration while printing corresponding values - My End Goal is to write it on a CSV file", "body": "<p>I'm interpreting this question as:</p>\n\n<p>\"I have a data structure containing several DTOs. Each DTO has a unique name, and a list of ip addresses. For each DTO, I want to print all of its ip addresses on one line, followed by the DTO's name\".</p>\n\n<p>If this is an accurate interpretation, then you don't need set membership testing or anything. Simply iterate through the values and print them.</p>\n\n<pre><code>data = {\n    \"DTO\": [\n        {\n            \"id\": \"3485893021\",\n            \"name\": \"Alternate Addresses\",\n            \"IPAddress\": [\n                \"10.228.143.125\", \"10.228.143.253\", \"10.229.184.125\", \"10.229.184.134\", \"192.21.247.125\", \"192.21.247.188\", \"192.21.247.226\", \"192.21.247.254\", \"192.21.247.61\", \"192.21.247.92\", \"192.168.53.38\", \"192.128.167.74\"\n             ]\n        }\n    ]\n}\n\nfor dto in data[\"DTO\"]:\n    all_addresses = \" \".join(dto[\"IPAddress\"])\n    print(all_addresses, dto[\"name\"])\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>10.228.143.125 10.228.143.253 10.229.184.125 10.229.184.134 192.21.247.125 192.21.247.188 192.21.247.226 192.21.247.254 192.21.247.61 192.21.247.92 192.168.53.38 192.128.167.74 Alternate Addresses\n</code></pre>\n\n<p>You might be thinking \"actually I can't be sure that all of the elements of the DTO list have unique names. If a name shows up twice, I still only want to print it once\". In that case, composing your own dictionary of addresses might be appropriate.</p>\n\n<pre><code>from collections import defaultdict\n\ndata = {\n    \"DTO\": [\n        {\n            \"id\": \"3485893021\",\n            \"name\": \"FOO\",\n            \"IPAddress\": [\n                \"address_1\", \"address_2\"\n             ]\n        },\n\n        {\n            \"id\": \"3485893021\",\n            \"name\": \"BAR\",\n            \"IPAddress\": [\n                \"address_3\", \"address_4\"\n             ]\n        },\n\n        {\n            \"id\": \"3485893021\",\n            \"name\": \"FOO\",\n            \"IPAddress\": [\n                \"address_5\", \"address_1\"\n             ]\n        },\n\n\n    ]\n}\n\naddresses_by_name = defaultdict(set)\nfor dto in data[\"DTO\"]:\n    addresses_by_name[dto[\"name\"]].update(dto[\"IPAddress\"])\n\nfor name, addresses in addresses_by_name.items():\n    all_addresses = \" \".join(sorted(addresses))\n    print(all_addresses, name)\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>address_1 address_2 address_5 FOO\naddress_3 address_4 BAR\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 309, "user_id": 9824074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85db191d448811bc1be91df3ee92c86?s=128&d=identicon&r=PG&f=1", "display_name": "Karan M", "link": "https://stackoverflow.com/users/9824074/karan-m"}, "edited": false, "score": 0, "creation_date": 1536869358, "post_id": 52320929, "comment_id": 91589711, "body": "This did the trick, works perfectly as I wanted to. <code>ips = &#39; &#39;.join(set(device[&quot;DTO&quot;][0][&quot;IPaddress&quot;])) or &quot;not found&quot;</code> this logic was hard to get. Although, for some devices the parameter has unwanted data other than ip address at that particular field. That is why I am using <code>ipaddress.ip_address</code> to detect or else just skip them. But, I guess i&#39;ll figure that out now.  Thank you so much!! my hard work paid off with your help, been trying this since couple of days. I am still in the learning stages of API so it gets hard sometimes :("}, {"owner": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "reply_to_user": {"reputation": 309, "user_id": 9824074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85db191d448811bc1be91df3ee92c86?s=128&d=identicon&r=PG&f=1", "display_name": "Karan M", "link": "https://stackoverflow.com/users/9824074/karan-m"}, "edited": false, "score": 0, "creation_date": 1536869565, "post_id": 52320929, "comment_id": 91589796, "body": "The except handles if there&#39;s an <code>IPaddress</code> and <code>DTO</code> key, if there isn&#39;t then it just gives &quot;not found&quot; if there is then the logic explained will check if it&#39;s an empty list, if it is it will give &quot;not found&quot;, if there are values then it will do what you want. API is nothing more than a response, and generally JSON is pretty much just a simple parse."}, {"owner": {"reputation": 309, "user_id": 9824074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85db191d448811bc1be91df3ee92c86?s=128&d=identicon&r=PG&f=1", "display_name": "Karan M", "link": "https://stackoverflow.com/users/9824074/karan-m"}, "edited": false, "score": 0, "creation_date": 1536869921, "post_id": 52320929, "comment_id": 91589954, "body": "For some parameters, IPaddress has &#39;Firewall&#39; or &#39;Load Balancer&#39; which isn&#39;t relevant and I am just looking to not print those them, but print the device name. I tried with your code, but it prints Firewall or Load Balancer there."}, {"owner": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "reply_to_user": {"reputation": 309, "user_id": 9824074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85db191d448811bc1be91df3ee92c86?s=128&d=identicon&r=PG&f=1", "display_name": "Karan M", "link": "https://stackoverflow.com/users/9824074/karan-m"}, "edited": false, "score": 1, "creation_date": 1536870312, "post_id": 52320929, "comment_id": 91590156, "body": "Remember in chat how we said post everything you need, the test code you provided didn&#39;t have those nor does your original question states it. Anyways check edited answer."}, {"owner": {"reputation": 309, "user_id": 9824074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85db191d448811bc1be91df3ee92c86?s=128&d=identicon&r=PG&f=1", "display_name": "Karan M", "link": "https://stackoverflow.com/users/9824074/karan-m"}, "edited": false, "score": 0, "creation_date": 1536870840, "post_id": 52320929, "comment_id": 91590428, "body": "Few details that I stupidly miss out on are so crucial to the code and it adds or changes the script. I thought, I have mentioned it in my long question, but skipped out. Apologies"}], "tags": [], "owner": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "is_accepted": true, "score": 2, "last_activity_date": 1536871177, "last_edit_date": 1536871177, "creation_date": 1536868574, "answer_id": 52320929, "question_id": 52303720, "link": "https://stackoverflow.com/questions/52303720/skip-duplicate-values-of-a-particular-iteration-while-printing-corresponding-val/52320929#52320929", "title": "Skip duplicate values of a particular iteration while printing corresponding values - My End Goal is to write it on a CSV file", "body": "<p>Using this data set to test the code:</p>\n\n<pre><code>data = [\n  {\n    \"name\": \"device1\",\n    \"vendorName\": \"Cisco\",\n    \"DTO\": [\n      {\n        \"id\": \"426945997-254\",\n        \"name\": \"Category\",\n        \"IPaddress\": [\n          \"10.228.143.125\",\n          \"10.228.143.253\",\n          \"10.229.184.125\",\n          \"10.229.184.134\",\n          \"192.21.247.125\"\n         ],\n       }\n     ]\n   },\n   {\n    \"name\": \"device2\",\n    \"vendorName\": \"Cisco\",\n    \"DTO\": [\n      {\n        \"id\": \"426945997-254\",\n        \"name\": \"Category\",\n        \"IPaddress\": [\n\n         ],\n       }\n     ]\n   },\n   {\n    \"name\": \"device3\",\n    \"vendorName\": \"Cisco\",\n    \"DTO\": [\n      {\n        \"id\": \"426945997-254\",\n        \"name\": \"Category\",\n\n       }\n     ]\n   }\n ]\n</code></pre>\n\n<p>I wasn't sure on what you were exactly doing since your code was mismatching the key names, But this should work out for you</p>\n\n<pre><code>import csv \nwith open(\"BNA API.csv\", 'w', newline='') as f:\n    fieldname = ['BNA Name', 'IP Addresses']\n    writer = csv.DictWriter(f, fieldnames=fieldname)\n    writer.writeheader()\n\nwith open(\"BNA API.csv\", 'a', newline='') as f:\n    for device in data:\n        fqdn = device['name']   \n        try:\n            ips = ' '.join(set(device[\"DTO\"][0][\"IPaddress\"])) or \"not found\"\n        except KeyError:\n            ips = \"not found\"\n\n        writer = csv.writer(f)\n        writer.writerow([fqdn, ips])\n</code></pre>\n\n<p><code>ips = ' '.join(set(device[\"DTO\"][0][\"IPaddress\"])) or \"not found\"</code> is checking if IPaddress is an empty list be using Python's True-y detection meaning if the set returns empty it will take the <code>\"not found\"</code> instead</p>\n\n<p>Edit: \nSeems like there's more to this question, if you have bad IPaddress or what not you can use a filter in the <code>' '.join()</code> like so:</p>\n\n<pre><code>bad_list = ['Firewall','Load something']\n#...\n#same code\n\ntry:\n    ips = ' '.join(x for x in set(device[\"DTO\"][0][\"IPaddress\"]) if x not in bad_list) or \"not found\"\n</code></pre>\n\n<p>The <code>if x not in bad_list</code> checks before adding it to the <code>.join()</code>, you can think of it as a filter while iterating through the list. If you don't want to type out everything to exclude you could change it to <code>if ipaddress(x)</code> and write a function called <code>ipaddress(x)</code> which returns True if it's a valid ipaddress and false if it's not. </p>\n"}], "owner": {"reputation": 309, "user_id": 9824074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85db191d448811bc1be91df3ee92c86?s=128&d=identicon&r=PG&f=1", "display_name": "Karan M", "link": "https://stackoverflow.com/users/9824074/karan-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 52320929, "answer_count": 3, "score": 2, "last_activity_date": 1536871177, "creation_date": 1536787688, "last_edit_date": 1536867412, "question_id": 52303720, "link": "https://stackoverflow.com/questions/52303720/skip-duplicate-values-of-a-particular-iteration-while-printing-corresponding-val", "title": "Skip duplicate values of a particular iteration while printing corresponding values - My End Goal is to write it on a CSV file", "body": "<p>I am trying to use set() in my code to skip the duplicate values in my iteration; This type of question might have been answered on SO, but when I am trying to do it in my script, I am not getting the desired output.</p>\n\n<p>I am extracting device names using device['name'] and ip addresses in the API is given as; This is the response body of API for one such device for IP Address:</p>\n\n<pre><code>\"DTO\": [\n  {\n    \"id\": \"3485893021\",\n    \"name\": \"Alternate Addresses\",\n    \"IPAddress\": [\n      \"10.228.143.125\",\n      \"10.228.143.253\",\n      \"10.229.184.125\",\n      \"10.229.184.134\",\n      \"192.21.247.125\",\n      \"192.21.247.188\",\n      \"192.21.247.226\",\n      \"192.21.247.254\",\n      \"192.21.247.61\",\n      \"192.21.247.92\",\n      \"192.168.53.38\",\n      \"192.128.167.74\"\n     ]\n</code></pre>\n\n<p>I have multiple IPs for a single device like above, but when I try this, I get device names as None for all the iteration and only the first IPs from respective devices are printed. What I want is to print all the IPs and print only their corresponding device name once. I am extracting this data from API. </p>\n\n<pre><code>seen = set()\nseen_add = seen.add\nfor device in data:\n    fqdn = device['name']\n    for ips in device[\"DTO\"][0][\"IPaddress\"]:\n        if fqdn not in seen:\n            print(ips, seen_add(fqdn))\n</code></pre>\n\n<p>This is the output:</p>\n\n<pre><code>10.228.143.125 None\n10.23.54.6.8 None\n10.23.6.1 None\n10.22.16.34 None\n10.122.25.189 None\n</code></pre>\n\n<p>I am expecting this in the python console output:</p>\n\n<pre><code>10.228.143.125 10.228.143.253 10.229.184.125 10.229.184.134 192.21.247.125 192.21.247.188 192.21.247.226 192.21.247.254 192.21.247.61 192.21.247.92 192.168.53.38 192.128.167.74 devicename1\n</code></pre>\n\n<p>and so on for other such devices...</p>\n\n<p>UPDATE: This one prints exactly how I want, but now when I try to print it on a CSV file, fqdn and ipaddresses start falling apart. Can anyone help me on how to write this one in a much easier way?</p>\n\n<pre><code>for device in data:\n    fqdn = device['name']\n    if fqdn not in entries:\n        entries.add(fqdn)\n        print(\"\\nDevice: %s\" % fqdn)\n    for ips in device[\"DTO\"][0][\"IPaddress\"]:\n                try:\n                    ipaddress.ip_address(ips)\n                    print(ips)\n                except ValueError:\n                    print(\"Not Found\")\n</code></pre>\n\n<p>Output on python console:</p>\n\n<pre><code>Device: Device1\nNot Found\n\nDevice: Device2\nNot Found\n\nDevice: Device3\n10.228.143.125\n10.228.143.253\n10.229.184.125\n10.229.184.134\n192.21.247.125\n192.21.247.188\n192.21.247.226\n</code></pre>\n\n<p>I have tried this to print on a csv file:</p>\n\n<pre><code>with open(\"BNA API.csv\", 'w', newline='') as f:\n    fieldname = ['BNA Name', 'IP Addresses']\n    writer = csv.DictWriter(f, fieldnames=fieldname)\n    writer.writeheader()\n\nfor device in data:\n    fqdn = device['name']\n    if fqdn not in entries:\n        entries.add(fqdn)\n        print(\"\\nDevice: %s\" % fqdn)\n    for ips in device[\"dynamicFields\"][0][\"values\"]:\n        try:\n            ipaddress.ip_address(ips)\n            print(ips)\n        except ValueError:\n            print(\"Not Found\")\n        with open(\"BNA API.csv\", 'a', newline='') as f:\n            writer = csv.writer(f)\n            writer.writerow([fqdn, ips])\n</code></pre>\n\n<p>This is giving me output:</p>\n\n<pre><code>BNA Name,IP Addresses\ndevice1,Not Found\ndevice2,Not Found\ndevice3,10.228.143.125\ndevice3,10.228.143.253\ndevice3,10.229.184.125\ndevice3,10.229.184.134\ndevice3,192.21.247.125\ndevice3,192.21.247.188\ndevice3,192.21.247.226\n</code></pre>\n\n<p>On my CSV, I am expecting output like this:</p>\n\n<pre><code>BNA Name,IP Addresses\ndevice1,10.228.143.125 10.228.143.253 10.229.184.125 10.229.184.134 192.21.247.125 192.21.247.188 192.21.247.226 192.21.247.254 192.21.247.61 192.21.247.92 192.168.53.38 192.128.167.74\ndevice2,their ip addresses and so on..\n</code></pre>\n\n<p>The IP Address should be in the 2nd column and separated by a single white space.\nThis is my structure of JSON:</p>\n\n<pre><code>[\n  {\n    \"name\": \"device1\",\n    \"vendorName\": \"Cisco\"\n    \"DTO\": [\n      {\n        \"id\": \"426945997-254\",\n        \"name\": \"Category\",\n        \"IPaddress\": [\n          \"10.228.143.125\",\n          \"10.228.143.253\",\n          \"10.229.184.125\",\n          \"10.229.184.134\",\n          \"192.21.247.125\"\n         ],\n       }\n     ]\n   }\n ]\n</code></pre>\n\n<p>This is the structure for one such device, I hope this is correct, because I couldn't put all the parameters, only the ones that I need for this code to execute.\nThank you!</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": false, "score": 2, "last_activity_date": 1536788170, "last_edit_date": 1536788170, "creation_date": 1536787862, "answer_id": 52303753, "question_id": 52303696, "link": "https://stackoverflow.com/questions/52303696/how-to-find-last-occurence-index-matching-a-certain-value-in-a-pandas-series/52303753#52303753", "title": "How to find last occurence index matching a certain value in a Pandas Series?", "body": "<p>You can use <code>np.argmax</code> on your reversed Series if you are looking in a boolean array:</p>\n\n<pre><code>&gt;&gt;&gt; len(s) - np.argmax(s[::-1].values) - 1\n3\n</code></pre>\n\n<p>If you are looking for another value, just convert it to a boolean array using <code>==</code></p>\n\n<p>Here's an example looking for the last occurence of <code>dog</code>:</p>\n\n<pre><code>&gt;&gt;&gt; s = pd.Series(['dog', 'cat', 'fish', 'cat', 'dog', 'horse'])\n&gt;&gt;&gt; len(s) - np.argmax(s[::-1].values=='dog') - 1\n4\n</code></pre>\n\n<p>However, this will give you a numeric index.  If your series has a custom index it will not return that.</p>\n"}, {"comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 3, "creation_date": 1536788377, "post_id": 52303828, "comment_id": 91555336, "body": "<code>s.where(s).last_valid_index()</code> :-)"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1536788421, "post_id": 52303828, "comment_id": 91555351, "body": "IIUC, will this actually return the index, not just a numeric index?  So it would work even if you had a <code>datetimeindex</code> for example.  Very nice!"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 1, "creation_date": 1536788432, "post_id": 52303828, "comment_id": 91555353, "body": "Well, the serie was just booleans, I was giving a more generic option."}, {"owner": {"reputation": 23412, "user_id": 704371, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c242c755d071316d941b65419f9e0d24?s=128&d=identicon&r=PG", "display_name": "Johan Dettmar", "link": "https://stackoverflow.com/users/704371/johan-dettmar"}, "edited": false, "score": 0, "creation_date": 1537015567, "post_id": 52303828, "comment_id": 91635484, "body": "This seems to be the most versatile and easy to read and worked as expected."}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 8, "last_activity_date": 1613155907, "last_edit_date": 1613155907, "creation_date": 1536788265, "answer_id": 52303828, "question_id": 52303696, "link": "https://stackoverflow.com/questions/52303696/how-to-find-last-occurence-index-matching-a-certain-value-in-a-pandas-series/52303828#52303828", "title": "How to find last occurence index matching a certain value in a Pandas Series?", "body": "<p>Use <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.last_valid_index.html#pandas-dataframe-last-valid-index\" rel=\"nofollow noreferrer\"><code>last_valid_index</code></a>:</p>\n<pre><code>s = pd.Series([False, False, True, True, False, False])\ns.where(s).last_valid_index()\n</code></pre>\n<p>Output:</p>\n<pre><code>3\n</code></pre>\n<p>Using @user3483203 example</p>\n<pre><code>s = pd.Series(['dog', 'cat', 'fish', 'cat', 'dog', 'horse'], index=[*'abcdef'])\ns.where(s=='cat').last_valid_index()\n</code></pre>\n<p>Output</p>\n<pre><code>'d'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 438, "user_id": 7234896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d37a862d9c166c08f4813cdccb39ccb9?s=128&d=identicon&r=PG&f=1", "display_name": "R. Yang", "link": "https://stackoverflow.com/users/7234896/r-yang"}, "edited": false, "score": 0, "creation_date": 1596111084, "post_id": 52303866, "comment_id": 111709975, "body": "FutureWarning: Series.nonzero() is deprecated and will be removed in a future version.Use Series.to_numpy().nonzero() instead"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 4, "last_activity_date": 1536788443, "creation_date": 1536788443, "answer_id": 52303866, "question_id": 52303696, "link": "https://stackoverflow.com/questions/52303696/how-to-find-last-occurence-index-matching-a-certain-value-in-a-pandas-series/52303866#52303866", "title": "How to find last occurence index matching a certain value in a Pandas Series?", "body": "<p>Using <code>nonzero</code></p>\n\n<pre><code>s.nonzero()[0][-1]\nOut[66]: 3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 1, "last_activity_date": 1536836582, "creation_date": 1536836582, "answer_id": 52312353, "question_id": 52303696, "link": "https://stackoverflow.com/questions/52303696/how-to-find-last-occurence-index-matching-a-certain-value-in-a-pandas-series/52312353#52312353", "title": "How to find last occurence index matching a certain value in a Pandas Series?", "body": "<p>You can use a generator expression with <code>next</code> and <code>enumerate</code>:</p>\n\n<pre><code>s = pd.Series([False, False, True, True, False, False])\n\nres = len(s) - next(idx for idx, val in enumerate(s[::-1], 1) if val)  # 3\n</code></pre>\n\n<p>This will be more efficient for large series with a <code>True</code> value towards the end.</p>\n"}], "owner": {"reputation": 23412, "user_id": 704371, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c242c755d071316d941b65419f9e0d24?s=128&d=identicon&r=PG", "display_name": "Johan Dettmar", "link": "https://stackoverflow.com/users/704371/johan-dettmar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5547, "favorite_count": 2, "accepted_answer_id": 52303828, "answer_count": 4, "score": 8, "last_activity_date": 1613155907, "creation_date": 1536787560, "last_edit_date": 1536836155, "question_id": 52303696, "link": "https://stackoverflow.com/questions/52303696/how-to-find-last-occurence-index-matching-a-certain-value-in-a-pandas-series", "title": "How to find last occurence index matching a certain value in a Pandas Series?", "body": "<p>How do I find the <em>last</em> occurrence index for a certain value in a Pandas Series?</p>\n\n<p>For example, let's say I have a Series that looks like follows:</p>\n\n<pre><code>s = pd.Series([False, False, True, True, False, False])\n</code></pre>\n\n<p>And I want to find the last index for a <code>True</code> value (i.e. index 3), how would you go about it?</p>\n"}, {"tags": ["python", "regex", "python-3.x"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1536787535, "post_id": 52303670, "comment_id": 91555012, "body": "Using the <code>pandas</code> library gives you access to a safe <code>eval</code>:  <code>import pandas as pd; pd.eval(&#39;137340 % 51245 + 137340 % 913&#39;)</code>.  Probably would be more flexible than a regular expression"}, {"owner": {"reputation": 1175, "user_id": 1175455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4gpIG.jpg?s=128&g=1", "display_name": "Harry Cutts", "link": "https://stackoverflow.com/users/1175455/harry-cutts"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1536788011, "post_id": 52303670, "comment_id": 91555183, "body": "It looks like you need to parse an expression, which can&#39;t be done with regexes alone, unless your expressions always take the form a % b + c % d. @user3483203&#39;s suggestion of <code>pandas.eval</code> looks like a good one. Otherwise you might want to do some research into expression parsing."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1536788155, "post_id": 52303670, "comment_id": 91555248, "body": "without pandas, you have <code>simpleeval.py</code> which is pure python and does a very good job."}, {"owner": {"reputation": 13, "user_id": 6575170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f28a79048c89a29d03ea4a95883d505a?s=128&d=identicon&r=PG&f=1", "display_name": "Tomer", "link": "https://stackoverflow.com/users/6575170/tomer"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1536819388, "post_id": 52303670, "comment_id": 91562466, "body": "Thanks, @user3483203, that completely answer my question! worked like a charm."}], "owner": {"reputation": 13, "user_id": 6575170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f28a79048c89a29d03ea4a95883d505a?s=128&d=identicon&r=PG&f=1", "display_name": "Tomer", "link": "https://stackoverflow.com/users/6575170/tomer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1536788242, "answer_count": 0, "score": 0, "last_activity_date": 1536787410, "creation_date": 1536787410, "question_id": 52303670, "link": "https://stackoverflow.com/questions/52303670/pyhon-regex-to-integer-conversion-with-the-sign-inside", "closed_reason": "Duplicate", "title": "Pyhon regex to integer conversion with the &quot;%&quot; sign inside", "body": "<p>I'm trying to convert \"z\" - A string which contains the \"%\" sign into an integer:</p>\n\n<p>Example1: z= 35240 ( all good when z is inserted as int from the first place )</p>\n\n<pre><code>&gt;&gt;&gt; z = 137340 % 51245 + 137340 % 913\n&gt;&gt;&gt; print(z)\n35240\n</code></pre>\n\n<p>Example2: z is a string that was exported from a website using the regex method.</p>\n\n<pre><code>&gt;&gt;&gt; z = '137340 % 51245 + 137340 % 913'\n&gt;&gt;&gt; print(type(z))\n&lt;class 'str'&gt;\n&gt;&gt;&gt; print(int(z))\nTraceback (most recent call last):\n File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nValueError: invalid literal for int() with base 10: '137340 % 51245 + 137340 \n% 913'\n</code></pre>\n\n<p>I tried to google str to int using a module function w/o finding one that actually helps me here.</p>\n\n<p>appreciate your help here.</p>\n\n<p>below: the code block from the site: and that's the regex I'm using:</p>\n\n<pre><code>\\d+ \\% \\d+ \\+ \\d+ \\% \\d+\n\n\n&lt;script type=\"text/javascript\"&gt;\n    document.getElementById('dlbutton').href = \"/d/NNwCFsTG/\" + (896089 % 51245 + 896089 % 913) + \"/%d7%a1%d7%98%20%d7%99%d7%95%d7%9d%20%d7%94%d7%a2%d7%9e%d7%a6%d7%90%d7%95%d7%aa%202018%20%d7%93%d7%99%20%d7%92%27%d7%99%20%d7%90%d7%91%d7%99%20%d7%a9%d7%9e%d7%99.mp3\";\n    if (document.getElementById('fimage')) {\n        document.getElementById('fimage').href = \"/i/NNwCFsTG/\" + (896089 % 51245 + 896089 % 913) + \"/%d7%a1%d7%98%20%d7%99%d7%95%d7%9d%20%d7%94%d7%a2%d7%9e%d7%a6%d7%90%d7%95%d7%aa%202018%20%d7%93%d7%99%20%d7%92%27%d7%99%20%d7%90%d7%91%d7%99%20%d7%a9%d7%9e%d7%99.mp3\";\n    }\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "markers"], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 11, "last_activity_date": 1536788595, "creation_date": 1536788595, "answer_id": 52303895, "question_id": 52303660, "link": "https://stackoverflow.com/questions/52303660/iterating-markers-in-plots/52303895#52303895", "title": "iterating markers in plots", "body": "<p>Using several markers in a single scatter is currently not a feature matplotlib supports. There is however a feature request for this at <a href=\"https://github.com/matplotlib/matplotlib/issues/11155\" rel=\"noreferrer\">https://github.com/matplotlib/matplotlib/issues/11155</a></p>\n\n<p>It is of course possible to draw several scatters, one for each marker type. \nA different option is the one I proposed in the above thread, which is to set the markers after creating the scatter:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\ndef mscatter(x,y,ax=None, m=None, **kw):\n    import matplotlib.markers as mmarkers\n    if not ax: ax=plt.gca()\n    sc = ax.scatter(x,y,**kw)\n    if (m is not None) and (len(m)==len(x)):\n        paths = []\n        for marker in m:\n            if isinstance(marker, mmarkers.MarkerStyle):\n                marker_obj = marker\n            else:\n                marker_obj = mmarkers.MarkerStyle(marker)\n            path = marker_obj.get_path().transformed(\n                        marker_obj.get_transform())\n            paths.append(path)\n        sc.set_paths(paths)\n    return sc\n\n\nN = 40\nx, y, c = np.random.rand(3, N)\ns = np.random.randint(10, 220, size=N)\nm = np.repeat([\"o\", \"s\", \"D\", \"*\"], N/4)\n\nfig, ax = plt.subplots()\n\nscatter = mscatter(x, y, c=c, s=s, m=m, ax=ax)\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/T1OPK.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/T1OPK.png\" alt=\"enter image description here\"></a></p>\n\n<p>If you only have numbers, instead of marker symbols you would first need to map numbers to symbols and supply the list of symbols to the function.</p>\n"}, {"tags": [], "owner": {"reputation": 17668, "user_id": 4706171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zWK2h.png?s=128&g=1", "display_name": "Sandipan Dey", "link": "https://stackoverflow.com/users/4706171/sandipan-dey"}, "is_accepted": false, "score": 2, "last_activity_date": 1536791072, "creation_date": 1536791072, "answer_id": 52304283, "question_id": 52303660, "link": "https://stackoverflow.com/questions/52303660/iterating-markers-in-plots/52304283#52304283", "title": "iterating markers in plots", "body": "<p>You could modify your code like the following to get the desired result:</p>\n\n<pre><code>markers = [\"o\" , \"s\" , \"D\"]\ncolors = [\"red\", \"green\", \"blue\"]\n\nfor i in range(4):\n    for j in range(4):\n        for k in range(x.shape[0]):\n            if(i != j):\n                axes[i, j].scatter(x[k, i], x[k, j], color=colors[labels[k]], marker = markers[y[k]], s=40, cmap='viridis')  \n            else:\n                axes[i,j].text(0.15, 0.3, Superman[i], fontsize = 8)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/RNurj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RNurj.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 367, "user_id": 6598627, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207007656136117/picture?type=large", "display_name": "Travasaurus", "link": "https://stackoverflow.com/users/6598627/travasaurus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5405, "favorite_count": 2, "answer_count": 2, "score": 7, "last_activity_date": 1536791072, "creation_date": 1536787356, "question_id": 52303660, "link": "https://stackoverflow.com/questions/52303660/iterating-markers-in-plots", "title": "iterating markers in plots", "body": "<p>I'm trying to denote the predictions with a color and the correct labels as markers for the iris data set. Here is what I have so far:</p>\n\n<pre><code>from sklearn.mixture import GMM\nimport pandas as pd\nfrom sklearn import datasets\nimport matplotlib.pyplot as plt\nimport itertools\n\niris = datasets.load_iris()\nx = iris.data\ny = iris.target\ngmm = GMM(n_components=3).fit(x)\nlabels = gmm.predict(x)\nfig, axes = plt.subplots(4, 4)\nSuperman = iris.feature_names\nmarkers = [\"o\" , \"s\" , \"D\"]\nMi=[]\nfor i in range(150):\n  Mi.append(markers[y[i]])\n\nfor i in range(4):\n    for j in range(4):\n        if(i != j):\n            axes[i, j].scatter(x[:, i], x[:, j], c=labels, marker = Mi, s=40, cmap='viridis')\n        else:\n            axes[i,j].text(0.15, 0.3, Superman[i], fontsize = 8)\n</code></pre>\n\n<p>I'm not sure why Colors iterate and markers do not, but is there a way to assign each marker a certain value like color? It also fails when I just enter the numeric values from y. </p>\n\n<p>The code it returns is: </p>\n\n<blockquote>\n  <p>Unrecognized marker style ['o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 'o', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 's', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D']</p>\n</blockquote>\n"}, {"tags": ["python", "image", "numpy", "python-3.6"], "answers": [{"comments": [{"owner": {"reputation": 10409, "user_id": 483620, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/efc681121bec8b6c5f9b5bc0714396a0?s=128&d=identicon&r=PG", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/483620/benjamin"}, "edited": false, "score": 1, "creation_date": 1536795066, "post_id": 52304092, "comment_id": 91556973, "body": "Neither roi or pixel are used in the final line... Please review."}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "reply_to_user": {"reputation": 10409, "user_id": 483620, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/efc681121bec8b6c5f9b5bc0714396a0?s=128&d=identicon&r=PG", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/483620/benjamin"}, "edited": false, "score": 0, "creation_date": 1536857205, "post_id": 52304092, "comment_id": 91583864, "body": "@Benjamin Actually, I just looked at this more carefully and, you are correct, the first 2 lines are not needed, but... the final line works on its own as it is the same as my answer which I demonstrated to work in my answer."}, {"owner": {"reputation": 349, "user_id": 2775246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6b8d716097bbcdd0657cea26076fb42?s=128&d=identicon&r=PG", "display_name": "Hans Lehnert", "link": "https://stackoverflow.com/users/2775246/hans-lehnert"}, "reply_to_user": {"reputation": 10409, "user_id": 483620, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/efc681121bec8b6c5f9b5bc0714396a0?s=128&d=identicon&r=PG", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/483620/benjamin"}, "edited": false, "score": 0, "creation_date": 1536866886, "post_id": 52304092, "comment_id": 91588490, "body": "@Benjamin You are right about <code>roi</code>, I&#39;ve fixed that, thanks. As for, the second line, it isn&#39;t explicitly asked but the code in the original question also extracts the values of the pixels in the variable <code>pixel</code>"}, {"owner": {"reputation": 349, "user_id": 2775246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6b8d716097bbcdd0657cea26076fb42?s=128&d=identicon&r=PG", "display_name": "Hans Lehnert", "link": "https://stackoverflow.com/users/2775246/hans-lehnert"}, "reply_to_user": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1536867014, "post_id": 52304092, "comment_id": 91588562, "body": "@MarkSetchell The first line is actually needed since the OP just wants to search within a certain area."}, {"owner": {"reputation": 10409, "user_id": 483620, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/efc681121bec8b6c5f9b5bc0714396a0?s=128&d=identicon&r=PG", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/483620/benjamin"}, "edited": false, "score": 0, "creation_date": 1536892954, "post_id": 52304092, "comment_id": 91595607, "body": "There has been an edit here that makes my comment ambiguous... and pixel is still not being used."}], "tags": [], "owner": {"reputation": 349, "user_id": 2775246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6b8d716097bbcdd0657cea26076fb42?s=128&d=identicon&r=PG", "display_name": "Hans Lehnert", "link": "https://stackoverflow.com/users/2775246/hans-lehnert"}, "is_accepted": false, "score": 0, "last_activity_date": 1536866558, "last_edit_date": 1536866558, "creation_date": 1536789788, "answer_id": 52304092, "question_id": 52303658, "link": "https://stackoverflow.com/questions/52303658/edit-pixel-values-in-an-image-as-numpy-array/52304092#52304092", "title": "Edit pixel values in an image as numpy array", "body": "<p>For a more compact solution you can try</p>\n\n<pre><code>roi = img[122:161, 34:72]\npixel = roi[roi &gt;= 250]\nroi[roi &gt;= 250] -= 10\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2116, "user_id": 7247547, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9edc71b8ad82b60fb9955e8adcede03a?s=128&d=identicon&r=PG&f=1", "display_name": "kevinkayaks", "link": "https://stackoverflow.com/users/7247547/kevinkayaks"}, "is_accepted": false, "score": 0, "last_activity_date": 1536821986, "last_edit_date": 1536821986, "creation_date": 1536801632, "answer_id": 52305372, "question_id": 52303658, "link": "https://stackoverflow.com/questions/52303658/edit-pixel-values-in-an-image-as-numpy-array/52305372#52305372", "title": "Edit pixel values in an image as numpy array", "body": "<p>Provided your image is grayscale this will do it. </p>\n\n<pre><code>inds = np.where(img&gt;=250)\ninds = inds[(inds.T[0]&gt;=122)&amp;(inds.T[0]&lt;=160)&amp;(inds.T[1]&gt;=34)&amp;(inds.T[1]&lt;=71)]\nimg[inds]-=10\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9002, "user_id": 540259, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/597dbed36f3fba790653e3e9f0ab7e4d?s=128&d=identicon&r=PG", "display_name": "lightalchemist", "link": "https://stackoverflow.com/users/540259/lightalchemist"}, "is_accepted": false, "score": 1, "last_activity_date": 1536805927, "last_edit_date": 1536805927, "creation_date": 1536803376, "answer_id": 52305562, "question_id": 52303658, "link": "https://stackoverflow.com/questions/52303658/edit-pixel-values-in-an-image-as-numpy-array/52305562#52305562", "title": "Edit pixel values in an image as numpy array", "body": "<p>Is <code>img</code> a 3 dimensional array? If so, then your test <code>img[x, y] &gt;= 250</code> is testing if an array of 3 elements is greater than 250. This will result in an error and cause your script to terminate at that point. You did not say if this is happening.</p>\n\n<p>If it is a 3 dimensional array and you want to check if <strong>all</strong> channels have value greater than 250 at position x, y, then you have to check for <code>np.all(img[x, y] &gt;= 250)</code> instead of <code>img[x, y] &gt;= 250</code>.</p>\n\n<p>In general you want to avoid loops and use vectorized operations to speed things up.</p>\n\n<pre><code>min_row = 122\nmax_row = 161\nmin_col = 34\nmax_col = 72\nthreshold = 250\n\nrow_slice = slice(min_row, max_row)\ncol_slice = slice(min_col, max_col)\nroi = img[row_slice, col_slice] &gt;= threshold\nimg[row_slice, col_slice][roi] -= 10\n</code></pre>\n\n<p>or more succinctly but less readable,</p>\n\n<pre><code>roi = img[min_row:max_row, min_col:max_col] &gt;= threshold\nimg[min_row:max_row, min_col:max_col][roi] -= 10\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": false, "score": 0, "last_activity_date": 1536827775, "last_edit_date": 1536827775, "creation_date": 1536826700, "answer_id": 52309436, "question_id": 52303658, "link": "https://stackoverflow.com/questions/52303658/edit-pixel-values-in-an-image-as-numpy-array/52309436#52309436", "title": "Edit pixel values in an image as numpy array", "body": "<p>The simplest way is one line:</p>\n\n<pre><code>im[im&gt;250]-=10\n</code></pre>\n\n<p><strong>Demonstration</strong></p>\n\n<p>Start with this 8x8 gradient image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ql2Vp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ql2Vp.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here it is enlarged:</p>\n\n<p><a href=\"https://i.stack.imgur.com/IvP8h.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IvP8h.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then use <strong>IPython</strong> like this:</p>\n\n<pre><code># Load image as L (greyscale)\nim = np.array(Image.open('image.png').convert('L'))\n\n# View contents\nim\nOut[16]: \narray([[255, 255, 255, 255, 255, 255, 255, 255],\n       [219, 219, 219, 219, 219, 219, 219, 219],\n       [182, 182, 182, 182, 182, 182, 182, 182],\n       [146, 146, 146, 146, 146, 146, 146, 146],\n       [109, 109, 109, 109, 109, 109, 109, 109],\n       [ 73,  73,  73,  73,  73,  73,  73,  73],\n       [ 36,  36,  36,  36,  36,  36,  36,  36],\n       [  0,   0,   0,   0,   0,   0,   0,   0]], dtype=uint8)\n\n# Do required processing\nim[im&gt;250]-=10\n\n# Review contents\nIn [18]: im\nOut[18]: \narray([[245, 245, 245, 245, 245, 245, 245, 245],\n       [219, 219, 219, 219, 219, 219, 219, 219],\n       [182, 182, 182, 182, 182, 182, 182, 182],\n       [146, 146, 146, 146, 146, 146, 146, 146],\n       [109, 109, 109, 109, 109, 109, 109, 109],\n       [ 73,  73,  73,  73,  73,  73,  73,  73],\n       [ 36,  36,  36,  36,  36,  36,  36,  36],\n       [  0,   0,   0,   0,   0,   0,   0,   0]], dtype=uint8)\n</code></pre>\n\n<p>Let's try decreasing even more pixels, just for fun:</p>\n\n<pre><code>In [19]: im[im&gt;100]-=10\n\nIn [20]: im\nOut[20]: \narray([[235, 235, 235, 235, 235, 235, 235, 235],\n       [209, 209, 209, 209, 209, 209, 209, 209],\n       [172, 172, 172, 172, 172, 172, 172, 172],\n       [136, 136, 136, 136, 136, 136, 136, 136],\n       [ 99,  99,  99,  99,  99,  99,  99,  99],\n       [ 73,  73,  73,  73,  73,  73,  73,  73],\n       [ 36,  36,  36,  36,  36,  36,  36,  36],\n       [  0,   0,   0,   0,   0,   0,   0,   0]], dtype=uint8)\n</code></pre>\n"}], "owner": {"reputation": 407, "user_id": 2925833, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/1f849d2a7e94e68bd2467d9f306ebb62?s=128&d=identicon&r=PG&f=1", "display_name": "MJMacarty", "link": "https://stackoverflow.com/users/2925833/mjmacarty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2108, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1536866558, "creation_date": 1536787342, "question_id": 52303658, "link": "https://stackoverflow.com/questions/52303658/edit-pixel-values-in-an-image-as-numpy-array", "title": "Edit pixel values in an image as numpy array", "body": "<p>I am reading an image like so:</p>\n\n<pre><code>img = np.array(Image.open(test_dir + image_name))\n</code></pre>\n\n<p>What I want to do is find a region in the array where the value is high (250 or more) and reduce it by 10:</p>\n\n<pre><code>rows = img.shape[0]\ncols = img.shape[1]\npixel = []\nfor x in range(0,rows):\n    for y in range(0, cols):\n        if x &gt;= 122 and x &lt;= 160 and y &gt;= 34  and y &lt;= 71:\n            if img[x,y]&gt;= 250:\n                img[x,y] = img[x,y] -10\n                pixel.append(img[x,y])\n</code></pre>\n\n<p>So the region I am looking at according the the unaltered image should be a box from (122, 34) to (160,71), and it should have some pixels over 250, but somehow when I run this code I end up with nothing in the pixel list </p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 1, "creation_date": 1536787498, "post_id": 52303643, "comment_id": 91554986, "body": "It does not work because the zeroes in the end does not logically make sense. You might need string formatting for this"}, {"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1536788041, "post_id": 52303643, "comment_id": 91555196, "body": "<code>&quot;%0.4f&quot; % (5&#47;2.0)</code>"}, {"owner": {"reputation": 2939, "user_id": 8334261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f9cdd180c34b49d28655f0e4b80e22?s=128&d=identicon&r=PG&f=1", "display_name": "DocDriven", "link": "https://stackoverflow.com/users/8334261/docdriven"}, "edited": false, "score": 0, "creation_date": 1536788088, "post_id": 52303643, "comment_id": 91555219, "body": "Also, round() works as expected. 2.5 rounded for 4 digits is exactly 2.5."}], "owner": {"reputation": 275, "user_id": 6368340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19af529aa5982572e69664c463e9bf45?s=128&d=identicon&r=PG&f=1", "display_name": "Stephan", "link": "https://stackoverflow.com/users/6368340/stephan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 296, "favorite_count": 0, "closed_date": 1536787519, "answer_count": 0, "score": 0, "last_activity_date": 1536787262, "creation_date": 1536787262, "question_id": 52303643, "link": "https://stackoverflow.com/questions/52303643/how-to-force-the-number-of-digits-in-python", "closed_reason": "Duplicate", "title": "How to force the number of digits in python", "body": "<p>For instance</p>\n\n<pre><code>5 / 2 = 2.5 \n</code></pre>\n\n<p>What I want is to force it to 4 digits:</p>\n\n<pre><code>5 / 2 = 2.5000\n1 / 2 = 0.5000\n10 / 10 = 1.0000\n</code></pre>\n\n<p>I tried to use round(5/2, 4) but it does not work.</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "rest"], "comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 1, "creation_date": 1536787260, "post_id": 52303618, "comment_id": 91554905, "body": "I don&#39;t understand your problem.."}, {"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1536787630, "post_id": 52303618, "comment_id": 91555050, "body": "<i>How do I plug the JSON into the REST call?</i> what do you call a REST call? are you posting or getting, or responding to a query? how do you interact with a REST service? <code>curl</code>? what is the interface of the API you use? <i>maybe there is a more straightforward answer?</i> there can be a more precise questiion, really."}], "answers": [{"tags": [], "owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "is_accepted": false, "score": 0, "last_activity_date": 1536788035, "creation_date": 1536788035, "answer_id": 52303782, "question_id": 52303618, "link": "https://stackoverflow.com/questions/52303618/how-to-add-panda-to-json-output-to-a-rest-call/52303782#52303782", "title": "How to add Panda &#39;to_json&#39; output to a rest call", "body": "<p>Still not sure what you need, JSON is really one big string:</p>\n\n<pre><code>x = [{\"val\":\"3760\",\"id\":\"204\",\"quantity\":2},\n     {\"val\":\"8221\",\"id\":\"220\",\"quantity\":8}]\n\n&gt;&gt;&gt; json.dumps(x)\n&gt;&gt;&gt; '[{\"val\": \"3760\", \"id\": \"204\", \"quantity\": 2}, {\"val\": \"8221\", \"id\": \"220\", \"quantity\": 8}]'\n</code></pre>\n"}], "owner": {"reputation": 1631, "user_id": 1675909, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/01c2f960262afc76b149cdd786760753?s=128&d=identicon&r=PG", "display_name": "FunnyChef", "link": "https://stackoverflow.com/users/1675909/funnychef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536788035, "creation_date": 1536787129, "last_edit_date": 1536787740, "question_id": 52303618, "link": "https://stackoverflow.com/questions/52303618/how-to-add-panda-to-json-output-to-a-rest-call", "title": "How to add Panda &#39;to_json&#39; output to a rest call", "body": "<p>I have the following JSON data:</p>\n\n<pre><code>x = df.to_json(orient='records')\nprint(x)\n\n[{\"val\":\"3760\",\"id\":\"204\",\"quantity\":2},{\"val\":\"8221\",\"id\":\"220\",\"quantity\":8}]\n</code></pre>\n\n<p>I want to add the data to my REST call, but it results in the following string in the payload (note: the single quotes around the square bracket:</p>\n\n<pre><code>'updateVals': '[{\"val\":\"3760\",\"id\":\"204\",\"quantity\":2},{\"val\":\"8221\",\"id\":\"220\",\"quantity\":8}]'}}\n</code></pre>\n\n<p>The fact that the JASON values are listed as one big string, the REST call results in an HTTP 400 error. </p>\n\n<p>The code is:</p>\n\n<pre><code>url = 'my_url'\npayload = {\n    'client_id': 'my_id',\n    'api_key': 'my_key',\n    \"data\": {\n        \"uuid\": \"myUUID\",\n        \"timeStamp\": \"2018-09-12T06:17:48+00:00\",\n        \"updateVals\": x\n    }\n}\n</code></pre>\n\n<p>How do I plug the JSON into the REST call? I assume I have to split the string, or maybe there is a more straightforward answer?</p>\n"}, {"tags": ["python", "regex", "pandas", "for-loop"], "comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1536787558, "post_id": 52303613, "comment_id": 91555020, "body": "Good news is, there is a way!  However, you&#39;re far more likely to get someone to help you if you provide sample data and expected results.  Read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  That said, all you need is to show 2 dataframes with 2 rows each and the appropriate column names.  State that it needs to be a general solution to accommodate more than 2 dataframes."}, {"owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1536787860, "post_id": 52303613, "comment_id": 91555114, "body": "Sorry, that was my bad. I&#39;ll Edit it if someone has a better answer than mine !"}], "answers": [{"tags": [], "owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1536787661, "creation_date": 1536787661, "answer_id": 52303714, "question_id": 52303613, "link": "https://stackoverflow.com/questions/52303613/renaming-similar-columns-from-different-dataframes-using-for-loop-and-regex-in-p/52303714#52303714", "title": "Renaming similar columns from different DataFrames using for loop and Regex in Python", "body": "<p>Managed to do it. Probably not the most Pythonic way, but it does what I wanted:</p>\n\n<pre><code>dfs=[df2b2015,df4b2015,df6b2015,df8b2015,df2m2015]\ncols_lect=['prom_lect2b_rbd','prom_lect4b_rbd','prom_lect6b_rbd',\n           'prom_lect8b_rbd','prom_lect2m_rbd']\n\nfor j,k in zip(dfs,cols_lect):\n    j.rename(columns={k:re.sub('\\d(b|m)','', k)}, inplace=True)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 912, "user_id": 10310883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad4f4b5c9c34e2210b92088b03e9c9f8?s=128&d=identicon&r=PG&f=1", "display_name": "doppler", "link": "https://stackoverflow.com/users/10310883/doppler"}, "is_accepted": false, "score": 0, "last_activity_date": 1536788452, "creation_date": 1536788452, "answer_id": 52303868, "question_id": 52303613, "link": "https://stackoverflow.com/questions/52303613/renaming-similar-columns-from-different-dataframes-using-for-loop-and-regex-in-p/52303868#52303868", "title": "Renaming similar columns from different DataFrames using for loop and Regex in Python", "body": "<p>Something like this, with <code>.filter(regex=)</code>? It does assume there is only one matching column per dataframe but your example permits that.</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\ndf1 = pd.DataFrame(np.random.rand(10,3),columns=['prom_lect2b_rbd','foo','bar'])\ndf2 = pd.DataFrame(np.random.rand(10,3),columns=['prom_lect4b_rbd','foo','bar'])\n\nfor df in [df1,df2]:\n    colname = df.filter(regex='prom_lect*').columns.format()\n    df.rename(columns={colname[0]:'prom_lect_rbd'})\n\nprint(df1)\nprint(df2)\n</code></pre>\n"}], "owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1536788452, "creation_date": 1536787107, "last_edit_date": 1536788005, "question_id": 52303613, "link": "https://stackoverflow.com/questions/52303613/renaming-similar-columns-from-different-dataframes-using-for-loop-and-regex-in-p", "title": "Renaming similar columns from different DataFrames using for loop and Regex in Python", "body": "<p>Today I've been working with five DataFrames that are almost the same, but for different courses. They are named <code>df2b2015</code>, <code>df4b2015</code>, <code>df6b2015</code>, <code>df2m2015</code>.</p>\n\n<p>Every one of those DataFrames has a column named <code>prom_lect2b_rbd</code> for <code>df2b2015</code>, <code>prom_lect4b_rbd</code> for <code>df4b2015</code>, and so on.</p>\n\n<p>I want to append those DataFrames, but because every column has a different name, they don't go together. I'm trying to turn every one of those columns into a <code>prom_lect_rbd</code> column, so I can then  append them without problem.</p>\n\n<p>Is there a way I can do that with a <code>for</code> loop and <code>regex</code>. \nElse, is there a way I can do it with other means?</p>\n\n<p>Thanks!</p>\n\n<p>PS: I know some things, like I can turn the columns into what I want using:</p>\n\n<pre><code>re.sub('\\d(b|m)','', a)\n</code></pre>\n\n<p>Where <code>a</code> is the columns name. But I can't find a way to mix that with loops and column renaming.</p>\n\n<p>Edit:</p>\n\n<p>DataFrame(s) look like this:</p>\n\n<p>df2b2015:</p>\n\n<pre><code>rbd   prom_lect2b_rbd\n 1          5\n 2          6\n</code></pre>\n\n<p>df4b2015:</p>\n\n<pre><code>rbd   prom_lect4b_rbd\n 1          8\n 2          9\n</code></pre>\n\n<p>etc.</p>\n"}, {"tags": ["python", "saml", "onelogin"], "comments": [{"owner": {"reputation": 4086, "user_id": 239408, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/de416954e21512ca68df870485c8b68e?s=128&d=identicon&r=PG", "display_name": "xverges", "link": "https://stackoverflow.com/users/239408/xverges"}, "edited": false, "score": 0, "creation_date": 1536787151, "post_id": 52303579, "comment_id": 91554867, "body": "I&#39;d look in <a href=\"https://github.com/mehcode/python-xmlsec/issues\" rel=\"nofollow noreferrer\">github.com/mehcode/python-xmlsec/issues</a> and post additional details about your environment"}, {"owner": {"reputation": 113, "user_id": 10100384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f2da61bc28e64c5945c134129c225a0?s=128&d=identicon&r=PG&f=1", "display_name": "Abdullah Farooq", "link": "https://stackoverflow.com/users/10100384/abdullah-farooq"}, "reply_to_user": {"reputation": 4086, "user_id": 239408, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/de416954e21512ca68df870485c8b68e?s=128&d=identicon&r=PG", "display_name": "xverges", "link": "https://stackoverflow.com/users/239408/xverges"}, "edited": false, "score": 0, "creation_date": 1536800638, "post_id": 52303579, "comment_id": 91557979, "body": "@xverges Thanks. I realized all i need was the latest version with everything fixed from here: <a href=\"https://github.com/mehcode/python-xmlsec/releases/tag/1.3.5\" rel=\"nofollow noreferrer\">github.com/mehcode/python-xmlsec/releases/tag/1.3.5</a>"}, {"owner": {"reputation": 4086, "user_id": 239408, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/de416954e21512ca68df870485c8b68e?s=128&d=identicon&r=PG", "display_name": "xverges", "link": "https://stackoverflow.com/users/239408/xverges"}, "edited": false, "score": 0, "creation_date": 1536817110, "post_id": 52303579, "comment_id": 91561616, "body": "@Abullah Nice! Then you should add what you did as an answer (with additional details), or delete the question."}, {"owner": {"reputation": 113, "user_id": 10100384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f2da61bc28e64c5945c134129c225a0?s=128&d=identicon&r=PG&f=1", "display_name": "Abdullah Farooq", "link": "https://stackoverflow.com/users/10100384/abdullah-farooq"}, "reply_to_user": {"reputation": 4086, "user_id": 239408, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/de416954e21512ca68df870485c8b68e?s=128&d=identicon&r=PG", "display_name": "xverges", "link": "https://stackoverflow.com/users/239408/xverges"}, "edited": false, "score": 0, "creation_date": 1536843145, "post_id": 52303579, "comment_id": 91575392, "body": "@xverges i installed xmlsec from the link i mentioned (pip install &quot;path to xmlsec-1.3.52.dev0-cp27-cp27m-win_amd64&quot;) and then pip install python3-saml and both installed correctly. Then i had a python file which had an import statement &quot;from onelogin.saml2.auth import OneLogin_Saml2_Auth&quot; and i ran this file after the above installs and there was no error. Also if you try to install python3-saml before xmlsec it gives an error."}, {"owner": {"reputation": 4086, "user_id": 239408, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/de416954e21512ca68df870485c8b68e?s=128&d=identicon&r=PG", "display_name": "xverges", "link": "https://stackoverflow.com/users/239408/xverges"}, "edited": false, "score": 0, "creation_date": 1536845946, "post_id": 52303579, "comment_id": 91577120, "body": "Thanks! What I was trying to tell you is that, if you were able to solve your problem, you should create an answer <a href=\"https://stackoverflow.com/help/self-answer\">stackoverflow.com/help/self-answer</a> But now I see that you still don&#39;t have enough reputation. Sorry for the confusion."}], "answers": [{"tags": [], "owner": {"reputation": 2694, "user_id": 588836, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/yp8wy.png?s=128&g=1", "display_name": "smartin", "link": "https://stackoverflow.com/users/588836/smartin"}, "is_accepted": true, "score": 0, "last_activity_date": 1537355189, "creation_date": 1537355189, "answer_id": 52404450, "question_id": 52303579, "link": "https://stackoverflow.com/questions/52303579/importerror-no-module-named-saml2-auth/52404450#52404450", "title": "ImportError: No module named saml2.auth", "body": "<p><a href=\"https://github.com/mehcode/python-xmlsec\" rel=\"nofollow noreferrer\">xmlsec</a> (a dependency of python3-saml) had some installation issues on version previous of 1.3.5.</p>\n\n<p><a href=\"https://github.com/mehcode/python-xmlsec/releases/tag/1.3.5\" rel=\"nofollow noreferrer\">v1.3.5</a> solved those issues</p>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 10100384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f2da61bc28e64c5945c134129c225a0?s=128&d=identicon&r=PG&f=1", "display_name": "Abdullah Farooq", "link": "https://stackoverflow.com/users/10100384/abdullah-farooq"}, "is_accepted": false, "score": 0, "last_activity_date": 1538578559, "creation_date": 1538578559, "answer_id": 52629932, "question_id": 52303579, "link": "https://stackoverflow.com/questions/52303579/importerror-no-module-named-saml2-auth/52629932#52629932", "title": "ImportError: No module named saml2.auth", "body": "<p>All i needed was the latest version with everything fixed from here: github.com/mehcode/python-xmlsec/releases/tag/1.3.5</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 11710365, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/f1896b6dda36fc268bc2f25708836bd6?s=128&d=identicon&r=PG", "display_name": "leo", "link": "https://stackoverflow.com/users/11710365/leo"}, "is_accepted": false, "score": 2, "last_activity_date": 1561668506, "last_edit_date": 1561668506, "creation_date": 1561662588, "answer_id": 56797338, "question_id": 52303579, "link": "https://stackoverflow.com/questions/52303579/importerror-no-module-named-saml2-auth/56797338#56797338", "title": "ImportError: No module named saml2.auth", "body": "<p>Solved by:</p>\n\n<p><code>sudo pip install python3-saml</code></p>\n"}], "owner": {"reputation": 113, "user_id": 10100384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f2da61bc28e64c5945c134129c225a0?s=128&d=identicon&r=PG&f=1", "display_name": "Abdullah Farooq", "link": "https://stackoverflow.com/users/10100384/abdullah-farooq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3595, "favorite_count": 0, "accepted_answer_id": 52404450, "answer_count": 3, "score": 3, "last_activity_date": 1561668506, "creation_date": 1536786865, "question_id": 52303579, "link": "https://stackoverflow.com/questions/52303579/importerror-no-module-named-saml2-auth", "title": "ImportError: No module named saml2.auth", "body": "<p>I'm trying to build a SAML authentication mechanism in Python using the OneLogin module, but I keep getting this error: ImportError: No module named saml2.auth</p>\n\n<p>I have followed the steps listed here: </p>\n\n<p><a href=\"https://github.com/onelogin/python3-saml\" rel=\"nofollow noreferrer\">https://github.com/onelogin/python3-saml</a></p>\n\n<p>and installed dependencies as well but i can't install xmlsec library and it says Failed building wheel for xmlsec and failed with error code 1.\n(I have done pip install wheel as well) </p>\n\n<p>Any suggestions how to get around this error?</p>\n"}, {"tags": ["python", "numpy", "scipy", "linear-algebra", "sympy"], "comments": [{"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1536788788, "post_id": 52303550, "comment_id": 91555472, "body": "what is the equation for x3?"}, {"owner": {"reputation": 445, "user_id": 2047587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/av0Jh.jpg?s=128&g=1", "display_name": "Jens Renders", "link": "https://stackoverflow.com/users/2047587/jens-renders"}, "reply_to_user": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1536788998, "post_id": 52303550, "comment_id": 91555522, "body": "@EPo Sorry, my matrix was incorrect. I fixed it and now the comments underneath are correct. <code>x2 = 1</code> and <code>x1 + x3 = 1</code>, so either <code>x1</code> or <code>x3</code> can be chosen as free"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6655984"}, "is_accepted": true, "score": 3, "last_activity_date": 1536789828, "creation_date": 1536789828, "answer_id": 52304099, "question_id": 52303550, "link": "https://stackoverflow.com/questions/52303550/find-which-variables-are-free-in-underdetermined-linear-system/52304099#52304099", "title": "Find which variables are free in underdetermined linear system", "body": "<p>This is similar to <a href=\"https://stackoverflow.com/questions/42867494/how-can-i-find-a-basis-for-the-column-space-of-a-rectangular-matrix\">How can I find a basis for the column space of a rectangular matrix?</a> except that you are asking for free variables, which correspond to the columns that remain after we picked a basis for the column space. So, the set difference reduces one problem to the other. Here is an example with a slightly more complicated matrix:</p>\n\n<pre><code>import numpy as np\nfrom scipy.linalg import lu\nM = np.array([[1, 1, 0, 1], [0, 0, 1, 0], [0, 0, 7, 0]])\nU = lu(M)[2]\nbasis_columns = {np.flatnonzero(U[i, :])[0] for i in range(U.shape[0])}\nfree_variables = set(range(U.shape[1])) - basis_columns\n</code></pre>\n\n<p>Answer: <code>{1, 3}</code>. </p>\n\n<p>Caveat: all this is sensitive to floating point errors, so SymPy could still be preferred if you have exact rational numbers in the input and want to preserve them as such. </p>\n"}, {"tags": [], "owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "is_accepted": false, "score": 0, "last_activity_date": 1536789930, "creation_date": 1536789930, "answer_id": 52304117, "question_id": 52303550, "link": "https://stackoverflow.com/questions/52303550/find-which-variables-are-free-in-underdetermined-linear-system/52304117#52304117", "title": "Find which variables are free in underdetermined linear system", "body": "<p>Not sure this is precise, but I think the free variable is any variable has non-zero coefficient for non-pivotal element in <a href=\"https://math.stackexchange.com/questions/1374133/linear-algebra-free-variables\">echelon form</a>, and a variable it describes.</p>\n"}], "owner": {"reputation": 445, "user_id": 2047587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/av0Jh.jpg?s=128&g=1", "display_name": "Jens Renders", "link": "https://stackoverflow.com/users/2047587/jens-renders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "accepted_answer_id": 52304099, "answer_count": 2, "score": 3, "last_activity_date": 1536789990, "creation_date": 1536786737, "last_edit_date": 1536789990, "question_id": 52303550, "link": "https://stackoverflow.com/questions/52303550/find-which-variables-are-free-in-underdetermined-linear-system", "title": "Find which variables are free in underdetermined linear system", "body": "<p>I have an underdetermined system of linear equations. This can for example be solved by SimPy, where the solution is then a function of some free variables. What I am looking for is, which are those free variables. This set of variables is not unique but one option is enough. For example</p>\n\n<pre><code>[1  0  1] [x1] = [1]\n[0  1  0] [x2] = [1]\n          [x3]\n</code></pre>\n\n<p>Here, <code>x2</code> is determined by the second equation, and either <code>x1</code>or <code>x3</code> could be used as a free variable. So for example the set <code>{x1}</code> is a valid solution to my problem</p>\n\n<p>One way of finding this is using SymPy and parsing the solutions to find which variables are used in there. This is rather cumbersome. Is there a nicer way to do this? Preferably without any symbolic computations (returning the index of the free variables).</p>\n\n<p>Here the same question is asked, but not answered, as it turned out the asker wanted to ask something else: <a href=\"https://stackoverflow.com/questions/50510558/how-to-determine-which-one-is-free-variable-in-the-result-of-sympy-linsolve\">How to determine which one is free variable in the result of sympy.linsolve</a></p>\n\n<p>He just wanted a single solution to the system. I want to know the free variables, and don't even need to know a solution.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1536786756, "post_id": 52303523, "comment_id": 91554708, "body": "Wow that was very fast! Do you mind explaining, teach a man to fish and all that"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 1, "creation_date": 1536787113, "post_id": 52303523, "comment_id": 91554853, "body": "Hope that helps."}, {"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1536787816, "post_id": 52303523, "comment_id": 91555096, "body": "Ah I was so close,i was missing the df.status.ne in my own code Indeed it does! My wife is pulling me by the ear to go bed, but I&#39;ll test and green tick tomorrow, thanks to you my fair fellow!"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1536787874, "post_id": 52303523, "comment_id": 91555128, "body": "Good night, glad it helped."}, {"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1536825251, "post_id": 52303523, "comment_id": 91565126, "body": "Thanks the ~ is genius, something i&#39;ll probably use daily going forward, thanks!"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 2, "last_activity_date": 1536787079, "last_edit_date": 1536787079, "creation_date": 1536786592, "answer_id": 52303523, "question_id": 52303467, "link": "https://stackoverflow.com/questions/52303467/pandas-remove-duplicates-with-a-double-condition/52303523#52303523", "title": "Pandas remove duplicates with a double condition", "body": "<h3>not <code>duplicated</code> or not <code>Requested</code></h3>\n\n<pre><code>df[~df.duplicated(['ID', 'Course'], keep=False) | df.Status.ne('Requested')]\n\n    Course  ID              Status\n0  English   1            Attended\n2  English   1  Partially Attended\n3  History   1             No show\n5  Science   2            Attended\n6  Science   2  Partially Attended\n7     Math   2             No show\n</code></pre>\n\n<hr>\n\n<p><a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.duplicated.html\" rel=\"nofollow noreferrer\"><strong><code>pandas.DataFrame.duplicated</code></strong></a></p>\n\n<p>Identifies if things are duplicates.  I pass a list of column names to use to determine duplicity.  By using <code>keep=False</code> I specify that I want to count the first or last occurrence as a duplicate as well.</p>\n\n<pre><code>df.duplicated(['ID', 'Course'], keep=False)\n\n0     True\n1     True\n2     True\n3    False\n4     True\n5     True\n6     True\n7    False\ndtype: bool\n</code></pre>\n\n<p>However, if it is a duplicate, also check if it is <code>Requested</code></p>\n\n<pre><code>df.Status.ne('Requested')\n\n0     True\n1    False\n2     True\n3     True\n4    False\n5     True\n6     True\n7     True\nName: Status, dtype: bool\n</code></pre>\n\n<p>So we want rows that are either not duplicates, and if they are at least don't have <code>Status</code> equal to <code>Requested</code></p>\n"}], "owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "accepted_answer_id": 52303523, "answer_count": 1, "score": 1, "last_activity_date": 1536787079, "creation_date": 1536786249, "last_edit_date": 1536786973, "question_id": 52303467, "link": "https://stackoverflow.com/questions/52303467/pandas-remove-duplicates-with-a-double-condition", "title": "Pandas remove duplicates with a double condition", "body": "<p>consider the following DF</p>\n\n<pre><code>    import pandas as pd\n    df = pd.DataFrame({'ID': [1,1,1,1,2,2,2,2], \n    'Course': \n    ['English','English','English','History','Science', 'Science', 'Science','Math'],\n    'Status':\n    ['Attended', 'Requested', 'Partially Attended', 'No show',\n    'Requested','Attended','Partially Attended','No show']})\n    df.set_index(['ID'])\n    print(df)\n\nCourse  Status\nID      \n1   English Attended\n1   English Requested\n1   English Partially Attended\n1   History No show\n2   Science Requested\n2   Science Attended\n2   Science Partially Attended\n2   Math    No show\n</code></pre>\n\n<p>I'm trying to work out a way to remove duplicates based on the following 3 assumptions.</p>\n\n<ol>\n<li>ID occurs more than once.</li>\n<li>Where the ID occurs more than once the course has to be the same. (so 1, History and 2, Math are fine to stay)</li>\n<li>if a match is found then I want to <em>only</em> drop in the instance where a course is completed and there is a request, dropping the row with the request. A no-show and partially attended are fine. </li>\n</ol>\n\n<p>I'm currently studying and taking DataCamps Python and pandas courses so I'm familiar with groupby, aggregate, sort functions where I can drop the later or earlier duplicate with time-series data. I have no idea how to apply conditions or logic to the drop functions. I've searched this forum for similar functions but I've not been apply anything to my own DF. </p>\n\n<p>my desired result is as follows:</p>\n\n<pre><code>Course  Status\nID      \n1   English Attended\n1   English Partially Attended\n1   History No show\n2   Science Attended\n2   Science Partially Attended\n2   Math    No show\n</code></pre>\n"}, {"tags": ["python", "algorithm", "recursion"], "comments": [{"owner": {"reputation": 1638, "user_id": 7518561, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6361386e37f3f0da75f732f5c0d84458?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHunter", "link": "https://stackoverflow.com/users/7518561/codehunter"}, "edited": false, "score": 0, "creation_date": 1536786619, "post_id": 52303451, "comment_id": 91554656, "body": "Try using recursive depth first search approach here. Whenever you encounter a <code>list</code>, call the recursive function and then call your <code>helper</code> function to count consecutive odd numbers."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 8956819, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/18ee2cca28c7060f59b9fdf2ddfe47e5?s=128&d=identicon&r=PG", "display_name": "hood", "link": "https://stackoverflow.com/users/8956819/hood"}, "edited": false, "score": 0, "creation_date": 1536787925, "post_id": 52303713, "comment_id": 91555154, "body": "I am not supposed to use any loops :/"}], "tags": [], "owner": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "is_accepted": false, "score": 0, "last_activity_date": 1536787645, "creation_date": 1536787645, "answer_id": 52303713, "question_id": 52303451, "link": "https://stackoverflow.com/questions/52303451/python-get-a-number-of-a-list-of-lists-which-has-3-odd-numbers-recursively/52303713#52303713", "title": "Python: Get a number of a list of lists which has &gt;= 3 odd numbers &quot;Recursively&quot;", "body": "<p>Here's a simple solution. Could be shorter but this is more readable Just count the number of odds you have returning 1 if you have more than 3, if you hit a <code>list</code> object, just call your function again. This works for nested lists too. </p>\n\n<pre><code>def count_even(L):\n    c = 0\n    numberOfOddsInList = 0\n    for i in L:\n        if type(i) is list:\n            numberOfOddsInList = count_even(i)\n        else:\n            if i % 2 == 1:\n                c+=1\n    return (c &gt;= 3) + numberOfOddsInList\n\n\nprint(count_even([1, 2, 3, 1, [3, 3, 3,[1,1,1]]]))# returns 3 \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 20860, "user_id": 2034787, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/78471a5b1bfa8b48d2056ff99a875f50?s=128&d=identicon&r=PG", "display_name": "\u05d2\u05dc\u05e2\u05d3 \u05d1\u05e8\u05e7\u05df", "link": "https://stackoverflow.com/users/2034787/%d7%92%d7%9c%d7%a2%d7%93-%d7%91%d7%a8%d7%a7%d7%9f"}, "is_accepted": true, "score": 0, "last_activity_date": 1536807648, "last_edit_date": 1536807648, "creation_date": 1536807292, "answer_id": 52306005, "question_id": 52303451, "link": "https://stackoverflow.com/questions/52303451/python-get-a-number-of-a-list-of-lists-which-has-3-odd-numbers-recursively/52306005#52306005", "title": "Python: Get a number of a list of lists which has &gt;= 3 odd numbers &quot;Recursively&quot;", "body": "<p>Since you are already using a wrapper, we could examine a recursion that counts both the odd elements for the current list as well as the count for list elements. We can also just use an index to mark where we are and avoid unnecessary copying (this recursion could be used with or without a wrapper, depending on your needs):</p>\n\n\n\n<pre><code># Returns a tuple:\n# (this_list, total)\ndef f(L, i):\n  if i == len(L):\n    return (0,0)\n\n  this_list, total = f(L, i + 1)\n\n  if isinstance(L[i], list):\n    return (this_list, total + f(L[i], 0)[1])\n\n  if this_list == \"list counted\" or not (L[i] &amp; 1):\n    return (this_list, total)\n\n  if this_list == 2:\n    return (\"list counted\", total + 1)\n\n  return (this_list + 1, total)\n\nprint f ([1, 2, 3, 5, [3, 3, 3, [5,5,5]]], 0) # ('list counted', 3)\nprint f ([1, 2, 3, 4, [3, 3, 3, [5,5,5]]], 0) # (2, 2)\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 8956819, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/18ee2cca28c7060f59b9fdf2ddfe47e5?s=128&d=identicon&r=PG", "display_name": "hood", "link": "https://stackoverflow.com/users/8956819/hood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 1, "accepted_answer_id": 52306005, "answer_count": 2, "score": 1, "last_activity_date": 1536807648, "creation_date": 1536786146, "question_id": 52303451, "link": "https://stackoverflow.com/questions/52303451/python-get-a-number-of-a-list-of-lists-which-has-3-odd-numbers-recursively", "title": "Python: Get a number of a list of lists which has &gt;= 3 odd numbers &quot;Recursively&quot;", "body": "<p>I need a help to get a number of a list of lists which has >= 3 odd numbers recursively. So for example, [1, 2, 3, 4, [3, 3, 3]] returns 1 because only inner list has more than 3 odd numbers. [2, 5, 5, 5, [3, 3, 3]] returns 2 because both of outer and inner loops have more than 3 odd numbers.</p>\n\n<p>The hardest part for me is to keep track of the condition of counting the number of odd numbers. So I came up with an idea to use an extra parameter(cnt) every recursive step.</p>\n\n<p>The bottom pseudo code is not working, it it just my basic idea. Can someone please give me some hints or ideas?</p>\n\n<pre><code>    def count_even(L):\n      def helper(L, cnt):\n        if L is empty return 0\n        elif cnt == 3 return 1 # when odd numbers &gt;= 3 then it returns\n        elif L[0] is even? return helper(L[0], count+1) # increment cnt\n        elif L[0] is list? # if detects inner loop, then another recursion\n          inner_list = L[0]\n          return helper(inner_list[0], 0) + helper(inner_list[1:], 0)\n        else: # L[0] is not even\n          return helper(L[1:], count)\n\n     # calling a helper function with cnt=0\n     helper(L, 0) \n</code></pre>\n"}, {"tags": ["javascript", "python", "flask", "jinja2", "flask-wtforms"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 6307539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30a97b4d6623d4b2df541358e3c0fb28?s=128&d=identicon&r=PG&f=1", "display_name": "Maximus Gebo", "link": "https://stackoverflow.com/users/6307539/maximus-gebo"}, "edited": false, "score": 0, "creation_date": 1536820653, "post_id": 52305506, "comment_id": 91562957, "body": "thanks for response , I will try and let you know mate !"}], "tags": [], "owner": {"reputation": 234, "user_id": 6375327, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6591d95956f5e2d2de7370e001c36b14?s=128&d=identicon&r=PG&f=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/6375327/kai"}, "is_accepted": true, "score": 1, "last_activity_date": 1536802873, "creation_date": 1536802873, "answer_id": 52305506, "question_id": 52303432, "link": "https://stackoverflow.com/questions/52303432/how-to-change-flask-form-output-with-javascript/52305506#52305506", "title": "How to change flask form output with JavaScript", "body": "<p>TL;DR: Link to jsFiddle: <a href=\"http://jsfiddle.net/bkjwgy10/36/\" rel=\"nofollow noreferrer\">http://jsfiddle.net/bkjwgy10/36/</a></p>\n\n<p>Here's an example on how to do it through <code>javascript</code>. Some assumptions I assumed were that </p>\n\n<ul>\n<li>you validated the data on input</li>\n<li>you incorporated <code>jQuery</code>. You can also do it through just <code>javascript</code>, but you would then need to add in <code>eventListeners</code>. Documentation on jQuery can be found <a href=\"http://api.jquery.com/\" rel=\"nofollow noreferrer\">here</a>.</li>\n<li>you had your own CSS to create tables -- the jsFiddle will show top-down format, as I didn't include any CSS.</li>\n</ul>\n\n<p>Some considerations: </p>\n\n<ul>\n<li>instead of writing your own hours calculations, you could use <code>moment.js</code> -- documentation for that is <a href=\"https://momentjs.com/docs/#/parsing/\" rel=\"nofollow noreferrer\">here</a>.</li>\n<li>consider having another attribute called <code>value</code> that holds information that will be used by Flask, but not pretty formatted to be displayed for viewers. The viewers will see something different, but value is the same.</li>\n<li>I used <code>$().closest()</code> rather than <code>$().parent()</code>. Both yield the same result, but because you specified <code>class=\"rTableCell\"</code> and <code>class=\"rTableRow\"</code> rather than <code>&lt;tr&gt;</code> and <code>&lt;td&gt;</code>, I figured that was appropriate.</li>\n<li>You can easily add in more columns; I assumed it was fixed and wrote the calculations that way.</li>\n</ul>\n\n<p>So <code>javascript</code>, you can add this in the <code>document.ready</code> or <code>DOMContentLoaded</code></p>\n\n<pre><code>$('.rTableCell').focusout(function(e) {\n    /* insert validation here */\n\n    // yield selected row\n    var row = $(this).closest('.rTableRow');\n    //alternative: console.log($(this).parent())\n\n    // get children (cells in row)\n    var rcells = $(this).closest('.rTableRow').children();\n\n    // set HTML to this\n    rcells.last().html(calculate_hours(rcells));\n})\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 6307539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30a97b4d6623d4b2df541358e3c0fb28?s=128&d=identicon&r=PG&f=1", "display_name": "Maximus Gebo", "link": "https://stackoverflow.com/users/6307539/maximus-gebo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 0, "accepted_answer_id": 52305506, "answer_count": 1, "score": 0, "last_activity_date": 1536802873, "creation_date": 1536786049, "last_edit_date": 1536786149, "question_id": 52303432, "link": "https://stackoverflow.com/questions/52303432/how-to-change-flask-form-output-with-javascript", "title": "How to change flask form output with JavaScript", "body": "<p>I'm creating a simple flask app which generates output based on a data added to a flask form. What I'm trying to achieve is possibility to edit that output and in the same time update the other values based on that changes. App is calculating working hours, so I need to allow edition of the fields like begin of work and so on. Then those changes need to reflect the sum of total hours per day.\nHere is the output page:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Toy1t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Toy1t.png\" alt=\"enter image description here\"></a></p>\n\n<p>On above example I would like to change for example beginning of work to 10:00 and expect the total Number of hours to reduce from 8 to 7.\nI hope you know what I mean guys.</p>\n\n<p>Here is example of a div table that I use:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div class=\"rTableRow\" align=\"center\"&gt;\r\n  &lt;div class=\"rTableCell\"&gt;{{ day['day'].strftime(\"%d\") }}&lt;/div&gt;\r\n  &lt;div class=\"rTableCell\"&gt;{{ day['day'].strftime(\"%a\") }}&lt;/div&gt;\r\n  &lt;div class=\"rTableCell\" contenteditable=\"true\"&gt;{{ day['absence'] }}&lt;/div&gt;\r\n  &lt;div class=\"rTableCell\" contenteditable=\"true\"&gt;{{ day['start-hour'] }}&lt;/div&gt;\r\n  &lt;div class=\"rTableCell\" contenteditable=\"true\"&gt;{{ day['end-hour'] }}&lt;/div&gt;\r\n  &lt;div class=\"rTableCell\" contenteditable=\"true\"&gt;{{ day['additional-break'] }}&lt;/div&gt;\r\n  &lt;div class=\"rTableCell\" contenteditable=\"true\"&gt;{{ day['overtime'] }}&lt;/div&gt;\r\n  &lt;div class=\"rTableCell\" contenteditable=\"true\"&gt;{{ day['daily-total'] if day['daily-total'] != 0 else '-' }}&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Is there a way to do it with JavaScript? All the data is processed on view level and passed to a template.</p>\n\n<p>Many thanks for assistance.</p>\n"}, {"tags": ["python", "numpy", "object", "int"], "comments": [{"owner": {"reputation": 2352, "user_id": 5754992, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/953dd1892c726ceecc7f0240e982e11f?s=128&d=identicon&r=PG&f=1", "display_name": "user2699", "link": "https://stackoverflow.com/users/5754992/user2699"}, "edited": false, "score": 0, "creation_date": 1536786596, "post_id": 52303407, "comment_id": 91554647, "body": "<a href=\"https://docs.scipy.org/doc/numpy/user/basics.types.html\" rel=\"nofollow noreferrer\">docs.scipy.org/doc/numpy/user/basics.types.html</a>, your best options are probably <code>uint64</code> (still too small), or using double precision floating point."}, {"owner": {"reputation": 10409, "user_id": 483620, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/efc681121bec8b6c5f9b5bc0714396a0?s=128&d=identicon&r=PG", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/483620/benjamin"}, "edited": false, "score": 0, "creation_date": 1536795427, "post_id": 52303407, "comment_id": 91557047, "body": "What is the larger picture here? What are you trying to achieve with these large numbers?"}, {"owner": {"reputation": 611, "user_id": 3832614, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dac6e266b2b916aad31f97d342a86235?s=128&d=identicon&r=PG&f=1", "display_name": "appsdownload", "link": "https://stackoverflow.com/users/3832614/appsdownload"}, "edited": false, "score": 0, "creation_date": 1536797373, "post_id": 52303407, "comment_id": 91557418, "body": "I am building a bit map index of person vs videos, where I have a lot of videos(more than 1000) for a limited set of people (about 100). So each cell represents whether that person appears in the video(1) or not(0). This table is stored in a file. Now when I want to know if two people appear in a video together or not, then I read the corresponding row for those two people and do a bitwise &#39;AND&#39; operation to get the result and locate the indices where there is &#39;1&#39;. So do this bitwise &#39;AND&#39;, I need to convert the binary list into integers first and then compute the result."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1536798795, "post_id": 52303407, "comment_id": 91557681, "body": "Use a pair of uint64 values per video of you must have bit masks. You can define a custom dtype like that if you want."}], "answers": [{"comments": [{"owner": {"reputation": 611, "user_id": 3832614, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dac6e266b2b916aad31f97d342a86235?s=128&d=identicon&r=PG&f=1", "display_name": "appsdownload", "link": "https://stackoverflow.com/users/3832614/appsdownload"}, "edited": false, "score": 0, "creation_date": 1536801549, "post_id": 52305025, "comment_id": 91558130, "body": "Also, can we optimize? like if I want to find the videos where all the people appear together? That will be &#39;AND&#39;ing each row of my_map matrix. So, can we simply &#39;AND&#39; each row of the matrix, just like we do np.sum(axis=0)? Thank you for your time!"}, {"owner": {"reputation": 10409, "user_id": 483620, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/efc681121bec8b6c5f9b5bc0714396a0?s=128&d=identicon&r=PG", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/483620/benjamin"}, "reply_to_user": {"reputation": 611, "user_id": 3832614, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dac6e266b2b916aad31f97d342a86235?s=128&d=identicon&r=PG&f=1", "display_name": "appsdownload", "link": "https://stackoverflow.com/users/3832614/appsdownload"}, "edited": false, "score": 0, "creation_date": 1536801672, "post_id": 52305025, "comment_id": 91558145, "body": "Yes, you can do my_map.all(axis=0)."}, {"owner": {"reputation": 611, "user_id": 3832614, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dac6e266b2b916aad31f97d342a86235?s=128&d=identicon&r=PG&f=1", "display_name": "appsdownload", "link": "https://stackoverflow.com/users/3832614/appsdownload"}, "edited": false, "score": 0, "creation_date": 1536802133, "post_id": 52305025, "comment_id": 91558229, "body": "Thank you @Benjamin! You are truly awesome!"}], "tags": [], "owner": {"reputation": 10409, "user_id": 483620, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/efc681121bec8b6c5f9b5bc0714396a0?s=128&d=identicon&r=PG", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/483620/benjamin"}, "is_accepted": true, "score": 2, "last_activity_date": 1536798214, "last_edit_date": 1536798214, "creation_date": 1536797897, "answer_id": 52305025, "question_id": 52303407, "link": "https://stackoverflow.com/questions/52303407/numpy-dtype-object-very-slow-compared-to-numpy-dtype-int/52305025#52305025", "title": "numpy.dtype=object very slow compared to numpy.dtype=int", "body": "<p>Based on the user's comment:</p>\n\n<blockquote>\n  <p>I am building a bit map index of person vs videos, where I have a lot\n  of videos(more than 1000) for a limited set of people (about 100). So\n  each cell represents whether that person appears in the video(1) or\n  not(0). This table is stored in a file. Now when I want to know if two\n  people appear in a video together or not, then I read the\n  corresponding row for those two people and do a bitwise 'AND'\n  operation to get the result and locate the indices where there is '1'.\n  So do this bitwise 'AND', I need to convert the binary list into\n  integers first and then compute the result.</p>\n</blockquote>\n\n<p>A <em>much</em> simpler solution would be to load the binary array (dummy data used here, shape = persons x videos), then compare the two rows corresponding to your two persons (say person 10 and person 37) using &amp;, and finally retrieving the video indices where both occur:</p>\n\n<pre><code>my_map = numpy.random.randint(0,2,(100, 1000), numpy.bool)\nappear_together_in_video_index = numpy.where(my_map[10] &amp; my_map[37])\n</code></pre>\n\n<p>This way you are only ever dealing with booleans (8-bits) and avoiding the large number issue completely.</p>\n\n<p>To answer the original question, it is not really a fair comparison. Since your aim is to work with large numbers, you should perform the timing tests between two solutions that support such large numbers. The basic alternative is to hold Python ints in a Python list, which is not faster (nor simpler to handle) than to store them as objects in numpy arrays.</p>\n"}], "owner": {"reputation": 611, "user_id": 3832614, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dac6e266b2b916aad31f97d342a86235?s=128&d=identicon&r=PG&f=1", "display_name": "appsdownload", "link": "https://stackoverflow.com/users/3832614/appsdownload"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 0, "accepted_answer_id": 52305025, "answer_count": 1, "score": 0, "last_activity_date": 1536798214, "creation_date": 1536785963, "last_edit_date": 1592644375, "question_id": 52303407, "link": "https://stackoverflow.com/questions/52303407/numpy-dtype-object-very-slow-compared-to-numpy-dtype-int", "title": "numpy.dtype=object very slow compared to numpy.dtype=int", "body": "<p>I am entering high values (greater than 2^70) inside numpy arrays using numpy.dtype=object:</p>\n<pre><code>numpy.array([1], dtype=numpy.object) &lt;&lt; 70\narray([1180591620717411303424], dtype=object)\n</code></pre>\n<p>The only reason I am using dtype=numpy.object here is that numpy.int's limit is crossed when you try to enter high values inside it.</p>\n<pre><code>numpy.array([1]) &lt;&lt; 70\n&gt;&gt;&gt; array([64], dtype=int32) #the result should have been array([1180591620717411303424], dtype=object)\n</code></pre>\n<p>The details is expained in my other question <a href=\"https://stackoverflow.com/questions/52301276/integer-limit-crossed-while-performing-bitwise-left-shift-operation-in-array/52301348?noredirect=1#comment91551805_52301348\">here.</a>. In such cases using dtype=object works fine.</p>\n<p>But I found that using dtype=numpy.object is very slow.</p>\n<p>To verify, I compared the timings of the following operations:\n<a href=\"https://i.stack.imgur.com/m5N5E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/m5N5E.png\" alt=\"enter image description here\" /></a></p>\n<p>You can see that dtype=int is much faster.</p>\n<p>So is there any workaround for entering high values inside numpy arrays?</p>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "google-cloud-ml", "tfrecord"], "comments": [{"owner": {"reputation": 7854, "user_id": 1399222, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/3eaecaf22a77e4389a2aa095cd164fdf?s=128&d=identicon&r=PG", "display_name": "rhaertel80", "link": "https://stackoverflow.com/users/1399222/rhaertel80"}, "edited": false, "score": 0, "creation_date": 1536787241, "post_id": 52303403, "comment_id": 91554898, "body": "Yuri, do you mind providing a bit more info? Can you provide the output of <code>saved_model_cli show --all --dir &#47;path&#47;to&#47;model</code>? Also can you provide an ASCII version of one of the datapoints in your file?"}, {"owner": {"reputation": 221, "user_id": 896678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VpH6c.jpg?s=128&g=1", "display_name": "Yuri", "link": "https://stackoverflow.com/users/896678/yuri"}, "reply_to_user": {"reputation": 7854, "user_id": 1399222, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/3eaecaf22a77e4389a2aa095cd164fdf?s=128&d=identicon&r=PG", "display_name": "rhaertel80", "link": "https://stackoverflow.com/users/1399222/rhaertel80"}, "edited": false, "score": 0, "creation_date": 1536791300, "post_id": 52303403, "comment_id": 91556157, "body": "@rhaertel80 Thank you for a quick respond! I added the output of <code>saved_model_cli</code>, but I am not sure how to provide you an ASCII version of one of the datapoints in my file. The file is a serialized TFRecord. Is there a tool?"}], "answers": [{"comments": [{"owner": {"reputation": 221, "user_id": 896678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VpH6c.jpg?s=128&g=1", "display_name": "Yuri", "link": "https://stackoverflow.com/users/896678/yuri"}, "edited": false, "score": 0, "creation_date": 1536873129, "post_id": 52309009, "comment_id": 91591364, "body": "Thank you for the answer! My code used <code>parse_single_example</code> - it was not doing the correct batching, so adding <code>shape=[None]</code> didn&#39;t work and I had to go through the code and replace <code>parse_single_example</code> via <code>parse_example</code>. Now it works"}, {"owner": {"reputation": 7854, "user_id": 1399222, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/3eaecaf22a77e4389a2aa095cd164fdf?s=128&d=identicon&r=PG", "display_name": "rhaertel80", "link": "https://stackoverflow.com/users/1399222/rhaertel80"}, "reply_to_user": {"reputation": 221, "user_id": 896678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VpH6c.jpg?s=128&g=1", "display_name": "Yuri", "link": "https://stackoverflow.com/users/896678/yuri"}, "edited": false, "score": 0, "creation_date": 1536889523, "post_id": 52309009, "comment_id": 91594996, "body": "Happy to hear it!"}], "tags": [], "owner": {"reputation": 7854, "user_id": 1399222, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/3eaecaf22a77e4389a2aa095cd164fdf?s=128&d=identicon&r=PG", "display_name": "rhaertel80", "link": "https://stackoverflow.com/users/1399222/rhaertel80"}, "is_accepted": true, "score": 2, "last_activity_date": 1536825081, "creation_date": 1536825081, "answer_id": 52309009, "question_id": 52303403, "link": "https://stackoverflow.com/questions/52303403/getting-batch-predictions-for-tfrecords-via-cloudml/52309009#52309009", "title": "Getting batch predictions for TFrecords via CloudML", "body": "<p>When you export your model, you need to make sure that it is \"batchable\", i.e., the outer dimension of the input Placeholder has <code>shape=[None]</code>, e.g.,</p>\n\n<pre><code>input = tf.Placeholder(dtype=tf.string, shape=[None])\n...\n</code></pre>\n\n<p>That may require reworking the graph a bit. For instance, I see that the shape of your output is hard-coded to [1,1]. The outermost dimension should be <code>None</code>, this may happen automatically when you fix the placeholder, or it may require other changes.</p>\n\n<p>Given that the name of the output is <code>probabilities</code>, I would also expect the innermost dimension to be >1, i.e. the number of classes being predicted, so something like <code>[None, NUM_CLASSES]</code>.</p>\n"}], "owner": {"reputation": 221, "user_id": 896678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VpH6c.jpg?s=128&g=1", "display_name": "Yuri", "link": "https://stackoverflow.com/users/896678/yuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 394, "favorite_count": 1, "accepted_answer_id": 52309009, "answer_count": 1, "score": 1, "last_activity_date": 1536825081, "creation_date": 1536785941, "last_edit_date": 1536794422, "question_id": 52303403, "link": "https://stackoverflow.com/questions/52303403/getting-batch-predictions-for-tfrecords-via-cloudml", "title": "Getting batch predictions for TFrecords via CloudML", "body": "<p>I followed <a href=\"https://github.com/GoogleCloudPlatform/cloudml-samples/tree/master/census\" rel=\"nofollow noreferrer\">this great tutorial</a> and successfully trained a model (on CloudML). My code also makes predictions offline, but now I am trying to use Cloud ML to make predictions and have some problems.</p>\n\n<p>To deploy my model I followed <a href=\"https://cloud.google.com/ml-engine/docs/tensorflow/deploying-models\" rel=\"nofollow noreferrer\">this tutorial</a>. Now I have a code that generates <code>TFRecords</code> via <code>apache_beam.io.WriteToTFRecord</code> and I want to make predictions for those <code>TFRecords</code>. To do so I am following <a href=\"https://cloud.google.com/ml-engine/docs/tensorflow/batch-predict\" rel=\"nofollow noreferrer\">this article</a>, my command looks like this:</p>\n\n<pre><code>gcloud ml-engine jobs submit prediction $JOB_ID --model $MODEL --input-paths gs://\"$FILE_INPUT\".gz --output-path gs://\"$OUTPUT\"/predictions --region us-west1 --data-format TF_RECORD_GZIP\n</code></pre>\n\n<p>But I get only errors:\n<code>'Exception during running the graph: Expected serialized to be a scalar, got shape: [64]</code></p>\n\n<p>It seems like it expect data in a different format. I found the format specs for JSON <a href=\"https://cloud.google.com/ml-engine/docs/tensorflow/prediction-overview#online_prediction_input_data\" rel=\"nofollow noreferrer\">here</a>, but couldn't find how to do it with TFrecords. </p>\n\n<p>UPDATE: here is the output of <code>saved_model_cli show --all --dir</code></p>\n\n<pre><code>MetaGraphDef with tag-set: 'serve' contains the following SignatureDefs:\n\nsignature_def['prediction']:\n  The given SavedModel SignatureDef contains the following input(s):\n    inputs['example_proto'] tensor_info:\n    dtype: DT_STRING\n    shape: unknown_rank\n    name: input:0\n  The given SavedModel SignatureDef contains the following output(s):\n    outputs['probability'] tensor_info:\n    dtype: DT_FLOAT\n    shape: (1, 1)\n    name: probability:0\n  Method name is: tensorflow/serving/predict\n\nsignature_def['serving_default']:\n  The given SavedModel SignatureDef contains the following input(s):\n    inputs['example_proto'] tensor_info:\n    dtype: DT_STRING\n    shape: unknown_rank\n    name: input:0\n  The given SavedModel SignatureDef contains the following output(s):\n    outputs['probability'] tensor_info:\n    dtype: DT_FLOAT\n    shape: (1, 1)\n    name: probability:0\n  Method name is: tensorflow/serving/predict\n</code></pre>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1536787674, "post_id": 52303400, "comment_id": 91555062, "body": "It seems you would try <code>plt.plot(x, p,&#39;go--&#39;)</code>. But one cannot say for sure without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 3124, "user_id": 883431, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/dea352e5d1aa10cbb295772745dbec1a?s=128&d=identicon&r=PG", "display_name": "norio", "link": "https://stackoverflow.com/users/883431/norio"}, "edited": false, "score": 0, "creation_date": 1536789238, "post_id": 52303400, "comment_id": 91555592, "body": "As ImportanceOfBeingErnest commented, or <code>p = np.log((x+1)&#47;(x-1))</code> should be a mistake of <code>p = np.log((arrayX+1)&#47;(arrayX-1))</code>."}], "answers": [{"tags": [], "owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "is_accepted": false, "score": 0, "last_activity_date": 1536788730, "last_edit_date": 1536788730, "creation_date": 1536788416, "answer_id": 52303864, "question_id": 52303400, "link": "https://stackoverflow.com/questions/52303400/combining-log-and-linear-function-on-one-plot/52303864#52303864", "title": "Combining log and linear function on one plot", "body": "<p>You don't need to map anything. Make use of vectorised operations. Below is a minimal working answer. I am using a different x range because your log function has an asymptote as x approaches -1 and 1.</p>\n\n<pre><code>fig = plt.figure(figsize=(7, 5))\n\n# Define input\nx=np.linspace(1.1, 2, 100)\ny1 = x**2\ny2 =  np.log((x+1)/(x-1))\n\n# Plot\nplt.plot(x, y1, '-k', label = r'$y=x^2$')\nplt.plot(x, y2, '-g', label = r'$y=\\ln((x+1)/(x-1))$')\nplt.legend(fontsize=18)\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/iwiQA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iwiQA.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 90, "user_id": 9836412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iMxhf.jpg?s=128&g=1", "display_name": "feight", "link": "https://stackoverflow.com/users/9836412/feight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1536788730, "creation_date": 1536785932, "question_id": 52303400, "link": "https://stackoverflow.com/questions/52303400/combining-log-and-linear-function-on-one-plot", "title": "Combining log and linear function on one plot", "body": "<p>I want to have both y = log((x+1)/(x-1)) [-1;1] and another linear function on my plot. Both function share same <code>x</code> values. I store second function's <code>y</code> values in an array. So far I've tried this:</p>\n\n<pre><code>import numpy as np\np = np.log((x+1)/(x-1))\nplt.plot(arrayX, p,'go--')\nplt.plot(arrayX, arrayY)\nplt.show()\n</code></pre>\n\n<p>But I keep getting <code>ValueError: x and y must have same first dimension</code> and have no idea how to generate same number of elements for both <code>p</code> and my initial <code>x</code>.</p>\n"}, {"tags": ["python", "selenium", "selenium-chromedriver", "python-multiprocessing", "pathos"], "comments": [{"owner": {"reputation": 73, "user_id": 10304284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5199851395f7d8f46498056036ef766?s=128&d=identicon&r=PG&f=1", "display_name": "ntonk", "link": "https://stackoverflow.com/users/10304284/ntonk"}, "edited": false, "score": 1, "creation_date": 1543407051, "post_id": 52303359, "comment_id": 93906892, "body": "Well, as far as I understood, it failed because I was trying to use single selenium.webdriver instance for parallel tasks. Now it works since I initialize a separate webdriver instance for each process."}], "owner": {"reputation": 73, "user_id": 10304284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5199851395f7d8f46498056036ef766?s=128&d=identicon&r=PG&f=1", "display_name": "ntonk", "link": "https://stackoverflow.com/users/10304284/ntonk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 226, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1536786177, "creation_date": 1536785773, "last_edit_date": 1536786177, "question_id": 52303359, "link": "https://stackoverflow.com/questions/52303359/python-pickling-issues-with-pathos-and-selenium", "title": "Python: pickling issues with pathos and selenium", "body": "<p>I'm sorry if the answer to my question is obvious, since I'm a complete newbie to multiprocessing. </p>\n\n<p>I'm trying to write a multiprocessed web-scraping script with pathos. I chose pathos since, as far as I understand, unlike Python's traditional multiprocessing module, it is invulnerable to pickling issues and doesn't need every function or class to be in a top-level module.</p>\n\n<p>In general, a pseudo-code of what I'm trying to do looks like this:</p>\n\n<pre><code>from functools import partial\nfrom pathos.multiprocessing import ProcessPool as Pool\nfrom selenium import webdriver\n\n\ndef get_urls(main_page):\n    \"\"\"Extracts URLs from a website's main page; returns list.\"\"\"\n    return urls\n\n\ndef extract_text(url, web_driver):\n    \"\"\"Gets selenium.webdriver instance and an URL as arguments;\n       extracts text from this url; returns string\"\"\"\n    return text\n\n\nif __name__ == '__main__':\n\n    MAINPAGE = \"http://some/link/for/scraping\"\n    driver = webdriver.Chrome(\"path/to/chrome/binary\")\n    myLinks = get_urls(MAINPAGE)\n    pool = Pool(nodes=4)\n    part_text = partial(extract_text, web_driver=driver)\n    results = pool.map(part_text, myLinks)\n\n    print(results)\n</code></pre>\n\n<p>Nonetheless, despite my having both dill properly installed and _multiprocessing imported without any problems, I always get the following error when I run my code:</p>\n\n<pre><code>Traceback (most recent call last):\n   File \"D:\\Anaconda\\lib\\site-packages\\dill\\_dill.py\", line 688, in _create_filehandle\n   f = open(name, mode)\n   OSError: [WinError 6] The handle is invalid\n</code></pre>\n\n<p>And also:</p>\n\n<pre><code>_pickle.UnpicklingError: [WinError 6] The handle is invalid\n</code></pre>\n\n<p>Can it be a Windows-specific issue? Unfortunately, although I personally prefer Linux, this script needs to be run on a Windows 10 64bit machine. I tried both Python 3.6 (Anaconda 64bit) and Python 3.7 32bit on two Windows 10 machines and got the same error.</p>\n\n<p>Thanks in advance for any ideas, help, and suggestions.</p>\n"}, {"tags": ["python", "python-2.x"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 5, "creation_date": 1536785916, "post_id": 52303349, "comment_id": 91554418, "body": "You&#39;re reading a second input in your <code>elif input(&quot;&gt;&gt;&gt; &quot;)==2</code>. That&#39;s why it seems like the first command is being ignored. By the way, <code>input</code> in Python 2 is unsafe. You should stick with <code>raw_input</code> and convert the returned string to an int explicitly."}, {"owner": {"reputation": 1638, "user_id": 7518561, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6361386e37f3f0da75f732f5c0d84458?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHunter", "link": "https://stackoverflow.com/users/7518561/codehunter"}, "edited": false, "score": 1, "creation_date": 1536786063, "post_id": 52303349, "comment_id": 91554459, "body": "just try with single input and based on that condition, execute one of these functions."}], "answers": [{"tags": [], "owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "is_accepted": true, "score": 2, "last_activity_date": 1536786214, "creation_date": 1536786214, "answer_id": 52303463, "question_id": 52303349, "link": "https://stackoverflow.com/questions/52303349/almost-the-same-function-but-doesnt-work/52303463#52303463", "title": "Almost the same function, but doesnt work?", "body": "<pre><code>if input(\"&gt;&gt;&gt; \")==1:\n    encrypt()\nelif input(\"&gt;&gt;&gt; \")==2:\n    decrypt()\n</code></pre>\n\n<p>You're reading a second input in your <code>elif</code>. That's why it seems like the first command is being ignored. By the way, <code>input</code> in Python 2 is unsafe. You should stick with <code>raw_input</code> (which just returns a string without trying to evaluate it). </p>\n\n<pre><code>command = raw_input(\"&gt;&gt;&gt; \")\nif command==\"1\":\n    encrypt()\nelif command==\"2\":\n    decrypt()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 760, "user_id": 3701431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/U1Jy6.jpg?s=128&g=1", "display_name": "Sergiy Kolodyazhnyy", "link": "https://stackoverflow.com/users/3701431/sergiy-kolodyazhnyy"}, "edited": false, "score": 1, "creation_date": 1536793188, "post_id": 52303636, "comment_id": 91556576, "body": "In fact, now that I think of it, the two functions repeat code, so you could extract repeated pieces into a function of its own."}], "tags": [], "owner": {"reputation": 760, "user_id": 3701431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/U1Jy6.jpg?s=128&g=1", "display_name": "Sergiy Kolodyazhnyy", "link": "https://stackoverflow.com/users/3701431/sergiy-kolodyazhnyy"}, "is_accepted": false, "score": 2, "last_activity_date": 1536796422, "last_edit_date": 1536796422, "creation_date": 1536787212, "answer_id": 52303636, "question_id": 52303349, "link": "https://stackoverflow.com/questions/52303349/almost-the-same-function-but-doesnt-work/52303636#52303636", "title": "Almost the same function, but doesnt work?", "body": "<p>Here's a few suggestions:</p>\n\n<ul>\n<li>use raw_input</li>\n<li>don't repeat yourself - no need for 4 print statements</li>\n<li>Your functions print same prompt. This confuses the users. Add at least some indication as to what's happending</li>\n<li>instead of recursively calling <code>main()</code> (and eventually getting to the limits how many function calls can be on stack), make <code>main()</code> have a loop that calls your functions each time.</li>\n<li>get in the habit of writing <code>if __name__ = '__main__':</code> since when you start writing Python modules, you don't want the script run all the things on import, but rather just provide the functions to the calling script.</li>\n<li>wrap lines at 80 characters</li>\n</ul>\n\n<p>Edited code:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import os\nabc=['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', \n     'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', ' ', '.', \n     ',', '1', '2', '3', '4',   '5', '6', '7', '8', '9', '0', '+', '-', \n     ':', \"'\"]\nmixed=abc[::-1]\nos.system(\"clear\")\n\ndef menu():\n    header = '\\n'.join([\"-----------\",\"[1] Encrypt\",\n                        \"[2] Decrypt\",\"-----------\"])\n    while True:\n        print header\n        user_input = raw_input(\"&gt;&gt;&gt; \")\n        # print \"DEBUG:user input:\",user_input\n        if user_input == '1':\n            encrypt()\n        elif user_input == '2':\n            decrypt()\n        elif user_input == 'q':\n            exit()\n        else:\n            print(\"Bad input\")\n\ndef get_input():\n    os.system('clear')\n    print \"Encrypt\"\n    text=raw_input(\"&gt;&gt;&gt; \").lower()\n    return list(text)\n\n\ndef encrypt():\n    text = get_text()\n    textnew=text\n    for i in range(len(text)):\n        textnew[i]=mixed[abc.index(text[i])]\n    print ''.join(textnew)\n\ndef decrypt():\n    text = get_input()\n    textnew=text\n    for i in range(len(text)):\n        textnew[i]=abc[mixed.index(text[i])]\n    print ''.join(textnew)\n\nif __name__ = '__main__':    \n    menu()\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10355293, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-oL7WhgFhCRs/AAAAAAAAAAI/AAAAAAAAQCQ/ZnrDvNp-HX0/photo.jpg?sz=128", "display_name": "Lars Danzeisen", "link": "https://stackoverflow.com/users/10355293/lars-danzeisen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 52303463, "answer_count": 2, "score": 3, "last_activity_date": 1536796422, "creation_date": 1536785719, "last_edit_date": 1536795926, "question_id": 52303349, "link": "https://stackoverflow.com/questions/52303349/almost-the-same-function-but-doesnt-work", "title": "Almost the same function, but doesnt work?", "body": "<p>i tried something using python and while the <strong>encrypt()</strong> function works fine, the <strong>decrypt()</strong> function doesnt give me any output, not even an error :(</p>\n\n<p>My code:</p>\n\n<pre><code>import os\nabc=['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', ' ', '.', ',', '1', '2', '3', '4',   '5', '6', '7', '8', '9', '0', '+', '-', ':', \"'\"]\nmixed=abc[::-1]\nos.system(\"clear\")\ndef menu():\n    print \"-----------\"\n    print \"[1] Encrypt\"\n    print \"[2] Decrypt\"\n    print \"-----------\"\n    if input(\"&gt;&gt;&gt; \")==1:\n        encrypt()\n    elif input(\"&gt;&gt;&gt; \")==2:\n        decrypt()\n\ndef encrypt():\n    os.system('clear')\n    text=raw_input(\"&gt;&gt;&gt; \").lower()\n    text=list(text)\n    textnew=text\n    for i in range(len(text)):\n        textnew[i]=mixed[abc.index(text[i])]\n    print ''.join(textnew)\n    menu()\n\ndef decrypt():\n    os.system('clear')\n    text=raw_input(\"&gt;&gt;&gt; \").lower()\n    text=list(text)\n    textnew=text\n    for i in range(len(text)):\n        textnew[i]=abc[mixed.index(text[i])]\n    print ''.join(textnew)\n    menu()\n\nmenu()\n</code></pre>\n"}, {"tags": ["python", "loops"], "comments": [{"owner": {"reputation": 2226, "user_id": 6214491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/q9IUg.png?s=128&g=1", "display_name": "0xCursor", "link": "https://stackoverflow.com/users/6214491/0xcursor"}, "edited": false, "score": 0, "creation_date": 1536785657, "post_id": 52303314, "comment_id": 91554330, "body": "Some may know what coding language you are using but you don&#39;t actually state anywhere in your post which one. Make sure to add the tag for your language too. Also, check out <a href=\"https://stackoverflow.com/help\">help center</a> and <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> for more info about the workings of SO. Good luck!"}, {"owner": {"reputation": 798, "user_id": 959929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ahxUY.png?s=128&g=1", "display_name": "JSTL", "link": "https://stackoverflow.com/users/959929/jstl"}, "edited": false, "score": 0, "creation_date": 1536786623, "post_id": 52303314, "comment_id": 91554657, "body": "You&#39;re also missing one line of code at the very beginning, with the function&#39;s definition."}], "answers": [{"comments": [{"owner": {"reputation": 798, "user_id": 959929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ahxUY.png?s=128&g=1", "display_name": "JSTL", "link": "https://stackoverflow.com/users/959929/jstl"}, "reply_to_user": {"reputation": 1, "user_id": 9834575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e6103f16ff27ce8977c8e430b18060?s=128&d=identicon&r=PG&f=1", "display_name": "callum learmonth", "link": "https://stackoverflow.com/users/9834575/callum-learmonth"}, "edited": false, "score": 0, "creation_date": 1536844961, "post_id": 52303518, "comment_id": 91576510, "body": "You&#39;re welcome. If you found this was useful, please consider <a href=\"https://stackoverflow.com/help/someone-answers\">accepting it</a> as the answer to your question."}], "tags": [], "owner": {"reputation": 798, "user_id": 959929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ahxUY.png?s=128&g=1", "display_name": "JSTL", "link": "https://stackoverflow.com/users/959929/jstl"}, "is_accepted": false, "score": 1, "last_activity_date": 1536786539, "creation_date": 1536786539, "answer_id": 52303518, "question_id": 52303314, "link": "https://stackoverflow.com/questions/52303314/loop-wont-exit-when-dict-is-empty/52303518#52303518", "title": "Loop won&#39;t exit when dict is empty", "body": "<p>You exit condition, <code>if glossary == {''}:</code>, will never be true, because you are comparing glossary, a <code>dict</code>, to a <a href=\"https://docs.python.org/3.7/library/stdtypes.html#set-types-set-frozenset\" rel=\"nofollow noreferrer\"><code>set</code></a> that contains a single empty string element.</p>\n\n<p>You can use a <code>dict</code> object directly in a condition, and it will evaluate to <code>False</code> if it is empty. You can also use <a href=\"https://docs.python.org/3.7/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops\" rel=\"nofollow noreferrer\"><code>break</code></a> in order to exit your loop immediately:</p>\n\n<pre><code>while True:\n    if not glossary:\n        break\n    user_input = input('Enter s to show a flashcard and q to quit: ')\n    if user_input == 'q':\n        break\n    elif user_input == 's':\n        show_flashcard()\n    else:\n        print('You need to enter either q or s.')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 10336173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f50c0d04b74de78a2984a374b20547a?s=128&d=identicon&r=PG&f=1", "display_name": "jjak_82", "link": "https://stackoverflow.com/users/10336173/jjak-82"}, "is_accepted": false, "score": 1, "last_activity_date": 1536851024, "last_edit_date": 1536851024, "creation_date": 1536787255, "answer_id": 52303642, "question_id": 52303314, "link": "https://stackoverflow.com/questions/52303314/loop-wont-exit-when-dict-is-empty/52303642#52303642", "title": "Loop won&#39;t exit when dict is empty", "body": "<p>It could be even leaner with:</p>\n\n<pre><code>while glossary:\n    user_input = ...\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9834575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e6103f16ff27ce8977c8e430b18060?s=128&d=identicon&r=PG&f=1", "display_name": "callum learmonth", "link": "https://stackoverflow.com/users/9834575/callum-learmonth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1536851024, "creation_date": 1536785543, "last_edit_date": 1536848181, "question_id": 52303314, "link": "https://stackoverflow.com/questions/52303314/loop-wont-exit-when-dict-is-empty", "title": "Loop won&#39;t exit when dict is empty", "body": "<p>Using Python 3:</p>\n\n<pre><code>def show_flashcard():    \n    \"\"\" Show the user a random key and ask them\n        to define it. Show the definition\n        when the user presses return. it then asks if user\n        knew definition or not if they do delets the word and\n        then asks if they want to continue or quit.\n    \"\"\"\n    random_key = choice(list(glossary))\n    print('Define: ', random_key)\n    input('Press return to see the definition')\n    print(glossary[random_key])\n    import time\n    time.sleep(1) # delay for 1 seconds\n    print('Did you know the answer')\n    user_input = input('y or n: ')\n    if user_input == 'n':\n        print( 'Do not give  up you can only learn by practice')\n        time.sleep(1) # delay for 1 seconds\n        user_input = input('Enter s to show a flashcard and q to quit: ')\n    if user_input == 'y':\n        print( 'Congratulations , the word wil now be removed from the dictionary')\n    del (glossary[random_key])\n\n# Set up the glossary\nglossary = {'1: word1':'definition1',\n            '2: word2':'definition2',\n            '3: word3':'definition3'}\n\n# The interactive loop\nexit = False\nwhile not exit:\n    if glossary == {''}:\n        exit = True   \n    user_input = input('Enter s to show a flashcard and q to quit: ')\n    if user_input == 'q':\n        exit = True\n    elif user_input == 's':\n        show_flashcard()\n    else:\n        print('You need to enter either q or s.')\n</code></pre>\n\n<p>I can't seem to be able to get this loop to quit automatically when <em>glossary</em> is empty. I've tried loads of things, from <code>if glossary = 0 then exit is true</code>, but I don't seem to be able to get anywhere. It's driving me mad.</p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 3639, "user_id": 5998425, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/6CkM9.jpg?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/5998425/edward"}, "edited": false, "score": 0, "creation_date": 1536785568, "post_id": 52303258, "comment_id": 91554292, "body": "may you create a toy example and expected output?"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1536788036, "post_id": 52303258, "comment_id": 91555193, "body": ".. What&#39;s <code>pm</code>?"}, {"owner": {"reputation": 181, "user_id": 8620445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5817880820c853cfa7641e018a962074?s=128&d=identicon&r=PG", "display_name": "Veridian Dynamics", "link": "https://stackoverflow.com/users/8620445/veridian-dynamics"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1536793972, "post_id": 52303258, "comment_id": 91556732, "body": "@Divakar uuups, I overwrite it when I pasted the code"}, {"owner": {"reputation": 10409, "user_id": 483620, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/efc681121bec8b6c5f9b5bc0714396a0?s=128&d=identicon&r=PG", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/483620/benjamin"}, "edited": false, "score": 0, "creation_date": 1536798938, "post_id": 52303258, "comment_id": 91557714, "body": "What are you doing with the indices afterwards? There might be a better solution than collecting all the indices for such a simple 3x3x3 neighbourhood."}], "answers": [{"tags": [], "owner": {"reputation": 2116, "user_id": 7247547, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9edc71b8ad82b60fb9955e8adcede03a?s=128&d=identicon&r=PG&f=1", "display_name": "kevinkayaks", "link": "https://stackoverflow.com/users/7247547/kevinkayaks"}, "is_accepted": false, "score": 0, "last_activity_date": 1536800700, "last_edit_date": 1536800700, "creation_date": 1536799855, "answer_id": 52305203, "question_id": 52303258, "link": "https://stackoverflow.com/questions/52303258/fast-implementation-for-neighbourhoods-in-numpy-tensor/52305203#52305203", "title": "Fast implementation for neighbourhoods in numpy tensor", "body": "<p>This should do it. You just generate the <code>vertices</code> array once and let broadcasting do the rest. <code>vertices</code> gives all 27 possibilities required to add to an index and get all its neighbors. </p>\n\n<pre><code>ijk = np.array([2, 3, 4]) # an example point \ndim = (10, 10, 10) # dimensions \n\npts = np.stack(([-1,0,1],)*3,0)\nvertices = (np.array(np.meshgrid(*pts)).T).reshape(3**3,3) # a 27x3 array\n# the vertices are the points to add to ijk to get all neighbors \n\nn = (vertices + ijk).T # neighbors \nn = n.T[((n[0]&gt;=0)&amp;(n[0]&lt;dim[0])\n         &amp;(n[1]&gt;=0)&amp;(n[1]&lt;dim[1])\n          &amp;(n[2]&gt;=0)&amp;(n[2]&lt;dim[2]))] # out of bounds elements filtered\n</code></pre>\n\n<p>This returns </p>\n\n<pre><code>&gt;&gt;&gt; n\narray([[1, 2, 3],\n       [1, 3, 3],\n       [1, 4, 3],\n       [2, 2, 3],\n       [2, 3, 3],\n       [2, 4, 3],\n       [3, 2, 3],\n       [3, 3, 3],\n       [3, 4, 3],\n       [1, 2, 4],\n       [1, 3, 4],\n       [1, 4, 4],\n       [2, 2, 4],\n       [2, 3, 4],\n       [2, 4, 4],\n       [3, 2, 4],\n       [3, 3, 4],\n       [3, 4, 4],\n       [1, 2, 5],\n       [1, 3, 5],\n       [1, 4, 5],\n       [2, 2, 5],\n       [2, 3, 5],\n       [2, 4, 5],\n       [3, 2, 5],\n       [3, 3, 5],\n       [3, 4, 5]])\n</code></pre>\n\n<p>You can force this into your example output with </p>\n\n<pre><code>sorted([int(''.join(x)) for x in n.astype('str')])\n</code></pre>\n\n<p>Which returns </p>\n\n<pre><code> [123,\n 124,\n 125,\n 133,\n 134,\n 135,\n 143,\n 144,\n 145,\n 223,\n 224,\n 225,\n 233,\n 234,\n 235,\n 243,\n 244,\n 245,\n 323,\n 324,\n 325,\n 333,\n 334,\n 335,\n 343,\n 344,\n 345]\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 8620445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5817880820c853cfa7641e018a962074?s=128&d=identicon&r=PG", "display_name": "Veridian Dynamics", "link": "https://stackoverflow.com/users/8620445/veridian-dynamics"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536800700, "creation_date": 1536785284, "last_edit_date": 1536798467, "question_id": 52303258, "link": "https://stackoverflow.com/questions/52303258/fast-implementation-for-neighbourhoods-in-numpy-tensor", "title": "Fast implementation for neighbourhoods in numpy tensor", "body": "<p>I have a 3-tensor <code>A</code> in numpy and an index <code>(i,j,k)</code>. I need to put in a single (possibly numpy) array <code>arr</code> the linear index of the 'neighborhoods' of <code>(i,j,k)</code>, (i.e., the elements <code>(i+i1, j+j1, k+k1)</code>, where <code>i1, j1, k2 = -1, 0, 1</code>). I need to do this for every index <code>(i,j,k)</code> of <code>A</code>, so my question is, there is a short and fast way to do this?</p>\n\n<p>A toy example:</p>\n\n<pre><code>n = 10\ndim = (10, 10, 10)\ni, j, k = (2, 3, 4)\nres = []\npm = [-1, 0, 1]\nfor i1 in range(3):\n    for j1 in range(3):\n        for k1 in range(3):\n            # ravel_multi_index transforms a multi-index (i,j,k) to the corresponding linear index of a tensor of shape \"dim\"\n            res.append(np.ravel_multi_index((i + pm[i1], j + pm[j1], k + pm[k1]), dim))\n#print...\n[123, 124, 125, 133, 134, 135, 143, 144, 145, 223, 224, 225, 233, 234, 235, 243, 244, 245, 323, 324, 325, 333, 334, 335, 343, 344, 345]\n</code></pre>\n\n<p>There are 27 neighborhoods.</p>\n\n<p>The boundary index has fewer neighborhoods: for example, the coordinate (0, 0, 0) has 8 neighborhoods.</p>\n\n<p>As solution, I was thinking in some \"traslation\" of the neighborhoods to one fixed, but this rapidly become cumbersome.</p>\n"}, {"tags": ["python", "pytest"], "comments": [{"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 0, "creation_date": 1536869889, "post_id": 52303249, "comment_id": 91589935, "body": "In addition to the answer: when in need of overriding values from <code>pytest.ini</code>, you can use <code>-o</code> arg, for example <code>pytest -o xfail_strict=1 -o junit_logging=no</code> etc."}], "answers": [{"tags": [], "owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "is_accepted": true, "score": 6, "last_activity_date": 1536840557, "creation_date": 1536840557, "answer_id": 52313467, "question_id": 52303249, "link": "https://stackoverflow.com/questions/52303249/force-pytest-main-to-use-a-different-pytest-ini/52313467#52313467", "title": "force pytest.main() to use a different pytest.ini", "body": "<pre><code>$ pytest --help | grep -F config\n  -c file               load configuration from `file` instead of trying to\n                        locate one of the implicit configuration files.\n</code></pre>\n\n<p>That is,</p>\n\n<pre><code>pytest.main(['-c', 'pytest-alt.ini'])\n</code></pre>\n"}], "owner": {"reputation": 691, "user_id": 2543982, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5679224a8a4ec76343fa43507e429d4a?s=128&d=identicon&r=PG", "display_name": "Lombax", "link": "https://stackoverflow.com/users/2543982/lombax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 52313467, "answer_count": 1, "score": 3, "last_activity_date": 1536840557, "creation_date": 1536785237, "question_id": 52303249, "link": "https://stackoverflow.com/questions/52303249/force-pytest-main-to-use-a-different-pytest-ini", "title": "force pytest.main() to use a different pytest.ini", "body": "<p>Is there a way to point pytest at a differnt pytest.ini file? </p>\n\n<p>The application I am working on has one pytest.ini file that is used for running unittests when it spins up, and I do not want to modify that file. </p>\n\n<p>I do however want to point pytest at a different file when running my automation tests via pytest.main()</p>\n\n<pre><code>pytest.main(['-p', 'no:django', '-v', '--json-report', '-m', test_marker])\n</code></pre>\n\n<p>Is there a way to tell pytest to use a pytest.ini file from another location?</p>\n"}, {"tags": ["python", "function", "class", "methods"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1536785265, "post_id": 52303232, "comment_id": 91554152, "body": "your arguments are <code>**kwargs</code>, you can pass anything."}, {"owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 1, "creation_date": 1536785472, "post_id": 52303232, "comment_id": 91554254, "body": "You have to pass the instance of  <code>ABC</code> to the instance of <code>XYZ</code>."}, {"owner": {"reputation": 61, "user_id": 10112543, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xwcgLe9Y9HU/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qwwdytv2wS2U4g2r_UByP83hjWUw/mo/photo.jpg?sz=128", "display_name": "AdamC", "link": "https://stackoverflow.com/users/10112543/adamc"}, "reply_to_user": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 0, "creation_date": 1536785776, "post_id": 52303232, "comment_id": 91554379, "body": "@Daniel what is the syntax for this? I&#39;m very new to Python."}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 1, "creation_date": 1536787984, "post_id": 52303232, "comment_id": 91555177, "body": "If you cannot change anything, then you cannot solve your problem. <i>Other answers</i> seem to have very good suggestions. A variable is declared within a function if it is not needed outside. Otherwise it belongs elsewhere."}], "answers": [{"comments": [{"owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 1, "creation_date": 1536785419, "post_id": 52303259, "comment_id": 91554220, "body": "<code>start_time</code> is a independent variable each instance."}], "tags": [], "owner": {"reputation": 161307, "user_id": 67606, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e2173a4eb840daea86793815e3b1a63a?s=128&d=identicon&r=PG", "display_name": "Pablo Santa Cruz", "link": "https://stackoverflow.com/users/67606/pablo-santa-cruz"}, "is_accepted": false, "score": -2, "last_activity_date": 1536785285, "creation_date": 1536785285, "answer_id": 52303259, "question_id": 52303232, "link": "https://stackoverflow.com/questions/52303232/python-passing-variables-across-methods-and-classes/52303259#52303259", "title": "python - passing variables across methods and classes", "body": "<p>You can make <code>start_time</code> a class attribute in <code>Parent</code>.</p>\n\n<pre><code>class Parent(object):\n    def __init__(self):\n        self.start_time = None\n\nclass ABC(Parent):\n    def func1(self, **kwargs)\n        self.start_time = time.time()\n        ...\n        ...\n    return stuff\n\nclass XYZ(Parent):\n    def func2(self, **kwargs)\n        ...\n        ...\n        a = time.time() - self.start_time           \n    return other_stuff\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "edited": false, "score": 0, "creation_date": 1536786472, "post_id": 52303392, "comment_id": 91554599, "body": "Best to avoid polluting the global namespace with <code>global</code>s when you could simply pass around class instances and access <code>start_time</code> via <code>ABC.start_time</code>"}, {"owner": {"reputation": 1084, "user_id": 6078026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2828ee6ae5d2f5fd4c9a3b4a89abfc43?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin K.", "link": "https://stackoverflow.com/users/6078026/kevin-k"}, "reply_to_user": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "edited": false, "score": 0, "creation_date": 1536786602, "post_id": 52303392, "comment_id": 91554652, "body": "I agree, but the original question stated that there could be no arguments passed."}, {"owner": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "edited": false, "score": 0, "creation_date": 1536786788, "post_id": 52303392, "comment_id": 91554718, "body": "But no arguments need to be passed? Instance attributes will do."}, {"owner": {"reputation": 1084, "user_id": 6078026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2828ee6ae5d2f5fd4c9a3b4a89abfc43?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin K.", "link": "https://stackoverflow.com/users/6078026/kevin-k"}, "reply_to_user": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "edited": false, "score": 0, "creation_date": 1536787015, "post_id": 52303392, "comment_id": 91554809, "body": "If you want to use instances of each class independently, you will need to pass arguments. By their statement: &quot;My start_time needs to be defined exactly here and nowhere else, and I cannot change my arguments for either func1 or func2.&quot; It sounds like that is what they are looking for"}, {"owner": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "edited": false, "score": 0, "creation_date": 1536787280, "post_id": 52303392, "comment_id": 91554914, "body": "Would you say I&#39;m passing arguments in my answer? (none of the methods take any arguments except <code>self</code>)"}, {"owner": {"reputation": 1084, "user_id": 6078026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2828ee6ae5d2f5fd4c9a3b4a89abfc43?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin K.", "link": "https://stackoverflow.com/users/6078026/kevin-k"}, "reply_to_user": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "edited": false, "score": 0, "creation_date": 1536787638, "post_id": 52303392, "comment_id": 91555052, "body": "No, but you are assuming that class <code>XYZ</code> is dependent on <code>ABC</code> and <code>ABC</code> is not dependent on <code>XYZ</code>. From the original question, there is no way to tell if that is possible in his code."}, {"owner": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "edited": false, "score": 0, "creation_date": 1536788096, "post_id": 52303392, "comment_id": 91555222, "body": "The OP wants to <i>&quot;(...) use the variable start_time defined in func1 of class ABC inside of func2 within class XYZ&quot;</i> I understand that as a &quot;one-way&quot; dependency. If you need to pass values in both directions, it might make sense to create a third class that instantiates both <code>ABC</code> and <code>XYZ</code> instead."}], "tags": [], "owner": {"reputation": 1084, "user_id": 6078026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2828ee6ae5d2f5fd4c9a3b4a89abfc43?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin K.", "link": "https://stackoverflow.com/users/6078026/kevin-k"}, "is_accepted": false, "score": -1, "last_activity_date": 1536785905, "creation_date": 1536785905, "answer_id": 52303392, "question_id": 52303232, "link": "https://stackoverflow.com/questions/52303232/python-passing-variables-across-methods-and-classes/52303392#52303392", "title": "python - passing variables across methods and classes", "body": "<p>It's difficult to solve your problem in a method that isn't going to be messy. Essentially, you will need to use a variable outside both of your functions. I think your best option is to use python's <code>global</code> keyword:</p>\n\n<pre><code>class ABC(Parent):\n    def func1(self, **kwargs):\n        global start_time\n        start_time = time.time()\n\n        return stuff\n\nclass XYZ(Parent):\n    def func2(self, **kwargs):\n        global start_time\n        a = time.time() - start_time\n\n        return other_stuff\n</code></pre>\n\n<p>The use of <code>global</code> here allows you to avoid defining your variable outside of your function.</p>\n"}, {"tags": [], "owner": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "is_accepted": false, "score": -1, "last_activity_date": 1536787723, "last_edit_date": 1536787723, "creation_date": 1536786699, "answer_id": 52303544, "question_id": 52303232, "link": "https://stackoverflow.com/questions/52303232/python-passing-variables-across-methods-and-classes/52303544#52303544", "title": "python - passing variables across methods and classes", "body": "<p>There are several ways of doing it. Here's one that avoids <code>global</code> by making <code>start_time</code> an instance variable/attribute of <code>ABC</code> and instantiating <code>ABC</code> within <code>XYZ</code>. I think this is also what the user @Daniel was hinting at in the comment <em>\"You have to pass the instance of ABC to the instance of XYZ\"</em>.</p>\n\n<pre><code>import time\n\n\nclass Parent:\n    pass\n\n\nclass ABC(Parent):\n    def __init__(self):\n        self.start_time = None\n\n    def func1(self):\n        self.start_time = time.time()\n\n\nclass XYZ(Parent):\n    def __init__(self):\n        self.abc = ABC()\n\n    def func2(self):\n        self.abc.func1()\n        return time.time() - self.abc.start_time           \n\n\nxyz = XYZ()\nprint(xyz.func2())\n</code></pre>\n\n<p>Python3.5 output:</p>\n\n<pre><code>&gt;&gt;&gt; xyz = XYZ()\n&gt;&gt;&gt; print(xyz.func2())\n9.5367431640625e-07\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 10112543, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xwcgLe9Y9HU/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qwwdytv2wS2U4g2r_UByP83hjWUw/mo/photo.jpg?sz=128", "display_name": "AdamC", "link": "https://stackoverflow.com/users/10112543/adamc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1319, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1536787723, "creation_date": 1536785142, "last_edit_date": 1536785260, "question_id": 52303232, "link": "https://stackoverflow.com/questions/52303232/python-passing-variables-across-methods-and-classes", "title": "python - passing variables across methods and classes", "body": "<p>I have some code that generically resembles the following:</p>\n\n<pre><code>class ABC(Parent):\n    def func1(self, **kwargs)\n        start_time = time.time()\n        ...\n        ...\n    return stuff\n\nclass XYZ(Parent):\n    def func2(self, **kwargs)\n        ...\n        ...\n        a = time.time() - start_time           \n    return other_stuff\n</code></pre>\n\n<p>I'm looking for the absolute simplest way to use the variable <code>start_time</code> defined in <code>func1</code> of class ABC inside of <code>func2</code> within class XYZ.</p>\n\n<p>Note: This code is very generic and the actual code I'm working with is much, much more complicated. Other answers I've found have mentioned defining <code>start_time</code> outside of either class and then passing them in, OR they involve changing arguments. I cannot do this. My <code>start_time</code> needs to be defined exactly here and nowhere else, and I cannot change my arguments for either <code>func1</code> or <code>func2</code>. </p>\n\n<p>Thanks for any assistance. </p>\n"}, {"tags": ["python", "parsing", "yaml", "ordereddict"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1536789160, "post_id": 52303200, "comment_id": 91555568, "body": "What is a (abstract) pattern which requires to return exactly those values in the example? And how this pattern involves needing to parse nested OrderedDict objects?"}], "answers": [{"tags": [], "owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "is_accepted": false, "score": 0, "last_activity_date": 1536814165, "creation_date": 1536814165, "answer_id": 52306819, "question_id": 52303200, "link": "https://stackoverflow.com/questions/52303200/python-parsing-nested-ordereddicts/52306819#52306819", "title": "Python parsing nested ordereddicts", "body": "<p>At first I thought your input is Python, but it is not:</p>\n\n<ul>\n<li>it has Unicode left and right quotation marks (U+2018/U+2019)</li>\n<li>it is has unbalanced square brackets</li>\n<li>would at least need a comma before <code>('pin', False)</code> </li>\n</ul>\n\n<p>So given the tags on your question, this has to be a YAML document,\nwhich means it has a a single multi-line plain scalar as content. And\nwhen you load that using a YAML parser, you will get the whole scalar\nloaded as a single string without newlines:</p>\n\n<pre><code>OrderedDict ([ ('activateable', False), ('Thisfield', [OrderedDict ([ ('autoNumber', False),  ('name', \u2018col_1\u2019),  (\u2018amount\u2019, \u201810\u2019)]), [OrderedDict ([ ('autoNumber', False),  ('name', \u2018col_2\u2019),  (\u2018amount\u2019, \u201810\u2019)]) ), ('Thisfield2', [OrderedDict ([ ('autoNumber', False),  ('name', \u2018col_1\u2019),  (\u2018amount\u2019, \u201810\u2019)]), [OrderedDict ([ ('autoNumber', False),  ('name', \u2018col_2\u2019),  (\u2018amount\u2019, \u201810\u2019)]) ), ('Thisfield3', [OrderedDict ([ ('autoNumber', False),  ('name', \u2018col_1\u2019),  (\u2018amount\u2019, \u201810\u2019)]), [OrderedDict ([ ('autoNumber', False),  ('name', \u2018col_2\u2019),  (\u2018amount\u2019, \u201810\u2019)]) ) ('pin', False) ])\n</code></pre>\n\n<p>which is not as easy to parse as the original input file.</p>\n\n<p>So you probalby have an easier time just \"parsing\" the input lines:</p>\n\n<pre><code>def get_thisfields(fp):\n    vals = []\n    for line in fp:\n        line = line.strip()\n        if not line.startswith(u\"('This\"):\n            continue\n        vals.append(line.split(\"'\")[1])\n    return ', '.join(vals)\n\nprint(get_thisfields(open('input.yaml')))\n</code></pre>\n\n<p>given your input \"YAML\" file, <code>get_thisfields()</code> returns:</p>\n\n<pre><code>Thisfield, Thisfield2, Thisfield3\n</code></pre>\n\n<p>as you requested.</p>\n"}], "owner": {"reputation": 3, "user_id": 9707801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4959083a3fb44e26a8d902b00c74b892?s=128&d=identicon&r=PG&f=1", "display_name": "Danielle ", "link": "https://stackoverflow.com/users/9707801/danielle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1536814188, "creation_date": 1536784978, "last_edit_date": 1536814188, "question_id": 52303200, "link": "https://stackoverflow.com/questions/52303200/python-parsing-nested-ordereddicts", "title": "Python parsing nested ordereddicts", "body": "<p>What if the file was like this:</p>\n\n<pre><code>OrderedDict\n([\n ('activateable', False),\n ('Thisfield', \n    [OrderedDict ([ ('autoNumber', False),  ('name', \u2018col_1\u2019),  (\u2018amount\u2019, \u201810\u2019)]),\n    [OrderedDict ([ ('autoNumber', False),  ('name', \u2018col_2\u2019),  (\u2018amount\u2019, \u201810\u2019)])\n ),\n('Thisfield2', \n    [OrderedDict ([ ('autoNumber', False),  ('name', \u2018col_1\u2019),  (\u2018amount\u2019, \u201810\u2019)]),\n    [OrderedDict ([ ('autoNumber', False),  ('name', \u2018col_2\u2019),  (\u2018amount\u2019, \u201810\u2019)])\n ),\n('Thisfield3', \n    [OrderedDict ([ ('autoNumber', False),  ('name', \u2018col_1\u2019),  (\u2018amount\u2019, \u201810\u2019)]),\n    [OrderedDict ([ ('autoNumber', False),  ('name', \u2018col_2\u2019),  (\u2018amount\u2019, \u201810\u2019)])\n )\n ('pin', False)\n])\n</code></pre>\n\n<p>...and I only wanted to return 'Thisfield1, Thisfield2, Thisfield3'?</p>\n"}, {"tags": ["python", "jupyter-notebook", "jupyterhub"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 10177763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd0b271265b1337fe7d10fe86549993?s=128&d=identicon&r=PG&f=1", "display_name": "user10177763", "link": "https://stackoverflow.com/users/10177763/user10177763"}, "is_accepted": false, "score": 0, "last_activity_date": 1537215376, "creation_date": 1537215376, "answer_id": 52375081, "question_id": 52303178, "link": "https://stackoverflow.com/questions/52303178/how-to-run-isolated-jupyterhub-notebooks/52375081#52375081", "title": "How to run isolated jupyterhub notebooks", "body": "<p>If you set up jupyterhub on a linux server then file permissions will take care of this. My setup using SudoSpawner and PAM authentication on a personal CENTOS 7 server:</p>\n\n<ol>\n<li>Install anaconda in /opt/ with svc account as owner</li>\n<li>Have service account create /opt/notebooks/{userid} for each userid with permissions 770 (full permission for owner and group, none for other)</li>\n<li>Have jupyternotebooks spawn in /opt/notebooks/{userid} depending on userid</li>\n<li>For each new notebook, set default permissions as 740 (full permission for owner, read only for group, none for other).</li>\n<li>Only owner can save write and save his own notebooks. Others can see, edit, and execute code in another person's notebook, but cannot save changes. In theory you could create a notebook in someone else's folder but this would be heavily discouraged (not explicitly forbidden though).</li>\n</ol>\n"}], "owner": {"reputation": 21, "user_id": 10177763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd0b271265b1337fe7d10fe86549993?s=128&d=identicon&r=PG&f=1", "display_name": "user10177763", "link": "https://stackoverflow.com/users/10177763/user10177763"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 214, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1537215376, "creation_date": 1536784909, "question_id": 52303178, "link": "https://stackoverflow.com/questions/52303178/how-to-run-isolated-jupyterhub-notebooks", "title": "How to run isolated jupyterhub notebooks", "body": "<p>I'm running a jupyterhub using sudospawner on CentOS7 server. The purpose of jupyterhub is twofold</p>\n\n<ol>\n<li>Ensure everyone has the exact same conda packages when we run production code</li>\n<li><strong>Allow people to use multiple instances of the same notebook (where we keep all our visualization tools) and not edit each other's local versions.</strong></li>\n</ol>\n\n<p>Initially when I was installing jupyterhub, someone told me that different users would be able to run isolated versions of the same notebook. In other words, if person A were to change a parameter in a master notebook from \"foo\" to \"bar\" this wouldn't cause B's single-user notebook to change, since each person is spawning a separate server. </p>\n\n<p>However, now that it's actually installed, I find out that this is not the case. As long as I have the right permissions, I can change anyone's notebook, and this change is reflected across anyone who has the notebook open. This defeats point #2. I want persons A, B, C to all use the same notebook N without changes being reflected on each person's local machine.</p>\n\n<p>Now I have thought of a solution where we keep a git repo of the master notebook and run some code to automatically pull the repo into each person's local dir upon logging in. However, is there a simpler way or more accepted way to accomplish the same thing with just jupyterhub configuration commands?</p>\n"}, {"tags": ["python", "python-3.x", "user-interface", "tkinter"], "comments": [{"owner": {"reputation": 11277, "user_id": 3657941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/304d8d4cceca5f9ce2383ff97b53e36b?s=128&d=identicon&r=PG&f=1", "display_name": "David Cullen", "link": "https://stackoverflow.com/users/3657941/david-cullen"}, "edited": false, "score": 0, "creation_date": 1536785042, "post_id": 52303146, "comment_id": 91554062, "body": "<a href=\"https://docs.python.org/3/library/tk.html\" rel=\"nofollow noreferrer\">docs.python.org/3/library/tk.html</a>"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1536785171, "post_id": 52303146, "comment_id": 91554122, "body": "there&#39;s virtually no difference with tkinter in python 2 and python 3."}, {"owner": {"reputation": 123, "user_id": 9545640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55FzV.png?s=128&g=1", "display_name": "NeverEndingCycle", "link": "https://stackoverflow.com/users/9545640/neverendingcycle"}, "edited": false, "score": 0, "creation_date": 1536785301, "post_id": 52303146, "comment_id": 91554171, "body": "That&#39;s not really the point. I would much rather create the program myself and the other stuff I have seen posted I get errors when I copy so no difference or not doesn&#39;t change my needing help."}, {"owner": {"reputation": 1096, "user_id": 5150303, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5IihF.jpg?s=128&g=1", "display_name": "Daniel R. Livingston", "link": "https://stackoverflow.com/users/5150303/daniel-r-livingston"}, "edited": false, "score": 1, "creation_date": 1536785344, "post_id": 52303146, "comment_id": 91554190, "body": "Personally, I like wxPython much more than Tkinter. Namely, it has support for native OS UI elements. <a href=\"https://wxpython.org\" rel=\"nofollow noreferrer\">wxpython.org</a>"}, {"owner": {"reputation": 123, "user_id": 9545640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55FzV.png?s=128&g=1", "display_name": "NeverEndingCycle", "link": "https://stackoverflow.com/users/9545640/neverendingcycle"}, "edited": false, "score": 1, "creation_date": 1536785406, "post_id": 52303146, "comment_id": 91554217, "body": "Thank you, I will look into it."}, {"owner": {"reputation": 1096, "user_id": 5150303, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5IihF.jpg?s=128&g=1", "display_name": "Daniel R. Livingston", "link": "https://stackoverflow.com/users/5150303/daniel-r-livingston"}, "edited": false, "score": 1, "creation_date": 1536785430, "post_id": 52303146, "comment_id": 91554224, "body": "I would also like to point out that <code>print(&#39;&#39;); print(&quot;Download Complete.&quot;); print(&#39;&#39;); print(&#39;&#39;)</code> is equivalent to: <code>print(&quot;\\nDownload Complete.\\n\\n&quot;)</code>, which is much cleaner code. :)"}, {"owner": {"reputation": 123, "user_id": 9545640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55FzV.png?s=128&g=1", "display_name": "NeverEndingCycle", "link": "https://stackoverflow.com/users/9545640/neverendingcycle"}, "edited": false, "score": 0, "creation_date": 1536786010, "post_id": 52303146, "comment_id": 91554443, "body": "Yeah, literally as I posted it I realized that I could of done that. But I am done with that program anyway so it doesn&#39;t really matter."}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 9545640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55FzV.png?s=128&g=1", "display_name": "NeverEndingCycle", "link": "https://stackoverflow.com/users/9545640/neverendingcycle"}, "edited": false, "score": 1, "creation_date": 1536785612, "post_id": 52303240, "comment_id": 91554313, "body": "If you looked at my console code you can see I already have used tqdm and from what I can tell there is no way to use this in a GUI application. If I am wrong please explain how to do so."}], "tags": [], "owner": {"reputation": 157, "user_id": 3555332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zozYS.jpg?s=128&g=1", "display_name": "Snow24", "link": "https://stackoverflow.com/users/3555332/snow24"}, "is_accepted": false, "score": 0, "last_activity_date": 1536792009, "last_edit_date": 1536792009, "creation_date": 1536785183, "answer_id": 52303240, "question_id": 52303146, "link": "https://stackoverflow.com/questions/52303146/making-a-gui-file-downloader-with-python-3-and-tkinter/52303240#52303240", "title": "Making a GUI File Downloader with Python 3 and Tkinter", "body": "<p>The documentation for Tkinter with Python3:</p>\n\n<p><a href=\"https://docs.python.org/3/library/tk.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/tk.html</a>  </p>\n\n<p>This answer might help you out:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/7310511/how-to-create-downloading-progress-bar-in-ttk\">How to create downloading progress bar in ttk?</a> </p>\n\n<p>documentation: <a href=\"https://tkdocs.com/tutorial/morewidgets.html#progressbar\" rel=\"nofollow noreferrer\">https://tkdocs.com/tutorial/morewidgets.html#progressbar</a> </p>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 9545640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55FzV.png?s=128&g=1", "display_name": "NeverEndingCycle", "link": "https://stackoverflow.com/users/9545640/neverendingcycle"}, "edited": false, "score": 0, "creation_date": 1536812604, "post_id": 52306479, "comment_id": 91560411, "body": "I put this as a solution because it would most certainly work and I will be using it in the future. Sadly, due to this answer being so late, I have already written 100+ lines of codes using wxpython, which someone else had previously recommended. Thanks anyway!"}, {"owner": {"reputation": 3307, "user_id": 8743099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MCygy.png?s=128&g=1", "display_name": "Mike from PSG", "link": "https://stackoverflow.com/users/8743099/mike-from-psg"}, "reply_to_user": {"reputation": 123, "user_id": 9545640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55FzV.png?s=128&g=1", "display_name": "NeverEndingCycle", "link": "https://stackoverflow.com/users/9545640/neverendingcycle"}, "edited": false, "score": 1, "creation_date": 1536856128, "post_id": 52306479, "comment_id": 91583329, "body": "I&#39;ll bet you could rewrite your 100 lines of WxPython code within an hour in 40 lines of PySimpleGUI code :-)  Anyway, thanks for the vote"}], "tags": [], "owner": {"reputation": 3307, "user_id": 8743099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MCygy.png?s=128&g=1", "display_name": "Mike from PSG", "link": "https://stackoverflow.com/users/8743099/mike-from-psg"}, "is_accepted": true, "score": 2, "last_activity_date": 1536811396, "creation_date": 1536811396, "answer_id": 52306479, "question_id": 52303146, "link": "https://stackoverflow.com/questions/52303146/making-a-gui-file-downloader-with-python-3-and-tkinter/52306479#52306479", "title": "Making a GUI File Downloader with Python 3 and Tkinter", "body": "<p>Take a look at <a href=\"https://pysimplegui.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">PySimpleGUI</a>. You can build a layout with a download button, an output window and a progress bar easily.  Stop by the GitHub and post an issue if you run into trouble.</p>\n"}], "owner": {"reputation": 123, "user_id": 9545640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55FzV.png?s=128&g=1", "display_name": "NeverEndingCycle", "link": "https://stackoverflow.com/users/9545640/neverendingcycle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2793, "favorite_count": 1, "accepted_answer_id": 52306479, "answer_count": 2, "score": 0, "last_activity_date": 1536811396, "creation_date": 1536784790, "question_id": 52303146, "link": "https://stackoverflow.com/questions/52303146/making-a-gui-file-downloader-with-python-3-and-tkinter", "title": "Making a GUI File Downloader with Python 3 and Tkinter", "body": "<p>(I am using python 3.6.6 if that matters to anyone)</p>\n\n<p>I am making a GUI installer for a game that is currently in private alpha and is constantly updating. </p>\n\n<p>I already made a console version:</p>\n\n<pre><code>from tqdm import tqdm\nimport requests, os, sys, zipfile, shutil, subprocess\n\nchunk_size = 1024\nurl = \"{LINK TO FILE YOU WANT TO DOWNLOAD}\"\nr = requests.get(url, stream = True)\ntotal_size = int(r.headers['content-length'])\n\n\nprint(\"Are you sure you want to download the newest version of RFMP?\")\nprint(\"y/n\", end=': ')\n\nanswer = input()\n\nwhile True:\n    if answer == 'y':\n        if os.path.exists(\"RFMB6_WINDOWS\"):\n            print('')\n            print('')\n            print('Removing old RFMP files...')\n            subprocess.check_call(('attrib -R ' + 'RFMB6_WINDOWS' + '\\\\* /S').split())\n            shutil.rmtree('RFMB6_WINDOWS')\n            print('')\n            print('Removed old files.')\n            break\n        else:\n            break\n    elif answer == 'n':\n         sys.exit()\n\n    else:\n         print(\"That is not a valid answer, please answer with y/n.\")\n         answer = input()\n\n\nprint('')\nprint('')\nprint('Downloading:')\nwith open('RFMB6_WINDOWS.zip', 'wb') as f:\n    for data in tqdm(iterable = r.iter_content(chunk_size = chunk_size), total = total_size/chunk_size, unit = 'KB'):\n             f.write(data)\nprint('')\nprint(\"Download Complete.\")\nprint('')\nprint('')\n\nprint(\"Would you like to extract it?\")\nprint(\"y/n\", end=': ')\nanswer2 = input()\n\nwhile True:\n    if answer2 == 'y':\n            print('')\n            print('')\n            print('Extracting...')\n            zip_ref = zipfile.ZipFile(\"RFMB6_WINDOWS.zip\", 'r')\n            zip_ref.extractall(\"RFMB6_WINDOWS\")\n            zip_ref.close()\n            print('')\n            print('Extraction Complete')\n            print('')\n            print('')\n            print('Cleaning up...')\n            os.remove(\"RFMB6_WINDOWS.zip\")\n            print('')\n            print('Done! You have succesfully installed the newest version of the Ravenfield Multiplayer Private Alpha.')\n            break   \n    elif answer2 == 'n':\n            print('')\n            print('Done! You have succesfully downloaded the newest Zip of the Ravenfield Multiplayer Private Alpha.')\n            break\n    else:\n            print(\"That is not a valid answer, please answer with y/n.\")\n            answer = input()\n\n\nos.system('pause')\n</code></pre>\n\n<p>I will only be using this to download 1 specific link so ignore the url variable.</p>\n\n<p>I am trying to make a GUI that does the same thing when I click a button that says 'Download'. I want to make a progress bar, and a text box that tells you what is going on e.g. Downloading, extracting etc. I have no need for a directory option. I just need it to download where ever the file is located and delete the old file if it is still there.</p>\n\n<p>So here is my question: How do I learn how to do this? I have looked at tkinter tutorials and other questions but I only find stuff for python 2 or stuff that is to developed to modify and call my own work. What I am looking for are links and/or examples that can tell me how I go about creating something like this. Thanks in advance to anyone who helps me out.</p>\n\n<p>P.S. I am a noob when it comes to coding so whatever you explain please do it thoroughly.</p>\n\n<p>P.S.S. In order to run the console application you need to run it through terminal and add your own link in the 'url' variable.</p>\n"}, {"tags": ["python", "tensorflow", "keras", "generator", "rnn"], "answers": [{"comments": [{"owner": {"reputation": 437, "user_id": 1954235, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lvPhB.jpg?s=128&g=1", "display_name": "erensezener", "link": "https://stackoverflow.com/users/1954235/erensezener"}, "edited": false, "score": 1, "creation_date": 1544525409, "post_id": 52304848, "comment_id": 94298504, "body": "I find this hard to believe but I had the same problem and the solution is indeed what is suggested here."}], "tags": [], "owner": {"reputation": 1295, "user_id": 9328846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a3faa5d96d89e17c614d6e1fc3f5d67?s=128&d=identicon&r=PG&f=1", "display_name": "edn", "link": "https://stackoverflow.com/users/9328846/edn"}, "is_accepted": true, "score": 6, "last_activity_date": 1536796074, "creation_date": 1536796074, "answer_id": 52304848, "question_id": 52303130, "link": "https://stackoverflow.com/questions/52303130/keras-generator-with-tensorflow-dataset-api-indexerror-pop-from-empty-list/52304848#52304848", "title": "Keras Generator with Tensorflow Dataset API - IndexError: pop from empty list", "body": "<p>Solved. \nI want to explain the issue rather than deleting my post, so that it maybe can help other people as well..</p>\n\n<p>I will only give the example for the <code>evaluate_generator(...)</code> function.\nThis is how I was calling the function..</p>\n\n<pre><code>lstm_model.evaluate_generator(data_generator(TEST_FILE_PATHS, TEST_BATCH_SIZE), \n                             steps=(NR_TEST_EXAMPLES // TEST_BATCH_SIZE), \n                             verbose=1)\n</code></pre>\n\n<p>And I changed it as following:</p>\n\n<pre><code>test_data_generator = data_generator(TEST_FILE_PATHS, TEST_BATCH_SIZE)\nlstm_model.evaluate_generator(test_data_generator, \n                              steps=(NR_TEST_EXAMPLES // TEST_BATCH_SIZE), \n                              verbose=1)\n</code></pre>\n\n<p>And the problem is solved. I saw both ways of usage at different places, even if each information one finds on the net is not necessarily true. It is not clear for me either why it is solved when changing the code above. If anyone knows, I would be happy to hear the explanation.</p>\n"}], "owner": {"reputation": 1295, "user_id": 9328846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a3faa5d96d89e17c614d6e1fc3f5d67?s=128&d=identicon&r=PG&f=1", "display_name": "edn", "link": "https://stackoverflow.com/users/9328846/edn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1637, "favorite_count": 0, "accepted_answer_id": 52304848, "answer_count": 1, "score": 2, "last_activity_date": 1586893690, "creation_date": 1536784679, "question_id": 52303130, "link": "https://stackoverflow.com/questions/52303130/keras-generator-with-tensorflow-dataset-api-indexerror-pop-from-empty-list", "title": "Keras Generator with Tensorflow Dataset API - IndexError: pop from empty list", "body": "<p>I need to develop an RNN model and would like to use a data generator to feed the training/evaluation loops.</p>\n\n<p>To start with, I have this help function to use when fetching data from csv file.</p>\n\n<pre><code>RECORD_DEFAULTS_TRAIN = [[0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]]\n\ndef decode_csv(line):\n   parsed_line = tf.decode_csv(line, RECORD_DEFAULTS_TRAIN)\n   label =  parsed_line[-1]      # label is the last element of the list\n   del parsed_line[-1]           # delete the last element from the list\n   del parsed_line[0]            # even delete the first element bcz it is assumed NOT to be a feature\n   features = tf.stack(parsed_line)  # Stack features so that you can later vectorize forward prop., etc.\n   return features, label \n</code></pre>\n\n<p>And here is my data generator function:</p>\n\n<pre><code>def data_generator(file_path_list, batch_size):\n\n  filenames = tf.placeholder(tf.string, shape=[None])\n  dataset = tf.data.Dataset.from_tensor_slices(filenames)\n  dataset = dataset.flat_map(lambda filename: tf.data.TextLineDataset(filename).skip(1).map(decode_csv))\n  dataset = dataset.shuffle(buffer_size=1000)\n  dataset = dataset.batch(batch_size)\n  iterator = dataset.make_initializable_iterator()\n  next_element = iterator.get_next()\n\n  with tf.Session() as sess:\n      while True:\n          sess.run(iterator.initializer, feed_dict={filenames: file_path_list})\n          while True:            \n              try:\n                batch_data, batch_labels = sess.run(next_element)\n                # Dimension of the data needs to be: (batch_size, length_of_each_sequence, nr_inputs_in_each_timestep)\n                # Since the last batch in a epoch can have a different size,\n                # \"batch_data.shape[0]\" is used instead of batch_size\n                batch_data = np.reshape(batch_data, (batch_data.shape[0], SEQUENCE_LEN, 1))\n              except tf.errors.OutOfRangeError:\n                break\n              yield (batch_data, batch_labels)\n</code></pre>\n\n<p>Here is how I build and train my model:</p>\n\n<pre><code>lstm_model = Sequential()\nlstm_model.add(LSTM(5, input_shape=(SEQUENCE_LEN, 1), return_sequences=True))\nlstm_model.add(LSTM(5, input_shape=(SEQUENCE_LEN, 1), return_sequences=False))\nlstm_model.add(Dense(1))\n\nopt = tf.keras.optimizers.Adam(lr=0.001, decay=0.0009)\n\nlstm_model.compile(loss='mean_absolute_error', optimizer=opt, metrics=['accuracy'])\n\nlstm_model.fit_generator(data_generator(TRAIN_FILE_PATHS, TRAIN_BATCH_SIZE), #generator, \n                         steps_per_epoch=(NR_TRAIN_EXAMPLES // TRAIN_BATCH_SIZE),\n                         epochs=NR_EPOCHS, \n                         verbose=1,\n                         validation_data=data_generator(DEV_FILE_PATHS, TRAIN_BATCH_SIZE),\n                         validation_steps=(NR_DEV_EXAMPLES // DEV_BATCH_SIZE))\n</code></pre>\n\n<p>And here is how I evaluate the model on the test set:</p>\n\n<pre><code>lstm_model.evaluate_generator(data_generator(TEST_FILE_PATHS, TEST_BATCH_SIZE), \n                             steps=(NR_TEST_EXAMPLES // TEST_BATCH_SIZE), \n                             verbose=1)\n</code></pre>\n\n<p>Both after training and evaluating, I see the following error in the logs:</p>\n\n<pre><code>IndexError: pop from empty list\n</code></pre>\n\n<p>Here is the last part of the logs after the training ends:</p>\n\n<pre><code>Epoch 200/200\n2/2 [==============================] - 0s 28ms/step - loss: 0.0091 - acc: 0.0120 - val_loss: 0.0128 - val_acc: 0.0000e+00\nException ignored in: &lt;generator object data_generator at 0x7fa97d9e34c0&gt;\nTraceback (most recent call last):\n  File \"&lt;ipython-input-7-2ef5e6514df7&gt;\", line 33, in data_generator\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py\", line 1530, in __exit__\n    self._default_graph_context_manager.__exit__(exec_type, exec_value, exec_tb)\n  File \"/usr/lib/python3.6/contextlib.py\", line 99, in __exit__\n    self.gen.throw(type, value, traceback)\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/ops.py\", line 5025, in get_controller\n    context.context().context_switches.pop()\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/eager/context.py\", line 136, in pop\n    self.stack.pop()\nIndexError: pop from empty list\nException ignored in: &lt;generator object data_generator at 0x7fa97d9e3678&gt;\nTraceback (most recent call last):\n  File \"&lt;ipython-input-7-2ef5e6514df7&gt;\", line 33, in data_generator\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py\", line 1530, in __exit__\n    self._default_graph_context_manager.__exit__(exec_type, exec_value, exec_tb)\n  File \"/usr/lib/python3.6/contextlib.py\", line 99, in __exit__\n    self.gen.throw(type, value, traceback)\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/ops.py\", line 5025, in get_controller\n    context.context().context_switches.pop()\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/eager/context.py\", line 136, in pop\n    self.stack.pop()\nIndexError: pop from empty list\n\n&lt;tensorflow.python.keras.callbacks.History at 0x7fa97d8b4828&gt;\n</code></pre>\n\n<p>And here is what I see after running <code>evaluate_generator()</code>:</p>\n\n<pre><code>2/2 [==============================] - 0s 28ms/step\n\nException ignored in: &lt;generator object data_generator at 0x7fa97d732af0&gt;\nTraceback (most recent call last):\n  File \"&lt;ipython-input-7-2ef5e6514df7&gt;\", line 33, in data_generator\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py\", line 1530, in __exit__\n    self._default_graph_context_manager.__exit__(exec_type, exec_value, exec_tb)\n  File \"/usr/lib/python3.6/contextlib.py\", line 99, in __exit__\n    self.gen.throw(type, value, traceback)\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/ops.py\", line 5025, in get_controller\n    context.context().context_switches.pop()\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/eager/context.py\", line 136, in pop\n    self.stack.pop()\nIndexError: pop from empty list\n\n[0.008863004390150309, 0.0]\n</code></pre>\n\n<p>The thing I am confused about is why I see the error message <code>IndexError: pop from empty list</code> in every case above? Is it normal? Or am I doing something wrong?</p>\n"}, {"tags": ["python", "csv", "geocode"], "comments": [{"owner": {"reputation": 619, "user_id": 1680521, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pu7Cx.jpg?s=128&g=1", "display_name": "yogkm", "link": "https://stackoverflow.com/users/1680521/yogkm"}, "edited": false, "score": 1, "creation_date": 1536786577, "post_id": 52303121, "comment_id": 91554637, "body": "I see address field here <code>5028156,2700 W BETHANY HOME RD,Phoenix,AZ,</code> Can you please specify how many columns does this data has?"}, {"owner": {"reputation": 1, "user_id": 10355365, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-d1tf-_H5NWE/AAAAAAAAAAI/AAAAAAAAUPE/jLDoI7Vrayk/photo.jpg?sz=128", "display_name": "Michael Ingram", "link": "https://stackoverflow.com/users/10355365/michael-ingram"}, "reply_to_user": {"reputation": 619, "user_id": 1680521, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pu7Cx.jpg?s=128&g=1", "display_name": "yogkm", "link": "https://stackoverflow.com/users/1680521/yogkm"}, "edited": false, "score": 0, "creation_date": 1536795678, "post_id": 52303121, "comment_id": 91557104, "body": "There are a total of 5 columns but I only have data for 4."}, {"owner": {"reputation": 68674, "user_id": 41316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2c31ca37c09ab42763f690e0d1355d7?s=128&d=identicon&r=PG", "display_name": "bruno desthuilliers", "link": "https://stackoverflow.com/users/41316/bruno-desthuilliers"}, "edited": false, "score": 0, "creation_date": 1536923367, "post_id": 52303121, "comment_id": 91608108, "body": "please post a MCVE"}, {"owner": {"reputation": 1, "user_id": 10355365, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-d1tf-_H5NWE/AAAAAAAAAAI/AAAAAAAAUPE/jLDoI7Vrayk/photo.jpg?sz=128", "display_name": "Michael Ingram", "link": "https://stackoverflow.com/users/10355365/michael-ingram"}, "edited": false, "score": 0, "creation_date": 1536980746, "post_id": 52303121, "comment_id": 91629330, "body": "I fixed the problem I added a csvwriter.writerow(row+[]) to the processing which gave me the trailing comma. The API is very particular about the csv files they accept."}], "answers": [{"tags": [], "owner": {"reputation": 619, "user_id": 1680521, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pu7Cx.jpg?s=128&g=1", "display_name": "yogkm", "link": "https://stackoverflow.com/users/1680521/yogkm"}, "is_accepted": false, "score": 0, "last_activity_date": 1536921427, "creation_date": 1536921427, "answer_id": 52330249, "question_id": 52303121, "link": "https://stackoverflow.com/questions/52303121/csv-uploading-issue/52330249#52330249", "title": "CSV uploading issue", "body": "<p>As you can see there are 5 columns defined in the csv example line here. <code>5028156,2700 W BETHANY HOME RD,Phoenix,AZ,</code>. The trailing comma means the last column of the CSV is null/blank.</p>\n\n<p>In case of CSV files <code>1,,,,</code> translates to 5 columns where all the value in the columns are empty but first.</p>\n\n<p>Removing the trailing comma will consider that row as having only 4 columns.</p>\n\n<p>I hope that answers your question.</p>\n"}], "owner": {"reputation": 1, "user_id": 10355365, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-d1tf-_H5NWE/AAAAAAAAAAI/AAAAAAAAUPE/jLDoI7Vrayk/photo.jpg?sz=128", "display_name": "Michael Ingram", "link": "https://stackoverflow.com/users/10355365/michael-ingram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1536922501, "creation_date": 1536784651, "last_edit_date": 1536922501, "question_id": 52303121, "link": "https://stackoverflow.com/questions/52303121/csv-uploading-issue", "title": "CSV uploading issue", "body": "<p>I am uploading csv files to <a href=\"https://geocoding.geo.census.gov/\" rel=\"nofollow noreferrer\">https://geocoding.geo.census.gov/</a> for batch geocoding. After some python code to parse and separate files. I have to manually save each CSV file with excel as a csv again or I get an error \"Malformed input file or file not of type .CSV, .TXT, .DAT, .XLS, or .XLSX </p><p>The data should be in separate columns in a CSV or Excel file. Use a comma separator for text or DAT files\" . I opened with a text editor and notice one difference the comma at the end of each line. Is this an encoding issue?\nexample\nWorking</p>\n\n<pre><code>5028156,2700 W BETHANY HOME RD,Phoenix,AZ,\n</code></pre>\n\n<p>Non-working file</p>\n\n<pre><code>5093590,4808 N 15TH ST,Phoenix,AZ\n</code></pre>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1536784765, "post_id": 52303086, "comment_id": 91553945, "body": "<code>(a &lt; 4.9)&amp;(a&gt;1.5)</code> yields <code>True</code> where it meets the conditions. <code>((a &lt; 4.9)&amp;(a&gt;1.5)).any()</code> yields <code>True</code> if, as you asked, <i>anywhere in a list it does not meet the condition</i>."}], "answers": [{"comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1536787306, "post_id": 52303167, "comment_id": 91554924, "body": "Use <code>~</code> not <code>not</code> if you&#39;re negating a result with <code>numpy</code>"}, {"owner": {"reputation": 14311, "user_id": 5085211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eEZjd.png?s=128&g=1", "display_name": "fuglede", "link": "https://stackoverflow.com/users/5085211/fuglede"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1537111658, "post_id": 52303167, "comment_id": 91655800, "body": "The <code>not</code> was acting on a single <code>bool_</code> in which case it is equivalent to <code>~</code>."}], "tags": [], "owner": {"reputation": 14311, "user_id": 5085211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eEZjd.png?s=128&g=1", "display_name": "fuglede", "link": "https://stackoverflow.com/users/5085211/fuglede"}, "is_accepted": false, "score": 1, "last_activity_date": 1536787314, "last_edit_date": 1536787314, "creation_date": 1536784873, "answer_id": 52303167, "question_id": 52303086, "link": "https://stackoverflow.com/questions/52303086/check-if-index-in-list-meets-criteria/52303167#52303167", "title": "Check if index in list meets criteria", "body": "<p>You could do</p>\n\n<pre><code>((1.5 &lt;= x) | (x &gt;= 4.9)).any()\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 6530565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/145ed54175799dca1f7620c42b242d7a?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Lazo", "link": "https://stackoverflow.com/users/6530565/brandon-lazo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "closed_date": 1536787291, "answer_count": 1, "score": -1, "last_activity_date": 1536787314, "creation_date": 1536784527, "question_id": 52303086, "link": "https://stackoverflow.com/questions/52303086/check-if-index-in-list-meets-criteria", "closed_reason": "Duplicate", "title": "Check if index in list meets criteria", "body": "<p>I'm trying to figure out if any index of a list of data does not meet the criteria I have. I imagine that I would have to use the <code>np.where</code> function but I don't know how I would match each index to see if it meets or does not meet the criteria. I need to make sure that the data is within certain values. </p>\n\n<p>For example, the condition is <code>1.5 &lt; x &lt; 4.9</code> so how would I check if anywhere in a list, it does not meet the condition?</p>\n"}, {"tags": ["python", "ubuntu", "bioinformatics", "biopython"], "comments": [{"owner": {"reputation": 1756, "user_id": 2359523, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d65320cd476b9df7a4b33137dae344a7?s=128&d=identicon&r=PG", "display_name": "Anonymous coward", "link": "https://stackoverflow.com/users/2359523/anonymous-coward"}, "edited": false, "score": 4, "creation_date": 1536786884, "post_id": 52303085, "comment_id": 91554757, "body": "Are you working through this section? <a href=\"http://biopython.org/DIST/docs/tutorial/Tutorial.html#htoc81\" rel=\"nofollow noreferrer\">biopython.org/DIST/docs/tutorial/Tutorial.html#htoc81</a>"}, {"owner": {"reputation": 11, "user_id": 10355372, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8TH_3bT3-qQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMASm7devm3Vql_zA75CT1vJOdOdA/mo/photo.jpg?sz=128", "display_name": "Gufran GUNGOR", "link": "https://stackoverflow.com/users/10355372/gufran-gungor"}, "reply_to_user": {"reputation": 1756, "user_id": 2359523, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d65320cd476b9df7a4b33137dae344a7?s=128&d=identicon&r=PG", "display_name": "Anonymous coward", "link": "https://stackoverflow.com/users/2359523/anonymous-coward"}, "edited": false, "score": 0, "creation_date": 1537029327, "post_id": 52303085, "comment_id": 91638945, "body": "yes it was that section"}], "answers": [{"tags": [], "owner": {"reputation": 24305, "user_id": 2776376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/40VxD.gif?s=128&g=1", "display_name": "Maximilian Peters", "link": "https://stackoverflow.com/users/2776376/maximilian-peters"}, "is_accepted": false, "score": 1, "last_activity_date": 1537092260, "last_edit_date": 1592644375, "creation_date": 1537092260, "answer_id": 52352987, "question_id": 52303085, "link": "https://stackoverflow.com/questions/52303085/clustalw-on-ubuntu/52352987#52352987", "title": "ClustalW on Ubuntu", "body": "<p>The section is copied from the BioPython documentation.</p>\n<blockquote>\n<p>&gt;&gt;&gt; from Bio.Align.Applications import ClustalwCommandline<br />\n&gt;&gt;&gt; cline = ClustalwCommandline(&quot;clustalw2&quot;, infile=&quot;opuntia.fasta&quot;)<br />\n&gt;&gt;&gt; print(cline) <br /></p>\n<blockquote>\n<p>clustalw2 -infile=opuntia.fasta</p>\n</blockquote>\n</blockquote>\n<p>If you run</p>\n<pre><code>from Bio.Align.Applications import ClustalwCommandline\ncline = ClustalwCommandline(&quot;clustalw2&quot;, infile=&quot;opuntia.fasta&quot;)\nprint(cline) \n</code></pre>\n<p>it will do 3 things</p>\n<ol>\n<li>Import <code>ClustalwCommandline</code> module from BioPython</li>\n<li>Create a <code>ClustalwCommandline</code> object</li>\n<li>Print the object's string representation</li>\n</ol>\n<p>If you want to execute the program, you would need to call the created object</p>\n<pre><code>stdout, stderr = cline()\n</code></pre>\n<p>which will then run the whole program with your provided parameters. The &quot;normal&quot; output will be found in <code>stdout</code> and all errors in <code>stderr</code>.</p>\n<p>If get an error that the executable cannot be found, you either need to add the directory of <code>clustalw2</code> to your path or specify the full path (e.g. <code>cline = ClustalwCommandline(&quot;c:/users/gufran/programs/clustalw.exe&quot;, infile=&quot;opuntia.fasta&quot;</code>).</p>\n"}], "owner": {"reputation": 11, "user_id": 10355372, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8TH_3bT3-qQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMASm7devm3Vql_zA75CT1vJOdOdA/mo/photo.jpg?sz=128", "display_name": "Gufran GUNGOR", "link": "https://stackoverflow.com/users/10355372/gufran-gungor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1537092260, "creation_date": 1536784526, "last_edit_date": 1536819346, "question_id": 52303085, "link": "https://stackoverflow.com/questions/52303085/clustalw-on-ubuntu", "title": "ClustalW on Ubuntu", "body": "<p>In the biopython cookbook I couldn't find how to actually run <code>clustalw</code>. I have done what is on the cookbook but it is not running <code>clustalw</code> just printing </p>\n\n<pre><code>clustalw2 -infile=opuntia.fasta\n</code></pre>\n\n<p>Can anyone help me how to actually run <code>clustalw</code>?</p>\n"}, {"tags": ["python", "pandas", "crosstab"], "comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1536860617, "post_id": 52303074, "comment_id": 91585597, "body": "You can use df11 = df11.reindex(... You shouldn&#39;t need to create df12.  What problem are you facing when you try do it without creating a new dataframe?"}, {"owner": {"reputation": 447, "user_id": 9872200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517e27eef3d8f8cb23717206037e8d15?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/9872200/john"}, "reply_to_user": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1536861583, "post_id": 52303074, "comment_id": 91586063, "body": "@Scott, you are correct, my mistake, my original try had incorrect syntax.  Any thoughts on how to apply this reindex statement with a relative reference to the dates from most recent to oldest within the same order as mentioned above?  My hope would be to not have to go in and type over existing code each time i run the report- thanks again for your help!"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1536862590, "post_id": 52303074, "comment_id": 91586531, "body": "try:  Hard coding for this number of months <code>[c[0]] + [c[-1]] + [c[-2]] + c[4:0:-1].tolist() + [c[-3]]</code> or this for dynamic with different amount of months <code>[c[0]] + [c[-1]] + [c[-2]] + c[c.str.contains(&#39;\\d{2}\\&#47;\\d{4}&#39;)][::-1].tolist() + [c[-3]]&#39; where </code>c = df.columns`"}, {"owner": {"reputation": 447, "user_id": 9872200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517e27eef3d8f8cb23717206037e8d15?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/9872200/john"}, "reply_to_user": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 1, "creation_date": 1536869380, "post_id": 52303074, "comment_id": 91589728, "body": "@Scott thank you very much!  I will check this out tonight!  I appreciate your help!"}], "owner": {"reputation": 447, "user_id": 9872200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517e27eef3d8f8cb23717206037e8d15?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/9872200/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 925, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536857884, "creation_date": 1536784455, "last_edit_date": 1536857884, "question_id": 52303074, "link": "https://stackoverflow.com/questions/52303074/python-pandas-cross-tab-order", "title": "Python pandas cross tab order", "body": "<p>I am analyzing a data set and i am trying to add one feature to the reporting process/script: once the cross tab is created, i merge in data details and i would like to reindex, but using relative value and position them within the below reindex list from newest to oldest:</p>\n\n<pre><code>df11:\n\nDate_Viewed          Doc_ID\n2018-04-01 00:56:00   1234\n2018-04-01 00:56:02   1234\n2018-04-02 03:29:46   5678\n2018-04-02 10:12:16   5678\n\ndf11 = (pd.crosstab(df11['Doc_ID'], df11['Date_Viewed'].dt.strftime('%m/%Y'))\n    .reset_index()\n    .rename_axis([None],axis=1)\n    .merge(df5, how = 'left', on='Doc_ID')\n    .sort_values('count', ascending=False).reset_index(drop=True)\n    )\nprint(df11)\n\nDoc_ID  05/2018  06/2018  07/2018  08/2018  count  SubType  Name\n1234     327      383      290      241    1622    Report   Revenue\n5678     530      182      262      197    1503    Report   Profit\n\n\n#this is the only way i have found to be able to reindex them(create a new DF and then use an absolute reference to move the date columns around)\ndf12 = pd.DataFrame()\ndf12 = df11\ndf12.index.names = [None]\ndf12 = df12.reindex(['Doc_ID', 'Name', 'SubType',  '08/2018','07/2018','06/2018','count'], axis=1)\n</code></pre>\n\n<p>Any help you can provide to either of these issues would be greatly appreciated!</p>\n"}, {"tags": ["python", "flask", "flask-sqlalchemy", "concurrent.futures"], "comments": [{"owner": {"reputation": 1886, "user_id": 7324965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7aa4909c554252eb14749ffffe4d66d?s=128&d=identicon&r=PG&f=1", "display_name": "Fine", "link": "https://stackoverflow.com/users/7324965/fine"}, "edited": false, "score": 0, "creation_date": 1536828240, "post_id": 52303043, "comment_id": 91566707, "body": "How do you deploy your app? Are you using WSGI servers?"}, {"owner": {"reputation": 7995, "user_id": 3451339, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HPuzK.png?s=128&g=1", "display_name": "8-Bit Borges", "link": "https://stackoverflow.com/users/3451339/8-bit-borges"}, "reply_to_user": {"reputation": 1886, "user_id": 7324965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7aa4909c554252eb14749ffffe4d66d?s=128&d=identicon&r=PG&f=1", "display_name": "Fine", "link": "https://stackoverflow.com/users/7324965/fine"}, "edited": false, "score": 0, "creation_date": 1536857684, "post_id": 52303043, "comment_id": 91584097, "body": "yes. I run the app with <code>gunicorn -c gconfig.py app:app -w 4 --threads 12</code>"}, {"owner": {"reputation": 1886, "user_id": 7324965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7aa4909c554252eb14749ffffe4d66d?s=128&d=identicon&r=PG&f=1", "display_name": "Fine", "link": "https://stackoverflow.com/users/7324965/fine"}, "edited": false, "score": 0, "creation_date": 1536858268, "post_id": 52303043, "comment_id": 91584405, "body": "By saying <i>app halts</i> do you mean your whole gunicorn server halts or just a single request to a <code>&#47;cache</code>?"}, {"owner": {"reputation": 7995, "user_id": 3451339, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HPuzK.png?s=128&g=1", "display_name": "8-Bit Borges", "link": "https://stackoverflow.com/users/3451339/8-bit-borges"}, "reply_to_user": {"reputation": 1886, "user_id": 7324965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7aa4909c554252eb14749ffffe4d66d?s=128&d=identicon&r=PG&f=1", "display_name": "Fine", "link": "https://stackoverflow.com/users/7324965/fine"}, "edited": false, "score": 0, "creation_date": 1536858434, "post_id": 52303043, "comment_id": 91584476, "body": "I mean the app waits for all requests to be made at login and only then goes to homepage. It should go right away to homepage with requests being made at background"}, {"owner": {"reputation": 1886, "user_id": 7324965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7aa4909c554252eb14749ffffe4d66d?s=128&d=identicon&r=PG&f=1", "display_name": "Fine", "link": "https://stackoverflow.com/users/7324965/fine"}, "edited": false, "score": 0, "creation_date": 1536858929, "post_id": 52303043, "comment_id": 91584741, "body": "Well, if by app you mean some client to your Flask API, then maybe problem is not in Flask, but your app and the way it&#39;s making requests?"}, {"owner": {"reputation": 7995, "user_id": 3451339, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HPuzK.png?s=128&g=1", "display_name": "8-Bit Borges", "link": "https://stackoverflow.com/users/3451339/8-bit-borges"}, "reply_to_user": {"reputation": 1886, "user_id": 7324965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7aa4909c554252eb14749ffffe4d66d?s=128&d=identicon&r=PG&f=1", "display_name": "Fine", "link": "https://stackoverflow.com/users/7324965/fine"}, "edited": false, "score": 0, "creation_date": 1536864749, "post_id": 52303043, "comment_id": 91587502, "body": "please refer to my edit."}, {"owner": {"reputation": 3467, "user_id": 3393308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a3f30f7c191e8d556c70c951fe3d9af?s=128&d=identicon&r=PG", "display_name": "yorodm", "link": "https://stackoverflow.com/users/3393308/yorodm"}, "edited": false, "score": 0, "creation_date": 1536865557, "post_id": 52303043, "comment_id": 91587901, "body": "Python has a <a href=\"https://realpython.com/python-gil/\" rel=\"nofollow noreferrer\">GIL</a> that will prevent any IO bound code to run concurrently, have you tried to use <code>ProcessPoolExcecutor</code> instead?"}, {"owner": {"reputation": 7995, "user_id": 3451339, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HPuzK.png?s=128&g=1", "display_name": "8-Bit Borges", "link": "https://stackoverflow.com/users/3451339/8-bit-borges"}, "edited": false, "score": 0, "creation_date": 1536865632, "post_id": 52303043, "comment_id": 91587931, "body": "no, how would it change the code?"}, {"owner": {"reputation": 1886, "user_id": 7324965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7aa4909c554252eb14749ffffe4d66d?s=128&d=identicon&r=PG&f=1", "display_name": "Fine", "link": "https://stackoverflow.com/users/7324965/fine"}, "reply_to_user": {"reputation": 3467, "user_id": 3393308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a3f30f7c191e8d556c70c951fe3d9af?s=128&d=identicon&r=PG", "display_name": "yorodm", "link": "https://stackoverflow.com/users/3393308/yorodm"}, "edited": false, "score": 0, "creation_date": 1536865890, "post_id": 52303043, "comment_id": 91588052, "body": "@yorodm please read your link again, not IO bound, but CPU bound, don&#39;t bring false info to other people."}, {"owner": {"reputation": 3467, "user_id": 3393308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a3f30f7c191e8d556c70c951fe3d9af?s=128&d=identicon&r=PG", "display_name": "yorodm", "link": "https://stackoverflow.com/users/3393308/yorodm"}, "reply_to_user": {"reputation": 1886, "user_id": 7324965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7aa4909c554252eb14749ffffe4d66d?s=128&d=identicon&r=PG&f=1", "display_name": "Fine", "link": "https://stackoverflow.com/users/7324965/fine"}, "edited": false, "score": 0, "creation_date": 1536866307, "post_id": 52303043, "comment_id": 91588218, "body": "@Fian It was a mistake, not &quot;bringing false information to other people&quot;. I&#39;m not part of some &quot;Python disinformation campaign&quot; or something"}, {"owner": {"reputation": 968, "user_id": 1650778, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/16a1042134f81569c6b0e81494d66ba8?s=128&d=identicon&r=PG", "display_name": "Marco Lavagnino", "link": "https://stackoverflow.com/users/1650778/marco-lavagnino"}, "edited": false, "score": 0, "creation_date": 1537547222, "post_id": 52303043, "comment_id": 91838371, "body": "What do you mean by &quot;yield API requests on the fly&quot;? And by &quot;upload every request to a DB&quot;? Are you trying to log every API call to your server, or trying to cache the result of you API calls to Spotify, so you don&#39;t need to call them again?"}], "answers": [{"comments": [{"owner": {"reputation": 7995, "user_id": 3451339, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HPuzK.png?s=128&g=1", "display_name": "8-Bit Borges", "link": "https://stackoverflow.com/users/3451339/8-bit-borges"}, "edited": false, "score": 0, "creation_date": 1537324306, "post_id": 52349937, "comment_id": 91738902, "body": "thank you for the detailed answer. unfortunately, none of the issues solve my problem. there is no lock and <code>SQLalchemy</code> works fine with the present pool, and if I ignore <code>queues</code>, the problem persists. One background job works. two, not."}], "tags": [], "owner": {"reputation": 12312, "user_id": 473709, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/a7UkY.jpg?s=128&g=1", "display_name": "James Lim", "link": "https://stackoverflow.com/users/473709/james-lim"}, "is_accepted": true, "score": 2, "last_activity_date": 1537057818, "last_edit_date": 1537057818, "creation_date": 1537057421, "answer_id": 52349937, "question_id": 52303043, "link": "https://stackoverflow.com/questions/52303043/flask-job-not-running-as-a-background-process/52349937#52349937", "title": "Flask - job not running as a background process", "body": "<p>Still not sure what you meant by</p>\n\n<blockquote>\n  <p>I mean the app waits for all requests to be made at login and only then goes to homepage. It should go right away to homepage with requests being made at background</p>\n</blockquote>\n\n<p>There are a few issues here:</p>\n\n<ul>\n<li>Your queue is global to the process <em>i.e.</em> there is only one queue per gunicorn worker; you probably want the queue to be bound to your request so that multiple requests are not sharing the same queue in memory. Consider using <a href=\"http://werkzeug.pocoo.org/docs/0.14/local/\" rel=\"nofollow noreferrer\">context locals</a></li>\n<li>If <code>UploadTracks</code> is writing to the database, there might be a lock on the table. Check your indices and inspect lock waits in your database.</li>\n<li>SQLAlchemy might be configured with a small <a href=\"http://docs.sqlalchemy.org/en/latest/core/pooling.html\" rel=\"nofollow noreferrer\">connection pool</a>, and the second <code>UploadTracks</code> is waiting for the first to return its connection.</li>\n</ul>\n\n<p>In your first example, the endpoint is waiting on all futures to finish before returning, whereas in your second example, the endpoint returns immediately after submitting tasks to the executor. If you want flask to respond quickly while the tasks are still running in background threads, remove the <code>with concurrent.futures.ThreadPoolExecutor() as executor:</code> and construct a global thread pool at the top of the module. </p>\n\n<p>Using <code>with</code>, the context manager waits for all submitted tasks before exiting, but I am not sure if that's your main issue.</p>\n"}, {"tags": [], "owner": {"reputation": 163, "user_id": 529863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/761aeedee9914ec2c7b6bde27b3d6cd3?s=128&d=identicon&r=PG", "display_name": "dudko", "link": "https://stackoverflow.com/users/529863/dudko"}, "is_accepted": false, "score": 1, "last_activity_date": 1580455900, "last_edit_date": 1580455900, "creation_date": 1537548081, "answer_id": 52447979, "question_id": 52303043, "link": "https://stackoverflow.com/questions/52303043/flask-job-not-running-as-a-background-process/52447979#52447979", "title": "Flask - job not running as a background process", "body": "<p>Try to create the <code>ThreadPoolExecutor</code> outside of the route handler.</p>\n\n<pre><code>import time\nfrom concurrent.futures import ThreadPoolExecutor\n\nfrom flask import Flask\n\n\ndef foo(*args):\n    while True:\n        print(\"foo\", args)\n        time.sleep(10)\n\n\napp = Flask(__name__)\n\nexecutor = ThreadPoolExecutor()\n\n\n@app.route(\"/cache\")\ndef cache():\n    executor.submit(foo, \"1\")\n    executor.submit(foo, \"2\")\n    return \"in cache\"\n</code></pre>\n"}], "owner": {"reputation": 7995, "user_id": 3451339, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HPuzK.png?s=128&g=1", "display_name": "8-Bit Borges", "link": "https://stackoverflow.com/users/3451339/8-bit-borges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1597, "favorite_count": 1, "accepted_answer_id": 52349937, "answer_count": 2, "score": 6, "last_activity_date": 1580456457, "creation_date": 1536784357, "last_edit_date": 1580456457, "question_id": 52303043, "link": "https://stackoverflow.com/questions/52303043/flask-job-not-running-as-a-background-process", "title": "Flask - job not running as a background process", "body": "<p>I am trying to run a <code>Flask</code> app which consists of:</p>\n\n<ol>\n<li>Yielding API requests on the fly</li>\n<li>Uploading each request to a <code>SQLalchemy</code> database</li>\n<li>Run jobs <code>1</code> and <code>2</code> as a background process</li>\n</ol>\n\n<p>For that I have the following code:</p>\n\n<pre><code>import concurrent.futures\nimport queue\nfrom concurrent.futures import ThreadPoolExecutor\n\nfrom flask import Flask, current_app\n\napp = Flask(__name__)\nq = queue.Queue()\n\n\ndef build_cache():\n    # 1. Yielding API requests on the fly\n    track_and_features = spotify.query_tracks()  # &lt;- a generator\n    while True:\n        q.put(next(track_and_features))\n\n\ndef upload_cache(tracks_and_features):\n    # 2. Uploading each request to a `SQLalchemy` database\n    with app.app_context():\n        Upload_Tracks(filtered_dataset=track_and_features)\n\n    return \"UPLOADING TRACKS TO DATABASE\"\n\n\n@app.route(\"/cache\")\ndef cache():\n    # 3. Do `1` and `2` as a background process\n    with concurrent.futures.ThreadPoolExecutor() as executor:\n\n        future_to_track = {executor.submit(build_cache): \"TRACKER DONE\"}\n\n        while future_to_track:\n            # check for status of the futures which are currently working\n            done, not_done = concurrent.futures.wait(\n                future_to_track,\n                timeout=0.25,\n                return_when=concurrent.futures.FIRST_COMPLETED,\n            )\n\n            # if there is incoming work, start a new future\n            while not q.empty():\n\n                # fetch a track from the queue\n                track = q.get()\n\n                # Start the load operation and mark the future with its TRACK\n                future_to_track[executor.submit(upload_cache, track)] = track\n            # process any completed futures\n            for future in done:\n                track = future_to_track[future]\n                try:\n                    data = future.result()\n                except Exception as exc:\n                    print(\"%r generated an exception: %s\" % (track, exc))\n\n                del future_to_track[future]\n\n    return \"Cacheing playlist in the background...\"\n</code></pre>\n\n<p>All of the above works, BUT NOT AS A BACKGROUND PROCESS. The app hangs when <code>cache()</code> is called, and resumes only when the process is done. </p>\n\n<p>I run it with <code>gunicorn -c gconfig.py app:app -w 4 --threads 12</code></p>\n\n<p>what am I doing wrong?</p>\n\n<hr>\n\n<blockquote>\n  <p><strong>EDIT</strong>: If simplify things in order do debug this, and write simply:</p>\n</blockquote>\n\n<pre><code># 1st background process\ndef build_cache():\n    # only ONE JOB\n    tracks_and_features = spotify.query_tracks()  # &lt;- not a generator\n    while True:\n        print(next(tracks_and_features))\n\n\n# background cache\n@app.route(\"/cache\")\ndef cache():\n    executor.submit(build_cache)\n    return \"Cacheing playlist in the background...\"\n</code></pre>\n\n<p>THEN the process runs in the background.</p>\n\n<p>However, if I add another job:</p>\n\n<pre><code>def build_cache():\n\n    tracks_and_features = spotify.query_tracks()\n    while True:\n        # SQLalchemy db\n        Upload_Tracks(filtered_dataset=next(tracks_and_features))\n</code></pre>\n\n<p>background does not work again.</p>\n\n<p>In short:</p>\n\n<p><strong>Background only works if I run ONE job at a time (which was the limitation behind the idea of using queues in the first place)</strong>.</p>\n\n<p>seems like the problem is binding the background process to SQLalchemy, don't know. totally lost here.</p>\n"}, {"tags": ["python", "django", "sqlalchemy"], "comments": [{"owner": {"reputation": 619, "user_id": 1680521, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pu7Cx.jpg?s=128&g=1", "display_name": "yogkm", "link": "https://stackoverflow.com/users/1680521/yogkm"}, "edited": false, "score": 0, "creation_date": 1536784787, "post_id": 52302999, "comment_id": 91553952, "body": "SqlAlchemy is an ORM just like django ORM. The data will be stored in a db like mysql or postgresql. And Yes you can access the table created by SqlAlchemy in Django as Django Model. You need to specify <code>db_table=&lt;table_name&gt;</code> in a django model Meta options. For Reference see <a href=\"https://docs.djangoproject.com/en/2.1/ref/models/options/#db-table\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "reply_to_user": {"reputation": 619, "user_id": 1680521, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pu7Cx.jpg?s=128&g=1", "display_name": "yogkm", "link": "https://stackoverflow.com/users/1680521/yogkm"}, "edited": false, "score": 0, "creation_date": 1536826514, "post_id": 52302999, "comment_id": 91565841, "body": "@yogkm Okay I see. So it does not matter that the previous existing backend has that field or not, I just add that extra field myself when I write the backend in Django? Do I need to add the user fields too? I think you answered to my question."}, {"owner": {"reputation": 619, "user_id": 1680521, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pu7Cx.jpg?s=128&g=1", "display_name": "yogkm", "link": "https://stackoverflow.com/users/1680521/yogkm"}, "edited": false, "score": 0, "creation_date": 1536848449, "post_id": 52302999, "comment_id": 91578826, "body": "Please take a look at <a href=\"https://docs.djangoproject.com/en/2.1/howto/legacy-databases/#auto-generate-the-models\" rel=\"nofollow noreferrer\">this</a>."}], "owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536784177, "creation_date": 1536784177, "question_id": 52302999, "link": "https://stackoverflow.com/questions/52302999/can-i-access-the-data-from-sqlalchemy-database-writing-a-separate-backend-on-dja", "title": "Can I access the data from SQLAlchemy database writing a separate backend on Django Rest Framework?", "body": "<p>Consider that someone wrote a user backend. So the backend consists of users and their houses. The backend uses SQLAlchemy to store the users and their houses (so a user can have multiple houses). Both users and houses have their unique IDs.</p>\n\n<p>Now, I want to write a separate backend in Django Rest framework in order for the users to be able upload the house pictures for their houses.</p>\n\n<p>Will it be possible to do that? To be more specific, my thought is to connect to that SQLAlchemy database and whenever the user types a url (.../user34/house55/) my code triggers my model which retrieves the Token and extracts the user ID and house ID and gets ready for the POST from that specific user. So when the user uploads the image, my backend simply saves a new field in SQLAlchemy. Or would that be impossible as the user backend does not have a field for that?</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver", "webdriver"], "comments": [{"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1536791443, "post_id": 52302970, "comment_id": 91556189, "body": "after import into other script, the driver should be available as <code>testlogin.Testsite().browser</code>, returns <code>&lt;selenium.webdriver.chrome.webdriver.WebDriver (session=&quot;515c2d4235b3ed3a133399ff138e0739&quot;)&gt;</code> on my machine"}, {"owner": {"reputation": 91, "user_id": 10349023, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tnqmWlsXHHI/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oKHOIArCQOX3xC7BJ62OY0Lu-eUA/mo/photo.jpg?sz=128", "display_name": "Dev Bin", "link": "https://stackoverflow.com/users/10349023/dev-bin"}, "reply_to_user": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1536805419, "post_id": 52302970, "comment_id": 91558915, "body": "Thanks! @davedwards, I was trying something else."}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1536813340, "post_id": 52302970, "comment_id": 91560620, "body": "Welcome @dev-bin hopefully that works for your needs. If not <a href=\"https://stackoverflow.com/posts/52302970/edit\">edit</a> the question and add more information."}, {"owner": {"reputation": 91, "user_id": 10349023, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tnqmWlsXHHI/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oKHOIArCQOX3xC7BJ62OY0Lu-eUA/mo/photo.jpg?sz=128", "display_name": "Dev Bin", "link": "https://stackoverflow.com/users/10349023/dev-bin"}, "reply_to_user": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1536872951, "post_id": 52302970, "comment_id": 91591318, "body": "@davedwards, When I run the script i get the following error, I tried to catch the exception but doesn&#39;t seem to work. C:\\&gt;python testlogin.py chrome user password [15256:13268:0913/164925.682:ERROR:install_util.cc(603)] Failed to read HKLM\\SOFTWARE\\Policies\\Google\\Chrome\\MachineLevelUserCloudPo&zwnj;&#8203;licyEnrollmentToken:  File &quot;C:\\Python37\\lib\\site-packages\\urllib3\\util\\retry.py&quot;, line 398, in increment     raise MaxRetryError(_pool, url, error or ResponseError(cause)) urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host=&#39;127.0.0.1&#39;, port=55905): Max retries exceeded with url:"}], "owner": {"reputation": 91, "user_id": 10349023, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tnqmWlsXHHI/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oKHOIArCQOX3xC7BJ62OY0Lu-eUA/mo/photo.jpg?sz=128", "display_name": "Dev Bin", "link": "https://stackoverflow.com/users/10349023/dev-bin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536846422, "creation_date": 1536784026, "last_edit_date": 1536846422, "question_id": 52302970, "link": "https://stackoverflow.com/questions/52302970/login-module-for-selenium-webdriver", "title": "Login module for Selenium Webdriver", "body": "<p>I am trying to login to a website and run some tests. There are so many links that I need to click and other tasks are to be performed on the webpages.\nI wrote a python script that takes the command line arguments (browser, username and password) and logs in to the website. This works fine. \nThe login module needs to be imported into other scripts where I can perform the tests using this Login module.</p>\n\n<p>testlogin.py</p>\n\n<pre><code>import sys\nimport argparse\nfrom selenium import webdriver\n\nparser = argparse.ArgumentParser()\nparser.add_argument('browser', default='chrome', help='Types of browser:chrome, firefox, ie')\nparser.add_argument('username', help='This is the username')\nparser.add_argument('password', help='This is the password')\nargs = parser.parse_args()\n\nsetup_parameters = sys.argv[1:]\n\n\nclass Testsite(object):\n\n\n      test_url = 'someurl'\n\n# Initialization Method\n    def __init__(self):\n        self.username = setup_parameters[1]\n        self.password = setup_parameters[2]\n        if setup_parameters[0] == 'chrome':\n            self.browser = webdriver.Chrome()\n            print(\"Running tests on Chrome browser\")\n            self.browser.implicitly_wait(15)\n            self.premier_login()\n            self.premier_close()\n        elif setup_parameters[0] == 'ie':\n            self.browser = webdriver.Ie()\n            print(\"Running tests on Internet Explorer browser\")\n            self.browser.implicitly_wait(15)\n            self.premier_login()\n            self.premier_close()\n        elif setup_parameters[0] == 'firefox':\n            self.browser = webdriver.Firefox()\n            print(\"Running tests on Firefox browser\")\n            self.browser.implicitly_wait(15)\n            self.premier_login()\n            self.premier_close()\n        elif setup_parameters[0] == 'None':\n            print('No browser type specified.... continuing with the default browser')\n            self.browser = webdriver.Chrome()\n\n#Method to login to the site\n\n    def site_login(self):\n        self.browser.get(self.test_url)\n        self.browser.find_element_by_id(\"Username\").send_keys(self.username)\n        self.browser.find_element_by_id(\"Password\").send_keys(self.password)\n        self.browser.find_element_by_id(\"btnLogin\").click()\n        self.browser.maximize_window()\n        self.browser.implicitly_wait(10)\n\n# Closing the browser window and terminating the test\n    def site_close(self):\n        self.browser.quit()\n\n\nif __name__ == '__main__':\n\n    Testsite().site_login()\n</code></pre>\n\n<p>How do I set the driver from the above module, if I want to import it to the other scripts.</p>\n\n<p>I tried importing the above module into other scripts but wasn't able to set the driver.</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "numpy"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1536784022, "post_id": 52302937, "comment_id": 91553658, "body": "So you are trying to sort a mix of strings and ints?  Is &#39;Load&#39; smaller or larger than 11?"}, {"owner": {"reputation": 17, "user_id": 5963678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec307e6f2c7e1f304bb8db794aae4c7?s=128&d=identicon&r=PG&f=1", "display_name": "c r", "link": "https://stackoverflow.com/users/5963678/c-r"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1536784189, "post_id": 52302937, "comment_id": 91553724, "body": "Load is larger than 11. The actual data frame is several hundred rows and sorts fine. There is an issue with the 10 in row 6 as for some reason it is not the same value, maybe not actually an int."}, {"owner": {"reputation": 32101, "user_id": 8404453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/616cb81bb678bb5b17869511b2a41367?s=128&d=identicon&r=PG&f=1", "display_name": "TheMaster", "link": "https://stackoverflow.com/users/8404453/themaster"}, "edited": false, "score": 0, "creation_date": 1536784549, "post_id": 52302937, "comment_id": 91553872, "body": "Probably  just a stray space. Try trimming.."}, {"owner": {"reputation": 17, "user_id": 5963678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec307e6f2c7e1f304bb8db794aae4c7?s=128&d=identicon&r=PG&f=1", "display_name": "c r", "link": "https://stackoverflow.com/users/5963678/c-r"}, "edited": false, "score": 0, "creation_date": 1536784881, "post_id": 52302937, "comment_id": 91553998, "body": "Trimming replaces all values except the 10 and Load with NaN."}, {"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 1, "creation_date": 1536784923, "post_id": 52302937, "comment_id": 91554019, "body": "Then 10 is a string type. Happy days"}, {"owner": {"reputation": 17, "user_id": 5963678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec307e6f2c7e1f304bb8db794aae4c7?s=128&d=identicon&r=PG&f=1", "display_name": "c r", "link": "https://stackoverflow.com/users/5963678/c-r"}, "edited": false, "score": 0, "creation_date": 1536785106, "post_id": 52302937, "comment_id": 91554090, "body": "Can I convert just that? Converting the column to int will cause issue with Load string. The 10 may not always be in the same place, either.  Thank you for the insight. Makes sense."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 5963678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec307e6f2c7e1f304bb8db794aae4c7?s=128&d=identicon&r=PG&f=1", "display_name": "c r", "link": "https://stackoverflow.com/users/5963678/c-r"}, "edited": false, "score": 0, "creation_date": 1536846200, "post_id": 52305406, "comment_id": 91577288, "body": "I may be missing something but the string Load does not parse correctly with that. I used <code>error=&quot;coerce&quot;</code> to correct. Passing <code>ind</code> to <code>pd.reindex()</code> does not use it appropriately though."}, {"owner": {"reputation": 17, "user_id": 5963678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec307e6f2c7e1f304bb8db794aae4c7?s=128&d=identicon&r=PG&f=1", "display_name": "c r", "link": "https://stackoverflow.com/users/5963678/c-r"}, "edited": false, "score": 0, "creation_date": 1536848379, "post_id": 52305406, "comment_id": 91578771, "body": "I used <code>.fillna(999)</code> prior to <code>.argsort()</code> to correct and put strings at end"}], "tags": [], "owner": {"reputation": 2116, "user_id": 7247547, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9edc71b8ad82b60fb9955e8adcede03a?s=128&d=identicon&r=PG&f=1", "display_name": "kevinkayaks", "link": "https://stackoverflow.com/users/7247547/kevinkayaks"}, "is_accepted": true, "score": 0, "last_activity_date": 1536802423, "last_edit_date": 1536802423, "creation_date": 1536801962, "answer_id": 52305406, "question_id": 52302937, "link": "https://stackoverflow.com/questions/52302937/python-object-does-not-sort-with-like-objects/52305406#52305406", "title": "Python object does not sort with like objects", "body": "<p>Change all elements of the dataframe <code>df</code> that you wish to sort on to numeric type, then obtain the indices of the sort, and use those to reorder the original series </p>\n\n<pre><code>import pandas as pd \ninds = (pd.to_numeric(df['column1']))).argsort() # use these indices to sort original df \n</code></pre>\n\n<p>This shouldn't modify the dtype of the original dataframe. </p>\n"}], "owner": {"reputation": 17, "user_id": 5963678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec307e6f2c7e1f304bb8db794aae4c7?s=128&d=identicon&r=PG&f=1", "display_name": "c r", "link": "https://stackoverflow.com/users/5963678/c-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 52305406, "answer_count": 1, "score": -1, "last_activity_date": 1536802423, "creation_date": 1536783884, "last_edit_date": 1536785240, "question_id": 52302937, "link": "https://stackoverflow.com/questions/52302937/python-object-does-not-sort-with-like-objects", "title": "Python object does not sort with like objects", "body": "<p>I have a dataframe column of dtype <em>objects</em> that does not sort properly. I need it to stay object due to the possibility of strings, <code>Load</code> in the example. </p>\n\n<p>The object in the <em>Index 6 row</em> appears the exact same but does not sort with the rest. If I convert the column to <em>string</em> type it adds a <code>.0</code> to the end of each object in <em>column1</em>, except the object in the <em>Index 6 row</em>. I cannot convert to <em>int</em> because I need <em>strings</em> to remain. How can I fix the sorting? Thank you. </p>\n\n<p>Edit:</p>\n\n<p><strong>Figured out issue -</strong> 10 is <em>string</em> object.</p>\n\n<p>Ex:</p>\n\n<pre><code>Index     column1\n0         10\n1         10\n2         11\n3         11\n4         11\n5         11\n6         10\n7         Load\n</code></pre>\n"}, {"tags": ["python", "tkinter"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 9807250, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-y3Mxv16qRgk/AAAAAAAAAAI/AAAAAAAAABE/ercjGksM4aE/photo.jpg?sz=128", "display_name": "rml2018", "link": "https://stackoverflow.com/users/9807250/rml2018"}, "edited": false, "score": 0, "creation_date": 1536807875, "post_id": 52306063, "comment_id": 91559422, "body": "That sort of updating seems to be lightning fast (I <i>have</i> just managed to test it)"}], "tags": [], "owner": {"reputation": 27, "user_id": 9807250, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-y3Mxv16qRgk/AAAAAAAAAAI/AAAAAAAAABE/ercjGksM4aE/photo.jpg?sz=128", "display_name": "rml2018", "link": "https://stackoverflow.com/users/9807250/rml2018"}, "is_accepted": false, "score": 0, "last_activity_date": 1536807797, "creation_date": 1536807797, "answer_id": 52306063, "question_id": 52302871, "link": "https://stackoverflow.com/questions/52302871/tkinter-scroll-rendering/52306063#52306063", "title": "tkinter Scroll rendering", "body": "<p>I've thought of an interesting solution and I'm open to feedback.</p>\n\n<p>The idea is essentially to create an artificial sort of scrolling wherein the entries are updated in value (using their <code>StringVar.set()</code>). One tick on the mousewheel <em>down</em> would lead to each of the entries being shifted up 3 units (arbitrary correlation -- could be more or less).</p>\n"}], "owner": {"reputation": 27, "user_id": 9807250, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-y3Mxv16qRgk/AAAAAAAAAAI/AAAAAAAAABE/ercjGksM4aE/photo.jpg?sz=128", "display_name": "rml2018", "link": "https://stackoverflow.com/users/9807250/rml2018"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536807797, "creation_date": 1536783556, "question_id": 52302871, "link": "https://stackoverflow.com/questions/52302871/tkinter-scroll-rendering", "title": "tkinter Scroll rendering", "body": "<p>I have taken an <a href=\"http://effbot.org/zone/tkinter-autoscrollbar.htm\" rel=\"nofollow noreferrer\" title=\"an applied example\">applied example of using Scrollbar</a> directly from the tkinter documentation and replaced the two objects of type <code>AutoScrollbar</code> to <code>Scrollbar</code>, and the <code>Button</code> to <code>Entry</code>.</p>\n\n<p>The issue at hand is that if I scroll quickly enough, the <code>Entry</code> texts become a blur as the entries don't seems to render quickly enough.</p>\n\n<p>Is there a technique wherein all of the elements in the <code>Frame</code> of the <code>Canvas</code> are pre-rendered and the viewing window simply slides and scales? Or render time simply inevitable in <code>tkinter</code>?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1536783771, "post_id": 52302861, "comment_id": 91553545, "body": "Can you provide what you tried and the error it returned?"}, {"owner": {"reputation": 5173, "user_id": 1981088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Iicg.png?s=128&g=1", "display_name": "help-info.de", "link": "https://stackoverflow.com/users/1981088/help-info-de"}, "edited": false, "score": 1, "creation_date": 1536784226, "post_id": 52302861, "comment_id": 91553742, "body": "Welcome to Stack Overflow! Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read through the <a href=\"http://stackoverflow.com/help\">help center</a>, in particular how to ask. Your best bet here is to do your research, search for related topics on SO, and give it a go. After doing more research and searching, post a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> of your attempt and say specifically where you&#39;re stuck, which can help you get better answers."}, {"owner": {"reputation": 45172, "user_id": 4685471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/327dc718c142e3ea70e5db4b38050a36?s=128&d=identicon&r=PG", "display_name": "desertnaut", "link": "https://stackoverflow.com/users/4685471/desertnaut"}, "edited": false, "score": 0, "creation_date": 1536785394, "post_id": 52302861, "comment_id": 91554211, "body": "Question has nothing to do with <code>machine-learning</code> or <code>computer-science</code> - kindly do not spam the tags (removed)."}], "answers": [{"tags": [], "owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "is_accepted": false, "score": 10, "last_activity_date": 1536784060, "creation_date": 1536784060, "answer_id": 52302976, "question_id": 52302861, "link": "https://stackoverflow.com/questions/52302861/how-do-i-install-ta-lib-in-python-3-in-mac-os-high-sierra/52302976#52302976", "title": "How do I install TA-lib in python 3 in Mac OS High Sierra?", "body": "<p>I was able to get it install via the instructions <a href=\"https://mrjbq7.github.io/ta-lib/install.html\" rel=\"noreferrer\">here</a>. Note that you'll need to</p>\n\n<p><code>brew install ta-lib</code> first. If you don't have HomeBrew, you'll need to go <a href=\"https://brew.sh/\" rel=\"noreferrer\">here</a>. After that, you should be able to <code>pip install TA-Lib</code></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 15601037, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GgL9tbLqBPLuCEpmIvUtE7o77X3i48qYis2jWh9Xg=k-s128", "display_name": "Mehmet Kaan ERKO&#199;", "link": "https://stackoverflow.com/users/15601037/mehmet-kaan-erko%c3%87"}, "is_accepted": false, "score": 0, "last_activity_date": 1618089997, "creation_date": 1618089997, "answer_id": 67039416, "question_id": 52302861, "link": "https://stackoverflow.com/questions/52302861/how-do-i-install-ta-lib-in-python-3-in-mac-os-high-sierra/67039416#67039416", "title": "How do I install TA-lib in python 3 in Mac OS High Sierra?", "body": "<p>If you are using Apple laptop with M1 chipset you also need to export your inc and lib paths.</p>\n<pre><code>export TA_INCLUDE_PATH=&quot;$(brew --prefix ta-lib)/include&quot;\nexport TA_LIBRARY_PATH=&quot;$(brew --prefix ta-lib)/lib&quot;\n</code></pre>\n<p>as described <a href=\"https://github.com/mrjbq7/ta-lib#mac-os-x\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 39, "user_id": 10355318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/007bbabe4859befa3a942c3c42172487?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge Hernandez", "link": "https://stackoverflow.com/users/10355318/jorge-hernandez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7549, "favorite_count": 3, "answer_count": 2, "score": -2, "last_activity_date": 1618089997, "creation_date": 1536783520, "last_edit_date": 1536785332, "question_id": 52302861, "link": "https://stackoverflow.com/questions/52302861/how-do-i-install-ta-lib-in-python-3-in-mac-os-high-sierra", "title": "How do I install TA-lib in python 3 in Mac OS High Sierra?", "body": "<p>My question is how to install TA-lib into python. I have tried and it did not work.</p>\n"}, {"tags": ["python", "valueerror"], "comments": [{"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 1, "creation_date": 1536783602, "post_id": 52302853, "comment_id": 91553464, "body": "It looks like you are merging two strings: <code>&#39;df1&#39;</code> and <code>&#39;df2&#39;</code>."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1536783699, "post_id": 52302853, "comment_id": 91553512, "body": "Could you please just take a look at your code before posting it?"}, {"owner": {"reputation": 153, "user_id": 2379875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6924989ff4e36a1420ede295cbee954a?s=128&d=identicon&r=PG", "display_name": "user2379875", "link": "https://stackoverflow.com/users/2379875/user2379875"}, "edited": false, "score": 0, "creation_date": 1536783742, "post_id": 52302853, "comment_id": 91553530, "body": "You need to merge the variables df1 and df2 not the strings &#39;df1&#39; and &#39;df2&#39;."}, {"owner": {"reputation": 619, "user_id": 1680521, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pu7Cx.jpg?s=128&g=1", "display_name": "yogkm", "link": "https://stackoverflow.com/users/1680521/yogkm"}, "edited": false, "score": 0, "creation_date": 1536783933, "post_id": 52302853, "comment_id": 91553622, "body": "Try this <code>mergedf = pd.merge(df1,df2,how = &#39;outer&#39;,left_on=[&#39;CONTRACT_CONTRACT_ID&#39;])</code>"}, {"owner": {"reputation": 3, "user_id": 9577991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37099781526967d80fd7d24abf385fb2?s=128&d=identicon&r=PG&f=1", "display_name": "Ankit", "link": "https://stackoverflow.com/users/9577991/ankit"}, "edited": false, "score": 0, "creation_date": 1536784305, "post_id": 52302853, "comment_id": 91553767, "body": "Found my mistake; silly, Thank you !"}, {"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 0, "creation_date": 1536838039, "post_id": 52302853, "comment_id": 91572377, "body": "Other users marked your question for low quality and need for improvement. I re-worded/formatted your input to make it easier to read/understand. Please review my changes to ensure they reflect your intentions. Feel free to drop me a comment in case you have further questions or feedback for me."}], "owner": {"reputation": 3, "user_id": 9577991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37099781526967d80fd7d24abf385fb2?s=128&d=identicon&r=PG&f=1", "display_name": "Ankit", "link": "https://stackoverflow.com/users/9577991/ankit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3382, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536838031, "creation_date": 1536783495, "last_edit_date": 1536838031, "question_id": 52302853, "link": "https://stackoverflow.com/questions/52302853/how-to-resolve-valueerror-can-not-merge-dataframe-with-instance-of-type-class", "title": "How to resolve &quot;valueError: can not merge DataFrame with instance of type &lt;class &#39;str&#39;&gt;&quot;?", "body": "<p>Getting this error</p>\n\n<blockquote>\n  <p>valueError: can not merge DataFrame with instance of type  </p>\n</blockquote>\n\n<p>with this code:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nimport pandas as pd\n\ncontract = pd.read_csv('4.CONTRACT_0806.csv')\ncontractaff = pd.read_csv('5.CONTRACTAFFILIATE_0806.csv')\ndf1 = pd.DataFrame(contract)\ndf2 = pd.DataFrame(contractaff)\n\nmergedf = pd.merge('df1','df2',how = 'outer',left_on=['CONTRACT_CONTRACT_ID'])\n</code></pre>\n\n<p>Why is that?</p>\n"}, {"tags": ["python", "matlab", "numpy"], "comments": [{"owner": {"reputation": 5135, "user_id": 5506894, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jSK1.jpg?s=128&g=1", "display_name": "Denziloe", "link": "https://stackoverflow.com/users/5506894/denziloe"}, "edited": false, "score": 2, "creation_date": 1536783594, "post_id": 52302837, "comment_id": 91553459, "body": "A simple reason is that MATLAB is industry software and they can spend a lot of money on optimising things. Another reason may be that MATLAB can leverage multiple CPUs but I&#39;m not sure about this."}, {"owner": {"reputation": 141, "user_id": 7569232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E1FIK.jpg?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/7569232/thomas"}, "reply_to_user": {"reputation": 5135, "user_id": 5506894, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jSK1.jpg?s=128&g=1", "display_name": "Denziloe", "link": "https://stackoverflow.com/users/5506894/denziloe"}, "edited": false, "score": 0, "creation_date": 1536783689, "post_id": 52302837, "comment_id": 91553502, "body": "Thanks for your comment, so Python does not support multithreading natively ?"}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "reply_to_user": {"reputation": 5135, "user_id": 5506894, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jSK1.jpg?s=128&g=1", "display_name": "Denziloe", "link": "https://stackoverflow.com/users/5506894/denziloe"}, "edited": false, "score": 1, "creation_date": 1536783689, "post_id": 52302837, "comment_id": 91553506, "body": "@Denziloe Are your guesses based on any facts whatsoever?"}, {"owner": {"reputation": 5135, "user_id": 5506894, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jSK1.jpg?s=128&g=1", "display_name": "Denziloe", "link": "https://stackoverflow.com/users/5506894/denziloe"}, "reply_to_user": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 1, "creation_date": 1536783781, "post_id": 52302837, "comment_id": 91553552, "body": "@zvone Only that I know MATLAB builtins use multithreading whereas Python tends not to."}, {"owner": {"reputation": 5135, "user_id": 5506894, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jSK1.jpg?s=128&g=1", "display_name": "Denziloe", "link": "https://stackoverflow.com/users/5506894/denziloe"}, "edited": false, "score": 0, "creation_date": 1536783812, "post_id": 52302837, "comment_id": 91553568, "body": "@Thomas By the way, are you only timing the svd function, or the whole thing?"}, {"owner": {"reputation": 141, "user_id": 7569232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E1FIK.jpg?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/7569232/thomas"}, "reply_to_user": {"reputation": 5135, "user_id": 5506894, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jSK1.jpg?s=128&g=1", "display_name": "Denziloe", "link": "https://stackoverflow.com/users/5506894/denziloe"}, "edited": false, "score": 0, "creation_date": 1536783871, "post_id": 52302837, "comment_id": 91553592, "body": "@Denziloe the whole thing for both codes"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1536783876, "post_id": 52302837, "comment_id": 91553597, "body": "In Octave the MATLAB code is noticeably longer than the numpy code."}, {"owner": {"reputation": 5135, "user_id": 5506894, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jSK1.jpg?s=128&g=1", "display_name": "Denziloe", "link": "https://stackoverflow.com/users/5506894/denziloe"}, "edited": false, "score": 0, "creation_date": 1536783950, "post_id": 52302837, "comment_id": 91553627, "body": "@Thomas In which case you should isolate the timing of <code>svd</code> if that&#39;s what you&#39;re interested in. <code>randn</code> may have different functionality / implementations."}, {"owner": {"reputation": 15917, "user_id": 5211833, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Pyme2.jpg?s=128&g=1", "display_name": "Adriaan", "link": "https://stackoverflow.com/users/5211833/adriaan"}, "edited": false, "score": 0, "creation_date": 1536783954, "post_id": 52302837, "comment_id": 91553631, "body": "<code>svd</code> is basically a couple of matrix multiplications, and the proposed dupe tells you why MATLAB&#39;s so fast in it."}, {"owner": {"reputation": 5135, "user_id": 5506894, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jSK1.jpg?s=128&g=1", "display_name": "Denziloe", "link": "https://stackoverflow.com/users/5506894/denziloe"}, "edited": false, "score": 0, "creation_date": 1536783962, "post_id": 52302837, "comment_id": 91553635, "body": "Source for MATLAB svd multithreaded: <a href=\"https://uk.mathworks.com/discovery/matlab-multicore.html\" rel=\"nofollow noreferrer\">uk.mathworks.com/discovery/matlab-multicore.html</a>"}, {"owner": {"reputation": 141, "user_id": 7569232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E1FIK.jpg?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/7569232/thomas"}, "reply_to_user": {"reputation": 5135, "user_id": 5506894, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jSK1.jpg?s=128&g=1", "display_name": "Denziloe", "link": "https://stackoverflow.com/users/5506894/denziloe"}, "edited": false, "score": 0, "creation_date": 1536784077, "post_id": 52302837, "comment_id": 91553690, "body": "@Denziloe only timing the svd for both codes lead to really close computation times. I&#39;ll check these links, there might be a lot of relevant information in them"}, {"owner": {"reputation": 141, "user_id": 7569232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E1FIK.jpg?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/7569232/thomas"}, "edited": false, "score": 0, "creation_date": 1536784756, "post_id": 52302837, "comment_id": 91553942, "body": "There is a great answer made by @reverse_engineer in the similar question pointed out by Adriaan, my question is just a particular case of a more general one about matrix multiplication, I&#39;ll accept this post as being a duplicate"}, {"owner": {"reputation": 2352, "user_id": 5754992, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/953dd1892c726ceecc7f0240e982e11f?s=128&d=identicon&r=PG&f=1", "display_name": "user2699", "link": "https://stackoverflow.com/users/5754992/user2699"}, "edited": false, "score": 0, "creation_date": 1536785533, "post_id": 52302837, "comment_id": 91554280, "body": "I&#39;m voting to keep this open. The similar question only explains why matlab is faster than naively implemented c++ code, numpy should be taking advantage of similar optimizations."}, {"owner": {"reputation": 2352, "user_id": 5754992, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/953dd1892c726ceecc7f0240e982e11f?s=128&d=identicon&r=PG&f=1", "display_name": "user2699", "link": "https://stackoverflow.com/users/5754992/user2699"}, "edited": false, "score": 0, "creation_date": 1536786046, "post_id": 52302837, "comment_id": 91554454, "body": "More relevant questions are <a href=\"https://stackoverflow.com/questions/18516605/difference-on-performance-between-numpy-and-matlab\" title=\"difference on performance between numpy and matlab\">stackoverflow.com/questions/18516605/&hellip;</a> or <a href=\"https://stackoverflow.com/questions/41793670/why-matlab-matrix-inversion-is-faster-than-numpy?rq=1\" title=\"why matlab matrix inversion is faster than numpy\">stackoverflow.com/questions/41793670/&hellip;</a>"}, {"owner": {"reputation": 141, "user_id": 7569232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E1FIK.jpg?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/7569232/thomas"}, "edited": false, "score": 1, "creation_date": 1536853595, "post_id": 52302837, "comment_id": 91582011, "body": "Finally solved this issue thanks to a coworker, it turns out that my numpy library was outdated. A simple pip install numpy --upgrade and I was getting comparable computing times to matlab, about 0.6s"}], "owner": {"reputation": 141, "user_id": 7569232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E1FIK.jpg?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/7569232/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 284, "favorite_count": 0, "closed_date": 1536784766, "answer_count": 0, "score": 4, "last_activity_date": 1536783427, "creation_date": 1536783427, "question_id": 52302837, "link": "https://stackoverflow.com/questions/52302837/why-is-matlab-much-faster-than-python-for-svd", "closed_reason": "Duplicate", "title": "Why is MATLAB much faster than Python for svd?", "body": "<p>I'm considering using Python for my future codes but I'm surprised by the differences in computation time.</p>\n\n<p>For my example, I calculate the decomposition into singular values of a 1000x1000 random matrix, attached the two codes :</p>\n\n<p>Matlab (0.38s):</p>\n\n<pre><code>M = randn(1000,1000);\n[U,S,V] = svd(M);\n</code></pre>\n\n<p>Python (2.7s):</p>\n\n<pre><code>import numpy as np\nM = np.random.randn(1000,1000)\nU,S,V = np.linalg.svd(M)\n</code></pre>\n\n<p>Does the comparison between these two codes seem fair? \nI thought this type of functions were optimized in fortran/C langage for python, how is it possible that matlab is that faster in such conditions? </p>\n"}, {"tags": ["python", "webos", "lg", "smart-tv", "dlna"], "answers": [{"comments": [{"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1539688369, "post_id": 52832185, "comment_id": 92584234, "body": "While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - <a href=\"/review/low-quality-posts/21145250\">From Review</a>"}, {"owner": {"reputation": 30, "user_id": 10439677, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kBhY-zAU76k/AAAAAAAAAAI/AAAAAAAAOBg/W6eKW1ym1LE/photo.jpg?sz=128", "display_name": "lkrocek", "link": "https://stackoverflow.com/users/10439677/lkrocek"}, "reply_to_user": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1539760513, "post_id": 52832185, "comment_id": 92614131, "body": "this is not link for answer but for recommended software to use"}], "tags": [], "owner": {"reputation": 30, "user_id": 10439677, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kBhY-zAU76k/AAAAAAAAAAI/AAAAAAAAOBg/W6eKW1ym1LE/photo.jpg?sz=128", "display_name": "lkrocek", "link": "https://stackoverflow.com/users/10439677/lkrocek"}, "is_accepted": false, "score": -3, "last_activity_date": 1539690487, "last_edit_date": 1539690487, "creation_date": 1539681984, "answer_id": 52832185, "question_id": 52302767, "link": "https://stackoverflow.com/questions/52302767/dlna-server-in-python-in-home-network/52832185#52832185", "title": "DLNA Server in python in home network", "body": "<p>There is already server app doing it <a href=\"http://serviio.org/\" rel=\"nofollow noreferrer\">Serviio</a> I already using this on windows 10 and raspberry pi 2 and 3 and it works well, easy to setup by web app and you'll save a time with making your own solution.</p>\n"}], "owner": {"reputation": 600, "user_id": 8954551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd27429adfaf356a6d669375b6ed36bf?s=128&d=identicon&r=PG&f=1", "display_name": "Vito Lipari", "link": "https://stackoverflow.com/users/8954551/vito-lipari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 836, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1539690487, "creation_date": 1536783175, "question_id": 52302767, "link": "https://stackoverflow.com/questions/52302767/dlna-server-in-python-in-home-network", "title": "DLNA Server in python in home network", "body": "<p>In my pc, how can i listen incoming connection as a DLNA server?</p>\n\n<p>On my TV there is the possibility for get media from a DLNA server, i would write a simple python script that grant access at TV to my files.</p>\n\n<p>The ends are:</p>\n\n<ul>\n<li>LG webOS smartTV</li>\n<li>macOS</li>\n</ul>\n"}, {"tags": ["python", "jupyter-notebook"], "comments": [{"owner": {"reputation": 2934, "user_id": 3902974, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LpTxC.jpg?s=128&g=1", "display_name": "Natsfan", "link": "https://stackoverflow.com/users/3902974/natsfan"}, "edited": false, "score": 0, "creation_date": 1536783337, "post_id": 52302752, "comment_id": 91553377, "body": "Are you running in virtual environments?"}, {"owner": {"reputation": 99, "user_id": 10188973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdfb1bf118e50d985024f58e4e2f5ec6?s=128&d=identicon&r=PG&f=1", "display_name": "CD9999", "link": "https://stackoverflow.com/users/10188973/cd9999"}, "reply_to_user": {"reputation": 2934, "user_id": 3902974, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LpTxC.jpg?s=128&g=1", "display_name": "Natsfan", "link": "https://stackoverflow.com/users/3902974/natsfan"}, "edited": false, "score": 0, "creation_date": 1536783539, "post_id": 52302752, "comment_id": 91553433, "body": "No, I&#39;m not in any virtual environments."}, {"owner": {"reputation": 2934, "user_id": 3902974, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LpTxC.jpg?s=128&g=1", "display_name": "Natsfan", "link": "https://stackoverflow.com/users/3902974/natsfan"}, "edited": false, "score": 0, "creation_date": 1536784038, "post_id": 52302752, "comment_id": 91553668, "body": "If you are running Ubuntu you can try sudo apt-get install python."}], "answers": [{"tags": [], "owner": {"reputation": 99, "user_id": 10188973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdfb1bf118e50d985024f58e4e2f5ec6?s=128&d=identicon&r=PG&f=1", "display_name": "CD9999", "link": "https://stackoverflow.com/users/10188973/cd9999"}, "is_accepted": false, "score": 0, "last_activity_date": 1536783958, "creation_date": 1536783958, "answer_id": 52302958, "question_id": 52302752, "link": "https://stackoverflow.com/questions/52302752/jupyter-notebook-not-finding-python-module-that-is-definitely-installed/52302958#52302958", "title": "jupyter notebook not finding python module that is definitely installed", "body": "<p>I had installed Anaconda also, so I needed to open Anaconda Prompt and run conda install furl.</p>\n"}], "owner": {"reputation": 99, "user_id": 10188973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdfb1bf118e50d985024f58e4e2f5ec6?s=128&d=identicon&r=PG&f=1", "display_name": "CD9999", "link": "https://stackoverflow.com/users/10188973/cd9999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 317, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536783958, "creation_date": 1536783124, "question_id": 52302752, "link": "https://stackoverflow.com/questions/52302752/jupyter-notebook-not-finding-python-module-that-is-definitely-installed", "title": "jupyter notebook not finding python module that is definitely installed", "body": "<p>I have a Python script in Jupyter Notebook that has some module dependencies.</p>\n\n<p>Here is where I'm importing them:</p>\n\n<pre><code>import requests\nimport furl\nimport pandas as pd\nimport numpy as np\nimport json\n</code></pre>\n\n<p>When I run that code block in Jupyter, I get this error:</p>\n\n<pre><code>ModuleNotFoundError                       Traceback (most recent call last)\n&lt;ipython-input-21-9114a07a03b4&gt; in &lt;module&gt;()\n      1 import requests\n----&gt; 2 import furl\n      3 import pandas as pd\n      4 import numpy as np\n      5 import json\n\nModuleNotFoundError: No module named 'furl'\n</code></pre>\n\n<p>I have both Python 2.7 and 3.7 on my machine.  I have run both py -3 -m pip install furl and py -2 -m pip install furl to successfully install furl on both versions.</p>\n\n<p>Yet, I still get this module not found error.</p>\n\n<p>I have no idea what to do next.  Would be very grateful for any help.</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "dictionary", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": false, "score": 2, "last_activity_date": 1536782928, "creation_date": 1536782928, "answer_id": 52302704, "question_id": 52302645, "link": "https://stackoverflow.com/questions/52302645/convert-dictionary-unequal-items-to-data-frame/52302704#52302704", "title": "Convert Dictionary Unequal Items to Data-frame", "body": "<p>Transform your values to <code>pd.Series</code>:</p>\n\n<pre><code>df = pd.DataFrame({k:pd.Series(v) for k,v in dictionary.items()}).T\n\n              0      1         2\ntape       what   milk       NaN\nyup   chocolate  pizza  rainbows\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>df = pd.DataFrame.from_dict({k:pd.Series(v) for k,v in dictionary.items()},orient='index')\n\n              0      1         2\ntape       what   milk       NaN\nyup   chocolate  pizza  rainbows\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": false, "score": 5, "last_activity_date": 1536783279, "creation_date": 1536783279, "answer_id": 52302796, "question_id": 52302645, "link": "https://stackoverflow.com/questions/52302645/convert-dictionary-unequal-items-to-data-frame/52302796#52302796", "title": "Convert Dictionary Unequal Items to Data-frame", "body": "<p>Use <code>values</code> for values and <code>keys</code> for index</p>\n\n<pre><code>df = pd.DataFrame(list(dictionary.values()), index=dictionary.keys())\n\n        0           1       2\nyup     chocolate   pizza   rainbows\ntape    what        milk    None\n</code></pre>\n\n<p>If need the column named <code>index</code></p>\n\n<pre><code>df.reset_index()\n\n    index   0           1       2\n0   yup     chocolate   pizza   rainbows\n1   tape    what        milk    None\n</code></pre>\n"}], "owner": {"reputation": 577, "user_id": 10209499, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Z61xy9mE50w/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oAmAsQVz5u8JEjZ4Zlf3NNzI1Nug/mo/photo.jpg?sz=128", "display_name": "Maria Nazari", "link": "https://stackoverflow.com/users/10209499/maria-nazari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1642, "favorite_count": 1, "closed_date": 1536783264, "answer_count": 2, "score": 0, "last_activity_date": 1536783279, "creation_date": 1536782698, "question_id": 52302645, "link": "https://stackoverflow.com/questions/52302645/convert-dictionary-unequal-items-to-data-frame", "closed_reason": "Duplicate", "title": "Convert Dictionary Unequal Items to Data-frame", "body": "<p>I have a dictionary that has 3000 keys and each key has a list as its value,</p>\n\n<p>example:</p>\n\n<pre><code>dictionary = {'yup': ['chocolate', 'pizza', 'rainbows'], 'tape': ['what', 'milk'], ....}\n</code></pre>\n\n<p>I want to convert this dictionary into a database but since I have unequal values I am unable to use the pandas command \"<code>pd.DataFrame(dictionary)</code>\". I received the error message \"arrays must all be same length\". </p>\n\n<p>My question is, how do I still create a data frame (transpose it) and have the empty cells where there isn't data.</p>\n\n<p>Example:</p>\n\n<pre><code>index   column1      column2   column3 \n\n`'yup'  'chocolate'  'pizza'    'rainbows`'\n\n'tape'  'what'       'milk'     blank\n</code></pre>\n"}, {"tags": ["python", "django", "python-requests"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1536783034, "post_id": 52302639, "comment_id": 91553258, "body": "What is the value of <code>ss</code> here?"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1536783070, "post_id": 52302639, "comment_id": 91553274, "body": "rec_id is a list of dictionaries."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 1, "creation_date": 1536783110, "post_id": 52302639, "comment_id": 91553291, "body": "@DanielRoseman: no it is one dictionary, notice the <code>[0]</code> at the end. But anyway, this is defintely not the way to go."}, {"owner": {"reputation": 421, "user_id": 9766402, "user_type": "registered", "profile_image": "https://graph.facebook.com/2016722778361073/picture?type=large", "display_name": "Andy Nguyen", "link": "https://stackoverflow.com/users/9766402/andy-nguyen"}, "edited": false, "score": 0, "creation_date": 1536786930, "post_id": 52302639, "comment_id": 91554777, "body": "Well, ideally I am looking for the solution to calling the date. Even though the method of the creation of the dictionary may be questionable. When I call other values it works perfectly."}], "answers": [{"tags": [], "owner": {"reputation": 13134, "user_id": 9225671, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y1fpFhWva_w/AAAAAAAAAAI/AAAAAAAAAC8/weHLi_-bFj8/photo.jpg?sz=128", "display_name": "Ralf", "link": "https://stackoverflow.com/users/9225671/ralf"}, "is_accepted": true, "score": 0, "last_activity_date": 1536843360, "creation_date": 1536843360, "answer_id": 52314228, "question_id": 52302639, "link": "https://stackoverflow.com/questions/52302639/troubles-pulling-up-the-date-from-my-object/52314228#52314228", "title": "Troubles pulling up the Date from my object", "body": "<p>You just have a small misconception: the dict <code>rec_id</code> contains all fields as keys. You need to get the fields value (which is also the dict value) first, and then call methods an it.</p>\n\n<p>And also, you seem to have misspelled the fields name: it should be <code>date_paid</code> and not <code>paid_date</code>.</p>\n\n<p>So change this line:</p>\n\n<pre><code>... = str(rec_id['paid_date.date()'])\n</code></pre>\n\n<p>to this</p>\n\n<pre><code>... = str(rec_id['date_paid'].date())\n</code></pre>\n"}], "owner": {"reputation": 421, "user_id": 9766402, "user_type": "registered", "profile_image": "https://graph.facebook.com/2016722778361073/picture?type=large", "display_name": "Andy Nguyen", "link": "https://stackoverflow.com/users/9766402/andy-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 52314228, "answer_count": 1, "score": 1, "last_activity_date": 1536843360, "creation_date": 1536782655, "last_edit_date": 1536843135, "question_id": 52302639, "link": "https://stackoverflow.com/questions/52302639/troubles-pulling-up-the-date-from-my-object", "title": "Troubles pulling up the Date from my object", "body": "<p>I have the following model set up:</p>\n\n<pre><code>class ReceiverActions(models.Model):\n    ...\n    date_paid = models.DateTimeField(default=datetime.now)\n</code></pre>\n\n<p>and I am trying to grab just the date. When I run this in my shell:</p>\n\n<pre><code>ReceiverActions.objects.get(identifier=\"JLWY25B4\").date_paid.date\n</code></pre>\n\n<p>I get the appropriate date : <code>2018-08-12</code></p>\n\n<p>but when I try to call it in my views:</p>\n\n<pre><code>ra = list(ReceiverActions.objects.filter(\n    seller_inventory=ss).values().order_by('id'))\nrec_id = [\n    x\n    for x in ra\n    if x['seller_inventory_id'] == inventory['id']][0]\ninfo['paid_date'] = str(rec_id['paid_date.date()'])\n</code></pre>\n\n<p>I am getting undefined.</p>\n\n<p>I have also tried <code>['paid_date__date']</code> and <code>['paid_date.date']</code></p>\n\n<p>Does anyone know why this is not working?</p>\n\n<p>Edit: When I call other values such as <code>red_id['identifier']</code> it works perfectly.</p>\n"}, {"tags": ["python", "pandas", "group-by"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 2, "creation_date": 1536782751, "post_id": 52302605, "comment_id": 91553143, "body": "<code>df.groupby([&#39;ID&#39;, df.date.dt.month])[&#39;values&#39;].apply(lambda x: x.mode())</code>"}, {"owner": {"reputation": 11191, "user_id": 5224926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f280a3c82415bdba68680536e277e19b?s=128&d=identicon&r=PG&f=1", "display_name": "Randy", "link": "https://stackoverflow.com/users/5224926/randy"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1536783186, "post_id": 52302605, "comment_id": 91553321, "body": "@user3483203 you should make that an answer, though I think it will currently break if there&#39;s multiple years represented in the dates"}], "answers": [{"comments": [{"owner": {"reputation": 4457, "user_id": 3590067, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100003877435114/picture?type=large", "display_name": "emax", "link": "https://stackoverflow.com/users/3590067/emax"}, "edited": false, "score": 0, "creation_date": 1536783716, "post_id": 52302774, "comment_id": 91553519, "body": "This solution is great but my problem is that this command <code>df[&#39;YearMonth&#39;] = df.date.dt.to_period(&#39;M&#39;)</code> takes infinite time and I don&#39;t know why."}, {"owner": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "reply_to_user": {"reputation": 4457, "user_id": 3590067, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100003877435114/picture?type=large", "display_name": "emax", "link": "https://stackoverflow.com/users/3590067/emax"}, "edited": false, "score": 0, "creation_date": 1536849994, "post_id": 52302774, "comment_id": 91579894, "body": "@emax, I hope this doesn&#39;t come off as insulting, but upvoting the answer would have taken less time than typing that comment :P"}, {"owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "reply_to_user": {"reputation": 4457, "user_id": 3590067, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100003877435114/picture?type=large", "display_name": "emax", "link": "https://stackoverflow.com/users/3590067/emax"}, "edited": false, "score": 0, "creation_date": 1536856948, "post_id": 52302774, "comment_id": 91583742, "body": "@emax, even for the dummy dataset, grouping over year and month (my last solution) is taking 4.6 ms vis-a-vis 8.66 ms with my original solution using to_period"}], "tags": [], "owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "is_accepted": false, "score": 0, "last_activity_date": 1536784180, "last_edit_date": 1536784180, "creation_date": 1536783197, "answer_id": 52302774, "question_id": 52302605, "link": "https://stackoverflow.com/questions/52302605/pandas-how-to-get-most-frequent-value-in-a-month-for-each-id/52302774#52302774", "title": "Pandas: how to get most frequent value in a month for each ID?", "body": "<p>You can create a year month column and then group</p>\n\n<pre><code>df['date'] = pd.to_datetime(df['date'])\ndf['YearMonth'] = df.date.dt.to_period('M')\ndf.groupby('ID')['YearMonth','values'].apply(lambda x: x.mode().iloc[0]).reset_index()\n\n\n    ID  YearMonth   values\n0   0   2017-01     55\n1   1   2017-01     78\n</code></pre>\n\n<p>If you want the most frequent value by ID and yearmonth, change the last line to</p>\n\n<pre><code>df.groupby(['ID', 'YearMonth'])['values'].apply(lambda x: x.mode()[0]).reset_index()\n</code></pre>\n\n<p>If you are not able to convert date column to period, use</p>\n\n<pre><code>df.groupby(['ID', df.date.dt.year.rename('Year'), df.date.dt.month.rename('Month')])['values'].apply(lambda x: x.mode()[0]).reset_index()\n\n    ID  Year    Month   values\n0   0   2017    1       55\n1   1   2017    1       78\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4457, "user_id": 3590067, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100003877435114/picture?type=large", "display_name": "emax", "link": "https://stackoverflow.com/users/3590067/emax"}, "edited": false, "score": 0, "creation_date": 1536784077, "post_id": 52302794, "comment_id": 91553689, "body": "This solution is great but my problem is that this command <code>df[&#39;YearMonth&#39;] = df.date.dt.to_period(&#39;M&#39;)</code> takes infinite time and I don&#39;t know why"}, {"owner": {"reputation": 4457, "user_id": 3590067, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100003877435114/picture?type=large", "display_name": "emax", "link": "https://stackoverflow.com/users/3590067/emax"}, "edited": false, "score": 0, "creation_date": 1536826266, "post_id": 52302794, "comment_id": 91565684, "body": "It is <code>(56462685, 3)</code>"}, {"owner": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "reply_to_user": {"reputation": 4457, "user_id": 3590067, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100003877435114/picture?type=large", "display_name": "emax", "link": "https://stackoverflow.com/users/3590067/emax"}, "edited": false, "score": 0, "creation_date": 1536850737, "post_id": 52302794, "comment_id": 91580352, "body": "54 million rows would explain why <code>.dt.to_period</code> takes a little while. On my mid-2015 MacBook Pro, 5.4 million rows of random dates takes ~8 s. Try giving it a few minutes."}], "tags": [], "owner": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "is_accepted": false, "score": 1, "last_activity_date": 1536783262, "creation_date": 1536783262, "answer_id": 52302794, "question_id": 52302605, "link": "https://stackoverflow.com/questions/52302605/pandas-how-to-get-most-frequent-value-in-a-month-for-each-id/52302794#52302794", "title": "Pandas: how to get most frequent value in a month for each ID?", "body": "<p>This solution is an improvement on the answer in the comments. It matches your expected output more closely.</p>\n\n<pre><code>(df.groupby(['ID', df.date.dt.to_period('M')])\n.values\n.apply(lambda x: x.mode()[0])\n.reset_index()\n.rename({'date': 'YearMonth'}, axis=1)\n)\n   ID YearMonth  values\n0   0   2017-01      55\n1   1   2017-01      78\n</code></pre>\n"}], "owner": {"reputation": 4457, "user_id": 3590067, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100003877435114/picture?type=large", "display_name": "emax", "link": "https://stackoverflow.com/users/3590067/emax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 785, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1536784180, "creation_date": 1536782500, "question_id": 52302605, "link": "https://stackoverflow.com/questions/52302605/pandas-how-to-get-most-frequent-value-in-a-month-for-each-id", "title": "Pandas: how to get most frequent value in a month for each ID?", "body": "<p>I have a dataframe <code>df</code> like the following:</p>\n\n<pre><code>df\n     ID        date          values\n0     0     2017-01-05         55\n1     0     2017-01-08         55\n2     0     2017-01-09         33\n3     1     2017-01-05         27\n4     1     2017-01-08         78\n5     1     2017-01-09         78\n</code></pre>\n\n<p>I would like to get the most frequent value for each month and for each ID, so</p>\n\n<pre><code>df1\n     ID    YearMonth   value\n0    0      2017-01      55\n1    1      2017-01      78\n</code></pre>\n"}, {"tags": ["python", "kivy"], "answers": [{"comments": [{"owner": {"reputation": 128, "user_id": 4962905, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rpyBlUUASUc/AAAAAAAAAAI/AAAAAAAAAPU/ChX0lu1gF1g/photo.jpg?sz=128", "display_name": "Nicolas Shu", "link": "https://stackoverflow.com/users/4962905/nicolas-shu"}, "edited": false, "score": 0, "creation_date": 1537381531, "post_id": 52303318, "comment_id": 91767872, "body": "You&#39;re a genius! Thank you!"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 3, "last_activity_date": 1536785567, "creation_date": 1536785567, "answer_id": 52303318, "question_id": 52302599, "link": "https://stackoverflow.com/questions/52302599/properly-using-kv-files-for-kivy-and-importing-them-to-your-python-script/52303318#52303318", "title": "Properly using .kv Files for Kivy and importing them to your Python script", "body": "<p>According to the <a href=\"https://kivy.org/doc/stable/guide/lang.html#how-to-load-kv\" rel=\"nofollow noreferrer\">docs</a> you have 2 possibilities:</p>\n\n<h3>1.</h3>\n\n<blockquote>\n  <p>By name convention:</p>\n  \n  <p>Kivy looks for a Kv file with the same name as your App class in lowercase, minus \u201cApp\u201d if it ends with \u2018App\u2019 e.g:</p>\n  \n  <p>MyApp -> my.kv </p>\n  \n  <p>If this file defines a Root Widget it will be attached to the App\u2019s root attribute and used as the base of the application widget tree.</p>\n</blockquote>\n\n<p>So you must change the name of the .kv to lowercase, and change the name of class App to end in App:</p>\n\n<p><strong>simplekivy3.kv</strong></p>\n\n<pre><code>&lt;Button&gt;:\n    font_size: 40\n    size: 170,75\n    color: 0,1,0,1\n\n&lt;Widgets&gt;:\n    Button:\n        pos: root.x, root.top - self.height\n        text: \"Kivy\"\n\n    Button:\n        pos: 170,0\n        text: \"Tutorials\"\n</code></pre>\n\n<p><strong>*.py</strong></p>\n\n<pre><code>from kivy.app import App  \nfrom kivy.uix.widget import Widget  \n\nclass Widgets(Widget):\n    pass\n\nclass SimpleKivy3App(App):\n    def build(self):\n        return Widgets()\n\nif __name__ == \"__main__\":\n    SimpleKivy3App().run()\n</code></pre>\n\n<hr>\n\n<h3>2.</h3>\n\n<blockquote>\n  <p>Builder: You can tell Kivy to directly load a string or a file. If\n  this string or file defines a root widget, it will be returned by the\n  method:</p>\n  \n  <p>Builder.load_file('path/to/file.kv')</p>\n</blockquote>\n\n<pre><code>from kivy.app import App   \nfrom kivy.uix.widget import Widget  \nfrom kivy.lang import Builder\n\n\nclass Widgets(Widget):\n    pass\n\nBuilder.load_file('SimpleKivy3.kv')\n\n\nclass SimpleKivy3(App):\n    def build(self):\n        return Widgets()\n\n\nif __name__ == \"__main__\":\n    SimpleKivy3().run()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ebYKw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ebYKw.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 128, "user_id": 4962905, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rpyBlUUASUc/AAAAAAAAAAI/AAAAAAAAAPU/ChX0lu1gF1g/photo.jpg?sz=128", "display_name": "Nicolas Shu", "link": "https://stackoverflow.com/users/4962905/nicolas-shu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1021, "favorite_count": 0, "accepted_answer_id": 52303318, "answer_count": 1, "score": 3, "last_activity_date": 1536785567, "creation_date": 1536782463, "question_id": 52302599, "link": "https://stackoverflow.com/questions/52302599/properly-using-kv-files-for-kivy-and-importing-them-to-your-python-script", "title": "Properly using .kv Files for Kivy and importing them to your Python script", "body": "<p>I am following <a href=\"https://pythonprogramming.net/dynamic-kivy-content-placement/?completed=/more-kivy-language/\" rel=\"nofollow noreferrer\">tutorials for Kivy</a> and I haven't been able to properly load properties from .kv files. For some reason, I am able to sometimes pull .kv files via a <code>for kv in listdir(kv_path): Builder.load_file(kv_path+kv)</code>, but I can't do it by simply putting the kv files in the same root directory and letting it \"import by itself?\"</p>\n\n<p>As an example, when using the files:<br>\nmain.py  </p>\n\n<pre><code>from kivy.app import App  \nfrom kivy.uix.label import Label   \nfrom kivy.uix.widget import Widget  \n\nclass Widgets(Widget):\n    pass\nclass SimpleKivy3(App):\n    def build(self):\n        return Widgets()\n\nif __name__ == \"__main__\":\n    SimpleKivy3().run()\n</code></pre>\n\n<p>SimpleKivy3.kv </p>\n\n<pre><code>&lt;Button&gt;:\n    font_size: 40\n    size: 170,75\n    color: 0,1,0,1\n\n&lt;Widgets&gt;:\n    Button:\n        pos: root.x, root.top - self.height\n        text: \"Kivy\"\n\n    Button:\n        pos: 170,0\n        text: \"Tutorials\"\n</code></pre>\n\n<p>I obtain the following output on my Terminal: </p>\n\n<pre><code>$ python main.py \n[INFO   ] [Logger      ] Record log in /home/nickshu/.kivy/logs/kivy_18-09-12_58.txt\n[INFO   ] [Kivy        ] v1.11.0.dev0, git-038acbf, 20180912\n[INFO   ] [Python      ] v3.6.5 |Anaconda, Inc.| (default, Apr 29 2018, 16:14:56) \n[GCC 7.2.0]\n[INFO   ] [Factory     ] 195 symbols loaded\n[INFO   ] [Image       ] Providers: img_tex, img_dds, img_sdl2, img_pil, img_gif (img_ffpyplayer ignored)\n[INFO   ] [Text        ] Provider: sdl2\n[INFO   ] [Window      ] Provider: sdl2(['window_egl_rpi'] ignored)\n[INFO   ] [GL          ] Using the \"OpenGL\" graphics system\n[INFO   ] [GL          ] Backend used &lt;gl&gt;\n[INFO   ] [GL          ] OpenGL version &lt;b'3.0 Mesa 18.0.5'&gt;\n[INFO   ] [GL          ] OpenGL vendor &lt;b'Intel Open Source Technology Center'&gt;\n[INFO   ] [GL          ] OpenGL renderer &lt;b'Mesa DRI Intel(R) HD Graphics P630 (Kaby Lake GT2) '&gt;\n[INFO   ] [GL          ] OpenGL parsed version: 3, 0\n[INFO   ] [GL          ] Shading version &lt;b'1.30'&gt;\n[INFO   ] [GL          ] Texture max size &lt;16384&gt;\n[INFO   ] [GL          ] Texture max units &lt;32&gt;\n[INFO   ] [Window      ] auto add sdl2 input provider\n[INFO   ] [Window      ] virtual keyboard not allowed, single mode, not docked\n[INFO   ] [ProbeSysfs  ] device match: /dev/input/event6\n[INFO   ] [MTD         ] Read event from &lt;/dev/input/event6&gt;\n[INFO   ] [Base        ] Start application main loop\n[INFO   ] [MTD         ] &lt;/dev/input/event6&gt; range position X is 1266 - 5676\n[INFO   ] [MTD         ] &lt;/dev/input/event6&gt; range position Y is 1094 - 4762\n[INFO   ] [MTD         ] &lt;/dev/input/event6&gt; range touch major is 0 - 0\n[INFO   ] [MTD         ] &lt;/dev/input/event6&gt; range touch minor is 0 - 0\n[INFO   ] [MTD         ] &lt;/dev/input/event6&gt; range pressure is 0 - 255\n[INFO   ] [MTD         ] &lt;/dev/input/event6&gt; axes invertion: X is 0, Y is 0\n[INFO   ] [MTD         ] &lt;/dev/input/event6&gt; rotation set to 0\n</code></pre>\n\n<p>The following window shows!\n<a href=\"https://i.stack.imgur.com/c8AoV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c8AoV.png\" alt=\"enter image description here\"></a></p>\n\n<p>Does anyone know what am I doing wrong? These are my permissions for <code>/dev/input/event6</code></p>\n\n<p><code>crwxrwxr-- 1 root input 13, 70 Sep 11 23:47 /dev/input/event6</code></p>\n\n<p>Thank you very much!</p>\n"}, {"tags": ["python", "xml", "suds", "workday-api"], "comments": [{"owner": {"reputation": 1556, "user_id": 5061821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3880a7c7ddf65d95ddd3152bd13a41b5?s=128&d=identicon&r=PG", "display_name": "Wyatt Shipman", "link": "https://stackoverflow.com/users/5061821/wyatt-shipman"}, "edited": false, "score": 0, "creation_date": 1539879859, "post_id": 52302593, "comment_id": 92670405, "body": "Does your SOAP-ENV namespace have characters between the - and E?"}], "owner": {"reputation": 21, "user_id": 10161868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e5a3ed011cfa7b656d05c02288f9b6?s=128&d=identicon&r=PG&f=1", "display_name": "Wvanas", "link": "https://stackoverflow.com/users/10161868/wvanas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1536782450, "creation_date": 1536782450, "question_id": 52302593, "link": "https://stackoverflow.com/questions/52302593/invalid-request-error-when-using-suds-client-to-upload-xml-data", "title": "Invalid Request Error when using suds client to upload XML data", "body": "<p>I am having trouble figuring out why this SOAP Request keeps giving me an 'Invalid request' error. I have to upload XML data into workday using the suds client. The XML code I am using works in Workday Studio, but when I copy the XML over to my python script, it gives me the error:  </p>\n\n<pre><code>suds.WebFault: Server raised fault: 'Invalid request'\n</code></pre>\n\n<p>I have added my code below that includes the XML that I am trying to submit. Any advice would be much appreciated!</p>\n\n<pre><code>xmlstring = \"\"\"&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;SOAP-ENV:Envelope xmlns:SOAP- \nENV=\"http://schemas.xmlsoap.org/soap/envelope/\" \nxmlns:bsvc=\"urn:com.workday/bsvc\"&gt;\n    &lt;SOAP-ENV:Header&gt; &lt;bsvc:Workday_Common_Header&gt; &lt;!--Optional:--&gt;\n&lt;bsvc:Include_Reference_Descriptors_In_Response&gt;true&lt;/bsvc:Include_Reference_Descriptors_In_Response&gt; &lt;/bsvc:Workday_Common_Header&gt;\n&lt;/SOAP-ENV:Header&gt;\n&lt;SOAP-ENV:Body&gt;\n    &lt;bsvc:Submit_Customer_Contract_Request\n        xmlns:wd=\"urn:com.workday/bsvc\"\n        wd:Add_Only=\"true\"\n        wd:version=\"v31.0\"&gt;\n        &lt;wd:Business_Process_Parameters&gt;\n            &lt;wd:Auto_Complete&gt;true&lt;/wd:Auto_Complete&gt;\n            &lt;wd:Comment_Data&gt;\n            &lt;/wd:Comment_Data&gt;\n         &lt;/wd:Business_Process_Parameters&gt;\n         &lt;wd:Customer_Contract_Data&gt;\n            &lt;wd:Submit&gt;true&lt;/wd:Submit&gt;\n            &lt;wd:Locked_in_Workday&gt;true&lt;/wd:Locked_in_Workday&gt;\n            &lt;wd:Company_Reference&gt;\n                &lt;wd:ID wd:type=\"Company_Reference_ID\"&gt;WEST&lt;/wd:ID&gt;\n            &lt;/wd:Company_Reference&gt;\n            &lt;wd:Multiple_Element_Revenue_Allocation&gt;true&lt;/wd:Multiple_Element_Revenue_Allocation&gt;\n            &lt;wd:Lower_Range_Percentage&gt;0&lt;/wd:Lower_Range_Percentage&gt;\n            &lt;wd:Upper_Range_Percentage&gt;0&lt;/wd:Upper_Range_Percentage&gt;\n            &lt;wd:Sold_To_Customer_Reference&gt;\n                &lt;wd:ID wd:type=\"Customer_ID\"&gt;CUS2998&lt;/wd:ID&gt;\n            &lt;/wd:Sold_To_Customer_Reference&gt;\n            &lt;wd:Customer_Contract_Type_Reference&gt;\n                &lt;wd:ID wd:type=\"Contract_Type_ID\"&gt;CCT_RENEWAL&lt;/wd:ID&gt;\n            &lt;/wd:Customer_Contract_Type_Reference&gt;\n            &lt;wd:Version&gt;0&lt;/wd:Version&gt;\n            &lt;wd:Contract_Description&gt;TEST INT&lt;/wd:Contract_Description&gt;\n            &lt;wd:Payment_Terms_Reference&gt;\n                &lt;wd:ID wd:type=\"Payment_Terms_ID\"&gt;NET30&lt;/wd:ID&gt;\n            &lt;/wd:Payment_Terms_Reference&gt;\n            &lt;wd:Customer_Contract_Effective_Date&gt;2018-09-11&lt;/wd:Customer_Contract_Effective_Date&gt;\n            &lt;wd:Contract_Signed_Date&gt;2018-09-11&lt;/wd:Contract_Signed_Date&gt;\n            &lt;wd:PO_Number&gt;PO666&lt;/wd:PO_Number&gt;\n            &lt;wd:Current_Contract_Amount&gt;666&lt;/wd:Current_Contract_Amount&gt;\n            &lt;wd:Contract_Notes&gt;Test Notes&lt;/wd:Contract_Notes&gt;\n            &lt;wd:Billing_Schedule_From_Date&gt;2018-09-11&lt;/wd:Billing_Schedule_From_Date&gt;\n            &lt;wd:Billing_Schedule_To_Date&gt;2018-09-11&lt;/wd:Billing_Schedule_To_Date&gt;\n            &lt;wd:Customer_Contract_Line_Replacement_Data&gt;\n                &lt;wd:Line_Number&gt;10&lt;/wd:Line_Number&gt;\n                &lt;wd:Sales_Item_Reference&gt;\n                    &lt;wd:ID wd:type=\"Sales_Item_ID\"&gt;SI_EXPRESS&lt;/wd:ID&gt;\n                &lt;/wd:Sales_Item_Reference&gt;\n                &lt;wd:Contract_Line_Type_Reference&gt;\n                    &lt;wd:ID wd:type=\"Contract_Line_Type_ID\"&gt;SUBSCRIPTION&lt;/wd:ID&gt;\n                &lt;/wd:Contract_Line_Type_Reference&gt;\n                &lt;wd:Customer_Contract_Line_Start_Date&gt;2018-09-11&lt;/wd:Customer_Contract_Line_Start_Date&gt;\n                &lt;wd:Customer_Contract_Line_End_Date&gt;2018-09-11&lt;/wd:Customer_Contract_Line_End_Date&gt;\n                &lt;wd:Contract_Line_Description&gt;Test Description&lt;/wd:Contract_Line_Description&gt;\n                &lt;wd:Quantity&gt;1&lt;/wd:Quantity&gt;\n                &lt;wd:Unit_of_Measure_Reference&gt;\n                    &lt;wd:ID wd:type=\"UN_CEFACT_Common_Code_ID\"&gt;UOM_SEAT&lt;/wd:ID&gt;\n                &lt;/wd:Unit_of_Measure_Reference&gt;\n                &lt;wd:Quantity_2&gt;1&lt;/wd:Quantity_2&gt;\n                &lt;wd:Unit_of_Measure_2_Reference&gt;\n                    &lt;wd:ID wd:type=\"UN_CEFACT_Common_Code_ID\"&gt;UOM_EACH&lt;/wd:ID&gt;\n                &lt;/wd:Unit_of_Measure_2_Reference&gt;\n                &lt;wd:Unit_Cost&gt;666&lt;/wd:Unit_Cost&gt;\n                &lt;wd:Extended_Amount&gt;666&lt;/wd:Extended_Amount&gt;\n                &lt;wd:Exclude_From_Calculation&gt;false&lt;/wd:Exclude_From_Calculation&gt;\n                &lt;wd:Renewable&gt;false&lt;/wd:Renewable&gt;\n                &lt;wd:New_Business&gt;true&lt;/wd:New_Business&gt;\n                &lt;wd:Deferred_Revenue&gt;true&lt;/wd:Deferred_Revenue&gt;\n                &lt;wd:Customer_Contract_Line_Revenue_Override_Amount&gt;0&lt;/wd:Customer_Contract_Line_Revenue_Override_Amount&gt;\n                &lt;wd:Default_Worktags_Reference&gt;\n                    &lt;wd:ID wd:type=\"Cost_Center_Reference_ID\"&gt;951&lt;/wd:ID&gt;\n                &lt;/wd:Default_Worktags_Reference&gt;\n            &lt;/wd:Customer_Contract_Line_Replacement_Data&gt;\n        &lt;/wd:Customer_Contract_Data&gt;\n    &lt;/bsvc:Submit_Customer_Contract_Request&gt;\n&lt;/SOAP-ENV:Body&gt;\n&lt;/SOAP-ENV:Envelope&gt;\"\"\"\n\nxml = Raw(xmlstring)\nprint(xml)\n\nresult = client.service.Submit_Customer_Contract(xml)\n</code></pre>\n"}, {"tags": ["python", "selenium-chromedriver"], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 7988541, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ri0KnhDszK8/AAAAAAAAAAI/AAAAAAAAFw0/KNHyY83xNek/photo.jpg?sz=128", "display_name": "Jack", "link": "https://stackoverflow.com/users/7988541/jack"}, "is_accepted": true, "score": 0, "last_activity_date": 1536849410, "creation_date": 1536849410, "answer_id": 52316078, "question_id": 52302568, "link": "https://stackoverflow.com/questions/52302568/automated-chromedriver-pdf-download-brings-up-button/52316078#52316078", "title": "Automated Chromedriver PDF Download Brings Up Button?", "body": "<p>I'm not sure why it worked but, I modified my profile variable to:</p>\n\n<pre><code>profile = {\n            \"plugins.plugins_list\": [{\"enabled\": False, \"name\": \"Chrome PDF Viewer\"}], # Disable Chrome's PDF Viewer\n           \"download.default_directory\": download_dir , \n           \"download.extensions_to_open\": \"applications/pdf\",\n           \"safebrowsing.enabled\": False\n           }\n</code></pre>\n\n<p>From there I was able to get a frame element on the page with the open button. One of the element attributes had a URL. When I instructed the browser to go to the URL, it downloaded the file to my specified directory!</p>\n\n<p><a href=\"https://i.stack.imgur.com/TT8xm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TT8xm.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 49, "user_id": 7988541, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ri0KnhDszK8/AAAAAAAAAAI/AAAAAAAAFw0/KNHyY83xNek/photo.jpg?sz=128", "display_name": "Jack", "link": "https://stackoverflow.com/users/7988541/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 414, "favorite_count": 0, "accepted_answer_id": 52316078, "answer_count": 1, "score": 0, "last_activity_date": 1536849410, "creation_date": 1536782359, "question_id": 52302568, "link": "https://stackoverflow.com/questions/52302568/automated-chromedriver-pdf-download-brings-up-button", "title": "Automated Chromedriver PDF Download Brings Up Button?", "body": "<p>I'm using Selenium to download an embedded pdf accessed through many complex layers of logins and other browser actions. I've set up my chromedriver with the following options per instruction from various other posts:</p>\n\n<pre><code>    chromedriver = r'C:\\Users\\cj9250\\AppData\\Local\\Continuum\\anaconda3\\chromedriver.exe'\n    download_dir = \"C:\\\\Users\\\\CJ9250\\\\Downloads\\\\\" # for linux/*nix, download_dir=\"/usr/Public\"\n\n    options = webdriver.ChromeOptions()\n    profile = {\n            \"plugins.plugins_list\": [{\"enabled\": False, \"name\": \"Chrome PDF Viewer\"}], \n           \"download.default_directory\": download_dir , \n           \"download.extensions_to_open\": \"applications/pdf\",\n           \"plugins.always_open_pdf_externally\": True,\n           \"download.prompt_for_download\": False,\n           \"safebrowsing.enabled\": True\n           }\n    options.add_experimental_option(\"prefs\", profile)\n    browser = webdriver.Chrome(chromedriver, chrome_options=options)\n</code></pre>\n\n<p>However, I get this box that I have to click before it downloads to my specified directory:</p>\n\n<p><a href=\"https://i.stack.imgur.com/C506M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C506M.png\" alt=\"enter image description here\"></a></p>\n\n<p>The 'Open' element doesn't have an xpath that I can find through the inspector. I'm guessing that this is some kind of internal security setting for the ChromeDriver but I can't find a way past it.</p>\n\n<p>My end goal is just to download a embedded PDF in an open Selenium Test page, this seemed the only suggested course of action.</p>\n\n<p>reportSho.do OPEN</p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1536782618, "post_id": 52302542, "comment_id": 91553094, "body": "Just copy your initial dict"}], "answers": [{"tags": [], "owner": {"reputation": 4136, "user_id": 1443098, "user_type": "registered", "accept_rate": 2, "profile_image": "https://www.gravatar.com/avatar/943c60e4b1686ea72a0dd48fd394dee4?s=128&d=identicon&r=PG", "display_name": "user1443098", "link": "https://stackoverflow.com/users/1443098/user1443098"}, "is_accepted": false, "score": 0, "last_activity_date": 1536782589, "creation_date": 1536782589, "answer_id": 52302624, "question_id": 52302542, "link": "https://stackoverflow.com/questions/52302542/decoupling-dictionaries-with-the-same-memory-address/52302624#52302624", "title": "decoupling dictionaries with the same memory address", "body": "<p>why not use the copy() method on the dictionary instead of assignment (which just binds the new name to the current dictionary)?</p>\n\n<pre><code>def collectResults(step):\n    new_results = results.copy()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 233, "user_id": 2817115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/566e25556dee204ed72da4dc5b3bcb5b?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Ong", "link": "https://stackoverflow.com/users/2817115/daniel-ong"}, "is_accepted": true, "score": 1, "last_activity_date": 1536782650, "creation_date": 1536782650, "answer_id": 52302636, "question_id": 52302542, "link": "https://stackoverflow.com/questions/52302542/decoupling-dictionaries-with-the-same-memory-address/52302636#52302636", "title": "decoupling dictionaries with the same memory address", "body": "<p>Use the <a href=\"https://docs.python.org/2/library/copy.html\" rel=\"nofollow noreferrer\"><code>copy</code> module</a> and replace <code>new_results = results</code> with something like <code>new_results = copy.deepcopy(results)</code>.</p>\n\n<p>The docs also have a good explanation of why this behavior is happening.</p>\n\n<blockquote>\n  <p>Assignment statements in Python do not copy objects, they create\n  bindings between a target and an object. For collections that are\n  mutable or contain mutable items, a copy is sometimes needed so one\n  can change one copy without changing the other. This module provides\n  generic shallow and deep copy operations (explained below).</p>\n</blockquote>\n"}], "owner": {"reputation": 27, "user_id": 2774338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1cc516042b5769b2ca187e51e6066b0?s=128&d=identicon&r=PG&f=1", "display_name": "Xzm", "link": "https://stackoverflow.com/users/2774338/xzm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 52302636, "answer_count": 2, "score": 0, "last_activity_date": 1536782650, "creation_date": 1536782276, "question_id": 52302542, "link": "https://stackoverflow.com/questions/52302542/decoupling-dictionaries-with-the-same-memory-address", "title": "decoupling dictionaries with the same memory address", "body": "<p>I have the following code:</p>\n\n<pre><code>results = {'location': [], 'analysis_Elem 1': [], 'analysis_Elem 2': [], 'analysis_Elem 3': []}\n\ndef collectResults(step):\n    new_results = results\n    for key in d: #here, d is another dictionary with a lot of results read from .csv file with the same keys as in the results dictionary\n        for line in d[key]:\n            if step in line[0]:\n                new_results[key].append(float(line[-1].strip())/1000)\n\n    for line in d[key]:\n        if step in line[0]:\n            new_results['location'].append(float(line[-4].strip()))\n\n    return new_results\n\nres1 = collectResults('Time-step 7')\nres2 = collectResults('Time -step 2')\n</code></pre>\n\n<p>In this function I am trying to collect results when the if statement is satisfied in a dictionary which consists of keys with corresponding empty lists. The idea is that every time the function collectResults() is called, I'd like to obtain results assigned to a variable; such as in the above res1, res2. The problem I have encountered is that line new_results = results causes that after calling the function for the second time, the dictionary new_results (and therefore also res2) includes the results from the first call extended with the second call. I am aware of the fact that they have the same memory address and this is the reason for overwriting. In case of lists, it could be easily solved with for example list(). I was not able to find a solution in the case of dictionaries. What needs to be done to obtain decoupled results for each call?</p>\n"}, {"tags": ["python", "string", "count", "find"], "comments": [{"owner": {"reputation": 465, "user_id": 9213601, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--DUcT6A6Ksc/AAAAAAAAAAI/AAAAAAAAABY/B3esFd2Izz0/photo.jpg?sz=128", "display_name": "Ghantey", "link": "https://stackoverflow.com/users/9213601/ghantey"}, "edited": false, "score": 0, "creation_date": 1536782454, "post_id": 52302509, "comment_id": 91553023, "body": "Hey what do you want your code to do? Do you want it to count the number of occurrence of word?"}, {"owner": {"reputation": 195, "user_id": 7510321, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ce473a31d2651473e9d0e407a95802dd?s=128&d=identicon&r=PG&f=1", "display_name": "Jewenile", "link": "https://stackoverflow.com/users/7510321/jewenile"}, "reply_to_user": {"reputation": 465, "user_id": 9213601, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--DUcT6A6Ksc/AAAAAAAAAAI/AAAAAAAAABY/B3esFd2Izz0/photo.jpg?sz=128", "display_name": "Ghantey", "link": "https://stackoverflow.com/users/9213601/ghantey"}, "edited": false, "score": 0, "creation_date": 1536782714, "post_id": 52302509, "comment_id": 91553128, "body": "The task is to return a dictionary with the words as keys and the occurences as values. Just as it does now. Only ignoring the words inside words. It is written in the question."}, {"owner": {"reputation": 233, "user_id": 2817115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/566e25556dee204ed72da4dc5b3bcb5b?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Ong", "link": "https://stackoverflow.com/users/2817115/daniel-ong"}, "edited": false, "score": 0, "creation_date": 1536782770, "post_id": 52302509, "comment_id": 91553156, "body": "It&#39;s worth noting that the collections module has a built in counter class: <a href=\"https://docs.python.org/3.7/library/collections.html#collections.Counter\" rel=\"nofollow noreferrer\">docs.python.org/3.7/library/&hellip;</a>"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1536783187, "post_id": 52302509, "comment_id": 91553322, "body": "Suggest you read <a href=\"https://meta.stackexchange.com/questions/19190/should-questions-include-tags-in-their-titles\">Should questions include \u201ctags\u201d in their titles?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 7510321, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ce473a31d2651473e9d0e407a95802dd?s=128&d=identicon&r=PG&f=1", "display_name": "Jewenile", "link": "https://stackoverflow.com/users/7510321/jewenile"}, "edited": false, "score": 0, "creation_date": 1536782993, "post_id": 52302595, "comment_id": 91553243, "body": "Thanks! Should have come to that myself. Works nice (up no now when the tutorial gave me a word containing an apostrophe that doesnt get counted correctly which I will, however, solve in the morning). Thanks anyway!"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 4, "last_activity_date": 1536783438, "last_edit_date": 1536783438, "creation_date": 1536782456, "answer_id": 52302595, "question_id": 52302509, "link": "https://stackoverflow.com/questions/52302509/check-for-whole-only-words-in-string/52302595#52302595", "title": "Check for (whole only) words in string", "body": "<p>you'd be better off <em>splitting</em> your sentence, then count the words, not the substrings:</p>\n\n<pre><code>textt=\"When I was One I had just begun When I was Two I was nearly new\"\nwwords=['i', 'was', 'three', 'near']\ntext_words = textt.lower().split()\nresult = {w:text_words.count(w) for w in wwords}\n\nprint(result)\n</code></pre>\n\n<p>prints:</p>\n\n<pre><code>{'three': 0, 'i': 4, 'near': 0, 'was': 3}\n</code></pre>\n\n<p>if the text has punctuation now, you're better off with regular expressions to split the string according to non-alphanum:</p>\n\n<pre><code>import re\n\ntextt=\"When I was One, I had just begun.I was Two when I was nearly new\"\n\nwwords=['i', 'was', 'three', 'near']\ntext_words = re.split(\"\\W+\",textt.lower())\nresult = {w:text_words.count(w) for w in wwords}\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>{'was': 3, 'near': 0, 'three': 0, 'i': 4}\n</code></pre>\n\n<p>(another alternative is to use <code>findall</code> on word characters: <code>text_words = re.findall(r\"\\w+\",textt.lower())</code>)</p>\n\n<p>Now if your list of \"important\" words is big, maybe it's better to count <em>all</em> the words, and filter afterwards, using the classical <code>collections.Counter</code>:</p>\n\n<pre><code>text_words = collections.Counter(re.split(\"\\W+\",textt.lower()))\nresult = {w:text_words.get(w) for w in wwords}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 465, "user_id": 9213601, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--DUcT6A6Ksc/AAAAAAAAAAI/AAAAAAAAABY/B3esFd2Izz0/photo.jpg?sz=128", "display_name": "Ghantey", "link": "https://stackoverflow.com/users/9213601/ghantey"}, "is_accepted": false, "score": 0, "last_activity_date": 1536785936, "creation_date": 1536785936, "answer_id": 52303401, "question_id": 52302509, "link": "https://stackoverflow.com/questions/52302509/check-for-whole-only-words-in-string/52303401#52303401", "title": "Check for (whole only) words in string", "body": "<p>Your simple solution would be this one:</p>\n\n<pre><code>from collections import Counter\n\ntextt=\"When I was One I had just begun When I was Two I was nearly new\".lower()\nwwords=['i', 'was', 'three', 'near']\n\ntxt = textt.split()\n\nkeys = Counter(txt)\n\nfor i in wwords:\n    print(i + ' : ' + str(keys[i]))\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 7510321, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ce473a31d2651473e9d0e407a95802dd?s=128&d=identicon&r=PG&f=1", "display_name": "Jewenile", "link": "https://stackoverflow.com/users/7510321/jewenile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 466, "favorite_count": 0, "accepted_answer_id": 52302595, "answer_count": 2, "score": 2, "last_activity_date": 1536785936, "creation_date": 1536782125, "last_edit_date": 1536783078, "question_id": 52302509, "link": "https://stackoverflow.com/questions/52302509/check-for-whole-only-words-in-string", "title": "Check for (whole only) words in string", "body": "<p>Training on Checkio. The task is called Popular words. The task is to search for words from a list (of strings) in a given string.</p>\n\n<p>For example:</p>\n\n<pre><code>textt=\"When I was One I had just begun When I was Two I was nearly new\"\n\nwwords=['i', 'was', 'three', 'near']\n</code></pre>\n\n<p>My code goes like:</p>\n\n<pre><code>def popular_words(text: str, words: list) -&gt; dict:\n    # your code here\n\n    occurence={}\n    text=text.lower()\n\n\n    for i in words:\n        occurence[i]=(text.count(i))\n\n    # incorrectly takes \"nearly\" as \"near\"\n\n\n    print(occurence)\n    return(occurence)\n\npopular_words(textt,wwords)\n</code></pre>\n\n<p>which works almost fine, returning</p>\n\n<pre><code>{'i': 4, 'was': 3, 'three': 0, 'near': 1} \n</code></pre>\n\n<p>thus counting \"near\" as a part of the \"nearly\". It was obviously the authors intention. I, however, cannot find a way to get aroud this other than</p>\n\n<pre><code>\"search for words that are not first (index 0) or last (last index) and for these that begin/end with whitespace\"\n</code></pre>\n\n<p>May I ask for a help, please? Building upon this rather childish code, please.</p>\n"}, {"tags": ["python", "regex", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1536782664, "post_id": 52302474, "comment_id": 91553113, "body": "Try <code>df[&#39;Exceptions&#39;] = df[&#39;ErrorMessage&#39;].str.extractall(r&quot;---&gt; ([^:]+)&quot;).apply(&quot;, &quot;.join)</code>"}, {"owner": {"reputation": 1, "user_id": 10353969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/859c4ce137b50f6060301c063e25f363?s=128&d=identicon&r=PG&f=1", "display_name": "lcan", "link": "https://stackoverflow.com/users/10353969/lcan"}, "reply_to_user": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1536783981, "post_id": 52302474, "comment_id": 91553643, "body": "@WiktorStribi\u017cew same result, my Exceptions column contains only NaN"}, {"owner": {"reputation": 1, "user_id": 10353969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/859c4ce137b50f6060301c063e25f363?s=128&d=identicon&r=PG&f=1", "display_name": "lcan", "link": "https://stackoverflow.com/users/10353969/lcan"}, "reply_to_user": {"reputation": 9258, "user_id": 5665870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQBw0.png?s=128&g=1", "display_name": "Sphinx", "link": "https://stackoverflow.com/users/5665870/sphinx"}, "edited": false, "score": 0, "creation_date": 1536784177, "post_id": 52302474, "comment_id": 91553721, "body": "@Sphinx yes, if I take the teststring and manually assign it as an element in my dataframe, it does work. The issue is that it does not work when the dataframe is populated by reading in the .csv. I will edit to show how I am reading in the data in the first place, perhaps that will help."}, {"owner": {"reputation": 1, "user_id": 10353969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/859c4ce137b50f6060301c063e25f363?s=128&d=identicon&r=PG&f=1", "display_name": "lcan", "link": "https://stackoverflow.com/users/10353969/lcan"}, "reply_to_user": {"reputation": 9258, "user_id": 5665870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQBw0.png?s=128&g=1", "display_name": "Sphinx", "link": "https://stackoverflow.com/users/5665870/sphinx"}, "edited": false, "score": 0, "creation_date": 1536784682, "post_id": 52302474, "comment_id": 91553911, "body": "@sphinx not sure I follow, I tested my regex against several entries that exist in the error message column of my dataframe, and the test string I used to demonstrate is copied from the first entry in that column. That&#39;s the key issue here: I know the regex returns something when applied to that string, it just does not work when applied to the dataframe directly."}, {"owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "edited": false, "score": 0, "creation_date": 1536788349, "post_id": 52302474, "comment_id": 91555330, "body": "str.extract will only find the first occurrence within the string <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.extract.html#pandas.Series.str.extract\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/generated/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "is_accepted": false, "score": 1, "last_activity_date": 1603935965, "last_edit_date": 1603935965, "creation_date": 1536788078, "answer_id": 52303796, "question_id": 52302474, "link": "https://stackoverflow.com/questions/52302474/pandas-regex-new-column-nan-but-regex-tester-shows-regex-is-valid/52303796#52303796", "title": "pandas regex new column nan - but regex tester shows regex is valid", "body": "<pre><code>teststring1 = &quot;&quot;&quot;Step 13 - Iteration 1 Failed: Action: &lt;Update Latest CC Exp Date Record from Epay Account \n                {DBServer;UserName;Password='', DatabaseName='',Year Offset='-10'}&gt; ---&gt; System.Data.SqlTypes.SqlNullValueException1: \n                Data is Null. This method or property cannotbecalled on Null values. ---&gt; System.Data.SqlTypes.SqlNullValueException2: Data is Null. \n                ---&gt; System.Data.SqlTypes.SqlNullValueException21:  ---&gt; System.Data.SqlTypes.SqlNullValueException22:  ---&gt; System.Data.SqlTypes.SqlNullValueException23: \n                ---&gt; System.Data.SqlTypes.SqlNullValueException24: &quot;&quot;&quot;\nteststring2 = &quot;&quot;&quot;Step 13 - Iteration 1 Failed: Action: &lt;Update Latest CC Exp Date Record from Epay Account \n                {DBServer;UserName;Password='', DatabaseName='',Year Offset='-10'}&gt; ---&gt; System.Data.SqlTypes.SqlNullValueException3: \n                Data is Null. This method or property cannotbecalled on Null values. ---&gt; System.Data.SqlTypes.SqlNullValueException4: Data is Null.&quot;&quot;&quot;\nteststring3 = &quot;&quot;&quot;Step 13 - Iteration 1 Failed: Action: &lt;Update Latest CC Exp Date Record from Epay Account \n                {DBServer;UserName;Password='', DatabaseName='',Year Offset='-10'}&gt; ---&gt; System.Data.SqlTypes.SqlNullValueException5: \n                Data is Null. This method or property cannotbecalled on Null values. ---&gt; System.Data.SqlTypes.SqlNullValueException6: Data is Null.&quot;&quot;&quot;\nteststring4 = &quot;&quot;&quot;Step 13 - Iteration 1 Failed: Action: &lt;Update Latest CC Exp Date Record from Epay Account \n                {DBServer;UserName;Password='', DatabaseName='',Year Offset='-10'}&gt; ---&gt; System.Data.SqlTypes.SqlNullValueException7: \n                Data is Null. This method or property cannotbecalled on Null values. ---&gt; System.Data.SqlTypes.SqlNullValueException8: Data is Null.&quot;&quot;&quot;\nteststring5 = &quot;&quot;&quot;Step 13 - Iteration 1 Failed: Action: &lt;Update Latest CC Exp Date Record from Epay Account \n                {DBServer;UserName;Password='', DatabaseName='',Year Offset='-10'}&gt; ---&gt; System.Data.SqlTypes.SqlNullValueException9: \n                Data is Null. This method or property cannotbecalled on Null values. ---&gt; System.Data.SqlTypes.SqlNullValueException10: Data is Null.&quot;&quot;&quot;\nteststring6 = &quot;&quot;&quot;Step 13 - Iteration 1 Failed: Action: &lt;Update Latest CC Exp Date Record from Epay Account \n                {DBServer;UserName;Password='', DatabaseName='',Year Offset='-10'}&gt; ---&gt; System.Data.SqlTypes.SqlNullValueException11: \n                Data is Null. This method or property cannotbecalled on Null values. ---&gt; System.Data.SqlTypes.SqlNullValueException12: Data is Null.&quot;&quot;&quot;\n\n\nvalues = [[teststring1], [teststring2], [teststring3], [teststring4], [teststring5], [teststring6]]\nheader = ['ErrorMessage']\n\ndf = pd.DataFrame(values, columns=header)\n\nexceptions = df['ErrorMessage'].str.extractall(r&quot;---&gt; ([^:]+): &quot;)\n</code></pre>\n<ul>\n<li><code>extractall</code> returns a new MultiIndex DataFrame, where the first index will match the original DataFrame index, and the second index will be the number of extractions or matches.  The original and new DataFrame are not compatible.</li>\n</ul>\n<pre class=\"lang-py prettyprint-override\"><code>                                                  0\n   match    \n0   0   System.Data.SqlTypes.SqlNullValueException1\n    1   System.Data.SqlTypes.SqlNullValueException2\n    2   System.Data.SqlTypes.SqlNullValueException21\n    3   System.Data.SqlTypes.SqlNullValueException22\n    4   System.Data.SqlTypes.SqlNullValueException23\n    5   System.Data.SqlTypes.SqlNullValueException24\n1   0   System.Data.SqlTypes.SqlNullValueException3\n    1   System.Data.SqlTypes.SqlNullValueException4\n2   0   System.Data.SqlTypes.SqlNullValueException5\n    1   System.Data.SqlTypes.SqlNullValueException6\n3   0   System.Data.SqlTypes.SqlNullValueException7\n    1   System.Data.SqlTypes.SqlNullValueException8\n4   0   System.Data.SqlTypes.SqlNullValueException9\n    1   System.Data.SqlTypes.SqlNullValueException10\n5   0   System.Data.SqlTypes.SqlNullValueException11\n    1   System.Data.SqlTypes.SqlNullValueException12\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10353969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/859c4ce137b50f6060301c063e25f363?s=128&d=identicon&r=PG&f=1", "display_name": "lcan", "link": "https://stackoverflow.com/users/10353969/lcan"}, "edited": false, "score": 0, "creation_date": 1536846209, "post_id": 52304481, "comment_id": 91577292, "body": "@sphinxI ran the following: mulIndexDataFrame = df[&#39;ErrorMessage&#39;].str.extractall(r&quot;---&gt; ([^:]+): &quot;) and it created a new dataframe (as expected) of size (0,1) and it&#39;s empty. That is not expected, I imagine. I think there must be something wrong with my original dataframe that I created by reading in the .csv, but I am not sure how to troubleshoot that."}, {"owner": {"reputation": 9258, "user_id": 5665870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQBw0.png?s=128&g=1", "display_name": "Sphinx", "link": "https://stackoverflow.com/users/5665870/sphinx"}, "reply_to_user": {"reputation": 1, "user_id": 10353969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/859c4ce137b50f6060301c063e25f363?s=128&d=identicon&r=PG&f=1", "display_name": "lcan", "link": "https://stackoverflow.com/users/10353969/lcan"}, "edited": false, "score": 0, "creation_date": 1536856401, "post_id": 52304481, "comment_id": 91583465, "body": "@Ican if so, try <code>mulIndexDataFrame = df[&#39;ErrorMessage&#39;].str.extractall(r&quot;([^\\n])&quot;)</code>, what is the output? what is the output?"}], "tags": [], "owner": {"reputation": 9258, "user_id": 5665870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQBw0.png?s=128&g=1", "display_name": "Sphinx", "link": "https://stackoverflow.com/users/5665870/sphinx"}, "is_accepted": false, "score": 0, "last_activity_date": 1536792697, "creation_date": 1536792697, "answer_id": 52304481, "question_id": 52302474, "link": "https://stackoverflow.com/questions/52302474/pandas-regex-new-column-nan-but-regex-tester-shows-regex-is-valid/52304481#52304481", "title": "pandas regex new column nan - but regex tester shows regex is valid", "body": "<p>As @Trenton_M pointed out, <strong>extractall returns a new MultiIndex DataFrame</strong>, so one solution is uses <code>groupby</code> then join all matched strings.</p>\n\n<p>Below is <strong>one simple demo</strong>:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\ndf = pd.DataFrame([\"\"\"\"Step 13 - Iteration 1 Failed: Action: &lt;Update Latest CC Exp \nDate Record from Epay Account {DBServer;UserName;Password='', \nDatabaseName='',Year Offset='-10'}&gt; ---&gt; 1System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or \nproperty cannotbecalled \non Null values. ---&gt; 2System.Data.SqlTypes.SqlNullValueException2: Data is Null.\"\"\"] * 2, columns=['ErrorMessage'])\n\nmulIndexDataFrame = df['ErrorMessage'].str.extractall(r\"---&gt; ([^:]+): \")\ndf['test'] = mulIndexDataFrame.groupby(mulIndexDataFrame.index.get_level_values(0))[0].apply(lambda x: ','.join(x))\nprint(df)\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>                                        ErrorMessage  \\\n0  \"Step 13 - Iteration 1 Failed: Action: &lt;Update...   \n1  \"Step 13 - Iteration 1 Failed: Action: &lt;Update...   \n\n                                                test  \n0  1System.Data.SqlTypes.SqlNullValueException,2S...  \n1  1System.Data.SqlTypes.SqlNullValueException,2S...  \n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10353969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/859c4ce137b50f6060301c063e25f363?s=128&d=identicon&r=PG&f=1", "display_name": "lcan", "link": "https://stackoverflow.com/users/10353969/lcan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1603935965, "creation_date": 1536781973, "last_edit_date": 1536784250, "question_id": 52302474, "link": "https://stackoverflow.com/questions/52302474/pandas-regex-new-column-nan-but-regex-tester-shows-regex-is-valid", "title": "pandas regex new column nan - but regex tester shows regex is valid", "body": "<p>I have a csv of error messages from test regression failures and I'm importing it into a pandas dataframe, but I want to find some substrings pertaining to the exceptions, specifically. </p>\n\n<p>I populate my dataframe with the contents of the .csv like so:</p>\n\n<pre><code>df = pd.read_csv('ErrorMessage3.csv', header=None, sep=',', \n             names=['ErrorMessage'])\n</code></pre>\n\n<p>I have the following regex and corresponding test string (which is the first entry in my dataframe column of error messages), which returns exactly what I want:</p>\n\n<pre><code>teststring = \"Step 13 - Iteration 1 Failed: Action: &lt;Update Latest CC Exp \nDate Record from Epay Account {DBServer;UserName;Password='', \nDatabaseName='',Year Offset='-10'}&gt; ---&gt; \nSystem.Data.SqlTypes.SqlNullValueException: Data is Null. This method or \nproperty cannotbecalled \non Null values. ---&gt; System.Data.SqlTypes.SqlNullValueException2: Data is Null.\"\n\nre.findall(r\"---&gt; ([^:]+): \", teststring)\n</code></pre>\n\n<p>which results in the following output:</p>\n\n<pre><code>['System.Data.SqlTypes.SqlNullValueException',\n 'System.Data.SqlTypes.SqlNullValueException2']\n</code></pre>\n\n<p>BUT I want to be able to add this as an 'Exceptions'  column in my dataframe. I thought this would work:</p>\n\n<pre><code>df['Exceptions'] = df['ErrorMessage'].str.extract(r\"---&gt; ([^:]+): \")\n</code></pre>\n\n<p>but when I run it, I get my 'Exceptions' column added, but NaN for all the rows. I verified that my ErrorMessage is object type, and I have used an online regex tester to verify that at least a subset of my ErrorMessage entries do indeed contain an exception that matches my regex. I have read some other stack overflow questions that seem very similar, but I'm not having much luck.</p>\n\n<p>Why does applying the regex to the dataframe yield nan, but applying it to the individual string returns what I want?</p>\n"}, {"tags": ["python", "pandas", "numpy", "pandas-groupby"], "answers": [{"tags": [], "owner": {"reputation": 1151, "user_id": 3280146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c4f2d0cfdd2ef32ac2535401d781e7a?s=128&d=identicon&r=PG&f=1", "display_name": "pradip", "link": "https://stackoverflow.com/users/3280146/pradip"}, "is_accepted": true, "score": 1, "last_activity_date": 1536782725, "creation_date": 1536782725, "answer_id": 52302657, "question_id": 52302465, "link": "https://stackoverflow.com/questions/52302465/grouping-multiple-rows-in-a-new-data-frame/52302657#52302657", "title": "Grouping multiple rows in a new data frame", "body": "<p>you can use <code>np.where</code> and then <code>groupby</code></p>\n\n<pre><code>df['Buy'] = np.where((df['Digit'] == 'F'), df['Term'], np.nan)\n\ndf['Sell'] = np.where((df['Digit'] == 'T'), df['Term'], np.nan)\n\ndf['BuyAmt'] = np.where((df['Digit'] == 'F'), df['Amt'], np.nan)\ndf['SellAmt'] = np.where((df['Digit'] == 'T'), df['Amt'], np.nan)\n\ndf.drop(['Digit','Base','Term','Amt'], axis=1, inplace= True)\n\ndf = df.groupby('ID').first()\n\nprint(df)\n    Name      Date  Buy Sell  BuyAmt  SellAmt\nID                                           \nA   BROD  2/3/2010  USD  JPY   100.0   9082.0\nB   SSBD  3/4/2007  EUR  JPY    60.0   7387.8\n</code></pre>\n\n<p>Also if you need your column in order like you posted, you can use <code>pandas reindex</code></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10355534, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--fnhZPk4OTo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMTKuC-FyCWv_TsVYez3oDXyPnNOw/mo/photo.jpg?sz=128", "display_name": "T Petersen", "link": "https://stackoverflow.com/users/10355534/t-petersen"}, "is_accepted": false, "score": 0, "last_activity_date": 1536788977, "creation_date": 1536788977, "answer_id": 52303970, "question_id": 52302465, "link": "https://stackoverflow.com/questions/52302465/grouping-multiple-rows-in-a-new-data-frame/52303970#52303970", "title": "Grouping multiple rows in a new data frame", "body": "<p>I assume duplicates should be dropped, else you need to explain better how identical rows should be handled:</p>\n\n<pre><code>&gt;&gt;&gt; df2 = df.drop_duplicates().reset_index(drop=True)\n</code></pre>\n\n<p>Then we create two dataframes, one for 'F' and one for 'T', create the <code>Buy</code>/<code>Sell</code> and <code>Buy Amt</code>/<code>Sell Amt</code> for each, and drop unused columns:</p>\n\n<pre><code>&gt;&gt;&gt; df_F = df2[df2.Digit == 'F'].assign(**{'Buy': lambda x: x.Term, 'Buy Amt': lambda x: x.Amt})\n...                             .drop(['Digit', 'Base', 'Term', 'Amt'], axis=1)\n&gt;&gt;&gt; df_T = df2[df2.Digit == 'T'].assign(**{'Sell': lambda x: x.Term, 'Sell Amt': lambda x: x.Amt})\n...                             .drop(['Digit', 'Base', 'Term', 'Amt'], axis=1)\n</code></pre>\n\n<p>Finally, we merge the two dataframes, and rearrange the column order:</p>\n\n<pre><code>&gt;&gt;&gt; merged = df_F.merge(df_T, on=['ID', 'Name', 'Date'])\n&gt;&gt;&gt; merged[['ID', 'Date', 'Name', 'Buy', 'Sell', 'Buy Amt', 'Sell Amt']]\n  ID      Date  Name  Buy Sell  Buy Amt  Sell Amt\n0  A  2/3/2010  BROD  USD  JPY    100.0    9082.0\n1  B  3/4/2007  SSBD  EUR  JPY     60.0    7387.8\n</code></pre>\n\n<p>That's it. If 'ID' should be the index, you can use <code>merged.set_index('ID')</code></p>\n"}], "owner": {"reputation": 57, "user_id": 3483327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ee851b88dfd7d30870e9b40b3d9ec40?s=128&d=identicon&r=PG&f=1", "display_name": "user3483327", "link": "https://stackoverflow.com/users/3483327/user3483327"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 0, "accepted_answer_id": 52302657, "answer_count": 2, "score": 1, "last_activity_date": 1536788977, "creation_date": 1536781928, "last_edit_date": 1536786130, "question_id": 52302465, "link": "https://stackoverflow.com/questions/52302465/grouping-multiple-rows-in-a-new-data-frame", "title": "Grouping multiple rows in a new data frame", "body": "<p>I am a python newbie working on version 2.7.  Below is a sample of the data frame that I am working with. There are additional columns that are not relevant to the problem so they are not included in the below.</p>\n\n<pre><code>df = pd.DataFrame( { \"Name\" : [\"BROD\", \"BROD\", \"BROD\", \"BROD\", \"SSBD\" , \"SSBD\",\"SSBD\",\"SSBD\"] , \n                     \"Digit\" : [\"F\", \"F\", \"T\", \"T\", \"F\", \"F\", \"T\", \"T\"],\n                     \"ID\": [\"A\",\"A\",\"A\",\"A\",\"B\",\"B\",\"B\",\"B\"],\n                     \"Date\": [\"2/3/2010\",\"2/3/2010\",\"2/3/2010\",\"2/3/2010\",\"3/4/2007\",\"3/4/2007\",\"3/4/2007\",\"3/4/2007\"],\n                     \"Base\" : [\"CAD\",\"CAD\",\"CAD\",\"CAD\",\"CAD\",\"CAD\",\"CAD\",\"CAD\"],\n                     \"Term\" : [\"USD\",\"USD\",\"JPY\",\"JPY\",\"EUR\",\"EUR\",\"JPY\",\"JPY\"],\n                     \"Amt\": [100.00,100.00,9082.00,9082.00,60.00,60.00,7387.80,7387.80]})\n</code></pre>\n\n<p>There are multiple duplicate values.  Each row represents a component of a trade and the ID column groups them into one trade.  I would like to create a new data frame that only includes one row for each trade.  The data frame would look like this:</p>\n\n<pre><code>ID    Date       Name     Buy   Sell    Buy Amt Sell Amt\nA    2/3/2010    BROD     USD   JPY     100.00   9082.00\nB    3/4/2007    SSBD     EUR   JPY     60.00    7387.80\n</code></pre>\n\n<p>Where for each ID, if the Digit = F then the value in the Term column is placed in the Buy column and the value in the Amt column is placed in the Buy Amt column.  If the Digit = T then the value in the Term column is placed in the Sell column and the value in the Amt column is placed in the Sell Amount column.</p>\n\n<p>Please point me in the right direction for the most efficient way to solve this problem.  Thanks.</p>\n"}, {"tags": ["python", "numpy", "multidimensional-array"], "answers": [{"comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1536789949, "post_id": 52302496, "comment_id": 91555791, "body": "You know something?  I still don&#39;t have a good handle on the <code>...</code>"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1536790599, "post_id": 52302496, "comment_id": 91555952, "body": "@piRSquared I remember losing a question to another answerer who did something similar... it really sticks when you learn it that way."}, {"owner": {"reputation": 2721, "user_id": 4372237, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/3XqU1.jpg?s=128&g=1", "display_name": "Mikhail Genkin", "link": "https://stackoverflow.com/users/4372237/mikhail-genkin"}, "edited": false, "score": 0, "creation_date": 1536790973, "post_id": 52302496, "comment_id": 91556063, "body": "Thanks for the answer. The documentation is not very specific, but it works great"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 3, "last_activity_date": 1536782290, "last_edit_date": 1536782290, "creation_date": 1536782043, "answer_id": 52302496, "question_id": 52302462, "link": "https://stackoverflow.com/questions/52302462/numpy-subscribing-outermost-dimension-in-multidimensional-array/52302496#52302496", "title": "Numpy: subscribing outermost dimension in multidimensional array", "body": "<p>Use the <a href=\"https://docs.python.org/3/library/constants.html#Ellipsis\" rel=\"nofollow noreferrer\">Ellipsis</a> to select all dimensions except the last (if there's only 1, nothing is selected).</p>\n\n<pre><code>for array in array_list:\n    array[..., 0:2] = 0\n</code></pre>\n"}], "owner": {"reputation": 2721, "user_id": 4372237, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/3XqU1.jpg?s=128&g=1", "display_name": "Mikhail Genkin", "link": "https://stackoverflow.com/users/4372237/mikhail-genkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 52302496, "answer_count": 1, "score": 2, "last_activity_date": 1536782290, "creation_date": 1536781920, "last_edit_date": 1536782239, "question_id": 52302462, "link": "https://stackoverflow.com/questions/52302462/numpy-subscribing-outermost-dimension-in-multidimensional-array", "title": "Numpy: subscribing outermost dimension in multidimensional array", "body": "<p>I am working with multiple multidimensional arrays. Let us consider dummy example for simplicity:</p>\n\n<pre><code> array_list=[np.ones(3), np.ones((3,3,3)), np.ones((3,3)), np.ones(3)]\n</code></pre>\n\n<p>I need to subscribe the outermost dimension of each array in the list. For example, my goal is to set some of the elements to zero according to a specified range in the outermost dimension:</p>\n\n<pre><code>array_list[0][0:2]=0\narray_list[1][:,:,0:2]=0\narray_list[2][:,0:2]=0\narray_list[3][0:2]=0\n</code></pre>\n\n<p>In my real application I don't know how many arrays I have and how many dimensions are in there.</p>\n\n<p>I would like to do the task in a for loop:</p>\n\n<pre><code>for array in array_list:\n    array[???]=0\n</code></pre>\n\n<p>But I am struggling how to implement this if I don't know the dimensionality of each array.</p>\n"}, {"tags": ["python", "numpy", "vector", "conditional"], "comments": [{"owner": {"reputation": 2116, "user_id": 7247547, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9edc71b8ad82b60fb9955e8adcede03a?s=128&d=identicon&r=PG&f=1", "display_name": "kevinkayaks", "link": "https://stackoverflow.com/users/7247547/kevinkayaks"}, "edited": false, "score": 0, "creation_date": 1536782518, "post_id": 52302458, "comment_id": 91553046, "body": "So every Zc[i] has a different shape in general?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1536782519, "post_id": 52302458, "comment_id": 91553048, "body": "Look at <code>(Zc==a[None,...]).all(axis=(1,2))</code>"}], "answers": [{"tags": [], "owner": {"reputation": 4365, "user_id": 8715278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9c1b29685540988d902a93290396918?s=128&d=identicon&r=PG&f=1", "display_name": "C. Braun", "link": "https://stackoverflow.com/users/8715278/c-braun"}, "is_accepted": true, "score": 0, "last_activity_date": 1536782929, "creation_date": 1536782929, "answer_id": 52302706, "question_id": 52302458, "link": "https://stackoverflow.com/questions/52302458/numpy-where-conditional-statement-along-axis-0/52302706#52302706", "title": "Numpy where conditional statement along axis 0", "body": "<p>Going off of hpaulj's comment:</p>\n\n<pre><code>&gt;&gt;&gt; allones = (Zc == np.array(np.ones(Zc[i].shape))).all(axis=(1,2))\n&gt;&gt;&gt; np.where(allones)[0][0]\n2\n</code></pre>\n"}], "owner": {"reputation": 2214, "user_id": 2864250, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/svmFB.jpg?s=128&g=1", "display_name": "dubbbdan", "link": "https://stackoverflow.com/users/2864250/dubbbdan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1489, "favorite_count": 0, "accepted_answer_id": 52302706, "answer_count": 1, "score": 1, "last_activity_date": 1536782929, "creation_date": 1536781906, "question_id": 52302458, "link": "https://stackoverflow.com/questions/52302458/numpy-where-conditional-statement-along-axis-0", "title": "Numpy where conditional statement along axis 0", "body": "<p>I have a 1D vector <code>Zc</code> containing n elements that are 2D arrays.  I want to find the index of each 2D array that equals <code>np.ones(Zc[i].shape)</code>.   </p>\n\n<pre><code>a = np.zeros((5,5))\nb = np.ones((5,5))*4\nc = np.ones((5,5))\nd = np.ones((5,5))*2\n\nZc = np.stack((a,b,c,d))\n\nfor i in range(len(Zc)):\n    a = np.ones(Zc[i].shape)\n    b = Zc[i]\n    if np.array_equal(a,b):\n        print(i)\n    else:\n        pass \n</code></pre>\n\n<p>Which returns <code>2</code>.  The code above works and returns the correct answer, but I want to know if there a vectorized way to achieve the same result?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 0, "creation_date": 1536782038, "post_id": 52302453, "comment_id": 91552870, "body": "What do you want to be the value of the expression <code>&quot;Student 1&quot;[&quot;Topic 1&quot;]</code>? <code>&quot;Student 1&quot;</code> does not have an index <code>&quot;Topic 1&quot;</code>, so...?"}, {"owner": {"reputation": 1154, "user_id": 9565387, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d6Y3JBWunV4/AAAAAAAAAAI/AAAAAAAAAEk/3020ZVdwdFU/photo.jpg?sz=128", "display_name": "ducminh", "link": "https://stackoverflow.com/users/9565387/ducminh"}, "edited": false, "score": 1, "creation_date": 1536782129, "post_id": 52302453, "comment_id": 91552900, "body": "Change to <code>data[&quot;Student 1&quot;][&quot;Topic 1&quot;]</code>."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1536782935, "post_id": 52302453, "comment_id": 91553214, "body": "No sure precisely what you want to know, but you can easily get rid of the <code>TypeError</code> by using <code>print(data[&quot;Student 1&quot;][&quot;Topic 1&quot;])</code> instead of what&#39;s in your question."}, {"owner": {"reputation": 13, "user_id": 10354975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d02c47313537f29ac345d72a375a0a0?s=128&d=identicon&r=PG&f=1", "display_name": "Fompster", "link": "https://stackoverflow.com/users/10354975/fompster"}, "edited": false, "score": 0, "creation_date": 1536784057, "post_id": 52302453, "comment_id": 91553681, "body": "Whoops that was a stupid mistake thanks ducminh and martineau"}], "answers": [{"tags": [], "owner": {"reputation": 4975, "user_id": 2323393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d52f68fba51eda4b59593a83a3c1250?s=128&d=identicon&r=PG", "display_name": "scotty3785", "link": "https://stackoverflow.com/users/2323393/scotty3785"}, "is_accepted": false, "score": 1, "last_activity_date": 1536782532, "creation_date": 1536782532, "answer_id": 52302613, "question_id": 52302453, "link": "https://stackoverflow.com/questions/52302453/how-to-read-a-dictionary-from-this-text-file/52302613#52302613", "title": "How to read a dictionary from this text file?", "body": "<p>I'd suggest using JSON to write the data out to a text file\n<a href=\"https://docs.python.org/3/library/json.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/json.html</a></p>\n\n<p>You can use the json.dumps method to create JSON data that can be written to a file and use the json.loads method to convert the text from the file back in to a dictionary</p>\n"}, {"tags": [], "owner": {"reputation": 562, "user_id": 3397643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c2da19655be5ceac32773d3be31bae20?s=128&d=identicon&r=PG&f=1", "display_name": "J0hn", "link": "https://stackoverflow.com/users/3397643/j0hn"}, "is_accepted": true, "score": 1, "last_activity_date": 1536782565, "creation_date": 1536782565, "answer_id": 52302618, "question_id": 52302453, "link": "https://stackoverflow.com/questions/52302453/how-to-read-a-dictionary-from-this-text-file/52302618#52302618", "title": "How to read a dictionary from this text file?", "body": "<p>Well since your question asks for \"a more efficient way of storing the data\" I'm going to say yes!</p>\n\n<p><a href=\"https://docs.python.org/3/library/shelve.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/shelve.html</a></p>\n\n<p>Shelve is a great tool to store dictionaries persistently and change / edit the dictionary whenever.  I'm currently using it for a discord bot project I'm working on and so far it's been great.</p>\n\n<p>Here is some usage tips to get your started (pulled directly from the page I linked).</p>\n\n<pre><code>import shelve\n\nd = shelve.open(filename)  # open -- file may get suffix added by low-level\n                           # library\n\nd[key] = data              # store data at key (overwrites old data if\n                           # using an existing key)\ndata = d[key]              # retrieve a COPY of data at key (raise KeyError\n                           # if no such key)\ndel d[key]                 # delete data stored at key (raises KeyError\n                           # if no such key)\n\nflag = key in d            # true if the key exists\nklist = list(d.keys())     # a list of all existing keys (slow!)\n\n# as d was opened WITHOUT writeback=True, beware:\nd['xx'] = [0, 1, 2]        # this works as expected, but...\nd['xx'].append(3)          # *this doesn't!* -- d['xx'] is STILL [0, 1, 2]!\n\n# having opened d without writeback=True, you need to code carefully:\ntemp = d['xx']             # extracts the copy\ntemp.append(5)             # mutates the copy\nd['xx'] = temp             # stores the copy right back, to persist it\n\n# or, d=shelve.open(filename,writeback=True) would let you just code\n# d['xx'].append(5) and have it work as expected, BUT it would also\n# consume more memory and make the d.close() operation slower.\n\nd.close()                  # close it\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10354975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d02c47313537f29ac345d72a375a0a0?s=128&d=identicon&r=PG&f=1", "display_name": "Fompster", "link": "https://stackoverflow.com/users/10354975/fompster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 52302618, "answer_count": 2, "score": 1, "last_activity_date": 1536782565, "creation_date": 1536781894, "last_edit_date": 1536782453, "question_id": 52302453, "link": "https://stackoverflow.com/questions/52302453/how-to-read-a-dictionary-from-this-text-file", "title": "How to read a dictionary from this text file?", "body": "<p>I am still new to python and I am playing around with saving data to text files. My problem is that when I try to access a dictionary it comes up with this error <code>TypeError: string indices must be integers</code> but I don't know how to convert them.</p>\n\n<p>This is what's inside my file:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Student 1/:{ \"Topic 1\" : 0,\"Topic 2\" : 0,\"Topic 3\" : 0,\"Topic 4\" : 4}\nStudent 2/:{ \"Topic 1\" : 1,\"Topic 2\" : 2,\"Topic 3\" : 0,\"Topic 4\" : 0}\nStudent 3/:{ \"Topic 1\" : 1,\"Topic 2\" : 0,\"Topic 3\" : 0,\"Topic 4\" : 1}\n</code></pre>\n\n<p>This is my code:</p>\n\n<pre><code>import ast #I thought this would fix the problem\n\ndef main():\n  data = {}\n  with open(\"test.txt\") as f:\n    for line in f:\n        content = line.rstrip('\\n').split('/:')\n        data[content[0]] = ast.literal_eval(content[1])\n  f.close()\n  print(data[\"Student 1\"[\"Topic 1\"]]) # works if I only do data[Student 1]\n\nmain()\n</code></pre>\n\n<p>If there is a more efficient way of storing the data?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1531971"}, "edited": false, "score": 0, "creation_date": 1536783986, "post_id": 52302442, "comment_id": 91553646, "body": "It&#39;s unclear what you want to do here. You have two collections that you want to apply to <i>something</i> in some manner. Why 120? Do you want to visit each commission or not? If you do want to visit each commission, what makes sense to you for a default value?"}], "answers": [{"comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1536782603, "post_id": 52302547, "comment_id": 91553085, "body": "I don&#39;t think this answers the question. They want out of bounds indices to access the last value, and nothing more. This is going to cycle through elements in turn."}], "tags": [], "owner": {"reputation": 70, "user_id": 9699647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9410a49b1e403af0a71b455f359d8e67?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias M.", "link": "https://stackoverflow.com/users/9699647/tobias-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1536782301, "creation_date": 1536782301, "answer_id": 52302547, "question_id": 52302442, "link": "https://stackoverflow.com/questions/52302442/python-adding-arrays-of-different-sizes-upper-bound/52302547#52302547", "title": "Python adding arrays of different sizes - upper bound?", "body": "<p>Which values should be used for calculations above sizes of the arrays?\nYou can e.g. repeat the arrays by typing </p>\n\n<pre><code>[0.55,0.03,0.025,0.025]*30 \n</code></pre>\n\n<p>to get 120 entries.</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 10353747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239f028add18cf90101f0d5b21093994?s=128&d=identicon&r=PG&f=1", "display_name": "massmutual", "link": "https://stackoverflow.com/users/10353747/massmutual"}, "edited": false, "score": 0, "creation_date": 1536783546, "post_id": 52302622, "comment_id": 91553436, "body": "these solutions seem a little inelegant.  Probably it would be best to index all the arrays the same length instead.  But thanks for the comments!"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 25, "user_id": 10353747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239f028add18cf90101f0d5b21093994?s=128&d=identicon&r=PG&f=1", "display_name": "massmutual", "link": "https://stackoverflow.com/users/10353747/massmutual"}, "edited": false, "score": 0, "creation_date": 1536783610, "post_id": 52302622, "comment_id": 91553467, "body": "@massmutual It&#39;s in a function so you can understand what it&#39;s doing. You can just as well replace <code>commission[i]</code> with <code>commission[min(i, 3)]</code>. Also, this wasn&#39;t a comment, it was an answer meant to address your question. Not sure what else you had in mind..."}, {"owner": {"reputation": 25, "user_id": 10353747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239f028add18cf90101f0d5b21093994?s=128&d=identicon&r=PG&f=1", "display_name": "massmutual", "link": "https://stackoverflow.com/users/10353747/massmutual"}, "edited": false, "score": 0, "creation_date": 1536783878, "post_id": 52302622, "comment_id": 91553599, "body": "Should I use numpy for array calculations?  Some people mentioned this to me."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 25, "user_id": 10353747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239f028add18cf90101f0d5b21093994?s=128&d=identicon&r=PG&f=1", "display_name": "massmutual", "link": "https://stackoverflow.com/users/10353747/massmutual"}, "edited": false, "score": 0, "creation_date": 1536783984, "post_id": 52302622, "comment_id": 91553645, "body": "@massmutual In general, yes, but I don&#39;t really think numpy can help here because the arrays aren&#39;t the same size, and the problem is inherently iterative."}, {"owner": {"reputation": 25, "user_id": 10353747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239f028add18cf90101f0d5b21093994?s=128&d=identicon&r=PG&f=1", "display_name": "massmutual", "link": "https://stackoverflow.com/users/10353747/massmutual"}, "edited": false, "score": 0, "creation_date": 1536785433, "post_id": 52302622, "comment_id": 91554227, "body": "but I could make the arrays the same size"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 25, "user_id": 10353747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239f028add18cf90101f0d5b21093994?s=128&d=identicon&r=PG&f=1", "display_name": "massmutual", "link": "https://stackoverflow.com/users/10353747/massmutual"}, "edited": false, "score": 0, "creation_date": 1536785468, "post_id": 52302622, "comment_id": 91554249, "body": "@massmutual &quot;The problem is inherently iterative&quot;. The next value depends on the previous ones. So, it can only be done within a loop."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1536782570, "creation_date": 1536782570, "answer_id": 52302622, "question_id": 52302442, "link": "https://stackoverflow.com/questions/52302442/python-adding-arrays-of-different-sizes-upper-bound/52302622#52302622", "title": "Python adding arrays of different sizes - upper bound?", "body": "<p>I would handle this while indexing the list. All out of bounds accesses should refer to the last element by default. </p>\n\n<p>You'd want to do something of the like:</p>\n\n<pre><code>def get_graceful_overflow(lst, idx):\n    return lst[min(idx, len(lst) - 1)]\n</code></pre>\n\n<p>Now substitute calls to <code>commission[i]</code> with <code>get_graceful_overflow(commission, i)</code>. And similar for <code>interest</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 10353747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239f028add18cf90101f0d5b21093994?s=128&d=identicon&r=PG&f=1", "display_name": "massmutual", "link": "https://stackoverflow.com/users/10353747/massmutual"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 52302622, "answer_count": 2, "score": 0, "last_activity_date": 1536782570, "creation_date": 1536781835, "question_id": 52302442, "link": "https://stackoverflow.com/questions/52302442/python-adding-arrays-of-different-sizes-upper-bound", "title": "Python adding arrays of different sizes - upper bound?", "body": "<p>I want to add several arrays together but they have different sizes.</p>\n\n<p>I think the code should look like this</p>\n\n<pre><code>commission = [0.55,0.03,0.025,0.025]\ninterest = [0.05,0.045]\npremium = 10\nfund = []\n\nfor i = 1 to 120\n        fund[i] = premium * (1 - commission[i]) + interest[i] * fund[i-1]\n</code></pre>\n\n<p>But the issue is that this will go out of bounds.  I just want the commission[4] to extend to all 120 periods.  Same with the interest array.  Usually in the past I have used the \"upperbound\" command within the for loop to do this calculation.</p>\n\n<p>How is it done in python?</p>\n\n<p>Thanks</p>\n"}]