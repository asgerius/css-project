[{"tags": ["python", "pandas", "matplotlib", "geopandas"], "answers": [{"comments": [{"owner": {"reputation": 10312, "user_id": 1681480, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/0wsSK.jpg?s=128&g=1", "display_name": "beroe", "link": "https://stackoverflow.com/users/1681480/beroe"}, "edited": false, "score": 0, "creation_date": 1473912566, "post_id": 39501858, "comment_id": 66323215, "body": "Doesn&#39;t this solution assume rectangular polygons, which doesn&#39;t match with the OP&#39;s intent, as I read it..."}, {"owner": {"reputation": 17473, "user_id": 50305, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f921948761062f7785a10e38b8402d2c?s=128&d=identicon&r=PG", "display_name": "Dervin Thunk", "link": "https://stackoverflow.com/users/50305/dervin-thunk"}, "reply_to_user": {"reputation": 10312, "user_id": 1681480, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/0wsSK.jpg?s=128&g=1", "display_name": "beroe", "link": "https://stackoverflow.com/users/1681480/beroe"}, "edited": false, "score": 0, "creation_date": 1473939888, "post_id": 39501858, "comment_id": 66336406, "body": "@beroe: you&#39;re right. The problem is that I have irregular polygons from some geographical information so the last solution (building a bounding box) is not useful to me at this point. I&#39;ve not been able to make the first one work so far, but that&#39;s got to do more with my own limitations than the OP&#39;s answer :)"}, {"owner": {"reputation": 1736, "user_id": 2241910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/516190dbb5e7655792bfe6d49316222f?s=128&d=identicon&r=PG", "display_name": "benten", "link": "https://stackoverflow.com/users/2241910/benten"}, "reply_to_user": {"reputation": 10312, "user_id": 1681480, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/0wsSK.jpg?s=128&g=1", "display_name": "beroe", "link": "https://stackoverflow.com/users/1681480/beroe"}, "edited": false, "score": 0, "creation_date": 1473940347, "post_id": 39501858, "comment_id": 66336661, "body": "Thanks @beroe, improved my answer accordingly. Devin, let me know if you get really stuck somewhere."}], "tags": [], "owner": {"reputation": 1736, "user_id": 2241910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/516190dbb5e7655792bfe6d49316222f?s=128&d=identicon&r=PG", "display_name": "benten", "link": "https://stackoverflow.com/users/2241910/benten"}, "is_accepted": true, "score": 1, "last_activity_date": 1473944990, "last_edit_date": 1473944990, "creation_date": 1473902215, "answer_id": 39501858, "question_id": 39501303, "link": "https://stackoverflow.com/questions/39501303/how-to-convert-lat-lon-points-in-pandas-and-see-whether-they-fall-in-some-bounda/39501858#39501858", "title": "How to convert lat/lon points in pandas and see whether they fall in some boundary polygons?", "body": "<p>Your starting point:</p>\n\n<pre><code>import pandas as pd\nfrom shapely.geometry import box\nimport matplotlib.pyplot as plt\n\nfrom matplotlib.collections import PatchCollection\nfrom matplotlib.patches import Polygon\nfrom shapely.geometry import Point\nimport seaborn as sns\nimport numpy as np\n\n# some pretend data\ndata = {'lat':[2.7,3.5,1.4,2.3,.9,1.9], 'lon':[1.2,.9,1.9,2.2,3,1.1]}\ndf = pd.DataFrame(data)\n\n# the 'bounding' polygon\npoly = box(1,1,2,2)\npatches  = PatchCollection([Polygon(poly.exterior)], facecolor='red', linewidth=.5, alpha=.5)\n\n\n# plot the bounding box \nfig, ax = sns.plt.subplots(1, figsize=(4,4))\nax.add_collection(patches, autolim=True)\n\n# plot the lat/lon points\ndf.plot(x='lat',y='lon', kind='scatter',ax=ax)\nplt.show()\n</code></pre>\n\n<p>The figures looks something like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/vXVsG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vXVsG.png\" alt=\"enter image description here\"></a></p>\n\n<p>One way to get rid of the unwanted points would be to use a boolean mask:</p>\n\n<pre><code>#probably more efficient ways to do this, but this works\nmask = [poly.intersects(Point(lat,lon)) for lat,lon in zip(df.lat,df.lon)]\ndf = df[mask]\n\n# make new plot (must make a new 'patch' object)\npatches1  = PatchCollection([Polygon(poly.exterior)], facecolor='red', linewidth=.5, alpha=.5)\nfig1, ax1 = sns.plt.subplots(1, figsize=(4,4))\nax1.add_collection(patches1, autolim=True)\n\n# make the axis bounds the same\nax1.set_xlim(ax.get_xlim())\nax1.set_ylim(ax.get_ylim())\n\n# plot the lat/lon points\ndf.plot(x='lat',y='lon', kind='scatter',ax=ax1)\nplt.show()\n</code></pre>\n\n<p>Gives me this image.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Rn4o5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Rn4o5.png\" alt=\"enter image description here\"></a></p>\n\n<p>Note that you could make a boolean mask in other, faster ways such whether lat is above the highest point in the polygon. Those might not be perfect by themselves, but could reduce the problem so you don't have call <code>intersects()</code> as many times.</p>\n\n<p>[edit:If your polygon is a rectangle,] another way (as you suggested in your question) would be to just 'crop' the image around the bounding polygon. This is a much faster solution since you won't have to call that <code>intersects()</code> function over and over. To trim the image based on the bounding polygon, you can insert this right before <code>plt.plot()</code>:</p>\n\n<pre><code>ax.set_xlim((np.min(poly.exterior.xy[0]),np.max(poly.exterior.xy[0])) )\nax.set_ylim((np.min(poly.exterior.xy[1]),np.max(poly.exterior.xy[1])) )\n</code></pre>\n\n<p>Gives the following:</p>\n\n<p><a href=\"https://i.stack.imgur.com/R4Y6j.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/R4Y6j.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7287085"}, "is_accepted": false, "score": 0, "last_activity_date": 1481574636, "creation_date": 1481574636, "answer_id": 41109028, "question_id": 39501303, "link": "https://stackoverflow.com/questions/39501303/how-to-convert-lat-lon-points-in-pandas-and-see-whether-they-fall-in-some-bounda/41109028#41109028", "title": "How to convert lat/lon points in pandas and see whether they fall in some boundary polygons?", "body": "<p><a href=\"http://geoffboeing.com/2016/10/r-tree-spatial-index-python/\" rel=\"nofollow noreferrer\">This tutorial</a> seems to do what you want. It also takes advantage of geopandas's built-in Rtree spatial indexing for fast intersection queries.</p>\n\n<pre><code>spatial_index = gdf.sindex\npossible_matches_index = list(spatial_index.intersection(polygon.bounds))\npossible_matches = gdf.iloc[possible_matches_index]\nprecise_matches = possible_matches[possible_matches.intersects(polygon)]\n</code></pre>\n\n<p>And then it plots the polygon and the points inside it and outside it in different colors, like you want to do.</p>\n"}], "owner": {"reputation": 17473, "user_id": 50305, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f921948761062f7785a10e38b8402d2c?s=128&d=identicon&r=PG", "display_name": "Dervin Thunk", "link": "https://stackoverflow.com/users/50305/dervin-thunk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2144, "favorite_count": 1, "accepted_answer_id": 39501858, "answer_count": 2, "score": 4, "last_activity_date": 1481574636, "creation_date": 1473897275, "question_id": 39501303, "link": "https://stackoverflow.com/questions/39501303/how-to-convert-lat-lon-points-in-pandas-and-see-whether-they-fall-in-some-bounda", "title": "How to convert lat/lon points in pandas and see whether they fall in some boundary polygons?", "body": "<p>I have a Pandas dataframe <code>df</code> like this:</p>\n\n<pre><code> id   lat  lon\n jhg  2.7  3.5\n ytr  3.1  3.5\n ...\n</code></pre>\n\n<p>I also have a Geopandas dataframe <code>poly</code> with some polygons. Now, I would like to only plot the points in <code>df</code> that are <em>inside</em> some polygon. So I should be able to do something like <code>poly.intersects(p)</code>, where <code>p</code> is a Shapely <code>Point</code>. But I'm doing something wrong;</p>\n\n<pre><code>from shapely.geometry import Point\nfor index, row in df.iterrows():\n    t = poly.intersects(Point(row.lon, row.lat))\n</code></pre>\n\n<p>What would be the best way to pass a dataframe with lat/lon points and plot them overlayed to <code>poly</code>? Notice that I could define a range of min/max lat/lon, but that also prints dots outside <code>poly</code> but inside the (bigger) bounding box.</p>\n"}, {"tags": ["python", "algorithm", "performance", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1473919980, "post_id": 39503417, "comment_id": 66325393, "body": "Thank you for the detailed response! However 2.3seconds per dataframe is about the speed I am getting now (x4000 = a long time).  Is there a faster way?  As mentioned I can do all 4000+ in under 3 minutes with SQL tables."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1473920033, "post_id": 39503417, "comment_id": 66325419, "body": "@cwse 2.3 seconds is for 240 months and 4,000 stocks.  SQL can do it in under 3 minutes.  pandas + numpy can do it in under 3 seconds"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1473920543, "post_id": 39503417, "comment_id": 66325635, "body": "@cwse I just ran with 40,000 simulated stock returns over 240 months, running rolling 12 month betas in under 40 seconds."}, {"owner": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 1, "creation_date": 1473920722, "post_id": 39503417, "comment_id": 66325696, "body": "WOW!! That&#39;s freaking epic! Thanks mate :)"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1473922340, "post_id": 39503417, "comment_id": 66326396, "body": "@cwse glad I could help."}, {"owner": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1473927908, "post_id": 39503417, "comment_id": 66329129, "body": "Pir, I just realised this is using one big dataframe... my data is in 4000 dataframes, and I want to add a new column (Beta) to each dataframe."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1473928074, "post_id": 39503417, "comment_id": 66329225, "body": "@cwse we can work with that.  4,000 dataframes with columns <code>[Date, Open, High, Low, Close]</code>?  I&#39;ll update my post on what to do.  I&#39;m assuming beta is being calculated on <code>Close</code>, correct?"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1473929087, "post_id": 39503417, "comment_id": 66329828, "body": "@cwse post has been updated.  Keep in mind that the multiple dataframes are in a dictionary."}, {"owner": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1473939038, "post_id": 39503417, "comment_id": 66335926, "body": "Dude you are a genious..!  matrix algebra and everything.. havent done that for years..!"}, {"owner": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1473939102, "post_id": 39503417, "comment_id": 66335959, "body": "Tell me, why do you transpose and pivot the 3D array in the Roll function?"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1473953271, "post_id": 39503417, "comment_id": 66345692, "body": "@cwse it starts with my choice to line the <code>items</code> axis of the <code>panel</code> with the different roll periods (12 of them), stocks with the <code>major</code> axis, and dates with the <code>minor</code> axis.  After that, <code>pd.Panel.to_frame()</code> drops the <code>items</code> axis into column headers and stacks the prior columns for each item&#39;s dataframe into rows.  Knowing this, and that I ulimately want the dataframe&#39;s index to have the first level be dates, second level be roll period and columns be stocks, I needed to <code>unstack</code> and <code>T</code>"}, {"owner": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1474189386, "post_id": 39503417, "comment_id": 66422831, "body": "this method doesnt appear to work, I get a &quot;Merror Error&quot; in the roll function &quot;roll_array = np.dstack([df.values[i:i+w, :] for i in range(len(df.index) - w + 1)]).T &quot; line, as follows:    &quot; File &quot;C:\\Users\\cwse8\\Anaconda3\\lib\\site-packages\\numpy\\lib\\shape_&zwnj;&#8203;base.py&quot;, line 368, in dstack     return _nx.concatenate([atleast_3d(_m) for _m in tup], 2) MemoryError&quot;"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1474189628, "post_id": 39503417, "comment_id": 66422889, "body": "@cwse I can assure you it does work.  I&#39;ve demonstrated that it does.  You may have a specific scenario in which it&#39;s failing and we can get to the bottom of that.  You say memory error, how much memory do you have available and over how many securities and over what time frame are you trying to execute this?  You can also, run it over chunks of your data.  Do it over one tenth of your data at a time.  Admittedly, this method isn&#39;t as memory efficient as it could be seeing as I take the entire time indexed dataframe and multiply it by 12."}, {"owner": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1474193401, "post_id": 39503417, "comment_id": 66423840, "body": "It runs with less files, but the output isnt as expected. is it possible to message you directly?"}, {"owner": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1474198939, "post_id": 39503417, "comment_id": 66425206, "body": "how can I execute it on chunks of data? my laptop has 8gb memory , iam running python 64bit. Another issue, the beta function assumes the market data is in the first column, however the pd.concat puts it in the last column, so it isn&#39;t actually calculating on the market data.."}, {"owner": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1474199377, "post_id": 39503417, "comment_id": 66425314, "body": "I fixed the Market data column issue by putting the following code in the beta function:  i = df.columns.get_loc(MarketIndex) \tX = df.values[:, [i]]"}, {"owner": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1474199897, "post_id": 39503417, "comment_id": 66425457, "body": "I tried running on only 2500 files and I even got a windows popup that my computer is low on memory haha.. the program then failed"}, {"owner": {"reputation": 846, "user_id": 1746891, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3421f08fe5d8d9c6ce076a746876d0db?s=128&d=identicon&r=PG", "display_name": "casbby", "link": "https://stackoverflow.com/users/1746891/casbby"}, "edited": false, "score": 0, "creation_date": 1480459713, "post_id": 39503417, "comment_id": 68969514, "body": "Hi piRsquared, your partition of dataframe logic will index the partition using the first entry of the partition. In a time series context (dates aligned from old to new). in the finance context you normally want a window of historical data that is backward looking wouldn&#39;t you?"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 846, "user_id": 1746891, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3421f08fe5d8d9c6ce076a746876d0db?s=128&d=identicon&r=PG", "display_name": "casbby", "link": "https://stackoverflow.com/users/1746891/casbby"}, "edited": false, "score": 0, "creation_date": 1480460318, "post_id": 39503417, "comment_id": 68969748, "body": "@casbby you opened up many points for conversation.  I&#39;ll try to be succinct.  The beta calculation is made with contemporaneous series so the only potential issue with alignment is over the course of a single period.  Meaning, &quot;is this the beta for the end of this month or end of last month?&quot;  However, that depends on the nature of the returns.  I generated random returns and did not specify if they were forward looking or backward looking.  I&#39;d leave that up the user to verify as it&#39;s very important."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 846, "user_id": 1746891, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3421f08fe5d8d9c6ce076a746876d0db?s=128&d=identicon&r=PG", "display_name": "casbby", "link": "https://stackoverflow.com/users/1746891/casbby"}, "edited": false, "score": 0, "creation_date": 1480460446, "post_id": 39503417, "comment_id": 68969801, "body": "@casbby I&#39;m almost always looking at building strategies and I need to see how this portfolio today will perform over the subsequent period.  That implies that I want to look forward.  That gets me into trouble though because many people want to see how their portfolios did over the prior period.  It takes much explanation but I still find it worth it to keep looking forward."}, {"owner": {"reputation": 846, "user_id": 1746891, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3421f08fe5d8d9c6ce076a746876d0db?s=128&d=identicon&r=PG", "display_name": "casbby", "link": "https://stackoverflow.com/users/1746891/casbby"}, "edited": false, "score": 0, "creation_date": 1480460498, "post_id": 39503417, "comment_id": 68969821, "body": "thanks for the quick reply. it is a piece of awesome algo. have you benchmarked it against the usual partition algo of using ix? i am sure your way is faster. just interested in finding out how much faster"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 846, "user_id": 1746891, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3421f08fe5d8d9c6ce076a746876d0db?s=128&d=identicon&r=PG", "display_name": "casbby", "link": "https://stackoverflow.com/users/1746891/casbby"}, "edited": false, "score": 0, "creation_date": 1480460626, "post_id": 39503417, "comment_id": 68969871, "body": "@casbby I did, don&#39;t know where I&#39;ve put it atm &gt;.&lt;"}, {"owner": {"reputation": 846, "user_id": 1746891, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3421f08fe5d8d9c6ce076a746876d0db?s=128&d=identicon&r=PG", "display_name": "casbby", "link": "https://stackoverflow.com/users/1746891/casbby"}, "edited": false, "score": 0, "creation_date": 1480460692, "post_id": 39503417, "comment_id": 68969903, "body": "your algo is a example of how functional form can be applied to make things better!"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1480460788, "post_id": 39503417, "comment_id": 68969941, "body": "I appreciate you saying so."}, {"owner": {"reputation": 135, "user_id": 12728182, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Cq1P5vU5XNk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdmvUCkH5f5y0doH0_sXArAbrBPww/photo.jpg?sz=128", "display_name": "Luca R", "link": "https://stackoverflow.com/users/12728182/luca-r"}, "edited": false, "score": 0, "creation_date": 1597377656, "post_id": 39503417, "comment_id": 112118625, "body": "I get the &quot;TypeError: object() takes no parameters&quot; when I try to run you code for line 9 in the roll function &gt;&gt;&gt;minor_axis=pd.Index(range(w), name=&#39;roll&#39;)) Did something depracate?"}, {"owner": {"reputation": 76, "user_id": 12210082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2739195d7b3c393725dea6053aa32f73?s=128&d=identicon&r=PG&f=1", "display_name": "bgaerber", "link": "https://stackoverflow.com/users/12210082/bgaerber"}, "edited": false, "score": 0, "creation_date": 1616182851, "post_id": 39503417, "comment_id": 117932610, "body": "This looks so perfect for what I need to do, I was wondering if you were able to post an updated solution using DataFrames multi-level indexing now that Panel has been depreciated. Thanks :)"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 19, "last_activity_date": 1474351435, "last_edit_date": 1495541846, "creation_date": 1473915563, "answer_id": 39503417, "question_id": 39501277, "link": "https://stackoverflow.com/questions/39501277/efficient-python-pandas-stock-beta-calculation-on-many-dataframes/39503417#39503417", "title": "Efficient Python Pandas Stock Beta Calculation on Many Dataframes", "body": "<p><strong><em>Generate Random Stock Data</em></strong><br>\n20 Years of Monthly Data for 4,000 Stocks</p>\n\n<pre><code>dates = pd.date_range('1995-12-31', periods=480, freq='M', name='Date')\nstoks = pd.Index(['s{:04d}'.format(i) for i in range(4000)])\ndf = pd.DataFrame(np.random.rand(480, 4000), dates, stoks)\n</code></pre>\n\n<hr>\n\n<pre><code>df.iloc[:5, :5]\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/DCpxf.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/DCpxf.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p><strong><em>Roll Function</em></strong><br>\nReturns groupby object ready to apply custom functions<br>\nSee <a href=\"https://stackoverflow.com/a/37491779/2336654\">Source</a> </p>\n\n<pre><code>def roll(df, w):\n    # stack df.values w-times shifted once at each stack\n    roll_array = np.dstack([df.values[i:i+w, :] for i in range(len(df.index) - w + 1)]).T\n    # roll_array is now a 3-D array and can be read into\n    # a pandas panel object\n    panel = pd.Panel(roll_array, \n                     items=df.index[w-1:],\n                     major_axis=df.columns,\n                     minor_axis=pd.Index(range(w), name='roll'))\n    # convert to dataframe and pivot + groupby\n    # is now ready for any action normally performed\n    # on a groupby object\n    return panel.to_frame().unstack().T.groupby(level=0)\n</code></pre>\n\n<hr>\n\n<p><strong><em>Beta Function</em></strong><br>\nUse closed form solution of OLS regression<br>\nAssume column 0 is market<br>\nSee <a href=\"https://stats.stackexchange.com/a/23132/114499\">Source</a></p>\n\n<pre><code>def beta(df):\n    # first column is the market\n    X = df.values[:, [0]]\n    # prepend a column of ones for the intercept\n    X = np.concatenate([np.ones_like(X), X], axis=1)\n    # matrix algebra\n    b = np.linalg.pinv(X.T.dot(X)).dot(X.T).dot(df.values[:, 1:])\n    return pd.Series(b[1], df.columns[1:], name='Beta')\n</code></pre>\n\n<hr>\n\n<p><strong><em>Demonstration</em></strong></p>\n\n<pre><code>rdf = roll(df, 12)\nbetas = rdf.apply(beta)\n</code></pre>\n\n<hr>\n\n<p><strong><em>Timing</em></strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/t6lvj.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/t6lvj.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p><strong><em>Validation</em></strong><br>\nCompare calculations with OP</p>\n\n<pre><code>def calc_beta(df):\n    np_array = df.values\n    m = np_array[:,0] # market returns are column zero from numpy array\n    s = np_array[:,1] # stock returns are column one from numpy array\n    covariance = np.cov(s,m) # Calculate covariance between stock and market\n    beta = covariance[0,1]/covariance[1,1]\n    return beta\n</code></pre>\n\n<hr>\n\n<pre><code>print(calc_beta(df.iloc[:12, :2]))\n\n-0.311757542437\n</code></pre>\n\n<hr>\n\n<pre><code>print(beta(df.iloc[:12, :2]))\n\ns0001   -0.311758\nName: Beta, dtype: float64\n</code></pre>\n\n<hr>\n\n<p><strong><em>Note the first cell</em></strong><br>\nIs the same value as validated calculations above</p>\n\n<pre><code>betas = rdf.apply(beta)\nbetas.iloc[:5, :5]\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/V9RGy.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/V9RGy.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p><strong><em>Response to comment</em></strong><br>\nFull working example with simulated multiple dataframes</p>\n\n<pre><code>num_sec_dfs = 4000\n\ncols = ['Open', 'High', 'Low', 'Close']\ndfs = {'s{:04d}'.format(i): pd.DataFrame(np.random.rand(480, 4), dates, cols) for i in range(num_sec_dfs)}\n\nmarket = pd.Series(np.random.rand(480), dates, name='Market')\n\ndf = pd.concat([market] + [dfs[k].Close.rename(k) for k in dfs.keys()], axis=1).sort_index(1)\n\nbetas = roll(df.pct_change().dropna(), 12).apply(beta)\n\nfor c, col in betas.iteritems():\n    dfs[c]['Beta'] = col\n\ndfs['s0001'].head(20)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/5RuJ9.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/5RuJ9.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1474290173, "post_id": 39565919, "comment_id": 66457477, "body": "thank you.. this seems to be getting there however the answer is incomplete? It all runs but I am not getting beta values that&#39;s for sure...I am getting decimals but they are not correct. No more 3D array and Panels in the roll function?"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1474290958, "post_id": 39565919, "comment_id": 66458012, "body": "The memory efficiency issue got me thinking. This beta calc is the same but the roll is quite different. The panel from the other answer was a slick way to put everything together into a generic structure that could be calculated upon again and again. Using the generator only uses the slice of the dataframe it needs at the time of the beta calculation, then moves on. Anyway, I&#39;ll dbl chk the calcs."}, {"owner": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1484048165, "post_id": 39565919, "comment_id": 70339728, "body": "I am recently having issues with the line: &quot;df = pd.concat([market] + [dfs[k].Close.rename(k) for k in dfs.keys()], axis=1).sort_index(1)&quot; in Python 3.4... it appears the iteration over dict keys is not working with the rename function...i get this error:  TypeError: &#39;str&#39; object is not callable (Python)  I tried googling solutions and trying different iteration methods..list(), iter(), items().. over the dict and cant get it to work!! I hope you can help! Thank you!!"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1484065512, "post_id": 39565919, "comment_id": 70351769, "body": "@cwse  &quot;df = pd.concat([market] + [dfs[k].Close.rename(k) for k, v in dfs.items()], axis=1).sort_index(1)&quot;"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1484065532, "post_id": 39565919, "comment_id": 70351793, "body": "@cwse &quot;df = pd.concat([market] + [v.Close.rename(k) for k, v in dfs.items()], axis=1).sort_index(1)&quot;"}, {"owner": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1484095527, "post_id": 39565919, "comment_id": 70366778, "body": "thanks for the quick response! THat is neater, but still getting the same error on that line: &#39;...packages\\pandas\\core\\internals.py&quot;, line 4391, in &lt;listcomp&gt;     items = [func(x) for x in index] TypeError: &#39;str&#39; object is not callable&#39; any ideas? Thanks buddy!"}, {"owner": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1484095968, "post_id": 39565919, "comment_id": 70366889, "body": "I had to downgrade to Python 3.4.3 to use Zipline... could this be the reason?? So strange. But I need Zipline..!"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1484096200, "post_id": 39565919, "comment_id": 70366932, "body": "I just ran it with 3.5"}, {"owner": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "edited": false, "score": 0, "creation_date": 1484096774, "post_id": 39565919, "comment_id": 70367063, "body": "could it be because the dataframe names are strings? i.e. to call a dataframe for a particular stock called CSL I do: print(dfs[&#39;CSL&#39;] ) ...however this was working fine on newer versions of Python.."}, {"owner": {"reputation": 1806, "user_id": 5318986, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh6.googleusercontent.com/-OHjhTntiSho/AAAAAAAAAAI/AAAAAAAAB-k/fdjsrqR3A_0/photo.jpg?sz=128", "display_name": "Martien Lubberink", "link": "https://stackoverflow.com/users/5318986/martien-lubberink"}, "edited": false, "score": 0, "creation_date": 1516602053, "post_id": 39565919, "comment_id": 83738275, "body": "Excellent algo - this one works like a charm. But please warn users not to generate thousands of stocks - it chokes my pc. 100 stocks work fine as well."}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 8, "last_activity_date": 1474351356, "last_edit_date": 1474351356, "creation_date": 1474262763, "answer_id": 39565919, "question_id": 39501277, "link": "https://stackoverflow.com/questions/39501277/efficient-python-pandas-stock-beta-calculation-on-many-dataframes/39565919#39565919", "title": "Efficient Python Pandas Stock Beta Calculation on Many Dataframes", "body": "<p>Using a generator to improve memory efficiency</p>\n\n<p><strong><em>Simulated data</em></strong>  </p>\n\n<pre><code>m, n = 480, 10000\ndates = pd.date_range('1995-12-31', periods=m, freq='M', name='Date')\nstocks = pd.Index(['s{:04d}'.format(i) for i in range(n)])\ndf = pd.DataFrame(np.random.rand(m, n), dates, stocks)\nmarket = pd.Series(np.random.rand(m), dates, name='Market')\ndf = pd.concat([df, market], axis=1)\n</code></pre>\n\n<p><strong><em>Beta Calculation</em></strong>  </p>\n\n<pre><code>def beta(df, market=None):\n    # If the market values are not passed,\n    # I'll assume they are located in a column\n    # named 'Market'.  If not, this will fail.\n    if market is None:\n        market = df['Market']\n        df = df.drop('Market', axis=1)\n    X = market.values.reshape(-1, 1)\n    X = np.concatenate([np.ones_like(X), X], axis=1)\n    b = np.linalg.pinv(X.T.dot(X)).dot(X.T).dot(df.values)\n    return pd.Series(b[1], df.columns, name=df.index[-1])\n</code></pre>\n\n<p><strong><em>roll function</em></strong><br>\nThis returns a generator and will be far more memory efficient</p>\n\n<pre><code>def roll(df, w):\n    for i in range(df.shape[0] - w + 1):\n        yield pd.DataFrame(df.values[i:i+w, :], df.index[i:i+w], df.columns)\n</code></pre>\n\n<p><strong><em>Putting it all together</em></strong>  </p>\n\n<pre><code>betas = pd.concat([beta(sdf) for sdf in roll(df.pct_change().dropna(), 12)], axis=1).T\n</code></pre>\n\n<hr>\n\n<h1>Validation</h1>\n\n<p><strong><em>OP beta calc</em></strong></p>\n\n<pre><code>def calc_beta(df):\n    np_array = df.values\n    m = np_array[:,0] # market returns are column zero from numpy array\n    s = np_array[:,1] # stock returns are column one from numpy array\n    covariance = np.cov(s,m) # Calculate covariance between stock and market\n    beta = covariance[0,1]/covariance[1,1]\n    return beta\n</code></pre>\n\n<p><strong><em>Experiment setup</em></strong></p>\n\n<pre><code>m, n = 12, 2\ndates = pd.date_range('1995-12-31', periods=m, freq='M', name='Date')\n\ncols = ['Open', 'High', 'Low', 'Close']\ndfs = {'s{:04d}'.format(i): pd.DataFrame(np.random.rand(m, 4), dates, cols) for i in range(n)}\n\nmarket = pd.Series(np.random.rand(m), dates, name='Market')\n\ndf = pd.concat([market] + [dfs[k].Close.rename(k) for k in dfs.keys()], axis=1).sort_index(1)\n\nbetas = pd.concat([beta(sdf) for sdf in roll(df.pct_change().dropna(), 12)], axis=1).T\n\nfor c, col in betas.iteritems():\n    dfs[c]['Beta'] = col\n\ndfs['s0000'].head(20)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/W8WLk.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/W8WLk.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>calc_beta(df[['Market', 's0000']])\n\n0.0020118230147777435\n</code></pre>\n\n<p><strong><em>NOTE:</em></strong><br>\nThe calculations are the same</p>\n"}, {"comments": [{"owner": {"reputation": 34352, "user_id": 119775, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fK5bc.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Corbett", "link": "https://stackoverflow.com/users/119775/jean-fran%c3%a7ois-corbett"}, "edited": false, "score": 0, "creation_date": 1539349257, "post_id": 52779705, "comment_id": 92481650, "body": "In my opinion, this should have been posted as comments to the question, because it isn&#39;t really a coherent answer, just a collection of remarks. If you don&#39;t have comment privilege yet, then I would advise you to go earn the few reputation points needed to acquire this privilege."}], "tags": [], "owner": {"reputation": 1, "user_id": 3396549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5ef14e4c098d99fd1abceea028afb88?s=128&d=identicon&r=PG&f=1", "display_name": "user3396549", "link": "https://stackoverflow.com/users/3396549/user3396549"}, "is_accepted": false, "score": -1, "last_activity_date": 1539347808, "creation_date": 1539347808, "answer_id": 52779705, "question_id": 39501277, "link": "https://stackoverflow.com/questions/39501277/efficient-python-pandas-stock-beta-calculation-on-many-dataframes/52779705#52779705", "title": "Efficient Python Pandas Stock Beta Calculation on Many Dataframes", "body": "<p>but these would be blockish when you require beta calculations across the dates(m) for multiple stocks(n) resulting (m x n) number of calculations.</p>\n\n<p>Some relief could be taken by running each date or stock on multiple cores, but then you will end up having huge hardware.</p>\n\n<p>The major time requirement for the solutions available is finding the variance and co-variance and also <strong>NaN</strong> should be avoided in (Index and stock) data for a correct calculation as per pandas==0.23.0.</p>\n\n<p>Thus running again would result stupid move unless the calculations are cached.</p>\n\n<p>numpy variance and co-variance version also happens to miss-calculate the beta if <strong>NaN</strong> are not dropped.</p>\n\n<p>A Cython implementation is must for huge set of data.</p>\n"}, {"tags": [], "owner": {"reputation": 4597, "user_id": 3587464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wjm1t.jpg?s=128&g=1", "display_name": "mcguip", "link": "https://stackoverflow.com/users/3587464/mcguip"}, "is_accepted": false, "score": 3, "last_activity_date": 1550339742, "last_edit_date": 1550339742, "creation_date": 1550337049, "answer_id": 54725600, "question_id": 39501277, "link": "https://stackoverflow.com/questions/39501277/efficient-python-pandas-stock-beta-calculation-on-many-dataframes/54725600#54725600", "title": "Efficient Python Pandas Stock Beta Calculation on Many Dataframes", "body": "<p>While efficient subdivision of the input data set into rolling windows is important to the optimization of the overall calculations, the performance of the beta calculation itself can also be significantly improved.</p>\n\n<p>The following optimizes only the subdivision of the data set into rolling windows:</p>\n\n<pre><code>def numpy_betas(x_name, window, returns_data, intercept=True):\n    if intercept:\n        ones = numpy.ones(window)\n\n    def lstsq_beta(window_data):\n        x_data = numpy.vstack([window_data[x_name], ones]).T if intercept else window_data[[x_name]]\n        beta_arr, residuals, rank, s = numpy.linalg.lstsq(x_data, window_data)\n        return beta_arr[0]\n\n    indices = [int(x) for x in numpy.arange(0, returns_data.shape[0] - window + 1, 1)]\n    return DataFrame(\n        data=[lstsq_beta(returns_data.iloc[i:(i + window)]) for i in indices]\n        , columns=list(returns_data.columns)\n        , index=returns_data.index[window - 1::1]\n    )\n</code></pre>\n\n<p>The following also optimizes the beta calculation itself:</p>\n\n<pre><code>def custom_betas(x_name, window, returns_data):\n    window_inv = 1.0 / window\n    x_sum = returns_data[x_name].rolling(window, min_periods=window).sum()\n    y_sum = returns_data.rolling(window, min_periods=window).sum()\n    xy_sum = returns_data.mul(returns_data[x_name], axis=0).rolling(window, min_periods=window).sum()\n    xx_sum = numpy.square(returns_data[x_name]).rolling(window, min_periods=window).sum()\n    xy_cov = xy_sum - window_inv * y_sum.mul(x_sum, axis=0)\n    x_var = xx_sum - window_inv * numpy.square(x_sum)\n    betas = xy_cov.divide(x_var, axis=0)[window - 1:]\n    betas.columns.name = None\n    return betas\n</code></pre>\n\n<p>Comparing the performance of the two different calculations, you can see that as the window used in the beta calculation increases, the second method dramatically outperforms the first:\n<a href=\"https://i.stack.imgur.com/A5204.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A5204.png\" alt=\"enter image description here\"></a></p>\n\n<p>Comparing the performance to that of @piRSquared's implementation, the custom method takes roughly 350 millis to evaluate compared to over 2 seconds.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 6227862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc91c6c0e54d6f95cbe6185512a34fab?s=128&d=identicon&r=PG&f=1", "display_name": "hkiran", "link": "https://stackoverflow.com/users/6227862/hkiran"}, "is_accepted": false, "score": 2, "last_activity_date": 1555044701, "creation_date": 1555044701, "answer_id": 55644699, "question_id": 39501277, "link": "https://stackoverflow.com/questions/39501277/efficient-python-pandas-stock-beta-calculation-on-many-dataframes/55644699#55644699", "title": "Efficient Python Pandas Stock Beta Calculation on Many Dataframes", "body": "<p>Further optimizing on @piRSquared's implementation for both speed and memory. the code is also simplified for clarity. </p>\n\n<pre><code>from numpy import nan, ndarray, ones_like, vstack, random\nfrom numpy.lib.stride_tricks import as_strided\nfrom numpy.linalg import pinv\nfrom pandas import DataFrame, date_range\n\ndef calc_beta(s: ndarray, m: ndarray):\n  x = vstack((ones_like(m), m))\n  b = pinv(x.dot(x.T)).dot(x).dot(s)\n  return b[1]\n\ndef rolling_calc_beta(s_df: DataFrame, m_df: DataFrame, period: int):\n  result = ndarray(shape=s_df.shape, dtype=float)\n  l, w = s_df.shape\n  ls, ws = s_df.values.strides\n  result[0:period - 1, :] = nan\n  s_arr = as_strided(s_df.values, shape=(l - period + 1, period, w), strides=(ls, ls, ws))\n  m_arr = as_strided(m_df.values, shape=(l - period + 1, period), strides=(ls, ls))\n  for row in range(period, l):\n    result[row, :] = calc_beta(s_arr[row - period, :], m_arr[row - period])\n  return DataFrame(data=result, index=s_df.index, columns=s_df.columns)\n\nif __name__ == '__main__':\n  num_sec_dfs, num_periods = 4000, 480\n\n  dates = date_range('1995-12-31', periods=num_periods, freq='M', name='Date')\n  stocks = DataFrame(data=random.rand(num_periods, num_sec_dfs), index=dates,\n                   columns=['s{:04d}'.format(i) for i in \n                            range(num_sec_dfs)]).pct_change()\n  market = DataFrame(data=random.rand(num_periods), index=dates, columns= \n              ['Market']).pct_change()\n  betas = rolling_calc_beta(stocks, market, 12)\n</code></pre>\n\n<p><strong>%timeit betas = rolling_calc_beta(stocks, market, 12)</strong></p>\n\n<p><strong>335 ms \u00b1 2.69 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)</strong></p>\n"}, {"tags": [], "owner": {"reputation": 103, "user_id": 7163376, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bVb9JXQvRcM/AAAAAAAAAAI/AAAAAAAAACc/SPZbp6Z6XHY/photo.jpg?sz=128", "display_name": "David Darby", "link": "https://stackoverflow.com/users/7163376/david-darby"}, "is_accepted": false, "score": 0, "last_activity_date": 1606924550, "creation_date": 1606924550, "answer_id": 65111604, "question_id": 39501277, "link": "https://stackoverflow.com/questions/39501277/efficient-python-pandas-stock-beta-calculation-on-many-dataframes/65111604#65111604", "title": "Efficient Python Pandas Stock Beta Calculation on Many Dataframes", "body": "<p><strong>HERE'S THE SIMPLEST AND FASTEST SOLUTION</strong></p>\n<p>The accepted answer was too slow for what I needed and the I didn't understand the math behind the solutions asserted as faster. They also gave different answers, though in fairness I probably just messed it up.</p>\n<p>I don't think you need to make a custom rolling function to calculate beta with pandas 1.1.4 (or even since at least .19). The below code assumes the data is in the same format as the above problems--a pandas dataframe with a date index, percent returns of some periodicity for the stocks, and market values are located in a column named 'Market'.</p>\n<p>If you don't have this format, I recommend joining the stock returns to the market returns to ensure the same index with:</p>\n<pre><code># Use .pct_change() only if joining Close data\nbeta_data = stock_data.join(market_data), how = 'inner').pct_change().dropna()\n</code></pre>\n<p>After that, it's just covariance divided by variance.</p>\n<pre><code>\nticker_covariance = beta_data.rolling(window).cov()\n# Limit results to the stock (i.e. column name for the stock) vs. 'Market' covariance\nticker_covariance = ticker_covariance.loc[pd.IndexSlice[:, stock], 'Market'].dropna()\nbenchmark_variance = beta_data['Market'].rolling(window).var().dropna()\nbeta = ticker_covariance / benchmark_variance\n</code></pre>\n<p>NOTES: If you have a multi-index, you'll have to drop the non-date levels to use the rolling().apply() solution. I only tested this for one stock and one market. If you have multiple stocks, a modification to the ticker_covariance equation after .loc is probably needed. Last, if you want to calculate beta values for the periods before the full window (ex. stock_data begins 1 year ago, but you use 3yrs of data), then you can modify the above to and expanding (instead of rolling) window with the same calculation and then .combine_first() the two.</p>\n"}, {"tags": [], "owner": {"reputation": 1638, "user_id": 4510252, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7392ceb72b7a7289561e2adb14e9393e?s=128&d=identicon&r=PG&f=1", "display_name": "sprksh", "link": "https://stackoverflow.com/users/4510252/sprksh"}, "is_accepted": false, "score": 0, "last_activity_date": 1613450664, "creation_date": 1613450664, "answer_id": 66218800, "question_id": 39501277, "link": "https://stackoverflow.com/questions/39501277/efficient-python-pandas-stock-beta-calculation-on-many-dataframes/66218800#66218800", "title": "Efficient Python Pandas Stock Beta Calculation on Many Dataframes", "body": "<p>Created a simple python package <a href=\"https://finance-calculator.readthedocs.io/en/latest/usage.html\" rel=\"nofollow noreferrer\">finance-calculator</a> based on numpy and pandas to calculate financial ratios including beta. I am using the simple formula (<a href=\"https://www.investopedia.com/ask/answers/070615/what-formula-calculating-beta.asp\" rel=\"nofollow noreferrer\">as per investopedia</a>):</p>\n<pre><code>beta = covariance(returns, benchmark returns) / variance(benchmark returns)\n</code></pre>\n<p>Covariance and variance are directly calculated in pandas which makes it fast. Using the api in the package is also simple:</p>\n<pre><code>import finance_calculator as fc\nbeta = fc.get_beta(scheme_data, benchmark_data, tail=False)\n</code></pre>\n<p>which will give you a dataframe of date and beta or the last beta value if tail is true.</p>\n"}], "owner": {"reputation": 534, "user_id": 6107994, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95b2a52a5b3015a773369e487caf16f7?s=128&d=identicon&r=PG&f=1", "display_name": "cwse", "link": "https://stackoverflow.com/users/6107994/cwse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19154, "favorite_count": 25, "accepted_answer_id": 39503417, "answer_count": 7, "score": 18, "last_activity_date": 1613450664, "creation_date": 1473897004, "last_edit_date": 1495542752, "question_id": 39501277, "link": "https://stackoverflow.com/questions/39501277/efficient-python-pandas-stock-beta-calculation-on-many-dataframes", "title": "Efficient Python Pandas Stock Beta Calculation on Many Dataframes", "body": "<p>I have many (4000+) CSVs of stock data (Date, Open, High, Low, Close) which I import into individual Pandas dataframes to perform analysis.  I am new to python and want to calculate a rolling 12month beta for each stock, I found a post to calculate rolling beta (<a href=\"https://stackoverflow.com/questions/34802972/python-pandas-calculate-rolling-stock-beta-using-rolling-apply-to-groupby-object\">Python pandas calculate rolling stock beta using rolling apply to groupby object in vectorized fashion</a>) however when used in my code below takes over 2.5 hours!  Considering I can run the exact same calculations in SQL tables in under 3 minutes this is too slow.</p>\n\n<p>How can I improve the performance of my below code to match that of SQL?  I understand Pandas/python has that capability. My current method loops over each row which I know slows performance but I am unaware of any aggregate way to perform a rolling window beta calculation on a dataframe.</p>\n\n<p>Note: the first 2 steps of loading the CSVs into individual dataframes and calculating daily returns only takes ~20seconds.  All my CSV dataframes are stored in the dictionary called 'FilesLoaded' with names such as 'XAO'.</p>\n\n<p>Your help would be much appreciated!\nThank you :)</p>\n\n<pre><code>import pandas as pd, numpy as np\nimport datetime\nimport ntpath\npd.set_option('precision',10)  #Set the Decimal Point precision to DISPLAY\nstart_time=datetime.datetime.now()\n\nMarketIndex = 'XAO'\nperiod = 250\nMinBetaPeriod = period\n# ***********************************************************************************************\n# CALC RETURNS \n# ***********************************************************************************************\nfor File in FilesLoaded:\n    FilesLoaded[File]['Return'] = FilesLoaded[File]['Close'].pct_change()\n# ***********************************************************************************************\n# CALC BETA\n# ***********************************************************************************************\ndef calc_beta(df):\n    np_array = df.values\n    m = np_array[:,0] # market returns are column zero from numpy array\n    s = np_array[:,1] # stock returns are column one from numpy array\n    covariance = np.cov(s,m) # Calculate covariance between stock and market\n    beta = covariance[0,1]/covariance[1,1]\n    return beta\n\n#Build Custom \"Rolling_Apply\" function\ndef rolling_apply(df, period, func, min_periods=None):\n    if min_periods is None:\n        min_periods = period\n    result = pd.Series(np.nan, index=df.index)\n    for i in range(1, len(df)+1):\n        sub_df = df.iloc[max(i-period, 0):i,:]\n        if len(sub_df) &gt;= min_periods:  \n            idx = sub_df.index[-1]\n            result[idx] = func(sub_df)\n    return result\n\n#Create empty BETA dataframe with same index as RETURNS dataframe\ndf_join = pd.DataFrame(index=FilesLoaded[MarketIndex].index)    \ndf_join['market'] = FilesLoaded[MarketIndex]['Return']\ndf_join['stock'] = np.nan\n\nfor File in FilesLoaded:\n    df_join['stock'].update(FilesLoaded[File]['Return'])\n    df_join  = df_join.replace(np.inf, np.nan) #get rid of infinite values \"inf\" (SQL won't take \"Inf\")\n    df_join  = df_join.replace(-np.inf, np.nan)#get rid of infinite values \"inf\" (SQL won't take \"Inf\")\n    df_join  = df_join.fillna(0) #get rid of the NaNs in the return data\n    FilesLoaded[File]['Beta'] = rolling_apply(df_join[['market','stock']], period, calc_beta, min_periods = MinBetaPeriod)\n\n# ***********************************************************************************************\n# CLEAN-UP\n# ***********************************************************************************************\nprint('Run-time: {0}'.format(datetime.datetime.now() - start_time))\n</code></pre>\n"}, {"tags": ["python", "greenlets"], "owner": {"reputation": 708, "user_id": 417642, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f4293123704946e3e0fef8962e93c629?s=128&d=identicon&r=PG", "display_name": "drecute", "link": "https://stackoverflow.com/users/417642/drecute"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 406, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1473896856, "creation_date": 1473896856, "question_id": 39501254, "link": "https://stackoverflow.com/questions/39501254/kill-a-python-greenlet-by-id", "title": "Kill a Python Greenlet by id", "body": "<p><code>Greenlet.spawn</code> creates a new instance of Greenlet as defined in docs. I have this below code in which I want to be able to kill a Greenlet by its id.</p>\n\n<pre><code>import gevent\nfrom gevent import Greenlet\nfrom gevent import getcurrent\n\nclass BidTask(Greenlet):\n    \"\"\" A new bid task creates a new thread when initialized \"\"\"\n    def __init__(self, bid):\n        Greenlet.__init__(self)\n        self.bid = bid\n\n    def task(self):\n      while True:\n        print(\"Running %r\" % [self.bid, id(getcurrent())])\n        gevent.sleep(10) # sleep for 10 secs\n        print(\"Running %r\" % [self.bid, id(getcurrent())])\n\n    def _run(self):\n        self.task()\n\ng = BidTask(\"Bid 1\")\ng.spawn(\"Bid 1\") # a new instance of Greenlet is created\n\ng2 = BidTask(\"Bid 2\")\ng2.spawn(\"Bid 2\") # a new instance of Greenlet is created\n\ngevent.joinall([g, g2])\n\n\n# Elsewhere in another module\nclass Outsider(object):\n  def kill(self, id):\n    Greenlet.registry(id).kill() \n\nOutsider().kill(1234) # How to achieve this?\n</code></pre>\n\n<p>I appreciate your help.</p>\n"}, {"tags": ["python", "loops", "sum", "project", "digit"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 1, "creation_date": 1473897508, "post_id": 39501154, "comment_id": 66320035, "body": "I suggest using a debugger or add <code>print</code> statements to your code to figure out what it is doing. You can add an <code>if</code> statement to only print when the loop reaches 4151."}], "answers": [{"comments": [{"owner": {"reputation": 13788, "user_id": 3222797, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/H5JG2.png?s=128&g=1", "display_name": "gobrewers14", "link": "https://stackoverflow.com/users/3222797/gobrewers14"}, "edited": false, "score": 0, "creation_date": 1473897116, "post_id": 39501262, "comment_id": 66319919, "body": "1 isn&#39;t included.  Should be <code>range(2, 100000)</code>.  Correct answer is 443839."}, {"owner": {"reputation": 4368, "user_id": 6557569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/T3iVG.jpg?s=128&g=1", "display_name": "Szabolcs Dombi", "link": "https://stackoverflow.com/users/6557569/szabolcs-dombi"}, "reply_to_user": {"reputation": 13788, "user_id": 3222797, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/H5JG2.png?s=128&g=1", "display_name": "gobrewers14", "link": "https://stackoverflow.com/users/3222797/gobrewers14"}, "edited": false, "score": 0, "creation_date": 1473897345, "post_id": 39501262, "comment_id": 66319985, "body": "maybe <code>range(10, 1000000)</code> if no single digit number accepted."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1473897438, "post_id": 39501262, "comment_id": 66320011, "body": "The upper limit of the range only needs to be <code>sum(int(d)**5 for d in &quot;9&quot;*5)</code>, or <code>295245</code>"}], "tags": [], "owner": {"reputation": 4368, "user_id": 6557569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/T3iVG.jpg?s=128&g=1", "display_name": "Szabolcs Dombi", "link": "https://stackoverflow.com/users/6557569/szabolcs-dombi"}, "is_accepted": false, "score": 2, "last_activity_date": 1473898124, "last_edit_date": 1473898124, "creation_date": 1473896903, "answer_id": 39501262, "question_id": 39501154, "link": "https://stackoverflow.com/questions/39501154/python-project-euler-digit-fifth-powers/39501262#39501262", "title": "Python Project Euler digit fifth powers", "body": "<p>The problem in your code is you forgot to reset the <code>digit_sum</code> when you got an answer.\nPut <code>digit_sum = 0</code> before <code>j = list(str(i))</code>. You also start with <code>i = 0</code>. I suggest to start with <code>i = 10</code> since the first 2 digit number is 10.</p>\n\n<p>use this:</p>\n\n<pre><code>[i for i in range(10, 1000000) if i == sum(int(d) ** 5 for d in str(i))]\n</code></pre>\n\n<p>equivalent with:</p>\n\n<pre><code>[4150, 4151, 54748, 92727, 93084, 194979]\n</code></pre>\n\n<p>using sum:</p>\n\n<pre><code>sum(i for i in range(10, 1000000) if i == sum(int(d) ** 5 for d in str(i)))\n</code></pre>\n\n<p>equivalent with:</p>\n\n<pre><code>443839\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2046, "user_id": 1622, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/hu5GZ.jpg?s=128&g=1", "display_name": "Dimitrios Mistriotis", "link": "https://stackoverflow.com/users/1622/dimitrios-mistriotis"}, "edited": false, "score": 0, "creation_date": 1524945159, "post_id": 39501312, "comment_id": 87176913, "body": "Also on the edit starting from 10 removes 1 as in the problem definition, 1 is left out."}], "tags": [], "owner": {"reputation": 325, "user_id": 1112457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/070c2f80b17cfd6557e093ef84ab185d?s=128&d=identicon&r=PG", "display_name": "gavriel", "link": "https://stackoverflow.com/users/1112457/gavriel"}, "is_accepted": false, "score": 1, "last_activity_date": 1524944667, "last_edit_date": 1524944667, "creation_date": 1473897350, "answer_id": 39501312, "question_id": 39501154, "link": "https://stackoverflow.com/questions/39501154/python-project-euler-digit-fifth-powers/39501312#39501312", "title": "Python Project Euler digit fifth powers", "body": "<p>4150 is also in solutions. The digit_sum is not set to 0 before 4151 step. You should set digit_sum = 0 in each step.</p>\n\n<pre><code>summ = 0\ni = 10\nwhile i &lt; 1000000:\n    digit_sum = 0\n    j = list(str(i))\n    for x in j:\n        digit = int(x) ** 5\n        digit_sum += digit\n    if digit_sum == i:\n        summ += i\n        print(i)\n    i += 1\n\nprint(summ)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11357, "user_id": 584846, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uD1uQ.jpg?s=128&g=1", "display_name": "Brent Washburne", "link": "https://stackoverflow.com/users/584846/brent-washburne"}, "is_accepted": false, "score": -1, "last_activity_date": 1473897357, "creation_date": 1473897357, "answer_id": 39501315, "question_id": 39501154, "link": "https://stackoverflow.com/questions/39501154/python-project-euler-digit-fifth-powers/39501315#39501315", "title": "Python Project Euler digit fifth powers", "body": "<p>The answer to your question is that you don't reset <code>digit_sum</code> every time, only when <code>digit_sum != i</code>.  If you remove the <code>else</code> statement, it should work correctly.</p>\n\n<pre><code>if digit_sum == i:\n   summ += i\n   print(i)\ndigit_sum = 0\ni += 1\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 6758280, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2pCeWgBhyIU/AAAAAAAAAAI/AAAAAAAAACM/tnsNs8pzu2o/photo.jpg?sz=128", "display_name": "Zhibo Yang", "link": "https://stackoverflow.com/users/6758280/zhibo-yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1329, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1524944667, "creation_date": 1473896116, "last_edit_date": 1473896572, "question_id": 39501154, "link": "https://stackoverflow.com/questions/39501154/python-project-euler-digit-fifth-powers", "title": "Python Project Euler digit fifth powers", "body": "<p><a href=\"https://projecteuler.net/problem=30\" rel=\"nofollow\">Here is the problem</a>:</p>\n\n<blockquote>\n  <p>Surprisingly there are only three numbers that can be written as the\n  sum of fourth powers of their digits:</p>\n  \n  <p>1634 = 1^4 + 6^4 + 3^4 + 4^4<br>\n     8208 = 8^4 + 2^4 + 0^4 + 8^4<br>\n     9474 = 9^4 + 4^4 + 7^4 + 4^4  </p>\n  \n  <p>As 1 = 1^4 is not a sum it is not included.</p>\n  \n  <p>The sum of these numbers is 1634 + 8208 + 9474 = 19316.</p>\n  \n  <p>Find the sum of all the numbers that can be written as the sum of\n  fifth powers of their digits.</p>\n</blockquote>\n\n<p>And here is my code:</p>\n\n<pre><code>summ = 0\ndigit_sum = 0\ni = 0\nwhile i &lt; 1000000:\n    j = list(str(i))\n    for x in j:\n       digit = int(x) ** 5\n       digit_sum += digit\n    if digit_sum == i:\n       summ += i\n       print(i)\n    else:\n       digit_sum = 0\n    i += 1\nprint(summ)\n</code></pre>\n\n<p>Can anyone find out that why I miss a value 4151 which should be one of the correct answer? </p>\n"}, {"tags": ["python", "module", "theano"], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 4744673, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/caf81b0af7fc0f5123363c3fb0d28a02?s=128&d=identicon&r=PG&f=1", "display_name": "Amn Kh", "link": "https://stackoverflow.com/users/4744673/amn-kh"}, "edited": false, "score": 0, "creation_date": 1473897379, "post_id": 39501251, "comment_id": 66319993, "body": "<code>theano-cache purge   File &quot;&lt;stdin&gt;&quot;, line 1     theano-cache purge                      ^ SyntaxError: invalid syntax</code>"}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "reply_to_user": {"reputation": 329, "user_id": 4744673, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/caf81b0af7fc0f5123363c3fb0d28a02?s=128&d=identicon&r=PG&f=1", "display_name": "Amn Kh", "link": "https://stackoverflow.com/users/4744673/amn-kh"}, "edited": false, "score": 0, "creation_date": 1473897897, "post_id": 39501251, "comment_id": 66320110, "body": "Try doing the following ( <a href=\"https://gist.github.com/anonymous/afa341ef477eb95a1ebcda44f7f967b6\" rel=\"nofollow noreferrer\">code here</a> ) to find the location of the cache, that&#39;s what you&#39;ll want to delete to make sure the imports are updated."}, {"owner": {"reputation": 329, "user_id": 4744673, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/caf81b0af7fc0f5123363c3fb0d28a02?s=128&d=identicon&r=PG&f=1", "display_name": "Amn Kh", "link": "https://stackoverflow.com/users/4744673/amn-kh"}, "edited": false, "score": 0, "creation_date": 1473898101, "post_id": 39501251, "comment_id": 66320165, "body": "Thank you. It gives me an address. What is the next?"}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "reply_to_user": {"reputation": 329, "user_id": 4744673, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/caf81b0af7fc0f5123363c3fb0d28a02?s=128&d=identicon&r=PG&f=1", "display_name": "Amn Kh", "link": "https://stackoverflow.com/users/4744673/amn-kh"}, "edited": false, "score": 0, "creation_date": 1473898156, "post_id": 39501251, "comment_id": 66320178, "body": "You&#39;ll want to delete the contents, as it&#39;s the cache which contains outdated imports."}, {"owner": {"reputation": 329, "user_id": 4744673, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/caf81b0af7fc0f5123363c3fb0d28a02?s=128&d=identicon&r=PG&f=1", "display_name": "Amn Kh", "link": "https://stackoverflow.com/users/4744673/amn-kh"}, "edited": false, "score": 0, "creation_date": 1473898361, "post_id": 39501251, "comment_id": 66320236, "body": "Thank you. Now. <code>ImportError: No module named Theano.tensor.signal.pool</code>"}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "reply_to_user": {"reputation": 329, "user_id": 4744673, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/caf81b0af7fc0f5123363c3fb0d28a02?s=128&d=identicon&r=PG&f=1", "display_name": "Amn Kh", "link": "https://stackoverflow.com/users/4744673/amn-kh"}, "edited": false, "score": 0, "creation_date": 1473898544, "post_id": 39501251, "comment_id": 66320282, "body": "It should be <b>lowercase</b> &quot;theano&quot;, not &quot;Theano&quot;. As a test try doing the following: <a href=\"https://gist.github.com/anonymous/8a65c27f4e65e0ed5ad8ce124dab36af\" rel=\"nofollow noreferrer\">gist.github.com/anonymous/8a65c27f4e65e0ed5ad8ce124dab36af</a>"}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "reply_to_user": {"reputation": 329, "user_id": 4744673, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/caf81b0af7fc0f5123363c3fb0d28a02?s=128&d=identicon&r=PG&f=1", "display_name": "Amn Kh", "link": "https://stackoverflow.com/users/4744673/amn-kh"}, "edited": false, "score": 1, "creation_date": 1473899100, "post_id": 39501251, "comment_id": 66320414, "body": "^ did you try lowercase &quot;theano&quot;? If the error persists then you must not have a completely current version -- <code>sudo pip install --upgrade --no-deps theano</code>"}], "tags": [], "owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "is_accepted": true, "score": 5, "last_activity_date": 1473896825, "creation_date": 1473896825, "answer_id": 39501251, "question_id": 39501152, "link": "https://stackoverflow.com/questions/39501152/importerror-no-module-named-downsample/39501251#39501251", "title": "ImportError: No module named downsample", "body": "<p>The <code>downsample</code> module has been moved to <code>pool</code>, so try declaring it as:</p>\n\n<pre><code>from theano.tensor.signal.pool import pool_2d\n</code></pre>\n\n<p>After changing delete your theano cache with the command:</p>\n\n<pre><code>theano-cache purge\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 453, "user_id": 3515225, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/51d28868c2b8639ed221ddf327911901?s=128&d=identicon&r=PG&f=1", "display_name": "Gunjan naik", "link": "https://stackoverflow.com/users/3515225/gunjan-naik"}, "is_accepted": false, "score": 0, "last_activity_date": 1497516857, "creation_date": 1497516857, "answer_id": 44563057, "question_id": 39501152, "link": "https://stackoverflow.com/questions/39501152/importerror-no-module-named-downsample/44563057#44563057", "title": "ImportError: No module named downsample", "body": "<p>Try to update the Theano using this link.</p>\n\n<pre><code>pip install --upgrade https://github.com/Lasagne/Lasagne/archive/master.zip\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 399, "user_id": 4260697, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yDKs1nXNGgQ/AAAAAAAAAAI/AAAAAAAAAGc/1KyJ40f_3lY/photo.jpg?sz=128", "display_name": "Zhu Xiaohu", "link": "https://stackoverflow.com/users/4260697/zhu-xiaohu"}, "is_accepted": false, "score": 6, "last_activity_date": 1499406646, "creation_date": 1499406646, "answer_id": 44963400, "question_id": 39501152, "link": "https://stackoverflow.com/questions/39501152/importerror-no-module-named-downsample/44963400#44963400", "title": "ImportError: No module named downsample", "body": "<p>update theano and lasagne</p>\n\n<pre><code>pip install --upgrade https://github.com/Theano/Theano/archive/master.zip\npip install --upgrade https://github.com/Lasagne/Lasagne/archive/master.zip\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/42998355/lasagne-vs-theano-possible-version-mismatch-windows\">Lasagne vs Theano possible version mismatch (Windows)</a> </p>\n"}, {"tags": [], "owner": {"reputation": 2260, "user_id": 2061991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71696895266609028e9dee42ec504059?s=128&d=identicon&r=PG", "display_name": "Prakhar Agarwal", "link": "https://stackoverflow.com/users/2061991/prakhar-agarwal"}, "is_accepted": false, "score": 1, "last_activity_date": 1515383583, "creation_date": 1515383583, "answer_id": 48144029, "question_id": 39501152, "link": "https://stackoverflow.com/questions/39501152/importerror-no-module-named-downsample/48144029#48144029", "title": "ImportError: No module named downsample", "body": "<p>Same issue [theano v.0.9.0dev1.dev-2...]; changed</p>\n\n<pre><code>from theano.tensor.signal import downsample\npooled_out = downsample.max_pool_2d( ... )\n</code></pre>\n\n<p>to</p>\n\n<pre><code>from theano.tensor.signal import pool\npooled_out = pool.pool_2d( ... )\n</code></pre>\n\n<p>in /lib/python2.7/site-packages/lasagne/layers/pool.py </p>\n"}], "owner": {"reputation": 329, "user_id": 4744673, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/caf81b0af7fc0f5123363c3fb0d28a02?s=128&d=identicon&r=PG&f=1", "display_name": "Amn Kh", "link": "https://stackoverflow.com/users/4744673/amn-kh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13683, "favorite_count": 4, "accepted_answer_id": 39501251, "answer_count": 4, "score": 5, "last_activity_date": 1515383583, "creation_date": 1473896057, "question_id": 39501152, "link": "https://stackoverflow.com/questions/39501152/importerror-no-module-named-downsample", "title": "ImportError: No module named downsample", "body": "<p>I am using Theano. The OS is Ubuntu. The Theano is UPTODATE. I am wondering why I am getting by <code>from theano.tensor.signal.downsample import max_pool_2d</code> command.</p>\n\n<p><code>ImportError: No module named downsample</code>.</p>\n"}, {"tags": ["python", "regex", "django"], "comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1473895595, "post_id": 39501066, "comment_id": 66319558, "body": "<code>(?P&lt;question_id&gt;...)</code> is only the syntax for a &quot;named capture&quot; group. Instead of using an index for capture group, you can use a name. Obviously <code>?</code> isn&#39;t a quantifier here."}], "answers": [{"tags": [], "owner": {"reputation": 2952, "user_id": 5244995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CPafo.png?s=128&g=1", "display_name": "Jed Fox", "link": "https://stackoverflow.com/users/5244995/jed-fox"}, "is_accepted": false, "score": 0, "last_activity_date": 1473895700, "creation_date": 1473895700, "answer_id": 39501099, "question_id": 39501066, "link": "https://stackoverflow.com/questions/39501066/regex-interpretaion-in-django-tutorial/39501099#39501099", "title": "Regex interpretaion in Django tutorial", "body": "<p>The <code>(?P&lt;<em>name</em>><em>...</em>)</code> means that this regex has a <em>named capture group</em>, unlike the <code>(...)</code> syntax, which is a numbered capture group. Django takes the named parameters and passes them to your view.</p>\n"}, {"tags": [], "owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "is_accepted": false, "score": 0, "last_activity_date": 1473895759, "creation_date": 1473895759, "answer_id": 39501107, "question_id": 39501066, "link": "https://stackoverflow.com/questions/39501066/regex-interpretaion-in-django-tutorial/39501107#39501107", "title": "Regex interpretaion in Django tutorial", "body": "<p><strong><code>^(?P&lt;question_id&gt;[0-9]+)/$</code></strong></p>\n\n<pre><code>^ assert position at start of the string\n(?P&lt;question_id&gt;[0-9]+) Named capturing group \"question_id\"\n    [0-9]+ match a single character present in the list below:\n\n        Quantifier: + Between one and unlimited times, as many times as possible, \n        giving back as needed [greedy]\n        0-9 a single character in the range between 0 and 9\n\n$ assert position at end of the string\n</code></pre>\n\n<p>Demo and full explanation: <a href=\"https://regex101.com/r/zV3rZ1/1\" rel=\"nofollow\">https://regex101.com/r/zV3rZ1/1</a></p>\n"}, {"comments": [{"owner": {"reputation": 348, "user_id": 3830766, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/AKwJg.jpg?s=128&g=1", "display_name": "Micks Ketches", "link": "https://stackoverflow.com/users/3830766/micks-ketches"}, "edited": false, "score": 0, "creation_date": 1473896271, "post_id": 39501151, "comment_id": 66319720, "body": "Thanks for the clarification, so does that mean that naming it <code>question_id</code> is arbitrary and does not &#39;matter&#39; to the regex statement?"}, {"owner": {"reputation": 545, "user_id": 6225559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8954de43ac82de79f2161ccc9556d580?s=128&d=identicon&r=PG&f=1", "display_name": "nephlm", "link": "https://stackoverflow.com/users/6225559/nephlm"}, "reply_to_user": {"reputation": 348, "user_id": 3830766, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/AKwJg.jpg?s=128&g=1", "display_name": "Micks Ketches", "link": "https://stackoverflow.com/users/3830766/micks-ketches"}, "edited": false, "score": 0, "creation_date": 1473896476, "post_id": 39501151, "comment_id": 66319777, "body": "I added a note to the answer.  It&#39;s meaningful in the sense that it is a keyword argument that is passed to the view.  If you changed it, a different keyword arg would be passed to the view.  Either would work as long as the view and the url agreed on the keyword."}], "tags": [], "owner": {"reputation": 545, "user_id": 6225559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8954de43ac82de79f2161ccc9556d580?s=128&d=identicon&r=PG&f=1", "display_name": "nephlm", "link": "https://stackoverflow.com/users/6225559/nephlm"}, "is_accepted": true, "score": 2, "last_activity_date": 1473896345, "last_edit_date": 1473896345, "creation_date": 1473896044, "answer_id": 39501151, "question_id": 39501066, "link": "https://stackoverflow.com/questions/39501066/regex-interpretaion-in-django-tutorial/39501151#39501151", "title": "Regex interpretaion in Django tutorial", "body": "<p>The <code>(?P&lt;question_id&gt;.*)</code> Says everything captured by the regex inside the parenthesis will be in a named group called question_id.  It can be directly addressed.  So the regex doesn't know it is a foreign key or anything of the sort, just that there is a group named <code>question_id</code>.   The parenthesis isn't really matched in the incoming string.</p>\n\n<p>The <code>[0-9]+</code> matches and numeric string 1 or more digits long.  </p>\n\n<p><code>^</code> is the start of the string.  <code>$</code> is the end of the string.  <code>^, $, (?P&lt;question_id&gt;, and )</code> are somewhat meta and aren't impacted by the string so much as the string's position and how the regex extracted groups will be referenced.  </p>\n\n<p>The captured group is passed to the view (detail in this case) as a keyword argument and it's up to the view to make use of it in a meaningful way. </p>\n"}, {"tags": [], "owner": {"reputation": 325, "user_id": 1112457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/070c2f80b17cfd6557e093ef84ab185d?s=128&d=identicon&r=PG", "display_name": "gavriel", "link": "https://stackoverflow.com/users/1112457/gavriel"}, "is_accepted": false, "score": 0, "last_activity_date": 1473896620, "creation_date": 1473896620, "answer_id": 39501219, "question_id": 39501066, "link": "https://stackoverflow.com/questions/39501066/regex-interpretaion-in-django-tutorial/39501219#39501219", "title": "Regex interpretaion in Django tutorial", "body": "<p>It captures [0-9]+ under the name question_id. Then it passes the captured number to the view function as a parameter. You can try it with re functions. It is not Django specific.</p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; re.match(r'^(?P&lt;question_id&gt;[0-9]+)/$', '122/').groupdict()\n{'question_id': '122'}\n</code></pre>\n"}], "owner": {"reputation": 348, "user_id": 3830766, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/AKwJg.jpg?s=128&g=1", "display_name": "Micks Ketches", "link": "https://stackoverflow.com/users/3830766/micks-ketches"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 39501151, "answer_count": 4, "score": 1, "last_activity_date": 1473896620, "creation_date": 1473895310, "question_id": 39501066, "link": "https://stackoverflow.com/questions/39501066/regex-interpretaion-in-django-tutorial", "title": "Regex interpretaion in Django tutorial", "body": "<p>despite being familiar with the basics of regex, the tutorial for <a href=\"https://docs.djangoproject.com/en/1.10/intro/tutorial03/#writing-more-views\" rel=\"nofollow\">Django 1.10</a> does not go into much detail about how some regex generates dynamic links. \nI am looking at this specific snippet under the polls/urls.py: </p>\n\n<pre><code>url(r'^(?P&lt;question_id&gt;[0-9]+)/$', views.detail, name='detail'),\n</code></pre>\n\n<p>Could someone go into detail about how that regex is interpreted? The quantifiers at the start of the capture group, <code>(?P&lt;question_id&gt;</code> do not make sense to me. Specifically, how does Django know that <code>&lt;question_id&gt;</code> is a foreign key?</p>\n"}, {"tags": ["python", "python-2.7", "xpath", "web-scraping", "scrapy"], "answers": [{"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 2, "last_activity_date": 1473901507, "last_edit_date": 1473901507, "creation_date": 1473901158, "answer_id": 39501745, "question_id": 39501019, "link": "https://stackoverflow.com/questions/39501019/scrapy-response-have-backslashes-into-element-attributes/39501745#39501745", "title": "Scrapy response have backslashes into element attributes", "body": "<p>There is a very simple solution, you get <a href=\"http://www.w3schools.com/json/\" rel=\"nofollow\"><em>json</em></a> back <em>not html</em>:</p>\n\n<pre><code>url = 'http://www.ldg.co.uk/wp-admin/admin-ajax.php'\n\ndata = {'action': 'wpp_property_overview_pagination',\n        'wpp_ajax_query[show_children]': 'true',\n        'wpp_ajax_query[disable_wrapper]': 'true',\n        'wpp_ajax_query[pagination]': 'off',\n        'wpp_ajax_query[per_page]': '10',\n        'wpp_ajax_query[query][property_category]': 'residential',\n        'wpp_ajax_query[query][listing_type]': 'rent',\n        'wpp_ajax_query[query][sort_by]': 'price_rent',\n        'wpp_ajax_query[query][sort_order]': 'ASC',\n        'wpp_ajax_query[query][pagi]': '0--10',\n        'wpp_ajax_query[sorter]': '',\n        'wpp_ajax_query[sort_by]': 'price_rent',\n        'wpp_ajax_query[sort_order]': 'ASC',\n        'wpp_ajax_query[template]': 'ajax',\n        'wpp_ajax_query[requested_page]': '2'}\nimport requests\nprint(requests.post(url, data).json())\n</code></pre>\n\n<p>Which would give you:</p>\n\n<pre><code>{u'display': u'        &lt;section class=\"property-card new-post\"&gt;\\n            &lt;div class=\"property-thumb\"&gt;\\n                &lt;a class=\"property-image\" href=\"http://www.ldg.co.uk/residential/1-bedroom-property-for-rent-lisson-street-marylebone-london-101588004937/\" title=\"Lisson Street, Marylebone, London\"&gt;\\n                    &lt;img src=\"http://www.ldg.co.uk/wp-content/uploads/2016/08/IMG_4427_6_large.jpg\" alt=\"Lisson Street, Marylebone, London thumbnail\"&gt;\\n\\n                                    &lt;/a&gt;\\n            &lt;/div&gt;&lt;!-- /.property-thumb --&gt;\\n\\n            &lt;div class=\"property-content\"&gt;\\n                                    &lt;header class=\"property-title\"&gt;\\n                        &lt;h2&gt;\\n                            &lt;a  href=\"http://www.ldg.co.uk/residential/1-bedroom-property-for-rent-lisson-street-marylebone-london-101588004937/\"&gt;Lisson Street, Marylebone, London&lt;/a&gt;\\n                        &lt;/h2&gt;\\n                    &lt;/header&gt;\\n                \\n                &lt;span class=\"property-style-tenure\"&gt;&lt;/span&gt;\\n                &lt;div class=\"property-details\"&gt;\\n\\n                    \\n                                                    &lt;div class=\"property-price\"&gt;\\n                                &lt;div class=\"property-style-tenure\"&gt;&lt;span&gt;&lt;/span&gt;&lt;/div&gt;\\xa3420&lt;small&gt;/pw&lt;/small&gt;\\n                                                                    &lt;span class=\"fees-link-wrapper\"&gt;+ &lt;a target=\"_blank\" href=\"http://www.ldg.co.uk/residential/property-lettings/fees-and-charges/\"&gt;fees&lt;/a&gt;&lt;/span&gt;\\n                                                            &lt;/div&gt;\\n                        \\n                    \\n                    &lt;div class=\"property-features\"&gt;\\n                                                    &lt;div class=\"property-feature\"&gt;\\n                                &lt;div class=\"property-living_rooms\"&gt;\\n                                    &lt;span class=\"esf-icon esf-32 esf-icon-living_rooms\"&gt;&lt;/span&gt;\\n                                    1                                    Reception                                &lt;/div&gt;\\n                            &lt;/div&gt;\\n                        \\n                                                    &lt;div class=\"property-feature\"&gt;\\n                                &lt;div class=\"property-bedrooms\"&gt;\\n                                    &lt;span class=\"esf-icon esf-32 esf-icon-bedrooms\"&gt;&lt;/span&gt;\\n                                    1                                    Bedroom                                &lt;/div&gt;\\n                            &lt;/div&gt;\\n                        \\n                                                    &lt;div class=\"property-feature\"&gt;\\n                                &lt;div class=\"property-bathrooms\"&gt;\\n                                    &lt;span class=\"esf-icon esf-32 esf-icon-bathrooms\"&gt;&lt;/span&gt;\\n                                    1                                    Bathroom                                &lt;/div&gt;\\n                            &lt;/div&gt;\\n                                            &lt;/div&gt;&lt;!-- /.property-features --&gt;\\n\\n\\n                        &lt;div class=\"property-media\"&gt;\\n                                                              &lt;a href=\"http://www.ldg.co.uk/wp-content/uploads/2016/09/FLP_4427_1_large-743x1024.png\" target=\"_blank\" class=\"alternative-link fancybox \" rel=\"fancybox-group\"&gt;View Floor Plan&lt;/a&gt;\\n      \\n                                                                                                &lt;span class=\"separator\"&gt;|&lt;/span&gt;\\n                                                                &lt;a href=\"http://media2.jupix.co.uk/v3/clients/1588/properties/4427/MED_4427_6235.pdf\" target=\"_blank\" class=\"alternative-link\"&gt;Download Brochure&lt;/a&gt;\\n                                                    &lt;/div&gt;&lt;!-- /.property-media --&gt;\\n\\n                    &lt;div class=\"property-read-more\"&gt;\\n                        &lt;a href=\"http://www.ldg.co.uk/residential/1-bedroom-property-for-rent-lisson-street-marylebone-london-101588004937/\" class=\"btn btn-sm lighter-dark-primary-color\"&gt;\\n                            View Details\\n                        &lt;/a&gt;\\n                    &lt;/div&gt;\\n                &lt;/div&gt;&lt;!-- /.property-details --&gt;\\n            &lt;/div&gt;&lt;!-- /.property-content --&gt;\\n        &lt;/section&gt;\\n            &lt;section class=\"property-card new-post\"&gt;\\n            &lt;div class=\"property-thumb\"&gt;\\n                &lt;a class=\"property-image\" href=\"http://www.ldg.co.uk/residential/1-bedroom-property-for-rent-riding-house-street-fitzrovia-london-101588003963/\" title=\"Riding House Street, Fitzrovia, London\"&gt;\\n                    &lt;img src=\"http://www.ldg.co.uk/wp-content/uploads/2016/09/IMG_3453_10_large.jpg\" alt=\"Riding House Street, Fitzrovia, London thumbnail\"&gt;\\n\\n                                    &lt;/a&gt;\\n            &lt;/div&gt;&lt;!-- /.property-thumb --&gt;\\n\\n            &lt;div class=\"property-content\"&gt;\\n                                    &lt;header class=\"property-title\"&gt;\\n                        &lt;h2&gt;\\n                            &lt;a  href=\"http://www.ldg.co.uk/residential/1-bedroom-property-for-rent-riding-house-street-fitzrovia-london-101588003963/\"&gt;Riding House Street, Fitzrovia, London&lt;/a&gt;\\n                        &lt;/h2&gt;\\n                    &lt;/header&gt;\\n                \\n                &lt;span class=\"property-style-tenure\"&gt;&lt;/span&gt;\\n                &lt;div class=\"property-details\"&gt;\\n\\n                    \\n                                                    &lt;div class=\"property-price\"&gt;\\n                                &lt;div class=\"property-style-tenure\"&gt;&lt;span&gt;&lt;/span&gt;&lt;/div&gt;\\xa3425&lt;small&gt;/pw&lt;/small&gt;\\n                                                                    &lt;span class=\"fees-link-wrapper\"&gt;+ &lt;a target=\"_blank\" href=\"http://www.ldg.co.uk/residential/property-lettings/fees-and-charges/\"&gt;fees&lt;/a&gt;&lt;/span&gt;\\n                                                            &lt;/div&gt;\\n                        \\n                    \\n                    &lt;div class=\"property-features\"&gt;\\n                                                    &lt;div class=\"property-feature\"&gt;\\n                                &lt;div class=\"property-living_rooms\"&gt;\\n                                    &lt;span class=\"esf-icon esf-32 esf-icon-living_rooms\"&gt;&lt;/span&gt;\\n                                    1                                    Reception                                &lt;/div&gt;\\n                            &lt;/div&gt;\\n                        \\n                                                    &lt;div class=\"property-feature\"&gt;\\n                                &lt;div class=\"property-bedrooms\"&gt;\\n                                    &lt;span class=\"esf-icon esf-32 esf-icon-bedrooms\"&gt;&lt;/span&gt;\\n                                    1                                    Bedroom                                &lt;/div&gt;\\n                            &lt;/div&gt;\\n                        \\n                                                    &lt;div class=\"property-feature\"&gt;\\n                                &lt;div class=\"property-bathrooms\"&gt;\\n                                    &lt;span class=\"esf-icon esf-32 esf-icon-bathrooms\"&gt;&lt;/span&gt;\\n                                    1                                    Bathroom                                &lt;/div&gt;\\n                            &lt;/div&gt;\\n                                            &lt;/div&gt;&lt;!-- /.property-features --&gt;\\n\\n\\n                        &lt;div class=\"property-media\"&gt;\\n                                                              &lt;a href=\"http://www.ldg.co.uk/wp-content/uploads/2016/09/FLP_3453_1_large-724x1024.png\" target=\"_blank\" class=\"alternative-link fancybox \" rel=\"fancybox-group\"&gt;View Floor Plan&lt;/a&gt;\\n      \\n                                                                                                &lt;span class=\"separator\"&gt;|&lt;/span&gt;\\n                                                                &lt;a href=\"http://media2.jupix.co.uk/v3/clients/1588/properties/3453/MED_3453_6286.pdf\" target=\"_blank\" class=\"alternative-link\"&gt;Download Brochure&lt;/a&gt;\\n                                                    &lt;/div&gt;&lt;!-- /.property-media --&gt;\\n\\n                    &lt;div class=\"property-read-more\"&gt;\\n                        &lt;a href=\"http://www.ldg.co.uk/residential/1-bedroom-property-for-rent-riding-house-street-fitzrovia-london-101588003963/\" class=\"btn btn-sm lighter-dark-primary-color\"&gt;\\n                            View Details\\n                        &lt;/a&gt;\\n                    &lt;/div&gt;\\n                &lt;/div&gt;&lt;!-- /.property-details --&gt;\\n            &lt;/div&gt;&lt;!-- /.property-content --&gt;\\n        &lt;/section&gt;\\n            &lt;section class=\"property-card new-post\"&gt;\\n            &lt;div class=\"property-thumb\"&gt;\\n                &lt;a class=\"property-image\" href=\"http://www.ldg.co.uk/residential/1-bedroom-property-for-rent-grays-inn-road-bloomsbury-london-101588004443/\" title=\"Grays Inn Road, Bloomsbury, London\"&gt;\\n                    &lt;img src=\"http://www.ldg.co.uk/wp-content/uploads/2016/08/IMG_3933_1_large.jpg\" alt=\"Grays Inn Road, Bloomsbury, London thumbnail\"&gt;\\n\\n                                    &lt;/a&gt;\\n            &lt;/div&gt;&lt;!-- /.property-thumb --&gt;\\n\\n            &lt;div class=\"property-content\"&gt;\\n                                    &lt;header class=\"property-title\"&gt;\\n                        &lt;h2&gt;\\n                            &lt;a  href=\"http://www.ldg.co.uk/residential/1-bedroom-property-for-rent-grays-inn-road-bloomsbury-london-101588004443/\"&gt;Grays Inn Road, Bloomsbury, London&lt;/a&gt;\\n                        &lt;/h2&gt;\\n                    &lt;/header&gt;\\n                \\n                &lt;span class=\"property-style-tenure\"&gt;&lt;/span&gt;\\n                &lt;div class=\"property-details\"&gt;\\n\\n                    \\n                                                    &lt;div class=\"property-price\"&gt;\\n                                &lt;div class=\"property-style-tenure\"&gt;&lt;span&gt;&lt;/span&gt;&lt;/div&gt;\\xa3430&lt;small&gt;/pw&lt;/small&gt;\\n                                                                    &lt;span class=\"fees-link-wrapper\"&gt;+ &lt;a target=\"_blank\" href=\"http://www.ldg.co.uk/residential/property-lettings/fees-and-charges/\"&gt;fees&lt;/a&gt;&lt;/span&gt;\\n                                                            &lt;/div&gt;\\n                        \\n                    \\n                    &lt;div class=\"property-features\"&gt;\\n                                                    &lt;div class=\"property-feature\"&gt;\\n                                &lt;div class=\"property-living_rooms\"&gt;\\n                                    &lt;span class=\"esf-icon esf-32 esf-icon-living_rooms\"&gt;&lt;/span&gt;\\n                                    1                                    Reception                                &lt;/div&gt;\\n                            &lt;/div&gt;\\n                        \\n                                                    &lt;div class=\"property-feature\"&gt;\\n                                &lt;div class=\"property-bedrooms\"&gt;\\n                                    &lt;span class=\"esf-icon esf-32 esf-icon-bedrooms\"&gt;&lt;/span&gt;\\n                                    1                                    Bedroom                                &lt;/div&gt;\\n                            &lt;/div&gt;\\n                        \\n                                                    &lt;div class=\"property-feature\"&gt;\\n                                &lt;div class=\"property-bathrooms\"&gt;\\n                                    &lt;span class=\"esf-icon esf-32 esf-icon-bathrooms\"&gt;&lt;/span&gt;\\n                                    1                                    Bathroom                                &lt;/div&gt;\\n                            &lt;/div&gt;\\n                                            &lt;/div&gt;&lt;!-- /.property-features --&gt;\\n\\n\\n                        &lt;div class=\"property-media\"&gt;\\n                                                        \\n                                                                                            &lt;a href=\"http://media2.jupix.co.uk/v3/clients/1588/properties/3933/MED_3933_5539.pdf\" target=\"_blank\" class=\"alternative-link\"&gt;Download Brochure&lt;/a&gt;\\n                                                    &lt;/div&gt;&lt;!-- /.property-media --&gt;\\n\\n                    &lt;div class=\"property-read-more\"&gt;\\n                        &lt;a href=\"http://www.ldg.co.uk/residential/1-bedroom-property-for-rent-grays-inn-road-bloomsbury-london-101588004443/\" class=\"btn btn-sm lighter-dark-primary-color\"&gt;\\n                            View Details\\n                        &lt;/a&gt;\\n                    &lt;/div&gt;\\n                &lt;/div&gt;&lt;!-- /.property-details --&gt;\\n            &lt;/div&gt;&lt;!-- /.property-content --&gt;\\n        &lt;/section&gt;\\n    ', u'wpp_query': {u'starting_row': 10, u'pagination': u'off', u'show_layout_toggle': False, u'current_page': u'2', u'requested_page': u'2', u'show_children': u'true', u'sortable_attrs': {u'menu_order': u'Default'}, u'sort_by': u'price_rent', u'sort_order': u'ASC', u'ajax_call': True, u'template': u'ajax', u'per_page': u'10', u'query': {u'sort_by': u'price_rent', u'pagi': u'10--10', u'listing_type': u'rent', u'sort_order': u'ASC', u'property_category': u'residential'}, u'sorter': u'', u'disable_wrapper': u'true', u'properties': {u'total': 60, u'results': [u'793240', u'836654', u'793035', u'793044', u'793078', u'793307', u'792965', u'793054', u'792811', u'793344']}`}}\n</code></pre>\n\n<p>The extra backslashes are there to escape the quotes etc.. Once you <code>json.loads()</code> the content the extra slashes so in your case call loads on the body:</p>\n\n<pre><code> import json\n\n request = FormRequest(url, formdata = data)\n js = json.loads(fetch(request).body)\n</code></pre>\n\n<p>And to just get the html you would use the key <code>html = js[\"display\"]</code>.</p>\n"}], "owner": {"reputation": 566, "user_id": 2371501, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/65811c6c6deb0c50654e48cd8dd0e077?s=128&d=identicon&r=PG&f=1", "display_name": "osjerick", "link": "https://stackoverflow.com/users/2371501/osjerick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 39501745, "answer_count": 1, "score": 3, "last_activity_date": 1473901507, "creation_date": 1473894963, "question_id": 39501019, "link": "https://stackoverflow.com/questions/39501019/scrapy-response-have-backslashes-into-element-attributes", "title": "Scrapy response have backslashes into element attributes", "body": "<p>I run the following code in a Scrapy Shell, to scrape data using a POST request:</p>\n\n<pre><code>url = 'http://www.ldg.co.uk/wp-admin/admin-ajax.php'\n\ndata = {'action': 'wpp_property_overview_pagination',\n        'wpp_ajax_query[show_children]': 'true',\n        'wpp_ajax_query[disable_wrapper]': 'true',\n        'wpp_ajax_query[pagination]': 'off',\n        'wpp_ajax_query[per_page]': '10',\n        'wpp_ajax_query[query][property_category]': 'residential',\n        'wpp_ajax_query[query][listing_type]': 'rent',\n        'wpp_ajax_query[query][sort_by]': 'price_rent',\n        'wpp_ajax_query[query][sort_order]': 'ASC',\n        'wpp_ajax_query[query][pagi]': '0--10',\n        'wpp_ajax_query[sorter]': '',\n        'wpp_ajax_query[sort_by]': 'price_rent',\n        'wpp_ajax_query[sort_order]': 'ASC',\n        'wpp_ajax_query[template]': 'ajax',\n        'wpp_ajax_query[requested_page]': '2'}\n\nrequest = FormRequest(url, formdata = data)\nfetch(request)\n</code></pre>\n\n<p>I know that inside the response are elements with the class <code>\"property-thumb\"</code>, I've checked it by using Chrome Dev Tools, reading the response content. So, I try to scrape data using the XPath <code>//*[@class=\"property-thumb\"]</code>, this XPath is right (I use a Chrome plugin to check it with the content loaded into the page), but it isn't right if I try to use it from the Scrapy Shell:</p>\n\n<pre><code>In [10]: response.xpath('//*[@class=\"property-thumb\"]')\nOut[10]: []\n</code></pre>\n\n<p>I have noticed that <code>response.body</code> comes with a lot of backslashes, so I've figured out that the correct XPath should be <code>//*[@class=\\'\\\\\"property-thumb\\\\\"\\']</code>:</p>\n\n<pre><code>In [11]: response.xpath('//*[@class=\\'\\\\\"property-thumb\\\\\"\\']')\nOut[11]: \n[&lt;Selector xpath='//*[@class=\\'\\\\\"property-thumb\\\\\"\\']' data=u'&lt;div class=\\'\\\\\"property-thumb\\\\\"\\'&gt;\\\\n      '&gt;,\n &lt;Selector xpath='//*[@class=\\'\\\\\"property-thumb\\\\\"\\']' data=u'&lt;div class=\\'\\\\\"property-thumb\\\\\"\\'&gt;\\\\n      '&gt;,\n &lt;Selector xpath='//*[@class=\\'\\\\\"property-thumb\\\\\"\\']' data=u'&lt;div class=\\'\\\\\"property-thumb\\\\\"\\'&gt;\\\\n      '&gt;]\n</code></pre>\n\n<p>I think there is a problem with the way Scrapy manages strings from responses. Also, I think that those backslashes can generate more problems when scraping. Why do this happen? How can I solve it to use normal XPaths?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 1, "creation_date": 1473894718, "post_id": 39500940, "comment_id": 66319320, "body": "you could do <code>constructors = {&#39;config&#39;: Config, &#39;make&#39;: Make, ...}</code> and then iterate over <code>constructors</code> instantiating the class and <code>setattr</code> the value on the class, but you really don&#39;t gain much (if anything) there.  Really the problem is you have to say somehow that you want to put an instance of X in property name Y -- And there doesn&#39;t seem to be enough rhyme/reason to really cut down on typing (which isn&#39;t a bad thing per-se).  For me the one red flag that I see is that this class has both <code>self.svn</code> and <code>self.git</code> -- Why would the same class have both?"}, {"owner": {"reputation": 75, "user_id": 5444527, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b423659fb3ff5bddd8e52b8c251eb407?s=128&d=identicon&r=PG&f=1", "display_name": "Dzawor", "link": "https://stackoverflow.com/users/5444527/dzawor"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1473894865, "post_id": 39500940, "comment_id": 66319365, "body": "&#39;For me the one red flag that I see is that this class has both self.svn and self.git -- Why would the same class have both?&#39; It is my company which has one leg in svn and one in git. This programs needs dependency from SVN and Git. I do not like this as well. Thanks for you comment!"}, {"owner": {"reputation": 31108, "user_id": 350351, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b1a41bbf4677c8961237c4d147e764d6?s=128&d=identicon&r=PG", "display_name": "Daenyth", "link": "https://stackoverflow.com/users/350351/daenyth"}, "edited": false, "score": 0, "creation_date": 1474991071, "post_id": 39500940, "comment_id": 66755398, "body": "This utils class seems like a pretty bad code smell. It&#39;s bundling unrelated objects, needlessly combining these apis, tight coupling to the classes in the constructor..."}], "answers": [{"tags": [], "owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "is_accepted": true, "score": 3, "last_activity_date": 1474990966, "last_edit_date": 1474990966, "creation_date": 1473896984, "answer_id": 39501272, "question_id": 39500940, "link": "https://stackoverflow.com/questions/39500940/initializing-many-objects-in-an-elegant-way/39501272#39501272", "title": "Initializing many objects in an elegant way", "body": "<p>I wouldn't create a class and place it as a base, <em>that seems like overkill, too bulky of an approach</em>.</p>\n\n<p>Instead, you could create an auxiliary, helper, function that takes <code>self</code> and <code>setattr</code> on it. An example of this with a couple of objects from <a href=\"https://docs.python.org/3/library/collections.html\" rel=\"nofollow\"><code>collections</code></a> would look like this:</p>\n\n<pre><code>from collections import UserString, deque, UserDict\n\ndef construct(instance, classes = (UserString, deque, UserDict)):\n    for c in classes:\n        setattr(instance, c.__name__.lower(), c([]))\n</code></pre>\n\n<p>Your case also fits nicely since your objects don't have some initial value required, so you can generalize and treat them in the same way :-).</p>\n\n<p>Now your sample class can just call <code>construct()</code> with the defaults in <code>__init__</code> and be done with:</p>\n\n<pre><code>class Foo:\n    def __init__(self):\n        construct(self)\n</code></pre>\n\n<p>the <code>construct</code> function could of course be defined in <code>Utils</code> as required or, as a method in the class. </p>\n"}], "owner": {"reputation": 75, "user_id": 5444527, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b423659fb3ff5bddd8e52b8c251eb407?s=128&d=identicon&r=PG&f=1", "display_name": "Dzawor", "link": "https://stackoverflow.com/users/5444527/dzawor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 39501272, "answer_count": 1, "score": 3, "last_activity_date": 1474990966, "creation_date": 1473894358, "last_edit_date": 1473905266, "question_id": 39500940, "link": "https://stackoverflow.com/questions/39500940/initializing-many-objects-in-an-elegant-way", "title": "Initializing many objects in an elegant way", "body": "<p>I'm looking for a elegant way to initialize many objects.</p>\n\n<p>Let's say that I have a <code>Utils</code> module, which has an interface to SVN, Git, Make and other stuff.</p>\n\n<p>Currently, I'm doing it like this:</p>\n\n<pre><code>from Utils.Config import Config, Properties\nfrom Utils.Utils import PrettyPrint, SVN, Make, Bash, Git\n\nclass Build(object):\n\n    def __init__(self):\n        self.config = Config()\n        self.make = Make()\n        self.env = Properties()\n        self.svn = SVN()\n        self.git = Git()\n        self.bash = Bash()\n        self.pretty_print = PrettyPrint()\n</code></pre>\n\n<p>and.. well, it doesn't looks good. </p>\n\n<p>Is there any way to do this in more elegant way? I suppose that it can be a design problem, but I have no idea how to solve this.</p>\n\n<p>I was thinking about creation <code>Base class</code> which will init all of these classes inside the <code>Utils</code> module. What do you think?</p>\n"}, {"tags": ["python", "angularjs", "django"], "comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 1, "creation_date": 1473894869, "post_id": 39500912, "comment_id": 66319367, "body": "You might need to post the data as <a href=\"http://stackoverflow.com/a/24964658/748858\"><code>x-www-form-urlencoded</code></a>.  By default, angular posts JSON."}, {"owner": {"reputation": 49, "user_id": 6593253, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/58181bb7a871b27d4d1c8ab3cbe5f79c?s=128&d=identicon&r=PG&f=1", "display_name": "Hoang Cong Thinh", "link": "https://stackoverflow.com/users/6593253/hoang-cong-thinh"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1473899226, "post_id": 39500912, "comment_id": 66320449, "body": "so how can i post different data!! example : Image object, file object ...,????"}], "owner": {"reputation": 49, "user_id": 6593253, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/58181bb7a871b27d4d1c8ab3cbe5f79c?s=128&d=identicon&r=PG&f=1", "display_name": "Hoang Cong Thinh", "link": "https://stackoverflow.com/users/6593253/hoang-cong-thinh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 248, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1473894190, "creation_date": 1473894190, "question_id": 39500912, "link": "https://stackoverflow.com/questions/39500912/how-to-send-data-from-angularjs-2-to-django-server", "title": "How to send data from AngularJS 2 to Django Server?", "body": "<p>I spent many time for this work but no result for me... so I want someone can help me!! I used to use http post method of Angular JS 2 like this: </p>\n\n<pre><code>login(email:string, password:string) {\n     let headers = new Headers();\n     headers.append('Content-Type', 'application/json');\n     headers.append('X-CSRFToken', this.getCookie('csrftoken'));\n     return this.http\n     .post(\n        '/accounts/login', \n        JSON.stringify({ email, password }), \n        { headers }\n     ).map(response =&gt; console.log(response))\n\n }\n</code></pre>\n\n<p>It accessed to server with url : \"/accounts/login\" successfully, but when I print data post with command in django : <code>print request.POST</code> It shows for me :  <code>&lt;QueryDict: {}&gt;</code>, I don't why QueryDict empty, </p>\n\n<p>this is my form.html :</p>\n\n<pre><code>  &lt;div class=\"login jumbotron center-block\"&gt;\n   &lt;h1&gt;Login&lt;/h1&gt;\n   &lt;form role=\"form\" (submit)=\"login(event,username.value,         password.value)\"&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;label for=\"username\"&gt;Username&lt;/label&gt;\n        &lt;input type=\"text\" #username class=\"form-control\" id=\"username\" placeholder=\"Username\"&gt;\n      &lt;/div&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;label for=\"password\"&gt;Password&lt;/label&gt;\n        &lt;input type=\"password\" #password class=\"form-control\" id=\"password\" placeholder=\"Password\"&gt;\n      &lt;/div&gt;\n      &lt;button type=\"submit\" class=\"btn btn-default\"&gt;Submit&lt;/button&gt;\n        &lt;a [routerLink]=\"['/signup']\"&gt;Click here to Signup&lt;/a&gt;\n  &lt;/form&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>...\nI can sure that is email and password not null !!</p>\n"}, {"tags": ["python", "anaconda", "jupyter-notebook"], "owner": {"reputation": 307, "user_id": 159554, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/426ef2a8682933aa9f917e7fb60f9892?s=128&d=identicon&r=PG", "display_name": "staypuffinpc", "link": "https://stackoverflow.com/users/159554/staypuffinpc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 645, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1473957466, "creation_date": 1473894177, "last_edit_date": 1473957466, "question_id": 39500905, "link": "https://stackoverflow.com/questions/39500905/jupyter-notebook-anaconda-load-failed-save-is-disabled-error", "title": "Jupyter notebook (Anaconda) &quot;load failed. save is disabled&quot; error", "body": "<p>Ever since I updated to the newest version of Anaconda (Navigator 1.2.1), I have had problems where I will be editing a file and then suddenly I can no longer save the file.  I get the message, <code>\"Load failed.  Save is disabled.\"</code>  Sometimes restarting the kernel will solve this, but other times, I will quit everything, restart, duplicate the file, and still get this problem.  I've tried:</p>\n\n<ol>\n<li>Changing file permissions, but that doesn't appear to solve the problem for me.  </li>\n<li>Uninstalling and reinstalling Anaconda.  This \"Solves\" the problem, but the problem recurs again with new files.  I don't think I can keep uninstalling and reinstalling my different environments.</li>\n<li>Changing Browsers.  Many solutions that I can find online discuss looking at the javascript output for the browser.  However, I open the file in Chrome, Safari, and Firefox and get the same problem in all of them.</li>\n</ol>\n\n<p>Any ideas why I would get this \"Save is disabled\" message in Jupyter?  More importantly, what is causing it and how do I prevent it from occurring?</p>\n"}, {"tags": ["python", "pandas", "pyenchant"], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 1426402, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ab8abfc53e944077482768a250e28534?s=128&d=identicon&r=PG", "display_name": "CaptainBear", "link": "https://stackoverflow.com/users/1426402/captainbear"}, "edited": false, "score": 0, "creation_date": 1473909614, "post_id": 39502018, "comment_id": 66322555, "body": "Unfortunately, I&#39;m getting the same error using the decode line of code. I had to load House from a csv using the encoding ISO-8859-1 because it contains weird characters. Not sure the decode is working--&gt; house[&#39;pet&#39;] = df2[&#39;pet&#39;].str.decode(&#39;utf-8&#39;). Thoughts?"}, {"owner": {"reputation": 147, "user_id": 1426402, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ab8abfc53e944077482768a250e28534?s=128&d=identicon&r=PG", "display_name": "CaptainBear", "link": "https://stackoverflow.com/users/1426402/captainbear"}, "edited": false, "score": 0, "creation_date": 1473912076, "post_id": 39502018, "comment_id": 66323089, "body": "Unfortunately, that&#39;s not working either. I&#39;m guessing special characters are stuck in the pet column and pyenchant can&#39;t interpret them."}, {"owner": {"reputation": 29554, "user_id": 839957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3ac5824c6cc4817a754a186d6a45a08b?s=128&d=identicon&r=PG", "display_name": "maxymoo", "link": "https://stackoverflow.com/users/839957/maxymoo"}, "reply_to_user": {"reputation": 147, "user_id": 1426402, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ab8abfc53e944077482768a250e28534?s=128&d=identicon&r=PG", "display_name": "CaptainBear", "link": "https://stackoverflow.com/users/1426402/captainbear"}, "edited": false, "score": 0, "creation_date": 1473917628, "post_id": 39502018, "comment_id": 66324624, "body": "can you find the problematic word and include it in your question?"}], "tags": [], "owner": {"reputation": 29554, "user_id": 839957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3ac5824c6cc4817a754a186d6a45a08b?s=128&d=identicon&r=PG", "display_name": "maxymoo", "link": "https://stackoverflow.com/users/839957/maxymoo"}, "is_accepted": false, "score": 0, "last_activity_date": 1473903838, "creation_date": 1473903838, "answer_id": 39502018, "question_id": 39500899, "link": "https://stackoverflow.com/questions/39500899/spell-checking-a-column-in-python-pandas-pyenchant/39502018#39502018", "title": "Spell Checking a column in Python/Pandas/PyEnchant", "body": "<p>If your dataframe contains bytestrings, you will need to decode them before you pass them to <code>enchant</code>; you can do this with <code>.str.decode('utf-8')</code>. Then to apply your function, the cleanest way to approach this type of situation is usually to use <code>map</code> across your Series rather than iterating. (Also you shouldn't shadow the keyword <code>dict</code>):</p>\n\n<pre><code>checker =  enchant.Dict(\"en_US\")\nhouse = pd.Series([b'caat', b'dogg'])\n\n#decode the bytestrings\nhouse = house.str.decode('utf-8')\n\n#map the spell checker\nhouse.map(lambda x: checker.suggest(x)[0])\n\n# Out[19]:\n# 0    cat\n# 1    dog\n# dtype: object\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 1426402, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ab8abfc53e944077482768a250e28534?s=128&d=identicon&r=PG", "display_name": "CaptainBear", "link": "https://stackoverflow.com/users/1426402/captainbear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1835, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473903838, "creation_date": 1473894127, "last_edit_date": 1473902831, "question_id": 39500899, "link": "https://stackoverflow.com/questions/39500899/spell-checking-a-column-in-python-pandas-pyenchant", "title": "Spell Checking a column in Python/Pandas/PyEnchant", "body": "<p>I'm trying to use Pyenchant to spell check each entry in a column called pets in a pandas dataframe called house.</p>\n\n<pre><code>import enchant\ndict = enchant.Dict(\"en_US\")\n\nfor pets in house:\n     [pets] = dict.suggest([pets])[0]\n</code></pre>\n\n<p>When I run this code, I get an error about not passing bytestrings to Pyenchant. Not sure what to do. Full error text below:</p>\n\n<blockquote>\n  <p>File \"myfile\", line 20, in \n      [pets] = dict.suggest([pets])[0]\n    File \"/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/site-packages/enchant/<strong>init</strong>.py\", line 662, in suggest\n      word = self._StringClass(word)\n    File \"/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/site-packages/enchant/utils.py\", line 152, in <strong>new</strong>\n      raise Error(\"Don't pass bytestrings to pyenchant\")\n  enchant.errors.Error: Don't pass bytestrings to pyenchant</p>\n</blockquote>\n\n<p>How can I fix this? Thanks.</p>\n"}, {"tags": ["python", "pandas", "machine-learning", "scikit-learn", "classification"], "comments": [{"owner": {"reputation": 2447, "user_id": 3006366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVcKL.png?s=128&g=1", "display_name": "ode2k", "link": "https://stackoverflow.com/users/3006366/ode2k"}, "edited": false, "score": 0, "creation_date": 1473898814, "post_id": 39500894, "comment_id": 66320343, "body": "You can do this in <code>sklearn</code> using <code>sklearn.cross_validation.train_test_split</code>. The duplicate post that this was linked to was for using numpy/pandas. <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.cross_validation.train_test_split.html\" rel=\"nofollow noreferrer\">scikit-learn.org/stable/modules/generated/&hellip;</a>"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 2447, "user_id": 3006366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVcKL.png?s=128&g=1", "display_name": "ode2k", "link": "https://stackoverflow.com/users/3006366/ode2k"}, "edited": false, "score": 0, "creation_date": 1473898890, "post_id": 39500894, "comment_id": 66320357, "body": "@ode2k thanks for your comment, isn&#39;t that the very same function my linked question uses?"}, {"owner": {"reputation": 2447, "user_id": 3006366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVcKL.png?s=128&g=1", "display_name": "ode2k", "link": "https://stackoverflow.com/users/3006366/ode2k"}, "edited": false, "score": 0, "creation_date": 1473899356, "post_id": 39500894, "comment_id": 66320484, "body": "Actually, the answer in the linked question uses numpy to split into the 3 sets that you are asking for. I guess sklearn only does the training / test sets, not evaluation set. So if you are able to use numpy for splitting them up, that is a good solution."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 2447, "user_id": 3006366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVcKL.png?s=128&g=1", "display_name": "ode2k", "link": "https://stackoverflow.com/users/3006366/ode2k"}, "edited": false, "score": 0, "creation_date": 1473900399, "post_id": 39500894, "comment_id": 66320683, "body": "Yeah I think I will go for it, thank you @ode2k!"}], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 556, "favorite_count": 0, "closed_date": 1473894262, "answer_count": 0, "score": 0, "last_activity_date": 1473894092, "creation_date": 1473894092, "last_edit_date": 1495540866, "question_id": 39500894, "link": "https://stackoverflow.com/questions/39500894/how-to-split-into-train-test-and-evaluation-sets-in-sklearn", "closed_reason": "Duplicate", "title": "How to split into train, test and evaluation sets in sklearn?", "body": "<p>It's my first time doing classification, sorry in advance for my ignorance.</p>\n\n<p>I have some data and it seems easy to <a href=\"https://stackoverflow.com/questions/31521170/scikit-learn-train-test-split-with-indices\">split into train and test sets with Pandas</a>.</p>\n\n<p>Is there a way to split into train, test and evaluation sets instead?</p>\n"}, {"tags": ["python", "list", "indexing", "tuples", "indices"], "comments": [{"owner": {"reputation": 7900, "user_id": 2259934, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/lqiMo.jpg?s=128&g=1", "display_name": "Paul Becotte", "link": "https://stackoverflow.com/users/2259934/paul-becotte"}, "edited": false, "score": 0, "creation_date": 1473894161, "post_id": 39500876, "comment_id": 66319161, "body": "You realize that list comprehension is a loop... right?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1473897400, "post_id": 39500876, "comment_id": 66319998, "body": "Make <code>tuplelist2</code> a set if you have a lof of data to check"}], "answers": [{"comments": [{"owner": {"reputation": 586, "user_id": 873389, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c256eb7df3685e3d906de0d8bbd45ca0?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/873389/kenny"}, "edited": false, "score": 0, "creation_date": 1473895412, "post_id": 39500933, "comment_id": 66319515, "body": "Does this just list the index of list 1 if it exists in list 2? Perhaps <code>if pair == tupleList2[index]</code>?"}, {"owner": {"reputation": 1540, "user_id": 4665213, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/laERR.jpg?s=128&g=1", "display_name": "Curtis Lusmore", "link": "https://stackoverflow.com/users/4665213/curtis-lusmore"}, "reply_to_user": {"reputation": 586, "user_id": 873389, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c256eb7df3685e3d906de0d8bbd45ca0?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/873389/kenny"}, "edited": false, "score": 0, "creation_date": 1473895768, "post_id": 39500933, "comment_id": 66319601, "body": "Yes, this just tests for the existence of the tuple in the other list, not that it appears at the same index. Your code should work if you require it to appear at the same index."}], "tags": [], "owner": {"reputation": 1540, "user_id": 4665213, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/laERR.jpg?s=128&g=1", "display_name": "Curtis Lusmore", "link": "https://stackoverflow.com/users/4665213/curtis-lusmore"}, "is_accepted": true, "score": 2, "last_activity_date": 1473894296, "creation_date": 1473894296, "answer_id": 39500933, "question_id": 39500876, "link": "https://stackoverflow.com/questions/39500876/find-the-indicies-of-common-tuples-in-two-list-of-tuples-without-loop-in-python/39500933#39500933", "title": "Find the indicies of common tuples in two list of tuples without loop in Python", "body": "<p>With a list comprehension, you could do</p>\n\n<pre><code>indices_of_shared = [index for (index, pair) in enumerate(tuplelist1) if pair in tuplelist2]\n</code></pre>\n"}], "owner": {"reputation": 203, "user_id": 2687490, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1039094238/picture?type=large", "display_name": "Emmanuel Sunil", "link": "https://stackoverflow.com/users/2687490/emmanuel-sunil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 39500933, "answer_count": 1, "score": -1, "last_activity_date": 1473894296, "creation_date": 1473893977, "question_id": 39500876, "link": "https://stackoverflow.com/questions/39500876/find-the-indicies-of-common-tuples-in-two-list-of-tuples-without-loop-in-python", "title": "Find the indicies of common tuples in two list of tuples without loop in Python", "body": "<p>How can one find the indexes of the common tuples in two list of tuples?</p>\n\n<pre><code>tuplelist1 = [(\"a\",\"b\"), (\"c\",\"d\"), (\"e\",\"f\"), (\"g\",\"h\")]\ntuplelist2 = [(\"c\",\"d\"),(\"e\",\"f\")]\n</code></pre>\n\n<p>So the indices in tuplelist1 that are common with tupplelist2 are indices 1 and 2.</p>\n\n<p>Is there a way to figure this out without a loop? Is there a way to do this with sets or list comprehension, for instance?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 3, "creation_date": 1473893767, "post_id": 39500827, "comment_id": 66319054, "body": "<code>not any(d.values())</code>"}, {"owner": {"reputation": 2117, "user_id": 346624, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/baa4359ec66a457c0055d1a742cee30e?s=128&d=identicon&r=PG", "display_name": "shaz", "link": "https://stackoverflow.com/users/346624/shaz"}, "reply_to_user": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1473895754, "post_id": 39500827, "comment_id": 66319596, "body": "Peter Wood, can you enter your comment as an answer so I can accept it?"}], "answers": [{"tags": [], "owner": {"reputation": 2117, "user_id": 346624, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/baa4359ec66a457c0055d1a742cee30e?s=128&d=identicon&r=PG", "display_name": "shaz", "link": "https://stackoverflow.com/users/346624/shaz"}, "is_accepted": false, "score": 1, "last_activity_date": 1473919840, "creation_date": 1473919840, "answer_id": 39504138, "question_id": 39500827, "link": "https://stackoverflow.com/questions/39500827/reduce-dictionary-of-deque-to-single-boolean/39504138#39504138", "title": "Reduce dictionary of deque to single boolean", "body": "<p>As Peter Wood kindly pointed out, <code>not any(d.values())</code> does the trick nicely. </p>\n"}], "owner": {"reputation": 2117, "user_id": 346624, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/baa4359ec66a457c0055d1a742cee30e?s=128&d=identicon&r=PG", "display_name": "shaz", "link": "https://stackoverflow.com/users/346624/shaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1473919840, "creation_date": 1473893699, "question_id": 39500827, "link": "https://stackoverflow.com/questions/39500827/reduce-dictionary-of-deque-to-single-boolean", "title": "Reduce dictionary of deque to single boolean", "body": "<p>I want d to evaluate to <code>True</code> iff all values in <code>d</code> are empty</p>\n\n<pre><code>from collections import deque\n\nd = {'a': deque([1,2,3]), 'b': deque([1,2,3]), 'c': deque([1,2,3])}\n</code></pre>\n\n<p>I've tried <code>reduce</code> but I'm clearly missing something important. </p>\n\n<p>Thanks in advance! </p>\n"}, {"tags": ["python", "django", "python-2.7"], "comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1473893503, "post_id": 39500796, "comment_id": 66318986, "body": "Where in this code are you calling the <code>delete</code> method?  It looks like you&#39;re mocking the <code>delete</code> method when you shouldn&#39;t be..."}, {"owner": {"reputation": 41, "user_id": 4971838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/86Kyn.jpg?s=128&g=1", "display_name": "Bosco Noronha", "link": "https://stackoverflow.com/users/4971838/bosco-noronha"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1473895236, "post_id": 39500796, "comment_id": 66319472, "body": "@mgilson I don&#39;t want to actually call the delete method, that&#39;s why I&#39;m passing a mock of it with &quot;@mock.patch.object(AuthUser, &#39;delete&#39;)&quot;"}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1473895350, "post_id": 39500796, "comment_id": 66319498, "body": "But if <code>AuthUser.delete</code> is what calls <code>oscp.deactivate_user</code>, then when you mock <code>AuthUser.delete</code>, you certainly <i>won&#39;t</i> be calling <code>oscp.deactivate_user</code> because how would the <code>Mock</code> know that it&#39;s supposed to call that method? (hence the failed assertion).  I think you want to <i>not</i> mock AuthUser.delete<code>, but you _do_ want to mock </code>oscp.deactivate_user`."}, {"owner": {"reputation": 41, "user_id": 4971838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/86Kyn.jpg?s=128&g=1", "display_name": "Bosco Noronha", "link": "https://stackoverflow.com/users/4971838/bosco-noronha"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1473895606, "post_id": 39500796, "comment_id": 66319562, "body": "@mgilson Ahhh, makes sense, XGooglers are always helpful :) Thanks!"}], "owner": {"reputation": 41, "user_id": 4971838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/86Kyn.jpg?s=128&g=1", "display_name": "Bosco Noronha", "link": "https://stackoverflow.com/users/4971838/bosco-noronha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1473893452, "creation_date": 1473893375, "last_edit_date": 1473893452, "question_id": 39500796, "link": "https://stackoverflow.com/questions/39500796/how-do-i-check-if-a-function-is-called-in-a-method-of-a-class", "title": "How do I check if a function is called in a method of a class?", "body": "<p>I need to check to see if a specific function \"oscp.deactivate_user()\" is being called in an instance of a method call delete()</p>\n\n<p>Here's what I have so far, the assert fails, when it shouldn't be. </p>\n\n<pre><code>@mock.patch.object(AuthUser, 'delete')\n@mock.patch('oscp.deactivate_user')\ndef test_delete(self, deactivate_user_mock, delete_mock):\n    \"\"\"Test the delete() method in AuthUser\"\"\"\n    authUserObject = mock.Mock()\n    authUserObject.oscp_id = 4\n\n    \"\"\"If delete_from_oscp = True &amp;&amp; oscp_id isset\"\"\"\n    delete_mock_instance = delete_mock(self, True, authUserObject, oscp_id=4)\n    delete_mock_instance.delete_mock.assert_called_once_with(self)\n</code></pre>\n"}, {"tags": ["python", "numbers"], "comments": [{"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "edited": false, "score": 0, "creation_date": 1473892863, "post_id": 39500668, "comment_id": 66318805, "body": "Have you saved your numbers in list literally, like &quot;[&#39;0&#39;]&quot;?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1473894538, "post_id": 39500668, "comment_id": 66319262, "body": "You seem to be confusing columns and rows. <code>reader</code> is a list of rows, and each row is a list of columns."}], "answers": [{"tags": [], "owner": {"reputation": 511, "user_id": 4743540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0cbd6ae5bcb6dbaf736cef5187ca30?s=128&d=identicon&r=PG&f=1", "display_name": "stuartnox", "link": "https://stackoverflow.com/users/4743540/stuartnox"}, "is_accepted": false, "score": 0, "last_activity_date": 1473892745, "creation_date": 1473892745, "answer_id": 39500704, "question_id": 39500668, "link": "https://stackoverflow.com/questions/39500668/im-having-trouble-trying-to-read-the-numbers-0-10-into-a-list-in-python-3-u/39500704#39500704", "title": "I&#39;m having trouble trying to read the numbers (0 - 10) into a list in Python 3 using CSV file and in a column format.", "body": "<pre><code>numlist = list()\nf = open('numbers.csv', 'r')\nwith f:\n    reader = csv.reader(f)\n    for column in reader:\n        numlist.append( int(column[0]) )\nprint( numlist )\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 6824540, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d83e42acd53b947e3e683cc5fe7f8a9d?s=128&d=identicon&r=PG&f=1", "display_name": "Maha", "link": "https://stackoverflow.com/users/6824540/maha"}, "edited": false, "score": 0, "creation_date": 1473905296, "post_id": 39500864, "comment_id": 66321652, "body": "i got the answer in a row instead of column though; I need the answer to be in column format (vertically). each number on each line"}, {"owner": {"reputation": 750, "user_id": 2614339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E8XYP.jpg?s=128&g=1", "display_name": "Aerows", "link": "https://stackoverflow.com/users/2614339/aerows"}, "reply_to_user": {"reputation": 3, "user_id": 6824540, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d83e42acd53b947e3e683cc5fe7f8a9d?s=128&d=identicon&r=PG&f=1", "display_name": "Maha", "link": "https://stackoverflow.com/users/6824540/maha"}, "edited": false, "score": 0, "creation_date": 1473936422, "post_id": 39500864, "comment_id": 66334456, "body": "@VRam Is this more like it?"}, {"owner": {"reputation": 3, "user_id": 6824540, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d83e42acd53b947e3e683cc5fe7f8a9d?s=128&d=identicon&r=PG&f=1", "display_name": "Maha", "link": "https://stackoverflow.com/users/6824540/maha"}, "edited": false, "score": 0, "creation_date": 1473947995, "post_id": 39500864, "comment_id": 66341903, "body": "I tried the new one you said, but still not getting it in a column format. I need each number to be in each line like this: [0,            1,            2,            3,            4,            5,            6,            7,            8,            9,            10]    but vertically not horizontally"}, {"owner": {"reputation": 3, "user_id": 6824540, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d83e42acd53b947e3e683cc5fe7f8a9d?s=128&d=identicon&r=PG&f=1", "display_name": "Maha", "link": "https://stackoverflow.com/users/6824540/maha"}, "edited": false, "score": 0, "creation_date": 1473948216, "post_id": 39500864, "comment_id": 66342072, "body": "basically [0,1,2,3,4,5,6,7,8,9,10] in a column format. So the int_list = [[int(row[0])] for row in reader] actually worked out but not getting that in a column format"}, {"owner": {"reputation": 750, "user_id": 2614339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E8XYP.jpg?s=128&g=1", "display_name": "Aerows", "link": "https://stackoverflow.com/users/2614339/aerows"}, "reply_to_user": {"reputation": 3, "user_id": 6824540, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d83e42acd53b947e3e683cc5fe7f8a9d?s=128&d=identicon&r=PG&f=1", "display_name": "Maha", "link": "https://stackoverflow.com/users/6824540/maha"}, "edited": false, "score": 0, "creation_date": 1473952089, "post_id": 39500864, "comment_id": 66344870, "body": "I think you might have gotten the wrong idea about <code>python lists</code>, <code>python lists</code> do not have an orientation or dimension property, they are just an <code>array</code>. Are you thinking about <code>numpy.arrays</code>?"}, {"owner": {"reputation": 3, "user_id": 6824540, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d83e42acd53b947e3e683cc5fe7f8a9d?s=128&d=identicon&r=PG&f=1", "display_name": "Maha", "link": "https://stackoverflow.com/users/6824540/maha"}, "edited": false, "score": 0, "creation_date": 1473958364, "post_id": 39500864, "comment_id": 66348647, "body": "yeah but my teacher said you can get into this format:   [0,            1,            2,            3,            4,            5,            6,            7,            8,            9,            10] but vertically"}, {"owner": {"reputation": 3, "user_id": 6824540, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d83e42acd53b947e3e683cc5fe7f8a9d?s=128&d=identicon&r=PG&f=1", "display_name": "Maha", "link": "https://stackoverflow.com/users/6824540/maha"}, "edited": false, "score": 0, "creation_date": 1473963345, "post_id": 39500864, "comment_id": 66351288, "body": "is there anyway using the code above to get the number in each line? Like 0 in the first line, 1 in second line, 2 in third line, so on so forth?"}, {"owner": {"reputation": 750, "user_id": 2614339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E8XYP.jpg?s=128&g=1", "display_name": "Aerows", "link": "https://stackoverflow.com/users/2614339/aerows"}, "reply_to_user": {"reputation": 3, "user_id": 6824540, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d83e42acd53b947e3e683cc5fe7f8a9d?s=128&d=identicon&r=PG&f=1", "display_name": "Maha", "link": "https://stackoverflow.com/users/6824540/maha"}, "edited": false, "score": 0, "creation_date": 1473968538, "post_id": 39500864, "comment_id": 66353962, "body": "When you say <i>&quot;each line&quot;</i>, do you mean that you want to print the <code>list</code>? Or do you want to convert it to a <code>string</code>? Then there are lines. In a <code>python list</code>, there are no lines."}, {"owner": {"reputation": 3, "user_id": 6824540, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d83e42acd53b947e3e683cc5fe7f8a9d?s=128&d=identicon&r=PG&f=1", "display_name": "Maha", "link": "https://stackoverflow.com/users/6824540/maha"}, "edited": false, "score": 0, "creation_date": 1473969781, "post_id": 39500864, "comment_id": 66354598, "body": "yeah print the list so that the each number is on each line: [0 on first line, 1 on 2nd line, 2 on third line, ...] looks like a column?"}, {"owner": {"reputation": 750, "user_id": 2614339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E8XYP.jpg?s=128&g=1", "display_name": "Aerows", "link": "https://stackoverflow.com/users/2614339/aerows"}, "reply_to_user": {"reputation": 3, "user_id": 6824540, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d83e42acd53b947e3e683cc5fe7f8a9d?s=128&d=identicon&r=PG&f=1", "display_name": "Maha", "link": "https://stackoverflow.com/users/6824540/maha"}, "edited": false, "score": 0, "creation_date": 1473970160, "post_id": 39500864, "comment_id": 66354790, "body": "Well you have the <code>list</code> already. And there are plenty of resources out there on how to <code>iterate</code> through a list, line breaks <code>\\n</code> and <code>printing</code>, I&#39;m sure you can work it out."}], "tags": [], "owner": {"reputation": 750, "user_id": 2614339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E8XYP.jpg?s=128&g=1", "display_name": "Aerows", "link": "https://stackoverflow.com/users/2614339/aerows"}, "is_accepted": true, "score": 0, "last_activity_date": 1473936386, "last_edit_date": 1473936386, "creation_date": 1473893917, "answer_id": 39500864, "question_id": 39500668, "link": "https://stackoverflow.com/questions/39500668/im-having-trouble-trying-to-read-the-numbers-0-10-into-a-list-in-python-3-u/39500864#39500864", "title": "I&#39;m having trouble trying to read the numbers (0 - 10) into a list in Python 3 using CSV file and in a column format.", "body": "<p>You just need to iterate over each <code>row</code> in your <code>file</code>, cast the first <code>column</code> to <code>int</code> using <code>int()</code> and then add to a <code>list</code>. Here is compact version:</p>\n\n<pre><code>with open('numbers.csv', 'r') as numbers_file:\n    reader = csv.reader(numbers_file)\n    int_list = [int(row[0]) for row in reader]\n\nprint int_list\n</code></pre>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>If you want a <code>column</code> list or <code>nested</code> list, just loop over both <code>columns</code> and <code>rows</code> for the <em>general</em> case:</p>\n\n<pre><code>int_list = [[int(col) for col in row] for row in reader]\n</code></pre>\n\n<p>or in your <em>particular</em> case where you just want the <code>first/only</code> element of each row, just cast the <code>element</code> to a <code>list</code>:</p>\n\n<pre><code>int_list = [[int(row[0])] for row in reader]\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6824540, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d83e42acd53b947e3e683cc5fe7f8a9d?s=128&d=identicon&r=PG&f=1", "display_name": "Maha", "link": "https://stackoverflow.com/users/6824540/maha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 39500864, "answer_count": 2, "score": 0, "last_activity_date": 1473936386, "creation_date": 1473892547, "question_id": 39500668, "link": "https://stackoverflow.com/questions/39500668/im-having-trouble-trying-to-read-the-numbers-0-10-into-a-list-in-python-3-u", "title": "I&#39;m having trouble trying to read the numbers (0 - 10) into a list in Python 3 using CSV file and in a column format.", "body": "<p>I first wrote the numbers in a column into a CSV file but having trouble with the reading part. I want to make into one list and make sure that the numbers are converted into ints</p>\n\n<pre><code>f = open('numbers.csv', 'r')\nwith f:\n    reader = csv.reader(f)\n    for column in reader:\n        print(column)\n</code></pre>\n\n<p>This is what I wrote for my code and here is my output but how do I make it into a list and convert the numbers into integers?</p>\n\n<p>Column:</p>\n\n<pre><code>['0']\n['1']\n['2']\n['3']\n['4']\n['5']\n['6']\n['7']\n['8']\n['9']\n['10']\n</code></pre>\n"}, {"tags": ["python", "scipy", "segmentation-fault", "sparse-matrix"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1473893250, "post_id": 39500649, "comment_id": 66318908, "body": "My guess is a MemoryError that isn&#39;t being trapped nicely.  You may have to study <code>matrix.__getitem__</code> (the indexing method) to see how it does the selection.  Each sparse format does its own indexing.  <code>lil</code> and <code>csr</code> should handle row index well.  <code>coo</code> doesn&#39;t handle index at all.  Indexing sparse matrices isn&#39;t hidden in compiled code like it is for arrays (and it isn&#39;t as fast)."}, {"owner": {"reputation": 45, "user_id": 6710994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7391923dceafb59d8fbdc0c2029ac86?s=128&d=identicon&r=PG&f=1", "display_name": "Doob", "link": "https://stackoverflow.com/users/6710994/doob"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1473893418, "post_id": 39500649, "comment_id": 66318960, "body": "I&#39;ll check that, but as I&#39;m using <code>csr</code> and trying to fetch rows, it should be fine"}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1473909781, "post_id": 39500649, "comment_id": 66322594, "body": "Which version of scipy are you using?  You can check with <code>import scipy; print(scipy.__version__)</code>"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1473955175, "post_id": 39500649, "comment_id": 66346904, "body": "A search on SO or scipy github regarding &#39;sparse&#39; and &#39;segmentation fault&#39; might be in order."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 6710994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7391923dceafb59d8fbdc0c2029ac86?s=128&d=identicon&r=PG&f=1", "display_name": "Doob", "link": "https://stackoverflow.com/users/6710994/doob"}, "edited": false, "score": 0, "creation_date": 1473943817, "post_id": 39500986, "comment_id": 66338791, "body": "Indeed, neither works, <code>sum</code> returns <code>IndexError: index 21870 out-of-bounds in add.reduceat [0, 20815)</code> and the matrix multiplication returns a segmentation fault. So my only solution is to write by myself a slower but more memory efficient code to slice my matrix ?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 45, "user_id": 6710994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7391923dceafb59d8fbdc0c2029ac86?s=128&d=identicon&r=PG&f=1", "display_name": "Doob", "link": "https://stackoverflow.com/users/6710994/doob"}, "edited": false, "score": 0, "creation_date": 1473954846, "post_id": 39500986, "comment_id": 66346701, "body": "While my first guess was a memory error, I now suspect it&#39;s the large number of columns, or rather the large value of some of the column indices.    If it can&#39;t sum or do matrix multiplication it probably will have problems in the learning code."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 3, "last_activity_date": 1473894720, "creation_date": 1473894720, "answer_id": 39500986, "question_id": 39500649, "link": "https://stackoverflow.com/questions/39500649/sparse-matrix-slicing-using-list-of-int/39500986#39500986", "title": "Sparse matrix slicing using list of int", "body": "<p>I think I've recreated the <code>csr</code> row indexing with:</p>\n\n<pre><code>def extractor(indices, N):\n   indptr=np.arange(len(indices)+1)\n   data=np.ones(len(indices))\n   shape=(len(indices),N)\n   return sparse.csr_matrix((data,indices,indptr), shape=shape)\n</code></pre>\n\n<p>Testing on a <code>csr</code> I had hanging around:</p>\n\n<pre><code>In [185]: M\nOut[185]: \n&lt;30x40 sparse matrix of type '&lt;class 'numpy.float64'&gt;'\n    with 76 stored elements in Compressed Sparse Row format&gt;\n\nIn [186]: indices=np.r_[0:20]\n\nIn [187]: M[indices,:]\nOut[187]: \n&lt;20x40 sparse matrix of type '&lt;class 'numpy.float64'&gt;'\n    with 57 stored elements in Compressed Sparse Row format&gt;\n\nIn [188]: extractor(indices, M.shape[0])*M\nOut[188]: \n&lt;20x40 sparse matrix of type '&lt;class 'numpy.float64'&gt;'\n    with 57 stored elements in Compressed Sparse Row format&gt;\n</code></pre>\n\n<p>As with a number of other <code>csr</code> methods, it uses matrix multiplication to produce the final value.  In this case with a sparse matrix with 1 in selected rows.  Time is actually a bit better.</p>\n\n<pre><code>In [189]: timeit M[indices,:]\n1000 loops, best of 3: 515 \u00b5s per loop\nIn [190]: timeit extractor(indices, M.shape[0])*M\n1000 loops, best of 3: 399 \u00b5s per loop\n</code></pre>\n\n<p>In your case the extractor matrix is (len(training_indices),347) in shape, with only <code>len(training_indices)</code> values.  So it is not big.</p>\n\n<p>But if the <code>matrix</code> is so large (or at least the 2nd dimension so big) that it produces some error in the matrix multiplication routines, it could give rise to segmentation fault without python/numpy trapping it.</p>\n\n<p>Does <code>matrix.sum(axis=1)</code> work.  That too uses a matrix multiplication, though with a dense matrix of 1s.   Or <code>sparse.eye(347)*M</code>, a similar size matrix multiplication?</p>\n"}], "owner": {"reputation": 45, "user_id": 6710994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7391923dceafb59d8fbdc0c2029ac86?s=128&d=identicon&r=PG&f=1", "display_name": "Doob", "link": "https://stackoverflow.com/users/6710994/doob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1740, "favorite_count": 2, "accepted_answer_id": 39500986, "answer_count": 1, "score": 4, "last_activity_date": 1473913725, "creation_date": 1473892432, "last_edit_date": 1473913725, "question_id": 39500649, "link": "https://stackoverflow.com/questions/39500649/sparse-matrix-slicing-using-list-of-int", "title": "Sparse matrix slicing using list of int", "body": "<p>I'm writing a machine learning algorithm on huge &amp; sparse data (my matrix is of shape (347, 5 416 812 801) but very sparse, only 0.13% of the data is non zero. </p>\n\n<p>My sparse matrix's size is 105 000 bytes (&lt;1Mbytes) and is of <code>csr</code> type.</p>\n\n<p>I'm trying to separate  train/test sets by choosing a list of examples indices for each.\nSo I want to split my dataset in two using :</p>\n\n<pre><code>training_set = matrix[train_indices]\n</code></pre>\n\n<p>of shape <code>(len(training_indices), 5 416 812 801)</code>, still sparse</p>\n\n<pre><code>testing_set = matrix[test_indices]\n</code></pre>\n\n<p>of shape <code>(347-len(training_indices), 5 416 812 801)</code> also sparse</p>\n\n<p>With <code>training_indices</code> and <code>testing_indices</code> two <code>list</code> of <code>int</code></p>\n\n<p>But <code>training_set = matrix[train_indices]</code> seems to fail and return a <code>Segmentation fault (core dumped)</code></p>\n\n<p>It might not be a problem of memory, as I'm running this code on a server with 64Gbytes of RAM.</p>\n\n<p>Any clue on what could be the cause ?</p>\n"}, {"tags": ["python", "performance", "pandas", "compiler-optimization", "pypy"], "comments": [{"owner": {"reputation": 7430, "user_id": 3474956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RWbuy.jpg?s=128&g=1", "display_name": "kilojoules", "link": "https://stackoverflow.com/users/3474956/kilojoules"}, "edited": false, "score": 1, "creation_date": 1473892835, "post_id": 39500612, "comment_id": 66318792, "body": "pypy still conflicts with pandas."}, {"owner": {"reputation": 1882, "user_id": 3633522, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8ebdf98424945ffce4b3505269b0cd91?s=128&d=identicon&r=PG&f=1", "display_name": "Afflatus", "link": "https://stackoverflow.com/users/3633522/afflatus"}, "reply_to_user": {"reputation": 7430, "user_id": 3474956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RWbuy.jpg?s=128&g=1", "display_name": "kilojoules", "link": "https://stackoverflow.com/users/3474956/kilojoules"}, "edited": false, "score": 0, "creation_date": 1473892885, "post_id": 39500612, "comment_id": 66318816, "body": "@kilojoules :( (but thanks for letting me know)"}, {"owner": {"reputation": 10650, "user_id": 1556290, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5b37e6b4ac97453e4ba9dba37954cf79?s=128&d=identicon&r=PG", "display_name": "Armin Rigo", "link": "https://stackoverflow.com/users/1556290/armin-rigo"}, "edited": false, "score": 1, "creation_date": 1473931619, "post_id": 39500612, "comment_id": 66331343, "body": "<code>PyDateTime_GET_MONTH(val) = -1;</code> looks like the error posted on <a href=\"http://packages.pypy.org/##pandas\" rel=\"nofollow noreferrer\">packages.pypy.org/##pandas</a> .  If that&#39;s all, someone should fix that.  Contributions welcome!"}, {"owner": {"reputation": 1269, "user_id": 5355776, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/f1f748957585c8ee535122f2762d1f44?s=128&d=identicon&r=PG&f=1", "display_name": "NI6", "link": "https://stackoverflow.com/users/5355776/ni6"}, "edited": false, "score": 0, "creation_date": 1543683482, "post_id": 39500612, "comment_id": 94010409, "body": "@Afflatus did you eventually install pandas over pypy?"}, {"owner": {"reputation": 1882, "user_id": 3633522, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8ebdf98424945ffce4b3505269b0cd91?s=128&d=identicon&r=PG&f=1", "display_name": "Afflatus", "link": "https://stackoverflow.com/users/3633522/afflatus"}, "reply_to_user": {"reputation": 1269, "user_id": 5355776, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/f1f748957585c8ee535122f2762d1f44?s=128&d=identicon&r=PG&f=1", "display_name": "NI6", "link": "https://stackoverflow.com/users/5355776/ni6"}, "edited": false, "score": 0, "creation_date": 1543684142, "post_id": 39500612, "comment_id": 94010615, "body": "@NI6 don&#39;t remember but I doubt it."}, {"owner": {"reputation": 931, "user_id": 5824843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae6ac18604fc6cebd20a2ebb7aa47962?s=128&d=identicon&r=PG&f=1", "display_name": "Spcogg the second", "link": "https://stackoverflow.com/users/5824843/spcogg-the-second"}, "edited": false, "score": 0, "creation_date": 1604584267, "post_id": 39500612, "comment_id": 114395046, "body": "coming back to this Q after much more experience with pandas/python, i highly doubt that using PyPy will speed up pandas, as most of the core pandas routines are written in C and highly performant when used correctly. I.e. it&#39;s highly unlikely you will see large performance gains when using PyPy version of pandas, since it&#39;s probably the same underlying C code anyway. Quick google will show you how to correctly use Pandas in cpython fastly."}], "answers": [{"tags": [], "owner": {"reputation": 1269, "user_id": 5355776, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/f1f748957585c8ee535122f2762d1f44?s=128&d=identicon&r=PG&f=1", "display_name": "NI6", "link": "https://stackoverflow.com/users/5355776/ni6"}, "is_accepted": false, "score": 4, "last_activity_date": 1544004611, "creation_date": 1544004611, "answer_id": 53629797, "question_id": 39500612, "link": "https://stackoverflow.com/questions/39500612/any-way-to-install-pandas-with-pypy/53629797#53629797", "title": "Any way to install Pandas with PyPy?", "body": "<p><a href=\"http://doc.pypy.org/en/latest/release-v5.9.0.html#pypy2-7-and-pypy3-5-v5-9-dual-release\" rel=\"nofollow noreferrer\">pypy v5.9</a> has started to support pandas (and numpy)</p>\n"}, {"comments": [{"owner": {"reputation": 87, "user_id": 6548296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c19b8ecdc8055a06c44bf248d862c704?s=128&d=identicon&r=PG&f=1", "display_name": "hhlw", "link": "https://stackoverflow.com/users/6548296/hhlw"}, "edited": false, "score": 0, "creation_date": 1584628157, "post_id": 57471796, "comment_id": 107499514, "body": "Using it with pip didn&#39;t work for me. I checked PyPy&#39;s website and found this: <a href=\"http://packages.pypy.org/##python-keystoneclient\" rel=\"nofollow noreferrer\">supported packages</a>. Seems like Pandas is not supported (at least not without some hacky workarounds)"}, {"owner": {"reputation": 931, "user_id": 5824843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae6ac18604fc6cebd20a2ebb7aa47962?s=128&d=identicon&r=PG&f=1", "display_name": "Spcogg the second", "link": "https://stackoverflow.com/users/5824843/spcogg-the-second"}, "reply_to_user": {"reputation": 87, "user_id": 6548296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c19b8ecdc8055a06c44bf248d862c704?s=128&d=identicon&r=PG&f=1", "display_name": "hhlw", "link": "https://stackoverflow.com/users/6548296/hhlw"}, "edited": false, "score": 0, "creation_date": 1604584495, "post_id": 57471796, "comment_id": 114395160, "body": "FYI for anyone that found this answer useful, see my comment above on the question - but TL;DR you&#39;re unlikely to get much benefit from doing this, even if it works."}], "tags": [], "owner": {"reputation": 931, "user_id": 5824843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae6ac18604fc6cebd20a2ebb7aa47962?s=128&d=identicon&r=PG&f=1", "display_name": "Spcogg the second", "link": "https://stackoverflow.com/users/5824843/spcogg-the-second"}, "is_accepted": false, "score": 5, "last_activity_date": 1594914980, "last_edit_date": 1594914980, "creation_date": 1565675337, "answer_id": 57471796, "question_id": 39500612, "link": "https://stackoverflow.com/questions/39500612/any-way-to-install-pandas-with-pypy/57471796#57471796", "title": "Any way to install Pandas with PyPy?", "body": "<p>Here's what I've done, assume you're using Conda, but Pip/Venv should work also</p>\n<p>Make a new conda env</p>\n<pre><code>conda create --name pypy_env\nconda activate pypy_env\n</code></pre>\n<p>Install pypy3 using conda</p>\n<pre><code>conda install pypy3\n</code></pre>\n<p>Get Pip for pypy3 using the method here <a href=\"https://stackoverflow.com/questions/42342075/install-pip-on-pypy\">Install pip on pypy</a></p>\n<p>Install packages for pypy using</p>\n<pre><code>pypy3 -m pip install pandas\n</code></pre>\n"}], "owner": {"reputation": 1882, "user_id": 3633522, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8ebdf98424945ffce4b3505269b0cd91?s=128&d=identicon&r=PG&f=1", "display_name": "Afflatus", "link": "https://stackoverflow.com/users/3633522/afflatus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8676, "favorite_count": 0, "answer_count": 2, "score": 15, "last_activity_date": 1594914980, "creation_date": 1473892187, "question_id": 39500612, "link": "https://stackoverflow.com/questions/39500612/any-way-to-install-pandas-with-pypy", "title": "Any way to install Pandas with PyPy?", "body": "<p>I'm trying to run some code using <strong>PyPy</strong> to speed it up. My code uses <strong>Pandas</strong> dataframes, so I'm trying to find a way to install the package... </p>\n\n<p>Unfortunately, I can't find a way to do that... searching online yields <a href=\"http://www.anlytcs.com/2014/01/how-i-reduced-my-data-crunching-time.html\" rel=\"noreferrer\">this</a> and <a href=\"https://github.com/pydata/pandas/issues/9532\" rel=\"noreferrer\">this</a> --  two disappointing results which say it's not possible, but they are <strong>1-2 years old!</strong></p>\n\n<p>There was a glimmer of hope from <a href=\"https://twitter.com/rguillebert/status/624883134258130944\" rel=\"noreferrer\">this twitter post from Romain Guillebert</a> which suggests I could do it using a package called <strong><a href=\"https://github.com/rguillebert/pymetabiosis\" rel=\"noreferrer\">pymetabiosis</a></strong>. Unfortunately when I go to install that, I get the error mentioned below.</p>\n\n<p><strong>Any idea how I can debug the error or find some other way of using Pandas with PyPy</strong>?**</p>\n\n<p><hr>\nError message when installing <strong>pymetabiosis:</strong></p>\n\n<pre><code>Collecting pymetabiosis\n  Using cached pymetabiosis-0.0.1.tar.gz\n    Complete output from command python setup.py egg_info:\n    pymetabiosis/__pycache__/_cffi__x771a6f66x197b9d2b.c:219:13: warning: initializing 'char **' with an expression of type 'const char **' discards qualifiers in nested pointer types [-Wincompatible-pointer-types-discards-qualifiers]\n      { char * *tmp = &amp;p-&gt;ml_name; (void)tmp; }\n                ^     ~~~~~~~~~~~\n    pymetabiosis/__pycache__/_cffi__x771a6f66x197b9d2b.c:220:13: warning: incompatible pointer types initializing 'void **' with an expression of type 'PyCFunction *' (aka 'struct _object *(**)(struct _object *, struct _object *)') [-Wincompatible-pointer-types]\n      { void * *tmp = &amp;p-&gt;ml_meth; (void)tmp; }\n                ^     ~~~~~~~~~~~\n    pymetabiosis/__pycache__/_cffi__x771a6f66x197b9d2b.c:222:13: warning: initializing 'char **' with an expression of type 'const char **' discards qualifiers in nested pointer types [-Wincompatible-pointer-types-discards-qualifiers]\n      { char * *tmp = &amp;p-&gt;ml_doc; (void)tmp; }\n                ^     ~~~~~~~~~~\n    pymetabiosis/__pycache__/_cffi__x771a6f66x197b9d2b.c:1189:30: warning: incompatible pointer types passing 'PyObject *' (aka 'struct _object *') to parameter of type 'PyCodeObject *' [-Wincompatible-pointer-types]\n      { result = PyEval_EvalCode(x0, x1, x2); }\n                                 ^~\n    //anaconda/include/python2.7/eval.h:10:54: note: passing argument to parameter here\n    PyAPI_FUNC(PyObject *) PyEval_EvalCode(PyCodeObject *, PyObject *, PyObject *);\n                                                         ^\n    pymetabiosis/__pycache__/_cffi__x771a6f66x197b9d2b.c:1857:12: warning: incompatible integer to pointer conversion assigning to 'PyObject *' (aka 'struct _object *') from 'int' [-Wint-conversion]\n      { result = PyObject_SetAttr(x0, x1, x2); }\n               ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    pymetabiosis/__pycache__/_cffi__x771a6f66x197b9d2b.c:2164:5: warning: incompatible pointer types assigning to 'PyObject *(*)(size_t, ...)' (aka 'struct _object *(*)(unsigned long, ...)') from 'PyObject *(Py_ssize_t, ...)' (aka 'struct _object *(long, ...)') [-Wincompatible-pointer-types]\n      i = (PyTuple_Pack);\n        ^ ~~~~~~~~~~~~~~\n    6 warnings generated.\n    ld: warning: directory not found for option '-L//anaconda/lib\n    '\n    Traceback (most recent call last):\n      File \"&lt;string&gt;\", line 1, in &lt;module&gt;\n      File \"/private/var/folders/t4/n42mh55n05sd6s5hgk1dzdz80000gp/T/pip-build-fSTXPd/pymetabiosis/setup.py\", line 2, in &lt;module&gt;\n        from pymetabiosis.bindings import ffi\n      File \"pymetabiosis/__init__.py\", line 1, in &lt;module&gt;\n        from pymetabiosis.module import import_module\n      File \"pymetabiosis/module.py\", line 2, in &lt;module&gt;\n        from pymetabiosis.wrapper import MetabiosisWrapper\n      File \"pymetabiosis/wrapper.py\", line 3, in &lt;module&gt;\n        from __pypy__ import identity_dict\n    ImportError: No module named __pypy__\n\n    ----------------------------------------\nCommand \"python setup.py egg_info\" failed with error code -11 in /private/var/folders/t4/n42mh55n05sd6s5hgk1dzdz80000gp/T/pip-build-fSTXPd/pymetabiosis/\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 127, "user_id": 5888544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e33fe1df3f3364f1808cd0a9665d5d1?s=128&d=identicon&r=PG&f=1", "display_name": "redouane", "link": "https://stackoverflow.com/users/5888544/redouane"}, "reply_to_user": {"reputation": 46515, "user_id": 5647260, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oByMV.jpg?s=128&g=1", "display_name": "Andrew Li", "link": "https://stackoverflow.com/users/5647260/andrew-li"}, "edited": false, "score": 2, "creation_date": 1473892271, "post_id": 39500567, "comment_id": 66318619, "body": "Hi, thanks for the response, how do I exactly define it in a global scope? Thing is I&#39;m pretty sure it&#39;s defined since I&#39;m able to print it outside the while loop."}, {"owner": {"reputation": 511, "user_id": 4743540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0cbd6ae5bcb6dbaf736cef5187ca30?s=128&d=identicon&r=PG&f=1", "display_name": "stuartnox", "link": "https://stackoverflow.com/users/4743540/stuartnox"}, "edited": false, "score": 1, "creation_date": 1473892313, "post_id": 39500567, "comment_id": 66318631, "body": "set <code>userInput = None</code> above <code>while</code> loop"}, {"owner": {"reputation": 2094, "user_id": 5508728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P3gtR.jpg?s=128&g=1", "display_name": "jeff carey", "link": "https://stackoverflow.com/users/5508728/jeff-carey"}, "edited": false, "score": 1, "creation_date": 1473892401, "post_id": 39500567, "comment_id": 66318653, "body": "Works fine for me if I define selWord at the top"}, {"owner": {"reputation": 127, "user_id": 5888544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e33fe1df3f3364f1808cd0a9665d5d1?s=128&d=identicon&r=PG&f=1", "display_name": "redouane", "link": "https://stackoverflow.com/users/5888544/redouane"}, "reply_to_user": {"reputation": 511, "user_id": 4743540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0cbd6ae5bcb6dbaf736cef5187ca30?s=128&d=identicon&r=PG&f=1", "display_name": "stuartnox", "link": "https://stackoverflow.com/users/4743540/stuartnox"}, "edited": false, "score": 0, "creation_date": 1473892427, "post_id": 39500567, "comment_id": 66318660, "body": "That worked @stuartnox . Thank you so much!!"}, {"owner": {"reputation": 13971, "user_id": 554807, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/11449ff391eb9e813ac9f467ae6e0102?s=128&d=identicon&r=PG", "display_name": "GreenAsJade", "link": "https://stackoverflow.com/users/554807/greenasjade"}, "edited": false, "score": 1, "creation_date": 1473897538, "post_id": 39500567, "comment_id": 66320040, "body": "Can you post and accept an answer, or close the question: right now it appears unanswered, which wastes everyone&#39;s time."}, {"owner": {"reputation": 127, "user_id": 5888544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e33fe1df3f3364f1808cd0a9665d5d1?s=128&d=identicon&r=PG&f=1", "display_name": "redouane", "link": "https://stackoverflow.com/users/5888544/redouane"}, "reply_to_user": {"reputation": 13971, "user_id": 554807, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/11449ff391eb9e813ac9f467ae6e0102?s=128&d=identicon&r=PG", "display_name": "GreenAsJade", "link": "https://stackoverflow.com/users/554807/greenasjade"}, "edited": false, "score": 0, "creation_date": 1473897937, "post_id": 39500567, "comment_id": 66320123, "body": "@greenasjade No one posted an answer, and I can&#39;t accept my own until 2 days. If you post &quot;set userInput = None above while loop&quot; as an answer, I will accept it as a solution. Sorry about that"}, {"owner": {"reputation": 13971, "user_id": 554807, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/11449ff391eb9e813ac9f467ae6e0102?s=128&d=identicon&r=PG", "display_name": "GreenAsJade", "link": "https://stackoverflow.com/users/554807/greenasjade"}, "edited": false, "score": 0, "creation_date": 1473923166, "post_id": 39500567, "comment_id": 66326771, "body": "Now there&#39;s an answer there: all good :)"}], "answers": [{"comments": [{"owner": {"reputation": 649, "user_id": 1028062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7704876c06abff1c684e727fe2c8dba4?s=128&d=identicon&r=PG", "display_name": "kghastie", "link": "https://stackoverflow.com/users/1028062/kghastie"}, "edited": false, "score": 0, "creation_date": 1476391569, "post_id": 39501373, "comment_id": 67338501, "body": "When I do this in my (equivalent) code, I get an inspection error in Intellij IDEA <b>redeclared &quot;userInput&quot; defined above without usage&quot;</b>. Either way, my code seems to run fine, which is a bit unnerving. (Python3)"}], "tags": [], "owner": {"reputation": 127, "user_id": 5888544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e33fe1df3f3364f1808cd0a9665d5d1?s=128&d=identicon&r=PG&f=1", "display_name": "redouane", "link": "https://stackoverflow.com/users/5888544/redouane"}, "is_accepted": true, "score": 5, "last_activity_date": 1473897863, "creation_date": 1473897863, "answer_id": 39501373, "question_id": 39500567, "link": "https://stackoverflow.com/questions/39500567/name-userinput-cannot-be-defined/39501373#39501373", "title": "Name &quot;userInput&quot; cannot be defined", "body": "<blockquote>\n  <p>set userInput = None above while loop</p>\n</blockquote>\n\n<p>This was the solution, thank you everyone!</p>\n"}], "owner": {"reputation": 127, "user_id": 5888544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e33fe1df3f3364f1808cd0a9665d5d1?s=128&d=identicon&r=PG&f=1", "display_name": "redouane", "link": "https://stackoverflow.com/users/5888544/redouane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2145, "favorite_count": 1, "accepted_answer_id": 39501373, "answer_count": 1, "score": 3, "last_activity_date": 1473897863, "creation_date": 1473891909, "question_id": 39500567, "link": "https://stackoverflow.com/questions/39500567/name-userinput-cannot-be-defined", "title": "Name &quot;userInput&quot; cannot be defined", "body": "<p>i'm practicing some Python and i'm having some trouble trying to compare userInput would selected word in a hangman game. </p>\n\n<pre><code># User guess input (single char)\n# Exception handling to limit input to letters between a-z\nwhile True:\n    userInput = str(input('Please guess a letter:'))\n    if len(userInput) == 1:\n        if not re.match(\"^[a-z]*$\", userInput):\n            print(\"Error! Only letters a-z allowed!\")\n            continue\n        break\n    else:\n        print(\"Error! Please input a single letter!\")\n        continue\n# Comparing array with input\nfor i in range(len(selWord)):\n    if(userInput == selWord[i]):\n</code></pre>\n\n<p>The problem lies in the in the last line:</p>\n\n<pre><code>        if(userInput == selWord[i]):\n</code></pre>\n\n<p>It states that  \"The name 'userInput' is not defined.\" however when I try to print outside the initial while loop, it works fine. </p>\n"}, {"tags": ["python", "machine-learning", "flow", "h2o"], "comments": [{"owner": {"reputation": 24189, "user_id": 841830, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/thtU5.jpg?s=128&g=1", "display_name": "Darren Cook", "link": "https://stackoverflow.com/users/841830/darren-cook"}, "edited": false, "score": 0, "creation_date": 1473957148, "post_id": 39500529, "comment_id": 66347987, "body": "Sorry, I misunderstood the problem (I will delete my answer). Can you give more information, e.g. which ML algorithm, what kind of prediction (regression, binomial, multinomial) and how different are the predictions that each client API is giving?"}, {"owner": {"reputation": 834, "user_id": 1745725, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/026370297fc5837b79945c772395e17c?s=128&d=identicon&r=PG&f=1", "display_name": "cloud36", "link": "https://stackoverflow.com/users/1745725/cloud36"}, "reply_to_user": {"reputation": 24189, "user_id": 841830, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/thtU5.jpg?s=128&g=1", "display_name": "Darren Cook", "link": "https://stackoverflow.com/users/841830/darren-cook"}, "edited": false, "score": 0, "creation_date": 1473957333, "post_id": 39500529, "comment_id": 66348106, "body": "Thanks --  GBM, Binomial.  On a dataset of 9K, flow returns 1.5k positive predictions and python returns 3k positive predictions."}, {"owner": {"reputation": 24189, "user_id": 841830, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/thtU5.jpg?s=128&g=1", "display_name": "Darren Cook", "link": "https://stackoverflow.com/users/841830/darren-cook"}, "edited": false, "score": 0, "creation_date": 1473961930, "post_id": 39500529, "comment_id": 66350486, "body": "That is a big difference. Are you able to make a Minimal Reproducible example? As it smells like a bug, I&#39;d post it on the JIRA (<a href=\"https://0xdata.atlassian.net/projects/PUBDEV/summary\" rel=\"nofollow noreferrer\">0xdata.atlassian.net/projects/PUBDEV/summary</a> ). The only other thing I can think is that you have data rounding... but IIUC you&#39;ve loaded the data frame in to H2O (with either Flow or Python), loaded the model (with either Flow or Python), and then are using the same frame and model from both clients."}], "owner": {"reputation": 834, "user_id": 1745725, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/026370297fc5837b79945c772395e17c?s=128&d=identicon&r=PG&f=1", "display_name": "cloud36", "link": "https://stackoverflow.com/users/1745725/cloud36"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1473921906, "creation_date": 1473891632, "question_id": 39500529, "link": "https://stackoverflow.com/questions/39500529/h2o-flow-versus-python-shell", "title": "h2o flow versus python shell", "body": "<p>I have build a model in h2o flow.  Once completed I save the file to my local machine.  Next, I import some new data via Flow and python shell, I then load the model and run predict on the dataframe.  </p>\n\n<p>I should get the exact same results as the dataframe and model are both the same.  Just different environments.  However, I get a different predictions in the different environments.  Anybody have a similar experience? </p>\n"}, {"tags": ["python", "django", "amazon-web-services", "amazon-elastic-beanstalk", "django-migrations"], "answers": [{"comments": [{"owner": {"reputation": 391, "user_id": 4885214, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/494291ba0fe5ed14a4d6fd30fb404510?s=128&d=identicon&r=PG&f=1", "display_name": "wuser92", "link": "https://stackoverflow.com/users/4885214/wuser92"}, "edited": false, "score": 0, "creation_date": 1473978868, "post_id": 39500763, "comment_id": 66358398, "body": "But that is exactly what I mean. For development and testing purposes I may delete a table (or do something else) at some point. And I would have to also apply the same transactions to the other DBs to keep avoiding errors if I deploy the migrations folder to the Elastic Beanstalk environment. Does it hurt to ignore the migration files and let every system keep its own migrations?"}, {"owner": {"reputation": 1638, "user_id": 4510252, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7392ceb72b7a7289561e2adb14e9393e?s=128&d=identicon&r=PG&f=1", "display_name": "sprksh", "link": "https://stackoverflow.com/users/4510252/sprksh"}, "reply_to_user": {"reputation": 391, "user_id": 4885214, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/494291ba0fe5ed14a4d6fd30fb404510?s=128&d=identicon&r=PG&f=1", "display_name": "wuser92", "link": "https://stackoverflow.com/users/4885214/wuser92"}, "edited": false, "score": 0, "creation_date": 1474107653, "post_id": 39500763, "comment_id": 66403826, "body": "You can delete a table but do not perform operation directly on database. Do it through django ORM. Say you want to delete a table, you should delete that model and make migration. Then when you migrate it individually on each server, you wont face any problem ever."}, {"owner": {"reputation": 1638, "user_id": 4510252, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7392ceb72b7a7289561e2adb14e9393e?s=128&d=identicon&r=PG&f=1", "display_name": "sprksh", "link": "https://stackoverflow.com/users/4510252/sprksh"}, "reply_to_user": {"reputation": 391, "user_id": 4885214, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/494291ba0fe5ed14a4d6fd30fb404510?s=128&d=identicon&r=PG&f=1", "display_name": "wuser92", "link": "https://stackoverflow.com/users/4885214/wuser92"}, "edited": false, "score": 1, "creation_date": 1474108551, "post_id": 39500763, "comment_id": 66404079, "body": "I have not used elastic beanstalk. But yes, that is the normal thing to do. you ignore the migration files and have separate migrations on each server (dev, production, testing). Normally if you use git, you put migrations/ in .gitignore. and so the migrations files are generated on each server separately."}], "tags": [], "owner": {"reputation": 1638, "user_id": 4510252, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7392ceb72b7a7289561e2adb14e9393e?s=128&d=identicon&r=PG&f=1", "display_name": "sprksh", "link": "https://stackoverflow.com/users/4510252/sprksh"}, "is_accepted": false, "score": 1, "last_activity_date": 1473893144, "creation_date": 1473893144, "answer_id": 39500763, "question_id": 39500513, "link": "https://stackoverflow.com/questions/39500513/django-migration-process-for-elasticbeanstalk-multiple-databases/39500763#39500763", "title": "Django Migration Process for Elasticbeanstalk / Multiple Databases", "body": "<p>Seems that you might have deleted the table or migrations at some point of time.</p>\n\n<p>When you run makemigrations, django create migratins and when you run migrate, it creates database whichever is specified in settings file.</p>\n\n<p>One thing is if you keep on creating migrations and do not run it in a particular database, it will be absolutely fine. Whenever you switch to databsse and run migrations, it will handle it as every  database will store the point upto which migrations have been run until now in django-migrations table and will start running next migrations only.</p>\n\n<p>To solve your problem, you can delete all databases and migration files and start afresh as you are perhaps testing right now. Things will go fine untill you delete a migration or a database in any of the server.</p>\n\n<p>If you have precious data, you should get into migration files and tables to analyse and manage things.</p>\n"}], "owner": {"reputation": 391, "user_id": 4885214, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/494291ba0fe5ed14a4d6fd30fb404510?s=128&d=identicon&r=PG&f=1", "display_name": "wuser92", "link": "https://stackoverflow.com/users/4885214/wuser92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 738, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1473893144, "creation_date": 1473891529, "question_id": 39500513, "link": "https://stackoverflow.com/questions/39500513/django-migration-process-for-elasticbeanstalk-multiple-databases", "title": "Django Migration Process for Elasticbeanstalk / Multiple Databases", "body": "<p>I am developing a small web application using Django and Elasticbeanstalk.\nI created a EB application with two environments (staging and production), created a RDS instance and assigned it to my EB environments. </p>\n\n<p>For development I use a local database, because deploying to AWS takes quite some time.</p>\n\n<p>However, I am having troubles with the migrations. Because I develop and test locally every couple of minutes, I tend to have different migrations locally and on the two environments.</p>\n\n<p>So once I deploy the current version of the app to a certain environment, the \"manage.py migrate\" fails most of the times because tables already exist or do not exist even though they should (because another environment already created the tables).</p>\n\n<p>So I was wondering how to handle the migration process when using multiple environments for development, staging and production with some common and some exclusive database instances that might not reflect the same structure all the time?</p>\n\n<p>Should I exclude the migration files from the code repository and the eb deployment and run makemigrations &amp; migrate after every deployment? Should I not run migrations automatically using the .ebextensions and apply all the migrations manually through one of the instances?</p>\n\n<p>What's the recommended way of using the same Django application with different database instances on different environments?</p>\n"}, {"tags": ["python", "selenium", "xpath", "web-scraping"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1473898035, "post_id": 39500465, "comment_id": 66320148, "body": "Your xpaths look very brittle, are there no classes or ids you can use to locate the elements?"}], "answers": [{"tags": [], "owner": {"reputation": 21114, "user_id": 3193455, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/47fc2c18bcbdb84eb374ca3f407c7318?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Gaur", "link": "https://stackoverflow.com/users/3193455/saurabh-gaur"}, "is_accepted": true, "score": 1, "last_activity_date": 1473895504, "last_edit_date": 1473895504, "creation_date": 1473894816, "answer_id": 39500996, "question_id": 39500465, "link": "https://stackoverflow.com/questions/39500465/how-to-access-grand-childs-of-a-node-using-xpath-in-python-selenium/39500996#39500996", "title": "How to access grand childs of a node using XPath in Python Selenium?", "body": "<p>Actually <code>find_elements()</code> returns either list of <a href=\"http://selenium-python.readthedocs.io/api.html#module-selenium.webdriver.remote.webelement\" rel=\"nofollow\"><code>WebElement</code></a> or empty list. You're storing this result into a list variable name <code>elem</code>.</p>\n\n<blockquote>\n  <p>AttributeError: 'list' object has no attribute 'find_element_by_xpath'</p>\n</blockquote>\n\n<p>This occurs because you're going to find nested <a href=\"http://selenium-python.readthedocs.io/api.html#module-selenium.webdriver.remote.webelement\" rel=\"nofollow\"><code>WebElement</code></a> on <code>elem</code> list that's why <strong>you're calling as <code>elem.find_element_by_xpath()</code> which is absolutely wrong.</strong></p>\n\n<p>Actually <a href=\"http://selenium-python.readthedocs.io/api.html#selenium.webdriver.remote.webelement.WebElement.find_element\" rel=\"nofollow\"><code>find_element()</code></a> or <a href=\"http://selenium-python.readthedocs.io/api.html#selenium.webdriver.remote.webelement.WebElement.find_elements\" rel=\"nofollow\"><code>find_elements</code></a> is used to search the element on the <strong>page context</strong> or the <strong>context of the <a href=\"http://selenium-python.readthedocs.io/api.html#module-selenium.webdriver.remote.webelement\" rel=\"nofollow\"><code>WebElement</code></a></strong> instead of <code>list</code>. </p>\n\n<p>So you should try to find list of <a href=\"http://selenium-python.readthedocs.io/api.html#module-selenium.webdriver.remote.webelement\" rel=\"nofollow\"><code>WebElement</code></a> from <code>driver</code> means page context and then iterate to find further nested <a href=\"http://selenium-python.readthedocs.io/api.html#module-selenium.webdriver.remote.webelement\" rel=\"nofollow\"><code>WebElement</code></a> using this element context as below :-</p>\n\n<pre><code>elems = driver.find_elements_by_xpath(\"//div[@class='result flash-ad']\")\n\nfor elem in elems:\n    phone2 = elem.find_element_by_xpath(\".//div[1]/div[1]/div[2]/div[1]/ul[1]/li[1]\").text\n    BusinessName2 = elem.find_element_by_xpath(\".//a[@class='business-name']\").text\n</code></pre>\n"}], "owner": {"reputation": 440, "user_id": 1941390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e7fcf9b6c55b5d5b04aecab7f7d7abe1?s=128&d=identicon&r=PG", "display_name": "user1941390", "link": "https://stackoverflow.com/users/1941390/user1941390"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 528, "favorite_count": 0, "accepted_answer_id": 39500996, "answer_count": 1, "score": 0, "last_activity_date": 1613570619, "creation_date": 1473891325, "last_edit_date": 1613570619, "question_id": 39500465, "link": "https://stackoverflow.com/questions/39500465/how-to-access-grand-childs-of-a-node-using-xpath-in-python-selenium", "title": "How to access grand childs of a node using XPath in Python Selenium?", "body": "<p>I am preparing a web-scraping script which supposed to find list of attorneys in an area through a business directory web-site. I use chrome driver to fill out search keywords and the area values.</p>\n<p>Since some of the hits don't have phone number, I would like to iterate through list of DIVs corresponding to search results and then check if the it has the phone number as a grand grand child and if yes then I get the phone number too otherwise I leave that field blank.</p>\n<p>I have come up with two ways to do it as per below code.</p>\n<pre><code>import time\nimport json as js\nfrom selenium import webdriver\nfrom selenium.webdriver.common.keys import Keys\n\nurl = 'http://www.yellowpages.com/search?search_terms=Divorce+Attorneys&amp;geo_location_terms=sun+diego'\nRsultsList = []\n\ndriver = webdriver.Chrome()\ndriver.get(url)\nThereIsNext = True\nwhile ThereIsNext:\n    \n    # find ads.\n    nAddResults = len( driver.find_elements_by_xpath(&quot;//div[@class='result flash-ad']&quot;))\n\n    #print 'add size = %d' % nAddResults\n    for i in range(nAddResults):\n        phone1 = driver.find_elements_by_xpath(&quot;//div[@class='result flash-ad']/div[1]/div[1]/div[2]/div[1]/ul[1]/li[1]&quot;)[i].text\n        BusinessName1 = driver.find_elements_by_xpath(&quot;//div[@class='result flash-ad']//a[@class='business-name']&quot;)[i].text\n\n        elem = driver.find_elements_by_xpath(&quot;//div[@class='result flash-ad']&quot;)\n        phone2 = elem.find_element_by_xpath(&quot;/div[1]/div[1]/div[2]/div[1]/ul[1]/li[1]&quot;)[i].text\n        BusinessName2 = elem.find_element_by_xpath(&quot;//a[@class='business-name']&quot;)\n</code></pre>\n<p>The first one is prone to error as records with no phone no. do NOT necessary show up at the end. So I come up with the second way. However, I get the below error message if try the second.</p>\n<pre><code>Traceback (most recent call last):\n  File &quot;C:\\Users\\XXXX\\documents\\visual studio 2015\\Projects\\PythonApplication3\\\nPythonApplication3\\AtorneyList.py&quot;, line 23, in &lt;module&gt;\n    phone2 = elem.find_element_by_xpath(&quot;/div[1]/div[1]/div[2]/div[1]/ul[1]/li[1\n]&quot;).text\nAttributeError: 'list' object has no attribute 'find_element_by_xpath'\nPress any key to continue . . .\n</code></pre>\n<p>Please let me know what I am missing. I have checked  <a href=\"https://stackoverflow.com/questions/9548523/how-do-i-find-node-and-its-child-nodes-using-selenium-with-python?s=1%7C1.1269\">this</a> and <a href=\"https://stackoverflow.com/questions/9548523/how-do-i-find-node-and-its-child-nodes-using-selenium-with-python/9548919?s=2%7C0.1580#9548919\">that</a> already and couldn't understand.</p>\n<p>Much appreciate it.</p>\n<p>Thanks</p>\n"}, {"tags": ["python", "bash", "command-line", "pycharm"], "comments": [{"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 1, "creation_date": 1473891429, "post_id": 39500438, "comment_id": 66318417, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/22133861/launch-pycharm-from-command-line-terminal\">Launch Pycharm from command line (terminal)</a>"}], "answers": [{"tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": false, "score": 3, "last_activity_date": 1473891444, "creation_date": 1473891444, "answer_id": 39500482, "question_id": 39500438, "link": "https://stackoverflow.com/questions/39500438/opening-pycharm-from-terminal-with-the-current-path/39500482#39500482", "title": "Opening Pycharm from terminal with the current path", "body": "<p>This works for me:</p>\n\n<pre><code>alias atom_pycharm='~/pycharm/bin/pycharm.sh .'\n</code></pre>\n\n<p>Maybe you installed it to a different path, though - <code>locate</code> your <code>pycharm.sh</code> file and modify accordingly.  </p>\n\n<p>You have the usual bash tricks: if you want to run in the background, append an <code>&amp;</code>, redirect stdout/stderr where you want etc.</p>\n"}, {"comments": [{"owner": {"reputation": 1465, "user_id": 3921457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WexJ1.jpg?s=128&g=1", "display_name": "garciparedes", "link": "https://stackoverflow.com/users/3921457/garciparedes"}, "reply_to_user": {"reputation": 833, "user_id": 8576293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22289f74cc7f8ec618b68348d4a780c1?s=128&d=identicon&r=PG", "display_name": "salmanseifian", "link": "https://stackoverflow.com/users/8576293/salmanseifian"}, "edited": false, "score": 0, "creation_date": 1552159079, "post_id": 39500506, "comment_id": 96907919, "body": "You can configure it as explained here: <a href=\"https://www.jetbrains.com/help/pycharm/opening-files-from-command-line.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/pycharm/opening-files-from-command-line.h&zwnj;&#8203;tml</a> @salman"}, {"owner": {"reputation": 473, "user_id": 10953743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64d6eda239a0d5d4a0dc836b24320106?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/10953743/anonymous"}, "edited": false, "score": 0, "creation_date": 1595235563, "post_id": 39500506, "comment_id": 111393406, "body": "it opens PyCharm but the problem I am facing is, when I close terminal then PyCharm exited automatically."}], "tags": [], "owner": {"reputation": 10017, "user_id": 301107, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2c87e8db57897b08332340b2c4b508ff?s=128&d=identicon&r=PG", "display_name": "masnun", "link": "https://stackoverflow.com/users/301107/masnun"}, "is_accepted": true, "score": 17, "last_activity_date": 1473891507, "creation_date": 1473891507, "answer_id": 39500506, "question_id": 39500438, "link": "https://stackoverflow.com/questions/39500438/opening-pycharm-from-terminal-with-the-current-path/39500506#39500506", "title": "Opening Pycharm from terminal with the current path", "body": "<p>PyCharm can be launched using the <code>charm</code> command line tool (which can be installed while getting started with PyCharm the first time).</p>\n\n<p><code>charm .</code></p>\n"}, {"comments": [{"owner": {"reputation": 629, "user_id": 6673178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33768e7a97b7f288546d2c01e27e473e?s=128&d=identicon&r=PG&f=1", "display_name": "Marko", "link": "https://stackoverflow.com/users/6673178/marko"}, "edited": false, "score": 1, "creation_date": 1576490899, "post_id": 58060943, "comment_id": 104903644, "body": "or <code>pycharm-professional .</code> for those using the Professional Edition"}, {"owner": {"reputation": 1103, "user_id": 3626714, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/bIoAO.jpg?s=128&g=1", "display_name": "Ashik", "link": "https://stackoverflow.com/users/3626714/ashik"}, "reply_to_user": {"reputation": 629, "user_id": 6673178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33768e7a97b7f288546d2c01e27e473e?s=128&d=identicon&r=PG&f=1", "display_name": "Marko", "link": "https://stackoverflow.com/users/6673178/marko"}, "edited": false, "score": 1, "creation_date": 1613995974, "post_id": 58060943, "comment_id": 117240047, "body": "searched again for this, found my answer."}], "tags": [], "owner": {"reputation": 1103, "user_id": 3626714, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/bIoAO.jpg?s=128&g=1", "display_name": "Ashik", "link": "https://stackoverflow.com/users/3626714/ashik"}, "is_accepted": false, "score": 12, "last_activity_date": 1573426183, "last_edit_date": 1573426183, "creation_date": 1569236355, "answer_id": 58060943, "question_id": 39500438, "link": "https://stackoverflow.com/questions/39500438/opening-pycharm-from-terminal-with-the-current-path/58060943#58060943", "title": "Opening Pycharm from terminal with the current path", "body": "<p>This worked for me:</p>\n\n<pre><code>pycharm-community .\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7615, "user_id": 1364007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d106de3dec9586b56ed7f110497689e?s=128&d=identicon&r=PG", "display_name": "Wai Ha Lee", "link": "https://stackoverflow.com/users/1364007/wai-ha-lee"}, "edited": false, "score": 0, "creation_date": 1573416867, "post_id": 58792176, "comment_id": 103866730, "body": "This is what <a href=\"https://stackoverflow.com/a/58060943/1364007\">this answer</a> already said."}], "tags": [], "owner": {"reputation": 1, "user_id": 10401445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c30a0f74a9115ccf7c36fbcbb9d5089?s=128&d=identicon&r=PG&f=1", "display_name": "Sukhdew Gupta", "link": "https://stackoverflow.com/users/10401445/sukhdew-gupta"}, "is_accepted": false, "score": -1, "last_activity_date": 1573414040, "creation_date": 1573414040, "answer_id": 58792176, "question_id": 39500438, "link": "https://stackoverflow.com/questions/39500438/opening-pycharm-from-terminal-with-the-current-path/58792176#58792176", "title": "Opening Pycharm from terminal with the current path", "body": "<p><a href=\"https://i.stack.imgur.com/SQzJ5.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>Open your terminal and type:$ cd Desktop/pycharm-community</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12638328, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAUE1RbYfZS2rw_Z5_RF7XJf-9PIDiUGRfMgx2mpA=k-s128", "display_name": "James Yang", "link": "https://stackoverflow.com/users/12638328/james-yang"}, "is_accepted": false, "score": 0, "last_activity_date": 1584063469, "last_edit_date": 1584063469, "creation_date": 1584061873, "answer_id": 60663644, "question_id": 39500438, "link": "https://stackoverflow.com/questions/39500438/opening-pycharm-from-terminal-with-the-current-path/60663644#60663644", "title": "Opening Pycharm from terminal with the current path", "body": "<p>For me its:</p>\n\n<p>pycharm.bat . </p>\n\n<p>but I had to add an Environment Variable first using the path where pycharm.bat is located. In my case it was:</p>\n\n<p>C:\\Program Files\\JetBrains\\PyCharm Community Edition 2019.3.1\\bin</p>\n\n<p>(how to add an Environment Variable)\nWindows\n<a href=\"https://www.architectryan.com/2018/08/31/how-to-change-environment-variables-on-windows-10/\" rel=\"nofollow noreferrer\">https://www.architectryan.com/2018/08/31/how-to-change-environment-variables-on-windows-10/</a></p>\n\n<p>Ubuntu\n<a href=\"https://hackprogramming.com/2-ways-to-permanently-set-path-variable-in-ubuntu/\" rel=\"nofollow noreferrer\">https://hackprogramming.com/2-ways-to-permanently-set-path-variable-in-ubuntu/</a></p>\n\n<p>I'm using Pycharm Community Edition 2019.3.1 and for the life of me I couldn't find the \"Command line launcher\" everyone else is talking about so I had to resort to this method.</p>\n\n<p>This was for Windows but hopefully it will give you some insight on figuring it out on Ubuntu!</p>\n"}, {"tags": [], "owner": {"reputation": 920, "user_id": 3290983, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VfIy.jpg?s=128&g=1", "display_name": "Anandkumar", "link": "https://stackoverflow.com/users/3290983/anandkumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1601957177, "creation_date": 1601957177, "answer_id": 64219215, "question_id": 39500438, "link": "https://stackoverflow.com/questions/39500438/opening-pycharm-from-terminal-with-the-current-path/64219215#64219215", "title": "Opening Pycharm from terminal with the current path", "body": "<pre><code>open -na &quot;PyCharm CE.app&quot; . \n</code></pre>\n<p>worked for me in MacOS &amp; PyCharm Community edition</p>\n"}], "owner": {"reputation": 1529, "user_id": 3600095, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/7D2yl.jpg?s=128&g=1", "display_name": "handris", "link": "https://stackoverflow.com/users/3600095/handris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29984, "favorite_count": 0, "accepted_answer_id": 39500506, "answer_count": 6, "score": 13, "last_activity_date": 1601957177, "creation_date": 1473891145, "last_edit_date": 1473927420, "question_id": 39500438, "link": "https://stackoverflow.com/questions/39500438/opening-pycharm-from-terminal-with-the-current-path", "title": "Opening Pycharm from terminal with the current path", "body": "<p>If you give in the command \"atom .\" in the terminal, the Atom editor opens the current folder and I am ready to code.</p>\n\n<p>I am trying to achieve the same with Pycharm using Ubuntu: get the current directory and open it with Pycharm as a project.</p>\n\n<p>Is there way to achieve this by setting a bash alias?</p>\n"}, {"tags": ["python", "integration-testing", "pytest"], "comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1473891187, "post_id": 39500416, "comment_id": 66318335, "body": "You will have to better define what counts as an assertion.  You can&#39;t just count the assert statements, because for example something like <code>with pytest.raises:</code> is still a type of test assertion."}, {"owner": {"reputation": 275, "user_id": 6154148, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6bd3cb95076687eaca190af66ae979f0?s=128&d=identicon&r=PG&f=1", "display_name": "nnja", "link": "https://stackoverflow.com/users/6154148/nnja"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1473895102, "post_id": 39500416, "comment_id": 66319430, "body": "I want to count all assert_that calls done during a test case and add it to the JUnit test report for example."}], "answers": [{"comments": [{"owner": {"reputation": 859, "user_id": 4460944, "user_type": "registered", "profile_image": "https://graph.facebook.com/1643331580/picture?type=large", "display_name": "Semanino", "link": "https://stackoverflow.com/users/4460944/semanino"}, "edited": false, "score": 4, "creation_date": 1542793839, "post_id": 39559306, "comment_id": 93693507, "body": "A test is not generally aborted after an assertion, it is only aborted if the assertion <b>fails</b>, i.e. the condition is not met.  What nnja wants is just to count how many assertions have <b>passed</b>. Many test frameworks report that number by default.  IMHO it is - amongst others - a valid measure for test quality; &quot;sloppy&quot; tests might apply too few checks to values"}], "tags": [], "owner": {"reputation": 1669, "user_id": 4600339, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-L6telLCeeD8/AAAAAAAAAAI/AAAAAAAAA4Y/CcYcmV-WK8k/photo.jpg?sz=128", "display_name": "saurabh baid", "link": "https://stackoverflow.com/users/4600339/saurabh-baid"}, "is_accepted": true, "score": -1, "last_activity_date": 1474212252, "creation_date": 1474212252, "answer_id": 39559306, "question_id": 39500416, "link": "https://stackoverflow.com/questions/39500416/report-number-of-assertions-in-pytest/39559306#39559306", "title": "Report number of assertions in pyTest", "body": "<p>On assertion further execution of test is aborted. So there will always be 1 assertion per test.</p>\n\n<p>To achieve what you want you will have to write your own wrapper over assertion to keep track. At the end of the test check if count is >0 then raise assertion.\nThe count can be reset to zero either the <code>setup</code> or at <code>teardown</code> of test.</p>\n"}, {"tags": [], "owner": {"reputation": 859, "user_id": 4460944, "user_type": "registered", "profile_image": "https://graph.facebook.com/1643331580/picture?type=large", "display_name": "Semanino", "link": "https://stackoverflow.com/users/4460944/semanino"}, "is_accepted": false, "score": 0, "last_activity_date": 1542795429, "creation_date": 1542795429, "answer_id": 53409809, "question_id": 39500416, "link": "https://stackoverflow.com/questions/39500416/report-number-of-assertions-in-pytest/53409809#53409809", "title": "Report number of assertions in pyTest", "body": "<p>As far as I can see there is no such possibility to get the number of passed assertions out of pytest. </p>\n\n<p>Reason: it employs Python's standard <code>assert</code> statement, so the determination whether the assertion is a pass or a fail is done within the engine used, and in case the engine does not count how often it got into the \"pass\" branch of the necessary <code>if</code> in <code>assert</code>'s implementation, and offer a way to read out that counter, there is just <strong>no way</strong> to elicit that information from the engine. So pyTest can't tell you that either.</p>\n\n<p>Many (unit) test frameworks report assertion count by default, and IMHO i deem it desirable, because it is - amongst others - a measure for test quality: sloppy tests might apply too few checks to values.</p>\n"}], "owner": {"reputation": 275, "user_id": 6154148, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6bd3cb95076687eaca190af66ae979f0?s=128&d=identicon&r=PG&f=1", "display_name": "nnja", "link": "https://stackoverflow.com/users/6154148/nnja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 825, "favorite_count": 0, "accepted_answer_id": 39559306, "answer_count": 2, "score": 2, "last_activity_date": 1542795429, "creation_date": 1473891035, "last_edit_date": 1474018318, "question_id": 39500416, "link": "https://stackoverflow.com/questions/39500416/report-number-of-assertions-in-pytest", "title": "Report number of assertions in pyTest", "body": "<p>I am using <code>pytest</code> for writing some tests at integration level. I would like to be able to also report the number of assertions done on each test case. By default, <code>pytest</code> will only report the number of test cases which have passed and failed.</p>\n"}, {"tags": ["python", "mysql", "django", "database"], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 3654005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808df3d003d56a7b4db0404754d42c2c?s=128&d=identicon&r=PG&f=1", "display_name": "David K.", "link": "https://stackoverflow.com/users/3654005/david-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1473902269, "creation_date": 1473902269, "answer_id": 39501863, "question_id": 39500404, "link": "https://stackoverflow.com/questions/39500404/reducing-database-operation-time-django-mysql/39501863#39501863", "title": "Reducing database operation time Django/ Mysql", "body": "<p>There are a couple optimisations you might want to take a look at. Instead of looping over a get for each object try getting a values list:</p>\n\n<p><code>queryset = Invalid.objects.filter(id__range=(9,40000))\nqueryset_list = queryset.values_list('email' flat=True)</code></p>\n\n<p><a href=\"https://docs.djangoproject.com/en/1.10/ref/models/querysets/#values-list\" rel=\"nofollow\">https://docs.djangoproject.com/en/1.10/ref/models/querysets/#values-list</a></p>\n\n<p>then looping over the values list and doing a .get() on the email. At the end you can also do:</p>\n\n<p><code>f.active = False\nf.save(update_fields=['active'])</code></p>\n\n<p>Which will only update the boolean field.\n<a href=\"https://docs.djangoproject.com/en/1.10/ref/models/instances/#updating-attributes-based-on-existing-fields\" rel=\"nofollow\">https://docs.djangoproject.com/en/1.10/ref/models/instances/#updating-attributes-based-on-existing-fields</a></p>\n\n<p>Also try to find a way to .get() the object via id or some other field than string if possible.</p>\n"}, {"comments": [{"owner": {"reputation": 1638, "user_id": 4510252, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7392ceb72b7a7289561e2adb14e9393e?s=128&d=identicon&r=PG&f=1", "display_name": "sprksh", "link": "https://stackoverflow.com/users/4510252/sprksh"}, "edited": false, "score": 0, "creation_date": 1473931907, "post_id": 39502431, "comment_id": 66331583, "body": "Exactly, Raw SQL is way faster."}], "tags": [], "owner": {"reputation": 102535, "user_id": 20128, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4b62eef3ad218a5d3cbdd1077660ca8b?s=128&d=identicon&r=PG", "display_name": "serg", "link": "https://stackoverflow.com/users/20128/serg"}, "is_accepted": true, "score": 1, "last_activity_date": 1473907827, "creation_date": 1473907827, "answer_id": 39502431, "question_id": 39500404, "link": "https://stackoverflow.com/questions/39500404/reducing-database-operation-time-django-mysql/39502431#39502431", "title": "Reducing database operation time Django/ Mysql", "body": "<p>Untested:</p>\n\n<pre><code>IndiList.objects.filter(email__in=Invalid.objects.only('email').all()).update(active=False)\n</code></pre>\n\n<p>I am not sure if Django is smart enough to build a subquery from that, if not, then this should do:</p>\n\n<pre><code>IndiList.objects.filter(email__in=Invalid.objects.all().values_list('email', flat=True)).update(active=False)\n</code></pre>\n\n<p>The problem with the second approach is that it will generate 2 queries instead of one, and inject 50,000 ids into the second sql query string, so I would much rather just use raw sql at this point:</p>\n\n<pre><code>from django.db import connection\n\ncursor = connection.cursor()\ncursor.execute = 'UPDATE indilist SET active=false WHERE email IN (SELECT email FROM invalid)'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1638, "user_id": 4510252, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7392ceb72b7a7289561e2adb14e9393e?s=128&d=identicon&r=PG&f=1", "display_name": "sprksh", "link": "https://stackoverflow.com/users/4510252/sprksh"}, "is_accepted": false, "score": 0, "last_activity_date": 1473932462, "creation_date": 1473932462, "answer_id": 39507823, "question_id": 39500404, "link": "https://stackoverflow.com/questions/39500404/reducing-database-operation-time-django-mysql/39507823#39507823", "title": "Reducing database operation time Django/ Mysql", "body": "<p>After a few iterations, i used this function which was more than <strong>1000 times faster.</strong></p>\n\n<pre><code>def clean_list3():\n    pp = Invalid.objects.filter(id__gte=9)\n    listd = [oo.email.strip() for oo in pp]\n    for e in IndiList.objects.all():\n        if e.email.strip() in listd:\n            e.active=False\n            e.save()\n            print(e.id)\n</code></pre>\n\n<p>The trick is simple, instead of hitting database every time, I saved the 250,000 objects in a queryset in memory. and also the list of emails from invalid list in memory. </p>\n\n<p>And then i had to hit database only when we found matching emails so as to save it as inactive.</p>\n"}], "owner": {"reputation": 1638, "user_id": 4510252, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7392ceb72b7a7289561e2adb14e9393e?s=128&d=identicon&r=PG&f=1", "display_name": "sprksh", "link": "https://stackoverflow.com/users/4510252/sprksh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 39502431, "answer_count": 3, "score": 0, "last_activity_date": 1473932462, "creation_date": 1473890960, "question_id": 39500404, "link": "https://stackoverflow.com/questions/39500404/reducing-database-operation-time-django-mysql", "title": "Reducing database operation time Django/ Mysql", "body": "<p>So, the thing is I am having a moderately large list of emails ~ 250,000 entries.</p>\n\n<p>I have another table containing list of invalid emails ~ 50,000 which i need to remove (mark inactive) from 1st table. For that I have ran a simple django function which is taking 3-4 seconds in each loop. The code is:</p>\n\n<pre><code>def clean_list():\n    id = 9\n    while id&lt;40000:\n        i = Invalid.objects.get(id=id)\n        y = i.email.strip()\n        f = IndiList.objects.get(email__contains=y)\n        f.active = False\n        f.save()\n        id +=1\n</code></pre>\n\n<p>What would be a better way to do it? Either a SQL query or a better piece of django code or some other way.</p>\n\n<p>Help!</p>\n"}, {"tags": ["python", "igraph"], "comments": [{"owner": {"reputation": 2676, "user_id": 5718020, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/RdYmf.png?s=128&g=1", "display_name": "gowrath", "link": "https://stackoverflow.com/users/5718020/gowrath"}, "edited": false, "score": 0, "creation_date": 1473891501, "post_id": 39500358, "comment_id": 66318436, "body": "Are your vertices identified by name, or index number? What would classify two vertices to be the same in different graphs? That is, what is the unique identifier for a vertex in your graph."}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 3993264, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XWEtT.jpg?s=128&g=1", "display_name": "Fernando Barraza", "link": "https://stackoverflow.com/users/3993264/fernando-barraza"}, "edited": false, "score": 0, "creation_date": 1473949290, "post_id": 39500735, "comment_id": 66342882, "body": "Thank you @gowrath ! Your second solution is clearly more suitable that mine. I forget to mention that graph2 is an evolution on graph1 and the vertex list is because I want to plot the biggest graph, with the missing vertexs (actually the new ones)  in a different color. With this vertex list I will set the color attribute for them. I suppose I&#39;m on the right track, isn&#39;t?"}, {"owner": {"reputation": 2676, "user_id": 5718020, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/RdYmf.png?s=128&g=1", "display_name": "gowrath", "link": "https://stackoverflow.com/users/5718020/gowrath"}, "reply_to_user": {"reputation": 115, "user_id": 3993264, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XWEtT.jpg?s=128&g=1", "display_name": "Fernando Barraza", "link": "https://stackoverflow.com/users/3993264/fernando-barraza"}, "edited": false, "score": 0, "creation_date": 1473949450, "post_id": 39500735, "comment_id": 66343007, "body": "@FernandoBarraza If I understand you correctly, you want to change the color of the nodes in graph1 that aren&#39;t in graph2? Then yes, you would iterate over the returned list and change the color attribute :)"}, {"owner": {"reputation": 115, "user_id": 3993264, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XWEtT.jpg?s=128&g=1", "display_name": "Fernando Barraza", "link": "https://stackoverflow.com/users/3993264/fernando-barraza"}, "edited": false, "score": 0, "creation_date": 1473950635, "post_id": 39500735, "comment_id": 66343857, "body": "Yes, it is! @gowrath, Thanks."}], "tags": [], "owner": {"reputation": 2676, "user_id": 5718020, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/RdYmf.png?s=128&g=1", "display_name": "gowrath", "link": "https://stackoverflow.com/users/5718020/gowrath"}, "is_accepted": true, "score": 0, "last_activity_date": 1473892960, "creation_date": 1473892960, "answer_id": 39500735, "question_id": 39500358, "link": "https://stackoverflow.com/questions/39500358/how-to-get-a-vertex-list-of-differences-between-two-graphs-in-igraph/39500735#39500735", "title": "How to get a vertex list of differences between two graphs in igraph", "body": "<p>I don't think there's a builtin method within graph that does what you want. However, it is straightforward to make your own.</p>\n\n<p>I'm going to make the reasonable assumption here that the unique identifier of a vertex is the 'name' property that igraph encourages users to use. Essentially, you make two sets of the names of vertices in graph1 and the names of vertices in graph2 and compute their difference. Then you can search graph1 for the vertex that corresponds to that name and add it to a list to return:</p>\n\n<pre><code>def find_diff(graph1, graph2):\n    \"\"\"\n    Returns list of vertices that are present in graph1 but missing in graph2\n    \"\"\"\n    set_v1 = set(graph1.vs['name'])  # set of names of vertices in graph1\n    set_v2 = set(graph2.vs['name'])  # set of names of vertices in graph2\n    diff = set_v1 - set_v2 \n    result = []\n    for vname in diff:\n        result.append(graph1.vs.find(name=vname))     # find vertex that corresponds to name in graph1 and append it to list\n\n    return result\n</code></pre>\n\n<p>The above code is for clarity. You can actually do it in a faster and shorter way. Here's a one liner:</p>\n\n<pre><code>def find_diff(graph1, graph2):\n    \"\"\"\n    Returns list of vertices that are present in graph1 but missing in graph2\n    \"\"\"\n    return [vx for vx in graph1.vs if vx['name'] not in graph2.vs['name']]\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 3993264, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XWEtT.jpg?s=128&g=1", "display_name": "Fernando Barraza", "link": "https://stackoverflow.com/users/3993264/fernando-barraza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 39500735, "answer_count": 1, "score": 1, "last_activity_date": 1473892960, "creation_date": 1473890724, "question_id": 39500358, "link": "https://stackoverflow.com/questions/39500358/how-to-get-a-vertex-list-of-differences-between-two-graphs-in-igraph", "title": "How to get a vertex list of differences between two graphs in igraph", "body": "<p>I'm trying to get a list of vertex that are present or missing from a graph 1 against another graph 2. I'm wondering if there any helper method in igraph to do it or if would be necessary to build a own. Thank you.</p>\n"}, {"tags": ["python", "python-3.x", "numpy"], "comments": [{"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 2, "creation_date": 1473891105, "post_id": 39500356, "comment_id": 66318310, "body": "Since <code>y</code> is non-continuous, it doesn&#39;t expose <code>data</code> (<code>&gt;&gt;&gt;y.data AttributeError: cannot get single-segment buffer for discontiguous array</code>). So I kinda cannot imagine how you&#39;re going to compare <code>x.data</code> and <code>y.data</code>. (<code>numpy 1.11.1</code> and <code>python 2.7.12 win32</code> here) ."}, {"owner": {"reputation": 1556, "user_id": 2298935, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4e6cf47a45636de5036da34d16f42415?s=128&d=identicon&r=PG", "display_name": "toine", "link": "https://stackoverflow.com/users/2298935/toine"}, "edited": false, "score": 1, "creation_date": 1473891231, "post_id": 39500356, "comment_id": 66318350, "body": "192 = 3*64, just saying"}, {"owner": {"reputation": 219, "user_id": 6828921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9e41ab0e2279cdcb26c52511d25e62d?s=128&d=identicon&r=PG", "display_name": "user40314", "link": "https://stackoverflow.com/users/6828921/user40314"}, "reply_to_user": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1473891382, "post_id": 39500356, "comment_id": 66318402, "body": "@ivan_pozdeev I am not getting this error from evaluation of <code>y.data</code> using numpy 1.11 on Windows and Linux using Python 3.5.2 from Anaconda distribution. What is your configuration?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1473891686, "post_id": 39500356, "comment_id": 66318487, "body": "24 bytes, 192 bits?"}, {"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1473892701, "post_id": 39500356, "comment_id": 66318745, "body": "@user40314 I only said that it returns an error for me, I couldn&#39;t know about the cause of discrepancy. Since the question couldn&#39;t be answered without finding it out, I required additional info."}], "answers": [{"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1473892133, "last_edit_date": 1473892133, "creation_date": 1473891653, "answer_id": 39500532, "question_id": 39500356, "link": "https://stackoverflow.com/questions/39500356/behavior-of-ndarray-data-for-views-in-numpy/39500532#39500532", "title": "Behavior of ndarray.data for views in numpy", "body": "<p><code>&lt;memory at 0x000000F2F5150348&gt;</code> is a <code>memoryview</code> object located at address <code>0x000000F2F5150348</code>; the buffer it provides access to is located somewhere else.</p>\n\n<p>Memoryviews provide a number of operations described in the <a href=\"https://docs.python.org/3/library/stdtypes.html#typememoryview\" rel=\"nofollow\">relevant official documentation</a>, but at least on the Python-side API, they do not provide any way to access the raw address of the memory they expose. Particularly, the <code>at whatevernumber</code> number is not what you're looking for.</p>\n"}, {"comments": [{"owner": {"reputation": 219, "user_id": 6828921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9e41ab0e2279cdcb26c52511d25e62d?s=128&d=identicon&r=PG", "display_name": "user40314", "link": "https://stackoverflow.com/users/6828921/user40314"}, "edited": false, "score": 0, "creation_date": 1473892577, "post_id": 39500603, "comment_id": 66318714, "body": "Thank you for your response and for the link. My confusion was in conflating <code>PyArray_DATA</code> on C-API with <code>ndarray.data</code>."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 2, "last_activity_date": 1473892134, "last_edit_date": 1495542769, "creation_date": 1473892134, "answer_id": 39500603, "question_id": 39500356, "link": "https://stackoverflow.com/questions/39500356/behavior-of-ndarray-data-for-views-in-numpy/39500603#39500603", "title": "Behavior of ndarray.data for views in numpy", "body": "<p>Generally the number displayed by <code>x.data</code> isn't meant to be used by you.  <code>x.data</code> is the buffer, which can be used in other contexts that expect a buffer.</p>\n\n<pre><code>np.frombuffer(x.data,dtype=float)\n</code></pre>\n\n<p>replicates your <code>x</code>. </p>\n\n<pre><code>np.frombuffer(x[3:].data,dtype=float)\n</code></pre>\n\n<p>this replicates <code>x[3:]</code>.  But from Python you can't take <code>x.data</code>, add 192 bits (3*8*8) to it, and expect to get <code>x[3:]</code>.</p>\n\n<p>I often use the <code>__array_interface__['data']</code> value to check whether two variables share a data buffer, but I don't use that number for any thing.  These are informative numbers, not working values.</p>\n\n<p>I recently explored this in</p>\n\n<p><a href=\"https://stackoverflow.com/questions/39376892/creating-a-numpy-array-directly-from-array-interface/39377877#39377877\">Creating a NumPy array directly from __array_interface__</a></p>\n"}], "owner": {"reputation": 219, "user_id": 6828921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9e41ab0e2279cdcb26c52511d25e62d?s=128&d=identicon&r=PG", "display_name": "user40314", "link": "https://stackoverflow.com/users/6828921/user40314"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1267, "favorite_count": 0, "accepted_answer_id": 39500603, "answer_count": 2, "score": 2, "last_activity_date": 1473892134, "creation_date": 1473890712, "last_edit_date": 1473891465, "question_id": 39500356, "link": "https://stackoverflow.com/questions/39500356/behavior-of-ndarray-data-for-views-in-numpy", "title": "Behavior of ndarray.data for views in numpy", "body": "<p>I am trying to understand the meaning of <code>ndarray.data</code> field in numpy (see <a href=\"http://docs.scipy.org/doc/numpy/reference/arrays.ndarray.html#memory-layout\" rel=\"nofollow\">memory layout</a> section of the reference page on N-dimensional arrays), especially for views into arrays. To quote the documentation:</p>\n\n<blockquote>\n  <p>ndarray.data -- Python buffer object pointing to the start of the array\u2019s data</p>\n</blockquote>\n\n<p>According to this description, I was expecting this to be a pointer to the C-array underlying the instance of ndarray.</p>\n\n<p>Consider <code>x = np.arange(5, dtype=np.float64)</code>. </p>\n\n<p>Form <code>y</code> as a view into <code>x</code> using a slice: <code>y = x[3:1:-1]</code>. </p>\n\n<p>I was expecting <code>x.data</code> to point at location of <code>0.</code> and <code>y.data</code> to point at the location of <code>3.</code>. I was expecting the memory pointer printed by <code>y.data</code> to thus be offset by <code>3*x.itemsize</code> bytes from the memory pointer printed by <code>x.data</code>, but this does not appear to be the case:</p>\n\n<pre><code>&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; x = np.arange(5, dtype=np.float64)\n&gt;&gt;&gt; y = x[ 3:1:-1]\n&gt;&gt;&gt; x.data\n&lt;memory at 0x000000F2F5150348&gt;\n&gt;&gt;&gt; y.data\n&lt;memory at 0x000000F2F5150408&gt;\n&gt;&gt;&gt; int('0x000000F2F5150408', 16) - int('0x000000F2F5150348', 16)\n192\n&gt;&gt;&gt; 3*x.itemsize\n24\n</code></pre>\n\n<p>The <code>'data'</code> key in <code>__array_interface</code> dictionary associated with the ndarray instance behaves more like I expect, although it may itself not be a pointer:</p>\n\n<pre><code>&gt;&gt;&gt; y.__array_interface__['data'][0] - x.__array_interface__['data'][0]\n24\n</code></pre>\n\n<blockquote>\n  <p>So this begs the question, what does the <code>ndarray.data</code> give? </p>\n</blockquote>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 6146, "user_id": 2029132, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bf9af44407bbd2097213a6d5f3e0fb1?s=128&d=identicon&r=PG", "display_name": "gabra", "link": "https://stackoverflow.com/users/2029132/gabra"}, "edited": false, "score": 0, "creation_date": 1473890809, "post_id": 39500265, "comment_id": 66318214, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/13303928/how-to-make-custom-legend-in-matplotlib\">How to make custom legend in matplotlib</a>"}], "answers": [{"comments": [{"owner": {"reputation": 897, "user_id": 5946578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/643d628233ae3fc0bf662d3f3878a6b5?s=128&d=identicon&r=PG&f=1", "display_name": "Brady forcier", "link": "https://stackoverflow.com/users/5946578/brady-forcier"}, "edited": false, "score": 1, "creation_date": 1473894555, "post_id": 39500357, "comment_id": 66319267, "body": "How would this work for adding multiple? Can I make a list of patches and then just do plt.legend(handles=patchList)"}, {"owner": {"reputation": 6146, "user_id": 2029132, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bf9af44407bbd2097213a6d5f3e0fb1?s=128&d=identicon&r=PG", "display_name": "gabra", "link": "https://stackoverflow.com/users/2029132/gabra"}, "reply_to_user": {"reputation": 897, "user_id": 5946578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/643d628233ae3fc0bf662d3f3878a6b5?s=128&d=identicon&r=PG&f=1", "display_name": "Brady forcier", "link": "https://stackoverflow.com/users/5946578/brady-forcier"}, "edited": false, "score": 1, "creation_date": 1473895610, "post_id": 39500357, "comment_id": 66319565, "body": "@Bradyforcier exactly."}, {"owner": {"reputation": 897, "user_id": 5946578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/643d628233ae3fc0bf662d3f3878a6b5?s=128&d=identicon&r=PG&f=1", "display_name": "Brady forcier", "link": "https://stackoverflow.com/users/5946578/brady-forcier"}, "edited": false, "score": 0, "creation_date": 1473953634, "post_id": 39500357, "comment_id": 66345918, "body": "I tried to add my custom patches like this and I see two black dots and Patch&#39;&gt; in the legend. I tried adding the red_patch above and I get the same thing. Patch was added as plt.legend(mpatches.Patch(color=&#39;red&#39;, label=&#39;The red data&#39;)). Turns out the version I&#39;m stuck with is super old 0.99. Not sure how to find out how this older API works"}, {"owner": {"reputation": 6146, "user_id": 2029132, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bf9af44407bbd2097213a6d5f3e0fb1?s=128&d=identicon&r=PG", "display_name": "gabra", "link": "https://stackoverflow.com/users/2029132/gabra"}, "reply_to_user": {"reputation": 897, "user_id": 5946578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/643d628233ae3fc0bf662d3f3878a6b5?s=128&d=identicon&r=PG&f=1", "display_name": "Brady forcier", "link": "https://stackoverflow.com/users/5946578/brady-forcier"}, "edited": false, "score": 0, "creation_date": 1473963275, "post_id": 39500357, "comment_id": 66351251, "body": "@Bradyforcier I added an example with two patches. I am not sure it will work on v0.99."}, {"owner": {"reputation": 1151, "user_id": 7746166, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/ec4ec013c7eb8200e5ad08d04e9668b4?s=128&d=identicon&r=PG&f=1", "display_name": "Varlor", "link": "https://stackoverflow.com/users/7746166/varlor"}, "edited": false, "score": 0, "creation_date": 1500900083, "post_id": 39500357, "comment_id": 77524133, "body": "is it also possible to assign one color manually to one specific value?"}, {"owner": {"reputation": 719, "user_id": 2506817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hqIxT.jpg?s=128&g=1", "display_name": "Tanasis", "link": "https://stackoverflow.com/users/2506817/tanasis"}, "edited": false, "score": 0, "creation_date": 1541689519, "post_id": 39500357, "comment_id": 93308841, "body": "Instead of <code>mpatches</code> can we do &quot;lines&quot;?"}, {"owner": {"reputation": 7108, "user_id": 7353970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ac9ba2dd59be35776312120c47e431b?s=128&d=identicon&r=PG&f=1", "display_name": "whiletrue", "link": "https://stackoverflow.com/users/7353970/whiletrue"}, "edited": false, "score": 0, "creation_date": 1550737150, "post_id": 39500357, "comment_id": 96381221, "body": "how can one add markers to the legend without using the funny example with a Line2D in the background of a marker? Thanks!"}], "tags": [], "owner": {"reputation": 6146, "user_id": 2029132, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bf9af44407bbd2097213a6d5f3e0fb1?s=128&d=identicon&r=PG", "display_name": "gabra", "link": "https://stackoverflow.com/users/2029132/gabra"}, "is_accepted": false, "score": 100, "last_activity_date": 1473963120, "last_edit_date": 1473963120, "creation_date": 1473890715, "answer_id": 39500357, "question_id": 39500265, "link": "https://stackoverflow.com/questions/39500265/manually-add-legend-items-python-matplotlib/39500357#39500357", "title": "Manually add legend Items Python matplotlib", "body": "<p>Have you checked the <a href=\"http://matplotlib.org/users/legend_guide.html\" rel=\"noreferrer\">Legend Guide</a>?</p>\n\n<p>For practicality, I quote the example from the <a href=\"http://matplotlib.org/users/legend_guide.html#creating-artists-specifically-for-adding-to-the-legend-aka-proxy-artists\" rel=\"noreferrer\">guide</a>.</p>\n\n<blockquote>\n  <p>Not all handles can be turned into legend entries automatically, so it\n  is often necessary to create an artist which can. Legend handles don\u2019t\n  have to exists on the Figure or Axes in order to be used.</p>\n  \n  <p>Suppose we wanted to create a legend which has an entry for some data\n  which is represented by a red color:</p>\n</blockquote>\n\n<pre><code>import matplotlib.patches as mpatches\nimport matplotlib.pyplot as plt\n\nred_patch = mpatches.Patch(color='red', label='The red data')\nplt.legend(handles=[red_patch])\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/mFZhR.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/mFZhR.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Edit</strong></p>\n\n<p>To add two patches you can do this:</p>\n\n<pre><code>import matplotlib.patches as mpatches\nimport matplotlib.pyplot as plt\n\nred_patch = mpatches.Patch(color='red', label='The red data')\nblue_patch = mpatches.Patch(color='blue', label='The blue data')\n\nplt.legend(handles=[red_patch, blue_patch])\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/T1QLU.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/T1QLU.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 559, "user_id": 5377184, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/clN8K.jpg?s=128&g=1", "display_name": "tlanigan", "link": "https://stackoverflow.com/users/5377184/tlanigan"}, "is_accepted": false, "score": 1, "last_activity_date": 1519423458, "creation_date": 1519423458, "answer_id": 48956875, "question_id": 39500265, "link": "https://stackoverflow.com/questions/39500265/manually-add-legend-items-python-matplotlib/48956875#48956875", "title": "Manually add legend Items Python matplotlib", "body": "<p>I ended up writing this out:</p>\n\n<pre><code>def plot_bargraph_with_groupings(df, groupby, colourby, title, xlabel, ylabel):\n    \"\"\"\n    Plots a dataframe showing the frequency of datapoints grouped by one column and coloured by another.\n    df : dataframe\n    groupby: the column to groupby\n    colourby: the column to color by\n    title: the graph title\n    xlabel: the x label,\n    ylabel: the y label\n    \"\"\"\n\n    import matplotlib.patches as mpatches\n\n    # Makes a mapping from the unique colourby column items to a random color.\n    ind_col_map = {x:y for x, y in zip(df[colourby].unique(),\n                               [plt.cm.Paired(np.arange(len(df[colourby].unique())))][0])}\n\n\n    # Find when the indicies of the soon to be bar graphs colors.\n    unique_comb = df[[groupby, colourby]].drop_duplicates()\n    name_ind_map = {x:y for x, y in zip(unique_comb[groupby], unique_comb[colourby])}\n    c = df[groupby].value_counts().index.map(lambda x: ind_col_map[name_ind_map[x]])\n\n    # Makes the bargraph.\n    ax = df[groupby].value_counts().plot(kind='bar',\n                                         figsize=FIG_SIZE,\n                                         title=title,\n                                         color=[c.values])\n    # Makes a legend using the ind_col_map\n    legend_list = []\n    for key in ind_col_map.keys():\n        legend_list.append(mpatches.Patch(color=ind_col_map[key], label=key))\n\n    # display the graph.\n    plt.legend(handles=legend_list)\n    ax.set_xlabel(xlabel)\n    ax.set_ylabel(ylabel)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "edited": false, "score": 0, "creation_date": 1579615424, "post_id": 49130703, "comment_id": 105819509, "body": "can I have a circular patch instead of a rectangular ?"}], "tags": [], "owner": {"reputation": 459, "user_id": 8988626, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pu1B0dXkMKM/AAAAAAAAAAI/AAAAAAAAAPU/dnqwFKbUWa0/photo.jpg?sz=128", "display_name": "birac", "link": "https://stackoverflow.com/users/8988626/birac"}, "is_accepted": false, "score": 25, "last_activity_date": 1520340224, "last_edit_date": 1520340224, "creation_date": 1520338818, "answer_id": 49130703, "question_id": 39500265, "link": "https://stackoverflow.com/questions/39500265/manually-add-legend-items-python-matplotlib/49130703#49130703", "title": "Manually add legend Items Python matplotlib", "body": "<p>I'm adding some code to build on the answer from <a href=\"https://stackoverflow.com/users/2029132/gabra\">https://stackoverflow.com/users/2029132/gabra</a> and the comment from <a href=\"https://stackoverflow.com/users/5946578/brady-forcier\">https://stackoverflow.com/users/5946578/brady-forcier</a>. Here, I manually add elements to a legend <em>via</em> a 'for' loop.</p>\n\n<p>First I create a dictionary with my legend names and desired colours. I actually do this as I load in my data, but here I'm just explicitly defining:</p>\n\n<pre><code>import matplotlib.patches as mpatches\nimport matplotlib.pyplot as plt    \n\nlegend_dict = { 'data1' : 'green', 'data2' : 'red', 'data3' : 'blue' }\n</code></pre>\n\n<p>Then I loop through the dictionary and for each entry define a patch and append to a list, 'patchList'. I then use this list to create my legend.</p>\n\n<pre><code>patchList = []\nfor key in legend_dict:\n        data_key = mpatches.Patch(color=legend_dict[key], label=key)\n        patchList.append(data_key)\n\nplt.legend(handles=patchList)\nplt.savefig('legend.png', bbox_inches='tight')\n</code></pre>\n\n<p>Here's my output:\n<a href=\"https://i.stack.imgur.com/CgYxI.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/CgYxI.png\" alt=\"legend example\"></a></p>\n\n<p>I'm not bothered about the legend entries being in a particular order, but you could probably achieve this with </p>\n\n<pre><code>plt.legend(handles=sorted(patchList))\n</code></pre>\n\n<p>This is my first answer, so apologies in advance for any errors/faux pas.</p>\n"}, {"tags": [], "owner": {"reputation": 1254, "user_id": 2087754, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/96baff58e58c37bf3ecfe98a9f406430?s=128&d=identicon&r=PG", "display_name": "R2-D2", "link": "https://stackoverflow.com/users/2087754/r2-d2"}, "is_accepted": false, "score": 47, "last_activity_date": 1542302667, "creation_date": 1542302667, "answer_id": 53324868, "question_id": 39500265, "link": "https://stackoverflow.com/questions/39500265/manually-add-legend-items-python-matplotlib/53324868#53324868", "title": "Manually add legend Items Python matplotlib", "body": "<p>Here's a solution which let's you control the width and style of your legend lines (among <a href=\"https://matplotlib.org/api/_as_gen/matplotlib.lines.Line2D.html\" rel=\"noreferrer\">a lot of other things</a>).</p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom matplotlib.lines import Line2D\n\ncolors = ['black', 'red', 'green']\nlines = [Line2D([0], [0], color=c, linewidth=3, linestyle='--') for c in colors]\nlabels = ['black data', 'red data', 'green data']\nplt.legend(lines, labels)\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/wxg8o.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/wxg8o.png\" alt=\"output of the code above\"></a></p>\n\n<p>For even more options, take a look at this <a href=\"https://matplotlib.org/gallery/text_labels_and_annotations/custom_legends.html\" rel=\"noreferrer\">matplotlib gallery sample</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 515, "user_id": 8419574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nKoP1.png?s=128&g=1", "display_name": "kevin_theinfinityfund", "link": "https://stackoverflow.com/users/8419574/kevin-theinfinityfund"}, "edited": false, "score": 6, "creation_date": 1580842834, "post_id": 56551701, "comment_id": 106228717, "body": "For anyone using standard matplotlib.pyplot as plt I had to do this:  <code>plt.legend()</code> <code>handles, labels = plt.gca().get_legend_handles_labels()</code>"}, {"owner": {"reputation": 292, "user_id": 4060622, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/915e504c081f3d9522043ccd01c1730c?s=128&d=identicon&r=PG&f=1", "display_name": "abhishah901", "link": "https://stackoverflow.com/users/4060622/abhishah901"}, "edited": false, "score": 8, "creation_date": 1590085546, "post_id": 56551701, "comment_id": 109554146, "body": "A better answer, since it shows appending to generated-labels, rather than adding everything manually."}], "tags": [], "owner": {"reputation": 745, "user_id": 9249533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7ba933bc68896d465439c5707a53f8c?s=128&d=identicon&r=PG", "display_name": "CreekGeek", "link": "https://stackoverflow.com/users/9249533/creekgeek"}, "is_accepted": false, "score": 48, "last_activity_date": 1618291277, "last_edit_date": 1618291277, "creation_date": 1560287376, "answer_id": 56551701, "question_id": 39500265, "link": "https://stackoverflow.com/questions/39500265/manually-add-legend-items-python-matplotlib/56551701#56551701", "title": "Manually add legend Items Python matplotlib", "body": "<p>For those wanting to add manual legend items into a single/common legend with automatically generated items:</p>\n<pre><code>#Imports\nimport matplotlib.patches as mpatches\n\n# where some data has already been plotted to ax\nhandles, labels = ax.get_legend_handles_labels()\n\n# manually define a new patch \npatch = mpatches.Patch(color='grey', label='Manual Label')\n\n# handles is a list, so append manual patch\nhandles.append(patch) \n\n# plot the legend\nplt.legend(handles=handles, loc='upper center')\n</code></pre>\n<p>Example of common legend with manual and auto-generated items:<br />\n<a href=\"https://i.stack.imgur.com/FdjdM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FdjdM.png\" alt=\"example of common legend with manual and auto-generated items\" /></a></p>\n"}], "owner": {"reputation": 897, "user_id": 5946578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/643d628233ae3fc0bf662d3f3878a6b5?s=128&d=identicon&r=PG&f=1", "display_name": "Brady forcier", "link": "https://stackoverflow.com/users/5946578/brady-forcier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90778, "favorite_count": 30, "answer_count": 5, "score": 86, "last_activity_date": 1618291277, "creation_date": 1473890158, "question_id": 39500265, "link": "https://stackoverflow.com/questions/39500265/manually-add-legend-items-python-matplotlib", "title": "Manually add legend Items Python matplotlib", "body": "<p>I am using matlibplot and I would like to manually add items to the legend that are a color and a label. I am adding data to to the plot to specifying there would lead to a lot of duplicates.</p>\n\n<p>My thought was to do:</p>\n\n<pre><code>    ax2.legend(self.labels,colorList[:len(self.labels)])\n    plt.legend()\n</code></pre>\n\n<p>Where self.labels is the number of items I want legend lables for that takes a subset of the large color list. However this yields nothing when I run it.</p>\n\n<p>Am I missing anything?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 10872, "user_id": 3135417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b989009ea961e780793f80ea6d53240?s=128&d=identicon&r=PG&f=1", "display_name": "Abdou", "link": "https://stackoverflow.com/users/3135417/abdou"}, "is_accepted": false, "score": 2, "last_activity_date": 1473890882, "creation_date": 1473890882, "answer_id": 39500391, "question_id": 39500258, "link": "https://stackoverflow.com/questions/39500258/pandas-how-to-get-the-unique-values-of-a-column-that-contains-a-list-of-values/39500391#39500391", "title": "Pandas: how to get the unique values of a column that contains a list of values?", "body": "<p>Try:</p>\n\n<pre><code>uniq_df = df.groupby('col')['name'].apply(lambda x: list(set(reduce(lambda y,z: y+z,x)))).reset_index()\nuniq_df.columns = ['col','uniq_list']\npd.merge(df,uniq_df, on='col', how='left')\n</code></pre>\n\n<p>Desired output:</p>\n\n<pre><code>  col                   name              uniq_list\n0   A  [one two, three four]  [one two, three four]\n1   A                     []  [one two, three four]\n2   A              [one two]  [one two, three four]\n3   B                  [one]           [three, one]\n4   B                     []           [three, one]\n5   B                [three]           [three, one]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "edited": false, "score": 0, "creation_date": 1473898251, "post_id": 39500774, "comment_id": 66320203, "body": "interesting. <code>sum</code> with strings?!"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "edited": false, "score": 1, "creation_date": 1473903186, "post_id": 39500774, "comment_id": 66321213, "body": "@Noobie it&#39;s worse than that. It&#39;s sun on list of lists. It produces a concatenated list over which I apply np.unique"}, {"owner": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "edited": false, "score": 0, "creation_date": 1473947641, "post_id": 39500774, "comment_id": 66341627, "body": "hehehe. i just tried but it seems your nice solutions fails when there are missing values for col. In that case I get <code>TypeError: can only concatenate list (not &quot;int&quot;) to list</code>. Replacing the missing values with <code>fillna(&#39;&#39;)</code> or <code>fillna(&#39;[]&#39;)</code> does not work. Any ideas?"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "edited": false, "score": 1, "creation_date": 1473947838, "post_id": 39500774, "comment_id": 66341791, "body": "@Noobie if you want a unique master list per group defined by <code>&#39;col&#39;</code>, do you expect missing values in <code>&#39;col&#39;</code> to be considered it&#39;s own group?"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "edited": false, "score": 1, "creation_date": 1473948124, "post_id": 39500774, "comment_id": 66342007, "body": "@Noobie just <code>df = df.dropna(subset=[&#39;col&#39;]).copy()</code> ahead of time"}, {"owner": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "edited": false, "score": 0, "creation_date": 1473948274, "post_id": 39500774, "comment_id": 66342112, "body": "yes but I dont want to lose obvervations in <code>df</code>. Does<code>df.col.map(df.dropna(subset=[&#39;col&#39;]).groupby(&#39;col&#39;)[&#39;nam&zwnj;&#8203;e&#39;].sum().apply(np.u&zwnj;&#8203;nique))</code> make sense?"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 4, "last_activity_date": 1473960945, "last_edit_date": 1473960945, "creation_date": 1473893231, "answer_id": 39500774, "question_id": 39500258, "link": "https://stackoverflow.com/questions/39500258/pandas-how-to-get-the-unique-values-of-a-column-that-contains-a-list-of-values/39500774#39500774", "title": "Pandas: how to get the unique values of a column that contains a list of values?", "body": "<p>Here is the solution    </p>\n\n<pre><code>df['unique_list'] = df.col.map(df.groupby('col')['name'].sum().apply(np.unique))\n    df\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/S8IdI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/S8IdI.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2472, "favorite_count": 1, "accepted_answer_id": 39500774, "answer_count": 2, "score": 7, "last_activity_date": 1473960945, "creation_date": 1473890134, "last_edit_date": 1495541807, "question_id": 39500258, "link": "https://stackoverflow.com/questions/39500258/pandas-how-to-get-the-unique-values-of-a-column-that-contains-a-list-of-values", "title": "Pandas: how to get the unique values of a column that contains a list of values?", "body": "<p>Consider the following dataframe</p>\n\n<pre><code>df = pd.DataFrame({'name' : [['one two','three four'], ['one'],[], [],['one two'],['three']],\n                   'col' : ['A','B','A','B','A','B']})       \ndf.sort_values(by='col',inplace=True)\n\ndf\nOut[62]: \n  col                   name\n0   A  [one two, three four]\n2   A                     []\n4   A              [one two]\n1   B                  [one]\n3   B                     []\n5   B                [three]\n</code></pre>\n\n<p>I would like to get a column that keeps track of all the unique strings included in <code>name</code> for each combination of <code>col</code>.</p>\n\n<p>That is, the expected output is</p>\n\n<pre><code>df\nOut[62]: \n  col                   name    unique_list\n0   A  [one two, three four]    [one two, three four]\n2   A                     []    [one two, three four]\n4   A              [one two]    [one two, three four]\n1   B                  [one]    [one, three]\n3   B                     []    [one, three]\n5   B                [three]    [one, three]\n</code></pre>\n\n<p>Indeed, say for group A, you can see that the unique set of strings included in <code>[one two, three four]</code>, <code>[]</code> and  <code>[one two]</code> is  <code>[one two]</code></p>\n\n<p>I can obtain the corresponding number of unique values using <a href=\"https://stackoverflow.com/questions/38355931/pandas-how-to-get-the-unique-number-of-values-in-cells-when-cells-contain-list\">Pandas : how to get the unique number of values in cells when cells contain lists?</a> : </p>\n\n<pre><code>df['count_unique']=df.groupby('col')['name'].transform(lambda x: list(pd.Series(x.apply(pd.Series).stack().reset_index(drop=True, level=1).nunique())))\n\n\ndf\nOut[65]: \n  col                   name count_unique\n0   A  [one two, three four]            2\n2   A                     []            2\n4   A              [one two]            2\n1   B                  [one]            2\n3   B                     []            2\n5   B                [three]            2\n</code></pre>\n\n<p>but replacing <code>nunique</code> with <code>unique</code> above fails.</p>\n\n<p>Any ideas?\nThanks!</p>\n"}, {"tags": ["python", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 1556, "user_id": 2298935, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4e6cf47a45636de5036da34d16f42415?s=128&d=identicon&r=PG", "display_name": "toine", "link": "https://stackoverflow.com/users/2298935/toine"}, "is_accepted": false, "score": 0, "last_activity_date": 1473891913, "creation_date": 1473891913, "answer_id": 39500568, "question_id": 39500218, "link": "https://stackoverflow.com/questions/39500218/numpy-binning-how-to-get-array-indexes-satisfying-a-predicate/39500568#39500568", "title": "numpy binning: how to get array indexes satisfying a predicate", "body": "<p>first things first:</p>\n\n<pre><code>import numpy as np\n</code></pre>\n\n<p>let's say you have your data <code>g</code>:</p>\n\n<pre><code>g = sorted((1e3 * np.random.random(1024)).astype(int))\n</code></pre>\n\n<p>and your bins <code>f</code>:</p>\n\n<pre><code>f = sorted((1e3 * np.random.random(32)).astype(int))\n</code></pre>\n\n<p>you can use <code>numpy.digitize</code>, which return the bin indices in <code>f</code> where each element of <code>g</code> belongs:</p>\n\n<pre><code>dg = np.digitize(g,f)\n</code></pre>\n\n<p>The resulting vector is going to contains list of different sizes so you might want to store it is a list:</p>\n\n<pre><code>for i in range(len(f)): v.append(np.argwhere(dg == i))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "is_accepted": true, "score": 2, "last_activity_date": 1473909284, "creation_date": 1473909284, "answer_id": 39502590, "question_id": 39500218, "link": "https://stackoverflow.com/questions/39500218/numpy-binning-how-to-get-array-indexes-satisfying-a-predicate/39502590#39502590", "title": "numpy binning: how to get array indexes satisfying a predicate", "body": "<p>You can use <code>searchsorted</code> to find the sorted positions of <code>f</code> in <code>g</code>.  These give the lower and upper bounds of the ranges that you want:</p>\n\n<p>For example,</p>\n\n<pre><code>In [42]: g\nOut[42]: \narray([ 1, 11, 19, 20, 21, 32, 36, 41, 47, 53, 54, 55, 65, 66, 69, 74, 76,\n       87, 89, 94])\n\nIn [43]: f\nOut[43]: [0, 10, 20, 50, 100]\n\nIn [44]: binedges = g.searchsorted(f)\n\nIn [45]: binedges\nOut[45]: array([ 0,  1,  3,  9, 20])\n</code></pre>\n\n<p>The array <code>binedges</code> gives you all the information that you need: the range of indices for bin <code>k</code> is <code>range(binedges[k], binedges[k+1])</code>.</p>\n\n<p>Here's how you could create an explicit list of the indices in each bin:</p>\n\n<pre><code>In [46]: rngs = [list(range(binedges[k], binedges[k+1])) for k in range(len(binedges)-1)]\n\nIn [47]: rngs\nOut[47]: [[0], [1, 2], [3, 4, 5, 6, 7, 8], [9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19]]\n</code></pre>\n"}], "owner": {"reputation": 1037, "user_id": 2932861, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/aed4de86bda84c7b1c5032905775f64d?s=128&d=identicon&r=PG", "display_name": "LostInTheFrequencyDomain", "link": "https://stackoverflow.com/users/2932861/lostinthefrequencydomain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "accepted_answer_id": 39502590, "answer_count": 2, "score": 0, "last_activity_date": 1473909284, "creation_date": 1473889963, "last_edit_date": 1473891473, "question_id": 39500218, "link": "https://stackoverflow.com/questions/39500218/numpy-binning-how-to-get-array-indexes-satisfying-a-predicate", "title": "numpy binning: how to get array indexes satisfying a predicate", "body": "<p>I have a vector <code>g</code> of values of length 1024 and a smaller vector <code>f</code> of size 32 defining bin boundaries. <code>v</code> and <code>f</code> are sorted in ascending order. I want to return an array of vectors i.e <code>[v_1,v_2,v_3,...]</code> of length <code>len(f)</code> such that each vector <code>v_i</code> contains indices of <code>g</code> between <code>f_i</code> and <code>f_i + 1</code>. Is there a NumPy way to do such a thing that does not involve looping?</p>\n"}, {"tags": ["python", "list", "swap"], "comments": [{"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1473890091, "post_id": 39500214, "comment_id": 66317981, "body": "I just got the idea of doing it via. <code>list slicing</code> and I think that is pretty efficient. Still I am interested to know if there is any better way. Not deleting the question as it may be helpful to someone else."}], "answers": [{"tags": [], "owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "is_accepted": true, "score": 1, "last_activity_date": 1473889985, "creation_date": 1473889985, "answer_id": 39500221, "question_id": 39500214, "link": "https://stackoverflow.com/questions/39500214/swap-every-nth-element-of-two-lists/39500221#39500221", "title": "Swap every Nth element of two lists", "body": "<p>We can achieve that via <code>list slicing</code> as:</p>\n\n<pre><code>&gt;&gt;&gt; l1[2::3], l2[2::3] = l2[2::3], l1[2::3]\n&gt;&gt;&gt; l1, l2\n([1, 2, 'c', 4, 5, 'f'], ['a', 'b', 3, 'd', 'e', 6])\n</code></pre>\n"}], "owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 0, "accepted_answer_id": 39500221, "answer_count": 1, "score": -2, "last_activity_date": 1473890558, "creation_date": 1473889941, "question_id": 39500214, "link": "https://stackoverflow.com/questions/39500214/swap-every-nth-element-of-two-lists", "title": "Swap every Nth element of two lists", "body": "<p>I have two lists as:</p>\n\n<pre><code>l1 = [1, 2, 3, 4, 5, 6]\nl2 = ['a', 'b', 'c', 'd', 'e', 'f']\n</code></pre>\n\n<p>I need to swap every <code>N</code>th element of these lists. For example if <code>N=3</code>, desired result is:</p>\n\n<pre><code>l1 = [1, 2, 'c', 4, 5, 'f']\nl2 = ['a', 'b', 3, 'd', 'e', 6]\n</code></pre>\n\n<p>I can do it via <code>for</code> loop and swap every <code>N</code>th element as:</p>\n\n<pre><code>&gt;&gt;&gt; for i in range(2,len(l1),3):\n...     l1[i], l2[i] = l2[i], l1[i]\n... \n&gt;&gt;&gt; l1, l2\n([1, 2, 'c', 4, 5, 'f'], ['a', 'b', 3, 'd', 'e', 6])\n</code></pre>\n\n<p>I want to know whether there is much more efficient way to achieve it. May be without <code>for</code> loop.</p>\n\n<p>Note: Length of both lists will be same.</p>\n"}, {"tags": ["python", "shell"], "comments": [{"owner": {"reputation": 18703, "user_id": 2912340, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ddQ02.jpg?s=128&g=1", "display_name": "\u0141ukasz Rogalski", "link": "https://stackoverflow.com/users/2912340/%c5%81ukasz-rogalski"}, "edited": false, "score": 0, "creation_date": 1473891181, "post_id": 39500147, "comment_id": 66318333, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/18319605/python-get-output-of-the-shell-command-history\">Python: get output of the shell command &#39;history&#39;</a>"}, {"owner": {"reputation": 531, "user_id": 6263092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb2b4f5a51939f8596040cc534fec8da?s=128&d=identicon&r=PG&f=1", "display_name": "daleonpz", "link": "https://stackoverflow.com/users/6263092/daleonpz"}, "reply_to_user": {"reputation": 18703, "user_id": 2912340, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ddQ02.jpg?s=128&g=1", "display_name": "\u0141ukasz Rogalski", "link": "https://stackoverflow.com/users/2912340/%c5%81ukasz-rogalski"}, "edited": false, "score": 0, "creation_date": 1473891558, "post_id": 39500147, "comment_id": 66318449, "body": "I tried that solutions. The <code>~&#47;.bash_history</code>  also shows the output. on the other hand <code>history</code> only prints the executed commands and it can be timestamped"}], "owner": {"reputation": 531, "user_id": 6263092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb2b4f5a51939f8596040cc534fec8da?s=128&d=identicon&r=PG&f=1", "display_name": "daleonpz", "link": "https://stackoverflow.com/users/6263092/daleonpz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1473890584, "creation_date": 1473889667, "last_edit_date": 1473890584, "question_id": 39500147, "link": "https://stackoverflow.com/questions/39500147/read-timestamped-shell-history-from-python2", "title": "read timestamped shell history from python2", "body": "<p>I would like to know if it is possible to read the output of <code>history</code> shell command from python2.</p>\n\n<p>I tried:</p>\n\n<pre><code>import subprocess\np = subprocess.Popen(\"history\",shell=True,stdout=subprocess.PIPE,stderr=subprocess.STDOUT )\nfor line in p.stdout.readlines():\n    print line\nretval = p.wait()\n</code></pre>\n\n<p>just for testing but I got nothing - no output - no print. This code worked with <code>ls</code></p>\n\n<p>Also I want to add the timestamp</p>\n\n<pre><code>HISTTIMEFORMAT=\"%d/%m/%y %T \"\n</code></pre>\n\n<p><strong>UPDATE</strong>\nI just realized that <code>history</code> is not in <code>/usr/bin/ls</code></p>\n\n<pre><code>[Jobs:2]  dnl@user -&gt;  whereis history\nhistory: /usr/share/man/man3/history.3.gz /usr/share/man/mann/history.n.gz /usr/share/info/history.info.gz\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 46515, "user_id": 5647260, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oByMV.jpg?s=128&g=1", "display_name": "Andrew Li", "link": "https://stackoverflow.com/users/5647260/andrew-li"}, "edited": false, "score": 0, "creation_date": 1473889652, "post_id": 39500093, "comment_id": 66317803, "body": "It looks like it&#39;s doing what its supposed to do, but I&#39;m surprised it even runs with that indenting. Indent blocks correctly as python has no braces."}, {"owner": {"reputation": 1593, "user_id": 5519975, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6946952cc7f81bfe08d4c286a9563d1f?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan", "link": "https://stackoverflow.com/users/5519975/tristan"}, "edited": false, "score": 0, "creation_date": 1473889656, "post_id": 39500093, "comment_id": 66317806, "body": "Which version of python?"}], "answers": [{"comments": [{"owner": {"reputation": 1593, "user_id": 5519975, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6946952cc7f81bfe08d4c286a9563d1f?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan", "link": "https://stackoverflow.com/users/5519975/tristan"}, "edited": false, "score": 0, "creation_date": 1473889779, "post_id": 39500143, "comment_id": 66317864, "body": "Python suggests to use 4 spaces for indentation."}], "tags": [], "owner": {"reputation": 2447, "user_id": 3006366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVcKL.png?s=128&g=1", "display_name": "ode2k", "link": "https://stackoverflow.com/users/3006366/ode2k"}, "is_accepted": false, "score": 1, "last_activity_date": 1473889789, "last_edit_date": 1473889789, "creation_date": 1473889653, "answer_id": 39500143, "question_id": 39500093, "link": "https://stackoverflow.com/questions/39500093/python-joke-or-chat-error/39500143#39500143", "title": "Python joke or chat error", "body": "<p>Your spacing / indentation is off:</p>\n\n<pre><code>if question == \"joke\":\n print(\"what do you call a deer with no heart?\")\nidk = input()\nprint (\"Dead!!! LOL!!!!\")\n</code></pre>\n\n<p>In your code should be:</p>\n\n<pre><code>if question == \"joke\":\n print(\"what do you call a deer with no heart?\")\n idk = input()\n print (\"Dead!!! LOL!!!!\")\n</code></pre>\n\n<p><strong>PS:</strong> You should use more than 1 space for indenting to make it easier to read. Such as:</p>\n\n<pre><code>if question == \"joke\":\n    print(\"what do you call a deer with no heart?\")\n    idk = input()\n    print (\"Dead!!! LOL!!!!\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 130, "user_id": 5326728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb49642583b9eb3913282d58a0683eac?s=128&d=identicon&r=PG&f=1", "display_name": "Hiren", "link": "https://stackoverflow.com/users/5326728/hiren"}, "is_accepted": false, "score": 1, "last_activity_date": 1473889699, "creation_date": 1473889699, "answer_id": 39500152, "question_id": 39500093, "link": "https://stackoverflow.com/questions/39500093/python-joke-or-chat-error/39500152#39500152", "title": "Python joke or chat error", "body": "<p>In the absence of proper indentation, Python is assuming that the lines</p>\n\n<pre><code>idk = input()\nprint (\"Dead!!! LOL!!!!\")\n</code></pre>\n\n<p>are outside the <code>if</code> statement. Indent them like you did for the <code>print</code> statement for the punchline.</p>\n"}], "owner": {"reputation": 1, "user_id": 6832910, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ULK-UiMliPU/AAAAAAAAAAI/AAAAAAAAACM/IQw2hpv7Sh0/photo.jpg?sz=128", "display_name": "Callum Eldridge", "link": "https://stackoverflow.com/users/6832910/callum-eldridge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1473889789, "creation_date": 1473889433, "question_id": 39500093, "link": "https://stackoverflow.com/questions/39500093/python-joke-or-chat-error", "title": "Python joke or chat error", "body": "<p>when i run this, if i type chat it runs the punchline from the joke above how do i fix this?\n<a href=\"http://i.stack.imgur.com/1oXAp.png\" rel=\"nofollow\">enter image description here</a></p>\n\n<pre><code>print (\"whats your name?\")\nfirstname = input()\nprint (\"hello,\", firstname)\nprint (\"what's your surname?\")\nsurname = input()\n\nfullname = (firstname +\" \"+ surname)\nprint (\"hello,\", fullname)\n\nprint (\"what shall i call you on a daily basis?\")\nname = input()\nprint (\"Glad to meet you,\", name)\n\n\nprint (\"is there anything you would like to do?\")\nprint (\" you can 'hear a joke' or 'have a chat'\")\n\n\nquestion = input(\"joke or chat?\")\nif question == \"joke\":\n print(\"what do you call a deer with no heart?\")\nidk = input()\nprint (\"Dead!!! LOL!!!!\")\n\nif question == \"chat\":\n print(\"what games do you like?\")\ngame = input()\nprint (\"NO way i love,\", game)\n</code></pre>\n"}, {"tags": ["python", "bash", "macos", "robotframework"], "comments": [{"owner": {"reputation": 1728, "user_id": 2772269, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e594e5e8ae614f1de1eaca7f453dbfbf?s=128&d=identicon&r=PG&f=1", "display_name": "Sanju", "link": "https://stackoverflow.com/users/2772269/sanju"}, "edited": false, "score": 0, "creation_date": 1474015371, "post_id": 39500057, "comment_id": 66369181, "body": "check if those locations are listed under PATH , if not just do export PATH=&lt;PATH_TO_INSTALLED_PYTHON&gt;:$PATH and try again"}, {"owner": {"reputation": 17, "user_id": 5645228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f3545ab7a89d96b6457a7f811ea17405?s=128&d=identicon&r=PG&f=1", "display_name": "Rath", "link": "https://stackoverflow.com/users/5645228/rath"}, "reply_to_user": {"reputation": 1728, "user_id": 2772269, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e594e5e8ae614f1de1eaca7f453dbfbf?s=128&d=identicon&r=PG&f=1", "display_name": "Sanju", "link": "https://stackoverflow.com/users/2772269/sanju"}, "edited": false, "score": 0, "creation_date": 1476278972, "post_id": 39500057, "comment_id": 67277469, "body": "@Sanju - I have updated my environment variable above. I looks good to me. In terminal, I am able to get the Jython version but not for the Pybot/Jybot. So, I&#39;m not getting this issue on EI Capitan but I&#39;m now facing it on Mac Sierra."}], "owner": {"reputation": 17, "user_id": 5645228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f3545ab7a89d96b6457a7f811ea17405?s=128&d=identicon&r=PG&f=1", "display_name": "Rath", "link": "https://stackoverflow.com/users/5645228/rath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 703, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1476278832, "creation_date": 1473889259, "last_edit_date": 1476278832, "question_id": 39500057, "link": "https://stackoverflow.com/questions/39500057/jybot-pybot-issue-with-robotframework-on-mac", "title": "Jybot/Pybot issue with Robotframework on Mac", "body": "<p>I'm trying to run the robotframework on Pycharm on Mac EI captain. I have installed Pycharm, Robotframework for Python and jython. I can see the pybot and jybot files on Python and Jython directories respectively. When I run the command <code>pybot --version</code> and <code>jybot --version</code> I get an error saying <code>\"-bash: pybot command not found\"</code></p>\n\n<p>Here is my environment variables:</p>\n\n<pre><code>export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_101.jdk/Contents/Home\n\nexport CLASSPATH=${CLASSPATH}/Library/Java/JavaVirtualMachines/jdk1.8.0_101.jdk/Contents/Home/jre/lib/ext/*.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_101.jdk/Contents/Home/jre/lib/*.jar\n\nexport PATH=${PATH}/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:${JAVA_HOME}/bin:/Users/el/Library/Python/2.7/lib/python/site-packages:/Users/el/Library/Python/2.7:/usr/local/Cellar/jython/2.7.0/libexec/bin\n</code></pre>\n\n<p>I am using Jython 2.7.0 and Python 2.7.1. What could have gone wrong?</p>\n"}, {"tags": ["python", "python-2.7", "matplotlib", "pyqt4"], "comments": [{"owner": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "edited": false, "score": 0, "creation_date": 1473911428, "post_id": 39500055, "comment_id": 66322951, "body": "Update the artist you have instead of creating new ones and look into blitting."}, {"owner": {"reputation": 1262, "user_id": 5597037, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/eaab5b288caf39e6cbd4387c0c3cf344?s=128&d=identicon&r=PG", "display_name": "Mike C.", "link": "https://stackoverflow.com/users/5597037/mike-c"}, "reply_to_user": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "edited": false, "score": 0, "creation_date": 1473954357, "post_id": 39500055, "comment_id": 66346367, "body": "@tacaswell Could you please provide an example? I&#39;m reading the documentation, but I am a bit confused as to how to do this."}], "owner": {"reputation": 1262, "user_id": 5597037, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/eaab5b288caf39e6cbd4387c0c3cf344?s=128&d=identicon&r=PG", "display_name": "Mike C.", "link": "https://stackoverflow.com/users/5597037/mike-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1473889248, "creation_date": 1473889248, "question_id": 39500055, "link": "https://stackoverflow.com/questions/39500055/move-dot-faster-with-matplotlib", "title": "Move dot faster with Matplotlib", "body": "<p>I am trying to move a dot to a particular location on the graph dynamically based on real-time data. I'm basically plotting the graph, emitting a signal from a worker thread which calls the 'move_dot' function. It works, however it is slow. I can only call one frame per second. I'm using the MPL widget in pythonxy. I am also using Windows. Is there a way to speed this up?</p>\n\n<p>Here is the code:</p>\n\n<pre><code>from PyQt4 import QtGui\nimport ui_sof_test  #Gui File\nimport sys\nfrom matplotlib.ticker import AutoMinorLocator\n\nclass Gui(QtGui.QMainWindow, ui_sof_test.Ui_MainWindow):    \n    def __init__(self):        \n        super(self.__class__, self).__init__()        \n        self.setupUi(self)  # This is defined in ui_pumptest.py file automatically       \n        self.mpl_plot(0)  \n        self.move_dot()\n\n    cursorplot = 0\n    def move_dot(self, x = 100, y = 5, color = 'r'):\n        fig = self.mplwidget_3.figure\n        par = fig.add_subplot(111)\n        ax3 = par.twinx()\n        plty = fig.gca()\n        plty.yaxis.set_visible(False)                \n        ax3.plot(x, y, color, marker = 'o', linewidth = 1)                \n        fig.canvas.draw()\n        #ax3.cla()                \n\n    def mpl_plot(self, plot_page, replot = 0):  #Data stored in lists \n        fig = self.mplwidget_3.figure    #Add a figure   \n        #Clears Figure if data is replotted\n        if replot == 1:\n            fig.clf()\n        plty = fig.gca()\n        plty.yaxis.set_visible(False)        \n        par0 = fig.add_subplot(111)\n        #Add Axes\n        plt = par0.twinx()\n        #Plot Chart\n        plt.hold(False)        \n        plt.plot([0,100,200,300,400,500], [1,3,2,4,7,5], 'b', linestyle = \"dashed\", linewidth = 1) \n        #Plot Factory Power        \n        minorLocatorx = AutoMinorLocator()        \n        plt.xaxis.set_minor_locator(minorLocatorx)\n        plt.tick_params(which='both', width= 0.5)\n        plt.tick_params(which='major', length=7)\n        plt.tick_params(which='minor', length=4, color='k')\n\n        #Plot y axis minor tick marks\n        minorLocatory = AutoMinorLocator()\n        plt.yaxis.set_minor_locator(minorLocatory)\n        plt.tick_params(which='both', width= 0.5)\n        plt.tick_params(which='major', length=7)\n        plt.tick_params(which='minor', length=4, color='k')\n\n        plt.minorticks_on()\n        #Make Border of Chart White\n        fig.set_facecolor('white')    \n\n        #Plot Grid        \n        plt.grid(b=True, which='both', color='k', linestyle='-') \n\n        #Manually make vertical gridlines. Above line doesn't make vertical lines for some reason\n        for xmaj in plt.xaxis.get_majorticklocs():\n            plt.axvline(x=xmaj, color = 'k',ls='-')\n        for xmin in plt.xaxis.get_minorticklocs():\n            plt.axvline(x=xmin, color = 'k', ls='-')\n\n        #Set Scales         \n\n        plt.yaxis.tick_left()\n\n        # Set Axes Colors\n        plt.tick_params(axis='y', colors='b')       \n        # Set Chart Labels        \n        plt.yaxis.set_label_position(\"left\")\n        plt.set_xlabel(\" \")\n        plt.set_ylabel(\" \" , color = 'b')\n        fig.canvas.draw() \n        self.move_dot()\n\ndef main():\n    app = QtGui.QApplication(sys.argv)  # A new instance of QApplication\n    form = Gui()  # We set the form to be our ExampleApp (design)\n    form.show()  # Show the form\n    app.exec_()  # and execute the. app\n\nif __name__ == '__main__':  # if we're running file directly and not importing it\n    main()  # run the main function\n</code></pre>\n"}, {"tags": ["python", "css-selectors", "beautifulsoup", "robobrowser"], "comments": [{"owner": {"reputation": 1593, "user_id": 5519975, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6946952cc7f81bfe08d4c286a9563d1f?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan", "link": "https://stackoverflow.com/users/5519975/tristan"}, "edited": false, "score": 0, "creation_date": 1473889257, "post_id": 39499976, "comment_id": 66317658, "body": "What is your exact error?"}, {"owner": {"reputation": 1593, "user_id": 5519975, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6946952cc7f81bfe08d4c286a9563d1f?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan", "link": "https://stackoverflow.com/users/5519975/tristan"}, "edited": false, "score": 0, "creation_date": 1473889344, "post_id": 39499976, "comment_id": 66317686, "body": "Can you try it with spaces, something like this maybe? &#39;div.cl1 &gt; .cl2&#39;"}, {"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 0, "creation_date": 1473889445, "post_id": 39499976, "comment_id": 66317725, "body": "The <code>div</code> with <code>text_2</code> is a child of <code>cl1</code> as well..."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 0, "creation_date": 1473896669, "post_id": 39499976, "comment_id": 66319820, "body": "@Jan, it is not a child, it is a descendant. <a href=\"http://stackoverflow.com/questions/1182189/css-child-vs-descendant-selectors\" title=\"css child vs descendant selectors\">stackoverflow.com/questions/1182189/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": false, "score": 0, "last_activity_date": 1473890029, "creation_date": 1473890029, "answer_id": 39500233, "question_id": 39499976, "link": "https://stackoverflow.com/questions/39499976/how-to-find-element-with-specific-parent/39500233#39500233", "title": "How to find element with specific parent?", "body": "<p>One possible solution would be:</p>\n\n<pre><code>from bs4 import BeautifulSoup\ndata = \"\"\"\n&lt;div class='cl1'&gt;\n    &lt;div class='cl2'&gt;text_1&lt;/div&gt;\n    &lt;div class='cl3'&gt;\n        &lt;div class='cl2'&gt;text_2&lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\"\"\"\nsoup = BeautifulSoup(data)\ndivs = [div\n        for div in soup.find_all(\"div\", {'class': 'cl2'})\n        if 'cl1' in div.parent[\"class\"]]\n\n# [&lt;div class=\"cl2\"&gt;text_1&lt;/div&gt;]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 1, "last_activity_date": 1473896542, "creation_date": 1473896542, "answer_id": 39501209, "question_id": 39499976, "link": "https://stackoverflow.com/questions/39499976/how-to-find-element-with-specific-parent/39501209#39501209", "title": "How to find element with specific parent?", "body": "<p>You selector is on the right track, you just need to space out the classes i.e <code>div.cl1&gt;div.cl2</code> should be <code>div.cl1 &gt; div.cl2</code>:</p>\n\n<pre><code>In [5]: from bs4 import BeautifulSoup\n\nIn [6]: html = \"\"\"&lt;div class='cl1'&gt;\n    &lt;div class='cl2'&gt;text_1&lt;/div&gt;\n    &lt;div class='cl3'&gt;\n        &lt;div class='cl2'&gt;text_2&lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\"\"\"\n\nIn [7]: soup = BeautifulSoup(html, \"html.parser\")\n\nIn [8]: soup.select_one(\"div.cl1 &gt; div.cl2\") # good \nOut[8]: &lt;div class=\"cl2\"&gt;text_1&lt;/div&gt;\nIn [9]: print(soup.select_one(\"div.cl1&gt;div.cl2\")) # bad\nNone\n</code></pre>\n"}], "owner": {"reputation": 1313, "user_id": 5079255, "user_type": "registered", "accept_rate": 48, "profile_image": "https://lh3.googleusercontent.com/-KXcKecrotB0/AAAAAAAAAAI/AAAAAAAAOI4/ffaT5mAAVEc/photo.jpg?sz=128", "display_name": " GhostKU ", "link": "https://stackoverflow.com/users/5079255/ghostku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1326, "favorite_count": 0, "accepted_answer_id": 39501209, "answer_count": 2, "score": 3, "last_activity_date": 1473896542, "creation_date": 1473888834, "question_id": 39499976, "link": "https://stackoverflow.com/questions/39499976/how-to-find-element-with-specific-parent", "title": "How to find element with specific parent?", "body": "<p>I have some HTML like:</p>\n\n<pre><code>&lt;div class='cl1'&gt;\n    &lt;div class='cl2'&gt;text_1&lt;/div&gt;\n    &lt;div class='cl3'&gt;\n        &lt;div class='cl2'&gt;text_2&lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I need to find any items of cl2 class that have cl1 as parent, so i need to get <strong>text_1</strong> but not <strong>text_2</strong>. In simple css it should be like this:</p>\n\n<pre><code>'div.cl1&gt;div.cl2'\n</code></pre>\n\n<p>but I use <em>robobrowser</em> and <em>BeautifulSoup</em>, and when I try</p>\n\n<pre><code>soup.select('div.cl1&gt;div.cl2')\n</code></pre>\n\n<p>it says that css selector is wrong.</p>\n"}, {"tags": ["python", "windows", "subprocess", "interrupt", "terminate"], "comments": [{"owner": {"reputation": 276, "user_id": 3865495, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8dba8637ad45643d71584afa590616be?s=128&d=identicon&r=PG&f=1", "display_name": "CoconutBandit", "link": "https://stackoverflow.com/users/3865495/coconutbandit"}, "edited": false, "score": 0, "creation_date": 1473889233, "post_id": 39499959, "comment_id": 66317651, "body": "Why not catch the ctrl-c signal in your main program and use that to call <code>proc.terminate()</code>?"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1473905830, "post_id": 39499959, "comment_id": 66321771, "body": "In Python 3 you could use <code>_winapi.WaitForMultipleObjects([proc._handle], False, -1)</code>. For the main thread and given the wait-all flag is false, this wait automatically includes Python&#39;s <code>SIGINT</code> event. In 2.x you&#39;d have to implement this from scratch using ctypes or PyWin32."}, {"owner": {"reputation": 218, "user_id": 2847934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f958ce195c07067b1fb6df5ecdaded7?s=128&d=identicon&r=PG&f=1", "display_name": "limi44", "link": "https://stackoverflow.com/users/2847934/limi44"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1473917258, "post_id": 39499959, "comment_id": 66324489, "body": "@eryksun Thanks for the suggestion. There is a module called win32event that has a similar function and can be imported for Python 2, but I tried <code>win32event.WaitForMultipleObjects([proc._handle], False, -1)</code> and it didn&#39;t make a difference."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1473918096, "post_id": 39499959, "comment_id": 66324793, "body": "@limi44, 3.x use a Windows Event object that gets set by the signal handler for Ctrl+C. This event gets automatically added to the list when <code>_winapi.WaitForMultipleObjects</code> is called. Implementing this in 2.x requires PyWin32 or ctypes to define a console <code>CTRL_C_EVENT</code> handler  (e.g. passing a ctypes callback function to <code>SetConsoleCtrlHandler</code>) that sets an Event (created via <code>CreateEvent</code>). You&#39;d then wrap <code>WaitForMultipleObjects</code> to append the Ctrl+C event handle to the list and reset the event (<code>ResetEvent</code>) before waiting, but only when called from the main thread."}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 2, "last_activity_date": 1473916348, "last_edit_date": 1473916348, "creation_date": 1473889449, "answer_id": 39500096, "question_id": 39499959, "link": "https://stackoverflow.com/questions/39499959/terminating-a-subprocess-with-keyboardinterrupt/39500096#39500096", "title": "Terminating a subprocess with KeyboardInterrupt", "body": "<p>My ugly but successfull attempt on Windows:</p>\n\n<pre><code>import subprocess\nimport threading\n\nimport time\n\nbinary_path = 'notepad'\nargs = 'foo.txt' # arbitrary\n\nproc = None\ndone = False\n\ndef s():\n    call_str = '{} {}'.format(binary_path, args)\n    global done\n    global proc\n    proc = subprocess.Popen(call_str,stdout=subprocess.PIPE)\n    proc.wait()\n    done = True\n\n\nt = threading.Thread(target=s)\nt.start()\n\n\ntry:\n    while not done:\n        time.sleep(0.1)\n\nexcept KeyboardInterrupt:\n    print(\"terminated\")\n    proc.terminate()\n</code></pre>\n\n<p>Create a thread where the subprocess runs. Export the <code>proc</code> variable.</p>\n\n<p>Then wait forever in a non-active loop. When CTRL+C is pressed, the exception is triggered. Inter-process communication (ex: <code>proc.wait()</code>) is conflicting with CTRL+C handling otherwise. When running in a thread, no such issue.</p>\n\n<p>note: I have tried to avoid this time loop using <code>threading.lock()</code> but stumbled on the same CTRL+C ignore.</p>\n"}, {"comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 1, "creation_date": 1473918599, "post_id": 39503654, "comment_id": 66324938, "body": "<code>time.sleep(.1)</code> is interruptible. Using it instead of <code>pass</code> should reduce CPU consumption."}], "tags": [], "owner": {"reputation": 218, "user_id": 2847934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f958ce195c07067b1fb6df5ecdaded7?s=128&d=identicon&r=PG&f=1", "display_name": "limi44", "link": "https://stackoverflow.com/users/2847934/limi44"}, "is_accepted": true, "score": 4, "last_activity_date": 1473919257, "last_edit_date": 1473919257, "creation_date": 1473917056, "answer_id": 39503654, "question_id": 39499959, "link": "https://stackoverflow.com/questions/39499959/terminating-a-subprocess-with-keyboardinterrupt/39503654#39503654", "title": "Terminating a subprocess with KeyboardInterrupt", "body": "<p>I figured out a way to do this, similar to Jean-Francois's answer with the loop but without the multiple threads. The key is to use Popen.poll() to determine if the subprocess has finished (will return None if still running). </p>\n\n<pre><code>import subprocess\nimport time\n\nbinary_path = '/path/to/binary'\nargs = 'arguments' # arbitrary\n\ncall_str = '{} {}'.format(binary_path, args)\n\nproc = subprocess.Popen(call_str)\n\ntry:\n    while proc.poll() is None:\n        time.sleep(0.1)\n\nexcept KeyboardInterrupt:\n    proc.terminate()\n    raise\n</code></pre>\n\n<p>I added an additional raise after KeyboardInterrupt so the Python program is also interrupted in addition to the subprocess. </p>\n\n<p>EDIT: Changed pass to time.sleep(0.1) as per eryksun's comment to reduce CPU consumption.</p>\n"}], "owner": {"reputation": 218, "user_id": 2847934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f958ce195c07067b1fb6df5ecdaded7?s=128&d=identicon&r=PG&f=1", "display_name": "limi44", "link": "https://stackoverflow.com/users/2847934/limi44"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4658, "favorite_count": 0, "accepted_answer_id": 39503654, "answer_count": 2, "score": 3, "last_activity_date": 1473919257, "creation_date": 1473888751, "last_edit_date": 1495541963, "question_id": 39499959, "link": "https://stackoverflow.com/questions/39499959/terminating-a-subprocess-with-keyboardinterrupt", "title": "Terminating a subprocess with KeyboardInterrupt", "body": "<p>I'm using Python to call a C++ program using the subprocess module. Since the program takes some time to run, I'd like to be able to terminate it using Ctrl+C. I've seen a few questions regarding this on StackOverflow but none of the solutions seem to work for me.</p>\n\n<p>What I would like is for the subprocess to be terminated on KeyboardInterrupt. This is the code that I have (similar to suggestions in other questions):</p>\n\n<pre><code>import subprocess\n\nbinary_path = '/path/to/binary'\nargs = 'arguments' # arbitrary\n\ncall_str = '{} {}'.format(binary_path, args)\n\nproc = subprocess.Popen(call_str)\n\ntry:\n    proc.wait()\nexcept KeyboardInterrupt:\n    proc.terminate()\n</code></pre>\n\n<p>However, if I run this, the code is hung up waiting for the process to end and never registers the KeyboardInterrupt. I have tried the following as well:</p>\n\n<pre><code>import subprocess\nimport time\n\nbinary_path = '/path/to/binary'\nargs = 'arguments' # arbitrary\n\ncall_str = '{} {}'.format(binary_path, args)\n\nproc = subprocess.Popen(call_str)\ntime.sleep(5)\nproc.terminate()\n</code></pre>\n\n<p>This code snippet works fine at terminating the program, so it's not the actual signal that's being sent to terminate that is the problem.</p>\n\n<p>How can I change the code so that the subprocess can be terminated on KeyboardInterrupt?</p>\n\n<p>I'm running Python 2.7 and Windows 7 64-bit. Thanks in advance!</p>\n\n<p>Some related questions that I tried:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/19807134/python-sub-process-ctrlc\">Python sub process Ctrl+C</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/33496416/kill-subprocess-call-after-keyboardinterrupt\">Kill subprocess.call after KeyboardInterrupt</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/1603658/kill-subprocess-when-python-process-is-killed\">kill subprocess when python process is killed?</a></p>\n"}, {"tags": ["python", "python-2.7", "unit-testing", "testing", "pytest"], "answers": [{"comments": [{"owner": {"reputation": 494, "user_id": 746453, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a7495886d3fee78a74e3f5a0904ceb64?s=128&d=identicon&r=PG", "display_name": "Jan Benes", "link": "https://stackoverflow.com/users/746453/jan-benes"}, "edited": false, "score": 0, "creation_date": 1510762857, "post_id": 39519231, "comment_id": 81575534, "body": "The docs Skylar has updated to reflect this - <a href=\"https://docs.pytest.org/en/latest/nose.html#unsupported-idioms-known-issues\" rel=\"nofollow noreferrer\">docs.pytest.org/en/latest/&hellip;</a>"}], "tags": [], "owner": {"reputation": 95, "user_id": 2626755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lmz68.jpg?s=128&g=1", "display_name": "Skylar", "link": "https://stackoverflow.com/users/2626755/skylar"}, "is_accepted": true, "score": 2, "last_activity_date": 1473968910, "last_edit_date": 1495541963, "creation_date": 1473968910, "answer_id": 39519231, "question_id": 39499937, "link": "https://stackoverflow.com/questions/39499937/is-there-a-standard-way-to-tell-py-test-to-run-against-specific-code/39519231#39519231", "title": "Is there a standard way to tell py.test to run against specific code?", "body": "<p>My first mistake was setting up my project using <code>python setup.py install</code> instead of <code>python setup.py develop</code>.  Pytest expects you to use the latter, which seems like good practice anyway.</p>\n\n<p>If it's necessary to run against local code when the same code is installed, there does seem to be a way to do it.  <a href=\"https://stackoverflow.com/a/34520971/2626755\">This SO post</a> mentions a \"hidden feature\" of pytest, where you can put a conftest.py file in your root directory to tell pytest to run using your local code.  Pytest seems to use the location of your overall configuration file to determine what it thinks your root directory is.  This file is pytest.ini in my case.</p>\n\n<p>As a curiosity, I believe that <code>python -m pytest</code> running using the local code where <code>py.test</code> did not was due to Python's default behavior of adding the directory that it's called in to sys.path.</p>\n"}], "owner": {"reputation": 95, "user_id": 2626755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lmz68.jpg?s=128&g=1", "display_name": "Skylar", "link": "https://stackoverflow.com/users/2626755/skylar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 648, "favorite_count": 0, "accepted_answer_id": 39519231, "answer_count": 1, "score": 1, "last_activity_date": 1473968910, "creation_date": 1473888639, "question_id": 39499937, "link": "https://stackoverflow.com/questions/39499937/is-there-a-standard-way-to-tell-py-test-to-run-against-specific-code", "title": "Is there a standard way to tell py.test to run against specific code?", "body": "<p>I'm trying to run a Python project's unit tests using py.test.  Until recently I've used nose and it ran the tests against my local source code instead of the installed package, but py.test seems to want to run against the installed package, meaning I have to run <code>python setup.py install</code> before every test run.</p>\n\n<p>The project is organized like so:</p>\n\n<pre><code>/project\n    /project  \n        __init__.py\n        project_file.py\n    /test\n        __init__.py\n        /test_project\n            test_project_file.py\n</code></pre>\n\n<p>The only way I've found to get py.test to run against the local code is to run <code>python -m pytest</code> in the top /project folder.  It's very strange, as running <code>py.test</code> in the same location runs against the installed code.  According to <a href=\"http://doc.pytest.org/en/latest/usage.html#cmdline\" rel=\"nofollow\">the docs</a> these commands ought to be equivalent, and --version returns the same info for both.</p>\n\n<p>Is there a standard way to tell py.test to run against specific code?  I haven't been able to find a clear answer in py.test's documentation.</p>\n"}, {"tags": ["python", "python-2.7", "enums", "celery", "celery-task"], "answers": [{"tags": [], "owner": {"reputation": 157, "user_id": 2860157, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000477471176/picture?type=large", "display_name": "Nick Kobishev", "link": "https://stackoverflow.com/users/2860157/nick-kobishev"}, "is_accepted": false, "score": 0, "last_activity_date": 1473891961, "last_edit_date": 1495542795, "creation_date": 1473891961, "answer_id": 39500575, "question_id": 39499893, "link": "https://stackoverflow.com/questions/39499893/celery-task-unable-to-import-importerror-of-a-module-from-inside-the-project/39500575#39500575", "title": "celery task unable to import ImportError of a module from inside the project", "body": "<p>Well it seems like some sort of work around but following the advice in this answer:\n<a href=\"https://stackoverflow.com/questions/4655526/how-to-accomplish-relative-import-in-python/4656228#4656228\">How to accomplish relative import in python</a></p>\n\n<p>I moved most of the project inside a \"main\" module containing all of them. and then i was able to:\ninstead of <code>from enums.MpStore import MpStore</code><br>\nI now use <code>from stuff.enums.MpStore import MpStore</code> \"stuff\" being the new module name.  </p>\n\n<p>I would love to hear of a better way though...</p>\n"}], "owner": {"reputation": 157, "user_id": 2860157, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000477471176/picture?type=large", "display_name": "Nick Kobishev", "link": "https://stackoverflow.com/users/2860157/nick-kobishev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 752, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1473891989, "creation_date": 1473888429, "last_edit_date": 1473891989, "question_id": 39499893, "link": "https://stackoverflow.com/questions/39499893/celery-task-unable-to-import-importerror-of-a-module-from-inside-the-project", "title": "celery task unable to import ImportError of a module from inside the project", "body": "<p>I would like to note that the following error only occurs when ran through a celery worker.\nwith the following command in the terminal:</p>\n\n<pre><code>celery -A MarketPlaceTasks worker --loglevel=info\n\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/dist-packages/celery/app/trace.py\", line 218, in trace_task\n    R = retval = fun(*args, **kwargs)\n  File \"/usr/lib/python2.7/dist-packages/celery/app/trace.py\", line 398, in __protected_call__\n    return self.run(*args, **kwargs)\n  File \"/home/nick/mpcrawler2/MarketPlaceTasks.py\", line 65, in get_item_data\n    logger, request, run_data, store_config, app_config = setup_task(payload)\n  File \"/home/nick/mpcrawler2/MarketPlaceTasks.py\", line 33, in setup_task\n    store_config = ConfigReader.read_store_config(request.Store)\n  File \"/home/nick/mpcrawler2/shared/ConfigReader.py\", line 22, in read_store_config\n    from singletons.StoreData import StoreData\n  File \"/home/nick/mpcrawler2/singletons/StoreData.py\", line 3, in &lt;module&gt;\n    from models.StoreConfig import StoreConfig\n  File \"/home/nick/mpcrawler2/models/StoreConfig.py\", line 3, in &lt;module&gt;\n    from enums.MpStores import MpStore\nImportError: No module named enums.MpStores\n</code></pre>\n\n<p>I have all my enums in a separate module.  The module looks like this, and is located inside the same directory as the project:</p>\n\n<p><a href=\"https://i.stack.imgur.com/VDANU.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VDANU.jpg\" alt=\"enum directory screenshot\"></a></p>\n\n<p>Whenever I run the project via pycharm or terminal everything seems to work as intended.</p>\n\n<p>The worker's starting point looks like this:</p>\n\n<pre><code>from celery import Celery\n\napp = Celery('tasks', broker='*some ampq address here*')\n</code></pre>\n\n<p>The <code>__init__.py</code> file is empty.  The enum files look like this:</p>\n\n<pre><code>from enum import Enum\n\n# noinspection SpellCheckingInspection\nclass MpStore(Enum):\n    somevalue = 1\n    someothervalue = 2\n    etc = 3\n</code></pre>\n\n<p>As I'm using Python 2.7 I'm using <a href=\"https://pypi.python.org/pypi/enum34\" rel=\"nofollow noreferrer\"><code>enum34</code></a> that was installed using pip.</p>\n\n<p>Please let me know if there's anything else I should provide in the question.</p>\n"}, {"tags": ["python", "python-3.x", "reentrancy"], "comments": [{"owner": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "edited": false, "score": 2, "creation_date": 1473888185, "post_id": 39499823, "comment_id": 66317237, "body": "Probably to save on attribute lookup"}, {"owner": {"reputation": 4719, "user_id": 2958070, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FtkjC.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/2958070/ben"}, "reply_to_user": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "edited": false, "score": 0, "creation_date": 1473888231, "post_id": 39499823, "comment_id": 66317257, "body": "There&#39;s a cost to attribute lookup?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1473888286, "post_id": 39499823, "comment_id": 66317277, "body": "python is interpreted. and the address must be calculated: object address + member offset. If you pre-compute the reference as a local variable, you don&#39;t have to do this. Nothing is free in this vile world."}, {"owner": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "edited": false, "score": 0, "creation_date": 1473888331, "post_id": 39499823, "comment_id": 66317290, "body": "@Ben yes, of course"}, {"owner": {"reputation": 4719, "user_id": 2958070, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FtkjC.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/2958070/ben"}, "edited": false, "score": 0, "creation_date": 1473888443, "post_id": 39499823, "comment_id": 66317337, "body": "I guess I&#39;m surprised that&#39;s not cached or something. I&#39;m googling, but is there any resources you could point me to?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1473888813, "post_id": 39499823, "comment_id": 66317499, "body": "@Jean-Fran&#231;oisFabre: It&#39;s not even as simple as &quot;object address + member offset&quot;. Instance attributes are stored in a dict, and lookup is a dict lookup."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1473888908, "post_id": 39499823, "comment_id": 66317532, "body": "@user2357112 that&#39;s even worse. It&#39;s slow enough with <code>in</code> on lists."}, {"owner": {"reputation": 10502, "user_id": 182689, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a529fce6fcd64d5d26df610c100a141e?s=128&d=identicon&r=PG", "display_name": "svens", "link": "https://stackoverflow.com/users/182689/svens"}, "edited": false, "score": 0, "creation_date": 1473890641, "post_id": 39499823, "comment_id": 66318169, "body": "I think an equally probable reason is to save some typing. I&#39;d probably fill the list first and only then assign it to <code>self</code> though."}], "answers": [{"tags": [], "owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "is_accepted": true, "score": 0, "last_activity_date": 1473890132, "creation_date": 1473890132, "answer_id": 39500256, "question_id": 39499823, "link": "https://stackoverflow.com/questions/39499823/why-declare-a-list-twice-in-init/39500256#39500256", "title": "Why declare a list twice in __init__?", "body": "<p>I'd call this a case of premature optimization; you don't save <em>that much</em> by eliminating the dot, especially for large input iterables; here's some timings:</p>\n\n<p>Eliminating the dot:</p>\n\n<pre><code>%timeit ListBasedSet(range(3))\nThe slowest run took 4.06 times longer than the fastest. This could mean that an intermediate result is being cached.\n100000 loops, best of 3: 2.05 \u00b5s per loop\n\n%timeit ListBasedSet(range(30))\n100000 loops, best of 3: 18.5 \u00b5s per loop\n\n%timeit ListBasedSet(range(3000))\n10 loops, best of 3: 119 ms per loop\n</code></pre>\n\n<p>While, with the dot (i.e replace <code>lst</code> with <code>self.elements</code>:</p>\n\n<pre><code>%timeit ListBasedSet(range(3))\nThe slowest run took 5.97 times longer than the fastest. This could mean that an intermediate result is being cached.\n100000 loops, best of 3: 2.48 \u00b5s per loop\n\n%timeit ListBasedSet(range(30))\n10000 loops, best of 3: 22.8 \u00b5s per loop\n\n%timeit ListBasedSet(range(3000))\n10 loops, best of 3: 118 ms per loop\n</code></pre>\n\n<p>As you can see, as we increase the size of the input iterable, the difference in time pretty much disappears, the appending and membership testing pretty much cover any gains. </p>\n"}], "owner": {"reputation": 4719, "user_id": 2958070, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FtkjC.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/2958070/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 39500256, "answer_count": 1, "score": 0, "last_activity_date": 1520185676, "creation_date": 1473888111, "last_edit_date": 1520185676, "question_id": 39499823, "link": "https://stackoverflow.com/questions/39499823/why-declare-a-list-twice-in-init", "title": "Why declare a list twice in __init__?", "body": "<p>I'm reading through the Python Docs, and, under <a href=\"https://docs.python.org/3/library/collections.abc.html#collections-abstract-base-classes\" rel=\"nofollow\">Section 8.4.1</a>,\nI found the following <code>__init__</code> definition (abbreviated):</p>\n\n<pre><code>class ListBasedSet(collections.abc.Set):\n    ''' Alternate set implementation favoring space over speed\n        and not requiring the set elements to be hashable. '''\n    def __init__(self, iterable):\n        self.elements = lst = []\n        for value in iterable:\n            if value not in lst:\n                lst.append(value)\n</code></pre>\n\n<p>The part I don't get is the <code>self.elements = lst = []</code> line. Why the double assignment?</p>\n\n<p>Adding some print statements:</p>\n\n<pre><code>def __init__(self, iterable):\n    self.elements = lst = []\n    print('elements id:', id(self.elements))\n    print('lst id:', id(lst))\n    for value in iterable:\n        if value not in lst:\n            lst.append(value)\n</code></pre>\n\n<p>Declaring one:</p>\n\n<pre><code>ListBasedSet(range(3))\nelements id: 4741984136\nlst id: 4741984136\nOut[36]: &lt;__main__.ListBasedSet at 0x11ab12fd0&gt;\n</code></pre>\n\n<p>As expected, they both point to the same PyObject.</p>\n\n<p>Is brevity the only reason to do something like this? If not, why? Something to do with reentrancy?</p>\n"}, {"tags": ["python", "pip", "ansible", "ansible-playbook", "ansible-tower"], "answers": [{"tags": [], "owner": {"reputation": 3862, "user_id": 2663059, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/6a354b616773a9f9359212dd14f20ecf?s=128&d=identicon&r=PG", "display_name": "pelican", "link": "https://stackoverflow.com/users/2663059/pelican"}, "is_accepted": false, "score": 0, "last_activity_date": 1474308898, "creation_date": 1474308898, "answer_id": 39579619, "question_id": 39499819, "link": "https://stackoverflow.com/questions/39499819/ansible-tower-cli-on-windows-10-tower-cli-is-not-recognized-as-an-internal-or/39579619#39579619", "title": "Ansible tower-cli on Windows 10 - tower-cli&#39; is not recognized as an internal or external command", "body": "<p>If you run the command python in your windows shell and get that error, 'python' is not recognized as an internal or external command, operable program or bathc file, then do this: </p>\n\n<p><em>Replace <strong>python</strong> with <strong>py</em></strong>, so type <code>py</code> in the command prompt and it'll work.</p>\n\n<pre><code>Again type \"py\" NOT \"python\" in your command prompt and it should work !\n</code></pre>\n"}], "owner": {"reputation": 3862, "user_id": 2663059, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/6a354b616773a9f9359212dd14f20ecf?s=128&d=identicon&r=PG", "display_name": "pelican", "link": "https://stackoverflow.com/users/2663059/pelican"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 704, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1474308898, "creation_date": 1473888102, "last_edit_date": 1474057508, "question_id": 39499819, "link": "https://stackoverflow.com/questions/39499819/ansible-tower-cli-on-windows-10-tower-cli-is-not-recognized-as-an-internal-or", "title": "Ansible tower-cli on Windows 10 - tower-cli&#39; is not recognized as an internal or external command", "body": "<p>From this link: <a href=\"https://github.com/ansible/tower-cli/\" rel=\"nofollow noreferrer\">https://github.com/ansible/tower-cli/</a>, you install tower-cli with pip install ansible-tower-cli but when you go to run a command like: <code>tower-cli config host www.myWebsite.com</code>, </p>\n\n<p>You get this error: <code>tower-cli' is not recognized as an internal or external command, 14-Sep-2016 15:41:49  operable program or batch file.</code></p>\n\n<p>I know that error means that <strong><em>I need to add the location of that executable to the windows PATH</em></strong> which I thought i did with:</p>\n\n<p><a href=\"https://i.stack.imgur.com/l1B6G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/l1B6G.png\" alt=\"enter image description here\"></a></p>\n\n<p>But still same error, any ideas?</p>\n"}, {"tags": ["python", "django", "models"], "answers": [{"comments": [{"owner": {"reputation": 1443, "user_id": 2075859, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/eyYZp.jpg?s=128&g=1", "display_name": "David J.", "link": "https://stackoverflow.com/users/2075859/david-j"}, "edited": false, "score": 0, "creation_date": 1473891073, "post_id": 39500348, "comment_id": 66318298, "body": "I am trying to instantiate an Offer with a UserProfile as maker.  I&#39;m doing it this way because the offer form includes an image field with dynamic url that requires the user&#39;s ID."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "reply_to_user": {"reputation": 1443, "user_id": 2075859, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/eyYZp.jpg?s=128&g=1", "display_name": "David J.", "link": "https://stackoverflow.com/users/2075859/david-j"}, "edited": false, "score": 0, "creation_date": 1473891200, "post_id": 39500348, "comment_id": 66318342, "body": "Fine, but a profile is not a field, don&#39;t try to set it as one."}, {"owner": {"reputation": 1443, "user_id": 2075859, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/eyYZp.jpg?s=128&g=1", "display_name": "David J.", "link": "https://stackoverflow.com/users/2075859/david-j"}, "edited": false, "score": 0, "creation_date": 1473891410, "post_id": 39500348, "comment_id": 66318409, "body": "I&#39;ll change that, but do you know what I can do about instantiating the object with a maker?"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "reply_to_user": {"reputation": 1443, "user_id": 2075859, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/eyYZp.jpg?s=128&g=1", "display_name": "David J.", "link": "https://stackoverflow.com/users/2075859/david-j"}, "edited": false, "score": 1, "creation_date": 1473891589, "post_id": 39500348, "comment_id": 66318455, "body": "Do it in the view. In fact it looks like you&#39;ve already got some code to do it there, you just need to fix the names."}], "tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": true, "score": 6, "last_activity_date": 1473890646, "creation_date": 1473890646, "answer_id": 39500348, "question_id": 39499798, "link": "https://stackoverflow.com/questions/39499798/django-attribute-error-object-has-no-attribute-get-bound-field/39500348#39500348", "title": "django attribute error : object has no attribute &#39;get_bound_field&#39;", "body": "<p>In your form you're getting a UserProfile object and then assigning it as a field. But it's not a field, it's a model object.</p>\n\n<p>I don't know what you're trying to do there, but don't assign that object to the fields dict.</p>\n"}, {"tags": [], "owner": {"reputation": 38, "user_id": 10039507, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-v_DRv21cazM/AAAAAAAAAAI/AAAAAAAAAB4/mD7M7CkMh98/photo.jpg?sz=128", "display_name": "Alireza", "link": "https://stackoverflow.com/users/10039507/alireza"}, "is_accepted": false, "score": 2, "last_activity_date": 1544285460, "creation_date": 1544285460, "answer_id": 53684374, "question_id": 39499798, "link": "https://stackoverflow.com/questions/39499798/django-attribute-error-object-has-no-attribute-get-bound-field/53684374#53684374", "title": "django attribute error : object has no attribute &#39;get_bound_field&#39;", "body": "<p>in models.py init function you should use .queryset after field like this:</p>\n\n<pre><code>def __init__(self, *args, **kwargs):\n    maker_id = kwargs.pop('maker_id')\n    super(OfferForm, self).__init__(*args, **kwargs)\n    maker = UserProfile.objects.get(id=maker_id)\n    self.fields['maker'].queryset = maker\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1148, "user_id": 4157431, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--7aZ_ES6FNg/AAAAAAAAAAI/AAAAAAAAB1s/sMWQABH-JQg/photo.jpg?sz=128", "display_name": "Rami Alloush", "link": "https://stackoverflow.com/users/4157431/rami-alloush"}, "is_accepted": false, "score": 0, "last_activity_date": 1601850391, "creation_date": 1601850391, "answer_id": 64200467, "question_id": 39499798, "link": "https://stackoverflow.com/questions/39499798/django-attribute-error-object-has-no-attribute-get-bound-field/64200467#64200467", "title": "django attribute error : object has no attribute &#39;get_bound_field&#39;", "body": "<p>If you are trying to set the <code>queryset</code> or (available options) for that field, then you can do the following</p>\n<pre><code>def __init__(self, *args, **kwargs):\n    maker_id = kwargs.pop('maker_id')\n    super(OfferForm, self).__init__(*args, **kwargs)\n    maker = UserProfile.objects.get(id=maker_id)\n    self.fields['maker'].queryset = maker\n</code></pre>\n<p>In may case, I wanted to set the <code>initial</code> or (default) value for that field. So, I had to pass an <code>object</code> not <code>queryset</code></p>\n<pre><code>def __init__(self, *args, **kwargs):\n    maker_id = kwargs.pop('maker_id')\n    super(OfferForm, self).__init__(*args, **kwargs)\n    maker = UserProfile.objects.get(id=maker_id)\n    self.fields['maker'].initial = maker.first()\n</code></pre>\n<p>You can actually do <code>both</code>! set the <code>queryset</code> AND an <code>initial</code> value</p>\n"}], "owner": {"reputation": 1443, "user_id": 2075859, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/eyYZp.jpg?s=128&g=1", "display_name": "David J.", "link": "https://stackoverflow.com/users/2075859/david-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11461, "favorite_count": 1, "accepted_answer_id": 39500348, "answer_count": 3, "score": 5, "last_activity_date": 1601850391, "creation_date": 1473888006, "question_id": 39499798, "link": "https://stackoverflow.com/questions/39499798/django-attribute-error-object-has-no-attribute-get-bound-field", "title": "django attribute error : object has no attribute &#39;get_bound_field&#39;", "body": "<p>Apparently a form being loaded on my template is requiring a field that isn't being passed to it. </p>\n\n<p>Can anyone tell me what is causing this error?</p>\n\n<p>Error occurs during template rendering</p>\n\n<pre><code>In template C:\\django\\projectname\\static\\templates\\link_list.html, error at line 114\n'UserProfile' object has no attribute 'get_bound_field'\n104     \n105           &lt;/p&gt;\n106     \n107         &lt;/form&gt;\n108           &lt;/div&gt;\n109           &lt;div id=\"make-offer\" style=\"display: none\"&gt;\n110     \n111           &lt;p&gt;Make an offer&lt;/p&gt;\n112           &lt;form class=\".formLayout\" name=\"offer-form\" action=\"\" method=\"post\" enctype=\"multipart/form-data\"&gt;\n113           {% csrf_token %}\n114           {{ form.as_table }}\n115           &lt;input type=\"submit\" class=\"data\" style=\"font-family: VT323; font-size: 50%\" value=\"Submit\" /&gt;\n116           &lt;/form&gt;\n117           &lt;/div&gt;     \n118           &lt;/div&gt;\n119         &lt;/div&gt;\n120       &lt;/div&gt;\n</code></pre>\n\n<p>This is served by the following view:</p>\n\n<pre><code>def link(request):\n    print(\"trying to authenticate...\")\n    if request.user.is_authenticated():\n        user_profile = UserProfile.objects.get(user=request.user)\n\n    else:\n        return render(request, 'login.html')\n\n    if request.method == \"POST\":\n        print(\"request was a post.\")\n        if request.is_ajax():\n            ...\n        else:        \n\n            if request.method == \"POST\":    \n                form = OfferForm(request.POST, request.FILES, maker_id=user_profile.id)\n                if form.is_valid():\n                    if request.POST.get('location'):                        \n                        offer = form.save()\n                        offer.save()\n                    offer.maker = maker\n                    offer.save()\n\n                else:\n                    print form.errors\n\n            return render(request, \"link_list.html\", {'form' : form} )\n\n    else:\n\n        form = OfferForm(maker_id=user_profile.id)\n        print(\"request wasn't ajax.\")\n        data = {'form': form}\n        return render(request, 'link_list.html', data)\n</code></pre>\n\n<p>Here are the relevant models and forms: </p>\n\n<pre><code>class OfferForm(forms.ModelForm):        \n\n    def __init__(self, *args, **kwargs):\n        maker_id = kwargs.pop('maker_id')\n        super(OfferForm, self).__init__(*args, **kwargs)\n        maker = UserProfile.objects.get(id=maker_id)\n        self.fields['maker'] = maker\n\n\n    class Meta:\n        model = Offer\n        fields = [\n            \"name\", \n            \"value\",\n            \"description\",\n            \"tags\",\n            \"location\",\n            \"service\",\n            \"icon\",\n        ]\n        widgets = {\n            'name': forms.TextInput(\n                attrs={'id': 'name', 'class': '.formLayout', 'style': 'font-family: VT323; font-size: 60%', 'required': True, 'placeholder': 'name'}\n            ),\n            'value': forms.TextInput(\n                attrs={'id': 'value', 'class': '.formLayout', 'style': 'font-family: VT323; font-size: 60%', 'required': True, 'placeholder': 'value'}\n            ),\n            'description': forms.TextInput(\n                attrs={'id': 'description', 'class': '.formLayout', 'style': 'font-family: VT323; font-size: 60%', 'required': True, 'placeholder': 'description'}\n            ),\n            'tags': forms.TextInput(\n                attrs={'id': 'tags', 'class': '.formLayout', 'style': 'font-family: VT323; font-size: 60%', 'required': True, 'placeholder': 'tags'}\n            ),   \n            'location': forms.TextInput(\n                attrs={'id': 'location', 'class': 'geo', 'data-geo': 'location', 'required': False, 'placeholder': 'leave blank to use your location'}\n            ),\n            'service': forms.CheckboxInput(\n                attrs={'id': 'service', 'class': '.formLayout', 'required': False}\n            ),\n}\n</code></pre>\n\n<p>models.py</p>\n\n<pre><code>class UserProfile(models.Model):\n\n    user = models.OneToOneField(User)    \n    website = models.URLField(blank=True, null=True)\n    location = models.CharField(max_length=200, null=True)\n    longitude = models.FloatField(null=True)\n    latitude = models.FloatField(null=True)\n    credit = models.FloatField(default=0, null=True)\n    picture = models.ImageField(upload_to=upload_location, blank=True)\n\n    def __unicode__(self):\n        return self.user.username\n\nclass Offer(models.Model):\n\n    name = models.CharField(max_length=120)\n    description = models.CharField(max_length=120)\n    value = models.FloatField(default=0.0) \n    tags = models.CharField(max_length=120, null=True)\n    maker = models.ForeignKey(UserProfile, null=True)\n\n\n    def __unicode__(self):\n        return self.name   \n</code></pre>\n"}, {"tags": ["python", "dll", "anaconda", "windows-2003-webserver"], "comments": [{"owner": {"reputation": 3599, "user_id": 2487517, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cRCpa.jpg?s=128&g=1", "display_name": "Tibrogargan", "link": "https://stackoverflow.com/users/2487517/tibrogargan"}, "edited": false, "score": 0, "creation_date": 1473894139, "post_id": 39499756, "comment_id": 66319153, "body": "Pictures of text are not helpful"}], "answers": [{"comments": [{"owner": {"reputation": 2447, "user_id": 3006366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVcKL.png?s=128&g=1", "display_name": "ode2k", "link": "https://stackoverflow.com/users/3006366/ode2k"}, "reply_to_user": {"reputation": 361, "user_id": 6074722, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/EPZeh.jpg?s=128&g=1", "display_name": "ThatRiddimGuy", "link": "https://stackoverflow.com/users/6074722/thatriddimguy"}, "edited": false, "score": 0, "creation_date": 1473888818, "post_id": 39499894, "comment_id": 66317501, "body": "If the missing .dll files are what is causing the issue, then it should fix the problem."}, {"owner": {"reputation": 361, "user_id": 6074722, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/EPZeh.jpg?s=128&g=1", "display_name": "ThatRiddimGuy", "link": "https://stackoverflow.com/users/6074722/thatriddimguy"}, "edited": false, "score": 0, "creation_date": 1473888990, "post_id": 39499894, "comment_id": 66317569, "body": "Thanks! Just one more question, there&#39;s three different types namely \t vcredist_x86.EXE, vcredist_IA64.EXE, and vcredist_x64.EXE. Which one should I install?"}, {"owner": {"reputation": 2447, "user_id": 3006366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVcKL.png?s=128&g=1", "display_name": "ode2k", "link": "https://stackoverflow.com/users/3006366/ode2k"}, "reply_to_user": {"reputation": 361, "user_id": 6074722, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/EPZeh.jpg?s=128&g=1", "display_name": "ThatRiddimGuy", "link": "https://stackoverflow.com/users/6074722/thatriddimguy"}, "edited": false, "score": 0, "creation_date": 1473889403, "post_id": 39499894, "comment_id": 66317713, "body": "You will need to use <code>vcredist_x86.EXE</code> since you are on a 32-bit Windows installation."}], "tags": [], "owner": {"reputation": 2447, "user_id": 3006366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVcKL.png?s=128&g=1", "display_name": "ode2k", "link": "https://stackoverflow.com/users/3006366/ode2k"}, "is_accepted": false, "score": 0, "last_activity_date": 1473888430, "last_edit_date": 1495541300, "creation_date": 1473888430, "answer_id": 39499894, "question_id": 39499756, "link": "https://stackoverflow.com/questions/39499756/missing-dll-files-anaconda-4-1-1-32-bit/39499894#39499894", "title": "Missing .DLL files Anaconda 4.1.1 32-bit", "body": "<p>Those .dll files appear to have been removed by IE8. You should be able to restore them by installing Visual C++ 2005 SP1</p>\n\n<pre><code>https://www.microsoft.com/en-au/download/details.aspx?id=26347\n</code></pre>\n\n<p>Attributed from:</p>\n\n<p><a href=\"https://stackoverflow.com/a/23484851/3006366\">https://stackoverflow.com/a/23484851/3006366</a></p>\n"}], "owner": {"reputation": 361, "user_id": 6074722, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/EPZeh.jpg?s=128&g=1", "display_name": "ThatRiddimGuy", "link": "https://stackoverflow.com/users/6074722/thatriddimguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 218, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473943484, "creation_date": 1473887805, "last_edit_date": 1473943484, "question_id": 39499756, "link": "https://stackoverflow.com/questions/39499756/missing-dll-files-anaconda-4-1-1-32-bit", "title": "Missing .DLL files Anaconda 4.1.1 32-bit", "body": "<p>I've installed <strong>Anaconda 4.1.1 32-bit</strong> on our <strong>Windows 2003 Server</strong>. </p>\n\n<p>When I try to run a program through the command prompt it gives me the following error message:</p>\n\n<pre><code>..\\python.exe is not a valid Win32 application\n</code></pre>\n\n<p>After searching around for a bit, I downloaded dependency walker to take a look at what is missing and it looks like <strong>wer.dll</strong> and <strong>ieshims.dll</strong> have a problem opening. </p>\n\n<p>I can't make heads nor tails of this. </p>\n"}, {"tags": ["python", "shell", "ipython"], "answers": [{"comments": [{"owner": {"reputation": 6542, "user_id": 559935, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9200c133c210ad51e8005277e932061a?s=128&d=identicon&r=PG", "display_name": "Bruno Rocha - rochacbruno", "link": "https://stackoverflow.com/users/559935/bruno-rocha-rochacbruno"}, "edited": false, "score": 0, "creation_date": 1473911812, "post_id": 39499913, "comment_id": 66323025, "body": "The method of registering an extension works, but I found that shutdown_hook is deprecated, I am goin to put the solution as anwer"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 6542, "user_id": 559935, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9200c133c210ad51e8005277e932061a?s=128&d=identicon&r=PG", "display_name": "Bruno Rocha - rochacbruno", "link": "https://stackoverflow.com/users/559935/bruno-rocha-rochacbruno"}, "edited": false, "score": 0, "creation_date": 1473915406, "post_id": 39499913, "comment_id": 66323912, "body": "@rochacbruno: Huh. That wasn&#39;t in the documentation I found, but Google suggests you&#39;re right. I figured shutdown_hook was for when you want to do something when the IPython instance is shutting down, but the Python interpreter itself might still remain active."}, {"owner": {"reputation": 4422, "user_id": 446140, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/386186a317b61bfc2caa5e7f289c5418?s=128&d=identicon&r=PG", "display_name": "reox", "link": "https://stackoverflow.com/users/446140/reox"}, "edited": false, "score": 0, "creation_date": 1549959068, "post_id": 39499913, "comment_id": 96082049, "body": "this seems to be deprecated: <code>UserWarning: Hook shutdown_hook is deprecated. Use the atexit module instead.</code>"}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1473888542, "creation_date": 1473888542, "answer_id": 39499913, "question_id": 39499748, "link": "https://stackoverflow.com/questions/39499748/override-ipython-exit-function-or-add-hooks-in-to-it/39499913#39499913", "title": "Override ipython exit function - or add hooks in to it", "body": "<p>Googling <a href=\"https://www.google.com/search?q=ipython%20exit%20hook\" rel=\"nofollow\">IPython exit hook</a> turns up <a href=\"http://ipython.readthedocs.io/en/stable/api/generated/IPython.core.hooks.html?highlight=core.hooks#module-IPython.core.hooks\" rel=\"nofollow\"><code>IPython.core.hooks</code></a>. From that documentation, it looks like you can define an exit hook in an <a href=\"https://ipython.org/ipython-doc/2/config/extensions/index.html\" rel=\"nofollow\">IPython extension</a> and register it with the IPython instance's <code>set_hook</code> method:</p>\n\n<pre><code># whateveryoucallyourextension.py\n\nimport IPython.core.error\n\ndef shutdown_hook(ipython):\n    do_whatever()\n    raise IPython.core.error.TryNext\n\ndef load_ipython_extension(ipython)\n    ipython.set_hook('shutdown_hook', shutdown_hook)\n</code></pre>\n\n<p>You'll have to add the extension to your <code>c.InteractiveShellApp.extensions</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 6542, "user_id": 559935, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9200c133c210ad51e8005277e932061a?s=128&d=identicon&r=PG", "display_name": "Bruno Rocha - rochacbruno", "link": "https://stackoverflow.com/users/559935/bruno-rocha-rochacbruno"}, "is_accepted": true, "score": 5, "last_activity_date": 1473911917, "creation_date": 1473911917, "answer_id": 39502890, "question_id": 39499748, "link": "https://stackoverflow.com/questions/39499748/override-ipython-exit-function-or-add-hooks-in-to-it/39502890#39502890", "title": "Override ipython exit function - or add hooks in to it", "body": "<p>First thanks to @user2357112, I learned how to create an extension and register a hook, but I figured out that <code>shutdown_hook</code>is deprecated.</p>\n\n<p>The right way is simply.</p>\n\n<pre><code>import atexit\n\ndef teardown_my_shell():\n    # things I want to happen when iPython exits\n\natexit.register(teardown_my_shell)\n</code></pre>\n"}], "owner": {"reputation": 6542, "user_id": 559935, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9200c133c210ad51e8005277e932061a?s=128&d=identicon&r=PG", "display_name": "Bruno Rocha - rochacbruno", "link": "https://stackoverflow.com/users/559935/bruno-rocha-rochacbruno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 956, "favorite_count": 0, "accepted_answer_id": 39502890, "answer_count": 2, "score": 4, "last_activity_date": 1473911917, "creation_date": 1473887763, "question_id": 39499748, "link": "https://stackoverflow.com/questions/39499748/override-ipython-exit-function-or-add-hooks-in-to-it", "title": "Override ipython exit function - or add hooks in to it", "body": "<p>In my project <a href=\"http://github.com/rochacbruno/manage\" rel=\"nofollow\">manage</a>, I am embedding iPython with:</p>\n\n<pre><code>from IPython import start_ipython\nfrom traitlets.config import Config\nc = Config()\nc.TerminalInteractiveShell.banner2 = \"Welcome to my shell\"\nc.InteractiveShellApp.extensions = ['autoreload']\nc.InteractiveShellApp.exec_lines = ['%autoreload 2']\nstart_ipython(argv=[], user_ns={}, config=c)\n</code></pre>\n\n<p>It works well and opens my iPython console, but to leave ipython I can just type <code>exit</code> or <code>exit()</code> or press <code>ctrl+D</code>.</p>\n\n<p>What I want to do is to add an <code>exit hook</code> or replace that <code>exit</code> command with something else.</p>\n\n<p>Lets say I have a function.</p>\n\n<pre><code>def teardown_my_shell():\n    # things I want to happen when iPython exits\n</code></pre>\n\n<p>How do I register that function to be executed when I <code>exit</code> or even how to make <code>exit</code> to execute that function?</p>\n\n<p>NOTE: I tried to pass <code>user_ns={'exit': teardown_my_shell}</code> and doesn't work.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "html"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1473887571, "post_id": 39499693, "comment_id": 66317016, "body": "<code>page = open(os.path.join(root,f))</code>"}, {"owner": {"reputation": 1, "user_id": 6828048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5f0d4d3144c8660254dd58fdea5bd44?s=128&d=identicon&r=PG&f=1", "display_name": "\u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u0418\u0432\u0430\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/6828048/%d0%94%d0%bc%d0%b8%d1%82%d1%80%d0%b8%d0%b9-%d0%98%d0%b2%d0%b0%d0%bd%d0%be%d0%b2"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1473887819, "post_id": 39499693, "comment_id": 66317107, "body": "@Jean-Fran&#231;oisFabre but how can I get content of this html file? (I need html code)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1473888141, "post_id": 39499693, "comment_id": 66317218, "body": "<code>page = open(os.path.join(root,f)); contents = page.read()</code>"}, {"owner": {"reputation": 1, "user_id": 6828048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5f0d4d3144c8660254dd58fdea5bd44?s=128&d=identicon&r=PG&f=1", "display_name": "\u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u0418\u0432\u0430\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/6828048/%d0%94%d0%bc%d0%b8%d1%82%d1%80%d0%b8%d0%b9-%d0%98%d0%b2%d0%b0%d0%bd%d0%be%d0%b2"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1473888479, "post_id": 39499693, "comment_id": 66317350, "body": "@Jean-Fran&#231;oisFabre thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1473887664, "post_id": 39499713, "comment_id": 66317050, "body": "<code>indir + f</code> is bad even if it works here. Use <code>os.path.join</code> instead"}, {"owner": {"reputation": 1642, "user_id": 1776131, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3720f50816f0c58735cfbb328fbaab3d?s=128&d=identicon&r=PG", "display_name": "Matt Olan", "link": "https://stackoverflow.com/users/1776131/matt-olan"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1473887685, "post_id": 39499713, "comment_id": 66317059, "body": "Fixed. Thanks for catching that!"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1473887746, "post_id": 39499713, "comment_id": 66317086, "body": "but the question shows no research effort: a simple print would have been enough to see that the file did not exist in the current directory And you should use <code>root</code> instead of <code>indir</code>."}], "tags": [], "owner": {"reputation": 1642, "user_id": 1776131, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3720f50816f0c58735cfbb328fbaab3d?s=128&d=identicon&r=PG", "display_name": "Matt Olan", "link": "https://stackoverflow.com/users/1776131/matt-olan"}, "is_accepted": false, "score": 0, "last_activity_date": 1473887668, "last_edit_date": 1473887668, "creation_date": 1473887555, "answer_id": 39499713, "question_id": 39499693, "link": "https://stackoverflow.com/questions/39499693/python-how-to-get-text-from-html-file/39499713#39499713", "title": "Python: how to get text from html file", "body": "<p>You need to prepend the path to the file.</p>\n\n<pre><code>import os\nindir = 'html/'\nfor root, dirs, filenames in os.walk(indir):\n    for f in filenames:\n        page = open(os.path.join(indir ,f)) # &lt;-- note the added path\n</code></pre>\n\n<p>Without it, you are trying to open a file named <code>0out.html</code> which is a peer to your <code>indir</code>. When you prepend the path, you indicate that it is a child.</p>\n"}], "owner": {"reputation": 1, "user_id": 6828048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5f0d4d3144c8660254dd58fdea5bd44?s=128&d=identicon&r=PG&f=1", "display_name": "\u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u0418\u0432\u0430\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/6828048/%d0%94%d0%bc%d0%b8%d1%82%d1%80%d0%b8%d0%b9-%d0%98%d0%b2%d0%b0%d0%bd%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1473887668, "creation_date": 1473887461, "question_id": 39499693, "link": "https://stackoverflow.com/questions/39499693/python-how-to-get-text-from-html-file", "title": "Python: how to get text from html file", "body": "<p>I have a folder with some <code>html-file</code> with</p>\n\n<pre><code>import os\nindir = 'html/'\nfor root, dirs, filenames in os.walk(indir):\n    for f in filenames:\n        page = open(f)\n</code></pre>\n\n<p>But it returns me <code>IOError: [Errno 2] No such file or directory: '0out.html'.</code></p>\n\n<p>But there are files <code>0out.html, 1out.html, 2out.html</code>.\nI also try <code>codecs</code> but it return this error too.\nWhere is an error there?</p>\n"}, {"tags": ["python", "cron", "pycharm"], "comments": [{"owner": {"reputation": 1642, "user_id": 1776131, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3720f50816f0c58735cfbb328fbaab3d?s=128&d=identicon&r=PG", "display_name": "Matt Olan", "link": "https://stackoverflow.com/users/1776131/matt-olan"}, "edited": false, "score": 1, "creation_date": 1473887187, "post_id": 39499599, "comment_id": 66316850, "body": "No need to compile, all you need is a compatible version of Python on the target machine. After that it is as simple as copying the .py file over and running it."}, {"owner": {"reputation": 109, "user_id": 4564050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ffc30316a079c38b1ba6901e560f4316?s=128&d=identicon&r=PG&f=1", "display_name": "jh44tx", "link": "https://stackoverflow.com/users/4564050/jh44tx"}, "edited": false, "score": 0, "creation_date": 1473887206, "post_id": 39499599, "comment_id": 66316862, "body": "This may help you <a href=\"http://stackoverflow.com/questions/11409416/moving-a-python-script-to-another-computer\" title=\"moving a python script to another computer\">stackoverflow.com/questions/11409416/&hellip;</a>"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1473887624, "post_id": 39499599, "comment_id": 66317032, "body": "It&#39;s possible to package interpreter, script &amp; deps into a single standalone executable even on Linux, but <b>you really don&#39;t want to</b>. This will make your program much, much slower to start up than it would have been if you&#39;d just done things the conventional way -- that is, by copying the Python source (perhaps packaged as a Python egg or similar), installing an interpreter and any necessary library dependencies, and then using that interpreter to run the file. [The startup overhead might be tolerable on some larger machines, but on a Pi it&#39;ll be much, much, <b>much</b> too slow]."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1473887848, "post_id": 39499599, "comment_id": 66317120, "body": "...that&#39;s because before that single executable will actually run, it needs to <i>unpack</i> the interpreter and everything else into separate files (typically in a temporary directory), so you&#39;re gaining no runtime speed advantage (code still being interpreted!), but eating a big runtime speed disadvantage (need to unpack everything at startup!)"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 6826966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0006b755802b226ce0ab8dbfa55632?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Dipp&#233;", "link": "https://stackoverflow.com/users/6826966/tom-dipp%c3%a9"}, "edited": false, "score": 0, "creation_date": 1473887516, "post_id": 39499638, "comment_id": 66316982, "body": "Do I not need to install the external libraries I&#39;m using? I do &#39;import requests&#39; etc and so the raspberry pi would need to know how to find this."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 37, "user_id": 6826966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0006b755802b226ce0ab8dbfa55632?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Dipp&#233;", "link": "https://stackoverflow.com/users/6826966/tom-dipp%c3%a9"}, "edited": false, "score": 0, "creation_date": 1473887962, "post_id": 39499638, "comment_id": 66317158, "body": "@TomDipp&#233;, yes, you need to install them, but you&#39;re running Debian; it has them (well, definitely <code>requests</code>) packaged."}, {"owner": {"reputation": 375, "user_id": 2571149, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BtmxW.jpg?s=128&g=1", "display_name": "Steven Walton", "link": "https://stackoverflow.com/users/2571149/steven-walton"}, "reply_to_user": {"reputation": 37, "user_id": 6826966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0006b755802b226ce0ab8dbfa55632?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Dipp&#233;", "link": "https://stackoverflow.com/users/6826966/tom-dipp%c3%a9"}, "edited": false, "score": 0, "creation_date": 1473888931, "post_id": 39499638, "comment_id": 66317539, "body": "@TomDipp&#233; if you are unsure about packages that are included you can always look in your python path. But Charles is correct in that most of the libraries will be there. The only things that might not be are extra libraries that you installed later, ie not default python libraries like numpy or scipy. Then use pip to install, apt, or something like anaconda."}], "tags": [], "owner": {"reputation": 375, "user_id": 2571149, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BtmxW.jpg?s=128&g=1", "display_name": "Steven Walton", "link": "https://stackoverflow.com/users/2571149/steven-walton"}, "is_accepted": false, "score": 0, "last_activity_date": 1473887186, "creation_date": 1473887186, "answer_id": 39499638, "question_id": 39499599, "link": "https://stackoverflow.com/questions/39499599/compiling-python-to-run-on-another-machine/39499638#39499638", "title": "&quot;Compiling&quot; Python to run on another machine", "body": "<p>Python does not need to compile as it is an interpretive language. You will be fine running it on another machine as long as you aren't making system calls. System calls will only become a problem if you are trying to do things like use windows commands on a linux machine.</p>\n\n<p>Just copy those two files over to the pi and run like normal. Or from the terminal</p>\n\n<pre><code>python program.py\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1473887439, "post_id": 39499644, "comment_id": 66316954, "body": "Not for a Raspberry Pi -- those don&#39;t run .exe files, and you <i>really</i> don&#39;t want the startup-time overhead of a PyInstaller unpack anyhow."}, {"owner": {"reputation": 37, "user_id": 6826966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0006b755802b226ce0ab8dbfa55632?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Dipp&#233;", "link": "https://stackoverflow.com/users/6826966/tom-dipp%c3%a9"}, "edited": false, "score": 0, "creation_date": 1473887541, "post_id": 39499644, "comment_id": 66316990, "body": "RaspPi is running Raspbian (based on Debian) and so can&#39;t run as an exe"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 37, "user_id": 6826966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0006b755802b226ce0ab8dbfa55632?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Dipp&#233;", "link": "https://stackoverflow.com/users/6826966/tom-dipp%c3%a9"}, "edited": false, "score": 0, "creation_date": 1473888050, "post_id": 39499644, "comment_id": 66317195, "body": "@TomDipp&#233;, ...PyInstaller is not actually Windows-only -- it can create Linux executables as well -- but those Linux executables will be painfully slow to run (well, to start running) on a Pi."}], "tags": [], "owner": {"reputation": 105, "user_id": 1955939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4794c24078fe35611f90977396e5707d?s=128&d=identicon&r=PG", "display_name": "deedle", "link": "https://stackoverflow.com/users/1955939/deedle"}, "is_accepted": false, "score": 0, "last_activity_date": 1473887211, "creation_date": 1473887211, "answer_id": 39499644, "question_id": 39499599, "link": "https://stackoverflow.com/questions/39499599/compiling-python-to-run-on-another-machine/39499644#39499644", "title": "&quot;Compiling&quot; Python to run on another machine", "body": "<p>Use PyInstaller. In the terminal, to create a stand alone exe just use a command like this:</p>\n\n<pre><code>pyinstaller -F myscript.py\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 0, "last_activity_date": 1473887255, "last_edit_date": 1495535354, "creation_date": 1473887255, "answer_id": 39499656, "question_id": 39499599, "link": "https://stackoverflow.com/questions/39499599/compiling-python-to-run-on-another-machine/39499656#39499656", "title": "&quot;Compiling&quot; Python to run on another machine", "body": "<p>You can \"compile\" python files to <code>.pyc</code> but you would still need the python interpreter on the RaspPi to run them.</p>\n\n<p>On a PC that does not have Python, you can create a standalone executable using <code>py2exe</code>, but the executable must then run on Windows.</p>\n\n<p>You have to install a python interpreter on your raspberry Pi, or create an executable with <code>py2exe</code> which targets raspberry Pi (if py2exe exists on that platform), that would be on another raspberry Pi :)</p>\n\n<p>Another alternative would be <code>Cython</code>, but with external libraries as complex as the ones you want to use that would be a really difficult route.</p>\n\n<p><a href=\"https://www.raspberrypi.org/documentation/usage/python\" rel=\"nofollow noreferrer\">Python on Raspberry Pi</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/304883/what-do-i-use-on-linux-to-make-a-python-program-executable\">Creating python exes on Linux</a></p>\n"}, {"tags": [], "owner": {"reputation": 3718, "user_id": 45139, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6d3137815389177999243690abf9bae0?s=128&d=identicon&r=PG", "display_name": "LoveMeSomeCode", "link": "https://stackoverflow.com/users/45139/lovemesomecode"}, "is_accepted": false, "score": 0, "last_activity_date": 1473887419, "creation_date": 1473887419, "answer_id": 39499690, "question_id": 39499599, "link": "https://stackoverflow.com/questions/39499599/compiling-python-to-run-on-another-machine/39499690#39499690", "title": "&quot;Compiling&quot; Python to run on another machine", "body": "<p>As the other answers have said, you can just run your code on the Pi, because Python code is interpreted and not complied.</p>\n\n<p>That being said, you will need to install any python packages, like the ImgurClient beforehand. If you did this with PyCharm on you PC, you will likely have to use <a href=\"http://www.pythonforbeginners.com/basics/python-pip-usage\" rel=\"nofollow\">pip</a> on the Pi.</p>\n"}, {"tags": [], "owner": {"reputation": 106, "user_id": 6823684, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iU9uE5oaA1I/AAAAAAAAAAI/AAAAAAAAS6s/uM0mUm-0ltI/photo.jpg?sz=128", "display_name": "Renato J. F.", "link": "https://stackoverflow.com/users/6823684/renato-j-f"}, "is_accepted": false, "score": 0, "last_activity_date": 1473888002, "last_edit_date": 1473888002, "creation_date": 1473887687, "answer_id": 39499735, "question_id": 39499599, "link": "https://stackoverflow.com/questions/39499599/compiling-python-to-run-on-another-machine/39499735#39499735", "title": "&quot;Compiling&quot; Python to run on another machine", "body": "<p>I don't know if you are gonna be able to run the python script in your other environment, specially if the script uses external libraries (.whl) that you normally install with pip.</p>\n\n<p>A good option to run the script on a clean environment is to use virtualenv:</p>\n\n<p><a href=\"https://virtualenv.pypa.io/en/stable/\" rel=\"nofollow\">https://virtualenv.pypa.io/en/stable/</a></p>\n\n<p>\"It creates an environment that has its own installation directories, that doesn\u2019t share libraries with other virtualenv environments (and optionally doesn\u2019t access the globally installed libraries either)\"</p>\n\n<p>And then install only the necessary librarys to run your script. If you export this new environment, you will probably be able to run your script without any problems.</p>\n"}, {"comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1473887896, "post_id": 39499743, "comment_id": 66317134, "body": "Is <code>requests</code> already packaged, or should that be added here as well?"}, {"owner": {"reputation": 2447, "user_id": 3006366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVcKL.png?s=128&g=1", "display_name": "ode2k", "link": "https://stackoverflow.com/users/3006366/ode2k"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1473887960, "post_id": 39499743, "comment_id": 66317156, "body": "<code>requests</code> is installed as part of the <code>pip</code> install"}, {"owner": {"reputation": 37, "user_id": 6826966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0006b755802b226ce0ab8dbfa55632?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Dipp&#233;", "link": "https://stackoverflow.com/users/6826966/tom-dipp%c3%a9"}, "edited": false, "score": 0, "creation_date": 1473890575, "post_id": 39499743, "comment_id": 66318144, "body": "I&#39;m having trouble with the <code>pip install imgurpython</code> command. I&#39;m getting a &quot;ImportError: cannoy import name IncompleteRead&quot; error. Do you know what might be causing this? Thanks"}], "tags": [], "owner": {"reputation": 2447, "user_id": 3006366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVcKL.png?s=128&g=1", "display_name": "ode2k", "link": "https://stackoverflow.com/users/3006366/ode2k"}, "is_accepted": true, "score": 1, "last_activity_date": 1473887931, "last_edit_date": 1473887931, "creation_date": 1473887713, "answer_id": 39499743, "question_id": 39499599, "link": "https://stackoverflow.com/questions/39499599/compiling-python-to-run-on-another-machine/39499743#39499743", "title": "&quot;Compiling&quot; Python to run on another machine", "body": "<p>If you have Python installed on your Raspberry Pi, then from the shell, you just need to run:</p>\n\n<pre><code># This installs pip (Python installer) as well as the requests library\nsudo apt-get install python-pip\n</code></pre>\n\n<p>Once that is installed, run:</p>\n\n<pre><code># To install the ImgurClient\npip install imgurpython\n</code></pre>\n\n<p>Then you can just run your script at the shell by typing:</p>\n\n<pre><code>python your_script_name.py\n</code></pre>\n\n<hr>\n\n<p>If you do not already have Python installed, just run the following command to install it before the others:</p>\n\n<pre><code>sudo apt-get install python\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 6826966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0006b755802b226ce0ab8dbfa55632?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Dipp&#233;", "link": "https://stackoverflow.com/users/6826966/tom-dipp%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1718, "favorite_count": 0, "accepted_answer_id": 39499743, "answer_count": 6, "score": 0, "last_activity_date": 1473888002, "creation_date": 1473886970, "question_id": 39499599, "link": "https://stackoverflow.com/questions/39499599/compiling-python-to-run-on-another-machine", "title": "&quot;Compiling&quot; Python to run on another machine", "body": "<p>I have created a simple-medium complexity script written in Python using Pycharm on my laptop and I wish to run this on my Raspberry Pi using Crontab. All of my past programming experience has been with C++ and C# in Windows and so I would normally just do a build of the project and it all gets compiled and linked into a single executable file.</p>\n\n<p>For Python how do you \"compile\" the script so that it can be run on another PC? I use some external libraries (requests and ImgurClient) which I had to install using the Pycharm app. I guess I'm correct in thinking that these need to be taken across to the RaspPi too? My script is in two files and so do I need to copy both of these files across? Is there a way to build them into a single file to use easily?</p>\n\n<p>This is my first script which I've written just from my knowledge of other languages and a bit of Googling. Just don't know how to proceed now that I have the actual script.</p>\n"}, {"tags": ["python", "seaborn", "swarmplot"], "answers": [{"tags": [], "owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "is_accepted": false, "score": 3, "last_activity_date": 1473893085, "creation_date": 1473893085, "answer_id": 39500752, "question_id": 39499576, "link": "https://stackoverflow.com/questions/39499576/making-swarmplot-points-bigger/39500752#39500752", "title": "Making swarmplot points bigger", "body": "<p>From the swarmplot docstring:</p>\n\n<pre><code>Signature: seaborn.swarmplot(x=None, y=None, hue=None, data=None,\norder=None, hue_order=None, split=False, orient=None, color=None, \npalette=None, size=5, edgecolor='gray', linewidth=0, ax=None,\n**kwargs)\nDocstring: Draw a categorical scatterplot with non-overlapping points.     \n[snip]\n\n\nParameters\n---------- \nx, y, hue : names of variables in ``data`` or vector data, optional\n    Inputs for plotting long-form data. See examples for interpretation. \ndata : DataFrame, array, or list of arrays, optional\n    Dataset for plotting. If ``x`` and ``y`` are absent, this is\n    interpreted as wide-form. Otherwise it is expected to be long-form. [snip]\n</code></pre>\n\n<p>And then:</p>\n\n<pre><code>size : float, optional\n    Diameter of the markers, in points. (Although ``plt.scatter`` is used\n    to draw the points, the ``size`` argument here takes a \"normal\"\n    markersize and not size^2 like ``plt.scatter``.\n</code></pre>\n"}], "owner": {"reputation": 317, "user_id": 5826447, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/28620e7cb9ee3dd0c7aca007e1815250?s=128&d=identicon&r=PG&f=1", "display_name": "user5826447", "link": "https://stackoverflow.com/users/5826447/user5826447"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1770, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1595263149, "creation_date": 1473886836, "last_edit_date": 1595263149, "question_id": 39499576, "link": "https://stackoverflow.com/questions/39499576/making-swarmplot-points-bigger", "title": "Making swarmplot points bigger", "body": "<p>I would like to make the data points on my swarmplot larger. The code I have is:</p>\n<pre><code>sns.swarmplot(x=&quot;Heart&quot;, y=&quot;FirstPersonPronouns&quot;, hue=&quot;Speech&quot;, data=df)\nsns.set_context(&quot;notebook&quot;, font_scale=1.8)\n</code></pre>\n<p>I have tried <code>scatter_kws</code> but get:</p>\n<pre><code>Attribute error: unknown property scatter_kws.\n</code></pre>\n"}, {"tags": ["python", "xlsxwriter"], "answers": [{"comments": [{"owner": {"reputation": 899, "user_id": 2084734, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1c67bd40b2f0a99ae06b0d5b0eb52446?s=128&d=identicon&r=PG", "display_name": "G Warner", "link": "https://stackoverflow.com/users/2084734/g-warner"}, "edited": false, "score": 0, "creation_date": 1473954609, "post_id": 39505730, "comment_id": 66346527, "body": "Thank you for your reply. I&#39;m still having problems. I edited my original question to give you a better idea of what&#39;s going on. Thank you"}, {"owner": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "reply_to_user": {"reputation": 899, "user_id": 2084734, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1c67bd40b2f0a99ae06b0d5b0eb52446?s=128&d=identicon&r=PG", "display_name": "G Warner", "link": "https://stackoverflow.com/users/2084734/g-warner"}, "edited": false, "score": 1, "creation_date": 1473957995, "post_id": 39505730, "comment_id": 66348442, "body": "I don&#39;t think Excel allows non-numeric categories for a scatter chart (like in your updated example). You can try verify that yourself in Excel."}], "tags": [], "owner": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "is_accepted": true, "score": 3, "last_activity_date": 1473925952, "creation_date": 1473925952, "answer_id": 39505730, "question_id": 39499563, "link": "https://stackoverflow.com/questions/39499563/categorical-values-on-the-x-axis-with-xlsxwriter/39505730#39505730", "title": "Categorical values on the x-axis with xlsxwriter", "body": "<p>Just set the series categories to point to the strings, or numbers, or dates that you wish to plot.</p>\n\n<p>For example:</p>\n\n<pre><code>import xlsxwriter\n\nworkbook = xlsxwriter.Workbook('chart.xlsx')\nworksheet = workbook.add_worksheet()\n\n# Add a column chart.\nchart = workbook.add_chart({'type': 'column'})\n\n# Write some data to add to plot on the chart.\nworksheet.write_column('A1', ['Bob', 'Eve', 'Ann'])\nworksheet.write_column('B1', [5, 10, 7])\n\n# Configure the chart.\nchart.add_series({'categories': '=Sheet1!$A$1:$A$3',\n                  'values':     '=Sheet1!$B$1:$B$3'})\n\n# Insert the chart into the worksheet.\nworksheet.insert_chart('D1', chart)\n\nworkbook.close()\n</code></pre>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/fQQHo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fQQHo.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 899, "user_id": 2084734, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1c67bd40b2f0a99ae06b0d5b0eb52446?s=128&d=identicon&r=PG", "display_name": "G Warner", "link": "https://stackoverflow.com/users/2084734/g-warner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1765, "favorite_count": 0, "accepted_answer_id": 39505730, "answer_count": 1, "score": 2, "last_activity_date": 1473954574, "creation_date": 1473886773, "last_edit_date": 1473954574, "question_id": 39499563, "link": "https://stackoverflow.com/questions/39499563/categorical-values-on-the-x-axis-with-xlsxwriter", "title": "Categorical values on the x-axis with xlsxwriter", "body": "<p>I have a plot that needs names as the values for the x-axis. I imagine this is accomplished via the set_x_axis function for chart objects but can't find the proper key in the documentation (<a href=\"http://xlsxwriter.readthedocs.io/chart.html#set_x_axis\" rel=\"nofollow noreferrer\">http://xlsxwriter.readthedocs.io/chart.html#set_x_axis</a>). The following code produces the graph below:</p>\n\n<pre><code>chart = workbook.add_chart({'type':'scatter'})\ncolLetter = alphabet[1] #alphabet is list of alphabet\nfor ii in range(4):\n    colLetter = alphabet[ii+1]\n    chart.add_series({\n        'name': '=Sheet1!$%s$1'%colLetter,\n        'categories': '=Sheet1!$A$2:$A$'+str(lastRowNumber),\n        'values': '=Sheet1!$%s$2:$%s$6'%(colLetter, colLetter),\n    })\nchart.set_title({'name': 'Cityblock'})\nchart.set_x_axis({'name': 'Subject'})\nchart.set_y_axis({'name': 'Distance'})\nchart.set_style(11)\nworksheet.insert_chart('F1', chart)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/lH2om.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lH2om.png\" alt=\"enter image description here\"></a></p>\n\n<p>Any suggestions? I'm using xlsxwriter with python 2.7.</p>\n"}, {"tags": ["python", "django", "rest", "django-rest-framework", "django-drf-renderer"], "comments": [{"owner": {"reputation": 102535, "user_id": 20128, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4b62eef3ad218a5d3cbdd1077660ca8b?s=128&d=identicon&r=PG", "display_name": "serg", "link": "https://stackoverflow.com/users/20128/serg"}, "edited": false, "score": 0, "creation_date": 1473908740, "post_id": 39499519, "comment_id": 66322363, "body": "Usually you would have javascript making ajax calls to your rest endpoint and doing the rendering. If you want to render everything on the server side inside a template then there is no point in serializing anything. You need to either create a different endpoint for template rendering, or pass some url parameters letting server know that instead of serializing(or &quot;rendering&quot;) to json it should render to a template."}, {"owner": {"reputation": 5629, "user_id": 669561, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/ixk1q.jpg?s=128&g=1", "display_name": "DanEEStar", "link": "https://stackoverflow.com/users/669561/daneestar"}, "edited": false, "score": 0, "creation_date": 1473953828, "post_id": 39499519, "comment_id": 66346045, "body": "What you normally would do is getting the JSON via Ajax in your mobile app. The mobile app is then responsible for the rendering to HTML and not the Django or Django Rest Framework."}], "owner": {"reputation": 47, "user_id": 5499403, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7be07720ea969cdfff5adbf6d2d05826?s=128&d=identicon&r=PG", "display_name": "eager_coder", "link": "https://stackoverflow.com/users/5499403/eager-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 744, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1473902704, "creation_date": 1473886589, "last_edit_date": 1473902704, "question_id": 39499519, "link": "https://stackoverflow.com/questions/39499519/how-do-i-render-json-objects-in-django-template", "title": "How do I render JSON objects in Django template?", "body": "<p>I'm trying to move a Django backend to a RESTful API in order to let a mobile app access the backend. I'm using <a href=\"http://www.django-rest-framework.org/\" rel=\"nofollow\">Django REST framework</a> for this. </p>\n\n<p>So if I serialize all my models and objects and render in JSON (for mobile app), how do I render the serialized models and objects in my django templates (for website)? </p>\n\n<p>I realize there are many ways to render (<code>TemplateHTMLRenderer</code>, <code>JSONRenderer</code>, etc.). But once I serialize, I'm not able to render using <code>TemplateHTMLRenderer</code>. </p>\n\n<p>So should I just serialize and render in JSON for mobile app and just render using <code>TemplateHTMLRenderer</code> if it's a regular request (website)? So everything is just if-else? What strategies do people usually use to move to a RESTful API? How do I go about this?</p>\n"}, {"tags": ["python", "multithreading", "tkinter"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1473890860, "post_id": 39499468, "comment_id": 66318225, "body": "All tkinter interactions need to be in a single thread. You can&#39;t reliably call a tkinter function or method on a tkinter object from any thread other than the one where the root window was created."}], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 6301994, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153811722059682/picture?type=large", "display_name": "Robert Altman", "link": "https://stackoverflow.com/users/6301994/robert-altman"}, "edited": false, "score": 0, "creation_date": 1473945814, "post_id": 39501945, "comment_id": 66340266, "body": "That works like a charm. Thank you so much. I spent hours yesterday trying to figure that out. I actually tried the lambda approach, but like this: ConnectionThread = Thread(target=lambda: eventsim.con_thread(IP,Port)) which I guess is still making the same mistake."}, {"owner": {"reputation": 407, "user_id": 4352170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/JphOt.jpg?s=128&g=1", "display_name": "Zorobay", "link": "https://stackoverflow.com/users/4352170/zorobay"}, "edited": false, "score": 0, "creation_date": 1552573470, "post_id": 39501945, "comment_id": 97069107, "body": "Dude you are a lifesaver! Had the exact same problem!"}], "tags": [], "owner": {"reputation": 17763, "user_id": 5317403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8TwWN.png?s=128&g=1", "display_name": "acw1668", "link": "https://stackoverflow.com/users/5317403/acw1668"}, "is_accepted": true, "score": 2, "last_activity_date": 1473903121, "creation_date": 1473903121, "answer_id": 39501945, "question_id": 39499468, "link": "https://stackoverflow.com/questions/39499468/tkinter-threading-causing-ui-freeze/39501945#39501945", "title": "Tkinter Threading causing UI freeze", "body": "<p>You pass the result of <code>eventsim.con_thread(IP,Port)</code> to <code>Thread(...)</code> function, so it will wait until the execution of <code>eventsim.con_thread(...)</code> completes.  Try changing:</p>\n\n<pre><code>def connect(self, IP, Port):\n    ConnectionThread = Thread(eventsim.con_thread(IP,Port))\n    ConnectionThread.start()\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>def connect(self, IP, Port):\n    ConnectionThread = Thread(target=lambda ip=IP, port=Port: eventsim.con_thread(ip,port))\n    ConnectionThread.start()\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 6301994, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153811722059682/picture?type=large", "display_name": "Robert Altman", "link": "https://stackoverflow.com/users/6301994/robert-altman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 886, "favorite_count": 0, "accepted_answer_id": 39501945, "answer_count": 1, "score": 0, "last_activity_date": 1473903121, "creation_date": 1473886340, "question_id": 39499468, "link": "https://stackoverflow.com/questions/39499468/tkinter-threading-causing-ui-freeze", "title": "Tkinter Threading causing UI freeze", "body": "<p>I've searched this site (and others) up and down but I can't seem to find the right solution.</p>\n\n<p>I have a client program that connects to a server and automatically sends a message every few seconds, as well as on user command. I'm using multiple threads for this. \nEnter Tkinter: Once I hit the 'Connect' button, my UI freezes, either until the connection attempt times out or until the end of time, should the client connect to the server.</p>\n\n<p>I've tried calling the thread from the button's command parameter, from inside the main loop, and outside the main loop. I've tried putting the main loop in a thread and then creating a new thread for the connection from there.\nNothing seems to be working...the UI continues to hang.</p>\n\n<pre><code>class EventSim(Frame):\n\n    def __init__(self, parent):\n        self.queue = Queue\n        Frame.__init__(self, parent)\n\n        self.parent = parent   \n\n    def initUI(self,IP_Address,Port_Number,Events_Directory):\n    #...\n    self.Con_Button = Button(frame7,text='Connect', command = lambda:\n        self.connect(IP_Text.get(),Port_Text.get(),))\n\n    def connect(self,IP,Port):\n        ConnectionThread = Thread(eventsim.con_thread(IP,Port))\n        ConnectionThread.start()\n\n\ndef main():\nroot = Tk()\nroot.geometry(\"300x310+750+300\")\nSim = EventSim(root)\neventsim.readconfig()\nSim.initUI(eventsim.ipa,eventsim.portnum,eventsim.event_dir)\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "cython", "setuptools", "distutils", "setup.py"], "answers": [{"comments": [{"owner": {"reputation": 3104, "user_id": 1527176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/N29xj.jpg?s=128&g=1", "display_name": "eguaio", "link": "https://stackoverflow.com/users/1527176/eguaio"}, "edited": false, "score": 1, "creation_date": 1474556919, "post_id": 39640762, "comment_id": 66588750, "body": "Thank you so much for your answer. I still can&#39;t make it work. Followed your advice but the .py and .pyc files are still included in the wheel. And can&#39;t find either how to remove files subclassing (or whatever is needed) the Distribution class. I read all the links and noting. About the example you quote, I don&#39;t know how to translate that yaml configuration file to a python setup.py script. &#191;Could you provide more specifics? Thanks!"}, {"owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "reply_to_user": {"reputation": 3104, "user_id": 1527176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/N29xj.jpg?s=128&g=1", "display_name": "eguaio", "link": "https://stackoverflow.com/users/1527176/eguaio"}, "edited": false, "score": 1, "creation_date": 1475359816, "post_id": 39640762, "comment_id": 66915138, "body": "@eguaio you should have a look at <b>Delocate</b> \u2013 <a href=\"https://github.com/matthew-brett/delocate\" rel=\"nofollow noreferrer\">github.com/matthew-brett/delocate</a> \u2013 the source of which has a great many useful functions for manipulating wheels and shared object files. That will likely get you going\u2026 as for the yaml thing, I would predict that that\u2019s going to be the hard/irritating part of the project, where you\u2019ll just have to dive in and write your own configuration-file reader code, hewn closely to the intrinsic form taken by the data you work with. Indeed!"}, {"owner": {"reputation": 3104, "user_id": 1527176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/N29xj.jpg?s=128&g=1", "display_name": "eguaio", "link": "https://stackoverflow.com/users/1527176/eguaio"}, "edited": false, "score": 0, "creation_date": 1476196970, "post_id": 39640762, "comment_id": 67238621, "body": "I searched in the indicated links and I still can find a solution. In those links, a lot of tunning is done over the Distribution, run_setup, setup, etc classes, functions and modules. I tried to navigated the source files of many of the libraries with the bdist_wheel command and the source is still distributed."}, {"owner": {"reputation": 3104, "user_id": 1527176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/N29xj.jpg?s=128&g=1", "display_name": "eguaio", "link": "https://stackoverflow.com/users/1527176/eguaio"}, "edited": false, "score": 0, "creation_date": 1476197033, "post_id": 39640762, "comment_id": 67238663, "body": "I really appreciate your help, but I&#39;m afraid you only provided pointers to a solution, but we are still lacking a complete self-contained solution to the small simple case I posted. I was not able to use your pointers to get a solution, and that is why I didn&#39;t mark your answer as correct."}], "tags": [], "owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "is_accepted": false, "score": 2, "last_activity_date": 1474551704, "creation_date": 1474551704, "answer_id": 39640762, "question_id": 39499453, "link": "https://stackoverflow.com/questions/39499453/package-only-binary-compiled-so-files-of-a-python-library-compiled-with-cython/39640762#39640762", "title": "Package only binary compiled .so files of a python library compiled with Cython", "body": "<p>This was exactly the sort of problem <a href=\"http://lucumr.pocoo.org/2014/1/27/python-on-wheels/\" rel=\"nofollow\"><strong>the Python wheels format</strong></a> \u2013 <a href=\"https://www.python.org/dev/peps/pep-0427/\" rel=\"nofollow\">described in PEP 427</a> \u2013 was developed to address.</p>\n\n<p>Wheels are a replacement for Python eggs (which were/are problematic for a bunch of reasons) \u2013 <a href=\"https://packaging.python.org/installing/\" rel=\"nofollow\">they are supported by <code>pip</code></a>, can contain architecture-specific private binaries (here is <a href=\"https://github.com/lepture/python-wheels/blob/master/.travis.yml\" rel=\"nofollow\">one example of such an arrangement</a>) and are accepted generally by the Python communities who have stakes in these kind of things.</p>\n\n<p>Here is one <code>setup.py</code> snippet from the <a href=\"http://lucumr.pocoo.org/2014/1/27/python-on-wheels/\" rel=\"nofollow\">aforelinked</a> <em>Python on Wheels</em> article, showing how one sets up a binary distribution:</p>\n\n<pre><code>import os\nfrom setuptools import setup\nfrom setuptools.dist import Distribution\n\nclass BinaryDistribution(Distribution):\n    def is_pure(self):\n        return False\n\nsetup(\n    ...,\n    include_package_data=True,\n    distclass=BinaryDistribution,\n)\n</code></pre>\n\n<p>\u2026 in leu of the older (but probably somehow still canonically supported) <code>setuptools</code> classes you are using. It\u2019s very straightforward to make Wheels for your distribution purposes, as outlined \u2013 as I recall from experience, either the <code>wheel</code> modules\u2019 build process is somewhat cognizant of <code>virtualenv</code>, or it\u2019s very easy to use one within the other.</p>\n\n<p>In any case, trading in the <code>setuptools</code> egg-based APIs for wheel-based tooling should save you some serious pain, I should think.</p>\n"}, {"comments": [{"owner": {"reputation": 3104, "user_id": 1527176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/N29xj.jpg?s=128&g=1", "display_name": "eguaio", "link": "https://stackoverflow.com/users/1527176/eguaio"}, "edited": false, "score": 1, "creation_date": 1520614095, "post_id": 45404570, "comment_id": 85401809, "body": "It works!! I will update the answer with the setup.py for self-contention."}], "tags": [], "owner": {"reputation": 1038, "user_id": 2839862, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d874f8fa5e6480461f368400b9089a2f?s=128&d=identicon&r=PG", "display_name": "Teyras", "link": "https://stackoverflow.com/users/2839862/teyras"}, "is_accepted": false, "score": 3, "last_activity_date": 1501447838, "creation_date": 1501447838, "answer_id": 45404570, "question_id": 39499453, "link": "https://stackoverflow.com/questions/39499453/package-only-binary-compiled-so-files-of-a-python-library-compiled-with-cython/45404570#45404570", "title": "Package only binary compiled .so files of a python library compiled with Cython", "body": "<p>I suggest you use the wheel format (as suggested by fish2000). Then, in your <code>setup.py</code>, set the <code>packages</code> argument to <code>[]</code>. Your Cython extension will still build and the resulting .so files will be included in the resulting wheel package.</p>\n\n<p>If your <code>__init__.py</code> is not included in the wheel, you can override the <code>run</code> method of <code>build_ext</code> class shipped by Cython and copy the file from your source tree to the build folder (the path can be found in <code>self.build_lib</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 3104, "user_id": 1527176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/N29xj.jpg?s=128&g=1", "display_name": "eguaio", "link": "https://stackoverflow.com/users/1527176/eguaio"}, "edited": false, "score": 0, "creation_date": 1520614230, "post_id": 49179676, "comment_id": 85401876, "body": "Great observation. I marked @Teyras answer though, because his answer meets the question requirements, and he answered first."}, {"owner": {"reputation": 5100, "user_id": 4218017, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/077076971d75a0e644d620866a6a718b?s=128&d=identicon&r=PG", "display_name": "Overdrivr", "link": "https://stackoverflow.com/users/4218017/overdrivr"}, "edited": false, "score": 0, "creation_date": 1533912604, "post_id": 49179676, "comment_id": 90535411, "body": "You sir, saved my day. I had no idea how to copy only the data files for a cythonized package. A small improvement, I copied the init.py files from a custom build_ext class instead of creating new ones, in case there is logic in them."}], "tags": [], "owner": {"reputation": 1840, "user_id": 2950621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ed61b84d6059c52ac0ffb7a5b71a509?s=128&d=identicon&r=PG&f=1", "display_name": "nmgeek", "link": "https://stackoverflow.com/users/2950621/nmgeek"}, "is_accepted": false, "score": 9, "last_activity_date": 1520532270, "creation_date": 1520532270, "answer_id": 49179676, "question_id": 39499453, "link": "https://stackoverflow.com/questions/39499453/package-only-binary-compiled-so-files-of-a-python-library-compiled-with-cython/49179676#49179676", "title": "Package only binary compiled .so files of a python library compiled with Cython", "body": "<p>While packaging as a wheel is definitely what you want, the original question was about excluding <em>.py</em> source files from the package. This is addressed in <a href=\"https://bucharjan.cz/blog/using-cython-to-protect-a-python-codebase.html\" rel=\"noreferrer\" title=\"Using Cython to protect a Python codebase\">Using Cython to protect a Python codebase</a> by @Teyras, but his solution uses a hack: it removes the <em>packages</em> argument from the call to <code>setup()</code>. This prevents the <em>build_py</em> step from running which does, indeed, exclude the <em>.py</em> files but it also excludes any data files you want included in the package. (For example my package has a data file called VERSION which contains the package version number.) A better solution would be replacing the <em>build_py</em> setup command with a custom command which only copies the data files.</p>\n\n<p>You also need the <code>__init__.py</code> file as described above.  So the custom <em>build_py</em> command should create the <code>__init_.py</code> file.  I found that the compiled <code>__init__.so</code> runs when the package is imported so all that is needed is an empty <code>__init__.py</code> file to tell Python that the directory is a module which is ok to import.</p>\n\n<p>Your custom <em>build_py</em> class would look like:</p>\n\n<pre><code>import os\nfrom setuptools.command.build_py import build_py\n\nclass CustomBuildPyCommand(build_py):\n    def run(self):\n        # package data files but not .py files\n        build_py.build_package_data(self)\n        # create empty __init__.py in target dirs\n        for pdir in self.packages:\n            open(os.path.join(self.build_lib, pdir, '__init__.py'), 'a').close()\n</code></pre>\n\n<p>And configure <em>setup</em> to override the original <em>build_py</em> command:</p>\n\n<pre><code>setup(\n   ...\n   cmdclass={'build_py': CustomBuildPyCommand},\n)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3104, "user_id": 1527176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/N29xj.jpg?s=128&g=1", "display_name": "eguaio", "link": "https://stackoverflow.com/users/1527176/eguaio"}, "edited": false, "score": 1, "creation_date": 1557401778, "post_id": 56043918, "comment_id": 98757538, "body": "I marked this as the correct answer because it seems you know very well what you are saying. I&#39;ll try the code, though, and let you know whether or not it worked for me. Thank you for your contribution!"}, {"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "reply_to_user": {"reputation": 3104, "user_id": 1527176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/N29xj.jpg?s=128&g=1", "display_name": "eguaio", "link": "https://stackoverflow.com/users/1527176/eguaio"}, "edited": false, "score": 0, "creation_date": 1557431275, "post_id": 56043918, "comment_id": 98773042, "body": "Glad I could help! Ping me if should update the answer with an example code for your particular use case."}, {"owner": {"reputation": 1098, "user_id": 429596, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2f3dc2de9fad3266e19c054da2d76f38?s=128&d=identicon&r=PG", "display_name": "Fadecomic", "link": "https://stackoverflow.com/users/429596/fadecomic"}, "edited": false, "score": 0, "creation_date": 1568835004, "post_id": 56043918, "comment_id": 102405094, "body": "I cannot get this to work on Python 3.7.0. For one, build_py seems to return a filter object, so the filter() has to be wrapped in a list() call. Second, even though the filter result is correct for me, it has no effect on the package at all. The py files are still being included."}, {"owner": {"reputation": 1098, "user_id": 429596, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2f3dc2de9fad3266e19c054da2d76f38?s=128&d=identicon&r=PG", "display_name": "Fadecomic", "link": "https://stackoverflow.com/users/429596/fadecomic"}, "edited": false, "score": 0, "creation_date": 1568838330, "post_id": 56043918, "comment_id": 102406360, "body": "@hoefling I can confirm that the updated version works with 3.7."}, {"owner": {"reputation": 289, "user_id": 4629173, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d787dd7446054603f3004b2d95feb36?s=128&d=identicon&r=PG&f=1", "display_name": "Matthijs", "link": "https://stackoverflow.com/users/4629173/matthijs"}, "edited": false, "score": 0, "creation_date": 1569420712, "post_id": 56043918, "comment_id": 102592494, "body": "@hoefling: i have tried your approach but it seems that the original c files are included in the wheel. is that expected?"}, {"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "reply_to_user": {"reputation": 289, "user_id": 4629173, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d787dd7446054603f3004b2d95feb36?s=128&d=identicon&r=PG&f=1", "display_name": "Matthijs", "link": "https://stackoverflow.com/users/4629173/matthijs"}, "edited": false, "score": 0, "creation_date": 1569421609, "post_id": 56043918, "comment_id": 102593030, "body": "@Matthijs it&#39;s a matter of Cython configuration. The C sources are written in-place by default, you can specify a custom target directory though. <code>cythonize(..., build_dir=&#39;&#47;tmp&#39;)</code> etc."}, {"owner": {"reputation": 289, "user_id": 4629173, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d787dd7446054603f3004b2d95feb36?s=128&d=identicon&r=PG&f=1", "display_name": "Matthijs", "link": "https://stackoverflow.com/users/4629173/matthijs"}, "edited": false, "score": 0, "creation_date": 1569422102, "post_id": 56043918, "comment_id": 102593338, "body": "great, will try and report back."}], "tags": [], "owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "is_accepted": true, "score": 8, "last_activity_date": 1613453424, "last_edit_date": 1613453424, "creation_date": 1557328453, "answer_id": 56043918, "question_id": 39499453, "link": "https://stackoverflow.com/questions/39499453/package-only-binary-compiled-so-files-of-a-python-library-compiled-with-cython/56043918#56043918", "title": "Package only binary compiled .so files of a python library compiled with Cython", "body": "<p>Unfortunately, <a href=\"https://stackoverflow.com/a/45404570/2072269\">the answer suggesting setting <code>packages=[]</code></a> is wrong and may break a lot of stuff, as can e.g. be seen in <a href=\"https://stackoverflow.com/q/56024286/2650249\">this question</a>. Don't use it. Instead of excluding all packages from the dist, you should exclude only the python files that will be cythonized and compiled to shared objects.</p>\n<p>Below is a working example; it uses <a href=\"https://stackoverflow.com/a/50517893/2650249\">my recipe</a> from the question <a href=\"https://stackoverflow.com/q/50506072/2650249\">Exclude single source file from python bdist_egg or bdist_wheel</a>. The example project contains package <code>spam</code> with two modules, <code>spam.eggs</code> and <code>spam.bacon</code>, and a subpackage <code>spam.fizz</code> with one module <code>spam.fizz.buzz</code>:</p>\n<pre><code>root\n\u251c\u2500\u2500 setup.py\n\u2514\u2500\u2500 spam\n    \u251c\u2500\u2500 __init__.py\n    \u251c\u2500\u2500 bacon.py\n    \u251c\u2500\u2500 eggs.py\n    \u2514\u2500\u2500 fizz\n        \u251c\u2500\u2500 __init__.py\n        \u2514\u2500\u2500 buzz.py\n</code></pre>\n<p>The module lookup is being done in the <code>build_py</code> command, so it is the one you need to subclass with custom behaviour.</p>\n<h3>Simple case: compile all source code, make no exceptions</h3>\n<p>If you are about to compile every <code>.py</code> file (including <code>__init__.py</code>s), it is already sufficient to override <code>build_py.build_packages</code> method, making it a noop. Because <code>build_packages</code> doesn't do anything, no <code>.py</code> file will be collected at all and the dist will include only cythonized extensions:</p>\n<pre><code>import fnmatch\nfrom setuptools import find_packages, setup, Extension\nfrom setuptools.command.build_py import build_py as build_py_orig\nfrom Cython.Build import cythonize\n\n\nextensions = [\n    # example of extensions with regex\n    Extension('spam.*', ['spam/*.py']),\n    # example of extension with single source file\n    Extension('spam.fizz.buzz', ['spam/fizz/buzz.py']),\n]\n\n\nclass build_py(build_py_orig):\n    def build_packages(self):\n        pass\n\n\nsetup(\n    name='...',\n    version='...',\n    packages=find_packages(),\n    ext_modules=cythonize(extensions),\n    cmdclass={'build_py': build_py},\n)\n</code></pre>\n<h3>Complex case: mix cythonized extensions with source modules</h3>\n<p>If you want to compile only selected modules and leave the rest untouched, you will need a bit more complex logic; in this case, you need to override module lookup. In the below example, I still compile <code>spam.bacon</code>, <code>spam.eggs</code> and <code>spam.fizz.buzz</code> to shared objects, but leave <code>__init__.py</code> files untouched, so they will be included as source modules:</p>\n<pre><code>import fnmatch\nfrom setuptools import find_packages, setup, Extension\nfrom setuptools.command.build_py import build_py as build_py_orig\nfrom Cython.Build import cythonize\n\n\nextensions = [\n    Extension('spam.*', ['spam/*.py']),\n    Extension('spam.fizz.buzz', ['spam/fizz/buzz.py']),\n]\ncython_excludes = ['**/__init__.py']\n\n\ndef not_cythonized(tup):\n    (package, module, filepath) = tup\n    return any(\n        fnmatch.fnmatchcase(filepath, pat=pattern) for pattern in cython_excludes\n    ) or not any(\n        fnmatch.fnmatchcase(filepath, pat=pattern)\n        for ext in extensions\n        for pattern in ext.sources\n    )\n\n\nclass build_py(build_py_orig):\n    def find_modules(self):\n        modules = super().find_modules()\n        return list(filter(not_cythonized, modules))\n\n    def find_package_modules(self, package, package_dir):\n        modules = super().find_package_modules(package, package_dir)\n        return list(filter(not_cythonized, modules))\n\n\nsetup(\n    name='...',\n    version='...',\n    packages=find_packages(),\n    ext_modules=cythonize(extensions, exclude=cython_excludes),\n    cmdclass={'build_py': build_py},\n)\n</code></pre>\n"}], "owner": {"reputation": 3104, "user_id": 1527176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/N29xj.jpg?s=128&g=1", "display_name": "eguaio", "link": "https://stackoverflow.com/users/1527176/eguaio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12083, "favorite_count": 8, "accepted_answer_id": 56043918, "answer_count": 4, "score": 13, "last_activity_date": 1613453424, "creation_date": 1473886272, "last_edit_date": 1520614721, "question_id": 39499453, "link": "https://stackoverflow.com/questions/39499453/package-only-binary-compiled-so-files-of-a-python-library-compiled-with-cython", "title": "Package only binary compiled .so files of a python library compiled with Cython", "body": "<p>I have a package named <code>mypack</code> which inside has a module <code>mymod.py</code>, and \nthe <code>__init__.py</code>.\nFor some reason that is not in debate, I need to package this module compiled \n(nor .py or .pyc files are allowed). That is, the <code>__init__.py</code> is the only\nsource file allowed in the distributed compressed file.</p>\n\n<p>The folder structure is:</p>\n\n<pre><code>. \n\u2502  \n\u251c\u2500\u2500 mypack\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 mymod.py\n\u251c\u2500\u2500 setup.py\n</code></pre>\n\n<p>I find that Cython is able to do this, by converting each .py file in a .so library\nthat can be directly imported with python. </p>\n\n<p>The question is: how the <code>setup.py</code> file must be in order to allow an easy packaging and installation?</p>\n\n<p>The target system has a virtualenv where the package must be installed with \nwhatever method that allows easy install and uninstall (easy_install, pip, etc are all\nwelcome).  </p>\n\n<p>I tried all that was at my reach. I read <code>setuptools</code> and <code>distutils</code> documentation, \nall stackoverflow related questions,\nand tried with  all kind of commands (sdist, bdist, bdist_egg, etc), with lots \nof combinations of setup.cfg and MANIFEST.in file entries.</p>\n\n<p>The closest I got was with the below setup file, that would subclass the bdist_egg \ncommand in order to remove also .pyc files, but that is breaking the installation.</p>\n\n<p>A solution that  installs \"manually\" the files in the venv is \nalso good, provided that all ancillary files that are included in a proper\ninstallation are covered (I need to run <code>pip freeze</code> in the venv and see\n<code>mymod==0.0.1</code>).</p>\n\n<p>Run it with:</p>\n\n<pre><code>python setup.py bdist_egg --exclude-source-files\n</code></pre>\n\n<p>and (try to) install it with </p>\n\n<pre><code>easy_install mymod-0.0.1-py2.7-linux-x86_64.egg\n</code></pre>\n\n<p>As you may notice, the target is linux 64 bits with python 2.7.</p>\n\n<pre><code>from Cython.Distutils import build_ext\nfrom setuptools import setup, find_packages\nfrom setuptools.extension import Extension\nfrom setuptools.command import bdist_egg\nfrom setuptools.command.bdist_egg import  walk_egg, log \nimport os\n\nclass my_bdist_egg(bdist_egg.bdist_egg):\n\n    def zap_pyfiles(self):\n        log.info(\"Removing .py files from temporary directory\")\n        for base, dirs, files in walk_egg(self.bdist_dir):\n            for name in files:\n                if not name.endswith('__init__.py'):\n                    if name.endswith('.py') or name.endswith('.pyc'):\n                        # original 'if' only has name.endswith('.py')\n                        path = os.path.join(base, name)\n                        log.info(\"Deleting %s\",path)\n                        os.unlink(path)\n\next_modules=[\n    Extension(\"mypack.mymod\", [\"mypack/mymod.py\"]),\n]\n\nsetup(\n  name = 'mypack',\n  cmdclass = {'build_ext': build_ext, \n              'bdist_egg': my_bdist_egg },\n  ext_modules = ext_modules,\n  version='0.0.1',\n  description='This is mypack compiled lib',\n  author='Myself',\n  packages=['mypack'],\n)\n</code></pre>\n\n<p>UPDATE.\nFollowing @Teyras answer, it was possible to build a wheel as requested in the answer. The <code>setup.py</code> file contents are:</p>\n\n<pre><code>import os\nimport shutil\nfrom setuptools.extension import Extension\nfrom setuptools import setup\nfrom Cython.Build import cythonize\nfrom Cython.Distutils import build_ext\n\nclass MyBuildExt(build_ext):\n    def run(self):\n        build_ext.run(self)\n        build_dir = os.path.realpath(self.build_lib)\n        root_dir = os.path.dirname(os.path.realpath(__file__))\n        target_dir = build_dir if not self.inplace else root_dir\n        self.copy_file('mypack/__init__.py', root_dir, target_dir)\n\n    def copy_file(self, path, source_dir, destination_dir):\n        if os.path.exists(os.path.join(source_dir, path)):\n            shutil.copyfile(os.path.join(source_dir, path), \n                            os.path.join(destination_dir, path))\n\n\nsetup(\n  name = 'mypack',\n  cmdclass = {'build_ext': MyBuildExt},\n  ext_modules = cythonize([Extension(\"mypack.*\", [\"mypack/*.py\"])]),\n  version='0.0.1',\n  description='This is mypack compiled lib',\n  author='Myself',\n  packages=[],\n  include_package_data=True )\n</code></pre>\n\n<p>The key point was to set <code>packages=[],</code>. The overwriting of the <code>build_ext</code> class <code>run</code> method was needed to get the <code>__init__.py</code> file inside the wheel.</p>\n"}, {"tags": ["python", "qt", "pyqt", "pyqt4", "qplaintextedit"], "comments": [{"owner": {"reputation": 2999, "user_id": 1648011, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/62cf1e1d4cec3b8f1a03570bb0e55d05?s=128&d=identicon&r=PG", "display_name": "Photon", "link": "https://stackoverflow.com/users/1648011/photon"}, "edited": false, "score": 3, "creation_date": 1473886575, "post_id": 39499449, "comment_id": 66316594, "body": "Have you tried using a cursor to read it in smaller chunks?  Perhaps if you read 10k or 100k lines each time it would work."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1473886808, "post_id": 39499449, "comment_id": 66316705, "body": "does it crash if you don&#39;t try to parse it?"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1473888754, "post_id": 39499449, "comment_id": 66317476, "body": "Is this all just hypothetical? Why would you ever need to load such a large amount of text? Code files are usually about a few hundred kb, and only very rarely more than a few mb. Personally, I wouldn&#39;t waste any effort trying to solve this &quot;problem&quot;."}, {"owner": {"reputation": 1473, "user_id": 595985, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c27eb525e3d319a8fd552bcd6d80d8e2?s=128&d=identicon&r=PG", "display_name": "user595985", "link": "https://stackoverflow.com/users/595985/user595985"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1473917556, "post_id": 39499449, "comment_id": 66324594, "body": "@ekhumoro, yeah i&#39;m trying it well because I can, generally I can&#39;t see this happening much, but I can copy paste so I did, and I did it until something broke so I thought I&#39;d ask for a general way of looking at the problem. It is mainly hypothetical, but if someone has a clever idea I&#39;m happy to read it and maybe try it out. Thanks"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1473946314, "post_id": 39499449, "comment_id": 66340653, "body": "@user595985. It&#39;s unclear from your question what you&#39;re really asking. The only really <i>specific</i> problem that I can see here, is the claim that calling <code>toPlainText()</code> can cause an out of memory error. If true, that would seem to be a bug in Qt. In which case, you should provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates the problem so that others can try to reproduce it."}], "owner": {"reputation": 1473, "user_id": 595985, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c27eb525e3d319a8fd552bcd6d80d8e2?s=128&d=identicon&r=PG", "display_name": "user595985", "link": "https://stackoverflow.com/users/595985/user595985"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 892, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1473886936, "creation_date": 1473886252, "last_edit_date": 1473886936, "question_id": 39499449, "link": "https://stackoverflow.com/questions/39499449/reading-large-amounts-of-text-from-qplaintextedit", "title": "Reading large amounts of text from QPlainTextEdit", "body": "<p>I am experimenting with QPlaintextedit widget as a text editor, so far it works great, using it I can type large amounts of text and the UI doesn't freeze or stutter.\nI thought I would push the boundaries and see what happens.</p>\n\n<p>The basic gist is that using my editor i can write pseudo code, and then parse the code for mistakes. If there are no mistakes the parse spits out some xml based on the input text. In the end I get a nice xml document describing the text. Essentially I have managed to transform pseudo code into an xml file.</p>\n\n<p>This works reasonably well, but the more text in the editor the more memory it uses. \nNow I managed to paste about 750k lines of text into my editor, when it came time to parse it, I first read the text and then send the entire text to the parser. To that end I do:</p>\n\n<pre><code>editor_text=QPlainTextEdit.toPlainText()\n</code></pre>\n\n<p>This gives me all the text in the editor which I can send to the parser and then convert it to and xml file (if no mistakes are found)</p>\n\n<p>Now with 750k lines of text in the editor the <em>toPlainText()</em> method doesn't work so well, in fact I just run out of memory. </p>\n\n<p>My question is how should I deal with really large amounts of text in order to parse it.</p>\n\n<p>One thing I have thought about (not tried) is reading the text block by block (or line by line) parsing each line and converting it to xml, but I'd still have to deal with the returned xml, keeping the resulting xml for each line/block in memory until the entire editor text has been parsed would still probably run out of memory</p>\n\n<p>I cannot imagine that this is just to do with QPlainTextEdit widget, but in general when there is a large amount of \"code\"/text say 1M, or even 10M lines of \"code\", in a single file how would one go about reading and parsing all 10M lines?</p>\n\n<p>for my example I'm using python 2.7 on Windows with pyqt4.8</p>\n"}, {"tags": ["python", "dictionary", "optimization"], "comments": [{"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 4, "creation_date": 1473886184, "post_id": 39499409, "comment_id": 66316407, "body": "What if there are more than one key with same value? Does all the value from dict should be the part of tuple?"}, {"owner": {"reputation": 2461, "user_id": 1146713, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RrLyJ.png?s=128&g=1", "display_name": "NirIzr", "link": "https://stackoverflow.com/users/1146713/nirizr"}, "reply_to_user": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1473886225, "post_id": 39499409, "comment_id": 66316432, "body": "Yes, I&#39;ll add that to my question."}, {"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1473886263, "post_id": 39499409, "comment_id": 66316447, "body": "Are you sure there are no repeated values inside each dictionary? Does the order within each tuple or within the final list matter?"}, {"owner": {"reputation": 2461, "user_id": 1146713, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RrLyJ.png?s=128&g=1", "display_name": "NirIzr", "link": "https://stackoverflow.com/users/1146713/nirizr"}, "edited": false, "score": 0, "creation_date": 1473886705, "post_id": 39499409, "comment_id": 66316654, "body": "I&#39;ve updated my question quite a bit to address those issues. I did not notice them before. The best solution will actually be a more complex solution."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1473887921, "post_id": 39499409, "comment_id": 66317143, "body": "If nothing maps to the value for a key in <code>d_source</code>, do you want a) an empty tuple as the value, or b) for the key not to be present at all in the output ?"}, {"owner": {"reputation": 2461, "user_id": 1146713, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RrLyJ.png?s=128&g=1", "display_name": "NirIzr", "link": "https://stackoverflow.com/users/1146713/nirizr"}, "edited": false, "score": 0, "creation_date": 1473887975, "post_id": 39499409, "comment_id": 66317163, "body": "b) is preferred, but a) is also ok."}, {"owner": {"reputation": 1689, "user_id": 4795263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oWgcE.jpg?s=128&g=1", "display_name": "Craig Burgler", "link": "https://stackoverflow.com/users/4795263/craig-burgler"}, "edited": false, "score": 0, "creation_date": 1473888411, "post_id": 39499409, "comment_id": 66317323, "body": "What are the typical sizes of target and source? Roughly how often are there multiple hits in the target and how often are there non-matched source keys? I&#39;m preparing to do some timing runs unless you plan to :)"}, {"owner": {"reputation": 2461, "user_id": 1146713, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RrLyJ.png?s=128&g=1", "display_name": "NirIzr", "link": "https://stackoverflow.com/users/1146713/nirizr"}, "reply_to_user": {"reputation": 1689, "user_id": 4795263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oWgcE.jpg?s=128&g=1", "display_name": "Craig Burgler", "link": "https://stackoverflow.com/users/4795263/craig-burgler"}, "edited": false, "score": 0, "creation_date": 1473889106, "post_id": 39499409, "comment_id": 66317612, "body": "@CraigBurgler Edited with answers. Thanks a lot! timings would be awesome."}, {"owner": {"reputation": 1689, "user_id": 4795263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oWgcE.jpg?s=128&g=1", "display_name": "Craig Burgler", "link": "https://stackoverflow.com/users/4795263/craig-burgler"}, "edited": false, "score": 0, "creation_date": 1473890938, "post_id": 39499409, "comment_id": 66318244, "body": "So the data characteristics provided are inconsistent, i.e. you cannot have 10x more targets than source, not likely (10%) value duplicates in both target and source, and 50% source to target match. For the most accurate timings you should run the various working methods against your actual data."}, {"owner": {"reputation": 1689, "user_id": 4795263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oWgcE.jpg?s=128&g=1", "display_name": "Craig Burgler", "link": "https://stackoverflow.com/users/4795263/craig-burgler"}, "edited": false, "score": 1, "creation_date": 1473891074, "post_id": 39499409, "comment_id": 66318300, "body": "BTW if I don&#39;t win the timing race I was focusing more on readability :)"}, {"owner": {"reputation": 2461, "user_id": 1146713, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RrLyJ.png?s=128&g=1", "display_name": "NirIzr", "link": "https://stackoverflow.com/users/1146713/nirizr"}, "reply_to_user": {"reputation": 1689, "user_id": 4795263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oWgcE.jpg?s=128&g=1", "display_name": "Craig Burgler", "link": "https://stackoverflow.com/users/4795263/craig-burgler"}, "edited": false, "score": 0, "creation_date": 1473891256, "post_id": 39499409, "comment_id": 66318357, "body": "@CraigBurgler &quot;source to target&quot; are out of # of sources. There would be a lot of &quot;unmatched&quot; targets but I don&#39;t understand why there can&#39;t be &#177;50% matched sources. Also, 50% is a top boundary. RE: timing race -  naturally :D"}, {"owner": {"reputation": 1689, "user_id": 4795263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oWgcE.jpg?s=128&g=1", "display_name": "Craig Burgler", "link": "https://stackoverflow.com/users/4795263/craig-burgler"}, "edited": false, "score": 0, "creation_date": 1473891523, "post_id": 39499409, "comment_id": 66318441, "body": "you are correct, timings coming up. I would be interested to see a numpy version as well."}, {"owner": {"reputation": 1689, "user_id": 4795263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oWgcE.jpg?s=128&g=1", "display_name": "Craig Burgler", "link": "https://stackoverflow.com/users/4795263/craig-burgler"}, "edited": false, "score": 0, "creation_date": 1473893896, "post_id": 39499409, "comment_id": 66319086, "body": "sorry had to talk to the super_vet; results added to my answer"}], "answers": [{"comments": [{"owner": {"reputation": 2461, "user_id": 1146713, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RrLyJ.png?s=128&g=1", "display_name": "NirIzr", "link": "https://stackoverflow.com/users/1146713/nirizr"}, "edited": false, "score": 0, "creation_date": 1473894204, "post_id": 39499478, "comment_id": 66319173, "body": "Could you please add Bharel&#39;s second match for completeness&#39;s sake?"}, {"owner": {"reputation": 2461, "user_id": 1146713, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RrLyJ.png?s=128&g=1", "display_name": "NirIzr", "link": "https://stackoverflow.com/users/1146713/nirizr"}, "edited": false, "score": 1, "creation_date": 1473897768, "post_id": 39499478, "comment_id": 66320080, "body": "I accepted this answer because although it did not eventually provide the fastest solution, it went the extra mile in providing me with the information I needed. Thanks!"}], "tags": [], "owner": {"reputation": 1689, "user_id": 4795263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oWgcE.jpg?s=128&g=1", "display_name": "Craig Burgler", "link": "https://stackoverflow.com/users/4795263/craig-burgler"}, "is_accepted": true, "score": 1, "last_activity_date": 1473898761, "last_edit_date": 1473898761, "creation_date": 1473886399, "answer_id": 39499478, "question_id": 39499409, "link": "https://stackoverflow.com/questions/39499409/how-can-i-find-dict-keys-for-matching-values-in-two-dicts/39499478#39499478", "title": "How can I find dict keys for matching values in two dicts?", "body": "<pre><code>from collections import defaultdict\nfrom pprint import pprint\n\nd_source  = {'a': 1, 'b': 2, 'c': 3, '3': 3}\nd_target = {'A': 1, 'B': 2, 'C': 3, '1': 1}\n\nd_result = defaultdict(list)\n{d_result[a].append(b) for a in d_source for b in d_target if d_source[a] == d_target[b]}\n\npprint(d_result)\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>{'3': ['C'],\n 'a': ['A', '1'],\n 'b': ['B'],\n 'c': ['C']}\n</code></pre>\n\n<hr>\n\n<p><em>Timing results:</em> </p>\n\n<pre><code>from collections import defaultdict\nfrom copy import deepcopy\nfrom random import randint\nfrom timeit import timeit\n\n\ndef Craig_match(source, target):\n    result = defaultdict(list)\n    {result[a].append(b) for a in source for b in target if source[a] == target[b]}\n    return result\n\ndef Bharel_match(source_dict, *rest):\n    flipped_rest = defaultdict(list)\n    for d in rest:\n        while d:\n            k, v = d.popitem()\n            flipped_rest[v].append(k)\n    return {k: tuple(flipped_rest.get(v, ())) for k, v in source_dict.items()}\n\ndef modified_Bharel_match(source_dict, *rest):\n    \"\"\"Optimized for ~50% source match due to if statement addition.\n\n    Also uses less memory.\n    \"\"\"\n    unique_values = set(source_dict.values())\n    flipped_rest = defaultdict(list)\n    for d in rest:\n        while d:\n            k, v = d.popitem()\n            if v in unique_values:\n                flipped_rest[v].append(k)\n    return {k: tuple(flipped_rest.get(v, ())) for k, v in source_dict.items()}\n\n# generate source, target such that:\n# a) ~10% duplicate values in source and target\n# b) 2000 unique source keys, 20000 unique target keys\n# c) a little less than 50% matches source value to target value\n# d) numeric keys and values\nsource = {}\nfor k in range(2000):\n    source[k] = randint(0, 1800)\ntarget = {}\nfor k in range(20000):\n    if k &lt; 1000:\n        target[k] = randint(0, 2000)\n    else:\n        target[k] = randint(2000, 19000)\n\nbest_time = {}\napproaches = ('Craig', 'Bharel', 'modified_Bharel')\nfor a in approaches:\n    best_time[a] = None\n\nfor _ in range(3):\n    for approach in approaches:\n        test_source = deepcopy(source)\n        test_target = deepcopy(target)\n\n        statement = 'd=' + approach + '_match(test_source,test_target)'\n        setup = 'from __main__ import test_source, test_target, ' + approach + '_match'\n        t = timeit(stmt=statement, setup=setup, number=1)\n        if not best_time[approach] or (t &lt; best_time[approach]):\n            best_time[approach] = t\n\nfor approach in approaches:\n    print(approach, ':', '%0.5f' % best_time[approach])\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>Craig : 7.29259\nBharel : 0.01587\nmodified_Bharel : 0.00682\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": false, "score": 0, "last_activity_date": 1473886449, "creation_date": 1473886449, "answer_id": 39499490, "question_id": 39499409, "link": "https://stackoverflow.com/questions/39499409/how-can-i-find-dict-keys-for-matching-values-in-two-dicts/39499490#39499490", "title": "How can I find dict keys for matching values in two dicts?", "body": "<p>It is up to you to determine the <em>best</em> solution. Here is <em>a</em> solution:</p>\n\n<pre><code>def dicts_to_tuples(*dicts):\n    result = {}\n    for d in dicts:\n        for k,v in d.items():\n            result.setdefault(v, []).append(k)\n    return [tuple(v) for v in result.values() if len(v) &gt; 1]\n\nd1 = {'a': 1, 'b': 2, 'c':3}\nd2 = {'A': 1, 'B': 2}\nprint dicts_to_tuples(d1, d2)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 375, "user_id": 2571149, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BtmxW.jpg?s=128&g=1", "display_name": "Steven Walton", "link": "https://stackoverflow.com/users/2571149/steven-walton"}, "is_accepted": false, "score": 1, "last_activity_date": 1473887028, "last_edit_date": 1473887028, "creation_date": 1473886502, "answer_id": 39499499, "question_id": 39499409, "link": "https://stackoverflow.com/questions/39499409/how-can-i-find-dict-keys-for-matching-values-in-two-dicts/39499499#39499499", "title": "How can I find dict keys for matching values in two dicts?", "body": "<p>Here is another solution. There are a lot of ways to do this</p>\n\n<pre><code>for key1 in d1:\n    for key2 in d2:\n        if d1[key1] == d2[key2]:\n            stuff\n</code></pre>\n\n<p>Note that you can use any name for key1 and key2.</p>\n"}, {"comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1473888380, "post_id": 39499834, "comment_id": 66317309, "body": "Your output is bogus.  Don&#39;t pop from the target or else you will get <code>KeyError</code> for dupes."}, {"owner": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1473888471, "post_id": 39499834, "comment_id": 66317348, "body": "@wim Aye, thought it will be more efficient but forgot it also repeats there. Oh well, still as efficient as it can get probably."}, {"owner": {"reputation": 1689, "user_id": 4795263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oWgcE.jpg?s=128&g=1", "display_name": "Craig Burgler", "link": "https://stackoverflow.com/users/4795263/craig-burgler"}, "edited": false, "score": 0, "creation_date": 1473888488, "post_id": 39499834, "comment_id": 66317355, "body": "I get the same output that @Bharel posted when I run the code"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1473888571, "post_id": 39499834, "comment_id": 66317400, "body": "This is quite good now, I just have some suggestions: 1) add <code>if v in flipped_target</code> to the dict comprehension  2) change the list comprehension to a plain old for loop."}, {"owner": {"reputation": 2461, "user_id": 1146713, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RrLyJ.png?s=128&g=1", "display_name": "NirIzr", "link": "https://stackoverflow.com/users/1146713/nirizr"}, "edited": false, "score": 0, "creation_date": 1473889204, "post_id": 39499834, "comment_id": 66317643, "body": "@Bharel theoretical efficiency is great, but my main focus here is practical efficiency. See (another) edit for some expected numbers, and thanks for your answers so far!"}, {"owner": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "reply_to_user": {"reputation": 2461, "user_id": 1146713, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RrLyJ.png?s=128&g=1", "display_name": "NirIzr", "link": "https://stackoverflow.com/users/1146713/nirizr"}, "edited": false, "score": 2, "creation_date": 1473890324, "post_id": 39499834, "comment_id": 66318058, "body": "@NirIzr optimized for 50% source match."}], "tags": [], "owner": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "is_accepted": false, "score": 2, "last_activity_date": 1473890179, "last_edit_date": 1473890179, "creation_date": 1473888154, "answer_id": 39499834, "question_id": 39499409, "link": "https://stackoverflow.com/questions/39499409/how-can-i-find-dict-keys-for-matching-values-in-two-dicts/39499834#39499834", "title": "How can I find dict keys for matching values in two dicts?", "body": "<p>All answers have <code>O(n^2)</code> efficiency which isn't very good so I thought of answering myself.</p>\n\n<p>I use <code>2(source_len) + 2(dict_count)(dict_len)</code> memory and I have <code>O(2n)</code> efficiency which is the best you can get here I believe.</p>\n\n<p>Here you go:</p>\n\n<pre><code>from collections import defaultdict\n\nd_source = {'a': 1, 'b': 2, 'c': 3, '3': 3}\nd_target = {'A': 1, 'B': 2, 'C': 3, '1': 1}\n\ndef merge_dicts(source_dict, *rest):\n    flipped_rest = defaultdict(list)\n    for d in rest:\n        while d:\n            k, v = d.popitem()\n            flipped_rest[v].append(k)\n    return {k: tuple(flipped_rest.get(v, ())) for k, v in source_dict.items()}\n\nnew_dict = merge_dicts(d_source, d_target)\n</code></pre>\n\n<p>By the way, I'm using a tuple in order not to link the resulting lists together.</p>\n\n<hr>\n\n<p>As you've added specifications for the data, here's a closer matching solution:</p>\n\n<pre><code>d_source = {'a': 1, 'b': 2, 'c': 3, '3': 3}\nd_target = {'A': 1, 'B': 2, 'C': 3, '1': 1}\n\ndef second_merge_dicts(source_dict, *rest):\n    \"\"\"Optimized for ~50% source match due to if statement addition.\n\n    Also uses less memory.\n    \"\"\"\n    unique_values = set(source_dict.values())\n    flipped_rest = defaultdict(list)\n    for d in rest:\n        while d:\n            k, v = d.popitem()\n            if v in unique_values:\n                flipped_rest[v].append(k)\n    return {k: tuple(flipped_rest.get(v, ())) for k, v in source_dict.items()}\n\nnew_dict = second_merge_dicts(d_source, d_target)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "is_accepted": false, "score": 1, "last_activity_date": 1473890791, "creation_date": 1473890791, "answer_id": 39500376, "question_id": 39499409, "link": "https://stackoverflow.com/questions/39499409/how-can-i-find-dict-keys-for-matching-values-in-two-dicts/39500376#39500376", "title": "How can I find dict keys for matching values in two dicts?", "body": "<p>This maybe \"cheating\" in some regards, although if you are looking for the matching values of the keys regardless of the case sensitivity then you might be able to do:</p>\n\n<pre><code>import sets\n\naa = {'a': 1, 'b': 2, 'c':3}\nbb = {'A': 1, 'B': 2, 'd': 3}\n\nbbl = {k.lower():v for k,v in bb.items()}\n\nresult = {k:k.upper() for k,v in aa.iteritems() &amp; bbl.viewitems()}\nprint( result )\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>{'a': 'A', 'b': 'B'}\n</code></pre>\n\n<p>The <code>bbl</code> declaration changes the <code>bb</code> keys into lowercase (it could be either <code>aa</code>, or <code>bb</code>). </p>\n\n<p><sub>* I only tested this on my phone, so just throwing this idea out there I suppose... Also, you've changed your question radically since I began composing my answer, so you get what you get.</sub> </p>\n"}], "owner": {"reputation": 2461, "user_id": 1146713, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RrLyJ.png?s=128&g=1", "display_name": "NirIzr", "link": "https://stackoverflow.com/users/1146713/nirizr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1027, "favorite_count": 0, "accepted_answer_id": 39499478, "answer_count": 5, "score": 1, "last_activity_date": 1473898761, "creation_date": 1473886075, "last_edit_date": 1495541300, "question_id": 39499409, "link": "https://stackoverflow.com/questions/39499409/how-can-i-find-dict-keys-for-matching-values-in-two-dicts", "title": "How can I find dict keys for matching values in two dicts?", "body": "<p>I have two dictionaries mapping IDs to values. For simplicity, lets say those are the dictionaries:</p>\n\n<pre><code>d_source = {'a': 1, 'b': 2, 'c': 3, '3': 3}\nd_target = {'A': 1, 'B': 2, 'C': 3, '1': 1}\n</code></pre>\n\n<p>As named, the dictionaries are not symmetrical.\nI would like to get a dictionary of <em>keys</em> from dictionaries <code>d_source</code> and <code>d_target</code> whose values match. The resulting dictionary would have <code>d_source</code> keys as its own keys, and <code>d_target</code> keys as that keys value (in either a <code>list</code>, <code>tuple</code> or <code>set</code> format).</p>\n\n<p>This would be The expected returned value for the above example should be the following list:</p>\n\n<pre><code>{'a': ('1', 'A'),\n 'b': ('B',),\n 'c': ('C',),\n '3': ('C',)}\n</code></pre>\n\n<p>There are two somewhat <a href=\"https://stackoverflow.com/questions/21631951/find-matching-key-value-pairs-of-two-dictionaries\">similar</a> <a href=\"https://stackoverflow.com/questions/11615041/how-to-find-match-items-from-two-lists\">questions</a>, but those solutions can't be easily applied to my question.</p>\n\n<p>Some characteristics of the data:</p>\n\n<ol>\n<li>Source would usually be smaller than target. Having roughly few thousand sources (tops) and a magnitude more targets.</li>\n<li>Duplicates in the same dict (both <code>d_source</code> and <code>d_target</code>) are not too likely on values.</li>\n<li>matches are expected to be found for (a rough estimate) not more than 50% than <code>d_source</code> items.</li>\n<li>All keys are integers.</li>\n</ol>\n\n<p>What is the best (performance wise) solution to this problem?\nModeling data into other datatypes for improved performance is totally ok, even when using third party libraries (i'm thinking <a href=\"http://www.numpy.org/\" rel=\"nofollow noreferrer\">numpy</a>)</p>\n"}, {"tags": ["python", "mysql", "python-2.7", "pycharm", "mysql-python"], "comments": [{"owner": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "edited": false, "score": 0, "creation_date": 1473886049, "post_id": 39499387, "comment_id": 66316342, "body": "What makes you think that module exists?"}], "answers": [{"comments": [{"owner": {"reputation": 944, "user_id": 5005052, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/7tG04.jpg?s=128&g=1", "display_name": "Bill Ancalagon the black", "link": "https://stackoverflow.com/users/5005052/bill-ancalagon-the-black"}, "edited": false, "score": 0, "creation_date": 1473981527, "post_id": 39499681, "comment_id": 66359094, "body": "Upvoted. Thanks a lot for answering .... pymysql was already successfully installed on PyCharm, but still cannot import mysqldb."}], "tags": [], "owner": {"reputation": 2447, "user_id": 3006366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVcKL.png?s=128&g=1", "display_name": "ode2k", "link": "https://stackoverflow.com/users/3006366/ode2k"}, "is_accepted": false, "score": 3, "last_activity_date": 1473887380, "creation_date": 1473887380, "answer_id": 39499681, "question_id": 39499387, "link": "https://stackoverflow.com/questions/39499387/pycharm-import-mysql/39499681#39499681", "title": "PyCharm import MySQL", "body": "<p>You can use <code>pymysql</code> installing through PyCharm instead of MySQLdb. It's a drop-in replacement for it.</p>\n\n<p><strong>Documentation:</strong>  <a href=\"https://github.com/PyMySQL/PyMySQL\" rel=\"nofollow\">https://github.com/PyMySQL/PyMySQL</a></p>\n"}], "owner": {"reputation": 944, "user_id": 5005052, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/7tG04.jpg?s=128&g=1", "display_name": "Bill Ancalagon the black", "link": "https://stackoverflow.com/users/5005052/bill-ancalagon-the-black"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12686, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1473981463, "creation_date": 1473885975, "last_edit_date": 1473981463, "question_id": 39499387, "link": "https://stackoverflow.com/questions/39499387/pycharm-import-mysql", "title": "PyCharm import MySQL", "body": "<p>I am trying </p>\n\n<pre><code>import MySQLdb as mdb\n</code></pre>\n\n<p>on PyCharm and get the error:</p>\n\n<pre><code>ImportError: No module named MySQLdb\n</code></pre>\n\n<p>From the PyCharm-preference, cannot find MySQLdb to import.\npymysql was successfully installed on PyCharm though.\n Suggestions ? Thank you very much. </p>\n\n<p><a href=\"https://i.stack.imgur.com/ACWaY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ACWaY.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/VOLu4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VOLu4.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "pyqt", "signals-slots", "qpushbutton"], "answers": [{"tags": [], "owner": {"reputation": 106, "user_id": 6823684, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iU9uE5oaA1I/AAAAAAAAAAI/AAAAAAAAS6s/uM0mUm-0ltI/photo.jpg?sz=128", "display_name": "Renato J. F.", "link": "https://stackoverflow.com/users/6823684/renato-j-f"}, "is_accepted": true, "score": 0, "last_activity_date": 1473888941, "creation_date": 1473888941, "answer_id": 39499989, "question_id": 39499349, "link": "https://stackoverflow.com/questions/39499349/how-to-connect-a-qpushbutton-to-a-function/39499989#39499989", "title": "How to connect a QPushButton to a function", "body": "<p>You have to reference the name of your script when calling a function from it. It works as a library:</p>\n\n<pre><code>OpenImage.connect(rony.show())\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6365749, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/29abbeb6e3f0597089b0a879b046be69?s=128&d=identicon&r=PG&f=1", "display_name": "rony.stackoverflow", "link": "https://stackoverflow.com/users/6365749/rony-stackoverflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 39499989, "answer_count": 1, "score": 0, "last_activity_date": 1473888941, "creation_date": 1473885762, "last_edit_date": 1473887381, "question_id": 39499349, "link": "https://stackoverflow.com/questions/39499349/how-to-connect-a-qpushbutton-to-a-function", "title": "How to connect a QPushButton to a function", "body": "<p>I want to create a simple program with a PyQt GUI. For this I used Qt Designer, and I made a window with a push-button named <code>OpenImage</code>. Moreover, I have a file named <em>rony.py</em> that has a function <code>show</code>. So I want that when the user clicks the button, the image will appear.</p>\n\n<p>This is my code:</p>\n\n<pre><code>from PyQt4 import QtCore, QtGui\nimport rony\n\ntry:\n    _fromUtf8 = QtCore.QString.fromUtf8\nexcept AttributeError:\n    def _fromUtf8(s):\n        return s\n\ntry:\n    _encoding = QtGui.QApplication.UnicodeUTF8\n    def _translate(context, text, disambig):\n        return QtGui.QApplication.translate(context, text, disambig, _encoding)\nexcept AttributeError:\n    def _translate(context, text, disambig):\n        return QtGui.QApplication.translate(context, text, disambig)\n\nclass Ui_MainWindow(object):\n    def setupUi(self, MainWindow):\n        MainWindow.setObjectName(_fromUtf8(\"MainWindow\"))\n        MainWindow.resize(800, 600)\n        self.centralwidget = QtGui.QWidget(MainWindow)\n        self.centralwidget.setObjectName(_fromUtf8(\"centralwidget\"))\n        self.horizontalLayout = QtGui.QHBoxLayout(self.centralwidget)\n        self.horizontalLayout.setObjectName(_fromUtf8(\"horizontalLayout\"))\n        self.OpenImage = QtGui.QPushButton(self.centralwidget)\n        self.OpenImage.setObjectName(_fromUtf8(\"OpenImage\"))\n        self.horizontalLayout.addWidget(self.OpenImage)\n        MainWindow.setCentralWidget(self.centralwidget)\n        self.menubar = QtGui.QMenuBar(MainWindow)\n        self.menubar.setGeometry(QtCore.QRect(0, 0, 800, 21))\n        self.menubar.setObjectName(_fromUtf8(\"menubar\"))\n        MainWindow.setMenuBar(self.menubar)\n        self.statusbar = QtGui.QStatusBar(MainWindow)\n        self.statusbar.setObjectName(_fromUtf8(\"statusbar\"))\n        MainWindow.setStatusBar(self.statusbar)\n\n        self.retranslateUi(MainWindow)\n        QtCore.QMetaObject.connectSlotsByName(MainWindow)\n\n    def retranslateUi(self, MainWindow):\n        MainWindow.setWindowTitle(_translate(\"MainWindow\", \"MainWindow\", None))\n        self.OpenImage.setText(_translate(\"MainWindow\", \"PushButton\", None))\n\n\nOpenImage.connect(show()) # Why this line don't work\n\n\nif __name__ == \"__main__\":\n    import sys\n    app = QtGui.QApplication(sys.argv)\n    MainWindow = QtGui.QMainWindow()\n    ui = Ui_MainWindow()\n    ui.setupUi(MainWindow)\n    MainWindow.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>rony.py</p>\n\n<pre><code>from PIL import Image \nimg = Image.open(\"pipe.png\")\n\ndef show():\n    img.show()\n</code></pre>\n"}, {"tags": ["python", "python-antigravity"], "comments": [{"owner": {"reputation": 375, "user_id": 2571149, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BtmxW.jpg?s=128&g=1", "display_name": "Steven Walton", "link": "https://stackoverflow.com/users/2571149/steven-walton"}, "edited": false, "score": 0, "creation_date": 1473886175, "post_id": 39499348, "comment_id": 66316400, "body": "Using python2.7 my antigravity library uses http and it works fine."}, {"owner": {"user_type": "does_not_exist", "display_name": "user774340"}, "edited": false, "score": 0, "creation_date": 1473886200, "post_id": 39499348, "comment_id": 66316417, "body": "Works for me. Tried Python 2 and 3 on Ubuntu. Perhaps something wrong with your ISP?"}, {"owner": {"reputation": 505, "user_id": 5614968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k0EnI.png?s=128&g=1", "display_name": "kaartic", "link": "https://stackoverflow.com/users/5614968/kaartic"}, "edited": false, "score": 0, "creation_date": 1473992980, "post_id": 39499348, "comment_id": 66361361, "body": "@gecko You may right about that, because the network I am connected to uses Cyberoam to filter websites (and content maybe). I didn&#39;t know it would filter contents alone instead of filtering the websites completely. I should have thought of it before asking this question."}], "answers": [{"tags": [], "owner": {"reputation": 749, "user_id": 2856574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/293794ab1db354cbcb19bc681905110a?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Gugler", "link": "https://stackoverflow.com/users/2856574/sean-gugler"}, "is_accepted": true, "score": 4, "last_activity_date": 1473886666, "creation_date": 1473886666, "answer_id": 39499535, "question_id": 39499348, "link": "https://stackoverflow.com/questions/39499348/is-it-good-to-change-the-python-antigravity-library/39499535#39499535", "title": "Is it good to change the Python antigravity library", "body": "<p>Report it to the Python issue tracker. Its purpose is to get questions like \"will there be problems with backward compatibility\" into the view of the people best capable of making that determination. Even if they reject the change, the issue will be documented, in case a later review reverses that decision.</p>\n"}], "owner": {"reputation": 505, "user_id": 5614968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k0EnI.png?s=128&g=1", "display_name": "kaartic", "link": "https://stackoverflow.com/users/5614968/kaartic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 702, "favorite_count": 0, "accepted_answer_id": 39499535, "answer_count": 1, "score": 1, "last_activity_date": 1525376093, "creation_date": 1473885751, "last_edit_date": 1525376093, "question_id": 39499348, "link": "https://stackoverflow.com/questions/39499348/is-it-good-to-change-the-python-antigravity-library", "title": "Is it good to change the Python antigravity library", "body": "<p>I came across Python's antigravity library recently and got information about it from <a href=\"http://python-history.blogspot.com/2010/06/import-antigravity.html\" rel=\"nofollow\">this</a> post. I then tried <code>import antigravity</code> in the interpreter: it opened the URL of the xkcd comic as expected but did not display the image of the comic in that page.</p>\n\n<p>I then found that the comic did not show up because the URL in the antigravity library was a HTTP one and when I tried to load the page after changing the URL from <a href=\"http://xkcd.com/353/\" rel=\"nofollow\">http://xkcd.com/353/</a> to <a href=\"https://xkcd.com/353/\" rel=\"nofollow\">https://xkcd.com/353/</a> the image showed up.</p>\n\n<p>This made me think if this could be corrected. Is it good to report this as an issue in the Python code (or) change the following line in the antigravity library :</p>\n\n<pre><code>webbrowser.open(\"http://xkcd.com/353/\")\n</code></pre>\n\n<p>to</p>\n\n<pre><code>webbrowser.open(\"https://xkcd.com/353/\")\n</code></pre>\n\n<p>and submit as to their Issue tracker.</p>\n\n<p>What would be the consequences of the above change? Would it cause any backward compatibility issue?</p>\n\n<h2>Edit</h2>\n\n<p>Just for the Note. This problem has been fixed after filing an issue in the Python Bug Tracker. You may find the issue using <a href=\"https://bugs.python.org/issue28181\" rel=\"nofollow\">this link.</a></p>\n"}, {"tags": ["python", "algorithm"], "comments": [{"owner": {"reputation": 4758, "user_id": 1382869, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/a96J8.jpg?s=128&g=1", "display_name": "ngoldbaum", "link": "https://stackoverflow.com/users/1382869/ngoldbaum"}, "edited": false, "score": 3, "creation_date": 1473885623, "post_id": 39499275, "comment_id": 66316131, "body": "Can you edit your question to explain what a &quot;fully dividing sequence&quot; is."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 2, "creation_date": 1473885666, "post_id": 39499275, "comment_id": 66316151, "body": "Perhaps we&#39;re using different terminology, but I would disagree that <code>2 8 320</code> is a subsequence of <code>9 2 3 7 8 14 39 145 76 320</code>."}, {"owner": {"reputation": 21, "user_id": 6539416, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-x7DkKgOWTmM/AAAAAAAAAAI/AAAAAAAAAZs/vuGbg1FyhyY/photo.jpg?sz=128", "display_name": "Ujjwal Pawar", "link": "https://stackoverflow.com/users/6539416/ujjwal-pawar"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1473885783, "post_id": 39499275, "comment_id": 66316209, "body": "@JohnGordon 2 divides 8 ,8 divides 320 so 2,8,320"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1473885838, "post_id": 39499275, "comment_id": 66316236, "body": "@UjjwalPawar: a <i>subsequence</i> is a sequence of <i>consecutive</i> numbers. So <code>9, 2, 37</code> is a subsequence, but <code>2, 8, 320</code> is not because they are not adjacent."}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1473885902, "post_id": 39499275, "comment_id": 66316271, "body": "I have edited the question with the terminology he is using.. It can be found here: <a href=\"http://opc.iarcs.org.in/index.php/problems/DIVSEQ\" rel=\"nofollow noreferrer\">opc.iarcs.org.in/index.php/problems/DIVSEQ</a>"}, {"owner": {"reputation": 21, "user_id": 6539416, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-x7DkKgOWTmM/AAAAAAAAAAI/AAAAAAAAAZs/vuGbg1FyhyY/photo.jpg?sz=128", "display_name": "Ujjwal Pawar", "link": "https://stackoverflow.com/users/6539416/ujjwal-pawar"}, "edited": false, "score": 0, "creation_date": 1473885960, "post_id": 39499275, "comment_id": 66316304, "body": "read more here <a href=\"http://www.iarcs.org.in/inoi/contests/oct2004/Advanced-1.php\" rel=\"nofollow noreferrer\">iarcs.org.in/inoi/contests/oct2004/Advanced-1.php</a>"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 4, "creation_date": 1473886123, "post_id": 39499275, "comment_id": 66316374, "body": "Ah, turns out that <a href=\"https://en.wikipedia.org/wiki/Subsequence\" rel=\"nofollow noreferrer\">in mathematics a subsequence is any ordered sequence where some elements were dropped</a>, so the terminology is correct here."}, {"owner": {"reputation": 148466, "user_id": 2319407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98O16.jpg?s=128&g=1", "display_name": "Dmitry Bychenko", "link": "https://stackoverflow.com/users/2319407/dmitry-bychenko"}, "edited": false, "score": 1, "creation_date": 1473886190, "post_id": 39499275, "comment_id": 66316410, "body": "It sems that you&#39;re looking for directed graph diameter: numbers are <i>vertixes</i>, divides are edges (so <code>2</code> connected to <code>8</code>, <code>14</code>, <code>76</code> and <code>320</code>)"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1473886327, "post_id": 39499275, "comment_id": 66316477, "body": "Your <code>i</code> and <code>j</code> aren&#39;t quite the same as their <code>i</code> and <code>j</code>."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1473886396, "post_id": 39499275, "comment_id": 66316510, "body": "@user2357112 am I missing something? Yes it is."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1473886617, "post_id": 39499275, "comment_id": 66316619, "body": "I agree with Dmitry that graph theory is the way to go on this one. Iterate through each node and point it forward to everything it divides that&#39;s of a higher index, then traverse the tree depth-first from the beginning to find the longest branch."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 1, "creation_date": 1473887547, "post_id": 39499275, "comment_id": 66316996, "body": "@AdamSmith: Which is greater, <code>i</code> or <code>j</code>?"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1473888968, "post_id": 39499275, "comment_id": 66317557, "body": "@user2357112 ah ha, you&#39;re right. Good call"}], "answers": [{"comments": [{"owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "reply_to_user": {"reputation": 21, "user_id": 6539416, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-x7DkKgOWTmM/AAAAAAAAAAI/AAAAAAAAAZs/vuGbg1FyhyY/photo.jpg?sz=128", "display_name": "Ujjwal Pawar", "link": "https://stackoverflow.com/users/6539416/ujjwal-pawar"}, "edited": false, "score": 0, "creation_date": 1473919719, "post_id": 39499582, "comment_id": 66325287, "body": "Ehm, I did not say <i>add one more</i> condition. Please read again. The last phrase is the explanation of your error."}], "tags": [], "owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "is_accepted": false, "score": 3, "last_activity_date": 1473886874, "creation_date": 1473886874, "answer_id": 39499582, "question_id": 39499275, "link": "https://stackoverflow.com/questions/39499275/what-is-the-wrong-with-my-dividing-sequences-code/39499582#39499582", "title": "what is the wrong with my Dividing Sequences code", "body": "<p>As <code>j &lt; i</code>, you need to check whether <code>a[j]</code> is a divider of <code>a[i]</code>, not vice versa. So this means you need to put this condition (and <em>only</em> this one, not combined with the inverse):</p>\n\n<pre><code>        if (ar[i]%ar[j]==0):\n</code></pre>\n\n<p>With this change the output for the given sample data is 3.</p>\n\n<p>The confusion comes from the definition, in which <code>i &lt; j</code>, while in your code <code>j &lt; i</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": false, "score": 0, "last_activity_date": 1473899108, "last_edit_date": 1473899108, "creation_date": 1473893433, "answer_id": 39500806, "question_id": 39499275, "link": "https://stackoverflow.com/questions/39499275/what-is-the-wrong-with-my-dividing-sequences-code/39500806#39500806", "title": "what is the wrong with my Dividing Sequences code", "body": "<p>For the graph theory solution I alluded to in a comment:</p>\n\n<pre><code>class Node(object):\n    def __init__(self, x):\n        self.x = x\n        self.children = []\n\n    def add_child(self, child_x):\n        # Not actually used here, but a useful alternate constructor!\n        new = self.__class__(child_x)\n        self.children.append(new)\n        return new\n\n    def how_deep(self):\n        \"\"\"Does a DFS to return how deep the deepest branch goes.\"\"\"\n\n        maxdepth = 1\n        for child in self.children:\n            maxdepth = max(maxdepth, child.how_deep()+1)\n        return maxdepth\n\nnums = [9, 2, 3, 7, 8, 14, 39, 145, 76, 320]\nnodes = [Node(num) for num in nums]\nfor i,node in enumerate(nodes):\n    for other in nodes[i:]:\n        if other.x % node.x == 0:\n            node.children.append(other)\n# graph built, rooted at nodes[0]\n\nresult = max([n.how_deep() for n in nodes])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 57, "user_id": 6505273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c58c3a540f72abb0dde8f3055ce073e?s=128&d=identicon&r=PG&f=1", "display_name": "PARTH SURESH", "link": "https://stackoverflow.com/users/6505273/parth-suresh"}, "is_accepted": false, "score": 3, "last_activity_date": 1474032362, "creation_date": 1474032362, "answer_id": 39532670, "question_id": 39499275, "link": "https://stackoverflow.com/questions/39499275/what-is-the-wrong-with-my-dividing-sequences-code/39532670#39532670", "title": "what is the wrong with my Dividing Sequences code", "body": "<p>This solves your problem without using any recursion :) </p>\n\n<pre><code>n = int(input())\nar = []\nbestvals = []\nbest_stored = []\nfor x in range(n):\n  ar.append(int(input()))\n  best_stored.append(0)\n\nbest_stored[0] = 1\n\nfor i in range(n):\n  maxval = 1\n  for j in range(i):\n    if ar[i] % ar[j] == 0:\n      maxval = max(maxval,(best_stored[j])+1)\n  best_stored[i] = maxval\n\nprint(max(best_stored))\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6539416, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-x7DkKgOWTmM/AAAAAAAAAAI/AAAAAAAAAZs/vuGbg1FyhyY/photo.jpg?sz=128", "display_name": "Ujjwal Pawar", "link": "https://stackoverflow.com/users/6539416/ujjwal-pawar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4206, "favorite_count": 3, "answer_count": 3, "score": 0, "last_activity_date": 1474032362, "creation_date": 1473885457, "last_edit_date": 1592644375, "question_id": 39499275, "link": "https://stackoverflow.com/questions/39499275/what-is-the-wrong-with-my-dividing-sequences-code", "title": "what is the wrong with my Dividing Sequences code", "body": "<p>I am trying to code this problem:</p>\n<blockquote>\n<p>This problem is about sequences of positive integers a1,a2,...,aN. A\nsubsequence of a sequence is anything obtained by dropping some of the\nelements. For example, 3,7,11,3 is a subsequence of\n6,3,11,5,7,4,3,11,5,3 , but 3,3,7 is not a subsequence of\n6,3,11,5,7,4,3,11,5,3 .</p>\n<p>Given a sequence of integers your aim is to find the length of the longest fully dividing subsequence of this sequence.</p>\n<p>A fully dividing sequence is a sequence a1,a2,...,aN where ai divides\naj whenever i &lt; j. For example, 3, 15, 60, 720 is a fully dividing\nsequence.</p>\n</blockquote>\n<p>My code is:</p>\n<pre><code>n=input()\nar=[]\n\ntemp=0\nfor i in range (0,n):\n    temp=input()\n    ar.append(temp)\n\ndef best(i):\n    if i==0:\n        return (1)\n    else:\n        ans =1\n        for j in range (0,i):\n            if (ar[j]%ar[i]==0):\n\n                ans=max(ans,(best(j)+1))\n         return (ans)\nan=[]\nfor i in range (0,n):\n   temp=best(i)\n   an.append(temp)\n\nprint max(an)\n</code></pre>\n<p>the input was</p>\n<pre><code>9\n2 \n3 \n7 \n8 \n14 \n39 \n145 \n76 \n320\n</code></pre>\n<p>and I should get 3 (because of 2, 8, 320) as output but I am getting 1</p>\n"}, {"tags": ["python", "file-writing", "ioerror"], "comments": [{"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 2, "creation_date": 1473885372, "post_id": 39499233, "comment_id": 66315999, "body": "<code>sudo python myscript.py</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1473885457, "post_id": 39499233, "comment_id": 66316036, "body": "you mean you run it as Rob wrote? if so can you print the real exception <code>except IOError as e:   sys.stderr.write(&#39;Error: Failed to open file %s: %s&#39; % (filename,str(e)))</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1642, "user_id": 1776131, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3720f50816f0c58735cfbb328fbaab3d?s=128&d=identicon&r=PG", "display_name": "Matt Olan", "link": "https://stackoverflow.com/users/1776131/matt-olan"}, "is_accepted": false, "score": 1, "last_activity_date": 1473885667, "creation_date": 1473885667, "answer_id": 39499327, "question_id": 39499233, "link": "https://stackoverflow.com/questions/39499233/write-to-a-file-with-sudo-privileges-in-python/39499327#39499327", "title": "Write to a file with sudo privileges in Python", "body": "<p>Your script is limited to the permissions it is run with as you cannot change users without already having root privileges.</p>\n\n<p>As Rob said, the only way to do this without changing your file permissions is to run with <code>sudo</code>.</p>\n\n<pre><code>sudo python ./your_file.py\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 413, "user_id": 2128530, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/dCH5m.jpg?s=128&g=1", "display_name": "Peter Henry", "link": "https://stackoverflow.com/users/2128530/peter-henry"}, "edited": false, "score": 0, "creation_date": 1503945039, "post_id": 39499692, "comment_id": 78809206, "body": "I get a syntax error running your example; I&#39;m pretty sure star argument expansion only works in function calls and this is trying to use it in a list.  You could use a list concatenation instead.  See <a href=\"https://stackoverflow.com/a/45925254/2128530\">my answer</a> for more detail."}, {"owner": {"reputation": 23605, "user_id": 1016216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xF5Ew.png?s=128&g=1", "display_name": "L3viathan", "link": "https://stackoverflow.com/users/1016216/l3viathan"}, "reply_to_user": {"reputation": 413, "user_id": 2128530, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/dCH5m.jpg?s=128&g=1", "display_name": "Peter Henry", "link": "https://stackoverflow.com/users/2128530/peter-henry"}, "edited": false, "score": 0, "creation_date": 1503945500, "post_id": 39499692, "comment_id": 78809386, "body": "@PeterHenry You&#39;re using an outdated version of Python, this is <a href=\"https://www.python.org/dev/peps/pep-0448/\" rel=\"nofollow noreferrer\">PEP 448</a>."}, {"owner": {"reputation": 413, "user_id": 2128530, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/dCH5m.jpg?s=128&g=1", "display_name": "Peter Henry", "link": "https://stackoverflow.com/users/2128530/peter-henry"}, "edited": false, "score": 2, "creation_date": 1503945910, "post_id": 39499692, "comment_id": 78809583, "body": "My mistake; I&#39;m currently working on Python 2.7 project and got my virtual environments mixed up.  Thought I was on Python 3.  I&#39;ll amend my answer as a Python 2.7 compatible solution."}], "tags": [], "owner": {"reputation": 23605, "user_id": 1016216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xF5Ew.png?s=128&g=1", "display_name": "L3viathan", "link": "https://stackoverflow.com/users/1016216/l3viathan"}, "is_accepted": false, "score": 17, "last_activity_date": 1560758215, "last_edit_date": 1560758215, "creation_date": 1473887453, "answer_id": 39499692, "question_id": 39499233, "link": "https://stackoverflow.com/questions/39499233/write-to-a-file-with-sudo-privileges-in-python/39499692#39499692", "title": "Write to a file with sudo privileges in Python", "body": "<p>You have a few options:</p>\n\n<ul>\n<li>Run your script as root or with sudo</li>\n<li>Set the setuid bit and have root own the script (although on many systems this won't work with scripts, and then the script will be callable by anyone)</li>\n<li>Detect that you're not running as root (<code>os.geteuid() != 0</code>), then call yourself with <code>sudo</code> infront (which will ask the user to enter their password) and exit:</li>\n</ul>\n\n<p>\u200c</p>\n\n<pre><code>import os\nimport sys\nimport subprocess\n\nif os.geteuid() == 0:\n    print(\"We're root!\")\nelse:\n    print(\"We're not root.\")\n    subprocess.call(['sudo', 'python3', *sys.argv])\n    sys.exit()\n</code></pre>\n\n<p>Calling it looks like this:</p>\n\n<pre><code>$ python3 be_root.py\nWe're not root.\nPassword:\nWe're root!\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 341, "user_id": 1982032, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/20b10ce0ff1755b449c3b9f14c1f20ca?s=128&d=identicon&r=PG", "display_name": "showkey", "link": "https://stackoverflow.com/users/1982032/showkey"}, "edited": false, "score": 0, "creation_date": 1586333817, "post_id": 39499718, "comment_id": 108087157, "body": "It is <code>subprocess.check_output(&#39;whoami&#39;).strip() == b&#39;root&#39;</code> in my python3.5."}], "tags": [], "owner": {"reputation": 2131, "user_id": 170614, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/1f64273231cd75987e60ac881e64524e?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/170614/adam"}, "is_accepted": false, "score": 2, "last_activity_date": 1473887563, "creation_date": 1473887563, "answer_id": 39499718, "question_id": 39499233, "link": "https://stackoverflow.com/questions/39499233/write-to-a-file-with-sudo-privileges-in-python/39499718#39499718", "title": "Write to a file with sudo privileges in Python", "body": "<p>Having possibility to using <code>sudo</code> don't give you any privileges if you don't actually use it. So as other guys suggested you probably should just start your program with use of <code>sudo</code>. But if you don't like this idea (I don't see any reason for that) you can do other trick.</p>\n\n<p>Your script can check if is run with root privileges or if it work only with user privileges. Than script can actually run itself with higher privileges. Here you have an example (please note that storing password in source code isn't a good idea). </p>\n\n<pre><code>import os.path\nimport subprocess\n\npassword_for_sudo = 'pass'\n\ndef started_as_root():\n    if subprocess.check_output('whoami').strip() == 'root':\n        return True\n    return False\n\ndef runing_with_root_privileges():\n    print 'I have the power!'\n\ndef main():\n    if started_as_root():\n        print 'OK, I have root privileges. Calling the function...'\n        runing_with_root_privileges()\n    else:\n        print \"I'm just a user. Need to start new process with root privileges...\"\n        current_script = os.path.realpath(__file__)\n        os.system('echo %s|sudo -S python %s' % (password_for_sudo, current_script))\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ python test.py\nI'm just a user. Need to start new process with root privileges...\nOK, I have root privileges. Calling the function...\nI have the power!\n\n$ sudo python test.py\nOK, I have root privileges.\nCalling the function...\nI have the power!\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 7746217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03236b1115fb2bfd5dcef90cc7854b61?s=128&d=identicon&r=PG&f=1", "display_name": "portusato", "link": "https://stackoverflow.com/users/7746217/portusato"}, "is_accepted": false, "score": 1, "last_activity_date": 1494252098, "last_edit_date": 1494252098, "creation_date": 1494249287, "answer_id": 43848681, "question_id": 39499233, "link": "https://stackoverflow.com/questions/39499233/write-to-a-file-with-sudo-privileges-in-python/43848681#43848681", "title": "Write to a file with sudo privileges in Python", "body": "<p>I like L3viathan's reply. I'd add a fourth option: Use subprocess.Popen() to execute an sh command to write the file. Something like <code>subprocess.Popen('sudo echo \\'{}\\' &gt; {}'.format(new_line, filename))</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 23605, "user_id": 1016216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xF5Ew.png?s=128&g=1", "display_name": "L3viathan", "link": "https://stackoverflow.com/users/1016216/l3viathan"}, "edited": false, "score": 1, "creation_date": 1503945723, "post_id": 45925254, "comment_id": 78809476, "body": "My code does not have a syntax error, it just <a href=\"https://www.python.org/dev/peps/pep-0448/\" rel=\"nofollow noreferrer\">requires Python 3.5</a>."}, {"owner": {"reputation": 413, "user_id": 2128530, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/dCH5m.jpg?s=128&g=1", "display_name": "Peter Henry", "link": "https://stackoverflow.com/users/2128530/peter-henry"}, "reply_to_user": {"reputation": 23605, "user_id": 1016216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xF5Ew.png?s=128&g=1", "display_name": "L3viathan", "link": "https://stackoverflow.com/users/1016216/l3viathan"}, "edited": false, "score": 0, "creation_date": 1503947515, "post_id": 45925254, "comment_id": 78810350, "body": "@L3viathan updated my answer to reflect that.  Cheers!"}], "tags": [], "owner": {"reputation": 413, "user_id": 2128530, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/dCH5m.jpg?s=128&g=1", "display_name": "Peter Henry", "link": "https://stackoverflow.com/users/2128530/peter-henry"}, "is_accepted": false, "score": 9, "last_activity_date": 1503947430, "last_edit_date": 1503947430, "creation_date": 1503944827, "answer_id": 45925254, "question_id": 39499233, "link": "https://stackoverflow.com/questions/39499233/write-to-a-file-with-sudo-privileges-in-python/45925254#45925254", "title": "Write to a file with sudo privileges in Python", "body": "<h2>TL;DR:</h2>\n\n<p><a href=\"https://stackoverflow.com/a/39499692/2128530\">L3viathan's reply</a> <s>has a SynaxError</s> Edit: works fine on Python 3.5+.  Here is a version for Python 3.4.3 (distributed by default on Ubuntu 16.04) and below:</p>\n\n<pre><code>if os.geteuid() == 0:\n    # do root things\nelse:\n    subprocess.call(['sudo', 'python3'] + sys.argv)  # modified\n</code></pre>\n\n<p>However, I went with a different approach because it made the code around it simpler in my use case:</p>\n\n<pre><code>if os.geteuid() != 0:\n    os.execvp('sudo', ['sudo', 'python3'] + sys.argv)\n# do root things\n</code></pre>\n\n<h2>Explaination</h2>\n\n<p><a href=\"https://stackoverflow.com/a/39499692/2128530\">L3viathan's reply</a> depends on <a href=\"https://www.python.org/dev/peps/pep-0448/\" rel=\"noreferrer\">PEP 448</a>, which was included in Python 3.5 and introduced additional contexts where star argument expansion is permitted.  For Python 3.4 and below, list concatenation can be used to do the same thing:</p>\n\n<pre><code>import os\nimport sys\nimport subprocess\n\nif os.geteuid() == 0:\n    print(\"We're root!\")\nelse:\n    print(\"We're not root.\")\n    subprocess.call(['sudo', 'python3'] + sys.argv)  # modified\n</code></pre>\n\n<p>But <em>note:</em> <code>subprocess.call()</code> launches a child process, meaning after root finishes running the script, the original user will continue running their script as well.  This means you need to put the elevated logic into one side of an <code>if/else</code> block so when the original script finishes, it doesn't try to run any of the logic that requires elevation (L3viathan's example does this).</p>\n\n<p>This isn't necessarily a bad thing - it means both normal/elevated logic can be written in the same script and separated nicely - but my task required root for all the logic.  I didn't want to waste an indentation level if the other block was going to be empty, and I hadn't realized how using a child process would affect things, so I tried this:</p>\n\n<pre><code>import os\nimport sys\nimport subprocess\n\nif os.geteuid() != 0:\n    subprocess.call(['sudo', 'python3'] + sys.argv)\n\n# do things that require root\n</code></pre>\n\n<p>...and it broke of course, because after root was done, the regular user resumed execution of its script and tried to run the statements that required root.</p>\n\n<p>Then I found <a href=\"https://gist.github.com/davejamesmiller/1965559\" rel=\"noreferrer\">this Gist</a> recommending <code>os.execvp()</code> - which replaces the running process instead of launching a child:</p>\n\n<pre><code>import os\nimport sys\n\nif os.geteuid() != 0:\n    os.execvp('sudo', ['sudo', 'python3'] + sys.argv)  # final version\n\n# do things that require root\n</code></pre>\n\n<p>This appears to behave as expected, saves an indentation level and 3 lines of code.</p>\n\n<p>Caveat: I didn't know about <code>os.execvp()</code> ten minutes ago, and don't know anything yet about possible pitfalls or subtleties around its usage.  YMMV.</p>\n"}, {"tags": [], "owner": {"reputation": 11191, "user_id": 310399, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d187650935da258c633a3a0742985891?s=128&d=identicon&r=PG", "display_name": "JS.", "link": "https://stackoverflow.com/users/310399/js"}, "is_accepted": false, "score": 1, "last_activity_date": 1595517351, "creation_date": 1595517351, "answer_id": 63057549, "question_id": 39499233, "link": "https://stackoverflow.com/questions/39499233/write-to-a-file-with-sudo-privileges-in-python/63057549#63057549", "title": "Write to a file with sudo privileges in Python", "body": "<p>Another option is to write the file to a directory you have access to, then <code>sudo mv</code> the file to the directory you don't have access to.</p>\n"}], "owner": {"reputation": 795, "user_id": 2824889, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/be79dc946db8bf0e9b19aba1e49e12c6?s=128&d=identicon&r=PG&f=1", "display_name": "user2824889", "link": "https://stackoverflow.com/users/2824889/user2824889"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27659, "favorite_count": 3, "answer_count": 6, "score": 14, "last_activity_date": 1595517351, "creation_date": 1473885294, "question_id": 39499233, "link": "https://stackoverflow.com/questions/39499233/write-to-a-file-with-sudo-privileges-in-python", "title": "Write to a file with sudo privileges in Python", "body": "<p>The following code throws an error if it's run by a non-root user for a file owned by root, even when the non-root user has sudo privileges:</p>\n\n<pre><code>try:\n  f = open(filename, \"w+\")\nexcept IOError:\n  sys.stderr.write('Error: Failed to open file %s' % (filename))\nf.write(response + \"\\n\" + new_line)\nf.close()\n</code></pre>\n\n<p>Is there a way to run <code>open(filename, \"w+\")</code> with sudo privileges, or an alternative function that does this?</p>\n"}, {"tags": ["python", "numpy", "genfromtxt"], "answers": [{"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 2, "last_activity_date": 1473890249, "last_edit_date": 1473890249, "creation_date": 1473889788, "answer_id": 39500178, "question_id": 39499231, "link": "https://stackoverflow.com/questions/39499231/numpy-genfromtxt-valueerror-line-got-n-columns-instead-of-m/39500178#39500178", "title": "numpy.genfromtxt- ValueError- Line # (got n columns instead of m)", "body": "<p>Looks like you've already read <code>genfromtxt</code> about missing values.  Does it say anything about the use of delimiters?</p>\n\n<p>I think it can handle missing values with lines like</p>\n\n<pre><code>'one, 1, 234.4, , ,'\n'two, 3, , 4, 5'\n</code></pre>\n\n<p>but when the delimiter is the default 'white-space' it can't.  One of the first steps after reading a line is</p>\n\n<pre><code> strings = line.split(delimiter)\n</code></pre>\n\n<p>And objects if <code>len(strings)</code> doesn't match with the initial target.  Apparently it does not try to guess that you want to pad the line with <code>n-len(strings)</code> missing values.</p>\n\n<p>Options that come to mind:</p>\n\n<ul>\n<li><p>try Pandas; it may make more effort to guess your intentions</p></li>\n<li><p>write your own reader.  Pandas is compiled; <code>genfromtxt</code> is plain numpy Python.  It reads the file line by line, splits and converts fields, and appends the list to a master list.  It converts that list of lists into array at the end.  Your own reader should be just as efficient.</p></li>\n<li><p>preprocess your file to add the missing values or change the delimiter.  <code>genfromtxt</code> accepts anything that feeds it lines.  So it works with a list of strings, a file reader that yields modified lines, etc.  This may be simplest.</p>\n\n<p>def foo(astr):\n    strs=astr.split()\n    if len(strs)&lt;6:\n        strs.extend([b' ']*(6-len(strs)))\n    return b','.join(strs)</p></li>\n</ul>\n\n<p>Simulating with a list of strings (in Py3):</p>\n\n<pre><code>In [139]: txt=b\"\"\"14        HO2       O3        OH        O2        O2\n     ...: 15        HO2       HO2       H2O2      O2\n     ...: 16        H2O2      OH        HO2       H2O\n     ...: 17        O         O         O2\n     ...: 18        O         O2        O3\n     ...: 19        O         O3        O2        O2\"\"\".splitlines()\n\nIn [140]: [foo(l) for l in txt]\nOut[140]: \n[b'14,HO2,O3,OH,O2,O2',\n b'15,HO2,HO2,H2O2,O2, ',\n b'16,H2O2,OH,HO2,H2O, ',\n b'17,O,O,O2, , ',\n b'18,O,O2,O3, , ',\n b'19,O,O3,O2,O2, ']\n\nIn [141]: np.genfromtxt([foo(l) for l in txt], dtype=None, delimiter=',')\nOut[141]: \narray([(14, b'HO2', b'O3', b'OH', b'O2', b'O2'),\n       (15, b'HO2', b'HO2', b'H2O2', b'O2', b''),\n       (16, b'H2O2', b'OH', b'HO2', b'H2O', b''),\n       (17, b'O', b'O', b'O2', b' ', b''),\n       (18, b'O', b'O2', b'O3', b' ', b''),\n       (19, b'O', b'O3', b'O2', b'O2', b'')], \n      dtype=[('f0', '&lt;i4'), ('f1', 'S4'), ('f2', 'S3'), ('f3', 'S4'), ('f4', 'S3'), ('f5', 'S2')])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "is_accepted": false, "score": 0, "last_activity_date": 1473907533, "creation_date": 1473907533, "answer_id": 39502405, "question_id": 39499231, "link": "https://stackoverflow.com/questions/39499231/numpy-genfromtxt-valueerror-line-got-n-columns-instead-of-m/39502405#39502405", "title": "numpy.genfromtxt- ValueError- Line # (got n columns instead of m)", "body": "<p>It looks like your data is nicely aligned in fields of exactly 10 characters.  If that is always the case, you can tell <code>genfromtxt</code> the field widths to use by specifying the sequence of field widths in the <code>delimiter</code> argument.</p>\n\n<p>Here's an example.</p>\n\n<p>First, your data file:</p>\n\n<pre><code>In [20]: !cat reaction.dat\n14        HO2       O3        OH        O2        O2\n15        HO2       HO2       H2O2      O2\n16        H2O2      OH        HO2       H2O\n17        O         O         O2\n18        O         O2        O3\n19        O         O3        O2        O2\n</code></pre>\n\n<p>For convenience, I'll define the number of fields and the field width here. (In general, it is not necessary that all the fields have the same width.)</p>\n\n<pre><code>In [21]: numfields = 6\n\nIn [22]: fieldwidth = 10\n</code></pre>\n\n<p>Tell <code>genfromtxt</code> that the data is in fixed width columns by passing in the argument <code>delimiter=(10, 10, 10, 10, 10, 10)</code>:</p>\n\n<pre><code>In [23]: data = genfromtxt('reaction.dat', dtype='S%d' % fieldwidth, delimiter=(fieldwidth,)*numfields)\n</code></pre>\n\n<p>Here's the result.  Note that \"missing\" fields are empty strings.  Also note that non-empty fields include the white space, and the last non-empty field in each row includes the newline character:</p>\n\n<pre><code>In [24]: data\nOut[24]: \narray([[b'14        ', b'HO2       ', b'O3        ', b'OH        ',\n        b'O2        ', b'O2\\n'],\n       [b'15        ', b'HO2       ', b'HO2       ', b'H2O2      ',\n        b'O2\\n', b''],\n       [b'16        ', b'H2O2      ', b'OH        ', b'HO2       ',\n        b'H2O\\n', b''],\n       [b'17        ', b'O         ', b'O         ', b'O2\\n', b'', b''],\n       [b'18        ', b'O         ', b'O2        ', b'O3\\n', b'', b''],\n       [b'19        ', b'O         ', b'O3        ', b'O2        ',\n        b'O2\\n', b'']], \n      dtype='|S10')\n\nIn [25]: data[1]\nOut[25]: \narray([b'15        ', b'HO2       ', b'HO2       ', b'H2O2      ', b'O2\\n',\n       b''], \n      dtype='|S10')\n</code></pre>\n\n<p>We could clean up the strings in a second step, or we can have <code>genfromtxt</code> do it by providing a converter for each field that simply strips the white space from the field:</p>\n\n<pre><code>In [26]: data = genfromtxt('reaction.dat', dtype='S%d' % fieldwidth, delimiter=(fieldwidth,)*numfields, converters={k: lambda s: s.\n    ...: strip() for k in range(numfields)})\n\nIn [27]: data\nOut[27]: \narray([[b'14', b'HO2', b'O3', b'OH', b'O2', b'O2'],\n       [b'15', b'HO2', b'HO2', b'H2O2', b'O2', b''],\n       [b'16', b'H2O2', b'OH', b'HO2', b'H2O', b''],\n       [b'17', b'O', b'O', b'O2', b'', b''],\n       [b'18', b'O', b'O2', b'O3', b'', b''],\n       [b'19', b'O', b'O3', b'O2', b'O2', b'']], \n      dtype='|S10')\n\nIn [28]: data[:,0]\nOut[28]: \narray([b'14', b'15', b'16', b'17', b'18', b'19'], \n      dtype='|S10')\n\nIn [29]: data[:,5]\nOut[29]: \narray([b'O2', b'', b'', b'', b'', b''], \n      dtype='|S10')\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 6832623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e68c9e13439737a85ff2569b9c26f6f?s=128&d=identicon&r=PG&f=1", "display_name": "Tessa", "link": "https://stackoverflow.com/users/6832623/tessa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2263, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1473907533, "creation_date": 1473885290, "question_id": 39499231, "link": "https://stackoverflow.com/questions/39499231/numpy-genfromtxt-valueerror-line-got-n-columns-instead-of-m", "title": "numpy.genfromtxt- ValueError- Line # (got n columns instead of m)", "body": "<p>So, I've been writing up code to read in a dataset from a file and separate it out for analysis.  </p>\n\n<p>The data in question is read from a .dat file, and looks like this:</p>\n\n<pre><code>14        HO2       O3        OH        O2        O2\n15        HO2       HO2       H2O2      O2\n16        H2O2      OH        HO2       H2O\n17        O         O         O2\n18        O         O2        O3\n19        O         O3        O2        O2\n</code></pre>\n\n<p>The code I've written looks like this:</p>\n\n<pre><code>edge_data=np.genfromtxt('Early_earth_reaction.dat', dtype = str, \nmissing_values=True, filling_values=bool)\n</code></pre>\n\n<p>The plan was that I'd then run the values from the dataset and build a paired list from them.</p>\n\n<pre><code>edge_list=[]\nfor i in range(360):\n    edge_list.append((edge_data[i,0],edge_data[i,2]))\n    edge_list.append((edge_data[i,1],edge_data[i,2]))\n    print edge_data[i,0]\n    if edge_data[i,3] != None:\n        edge_list.append((edge_data[i,0],edge_data[i,3]))\n        edge_list.append((edge_data[i,1],edge_data[i,3]))\n    if edge_data[i,4]!= None:\n        edge_list.append((edge_data[i,0],edge_data[i,4]))\n        edge_list.append((edge_data[i,1,edge_data[i,4]))\n</code></pre>\n\n<p>However, upon running it, I get the error message </p>\n\n<pre><code>File \"read_early_earth.py\", line 52, in main\nedge_data=np.genfromtxt('Early_earth_reaction.dat', dtype = str,  \nusecols=(1,2,3,4,5), missing_values=True, filling_values=bool)\nFile \"/usr/lib/python2.7/dist-packages/numpy/lib/npyio.py\", line 1667, \nin genfromtxt\nraise ValueError(errmsg)\nValueError: Some errors were detected !\nLine #6 (got 4 columns instead of 5)\nLine #14 (got 6 columns instead of 5)\nLine #17 (got 4 columns instead of 5)\n</code></pre>\n\n<p>And so on and so forth. As far as I can tell, this is happening because there are rows where not all the columns have values in them, which apparently throws numpy for a loop.  </p>\n\n<p>Is there a work-around for this in numpy?  Alternatively, is there another way to accomplish this task?  I know, worse comes to worse, I can torture some regular expressions into doing the job, but I'd prefer a method that's a bit more efficient if at all possible.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "plot", "plotly", "roc"], "comments": [{"owner": {"reputation": 1470, "user_id": 4374531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ecc0fcbd63c8e0a55d0c4048c7fb426?s=128&d=identicon&r=PG&f=1", "display_name": "v.coder", "link": "https://stackoverflow.com/users/4374531/v-coder"}, "edited": false, "score": 0, "creation_date": 1473885267, "post_id": 39499173, "comment_id": 66315952, "body": "when you write <code>lines</code> in mode it is going to plot the lines even if the points are sparse. it will join the points."}, {"owner": {"reputation": 1470, "user_id": 4374531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ecc0fcbd63c8e0a55d0c4048c7fb426?s=128&d=identicon&r=PG&f=1", "display_name": "v.coder", "link": "https://stackoverflow.com/users/4374531/v-coder"}, "edited": false, "score": 0, "creation_date": 1473885313, "post_id": 39499173, "comment_id": 66315977, "body": "just try <code>mode=markers</code> for the non-sparse dataset"}, {"owner": {"reputation": 917, "user_id": 5759063, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh3.googleusercontent.com/-1eAgvsus1Fk/AAAAAAAAAAI/AAAAAAAAAGw/i5CaZxtNOug/photo.jpg?sz=128", "display_name": "Sreejith Menon", "link": "https://stackoverflow.com/users/5759063/sreejith-menon"}, "reply_to_user": {"reputation": 1470, "user_id": 4374531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ecc0fcbd63c8e0a55d0c4048c7fb426?s=128&d=identicon&r=PG&f=1", "display_name": "v.coder", "link": "https://stackoverflow.com/users/4374531/v-coder"}, "edited": false, "score": 0, "creation_date": 1473885473, "post_id": 39499173, "comment_id": 66316053, "body": "I need a line, can I not change the line style in any way? I am looking at <a href=\"https://plot.ly/python/shapes/\" rel=\"nofollow noreferrer\">Plotly shapes</a> and the first example in it, is there a similar thing I can achieve?"}, {"owner": {"reputation": 1470, "user_id": 4374531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ecc0fcbd63c8e0a55d0c4048c7fb426?s=128&d=identicon&r=PG&f=1", "display_name": "v.coder", "link": "https://stackoverflow.com/users/4374531/v-coder"}, "edited": false, "score": 0, "creation_date": 1473885613, "post_id": 39499173, "comment_id": 66316121, "body": "Yes, to plot a line just say <code>mode=lines</code>"}, {"owner": {"reputation": 917, "user_id": 5759063, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh3.googleusercontent.com/-1eAgvsus1Fk/AAAAAAAAAAI/AAAAAAAAAGw/i5CaZxtNOug/photo.jpg?sz=128", "display_name": "Sreejith Menon", "link": "https://stackoverflow.com/users/5759063/sreejith-menon"}, "reply_to_user": {"reputation": 1470, "user_id": 4374531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ecc0fcbd63c8e0a55d0c4048c7fb426?s=128&d=identicon&r=PG&f=1", "display_name": "v.coder", "link": "https://stackoverflow.com/users/4374531/v-coder"}, "edited": false, "score": 1, "creation_date": 1473885692, "post_id": 39499173, "comment_id": 66316163, "body": "I found the solution on <a href=\"https://plot.ly/python/line-charts/\" rel=\"nofollow noreferrer\">Plotly line graphs</a>. Thank you. A Eureka moment for me! :)"}, {"owner": {"reputation": 1470, "user_id": 4374531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ecc0fcbd63c8e0a55d0c4048c7fb426?s=128&d=identicon&r=PG&f=1", "display_name": "v.coder", "link": "https://stackoverflow.com/users/4374531/v-coder"}, "edited": false, "score": 0, "creation_date": 1473946316, "post_id": 39499173, "comment_id": 66340655, "body": "Please update the question with details of solution and close the question so that the wider community knows that the problem has been resolved."}], "answers": [{"tags": [], "owner": {"reputation": 1470, "user_id": 4374531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ecc0fcbd63c8e0a55d0c4048c7fb426?s=128&d=identicon&r=PG&f=1", "display_name": "v.coder", "link": "https://stackoverflow.com/users/4374531/v-coder"}, "is_accepted": false, "score": 0, "last_activity_date": 1473885572, "creation_date": 1473885572, "answer_id": 39499306, "question_id": 39499173, "link": "https://stackoverflow.com/questions/39499173/plotly-changing-the-line-styles/39499306#39499306", "title": "plotly - changing the line styles", "body": "<p>It is because the plotly, plots the data based on the mode which you ask it to do. If you say <code>mode=markers</code> it is going to plot just the markers. If you say <code>mode=lines</code> it is going the join all the points in the data and plot it as lines.</p>\n\n<p>Please see this page <a href=\"https://plot.ly/python/line-and-scatter/#line-and-scatter-plots\" rel=\"nofollow\">https://plot.ly/python/line-and-scatter/#line-and-scatter-plots</a> for more examples of lines that can be plotted using plotly. </p>\n"}], "owner": {"reputation": 917, "user_id": 5759063, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh3.googleusercontent.com/-1eAgvsus1Fk/AAAAAAAAAAI/AAAAAAAAAGw/i5CaZxtNOug/photo.jpg?sz=128", "display_name": "Sreejith Menon", "link": "https://stackoverflow.com/users/5759063/sreejith-menon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2295, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1602484306, "creation_date": 1473885094, "question_id": 39499173, "link": "https://stackoverflow.com/questions/39499173/plotly-changing-the-line-styles", "title": "plotly - changing the line styles", "body": "<p>I am trying to plot multiple yet related things on a plotly graph. </p>\n\n<p>I want to differentiate and relate the lines at the same time. To make myself more clearer, I am plotting ROC characteristics of the classifiers that I trained. I want a particular classifier of the same color but different line styles for the method of training.</p>\n\n<p>I currently use this to fulfill my requirement:\n<a href=\"https://i.stack.imgur.com/yqGq9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yqGq9.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is the code for the same,</p>\n\n<pre><code>    data = [\n        go.Scatter(\n            mode='lines+markers',\n            x=df_LogisticRegression['FPR'], # assign x as the dataframe column 'x'\n            y=df_LogisticRegression['TPR'],\n            name = \"Logistic Regression all attributes\",\n            marker=dict(\n                color=\"blue\",\n                symbol='square'\n            ),\n        ),\n        # and so on for all other algos\n        go.Scatter(\n            mode='lines+markers',\n            x=df_LogisticRegression_nonSP['FPR'], # assign x as the dataframe column 'x'\n            y=df_LogisticRegression_nonSP['TPR'],\n            name = \"Logistic Regression non-sparse attributes\",\n            marker=dict(\n                color=\"blue\",\n                symbol='square-open'\n            ),\n        ),\n         # and so on for all other algos\n    ]\nlayout = go.Layout(\n    title='ROC Curve',\n    yaxis=dict(title='True Positive Rates(TPR)'),\n    xaxis=dict(title='False Positive Rates(FPR)')\n)\nfig = go.Figure(data=data,layout=layout)\niplot(fig)\n</code></pre>\n\n<p>For instance,\nI am looking to have the color of logistic regression as blue, but the one with \"all attributes should be a solid line and the one with \"non-sparse attributes\" should be broken lines.</p>\n\n<p>I tried to look up and read up the documentation for plotly but could not find anything help.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 3, "creation_date": 1473884967, "post_id": 39499112, "comment_id": 66315797, "body": "What errors is it &quot;bringing&quot;?"}, {"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1473885081, "post_id": 39499112, "comment_id": 66315861, "body": "What about the case of <code>n == 0</code>?  (<code>&gt;0</code> and <code>&lt;0</code> both miss it). Also -- why bother with the <code>isinstance()</code> if the stated assumption is that it is fed a list of integers? Also, note that your solution iterates over the whole list twice, which is somewhat inefficient."}, {"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1473885174, "post_id": 39499112, "comment_id": 66315907, "body": "your code is working fine for me, without any error. Is it not returning the expected output? Please mention the input and expected output with the question"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 2, "creation_date": 1473885350, "post_id": 39499112, "comment_id": 66315994, "body": "Besides the obvious question: What is the error? what <i>Python</i> version are you using?"}, {"owner": {"reputation": 15, "user_id": 6832682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7034377444adf4b3936511de4a0bc5?s=128&d=identicon&r=PG&f=1", "display_name": "Njoroge", "link": "https://stackoverflow.com/users/6832682/njoroge"}, "edited": false, "score": 0, "creation_date": 1473885816, "post_id": 39499112, "comment_id": 66316229, "body": "The code should pass these tests"}, {"owner": {"reputation": 15, "user_id": 6832682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7034377444adf4b3936511de4a0bc5?s=128&d=identicon&r=PG&f=1", "display_name": "Njoroge", "link": "https://stackoverflow.com/users/6832682/njoroge"}, "edited": false, "score": 0, "creation_date": 1473885844, "post_id": 39499112, "comment_id": 66316238, "body": "import unittest  class ManipulateDataTestCases(unittest.TestCase):   def test_only_lists_allowed(self):     result = manipulate_data({})     self.assertEqual(result, &#39;Only lists allowed&#39;, msg=&#39;Invalid argument&#39;)    def test_it_returns_correct_output_with_positives(self):     result = manipulate_data([1, 2, 3, 4])     self.assertEqual(result, [4, 0], msg=&#39;Invalid output&#39;)        def test_returns_correct_ouptut_with_negatives(self):     result = manipulate_data([1, -9, 2, 3, 4, -5]);     self.assertEqual(result, [4, -14], msg=&#39;Invalid output&#39;)"}, {"owner": {"reputation": 15, "user_id": 6832682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7034377444adf4b3936511de4a0bc5?s=128&d=identicon&r=PG&f=1", "display_name": "Njoroge", "link": "https://stackoverflow.com/users/6832682/njoroge"}, "edited": false, "score": 0, "creation_date": 1473885935, "post_id": 39499112, "comment_id": 66316291, "body": "My code gets 1 failure... test_only_lists_allowed Failure in line 11, in test_only_lists_allowed self.assertEqual(result, &#39;Only lists allowed&#39;, msg=&#39;Invalid argument&#39;) AssertionError: Invalid argument"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 1, "creation_date": 1473924125, "post_id": 39499112, "comment_id": 66327236, "body": "Edit your question and include the error (or anything else that might be relevant....e.g. code) instead of adding comments (hopefully that is possible)."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1473965169, "post_id": 39499112, "comment_id": 66352277, "body": "Please find the <a href=\"https://stackoverflow.com/posts/39499112/edit\">edit</a> link under your question"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 6832682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7034377444adf4b3936511de4a0bc5?s=128&d=identicon&r=PG&f=1", "display_name": "Njoroge", "link": "https://stackoverflow.com/users/6832682/njoroge"}, "edited": false, "score": 0, "creation_date": 1473886514, "post_id": 39499205, "comment_id": 66316566, "body": "It should pass this test,    import unittest class ManipulateDataTestCases(unittest.TestCase): def test_only_lists_allowed(self): result = manipulate_data({}) self.assertEqual(result, &#39;Only lists allowed&#39;, msg=&#39;Invalid argument&#39;) def test_it_returns_correct_output_with_positives(self): result = manipulate_data([1, 2, 3, 4]) self.assertEqual(result, [4, 0], msg=&#39;Invalid output&#39;) def test_returns_correct_ouptut_with_negatives(self): result = manipulate_data([1, -9, 2, 3, 4, -5]); self.assertEqual(result, [4, -14], msg=&#39;Invalid output&#39;)"}], "tags": [], "owner": {"reputation": 13671, "user_id": 1838763, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T3Hdl.jpg?s=128&g=1", "display_name": "Steven Moseley", "link": "https://stackoverflow.com/users/1838763/steven-moseley"}, "is_accepted": false, "score": 1, "last_activity_date": 1473885322, "last_edit_date": 1473885322, "creation_date": 1473885198, "answer_id": 39499205, "question_id": 39499112, "link": "https://stackoverflow.com/questions/39499112/write-a-function-called-manipulate-data-which-will-act-as-follows/39499205#39499205", "title": "Write a function called manipulate_data which will act as follows", "body": "<p>NB: You should use <code>&gt;= 0</code> if you want credit for counting 0s as positive numbers.</p>\n\n<pre><code>def manipulate_data(data):\n    if isinstance(data, (list, tuple, set)):\n        return [len([n for n in data if isinstance(n, int) and n &gt;= 0]), sum(n for n in data if isinstance(n, int) and n &lt; 0)]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6839889, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/7ba5484340282f831769d6896167daa5?s=128&d=identicon&r=PG", "display_name": "GURU", "link": "https://stackoverflow.com/users/6839889/guru"}, "edited": false, "score": 0, "creation_date": 1474035954, "post_id": 39533927, "comment_id": 66382022, "body": "This should work fine but work on the rest!!"}], "tags": [], "owner": {"reputation": 1, "user_id": 6839889, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/7ba5484340282f831769d6896167daa5?s=128&d=identicon&r=PG", "display_name": "GURU", "link": "https://stackoverflow.com/users/6839889/guru"}, "is_accepted": false, "score": 0, "last_activity_date": 1474036836, "last_edit_date": 1474036836, "creation_date": 1474035917, "answer_id": 39533927, "question_id": 39499112, "link": "https://stackoverflow.com/questions/39499112/write-a-function-called-manipulate-data-which-will-act-as-follows/39533927#39533927", "title": "Write a function called manipulate_data which will act as follows", "body": "<pre><code>def manipulate_data(data):\n    if isinstance(data, (list, tuple, set)):\n        return [len([s for s in data if isinstance(s, int) and s &gt; 0]), sum(s for s in data if isinstance(s, int) and s &lt; 0)]\n    else:\n        return 'Only lists allowed'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6771503, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8HpfqDThzbQ/AAAAAAAAAAI/AAAAAAAAAAw/kHxmFrr4gEQ/photo.jpg?sz=128", "display_name": "David", "link": "https://stackoverflow.com/users/6771503/david"}, "is_accepted": false, "score": 1, "last_activity_date": 1474057115, "creation_date": 1474057115, "answer_id": 39539517, "question_id": 39499112, "link": "https://stackoverflow.com/questions/39499112/write-a-function-called-manipulate-data-which-will-act-as-follows/39539517#39539517", "title": "Write a function called manipulate_data which will act as follows", "body": "<p>this should work perfectly just tried it on mine.</p>\n\n<pre><code>def manipulate_data(data):\n    if isinstance(data, list):\n        return [sum(1 for n in data if isinstance(n, int) and n &gt;= 0), sum(n for n in data if isinstance(n, int) and n &lt; 0)]\n    else:\n        return 'Only lists allowed'\n</code></pre>\n\n<p>if this works please vote up so others could be helped.</p>\n"}], "owner": {"reputation": 15, "user_id": 6832682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7034377444adf4b3936511de4a0bc5?s=128&d=identicon&r=PG&f=1", "display_name": "Njoroge", "link": "https://stackoverflow.com/users/6832682/njoroge"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1832, "favorite_count": 0, "closed_date": 1474096116, "answer_count": 3, "score": -3, "last_activity_date": 1474057115, "creation_date": 1473884836, "last_edit_date": 1473884873, "question_id": 39499112, "link": "https://stackoverflow.com/questions/39499112/write-a-function-called-manipulate-data-which-will-act-as-follows", "closed_reason": "Not suitable for this site", "title": "Write a function called manipulate_data which will act as follows", "body": "<blockquote>\n  <p>When given a list of integers, return a list, where the first element\n  is the count of positives numbers and the second element is the sum of\n  negative numbers.</p>\n  \n  <p>NB: Treat 0 as positive.</p>\n</blockquote>\n\n<p>Why is my code bringing errors</p>\n\n<pre><code>def manipulate_data(data):\n    if isinstance(data, (list, tuple, set)):\n        return [len([n for n in data if isinstance(n, int) and n &gt; 0]), sum(n for n in data if isinstance(n, int) and n &lt; 0)]\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 19, "user_id": 6821779, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-1F3rzGTbWCI/AAAAAAAAAAI/AAAAAAAAAAs/-nqzBdSoJBU/photo.jpg?sz=128", "display_name": "Saad Zahoor", "link": "https://stackoverflow.com/users/6821779/saad-zahoor"}, "reply_to_user": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "edited": false, "score": 0, "creation_date": 1473886279, "post_id": 39499079, "comment_id": 66316452, "body": "how can  i do that @bharel"}, {"owner": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "edited": false, "score": 0, "creation_date": 1473886480, "post_id": 39499079, "comment_id": 66316549, "body": "in order to accept the answer, click the check mark below the voting buttons. See <a href=\"http://meta.stackexchange.com/a/5235/321168\">this</a> for more help."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 6821779, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-1F3rzGTbWCI/AAAAAAAAAAI/AAAAAAAAAAs/-nqzBdSoJBU/photo.jpg?sz=128", "display_name": "Saad Zahoor", "link": "https://stackoverflow.com/users/6821779/saad-zahoor"}, "edited": false, "score": 0, "creation_date": 1473885097, "post_id": 39499117, "comment_id": 66315871, "body": "thanks mate thats helpfull  .. can i also do it for time ?"}, {"owner": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "reply_to_user": {"reputation": 19, "user_id": 6821779, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-1F3rzGTbWCI/AAAAAAAAAAI/AAAAAAAAAAs/-nqzBdSoJBU/photo.jpg?sz=128", "display_name": "Saad Zahoor", "link": "https://stackoverflow.com/users/6821779/saad-zahoor"}, "edited": false, "score": 0, "creation_date": 1473885149, "post_id": 39499117, "comment_id": 66315892, "body": "Yup. Time accepts hour, minute and seconds. You may use <code>datetime.datetime()</code> if you wish both date and time in same object."}, {"owner": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "reply_to_user": {"reputation": 19, "user_id": 6821779, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-1F3rzGTbWCI/AAAAAAAAAAI/AAAAAAAAAAs/-nqzBdSoJBU/photo.jpg?sz=128", "display_name": "Saad Zahoor", "link": "https://stackoverflow.com/users/6821779/saad-zahoor"}, "edited": false, "score": 0, "creation_date": 1473885316, "post_id": 39499117, "comment_id": 66315980, "body": "Hi @AnonymousHacker, if this or any answer has solved your question please consider accepting it by clicking the check-mark. This indicates to the wider community that you&#39;ve found a solution and gives some reputation to both the answerer and yourself. There is no obligation to do this."}], "tags": [], "owner": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "is_accepted": true, "score": 1, "last_activity_date": 1473884859, "creation_date": 1473884859, "answer_id": 39499117, "question_id": 39499079, "link": "https://stackoverflow.com/questions/39499079/date-and-time-python-stuck/39499117#39499117", "title": "Date and Time Python (Stuck)", "body": "<p>You may do it like so:</p>\n\n<pre><code>&gt;&gt;&gt; from datetime import date\n&gt;&gt;&gt; date(year=1998, month=10, day=23)\ndatetime.date(1998, 10, 23)\n&gt;&gt;&gt; _.strftime('date is %d %b,%Y')\n'date is 23 Oct,1998'\n</code></pre>\n\n<p>As per <a href=\"https://docs.python.org/3/library/datetime.html#datetime.date\" rel=\"nofollow\"><code>datetime.date()</code></a> documentation, <code>date()</code> accepts a year, month and a day.</p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 6821779, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-1F3rzGTbWCI/AAAAAAAAAAI/AAAAAAAAAAs/-nqzBdSoJBU/photo.jpg?sz=128", "display_name": "Saad Zahoor", "link": "https://stackoverflow.com/users/6821779/saad-zahoor"}, "edited": false, "score": 0, "creation_date": 1473887945, "post_id": 39499156, "comment_id": 66317150, "body": "cant i type 23 10 1998 ... 2nd line .. when i type error pop up . whts the reason ?"}, {"owner": {"reputation": 1470, "user_id": 4374531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ecc0fcbd63c8e0a55d0c4048c7fb426?s=128&d=identicon&r=PG&f=1", "display_name": "v.coder", "link": "https://stackoverflow.com/users/4374531/v-coder"}, "reply_to_user": {"reputation": 19, "user_id": 6821779, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-1F3rzGTbWCI/AAAAAAAAAAI/AAAAAAAAAAs/-nqzBdSoJBU/photo.jpg?sz=128", "display_name": "Saad Zahoor", "link": "https://stackoverflow.com/users/6821779/saad-zahoor"}, "edited": false, "score": 0, "creation_date": 1473898475, "post_id": 39499156, "comment_id": 66320264, "body": "It is the order in which datetime expects in input to be %Y,%M,%D"}], "tags": [], "owner": {"reputation": 1470, "user_id": 4374531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ecc0fcbd63c8e0a55d0c4048c7fb426?s=128&d=identicon&r=PG&f=1", "display_name": "v.coder", "link": "https://stackoverflow.com/users/4374531/v-coder"}, "is_accepted": false, "score": 0, "last_activity_date": 1473885027, "creation_date": 1473885027, "answer_id": 39499156, "question_id": 39499079, "link": "https://stackoverflow.com/questions/39499079/date-and-time-python-stuck/39499156#39499156", "title": "Date and Time Python (Stuck)", "body": "<p>You can initialize date using datetime constructor.</p>\n\n<pre><code>&gt;&gt;&gt;import datetime\n&gt;&gt;&gt;d = datetime.datetime(1998,10,23)\n&gt;&gt;&gt;print(d.strftime('date is %d %b,%Y'))  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2447, "user_id": 3006366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVcKL.png?s=128&g=1", "display_name": "ode2k", "link": "https://stackoverflow.com/users/3006366/ode2k"}, "is_accepted": false, "score": 0, "last_activity_date": 1473885190, "creation_date": 1473885190, "answer_id": 39499203, "question_id": 39499079, "link": "https://stackoverflow.com/questions/39499079/date-and-time-python-stuck/39499203#39499203", "title": "Date and Time Python (Stuck)", "body": "<p>If you needed to take a string value as input you can use</p>\n\n<pre><code>from dateutil import parser\n\ndatestring = \"23 Oct 1998\"\ncustomDate = parser.parse(datestring)\n\nprint(customDate.strftime('date is %d%b,%y'))\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6821779, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-1F3rzGTbWCI/AAAAAAAAAAI/AAAAAAAAAAs/-nqzBdSoJBU/photo.jpg?sz=128", "display_name": "Saad Zahoor", "link": "https://stackoverflow.com/users/6821779/saad-zahoor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 39499117, "answer_count": 3, "score": 1, "last_activity_date": 1473885190, "creation_date": 1473884691, "last_edit_date": 1473884982, "question_id": 39499079, "link": "https://stackoverflow.com/questions/39499079/date-and-time-python-stuck", "title": "Date and Time Python (Stuck)", "body": "<p>I am Python beginner. I have a question about Date and time code:</p>\n\n<pre><code>import datetime\ndate = datetime.date.today()\nprint(date.strftime('date is %d%b,%Y'))\n</code></pre>\n\n<p>Now I want to print the date of my own choice. How can I do it? </p>\n\n<p>For example, if today's date is (15 sep 2016) and I want to print (23 oct 1998), what should I do in order to make it work?</p>\n"}, {"tags": ["python", "vpython"], "owner": {"reputation": 21, "user_id": 5767080, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10208555377588546/picture?type=large", "display_name": "Gabriele Giordano", "link": "https://stackoverflow.com/users/5767080/gabriele-giordano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1473884247, "creation_date": 1473884247, "question_id": 39498955, "link": "https://stackoverflow.com/questions/39498955/why-cant-i-open-spyder-anymore-after-i-have-installed-vpython", "title": "Why can&#39;t I open Spyder anymore after I have installed VPython?", "body": "<p>I tried to reinstall spyder via pip but nothing changed. Do you suggest to reinstall all anaconda? Will I loose custom libraries and scripts?</p>\n"}, {"tags": ["python", "database", "postgresql", "pandas", "elasticsearch"], "comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 2, "creation_date": 1473885602, "post_id": 39498948, "comment_id": 66316113, "body": "how many columns do you have in all 72 tables? If your resulting DF will have &lt;= 250 columns then you can and should join them in PostgreSQL - you will not experience memory errors"}, {"owner": {"reputation": 41024, "user_id": 223478, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OLN6Y.jpg?s=128&g=1", "display_name": "Neil McGuigan", "link": "https://stackoverflow.com/users/223478/neil-mcguigan"}, "edited": false, "score": 1, "creation_date": 1473886237, "post_id": 39498948, "comment_id": 66316435, "body": "Why don&#39;t you tell us your ultimate objective so we can help you with a better solution"}, {"owner": {"reputation": 3985, "user_id": 2393924, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HQANH.jpg?s=128&g=1", "display_name": "srgbnd", "link": "https://stackoverflow.com/users/2393924/srgbnd"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1473888976, "post_id": 39498948, "comment_id": 66317563, "body": "@MaxU, I don&#39;t remember the exact count but I&#39;m sure the number of columns is greater than 250."}, {"owner": {"reputation": 3985, "user_id": 2393924, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HQANH.jpg?s=128&g=1", "display_name": "srgbnd", "link": "https://stackoverflow.com/users/2393924/srgbnd"}, "reply_to_user": {"reputation": 41024, "user_id": 223478, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OLN6Y.jpg?s=128&g=1", "display_name": "Neil McGuigan", "link": "https://stackoverflow.com/users/223478/neil-mcguigan"}, "edited": false, "score": 0, "creation_date": 1473889276, "post_id": 39498948, "comment_id": 66317665, "body": "@NeilMcGuigan I want to denormalize DB data to be able to index it into Elasticsearch as documents, one document per user <a href=\"https://www.elastic.co/guide/en/elasticsearch/guide/current/denormalization.html\" rel=\"nofollow noreferrer\">elastic.co/guide/en/elasticsearch/guide/current/&hellip;</a>"}, {"owner": {"reputation": 13398, "user_id": 442650, "user_type": "registered", "accept_rate": 66, "profile_image": "https://graph.facebook.com/728395557/picture?type=large", "display_name": "Jonathan Vanasco", "link": "https://stackoverflow.com/users/442650/jonathan-vanasco"}, "edited": false, "score": 0, "creation_date": 1473953139, "post_id": 39498948, "comment_id": 66345604, "body": "The easiest thing to do is to use a larger machine.  128MB of RAM is not much.  Launch something with 4GB and see if this runs (I doubt it will though).  You would most likely be better off pulling the data out one row at a time, and probably from one table at a time too.  A 72 table join is going to consume a whole lot of memory and swap space on your postgres machine -- and then take up a lot of space in Python with it&#39;s representation."}, {"owner": {"reputation": 3985, "user_id": 2393924, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HQANH.jpg?s=128&g=1", "display_name": "srgbnd", "link": "https://stackoverflow.com/users/2393924/srgbnd"}, "reply_to_user": {"reputation": 13398, "user_id": 442650, "user_type": "registered", "accept_rate": 66, "profile_image": "https://graph.facebook.com/728395557/picture?type=large", "display_name": "Jonathan Vanasco", "link": "https://stackoverflow.com/users/442650/jonathan-vanasco"}, "edited": false, "score": 0, "creation_date": 1473956756, "post_id": 39498948, "comment_id": 66347758, "body": "@JonathanVanasco I use server with <b>128GB</b>"}, {"owner": {"reputation": 13398, "user_id": 442650, "user_type": "registered", "accept_rate": 66, "profile_image": "https://graph.facebook.com/728395557/picture?type=large", "display_name": "Jonathan Vanasco", "link": "https://stackoverflow.com/users/442650/jonathan-vanasco"}, "edited": false, "score": 0, "creation_date": 1473957464, "post_id": 39498948, "comment_id": 66348175, "body": "Sorry, I misread that.  That is a huge join, you need to reformat the data in steps."}], "answers": [{"comments": [{"owner": {"reputation": 3985, "user_id": 2393924, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HQANH.jpg?s=128&g=1", "display_name": "srgbnd", "link": "https://stackoverflow.com/users/2393924/srgbnd"}, "edited": false, "score": 0, "creation_date": 1473931912, "post_id": 39499237, "comment_id": 66331586, "body": "I get the following error during <code>pd.concat</code> execution:  <a href=\"https://gist.github.com/SergeyBondarenko/f78444f709cffec3e6777d3a16e38f2f\" rel=\"nofollow noreferrer\">gist.github.com/SergeyBondarenko/&hellip;</a>"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 0, "last_activity_date": 1473885305, "creation_date": 1473885305, "answer_id": 39499237, "question_id": 39498948, "link": "https://stackoverflow.com/questions/39498948/join-all-postgresql-tables-and-make-a-python-dictionary/39499237#39499237", "title": "Join all PostgreSQL tables and make a Python dictionary", "body": "<p>I'm not certain this will help, but you can try <code>pd.concat</code></p>\n\n<pre><code>raw_dict = pd.concat([d.set_index('USER_ID') for d in df_arr], axis=1)\n</code></pre>\n\n<p>Or, to get a bit more disctinction</p>\n\n<pre><code>raw_dict = pd.concat([d.set_index('USER_ID') for d in df_arr], axis=1, keys=sql_tables)\n</code></pre>\n\n<hr>\n\n<p>If this isn't helpful, let me know and I'll delete it.</p>\n"}, {"comments": [{"owner": {"reputation": 3985, "user_id": 2393924, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HQANH.jpg?s=128&g=1", "display_name": "srgbnd", "link": "https://stackoverflow.com/users/2393924/srgbnd"}, "edited": false, "score": 0, "creation_date": 1473932832, "post_id": 39499314, "comment_id": 66332295, "body": "The total number of columns is greater than 1600."}, {"owner": {"reputation": 4149, "user_id": 4573762, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/60VDW.jpg?s=128&g=1", "display_name": "Luis Teijon", "link": "https://stackoverflow.com/users/4573762/luis-teijon"}, "reply_to_user": {"reputation": 3985, "user_id": 2393924, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HQANH.jpg?s=128&g=1", "display_name": "srgbnd", "link": "https://stackoverflow.com/users/2393924/srgbnd"}, "edited": false, "score": 0, "creation_date": 1473952416, "post_id": 39499314, "comment_id": 66345074, "body": "What if you try with a data warehouse?"}, {"owner": {"reputation": 3985, "user_id": 2393924, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HQANH.jpg?s=128&g=1", "display_name": "srgbnd", "link": "https://stackoverflow.com/users/2393924/srgbnd"}, "edited": false, "score": 0, "creation_date": 1473957060, "post_id": 39499314, "comment_id": 66347931, "body": "What data warehouse service do you suggest?"}, {"owner": {"reputation": 4149, "user_id": 4573762, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/60VDW.jpg?s=128&g=1", "display_name": "Luis Teijon", "link": "https://stackoverflow.com/users/4573762/luis-teijon"}, "reply_to_user": {"reputation": 3985, "user_id": 2393924, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HQANH.jpg?s=128&g=1", "display_name": "srgbnd", "link": "https://stackoverflow.com/users/2393924/srgbnd"}, "edited": false, "score": 0, "creation_date": 1473965009, "post_id": 39499314, "comment_id": 66352193, "body": "Creating a datawhare house you can denormalize your tables by combining, modifying or deleting columns and rows. It could be an approach for the HUGE join you are planning to make."}], "tags": [], "owner": {"reputation": 4149, "user_id": 4573762, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/60VDW.jpg?s=128&g=1", "display_name": "Luis Teijon", "link": "https://stackoverflow.com/users/4573762/luis-teijon"}, "is_accepted": true, "score": 2, "last_activity_date": 1473952378, "last_edit_date": 1473952378, "creation_date": 1473885607, "answer_id": 39499314, "question_id": 39498948, "link": "https://stackoverflow.com/questions/39498948/join-all-postgresql-tables-and-make-a-python-dictionary/39499314#39499314", "title": "Join all PostgreSQL tables and make a Python dictionary", "body": "<p>Why don't you create a postgres function instead of script?</p>\n\n<p>Here are some advises that could help you to avoid the memory error:</p>\n\n<ul>\n<li>You can use <strong>WITH</strong> clause which makes better use of your memory.</li>\n<li>You can create some physical tables for storing the information of\ndifferent groups of tables of your database. These physical tables will avoid to use a great amount of memory. After that, all you have to do is joining only those physical tables. You can create a function for it.</li>\n<li>You can create a Data Warehouse by denormalizing the tables you need. </li>\n<li>Last but not least: Make sure you are using <strong>Indexes</strong> appropriately.</li>\n</ul>\n"}], "owner": {"reputation": 3985, "user_id": 2393924, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HQANH.jpg?s=128&g=1", "display_name": "srgbnd", "link": "https://stackoverflow.com/users/2393924/srgbnd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 1, "accepted_answer_id": 39499314, "answer_count": 2, "score": 5, "last_activity_date": 1473952378, "creation_date": 1473884216, "last_edit_date": 1473931337, "question_id": 39498948, "link": "https://stackoverflow.com/questions/39498948/join-all-postgresql-tables-and-make-a-python-dictionary", "title": "Join all PostgreSQL tables and make a Python dictionary", "body": "<p>I need to join <strong>all</strong> PostgreSQL tables and convert them in a Python dictionary. There are 72 tables in the database. The total number of columns is greater than <strong>1600</strong>. </p>\n\n<p>I wrote a simple Python script that joins several tables but fails to join all of them due to <a href=\"https://gist.github.com/SergeyBondarenko/a753689a86b9af209e6dd6ef2c2f7eef\" rel=\"nofollow\">the memory error</a>. All memory is occupied during the script execution. And I run the script on a new virtual server with <strong>128GB</strong> RAM and 8 CPU. It fails during the lambda function execution. </p>\n\n<p>How could the following code be improved to execute <strong>all</strong> tables join?</p>\n\n<pre><code>from sqlalchemy import create_engine\nimport pandas as pd\n\nauth = 'user:pass'\nengine = create_engine('postgresql://' + auth + '@host.com:5432/db')\n\nsql_tables = ['table0', 'table1', 'table3', ..., 'table72']        \ndf_arr = []\n[df_arr.append(pd.read_sql_query('select * from \"' + table + '\"', con=engine)) for table in sql_tables]\n\ndf_join = reduce(lambda left, right: pd.merge(left, right, how='outer', on=['USER_ID']), df_arr)\nraw_dict = pd.DataFrame.to_dict(df_join.where((pd.notnull(df_join)), 'no_data'))\n\nprint(df_join)\nprint(raw_dict)\nprint(len(df_arr))\n</code></pre>\n\n<p>Is it ok to use <a href=\"http://pandas.pydata.org/pandas-docs/stable/\" rel=\"nofollow\">Pandas</a> for my purpose? Are there better solutions?</p>\n\n<p>The ultimate goal is to <a href=\"https://www.elastic.co/guide/en/elasticsearch/guide/current/denormalization.html\" rel=\"nofollow\">denormalize</a> DB data to be able to index it into <a href=\"https://www.elastic.co\" rel=\"nofollow\">Elasticsearch</a> as documents, one document per user.</p>\n"}, {"tags": ["python", "pandas", "subset"], "comments": [{"owner": {"reputation": 13817, "user_id": 1005215, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33a92149e35c60382fa24bcc2b20722e?s=128&d=identicon&r=PG", "display_name": "Nehal J Wani", "link": "https://stackoverflow.com/users/1005215/nehal-j-wani"}, "edited": false, "score": 3, "creation_date": 1473884241, "post_id": 39498923, "comment_id": 66315433, "body": "You want <code>(in_file.Client == &#39;ABC&#39;) &amp; (in_file.Client == &#39;DEF&#39;)</code> ? Both to be true at the same time?"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1473884366, "post_id": 39498923, "comment_id": 66315485, "body": "try this: <code>in_file.loc[(in_file.Date == &#39;2016-09-01T&#39;) &amp; (in_file.Client.isin([&#39;ABC&#39;, &#39;DEF&#39;])].sort_values(&#39;Value_01&#39;, ascending=False)</code>"}, {"owner": {"reputation": 1173, "user_id": 5179643, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c91397c9f6c5e7402ed0cf8057709630?s=128&d=identicon&r=PG&f=1", "display_name": "equanimity", "link": "https://stackoverflow.com/users/5179643/equanimity"}, "edited": false, "score": 0, "creation_date": 1473884480, "post_id": 39498923, "comment_id": 66315547, "body": "is there a counterpart to <code>isin</code> that would allow me to exclude certain data?"}], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 2, "last_activity_date": 1473885172, "last_edit_date": 1473885172, "creation_date": 1473884572, "answer_id": 39499047, "question_id": 39498923, "link": "https://stackoverflow.com/questions/39498923/unable-to-subset-pandas-dataframe/39499047#39499047", "title": "Unable to subset Pandas dataframe", "body": "<p>including <code>isin()</code>:</p>\n\n<pre><code>In [28]: in_file.loc[(in_file.Date == '2016-09-01T') &amp; in_file.Client.isin(['ABC', 'DEF'])].sort_values('Value_01', ascending=False)\nOut[28]:\n  Client  Value_01  Value_02         Date\n0    ABC       100       500  2016-09-01T\n2    DEF        95      1000  2016-09-01T\n</code></pre>\n\n<p>excluding:</p>\n\n<pre><code>In [29]: in_file.loc[(in_file.Date == '2016-09-01T') &amp; (~in_file.Client.isin(['ABC', 'DEF']))].sort_values('Value_01', ascending=False)\nOut[29]:\n  Client  Value_01  Value_02         Date\n4    GHI        75        19  2016-09-01T\n6    JKL        50         2  2016-09-01T\n</code></pre>\n\n<p>Or bit slower, but much nicer <code>query()</code> method:</p>\n\n<pre><code>In [30]: in_file.query(\"Date == '2016-09-01T' and Client in ['ABC', 'DEF']\")\nOut[30]:\n  Client  Value_01  Value_02         Date\n0    ABC       100       500  2016-09-01T\n2    DEF        95      1000  2016-09-01T\n\nIn [31]: in_file.query(\"Date == '2016-09-01T' and Client not in ['ABC', 'DEF']\")\nOut[31]:\n  Client  Value_01  Value_02         Date\n4    GHI        75        19  2016-09-01T\n6    JKL        50         2  2016-09-01T\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 4927453, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KFkkKOewa3U/AAAAAAAAAAI/AAAAAAAAAFg/jtia6pGKrM0/photo.jpg?sz=128", "display_name": "William Walker", "link": "https://stackoverflow.com/users/4927453/william-walker"}, "is_accepted": false, "score": 0, "last_activity_date": 1473884861, "creation_date": 1473884861, "answer_id": 39499119, "question_id": 39498923, "link": "https://stackoverflow.com/questions/39498923/unable-to-subset-pandas-dataframe/39499119#39499119", "title": "Unable to subset Pandas dataframe", "body": "<p>You have two conflicting conditions for your second subset dataframe</p>\n\n<p><code>(in_file.Client == 'ABC')</code> &amp; <code>(in_file.Client == 'DEF')</code></p>\n\n<p>Can never both be true at the same time. </p>\n\n<p>What you seem to be looking for is 'or' logic not '&amp;' logic. So </p>\n\n<p><code>df_02 = in_file.loc[(in_file.Date == '2016-09-02T') or (in_file.Client == 'ABC') or (in_file.Client == 'DEF')].sort_values('Value_01', ascending=False)</code></p>\n\n<p>will give you</p>\n\n<pre><code>ABC     100       500       2016-09-01T\nABC     14        90        2016-09-02T\nDEF     95        1000      2016-09-01T\nDEF     200       600       2016-09-02T\nGHI     300       700       2016-09-02T\nJKL     400       800       2016-09-02T\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 0, "last_activity_date": 1473884925, "last_edit_date": 1592644375, "creation_date": 1473884925, "answer_id": 39499133, "question_id": 39498923, "link": "https://stackoverflow.com/questions/39498923/unable-to-subset-pandas-dataframe/39499133#39499133", "title": "Unable to subset Pandas dataframe", "body": "<p><em><strong>Caveat</strong></em> This is not the best solution!!!<br />\nI only want to point out what you were doing wrong.<br />\n@MaxU has the best answer</p>\n<p>define <code>cond2</code></p>\n<pre><code>cond2 = (in_file.Date == '2016-09-01T') &amp; \\\n        (in_file.Client == 'ABC') &amp; \\\n        (in_file.Client == 'DEF')\n</code></pre>\n<p>This will always be <code>False</code> as <code>in_file.Client</code> can never be both <code>'ABC'</code> and <code>'DEF'</code>.  You must use 'or' <code>|</code></p>\n<p>Instead</p>\n<pre><code>cond2 = (in_file.Date == '2016-09-01T') &amp; \\\n        ((in_file.Client == 'ABC') | (in_file.Client == 'DEF'))\n</code></pre>\n<p>Then</p>\n<pre><code>df_02 = in_file.loc[cond2].sort_values('Value_01', ascending=False)\ndf_02\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/czQvv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/czQvv.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<h1>But Don't Choose This Answer</h1>\n<p>It is not as good as using <code>isin</code></p>\n"}], "owner": {"reputation": 1173, "user_id": 5179643, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c91397c9f6c5e7402ed0cf8057709630?s=128&d=identicon&r=PG&f=1", "display_name": "equanimity", "link": "https://stackoverflow.com/users/5179643/equanimity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 39499047, "answer_count": 3, "score": 2, "last_activity_date": 1473885172, "creation_date": 1473884126, "last_edit_date": 1473884300, "question_id": 39498923, "link": "https://stackoverflow.com/questions/39498923/unable-to-subset-pandas-dataframe", "title": "Unable to subset Pandas dataframe", "body": "<p>I have the following data in a data frame named <code>in_file</code>:</p>\n\n<pre><code>Client  Value_01   Value_02   Date\nABC     100       500       2016-09-01T\nABC     14        90        2016-09-02T\nDEF     95        1000      2016-09-01T\nDEF     200       600       2016-09-02T\nGHI     75        19        2016-09-01T\nGHI     300       700       2016-09-02T\nJKL     50        02        2016-09-01T\nJKL     400       800       2016-09-02T\n</code></pre>\n\n<p>I subset the data frame with the following (which we'll call 'subset 1'):</p>\n\n<pre><code>df_01 = in_file.loc[(in_file.Date == '2016-09-01T') &amp; (in_file.Client &lt;&gt; 'ABC') &amp; (in_file.Client &lt;&gt; 'DEF')].sort_values('Value_01', ascending=False)\n</code></pre>\n\n<p>and I get back:</p>\n\n<pre><code>Client  Value_01   Value_02   Date\nGHI     75        19        2016-09-01T\nJKL     50        02        2016-09-01T\n</code></pre>\n\n<p>Then, I attempt to subset the data frame with the following (which we'll call 'subset 2'):</p>\n\n<pre><code>df_02 = in_file.loc[(in_file.Date == '2016-09-01T') &amp; (in_file.Client == 'ABC') &amp; (in_file.Client == 'DEF')].sort_values('Value_01', ascending=False)\n</code></pre>\n\n<p>With 'subset 2', I get back an <strong>empty data frame</strong>.  But, I was expecting to see the following:</p>\n\n<pre><code>Client  Value_01   Value_02   Date\nABC     100       500       2016-09-01T\nDEF     95        1000      2016-09-01T\n</code></pre>\n\n<p>Does anyone know why the 'subset 2' code is not returning the data frame that I expect?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "postgresql", "sqlalchemy", "sql-update"], "comments": [{"owner": {"reputation": 1657, "user_id": 1522342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08cf60cce502c678e601a37dd90747c9?s=128&d=identicon&r=PG", "display_name": "iuridiniz", "link": "https://stackoverflow.com/users/1522342/iuridiniz"}, "edited": false, "score": 0, "creation_date": 1473884242, "post_id": 39498911, "comment_id": 66315434, "body": "what <code>pd.read_sql_query</code> means? Is it a library call? Which library?"}, {"owner": {"reputation": 674, "user_id": 1615426, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/40608f86f41cc625c147918fdfd483c0?s=128&d=identicon&r=PG", "display_name": "lonewaft", "link": "https://stackoverflow.com/users/1615426/lonewaft"}, "edited": false, "score": 0, "creation_date": 1473884530, "post_id": 39498911, "comment_id": 66315571, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/17317344/celery-and-sqlalchemy-this-result-object-does-not-return-rows-it-has-been-clo\">Celery and SQLAlchemy - This result object does not return rows. It has been closed automatically</a>"}, {"owner": {"reputation": 145, "user_id": 6779640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d8ad5f18614286d9fa0c6be4451fbdee?s=128&d=identicon&r=PG&f=1", "display_name": "sshr", "link": "https://stackoverflow.com/users/6779640/sshr"}, "edited": false, "score": 0, "creation_date": 1473885443, "post_id": 39498911, "comment_id": 66316028, "body": "pd.read_sql_query Returns a DataFrame corresponding to the result set of the query string"}, {"owner": {"reputation": 145, "user_id": 6779640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d8ad5f18614286d9fa0c6be4451fbdee?s=128&d=identicon&r=PG&f=1", "display_name": "sshr", "link": "https://stackoverflow.com/users/6779640/sshr"}, "edited": false, "score": 0, "creation_date": 1473886364, "post_id": 39498911, "comment_id": 66316495, "body": "Is there any other method to UPDATE Postgres table using python code? I need to do this for more than one million columns for different dates (I loop the dataframe data here)?"}, {"owner": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "edited": false, "score": 1, "creation_date": 1473887568, "post_id": 39498911, "comment_id": 66317012, "body": "Well, an <code>UPDATE</code> query does not return any results. You can simply do <code>engine.execute(QUERY)</code> instead. You may also need to commit afterwards."}], "owner": {"reputation": 145, "user_id": 6779640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d8ad5f18614286d9fa0c6be4451fbdee?s=128&d=identicon&r=PG&f=1", "display_name": "sshr", "link": "https://stackoverflow.com/users/6779640/sshr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1473885933, "creation_date": 1473884082, "last_edit_date": 1473885933, "question_id": 39498911, "link": "https://stackoverflow.com/questions/39498911/update-db-column-python-resourceclosederror", "title": "UPDATE DB column - Python ResourceClosedError", "body": "<p>I am trying to update a column in Postgres table (Table1) using following python code</p>\n\n<pre><code>for i in range(0,len(df)):\n        QUERY=\"\"\" UPDATE \"Table1\" SET \"var\"='%s' WHERE \"Table\".\"id\"='%s' \"\"\"\n         % (df['sum'][i], df['id'][i])\n        pd.read_sql_query(QUERY,con=engine)\n</code></pre>\n\n<p>It is throwing the following error message.</p>\n\n<pre><code>ResourceClosedError: This result object does not return rows. It has been  closed automatically.\n</code></pre>\n\n<p>Could you please let me know how to solve this?</p>\n"}, {"tags": ["python", "windows", "tensorflow", "anaconda"], "answers": [{"comments": [{"owner": {"reputation": 1189, "user_id": 2220328, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/snILs.png?s=128&g=1", "display_name": "Guillaume", "link": "https://stackoverflow.com/users/2220328/guillaume"}, "edited": false, "score": 1, "creation_date": 1484840840, "post_id": 40873552, "comment_id": 70684724, "body": "Would make sense to update the tutorial <a href=\"https://www.tensorflow.org/get_started/os_setup\" rel=\"nofollow noreferrer\">tensorflow.org/get_started/os_setup</a>"}], "tags": [], "owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "is_accepted": false, "score": 2, "last_activity_date": 1480445434, "creation_date": 1480445434, "answer_id": 40873552, "question_id": 39498910, "link": "https://stackoverflow.com/questions/39498910/installing-tensorflow-in-windows-anaconda-4-1-1-w-python-2-7/40873552#40873552", "title": "Installing tensorflow in Windows Anaconda 4.1.1 w Python 2.7", "body": "<p>We just announced support for TensorFlow on Windows with the 0.12 release candidate. However, due to the vagaries of <a href=\"https://wiki.python.org/moin/WindowsCompilers\" rel=\"nofollow noreferrer\">compiler versions on Windows</a>, we only support Python 3.5 (see below for a fuller explanation).</p>\n\n<p>At present there is no conda package for TensorFlow on Windows, but there is a pre-built <a href=\"https://pypi.python.org/pypi/tensorflow\" rel=\"nofollow noreferrer\">PIP package in PyPI</a>. If you install the 64-bit version of Python 3.5, either from Python.org or Anaconda, you can install TensorFlow with the following command (for the CPU-only version):</p>\n\n<pre><code>C:\\&gt; pip install tensorflow\n</code></pre>\n\n<p>If you have a GPU that supports CUDA 8.0, you can use the following command to install the GPU-accelerated version:</p>\n\n<pre><code>C:\\&gt; pip install tensorflow-gpu\n</code></pre>\n\n<hr>\n\n<p><strong>Why does TensorFlow only support Python 3.5 on Windows?</strong> Python on Windows <a href=\"https://wiki.python.org/moin/WindowsCompilers\" rel=\"nofollow noreferrer\">requires</a> that you compile extensions using the same compiler as the one that was used to build the Python interpreter. The official distributions of Python 2.7 from Python.org and Anaconda were built with MSVC 9.0. We can't build TensorFlow with MSVC 9.0 (2008), because it relies on too many features from C++11, so we need to use MSVC 14.0 (2015). Only Python 3.5 on Windows was compiled with MSVC 14.0, so we are limited to supporting that version only.</p>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 8653966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gMSgu.jpg?s=128&g=1", "display_name": "nbm", "link": "https://stackoverflow.com/users/8653966/nbm"}, "is_accepted": false, "score": 0, "last_activity_date": 1512116910, "creation_date": 1512116910, "answer_id": 47589334, "question_id": 39498910, "link": "https://stackoverflow.com/questions/39498910/installing-tensorflow-in-windows-anaconda-4-1-1-w-python-2-7/47589334#47589334", "title": "Installing tensorflow in Windows Anaconda 4.1.1 w Python 2.7", "body": "<blockquote>\n  <blockquote>\n    <blockquote>\n      <p>Create a conda environment named tensorflow by invoking the following command:\n      C:>conda create -n tensorflow</p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n\n<p>Activate the conda environment by issuing the following command:\nC:> activate tensorflow (tensorflow)C:> # Your prompt should change</p>\n\n<p>Issue the appropriate command to install TensorFlow inside your conda environment. To install the CPU-only version of TensorFlow, enter the following command:</p>\n\n<p>( To get 32- and 64-bit Windows binaries of many scientific open-source extension packages for the official CPython distribution of the Python programming language..... copy link <a href=\"https://www.lfd.uci.edu/~gohlke/pythonlibs/\" rel=\"nofollow noreferrer\">https://www.lfd.uci.edu/~gohlke/pythonlibs/</a>)</p>\n\n<p>(tensorflow)C:> pip install\u200a\u2014\u200aignore-installed\u200a\u2014\u200aupgrade <a href=\"https://storage.googleapis.com/tensorflow/windows/cpu/tensorflow-1.0.1-cp35-cp35m-win_amd64.whl\" rel=\"nofollow noreferrer\">https://storage.googleapis.com/tensorflow/windows/cpu/tensorflow-1.0.1-cp35-cp35m-win_amd64.whl</a></p>\n\n<p>1) To install the GPU version of TensorFlow, enter the following command (on a single line):</p>\n\n<p>(tensorflow)C:> pip install\u200a\u2014\u200aignore-installed\u200a\u2014\u200aupgrade <a href=\"https://storage.googleapis.com/tensorflow/windows/gpu/tensorflow_gpu-1.0.1-cp35-cp35m-win_amd64.whl\" rel=\"nofollow noreferrer\">https://storage.googleapis.com/tensorflow/windows/gpu/tensorflow_gpu-1.0.1-cp35-cp35m-win_amd64.whl</a></p>\n\n<blockquote>\n  <blockquote>\n    <blockquote>\n      <p>If you are using anaconda distribution and getting the above error, you can do the following to use python 3.5 on the new environnement \u201ctensorflow\u201d:</p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n\n<p>conda create --name tensorflow python=3.5\nactivate tensorflow\nconda install jupyter\nconda install scipy\npip install tensorflow\n or\npip install tensorflow-gpu</p>\n"}], "owner": {"reputation": 21, "user_id": 6832596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8a042c86884726457db35a69c8bd311?s=128&d=identicon&r=PG&f=1", "display_name": "William Stevenson", "link": "https://stackoverflow.com/users/6832596/william-stevenson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2006, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1512116910, "creation_date": 1473884076, "question_id": 39498910, "link": "https://stackoverflow.com/questions/39498910/installing-tensorflow-in-windows-anaconda-4-1-1-w-python-2-7", "title": "Installing tensorflow in Windows Anaconda 4.1.1 w Python 2.7", "body": "<p>I have followed the instructions in</p>\n\n<p><a href=\"https://www.tensorflow.org/versions/r0.10/get_started/os_setup.html#anaconda-installation\" rel=\"nofollow\">https://www.tensorflow.org/versions/r0.10/get_started/os_setup.html#anaconda-installation</a></p>\n\n<p>activate tensorflow changes the environment as in the instructions</p>\n\n<p>but </p>\n\n<p>conda install -c conda-forge tensorflow</p>\n\n<p>gives me\nUsing Anaconda Cloud api site <a href=\"https://api.anaconda.org\" rel=\"nofollow\">https://api.anaconda.org</a>\nFetching package metadata .........\nSolving package specifications: .\nError: Package missing in current win-32 channels:\n  - tensorflow</p>\n\n<p>Is there no way to install tensorflow in Windows?</p>\n"}, {"tags": ["python", "static-methods"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1473884125, "post_id": 39498891, "comment_id": 66315383, "body": "Do you want this lazily evaluated (and is it actually something sufficiently expensive and sufficiently likely to never be used that lazy evaluation makes sense)?"}, {"owner": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "edited": false, "score": 0, "creation_date": 1473884136, "post_id": 39498891, "comment_id": 66315393, "body": "Did you try making a staticmethod a property?"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1473884243, "post_id": 39498891, "comment_id": 66315435, "body": "Do you want it computed at first-use or at class definition time?"}, {"owner": {"reputation": 78907, "user_id": 107660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0167bade38130f13a5fc468c10388d9d?s=128&d=identicon&r=PG", "display_name": "Duncan", "link": "https://stackoverflow.com/users/107660/duncan"}, "edited": false, "score": 0, "creation_date": 1473885032, "post_id": 39498891, "comment_id": 66315823, "body": "This is what I use: <a href=\"http://stackoverflow.com/a/6849299/107660\">stackoverflow.com/a/6849299/107660</a>"}, {"owner": {"reputation": 285, "user_id": 2008815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/019bbf40daf7ac6d65a14cd6ca07513e?s=128&d=identicon&r=PG", "display_name": "mkohram", "link": "https://stackoverflow.com/users/2008815/mkohram"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1473885672, "post_id": 39498891, "comment_id": 66316155, "body": "@user2357112 It is expensive, a file gets opened read and a data structure is created."}], "answers": [{"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 2, "last_activity_date": 1473884217, "creation_date": 1473884217, "answer_id": 39498950, "question_id": 39498891, "link": "https://stackoverflow.com/questions/39498891/computed-static-property-in-python/39498950#39498950", "title": "Computed static property in python", "body": "<p>Until the class is actually created, <code>one_off_static_method</code> is just a regular function. It needs to be defined before you attempt to call it, since you want to call it while the <code>class</code> statement is being executed. Once you are done with it, you can simply delete it.</p>\n\n<pre><code>class Foo:\n    def _one_off_static_method():\n        return 'bar'\n\n    static_prop = _one_off_static_method()\n    del _one_off_static_method\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 285, "user_id": 2008815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/019bbf40daf7ac6d65a14cd6ca07513e?s=128&d=identicon&r=PG", "display_name": "mkohram", "link": "https://stackoverflow.com/users/2008815/mkohram"}, "edited": false, "score": 0, "creation_date": 1473886417, "post_id": 39499163, "comment_id": 66316516, "body": "This would be computed once per instance though right?"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "reply_to_user": {"reputation": 285, "user_id": 2008815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/019bbf40daf7ac6d65a14cd6ca07513e?s=128&d=identicon&r=PG", "display_name": "mkohram", "link": "https://stackoverflow.com/users/2008815/mkohram"}, "edited": false, "score": 0, "creation_date": 1473886811, "post_id": 39499163, "comment_id": 66316708, "body": "Yes, once per instance."}, {"owner": {"reputation": 285, "user_id": 2008815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/019bbf40daf7ac6d65a14cd6ca07513e?s=128&d=identicon&r=PG", "display_name": "mkohram", "link": "https://stackoverflow.com/users/2008815/mkohram"}, "edited": false, "score": 0, "creation_date": 1473886914, "post_id": 39499163, "comment_id": 66316751, "body": "Nice find with <code>functools.lru_cache</code>."}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 3, "last_activity_date": 1473885408, "last_edit_date": 1495539980, "creation_date": 1473885042, "answer_id": 39499163, "question_id": 39498891, "link": "https://stackoverflow.com/questions/39498891/computed-static-property-in-python/39499163#39499163", "title": "Computed static property in python", "body": "<p>If you want it computed at class definition time, see <a href=\"https://stackoverflow.com/a/39498950/674039\">chepner's answer</a> - although I would recommend just to use a module level function instead.</p>\n\n<p>If you want it lazily evaluated, then you might be interested in a <a href=\"https://pypi.python.org/pypi/cached-property/\" rel=\"nofollow noreferrer\"><code>cached_property</code></a>.  </p>\n\n<pre><code>&gt;&gt;&gt; from random import random\n&gt;&gt;&gt; from cached_property import cached_property\n&gt;&gt;&gt; class Foo(object):\n...     @cached_property\n...     def one_off_thing(self):\n...         print('computing...')\n...         return random()\n...     \n&gt;&gt;&gt; foo = Foo()\n&gt;&gt;&gt; foo.one_off_thing\ncomputing...\n0.5804382038855782\n&gt;&gt;&gt; foo.one_off_thing\n0.5804382038855782\n</code></pre>\n\n<p><em>Note:</em> it seems every man and his dog has an implementation of memo decorators in Python, this is one of many.  If you're on Python 3, consider <a href=\"https://docs.python.org/3/library/functools.html#functools.lru_cache\" rel=\"nofollow noreferrer\">functools.lru_cache</a> because it's in the core libraries.  </p>\n"}, {"comments": [{"owner": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "reply_to_user": {"reputation": 285, "user_id": 2008815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/019bbf40daf7ac6d65a14cd6ca07513e?s=128&d=identicon&r=PG", "display_name": "mkohram", "link": "https://stackoverflow.com/users/2008815/mkohram"}, "edited": false, "score": 0, "creation_date": 1473886342, "post_id": 39499304, "comment_id": 66316483, "body": "@mkohram Whoops, here you go :-) It&#39;s even smaller :P"}, {"owner": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "reply_to_user": {"reputation": 285, "user_id": 2008815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/019bbf40daf7ac6d65a14cd6ca07513e?s=128&d=identicon&r=PG", "display_name": "mkohram", "link": "https://stackoverflow.com/users/2008815/mkohram"}, "edited": false, "score": 0, "creation_date": 1473886631, "post_id": 39499304, "comment_id": 66316626, "body": "@mkohram Added a small explanation."}], "tags": [], "owner": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "is_accepted": false, "score": 2, "last_activity_date": 1473886615, "last_edit_date": 1473886615, "creation_date": 1473885572, "answer_id": 39499304, "question_id": 39498891, "link": "https://stackoverflow.com/questions/39498891/computed-static-property-in-python/39499304#39499304", "title": "Computed static property in python", "body": "<p>Here you go, I made a small descriptor for you :-)</p>\n\n<p>Upon accessing the attribute, it will be computed and cached.</p>\n\n<pre><code>class CachedStaticProperty:\n    \"\"\"Works like @property and @staticmethod combined\"\"\"\n\n    def __init__(self, func):\n        self.func = func\n\n    def __get__(self, inst, owner):\n        result = self.func()\n        setattr(owner, self.func.__name__, result)\n        return result\n</code></pre>\n\n<p>The way it works is rather simple:</p>\n\n<ol>\n<li>Upon using the decorator syntax, I save the function internally.</li>\n<li>Upon access, I call the function and set the value as the class value with the same name as the original function.</li>\n</ol>\n\n<p>That's all there is to it. Simple and efficient.</p>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 10634604, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QY47ToTnt-8/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBw6UC7yKYS6fKFAeUnIBMclEZL6Q/mo/photo.jpg?sz=128", "display_name": "hasManyStupidQuestions", "link": "https://stackoverflow.com/users/10634604/hasmanystupidquestions"}, "is_accepted": false, "score": 0, "last_activity_date": 1564599878, "creation_date": 1564599878, "answer_id": 57297381, "question_id": 39498891, "link": "https://stackoverflow.com/questions/39498891/computed-static-property-in-python/57297381#57297381", "title": "Computed static property in python", "body": "<p>Starting in Python 3.8 there will be a <code>cached_property</code> decorator included in the Python builtin/core <code>functools</code> library.</p>\n\n<p><a href=\"https://docs.python.org/dev/library/functools.html?highlight=s#functools.cached_property\" rel=\"nofollow noreferrer\">https://docs.python.org/dev/library/functools.html?highlight=s#functools.cached_property</a></p>\n\n<p>Other questions on this website have similar answers. Some highlights are that one can do</p>\n\n<pre><code>@property\n@functools.lru_cache(1)\n</code></pre>\n\n<p>(both Python builtins) for a similar effect. And that some web server libraries like Flask or Werkzeug already include their own implementations of <code>cached_property</code> decorators.</p>\n\n<p>There are of course other ways (as mentioned in the other answers to this question and the answers to other questions) that one can create their own custom cached property decorators.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/6428723/python-are-property-fields-being-cached-automatically\">python: are property fields being cached automatically?</a><br>\n<a href=\"https://stackoverflow.com/questions/815110/is-there-a-decorator-to-simply-cache-function-return-values\">Is there a decorator to simply cache function return values?</a></p>\n"}], "owner": {"reputation": 285, "user_id": 2008815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/019bbf40daf7ac6d65a14cd6ca07513e?s=128&d=identicon&r=PG", "display_name": "mkohram", "link": "https://stackoverflow.com/users/2008815/mkohram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3641, "favorite_count": 0, "accepted_answer_id": 39499163, "answer_count": 4, "score": 9, "last_activity_date": 1564599878, "creation_date": 1473883943, "question_id": 39498891, "link": "https://stackoverflow.com/questions/39498891/computed-static-property-in-python", "title": "Computed static property in python", "body": "<p>Is it possible to have a static property on a class that would be computed as a one off. The idea would be to be able to do it like so:</p>\n\n<pre><code>class Foo:\n    static_prop = Foo.one_off_static_method()\n\n    @staticmethod\n    def one_off_static_method():\n        return 'bar'\n</code></pre>\n\n<p>I thought of using <code>__new__</code> as well.</p>\n\n<pre><code>Class Foo:\n    def __new__(cls):\n         cls.static_prop = ... do everything here\n</code></pre>\n\n<p>Not sure the implications of that though.</p>\n"}, {"tags": ["python", "subprocess", "multiprocessing"], "answers": [{"comments": [{"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 0, "creation_date": 1473884690, "post_id": 39498888, "comment_id": 66315647, "body": "there <i>is</i> a <code>.check_output()</code> call that returns the output of a command and waits for it to return, you now know."}, {"owner": {"reputation": 404, "user_id": 6394768, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7cf4a99b5a18405e4832d0e35e704c7d?s=128&d=identicon&r=PG&f=1", "display_name": "ascetic652", "link": "https://stackoverflow.com/users/6394768/ascetic652"}, "reply_to_user": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 0, "creation_date": 1473886273, "post_id": 39498888, "comment_id": 66316449, "body": "check_output() returns a byte string, but I want to process the result line by line, is there a good way to do it? @Wayne Werner"}, {"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "reply_to_user": {"reputation": 404, "user_id": 6394768, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7cf4a99b5a18405e4832d0e35e704c7d?s=128&d=identicon&r=PG&f=1", "display_name": "ascetic652", "link": "https://stackoverflow.com/users/6394768/ascetic652"}, "edited": false, "score": 0, "creation_date": 1473899248, "post_id": 39498888, "comment_id": 66320457, "body": "@ascetic652 you mean besides <code>.decode().split(&#39;\\n&#39;)</code>?"}], "tags": [], "owner": {"reputation": 2010, "user_id": 6387050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f70654743f968540cf663914639c082?s=128&d=identicon&r=PG", "display_name": "noteness", "link": "https://stackoverflow.com/users/6387050/noteness"}, "is_accepted": false, "score": 0, "last_activity_date": 1473883914, "creation_date": 1473883914, "answer_id": 39498888, "question_id": 39498831, "link": "https://stackoverflow.com/questions/39498831/will-the-pipe-block-the-parent-process/39498888#39498888", "title": "Will the PIPE block the parent process\uff1f", "body": "<p>Instead of doing </p>\n\n<pre><code>result = Popen(cmdline,shell=False,stdout=PIPE,stderr=PIPE,stdin=PIPE).stdout`\n</code></pre>\n\n<p>You should do:</p>\n\n<pre><code> stdout, stderr = Popen(cmdline,shell=False,stdout=PIPE,stderr=PIPE,stdin=PIPE).communicate()\n</code></pre>\n\n<p><code>stdout</code> is the <code>result</code> you are hoping for. <code>stderr</code> is where the process writes the error outputs.</p>\n"}, {"tags": [], "owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "is_accepted": false, "score": 0, "last_activity_date": 1473884018, "creation_date": 1473884018, "answer_id": 39498901, "question_id": 39498831, "link": "https://stackoverflow.com/questions/39498831/will-the-pipe-block-the-parent-process/39498901#39498901", "title": "Will the PIPE block the parent process\uff1f", "body": "<p>No, what you have done is create a <code>Popen</code> object called <code>result</code>. You need to call <code>result.wait()</code> or more preferably <code>result.communicate()</code>. More on this <a href=\"https://docs.python.org/2/library/subprocess.html#popen-objects\" rel=\"nofollow\">Here</a></p>\n"}], "owner": {"reputation": 404, "user_id": 6394768, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7cf4a99b5a18405e4832d0e35e704c7d?s=128&d=identicon&r=PG&f=1", "display_name": "ascetic652", "link": "https://stackoverflow.com/users/6394768/ascetic652"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 354, "favorite_count": 0, "closed_date": 1473884022, "answer_count": 2, "score": 1, "last_activity_date": 1473887373, "creation_date": 1473883666, "last_edit_date": 1473887373, "question_id": 39498831, "link": "https://stackoverflow.com/questions/39498831/will-the-pipe-block-the-parent-process", "closed_reason": "Duplicate", "title": "Will the PIPE block the parent process\uff1f", "body": "<p>I have a python module like this:</p>\n\n<pre><code>from subprocess import *\n\ncmdline = 'python example.py'\n\nresult = Popen(cmdline,shell=False,stdout=PIPE,stderr=PIPE,stdin=PIPE).stdout\n</code></pre>\n\n<p>I want the parent process to block until the child process finish executing and the parent process can receive the output of the child process. Will the code above serve my purpose? In my understanding, the child process will send its output to PIPE instead of STDOUT, and the parent process will block until the child process exits and the PIPE is closed. Can someone explain where I got misunderstood?</p>\n\n<p>Another thing is either communicate or check_output returns a byte string, but I want to process the results line by line, is there a good way to do it?</p>\n"}, {"tags": ["python", "django", "django-1.8", "inline-formset"], "owner": {"reputation": 53, "user_id": 1924809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7954d731846598982018b9852ffc7a03?s=128&d=identicon&r=PG", "display_name": "primordialooze", "link": "https://stackoverflow.com/users/1924809/primordialooze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 199, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1473883655, "creation_date": 1473883655, "question_id": 39498826, "link": "https://stackoverflow.com/questions/39498826/django-inline-modelform-foreign-key-related-values", "title": "django inline modelform foreign key related values", "body": "<p>I'm just starting playing with django. I read the documentation and similar questions here but I couldn't find a solution, probably I'm missing something really obvious or approaching the issue in the wrong way </p>\n\n<p>I have the following model:</p>\n\n<pre><code>class Interview(models.Model):  \n    nickname  = models.CharField(max_length=25, null=False, blank=False)\n\nclass Question(models.Model):\n    phrase = models.CharField(max_length=200, null=False, blank=False)\n\nclass Answer(models.Model): \n    [...]\n    interview = models.ForeignKey(Interview,on_delete=models.CASCADE, null=False)  \n    question = models.ForeignKey(Question,on_delete=models.DO_NOTHING, null=False)\n    code = models.CharField( max_length=1, choices=CODE_CHOICES, null=True)\n</code></pre>\n\n<p>the phrase field in the question could contain a '*' and when displaying the questions I would like it to be replaced with the interview's nickname.</p>\n\n<p>This is easy in the view to display results:</p>\n\n<pre><code>answers = Answer.objects.filter(interview=interview_obj)\nfor a in answers:\n    a.question.phrase = a.question.phrase.replace('*',a.interview.nickname)\nreturn render(request, 'results.html', {'answers': answers })\n</code></pre>\n\n<p>Anyway I'm not able to do the same with the formset. The following obviously does not work but I didn't find a way to achieve what I want:</p>\n\n<pre><code>class AnswerForm(ModelForm):\n    code = ChoiceField(widget=RadioSelect(renderer=HorizontalRadioRenderer,attrs={'required': 'true'}), choices=Answer.CODE_CHOICES)\n\n    class Meta:\n        model = Answer\n        fields = ['code']\n</code></pre>\n\n<p>in view:</p>\n\n<pre><code>AnswerFormset = inlineformset_factory(Question,Answer,form=AnswerForm,fields=['code'],extra=0)\nanswer_list = Answer.objects.filter(interview=interview_obj)\nfor a in answers:\n    a.question.phrase = a.question.phrase.replace('*',a.interview.nickname)\nformset = AnswerFormset(queryset=answer_list)\nreturn render(request, 'interview.html', { 'formset' : formset, })\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "series"], "answers": [{"comments": [{"owner": {"reputation": 2350, "user_id": 3430345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/765cf9285c540072bdbedc39dee0b5aa?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Abboud", "link": "https://stackoverflow.com/users/3430345/tony-abboud"}, "edited": false, "score": 0, "creation_date": 1473883567, "post_id": 39498794, "comment_id": 66315104, "body": "Perfect! Exactly what I was looking for. Thanks!"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 7, "last_activity_date": 1473883556, "last_edit_date": 1473883556, "creation_date": 1473883482, "answer_id": 39498794, "question_id": 39498729, "link": "https://stackoverflow.com/questions/39498729/compute-the-running-cumulative-maximum-for-a-series-in-pandas/39498794#39498794", "title": "Compute the running (cumulative) maximum for a series in pandas", "body": "<p>Use <code>cummax</code></p>\n\n<pre><code>df.High.cummax()\n\n0    954\n1    954\n2    954\n3    955\n4    956\n5    956\n6    956\n7    956\nName: High, dtype: int64\n</code></pre>\n\n<hr>\n\n<pre><code>df['Max'] = df.High.cummax()\ndf\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/IfnS4.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/IfnS4.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2350, "user_id": 3430345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/765cf9285c540072bdbedc39dee0b5aa?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Abboud", "link": "https://stackoverflow.com/users/3430345/tony-abboud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1778, "favorite_count": 2, "accepted_answer_id": 39498794, "answer_count": 1, "score": 5, "last_activity_date": 1611918548, "creation_date": 1473883266, "last_edit_date": 1539514880, "question_id": 39498729, "link": "https://stackoverflow.com/questions/39498729/compute-the-running-cumulative-maximum-for-a-series-in-pandas", "title": "Compute the running (cumulative) maximum for a series in pandas", "body": "<p>Given:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>d = {\n    'High': [954,\n             953,\n             952,\n             955,\n             956,\n             952,\n             951,\n             950,\n            ]\n}\ndf = pandas.DataFrame(d)\n</code></pre>\n\n<p>I want to add another column which is the max at each index from the beginning. For example the desired column would be:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>'Max': [954, \n        954, \n        954, \n        955, \n        956, \n        956, \n        956, \n        956]\n</code></pre>\n\n<p>I tried with a pandas rolling function but the window cannot be dynamic it seems</p>\n"}, {"tags": ["python", "shell", "arguments"], "answers": [{"tags": [], "owner": {"reputation": 3600, "user_id": 5247911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IpGVs.png?s=128&g=1", "display_name": "Dinesh Pundkar", "link": "https://stackoverflow.com/users/5247911/dinesh-pundkar"}, "is_accepted": true, "score": 19, "last_activity_date": 1473884227, "last_edit_date": 1473884227, "creation_date": 1473883848, "answer_id": 39498877, "question_id": 39498702, "link": "https://stackoverflow.com/questions/39498702/passing-arguments-to-python-from-shell-script/39498877#39498877", "title": "Passing arguments to Python from Shell Script", "body": "<p>If there is space in between argument and argument is not in quotes, then python consider as two different arguments.</p>\n\n<p>That's why the output of print data in the python code is just 1.</p>\n\n<p>Check the below output.</p>\n\n<pre><code>[root@dsp-centos ~]# python dsp.py Dinesh Pundkar\nIn python code\nDinesh\n[root@dsp-centos ~]# python dsp.py \"Dinesh Pundkar\"\nIn python code\nDinesh Pundkar\n[root@dsp-centos ~]#\n</code></pre>\n\n<p><strong><em>So, in your shell script, put $var1 in quotes.</em></strong></p>\n\n<p><strong>Content of shell script(<em>a.sh</em>):</strong></p>\n\n<pre><code>var1=\"Dinesh Pundkar\"\npython dsp.py \"$var1\"\n</code></pre>\n\n<p><strong>Content of python code(<em>dsp.py</em>)</strong>:</p>\n\n<pre><code>import sys\ndata = sys.argv[1]\nprint \"In python code\"\nprint data\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>[root@dsp-centos ~]# sh a.sh\nIn python code\nDinesh Pundkar\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2260, "user_id": 5240970, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/16a645b64ff208b3ba9269dcf90305fd?s=128&d=identicon&r=PG&f=1", "display_name": "Kabard", "link": "https://stackoverflow.com/users/5240970/kabard"}, "is_accepted": false, "score": 2, "last_activity_date": 1473883977, "creation_date": 1473883977, "answer_id": 39498894, "question_id": 39498702, "link": "https://stackoverflow.com/questions/39498702/passing-arguments-to-python-from-shell-script/39498894#39498894", "title": "Passing arguments to Python from Shell Script", "body": "<p>Use Join and list slicing</p>\n\n<pre><code>import sys\ndata = ' '.join(sys.argv[1:])\nprint \"In python code\"\nprint data\nprint type(data)\n</code></pre>\n"}], "owner": {"reputation": 592, "user_id": 3390373, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/100000459972376/picture?type=large", "display_name": "kskp", "link": "https://stackoverflow.com/users/3390373/kskp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29721, "favorite_count": 3, "accepted_answer_id": 39498877, "answer_count": 2, "score": 9, "last_activity_date": 1539907384, "creation_date": 1473883120, "last_edit_date": 1539907384, "question_id": 39498702, "link": "https://stackoverflow.com/questions/39498702/passing-arguments-to-python-from-shell-script", "title": "Passing arguments to Python from Shell Script", "body": "<p>I wrote a small shell script that looks like this:</p>\n\n<pre><code>cd models/syntaxnet\nvar1=$(jq --raw-output '.[\"avl_text\"]' | syntaxnet/demo.sh)\necho $var1\npython /home/sree/python_code1.py $var1\n</code></pre>\n\n<p>My <code>python_code1.py</code> looks like this:</p>\n\n<pre><code>import sys\n\ndata = sys.argv[1]\nprint \"In python code\"\nprint data\nprint type(data)\n</code></pre>\n\n<p>Now, the output of echo $var1 in my shell script is exactly what I wanted to see:</p>\n\n<p><code>1 Check _ VERB VB _ 0 ROOT _ _ 2 out _ PRT RP _ 1 prt _ _ 3 this _ DET DT _ 4 det _ _ 4 video _ NOUN NN _ 1 dobj _ _ 5 about _ ADP IN _ 4 prep _ _ 6 Northwest _ NOUN NNP _ 7 nn _ _ 7 Arkansas _ NOUN NNP _ 5 pobj _ _ 8 - _ . , _ 7 punct _ _ 9 https _ X ADD _ 7 appos _ _</code></p>\n\n<p>But the output of <code>print data</code> in the python code is just <code>1</code>. i.e. the first letter of the argument.</p>\n\n<p>Why is this happening? I want to pass the entire string to the python code.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1473883169, "post_id": 39498689, "comment_id": 66314906, "body": "try this: <code>df[df.result.notnull()]</code>"}, {"owner": {"reputation": 7518, "user_id": 5405782, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KLF69.jpg?s=128&g=1", "display_name": "sparrow", "link": "https://stackoverflow.com/users/5405782/sparrow"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1473883295, "post_id": 39498689, "comment_id": 66314969, "body": "Thanks MaxU, but that also did not work."}, {"owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "edited": false, "score": 1, "creation_date": 1473883354, "post_id": 39498689, "comment_id": 66315000, "body": "What is <code>df[&#39;RAT&#39;]</code>?  Your sample data doesn&#39;t have such a column."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1473883389, "post_id": 39498689, "comment_id": 66315016, "body": "what about: <code>df[df[&#39;RAT&#39;] != &#39;NaN&#39;]</code>?"}, {"owner": {"reputation": 7518, "user_id": 5405782, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KLF69.jpg?s=128&g=1", "display_name": "sparrow", "link": "https://stackoverflow.com/users/5405782/sparrow"}, "reply_to_user": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "edited": false, "score": 0, "creation_date": 1473883525, "post_id": 39498689, "comment_id": 66315078, "body": "@root, sorry that was a typo, I corrected it."}, {"owner": {"reputation": 7518, "user_id": 5405782, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KLF69.jpg?s=128&g=1", "display_name": "sparrow", "link": "https://stackoverflow.com/users/5405782/sparrow"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1473883587, "post_id": 39498689, "comment_id": 66315115, "body": "@MaxU, df[df.result.notnull()] does work if I assign the result back to the dataframe. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 2, "last_activity_date": 1473883298, "creation_date": 1473883298, "answer_id": 39498743, "question_id": 39498689, "link": "https://stackoverflow.com/questions/39498689/drop-null-rows-with-dtype-object-from-a-dataframe-with-pandas/39498743#39498743", "title": "Drop null rows with dtype object from a DataFrame with Pandas", "body": "<p><code>dropna</code> does not work in-place: you have to assign the result to the dataframe itself or it will be lost:</p>\n\n<pre><code> df = df.dropna(subset=['result'])\n</code></pre>\n"}], "owner": {"reputation": 7518, "user_id": 5405782, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KLF69.jpg?s=128&g=1", "display_name": "sparrow", "link": "https://stackoverflow.com/users/5405782/sparrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 612, "favorite_count": 0, "accepted_answer_id": 39498743, "answer_count": 1, "score": 2, "last_activity_date": 1473883486, "creation_date": 1473883076, "last_edit_date": 1473883486, "question_id": 39498689, "link": "https://stackoverflow.com/questions/39498689/drop-null-rows-with-dtype-object-from-a-dataframe-with-pandas", "title": "Drop null rows with dtype object from a DataFrame with Pandas", "body": "<p>I have a DataFrame that looks like this:</p>\n\n<pre><code>Oper    ST  result\nT2  9:24:09 NaN\nT3  9:25:10 Fail\nT4  9:25:36 Pass\nT5  9:25:36 NaN\n</code></pre>\n\n<p>I want to drop the NaN rows from the 'result' column. All columns are dtype object:</p>\n\n<pre><code>df.dtypes\n\nOper    object\nST      object\nresult  object\n</code></pre>\n\n<p>If I print the values and dytpes to a list they appear in this format:</p>\n\n<pre><code>rlist = df['result'].tolist()\nfor r in rlist:    \n    print(r,type(r))\n\n-&gt; nan &lt;class 'float'&gt;\n</code></pre>\n\n<p>I tried these things unsuccessfully:</p>\n\n<p>dropna:</p>\n\n<pre><code>df.dropna(subset=['result'])\n</code></pre>\n\n<p>filtering:</p>\n\n<pre><code>df = df[df['result'] != 'nan']\n</code></pre>\n\n<p>I also tried to find a way to convert the object to a string and then filter but could not find a way to do that either. </p>\n"}, {"tags": ["python", "optimization", "data-fitting"], "comments": [{"owner": {"reputation": 327, "user_id": 5203407, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-VLFuS2mpRWw/AAAAAAAAAAI/AAAAAAAAAEA/3XSHoR865vI/photo.jpg?sz=128", "display_name": "Kostas Belivanis", "link": "https://stackoverflow.com/users/5203407/kostas-belivanis"}, "edited": false, "score": 0, "creation_date": 1473947007, "post_id": 39498668, "comment_id": 66341162, "body": "In addition, I&#39;m trying to find a technique to enforce a smaller standard deviation within a frequency range of interest."}, {"owner": {"reputation": 327, "user_id": 5203407, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-VLFuS2mpRWw/AAAAAAAAAAI/AAAAAAAAAEA/3XSHoR865vI/photo.jpg?sz=128", "display_name": "Kostas Belivanis", "link": "https://stackoverflow.com/users/5203407/kostas-belivanis"}, "edited": false, "score": 0, "creation_date": 1475391655, "post_id": 39498668, "comment_id": 66919889, "body": "No ideas? I&#39;m trying to use the pandas data frame instead of classes to organize my data."}], "owner": {"reputation": 327, "user_id": 5203407, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-VLFuS2mpRWw/AAAAAAAAAAI/AAAAAAAAAEA/3XSHoR865vI/photo.jpg?sz=128", "display_name": "Kostas Belivanis", "link": "https://stackoverflow.com/users/5203407/kostas-belivanis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1473883005, "creation_date": 1473883005, "question_id": 39498668, "link": "https://stackoverflow.com/questions/39498668/optimization-in-selection-and-scaling-to-fit-a-target", "title": "Optimization in selection and scaling to fit a target", "body": "<p>I have a suite of 1000 signals and a target power spectral density. I don't want to intervene in the signals, but only scaling them (from 0.5 to 3.0 - ideally closer to 1.0).</p>\n\n<p>I want to select the N best (say 10) out of 1000, that when scaled from 0.5 to 3.0 (up to the second decimal - e.g. 0.78), match on average the best way my target.</p>\n\n<p>However, there are constraints on the average of the 10 signals (cannot exceed or be less than the target by a specific percentage).</p>\n\n<p>Any ideas on how to use a genetic algorithm to find an optimal solution? Brute forcing it would kill my pc :P</p>\n"}, {"tags": ["python", "pycharm", "pypi"], "answers": [{"comments": [{"owner": {"reputation": 5790, "user_id": 4545506, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f3c51b2c3b7f4c741798f2a7dd80605e?s=128&d=identicon&r=PG&f=1", "display_name": "ykaragol", "link": "https://stackoverflow.com/users/4545506/ykaragol"}, "edited": false, "score": 0, "creation_date": 1473884883, "post_id": 39498957, "comment_id": 66315760, "body": "Welcome to Stackoverflow! You can improve your answer by adding some description about that issue. So that even the link will become broken, your answer will not be obsolete."}], "tags": [], "owner": {"reputation": 79, "user_id": 6111938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cb7cf570bc7326afd32b61ebf7de2a3?s=128&d=identicon&r=PG&f=1", "display_name": "SchwiftyPython", "link": "https://stackoverflow.com/users/6111938/schwiftypython"}, "is_accepted": false, "score": 0, "last_activity_date": 1473884260, "creation_date": 1473884260, "answer_id": 39498957, "question_id": 39498602, "link": "https://stackoverflow.com/questions/39498602/pycharm-error-loading-package-list/39498957#39498957", "title": "PyCharm Error Loading Package List", "body": "<p>This was an issue this past summer: <a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/207207469-PyCharm-interpreter-can-t-find-new-packages\" rel=\"nofollow\">https://intellij-support.jetbrains.com/hc/en-us/community/posts/207207469-PyCharm-interpreter-can-t-find-new-packages</a></p>\n\n<p>Have you tried pulling from <a href=\"http://pypi.python.org/simple/\" rel=\"nofollow\">http://pypi.python.org/simple/</a> ?</p>\n"}, {"tags": [], "owner": {"reputation": 2447, "user_id": 3006366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVcKL.png?s=128&g=1", "display_name": "ode2k", "link": "https://stackoverflow.com/users/3006366/ode2k"}, "is_accepted": false, "score": 0, "last_activity_date": 1473884450, "creation_date": 1473884450, "answer_id": 39499006, "question_id": 39498602, "link": "https://stackoverflow.com/questions/39498602/pycharm-error-loading-package-list/39499006#39499006", "title": "PyCharm Error Loading Package List", "body": "<p>You should update to PyCharm 2016.2.3</p>\n\n<p><code>Help -&gt; Check for Updates...</code></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8392312, "user_type": "registered", "profile_image": "https://graph.facebook.com/1535048996556499/picture?type=large", "display_name": "\u9ad8\u6893\u4e54", "link": "https://stackoverflow.com/users/8392312/%e9%ab%98%e6%a2%93%e4%b9%94"}, "is_accepted": false, "score": 1, "last_activity_date": 1503366817, "creation_date": 1503366817, "answer_id": 45807803, "question_id": 39498602, "link": "https://stackoverflow.com/questions/39498602/pycharm-error-loading-package-list/45807803#45807803", "title": "PyCharm Error Loading Package List", "body": "<p>First of all, I think you should use Default Preferences in File to install packages. Second, you should check \"Manage Repositories\" if there's any unavailable source.</p>\n"}, {"tags": [], "owner": {"reputation": 2082, "user_id": 468111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C0O2t.jpg?s=128&g=1", "display_name": "Chris Broski", "link": "https://stackoverflow.com/users/468111/chris-broski"}, "is_accepted": true, "score": 26, "last_activity_date": 1524842923, "creation_date": 1524842923, "answer_id": 50065680, "question_id": 39498602, "link": "https://stackoverflow.com/questions/39498602/pycharm-error-loading-package-list/50065680#50065680", "title": "PyCharm Error Loading Package List", "body": "<p>I am behind a corporate firewall and had this problem. All I had to do was go to <code>Settings/Appearance and Behavior/System Settings/HTTP Proxy</code> and check <code>Auto-detect proxy settings</code> and it worked.</p>\n"}, {"comments": [{"owner": {"reputation": 541, "user_id": 2829863, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/qYmeE.png?s=128&g=1", "display_name": "Comrade Che", "link": "https://stackoverflow.com/users/2829863/comrade-che"}, "edited": false, "score": 0, "creation_date": 1553747011, "post_id": 53623741, "comment_id": 97501476, "body": "I deleted the lines accidentally listed in the &quot;Manage Repositories&quot; list and this fixed this error."}, {"owner": {"reputation": 51, "user_id": 6673277, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rSbuf0uJvqU/AAAAAAAAAAI/AAAAAAAAHBM/Kxxppynz5Ag/photo.jpg?sz=128", "display_name": "Benjamin Wall", "link": "https://stackoverflow.com/users/6673277/benjamin-wall"}, "edited": false, "score": 0, "creation_date": 1594911136, "post_id": 53623741, "comment_id": 111298358, "body": "I forgot that I had added a repository incorrectly when trying to find a package that already came preinstalled, so deleting that solved my issue. Thank you!"}], "tags": [], "owner": {"reputation": 165, "user_id": 6934384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yhvgz.png?s=128&g=1", "display_name": "Nick PV", "link": "https://stackoverflow.com/users/6934384/nick-pv"}, "is_accepted": false, "score": 7, "last_activity_date": 1543975712, "last_edit_date": 1543975712, "creation_date": 1543972184, "answer_id": 53623741, "question_id": 39498602, "link": "https://stackoverflow.com/questions/39498602/pycharm-error-loading-package-list/53623741#53623741", "title": "PyCharm Error Loading Package List", "body": "<p>I got the same problem and solution was that I got some other repositories added to repositories manager. So, make sure that you don't have anything  extra then </p>\n\n<blockquote>\n  <p><a href=\"https://pypi.python.org/simple\" rel=\"noreferrer\">https://pypi.python.org/simple</a> \n   at Repositories </p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/hrnBn.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/hrnBn.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/hrnBn.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/60SHy.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 23213, "user_id": 7131757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wvEUE.jpg?s=128&g=1", "display_name": "Giorgos Myrianthous", "link": "https://stackoverflow.com/users/7131757/giorgos-myrianthous"}, "is_accepted": false, "score": 0, "last_activity_date": 1554892885, "last_edit_date": 1554892885, "creation_date": 1554891251, "answer_id": 55610016, "question_id": 39498602, "link": "https://stackoverflow.com/questions/39498602/pycharm-error-loading-package-list/55610016#55610016", "title": "PyCharm Error Loading Package List", "body": "<p>If you are running PyCharm on OSX behind a proxy you need to define proxy configuration the following should do the trick: </p>\n\n<ul>\n<li>Click on <em>PyCharm > Preferences > Appearance and Behavior > System Settings -> HTTP Proxy</em></li>\n<li>Either select Auto-detect proxy settings</li>\n<li>Or select <em>Manual proxy configuration</em>\n\n<ol>\n<li>Define the <em>Host Name</em> and <em>Port</em></li>\n<li>and optionally <em>Proxy Authentication</em> if required</li>\n</ol></li>\n<li>Click <em>Apply</em></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 30786, "user_id": 2252113, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/TTazp.png?s=128&g=1", "display_name": "Hitesh Sahu", "link": "https://stackoverflow.com/users/2252113/hitesh-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1580916396, "creation_date": 1580916396, "answer_id": 60079057, "question_id": 39498602, "link": "https://stackoverflow.com/questions/39498602/pycharm-error-loading-package-list/60079057#60079057", "title": "PyCharm Error Loading Package List", "body": "<p><strong>Update PyCharm January 2020 Build</strong></p>\n\n<p>If you are behind a proxy then </p>\n\n<ul>\n<li>Go to <strong>File->Settings</strong> search for proxy in the settings dialog</li>\n<li>Check <em>Auto-Detect Proxy Settings</em>:</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/lVIiq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lVIiq.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 1100, "user_id": 3827844, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/745bb2b4d10534d0c970fde38df9da7b?s=128&d=identicon&r=PG&f=1", "display_name": "pk786", "link": "https://stackoverflow.com/users/3827844/pk786"}, "is_accepted": false, "score": 0, "last_activity_date": 1582134644, "creation_date": 1582134644, "answer_id": 60306400, "question_id": 39498602, "link": "https://stackoverflow.com/questions/39498602/pycharm-error-loading-package-list/60306400#60306400", "title": "PyCharm Error Loading Package List", "body": "<p>All the above solution did not work for me, I had to manually install the package using proxy:</p>\n\n<pre><code>pip install -U &lt;package_name&gt; --user --proxy=&lt;your proxy&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 163, "user_id": 10547264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b30c862a9d857e96da3d2e7e4b227f4c?s=128&d=identicon&r=PG&f=1", "display_name": "Riya John", "link": "https://stackoverflow.com/users/10547264/riya-john"}, "is_accepted": false, "score": 0, "last_activity_date": 1591285374, "creation_date": 1591285374, "answer_id": 62198698, "question_id": 39498602, "link": "https://stackoverflow.com/questions/39498602/pycharm-error-loading-package-list/62198698#62198698", "title": "PyCharm Error Loading Package List", "body": "<p>If you are using a Corporate license, make sure you are connected to your corporate VPN</p>\n"}, {"tags": [], "owner": {"reputation": 132, "user_id": 8009979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ad7d710672070a59b9388dad138c481?s=128&d=identicon&r=PG&f=1", "display_name": "Ali Hassan", "link": "https://stackoverflow.com/users/8009979/ali-hassan"}, "is_accepted": false, "score": 0, "last_activity_date": 1596636721, "creation_date": 1596636721, "answer_id": 63267060, "question_id": 39498602, "link": "https://stackoverflow.com/questions/39498602/pycharm-error-loading-package-list/63267060#63267060", "title": "PyCharm Error Loading Package List", "body": "<p>I was having the same problem. I tried the HTTP option but it didn't work, then i opened manage repositories and deleted all except <a href=\"https://pypi.python.org/simple\" rel=\"nofollow noreferrer\">https://pypi.python.org/simple</a> and it worked.</p>\n"}], "owner": {"reputation": 355, "user_id": 6832560, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/df03a2b45b39ed4b6d8a57ba72e70576?s=128&d=identicon&r=PG&f=1", "display_name": "sevpants", "link": "https://stackoverflow.com/users/6832560/sevpants"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39857, "favorite_count": 3, "accepted_answer_id": 50065680, "answer_count": 10, "score": 14, "last_activity_date": 1596636721, "creation_date": 1473882748, "last_edit_date": 1473883456, "question_id": 39498602, "link": "https://stackoverflow.com/questions/39498602/pycharm-error-loading-package-list", "title": "PyCharm Error Loading Package List", "body": "<p>I just downloaded PyCharm the other day and wanted to download a few packages. I'm using Windows 10 with PyCharm 2016.2.2 and python 3.5.2. When I go to the available packages screen it continually states:</p>\n\n<blockquote>\n  <p>Error loading package list:pypi.python.org</p>\n</blockquote>\n\n<p>I was just trying to download BeautifulSoup and I'm clearly missing something. Any help would be wonderful.</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 9987, "user_id": 3809375, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EA10l.png?s=128&g=1", "display_name": "BPL", "link": "https://stackoverflow.com/users/3809375/bpl"}, "edited": false, "score": 3, "creation_date": 1473882693, "post_id": 39498525, "comment_id": 66314662, "body": "You&#39;re not using properly the write method, you forgot parenthesis <code>trees = open(&#39;trees.txt&#39;, &#39;w&#39;).write(&quot;\\n&quot;.join([&quot;Tree1&quot;, &quot;Tree2&quot;, &quot;Tree3&quot;]))</code> . I&#39;d recommend you go through some of the existing <a href=\"https://docs.python.org/2/tutorial/inputoutput.html\" rel=\"nofollow noreferrer\">tutorials</a> out there"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 6832532, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5fb07f3cc49e44194f5bd10b306f448e?s=128&d=identicon&r=PG&f=1", "display_name": "lynkyra", "link": "https://stackoverflow.com/users/6832532/lynkyra"}, "edited": false, "score": 0, "creation_date": 1474073368, "post_id": 39498613, "comment_id": 66397389, "body": "Thanks for your thorough answer! I have not learned how to use &quot;with&quot; yet, so I&#39;m going to stick with the first line you suggested. I tried to assign the list to &quot;trees&quot; because in the next problem I have to print a specific item from the list through its index. I know how to answer that question, but I don&#39;t understand how I can assign my list to the variable &quot;trees&quot; so I can print from it. Do you have any suggestions?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 59, "user_id": 6832532, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5fb07f3cc49e44194f5bd10b306f448e?s=128&d=identicon&r=PG&f=1", "display_name": "lynkyra", "link": "https://stackoverflow.com/users/6832532/lynkyra"}, "edited": false, "score": 0, "creation_date": 1474096521, "post_id": 39498613, "comment_id": 66400846, "body": "just <code>trees = [&quot;Tree1&quot;, &quot;Tree2&quot;, &quot;Tree3&quot;]</code>. There are some good books &amp; online tutorials you know :)"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 3, "last_activity_date": 1473882783, "creation_date": 1473882783, "answer_id": 39498613, "question_id": 39498525, "link": "https://stackoverflow.com/questions/39498525/how-can-i-create-a-new-file-containing-a-list-with-a-single-line-of-code/39498613#39498613", "title": "How can I create a new file containing a list with a single line of code?", "body": "<p>Just apply <code>write</code> on the file handle. To get proper text and not python list representation, you have to join the list into multiline text (if it's what you want!).</p>\n\n<p>Your fixed code (not the best there is, though):</p>\n\n<pre><code>open('trees.txt', 'w').write(\"\\n\".join([\"Tree1\", \"Tree2\", \"Tree3\"]))\n</code></pre>\n\n<p>BTW: I removed the assignment of <code>trees = open(...</code> since you get the return of the <code>write</code> operation which is <code>None</code></p>\n\n<p>note: this is a oneliner but not the proper way to go. Better use <code>with open</code></p>\n\n<pre><code>with open('trees.txt', 'w') as f: f.write(\"\\n\".join([\"Tree1\", \"Tree2\", \"Tree3\"]))\n</code></pre>\n\n<p>that way you are sure that the file is closed properly when going out of scope</p>\n"}], "owner": {"reputation": 59, "user_id": 6832532, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5fb07f3cc49e44194f5bd10b306f448e?s=128&d=identicon&r=PG&f=1", "display_name": "lynkyra", "link": "https://stackoverflow.com/users/6832532/lynkyra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 39498613, "answer_count": 1, "score": 1, "last_activity_date": 1473882783, "creation_date": 1473882451, "last_edit_date": 1473882505, "question_id": 39498525, "link": "https://stackoverflow.com/questions/39498525/how-can-i-create-a-new-file-containing-a-list-with-a-single-line-of-code", "title": "How can I create a new file containing a list with a single line of code?", "body": "<p>I know this is probably very easy to do, but I am very new to coding. I can accomplish this in more than one line, but for my assignment it needs to be done in one line.</p>\n\n<p>This is what I have, which raises an error that I don't understand.</p>\n\n<pre><code>trees = open('trees.txt', 'w').write[\"Tree1\", \"Tree2\", \"Tree3\"]\n</code></pre>\n\n<blockquote>\n  <p>TypeError: 'builtin_function_or_method' object is not subscriptable</p>\n</blockquote>\n\n<p>I imagine that my problem is that I can't just tack on the \"write\" command where/how I did, but I am lost on how to do this correctly. Thanks in advance for any help or hints!</p>\n"}, {"tags": ["python", "linux", "mongodb", "pymongo-3.x"], "answers": [{"tags": [], "owner": {"reputation": 2895, "user_id": 1092767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd8a0d23131c8bfa875a52034bbefef?s=128&d=identicon&r=PG", "display_name": "Adam Harrison", "link": "https://stackoverflow.com/users/1092767/adam-harrison"}, "is_accepted": true, "score": 1, "last_activity_date": 1473914457, "creation_date": 1473914457, "answer_id": 39503243, "question_id": 39498500, "link": "https://stackoverflow.com/questions/39498500/how-to-use-pymongo-command-updateuser/39503243#39503243", "title": "How to use pymongo command updateUser", "body": "<p>The python code is executing the MongoDB command \"updateUser\" on the database side. The command being executed in your code doesn't match the syntax shown in the <a href=\"https://docs.mongodb.com/manual/reference/command/updateUser/\" rel=\"nofollow\">updateUser documentation</a>.</p>\n\n<p>Try the following: </p>\n\n<pre><code>db.command( { updateUser: \"&lt;username&gt;\",\n pwd: \"&lt;cleartext new password&gt;\",\n roles: [\n  // specify any roles assigned to this user. \n ]\n})\n</code></pre>\n\n<p>The command will completely replace the database user, so any and all role or permission information will need to be specified in the update command.</p>\n"}], "owner": {"reputation": 53, "user_id": 6717852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z9w6U.jpg?s=128&g=1", "display_name": "Ricardo Borges", "link": "https://stackoverflow.com/users/6717852/ricardo-borges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 424, "favorite_count": 0, "accepted_answer_id": 39503243, "answer_count": 1, "score": 1, "last_activity_date": 1473914457, "creation_date": 1473882335, "question_id": 39498500, "link": "https://stackoverflow.com/questions/39498500/how-to-use-pymongo-command-updateuser", "title": "How to use pymongo command updateUser", "body": "<p>How do i use pymongo command updateUser ?</p>\n\n<p>I've tried the following commands but with no success:</p>\n\n<pre><code>db.command({'updateUser': 'my_user','update':{'$set':{\"pwd\":\"my_pwd\"}}})\n</code></pre>\n\n<p>And </p>\n\n<pre><code>db.command('updateUser', {\"updateUser\":\"my_user\",\"pwd\":\"my_pwd\"})\n</code></pre>\n\n<p>Returns</p>\n\n<pre><code>pymongo.errors.OperationFailure: Must specify at least one field to update in updateUser\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "dictionary", "initialization"], "answers": [{"comments": [{"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1473881911, "post_id": 39498333, "comment_id": 66314284, "body": "Exaclty. <code>self = {}</code> just changed the meaning of <code>self</code> within <code>__init__</code>, so it no longer referred to the actual <i>self</i>, but to a new dict instead."}, {"owner": {"reputation": 23, "user_id": 6767515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33be2a0853c81fd496dbe5103166c1be?s=128&d=identicon&r=PG&f=1", "display_name": "docff", "link": "https://stackoverflow.com/users/6767515/docff"}, "edited": false, "score": 0, "creation_date": 1473882250, "post_id": 39498333, "comment_id": 66314439, "body": "I understand now that I need to use super, but could you explain what <code>self = {}</code> does?"}, {"owner": {"reputation": 23605, "user_id": 1016216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xF5Ew.png?s=128&g=1", "display_name": "L3viathan", "link": "https://stackoverflow.com/users/1016216/l3viathan"}, "edited": false, "score": 0, "creation_date": 1473883020, "post_id": 39498333, "comment_id": 66314837, "body": "You don&#39;t even need to call <code>super().__init__()</code>."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "reply_to_user": {"reputation": 23605, "user_id": 1016216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xF5Ew.png?s=128&g=1", "display_name": "L3viathan", "link": "https://stackoverflow.com/users/1016216/l3viathan"}, "edited": false, "score": 0, "creation_date": 1473883336, "post_id": 39498333, "comment_id": 66314987, "body": "@L3viathan - can you elaborate?"}, {"owner": {"reputation": 23605, "user_id": 1016216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xF5Ew.png?s=128&g=1", "display_name": "L3viathan", "link": "https://stackoverflow.com/users/1016216/l3viathan"}, "edited": false, "score": 0, "creation_date": 1473883454, "post_id": 39498333, "comment_id": 66315035, "body": "@Rob\u1d69 Since we&#39;re subclassing <code>dict</code>, it is not necessary to call the <code>__init__</code> method of the superclass; it will behave like a dictionary anyways."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "reply_to_user": {"reputation": 23605, "user_id": 1016216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xF5Ew.png?s=128&g=1", "display_name": "L3viathan", "link": "https://stackoverflow.com/users/1016216/l3viathan"}, "edited": false, "score": 1, "creation_date": 1473883728, "post_id": 39498333, "comment_id": 66315190, "body": "@L3viathan - do you have some support for that? Is that behavior documented? I can imagine a <code>dict</code> implementation that would require <code>__init__()</code> to be called."}, {"owner": {"reputation": 23605, "user_id": 1016216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xF5Ew.png?s=128&g=1", "display_name": "L3viathan", "link": "https://stackoverflow.com/users/1016216/l3viathan"}, "edited": false, "score": 0, "creation_date": 1473884088, "post_id": 39498333, "comment_id": 66315360, "body": "@Rob\u1d69 OPs example <a href=\"https://repl.it/D9nF/0\" rel=\"nofollow noreferrer\">just works without</a>. Of course there are cases where you want to call <code>__init__()</code>, e.g. when you&#39;re preinitializing it from keyword arguments. This is no special behaviour, just the fact that <code>dict.__init__</code> doesn&#39;t do anything special if you give it no arguments."}], "tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": true, "score": 2, "last_activity_date": 1473882306, "last_edit_date": 1495542769, "creation_date": 1473881718, "answer_id": 39498333, "question_id": 39498302, "link": "https://stackoverflow.com/questions/39498302/initialising-dictionary-like-class/39498333#39498333", "title": "Initialising dictionary like class", "body": "<p>This line doesn't do what you think it does:</p>\n\n<pre><code>    self = {}\n</code></pre>\n\n<p>That line creates a new object of type <code>dict</code>, and binds the local name <code>self</code> to it. This is wholly unrelated to the previous value of <code>self</code>, which is lost. And, since <code>self</code> is a local variable, the object created by this line will be marked for deletion when <code>__init__()</code> returns.</p>\n\n<p>Try this instead:</p>\n\n<pre><code>super(fileInfo, self).__init__()\n</code></pre>\n\n<p>This neither creates nor destroys any objects, but modifies the object referred to by <code>self</code>.</p>\n\n<p>Reference:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/576169/understanding-python-super-with-init-methods\">Understanding Python super() with __init__() methods</a></li>\n<li><a href=\"https://docs.python.org/2/reference/datamodel.html\" rel=\"nofollow noreferrer\">https://docs.python.org/2/reference/datamodel.html</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 6832334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s50bk.jpg?s=128&g=1", "display_name": "Jarvis", "link": "https://stackoverflow.com/users/6832334/jarvis"}, "is_accepted": false, "score": 0, "last_activity_date": 1473882379, "last_edit_date": 1473882379, "creation_date": 1473882056, "answer_id": 39498430, "question_id": 39498302, "link": "https://stackoverflow.com/questions/39498302/initialising-dictionary-like-class/39498430#39498430", "title": "Initialising dictionary like class", "body": "<p>The <code>__init__</code> method of any class is called once you create an instance of the class. You can't call it manually to instantiate the class, but use the class name.</p>\n\n<p>Also, you are not really initializing a class that inherits it's methods and properties from <code>dict</code>. You need to use <a href=\"https://docs.python.org/2/library/functions.html#super\" rel=\"nofollow\"><code>super</code></a> for that. Also, this is a case where calling <code>__init__</code> makes actual sense.</p>\n\n<pre><code>class fileInfo(dict):\n    def __init__(self, name, typ, size = 1):\n        super(fileInfo, self).__init__()\n\n        self[\"name\"] = name\n        self[\"type\"] = typ\n        self[\"size\"] = size\n\n    def __getitem__(self, key):\n        if key == \"name\":\n            return dict.__getitem__(self, \"name\")+ \".\" + dict.__getitem__(self, \"type\")\n        return dict.__getitem__(self, key)\n\nfile_info = fileInfo(\"file-name\", \"txt\", 100)\n\nprint file_info[\"name\"]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>file-name.txt\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6767515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33be2a0853c81fd496dbe5103166c1be?s=128&d=identicon&r=PG&f=1", "display_name": "docff", "link": "https://stackoverflow.com/users/6767515/docff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 39498333, "answer_count": 2, "score": 2, "last_activity_date": 1542518174, "creation_date": 1473881595, "last_edit_date": 1542518174, "question_id": 39498302, "link": "https://stackoverflow.com/questions/39498302/initialising-dictionary-like-class", "title": "Initialising dictionary like class", "body": "<pre><code>class fileInfo(dict):\n    def __init__(self, name, typ, size = 1):\n        self = {}\n        self[\"name\"] = name\n        self[\"type\"] = typ\n        self[\"size\"] = size\n\n    def __getitem__(self, key):\n        if key == \"name\":\n            return dict.__getitem__(self, \"name\")+ \".\" + dict.__getitem__(self, \"type\")\n        return dict.__getitem__(self, key)\n</code></pre>\n\n<p>I have created this class, but I have problems with the <strong>init</strong> function.\nWhen I try to initialize an object of this class, the <strong>init</strong> function returns me an empty dictionary.</p>\n\n<p>What am I not understanding as far as the initialization function is concerned?</p>\n"}, {"tags": ["python", "wxpython", "listctrl"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1473882389, "post_id": 39498279, "comment_id": 66314501, "body": "why do you want to do that?"}, {"owner": {"reputation": 85, "user_id": 6168474, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6be2e698e738c8dea7d4ab9e9e22eaa1?s=128&d=identicon&r=PG&f=1", "display_name": "Cathy_Hanna", "link": "https://stackoverflow.com/users/6168474/cathy-hanna"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1473882607, "post_id": 39498279, "comment_id": 66314625, "body": "Because I want to be able to edit a listCtrl field. It&#39;s not working."}, {"owner": {"reputation": 5783, "user_id": 395984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57d4a16205f08542f455a3f1a15ab2ce?s=128&d=identicon&r=PG", "display_name": "RobinDunn", "link": "https://stackoverflow.com/users/395984/robindunn"}, "edited": false, "score": 0, "creation_date": 1473889014, "post_id": 39498279, "comment_id": 66317578, "body": "It looks like you may be using a Phoenix snapshot of wxPython, is that the case?  Either way, which version?"}, {"owner": {"reputation": 85, "user_id": 6168474, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6be2e698e738c8dea7d4ab9e9e22eaa1?s=128&d=identicon&r=PG&f=1", "display_name": "Cathy_Hanna", "link": "https://stackoverflow.com/users/6168474/cathy-hanna"}, "edited": false, "score": 0, "creation_date": 1473941270, "post_id": 39498279, "comment_id": 66337194, "body": "Yes, I am using Phoenix 3.0.3.dev2276+1080849 msw (phoenix)"}, {"owner": {"reputation": 5783, "user_id": 395984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57d4a16205f08542f455a3f1a15ab2ce?s=128&d=identicon&r=PG", "display_name": "RobinDunn", "link": "https://stackoverflow.com/users/395984/robindunn"}, "edited": false, "score": 0, "creation_date": 1474040068, "post_id": 39498279, "comment_id": 66384695, "body": "Try updating it to a newer build.  I added some unittests yesterday for checking those <code>ListEvent</code> properties and they passed so it is something that has been changed since the version you are using."}, {"owner": {"reputation": 85, "user_id": 6168474, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6be2e698e738c8dea7d4ab9e9e22eaa1?s=128&d=identicon&r=PG&f=1", "display_name": "Cathy_Hanna", "link": "https://stackoverflow.com/users/6168474/cathy-hanna"}, "edited": false, "score": 0, "creation_date": 1474562314, "post_id": 39498279, "comment_id": 66592421, "body": "Thank you. I updated and it works as expected."}], "owner": {"reputation": 85, "user_id": 6168474, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6be2e698e738c8dea7d4ab9e9e22eaa1?s=128&d=identicon&r=PG&f=1", "display_name": "Cathy_Hanna", "link": "https://stackoverflow.com/users/6168474/cathy-hanna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1473881521, "creation_date": 1473881521, "question_id": 39498279, "link": "https://stackoverflow.com/questions/39498279/wxwidgets-attributeerror-on-editable-listctrl", "title": "wxWidgets AttributeError on editable listctrl", "body": "<p>I have copied an example of an editable ListCtrl from <a href=\"http://www.blog.pythonlibrary.org/2011/01/04/wxpython-wx-listctrl-tips-and-tricks/\" rel=\"nofollow\">http://www.blog.pythonlibrary.org/2011/01/04/wxpython-wx-listctrl-tips-and-tricks/</a> . I have changed <em>InsertStringItem</em> and <em>SetStringItem</em> to <em>InsertItem</em> and <em>SetItem</em>. When I try to run this I get the following error</p>\n\n<p>Traceback (most recent call last):\n  File \"C:\\Python27\\lib\\site-packages\\wx\\lib\\mixins\\listctrl.py\", line 560, in OnLeftDown\n    self.OpenEditor(col, row)\n  File \"C:\\Python27\\lib\\site-packages\\wx\\lib\\mixins\\listctrl.py\", line 568, in OpenEditor\n    evt.Index = row\nAttributeError: can't set attribute</p>\n\n<p>I am using Python 2.7.10 on Windows 10.</p>\n\n<p>How do I fix this?</p>\n"}, {"tags": ["python", "python-3.x", "build", "installation"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1473881554, "post_id": 39498250, "comment_id": 66314123, "body": "It works like any other terminal command: use the <code>python</code> executable to run the <code>setup.py</code> file with the argument <code>build</code>. There is plenty of material out there on <code>setup.py</code> installations, this question is very broad as it stands."}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1473881715, "post_id": 39498250, "comment_id": 66314199, "body": "Ah, it&#39;s an <i>argument</i> to setup.py. I&#39;ve never written a module requiring an argument like that yet. I&#39;ll have to learn about it. Thanks."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 1, "creation_date": 1473881719, "post_id": 39498250, "comment_id": 66314202, "body": "&quot;build&quot; is just a parameter passed into <code>setup.py</code>.   Python programs can have their own parameters, and what they are is entirely dependant on the program (setup.py) being run.  Some will take filenames as parameters, some will take user names, many take nothing.  The meaning can only be determined by reading the code or the documentation for the program."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 2, "creation_date": 1473881778, "post_id": 39498250, "comment_id": 66314228, "body": "The arguments are visible in python as a list <code>sys.argv</code>."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1473881793, "post_id": 39498250, "comment_id": 66314241, "body": "Strictly, you&#39;re passing two arguments to <code>python</code>, which interprets the first argument as a file to execute and pass the arguments along to."}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1473882325, "post_id": 39498250, "comment_id": 66314476, "body": "I just posted an image of the file contents where I am running these commands. I see the <code>setup.py</code> file but not any <code>install</code> or <code>build</code> files. Are these passed as string arguments to setup.py then?"}, {"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1473882403, "post_id": 39498250, "comment_id": 66314509, "body": "&quot;The arguments are visible in python as a list sys.argv. \u2013 cdarke 9 mins ago&quot;"}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1473882475, "post_id": 39498250, "comment_id": 66314554, "body": "Ok, so a list of strings...got it (I think). So now I&#39;m going to go search the <code>setup.py</code> module for the words &quot;build&quot; and &quot;install&quot; so I can see where it looks for those arguments to determine what to do."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6832531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d997ec9eda64048ebd1276955bb5c4b6?s=128&d=identicon&r=PG&f=1", "display_name": "George Ashmore", "link": "https://stackoverflow.com/users/6832531/george-ashmore"}, "is_accepted": false, "score": 0, "last_activity_date": 1473887867, "last_edit_date": 1473887867, "creation_date": 1473882587, "answer_id": 39498563, "question_id": 39498250, "link": "https://stackoverflow.com/questions/39498250/i-dont-understand-this-python-build-synax-python3-setup-py-build/39498563#39498563", "title": "I don&#39;t understand this python build synax &quot;python3 setup.py build&quot;", "body": "<p>From my use of Python in the terminal, this command tells Python 'python3', so whatever version of Python 3.x your system is running, 'setup.py' is the Python script you're running and 'build' and 'install' are part of the distutils module to make it easier to install modules.</p>\n"}], "owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1473887867, "creation_date": 1473881429, "last_edit_date": 1492086165, "question_id": 39498250, "link": "https://stackoverflow.com/questions/39498250/i-dont-understand-this-python-build-synax-python3-setup-py-build", "title": "I don&#39;t understand this python build synax &quot;python3 setup.py build&quot;", "body": "<p>Can someone please explain this build syntax here?</p>\n\n<pre><code>python3 setup.py build\nsudo python3 setup.py install\n</code></pre>\n\n<p>Source: <a href=\"https://askubuntu.com/a/406410/327339\">https://askubuntu.com/a/406410/327339</a></p>\n\n<p>I just used the instructions at the source above to install pygame in python 3.x, and it worked great, but I don't understand the syntax of the commands, and I don't know where to find documentation on it. </p>\n\n<p><code>python3 file.py</code> calls a given module (<code>file.py</code> in this case, or <code>setup.py</code> above), but what about the word <em>after</em> that, ie: \"build\" in the command above? Is that a built-in Python command, is that a folder where outputs from setup.py are going, or what is it? </p>\n\n<p>Same with the \"install\" command. Can you please explain that syntax and help me find any relevant documentation? I tried searching around for a while, ex \"python3 build\", \"python 3 module install\", \"python 3 module build,\" etc, but can't seem to find anything very informative on the matter.</p>\n\n<p>Also, what exactly are the build and install commands doing?</p>\n\n<p>Note: here is the contents of the \"pygame\" folder where I am running these commands.</p>\n\n<p><a href=\"https://i.stack.imgur.com/E4T3E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/E4T3E.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "selenium", "firefox"], "comments": [{"owner": {"reputation": 7294, "user_id": 4183498, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/USkeW.jpg?s=128&g=1", "display_name": "Du\u0161an Ma\u010far", "link": "https://stackoverflow.com/users/4183498/du%c5%a1an-ma%c4%8far"}, "edited": false, "score": 0, "creation_date": 1473881579, "post_id": 39498226, "comment_id": 66314134, "body": "As per @alecxe suggestion: <i>downgrade Firefox to 47</i>; source: <a href=\"http://stackoverflow.com/q/39435532/4183498\">stackoverflow.com/q/39435532/4183498</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6810221"}, "reply_to_user": {"reputation": 7294, "user_id": 4183498, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/USkeW.jpg?s=128&g=1", "display_name": "Du\u0161an Ma\u010far", "link": "https://stackoverflow.com/users/4183498/du%c5%a1an-ma%c4%8far"}, "edited": false, "score": 0, "creation_date": 1473882046, "post_id": 39498226, "comment_id": 66314346, "body": "Ah, thank you so much. I was searching for an hour but I didn&#39;t find that answer."}], "owner": {"user_type": "does_not_exist", "display_name": "user6810221"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1473882056, "answer_count": 0, "score": 1, "last_activity_date": 1473881310, "creation_date": 1473881310, "question_id": 39498226, "link": "https://stackoverflow.com/questions/39498226/selenium-cant-load-profile-python", "closed_reason": "Duplicate", "title": "Selenium can&#39;t load profile (Python)", "body": "<p>I'm trying to use Selenium to automate some stuff with Python, but I can't get the website loading. I've been searching for solution but the well answered articles about this topic tend to be 3-5 years old and the answers I've found haven't fixed it so far.</p>\n\n<ul>\n<li>My OS is Windows 8.1</li>\n<li>Firefox version is 48.0.2</li>\n<li>Selenium version is 2.53.6</li>\n<li>Python version is 3.5.2</li>\n</ul>\n\n<p>I started with the sample code from Selenium's documentation:</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.keys import Keys\ndriver = webdriver.Firefox()\ndriver.get(\"http://www.python.org\")\nassert \"Python\" in driver.title\nelem = driver.find_element_by_name(\"q\")\nelem.clear()\nelem.send_keys(\"pycon\")\nelem.send_keys(Keys.RETURN)\nassert \"No results found.\" not in driver.page_source\ndriver.close()\n</code></pre>\n\n<p>This sadly resulted in the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"linkshare_scraper.py\", line 30, in &lt;module&gt;\n    driver = webdriver.Firefox()\n  File \"C:\\Program Files (x86)\\Python35-32\\lib\\site-packages\\selenium\\webdriver\\\nfirefox\\webdriver.py\", line 80, in __init__\n    self.binary, timeout)\n  File \"C:\\Program Files (x86)\\Python35-32\\lib\\site-packages\\selenium\\webdriver\\\nfirefox\\extension_connection.py\", line 52, in __init__\n    self.binary.launch_browser(self.profile, timeout=timeout)\n  File \"C:\\Program Files (x86)\\Python35-32\\lib\\site-packages\\selenium\\webdriver\\\nfirefox\\firefox_binary.py\", line 68, in launch_browser\n    self._wait_until_connectable(timeout=timeout)\n  File \"C:\\Program Files (x86)\\Python35-32\\lib\\site-packages\\selenium\\webdriver\\\nfirefox\\firefox_binary.py\", line 108, in _wait_until_connectable\n    % (self.profile.path))\nselenium.common.exceptions.WebDriverException: Message: Can't load the profile.\nProfile Dir: C:\\Users\\Gabriel\\AppData\\Local\\Temp\\tmpsmnjuomr If you specified a lo\ng_file in the FirefoxBinary constructor, check it for details.\n</code></pre>\n"}, {"tags": ["python", "list", "dictionary"], "comments": [{"owner": {"reputation": 2297, "user_id": 6817049, "user_type": "registered", "profile_image": "https://graph.facebook.com/580250048815/picture?type=large", "display_name": "Tore Eschliman", "link": "https://stackoverflow.com/users/6817049/tore-eschliman"}, "edited": false, "score": 0, "creation_date": 1473882245, "post_id": 39498211, "comment_id": 66314436, "body": "What exactly is the concern with vectorization here? There&#39;s really no performance hit to just using a <code>for</code> loop with <code>update</code>..."}, {"owner": {"reputation": 1329, "user_id": 4245462, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/10205591/picture?type=large", "display_name": "NickBraunagel", "link": "https://stackoverflow.com/users/4245462/nickbraunagel"}, "reply_to_user": {"reputation": 2297, "user_id": 6817049, "user_type": "registered", "profile_image": "https://graph.facebook.com/580250048815/picture?type=large", "display_name": "Tore Eschliman", "link": "https://stackoverflow.com/users/6817049/tore-eschliman"}, "edited": false, "score": 0, "creation_date": 1473882412, "post_id": 39498211, "comment_id": 66314523, "body": "If there&#39;s no hit to performance, then I&#39;ll use the <code>for</code> loop.  Whenever I use <code>for</code> loops with <code>pandas</code>, there&#39;s a serious performance hit, and I assumed that was also the case for a <code>list</code>.  I&#39;ll do some research on why performance is not affected using <code>for</code> on lists."}, {"owner": {"reputation": 2297, "user_id": 6817049, "user_type": "registered", "profile_image": "https://graph.facebook.com/580250048815/picture?type=large", "display_name": "Tore Eschliman", "link": "https://stackoverflow.com/users/6817049/tore-eschliman"}, "edited": false, "score": 1, "creation_date": 1473882532, "post_id": 39498211, "comment_id": 66314589, "body": "That&#39;s because <code>pandas</code> has compiled and optimized logic to process these things. If you&#39;re dealing with purely Python constructs, you should absolutely make the zero-to-minimal tradeoff in legibility of just using a <code>for</code> loop."}, {"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 2, "creation_date": 1473882542, "post_id": 39498211, "comment_id": 66314591, "body": "Why not to use <code>for</code> loop when it provides you the most efficient way. I do not know any such in-built python function to achieve this. In case if there is any, internally it will iterating over your list"}, {"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1473883056, "post_id": 39498211, "comment_id": 66314849, "body": "Added an answer to achieve it using without <code>for</code> loop"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1473883272, "post_id": 39498211, "comment_id": 66314956, "body": "Depends on what you mean by <i>pythonic</i>. There are 4 solutions (I&#39;m excluding the one that was deleted) that use <i>Python</i> features, but some of them perform additional calculations/conversions that might run slower than the classic <code>for</code> loop. As I mentioned in a comment, list comprehensions seem to be ~2 times faster(<i>Python2.7.10</i> on <i>Win</i>) than classic iteration (the example is adding 1 to each element from a list of <i>int</i> s)."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1473883660, "post_id": 39498211, "comment_id": 66315159, "body": "@CristiFati list comps aren&#39;t faster than <code>for</code> loops. If you show me your test code I&#39;ll show you your misstep."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 1, "creation_date": 1473883941, "post_id": 39498211, "comment_id": 66315290, "body": "Voting to close this as &quot;Too Broad.&quot; The correct answer is &quot;Use a <code>for</code> loop,&quot; but the <i>specific</i> question of &quot;How do I do this as a vectorized function&quot; is <i>massively</i> too broad to answer here."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1473884969, "post_id": 39498211, "comment_id": 66315798, "body": "@Adam Smith I had large list of <i>int</i> s; generated another one where each element is the correspondent element + 1. One way is via list comprehensions, the other is creating the new list, iterating over the existing one and appending each element + 1. But I&#39;ll definitely take a deeper look into this tomorrow, when I&#39;ll also have access to <i>Python</i> source code."}, {"owner": {"reputation": 2297, "user_id": 6817049, "user_type": "registered", "profile_image": "https://graph.facebook.com/580250048815/picture?type=large", "display_name": "Tore Eschliman", "link": "https://stackoverflow.com/users/6817049/tore-eschliman"}, "edited": false, "score": 0, "creation_date": 1473885632, "post_id": 39498211, "comment_id": 66316134, "body": "the <code>for</code> loop there is slower because it has to do a <code>__getitem__</code> per list element, while the list comprehension doesn&#39;t have to do any lookup at all (it&#39;s building the list as it goes along)."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1473885945, "post_id": 39498211, "comment_id": 66316301, "body": "it wouldn&#39;t surprise me if building a new list took longer as a <code>for</code> loop if you have a deterministic input, since the list comp can pre-allocate the list and not have to grow it so much. However in a case like this you&#39;ll see <a href=\"http://pastebin.com/22p0HjEd\" rel=\"nofollow noreferrer\">that it&#39;s considerably slower</a>"}], "answers": [{"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1473882063, "post_id": 39498414, "comment_id": 66314351, "body": "this just creates a new copy of each dict in memory. It&#39;s still iterating just like a <code>for</code> loop."}, {"owner": {"reputation": 1329, "user_id": 4245462, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/10205591/picture?type=large", "display_name": "NickBraunagel", "link": "https://stackoverflow.com/users/4245462/nickbraunagel"}, "edited": false, "score": 0, "creation_date": 1473882162, "post_id": 39498414, "comment_id": 66314405, "body": "Can&#39;t one argue that list comprehensions are faster than a <code>for</code> loop?"}, {"owner": {"reputation": 2297, "user_id": 6817049, "user_type": "registered", "profile_image": "https://graph.facebook.com/580250048815/picture?type=large", "display_name": "Tore Eschliman", "link": "https://stackoverflow.com/users/6817049/tore-eschliman"}, "edited": false, "score": 1, "creation_date": 1473882325, "post_id": 39498414, "comment_id": 66314474, "body": "I&#39;m pretty sure that&#39;s no longer the case. I know I&#39;ve seen talk of it, but I think it&#39;s mostly pre-2.7 (if not earlier)."}, {"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1473882641, "post_id": 39498414, "comment_id": 66314635, "body": "It is still using <code>for</code> loop."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1473882814, "post_id": 39498414, "comment_id": 66314720, "body": "Just tested(<i>Python2.7.10</i> on <i>Win</i>)....it seems that list comprehension is ~2 times faster than &quot;manually&quot; iterating over each element."}, {"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 1, "creation_date": 1473883004, "post_id": 39498414, "comment_id": 66314830, "body": "@CristiFati I just tested with Python 2.7 and Python 3.4, and in both cases a plain old for loop was 2-3 times faster than creating a new dict with a comprehension."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "reply_to_user": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 0, "creation_date": 1473883967, "post_id": 39498414, "comment_id": 66315298, "body": "Yes, @tobias_k, but I guess that&#39;s just because with the <code>for</code> loop you altered the existing list, while list comprehension generates another list (and maybe all the dicts). My test case was a simpler one (adding 1 to each element (<i>int</i>)), but that case doesn&#39;t quite apply here."}], "tags": [], "owner": {"reputation": 6258, "user_id": 1527018, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/62e4e73fe7386a5e9401f90dc98c7584?s=128&d=identicon&r=PG", "display_name": "mic4ael", "link": "https://stackoverflow.com/users/1527018/mic4ael"}, "is_accepted": false, "score": 1, "last_activity_date": 1473882005, "creation_date": 1473882005, "answer_id": 39498414, "question_id": 39498211, "link": "https://stackoverflow.com/questions/39498211/append-to-each-dictionary-within-a-list/39498414#39498414", "title": "Append to each dictionary within a list", "body": "<p>Something like this could do the trick.</p>\n\n<pre><code>result = [dict(data, client_id='') for data in list_of_dicts]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1473883133, "post_id": 39498476, "comment_id": 66314884, "body": "functionally identical to mic4ael&#39;s answer."}, {"owner": {"reputation": 12672, "user_id": 1200821, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Cm117.jpg?s=128&g=1", "display_name": "Juan Diego Godoy Robles", "link": "https://stackoverflow.com/users/1200821/juan-diego-godoy-robles"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1473883971, "post_id": 39498476, "comment_id": 66315304, "body": "its that bad? .. a way to show the new dict unpacking"}], "tags": [], "owner": {"reputation": 12672, "user_id": 1200821, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Cm117.jpg?s=128&g=1", "display_name": "Juan Diego Godoy Robles", "link": "https://stackoverflow.com/users/1200821/juan-diego-godoy-robles"}, "is_accepted": false, "score": -1, "last_activity_date": 1473919985, "last_edit_date": 1473919985, "creation_date": 1473882252, "answer_id": 39498476, "question_id": 39498211, "link": "https://stackoverflow.com/questions/39498211/append-to-each-dictionary-within-a-list/39498476#39498476", "title": "Append to each dictionary within a list", "body": "<p>A <strong>Python 3.5</strong> solution showcasing the new dict <em>unpacking</em>. </p>\n\n<pre><code>[{**dict_element, **{u'client_id':u'12398'}} for dict_element in your_list]\n</code></pre>\n\n<p>Check <a href=\"https://www.python.org/dev/peps/pep-0448/\" rel=\"nofollow\">this</a>.</p>\n\n<p><strong>Demo</strong></p>\n\n<pre><code>&gt;&gt;&gt; your_list = [{u'ID': 46757,\n...   u'currentenddate': u'09/30/2016',\n...   u'name': u'Project A',\n...   u'projstartdate': u'05/01/2016'},\n...  {u'ID': 46625,\n...   u'currentenddate': u'07/15/2016',\n...   u'name': u'Project B',\n...   u'projstartdate': u'05/02/2016'},\n...  {u'ID': 47100,\n...   u'currentenddate': u'08/02/2016',\n...   u'name': u'Project C',\n...   u'projstartdate': u'06/01/2016'}]\n&gt;&gt;&gt; \n&gt;&gt;&gt; from pprint import pprint\n&gt;&gt;&gt; pprint([{**dict_element, **{u'client_id':u'12398'}} for dict_element in your_list])\n[{'ID': 46757,\n  'client_id': '12398',\n  'currentenddate': '09/30/2016',\n  'name': 'Project A',\n  'projstartdate': '05/01/2016'},\n {'ID': 46625,\n  'client_id': '12398',\n  'currentenddate': '07/15/2016',\n  'name': 'Project B',\n  'projstartdate': '05/02/2016'},\n {'ID': 47100,\n  'client_id': '12398',\n  'currentenddate': '08/02/2016',\n  'name': 'Project C',\n  'projstartdate': '06/01/2016'}]\n</code></pre>\n"}], "owner": {"reputation": 1329, "user_id": 4245462, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/10205591/picture?type=large", "display_name": "NickBraunagel", "link": "https://stackoverflow.com/users/4245462/nickbraunagel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1473919985, "creation_date": 1473881253, "last_edit_date": 1473886183, "question_id": 39498211, "link": "https://stackoverflow.com/questions/39498211/append-to-each-dictionary-within-a-list", "title": "Append to each dictionary within a list", "body": "<p>I have a list of dictionary objects:</p>\n\n<pre><code>[{u'ID': 46757,\n  u'currentenddate': u'09/30/2016',\n  u'name': u'Project A',\n  u'projstartdate': u'05/01/2016'},\n {u'ID': 46625,\n  u'currentenddate': u'07/15/2016',\n  u'name': u'Project B',\n  u'projstartdate': u'05/02/2016'},\n {u'ID': 47100,\n  u'currentenddate': u'08/02/2016',\n  u'name': u'Project C',\n  u'projstartdate': u'06/01/2016'}]\n</code></pre>\n\n<p>and I would like to append to ALL dictionary items a new field <code>client_id</code>, resulting in:</p>\n\n<pre><code>[{u'ID': 46757,\n  u'currentenddate': u'09/30/2016',\n  u'name': u'Project A',\n  u'projstartdate': u'05/01/2016'},\n  u'client_id': u'12398'},\n {u'ID': 46625,\n  u'currentenddate': u'07/15/2016',\n  u'name': u'Project B',\n  u'projstartdate': u'05/02/2016'},\n  u'client_id': u'12398'},\n {u'ID': 47100,\n  u'currentenddate': u'08/02/2016',\n  u'name': u'Project C',\n  u'projstartdate': u'06/01/2016'}\n  u'client_id': u'12398'}]\n</code></pre>\n\n<p><code>client_id</code> will remain the same for all dictionary items.  I know I can achieve the outcome using a <code>for</code> loop coupled with <code>dict['client_id'] = id</code> but the code is no longer vectorized.  Is there a pythonic way to append to each dict item within the list?</p>\n\n<hr>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Thanks for the lively conversation about list comprehensions versus <code>for</code> loops.  I'll test both methods and use the faster of the two for my situation.  Also, going forward, I'll explicitly define what I mean by 'vectorized' and 'pythonic' in my questions, so we're all on the same page (thanks, @Adam Smith).</p>\n"}, {"tags": ["python", "datetime", "time"], "comments": [{"owner": {"reputation": 2010, "user_id": 6387050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f70654743f968540cf663914639c082?s=128&d=identicon&r=PG", "display_name": "noteness", "link": "https://stackoverflow.com/users/6387050/noteness"}, "edited": false, "score": 0, "creation_date": 1473881282, "post_id": 39498169, "comment_id": 66313980, "body": "include the full traceback also please"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1473881503, "post_id": 39498169, "comment_id": 66314097, "body": "<code>status.sensorBGLTimestamp</code> is certainly a <code>datetime.datetime</code> object and you&#39;re using <code>time</code> module (which expects a time.localtime() / 9-item sequence as input). But I have trouble understanding what you really want to do here."}, {"owner": {"reputation": 1, "user_id": 6832447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/922d5024159d30a86e9ddea8cf64634f?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/6832447/tim"}, "edited": false, "score": 0, "creation_date": 1473883243, "post_id": 39498169, "comment_id": 66314944, "body": "I&#39;m trying to take a value from an external source <code>sensorBGLTimestamp</code> and reformat it.  I&#39;ve borrowed the code and don&#39;t know a great deal of python. The piece that follows is:  <code>epoch_time = epoch_time - time.localtime(epoch_time).tm_isdst*3600  with open(&#39;latest_sg.json&#39;,&#39;w&#39;) as text_file:     text_file.write(&#39;&quot;value&quot;:&quot;{0}&quot;,&quot;sgv&quot;:{0},&quot;type&quot;:&quot;sgv&quot;,&quot;dateS&zwnj;&#8203;tring&quot;:&quot;{1}&quot;,&quot;date&quot;:&zwnj;&#8203;{2}&#39;.format( status.sensorBGL, time.strftime(&quot;%Y-%m-%dT%H:%M:%S%z&quot;, time.localtime(epoch_time)) , epoch_time*1000 ))</code>  And it&#39;s been added to provide a file for a REST API upload separately."}], "answers": [{"tags": [], "owner": {"reputation": 2447, "user_id": 3006366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVcKL.png?s=128&g=1", "display_name": "ode2k", "link": "https://stackoverflow.com/users/3006366/ode2k"}, "is_accepted": false, "score": 0, "last_activity_date": 1473881472, "creation_date": 1473881472, "answer_id": 39498265, "question_id": 39498169, "link": "https://stackoverflow.com/questions/39498169/python-2-7-9-getting-errortypeerror-argument-must-be-9-item-sequence-not-date/39498265#39498265", "title": "Python 2.7.9 Getting error:TypeError: argument must be 9-item sequence, not datetime.datetime", "body": "<p>If you are trying to simply get the epoch time, you should use</p>\n\n<pre><code>import calendar\nimport time\n\ncalendar.timegm(time.gmtime())\n</code></pre>\n\n<p><strong>Returns:</strong>\n<code>1473881423</code></p>\n"}], "owner": {"reputation": 1, "user_id": 6832447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/922d5024159d30a86e9ddea8cf64634f?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/6832447/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1913, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473881472, "creation_date": 1473881112, "question_id": 39498169, "link": "https://stackoverflow.com/questions/39498169/python-2-7-9-getting-errortypeerror-argument-must-be-9-item-sequence-not-date", "title": "Python 2.7.9 Getting error:TypeError: argument must be 9-item sequence, not datetime.datetime", "body": "<p>This is occurring on the following code line:</p>\n\n<p><code>epoch_time = int(time.mktime(time.strptime( time.strftime( \"%Y-%m-%d %H:%M:%S\", status.sensorBGLTimestamp ), '%Y-%m-%d %H:%M:%S').timetuple()) - time.timezone )</code></p>\n\n<p>Anyone able to help with why?</p>\n"}, {"tags": ["python", "variables", "while-loop"], "comments": [{"owner": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "edited": false, "score": 3, "creation_date": 1473881108, "post_id": 39498152, "comment_id": 66313892, "body": "<code>room(&quot;For room&quot;, roomcount,&quot;, what is the length?:\\n&quot;)</code>   Is this a function call because it sure looks like one. What are you trying to do here?"}, {"owner": {"reputation": 25, "user_id": 6418611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nGqaY.jpg?s=128&g=1", "display_name": "Student", "link": "https://stackoverflow.com/users/6418611/student"}, "reply_to_user": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "edited": false, "score": 0, "creation_date": 1473881167, "post_id": 39498152, "comment_id": 66313926, "body": "It&#39;s my brain not working properly, sorry. Its meant to say print"}, {"owner": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "edited": false, "score": 0, "creation_date": 1473881250, "post_id": 39498152, "comment_id": 66313963, "body": "Are you trying to increase <code>roomcount</code> each time your while loops? if so just go <code>roomcount += 1</code>"}, {"owner": {"reputation": 647, "user_id": 2527690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wnocC.png?s=128&g=1", "display_name": "Pavel Gurkov", "link": "https://stackoverflow.com/users/2527690/pavel-gurkov"}, "edited": false, "score": 0, "creation_date": 1473881251, "post_id": 39498152, "comment_id": 66313964, "body": "You also have two different variables there, <code>roomCount</code> and <code>roomcount</code>, and I think your while expression should look like <code>roomcount &lt;= rooms</code>. Also, don&#39;t forget to increment <code>roomcount</code> after each iteration."}, {"owner": {"reputation": 992, "user_id": 3225001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVXrx.jpg?s=128&g=1", "display_name": "Gurupad Mamadapur", "link": "https://stackoverflow.com/users/3225001/gurupad-mamadapur"}, "edited": false, "score": 2, "creation_date": 1473881252, "post_id": 39498152, "comment_id": 66313965, "body": "Give us a test case and also clearly explain what your want."}, {"owner": {"reputation": 647, "user_id": 2527690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wnocC.png?s=128&g=1", "display_name": "Pavel Gurkov", "link": "https://stackoverflow.com/users/2527690/pavel-gurkov"}, "edited": false, "score": 0, "creation_date": 1473881538, "post_id": 39498152, "comment_id": 66314113, "body": "Do you need a dynamic data structure with size depending on user input, is that what you&#39;re asking about?"}], "answers": [{"tags": [], "owner": {"reputation": 2010, "user_id": 6387050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f70654743f968540cf663914639c082?s=128&d=identicon&r=PG", "display_name": "noteness", "link": "https://stackoverflow.com/users/6387050/noteness"}, "is_accepted": false, "score": 0, "last_activity_date": 1473881820, "creation_date": 1473881820, "answer_id": 39498363, "question_id": 39498152, "link": "https://stackoverflow.com/questions/39498152/how-do-i-use-a-while-loop-to-add-a-variable-every-time-it-loops/39498363#39498363", "title": "How do I use a while loop to add a variable every time it loops?", "body": "<p>Thinking you want the length and breadth to be saved by the room number, I would do something like this:</p>\n\n<pre><code>rooms = {}\n\nprint(\"Please answer the questions to find the floor size.\")\n\nrooms = int(input(\"How many rooms has the property got?:\\n\"))\n\nfor room_num in range(1, rooms+1):\n    length = int(input(\"What is the lenth of room number {}: \".format(room_num)))\n    width = int(input(\"What is the lwidth of room number {}: \".format(room_num)))\n    rooms[room_num] = {'length': length, 'width': width}\n</code></pre>\n\n<p>Then to get the length of room 1, just look it up: <code>rooms[1]['length']</code>, width: <code>rooms[1]['width']</code> ,etc. etc.</p>\n"}, {"tags": [], "owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "is_accepted": false, "score": 0, "last_activity_date": 1473882109, "creation_date": 1473882109, "answer_id": 39498447, "question_id": 39498152, "link": "https://stackoverflow.com/questions/39498152/how-do-i-use-a-while-loop-to-add-a-variable-every-time-it-loops/39498447#39498447", "title": "How do I use a while loop to add a variable every time it loops?", "body": "<p>I'd recommend going for a <code>Room</code> class. Then you can define an <code>area</code> method on it. </p>\n\n<pre><code>class Room():\n    def __init__(self, w, l):\n        self.width = w\n        self.length = l\n\n    def area(self):\n        return self.width * self.length\n</code></pre>\n\n<p>Then, for your input, store those into a list. Use a for-loop instead. No need for a while-loop. </p>\n\n<pre><code>print(\"Please answer the questions to find the floor size.\")\n\nroomCount = int(input(\"How many rooms does the property have?\\n\"))\n\nrooms = []\nfor roomNum in range(roomCount):\n    l = float(input(\"For room {} what is the length?\\n\".format(roomNum + 1)))\n    w = float(input(\"For room {} what is the width?\\n\".format(roomNum + 1)))\n    rooms.append(Room(w, l))\n</code></pre>\n\n<p>When you are done with that, you just loop over the objects and add up the areas. </p>\n\n<pre><code>size = sum(r.area() for r in rooms)\nprint(size)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 6418611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nGqaY.jpg?s=128&g=1", "display_name": "Student", "link": "https://stackoverflow.com/users/6418611/student"}, "edited": false, "score": 0, "creation_date": 1473887454, "post_id": 39498590, "comment_id": 66316956, "body": "I agree with you, but I am only in Secondary school and have not done any coding at all for the past 6 weeks. Sorry"}], "tags": [], "owner": {"reputation": 647, "user_id": 2527690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wnocC.png?s=128&g=1", "display_name": "Pavel Gurkov", "link": "https://stackoverflow.com/users/2527690/pavel-gurkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1473882682, "creation_date": 1473882682, "answer_id": 39498590, "question_id": 39498152, "link": "https://stackoverflow.com/questions/39498152/how-do-i-use-a-while-loop-to-add-a-variable-every-time-it-loops/39498590#39498590", "title": "How do I use a while loop to add a variable every time it loops?", "body": "<p>I'd do it this way.</p>\n\n<pre><code>rooms_total = int(input('How many rooms?'))\nrooms_info = list()\n\nfor i in range(rooms_total):\n    length = int(input('Length for room #{}?'.format(i)))\n    width = int(input('Width for room #{}?'.format(i)))\n    rooms_info.append({'length': length, 'width': width})\n\nspace = sum([x['length'] * x['width'] for x in rooms_info])\nprint(space)\n</code></pre>\n\n<p>Class feels like an overkill (unless you specifically want to practice classes), and dictionary doesn't feel like a proper outer data structure here.</p>\n\n<p>It's just my humble opinion, but you need to read more about loops and basic data structures in Python.</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 6418611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nGqaY.jpg?s=128&g=1", "display_name": "Student", "link": "https://stackoverflow.com/users/6418611/student"}, "edited": false, "score": 0, "creation_date": 1473883514, "post_id": 39498592, "comment_id": 66315069, "body": "How would I times the rooms length by width for each room?   <code>floorArea = roomWidths[0] * roomLengths[0]</code> or anything like that?"}, {"owner": {"reputation": 647, "user_id": 2527690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wnocC.png?s=128&g=1", "display_name": "Pavel Gurkov", "link": "https://stackoverflow.com/users/2527690/pavel-gurkov"}, "edited": false, "score": 0, "creation_date": 1473887679, "post_id": 39498592, "comment_id": 66317056, "body": "Exactly like that."}, {"owner": {"reputation": 25, "user_id": 6418611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nGqaY.jpg?s=128&g=1", "display_name": "Student", "link": "https://stackoverflow.com/users/6418611/student"}, "reply_to_user": {"reputation": 647, "user_id": 2527690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wnocC.png?s=128&g=1", "display_name": "Pavel Gurkov", "link": "https://stackoverflow.com/users/2527690/pavel-gurkov"}, "edited": false, "score": 0, "creation_date": 1473922702, "post_id": 39498592, "comment_id": 66326580, "body": "@PavelGurkov I know that that&#39;s how I would check it now, but how would i get it to check every room?"}, {"owner": {"reputation": 647, "user_id": 2527690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wnocC.png?s=128&g=1", "display_name": "Pavel Gurkov", "link": "https://stackoverflow.com/users/2527690/pavel-gurkov"}, "reply_to_user": {"reputation": 25, "user_id": 6418611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nGqaY.jpg?s=128&g=1", "display_name": "Student", "link": "https://stackoverflow.com/users/6418611/student"}, "edited": false, "score": 0, "creation_date": 1473926663, "post_id": 39498592, "comment_id": 66328493, "body": "@Student You&#39;d need to iterate over every roomWidths and corresponding roomLengths, like this: <code>for i in range(len(roomWidths)): floorArea = roomWidths[i] * roomLengths[i]</code> or <code>for index, width in enumerate(roomWidths): floorArea = width * roomLengths[index]</code>"}], "tags": [], "owner": {"reputation": 376, "user_id": 5532316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/035021bc2010706f057adef2ca69f5da?s=128&d=identicon&r=PG", "display_name": "S. Jacob Powell", "link": "https://stackoverflow.com/users/5532316/s-jacob-powell"}, "is_accepted": true, "score": 1, "last_activity_date": 1473882686, "creation_date": 1473882686, "answer_id": 39498592, "question_id": 39498152, "link": "https://stackoverflow.com/questions/39498152/how-do-i-use-a-while-loop-to-add-a-variable-every-time-it-loops/39498592#39498592", "title": "How do I use a while loop to add a variable every time it loops?", "body": "<p>From your question it seems like this is what you want:</p>\n\n<pre><code>    print(\"Please answer the questions to find the floor size.\")\n    numberOfRooms = int(input(\"How many rooms has the property got?: \"))\n    currentRoomNumber = 0\n    roomLengths = list()\n    while currentRoomNumber &lt; numberOfRooms:\n        roomLengths.append(int(input(\"For room \" + str(currentRoomNumber + 1) + \", what is the length?: \")))\n        currentRoomNumber += 1\n    print roomLengths\n</code></pre>\n\n<p>This puts each room's length into a list (keep in mind room \"1\" according to the user is room \"0\" to you).</p>\n\n<p>When you run this, it looks like this (I put the length of each room as whatever the room number was):</p>\n\n<pre><code>    Please answer the questions to find the floor size.                                                                                                                                                  \n    How many rooms has the property got?: 5                                                                                                                                                              \n    For room 1, what is the length?: 1                                                                                                                                                                   \n    For room 2, what is the length?: 2                                                                                                                                                                   \n    For room 3, what is the length?: 3                                                                                                                                                                   \n    For room 4, what is the length?: 4                                                                                                                                                                   \n    For room 5, what is the length?: 5                                                                                                                                                                   \n    [1, 2, 3, 4, 5] \n</code></pre>\n\n<p>To access the lengths of each room, like I said before, make sure you reference room \"1\" (length 1) as room \"0\", meaning you will reference it as:</p>\n\n<pre><code>    print roomLengths[0]\n</code></pre>\n\n<p>This may be simple, but I wanted to make it clear to you since you were asking how to \"create variables\", really what you want is a list since you don't know how many \"variables\" you will want to create; so this list can have however many room lengths you need.</p>\n\n<p>To add the width in there, you would just add another list and input like so:</p>\n\n<pre><code>    print(\"Please answer the questions to find the floor size.\")\n    numberOfRooms = int(input(\"How many rooms has the property got?: \"))\n    currentRoomNumber = 0\n    roomWidths= list()\n    roomLengths = list()\n    while currentRoomNumber &lt; numberOfRooms:\n        roomWidths.append(int(input(\"For room \" + str(currentRoomNumber + 1) + \", what is the width?: \")))\n        roomLengths.append(int(input(\"For room \" + str(currentRoomNumber + 1) + \", what is the length?: \")))\n        currentRoomNumber += 1\n    print \"Room widths:\"\n    print roomWidths\n    print \"Room lengths:\"\n    print roomLengths\n</code></pre>\n\n<p>The output/running of the script would then be something like this:</p>\n\n<pre><code>    Please answer the questions to find the floor size.                                                                                                                                                  \n    How many rooms has the property got?: 3                                                                                                                                                              \n    For room 1, what is the width?: 1                                                                                                                                                                    \n    For room 1, what is the length?: 2                                                                                                                                                                   \n    For room 2, what is the width?: 3                                                                                                                                                                    \n    For room 2, what is the length?: 4                                                                                                                                                                   \n    For room 3, what is the width?: 5                                                                                                                                                                    \n    For room 3, what is the length?: 6                                                                                                                                                                   \n    Room widths:                                                                                                                                                                                         \n    [1, 3, 5]                                                                                                                                                                                            \n    Room lengths:                                                                                                                                                                                        \n    [2, 4, 6]  \n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 6418611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nGqaY.jpg?s=128&g=1", "display_name": "Student", "link": "https://stackoverflow.com/users/6418611/student"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2362, "favorite_count": 0, "accepted_answer_id": 39498592, "answer_count": 4, "score": 0, "last_activity_date": 1473889865, "creation_date": 1473881044, "last_edit_date": 1473889865, "question_id": 39498152, "link": "https://stackoverflow.com/questions/39498152/how-do-i-use-a-while-loop-to-add-a-variable-every-time-it-loops", "title": "How do I use a while loop to add a variable every time it loops?", "body": "<p>I'm writing a program that tells the user to input the amount of rooms that a property has, and then a while loop finds out the width and length of each room. I feel like I need the while loop to create two extra variables to store the width and length every time it iterates, however I can not figure out how.\nhere is my code so far:</p>\n\n<pre><code>roomCount = 1\nprint(\"Please answer the questions to find the floor size.\")\nrooms = int(input(\"How many rooms has the property got?:\\n\"))\nwhile roomcount &gt;= rooms:\n    print(\"For room\", roomcount,\", what is the length?:\\n\")\n</code></pre>\n\n<p>Its not much, but I have been searching the internet and haven't found out how.</p>\n\n<p>What I would like the program to do is to ask the user how many rooms the property has and then for each room it should ask for the width and length of the room. The program then should display the total area of the floor space in a user friendly format</p>\n\n<p>updated code:</p>\n\n<pre><code>currentRoomNumber = 0\ncurrentRoomNumber2 = 0\nfloorspace = 0\nwhileLoop = 0\nprint(\"Please answer the questions to find the floor size.\")\nnumberOfRooms = int(input(\"How many rooms has the property got?: \"))\nroomWidths= list()\nroomLengths = list()\nwhile currentRoomNumber &lt; numberOfRooms:\n    roomWidths.append(int(input(\"For room \" + str(currentRoomNumber + 1) + \", what is the width?: \")))\n    roomLengths.append(int(input(\"For room \" + str(currentRoomNumber + 1) + \", what is the length?: \")))\n    currentRoomNumber += 1\n\nwhile whileLoop &lt; numberOfRooms:\n    floorspace += (roomLengths[(currentRoomNumer2)] * roomWidths[(currentRoomNumber2)])\n    currentRoomNumber2 += 1\n    whileLoop += 1\n\nprint(floorspace)\n</code></pre>\n\n<p>However, after inputting the values of the room dimensions, it gives me a traceback error on line 15 and says <code>currentRoomNumber2</code> is not defined. Where have I gone wrong?</p>\n"}, {"tags": ["python", "telnetlib"], "answers": [{"tags": [], "owner": {"reputation": 1246, "user_id": 5740843, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8e8673a1d7221bb77db716ab8fe38a27?s=128&d=identicon&r=PG&f=1", "display_name": "user5740843", "link": "https://stackoverflow.com/users/5740843/user5740843"}, "is_accepted": false, "score": 0, "last_activity_date": 1476288263, "creation_date": 1476288263, "answer_id": 40003240, "question_id": 39498117, "link": "https://stackoverflow.com/questions/39498117/simple-python-telnet-client-server-example-doesnt-work/40003240#40003240", "title": "Simple python telnet client/server example doesn&#39;t work", "body": "<p>Be sure there is actually connecting going on. To do that put edit your code to add <strong>tn.set_debuglevel(100)</strong> into your script to look like this:</p>\n\n<pre><code>import telnetlib\n\nHOST = '127.0.0.1'\nPORT = 8023\n# from pudb import set_trace; set_trace()\ntn = telnetlib.Telnet(HOST, PORT)\ntn.set_debuglevel(100)\ndata = tn.read_until(\"custom server\", timeout=1)\nprint \"Data: \" + data\n\ntn.close()\n</code></pre>\n\n<p>This will ensure all the data is printed out so you can see what's going on.</p>\n\n<p>My theory is, that you're not connecting, or that your data isn't actually outputting \"custom server\" and therefor it won't catch it, or your timeout is too low.</p>\n"}], "owner": {"reputation": 135, "user_id": 1551397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efea0923dc9a87cc5248846a245f8df4?s=128&d=identicon&r=PG&f=1", "display_name": "kamilm", "link": "https://stackoverflow.com/users/1551397/kamilm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4550, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476288263, "creation_date": 1473880912, "question_id": 39498117, "link": "https://stackoverflow.com/questions/39498117/simple-python-telnet-client-server-example-doesnt-work", "title": "Simple python telnet client/server example doesn&#39;t work", "body": "<p>I'm trying to create mockup telnet server (for some functional testing of existing code). Right now I only modified server welcome message and I was trying to read this message using client code, but it read method fails on timeout with no additional info. But with pudb debugger enabled it works most of the time...</p>\n\n<p>I'm using virtualenv, with pudb and telnetsrv installed using pip. Python 2.7.12, ubuntu 16.04.</p>\n\n<p>Server code:</p>\n\n<pre><code>import SocketServer\nfrom telnetsrv.threaded import TelnetHandler\n\nclass MyHandler(TelnetHandler):\n\n    WELCOME = \"HI from custom server\"\n\nclass TelnetServer(SocketServer.TCPServer):\n    allow_reuse_address = True\n\nserver = TelnetServer((\"0.0.0.0\", 8023), MyHandler)\nserver.serve_forever()\n</code></pre>\n\n<p>Client code:</p>\n\n<pre><code>import telnetlib\n\nHOST = '127.0.0.1'\nPORT = 8023\n# from pudb import set_trace; set_trace()\ntn = telnetlib.Telnet(HOST, PORT)\n\ndata = tn.read_until(\"custom server\", timeout=1)\nprint \"Data: \" + data\n\ntn.close()\n</code></pre>\n\n<p>Client output:</p>\n\n<pre><code>$ python client.py\nData:\n</code></pre>\n\n<p>Client output with pudb enabled (with step-by-step execution)</p>\n\n<pre><code>$ python client.py\nData: HI from custom server\n</code></pre>\n\n<p>Of course when I execute shell telnet command, it all works fine:</p>\n\n<pre><code>$ telnet 127.0.0.1 8023\nTrying 127.0.0.1...\nConnected to 127.0.0.1.\nEscape character is '^]'.\nHI from custom server\nTelnet Server&gt; \n</code></pre>\n\n<p>I'd really appreciate any hints on how to debug this problem. Thanks!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 18703, "user_id": 2912340, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ddQ02.jpg?s=128&g=1", "display_name": "\u0141ukasz Rogalski", "link": "https://stackoverflow.com/users/2912340/%c5%81ukasz-rogalski"}, "edited": false, "score": 0, "creation_date": 1473882066, "post_id": 39498031, "comment_id": 66314355, "body": "You&#39;d have to monkeypatch <code>OSError.__new__</code>, but you <code>can&#39;t set attributes of built-in&#47;extension type</code>. So essentially you&#39;d have to subclass OSError and do monkeypatching there, but I guess that&#39;s not what you want. To sum up, doing it on user defined class? Not so hard. Doing it on built-in - well, not so easy."}, {"owner": {"reputation": 18703, "user_id": 2912340, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ddQ02.jpg?s=128&g=1", "display_name": "\u0141ukasz Rogalski", "link": "https://stackoverflow.com/users/2912340/%c5%81ukasz-rogalski"}, "edited": false, "score": 0, "creation_date": 1473882251, "post_id": 39498031, "comment_id": 66314440, "body": "Also, you may want to rephrase the question, <i>Where&#39;s the logic that returns an instance of a subclass of OSError exception class?</i> well, you&#39;ve found it already. Does doing it on built-in is critical? Or general concept of doing it on user-defined class would be fine?"}, {"owner": {"reputation": 3541, "user_id": 4450721, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/fGVGo.png?s=128&g=1", "display_name": "direprobs", "link": "https://stackoverflow.com/users/4450721/direprobs"}, "reply_to_user": {"reputation": 18703, "user_id": 2912340, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ddQ02.jpg?s=128&g=1", "display_name": "\u0141ukasz Rogalski", "link": "https://stackoverflow.com/users/2912340/%c5%81ukasz-rogalski"}, "edited": false, "score": 0, "creation_date": 1473884275, "post_id": 39498031, "comment_id": 66315450, "body": "@\u0141ukaszRogalski I agree, I should probably change the title, but I&#39;m not sure what how to coin the question for now."}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1473884399, "post_id": 39498441, "comment_id": 66315505, "body": "You can extend it just fine from Python, although it might not be a good idea. You just (mostly) can&#39;t modify it."}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1473891636, "post_id": 39498441, "comment_id": 66318471, "body": "Sorry, that&#39;s more what I meant. OP wants to actually change the behavior of OSError. Of course you can extend it with subclassing. Edited."}], "tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": false, "score": 0, "last_activity_date": 1473891649, "last_edit_date": 1473891649, "creation_date": 1473882082, "answer_id": 39498441, "question_id": 39498031, "link": "https://stackoverflow.com/questions/39498031/wheres-the-logic-that-returns-an-instance-of-a-subclass-of-oserror-exception-cl/39498441#39498441", "title": "Where&#39;s the logic that returns an instance of a subclass of OSError exception class?", "body": "<p>You can't change the behavior of <code>OSError</code> from Python because it's not implemented in Python.</p>\n\n<p>For classes implemented in Python, you can write <code>__new__</code> so it only returns a subclass if it's being called on the base class. Then the behavior won't be inherited.</p>\n\n<pre><code>class MyClass(object):\n    def __new__(cls, sub=0, _subtypes={}):\n        if cls is MyClass:\n             if sub not in _subtypes:\n                 _subtypes[sub] = type(\"MyClass(%s)\" % sub, (MyClass,), {})\n             return _subtypes[sub](sub)\n        return object.__new__(cls, sub)\n    def __init__(self, sub):\n        assert type(self).__name__ == \"MyClass(%s)\" % sub\n\nclass SubClass(MyClass):\n     def __init__(self, sub=None):\n         assert type(self).__name__ == \"SubClass\"\n\nprint(MyClass(1))    # &lt;__main__.MyClass(1) object at 0x01EB1EB0&gt;\nprint(SubClass())    # &lt;__main__.SubClass object at 0x01EB1CD0&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 18703, "user_id": 2912340, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ddQ02.jpg?s=128&g=1", "display_name": "\u0141ukasz Rogalski", "link": "https://stackoverflow.com/users/2912340/%c5%81ukasz-rogalski"}, "edited": false, "score": 0, "creation_date": 1473891594, "post_id": 39500064, "comment_id": 66318458, "body": "It should come with <i>don&#39;t try this at home</i> warning. Nice one."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1473892357, "post_id": 39500064, "comment_id": 66318642, "body": "Yeesh, that&#39;s even nastier than the crap I tried with <code>gc.get_referrers</code> (which didn&#39;t work, probably due to problems with untracked objects)."}, {"owner": {"reputation": 137021, "user_id": 567292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b55da07dea89fa675c7e2894c77f8024?s=128&d=identicon&r=PG", "display_name": "ecatmur", "link": "https://stackoverflow.com/users/567292/ecatmur"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1473892561, "post_id": 39500064, "comment_id": 66318708, "body": "@user2357112 yeah, that&#39;s what I tried first :) - unfortunately an object created in and owned by a C module is invisible to the GC unless it&#39;s explicitly tracked."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1473893831, "post_id": 39500064, "comment_id": 66319064, "body": "Nah, <a href=\"http://ideone.com/wHdlE1\" rel=\"nofollow noreferrer\">you see the same thing if you create a dict like <code>errnomap</code> in Python code</a>. The trigger for CPython to track a dict is when a key or value is stored that <code>_PyObject_GC_MAY_BE_TRACKED</code> says could be tracked, and neither the <code>int</code> keys nor the built-in exception class values trigger that condition."}, {"owner": {"reputation": 3541, "user_id": 4450721, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/fGVGo.png?s=128&g=1", "display_name": "direprobs", "link": "https://stackoverflow.com/users/4450721/direprobs"}, "edited": false, "score": 0, "creation_date": 1473925158, "post_id": 39500064, "comment_id": 66327713, "body": "Since this mapping is defined in POSIX and system dependent (differs between UNIX and Windows), it wouldn&#39;t be a good idea to do so anyway, Python doc mentions that the mapping for Windows OS is an approximation of POSIX. In my perspective, it&#39;s cheaper to define Python class that would mimic the behavior of <code>OSError</code>. What I meant initially is adding other subclasses to <code>errnomap</code> and thus we would add other error number codes to be mapped. So if we code this for example: <code>OSError(1234, &quot;errorstr&quot;)</code> we would get our subclass. I guess everyone knows how useless and silly is that."}], "tags": [], "owner": {"reputation": 137021, "user_id": 567292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b55da07dea89fa675c7e2894c77f8024?s=128&d=identicon&r=PG", "display_name": "ecatmur", "link": "https://stackoverflow.com/users/567292/ecatmur"}, "is_accepted": false, "score": 6, "last_activity_date": 1473889332, "creation_date": 1473889332, "answer_id": 39500064, "question_id": 39498031, "link": "https://stackoverflow.com/questions/39498031/wheres-the-logic-that-returns-an-instance-of-a-subclass-of-oserror-exception-cl/39500064#39500064", "title": "Where&#39;s the logic that returns an instance of a subclass of OSError exception class?", "body": "<p>You're correct that <code>errnomap</code> is the variable that holds the mapping from errno values to <code>OSError</code> subclasses, but unfortunately it's not exported outside the <code>exceptions.c</code> source file, so there's no portable way to modify it.</p>\n\n<hr>\n\n<p>It <em>is</em> possible to access it using <strong>highly</strong> non-portable hacks, and I present one possible method for doing so (using a debugger) below purely in a spirit of fun. This should work on any x86-64 Linux system.</p>\n\n<pre><code>&gt;&gt;&gt; import os, sys\n&gt;&gt;&gt; os.system(\"\"\"gdb -p %d \\\n-ex 'b PyDict_GetItem if (PyLong_AsLongLong($rsi) == -1 ? \\\n(PyErr_Clear(), 0) : PyLong_AsLongLong($rsi)) == 0xbaadf00d' \\\n-ex c \\\n-ex 'call PySys_SetObject(\"errnomap\", $rdi)' --batch &gt;/dev/null 2&gt;&amp;1 &amp;\"\"\" % os.getpid()) \n0\n&gt;&gt;&gt; OSError(0xbaadf00d, '')\nOSError(3131961357, '')\n&gt;&gt;&gt; sys.errnomap\n{32: &lt;class 'BrokenPipeError'&gt;, 1: &lt;class 'PermissionError'&gt; [...]}\n&gt;&gt;&gt; class ImATeapotError(OSError):\n    pass\n&gt;&gt;&gt; sys.errnomap[99] = ImATeapotError\n&gt;&gt;&gt; OSError(99, \"I'm a teapot\")\nImATeapotError(99, \"I'm a teapot\")\n</code></pre>\n\n<p>Quick explanation of how this works:</p>\n\n<p><code>gdb -p %d [...] --batch &gt;/dev/null 2&gt;&amp;1 &amp;</code></p>\n\n<p>Attach a debugger to the current Python process (<code>os.getpid()</code>), in unattended mode (<code>--batch</code>), discarding output (<code>&gt;/dev/null 2&gt;&amp;1</code>) and in the background (<code>&amp;</code>), allowing Python to continue running.</p>\n\n<p><code>b PyDict_GetItem if (PyLong_AsLongLong($rsi) == -1 ? (PyErr_Clear(), 0) : PyLong_AsLongLong($rsi)) == 0xbaadf00d</code></p>\n\n<p>When the Python program <a href=\"https://docs.python.org/3/c-api/dict.html#c.PyDict_GetItem\" rel=\"noreferrer\">accesses <em>any</em> dictionary</a>, break if the key <a href=\"https://docs.python.org/3/c-api/long.html#c.PyLong_AsLongLong\" rel=\"noreferrer\">is an <code>int</code></a> with a magic value (used as <code>OSError(0xbaadf00d, '')</code> later); if it isn't an int, we've just raised <code>TypeError</code>, so <a href=\"https://docs.python.org/3/c-api/exceptions.html#c.PyErr_Clear\" rel=\"noreferrer\">suppress it</a>.</p>\n\n<p><code>call PySys_SetObject(\"errnomap\", $rdi)</code></p>\n\n<p>When this happens, we know the dictionary being looked up in is the <code>errnomap</code>; <a href=\"https://docs.python.org/3/c-api/sys.html#system-functions\" rel=\"noreferrer\">store it as an attribute on the <code>sys</code> module</a>.</p>\n"}], "owner": {"reputation": 3541, "user_id": 4450721, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/fGVGo.png?s=128&g=1", "display_name": "direprobs", "link": "https://stackoverflow.com/users/4450721/direprobs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 2, "answer_count": 2, "score": 9, "last_activity_date": 1473891649, "creation_date": 1473880494, "last_edit_date": 1473884300, "question_id": 39498031, "link": "https://stackoverflow.com/questions/39498031/wheres-the-logic-that-returns-an-instance-of-a-subclass-of-oserror-exception-cl", "title": "Where&#39;s the logic that returns an instance of a subclass of OSError exception class?", "body": "<p>I've been hunting for something that could be relatively stupid to some people, but to me very interesting! :-)</p>\n\n<p>Input and output errors have been merged with <code>OSError</code> in Python 3.3, so there's a change in the exception class hierarchy. One interesting feature about the builtin class <code>OSError</code> is that, it returns a subclass of it when passed <code>errno</code> and <code>strerror</code></p>\n\n<pre><code>&gt;&gt;&gt; OSError(2, os.strerror(2))\nFileNotFoundError(2, 'No such file or directory')\n\n&gt;&gt;&gt; OSError(2, os.strerror(2)).errno\n2\n&gt;&gt;&gt; OSError(2, os.strerror(2)).strerror\n'No such file or directory'\n</code></pre>\n\n<p>As you can see passing <code>errno</code> and <code>strerror</code> to the constructor of <code>OSError</code> returns <code>FileNotFoundError</code> instance which is a subclass of <code>OSError</code>.</p>\n\n<p><em>Python Doc:</em> </p>\n\n<blockquote>\n  <p>The constructor often actually returns a subclass of OSError, as described in OS <a href=\"https://docs.python.org/3/library/exceptions.html#os-exceptions\" rel=\"noreferrer\">exceptions</a> below. The particular subclass depends on the final errno value. <strong>This behaviour only occurs when constructing OSError directly or via an alias, and is not inherited when subclassing.</strong></p>\n</blockquote>\n\n<p>I wanted to code a subclass that would behave in this way. It's mostly curiosity and not real world code. I'm also trying to know, where's the logic that creates the subclass object, is it coded in <code>__new__</code> for example? If <code>__new__</code> contains the logic for creating the instances of the subclasses, then inheriting from <code>OSError</code> would typically return this behavior, unless if there's some sort of type checking in <code>__new__</code>:</p>\n\n<pre><code>&gt;&gt;&gt; class A(OSError): pass \n&gt;&gt;&gt; A(2, os.strerror(2))\nA(2, 'No such file or directory')\n</code></pre>\n\n<p>There must be type checking then: </p>\n\n<pre><code># If passed OSError, returns subclass instance\n&gt;&gt;&gt; A.__new__(OSError, 2, os.strerror(2))         \nFileNotFoundError(2, 'No such file or directory')\n\n# Not OSError? Return instance of A\n&gt;&gt;&gt; A.__new__(A, 2, os.strerror(2)\nA(2, 'No such file or directory')\n</code></pre>\n\n<p>I've been digging through C code to find out where's this code is placed exactly and since I'm not an expert in C, I suspect this is really the logic and (I'm quite skeptical about that to be frank): </p>\n\n<p><a href=\"https://hg.python.org/cpython/file/5ae8756a1ae0/Objects/exceptions.c\" rel=\"noreferrer\">exceptions.c</a></p>\n\n<pre><code>if (myerrno &amp;&amp; PyLong_Check(myerrno) &amp;&amp;\n    errnomap &amp;&amp; (PyObject *) type == PyExc_OSError) {\n    PyObject *newtype;\n    newtype = PyDict_GetItem(errnomap, myerrno);\n    if (newtype) {\n        assert(PyType_Check(newtype));\n        type = (PyTypeObject *) newtype;\n    }\n    else if (PyErr_Occurred())\n        goto error;\n}\n}\n</code></pre>\n\n<p>Now I'm wondering about the possibility of expanding <code>errnomap</code> from Python itself without playing with C code, so that <code>OSErro</code> can make instances of user-defined classes, if you ask me why would you do that? I would say, just for fun. </p>\n"}, {"tags": ["python", "list", "python-3.x"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1473881049, "post_id": 39497934, "comment_id": 66313855, "body": "<i>However, i&#39;m outputting all the words that start with an &#39;a&#39;</i>  That&#39;s because in your <code>for</code> loop, you have a <code>print</code> statement.  If you don&#39;t want to print the words, then... don&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 261, "user_id": 3957221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60124b2b8362fe1bf18a1f6deffefe9d?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/3957221/jsf"}, "edited": false, "score": 0, "creation_date": 1473882852, "post_id": 39498053, "comment_id": 66314742, "body": "As great as this is, it&#39;s hiding the fundamental details which seemingly the OP truly needs a better understanding of."}, {"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "reply_to_user": {"reputation": 261, "user_id": 3957221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60124b2b8362fe1bf18a1f6deffefe9d?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/3957221/jsf"}, "edited": false, "score": 0, "creation_date": 1473883090, "post_id": 39498053, "comment_id": 66314866, "body": "@JSF Indeed, but this isn&#39;t solely about the OP, it&#39;s about anyone who might bump into this. I gave a general solution and a small explanation of his mistake; if OP needs fundamentals he should go to <code>docs.python.org</code> and not StackOverflow :P"}, {"owner": {"reputation": 261, "user_id": 3957221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60124b2b8362fe1bf18a1f6deffefe9d?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/3957221/jsf"}, "edited": false, "score": 0, "creation_date": 1473883183, "post_id": 39498053, "comment_id": 66314914, "body": "But alas, here he is. Him and those like him; they aren&#39;t going anywhere."}], "tags": [], "owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "is_accepted": false, "score": 3, "last_activity_date": 1473882143, "last_edit_date": 1473882143, "creation_date": 1473880606, "answer_id": 39498053, "question_id": 39497934, "link": "https://stackoverflow.com/questions/39497934/find-how-many-words-start-with-certain-letter-in-a-list/39498053#39498053", "title": "Find how many words start with certain letter in a list", "body": "<p>You could replace this with a <code>sum</code> call in which you feed <code>1</code> for every word in <code>wordList</code> that starts with <code>a</code>:</p>\n\n<pre><code>print(sum(1 for w in wordList if w.startswith('a')), 'start with the letter \"a\"')\n</code></pre>\n\n<p>This can be further trimmed down if you use the boolean values returned by <code>startswith</code> instead, since <code>True</code> is treated as <code>1</code> in these contexts the effect is the same:</p>\n\n<pre><code>print(sum(w.startswith('a') for w in a), 'start with the letter \"a\"')\n</code></pre>\n\n<p>With your current approach, you're not summing anything, you're simply printing any word that matches. In addition, you're re-naming <code>a_word</code> from an <code>int</code> to the contents of the list as you iterate through it.</p>\n\n<p>Also, instead of using <code>a_word[0]</code> to check for the first character, you could use <code>startswith(character)</code> which has the same effect and is a bit more readable.</p>\n"}, {"comments": [{"owner": {"reputation": 261, "user_id": 3957221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60124b2b8362fe1bf18a1f6deffefe9d?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/3957221/jsf"}, "edited": false, "score": 0, "creation_date": 1473882688, "post_id": 39498130, "comment_id": 66314659, "body": "This is doing exactly that: summing the occurrences of words starting with letter &#39;a&#39;.  What more do you want?  There is nothing more efficient than this simple linear solution.  In fact, any other method introduces added overhead (certainly not significant enough to affect performance, but still unnecessary).  Moreover, I prefer this over Jim&#39;s single line solution on the basis that it seems you need a better understanding of basic looping and general software development problem solving."}, {"owner": {"reputation": 2447, "user_id": 3006366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVcKL.png?s=128&g=1", "display_name": "ode2k", "link": "https://stackoverflow.com/users/3006366/ode2k"}, "reply_to_user": {"reputation": 261, "user_id": 3957221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60124b2b8362fe1bf18a1f6deffefe9d?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/3957221/jsf"}, "edited": false, "score": 0, "creation_date": 1473885327, "post_id": 39498130, "comment_id": 66315985, "body": "This does output the total on one line. If you take your <code>print</code> statement out of the for loop, then it will only print the total after the execution of the loop is complete."}], "tags": [], "owner": {"reputation": 2447, "user_id": 3006366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVcKL.png?s=128&g=1", "display_name": "ode2k", "link": "https://stackoverflow.com/users/3006366/ode2k"}, "is_accepted": true, "score": 2, "last_activity_date": 1473880954, "creation_date": 1473880954, "answer_id": 39498130, "question_id": 39497934, "link": "https://stackoverflow.com/questions/39497934/find-how-many-words-start-with-certain-letter-in-a-list/39498130#39498130", "title": "Find how many words start with certain letter in a list", "body": "<p>You are using the <code>a_words</code> as the value of the word in each iteration and missing a counter. If we change the for loop to have <code>words</code> as the value and reserved <code>a_words</code> for the counter, we can increment the counter each time the criteria is passed. You could change <code>a_words</code> to <code>wordCount</code> or something generic to make it more portable and friendly for other letters.</p>\n\n<pre><code>a_words = 0\n\nfor words in wordList:\n    if words[0]=='a':\n        a_words += 1\n\nprint(a_words, \"start with the letter 'a'.\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18703, "user_id": 2912340, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ddQ02.jpg?s=128&g=1", "display_name": "\u0141ukasz Rogalski", "link": "https://stackoverflow.com/users/2912340/%c5%81ukasz-rogalski"}, "is_accepted": false, "score": 1, "last_activity_date": 1473881661, "creation_date": 1473881661, "answer_id": 39498319, "question_id": 39497934, "link": "https://stackoverflow.com/questions/39497934/find-how-many-words-start-with-certain-letter-in-a-list/39498319#39498319", "title": "Find how many words start with certain letter in a list", "body": "<p><code>sum(generator)</code> is a way to go, but for completeness sake, you may want to do it with list comprehension (maybe if it's slightly more readable or you want to do something with words starting with <em>a</em> etc.).</p>\n\n<pre><code>words_starting_with_a = [word for word in word_list if word.startswith('a')]\n</code></pre>\n\n<p>After that you may use <code>len</code> built-in to retrieve length of your new list.</p>\n\n<pre><code>print(len(words_starting_with_a), \"words start with a letter 'a'\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "is_accepted": false, "score": 0, "last_activity_date": 1473881971, "creation_date": 1473881971, "answer_id": 39498404, "question_id": 39497934, "link": "https://stackoverflow.com/questions/39497934/find-how-many-words-start-with-certain-letter-in-a-list/39498404#39498404", "title": "Find how many words start with certain letter in a list", "body": "<p>Simple alternative solution using <code>re.findall</code> function(without splitting text and <code>for</code> loop):</p>\n\n<pre><code>import re\n...\nwords = wordsFile.read()\n...\ntotal = len(re.findall(r'\\ba\\w+?\\b', words))\nprint('Total number of words that start with a letter \"a\" : ', total)\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 4799508, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2da8d7b9785f3a1a1d4498b556a0716b?s=128&d=identicon&r=PG&f=1", "display_name": "CV88", "link": "https://stackoverflow.com/users/4799508/cv88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5227, "favorite_count": 0, "accepted_answer_id": 39498130, "answer_count": 4, "score": 0, "last_activity_date": 1473885454, "creation_date": 1473880150, "last_edit_date": 1473883859, "question_id": 39497934, "link": "https://stackoverflow.com/questions/39497934/find-how-many-words-start-with-certain-letter-in-a-list", "title": "Find how many words start with certain letter in a list", "body": "<p>I am trying to output the total of how many words start with a letter <code>'a'</code> in a list from a separate text file. I'm looking for an output such as this. </p>\n\n<pre><code>35 words start with a letter 'a'.\n</code></pre>\n\n<p>However, i'm outputting all the words that start with an <code>'a'</code> instead of the total with my current code. Should I be using something other than a for loop? </p>\n\n<p>So far, this is what I have attempted:</p>\n\n<pre><code>wordsFile = open(\"words.txt\", 'r')\nwords = wordsFile.read()\nwordsFile.close()\nwordList = words.split()\n\nprint(\"Words:\",len(wordList)) # prints number of words in the file.\n\na_words = 0\n\nfor a_words in wordList:\n    if a_words[0]=='a':\n        print(a_words, \"start with the letter 'a'.\")\n</code></pre>\n\n<p>The output I'm getting thus far:</p>\n\n<pre><code>Words: 334\nabate start with the letter 'a'.\naberrant start with the letter 'a'.\nabeyance start with the letter 'a'.\n</code></pre>\n\n<p>and so on.    </p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6852108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf1ee9b662dd692e1ecf627ad210230?s=128&d=identicon&r=PG&f=1", "display_name": "thylaco1eo", "link": "https://stackoverflow.com/users/6852108/thylaco1eo"}, "is_accepted": false, "score": 1, "last_activity_date": 1484582650, "last_edit_date": 1484582650, "creation_date": 1482724183, "answer_id": 41326264, "question_id": 39497924, "link": "https://stackoverflow.com/questions/39497924/distribute-tensorflow-supervisor-not-initializing/41326264#41326264", "title": "Distribute tensorflow : supervisor not initializing?", "body": "<p>I had this problem before. Here are two pieces of advice for you. First, you should make sure the nodes are communicating with each other. Second, you should check your version of Tensorflow. I had this problem on v12 but the same code worked fine on v10.</p>\n"}], "owner": {"reputation": 168, "user_id": 1462664, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Uug9j.jpg?s=128&g=1", "display_name": "Saravanan Setty", "link": "https://stackoverflow.com/users/1462664/saravanan-setty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 454, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484582650, "creation_date": 1473880062, "question_id": 39497924, "link": "https://stackoverflow.com/questions/39497924/distribute-tensorflow-supervisor-not-initializing", "title": "Distribute tensorflow : supervisor not initializing?", "body": "<p>I am trying to convert the MNIST tensorflow <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/tutorials/mnist/mnist_softmax.py\" rel=\"nofollow\">example</a> to run in distributed form. I am using the template given on the documentation <a href=\"https://www.tensorflow.org/versions/r0.10/how_tos/distributed/index.html\" rel=\"nofollow\">page</a>, to do so.  Here is my code : </p>\n\n<pre><code>import tensorflow as tf\n\n# Flags for defining the tf.train.ClusterSpec\ntf.app.flags.DEFINE_string(\"ps_hosts\", \"\",\n                           \"Comma-separated list of hostname:port pairs\")\ntf.app.flags.DEFINE_string(\"worker_hosts\", \"\",\n                           \"Comma-separated list of hostname:port pairs\")\n\n# Flags for defining the tf.train.Server\ntf.app.flags.DEFINE_string(\"job_name\", \"\", \"One of 'ps', 'worker'\")\ntf.app.flags.DEFINE_integer(\"task_index\", 0, \"Index of task within the job\")\nFLAGS = tf.app.flags.FLAGS\n\n\n# Import data\nfrom tensorflow.examples.tutorials.mnist import input_data\n\n\ndef main(_):\n  ps_hosts = FLAGS.ps_hosts.split(\",\")\n  worker_hosts = FLAGS.worker_hosts.split(\",\")\n\n  # Create a cluster from the parameter server and worker hosts.\n  cluster = tf.train.ClusterSpec({\"ps\": ps_hosts, \"worker\": worker_hosts})\n\n  # Create and start a server for the local task.\n  server = tf.train.Server(cluster,\n                           job_name=FLAGS.job_name,\n                           task_index=FLAGS.task_index)\n\n  if FLAGS.job_name == \"ps\":\n    server.join()\n  elif FLAGS.job_name == \"worker\":\n\n    # Assigns ops to the local worker by default.\n    with tf.device(tf.train.replica_device_setter(\n        worker_device=\"/job:worker/task:%d\" % FLAGS.task_index,\n        cluster=cluster)):\n\n      # Build model...\n      #loss = ...\n      #global_step = tf.Variable(0)\n\n\n      # Create the model\n      x = tf.placeholder(tf.float32, [None, 784])\n      W = tf.Variable(tf.zeros([784, 10]))\n      b = tf.Variable(tf.zeros([10]))\n      y = tf.nn.softmax(tf.matmul(x, W) + b)\n\n      global_step = tf.Variable(0)\n\n      #train_op = tf.train.AdagradOptimizer(0.01).minimize(\n      #    loss, global_step=global_step)\n\n      # Define loss and optimizer\n      y_ = tf.placeholder(tf.float32, [None, 10])\n      cross_entropy = tf.reduce_mean(-tf.reduce_sum(y_ * tf.log(y), reduction_indices=[1]))\n      train_step = tf.train.GradientDescentOptimizer(0.5).minimize(cross_entropy,global_step=global_step)\n\n\n\n      saver = tf.train.Saver()\n      summary_op = tf.merge_all_summaries()\n      init_op = tf.initialize_all_variables()\n\n    mnist = input_data.read_data_sets(FLAGS.data_dir, one_hot=True)\n\n    # Create a \"supervisor\", which oversees the training process.\n    sv = tf.train.Supervisor(is_chief=(FLAGS.task_index == 0),\n                             logdir=\"/tmp/train_logs\",\n                             init_op=init_op,\n                             summary_op=summary_op,\n                             saver=saver,\n                             global_step=global_step,\n                             save_model_secs=600)\n\n    # The supervisor takes care of session initialization, restoring from\n    # a checkpoint, and closing when done or an error occurs.\n    with sv.managed_session(server.target) as sess:\n      # Loop until the supervisor shuts down or 1000000 steps have completed.\n      step = 0\n      while not sv.should_stop() and step &lt; 10000:\n        # Run a training step asynchronously.\n        # See `tf.train.SyncReplicasOptimizer` for additional details on how to\n        # perform *synchronous* training.\n        #_, step = sess.run([train_op, global_step])\n        print(step)\n        batch_xs, batch_ys = mnist.train.next_batch(100)\n        train_feed = {x: batch_xs, y_: batch_ys}\n        _, step = sess.run([train_step, global_step],feed_dict = train_feed)\n\n\n    # Ask for all the services to stop.\n    sv.stop()\n\nif __name__ == \"__main__\":\n  tf.app.run()\n</code></pre>\n\n<p>First, I start 2 parameter servers and then 2 worker nodes. The servers get initialized properly in all 4, but the supervisor doesn't start training. </p>\n\n<p>Here is supervisor output : </p>\n\n<pre><code>I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job ps -&gt; {url1:2220, url1:2221}\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job worker -&gt; {localhost:2230, url2:2230}\nI tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:202] Started server with target: grpc://localhost:2230\n\nExtracting /tmp/data/train-images-idx3-ubyte.gz\nExtracting /tmp/data/train-labels-idx1-ubyte.gz\nExtracting /tmp/data/t10k-images-idx3-ubyte.gz\nExtracting /tmp/data/t10k-labels-idx1-ubyte.gz\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "xlsxwriter"], "comments": [{"owner": {"reputation": 1650, "user_id": 1262187, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/d3068f39f0fe5d8444a91e4d35606bf2?s=128&d=identicon&r=PG", "display_name": "simar", "link": "https://stackoverflow.com/users/1262187/simar"}, "edited": false, "score": 0, "creation_date": 1473880640, "post_id": 39497898, "comment_id": 66313635, "body": "according <a href=\"https://support.office.com/en-us/article/Excel-specifications-and-limits-16c69c74-3d6a-4aaf-ba35-e6eb276e8eaa\" rel=\"nofollow noreferrer\">support.office.com/en-us/article/&hellip;</a> only 255 chars in column acceptable"}, {"owner": {"reputation": 494, "user_id": 6496818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/48920e8d6e7ea7c82d3cc8d6bb43a77c?s=128&d=identicon&r=PG&f=1", "display_name": "Kalimantan", "link": "https://stackoverflow.com/users/6496818/kalimantan"}, "reply_to_user": {"reputation": 1650, "user_id": 1262187, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/d3068f39f0fe5d8444a91e4d35606bf2?s=128&d=identicon&r=PG", "display_name": "simar", "link": "https://stackoverflow.com/users/1262187/simar"}, "edited": false, "score": 0, "creation_date": 1473880805, "post_id": 39497898, "comment_id": 66313724, "body": "okay that might be why, I&#39;ll try truncating the ones that have over 255 characters to see if that solves it"}, {"owner": {"reputation": 494, "user_id": 6496818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/48920e8d6e7ea7c82d3cc8d6bb43a77c?s=128&d=identicon&r=PG&f=1", "display_name": "Kalimantan", "link": "https://stackoverflow.com/users/6496818/kalimantan"}, "reply_to_user": {"reputation": 1650, "user_id": 1262187, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/d3068f39f0fe5d8444a91e4d35606bf2?s=128&d=identicon&r=PG", "display_name": "simar", "link": "https://stackoverflow.com/users/1262187/simar"}, "edited": false, "score": 0, "creation_date": 1473882153, "post_id": 39497898, "comment_id": 66314404, "body": "@simar Didn&#39;t solve it it. Only when I made it less than 37 characters did it dissapear, which makes me think that the problem is a specific character in the in the worksheet. Any way to encode these, or handle this type of psossibilites?"}, {"owner": {"reputation": 1650, "user_id": 1262187, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/d3068f39f0fe5d8444a91e4d35606bf2?s=128&d=identicon&r=PG", "display_name": "simar", "link": "https://stackoverflow.com/users/1262187/simar"}, "edited": false, "score": 0, "creation_date": 1473884691, "post_id": 39497898, "comment_id": 66315650, "body": "Is it at each row or just certain(means check 37 character)? Do u have any exceptin during exection?"}, {"owner": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "reply_to_user": {"reputation": 1650, "user_id": 1262187, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/d3068f39f0fe5d8444a91e4d35606bf2?s=128&d=identicon&r=PG", "display_name": "simar", "link": "https://stackoverflow.com/users/1262187/simar"}, "edited": false, "score": 0, "creation_date": 1473922576, "post_id": 39497898, "comment_id": 66326524, "body": "@simar: The maximum <b>width</b> of the column is 255 characters but the cells can contain 32,767 characters. That limit is supported by XlsxWriter."}, {"owner": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "edited": false, "score": 1, "creation_date": 1473922815, "post_id": 39497898, "comment_id": 66326615, "body": "@Kalimantan XlsxWriter can handle any UTF-8 string that Excel can handle (which is all). Ensure that your string data is encoded as UTF-8. If you still have an issue then show a working example with input data. It is impossible to guess what the issue is from the current limited example. It doesn&#39;t relate to any known issues in XlsxWriter or any previously reported issue."}], "answers": [{"tags": [], "owner": {"reputation": 494, "user_id": 6496818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/48920e8d6e7ea7c82d3cc8d6bb43a77c?s=128&d=identicon&r=PG&f=1", "display_name": "Kalimantan", "link": "https://stackoverflow.com/users/6496818/kalimantan"}, "is_accepted": false, "score": 1, "last_activity_date": 1474045836, "creation_date": 1474045836, "answer_id": 39536829, "question_id": 39497898, "link": "https://stackoverflow.com/questions/39497898/xlsx-writer-getting-corrupted-with-strings/39536829#39536829", "title": "Xlsx Writer getting corrupted with Strings", "body": "<p>as @jmcnamara remarked my issue was that one of my strings was not encoded in UTF-8, but after encoding all the strings the excel file ceased to be corrupted</p>\n"}], "owner": {"reputation": 494, "user_id": 6496818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/48920e8d6e7ea7c82d3cc8d6bb43a77c?s=128&d=identicon&r=PG&f=1", "display_name": "Kalimantan", "link": "https://stackoverflow.com/users/6496818/kalimantan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1474045836, "creation_date": 1473879983, "last_edit_date": 1473882263, "question_id": 39497898, "link": "https://stackoverflow.com/questions/39497898/xlsx-writer-getting-corrupted-with-strings", "title": "Xlsx Writer getting corrupted with Strings", "body": "<p>I am currently exporting a dataframe to an excel spreadsheet, but my one of my columns which has long strings with varying lengths cause the file to get corrupted. </p>\n\n<pre><code>with pd.ExcelWriter('thing.xlsx'.format(path), engine='xlsxwriter',options={'strings_to_urls': False}) as writer:\n</code></pre>\n\n<p>Here I make put it into excel</p>\n\n<pre><code>df.to_excel(writer, 'long_text', index=False)\n</code></pre>\n\n<p><strong>Edit</strong> </p>\n\n<p>When I remove that column from the dataframe it ceases to corrupt, but I want to keep the column. When I limit the characters to 37 characters it also ceases to be corrupted. Which suggests that there is a character that is having trouble being encoded.</p>\n\n<p>Any ideas as to how to handle this? </p>\n"}, {"tags": ["python", "sql", "csv"], "comments": [{"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1473882794, "post_id": 39497887, "comment_id": 66314711, "body": "Would be really nice to see some data both current and desired results."}, {"owner": {"reputation": 665, "user_id": 3059201, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1f627cf7363b4de6d6b5ffa120425436?s=128&d=identicon&r=PG&f=1", "display_name": "user3059201", "link": "https://stackoverflow.com/users/3059201/user3059201"}, "reply_to_user": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1473883445, "post_id": 39497887, "comment_id": 66315032, "body": "added some illustration"}, {"owner": {"reputation": 10872, "user_id": 3135417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b989009ea961e780793f80ea6d53240?s=128&d=identicon&r=PG&f=1", "display_name": "Abdou", "link": "https://stackoverflow.com/users/3135417/abdou"}, "edited": false, "score": 0, "creation_date": 1473886177, "post_id": 39497887, "comment_id": 66316402, "body": "Can you please put <code>print</code> statements before saving the data locally and show us what&#39;s printed for <code>flat_columns</code>. Basically <code>print(flat_columns)</code> before you save it."}, {"owner": {"reputation": 665, "user_id": 3059201, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1f627cf7363b4de6d6b5ffa120425436?s=128&d=identicon&r=PG&f=1", "display_name": "user3059201", "link": "https://stackoverflow.com/users/3059201/user3059201"}, "edited": false, "score": 0, "creation_date": 1473886254, "post_id": 39497887, "comment_id": 66316441, "body": "flat_columns is just a 1d list of the header names of all queries: [&#39;header1&#39;, &#39;header2&#39;, &#39;header3&#39;, &#39;header4&#39;]"}, {"owner": {"reputation": 10872, "user_id": 3135417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b989009ea961e780793f80ea6d53240?s=128&d=identicon&r=PG&f=1", "display_name": "Abdou", "link": "https://stackoverflow.com/users/3135417/abdou"}, "edited": false, "score": 0, "creation_date": 1473886416, "post_id": 39497887, "comment_id": 66316515, "body": "What&#39;s in <code>rows</code>? What&#39;s the format?"}, {"owner": {"reputation": 665, "user_id": 3059201, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1f627cf7363b4de6d6b5ffa120425436?s=128&d=identicon&r=PG&f=1", "display_name": "user3059201", "link": "https://stackoverflow.com/users/3059201/user3059201"}, "edited": false, "score": 0, "creation_date": 1473887015, "post_id": 39497887, "comment_id": 66316782, "body": "rows is the ugly bit. it&#39;s a list of list of tuples of differing lengths: rows -&gt; [[(xx, xx), (xx, xx), (xx, xx)],[(yy), (yy)],[(zz)]]. I tried flattening it flat_rows=list(itertools.izip_longest(*rows)), which gives a list of tuples of tuples: flat_rows -&gt; [((xx, xx), (yy), (zz)), ((xx, xx), (yy), None), ((xx,xx), None, None)]"}, {"owner": {"reputation": 10872, "user_id": 3135417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b989009ea961e780793f80ea6d53240?s=128&d=identicon&r=PG&f=1", "display_name": "Abdou", "link": "https://stackoverflow.com/users/3135417/abdou"}, "edited": false, "score": 0, "creation_date": 1473888502, "post_id": 39497887, "comment_id": 66317362, "body": "try: <code>final_rows = map(lambda x: reduce(lambda y,z: y+z,x),list(izip_longest(*rows, fillvalue=(None,)))); my_file.writerows(final_rows)</code>. You won&#39;t need the <code>for-loop</code> at all."}, {"owner": {"reputation": 10872, "user_id": 3135417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b989009ea961e780793f80ea6d53240?s=128&d=identicon&r=PG&f=1", "display_name": "Abdou", "link": "https://stackoverflow.com/users/3135417/abdou"}, "edited": false, "score": 0, "creation_date": 1473974692, "post_id": 39497887, "comment_id": 66356915, "body": "@user3059201 was the answer in any way helpful to you?"}], "answers": [{"tags": [], "owner": {"reputation": 10872, "user_id": 3135417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b989009ea961e780793f80ea6d53240?s=128&d=identicon&r=PG&f=1", "display_name": "Abdou", "link": "https://stackoverflow.com/users/3135417/abdou"}, "is_accepted": false, "score": 0, "last_activity_date": 1473898377, "last_edit_date": 1473898377, "creation_date": 1473889076, "answer_id": 39500021, "question_id": 39497887, "link": "https://stackoverflow.com/questions/39497887/write-a-series-of-sql-queries-to-single-csv-in-python/39500021#39500021", "title": "Write a series of SQL queries to single csv in python", "body": "<p>This answer is assuming that the variable <code>rows</code> contains a list of list of tuples like this <code>[[('xx', 'xx'), ('xx', 'xx'), ('xx', 'xx')], [('yy',), ('yy',)], [('zz',)]]</code> and that you're working with Python2</p>\n\n<pre><code>from itertools import izip_longest\n\nrows = [[('xx', 'xx'), ('xx', 'xx'), ('xx', 'xx')], [('yy',), ('yy',)], [('zz',)]]\nfinal_rows = map(lambda x: reduce(lambda y,z: y+z,x),list(izip_longest(*rows, fillvalue=(None,))))\n\nwith open('temp_file.csv', 'w') as outfile:\n    writer = csv.writer(outfile, delimiter = \"\\t\")\n    writer.writerow(flat_columns)\n    writer.writerows(final_rows)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>header1 header2 header3 header4\nxx      xx      yy      zz\nxx      xx      yy      \nxx      xx              \n</code></pre>\n\n<p>Note:\nIf you wish to use Python3, you may want to wrap the output of the <code>map</code> function around <code>list()</code>, and also <code>import zip_longest</code> instead of <code>izip_longest</code>.</p>\n\n<p>I hope this helps.</p>\n"}], "owner": {"reputation": 665, "user_id": 3059201, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1f627cf7363b4de6d6b5ffa120425436?s=128&d=identicon&r=PG&f=1", "display_name": "user3059201", "link": "https://stackoverflow.com/users/3059201/user3059201"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473898377, "creation_date": 1473879945, "last_edit_date": 1473883392, "question_id": 39497887, "link": "https://stackoverflow.com/questions/39497887/write-a-series-of-sql-queries-to-single-csv-in-python", "title": "Write a series of SQL queries to single csv in python", "body": "<p>Basically I want to create a single csv file from several SQL queries. What I have so far:</p>\n\n<pre><code>import pyodbc\nimport csv\nimport itertools\n\nconn = pyodbc.connect(\"user\")\ncur = conn.cursor()\n\nsql_queries = ['query_1', 'query_2', 'query_3']\ncolumns = []\nrows = []\nfor query in sql_queries:\n    cur.execute(query)\n    columns.append([i[0] for i in cur.description])\n    rows.append(cur.fetchall())\nflat_columns = list(itertools.chain.from_iterable(columns))\n\nfp = open('temp_file.csv', 'w')\nmy_file = csv.writer(fp)\nmy_file.writerow(flat_columns)\nfor row in rows:\n    my_file.writerows(row)\nfp.close()\n</code></pre>\n\n<p>The flat_columns correctly prints all the column headers of the various queries at the top, but then the rows print sequentially (i.e., not under the correct header, except for the first query). Is there a way to get them to line up horizontally under the appropriate header? The queries produce differing numbers of rows and columns. </p>\n\n<p><strong>EDIT</strong>\nFor example, let's say query1 produces 2 columns (headers1-2) and query2 and query3 each produce 1 column (header3 and header4 respectively), where query1 yields results of form 'xx', query2 'yy' and query3 'zz'. This is what I'm currently getting:</p>\n\n<pre><code>header1  header2  header3  header4  \nxx       xx       \nxx       xx\nxx       xx\nyy\nyy\nzz\n</code></pre>\n\n<p>And this is what I want:</p>\n\n<pre><code>header1  header2  header3  header4\nxx       xx        yy      zz\nxx       xx        yy\nxx       xx\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 6194904, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a593e394d4df2573f2eacfea44b05fd0?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Silveous", "link": "https://stackoverflow.com/users/6194904/josh-silveous"}, "edited": false, "score": 0, "creation_date": 1473945509, "post_id": 39497900, "comment_id": 66340012, "body": "I tried it with python 2.7, and it still doesn&#39;t work.   <a href=\"https://i.gyazo.com/59b122ebba8fca7fe29bf5165a576152.png\" rel=\"nofollow noreferrer\">i.gyazo.com/59b122ebba8fca7fe29bf5165a576152.png</a>"}, {"owner": {"reputation": 2447, "user_id": 3006366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVcKL.png?s=128&g=1", "display_name": "ode2k", "link": "https://stackoverflow.com/users/3006366/ode2k"}, "reply_to_user": {"reputation": 179, "user_id": 6194904, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a593e394d4df2573f2eacfea44b05fd0?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Silveous", "link": "https://stackoverflow.com/users/6194904/josh-silveous"}, "edited": false, "score": 0, "creation_date": 1473945550, "post_id": 39497900, "comment_id": 66340048, "body": "What is the error message that you get with Python 2.7?"}, {"owner": {"reputation": 2447, "user_id": 3006366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVcKL.png?s=128&g=1", "display_name": "ode2k", "link": "https://stackoverflow.com/users/3006366/ode2k"}, "reply_to_user": {"reputation": 179, "user_id": 6194904, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a593e394d4df2573f2eacfea44b05fd0?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Silveous", "link": "https://stackoverflow.com/users/6194904/josh-silveous"}, "edited": false, "score": 1, "creation_date": 1473945687, "post_id": 39497900, "comment_id": 66340164, "body": "OK. That is because you are in the Python shell. You need to type <code>exit()</code> to get out of it. Then type <code>python setup.py -install</code> from your regular command shell."}, {"owner": {"reputation": 179, "user_id": 6194904, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a593e394d4df2573f2eacfea44b05fd0?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Silveous", "link": "https://stackoverflow.com/users/6194904/josh-silveous"}, "edited": false, "score": 0, "creation_date": 1473945784, "post_id": 39497900, "comment_id": 66340235, "body": "That worked. I guess I just assumed being in the python shell meant the first python wasn&#39;t necessary. Mucho gracias"}], "tags": [], "owner": {"reputation": 2447, "user_id": 3006366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVcKL.png?s=128&g=1", "display_name": "ode2k", "link": "https://stackoverflow.com/users/3006366/ode2k"}, "is_accepted": true, "score": 1, "last_activity_date": 1473880604, "last_edit_date": 1473880604, "creation_date": 1473879988, "answer_id": 39497900, "question_id": 39497856, "link": "https://stackoverflow.com/questions/39497856/python-running-setup-py-through-cmd-doesnt-work/39497900#39497900", "title": "Python running setup.py through cmd doesn&#39;t work?", "body": "<p>The first way you were trying to install it is correct <code>python setup.py install</code>, however you need Python 2.x for this installer to work. You are in a Python 3.2 environment and it appears that this module has not been updated to work with Python3 at this time.</p>\n\n<p><a href=\"http://ocemp.sourceforge.net/manual/installation.html\" rel=\"nofollow\">http://ocemp.sourceforge.net/manual/installation.html</a></p>\n\n<p>The <code>print bdist.bdist_base, self.install_dir</code> statement is Python 2.x syntax. If it were compatible with Python3, it would be <code>print(bdist.bdist_base, self.install_dir)</code></p>\n\n<p><strong>----------</strong></p>\n\n<p>If you require development in both Python3 and Python2, I highly recommend installing Anaconda</p>\n\n<p><a href=\"https://www.continuum.io/downloads\" rel=\"nofollow\">https://www.continuum.io/downloads</a></p>\n\n<p>You can set up multiple environments with whatever versions of Python that you want. Then you can activate each one as necessary.</p>\n\n<p><a href=\"http://conda.pydata.org/docs/py2or3.html\" rel=\"nofollow\">http://conda.pydata.org/docs/py2or3.html</a></p>\n"}], "owner": {"reputation": 179, "user_id": 6194904, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a593e394d4df2573f2eacfea44b05fd0?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Silveous", "link": "https://stackoverflow.com/users/6194904/josh-silveous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 39497900, "answer_count": 1, "score": -2, "last_activity_date": 1473880604, "creation_date": 1473879831, "question_id": 39497856, "link": "https://stackoverflow.com/questions/39497856/python-running-setup-py-through-cmd-doesnt-work", "title": "Python running setup.py through cmd doesn&#39;t work?", "body": "<p>So I'm trying to install via cmd using a setup.py file..\n<a href=\"https://i.stack.imgur.com/OrvUA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OrvUA.png\" alt=\"\"></a></p>\n\n<p>However, when I try to install it through CMD, this happens:\n<a href=\"https://i.stack.imgur.com/90xNn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/90xNn.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 2039, "user_id": 2339620, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/858406bb3e274f28f148e8cc86dece68?s=128&d=identicon&r=PG", "display_name": "karlosss", "link": "https://stackoverflow.com/users/2339620/karlosss"}, "edited": false, "score": 0, "creation_date": 1473879752, "post_id": 39497815, "comment_id": 66313167, "body": "Please post the contents of d1 and d2."}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 3, "creation_date": 1473879913, "post_id": 39497815, "comment_id": 66313240, "body": "You&#39;re trying to subtract one list from another.  What do you expect to get as a result?"}, {"owner": {"reputation": 69, "user_id": 6754913, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/67ff90c0bb2fcf4fb5f18c1d8742f384?s=128&d=identicon&r=PG&f=1", "display_name": "identical123456", "link": "https://stackoverflow.com/users/6754913/identical123456"}, "edited": false, "score": 0, "creation_date": 1473879976, "post_id": 39497815, "comment_id": 66313276, "body": "Another list containing the difference of the values of the keys"}, {"owner": {"reputation": 952, "user_id": 5505161, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c62b36b7d0f6241b61ef9e9a671240a5?s=128&d=identicon&r=PG&f=1", "display_name": "lordingtar", "link": "https://stackoverflow.com/users/5505161/lordingtar"}, "edited": false, "score": 3, "creation_date": 1473880046, "post_id": 39497815, "comment_id": 66313331, "body": "Why are the strings even stored in lists? You could have a simple  ` &#39;ab&#39;: 1244.568`  You should also convert the strings to ints if you want to subtract them"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 1, "creation_date": 1473880632, "post_id": 39497815, "comment_id": 66313630, "body": "The error message tells you exactly what&#39;s going wrong. The way you expect it to work isn&#39;t the way it actually works. You will need to do research into how to access the contents of a list (and then you will need to do research into how to convert strings into integers). Please at least attempt to resolve issues yourself, and do independent research."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 6754913, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/67ff90c0bb2fcf4fb5f18c1d8742f384?s=128&d=identicon&r=PG&f=1", "display_name": "identical123456", "link": "https://stackoverflow.com/users/6754913/identical123456"}, "edited": false, "score": 0, "creation_date": 1473880286, "post_id": 39497942, "comment_id": 66313437, "body": "It says invalid syntax"}, {"owner": {"reputation": 2389, "user_id": 5151909, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/677946faa239045e9bb743ab5f9f8ca0?s=128&d=identicon&r=PG&f=1", "display_name": "galah92", "link": "https://stackoverflow.com/users/5151909/galah92"}, "reply_to_user": {"reputation": 69, "user_id": 6754913, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/67ff90c0bb2fcf4fb5f18c1d8742f384?s=128&d=identicon&r=PG&f=1", "display_name": "identical123456", "link": "https://stackoverflow.com/users/6754913/identical123456"}, "edited": false, "score": 0, "creation_date": 1473880424, "post_id": 39497942, "comment_id": 66313528, "body": "Corrected. Try it now."}, {"owner": {"reputation": 69, "user_id": 6754913, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/67ff90c0bb2fcf4fb5f18c1d8742f384?s=128&d=identicon&r=PG&f=1", "display_name": "identical123456", "link": "https://stackoverflow.com/users/6754913/identical123456"}, "edited": false, "score": 0, "creation_date": 1473880503, "post_id": 39497942, "comment_id": 66313564, "body": "Unsupported operand type for -: str and str"}, {"owner": {"reputation": 2299, "user_id": 5847976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZteJQ.jpg?s=128&g=1", "display_name": "jadsq", "link": "https://stackoverflow.com/users/5847976/jadsq"}, "edited": false, "score": 0, "creation_date": 1473880576, "post_id": 39497942, "comment_id": 66313609, "body": "It won&#39;t work because the &quot;numbers&quot; in the lists are actually strings..."}], "tags": [], "owner": {"reputation": 2389, "user_id": 5151909, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/677946faa239045e9bb743ab5f9f8ca0?s=128&d=identicon&r=PG&f=1", "display_name": "galah92", "link": "https://stackoverflow.com/users/5151909/galah92"}, "is_accepted": false, "score": 0, "last_activity_date": 1473880633, "last_edit_date": 1473880633, "creation_date": 1473880170, "answer_id": 39497942, "question_id": 39497815, "link": "https://stackoverflow.com/questions/39497815/unsupported-operand-type-for-list-and-list/39497942#39497942", "title": "Unsupported operand type for - list and list", "body": "<p>Try the following:</p>\n\n<pre><code>d1={'ab': ['3'], 'hij': ['1200']}\nd2={'ab': ['1'], 'hij': ['600']} \nd3={}\nfor key in d1.keys():\n    if key in d2:\n        d3[key] = [str(int(d1[key][i]) - int(d2[key][i])) for i in xrange(len(d1[key]))]\nprint d3\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 6754913, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/67ff90c0bb2fcf4fb5f18c1d8742f384?s=128&d=identicon&r=PG&f=1", "display_name": "identical123456", "link": "https://stackoverflow.com/users/6754913/identical123456"}, "edited": false, "score": 0, "creation_date": 1473880662, "post_id": 39497957, "comment_id": 66313647, "body": "Had to use float since I had some non integers too. Anyway to return just the magnitude and just 4 significant digits rather than soo many I am currently getting. Also, I don&#39;t think it worked since I get the same difference values for all keys"}, {"owner": {"reputation": 71, "user_id": 6832334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s50bk.jpg?s=128&g=1", "display_name": "Jarvis", "link": "https://stackoverflow.com/users/6832334/jarvis"}, "reply_to_user": {"reputation": 69, "user_id": 6754913, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/67ff90c0bb2fcf4fb5f18c1d8742f384?s=128&d=identicon&r=PG&f=1", "display_name": "identical123456", "link": "https://stackoverflow.com/users/6754913/identical123456"}, "edited": false, "score": 0, "creation_date": 1473880920, "post_id": 39497957, "comment_id": 66313783, "body": "Updated to support floats with 4 digits of precision. And yeah, it works. Check the input output I did. It&#39;s correct."}, {"owner": {"reputation": 71, "user_id": 6832334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s50bk.jpg?s=128&g=1", "display_name": "Jarvis", "link": "https://stackoverflow.com/users/6832334/jarvis"}, "reply_to_user": {"reputation": 69, "user_id": 6754913, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/67ff90c0bb2fcf4fb5f18c1d8742f384?s=128&d=identicon&r=PG&f=1", "display_name": "identical123456", "link": "https://stackoverflow.com/users/6754913/identical123456"}, "edited": false, "score": 0, "creation_date": 1473881116, "post_id": 39497957, "comment_id": 66313901, "body": "Not sure what you mean by same difference."}, {"owner": {"reputation": 69, "user_id": 6754913, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/67ff90c0bb2fcf4fb5f18c1d8742f384?s=128&d=identicon&r=PG&f=1", "display_name": "identical123456", "link": "https://stackoverflow.com/users/6754913/identical123456"}, "edited": false, "score": 0, "creation_date": 1473881360, "post_id": 39497957, "comment_id": 66314026, "body": "Thanks. It does work. Just one last question, Say I had more values inside the each key, so, If I wanted to compare the second value of d1 with the second value of d2, just changing the [0] to [1] is sufficient right. Also, If I wanted the difference of all the values in each key in d1 and d2, then how would I store it in d3"}, {"owner": {"reputation": 71, "user_id": 6832334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s50bk.jpg?s=128&g=1", "display_name": "Jarvis", "link": "https://stackoverflow.com/users/6832334/jarvis"}, "reply_to_user": {"reputation": 69, "user_id": 6754913, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/67ff90c0bb2fcf4fb5f18c1d8742f384?s=128&d=identicon&r=PG&f=1", "display_name": "identical123456", "link": "https://stackoverflow.com/users/6754913/identical123456"}, "edited": false, "score": 0, "creation_date": 1473881462, "post_id": 39497957, "comment_id": 66314082, "body": "Yes, changing it to <code>[1]</code> will get the second element. Not sure what you mean by <i>difference of all the values</i>."}, {"owner": {"reputation": 69, "user_id": 6754913, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/67ff90c0bb2fcf4fb5f18c1d8742f384?s=128&d=identicon&r=PG&f=1", "display_name": "identical123456", "link": "https://stackoverflow.com/users/6754913/identical123456"}, "edited": false, "score": 0, "creation_date": 1473881866, "post_id": 39497957, "comment_id": 66314268, "body": "I want d3 to be something like {&#39;ab&#39;: [&#39;1.8995&#39;, &#39;2.333&#39;], &#39;hij&#39;: [&#39;599.971&#39;, &#39;455.2312&#39;], basically have the difference for both [0] and [1] in the same dict"}], "tags": [], "owner": {"reputation": 71, "user_id": 6832334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s50bk.jpg?s=128&g=1", "display_name": "Jarvis", "link": "https://stackoverflow.com/users/6832334/jarvis"}, "is_accepted": true, "score": 0, "last_activity_date": 1473881094, "last_edit_date": 1473881094, "creation_date": 1473880227, "answer_id": 39497957, "question_id": 39497815, "link": "https://stackoverflow.com/questions/39497815/unsupported-operand-type-for-list-and-list/39497957#39497957", "title": "Unsupported operand type for - list and list", "body": "<p>Get the first values from the list and cast them to <code>int</code>s.</p>\n\n<pre><code>d1 = {'ab': ['3'], 'hij': ['1200']}\nd2 = {'ab': ['1'], 'hij': ['600']}\nd3 = {}\n\nfor key in d1.keys():\n    if key in d2:\n        d3[key] = int(d1[key][0]) - int(d2[key][0])\n\nprint d3\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{'hij': 600, 'ab': 2}\n</code></pre>\n\n<hr>\n\n<p>To support floats, you need to cast to <code>float</code>. If you want to have 4 digits of precision, then you can use the <a href=\"https://docs.python.org/2/library/functions.html#round\" rel=\"nofollow\"><code>round</code></a> function.</p>\n\n<pre><code>d1 = {'ab': ['3.2462353'], 'hij': ['1200.223353']}\nd2 = {'ab': ['1.346733'], 'hij': ['600.252341']}\nd3 = {}\n\nfor key in d1.keys():\n    if key in d2:\n        num1 = float(d1[key][0])\n        d3[key] = round(float(d1[key][0]) - float(d2[key][0]), 4)\n\nprint d3\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{'hij': 599.971, 'ab': 1.8995}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 6754913, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/67ff90c0bb2fcf4fb5f18c1d8742f384?s=128&d=identicon&r=PG&f=1", "display_name": "identical123456", "link": "https://stackoverflow.com/users/6754913/identical123456"}, "edited": false, "score": 0, "creation_date": 1473880828, "post_id": 39498077, "comment_id": 66313741, "body": "Says invalid syntax for me"}, {"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "reply_to_user": {"reputation": 69, "user_id": 6754913, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/67ff90c0bb2fcf4fb5f18c1d8742f384?s=128&d=identicon&r=PG&f=1", "display_name": "identical123456", "link": "https://stackoverflow.com/users/6754913/identical123456"}, "edited": false, "score": 0, "creation_date": 1473880936, "post_id": 39498077, "comment_id": 66313798, "body": "I want to believe you didn&#39;t copy the <code>&gt;&gt;&gt;</code>"}], "tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": false, "score": 0, "last_activity_date": 1473880834, "last_edit_date": 1473880834, "creation_date": 1473880703, "answer_id": 39498077, "question_id": 39497815, "link": "https://stackoverflow.com/questions/39497815/unsupported-operand-type-for-list-and-list/39498077#39498077", "title": "Unsupported operand type for - list and list", "body": "<p>You can't subtract lists like so. </p>\n\n<p>You could instead use a <em>dictionary comprehensio</em>n and then <code>zip</code> the lists so you can then subtract their content:</p>\n\n<pre><code>d1={'ab': ['3'], 'hij': ['1200']}\nd2={'ab': ['1'], 'hij': ['600']}\n\nd3 = {k: ['{}'.format(int(i) - int(j)) for i, j in zip(d1[k], d2[k])] for k in d1}\nprint(d3)\n# {'hij': ['600'], 'ab': ['2']}\n</code></pre>\n\n<p>Notice the items where casted to <code>int</code> and then back to string using string formatting. Might be better if your data was actually stored as integers in the first place.</p>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 6754913, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/67ff90c0bb2fcf4fb5f18c1d8742f384?s=128&d=identicon&r=PG&f=1", "display_name": "identical123456", "link": "https://stackoverflow.com/users/6754913/identical123456"}, "edited": false, "score": 0, "creation_date": 1473882074, "post_id": 39498357, "comment_id": 66314360, "body": "Thank you for the explanation. I used &quot;d1.setdefault(name,[]).append(number)&quot; to get the dictionary. changing it to append(float(number)) should do the trick right"}], "tags": [], "owner": {"reputation": 2299, "user_id": 5847976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZteJQ.jpg?s=128&g=1", "display_name": "jadsq", "link": "https://stackoverflow.com/users/5847976/jadsq"}, "is_accepted": false, "score": 0, "last_activity_date": 1473881784, "creation_date": 1473881784, "answer_id": 39498357, "question_id": 39497815, "link": "https://stackoverflow.com/questions/39497815/unsupported-operand-type-for-list-and-list/39498357#39498357", "title": "Unsupported operand type for - list and list", "body": "<p>Have you tried looking at d1[key] and d2[key] to get an idea of what the error is about ? Well if not you should have, that's the first step of debugging code: looking where it failed and what was involved in the failure.</p>\n\n<p>So the explaination of your problem is the following d1['ab'] is not a number, it is a list , that list  is <code>['3']</code> to be more precise.  So writing <code>d1['ab'] - d2['ab']</code>  translates to <code>['3'] - ['1']</code> and that would be equivalent to doing <code>list() - list()</code> and as the error states there is no way to substract two list, the operation is simply not defined. So what  you want is to take what is <strong>inside</strong> the list and not the list itself but be carefull inside those lists you only have <strong>strings</strong> not actual numbers so you have to convert the string to a number and only then you will be able to do the expected substaction.</p>\n\n<p>But all that is fairly tedious and I assume the mistake is that you didn't totaly undersand the syntax of dictionnaries when you wrote the code. You don't have to put the numbers as strings and inside a list to put them in the dict, you could directly put the number as is : <code>d1={'ab': 3, 'hij': 1200}</code>  is perfectly valid python code. Then when you call <code>d1['ab']</code> you directly get the number you expect.</p>\n"}], "owner": {"reputation": 69, "user_id": 6754913, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/67ff90c0bb2fcf4fb5f18c1d8742f384?s=128&d=identicon&r=PG&f=1", "display_name": "identical123456", "link": "https://stackoverflow.com/users/6754913/identical123456"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1885, "favorite_count": 0, "accepted_answer_id": 39497957, "answer_count": 4, "score": -3, "last_activity_date": 1473881784, "creation_date": 1473879692, "last_edit_date": 1473879951, "question_id": 39497815, "link": "https://stackoverflow.com/questions/39497815/unsupported-operand-type-for-list-and-list", "title": "Unsupported operand type for - list and list", "body": "<p>I am using an older version of python which doesnt have support to subtract dict's.</p>\n\n<pre><code>d1={'ab': ['3'], 'hij': ['1200']}\nd2={'ab': ['1'], 'hij': ['600']}\n</code></pre>\n\n<p>Basically my code looks like this:</p>\n\n<pre><code>  for key in d1.keys():\n        if key in d2:\n            d3[key]=d1[key]-d2[key]\n</code></pre>\n\n<p>output should be like</p>\n\n<pre><code>d2={'ab': ['2'], 'hij': ['600']}\n</code></pre>\n\n<p>It returns unsupported operand type for - : list and list.\nAny ideas on how to get around this</p>\n"}, {"tags": ["python", "windows"], "answers": [{"tags": [], "owner": {"reputation": 1470, "user_id": 4374531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ecc0fcbd63c8e0a55d0c4048c7fb426?s=128&d=identicon&r=PG&f=1", "display_name": "v.coder", "link": "https://stackoverflow.com/users/4374531/v-coder"}, "is_accepted": true, "score": 1, "last_activity_date": 1473884432, "creation_date": 1473884432, "answer_id": 39499003, "question_id": 39497717, "link": "https://stackoverflow.com/questions/39497717/python-file-path-based-on-dates/39499003#39499003", "title": "Python file path based on dates", "body": "<p>Since the path contains only Year and Month,  the directory would remain same for 30 consecutive days on average.</p>\n\n<p>Hence it would be better to check if the directory already exists, before creating it.</p>\n\n<pre><code>if not os.path.exists(directory):\n   os.makedirs(directory)\n</code></pre>\n"}], "owner": {"reputation": 1392, "user_id": 3073340, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lAo7I.jpg?s=128&g=1", "display_name": "sgoley", "link": "https://stackoverflow.com/users/3073340/sgoley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 39499003, "answer_count": 1, "score": 0, "last_activity_date": 1473960010, "creation_date": 1473879351, "last_edit_date": 1495541399, "question_id": 39497717, "link": "https://stackoverflow.com/questions/39497717/python-file-path-based-on-dates", "title": "Python file path based on dates", "body": "<p>Creating a script that will automatically process the file path for that day, perform some actions, and then save to the same directory. </p>\n\n<p>Folder structure is based on Date:</p>\n\n<p><code>maindir</code> -> <code>year</code> -> <code>month</code> -> files for that month.</p>\n\n<p>So far, my approach would be:</p>\n\n<pre><code>year = time.strftime(\"%Y\")\nmonth = time.strftime(\"%B\")\ndir = parse('C:\\maindir' + '\\' + str(year) + '\\' + str(month))\nos.chdir(dir)\n</code></pre>\n\n<p>However, I would like to reuse this with <code>os.makedirs</code> later so that the folder structure will be automatically generated as I go.</p>\n\n<p>Or would it be better to make a method which parses the dir path so that I can call that as in:</p>\n\n<pre><code>if not os.path.exists(method):\n    try:\n        os.makedirs(os.path.dirname(method))\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>Happened to find this discussion which helped a lot - <a href=\"https://stackoverflow.com/questions/17429044/constructing-absolute-path-with-os-join\">constructing absolute path with os.join()</a></p>\n\n<pre><code>netdrive=\"\\\\network.com\\mainfolder$\"\nyear = time.strftime(\"%Y\")\nmonth = time.strftime(\"%B\")\npath=path.abspath(path.join(os.sep,netdrive,year,month))\nif not os.path.exists(path):\n    os.makedirs(path)\nos.chdir(path)\n</code></pre>\n\n<p>So, I have made some progress with this - however, now I'm having the issue of recognizing the net drive as currently this uses the <code>C:/</code> default as part of the <code>path.abspath</code>. How can I override that to a new root drive independent of what the drive is mapped to? <code>D:/</code> for one user, <code>E:/</code> for second - etc.</p>\n"}, {"tags": ["python", "scrapy", "web-crawler", "user-agent"], "comments": [{"owner": {"reputation": 260, "user_id": 5046030, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/vIl1y.png?s=128&g=1", "display_name": "while1pass", "link": "https://stackoverflow.com/users/5046030/while1pass"}, "edited": false, "score": 0, "creation_date": 1473880393, "post_id": 39497663, "comment_id": 66313514, "body": "Please, add &#39;start_urls&#39; list"}, {"owner": {"reputation": 1731, "user_id": 2204978, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZJhr5.jpg?s=128&g=1", "display_name": "MrPandav", "link": "https://stackoverflow.com/users/2204978/mrpandav"}, "edited": false, "score": 2, "creation_date": 1473880562, "post_id": 39497663, "comment_id": 66313600, "body": "&quot;Accept-Language&quot; header usage recommendation and how to use guids are only there in the specification dpcs.  it totally depends on website devs if they want to use this header valur and if yes than how they want use.. depends on webdevs"}, {"owner": {"reputation": 1731, "user_id": 2204978, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZJhr5.jpg?s=128&g=1", "display_name": "MrPandav", "link": "https://stackoverflow.com/users/2204978/mrpandav"}, "edited": false, "score": 2, "creation_date": 1473880642, "post_id": 39497663, "comment_id": 66313636, "body": "to answer your question if website has same page in multiple languages . they musy be having some language slecifier in url ../en/.. or en.xyz.con/.. .etc"}, {"owner": {"reputation": 260, "user_id": 5046030, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/vIl1y.png?s=128&g=1", "display_name": "while1pass", "link": "https://stackoverflow.com/users/5046030/while1pass"}, "reply_to_user": {"reputation": 1731, "user_id": 2204978, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZJhr5.jpg?s=128&g=1", "display_name": "MrPandav", "link": "https://stackoverflow.com/users/2204978/mrpandav"}, "edited": false, "score": 0, "creation_date": 1473880753, "post_id": 39497663, "comment_id": 66313700, "body": "@MrPandav,  yep, think about it. we need start_urls list for correct answer"}, {"owner": {"reputation": 2916, "user_id": 939364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cceb4bd730bda5e8464b76de4d1d6dc5?s=128&d=identicon&r=PG", "display_name": "Gallaecio", "link": "https://stackoverflow.com/users/939364/gallaecio"}, "edited": false, "score": 0, "creation_date": 1548943062, "post_id": 39497663, "comment_id": 95732415, "body": "Have you checked what happens when you choose a language from your browser? (check your cookies and the Network tab of the Developer Tools of your web browser)"}, {"owner": {"reputation": 6949, "user_id": 395737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4ab6505045819228fc49ea105ab821?s=128&d=identicon&r=PG", "display_name": "Steven Almeroth", "link": "https://stackoverflow.com/users/395737/steven-almeroth"}, "edited": false, "score": 0, "creation_date": 1555603860, "post_id": 39497663, "comment_id": 98176657, "body": "Scrapy does not control what the website sends you, try your request without Scrapy, for example cURL"}], "owner": {"reputation": 41, "user_id": 6578645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19b38e92fa770a3e19c98d22858972be?s=128&d=identicon&r=PG&f=1", "display_name": "pktbci", "link": "https://stackoverflow.com/users/6578645/pktbci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 882, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1473879154, "creation_date": 1473879154, "question_id": 39497663, "link": "https://stackoverflow.com/questions/39497663/scrapy-accept-language-not-working", "title": "Scrapy Accept-Language not working", "body": "<p>I'm using scrapy for crawling a webpage and the problem is that the spider crawls the urls but the data of each url is returned in a random language (en, pt, it, es...).</p>\n\n<p>I'm using the settings:</p>\n\n<pre><code>USER_AGENT = \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36\"\n\nDEFAULT_REQUEST_HEADERS = {\n   'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',\n   'Accept-Language': 'en',\n}\n</code></pre>\n\n<p>Why isn't it returning the pages in english? (the web page is has english option).</p>\n"}, {"tags": ["python", "class", "inheritance", "typeerror"], "answers": [{"comments": [{"owner": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "edited": false, "score": 0, "creation_date": 1473879897, "post_id": 39497749, "comment_id": 66313232, "body": "Ah, that makes sense! I&#39;ll accept the answer once it allows me to (says to wait 3 mins). Is there a good/Pythonic way to fix this, or would I just change &#39;if self.check(arg):&#39; in the body of &#39;ChildTwo.method&#39; to &#39;if ChildTwo.check(self, arg)&#39;?"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "reply_to_user": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "edited": false, "score": 0, "creation_date": 1473880159, "post_id": 39497749, "comment_id": 66313384, "body": "The way I would recommend is to avoid having methods with the same name and different argument specs, in inheritance situations.  That just sounds needlessly complicated and a large part of &quot;pythonic&quot; is simplicity."}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 2, "last_activity_date": 1473880298, "last_edit_date": 1473880298, "creation_date": 1473879464, "answer_id": 39497749, "question_id": 39497656, "link": "https://stackoverflow.com/questions/39497656/multiple-inheritance-with-same-method-names-but-different-arguments-creates-type/39497749#39497749", "title": "Multiple Inheritance With Same Method Names but Different Arguments Creates TypeError", "body": "<p>Consider this line:</p>\n\n<pre><code>ChildTwo.method(self, arg)\n</code></pre>\n\n<p>You passed in <code>self</code> explicitly.  <code>self</code> here is a reference to a <code>ChildThree</code> instance.  Later, in the body of <code>ChildTwo.method</code>:</p>\n\n<pre><code>if self.check(arg):\n</code></pre>\n\n<p>It's the same <code>self</code> we're talking about here; <code>self</code> is still a reference on your <code>ChildThree</code> instance.</p>\n\n<p>It looks like you expected <code>self</code> to do something magical, but it doesn't - it's just a plain old name.  For it to refer to a <code>ChildTwo</code> instance it would have had to be called like a bound method.  Compare and contrast:</p>\n\n<ul>\n<li><code>my_child_two.method(arg)</code> &lt;-- \"self\" gets passed implicitly by descriptor protocol </li>\n<li><code>ChildTwo.method(self, arg)</code> &lt;-- \"self\" is just whatever it is  </li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "is_accepted": false, "score": 2, "last_activity_date": 1473880945, "last_edit_date": 1473880945, "creation_date": 1473880585, "answer_id": 39498049, "question_id": 39497656, "link": "https://stackoverflow.com/questions/39497656/multiple-inheritance-with-same-method-names-but-different-arguments-creates-type/39498049#39498049", "title": "Multiple Inheritance With Same Method Names but Different Arguments Creates TypeError", "body": "<p>This type of inheritance is called <a href=\"https://en.wikipedia.org/wiki/Multiple_inheritance#The_diamond_problem\" rel=\"nofollow\">\"The Diamond Problem\"</a>. It is a topic for itself, so I'll explain on a simpler case:</p>\n\n<pre><code>class C1(object):\n    def check(self, arg):\n        return 1\n\n    def method(self, arg):\n        return self.check(arg)\n\nclass C2(C1):\n    def check(self, arg1, arg2):   # this overrides C1.check!\n        return x + C1.check(self, arg1)\n\nc2 = C2()\nc2.method(55)   # fails\n</code></pre>\n\n<p><code>C2.check</code> overrides <code>C1.check</code> on all C2 instances. Therefore, when <code>self.check(arg)</code> is called from <code>method</code>, it calls <code>C2.check</code> for instances of C2. That will fail because <code>C2.check</code> takes two arguments.</p>\n\n<p>How to resolve that? When overriding methods, do not change their signature (number and type of received arguments and type of return value), or you'll get in trouble.</p>\n\n<p><em>[more advanced]</em> You could have more freedom with functions which take <a href=\"https://docs.python.org/2/faq/programming.html#how-can-i-pass-optional-or-keyword-parameters-from-one-function-to-another\" rel=\"nofollow\"><code>*args</code> and <code>**kwargs</code></a>.</p>\n\n<hr>\n\n<p>Besides that, I see that <code>ChildThree.check</code> calls <code>Child.check</code> which calls <code>Parent.check</code>, but noone calls <code>ChildTwo.check</code>. That cannot be right.\nYou should either call the method on all base classes (and risk calling the Parent implementation twice, which may even be right here), or use <a href=\"https://docs.python.org/2/library/functions.html#super\" rel=\"nofollow\"><code>super()</code></a>.</p>\n"}], "owner": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 749, "favorite_count": 0, "accepted_answer_id": 39497749, "answer_count": 2, "score": 3, "last_activity_date": 1473880945, "creation_date": 1473879110, "question_id": 39497656, "link": "https://stackoverflow.com/questions/39497656/multiple-inheritance-with-same-method-names-but-different-arguments-creates-type", "title": "Multiple Inheritance With Same Method Names but Different Arguments Creates TypeError", "body": "<p>I have a four distinct classes. There is a main base/parent class, two main classes that inherit from this parent class, and another class that inherits from both of these main classes. If I have a method with the same name but a different number of arguments as a parent class, I get a TypeError.</p>\n\n<pre><code># Example\n\nclass Parent(object):\n    def check(self, arg):\n        tmp = {\n            'one': False,\n            'two': False\n        }\n\n        try:\n            if 'one' in arg:\n                tmp['one'] = True\n\n            if 'two' in arg:\n                tmp['two'] = True\n        except TypeError:\n            pass\n\n        return tmp\n\nclass Child(Parent):\n    def check(self, arg):\n        return Parent.check(self, arg)['one']\n\n    def method(self, arg):\n        if self.check(arg):\n            print 'One!'\n\nclass ChildTwo(Parent):\n    def check(self, arg):\n        return Parent.check(self, arg)['two']\n\n    def method(self, arg):\n        if self.check(arg):\n            print 'Two!'\n\nclass ChildThree(Child, ChildTwo):\n    def check(self, arg, arg2):\n        print arg2\n        return Child.check(self, arg)\n\n    def method(self, arg):\n        if self.check(arg, 'test'):\n            print 'One!'\n\n        ChildTwo.method(self, arg)\n\ntest = ChildThree()\ntest = test.method('one and two')\n</code></pre>\n\n<blockquote>\n  <p>runfile('untitled6.py', wdir='./Documents')<br>\n  test<br>\n  One!<br>\n  Traceback (most recent call last):<br>\n   File \"&lt; stdin >\", line 1, in &lt; module ><br>\n   File \"C:\\Users\\py\\AppData\\Local\\Continuum\\Anaconda2\\lib\\site-packages\\spyderlib\\widgets\\externalshell\\sitecustomize.py\", line 714, in runfile<br>\n     execfile(filename, namespace)<br>\n   File \"C:\\Users\\py\\AppData\\Local\\Continuum\\Anaconda2\\lib\\site-packages\\spyderlib\\widgets\\externalshell\\sitecustomize.py\", line 74, in execfile<br>\n     exec(compile(scripttext, filename, 'exec'), glob, loc)<br>\n   File \"untitled6.py\", line 49, in <br>\n     test = test.method('one and two')<br>\n   File \"untitled6.py\", line 46, in method<br>\n     ChildTwo.method(self, arg)<br>\n   File \"untitled6.py\", line 34, in method<br>\n     if self.check(arg):  </p>\n  \n  <p>TypeError: check() takes exactly 3 arguments (2 given)</p>\n</blockquote>\n\n<p>However, when I remove the second argument from the 'check' method in 'ChildThree', it seems to work fine:</p>\n\n<pre><code>class ChildThree(Child, ChildTwo):\n    def check(self, arg):\n        return Child.check(self, arg)\n\n    def method(self, arg):\n        if self.check(arg):\n            print 'One!'\n\n        ChildTwo.method(self, arg)\n</code></pre>\n\n<blockquote>\n  <p>runfile('untitled6.py', wdir='./Documents')<br>\n  One!<br>\n  Two!</p>\n</blockquote>\n\n<p>I am fairly new to classes/inheritance, so I am not sure why an extra argument causes a TypeError even though it calls the parent class method with a single argument.</p>\n"}, {"tags": ["python", "python-2.7", "multiprocessing", "python-multiprocessing"], "answers": [{"tags": [], "owner": {"reputation": 59735, "user_id": 1350899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a42186174515a63b8058100a736252f?s=128&d=identicon&r=PG", "display_name": "mata", "link": "https://stackoverflow.com/users/1350899/mata"}, "is_accepted": true, "score": 0, "last_activity_date": 1473883305, "creation_date": 1473883305, "answer_id": 39498744, "question_id": 39497652, "link": "https://stackoverflow.com/questions/39497652/how-to-call-class-methods-from-different-instantiations-in-parallel-in-python-2/39498744#39498744", "title": "How to call class methods from different instantiations in parallel in Python 2.7?", "body": "<p>On python2.7 you'll have to define a worker function that calls the compute method on the given argument, then you can use it with <code>pool.map()</code>:</p>\n\n<pre><code>def call_compute(o):\n    return o.compute()\n...\nresult = pool.map(call_compute, [g1, g2])\n</code></pre>\n\n<p>On python3 (tested on 3.5) it's possible to use <code>pool.map(SomeClass.comute, [g1, g2])</code> instead because pickling instance methods is supported there.</p>\n"}], "owner": {"reputation": 383, "user_id": 4759898, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2885e72b88b8c7be1ede51f2c29fe621?s=128&d=identicon&r=PG&f=1", "display_name": "Chicony", "link": "https://stackoverflow.com/users/4759898/chicony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 39498744, "answer_count": 1, "score": 1, "last_activity_date": 1473883305, "creation_date": 1473879098, "question_id": 39497652, "link": "https://stackoverflow.com/questions/39497652/how-to-call-class-methods-from-different-instantiations-in-parallel-in-python-2", "title": "How to call class methods from different instantiations in parallel in Python 2.7?", "body": "<p>I have a class which contains functions that perform calculations. If I have several instances of these objects, how do I make the calculations to go in parallel?</p>\n\n<pre><code>class SomeClass:\n    def __init__(self, arg):\n    ....\n    def compute(self):\n    ....\n</code></pre>\n\n<p>And then in a different script:</p>\n\n<pre><code>from multiprocessing import Pool\nfrom wherever import SomeClass\n    g1 = SomeClass(arg1)\n    g2 = SomeClass(arg2)\n    pool = Pool(processes = 2)\n</code></pre>\n\n<p>How do I make one of the workers do g1.compute() and the other g2.compute()?</p>\n"}, {"tags": ["python", "import"], "comments": [{"owner": {"reputation": 7294, "user_id": 4183498, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/USkeW.jpg?s=128&g=1", "display_name": "Du\u0161an Ma\u010far", "link": "https://stackoverflow.com/users/4183498/du%c5%a1an-ma%c4%8far"}, "edited": false, "score": 0, "creation_date": 1473880873, "post_id": 39497632, "comment_id": 66313759, "body": "<i>I</i> would rather use <code>selenium</code> than <code>webbrowser</code> for browse automation."}], "answers": [{"tags": [], "owner": {"reputation": 7294, "user_id": 4183498, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/USkeW.jpg?s=128&g=1", "display_name": "Du\u0161an Ma\u010far", "link": "https://stackoverflow.com/users/4183498/du%c5%a1an-ma%c4%8far"}, "is_accepted": true, "score": 0, "last_activity_date": 1473925563, "last_edit_date": 1473925563, "creation_date": 1473880321, "answer_id": 39497985, "question_id": 39497632, "link": "https://stackoverflow.com/questions/39497632/how-to-close-the-chrome-window-that-is-opened-by-applying-the-code-webbrowser-op/39497985#39497985", "title": "How to close the chrome window that is opened by applying the code webbrowser.open?", "body": "<p>Try using <code>selenium</code>.</p>\n\n<pre><code>import time\nfrom selenium import webdriver\n\nbreak_times = 3\nbreak_count = 0\n\nbrowser = webdriver.Firefox()\n\nprint(\"Program started at: \" + time.ctime())\nwhile break_count &lt; break_times:\n    time.sleep(5)\n    browser.get(\"https://www.youtube.com/watch?v=m69d-KNi2Q0\")\n    break_count = break_count + 1\n\nbrowser.close()\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6832332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd65365bc27b01a0c55aa6c8255b7fe?s=128&d=identicon&r=PG&f=1", "display_name": "Rafsun Zany", "link": "https://stackoverflow.com/users/6832332/rafsun-zany"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 653, "favorite_count": 0, "accepted_answer_id": 39497985, "answer_count": 1, "score": 1, "last_activity_date": 1473925563, "creation_date": 1473879036, "last_edit_date": 1473880211, "question_id": 39497632, "link": "https://stackoverflow.com/questions/39497632/how-to-close-the-chrome-window-that-is-opened-by-applying-the-code-webbrowser-op", "title": "How to close the chrome window that is opened by applying the code webbrowser.open?", "body": "<p>I imported webbrowser in the very beginning of this file. The whole code was like this in the below.</p>\n\n<pre><code>import time \nimport webbrowser\n\nbreak_times = 3\nbreak_count = 0\n\n\nprint (\"Program started at: \" + time.ctime())\nwhile break_count &lt; break_times :\n    time.sleep(5)\n    webbrowser.open(\"https://www.youtube.com/watch?v=m69d-KNi2Q0\")\n    break_count = break_count + 1\n</code></pre>\n\n<p>But I am stuck here. The code opens my chrome browser but I couldn't close it using code. Any suggestion would be helpful.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "python-3.x", "generator", "counter"], "answers": [{"comments": [{"owner": {"reputation": 779, "user_id": 5760615, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Y7T9x.jpg?s=128&g=1", "display_name": "Zeina Migeed", "link": "https://stackoverflow.com/users/5760615/zeina-migeed"}, "edited": false, "score": 0, "creation_date": 1473883495, "post_id": 39497973, "comment_id": 66315059, "body": "Okay, so I still need to call count(2) on top of my file. It seems very similar to if I were to maintain a global variable, right?"}, {"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "reply_to_user": {"reputation": 779, "user_id": 5760615, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Y7T9x.jpg?s=128&g=1", "display_name": "Zeina Migeed", "link": "https://stackoverflow.com/users/5760615/zeina-migeed"}, "edited": false, "score": 0, "creation_date": 1473884062, "post_id": 39497973, "comment_id": 66315348, "body": "@Lana You&#39;ll <i>always</i> have global variables, the difference is that the counter in this case is <i>enclosed</i> inside the function. With a global counter <code>n = 20</code> if someone changes <code>n</code> it&#39;ll mess up your counting, with closures that can&#39;t be done."}, {"owner": {"reputation": 779, "user_id": 5760615, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Y7T9x.jpg?s=128&g=1", "display_name": "Zeina Migeed", "link": "https://stackoverflow.com/users/5760615/zeina-migeed"}, "edited": false, "score": 0, "creation_date": 1473884352, "post_id": 39497973, "comment_id": 66315477, "body": "Oh. Okay, then this is what I want. Thank you!"}], "tags": [], "owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "is_accepted": true, "score": 0, "last_activity_date": 1473880272, "creation_date": 1473880272, "answer_id": 39497973, "question_id": 39497628, "link": "https://stackoverflow.com/questions/39497628/can-i-have-a-global-variable-in-python-without-declaring-it-as-global/39497973#39497973", "title": "can I have a global variable in python without declaring it as global?", "body": "<p>If my understanding is correct, to eliminate the <code>global</code> counter you could create a closure for you variable and return a function that increments it. </p>\n\n<p>The original function <code>counter</code> is called only once, consecutive calls simply increment the counter:</p>\n\n<pre><code>def count(n):\n    c = n\n    def incr():\n        nonlocal c\n        c += 1\n        print(c)\n        return c\n    return incr\n</code></pre>\n\n<p><code>count</code> is initialized with some state <code>n</code> and <code>incr</code> references that state in consecutive calls:</p>\n\n<pre><code>&gt;&gt;&gt; f = count(2)\n&gt;&gt;&gt; f()\n3\n&gt;&gt;&gt; f()\n4\n&gt;&gt;&gt; f()\n5\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 779, "user_id": 5760615, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Y7T9x.jpg?s=128&g=1", "display_name": "Zeina Migeed", "link": "https://stackoverflow.com/users/5760615/zeina-migeed"}, "edited": false, "score": 0, "creation_date": 1473882980, "post_id": 39498290, "comment_id": 66314808, "body": "Okay, so I&#39;m confused then. This &quot;my_gen = num_gen()&quot; goes on top of the file, so it seems to me the same as a global variable, no?"}], "tags": [], "owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "is_accepted": false, "score": 0, "last_activity_date": 1473881554, "creation_date": 1473881554, "answer_id": 39498290, "question_id": 39497628, "link": "https://stackoverflow.com/questions/39497628/can-i-have-a-global-variable-in-python-without-declaring-it-as-global/39498290#39498290", "title": "can I have a global variable in python without declaring it as global?", "body": "<p>Or you can use the next(generator) function.</p>\n\n<pre><code>def num_gen():\n    n=1\n    while n:\n        yield n\n        n += 1\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>&gt;&gt;my_gen = num_gen()\n&gt;&gt;next(my_gen)\n1\n&gt;&gt;next(my_gen)\n2\n</code></pre>\n\n<p>And so forth.  Whenever a generator yields a value, the state of the generator is stored so that it can resume execution later.</p>\n"}, {"tags": [], "owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "is_accepted": false, "score": 1, "last_activity_date": 1473882459, "creation_date": 1473882459, "answer_id": 39498527, "question_id": 39497628, "link": "https://stackoverflow.com/questions/39497628/can-i-have-a-global-variable-in-python-without-declaring-it-as-global/39498527#39498527", "title": "can I have a global variable in python without declaring it as global?", "body": "<p>If you want to maintain state across multiple instances of <code>Count</code>, then use a variable in the class scope, and reference it with the <code>Count.</code> prefix, like this:</p>\n\n<pre><code>class Count:\n    curr = 0\n\n    def __init__(self, startWith = None):\n        if startWith is not None: Count.curr = startWith - 1\n\n    def gen(self):\n        while True:\n            Count.curr += 1\n            yield Count.curr\n</code></pre>\n\n<p>Note that if you want to maintain state, the constructor should allow for the possibility to <em>not</em> reset the counter, but leave it untouched.</p>\n\n<p>As a side note, you might be interested in letting the generator generate a never ending series as shown above.</p>\n\n<p>Here is how you could use the above class:</p>\n\n<pre><code># Get generator that starts with 2\ngen = Count(2).gen();\n\nprint (next(gen)); # -&gt; 2\nprint (next(gen)); # -&gt; 3\nprint (next(gen)); # -&gt; 4\n\n# Get a generator that continues ...\ngen2 = Count().gen();\n\nprint (next(gen2)); # -&gt; 5\n\n# We can still use the previous generator also:\n\nprint (next(gen)); # -&gt; 6\n\n# Start with 0:\n\ngen3 = Count(0).gen();\n\nprint (next(gen3)); # -&gt; 0\n\n# Other generators follow suit:\n\nprint (next(gen)); # -&gt; 1\nprint (next(gen2)); # -&gt; 2\n</code></pre>\n"}], "owner": {"reputation": 779, "user_id": 5760615, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Y7T9x.jpg?s=128&g=1", "display_name": "Zeina Migeed", "link": "https://stackoverflow.com/users/5760615/zeina-migeed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 580, "favorite_count": 0, "accepted_answer_id": 39497973, "answer_count": 3, "score": 0, "last_activity_date": 1473882459, "creation_date": 1473879004, "last_edit_date": 1473880411, "question_id": 39497628, "link": "https://stackoverflow.com/questions/39497628/can-i-have-a-global-variable-in-python-without-declaring-it-as-global", "title": "can I have a global variable in python without declaring it as global?", "body": "<p>I want some sort of a global state that maintains the current number, as well as a function to generate the next number.</p>\n\n<p>I can write a generator to give me the next number. </p>\n\n<pre><code> def gen(self, n):\n    yield n\n    yield n + 1\n</code></pre>\n\n<p>but what is a clean way to maintain its state? I do not want to simply have a global variable. Is there a better way to do this? or is that my only option?</p>\n\n<p>I tried to make a class like this:</p>\n\n<pre><code>class Count:\n\"\"\"\nRepresents the counter which\ngenerates variables\n\"\"\"\n\ndef __init__(self, curr=0):\n    \"\"\"\n    :param curr: the current integer\n    \"\"\"\n    self.curr = curr\n\ndef gen(self):\n    \"\"\"\n    A generator for the next\n    number\n    :return: generator\n    \"\"\"\n    self.curr += 1\n    yield self.curr\n    yield self.curr + 1\n</code></pre>\n\n<p>but this will not work, because every time I create Count(), it will reset my counter which I don't want. </p>\n"}, {"tags": ["python", "multithreading", "dictionary"], "comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 1, "creation_date": 1473879198, "post_id": 39497583, "comment_id": 66312898, "body": "My advice: When in doubt, use a lock :-)"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1473879231, "post_id": 39497583, "comment_id": 66312915, "body": "Presumably items() will have to iterate over the the dictionary as part of constructing its snapshot.  So calling items() won&#39;t solve the problem, only move the problem from your code into the implementation of the items() method.  A better solution would be to serialize access to the dictionary using a mutex."}, {"owner": {"reputation": 91, "user_id": 6078361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f8a08361dcb00f8a78af560d9acda05?s=128&d=identicon&r=PG&f=1", "display_name": "abemaw", "link": "https://stackoverflow.com/users/6078361/abemaw"}, "edited": false, "score": 0, "creation_date": 1473887932, "post_id": 39497583, "comment_id": 66317144, "body": "<a href=\"http://effbot.org/pyfaq/what-kinds-of-global-value-mutation-are-thread-safe.htm\" rel=\"nofollow noreferrer\">effbot.org/pyfaq/&hellip;</a> says that dict.keys() is atomic, it is strange to me that items() is not. In the same article, it says that &quot;L1[i:j] = L2&quot; is atomic but &quot;L[i] = L[j]&quot; not, which is strange too. Can I trust that article?"}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1473922878, "post_id": 39497583, "comment_id": 66326642, "body": "Python 2 or Python 3 (it makes a huge difference in this case)? In Python 2 <code>items()</code> gives you a <i>new</i> list of tuples for each call, hence if <code>items()</code> itself is atomic (note: it takes the GIL) your iteration is, too. But anyway: When in doubt use a lock."}], "answers": [{"tags": [], "owner": {"reputation": 7459, "user_id": 3903832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hn87F.png?s=128&g=1", "display_name": "Yoel", "link": "https://stackoverflow.com/users/3903832/yoel"}, "is_accepted": false, "score": 2, "last_activity_date": 1594891809, "last_edit_date": 1594891809, "creation_date": 1554235564, "answer_id": 55482753, "question_id": 39497583, "link": "https://stackoverflow.com/questions/39497583/is-python-dict-items-threadsafe/55482753#55482753", "title": "is python dict.items() threadsafe?", "body": "<p>This answer pertains to <em>CPython</em>'s implementation of <em>Python 2</em> and <em>Python 3</em>.</p>\n<p>Since the <code>items()</code> method is implemented purely in <em>C</em> without releasing the <a href=\"https://docs.python.org/3/c-api/init.html#thread-state-and-the-global-interpreter-lock\" rel=\"nofollow noreferrer\"><code>GIL</code></a> beforehand or during its execution, no other thread may acquire it and the underlying data structure remains unchanged while this method is executed.</p>\n<p>Thus, the invocation of the <code>items()</code> method in <em>Python 2</em> and in <em>Python 3</em> is guaranteed to succeed.</p>\n<p>However, while the operations performed on the returned object are thread-safe in <em>Python 2</em>, they are not in <em>Python 3</em>.</p>\n<h2><em>Python 2</em></h2>\n<p>The <a href=\"https://docs.python.org/2/library/stdtypes.html#dict.items\" rel=\"nofollow noreferrer\">returned object</a> is a copy of the dictionary\u2019s list of <code>(key, value)</code> pairs. As such, it is decoupled from the dictionary and operations performed on the dictionary can't affect the copy in hand.</p>\n<p>Though, it's worth noting that the items themselves aren't copies of the original items so care should be taken when dealing with mutable items.</p>\n<h2><em>Python 3</em></h2>\n<p>The <a href=\"https://docs.python.org/3/library/stdtypes.html#dict.items\" rel=\"nofollow noreferrer\">returned object</a> is a view object. As such, certain operations performed on it might fail, as detailed in <a href=\"https://docs.python.org/3/library/stdtypes.html#dictionary-view-objects\" rel=\"nofollow noreferrer\">the official documentation</a>:</p>\n<blockquote>\n<p>Iterating views while adding or deleting entries in the dictionary may\nraise a <code>RuntimeError</code> or fail to iterate over all entries.</p>\n</blockquote>\n"}], "owner": {"reputation": 91, "user_id": 6078361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f8a08361dcb00f8a78af560d9acda05?s=128&d=identicon&r=PG&f=1", "display_name": "abemaw", "link": "https://stackoverflow.com/users/6078361/abemaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1215, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1594891809, "creation_date": 1473878844, "last_edit_date": 1473922480, "question_id": 39497583, "link": "https://stackoverflow.com/questions/39497583/is-python-dict-items-threadsafe", "title": "is python dict.items() threadsafe?", "body": "<p>Python raises an exception if a dictionary changes its size during iteration using <code>iteritems()</code>.</p>\n\n<p>I am hit by this problem since my program is <em>multithreaded</em> and there are cases that I need to iterate over the <code>dict</code> while another thread is adding keys into the <code>dict</code>.</p>\n\n<p>Fortunately, I don't need the iteration to be very precise on every element in the <code>dict</code>. Therefore I am thinking to use <code>items()</code> instead of <code>iteritems()</code> to do the iteration. I think <code>items()</code> makes a static snapshot of the <code>dict</code> and I would work around the problem. </p>\n\n<p>My question is: does <code>items()</code> raises an exception if the <code>dict</code> size is changing at the same time with <code>items()</code> execution?</p>\n\n<p>thanks</p>\n"}, {"tags": ["python", "amazon-web-services", "elasticsearch", "amazon-elasticsearch"], "comments": [{"owner": {"reputation": 2831, "user_id": 453486, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/44d59c6c5a7e3435409ebe94c9aa9db5?s=128&d=identicon&r=PG", "display_name": "Srikanth Jeeva", "link": "https://stackoverflow.com/users/453486/srikanth-jeeva"}, "edited": false, "score": 0, "creation_date": 1473880719, "post_id": 39497582, "comment_id": 66313685, "body": "I don&#39;t see any issue, other than the body having single quotes."}, {"owner": {"reputation": 11, "user_id": 6832292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1ad8b41c2790b192404c13027b7510?s=128&d=identicon&r=PG&f=1", "display_name": "vagenheart", "link": "https://stackoverflow.com/users/6832292/vagenheart"}, "reply_to_user": {"reputation": 2831, "user_id": 453486, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/44d59c6c5a7e3435409ebe94c9aa9db5?s=128&d=identicon&r=PG", "display_name": "Srikanth Jeeva", "link": "https://stackoverflow.com/users/453486/srikanth-jeeva"}, "edited": false, "score": 0, "creation_date": 1473881687, "post_id": 39497582, "comment_id": 66314189, "body": "would the single quotes cause issue?"}, {"owner": {"reputation": 2831, "user_id": 453486, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/44d59c6c5a7e3435409ebe94c9aa9db5?s=128&d=identicon&r=PG", "display_name": "Srikanth Jeeva", "link": "https://stackoverflow.com/users/453486/srikanth-jeeva"}, "edited": false, "score": 0, "creation_date": 1473882281, "post_id": 39497582, "comment_id": 66314451, "body": "Actually i&#39;m not sure if that might be an issue. But when i copied request_body and tried in my rest console, it was not able to parse the request_body. changing to double quotes worked. I&#39;m not sure if that will work out here."}, {"owner": {"reputation": 11, "user_id": 6832292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1ad8b41c2790b192404c13027b7510?s=128&d=identicon&r=PG&f=1", "display_name": "vagenheart", "link": "https://stackoverflow.com/users/6832292/vagenheart"}, "reply_to_user": {"reputation": 2831, "user_id": 453486, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/44d59c6c5a7e3435409ebe94c9aa9db5?s=128&d=identicon&r=PG", "display_name": "Srikanth Jeeva", "link": "https://stackoverflow.com/users/453486/srikanth-jeeva"}, "edited": false, "score": 0, "creation_date": 1473882521, "post_id": 39497582, "comment_id": 66314584, "body": "i will try it.  Did you change all single quotes in the mapping to double?  Also, I captured the full exception.  Error: failed to parse. Caused by compressor detection can only be called on some xcontent bytes or compressed xcontent bytes"}, {"owner": {"reputation": 11, "user_id": 6832292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1ad8b41c2790b192404c13027b7510?s=128&d=identicon&r=PG&f=1", "display_name": "vagenheart", "link": "https://stackoverflow.com/users/6832292/vagenheart"}, "reply_to_user": {"reputation": 2831, "user_id": 453486, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/44d59c6c5a7e3435409ebe94c9aa9db5?s=128&d=identicon&r=PG", "display_name": "Srikanth Jeeva", "link": "https://stackoverflow.com/users/453486/srikanth-jeeva"}, "edited": false, "score": 0, "creation_date": 1473882756, "post_id": 39497582, "comment_id": 66314694, "body": "changed all single quotes to double and received same error"}], "answers": [{"tags": [], "owner": {"reputation": 1257, "user_id": 1232692, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b491eaba0f986b1c172bbbeff9434654?s=128&d=identicon&r=PG", "display_name": "Kelvin", "link": "https://stackoverflow.com/users/1232692/kelvin"}, "is_accepted": false, "score": 0, "last_activity_date": 1486563112, "creation_date": 1486563112, "answer_id": 42115423, "question_id": 39497582, "link": "https://stackoverflow.com/questions/39497582/elasticsearch-transporterror400-mapper-parsing-exception/42115423#42115423", "title": "Elasticsearch TransportError(400, &#39;mapper_parsing_exception&#39;)", "body": "<p>It looks like you are defining a mapping for 11 fields.  Each of the above will constitute 1 document.  In your processing code below, you break up the header with the regex and then pass each component separately as its own document.</p>\n\n<p>Its breaking cause the mapping of what a document looks like is not what you are passing it:</p>\n\n<pre><code>In [1]: body = '2016-06-14  18:20:07    1.1.1.1 GET \n\n/origin.com/UI/Core/Images/2c.png   304 204 0   \"http://www.referrer.com/CategoryPage.aspx?\"    \"Mozilla/5.0 (Window\n   ...: s NT 6.3; WOW64; Trident/7.0; rv:11.0)\" \"ASP.NET_SessionId=yjumie0d5l12dl; __SessionCookie=7FKbuq3luPyu/Tz2ZKewLVMAjOtKTbLpb8zK8j0TCr+U; __CSALastPageName=XCOaF\n   ...: cpXdhusg==; __CSALastHierarchy=L7ATLYBSXZmXj3ddzXRPF7BVVZFzs=; __CSALastReportSuiteName=0eWIC8dcnfMSQ==; __CSARedirectTags=ABOcOxeO5Rw==;  pck=0aa46f23-cc8d12f4\n   ...: b2d9; __CSCookie=RVqW7dLcpCsk3wIlGmvZSVdPmNjkdGJ9+zMtfOYdMV/fQBUDLKlF01gkDTUg9IENJq+mVzOR1wbxACRCgIcBWYnPY0O83Cet4n73Fah5UvdTzbfayAEgnHsTch/OrCOSTZaK4peWy/1kXq3\n   ...: fX2uHLPbrw4BgXhaZvjRUp4yRhaL+Ug2qcj6pQny6oyot+GPOBP4OgqtbzTZJv7NxykKZHKZRzjYBvBLtbOf9brrzjOihmDBGDG0Rn16jC9T8MtbUl3VKz3GojZeLTmYTCXX67oBmnGZPPtV8joGqYrVcHrSaSmL\n   ...: vVeYt9ieNaiJRkSNnqZMHN0oj0XKxyeFBluQONFGvEGhw/7TKoshKQfd5oNo7A9eJ+UfEvG51iwT/3ePMd6MvzFMdj+5Fg6MIlBuFYXrwVOwIeuhFcjdas9v+bWH923AYt7rUnb99T8AX6+8cJy0/fj69AkdhG/F\n   ...: TvNQrV05Lpbr5gjL5uy8N4Ng2zsoKMdgrFYalARQNM/8h0i7HhxQyx+OY6PXR0VbTGI=; ETE1=fvClmAi4/MuJaZFB+0Cac7U1k4DPA5UuABTPG9Xp+KAVSMf3ES0cJm94ok4ZwIQ1Y/AiaX1j7lf6BQpcoI9Uw\n   ...: GAe9PUFnpSn3YDa0MoJ9xC7fwwPigfrd7oxdyi8nvCKs5OYcrf0zEAMiMUEM//Imb3d015qESq0aThM4W51AmI4EEDdFk2l8aqkDjAE8ZmWwhuKwT7C7xyk4Q1mdD0l3kFum4C1g2cbIaNQ5qMJ3M+DJvu7SbjVI\n   ...: AZanGwrt1aZLL/1Eo1MPVEuGmMOj/p6hHtjBc; icxid=1461418-3071016; gigyaCookieNotification=acknowledged; __PublicSiteRecentSearchesCookie=UeUbHUqUtzmA==; __CSUserIbc\n   ...: IDCookie=dHEe9zrPGNScOhtqfft1DC571R+670C7m6; __CSUserIbcMonikerCookie=Oiz4bVglGrhbAzQ==; __qca=P0-455503562-1461259; icxid=14612418-30873371016; s_vi=[CS]v1|2B9\n   ...: 17051D1FEE-40001000FA6D[CE]; s_fid=0C6EA0A143CF-1810DF8985; dtPC=-; s_cc=true; dtLatC=54p52.5p46.5p37p4p41p55.5p3p105; dtCookie=B66FBB0F863198A2D45|VVMr1BXU3wx\"\n   ...: '\n\nIn [2]: body.splitlines()\nOut[2]: ['2016-06-14  18:20:07    1.1.1.1 GET /origin.com/UI/Core/Images/2c.png   304 204 0   \"http://www.referrer.com/CategoryPage.aspx?\"    \"Mozilla/5.0 (Windows NT 6.3; WOW64; Trident/7.0; rv:11.0)\" \"ASP.NET_SessionId=yjumie0d5l12dl; __SessionCookie=7FKbuq3luPyu/Tz2ZKewLVMAjOtKTbLpb8zK8j0TCr+U; __CSALastPageName=XCOaFcpXdhusg==; __CSALastHierarchy=L7ATLYBSXZmXj3ddzXRPF7BVVZFzs=; __CSALastReportSuiteName=0eWIC8dcnfMSQ==; __CSARedirectTags=ABOcOxeO5Rw==;  pck=0aa46f23-cc8d12f4b2d9; __CSCookie=RVqW7dLcpCsk3wIlGmvZSVdPmNjkdGJ9+zMtfOYdMV/fQBUDLKlF01gkDTUg9IENJq+mVzOR1wbxACRCgIcBWYnPY0O83Cet4n73Fah5UvdTzbfayAEgnHsTch/OrCOSTZaK4peWy/1kXq3fX2uHLPbrw4BgXhaZvjRUp4yRhaL+Ug2qcj6pQny6oyot+GPOBP4OgqtbzTZJv7NxykKZHKZRzjYBvBLtbOf9brrzjOihmDBGDG0Rn16jC9T8MtbUl3VKz3GojZeLTmYTCXX67oBmnGZPPtV8joGqYrVcHrSaSmLvVeYt9ieNaiJRkSNnqZMHN0oj0XKxyeFBluQONFGvEGhw/7TKoshKQfd5oNo7A9eJ+UfEvG51iwT/3ePMd6MvzFMdj+5Fg6MIlBuFYXrwVOwIeuhFcjdas9v+bWH923AYt7rUnb99T8AX6+8cJy0/fj69AkdhG/FTvNQrV05Lpbr5gjL5uy8N4Ng2zsoKMdgrFYalARQNM/8h0i7HhxQyx+OY6PXR0VbTGI=; ETE1=fvClmAi4/MuJaZFB+0Cac7U1k4DPA5UuABTPG9Xp+KAVSMf3ES0cJm94ok4ZwIQ1Y/AiaX1j7lf6BQpcoI9UwGAe9PUFnpSn3YDa0MoJ9xC7fwwPigfrd7oxdyi8nvCKs5OYcrf0zEAMiMUEM//Imb3d015qESq0aThM4W51AmI4EEDdFk2l8aqkDjAE8ZmWwhuKwT7C7xyk4Q1mdD0l3kFum4C1g2cbIaNQ5qMJ3M+DJvu7SbjVIAZanGwrt1aZLL/1Eo1MPVEuGmMOj/p6hHtjBc; icxid=1461418-3071016; gigyaCookieNotification=acknowledged; __PublicSiteRecentSearchesCookie=UeUbHUqUtzmA==; __CSUserIbcIDCookie=dHEe9zrPGNScOhtqfft1DC571R+670C7m6; __CSUserIbcMonikerCookie=Oiz4bVglGrhbAzQ==; __qca=P0-455503562-1461259; icxid=14612418-30873371016; s_vi=[CS]v1|2B917051D1FEE-40001000FA6D[CE]; s_fid=0C6EA0A143CF-1810DF8985; dtPC=-; s_cc=true; dtLatC=54p52.5p46.5p37p4p41p55.5p3p105; dtCookie=B66FBB0F863198A2D45|VVMr1BXU3wx\"']\n\nIn [3]: import re\n\nIn [4]: pattern = '(\\d{4}[-]\\d{2}[-]\\d{2})\\s+(\\d{2}[:]\\d{2}[:]\\d{2})\\s+(\\d{1,3}[.]\\d{1,3}[.]\\d{1,3}[.]\\d{1,3})\\s+([GET|PUT|POST]+)\\s+([^\\s]+)\\s+(\\d+)\\s+(\\d+)\\s+(\\d+)\\s+\n   ...: ([^\\s]+)\\s+(\\\".*?\\\")\\s+(\\\".*?\\\")'\n\nIn [5]: match = re.compile(pattern)\n\nIn [6]: match\nOut[6]: re.compile(r'(\\d{4}[-]\\d{2}[-]\\d{2})\\s+(\\d{2}[:]\\d{2}[:]\\d{2})\\s+(\\d{1,3}[.]\\d{1,3}[.]\\d{1,3}[.]\\d{1,3})\\s+([GET|PUT|POST]+)\\s+([^\\s]+)\\s+(\\d+)\\s+(\\d+)\\s+(\\d+)\\s+([^\\s]+)\\s+(\".*?\")\\s+(\".*?\")')\n\n\n\nIn [11]: x.groups()\nOut[11]:\n('2016-06-14',\n '18:20:07',\n '1.1.1.1',\n 'GET',\n '/origin.com/UI/Core/Images/2c.png',\n '304',\n '204',\n '0',\n '\"http://www.referrer.com/CategoryPage.aspx?\"',\n '\"Mozilla/5.0 (Windows NT 6.3; WOW64; Trident/7.0; rv:11.0)\"',\n '\"ASP.NET_SessionId=yjumie0d5l12dl; __SessionCookie=7FKbuq3luPyu/Tz2ZKewLVMAjOtKTbLpb8zK8j0TCr+U; __CSALastPageName=XCOaFcpXdhusg==; __CSALastHierarchy=L7ATLYBSXZmXj3ddzXRPF7BVVZFzs=; __CSALastReportSuiteName=0eWIC8dcnfMSQ==; __CSARedirectTags=ABOcOxeO5Rw==;  pck=0aa46f23-cc8d12f4b2d9; __CSCookie=RVqW7dLcpCsk3wIlGmvZSVdPmNjkdGJ9+zMtfOYdMV/fQBUDLKlF01gkDTUg9IENJq+mVzOR1wbxACRCgIcBWYnPY0O83Cet4n73Fah5UvdTzbfayAEgnHsTch/OrCOSTZaK4peWy/1kXq3fX2uHLPbrw4BgXhaZvjRUp4yRhaL+Ug2qcj6pQny6oyot+GPOBP4OgqtbzTZJv7NxykKZHKZRzjYBvBLtbOf9brrzjOihmDBGDG0Rn16jC9T8MtbUl3VKz3GojZeLTmYTCXX67oBmnGZPPtV8joGqYrVcHrSaSmLvVeYt9ieNaiJRkSNnqZMHN0oj0XKxyeFBluQONFGvEGhw/7TKoshKQfd5oNo7A9eJ+UfEvG51iwT/3ePMd6MvzFMdj+5Fg6MIlBuFYXrwVOwIeuhFcjdas9v+bWH923AYt7rUnb99T8AX6+8cJy0/fj69AkdhG/FTvNQrV05Lpbr5gjL5uy8N4Ng2zsoKMdgrFYalARQNM/8h0i7HhxQyx+OY6PXR0VbTGI=; ETE1=fvClmAi4/MuJaZFB+0Cac7U1k4DPA5UuABTPG9Xp+KAVSMf3ES0cJm94ok4ZwIQ1Y/AiaX1j7lf6BQpcoI9UwGAe9PUFnpSn3YDa0MoJ9xC7fwwPigfrd7oxdyi8nvCKs5OYcrf0zEAMiMUEM//Imb3d015qESq0aThM4W51AmI4EEDdFk2l8aqkDjAE8ZmWwhuKwT7C7xyk4Q1mdD0l3kFum4C1g2cbIaNQ5qMJ3M+DJvu7SbjVIAZanGwrt1aZLL/1Eo1MPVEuGmMOj/p6hHtjBc; icxid=1461418-3071016; gigyaCookieNotification=acknowledged; __PublicSiteRecentSearchesCookie=UeUbHUqUtzmA==; __CSUserIbcIDCookie=dHEe9zrPGNScOhtqfft1DC571R+670C7m6; __CSUserIbcMonikerCookie=Oiz4bVglGrhbAzQ==; __qca=P0-455503562-1461259; icxid=14612418-30873371016; s_vi=[CS]v1|2B917051D1FEE-40001000FA6D[CE]; s_fid=0C6EA0A143CF-1810DF8985; dtPC=-; s_cc=true; dtLatC=54p52.5p46.5p37p4p41p55.5p3p105; dtCookie=B66FBB0F863198A2D45|VVMr1BXU3wx\"')\n</code></pre>\n\n<p>You can try wrapping all of it into 1 dict like this and passing that? (its a bit rough )</p>\n\n<pre><code>In [20]: x.groups()\nOut[20]:\n('2016-06-14',\n '18:20:07',\n '1.1.1.1',\n 'GET',\n '/origin.com/UI/Core/Images/2c.png',\n '304',\n '204',\n '0',\n '\"http://www.referrer.com/CategoryPage.aspx?\"',\n '\"Mozilla/5.0 (Windows NT 6.3; WOW64; Trident/7.0; rv:11.0)\"',\n '\"ASP.NET_SessionId=yjumie0d5l12dl; __SessionCookie=7FKbuq3luPyu/Tz2ZKewLVMAjOtKTbLpb8zK8j0TCr+U; __CSALastPageName=XCOaFcpXdhusg==; __CSALastHierarchy=L7ATLYBSXZmXj3ddzXRPF7BVVZFzs=; __CSALastReportSuiteName=0eWIC8dcnfMSQ==; __CSARedirectTags=ABOcOxeO5Rw==;  pck=0aa46f23-cc8d12f4b2d9; __CSCookie=RVqW7dLcpCsk3wIlGmvZSVdPmNjkdGJ9+zMtfOYdMV/fQBUDLKlF01gkDTUg9IENJq+mVzOR1wbxACRCgIcBWYnPY0O83Cet4n73Fah5UvdTzbfayAEgnHsTch/OrCOSTZaK4peWy/1kXq3fX2uHLPbrw4BgXhaZvjRUp4yRhaL+Ug2qcj6pQny6oyot+GPOBP4OgqtbzTZJv7NxykKZHKZRzjYBvBLtbOf9brrzjOihmDBGDG0Rn16jC9T8MtbUl3VKz3GojZeLTmYTCXX67oBmnGZPPtV8joGqYrVcHrSaSmLvVeYt9ieNaiJRkSNnqZMHN0oj0XKxyeFBluQONFGvEGhw/7TKoshKQfd5oNo7A9eJ+UfEvG51iwT/3ePMd6MvzFMdj+5Fg6MIlBuFYXrwVOwIeuhFcjdas9v+bWH923AYt7rUnb99T8AX6+8cJy0/fj69AkdhG/FTvNQrV05Lpbr5gjL5uy8N4Ng2zsoKMdgrFYalARQNM/8h0i7HhxQyx+OY6PXR0VbTGI=; ETE1=fvClmAi4/MuJaZFB+0Cac7U1k4DPA5UuABTPG9Xp+KAVSMf3ES0cJm94ok4ZwIQ1Y/AiaX1j7lf6BQpcoI9UwGAe9PUFnpSn3YDa0MoJ9xC7fwwPigfrd7oxdyi8nvCKs5OYcrf0zEAMiMUEM//Imb3d015qESq0aThM4W51AmI4EEDdFk2l8aqkDjAE8ZmWwhuKwT7C7xyk4Q1mdD0l3kFum4C1g2cbIaNQ5qMJ3M+DJvu7SbjVIAZanGwrt1aZLL/1Eo1MPVEuGmMOj/p6hHtjBc; icxid=1461418-3071016; gigyaCookieNotification=acknowledged; __PublicSiteRecentSearchesCookie=UeUbHUqUtzmA==; __CSUserIbcIDCookie=dHEe9zrPGNScOhtqfft1DC571R+670C7m6; __CSUserIbcMonikerCookie=Oiz4bVglGrhbAzQ==; __qca=P0-455503562-1461259; icxid=14612418-30873371016; s_vi=[CS]v1|2B917051D1FEE-40001000FA6D[CE]; s_fid=0C6EA0A143CF-1810DF8985; dtPC=-; s_cc=true; dtLatC=54p52.5p46.5p37p4p41p55.5p3p105; dtCookie=B66FBB0F863198A2D45|VVMr1BXU3wx\"')\n\nIn [22]: doc = dict(zip(('date', 'time', 'client_ip', 'method', 'request', 'status_code', 'bytes', 'time_taken', 'referrer', 'user_agent', 'cookie'),x.groups()))\n\nIn [23]: doc\nOut[23]:\n{'bytes': '204',\n 'client_ip': '1.1.1.1',\n 'cookie': '\"ASP.NET_SessionId=yjumie0d5l12dl; __SessionCookie=7FKbuq3luPyu/Tz2ZKewLVMAjOtKTbLpb8zK8j0TCr+U; __CSALastPageName=XCOaFcpXdhusg==; __CSALastHierarchy=L7ATLYBSXZmXj3ddzXRPF7BVVZFzs=; __CSALastReportSuiteName=0eWIC8dcnfMSQ==; __CSARedirectTags=ABOcOxeO5Rw==;  pck=0aa46f23-cc8d12f4b2d9; __CSCookie=RVqW7dLcpCsk3wIlGmvZSVdPmNjkdGJ9+zMtfOYdMV/fQBUDLKlF01gkDTUg9IENJq+mVzOR1wbxACRCgIcBWYnPY0O83Cet4n73Fah5UvdTzbfayAEgnHsTch/OrCOSTZaK4peWy/1kXq3fX2uHLPbrw4BgXhaZvjRUp4yRhaL+Ug2qcj6pQny6oyot+GPOBP4OgqtbzTZJv7NxykKZHKZRzjYBvBLtbOf9brrzjOihmDBGDG0Rn16jC9T8MtbUl3VKz3GojZeLTmYTCXX67oBmnGZPPtV8joGqYrVcHrSaSmLvVeYt9ieNaiJRkSNnqZMHN0oj0XKxyeFBluQONFGvEGhw/7TKoshKQfd5oNo7A9eJ+UfEvG51iwT/3ePMd6MvzFMdj+5Fg6MIlBuFYXrwVOwIeuhFcjdas9v+bWH923AYt7rUnb99T8AX6+8cJy0/fj69AkdhG/FTvNQrV05Lpbr5gjL5uy8N4Ng2zsoKMdgrFYalARQNM/8h0i7HhxQyx+OY6PXR0VbTGI=; ETE1=fvClmAi4/MuJaZFB+0Cac7U1k4DPA5UuABTPG9Xp+KAVSMf3ES0cJm94ok4ZwIQ1Y/AiaX1j7lf6BQpcoI9UwGAe9PUFnpSn3YDa0MoJ9xC7fwwPigfrd7oxdyi8nvCKs5OYcrf0zEAMiMUEM//Imb3d015qESq0aThM4W51AmI4EEDdFk2l8aqkDjAE8ZmWwhuKwT7C7xyk4Q1mdD0l3kFum4C1g2cbIaNQ5qMJ3M+DJvu7SbjVIAZanGwrt1aZLL/1Eo1MPVEuGmMOj/p6hHtjBc; icxid=1461418-3071016; gigyaCookieNotification=acknowledged; __PublicSiteRecentSearchesCookie=UeUbHUqUtzmA==; __CSUserIbcIDCookie=dHEe9zrPGNScOhtqfft1DC571R+670C7m6; __CSUserIbcMonikerCookie=Oiz4bVglGrhbAzQ==; __qca=P0-455503562-1461259; icxid=14612418-30873371016; s_vi=[CS]v1|2B917051D1FEE-40001000FA6D[CE]; s_fid=0C6EA0A143CF-1810DF8985; dtPC=-; s_cc=true; dtLatC=54p52.5p46.5p37p4p41p55.5p3p105; dtCookie=B66FBB0F863198A2D45|VVMr1BXU3wx\"',\n 'date': '2016-06-14',\n 'method': 'GET',\n 'referrer': '\"http://www.referrer.com/CategoryPage.aspx?\"',\n 'request': '/origin.com/UI/Core/Images/2c.png',\n 'status_code': '304',\n 'time': '18:20:07',\n 'time_taken': '0',\n 'user_agent': '\"Mozilla/5.0 (Windows NT 6.3; WOW64; Trident/7.0; rv:11.0)\"'}\n\nIn [24]:\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6832292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1ad8b41c2790b192404c13027b7510?s=128&d=identicon&r=PG&f=1", "display_name": "vagenheart", "link": "https://stackoverflow.com/users/6832292/vagenheart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1947, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1486563112, "creation_date": 1473878843, "last_edit_date": 1486561618, "question_id": 39497582, "link": "https://stackoverflow.com/questions/39497582/elasticsearch-transporterror400-mapper-parsing-exception", "title": "Elasticsearch TransportError(400, &#39;mapper_parsing_exception&#39;)", "body": "<p>I have some Python code where I am trying to parse some files into AWS ES.  Below is the code:</p>\n\n<pre><code>import re\nimport elasticsearch\nimport itertools\nfrom elasticsearch import Elasticsearch, RequestsHttpConnection, helpers\nfrom boto3 import client, logging, s3, Session\n\naccess_key = 'accesskey'\nsecret_key = 'secretkey'\nbucket = 'bucket'\npattern = '(\\d{4}[-]\\d{2}[-]\\d{2})\\s+(\\d{2}[:]\\d{2}[:]\\d{2})\\s+(\\d{1,3}[.]\\d{1,3}[.]\\d{1,3}[.]\\d{1,3})\\s+([GET|PUT|POST]+)\\s+([^\\s]+)\\s+(\\d+)\\s+(\\d+)\\s+(\\d+)\\s+([^\\s]+)\\s+(\\\".*?\\\")\\s+(\\\".*?\\\")'\nfolder = 'subfolder/'\nhost = 'host'\nindex_name = 'test_index'\n\nes = Elasticsearch(\n    hosts = host,\n    connection_class = RequestsHttpConnection,\n    port = 443,\n    use_ssl = True,\n    verify_certs = False)\n\nrequest_body = {\n    'settings': {\n        'number_of_shards': 5,\n        'number_of_relicas': 0\n    },\n    'mappings': {\n        'logs': {\n            'properties': {\n                'date': { 'type': 'date', 'format': 'YYYY-MM-DD' },\n                'time': { 'type': 'string' },\n                'client_ip': { 'type': 'ip' },\n                'method': { 'type': 'string' },\n                'request': { 'type': 'string' },\n                'status_code': { 'type': 'integer' },\n                'bytes': { 'type': 'integer' },\n                'time_taken': { 'type': 'integer' },\n                'referrer': { 'type': 'string' },\n                'user_agent': { 'type': 'string' },\n                'cookie': { 'type': 'string' }\n            }\n        }\n    }\n}\n\nif es.indices.exists('test_index'):\n    print(index_name + 'Exists')\n\nelse:\n    res = es.indices.create(index = index_name, ignore = [400, 404], body = request_body, request_timeout = 30)\n\nsession = Session(\n    aws_access_key_id = access_key,\n    aws_secret_access_key = secret_key,\n    region_name = 'region')\n\ns3 = session.resource('s3')\nbucket_name = s3.Bucket(bucket)\ndata = [obj for obj in list(bucket_name.objects.filter(Prefix=folder)) if obj.key != folder]\nbulk_data = []\n\nfor obj in data:\n    body = obj.get()['Body'].read().decode('ISO-8859-1')\n    match = re.compile(pattern)\n    for line in body.splitlines():\n        if not line.startswith('#'):\n            result = match.search(line)\n            x = 1\n            if result is not None:\n                for i in range(11):\n                    es.index(index = index_name, doc_type = 'logs', body = result.group(x))\n                    x += 1\n</code></pre>\n\n<p>However, I continue to get the error:</p>\n\n<pre><code>TransportError(400, 'mapper_parsing_exception')\n</code></pre>\n\n<p>This occurs on the index line.  I have checked the data and it looks like my data is being read correctly.  Here is an example of a document that I am trying to index.</p>\n\n<pre><code>#Version: 1.0\n#Fields: date time cs-ip cs-method cs-uri sc-status sc-bytes time-taken cs(Referer) cs(User-Agent) cs(Cookie)\n2016-06-14  18:20:07    1.1.1.1 GET /origin.com/products/PublishingImages/file.png  200 10915   1   \"http://www.referrer.com/CategoryPage.aspx?\"    \"Mozilla/5.0 (Windows NT 6.3; WOW64; Trident/7.0; rv:11.0)\" \"ASP.NET_SessionId=yjumie0ar12dl; __SessionCookie=7FKbuqkC6pmz2ZKewLVMAjOtKTbLpb8zK8j0TCr+U; __CSALastPageName=XCOaCvdhusg==; __CSALastHierarchy=L7ATLEuRZmXj3ddzXRPF7BVVZFzs=; __CSALastReportSuiteName=0eWICfQzEtcnfMSQ==; __CSARedirectTags=ABOcOdYBWK/O5Rw==; pck=0aa46f231-abc9-cc8d12f4b2d9; __CSCookie=RVqW7dLcpb4QVYDUPoADt5vqtK0oo9QKniVXlY0O83Cet4n73Fah5UvdTzbfayAEgnHsTch/OrCOSTZaK4peWy/1kXq3fX2uHLPbrw4BgXhaZvjRUp4yRhaL+Ug2qcj6pQny6oyot+GPOBP4OgqtbzTZJv7NxykKZHKZRzjYBvBLtbOf9brrzjzeaTbDw7r7SEmVzxQOihmDBGDG0Rn16jC9T8MtbUl3VKz3GojZeLTmYTCXX67oBmnGZPPtV8joGqYrVcHrSj0XKxyeFBluQONFGvEGhw/7TKoshKQfd5oNo7A9eJ+UfEvG51iwT/3ePMd6MvzFMdj+eMuizFcjdas9v+bWH923AYt7rUnb99T8AX6+8cJy0/fj69AkdhG/FTvNQrV05Lpbr5gjL5uy8N4Ng2zsoKMdgrFYalARQNM/8h0i7HhxQyx+OY6PXR0VbTGI=; ETE1=fvClmAi4/MuJaZFB+0Cac7U1k4DgF5ylbBWLfPA5UuABTPG9Xp+KAVSMf3ES0cJm94ok4ZwIQ1Y/AiaX1j7lf6BQpcoI9UwGAe9PUFnpSnxiAlp9I5fSbCJyho3YDa0MoJ9xC7fwwPigfrd7oxdyi8nvCKs5OYcrf0zEAMiMUEMFpaB//Imb3d015qESq0aThMWwhuKwT7C7xyk4Q1mdD0l3kFum4C1g2cbIaNQ5qMJ3M+DJvu7SbjVIAZanGwrt1aZLL/1Eo1MPVEuGmMOj/p6hHtjBc; icxid=1461781512418-308716; gigyaCookieNotification=acknowledged; __PublicSiteRecentSearchesCookie=UeUbHRveUtzmA==; __CSUserIbcIDCookie=dHEe9zrGnQX6OLzOhtqfft1DC571R+670C7m6; __CSUserIbcMonikerCookie=Oiz4bVglhbAzQ==; __qca=P0-455562-1461759; icxid=146512418-3087371016; s_vi=[CS]v1|2B90051D1FEE-4000196D[CE]; s_fid=0C6E0CDA143CF-181DECF8985; ddtLatC=549p52.5p46.5p37p41p55.5p35p105; dtCookie=B66FBB0F22CBB49B863198A2\"\n2016-06-14  18:20:07    1.1.1.1 GET /origin.com/UI/Core/Images/2c.png   304 204 0   \"http://www.referrer.com/CategoryPage.aspx?\"    \"Mozilla/5.0 (Windows NT 6.3; WOW64; Trident/7.0; rv:11.0)\" \"ASP.NET_SessionId=yjumie0d5l12dl; __SessionCookie=7FKbuq3luPyu/Tz2ZKewLVMAjOtKTbLpb8zK8j0TCr+U; __CSALastPageName=XCOaFcpXdhusg==; __CSALastHierarchy=L7ATLYBSXZmXj3ddzXRPF7BVVZFzs=; __CSALastReportSuiteName=0eWIC8dcnfMSQ==; __CSARedirectTags=ABOcOxeO5Rw==;  pck=0aa46f23-cc8d12f4b2d9; __CSCookie=RVqW7dLcpCsk3wIlGmvZSVdPmNjkdGJ9+zMtfOYdMV/fQBUDLKlF01gkDTUg9IENJq+mVzOR1wbxACRCgIcBWYnPY0O83Cet4n73Fah5UvdTzbfayAEgnHsTch/OrCOSTZaK4peWy/1kXq3fX2uHLPbrw4BgXhaZvjRUp4yRhaL+Ug2qcj6pQny6oyot+GPOBP4OgqtbzTZJv7NxykKZHKZRzjYBvBLtbOf9brrzjOihmDBGDG0Rn16jC9T8MtbUl3VKz3GojZeLTmYTCXX67oBmnGZPPtV8joGqYrVcHrSaSmLvVeYt9ieNaiJRkSNnqZMHN0oj0XKxyeFBluQONFGvEGhw/7TKoshKQfd5oNo7A9eJ+UfEvG51iwT/3ePMd6MvzFMdj+5Fg6MIlBuFYXrwVOwIeuhFcjdas9v+bWH923AYt7rUnb99T8AX6+8cJy0/fj69AkdhG/FTvNQrV05Lpbr5gjL5uy8N4Ng2zsoKMdgrFYalARQNM/8h0i7HhxQyx+OY6PXR0VbTGI=; ETE1=fvClmAi4/MuJaZFB+0Cac7U1k4DPA5UuABTPG9Xp+KAVSMf3ES0cJm94ok4ZwIQ1Y/AiaX1j7lf6BQpcoI9UwGAe9PUFnpSn3YDa0MoJ9xC7fwwPigfrd7oxdyi8nvCKs5OYcrf0zEAMiMUEM//Imb3d015qESq0aThM4W51AmI4EEDdFk2l8aqkDjAE8ZmWwhuKwT7C7xyk4Q1mdD0l3kFum4C1g2cbIaNQ5qMJ3M+DJvu7SbjVIAZanGwrt1aZLL/1Eo1MPVEuGmMOj/p6hHtjBc; icxid=1461418-3071016; gigyaCookieNotification=acknowledged; __PublicSiteRecentSearchesCookie=UeUbHUqUtzmA==; __CSUserIbcIDCookie=dHEe9zrPGNScOhtqfft1DC571R+670C7m6; __CSUserIbcMonikerCookie=Oiz4bVglGrhbAzQ==; __qca=P0-455503562-1461259; icxid=14612418-30873371016; s_vi=[CS]v1|2B917051D1FEE-40001000FA6D[CE]; s_fid=0C6EA0A143CF-1810DF8985; dtPC=-; s_cc=true; dtLatC=54p52.5p46.5p37p4p41p55.5p3p105; dtCookie=B66FBB0F863198A2D45|VVMr1BXU3wx\"\n</code></pre>\n\n<p>Can anyone see what I am doing wrong?  </p>\n\n<p>EDIT: Captured full error.  Here is output</p>\n\n<pre><code>{\"error\":{\"root_cause\":[{\"type\":\"mapper_parsing_exception\",\"reason\":\"failed to p\narse\"}],\"type\":\"mapper_parsing_exception\",\"reason\":\"failed to parse\",\"caused_by\"\n:{\"type\":\"not_x_content_exception\",\"reason\":\"Compressor detection can only be ca\nlled on some xcontent bytes or compressed xcontent bytes\"}},\"status\":400  \n</code></pre>\n"}]