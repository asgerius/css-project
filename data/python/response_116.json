[{"tags": ["python", "matplotlib", "annotations"], "answers": [{"comments": [{"owner": {"reputation": 1777, "user_id": 2362898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6DmGS.jpg?s=128&g=1", "display_name": "scichris", "link": "https://stackoverflow.com/users/2362898/scichris"}, "edited": false, "score": 0, "creation_date": 1490899166, "post_id": 43106863, "comment_id": 73330729, "body": "Thank you! This is very simple solution, and it works too. I really like it for the simplicity - it&#39;s a hack that does the job.  @Importance answer is very detailed, but more involved.   I&#39;ll use your answer for now because it is shorter, and keep the other one in my repository of very useful code."}, {"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "reply_to_user": {"reputation": 1777, "user_id": 2362898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6DmGS.jpg?s=128&g=1", "display_name": "scichris", "link": "https://stackoverflow.com/users/2362898/scichris"}, "edited": false, "score": 0, "creation_date": 1490899433, "post_id": 43106863, "comment_id": 73330896, "body": "Cheers, mate :-) Please accept one of our answers with the checkmark so people know this is answered."}], "tags": [], "owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "is_accepted": false, "score": 1, "last_activity_date": 1490836822, "creation_date": 1490836822, "answer_id": 43106863, "question_id": 43106205, "link": "https://stackoverflow.com/questions/43106205/draw-arrow-with-text-outside-axes/43106863#43106863", "title": "Draw arrow with text outside axes", "body": "<p>It works if you add a bunch of spaces to both sides:</p>\n\n<pre><code>fig,axes = plt.subplots(2,3)\nax = axes[0,0]\nbbox_props = dict(boxstyle=\"rarrow, pad=0.2\", fc=\"cyan\", ec=\"b\", lw=1)\nt = ax.text(0.15,1.15,45*' '+'Mag'+45*' ', ha=\"left\", va=\"center\",\n            size=15,bbox=bbox_props)\nplt.show()\n</code></pre>\n\n<p>Resulting image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/VkDWv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VkDWv.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 1777, "user_id": 2362898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6DmGS.jpg?s=128&g=1", "display_name": "scichris", "link": "https://stackoverflow.com/users/2362898/scichris"}, "edited": false, "score": 1, "creation_date": 1490898887, "post_id": 43117005, "comment_id": 73330565, "body": "Thank you so much, this is a very neat solution, since the text stays centered on the arrow, and I can easily control its width. It&#39;s more complicated than I thought, but I learn something new about arrowstyles . That&#39;s great!"}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 1, "last_activity_date": 1490874370, "creation_date": 1490874370, "answer_id": 43117005, "question_id": 43106205, "link": "https://stackoverflow.com/questions/43106205/draw-arrow-with-text-outside-axes/43117005#43117005", "title": "Draw arrow with text outside axes", "body": "<p>An option would be to built our own <code>width</code> argument to a custom arrowstyle.<br>\nTo this end we might subclass <code>BoxStyle.RArrow</code> and introduce a <code>width</code> argument in the newly created class <code>MyRArrow</code>.<br>\nThe points of the arrow will then be offset by this width. In this simple example, <code>width</code> is in pixels. \nFinally, we might register this new class as a boxstyle <code>\"myrarrow\"</code>.</p>\n\n<pre><code>from matplotlib.patches import BoxStyle\n\n\nclass MyRArrow(BoxStyle.RArrow):\n        def __init__(self, pad=0.3, width=220):\n            self.width_ = width\n            super(MyRArrow, self).__init__(pad)\n\n        def transmute(self, x0, y0, width, height, mutation_size):\n            p = BoxStyle.RArrow.transmute(self, x0, y0,\n                                          width, height, mutation_size)\n            x = p.vertices[:, 0]\n            p.vertices[1:3, 0] = x[1:3] - self.width_\n            p.vertices[0, 0]   = x[0]   + self.width_\n            p.vertices[3:, 0]  = x[3:]  + self.width_\n            return p\n\nBoxStyle._style_list[\"myrarrow\"] = MyRArrow\n</code></pre>\n\n<p>We can now use this new style and specify a <code>boxstyle=\"myrarrow,pad=0.2, width=150\"</code> as bbox keyword argument.<br>\nIt then also makes sense to specify the arrow position in figure coordinates instead of axes coordinates.</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\nfig,ax = plt.subplots(2,3)\nbbox_props = dict(boxstyle=\"myrarrow,pad=0.2, width=150\", fc=\"cyan\", ec=\"b\", lw=1)\nt = ax[0,1].text(0.5, 0.95, \"Mag\", ha=\"center\", va=\"center\", \n                rotation=0, size=15, bbox=bbox_props, transform=fig.transFigure)\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/1aAqT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1aAqT.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1777, "user_id": 2362898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6DmGS.jpg?s=128&g=1", "display_name": "scichris", "link": "https://stackoverflow.com/users/2362898/scichris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 794, "favorite_count": 0, "accepted_answer_id": 43117005, "answer_count": 2, "score": 2, "last_activity_date": 1490874370, "creation_date": 1490831916, "question_id": 43106205, "link": "https://stackoverflow.com/questions/43106205/draw-arrow-with-text-outside-axes", "title": "Draw arrow with text outside axes", "body": "<p>I want to draw an arrow with text that would stretch across several axes.  Reading <a href=\"http://matplotlib.org/users/annotations_guide.html\" rel=\"nofollow noreferrer\">http://matplotlib.org/users/annotations_guide.html</a></p>\n\n<p>I got that far : </p>\n\n<pre><code>fig,ax = plt.subplots(2,3)\nbbox_props = dict(boxstyle=\"rarrow,pad=0.2\", fc=\"cyan\", ec=\"b\", lw=1)\nt = ax[0,1].text(-0.8, 1.2, \"Mag\", ha=\"center\", va=\"center\", rotation=0, size=15, bbox=bbox_props)\n</code></pre>\n\n<p>which makes </p>\n\n<p><a href=\"https://i.stack.imgur.com/VfOhh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VfOhh.png\" alt=\"arrow\"></a></p>\n\n<p>I found from <a href=\"http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.text\" rel=\"nofollow noreferrer\">text docs</a> that bbox is a dictionary of <a href=\"http://matplotlib.org/api/patches_api.html#matplotlib.patches.Rectangle\" rel=\"nofollow noreferrer\">Rectangle</a>, which has width and height,  but when I set </p>\n\n<pre><code>bbox_props = dict(boxstyle=\"rarrow,pad=0.2\", fc=\"cyan\", ec=\"b\", lw=1, width=3)\nt = ax[0,1].text(-0.8, 1.2, \"Mag\", ha=\"center\", va=\"center\", rotation=0, size=15, bbox=bbox_props)\n</code></pre>\n\n<p>I get a conflict :</p>\n\n<pre><code>---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n&lt;ipython-input-255-006733283545&gt; in &lt;module&gt;()\n     13 # properties of a rectangle : http://matplotlib.org/api/patches_api.html#matplotlib.patches.Rectangle\n     14 \n---&gt; 15 t = ax[0,1].text(-0.8, 1.2, \"Mag\", ha=\"center\", va=\"center\", rotation=0, size=15, bbox=bbox_props)\n     16 plt.savefig('example.png', bbox_inches='tight')\n\n/Users/chris/anaconda3/lib/python3.5/site-packages/matplotlib/axes/_axes.py in text(self, x, y, s, fontdict, withdash, **kwargs)\n    626         if fontdict is not None:\n    627             t.update(fontdict)\n--&gt; 628         t.update(kwargs)\n    629 \n    630         t.set_clip_path(self.patch)\n\n/Users/chris/anaconda3/lib/python3.5/site-packages/matplotlib/text.py in update(self, kwargs)\n    242         super(Text, self).update(kwargs)\n    243         if bbox:\n--&gt; 244             self.set_bbox(bbox)  # depends on font properties\n    245 \n    246     def __getstate__(self):\n\n/Users/chris/anaconda3/lib/python3.5/site-packages/matplotlib/text.py in set_bbox(self, rectprops)\n    514                                     bbox_transmuter=bbox_transmuter,\n    515                                     transform=mtransforms.IdentityTransform(),\n--&gt; 516                                     **props)\n    517         else:\n    518             self._bbox_patch = None\n\nTypeError: __init__() got multiple values for argument 'width'\n</code></pre>\n\n<p>How can I control the size of my arrow with bbox ? Is there a way to extend it all the way to the right? </p>\n\n<p>Thank you! \nChris </p>\n"}, {"tags": ["python", "mysql", "nginx", "sqlalchemy", "flask-sqlalchemy"], "comments": [{"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1490856969, "post_id": 43106192, "comment_id": 73301345, "body": "Please provide a <a href=\"http://stackoverflow.com/help/mcve\">minimal, <i>complete</i>, and <i>verifiable</i> example</a>. Your issues might stem from a multitude of reasons. For example MySQL&#39;s default transaction isolation level is <a href=\"https://en.wikipedia.org/wiki/Isolation_(database_systems)#Repeatable_reads\" rel=\"nofollow noreferrer\">REPEATABLE READ</a>, so if for any reason your transactions linger, you will not be able to read fresh data. And what does &quot;However, the user id 61 is valid and can be called.&quot; mean exactly. How can it be &quot;called&quot;?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1490857230, "post_id": 43106192, "comment_id": 73301497, "body": "Perhaps a wrong database?"}, {"owner": {"reputation": 365, "user_id": 6833838, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-QaeSStb7cFc/AAAAAAAAAAI/AAAAAAAAABE/DsV4Cj7hXbA/photo.jpg?sz=128", "display_name": "Andree Wijaya", "link": "https://stackoverflow.com/users/6833838/andree-wijaya"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1490867642, "post_id": 43106192, "comment_id": 73308346, "body": "@IljaEveril&#228; if you see the user.id is passed in as 61 (does not matter &#39;61&#39; or 61). I tried querying the db using session.execute and it returns back the correct user. however, this session.query().first() keeps returing None and sometimes a User object. How to ensure that fresh data is alr inside ?"}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1490870669, "post_id": 43106192, "comment_id": 73310413, "body": "Create a coherent example that replicates the observed behaviour in your question. Don&#39;t drop single lines of code in comments. You tried querying it using <code>session.execute()</code> where? In a shell? What do you mean by sometimes? On different requests to  your web server? If you want proper answers, provide proper steps to <i>reproduce the issue</i>. More often than not these types of questions turn out to be about accessing the wrong DB, not committing in time, etc."}, {"owner": {"reputation": 365, "user_id": 6833838, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-QaeSStb7cFc/AAAAAAAAAAI/AAAAAAAAABE/DsV4Cj7hXbA/photo.jpg?sz=128", "display_name": "Andree Wijaya", "link": "https://stackoverflow.com/users/6833838/andree-wijaya"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1490874888, "post_id": 43106192, "comment_id": 73313375, "body": "@IljaEveril&#228; i have added more details"}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1490875375, "post_id": 43106192, "comment_id": 73313742, "body": "So you&#39;ve created a user in 1 view, but still my best bet would be that you have concurrent workers servicing requests and for some reason you&#39;re able to keep a transaction going between requests. And so it happens that when you try to read the created user, you happen to get a worker with a stale transaction open, in REPEATABLE READ isolation level, and cannot read the new data."}, {"owner": {"reputation": 365, "user_id": 6833838, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-QaeSStb7cFc/AAAAAAAAAAI/AAAAAAAAABE/DsV4Cj7hXbA/photo.jpg?sz=128", "display_name": "Andree Wijaya", "link": "https://stackoverflow.com/users/6833838/andree-wijaya"}, "edited": false, "score": 0, "creation_date": 1490875504, "post_id": 43106192, "comment_id": 73313840, "body": "I get the gist of your explaination. Is there any way i can handle this ?"}, {"owner": {"reputation": 365, "user_id": 6833838, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-QaeSStb7cFc/AAAAAAAAAAI/AAAAAAAAABE/DsV4Cj7hXbA/photo.jpg?sz=128", "display_name": "Andree Wijaya", "link": "https://stackoverflow.com/users/6833838/andree-wijaya"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1490876597, "post_id": 43106192, "comment_id": 73314612, "body": "@IljaEveril&#228; I have solved it thanks for the guide. managed to get everything smoothly now"}], "answers": [{"comments": [{"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 2, "creation_date": 1490877114, "post_id": 43117811, "comment_id": 73314950, "body": "Good that you got it going, but this is band-aid over a bigger problem: why are your transactions &quot;leaking&quot; between requests. Probably a configuration issue, or perhaps something related to this: <a href=\"http://stackoverflow.com/questions/23301968/invalid-transaction-persisting-across-requests\" title=\"invalid transaction persisting across requests\">stackoverflow.com/questions/23301968/&hellip;</a>"}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 1, "creation_date": 1490877504, "post_id": 43117811, "comment_id": 73315270, "body": "It might also be a bit bad idea to commit state that you don&#39;t control in a view. Rollback would be the &quot;safer&quot; option."}, {"owner": {"reputation": 365, "user_id": 6833838, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-QaeSStb7cFc/AAAAAAAAAAI/AAAAAAAAABE/DsV4Cj7hXbA/photo.jpg?sz=128", "display_name": "Andree Wijaya", "link": "https://stackoverflow.com/users/6833838/andree-wijaya"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 1, "creation_date": 1490889805, "post_id": 43117811, "comment_id": 73324968, "body": "@IljaEveril&#228; updated my code to rollback and it works fine. Thanks! Btw, what kind of config issue may cause leaking ? Cos this is my first time setting up ubuntu server. Need to pick up the pieces"}], "tags": [], "owner": {"reputation": 365, "user_id": 6833838, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-QaeSStb7cFc/AAAAAAAAAAI/AAAAAAAAABE/DsV4Cj7hXbA/photo.jpg?sz=128", "display_name": "Andree Wijaya", "link": "https://stackoverflow.com/users/6833838/andree-wijaya"}, "is_accepted": false, "score": 2, "last_activity_date": 1490876719, "creation_date": 1490876719, "answer_id": 43117811, "question_id": 43106192, "link": "https://stackoverflow.com/questions/43106192/sqlalchemy-query-returning-none/43117811#43117811", "title": "SQLAlchemy Query returning None", "body": "<p>Solved the problem.</p>\n\n<p>Thanks to @iljaEverila. </p>\n\n<p>Basically I need to make sure the dbsession from SQLAlchemy has persisted the data and there is no pending transaction. So that once user registered and user_loader is invoke, i just need to call:</p>\n\n<pre><code>dbsession.commit()\n</code></pre>\n\n<p>Then calling this:</p>\n\n<pre><code>dbsession.query(User).filter_by(id=user_id).first()\n</code></pre>\n\n<p>will be successful.</p>\n\n<p>Thanks</p>\n"}], "owner": {"reputation": 365, "user_id": 6833838, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-QaeSStb7cFc/AAAAAAAAAAI/AAAAAAAAABE/DsV4Cj7hXbA/photo.jpg?sz=128", "display_name": "Andree Wijaya", "link": "https://stackoverflow.com/users/6833838/andree-wijaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6734, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1490876719, "creation_date": 1490831809, "last_edit_date": 1490874875, "question_id": 43106192, "link": "https://stackoverflow.com/questions/43106192/sqlalchemy-query-returning-none", "title": "SQLAlchemy Query returning None", "body": "<p>I have a web application using SQLAlchemy and MySQL-server on my ubuntu 16 &amp; Nginx + uwsgi.</p>\n\n<p>while creating the engine, i put </p>\n\n<pre><code>echo=True\n</code></pre>\n\n<p>to get tracing of the query. I have problem registering user, everytime user_loader is called on flask login, I execute:</p>\n\n<pre><code>dbsession.query(User).filter_by(id=user_id).first()\n</code></pre>\n\n<p>The result i get is :</p>\n\n<pre><code>INFO sqlalchemy.engine.base.Engine SELECT user.id AS user_id, user.name AS user_name, user.email AS user_email, user.pass$\nMar 29 23:48:56 ubuntu-512mb-sgp1-01 uwsgi[26160]: FROM user\nMar 29 23:48:56 ubuntu-512mb-sgp1-01 uwsgi[26160]: WHERE user.id = %s\nMar 29 23:48:56 ubuntu-512mb-sgp1-01 uwsgi[26160]:  LIMIT %s\nMar 29 23:48:56 ubuntu-512mb-sgp1-01 uwsgi[26160]: 2017-03-29 23:48:56,517 INFO sqlalchemy.engine.base.Engine ('61', 1)\n</code></pre>\n\n<p>The result is None. However, the on the above example, using user_id = 61 , , I can find the user on mysql shell in ubuntu to get user id 61.</p>\n\n<p>When i refresh the page a few times, then the result will come out. \nOnce user finished registering, they will be redirected to login page, upon completing the form, it shows error \"Please register\", which is triggered if user is now found using this query:</p>\n\n<pre><code>dbsession.query(User).filter_by(id=user_id).first()\n</code></pre>\n\n<p>On registration my code is:</p>\n\n<pre><code>user = User(name=name, email=email, password=password)\ndbsession.add(user)\ndbsession.commit()\nreturn redirect(url_for('login'))\n</code></pre>\n\n<p>checking has been done to ensure name, email password is valid.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 2, "creation_date": 1490832045, "post_id": 43106188, "comment_id": 73293658, "body": "Questions asking for evaluation of, or how to improve existing (working) code are better suited for <a href=\"http://codereview.stackexchange.com/\">Code Review</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7777347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73925d160772f9eab8bee9c8c40747f5?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan G", "link": "https://stackoverflow.com/users/7777347/ryan-g"}, "edited": false, "score": 0, "creation_date": 1490852663, "post_id": 43106331, "comment_id": 73299154, "body": "Thanks for your answer! The way you&#39;ve simplified the variables a thru i and negated the if-else statements is great and makes sense to me. Also, your variable cheapest_plan will certainly return the lowest number.  The only problem I see is that the string printed out at the end, the way you have it written it will always name the plan &#39;plan100_70&#39;. I&#39;d like it to be able to reference back to which plan it was that led to the cheapest total amount."}], "tags": [], "owner": {"reputation": 9571, "user_id": 2770850, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/fwn9J.jpg?s=128&g=1", "display_name": "Nabin", "link": "https://stackoverflow.com/users/2770850/nabin"}, "is_accepted": false, "score": 0, "last_activity_date": 1490832830, "creation_date": 1490832830, "answer_id": 43106331, "question_id": 43106188, "link": "https://stackoverflow.com/questions/43106188/how-can-i-simplify-this-code/43106331#43106331", "title": "How can I simplify this code?", "body": "<p>You are repeating the code. Also instead of printing the result in the method, you can return the value and show at once. Also the if-else if not needed, as min() function returns minimum anyways.</p>\n\n<pre><code>def woof(spend):\n    plan500_90 = 35.05 * 12\n    plan500_80 = 32.63 * 12\n    plan500_70 = 29.85 * 12\n    plan250_90 = 42.66 * 12\n    plan250_80 = 39.41 * 12\n    plan250_70 = 35.80 * 12\n    plan100_90 = 53.38 * 12\n    plan100_80 = 49.10 * 12\n    plan100_70 = 44.41 * 12\n\n\n    a = plan500_90 + spend\n    b = plan500_80 + spend\n    c = plan500_70 + spend\n\n    d = plan250_90 + spend\n    e = plan250_80 + spend\n    f = plan250_70 + spend\n\n    g = plan100_90 + spend\n    h = plan100_80 + spend\n    i = plan100_70 + spend\n\n    if spend &gt; 500:\n        a = a - 0.90 * (spend - 500)\n        b = b - 0.80 * (spend - 500)\n        c = c - 0.70 * (spend - 500)\n\n    if spend &gt; 250:\n        d = d - 0.90 * (spend - 250)\n        e = e - 0.80 * (spend - 250)\n        f = f - 0.70 * (spend - 250)\n\n    if spend &gt; 100:\n        g = g - 0.90 * (spend - 100)\n        h = h - 0.80 * (spend - 100)\n        i = i - 0.70 * (spend - 100)\n\n    list1 = [a, b, c, d, e, f, g, h, i,]\n\n    return min(list1)\n\n# Any spending variable\nspend = 1000\n\ncheapest_plan = woof(spend)\nprint \"Plan100_70 is the cheapest plan at $%d per year.\" % cheapest_plan\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7777347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73925d160772f9eab8bee9c8c40747f5?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan G", "link": "https://stackoverflow.com/users/7777347/ryan-g"}, "edited": false, "score": 0, "creation_date": 1490852751, "post_id": 43106559, "comment_id": 73299188, "body": "Thanks so much for your answer. I&#39;m super new to python and to programming in general (literally a week and a half into it), so your answer is currently quite above my pay grade ; ) I&#39;m going to try to figure out what you have going on here, as it definitely seems much more concise."}], "tags": [], "owner": {"reputation": 8106, "user_id": 129600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8304c94fad5c5a762301de60d0a9bd7e?s=128&d=identicon&r=PG", "display_name": "acushner", "link": "https://stackoverflow.com/users/129600/acushner"}, "is_accepted": false, "score": 0, "last_activity_date": 1490834655, "creation_date": 1490834655, "answer_id": 43106559, "question_id": 43106188, "link": "https://stackoverflow.com/questions/43106188/how-can-i-simplify-this-code/43106559#43106559", "title": "How can I simplify this code?", "body": "<p>something like this will be a lot shorter. i haven't tested it, but should be ok.</p>\n\n<pre><code>class Plan:\n    def __init__(self, monthly_spend, min_spend, discount):\n        self.yearly_spend = monthly_spend * 12\n        self.min_spend = min_spend\n        self.discount = discount\n\n    def cost(self, spend):\n        return float(self.yearly_spend + spend - self.discount * max(spend - self.min_spend, 0))\n\n    def __str__(self):\n        return 'Plan{}_{}'.format(self.min_spend, self.discount)\n\nplans = [Plan(35.05, 500, .9), Plan(32.63, 500, .8)]  # TODO: fill in rest\n\ndef get_cheapest_plan(spend):\n    cheapest_plan = min(plans, key=lambda x: x.cost(spend))\n    print('{} is the cheapest plan at ${:.02} per year'.format(str(cheapest_plan), cheapest_plan.cost(spend))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7777347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73925d160772f9eab8bee9c8c40747f5?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan G", "link": "https://stackoverflow.com/users/7777347/ryan-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490834655, "creation_date": 1490831786, "question_id": 43106188, "link": "https://stackoverflow.com/questions/43106188/how-can-i-simplify-this-code", "title": "How can I simplify this code?", "body": "<p>I want to input a single argument (spend) to this function, and then have it return a string stating which of the 9 possibilities (plan500_90, plan500_80, etc.) is the lowest number. </p>\n\n<p>It's currently working but seems much longer than it has to be.</p>\n\n<pre><code>def woof(spend):\n    plan500_90 = 35.05 * 12\n    plan500_80 = 32.63 * 12\n    plan500_70 = 29.85 * 12\n    plan250_90 = 42.66 * 12\n    plan250_80 = 39.41 * 12\n    plan250_70 = 35.80 * 12\n    plan100_90 = 53.38 * 12\n    plan100_80 = 49.10 * 12\n    plan100_70 = 44.41 * 12\n\n    if spend &gt; 500:\n        a = plan500_90 + spend - 0.90 * (spend - 500)\n        b = plan500_80 + spend - 0.80 * (spend - 500)\n        c = plan500_70 + spend - 0.70 * (spend - 500)\n    else:\n        a = plan500_90 + spend\n        b = plan500_80 + spend\n        c = plan500_70 + spend\n    if spend &gt; 250:\n        d = plan250_90 + spend - 0.90 * (spend - 250)\n        e = plan250_80 + spend - 0.80 * (spend - 250)\n        f = plan250_70 + spend - 0.70 * (spend - 250)\n    else:\n        d = plan250_90 + spend\n        e = plan250_80 + spend\n        f = plan250_70 + spend\n    if spend &gt; 100:\n        g = plan100_90 + spend - 0.90 * (spend - 100)\n        h = plan100_80 + spend - 0.80 * (spend - 100)\n        i = plan100_70 + spend - 0.70 * (spend - 100)\n    else:\n        g = plan100_90 + spend\n        h = plan100_80 + spend\n        i = plan100_70 + spend\n\n    list1 = [a, b, c, d, e, f, g, h, i,]\n\n    if min(list1) == a:\n        print \"Plan500_90 is the cheapest plan at $%d per year.\" % a\n    elif min(list1) == b:\n        print \"Plan500_80 is the cheapest plan at $%d per year.\" % b\n    elif min(list1) == c:\n        print \"Plan500_70 is the cheapest plan at $%d per year.\" % c\n    elif min(list1) == d:\n        print \"Plan250_90 is the cheapest plan at $%d per year.\" % d\n    elif min(list1) == e:\n        print \"Plan250_80 is the cheapest plan at $%d per year.\" % e\n    elif min(list1) == f:\n        print \"Plan250_70 is the cheapest plan at $%d per year.\" % f\n    elif min(list1) == g:\n        print \"Plan100_90 is the cheapest plan at $%d per year.\" % g\n    elif min(list1) == h:\n        print \"Plan100_80 is the cheapest plan at $%d per year.\" % h\n    elif min(list1) == i:\n        print \"Plan100_70 is the cheapest plan at $%d per year.\" % i\n</code></pre>\n"}, {"tags": ["python", "ipython", "jupyter-notebook", "jupyter", "plotly"], "answers": [{"tags": [], "owner": {"reputation": 1624, "user_id": 2461854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/47e730b86ab52e2857d82e1f3d9d6a43?s=128&d=identicon&r=PG", "display_name": "Tom Malkin", "link": "https://stackoverflow.com/users/2461854/tom-malkin"}, "is_accepted": true, "score": 35, "last_activity_date": 1490843216, "creation_date": 1490843216, "answer_id": 43107797, "question_id": 43106170, "link": "https://stackoverflow.com/questions/43106170/remove-the-this-is-the-format-of-your-plot-grid-in-a-plotly-subplot-in-a-jupy/43107797#43107797", "title": "Remove the &quot;This is the format of your plot grid:&quot; in a plotly subplot in a Jupyter Notebook", "body": "<p>Figured it out, set the <code>print_grid</code> parameter to False:</p>\n\n<pre><code>fig = pl.tools.make_subplots(cols=4, rows=4, print_grid=False)\n</code></pre>\n\n<p>Which I found in</p>\n\n<pre><code>help(pl.tools.make_subplots)\n</code></pre>\n"}], "owner": {"reputation": 1624, "user_id": 2461854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/47e730b86ab52e2857d82e1f3d9d6a43?s=128&d=identicon&r=PG", "display_name": "Tom Malkin", "link": "https://stackoverflow.com/users/2461854/tom-malkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3673, "favorite_count": 1, "accepted_answer_id": 43107797, "answer_count": 1, "score": 17, "last_activity_date": 1490843216, "creation_date": 1490831703, "question_id": 43106170, "link": "https://stackoverflow.com/questions/43106170/remove-the-this-is-the-format-of-your-plot-grid-in-a-plotly-subplot-in-a-jupy", "title": "Remove the &quot;This is the format of your plot grid:&quot; in a plotly subplot in a Jupyter Notebook", "body": "<p>When using Plotly in a Jupyter Notebook plotting an offline iplot figure with subplots, before the figure I get the output:</p>\n\n<pre><code>This is the format of your plot grid: \n[ (1,1) x1,y1 ]    [ (1,2) x2,y2 ]    [ (1,3) x3,y3 ]    [ (1,4) x4,y4 ]  \n[ (2,1) x5,y5 ]    [ (2,2) x6,y6 ]    [ (2,3) x7,y7 ]    [ (2,4) x8,y8 ]  \n[ (3,1) x9,y9 ]    [ (3,2) x10,y10 ]  [ (3,3) x11,y11 ]  [ (3,4) x12,y12 ]\n[ (4,1) x13,y13 ]  [ (4,2) x14,y14 ]  [ (4,3) x15,y15 ]  [ (4,4) x16,y16 ]\n</code></pre>\n\n<p>How do I remove this from the output?</p>\n\n<p>Example code:</p>\n\n<pre><code>import plotly as pl\nimport plotly.graph_objs as go\nimport numpy as np\n\nfig = pl.tools.make_subplots(cols=4, rows=4)\n\nfor col in range(1, 5):\n    for row in range(1, 5):\n        x = np.random.rand(500)\n        trace = go.Histogram(x=x, histnorm='density')\n        fig.append_trace(trace, row, col)\n\npl.offline.iplot(fig)\n</code></pre>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1490831718, "post_id": 43106154, "comment_id": 73293569, "body": "Why didn&#39;t you print out all the variable types and their values?  That would show it right away."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 7788795, "user_type": "registered", "profile_image": "https://graph.facebook.com/1873615629573851/picture?type=large", "display_name": "Chris Chen", "link": "https://stackoverflow.com/users/7788795/chris-chen"}, "edited": false, "score": 0, "creation_date": 1490832366, "post_id": 43106162, "comment_id": 73293742, "body": "thanks for your reply. can&#39;t float(height)on the last line turn height into a float type?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 47, "user_id": 7788795, "user_type": "registered", "profile_image": "https://graph.facebook.com/1873615629573851/picture?type=large", "display_name": "Chris Chen", "link": "https://stackoverflow.com/users/7788795/chris-chen"}, "edited": false, "score": 0, "creation_date": 1490832711, "post_id": 43106162, "comment_id": 73293846, "body": "It certainly can -- and did.  That&#39;s where you got the &quot;float&quot; type in the error message.  I was merely breaking the solution into tiny pieces for readability.  If you use the values only once, you may as well do the conversions in line, and not convert <b>age</b> at all."}, {"owner": {"reputation": 47, "user_id": 7788795, "user_type": "registered", "profile_image": "https://graph.facebook.com/1873615629573851/picture?type=large", "display_name": "Chris Chen", "link": "https://stackoverflow.com/users/7788795/chris-chen"}, "edited": false, "score": 0, "creation_date": 1490833279, "post_id": 43106162, "comment_id": 73293997, "body": "if so, weight is a &#39;int&#39; and float(height) is a &#39;float&#39;, why there is still a &#39;str&#39; in the line? sorry that i asked again and again"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 47, "user_id": 7788795, "user_type": "registered", "profile_image": "https://graph.facebook.com/1873615629573851/picture?type=large", "display_name": "Chris Chen", "link": "https://stackoverflow.com/users/7788795/chris-chen"}, "edited": false, "score": 0, "creation_date": 1490833375, "post_id": 43106162, "comment_id": 73294016, "body": "How did you determine that <b>weight</b> is an int?  Your code suggests that it&#39;s a str (all input starts as string).  Did you print the value and type, as I suggested?  :-)"}, {"owner": {"reputation": 47, "user_id": 7788795, "user_type": "registered", "profile_image": "https://graph.facebook.com/1873615629573851/picture?type=large", "display_name": "Chris Chen", "link": "https://stackoverflow.com/users/7788795/chris-chen"}, "edited": false, "score": 0, "creation_date": 1490833502, "post_id": 43106162, "comment_id": 73294046, "body": "yes, i really use print weight, type(weight) to check it and i get 48 &lt;type &#39;int&#39;&gt;, doesn&#39;t this means that it&#39;s a int?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 47, "user_id": 7788795, "user_type": "registered", "profile_image": "https://graph.facebook.com/1873615629573851/picture?type=large", "display_name": "Chris Chen", "link": "https://stackoverflow.com/users/7788795/chris-chen"}, "edited": false, "score": 0, "creation_date": 1490887341, "post_id": 43106162, "comment_id": 73323274, "body": "Yes, it does.  I just noticed the misplaced parentheses, myself.  Glad you found that."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1490831653, "creation_date": 1490831653, "answer_id": 43106162, "question_id": 43106154, "link": "https://stackoverflow.com/questions/43106154/typeerror-unsupported-operand-types-for-str-and-float/43106162#43106162", "title": "TypeError: unsupported operand type(s) for /: &#39;str&#39; and &#39;float&#39;", "body": "<pre><code>weight = float(weight)\nheight = float(height)\nage = int(age)\n</code></pre>\n\n<p>You forgot to convert the input from string to numeric.  To diagnose:</p>\n\n<pre><code>print weight, type(weight)\nprint height, type(height)\nprint age, type(age)\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47, "user_id": 7788795, "user_type": "registered", "profile_image": "https://graph.facebook.com/1873615629573851/picture?type=large", "display_name": "Chris Chen", "link": "https://stackoverflow.com/users/7788795/chris-chen"}, "is_accepted": false, "score": 3, "last_activity_date": 1490837558, "creation_date": 1490837558, "answer_id": 43106975, "question_id": 43106154, "link": "https://stackoverflow.com/questions/43106154/typeerror-unsupported-operand-types-for-str-and-float/43106975#43106975", "title": "TypeError: unsupported operand type(s) for /: &#39;str&#39; and &#39;float&#39;", "body": "<pre><code>from sys import argv\nscript, age, height=argv\nprint 'you\\'re %r old'%age\nweight=input('and i need your weight to calculate BMI, can you tell me:') \nprint 'your BMI is %r'%(weight/((float(height)/100)**2))\n</code></pre>\n\n<p>i found the solution, it's because a formula after % must be in () </p>\n"}], "owner": {"reputation": 47, "user_id": 7788795, "user_type": "registered", "profile_image": "https://graph.facebook.com/1873615629573851/picture?type=large", "display_name": "Chris Chen", "link": "https://stackoverflow.com/users/7788795/chris-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6611, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1490837879, "creation_date": 1490831600, "last_edit_date": 1490837879, "question_id": 43106154, "link": "https://stackoverflow.com/questions/43106154/typeerror-unsupported-operand-types-for-str-and-float", "title": "TypeError: unsupported operand type(s) for /: &#39;str&#39; and &#39;float&#39;", "body": "<p>I am using Python 2 but I'm getting an error:</p>\n\n<pre>\nTypeError: unsupported operand type(s) for /: 'str' and 'float'\n</pre>\n\n<p>when the script runs to the last line.  I don't understand which variable is still a string type.</p>\n\n<pre><code>from sys import argv\nscript, age, height=argv\nprint 'you\\'re %r old'%age\nweight=input('and i need your weight to calculate BMI, can you tell me:') \nprint 'your BMI is %r'%weight/((float(height)/100)**2)\n</code></pre>\n"}, {"tags": ["python", "list", "sorting", "dictionary", "reverse"], "comments": [{"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 0, "creation_date": 1490831848, "post_id": 43106152, "comment_id": 73293611, "body": "<code>key=lambda e: (e[1][0], -datetime.datetime(e[1][1]))</code> assuming that <code>bid_date_time</code> is a valid date format string. And you can just use <code>max()</code>"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1490832105, "post_id": 43106152, "comment_id": 73293673, "body": "Try a <a href=\"https://wiki.python.org/moin/HowTo/Sorting\" rel=\"nofollow noreferrer\">sorting tutorial</a>.  I think that you want to sort several times, starting with the least important factor and finish with the most.  You&#39;ll also want to specify the sort key at each level."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7492345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34be6aa735030b3ab67f4082a35641d2?s=128&d=identicon&r=PG&f=1", "display_name": "corbin-coleman", "link": "https://stackoverflow.com/users/7492345/corbin-coleman"}, "is_accepted": false, "score": 0, "last_activity_date": 1491002943, "creation_date": 1491002943, "answer_id": 43151026, "question_id": 43106152, "link": "https://stackoverflow.com/questions/43106152/sorting-dictionary-of-lists-in-python/43151026#43151026", "title": "Sorting dictionary of lists in Python", "body": "<p>At first glance big thing that I can think of doing is to use a different datastructure. The dicitonary you have works well for storing it the information, but is clearly creating a hurtle. I'd suggest another a dictionary of dictionaries maybe, that way you could access the different values (cust_bid_price, bid_date_time, etc.) by the keys they are in the sub-dictionaries. It's definitely not perfect, but it may lead to another way of looking at this and solving the problems you have.</p>\n"}, {"tags": [], "owner": {"reputation": 180853, "user_id": 424499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc2071afd499daef001e75e14d7f9cce?s=128&d=identicon&r=PG", "display_name": "Raymond Hettinger", "link": "https://stackoverflow.com/users/424499/raymond-hettinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1491003484, "last_edit_date": 1491003484, "creation_date": 1491003149, "answer_id": 43151042, "question_id": 43106152, "link": "https://stackoverflow.com/questions/43106152/sorting-dictionary-of-lists-in-python/43151042#43151042", "title": "Sorting dictionary of lists in Python", "body": "<blockquote>\n  <p>I need to find the max bid (sorted in reverse to bring \n  highest bid and then oldest bid if there are two of the same value).</p>\n</blockquote>\n\n<p>This can be done by taking advantage of <a href=\"https://en.wikipedia.org/wiki/Sorting_algorithm#Stability\" rel=\"nofollow noreferrer\">sort stability</a> and doing two successive sorts:</p>\n\n<pre><code>bids.sort(key = lambda e: e[1])               # where e[1] is bid_date_time\nbids.sort(key = lambda e: e[0], reverse=True) # where e[0] is cust_bid_price\n</code></pre>\n\n<p>See the Python Sorting HowTo guide for <a href=\"https://docs.python.org/3/howto/sorting.html#sort-stability-and-complex-sorts\" rel=\"nofollow noreferrer\">more explanation and another example</a>. </p>\n"}], "owner": {"reputation": 17, "user_id": 7788777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bd2b6f63f85d84ee61480b32b8e0cf?s=128&d=identicon&r=PG&f=1", "display_name": "Detterman", "link": "https://stackoverflow.com/users/7788777/detterman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1491003484, "creation_date": 1490831593, "question_id": 43106152, "link": "https://stackoverflow.com/questions/43106152/sorting-dictionary-of-lists-in-python", "title": "Sorting dictionary of lists in Python", "body": "<p>I'm making an auction program and need to sort stored bids by price, and date. I'm trying to pull any bids that equal the reserve price, and find the earliest one. I've pulled the line below from another question, however I need to find the max bid (sorted in reverse to bring highest bid and then oldest bid if there are two of the same value). </p>\n\n<pre><code>sorted(stored_bids_1.items(), key=lambda e:e[1][2][3][4])\n</code></pre>\n\n<p>The dictionary has the following info:</p>\n\n<pre><code>stored_bids_1 {bid_number : [cust_bid_price, bid_date_time, cust_num_seats, cust_name]}\n</code></pre>\n\n<p>I'd like the bids to be ranked by bid price, then date&amp;time. </p>\n\n<p>Any help is much appreciated!</p>\n"}, {"tags": ["python", "string", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 186, "user_id": 7471556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5daae352aef5a3a21134886ed345de22?s=128&d=identicon&r=PG", "display_name": "Steve Harris", "link": "https://stackoverflow.com/users/7471556/steve-harris"}, "is_accepted": false, "score": 0, "last_activity_date": 1490831672, "creation_date": 1490831672, "answer_id": 43106163, "question_id": 43106148, "link": "https://stackoverflow.com/questions/43106148/how-to-clean-up-a-string-excluding-certain-characters/43106163#43106163", "title": "How to clean up a string excluding certain characters", "body": "<p>Use a character class, like <code>[abc]</code> matches a, b, or c</p>\n"}, {"tags": [], "owner": {"reputation": 2011, "user_id": 5288896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/20fk6.jpg?s=128&g=1", "display_name": "Satish Prakash Garg", "link": "https://stackoverflow.com/users/5288896/satish-prakash-garg"}, "is_accepted": false, "score": 2, "last_activity_date": 1490831784, "creation_date": 1490831784, "answer_id": 43106185, "question_id": 43106148, "link": "https://stackoverflow.com/questions/43106148/how-to-clean-up-a-string-excluding-certain-characters/43106185#43106185", "title": "How to clean up a string excluding certain characters", "body": "<p>You can use <code>filter()</code> and <code>strip()</code> to remove <code>\\n</code>, <code>\\t</code>, <code>\\r</code> and <code>extra whitespaces</code> while preserving rest of the characters, something like this :</p>\n\n<pre><code>string = \"\\n\\n\\r\\n       Scott Hibb's       Amazing    Whisky Grilled Baby Back Ribs\\r\\n                \\n\\n\\n\\n\"\nprint(' '.join(filter(None, string.strip().split()))) \n</code></pre>\n\n<p>This will result in :</p>\n\n<pre><code>Scott Hibb's Amazing Whisky Grilled Baby Back Ribs\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 662, "user_id": 2325694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e557f0b61a4c84567abca5ca66e3c3f3?s=128&d=identicon&r=PG", "display_name": "Joe Linoff", "link": "https://stackoverflow.com/users/2325694/joe-linoff"}, "is_accepted": true, "score": 1, "last_activity_date": 1490836564, "creation_date": 1490836564, "answer_id": 43106826, "question_id": 43106148, "link": "https://stackoverflow.com/questions/43106148/how-to-clean-up-a-string-excluding-certain-characters/43106826#43106826", "title": "How to clean up a string excluding certain characters", "body": "<p>The accepted answer is great but if you would like a slightly more general solution that allows you to specify the explicit set of characters that you still want to remove, add a lambda function to the filter, something like this.</p>\n\n<pre><code>&gt;&gt;&gt; y = \"\\n\\n\\r\\n       Scott Hibb's       Amazing    Whisky Grilled Baby Back Ribs\\r\\n                \\n\\n\\n\\n\"\n&gt;&gt;&gt; ' '.join(filter(lambda x: x not in ['\\n', '\\r'], y).strip().split())\n\"Scott Hibb's Amazing Whisky Grilled Baby Back Ribs\"\n</code></pre>\n\n<p>Please note that for your example, explicitly specifying the <code>\\n</code> and <code>\\r</code> in the lambda is overkill because strip() treats <code>\\n</code> and <code>\\r</code> as whitespace but if you wanted to remove other characters, then this a reasonable approach. For example this is how you would strip extra white space characters, remove the <code>\\n</code> and <code>\\r</code>, and remove all standard vowels (a, e, i, o, u).</p>\n\n<pre><code>&gt;&gt;&gt; y = \"\\n\\n\\r\\n       Scott Hibb's       Amazing    Whisky Grilled Baby Back Ribs\\r\\n                \\n\\n\\n\\n\"\n&gt;&gt;&gt; ' '.join(filter(lambda x: x.lower() not in ['a', 'e', 'i', 'o', 'u', '\\r'], y).strip().split())\n\"Sctt Hbb's mzng Whsky Grlld Bby Bck Rbs\"\n</code></pre>\n"}], "owner": {"reputation": 229, "user_id": 7266587, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6d12390ebac9579162662b236918ae1a?s=128&d=identicon&r=PG&f=1", "display_name": "Harry Tong", "link": "https://stackoverflow.com/users/7266587/harry-tong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 43106826, "answer_count": 3, "score": 0, "last_activity_date": 1490836564, "creation_date": 1490831538, "last_edit_date": 1490834999, "question_id": 43106148, "link": "https://stackoverflow.com/questions/43106148/how-to-clean-up-a-string-excluding-certain-characters", "title": "How to clean up a string excluding certain characters", "body": "<p>I want to clean up the below string but only get rid of the <code>\\n</code>, <code>\\r</code> and <code>extra spaces</code> but not the apostrophe<code>(')</code> and other characters like dash<code>(-)</code> and colon<code>(:)</code>. </p>\n\n<p>Right now I am using this code but it gets rid of all special characters.</p>\n\n<pre><code>string = \"\\n\\n\\r\\n            Scott Hibb's Amazing Whisky Grilled Baby Back Ribs\\r\\n                \\n\\n\\n\\n\"\nrx = re.compile('\\W+')\nstring = rx.sub(' ', string).strip()\nprint(string)\n</code></pre>\n\n<p>How can i do this?</p>\n"}, {"tags": ["python", "celery", "chain"], "comments": [{"owner": {"reputation": 7477, "user_id": 639054, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/580360aabadbff23dc8324d6b79bb85b?s=128&d=identicon&r=PG", "display_name": "Bernhard", "link": "https://stackoverflow.com/users/639054/bernhard"}, "edited": false, "score": 0, "creation_date": 1491822118, "post_id": 43106099, "comment_id": 73706936, "body": "I would create a chain for every link you find in the website and not use dmap. Create one task which does get_links_from_website and this submits one chain for each link."}, {"owner": {"reputation": 14513, "user_id": 64911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fdba1dde11dc7b4f62a912ad88379379?s=128&d=identicon&r=PG", "display_name": "mlissner", "link": "https://stackoverflow.com/users/64911/mlissner"}, "reply_to_user": {"reputation": 7477, "user_id": 639054, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/580360aabadbff23dc8324d6b79bb85b?s=128&d=identicon&r=PG", "display_name": "Bernhard", "link": "https://stackoverflow.com/users/639054/bernhard"}, "edited": false, "score": 0, "creation_date": 1491840859, "post_id": 43106099, "comment_id": 73720583, "body": "@bernhard: It&#39;s it a no-no to create tasks in tasks?"}, {"owner": {"reputation": 7477, "user_id": 639054, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/580360aabadbff23dc8324d6b79bb85b?s=128&d=identicon&r=PG", "display_name": "Bernhard", "link": "https://stackoverflow.com/users/639054/bernhard"}, "edited": false, "score": 0, "creation_date": 1491901816, "post_id": 43106099, "comment_id": 73746098, "body": "I don&#39;t know, I assume it&#39;s not. We do have beat tasks that do some regular status checks and launch other long running tasks to react to status changes. Works nicely."}], "answers": [{"comments": [{"owner": {"reputation": 14513, "user_id": 64911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fdba1dde11dc7b4f62a912ad88379379?s=128&d=identicon&r=PG", "display_name": "mlissner", "link": "https://stackoverflow.com/users/64911/mlissner"}, "edited": false, "score": 0, "creation_date": 1491868272, "post_id": 43206573, "comment_id": 73733275, "body": "This still doesn&#39;t handle the issue of flooding the queue. Crawling is an exponential process. How can I prevent my queue from growing exponentially as the crawler runs? There&#39;s no use for it to have more tasks than roughly 5&#215; the number of workers at any time. More than that just wastes space. Put another way, even if I don&#39;t use dmap/groups, I&#39;ll still be able to create tasks faster than they can be completed."}, {"owner": {"reputation": 22648, "user_id": 2698552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/608fa09693cef8d410834bd55755dbed?s=128&d=identicon&r=PG", "display_name": "ChillarAnand", "link": "https://stackoverflow.com/users/2698552/chillaranand"}, "reply_to_user": {"reputation": 14513, "user_id": 64911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fdba1dde11dc7b4f62a912ad88379379?s=128&d=identicon&r=PG", "display_name": "mlissner", "link": "https://stackoverflow.com/users/64911/mlissner"}, "edited": false, "score": 0, "creation_date": 1491889329, "post_id": 43206573, "comment_id": 73738752, "body": "@mlissner In this case, you should store URLs and use celery scheduler to create a job which will periodically check for the number of existing/scheduled tasks and queues up an appropriate number of tasks."}, {"owner": {"reputation": 14513, "user_id": 64911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fdba1dde11dc7b4f62a912ad88379379?s=128&d=identicon&r=PG", "display_name": "mlissner", "link": "https://stackoverflow.com/users/64911/mlissner"}, "edited": false, "score": 0, "creation_date": 1491891645, "post_id": 43206573, "comment_id": 73739658, "body": "It&#39;s an ongoing crawler and we want to get the links as quick as possible. A scheduled task would create delays."}, {"owner": {"reputation": 14513, "user_id": 64911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fdba1dde11dc7b4f62a912ad88379379?s=128&d=identicon&r=PG", "display_name": "mlissner", "link": "https://stackoverflow.com/users/64911/mlissner"}, "edited": false, "score": 0, "creation_date": 1494957725, "post_id": 43206573, "comment_id": 75045178, "body": "I created a throttling tool here: <a href=\"http://stackoverflow.com/a/43429475/64911\">stackoverflow.com/a/43429475/64911</a>"}], "tags": [], "owner": {"reputation": 22648, "user_id": 2698552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/608fa09693cef8d410834bd55755dbed?s=128&d=identicon&r=PG", "display_name": "ChillarAnand", "link": "https://stackoverflow.com/users/2698552/chillaranand"}, "is_accepted": false, "score": 3, "last_activity_date": 1491307022, "creation_date": 1491307022, "answer_id": 43206573, "question_id": 43106099, "link": "https://stackoverflow.com/questions/43106099/chain-a-celery-tasks-results-into-a-distributed-group/43206573#43206573", "title": "Chain a celery task&#39;s results into a distributed group", "body": "<p>celery canvas provides <a href=\"https://celery.readthedocs.io/en/latest/userguide/canvas.html#chunks\" rel=\"nofollow noreferrer\">chunks</a> to split a task into chunks. Unfortunately, this won't work with primitives like chain, group.</p>\n\n<p>You can use celery signals to prevent issues with dmap/clone.</p>\n\n<pre><code>ch = chain(\n    download_sub_page.s(),\n    process_sub_page.s(),\n    upload_sub_page.s(),\n)\n\n@task_success.connect(sender='get_links_from_website')\ndef task_success_handler(sender=None, headers=None, body=None, **kwargs):\n    result = kwargs['result']    \n    header = [ch(i) for i in result]\n    callback = mark_website_done.si()\n    chord(header)(callback)\n</code></pre>\n\n<p>Create a chain for processing pages and hook the last task to it using a chord. This function gets executed whenever <code>get_links_from_website</code> runs succcessfully.</p>\n\n<p>Depending on the time taken by chain, you can also save results of <code>get_links_from_website</code> somewhere. Then iterate over a batch of them to queue up chains and with the last batch, you can hook a callback to last task.</p>\n"}, {"tags": [], "owner": {"reputation": 371, "user_id": 7964197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4b7533735678af357fbb658fc2cb307?s=128&d=identicon&r=PG", "display_name": "Jether", "link": "https://stackoverflow.com/users/7964197/jether"}, "is_accepted": false, "score": 1, "last_activity_date": 1498478748, "last_edit_date": 1498478748, "creation_date": 1498473713, "answer_id": 44757897, "question_id": 43106099, "link": "https://stackoverflow.com/questions/43106099/chain-a-celery-tasks-results-into-a-distributed-group/44757897#44757897", "title": "Chain a celery task&#39;s results into a distributed group", "body": "<p>This is a bit hacky but we're using deepcopy to clone the callback, this fixes the bug with Signature's shallow copy</p>\n\n<pre><code>def dmap(it, callback, final=None):\n    # Map a callback over an iterator and return as a group\n    callback = subtask(callback)\n\n    run_in_parallel = group(subtask(copy.deepcopy(dict(callback))).clone([arg, ]) for arg in it)\n\n    if len(run_in_parallel.tasks) == 0:\n        return []\n\n    if final:\n        return chord(run_in_parallel)(final)\n\n    return run_in_parallel.delay()\n</code></pre>\n\n<p>Note that this will only work for one nesting level (i.e. callback is a chain/group/chord) but will not work for deeply nested callbacks</p>\n\n<p>For deeply nested callback graphs we use this hack which is a bit slower but works flawlessly</p>\n\n<pre><code># Hack to completely clone a signature with possibly complex subtasks (chains, chords, etc...)\nrun_in_parallel = group(pickle.loads(pickle.dumps(callback)).clone([arg, ]) for arg in it)\n</code></pre>\n\n<p>And for the size of the groups you can always split the iterator to chunks </p>\n"}], "owner": {"reputation": 14513, "user_id": 64911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fdba1dde11dc7b4f62a912ad88379379?s=128&d=identicon&r=PG", "display_name": "mlissner", "link": "https://stackoverflow.com/users/64911/mlissner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1571, "favorite_count": 3, "answer_count": 2, "score": 7, "last_activity_date": 1559829233, "creation_date": 1490831120, "last_edit_date": 1495541848, "question_id": 43106099, "link": "https://stackoverflow.com/questions/43106099/chain-a-celery-tasks-results-into-a-distributed-group", "title": "Chain a celery task&#39;s results into a distributed group", "body": "<p>Like in <a href=\"https://stackoverflow.com/questions/13271056/how-to-chain-a-celery-task-that-returns-a-list-into-a-group\">this other question</a>, I want to create a celery group from a list that's returned by a celery task. The idea is that the first task will return a list, and the second task will explode that list into concurrent tasks for every item in the list.</p>\n\n<p>The plan is to use this while downloading content. The first task gets links from a website, and the second task is a chain that downloads the page, processes it, and then uploads it to s3. Finally, once all the subpages are done, the website is marked as done in our DB. Something like:</p>\n\n<pre><code>chain(\n    get_links_from_website.si('https://www.google.com'),\n    dmap.s(  # &lt;-- Distributed map\n        download_sub_page.s() | \n        process_sub_page.s() | \n        upload_sub_page_to_s3.s()\n    ),\n    mark_website_done.s()\n)\n</code></pre>\n\n<p>The solution I've seen so far seems to do an adequate job of this, but fails when the second task is a chain, due to issues with <code>clone</code> not doing a deepcopy (see <a href=\"https://stackoverflow.com/q/13271056/64911\">the comments on this answer</a> for details):</p>\n\n<pre><code>@task\ndef dmap(it, callback):\n    # Map a callback over an iterator and return as a group\n    callback = subtask(callback)\n    return group(callback.clone([arg,]) for arg in it)()\n</code></pre>\n\n<p>It also has the problem that if the iterable is 10,000 items long, it will create a group with 10,000 items. That is blowing up our memory usage, as you can imagine.</p>\n\n<p>So, what I'm looking for is a way to do <code>dmap</code> that:</p>\n\n<ul>\n<li>Doesn't blow up RAM by creating monstrous groups (maybe there's a way to chunk through the iterable?)</li>\n<li>Works on celery chains without issues with deepcopy.</li>\n</ul>\n"}, {"tags": ["python", "scipy", "linear-programming"], "answers": [{"tags": [], "owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "is_accepted": true, "score": 4, "last_activity_date": 1490834162, "last_edit_date": 1490834162, "creation_date": 1490833544, "answer_id": 43106433, "question_id": 43106053, "link": "https://stackoverflow.com/questions/43106053/why-does-scipy-optimize-linprog-return-a-solution-that-does-not-satisfy-constrai/43106433#43106433", "title": "Why does scipy.optimize.linprog return a solution that does not satisfy constraints?", "body": "<p><strong>Yes, it looks like a bug</strong>. I usually recommend people to use alternatives to scipy's linprog because:</p>\n\n<ul>\n<li>bad robustness</li>\n<li>bad performance (especially on big sparse problems)</li>\n<li>does not seem to be maintained anymore; not much progress despite open issues</li>\n</ul>\n\n<p>There is currently an <em>interior-point</em>-based <a href=\"https://github.com/scipy/scipy/pull/7123\" rel=\"nofollow noreferrer\">solver in development for scipy</a>, which solves this problem correctly. Of course you can also use the much better alternatives available (e.g. through <a href=\"http://www.cvxpy.org\" rel=\"nofollow noreferrer\">cvxpy</a>).</p>\n\n<p>Here is some code, which shows, that cvxpy's default solver (for these kind of problems; ECOS can solve a much broader class of problems!) <a href=\"https://github.com/embotech/ecos\" rel=\"nofollow noreferrer\">ECOS</a> and the not yet incorporated IPM-solver solve it, while linprog-simplex struggles. Keep in mind, that the code will not run on vanilla-scipy as <code>method='interior-point'</code> is missing:</p>\n\n<pre><code>import numpy as np\nfrom scipy.optimize import linprog\n\nc = np.array([-1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.])\nA_ub = np.array([[   1., -724.,  911., -551., -555., -896.,  478.,  -80., -293.],\n       [   1.,  566.,   42.,  937.,  233.,  883.,  392., -909.,   57.],\n       [   1., -208., -894.,  539.,  321.,  532., -924.,  942.,   55.],\n       [   1.,  857., -859.,   83.,  462., -265., -971.,  826.,  482.],\n       [   1.,  314., -424.,  245., -424.,  194., -443., -104., -429.],\n       [   1.,  540.,  679.,  361.,  149., -827.,  876.,  633.,  302.],\n       [   0.,   -1.,   -0.,   -0.,   -0.,   -0.,   -0.,   -0.,   -0.],\n       [   0.,   -0.,   -1.,   -0.,   -0.,   -0.,   -0.,   -0.,   -0.],\n       [   0.,   -0.,   -0.,   -1.,   -0.,   -0.,   -0.,   -0.,   -0.],\n       [   0.,   -0.,   -0.,   -0.,   -1.,   -0.,   -0.,   -0.,   -0.],\n       [   0.,   -0.,   -0.,   -0.,   -0.,   -1.,   -0.,   -0.,   -0.],\n       [   0.,   -0.,   -0.,   -0.,   -0.,   -0.,   -1.,   -0.,   -0.],\n       [   0.,   -0.,   -0.,   -0.,   -0.,   -0.,   -0.,   -1.,   -0.],\n       [   0.,   -0.,   -0.,   -0.,   -0.,   -0.,   -0.,   -0.,   -1.],\n       [   0.,    1.,    0.,    0.,    0.,    0.,    0.,    0.,    0.],\n       [   0.,    0.,    1.,    0.,    0.,    0.,    0.,    0.,    0.],\n       [   0.,    0.,    0.,    1.,    0.,    0.,    0.,    0.,    0.],\n       [   0.,    0.,    0.,    0.,    1.,    0.,    0.,    0.,    0.],\n       [   0.,    0.,    0.,    0.,    0.,    1.,    0.,    0.,    0.],\n       [   0.,    0.,    0.,    0.,    0.,    0.,    1.,    0.,    0.],\n       [   0.,    0.,    0.,    0.,    0.,    0.,    0.,    1.,    0.],\n       [   0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    1.]])\nb_ub = np.array([ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,\n                 0., 0.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.])\nA_eq = np.array([[ 0.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.]])\nb_eq = np.array([[ 1.]])\nbounds = [(None, None), (None, None), (None, None), (None, None), (None, None),\n         (None, None), (None, None), (None, None), (None, None)]\n\nsoln = linprog(c, A_ub, b_ub, A_eq, b_eq, bounds, method='simplex')\nprint('linprog: ', soln)\n\nsoln = linprog(c, A_ub, b_ub, A_eq, b_eq, bounds, method='interior-point')\nprint('linprog IPM: ', soln)\n\nfrom cvxpy import *\nx = Variable(A_eq.shape[1])\nconstraints = []\nconstraints.append(A_ub*x &lt;= b_ub)\nconstraints.append(A_eq*x == b_eq)\nobjective = Minimize(c*x)\nproblem = Problem(objective, constraints)\nproblem.solve(verbose=True)\nprint(np.round(x.value, 2))\nprint(problem.value)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>linprog:       fun: 39.866871820032244\n message: 'Optimization terminated successfully.'\n     nit: 19\n   slack: array([  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,\n         0.00000000e+00,   3.65161351e+02,   0.00000000e+00,\n         0.00000000e+00,   0.00000000e+00,   0.00000000e+00,\n         0.00000000e+00,   1.66922982e-01,   6.10104031e-01,\n         1.14953670e-01,   5.18298274e-01,   1.00000000e+00,\n         1.00000000e+00,   1.00000000e+00,   1.00000000e+00,\n         8.33077018e-01,   3.89895969e-01,   8.85046330e-01,\n         4.81701726e-01])\n  status: 0\n success: True\n       x: array([ -3.98125000e+01,  -2.81250000e-01,  -6.25000000e-01,\n         0.00000000e+00,  -3.12500000e-02,  -1.25000000e-01,\n         6.25000000e-01,   3.12500000e-01,   4.06250000e-01])\nlinprog IPM:       con: array([ -3.93646007e-08])\n     fun: 108.56853369114262\n message: 'Optimization terminated successfully.'\n     nit: 9\n   slack: array([  1.23442489e+02,  -1.13909794e-05,  -7.46066462e-07,\n         3.12539380e+02,   2.20799190e+02,  -1.41898576e-05,\n         2.48742446e-09,   3.71114180e-01,   1.07937459e-09,\n         1.33093066e-08,   3.70892271e-01,   2.03637625e-09,\n         2.57993546e-01,   2.36290348e-08,   9.99999998e-01,\n         6.28885820e-01,   9.99999999e-01,   9.99999987e-01,\n         6.29107729e-01,   9.99999998e-01,   7.42006454e-01,\n         9.99999976e-01])\n  status: 0\n success: True\n       x: array([ -1.08568534e+02,   2.48742446e-09,   3.71114180e-01,\n         1.07937459e-09,   1.33093066e-08,   3.70892271e-01,\n         2.03637625e-09,   2.57993546e-01,   2.36290348e-08])\n\nECOS 2.0.4 - (C) embotech GmbH, Zurich Switzerland, 2012-15. Web: www.embotech.com/ECOS\n\nIt     pcost       dcost      gap   pres   dres    k/t    mu     step   sigma     IR    |   BT\n 0  +2.934e+01  -6.533e+02  +2e+03  3e-01  5e-01  1e+00  8e+01    ---    ---    1  1  - |  -  - \n 1  +9.527e+01  -1.952e+02  +9e+02  1e-01  2e-01  8e+00  4e+01  0.6128  2e-01   1  1  1 |  0  0\n 2  +9.281e+01  -1.256e+01  +3e+02  4e-02  6e-02  5e+00  1e+01  0.6888  1e-01   1  1  1 |  0  0\n 3  +1.004e+02  +6.363e+01  +1e+02  2e-02  2e-02  2e+00  5e+00  0.7367  1e-01   1  1  1 |  0  0\n 4  +1.075e+02  +9.684e+01  +3e+01  5e-03  6e-03  9e-01  1e+00  0.8307  1e-01   1  1  1 |  0  0\n 5  +1.086e+02  +1.084e+02  +4e-01  6e-05  7e-05  1e-02  2e-02  0.9872  1e-04   1  1  1 |  0  0\n 6  +1.086e+02  +1.086e+02  +5e-03  7e-07  8e-07  1e-04  2e-04  0.9890  1e-04   1  1  1 |  0  0\n 7  +1.086e+02  +1.086e+02  +5e-05  8e-09  9e-09  1e-06  2e-06  0.9890  1e-04   1  0  0 |  0  0\n 8  +1.086e+02  +1.086e+02  +6e-07  8e-11  1e-10  2e-08  3e-08  0.9890  1e-04   1  0  0 |  0  0\n\nOPTIMAL (within feastol=9.6e-11, reltol=5.2e-09, abstol=5.6e-07).\nRuntime: 0.000424 seconds.\n\n[[-108.57]\n [  -0.  ]\n [   0.37]\n [  -0.  ]\n [   0.  ]\n [   0.37]\n [  -0.  ]\n [   0.26]\n [   0.  ]]\n108.56853545568384\n</code></pre>\n"}], "owner": {"reputation": 5991, "user_id": 232371, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb2a01bdde27923d196336fe006c8764?s=128&d=identicon&r=PG", "display_name": "Ben Usman", "link": "https://stackoverflow.com/users/232371/ben-usman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1130, "favorite_count": 0, "accepted_answer_id": 43106433, "answer_count": 1, "score": 2, "last_activity_date": 1490834162, "creation_date": 1490830857, "question_id": 43106053, "link": "https://stackoverflow.com/questions/43106053/why-does-scipy-optimize-linprog-return-a-solution-that-does-not-satisfy-constrai", "title": "Why does scipy.optimize.linprog return a solution that does not satisfy constraints?", "body": "<p>Am I doing something wrong or it is a bug?</p>\n\n<pre><code>c = np.array([-1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.])\nA_ub = np.array([[   1., -724.,  911., -551., -555., -896.,  478.,  -80., -293.],\n       [   1.,  566.,   42.,  937.,  233.,  883.,  392., -909.,   57.],\n       [   1., -208., -894.,  539.,  321.,  532., -924.,  942.,   55.],\n       [   1.,  857., -859.,   83.,  462., -265., -971.,  826.,  482.],\n       [   1.,  314., -424.,  245., -424.,  194., -443., -104., -429.],\n       [   1.,  540.,  679.,  361.,  149., -827.,  876.,  633.,  302.],\n       [   0.,   -1.,   -0.,   -0.,   -0.,   -0.,   -0.,   -0.,   -0.],\n       [   0.,   -0.,   -1.,   -0.,   -0.,   -0.,   -0.,   -0.,   -0.],\n       [   0.,   -0.,   -0.,   -1.,   -0.,   -0.,   -0.,   -0.,   -0.],\n       [   0.,   -0.,   -0.,   -0.,   -1.,   -0.,   -0.,   -0.,   -0.],\n       [   0.,   -0.,   -0.,   -0.,   -0.,   -1.,   -0.,   -0.,   -0.],\n       [   0.,   -0.,   -0.,   -0.,   -0.,   -0.,   -1.,   -0.,   -0.],\n       [   0.,   -0.,   -0.,   -0.,   -0.,   -0.,   -0.,   -1.,   -0.],\n       [   0.,   -0.,   -0.,   -0.,   -0.,   -0.,   -0.,   -0.,   -1.],\n       [   0.,    1.,    0.,    0.,    0.,    0.,    0.,    0.,    0.],\n       [   0.,    0.,    1.,    0.,    0.,    0.,    0.,    0.,    0.],\n       [   0.,    0.,    0.,    1.,    0.,    0.,    0.,    0.,    0.],\n       [   0.,    0.,    0.,    0.,    1.,    0.,    0.,    0.,    0.],\n       [   0.,    0.,    0.,    0.,    0.,    1.,    0.,    0.,    0.],\n       [   0.,    0.,    0.,    0.,    0.,    0.,    1.,    0.,    0.],\n       [   0.,    0.,    0.,    0.,    0.,    0.,    0.,    1.,    0.],\n       [   0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    1.]])\nb_ub = np.array([ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0., \n                 0., 0.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.])\nA_eq = np.array([[ 0.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.]])\nb_eq = np.array([[ 1.]])\nbounds = [(None, None), (None, None), (None, None), (None, None), (None, None), \n         (None, None), (None, None), (None, None), (None, None)]\n\nsoln = scipy.optimize.linprog(c, A_ub, b_ub, A_eq, b_eq, bounds)\nprint(soln)\nprint(A_ub.dot(soln['x']) &lt;= b_ub)\nprint(A_ub.dot(soln['x']) - b_ub)\nprint(abs(A_eq.dot(soln['x']) - b_eq))](url)\n</code></pre>\n\n<p>outputs</p>\n\n<pre><code>     fun: 39.866871820032244\n message: 'Optimization terminated successfully.'\n     nit: 19\n   slack: array([   0.   ,    0.   ,    0.   ,    0.   ,  365.161,    0.   ,\n          0.   ,    0.   ,    0.   ,    0.   ,    0.167,    0.61 ,\n          0.115,    0.518,    1.   ,    1.   ,    1.   ,    1.   ,\n          0.833,    0.39 ,    0.885,    0.482])\n  status: 0\n success: True\n       x: array([-39.812,  -0.281,  -0.625,   0.   ,  -0.031,  -0.125,   0.625,\n         0.312,   0.406])\n\n[ True  True False False  True False False False  True False False  True\n  True  True  True  True  True  True  True  True  True  True]\n[-121.5   -358.812  240.125  121.781 -357.781  350.656    0.281    0.625\n    0.       0.031    0.125   -0.625   -0.312   -0.406   -1.281   -1.625\n   -1.      -1.031   -1.125   -0.375   -0.688   -0.594]\n[[ 0.719]]\n</code></pre>\n\n<p>From middle part of <code>A_ub</code> that must be clear that solution must satisfy <code>soln['x'][1:] &gt; 0</code>, however, it is clearly not satisfied!</p>\n\n<p>Am I doing something wrong?</p>\n\n<p>Python 3.6\nscipy==0.18.1</p>\n"}, {"tags": ["python", "proxy", "zeromq", "pyzmq"], "answers": [{"comments": [{"owner": {"reputation": 1093, "user_id": 6753182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59071c1049a4727204a19bf7606ce676?s=128&d=identicon&r=PG", "display_name": "FirefoxMetzger", "link": "https://stackoverflow.com/users/6753182/firefoxmetzger"}, "edited": false, "score": 0, "creation_date": 1501066921, "post_id": 43162229, "comment_id": 77611581, "body": "Assuming Proxy behaves the same as a normal Device, it dies when it&#39;s context closes. Doing something like <code>myProxy.context_factory().term()</code> will eventually stop the proxy manually, though letting garbage collection do that for you works fine, too."}], "tags": [], "owner": {"reputation": 305, "user_id": 258995, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/92a7f4b59d06c2a5304b1a54839b77cc?s=128&d=identicon&r=PG", "display_name": "Schlameel", "link": "https://stackoverflow.com/users/258995/schlameel"}, "is_accepted": false, "score": 1, "last_activity_date": 1491082251, "creation_date": 1491082251, "answer_id": 43162229, "question_id": 43106030, "link": "https://stackoverflow.com/questions/43106030/in-pyzmq-how-do-you-stop-a-proxy/43162229#43162229", "title": "In pyzmq, how do you stop a Proxy?", "body": "<p>The answer is that the proxy closes itself.</p>\n\n<p>I think my problem was one of understanding.  The proxy is being started as a daemon (the default) and I did not know what that meant to Python.  When all non-daemon threads finish, the program ends.  What that means in this context is that the proxy stops when the rest of my program stops. I do not need to explicitly stop it.</p>\n\n<p>As I am building an Linux service, this is precisely the functionality I want.  In the main thread, I will kick off the proxy, do something (like monitor the proxy) or nothing, and when I want to the service to stop, the main thread will wrap up, close and the proxy will die on it's own.</p>\n"}], "owner": {"reputation": 305, "user_id": 258995, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/92a7f4b59d06c2a5304b1a54839b77cc?s=128&d=identicon&r=PG", "display_name": "Schlameel", "link": "https://stackoverflow.com/users/258995/schlameel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 788, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491082251, "creation_date": 1490830706, "question_id": 43106030, "link": "https://stackoverflow.com/questions/43106030/in-pyzmq-how-do-you-stop-a-proxy", "title": "In pyzmq, how do you stop a Proxy?", "body": "<p>I have a server behind a firewall and a publicly available web server requesting info from the server.  I am using pyzmq to manage the communication between the backend and the web front end.  This work without a proxy in place, when they are communicating locally.  It works when using the proxy.  I can start up a ThreadProxy, but how do I stop it?</p>\n\n<pre><code>import zmq\nfrom zmq.devices import ThreadProxy\n\nclass MyProxy:\n    def __init__(self)\n        p = ThreadProxy(zmq.ROUTER, zmq.DEALER) # Not using mon\n        p.setsockopt_in(zmq.IDENTITY, b'ROUTER')\n        p.setsockopt_out(zmq.IDENTITY, b'DEALER')\n        p.bind_in('tcp://*:5550')\n        p.connect_out('tcp://localhost:5550')\n        self._proxy = p\n    def start(self)\n        self._proxy.start()\n    def stop(self)\n        ???\n</code></pre>\n\n<p>How do I actually ask that proxy to stop? .join just waits, because the proxy is blocked or has no reason to stop.  I don't have a context to .term().</p>\n\n<p>I would like to run this inside a linux daemon, so \"kill\" is not the most elegant solution, nor does it give me the control over the proxy I am looking for.</p>\n"}, {"tags": ["python", "pandas", "for-loop", "indexing", "slice"], "comments": [{"owner": {"reputation": 5288, "user_id": 6277525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cdd8aedc14bc95b56efed36de1dd034?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew L", "link": "https://stackoverflow.com/users/6277525/andrew-l"}, "edited": false, "score": 1, "creation_date": 1490830285, "post_id": 43105949, "comment_id": 73293134, "body": "Can you post expected output?"}, {"owner": {"reputation": 5288, "user_id": 6277525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cdd8aedc14bc95b56efed36de1dd034?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew L", "link": "https://stackoverflow.com/users/6277525/andrew-l"}, "edited": false, "score": 0, "creation_date": 1490830766, "post_id": 43105949, "comment_id": 73293278, "body": "Also, will this be grouped by State?"}, {"owner": {"reputation": 29, "user_id": 2898858, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8691353672403be57daf7f82ad59f61a?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Serpente", "link": "https://stackoverflow.com/users/2898858/sam-serpente"}, "reply_to_user": {"reputation": 5288, "user_id": 6277525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cdd8aedc14bc95b56efed36de1dd034?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew L", "link": "https://stackoverflow.com/users/6277525/andrew-l"}, "edited": false, "score": 0, "creation_date": 1490832476, "post_id": 43105949, "comment_id": 73293784, "body": "I just added expected output, and edited the original dataframe a bit for purposes of helping explain expected output. It will be grouped by state, which actually leads to a follow-up question: I&#39;ll need to skip the first six rows for each state in the STATE column. I&#39;m going to make an attempt at doing this myself for my own learning."}], "answers": [{"comments": [{"owner": {"reputation": 5288, "user_id": 6277525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cdd8aedc14bc95b56efed36de1dd034?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew L", "link": "https://stackoverflow.com/users/6277525/andrew-l"}, "edited": false, "score": 1, "creation_date": 1490832562, "post_id": 43105994, "comment_id": 73293811, "body": "Rolling sum is deprecated. You should use QReport.rolling(7).sum()"}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": true, "score": 0, "last_activity_date": 1490832740, "last_edit_date": 1490832740, "creation_date": 1490830486, "answer_id": 43105994, "question_id": 43105949, "link": "https://stackoverflow.com/questions/43105949/python-pandas-for-loop-to-sum-moving-range-and-append-to-new-column/43105994#43105994", "title": "Python/Pandas: For loop to sum moving range and append to new column", "body": "<p>You should use rolling sum:</p>\n\n<pre><code>QReport['7DTotal'] = pd.rolling_sum(QReport.SALES, 7).fillna(0)\n</code></pre>\n\n<p>or</p>\n\n<pre><code># Suggested by a commenter\nQReport['7DTotal'] = QReport.rolling(7).sum().fillna(0)\n</code></pre>\n\n<p>(The first six elements of the column will be undefined, and <code>fillna</code> fills them with 0s.)</p>\n"}, {"tags": [], "owner": {"reputation": 1922, "user_id": 7236077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q4aDc.png?s=128&g=1", "display_name": "epattaro", "link": "https://stackoverflow.com/users/7236077/epattaro"}, "is_accepted": false, "score": 0, "last_activity_date": 1490830602, "creation_date": 1490830602, "answer_id": 43106013, "question_id": 43105949, "link": "https://stackoverflow.com/questions/43105949/python-pandas-for-loop-to-sum-moving-range-and-append-to-new-column/43106013#43106013", "title": "Python/Pandas: For loop to sum moving range and append to new column", "body": "<p>an easy solution would be</p>\n\n<pre><code>7_day_list = []\n\nfor index in QReport.\n\n    avg = np.mean(QReport.loc[index:index+7, 'SALES'])\n\n    7_day_list.append(avg)\n</code></pre>\n\n<p>hope that helps</p>\n"}], "owner": {"reputation": 29, "user_id": 2898858, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8691353672403be57daf7f82ad59f61a?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Serpente", "link": "https://stackoverflow.com/users/2898858/sam-serpente"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1121, "favorite_count": 0, "accepted_answer_id": 43105994, "answer_count": 2, "score": 0, "last_activity_date": 1490832740, "creation_date": 1490830210, "last_edit_date": 1490832394, "question_id": 43105949, "link": "https://stackoverflow.com/questions/43105949/python-pandas-for-loop-to-sum-moving-range-and-append-to-new-column", "title": "Python/Pandas: For loop to sum moving range and append to new column", "body": "<p>I am fairly new to Python and Pandas so please forgive the uninformed question I'm posing here.</p>\n\n<p>I have a dataframe (QReport) that looks like so:</p>\n\n<pre><code>DATE            STATE       SALES\n2010-12-01       AL          10\n2010-12-02       AL          13\n2010-12-03       AL          16\n2010-12-04       AL          10\n2010-12-05       AL          10\n2010-12-06       AL          2\n2010-12-07       AL          5 \n2010-12-08       AL          5\n</code></pre>\n\n<p>I'd like to create a seven day sales total column that sums seven day slices of sales and adds that total to a new '7DTotal' column. I've been trying to get at this through a for loop, setting x and y variables as 0 (zero) and 6 indexes which I try to increment each run through the loop:</p>\n\n<pre><code>x = 0\ny = 6\nfor i in QReport:\n    QReport['7DTotal'] = sum(QReport['SALES'][x:y])\n    x = x + 1\n    y = y + 1\n</code></pre>\n\n<p>This approach, however, is not working and is returning the same value for every row in the newly-added 7DTotal column. </p>\n\n<p>Expected output would be:</p>\n\n<pre><code>DATE            STATE       SALES   7DTotal\n2010-12-01       AL          10        0\n2010-12-02       AL          13        0\n2010-12-03       AL          16        0\n2010-12-04       AL          10        0\n2010-12-05       AL          10        0\n2010-12-06       AL          2         0\n2010-12-07       AL          5         66\n2010-12-08       AL          5         61\n</code></pre>\n\n<p>Thanks in advance for any help!</p>\n"}, {"tags": ["python", "intellij-idea", "intellij-17"], "comments": [{"owner": {"reputation": 348241, "user_id": 104891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff652685122f4500dd4f3c21fb32da2?s=128&d=identicon&r=PG", "display_name": "CrazyCoder", "link": "https://stackoverflow.com/users/104891/crazycoder"}, "edited": false, "score": 0, "creation_date": 1490866503, "post_id": 43105920, "comment_id": 73307462, "body": "Please <a href=\"https://intellij-support.jetbrains.com/hc/requests/new\" rel=\"nofollow noreferrer\">submit a ticket to support</a>."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9434670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5580aa793ad117694538cc1c2b94eb8e?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitrios", "link": "https://stackoverflow.com/users/9434670/dimitrios"}, "is_accepted": false, "score": 1, "last_activity_date": 1520003545, "creation_date": 1520003545, "answer_id": 49071952, "question_id": 43105920, "link": "https://stackoverflow.com/questions/43105920/intellij-python-unittests-cannot-import-modules/49071952#49071952", "title": "IntelliJ Python unittests cannot import modules", "body": "<p>Had the same issue and resolved it by no marking the test folder as excluded but just moving it out of the source.</p>\n\n<p>So if the structure is:</p>\n\n<pre><code>src\n---&gt;package\n---&gt;resources\ntest\n</code></pre>\n\n<p>mark in IntelliJ src folder as Sources and src/resources as Resources.  </p>\n\n<p>You tests will run from within IDEA.</p>\n\n<p>As I am new to python, I am not sure whether this will affect the packaging.  Doing a build though doesn't export the test folder.</p>\n\n<p>Hope that helps.</p>\n"}, {"tags": [], "owner": {"reputation": 597, "user_id": 4829317, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/367552656772840/picture?type=large", "display_name": "Pingjiang Li", "link": "https://stackoverflow.com/users/4829317/pingjiang-li"}, "is_accepted": false, "score": 0, "last_activity_date": 1533182259, "creation_date": 1533182259, "answer_id": 51645266, "question_id": 43105920, "link": "https://stackoverflow.com/questions/43105920/intellij-python-unittests-cannot-import-modules/51645266#51645266", "title": "IntelliJ Python unittests cannot import modules", "body": "<p>I have similar problems: cannot import manually installed module.\nI try to add classpath in Mac environment parameters and intellij SDKs, but it doesn't work.\nMy final solution is to add the classpath of the module to Run/Debug Configurations:</p>\n\n<p>Open Run/Debug Configurations and select your unittest class:</p>\n\n<blockquote>\n  <p>Run --> Edit Configurations...</p>\n</blockquote>\n\n<p>Add your module's classpath to Environment variables:\n<a href=\"https://i.stack.imgur.com/rXaf8.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rXaf8.jpg\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 16775, "user_id": 442945, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TovHM.png?s=128&g=1", "display_name": "Nathaniel Ford", "link": "https://stackoverflow.com/users/442945/nathaniel-ford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1002, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1533182259, "creation_date": 1490830045, "last_edit_date": 1490831568, "question_id": 43105920, "link": "https://stackoverflow.com/questions/43105920/intellij-python-unittests-cannot-import-modules", "title": "IntelliJ Python unittests cannot import modules", "body": "<p>I'm trying to configure my IntelliJ Ultimate 2017 IDE to run Python unit tests. It's not working.</p>\n\n<ul>\n<li>The project is a Gradle project, and most modules are Java/Scala. There are several Python modules though.</li>\n<li>The Python plugin is installed and the Python facet added to the appropriate modules.</li>\n<li>The Python Interpreter is set up fine. The IDE can actually move around in the code with a ctrl-click action.</li>\n<li>Under 'Project Structure' -> '<code>&lt;mymodule&gt;</code>' -> dependencies both the interpreter and the <code>&lt;Module source&gt;</code> are included. </li>\n<li>Each Python module has a 'content root'. Immediately under this is a <code>src</code> folder, under which there is a <code>test</code> folder. The contents of the test folder mirror the <code>src</code> folder, except that files are prepended with <code>test_</code> to avoid Python name collisions.</li>\n<li>The test configuration has both 'Add source/content roots to PYTHONPATH' options checked. The interpreter is specified.</li>\n<li>If <code>test</code> is marked as a tests folder within the module settings, I can right click and 'run tests' for the tests in that folder. However, <code>ImportError</code>s occur, because it can't find modules within the <code>src</code> directory.</li>\n<li>There are <code>__init__.py</code> files in all the appropriate places.</li>\n<li><p>IntelliJ gives you what it is running, and if I run that on the command, it works, something like:</p>\n\n<pre><code>python -m unittest discover -s /Users/nathanielford/myrepo/mymodule/src/tests -p test_util.py\n</code></pre></li>\n</ul>\n\n<p>It appears as though the root path that is being used is set to wherever the unittest file I'm running is: it doesn't use <code>src</code> as the path, and so it cannot find things to import. There is no obvious place to specify this behavior. It didn't seem to work like this in the past.</p>\n\n<p>This started happening recently, after an IntelliJ update. It's possible some configuration became screwy and needs to be fixed, but I don't know what that is. It's also possible that some bug was introduced into IntelliJ, but I don't know how to identify that, either. What am I missing?</p>\n"}, {"tags": ["python", "notifications", "mute"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 1, "creation_date": 1490829356, "post_id": 43105830, "comment_id": 73292837, "body": "And what is your question? Is your code working? Not working? Producing an error? Doing some other unwanted behavior? Doing nothing?"}, {"owner": {"reputation": 1, "user_id": 7788692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbe03087ba0846886a0fbce6625c4e4?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/7788692/mark"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1490920434, "post_id": 43105830, "comment_id": 73339344, "body": "It is working, I am just wondering how I mute notifications."}], "owner": {"reputation": 1, "user_id": 7788692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbe03087ba0846886a0fbce6625c4e4?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/7788692/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490829286, "creation_date": 1490829286, "question_id": 43105830, "link": "https://stackoverflow.com/questions/43105830/mute-win10-notifications-python", "title": "Mute Win10 Notifications Python", "body": "<p>I have been working on a script to mute notifications while on specific windows. I am looking for a way to mute or block notifications then unmute them when it is left. How can I do this. This is my current code: </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>import win32gui\r\nimport time\r\nw=win32gui\r\nwhile (true):\r\n    open_window = w.GetWindowText (w.GetForegroundWindow())\r\n    if (open_window == Minecraft 1.10.2):\r\n        \r\n    </code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "amazon-web-services", "amazon-s3", "lambda", "amazon-elastic-transcoder"], "comments": [{"owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 1, "creation_date": 1490831182, "post_id": 43105822, "comment_id": 73293402, "body": "Presumably the transcoded output file is written to S3. Can you have a second Lambda function triggered when the transcoded file is put, and have that function delete the source object based on the transcoded object&#39;s name?"}, {"owner": {"reputation": 3266, "user_id": 2247506, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/QE5px.jpg?s=128&g=1", "display_name": "Evonet", "link": "https://stackoverflow.com/users/2247506/evonet"}, "reply_to_user": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 0, "creation_date": 1490851736, "post_id": 43105822, "comment_id": 73298778, "body": "Yeah I think I&#39;ll need to do that. I believe Elastic Transcode can set up an SNS alert"}], "answers": [{"comments": [{"owner": {"reputation": 3266, "user_id": 2247506, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/QE5px.jpg?s=128&g=1", "display_name": "Evonet", "link": "https://stackoverflow.com/users/2247506/evonet"}, "edited": false, "score": 0, "creation_date": 1490852073, "post_id": 43106106, "comment_id": 73298916, "body": "Thanks, end up going with the job_complete waiter, easier than launching a second lambda function (which I would need to use the job_complete waiter for anyway)"}], "tags": [], "owner": {"reputation": 7483, "user_id": 902751, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f818a4a4d5e72627a81443a0cd1fc2da?s=128&d=identicon&r=PG", "display_name": "spg", "link": "https://stackoverflow.com/users/902751/spg"}, "is_accepted": true, "score": 2, "last_activity_date": 1490831178, "creation_date": 1490831178, "answer_id": 43106106, "question_id": 43105822, "link": "https://stackoverflow.com/questions/43105822/deleting-a-file-after-transcoding-with-aws-lambda-and-elastic-transcoder/43106106#43106106", "title": "Deleting a file after transcoding with AWS Lambda and Elastic Transcoder", "body": "<p>You basically have to poll Elastic Transcoder for the job's status (every 30 seconds, for example), and wait until the job is completed. Once the job is completed, you can delete your S3 source file.</p>\n\n<p>Using boto3, you can retrieve a job's status like this:</p>\n\n<pre><code>transcoder = boto3.client('elastictranscoder')\njob = transcoder.read_job(Id=job_id)\nstatus = job['Job']['Status']\n</code></pre>\n\n<p>Or alternatively, you can use the <a href=\"http://boto3.readthedocs.io/en/latest/reference/services/elastictranscoder.html#waiters\" rel=\"nofollow noreferrer\"><code>job_complete</code> waiter.</a></p>\n"}], "owner": {"reputation": 3266, "user_id": 2247506, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/QE5px.jpg?s=128&g=1", "display_name": "Evonet", "link": "https://stackoverflow.com/users/2247506/evonet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1057, "favorite_count": 0, "accepted_answer_id": 43106106, "answer_count": 1, "score": 0, "last_activity_date": 1499428110, "creation_date": 1490829257, "last_edit_date": 1499428110, "question_id": 43105822, "link": "https://stackoverflow.com/questions/43105822/deleting-a-file-after-transcoding-with-aws-lambda-and-elastic-transcoder", "title": "Deleting a file after transcoding with AWS Lambda and Elastic Transcoder", "body": "<p>I'm using a Lambda python script to call Elastic Transcoder on a file that I upload.  How do I delete the file after transcoding?</p>\n\n<p>At the moment, my code creates the job, and then deletes the source file straight away, i.e., before the job even has a chance to run. :-)</p>\n\n<p>How can I wait for Elastic Transcode to finish?</p>\n\n<pre><code>import os\nimport boto3\nimport urllib\n\ndef lambda_handler(event, context):\n  transcoder = boto3.client('elastictranscoder', 'ap-southeast-2')\n  pipeline_id = get_pipeline(transcoder, 'MP4 Transcode')\n  base_filename = os.path.basename(event['Records'][0]['s3']['object']['key'])\n  output = transcoder.create_job(\n      PipelineId=pipeline_id,\n      Input={\n      'Key': create_aws_filename('uploads', base_filename, ''),\n      'FrameRate': 'auto',\n      'Resolution': 'auto',\n      'AspectRatio': 'auto',\n      'Interlaced': 'auto',\n      'Container' : 'auto'\n  })\nbucket = event['Records'][0]['s3']['bucket']['name']\nkey = urllib.unquote_plus(event['Records'][0]['s3']['object']['key'])\nprint(\"deleting \" + key)  \nboto3.client('s3').delete_object(Bucket=bucket, Key=key)\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 990, "user_id": 4217085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e707345996a53035a3f745308f38b454?s=128&d=identicon&r=PG&f=1", "display_name": "sgrg", "link": "https://stackoverflow.com/users/4217085/sgrg"}, "edited": false, "score": 0, "creation_date": 1490830591, "post_id": 43105783, "comment_id": 73293223, "body": "Are the dimensions of E and E_new the same (in your original code)?"}, {"owner": {"reputation": 178, "user_id": 4135363, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3243ae7ad7d2e0c43212210530d5e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "Javier", "link": "https://stackoverflow.com/users/4135363/javier"}, "reply_to_user": {"reputation": 990, "user_id": 4217085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e707345996a53035a3f745308f38b454?s=128&d=identicon&r=PG&f=1", "display_name": "sgrg", "link": "https://stackoverflow.com/users/4217085/sgrg"}, "edited": false, "score": 0, "creation_date": 1490830819, "post_id": 43105783, "comment_id": 73293296, "body": "They should be. I have defined <code>E = np.zeros((N+1, M+1))</code>, and <code>BS, u = np.zeros((N+1, M+1))</code>. And since I have taken <code>E_new = np.absolute(BS[j,m] - u[j,m])</code>, I believe this means <code>E_new</code> is also <code>(N+1,M+1)</code>, since it is just the absolute value of the difference of the arrays <code>BS</code> and <code>u</code>."}, {"owner": {"reputation": 178, "user_id": 4135363, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3243ae7ad7d2e0c43212210530d5e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "Javier", "link": "https://stackoverflow.com/users/4135363/javier"}, "reply_to_user": {"reputation": 990, "user_id": 4217085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e707345996a53035a3f745308f38b454?s=128&d=identicon&r=PG&f=1", "display_name": "sgrg", "link": "https://stackoverflow.com/users/4217085/sgrg"}, "edited": false, "score": 0, "creation_date": 1490833579, "post_id": 43105783, "comment_id": 73294061, "body": "Would it help to post my full code?"}, {"owner": {"reputation": 990, "user_id": 4217085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e707345996a53035a3f745308f38b454?s=128&d=identicon&r=PG&f=1", "display_name": "sgrg", "link": "https://stackoverflow.com/users/4217085/sgrg"}, "edited": false, "score": 0, "creation_date": 1490843560, "post_id": 43105783, "comment_id": 73296481, "body": "I think @Paul Panzer&#39;s answer does the trick here (assuming <code>BS</code> and <code>u</code> are the same shape because you can then perform mathematical operations on them just as if they were numbers)."}], "answers": [{"tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": false, "score": 2, "last_activity_date": 1490842289, "creation_date": 1490842289, "answer_id": 43107649, "question_id": 43105783, "link": "https://stackoverflow.com/questions/43105783/trying-to-compute-the-error-from-comparing-two-arrays/43107649#43107649", "title": "Trying to compute the error from comparing two arrays", "body": "<p>Maybe it would help to go through your program line-by-line:</p>\n\n<pre><code># Compute the Error\nE = np.zeros((N+1, M+1)) # so that E has NxM entries--one for each time-step and node in space\n# to get NxM use np.zeros((N, M))\n\nfor m in range(1, M+1):\n    for j in range(0, N+1):\n    # any reason you start the outer loop at 1 and the inner loop at 0?\n\n        E_new = np.absolute(BS[j,m] - u[j,m])\n        # if BS is MxN (or (M+1)x(N+1)) BS[j, m] selects the entry at the\n        # j-th row and m-th column which is a scalar. Similar for u, so in\n        # the end E_new will contain a scalar\n\n        if (np.any(E_new &gt;= E)): \n        # at the first iteration this will compare the scalar E_new to the\n        # array E resulting in an array of same shape of truth values\n        # at all later iterations E will also be a scalar\n        # the array allocated for E in the beginning will be garbage\n        # collected\n\n            E = E_new\n        else:\n            E = E\n\n# why the error is so large in the end I can't tell you\nprint 'Error = ', E\n</code></pre>\n\n<p>And a suggestions, if I may:</p>\n\n<p>If you want the maximum element-wise absolute difference as an error measure you can have that in one line which as a bonus executes much faster because it is vectorised. Assuming <code>BS</code> and <code>u</code> have the same shape:</p>\n\n<pre><code>E = np.abs(BS-u).max()\n</code></pre>\n"}], "owner": {"reputation": 178, "user_id": 4135363, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3243ae7ad7d2e0c43212210530d5e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "Javier", "link": "https://stackoverflow.com/users/4135363/javier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1490842289, "creation_date": 1490829070, "last_edit_date": 1490830230, "question_id": 43105783, "link": "https://stackoverflow.com/questions/43105783/trying-to-compute-the-error-from-comparing-two-arrays", "title": "Trying to compute the error from comparing two arrays", "body": "<p><strong>Some context:</strong> I have an explicit formula which is the exact solution to my problem. I have written code which implements a finite-difference scheme (explicit Forward-Euler, i.e: forward march-in-time iterative scheme) to approximate the solution to a partial differential equation (PDE). I have discretized the problem. </p>\n\n<p>I want to compare these two and verify that the error between the exact solution and my approximation to the solution is indeed small. I have stored the values of the exact solution and the approximation in two <code>(NxM)</code> arrays, for each time-step and node in space.</p>\n\n<p>Here is <strong>the code I have written</strong> to calculate the error:</p>\n\n<pre><code># Compute the Error\nE = np.zeros((N+1, M+1)) # so that E has NxM entries--one for each time-step and node in space\nfor m in range(1, M+1):\n    for j in range(0, N+1):\n        E_new = np.absolute(BS[j,m] - u[j,m])\n        if (np.any(E_new &gt;= E)): \n            E = E_new\n        else:\n            E = E\n\nprint 'Error = ', E\n</code></pre>\n\n<p>Here, I am taking <code>N = 100, M = 10,000</code>. If necessary, I can post the segments of my code where I calculate the arrays <code>BS</code> and <code>u</code>. Both are defined as arrays of the same size, and when I plot them, I am receiving an output which agrees with what the solution looks like. So I believe I am on the right track and that the rest of my code is working as it is supposed to. </p>\n\n<p>However, when I run this particular segment in an attempt to calculate the error, I get that the error is roughly 29. I know this is wrong, the error should be small.</p>\n\n<p><strong>My attempt to fix the problem:</strong></p>\n\n<p>I think the problem possibly lies in the line containing <code>if (np.any(E_new &gt;= E)):</code>. I want to check if any entry of the array <code>E_new</code> is greater than or equal to <code>E</code>. If I just run it with <code>if (E_new &gt;= E):</code>, I get this ValueError: \"The truth value of an array with more than one element is ambiguous. Use a.any() or a.all().\"</p>\n\n<p>I also tried running this: <code>if (np.any([E_new, E])):</code>, but again no luck. I received this error message, \"ValueError: setting an array element with a sequence\". I have also tried using <code>np.all</code> in place of <code>np.any</code> in each of my attempts and this also does not seem to fix the issue.</p>\n\n<p>Here is some <strong>pseudocode</strong> for what I wish to do:</p>\n\n<pre><code>E = 0\nfor i = 1,...,N:\n    E_new = | BS(x_i) - u_i |\n    if E_new &gt;= E\n        E = E_new\n    else:\n        E = E\n    end\n</code></pre>\n\n<p>Any and all help is very greatly appreciated. Thank you in advance! I am really stuck here and I do not know how to move forward. I don't need a direct answer necessarily, but some insight as to what is causing the problem and a push in the right direction would be immensely helpful. Thanks again!!</p>\n"}, {"tags": ["python", "arrays", "indexing", "boolean"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 7788577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9b4f9ce915d1abc7a6f8d7f8df9d7bf?s=128&d=identicon&r=PG&f=1", "display_name": "USC1998", "link": "https://stackoverflow.com/users/7788577/usc1998"}, "edited": false, "score": 0, "creation_date": 1490834346, "post_id": 43105893, "comment_id": 73294240, "body": "I used the list comprehension method in my code, like you suggested, and it worked as stated.  I will study the syntax of that code more to fully understand and appreciate its logic."}], "tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": true, "score": 0, "last_activity_date": 1490829814, "creation_date": 1490829814, "answer_id": 43105893, "question_id": 43105774, "link": "https://stackoverflow.com/questions/43105774/get-indices-from-boolean-array-into-lists/43105893#43105893", "title": "Get indices from Boolean array into lists", "body": "<p>The easiest way would be to use lists and a list comprehension inside another list comprehension:</p>\n\n<pre><code>&gt;&gt;&gt; arr = np.random.randint(0, 2, (10, 10)).astype(bool)\n&gt;&gt;&gt; [[idx for idx, item in enumerate(subarr) if item] for subarr in arr.tolist()]\n[[0, 5, 7, 8],\n [2, 3, 4, 5, 6, 8, 9],\n [0, 3, 4, 9],\n [1, 3, 4, 5, 6, 9],\n [0, 1, 2, 4, 5, 7],\n [0, 7, 9],\n [0, 5, 8, 9],\n [1, 5, 7],\n [3, 6],\n [0, 1, 2, 4, 5, 6, 7, 9]]\n</code></pre>\n\n<p>For small arrays using python iterations can even be faster than numpy functions like <code>np.where</code> so when you're dealing with 10x10 arrays the list comprehensions can be comparable in performance. But of course you can also use <code>np.where</code> in a list-comprehension:</p>\n\n<pre><code>&gt;&gt;&gt; [np.where(subarr)[0] for subarr in arr]\n[array([0, 5, 7, 8], dtype=int64),\n array([2, 3, 4, 5, 6, 8, 9], dtype=int64),\n array([0, 3, 4, 9], dtype=int64),\n array([1, 3, 4, 5, 6, 9], dtype=int64),\n array([0, 1, 2, 4, 5, 7], dtype=int64),\n array([0, 7, 9], dtype=int64),\n array([0, 5, 8, 9], dtype=int64),\n array([1, 5, 7], dtype=int64),\n array([3, 6], dtype=int64),\n array([0, 1, 2, 4, 5, 6, 7, 9], dtype=int64)]\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 7788577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9b4f9ce915d1abc7a6f8d7f8df9d7bf?s=128&d=identicon&r=PG&f=1", "display_name": "USC1998", "link": "https://stackoverflow.com/users/7788577/usc1998"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 43105893, "answer_count": 1, "score": 1, "last_activity_date": 1490829814, "creation_date": 1490829023, "question_id": 43105774, "link": "https://stackoverflow.com/questions/43105774/get-indices-from-boolean-array-into-lists", "title": "Get indices from Boolean array into lists", "body": "<p>I have an array called TorF -True or False-, which is a Boolean array.  Say it is a 10 x 10 array with various Trues and Falses.  How do I get the indices of all the True elements?</p>\n\n<p>On a 1D array, I see that np.where() works great.  And on my 10x10 array, I can use np.where(TorF[0]) and return the indices perfectly for the first row.  I can manually do np.where(TorF[1]) for the second row.  </p>\n\n<p>I would like to do it for all 10 rows or in a bigger array up to \"N\" rows.  The problem is that the number of True elements is different for each row. So the list of True elements indices might look like:</p>\n\n<pre><code>[0, 7, 9]  #the first, eighth, and tenth elements were True\n[1, 4, 5, 8, 9]  #2nd, 5th, 6th, 9th, and 10th elements were True\n[2, 6]\n[0, 5, 7]\netc. up to ten lists or \"N\" lists\n</code></pre>\n\n<p>Since the list of indices are different lengths, I have problems.  How do I make a loop to get the list of True indices?  Or is there a better function to return this list?  Ideally I would like to have a variable called TrueList that holds these 10 subsets.</p>\n"}, {"tags": ["python", "python-3.x", "python-requests"], "comments": [{"owner": {"reputation": 23589, "user_id": 6622817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93f66cc4703b66b835cf13dfeee21e7b?s=128&d=identicon&r=PG&f=1", "display_name": "abccd", "link": "https://stackoverflow.com/users/6622817/abccd"}, "edited": false, "score": 1, "creation_date": 1490828781, "post_id": 43105714, "comment_id": 73292671, "body": "Paste your code please, screenshots isn&#39;t recommended here."}, {"owner": {"reputation": 1576, "user_id": 5453515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c41cae4ee9e62e14df6757fc7a364cb2?s=128&d=identicon&r=PG&f=1", "display_name": "Stephane Martin", "link": "https://stackoverflow.com/users/5453515/stephane-martin"}, "edited": false, "score": 1, "creation_date": 1490833206, "post_id": 43105714, "comment_id": 73293981, "body": "I don&#39;t think it is allow to have some antislash in cookies (<a href=\"https://www.ietf.org/rfc/rfc6265.txt\" rel=\"nofollow noreferrer\">ietf.org/rfc/rfc6265.txt</a>). maybe the requests library is trying to help by escaping things... instead of manually retrieving the cookies from the first request, you could try to use requests&#39; Session object: <a href=\"http://docs.python-requests.org/en/master/user/advanced/\" rel=\"nofollow noreferrer\">docs.python-requests.org/en/master/user/advanced</a>. The Session object will automatically store the cookies and pass them to subsequent calls."}, {"owner": {"reputation": 11, "user_id": 7788533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be695321c47ac883788375230e60cd1e?s=128&d=identicon&r=PG&f=1", "display_name": "gamecraft CZ", "link": "https://stackoverflow.com/users/7788533/gamecraft-cz"}, "edited": false, "score": 0, "creation_date": 1491248539, "post_id": 43105714, "comment_id": 73458907, "body": "Thanks. Finaly it&#39;s working!"}, {"owner": {"reputation": 6568, "user_id": 5276734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UxwnY.png?s=128&g=1", "display_name": "bastelflp", "link": "https://stackoverflow.com/users/5276734/bastelflp"}, "edited": false, "score": 0, "creation_date": 1510486662, "post_id": 43105714, "comment_id": 81446734, "body": "@gamecraftCZ Would you edit this to your question or add as an (accepted) answers, so that others can find this? Currently it is buried in the comments."}], "owner": {"reputation": 11, "user_id": 7788533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be695321c47ac883788375230e60cd1e?s=128&d=identicon&r=PG&f=1", "display_name": "gamecraft CZ", "link": "https://stackoverflow.com/users/7788533/gamecraft-cz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 367, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1510486601, "creation_date": 1490828703, "last_edit_date": 1510486601, "question_id": 43105714, "link": "https://stackoverflow.com/questions/43105714/requests-send-double-backslash-instead-of-single", "title": "Requests send double backslash instead of single", "body": "<p>I requested a site using <code>requests.get()</code>. Cookies is now in <code>r.cookies</code>.\nThan I sent my request to server, but the server throw me 400 error. </p>\n\n<p>When I looked closer in debug log, I saw, that it sent the cookies (<code>=r.cookies</code>) with double backslashes. But when I print it using <code>print(r.cookies)</code> or <code>print(r.cookies[cookieName])</code>, it prints with only single backslash.<br>\nI know that I need single backslash, because Google Chrome debug tool says, that the page sends it.</p>\n\n<p>Google Chrome sends single backslash.</p>\n\n<p><img src=\"https://i.stack.imgur.com/tiu18.png\" alt=\"\"></p>\n\n<p>Source code:</p>\n\n<pre><code>import requests\nimport time\nimport json\nimport math\nimport random\n\nimport logging\ntry:\n    import http.client as http_client\nexcept ImportError:\n    # Python 2\n    import httplib as http_client\nhttp_client.HTTPConnection.debuglevel = 1\n\nlogging.basicConfig()\nlogging.getLogger().setLevel(logging.DEBUG)\nrequests_log = logging.getLogger(\"requests.packages.urllib3\")\nrequests_log.setLevel(logging.DEBUG)\nrequests_log.propagate = True\n\ndef _base36encode(integer):\n    chars, encoded = '0123456789abcdefghijklmnopqrstuvwxyz', ''\n    while integer &gt; 0:\n        integer, remainder = divmod(integer, 36)\n        encoded = chars[remainder] + encoded\n    return encoded\n\ndef _register(firstName, lastName, email, password, captchaApiKey):\n    startTime = int(1e3 * time.time())\n\n    url = 'https://www.quora.com'\n    httpsProxy = 'https://207.99.118.74:8080'\n    proxy = {\"https\" : httpsProxy}\n    headers = {'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8', 'Accept-Language':'cs-CZ,cs;q=0.8,en;q=0.6','Cache-Control':'max-age=0','Connection':'keep-alive','Host':'www.quora.com','Upgrade-Insecure-Requests':'1','User-Agent':'Mozilla/5.0 (Windows NT 10.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36'}\n    r = requests.get(url, headers=headers, proxies=proxy)\n    quoraHtml = r.text\n    data = {}\n    data['proxy'] = proxy\n    data['cookies'] = r.cookies\n    print (data['cookies'])\n    ######################\n    ## get certification tokens ##\n    #####################\n    pos1 = quoraHtml.find('\"formkey\": \"')\n    pos2 = quoraHtml.find('\"', pos1+13)\n    data['formKey'] = quoraHtml[pos1+12:pos2] #form key for certification\n    pos1 = quoraHtml.find('\"postkey\": \"', pos2)\n    pos2 = quoraHtml.find('\"', pos1+13)\n    data['postKey'] = quoraHtml[pos1+12:pos2] #form key for certification\n\n    pos1 = quoraHtml.find('\"serverCallUrl\": \"/')\n    pos2 = quoraHtml.find('\"', pos1+19)\n    data['sendUrl'] = 'https://www.quora.com' + quoraHtml[pos1+18:pos2] #url to send data\n\n    pos1 = quoraHtml.find('\"windowId\": \"', pos2)\n    pos2 = quoraHtml.find('\"', pos1+14)\n    data['windowId'] = quoraHtml[pos1+13:pos2] #form key for certification\n\n    pos1 = quoraHtml.find('\"SignupValidator\", \"', pos2)\n    pos2 = quoraHtml.find('\"', pos1+21)\n    firstNameValidateEncrypted = quoraHtml[pos1+20:pos2] #encrypted first name validator\n    pos1 = quoraHtml.find('\"SignupValidator\", \"', pos2)\n    pos2 = quoraHtml.find('\"', pos1+21)\n    lastNameValidateEncrypted = quoraHtml[pos1+20:pos2] #encrypted last name validator\n    pos1 = quoraHtml.find('\"SignupValidator\", \"', pos2)\n    pos2 = quoraHtml.find('\"', pos1+21)\n    mailValidateEncrypted = quoraHtml[pos1+20:pos2] #encrypted email validator\n    pos1 = quoraHtml.find('\"SignupValidator\", \"', pos2)\n    pos2 = quoraHtml.find('\"', pos1+21)\n    passValidateEncrypted = quoraHtml[pos1+20:pos2] #encrypted password validator\n\n    pos1 = quoraHtml.find('\"hmacs\": {')\n    pos2 = quoraHtml.find('}', pos1+11)\n    formDecryptKeyListText = quoraHtml[pos1+9:pos2+1] #decryption key list in string format\n    formDecryptKeyList = json.loads(formDecryptKeyListText) #decryption key list\n\n    data['firstNameValidate'] = formDecryptKeyList[firstNameValidateEncrypted]\n    data['lastNameValidate'] = formDecryptKeyList[lastNameValidateEncrypted]\n    data['mailValidate'] = formDecryptKeyList[mailValidateEncrypted]\n    data['passValidate'] = formDecryptKeyList[passValidateEncrypted]\n\n    data['e2e'] = _base36encode(int(1e3 * startTime + math.floor(1e3 * random.random())))\n\n    ##############\n    ## validate data ##\n    ##############\n    _validate('first_name',firstName,data)\n\ndef _validate(validate,value,formData):\n    data = {}\n    data['json'] = '{\"args\":[],\"kwargs\":{\"value\":\"'+value+'\"}}'\n    data['formKey'] = formData['formKey']\n    data['postKey'] = formData['postKey']\n    data['window_id'] = formData['windowId']\n    data['referring_controller'] = 'index'\n    data['referring_action'] = 'index'\n    if validate == 'first_name':\n        data['__vcon_json'] = '[\"'+formData['firstNameValidate']+'\"]'\n    elif validate == 'last_name':\n        data['__vcon_json'] = '[\"'+formData['lastNameValidator']+'\"]'\n    elif validate == 'email':\n        data['__vcon_json'] = '[\"'+formData['mailValidator']+'\"]'\n    elif validate == 'password':\n        data['__vcon_json'] = '[\"'+formData['passValidator']+'\"]'\n    data['__vcon_method'] = 'validate'\n    data['__e2e_action_id'] = formData['e2e']\n    data['js_init'] = '{\"id\":\"@'+validate+'\"}'\n    data['__metadata'] = '{}'\n    headers = {'Accept': 'application/json, text/javascript, */*; q=0.01', 'Accept-Language':'cs-CZ,cs;q=0.8,en;q=0.6','Connection':'keep-alive','Content-Type':'application/x-www-form-urlencoded; charset=UTF-8','Host':'www.quora.com','Origin':'https://www.quora.com','Referer':'https://www.quora.com/','User-Agent':'Mozilla/5.0 (Windows NT 10.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36','X-Requested-With':'XMLHttpRequest'}\n    r = requests.post(formData['sendUrl'], data=data, headers=headers, cookies=formData['cookies'], proxies=formData['proxy'])\n    print (r.status_code)\n\n\ndef createAccount(captchaApiKey):\n    _register('First','Last','mail@gmail.co','abcd123*',captchaApiKey)\n\ncaptchaApiKey = 'b6d955900d620d2589c03fef5239a1be'\ncreateAccount(captchaApiKey)\n</code></pre>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 4, "creation_date": 1490828778, "post_id": 43105706, "comment_id": 73292669, "body": "You&#39;re trying to issue a shell command to Python. <code>python script0.py</code> doesn&#39;t go in an interactive Python session; it goes in the shell, a.k.a. command prompt."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1490828778, "post_id": 43105706, "comment_id": 73292670, "body": "I have no idea; that works just fine for me.  Do you have any leading spaces or other characters in the file?"}, {"owner": {"reputation": 495, "user_id": 7227829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jybi3.jpg?s=128&g=1", "display_name": "Charlie G", "link": "https://stackoverflow.com/users/7227829/charlie-g"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1490829134, "post_id": 43105706, "comment_id": 73292768, "body": "@user2357112 is correct, you should post it as the answer"}, {"owner": {"reputation": 9, "user_id": 7788598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4288f53a566cb44d9a3e9183b3ef7ada?s=128&d=identicon&r=PG&f=1", "display_name": "nia", "link": "https://stackoverflow.com/users/7788598/nia"}, "edited": false, "score": 0, "creation_date": 1490829253, "post_id": 43105706, "comment_id": 73292812, "body": "no, no leading spaces. How do I submit a simple python script that runs in the command prompt under windows?"}, {"owner": {"reputation": 9, "user_id": 7788598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4288f53a566cb44d9a3e9183b3ef7ada?s=128&d=identicon&r=PG&f=1", "display_name": "nia", "link": "https://stackoverflow.com/users/7788598/nia"}, "edited": false, "score": 0, "creation_date": 1490829609, "post_id": 43105706, "comment_id": 73292910, "body": "I am using python 27 with Windows 10. When I simply type python I get errors too. Something is not right."}, {"owner": {"reputation": 9, "user_id": 7788598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4288f53a566cb44d9a3e9183b3ef7ada?s=128&d=identicon&r=PG&f=1", "display_name": "nia", "link": "https://stackoverflow.com/users/7788598/nia"}, "edited": false, "score": 0, "creation_date": 1490829761, "post_id": 43105706, "comment_id": 73292954, "body": "&gt;&gt;&gt; python Traceback (most recent call last):   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt; NameError: name &#39;python&#39; is not defined"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1490829932, "post_id": 43105706, "comment_id": 73293014, "body": "@nia: You&#39;re still trying to issue shell commands to Python there."}, {"owner": {"reputation": 9, "user_id": 7788598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4288f53a566cb44d9a3e9183b3ef7ada?s=128&d=identicon&r=PG&f=1", "display_name": "nia", "link": "https://stackoverflow.com/users/7788598/nia"}, "edited": false, "score": 0, "creation_date": 1490830345, "post_id": 43105706, "comment_id": 73293150, "body": "what is the solution of the problem?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1490830895, "post_id": 43105706, "comment_id": 73293329, "body": "Stop trying to issue shell commands to Python. Use the command prompt - on Windows, the thing literally called &quot;command prompt&quot;."}, {"owner": {"reputation": 9, "user_id": 7788598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4288f53a566cb44d9a3e9183b3ef7ada?s=128&d=identicon&r=PG&f=1", "display_name": "nia", "link": "https://stackoverflow.com/users/7788598/nia"}, "edited": false, "score": 0, "creation_date": 1490831677, "post_id": 43105706, "comment_id": 73293562, "body": "Thank you guys. It turns out that when I click the python icon it opens the interpreter, not just a command prompt. I didn&#39;t notice."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 7788598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4288f53a566cb44d9a3e9183b3ef7ada?s=128&d=identicon&r=PG&f=1", "display_name": "nia", "link": "https://stackoverflow.com/users/7788598/nia"}, "edited": false, "score": 0, "creation_date": 1490829455, "post_id": 43105757, "comment_id": 73292868, "body": "Nope it is Python 2.7."}, {"owner": {"reputation": 9, "user_id": 7788598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4288f53a566cb44d9a3e9183b3ef7ada?s=128&d=identicon&r=PG&f=1", "display_name": "nia", "link": "https://stackoverflow.com/users/7788598/nia"}, "edited": false, "score": 0, "creation_date": 1490830111, "post_id": 43105757, "comment_id": 73293069, "body": "Thanks. exit() exits the command prompt. I use Windows 10. Probably Python 2.7.12 doesn&#39;t work with windows 10."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 9, "user_id": 7788598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4288f53a566cb44d9a3e9183b3ef7ada?s=128&d=identicon&r=PG&f=1", "display_name": "nia", "link": "https://stackoverflow.com/users/7788598/nia"}, "edited": false, "score": 0, "creation_date": 1490830958, "post_id": 43105757, "comment_id": 73293344, "body": "@nia: Protip: don&#39;t blame your tools until you understand them. Python works fine on Windows 10. You&#39;re just doing it wrong."}, {"owner": {"reputation": 18509, "user_id": 363262, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/3ekjR.png?s=128&g=1", "display_name": "Juan Cort&#233;s", "link": "https://stackoverflow.com/users/363262/juan-cort%c3%a9s"}, "edited": false, "score": 0, "creation_date": 1490831055, "post_id": 43105757, "comment_id": 73293369, "body": "You need to do something like this <code>C:\\Python27\\python.exe C:\\Users\\Username\\Desktop\\my_python_script.py</code> changing the routes to those on your system"}, {"owner": {"reputation": 9, "user_id": 7788598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4288f53a566cb44d9a3e9183b3ef7ada?s=128&d=identicon&r=PG&f=1", "display_name": "nia", "link": "https://stackoverflow.com/users/7788598/nia"}, "edited": false, "score": 0, "creation_date": 1490831191, "post_id": 43105757, "comment_id": 73293405, "body": "I was opening python interpreter in the command prompt. I just had to open a command prompt. Sorry for the stupid question and thanks a lot."}], "tags": [], "owner": {"reputation": 18509, "user_id": 363262, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/3ekjR.png?s=128&g=1", "display_name": "Juan Cort&#233;s", "link": "https://stackoverflow.com/users/363262/juan-cort%c3%a9s"}, "is_accepted": false, "score": 2, "last_activity_date": 1490829411, "last_edit_date": 1490829411, "creation_date": 1490828956, "answer_id": 43105757, "question_id": 43105706, "link": "https://stackoverflow.com/questions/43105706/python-command-line-syntax-error/43105757#43105757", "title": "python command line syntax error", "body": "<p>You are running that code <strong>from inside the python interpreter</strong>. If your terminal is showing a leading <code>&gt;&gt;&gt;</code> it means your inside python already, in there you can either type <code>print 2**2</code> directly, or exit and call <code>python script0.py</code></p>\n\n<p>My guess is that you inadvertently entered the python interpreter and thought you were still at the command prompt. Type <code>exit()</code> and try again.</p>\n\n<p><img src=\"https://i.stack.imgur.com/VeB3l.png\" alt=\"demo\"></p>\n"}], "owner": {"reputation": 9, "user_id": 7788598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4288f53a566cb44d9a3e9183b3ef7ada?s=128&d=identicon&r=PG&f=1", "display_name": "nia", "link": "https://stackoverflow.com/users/7788598/nia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1534, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490830694, "creation_date": 1490828661, "last_edit_date": 1490829018, "question_id": 43105706, "link": "https://stackoverflow.com/questions/43105706/python-command-line-syntax-error", "title": "python command line syntax error", "body": "<p>I tried running a simple python file from the command line. I created a python file called script0.py with the following content</p>\n\n<pre><code> print 2**2\n</code></pre>\n\n<p>I get a syntax error.</p>\n\n<pre><code>&gt;&gt;&gt; python script0.py\n  File \"&lt;stdin&gt;\", line 1\n    python script0.py\n                 ^\nSyntaxError: invalid syntax\n&gt;&gt;&gt;\n</code></pre>\n\n<p>What is that? My first try with python has been really bad and the book of Mark Lutz is not helping. I use Python 2.7.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "matplotlib", "mplot3d"], "answers": [{"tags": [], "owner": {"reputation": 28401, "user_id": 2666859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LtKyC.png?s=128&g=1", "display_name": "Serenity", "link": "https://stackoverflow.com/users/2666859/serenity"}, "is_accepted": true, "score": 1, "last_activity_date": 1490828680, "creation_date": 1490828680, "answer_id": 43105711, "question_id": 43105631, "link": "https://stackoverflow.com/questions/43105631/arranging-data-to-make-a-3d-surface-plot/43105711#43105711", "title": "Arranging data to make a 3d surface plot", "body": "<p>You have to put z value for every pair of (X,Y). It mean you do not need <code>numpy.ravel</code>. The sizes of X, Y and Z must be the same:</p>\n\n<pre><code>import numpy as np \nfrom mpl_toolkits.mplot3d import Axes3D\nimport matplotlib.pyplot as plt\n\n\ndef Mountain(F, P):\n    TA = ((TAmax-TAmin) * (((FF**g)/((FF**g)+FFhm**g)**a)/((((FF**g)/((FF**g)+FFhm**g))**a)+(SP/SPe)**a)))\n    return TA\n\n\nF = np.linspace(0,120)\nP = np.linspace(0,100)\nFb= int(21)\nFro= int(362)\nFFhm = int(63)\ng= int(3)\na = int(3)\nSPmin = float(1.82)\nSPbend = float(0.5)\nSPe = int(10)\nTAmax= int(1)\nTAmin = int(0)\n\nSP = SPmin + SPbend * np.log(1 + np.exp((P - SPmin)/SPbend))\nFF= (Fb * (np.log(1 + np.exp(Fro/Fb)) - np.log(1 + np.exp((Fro-F)/Fb))))\n\nfig = plt.figure()\nax = fig.add_subplot(111, projection='3d')\nX, Y = np.meshgrid(F, P)\nZ = np.array(Mountain(F,P))\n\nax.plot_surface(X, Y, Z)\n\nax.set_xlabel('F')\nax.set_ylabel('P')\nax.set_zlabel('TA')\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/AoakZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AoakZ.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 560, "user_id": 1057105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1eed3b357556c214ba12853c78a3173?s=128&d=identicon&r=PG", "display_name": "artoonie", "link": "https://stackoverflow.com/users/1057105/artoonie"}, "is_accepted": false, "score": 2, "last_activity_date": 1490829143, "creation_date": 1490829143, "answer_id": 43105804, "question_id": 43105631, "link": "https://stackoverflow.com/questions/43105631/arranging-data-to-make-a-3d-surface-plot/43105804#43105804", "title": "Arranging data to make a 3d surface plot", "body": "<p>Note that zs is empty. If you want to do list comprehension, you should use brackets (so <code>np.array([Mountain(F,P) for F,P in gh])</code>), though what you really want is <code>zs = np.array([Mountain(X[i],Y[i]) for i in range(X.shape[0])])</code> instead of ravel.</p>\n\n<p><a href=\"https://i.stack.imgur.com/qdOXj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qdOXj.png\" alt=\"plot output\"></a></p>\n"}], "owner": {"reputation": 23, "user_id": 6688953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78c9b3a94e10cb5e1aa65df1098aeb68?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/6688953/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 43105711, "answer_count": 2, "score": 2, "last_activity_date": 1545720955, "creation_date": 1490828183, "last_edit_date": 1545720955, "question_id": 43105631, "link": "https://stackoverflow.com/questions/43105631/arranging-data-to-make-a-3d-surface-plot", "title": "Arranging data to make a 3d surface plot", "body": "<p>I am trying to make 3D surface plot, but I'm having trouble transforming my data into the right format.</p>\n\n<p>Reshaping my Z variable gives me: 'ValueError: total size of new array must be unchanged'. The shape for Z is (2500,50). The shapes for X and Y are both (50,50). I'm not sure why this is so. Is there something obviously wrong with my code that I'm missing? </p>\n\n<pre><code>import numpy as np \nfrom mpl_toolkits.mplot3d import Axes3D\nimport matplotlib.pyplot as plt\n\n\ndef Mountain(F, P):\n    TA = ((TAmax-TAmin) * (((FF**g)/((FF**g)+FFhm**g)**a)/((((FF**g)/((FF**g)+FFhm**g))**a)+(SP/SPe)**a)))\n    return TA\n\n\nF = np.linspace(0,120)\nP = np.linspace(0,100)\nFb= int(21)\nFro= int(362)\nFFhm = int(63)\ng= int(3)\na = int(3)\nSPmin = float(1.82)\nSPbend = float(0.5)\nSPe = int(10)\nTAmax= int(1)\nTAmin = int(0)\n\nSP = SPmin + SPbend * np.log(1 + np.exp((P - SPmin)/SPbend))\n\nFF= (Fb * (np.log(1 + np.exp(Fro/Fb)) - np.log(1 + np.exp((Fro-F)/Fb))))\n\n\nfig = plt.figure()\nax = fig.add_subplot(111, projection='3d')\nX, Y = np.meshgrid(F, P)\ngh= list(zip(np.ravel(X), np.ravel(Y)))\nzs = np.array(Mountain(F,P) for F,P in gh)\nZ = zs.reshape(X.shape)\n\nax.plot_surface(X, Y, Z)\n\nax.set_xlabel('F')\nax.set_ylabel('P')\nax.set_zlabel('TA')\n\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "postgresql", "pandas", "sqlalchemy", "psycopg2"], "comments": [{"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 3, "creation_date": 1490828602, "post_id": 43105619, "comment_id": 73292625, "body": "Are you sure you have shared the complete code? I only see <code>try</code> block with no <code>except</code>"}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1490837105, "post_id": 43105619, "comment_id": 73294912, "body": "Also, your engine line needs the Postgres-python api: <i>psycopg2, pg8000, psycopg2cffi, py-postgresql, pygresql</i> which also needs to be imported in script. Show import lines. See <a href=\"http://docs.sqlalchemy.org/en/latest/dialects/postgresql.html\" rel=\"nofollow noreferrer\">docs</a>."}, {"owner": {"reputation": 2910, "user_id": 2278676, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/169dbb83a1fdfd2cbd1d4efae32912d2?s=128&d=identicon&r=PG", "display_name": "singmotor", "link": "https://stackoverflow.com/users/2278676/singmotor"}, "reply_to_user": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1490879007, "post_id": 43105619, "comment_id": 73316502, "body": "@MoinuddinQuadri I have an except block and imports, I&#39;ll add those right now"}, {"owner": {"reputation": 2910, "user_id": 2278676, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/169dbb83a1fdfd2cbd1d4efae32912d2?s=128&d=identicon&r=PG", "display_name": "singmotor", "link": "https://stackoverflow.com/users/2278676/singmotor"}, "reply_to_user": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1490879342, "post_id": 43105619, "comment_id": 73316823, "body": "@Parfait I&#39;ve added psycopg2 and still have the same hanging happening in my function. Good spot though!"}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1490891445, "post_id": 43105619, "comment_id": 73326090, "body": "Curious, how big is your database? Hundreds of million-row, thousand-column tables? Can you check your code with a different database/schema?"}, {"owner": {"reputation": 2910, "user_id": 2278676, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/169dbb83a1fdfd2cbd1d4efae32912d2?s=128&d=identicon&r=PG", "display_name": "singmotor", "link": "https://stackoverflow.com/users/2278676/singmotor"}, "edited": false, "score": 0, "creation_date": 1490897430, "post_id": 43105619, "comment_id": 73329738, "body": "it&#39;s not large, so that shouldn&#39;t be the reason for the hang."}], "owner": {"reputation": 2910, "user_id": 2278676, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/169dbb83a1fdfd2cbd1d4efae32912d2?s=128&d=identicon&r=PG", "display_name": "singmotor", "link": "https://stackoverflow.com/users/2278676/singmotor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1639, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1504282597, "creation_date": 1490828123, "last_edit_date": 1504282597, "question_id": 43105619, "link": "https://stackoverflow.com/questions/43105619/loading-a-postgresql-table-into-pandas-dataframe-with-sqlalchemy-hangs-forever", "title": "Loading a postgresql table into pandas dataframe with sqlalchemy hangs forever", "body": "<p>I'm trying to pull a table from a database into a pandas dataframe, but my code is hanging on the command to do so and I can't figure out why.</p>\n\n<p>I've got:</p>\n\n<pre><code>import psycopg2\nimport pandas\nimport sqlalchemy\nfrom pandas import DataFrame\nfrom sqlalchemy import create_engine\n\ndef connect():\n    try:\n        engine = sqlalchemy.create_engine('postgresql+psycopg2://user:password@host/database')\n        df = pandas.read_sql_table('mytable',engine,schema='mySchema')\n        print(\"The dataframe loaded\")\n    except(Exception, psycopg2.DatabaseError) as error:\n        print(error)    \n\nif __name__ == '__main__':\n    connect()\n</code></pre>\n\n<p>but when I run my code, it never makes it past the <code>df=</code> line. No errors or anything, just never prints and keeps running. I suspect this is some issue with the engine maybe not being set up properly?</p>\n"}, {"tags": ["python", "kivy"], "comments": [{"owner": {"reputation": 670, "user_id": 4476122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af45909e3fd6f5ae28eedb58206eeaaf?s=128&d=identicon&r=PG", "display_name": "JustMe", "link": "https://stackoverflow.com/users/4476122/justme"}, "edited": false, "score": 0, "creation_date": 1490828298, "post_id": 43105566, "comment_id": 73292533, "body": "Hi, please read <a href=\"http://stackoverflow.com/help\">what would be good way to ask a question</a>, and <a href=\"https://stackoverflow.com/help/mcve\">how to create minimal example</a>  in order to help people understand - and possibly then - help You."}, {"owner": {"reputation": 345, "user_id": 7776781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCDDH.jpg?s=128&g=1", "display_name": "Fredrik Nilsson", "link": "https://stackoverflow.com/users/7776781/fredrik-nilsson"}, "reply_to_user": {"reputation": 670, "user_id": 4476122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af45909e3fd6f5ae28eedb58206eeaaf?s=128&d=identicon&r=PG", "display_name": "JustMe", "link": "https://stackoverflow.com/users/4476122/justme"}, "edited": false, "score": 0, "creation_date": 1490828917, "post_id": 43105566, "comment_id": 73292701, "body": "Oh I see, well what I&#39;m really only trying to find out is if its possible to get some sort of on_drag_release when using DragBehaviour in kivy"}, {"owner": {"reputation": 670, "user_id": 4476122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af45909e3fd6f5ae28eedb58206eeaaf?s=128&d=identicon&r=PG", "display_name": "JustMe", "link": "https://stackoverflow.com/users/4476122/justme"}, "edited": false, "score": 0, "creation_date": 1490829340, "post_id": 43105566, "comment_id": 73292829, "body": "I&#39;d check if <code>on_touch_up(touch)</code> is something you are looking after, but without code example that explains what are you trying to achieve there is nothing I can do."}, {"owner": {"reputation": 345, "user_id": 7776781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCDDH.jpg?s=128&g=1", "display_name": "Fredrik Nilsson", "link": "https://stackoverflow.com/users/7776781/fredrik-nilsson"}, "reply_to_user": {"reputation": 670, "user_id": 4476122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af45909e3fd6f5ae28eedb58206eeaaf?s=128&d=identicon&r=PG", "display_name": "JustMe", "link": "https://stackoverflow.com/users/4476122/justme"}, "edited": false, "score": 0, "creation_date": 1490829876, "post_id": 43105566, "comment_id": 73292997, "body": "@JustMe well I can show you the code but its quite long and there are pictures in it"}, {"owner": {"reputation": 7293, "user_id": 5994041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dWWF9.png?s=128&g=1", "display_name": "Peter Badida", "link": "https://stackoverflow.com/users/5994041/peter-badida"}, "edited": false, "score": 0, "creation_date": 1490883491, "post_id": 43105566, "comment_id": 73320163, "body": "@FredrikNilsson That&#39;s pretty much what a minimal example is for. But yeah, do check the <code>on_touch_up</code> in the <a href=\"https://kivy.org/docs/api-kivy.uix.widget.html\" rel=\"nofollow noreferrer\">Widget&#39;s documentation</a>."}], "owner": {"reputation": 345, "user_id": 7776781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCDDH.jpg?s=128&g=1", "display_name": "Fredrik Nilsson", "link": "https://stackoverflow.com/users/7776781/fredrik-nilsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490860958, "creation_date": 1490827811, "last_edit_date": 1490860958, "question_id": 43105566, "link": "https://stackoverflow.com/questions/43105566/python-kivy-dragbehaviour-on-release", "title": "Python: kivy DragBehaviour on release", "body": "<p>I have an app built with Kivy where I have objects possible to be dragged with the help of Kivy's DragBehavior. </p>\n\n<p>What I want to do is - when someone drags an object to a certain area of the screen, but doesn't match it exactly on the pixel - I want to set - within a certain range - the position to the exact point they tried to place it on. For example:</p>\n\n<pre><code>if 100 &lt; self.center[0] &lt; 300 and 400 &lt; self.center[1] &lt; 600:\n    self.x = 90\n    self.y = 850\n</code></pre>\n\n<p>I would like this check to only occur when the object is released (so mouse release) but I can't seem to find how to do this.</p>\n"}, {"tags": ["python", "apache-nifi"], "answers": [{"tags": [], "owner": {"reputation": 10503, "user_id": 1668575, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Xjs6.jpg?s=128&g=1", "display_name": "mattyb", "link": "https://stackoverflow.com/users/1668575/mattyb"}, "is_accepted": true, "score": 6, "last_activity_date": 1490838249, "creation_date": 1490838249, "answer_id": 43107059, "question_id": 43105561, "link": "https://stackoverflow.com/questions/43105561/generating-multiple-flowfiles-using-the-nifi-executescript-processor/43107059#43107059", "title": "Generating multiple flowfiles using the Nifi ExecuteScript processor", "body": "<p>Good question, this is a nuance of the Callback approach to the flow file API. You've created a subclass of StreamCallback but you haven't retrieved an input flow file or used it to overwrite the content via an instance of your class.</p>\n\n<p>Try this after the definition of your ModJSON class:</p>\n\n<pre><code>originalFlowFile = session.get()\nif(originalFlowFile != None):\n    originalFlowFile = session.write(flowFile, ModJSON())\n    session.remove(originalFlowFile)\n</code></pre>\n\n<p>This will get an input flow file (or wait for one to show up), then call your StreamCallback to overwrite the contents of your flow file. In my example you'd discard your input flow file, so if that's the right behavior for your use case, then instead you can just extend InputStreamCallback instead of StreamCallback and remove the outputStream.write(), if you are not using outputStream for anything. To do that, replace StreamCallback with InputStreamCallback and remove the \"outputStream\" parameter from the process() method. </p>\n\n<p>In your example, once you add my snippet above, you are overwriting the input content with your json.dumps() command, as well as creating and transferring new files, all to the same relationship (success), so that could cause problems if they are not of the same format (which is why I added the session.remove()). If you need the original flow file to go out a different relationship than the rest, please consider <a href=\"https://nifi.apache.org/docs/nifi-docs/components/org.apache.nifi.processors.script.InvokeScriptedProcessor/index.html\" rel=\"noreferrer\">InvokeScriptedProcessor</a> rather than ExecuteScript. If you don't care about the input flow file after the processing (adding URL attributes is done), then follow my suggestion above. If they can all go out the same relationship (success), then replace my session.remove() with</p>\n\n<pre><code>session.transfer(originalFlowFile, REL_SUCCESS)\n</code></pre>\n\n<p>Check my ExecuteScript cookbook article (<a href=\"https://community.hortonworks.com/articles/75545/executescript-cookbook-part-2.html\" rel=\"noreferrer\">part 2</a> of 3) for more examples of these use cases in Jython (and other languages) :)</p>\n"}], "owner": {"reputation": 1126, "user_id": 1469496, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6FNao.png?s=128&g=1", "display_name": "summerNight", "link": "https://stackoverflow.com/users/1469496/summernight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2588, "favorite_count": 1, "accepted_answer_id": 43107059, "answer_count": 1, "score": 3, "last_activity_date": 1490838249, "creation_date": 1490827797, "question_id": 43105561, "link": "https://stackoverflow.com/questions/43105561/generating-multiple-flowfiles-using-the-nifi-executescript-processor", "title": "Generating multiple flowfiles using the Nifi ExecuteScript processor", "body": "<p>I am working on a Nifi flow where I am getting a JSON document with multiple key-value pairs. I am using the <code>ExecuteScript</code> processor with <code>python</code>.</p>\n\n<p>My goal here is to create various URLS bases on JSON <code>keys</code>. The keys are numerical and they look like this:</p>\n\n<pre><code>keys = [10200, 10201, 10202, ...]\n</code></pre>\n\n<p>The URLs I want are of 3 types and they <em>should</em> look like these:</p>\n\n<pre><code>http://google.com/10200\nhttp://bing.com/10200\nhttp://yahoo.com/10200\n</code></pre>\n\n<p>I am trying to loop through my <code>keys[]</code> and create 3 specific urls for each numerical keys that it contains. I have the following code where I am trying to:</p>\n\n<p>read a numerical key from list <code>--&gt;</code> create 3 URLs <code>--&gt;</code> spit out a flow file.</p>\n\n<p>...... and read the next numerical key in the list and keep looping.....</p>\n\n<p>I have the following code but when I give it a JSON flowfile it does not do anything right now. Can someone please tell me what I am doing wrong?</p>\n\n<pre><code>import json\nimport java.io\nfrom org.apache.commons.io import IOUtils\nfrom java.nio.charset import StandardCharsets\nfrom org.apache.nifi.processor.io import StreamCallback\n\nclass ModJSON(StreamCallback):\n\n  def __init__(self):\n        self.parentFlowFile = None\n        pass\n  def process(self, inputStream, outputStream):\n    text = IOUtils.toString(inputStream, StandardCharsets.UTF_8)\n    obj = json.loads(text)\n    flowfiles_list = [] \n\n    outputStream.write(bytearray(json.dumps(obj.keys(), indent=4).encode('utf-8')))\n\n\n    for numerical_key in obj.keys():\n      # create 1 flowfile for each numerical_key. Each flow file should have 3 url attributes \n      flowFile = session.create(self.parentFlowFile)\n      if (flowFile != None):\n        flowFile = session.write(flowFile, \"Does not matter\")\n        flowFile = session.putAttribute(flowFile, \"google\", \"http://google.com/\"+ numerical_key)\n\n        flowFile = session.putAttribute(flowFile, \"google\", \"http://bing.com/\"+ numerical_key)\n\n        flowFile = session.putAttribute(flowFile, \"google\", \"http://yahoo.com/\"+ numerical_key)\n        flowfiles_list.append(flowFile)\n\n    for flow in flowfiles_list:\n      session.transfer(flow, REL_SUCCESS)\n</code></pre>\n"}, {"tags": ["python", "openpyxl"], "comments": [{"owner": {"reputation": 2800, "user_id": 2193134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7007988a388d47491a921503d30cca07?s=128&d=identicon&r=PG&f=1", "display_name": "TehTris", "link": "https://stackoverflow.com/users/2193134/tehtris"}, "edited": false, "score": 1, "creation_date": 1490827249, "post_id": 43105440, "comment_id": 73292207, "body": "Functions. <code>sheet.column_dimensions[&#39;A&#39;].width = 10</code> 3 times,  can be replaced with a function that does it like <code>def set_width(letter, number): sheet.column_dimensions[letter].width = number</code> and when you want to call it, do <code>set_width(&#39;A&#39;, 10)</code>, then you can expand on that and use a loop to iterate over some sort of data structure."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 1, "creation_date": 1490827277, "post_id": 43105440, "comment_id": 73292215, "body": "<code>for f in (&#39;A1&#39;, &#39;B1&#39;, &#39;C1&#39;):</code> - <code>for c in (&#39;A1&#39;, &#39;B1&#39;, &#39;C1&#39;):</code>... how familiar are you with loops?"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1490827644, "post_id": 43105440, "comment_id": 73292341, "body": "<code>sheet[&#39;A1&#39;] = &#39;Index&#39;</code> seems to initialize a dictionary item to <code>&#39;Index&#39;</code>, which is a string, and strings do not have any attributes. I wonder why <code>sheet[&#39;A1&#39;].font = font_bold</code> doesn&#39;t cause an error?"}, {"owner": {"reputation": 147, "user_id": 6549225, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/306211643050698/picture?type=large", "display_name": "Paulo Soares", "link": "https://stackoverflow.com/users/6549225/paulo-soares"}, "edited": false, "score": 0, "creation_date": 1490827659, "post_id": 43105440, "comment_id": 73292345, "body": "Good idea. I&#39;m OK with loops, it just hadn&#39;t crossed my mind to use them like this. Thank you."}, {"owner": {"reputation": 147, "user_id": 6549225, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/306211643050698/picture?type=large", "display_name": "Paulo Soares", "link": "https://stackoverflow.com/users/6549225/paulo-soares"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1490827719, "post_id": 43105440, "comment_id": 73292371, "body": "@DYZ it&#39;s because it is derived from the openpyxl module versio 2.3.3 if I&#39;m not mistaken. It&#39;s a Python module to edit excel/libreoffice spreadsheets."}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 6549225, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/306211643050698/picture?type=large", "display_name": "Paulo Soares", "link": "https://stackoverflow.com/users/6549225/paulo-soares"}, "edited": false, "score": 1, "creation_date": 1490828308, "post_id": 43105586, "comment_id": 73292535, "body": "Damn, man. That&#39;s great. Never thought of using dictionaries like that. You&#39;ve just opened a world of possibilities for me. Thank you!"}], "tags": [], "owner": {"reputation": 18829, "user_id": 24998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c14a4f2931fa9336fdccdfe11318fef?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/24998/jack"}, "is_accepted": false, "score": 1, "last_activity_date": 1490828353, "last_edit_date": 1490828353, "creation_date": 1490827914, "answer_id": 43105586, "question_id": 43105440, "link": "https://stackoverflow.com/questions/43105440/how-to-make-this-code-less-repetitive-openpyxl/43105586#43105586", "title": "How to make this code less repetitive? (openpyxl)", "body": "<p>Here's a good start:</p>\n\n<pre><code>items = [\n  {\"sheet\": \"A1\", \"column\": \"A\", \"column_width\": 10, \"title\": \"Index\"},\n  {\"sheet\": \"B1\", \"column\": \"B\", \"column_width\": 30, \"title\": \"Name\"},\n  {\"sheet\": \"C1\", \"column\": \"C\", \"column_width\": 30} \"title\": \"Grade\"},\n]\n\nfor item in items:\n    sheet[item[\"sheet\"]] = item[\"title\"]\n    sheet[item[\"sheet\"]].font = font_bold # always bold\n    sheet.column_dimensions[item[\"column\"]] = item[\"column_width\"] # shared value\n    sheet.cell(item[\"sheet\"]).alignment = Alignment(horizontal='center', vertical='center') # shared value\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2800, "user_id": 2193134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7007988a388d47491a921503d30cca07?s=128&d=identicon&r=PG&f=1", "display_name": "TehTris", "link": "https://stackoverflow.com/users/2193134/tehtris"}, "edited": false, "score": 2, "creation_date": 1490828495, "post_id": 43105648, "comment_id": 73292592, "body": "This is the truest answer here. If OP knows how to create classes, then this is the direction OP should go."}, {"owner": {"reputation": 147, "user_id": 6549225, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/306211643050698/picture?type=large", "display_name": "Paulo Soares", "link": "https://stackoverflow.com/users/6549225/paulo-soares"}, "edited": false, "score": 0, "creation_date": 1490828690, "post_id": 43105648, "comment_id": 73292643, "body": "Thank you. I&#39;m still studying my way through OOP. Will change the code when I feel able."}], "tags": [], "owner": {"reputation": 2706, "user_id": 5064004, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5MCp53LdEVk/AAAAAAAAAAI/AAAAAAAAABE/xz_8Wz2cTug/photo.jpg?sz=128", "display_name": "Farhad Maleki", "link": "https://stackoverflow.com/users/5064004/farhad-maleki"}, "is_accepted": false, "score": 2, "last_activity_date": 1490828295, "creation_date": 1490828295, "answer_id": 43105648, "question_id": 43105440, "link": "https://stackoverflow.com/questions/43105440/how-to-make-this-code-less-repetitive-openpyxl/43105648#43105648", "title": "How to make this code less repetitive? (openpyxl)", "body": "<h1>Objects and DRY (Don't Repeat Yourself) Principle</h1>\n\n<p>In general, whenever you have some parallel arrays of the same length that keep some related attribute, it is a good indication that you can combine those attributes and make an object out of them.\nFor your case, I see that suggest to define an object Sheet with the following attributes:</p>\n\n<ul>\n<li>title</li>\n<li>font</li>\n<li>column_dimensions</li>\n<li>cell</li>\n<li>...</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 2706, "user_id": 5064004, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5MCp53LdEVk/AAAAAAAAAAI/AAAAAAAAABE/xz_8Wz2cTug/photo.jpg?sz=128", "display_name": "Farhad Maleki", "link": "https://stackoverflow.com/users/5064004/farhad-maleki"}, "edited": false, "score": 1, "creation_date": 1490828492, "post_id": 43105656, "comment_id": 73292589, "body": "You attempt to avoid repeating yourself is very admirable. Please see my comment below."}, {"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1490859974, "post_id": 43105656, "comment_id": 73303238, "body": "This is a reasonable approach in general but I functions that only have a single line in their body should generally be avoided. In particular, the use of <code>sheet.cell(cell).</code> is significantly more confusing than <code>sheet[cell]</code>"}, {"owner": {"reputation": 2800, "user_id": 2193134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7007988a388d47491a921503d30cca07?s=128&d=identicon&r=PG&f=1", "display_name": "TehTris", "link": "https://stackoverflow.com/users/2193134/tehtris"}, "edited": false, "score": 0, "creation_date": 1490913228, "post_id": 43105656, "comment_id": 73337497, "body": "Agreed, i just took what he had and put it into functions. This can be turned into a single function with 4 lines a piece, but then your input data structure gets more complex. But this is to convey the general idea, that functions make your code less complex and repetative."}], "tags": [], "owner": {"reputation": 2800, "user_id": 2193134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7007988a388d47491a921503d30cca07?s=128&d=identicon&r=PG&f=1", "display_name": "TehTris", "link": "https://stackoverflow.com/users/2193134/tehtris"}, "is_accepted": true, "score": 1, "last_activity_date": 1490828573, "last_edit_date": 1490828573, "creation_date": 1490828318, "answer_id": 43105656, "question_id": 43105440, "link": "https://stackoverflow.com/questions/43105440/how-to-make-this-code-less-repetitive-openpyxl/43105656#43105656", "title": "How to make this code less repetitive? (openpyxl)", "body": "<p>I'd take the whole thing and break it down into functions.</p>\n\n<pre><code>def name_column(cell, name):\n    sheet[cell] = name\n\ndef style_name_column(cell, style):\n    sheet[cell].font = style\n\ndef change_width(column, width):\n    sheet.column_dimensions[column].width = width\n\ndef align_column(cell):\n    sheet.cell(cell).alignment = Alignment(horizontal='center', vertical='center')\n</code></pre>\n\n<p>then use some sort of data structure to loop over and do this stuff.</p>\n\n<pre><code>indexes_and_names = [['A1','Index']\n                     ['B1','Name' ]\n                     ['C1','Grade']]\n\nfor item in indexes_and_names:\n    name_column(item[0], item[1])\n</code></pre>\n\n<p>and then repeat for the other functions, or use a bigger data structure, like Jack's dictionary.</p>\n\n<p>Your code will be readable, and easily maintainable.</p>\n"}, {"tags": [], "owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "is_accepted": false, "score": 0, "last_activity_date": 1490865204, "creation_date": 1490865204, "answer_id": 43113378, "question_id": 43105440, "link": "https://stackoverflow.com/questions/43105440/how-to-make-this-code-less-repetitive-openpyxl/43113378#43113378", "title": "How to make this code less repetitive? (openpyxl)", "body": "<p>openpyxl provides all the necessary functions to do this quickly and easily. The best way to do this is to use <a href=\"http://openpyxl.readthedocs.io/en/latest/styles.html#named-styles\" rel=\"nofollow noreferrer\">named styles</a>. You can create a single style for the header cells and apply it using a loop.</p>\n\n<p>Create the first row:</p>\n\n<p><code>ws.append(['Index', 'Name', 'Grade'])</code></p>\n\n<p>Create the relevant style:</p>\n\n<p><code>header = NamedStyle(\u2026)</code></p>\n\n<p>Apply the style to the first row:</p>\n\n<pre><code>for cell in ws[1]:\n    cell.style = header\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 6549225, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/306211643050698/picture?type=large", "display_name": "Paulo Soares", "link": "https://stackoverflow.com/users/6549225/paulo-soares"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 43105656, "answer_count": 4, "score": 1, "last_activity_date": 1490865204, "creation_date": 1490827134, "question_id": 43105440, "link": "https://stackoverflow.com/questions/43105440/how-to-make-this-code-less-repetitive-openpyxl", "title": "How to make this code less repetitive? (openpyxl)", "body": "<p>I'm a teacher and I'm making a program to facilitate myself to catalog my students' grades. This isn't so much of a problem, the deal is, I'm doing it mostly to practice programming.</p>\n\n<pre><code># Name the first line\nsheet['A1'] = 'Index'\nsheet['B1'] = 'Name'\nsheet['C1'] = 'Grade'\n\n# Changes the style of the first line to bold\nsheet['A1'].font = font_bold\nsheet['B1'].font = font_bold\nsheet['C1'].font = font_bold\n\n# Widens the columns\nsheet.column_dimensions['A'].width = 10 \nsheet.column_dimensions['B'].width = 30\nsheet.column_dimensions['C'].width = 30\n\n# Aligns to center\nsheet.cell('A1').alignment = Alignment(horizontal='center', vertical='center')\nsheet.cell('B1').alignment = Alignment(horizontal='center', vertical='center')\nsheet.cell('C1').alignment = Alignment(horizontal='center', vertical='center')\n\n# Freeze the first row\nsheet.freeze_panes = 'A2'\n\n# Index number of the lines\ni = 2\n\n--\n\n--\n\n# function to calculate the grade\ndef grade():\n</code></pre>\n\n<p>As you may notice, it is all, to some extent, repetitive. The code functions exactly as I want it to, but I would like to know some other way to make it more... succint.</p>\n\n<p>It is important to remember the variables reach, because up next a function will start, and, soon after, a <code>While</code> loop.</p>\n\n<p>The irrelevant parts of the code for this question have been omitted with a <code>---</code>. If they are somehow needed I'll edit them in, but to my knowledge, they are not.</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["python", "python-3.x", "division", "modulus"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1490827161, "post_id": 43105426, "comment_id": 73292180, "body": "It isn&#39;t <code>num</code> that needs to be non-zero; it&#39;s <code>x</code>. Also, that&#39;s not how you use <code>range</code>."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 4, "creation_date": 1490827221, "post_id": 43105426, "comment_id": 73292195, "body": "<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, please. The code you&#39;ve posted has syntactical errors that prevent it from running at all, and it wouldn&#39;t produce a ZeroDivisionError even if the syntax was fixed."}, {"owner": {"reputation": 33, "user_id": 4538731, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204585211765238/picture?type=large", "display_name": "squalor", "link": "https://stackoverflow.com/users/4538731/squalor"}, "edited": false, "score": 0, "creation_date": 1490829641, "post_id": 43105426, "comment_id": 73292922, "body": "Thank you, I should have done better debugging before posting. I&#39;ve been bashing my head against the wall too much today."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4538731, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204585211765238/picture?type=large", "display_name": "squalor", "link": "https://stackoverflow.com/users/4538731/squalor"}, "edited": false, "score": 0, "creation_date": 1490829410, "post_id": 43105664, "comment_id": 73292858, "body": "Thank you! Code is working now."}, {"owner": {"reputation": 126, "user_id": 4099538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d56d7b2326857e7c03aa98afb9e532a?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Srivastava", "link": "https://stackoverflow.com/users/4099538/ashish-srivastava"}, "reply_to_user": {"reputation": 33, "user_id": 4538731, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204585211765238/picture?type=large", "display_name": "squalor", "link": "https://stackoverflow.com/users/4538731/squalor"}, "edited": false, "score": 0, "creation_date": 1490829797, "post_id": 43105664, "comment_id": 73292967, "body": "@squalor. I&#39;m glad that I was able to help. I will appreciate If you can mark this answer helpful."}], "tags": [], "owner": {"reputation": 126, "user_id": 4099538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d56d7b2326857e7c03aa98afb9e532a?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Srivastava", "link": "https://stackoverflow.com/users/4099538/ashish-srivastava"}, "is_accepted": true, "score": -2, "last_activity_date": 1490828397, "creation_date": 1490828397, "answer_id": 43105664, "question_id": 43105426, "link": "https://stackoverflow.com/questions/43105426/how-to-resolve-modulus-division-by-zero-error-in-python/43105664#43105664", "title": "How to resolve modulus/division by zero error in python", "body": "<p>Your code returns this error because of how you have defined range().</p>\n\n<p>The correct way to define range in python is below:</p>\n\n<pre><code>range(start, stop, step)\n</code></pre>\n\n<p>If your case you have used slicing, this is causing your program to throw error.</p>\n\n<p>For your program you need to define a function is order to return something from conditional statements, the following code will solve your issue</p>\n\n<pre><code>def fac(num):\n    if num &gt; 0:\n        return list(filter(lambda x: num % x == 0, range(1, num+1)))\n\nprint(fac(5))  # [1, 5]\n</code></pre>\n\n<p>Here I have used filter inside a list function because in Python 3 and above filter returns filter object.</p>\n"}], "owner": {"reputation": 33, "user_id": 4538731, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204585211765238/picture?type=large", "display_name": "squalor", "link": "https://stackoverflow.com/users/4538731/squalor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1640, "favorite_count": 0, "closed_date": 1490865420, "accepted_answer_id": 43105664, "answer_count": 1, "score": -2, "last_activity_date": 1490828397, "creation_date": 1490827059, "question_id": 43105426, "link": "https://stackoverflow.com/questions/43105426/how-to-resolve-modulus-division-by-zero-error-in-python", "closed_reason": "Not suitable for this site", "title": "How to resolve modulus/division by zero error in python", "body": "<p>I am struggling to debug the following code, which throws a ZeroDivisionError:</p>\n\n<pre><code>if num &gt; 0:\n    return filter(lambda x: abs(num) % x == 0, range(1:abs(num))\nelse:\n    pass\n</code></pre>\n\n<p>The error message is: </p>\n\n<pre><code>ZeroDivisionError: integer division or modulo by zero\n</code></pre>\n\n<p>The code is a bit ugly because I was getting this error before adding the if and abs() statements.</p>\n\n<p>I am using python 3.6 per my schools requirement, and the task is to return factors of int <code>num</code> using a filter. </p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 990, "user_id": 4217085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e707345996a53035a3f745308f38b454?s=128&d=identicon&r=PG&f=1", "display_name": "sgrg", "link": "https://stackoverflow.com/users/4217085/sgrg"}, "edited": false, "score": 0, "creation_date": 1490827561, "post_id": 43105417, "comment_id": 73292314, "body": "You cannot add objects of two different types: <code>STUDY (Living allowance) object</code> and <code>STUDY (Non-living allowance) object</code> are of different types."}, {"owner": {"reputation": 1, "user_id": 7601587, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213153588220072/picture?type=large", "display_name": "Richie C Beaton", "link": "https://stackoverflow.com/users/7601587/richie-c-beaton"}, "reply_to_user": {"reputation": 990, "user_id": 4217085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e707345996a53035a3f745308f38b454?s=128&d=identicon&r=PG&f=1", "display_name": "sgrg", "link": "https://stackoverflow.com/users/4217085/sgrg"}, "edited": false, "score": 0, "creation_date": 1490853801, "post_id": 43105417, "comment_id": 73299660, "body": "they are both type: OBJECT. you mean i cant add different objects?"}, {"owner": {"reputation": 990, "user_id": 4217085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e707345996a53035a3f745308f38b454?s=128&d=identicon&r=PG&f=1", "display_name": "sgrg", "link": "https://stackoverflow.com/users/4217085/sgrg"}, "edited": false, "score": 0, "creation_date": 1490883651, "post_id": 43105417, "comment_id": 73320298, "body": "<code>object</code> is the most general dtype that pandas will report. The data itself could be of different/multiple different types. Could you provide a sample of the data?"}, {"owner": {"reputation": 1, "user_id": 7601587, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213153588220072/picture?type=large", "display_name": "Richie C Beaton", "link": "https://stackoverflow.com/users/7601587/richie-c-beaton"}, "reply_to_user": {"reputation": 990, "user_id": 4217085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e707345996a53035a3f745308f38b454?s=128&d=identicon&r=PG&f=1", "display_name": "sgrg", "link": "https://stackoverflow.com/users/4217085/sgrg"}, "edited": false, "score": 0, "creation_date": 1491370604, "post_id": 43105417, "comment_id": 73515627, "body": "Thanks you are right, some non numeric characters had turned the column into a string type."}], "owner": {"reputation": 1, "user_id": 7601587, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213153588220072/picture?type=large", "display_name": "Richie C Beaton", "link": "https://stackoverflow.com/users/7601587/richie-c-beaton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490934508, "creation_date": 1490827006, "last_edit_date": 1490934508, "question_id": 43105417, "link": "https://stackoverflow.com/questions/43105417/adding-two-pandas-columns-getting-typeerror-coercing-to-unicode-need-string-o", "title": "adding two Pandas columns, getting TypeError: coercing to Unicode: need string or buffer, int found", "body": "<p>adding two Pandas columns, getting </p>\n\n<pre><code>TypeError: coercing to Unicode: need string or buffer, int found\n</code></pre>\n\n<p>I have a pandas dataframe, X:</p>\n\n<p>x.dtypes</p>\n\n<pre><code>ID name                                               object\nSTUDY (Living allowance)                              object\nSTUDY (Non-living allowance)                          object\nAge Pension                                           object\n</code></pre>\n\n<hr>\n\n<p>I want to add a totals column:</p>\n\n<pre><code>x['total'] = x['STUDY (Living allowance)']+x['STUDY (Non-living allowance)']\n</code></pre>\n\n<p>i get the following error:</p>\n\n<pre><code>TypeErrorTraceback (most recent call last)\n&lt;ipython-input-110-282f9bf5493b&gt; in &lt;module&gt;()\n----&gt; 1 x['total'] = x['STUDY (Living allowance)']+x['STUDY (Non-living allowance)']\nC:\\Users\\~\\AppData\\Local\\Continuum\\Anaconda2\\lib\\site-packages\\pandas\\core\\ops.pyc in wrapper(left, right, name, na_op)\n    639                     rvalues = algos.take_1d(rvalues, ridx)\n    640 \n--&gt; 641             arr = na_op(lvalues, rvalues)\n    642 \n    643             return left._constructor(wrap_results(arr), index=index,\n\nC:\\Users\\~\\AppData\\Local\\Continuum\\Anaconda2\\lib\\site-packages\\pandas\\core\\ops.pyc in na_op(x, y)\n    586                 result = np.empty(x.size, dtype=dtype)\n    587                 mask = notnull(x) &amp; notnull(y)\n--&gt; 588                 result[mask] = op(x[mask], _values_from_object(y[mask]))\n    589             elif isinstance(x, np.ndarray):\n    590                 result = np.empty(len(x), dtype=x.dtype)\n\nTypeError: coercing to Unicode: need string or buffer, int found\n</code></pre>\n\n<p>i notice that i can add two of the same column with no errors</p>\n\n<pre><code>x['total'] = x['STUDY (Living allowance)']+x['STUDY (Living allowance)']\n</code></pre>\n"}, {"tags": ["python", "argparse"], "comments": [{"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 1, "creation_date": 1490826981, "post_id": 43105386, "comment_id": 73292124, "body": "See <a href=\"http://stackoverflow.com/q/16878315/3901060\">stackoverflow.com/q/16878315/3901060</a> for a way to make a dictionary out of <code>argparse</code>&#39;s <code>Namespace</code> object. Then you can iterate over it."}], "answers": [{"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 1, "last_activity_date": 1490828227, "creation_date": 1490828227, "answer_id": 43105638, "question_id": 43105386, "link": "https://stackoverflow.com/questions/43105386/print-effective-arguments/43105638#43105638", "title": "Print effective arguments", "body": "<p><code>args</code> is a <code>argparse.Namespace</code> object.  That class, or rather its <code>super</code> has a <code>repr</code> method.  That's what you see when you do</p>\n\n<pre><code>print(args)\n</code></pre>\n\n<p>The relevant lines of the <code>repr</code> (which you can find in the <code>argparse.py</code> file) are:</p>\n\n<pre><code>    arg_strings = []\n    for name, value in sorted(self.__dict__.items()):\n        arg_strings.append('%s=%r' % (name, value))\n    return '%s(%s)' % (type_name, ', '.join(arg_strings))\n</code></pre>\n\n<p>If you joined with '\\n' instead of ', ', it would give something close to your version.</p>\n\n<p><code>vars(args)</code> gives the same dictionary as <code>args.__dict__.items()</code>.</p>\n\n<p><code>print(parser.parse_args([]))</code> will show all the defaults, without any user input.  Of course that won't work if there are required inputs.</p>\n"}], "owner": {"reputation": 5032, "user_id": 808044, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/27b5ac1b681853e7b87e811445865d02?s=128&d=identicon&r=PG", "display_name": "m-ric", "link": "https://stackoverflow.com/users/808044/m-ric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 43105638, "answer_count": 1, "score": 0, "last_activity_date": 1490828227, "creation_date": 1490826801, "question_id": 43105386, "link": "https://stackoverflow.com/questions/43105386/print-effective-arguments", "title": "Print effective arguments", "body": "<p>I run a python program with a long argument list (> 20 arguments). Arguments have all a default values (if not overriden by user). At the program's startup, I print the effective argument to have a trace of how the program has been started. Today I print using a dumb routine:</p>\n\n<pre><code>def print_config(args):\n    print(\"Configuration:\")\n    print(\"  shoes:   {}\".format(args.shoes))\n    print(\"  socket:  {}\".format(args.socket))\n    [...]\n</code></pre>\n\n<p>How can I print this using a smart iterator?</p>\n"}, {"tags": ["python", "tensorflow", "tensorboard"], "owner": {"reputation": 4107, "user_id": 209246, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/adb0e3938e80137f0599ac63ac1a56b4?s=128&d=identicon&r=PG", "display_name": "eqzx", "link": "https://stackoverflow.com/users/209246/eqzx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 203, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1490826767, "creation_date": 1490826767, "question_id": 43105374, "link": "https://stackoverflow.com/questions/43105374/tensorflow-flattened-scalar-summary-from-vector", "title": "Tensorflow flattened scalar summary from vector", "body": "<p>Given a variable-length vector placeholder, how can I \"flatten\" this information to use in a scalar summary? The vector is computed outside of a tensorflow graph. A solution could look like an implementation of the function <code>scalars_from_vector</code> as below:</p>\n\n<pre><code>v_foo = tf.placeholder(tf.float64, shape=(None), name=\"vector_of_foo\")\ntf.summary.scalars_from_vector(\"info/foo\", v_foo)\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 7221216, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/47e708705ebea4a9d5295313277e8658?s=128&d=identicon&r=PG&f=1", "display_name": "sg91", "link": "https://stackoverflow.com/users/7221216/sg91"}, "edited": false, "score": 0, "creation_date": 1490862928, "post_id": 43106087, "comment_id": 73304993, "body": "But that creates a list, I would like to ensure that my underlining elements are in the same format and shape as I passed them"}, {"owner": {"reputation": 231, "user_id": 7748236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6af9edaf96597ba5c6a7b9dbe271cb26?s=128&d=identicon&r=PG&f=1", "display_name": "B. Shieh", "link": "https://stackoverflow.com/users/7748236/b-shieh"}, "reply_to_user": {"reputation": 145, "user_id": 7221216, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/47e708705ebea4a9d5295313277e8658?s=128&d=identicon&r=PG&f=1", "display_name": "sg91", "link": "https://stackoverflow.com/users/7221216/sg91"}, "edited": false, "score": 0, "creation_date": 1490908961, "post_id": 43106087, "comment_id": 73335946, "body": "Not sure what you mean. The output of my code is the same as  your example output. In your example output, the dictionary for key &quot;rawdata1&quot; has lists as its items. I just updated my answer to show the output for key &#39;raw_data1&#39; is the same. It is a dictionary where the items are lists same as your example output."}], "tags": [], "owner": {"reputation": 231, "user_id": 7748236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6af9edaf96597ba5c6a7b9dbe271cb26?s=128&d=identicon&r=PG&f=1", "display_name": "B. Shieh", "link": "https://stackoverflow.com/users/7748236/b-shieh"}, "is_accepted": false, "score": 0, "last_activity_date": 1490908683, "last_edit_date": 1490908683, "creation_date": 1490831050, "answer_id": 43106087, "question_id": 43105302, "link": "https://stackoverflow.com/questions/43105302/transposing-individual-elements-of-a-python-dictionary/43106087#43106087", "title": "Transposing individual elements of a Python Dictionary", "body": "<p>Just loop over the top dictionary items. You'll have to play with if you want strict chronological order:</p>\n\n<pre><code>top_dict_new = dict()\nfor key, data_dict in top_dictionary.items():\n    df = pd.melt(pd.DataFrame(data_dict), id_vars = ['Series_Date'])\n    top_dict_new[key] = df.to_dict('list')\n</code></pre>\n\n<p>Edit:\nThis yields:</p>\n\n<pre><code>print top_dict_new['raw_data1']\n{'variable': ['1M', '1M', '1M', '1M', '3M', '3M', '3M', '3M', 'SP', 'SP', 'SP', 'SP'], 'Series_Date': ['2017-03-10', '2017-03-13', '2017-03-14', '2017-03-15', '2017-03-10', '2017-03-13', '2017-03-14', '2017-03-15', '2017-03-10', '2017-03-13', '2017-03-14', '2017-03-15'], 'value': [-7.7999999999999998, 56.0, 56.0, -3.3999999999999999, 24.0, -31.0, 53.0, 5.0, 35.600000000000001, 56.700000000000003, 41.0, 41.0]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 756, "user_id": 5768636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/572024692c500c36ccd8f41574b5e308?s=128&d=identicon&r=PG&f=1", "display_name": "b2002", "link": "https://stackoverflow.com/users/5768636/b2002"}, "is_accepted": false, "score": 0, "last_activity_date": 1490832169, "creation_date": 1490832169, "answer_id": 43106240, "question_id": 43105302, "link": "https://stackoverflow.com/questions/43105302/transposing-individual-elements-of-a-python-dictionary/43106240#43106240", "title": "Transposing individual elements of a Python Dictionary", "body": "<p>Check the \"Series_Date\" output... if you don't want it sorted, remove the sorted method in the function.  I only sorted it to match your specified output.    </p>\n\n<pre><code>def make_dict(dict_in, val_cols):\n    d_out = {}\n    d_out['Value'] = pd.DataFrame(dict_in)[val_cols].values.flatten()\n    d_out['Series_Date'] = sorted(dict_in['Series_Date'] * len(val_cols))\n    d_out['Desc'] = val_cols * len(val_cols)\n    return d_out\n\nnew_dict = {k: make_dict(v, ['SP','1M', '3M']) for k, v in top_dictionary.items()}\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 7221216, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/47e708705ebea4a9d5295313277e8658?s=128&d=identicon&r=PG&f=1", "display_name": "sg91", "link": "https://stackoverflow.com/users/7221216/sg91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 427, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490908683, "creation_date": 1490826446, "question_id": 43105302, "link": "https://stackoverflow.com/questions/43105302/transposing-individual-elements-of-a-python-dictionary", "title": "Transposing individual elements of a Python Dictionary", "body": "<p>I have a python super dictionary that is made of individual dictionaries and currently looks like this:</p>\n\n<pre><code>raw_data1 = {'Series_Date':['2017-03-10','2017-03-13','2017-03-14','2017-03-15'],'SP':[35.6,56.7,41,41],'1M':[-7.8,56,56,-3.4],'3M':[24,-31,53,5]}\nraw_data2 = {'Series_Date':['2017-03-10','2017-03-13','2017-03-14','2017-03-15'],'SP':[35.6,56.7,41,41],'1M':[-7.8,56,56,-3.4],'3M':[24,-31,53,5]}\nraw_data3 = {'Series_Date':['2017-03-10','2017-03-13','2017-03-14','2017-03-15'],'SP':[35.6,56.7,41,41],'1M':[-7.8,56,56,-3.4],'3M':[24,-31,53,5]}\ntop_dictionary = {\n'raw_data1': raw_data1,\n'raw_data2': raw_data2,\n'raw_data3': raw_data3\n}\nprint top_dictionary\n</code></pre>\n\n<p>I would like to transpose the individual dictionaries in my top_dictionary  in a way such that all the value fields get transposed to the Value Column and the date is appended as a row item. The column name of the value field becomes a row for the Description column. </p>\n\n<p>As an example the value in top_dictionary with the key: 'raw_data1' will then look like:</p>\n\n<pre><code>raw_data1 = {'Series_Date':['2017-03-10','2017-03-10','2017-03-10','2017-03-13','2017-03-13','2017-03-13','2017-03-14','2017-03-14','2017-03-14','2017-03-15','2017-03-15','2017-03-15'],'Value':[35.6,-7.8,24,56.7,56,-31,41,56,53,41,-3.4,5],'Desc':['SP','1M','3M','SP','1M','3M','SP','1M','3M','SP','1M','3M']}\n</code></pre>\n\n<p>I know how to do this for each individual dictionary by using the pandas melt function but how do I do this for my top_dictionary such that all elements inside it get transposed accordingly?</p>\n"}, {"tags": ["python", "python-2.7", "python-3.x", "ipython", "buildout"], "answers": [{"tags": [], "owner": {"reputation": 3334, "user_id": 4765864, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/2M2eC.jpg?s=128&g=1", "display_name": "gonczor", "link": "https://stackoverflow.com/users/4765864/gonczor"}, "is_accepted": false, "score": 0, "last_activity_date": 1493013373, "creation_date": 1493013373, "answer_id": 43580708, "question_id": 43105286, "link": "https://stackoverflow.com/questions/43105286/filter-sections-out-when-running-bin-buildout/43580708#43580708", "title": "Filter sections out when running bin/buildout?", "body": "<p>I've run across similar issue while running from PyCharms' tools. I had script under: <code>/home/gonczor/Projects/STX/presence-analyzer/presence-analyzer-wgonczaronek/bin/buildout</code>, python 2.7.12 in venv and I had to change working directory from <code>/home/gonczor/Projects/STX/presence-analyzer/presence-analyzer-wgonczaronek/</code> to <code>/home/gonczor/Projects/STX/presence-analyzer/presence-analyzer-wgonczaronek</code> (so to remove trailing slash). I'm on Linux Mint 18 with 4.4 kernel).</p>\n"}], "owner": {"reputation": 74982, "user_id": 128967, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6ce48656d5e39227a10b37a51754134?s=128&d=identicon&r=PG", "display_name": "Naftuli Kay", "link": "https://stackoverflow.com/users/128967/naftuli-kay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 551, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493013373, "creation_date": 1490826352, "question_id": 43105286, "link": "https://stackoverflow.com/questions/43105286/filter-sections-out-when-running-bin-buildout", "title": "Filter sections out when running bin/buildout?", "body": "<p>I have just reported <a href=\"https://github.com/ipython/ipython/issues/10420\" rel=\"nofollow noreferrer\">this issue upstream to IPython</a> but I believe that a workaround might exist in Buildout if I can filter out that section altogether.</p>\n\n<h3>Travis Builds</h3>\n\n<p>On Travis, the same code builds fine on Python 3.5, but fails on 2.7 and 3.4.</p>\n\n<p><a href=\"https://travis-ci.org/naftulikay/aws-env/jobs/216454877\" rel=\"nofollow noreferrer\">What happens on Python 2.7</a> when I run <code>bin/buildout</code>:</p>\n\n<pre><code>Installing ipython.\nGetting distribution for 'ipython'.\nerror: Setup script exited with error in ipython setup command: Invalid environment marker: sys_platform == \"win32\" and python_version &lt; \"3.6\"\nAn error occurred when trying to install /tmp/tmprLOC_8get_dist/ipython-5.3.0.tar.gz. Look above this message for any errors that were output by easy_install.\nWhile:\n  Installing ipython.\n  Getting distribution for 'ipython'.\nAn internal error occurred due to a bug in either zc.buildout or in a\nrecipe being used:\nTraceback (most recent call last):\n  File \"/home/travis/build/naftulikay/aws-env/eggs/zc.buildout-2.9.2-py2.7.egg/zc/buildout/buildout.py\", line 1982, in main\n    getattr(buildout, command)(args)\n  File \"/home/travis/build/naftulikay/aws-env/eggs/zc.buildout-2.9.2-py2.7.egg/zc/buildout/buildout.py\", line 668, in install\n    installed_files = self[part]._call(recipe.install)\n  File \"/home/travis/build/naftulikay/aws-env/eggs/zc.buildout-2.9.2-py2.7.egg/zc/buildout/buildout.py\", line 1419, in _call\n    return f()\n  File \"/home/travis/build/naftulikay/aws-env/eggs/zc.recipe.egg-2.0.3-py2.7.egg/zc/recipe/egg/egg.py\", line 126, in install\n    reqs, ws = self.working_set()\n  File \"/home/travis/build/naftulikay/aws-env/eggs/zc.recipe.egg-2.0.3-py2.7.egg/zc/recipe/egg/egg.py\", line 84, in working_set\n    allow_hosts=self.allow_hosts)\n  File \"/home/travis/build/naftulikay/aws-env/eggs/zc.buildout-2.9.2-py2.7.egg/zc/buildout/easy_install.py\", line 913, in install\n    return installer.install(specs, working_set)\n  File \"/home/travis/build/naftulikay/aws-env/eggs/zc.buildout-2.9.2-py2.7.egg/zc/buildout/easy_install.py\", line 665, in install\n    for dist in self._get_dist(requirement, ws):\n  File \"/home/travis/build/naftulikay/aws-env/eggs/zc.buildout-2.9.2-py2.7.egg/zc/buildout/easy_install.py\", line 563, in _get_dist\n    dists = [_move_to_eggs_dir_and_compile(dist, self._dest)]\n  File \"/home/travis/build/naftulikay/aws-env/eggs/zc.buildout-2.9.2-py2.7.egg/zc/buildout/easy_install.py\", line 1699, in _move_to_eggs_dir_and_compile\n    [tmp_loc] = glob.glob(os.path.join(tmp_dest, '*'))\nValueError: need more than 0 values to unpack\n</code></pre>\n\n<p><a href=\"https://travis-ci.org/naftulikay/aws-env/jobs/216454879\" rel=\"nofollow noreferrer\">What happens on Python 3.4</a> when I run <code>bin/buildout</code>:</p>\n\n<pre><code>Installing ipython.\nGetting distribution for 'ipython'.\nerror: Setup script exited with error in ipython setup command: Invalid environment marker: python_version &gt;= \"3.4\"\nAn error occurred when trying to install /tmp/tmpos_bscj8get_dist/ipython-5.3.0.tar.gz. Look above this message for any errors that were output by easy_install.\nWhile:\n  Installing ipython.\n  Getting distribution for 'ipython'.\nAn internal error occurred due to a bug in either zc.buildout or in a\nrecipe being used:\nTraceback (most recent call last):\n  File \"/home/travis/build/naftulikay/aws-env/eggs/zc.buildout-2.9.2-py3.4.egg/zc/buildout/buildout.py\", line 1982, in main\n    getattr(buildout, command)(args)\n  File \"/home/travis/build/naftulikay/aws-env/eggs/zc.buildout-2.9.2-py3.4.egg/zc/buildout/buildout.py\", line 668, in install\n    installed_files = self[part]._call(recipe.install)\n  File \"/home/travis/build/naftulikay/aws-env/eggs/zc.buildout-2.9.2-py3.4.egg/zc/buildout/buildout.py\", line 1419, in _call\n    return f()\n  File \"/home/travis/build/naftulikay/aws-env/eggs/zc.recipe.egg-2.0.3-py3.4.egg/zc/recipe/egg/egg.py\", line 126, in install\n    reqs, ws = self.working_set()\n  File \"/home/travis/build/naftulikay/aws-env/eggs/zc.recipe.egg-2.0.3-py3.4.egg/zc/recipe/egg/egg.py\", line 84, in working_set\n    allow_hosts=self.allow_hosts)\n  File \"/home/travis/build/naftulikay/aws-env/eggs/zc.buildout-2.9.2-py3.4.egg/zc/buildout/easy_install.py\", line 913, in install\n    return installer.install(specs, working_set)\n  File \"/home/travis/build/naftulikay/aws-env/eggs/zc.buildout-2.9.2-py3.4.egg/zc/buildout/easy_install.py\", line 665, in install\n    for dist in self._get_dist(requirement, ws):\n  File \"/home/travis/build/naftulikay/aws-env/eggs/zc.buildout-2.9.2-py3.4.egg/zc/buildout/easy_install.py\", line 563, in _get_dist\n    dists = [_move_to_eggs_dir_and_compile(dist, self._dest)]\n  File \"/home/travis/build/naftulikay/aws-env/eggs/zc.buildout-2.9.2-py3.4.egg/zc/buildout/easy_install.py\", line 1699, in _move_to_eggs_dir_and_compile\n    [tmp_loc] = glob.glob(os.path.join(tmp_dest, '*'))\nValueError: need more than 0 values to unpack\n</code></pre>\n\n<h3>Local Development</h3>\n\n<p>On CentOS 7 with Python 2.7.5, it fails in the following fashion:</p>\n\n<pre><code>[vagrant@devel vagrant]$ python --version\nPython 2.7.5\n[vagrant@devel vagrant]$ python bootstrap.py\nez_setup.py is deprecated and when using it setuptools will be pinned to 33.1.1 since it's the last version that supports setuptools self upgrade/installation, check https://github.com/pypa/setuptools/issues/581 for more info; use pip to install setuptools\nDownloading https://pypi.io/packages/source/s/setuptools/setuptools-33.1.1.zip\nExtracting in /tmp/tmpftyX3t\nNow working in /tmp/tmpftyX3t/setuptools-33.1.1\nBuilding a Setuptools egg in /tmp/bootstrap-nc0bVK\nwarning: no files found matching '*' under directory 'setuptools/_vendor'\n/tmp/bootstrap-nc0bVK/setuptools-33.1.1-py2.7.egg\nwarning: no files found matching '*.txt' under directory 'doc'\nCreating directory '/vagrant/develop-eggs'.\nGenerated script '/vagrant/bin/buildout'.\n[vagrant@devel vagrant]$ bin/buildout\nUpgraded:\n  setuptools version 34.3.3;\nrestarting.\nGenerated script '/vagrant/bin/buildout'.\nVersion and requirements information containing setuptools:\n  Base installation request: 'zc.buildout', 'setuptools'\n  Requirement of zc.buildout&gt;=2.9.2: setuptools&gt;=8.0\nWhile:\n  Installing.\n  Checking for upgrades.\nError: There is a version conflict.\nWe already have: setuptools 0.9.8\nbut zc.buildout 2.9.2 requires 'setuptools&gt;=8.0'.\n</code></pre>\n\n<p>On CentOS 7 with Python 3.4, I encounter no issues whatsoever.</p>\n\n<h2>Matrix</h2>\n\n<h3>Travis</h3>\n\n<ul>\n<li>Python 2.7 (fail)</li>\n<li>Python 3.4 (fail)</li>\n<li>Python 3.5 (success)</li>\n</ul>\n\n<h3>Local</h3>\n\n<ul>\n<li>Python 2.7.5 (fail)</li>\n<li>Python 3.4.5 (success)</li>\n</ul>\n\n<hr>\n\n<p>Is there an issue with my buildout configuration? Is there a way for me to configure Travis to skip a given section during <code>bin/buildout</code> execution?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 1, "creation_date": 1490826339, "post_id": 43105256, "comment_id": 73291903, "body": "Do you mean you want a loop in <code>greeting</code> that prints that line for each set of inputs?"}, {"owner": {"reputation": 470, "user_id": 5587480, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/pRrp7.png?s=128&g=1", "display_name": "john c. j.", "link": "https://stackoverflow.com/users/5587480/john-c-j"}, "reply_to_user": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1490826415, "post_id": 43105256, "comment_id": 73291932, "body": "Yes, I think this is exactly what I want."}], "answers": [{"comments": [{"owner": {"reputation": 470, "user_id": 5587480, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/pRrp7.png?s=128&g=1", "display_name": "john c. j.", "link": "https://stackoverflow.com/users/5587480/john-c-j"}, "edited": false, "score": 0, "creation_date": 1490826800, "post_id": 43105300, "comment_id": 73292061, "body": "I&#39;m new in Python, could you elaborate why I get this error: <code>NameError: name &#39;greeting&#39; is not defined</code>?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 470, "user_id": 5587480, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/pRrp7.png?s=128&g=1", "display_name": "john c. j.", "link": "https://stackoverflow.com/users/5587480/john-c-j"}, "edited": false, "score": 0, "creation_date": 1490826889, "post_id": 43105300, "comment_id": 73292092, "body": "Did you include the function definition when you ran the code?"}, {"owner": {"reputation": 470, "user_id": 5587480, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/pRrp7.png?s=128&g=1", "display_name": "john c. j.", "link": "https://stackoverflow.com/users/5587480/john-c-j"}, "edited": false, "score": 0, "creation_date": 1490827293, "post_id": 43105300, "comment_id": 73292227, "body": "Currently I&#39;m trying to understand where it should be)"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 470, "user_id": 5587480, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/pRrp7.png?s=128&g=1", "display_name": "john c. j.", "link": "https://stackoverflow.com/users/5587480/john-c-j"}, "edited": false, "score": 0, "creation_date": 1490827490, "post_id": 43105300, "comment_id": 73292303, "body": "Usually, at the top of the current block of code.  You have to define the function before you can call it.  I edited my answer to demonstrate."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 2, "last_activity_date": 1490827541, "last_edit_date": 1490827541, "creation_date": 1490826429, "answer_id": 43105300, "question_id": 43105256, "link": "https://stackoverflow.com/questions/43105256/call-function-for-paired-arguments/43105300#43105300", "title": "Call function for paired arguments", "body": "<p>You can put this in a loop to handle a list of names and events.  I'd recommend keeping the inner function the same, and firing a sequence of data at it from outside.  Depending on your application, mileage may vary.</p>\n\n<pre><code>def greeting(event, person):\n    print(\"Happy \" + event + \", dear \" + person + \".\")\n\nevent_list = [(\"Birthday\", \"Emily\"),\n              (\"New Year\", \"Mark\")]\nfor event, person in event_list:\n    greeting(event, person)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "edited": false, "score": 0, "creation_date": 1490826536, "post_id": 43105311, "comment_id": 73291979, "body": "Mark is missing."}], "tags": [], "owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "is_accepted": false, "score": 1, "last_activity_date": 1490826591, "last_edit_date": 1490826591, "creation_date": 1490826507, "answer_id": 43105311, "question_id": 43105256, "link": "https://stackoverflow.com/questions/43105256/call-function-for-paired-arguments/43105311#43105311", "title": "Call function for paired arguments", "body": "<p>If you just want to the function to loop over the inputs, this should work:</p>\n\n<pre><code>def greeting(messages):\n    for event, person in messages:\n        print(\"Happy \" + event + \", dear \" + person + \".\")\n\ngreeting([('Birthday', 'Emily'), ('New Year', 'Mark')])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 470, "user_id": 5587480, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/pRrp7.png?s=128&g=1", "display_name": "john c. j.", "link": "https://stackoverflow.com/users/5587480/john-c-j"}, "edited": false, "score": 0, "creation_date": 1490828218, "post_id": 43105331, "comment_id": 73292511, "body": "For the sake of honesty, I should note that answers from FamousJameous and sgrg are identical, except argument name."}, {"owner": {"reputation": 990, "user_id": 4217085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e707345996a53035a3f745308f38b454?s=128&d=identicon&r=PG&f=1", "display_name": "sgrg", "link": "https://stackoverflow.com/users/4217085/sgrg"}, "reply_to_user": {"reputation": 470, "user_id": 5587480, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/pRrp7.png?s=128&g=1", "display_name": "john c. j.", "link": "https://stackoverflow.com/users/5587480/john-c-j"}, "edited": false, "score": 0, "creation_date": 1490828655, "post_id": 43105331, "comment_id": 73292632, "body": "@johnc.j.Yes, looks like I was a minute late hitting the &quot;Submit&quot; button!"}, {"owner": {"reputation": 470, "user_id": 5587480, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/pRrp7.png?s=128&g=1", "display_name": "john c. j.", "link": "https://stackoverflow.com/users/5587480/john-c-j"}, "edited": false, "score": 0, "creation_date": 1490828799, "post_id": 43105331, "comment_id": 73292677, "body": "No problems. It was posted simultaneously, and I leaved my comment just for another readers, to save their time when they would read all the answers and compare them."}], "tags": [], "owner": {"reputation": 990, "user_id": 4217085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e707345996a53035a3f745308f38b454?s=128&d=identicon&r=PG&f=1", "display_name": "sgrg", "link": "https://stackoverflow.com/users/4217085/sgrg"}, "is_accepted": false, "score": 1, "last_activity_date": 1490826583, "creation_date": 1490826583, "answer_id": 43105331, "question_id": 43105256, "link": "https://stackoverflow.com/questions/43105256/call-function-for-paired-arguments/43105331#43105331", "title": "Call function for paired arguments", "body": "<p>If you can modify greeting:</p>\n\n<pre><code>def greeting(info_pairs):\n    for event, person in info_pairs:\n         print(\"Happy \" + event + \", dear \" + person + \".\")\n\ngreeting([(\"Birthday\", \"Emily\"), (\"New Year\", \"Mark\")])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7681276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a3ff3adb5887687f519eda47838abc2?s=128&d=identicon&r=PG&f=1", "display_name": "Ark Khan", "link": "https://stackoverflow.com/users/7681276/ark-khan"}, "is_accepted": false, "score": 1, "last_activity_date": 1490827763, "creation_date": 1490827763, "answer_id": 43105556, "question_id": 43105256, "link": "https://stackoverflow.com/questions/43105256/call-function-for-paired-arguments/43105556#43105556", "title": "Call function for paired arguments", "body": "<p>Either of the options mentioned by other users will work.  It depends on whether you want to put the loop in the function or outside of it:</p>\n\n<pre><code>def greeting(event, person):\n    print(\"Happy \" + event + \", dear \" + person + \".\")\n\nfor event, person in [(\"Birthday\", \"Emily\"),\n              (\"New Year\", \"Mark\")]:\n    greeting(event, person)\n</code></pre>\n"}], "owner": {"reputation": 470, "user_id": 5587480, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/pRrp7.png?s=128&g=1", "display_name": "john c. j.", "link": "https://stackoverflow.com/users/5587480/john-c-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 43105300, "answer_count": 4, "score": 0, "last_activity_date": 1490827763, "creation_date": 1490826205, "question_id": 43105256, "link": "https://stackoverflow.com/questions/43105256/call-function-for-paired-arguments", "title": "Call function for paired arguments", "body": "<p>Here is simple script to generate greeting messages:</p>\n\n<pre><code>def greeting(event, person):\n    print(\"Happy \" + event + \", dear \" + person + \".\")\n\nevent = \"Birthday\"\nperson = \"Emily\"\ngreeting(event, person) # Happy Birtday, dear Emily.\n\nevent = \"New Year\"\nperson = \"Mark\"\ngreeting(event, person) # Happy New Year, dear Mark.\n</code></pre>\n\n<p>Is there way to get the same result, but call the <code>greeting</code> function only once?</p>\n"}, {"tags": ["python", "c++", "pyqt4", "qt-designer"], "answers": [{"tags": [], "owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "is_accepted": true, "score": 0, "last_activity_date": 1490829275, "last_edit_date": 1490829275, "creation_date": 1490826947, "answer_id": 43105410, "question_id": 43105237, "link": "https://stackoverflow.com/questions/43105237/how-to-get-the-objectname-of-a-modified-qspinbox/43105410#43105410", "title": "How to get the objectName of a modified QSpinBox?", "body": "<p>AS the question tagged C++. I am answering in both C++ and pyQt4. I never worked in pyQt4. So please excuse me for syntax.</p>\n\n<p>In the \"<code>valueChanged</code>\" <strong>slot</strong> use <code>QObject::sender()</code> to get the spin box which triggered it.</p>\n\n<p>And then call \"objectName()\".</p>\n\n<pre><code>QObject* obj = sender();\nQString objName = obj-&gt;objectName();\n</code></pre>\n\n<p>May be in python:</p>\n\n<pre><code> sender = QtCore.QObject.sender()\n str = sender.objectName()\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7428172, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DDtNyNJj70c/AAAAAAAAAAI/AAAAAAAABDk/y1_PnCxJDPU/photo.jpg?sz=128", "display_name": "Juan Arroyo Ruiz", "link": "https://stackoverflow.com/users/7428172/juan-arroyo-ruiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 43105410, "answer_count": 1, "score": 0, "last_activity_date": 1490840702, "creation_date": 1490826112, "last_edit_date": 1490840702, "question_id": 43105237, "link": "https://stackoverflow.com/questions/43105237/how-to-get-the-objectname-of-a-modified-qspinbox", "title": "How to get the objectName of a modified QSpinBox?", "body": "<p>I want to keep track of the user modifying the company's forecast in my custom made app.\nI created it using qt designer and PyQt4, and I'm using QSpinBox for the quantities (easy way to control range of values and masking the fields to be number only).\nThe problem I'm having is when I want to get the QSpinBox that triggered my function.\nAt this moment it's being triggered using valueChanged.connect but could be using anything else.\nI can get the int in the spinbox but not the spinbox's name.\nThanks beforehand for the help!</p>\n\n<p><strong>SOLUTION</strong></p>\n\n<p><strong>The QSpinBox element</strong></p>\n\n<pre><code>self.Item = QtGui.QSpinBox(self.centralwidget)  \nself.Item.setObjectName(_fromUtf8(\"ItemName\"))\n</code></pre>\n\n<p><strong>Trigger</strong>  </p>\n\n<pre><code>self.Item.valueChanged.connect(self.foo)\n</code></pre>\n\n<p><strong>The function it calls</strong>  </p>\n\n<pre><code>def foo(self,obj):  \n    sender = MainWindow.sender()  \n    print sender.objectName()\n</code></pre>\n\n<p><strong>In this case \"MainWindow\" is my QtCore.QObject</strong>  </p>\n"}, {"tags": ["python", "jupyter-notebook", "google-cloud-datalab", "openslide"], "answers": [{"comments": [{"owner": {"reputation": 1689, "user_id": 5990514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz535.jpg?s=128&g=1", "display_name": "Anthonios Partheniou", "link": "https://stackoverflow.com/users/5990514/anthonios-partheniou"}, "reply_to_user": {"reputation": 617, "user_id": 6040473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/972b129e574f6de6e361081c8eefe23f?s=128&d=identicon&r=PG&f=1", "display_name": "Ramkumar Hariharan", "link": "https://stackoverflow.com/users/6040473/ramkumar-hariharan"}, "edited": false, "score": 0, "creation_date": 1490906968, "post_id": 43106302, "comment_id": 73334904, "body": "Hi Ramkumar, I&#39;m glad it worked! At your earliest convenience, please mark this answer as accepted."}], "tags": [], "owner": {"reputation": 1689, "user_id": 5990514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz535.jpg?s=128&g=1", "display_name": "Anthonios Partheniou", "link": "https://stackoverflow.com/users/5990514/anthonios-partheniou"}, "is_accepted": true, "score": 1, "last_activity_date": 1490832607, "creation_date": 1490832607, "answer_id": 43106302, "question_id": 43105235, "link": "https://stackoverflow.com/questions/43105235/cannot-install-openslide-python-on-google-datalabs-jupyter-notebook/43106302#43106302", "title": "Cannot install openslide-python on google datalabs Jupyter notebook", "body": "<p>Please can you try the following which includes the <code>-y</code> option? </p>\n\n<pre><code>!apt-get install -y python-openslide\n</code></pre>\n\n<p>Here is the definition of the <code>-y</code> option for <code>apt-get</code> from <a href=\"http://manpages.ubuntu.com/manpages/wily/man8/apt-get.8.html\" rel=\"nofollow noreferrer\">http://manpages.ubuntu.com/manpages/wily/man8/apt-get.8.html</a>.</p>\n\n<blockquote>\n<pre><code>   -y, --yes, --assume-yes\n       Automatic yes to prompts; assume \"yes\" as answer to all prompts and\n       run non-interactively. If an undesirable situation, such as\n       changing a held package, trying to install a unauthenticated\n       package or removing an essential package occurs then apt-get will\n       abort. Configuration Item: APT::Get::Assume-Yes.\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 617, "user_id": 6040473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/972b129e574f6de6e361081c8eefe23f?s=128&d=identicon&r=PG&f=1", "display_name": "Ramkumar Hariharan", "link": "https://stackoverflow.com/users/6040473/ramkumar-hariharan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 43106302, "answer_count": 1, "score": 1, "last_activity_date": 1490832607, "creation_date": 1490826101, "question_id": 43105235, "link": "https://stackoverflow.com/questions/43105235/cannot-install-openslide-python-on-google-datalabs-jupyter-notebook", "title": "Cannot install openslide-python on google datalabs Jupyter notebook", "body": "<p>I am trying to install openslide-python on google datalabs Jupyter notebook using: \n        !apt-get install python-openslide</p>\n\n<p>It runs, until it prints out: </p>\n\n<pre><code>   Need to get 13.0 MB of archives.\n   After this operation, 44.7 MB of additional disk space will be used.\n   Do you want to continue? [Y/n]\n</code></pre>\n\n<p>I type in Y in the next cell, and hit run. It says running... but nothing seems to happen.\nHow do it get to install python-openslide here ?</p>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 1711, "user_id": 1819351, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/49dde658930e7cd10862d0ffae96b503?s=128&d=identicon&r=PG", "display_name": "Nik Haldimann", "link": "https://stackoverflow.com/users/1819351/nik-haldimann"}, "is_accepted": true, "score": 0, "last_activity_date": 1490837103, "last_edit_date": 1495541888, "creation_date": 1490837103, "answer_id": 43106909, "question_id": 43105207, "link": "https://stackoverflow.com/questions/43105207/adapt-translation-method-from-django-to-my-function/43106909#43106909", "title": "Adapt translation method from django to my function", "body": "<p><code>datetime.strftime()</code> is a method from the Python standard library and doesn't know anything about your Django language. You can use the builtin <a href=\"https://docs.djangoproject.com/en/1.10/ref/templates/builtins/#date\" rel=\"nofollow noreferrer\"><code>date</code> template filter</a> which does respect the Django language.</p>\n\n<pre><code>from datetime import datetime\nfrom django.template.defaultfilters import date as datefilter\nfrom django.utils import translation\n\ndef date_customerprofile(language):\n    now_ = datetime.today()\n    if language == 'English':\n        translation.activate('en')\n        return datefilter(now_, 'l, F j, Y')\n    else:\n        translation.activate('fr')\n        return datefilter(now_, 'l, j F Y')\n</code></pre>\n\n<p>Seems to give the results you want:</p>\n\n<pre><code>&gt;&gt;&gt; date_customerprofile('English')\nu'Thursday, March 30, 2017'\n&gt;&gt;&gt; date_customerprofile('French')\nu'jeudi, 30 mars 2017'\n</code></pre>\n\n<p>Some notes:</p>\n\n<ul>\n<li>If this is used in the context of one user who has one language, it would be better to <a href=\"https://stackoverflow.com/questions/2605384/how-to-explicitly-set-django-language-in-django-session\">set the language on the user's sessions</a> rather than switch it around just within this function.</li>\n<li>If you were really serious about localization you would put your custom date formats in <a href=\"https://docs.djangoproject.com/en/1.10/topics/i18n/formatting/#creating-custom-format-files\" rel=\"nofollow noreferrer\">format files</a> but it may be overkill for your use case.</li>\n</ul>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7783682"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 43106909, "answer_count": 1, "score": 0, "last_activity_date": 1490872992, "creation_date": 1490825983, "last_edit_date": 1490872992, "question_id": 43105207, "link": "https://stackoverflow.com/questions/43105207/adapt-translation-method-from-django-to-my-function", "title": "Adapt translation method from django to my function", "body": "<p>I am working on a django project. I have created a function that will display the current date in french or english.</p>\n\n<p>We have to install</p>\n\n<pre><code>sudo locale-gen fr_FR.utf8\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>from datetime import datetime\nimport locale\n\ndef set_locale(locale_):\n    locale.setlocale(category=locale.LC_ALL, locale=locale_)\n\n\ndef date_customerprofile(language):\n    now_ = datetime.today()\n    if language == 'English':\n        set_locale('en_US.utf8')\n        date_ = now_.strftime(\"%A %B %d %Y\")\n    else:\n        set_locale('fr_FR.utf8')\n        date_ = now_.strftime(\"%A %B %d %Y\")\n</code></pre>\n\n<p>I know it works well, but I would like to use the django translation method. There are good informations here : <a href=\"https://docs.djangoproject.com/fr/1.10/topics/i18n/translation/\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/fr/1.10/topics/i18n/translation/</a> and in particular here : <a href=\"https://www.technomancy.org/python/django-i18n-manually-turn-on-a-language/\" rel=\"nofollow noreferrer\">https://www.technomancy.org/python/django-i18n-manually-turn-on-a-language/</a>. </p>\n\n<p>Could anyone be able to adapt the last website method to my function?</p>\n\n<p>I tried something but that doesn't work : </p>\n\n<pre><code>from django.utils import translation\n\ndef date_customerprofile(language):\n    now_ = datetime.today()\n    old_lang = 'en'\n    if language == 'English':\n        import ipdb; ipdb.set_trace()\n        translation.activate('en')\n        date_ = now_.strftime(\"%A, %B %d %Y\")\n    else : \n        translation.activate('fr')\n        date_ = now_.strftime(\"%A, %d %B %Y\")\n        translation.activate(old_lang)\n    return date_ \n</code></pre>\n\n<p>In fact, my main purpose is to create a function which will display the current date of the form <code>Mercredi, 29 mars 2017</code> when I select <code>'French'</code> and the form <code>'Wednesday, March 29, 2017'</code>. Could anyone have an idea how to do that with a django method?</p>\n\n<p>Thanks!</p>\n\n<p><strong>P.S.</strong> Please let me know if the question is unclear.</p>\n"}, {"tags": ["python", "multithreading", "tensorflow"], "answers": [{"comments": [{"owner": {"reputation": 5277, "user_id": 2237916, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/074db60f1ec6161c996e9c08bf71f5bd?s=128&d=identicon&r=PG", "display_name": "silgon", "link": "https://stackoverflow.com/users/2237916/silgon"}, "edited": false, "score": 0, "creation_date": 1527844598, "post_id": 43107623, "comment_id": 88290045, "body": "this is really nice to know, because I couldn&#39;t see a lot of information about the <code>sess.run</code> as thread-safe."}], "tags": [], "owner": {"reputation": 25553, "user_id": 4790871, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-7sCm6Bl96nw/AAAAAAAAAAI/AAAAAAAAAH4/0LGbJtwJZd0/photo.jpg?sz=128", "display_name": "David Parks", "link": "https://stackoverflow.com/users/4790871/david-parks"}, "is_accepted": true, "score": 3, "last_activity_date": 1490842105, "creation_date": 1490842105, "answer_id": 43107623, "question_id": 43105148, "link": "https://stackoverflow.com/questions/43105148/how-are-variables-shared-between-concurrent-session-run-calls-in-tensorfl/43107623#43107623", "title": "How are variables shared between concurrent `session.run(...)` calls in tensorflow?", "body": "<p>After doing some experimentation it appears that each call to <code>sess.run(...)</code> does indeed see a consistent point-in-time snapshot of the variables. </p>\n\n<p>To test this I performed 2 big matrix multiply operations (taking about 10 sec each to complete), and updated a single, dependent, variable before, between, and after. In another thread I grabbed and printed that variable every 1/10th second to see if it picked up the change that occurred between operations while the first thread was still running. It did not, I only saw it's initial and final values. Therefore I conclude that variable changes are only visible outside of a specific call to <code>sess.run(...)</code> at the end of that run.</p>\n"}], "owner": {"reputation": 25553, "user_id": 4790871, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-7sCm6Bl96nw/AAAAAAAAAAI/AAAAAAAAAH4/0LGbJtwJZd0/photo.jpg?sz=128", "display_name": "David Parks", "link": "https://stackoverflow.com/users/4790871/david-parks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 597, "favorite_count": 0, "accepted_answer_id": 43107623, "answer_count": 1, "score": 1, "last_activity_date": 1490842105, "creation_date": 1490825728, "question_id": 43105148, "link": "https://stackoverflow.com/questions/43105148/how-are-variables-shared-between-concurrent-session-run-calls-in-tensorfl", "title": "How are variables shared between concurrent `session.run(...)` calls in tensorflow?", "body": "<p>If you make two concurrent calls to the same session, <code>sess.run(...)</code>, how are variables concurrently accessed in tensorflow? </p>\n\n<p>Will each call see a snapshot of the variables as of the moment <code>run</code> was called, consistent throughout the call? Or will they see dynamic updates to the variables and only guarantee atomic updates to each variable?</p>\n\n<p>I'm considering running test set evaluation on a separate CPU thread and want to verify that it's as trivial as running the inference op on a CPU device in parallel. </p>\n\n<p>I'm having troubles figuring out exactly what guarantees are provided that make sessions \"thread safe\".</p>\n"}, {"tags": ["python", "string", "join"], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 0, "last_activity_date": 1490826009, "creation_date": 1490826009, "answer_id": 43105213, "question_id": 43105138, "link": "https://stackoverflow.com/questions/43105138/unable-to-print-string-concatenated-with-list/43105213#43105213", "title": "Unable to print string concatenated with list", "body": "<p>You should be joining <code>dropped</code>, not looping over it.</p>\n\n<pre><code>dropped_lines = \",\\n\".join(dropped)\nlines = [ \"if net ~ [\", dropped_lines, \"] then {\",  \"    accept;\",   \"} else {\",   \"    reject;\",       \"}\\n\"  ]\nprint \"\\n\".join(lines)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 7323221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c6dc90e0eb9b23df17ab6864976bb95?s=128&d=identicon&r=PG&f=1", "display_name": "Mara55789", "link": "https://stackoverflow.com/users/7323221/mara55789"}, "edited": false, "score": 0, "creation_date": 1490828058, "post_id": 43105239, "comment_id": 73292464, "body": "i tried doing something similar here before but couldnt get it to work,                      <code>lines = [   &quot;if net ~ [&quot;,      str(p),    &quot;] then {&quot;,  &quot;    accept;&quot;,   &quot;} else {&quot;,   &quot;    reject;&quot;,       &quot;}\\n&quot;  ]                                                                                                                  print &quot;\\n&quot;.join(lines)</code>"}], "tags": [], "owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "is_accepted": false, "score": 0, "last_activity_date": 1490826118, "creation_date": 1490826118, "answer_id": 43105239, "question_id": 43105138, "link": "https://stackoverflow.com/questions/43105138/unable-to-print-string-concatenated-with-list/43105239#43105239", "title": "Unable to print string concatenated with list", "body": "<p>Try converting your list to a string with <code>str()</code> and <code>join()</code>. Then merge the one string into your logic statement(string) with <code>.format()</code>.</p>\n\n<p>Viz:</p>\n\n<pre><code>dropped_as_strs = map(str, dropped)        # \"a\", \"b\", \"c\"\ndropped_str = ',\\n'.join(dropped_as_strs)  # \"a,\\nb,\\nc\"\n\nlogic = \"if net ~ [\\n{}\\n] then {{\\n    accept;\\n}} ...\"\n\nresult = logic.format(dropped_str)\n</code></pre>\n\n<p>(Note the need to double '{' and '}' in <code>str.format()</code> calls.)</p>\n"}], "owner": {"reputation": 19, "user_id": 7323221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c6dc90e0eb9b23df17ab6864976bb95?s=128&d=identicon&r=PG&f=1", "display_name": "Mara55789", "link": "https://stackoverflow.com/users/7323221/mara55789"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 43105213, "answer_count": 2, "score": 0, "last_activity_date": 1490826118, "creation_date": 1490825676, "question_id": 43105138, "link": "https://stackoverflow.com/questions/43105138/unable-to-print-string-concatenated-with-list", "title": "Unable to print string concatenated with list", "body": "<p>I have a script that scraps a list of IPs from a router. The final output should look like this:</p>\n\n<pre><code>if net ~ [\n12.5.161.0/24,\n12.9.242.0/24,\n12.11.215.0/24,\n12.17.239.0/24,\n.... etc etc\n216.248.237.0/24,\n216.248.238.0/24,\n216.248.239.0/24,\n216.251.224.0/19,\n216.253.79.0/24\n] then {\n    accept;\n} else {\n    reject;\n}\n</code></pre>\n\n<p>I've gotten to the point where i can get the list of IPs in the right format, ie</p>\n\n<pre><code>12.5.161.0/24,\n12.9.242.0/24,\n12.11.215.0/24,\n12.17.239.0/24,\n.... etc etc\n216.248.237.0/24,\n216.248.238.0/24,\n216.248.239.0/24,\n216.251.224.0/19,\n216.253.79.0/24\n</code></pre>\n\n<p>The prb I run into is stringing together the str at the beginning with all of my IPs as one batch in the middle and the 4 line str at the end. </p>\n\n<p>So far I have:</p>\n\n<pre><code>routes = get_bird_routes(args.s)\nprefixes = parse_routes(routes, args.p)\ndropped = drop_prefixes(prefixes, args.d)\nfor p in dropped:\n\n  lines = [   \"if net ~ [\",      str(p),    \"] then {\",  \"    accept;\",   \"} else {\",   \"    reject;\",       \"}\\n\"  ]\n  print \"\\n\".join(lines)\n</code></pre>\n\n<p>but this gives me </p>\n\n<pre><code>if net ~ [\n199.89.247.0/24\n] then {\n    accept;\n} else {\n    reject;\n}\n\nif net ~ [\n192.149.228.0/24\n] then {\n    accept;\n} else {\n    reject;\n}\n\nif net ~ [\n206.180.165.0/24\n] then {\n    accept;\n} else {\n    reject;\n}\n</code></pre>\n\n<p>instead of all my IPs together and the str at the beg and at the end only. I tried to see what type(p) was (before i set it to str(p)) and it came back unicode. Looking at the document, I didnt get a clear understanding of what I was doing wrong. Newish to python still, any help appreciated!!</p>\n"}, {"tags": ["python", "tensorflow", "tflearn"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 2658044, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5cd67314030b0c432bd759eb1d8c0384?s=128&d=identicon&r=PG", "display_name": "FlorianFP", "link": "https://stackoverflow.com/users/2658044/florianfp"}, "edited": false, "score": 0, "creation_date": 1493027481, "post_id": 43204812, "comment_id": 74218696, "body": "Done but I do not have enough reputation yet for it to appear publicly, sorry about that."}], "tags": [], "owner": {"reputation": 557, "user_id": 5830855, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-xdEtatW-0HA/AAAAAAAAAAI/AAAAAAAAJog/QNXlmvtN4xU/photo.jpg?sz=128", "display_name": "Purvil Bambharolia", "link": "https://stackoverflow.com/users/5830855/purvil-bambharolia"}, "is_accepted": false, "score": 3, "last_activity_date": 1491302205, "creation_date": 1491302205, "answer_id": 43204812, "question_id": 43105031, "link": "https://stackoverflow.com/questions/43105031/tflearn-import-issue-no-module-core-rnn/43204812#43204812", "title": "TFLearn import issue - no module core_rnn", "body": "<p>This is caused due to incompatibilitiy of TFlearn and Tensorflow. They may be of different version. Hence, to resolve the issue, uninstall tensorflow and tflearn and reinstall them using the following code - </p>\n\n<pre><code>pip uninstall tflearn \npip uninstall tensorflow\npip install -I tensorflow==0.12.1\npip install -I tflearn==0.2.1\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 2658044, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5cd67314030b0c432bd759eb1d8c0384?s=128&d=identicon&r=PG", "display_name": "FlorianFP", "link": "https://stackoverflow.com/users/2658044/florianfp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1479, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491302205, "creation_date": 1490825231, "last_edit_date": 1490846488, "question_id": 43105031, "link": "https://stackoverflow.com/questions/43105031/tflearn-import-issue-no-module-core-rnn", "title": "TFLearn import issue - no module core_rnn", "body": "<p>I am testing out the TFLearn library for using TensorFlow but can't import it due to some config issue. I installed it as required in TFLearn tutorial though. Thankful for any help.</p>\n\n<pre><code>&gt;&gt;&gt; import tflearn as tf\n&gt;    import tflearn\n\n  File \"//anaconda/lib/python2.7/site-packages/tflearn/__init__.py\", line 4, in &lt;module&gt;\n    from . import config\n\nImportError: cannot import name config\n</code></pre>\n"}, {"tags": ["python", "ipython", "jupyter-notebook", "jupyter"], "answers": [{"comments": [{"owner": {"reputation": 377, "user_id": 4408280, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e56eac8040766855ac1e067e2d65d853?s=128&d=identicon&r=PG&f=1", "display_name": "danchy", "link": "https://stackoverflow.com/users/4408280/danchy"}, "edited": false, "score": 0, "creation_date": 1490826549, "post_id": 43105136, "comment_id": 73291983, "body": "Thank you very much, this did it."}], "tags": [], "owner": {"reputation": 101, "user_id": 7338587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04b554db633042d4f4f73fac4cdcbea8?s=128&d=identicon&r=PG", "display_name": "Lucas Buhl-Nielsen", "link": "https://stackoverflow.com/users/7338587/lucas-buhl-nielsen"}, "is_accepted": true, "score": 2, "last_activity_date": 1490825974, "last_edit_date": 1490825974, "creation_date": 1490825673, "answer_id": 43105136, "question_id": 43105022, "link": "https://stackoverflow.com/questions/43105022/how-to-choose-which-jupyter-notebook-to-run/43105136#43105136", "title": "How to choose which jupyter notebook to run?", "body": "<p>In terminal try inputting this:</p>\n\n<pre><code>python3 -m pip install ipykernel\n</code></pre>\n\n<p>and this:</p>\n\n<pre><code>python3 -m ipykernel install --user\n</code></pre>\n\n<p>Then restart jupyter and anaconda and you should be able to select the other kernel version.</p>\n"}], "owner": {"reputation": 377, "user_id": 4408280, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e56eac8040766855ac1e067e2d65d853?s=128&d=identicon&r=PG&f=1", "display_name": "danchy", "link": "https://stackoverflow.com/users/4408280/danchy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 0, "accepted_answer_id": 43105136, "answer_count": 1, "score": 0, "last_activity_date": 1490825974, "creation_date": 1490825185, "question_id": 43105022, "link": "https://stackoverflow.com/questions/43105022/how-to-choose-which-jupyter-notebook-to-run", "title": "How to choose which jupyter notebook to run?", "body": "<p>I have installed jupyter notebook for Python 3 (installed through pip) and for Python 2 (installed through anaconda stack which included scipy and scikit-learn and similar scientific tools).</p>\n\n<p>When I run <code>jupyter notebook</code> in console it opens but I can choose only Python 2 kernel.</p>\n"}, {"tags": ["python", "loops", "printing", "while-loop"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 7776811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2498054166e25842ce328d323b6f13f?s=128&d=identicon&r=PG&f=1", "display_name": "Ramon", "link": "https://stackoverflow.com/users/7776811/ramon"}, "edited": false, "score": 0, "creation_date": 1490825826, "post_id": 43105039, "comment_id": 73291724, "body": "Say we have two different banned numbers, 9 and 1. How can we proceed then? If we revert it back to for loop, is there anyway to make it stop printing &quot;Banned number&quot; twice if we type 11, 99 etc? Thank you."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "reply_to_user": {"reputation": 41, "user_id": 7776811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2498054166e25842ce328d323b6f13f?s=128&d=identicon&r=PG&f=1", "display_name": "Ramon", "link": "https://stackoverflow.com/users/7776811/ramon"}, "edited": false, "score": 0, "creation_date": 1490826002, "post_id": 43105039, "comment_id": 73291793, "body": "@Ramon - That would be <code>banned_number not in number and other_number not in number</code>, or the more general <code>not any(n in number for n in banned_numbers)</code>, or <code>set(number) - set(banned_numbers) == set(number)</code>. And there&#39;s no reason for this to use a loop."}], "tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": false, "score": -3, "last_activity_date": 1490825280, "creation_date": 1490825280, "answer_id": 43105039, "question_id": 43105005, "link": "https://stackoverflow.com/questions/43105005/python-while-for-if-statements/43105039#43105039", "title": "Python While/for/if statements", "body": "<p>Take the logic out of the loop, and invert the membership check:</p>\n\n<pre><code>banned_number = \"9\"\nwhile True:\n    number = input(\"number \")\n    if banned_number in number:\n        print (\"Banned number.\")\n    elif number.isalpha():\n        print (\"Sorry, numbers only.\")\n    elif number.isdigit():\n        a = int(number)\n        print(a* 127)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 7776811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2498054166e25842ce328d323b6f13f?s=128&d=identicon&r=PG&f=1", "display_name": "Ramon", "link": "https://stackoverflow.com/users/7776811/ramon"}, "edited": false, "score": 0, "creation_date": 1490828057, "post_id": 43105354, "comment_id": 73292462, "body": "## elif isinstance(number, str):## is failing us. &quot;number&quot; is sourced from input, which is str, hence we can&#39;t get beyond this line? Thank you."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1490828124, "post_id": 43105354, "comment_id": 73292487, "body": "This answer seems to be using Python 2.x, since it expects <code>input()</code> to return a number."}, {"owner": {"reputation": 2011, "user_id": 5288896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/20fk6.jpg?s=128&g=1", "display_name": "Satish Prakash Garg", "link": "https://stackoverflow.com/users/5288896/satish-prakash-garg"}, "edited": false, "score": 1, "creation_date": 1490828814, "post_id": 43105354, "comment_id": 73292679, "body": "Edited to support both Python 2 and Python 3. I was using Python 2 and you seem to be using Python 3."}, {"owner": {"reputation": 41, "user_id": 7776811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2498054166e25842ce328d323b6f13f?s=128&d=identicon&r=PG&f=1", "display_name": "Ramon", "link": "https://stackoverflow.com/users/7776811/ramon"}, "edited": false, "score": 0, "creation_date": 1490830093, "post_id": 43105354, "comment_id": 73293062, "body": "Thank you for your support - works perfect. I will do some exercises on try/except &amp; isinstance to comprehend them fully."}, {"owner": {"reputation": 2011, "user_id": 5288896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/20fk6.jpg?s=128&g=1", "display_name": "Satish Prakash Garg", "link": "https://stackoverflow.com/users/5288896/satish-prakash-garg"}, "edited": false, "score": 0, "creation_date": 1490830186, "post_id": 43105354, "comment_id": 73293092, "body": "You can refer to this link for help - <a href=\"http://python-reference.readthedocs.io/en/latest/docs/functions/isinstance.html\" rel=\"nofollow noreferrer\">python-reference.readthedocs.io/en/latest/docs/functions/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2011, "user_id": 5288896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/20fk6.jpg?s=128&g=1", "display_name": "Satish Prakash Garg", "link": "https://stackoverflow.com/users/5288896/satish-prakash-garg"}, "is_accepted": false, "score": 2, "last_activity_date": 1490828704, "last_edit_date": 1490828704, "creation_date": 1490826646, "answer_id": 43105354, "question_id": 43105005, "link": "https://stackoverflow.com/questions/43105005/python-while-for-if-statements/43105354#43105354", "title": "Python While/for/if statements", "body": "<p>Firstly, the lexical comparison will fetch you incorrect results in terms of numbers as strings.</p>\n\n<p>So, if you are interested in specific types to be checked, you need to compare <code>int</code> with <code>int</code> and <code>str</code> with <code>str</code> to get correct results.</p>\n\n<p>You can use <code>isinstance(a,type)</code> to check for datatypes of values, which is the <code>canonical way</code> of doing this. You can do something like this :</p>\n\n<pre><code>banned_number = [9, 1]\n\nwhile True:\n    input_num = input(\"number \")\n    # This will work for both Python 2.x and Python 3.x\n    try : \n        number = int(input_num)\n    except :\n        number = input_num\n\n    if number in banned_number:\n        print (\"Banned number.\")\n    elif isinstance(number, str):\n        print (\"Sorry, numbers only.\")\n    elif (isinstance(number, int) or isinstance(number, float)):\n        a = int(number)\n        print(a* 127)\n</code></pre>\n\n<p>This will result in :</p>\n\n<pre><code># for input 9\nBanned number. \n\n# for input 'a'\nSorry, numbers only.\n\n# for input 99\n12573\n</code></pre>\n\n<p>Also, the reason why it is printing twice for input <code>'99'</code> because this will be treated as two-character string <code>'9' and '9'</code> and hence was printing <code>Banned number.</code> twice while looping.</p>\n"}], "owner": {"reputation": 41, "user_id": 7776811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2498054166e25842ce328d323b6f13f?s=128&d=identicon&r=PG&f=1", "display_name": "Ramon", "link": "https://stackoverflow.com/users/7776811/ramon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490828704, "creation_date": 1490825115, "last_edit_date": 1490825928, "question_id": 43105005, "link": "https://stackoverflow.com/questions/43105005/python-while-for-if-statements", "title": "Python While/for/if statements", "body": "<p>I wrote a program that multiplies input number by 127. The input doesn't accept alpha as well as number 9. </p>\n\n<p>Besides number 9, it doesn't allow any number that contains 9 e.g. 99, 19 etc. Can we overcome this? </p>\n\n<p>Also, if I type \"99\", it prints <code>\"Banned number\"</code> two times. Is this co-related with the first statement?</p>\n\n<pre><code>banned_number = \"9\"\nwhile True:\n    number = input(\"number \")\n\n    for items in number:\n        if items in banned_number:\n            print (\"Banned number.\")\n        elif number.isalpha():\n            print (\"Sorry, numbers only.\")\n        elif number.isdigit():\n            a = int(number)\n            print(a* 127)\n</code></pre>\n\n<p>I know this program is useless, which it clearly is - I went off track when exercising loops and this is the final shape. Is there any way to make this code shorter? Can we make both elif's obsolete with a simple code?</p>\n\n<p>I would appreciate your patience as I've only started Python last week, thank you.</p>\n"}, {"tags": ["python", "session", "tensorflow", "distributed", "restore"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5827626, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0elQBzG33DI/AAAAAAAAAAI/AAAAAAAAKJI/bvnrnG9xn0Q/photo.jpg?sz=128", "display_name": "Misha E", "link": "https://stackoverflow.com/users/5827626/misha-e"}, "is_accepted": false, "score": -1, "last_activity_date": 1492438251, "creation_date": 1492438251, "answer_id": 43453151, "question_id": 43104992, "link": "https://stackoverflow.com/questions/43104992/how-does-monitoredtrainingsession-work-with-restore-and-testing-mode/43453151#43453151", "title": "How does `MonitoredTrainingSession()` work with &quot;restore&quot; and &quot;testing mode&quot;?", "body": "<ol>\n<li><p>It seems that restoring is handled for you. Int he API docs it says that calling MonitoredTrainingSession returns an instance of MonitoredSession which on creation \"...restores variables if a checkpoint exists...\" </p></li>\n<li><p>Check out <code>tf.contrib.learn.Estimator(..).predict(..)</code> and more specifically <code>tf.contrib.learn.Estimator(..)._infer_model(..)</code> methods <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/learn/python/learn/estimators/estimator.py#L535\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/learn/python/learn/estimators/estimator.py#L850\" rel=\"nofollow noreferrer\">here</a>. They also create a MonitoredSession there.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1306, "user_id": 8353218, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/10155707291229883/picture?type=large", "display_name": "Andreas Forsl&#246;w", "link": "https://stackoverflow.com/users/8353218/andreas-forsl%c3%b6w"}, "is_accepted": false, "score": 4, "last_activity_date": 1528725931, "last_edit_date": 1528725931, "creation_date": 1518128104, "answer_id": 48695668, "question_id": 43104992, "link": "https://stackoverflow.com/questions/43104992/how-does-monitoredtrainingsession-work-with-restore-and-testing-mode/48695668#48695668", "title": "How does `MonitoredTrainingSession()` work with &quot;restore&quot; and &quot;testing mode&quot;?", "body": "<p>Short answer: </p>\n\n<ol>\n<li>You need to pass the global step to the optimizer you pass to mon_sess.run. This makes it possible to both save and retrieve saved checkpoints.</li>\n<li>It is possible to run a training + cross validation session simultaneously through a single MonitoredTrainingSession. Firstly, you need to pass through the training batches and cross validation batches through separate streams of the same graph (I recommend you look up <a href=\"https://www.tensorflow.org/programmers_guide/datasets\" rel=\"nofollow noreferrer\">this guide</a> for info on how to do this). Secondly, you must - to the mon_sess.run() - pass an optimizer for the training stream, as well as a parameter for the loss (/parameter you want to track) of the cross validation stream. If you want to run a test session separately from the training, simply run only the test set through the graph, and run only the test_loss (/other parameters you want to track) through the graph. For more details of how this is done, look below.</li>\n</ol>\n\n<p>Long answer:</p>\n\n<p>I will update my answer as I myself get a better view of what can be done with the tf.train.MonitoredSession (tf.train.MonitoredTrainingSession is simply creating a specialized version of tf.train.MonitoredSession, as can be seen in the <a href=\"https://github.com/tensorflow/tensorflow/blob/r1.5/tensorflow/python/training/monitored_session.py\" rel=\"nofollow noreferrer\">source code</a>). </p>\n\n<p>Following is an example code showing how you can save checkpoints every 5 seconds to './ckpt_dir'. When interrupted, it will restart on its last saved checkpoint:</p>\n\n<pre><code>def train(inputs, labels_onehot, global_step):\n    out = tf.contrib.layers.fully_connected(\n                            inputs,\n                            num_outputs=10,\n                            activation_fn=tf.nn.sigmoid)\n    loss = tf.reduce_mean(\n             tf.reduce_sum(\n                tf.nn.sigmoid_cross_entropy_with_logits(\n                            logits=out,\n                            labels=labels_onehot), axis=1))\n    train_op = opt.minimize(loss, global_step=global_step)\n    return train_op\n\nwith tf.Graph().as_default():\n    global_step = tf.train.get_or_create_global_step()\n    inputs = ...\n    labels_onehot = ...\n    train_op = train(inputs, labels_onehot, global_step)\n\n    with tf.train.MonitoredTrainingSession(\n        checkpoint_dir='./ckpt_dir',\n        save_checkpoint_secs=5,\n        hooks=[ ... ] # Choose your hooks\n    ) as mon_sess:\n        while not mon_sess.should_stop():\n            mon_sess.run(train_op)\n</code></pre>\n\n<p>What is happening in the MonitoredTrainingSession in order to achieve this is actually three things:</p>\n\n<ol>\n<li>The tf.train.MonitoredTrainingSession creates a <a href=\"https://www.tensorflow.org/versions/r1.3/api_docs/python/tf/train/Scaffold\" rel=\"nofollow noreferrer\">tf.train.Scaffold</a> object, which works like a spider in the web; it gathers the pieces you need to train, save and load the model.</li>\n<li>It creates a <a href=\"https://www.tensorflow.org/api_docs/python/tf/train/ChiefSessionCreator\" rel=\"nofollow noreferrer\">tf.train.ChiefSessionCreator</a> object. My knowledge of this one is limited, but from my understanding of it, it is used for when your tf algorithm is spread across multiple servers. My take of it is that it tells the computer running the file that it is the main computer, and that it is here that the checkpoint directory should be saved, and that loggers should log their data here, etc.</li>\n<li>It creates a <a href=\"https://www.tensorflow.org/api_docs/python/tf/train/CheckpointSaverHook\" rel=\"nofollow noreferrer\">tf.train.CheckpointSaverHook</a>, which is used to save the checkpoints.</li>\n</ol>\n\n<p>In order to make it work, the tf.train.CheckpointSaverHook and tf.train.ChiefSessionCreator must be passed the same references to checkpoint directory and scaffold. If the tf.train.MonitoredTrainingSession with its parameters in the example above were to be implemented with the 3 components above, it would look something like this:</p>\n\n<pre><code>checkpoint_dir = './ckpt_dir'\n\nscaffold = tf.train.Scaffold()\nsaverhook = tf.train.CheckpointSaverHook(\n    checkpoint_dir=checkpoint_dir,\n    save_secs=5\n    scaffold=scaffold\n)\nsession_creator = tf.train.ChiefSessionCreator(\n    scaffold=scaffold,\n    checkpoint_dir=checkpoint_dir\n)\n\nwith tf.train.MonitoredSession(\n    session_creator=session_creator,\n    hooks=[saverhook]) as mon_sess:\n        while not mon_sess.should_stop():\n            mon_sess.run(train_op)\n</code></pre>\n\n<p>In order to do a train + cross validation session, you can use tf.train.MonitoredSession.run_step_fn() together with partial, which runs a session call without calling any hooks. The way this looks is that you train your model for <em>n</em> iterations, and then you run your test set, reinitialize your iterators and go back to training your model, etc. Of course, you have to set your variables to reuse=tf.AUTO_REUSE when doing this. The way to do this in code is shown below:</p>\n\n<pre><code>from functools import partial\n\n# Build model\n...\n\nwith tf.variable_scope(..., reuse=tf.AUTO_REUSE):\n    ...\n\n...\n\ndef step_fn(fetches, feed_dict, step_context):\n    return step_context.session.run(fetches=fetches, feed_dict=feed_dict)\n\nwith tf.train.MonitoredTrainingSession(\n                checkpoint_dir=...,\n                save_checkpoint_steps=...,\n                hooks=[...],\n                ...\n                ) as mon_sess:\n\n                # Initialize iterators (assuming tf.Databases are used)\n                mon_sess.run_step_fn(\n                           partial(\n                               step_fn, \n                               [train_it.initializer, \n                                test_it.initializer, \n                                ...\n                               ], \n                               {}\n                            )\n                )\n\n                while not mon_sess.should_stop():\n                    # Train session\n                    for i in range(n):\n                        try:\n                            train_results = mon_sess.run(&lt;train_fetches&gt;)\n                        except Exception as e:\n                            break\n\n                    # Test session\n                    while True:\n                        try:\n                            test_results = mon_sess.run(&lt;test_fetches&gt;)\n                        except Exception as e:\n                            break\n\n                    # Reinitialize parameters\n                    mon_sess.run_step_fn(\n                               partial(\n                                  step_fn, \n                                  [train_it.initializer, \n                                   test_it.initializer, \n                                   ...\n                                  ], \n                                  {}\n                               )\n                    )\n</code></pre>\n\n<p>The partial function simply performs currying (classic function in functional programming) on the step_fn, which is used in mon_sess.run_step_fn(). The entire above code has not been tested, and you might have to reinitialize the train_it before you start the test session, but hopefully it is now clear how one could go about running both a training set and a validation set in the same run. This could furthermore be used together with the <a href=\"https://github.com/tensorflow/tensorboard/tree/master/tensorboard/plugins/custom_scalar\" rel=\"nofollow noreferrer\">custom_scalar tool</a> of tensorboard if you want to plot both the training curve and the test curve in the same plot.</p>\n\n<p>Lastly, this is the best implementation of this functionality that I have been able to make and I personally hope that tensorflow will make implementation of this functionality a lot easier in the future, as it is quite tedious and probably not that efficient. I know that there are tools such as the <a href=\"https://www.tensorflow.org/api_docs/python/tf/estimator/Estimator\" rel=\"nofollow noreferrer\">Estimator</a> that can run the <a href=\"https://www.tensorflow.org/api_docs/python/tf/estimator/train_and_evaluate\" rel=\"nofollow noreferrer\">train_and_evaluate</a> function, but as this rebuilds the graph between each train- and cross validation run, it is very inefficient if you run on only a single computer. I read somewhere that Keras + tf has this functionality, but as I do not use Keras + tf, this is not an option. Anyways, I hope that this can help someone else out there struggling with the same things!</p>\n"}, {"tags": [], "owner": {"reputation": 437, "user_id": 2080475, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f031d39b11ab558c8f7c9cbcca442376?s=128&d=identicon&r=PG", "display_name": "BJC", "link": "https://stackoverflow.com/users/2080475/bjc"}, "is_accepted": false, "score": 0, "last_activity_date": 1526799934, "creation_date": 1526799934, "answer_id": 50432485, "question_id": 43104992, "link": "https://stackoverflow.com/questions/43104992/how-does-monitoredtrainingsession-work-with-restore-and-testing-mode/50432485#50432485", "title": "How does `MonitoredTrainingSession()` work with &quot;restore&quot; and &quot;testing mode&quot;?", "body": "<p>You should be importing the meta graph and then restore the model. \nTake an inspiration from the below snippet, should work for you.</p>\n\n<pre><code>    self.sess = tf.Session()\n    ckpt = tf.train.latest_checkpoint(\"location-of/model\")\n    saver = tf.train.import_meta_graph(ckpt + '.meta', clear_devices=True)\n    saver.restore(self.sess, ckpt)\n</code></pre>\n"}], "owner": {"reputation": 1010, "user_id": 4480756, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1515949422/picture?type=large", "display_name": "Ruofan Kong", "link": "https://stackoverflow.com/users/4480756/ruofan-kong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4286, "favorite_count": 4, "answer_count": 3, "score": 6, "last_activity_date": 1528725931, "creation_date": 1490825078, "question_id": 43104992, "link": "https://stackoverflow.com/questions/43104992/how-does-monitoredtrainingsession-work-with-restore-and-testing-mode", "title": "How does `MonitoredTrainingSession()` work with &quot;restore&quot; and &quot;testing mode&quot;?", "body": "<p>In Tensorflow, we could build and create multiple Tensorflow Sessions using <code>Between-graph Replication</code> for distributed training. <code>MonitoredTrainingSession()</code> coordinates multiple Tensorflow Sessions, and there is an argument <code>checkpoint_dir</code> for <code>MonitoredTrainingSession()</code> to restore the Tensorflow session/graph. Now I have following questions:</p>\n\n<ol>\n<li>We normally use the object of <code>tf.train.Saver()</code> to restore the Tensorflow graphs by <code>saver.restore(...)</code>. But how do we restore them by using <code>MonitoredTrainingSession()</code>?</li>\n<li>Since we run multiple processes and each process builds and creates a Tensorflow Session for training, I wonder if we also have to run multiple processes for testing (or prediction) after training. In other words, how does <code>MonitoredTrainingSession()</code> work with testing (or prediction) mode?</li>\n</ol>\n\n<p>I read Tensorflow Doc, but didn't find the answers for these 2 questions. I really appreciate if anyone has solutions. Thanks!</p>\n"}, {"tags": ["python", "algorithm", "python-2.7", "sorting", "mergesort"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 7, "creation_date": 1490825545, "post_id": 43104990, "comment_id": 73291618, "body": "4 times slower than an highly optimized, builtin C function isn&#39;t slow."}, {"owner": {"reputation": 115, "user_id": 5799680, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/59664edba4a591b1a410a10bb082df15?s=128&d=identicon&r=PG&f=1", "display_name": "iknownothing", "link": "https://stackoverflow.com/users/5799680/iknownothing"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1490826065, "post_id": 43104990, "comment_id": 73291811, "body": "Damn you&#39;re right. I totally forgot for a moment that CPython ISN&#39;T written in Python. Well then, at least here&#39;s some code for anyone that google mergesort python."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 4, "creation_date": 1490826243, "post_id": 43104990, "comment_id": 73291867, "body": "I&#39;m voting to close this question as off-topic because this should go into CodeReview.Stackexchange.com"}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1490827427, "post_id": 43104990, "comment_id": 73292281, "body": "When I run the examples your code isn&#39;t 4 times slower. It&#39;s more like 17x slower (optimized-<code>merge_sort</code>-time: 1.72 s, <code>sorted</code>-time: 94 ms)."}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1490828250, "post_id": 43104990, "comment_id": 73292518, "body": "Also to keep your merge-sort stable shouldn&#39;t you check <code>if right_sorted[0] &lt; left_sorted[0]</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 5799680, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/59664edba4a591b1a410a10bb082df15?s=128&d=identicon&r=PG&f=1", "display_name": "iknownothing", "link": "https://stackoverflow.com/users/5799680/iknownothing"}, "edited": false, "score": 0, "creation_date": 1490826312, "post_id": 43105163, "comment_id": 73291887, "body": "Hey, that actually helped. The if statements were an obvious mistake on my part. The name lookups I wouldn&#39;t think of, but they are nice. I&#39;m now down to about 2,5 times slower than sorted() which is cool. Thanks."}, {"owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "reply_to_user": {"reputation": 115, "user_id": 5799680, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/59664edba4a591b1a410a10bb082df15?s=128&d=identicon&r=PG&f=1", "display_name": "iknownothing", "link": "https://stackoverflow.com/users/5799680/iknownothing"}, "edited": false, "score": 0, "creation_date": 1490826337, "post_id": 43105163, "comment_id": 73291901, "body": "Update the question."}, {"owner": {"reputation": 115, "user_id": 5799680, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/59664edba4a591b1a410a10bb082df15?s=128&d=identicon&r=PG&f=1", "display_name": "iknownothing", "link": "https://stackoverflow.com/users/5799680/iknownothing"}, "edited": false, "score": 0, "creation_date": 1490827101, "post_id": 43105163, "comment_id": 73292157, "body": "It&#39;s not really possible to run out of both at the same time since I&#39;m doing it one by one so I will check the condition after every digit is sorted and if any of the lists is empty I&#39;ll just put the rest at the end. And AFAIK pop(0) on a list is significantly slower than leftpop() on deque."}, {"owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "reply_to_user": {"reputation": 115, "user_id": 5799680, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/59664edba4a591b1a410a10bb082df15?s=128&d=identicon&r=PG&f=1", "display_name": "iknownothing", "link": "https://stackoverflow.com/users/5799680/iknownothing"}, "edited": false, "score": 0, "creation_date": 1490827364, "post_id": 43105163, "comment_id": 73292256, "body": "You&#39;re right. My bad. On the other hand, <code>li += 1</code> might be faster than a call to <code>popleft</code> - it&#39;s worth a try."}], "tags": [], "owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "is_accepted": false, "score": 1, "last_activity_date": 1490826751, "last_edit_date": 1490826751, "creation_date": 1490825787, "answer_id": 43105163, "question_id": 43104990, "link": "https://stackoverflow.com/questions/43104990/mergesort-in-python-too-slow/43105163#43105163", "title": "Mergesort in python - too slow?", "body": "<p>There are some name lookups you could cache. I see you doing <code>.append</code> and <code>.popleft</code> a lot. Try storing those in local variables:</p>\n\n<pre><code>new_append = new.append\nleft_pop = left_sorted.popleft\nright_pop = right_sorted.popleft\n\n ...\n\nnew_append(left_pop())\n\n...\n\nnew_append(right_pop())\n</code></pre>\n\n<p>That should knock out some opcodes.</p>\n\n<p>Also, your <code>if not left_sorted:</code> and right_sorted logic could be moved outside the loop.</p>\n\n<p>You might not need to use a dequeue if you use index variables - left[li] and right[ri] instead of left[0] and right[0] all the time. Destroying the sublists one at a time isn't useful. (I don't know if this will speed things up, however. The dequeue might cache the start-index and do it this way.)</p>\n\n<p>And the if statements at the end should be positive, not negative. It's possible (likely, even) to run out of both at the same time.</p>\n"}, {"tags": [], "owner": {"reputation": 356, "user_id": 4624500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed933b088fbf2b9ace059add70db9602?s=128&d=identicon&r=PG&f=1", "display_name": "user4624500", "link": "https://stackoverflow.com/users/4624500/user4624500"}, "is_accepted": false, "score": 1, "last_activity_date": 1490826979, "creation_date": 1490826979, "answer_id": 43105412, "question_id": 43104990, "link": "https://stackoverflow.com/questions/43104990/mergesort-in-python-too-slow/43105412#43105412", "title": "Mergesort in python - too slow?", "body": "<p>It is slow because you copy the two half (unsorted) lists instead of using indexes.</p>\n\n<pre><code>def merge(liste):\n    def order(start1,middle,stop2):\n        stop1=start2=middle\n        index1=start1\n        index2=start2\n        merge_list=[]\n        while index1&lt;stop1 and index2&lt;stop2:\n            if liste[index1]&lt;liste[index2]:\n                merge_list.append(liste[index1])\n                index1+=1\n            else:\n                merge_list.append(liste[index2])\n                index2+=1\n        if index1&lt;stop1:\n            merge_list.extend(liste[index1:stop1])\n        if index2&lt;stop2:\n            merge_list.extend(liste[index2:stop2])\n        liste[start1:stop2] = merge_list\n\n    def sort(start,stop):\n        middle=(start+stop)//2\n        if start+1&lt;stop:\n            sort(start,middle)\n            sort(middle,stop)\n            order(start,middle,stop)\n\n    sort(0,len(liste))\n    return liste\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 0, "last_activity_date": 1490887283, "last_edit_date": 1490887283, "creation_date": 1490828661, "answer_id": 43105707, "question_id": 43104990, "link": "https://stackoverflow.com/questions/43104990/mergesort-in-python-too-slow/43105707#43105707", "title": "Mergesort in python - too slow?", "body": "<p>I tried to optimize the code as shown below, but it's only a bit faster.</p>\n\n<p>I did a one time \"allocation\" for a working list, then avoided copy back by using two merge sort functions, one that sorts into original list, the other that sorts into working list. </p>\n\n<p>On my system, Intel 3770K 3.5ghz, Windows 7 64 bit, Python 2.7, when sorting 100,000 integers, the \"optimized\" version above takes about 0.468 seconds, while the version below takes about 0.320 seconds. The overhead for interpreting code seems to be the bottle neck. The same algorithm as shown below compiled in C++ takes about .0067 seconds, about 47 times as fast.</p>\n\n<pre><code>import random\nfrom time import time\n\ndef sort(a):\n    b = a                               # \"allocate\" b\n    msa2a(a, b, 0, len(a))              # merge sort a to a\n\ndef msa2a(a, b, low, end):              # merge sort a to a\n    if((end - low) &lt; 2):                # if &lt; 2 elements\n        return                          #   return\n    mid = (low+end)//2                  # set mid point\n    msa2b(a, b, low, mid)               # merge sort left  half to b\n    msa2b(a, b, mid, end)               # merge sort right half to b\n    mrg(b, a, low, mid, end)            # merge halves   from b to a\n\ndef msa2b(a, b, low, end):              # merge sort a to b\n    if((end - low) &lt; 2):                # if &lt; 2 elements\n        b[low] = a[low]                 #   copy 1 element from a to b\n        return                          #   return\n    mid = (low+end)//2                  # set mid point\n    msa2a(a, b, low, mid)               # merge sort left  half to a\n    msa2a(a, b, mid, end)               # merge sort right half to a\n    mrg(a, b, low, mid, end)            # merge halves   from a to b\n\ndef mrg(a, b, ll, rr, ee):              # merge a pair of runs from a to b\n    o = ll                              # o = b[]        index\n    l = ll                              # l = a[] left   index\n    r = rr                              # r = a[] right  index\n    while True:\n        if(a[l] &lt;= a[r]):               # if a[l] &lt;= a[r]\n            b[o] = a[l]                 #   copy a[l]\n            o += 1\n            l += 1\n            if(l &lt; rr):                 #   if not end of left run\n                continue                #     continue (back to while)\n            b[o:ee] = a[r:ee]           #   else copy rest of right run\n            return                      #     and return\n        else:                           # else a[l] &gt; a[r]\n            b[o] = a[r]                 #   copy a[r]\n            o += 1\n            r += 1\n            if(r &lt; ee):                 #   if not end of right run\n                continue                #     continue (back to while)\n            b[o:ee] = a[l:rr]           #   else copy rest of left run\n            return                      #     and return\n\n# test sort\na = [random.randint(0, 1000) for r in xrange(100000)]\ns = time()\nsort(a)\ne = time()\nprint e - s\n\n# check to see if data was sorted\nf = 0\nfor i in range (1 ,len(a)-1):\n    if(a[i-1] &gt; a[i]):\n        f = 1\n        break\nif(f == 0):\n    print(\"sorted\")\nelse:\n    print(\"error\")\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 5799680, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/59664edba4a591b1a410a10bb082df15?s=128&d=identicon&r=PG&f=1", "display_name": "iknownothing", "link": "https://stackoverflow.com/users/5799680/iknownothing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "closed_date": 1490842989, "answer_count": 3, "score": 2, "last_activity_date": 1490887283, "creation_date": 1490825072, "last_edit_date": 1490826489, "question_id": 43104990, "link": "https://stackoverflow.com/questions/43104990/mergesort-in-python-too-slow", "closed_reason": "Not suitable for this site", "title": "Mergesort in python - too slow?", "body": "<p>I'm trying to learn merge sort but I'm not sure I got this quite right. It works and I've tried optimizing this e.g. with deques for leftpop but I still get times that are roughly 4 times slower than the builtin sorted() function. Is this supposed to happen? Or am I missing some obvious bottlenecks?</p>\n\n<pre><code>import random\nfrom time import time\nfrom collections import deque\n\nunsorted = [random.randint(0, 1000) for r in xrange(101101)]\n\n\ndef merge_sort(unsorted_list):\n    length = len(unsorted_list)\n    if length &lt;= 1:\n        return unsorted_list\n\n    left = unsorted_list[:length / 2]\n    right = unsorted_list[length / 2:]\n\n    left_sorted = deque(merge_sort(left))\n    right_sorted = deque(merge_sort(right))\n\n    new = []\n    while left_sorted and right_sorted:\n        if left_sorted[0] &lt; right_sorted[0]:\n            new.append(left_sorted.popleft())\n            if not left_sorted:\n                new += right_sorted\n        else:\n            new.append(right_sorted.popleft())\n            if not right_sorted:\n                new += left_sorted\n    return new\n\n\ns = time()\nprint merge_sort(unsorted)\ne = time()\nprint e - s\n\ns = time()\nprint sorted(unsorted)\ne = time()\nprint e - s\n</code></pre>\n\n<p>Edit: A somewhat optimized version below:</p>\n\n<pre><code>def merge_sort(unsorted_list):\n    length = len(unsorted_list)\n    if length &lt;= 1:\n        return unsorted_list\n\n    left = unsorted_list[:length / 2]\n    right = unsorted_list[length / 2:]\n\n    left_sorted = deque(merge_sort(left))\n    right_sorted = deque(merge_sort(right))\n\n    new = []\n\n    new_append = new.append\n    left_pop = left_sorted.popleft\n    right_pop = right_sorted.popleft\n\n    while left_sorted and right_sorted:\n        if left_sorted[0] &lt; right_sorted[0]:\n            new_append(left_pop())\n        else:\n            new_append(right_pop())\n\n    if not left_sorted:\n        new += right_sorted\n    if not right_sorted:\n        new += left_sorted\n\n    return new\n</code></pre>\n"}, {"tags": ["python", "unicode", "encoding", "flask", "jinja2"], "comments": [{"owner": {"reputation": 2292, "user_id": 6754140, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7bd518bf683e48b801f3005f0ac9f17b?s=128&d=identicon&r=PG&f=1", "display_name": "dizzyf", "link": "https://stackoverflow.com/users/6754140/dizzyf"}, "edited": false, "score": 0, "creation_date": 1490829189, "post_id": 43104978, "comment_id": 73292789, "body": "Is the goal to exclude the special characters or get them to render properly?"}, {"owner": {"reputation": 5091, "user_id": 2714012, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/fRcBY.jpg?s=128&g=1", "display_name": "stamaimer", "link": "https://stackoverflow.com/users/2714012/stamaimer"}, "edited": false, "score": 0, "creation_date": 1490838904, "post_id": 43104978, "comment_id": 73295343, "body": "How about pass a <code>msg</code> of unicode type to the Jinja? From the exception message, Jinja is try to encode your str to unicode."}, {"owner": {"reputation": 11, "user_id": 6679048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05da7a648a6425e93302bcf2c38ba529?s=128&d=identicon&r=PG&f=1", "display_name": "heytimj", "link": "https://stackoverflow.com/users/6679048/heytimj"}, "edited": false, "score": 0, "creation_date": 1490840540, "post_id": 43104978, "comment_id": 73295702, "body": "@dizzyfn The goal is to have the special characters render properly."}, {"owner": {"reputation": 11, "user_id": 6679048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05da7a648a6425e93302bcf2c38ba529?s=128&d=identicon&r=PG&f=1", "display_name": "heytimj", "link": "https://stackoverflow.com/users/6679048/heytimj"}, "reply_to_user": {"reputation": 5091, "user_id": 2714012, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/fRcBY.jpg?s=128&g=1", "display_name": "stamaimer", "link": "https://stackoverflow.com/users/2714012/stamaimer"}, "edited": false, "score": 0, "creation_date": 1490843803, "post_id": 43104978, "comment_id": 73296538, "body": "@stamaimer I changed it to: <code>msg = u&quot;Duplicates detected in import file: {}&quot;.format(&#39;,&#39;.join(duplicate_values))</code> This now renders properly on the page. If you want to submit it as an answer I&#39;m happy to mark it accepted. Thanks a lot"}], "owner": {"reputation": 11, "user_id": 6679048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05da7a648a6425e93302bcf2c38ba529?s=128&d=identicon&r=PG&f=1", "display_name": "heytimj", "link": "https://stackoverflow.com/users/6679048/heytimj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490825026, "creation_date": 1490825026, "question_id": 43104978, "link": "https://stackoverflow.com/questions/43104978/trouble-joining-list-of-unicode-strings-and-passing-them-to-html-via-flask-flash", "title": "Trouble joining list of unicode strings and passing them to html via flask flash()", "body": "<p>I'm trying to join a list of unicode values and pass them to the web page as a flashed message (flask) and am experiencing an error. Relevant Code:</p>\n\n<pre><code>duplicate_values = [u'blitz media\\xe2\\u20ac\\xa8', u'mars technologies ltd.'']\n</code></pre>\n\n<p>The duplicate values are originally pulled from a csv file via unicodecsv module:</p>\n\n<pre><code>import unicodecsv as csv\n\nwith open(file_name, 'rb') as raw_file:\n    csv_read = csv.reader(raw_file, encoding='utf-8')\n    data = [row[0] for row in csv_read]\n</code></pre>\n\n<p>After analyzing the 'data' list and parsing out the duplicate values, I want to join them and flash them to the user when the next page loads:</p>\n\n<pre><code>msg = \"Duplicates detected in import file: {}\".format(','.join(x.encode('utf-8') for x in duplicate_values))\n    flash(msg) \n</code></pre>\n\n<p>The HTML document contains:</p>\n\n<pre><code>{% with msgs = get_flashed_messages() %}\n{% if msgs %}\n{%- for msg in msgs %}\n&lt;div class=\"alert alert-danger\"&gt;\n        &lt;button type=\"button\" class=\"close\" data-dismiss=\"alert\"&gt;\u00d7&lt;/button&gt;\n        {{ msg }}\n&lt;/div&gt;\n{% endfor -%}\n{% endif %}\n{% endwith %}\n</code></pre>\n\n<p>The error:</p>\n\n<pre><code>&gt; File \"/Users/**/Desktop/In Progress/import-validation/templates/upload.html\", line 18, in block \"body\"\n{{ msg }}\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 501: ordinal not in range(128)\n</code></pre>\n\n<p>I've read the flask <a href=\"http://flask.pocoo.org/docs/0.12/unicode/\" rel=\"nofollow noreferrer\">unicode documentation</a> and the <a href=\"https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/\" rel=\"nofollow noreferrer\">external reference</a> mentioned but am still pretty new to handling special characters properly. Do I need to be encoding the values differently before passing them to the flash() function? Or maybe I'm not storing them as proper unicode when they are initially pulled into memory? Thanks for any help. </p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 3, "last_activity_date": 1490825145, "creation_date": 1490825145, "answer_id": 43105012, "question_id": 43104965, "link": "https://stackoverflow.com/questions/43104965/does-groupby-automatically-group-over-all-non-numeric-columns-in-pandas/43105012#43105012", "title": "Does groupby automatically group over all non numeric columns in pandas?", "body": "<p>No!</p>\n\n<p>What is happening is that <code>head</code> is a method on the <code>groupby</code> object and behaves a little differently than <code>pd.DataFrame.head</code>.</p>\n\n<p>What the the <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.core.groupby.GroupBy.head.html\" rel=\"nofollow noreferrer\"><strong><code>groupby</code> version of <code>head</code></strong></a> does is returns the head of each group.</p>\n\n<p>So we can see this more clearly by passing <code>1</code> to the <code>head</code> method and see it return the first row of each subset</p>\n\n<pre><code>df.groupby('continent').head(1)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/JgJo0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JgJo0.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 1797, "user_id": 5228393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/l3lfi.jpg?s=128&g=1", "display_name": "CapturedTree", "link": "https://stackoverflow.com/users/5228393/capturedtree"}, "edited": false, "score": 0, "creation_date": 1490825841, "post_id": 43105126, "comment_id": 73291728, "body": "But indirectly it is still grouping by <code>continent</code> and <code>country</code> when I don&#39;t pass in any parameter to head correct? Since there are multiple rows with the continent as <code>Europe</code>."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 1797, "user_id": 5228393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/l3lfi.jpg?s=128&g=1", "display_name": "CapturedTree", "link": "https://stackoverflow.com/users/5228393/capturedtree"}, "edited": false, "score": 1, "creation_date": 1490826091, "post_id": 43105126, "comment_id": 73291817, "body": "When you do not pass any parameters to <code>head</code>, it uses the default value of <code>n=5</code>. It extracts the first 5 rows from each continent, but then orders them by the original index before displaying the result."}, {"owner": {"reputation": 1797, "user_id": 5228393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/l3lfi.jpg?s=128&g=1", "display_name": "CapturedTree", "link": "https://stackoverflow.com/users/5228393/capturedtree"}, "edited": false, "score": 0, "creation_date": 1490826219, "post_id": 43105126, "comment_id": 73291860, "body": "Oh ok I see now. Thank you."}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 2, "last_activity_date": 1490825650, "creation_date": 1490825650, "answer_id": 43105126, "question_id": 43104965, "link": "https://stackoverflow.com/questions/43104965/does-groupby-automatically-group-over-all-non-numeric-columns-in-pandas/43105126#43105126", "title": "Does groupby automatically group over all non numeric columns in pandas?", "body": "<p><code>drinks.groupby('continent').head([n=5])</code> returns the first <code>n</code> rows from each group, but then <strong>reorders them by the original index</strong>. Try calling <code>drinks.groupby('continent').head(1)</code>, and you will see that only one country from each continent is included in the result.</p>\n"}], "owner": {"reputation": 1797, "user_id": 5228393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/l3lfi.jpg?s=128&g=1", "display_name": "CapturedTree", "link": "https://stackoverflow.com/users/5228393/capturedtree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2068, "favorite_count": 0, "accepted_answer_id": 43105012, "answer_count": 2, "score": 4, "last_activity_date": 1490825650, "creation_date": 1490824967, "question_id": 43104965, "link": "https://stackoverflow.com/questions/43104965/does-groupby-automatically-group-over-all-non-numeric-columns-in-pandas", "title": "Does groupby automatically group over all non numeric columns in pandas?", "body": "<p>I have a sample of a dataset below (only showing the first couple rows but there are 193 rows):</p>\n\n<pre><code>country,beer_servings,spirit_servings,wine_servings,total_litres_of_pure_alcohol,continent\nAfghanistan,0,0,0,0.0,Asia\nAlbania,89,132,54,4.9,Europe\nAlgeria,25,0,14,0.7,Africa\nAndorra,245,138,312,12.4,Europe\nAngola,217,57,45,5.9,Africa\nAntigua &amp; Barbuda,102,128,45,4.9,North America\n...\n</code></pre>\n\n<p>When I run this: <code>drinks.groupby('continent').head()</code></p>\n\n<p>I get back a dataframe with 30 rows. But in those 30 rows I still have duplicate names for the <code>continent</code>. For example in the image below you can see that <code>Europe</code> is repeated two times (at rows 1 and 3):</p>\n\n<p><a href=\"https://i.stack.imgur.com/VISVL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VISVL.png\" alt=\"enter image description here\"></a> </p>\n\n<p>I am not able to understand why I am still having two rows with the same continent when I grouped by continent originally?</p>\n\n<p>In this case is the <code>groupby</code> operation also grouping by the <code>country</code> even though I never specified it in the <code>groupby</code> function? Since I know in SQL you are supposed to use an aggregate function like <code>max</code>, <code>min</code>, <code>sum</code>, etc. But in this case I don't have to pass in an aggregate function and I get the result above. </p>\n"}, {"tags": ["python", "file", "binary", "bit"], "answers": [{"tags": [], "owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "is_accepted": false, "score": 0, "last_activity_date": 1490825181, "creation_date": 1490825181, "answer_id": 43105021, "question_id": 43104950, "link": "https://stackoverflow.com/questions/43104950/how-do-i-return-k-amount-of-bits-a-binary-strings-in-a-file/43105021#43105021", "title": "How do I return (k) amount of bits a binary strings in a file?", "body": "<p>In this code:</p>\n\n<pre><code>    stringy = \"\"\n    for i in range(int(userInput)): \n        RandoNumber=int(random.random()*2)\n        stringy=stringy+str(RandoNumber) \n        outputFile.write(str(stringy) + \"\\n\")\n        counter = counter +1\n</code></pre>\n\n<p>You are looping up to userInput, but printing every time. (In this case, <code>outputFile.write</code>ing every time.)</p>\n\n<p>You need to wait until your <code>for</code> loop finishes before writing a value out to the outputFile. That way, your <code>stringy</code> variable will have the correct length.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7788495, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gFC7OtG8idg/AAAAAAAAAAI/AAAAAAAAAEs/zAIEPJ4yPKs/photo.jpg?sz=128", "display_name": "Sinopia", "link": "https://stackoverflow.com/users/7788495/sinopia"}, "edited": false, "score": 0, "creation_date": 1490845034, "post_id": 43105076, "comment_id": 73296814, "body": "Thanks so much! I knew it was a simple fix, but I couldn&#39;t figure out."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1490825442, "creation_date": 1490825442, "answer_id": 43105076, "question_id": 43104950, "link": "https://stackoverflow.com/questions/43104950/how-do-i-return-k-amount-of-bits-a-binary-strings-in-a-file/43105076#43105076", "title": "How do I return (k) amount of bits a binary strings in a file?", "body": "<p>You mishandled your loop indices.  Your inner loop writes every addition to the string.  Your outer loop runs in parallel with the inner loop; <strong>counter</strong> is incremented every time through the inner loop.  Try this instead.  I simplified a few lines for testing.</p>\n\n<pre><code>userInput = 4\nanotherinput = 4\nfor counter in range(int(anotherinput)):\n    stringy = \"\"\n    for i in range(int(userInput)): \n        RandoNumber=int(random.random()*2)\n        stringy=stringy+str(RandoNumber) \n    print(str(stringy) + \"\\n\")\n# outputFile.close()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7788495, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gFC7OtG8idg/AAAAAAAAAAI/AAAAAAAAAEs/zAIEPJ4yPKs/photo.jpg?sz=128", "display_name": "Sinopia", "link": "https://stackoverflow.com/users/7788495/sinopia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490825442, "creation_date": 1490824905, "question_id": 43104950, "link": "https://stackoverflow.com/questions/43104950/how-do-i-return-k-amount-of-bits-a-binary-strings-in-a-file", "title": "How do I return (k) amount of bits a binary strings in a file?", "body": "<p>Essentially, if I were to type in 4 for n and 4 for k, it should return 4 lines of a 4 bit binary string in a file. </p>\n\n<p>Instead, it returns four lines of binary, but in ascending order of bits. (So first line has one bit, second line has two, third line has three, and so on.)</p>\n\n<p>Here is my code:</p>\n\n<pre><code>import random\ndef makeStrings():\n    fileName = str(input(\"file:\"))\n    outputFile = open(fileName, \"w\")\n    userInput = str(input(\"k:\"))\n    anotherinput = str(input(\"n:\"))\n    counter = 0\n    while (counter &lt; int(anotherinput)):\n        stringy = \"\"\n        for i in range(int(userInput)): \n            RandoNumber=int(random.random()*2)\n            stringy=stringy+str(RandoNumber) \n            outputFile.write(str(stringy) + \"\\n\")\n            counter = counter +1\n    outputFile.close()\n</code></pre>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["python", "django", "django-treebeard"], "answers": [{"tags": [], "owner": {"reputation": 6617, "user_id": 3794660, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HlWq1.jpg?s=128&g=1", "display_name": "fabio.sussetto", "link": "https://stackoverflow.com/users/3794660/fabio-sussetto"}, "is_accepted": true, "score": 2, "last_activity_date": 1490826801, "creation_date": 1490826801, "answer_id": 43105384, "question_id": 43104944, "link": "https://stackoverflow.com/questions/43104944/how-do-i-use-django-treebeard-to-build-a-sitemap/43105384#43105384", "title": "How do I use django-treebeard to build a sitemap?", "body": "<p>You can use the <code>get_annotated_list</code> node method to get a data structure you can iterate on in the template:</p>\n\n<p><a href=\"http://django-treebeard.readthedocs.io/en/stable/api.html#treebeard.models.Node.get_annotated_list\" rel=\"nofollow noreferrer\">http://django-treebeard.readthedocs.io/en/stable/api.html#treebeard.models.Node.get_annotated_list</a></p>\n\n<p>There's also an example there that shows you exactly how to do it:</p>\n\n<pre><code>{% for item, info in annotated_list %}\n    {% if info.open %}\n        &lt;ul&gt;&lt;li&gt;\n    {% else %}\n        &lt;/li&gt;&lt;li&gt;\n    {% endif %}    \n\n    {{ item }}    \n\n    {% for close in info.close %}\n        &lt;/li&gt;&lt;/ul&gt;\n    {% endfor %}\n{% endfor %}\n</code></pre>\n\n<p>Have a look at the <code>dump_bulk</code> method which returns a nested data structure too:</p>\n\n<p><a href=\"http://django-treebeard.readthedocs.io/en/stable/api.html#treebeard.models.Node.dump_bulk\" rel=\"nofollow noreferrer\">http://django-treebeard.readthedocs.io/en/stable/api.html#treebeard.models.Node.dump_bulk</a></p>\n\n<p>Hope it's helpful.</p>\n"}], "owner": {"reputation": 1348, "user_id": 6735573, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/026a164e58778bbe4f8c778cb1980e14?s=128&d=identicon&r=PG&f=1", "display_name": "DeA", "link": "https://stackoverflow.com/users/6735573/dea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1102, "favorite_count": 0, "accepted_answer_id": 43105384, "answer_count": 1, "score": 1, "last_activity_date": 1490826801, "creation_date": 1490824858, "question_id": 43104944, "link": "https://stackoverflow.com/questions/43104944/how-do-i-use-django-treebeard-to-build-a-sitemap", "title": "How do I use django-treebeard to build a sitemap?", "body": "<p>I have setup a django-treebeard model that has child nodes and what not. How do I now display this in my template? This is what I have so far.</p>\n\n<p>My Models:</p>\n\n<pre><code>class SiteMapEntry(MP_Node):\n    name = models.CharField(max_length=100, null=False, blank=False)\n    url = models.CharField(max_length=1000, null=False, blank=False)\n\n    node_order_by = ['name']\n\n    class Meta:\n        verbose_name = \"Sitemap Entry\"\n        verbose_name_plural = \"Sitemap Entries\"\n\n    def __unicode__(self):\n        return ('%s - %s' % (self.name, self.url))\n</code></pre>\n\n<p>My Views:</p>\n\n<pre><code>from django.views.generic import ListView\n    class SiteMap(ListView):\n        model = SiteMapEntry\n        template_name = 'sitemaps.html'\n</code></pre>\n\n<p>My Template:</p>\n\n<pre><code>{% block content %}\n    &lt;h1&gt;Sitemap&lt;/h1&gt;\n\n    &lt;br /&gt;&lt;br /&gt;\n\n    {% for url in object_list %}\n&lt;p&gt;{{ url.name }}&lt;/p&gt;\n&lt;p&gt;{{ url.url }}&lt;/p&gt;\n    {% endfor %}\n\n{% endblock content %}\n</code></pre>\n\n<p>What this is doing right now, obviously is just listing the nodes and its children without any indenting. How do I list it like a tree in my template?</p>\n"}, {"tags": ["python", "django", "python-3.x"], "comments": [{"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1490824986, "post_id": 43104933, "comment_id": 73291404, "body": "Make sure you always use the same kind of indenting. Putting enough spaces to match the width of a tab in your editor is not the same and will cause hard to track problems."}, {"owner": {"reputation": 842, "user_id": 7493136, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/WMpQP.jpg?s=128&g=1", "display_name": "Douglas da Dias Silva", "link": "https://stackoverflow.com/users/7493136/douglas-da-dias-silva"}, "reply_to_user": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1490825173, "post_id": 43104933, "comment_id": 73291468, "body": "But I using the same kind of indenting here, right?I just put the bar on the &quot;if&quot; side and hit enter, what did I do wrong?"}, {"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1490825274, "post_id": 43104933, "comment_id": 73291507, "body": "That last exception indicates you are using tabs some places and spaces other places. You should probably just always use 4 spaces to indent a line as suggested by PEP8."}, {"owner": {"reputation": 842, "user_id": 7493136, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/WMpQP.jpg?s=128&g=1", "display_name": "Douglas da Dias Silva", "link": "https://stackoverflow.com/users/7493136/douglas-da-dias-silva"}, "reply_to_user": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1490825361, "post_id": 43104933, "comment_id": 73291539, "body": "I just put the bar on the &quot;if&quot; side and hit enter, what did I do wrong? And I always use &quot;tab&quot; for to don&#39;t have problems..."}, {"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1490825658, "post_id": 43104933, "comment_id": 73291659, "body": "If you really do always use tab, I don&#39;t know what the problem might be. That last exception clearly says there are tabs and spaces mixed."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1490825886, "post_id": 43104933, "comment_id": 73291746, "body": "I see mixed tabs and spaces in your post. Turn on &quot;show whitespace&quot; in your editor, and you&#39;ll definitely see mixed tabs and spaces. If your editor doesn&#39;t have a &quot;show whitespace&quot; feature, get a better editor."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1490825906, "post_id": 43104933, "comment_id": 73291755, "body": "Also, what the heck is &quot;idled&quot; supposed to mean here?"}, {"owner": {"reputation": 842, "user_id": 7493136, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/WMpQP.jpg?s=128&g=1", "display_name": "Douglas da Dias Silva", "link": "https://stackoverflow.com/users/7493136/douglas-da-dias-silva"}, "edited": false, "score": 0, "creation_date": 1490825952, "post_id": 43104933, "comment_id": 73291773, "body": "is identation (google translate sorry) Identation"}, {"owner": {"reputation": 842, "user_id": 7493136, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/WMpQP.jpg?s=128&g=1", "display_name": "Douglas da Dias Silva", "link": "https://stackoverflow.com/users/7493136/douglas-da-dias-silva"}, "edited": false, "score": 0, "creation_date": 1490826040, "post_id": 43104933, "comment_id": 73291802, "body": "You can see spaces, but I DONT USE SPACE to ident my codes, I always use just the &quot;tab&quot; exactly for avoid this problems..."}, {"owner": {"reputation": 842, "user_id": 7493136, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/WMpQP.jpg?s=128&g=1", "display_name": "Douglas da Dias Silva", "link": "https://stackoverflow.com/users/7493136/douglas-da-dias-silva"}, "edited": false, "score": 0, "creation_date": 1490826286, "post_id": 43104933, "comment_id": 73291880, "body": "As I said above: I just put the mark bar ( | ) aside of the line of &quot;if&quot; and press enter, the editor idented automatically"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1490826600, "post_id": 43104933, "comment_id": 73292001, "body": "Well, you have both spaces and tabs. Mostly spaces, actually. If you don&#39;t know how they got there, figure it out."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1490826857, "post_id": 43104933, "comment_id": 73292081, "body": "I see you&#39;ve started angrily denying the problem. You&#39;ll solve your bugs much faster once you get out of that habit."}, {"owner": {"reputation": 842, "user_id": 7493136, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/WMpQP.jpg?s=128&g=1", "display_name": "Douglas da Dias Silva", "link": "https://stackoverflow.com/users/7493136/douglas-da-dias-silva"}, "edited": false, "score": 0, "creation_date": 1490827055, "post_id": 43104933, "comment_id": 73292146, "body": "I dont angrily dude, sorry if I was thick or something, but, I NEVER use space, just to avoid this kind of problem, I have the &quot;tab&quot; as my personal programming standard, you understand?"}], "answers": [{"comments": [{"owner": {"reputation": 842, "user_id": 7493136, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/WMpQP.jpg?s=128&g=1", "display_name": "Douglas da Dias Silva", "link": "https://stackoverflow.com/users/7493136/douglas-da-dias-silva"}, "edited": false, "score": 0, "creation_date": 1490825870, "post_id": 43105038, "comment_id": 73291737, "body": "Well friend, I understanding and know all your tell me, but I idled right, take a look in my code"}, {"owner": {"reputation": 3271, "user_id": 7607701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-0eLxeTB_SdQ/AAAAAAAAAAI/AAAAAAAAABg/XZT1oaa0wqA/photo.jpg?sz=128", "display_name": "Aaron N. Brock", "link": "https://stackoverflow.com/users/7607701/aaron-n-brock"}, "reply_to_user": {"reputation": 842, "user_id": 7493136, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/WMpQP.jpg?s=128&g=1", "display_name": "Douglas da Dias Silva", "link": "https://stackoverflow.com/users/7493136/douglas-da-dias-silva"}, "edited": false, "score": 2, "creation_date": 1490826055, "post_id": 43105038, "comment_id": 73291809, "body": "Hum, it seems like it&#39;s a tabs vs spaces problem or something in that case.  Could you edit your question to include the code that causes the error?"}, {"owner": {"reputation": 3271, "user_id": 7607701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-0eLxeTB_SdQ/AAAAAAAAAAI/AAAAAAAAABg/XZT1oaa0wqA/photo.jpg?sz=128", "display_name": "Aaron N. Brock", "link": "https://stackoverflow.com/users/7607701/aaron-n-brock"}, "reply_to_user": {"reputation": 842, "user_id": 7493136, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/WMpQP.jpg?s=128&g=1", "display_name": "Douglas da Dias Silva", "link": "https://stackoverflow.com/users/7493136/douglas-da-dias-silva"}, "edited": false, "score": 0, "creation_date": 1490827790, "post_id": 43105038, "comment_id": 73292387, "body": "My guess would be there is some off character there.  Try deleting the entire line and copying the `        form2 = EvalForm(request.POST)` line above and see if that works."}], "tags": [], "owner": {"reputation": 3271, "user_id": 7607701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-0eLxeTB_SdQ/AAAAAAAAAAI/AAAAAAAAABg/XZT1oaa0wqA/photo.jpg?sz=128", "display_name": "Aaron N. Brock", "link": "https://stackoverflow.com/users/7607701/aaron-n-brock"}, "is_accepted": false, "score": 2, "last_activity_date": 1490825274, "creation_date": 1490825274, "answer_id": 43105038, "question_id": 43104933, "link": "https://stackoverflow.com/questions/43104933/newbie-idled-python-def/43105038#43105038", "title": "newbie: idled python def", "body": "<p>It's all about indentation!  Python determines what where the code is based on its indentation (rather than <code>{}</code> like most other languages).</p>\n\n<p>Here's an example, this is valid code:</p>\n\n<pre><code>if 1 == 1:\n    print('If passed!')\n</code></pre>\n\n<p>Once the <code>if</code> statement determines that <code>1 == 1</code> is <code>True</code> it looks for the indentation on the next line and runs it!</p>\n\n<p>Here's another example, this is invalid code:</p>\n\n<pre><code>if 1 == 1:\nprint('If passed!')\n</code></pre>\n\n<p>Once the <code>if</code> statement determines that <code>1 == 1</code> is <code>True</code> it looks for the indentation on the next line, however, it doesn't find the indentation, so it doesn't know what to do, so it throws an <code>IndentationError</code></p>\n\n<p>In your code, you have this, and it works!</p>\n\n<pre><code>if request.method == \"POST\":\n    form2 = EvalForm(request.POST)\n</code></pre>\n\n<p>My guess is that when you add the <code>cont = 3</code> you add it like this</p>\n\n<pre><code>if request.method == \"POST\":\ncont = 3\n    form2 = EvalForm(request.POST)\n</code></pre>\n\n<p>So when python gets passed the <code>if</code> statement it looks for the next indentation, but there is none, so it throws an <code>IndentationError</code>.</p>\n\n<p>I hope this helps you understand what's going on!</p>\n"}, {"comments": [{"owner": {"reputation": 842, "user_id": 7493136, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/WMpQP.jpg?s=128&g=1", "display_name": "Douglas da Dias Silva", "link": "https://stackoverflow.com/users/7493136/douglas-da-dias-silva"}, "edited": false, "score": 0, "creation_date": 1490827327, "post_id": 43105254, "comment_id": 73292237, "body": "I understanding, thanks for the tip, but I use sublime text, you know if this editor have tool to check this?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 842, "user_id": 7493136, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/WMpQP.jpg?s=128&g=1", "display_name": "Douglas da Dias Silva", "link": "https://stackoverflow.com/users/7493136/douglas-da-dias-silva"}, "edited": false, "score": 1, "creation_date": 1490827948, "post_id": 43105254, "comment_id": 73292432, "body": "@DouglasdaSilva: <a href=\"http://stackoverflow.com/questions/10153998/sublime-text-2-view-whitespace-characters\" title=\"sublime text 2 view whitespace characters\">stackoverflow.com/questions/10153998/&hellip;</a>"}, {"owner": {"reputation": 842, "user_id": 7493136, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/WMpQP.jpg?s=128&g=1", "display_name": "Douglas da Dias Silva", "link": "https://stackoverflow.com/users/7493136/douglas-da-dias-silva"}, "edited": false, "score": 0, "creation_date": 1490829230, "post_id": 43105254, "comment_id": 73292802, "body": "HELL YEAH, all done now, thank you very much for your attention and help,brother!"}, {"owner": {"reputation": 126, "user_id": 4099538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d56d7b2326857e7c03aa98afb9e532a?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Srivastava", "link": "https://stackoverflow.com/users/4099538/ashish-srivastava"}, "reply_to_user": {"reputation": 842, "user_id": 7493136, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/WMpQP.jpg?s=128&g=1", "display_name": "Douglas da Dias Silva", "link": "https://stackoverflow.com/users/7493136/douglas-da-dias-silva"}, "edited": false, "score": 1, "creation_date": 1490829689, "post_id": 43105254, "comment_id": 73292935, "body": "@DouglasdaSilva I&#39;m glad that I was able to help."}], "tags": [], "owner": {"reputation": 126, "user_id": 4099538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d56d7b2326857e7c03aa98afb9e532a?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Srivastava", "link": "https://stackoverflow.com/users/4099538/ashish-srivastava"}, "is_accepted": true, "score": 0, "last_activity_date": 1490826181, "creation_date": 1490826181, "answer_id": 43105254, "question_id": 43104933, "link": "https://stackoverflow.com/questions/43104933/newbie-idled-python-def/43105254#43105254", "title": "newbie: idled python def", "body": "<p>Normally, this happens because sometimes tabs != spaces. This also depends on type of editor a person is using.</p>\n\n<p>A tab could be a different number of columns depending on your environment, but a space is always one column.</p>\n\n<p>Spaces are the actual lowest-common denominator in punctuation.Many decent text editor has a \"replace tabs with spaces\" and this makes easier for programmers to just hit TAB key and get the desired indentation.</p>\n\n<p>If you ever face such an error, try using spaces, because you can't go wrong with spaces, you might go wrong with tabs. </p>\n\n<p>Latest editors like PyCharm follows PEP-8 and according to <a href=\"http://www.python.org/dev/peps/pep-0008/#tabs-or-spaces\" rel=\"nofollow noreferrer\">PEP-8</a>, it's recommended to use spaces only for indentation in Python programs.</p>\n"}], "owner": {"reputation": 842, "user_id": 7493136, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/WMpQP.jpg?s=128&g=1", "display_name": "Douglas da Dias Silva", "link": "https://stackoverflow.com/users/7493136/douglas-da-dias-silva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 43105254, "answer_count": 2, "score": 0, "last_activity_date": 1490826430, "creation_date": 1490824787, "last_edit_date": 1490826430, "question_id": 43104933, "link": "https://stackoverflow.com/questions/43104933/newbie-idled-python-def", "title": "newbie: idled python def", "body": "<p>I'm feeling a rabbit posting this question, but I don't continue because this:\nWhat's is wrong with this stretch of my code:</p>\n\n<p>When I put something after the \"if\" I receive:</p>\n\n<blockquote>\n  <p>IndentationError: unindent does not match any outer indentation level</p>\n</blockquote>\n\n<p>For example, if I put \"cont =3\" after the \"if\" and before \"post = form2.save(commit=False)\" I receive:</p>\n\n<blockquote>\n  <p>File\n  \"/home/douglas/Documentos/Django/my-second-blog/site_/app/views.py\",\n  line 59\n      post = form2.save(commit=False)\n                                    ^ IndentationError: unindent does not match any outer indentation level</p>\n</blockquote>\n\n<p>If I put the same expression but before of \"post = form2.save(commit=False)\" I receive:</p>\n\n<blockquote>\n  <p>File\n  \"/home/douglas/Documentos/Django/my-second-blog/site_/app/views.py\",\n  line 59\n      cont = 3\n             ^ TabError: inconsistent use of tabs and spaces in indentation</p>\n</blockquote>\n\n<p>the code:</p>\n\n<pre><code>def evaluation(request):\n    # form2 initialization\n    list_evaluation = Evaluation.objects.all()\n    form2 = EvalForm()\n    cont = 0\n\n    if request.method == \"POST\":\n        form2 = EvalForm(request.POST)\n        if form2.is_valid() == True:\n            cont = 3\n            post = form2.save(commit=False)\n            post.save()\n            return redirect('canditate_list')\n    else:\n        form2 = EvalForm()\n    return render(request, 'app/evaluation.html', {'criterions': form2,})\n</code></pre>\n\n<p>[EDIT]:\nGuys, I don't indented wrong because I just press \"Enter\" before I type \"True:\",There's no way I could have mistaken it if the editor did this automatically </p>\n\n<p>[EDIT2]:\nI NEVER use space to indent my codes precisely avoid this problems, I ALWAYS use \"tab\" and just \"tab\"</p>\n"}, {"tags": ["python", "docker", "flask", "gunicorn", "amazon-ecs"], "comments": [{"owner": {"reputation": 1143, "user_id": 5854907, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/614577332014483/picture?type=large", "display_name": "Allie Fitter", "link": "https://stackoverflow.com/users/5854907/allie-fitter"}, "edited": false, "score": 0, "creation_date": 1490825523, "post_id": 43104913, "comment_id": 73291607, "body": "Try checking your <a href=\"http://stackoverflow.com/questions/30969435/where-is-the-docker-daemon-log\">docker logs</a>."}], "answers": [{"tags": [], "owner": {"reputation": 4052, "user_id": 13969, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c6205448de1b8ad8d5baf0f3416d899?s=128&d=identicon&r=PG", "display_name": "rjurney", "link": "https://stackoverflow.com/users/13969/rjurney"}, "is_accepted": true, "score": 9, "last_activity_date": 1490827802, "creation_date": 1490827802, "answer_id": 43105563, "question_id": 43104913, "link": "https://stackoverflow.com/questions/43104913/why-are-my-gunicorn-python-flask-workers-exiting-from-signal-term/43105563#43105563", "title": "Why are my gunicorn Python/Flask workers exiting from signal term?", "body": "<p>It turned out that after adding a login page to the system, the health check was getting a 302 redirect to /login at /, which was failing the health check. So the container was periodically killed. Amazon support is awesome!</p>\n"}], "owner": {"reputation": 4052, "user_id": 13969, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c6205448de1b8ad8d5baf0f3416d899?s=128&d=identicon&r=PG", "display_name": "rjurney", "link": "https://stackoverflow.com/users/13969/rjurney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6158, "favorite_count": 2, "accepted_answer_id": 43105563, "answer_count": 1, "score": 7, "last_activity_date": 1490827802, "creation_date": 1490824713, "question_id": 43104913, "link": "https://stackoverflow.com/questions/43104913/why-are-my-gunicorn-python-flask-workers-exiting-from-signal-term", "title": "Why are my gunicorn Python/Flask workers exiting from signal term?", "body": "<p>I have a Python/Flask web application that I am deploying via Gunicorn in a docker image on Amazon ECS. Everything is going fine, and then suddenly, including the last successful request, I see this in the logs:</p>\n\n<p><code>[2017-03-29 21:49:42 +0000] [14] [DEBUG] GET /heatmap_column/e4c53623-2758-4863-af06-91bd002e0107/ADA\n[2017-03-29 21:49:43 +0000] [1] [INFO] Handling signal: term\n[2017-03-29 21:49:43 +0000] [14] [INFO] Worker exiting (pid: 14)\n[2017-03-29 21:49:43 +0000] [8] [INFO] Worker exiting (pid: 8)\n[2017-03-29 21:49:43 +0000] [12] [INFO] Worker exiting (pid: 12)\n[2017-03-29 21:49:43 +0000] [10] [INFO] Worker exiting (pid: 10)\n...\n[2017-03-29 21:49:43 +0000] [1] [INFO] Shutting down: Master\n</code></p>\n\n<p>And the processes die off and the program exits. ECS then restarts the service, and the docker image is run again, but in the meanwhile the service is interrupted.</p>\n\n<p>What would be causing my program to get a TERM signal? I can't find any references to this happening on the web. Note that this only happens in Docker on ECS, not locally.</p>\n"}, {"tags": ["python", "pdf", "printing", "cmd"], "answers": [{"comments": [{"owner": {"reputation": 390, "user_id": 3749646, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a157d8af85314fd20d233f042f2d4725?s=128&d=identicon&r=PG&f=1", "display_name": "petEEy", "link": "https://stackoverflow.com/users/3749646/peteey"}, "edited": false, "score": 0, "creation_date": 1490887559, "post_id": 43104928, "comment_id": 73323419, "body": "I expect the command to print the file myC.pdf to a label maker. The label does print due to this command. Is this command telling Adobe to print the file?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 390, "user_id": 3749646, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a157d8af85314fd20d233f042f2d4725?s=128&d=identicon&r=PG&f=1", "display_name": "petEEy", "link": "https://stackoverflow.com/users/3749646/peteey"}, "edited": false, "score": 0, "creation_date": 1490888158, "post_id": 43104928, "comment_id": 73323854, "body": "Ah ... so you get the desired effect; your only problem is that it also displays the file on the console?"}, {"owner": {"reputation": 47296, "user_id": 2152082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e4e4a832231681b8a80323832e8af00?s=128&d=identicon&r=PG", "display_name": "Stephan", "link": "https://stackoverflow.com/users/2152082/stephan"}, "reply_to_user": {"reputation": 390, "user_id": 3749646, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a157d8af85314fd20d233f042f2d4725?s=128&d=identicon&r=PG&f=1", "display_name": "petEEy", "link": "https://stackoverflow.com/users/3749646/peteey"}, "edited": false, "score": 0, "creation_date": 1490888686, "post_id": 43104928, "comment_id": 73324219, "body": "@petEEy: exactly. As phyton has no knowledge of the file contents (and isn&#39;t able to handle it on it&#39;s own), it <i>needs</i>  the proper application to read (and print) it."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1490888294, "last_edit_date": 1495541381, "creation_date": 1490824769, "answer_id": 43104928, "question_id": 43104887, "link": "https://stackoverflow.com/questions/43104887/print-a-file-in-python-on-windows-without-opening-it/43104928#43104928", "title": "Print a file in Python on Windows without opening it", "body": "<p><strong>print</strong>ing the file at the system level is a command to display the file.  Adobe's viewer is the application associated with this file.  What are you <em>expecting</em> to happen?  If you want to operate on the file with some other application, then you'll have to specify that through a more focused interface.</p>\n\n<p><strong>print</strong> is equivalent to the GUI sequence right-clink + Print.  The first thing that <strong>print</strong> does is to open the file; Windows doesn't have a default interface to print a file without opening it normally.</p>\n\n<p>I found you a couple of references that know even more than I do:  :-)</p>\n\n<ul>\n<li>A related <a href=\"https://stackoverflow.com/questions/16604844/shellexecute-print\">SO question</a></li>\n<li>The MS documentation on <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb762153%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">ShellExecute</a></li>\n</ul>\n"}], "owner": {"reputation": 390, "user_id": 3749646, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a157d8af85314fd20d233f042f2d4725?s=128&d=identicon&r=PG&f=1", "display_name": "petEEy", "link": "https://stackoverflow.com/users/3749646/peteey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 976, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490888294, "creation_date": 1490824605, "question_id": 43104887, "link": "https://stackoverflow.com/questions/43104887/print-a-file-in-python-on-windows-without-opening-it", "title": "Print a file in Python on Windows without opening it", "body": "<p>Running the following line of python causes Adobe Acrobat to launch</p>\n\n<pre><code>win32api.ShellExecute(0, \"print\", \"myC.pdf\", None, \".\", 0)\n</code></pre>\n\n<p>Adobe is my default PDF viewer. Why is Adobe opening? How can I prevent this from happening? </p>\n\n<p>The script meant to run many times on a slow PC.</p>\n\n<p>I do not understand how <code>print</code> works from <code>ShellExecute</code>. Typing <code>print myC.pdf</code> in the command prompt gives me the error \"Unable to initialize device PRN\". A little background would be appreciated.</p>\n"}, {"tags": ["python", "mysql", "sql", "shell", "dynamic-sql"], "answers": [{"comments": [{"owner": {"reputation": 958, "user_id": 7197899, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e94ddcfe62e826b39972ce8f9c822961?s=128&d=identicon&r=PG&f=1", "display_name": "KindaTechy", "link": "https://stackoverflow.com/users/7197899/kindatechy"}, "edited": false, "score": 0, "creation_date": 1490903170, "post_id": 43105511, "comment_id": 73332870, "body": "Thank you for your input. As per my update above, I&#39;m going to try this with either a shell or python script, and this may be something to get me started."}, {"owner": {"reputation": 495, "user_id": 7227829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jybi3.jpg?s=128&g=1", "display_name": "Charlie G", "link": "https://stackoverflow.com/users/7227829/charlie-g"}, "reply_to_user": {"reputation": 958, "user_id": 7197899, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e94ddcfe62e826b39972ce8f9c822961?s=128&d=identicon&r=PG&f=1", "display_name": "KindaTechy", "link": "https://stackoverflow.com/users/7197899/kindatechy"}, "edited": false, "score": 1, "creation_date": 1490905189, "post_id": 43105511, "comment_id": 73333960, "body": "If you&#39;re using a shell script, see the following on how to get python functions to return values to a shell <a href=\"http://stackoverflow.com/questions/2115615/assigning-value-to-shell-variable-using-a-function-return-value-from-python\" title=\"assigning value to shell variable using a function return value from python\">stackoverflow.com/questions/2115615/&hellip;</a> <a href=\"http://stackoverflow.com/questions/26162394/convert-a-python-data-list-to-a-bash-array\" title=\"convert a python data list to a bash array\">stackoverflow.com/questions/26162394/&hellip;</a>"}, {"owner": {"reputation": 495, "user_id": 7227829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jybi3.jpg?s=128&g=1", "display_name": "Charlie G", "link": "https://stackoverflow.com/users/7227829/charlie-g"}, "reply_to_user": {"reputation": 958, "user_id": 7197899, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e94ddcfe62e826b39972ce8f9c822961?s=128&d=identicon&r=PG&f=1", "display_name": "KindaTechy", "link": "https://stackoverflow.com/users/7197899/kindatechy"}, "edited": false, "score": 0, "creation_date": 1490905240, "post_id": 43105511, "comment_id": 73333988, "body": "If you&#39;re going python, what package would you use for the sql stuff?"}, {"owner": {"reputation": 958, "user_id": 7197899, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e94ddcfe62e826b39972ce8f9c822961?s=128&d=identicon&r=PG&f=1", "display_name": "KindaTechy", "link": "https://stackoverflow.com/users/7197899/kindatechy"}, "edited": false, "score": 1, "creation_date": 1490908011, "post_id": 43105511, "comment_id": 73335501, "body": "Thank you for those links--very helpful. As per your question, that is actually something that I would ask you, haha. I don&#39;t have any experience with python; any recommendations?"}, {"owner": {"reputation": 958, "user_id": 7197899, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e94ddcfe62e826b39972ce8f9c822961?s=128&d=identicon&r=PG&f=1", "display_name": "KindaTechy", "link": "https://stackoverflow.com/users/7197899/kindatechy"}, "edited": false, "score": 1, "creation_date": 1490917938, "post_id": 43105511, "comment_id": 73338781, "body": "Decided to just use python with MySQLdb module."}, {"owner": {"reputation": 958, "user_id": 7197899, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e94ddcfe62e826b39972ce8f9c822961?s=128&d=identicon&r=PG&f=1", "display_name": "KindaTechy", "link": "https://stackoverflow.com/users/7197899/kindatechy"}, "edited": false, "score": 0, "creation_date": 1490980666, "post_id": 43105511, "comment_id": 73369943, "body": "This definitely got me started for now. Any bumps I have in the future I&#39;ll post as additional questions. Thanks for your help!"}, {"owner": {"reputation": 495, "user_id": 7227829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jybi3.jpg?s=128&g=1", "display_name": "Charlie G", "link": "https://stackoverflow.com/users/7227829/charlie-g"}, "reply_to_user": {"reputation": 958, "user_id": 7197899, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e94ddcfe62e826b39972ce8f9c822961?s=128&d=identicon&r=PG&f=1", "display_name": "KindaTechy", "link": "https://stackoverflow.com/users/7197899/kindatechy"}, "edited": false, "score": 0, "creation_date": 1490988391, "post_id": 43105511, "comment_id": 73373892, "body": "Ah good! Sorry weird day yesterday, and I haven&#39;t delved into SQL that much yet. Glad you could find something. Good luck!"}], "tags": [], "owner": {"reputation": 495, "user_id": 7227829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jybi3.jpg?s=128&g=1", "display_name": "Charlie G", "link": "https://stackoverflow.com/users/7227829/charlie-g"}, "is_accepted": true, "score": 1, "last_activity_date": 1490856252, "last_edit_date": 1490856252, "creation_date": 1490827519, "answer_id": 43105511, "question_id": 43104829, "link": "https://stackoverflow.com/questions/43104829/insert-data-from-multiple-files-into-multiple-tables/43105511#43105511", "title": "Insert data from multiple files into multiple tables", "body": "<p>So once you have a sql query/function/script that reads a single table, which it looks like you do (or can build an equivalent one in python somewhat simply), using python to loop through the directory structure and get filenames is fairly simple. If you can somehow pass the <code>infile '/Exmpl/20170102/prices.csv'</code> a new csv parameter each time and call your sql script from within python, you should be good.</p>\n\n<p>I don't have much time right now, but I wanted to show you how you could get those filename strings using python. </p>\n\n<pre><code>import os\n\nprices_csvs = []\nfor root, dirs, files in os.walk(os.path.join('insert_path_here', 'Exmpl'):\n    for f in files:\n        if f == 'prices.csv':\n            prices_csvs.append(os.path.join(root, f))\n            break # optional, use if there only is one prices.csv in each subfolder\n\nfor csv_file in prices_csvs:\n    # csv_file is a string of the path for each prices.csv\n    # if you can insert it as the `infile` parameter and run the sql, you are done\n    # admittedly, i don't know how to do this at the moment\n</code></pre>\n\n<p><code>os.walk</code> goes down through each subdirectory, giving the name <code>root</code> to the path to that folder, listing all the directories as <code>dirs</code> and files as <code>files</code> stored there. From there it's a simple check to see if the filename matches what you're looking for, and storing it in a list if it does. Looping over the list yields strings containing the path to each prices.csv in Exmpl. </p>\n\n<p>Hope that shed a very little light on how python could help</p>\n"}, {"tags": [], "owner": {"reputation": 958, "user_id": 7197899, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e94ddcfe62e826b39972ce8f9c822961?s=128&d=identicon&r=PG&f=1", "display_name": "KindaTechy", "link": "https://stackoverflow.com/users/7197899/kindatechy"}, "is_accepted": false, "score": 1, "last_activity_date": 1491848880, "creation_date": 1491848880, "answer_id": 43330374, "question_id": 43104829, "link": "https://stackoverflow.com/questions/43104829/insert-data-from-multiple-files-into-multiple-tables/43330374#43330374", "title": "Insert data from multiple files into multiple tables", "body": "<p>I've marked Charlie's answer as the correct answer because, although he does not fully answer the question, he gave me a great start. Below is the code for anyone who might want to see how to load csv files into MySQL. The basic idea is to dynamically construct a string in Python and then execute that string in MySQL.</p>\n\n<pre><code>#!/usr/bin/python\nimport os\nimport MySQLdb # Use this module in order to interact with SQL\n\n# Find all the file names located in this directory\nprices_csvs = []\nfor root, dirs, files in os.walk(os.path.join('insert_path_here', 'Exmpl'):\nfor f in files:\n    if f == 'prices.csv':\n        prices_csvs.append(os.path.join(root, f))\n        break\n\n# Connect to the MySQL database\ndb = MySQLdb.connect(host =\"&lt;Enter Host Here&gt;\", user = \"&lt;Enter User here&gt;\", passwd = \"&lt;Enter Password Here&gt;\", db = \"&lt;Enter Database name here&gt;\" )\n\n# must create cursor object\ncur = db.cursor()\n\nfor csv_file in prices_csvs:\n\n    directory = \"'\" + csv_file + \"'\"    \n\n    table = csv_file[56:64] # This extracts the name of the table from the directory\n\n    sql_string1 = \"drop table if exists SD\" + table + \" ;\\n\"\n\n    sql_string2 = \"create table SD\" + table + \" as \\n\\\n    &lt;Enter your fields here&gt; \\n\\\n    ); \\n\"\n\n    sql_string3 = \"load data local infile \" + directory + \" \\n\\\n    into table TempPrices \\n\\\n    fields terminated by ',' \\n\\\n    lines terminated by \" + repr('\\n') + \" \\n\\\n    ignore 1 lines ;\\n\"\n\n    # Print out the strings for debugging\n    print sql_string1\n    print sql_string2\n    print sql_string3\n    print sql_string4\n    print sql_string5\n\n    # Execute your SQL statements\n    cur.execute(sql_string1)\n    cur.execute(sql_string2)\n    cur.execute(sql_string3)\n    cur.execute(sql_string4)\n    cur.execute(sql_string5)\n    db.commit()\n\ndb.close()\n</code></pre>\n\n<p>While debugging, I found it very helpful to copy the printed SQL statement and paste it into MySQL to confirm that the strings were being constructed successfully.</p>\n"}], "owner": {"reputation": 958, "user_id": 7197899, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e94ddcfe62e826b39972ce8f9c822961?s=128&d=identicon&r=PG&f=1", "display_name": "KindaTechy", "link": "https://stackoverflow.com/users/7197899/kindatechy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2192, "favorite_count": 1, "accepted_answer_id": 43105511, "answer_count": 2, "score": 2, "last_activity_date": 1491848880, "creation_date": 1490824363, "last_edit_date": 1495541422, "question_id": 43104829, "link": "https://stackoverflow.com/questions/43104829/insert-data-from-multiple-files-into-multiple-tables", "title": "Insert data from multiple files into multiple tables", "body": "<p>I have data stored in CSV files in multiple folders that I want to load into multiple SQL tables using MySQL on an Ubuntu system. Each table and file follows this schema (the files don't have the id field):</p>\n\n<pre><code>+ ------ + -------- + -------- + --------- + ---------- +\n| SPO_Id | SPO_Name | SPO_Date | SPO_Price | SPO_Amount |\n+ ------ + -------- + -------- + --------- + ---------- +\n</code></pre>\n\n<p>Each file contains pricing and sales data for a single day. Unfortunately, the files are not named after their date; they are stored in <em>folders</em> that are named after the date. Here's an example diagram of what the directory looks like</p>\n\n<pre><code>      ------&gt; 20170102 ------&gt; prices.csv\n     /\n    /\nExmpl ------&gt; 20170213 ------&gt; prices.csv\n    \\\n     \\\n      ------&gt; 20170308 ------&gt; prices.csv\n</code></pre>\n\n<p>Here is a query I've written that pulls data from a file and stores it into a table:</p>\n\n<pre><code>use pricing ; # the database I want the tables in\ndrop table if exists SP_2017_01_02 ;\n\ncreate table SP_2017_01_02 (\n    SPO_Id int not null primary key auto_increment,\n    SPO_Name varchar(32),\n    SPO_Date date,\n    SPO_Price float,\n    SPO_Amount int\n);\n\nload data local infile '/Exmpl/20170102/prices.csv'\n    into table SP_2017_01_02\n    fields terminated by ','\n    lines terminated by '\\n'\n    ignore 1 lines # First line contains field name information\n    (SPO_Name, SPO_Date, SPO_Price, SPO_Amount) ;\n\nselect * from SP_2017_01_02 ;\n\nshow tables ;\n</code></pre>\n\n<p>This query works fine for loading one table in at a time; however, because I have hundreds of tables, I need to automate this process. I've looked around on SO and here are a few things I've found:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/35152924/how-to-load-multiple-csv-files-into-multiple-tables\">Here</a> is a question similar to mine, only this question references SQL Server. The answer gives a suggestion of what to do without any real substance.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/31114977/load-multiple-excel-files-into-multiple-sql-server-database-tables-using-ssis\">This question</a> is also very similar to mine, only this is specifically using SSIS, to which I don't have access (and the question is left unanswered)</p>\n\n<p><a href=\"https://stackoverflow.com/questions/28842399/load-data-from-multiple-data-files-into-multiple-tables-using-single-control-fil\">This post</a> suggests using control file reference, but this is for sql-loader and oracle.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/8239554/use-python-to-load-data-into-mysql\">Using python</a> may be the way to go, but I've never used it before and my question seems like too complicated a problem with which to start.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/5687718/how-can-i-insert-data-into-a-mysql-database\">This one</a> and <a href=\"https://stackoverflow.com/questions/19205033/automatically-load-sql-table-by-reading-data-from-text-file\">this one</a> also use python, but they're just updating one table with data from one file.</p>\n\n<p>I've worked a lot in SQL Server, but I'm fairly new to MySQL. Any help is greatly appreciated!</p>\n\n<p><strong>Update</strong></p>\n\n<p>I have attempted to do this using Dynamic SQL in MySQL. Unfortunately, MySQL requires the use of stored procedures to do Dynamic SQL, but it doesn't allow the function <em>load data</em> in a stored procedure. As @RandomSeed <a href=\"https://stackoverflow.com/questions/17273030/load-data-is-not-allowed-in-stored-procedures\">pointed out</a>, <a href=\"https://dev.mysql.com/doc/refman/5.6/en/stored-program-restrictions.html\" rel=\"nofollow noreferrer\">this cannot be done</a> with only MySQL. I'm going to take his advice and attempt to write a shell/python script to handle this.</p>\n\n<p>I'll leave this question open until I (or someone else) can come up with a solid answer.</p>\n"}, {"tags": ["python", "macos-sierra"], "comments": [{"owner": {"reputation": 6059, "user_id": 1230086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dd67f82db5bf5f26a1597400c6ffbf4?s=128&d=identicon&r=PG", "display_name": "tijko", "link": "https://stackoverflow.com/users/1230086/tijko"}, "edited": false, "score": 0, "creation_date": 1490824781, "post_id": 43104788, "comment_id": 73291329, "body": "What do you get by running <code>python --version</code> and what system is this on?"}, {"owner": {"reputation": 293, "user_id": 3055772, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ljgmd.jpg?s=128&g=1", "display_name": "APCoding", "link": "https://stackoverflow.com/users/3055772/apcoding"}, "reply_to_user": {"reputation": 6059, "user_id": 1230086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dd67f82db5bf5f26a1597400c6ffbf4?s=128&d=identicon&r=PG", "display_name": "tijko", "link": "https://stackoverflow.com/users/1230086/tijko"}, "edited": false, "score": 0, "creation_date": 1490827117, "post_id": 43104788, "comment_id": 73292164, "body": "@tijko It returned Python 2.7.12 and I&#39;m running a Mac Mini with macOS Sierra."}, {"owner": {"reputation": 6059, "user_id": 1230086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dd67f82db5bf5f26a1597400c6ffbf4?s=128&d=identicon&r=PG", "display_name": "tijko", "link": "https://stackoverflow.com/users/1230086/tijko"}, "edited": false, "score": 0, "creation_date": 1490828756, "post_id": 43104788, "comment_id": 73292662, "body": "Have you checked other <a href=\"http://stackoverflow.com/questions/27606653/oserror-errno-8-exec-format-error\">posts</a> recommending adding the shebang?"}, {"owner": {"reputation": 293, "user_id": 3055772, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ljgmd.jpg?s=128&g=1", "display_name": "APCoding", "link": "https://stackoverflow.com/users/3055772/apcoding"}, "reply_to_user": {"reputation": 6059, "user_id": 1230086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dd67f82db5bf5f26a1597400c6ffbf4?s=128&d=identicon&r=PG", "display_name": "tijko", "link": "https://stackoverflow.com/users/1230086/tijko"}, "edited": false, "score": 0, "creation_date": 1490829839, "post_id": 43104788, "comment_id": 73292981, "body": "@tijko I tried changing the line in <code>siftvlfeat</code> to <code>subprocess.call([self.executable, &quot;#!&#47;bin&#47;sh\\n%s.jpg.pgm&quot; % photo, &quot;-o&quot;, &quot;%s.key&quot; % photo])</code>. This didn&#39;t work, but it is the right way to do it?"}, {"owner": {"reputation": 293, "user_id": 3055772, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ljgmd.jpg?s=128&g=1", "display_name": "APCoding", "link": "https://stackoverflow.com/users/3055772/apcoding"}, "reply_to_user": {"reputation": 6059, "user_id": 1230086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dd67f82db5bf5f26a1597400c6ffbf4?s=128&d=identicon&r=PG", "display_name": "tijko", "link": "https://stackoverflow.com/users/1230086/tijko"}, "edited": false, "score": 0, "creation_date": 1490838563, "post_id": 43104788, "comment_id": 73295267, "body": "@tijko Isn&#39;t <code>self.executable</code> some sort of object? I can&#39;t find a file that&#39;s named that. Looking around some more, it&#39;s determined by either this (<code>self.executable = os.path.join(distrDir, &quot;bundler&#47;bin&#47;KeyMatchFull.exe&quot;)</code>) or this (<code>self.executable = os.path.join(distrDir, &quot;bundler&#47;bin&#47;KeyMatchFull&quot;)</code>), depending on the system. However, I can&#39;t find the file <code>KeyMatchFull</code>, only an <code>.exe</code> version (for Windows, presumably). Any ideas?"}, {"owner": {"reputation": 6059, "user_id": 1230086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dd67f82db5bf5f26a1597400c6ffbf4?s=128&d=identicon&r=PG", "display_name": "tijko", "link": "https://stackoverflow.com/users/1230086/tijko"}, "edited": false, "score": 0, "creation_date": 1490865599, "post_id": 43104788, "comment_id": 73306818, "body": "Add the shebag line to the file <code>&#47;Users&#47;PeterE&#47;Downloads&#47;osm-bundler&#47;osmbundler&#47;features&#47;sift&zwnj;&#8203;vlfeat.py</code> itself (meaning the shebang is the first line in said file) and let me know what happens..."}, {"owner": {"reputation": 293, "user_id": 3055772, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ljgmd.jpg?s=128&g=1", "display_name": "APCoding", "link": "https://stackoverflow.com/users/3055772/apcoding"}, "reply_to_user": {"reputation": 6059, "user_id": 1230086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dd67f82db5bf5f26a1597400c6ffbf4?s=128&d=identicon&r=PG", "display_name": "tijko", "link": "https://stackoverflow.com/users/1230086/tijko"}, "edited": false, "score": 0, "creation_date": 1490919776, "post_id": 43104788, "comment_id": 73339217, "body": "@tijko I added <code>#!&#47;bin&#47;sh</code> to the top of the Python file (is this what you had in mind?)... it didn&#39;t make a difference. I don&#39;t know if you already knew this, but <code>self.executable</code> is a path to the file <code>&#47;Users&#47;PeterE&#47;Downloads&#47;osm-bundler&#47;software&#47;vlfeat&#47;bin&#47;glx&#47;&zwnj;&#8203;sift</code>. <code>sift</code> is an executable."}, {"owner": {"reputation": 6059, "user_id": 1230086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dd67f82db5bf5f26a1597400c6ffbf4?s=128&d=identicon&r=PG", "display_name": "tijko", "link": "https://stackoverflow.com/users/1230086/tijko"}, "edited": false, "score": 0, "creation_date": 1490920150, "post_id": 43104788, "comment_id": 73339282, "body": "You need to add a shebang for the python environment <code>#!&#47;usr&#47;bin&#47;env python</code> inside of <code>siftvlfeat.py</code>.  I&#39;m not familiar with this project but cursory googling shows this is usually the case with the traceback error you showed when using <code>subprocess</code>"}, {"owner": {"reputation": 6059, "user_id": 1230086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dd67f82db5bf5f26a1597400c6ffbf4?s=128&d=identicon&r=PG", "display_name": "tijko", "link": "https://stackoverflow.com/users/1230086/tijko"}, "edited": false, "score": 0, "creation_date": 1490920734, "post_id": 43104788, "comment_id": 73339395, "body": "Keep me posted..."}, {"owner": {"reputation": 293, "user_id": 3055772, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ljgmd.jpg?s=128&g=1", "display_name": "APCoding", "link": "https://stackoverflow.com/users/3055772/apcoding"}, "reply_to_user": {"reputation": 6059, "user_id": 1230086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dd67f82db5bf5f26a1597400c6ffbf4?s=128&d=identicon&r=PG", "display_name": "tijko", "link": "https://stackoverflow.com/users/1230086/tijko"}, "edited": false, "score": 0, "creation_date": 1490927409, "post_id": 43104788, "comment_id": 73340986, "body": "@tijko I also tried that after looking around a bit, but it didn&#39;t help. But I think I solved my problem! I added <code>shell=True</code> and it seemed to work. Thanks for your help! (I have another error, but I think it&#39;s unrelated (it&#39;s a file not found error, and the file it&#39;s looking for has the name of my image files, but a different extension<code>.key</code> extension))"}, {"owner": {"reputation": 1330, "user_id": 4041795, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001661342971/picture?type=large", "display_name": "Montmons", "link": "https://stackoverflow.com/users/4041795/montmons"}, "edited": false, "score": 0, "creation_date": 1490983663, "post_id": 43104788, "comment_id": 73371512, "body": "<code>shell=True</code> is almost always a bad choice as it poses a security risk. If you post your full subprocess statement I could have a look as to how best to solve it."}], "owner": {"reputation": 293, "user_id": 3055772, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ljgmd.jpg?s=128&g=1", "display_name": "APCoding", "link": "https://stackoverflow.com/users/3055772/apcoding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 451, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1490824208, "creation_date": 1490824208, "question_id": 43104788, "link": "https://stackoverflow.com/questions/43104788/oserror-errno-8-exec-format-error-with-osm-bundler", "title": "OSError: [Errno 8] Exec format error with osm-bundler", "body": "<p>I'm trying to get osm-bundler to work, but I run into this problem:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"RunBundler.py\", line 9, in &lt;module&gt;\n    manager.preparePhotos()\n  File \"/Users/PeterE/Downloads/osm-bundler/osmbundler/__init__.py\", line 121, in preparePhotos\n    self._preparePhoto(photoInfo)\n  File \"/Users/PeterE/Downloads/osm-bundler/osmbundler/__init__.py\", line 176, in _preparePhoto\n    self.extractFeatures(photo)\n  File \"/Users/PeterE/Downloads/osm-bundler/osmbundler/__init__.py\", line 244, in extractFeatures\n    self.featureExtractor.extract(photo, self.photoDict[photo])\n  File \"/Users/PeterE/Downloads/osm-bundler/osmbundler/features/siftvlfeat.py\", line 16, in extract\n    subprocess.call([self.executable, \"%s.jpg.pgm\" % photo, \"-o\", \"%s.key\" % photo])\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py\", line 523, in call\n    return Popen(*popenargs, **kwargs).wait()\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py\", line 711, in __init__\n    errread, errwrite)\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py\", line 1343, in _execute_child\n    raise child_exception\nOSError: [Errno 8] Exec format error\n</code></pre>\n\n<p>This is caused when I run this command:</p>\n\n<pre><code>python RunBundler.py --photos=\"/Users/PeterE/Desktop/osmbundlertest\"\n</code></pre>\n\n<p>I can put in any relevant lines from the Python scripts, but I have no idea which one it is now. The output before the error is:</p>\n\n<pre><code>Working directory created: /var/folders/rq/5mypbx554jgflr6c8097zltc0000gn/T/osm-bundler-CXSOEi\nBundlerMatching executable path: /Users/PeterE/Downloads/osm-bundler/software/bundler/bin/KeyMatchFull\nSift executable path: /Users/PeterE/Downloads/osm-bundler/software/vlfeat/bin/glx/sift\n\nProcessing photo 'IMG_0055.JPG':\n    Entry for the camera 'Apple', 'iPod touch' does not exist in the camera database\n    Can't estimate focal length in pixels for the photo '/Users/PeterE/Desktop/osmbundlertest/IMG_0055.JPG'\n    Copy of the photo has been scaled down to 1200x896\n    Extracting features with the SIFT method from VLFeat library...\n</code></pre>\n"}, {"tags": ["python", "session", "flask"], "answers": [{"comments": [{"owner": {"reputation": 3546, "user_id": 5726823, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/78229e810f7580e7fa0d5fefc50f1b7c?s=128&d=identicon&r=PG", "display_name": "illright", "link": "https://stackoverflow.com/users/5726823/illright"}, "edited": false, "score": 0, "creation_date": 1617988447, "post_id": 43104823, "comment_id": 118474910, "body": "For people like me who skimmed over the most important line in the docs: the reason why you need to run the test after the transaction block is because the modifications made to the <code>session</code> object are only written back to the actual client&#39;s session when the transaction is closed."}], "tags": [], "owner": {"reputation": 1143, "user_id": 5854907, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/614577332014483/picture?type=large", "display_name": "Allie Fitter", "link": "https://stackoverflow.com/users/5854907/allie-fitter"}, "is_accepted": true, "score": 11, "last_activity_date": 1614175593, "last_edit_date": 1614175593, "creation_date": 1490824337, "answer_id": 43104823, "question_id": 43104688, "link": "https://stackoverflow.com/questions/43104688/accessing-session-object-during-unit-test-of-flask-application/43104823#43104823", "title": "Accessing session object during Unit test of Flask application", "body": "<p><a href=\"http://flask.pocoo.org/docs/testing/#accessing-and-modifying-sessions\" rel=\"nofollow noreferrer\">This</a> is what you're looking for. As it says however, you'd have to use the instantiation you create in your <code>with</code> statement.</p>\n<pre><code>with app.test_client() as c:\n    with c.session_transaction() as sess:\n        sess['a_key'] = 'a value'\n\n    # once this is reached the session was stored\n    result = app.test_client.get('/a_url')\n    # NOT part of the 2nd context\n</code></pre>\n<p>Note that this won't work if you run your test within the scope of the <code>with c.session_transaction() as sess</code> statement, it needs to be run <em>after</em> that block.</p>\n"}, {"comments": [{"owner": {"reputation": 14220, "user_id": 136598, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/55c76f58f63ba7cbb85658158b3a82f8?s=128&d=identicon&r=PG&f=1", "display_name": "gaefan", "link": "https://stackoverflow.com/users/136598/gaefan"}, "edited": false, "score": 0, "creation_date": 1601225307, "post_id": 50527785, "comment_id": 113333730, "body": "This works great.  Though when changing <code>session</code> in the <code>with</code> block, make sure not to create a new dict (e.g., <code>session = {}</code>) because that breaks the patch.  I lost a lot of time debugging that so hopefully I save others some pain."}], "tags": [], "owner": {"reputation": 2339, "user_id": 1433559, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/sDfWE.png?s=128&g=1", "display_name": "MadeOfAir", "link": "https://stackoverflow.com/users/1433559/madeofair"}, "is_accepted": false, "score": 5, "last_activity_date": 1527246378, "creation_date": 1527246378, "answer_id": 50527785, "question_id": 43104688, "link": "https://stackoverflow.com/questions/43104688/accessing-session-object-during-unit-test-of-flask-application/50527785#50527785", "title": "Accessing session object during Unit test of Flask application", "body": "<p>If you want to read the session data written in your view from the test, one way is to mock the session view as a dict and verify the session in your test. Here's an example using <a href=\"https://docs.python.org/3/library/unittest.mock.html#module-unittest.mock\" rel=\"noreferrer\">Python's unittest.mock</a>:</p>\n\n<p><strong>app.py</strong></p>\n\n<pre><code>from flask import Flask, session, request\n\napp = Flask(__name__)\n\napp.config[\"SECRET_KEY\"] = \"my secret key\"\n\n@app.route(\"/\", methods=[\"POST\"])\ndef index():\n    session[\"username\"] = request.form[\"username\"]\n    return \"Username saved in session\"\n</code></pre>\n\n<p><strong>test_index.py</strong></p>\n\n<pre><code>from unittest.mock import patch\nfrom app import app\n\n\ndef test_index():\n    with patch(\"app.session\", dict()) as session:\n        client = app.test_client()\n        response = client.post(\"/\", data={\n            \"username\": \"test\"\n        })\n        assert session.get(\"username\") == \"test\"\n        assert response.data == b\"Username saved in session\"\n</code></pre>\n\n<p>You can use any mocking solution you prefer, of course.</p>\n"}], "owner": {"reputation": 667, "user_id": 1743585, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a63ff46a1742fd576e624bf1e67907ba?s=128&d=identicon&r=PG", "display_name": "mrsan22", "link": "https://stackoverflow.com/users/1743585/mrsan22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3509, "favorite_count": 0, "accepted_answer_id": 43104823, "answer_count": 2, "score": 8, "last_activity_date": 1614175593, "creation_date": 1490823798, "question_id": 43104688, "link": "https://stackoverflow.com/questions/43104688/accessing-session-object-during-unit-test-of-flask-application", "title": "Accessing session object during Unit test of Flask application", "body": "<p>I know it is possible to create session object using session_transaction() method. However, is there a way to access the current session object which gets created when for example \"/\" route gets hit? I did <code>from flask import session</code> to access the session but it's empty. Let me know if it is possible. Thanks.</p>\n"}, {"tags": ["python", "python-import", "importerror", "circular-dependency", "circular-reference"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1490823929, "post_id": 43104682, "comment_id": 73290995, "body": "&quot;I am encountering a problem using a circular importation&quot; - okay, obvious first suggestion, don&#39;t use circular imports. You think that you &quot;need this structure&quot;, but it&#39;s highly likely you can change things to not require circular imports."}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 1, "creation_date": 1490824003, "post_id": 43104682, "comment_id": 73291026, "body": "possibly helpful: <a href=\"http://stackoverflow.com/questions/7336802/how-to-avoid-circular-imports-in-python\">How to avoid circular imports in Python?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 370, "user_id": 4958910, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1caacf37414b82892f7eb1c34fc020da?s=128&d=identicon&r=PG&f=1", "display_name": "qcha", "link": "https://stackoverflow.com/users/4958910/qcha"}, "is_accepted": true, "score": 0, "last_activity_date": 1490950523, "creation_date": 1490950523, "answer_id": 43136479, "question_id": 43104682, "link": "https://stackoverflow.com/questions/43104682/python-class-instance-circular-referencing-in-different-files-using-import-as/43136479#43136479", "title": "Python class instance circular referencing in different files using &#39;IMPORT AS&#39;", "body": "<p>I solved the problem simply by using Python 3, without code changes.</p>\n"}], "owner": {"reputation": 370, "user_id": 4958910, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1caacf37414b82892f7eb1c34fc020da?s=128&d=identicon&r=PG&f=1", "display_name": "qcha", "link": "https://stackoverflow.com/users/4958910/qcha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 1, "accepted_answer_id": 43136479, "answer_count": 1, "score": 0, "last_activity_date": 1490950523, "creation_date": 1490823754, "last_edit_date": 1490824415, "question_id": 43104682, "link": "https://stackoverflow.com/questions/43104682/python-class-instance-circular-referencing-in-different-files-using-import-as", "title": "Python class instance circular referencing in different files using &#39;IMPORT AS&#39;", "body": "<p>I am encountering a problem using a circular importation in Python 2.7</p>\n\n<p>For some reasons, I need this structure, here reduced for the explanation to 4 python files :</p>\n\n<pre><code>- main.py\n- folder\n  \\- __init__.py\n  \\- loader.py\n  \\- folder1\n     \\- __init__.py\n     \\- class1.py\n  \\- folder2\n     \\- __init__.py\n     \\- class2.py\n</code></pre>\n\n<p>main.py :</p>\n\n<pre><code>import folder.loader as LD\n\nLD.a.change_class2()\nLD.b.change_class1()\n</code></pre>\n\n<p>loader.py :</p>\n\n<pre><code>from folder1.class1 import Class1\nfrom folder2.class2 import Class2\n\na=Class1()\nb=Class2()\n</code></pre>\n\n<p>class1.py :</p>\n\n<pre><code>import folder.loader as LD\n\nclass Class1():\n    def __init__(self):\n        self.pty1=0\n    def change_class2(self):\n        LD.b.pty2=2\n</code></pre>\n\n<p>class2.py :</p>\n\n<pre><code>import folder.loader as LD\n\nclass Class2():\n    def __init__(self):\n        self.pty2=0\n    def change_class1(self):\n        LD.a.pty1=6\n</code></pre>\n\n<p>The code executed is <code>main.py</code>. This script calls the file <code>loader.py</code> which creates an instance for Class1 and Class2. The instances have to communicate and modify each other, explaining the necessity (if I am not wrong) of the file <code>loader.py</code>.</p>\n\n<p>Executing this code returns the error from <code>class1.py</code> :</p>\n\n<pre><code>    import folder.loader as LD\nAttributeError: 'module' object has no attribute 'loader' \n</code></pre>\n\n<p>I have no idea of what is going on here.</p>\n\n<p>Surprisingly, when I remove the part <code>as LD</code> from the importation command line in the classes files, it works perfecly :</p>\n\n<p>class1.py :</p>\n\n<pre><code>import folder.loader\n\nclass Class1():\n    def __init__(self):\n        self.pty1=0\n    def change_class2(self):\n        folder.loader.b.pty2=2\n</code></pre>\n\n<p>class2.py :</p>\n\n<pre><code>import folder.loader\n\nclass Class2():\n    def __init__(self):\n        self.pty2=0\n    def change_class1(self):\n        folder.loader.a.pty1=6\n</code></pre>\n\n<p>For this example, it's ok, but in the real program I am trying to make, based on this structure, I can't use the complete module path each time I need to communicate with another class instance. </p>\n\n<p>Why am I getting this error ? What can I do to solve this ?\nThank you in advance for your help.</p>\n\n<hr>\n\n<p>EDIT : replacing <code>import folder.loader as LD</code> by <code>from .. import loader as LD</code> now returns another error, that I don't understand :</p>\n\n<pre><code>    from .. import loader as LD\nImportError: cannot import name loader\n</code></pre>\n"}, {"tags": ["python", "turtle-graphics"], "answers": [{"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 0, "last_activity_date": 1490827384, "last_edit_date": 1495540002, "creation_date": 1490827043, "answer_id": 43105421, "question_id": 43104626, "link": "https://stackoverflow.com/questions/43104626/mixing-events-in-a-python-turtle-program/43105421#43105421", "title": "Mixing events in a python turtle program", "body": "<p>One problem I see with your code is you need to keep the <code>moveAround()</code> from happening during the <code>teleport()</code> otherwise you get confusing visuals.  I find with turtle that it helps to disable the event handler when inside the event hander and reenable it on the way out.</p>\n\n<p>I believe the following will smooth out your events and allow them all to fire at the appropriate time.  I've added a state variable to help control the activity:</p>\n\n<pre><code>from turtle import Turtle, Screen\n\ndef teleport(x, y):\n    global state\n\n    playGround.onclick(None)  # disable handler inside handler\n\n    if state == \"running\":\n        state = \"teleporting\"\n        bob.goto(x, y)\n        state = \"running\"\n\n    if state != \"quitting\":\n        playGround.onclick(teleport)\n\ndef quitThis():\n    global state\n\n    state == \"quitting\"\n\n    playGround.onkey(None, 'q')\n\n    playGround.bye()\n\ndef moveAround():\n    if state == \"running\":\n        bob.fd(10)\n        bob.rt(15)\n\n    if state != \"quitting\":\n        playGround.ontimer(moveAround, 30)\n\nplayGround = Screen()\nplayGround.screensize(800, 600, 'light blue')\n\nbob = Turtle(visible=False)\nbob.color('red')\n\nplayGround.onclick(teleport)\nplayGround.onkey(quitThis, 'q')\nplayGround.listen()\n\nstate = \"running\"\n\nplayGround.ontimer(moveAround, 100)\n\nplayGround.mainloop()\n</code></pre>\n\n<blockquote>\n  <p>when the key is pressed to quit, I get a large list of errors in the\n  shell. The bye() method seems to be terminating the program in a\n  brutish fashion</p>\n</blockquote>\n\n<p>This is typical of turtle. If it really bothers you, see my answer to the question about <a href=\"https://stackoverflow.com/questions/40314146/turtle-window-exit-errors/40315243#40315243\">Turtle window exit errors</a> for one possible solution.</p>\n"}], "owner": {"reputation": 63, "user_id": 3233466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda4304e68e9e5e37089576b701d6fb6?s=128&d=identicon&r=PG&f=1", "display_name": "dougc905", "link": "https://stackoverflow.com/users/3233466/dougc905"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 218, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490827384, "creation_date": 1490823570, "question_id": 43104626, "link": "https://stackoverflow.com/questions/43104626/mixing-events-in-a-python-turtle-program", "title": "Mixing events in a python turtle program", "body": "<p>I am trying to write a python turtle program that behaves similarly to a regular event-driven program that uses a game loop. The program tries to mix mouse, keyboard and timer events as is as posted below.</p>\n\n<p>My problem is that python doesn't seem to be able to mix the onkey() events with the ontimer() loop. When run, the program will animate the turtle and the onclick() event will work. The key press isn't even registered until the mouse is first clicked. Then, when the key is pressed to quit, I get a large list of errors in the shell. The bye() method seems to be terminating the program in a brutish fashion and not shutting down elegantly.</p>\n\n<p>I think that I have the commands in the correct order.</p>\n\n<p>Any suggestions will be appreciated!</p>\n\n<pre><code>import turtle\n\nplayGround = turtle.Screen()\nplayGround.screensize(800, 600, 'light blue')\n\nbob = turtle.Turtle()\nbob.color('red')\nbob.pencolor('red')\nbob.ht()\n\ndef teleport(x,y):\n    bob.goto(x,y)\n\ndef quitThis():\n    playGround.bye()\n\ndef moveAround():\n   bob.fd(10)\n   bob.rt(15)\n   playGround.ontimer(moveAround,30)\n\nplayGround.onclick(teleport,btn=1)\nplayGround.onkey(quitThis,'q')\n\nmoveAround()\n\nplayGround.listen()\nplayGround.mainloop()\n</code></pre>\n"}, {"tags": ["python", "django", "tomcat", "flask", "face-detection"], "comments": [{"owner": {"reputation": 1143, "user_id": 5854907, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/614577332014483/picture?type=large", "display_name": "Allie Fitter", "link": "https://stackoverflow.com/users/5854907/allie-fitter"}, "edited": false, "score": 0, "creation_date": 1490829404, "post_id": 43104600, "comment_id": 73292853, "body": "I updated my answer concerning your comment."}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 5434466, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/c81d68ca4e2a3a647eedf738dd81ea9d?s=128&d=identicon&r=PG&f=1", "display_name": "tech_a_break", "link": "https://stackoverflow.com/users/5434466/tech-a-break"}, "edited": false, "score": 0, "creation_date": 1490827560, "post_id": 43104979, "comment_id": 73292313, "body": "Thanks @allie-fitter. The question is how do I take this code and make it as a webservice? I don&#39;t have much experience with creating a web service. Not looking for pros and cons of web frameworks. Hope this clarifies."}], "tags": [], "owner": {"reputation": 1143, "user_id": 5854907, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/614577332014483/picture?type=large", "display_name": "Allie Fitter", "link": "https://stackoverflow.com/users/5854907/allie-fitter"}, "is_accepted": false, "score": 1, "last_activity_date": 1490830673, "last_edit_date": 1495540451, "creation_date": 1490825027, "answer_id": 43104979, "question_id": 43104600, "link": "https://stackoverflow.com/questions/43104600/how-to-run-python-script-as-a-web-service-with-user-provided-image/43104979#43104979", "title": "How to run python script as a web service with user provided image?", "body": "<p>I believe you're asking what a good web framework for python is. Before I was competent, I wrote a <code>Django</code> web server and I found it a bit daunting. But then everything was daunting at that point. I've used <code>Flask</code> in few projects since becoming an OK programmer. It's fairly straight forward, easy to setup, and well documented, as is <code>Django</code>. I used <a href=\"https://www.digitalocean.com/community/tutorials/how-to-serve-flask-applications-with-uwsgi-and-nginx-on-ubuntu-16-04\" rel=\"nofollow noreferrer\">this tutorial</a> when I was learning <code>Flask</code>. As I understand it, this is really an opinion question, so IMHO I would go with <code>Flask</code>, <code>uWSGI</code>, and <code>Nginx</code> as is in the tutorial. Though, I would encourage you to do your own research and see if the other options suit you and your project better.</p>\n\n<p><strong>EDIT:</strong> To use this code <code>Flask</code> you either place your code directly in a <a href=\"http://flask.pocoo.org/docs/0.12/api/#url-route-registrations\" rel=\"nofollow noreferrer\">route's</a> function or even better put it into a function or class and import it. EVEN BETTER create a <a href=\"https://realpython.com/blog/python/the-model-view-controller-mvc-paradigm-summarized-with-legos/\" rel=\"nofollow noreferrer\">model, view, and controller(MVC)</a>. From a cursory glance, it looks like you'll have to <a href=\"http://flask.pocoo.org/docs/0.12/patterns/fileuploads/\" rel=\"nofollow noreferrer\">upload the file and save it</a>, and then open it with <code>face_recognition</code>. The <a href=\"https://face-recognition.readthedocs.io/en/latest/face_recognition.html\" rel=\"nofollow noreferrer\"><code>face_recognition</code> module</a> doesn't seem to be able to read data from memory, so saving the file and opening it with <code>face_recognition.load_image_file(\"/PATH_TO_IMAGE/IMAGE.jpg\")</code> seems to be necessary. Just to be sure to delete the file after you load it to clear space. Then once you have your <code>PIL.Image</code> object, you would return that from your code and then send it with the <code>flask.send_file</code> function as <a href=\"https://stackoverflow.com/a/10170635/5854907\">demonstrated here</a>. Lots of links and no code, but these links along with the tutorial I linked to initially should get you where you need to go.</p>\n\n<p><strong>Note:</strong> In case it wasn't clear, your code should return <code>Image.fromarray(face_image)</code> and not use the <code>show</code> function.</p>\n"}], "owner": {"reputation": 173, "user_id": 5434466, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/c81d68ca4e2a3a647eedf738dd81ea9d?s=128&d=identicon&r=PG&f=1", "display_name": "tech_a_break", "link": "https://stackoverflow.com/users/5434466/tech-a-break"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 690, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490830673, "creation_date": 1490823461, "last_edit_date": 1490823762, "question_id": 43104600, "link": "https://stackoverflow.com/questions/43104600/how-to-run-python-script-as-a-web-service-with-user-provided-image", "title": "How to run python script as a web service with user provided image?", "body": "<p>I have a Python(2.7) script which detects faces in an image which works fine.</p>\n\n<pre><code>from PIL import Image\nimport face_recognition\n\n\n# Load the jpg file into a numpy array\nimage = face_recognition.load_image_file(\"/PATH_TO_IMAGE/IMAGE.jpg\")\n\n# Find all the faces in the image\nface_locations = face_recognition.face_locations(image)\n\n# a = print(\"Found {} face(s) in this photograph.\".format(len(face_locations)))\nfor face_location in face_locations:\n\n    # Print the location of each face in this image\n  top, right, bottom, left = face_location\n  print(\"A face is located at pixel location Top: {}, Left: {}, Bottom: {}, Right: {}\".format(top, left, bottom, right))\n\n    # You can access the actual face itself like this:\n  face_image = image[top:bottom, left:right]\n  pil_image = Image.fromarray(face_image)\n  pil_image.show()\n</code></pre>\n\n<p>Now, I want to make it as a <a href=\"http://localhost:8080/detect\" rel=\"nofollow noreferrer\">http://localhost:8080/detect</a> so that user can provide an image and clicking on Submit button will display the output. I think there are few ways to do this, either using Flask, Django or Web server. But not sure which is the simplest way to do this and how to go about it. How to take this code and convert into a webservice? What code changes are required? Any code sample will be of great help.</p>\n"}, {"tags": ["python", "python-2.7", "jenkins"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1490823362, "post_id": 43104540, "comment_id": 73290779, "body": "<a href=\"https://en.wikipedia.org/wiki/Persistence_(computer_science)\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Persistence_(computer_science)</a>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1490823611, "post_id": 43104540, "comment_id": 73290869, "body": "In short, you need to save and load that value whenever you run the process. So, perhaps a database, or maybe a simple file if it is just a number. Likely, it is good to stick with some portable text-serialization format like JSON."}, {"owner": {"reputation": 197, "user_id": 7519421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e6be1384aeacb8f83b992b651ab4880?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7519421/alex"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1490825020, "post_id": 43104540, "comment_id": 73291413, "body": "Can you explain how to achieve that I have tried with the database option as sqllite(but it wont be worth for a small file like this) another option what you said is json which I have no idea can you provide a bit insight in this about the approach."}], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 7519421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e6be1384aeacb8f83b992b651ab4880?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7519421/alex"}, "edited": false, "score": 0, "creation_date": 1490825645, "post_id": 43104826, "comment_id": 73291654, "body": "Thanks , here I have the reference as 3 it should not decrease in number , if the persons entered are two still i should have the bottles as 3  so implementing the logic above can give false positives. Idea is if the number is more than 3 It should retain the value, so that next time when I execute the code again it should never decrease from 3 but if value is increased , suppose 4 it should check the condition from 4 onwards."}, {"owner": {"reputation": 1444, "user_id": 5245032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38ff968d478fc79749ada034222566df?s=128&d=identicon&r=PG&f=1", "display_name": "Robert I", "link": "https://stackoverflow.com/users/5245032/robert-i"}, "reply_to_user": {"reputation": 197, "user_id": 7519421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e6be1384aeacb8f83b992b651ab4880?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7519421/alex"}, "edited": false, "score": 0, "creation_date": 1490825738, "post_id": 43104826, "comment_id": 73291691, "body": "so if the new value is 10 but the visitors are under 10, visitors should be 3?"}, {"owner": {"reputation": 197, "user_id": 7519421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e6be1384aeacb8f83b992b651ab4880?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7519421/alex"}, "edited": false, "score": 0, "creation_date": 1490826100, "post_id": 43104826, "comment_id": 73291821, "body": "No , my source url  &#39;datasource = &quot;www.PPrestraunt.com/personsentered&quot; &#39; can give me value as anything it can be 10 or 2 too. but when the value becomes 2 the condition &#39;if(visitors &gt; 3)&#39; should check from 3 only not from 2."}, {"owner": {"reputation": 197, "user_id": 7519421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e6be1384aeacb8f83b992b651ab4880?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7519421/alex"}, "edited": false, "score": 0, "creation_date": 1490826612, "post_id": 43104826, "comment_id": 73292006, "body": "Both my files are in python extension , so will it write the data in that extension or as text ? cant i overwrite the same py file?"}, {"owner": {"reputation": 1444, "user_id": 5245032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38ff968d478fc79749ada034222566df?s=128&d=identicon&r=PG&f=1", "display_name": "Robert I", "link": "https://stackoverflow.com/users/5245032/robert-i"}, "reply_to_user": {"reputation": 197, "user_id": 7519421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e6be1384aeacb8f83b992b651ab4880?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7519421/alex"}, "edited": false, "score": 0, "creation_date": 1490826709, "post_id": 43104826, "comment_id": 73292038, "body": "it will write it as a general file, you can change data_file to  data_file = &quot;visitor_counter.txt&quot;;  if this makes you happy :) but extension doesn&#39;t change the file contents"}, {"owner": {"reputation": 197, "user_id": 7519421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e6be1384aeacb8f83b992b651ab4880?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7519421/alex"}, "edited": false, "score": 0, "creation_date": 1490827397, "post_id": 43104826, "comment_id": 73292265, "body": "the code snippet u provided above should be run in file1 itself ? will it create a new file as I have to import the same in file2."}, {"owner": {"reputation": 197, "user_id": 7519421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e6be1384aeacb8f83b992b651ab4880?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7519421/alex"}, "edited": false, "score": 0, "creation_date": 1490827940, "post_id": 43104826, "comment_id": 73292430, "body": "I have run the code above it checks of the file is greater than 3 but doesn&#39;t appends to the 2nd run still it takes the condition value as 3 itself."}, {"owner": {"reputation": 1444, "user_id": 5245032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38ff968d478fc79749ada034222566df?s=128&d=identicon&r=PG&f=1", "display_name": "Robert I", "link": "https://stackoverflow.com/users/5245032/robert-i"}, "reply_to_user": {"reputation": 197, "user_id": 7519421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e6be1384aeacb8f83b992b651ab4880?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7519421/alex"}, "edited": false, "score": 0, "creation_date": 1490828359, "post_id": 43104826, "comment_id": 73292547, "body": "next run compares to 4? then compare 5? 6..7.8...9..10? Depending on how many times it is greater than the requirement? Otherwise the value will be equal to the requirement?"}, {"owner": {"reputation": 197, "user_id": 7519421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e6be1384aeacb8f83b992b651ab4880?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7519421/alex"}, "edited": false, "score": 0, "creation_date": 1490829011, "post_id": 43104826, "comment_id": 73292739, "body": "excatly :-) if visitors &gt; 3 (suppose 4) is the result I got from source url then in next run the the condition it should check is visitors &gt; 4 , now if visitors are not greater than 4 then retain the value as 4 . but if the value i get from source url as 2 then it should retain the last value itself as 4."}, {"owner": {"reputation": 1444, "user_id": 5245032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38ff968d478fc79749ada034222566df?s=128&d=identicon&r=PG&f=1", "display_name": "Robert I", "link": "https://stackoverflow.com/users/5245032/robert-i"}, "reply_to_user": {"reputation": 197, "user_id": 7519421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e6be1384aeacb8f83b992b651ab4880?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7519421/alex"}, "edited": false, "score": 0, "creation_date": 1490829446, "post_id": 43104826, "comment_id": 73292866, "body": "@Alex i think i am very close to what you want, however you need to decide what you want for the line i commented in the // alex part. the first one will just increase the lower limit by 1 each time visitors is greater than the requirement. the 2nd one will set it to the current visitor count when it greater than the lower. try them both :)"}, {"owner": {"reputation": 197, "user_id": 7519421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e6be1384aeacb8f83b992b651ab4880?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7519421/alex"}, "edited": false, "score": 0, "creation_date": 1490831398, "post_id": 43104826, "comment_id": 73293466, "body": "Hey thankyou very much for the efforts. I have edited the part from edit hope now u get the requirment :-) once again thnks for the efforts"}, {"owner": {"reputation": 197, "user_id": 7519421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e6be1384aeacb8f83b992b651ab4880?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7519421/alex"}, "edited": false, "score": 0, "creation_date": 1490909931, "post_id": 43104826, "comment_id": 73336352, "body": "I am accepting the answer since It worked properly, thanks a lot @Robert. Just a clarification the new file which it is generating is a text file so If I import the variable from that file in python will it be a problem??"}], "tags": [], "owner": {"reputation": 1444, "user_id": 5245032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38ff968d478fc79749ada034222566df?s=128&d=identicon&r=PG&f=1", "display_name": "Robert I", "link": "https://stackoverflow.com/users/5245032/robert-i"}, "is_accepted": false, "score": 0, "last_activity_date": 1490829350, "last_edit_date": 1490829350, "creation_date": 1490824351, "answer_id": 43104826, "question_id": 43104540, "link": "https://stackoverflow.com/questions/43104540/python-2-7-store-the-variable-value-permanently-even-when-i-run-the-session-ne/43104826#43104826", "title": "Python 2.7 : store the variable value permanently even when I run the session next time", "body": "<p>Like what @juanpa wrote.</p>\n\n<p>Here is a small program that increments a counter, you can tailor it to your code</p>\n\n<pre><code>import os\ndata_file = \"lower_bound.txt\"\nis_file_empty = (os.path.isfile(data_file)==False) or (os.stat(data_file).st_size == 0)\nif (is_file_empty):\n    with open(data_file,\"w\") as f:\n        f.write(\"3\");\n\n\ndatasource = \"www.PPrestraunt.com/personsentered\"\ndata = len(datasource) #gives me the live value of the number of persons entered\nlower_bound = 0;\nwith open(data_file,\"r\") as f:\n    lower_bound = int(f.read());\n\nif (visitors&gt;lower_bound):\n    bottles = data\n    visitors = bottles\n    print bottles\n    // @Alex either lower_bound+=1; or lower_bound = visitors not sure what you want\nelse: \n    visitors = lower_bound;\nwith open(data_file,\"w\") as f:\n    f.write(str(lower_bound));\nprint lower_bound,\"is the new minimum and\",visitors,\"is the current visitor count\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 197, "user_id": 7519421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e6be1384aeacb8f83b992b651ab4880?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7519421/alex"}, "edited": false, "score": 0, "creation_date": 1490826781, "post_id": 43105304, "comment_id": 73292054, "body": "Thanks but i dont want to count the execution of code, rather the data inside"}, {"owner": {"reputation": 1531, "user_id": 5365597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e5Md6.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5365597/tom"}, "reply_to_user": {"reputation": 197, "user_id": 7519421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e6be1384aeacb8f83b992b651ab4880?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7519421/alex"}, "edited": false, "score": 0, "creation_date": 1490826873, "post_id": 43105304, "comment_id": 73292087, "body": "So each time you run the code the number of visitors will change? What data do you want to persist between runs?"}, {"owner": {"reputation": 197, "user_id": 7519421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e6be1384aeacb8f83b992b651ab4880?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7519421/alex"}, "edited": false, "score": 0, "creation_date": 1490827258, "post_id": 43105304, "comment_id": 73292212, "body": "yes , that depends on my source url  if in file1 the visitors data changes to a new value (base value =3, suppose it changes to 4) then it should retain the value so that when I run file2 it takes the value 4 and not 3."}, {"owner": {"reputation": 1531, "user_id": 5365597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e5Md6.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5365597/tom"}, "reply_to_user": {"reputation": 197, "user_id": 7519421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e6be1384aeacb8f83b992b651ab4880?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7519421/alex"}, "edited": false, "score": 0, "creation_date": 1490827399, "post_id": 43105304, "comment_id": 73292269, "body": "Ok so if it is 10, then it will check if its greater then 10 next time. What needs to happen if it then decreases to 5?"}, {"owner": {"reputation": 197, "user_id": 7519421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e6be1384aeacb8f83b992b651ab4880?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7519421/alex"}, "edited": false, "score": 0, "creation_date": 1490827685, "post_id": 43105304, "comment_id": 73292356, "body": "whatever is the value in file1 that should be stored. here is the logic  1st run [in file 1: if b &gt; 3 then a=b or else a =3 ; in file 2 import a.] 2nd run [if b was &gt;3 in first run (suppose 4) then 2nd run should check the condition b&gt;4 ; in file 2 import a]"}], "tags": [], "owner": {"reputation": 1531, "user_id": 5365597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e5Md6.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5365597/tom"}, "is_accepted": false, "score": 0, "last_activity_date": 1490826455, "creation_date": 1490826455, "answer_id": 43105304, "question_id": 43104540, "link": "https://stackoverflow.com/questions/43104540/python-2-7-store-the-variable-value-permanently-even-when-i-run-the-session-ne/43105304#43105304", "title": "Python 2.7 : store the variable value permanently even when I run the session next time", "body": "<p>This would be a great scenario for pickling. You can pickle data (in your case a counter) and store this data, then retrieve it at a later point in time:</p>\n\n<pre><code>import pickle\n\ndef your_code(counter):\n    # Replace this with your code and use the counter variable.\n    # Every time you execute the code it will increase\n    # e.g. 3, 4, 5, 6 ....\n    print(counter)\n\ntry:\n    counter = pickle.load(open('counter.pckl', 'rb'))\n    counter += 1\n    pickle.dump(counter, open('counter.pckl', 'wb'))\n    # Now execute your code with the new counter:\n    your_code(counter)\n\nexcept:\n    counter = 3\n    pickle.dump(counter, open('counter.pckl', 'wb'))\n    # Execute your code for the first time. This will only happen once.\n    your_code(counter)\n</code></pre>\n\n<p>The first time you execute this code, the counter will be initialized to 3. You can then call your existing code as a function and use this counter. Whenever you run the script, the counter will increase and your code will use the new version of counter: <code>e.g. 3, 4, 5, 6</code>.</p>\n"}], "owner": {"reputation": 197, "user_id": 7519421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e6be1384aeacb8f83b992b651ab4880?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7519421/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490831229, "creation_date": 1490823215, "last_edit_date": 1490831229, "question_id": 43104540, "link": "https://stackoverflow.com/questions/43104540/python-2-7-store-the-variable-value-permanently-even-when-i-run-the-session-ne", "title": "Python 2.7 : store the variable value permanently even when I run the session next time", "body": "<p>Scenario: python code which checks the number of visitors entered through a gate.\ndepending on that number I build the next job.</p>\n\n<p>EDIT 1 : </p>\n\n#\n\n<p>file1 :( \nFirst Run\nthis file counts the number of visitors that are arriving default is 3 in my case. Now i execute the file and I found that visitors arrived are 4 . Now and export the same to file2 and print the visitor count as 4 at the same time the visitors value is changed to 4 now in file1. </p>\n\n<p>Now the second run:</p>\n\n<p>Now in file1 the visitors value is 4 and it is checking if visitors > 4 , now if the count is 4 then i export the same to file2 if count is 5 now then i export the same to file2 and retain the value as 5 **count of visitors completely depends on the URL) ####</p>\n\n<pre><code>datasource = \"www.PPrestraunt.com/personsentered\"\ndata = len(datasource) #gives me the live value of the number of persons entered\nif(visitors &gt; 3): \n   bottles = data\n   visitors = bottles\n   print bottles\nelse:\n   visitors = 3\n</code></pre>\n\n<p>this above code is imported to a another file which has the working</p>\n\n<p>file2:</p>\n\n<pre><code>from file1 import visitors\nnumber_of_bottles = visitors\nprint number_of_bottles\n</code></pre>\n\n<p>I have setup the same in jenkins job so it builds every 5 mins.\nIn the above code the value of visitors is not changing every time I am running the code value remains 3 even though the number is increased to 4.</p>\n\n<p>expected case: If value is more than 3 value should be retained in next session too and the if condition should now check for the new value ex: (if(visitors > 4)</p>\n\n<p>any help is appreciated.  </p>\n"}, {"tags": ["python", "python-3.x", "kivy", "kivy-language"], "comments": [{"owner": {"reputation": 7293, "user_id": 5994041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dWWF9.png?s=128&g=1", "display_name": "Peter Badida", "link": "https://stackoverflow.com/users/5994041/peter-badida"}, "edited": false, "score": 0, "creation_date": 1490883601, "post_id": 43104533, "comment_id": 73320256, "body": "Definitely check the <a href=\"https://github.com/kivy/kivy/tree/master/examples\" rel=\"nofollow noreferrer\">examples</a> folder in Kivy repository."}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 6126511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd1450710de9e0d00bb1eb1012fef39?s=128&d=identicon&r=PG&f=1", "display_name": "Collin Craige", "link": "https://stackoverflow.com/users/6126511/collin-craige"}, "is_accepted": false, "score": 0, "last_activity_date": 1490826595, "creation_date": 1490826595, "answer_id": 43105337, "question_id": 43104533, "link": "https://stackoverflow.com/questions/43104533/loading-image-in-kivy/43105337#43105337", "title": "Loading Image in Kivy", "body": "<p>I don't think your canvas should be \"loose\" like that. Place it inside of a Widget, this will let you use Kivy's various layouts to arrange things. It will also let you insert an Image above the widget and without making the image spin around.</p>\n\n<p>A second thing, use rgba so you can specify transparencies for the background. This example below works for me, just replace the Builder string with this:</p>\n\n<pre><code>\"\"\"&lt;Loading&gt;:\nFloatLayout:\n    Image:\n        source: 'logo.png'\n    Widget:\n        canvas:\n            Rotate:\n                angle: root.angle\n                origin: self.center\n            Color:\n                rgba: 1, 1, 1, 0\n\n            Ellipse:    \n                size: min(self.size), min(self.size)\n                pos: 0.5*self.size[0] - 0.5*min(self.size), 0.5*self.size[1] - 0.5*min(self.size)\n            Color:\n                rgba: .5, 0, 1, 1\n\n            Ellipse:    \n                size: 30, 30\n                pos: 0.5*root.size[0]+25, 0.8*root.size[1]-25\n            Color:\n                rgba: 0.5, 0, 1\"\"\"\n</code></pre>\n\n<p>I also attached our Departments logo that I used for the example. I leave it to you to tweak sizes and add the appropriate resizing calls.<a href=\"https://i.stack.imgur.com/DyYHI.png\" rel=\"nofollow noreferrer\">logo</a></p>\n"}], "owner": {"reputation": 1, "user_id": 7788408, "user_type": "registered", "profile_image": "https://graph.facebook.com/1916982538547647/picture?type=large", "display_name": "Rushabh Phadkule", "link": "https://stackoverflow.com/users/7788408/rushabh-phadkule"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1338, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490826595, "creation_date": 1490823201, "last_edit_date": 1490826433, "question_id": 43104533, "link": "https://stackoverflow.com/questions/43104533/loading-image-in-kivy", "title": "Loading Image in Kivy", "body": "<p>I want an image to be displayed in the center of the layout. I could not figure it out. Is there any way to display the image on the center of the layout and be there till the animation is stopped?</p>\n\n<p>Here is my code.</p>\n\n<pre><code>from kivy.app import App\nfrom kivy.lang import Builder\nfrom kivy.uix.floatlayout import FloatLayout\nfrom kivy.animation import Animation\nfrom kivy.properties import NumericProperty\n\nBuilder.load_string('''                               \n&lt;Loading&gt;:\n    canvas:\n        Rotate:\n            angle: root.angle\n            origin: self.center\n        Color:\n            rgb: .0, 0, -.1\n        Ellipse:    \n            size: min(self.size), min(self.size)\n            pos: 0.5*self.size[0] - 0.5*min(self.size), 0.5*self.size[1] - 0.5*min(self.size)\n        Color:\n            rgb: .5, 0, 1\n        Ellipse:    \n            size: 30, 30\n            pos: 0.5*root.size[0]+25, 0.8*root.size[1]-25\n''')\n\n\nclass Loading(FloatLayout):\n    angle = NumericProperty(0)\n\n    def __init__(self, **kwargs):\n        super(Loading, self).__init__(**kwargs)\n        anim = Animation(angle = 1009, duration=2.5)\n        anim += Animation(angle = 1900, duration=2.5)\n        anim.repeat = True\n        anim.start(self)\n\n    def on_angle(self, item, angle):\n       if angle == 360:\n           item.angle = 0\n\n\nclass TestApp(App):\n    def build(self):\n\n        return Loading()\n\nTestApp().run()\n</code></pre>\n"}, {"tags": ["python", "itertools"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 7787241, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210906489890799/picture?type=large", "display_name": "Chad Bockholt", "link": "https://stackoverflow.com/users/7787241/chad-bockholt"}, "edited": false, "score": 0, "creation_date": 1490823654, "post_id": 43104584, "comment_id": 73290887, "body": "I think that&#39;s the one! Thanks so much! I&#39;ll accept your answer once it lets me."}], "tags": [], "owner": {"reputation": 304245, "user_id": 216074, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/609c93bafd659500f83fde04802a9be5?s=128&d=identicon&r=PG", "display_name": "poke", "link": "https://stackoverflow.com/users/216074/poke"}, "is_accepted": true, "score": 2, "last_activity_date": 1490823416, "creation_date": 1490823416, "answer_id": 43104584, "question_id": 43104514, "link": "https://stackoverflow.com/questions/43104514/itertools-combinations-with-replacement-with-regard-to-ordering/43104584#43104584", "title": "itertools.combinations_with_replacement() with regard to ordering", "body": "<p>You are looking for <a href=\"https://docs.python.org/3/library/itertools.html#itertools.product\" rel=\"nofollow noreferrer\"><code>itertools.product</code></a>:</p>\n\n<pre><code>&gt;&gt;&gt; max, order = 3, 2\n&gt;&gt;&gt; print(list(itertools.product(range(max + 1), repeat=order)))\n[(0, 0), (0, 1), (0, 2), (0, 3),\n (1, 0), (1, 1), (1, 2), (1, 3),\n (2, 0), (2, 1), (2, 2), (2, 3),\n (3, 0), (3, 1), (3, 2), (3, 3)]\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 7787241, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210906489890799/picture?type=large", "display_name": "Chad Bockholt", "link": "https://stackoverflow.com/users/7787241/chad-bockholt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 43104584, "answer_count": 1, "score": -1, "last_activity_date": 1490823492, "creation_date": 1490823125, "last_edit_date": 1490823492, "question_id": 43104514, "link": "https://stackoverflow.com/questions/43104514/itertools-combinations-with-replacement-with-regard-to-ordering", "title": "itertools.combinations_with_replacement() with regard to ordering", "body": "<p>I need to produce, given an order and a max, a list of all 'order' length lists with each element in range(max). itertools.combinations_with_replacement() doesn't work because while it does give most, in an example where I want</p>\n\n<pre><code>max, order = 3, 2\n[(0,0), (0,1), (0,2), (0,3), (1,0), (1,1), (1,2), (1,3), (2,0), (2,1), (2,2), (2,3), (3,0), (3,1), (3,2), (3,3)]\n</code></pre>\n\n<p>the following code shorts me a few elements</p>\n\n<pre><code>list(itertools.combinations_with_replacement([x for x in range(max+1)], order))\n\n[(0,0), (0,1), (0,2), (0,3), (1,1), (1,2), (1,3), (2,2), (2,3), (3,3)]\n</code></pre>\n\n<p>specifically I need to know if there is an itertools, or other package that will give me the first list above. i.e. I need both (0,1) and (1,0). or in an order=3 case, (0, 0, 1) (0, 1, 0) and (1, 0, 0) will all need to be included</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 1295, "user_id": 3212246, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c8d82749b8b5ebcba450be264de56f21?s=128&d=identicon&r=PG&f=1", "display_name": "dissidia", "link": "https://stackoverflow.com/users/3212246/dissidia"}, "edited": false, "score": 0, "creation_date": 1490827289, "post_id": 43104477, "comment_id": 73292223, "body": "I did not get a chance to test this as it appears I need to install it. But I&#39;m sure it works as well!"}], "tags": [], "owner": {"reputation": 4611, "user_id": 7511971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Byz18.jpg?s=128&g=1", "display_name": "Ricardo Branco", "link": "https://stackoverflow.com/users/7511971/ricardo-branco"}, "is_accepted": false, "score": 1, "last_activity_date": 1490822935, "creation_date": 1490822935, "answer_id": 43104477, "question_id": 43104435, "link": "https://stackoverflow.com/questions/43104435/auto-input-answer-for-a-terminal-command-within-python-script/43104477#43104477", "title": "Auto input answer for a terminal command within python script", "body": "<p>Use the <strong>pexpect module</strong>.  It's basically <strong>expect</strong> used in shell scripts, for Python.</p>\n"}, {"comments": [{"owner": {"reputation": 18509, "user_id": 363262, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/3ekjR.png?s=128&g=1", "display_name": "Juan Cort&#233;s", "link": "https://stackoverflow.com/users/363262/juan-cort%c3%a9s"}, "reply_to_user": {"reputation": 1295, "user_id": 3212246, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c8d82749b8b5ebcba450be264de56f21?s=128&d=identicon&r=PG&f=1", "display_name": "dissidia", "link": "https://stackoverflow.com/users/3212246/dissidia"}, "edited": false, "score": 0, "creation_date": 1490828038, "post_id": 43104495, "comment_id": 73292454, "body": "Glad I could help @dissidia"}], "tags": [], "owner": {"reputation": 18509, "user_id": 363262, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/3ekjR.png?s=128&g=1", "display_name": "Juan Cort&#233;s", "link": "https://stackoverflow.com/users/363262/juan-cort%c3%a9s"}, "is_accepted": true, "score": 1, "last_activity_date": 1490823751, "last_edit_date": 1490823751, "creation_date": 1490823039, "answer_id": 43104495, "question_id": 43104435, "link": "https://stackoverflow.com/questions/43104435/auto-input-answer-for-a-terminal-command-within-python-script/43104495#43104495", "title": "Auto input answer for a terminal command within python script", "body": "<p>You'd need to use a <a href=\"https://docs.python.org/3/library/pipes.html\" rel=\"nofollow noreferrer\">pipe</a>, that way you can actually write to that pipe an answer, don't forget to close the pipe once you're done with it.</p>\n\n<pre><code>p = os.popen(\"myCmd -s {0}\".format(item), \"w\")\np.write(\"y\\n\")\n</code></pre>\n\n<p><a href=\"https://docs.python.org/3/library/os.html#os.popen\" rel=\"nofollow noreferrer\"><code>popen</code></a> documentation</p>\n"}], "owner": {"reputation": 1295, "user_id": 3212246, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c8d82749b8b5ebcba450be264de56f21?s=128&d=identicon&r=PG&f=1", "display_name": "dissidia", "link": "https://stackoverflow.com/users/3212246/dissidia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 857, "favorite_count": 0, "accepted_answer_id": 43104495, "answer_count": 2, "score": 1, "last_activity_date": 1490823751, "creation_date": 1490822739, "question_id": 43104435, "link": "https://stackoverflow.com/questions/43104435/auto-input-answer-for-a-terminal-command-within-python-script", "title": "Auto input answer for a terminal command within python script", "body": "<p>I made a python script in which it runs a specified terminal command.</p>\n\n<pre><code>def main(my_list):\n    for item in my_list:\n        os.system(\"myCmd -s {0}\".format(item))\n\n    item_list = ['itemA', 'itemB', 'itemC']\n    main(item_list)\n</code></pre>\n\n<p>As the terminal command I am trying to use does not accepts a list in the <code>-s</code> argument, which is the reason that I make it into a python script.\nWhile running the script, it works but I notice that it will prompts me with the following question:\n<code>Are you sure you want to continue (y/n)?</code></p>\n\n<p>This means I will need to punch in the <code>y</code> on my keyboard, 3 times in the above example.\nBut in the event if my list is huge, and should I not be on my desk, is there any way that I can script to make it accept 'y' as my answer, without me to press anything on the keyboard?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 7430, "user_id": 3474956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RWbuy.jpg?s=128&g=1", "display_name": "kilojoules", "link": "https://stackoverflow.com/users/3474956/kilojoules"}, "edited": false, "score": 0, "creation_date": 1490822582, "post_id": 43104370, "comment_id": 73290402, "body": "Your question is hard to understand. I think you want <code>filename = &#39;roll_&#39;+str(roll) + &#39;_&#39; + ID</code>."}, {"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 1, "creation_date": 1490822609, "post_id": 43104370, "comment_id": 73290413, "body": "Didn&#39;t you mean <code>+</code> instead of <code>*</code> ?"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 1, "creation_date": 1490823209, "post_id": 43104370, "comment_id": 73290709, "body": "<code>*</code> needs to be in a string, at the moment you&#39;re using it as a multiplier."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1490823231, "post_id": 43104370, "comment_id": 73290718, "body": "See also <a href=\"https://docs.python.org/2/library/fnmatch.html\" rel=\"nofollow noreferrer\"><b><code>fnmatch</code></b></a>"}], "answers": [{"comments": [{"owner": {"reputation": 3895, "user_id": 4972716, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/a7c5b54d4f13c6bb4d1d4d40ca4d4ad1?s=128&d=identicon&r=PG&f=1", "display_name": "Stacey", "link": "https://stackoverflow.com/users/4972716/stacey"}, "edited": false, "score": 0, "creation_date": 1490824003, "post_id": 43104397, "comment_id": 73291028, "body": "Thanks Austin, How would I add the ID element to Fn_format (I need to pass the ID (AAA or AAG etc) into the filename? Thanks"}, {"owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "reply_to_user": {"reputation": 3895, "user_id": 4972716, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/a7c5b54d4f13c6bb4d1d4d40ca4d4ad1?s=128&d=identicon&r=PG&f=1", "display_name": "Stacey", "link": "https://stackoverflow.com/users/4972716/stacey"}, "edited": false, "score": 0, "creation_date": 1490824293, "post_id": 43104397, "comment_id": 73291143, "body": "Add another <code>{}</code> in the right place in the format string, and call <code>.format(roll, id)</code>. See <a href=\"https://docs.python.org/3/library/string.html#formatstrings\" rel=\"nofollow noreferrer\">the docs</a> for a LOT about format strings."}, {"owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "reply_to_user": {"reputation": 3895, "user_id": 4972716, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/a7c5b54d4f13c6bb4d1d4d40ca4d4ad1?s=128&d=identicon&r=PG&f=1", "display_name": "Stacey", "link": "https://stackoverflow.com/users/4972716/stacey"}, "edited": false, "score": 0, "creation_date": 1490824366, "post_id": 43104397, "comment_id": 73291170, "body": "Probably &quot;roll_{}_oe_*_{}.XNGS&quot;, if I understand correctly."}, {"owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "reply_to_user": {"reputation": 3895, "user_id": 4972716, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/a7c5b54d4f13c6bb4d1d4d40ca4d4ad1?s=128&d=identicon&r=PG&f=1", "display_name": "Stacey", "link": "https://stackoverflow.com/users/4972716/stacey"}, "edited": false, "score": 0, "creation_date": 1490824503, "post_id": 43104397, "comment_id": 73291223, "body": "Edited to add <code>id</code>"}], "tags": [], "owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "is_accepted": false, "score": 2, "last_activity_date": 1490824493, "last_edit_date": 1490824493, "creation_date": 1490822591, "answer_id": 43104397, "question_id": 43104370, "link": "https://stackoverflow.com/questions/43104370/python-wildcard-in-the-middle-of-a-string/43104397#43104397", "title": "Python wildcard in the middle of a string", "body": "<p>I think you want the <a href=\"https://docs.python.org/3/library/glob.html?highlight=glob#module-glob\" rel=\"nofollow noreferrer\"><code>glob</code></a> module, and the <code>str.format(...)</code> method:</p>\n\n<pre><code># Don't know where this comes from.\nroll = 2\nid = 'AAC'\n\n# Format: roll_2_oe_2008-04-07_AAJ.XNGS\nFn_format= \"roll_{}_oe_*_{}.XNGS\"\n\n# Make a file-glob by putting the roll into format.\nrolled_files = Fn_format.format(roll, id)\n\n\nimport glob\n\nfor fname in glob.iglob(rolled_files):\n    print(\"Rolled file:\", fname)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3895, "user_id": 4972716, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/a7c5b54d4f13c6bb4d1d4d40ca4d4ad1?s=128&d=identicon&r=PG&f=1", "display_name": "Stacey", "link": "https://stackoverflow.com/users/4972716/stacey"}, "edited": false, "score": 0, "creation_date": 1490824266, "post_id": 43104459, "comment_id": 73291132, "body": "Thanks Jan, how would I include the date element into the filename?"}], "tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": false, "score": 0, "last_activity_date": 1490822872, "creation_date": 1490822872, "answer_id": 43104459, "question_id": 43104370, "link": "https://stackoverflow.com/questions/43104370/python-wildcard-in-the-middle-of-a-string/43104459#43104459", "title": "Python wildcard in the middle of a string", "body": "<p>You could use <code>format()</code>:</p>\n\n<pre><code>filename = 'roll_{}_{}'.format(roll, ID)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 2, "last_activity_date": 1490823013, "creation_date": 1490823013, "answer_id": 43104491, "question_id": 43104370, "link": "https://stackoverflow.com/questions/43104370/python-wildcard-in-the-middle-of-a-string/43104491#43104491", "title": "Python wildcard in the middle of a string", "body": "<p>You have to embed the wild card <em>as a character</em>, and make sure that you're file search interface accepts wild cards.</p>\n\n<pre><code>filename = 'roll_'+str(roll)'_*'+ID\n</code></pre>\n\n<p>However, note that this does <em>not</em> identify a specific file name: to do that, you need a system command (there are several to search and fetch file names).  The Python <strong>open</strong> function does <em>not</em> accept wild cards. </p>\n"}], "owner": {"reputation": 3895, "user_id": 4972716, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/a7c5b54d4f13c6bb4d1d4d40ca4d4ad1?s=128&d=identicon&r=PG&f=1", "display_name": "Stacey", "link": "https://stackoverflow.com/users/4972716/stacey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3965, "favorite_count": 0, "accepted_answer_id": 43104491, "answer_count": 3, "score": 3, "last_activity_date": 1552852484, "creation_date": 1490822472, "last_edit_date": 1552852484, "question_id": 43104370, "link": "https://stackoverflow.com/questions/43104370/python-wildcard-in-the-middle-of-a-string", "title": "Python wildcard in the middle of a string", "body": "<p>I have a directory with a number of files which all have the same basic filename format (below is a sample)</p>\n\n<pre><code>roll_0_oe_2008-03-24_AAA.XNGS\nroll_0_oe_2008-03-24_AAB.XNGS\nroll_1_oe_2008-03-31_AAC.XNGS\nroll_1_oe_2008-03-31_AAG.XNGS\nroll_2_oe_2008-04-07_AAR.XNGS\nroll_2_oe_2008-04-07_AAJ.XNGS\n</code></pre>\n\n<p>I am trying to select a file based on using:</p>\n\n<pre><code>filename = 'roll_'+str(roll)'_'*ID\n</code></pre>\n\n<p>where roll is an int that I convert to a string and ID is a string.  I'm using the wildcard * for the _oe_date element as i don't care about this part. I however get the following error:</p>\n\n<pre><code>TypeError: can't multiply sequence by non-int of type 'str'\n</code></pre>\n\n<p>How can I construct a filename using  wildcard in the middle?</p>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 6494, "user_id": 1079075, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/377054ee866280e0cea2acf7f8761fe0?s=128&d=identicon&r=PG", "display_name": "Seanny123", "link": "https://stackoverflow.com/users/1079075/seanny123"}, "edited": false, "score": 0, "creation_date": 1490842275, "post_id": 43104368, "comment_id": 73296140, "body": "Please paste the actual error output from your console. Trying to abbreviate it as you have just adds to the confusion."}, {"owner": {"reputation": 1872, "user_id": 2425654, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/q5XPD.jpg?s=128&g=1", "display_name": "thebadguy", "link": "https://stackoverflow.com/users/2425654/thebadguy"}, "edited": false, "score": 0, "creation_date": 1490846350, "post_id": 43104368, "comment_id": 73297142, "body": "try to change this     driver.find_element_by_xpath(&quot;//*[@id=&#39;js_3q9&#39;]/div[1]/div[1&zwnj;&#8203;]/div[2]/div/div/div&zwnj;&#8203;/div/div[2]/div/div/&zwnj;&#8203;div/div&quot;).send_keys(&zwnj;&#8203;&quot;Its Automated&quot;)  xpath to a relative xpath of text box/area where you want to write"}, {"owner": {"reputation": 1, "user_id": 7607511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6aaae85f66a2cc93ea50ee7e34bf7020?s=128&d=identicon&r=PG&f=1", "display_name": "Isha Arora", "link": "https://stackoverflow.com/users/7607511/isha-arora"}, "edited": false, "score": 0, "creation_date": 1490894229, "post_id": 43104368, "comment_id": 73327855, "body": "Traceback (most recent call last):   File &quot;fb.py&quot;, line 20, in &lt;module&gt;     element = wait.until(EC.element_to_be_clickable((By.XPATH,&quot;//*[@id=&#39;js&zwnj;&#8203;_e&#39;]/form/button/i&quot;)&zwnj;&#8203;))   File &quot;/Library/Python/2.7/site-packages/selenium/webdriver/suppor&zwnj;&#8203;t/wait.py&quot;, line 80, in until     raise TimeoutException(message, screen, stacktrace) selenium.common.exceptions.TimeoutException: Message:   This is the error i m getting now."}, {"owner": {"reputation": 1, "user_id": 7607511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6aaae85f66a2cc93ea50ee7e34bf7020?s=128&d=identicon&r=PG&f=1", "display_name": "Isha Arora", "link": "https://stackoverflow.com/users/7607511/isha-arora"}, "edited": false, "score": 0, "creation_date": 1490894308, "post_id": 43104368, "comment_id": 73327904, "body": "The code is not able to reach till last line.I will edit that xpath and try."}, {"owner": {"reputation": 1, "user_id": 7607511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6aaae85f66a2cc93ea50ee7e34bf7020?s=128&d=identicon&r=PG&f=1", "display_name": "Isha Arora", "link": "https://stackoverflow.com/users/7607511/isha-arora"}, "edited": false, "score": 0, "creation_date": 1490896813, "post_id": 43104368, "comment_id": 73329384, "body": "How to find element with the HTML link?                                                   &lt;div data-offset-key=&quot;282s5-0-0&quot; class=&quot;_1mf _1mj&quot;&gt;&lt;span data-offset-key=&quot;282s5-0-0&quot;&gt;&lt;br data-text=&quot;true&quot;&gt;&lt;/span&gt;&lt;/div&gt;  I m unable to use its css or xpath to locate element."}], "answers": [{"tags": [], "owner": {"reputation": 6494, "user_id": 1079075, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/377054ee866280e0cea2acf7f8761fe0?s=128&d=identicon&r=PG", "display_name": "Seanny123", "link": "https://stackoverflow.com/users/1079075/seanny123"}, "is_accepted": false, "score": 0, "last_activity_date": 1490842105, "creation_date": 1490842105, "answer_id": 43107622, "question_id": 43104368, "link": "https://stackoverflow.com/questions/43104368/trying-to-automate-facebook-login-and-writing-a-post-on-friends-timeline/43107622#43107622", "title": "Trying to automate facebook login and writing a post on friends timeline", "body": "<p>The error is telling you exactly what the problem is. The element you are trying to access via xpath is not being found on the document/page. Consequently, Selenium waits for a bit before timing out.</p>\n"}], "owner": {"reputation": 1, "user_id": 7607511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6aaae85f66a2cc93ea50ee7e34bf7020?s=128&d=identicon&r=PG&f=1", "display_name": "Isha Arora", "link": "https://stackoverflow.com/users/7607511/isha-arora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490865655, "creation_date": 1490822465, "last_edit_date": 1490865655, "question_id": 43104368, "link": "https://stackoverflow.com/questions/43104368/trying-to-automate-facebook-login-and-writing-a-post-on-friends-timeline", "title": "Trying to automate facebook login and writing a post on friends timeline", "body": "<p>Here is the code attached:</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.common.keys import Keys\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\n\nchrome_options = webdriver.ChromeOptions()\nprefs = {\"profile.default_content_setting_values.notifications\" : 2}\nchrome_options.add_experimental_option(\"prefs\",prefs)\ndriver = webdriver.Chrome(chrome_options=chrome_options)\ndriver.get(\"http://www.facebook.com/\")\ndriver.find_element_by_name(\"email\").send_keys(\"***EMAIL***\")\ndriver.find_element_by_id(\"pass\").send_keys(\"***PW***\")\nwait = WebDriverWait(driver, 15)\ndriver.find_element_by_xpath(\"//*[@id='loginbutton']\").click()\nwait = WebDriverWait(driver, 10)\nele = driver.find_element_by_name(\"q\")\nele.send_keys(\"**FRIEND NAME**\")\nwait = WebDriverWait(driver, 10)\nelement = wait.until(EC.element_to_be_clickable((By.XPATH,\"//*[@id='js_e']/form/button/i\")))\nelement.click()\nwait = WebDriverWait(driver, 5)\nelement = wait.until(EC.element_to_be_clickable((By.XPATH,\"//*[@id='js_9t']/img\")))\nelement.click()\ndriver.find_element_by_xpath(\"//*[@id='js_3q9']/div[1]/div[1]/div[2]/div/div/div/div/div[2]/div/div/div/div\").send_keys(\"Its Automated\")\n</code></pre>\n\n<p>The code is not working and gets stuck after logging in or after searching my friend's name and sometimes not even writing my friend's name. It's different every time not able to figure out what to do. The element locators also change all of sudden. Below are the errors I'm getting:</p>\n\n<p>1) <code>selenium.common.exceptions.InvalidElementStateException: Message: invalid element state</code></p>\n\n<p>2) <code>raise TimeoutException(message, screen, stacktrace)\nselenium.common.exceptions.TimeoutException: Message:</code></p>\n\n<p>3) <code>Message: stale element reference: element is not attached to the page document</code></p>\n"}, {"tags": ["python", "python-2.7"], "answers": [{"tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": true, "score": 1, "last_activity_date": 1490825357, "creation_date": 1490825357, "answer_id": 43105051, "question_id": 43104361, "link": "https://stackoverflow.com/questions/43104361/comparing-txt-files-in-python-using-askdirectory/43105051#43105051", "title": "Comparing .txt files in Python using askdirectory", "body": "<p>Consider this line of code:</p>\n\n<pre><code>with open(paths) as f:\n</code></pre>\n\n<p>Ask yourself, \"what is <code>paths</code>\"? It is a <em>list</em> of filenames, not a single file. That's pretty much what the error is telling you: that a list is an invalid file. </p>\n\n<p>Considering that you are looping over a list of filenames, my guess is that your intention is to do:</p>\n\n<pre><code>with open(file) as f:\n</code></pre>\n\n<p>or maybe</p>\n\n<pre><code>with open(paths[-1]) as f:\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 4862575, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10206681754067139/picture?type=large", "display_name": "Nathan1995", "link": "https://stackoverflow.com/users/4862575/nathan1995"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 43105051, "answer_count": 1, "score": 0, "last_activity_date": 1490831372, "creation_date": 1490822430, "last_edit_date": 1490831372, "question_id": 43104361, "link": "https://stackoverflow.com/questions/43104361/comparing-txt-files-in-python-using-askdirectory", "title": "Comparing .txt files in Python using askdirectory", "body": "<p>I have the below code to run through a directory and select all of the files and compare them to an inserted wordlist file. However I get the following error <code>TypeError: invalid file: ['C:/Users/Nathan/Desktop/chats\\\\(1,).out']</code> I cannot figure out how to change the os.path.join to correctly show the file location.</p>\n\n<pre><code>    self.wordopp = askdirectory(title=\"Select chat log directory\")\n    path = self.wordopp\n    files = os.listdir(path)\n    paths = []\n    wordlist = self.wordop\n    for file in files:\n        paths.append(os.path.join(path, file))\n        f = open(wordlist)\n        l = set(w.strip().lower() for w in f)\n        with open(paths) as f:\n            found = False\n            file = open(\"out.txt\", \"w\")\n            for line in paths:\n                line = line.lower()\n                if any(w in line for w in l):\n                    found = True\n                    file.write(line)\n                    print(line)\n                    if not found:\n                        print(line)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "getattr"], "comments": [{"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 2, "creation_date": 1490822348, "post_id": 43104315, "comment_id": 73290294, "body": "you&#39;d need to grab the class object via <code>globals()[classname]</code>; <code>getattr</code> won&#39;t find it for you. Consider creating a dictionary that holds classname-&gt;classobj values so you don&#39;t need to worry about going through <code>globals</code>."}, {"owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 3, "creation_date": 1490822361, "post_id": 43104315, "comment_id": 73290298, "body": "you have to use the instance as the first argument, not a string."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1490823311, "post_id": 43104315, "comment_id": 73290762, "body": "<code>seconds</code> is not <code>&quot;seconds&quot;</code>. A string represents text, not a class or anything else whose name happens to match the text stored in the string."}], "answers": [{"tags": [], "owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "is_accepted": false, "score": 2, "last_activity_date": 1490824102, "creation_date": 1490824102, "answer_id": 43104760, "question_id": 43104315, "link": "https://stackoverflow.com/questions/43104315/gettar-attribute-error-python/43104760#43104760", "title": "gettar attribute error - Python", "body": "<p>You are doing the <code>getattr</code> correctly. Your problem is that you need to convert from a string to an object - in this case, a reference to a <em>class</em> object.</p>\n\n<p>There are two ways to identify classes. First, you can identify them using their parent module, something like <code>abc.ABCMeta</code>. To do this, start with the <code>sys.modules</code> dictionary, and look up modules and submodules (that is: look up 'abc'). Then you will have a module, which will have the last part of the name ('ABCMeta') as one of its children. You can use <code>getattr</code> to extract the child from the module, and then use <code>getattr</code> again to get whatever member you want.</p>\n\n<pre><code>import sys\nmod = sys.modules['abc']\ncls = getattr(mod, 'ABCMeta')\nmethod = getattr(cls, 'displayTime') # Won't work, not available on class\n</code></pre>\n\n<p>The second approach is to assume that you have a name in your global namespace in whatever module you are using. For example, if you did something like:</p>\n\n<pre><code>from abc import ABCMeta as chicken\n</code></pre>\n\n<p>You could then refer to a global symbol, <code>chicken</code>, in your code, and it would mean the same thing. In this case, if you <em>have</em> already done the import, you can simply look up <code>'chicken'</code> in the <code>globals()</code> dictionary, as @Jim Fasarakis Hilliard suggested in a comment:</p>\n\n<pre><code>clsname = 'chicken'\ncls = globals()[clsname]\nmethod = getattr(cls, 'displayTime')\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7788358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c075168c6dd4bb45c0cc9e7bdf63467?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7788358/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 828, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1490824102, "creation_date": 1490822227, "question_id": 43104315, "link": "https://stackoverflow.com/questions/43104315/gettar-attribute-error-python", "title": "gettar attribute error - Python", "body": "<p>I keep getting the following error when trying to use \"getattr\":</p>\n\n<p><em>AttributeError: 'str' object has no attribute 'displayTime'</em></p>\n\n<p>Here is the code I am using:</p>\n\n<pre><code>    getattr(className,\"displayTime\")(self)\n</code></pre>\n\n<p>where \"className\" refers to a string that I have taken from a list and is also the name of a subclass I have in my program. \"displayTime\" is a method within that subclass.</p>\n\n<p>I tried to test it by inputing the name of the subclass directly into it:</p>\n\n<pre><code>    getattr(seconds,\"displayTime\")(self)\n</code></pre>\n\n<p>and this worked fine. Does anyone have any ideas what I am doing wrong?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "pandas", "conditional-statements", "subset", "built-in"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1490822268, "post_id": 43104309, "comment_id": 73290238, "body": "That really isn&#39;t the use case for <code>all</code>, and normally I would write that with <code>and</code>."}, {"owner": {"reputation": 6953, "user_id": 778533, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/XEGLp.jpg?s=128&g=1", "display_name": "tommy.carstensen", "link": "https://stackoverflow.com/users/778533/tommy-carstensen"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1490822303, "post_id": 43104309, "comment_id": 73290264, "body": "What is the use case for <code>all</code> then? Thanks."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1490822322, "post_id": 43104309, "comment_id": 73290280, "body": "something like <code>all(condition(x) for x in some_iterable)</code>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1490822461, "post_id": 43104309, "comment_id": 73290345, "body": "Note, your use of <code>all</code> does what you want, but it is not idiomatic. I would have to look at that code a couple of times before I grokked it. I would know immediately what the line using <code>and</code> is doing. Also, your use of <code>all</code>  creates an unnecessary intermediate data-structure, and uses function call. It&#39;s not efficient, and I wouldn&#39;t encourage it&#39;s use, especially if you are evaluating the condition repeatedly in a loop."}, {"owner": {"reputation": 6953, "user_id": 778533, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/XEGLp.jpg?s=128&g=1", "display_name": "tommy.carstensen", "link": "https://stackoverflow.com/users/778533/tommy-carstensen"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1490822539, "post_id": 43104309, "comment_id": 73290386, "body": "Thanks @juanpa.arrivillaga! I really apprecite your comment. I understand you. I mostly use <code>all</code> and <code>any</code>, when the evaluation is not expensive. I don&#39;t like ending lines with <code>and</code> and <code>&amp;</code> and <code>or</code>. I&#39;ll stick with the <code>&amp;</code> line endings then. They just look ugly to me :)"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1490822615, "post_id": 43104309, "comment_id": 73290421, "body": "I understand that! Indeed, it is against <a href=\"https://www.python.org/dev/peps/pep-0008/#should-a-line-break-before-or-after-a-binary-operator\" rel=\"nofollow noreferrer\">the official style guide</a>!"}, {"owner": {"reputation": 6953, "user_id": 778533, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/XEGLp.jpg?s=128&g=1", "display_name": "tommy.carstensen", "link": "https://stackoverflow.com/users/778533/tommy-carstensen"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1490822705, "post_id": 43104309, "comment_id": 73290464, "body": "Oh, I don&#39;t like them at the beginning of a line either :D Thanks for the link to the style guide! I haven&#39;t read PEP8 in a long time! I might just delete my question..."}, {"owner": {"reputation": 6953, "user_id": 778533, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/XEGLp.jpg?s=128&g=1", "display_name": "tommy.carstensen", "link": "https://stackoverflow.com/users/778533/tommy-carstensen"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1490823096, "post_id": 43104309, "comment_id": 73290649, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/139422/discussion-between-tommy-carstensen-and-juanpa-arrivillaga\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 4, "last_activity_date": 1490823194, "last_edit_date": 1495535457, "creation_date": 1490822742, "answer_id": 43104438, "question_id": 43104309, "link": "https://stackoverflow.com/questions/43104309/is-there-an-equivalent-of-the-python-built-in-function-all-in-pandas/43104438#43104438", "title": "Is there an equivalent of the python built in function `all` in pandas?", "body": "<p><a href=\"https://stackoverflow.com/questions/43104309/is-there-an-equivalent-of-the-python-built-in-function-all-in-pandas#comment73290345_43104309\">@juanpa.arrivillaga</a> already gave you a very good explanation about boolean indexing in Pandas.</p>\n\n<p>I'd like to give you a bit nicer alternative - <a href=\"http://pandas.pydata.org/pandas-docs/stable/indexing.html#the-query-method-experimental\" rel=\"nofollow noreferrer\">DataFrame.query()</a> method:</p>\n\n<pre><code>df.query(\"value1 &gt; @threshold1 and value2 &gt; @threshold2 and value3 in @list3\")\n</code></pre>\n\n<p>Demo:</p>\n\n<pre><code>In [138]: df = pd.DataFrame(np.random.randint(1, 10, (10, 3)),\n                            columns=['value1','value2','value3'])\n\nIn [139]: df\nOut[139]:\n   value1  value2  value3\n0       7       9       1\n1       4       1       3\n2       3       8       8\n3       2       8       9\n4       9       2       7\n5       5       8       9\n6       4       2       9\n7       7       2       5\n8       6       3       5\n9       9       1       5\n\nIn [140]: threshold1 = 2\n\nIn [141]: threshold2 = 4\n\nIn [142]: list3 = [1,9]\n\nIn [143]: df.query(\"value1 &gt; @threshold1 and value2 &gt; @threshold2 and value3 in @list3\")\nOut[143]:\n   value1  value2  value3\n0       7       9       1\n5       5       8       9\n</code></pre>\n"}], "owner": {"reputation": 6953, "user_id": 778533, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/XEGLp.jpg?s=128&g=1", "display_name": "tommy.carstensen", "link": "https://stackoverflow.com/users/778533/tommy-carstensen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1490823194, "creation_date": 1490822163, "question_id": 43104309, "link": "https://stackoverflow.com/questions/43104309/is-there-an-equivalent-of-the-python-built-in-function-all-in-pandas", "title": "Is there an equivalent of the python built in function `all` in pandas?", "body": "<p>I'm quyering a pandas dataframe <code>df</code> like this.</p>\n\n<pre><code>df = df[\n    (df.value1 &gt;= threshold1) &amp;\n    (df.value2 &gt;= threshold2) &amp;\n    (df.value3.isin(list3))\n    ]\n</code></pre>\n\n<p>Python has the built in function <a href=\"https://docs.python.org/3/library/functions.html#all\" rel=\"nofollow noreferrer\">all</a>, which allows this syntax:</p>\n\n<pre><code>if all([\n    value1 &gt; threshold1,\n    value2 &gt; threshold2,\n    value3 in list3,\n    ]):\n</code></pre>\n\n<p>Instead of this:</p>\n\n<pre><code>if (\n    value1 &gt; threshold1 and\n    value2 &gt; threshold2 and\n    value3 in list3,\n    ):\n</code></pre>\n\n<p>Does Pandas have something similar to <code>all</code> in Python? Thanks.</p>\n\n<p>Also, is this the fastest way of subsetting a Pandas dataframe based on multiple conditions?</p>\n"}, {"tags": ["python", "pandas", "dask"], "answers": [{"tags": [], "owner": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "is_accepted": true, "score": 8, "last_activity_date": 1490829378, "last_edit_date": 1490829378, "creation_date": 1490826152, "answer_id": 43105249, "question_id": 43104302, "link": "https://stackoverflow.com/questions/43104302/how-to-create-dask-dataframe-from-a-list-of-urls/43105249#43105249", "title": "How to create Dask DataFrame from a list of urls?", "body": "<p>Try using <a href=\"http://dask.pydata.org/en/latest/delayed.html\" rel=\"noreferrer\">dask.delayed</a> to turn each of your urls into a lazy pandas dataframe and then use <a href=\"http://dask.pydata.org/en/latest/dataframe-api.html#dask.dataframe.from_delayed\" rel=\"noreferrer\">dask.dataframe.from_delayed</a>  to turn those lazy values into a full dask dataframe</p>\n\n<pre><code>import pandas as pd\nimport dask\nimport dask.dataframe as dd\n\ndfs = [dask.delayed(pd.read_csv)(url) for url in urls]\n\ndf = dd.from_delayed(dfs)\n</code></pre>\n\n<p>This will read <em>one</em> of your links immediately in order to figure out metadata (column, dtypes).  If you know these dtypes and links ahead of time then you can avoid this by passing a sample empty dataframe to <code>dd.from_delayed(..., meta=sample_df)</code></p>\n\n<p>See also: <a href=\"http://dask.pydata.org/en/latest/delayed-collections.html\" rel=\"noreferrer\">http://dask.pydata.org/en/latest/delayed-collections.html</a></p>\n"}], "owner": {"reputation": 2790, "user_id": 2286597, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/013c320496bb12a3f08430d8d4b8e60c?s=128&d=identicon&r=PG", "display_name": "Philipp_Kats", "link": "https://stackoverflow.com/users/2286597/philipp-kats"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1754, "favorite_count": 2, "accepted_answer_id": 43105249, "answer_count": 1, "score": 4, "last_activity_date": 1490829378, "creation_date": 1490822140, "question_id": 43104302, "link": "https://stackoverflow.com/questions/43104302/how-to-create-dask-dataframe-from-a-list-of-urls", "title": "How to create Dask DataFrame from a list of urls?", "body": "<p>I have a list of the URLs, and I'd love to read them to the dask data frame\nat once, but it looks like <code>read_csv</code> can't use an asterisk for <code>http</code>. Is there any way to achieve that?</p>\n\n<p>Here is an example:</p>\n\n<pre><code>link = 'http://web.mta.info/developers/'\n\ndata = [     'data/nyct/turnstile/turnstile_170128.txt',\n                        'data/nyct/turnstile/turnstile_170121.txt',\n                        'data/nyct/turnstile/turnstile_170114.txt',\n                        'data/nyct/turnstile/turnstile_170107.txt' \n        ]\n</code></pre>\n\n<p>and what I want is</p>\n\n<p><code>df = dd.read_csv('XXXX*X')</code></p>\n"}, {"tags": ["python", "datetime", "arrow-python"], "answers": [{"comments": [{"owner": {"reputation": 608, "user_id": 157427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6963d67f7c8ece7f7625cc33a697f572?s=128&d=identicon&r=PG", "display_name": "kayluhb", "link": "https://stackoverflow.com/users/157427/kayluhb"}, "edited": false, "score": 1, "creation_date": 1549465991, "post_id": 43104436, "comment_id": 95913197, "body": "Using plural values with replace is being deprecated in favor of &#39;shift&#39; <a href=\"https://arrow.readthedocs.io/en/latest/#replace-shift\" rel=\"nofollow noreferrer\">arrow.readthedocs.io/en/latest/#replace-shift</a>.  This should become arrow.utcnow().shift(days=-1)"}], "tags": [], "owner": {"reputation": 513, "user_id": 178769, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/30258e273aba9442a20fa1585fbbf882?s=128&d=identicon&r=PG", "display_name": "jero", "link": "https://stackoverflow.com/users/178769/jero"}, "is_accepted": true, "score": 4, "last_activity_date": 1549484831, "last_edit_date": 1549484831, "creation_date": 1490822739, "answer_id": 43104436, "question_id": 43104264, "link": "https://stackoverflow.com/questions/43104264/getting-previous-day-datetime-from-arrow/43104436#43104436", "title": "Getting previous day datetime from arrow", "body": "<p>thanks kayluhb. update is to use shift: </p>\n\n<pre><code>arrow.utcnow().shift(days=-1)\n</code></pre>\n\n<p>you can use replace:</p>\n\n<pre><code> arrow.utcnow().replace(days=-1)\n</code></pre>\n"}], "owner": {"reputation": 18736, "user_id": 308827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/28f523030f3ecd9c9f2ad23ca745cc65?s=128&d=identicon&r=PG", "display_name": "user308827", "link": "https://stackoverflow.com/users/308827/user308827"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1332, "favorite_count": 0, "accepted_answer_id": 43104436, "answer_count": 1, "score": 3, "last_activity_date": 1549484831, "creation_date": 1490822010, "last_edit_date": 1534266779, "question_id": 43104264, "link": "https://stackoverflow.com/questions/43104264/getting-previous-day-datetime-from-arrow", "title": "Getting previous day datetime from arrow", "body": "<p>I can get current datetime from arrow like this:</p>\n\n<pre><code>arrow.utcnow().date()\n</code></pre>\n\n<p>or </p>\n\n<pre><code>arrow.get('2017-02-01').date()\n</code></pre>\n\n<p>How can I get the previous day datetime? This does not work:</p>\n\n<pre><code>arrow.utcnow().date() - 1\n</code></pre>\n\n<p>or</p>\n\n<pre><code> arrow.get('2017-02-01').date() - 1\n</code></pre>\n"}, {"tags": ["python", "csv", "pandas"], "comments": [{"owner": {"reputation": 182, "user_id": 5966084, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/--z05xOgneCU/AAAAAAAAAAI/AAAAAAAALjo/bFnR_9eJ-rY/photo.jpg?sz=128", "display_name": "Aly Abdelaziz", "link": "https://stackoverflow.com/users/5966084/aly-abdelaziz"}, "edited": false, "score": 0, "creation_date": 1490822605, "post_id": 43104261, "comment_id": 73290410, "body": "you would need something like <code>csv_data.write(row + &#39;ripe&#39;)</code>"}, {"owner": {"reputation": 182, "user_id": 5966084, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/--z05xOgneCU/AAAAAAAAAAI/AAAAAAAALjo/bFnR_9eJ-rY/photo.jpg?sz=128", "display_name": "Aly Abdelaziz", "link": "https://stackoverflow.com/users/5966084/aly-abdelaziz"}, "edited": false, "score": 0, "creation_date": 1490822626, "post_id": 43104261, "comment_id": 73290426, "body": "It is always advisable to create a new file rather then overwrite."}], "answers": [{"comments": [{"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1490823007, "post_id": 43104443, "comment_id": 73290607, "body": "You meant <code>&quot;true&quot;</code>, I suppose?"}, {"owner": {"reputation": 231, "user_id": 6847987, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a441b7c7dfba86bb55ad507f0657ccf5?s=128&d=identicon&r=PG&f=1", "display_name": "arokath", "link": "https://stackoverflow.com/users/6847987/arokath"}, "edited": false, "score": 0, "creation_date": 1490916936, "post_id": 43104443, "comment_id": 73338529, "body": "I ended up doing it a bit differently, but I like the idea of using a list and will play around with this method. Thank you very much for your help!"}], "tags": [], "owner": {"reputation": 9, "user_id": 5682808, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-z7VaZz1Eyio/AAAAAAAAAAI/AAAAAAAAA2o/ZsZvTWFFO5Q/photo.jpg?sz=128", "display_name": "Prof3sa", "link": "https://stackoverflow.com/users/5682808/prof3sa"}, "is_accepted": false, "score": 1, "last_activity_date": 1490911387, "last_edit_date": 1490911387, "creation_date": 1490822756, "answer_id": 43104443, "question_id": 43104261, "link": "https://stackoverflow.com/questions/43104261/python-writing-to-csv-in-a-for-loop-conditionally-adding-value-in-particular-c/43104443#43104443", "title": "Python: writing to CSV in a for-loop, conditionally adding value in particular column", "body": "<p>In order to make the changes, you have to add your new data to a location such as a list. This list will contain the results of your processing.</p>\n\n<pre><code>fruit_details= list()\ncsv_data = csv.reader(open('./data/fruit_data.csv', 'r'))\nfor row in csv_data:\n    fruit = row[0]\n    if fruit == input:\n       fruit_details.append([row[0],row[1],'true'])\n</code></pre>\n\n<p>The resulting list fruit_details, will then contain the fruits with true in the \"ripe\" column. If you one to append the non-fruit items, add and else statement which either puts false or row[2] as necessary.</p>\n"}, {"comments": [{"owner": {"reputation": 231, "user_id": 6847987, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a441b7c7dfba86bb55ad507f0657ccf5?s=128&d=identicon&r=PG&f=1", "display_name": "arokath", "link": "https://stackoverflow.com/users/6847987/arokath"}, "edited": false, "score": 1, "creation_date": 1490827195, "post_id": 43104713, "comment_id": 73292188, "body": "These aren&#39;t super large files, so I might look into option two. If I understand correctly: read out the original file using <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html#pandas.read_csv\" rel=\"nofollow noreferrer\">pandas.read_csv</a>, manipulate the dataframe, then write out using <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_csv.html\" rel=\"nofollow noreferrer\">pandas.DataFrame.to_csv</a> ?"}, {"owner": {"reputation": 54855, "user_id": 37751, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/GiarY.jpg?s=128&g=1", "display_name": "JD Long", "link": "https://stackoverflow.com/users/37751/jd-long"}, "reply_to_user": {"reputation": 231, "user_id": 6847987, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a441b7c7dfba86bb55ad507f0657ccf5?s=128&d=identicon&r=PG&f=1", "display_name": "arokath", "link": "https://stackoverflow.com/users/6847987/arokath"}, "edited": false, "score": 0, "creation_date": 1490881366, "post_id": 43104713, "comment_id": 73318526, "body": "i added an example of the second option showing reading in and out using pandas. I wasn&#39;t sure your logic for populating <code>ripe</code>"}, {"owner": {"reputation": 231, "user_id": 6847987, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a441b7c7dfba86bb55ad507f0657ccf5?s=128&d=identicon&r=PG&f=1", "display_name": "arokath", "link": "https://stackoverflow.com/users/6847987/arokath"}, "edited": false, "score": 0, "creation_date": 1490917152, "post_id": 43104713, "comment_id": 73338599, "body": "I really like this method, very elegant. I much appreciate the extra help. Thank you so much!"}], "tags": [], "owner": {"reputation": 54855, "user_id": 37751, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/GiarY.jpg?s=128&g=1", "display_name": "JD Long", "link": "https://stackoverflow.com/users/37751/jd-long"}, "is_accepted": true, "score": 3, "last_activity_date": 1490881929, "last_edit_date": 1495541421, "creation_date": 1490823919, "answer_id": 43104713, "question_id": 43104261, "link": "https://stackoverflow.com/questions/43104261/python-writing-to-csv-in-a-for-loop-conditionally-adding-value-in-particular-c/43104713#43104713", "title": "Python: writing to CSV in a for-loop, conditionally adding value in particular column", "body": "<p>You have, basically, two approaches:</p>\n\n<p>1- Open a second text file before your loop then loop through each row of the initial file and append rows to the second file. After all rows are done, close the initial file. Example: <a href=\"https://stackoverflow.com/questions/4706499/how-do-you-append-to-a-file\">How do you append to a file?</a></p>\n\n<p>2- Read in everything from the initial csv. Then make changes to the object you created (I highly recommend using Pandas for this). Then write out to a csv. Here's an example of that method:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\n# read in the csv\ncsv_data = pd.read_csv('./data/fruit_data.csv')\n\n# I'm partial to the numpy where logic when creating a new column based \n# on if/then logic on an existing column\ncsv_data['ripe'] = np.where(csv_data['fruit']==input, True, False)\n\n# write out the csv\ncsv_data.to_csv('./data/outfile.csv')\n</code></pre>\n\n<p>The choice between 1 and 2 should really come down to scale. If your csv is so big that you can't read it all in and manipulate it the way you want, then you should molest it line by line. If you can read the whole thing in and then manipulate it with Pandas, your life will be MUCH easier. </p>\n"}, {"comments": [{"owner": {"reputation": 231, "user_id": 6847987, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a441b7c7dfba86bb55ad507f0657ccf5?s=128&d=identicon&r=PG&f=1", "display_name": "arokath", "link": "https://stackoverflow.com/users/6847987/arokath"}, "edited": false, "score": 0, "creation_date": 1490916861, "post_id": 43105085, "comment_id": 73338506, "body": "Thank you, I ended up doing it a different way, but I&#39;ll certainly refer back to this in future."}], "tags": [], "owner": {"reputation": 11277, "user_id": 3657941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/304d8d4cceca5f9ce2383ff97b53e36b?s=128&d=identicon&r=PG&f=1", "display_name": "David Cullen", "link": "https://stackoverflow.com/users/3657941/david-cullen"}, "is_accepted": false, "score": 1, "last_activity_date": 1490826446, "last_edit_date": 1490826446, "creation_date": 1490825491, "answer_id": 43105085, "question_id": 43104261, "link": "https://stackoverflow.com/questions/43104261/python-writing-to-csv-in-a-for-loop-conditionally-adding-value-in-particular-c/43105085#43105085", "title": "Python: writing to CSV in a for-loop, conditionally adding value in particular column", "body": "<p>If you create a temporary file, you can write your rows as you read them. If you use <code>os.rename</code> on Unix, \"<a href=\"https://docs.python.org/2/library/os.html#os.rename\" rel=\"nofollow noreferrer\">the renaming will be an atomic operation</a>\":</p>\n\n<pre><code>import csv\nimport os\n\ndef update_fruit_data(input):\n    csv_file_name = 'data/fruit_data.csv'\n    tmp_file_name = \"%s.tmp\" % csv_file_name\n    # Update fruit data\n    with open(csv_file_name, 'r') as csv_input_file:\n        csv_reader = csv.reader(csv_input_file)\n        with open(tmp_file_name, 'w') as csv_output_file:\n            csv_writer = csv.writer(csv_output_file)\n            for row in csv_reader:\n                fruit = row[0]\n                if fruit == input:\n                    row[2] = 'true'\n                csv_writer.writerow(row)\n    # Rename tmp file to csv file\n    os.rename(tmp_file_name, csv_file_name)\n\nwhile True:\n    input = get_input()\n    update_fruit_data(input)\n</code></pre>\n\n<p>The <code>get_input</code> here is a stand-in for whatever you use to get the value of <code>input</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 182, "user_id": 5966084, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/--z05xOgneCU/AAAAAAAAAAI/AAAAAAAALjo/bFnR_9eJ-rY/photo.jpg?sz=128", "display_name": "Aly Abdelaziz", "link": "https://stackoverflow.com/users/5966084/aly-abdelaziz"}, "is_accepted": false, "score": 1, "last_activity_date": 1490825828, "creation_date": 1490825828, "answer_id": 43105170, "question_id": 43104261, "link": "https://stackoverflow.com/questions/43104261/python-writing-to-csv-in-a-for-loop-conditionally-adding-value-in-particular-c/43105170#43105170", "title": "Python: writing to CSV in a for-loop, conditionally adding value in particular column", "body": "<p>If you want to create a new CSV file</p>\n\n<pre><code>csv_data = csv.reader(open('./Desktop/fruit_data.csv', 'r'))\ncsv_new = csv.writer(open('./Desktop/fruit_new_data.csv', 'w'))\nfor row in csv_data:\n    fruit = row[0]\n    if fruit == input:\n        row.append(\"ripe\")\n        csv_new.writerow(row)\n    else:\n        csv_new.writerow(row)\n</code></pre>\n\n<p>Basically the only thing missing in your previous question is the last statment, which is to write, else is add in case the criteria does not match.</p>\n\n<p>Another possibility could be to use <code>linestartswith</code></p>\n"}], "owner": {"reputation": 231, "user_id": 6847987, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a441b7c7dfba86bb55ad507f0657ccf5?s=128&d=identicon&r=PG&f=1", "display_name": "arokath", "link": "https://stackoverflow.com/users/6847987/arokath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3519, "favorite_count": 0, "accepted_answer_id": 43104713, "answer_count": 4, "score": 3, "last_activity_date": 1490911387, "creation_date": 1490821997, "last_edit_date": 1490824220, "question_id": 43104261, "link": "https://stackoverflow.com/questions/43104261/python-writing-to-csv-in-a-for-loop-conditionally-adding-value-in-particular-c", "title": "Python: writing to CSV in a for-loop, conditionally adding value in particular column", "body": "<p>Here's an example of the contents of my CSV file:  </p>\n\n<pre><code>Fruit, colour, ripe,\n\napple, green,,\nbanana, yellow,,\npineapple, green,,\nplum, purple,,\n</code></pre>\n\n<p>I want to loop through the contents of the CSV file and according to a test (extrinsic to the CSV data, using an input value supplied to the enclosing function), end up with something like this:  </p>\n\n<pre><code>Fruit, colour, ripe,\n\napple, green, true, \nbanana, yellow,, \npineapple, green,, \nplum, purple, true,\n</code></pre>\n\n<p>My current code looks like this:</p>\n\n<pre><code>csv_data = csv.reader(open('./data/fruit_data.csv', 'r'))\nfor row in csv_data:\n    fruit = row[0]\n    if fruit == input:\n    # Here, write 'true' in the 'ripe' column.\n</code></pre>\n\n<p>It's easy enough to add new data in one go, using the CSV module or <code>pandas</code>, but here I need to add the data iteratively. It seems that I can't change the CSV file in place(?), but if I write out to a different CSV file, it's going to overwrite on each match within the loop, so it'll only reflect that value.</p>\n"}, {"tags": ["python", "anaconda", "pytorch"], "answers": [{"comments": [{"owner": {"reputation": 769, "user_id": 377674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dae99aa90f8b641a45f39c17c4f0fd6?s=128&d=identicon&r=PG", "display_name": "wmacura", "link": "https://stackoverflow.com/users/377674/wmacura"}, "edited": false, "score": 0, "creation_date": 1490843536, "post_id": 43106686, "comment_id": 73296477, "body": "Confirmed I have the same problem and downgrading solved it for me. Thanks Pedro!"}], "tags": [], "owner": {"reputation": 271, "user_id": 4522274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5b8d6baef40d78d137a2a3a0391477?s=128&d=identicon&r=PG", "display_name": "Pedro Tabacof", "link": "https://stackoverflow.com/users/4522274/pedro-tabacof"}, "is_accepted": false, "score": 5, "last_activity_date": 1490835606, "creation_date": 1490835606, "answer_id": 43106686, "question_id": 43104252, "link": "https://stackoverflow.com/questions/43104252/undefined-symbol-pyslice-adjustindices-when-importing-pytorch/43106686#43106686", "title": "undefined symbol: PySlice_AdjustIndices when importing PyTorch", "body": "<p>I have the same problem, maybe the build is broken for Ubuntu / Python 3.6.</p>\n\n<p>Anyway, until they fix this problem, you can install PyTorch by downgrading one version:</p>\n\n<p><code>conda install pytorch=0.1.10 torchvision -c soumith</code></p>\n\n<p>This version runs just fine on all my tests.</p>\n"}, {"tags": [], "owner": {"reputation": 2216, "user_id": 117844, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e8cc763ba11f929657e28cb0371b75c8?s=128&d=identicon&r=PG", "display_name": "smhx", "link": "https://stackoverflow.com/users/117844/smhx"}, "is_accepted": false, "score": 2, "last_activity_date": 1490909146, "creation_date": 1490909146, "answer_id": 43128647, "question_id": 43104252, "link": "https://stackoverflow.com/questions/43104252/undefined-symbol-pyslice-adjustindices-when-importing-pytorch/43128647#43128647", "title": "undefined symbol: PySlice_AdjustIndices when importing PyTorch", "body": "<p>this is now fixed if you reinstall pytorch via conda:</p>\n\n<p><code>\nconda install pytorch torchvision -c soumith\n</code></p>\n"}], "owner": {"reputation": 2968, "user_id": 5225453, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/74bd6e1f59312591794d45cbb2770afa?s=128&d=identicon&r=PG&f=1", "display_name": "Monica Heddneck", "link": "https://stackoverflow.com/users/5225453/monica-heddneck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3897, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1490909146, "creation_date": 1490821971, "question_id": 43104252, "link": "https://stackoverflow.com/questions/43104252/undefined-symbol-pyslice-adjustindices-when-importing-pytorch", "title": "undefined symbol: PySlice_AdjustIndices when importing PyTorch", "body": "<p>I am trying to use PyTorch, and I think there is some version of something that isn't lining up.  </p>\n\n<p>From what little I can suss out, it seems that there are some functions in the newest version of PyTorch (?) that can't be accessed on my system. I suspect it has something to do with Python version 3.6.1 as opposed to 3.6.0. But I can't figure it out. If anyone has any advice on what I can do to rectify this error:  </p>\n\n<pre><code>/home/ubuntu/nbs/torch_utils.py in &lt;module&gt;()\n----&gt; 1 import torch\n      2 import torch.nn as nn\n      3 import torch.nn.parallel\n      4 import torch.utils.data\n      5 from torch import optim\n\n/home/ubuntu/anaconda3/lib/python3.6/site-packages/torch/__init__.py in &lt;module&gt;()\n     51 sys.setdlopenflags(_dl_flags.RTLD_GLOBAL | _dl_flags.RTLD_NOW)\n     52 \n---&gt; 53 from torch._C import *\n     54 \n     55 __all__ += [name for name in dir(_C)\n\nImportError: /home/ubuntu/anaconda3/lib/python3.6/site-packages/torch/_C.cpython-36m-x86_64-linux-gnu.so: undefined symbol: PySlice_AdjustIndices\n</code></pre>\n\n<p>Here's the details on my system:  </p>\n\n<p>I am running Ubuntu on AWS, <code>Ubuntu 16.04.2 LTS</code></p>\n\n<p>my Cuda info is <code>Cuda compilation tools, release 8.0, V8.0.61</code></p>\n\n<p>I have Anaconda, <code>conda 4.3.15</code></p>\n\n<p>My python version is <code>Python 3.6.0 :: Anaconda custom (64-bit)</code></p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "python-2.7", "parsing", "dictionary"], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1490823397, "creation_date": 1490823397, "answer_id": 43104579, "question_id": 43104242, "link": "https://stackoverflow.com/questions/43104242/python-parse-output-of-mixed-format-text-file-to-key-value-pair-dictionaries/43104579#43104579", "title": "Python parse output of mixed format text file to key value pair dictionaries", "body": "<p>You need to split each of those lines at colons.\nPlop the first one into the dictionary as \"hostname\", then process the remaining ones in pairs.  Something like:</p>\n\n<pre><code>fields = line.split(':')\nmy_dict[\"hostname\"] = field[0]\nfor pos in range(1, len(fields), 2):\n    my_dict[field(pos)] = field(pos+1)\n</code></pre>\n\n<p>That's the basic tactic; I'll leave implementation details to you.  :-)</p>\n"}, {"tags": [], "owner": {"reputation": 5623, "user_id": 1347519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9e1eb6e25803528d25f57f3df79e115?s=128&d=identicon&r=PG", "display_name": "Attie", "link": "https://stackoverflow.com/users/1347519/attie"}, "is_accepted": true, "score": 1, "last_activity_date": 1490828318, "last_edit_date": 1490828318, "creation_date": 1490826395, "answer_id": 43105293, "question_id": 43104242, "link": "https://stackoverflow.com/questions/43104242/python-parse-output-of-mixed-format-text-file-to-key-value-pair-dictionaries/43105293#43105293", "title": "Python parse output of mixed format text file to key value pair dictionaries", "body": "<p>I think the best way would be to use <a href=\"https://docs.python.org/2/library/re.html#re.match\" rel=\"nofollow noreferrer\"><code>re.match()</code></a>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!/usr/bin/env python2.7\n\nimport re\n\nresults = {}\n\nwith open('in.txt', 'r') as f:\n    for line in [ l.rstrip() for l in f.readlines() ]:\n        match = re.match('^(?P&lt;hostname&gt;[^:]+): +(?P&lt;key&gt;[^:=]+?)(?: *[:=] *(?P&lt;value&gt;.+?) *)?$', line)\n\n        if match is None:\n            # skip failed matches\n            #print(line)\n            continue\n\n        hostname, key, value = match.groups()\n\n        if key == 'Comps':\n            value = [ x.strip() for x in re.sub('  +',' ',value).split(' ') ]\n        else:\n            try:\n                value = float(value)\n            except:\n                pass\n\n        if hostname not in results:\n            results[hostname] = {}\n\n        if key in results[hostname]:\n            old_value = results[hostname][key]\n            if isinstance(old_value, list):\n                old_value.append(value)\n            else:\n                results[hostname][key] = [ old_value, value ]\n        else:\n            results[hostname][key] = value\n\nfrom pprint import pprint\npprint(results)\n</code></pre>\n\n<p>I've also taken some liberties:</p>\n\n<ul>\n<li>Proposed an alternative result format <code>results[hostname][key]</code></li>\n<li>Converted the <code>'Comps'</code> data into an array</li>\n<li>Converted anything that will be converted as a <code>float</code>, into a number</li>\n</ul>\n\n<p>Output is like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>{'visi-91': {'CPU': 'GenuineIntel (2.33GHz, stepping 0x0001067a)',\n             'CPU Operation (raw 0x882F0000)': 'Normal',\n             'CPU Speed Limit': '100.00%',\n             'ChasCnt': '1 (Single-Chassis System)',\n             'Chassis': 'ISI36 (Isilon (CIDesigns) 36-Bay Chassis)',\n             'Chassis Fan1 (ISI F1)': 7469.0,\n             'Chassis Fan2 (ISI F2)': 7552.0,\n             'Chassis Fan3 (ISI F3)': 7387.0,\n             'Class': 'storage',\n             'Comps': ['Chassis',\n                       'CPU',\n                       'Motherboard',\n                       'NVRam',\n                       'FlashDrive',\n                       'Disk_Controller',\n                       'Disk_Expander',\n                       'Power_Supplies'],\n             'Config': '912-111-231',\n             'DskCtl': 'LSI3081E-HBA (LSI SAS3081E SAS Controller -- HBA) (8 ports)',\n             'DskExp': 'VIT7156 (Vitesse 7156 Disk Expander)',\n             'FlshDrv': 'None (No physical dongle supported) ((null))',\n             'HWGen': 'MaunaLoa (MaunaLoa Hardware)',\n             'IBType': 'ISI25208 (Isilon MT25208-based IB Card)',\n             'IMB': 'Board Version 0x20f',\n             'LCDver': 'NoriVFD (Noritake VFD)',\n             'Mobo': 'SupMicX7DBU (SuperMicro X7DBU Motherboard)',\n             'NVRam': 'MT25208 (Mellanox 25208 based Card) (492MB card) (size 515899392B)',\n             'NetIF': 'em*4,ib*2 (4x Intel, 2x IB)',\n             'PROC': 'Dual-proc, Quad-core',\n             'Power Supplies OK': None,\n             'Power Supply 1 Fan': 5504.0,\n             'Power Supply 2 Fan': 5792.0,\n             'Product': 'IQ 32000x-ssd',\n             'PwrSupl': ['PS1 (type=Emerson, fw=v.01.00.00)',\n                         'PS2 (type=Emerson, fw=v.01.00.00)'],\n             'RAM': '17150812160 Bytes',\n             'SerNo': 'S123456789P',\n             'Series': 'x_series',\n             'Temp Chassis 2 (ISI T2)': 22.0,\n             'Temp Front Panel': 17.0,\n             'Temp System': 25.0,\n             'Temp Until CPU Throttle (CPU 0)': 46.0,\n             'Temp Until CPU Throttle (CPU 1)': 42.0},\n 'visi-92': {'CPU': 'GenuineIntel (2.33GHz, stepping 0x0001067a)',\n             'CPU Operation (raw 0x882E0000)': 'Normal',\n             'CPU Speed Limit': '100.00%',\n             'ChasCnt': '1 (Single-Chassis System)',\n             'Chassis': 'ISI36 (Isilon (CIDesigns) 36-Bay Chassis)',\n             'Chassis Fan1 (ISI F1)': 7268.0,\n             'Chassis Fan2 (ISI F2)': 7307.0,\n             'Chassis Fan3 (ISI F3)': 7190.0,\n             'Class': 'storage',\n             'Comps': ['Chassis',\n                       'CPU',\n                       'Motherboard',\n                       'NVRam',\n                       'FlashDrive',\n                       'Disk_Controller',\n                       'Disk_Expander',\n                       'Power_Supplies'],\n             'Config': '912-111-231',\n             'DskCtl': 'LSI3081E-HBA (LSI SAS3081E SAS Controller -- HBA) (8 ports)',\n             'DskExp': 'VIT7156 (Vitesse 7156 Disk Expander)',\n             'FlshDrv': 'None (No physical dongle supported) ((null))',\n             'HWGen': 'MaunaLoa (MaunaLoa Hardware)',\n             'IBType': 'ISI25208 (Isilon MT25208-based IB Card)',\n             'IMB': 'Board Version 0x20f',\n             'LCDver': 'NoriVFD (Noritake VFD)',\n             'Mobo': 'SupMicX7DBU (SuperMicro X7DBU Motherboard)',\n             'NVRam': 'MT25208 (Mellanox 25208 based Card) (492MB card) (size 515899392B)',\n             'NetIF': 'em*4,ib*2 (4x Intel, 2x IB)',\n             'PROC': 'Dual-proc, Quad-core',\n             'Power Supplies OK': None,\n             'Power Supply 1 Fan': 5376.0,\n             'Power Supply 2 Fan': 5696.0,\n             'Product': 'IQ 32000x-ssd',\n             'PwrSupl': ['PS1 (type=Emerson, fw=v.01.00.00)',\n                         'PS2 (type=Emerson, fw=v.01.00.00)'],\n             'RAM': '17150812160 Bytes',\n             'SerNo': 'S123456785K',\n             'Series': 'x_series',\n             'Temp Chassis 2 (ISI T2)': 24.0,\n             'Temp Front Panel': 17.2,\n             'Temp System': 27.0,\n             'Temp Until CPU Throttle (CPU 0)': 46.0,\n             'Temp Until CPU Throttle (CPU 1)': 46.0},\n 'visi-93': {'CPU': 'GenuineIntel (2.33GHz, stepping 0x0001067a)',\n             'CPU Operation (raw 0x88250000)': 'Normal',\n             'CPU Speed Limit': '100.00%',\n             'ChasCnt': '1 (Single-Chassis System)',\n             'Chassis': 'ISI36 (Isilon (CIDesigns) 36-Bay Chassis)',\n             'Chassis Fan1 (ISI F1)': 7387.0,\n             'Chassis Fan2 (ISI F2)': 7152.0,\n             'Chassis Fan3 (ISI F3)': 7152.0,\n             'Class': 'storage',\n             'Comps': ['Chassis',\n                       'CPU',\n                       'Motherboard',\n                       'NVRam',\n                       'FlashDrive',\n                       'Disk_Controller',\n                       'Disk_Expander',\n                       'Power_Supplies'],\n             'Config': '912-111-231',\n             'DskCtl': 'LSI3081E-HBA (LSI SAS3081E SAS Controller -- HBA) (8 ports)',\n             'DskExp': 'VIT7156 (Vitesse 7156 Disk Expander)',\n             'FlshDrv': 'None (No physical dongle supported) ((null))',\n             'HWGen': 'MaunaLoa (MaunaLoa Hardware)',\n             'IBType': 'ISI25208 (Isilon MT25208-based IB Card)',\n             'IMB': 'Board Version 0x20f',\n             'LCDver': 'NoriVFD (Noritake VFD)',\n             'Mobo': 'SupMicX7DBU (SuperMicro X7DBU Motherboard)',\n             'NVRam': 'MT25208 (Mellanox 25208 based Card) (492MB card) (size 515899392B)',\n             'NetIF': 'em*4,ib*2 (4x Intel, 2x IB)',\n             'PROC': 'Dual-proc, Quad-core',\n             'Power Supplies OK': None,\n             'Power Supply 1 Fan': 8512.0,\n             'Power Supply 2 Fan': 8512.0,\n             'Product': 'IQ 32000x-ssd',\n             'PwrSupl': ['PS1 (type=Emerson, fw=v.03.05.00)',\n                         'PS2 (type=Emerson, fw=v.03.05.00)'],\n             'RAM': '17150812160 Bytes',\n             'SerNo': 'S987654321P',\n             'Series': 'x_series',\n             'Temp Chassis 2 (ISI T2)': 25.0,\n             'Temp Front Panel': 17.4,\n             'Temp System': 28.0,\n             'Temp Until CPU Throttle (CPU 0)': 37.0,\n             'Temp Until CPU Throttle (CPU 1)': 38.0}}\n</code></pre>\n\n<p>Edit: Now handles multiple occurrences of a given 'key', by forming an array (e.g: <code>PwrSupl</code>).</p>\n"}], "owner": {"reputation": 1633, "user_id": 2183592, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/83404851cf2344785185e3d10c246af7?s=128&d=identicon&r=PG", "display_name": "pengz", "link": "https://stackoverflow.com/users/2183592/pengz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "accepted_answer_id": 43105293, "answer_count": 2, "score": 0, "last_activity_date": 1490828318, "creation_date": 1490821950, "question_id": 43104242, "link": "https://stackoverflow.com/questions/43104242/python-parse-output-of-mixed-format-text-file-to-key-value-pair-dictionaries", "title": "Python parse output of mixed format text file to key value pair dictionaries", "body": "<p>I am trying to parse the output of a command from the EMC OneFS CLI. We are trying to collect inventory data, and since we're on an older version of the API we can't use the REST SDK.</p>\n\n<p>Instead we have decided to do it the \"hacky\" way and parse the output of CLI commands.</p>\n\n<p>How can I reliably parse this data in Python, given the varying formats of text? Notice the varying amounts of white space, and the fact that some of these are separated by <code>:</code> while others are separated by <code>=</code>.</p>\n\n<p>I have a decent start on this, I was able to split up each line into a list and handle the cases where the <code>=</code> sign is nested within parenthesis.</p>\n\n<p>I am still stuck on the other parts:</p>\n\n<ul>\n<li>Take the first column as the \"hostname\"</li>\n<li>Build a separate dictionary for each hostname that contains all key value pairs (some are separated by <code>:</code> others are separated by <code>=</code>)</li>\n</ul>\n\n<p><strong>RAW OUTPUT THAT NEEDS TO BE PARSED:</strong></p>\n\n<pre><code>visi-91:   SerNo: S123456789P\nvisi-91:  Config: 912-111-231\nvisi-91:   Class: storage\nvisi-91:  Series: x_series\nvisi-91: Product: IQ 32000x-ssd\nvisi-91: Comps:  Chassis CPU     Motherboard     NVRam   FlashDrive      Disk_Controller Disk_Expander   Power_Supplies \nvisi-91:   HWGen: MaunaLoa (MaunaLoa Hardware)\nvisi-91: Chassis: ISI36 (Isilon (CIDesigns) 36-Bay Chassis)\nvisi-91:     CPU: GenuineIntel (2.33GHz, stepping 0x0001067a)\nvisi-91:    PROC: Dual-proc, Quad-core\nvisi-91:     RAM: 17150812160 Bytes\nvisi-91:    Mobo: SupMicX7DBU (SuperMicro X7DBU Motherboard)\nvisi-91:   NVRam: MT25208 (Mellanox 25208 based Card) (492MB card) (size 515899392B)\nvisi-91: FlshDrv: None (No physical dongle supported) ((null))\nvisi-91:  DskCtl: LSI3081E-HBA (LSI SAS3081E SAS Controller -- HBA) (8 ports)\nvisi-91:  DskExp: VIT7156 (Vitesse 7156 Disk Expander)\nvisi-91: PwrSupl: PS1 (type=Emerson, fw=v.01.00.00)\nvisi-91: PwrSupl: PS2 (type=Emerson, fw=v.01.00.00)\nvisi-91: ChasCnt: 1 (Single-Chassis System)\nvisi-91:   NetIF: em*4,ib*2 (4x Intel, 2x IB)\nvisi-91:  IBType: ISI25208 (Isilon MT25208-based IB Card)\nvisi-91:  LCDver: NoriVFD (Noritake VFD)\nvisi-91:     IMB: Board Version 0x20f\nvisi-91: Power Supplies OK\nvisi-91: CPU Operation (raw 0x882F0000)  = Normal\nvisi-91: CPU Speed Limit                 = 100.00%\nvisi-91: Chassis Fan1 (ISI F1)           = 7469\nvisi-91: Chassis Fan2 (ISI F2)           = 7552\nvisi-91: Chassis Fan3 (ISI F3)           = 7387\nvisi-91: Power Supply 1 Fan              = 5504\nvisi-91: Power Supply 2 Fan              = 5792\nvisi-91: Temp Until CPU Throttle (CPU 0) = 46.0\nvisi-91: Temp Until CPU Throttle (CPU 1) = 42.0\nvisi-91: Temp Front Panel                = 17.0\nvisi-91: Temp Chassis 2 (ISI T2)         = 22.0\nvisi-91: Temp System                     = 25.0\nvisi-92:   SerNo: S123456785K\nvisi-92:  Config: 912-111-231\nvisi-92:   Class: storage\nvisi-92:  Series: x_series\nvisi-92: Product: IQ 32000x-ssd\nvisi-92: Comps:  Chassis CPU     Motherboard     NVRam   FlashDrive      Disk_Controller Disk_Expander   Power_Supplies \nvisi-92:   HWGen: MaunaLoa (MaunaLoa Hardware)\nvisi-92: Chassis: ISI36 (Isilon (CIDesigns) 36-Bay Chassis)\nvisi-92:     CPU: GenuineIntel (2.33GHz, stepping 0x0001067a)\nvisi-92:    PROC: Dual-proc, Quad-core\nvisi-92:     RAM: 17150812160 Bytes\nvisi-92:    Mobo: SupMicX7DBU (SuperMicro X7DBU Motherboard)\nvisi-92:   NVRam: MT25208 (Mellanox 25208 based Card) (492MB card) (size 515899392B)\nvisi-92: FlshDrv: None (No physical dongle supported) ((null))\nvisi-92:  DskCtl: LSI3081E-HBA (LSI SAS3081E SAS Controller -- HBA) (8 ports)\nvisi-92:  DskExp: VIT7156 (Vitesse 7156 Disk Expander)\nvisi-92: PwrSupl: PS1 (type=Emerson, fw=v.01.00.00)\nvisi-92: PwrSupl: PS2 (type=Emerson, fw=v.01.00.00)\nvisi-92: ChasCnt: 1 (Single-Chassis System)\nvisi-92:   NetIF: em*4,ib*2 (4x Intel, 2x IB)\nvisi-92:  IBType: ISI25208 (Isilon MT25208-based IB Card)\nvisi-92:  LCDver: NoriVFD (Noritake VFD)\nvisi-92:     IMB: Board Version 0x20f\nvisi-92: Power Supplies OK\nvisi-92: CPU Operation (raw 0x882E0000)  = Normal\nvisi-92: CPU Speed Limit                 = 100.00%\nvisi-92: Chassis Fan1 (ISI F1)           = 7268\nvisi-92: Chassis Fan2 (ISI F2)           = 7307\nvisi-92: Chassis Fan3 (ISI F3)           = 7190\nvisi-92: Power Supply 1 Fan              = 5376\nvisi-92: Power Supply 2 Fan              = 5696\nvisi-92: Temp Until CPU Throttle (CPU 0) = 46.0\nvisi-92: Temp Until CPU Throttle (CPU 1) = 46.0\nvisi-92: Temp Front Panel                = 17.2\nvisi-92: Temp Chassis 2 (ISI T2)         = 24.0\nvisi-92: Temp System                     = 27.0\nvisi-93:   SerNo: S987654321P\nvisi-93:  Config: 912-111-231\nvisi-93:   Class: storage\nvisi-93:  Series: x_series\nvisi-93: Product: IQ 32000x-ssd\nvisi-93: Comps:  Chassis CPU     Motherboard     NVRam   FlashDrive      Disk_Controller Disk_Expander   Power_Supplies \nvisi-93:   HWGen: MaunaLoa (MaunaLoa Hardware)\nvisi-93: Chassis: ISI36 (Isilon (CIDesigns) 36-Bay Chassis)\nvisi-93:     CPU: GenuineIntel (2.33GHz, stepping 0x0001067a)\nvisi-93:    PROC: Dual-proc, Quad-core\nvisi-93:     RAM: 17150812160 Bytes\nvisi-93:    Mobo: SupMicX7DBU (SuperMicro X7DBU Motherboard)\nvisi-93:   NVRam: MT25208 (Mellanox 25208 based Card) (492MB card) (size 515899392B)\nvisi-93: FlshDrv: None (No physical dongle supported) ((null))\nvisi-93:  DskCtl: LSI3081E-HBA (LSI SAS3081E SAS Controller -- HBA) (8 ports)\nvisi-93:  DskExp: VIT7156 (Vitesse 7156 Disk Expander)\nvisi-93: PwrSupl: PS1 (type=Emerson, fw=v.03.05.00)\nvisi-93: PwrSupl: PS2 (type=Emerson, fw=v.03.05.00)\nvisi-93: ChasCnt: 1 (Single-Chassis System)\nvisi-93:   NetIF: em*4,ib*2 (4x Intel, 2x IB)\nvisi-93:  IBType: ISI25208 (Isilon MT25208-based IB Card)\nvisi-93:  LCDver: NoriVFD (Noritake VFD)\nvisi-93:     IMB: Board Version 0x20f\nvisi-93: Power Supplies OK\nvisi-93: CPU Operation (raw 0x88250000)  = Normal\nvisi-93: CPU Speed Limit                 = 100.00%\nvisi-93: Chassis Fan1 (ISI F1)           = 7387\nvisi-93: Chassis Fan2 (ISI F2)           = 7152\nvisi-93: Chassis Fan3 (ISI F3)           = 7152\nvisi-93: Power Supply 1 Fan              = 8512\nvisi-93: Power Supply 2 Fan              = 8512\nvisi-93: Temp Until CPU Throttle (CPU 0) = 37.0\nvisi-93: Temp Until CPU Throttle (CPU 1) = 38.0\nvisi-93: Temp Front Panel                = 17.4\nvisi-93: Temp Chassis 2 (ISI T2)         = 25.0\nvisi-93: Temp System                     = 28.0\n</code></pre>\n\n<p><strong>MY CODE SO FAR:</strong></p>\n\n<pre><code>#Read text file\nfile = open(\"test_itry.txt\", \"r\")\nlines = file.readlines()\nfile.close()\n\nfor line in lines:\n    #Remove whitespaces\n    line = line.replace(' ','')\n    #Remove newlines\n    line = line.replace('\\n','')\n    #Handler values that have equals signs nested within parenthesis\n    #If line has closed parenthesis and equals sign\n    if line.count(\")\") &gt; 0 and line.count(\"=\") &gt; 0:\n        #Get first position of open parenthesis\n        poscp = line.find(\")\")\n        #Get first position of equals sign\n        poseq = line.find(\"=\")\n        #If position of equals sign comes before position of first parenthesis\n        if poscp &lt; poseq:\n            #Split by first equals sign\n            line = line.split(\"=\", 1)\n    #If line doesn't have closed parenthesis and an equals sign\n    else:\n        line = line.split(\"=\", 1)\n    #If line has not been split into a list yet create a list\n    if isinstance(line, str):\n        line = line.split() \n    print(line)\n</code></pre>\n\n<p><strong>OUTPUT OF MY CODE SO FAR:</strong></p>\n\n<pre><code>['visi-91:SerNo:S123456789P']\n['visi-91:Config:912-111-231']\n['visi-91:Class:storage']\n['visi-91:Series:x_series']\n['visi-91:Product:IQ32000x-ssd']\n['visi-91:Comps:ChassisCPUMotherboardNVRamFlashDriveDisk_ControllerDisk_ExpanderPower_Supplies']\n['visi-91:HWGen:MaunaLoa(MaunaLoaHardware)']\n['visi-91:Chassis:ISI36(Isilon(CIDesigns)36-BayChassis)']\n['visi-91:CPU:GenuineIntel(2.33GHz,stepping0x0001067a)']\n['visi-91:PROC:Dual-proc,Quad-core']\n['visi-91:RAM:17150812160Bytes']\n['visi-91:Mobo:SupMicX7DBU(SuperMicroX7DBUMotherboard)']\n['visi-91:NVRam:MT25208(Mellanox25208basedCard)(492MBcard)(size515899392B)']\n['visi-91:FlshDrv:None(Nophysicaldonglesupported)((null))']\n['visi-91:DskCtl:LSI3081E-HBA(LSISAS3081ESASController--HBA)(8ports)']\n['visi-91:DskExp:VIT7156(Vitesse7156DiskExpander)']\n['visi-91:PwrSupl:PS1(type=Emerson,fw=v.01.00.00)']\n['visi-91:PwrSupl:PS2(type=Emerson,fw=v.01.00.00)']\n['visi-91:ChasCnt:1(Single-ChassisSystem)']\n['visi-91:NetIF:em*4,ib*2(4xIntel,2xIB)']\n['visi-91:IBType:ISI25208(IsilonMT25208-basedIBCard)']\n['visi-91:LCDver:NoriVFD(NoritakeVFD)']\n['visi-91:IMB:BoardVersion0x20f']\n['visi-91:PowerSuppliesOK']\n['visi-91:CPUOperation(raw0x882F0000)', 'Normal']\n['visi-91:CPUSpeedLimit', '100.00%']\n['visi-91:ChassisFan1(ISIF1)', '7469']\n['visi-91:ChassisFan2(ISIF2)', '7552']\n['visi-91:ChassisFan3(ISIF3)', '7387']\n['visi-91:PowerSupply1Fan', '5504']\n['visi-91:PowerSupply2Fan', '5792']\n['visi-91:TempUntilCPUThrottle(CPU0)', '46.0']\n['visi-91:TempUntilCPUThrottle(CPU1)', '42.0']\n['visi-91:TempFrontPanel', '17.0']\n['visi-91:TempChassis2(ISIT2)', '22.0']\n['visi-91:TempSystem', '25.0']\n['visi-92:SerNo:S123456785K']\n['visi-92:Config:912-111-231']\n['visi-92:Class:storage']\n['visi-92:Series:x_series']\n['visi-92:Product:IQ32000x-ssd']\n['visi-92:Comps:ChassisCPUMotherboardNVRamFlashDriveDisk_ControllerDisk_ExpanderPower_Supplies']\n['visi-92:HWGen:MaunaLoa(MaunaLoaHardware)']\n['visi-92:Chassis:ISI36(Isilon(CIDesigns)36-BayChassis)']\n['visi-92:CPU:GenuineIntel(2.33GHz,stepping0x0001067a)']\n['visi-92:PROC:Dual-proc,Quad-core']\n['visi-92:RAM:17150812160Bytes']\n['visi-92:Mobo:SupMicX7DBU(SuperMicroX7DBUMotherboard)']\n['visi-92:NVRam:MT25208(Mellanox25208basedCard)(492MBcard)(size515899392B)']\n['visi-92:FlshDrv:None(Nophysicaldonglesupported)((null))']\n['visi-92:DskCtl:LSI3081E-HBA(LSISAS3081ESASController--HBA)(8ports)']\n['visi-92:DskExp:VIT7156(Vitesse7156DiskExpander)']\n['visi-92:PwrSupl:PS1(type=Emerson,fw=v.01.00.00)']\n['visi-92:PwrSupl:PS2(type=Emerson,fw=v.01.00.00)']\n['visi-92:ChasCnt:1(Single-ChassisSystem)']\n['visi-92:NetIF:em*4,ib*2(4xIntel,2xIB)']\n['visi-92:IBType:ISI25208(IsilonMT25208-basedIBCard)']\n['visi-92:LCDver:NoriVFD(NoritakeVFD)']\n['visi-92:IMB:BoardVersion0x20f']\n['visi-92:PowerSuppliesOK']\n['visi-92:CPUOperation(raw0x882E0000)', 'Normal']\n['visi-92:CPUSpeedLimit', '100.00%']\n['visi-92:ChassisFan1(ISIF1)', '7268']\n['visi-92:ChassisFan2(ISIF2)', '7307']\n['visi-92:ChassisFan3(ISIF3)', '7190']\n['visi-92:PowerSupply1Fan', '5376']\n['visi-92:PowerSupply2Fan', '5696']\n['visi-92:TempUntilCPUThrottle(CPU0)', '46.0']\n['visi-92:TempUntilCPUThrottle(CPU1)', '46.0']\n['visi-92:TempFrontPanel', '17.2']\n['visi-92:TempChassis2(ISIT2)', '24.0']\n['visi-92:TempSystem', '27.0']\n['visi-93:SerNo:S987654321P']\n['visi-93:Config:912-111-231']\n['visi-93:Class:storage']\n['visi-93:Series:x_series']\n['visi-93:Product:IQ32000x-ssd']\n['visi-93:Comps:ChassisCPUMotherboardNVRamFlashDriveDisk_ControllerDisk_ExpanderPower_Supplies']\n['visi-93:HWGen:MaunaLoa(MaunaLoaHardware)']\n['visi-93:Chassis:ISI36(Isilon(CIDesigns)36-BayChassis)']\n['visi-93:CPU:GenuineIntel(2.33GHz,stepping0x0001067a)']\n['visi-93:PROC:Dual-proc,Quad-core']\n['visi-93:RAM:17150812160Bytes']\n['visi-93:Mobo:SupMicX7DBU(SuperMicroX7DBUMotherboard)']\n['visi-93:NVRam:MT25208(Mellanox25208basedCard)(492MBcard)(size515899392B)']\n['visi-93:FlshDrv:None(Nophysicaldonglesupported)((null))']\n['visi-93:DskCtl:LSI3081E-HBA(LSISAS3081ESASController--HBA)(8ports)']\n['visi-93:DskExp:VIT7156(Vitesse7156DiskExpander)']\n['visi-93:PwrSupl:PS1(type=Emerson,fw=v.03.05.00)']\n['visi-93:PwrSupl:PS2(type=Emerson,fw=v.03.05.00)']\n['visi-93:ChasCnt:1(Single-ChassisSystem)']\n['visi-93:NetIF:em*4,ib*2(4xIntel,2xIB)']\n['visi-93:IBType:ISI25208(IsilonMT25208-basedIBCard)']\n['visi-93:LCDver:NoriVFD(NoritakeVFD)']\n['visi-93:IMB:BoardVersion0x20f']\n['visi-93:PowerSuppliesOK']\n['visi-93:CPUOperation(raw0x88250000)', 'Normal']\n['visi-93:CPUSpeedLimit', '100.00%']\n['visi-93:ChassisFan1(ISIF1)', '7387']\n['visi-93:ChassisFan2(ISIF2)', '7152']\n['visi-93:ChassisFan3(ISIF3)', '7152']\n['visi-93:PowerSupply1Fan', '8512']\n['visi-93:PowerSupply2Fan', '8512']\n['visi-93:TempUntilCPUThrottle(CPU0)', '37.0']\n['visi-93:TempUntilCPUThrottle(CPU1)', '38.0']\n['visi-93:TempFrontPanel', '17.4']\n['visi-93:TempChassis2(ISIT2)', '25.0']\n['visi-93:TempSystem', '28.0']\n</code></pre>\n\n<p><strong>DESIRED OUTPUT - Dictionary key/value pairs with first word as hostname.</strong>\nSeparate dictionaries for each hostname:</p>\n\n<pre><code>{'hostname':'visi-91', 'SerNo':'S123456789P', 'Config':'912-111-231', 'Class':'storage', 'Series':'x_series', 'PwrSupl':'PS1(type=Emerson,fw=v.01.00.00)', 'Chassis':'ISI36(Isilon(CIDesigns)36-BayChassis)', 'NetIF':'em*4,ib*2(4xIntel,2xIB)', 'IBType':'ISI25208(IsilonMT25208-basedIBCard)'} //etc...\n\n{'hostname':'visi-92', 'SerNo':'S123456785K', 'Config':'912-111-231', 'Class':'storage', 'Series':'x_series', 'PwrSupl':'PS1(type=Emerson,fw=v.01.00.00)' 'Chassis':'ISI36(Isilon(CIDesigns)36-BayChassis)', 'NetIF':'em*4,ib*2(4xIntel,2xIB)', 'IBType':'ISI25208(IsilonMT25208-basedIBCard)'}  //etc...\n</code></pre>\n"}, {"tags": ["python", "regex", "python-3.x"], "comments": [{"owner": {"reputation": 203268, "user_id": 206403, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/vfBUe.jpg?s=128&g=1", "display_name": "Rocket Hazmat", "link": "https://stackoverflow.com/users/206403/rocket-hazmat"}, "edited": false, "score": 3, "creation_date": 1490822158, "post_id": 43104240, "comment_id": 73290182, "body": "Using <code>re.compile()</code>?  You could do that in a <code>try</code>/<code>except</code> block (and catch <code>re.error</code>)."}, {"owner": {"reputation": 203268, "user_id": 206403, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/vfBUe.jpg?s=128&g=1", "display_name": "Rocket Hazmat", "link": "https://stackoverflow.com/users/206403/rocket-hazmat"}, "edited": false, "score": 0, "creation_date": 1490823145, "post_id": 43104240, "comment_id": 73290677, "body": "Also, what do you mean by &quot;generate my own regex&quot;?  Are you <i>dynamically</i> generating regexes?"}, {"owner": {"reputation": 23, "user_id": 7785378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8565d6e12630e9fb3406e96975248ca3?s=128&d=identicon&r=PG&f=1", "display_name": "Honza", "link": "https://stackoverflow.com/users/7785378/honza"}, "reply_to_user": {"reputation": 203268, "user_id": 206403, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/vfBUe.jpg?s=128&g=1", "display_name": "Rocket Hazmat", "link": "https://stackoverflow.com/users/206403/rocket-hazmat"}, "edited": false, "score": 0, "creation_date": 1490824059, "post_id": 43104240, "comment_id": 73291052, "body": "Yes... I generate own regexes according to some pattern. But sometimes it makes mistakes, so I want to catch that a generate my warning to stderr with exit code."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7785378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8565d6e12630e9fb3406e96975248ca3?s=128&d=identicon&r=PG&f=1", "display_name": "Honza", "link": "https://stackoverflow.com/users/7785378/honza"}, "edited": false, "score": 1, "creation_date": 1490824325, "post_id": 43104487, "comment_id": 73291155, "body": "I want to catch invalid regex a generate my warning to stderr with exit code."}, {"owner": {"reputation": 23, "user_id": 7785378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8565d6e12630e9fb3406e96975248ca3?s=128&d=identicon&r=PG&f=1", "display_name": "Honza", "link": "https://stackoverflow.com/users/7785378/honza"}, "edited": false, "score": 1, "creation_date": 1490824661, "post_id": 43104487, "comment_id": 73291281, "body": "solved. thank you for help and hint! :)"}, {"owner": {"reputation": 3271, "user_id": 7607701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-0eLxeTB_SdQ/AAAAAAAAAAI/AAAAAAAAABg/XZT1oaa0wqA/photo.jpg?sz=128", "display_name": "Aaron N. Brock", "link": "https://stackoverflow.com/users/7607701/aaron-n-brock"}, "reply_to_user": {"reputation": 23, "user_id": 7785378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8565d6e12630e9fb3406e96975248ca3?s=128&d=identicon&r=PG&f=1", "display_name": "Honza", "link": "https://stackoverflow.com/users/7785378/honza"}, "edited": false, "score": 0, "creation_date": 1490824691, "post_id": 43104487, "comment_id": 73291300, "body": "You&#39;ll just need to surround it in a try except :)"}], "tags": [], "owner": {"reputation": 3271, "user_id": 7607701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-0eLxeTB_SdQ/AAAAAAAAAAI/AAAAAAAAABg/XZT1oaa0wqA/photo.jpg?sz=128", "display_name": "Aaron N. Brock", "link": "https://stackoverflow.com/users/7607701/aaron-n-brock"}, "is_accepted": true, "score": 0, "last_activity_date": 1490822996, "creation_date": 1490822996, "answer_id": 43104487, "question_id": 43104240, "link": "https://stackoverflow.com/questions/43104240/python-check-regex-expression/43104487#43104487", "title": "Python: check regex expression", "body": "<p>To check if regex is valid from inside python:</p>\n\n<pre><code>import re\nre.compile('&lt;regex&gt;')\n</code></pre>\n\n<p>This code will throw an error if it's invalid regex.</p>\n\n<p>However, I find it much more useful to use regex tool, here's a few to choose from:</p>\n\n<ul>\n<li><a href=\"http://regexr.com/\" rel=\"nofollow noreferrer\">regexr</a></li>\n<li><a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex101</a></li>\n</ul>\n"}], "owner": {"reputation": 23, "user_id": 7785378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8565d6e12630e9fb3406e96975248ca3?s=128&d=identicon&r=PG&f=1", "display_name": "Honza", "link": "https://stackoverflow.com/users/7785378/honza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "closed_date": 1537253275, "accepted_answer_id": 43104487, "answer_count": 1, "score": 0, "last_activity_date": 1490822996, "creation_date": 1490821942, "question_id": 43104240, "link": "https://stackoverflow.com/questions/43104240/python-check-regex-expression", "closed_reason": "Duplicate", "title": "Python: check regex expression", "body": "<p>I generate my own regex expression and I would like to check if it is valid. For example if I have regex \"[a-zA-Z0-9]\" it will be valid but \"[a-zA-Z0s-9]\" not.</p>\n"}, {"tags": ["python", "python-2.7", "matplotlib", "plot"], "answers": [{"tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 0, "last_activity_date": 1490822981, "creation_date": 1490822981, "answer_id": 43104484, "question_id": 43104225, "link": "https://stackoverflow.com/questions/43104225/plot-generation-stop-for-loop-if-plot-already-exists/43104484#43104484", "title": "Plot generation: stop for-loop if plot already exists", "body": "<p>All you need is to translate your original question from English into Python:</p>\n\n<pre><code>if name.startswith('XY') and name.endswith('.txt') \\\n   and not os.path.isfile(root+'plot.png'): ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 5874285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22ae5b609f8efee680394172212c9e73?s=128&d=identicon&r=PG&f=1", "display_name": "skleijn", "link": "https://stackoverflow.com/users/5874285/skleijn"}, "edited": false, "score": 0, "creation_date": 1490853578, "post_id": 43104503, "comment_id": 73299564, "body": "OK that&#39;s very clear and it works. Thanks for pointing that out!"}], "tags": [], "owner": {"reputation": 21, "user_id": 7735750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VtaE2.jpg?s=128&g=1", "display_name": "ChefFrank", "link": "https://stackoverflow.com/users/7735750/cheffrank"}, "is_accepted": false, "score": 0, "last_activity_date": 1490823074, "creation_date": 1490823074, "answer_id": 43104503, "question_id": 43104225, "link": "https://stackoverflow.com/questions/43104225/plot-generation-stop-for-loop-if-plot-already-exists/43104503#43104503", "title": "Plot generation: stop for-loop if plot already exists", "body": "<p>You can use </p>\n\n<pre><code>import os\nos.path.isfile(fname)\n</code></pre>\n\n<p>If your plot exists, you know that a file called </p>\n\n<pre><code>root + 'plot.png'\n</code></pre>\n\n<p>must be in your current directory.\nYou can thus add that to your if-sentence:</p>\n\n<pre><code>if name.startswith('XY') and name.endswith('.txt') and not os.path.isfile(root + 'plot.png'):\n</code></pre>\n\n<p>If you want to break out of your for-loops use the keyword </p>\n\n<pre><code>break\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 5874285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22ae5b609f8efee680394172212c9e73?s=128&d=identicon&r=PG&f=1", "display_name": "skleijn", "link": "https://stackoverflow.com/users/5874285/skleijn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490853758, "creation_date": 1490821850, "last_edit_date": 1490853758, "question_id": 43104225, "link": "https://stackoverflow.com/questions/43104225/plot-generation-stop-for-loop-if-plot-already-exists", "title": "Plot generation: stop for-loop if plot already exists", "body": "<p>I'm using python and matplotlib to generate plots from a fairly large database of XY data (~1000 folder and growing). Every folder holds a single CSV file containing XY data that I want to generate a scatter plot of.\nSince more data folders are periodically added to the root folder, I want to periodically run my script to keep the plots updated. Unfortunately this script now runs for ~10 minutes and I foresee that it will keep running longer and longer.</p>\n\n<p>I would like to speed up the script by adding something to my code that skips searching the present folder for XY data if a .png file is present in the folder. What should I amend on the code below to reflect that?</p>\n\n<pre><code>import os\nimport matplotlib.pyplot as plt\n\n# Find files containing XY data\nfor root, dirs, files in os.walk('D:/temp\\\\', topdown=False):\n    for name in files:\n       #find and check txt file\n        if name.startswith('XY') and name.endswith('.txt'):\n            # read data and store lines in list\n            try:\n                posX = list() #list of x-positions\n                posY = list() #list of y-positions\n                filepath = os.path.join(root, name) \n                fp = open(filepath)\n                for line in fp:\n                    # make lists from the csv rows\n                    content = line.split()\n                    posX.append(float(content[0]))\n                    posY.append(float(content[1]))                    \n                fp.close()\n                # prepare a scatter plot\n                figure = plt.scatter(posX,posY)\n                # save plot as png       \n                plt.savefig(root+'plot.png')\n                # clear plot data for next for loop iteration\n                plt.clf()\n</code></pre>\n\n<p>Update:\nusing below answer I update the if statement inside the second for loop:</p>\n\n<pre><code>#find and check txt file\n    if name.startswith('XY') and name.endswith('.txt') and not os.path.isfile(root+'plot.png'):\n(...)\n    else:\n        print('no new data available')\n</code></pre>\n"}, {"tags": ["python", "plot", "sympy"], "answers": [{"comments": [{"owner": {"reputation": 2809, "user_id": 1389680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3c6479a9de8f5e6b80a35f28457ea66f?s=128&d=identicon&r=PG", "display_name": "Robert Pollak", "link": "https://stackoverflow.com/users/1389680/robert-pollak"}, "edited": false, "score": 0, "creation_date": 1571748918, "post_id": 43106506, "comment_id": 103337917, "body": "The corresponding Sympy issue is <a href=\"https://github.com/sympy/sympy/issues/11764\" rel=\"nofollow noreferrer\">github.com/sympy/sympy/issues/11764</a> ."}], "tags": [], "owner": {"reputation": 3890, "user_id": 7517724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63c21233470c84bd8e36b40bf9fe8103?s=128&d=identicon&r=PG", "display_name": "Craig", "link": "https://stackoverflow.com/users/7517724/craig"}, "is_accepted": true, "score": 4, "last_activity_date": 1490834109, "last_edit_date": 1495542326, "creation_date": 1490834109, "answer_id": 43106506, "question_id": 43104222, "link": "https://stackoverflow.com/questions/43104222/sympy-set-aspect-ratio/43106506#43106506", "title": "Sympy: Set aspect ratio", "body": "<p>You need to use <code>fig.show()</code> to display the graph. The following example produces a graph with equal aspect ratio:</p>\n\n<pre><code>import sympy as sp\nsp.init_session()\np = plotting.plot_parametric(cos(t),sin(t),(t,0,2*pi))\nfig = p._backend.fig\nax = p._backend.ax\nax.set_aspect('equal')\nfig.show()\n</code></pre>\n\n<p>h/t to <a href=\"https://stackoverflow.com/questions/40747474/sympy-and-plotting\">Sympy and plotting</a></p>\n"}], "owner": {"reputation": 3108, "user_id": 3047729, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/xnWyL.png?s=128&g=1", "display_name": "Addem", "link": "https://stackoverflow.com/users/3047729/addem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 731, "favorite_count": 0, "accepted_answer_id": 43106506, "answer_count": 1, "score": 3, "last_activity_date": 1490834109, "creation_date": 1490821830, "last_edit_date": 1495542735, "question_id": 43104222, "link": "https://stackoverflow.com/questions/43104222/sympy-set-aspect-ratio", "title": "Sympy: Set aspect ratio", "body": "<p>I'm using Spyder's Ipython console to try to get some quick parametric plots of functions.  For now I'm focusing on x = cos(t), y = sin(t).  I ran the command </p>\n\n<pre><code>import sympy as sp\nsp.init_session()\np = plotting.plot_parametric(cos(t),sin(t),(t,0,2*pi))\n</code></pre>\n\n<p>and I get an oblong plot of the curve.</p>\n\n<p>If I enter</p>\n\n<pre><code>p.aspect_ratio = (1,1)\np.show()\n</code></pre>\n\n<p>nothing changes.  I try other aspect ratios and still nothing changes. </p>\n\n<p>After looking at this answer <a href=\"https://stackoverflow.com/questions/36505768/in-sympy-plotting-how-can-i-get-a-plot-with-a-fixed-aspect-ratio\">In sympy plotting, how can I get a plot with a fixed aspect ratio?</a></p>\n\n<p>I tried following their instructions to try to leverage matplotlib and I get no errors.  But when I enter </p>\n\n<pre><code>plt.show() \n</code></pre>\n\n<p>nothing shows.  </p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1490821706, "post_id": 43104175, "comment_id": 73289949, "body": "There are a lot of ways you could do this... what have you tried?"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 3, "creation_date": 1490821815, "post_id": 43104175, "comment_id": 73290006, "body": "It looks like you want us to write some code for you. While many users are willing to produce code for a coder in distress, they usually only help when the poster has already tried to solve the problem on their own. A good way to demonstrate this effort is to include the code you&#39;ve written so far (forming a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>), example input (if there is any), the expected output, and the output you actually get (output, tracebacks, etc.). The more detail you provide, the more answers you are likely to receive. Check the <a href=\"https://stackoverflow.com/tour\">tour</a> and <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1490821873, "post_id": 43104175, "comment_id": 73290027, "body": "@juanpa.arrivillaga I&#39;ve tried iteration and keeping track of the 1s in a list. This is tricky though, because if the list is only size 1 or 2, I&#39;m not sure how to &quot;go back&quot; and switch these values."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1490821975, "post_id": 43104175, "comment_id": 73290079, "body": "... then <i>share your attempts</i>"}, {"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1490822100, "post_id": 43104175, "comment_id": 73290145, "body": "@juanpa.arrivillaga Sorry! Edits above."}, {"owner": {"reputation": 990, "user_id": 4217085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e707345996a53035a3f745308f38b454?s=128&d=identicon&r=PG&f=1", "display_name": "sgrg", "link": "https://stackoverflow.com/users/4217085/sgrg"}, "edited": false, "score": 0, "creation_date": 1490822118, "post_id": 43104175, "comment_id": 73290157, "body": "Is the list always going to have only 1s and 0s?"}, {"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "reply_to_user": {"reputation": 990, "user_id": 4217085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e707345996a53035a3f745308f38b454?s=128&d=identicon&r=PG&f=1", "display_name": "sgrg", "link": "https://stackoverflow.com/users/4217085/sgrg"}, "edited": false, "score": 0, "creation_date": 1490822191, "post_id": 43104175, "comment_id": 73290198, "body": "@sgrg Yes, only 1s and 0s."}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1490822503, "post_id": 43104293, "comment_id": 73290372, "body": "Fixed the len problem."}, {"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1490822843, "post_id": 43104293, "comment_id": 73290529, "body": "So far, by the use of generators, this looks like the most efficient approach at least."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 2, "creation_date": 1490822947, "post_id": 43104293, "comment_id": 73290579, "body": "@ShanZhengYang: I&#39;d expect the <code>binary_opening</code> thing to be a lot more efficient, actually, especially if you&#39;re working with NumPy arrays instead of lists."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1490822492, "last_edit_date": 1490822492, "creation_date": 1490822108, "answer_id": 43104293, "question_id": 43104175, "link": "https://stackoverflow.com/questions/43104175/what-is-a-pythonic-way-to-remove-doubled-duplicates-in-a-list-but-allow-triplets/43104293#43104293", "title": "What is a Pythonic way to remove doubled duplicates in a list but allow triplets/greater?", "body": "<p><a href=\"https://docs.python.org/3/library/itertools.html#itertools.groupby\" rel=\"nofollow noreferrer\"><code>itertools.groupby</code></a> can help by grouping the list into runs of 0s or 1s. From there, we can use the length of a group of 1s to decide whether to switch it to 0s, and use <a href=\"https://docs.python.org/3/library/itertools.html#itertools.chain.from_iterable\" rel=\"nofollow noreferrer\"><code>itertools.chain.from_iterable</code></a> to fuse the groups back into one stream:</p>\n\n<pre><code>import itertools\n\ngroups = ((key, list(group)) for key, group in itertools.groupby(list1))\n\nfixed_groups = (group if key==0 or len(group)&gt;2 else [0]*len(group)\n                for key, group in groups)\n\nresult = list(itertools.chain.from_iterable(fixed_groups))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1633, "user_id": 3022712, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/eadc29ffebbca6135b8e45373d159112?s=128&d=identicon&r=PG&f=1", "display_name": "yar", "link": "https://stackoverflow.com/users/3022712/yar"}, "edited": false, "score": 2, "creation_date": 1490822456, "post_id": 43104318, "comment_id": 73290341, "body": "my answer was a minute too late =). This composition is called opening."}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": false, "score": 7, "last_activity_date": 1490822592, "last_edit_date": 1490822592, "creation_date": 1490822233, "answer_id": 43104318, "question_id": 43104175, "link": "https://stackoverflow.com/questions/43104175/what-is-a-pythonic-way-to-remove-doubled-duplicates-in-a-list-but-allow-triplets/43104318#43104318", "title": "What is a Pythonic way to remove doubled duplicates in a list but allow triplets/greater?", "body": "<p>This is an <em>erosion</em> followed by a <em>dilation</em>, common operations in computer vision:</p>\n\n<pre><code>&gt;&gt;&gt; from scipy.ndimage.morphology import binary_dilation, binary_erosion\n&gt;&gt;&gt; print(list1)\n[0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1]\n&gt;&gt;&gt; print(binary_dilation(binary_erosion(list1)).astype(int))\n[0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1]\n</code></pre>\n\n<p>The composition of the two operations is called an <em>opening</em>:</p>\n\n<pre><code>&gt;&gt;&gt; from scipy.ndimage.morphology import binary_opening\n&gt;&gt;&gt; print(binary_opening(list1).astype(int))\n[0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1490822448, "post_id": 43104349, "comment_id": 73290336, "body": "see @wim&#39;s answer"}, {"owner": {"reputation": 1633, "user_id": 3022712, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/eadc29ffebbca6135b8e45373d159112?s=128&d=identicon&r=PG&f=1", "display_name": "yar", "link": "https://stackoverflow.com/users/3022712/yar"}, "reply_to_user": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1490822500, "post_id": 43104349, "comment_id": 73290367, "body": "@ShanZhengYang yep, thank you... I wrote it in parallel =)"}], "tags": [], "owner": {"reputation": 1633, "user_id": 3022712, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/eadc29ffebbca6135b8e45373d159112?s=128&d=identicon&r=PG&f=1", "display_name": "yar", "link": "https://stackoverflow.com/users/3022712/yar"}, "is_accepted": false, "score": 6, "last_activity_date": 1490822389, "creation_date": 1490822389, "answer_id": 43104349, "question_id": 43104175, "link": "https://stackoverflow.com/questions/43104175/what-is-a-pythonic-way-to-remove-doubled-duplicates-in-a-list-but-allow-triplets/43104349#43104349", "title": "What is a Pythonic way to remove doubled duplicates in a list but allow triplets/greater?", "body": "<p>You can use methods from image processing for this. The morphological operation \"opening\" with the structure element [1 1 1]should do the job. Should be a 1-liner.</p>\n"}, {"tags": [], "owner": {"reputation": 99, "user_id": 7782117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MF6eo.png?s=128&g=1", "display_name": "arrethra", "link": "https://stackoverflow.com/users/7782117/arrethra"}, "is_accepted": false, "score": 0, "last_activity_date": 1490823472, "last_edit_date": 1490823472, "creation_date": 1490822640, "answer_id": 43104411, "question_id": 43104175, "link": "https://stackoverflow.com/questions/43104175/what-is-a-pythonic-way-to-remove-doubled-duplicates-in-a-list-but-allow-triplets/43104411#43104411", "title": "What is a Pythonic way to remove doubled duplicates in a list but allow triplets/greater?", "body": "<p>Using a simple for-loop. Not sure it is the most efficient way, but it does the trick.</p>\n\n<pre><code>list1 = [0,0,1,1,0,0,1,0,1,1,1,0,0,1,0,1,1,1]\n\ncounter_list = []\nfor i,elem in enumerate(list1):\n    if elem==1:\n        counter_list.append(i)\n    else:\n        if len(counter_list)&gt;0 and len(counter_list)&lt;=2:\n            for e in counter_list:\n                list1[e] = 0\n        counter_list= []\nprint(list1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": false, "score": -2, "last_activity_date": 1490823030, "creation_date": 1490823030, "answer_id": 43104492, "question_id": 43104175, "link": "https://stackoverflow.com/questions/43104175/what-is-a-pythonic-way-to-remove-doubled-duplicates-in-a-list-but-allow-triplets/43104492#43104492", "title": "What is a Pythonic way to remove doubled duplicates in a list but allow triplets/greater?", "body": "<p>You could turn it into a string and use a regular expression to substitute short runs of <code>'1'</code> with equivalent runs of <code>'0'</code>, then turn it back into a list:</p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; list1 = [0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1]\n&gt;&gt;&gt; ''.join(map(str, list1))\n'0001110011000111111'\n&gt;&gt;&gt; re.sub(r'(?&lt;!1)1{,2}(?!1)', lambda x: len(x.group())*'0', _)\n'0001110000000111111'\n&gt;&gt;&gt; list(map(int, _))\n[0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1]\n</code></pre>\n"}], "owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 697, "favorite_count": 1, "accepted_answer_id": 43104293, "answer_count": 5, "score": 5, "last_activity_date": 1490826056, "creation_date": 1490821602, "last_edit_date": 1490822080, "question_id": 43104175, "link": "https://stackoverflow.com/questions/43104175/what-is-a-pythonic-way-to-remove-doubled-duplicates-in-a-list-but-allow-triplets", "title": "What is a Pythonic way to remove doubled duplicates in a list but allow triplets/greater?", "body": "<p>I have a list in Python</p>\n\n<pre><code>list1 = [0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1]\n</code></pre>\n\n<p>There are \"groupings\" of consecutive 1's and 0's. For my purposes, I am only interested in the consecutive 1's. Let's say if there is a solitary 1, e.g. </p>\n\n<pre><code> ... 0, 0, 1, 0, 0 ...\n</code></pre>\n\n<p>I would like it to be changed into a 0. Similarly, if there are only pairs of 1's, these should become 0s as well. e.g. </p>\n\n<pre><code>.... 0, 0, 1, 1, 0, 0...\n</code></pre>\n\n<p>should become</p>\n\n<pre><code>.... 0, 0, 0, 0, 0, 0...\n</code></pre>\n\n<p>But \"triplets\" of consecutive ones or higher are ok. </p>\n\n<p>I considered keeping track of the counts of 1s via a dictionary, but this feels too complex. The idea would be to iterate through the list, keeping track of the count of consecutive 1s in a list. But, how do you \"go back\" and switch the 1s to 0s?</p>\n\n<pre><code>counter_list = []\nfor i in list1: \n    if i == 1:\n        counter_list = counter_list + 1\n            if len(counter_list)==1 or len(counter_list)==2:\n                # now I don't know how to \"go back\" to change these elements into 0s\n</code></pre>\n"}, {"tags": ["python", "scipy", "mathematical-optimization"], "answers": [{"tags": [], "owner": {"reputation": 670, "user_id": 7781818, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/13f5392f913a0f47fab3e6719bda4b08?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/7781818/chris"}, "is_accepted": false, "score": 0, "last_activity_date": 1490822990, "creation_date": 1490822990, "answer_id": 43104486, "question_id": 43104149, "link": "https://stackoverflow.com/questions/43104149/minimizing-the-cost-function-for-function-that-takes-multiple-arrays-as-inputs-i/43104486#43104486", "title": "Minimizing the cost function for function that takes multiple arrays as inputs in Python", "body": "<p>If your function output varies smoothly (small changes in input yield small changes in output) in all of its arguments, you could consider a gradient decent approach. </p>\n\n<p>however, as you can see <a href=\"https://docs.scipy.org/doc/scipy/reference/tutorial/optimize.html\" rel=\"nofollow noreferrer\">here (scipy.optimize docs)</a>, there are also optimization methods you can select, that don't require prior knowledge, such as <code>powell</code>. What you will always need is a set of starting values and your function.</p>\n\n<p>But consider: if you don't know much about <code>#function guts</code> and have a lot of parameters (your <code>arr1-4</code> have high dimensionality) then this will take a while...</p>\n\n<p>hope this helps</p>\n"}], "owner": {"reputation": 1160, "user_id": 3826115, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/64deaa69ef71ef12623f3ced55f16d2d?s=128&d=identicon&r=PG&f=1", "display_name": "hm8", "link": "https://stackoverflow.com/users/3826115/hm8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 988, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490822990, "creation_date": 1490821486, "question_id": 43104149, "link": "https://stackoverflow.com/questions/43104149/minimizing-the-cost-function-for-function-that-takes-multiple-arrays-as-inputs-i", "title": "Minimizing the cost function for function that takes multiple arrays as inputs in Python", "body": "<p>I have some function that takes in 4 1-D arrays as input and returns a single 1-D array as output.</p>\n\n<pre><code>def func(arr1,arr2,arr3,arr4):\n    #function guts\n    return answer\n</code></pre>\n\n<p>I am trying to get the output array of this function to match a pre-known correct array answer. I have made a cost function that can compare the function output to the actual answer, and give me a value representing how close it is (a lower number is better)</p>\n\n<pre><code>def cost_function(guess, real_answer):\n   #function guts\n   return cost      #lower number means guess is close to real answer\n</code></pre>\n\n<p>I would like a way to find the best values to use for the original input arrays to get close to the real answer. Presumably this will use the SciPy optimization package, but I am unsure where to start.</p>\n"}, {"tags": ["python", "opencv"], "comments": [{"owner": {"reputation": 10269, "user_id": 3950370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b44be8311e04ebbf6d1d153e0aae4a69?s=128&d=identicon&r=PG", "display_name": "Lukas K&#246;rfer", "link": "https://stackoverflow.com/users/3950370/lukas-k%c3%b6rfer"}, "edited": false, "score": 0, "creation_date": 1490823841, "post_id": 43104111, "comment_id": 73290954, "body": "Please do not link a GitHub repository, but provide <a href=\"https://stackoverflow.com/help/mcve\">a small example</a> in code blocks."}, {"owner": {"reputation": 138, "user_id": 2999486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1593fda43ac29cdf9b6d92c812408c9?s=128&d=identicon&r=PG&f=1", "display_name": "Sipho", "link": "https://stackoverflow.com/users/2999486/sipho"}, "reply_to_user": {"reputation": 10269, "user_id": 3950370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b44be8311e04ebbf6d1d153e0aae4a69?s=128&d=identicon&r=PG", "display_name": "Lukas K&#246;rfer", "link": "https://stackoverflow.com/users/3950370/lukas-k%c3%b6rfer"}, "edited": false, "score": 0, "creation_date": 1490859571, "post_id": 43104111, "comment_id": 73302980, "body": "@lukegv Updated as per your request."}], "answers": [{"tags": [], "owner": {"reputation": 138, "user_id": 2999486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1593fda43ac29cdf9b6d92c812408c9?s=128&d=identicon&r=PG&f=1", "display_name": "Sipho", "link": "https://stackoverflow.com/users/2999486/sipho"}, "is_accepted": true, "score": 1, "last_activity_date": 1548240081, "last_edit_date": 1548240081, "creation_date": 1490952086, "answer_id": 43137023, "question_id": 43104111, "link": "https://stackoverflow.com/questions/43104111/opencv-python-bag-of-wordsbow-generating-histograms-from-dictionary/43137023#43137023", "title": "OpenCV - Python Bag Of Words(BoW) generating histograms from dictionary", "body": "<p>It seems that you cannot train a FlannBasedMatcher using a dictionary before hand as show below:</p>\n\n<pre><code>matcher = cv2.FlannBasedMatcher_create()\nmatcher.add(dictionary)\nmatcher.train()\n</code></pre>\n\n<p>However you can pass the <code>dictionary</code> in when matching like this:</p>\n\n<pre><code>matcher = cv2.FlannBasedMatcher_create()\n\n...\n\nmatches = matcher.match(np.float32(descriptors), dictionary)\n</code></pre>\n\n<p>I am not entirely sure why this. Perhaps its that the <code>train</code> method is only meant to be used by the <code>match</code> method as hinted in this <a href=\"https://stackoverflow.com/questions/31744451/descriptormatcher-opencv-train\">post</a>.</p>\n\n<p>Also according to the <a href=\"http://docs.opencv.org/2.4/modules/features2d/doc/common_interfaces_of_descriptor_matchers.html#descriptormatcher-match\" rel=\"nofollow noreferrer\">opencv docs</a> the parameters for <code>match</code> are:</p>\n\n<blockquote>\n  <ul>\n  <li>queryDescriptors \u2013 Query set of descriptors.</li>\n  <li>trainDescriptors \u2013 Train set of descriptors. This set is not added to the train descriptors collection stored in the class object.</li>\n  <li>matches \u2013 Matches. If a query descriptor is masked out in mask , no match is added for this descriptor. So, matches size may be smaller than the query descriptors count.</li>\n  </ul>\n</blockquote>\n\n<p>So I guess you are just supposed to pass the <code>dictionary</code> in as <code>trainDescriptors</code> because that is what it is.</p>\n\n<p>If anyone could shed more light on this it would be appreciated.</p>\n\n<p>Here are the results after using the above method:</p>\n\n<p><a href=\"https://i.stack.imgur.com/s3dH7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s3dH7.png\" alt=\"The two histograms; one generated from labels and one generated from the flann matches\"></a></p>\n\n<p>You can see the full updated code <a href=\"https://gist.github.com/siphomateke/61f383a77883959ce802116141b4cd7d\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 138, "user_id": 2999486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1593fda43ac29cdf9b6d92c812408c9?s=128&d=identicon&r=PG&f=1", "display_name": "Sipho", "link": "https://stackoverflow.com/users/2999486/sipho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2790, "favorite_count": 5, "accepted_answer_id": 43137023, "answer_count": 1, "score": 1, "last_activity_date": 1548240081, "creation_date": 1490821326, "last_edit_date": 1548240043, "question_id": 43104111, "link": "https://stackoverflow.com/questions/43104111/opencv-python-bag-of-wordsbow-generating-histograms-from-dictionary", "title": "OpenCV - Python Bag Of Words(BoW) generating histograms from dictionary", "body": "<p>I have been trying to create an image classifier in Python OpenCV 3.2.0 using keypoints and the bag of words technique. After some reading I found that I could peform this as follows</p>\n\n<ol>\n<li>Extract image descriptors using AKAZE</li>\n<li>Perform k-means clustering on the descriptors to generate the dictionary</li>\n<li>Generate histograms of images based on dictionary</li>\n<li>Train SVM using histograms</li>\n</ol>\n\n<p>I managed to do steps 1 and 2 but have gotten stuck on steps 3 and 4.</p>\n\n<p>I generated the histograms by using the labels returned by k-means clustering successfully (I think). However, when I wanted to use new test data that was not used to generate the dictionary I had some unexpected results. I tried to use a FLANN matcher like in this <a href=\"https://picoledelimao.github.io/blog/2016/01/31/is-it-a-cat-or-dog-a-neural-network-application-in-opencv/\" rel=\"nofollow noreferrer\">tutorial</a> but the results I get from generating the histograms from the label data does not match the data returned from the FLANN matching.</p>\n\n<p>I load up the images:</p>\n\n<pre><code>dictionary_size = 512\n# Loading images\nimgs_data = []\n# imreads returns a list of all images in that directory\nimgs = imreads(imgs_path)\nfor i in xrange(len(imgs)):\n    # create a numpy to hold the histogram for each image\n    imgs_data.insert(i, np.zeros((dictionary_size, 1)))\n</code></pre>\n\n<p>I then create an array of descriptors (desc):</p>\n\n<pre><code>def get_descriptors(img, detector):\n    # returns descriptors of an image\n    return detector.detectAndCompute(img, None)[1]\n\n# Extracting descriptors\ndetector = cv2.AKAZE_create()\n\ndesc = np.array([])\n# desc_src_img is a list which says which image a descriptor belongs to\ndesc_src_img = []\nfor i in xrange(len(imgs)):\n    img = imgs[i]\n    descriptors = get_descriptors(img, detector)\n    if len(desc) == 0:\n        desc = np.array(descriptors)\n    else:\n        desc = np.vstack((desc, descriptors))\n    # Keep track of which image a descriptor belongs to\n    for j in range(len(descriptors)):\n        desc_src_img.append(i)\n# important, cv2.kmeans only accepts type32 descriptors\ndesc = np.float32(desc)\n</code></pre>\n\n<p>The descriptors are then clustered using k-means:</p>\n\n<pre><code># Clustering\ncriteria = (cv2.TERM_CRITERIA_EPS + cv2.TERM_CRITERIA_MAX_ITER, 10, 0.01)\nflags = cv2.KMEANS_PP_CENTERS\n# desc is a type32 numpy array of vstacked descriptors\ncompactness, labels, dictionary = cv2.kmeans(desc, dictionary_size, None, criteria, 1, flags)\n</code></pre>\n\n<p>Then I create histograms for each image using the labels returned from k-means:</p>\n\n<pre><code># Getting histograms from labels\nsize = labels.shape[0] * labels.shape[1]\nfor i in xrange(size):\n    label = labels[i]\n    # Get this descriptors image id\n    img_id = desc_src_img[i]\n    # imgs_data is a list of the same size as the number of images\n    data = imgs_data[img_id]\n    # data is a numpy array of size (dictionary_size, 1) filled with zeros\n    data[label] += 1\n\nax = plt.subplot(311)\nax.set_title(\"Histogram from labels\")\nax.set_xlabel(\"Visual words\")\nax.set_ylabel(\"Frequency\")\nax.plot(imgs_data[0].ravel())\n</code></pre>\n\n<p>This outputs a histogram like this <a href=\"https://i.stack.imgur.com/5dTej.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5dTej.png\" alt=\"Label Histogram\"></a> which is very evenly distributed and what I expect.</p>\n\n<p>I then attempt to do the same thing on the same image but using FLANN:</p>\n\n<pre><code>matcher = cv2.FlannBasedMatcher_create()\nmatcher.add(dictionary)\nmatcher.train()\n\ndescriptors = get_descriptors(imgs[0], detector)\n\nresult = np.zeros((dictionary_size, 1), np.float32)\n# flan matcher needs descriptors to be type32\nmatches = matcher.match(np.float32(descriptors))\nfor match in matches:\n    visual_word = match.trainIdx\n    result[visual_word] += 1\n\nax = plt.subplot(313)\nax.set_title(\"Histogram from FLANN\")\nax.set_xlabel(\"Visual words\")\nax.set_ylabel(\"Frequency\")\nax.plot(result.ravel())\n</code></pre>\n\n<p>This outputs a histogram like this <a href=\"https://i.stack.imgur.com/v89Mg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/v89Mg.png\" alt=\"FLANN Histogram\"></a> which is very unevenly distributed and does not match up with the first histogram.</p>\n\n<p>You can view the full code and images on <a href=\"https://gist.github.com/siphomateke/ddd61116fd7b26c3a7c817f7dcea8581\" rel=\"nofollow noreferrer\">GitHub</a>. Change \"imgs_path\" (line 20) to a directory with images before running it.</p>\n\n<p>Where am I going wrong? Why are the histograms so different? How do I generate the histograms for new data using the dictionary?</p>\n\n<p>As a side note I tried using the OpenCV BOW implementation but found another issue where it gave the error: \"<em>_queryDescriptors.type() == trainDescType in function cv::BFMatcher::knnMatchImpl</em>\" and that's why I am trying to implement it myself. If someone could provide a working example using Python OpenCV BOW and AKAZE then that would be just as good.</p>\n"}, {"tags": ["python", "heroku", "routes", "tornado"], "comments": [{"owner": {"reputation": 1711, "user_id": 1819351, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/49dde658930e7cd10862d0ffae96b503?s=128&d=identicon&r=PG", "display_name": "Nik Haldimann", "link": "https://stackoverflow.com/users/1819351/nik-haldimann"}, "edited": false, "score": 0, "creation_date": 1490824284, "post_id": 43104108, "comment_id": 73291138, "body": "I notice you are mounting you&#39;re route at <code>&#47;gecode&#47;</code> not at <code>&#47;</code>. So the URL you should be hitting is <a href=\"https://stardrone-server.herokuapp.com/geocode/\" rel=\"nofollow noreferrer\">stardrone-server.herokuapp.com/geocode</a> - not <a href=\"https://stardrone-server.herokuapp.com/\" rel=\"nofollow noreferrer\">stardrone-server.herokuapp.com</a>. I get a 400 Bad Request response. If you look at your logs you should see more about the cause of the 400 response. CORS is not required for what you&#39;re doing - if you&#39;re making a request to the Maps API from a server (as opposed to from a browser) there are no restrictions."}, {"owner": {"reputation": 30, "user_id": 7788309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bg6w8.png?s=128&g=1", "display_name": "Rahma Sinien", "link": "https://stackoverflow.com/users/7788309/rahma-sinien"}, "reply_to_user": {"reputation": 1711, "user_id": 1819351, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/49dde658930e7cd10862d0ffae96b503?s=128&d=identicon&r=PG", "display_name": "Nik Haldimann", "link": "https://stackoverflow.com/users/1819351/nik-haldimann"}, "edited": false, "score": 0, "creation_date": 1490828211, "post_id": 43104108, "comment_id": 73292508, "body": "Hi Nik thanks for help. I fix and try your tips. i still have the same issue. I try several change at the line  : (r&quot;/geocode/&quot;, GeocodeHandler) , by entering the adress. Now the log of Heroku ask me this. &quot;WARNING:tornado.general:400 GET /geocode/ (10.167.190.210): Missing argument address &quot; I&#39;m Still try to fixing and understanding this routes."}, {"owner": {"reputation": 1711, "user_id": 1819351, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/49dde658930e7cd10862d0ffae96b503?s=128&d=identicon&r=PG", "display_name": "Nik Haldimann", "link": "https://stackoverflow.com/users/1819351/nik-haldimann"}, "edited": false, "score": 0, "creation_date": 1490833276, "post_id": 43104108, "comment_id": 73293995, "body": "I think your route is fine, the implementation of your request is the problem (as indicated by the 400 response). You&#39;re doing <code>self.get_query_argument(&quot;address&quot;)</code> - the &quot;Missing argument address&quot; error means you didn&#39;t pass this query parameter. You would need to do a request like <a href=\"https://stardrone-server.herokuapp.com/geocode/?address=new+york\" rel=\"nofollow noreferrer\">stardrone-server.herokuapp.com/geocode/?address=new+york</a>"}, {"owner": {"reputation": 30, "user_id": 7788309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bg6w8.png?s=128&g=1", "display_name": "Rahma Sinien", "link": "https://stackoverflow.com/users/7788309/rahma-sinien"}, "reply_to_user": {"reputation": 1711, "user_id": 1819351, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/49dde658930e7cd10862d0ffae96b503?s=128&d=identicon&r=PG", "display_name": "Nik Haldimann", "link": "https://stackoverflow.com/users/1819351/nik-haldimann"}, "edited": false, "score": 0, "creation_date": 1490866656, "post_id": 43104108, "comment_id": 73307572, "body": "this is the message i got , the issues is tornado : &quot;2017-03-30T06:22:34.702703+00:00 app[web.1]: WARNING:tornado.access:404 GET /geocode/?address=new+york (10.13.211.115) 2.19ms&quot;"}, {"owner": {"reputation": 30, "user_id": 7788309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bg6w8.png?s=128&g=1", "display_name": "Rahma Sinien", "link": "https://stackoverflow.com/users/7788309/rahma-sinien"}, "reply_to_user": {"reputation": 1711, "user_id": 1819351, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/49dde658930e7cd10862d0ffae96b503?s=128&d=identicon&r=PG", "display_name": "Nik Haldimann", "link": "https://stackoverflow.com/users/1819351/nik-haldimann"}, "edited": false, "score": 0, "creation_date": 1490869639, "post_id": 43104108, "comment_id": 73309757, "body": "the log of heroku :       <a href=\"https://cloud.githubusercontent.com/assets/8716331/24499996/0387074a-1544-11e7-9966-599a4759dc84.png\" rel=\"nofollow noreferrer\">cloud.githubusercontent.com/assets/8716331/24499996/&hellip;</a>"}], "owner": {"reputation": 30, "user_id": 7788309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bg6w8.png?s=128&g=1", "display_name": "Rahma Sinien", "link": "https://stackoverflow.com/users/7788309/rahma-sinien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490821320, "creation_date": 1490821320, "question_id": 43104108, "link": "https://stackoverflow.com/questions/43104108/tornado-routes-no-picked-up-by-heroku", "title": "Tornado routes no picked up by Heroku", "body": "<p>i follow  the tutorial based on a service i wan't to use ( Drone Deploy) :\n<a href=\"https://dronedeploy.gitbooks.io/dronedeploy-apps/content/server_example.html\" rel=\"nofollow noreferrer\">https://dronedeploy.gitbooks.io/dronedeploy-apps/content/server_example.html</a>\ni made a topic on their forum for this issue 2 days ago.( and repo on Github)</p>\n\n<p>But maybe someone can help me here.</p>\n\n<p>I got an issue with an Heroku server app i do.\ni use Python and the Tornado module.</p>\n\n<p>The fact is i got a 404 error\nMy terminal ( when test it localy ) ask me :\n\"WARNING:tornado.access:404 GET / (::1) 0.75ms\"</p>\n\n<p>so the \"GET\" function is not working , maybe because of HTTP access control (CORS) i try many fix , but none worked.</p>\n\n<p>Maybe i made something wrong ,or forgot something.</p>\n\n<p>update : \nRecently someone of the Drone deploy said my tornado routes aren't being picked up by heroku.\nAfter following many tutorial and read the Tornado documentation  i have no idea how to routes this.</p>\n\n<p>the url of the server : <a href=\"https://stardrone-server.herokuapp.com/\" rel=\"nofollow noreferrer\">https://stardrone-server.herokuapp.com/</a></p>\n\n<p>this the code :</p>\n\n<pre><code>import os\nimport requests\n\nimport tornado.ioloop\n\nimport tornado.web\n\n\nGEOCODE_FMT = 'https://maps.googleapis.com/maps/api/geocode/json?address={address}&amp;key={key}'\n\n\nclass GeocodeHandler(tornado.web.RequestHandler):\n    \"\"\"Proxy a call to the Google Maps geocode API\"\"\"\n\n    def set_default_headers(self):\n        # allow cross-origin requests to be made from your app on DroneDeploy to your web server\n        self.set_header(\"Access-Control-Allow-Origin\", \"https://www.dronedeploy.com\")\n        self.set_header(\"Access-Control-Allow-Headers\", \"x-requested-with\")\n        # add more allowed methods when adding more handlers (POST, PUT, etc.)\n        self.set_header(\"Access-Control-Allow-Methods\", \"GET, OPTIONS\")\n\n    def get(self):\n        api_key = os.environ.get(\"MyApiKey\")\n        address = self.get_query_argument(\"address\")\n        url = GEOCODE_FMT.format(address=address, key=api_key)\n\n        # fetch results of the geocode from Google\n        response = requests.get(url)\n\n        # send the results back to the client\n        self.write(response.content)\n\n    def options(self):\n        # no body\n        self.set_status(204)\n        self.finish()\n\n\ndef main():\n    application = tornado.web.Application([\n        (r\"/geocode/\", GeocodeHandler)\n    ])\n    port = int(os.environ.get(\"PORT\", 5000))\n    application.listen(port)\n    tornado.ioloop.IOLoop.current().start()\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n\n<p>Maybe i missed something.\nAny help, advices are appreciated </p>\n\n<p>Thanks </p>\n\n<p>John</p>\n"}, {"tags": ["python", "keras", "prediction", "lstm"], "comments": [{"owner": {"reputation": 34711, "user_id": 5974433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ojtxg.jpg?s=128&g=1", "display_name": "Marcin Mo\u017cejko", "link": "https://stackoverflow.com/users/5974433/marcin-mo%c5%bcejko"}, "edited": false, "score": 0, "creation_date": 1490877902, "post_id": 43104056, "comment_id": 73315609, "body": "You are losing not only hidden states but also your weights. You are instantiating a completely new model - with all knowledgle lost. If you want to train the same model - but retrain it (not from the beginning - but with new data) use <code>model.reset_states()</code> at the beginning of your <code>for</code> loop and define one model for all loop runs."}, {"owner": {"reputation": 391, "user_id": 7547440, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-gxeBmchq7Ik/AAAAAAAAAAI/AAAAAAAAQRA/Qvq-l6_odA0/photo.jpg?sz=128", "display_name": "Hamperfait", "link": "https://stackoverflow.com/users/7547440/hamperfait"}, "reply_to_user": {"reputation": 34711, "user_id": 5974433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ojtxg.jpg?s=128&g=1", "display_name": "Marcin Mo\u017cejko", "link": "https://stackoverflow.com/users/5974433/marcin-mo%c5%bcejko"}, "edited": false, "score": 0, "creation_date": 1490883540, "post_id": 43104056, "comment_id": 73320200, "body": "So then better to use the second suggestion I&#39;ve written, right? Defining the model outside the for loop so that it is always reused. Thanks"}], "owner": {"reputation": 391, "user_id": 7547440, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-gxeBmchq7Ik/AAAAAAAAAAI/AAAAAAAAQRA/Qvq-l6_odA0/photo.jpg?sz=128", "display_name": "Hamperfait", "link": "https://stackoverflow.com/users/7547440/hamperfait"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 452, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1490821092, "creation_date": 1490821092, "question_id": 43104056, "link": "https://stackoverflow.com/questions/43104056/keras-recursively-train-model", "title": "Keras recursively train model", "body": "<p>I have a code that runs like this, more or less</p>\n\n<pre><code>for i in list:\ntrain_lstm(attributes)\n</code></pre>\n\n<p>and then, further below, I have</p>\n\n<pre><code>def train_lstm(attributes):\nmodel = Sequential()\nmodel.add(Embedding(100, 500,input_length=5))\nmodel.add(LSTM(100))\nmodel.add(Dense(1, activation='sigmoid'))\ndo the stuff\n</code></pre>\n\n<p>It's not really a bug, but my question is:</p>\n\n<p>Since LSTM networks \"remember\", I suppose that it loses all its point if in every for-iteration I reset the network.\nShould I then define the model outside the loop and reuse it?</p>\n\n<pre><code>model = Sequential()\nmodel.add(Embedding(100, 500,input_length=5))\nmodel.add(LSTM(100))\nmodel.add(Dense(1, activation='sigmoid'))\nfor i in list:\n    train_lst(attributes, model)\n</code></pre>\n\n<p>I'm using the network for time series prediction. Thanks</p>\n"}, {"tags": ["python", "arrays", "numpy", "generator"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1490821317, "post_id": 43104029, "comment_id": 73289751, "body": "This is the normal behavior when passing a single, non-sequence type object to the <code>np.array</code> constructor.  E.g. <code>np.array({1:2}</code>, <code>np.array(set())</code>, <code>np.array(2)</code> In other words, <code>np.array</code> checks if your object is a <i>sequence</i>, if it is not a sequence (and does not define <code>__array__</code>)  it assumes you want an array with a single object (the one you are passing)."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1490825508, "post_id": 43104029, "comment_id": 73291602, "body": "Some argue that <code>np.array</code> should raise an error if it&#39;s not an iterable, and you don&#39;t explicitly specify <code>dtype=object</code>.  For now it&#39;s your responsibility to give <code>np.array</code> an appropriate input, and to verify the return shape and dtype."}], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1490821279, "post_id": 43104074, "comment_id": 73289727, "body": "Yep. Note, it&#39;s the exact same behavior as passing any single, non-sequence object, e.g. <code>{}</code> or <code>set()</code>"}], "tags": [], "owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "is_accepted": false, "score": 3, "last_activity_date": 1490821175, "creation_date": 1490821175, "answer_id": 43104074, "question_id": 43104029, "link": "https://stackoverflow.com/questions/43104029/is-it-a-bug-that-generators-dont-work-when-passed-to-numpy-array/43104074#43104074", "title": "Is it a bug that generators don&#39;t work when passed to &quot;numpy.array&quot;?", "body": "<p>This is not a bug, but normal behaviour. If you want to create a array from an iterator, use <code>fromiter</code>:</p>\n\n<pre><code>&gt;&gt;&gt; import numpy\n&gt;&gt;&gt; a = (i*i for i in range(7))\n&gt;&gt;&gt; numpy.array(a)\narray(&lt;generator object &lt;genexpr&gt; at 0x10dbc1b40&gt;, dtype=object)\n&gt;&gt;&gt; numpy.fromiter(a, dtype=float)\narray([  0.,   1.,   4.,   9.,  16.,  25.,  36.])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1105, "user_id": 1751673, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/d325e87125c883e8ad651e35bb13004e?s=128&d=identicon&r=PG", "display_name": "Eduardo", "link": "https://stackoverflow.com/users/1751673/eduardo"}, "edited": false, "score": 0, "creation_date": 1490844205, "post_id": 43104089, "comment_id": 73296630, "body": "But why not raise an exception? The resulting object is useless in any case."}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "reply_to_user": {"reputation": 1105, "user_id": 1751673, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/d325e87125c883e8ad651e35bb13004e?s=128&d=identicon&r=PG", "display_name": "Eduardo", "link": "https://stackoverflow.com/users/1751673/eduardo"}, "edited": false, "score": 0, "creation_date": 1490844638, "post_id": 43104089, "comment_id": 73296723, "body": "@Eduardo Because that&#39;s not in the spirit of duck-typing (it would require an explicit check for generators/iterators because <code>object</code>-arrays are &quot;generally useful&quot;!) and less performant (that check takes time, especially if you have a nested structure and need to test each item). However, you can simply ask them if they could implement it (their <a href=\"https://github.com/numpy/numpy/issues\" rel=\"nofollow noreferrer\">bug tracker</a> is public)."}], "tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": false, "score": 1, "last_activity_date": 1490821824, "last_edit_date": 1490821824, "creation_date": 1490821224, "answer_id": 43104089, "question_id": 43104029, "link": "https://stackoverflow.com/questions/43104029/is-it-a-bug-that-generators-dont-work-when-passed-to-numpy-array/43104089#43104089", "title": "Is it a bug that generators don&#39;t work when passed to &quot;numpy.array&quot;?", "body": "<p>No it's a design decision. If you want to pass in a generator you need to use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.fromiter.html\" rel=\"nofollow noreferrer\"><code>np.fromiter</code></a>:</p>\n\n<pre><code>&gt;&gt;&gt; np.fromiter((i for i in range(10)), float)\narray([ 0.,  1.,  2.,  3.,  4.,  5.,  6.,  7.,  8.,  9.])\n</code></pre>\n\n<p>or convert it to a <code>list</code> before calling <code>np.array</code>:</p>\n\n<pre><code>&gt;&gt;&gt; np.array(list(your_iterator))\n</code></pre>\n\n<hr>\n\n<p>One reason for this is that numpy needs to iterate over the object several times: once to determine the length/dytpe of the resulting array and once to insert the items. That doesn't play well with generators and iterators which can be iterated only once. Also Generators can be infinite in length (i.e. <code>itertools.count</code>) and/or use \"too much memory\".</p>\n\n<p>The rationale probably was: If someone wants to use generators to create an array it's going to use a lot of memory and will be slow - so it should be done intentionally: either by casting it to a list or using <code>np.fromiter</code>.</p>\n"}], "owner": {"reputation": 1105, "user_id": 1751673, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/d325e87125c883e8ad651e35bb13004e?s=128&d=identicon&r=PG", "display_name": "Eduardo", "link": "https://stackoverflow.com/users/1751673/eduardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1490821824, "creation_date": 1490821005, "last_edit_date": 1490821403, "question_id": 43104029, "link": "https://stackoverflow.com/questions/43104029/is-it-a-bug-that-generators-dont-work-when-passed-to-numpy-array", "title": "Is it a bug that generators don&#39;t work when passed to &quot;numpy.array&quot;?", "body": "<p>If a generator is passed to <code>numpy.array</code>, <code>numpy</code> does not iterate over the object, nor does it complain, <strong>even if <code>copy=True</code></strong>. Any attempt to index into the array fails, frequently much later and in far away code.</p>\n\n<p>I understand that numpy wants to know the size of the array from the beginning, but this behavior is not good. It should either copy to an intermediate list or raise an exception.</p>\n"}, {"tags": ["python", "r", "time-series"], "comments": [{"owner": {"reputation": 843, "user_id": 10407800, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-monX2jV6a2o/AAAAAAAAAAI/AAAAAAAAABI/3uuxdKyGCQs/photo.jpg?sz=128", "display_name": "Daniel James", "link": "https://stackoverflow.com/users/10407800/daniel-james"}, "edited": false, "score": 0, "creation_date": 1561667829, "post_id": 43104006, "comment_id": 100150925, "body": "Can you give an example of data and codes to verify your claim?"}], "owner": {"reputation": 21, "user_id": 7753470, "user_type": "registered", "profile_image": "https://graph.facebook.com/1479191255424478/picture?type=large", "display_name": "Shreyo Mallik", "link": "https://stackoverflow.com/users/7753470/shreyo-mallik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1490824577, "creation_date": 1490820914, "last_edit_date": 1490824577, "question_id": 43104006, "link": "https://stackoverflow.com/questions/43104006/arima-in-python-r", "title": "ARIMA in Python &amp; R", "body": "<p>In <code>auto.arima</code> in <code>R</code>, we select <code>(p,d,q) &amp; (P,D,Q)</code> respectively but in <code>auto_arima</code> in <code>Python</code> we select <code>(p,0,q) &amp; (0,d,0)</code> respectively. <p>What is the difference between the two selections? Does <code>auto_arima</code> in <code>Python</code> take care of constant &amp; drift as <code>auto.arima</code> in <code>R</code>? Could we choose a <code>SARIMAX Model</code> in <code>Python</code> using <code>auto_arima</code>? <p>If yes, then how? Besides, how could I set some coefficients to zero in <code>ARIMA</code> in <code>Python</code> as we do with fixed command in <code>ARIMA</code> in <code>R</code>?</p>\n"}, {"tags": ["python", "cmd", "cygwin", "windows-10"], "comments": [{"owner": {"reputation": 1385, "user_id": 5718237, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/31e352ce7668f7d7fbfc57408047589a?s=128&d=identicon&r=PG", "display_name": "James McCormac", "link": "https://stackoverflow.com/users/5718237/james-mccormac"}, "edited": false, "score": 0, "creation_date": 1490821583, "post_id": 43104003, "comment_id": 73289885, "body": "The shebang is confusing as it doesn&#39;t hold across windows and cygwin. Remove the shebang and try running it with <code>python toc.py -i toc -s syntax -p pn</code> from Windows command line and/or Cygwin. This will allow windows or cygwin to use the correct version of Python to run the script."}, {"owner": {"reputation": 1, "user_id": 156458, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/3PCjR.png?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/156458/tim"}, "reply_to_user": {"reputation": 1385, "user_id": 5718237, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/31e352ce7668f7d7fbfc57408047589a?s=128&d=identicon&r=PG", "display_name": "James McCormac", "link": "https://stackoverflow.com/users/5718237/james-mccormac"}, "edited": false, "score": 0, "creation_date": 1490825483, "post_id": 43104003, "comment_id": 73291594, "body": "Thanks. (1) Shall i also remove <code># -*- coding: utf-8 -*   </code> besides removing the shebang? (2) there is some new error, see my update."}, {"owner": {"reputation": 38377, "user_id": 3074564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yo5QG.png?s=128&g=1", "display_name": "Mofi", "link": "https://stackoverflow.com/users/3074564/mofi"}, "edited": false, "score": 0, "creation_date": 1490851612, "post_id": 43104003, "comment_id": 73298721, "body": "@Tim If your Python script does not contain any non ASCII character with a code value greater 127 decimal, then yes, remove also the coding comment as not needed at all."}, {"owner": {"reputation": 10781, "user_id": 447901, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/11ea5dd4ad290e75422e32e1e340772e?s=128&d=identicon&r=PG", "display_name": "lit", "link": "https://stackoverflow.com/users/447901/lit"}, "edited": false, "score": 0, "creation_date": 1490877484, "post_id": 43104003, "comment_id": 73315254, "body": "@Tim, yes, there are differences between Python 2 and 3. Python 2.7 for Windows can be downloaded from python.org."}, {"owner": {"reputation": 1385, "user_id": 5718237, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/31e352ce7668f7d7fbfc57408047589a?s=128&d=identicon&r=PG", "display_name": "James McCormac", "link": "https://stackoverflow.com/users/5718237/james-mccormac"}, "edited": false, "score": 0, "creation_date": 1490888547, "post_id": 43104003, "comment_id": 73324126, "body": "This warning is because print is a function in Python 3. Actually parentheses work with print in Python 2.7 also. Put your print statements inside parentheses like <code>print(&#39;BLAH&#39;)</code> and that will solve that issue"}, {"owner": {"reputation": 6281, "user_id": 5105383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YCB5.jpg?s=128&g=1", "display_name": "matzeri", "link": "https://stackoverflow.com/users/5105383/matzeri"}, "edited": false, "score": 0, "creation_date": 1491052454, "post_id": 43104003, "comment_id": 73389866, "body": "In cygwin you should use the python provided by cygwin, not the windows one. Otherwise you risk always issue with different path format."}], "owner": {"reputation": 1, "user_id": 156458, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/3PCjR.png?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/156458/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490825484, "creation_date": 1490820895, "last_edit_date": 1490825484, "question_id": 43104003, "link": "https://stackoverflow.com/questions/43104003/in-windows-10-how-shall-i-run-a-python-script-created-and-runnable-in-ubuntu", "title": "In Windows 10, how shall I run a python script created and runnable in Ubuntu?", "body": "<p>In Windows 10, I added the pathname of the parent directory of a python script <code>toc.py</code> to environment variable PATH. Then I tried to run it in two ways, but both failed:</p>\n\n<p>In cmd</p>\n\n<pre><code>&gt;toc.py -i toc -s syntax -p pn\nUnable to create process using 'C:\\Users\\Tim\\AppData\\Local\\Programs\\Python\\Python35-32\\python.exe \"C:\\Users\\Tim\\Downloads\\self\\bookmark\\mine\\toc2others.py\"  -i toc -s syntax -p pn'\n</code></pre>\n\n<p>In Cygwin</p>\n\n<pre><code>$ toc.py  -i toc -p pn -s syntax\nC:\\Users\\Tim\\AppData\\Local\\Programs\\Python\\Python35-32\\python.exe: can't open file '/cygdrive/c/Users/Tim/Downloads/self/bookmark/mine/toc2others.py': [Errno 2] No such file or directory\n</code></pre>\n\n<p>The python script <code>toc.py</code> was created to run with Python 2.7 under Ubuntu, and it looks like</p>\n\n<pre><code>#! /usr/bin/env python                                                                                              \n# -*- coding: utf-8 -*                                                                                                                                                                                                                            \nimport pdb                                                                                                                                                                                                                                                                                                                                                              \nfrom optparse import OptionParser        \n...\n</code></pre>\n\n<p>What shall i do in order to run the python script in cmd ?</p>\n\n<p>What shall i do in order to run the python script in  Cygwin?</p>\n\n<p>Thanks.</p>\n\n<hr>\n\n<p>Update:</p>\n\n<p>i remove the shebang from the python script, and now</p>\n\n<pre><code>&gt;toc.py -i toc -s syntax -p pn\n  File \"C:\\Users\\Tim\\Downloads\\self\\bookmark\\mine\\toc.py\", line 37\n    print \" \"*level, root.value\n            ^\nSyntaxError: Missing parentheses in call to 'print'\n</code></pre>\n\n<p>Is this error because of using Python 3 interpreter and Python 2.7 script?</p>\n"}, {"tags": ["python", "keras", "keras-layer"], "answers": [{"tags": [], "owner": {"reputation": 588, "user_id": 3784713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae2384c687f03e40bf13e4d64ce6fe4?s=128&d=identicon&r=PG&f=1", "display_name": "Dref360", "link": "https://stackoverflow.com/users/3784713/dref360"}, "is_accepted": true, "score": 4, "last_activity_date": 1490877710, "last_edit_date": 1490877710, "creation_date": 1490822707, "answer_id": 43104428, "question_id": 43103980, "link": "https://stackoverflow.com/questions/43103980/one-dimensional-convolutional-variational-autoencoder-in-keras/43104428#43104428", "title": "One dimensional convolutional variational autoencoder in keras", "body": "<p>Try reshaping <code>x_decoded_mean</code> to your input shape since <code>x_train[0:N,:]</code> is shaped <code>(1,784)</code> but your output is <code>(784,)</code>\nsomething like</p>\n\n<pre><code>x_decoded_mean = Reshape([1,784])(x_decoded_mean)\n</code></pre>\n"}], "owner": {"reputation": 1564, "user_id": 3126402, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7c2502d74600c9f320495ae855f98134?s=128&d=identicon&r=PG&f=1", "display_name": "Astrid", "link": "https://stackoverflow.com/users/3126402/astrid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3408, "favorite_count": 4, "accepted_answer_id": 43104428, "answer_count": 1, "score": 4, "last_activity_date": 1496692746, "creation_date": 1490820848, "last_edit_date": 1490821185, "question_id": 43103980, "link": "https://stackoverflow.com/questions/43103980/one-dimensional-convolutional-variational-autoencoder-in-keras", "title": "One dimensional convolutional variational autoencoder in keras", "body": "<p>I am trying to adapt <a href=\"https://github.com/fchollet/keras/blob/master/examples/variational_autoencoder.py\" rel=\"nofollow noreferrer\">this example from the git repo</a>, basically by using their other example from the same <a href=\"https://github.com/fchollet/keras/blob/master/examples/imdb_cnn.py\" rel=\"nofollow noreferrer\">repo here (which uses deconvolution)</a>.</p>\n\n<p>I cannot quite figure out where I am going wrong, but it seems very basic. Here we are:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom scipy.stats import norm\n# Keras uses TensforFlow backend as default\nfrom keras.layers import Input, Dense, Lambda, Flatten, Reshape\nfrom keras.layers import Conv1D,UpSampling1D\nfrom keras.models import Model\nfrom keras import backend as K\nfrom keras import metrics\nfrom keras.datasets import mnist\n\n# Input image dimensions\nsteps, original_dim = 1, 28*28 # Take care here since we are changing this according to the data\n# Number of convolutional filters to use\nfilters = 64\n# Convolution kernel size\nnum_conv = 6\n# Set batch size\nbatch_size = 100\n# Decoder output dimensionality\ndecOutput = 10\n\nlatent_dim = 20\nintermediate_dim = 256\nepsilon_std = 1.0\nepochs = 5\n\nx = Input(batch_shape=(batch_size,steps,original_dim))\n# Play around with padding here, not sure what to go with.\nconv_1 = Conv1D(1,\n                kernel_size=num_conv,\n                padding='same', \n                activation='relu')(x)\nconv_2 = Conv1D(filters,\n                kernel_size=num_conv,\n                padding='same', \n                activation='relu',\n                strides=1)(conv_1)\nflat = Flatten()(conv_2) # Since we are passing flat data anyway, we probably don't need this.\nhidden = Dense(intermediate_dim, activation='relu')(flat)\nz_mean = Dense(latent_dim)(hidden)\nz_log_var = Dense(latent_dim)(hidden)\n\ndef sampling(args):\n    z_mean, z_log_var = args\n    epsilon = K.random_normal(shape=(batch_size, latent_dim),\n                              mean=0., stddev=epsilon_std)\n    return z_mean + K.exp(z_log_var ) * epsilon # the original VAE divides z_log_var with two -- why?\n\n# note that \"output_shape\" isn't necessary with the TensorFlow backend\n# so you could write `Lambda(sampling)([z_mean, z_log_var])`\nz = Lambda(sampling, output_shape=(latent_dim,))([z_mean, z_log_var])\n\n\n\n# we instantiate these layers separately so as to reuse them later\ndecoder_h = Dense(intermediate_dim, activation='relu')\ndecoder_mean = Dense(original_dim, activation='sigmoid')\n\nh_decoded = decoder_h(z)\nx_decoded_mean = decoder_mean(h_decoded)\n\ndef vae_loss(x, x_decoded_mean):\n    xent_loss = original_dim * metrics.binary_crossentropy(x, x_decoded_mean)\n    kl_loss = - 0.5 * K.sum(1 + z_log_var - K.square(z_mean) - K.exp(z_log_var), axis=-1) # Double check wtf this is supposed to be\n    return xent_loss + kl_loss\n\nvae = Model(x, x_decoded_mean)\nvae.compile(optimizer='adam', loss=vae_loss) # 'rmsprop'\nvae.summary()\n</code></pre>\n\n<p>Which comes out as:</p>\n\n<pre><code>____________________________________________________________________________________________________\nLayer (type)                     Output Shape          Param #     Connected to                     \n====================================================================================================\ninput_31 (InputLayer)            (100, 1, 784)         0                                            \n____________________________________________________________________________________________________\nconv1d_87 (Conv1D)               (100, 1, 1)           4705                                         \n____________________________________________________________________________________________________\nconv1d_88 (Conv1D)               (100, 1, 64)          448                                          \n____________________________________________________________________________________________________\nflatten_29 (Flatten)             (100, 64)             0                                            \n____________________________________________________________________________________________________\ndense_134 (Dense)                (100, 256)            16640                                        \n____________________________________________________________________________________________________\ndense_135 (Dense)                (100, 20)             5140                                         \n____________________________________________________________________________________________________\ndense_136 (Dense)                (100, 20)             5140                                         \n____________________________________________________________________________________________________\nlambda_24 (Lambda)               (100, 20)             0                                            \n____________________________________________________________________________________________________\ndense_137 (Dense)                (100, 256)            5376                                         \n____________________________________________________________________________________________________\ndense_138 (Dense)                (100, 784)            201488                                       \n====================================================================================================\nTotal params: 238,937.0\nTrainable params: 238,937.0\nNon-trainable params: 0.0\n</code></pre>\n\n<p>Then if I try to run this, as so:</p>\n\n<pre><code>from keras.datasets import mnist\n\nimg_rows, img_cols = 1,28*28\noriginal_img_size = (img_rows, img_cols)\n\n# train the VAE on MNIST digits\n(x_train, _), (x_test, y_test) = mnist.load_data()\n\nx_train = x_train.astype('float32') / 255.\nx_train = x_train.reshape((x_train.shape[0],) + original_img_size)\n\nprint('x_train.shape:', x_train.shape)\n\nN = 1000\nepochs = 2\nbatch_size = int(N/10)\nvae.fit(x_train[0:N,:], x_train[0:N,:],\n        shuffle=True,\n        epochs=epochs,\n        batch_size=batch_size)\n</code></pre>\n\n<p>I get this error, but I cannot quite figure out how to get past it. It has something to with going from Conv1D to Dense...</p>\n\n<pre><code>ValueError: Cannot feed value of shape (100, 1, 784) for Tensor u'dense_138_target:0', which has shape '(?, ?)'\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "indexing"], "comments": [{"owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "edited": false, "score": 0, "creation_date": 1490822422, "post_id": 43103951, "comment_id": 73290326, "body": "What happenes to column C? And also can you explain more on <i>3 cells a change in the time series</i>?"}, {"owner": {"reputation": 357, "user_id": 6317524, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/60f5811af3a8639fe0a1f7fd4475d95d?s=128&d=identicon&r=PG&f=1", "display_name": "trob", "link": "https://stackoverflow.com/users/6317524/trob"}, "reply_to_user": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "edited": false, "score": 0, "creation_date": 1490824481, "post_id": 43103951, "comment_id": 73291216, "body": "I believe I&#39;ve addressed your questions via my recent edits.  Let me know if anything remains unclear."}], "answers": [{"tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": true, "score": 1, "last_activity_date": 1490825004, "last_edit_date": 1490825004, "creation_date": 1490824286, "answer_id": 43104806, "question_id": 43103951, "link": "https://stackoverflow.com/questions/43103951/creating-a-range-relative-to-a-booelan-index-using-pandas-dataframe/43104806#43104806", "title": "Creating a range relative to a booelan index using Pandas Dataframe", "body": "<p>You might use the <code>bfill</code> (backward fill) method with a limit parameter:</p>\n\n<pre><code>df.shift().where(df.diff() != 0, pd.np.nan).bfill(limit=2).fillna(0).astype(bool)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/2tZi6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2tZi6.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 357, "user_id": 6317524, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/60f5811af3a8639fe0a1f7fd4475d95d?s=128&d=identicon&r=PG&f=1", "display_name": "trob", "link": "https://stackoverflow.com/users/6317524/trob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 1, "accepted_answer_id": 43104806, "answer_count": 1, "score": 0, "last_activity_date": 1490825004, "creation_date": 1490820754, "last_edit_date": 1490824325, "question_id": 43103951, "link": "https://stackoverflow.com/questions/43103951/creating-a-range-relative-to-a-booelan-index-using-pandas-dataframe", "title": "Creating a range relative to a booelan index using Pandas Dataframe", "body": "<p>What's a good way to select a range based on the reference point of a boolean index?</p>\n\n<p>For example, suppose I have the following dataframe, df:</p>\n\n<pre><code>dates = pd.date_range('1/1/2000', periods=10)\ndf = pd.DataFrame(np.empty([10, 3]), index=dates, columns=['A', 'B','C'])\ndf.iloc[:3,0] = 100\ndf.iloc[3:7,0] = 200\ndf.iloc[7:,0] = 300\ndf.iloc[:5,1] = 400\ndf.iloc[5:,1] = 500\ndf.iloc[:7,2] = 600\ndf.iloc[7:,2] = 700\n</code></pre>\n\n<p>and the boolean dataframe:</p>\n\n<pre><code>df1 = [df!=df.shift(1)]\n</code></pre>\n\n<p>I would like to populate a range of 3 cells prior where the booleans are True. </p>\n\n<p>Is there not a single-line method to get a boolean range relative to a reference?  The result would look something like this: </p>\n\n<pre><code>                A      B      C\n2000-01-01  False  False  False\n2000-01-02   True  False  False\n2000-01-03   True  False  False\n2000-01-04   True   True  False\n2000-01-05  False   True  False\n2000-01-06   True   True   True\n2000-01-07   True  False   True\n2000-01-08   True  False   True\n2000-01-09  False  False  False\n2000-01-10  False  False  False\n</code></pre>\n"}, {"tags": ["python", "qt", "qt5", "pyqt5"], "answers": [{"tags": [], "owner": {"reputation": 946, "user_id": 5773767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/870fc401476f861630d186ca54645628?s=128&d=identicon&r=PG", "display_name": "Ceppo93", "link": "https://stackoverflow.com/users/5773767/ceppo93"}, "is_accepted": true, "score": 1, "last_activity_date": 1490907297, "creation_date": 1490907297, "answer_id": 43128130, "question_id": 43103937, "link": "https://stackoverflow.com/questions/43103937/creating-a-qt-child-after-adding-its-parent-to-a-qgraphicsscene-makes-it-immobil/43128130#43128130", "title": "Creating a Qt child after adding its parent to a QGraphicsScene makes it immobile", "body": "<p>From the docs:</p>\n\n<blockquote>\n  <p>A QGraphicsItemGroup is a special type of compound item that treats itself and all its children as one item (i.e., all events and geometries for all children are merged together). It's common to use item groups in presentation tools, when the user wants to group several smaller items into one big item in order to simplify moving and copying of items.</p>\n</blockquote>\n\n<p>Since all the <code>Point(s)</code> inside <code>self.polygon</code> are treated as single object, this object need to be Movable itself:</p>\n\n<p><code>self.polygon.setFlag(QtWidgets.QGraphicsItem.ItemIsMovable, True)</code></p>\n\n<p>If you want your \"points\" to be movable inside their parent <code>QGraphicsItemGroup</code> is not the right choice, instead you can use a <code>GraphicsRectItem</code> or a <code>QGraphicsPolygonItem</code> and others</p>\n"}], "owner": {"reputation": 560, "user_id": 1057105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1eed3b357556c214ba12853c78a3173?s=128&d=identicon&r=PG", "display_name": "artoonie", "link": "https://stackoverflow.com/users/1057105/artoonie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 326, "favorite_count": 0, "accepted_answer_id": 43128130, "answer_count": 1, "score": 0, "last_activity_date": 1490907297, "creation_date": 1490820714, "last_edit_date": 1490826197, "question_id": 43103937, "link": "https://stackoverflow.com/questions/43103937/creating-a-qt-child-after-adding-its-parent-to-a-qgraphicsscene-makes-it-immobil", "title": "Creating a Qt child after adding its parent to a QGraphicsScene makes it immobile", "body": "<p>If you add a <code>QtWidgets.QGraphicsEllipseItem</code> to a <code>QGraphicsScene</code>, it is mobile.\nIf you assign it to have a <code>QtWidgets.QGraphicsItemGroup</code> as a parent, then add the parent to the scene, it is mobile.</p>\n\n<p>It becomes immobile if you add the parent to the scene BEFORE adding the child. Why?</p>\n\n<p>Below is a self-contained example. If you run the code, you'll notice that you can create four <code>Point</code>s, all of which are mobile, then after its parent is added on the fifth <code>Point</code>, it becomes immobile. This was not the case in Qt4.</p>\n\n<pre><code>from PyQt5.QtWidgets import (QApplication, QGraphicsView,\\                      \n                             QGraphicsScene, QGraphicsItem)\nfrom PyQt5 import QtWidgets, QtGui, QtCore\n\nclass Point(QtWidgets.QGraphicsEllipseItem):\n    def __init__(self, pos):\n        super(Point, self).__init__(0,0,10,10)\n        self.setPos(pos)\n        self.setFlags(QtWidgets.QGraphicsItem.ItemIsMovable | \\\n                      QtWidgets.QGraphicsItem.ItemIsSelectable)\n\nclass Graphics(QGraphicsItem):\n    def __init__(self):\n        super(Graphics, self).__init__()\n        self.numPoints = 0\n        self.polygon = QtWidgets.QGraphicsItemGroup()\n\n    def paint(self, painter, option, widget):\n        pass\n\n    def boundingRect(self):\n        return QtCore.QRectF(0,0,300,300)\n\n    def mousePressEvent(self, event):\n        pos = event.pos()\n        itemAt = self.scene().itemAt(pos, QtGui.QTransform())\n\n        # If nothing is under the mouse, create a new point and accept the event\n        if not isinstance(itemAt, Point):\n            # Add the point to the scene and set its parent\n            pt = Point(pos)\n            pt.setParentItem(self.polygon)\n            if pt.scene() is None:\n                self.scene().addItem(pt)\n            else:\n                print \"The item was implicitly added to the scene by its parent\"\n\n            # On the fifth point, add the polygon to the scene\n            self.numPoints += 1\n            if self.numPoints == 4:\n                self.scene().addItem(self.polygon)\n\n            event.accept()\n        super(Graphics, self).mousePressEvent(event)\n\nclass MainWindow(QGraphicsView):\n    def __init__(self):\n        super(MainWindow, self).__init__()\n        scene = QGraphicsScene(self)\n        scene.addItem(Graphics())\n        scene.setSceneRect(0, 0, 300, 300)\n        self.setScene(scene)\n\nif __name__ == '__main__':\n    import sys\n    app = QApplication(sys.argv)\n    mainWindow = MainWindow()\n\n    mainWindow.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}, {"tags": ["python", "html", "flask", "jinja2"], "answers": [{"comments": [{"owner": {"reputation": 345, "user_id": 1424848, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/94a403d66a50d9b419020b4dee1fe0ec?s=128&d=identicon&r=PG", "display_name": "mancuss", "link": "https://stackoverflow.com/users/1424848/mancuss"}, "edited": false, "score": 0, "creation_date": 1490826092, "post_id": 43104930, "comment_id": 73291818, "body": "Thanks a lot! This was much easier than I expected!"}], "tags": [], "owner": {"reputation": 1711, "user_id": 1819351, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/49dde658930e7cd10862d0ffae96b503?s=128&d=identicon&r=PG", "display_name": "Nik Haldimann", "link": "https://stackoverflow.com/users/1819351/nik-haldimann"}, "is_accepted": true, "score": 0, "last_activity_date": 1490824771, "creation_date": 1490824771, "answer_id": 43104930, "question_id": 43103934, "link": "https://stackoverflow.com/questions/43103934/jinja2-looping-through-dict-with-control-over-what-keyvalue-is-used/43104930#43104930", "title": "Jinja2 looping through dict with control over what key:value is used", "body": "<p>Jinja supports dictionary access syntax, you can use <code>{{data['CidrBlock']}}</code> and <code>{{data['Name']}}</code> to access specific values in your dictionary.</p>\n"}], "owner": {"reputation": 345, "user_id": 1424848, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/94a403d66a50d9b419020b4dee1fe0ec?s=128&d=identicon&r=PG", "display_name": "mancuss", "link": "https://stackoverflow.com/users/1424848/mancuss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4081, "favorite_count": 0, "accepted_answer_id": 43104930, "answer_count": 1, "score": 2, "last_activity_date": 1490824771, "creation_date": 1490820710, "question_id": 43103934, "link": "https://stackoverflow.com/questions/43103934/jinja2-looping-through-dict-with-control-over-what-keyvalue-is-used", "title": "Jinja2 looping through dict with control over what key:value is used", "body": "<p>I'm trying to create a table in HTML from data passed to the web as dict</p>\n\n<p>app.py:</p>\n\n<pre><code>client = boto3.client('ec2')\nvpc_ids = client.describe_vpcs()\nfor i in vpc_ids.get('Vpcs'):\n    for tag in i.get('Tags'):\n        if tag.get('Key') == 'Name':\n            vpc_list[i.get('VpcId')] = {'CidrBlock': i.get('CidrBlock'), \n            'Name': tag.get('Value')}\nreturn vpc_list\n</code></pre>\n\n<p>This returnes dict like this:</p>\n\n<pre><code>vpc_list = {'vpc-1': {'CidrBlock': 'x.x.x.x/16', 'Name': 'a-vpc'},\n            'vpc-2': {'CidrBlock': 'y.y.y.y/16', 'Name': 'b-vpc'},\n            'vpc-3': {'CidrBlock': 'z.z.z.z/16', 'Name': 'c-vpc'},\n            'vpc-4': {'CidrBlock': 'q.q.q.q/16', 'Name': 'd-vpc'}}\n</code></pre>\n\n<p>My HTML looks like this:</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n{% if vpc_lists is defined %}\n{% for vpc, data in vpc_lists.items() %}\n&lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-1\"&gt;\n        &lt;i class=\"fa fa-camera-retro fa-lg\"&gt;&lt;/i&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-3\"&gt;\n        {{vpc}}\n    &lt;/div&gt;\n    {% for key,value in data.items() %}\n    &lt;div class=\"col-md-3\"&gt;\n        {{value}}\n    &lt;/div&gt;\n    {% endfor %}\n    &lt;div class=\"col-md-2\"&gt;\n        &lt;a href=\"/vpc/{{vpc}}\"&gt;Link&lt;/a&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n{% endfor %}\n{% endif %}\n</code></pre>\n\n<p>The Above works... kind off, but I would like better control over how and where I can use key values, so instead of just blindly looping through this I would like to be able to get a value based on the key, something like </p>\n\n<pre><code>vpc.get('CidrBlock') or vpc['CidrBlock'] to get the x.x.x.x/16 value.\n</code></pre>\n\n<p>Not sure if I'm making it clear enough. I couldn't find anything like this in here. </p>\n"}, {"tags": ["python", "pandas", "dataframe", "subset"], "answers": [{"comments": [{"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1490821102, "post_id": 43104013, "comment_id": 73289636, "body": "Why is it <code>g.name</code>?"}, {"owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "reply_to_user": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1490821218, "post_id": 43104013, "comment_id": 73289696, "body": "It&#39;s the key for the group, i.e, a unique value in <code>column3</code> in this case. You can also use <code>g.column3.iat[0]</code>. I just find it shorter."}], "tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": true, "score": 4, "last_activity_date": 1490821522, "last_edit_date": 1490821522, "creation_date": 1490820942, "answer_id": 43104013, "question_id": 43103915, "link": "https://stackoverflow.com/questions/43103915/how-to-subset-a-pandas-dataframe-on-value-counts/43104013#43104013", "title": "How to subset a pandas dataframe on value_counts?", "body": "<p>You can use <code>groupby.filter</code>; In the filter, construct a unique boolean value for each group to filter the data frame:</p>\n\n<pre><code>df.groupby(\"column3\").filter(lambda g: (g.name != 0) and (g.column3.size &gt;= 3))\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/yob3U.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yob3U.png\" alt=\"enter image description here\"></a></p>\n\n<p>Another option could be:</p>\n\n<pre><code>df[(df.column3 != 0) &amp; (df.groupby(\"column3\").column3.transform(\"size\") &gt;= 3)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 1, "last_activity_date": 1490821523, "creation_date": 1490821523, "answer_id": 43104160, "question_id": 43103915, "link": "https://stackoverflow.com/questions/43103915/how-to-subset-a-pandas-dataframe-on-value-counts/43104160#43104160", "title": "How to subset a pandas dataframe on value_counts?", "body": "<p>Or you could filter out the zeroes before you group:</p>\n\n<pre><code> df1[df1['column3'] != 0].groupby(\"column3\").filter(lambda x: x['column3'].size &gt;= 3 )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 1, "last_activity_date": 1490822133, "creation_date": 1490822133, "answer_id": 43104300, "question_id": 43103915, "link": "https://stackoverflow.com/questions/43103915/how-to-subset-a-pandas-dataframe-on-value-counts/43104300#43104300", "title": "How to subset a pandas dataframe on value_counts?", "body": "<p>Alternative solution:</p>\n\n<pre><code>In [132]: cnt = df.column3.value_counts()\n\nIn [133]: cnt\nOut[133]:\n0    4\n1    3\n3    2\n2    2\nName: column3, dtype: int64\n\nIn [134]: v = cnt[(cnt.index != 0) &amp; (cnt &gt;= 3)].index.values\n\nIn [135]: v\nOut[135]: array([1], dtype=int64)\n\nIn [136]: df.query(\"column3 in @v\")\nOut[136]:\n   column1 column2  column3\n0       10       A        1\n1       15       A        1\n2       19       B        1\n</code></pre>\n"}], "owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6652, "favorite_count": 2, "accepted_answer_id": 43104013, "answer_count": 3, "score": 3, "last_activity_date": 1490822133, "creation_date": 1490820663, "last_edit_date": 1490820889, "question_id": 43103915, "link": "https://stackoverflow.com/questions/43103915/how-to-subset-a-pandas-dataframe-on-value-counts", "title": "How to subset a pandas dataframe on value_counts?", "body": "<p>I have the following pandas dataframe</p>\n\n<pre><code>import pandas as pd\ndf = pd.read_csv(\"filename1.csv\")\n\ndf\n    column1  column2   column3\n0        10       A          1\n1        15       A          1\n2        19       B          1\n3      5071       B          0\n4      5891       B          0\n5      3210       B          0\n6        12       B          2\n7        13       C          2\n8        20       C          0\n9         5       C          3\n10        9       C          3\n</code></pre>\n\n<p>Now, using the function <code>value_counts()</code> will give me the counts of each value in a certain column, e.g. </p>\n\n<pre><code>df.column3.value_counts()\n\n1   3\n2   2\n3   2\n</code></pre>\n\n<p>However, I would like to subset a pandas dataframe based on the number of values in a given column. For example, in the above dataframe <code>df</code>, I would like to subset on rows with 3 or more unique values (excluding 0). In this case, the resulting dataframe would be</p>\n\n<pre><code>df\n    column1  column2   column3\n0        10       A          1\n1        15       A          1\n2        19       B          1\n</code></pre>\n\n<p>As the rows for values 2 and 3 only had two rows, i.e. 2, 3 only occurred twice in <code>column3</code>. What is the pandas way to do this? </p>\n"}, {"tags": ["python", "python-2.7"], "answers": [{"tags": [], "owner": {"reputation": 304245, "user_id": 216074, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/609c93bafd659500f83fde04802a9be5?s=128&d=identicon&r=PG", "display_name": "poke", "link": "https://stackoverflow.com/users/216074/poke"}, "is_accepted": true, "score": 3, "last_activity_date": 1490820778, "creation_date": 1490820778, "answer_id": 43103962, "question_id": 43103907, "link": "https://stackoverflow.com/questions/43103907/creating-a-superset-of-python-dictionaries/43103962#43103962", "title": "Creating a superset of Python dictionaries", "body": "<p>Just create a new dictionary with those keys and use those dictionaries as the keys\u2019 values:</p>\n\n<pre><code>top_dictionary = {\n   'raw_data1': raw_data1,\n   'raw_data2': raw_data2,\n   'raw_data3': raw_data3\n}\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 7221216, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/47e708705ebea4a9d5295313277e8658?s=128&d=identicon&r=PG&f=1", "display_name": "sg91", "link": "https://stackoverflow.com/users/7221216/sg91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 43103962, "answer_count": 1, "score": 0, "last_activity_date": 1490820778, "creation_date": 1490820636, "question_id": 43103907, "link": "https://stackoverflow.com/questions/43103907/creating-a-superset-of-python-dictionaries", "title": "Creating a superset of Python dictionaries", "body": "<p>I have multiple raw data dictionaries that look like this:</p>\n\n<pre><code>raw_data1 = {'Series_Date':['2017-03-10','2017-03-13','2017-03-14','2017-03-15'],'SP':[35.6,56.7,41,41],'1M':[-7.8,56,56,-3.4],'3M':[24,-31,53,5]}\nraw_data2 = {'Series_Date':['2017-03-10','2017-03-13','2017-03-14','2017-03-15'],'SP':[35.6,56.7,41,41],'1M':[-7.8,56,56,-3.4],'3M':[24,-31,53,5]}\nraw_data3 = {'Series_Date':['2017-03-10','2017-03-13','2017-03-14','2017-03-15'],'SP':[35.6,56.7,41,41],'1M':[-7.8,56,56,-3.4],'3M':[24,-31,53,5]}\n</code></pre>\n\n<p>I would like to combine these in a top level dictionary such that the key for each element is raw_data1/raw_data2/raw_data3 etc. and the value is the individual dictionary itself. Any thoughts how I can create such a dictionary?</p>\n"}, {"tags": ["python", "sql-server", "django", "freetds", "django-pyodbc"], "comments": [{"owner": {"reputation": 3630, "user_id": 594448, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7c81ad5b15d9353a11a0ac96faf0dcba?s=128&d=identicon&r=PG", "display_name": "pmbAustin", "link": "https://stackoverflow.com/users/594448/pmbaustin"}, "edited": false, "score": 1, "creation_date": 1490821687, "post_id": 43103895, "comment_id": 73289937, "body": "SQL Server 2000 is 17 years old, is out of any and all support, and it&#39;s not surprising that fewer and fewer tools, libraries, and applications support it. Update to a more recent version. Even SQL2008 is long in the tooth and support is dropping... SQL2008R2 is probably the oldest reasonable SQL Server to deal with. There are free &quot;community&quot; versions of SQL Server 2016 available."}, {"owner": {"reputation": 33, "user_id": 7178783, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Qd-isL4lnmc/AAAAAAAAAAI/AAAAAAAAAE0/hTGR5coSSvU/photo.jpg?sz=128", "display_name": "Jo&#227;o Victor", "link": "https://stackoverflow.com/users/7178783/jo%c3%a3o-victor"}, "reply_to_user": {"reputation": 3630, "user_id": 594448, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7c81ad5b15d9353a11a0ac96faf0dcba?s=128&d=identicon&r=PG", "display_name": "pmbAustin", "link": "https://stackoverflow.com/users/594448/pmbaustin"}, "edited": false, "score": 0, "creation_date": 1490821822, "post_id": 43103895, "comment_id": 73290010, "body": "Thanks for your reply, but I work on a company that still use this very old database, I will search for another solution and try to upgrade the database."}], "answers": [{"tags": [], "owner": {"reputation": 11187, "user_id": 1394697, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/658ae7ed330d8fc70df1c173960d27ad?s=128&d=identicon&r=PG", "display_name": "FlipperPA", "link": "https://stackoverflow.com/users/1394697/flipperpa"}, "is_accepted": true, "score": 4, "last_activity_date": 1490895940, "creation_date": 1490895940, "answer_id": 43124935, "question_id": 43103895, "link": "https://stackoverflow.com/questions/43103895/django-and-django-pyodbc-error-notimplementederror-sql-server-v8-is-not-supporte/43124935#43124935", "title": "Django and django-pyodbc error NotImplementedError SQL Server v8 is not supported", "body": "<p>As mentioned before, using SQL Server 2000 is a <em>really</em> bad idea; it doesn't receive any support, bug fixes, or most importantly, security patches from Microsoft.</p>\n\n<p>That said, if you're using <code>django-pyodbc-azure</code>, you may be able to monkey patch it to get it working. See this line:</p>\n\n<p><a href=\"https://github.com/michiya/django-pyodbc-azure/blob/azure-1.10/sql_server/pyodbc/base.py#L145\" rel=\"nofollow noreferrer\">https://github.com/michiya/django-pyodbc-azure/blob/azure-1.10/sql_server/pyodbc/base.py#L145</a></p>\n\n<p>Add <code>8: 2000,</code> to the <code>_sql_server_version</code> dictionary:</p>\n\n<pre><code>_sql_server_versions = {\n    8: 2000,\n    9: 2005,\n    10: 2008,\n    11: 2012,\n    12: 2014,\n    13: 2016,\n    14: 2017,\n}\n</code></pre>\n\n<p>I can place no guarantees on how this will or won't work, but you're welcome to try. That should get you past the error you're encountering.</p>\n\n<p>You will also want to modify your <code>freetds.conf</code>, as <code>8.0</code> is not a valid TDS Version:</p>\n\n<pre><code>[HGP]\ndatabase = database\nhost = \"IP\"\nport = 1433\ntds version = 7.1\n</code></pre>\n\n<p>Source: <a href=\"http://www.freetds.org/userguide/choosingtdsprotocol.htm\" rel=\"nofollow noreferrer\">http://www.freetds.org/userguide/choosingtdsprotocol.htm</a></p>\n\n<p>Good luck, and again, I highly recommend upgrading to a modern version of SQL Server.</p>\n"}], "owner": {"reputation": 33, "user_id": 7178783, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Qd-isL4lnmc/AAAAAAAAAAI/AAAAAAAAAE0/hTGR5coSSvU/photo.jpg?sz=128", "display_name": "Jo&#227;o Victor", "link": "https://stackoverflow.com/users/7178783/jo%c3%a3o-victor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2074, "favorite_count": 0, "accepted_answer_id": 43124935, "answer_count": 1, "score": 1, "last_activity_date": 1490895940, "creation_date": 1490820585, "last_edit_date": 1490821071, "question_id": 43103895, "link": "https://stackoverflow.com/questions/43103895/django-and-django-pyodbc-error-notimplementederror-sql-server-v8-is-not-supporte", "title": "Django and django-pyodbc error NotImplementedError SQL Server v8 is not supported", "body": "<p>I'm working with Django and PyODBC to connect to a SQL Server 2000 database and I'm gettinh this error: </p>\n\n<p><strong>Exception Type:</strong> NotImplementedError</p>\n\n<p><strong>Exception Value:</strong> SQL Server v8 is not supported.</p>\n\n<p>My traceback:</p>\n\n<pre><code>Environment:\n\n\nRequest Method: POST\nRequest URL: http://localhost/sistemas/cadastro_paciente/\n\nDjango Version: 1.10.5\nPython Version: 2.7.12\nInstalled Applications:\n['admin_tools',\n 'admin_tools.theming',\n 'admin_tools.menu',\n 'admin_tools.dashboard',\n 'django.contrib.admin',\n 'django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.sessions',\n 'django.contrib.messages',\n 'django.contrib.staticfiles',\n 'cadastro',\n 'fenotipo',\n 'cuser']\nInstalled Middleware:\n['django.middleware.security.SecurityMiddleware',\n 'django.contrib.sessions.middleware.SessionMiddleware',\n 'django.middleware.common.CommonMiddleware',\n 'django.middleware.csrf.CsrfViewMiddleware',\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\n 'cuser.middleware.CuserMiddleware',\n 'django.contrib.messages.middleware.MessageMiddleware',\n 'django.middleware.clickjacking.XFrameOptionsMiddleware']\n\n\n\nTraceback:\n\nFile \"/usr/local/lib/python2.7/dist-packages/django/core/handlers/exception.py\" in inner\n  39.             response = get_response(request)\n\nFile \"/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py\" in _get_response\n  187.                 response = self.process_exception_by_middleware(e, request)\n\nFile \"/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py\" in _get_response\n  185.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)\n\nFile \"/usr/local/lib/python2.7/dist-packages/django/views/decorators/csrf.py\" in wrapped_view\n  58.         return view_func(*args, **kwargs)\n\nFile \"/usr/local/lib/python2.7/dist-packages/django/contrib/auth/decorators.py\" in _wrapped_view\n  23.                 return view_func(request, *args, **kwargs)\n\nFile \"/var/www/sistemas/cadastro/views.py\" in cadastro_paciente\n  1297.             if pacienteDB and pacienteHGP:\n\nFile \"/usr/local/lib/python2.7/dist-packages/django/db/models/query.py\" in __nonzero__\n  264.         return type(self).__bool__(self)\n\nFile \"/usr/local/lib/python2.7/dist-packages/django/db/models/query.py\" in __bool__\n  260.         self._fetch_all()\n\nFile \"/usr/local/lib/python2.7/dist-packages/django/db/models/query.py\" in _fetch_all\n  1087.             self._result_cache = list(self.iterator())\n\nFile \"/usr/local/lib/python2.7/dist-packages/django/db/models/query.py\" in __iter__\n  54.         results = compiler.execute_sql()\n\nFile \"/usr/local/lib/python2.7/dist-packages/django/db/models/sql/compiler.py\" in execute_sql\n  824.             sql, params = self.as_sql()\n\nFile \"/usr/local/lib/python2.7/dist-packages/sql_server/pyodbc/compiler.py\" in as_sql\n  82.             supports_offset_clause = self.connection.sql_server_version &gt;= 2012\n\nFile \"/usr/local/lib/python2.7/dist-packages/django/utils/functional.py\" in __get__\n  35.         res = instance.__dict__[self.name] = self.func(instance)\n\nFile \"/usr/local/lib/python2.7/dist-packages/sql_server/pyodbc/base.py\" in sql_server_version\n  390.         with self.temporary_connection() as cursor:\n\nFile \"/usr/lib/python2.7/contextlib.py\" in __enter__\n  17.             return self.gen.next()\n\nFile \"/usr/local/lib/python2.7/dist-packages/django/db/backends/base/base.py\" in temporary_connection\n  564.         cursor = self.cursor()\n\nFile \"/usr/local/lib/python2.7/dist-packages/django/db/backends/base/base.py\" in cursor\n  231.             cursor = self.make_debug_cursor(self._cursor())\n\nFile \"/usr/local/lib/python2.7/dist-packages/django/db/backends/base/base.py\" in _cursor\n  204.         self.ensure_connection()\n\nFile \"/usr/local/lib/python2.7/dist-packages/django/db/backends/base/base.py\" in ensure_connection\n  199.                 self.connect()\n\nFile \"/usr/local/lib/python2.7/dist-packages/django/db/backends/base/base.py\" in connect\n  173.         self.init_connection_state()\n\nFile \"/usr/local/lib/python2.7/dist-packages/sql_server/pyodbc/base.py\" in init_connection_state\n  349.         if self.sql_server_version &lt; 2008:\n\nFile \"/usr/local/lib/python2.7/dist-packages/django/utils/functional.py\" in __get__\n  35.         res = instance.__dict__[self.name] = self.func(instance)\n\nFile \"/usr/local/lib/python2.7/dist-packages/sql_server/pyodbc/base.py\" in sql_server_version\n  395.                 raise NotImplementedError('SQL Server v%d is not supported.' % ver)\n\nException Type: NotImplementedError at /cadastro_paciente/\nException Value: SQL Server v8 is not supported.\n</code></pre>\n\n<p>My odbc.ini:</p>\n\n<pre><code>[HGP]\nDriver = FREETDS\nServer = \"IP\"\nPort = 1433\nDatabase = database\nDriver = /usr/local/lib/libtdsodbc.so\nUsageCount = 1\n</code></pre>\n\n<p>My freetds.conf</p>\n\n<pre><code>[HGP]\ndatabase = database\nhost = \"IP\"\nport = 1433\ntds version = 8.0\n</code></pre>\n\n<p>Driver configuration on odbcinst.int</p>\n\n<pre><code>[FREETDS]\nDescription = FreeTDS\nDriver = /usr/lib/i386-linux-gnu/odbc/libtdsodbc.so\nSetup = /usr/lib/i386-linux-gnu/odbc/libtdsS.so\nUsageCount = 1\n</code></pre>\n\n<p>The my settings.py</p>\n\n<pre><code>'hgp': {\n        'ENGINE': 'sql_server.pyodbc', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.\n        'NAME': 'hemovida',            # Or path to database file if using sqlite3.\n        'USER': 'sa',                  # Not used with sqlite3.\n        'PASSWORD': '',                # Not used with sqlite3.\n        'HOST': 'IP',         # Set to empty string for localhost. Not used with sqlite3.\n        'PORT': '',\n\n        'OPTIONS': {\n                'driver': 'FREETDS',\n                'MARS_Connection': False,\n                'dsn' : 'HGP',\n            },\n    },\n</code></pre>\n\n<p>My query</p>\n\n<pre><code>pacienteHGP = Paciente_Hemovida.objects.using('hgp').filter(paciente=postPaciente)\n</code></pre>\n"}, {"tags": ["python", "anaconda", "conda"], "comments": [{"owner": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1490835014, "post_id": 43103845, "comment_id": 73294409, "body": "Make sure that you have all the dependencies installed. Although I have no justification for this suspicion, there might be a big with that combination of options if it tries to go look for a missing dependency"}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 4692610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/574014c61adef68e1c09b64b58fca51d?s=128&d=identicon&r=PG&f=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/4692610/eric"}, "edited": false, "score": 0, "creation_date": 1490878625, "post_id": 43107572, "comment_id": 73316198, "body": "Thanks for the suggestion.  I tried that and now I get       &quot;CondaValueError: Value error: invalid package specification&quot;"}, {"owner": {"reputation": 13817, "user_id": 1005215, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33a92149e35c60382fa24bcc2b20722e?s=128&d=identicon&r=PG", "display_name": "Nehal J Wani", "link": "https://stackoverflow.com/users/1005215/nehal-j-wani"}, "reply_to_user": {"reputation": 109, "user_id": 4692610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/574014c61adef68e1c09b64b58fca51d?s=128&d=identicon&r=PG&f=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/4692610/eric"}, "edited": false, "score": 0, "creation_date": 1490878722, "post_id": 43107572, "comment_id": 73316270, "body": "@Eric Share the complete stack trace?"}, {"owner": {"reputation": 111, "user_id": 8084078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0946a651e2cfdb3c25714f92ba893a5?s=128&d=identicon&r=PG&f=1", "display_name": "user5349", "link": "https://stackoverflow.com/users/8084078/user5349"}, "edited": false, "score": 0, "creation_date": 1588416478, "post_id": 43107572, "comment_id": 108889655, "body": "Thank you Nehal J Wani, that was really of great help"}], "tags": [], "owner": {"reputation": 13817, "user_id": 1005215, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33a92149e35c60382fa24bcc2b20722e?s=128&d=identicon&r=PG", "display_name": "Nehal J Wani", "link": "https://stackoverflow.com/users/1005215/nehal-j-wani"}, "is_accepted": false, "score": 2, "last_activity_date": 1490841668, "creation_date": 1490841668, "answer_id": 43107572, "question_id": 43103845, "link": "https://stackoverflow.com/questions/43103845/error-message-when-trying-to-install-package-offline-in-conda/43107572#43107572", "title": "Error message when trying to install package offline in conda", "body": "<p>Replace ...</p>\n\n<pre><code>conda install --offline --use-local --use-index-cache C:\\Program%20Files\\Anaconda3\\pkgs\\pyvisa-1.8-py35_0.tar.bz2\n</code></pre>\n\n<p>... with:</p>\n\n<pre><code>conda install --offline --use-local --use-index-cache \"C:\\Program Files\\Anaconda3\\pkgs\\pyvisa-1.8-py35_0.tar.bz2\"\n</code></pre>\n\n<p>Basically, don't URI encode the absolute path.</p>\n"}], "owner": {"reputation": 109, "user_id": 4692610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/574014c61adef68e1c09b64b58fca51d?s=128&d=identicon&r=PG&f=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/4692610/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4201, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1490882645, "creation_date": 1490820424, "last_edit_date": 1490882645, "question_id": 43103845, "link": "https://stackoverflow.com/questions/43103845/error-message-when-trying-to-install-package-offline-in-conda", "title": "Error message when trying to install package offline in conda", "body": "<p>I have a laptop that can't connect to the internet that I have a working version of Anaconda 3 version 4.2 on.  I also want to install the <a href=\"https://anaconda.org/conda-forge/pyvisa/files\" rel=\"nofollow noreferrer\">PyVISA package</a>.</p>\n\n<p>I downloaded the tar.bz2 file and copied it to the Anaconda3/pkgs folder.  I navigate to the directory and use the command:</p>\n\n<pre><code>C:\\Program Files\\Anaconda3\\pkgs&gt;conda install --offline --use-local --use-index-cache pyvisa-1.8-py35_0.tar.bz2\n</code></pre>\n\n<p>And the response I get is:</p>\n\n<pre><code>Extracting packages ...\nAn unexpected error has occurred.                                     |   0%\nPlease consider posting the following information to the\nconda GitHub issue tracker at:\n\nhttps://github.com/conda/conda/issues\n\n\n\nCurrent conda install:\n\n           platform : win-32\n      conda version : 4.2.9\n   conda is private : False\n  conda-env version : 4.2.9\nconda-build version : 2.0.2\n     python version : 3.5.2.final.0\n   requests version : 2.11.1\n   root environment : C:\\Program Files\\Anaconda3  (read only)\ndefault environment : C:\\Program Files\\Anaconda3\n   envs directories : C:\\Users\\Name\\.conda\\envs\n                      C:\\Program Files\\Anaconda3\\envs\n      package cache : C:\\Users\\Name\\.conda\\envs\\.pkgs\n                      C:\\Program Files\\Anaconda3\\pkgs\n       channel URLs : https://repo.continuum.io/pkgs/free/win-32/  (offline)\n\n                      https://repo.continuum.io/pkgs/free/noarch/  (offline)\n\n                      https://repo.continuum.io/pkgs/pro/win-32/  (offline)\n                      https://repo.continuum.io/pkgs/pro/noarch/  (offline)\n                      https://repo.continuum.io/pkgs/msys2/win-32/  (offline)\n                      https://repo.continuum.io/pkgs/msys2/noarch/  (offline)\n        config file : None\n       offline mode : True\n\n`$ C:\\Program Files\\Anaconda3\\Scripts\\conda-script.py install --offline --use-local --use-index-cache pyvisa-1.8-py35_0.tar.bz2`\n\nTraceback (most recent call last):\n  File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\exceptions.py\", l\nine 473, in conda_exception_handler\n    return_value = func(*args, **kwargs)\n  File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\cli\\main.py\", lin\ne 144, in _main\n    exit_code = args.func(args, p)\n  File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\cli\\main_install.\npy\", line 80, in execute\n    install(args, parser, 'install')\n  File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\cli\\install.py\",\nline 209, in install\n    explicit(args.packages, prefix, verbose=not context.quiet)\n  File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\misc.py\", line 18\n7, in explicit\n    execute_actions(actions, index=index, verbose=verbose)\n  File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\plan.py\", line 64\n3, in execute_actions\n    inst.execute_instructions(plan, index, verbose)\n  File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\instructions.py\",\nline 134, in execute_instructions\n    cmd(state, arg)\n  File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\instructions.py\",\nline 58, in EXTRACT_CMD\n    extract(arg)\n  File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\install.py\", line\n792, in extract\n    url = rec['urls'][0]\nIndexError: list index out of range\n</code></pre>\n\n<p>From \"list index out of range\" I figured that it might not be finding the file, so I used the full path for it:</p>\n\n<pre><code>C:\\Program Files\\Anaconda3\\pkgs&gt;conda install --offline --use-local --use-index-cache C:\\Program%20Files\\Anaconda3\\pkgs\\pyvisa-1.8-py35_0.tar.bz2\n</code></pre>\n\n<p>The response I get is:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\exceptions.py\", line\n473, in conda_exception_handler\nreturn_value = func(*args, **kwargs)\nFile \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\cli\\main.py\", line 14\n4, in _main\nexit_code = args.func(args, p)\nFile \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\cli\\main_install.py\",\nline 80, in execute\ninstall(args, parser, 'install')\nFile \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\cli\\install.py\", line\n209, in install\nexplicit(args.packages, prefix, verbose=not context.quiet)\nFile \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\misc.py\", line 70, in\nexplicit\nraise CondaFileNotFoundError(join(url_p, fn))\nconda.exceptions.CondaFileNotFoundError: &lt;exception str() failed&gt;\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\nFile \"C:\\Program Files\\Anaconda3\\Scripts\\conda-script.py\", line 5, in &lt;module&gt;\n\nsys.exit(conda.cli.main())\nFile \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\cli\\main.py\", line 15\n0, in main\nreturn conda_exception_handler(_main)\nFile \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\exceptions.py\", line\n487, in conda_exception_handler\nprint_conda_exception(e)\nFile \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\exceptions.py\", line\n393, in print_conda_exception\nstderrlogger.info(repr(exception))\nFile \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\__init__.py\", line 42\n, in __repr__\nreturn '%s: %s\\n' % (self.__class__.__name__, text_type(self))\nFile \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\__init__.py\", line 45\n, in __str__\nreturn text_type(self.message % self._kwargs)\nTypeError: a float is required\n</code></pre>\n\n<p>What's going on here?  Is there a way to install this package offline?</p>\n\n<p>UPDATE 1:</p>\n\n<p>Following the advice below I tried</p>\n\n<pre><code>C:\\Program Files\\Anaconda3\\pkgs&gt;conda install --offline --use-local --use-index-cache --debug \"C:\\Program Files\\Anaconda3\\pkgs\\pyvisa-1.8-py35_0.tar.bz2\"\n</code></pre>\n\n<p>And now I'm getting:</p>\n\n<pre><code>CondaValueError: Value error: invalid package specification\n</code></pre>\n\n<p>as a default error message, and if I use debug, it's the following:</p>\n\n<pre><code>DEBUG conda.models.channel:__init__(140): making channel object for url:https://repo.continuum.io/pkgs/free/win-32/alabaster-0.7.9-py35_0.tar.bz2\nDEBUG conda.common.url:path_to_url(26): C:\\Users\\Name\\conda-bld converted to file:///C:/Users/Name/conda-bld\nDEBUG conda.models.channel:__init__(140): making channel object for url:file:///C:/Users/Name/conda-bld\nDEBUG conda.models.channel:__init__(140): making channel object for url:https://repo.continuum.io/pkgs/free\nDEBUG conda.models.channel:__init__(140): making channel object for url: https://repo.continuum.io/pkgs/pro\nDEBUG conda.models.channel:__init__(140): making channel object for url: https://repo.continuum.io/pkgs/msys2\nDEBUG conda.models.channel:__init__(140): making channel object for url: https://repo.continuum.io/pkgs/free/win-32/anaconda-4.2.0-np111py35_0.tar.bz2\nDEBUG conda.models.channel:__init__(140): making channel object for url: https://repo.continuum.io/pkgs/free/win-32/anaconda-clean-1.0.0-py35_0.tar.bz2\nDEBUG conda.models.channel:__init__(140): making channel object for url: https://repo.continuum.io/pkgs/free/win-32/anaconda-client-1.5.1-py35_0.tar.bz2\nDEBUG conda.models.channel:__init__(140): making channel object for url: https://repo.continuum.io/pkgs/free/win-32/anaconda-navigator-1.3.1-py35_0.tar.bz2\nDEBUG conda.models.channel:__init__(140): making channel object for url: https://repo.continuum.io/pkgs/free/win-32/argcomplete-1.0.0-py35_1.tar.bz2\nDEBUG conda.models.channel:__init__(140): making channel object for url: https://repo.continuum.io/pkgs/free/win-32/astroid-1.4.7-py35_0.tar.bz2\nDEBUG conda.models.channel:__init__(140): making channel object for url: https://repo.continuum.io/pkgs/free/win-32/astropy-1.2.1-np111py35_0.tar.bz2\n</code></pre>\n\n<p>And so on for what looks like all my packages, followed by</p>\n\n<pre><code>An unexpected error has occurred.\nPlease consider posting the following information to the\nconda GitHub issue tracker at:\n\nhttps://github.com/conda/conda/issues\n\nINFO conda.common.io:captured(27): overtaking stderr and stdout\nDEBUG conda.models.channel:__init__(161): making channel object for named channel: defaults\nINFO conda.common.io:captured(33): stderr and stdout yielded back\nCurrent conda install:\n\n           platform : win-32\n      conda version : 4.2.9\n   conda is private : False\n  conda-env version : 4.2.9\nconda-build version : 2.0.2\n     python version : 3.5.2.final.0\n   requests version : 2.11.1\n   root environment : C:\\Program Files\\Anaconda3  (read only)\ndefault environment : C:\\Program Files\\Anaconda3\n   envs directories : C:\\Users\\Name\\.conda\\envs\n                      C:\\Program Files\\Anaconda3\\envs\n      package cache : C:\\Users\\Name\\.conda\\envs\\.pkgs\n                      C:\\Program Files\\Anaconda3\\pkgs\n       channel URLs : https://repo.continuum.io/pkgs/free/win-32/  (offline)\n\n                      https://repo.continuum.io/pkgs/free/noarch/  (offline)\n\n                      https://repo.continuum.io/pkgs/pro/win-32/  (offline)\n                      https://repo.continuum.io/pkgs/pro/noarch/  (offline)\n                      https://repo.continuum.io/pkgs/msys2/win-32/  (offline)\n                      https://repo.continuum.io/pkgs/msys2/noarch/  (offline)\n        config file : None\n       offline mode : True\n\n\n\n`$ C:\\Program Files\\Anaconda3\\Scripts\\conda-script.py install --offline --use-local --use-index-cache --debug C:\\Program Files\\Anaconda3\\pkgs\\pyvisa-1.8-py35_0.tar.bz2`\n\n\n\n\nTraceback (most recent call last):\nFile \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\cli\\common.py\", line 466, in arg2spec\n    spec = MatchSpec(spec_from_line(arg), normalize=True)\n  File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\resolve.py\", line 43, in __new__\n    spec, _, oparts = spec.partition('(')\nAttributeError: 'NoneType' object has no attribute 'partition'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\exceptions.py\", line 473, in conda_exception_handler\n    return_value = func(*args, **kwargs)\n  File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\cli\\main.py\", line 144, in _main\n    exit_code = args.func(args, p)\n  File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\cli\\main_install.py\", line 80, in execute\n    install(args, parser, 'install')\n  File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\cli\\install.py\",line 198, in install\n    specs.extend(common.specs_from_args(args.packages, json=context.json))\n  File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\cli\\common.py\", line 483, in specs_from_args\n    return [arg2spec(arg, json=json) for arg in args]\n  File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\cli\\common.py\", line 483, in &lt;listcomp&gt;\n    return [arg2spec(arg, json=json) for arg in args]\n  File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\conda\\cli\\common.py\", line 468, in arg2spec\n    raise CondaValueError('invalid package specification: %s' % arg)\nconda.exceptions.CondaValueError: Value error: invalid package specification\n: C:\\Program Files\\Anaconda3\\pkgs\\pyvisa-1.8-py35_0.tar.bz2\n</code></pre>\n"}, {"tags": ["python", "numpy", "covariance"], "comments": [{"owner": {"reputation": 952, "user_id": 5505161, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c62b36b7d0f6241b61ef9e9a671240a5?s=128&d=identicon&r=PG&f=1", "display_name": "lordingtar", "link": "https://stackoverflow.com/users/5505161/lordingtar"}, "edited": false, "score": 0, "creation_date": 1490820597, "post_id": 43103811, "comment_id": 73289355, "body": "Can you share your input matrices if possible?"}, {"owner": {"reputation": 1645, "user_id": 4792229, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/SRv9x.jpg?s=128&g=1", "display_name": "Hakaishin", "link": "https://stackoverflow.com/users/4792229/hakaishin"}, "reply_to_user": {"reputation": 952, "user_id": 5505161, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c62b36b7d0f6241b61ef9e9a671240a5?s=128&d=identicon&r=PG&f=1", "display_name": "lordingtar", "link": "https://stackoverflow.com/users/5505161/lordingtar"}, "edited": false, "score": 0, "creation_date": 1490822259, "post_id": 43103811, "comment_id": 73290232, "body": "Not sure if useful... It&#39;s a 38*4080 matrix."}], "answers": [{"comments": [{"owner": {"reputation": 1645, "user_id": 4792229, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/SRv9x.jpg?s=128&g=1", "display_name": "Hakaishin", "link": "https://stackoverflow.com/users/4792229/hakaishin"}, "edited": false, "score": 0, "creation_date": 1490822300, "post_id": 43104094, "comment_id": 73290260, "body": "Leaving the tranpose away it is still completely off. Is the formula I am using wrong?"}, {"owner": {"reputation": 11683, "user_id": 163633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764323a14e554c97ab74177e0bce51d4?s=128&d=identicon&r=PG", "display_name": "Robert Kern", "link": "https://stackoverflow.com/users/163633/robert-kern"}, "edited": false, "score": 0, "creation_date": 1490823463, "post_id": 43104094, "comment_id": 73290816, "body": "Please update your post with the results using <code>np.cov(X_zero_mean)</code>. Then we might be able to help answer this question."}], "tags": [], "owner": {"reputation": 10963, "user_id": 306257, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/701752cfc3dd805d412884f38a464296?s=128&d=identicon&r=PG", "display_name": "Haldean Brown", "link": "https://stackoverflow.com/users/306257/haldean-brown"}, "is_accepted": true, "score": 1, "last_activity_date": 1490821252, "creation_date": 1490821252, "answer_id": 43104094, "question_id": 43103811, "link": "https://stackoverflow.com/questions/43103811/why-is-numpys-covariance-totally-different-then-mine/43104094#43104094", "title": "Why is numpys covariance totally different then mine?", "body": "<p>Without your exact matrices it's difficult to tell, but I would guess that it's because you're taking the transpose of the matrix before passing it to <code>np.cov</code>. That would also explain why numpy's result looks like it's of much higher dimension than yours. <code>np.cov(X.T)</code> is equivalent to <code>np.dot(X.T, X)</code>, not <code>np.dot(X, X.T)</code>.</p>\n"}], "owner": {"reputation": 1645, "user_id": 4792229, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/SRv9x.jpg?s=128&g=1", "display_name": "Hakaishin", "link": "https://stackoverflow.com/users/4792229/hakaishin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 581, "favorite_count": 0, "accepted_answer_id": 43104094, "answer_count": 1, "score": 0, "last_activity_date": 1490821252, "creation_date": 1490820296, "question_id": 43103811, "link": "https://stackoverflow.com/questions/43103811/why-is-numpys-covariance-totally-different-then-mine", "title": "Why is numpys covariance totally different then mine?", "body": "<p>I calculate my covariance with following formula:</p>\n\n<pre><code>np.dot(X_zero_mean, X_zero_mean.T) / (X_zero_mean.shape[0] -1)\n</code></pre>\n\n<p>and compare it to </p>\n\n<pre><code>np.cov(X_zero_mean.T)\n</code></pre>\n\n<p>I both print the resulting matrices to console and create a figure out of them, but they are not the same. Why? Could it be that cov avoids some numerical error, that is happening with my above formula?\nFirst one is my covariance, second one is the numpy cov:\n<a href=\"https://i.stack.imgur.com/ZIGdT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZIGdT.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "session", "tensorflow", "distributed", "grpc"], "answers": [{"comments": [{"owner": {"reputation": 1010, "user_id": 4480756, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1515949422/picture?type=large", "display_name": "Ruofan Kong", "link": "https://stackoverflow.com/users/4480756/ruofan-kong"}, "edited": false, "score": 0, "creation_date": 1490890811, "post_id": 43120699, "comment_id": 73325665, "body": "Thanks for your answer! But still seems not clear to me. Basically, I imagine <code>MonitoredTrainingSession</code> appears in client side as it creates and starts a tf session. As I&#39;m using grpc with &quot;Between-graph Replication&quot;, and each client is a separate process for worker, I wonder how worker and client code look like (I imagine worker creates server object. But as <code>MonitoredTrainingSession</code> appears in client process which uses that obj, does it mean I need create another same server obj in client?) Also, how does <code>tf.train.MonitoredTrainingSession</code> tell if the session is running with grpc or not?"}], "tags": [], "owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "is_accepted": false, "score": 2, "last_activity_date": 1490883889, "creation_date": 1490883889, "answer_id": 43120699, "question_id": 43103763, "link": "https://stackoverflow.com/questions/43103763/does-tf-train-monitoredtrainingsession-support-grpc/43120699#43120699", "title": "Does tf.train.MonitoredTrainingSession() support GRPC?", "body": "<p>Yes, <a href=\"https://www.tensorflow.org/api_docs/python/tf/train/MonitoredTrainingSession\" rel=\"nofollow noreferrer\"><code>tf.train.MonitoredTrainingSession</code></a> can use gRPC. However, you must create the <a href=\"https://www.tensorflow.org/api_docs/python/tf/train/Server\" rel=\"nofollow noreferrer\"><code>tf.train.Server</code></a> object manually (typically one per process), as shown in the <a href=\"https://www.tensorflow.org/deploy/distributed\" rel=\"nofollow noreferrer\">Distributed TensorFlow tutorial</a>.</p>\n\n<p>Once you have created a <code>tf.train.Server</code>, the most common way to configure a <code>tf.train.MonitoredTrainingSession</code> for distributed training is to call <code>tf.train.MonitoredTrainingSession(master=server.target)</code>, where <code>server</code> is one of the servers in the <code>\"worker\"</code> job.</p>\n"}], "owner": {"reputation": 1010, "user_id": 4480756, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1515949422/picture?type=large", "display_name": "Ruofan Kong", "link": "https://stackoverflow.com/users/4480756/ruofan-kong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490883889, "creation_date": 1490820161, "last_edit_date": 1490825776, "question_id": 43103763, "link": "https://stackoverflow.com/questions/43103763/does-tf-train-monitoredtrainingsession-support-grpc", "title": "Does tf.train.MonitoredTrainingSession() support GRPC?", "body": "<p>We need to define multiple clients (each creates and builds Tensorflow Session/graph) using \"Between-graph Replication\" in Distributed Tensorflow. Typically, the client and worker are in the same process, and <code>tf.train.MonitoredTrainingSession()</code> coordinates those Tensorflow Sessions.</p>\n\n<p>Now if each client and worker is not in the same process, and I want client to use grpc to remotely drive worker tasks, I wonder if <code>tf.train.MonitoredTrainingSession()</code> or some APIs support this feature, or if anyone has any other solutions or ideas. (I know <code>tf.Session(&lt;grpc_url&gt;)</code> supports grpc, but it does not coordinate multiple Tensorflow Sessions) </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 203268, "user_id": 206403, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/vfBUe.jpg?s=128&g=1", "display_name": "Rocket Hazmat", "link": "https://stackoverflow.com/users/206403/rocket-hazmat"}, "edited": false, "score": 1, "creation_date": 1490820079, "post_id": 43103715, "comment_id": 73289079, "body": "I assume this is some sort of learning exercise, since I would probably just use a regex for this."}, {"owner": {"reputation": 767, "user_id": 4044442, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/85762c20846d6c4a3d1557ef28c2334b?s=128&d=identicon&r=PG", "display_name": "Jenner Felton", "link": "https://stackoverflow.com/users/4044442/jenner-felton"}, "edited": false, "score": 2, "creation_date": 1490820168, "post_id": 43103715, "comment_id": 73289139, "body": "You are updating <code>i</code> before you set what <code>lasti</code> is."}], "answers": [{"comments": [{"owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "edited": false, "score": 2, "creation_date": 1490820452, "post_id": 43103791, "comment_id": 73289286, "body": "FWIW: The bug is that when you set <code>i=&quot;&quot;</code>, you are later setting <code>lasti = i</code>. Which means that lasti is no longer a space, and therefore the next time a space appears, your test condition is not met. Putting the <code>else</code> in separates the two paths, and leaves <code>lasti</code> set to space when a space is ignored."}, {"owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "edited": false, "score": 0, "creation_date": 1490820944, "post_id": 43103791, "comment_id": 73289547, "body": "@RaminNietzsche I was explaining why your code works, where the original code doesn&#39;t."}], "tags": [], "owner": {"reputation": 2421, "user_id": 3131945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f6e15fc2962ebaadf97880c965157bb?s=128&d=identicon&r=PG", "display_name": "RaminNietzsche", "link": "https://stackoverflow.com/users/3131945/raminnietzsche"}, "is_accepted": true, "score": 4, "last_activity_date": 1490820241, "creation_date": 1490820241, "answer_id": 43103791, "question_id": 43103715, "link": "https://stackoverflow.com/questions/43103715/python-remove-white-space-using-only-loops/43103791#43103791", "title": "Python - Remove white space using only loops", "body": "<p>Change your code to this:</p>\n\n<pre><code>    for i in S:\n        if lasti == \" \" and i == \" \":\n            i = \"\"\n        else:\n            lasti = i    \n        result += i    \n\n    print(result)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 203268, "user_id": 206403, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/vfBUe.jpg?s=128&g=1", "display_name": "Rocket Hazmat", "link": "https://stackoverflow.com/users/206403/rocket-hazmat"}, "edited": false, "score": 0, "creation_date": 1490820379, "post_id": 43103792, "comment_id": 73289255, "body": "Wouldn&#39;t it compare the <i>last</i> character at the 1st iteration since <code>S[-1]</code> gives you the last character?"}, {"owner": {"reputation": 18509, "user_id": 363262, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/3ekjR.png?s=128&g=1", "display_name": "Juan Cort&#233;s", "link": "https://stackoverflow.com/users/363262/juan-cort%c3%a9s"}, "reply_to_user": {"reputation": 203268, "user_id": 206403, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/vfBUe.jpg?s=128&g=1", "display_name": "Rocket Hazmat", "link": "https://stackoverflow.com/users/206403/rocket-hazmat"}, "edited": false, "score": 0, "creation_date": 1490820453, "post_id": 43103792, "comment_id": 73289287, "body": "You&#39;re right, range needs to start on 1, not 0, actually changed that for no reason"}], "tags": [], "owner": {"reputation": 18509, "user_id": 363262, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/3ekjR.png?s=128&g=1", "display_name": "Juan Cort&#233;s", "link": "https://stackoverflow.com/users/363262/juan-cort%c3%a9s"}, "is_accepted": false, "score": 1, "last_activity_date": 1490820432, "last_edit_date": 1490820432, "creation_date": 1490820247, "answer_id": 43103792, "question_id": 43103715, "link": "https://stackoverflow.com/questions/43103715/python-remove-white-space-using-only-loops/43103792#43103792", "title": "Python - Remove white space using only loops", "body": "<p>Check that the current character and the next one are spaces, and if <strong>not</strong>, add them to a clean string. There really is no need for an <code>and</code> in this case, since we are comparing to the same value</p>\n\n<pre><code>def cleanWhiteSpaces(str):\n  clean = \"\"\n  for i in range(len(str)):\n    if not str[i]==\" \"==str[i-1]:\n      clean += str[i]\n  return clean\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1490820556, "last_edit_date": 1490820556, "creation_date": 1490820273, "answer_id": 43103802, "question_id": 43103715, "link": "https://stackoverflow.com/questions/43103715/python-remove-white-space-using-only-loops/43103802#43103802", "title": "Python - Remove white space using only loops", "body": "<p>Uses the end of <code>result</code> in place of <code>lasti</code>:</p>\n\n<pre><code>def cleanupstring(S):\n    result = S[0]\n\n    for i in S[1:]:\n        if not (result[-1] == \" \" and i == \" \"):\n            result += i\n\n    print(result)\n\n\ncleanupstring(\"Hello      my name    is    joe\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 145, "user_id": 9114275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dc0a166bffc87954b723ab88da00ccd?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak", "link": "https://stackoverflow.com/users/9114275/deepak"}, "is_accepted": false, "score": -1, "last_activity_date": 1579718796, "creation_date": 1579718796, "answer_id": 59866382, "question_id": 43103715, "link": "https://stackoverflow.com/questions/43103715/python-remove-white-space-using-only-loops/59866382#59866382", "title": "Python - Remove white space using only loops", "body": "<h2>Just try this</h2>\n\n<p>t = \"Hello      my name    is    joe\"</p>\n\n<p>\" \".join(t.split())</p>\n\n<h1>this will output</h1>\n\n<p>\"Hello my name is joe\"</p>\n"}], "owner": {"reputation": 385, "user_id": 7628114, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10210617726231700/picture?type=large", "display_name": "Dylan Grove", "link": "https://stackoverflow.com/users/7628114/dylan-grove"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1798, "favorite_count": 1, "accepted_answer_id": 43103791, "answer_count": 4, "score": 1, "last_activity_date": 1579718796, "creation_date": 1490819984, "last_edit_date": 1490832473, "question_id": 43103715, "link": "https://stackoverflow.com/questions/43103715/python-remove-white-space-using-only-loops", "title": "Python - Remove white space using only loops", "body": "<p>I want to remove extra spaces in a string using only <code>for/while</code> loops, and <code>if</code> statements; NO split/replace/join.    </p>\n\n<p>like this:</p>\n\n<pre><code>mystring = 'Here is  some   text   I      wrote   '\n\nwhile '  ' in mystring:\n    mystring = mystring.replace('  ', ' ')\n\nprint(mystring)\n</code></pre>\n\n<p><strong>output:</strong> </p>\n\n<pre><code>Here is some text I wrote\n</code></pre>\n\n<p>Here's what I tried.  Unfortunately, it doesn't quite work.</p>\n\n<pre><code>def cleanupstring(S):\n    lasti = \"\"\n    result = \"\"\n\n    for i in S:\n        if lasti == \" \" and i == \" \":\n            i = \"\"\n\n        lasti = i    \n        result += i    \n\n    print(result)\n\n\ncleanupstring(\"Hello      my name    is    joe\")\n</code></pre>\n\n<p><strong>output:</strong> </p>\n\n<pre><code>Hello   my name  is  joe\n</code></pre>\n\n<p>My attempt doesn't remove all the extra spaces.</p>\n"}, {"tags": ["python", "file", "url", "path"], "comments": [{"owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1490820033, "post_id": 43103640, "comment_id": 73289049, "body": "Do any of the suggestions <a href=\"http://stackoverflow.com/questions/11687478/convert-a-filename-to-a-file-url\">here</a> help out?"}, {"owner": {"reputation": 239, "user_id": 5021901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9736d8c3c70f4632f21c154587df80f9?s=128&d=identicon&r=PG&f=1", "display_name": "MrZcxfph", "link": "https://stackoverflow.com/users/5021901/mrzcxfph"}, "reply_to_user": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1490820869, "post_id": 43103640, "comment_id": 73289503, "body": "No. I have no problem building platform dependent file:/// URLs.  The problem is opening a file using a path taken from a file:/// URL."}, {"owner": {"reputation": 140, "user_id": 1097921, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5600197a595bd1101cfcebcdd78d602d?s=128&d=identicon&r=PG", "display_name": "Jeff Young", "link": "https://stackoverflow.com/users/1097921/jeff-young"}, "edited": false, "score": 0, "creation_date": 1615402252, "post_id": 43103640, "comment_id": 117682146, "body": "Ah ha! Three slashes before Windows path! Tricky - thanks for this map!"}], "answers": [{"tags": [], "owner": {"reputation": 239, "user_id": 5021901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9736d8c3c70f4632f21c154587df80f9?s=128&d=identicon&r=PG&f=1", "display_name": "MrZcxfph", "link": "https://stackoverflow.com/users/5021901/mrzcxfph"}, "is_accepted": false, "score": 3, "last_activity_date": 1491319358, "creation_date": 1491319358, "answer_id": 43211374, "question_id": 43103640, "link": "https://stackoverflow.com/questions/43103640/in-python-3-how-do-i-convert-a-file-url-to-an-os-path-with-code-that-works-i/43211374#43211374", "title": "In Python 3, how do I convert a file:// URL to an OS path with code that works in both Linux and Windows?", "body": "<p>Well, this is my answer.  It appears to work for my scenarios, but I am not sure what will happen if a Linux user creates a folder named /C: (or any other name that looks like a Windows drive letter).</p>\n\n<pre><code>import os\nimport pathlib\nimport sys\nimport urllib.parse\n\nprint (\"sys.argv[0]      = {0}\".format(sys.argv[0]))\n\nvarFilename = sys.argv[0]\nvarFilename = os.path.abspath(varFilename)\nprint (\"abs varFilename  = {0}\".format(varFilename))\n\nvarMainFolder = os.path.dirname(varFilename)\nprint (\"varMainFolder    = {0}\".format(varMainFolder))\n\nvarTarget = os.path.join(varMainFolder,\"test test.py\")\nprint (\"varTarget        = {0}\".format(varTarget))\n\nvarURL = pathlib.Path(varTarget).as_uri()\nprint (\"varURL           = {0}\".format(varURL))\n\nvarPathRaw = urllib.parse.urlparse(varURL).path\nprint (\"varPathRaw       = {0}\".format(varPathRaw))\n\nvarPathDecode = urllib.parse.unquote(varPathRaw)\nprint (\"varPathDecode    = {0}\".format(varPathDecode))\n\nvarOSPath = os.path.normpath(varPathDecode)\nprint (\"varOSPath        = {0}\".format(varOSPath))\n\nvarFixedPath = varOSPath\nvarDrive = os.path.splitdrive(varFixedPath[1:])[0]\nprint (\"varDrive         = {0}\".format(varDrive))\nif varDrive:\n    varFixedPath = varFixedPath[1:]\nprint (\"varFixedPath     = {0}\".format(varFixedPath))\n</code></pre>\n\n<p>The trick is to use os.path.splitdrive() on the absolute path after removing the first character.  For a Windows absolute path, it will return the drive specification.  For a Linux absolute path, it will return an empty string.  If the drive specification is an empty string, use the absolute path as is.  If the drive specification is <strong>not</strong> an empty string, remove the first character from the absolute path and use the result.</p>\n\n<p>I still believe that the os.path.normpath() method should not return an absolute Windows path with a leading backslash.</p>\n"}], "owner": {"reputation": 239, "user_id": 5021901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9736d8c3c70f4632f21c154587df80f9?s=128&d=identicon&r=PG&f=1", "display_name": "MrZcxfph", "link": "https://stackoverflow.com/users/5021901/mrzcxfph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1849, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1491319358, "creation_date": 1490819703, "last_edit_date": 1490819954, "question_id": 43103640, "link": "https://stackoverflow.com/questions/43103640/in-python-3-how-do-i-convert-a-file-url-to-an-os-path-with-code-that-works-i", "title": "In Python 3, how do I convert a file:// URL to an OS path with code that works in both Linux and Windows?", "body": "<p>Here is code that demonstrates the problem when converting a file:// URL to an OS path.</p>\n\n<pre><code>import os\nimport pathlib\nimport sys\nimport urllib.parse\n\nprint (\"sys.argv[0]      = {0}\".format(sys.argv[0]))\n\nvarFilename = sys.argv[0]\nvarFilename = os.path.abspath(varFilename)\nprint (\"abs varFilename  = {0}\".format(varFilename))\n\nvarMainFolder = os.path.dirname(varFilename)\nprint (\"varMainFolder    = {0}\".format(varMainFolder))\n\nvarTarget = os.path.join(varMainFolder,\"test test.py\")\nprint (\"varTarget        = {0}\".format(varTarget))\n\nvarURL = pathlib.Path(varTarget).as_uri()\nprint (\"varURL           = {0}\".format(varURL))\n\nvarPathRaw = urllib.parse.urlparse(varURL).path\nprint (\"varPathRaw       = {0}\".format(varPathRaw))\n\nvarPathDecode = urllib.parse.unquote(varPathRaw)\nprint (\"varPathDecode    = {0}\".format(varPathDecode))\n\nvarOSPath = os.path.normpath(varPathDecode)\nprint (\"varOSPath        = {0}\".format(varOSPath))\n</code></pre>\n\n<p>In Linux, this code prints:</p>\n\n<pre><code>sys.argv[0]      = test.py\nabs varFilename  = /home/ldbader/test.py\nvarMainFolder    = /home/ldbader\nvarTarget        = /home/ldbader/test test.py\nvarURL           = file:///home/ldbader/test%20test.py\nvarPathRaw       = /home/ldbader/test%20test.py\nvarPathDecode    = /home/ldbader/test test.py\nvarOSPath        = /home/ldbader/test test.py\n</code></pre>\n\n<p>Notice the varOSPath is a perfectly valid absolute path.  But in Windows, the code prints:</p>\n\n<pre><code>sys.argv[0]      = test.py\nabs varFilename  = C:\\mli\\Junk\\test.py\nvarMainFolder    = C:\\mli\\Junk\nvarTarget        = C:\\mli\\Junk\\test test.py\nvarURL           = file:///C:/mli/Junk/test%20test.py\nvarPathRaw       = /C:/mli/Junk/test%20test.py\nvarPathDecode    = /C:/mli/Junk/test test.py\nvarOSPath        = \\C:\\mli\\Junk\\test test.py\n</code></pre>\n\n<p>Notice that varOSPath has an absolute path preceded by an invalid backslash. Attempting to open a file with this path will fail.  I would have expected os.path.normpath() to discard a slash to the left of a drive specification, but it doesn't.  </p>\n\n<p>What should I do so the same logic gives me a valid absolute path on both platforms?</p>\n"}, {"tags": ["python", "list", "printing", "quotes", "single-quotes"], "comments": [{"owner": {"reputation": 5932, "user_id": 3541205, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6d36383f353f79d903e2e0946b73e8f7?s=128&d=identicon&r=PG", "display_name": "aks", "link": "https://stackoverflow.com/users/3541205/aks"}, "edited": false, "score": 1, "creation_date": 1490819719, "post_id": 43103629, "comment_id": 73288870, "body": "can you show the source?"}, {"owner": {"reputation": 1, "user_id": 7103700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caf4d589cd264539ef945115a7871232?s=128&d=identicon&r=PG&f=1", "display_name": "Ioanna Vikatou", "link": "https://stackoverflow.com/users/7103700/ioanna-vikatou"}, "reply_to_user": {"reputation": 5932, "user_id": 3541205, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6d36383f353f79d903e2e0946b73e8f7?s=128&d=identicon&r=PG", "display_name": "aks", "link": "https://stackoverflow.com/users/3541205/aks"}, "edited": false, "score": 0, "creation_date": 1490820112, "post_id": 43103629, "comment_id": 73289101, "body": "@aks for m in matches:     for day in days:         if (m[0],m[1]) in day:             print((m[0],m[1]), days.index(day)) I don&#39;t know if this helps"}], "answers": [{"tags": [], "owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "is_accepted": true, "score": 0, "last_activity_date": 1490820022, "creation_date": 1490820022, "answer_id": 43103727, "question_id": 43103629, "link": "https://stackoverflow.com/questions/43103629/python-prints-single-quotes/43103727#43103727", "title": "Python prints single quotes", "body": "<p>It looks like you have built a bunch of <em>tuples:</em></p>\n\n<pre><code>team1 = 'a'\nteam2 = 'b'\ntpl = (team1, team2)\n</code></pre>\n\n<p>And then printed them:</p>\n\n<pre><code>print(tpl)\n</code></pre>\n\n<p>The problem is that you're getting Python's default printout behavior for the tuples. There are a bunch of alternatives for you - defining a class, and then overriding the <code>__str__</code> method, for example - but what you probably want to do, in order to get things working, is just set up a more complex print command:</p>\n\n<pre><code>print(\"{} vs. {}\".format(tpl[0], tpl[1]))\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>print(tpl[0], \"vs.\", tpl[1])\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7103700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caf4d589cd264539ef945115a7871232?s=128&d=identicon&r=PG&f=1", "display_name": "Ioanna Vikatou", "link": "https://stackoverflow.com/users/7103700/ioanna-vikatou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 43103727, "answer_count": 1, "score": 0, "last_activity_date": 1490823046, "creation_date": 1490819655, "last_edit_date": 1490823046, "question_id": 43103629, "link": "https://stackoverflow.com/questions/43103629/python-prints-single-quotes", "title": "Python prints single quotes", "body": "<p>I have a Python project for uni which I've completed and works fine BUT it keeps printing single quotes like this: </p>\n\n<pre><code>('a', 'b') 0\n('a', 'c') 1\n('b', 'c') 2\n('c', 'd') 0\n('d', 'e') 1\n('e', 'c') 3\n</code></pre>\n\n<p>How do I remove them? </p>\n\n<p>Those letters are the names of teams from a file,the combinations are the matches that should be played, I put them into a graph and then I did the rest of the exercise. My only problem is the quotes thing. Thanks in advance!</p>\n"}, {"tags": ["python", "multithreading", "bash", "scipy"], "answers": [{"comments": [{"owner": {"reputation": 958, "user_id": 6423520, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8fc3e99a3faefae485217a3a7312e6f7?s=128&d=identicon&r=PG&f=1", "display_name": "Monica", "link": "https://stackoverflow.com/users/6423520/monica"}, "edited": false, "score": 0, "creation_date": 1490824708, "post_id": 43104068, "comment_id": 73291308, "body": "Is it going to work out fine if I open a file in a runner function in order to save iteration steps? I got multiply files with the right names, but I have impression that the results are saving randomly."}, {"owner": {"reputation": 1255, "user_id": 7739713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p3hPF.png?s=128&g=1", "display_name": "acidtobi", "link": "https://stackoverflow.com/users/7739713/acidtobi"}, "reply_to_user": {"reputation": 958, "user_id": 6423520, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8fc3e99a3faefae485217a3a7312e6f7?s=128&d=identicon&r=PG&f=1", "display_name": "Monica", "link": "https://stackoverflow.com/users/6423520/monica"}, "edited": false, "score": 0, "creation_date": 1490826266, "post_id": 43104068, "comment_id": 73291874, "body": "Writing to files should work, but keep in mind that the order in which optimize() is called depends on a few factors, see this question: <a href=\"http://stackoverflow.com/questions/17903355\">stackoverflow.com/questions/17903355</a>"}], "tags": [], "owner": {"reputation": 1255, "user_id": 7739713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p3hPF.png?s=128&g=1", "display_name": "acidtobi", "link": "https://stackoverflow.com/users/7739713/acidtobi"}, "is_accepted": true, "score": 0, "last_activity_date": 1490821164, "creation_date": 1490821164, "answer_id": 43104068, "question_id": 43103606, "link": "https://stackoverflow.com/questions/43103606/running-optimizer-in-parallel/43104068#43104068", "title": "running optimizer in parallel", "body": "<p>You can use the multiprocessing module for it and have each call to fmin_powell run in a separate process in parallel. Pool.map() submits the calls to a process pool and returns a list of result values for each value in the parameter list.</p>\n\n<p>See this example code for 4 processes in parallel based on the code given in your question:</p>\n\n<pre><code>from multiprocessing.pool import Pool\n\ndef optimize(f):\n    return opt.fmin_powell(runner, coeff, args=(f,f), disp=0)\n\nf = [1,2,3,4,5,6]\n\np = Pool(processes=4)\nresults = p.map(optimize,f)\n</code></pre>\n"}], "owner": {"reputation": 958, "user_id": 6423520, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8fc3e99a3faefae485217a3a7312e6f7?s=128&d=identicon&r=PG&f=1", "display_name": "Monica", "link": "https://stackoverflow.com/users/6423520/monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 43104068, "answer_count": 1, "score": 0, "last_activity_date": 1490821164, "creation_date": 1490819561, "question_id": 43103606, "link": "https://stackoverflow.com/questions/43103606/running-optimizer-in-parallel", "title": "running optimizer in parallel", "body": "<p>I would like to run the fmin_powell optimizer for different arguments from the f list at the same time.</p>\n\n<pre><code>f = ['1','2','3','4','5','6']\noptg_res = opt.fmin_powell(runner, coeff, args=(f,f), disp=0)\n</code></pre>\n\n<p>Is there any easy method of doing it? Maybe I would use any bash command to run it? </p>\n"}, {"tags": ["python", "flask", "sqlalchemy", "flask-sqlalchemy", "flask-wtforms"], "answers": [{"comments": [{"owner": {"reputation": 536, "user_id": 2732017, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/73912a52c053f171969193f3f9603f1e?s=128&d=identicon&r=PG&f=1", "display_name": "userx", "link": "https://stackoverflow.com/users/2732017/userx"}, "edited": false, "score": 0, "creation_date": 1559820473, "post_id": 43104868, "comment_id": 99543511, "body": "Minor change required -   @app.route(&#39;/myview/&#39;, methods=[&#39;GET&#39;], defaults={&quot;page&quot;: 1}) @app.route(&#39;/myview/&lt;int:page&gt;&#39;,methods=[&#39;GET&#39;]) def view(page):"}], "tags": [], "owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "is_accepted": true, "score": 46, "last_activity_date": 1490824526, "creation_date": 1490824526, "answer_id": 43104868, "question_id": 43103585, "link": "https://stackoverflow.com/questions/43103585/python-flask-sqlalchemy-pagination/43104868#43104868", "title": "Python Flask SQLAlchemy Pagination", "body": "<p>I recommend using Flask-SQLAlchemy's pagination: <a href=\"http://flask-sqlalchemy.pocoo.org/2.1/api/?highlight=pagination#flask.ext.sqlalchemy.Pagination\" rel=\"noreferrer\">http://flask-sqlalchemy.pocoo.org/2.1/api/?highlight=pagination#flask.ext.sqlalchemy.Pagination</a></p>\n\n<p>There's a well-written example here: <a href=\"https://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination\" rel=\"noreferrer\">https://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination</a></p>\n\n<p>Here's the basic idea for the view:</p>\n\n<pre><code>@app.route('/myview/&lt;int:page&gt;',methods=['GET'])\ndef view(page=1):\n    per_page = 10\n    posts = Posts.query.order_by(Posts.time.desc()).paginate(page,per_page,error_out=False)\n    return render_template('view.html',posts=posts)\n</code></pre>\n\n<p>And then for the template (I don't know your posts model so I made something up):</p>\n\n<pre><code>&lt;html&gt;\n  &lt;head&gt;\n    Posts\n  &lt;/head&gt;\n  &lt;body&gt;\n\n{% for post in posts.items %}\n&lt;p&gt;\n  {{ post.post_name }} post body: &lt;b&gt;{{ post.body }}&lt;/b&gt;\n&lt;/p&gt;\n{% endfor %}\n{% if posts.has_prev %}&lt;a href=\"{{ url_for('view', page=posts.prev_num) }}\"&gt;&amp;lt;&amp;lt; Newer posts&lt;/a&gt;{% else %}&amp;lt;&amp;lt; Newer posts{% endif %} | \n{% if posts.has_next %}&lt;a href=\"{{ url_for('view', page=posts.next_num) }}\"&gt;Older posts &amp;gt;&amp;gt;&lt;/a&gt;{% else %}Older posts &amp;gt;&amp;gt;{% endif %}\n\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 3186184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dfc6f90932e5e983a339a22bd8099f6?s=128&d=identicon&r=PG&f=1", "display_name": "user3186184", "link": "https://stackoverflow.com/users/3186184/user3186184"}, "is_accepted": false, "score": 3, "last_activity_date": 1564938304, "creation_date": 1564938304, "answer_id": 57348599, "question_id": 43103585, "link": "https://stackoverflow.com/questions/43103585/python-flask-sqlalchemy-pagination/57348599#57348599", "title": "Python Flask SQLAlchemy Pagination", "body": "<h1>Controller</h1>\n\n<pre><code>@app.route('/', methods=['GET'], defaults={\"page\": 1}) \n@app.route('/&lt;int:page&gt;', methods=['GET'])\ndef index(page):\n    page = page\n    per_page = 2\n    users = User.query.paginate(page,per_page,error_out=False)\n    # print(\"Result......\", users)\n    return render_template(\"index.html\", users=users)\n</code></pre>\n\n<h1>in the View</h1>\n\n<pre><code>{% for user in users.items %}\n    &lt;h1&gt; {{ user.name }} &lt;/h1&gt;\n{% endfor %}\n\n&lt;nav aria-label=\"Page navigation example\"&gt;\n                &lt;ul class=\"pagination\"&gt;\n                    {% if users.has_prev %}\n                      &lt;li class=\"page-item\"&gt; &lt;a class=\"page-link\" href=\"{{ url_for('index', page=users.prev_num) }}\"&gt;Previous&lt;/a&gt;&lt;/li&gt;\n                    {% else %}\n                      &lt;li class=\"page-item\"&gt;&lt;a class=\"page-link btn disabled\" href=\"#\"&gt;Previous&lt;/a&gt;&lt;/li&gt;\n                    {% endif %}\n\n\n                    {% if users.has_next %}\n                      &lt;li class=\"page-item\"&gt; &lt;a class=\"page-link\" href=\"{{ url_for('index', page=users.next_num) }}\"&gt;Next&lt;/a&gt;&lt;/li&gt;\n                    {% else %}\n                      &lt;li class=\"page-item\"&gt;&lt;a class=\"page-link btn disabled\" href=\"#\"&gt;Next&lt;/a&gt;&lt;/li&gt;\n                    {% endif %}\n\n                &lt;/ul&gt;\n              &lt;/nav&gt;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7731688"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31003, "favorite_count": 10, "accepted_answer_id": 43104868, "answer_count": 2, "score": 20, "last_activity_date": 1564938304, "creation_date": 1490819498, "last_edit_date": 1495540465, "question_id": 43103585, "link": "https://stackoverflow.com/questions/43103585/python-flask-sqlalchemy-pagination", "title": "Python Flask SQLAlchemy Pagination", "body": "<p>I am having trouble implementing pagination with Flask-SQLAlchemy or Flask-Pagination, either or. I am unsure how to initialize the pagination, setting pages, determining pages, offest, etc. I am coming from PHP, quite new to Python.</p>\n\n<p>I am querying all the posts in my database</p>\n\n<pre><code>posts = Posts.query.order_by(Posts.time.desc()).all()\n</code></pre>\n\n<p>I have been looking at the following examples:</p>\n\n<ul>\n<li><a href=\"http://www.ergo.io/tutorials/better-pagination-in-flask/better-pagination-in-flask/\" rel=\"noreferrer\">http://www.ergo.io/tutorials/better-pagination-in-flask/better-pagination-in-flask/</a></li>\n<li><a href=\"https://pythonhosted.org/Flask-paginate/\" rel=\"noreferrer\">https://pythonhosted.org/Flask-paginate/</a></li>\n<li><a href=\"https://stackoverflow.com/questions/6282534/sqlalchemy-pagination\">sqlalchemy pagination</a></li>\n</ul>\n\n<p>I am confused on really what to do, the information I am finding greatly differs between articles. It's left me with confusion and not knowing where to begin. I want to query all rows of the database table, limit the results to 20 and paginate. I'm not seeing this clearly.</p>\n"}, {"tags": ["python", "parsing", "ascii"], "comments": [{"owner": {"reputation": 3271, "user_id": 7607701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-0eLxeTB_SdQ/AAAAAAAAAAI/AAAAAAAAABg/XZT1oaa0wqA/photo.jpg?sz=128", "display_name": "Aaron N. Brock", "link": "https://stackoverflow.com/users/7607701/aaron-n-brock"}, "edited": false, "score": 0, "creation_date": 1490819571, "post_id": 43103558, "comment_id": 73288781, "body": "Lists do not have a <code>.split()</code> function. What are you trying to do?"}], "answers": [{"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": true, "score": 0, "last_activity_date": 1490889303, "last_edit_date": 1490889303, "creation_date": 1490824826, "answer_id": 43104939, "question_id": 43103558, "link": "https://stackoverflow.com/questions/43103558/how-to-parse-a-certain-column-from-a-certain-line-in-an-ascii-file/43104939#43104939", "title": "How to parse a certain column from a certain line in an ASCII file?", "body": "<p>I would create a function to do it.<br> \nNote that line and column number are counted from 1, not zero.</p>\n\n<pre><code>def find_line_and_column(filename, line_num, column_num):\n    with open(filename, 'r') as file:\n        for i in range(line_num-1):  # skip over lines before the desired one\n            next(file)\n        line = next(file)  # read the desired line\n        return line.split()[column_num-1]\n\n# sample usage\nprint(find_line_and_column('zz_ssmv11034tS__T0001TTNATS2012021505HP001.Hdr', 4, 3))\n</code></pre>\n\n<p>Alternatively, using the <a href=\"https://docs.python.org/3/library/itertools.html#itertools.islice\" rel=\"nofollow noreferrer\"><code>islice()</code></a> function in <a href=\"https://docs.python.org/3/library/itertools.html#module-itertools\" rel=\"nofollow noreferrer\"><code>itertools</code></a> module would allow it to be done a little bit more succinctly:</p>\n\n<pre><code>import itertools\n\ndef find_line_and_column(filename, line_num, column_num):\n    with open(filename, 'r') as file:\n        line = next(itertools.islice(file, line_num-1, None), None) # get line_num-th line\n        return line.split()[column_num-1]\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 7786760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/41555c8b2cc43699de9566ff5ac331ca?s=128&d=identicon&r=PG&f=1", "display_name": "strak5587", "link": "https://stackoverflow.com/users/7786760/strak5587"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 43104939, "answer_count": 1, "score": 0, "last_activity_date": 1490889303, "creation_date": 1490819395, "last_edit_date": 1490823230, "question_id": 43103558, "link": "https://stackoverflow.com/questions/43103558/how-to-parse-a-certain-column-from-a-certain-line-in-an-ascii-file", "title": "How to parse a certain column from a certain line in an ASCII file?", "body": "<p>I am trying to parse out a string value from a certain column in a certain line in my ASCII file. Below I have included what I have tried to this point, the error I received when I ran this code is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Attribute: 'list' object has no attribute 'split'`\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nf = open('zz_ssmv11034tS__T0001TTNATS2012021505HP001.Hdr', 'r')\n\nline = f.readlines(49)\ncolumns = line.split()\ntime = columns(2)\nprint (time)\n\nf.close()\n</code></pre>\n"}, {"tags": ["python", "scikit-learn"], "comments": [{"owner": {"reputation": 1379, "user_id": 3827381, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/90b7439f0cbd2a1b9f542704d605f098?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Hessner", "link": "https://stackoverflow.com/users/3827381/simon-hessner"}, "edited": false, "score": 0, "creation_date": 1535715410, "post_id": 43103556, "comment_id": 91179667, "body": "Have you found a solution?"}, {"owner": {"reputation": 333, "user_id": 6519962, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bb0b592a103eaf70ba69ddb80ccf1688?s=128&d=identicon&r=PG&f=1", "display_name": "PL3", "link": "https://stackoverflow.com/users/6519962/pl3"}, "reply_to_user": {"reputation": 1379, "user_id": 3827381, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/90b7439f0cbd2a1b9f542704d605f098?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Hessner", "link": "https://stackoverflow.com/users/3827381/simon-hessner"}, "edited": false, "score": 0, "creation_date": 1535809630, "post_id": 43103556, "comment_id": 91207889, "body": "I never did find one already implemented unfortunately. It seems less difficult to me now to implement my self though. Need to create a function that accepts a dict of input parameters (might need a dict with keys for each model with values being a dict of model parameters) that returns the cv score. You probably want to set up the cv train/test sets first so each experiment uses same data. Then I thin you just need to create an iterator for random permutations of the parameters and call the eval function, storing the results."}, {"owner": {"reputation": 1394, "user_id": 4525474, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TyxqmL3pRxU/AAAAAAAAAAI/AAAAAAAAjOo/hXcVmKq1cOo/photo.jpg?sz=128", "display_name": "Bert Kellerman", "link": "https://stackoverflow.com/users/4525474/bert-kellerman"}, "edited": false, "score": 0, "creation_date": 1542612868, "post_id": 43103556, "comment_id": 93616253, "body": "&quot;I&#39;d like to test multiple models that don&#39;t all have the same named parameters. &quot;  Your example code does not demonstrate this requirement."}, {"owner": {"reputation": 333, "user_id": 6519962, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bb0b592a103eaf70ba69ddb80ccf1688?s=128&d=identicon&r=PG&f=1", "display_name": "PL3", "link": "https://stackoverflow.com/users/6519962/pl3"}, "reply_to_user": {"reputation": 1394, "user_id": 4525474, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TyxqmL3pRxU/AAAAAAAAAAI/AAAAAAAAjOo/hXcVmKq1cOo/photo.jpg?sz=128", "display_name": "Bert Kellerman", "link": "https://stackoverflow.com/users/4525474/bert-kellerman"}, "edited": false, "score": 0, "creation_date": 1542637444, "post_id": 43103556, "comment_id": 93628915, "body": "@BertKellerman yes it does:   <a href=\"https://github.com/scikit-learn/scikit-learn/blob/bac89c2/sklearn/decomposition/pca.py#L126\" rel=\"nofollow noreferrer\">github.com/scikit-learn/scikit-learn/blob/bac89c2/sklearn/&hellip;</a>   <a href=\"https://github.com/scikit-learn/scikit-learn/blob/bac89c2/sklearn/feature_selection/univariate_selection.py#L464\" rel=\"nofollow noreferrer\">github.com/scikit-learn/scikit-learn/blob/bac89c2/sklearn/&hellip;</a>"}, {"owner": {"reputation": 1394, "user_id": 4525474, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TyxqmL3pRxU/AAAAAAAAAAI/AAAAAAAAjOo/hXcVmKq1cOo/photo.jpg?sz=128", "display_name": "Bert Kellerman", "link": "https://stackoverflow.com/users/4525474/bert-kellerman"}, "edited": false, "score": 0, "creation_date": 1542644482, "post_id": 43103556, "comment_id": 93633162, "body": "I see. You want to search different Transformers.  The way I&#39;ve done this is by making wrapper classes for the Transformers that have a boolean <code>enabled</code> parameter. Then include them all in the Pipeline. If a transformer wrapper is not enabled, it&#39;s <code>fit</code> and <code>transform</code> do nothing.  I can post code if you want."}, {"owner": {"reputation": 333, "user_id": 6519962, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bb0b592a103eaf70ba69ddb80ccf1688?s=128&d=identicon&r=PG&f=1", "display_name": "PL3", "link": "https://stackoverflow.com/users/6519962/pl3"}, "edited": false, "score": 0, "creation_date": 1542652989, "post_id": 43103556, "comment_id": 93637263, "body": "I&#39;m no longer working on this problem (new job) so it won&#39;t help me, but it may be useful to others that stumble on this question."}], "answers": [{"tags": [], "owner": {"reputation": 1540, "user_id": 5187177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d61ebd66fc4d0f0f2d3415416b489f?s=128&d=identicon&r=PG&f=1", "display_name": "Jacquot", "link": "https://stackoverflow.com/users/5187177/jacquot"}, "is_accepted": false, "score": 0, "last_activity_date": 1553866578, "creation_date": 1553866578, "answer_id": 55418675, "question_id": 43103556, "link": "https://stackoverflow.com/questions/43103556/list-of-parameters-in-sklearn-randomizedsearchcv-like-gridsearchcv/55418675#55418675", "title": "List of parameters in sklearn randomizedSearchCV like GridSearchCV?", "body": "<p>I have found a way around, that relies on duck-typing, and doesn't get too much in the way. </p>\n\n<p>It relies on passing complete estimators as parameters to the pipeline. We first sample the kind of model, and then its parameters. For that we define two classes that can be sampled : </p>\n\n<pre><code>from sklearn.model_selection import ParameterSampler\n\n\nclass EstimatorSampler:\n    \"\"\"\n    Class that holds a model and its parameters distribution.\n    When sampled, the parameters are first sampled and set to the model, \n    which is returned.\n\n    # Arguments\n    ===========\n    model : sklearn.base.BaseEstimator\n    param_distributions : dict\n        Input to ParameterSampler\n\n    # Returns\n    =========\n    sampled : sklearn.base.BaseEstimator\n    \"\"\"\n    def __init__(self, model, param_distributions):\n        self.model = model\n        self.param_distributions = param_distributions\n\n    def rvs(self, random_state=None):\n        sampled_params = next(iter(\n            ParameterSampler(self.param_distributions, \n                             n_iter=1, \n                             random_state=random_state)))\n        return self.model.set_params(**sampled_params)\n\n\nclass ListSampler:\n    \"\"\"\n    List container that when sampled, returns one of its item, \n    with probabilities defined by `probs`.\n\n    # Arguments\n    ===========\n    items : 1-D array-like\n    probs : 1-D array-like of floats\n        If not None, it should be the same length of `items`\n        and sum to 1.\n\n    # Returns\n    =========\n    sampled item\n    \"\"\"\n    def __init__(self, items, probs=None):\n        self.items = items\n        self.probs = probs\n\n    def rvs(self, random_state=None):\n        item = np.random.choice(self.items, p=self.probs)\n        if hasattr(item, 'rvs'):\n            return item.rvs(random_state=random_state)\n        return item\n</code></pre>\n\n<p>And the rest of the code is defined below.</p>\n\n<pre><code>    import numpy as np\n    import matplotlib.pyplot as plt\n    from sklearn.datasets import load_digits\n    from sklearn.model_selection import RandomizedSearchCV\n    from sklearn.pipeline import Pipeline\n    from sklearn.svm import LinearSVC\n    from sklearn.decomposition import PCA, NMF\n    from sklearn.feature_selection import SelectKBest, chi2\n\n    pipe = Pipeline([\n        # the reduce_dim stage is populated by the param_grid\n        ('reduce_dim', None),\n        ('classify', None)\n    ])\n\n    N_FEATURES_OPTIONS = [2, 4, 8]\n    dim_reducers = ListSampler([EstimatorSampler(est, {'n_components': N_FEATURES_OPTIONS})\n                                for est in [PCA(iterated_power=7), NMF()]] + \n                               [EstimatorSampler(SelectKBest(chi2), {'k': N_FEATURES_OPTIONS})])\n\n    C_OPTIONS = [1, 10, 100, 1000]\n    classifiers = EstimatorSampler(LinearSVC(), {'C': C_OPTIONS})\n\n    param_dist = {\n        'reduce_dim': dim_reducers, \n        'classify': classifiers\n    }\n\n    grid = RandomizedSearchCV(pipe, cv=3, n_jobs=2, scoring='accuracy', param_distributions=param_dist)\n    digits = load_digits()\n    grid.fit(digits.data, digits.target)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 678, "user_id": 3660313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BCrZv.jpg?s=128&g=1", "display_name": "Amine Benatmane", "link": "https://stackoverflow.com/users/3660313/amine-benatmane"}, "is_accepted": false, "score": 0, "last_activity_date": 1569499219, "creation_date": 1569499219, "answer_id": 58116388, "question_id": 43103556, "link": "https://stackoverflow.com/questions/43103556/list-of-parameters-in-sklearn-randomizedsearchcv-like-gridsearchcv/58116388#58116388", "title": "List of parameters in sklearn randomizedSearchCV like GridSearchCV?", "body": "<p><a href=\"https://hyperopt.github.io/hyperopt/\" rel=\"nofollow noreferrer\">Hyperopt</a> supports Hyperparameter Tuning across multiple estimators, check this <a href=\"https://github.com/jaberg/hyperopt/wiki/FMin\" rel=\"nofollow noreferrer\">wiki</a> for more details (2.2 A Search Space Example: scikit-learn section).</p>\n\n<p>Check out this <a href=\"http://www.davidsbatista.net/blog/2018/02/23/model_optimization/\" rel=\"nofollow noreferrer\">post</a> if you want to use sklearn's GridSearch to do that. It suggests an implementation of <strong>EstimatorSelectionHelper</strong> estimator which can run different estimators, each with its own grid of parameters.</p>\n"}, {"tags": [], "owner": {"reputation": 1752, "user_id": 9094710, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_cKm8ormGks/AAAAAAAAAAI/AAAAAAAABXQ/foU1k07iisM/photo.jpg?sz=128", "display_name": "Qusai Alothman", "link": "https://stackoverflow.com/users/9094710/qusai-alothman"}, "is_accepted": false, "score": 0, "last_activity_date": 1607148223, "creation_date": 1607148223, "answer_id": 65154270, "question_id": 43103556, "link": "https://stackoverflow.com/questions/43103556/list-of-parameters-in-sklearn-randomizedsearchcv-like-gridsearchcv/65154270#65154270", "title": "List of parameters in sklearn randomizedSearchCV like GridSearchCV?", "body": "<p>This is an old issue that <a href=\"https://github.com/scikit-learn/scikit-learn/issues/12728\" rel=\"nofollow noreferrer\">was resolved</a> for a while now (not sure starting from which scikit-learn version).</p>\n<p>You can now pass a list of dictionaries for <code>RandomizedSearchCV</code> in the <code>param_distributions</code> parameter. Your example code would become:</p>\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom sklearn.datasets import load_digits\nfrom sklearn.model_selection import RandomizedSearchCV\nfrom sklearn.pipeline import Pipeline\nfrom sklearn.svm import LinearSVC\nfrom sklearn.decomposition import PCA, NMF\nfrom sklearn.feature_selection import SelectKBest, chi2\n\npipe = Pipeline([\n    # the reduce_dim stage is populated by the param_grid\n    ('reduce_dim', None),\n    ('classify', LinearSVC())\n])\n\nN_FEATURES_OPTIONS = [2, 4, 8]\nC_OPTIONS = [1, 10, 100, 1000]\nparam_grid = [\n    {\n        'reduce_dim': [PCA(iterated_power=7), NMF()],\n        'reduce_dim__n_components': N_FEATURES_OPTIONS,\n        'classify__C': C_OPTIONS\n    },\n    {\n        'reduce_dim': [SelectKBest(chi2)],\n        'reduce_dim__k': N_FEATURES_OPTIONS,\n        'classify__C': C_OPTIONS\n    },\n]\n\ngrid = RandomizedSearchCV(pipe, cv=3, n_jobs=2, param_distributions=param_grid)\ndigits = load_digits()\ngrid.fit(digits.data, digits.target)\n</code></pre>\n<p>I'm using sklearn version 0.23.1 .</p>\n"}], "owner": {"reputation": 333, "user_id": 6519962, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bb0b592a103eaf70ba69ddb80ccf1688?s=128&d=identicon&r=PG&f=1", "display_name": "PL3", "link": "https://stackoverflow.com/users/6519962/pl3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2000, "favorite_count": 1, "answer_count": 3, "score": 8, "last_activity_date": 1607148223, "creation_date": 1490819390, "last_edit_date": 1552557851, "question_id": 43103556, "link": "https://stackoverflow.com/questions/43103556/list-of-parameters-in-sklearn-randomizedsearchcv-like-gridsearchcv", "title": "List of parameters in sklearn randomizedSearchCV like GridSearchCV?", "body": "<p>I have a problem where I'd like to test multiple models that don't all have the same named parameters. How would you use a list of parameters for a pipeline in <code>RandomizedSearchCV</code> like you can use in this example with <code>GridSearchCV</code>?</p>\n\n<p>Example from:<br>\n<a href=\"https://scikit-learn.org/stable/auto_examples/compose/plot_compare_reduction.html\" rel=\"nofollow noreferrer\">https://scikit-learn.org/stable/auto_examples/compose/plot_compare_reduction.html</a></p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom sklearn.datasets import load_digits\nfrom sklearn.model_selection import GridSearchCV\nfrom sklearn.pipeline import Pipeline\nfrom sklearn.svm import LinearSVC\nfrom sklearn.decomposition import PCA, NMF\nfrom sklearn.feature_selection import SelectKBest, chi2\n\npipe = Pipeline([\n    # the reduce_dim stage is populated by the param_grid\n    ('reduce_dim', None),\n    ('classify', LinearSVC())\n])\n\nN_FEATURES_OPTIONS = [2, 4, 8]\nC_OPTIONS = [1, 10, 100, 1000]\nparam_grid = [\n    {\n        'reduce_dim': [PCA(iterated_power=7), NMF()],\n        'reduce_dim__n_components': N_FEATURES_OPTIONS,\n        'classify__C': C_OPTIONS\n    },\n    {\n        'reduce_dim': [SelectKBest(chi2)],\n        'reduce_dim__k': N_FEATURES_OPTIONS,\n        'classify__C': C_OPTIONS\n    },\n]\n\ngrid = GridSearchCV(pipe, cv=3, n_jobs=2, param_grid=param_grid)\ndigits = load_digits()\ngrid.fit(digits.data, digits.target)\n</code></pre>\n"}, {"tags": ["python", "list", "loops", "pandas", "duplicates"], "answers": [{"comments": [{"owner": {"reputation": 874, "user_id": 7721762, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-u2l91Mj2j4Q/AAAAAAAAAAI/AAAAAAAAEKE/BpSgXT0XdMo/photo.jpg?sz=128", "display_name": "Walt Reed", "link": "https://stackoverflow.com/users/7721762/walt-reed"}, "edited": false, "score": 0, "creation_date": 1490821424, "post_id": 43103863, "comment_id": 73289802, "body": "Thanks JD! Only issue I run into is that the Name is Null for all of the duplicated rows."}, {"owner": {"reputation": 54855, "user_id": 37751, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/GiarY.jpg?s=128&g=1", "display_name": "JD Long", "link": "https://stackoverflow.com/users/37751/jd-long"}, "reply_to_user": {"reputation": 874, "user_id": 7721762, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-u2l91Mj2j4Q/AAAAAAAAAAI/AAAAAAAAEKE/BpSgXT0XdMo/photo.jpg?sz=128", "display_name": "Walt Reed", "link": "https://stackoverflow.com/users/7721762/walt-reed"}, "edited": false, "score": 1, "creation_date": 1490823377, "post_id": 43103863, "comment_id": 73290786, "body": "hmmm.... did you add the items in first? That should give you the right number of rows. then set the name column of the inner df to the name you are interested. That should assign the name to all rows regardless of whether it&#39;s a dupe or not. Where is the Null coming into play? in the inner or outer DF?"}], "tags": [], "owner": {"reputation": 54855, "user_id": 37751, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/GiarY.jpg?s=128&g=1", "display_name": "JD Long", "link": "https://stackoverflow.com/users/37751/jd-long"}, "is_accepted": true, "score": 1, "last_activity_date": 1490820482, "creation_date": 1490820482, "answer_id": 43103863, "question_id": 43103529, "link": "https://stackoverflow.com/questions/43103529/pandas-duplicate-rows-at-iteration/43103863#43103863", "title": "Pandas - Duplicate Rows at Iteration", "body": "<p>There are a handful of ways to do this. From inside your loop you could, after extracting each item push one item and one name into a main dataframe. Or, you could push a bunch of items into one df along with one name and then append that to the main df after each name. Or you could gather up all the things and then append them at the very end. </p>\n\n<p>Here's how you would put all items belonging to one name into a df then append it to a master df. You'd have to do this inside the loop, once for each name:</p>\n\n<pre><code># set this up before the loop\nmainDF = pd.DataFrame( columns=['Name','Items'])\n\n## this gets populated inside the loop\nname = 'John'\nitems = ['Paper','Paper Clips','Pencils']\n\n# inside the loop create a df to hold one name and all the items belonging to that name\ndf = pd.DataFrame( columns=['Name','Items'])\n\n#populate... do items first then fill in all the name with the one name\ndf.Items = items\ndf.Name = name\n\n## then append the above df into the main df\nmainDF = mainDF.append(df)\n</code></pre>\n"}], "owner": {"reputation": 874, "user_id": 7721762, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-u2l91Mj2j4Q/AAAAAAAAAAI/AAAAAAAAEKE/BpSgXT0XdMo/photo.jpg?sz=128", "display_name": "Walt Reed", "link": "https://stackoverflow.com/users/7721762/walt-reed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1205, "favorite_count": 0, "accepted_answer_id": 43103863, "answer_count": 1, "score": 1, "last_activity_date": 1490820482, "creation_date": 1490819315, "question_id": 43103529, "link": "https://stackoverflow.com/questions/43103529/pandas-duplicate-rows-at-iteration", "title": "Pandas - Duplicate Rows at Iteration", "body": "<p>I'm trying to create duplicate rows during a dataframe iteration. Basically, I have two for loops wherein in the first loop, I'm feeding values into an API, and in the second loop, I'm extracting values from the JSON output.</p>\n\n<p>I want to duplicate the current row and create N rows based on how many items are on the list. \nFor example:</p>\n\n<pre><code>Name    Date      Sales     \nJohn    1/1/17    100\nBob     1/2/17    200\n\nitems = []\nfor row in df.sales:\n    url = 'www.samplewebsite.com/values=xyz/APIKEY=MYAPIKEY'\n    result = simplejson.load(urllib.urlopen(url))\n    for i in range(0, len(result['column a'][0]['column b']:\n        items.append(result['column a'][0]['column b'][i]['item'])\n</code></pre>\n\n<p>In this particular loop, two lists are created (one for  John, the other for Bob):</p>\n\n<pre><code>items = ['Paper','Paper Clips','Pencils']\nitems = ['Notebook','Stapler','Highlighter','Pen']\n</code></pre>\n\n<p>Desired output:</p>\n\n<pre><code>Name    Date      Sales     Item\nJohn    1/1/17    100       Paper\nJohn    1/1/17    100       Paper Clips\nJohn    1/1/17    100       Pencils\nBob     1/2/17    200       Notebook\nBob     1/2/17    200       Stapler\nBob     1/2/17    200       Highlighter\nBob     1/2/17    200       Pen\n</code></pre>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "edited": false, "score": 0, "creation_date": 1490819235, "post_id": 43103474, "comment_id": 73288588, "body": "You should check <code>d[0,1]</code> and <code>d[2,1]</code> instead. the first element of the tuple is row index, and the second is col index."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 130643, "user_id": 3923281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNpoa.jpg?s=128&g=1", "display_name": "Alex Riley", "link": "https://stackoverflow.com/users/3923281/alex-riley"}, "edited": false, "score": 0, "creation_date": 1490819403, "post_id": 43103474, "comment_id": 73288699, "body": "@ajcr Ah, sorry, wasn&#39;t aware this was a dupe."}, {"owner": {"reputation": 130643, "user_id": 3923281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNpoa.jpg?s=128&g=1", "display_name": "Alex Riley", "link": "https://stackoverflow.com/users/3923281/alex-riley"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1490823082, "post_id": 43103474, "comment_id": 73290644, "body": "@juanpa.arrivillaga: no problem - your answer here explains the function very well!"}], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 396, "user_id": 5373784, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6ca370224bad0a2795f38007cc05a3f9?s=128&d=identicon&r=PG&f=1", "display_name": "hurrdrought", "link": "https://stackoverflow.com/users/5373784/hurrdrought"}, "edited": false, "score": 0, "creation_date": 1490819805, "post_id": 43103535, "comment_id": 73288929, "body": "@hurrdrought well, this is <code>numpy</code>, which is actually quite different than your typical python library, I would say, But it is pretty internally consistent."}], "tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 2, "last_activity_date": 1490819632, "last_edit_date": 1490819632, "creation_date": 1490819326, "answer_id": 43103535, "question_id": 43103474, "link": "https://stackoverflow.com/questions/43103474/a-numpy-where-error/43103535#43103535", "title": "A numpy.where error?", "body": "<p>The issue is that <code>np.where</code> returns a tuple of arrays with the indices <em>in a given axis</em> of where your condition holds. So, perhaps this makes it clearer:</p>\n\n<pre><code>&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; d = np.array([[ 0.11694612,  0.95137658,  0.70099781,  0.06730629],\n...        [ 0.59989836,  0.52586768,  0.45387929,  0.76093495],\n...        [ 0.036541  ,  0.91714289,  0.2246452 ,  0.40785078]])\n&gt;&gt;&gt; x, y = np.where(d &gt; 0.9)\n&gt;&gt;&gt; d[x[0],y[0]]\n0.95137658000000003\n&gt;&gt;&gt; d[x[1],y[1]]\n0.91714289000000004\n</code></pre>\n\n<p>Note, this works well with the way <code>numpy</code> indexing works:</p>\n\n<pre><code>&gt;&gt;&gt; d[x,y]\narray([ 0.95137658,  0.91714289])\n</code></pre>\n\n<p>Note, this works with any dimensions:</p>\n\n<pre><code>&gt;&gt;&gt; d.reshape(3,2,2)\narray([[[ 0.11694612,  0.95137658],\n        [ 0.70099781,  0.06730629]],\n\n       [[ 0.59989836,  0.52586768],\n        [ 0.45387929,  0.76093495]],\n\n       [[ 0.036541  ,  0.91714289],\n        [ 0.2246452 ,  0.40785078]]])\n&gt;&gt;&gt; d = d.reshape(3,2,2)\n&gt;&gt;&gt; x, y, z = np.where(d &gt; 0.9)\n&gt;&gt;&gt; x\narray([0, 2])\n&gt;&gt;&gt; y\narray([0, 0])\n&gt;&gt;&gt; z\narray([1, 1])\n&gt;&gt;&gt; d[x,y,z]\narray([ 0.95137658,  0.91714289])\n</code></pre>\n"}], "owner": {"reputation": 396, "user_id": 5373784, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6ca370224bad0a2795f38007cc05a3f9?s=128&d=identicon&r=PG&f=1", "display_name": "hurrdrought", "link": "https://stackoverflow.com/users/5373784/hurrdrought"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1139, "favorite_count": 0, "closed_date": 1490819326, "accepted_answer_id": 43103535, "answer_count": 1, "score": 0, "last_activity_date": 1490819632, "creation_date": 1490819130, "question_id": 43103474, "link": "https://stackoverflow.com/questions/43103474/a-numpy-where-error", "closed_reason": "Duplicate", "title": "A numpy.where error?", "body": "<p>I am using numpy.where to find the indices of some values. However, numpy.where yields the wrong indices as you can see below. Can somebody else explain me why I am getting such wrong indices please?</p>\n\n<p>Thanks.</p>\n\n<pre><code>In [1]: d = np.random.rand(3,4)\n\nIn [2]: d\nOut[2]: \narray([[ 0.11694612,  0.95137658,  0.70099781,  0.06730629],\n       [ 0.59989836,  0.52586768,  0.45387929,  0.76093495],\n       [ 0.036541  ,  0.91714289,  0.2246452 ,  0.40785078]])\n\nIn [3]: np.where(d&gt;0.9)\nOut[3]: (array([0, 2]), array([1, 1]))\n</code></pre>\n\n<p>However,</p>\n\n<pre><code>In [4]: d[0,2]\nOut[4]: 0.70099781000000005\nIn[5]: d[1,1]\nOut[5]: 0.52586767999999995\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "boolean", "anagram"], "comments": [{"owner": {"reputation": 875, "user_id": 6918481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949bc6de647c79a6a432bc8ed1a51b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Shiping", "link": "https://stackoverflow.com/users/6918481/shiping"}, "edited": false, "score": 0, "creation_date": 1490820333, "post_id": 43103433, "comment_id": 73289223, "body": "you need to get all the combinations of chars in t and check them against s. it&#39;s not right to sort s."}], "answers": [{"comments": [{"owner": {"reputation": 663, "user_id": 7416542, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/8JmDI.jpg?s=128&g=1", "display_name": "Calvin Ellington", "link": "https://stackoverflow.com/users/7416542/calvin-ellington"}, "edited": false, "score": 0, "creation_date": 1490820945, "post_id": 43103649, "comment_id": 73289549, "body": "I just want to say that both of these answers were very helpful and its hard to pick just one correct one. Is there a way to select two answers? Fairly new to stack overflow"}, {"owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "reply_to_user": {"reputation": 663, "user_id": 7416542, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/8JmDI.jpg?s=128&g=1", "display_name": "Calvin Ellington", "link": "https://stackoverflow.com/users/7416542/calvin-ellington"}, "edited": false, "score": 1, "creation_date": 1490820997, "post_id": 43103649, "comment_id": 73289579, "body": "Nope. Just pick the &quot;most helpful&quot; one (which might be the one you read first) and move on. Plenty of karma lying around..."}], "tags": [], "owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "is_accepted": false, "score": 2, "last_activity_date": 1490819721, "creation_date": 1490819721, "answer_id": 43103649, "question_id": 43103433, "link": "https://stackoverflow.com/questions/43103433/python-2-7-finding-if-some-anagram-of-one-string-is-a-substring-of-another/43103649#43103649", "title": "Python 2.7 finding if some anagram of one string is a substring of another", "body": "<p>I think your problem lies in the \"substring\" requirement. If you sort, you destroy order. Which means that while you can determine that an anagram of string1 is an anagram of a substring of string2, until you actually deal with string2 in order, you won't have a correct answer.</p>\n\n<p>I'd suggest iterating over all the substrings of length <code>len(s1)</code> in <code>s2</code>. This is a straightforward for loop. Once you have the substrings, you can compare them (sorted vs sorted) with <code>s1</code> to decide if there is any rearrangement of <code>s1</code> that yields a contiguous substring of <code>s2</code>.</p>\n\n<p>Viz:</p>\n\n<pre><code>s1 = \"jks\"\ns2 = \"aksjd\"\n\nprint('s1=',s1, ' s2=', s2)\nfor offset in range(len(s2) - len(s1) + 1):\n    ss2 = s2[offset:offset+len(s1)]\n    if sorted(ss2) == sorted(s1):\n        print('{} is an anagram of {} at offset {} in {}'.format(ss2, s1, offset, s2))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "edited": false, "score": 1, "creation_date": 1490819799, "post_id": 43103658, "comment_id": 73288924, "body": "Apparently there <i>is</i> one right way... ;-)"}, {"owner": {"reputation": 663, "user_id": 7416542, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/8JmDI.jpg?s=128&g=1", "display_name": "Calvin Ellington", "link": "https://stackoverflow.com/users/7416542/calvin-ellington"}, "edited": false, "score": 0, "creation_date": 1490821080, "post_id": 43103658, "comment_id": 73289621, "body": "That was beautifully explained, thank you so much for simplifying this for me. I marked this as the answer for this question, thanks again for your help."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1490821303, "post_id": 43103658, "comment_id": 73289744, "body": "Glad to be of help.  You retroactively justify what I got paid when I was teaching.  :-)"}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 4, "last_activity_date": 1490819754, "creation_date": 1490819754, "answer_id": 43103658, "question_id": 43103433, "link": "https://stackoverflow.com/questions/43103433/python-2-7-finding-if-some-anagram-of-one-string-is-a-substring-of-another/43103658#43103658", "title": "Python 2.7 finding if some anagram of one string is a substring of another", "body": "<p>You're very much on the right track.  First, please note that there is no loop in your second attempt.</p>\n\n<p>The problem is that you can't simply sort <em>all</em> of s and then look for sorted(t) in that.  Rather, you have to consider each len(t) sized substring of s, and check <em>that</em> against the sorted t.  Consider the trivial example:</p>\n\n<pre><code>t = \"abd\"\ns = \"abdc\"\n</code></pre>\n\n<p><strong>s</strong> trivially contains <strong>t</strong>.  However, when you sort them, you get the strings <strong>abd</strong> and <strong>abcd</strong>, and the <strong>in</strong> comparison fails.  The sorting gets other letters in the way.</p>\n\n<p>Instead, you need to step through <strong>s</strong> in chunks the size of <strong>t</strong>.</p>\n\n<pre><code>t_len = len(t)\ns_len = len(s)\nt_sort = sorted(t)\nfor start in range(s_len - t_len + 1):\n   chunk = s[start:start+t_len]\n   if t_sort == sorted(chunk):\n       # SUCCESS!!\n</code></pre>\n"}], "owner": {"reputation": 663, "user_id": 7416542, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/8JmDI.jpg?s=128&g=1", "display_name": "Calvin Ellington", "link": "https://stackoverflow.com/users/7416542/calvin-ellington"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 779, "favorite_count": 0, "closed_date": 1490820171, "accepted_answer_id": 43103658, "answer_count": 2, "score": 2, "last_activity_date": 1490887238, "creation_date": 1490819007, "last_edit_date": 1490887238, "question_id": 43103433, "link": "https://stackoverflow.com/questions/43103433/python-2-7-finding-if-some-anagram-of-one-string-is-a-substring-of-another", "closed_reason": "Duplicate", "title": "Python 2.7 finding if some anagram of one string is a substring of another", "body": "<p>EDIT: Posting my final solution because this was a very helpful thread and I want to add some finality to it. Using the advice from both answers below I was able to craft a solution. I added a helper function in which I defined an anagram. Here is my final solution:</p>\n\n<pre><code>def anagram(s1, s2):\n    s1 = list(s1)\n    s2 = list(s2)\n    s1.sort()\n    s2.sort()\n    return s1 == s2\n\ndef Question1(t, s):\n    t_len = len(t)\n    s_len = len(s)\n    t_sort = sorted(t)\n    for start in range(s_len - t_len + 1):\n        if anagram(s[start: start+t_len], t):\n            return True\n    return False\n\nprint Question1(\"app\", \"paple\")\n</code></pre>\n\n<hr>\n\n<p>I am working on some practice technical interview questions and I'm stuck on the following question:</p>\n\n<p><code>Find whether an anagram of string t is a substring of s</code></p>\n\n<p>I have worked out the following two variants of my code, and a solution to this I believe lies in a cross between the two. The problem I am having is that the first code always prints <code>False.</code>, regardless of input. The second variation works to some degree.  However, it cannot sort individual letters. For example <code>t=jks s=jksd</code> will print <code>True!</code> however <code>t=kjs s=jksd</code> will print <code>False.</code></p>\n\n<pre><code>def Question1():\n    # Define strings as raw user input.\n    t = raw_input(\"Enter phrase t:\")\n    s = raw_input(\"Enter phrase s:\")\n    # Use the sorted function to find if t in s\n    if sorted(t.lower()) in sorted(s.lower()):\n        print(\"True!\")\n    else:\n        print(\"False.\")\n\nQuestion1()\n</code></pre>\n\n<p>Working variant:</p>\n\n<pre><code>def Question1():\n    # Define strings as raw user input.\n    t = raw_input(\"Enter phrase t:\")\n    s = raw_input(\"Enter phrase s:\")\n    # use a loop to find if t is in s.\n    if t.lower() in s.lower():\n        print(\"True!\")\n    else:\n        print(\"False.\")\n\nQuestion1()\n</code></pre>\n\n<p>I believe there is a solution that lies between these two, but I'm having trouble figuring out how to use <code>sorted</code> in this situation.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5359970"}, "edited": false, "score": 1, "creation_date": 1490819124, "post_id": 43103269, "comment_id": 73288524, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/20380276/typeerror-accept-missing-2-required-arguments-still-functional\">TypeError: accept missing 2 required arguments (Still functional)</a>"}, {"owner": {"reputation": 5521, "user_id": 755851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bb0ef4d5aebec860f85f7c76b894fd?s=128&d=identicon&r=PG", "display_name": "Foon", "link": "https://stackoverflow.com/users/755851/foon"}, "edited": false, "score": 0, "creation_date": 1490830796, "post_id": 43103269, "comment_id": 73293290, "body": "Can you show how you&#39;re calling SodaCan (i.e. are you doing x = SodaCan(5,4) ?)  (If your possible duplicate is correct, they you also need to show more code.)"}], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1490818940, "post_id": 43103300, "comment_id": 73288423, "body": "@MakieMichaux yes, it seems you have <i>multiple</i> errors. The message is pretty revealing too, <code>self._volume</code> is not defined. I urge you to think about why this is the case instead of getting people here to debug your code for you piece by piece (which isn&#39;t what this site is designed for)."}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": false, "score": 2, "last_activity_date": 1490819470, "last_edit_date": 1490819470, "creation_date": 1490818511, "answer_id": 43103300, "question_id": 43103269, "link": "https://stackoverflow.com/questions/43103269/builtins-typeerror-init-missing-2-required-positional-arguments-height/43103300#43103300", "title": "builtins.TypeError: __init__() missing 2 required positional arguments: &#39;height&#39; and &#39;radius&#39;", "body": "<p>When you define the initializer like this:</p>\n\n<pre><code>class SodaCan:\n\n    def __init__(self, height, radius):\n        ...\n</code></pre>\n\n<p>You are saying that height and radius are <em>required</em>.  They must be specified in order to create a soda can instance.  </p>\n\n<pre><code>mySodaCan = SodaCan(height=10, radius=4)\n</code></pre>\n\n<p>If you want them to be optional, you may specify default values for those arguments when you define the <code>__init__</code> method.  Then when you create an instance, the arguments will take the default values if omitted when creating an instance.  </p>\n"}, {"tags": [], "owner": {"reputation": 952, "user_id": 5505161, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c62b36b7d0f6241b61ef9e9a671240a5?s=128&d=identicon&r=PG&f=1", "display_name": "lordingtar", "link": "https://stackoverflow.com/users/5505161/lordingtar"}, "is_accepted": false, "score": 2, "last_activity_date": 1490818532, "creation_date": 1490818532, "answer_id": 43103308, "question_id": 43103269, "link": "https://stackoverflow.com/questions/43103269/builtins-typeerror-init-missing-2-required-positional-arguments-height/43103308#43103308", "title": "builtins.TypeError: __init__() missing 2 required positional arguments: &#39;height&#39; and &#39;radius&#39;", "body": "<p>You need the pass the height and radius when you initialize the class. Arguments in the init class mean that they have to be passed when you initialize the class. Something like this would work:</p>\n\n<pre><code>height = 40\nradius = 10\na = SodaCan(height, radius)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5359970"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 812, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1490882486, "creation_date": 1490818399, "last_edit_date": 1490882486, "question_id": 43103269, "link": "https://stackoverflow.com/questions/43103269/builtins-typeerror-init-missing-2-required-positional-arguments-height", "title": "builtins.TypeError: __init__() missing 2 required positional arguments: &#39;height&#39; and &#39;radius&#39;", "body": "<p>I am getting an error that says I am missing 2 required positional arguments: 'height' and 'radius.' I feel like I have tried everything but I know I am missing something small. Any help? \nThanks    </p>\n\n<pre><code># import math\nimport math\n\nclass SodaCan :\n    # Constructs sodaCan with a given height and radius\n    # @param height = given height and radius = given radius\n    def __init__(self, height, radius):\n        self._height = height\n        self._radius = radius\n\n    # Constructs the volume with the given height and radius\n    def volume(self):\n        self._volume = (pi * (self._radius ** 2) * self._height)\n\n    # Constructs the Surface Area with the given height and radius\n    def surfaceArea(self):\n        self._surfaceArea = (2 * pi * self._radius * self._height) + (2 * pi   * (self._radius)**2)\n\n    # Return the volume\n    def getVolume(self):\n        return self._volume\n\n    # Return the Surface Area\n    def getSurfaceArea(self):\n        return self._surfaceArea\n</code></pre>\n\n<p>I am not sure what I am doing wrong here. Below there is the test program for my code.</p>\n\n<pre><code>## \n# This program test the sodaCan.py\n##\n\n# import math so the program can read pi\nimport math\n\n# from the file folder, ipmort the code from program 'sodaCan'\nfrom sodaCan import SodaCan\n\nmySodaCan = SodaCan()\nmySodaCan.height(10)\nmySodaCan.radius(4)\n\nprint(mySodaCan.getVolume())\nprint(mySodaCan.getSurfaceArea())\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "word-embedding"], "comments": [{"owner": {"reputation": 4503, "user_id": 6490351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e233e0c24ba66b67585e9c9efdab6c5?s=128&d=identicon&r=PG&f=1", "display_name": "Yao Zhang", "link": "https://stackoverflow.com/users/6490351/yao-zhang"}, "edited": false, "score": 0, "creation_date": 1491279310, "post_id": 43103265, "comment_id": 73468286, "body": "Is this conceptually possible? The forward lookup is one-to-one mapping. Is the reversed function also a one-to-one mapping&gt;"}], "answers": [{"tags": [], "owner": {"reputation": 955, "user_id": 507062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d8849269f09c48542a42ef17a9706da?s=128&d=identicon&r=PG", "display_name": "Mattias Arro", "link": "https://stackoverflow.com/users/507062/mattias-arro"}, "is_accepted": false, "score": 3, "last_activity_date": 1507129072, "creation_date": 1507129072, "answer_id": 46568057, "question_id": 43103265, "link": "https://stackoverflow.com/questions/43103265/how-to-do-a-reverse-operation-to-tf-nn-embedding-lookup/46568057#46568057", "title": "How to do a reverse operation to tf.nn.embedding_lookup?", "body": "<p>You can use the cosine distance between the embedding vectors in <code>W</code> and <code>embedded_chars</code>:</p>\n\n<pre><code># assume embedded_chars.shape == (batch_size, embedding_size)\nemb_distances = tf.matmul( # shape == (vocab_size, batch_size)\n    tf.nn.l2_normalize(W, dim=1),\n    tf.nn.l2_normalize(embedded_chars, dim=1),\n    transpose_b=True)\ntoken_ids = tf.argmax(emb_distances, axis=0) # shape == (batch_size)\n</code></pre>\n\n<p>Here <code>emb_distances</code> is a dot product of the L2-normalized matrices <code>W</code> and <code>transpose(embedded_chars)</code>, which is the same as cosine distance between all the vectors in <code>W</code> and all the vectors in <code>embedded_chars</code>. The argmax simply gives us the index of the highest value in each column of <code>emb_distances</code>.</p>\n\n<p>@Yao Zhang: If all embeddings in <code>W</code> are different, as they should be, then this will give you the correct result: cosine distance is always between [-1, 1] and cos(vector_a, vector_a) == 1.</p>\n\n<p>Note that often you shouldn't need to do this kind of conversion from embedding to token index: usually you can directly take the value of the tensor that is passed as the second argument to <code>tf.nn.embedding_embedding_lookup</code>, which is a tensor of token indices.</p>\n"}], "owner": {"reputation": 117, "user_id": 4717622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf6935af744f76b32fac393e9017d1d?s=128&d=identicon&r=PG", "display_name": "Mihail Salnikov", "link": "https://stackoverflow.com/users/4717622/mihail-salnikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3964, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1541621516, "creation_date": 1490818387, "last_edit_date": 1541621516, "question_id": 43103265, "link": "https://stackoverflow.com/questions/43103265/how-to-do-a-reverse-operation-to-tf-nn-embedding-lookup", "title": "How to do a reverse operation to tf.nn.embedding_lookup?", "body": "<p>I have an <code>embedded_chars</code> array, created with this code:</p>\n\n<pre><code>self.input_x = tf.placeholder(tf.int32, [None, sequence_length], name=\"input_x\")\n\nW = tf.Variable( \n    tf.random_uniform([vocab_size, embedding_size], -1.0, 1.0),\n    name=\"W\"\n    )\nself.embedded_chars = tf.nn.embedding_lookup(W, self.input_x) \n</code></pre>\n\n<p>I want get <code>input_x</code> array if I have only <code>embedded_chars</code> and <code>W</code>.</p>\n\n<p>How can I get it?</p>\n\n<p>Thanks!</p>\n"}]